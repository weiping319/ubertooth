ARM GAS  /tmp/ccXEAChk.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccXEAChk.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	payload:
  81 002c CA       		.byte	-54
  82 002d AA       		.byte	-86
  83 002e AA       		.byte	-86
  84 002f AA       		.byte	-86
  85 0030 AA       		.byte	-86
  86 0031 AA       		.byte	-86
  87 0032 AA       		.byte	-86
  88 0033 AA       		.byte	-86
  89 0034 AA       		.byte	-86
  90 0035 AA       		.byte	-86
  91 0036 AA       		.byte	-86
  92 0037 AA       		.byte	-86
  93 0038 AA       		.byte	-86
  94 0039 AA       		.byte	-86
  95 003a AA       		.byte	-86
  96 003b AA       		.byte	-86
  97 003c AA       		.byte	-86
  98 003d AA       		.byte	-86
  99 003e AA       		.byte	-86
 100 003f AA       		.byte	-86
 101              		.align	2
 104              	whitening:
 105 0040 01       		.byte	1
 106 0041 01       		.byte	1
 107 0042 01       		.byte	1
 108 0043 01       		.byte	1
 109 0044 00       		.byte	0
 110 0045 01       		.byte	1
 111 0046 00       		.byte	0
 112 0047 01       		.byte	1
 113 0048 00       		.byte	0
 114 0049 01       		.byte	1
 115 004a 00       		.byte	0
 116 004b 00       		.byte	0
 117 004c 00       		.byte	0
 118 004d 00       		.byte	0
 119 004e 01       		.byte	1
 120 004f 00       		.byte	0
 121 0050 01       		.byte	1
 122 0051 01       		.byte	1
 123 0052 00       		.byte	0
 124 0053 01       		.byte	1
ARM GAS  /tmp/ccXEAChk.s 			page 3


 125 0054 01       		.byte	1
 126 0055 01       		.byte	1
 127 0056 01       		.byte	1
 128 0057 00       		.byte	0
 129 0058 00       		.byte	0
 130 0059 01       		.byte	1
 131 005a 01       		.byte	1
 132 005b 01       		.byte	1
 133 005c 00       		.byte	0
 134 005d 00       		.byte	0
 135 005e 01       		.byte	1
 136 005f 00       		.byte	0
 137 0060 01       		.byte	1
 138 0061 00       		.byte	0
 139 0062 01       		.byte	1
 140 0063 01       		.byte	1
 141 0064 00       		.byte	0
 142 0065 00       		.byte	0
 143 0066 01       		.byte	1
 144 0067 01       		.byte	1
 145 0068 00       		.byte	0
 146 0069 00       		.byte	0
 147 006a 00       		.byte	0
 148 006b 00       		.byte	0
 149 006c 00       		.byte	0
 150 006d 01       		.byte	1
 151 006e 01       		.byte	1
 152 006f 00       		.byte	0
 153 0070 01       		.byte	1
 154 0071 01       		.byte	1
 155 0072 00       		.byte	0
 156 0073 01       		.byte	1
 157 0074 00       		.byte	0
 158 0075 01       		.byte	1
 159 0076 01       		.byte	1
 160 0077 01       		.byte	1
 161 0078 00       		.byte	0
 162 0079 01       		.byte	1
 163 007a 00       		.byte	0
 164 007b 00       		.byte	0
 165 007c 00       		.byte	0
 166 007d 01       		.byte	1
 167 007e 01       		.byte	1
 168 007f 00       		.byte	0
 169 0080 00       		.byte	0
 170 0081 01       		.byte	1
 171 0082 00       		.byte	0
 172 0083 00       		.byte	0
 173 0084 00       		.byte	0
 174 0085 01       		.byte	1
 175 0086 00       		.byte	0
 176 0087 00       		.byte	0
 177 0088 00       		.byte	0
 178 0089 00       		.byte	0
 179 008a 00       		.byte	0
 180 008b 00       		.byte	0
 181 008c 01       		.byte	1
ARM GAS  /tmp/ccXEAChk.s 			page 4


 182 008d 00       		.byte	0
 183 008e 00       		.byte	0
 184 008f 01       		.byte	1
 185 0090 00       		.byte	0
 186 0091 00       		.byte	0
 187 0092 01       		.byte	1
 188 0093 01       		.byte	1
 189 0094 00       		.byte	0
 190 0095 01       		.byte	1
 191 0096 00       		.byte	0
 192 0097 00       		.byte	0
 193 0098 01       		.byte	1
 194 0099 01       		.byte	1
 195 009a 01       		.byte	1
 196 009b 01       		.byte	1
 197 009c 00       		.byte	0
 198 009d 01       		.byte	1
 199 009e 01       		.byte	1
 200 009f 01       		.byte	1
 201 00a0 00       		.byte	0
 202 00a1 00       		.byte	0
 203 00a2 00       		.byte	0
 204 00a3 00       		.byte	0
 205 00a4 01       		.byte	1
 206 00a5 01       		.byte	1
 207 00a6 01       		.byte	1
 208 00a7 01       		.byte	1
 209 00a8 01       		.byte	1
 210 00a9 01       		.byte	1
 211 00aa 01       		.byte	1
 212 00ab 00       		.byte	0
 213 00ac 00       		.byte	0
 214 00ad 00       		.byte	0
 215 00ae 01       		.byte	1
 216 00af 01       		.byte	1
 217 00b0 01       		.byte	1
 218 00b1 00       		.byte	0
 219 00b2 01       		.byte	1
 220 00b3 01       		.byte	1
 221 00b4 00       		.byte	0
 222 00b5 00       		.byte	0
 223 00b6 00       		.byte	0
 224 00b7 01       		.byte	1
 225 00b8 00       		.byte	0
 226 00b9 01       		.byte	1
 227 00ba 00       		.byte	0
 228 00bb 00       		.byte	0
 229 00bc 01       		.byte	1
 230 00bd 00       		.byte	0
 231 00be 01       		.byte	1
 232 00bf 00       		.align	2
 235              	whitening_index:
 236 00c0 46       		.byte	70
 237 00c1 3E       		.byte	62
 238 00c2 78       		.byte	120
 239 00c3 6F       		.byte	111
 240 00c4 4D       		.byte	77
ARM GAS  /tmp/ccXEAChk.s 			page 5


 241 00c5 2E       		.byte	46
 242 00c6 0F       		.byte	15
 243 00c7 65       		.byte	101
 244 00c8 42       		.byte	66
 245 00c9 27       		.byte	39
 246 00ca 1F       		.byte	31
 247 00cb 1A       		.byte	26
 248 00cc 50       		.byte	80
 249 00cd 53       		.byte	83
 250 00ce 7D       		.byte	125
 251 00cf 59       		.byte	89
 252 00d0 0A       		.byte	10
 253 00d1 23       		.byte	35
 254 00d2 08       		.byte	8
 255 00d3 36       		.byte	54
 256 00d4 7A       		.byte	122
 257 00d5 11       		.byte	17
 258 00d6 21       		.byte	33
 259 00d7 00       		.byte	0
 260 00d8 3A       		.byte	58
 261 00d9 73       		.byte	115
 262 00da 06       		.byte	6
 263 00db 5E       		.byte	94
 264 00dc 56       		.byte	86
 265 00dd 31       		.byte	49
 266 00de 34       		.byte	52
 267 00df 14       		.byte	20
 268 00e0 28       		.byte	40
 269 00e1 1B       		.byte	27
 270 00e2 54       		.byte	84
 271 00e3 5A       		.byte	90
 272 00e4 3F       		.byte	63
 273 00e5 70       		.byte	112
 274 00e6 2F       		.byte	47
 275 00e7 66       		.byte	102
 276              		.align	2
 279              	hop_interval_lut:
 280 00e8 00       		.byte	0
 281 00e9 01       		.byte	1
 282 00ea 13       		.byte	19
 283 00eb 19       		.byte	25
 284 00ec 1C       		.byte	28
 285 00ed 0F       		.byte	15
 286 00ee 1F       		.byte	31
 287 00ef 10       		.byte	16
 288 00f0 0E       		.byte	14
 289 00f1 21       		.byte	33
 290 00f2 1A       		.byte	26
 291 00f3 1B       		.byte	27
 292 00f4 22       		.byte	34
 293 00f5 14       		.byte	20
 294 00f6 08       		.byte	8
 295 00f7 05       		.byte	5
 296 00f8 07       		.byte	7
 297 00f9 18       		.byte	24
 298 00fa 23       		.byte	35
 299 00fb 02       		.byte	2
ARM GAS  /tmp/ccXEAChk.s 			page 6


 300 00fc 0D       		.byte	13
 301 00fd 1E       		.byte	30
 302 00fe 20       		.byte	32
 303 00ff 1D       		.byte	29
 304 0100 11       		.byte	17
 305 0101 03       		.byte	3
 306 0102 0A       		.byte	10
 307 0103 0B       		.byte	11
 308 0104 04       		.byte	4
 309 0105 17       		.byte	23
 310 0106 15       		.byte	21
 311 0107 06       		.byte	6
 312 0108 16       		.byte	22
 313 0109 09       		.byte	9
 314 010a 0C       		.byte	12
 315 010b 12       		.byte	18
 316 010c 24       		.byte	36
 317 010d 000000   		.align	2
 320              	whitening_word:
 321 0110 40B2BCC3 		.word	-1011043776
 322 0114 1F374A5F 		.word	1598699295
 323 0118 85F69C9A 		.word	-1700989307
 324 011c C1D6C544 		.word	1153816257
 325 0120 2059DEE1 		.word	-505521888
 326 0124 8F1BA5AF 		.word	-1348134001
 327 0128 427B4ECD 		.word	-850494654
 328 012c 60EB6222 		.word	576908128
 329 0130 902CEFF0 		.word	-252760944
 330 0134 C78DD257 		.word	1473416647
 331 0138 A13DA766 		.word	1722236321
 332 013c B0753111 		.word	288454064
 333 0140 8940B2BC 		.word	-1129168759
 334 0144 C31F374A 		.word	1245126595
 335 0148 5F85F69C 		.word	-1661565601
 336 014c 9AC1D6C5 		.word	-975781478
 337 0150 442059DE 		.word	-564584380
 338 0154 E18F1BA5 		.word	-1524920351
 339 0158 AF427B4E 		.word	1316700847
 340 015c CD60EB62 		.word	1659592909
 341 0160 22902CEF 		.word	-282292190
 342 0164 F0C78DD2 		.word	-762460176
 343 0168 57A13DA7 		.word	-1489133225
 344 016c 66B07531 		.word	829796454
 345 0170 D257A13D 		.word	1033983954
 346 0174 A766B075 		.word	1974494887
 347 0178 31114896 		.word	-1773661903
 348 017c 77F8E346 		.word	1189345399
 349 0180 E9ABD09E 		.word	-1630491671
 350 0184 5333D8BA 		.word	-1160236205
 351 0188 980824CB 		.word	-886830952
 352 018c 3BFC71A3 		.word	-1552810949
 353 0190 F45568CF 		.word	-815245836
 354 0194 A9196C5D 		.word	1567365545
 355 0198 4C0492E5 		.word	-443415476
 356 019c 1DFEB851 		.word	1371078173
 357 01a0 1BA5AF42 		.word	1118807323
 358 01a4 7B4ECD60 		.word	1624067707
ARM GAS  /tmp/ccXEAChk.s 			page 7


 359 01a8 EB622290 		.word	-1876794645
 360 01ac 2CEFF0C7 		.word	-940511444
 361 01b0 8DD257A1 		.word	-1588079987
 362 01b4 3DA766B0 		.word	-1335449795
 363 01b8 75311148 		.word	1209086325
 364 01bc 9677F8E3 		.word	-470255722
 365 01c0 46E9ABD0 		.word	-794039994
 366 01c4 9E5333D8 		.word	-667724898
 367 01c8 BA980824 		.word	604543162
 368 01cc CB3BFC71 		.word	1912355787
 369 01d0 6479873F 		.word	1065843044
 370 01d4 6E94BE0A 		.word	180261998
 371 01d8 ED393583 		.word	-2093663763
 372 01dc AD8B8940 		.word	1082756013
 373 01e0 B2BCC31F 		.word	532921522
 374 01e4 374A5F85 		.word	-2057352649
 375 01e8 F69C9AC1 		.word	-1046831882
 376 01ec D6C54420 		.word	541378006
 377 01f0 59DEE18F 		.word	-1881022887
 378 01f4 1BA5AF42 		.word	1118807323
 379 01f8 7B4ECD60 		.word	1624067707
 380 01fc EB622290 		.word	-1876794645
 381 0200 AD8B8940 		.word	1082756013
 382 0204 B2BCC31F 		.word	532921522
 383 0208 374A5F85 		.word	-2057352649
 384 020c F69C9AC1 		.word	-1046831882
 385 0210 D6C54420 		.word	541378006
 386 0214 59DEE18F 		.word	-1881022887
 387 0218 1BA5AF42 		.word	1118807323
 388 021c 7B4ECD60 		.word	1624067707
 389 0220 EB622290 		.word	-1876794645
 390 0224 2CEFF0C7 		.word	-940511444
 391 0228 8DD257A1 		.word	-1588079987
 392 022c 3DA766B0 		.word	-1335449795
 393 0230 F69C9AC1 		.word	-1046831882
 394 0234 D6C54420 		.word	541378006
 395 0238 59DEE18F 		.word	-1881022887
 396 023c 1BA5AF42 		.word	1118807323
 397 0240 7B4ECD60 		.word	1624067707
 398 0244 EB622290 		.word	-1876794645
 399 0248 2CEFF0C7 		.word	-940511444
 400 024c 8DD257A1 		.word	-1588079987
 401 0250 3DA766B0 		.word	-1335449795
 402 0254 75311148 		.word	1209086325
 403 0258 9677F8E3 		.word	-470255722
 404 025c 46E9ABD0 		.word	-794039994
 405 0260 3F6E94BE 		.word	-1097568705
 406 0264 0AED3935 		.word	892988682
 407 0268 83AD8B89 		.word	-1987334781
 408 026c 40B2BCC3 		.word	-1011043776
 409 0270 1F374A5F 		.word	1598699295
 410 0274 85F69C9A 		.word	-1700989307
 411 0278 C1D6C544 		.word	1153816257
 412 027c 2059DEE1 		.word	-505521888
 413 0280 8F1BA5AF 		.word	-1348134001
 414 0284 427B4ECD 		.word	-850494654
 415 0288 60EB6222 		.word	576908128
ARM GAS  /tmp/ccXEAChk.s 			page 8


 416 028c 902CEFF0 		.word	-252760944
 417 0290 0824CB3B 		.word	1003168776
 418 0294 FC71A3F4 		.word	-190615044
 419 0298 5568CFA9 		.word	-1446025131
 420 029c 196C5D4C 		.word	1281190937
 421 02a0 0492E51D 		.word	501584388
 422 02a4 FEB851FA 		.word	-95307522
 423 02a8 2AB4E7D4 		.word	-723012566
 424 02ac 0CB62E26 		.word	640595468
 425 02b0 02C9F20E 		.word	250792194
 426 02b4 7FDC287D 		.word	2099829887
 427 02b8 15DA736A 		.word	1785977365
 428 02bc 065B1713 		.word	320297734
 429 02c0 C1D6C544 		.word	1153816257
 430 02c4 2059DEE1 		.word	-505521888
 431 02c8 8F1BA5AF 		.word	-1348134001
 432 02cc 427B4ECD 		.word	-850494654
 433 02d0 60EB6222 		.word	576908128
 434 02d4 902CEFF0 		.word	-252760944
 435 02d8 C78DD257 		.word	1473416647
 436 02dc A13DA766 		.word	1722236321
 437 02e0 B0753111 		.word	288454064
 438 02e4 489677F8 		.word	-126380472
 439 02e8 E346E9AB 		.word	-1410775325
 440 02ec D09E5333 		.word	861118160
 441 02f0 9AC1D6C5 		.word	-975781478
 442 02f4 442059DE 		.word	-564584380
 443 02f8 E18F1BA5 		.word	-1524920351
 444 02fc AF427B4E 		.word	1316700847
 445 0300 CD60EB62 		.word	1659592909
 446 0304 22902CEF 		.word	-282292190
 447 0308 F0C78DD2 		.word	-762460176
 448 030c 57A13DA7 		.word	-1489133225
 449 0310 66B07531 		.word	829796454
 450 0314 11489677 		.word	2006337553
 451 0318 F8E346E9 		.word	-381230088
 452 031c ABD09E53 		.word	1402917035
 453 0320 5333D8BA 		.word	-1160236205
 454 0324 980824CB 		.word	-886830952
 455 0328 3BFC71A3 		.word	-1552810949
 456 032c F45568CF 		.word	-815245836
 457 0330 A9196C5D 		.word	1567365545
 458 0334 4C0492E5 		.word	-443415476
 459 0338 1DFEB851 		.word	1371078173
 460 033c FA2AB4E7 		.word	-407622918
 461 0340 D40CB62E 		.word	783682772
 462 0344 2602C9F2 		.word	-221707738
 463 0348 0E7FDC28 		.word	685539086
 464 034c 7D15DA73 		.word	1943672189
 465 0350 2CEFF0C7 		.word	-940511444
 466 0354 8DD257A1 		.word	-1588079987
 467 0358 3DA766B0 		.word	-1335449795
 468 035c 75311148 		.word	1209086325
 469 0360 9677F8E3 		.word	-470255722
 470 0364 46E9ABD0 		.word	-794039994
 471 0368 9E5333D8 		.word	-667724898
 472 036c BA980824 		.word	604543162
ARM GAS  /tmp/ccXEAChk.s 			page 9


 473 0370 CB3BFC71 		.word	1912355787
 474 0374 A3F45568 		.word	1750463651
 475 0378 CFA9196C 		.word	1813621199
 476 037c 5D4C0492 		.word	-1845212067
 477 0380 E51DFEB8 		.word	-1191305755
 478 0384 51FA2AB4 		.word	-1272251823
 479 0388 E7D40CB6 		.word	-1240673049
 480 038c 2E2602C9 		.word	-922606034
 481 0390 F20E7FDC 		.word	-595652878
 482 0394 287D15DA 		.word	-636125912
 483 0398 736A065B 		.word	1527147123
 484 039c 17138164 		.word	1686180631
 485 03a0 79873F6E 		.word	1849657209
 486 03a4 94BE0AED 		.word	-318062956
 487 03a8 393583AD 		.word	-1383910087
 488 03ac 8B8940B2 		.word	-1304393333
 489 03b0 BE0AED39 		.word	971836094
 490 03b4 3583AD8B 		.word	-1951562955
 491 03b8 8940B2BC 		.word	-1129168759
 492 03bc C31F374A 		.word	1245126595
 493 03c0 5F85F69C 		.word	-1661565601
 494 03c4 9AC1D6C5 		.word	-975781478
 495 03c8 442059DE 		.word	-564584380
 496 03cc E18F1BA5 		.word	-1524920351
 497 03d0 AF427B4E 		.word	1316700847
 498 03d4 CD60EB62 		.word	1659592909
 499 03d8 22902CEF 		.word	-282292190
 500 03dc F0C78DD2 		.word	-762460176
 501 03e0 77F8E346 		.word	1189345399
 502 03e4 E9ABD09E 		.word	-1630491671
 503 03e8 5333D8BA 		.word	-1160236205
 504 03ec 980824CB 		.word	-886830952
 505 03f0 3BFC71A3 		.word	-1552810949
 506 03f4 F45568CF 		.word	-815245836
 507 03f8 A9196C5D 		.word	1567365545
 508 03fc 4C0492E5 		.word	-443415476
 509 0400 1DFEB851 		.word	1371078173
 510 0404 FA2AB4E7 		.word	-407622918
 511 0408 D40CB62E 		.word	783682772
 512 040c 2602C9F2 		.word	-221707738
 513 0410 D09E5333 		.word	861118160
 514 0414 D8BA9808 		.word	144227032
 515 0418 24CB3BFC 		.word	-63190236
 516 041c 71A3F455 		.word	1442095985
 517 0420 68CFA919 		.word	430559080
 518 0424 6C5D4C04 		.word	72113516
 519 0428 92E51DFE 		.word	-31595118
 520 042c B851FA2A 		.word	721047992
 521 0430 B4E7D40C 		.word	215279540
 522 0434 B62E2602 		.word	36056758
 523 0438 C9F20E7F 		.word	2131686089
 524 043c DC287D15 		.word	360523996
 525 0440 196C5D4C 		.word	1281190937
 526 0444 0492E51D 		.word	501584388
 527 0448 FEB851FA 		.word	-95307522
 528 044c 2AB4E7D4 		.word	-723012566
 529 0450 0CB62E26 		.word	640595468
ARM GAS  /tmp/ccXEAChk.s 			page 10


 530 0454 02C9F20E 		.word	250792194
 531 0458 7FDC287D 		.word	2099829887
 532 045c 15DA736A 		.word	1785977365
 533 0460 065B1713 		.word	320297734
 534 0464 81647987 		.word	-2022087551
 535 0468 3F6E94BE 		.word	-1097568705
 536 046c 0AED3935 		.word	892988682
 537 0470 427B4ECD 		.word	-850494654
 538 0474 60EB6222 		.word	576908128
 539 0478 902CEFF0 		.word	-252760944
 540 047c C78DD257 		.word	1473416647
 541 0480 A13DA766 		.word	1722236321
 542 0484 B0753111 		.word	288454064
 543 0488 489677F8 		.word	-126380472
 544 048c E346E9AB 		.word	-1410775325
 545 0490 D09E5333 		.word	861118160
 546 0494 D8BA9808 		.word	144227032
 547 0498 24CB3BFC 		.word	-63190236
 548 049c 71A3F455 		.word	1442095985
 549 04a0 8B8940B2 		.word	-1304393333
 550 04a4 BCC31F37 		.word	924828604
 551 04a8 4A5F85F6 		.word	-159031478
 552 04ac 9C9AC1D6 		.word	-691955044
 553 04b0 C5442059 		.word	1495286981
 554 04b4 DEE18F1B 		.word	462414302
 555 04b8 A5AF427B 		.word	2067967909
 556 04bc 4ECD60EB 		.word	-345977522
 557 04c0 6222902C 		.word	747643490
 558 04c4 EFF0C78D 		.word	-1916276497
 559 04c8 D257A13D 		.word	1033983954
 560 04cc A766B075 		.word	1974494887
 561 04d0 F45568CF 		.word	-815245836
 562 04d4 A9196C5D 		.word	1567365545
 563 04d8 4C0492E5 		.word	-443415476
 564 04dc 1DFEB851 		.word	1371078173
 565 04e0 FA2AB4E7 		.word	-407622918
 566 04e4 D40CB62E 		.word	783682772
 567 04e8 2602C9F2 		.word	-221707738
 568 04ec 0E7FDC28 		.word	685539086
 569 04f0 7D15DA73 		.word	1943672189
 570 04f4 6A065B17 		.word	391841386
 571 04f8 13816479 		.word	2036629779
 572 04fc 873F6E94 		.word	-1804714105
 573 0500 3DA766B0 		.word	-1335449795
 574 0504 75311148 		.word	1209086325
 575 0508 9677F8E3 		.word	-470255722
 576 050c 46E9ABD0 		.word	-794039994
 577 0510 9E5333D8 		.word	-667724898
 578 0514 BA980824 		.word	604543162
 579 0518 CB3BFC71 		.word	1912355787
 580 051c A3F45568 		.word	1750463651
 581 0520 CFA9196C 		.word	1813621199
 582 0524 5D4C0492 		.word	-1845212067
 583 0528 E51DFEB8 		.word	-1191305755
 584 052c 51FA2AB4 		.word	-1272251823
 585 0530 66B07531 		.word	829796454
 586 0534 11489677 		.word	2006337553
ARM GAS  /tmp/ccXEAChk.s 			page 11


 587 0538 F8E346E9 		.word	-381230088
 588 053c ABD09E53 		.word	1402917035
 589 0540 33D8BA98 		.word	-1732585421
 590 0544 0824CB3B 		.word	1003168776
 591 0548 FC71A3F4 		.word	-190615044
 592 054c 5568CFA9 		.word	-1446025131
 593 0550 196C5D4C 		.word	1281190937
 594 0554 0492E51D 		.word	501584388
 595 0558 FEB851FA 		.word	-95307522
 596 055c 2AB4E7D4 		.word	-723012566
 597 0560 AF427B4E 		.word	1316700847
 598 0564 CD60EB62 		.word	1659592909
 599 0568 22902CEF 		.word	-282292190
 600 056c F0C78DD2 		.word	-762460176
 601 0570 57A13DA7 		.word	-1489133225
 602 0574 66B07531 		.word	829796454
 603 0578 11489677 		.word	2006337553
 604 057c F8E346E9 		.word	-381230088
 605 0580 ABD09E53 		.word	1402917035
 606 0584 33D8BA98 		.word	-1732585421
 607 0588 0824CB3B 		.word	1003168776
 608 058c FC71A3F4 		.word	-190615044
 609 0590 980824CB 		.word	-886830952
 610 0594 3BFC71A3 		.word	-1552810949
 611 0598 F45568CF 		.word	-815245836
 612 059c A9196C5D 		.word	1567365545
 613 05a0 4C0492E5 		.word	-443415476
 614 05a4 1DFEB851 		.word	1371078173
 615 05a8 FA2AB4E7 		.word	-407622918
 616 05ac D40CB62E 		.word	783682772
 617 05b0 2602C9F2 		.word	-221707738
 618 05b4 0E7FDC28 		.word	685539086
 619 05b8 7D15DA73 		.word	1943672189
 620 05bc 6A065B17 		.word	391841386
 621 05c0 51FA2AB4 		.word	-1272251823
 622 05c4 E7D40CB6 		.word	-1240673049
 623 05c8 2E2602C9 		.word	-922606034
 624 05cc F20E7FDC 		.word	-595652878
 625 05d0 287D15DA 		.word	-636125912
 626 05d4 736A065B 		.word	1527147123
 627 05d8 17138164 		.word	1686180631
 628 05dc 79873F6E 		.word	1849657209
 629 05e0 94BE0AED 		.word	-318062956
 630 05e4 393583AD 		.word	-1383910087
 631 05e8 8B8940B2 		.word	-1304393333
 632 05ec BCC31F37 		.word	924828604
 633 05f0 0AED3935 		.word	892988682
 634 05f4 83AD8B89 		.word	-1987334781
 635 05f8 40B2BCC3 		.word	-1011043776
 636 05fc 1F374A5F 		.word	1598699295
 637 0600 85F69C9A 		.word	-1700989307
 638 0604 C1D6C544 		.word	1153816257
 639 0608 2059DEE1 		.word	-505521888
 640 060c 8F1BA5AF 		.word	-1348134001
 641 0610 427B4ECD 		.word	-850494654
 642 0614 60EB6222 		.word	576908128
 643 0618 902CEFF0 		.word	-252760944
ARM GAS  /tmp/ccXEAChk.s 			page 12


 644 061c C78DD257 		.word	1473416647
 645 0620 C31F374A 		.word	1245126595
 646 0624 5F85F69C 		.word	-1661565601
 647 0628 9AC1D6C5 		.word	-975781478
 648 062c 442059DE 		.word	-564584380
 649 0630 E18F1BA5 		.word	-1524920351
 650 0634 AF427B4E 		.word	1316700847
 651 0638 CD60EB62 		.word	1659592909
 652 063c 22902CEF 		.word	-282292190
 653 0640 F0C78DD2 		.word	-762460176
 654 0644 57A13DA7 		.word	-1489133225
 655 0648 66B07531 		.word	829796454
 656 064c 11489677 		.word	2006337553
 657 0650 BCC31F37 		.word	924828604
 658 0654 4A5F85F6 		.word	-159031478
 659 0658 9C9AC1D6 		.word	-691955044
 660 065c C5442059 		.word	1495286981
 661 0660 DEE18F1B 		.word	462414302
 662 0664 A5AF427B 		.word	2067967909
 663 0668 4ECD60EB 		.word	-345977522
 664 066c 6222902C 		.word	747643490
 665 0670 EFF0C78D 		.word	-1916276497
 666 0674 D257A13D 		.word	1033983954
 667 0678 A766B075 		.word	1974494887
 668 067c 31114896 		.word	-1773661903
 669 0680 75311148 		.word	1209086325
 670 0684 9677F8E3 		.word	-470255722
 671 0688 46E9ABD0 		.word	-794039994
 672 068c 9E5333D8 		.word	-667724898
 673 0690 BA980824 		.word	604543162
 674 0694 CB3BFC71 		.word	1912355787
 675 0698 A3F45568 		.word	1750463651
 676 069c CFA9196C 		.word	1813621199
 677 06a0 5D4C0492 		.word	-1845212067
 678 06a4 E51DFEB8 		.word	-1191305755
 679 06a8 51FA2AB4 		.word	-1272251823
 680 06ac E7D40CB6 		.word	-1240673049
 681 06b0 2E2602C9 		.word	-922606034
 682 06b4 F20E7FDC 		.word	-595652878
 683 06b8 287D15DA 		.word	-636125912
 684 06bc 736A065B 		.word	1527147123
 685 06c0 17138164 		.word	1686180631
 686 06c4 79873F6E 		.word	1849657209
 687 06c8 94BE0AED 		.word	-318062956
 688 06cc 393583AD 		.word	-1383910087
 689 06d0 8B8940B2 		.word	-1304393333
 690 06d4 BCC31F37 		.word	924828604
 691 06d8 4A5F85F6 		.word	-159031478
 692 06dc 9C9AC1D6 		.word	-691955044
 693 06e0 E7D40CB6 		.word	-1240673049
 694 06e4 2E2602C9 		.word	-922606034
 695 06e8 F20E7FDC 		.word	-595652878
 696 06ec 287D15DA 		.word	-636125912
 697 06f0 736A065B 		.word	1527147123
 698 06f4 17138164 		.word	1686180631
 699 06f8 79873F6E 		.word	1849657209
 700 06fc 94BE0AED 		.word	-318062956
ARM GAS  /tmp/ccXEAChk.s 			page 13


 701 0700 393583AD 		.word	-1383910087
 702 0704 8B8940B2 		.word	-1304393333
 703 0708 BCC31F37 		.word	924828604
 704 070c 4A5F85F6 		.word	-159031478
 705 0710 60EB6222 		.word	576908128
 706 0714 902CEFF0 		.word	-252760944
 707 0718 C78DD257 		.word	1473416647
 708 071c A13DA766 		.word	1722236321
 709 0720 B0753111 		.word	288454064
 710 0724 489677F8 		.word	-126380472
 711 0728 E346E9AB 		.word	-1410775325
 712 072c D09E5333 		.word	861118160
 713 0730 D8BA9808 		.word	144227032
 714 0734 24CB3BFC 		.word	-63190236
 715 0738 71A3F455 		.word	1442095985
 716 073c 68CFA919 		.word	430559080
 717 0740 A9196C5D 		.word	1567365545
 718 0744 4C0492E5 		.word	-443415476
 719 0748 1DFEB851 		.word	1371078173
 720 074c FA2AB4E7 		.word	-407622918
 721 0750 D40CB62E 		.word	783682772
 722 0754 2602C9F2 		.word	-221707738
 723 0758 0E7FDC28 		.word	685539086
 724 075c 7D15DA73 		.word	1943672189
 725 0760 6A065B17 		.word	391841386
 726 0764 13816479 		.word	2036629779
 727 0768 873F6E94 		.word	-1804714105
 728 076c BE0AED39 		.word	971836094
 729 0770 F20E7FDC 		.word	-595652878
 730 0774 287D15DA 		.word	-636125912
 731 0778 736A065B 		.word	1527147123
 732 077c 17138164 		.word	1686180631
 733 0780 79873F6E 		.word	1849657209
 734 0784 94BE0AED 		.word	-318062956
 735 0788 393583AD 		.word	-1383910087
 736 078c 8B8940B2 		.word	-1304393333
 737 0790 BCC31F37 		.word	924828604
 738 0794 4A5F85F6 		.word	-159031478
 739 0798 9C9AC1D6 		.word	-691955044
 740 079c C5442059 		.word	1495286981
 741 07a0 3BFC71A3 		.word	-1552810949
 742 07a4 F45568CF 		.word	-815245836
 743 07a8 A9196C5D 		.word	1567365545
 744 07ac 4C0492E5 		.word	-443415476
 745 07b0 1DFEB851 		.word	1371078173
 746 07b4 FA2AB4E7 		.word	-407622918
 747 07b8 D40CB62E 		.word	783682772
 748 07bc 2602C9F2 		.word	-221707738
 749 07c0 0E7FDC28 		.word	685539086
 750 07c4 7D15DA73 		.word	1943672189
 751 07c8 6A065B17 		.word	391841386
 752 07cc 13816479 		.word	2036629779
 753 07d0 442059DE 		.word	-564584380
 754 07d4 E18F1BA5 		.word	-1524920351
 755 07d8 AF427B4E 		.word	1316700847
 756 07dc CD60EB62 		.word	1659592909
 757 07e0 22902CEF 		.word	-282292190
ARM GAS  /tmp/ccXEAChk.s 			page 14


 758 07e4 F0C78DD2 		.word	-762460176
 759 07e8 57A13DA7 		.word	-1489133225
 760 07ec 66B07531 		.word	829796454
 761 07f0 11489677 		.word	2006337553
 762 07f4 F8E346E9 		.word	-381230088
 763 07f8 ABD09E53 		.word	1402917035
 764 07fc 33D8BA98 		.word	-1732585421
 765 0800 8DD257A1 		.word	-1588079987
 766 0804 3DA766B0 		.word	-1335449795
 767 0808 75311148 		.word	1209086325
 768 080c 9677F8E3 		.word	-470255722
 769 0810 46E9ABD0 		.word	-794039994
 770 0814 9E5333D8 		.word	-667724898
 771 0818 BA980824 		.word	604543162
 772 081c CB3BFC71 		.word	1912355787
 773 0820 A3F45568 		.word	1750463651
 774 0824 CFA9196C 		.word	1813621199
 775 0828 5D4C0492 		.word	-1845212067
 776 082c E51DFEB8 		.word	-1191305755
 777 0830 D6C54420 		.word	541378006
 778 0834 59DEE18F 		.word	-1881022887
 779 0838 1BA5AF42 		.word	1118807323
 780 083c 7B4ECD60 		.word	1624067707
 781 0840 EB622290 		.word	-1876794645
 782 0844 2CEFF0C7 		.word	-940511444
 783 0848 8DD257A1 		.word	-1588079987
 784 084c 3DA766B0 		.word	-1335449795
 785 0850 75311148 		.word	1209086325
 786 0854 9677F8E3 		.word	-470255722
 787 0858 46E9ABD0 		.word	-794039994
 788 085c 9E5333D8 		.word	-667724898
 789 0860 1F374A5F 		.word	1598699295
 790 0864 85F69C9A 		.word	-1700989307
 791 0868 C1D6C544 		.word	1153816257
 792 086c 2059DEE1 		.word	-505521888
 793 0870 8F1BA5AF 		.word	-1348134001
 794 0874 427B4ECD 		.word	-850494654
 795 0878 60EB6222 		.word	576908128
 796 087c 902CEFF0 		.word	-252760944
 797 0880 C78DD257 		.word	1473416647
 798 0884 A13DA766 		.word	1722236321
 799 0888 B0753111 		.word	288454064
 800 088c 489677F8 		.word	-126380472
 801              		.comm	rr,5,4
 802              		.global	compile_info
 803              		.align	2
 806              	compile_info:
 807 0890 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Wed Nov  2 19:4"
 807      746F6F74 
 807      68203230 
 807      31352D31 
 807      302D5231 
 808 08c3 373A3039 		.ascii	"7:09 KST 2016\000"
 808      204B5354 
 808      20323031 
 808      3600
 809 08d1 000000   		.align	2
ARM GAS  /tmp/ccXEAChk.s 			page 15


 812              	eddystone:
 813 08d4 B3       		.byte	-77
 814 08d5 8F       		.byte	-113
 815 08d6 00       		.byte	0
 816 08d7 4B       		.byte	75
 817 08d8 85       		.byte	-123
 818 08d9 E4       		.byte	-28
 819 08da 10       		.byte	16
 820 08db 72       		.byte	114
 821 08dc EE       		.byte	-18
 822 08dd 0C       		.byte	12
 823 08de E8       		.byte	-24
 824 08df D2       		.byte	-46
 825 08e0 A9       		.byte	-87
 826 08e1 BB       		.byte	-69
 827 08e2 60       		.byte	96
 828 08e3 6F       		.byte	111
 829 08e4 0A       		.byte	10
 830 08e5 C2       		.byte	-62
 831 08e6 AA       		.byte	-86
 832 08e7 0B       		.byte	11
 833 08e8 AE       		.byte	-82
 834 08e9 7D       		.byte	125
 835 08ea 47       		.byte	71
 836 08eb CC       		.byte	-52
 837 08ec 0A       		.byte	10
 838 08ed 1A       		.byte	26
 839 08ee 62       		.byte	98
 840 08ef 9E       		.byte	-98
 841 08f0 24       		.byte	36
 842 08f1 D9       		.byte	-39
 843 08f2 D7       		.byte	-41
 844 08f3 F1       		.byte	-15
 845 08f4 B3       		.byte	-77
 846 08f5 2E       		.byte	46
 847 08f6 93       		.byte	-109
 848 08f7 D8       		.byte	-40
 849 08f8 19       		.byte	25
 850              		.comm	clkn,4,4
 851              		.global	hop_mode
 852              		.bss
 855              	hop_mode:
 856 0000 00       		.space	1
 857              		.global	do_hop
 860              	do_hop:
 861 0001 00       		.space	1
 862              		.global	cs_no_squelch
 865              	cs_no_squelch:
 866 0002 00       		.space	1
 867              		.global	cs_threshold_req
 868              		.data
 871              	cs_threshold_req:
 872 0004 88       		.byte	-120
 873              		.global	cs_threshold_cur
 876              	cs_threshold_cur:
 877 0005 88       		.byte	-120
 878              		.comm	cs_trigger,1,1
ARM GAS  /tmp/ccXEAChk.s 			page 16


 879              		.comm	keepalive_trigger,1,1
 880              		.comm	cs_timestamp,4,4
 881              		.global	hop_direct_channel
 882              		.bss
 883 0003 00       		.align	1
 886              	hop_direct_channel:
 887 0004 0000     		.space	2
 888              		.global	clock_trim
 889 0006 0000     		.align	2
 892              	clock_trim:
 893 0008 00000000 		.space	4
 894              		.comm	idle_buf_clkn_high,4,4
 895              		.comm	active_buf_clkn_high,4,4
 896              		.comm	idle_buf_clk100ns,4,4
 897              		.comm	active_buf_clk100ns,4,4
 898              		.global	idle_buf_channel
 899              		.align	1
 902              	idle_buf_channel:
 903 000c 0000     		.space	2
 904              		.global	active_buf_channel
 905              		.align	1
 908              	active_buf_channel:
 909 000e 0000     		.space	2
 910              		.global	slave_mac_address
 911              		.align	2
 914              	slave_mac_address:
 915 0010 00000000 		.space	6
 915      0000
 916              		.comm	rxbuf1,50,4
 917              		.comm	rxbuf2,50,4
 918              		.global	active_rxbuf
 919              		.data
 920 0006 0000     		.align	2
 923              	active_rxbuf:
 924 0008 00000000 		.word	rxbuf1
 925              		.global	idle_rxbuf
 926              		.align	2
 929              	idle_rxbuf:
 930 000c 00000000 		.word	rxbuf2
 931              		.global	le
 932              		.align	2
 935              	le:
 936 0010 D6BE898E 		.word	-1903575338
 937 0014 7D6B     		.short	27517
 938 0016 7191     		.short	-28303
 939 0018 55555500 		.word	5592405
 940 001c AAAAAA00 		.word	11184810
 941 0020 01000000 		.word	1
 942 0024 00       		.byte	0
 943 0025 000000   		.space	3
 944 0028 00000000 		.word	0
 945 002c 00000000 		.space	32
 945      00000000 
 945      00000000 
 945      00000000 
 945      00000000 
 946 004c 00000000 		.word	0
ARM GAS  /tmp/ccXEAChk.s 			page 17


 947 0050 00000000 		.word	0
 948              		.comm	le_promisc,264,4
 949              		.global	le_jam_count
 950              		.bss
 951 0016 0000     		.align	2
 954              	le_jam_count:
 955 0018 00000000 		.space	4
 956              		.global	data_cb
 957              		.align	2
 960              	data_cb:
 961 001c 00000000 		.space	4
 962              		.global	packet_cb
 963              		.align	2
 966              	packet_cb:
 967 0020 00000000 		.space	4
 968              		.global	rssi_iir
 969              		.align	2
 972              	rssi_iir:
 973 0024 00000000 		.space	158
 973      00000000 
 973      00000000 
 973      00000000 
 973      00000000 
 974              		.comm	unpacked,800,4
 975              		.global	mode
 978              	mode:
 979 00c2 00       		.space	1
 980              		.global	requested_mode
 983              	requested_mode:
 984 00c3 00       		.space	1
 985              		.global	jam_mode
 988              	jam_mode:
 989 00c4 00       		.space	1
 990              		.global	ego_mode
 993              	ego_mode:
 994 00c5 00       		.space	1
 995              		.global	modulation
 998              	modulation:
 999 00c6 00       		.space	1
 1000              		.global	channel
 1001              		.data
 1002              		.align	1
 1005              	channel:
 1006 0054 6209     		.short	2402
 1007              		.global	requested_channel
 1008              		.bss
 1009 00c7 00       		.align	1
 1012              	requested_channel:
 1013 00c8 0000     		.space	2
 1014              		.global	saved_request
 1015              		.align	1
 1018              	saved_request:
 1019 00ca 0000     		.space	2
 1020              		.global	low_freq
 1021              		.data
 1022              		.align	1
 1025              	low_freq:
ARM GAS  /tmp/ccXEAChk.s 			page 18


 1026 0056 6009     		.short	2400
 1027              		.global	high_freq
 1028              		.align	1
 1031              	high_freq:
 1032 0058 B309     		.short	2483
 1033              		.global	rssi_threshold
 1036              	rssi_threshold:
 1037 005a E2       		.byte	-30
 1038              		.comm	rx_dma_lli1,16,4
 1039              		.comm	rx_dma_lli2,16,4
 1040              		.comm	le_dma_lli,176,4
 1041              		.comm	rx_tc,4,4
 1042              		.comm	rx_err,4,4
 1043              		.global	status
 1044              		.bss
 1047              	status:
 1048 00cc 00       		.space	1
 1049              		.comm	rssi_max,1,1
 1050              		.comm	rssi_min,1,1
 1051              		.global	rssi_count
 1054              	rssi_count:
 1055 00cd 00       		.space	1
 1056              		.global	rssi_sum
 1057 00ce 0000     		.align	2
 1060              	rssi_sum:
 1061 00d0 00000000 		.space	4
 1062              		.section	.text.rssi_reset,"ax",%progbits
 1063              		.align	2
 1064              		.thumb
 1065              		.thumb_func
 1067              	rssi_reset:
 1068              	.LFB0:
 1069              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccXEAChk.s 			page 19


  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** 
  50:bluetooth_rxtx.c **** static const char eddystone[] =
  51:bluetooth_rxtx.c **** {0xb3, 0x8f, 0x00, 0x4b, 0x85, 0xe4, 0x10, 0x72, 0xee, 0x0c, 0xe8, 0xd2, 0xa9, 0xbb, 0x60, 0x6f, 0x
  52:bluetooth_rxtx.c **** 
  53:bluetooth_rxtx.c **** 
  54:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  55:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  56:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  57:bluetooth_rxtx.c **** 
  58:bluetooth_rxtx.c **** #define HOP_NONE      0
  59:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  60:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  61:bluetooth_rxtx.c **** #define HOP_BTLE      3
  62:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  63:bluetooth_rxtx.c **** 
  64:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  65:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  66:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  67:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  68:bluetooth_rxtx.c **** 
  69:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  70:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  71:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  72:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  73:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  74:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  75:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  76:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  77:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  78:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  79:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  80:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  81:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
ARM GAS  /tmp/ccXEAChk.s 			page 20


  82:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  83:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  84:bluetooth_rxtx.c **** 
  85:bluetooth_rxtx.c **** /* DMA buffers */
  86:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  87:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  88:bluetooth_rxtx.c **** 
  89:bluetooth_rxtx.c **** /*
  90:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  91:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  92:bluetooth_rxtx.c ****  */
  93:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  94:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  95:bluetooth_rxtx.c **** 
  96:bluetooth_rxtx.c **** le_state_t le = {
  97:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  98:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  99:bluetooth_rxtx.c **** 	.syncl = 0x9171,
 100:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
 101:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
 102:bluetooth_rxtx.c **** 	.crc_verify = 1,
 103:bluetooth_rxtx.c **** 
 104:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 105:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 106:bluetooth_rxtx.c **** 	.target_set = 0,
 107:bluetooth_rxtx.c **** 	.last_packet = 0,
 108:bluetooth_rxtx.c **** };
 109:bluetooth_rxtx.c **** 
 110:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 111:bluetooth_rxtx.c **** 	u32 aa;
 112:bluetooth_rxtx.c **** 	int count;
 113:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 114:bluetooth_rxtx.c **** 
 115:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 116:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 117:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 118:bluetooth_rxtx.c **** 
 119:bluetooth_rxtx.c **** 	// recovering hop interval
 120:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 121:bluetooth_rxtx.c **** 	int consec_intervals;
 122:bluetooth_rxtx.c **** } le_promisc_state_t;
 123:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 124:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 125:bluetooth_rxtx.c **** 
 126:bluetooth_rxtx.c **** /* LE jamming */
 127:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 128:bluetooth_rxtx.c **** int le_jam_count = 0;
 129:bluetooth_rxtx.c **** 
 130:bluetooth_rxtx.c **** /* set LE access address */
 131:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 132:bluetooth_rxtx.c **** 
 133:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 134:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 135:bluetooth_rxtx.c **** 
 136:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 137:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 138:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccXEAChk.s 			page 21


 139:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 140:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 141:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 142:bluetooth_rxtx.c **** 
 143:bluetooth_rxtx.c **** /*
 144:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 145:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 146:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 147:bluetooth_rxtx.c **** */
 148:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 149:bluetooth_rxtx.c **** 
 150:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 151:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 152:bluetooth_rxtx.c **** 
 153:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 154:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 155:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 156:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 157:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 158:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 159:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 160:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 161:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 162:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 163:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 164:bluetooth_rxtx.c **** 
 165:bluetooth_rxtx.c **** /* DMA linked list items */
 166:bluetooth_rxtx.c **** typedef struct {
 167:bluetooth_rxtx.c **** 	u32 src;
 168:bluetooth_rxtx.c **** 	u32 dest;
 169:bluetooth_rxtx.c **** 	u32 next_lli;
 170:bluetooth_rxtx.c **** 	u32 control;
 171:bluetooth_rxtx.c **** } dma_lli;
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 174:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 175:bluetooth_rxtx.c **** 
 176:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 177:bluetooth_rxtx.c **** 
 178:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 179:bluetooth_rxtx.c **** volatile u32 rx_tc;
 180:bluetooth_rxtx.c **** volatile u32 rx_err;
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** /* status information byte */
 183:bluetooth_rxtx.c **** volatile u8 status = 0;
 184:bluetooth_rxtx.c **** 
 185:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 186:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 187:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 188:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 189:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 190:bluetooth_rxtx.c **** 
 191:bluetooth_rxtx.c **** /*
 192:bluetooth_rxtx.c ****  * RSSI
 193:bluetooth_rxtx.c ****  */
 194:bluetooth_rxtx.c **** int8_t rssi_max;
 195:bluetooth_rxtx.c **** int8_t rssi_min;
ARM GAS  /tmp/ccXEAChk.s 			page 22


 196:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 197:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 198:bluetooth_rxtx.c **** 
 199:bluetooth_rxtx.c **** static void rssi_reset(void)
 200:bluetooth_rxtx.c **** {
 1070              		.loc 1 200 0
 1071              		.cfi_startproc
 1072              		@ args = 0, pretend = 0, frame = 0
 1073              		@ frame_needed = 1, uses_anonymous_args = 0
 1074              		@ link register save eliminated.
 1075 0000 80B4     		push	{r7}
 1076              		.cfi_def_cfa_offset 4
 1077              		.cfi_offset 7, -4
 1078 0002 00AF     		add	r7, sp, #0
 1079              		.cfi_def_cfa_register 7
 201:bluetooth_rxtx.c **** 	rssi_count = 0;
 1080              		.loc 1 201 0
 1081 0004 074B     		ldr	r3, .L2
 1082 0006 0022     		movs	r2, #0
 1083 0008 1A70     		strb	r2, [r3]
 202:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1084              		.loc 1 202 0
 1085 000a 074B     		ldr	r3, .L2+4
 1086 000c 0022     		movs	r2, #0
 1087 000e 1A60     		str	r2, [r3]
 203:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1088              		.loc 1 203 0
 1089 0010 064B     		ldr	r3, .L2+8
 1090 0012 8022     		movs	r2, #128
 1091 0014 1A70     		strb	r2, [r3]
 204:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1092              		.loc 1 204 0
 1093 0016 064B     		ldr	r3, .L2+12
 1094 0018 7F22     		movs	r2, #127
 1095 001a 1A70     		strb	r2, [r3]
 205:bluetooth_rxtx.c **** }
 1096              		.loc 1 205 0
 1097 001c BD46     		mov	sp, r7
 1098              		.cfi_def_cfa_register 13
 1099              		@ sp needed
 1100 001e 5DF8047B 		ldr	r7, [sp], #4
 1101              		.cfi_restore 7
 1102              		.cfi_def_cfa_offset 0
 1103 0022 7047     		bx	lr
 1104              	.L3:
 1105              		.align	2
 1106              	.L2:
 1107 0024 00000000 		.word	rssi_count
 1108 0028 00000000 		.word	rssi_sum
 1109 002c 00000000 		.word	rssi_max
 1110 0030 00000000 		.word	rssi_min
 1111              		.cfi_endproc
 1112              	.LFE0:
 1114              		.section	.text.rssi_add,"ax",%progbits
 1115              		.align	2
 1116              		.thumb
 1117              		.thumb_func
ARM GAS  /tmp/ccXEAChk.s 			page 23


 1119              	rssi_add:
 1120              	.LFB1:
 206:bluetooth_rxtx.c **** 
 207:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 208:bluetooth_rxtx.c **** {
 1121              		.loc 1 208 0
 1122              		.cfi_startproc
 1123              		@ args = 0, pretend = 0, frame = 8
 1124              		@ frame_needed = 1, uses_anonymous_args = 0
 1125              		@ link register save eliminated.
 1126 0000 80B4     		push	{r7}
 1127              		.cfi_def_cfa_offset 4
 1128              		.cfi_offset 7, -4
 1129 0002 83B0     		sub	sp, sp, #12
 1130              		.cfi_def_cfa_offset 16
 1131 0004 00AF     		add	r7, sp, #0
 1132              		.cfi_def_cfa_register 7
 1133 0006 0346     		mov	r3, r0
 1134 0008 FB71     		strb	r3, [r7, #7]
 209:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1135              		.loc 1 209 0
 1136 000a 144B     		ldr	r3, .L5
 1137 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1138 000e 5AB2     		sxtb	r2, r3
 1139 0010 97F90730 		ldrsb	r3, [r7, #7]
 1140 0014 9342     		cmp	r3, r2
 1141 0016 B8BF     		it	lt
 1142 0018 1346     		movlt	r3, r2
 1143 001a DAB2     		uxtb	r2, r3
 1144 001c 0F4B     		ldr	r3, .L5
 1145 001e 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1146              		.loc 1 210 0
 1147 0020 0F4B     		ldr	r3, .L5+4
 1148 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1149 0024 5AB2     		sxtb	r2, r3
 1150 0026 97F90730 		ldrsb	r3, [r7, #7]
 1151 002a 9342     		cmp	r3, r2
 1152 002c A8BF     		it	ge
 1153 002e 1346     		movge	r3, r2
 1154 0030 DAB2     		uxtb	r2, r3
 1155 0032 0B4B     		ldr	r3, .L5+4
 1156 0034 1A70     		strb	r2, [r3]
 211:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1157              		.loc 1 211 0
 1158 0036 97F90730 		ldrsb	r3, [r7, #7]
 1159 003a 1A02     		lsls	r2, r3, #8
 1160 003c 094B     		ldr	r3, .L5+8
 1161 003e 1B68     		ldr	r3, [r3]
 1162 0040 1344     		add	r3, r3, r2
 1163 0042 084A     		ldr	r2, .L5+8
 1164 0044 1360     		str	r3, [r2]
 212:bluetooth_rxtx.c **** 	rssi_count += 1;
 1165              		.loc 1 212 0
 1166 0046 084B     		ldr	r3, .L5+12
 1167 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1168 004a 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccXEAChk.s 			page 24


 1169 004c DAB2     		uxtb	r2, r3
 1170 004e 064B     		ldr	r3, .L5+12
 1171 0050 1A70     		strb	r2, [r3]
 213:bluetooth_rxtx.c **** }
 1172              		.loc 1 213 0
 1173 0052 0C37     		adds	r7, r7, #12
 1174              		.cfi_def_cfa_offset 4
 1175 0054 BD46     		mov	sp, r7
 1176              		.cfi_def_cfa_register 13
 1177              		@ sp needed
 1178 0056 5DF8047B 		ldr	r7, [sp], #4
 1179              		.cfi_restore 7
 1180              		.cfi_def_cfa_offset 0
 1181 005a 7047     		bx	lr
 1182              	.L6:
 1183              		.align	2
 1184              	.L5:
 1185 005c 00000000 		.word	rssi_max
 1186 0060 00000000 		.word	rssi_min
 1187 0064 00000000 		.word	rssi_sum
 1188 0068 00000000 		.word	rssi_count
 1189              		.cfi_endproc
 1190              	.LFE1:
 1192              		.section	.text.rssi_iir_update,"ax",%progbits
 1193              		.align	2
 1194              		.thumb
 1195              		.thumb_func
 1197              	rssi_iir_update:
 1198              	.LFB2:
 214:bluetooth_rxtx.c **** 
 215:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 216:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 217:bluetooth_rxtx.c **** {
 1199              		.loc 1 217 0
 1200              		.cfi_startproc
 1201              		@ args = 0, pretend = 0, frame = 16
 1202              		@ frame_needed = 1, uses_anonymous_args = 0
 1203              		@ link register save eliminated.
 1204 0000 80B4     		push	{r7}
 1205              		.cfi_def_cfa_offset 4
 1206              		.cfi_offset 7, -4
 1207 0002 85B0     		sub	sp, sp, #20
 1208              		.cfi_def_cfa_offset 24
 1209 0004 00AF     		add	r7, sp, #0
 1210              		.cfi_def_cfa_register 7
 218:bluetooth_rxtx.c **** 	int i;
 219:bluetooth_rxtx.c **** 	int32_t avg;
 220:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 221:bluetooth_rxtx.c **** 
 222:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 223:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 224:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1211              		.loc 1 224 0
 1212 0006 1F4B     		ldr	r3, .L13
 1213 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1214 000a 002B     		cmp	r3, #0
 1215 000c 06D0     		beq	.L8
ARM GAS  /tmp/ccXEAChk.s 			page 25


 225:bluetooth_rxtx.c **** 		i = channel - 2402;
 1216              		.loc 1 225 0
 1217 000e 1E4B     		ldr	r3, .L13+4
 1218 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1219 0012 9BB2     		uxth	r3, r3
 1220 0014 A3F66213 		subw	r3, r3, #2402
 1221 0018 FB60     		str	r3, [r7, #12]
 1222 001a 01E0     		b	.L9
 1223              	.L8:
 226:bluetooth_rxtx.c **** 	else
 227:bluetooth_rxtx.c **** 		i = 0;
 1224              		.loc 1 227 0
 1225 001c 0023     		movs	r3, #0
 1226 001e FB60     		str	r3, [r7, #12]
 1227              	.L9:
 228:bluetooth_rxtx.c **** 
 229:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 230:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1228              		.loc 1 230 0
 1229 0020 1A4B     		ldr	r3, .L13+8
 1230 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1231 0024 002B     		cmp	r3, #0
 1232 0026 08D0     		beq	.L10
 231:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1233              		.loc 1 231 0
 1234 0028 194B     		ldr	r3, .L13+12
 1235 002a 1B68     		ldr	r3, [r3]
 1236 002c 8033     		adds	r3, r3, #128
 1237 002e 174A     		ldr	r2, .L13+8
 1238 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1239 0032 93FBF2F3 		sdiv	r3, r3, r2
 1240 0036 BB60     		str	r3, [r7, #8]
 1241 0038 01E0     		b	.L11
 1242              	.L10:
 232:bluetooth_rxtx.c **** 	else
 233:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1243              		.loc 1 233 0
 1244 003a 0023     		movs	r3, #0
 1245 003c BB60     		str	r3, [r7, #8]
 1246              	.L11:
 234:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1247              		.loc 1 234 0
 1248 003e 154A     		ldr	r2, .L13+16
 1249 0040 FB68     		ldr	r3, [r7, #12]
 1250 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1251 0046 1AB2     		sxth	r2, r3
 1252 0048 1346     		mov	r3, r2
 1253 004a 9B01     		lsls	r3, r3, #6
 1254 004c 9B1A     		subs	r3, r3, r2
 1255 004e 9B00     		lsls	r3, r3, #2
 1256 0050 1344     		add	r3, r3, r2
 1257 0052 7B60     		str	r3, [r7, #4]
 235:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1258              		.loc 1 235 0
 1259 0054 BA68     		ldr	r2, [r7, #8]
 1260 0056 1346     		mov	r3, r2
 1261 0058 5B00     		lsls	r3, r3, #1
ARM GAS  /tmp/ccXEAChk.s 			page 26


 1262 005a 1344     		add	r3, r3, r2
 1263 005c 7A68     		ldr	r2, [r7, #4]
 1264 005e 1344     		add	r3, r3, r2
 1265 0060 7B60     		str	r3, [r7, #4]
 236:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1266              		.loc 1 236 0
 1267 0062 7B68     		ldr	r3, [r7, #4]
 1268 0064 8033     		adds	r3, r3, #128
 1269 0066 002B     		cmp	r3, #0
 1270 0068 00DA     		bge	.L12
 1271 006a FF33     		adds	r3, r3, #255
 1272              	.L12:
 1273 006c 1B12     		asrs	r3, r3, #8
 1274 006e 99B2     		uxth	r1, r3
 1275 0070 084A     		ldr	r2, .L13+16
 1276 0072 FB68     		ldr	r3, [r7, #12]
 1277 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 237:bluetooth_rxtx.c **** }
 1278              		.loc 1 237 0
 1279 0078 1437     		adds	r7, r7, #20
 1280              		.cfi_def_cfa_offset 4
 1281 007a BD46     		mov	sp, r7
 1282              		.cfi_def_cfa_register 13
 1283              		@ sp needed
 1284 007c 5DF8047B 		ldr	r7, [sp], #4
 1285              		.cfi_restore 7
 1286              		.cfi_def_cfa_offset 0
 1287 0080 7047     		bx	lr
 1288              	.L14:
 1289 0082 00BF     		.align	2
 1290              	.L13:
 1291 0084 00000000 		.word	hop_mode
 1292 0088 00000000 		.word	channel
 1293 008c 00000000 		.word	rssi_count
 1294 0090 00000000 		.word	rssi_sum
 1295 0094 00000000 		.word	rssi_iir
 1296              		.cfi_endproc
 1297              	.LFE2:
 1299              		.section	.text.cs_threshold_set,"ax",%progbits
 1300              		.align	2
 1301              		.thumb
 1302              		.thumb_func
 1304              	cs_threshold_set:
 1305              	.LFB3:
 238:bluetooth_rxtx.c **** 
 239:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 240:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 241:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 242:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 243:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 244:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 245:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 246:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 247:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 248:bluetooth_rxtx.c **** {
 1306              		.loc 1 248 0
 1307              		.cfi_startproc
ARM GAS  /tmp/ccXEAChk.s 			page 27


 1308              		@ args = 0, pretend = 0, frame = 8
 1309              		@ frame_needed = 1, uses_anonymous_args = 0
 1310 0000 80B5     		push	{r7, lr}
 1311              		.cfi_def_cfa_offset 8
 1312              		.cfi_offset 7, -8
 1313              		.cfi_offset 14, -4
 1314 0002 82B0     		sub	sp, sp, #8
 1315              		.cfi_def_cfa_offset 16
 1316 0004 00AF     		add	r7, sp, #0
 1317              		.cfi_def_cfa_register 7
 1318 0006 0346     		mov	r3, r0
 1319 0008 0A46     		mov	r2, r1
 1320 000a FB71     		strb	r3, [r7, #7]
 1321 000c 1346     		mov	r3, r2
 1322 000e BB71     		strb	r3, [r7, #6]
 249:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1323              		.loc 1 249 0
 1324 0010 97F90730 		ldrsb	r3, [r7, #7]
 1325 0014 13F1140F 		cmn	r3, #20
 1326 0018 0DD0     		beq	.L16
 1327              		.loc 1 249 0 is_stmt 0 discriminator 1
 1328 001a 97F90730 		ldrsb	r3, [r7, #7]
 1329 001e 13F1130F 		cmn	r3, #19
 1330 0022 08DA     		bge	.L16
 1331              		.loc 1 249 0 discriminator 3
 1332 0024 97F90730 		ldrsb	r3, [r7, #7]
 1333 0028 6FF07702 		mvn	r2, #119
 1334 002c 9342     		cmp	r3, r2
 1335 002e B8BF     		it	lt
 1336 0030 1346     		movlt	r3, r2
 1337 0032 DBB2     		uxtb	r3, r3
 1338 0034 00E0     		b	.L17
 1339              	.L16:
 1340              		.loc 1 249 0 discriminator 4
 1341 0036 EC23     		movs	r3, #236
 1342              	.L17:
 1343              		.loc 1 249 0 discriminator 6
 1344 0038 FB71     		strb	r3, [r7, #7]
 250:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1345              		.loc 1 250 0 is_stmt 1 discriminator 6
 1346 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1347 003c 3833     		adds	r3, r3, #56
 1348 003e DBB2     		uxtb	r3, r3
 1349 0040 9BB2     		uxth	r3, r3
 1350 0042 03F0FC03 		and	r3, r3, #252
 1351 0046 9AB2     		uxth	r2, r3
 1352 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1353 004a 9BB2     		uxth	r3, r3
 1354 004c 03F00303 		and	r3, r3, #3
 1355 0050 9BB2     		uxth	r3, r3
 1356 0052 1343     		orrs	r3, r3, r2
 1357 0054 9BB2     		uxth	r3, r3
 1358 0056 9BB2     		uxth	r3, r3
 1359 0058 0620     		movs	r0, #6
 1360 005a 1946     		mov	r1, r3
 1361 005c FFF7FEFF 		bl	cc2400_set
 251:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
ARM GAS  /tmp/ccXEAChk.s 			page 28


 1362              		.loc 1 251 0 discriminator 6
 1363 0060 084A     		ldr	r2, .L18
 1364 0062 FB79     		ldrb	r3, [r7, #7]
 1365 0064 1370     		strb	r3, [r2]
 252:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1366              		.loc 1 252 0 discriminator 6
 1367 0066 97F90730 		ldrsb	r3, [r7, #7]
 1368 006a 13F1770F 		cmn	r3, #119
 1369 006e B4BF     		ite	lt
 1370 0070 0123     		movlt	r3, #1
 1371 0072 0023     		movge	r3, #0
 1372 0074 DBB2     		uxtb	r3, r3
 1373 0076 1A46     		mov	r2, r3
 1374 0078 034B     		ldr	r3, .L18+4
 1375 007a 1A70     		strb	r2, [r3]
 253:bluetooth_rxtx.c **** }
 1376              		.loc 1 253 0 discriminator 6
 1377 007c 0837     		adds	r7, r7, #8
 1378              		.cfi_def_cfa_offset 8
 1379 007e BD46     		mov	sp, r7
 1380              		.cfi_def_cfa_register 13
 1381              		@ sp needed
 1382 0080 80BD     		pop	{r7, pc}
 1383              	.L19:
 1384 0082 00BF     		.align	2
 1385              	.L18:
 1386 0084 00000000 		.word	cs_threshold_cur
 1387 0088 00000000 		.word	cs_no_squelch
 1388              		.cfi_endproc
 1389              	.LFE3:
 1391              		.section	.text.enqueue,"ax",%progbits
 1392              		.align	2
 1393              		.thumb
 1394              		.thumb_func
 1396              	enqueue:
 1397              	.LFB4:
 254:bluetooth_rxtx.c **** 
 255:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 256:bluetooth_rxtx.c **** {
 1398              		.loc 1 256 0
 1399              		.cfi_startproc
 1400              		@ args = 0, pretend = 0, frame = 32
 1401              		@ frame_needed = 1, uses_anonymous_args = 0
 1402 0000 80B5     		push	{r7, lr}
 1403              		.cfi_def_cfa_offset 8
 1404              		.cfi_offset 7, -8
 1405              		.cfi_offset 14, -4
 1406 0002 88B0     		sub	sp, sp, #32
 1407              		.cfi_def_cfa_offset 40
 1408 0004 00AF     		add	r7, sp, #0
 1409              		.cfi_def_cfa_register 7
 1410 0006 0346     		mov	r3, r0
 1411 0008 3960     		str	r1, [r7]
 1412 000a FB71     		strb	r3, [r7, #7]
 257:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1413              		.loc 1 257 0
 1414 000c FFF7FEFF 		bl	usb_enqueue
ARM GAS  /tmp/ccXEAChk.s 			page 29


 1415 0010 F861     		str	r0, [r7, #28]
 258:bluetooth_rxtx.c **** 
 259:bluetooth_rxtx.c **** 	/* fail if queue is full */
 260:bluetooth_rxtx.c **** 	if (f == NULL) {
 1416              		.loc 1 260 0
 1417 0012 FB69     		ldr	r3, [r7, #28]
 1418 0014 002B     		cmp	r3, #0
 1419 0016 09D1     		bne	.L21
 261:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1420              		.loc 1 261 0
 1421 0018 594B     		ldr	r3, .L27
 1422 001a 1B78     		ldrb	r3, [r3]
 1423 001c DBB2     		uxtb	r3, r3
 1424 001e 43F00403 		orr	r3, r3, #4
 1425 0022 DAB2     		uxtb	r2, r3
 1426 0024 564B     		ldr	r3, .L27
 1427 0026 1A70     		strb	r2, [r3]
 262:bluetooth_rxtx.c **** 		return 0;
 1428              		.loc 1 262 0
 1429 0028 0023     		movs	r3, #0
 1430 002a A5E0     		b	.L22
 1431              	.L21:
 263:bluetooth_rxtx.c **** 	}
 264:bluetooth_rxtx.c **** 
 265:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1432              		.loc 1 265 0
 1433 002c FB69     		ldr	r3, [r7, #28]
 1434 002e FA79     		ldrb	r2, [r7, #7]
 1435 0030 1A70     		strb	r2, [r3]
 266:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1436              		.loc 1 266 0
 1437 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1438 0034 042B     		cmp	r3, #4
 1439 0036 13D1     		bne	.L23
 267:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1440              		.loc 1 267 0
 1441 0038 524B     		ldr	r3, .L27+4
 1442 003a 1B68     		ldr	r3, [r3]
 1443 003c 1B0D     		lsrs	r3, r3, #20
 1444 003e DAB2     		uxtb	r2, r3
 1445 0040 FB69     		ldr	r3, [r7, #28]
 1446 0042 DA70     		strb	r2, [r3, #3]
 268:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1447              		.loc 1 268 0
 1448 0044 4F4B     		ldr	r3, .L27+4
 1449 0046 1B68     		ldr	r3, [r3]
 1450 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1451 004c 40F63542 		movw	r2, #3125
 1452 0050 02FB03F2 		mul	r2, r2, r3
 1453 0054 4C4B     		ldr	r3, .L27+8
 1454 0056 1B68     		ldr	r3, [r3]
 1455 0058 1A44     		add	r2, r2, r3
 1456 005a FB69     		ldr	r3, [r7, #28]
 1457 005c 5A60     		str	r2, [r3, #4]
 1458 005e 08E0     		b	.L24
 1459              	.L23:
 269:bluetooth_rxtx.c **** 	} else {
ARM GAS  /tmp/ccXEAChk.s 			page 30


 270:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1460              		.loc 1 270 0
 1461 0060 4A4B     		ldr	r3, .L27+12
 1462 0062 1B68     		ldr	r3, [r3]
 1463 0064 DAB2     		uxtb	r2, r3
 1464 0066 FB69     		ldr	r3, [r7, #28]
 1465 0068 DA70     		strb	r2, [r3, #3]
 271:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1466              		.loc 1 271 0
 1467 006a 494B     		ldr	r3, .L27+16
 1468 006c 1A68     		ldr	r2, [r3]
 1469 006e FB69     		ldr	r3, [r7, #28]
 1470 0070 5A60     		str	r2, [r3, #4]
 1471              	.L24:
 272:bluetooth_rxtx.c **** 	}
 273:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1472              		.loc 1 273 0
 1473 0072 484B     		ldr	r3, .L27+20
 1474 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1475 0076 9BB2     		uxth	r3, r3
 1476 0078 DBB2     		uxtb	r3, r3
 1477 007a 623B     		subs	r3, r3, #98
 1478 007c DAB2     		uxtb	r2, r3
 1479 007e FB69     		ldr	r3, [r7, #28]
 1480 0080 9A70     		strb	r2, [r3, #2]
 274:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1481              		.loc 1 274 0
 1482 0082 454B     		ldr	r3, .L27+24
 1483 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1484 0086 DAB2     		uxtb	r2, r3
 1485 0088 FB69     		ldr	r3, [r7, #28]
 1486 008a 5A72     		strb	r2, [r3, #9]
 275:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
 1487              		.loc 1 275 0
 1488 008c 434B     		ldr	r3, .L27+28
 1489 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1490 0090 DAB2     		uxtb	r2, r3
 1491 0092 FB69     		ldr	r3, [r7, #28]
 1492 0094 1A72     		strb	r2, [r3, #8]
 276:bluetooth_rxtx.c **** 	if (hop_mode != HOP_NONE)
 1493              		.loc 1 276 0
 1494 0096 424B     		ldr	r3, .L27+32
 1495 0098 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1496 009a 002B     		cmp	r3, #0
 1497 009c 09D0     		beq	.L25
 277:bluetooth_rxtx.c **** 	//	f->rssi_avg = (int8_t)((rssi_iir[idle_buf_channel-2402] + 128)/256);
 278:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_sum/rssi_count;
 1498              		.loc 1 278 0
 1499 009e 414B     		ldr	r3, .L27+36
 1500 00a0 1B68     		ldr	r3, [r3]
 1501 00a2 414A     		ldr	r2, .L27+40
 1502 00a4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1503 00a6 93FBF2F3 		sdiv	r3, r3, r2
 1504 00aa DAB2     		uxtb	r2, r3
 1505 00ac FB69     		ldr	r3, [r7, #28]
 1506 00ae 9A72     		strb	r2, [r3, #10]
 1507 00b0 08E0     		b	.L26
ARM GAS  /tmp/ccXEAChk.s 			page 31


 1508              	.L25:
 279:bluetooth_rxtx.c **** 	else
 280:bluetooth_rxtx.c **** 		//f->rssi_avg = (int8_t)((rssi_iir[0] + 128)/256);
 281:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_sum/rssi_count;
 1509              		.loc 1 281 0
 1510 00b2 3C4B     		ldr	r3, .L27+36
 1511 00b4 1B68     		ldr	r3, [r3]
 1512 00b6 3C4A     		ldr	r2, .L27+40
 1513 00b8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1514 00ba 93FBF2F3 		sdiv	r3, r3, r2
 1515 00be DAB2     		uxtb	r2, r3
 1516 00c0 FB69     		ldr	r3, [r7, #28]
 1517 00c2 9A72     		strb	r2, [r3, #10]
 1518              	.L26:
 282:bluetooth_rxtx.c **** 	
 283:bluetooth_rxtx.c **** 	f->rssi_count = rssi_count;
 1519              		.loc 1 283 0
 1520 00c4 384B     		ldr	r3, .L27+40
 1521 00c6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1522 00c8 FB69     		ldr	r3, [r7, #28]
 1523 00ca DA72     		strb	r2, [r3, #11]
 284:bluetooth_rxtx.c **** 
 285:bluetooth_rxtx.c **** 	USRLED_SET;
 1524              		.loc 1 285 0
 1525 00cc 374B     		ldr	r3, .L27+44
 1526 00ce 0222     		movs	r2, #2
 1527 00d0 1A60     		str	r2, [r3]
 286:bluetooth_rxtx.c **** 
 287:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 288:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1528              		.loc 1 288 0
 1529 00d2 FB69     		ldr	r3, [r7, #28]
 1530 00d4 0E33     		adds	r3, r3, #14
 1531 00d6 BB61     		str	r3, [r7, #24]
 289:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1532              		.loc 1 289 0
 1533 00d8 3B68     		ldr	r3, [r7]
 1534 00da 7B61     		str	r3, [r7, #20]
 290:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1535              		.loc 1 290 0
 1536 00dc 7B69     		ldr	r3, [r7, #20]
 1537 00de 1A68     		ldr	r2, [r3]
 1538 00e0 BB69     		ldr	r3, [r7, #24]
 1539 00e2 1A60     		str	r2, [r3]
 291:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1540              		.loc 1 291 0
 1541 00e4 BB69     		ldr	r3, [r7, #24]
 1542 00e6 0433     		adds	r3, r3, #4
 1543 00e8 7A69     		ldr	r2, [r7, #20]
 1544 00ea 5268     		ldr	r2, [r2, #4]
 1545 00ec 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1546              		.loc 1 292 0
 1547 00ee BB69     		ldr	r3, [r7, #24]
 1548 00f0 0833     		adds	r3, r3, #8
 1549 00f2 7A69     		ldr	r2, [r7, #20]
 1550 00f4 9268     		ldr	r2, [r2, #8]
ARM GAS  /tmp/ccXEAChk.s 			page 32


 1551 00f6 1A60     		str	r2, [r3]
 293:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1552              		.loc 1 293 0
 1553 00f8 BB69     		ldr	r3, [r7, #24]
 1554 00fa 0C33     		adds	r3, r3, #12
 1555 00fc 7A69     		ldr	r2, [r7, #20]
 1556 00fe D268     		ldr	r2, [r2, #12]
 1557 0100 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1558              		.loc 1 294 0
 1559 0102 BB69     		ldr	r3, [r7, #24]
 1560 0104 1033     		adds	r3, r3, #16
 1561 0106 7A69     		ldr	r2, [r7, #20]
 1562 0108 1269     		ldr	r2, [r2, #16]
 1563 010a 1A60     		str	r2, [r3]
 295:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1564              		.loc 1 295 0
 1565 010c BB69     		ldr	r3, [r7, #24]
 1566 010e 1433     		adds	r3, r3, #20
 1567 0110 7A69     		ldr	r2, [r7, #20]
 1568 0112 5269     		ldr	r2, [r2, #20]
 1569 0114 1A60     		str	r2, [r3]
 296:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1570              		.loc 1 296 0
 1571 0116 BB69     		ldr	r3, [r7, #24]
 1572 0118 1833     		adds	r3, r3, #24
 1573 011a 7A69     		ldr	r2, [r7, #20]
 1574 011c 9269     		ldr	r2, [r2, #24]
 1575 011e 1A60     		str	r2, [r3]
 297:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1576              		.loc 1 297 0
 1577 0120 BB69     		ldr	r3, [r7, #24]
 1578 0122 1C33     		adds	r3, r3, #28
 1579 0124 7A69     		ldr	r2, [r7, #20]
 1580 0126 D269     		ldr	r2, [r2, #28]
 1581 0128 1A60     		str	r2, [r3]
 298:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1582              		.loc 1 298 0
 1583 012a BB69     		ldr	r3, [r7, #24]
 1584 012c 2033     		adds	r3, r3, #32
 1585 012e 7A69     		ldr	r2, [r7, #20]
 1586 0130 126A     		ldr	r2, [r2, #32]
 1587 0132 1A60     		str	r2, [r3]
 299:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1588              		.loc 1 299 0
 1589 0134 BB69     		ldr	r3, [r7, #24]
 1590 0136 2433     		adds	r3, r3, #36
 1591 0138 7A69     		ldr	r2, [r7, #20]
 1592 013a 526A     		ldr	r2, [r2, #36]
 1593 013c 1A60     		str	r2, [r3]
 300:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1594              		.loc 1 300 0
 1595 013e BB69     		ldr	r3, [r7, #24]
 1596 0140 2833     		adds	r3, r3, #40
 1597 0142 7A69     		ldr	r2, [r7, #20]
 1598 0144 926A     		ldr	r2, [r2, #40]
 1599 0146 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 33


 301:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1600              		.loc 1 301 0
 1601 0148 BB69     		ldr	r3, [r7, #24]
 1602 014a 2C33     		adds	r3, r3, #44
 1603 014c 7A69     		ldr	r2, [r7, #20]
 1604 014e D26A     		ldr	r2, [r2, #44]
 1605 0150 1A60     		str	r2, [r3]
 302:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 303:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1606              		.loc 1 303 0
 1607 0152 FB69     		ldr	r3, [r7, #28]
 1608 0154 0E33     		adds	r3, r3, #14
 1609 0156 3B61     		str	r3, [r7, #16]
 304:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1610              		.loc 1 304 0
 1611 0158 3B68     		ldr	r3, [r7]
 1612 015a FB60     		str	r3, [r7, #12]
 305:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1613              		.loc 1 305 0
 1614 015c 3B69     		ldr	r3, [r7, #16]
 1615 015e 3033     		adds	r3, r3, #48
 1616 0160 FA68     		ldr	r2, [r7, #12]
 1617 0162 128E     		ldrh	r2, [r2, #48]
 1618 0164 1A80     		strh	r2, [r3]	@ movhi
 306:bluetooth_rxtx.c **** 
 307:bluetooth_rxtx.c **** 	f->status = status;
 1619              		.loc 1 307 0
 1620 0166 064B     		ldr	r3, .L27
 1621 0168 1B78     		ldrb	r3, [r3]
 1622 016a DAB2     		uxtb	r2, r3
 1623 016c FB69     		ldr	r3, [r7, #28]
 1624 016e 5A70     		strb	r2, [r3, #1]
 308:bluetooth_rxtx.c **** 	status = 0;
 1625              		.loc 1 308 0
 1626 0170 034B     		ldr	r3, .L27
 1627 0172 0022     		movs	r2, #0
 1628 0174 1A70     		strb	r2, [r3]
 309:bluetooth_rxtx.c **** 
 310:bluetooth_rxtx.c **** 	return 1;
 1629              		.loc 1 310 0
 1630 0176 0123     		movs	r3, #1
 1631              	.L22:
 311:bluetooth_rxtx.c **** }
 1632              		.loc 1 311 0
 1633 0178 1846     		mov	r0, r3
 1634 017a 2037     		adds	r7, r7, #32
 1635              		.cfi_def_cfa_offset 8
 1636 017c BD46     		mov	sp, r7
 1637              		.cfi_def_cfa_register 13
 1638              		@ sp needed
 1639 017e 80BD     		pop	{r7, pc}
 1640              	.L28:
 1641              		.align	2
 1642              	.L27:
 1643 0180 00000000 		.word	status
 1644 0184 00000000 		.word	clkn
 1645 0188 08400040 		.word	1073758216
ARM GAS  /tmp/ccXEAChk.s 			page 34


 1646 018c 00000000 		.word	idle_buf_clkn_high
 1647 0190 00000000 		.word	idle_buf_clk100ns
 1648 0194 00000000 		.word	idle_buf_channel
 1649 0198 00000000 		.word	rssi_min
 1650 019c 00000000 		.word	rssi_max
 1651 01a0 00000000 		.word	hop_mode
 1652 01a4 00000000 		.word	rssi_sum
 1653 01a8 00000000 		.word	rssi_count
 1654 01ac 38C00920 		.word	537509944
 1655              		.cfi_endproc
 1656              	.LFE4:
 1658              		.section	.text.enqueue_with_ts,"ax",%progbits
 1659              		.align	2
 1660              		.global	enqueue_with_ts
 1661              		.thumb
 1662              		.thumb_func
 1664              	enqueue_with_ts:
 1665              	.LFB5:
 312:bluetooth_rxtx.c **** 
 313:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 314:bluetooth_rxtx.c **** {
 1666              		.loc 1 314 0
 1667              		.cfi_startproc
 1668              		@ args = 0, pretend = 0, frame = 40
 1669              		@ frame_needed = 1, uses_anonymous_args = 0
 1670 0000 80B5     		push	{r7, lr}
 1671              		.cfi_def_cfa_offset 8
 1672              		.cfi_offset 7, -8
 1673              		.cfi_offset 14, -4
 1674 0002 8AB0     		sub	sp, sp, #40
 1675              		.cfi_def_cfa_offset 48
 1676 0004 00AF     		add	r7, sp, #0
 1677              		.cfi_def_cfa_register 7
 1678 0006 0346     		mov	r3, r0
 1679 0008 B960     		str	r1, [r7, #8]
 1680 000a 7A60     		str	r2, [r7, #4]
 1681 000c FB73     		strb	r3, [r7, #15]
 315:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1682              		.loc 1 315 0
 1683 000e FFF7FEFF 		bl	usb_enqueue
 1684 0012 7862     		str	r0, [r7, #36]
 316:bluetooth_rxtx.c **** 
 317:bluetooth_rxtx.c **** 	/* fail if queue is full */
 318:bluetooth_rxtx.c **** 	if (f == NULL) {
 1685              		.loc 1 318 0
 1686 0014 7B6A     		ldr	r3, [r7, #36]
 1687 0016 002B     		cmp	r3, #0
 1688 0018 09D1     		bne	.L30
 319:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1689              		.loc 1 319 0
 1690 001a 3C4B     		ldr	r3, .L32
 1691 001c 1B78     		ldrb	r3, [r3]
 1692 001e DBB2     		uxtb	r3, r3
 1693 0020 43F00403 		orr	r3, r3, #4
 1694 0024 DAB2     		uxtb	r2, r3
 1695 0026 394B     		ldr	r3, .L32
 1696 0028 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 35


 320:bluetooth_rxtx.c **** 		return 0;
 1697              		.loc 1 320 0
 1698 002a 0023     		movs	r3, #0
 1699 002c 69E0     		b	.L31
 1700              	.L30:
 321:bluetooth_rxtx.c **** 	}
 322:bluetooth_rxtx.c **** 
 323:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 1701              		.loc 1 323 0
 1702 002e 7B6A     		ldr	r3, [r7, #36]
 1703 0030 0022     		movs	r2, #0
 1704 0032 DA70     		strb	r2, [r3, #3]
 324:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1705              		.loc 1 324 0
 1706 0034 7B6A     		ldr	r3, [r7, #36]
 1707 0036 7A68     		ldr	r2, [r7, #4]
 1708 0038 5A60     		str	r2, [r3, #4]
 325:bluetooth_rxtx.c **** 
 326:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1709              		.loc 1 326 0
 1710 003a 354B     		ldr	r3, .L32+4
 1711 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1712 003e 9BB2     		uxth	r3, r3
 1713 0040 DBB2     		uxtb	r3, r3
 1714 0042 623B     		subs	r3, r3, #98
 1715 0044 DAB2     		uxtb	r2, r3
 1716 0046 7B6A     		ldr	r3, [r7, #36]
 1717 0048 9A70     		strb	r2, [r3, #2]
 327:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 1718              		.loc 1 327 0
 1719 004a 7B6A     		ldr	r3, [r7, #36]
 1720 004c 0022     		movs	r2, #0
 1721 004e 9A72     		strb	r2, [r3, #10]
 328:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 1722              		.loc 1 328 0
 1723 0050 7B6A     		ldr	r3, [r7, #36]
 1724 0052 0022     		movs	r2, #0
 1725 0054 DA72     		strb	r2, [r3, #11]
 329:bluetooth_rxtx.c **** 
 330:bluetooth_rxtx.c **** 	USRLED_SET;
 1726              		.loc 1 330 0
 1727 0056 2F4B     		ldr	r3, .L32+8
 1728 0058 0222     		movs	r2, #2
 1729 005a 1A60     		str	r2, [r3]
 331:bluetooth_rxtx.c **** 
 332:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 333:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1730              		.loc 1 333 0
 1731 005c 7B6A     		ldr	r3, [r7, #36]
 1732 005e 0E33     		adds	r3, r3, #14
 1733 0060 3B62     		str	r3, [r7, #32]
 334:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1734              		.loc 1 334 0
 1735 0062 BB68     		ldr	r3, [r7, #8]
 1736 0064 FB61     		str	r3, [r7, #28]
 335:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1737              		.loc 1 335 0
ARM GAS  /tmp/ccXEAChk.s 			page 36


 1738 0066 FB69     		ldr	r3, [r7, #28]
 1739 0068 1A68     		ldr	r2, [r3]
 1740 006a 3B6A     		ldr	r3, [r7, #32]
 1741 006c 1A60     		str	r2, [r3]
 336:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1742              		.loc 1 336 0
 1743 006e 3B6A     		ldr	r3, [r7, #32]
 1744 0070 0433     		adds	r3, r3, #4
 1745 0072 FA69     		ldr	r2, [r7, #28]
 1746 0074 5268     		ldr	r2, [r2, #4]
 1747 0076 1A60     		str	r2, [r3]
 337:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1748              		.loc 1 337 0
 1749 0078 3B6A     		ldr	r3, [r7, #32]
 1750 007a 0833     		adds	r3, r3, #8
 1751 007c FA69     		ldr	r2, [r7, #28]
 1752 007e 9268     		ldr	r2, [r2, #8]
 1753 0080 1A60     		str	r2, [r3]
 338:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1754              		.loc 1 338 0
 1755 0082 3B6A     		ldr	r3, [r7, #32]
 1756 0084 0C33     		adds	r3, r3, #12
 1757 0086 FA69     		ldr	r2, [r7, #28]
 1758 0088 D268     		ldr	r2, [r2, #12]
 1759 008a 1A60     		str	r2, [r3]
 339:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1760              		.loc 1 339 0
 1761 008c 3B6A     		ldr	r3, [r7, #32]
 1762 008e 1033     		adds	r3, r3, #16
 1763 0090 FA69     		ldr	r2, [r7, #28]
 1764 0092 1269     		ldr	r2, [r2, #16]
 1765 0094 1A60     		str	r2, [r3]
 340:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1766              		.loc 1 340 0
 1767 0096 3B6A     		ldr	r3, [r7, #32]
 1768 0098 1433     		adds	r3, r3, #20
 1769 009a FA69     		ldr	r2, [r7, #28]
 1770 009c 5269     		ldr	r2, [r2, #20]
 1771 009e 1A60     		str	r2, [r3]
 341:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1772              		.loc 1 341 0
 1773 00a0 3B6A     		ldr	r3, [r7, #32]
 1774 00a2 1833     		adds	r3, r3, #24
 1775 00a4 FA69     		ldr	r2, [r7, #28]
 1776 00a6 9269     		ldr	r2, [r2, #24]
 1777 00a8 1A60     		str	r2, [r3]
 342:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1778              		.loc 1 342 0
 1779 00aa 3B6A     		ldr	r3, [r7, #32]
 1780 00ac 1C33     		adds	r3, r3, #28
 1781 00ae FA69     		ldr	r2, [r7, #28]
 1782 00b0 D269     		ldr	r2, [r2, #28]
 1783 00b2 1A60     		str	r2, [r3]
 343:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1784              		.loc 1 343 0
 1785 00b4 3B6A     		ldr	r3, [r7, #32]
 1786 00b6 2033     		adds	r3, r3, #32
ARM GAS  /tmp/ccXEAChk.s 			page 37


 1787 00b8 FA69     		ldr	r2, [r7, #28]
 1788 00ba 126A     		ldr	r2, [r2, #32]
 1789 00bc 1A60     		str	r2, [r3]
 344:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1790              		.loc 1 344 0
 1791 00be 3B6A     		ldr	r3, [r7, #32]
 1792 00c0 2433     		adds	r3, r3, #36
 1793 00c2 FA69     		ldr	r2, [r7, #28]
 1794 00c4 526A     		ldr	r2, [r2, #36]
 1795 00c6 1A60     		str	r2, [r3]
 345:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1796              		.loc 1 345 0
 1797 00c8 3B6A     		ldr	r3, [r7, #32]
 1798 00ca 2833     		adds	r3, r3, #40
 1799 00cc FA69     		ldr	r2, [r7, #28]
 1800 00ce 926A     		ldr	r2, [r2, #40]
 1801 00d0 1A60     		str	r2, [r3]
 346:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1802              		.loc 1 346 0
 1803 00d2 3B6A     		ldr	r3, [r7, #32]
 1804 00d4 2C33     		adds	r3, r3, #44
 1805 00d6 FA69     		ldr	r2, [r7, #28]
 1806 00d8 D26A     		ldr	r2, [r2, #44]
 1807 00da 1A60     		str	r2, [r3]
 347:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 348:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1808              		.loc 1 348 0
 1809 00dc 7B6A     		ldr	r3, [r7, #36]
 1810 00de 0E33     		adds	r3, r3, #14
 1811 00e0 BB61     		str	r3, [r7, #24]
 349:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1812              		.loc 1 349 0
 1813 00e2 BB68     		ldr	r3, [r7, #8]
 1814 00e4 7B61     		str	r3, [r7, #20]
 350:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1815              		.loc 1 350 0
 1816 00e6 BB69     		ldr	r3, [r7, #24]
 1817 00e8 3033     		adds	r3, r3, #48
 1818 00ea 7A69     		ldr	r2, [r7, #20]
 1819 00ec 128E     		ldrh	r2, [r2, #48]
 1820 00ee 1A80     		strh	r2, [r3]	@ movhi
 351:bluetooth_rxtx.c **** 
 352:bluetooth_rxtx.c **** 	f->status = status;
 1821              		.loc 1 352 0
 1822 00f0 064B     		ldr	r3, .L32
 1823 00f2 1B78     		ldrb	r3, [r3]
 1824 00f4 DAB2     		uxtb	r2, r3
 1825 00f6 7B6A     		ldr	r3, [r7, #36]
 1826 00f8 5A70     		strb	r2, [r3, #1]
 353:bluetooth_rxtx.c **** 	status = 0;
 1827              		.loc 1 353 0
 1828 00fa 044B     		ldr	r3, .L32
 1829 00fc 0022     		movs	r2, #0
 1830 00fe 1A70     		strb	r2, [r3]
 354:bluetooth_rxtx.c **** 
 355:bluetooth_rxtx.c **** 	return 1;
 1831              		.loc 1 355 0
ARM GAS  /tmp/ccXEAChk.s 			page 38


 1832 0100 0123     		movs	r3, #1
 1833              	.L31:
 356:bluetooth_rxtx.c **** }
 1834              		.loc 1 356 0
 1835 0102 1846     		mov	r0, r3
 1836 0104 2837     		adds	r7, r7, #40
 1837              		.cfi_def_cfa_offset 8
 1838 0106 BD46     		mov	sp, r7
 1839              		.cfi_def_cfa_register 13
 1840              		@ sp needed
 1841 0108 80BD     		pop	{r7, pc}
 1842              	.L33:
 1843 010a 00BF     		.align	2
 1844              	.L32:
 1845 010c 00000000 		.word	status
 1846 0110 00000000 		.word	channel
 1847 0114 38C00920 		.word	537509944
 1848              		.cfi_endproc
 1849              	.LFE5:
 1851              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 1852              		.align	2
 1853              		.thumb
 1854              		.thumb_func
 1856              	cs_threshold_calc_and_set:
 1857              	.LFB6:
 357:bluetooth_rxtx.c **** 
 358:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 359:bluetooth_rxtx.c **** {
 1858              		.loc 1 359 0
 1859              		.cfi_startproc
 1860              		@ args = 0, pretend = 0, frame = 8
 1861              		@ frame_needed = 1, uses_anonymous_args = 0
 1862 0000 80B5     		push	{r7, lr}
 1863              		.cfi_def_cfa_offset 8
 1864              		.cfi_offset 7, -8
 1865              		.cfi_offset 14, -4
 1866 0002 82B0     		sub	sp, sp, #8
 1867              		.cfi_def_cfa_offset 16
 1868 0004 00AF     		add	r7, sp, #0
 1869              		.cfi_def_cfa_register 7
 360:bluetooth_rxtx.c **** 	int8_t level;
 361:bluetooth_rxtx.c **** 
 362:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 363:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 364:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 365:bluetooth_rxtx.c **** 	 * value for it. */
 366:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 1870              		.loc 1 366 0
 1871 0006 174B     		ldr	r3, .L38
 1872 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1873 000a 002B     		cmp	r3, #0
 1874 000c 1DD0     		beq	.L35
 1875              		.loc 1 366 0 is_stmt 0 discriminator 1
 1876 000e 164B     		ldr	r3, .L38+4
 1877 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1878 0012 5BB2     		sxtb	r3, r3
 1879 0014 002B     		cmp	r3, #0
ARM GAS  /tmp/ccXEAChk.s 			page 39


 1880 0016 18DD     		ble	.L35
 1881              	.LBB2:
 367:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1882              		.loc 1 367 0 is_stmt 1
 1883 0018 144B     		ldr	r3, .L38+8
 1884 001a 1B88     		ldrh	r3, [r3]	@ movhi
 1885 001c 9BB2     		uxth	r3, r3
 1886 001e A3F66213 		subw	r3, r3, #2402
 1887 0022 134A     		ldr	r2, .L38+12
 1888 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1889 0028 1BB2     		sxth	r3, r3
 1890 002a 8033     		adds	r3, r3, #128
 1891 002c 002B     		cmp	r3, #0
 1892 002e 00DA     		bge	.L36
 1893 0030 FF33     		adds	r3, r3, #255
 1894              	.L36:
 1895 0032 1B12     		asrs	r3, r3, #8
 1896 0034 BB71     		strb	r3, [r7, #6]
 368:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 1897              		.loc 1 368 0
 1898 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1899 0038 0B4B     		ldr	r3, .L38+4
 1900 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1901 003c DBB2     		uxtb	r3, r3
 1902 003e 1344     		add	r3, r3, r2
 1903 0040 DBB2     		uxtb	r3, r3
 1904 0042 363B     		subs	r3, r3, #54
 1905 0044 DBB2     		uxtb	r3, r3
 1906 0046 FB71     		strb	r3, [r7, #7]
 1907              	.LBE2:
 366:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1908              		.loc 1 366 0
 1909 0048 02E0     		b	.L37
 1910              	.L35:
 369:bluetooth_rxtx.c **** 	}
 370:bluetooth_rxtx.c **** 	else {
 371:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 1911              		.loc 1 371 0
 1912 004a 074B     		ldr	r3, .L38+4
 1913 004c 1B78     		ldrb	r3, [r3]
 1914 004e FB71     		strb	r3, [r7, #7]
 1915              	.L37:
 372:bluetooth_rxtx.c **** 	}
 373:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 1916              		.loc 1 373 0
 1917 0050 97F90730 		ldrsb	r3, [r7, #7]
 1918 0054 1846     		mov	r0, r3
 1919 0056 0321     		movs	r1, #3
 1920 0058 FFF7FEFF 		bl	cs_threshold_set
 374:bluetooth_rxtx.c **** }
 1921              		.loc 1 374 0
 1922 005c 0837     		adds	r7, r7, #8
 1923              		.cfi_def_cfa_offset 8
 1924 005e BD46     		mov	sp, r7
 1925              		.cfi_def_cfa_register 13
 1926              		@ sp needed
 1927 0060 80BD     		pop	{r7, pc}
ARM GAS  /tmp/ccXEAChk.s 			page 40


 1928              	.L39:
 1929 0062 00BF     		.align	2
 1930              	.L38:
 1931 0064 00000000 		.word	hop_mode
 1932 0068 00000000 		.word	cs_threshold_req
 1933 006c 00000000 		.word	channel
 1934 0070 00000000 		.word	rssi_iir
 1935              		.cfi_endproc
 1936              	.LFE6:
 1938              		.section	.text.cs_trigger_enable,"ax",%progbits
 1939              		.align	2
 1940              		.thumb
 1941              		.thumb_func
 1943              	cs_trigger_enable:
 1944              	.LFB7:
 375:bluetooth_rxtx.c **** 
 376:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 377:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 378:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 379:bluetooth_rxtx.c ****  * and off here. */
 380:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 381:bluetooth_rxtx.c **** {
 1945              		.loc 1 381 0
 1946              		.cfi_startproc
 1947              		@ args = 0, pretend = 0, frame = 0
 1948              		@ frame_needed = 1, uses_anonymous_args = 0
 1949              		@ link register save eliminated.
 1950 0000 80B4     		push	{r7}
 1951              		.cfi_def_cfa_offset 4
 1952              		.cfi_offset 7, -4
 1953 0002 00AF     		add	r7, sp, #0
 1954              		.cfi_def_cfa_register 7
 382:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1955              		.loc 1 382 0
 1956 0004 094B     		ldr	r3, .L41
 1957 0006 0022     		movs	r2, #0
 1958 0008 1A70     		strb	r2, [r3]
 383:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 1959              		.loc 1 383 0
 1960 000a 094B     		ldr	r3, .L41+4
 1961 000c 4FF40012 		mov	r2, #2097152
 1962 0010 1A60     		str	r2, [r3]
 384:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1963              		.loc 1 384 0
 1964 0012 084B     		ldr	r3, .L41+8
 1965 0014 0422     		movs	r2, #4
 1966 0016 1A60     		str	r2, [r3]
 385:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 1967              		.loc 1 385 0
 1968 0018 074A     		ldr	r2, .L41+12
 1969 001a 074B     		ldr	r3, .L41+12
 1970 001c 1B68     		ldr	r3, [r3]
 1971 001e 43F00403 		orr	r3, r3, #4
 1972 0022 1360     		str	r3, [r2]
 386:bluetooth_rxtx.c **** }
 1973              		.loc 1 386 0
 1974 0024 BD46     		mov	sp, r7
ARM GAS  /tmp/ccXEAChk.s 			page 41


 1975              		.cfi_def_cfa_register 13
 1976              		@ sp needed
 1977 0026 5DF8047B 		ldr	r7, [sp], #4
 1978              		.cfi_restore 7
 1979              		.cfi_def_cfa_offset 0
 1980 002a 7047     		bx	lr
 1981              	.L42:
 1982              		.align	2
 1983              	.L41:
 1984 002c 00000000 		.word	cs_trigger
 1985 0030 00E100E0 		.word	-536813312
 1986 0034 AC800240 		.word	1073905836
 1987 0038 B4800240 		.word	1073905844
 1988              		.cfi_endproc
 1989              	.LFE7:
 1991              		.section	.text.cs_trigger_disable,"ax",%progbits
 1992              		.align	2
 1993              		.thumb
 1994              		.thumb_func
 1996              	cs_trigger_disable:
 1997              	.LFB8:
 387:bluetooth_rxtx.c **** 
 388:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 389:bluetooth_rxtx.c **** {
 1998              		.loc 1 389 0
 1999              		.cfi_startproc
 2000              		@ args = 0, pretend = 0, frame = 0
 2001              		@ frame_needed = 1, uses_anonymous_args = 0
 2002              		@ link register save eliminated.
 2003 0000 80B4     		push	{r7}
 2004              		.cfi_def_cfa_offset 4
 2005              		.cfi_offset 7, -4
 2006 0002 00AF     		add	r7, sp, #0
 2007              		.cfi_def_cfa_register 7
 390:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 2008              		.loc 1 390 0
 2009 0004 094A     		ldr	r2, .L44
 2010 0006 094B     		ldr	r3, .L44
 2011 0008 1B68     		ldr	r3, [r3]
 2012 000a 23F00403 		bic	r3, r3, #4
 2013 000e 1360     		str	r3, [r2]
 391:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2014              		.loc 1 391 0
 2015 0010 074B     		ldr	r3, .L44+4
 2016 0012 0422     		movs	r2, #4
 2017 0014 1A60     		str	r2, [r3]
 392:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 2018              		.loc 1 392 0
 2019 0016 074B     		ldr	r3, .L44+8
 2020 0018 4FF40012 		mov	r2, #2097152
 2021 001c 1A60     		str	r2, [r3]
 393:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2022              		.loc 1 393 0
 2023 001e 064B     		ldr	r3, .L44+12
 2024 0020 0022     		movs	r2, #0
 2025 0022 1A70     		strb	r2, [r3]
 394:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccXEAChk.s 			page 42


 2026              		.loc 1 394 0
 2027 0024 BD46     		mov	sp, r7
 2028              		.cfi_def_cfa_register 13
 2029              		@ sp needed
 2030 0026 5DF8047B 		ldr	r7, [sp], #4
 2031              		.cfi_restore 7
 2032              		.cfi_def_cfa_offset 0
 2033 002a 7047     		bx	lr
 2034              	.L45:
 2035              		.align	2
 2036              	.L44:
 2037 002c B4800240 		.word	1073905844
 2038 0030 AC800240 		.word	1073905836
 2039 0034 80E100E0 		.word	-536813184
 2040 0038 00000000 		.word	cs_trigger
 2041              		.cfi_endproc
 2042              	.LFE8:
 2044              		.section	.rodata
 2045 08f9 000000   		.align	2
 2046              	.LC3:
 2047 08fc 32303135 		.ascii	"2015-10-R1\000"
 2047      2D31302D 
 2047      523100
 2048              		.section	.text.vendor_request_handler,"ax",%progbits
 2049              		.align	2
 2050              		.thumb
 2051              		.thumb_func
 2053              	vendor_request_handler:
 2054              	.LFB9:
 395:bluetooth_rxtx.c **** 
 396:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 397:bluetooth_rxtx.c **** {
 2055              		.loc 1 397 0
 2056              		.cfi_startproc
 2057              		@ args = 0, pretend = 0, frame = 80
 2058              		@ frame_needed = 1, uses_anonymous_args = 0
 2059 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2060              		.cfi_def_cfa_offset 36
 2061              		.cfi_offset 4, -36
 2062              		.cfi_offset 5, -32
 2063              		.cfi_offset 6, -28
 2064              		.cfi_offset 7, -24
 2065              		.cfi_offset 8, -20
 2066              		.cfi_offset 9, -16
 2067              		.cfi_offset 10, -12
 2068              		.cfi_offset 11, -8
 2069              		.cfi_offset 14, -4
 2070 0004 95B0     		sub	sp, sp, #84
 2071              		.cfi_def_cfa_offset 120
 2072 0006 00AF     		add	r7, sp, #0
 2073              		.cfi_def_cfa_register 7
 2074 0008 B960     		str	r1, [r7, #8]
 2075 000a 7A60     		str	r2, [r7, #4]
 2076 000c 3B60     		str	r3, [r7]
 2077 000e 0346     		mov	r3, r0
 2078 0010 FB73     		strb	r3, [r7, #15]
 398:bluetooth_rxtx.c **** 	u32 command[5];
ARM GAS  /tmp/ccXEAChk.s 			page 43


 399:bluetooth_rxtx.c **** 	u32 result[5];
 400:bluetooth_rxtx.c **** 	u64 ac_copy;
 401:bluetooth_rxtx.c **** 	int i; // loop counter
 402:bluetooth_rxtx.c **** 	u32 clock;
 403:bluetooth_rxtx.c **** 	int clock_offset;
 404:bluetooth_rxtx.c **** 	u8 length; // string length
 405:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2079              		.loc 1 405 0
 2080 0012 0023     		movs	r3, #0
 2081 0014 7B64     		str	r3, [r7, #68]
 406:bluetooth_rxtx.c **** 	u16 reg_val;
 407:bluetooth_rxtx.c **** 
 408:bluetooth_rxtx.c **** 	switch (request) {
 2082              		.loc 1 408 0
 2083 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2084 0018 3C2B     		cmp	r3, #60
 2085 001a 00F25185 		bhi	.L47
 2086 001e 01A2     		adr	r2, .L49
 2087 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2088              		.p2align 2
 2089              	.L49:
 2090 0024 19010000 		.word	.L48+1
 2091 0028 23010000 		.word	.L50+1
 2092 002c C10A0000 		.word	.L47+1
 2093 0030 33010000 		.word	.L51+1
 2094 0034 55010000 		.word	.L52+1
 2095 0038 71010000 		.word	.L53+1
 2096 003c 93010000 		.word	.L54+1
 2097 0040 AF010000 		.word	.L55+1
 2098 0044 D1010000 		.word	.L56+1
 2099 0048 F1010000 		.word	.L57+1
 2100 004c 13020000 		.word	.L58+1
 2101 0050 B7040000 		.word	.L59+1
 2102 0054 DD040000 		.word	.L60+1
 2103 0058 89020000 		.word	.L61+1
 2104 005c 93020000 		.word	.L62+1
 2105 0060 33020000 		.word	.L63+1
 2106 0064 71030000 		.word	.L64+1
 2107 0068 91030000 		.word	.L65+1
 2108 006c C9030000 		.word	.L66+1
 2109 0070 E9030000 		.word	.L67+1
 2110 0074 05040000 		.word	.L68+1
 2111 0078 91040000 		.word	.L69+1
 2112 007c 99040000 		.word	.L70+1
 2113 0080 AB040000 		.word	.L71+1
 2114 0084 67050000 		.word	.L72+1
 2115 0088 85050000 		.word	.L73+1
 2116 008c C10A0000 		.word	.L47+1
 2117 0090 91050000 		.word	.L74+1
 2118 0094 0D040000 		.word	.L75+1
 2119 0098 29040000 		.word	.L76+1
 2120 009c 51040000 		.word	.L77+1
 2121 00a0 49040000 		.word	.L78+1
 2122 00a4 59040000 		.word	.L79+1
 2123 00a8 55060000 		.word	.L80+1
 2124 00ac ED050000 		.word	.L81+1
 2125 00b0 C9060000 		.word	.L82+1
ARM GAS  /tmp/ccXEAChk.s 			page 44


 2126 00b4 D7060000 		.word	.L83+1
 2127 00b8 E7060000 		.word	.L84+1
 2128 00bc F9060000 		.word	.L85+1
 2129 00c0 C5070000 		.word	.L86+1
 2130 00c4 0B080000 		.word	.L87+1
 2131 00c8 99080000 		.word	.L88+1
 2132 00cc CD080000 		.word	.L89+1
 2133 00d0 EF080000 		.word	.L90+1
 2134 00d4 47090000 		.word	.L91+1
 2135 00d8 C50A0000 		.word	.L150+1
 2136 00dc 79090000 		.word	.L93+1
 2137 00e0 8F090000 		.word	.L94+1
 2138 00e4 AB090000 		.word	.L95+1
 2139 00e8 C1090000 		.word	.L96+1
 2140 00ec ED090000 		.word	.L97+1
 2141 00f0 3D080000 		.word	.L98+1
 2142 00f4 6F080000 		.word	.L99+1
 2143 00f8 090A0000 		.word	.L100+1
 2144 00fc 4D0A0000 		.word	.L101+1
 2145 0100 97060000 		.word	.L102+1
 2146 0104 5F0A0000 		.word	.L103+1
 2147 0108 C10A0000 		.word	.L47+1
 2148 010c 370A0000 		.word	.L104+1
 2149 0110 A30A0000 		.word	.L105+1
 2150 0114 AF0A0000 		.word	.L106+1
 2151              		.p2align 1
 2152              	.L48:
 409:bluetooth_rxtx.c **** 
 410:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 411:bluetooth_rxtx.c **** 		*data_len = 0;
 2153              		.loc 1 411 0
 2154 0118 3B68     		ldr	r3, [r7]
 2155 011a 0022     		movs	r2, #0
 2156 011c 1A60     		str	r2, [r3]
 412:bluetooth_rxtx.c **** 		break;
 2157              		.loc 1 412 0
 2158 011e 00F0D2BC 		b	.L107
 2159              	.L50:
 413:bluetooth_rxtx.c **** 
 414:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 415:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2160              		.loc 1 415 0
 2161 0122 A14B     		ldr	r3, .L151
 2162 0124 0122     		movs	r2, #1
 2163 0126 1A70     		strb	r2, [r3]
 416:bluetooth_rxtx.c **** 		*data_len = 0;
 2164              		.loc 1 416 0
 2165 0128 3B68     		ldr	r3, [r7]
 2166 012a 0022     		movs	r2, #0
 2167 012c 1A60     		str	r2, [r3]
 417:bluetooth_rxtx.c **** 		break;
 2168              		.loc 1 417 0
 2169 012e 00F0CABC 		b	.L107
 2170              	.L51:
 418:bluetooth_rxtx.c **** 
 419:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 420:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
ARM GAS  /tmp/ccXEAChk.s 			page 45


 2171              		.loc 1 420 0
 2172 0132 9E4B     		ldr	r3, .L151+4
 2173 0134 1B68     		ldr	r3, [r3]
 2174 0136 03F00203 		and	r3, r3, #2
 2175 013a 002B     		cmp	r3, #0
 2176 013c 14BF     		ite	ne
 2177 013e 0123     		movne	r3, #1
 2178 0140 0023     		moveq	r3, #0
 2179 0142 DBB2     		uxtb	r3, r3
 2180 0144 1A46     		mov	r2, r3
 2181 0146 7B68     		ldr	r3, [r7, #4]
 2182 0148 1A70     		strb	r2, [r3]
 421:bluetooth_rxtx.c **** 		*data_len = 1;
 2183              		.loc 1 421 0
 2184 014a 3B68     		ldr	r3, [r7]
 2185 014c 0122     		movs	r2, #1
 2186 014e 1A60     		str	r2, [r3]
 422:bluetooth_rxtx.c **** 		break;
 2187              		.loc 1 422 0
 2188 0150 00F0B9BC 		b	.L107
 2189              	.L52:
 423:bluetooth_rxtx.c **** 
 424:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 425:bluetooth_rxtx.c **** 		if (request_params[0])
 2190              		.loc 1 425 0
 2191 0154 BB68     		ldr	r3, [r7, #8]
 2192 0156 1B88     		ldrh	r3, [r3]
 2193 0158 002B     		cmp	r3, #0
 2194 015a 04D0     		beq	.L108
 426:bluetooth_rxtx.c **** 			USRLED_SET;
 2195              		.loc 1 426 0
 2196 015c 944B     		ldr	r3, .L151+8
 2197 015e 0222     		movs	r2, #2
 2198 0160 1A60     		str	r2, [r3]
 427:bluetooth_rxtx.c **** 		else
 428:bluetooth_rxtx.c **** 			USRLED_CLR;
 429:bluetooth_rxtx.c **** 		break;
 2199              		.loc 1 429 0
 2200 0162 00F0B0BC 		b	.L107
 2201              	.L108:
 428:bluetooth_rxtx.c **** 		break;
 2202              		.loc 1 428 0
 2203 0166 934B     		ldr	r3, .L151+12
 2204 0168 0222     		movs	r2, #2
 2205 016a 1A60     		str	r2, [r3]
 2206              		.loc 1 429 0
 2207 016c 00F0ABBC 		b	.L107
 2208              	.L53:
 430:bluetooth_rxtx.c **** 
 431:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 432:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2209              		.loc 1 432 0
 2210 0170 8E4B     		ldr	r3, .L151+4
 2211 0172 1B68     		ldr	r3, [r3]
 2212 0174 03F01003 		and	r3, r3, #16
 2213 0178 002B     		cmp	r3, #0
 2214 017a 14BF     		ite	ne
ARM GAS  /tmp/ccXEAChk.s 			page 46


 2215 017c 0123     		movne	r3, #1
 2216 017e 0023     		moveq	r3, #0
 2217 0180 DBB2     		uxtb	r3, r3
 2218 0182 1A46     		mov	r2, r3
 2219 0184 7B68     		ldr	r3, [r7, #4]
 2220 0186 1A70     		strb	r2, [r3]
 433:bluetooth_rxtx.c **** 		*data_len = 1;
 2221              		.loc 1 433 0
 2222 0188 3B68     		ldr	r3, [r7]
 2223 018a 0122     		movs	r2, #1
 2224 018c 1A60     		str	r2, [r3]
 434:bluetooth_rxtx.c **** 		break;
 2225              		.loc 1 434 0
 2226 018e 00F09ABC 		b	.L107
 2227              	.L54:
 435:bluetooth_rxtx.c **** 
 436:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 437:bluetooth_rxtx.c **** 		if (request_params[0])
 2228              		.loc 1 437 0
 2229 0192 BB68     		ldr	r3, [r7, #8]
 2230 0194 1B88     		ldrh	r3, [r3]
 2231 0196 002B     		cmp	r3, #0
 2232 0198 04D0     		beq	.L110
 438:bluetooth_rxtx.c **** 			RXLED_SET;
 2233              		.loc 1 438 0
 2234 019a 854B     		ldr	r3, .L151+8
 2235 019c 1022     		movs	r2, #16
 2236 019e 1A60     		str	r2, [r3]
 439:bluetooth_rxtx.c **** 		else
 440:bluetooth_rxtx.c **** 			RXLED_CLR;
 441:bluetooth_rxtx.c **** 		break;
 2237              		.loc 1 441 0
 2238 01a0 00F091BC 		b	.L107
 2239              	.L110:
 440:bluetooth_rxtx.c **** 		break;
 2240              		.loc 1 440 0
 2241 01a4 834B     		ldr	r3, .L151+12
 2242 01a6 1022     		movs	r2, #16
 2243 01a8 1A60     		str	r2, [r3]
 2244              		.loc 1 441 0
 2245 01aa 00F08CBC 		b	.L107
 2246              	.L55:
 442:bluetooth_rxtx.c **** 
 443:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 444:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2247              		.loc 1 444 0
 2248 01ae 7F4B     		ldr	r3, .L151+4
 2249 01b0 1B68     		ldr	r3, [r3]
 2250 01b2 03F48073 		and	r3, r3, #256
 2251 01b6 002B     		cmp	r3, #0
 2252 01b8 14BF     		ite	ne
 2253 01ba 0123     		movne	r3, #1
 2254 01bc 0023     		moveq	r3, #0
 2255 01be DBB2     		uxtb	r3, r3
 2256 01c0 1A46     		mov	r2, r3
 2257 01c2 7B68     		ldr	r3, [r7, #4]
 2258 01c4 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 47


 445:bluetooth_rxtx.c **** 		*data_len = 1;
 2259              		.loc 1 445 0
 2260 01c6 3B68     		ldr	r3, [r7]
 2261 01c8 0122     		movs	r2, #1
 2262 01ca 1A60     		str	r2, [r3]
 446:bluetooth_rxtx.c **** 		break;
 2263              		.loc 1 446 0
 2264 01cc 00F07BBC 		b	.L107
 2265              	.L56:
 447:bluetooth_rxtx.c **** 
 448:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 449:bluetooth_rxtx.c **** 		if (request_params[0])
 2266              		.loc 1 449 0
 2267 01d0 BB68     		ldr	r3, [r7, #8]
 2268 01d2 1B88     		ldrh	r3, [r3]
 2269 01d4 002B     		cmp	r3, #0
 2270 01d6 05D0     		beq	.L112
 450:bluetooth_rxtx.c **** 			TXLED_SET;
 2271              		.loc 1 450 0
 2272 01d8 754B     		ldr	r3, .L151+8
 2273 01da 4FF48072 		mov	r2, #256
 2274 01de 1A60     		str	r2, [r3]
 451:bluetooth_rxtx.c **** 		else
 452:bluetooth_rxtx.c **** 			TXLED_CLR;
 453:bluetooth_rxtx.c **** 		break;
 2275              		.loc 1 453 0
 2276 01e0 00F071BC 		b	.L107
 2277              	.L112:
 452:bluetooth_rxtx.c **** 		break;
 2278              		.loc 1 452 0
 2279 01e4 734B     		ldr	r3, .L151+12
 2280 01e6 4FF48072 		mov	r2, #256
 2281 01ea 1A60     		str	r2, [r3]
 2282              		.loc 1 453 0
 2283 01ec 00F06BBC 		b	.L107
 2284              	.L57:
 454:bluetooth_rxtx.c **** 
 455:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 456:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2285              		.loc 1 456 0
 2286 01f0 6E4B     		ldr	r3, .L151+4
 2287 01f2 1B68     		ldr	r3, [r3]
 2288 01f4 03F40073 		and	r3, r3, #512
 2289 01f8 002B     		cmp	r3, #0
 2290 01fa 14BF     		ite	ne
 2291 01fc 0123     		movne	r3, #1
 2292 01fe 0023     		moveq	r3, #0
 2293 0200 DBB2     		uxtb	r3, r3
 2294 0202 1A46     		mov	r2, r3
 2295 0204 7B68     		ldr	r3, [r7, #4]
 2296 0206 1A70     		strb	r2, [r3]
 457:bluetooth_rxtx.c **** 		*data_len = 1;
 2297              		.loc 1 457 0
 2298 0208 3B68     		ldr	r3, [r7]
 2299 020a 0122     		movs	r2, #1
 2300 020c 1A60     		str	r2, [r3]
 458:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccXEAChk.s 			page 48


 2301              		.loc 1 458 0
 2302 020e 00F05ABC 		b	.L107
 2303              	.L58:
 459:bluetooth_rxtx.c **** 
 460:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 461:bluetooth_rxtx.c **** 		if (request_params[0])
 2304              		.loc 1 461 0
 2305 0212 BB68     		ldr	r3, [r7, #8]
 2306 0214 1B88     		ldrh	r3, [r3]
 2307 0216 002B     		cmp	r3, #0
 2308 0218 05D0     		beq	.L114
 462:bluetooth_rxtx.c **** 			CC1V8_SET;
 2309              		.loc 1 462 0
 2310 021a 654B     		ldr	r3, .L151+8
 2311 021c 4FF40072 		mov	r2, #512
 2312 0220 1A60     		str	r2, [r3]
 463:bluetooth_rxtx.c **** 		else
 464:bluetooth_rxtx.c **** 			CC1V8_CLR;
 465:bluetooth_rxtx.c **** 		break;
 2313              		.loc 1 465 0
 2314 0222 00F050BC 		b	.L107
 2315              	.L114:
 464:bluetooth_rxtx.c **** 		break;
 2316              		.loc 1 464 0
 2317 0226 634B     		ldr	r3, .L151+12
 2318 0228 4FF40072 		mov	r2, #512
 2319 022c 1A60     		str	r2, [r3]
 2320              		.loc 1 465 0
 2321 022e 00F04ABC 		b	.L107
 2322              	.L63:
 466:bluetooth_rxtx.c **** 
 467:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 468:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2323              		.loc 1 468 0
 2324 0232 3623     		movs	r3, #54
 2325 0234 7B62     		str	r3, [r7, #36]
 469:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2326              		.loc 1 469 0
 2327 0236 604B     		ldr	r3, .L151+16
 2328 0238 1B68     		ldr	r3, [r3]
 2329 023a 07F12401 		add	r1, r7, #36
 2330 023e 07F11002 		add	r2, r7, #16
 2331 0242 0846     		mov	r0, r1
 2332 0244 1146     		mov	r1, r2
 2333 0246 9847     		blx	r3
 470:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2334              		.loc 1 470 0
 2335 0248 3B69     		ldr	r3, [r7, #16]
 2336 024a DAB2     		uxtb	r2, r3
 2337 024c 7B68     		ldr	r3, [r7, #4]
 2338 024e 1A70     		strb	r2, [r3]
 471:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2339              		.loc 1 471 0
 2340 0250 7B68     		ldr	r3, [r7, #4]
 2341 0252 0133     		adds	r3, r3, #1
 2342 0254 7A69     		ldr	r2, [r7, #20]
 2343 0256 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/ccXEAChk.s 			page 49


 2344 0258 1A70     		strb	r2, [r3]
 472:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2345              		.loc 1 472 0
 2346 025a 7B68     		ldr	r3, [r7, #4]
 2347 025c 0233     		adds	r3, r3, #2
 2348 025e 7A69     		ldr	r2, [r7, #20]
 2349 0260 120A     		lsrs	r2, r2, #8
 2350 0262 D2B2     		uxtb	r2, r2
 2351 0264 1A70     		strb	r2, [r3]
 473:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2352              		.loc 1 473 0
 2353 0266 7B68     		ldr	r3, [r7, #4]
 2354 0268 0333     		adds	r3, r3, #3
 2355 026a 7A69     		ldr	r2, [r7, #20]
 2356 026c 120C     		lsrs	r2, r2, #16
 2357 026e D2B2     		uxtb	r2, r2
 2358 0270 1A70     		strb	r2, [r3]
 474:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2359              		.loc 1 474 0
 2360 0272 7B68     		ldr	r3, [r7, #4]
 2361 0274 0433     		adds	r3, r3, #4
 2362 0276 7A69     		ldr	r2, [r7, #20]
 2363 0278 120E     		lsrs	r2, r2, #24
 2364 027a D2B2     		uxtb	r2, r2
 2365 027c 1A70     		strb	r2, [r3]
 475:bluetooth_rxtx.c **** 		*data_len = 5;
 2366              		.loc 1 475 0
 2367 027e 3B68     		ldr	r3, [r7]
 2368 0280 0522     		movs	r2, #5
 2369 0282 1A60     		str	r2, [r3]
 476:bluetooth_rxtx.c **** 		break;
 2370              		.loc 1 476 0
 2371 0284 00F01FBC 		b	.L107
 2372              	.L61:
 477:bluetooth_rxtx.c **** 
 478:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 479:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2373              		.loc 1 479 0
 2374 0288 474B     		ldr	r3, .L151
 2375 028a 0B22     		movs	r2, #11
 2376 028c 1A70     		strb	r2, [r3]
 480:bluetooth_rxtx.c **** 		break;
 2377              		.loc 1 480 0
 2378 028e 00F01ABC 		b	.L107
 2379              	.L62:
 481:bluetooth_rxtx.c **** 
 482:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 483:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2380              		.loc 1 483 0
 2381 0292 3A23     		movs	r3, #58
 2382 0294 7B62     		str	r3, [r7, #36]
 484:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2383              		.loc 1 484 0
 2384 0296 484B     		ldr	r3, .L151+16
 2385 0298 1B68     		ldr	r3, [r3]
 2386 029a 07F12401 		add	r1, r7, #36
 2387 029e 07F11002 		add	r2, r7, #16
ARM GAS  /tmp/ccXEAChk.s 			page 50


 2388 02a2 0846     		mov	r0, r1
 2389 02a4 1146     		mov	r1, r2
 2390 02a6 9847     		blx	r3
 485:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2391              		.loc 1 485 0
 2392 02a8 3B69     		ldr	r3, [r7, #16]
 2393 02aa DAB2     		uxtb	r2, r3
 2394 02ac 7B68     		ldr	r3, [r7, #4]
 2395 02ae 1A70     		strb	r2, [r3]
 486:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2396              		.loc 1 486 0
 2397 02b0 7B68     		ldr	r3, [r7, #4]
 2398 02b2 0133     		adds	r3, r3, #1
 2399 02b4 7A69     		ldr	r2, [r7, #20]
 2400 02b6 D2B2     		uxtb	r2, r2
 2401 02b8 1A70     		strb	r2, [r3]
 487:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2402              		.loc 1 487 0
 2403 02ba 7B68     		ldr	r3, [r7, #4]
 2404 02bc 0233     		adds	r3, r3, #2
 2405 02be 7A69     		ldr	r2, [r7, #20]
 2406 02c0 120A     		lsrs	r2, r2, #8
 2407 02c2 D2B2     		uxtb	r2, r2
 2408 02c4 1A70     		strb	r2, [r3]
 488:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2409              		.loc 1 488 0
 2410 02c6 7B68     		ldr	r3, [r7, #4]
 2411 02c8 0333     		adds	r3, r3, #3
 2412 02ca 7A69     		ldr	r2, [r7, #20]
 2413 02cc 120C     		lsrs	r2, r2, #16
 2414 02ce D2B2     		uxtb	r2, r2
 2415 02d0 1A70     		strb	r2, [r3]
 489:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2416              		.loc 1 489 0
 2417 02d2 7B68     		ldr	r3, [r7, #4]
 2418 02d4 0433     		adds	r3, r3, #4
 2419 02d6 7A69     		ldr	r2, [r7, #20]
 2420 02d8 120E     		lsrs	r2, r2, #24
 2421 02da D2B2     		uxtb	r2, r2
 2422 02dc 1A70     		strb	r2, [r3]
 490:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2423              		.loc 1 490 0
 2424 02de 7B68     		ldr	r3, [r7, #4]
 2425 02e0 0533     		adds	r3, r3, #5
 2426 02e2 BA69     		ldr	r2, [r7, #24]
 2427 02e4 D2B2     		uxtb	r2, r2
 2428 02e6 1A70     		strb	r2, [r3]
 491:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2429              		.loc 1 491 0
 2430 02e8 7B68     		ldr	r3, [r7, #4]
 2431 02ea 0633     		adds	r3, r3, #6
 2432 02ec BA69     		ldr	r2, [r7, #24]
 2433 02ee 120A     		lsrs	r2, r2, #8
 2434 02f0 D2B2     		uxtb	r2, r2
 2435 02f2 1A70     		strb	r2, [r3]
 492:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2436              		.loc 1 492 0
ARM GAS  /tmp/ccXEAChk.s 			page 51


 2437 02f4 7B68     		ldr	r3, [r7, #4]
 2438 02f6 0733     		adds	r3, r3, #7
 2439 02f8 BA69     		ldr	r2, [r7, #24]
 2440 02fa 120C     		lsrs	r2, r2, #16
 2441 02fc D2B2     		uxtb	r2, r2
 2442 02fe 1A70     		strb	r2, [r3]
 493:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2443              		.loc 1 493 0
 2444 0300 7B68     		ldr	r3, [r7, #4]
 2445 0302 0833     		adds	r3, r3, #8
 2446 0304 BA69     		ldr	r2, [r7, #24]
 2447 0306 120E     		lsrs	r2, r2, #24
 2448 0308 D2B2     		uxtb	r2, r2
 2449 030a 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2450              		.loc 1 494 0
 2451 030c 7B68     		ldr	r3, [r7, #4]
 2452 030e 0933     		adds	r3, r3, #9
 2453 0310 FA69     		ldr	r2, [r7, #28]
 2454 0312 D2B2     		uxtb	r2, r2
 2455 0314 1A70     		strb	r2, [r3]
 495:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2456              		.loc 1 495 0
 2457 0316 7B68     		ldr	r3, [r7, #4]
 2458 0318 0A33     		adds	r3, r3, #10
 2459 031a FA69     		ldr	r2, [r7, #28]
 2460 031c 120A     		lsrs	r2, r2, #8
 2461 031e D2B2     		uxtb	r2, r2
 2462 0320 1A70     		strb	r2, [r3]
 496:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2463              		.loc 1 496 0
 2464 0322 7B68     		ldr	r3, [r7, #4]
 2465 0324 0B33     		adds	r3, r3, #11
 2466 0326 FA69     		ldr	r2, [r7, #28]
 2467 0328 120C     		lsrs	r2, r2, #16
 2468 032a D2B2     		uxtb	r2, r2
 2469 032c 1A70     		strb	r2, [r3]
 497:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2470              		.loc 1 497 0
 2471 032e 7B68     		ldr	r3, [r7, #4]
 2472 0330 0C33     		adds	r3, r3, #12
 2473 0332 FA69     		ldr	r2, [r7, #28]
 2474 0334 120E     		lsrs	r2, r2, #24
 2475 0336 D2B2     		uxtb	r2, r2
 2476 0338 1A70     		strb	r2, [r3]
 498:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2477              		.loc 1 498 0
 2478 033a 7B68     		ldr	r3, [r7, #4]
 2479 033c 0D33     		adds	r3, r3, #13
 2480 033e 3A6A     		ldr	r2, [r7, #32]
 2481 0340 D2B2     		uxtb	r2, r2
 2482 0342 1A70     		strb	r2, [r3]
 499:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2483              		.loc 1 499 0
 2484 0344 7B68     		ldr	r3, [r7, #4]
 2485 0346 0E33     		adds	r3, r3, #14
 2486 0348 3A6A     		ldr	r2, [r7, #32]
ARM GAS  /tmp/ccXEAChk.s 			page 52


 2487 034a 120A     		lsrs	r2, r2, #8
 2488 034c D2B2     		uxtb	r2, r2
 2489 034e 1A70     		strb	r2, [r3]
 500:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2490              		.loc 1 500 0
 2491 0350 7B68     		ldr	r3, [r7, #4]
 2492 0352 0F33     		adds	r3, r3, #15
 2493 0354 3A6A     		ldr	r2, [r7, #32]
 2494 0356 120C     		lsrs	r2, r2, #16
 2495 0358 D2B2     		uxtb	r2, r2
 2496 035a 1A70     		strb	r2, [r3]
 501:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2497              		.loc 1 501 0
 2498 035c 7B68     		ldr	r3, [r7, #4]
 2499 035e 1033     		adds	r3, r3, #16
 2500 0360 3A6A     		ldr	r2, [r7, #32]
 2501 0362 120E     		lsrs	r2, r2, #24
 2502 0364 D2B2     		uxtb	r2, r2
 2503 0366 1A70     		strb	r2, [r3]
 502:bluetooth_rxtx.c **** 		*data_len = 17;
 2504              		.loc 1 502 0
 2505 0368 3B68     		ldr	r3, [r7]
 2506 036a 1122     		movs	r2, #17
 2507 036c 1A60     		str	r2, [r3]
 503:bluetooth_rxtx.c **** 		break;
 2508              		.loc 1 503 0
 2509 036e AAE3     		b	.L107
 2510              	.L64:
 504:bluetooth_rxtx.c **** 
 505:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 506:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 507:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2511              		.loc 1 507 0
 2512 0370 124B     		ldr	r3, .L151+20
 2513 0372 1B68     		ldr	r3, [r3]
 2514 0374 03F08003 		and	r3, r3, #128
 2515 0378 002B     		cmp	r3, #0
 2516 037a 14BF     		ite	ne
 2517 037c 0123     		movne	r3, #1
 2518 037e 0023     		moveq	r3, #0
 2519 0380 DBB2     		uxtb	r3, r3
 2520 0382 1A46     		mov	r2, r3
 2521 0384 7B68     		ldr	r3, [r7, #4]
 2522 0386 1A70     		strb	r2, [r3]
 508:bluetooth_rxtx.c **** 		*data_len = 1;
 2523              		.loc 1 508 0
 2524 0388 3B68     		ldr	r3, [r7]
 2525 038a 0122     		movs	r2, #1
 2526 038c 1A60     		str	r2, [r3]
 509:bluetooth_rxtx.c **** 		break;
 2527              		.loc 1 509 0
 2528 038e 9AE3     		b	.L107
 2529              	.L65:
 510:bluetooth_rxtx.c **** 
 511:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 512:bluetooth_rxtx.c **** 		if (request_params[0])
 2530              		.loc 1 512 0
ARM GAS  /tmp/ccXEAChk.s 			page 53


 2531 0390 BB68     		ldr	r3, [r7, #8]
 2532 0392 1B88     		ldrh	r3, [r3]
 2533 0394 002B     		cmp	r3, #0
 2534 0396 03D0     		beq	.L116
 513:bluetooth_rxtx.c **** 			PAEN_SET;
 2535              		.loc 1 513 0
 2536 0398 094B     		ldr	r3, .L151+24
 2537 039a 8022     		movs	r2, #128
 2538 039c 1A60     		str	r2, [r3]
 514:bluetooth_rxtx.c **** 		else
 515:bluetooth_rxtx.c **** 			PAEN_CLR;
 516:bluetooth_rxtx.c **** 		break;
 2539              		.loc 1 516 0
 2540 039e 92E3     		b	.L107
 2541              	.L116:
 515:bluetooth_rxtx.c **** 		break;
 2542              		.loc 1 515 0
 2543 03a0 084B     		ldr	r3, .L151+28
 2544 03a2 8022     		movs	r2, #128
 2545 03a4 1A60     		str	r2, [r3]
 2546              		.loc 1 516 0
 2547 03a6 8EE3     		b	.L107
 2548              	.L152:
 2549              		.align	2
 2550              	.L151:
 2551 03a8 00000000 		.word	requested_mode
 2552 03ac 34C00920 		.word	537509940
 2553 03b0 38C00920 		.word	537509944
 2554 03b4 3CC00920 		.word	537509948
 2555 03b8 00000000 		.word	iap_entry
 2556 03bc 54C00920 		.word	537509972
 2557 03c0 58C00920 		.word	537509976
 2558 03c4 5CC00920 		.word	537509980
 2559              	.L66:
 517:bluetooth_rxtx.c **** 
 518:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 519:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2560              		.loc 1 519 0
 2561 03c8 924B     		ldr	r3, .L153
 2562 03ca 1B68     		ldr	r3, [r3]
 2563 03cc 03F48073 		and	r3, r3, #256
 2564 03d0 002B     		cmp	r3, #0
 2565 03d2 14BF     		ite	ne
 2566 03d4 0123     		movne	r3, #1
 2567 03d6 0023     		moveq	r3, #0
 2568 03d8 DBB2     		uxtb	r3, r3
 2569 03da 1A46     		mov	r2, r3
 2570 03dc 7B68     		ldr	r3, [r7, #4]
 2571 03de 1A70     		strb	r2, [r3]
 520:bluetooth_rxtx.c **** 		*data_len = 1;
 2572              		.loc 1 520 0
 2573 03e0 3B68     		ldr	r3, [r7]
 2574 03e2 0122     		movs	r2, #1
 2575 03e4 1A60     		str	r2, [r3]
 521:bluetooth_rxtx.c **** 		break;
 2576              		.loc 1 521 0
 2577 03e6 6EE3     		b	.L107
ARM GAS  /tmp/ccXEAChk.s 			page 54


 2578              	.L67:
 522:bluetooth_rxtx.c **** 
 523:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 524:bluetooth_rxtx.c **** 		if (request_params[0])
 2579              		.loc 1 524 0
 2580 03e8 BB68     		ldr	r3, [r7, #8]
 2581 03ea 1B88     		ldrh	r3, [r3]
 2582 03ec 002B     		cmp	r3, #0
 2583 03ee 04D0     		beq	.L118
 525:bluetooth_rxtx.c **** 			HGM_SET;
 2584              		.loc 1 525 0
 2585 03f0 894B     		ldr	r3, .L153+4
 2586 03f2 4FF48072 		mov	r2, #256
 2587 03f6 1A60     		str	r2, [r3]
 526:bluetooth_rxtx.c **** 		else
 527:bluetooth_rxtx.c **** 			HGM_CLR;
 528:bluetooth_rxtx.c **** 		break;
 2588              		.loc 1 528 0
 2589 03f8 65E3     		b	.L107
 2590              	.L118:
 527:bluetooth_rxtx.c **** 		break;
 2591              		.loc 1 527 0
 2592 03fa 884B     		ldr	r3, .L153+8
 2593 03fc 4FF48072 		mov	r2, #256
 2594 0400 1A60     		str	r2, [r3]
 2595              		.loc 1 528 0
 2596 0402 60E3     		b	.L107
 2597              	.L68:
 529:bluetooth_rxtx.c **** #endif
 530:bluetooth_rxtx.c **** 
 531:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 532:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 533:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2598              		.loc 1 533 0
 2599 0404 864B     		ldr	r3, .L153+12
 2600 0406 0322     		movs	r2, #3
 2601 0408 1A70     		strb	r2, [r3]
 534:bluetooth_rxtx.c **** 		break;
 2602              		.loc 1 534 0
 2603 040a 5CE3     		b	.L107
 2604              	.L75:
 535:bluetooth_rxtx.c **** 
 536:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 537:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2605              		.loc 1 537 0
 2606 040c 0520     		movs	r0, #5
 2607 040e FFF7FEFF 		bl	cc2400_get
 2608 0412 0346     		mov	r3, r0
 2609 0414 DBB2     		uxtb	r3, r3
 2610 0416 03F00703 		and	r3, r3, #7
 2611 041a DAB2     		uxtb	r2, r3
 2612 041c 7B68     		ldr	r3, [r7, #4]
 2613 041e 1A70     		strb	r2, [r3]
 538:bluetooth_rxtx.c **** 		*data_len = 1;
 2614              		.loc 1 538 0
 2615 0420 3B68     		ldr	r3, [r7]
 2616 0422 0122     		movs	r2, #1
ARM GAS  /tmp/ccXEAChk.s 			page 55


 2617 0424 1A60     		str	r2, [r3]
 539:bluetooth_rxtx.c **** 		break;
 2618              		.loc 1 539 0
 2619 0426 4EE3     		b	.L107
 2620              	.L76:
 540:bluetooth_rxtx.c **** 
 541:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 542:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2621              		.loc 1 542 0
 2622 0428 BB68     		ldr	r3, [r7, #8]
 2623 042a 1B88     		ldrh	r3, [r3]
 2624 042c 072B     		cmp	r3, #7
 2625 042e 09D8     		bhi	.L120
 543:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2626              		.loc 1 543 0
 2627 0430 BB68     		ldr	r3, [r7, #8]
 2628 0432 1B88     		ldrh	r3, [r3]
 2629 0434 43F00803 		orr	r3, r3, #8
 2630 0438 9BB2     		uxth	r3, r3
 2631 043a 0520     		movs	r0, #5
 2632 043c 1946     		mov	r1, r3
 2633 043e FFF7FEFF 		bl	cc2400_set
 544:bluetooth_rxtx.c **** 		} else {
 545:bluetooth_rxtx.c **** 			return 0;
 546:bluetooth_rxtx.c **** 		}
 547:bluetooth_rxtx.c **** 		break;
 2634              		.loc 1 547 0
 2635 0442 40E3     		b	.L107
 2636              	.L120:
 545:bluetooth_rxtx.c **** 		}
 2637              		.loc 1 545 0
 2638 0444 0023     		movs	r3, #0
 2639 0446 3FE3     		b	.L149
 2640              	.L78:
 548:bluetooth_rxtx.c **** 
 549:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 550:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2641              		.loc 1 550 0
 2642 0448 754B     		ldr	r3, .L153+12
 2643 044a 0522     		movs	r2, #5
 2644 044c 1A70     		strb	r2, [r3]
 551:bluetooth_rxtx.c **** 		break;
 2645              		.loc 1 551 0
 2646 044e 3AE3     		b	.L107
 2647              	.L77:
 552:bluetooth_rxtx.c **** 
 553:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 554:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2648              		.loc 1 554 0
 2649 0450 734B     		ldr	r3, .L153+12
 2650 0452 0622     		movs	r2, #6
 2651 0454 1A70     		strb	r2, [r3]
 555:bluetooth_rxtx.c **** 		break;
 2652              		.loc 1 555 0
 2653 0456 36E3     		b	.L107
 2654              	.L79:
 556:bluetooth_rxtx.c **** #endif
ARM GAS  /tmp/ccXEAChk.s 			page 56


 557:bluetooth_rxtx.c **** 
 558:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 559:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2655              		.loc 1 559 0
 2656 0458 724B     		ldr	r3, .L153+16
 2657 045a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2658 045c 7B68     		ldr	r3, [r7, #4]
 2659 045e 1A70     		strb	r2, [r3]
 560:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2660              		.loc 1 560 0
 2661 0460 7B68     		ldr	r3, [r7, #4]
 2662 0462 0133     		adds	r3, r3, #1
 2663 0464 6F4A     		ldr	r2, .L153+16
 2664 0466 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2665 0468 1A70     		strb	r2, [r3]
 561:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2666              		.loc 1 561 0
 2667 046a 7B68     		ldr	r3, [r7, #4]
 2668 046c 0233     		adds	r3, r3, #2
 2669 046e 6D4A     		ldr	r2, .L153+16
 2670 0470 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2671 0472 1A70     		strb	r2, [r3]
 562:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2672              		.loc 1 562 0
 2673 0474 7B68     		ldr	r3, [r7, #4]
 2674 0476 0333     		adds	r3, r3, #3
 2675 0478 6A4A     		ldr	r2, .L153+16
 2676 047a D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2677 047c 1A70     		strb	r2, [r3]
 563:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2678              		.loc 1 563 0
 2679 047e 7B68     		ldr	r3, [r7, #4]
 2680 0480 0433     		adds	r3, r3, #4
 2681 0482 684A     		ldr	r2, .L153+16
 2682 0484 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2683 0486 1A70     		strb	r2, [r3]
 564:bluetooth_rxtx.c **** 		*data_len = 5;
 2684              		.loc 1 564 0
 2685 0488 3B68     		ldr	r3, [r7]
 2686 048a 0522     		movs	r2, #5
 2687 048c 1A60     		str	r2, [r3]
 565:bluetooth_rxtx.c **** 		break;
 2688              		.loc 1 565 0
 2689 048e 1AE3     		b	.L107
 2690              	.L69:
 566:bluetooth_rxtx.c **** 
 567:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 568:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2691              		.loc 1 568 0
 2692 0490 634B     		ldr	r3, .L153+12
 2693 0492 0022     		movs	r2, #0
 2694 0494 1A70     		strb	r2, [r3]
 569:bluetooth_rxtx.c **** 		break;
 2695              		.loc 1 569 0
 2696 0496 16E3     		b	.L107
 2697              	.L70:
 570:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccXEAChk.s 			page 57


 571:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 572:bluetooth_rxtx.c **** 		data[0] = modulation;
 2698              		.loc 1 572 0
 2699 0498 634B     		ldr	r3, .L153+20
 2700 049a 1B78     		ldrb	r3, [r3]
 2701 049c DAB2     		uxtb	r2, r3
 2702 049e 7B68     		ldr	r3, [r7, #4]
 2703 04a0 1A70     		strb	r2, [r3]
 573:bluetooth_rxtx.c **** 		*data_len = 1;
 2704              		.loc 1 573 0
 2705 04a2 3B68     		ldr	r3, [r7]
 2706 04a4 0122     		movs	r2, #1
 2707 04a6 1A60     		str	r2, [r3]
 574:bluetooth_rxtx.c **** 		break;
 2708              		.loc 1 574 0
 2709 04a8 0DE3     		b	.L107
 2710              	.L71:
 575:bluetooth_rxtx.c **** 
 576:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 577:bluetooth_rxtx.c **** 		modulation = request_params[0];
 2711              		.loc 1 577 0
 2712 04aa BB68     		ldr	r3, [r7, #8]
 2713 04ac 1B88     		ldrh	r3, [r3]
 2714 04ae DAB2     		uxtb	r2, r3
 2715 04b0 5D4B     		ldr	r3, .L153+20
 2716 04b2 1A70     		strb	r2, [r3]
 578:bluetooth_rxtx.c **** 		break;
 2717              		.loc 1 578 0
 2718 04b4 07E3     		b	.L107
 2719              	.L59:
 579:bluetooth_rxtx.c **** 
 580:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 581:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 2720              		.loc 1 581 0
 2721 04b6 5D4B     		ldr	r3, .L153+24
 2722 04b8 1B88     		ldrh	r3, [r3]	@ movhi
 2723 04ba 9BB2     		uxth	r3, r3
 2724 04bc DAB2     		uxtb	r2, r3
 2725 04be 7B68     		ldr	r3, [r7, #4]
 2726 04c0 1A70     		strb	r2, [r3]
 582:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 2727              		.loc 1 582 0
 2728 04c2 7B68     		ldr	r3, [r7, #4]
 2729 04c4 0133     		adds	r3, r3, #1
 2730 04c6 594A     		ldr	r2, .L153+24
 2731 04c8 1288     		ldrh	r2, [r2]	@ movhi
 2732 04ca 92B2     		uxth	r2, r2
 2733 04cc 120A     		lsrs	r2, r2, #8
 2734 04ce 92B2     		uxth	r2, r2
 2735 04d0 D2B2     		uxtb	r2, r2
 2736 04d2 1A70     		strb	r2, [r3]
 583:bluetooth_rxtx.c **** 		*data_len = 2;
 2737              		.loc 1 583 0
 2738 04d4 3B68     		ldr	r3, [r7]
 2739 04d6 0222     		movs	r2, #2
 2740 04d8 1A60     		str	r2, [r3]
 584:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccXEAChk.s 			page 58


 2741              		.loc 1 584 0
 2742 04da F4E2     		b	.L107
 2743              	.L60:
 585:bluetooth_rxtx.c **** 
 586:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 587:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2744              		.loc 1 587 0
 2745 04dc BB68     		ldr	r3, [r7, #8]
 2746 04de 1A88     		ldrh	r2, [r3]
 2747 04e0 534B     		ldr	r3, .L153+28
 2748 04e2 1A80     		strh	r2, [r3]	@ movhi
 588:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 589:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 2749              		.loc 1 589 0
 2750 04e4 524B     		ldr	r3, .L153+28
 2751 04e6 1B88     		ldrh	r3, [r3]	@ movhi
 2752 04e8 9BB2     		uxth	r3, r3
 2753 04ea 40F6EA22 		movw	r2, #2794
 2754 04ee 9342     		cmp	r3, r2
 2755 04f0 07D9     		bls	.L123
 590:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 2756              		.loc 1 590 0
 2757 04f2 504B     		ldr	r3, .L153+32
 2758 04f4 0122     		movs	r2, #1
 2759 04f6 1A70     		strb	r2, [r3]
 591:bluetooth_rxtx.c **** 			requested_channel = 2402;
 2760              		.loc 1 591 0
 2761 04f8 4D4B     		ldr	r3, .L153+28
 2762 04fa 40F66212 		movw	r2, #2402
 2763 04fe 1A80     		strh	r2, [r3]	@ movhi
 2764 0500 20E0     		b	.L124
 2765              	.L123:
 592:bluetooth_rxtx.c **** 		}
 593:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 594:bluetooth_rxtx.c **** 		else {
 595:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 2766              		.loc 1 595 0
 2767 0502 4C4B     		ldr	r3, .L153+32
 2768 0504 0022     		movs	r2, #0
 2769 0506 1A70     		strb	r2, [r3]
 596:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 2770              		.loc 1 596 0
 2771 0508 494B     		ldr	r3, .L153+28
 2772 050a 1B88     		ldrh	r3, [r3]	@ movhi
 2773 050c 9BB2     		uxth	r3, r3
 2774 050e 40F6DC02 		movw	r2, #2268
 2775 0512 9342     		cmp	r3, r2
 2776 0514 03D9     		bls	.L125
 2777              		.loc 1 596 0 is_stmt 0 discriminator 1
 2778 0516 464B     		ldr	r3, .L153+28
 2779 0518 1B88     		ldrh	r3, [r3]	@ movhi
 2780 051a 9BB2     		uxth	r3, r3
 2781 051c 01E0     		b	.L126
 2782              	.L125:
 2783              		.loc 1 596 0 discriminator 2
 2784 051e 40F6DC03 		movw	r3, #2268
 2785              	.L126:
ARM GAS  /tmp/ccXEAChk.s 			page 59


 2786              		.loc 1 596 0 discriminator 4
 2787 0522 434A     		ldr	r2, .L153+28
 2788 0524 1380     		strh	r3, [r2]	@ movhi
 597:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 2789              		.loc 1 597 0 is_stmt 1 discriminator 4
 2790 0526 424B     		ldr	r3, .L153+28
 2791 0528 1B88     		ldrh	r3, [r3]	@ movhi
 2792 052a 9BB2     		uxth	r3, r3
 2793 052c 40F6E922 		movw	r2, #2793
 2794 0530 9342     		cmp	r3, r2
 2795 0532 03D8     		bhi	.L127
 2796              		.loc 1 597 0 is_stmt 0 discriminator 1
 2797 0534 3E4B     		ldr	r3, .L153+28
 2798 0536 1B88     		ldrh	r3, [r3]	@ movhi
 2799 0538 9BB2     		uxth	r3, r3
 2800 053a 01E0     		b	.L128
 2801              	.L127:
 2802              		.loc 1 597 0 discriminator 2
 2803 053c 40F6EA23 		movw	r3, #2794
 2804              	.L128:
 2805              		.loc 1 597 0 discriminator 4
 2806 0540 3B4A     		ldr	r2, .L153+28
 2807 0542 1380     		strh	r3, [r2]	@ movhi
 2808              	.L124:
 598:bluetooth_rxtx.c **** 		}
 599:bluetooth_rxtx.c **** 
 600:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 2809              		.loc 1 600 0 is_stmt 1
 2810 0544 3C4B     		ldr	r3, .L153+36
 2811 0546 1B78     		ldrb	r3, [r3]
 2812 0548 DBB2     		uxtb	r3, r3
 2813 054a 092B     		cmp	r3, #9
 2814 054c 0AD0     		beq	.L129
 601:bluetooth_rxtx.c **** 			channel = requested_channel;
 2815              		.loc 1 601 0
 2816 054e 384B     		ldr	r3, .L153+28
 2817 0550 1B88     		ldrh	r3, [r3]	@ movhi
 2818 0552 9AB2     		uxth	r2, r3
 2819 0554 354B     		ldr	r3, .L153+24
 2820 0556 1A80     		strh	r2, [r3]	@ movhi
 602:bluetooth_rxtx.c **** 			requested_channel = 0;
 2821              		.loc 1 602 0
 2822 0558 354B     		ldr	r3, .L153+28
 2823 055a 0022     		movs	r2, #0
 2824 055c 1A80     		strh	r2, [r3]	@ movhi
 603:bluetooth_rxtx.c **** 
 604:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 605:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 606:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 2825              		.loc 1 606 0
 2826 055e FFF7FEFF 		bl	cs_threshold_calc_and_set
 607:bluetooth_rxtx.c **** 		}
 608:bluetooth_rxtx.c **** 		break;
 2827              		.loc 1 608 0
 2828 0562 B0E2     		b	.L107
 2829              	.L129:
 2830 0564 AFE2     		b	.L107
ARM GAS  /tmp/ccXEAChk.s 			page 60


 2831              	.L72:
 609:bluetooth_rxtx.c **** 
 610:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 611:bluetooth_rxtx.c **** 		command[0] = 57;
 2832              		.loc 1 611 0
 2833 0566 3923     		movs	r3, #57
 2834 0568 7B62     		str	r3, [r7, #36]
 612:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2835              		.loc 1 612 0
 2836 056a 344B     		ldr	r3, .L153+40
 2837 056c 1B68     		ldr	r3, [r3]
 2838 056e 07F12401 		add	r1, r7, #36
 2839 0572 07F11002 		add	r2, r7, #16
 2840 0576 0846     		mov	r0, r1
 2841 0578 1146     		mov	r1, r2
 2842 057a 9847     		blx	r3
 613:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 2843              		.loc 1 613 0
 2844 057c 3B68     		ldr	r3, [r7]
 2845 057e 0022     		movs	r2, #0
 2846 0580 1A60     		str	r2, [r3]
 614:bluetooth_rxtx.c **** 		break;
 2847              		.loc 1 614 0
 2848 0582 A0E2     		b	.L107
 2849              	.L73:
 615:bluetooth_rxtx.c **** 
 616:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 617:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 2850              		.loc 1 617 0
 2851 0584 2E4B     		ldr	r3, .L153+44
 2852 0586 2F4A     		ldr	r2, .L153+48
 2853 0588 1A60     		str	r2, [r3]
 618:bluetooth_rxtx.c **** 		reset();
 2854              		.loc 1 618 0
 2855 058a FFF7FEFF 		bl	reset
 619:bluetooth_rxtx.c **** 		break;
 2856              		.loc 1 619 0
 2857 058e 9AE2     		b	.L107
 2858              	.L74:
 620:bluetooth_rxtx.c **** 
 621:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 622:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 2859              		.loc 1 622 0
 2860 0590 BB68     		ldr	r3, [r7, #8]
 2861 0592 1B88     		ldrh	r3, [r3]
 2862 0594 B3F5006F 		cmp	r3, #2048
 2863 0598 17D9     		bls	.L130
 2864              		.loc 1 622 0 is_stmt 0 discriminator 1
 2865 059a BB68     		ldr	r3, [r7, #8]
 2866 059c 1B88     		ldrh	r3, [r3]
 2867 059e B3F5406F 		cmp	r3, #3072
 2868 05a2 12D8     		bhi	.L130
 623:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2869              		.loc 1 623 0 is_stmt 1 discriminator 2
 2870 05a4 BB68     		ldr	r3, [r7, #8]
 2871 05a6 0233     		adds	r3, r3, #2
 2872 05a8 1B88     		ldrh	r3, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 61


 622:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2873              		.loc 1 622 0 discriminator 2
 2874 05aa B3F5006F 		cmp	r3, #2048
 2875 05ae 0CD9     		bls	.L130
 2876              		.loc 1 623 0
 2877 05b0 BB68     		ldr	r3, [r7, #8]
 2878 05b2 0233     		adds	r3, r3, #2
 2879 05b4 1B88     		ldrh	r3, [r3]
 2880 05b6 B3F5406F 		cmp	r3, #3072
 2881 05ba 06D8     		bhi	.L130
 624:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 2882              		.loc 1 624 0 discriminator 1
 2883 05bc BB68     		ldr	r3, [r7, #8]
 2884 05be 0233     		adds	r3, r3, #2
 2885 05c0 1A88     		ldrh	r2, [r3]
 2886 05c2 BB68     		ldr	r3, [r7, #8]
 2887 05c4 1B88     		ldrh	r3, [r3]
 623:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2888              		.loc 1 623 0 discriminator 1
 2889 05c6 9A42     		cmp	r2, r3
 2890 05c8 01D2     		bcs	.L131
 2891              	.L130:
 625:bluetooth_rxtx.c **** 			return 0;
 2892              		.loc 1 625 0
 2893 05ca 0023     		movs	r3, #0
 2894 05cc 7CE2     		b	.L149
 2895              	.L131:
 626:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 2896              		.loc 1 626 0
 2897 05ce BB68     		ldr	r3, [r7, #8]
 2898 05d0 1A88     		ldrh	r2, [r3]
 2899 05d2 1D4B     		ldr	r3, .L153+52
 2900 05d4 1A80     		strh	r2, [r3]	@ movhi
 627:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2901              		.loc 1 627 0
 2902 05d6 BB68     		ldr	r3, [r7, #8]
 2903 05d8 5A88     		ldrh	r2, [r3, #2]
 2904 05da 1C4B     		ldr	r3, .L153+56
 2905 05dc 1A80     		strh	r2, [r3]	@ movhi
 628:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2906              		.loc 1 628 0
 2907 05de 104B     		ldr	r3, .L153+12
 2908 05e0 0422     		movs	r2, #4
 2909 05e2 1A70     		strb	r2, [r3]
 629:bluetooth_rxtx.c **** 		*data_len = 0;
 2910              		.loc 1 629 0
 2911 05e4 3B68     		ldr	r3, [r7]
 2912 05e6 0022     		movs	r2, #0
 2913 05e8 1A60     		str	r2, [r3]
 630:bluetooth_rxtx.c **** 		break;
 2914              		.loc 1 630 0
 2915 05ea 6CE2     		b	.L107
 2916              	.L81:
 631:bluetooth_rxtx.c **** 
 632:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 633:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 2917              		.loc 1 633 0
ARM GAS  /tmp/ccXEAChk.s 			page 62


 2918 05ec BB68     		ldr	r3, [r7, #8]
 2919 05ee 1B88     		ldrh	r3, [r3]
 2920 05f0 B3F5807F 		cmp	r3, #256
 2921 05f4 01D9     		bls	.L132
 634:bluetooth_rxtx.c **** 			return 0;
 2922              		.loc 1 634 0
 2923 05f6 0023     		movs	r3, #0
 2924 05f8 66E2     		b	.L149
 2925              	.L132:
 635:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 2926              		.loc 1 635 0
 2927 05fa BB68     		ldr	r3, [r7, #8]
 2928 05fc 1B88     		ldrh	r3, [r3]
 2929 05fe DAB2     		uxtb	r2, r3
 2930 0600 134B     		ldr	r3, .L153+60
 2931 0602 1A70     		strb	r2, [r3]
 636:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2932              		.loc 1 636 0
 2933 0604 064B     		ldr	r3, .L153+12
 2934 0606 0722     		movs	r2, #7
 2935 0608 1A70     		strb	r2, [r3]
 637:bluetooth_rxtx.c **** 		*data_len = 0;
 2936              		.loc 1 637 0
 2937 060a 3B68     		ldr	r3, [r7]
 2938 060c 0022     		movs	r2, #0
 2939 060e 1A60     		str	r2, [r3]
 638:bluetooth_rxtx.c **** 		break;
 2940              		.loc 1 638 0
 2941 0610 59E2     		b	.L107
 2942              	.L154:
 2943 0612 00BF     		.align	2
 2944              	.L153:
 2945 0614 54C00920 		.word	537509972
 2946 0618 58C00920 		.word	537509976
 2947 061c 5CC00920 		.word	537509980
 2948 0620 00000000 		.word	requested_mode
 2949 0624 00000000 		.word	rr
 2950 0628 00000000 		.word	modulation
 2951 062c 00000000 		.word	channel
 2952 0630 00000000 		.word	requested_channel
 2953 0634 00000000 		.word	hop_mode
 2954 0638 00000000 		.word	mode
 2955 063c 00000000 		.word	iap_entry
 2956 0640 00000000 		.word	bootloader_ctrl
 2957 0644 21BB0543 		.word	1124449057
 2958 0648 00000000 		.word	low_freq
 2959 064c 00000000 		.word	high_freq
 2960 0650 00000000 		.word	rssi_threshold
 2961              	.L80:
 639:bluetooth_rxtx.c **** 
 640:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 641:bluetooth_rxtx.c **** 		data[0] = 0x00;
 2962              		.loc 1 641 0
 2963 0654 7B68     		ldr	r3, [r7, #4]
 2964 0656 0022     		movs	r2, #0
 2965 0658 1A70     		strb	r2, [r3]
 642:bluetooth_rxtx.c **** 		data[1] = 0x00;
ARM GAS  /tmp/ccXEAChk.s 			page 63


 2966              		.loc 1 642 0
 2967 065a 7B68     		ldr	r3, [r7, #4]
 2968 065c 0133     		adds	r3, r3, #1
 2969 065e 0022     		movs	r2, #0
 2970 0660 1A70     		strb	r2, [r3]
 643:bluetooth_rxtx.c **** 
 644:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 2971              		.loc 1 644 0
 2972 0662 A448     		ldr	r0, .L155
 2973 0664 FFF7FEFF 		bl	strlen
 2974 0668 0346     		mov	r3, r0
 2975 066a 87F84330 		strb	r3, [r7, #67]
 645:bluetooth_rxtx.c **** 		data[2] = length;
 2976              		.loc 1 645 0
 2977 066e 7B68     		ldr	r3, [r7, #4]
 2978 0670 0233     		adds	r3, r3, #2
 2979 0672 97F84320 		ldrb	r2, [r7, #67]
 2980 0676 1A70     		strb	r2, [r3]
 646:bluetooth_rxtx.c **** 
 647:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 2981              		.loc 1 647 0
 2982 0678 7B68     		ldr	r3, [r7, #4]
 2983 067a DA1C     		adds	r2, r3, #3
 2984 067c 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2985 0680 1046     		mov	r0, r2
 2986 0682 9C49     		ldr	r1, .L155
 2987 0684 1A46     		mov	r2, r3
 2988 0686 FFF7FEFF 		bl	memcpy
 648:bluetooth_rxtx.c **** 
 649:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 2989              		.loc 1 649 0
 2990 068a 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2991 068e DA1C     		adds	r2, r3, #3
 2992 0690 3B68     		ldr	r3, [r7]
 2993 0692 1A60     		str	r2, [r3]
 650:bluetooth_rxtx.c **** 		break;
 2994              		.loc 1 650 0
 2995 0694 17E2     		b	.L107
 2996              	.L102:
 651:bluetooth_rxtx.c **** 
 652:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 653:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 2997              		.loc 1 653 0
 2998 0696 9848     		ldr	r0, .L155+4
 2999 0698 FFF7FEFF 		bl	strlen
 3000 069c 0346     		mov	r3, r0
 3001 069e 87F84330 		strb	r3, [r7, #67]
 654:bluetooth_rxtx.c **** 		data[0] = length;
 3002              		.loc 1 654 0
 3003 06a2 7B68     		ldr	r3, [r7, #4]
 3004 06a4 97F84320 		ldrb	r2, [r7, #67]
 3005 06a8 1A70     		strb	r2, [r3]
 655:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 3006              		.loc 1 655 0
 3007 06aa 7B68     		ldr	r3, [r7, #4]
 3008 06ac 5A1C     		adds	r2, r3, #1
 3009 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
ARM GAS  /tmp/ccXEAChk.s 			page 64


 3010 06b2 1046     		mov	r0, r2
 3011 06b4 9049     		ldr	r1, .L155+4
 3012 06b6 1A46     		mov	r2, r3
 3013 06b8 FFF7FEFF 		bl	memcpy
 656:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 3014              		.loc 1 656 0
 3015 06bc 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3016 06c0 5A1C     		adds	r2, r3, #1
 3017 06c2 3B68     		ldr	r3, [r7]
 3018 06c4 1A60     		str	r2, [r3]
 657:bluetooth_rxtx.c **** 		break;
 3019              		.loc 1 657 0
 3020 06c6 FEE1     		b	.L107
 3021              	.L82:
 658:bluetooth_rxtx.c **** 
 659:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 660:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 3022              		.loc 1 660 0
 3023 06c8 7B68     		ldr	r3, [r7, #4]
 3024 06ca 0122     		movs	r2, #1
 3025 06cc 1A70     		strb	r2, [r3]
 661:bluetooth_rxtx.c **** 		*data_len = 1;
 3026              		.loc 1 661 0
 3027 06ce 3B68     		ldr	r3, [r7]
 3028 06d0 0122     		movs	r2, #1
 3029 06d2 1A60     		str	r2, [r3]
 662:bluetooth_rxtx.c **** 		break;
 3030              		.loc 1 662 0
 3031 06d4 F7E1     		b	.L107
 3032              	.L83:
 663:bluetooth_rxtx.c **** 
 664:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 665:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 3033              		.loc 1 665 0
 3034 06d6 BB68     		ldr	r3, [r7, #8]
 3035 06d8 1B88     		ldrh	r3, [r3]
 3036 06da DAB2     		uxtb	r2, r3
 3037 06dc 874B     		ldr	r3, .L155+8
 3038 06de 1A70     		strb	r2, [r3]
 666:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3039              		.loc 1 666 0
 3040 06e0 FFF7FEFF 		bl	cs_threshold_calc_and_set
 667:bluetooth_rxtx.c **** 		break;
 3041              		.loc 1 667 0
 3042 06e4 EFE1     		b	.L107
 3043              	.L84:
 668:bluetooth_rxtx.c **** 
 669:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 670:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 3044              		.loc 1 670 0
 3045 06e6 854B     		ldr	r3, .L155+8
 3046 06e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3047 06ea DAB2     		uxtb	r2, r3
 3048 06ec 7B68     		ldr	r3, [r7, #4]
 3049 06ee 1A70     		strb	r2, [r3]
 671:bluetooth_rxtx.c **** 		*data_len = 1;
 3050              		.loc 1 671 0
ARM GAS  /tmp/ccXEAChk.s 			page 65


 3051 06f0 3B68     		ldr	r3, [r7]
 3052 06f2 0122     		movs	r2, #1
 3053 06f4 1A60     		str	r2, [r3]
 672:bluetooth_rxtx.c **** 		break;
 3054              		.loc 1 672 0
 3055 06f6 E6E1     		b	.L107
 3056              	.L85:
 673:bluetooth_rxtx.c **** 
 674:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 675:bluetooth_rxtx.c **** 		target.address = 0;
 3057              		.loc 1 675 0
 3058 06f8 8149     		ldr	r1, .L155+12
 3059 06fa 4FF00002 		mov	r2, #0
 3060 06fe 4FF00003 		mov	r3, #0
 3061 0702 C1E90023 		strd	r2, [r1]
 676:bluetooth_rxtx.c **** 		target.access_code = 0;
 3062              		.loc 1 676 0
 3063 0706 7E49     		ldr	r1, .L155+12
 3064 0708 4FF00002 		mov	r2, #0
 3065 070c 4FF00003 		mov	r3, #0
 3066 0710 C1E90223 		strd	r2, [r1, #8]
 677:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3067              		.loc 1 677 0
 3068 0714 0023     		movs	r3, #0
 3069 0716 FB64     		str	r3, [r7, #76]
 3070 0718 25E0     		b	.L133
 3071              	.L134:
 678:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3072              		.loc 1 678 0 discriminator 3
 3073 071a 794B     		ldr	r3, .L155+12
 3074 071c D3E900AB 		ldrd	r10, [r3]
 3075 0720 FB6C     		ldr	r3, [r7, #76]
 3076 0722 7A68     		ldr	r2, [r7, #4]
 3077 0724 1344     		add	r3, r3, r2
 3078 0726 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3079 0728 DAB2     		uxtb	r2, r3
 3080 072a 4FF00003 		mov	r3, #0
 3081 072e F96C     		ldr	r1, [r7, #76]
 3082 0730 C900     		lsls	r1, r1, #3
 3083 0732 A1F12006 		sub	r6, r1, #32
 3084 0736 C1F12000 		rsb	r0, r1, #32
 3085 073a 03FA01F9 		lsl	r9, r3, r1
 3086 073e 02FA06F6 		lsl	r6, r2, r6
 3087 0742 49EA0609 		orr	r9, r9, r6
 3088 0746 22FA00F0 		lsr	r0, r2, r0
 3089 074a 49EA0009 		orr	r9, r9, r0
 3090 074e 02FA01F8 		lsl	r8, r2, r1
 3091 0752 4AEA0802 		orr	r2, r10, r8
 3092 0756 4BEA0903 		orr	r3, fp, r9
 3093 075a 6949     		ldr	r1, .L155+12
 3094 075c C1E90023 		strd	r2, [r1]
 677:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3095              		.loc 1 677 0 discriminator 3
 3096 0760 FB6C     		ldr	r3, [r7, #76]
 3097 0762 0133     		adds	r3, r3, #1
 3098 0764 FB64     		str	r3, [r7, #76]
 3099              	.L133:
ARM GAS  /tmp/ccXEAChk.s 			page 66


 677:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3100              		.loc 1 677 0 is_stmt 0 discriminator 1
 3101 0766 FB6C     		ldr	r3, [r7, #76]
 3102 0768 072B     		cmp	r3, #7
 3103 076a D6DD     		ble	.L134
 679:bluetooth_rxtx.c **** 		}
 680:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3104              		.loc 1 680 0 is_stmt 1
 3105 076c 0023     		movs	r3, #0
 3106 076e FB64     		str	r3, [r7, #76]
 3107 0770 24E0     		b	.L135
 3108              	.L136:
 681:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3109              		.loc 1 681 0 discriminator 3
 3110 0772 634B     		ldr	r3, .L155+12
 3111 0774 D3E90289 		ldrd	r8, [r3, #8]
 3112 0778 FB6C     		ldr	r3, [r7, #76]
 3113 077a 0833     		adds	r3, r3, #8
 3114 077c 7A68     		ldr	r2, [r7, #4]
 3115 077e 1344     		add	r3, r3, r2
 3116 0780 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3117 0782 DAB2     		uxtb	r2, r3
 3118 0784 4FF00003 		mov	r3, #0
 3119 0788 F96C     		ldr	r1, [r7, #76]
 3120 078a C900     		lsls	r1, r1, #3
 3121 078c A1F12006 		sub	r6, r1, #32
 3122 0790 C1F12000 		rsb	r0, r1, #32
 3123 0794 03FA01F5 		lsl	r5, r3, r1
 3124 0798 02FA06F6 		lsl	r6, r2, r6
 3125 079c 3543     		orrs	r5, r5, r6
 3126 079e 22FA00F0 		lsr	r0, r2, r0
 3127 07a2 0543     		orrs	r5, r5, r0
 3128 07a4 02FA01F4 		lsl	r4, r2, r1
 3129 07a8 48EA0402 		orr	r2, r8, r4
 3130 07ac 49EA0503 		orr	r3, r9, r5
 3131 07b0 5349     		ldr	r1, .L155+12
 3132 07b2 C1E90223 		strd	r2, [r1, #8]
 680:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3133              		.loc 1 680 0 discriminator 3
 3134 07b6 FB6C     		ldr	r3, [r7, #76]
 3135 07b8 0133     		adds	r3, r3, #1
 3136 07ba FB64     		str	r3, [r7, #76]
 3137              	.L135:
 680:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3138              		.loc 1 680 0 is_stmt 0 discriminator 1
 3139 07bc FB6C     		ldr	r3, [r7, #76]
 3140 07be 072B     		cmp	r3, #7
 3141 07c0 D7DD     		ble	.L136
 682:bluetooth_rxtx.c **** 		}
 683:bluetooth_rxtx.c **** 		break;
 3142              		.loc 1 683 0 is_stmt 1
 3143 07c2 80E1     		b	.L107
 3144              	.L86:
 684:bluetooth_rxtx.c **** 
 685:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 686:bluetooth_rxtx.c **** 		clock_offset = 0;
 3145              		.loc 1 686 0
ARM GAS  /tmp/ccXEAChk.s 			page 67


 3146 07c4 0023     		movs	r3, #0
 3147 07c6 BB64     		str	r3, [r7, #72]
 687:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3148              		.loc 1 687 0
 3149 07c8 0023     		movs	r3, #0
 3150 07ca FB64     		str	r3, [r7, #76]
 3151 07cc 0DE0     		b	.L137
 3152              	.L138:
 688:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3153              		.loc 1 688 0 discriminator 3
 3154 07ce BB6C     		ldr	r3, [r7, #72]
 3155 07d0 1B02     		lsls	r3, r3, #8
 3156 07d2 BB64     		str	r3, [r7, #72]
 689:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3157              		.loc 1 689 0 discriminator 3
 3158 07d4 FB6C     		ldr	r3, [r7, #76]
 3159 07d6 7A68     		ldr	r2, [r7, #4]
 3160 07d8 1344     		add	r3, r3, r2
 3161 07da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3162 07dc 1A46     		mov	r2, r3
 3163 07de BB6C     		ldr	r3, [r7, #72]
 3164 07e0 1343     		orrs	r3, r3, r2
 3165 07e2 BB64     		str	r3, [r7, #72]
 687:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3166              		.loc 1 687 0 discriminator 3
 3167 07e4 FB6C     		ldr	r3, [r7, #76]
 3168 07e6 0133     		adds	r3, r3, #1
 3169 07e8 FB64     		str	r3, [r7, #76]
 3170              	.L137:
 687:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3171              		.loc 1 687 0 is_stmt 0 discriminator 1
 3172 07ea FB6C     		ldr	r3, [r7, #76]
 3173 07ec 032B     		cmp	r3, #3
 3174 07ee EEDD     		ble	.L138
 690:bluetooth_rxtx.c **** 		}
 691:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3175              		.loc 1 691 0 is_stmt 1
 3176 07f0 444B     		ldr	r3, .L155+16
 3177 07f2 1A68     		ldr	r2, [r3]
 3178 07f4 BB6C     		ldr	r3, [r7, #72]
 3179 07f6 1344     		add	r3, r3, r2
 3180 07f8 424A     		ldr	r2, .L155+16
 3181 07fa 1360     		str	r3, [r2]
 692:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3182              		.loc 1 692 0
 3183 07fc 424B     		ldr	r3, .L155+20
 3184 07fe 0222     		movs	r2, #2
 3185 0800 1A70     		strb	r2, [r3]
 693:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3186              		.loc 1 693 0
 3187 0802 424B     		ldr	r3, .L155+24
 3188 0804 0822     		movs	r2, #8
 3189 0806 1A70     		strb	r2, [r3]
 694:bluetooth_rxtx.c **** 		break;
 3190              		.loc 1 694 0
 3191 0808 5DE1     		b	.L107
 3192              	.L87:
ARM GAS  /tmp/ccXEAChk.s 			page 68


 695:bluetooth_rxtx.c **** 
 696:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 697:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3193              		.loc 1 697 0
 3194 080a 7B68     		ldr	r3, [r7, #4]
 3195 080c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3196 080e 1A46     		mov	r2, r3
 3197 0810 7B68     		ldr	r3, [r7, #4]
 3198 0812 0133     		adds	r3, r3, #1
 3199 0814 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3200 0816 1B02     		lsls	r3, r3, #8
 3201 0818 1A43     		orrs	r2, r2, r3
 3202 081a 7B68     		ldr	r3, [r7, #4]
 3203 081c 0233     		adds	r3, r3, #2
 3204 081e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3205 0820 1B04     		lsls	r3, r3, #16
 3206 0822 1A43     		orrs	r2, r2, r3
 3207 0824 7B68     		ldr	r3, [r7, #4]
 3208 0826 0333     		adds	r3, r3, #3
 3209 0828 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3210 082a 1B06     		lsls	r3, r3, #24
 3211 082c 1343     		orrs	r3, r3, r2
 3212 082e FB63     		str	r3, [r7, #60]
 698:bluetooth_rxtx.c **** 		clkn = clock;
 3213              		.loc 1 698 0
 3214 0830 344A     		ldr	r2, .L155+16
 3215 0832 FB6B     		ldr	r3, [r7, #60]
 3216 0834 1360     		str	r3, [r2]
 699:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3217              		.loc 1 699 0
 3218 0836 FFF7FEFF 		bl	cs_threshold_calc_and_set
 700:bluetooth_rxtx.c **** 		break;
 3219              		.loc 1 700 0
 3220 083a 44E1     		b	.L107
 3221              	.L98:
 701:bluetooth_rxtx.c **** 
 702:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 703:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3222              		.loc 1 703 0
 3223 083c 0023     		movs	r3, #0
 3224 083e FB64     		str	r3, [r7, #76]
 3225 0840 0BE0     		b	.L139
 3226              	.L140:
 704:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3227              		.loc 1 704 0 discriminator 3
 3228 0842 FB6C     		ldr	r3, [r7, #76]
 3229 0844 7A68     		ldr	r2, [r7, #4]
 3230 0846 1344     		add	r3, r3, r2
 3231 0848 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3232 084a 314A     		ldr	r2, .L155+28
 3233 084c FB6C     		ldr	r3, [r7, #76]
 3234 084e 1344     		add	r3, r3, r2
 3235 0850 0A46     		mov	r2, r1
 3236 0852 1A70     		strb	r2, [r3]
 703:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3237              		.loc 1 703 0 discriminator 3
 3238 0854 FB6C     		ldr	r3, [r7, #76]
ARM GAS  /tmp/ccXEAChk.s 			page 69


 3239 0856 0133     		adds	r3, r3, #1
 3240 0858 FB64     		str	r3, [r7, #76]
 3241              	.L139:
 703:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3242              		.loc 1 703 0 is_stmt 0 discriminator 1
 3243 085a FB6C     		ldr	r3, [r7, #76]
 3244 085c 092B     		cmp	r3, #9
 3245 085e F0DD     		ble	.L140
 705:bluetooth_rxtx.c **** 		}
 706:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3246              		.loc 1 706 0 is_stmt 1
 3247 0860 2C4B     		ldr	r3, .L155+32
 3248 0862 0122     		movs	r2, #1
 3249 0864 1A70     		strb	r2, [r3]
 707:bluetooth_rxtx.c **** 		*data_len = 10;
 3250              		.loc 1 707 0
 3251 0866 3B68     		ldr	r3, [r7]
 3252 0868 0A22     		movs	r2, #10
 3253 086a 1A60     		str	r2, [r3]
 708:bluetooth_rxtx.c **** 		break;
 3254              		.loc 1 708 0
 3255 086c 2BE1     		b	.L107
 3256              	.L99:
 709:bluetooth_rxtx.c **** 
 710:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 711:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3257              		.loc 1 711 0
 3258 086e 0023     		movs	r3, #0
 3259 0870 FB64     		str	r3, [r7, #76]
 3260 0872 07E0     		b	.L141
 3261              	.L142:
 712:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3262              		.loc 1 712 0 discriminator 3
 3263 0874 264A     		ldr	r2, .L155+28
 3264 0876 FB6C     		ldr	r3, [r7, #76]
 3265 0878 1344     		add	r3, r3, r2
 3266 087a 0022     		movs	r2, #0
 3267 087c 1A70     		strb	r2, [r3]
 711:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3268              		.loc 1 711 0 discriminator 3
 3269 087e FB6C     		ldr	r3, [r7, #76]
 3270 0880 0133     		adds	r3, r3, #1
 3271 0882 FB64     		str	r3, [r7, #76]
 3272              	.L141:
 711:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3273              		.loc 1 711 0 is_stmt 0 discriminator 1
 3274 0884 FB6C     		ldr	r3, [r7, #76]
 3275 0886 092B     		cmp	r3, #9
 3276 0888 F4DD     		ble	.L142
 713:bluetooth_rxtx.c **** 		}
 714:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3277              		.loc 1 714 0 is_stmt 1
 3278 088a 224B     		ldr	r3, .L155+32
 3279 088c 0022     		movs	r2, #0
 3280 088e 1A70     		strb	r2, [r3]
 715:bluetooth_rxtx.c **** 		*data_len = 10;
 3281              		.loc 1 715 0
ARM GAS  /tmp/ccXEAChk.s 			page 70


 3282 0890 3B68     		ldr	r3, [r7]
 3283 0892 0A22     		movs	r2, #10
 3284 0894 1A60     		str	r2, [r3]
 716:bluetooth_rxtx.c **** 		break;
 3285              		.loc 1 716 0
 3286 0896 16E1     		b	.L107
 3287              	.L88:
 717:bluetooth_rxtx.c **** 
 718:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 719:bluetooth_rxtx.c **** 		clock = clkn;
 3288              		.loc 1 719 0
 3289 0898 1A4B     		ldr	r3, .L155+16
 3290 089a 1B68     		ldr	r3, [r3]
 3291 089c FB63     		str	r3, [r7, #60]
 720:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3292              		.loc 1 720 0
 3293 089e 0023     		movs	r3, #0
 3294 08a0 FB64     		str	r3, [r7, #76]
 3295 08a2 0CE0     		b	.L143
 3296              	.L144:
 721:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3297              		.loc 1 721 0 discriminator 3
 3298 08a4 FB6C     		ldr	r3, [r7, #76]
 3299 08a6 7A68     		ldr	r2, [r7, #4]
 3300 08a8 1344     		add	r3, r3, r2
 3301 08aa FA6C     		ldr	r2, [r7, #76]
 3302 08ac D200     		lsls	r2, r2, #3
 3303 08ae F96B     		ldr	r1, [r7, #60]
 3304 08b0 21FA02F2 		lsr	r2, r1, r2
 3305 08b4 D2B2     		uxtb	r2, r2
 3306 08b6 1A70     		strb	r2, [r3]
 720:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3307              		.loc 1 720 0 discriminator 3
 3308 08b8 FB6C     		ldr	r3, [r7, #76]
 3309 08ba 0133     		adds	r3, r3, #1
 3310 08bc FB64     		str	r3, [r7, #76]
 3311              	.L143:
 720:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3312              		.loc 1 720 0 is_stmt 0 discriminator 1
 3313 08be FB6C     		ldr	r3, [r7, #76]
 3314 08c0 032B     		cmp	r3, #3
 3315 08c2 EFDD     		ble	.L144
 722:bluetooth_rxtx.c **** 		}
 723:bluetooth_rxtx.c **** 		*data_len = 4;
 3316              		.loc 1 723 0 is_stmt 1
 3317 08c4 3B68     		ldr	r3, [r7]
 3318 08c6 0422     		movs	r2, #4
 3319 08c8 1A60     		str	r2, [r3]
 724:bluetooth_rxtx.c **** 		break;
 3320              		.loc 1 724 0
 3321 08ca FCE0     		b	.L107
 3322              	.L89:
 725:bluetooth_rxtx.c **** 
 726:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 727:bluetooth_rxtx.c **** 		*data_len = 0;
 3323              		.loc 1 727 0
 3324 08cc 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccXEAChk.s 			page 71


 3325 08ce 0022     		movs	r2, #0
 3326 08d0 1A60     		str	r2, [r3]
 728:bluetooth_rxtx.c **** 
 729:bluetooth_rxtx.c **** 		do_hop = 0;
 3327              		.loc 1 729 0
 3328 08d2 114B     		ldr	r3, .L155+36
 3329 08d4 0022     		movs	r2, #0
 3330 08d6 1A70     		strb	r2, [r3]
 730:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3331              		.loc 1 730 0
 3332 08d8 0B4B     		ldr	r3, .L155+20
 3333 08da 0322     		movs	r2, #3
 3334 08dc 1A70     		strb	r2, [r3]
 731:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3335              		.loc 1 731 0
 3336 08de 0B4B     		ldr	r3, .L155+24
 3337 08e0 0922     		movs	r2, #9
 3338 08e2 1A70     		strb	r2, [r3]
 732:bluetooth_rxtx.c **** 
 733:bluetooth_rxtx.c **** 		queue_init();
 3339              		.loc 1 733 0
 3340 08e4 FFF7FEFF 		bl	queue_init
 734:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3341              		.loc 1 734 0
 3342 08e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 735:bluetooth_rxtx.c **** 		break;
 3343              		.loc 1 735 0
 3344 08ec EBE0     		b	.L107
 3345              	.L90:
 736:bluetooth_rxtx.c **** 
 737:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 738:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3346              		.loc 1 738 0
 3347 08ee 0023     		movs	r3, #0
 3348 08f0 FB64     		str	r3, [r7, #76]
 3349 08f2 21E0     		b	.L145
 3350              	.L156:
 3351              		.align	2
 3352              	.L155:
 3353 08f4 FC080000 		.word	.LC3
 3354 08f8 00000000 		.word	compile_info
 3355 08fc 00000000 		.word	cs_threshold_req
 3356 0900 00000000 		.word	target
 3357 0904 00000000 		.word	clkn
 3358 0908 00000000 		.word	hop_mode
 3359 090c 00000000 		.word	requested_mode
 3360 0910 00000000 		.word	afh_map
 3361 0914 00000000 		.word	afh_enabled
 3362 0918 00000000 		.word	do_hop
 3363              	.L146:
 739:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3364              		.loc 1 739 0 discriminator 3
 3365 091c FB6C     		ldr	r3, [r7, #76]
 3366 091e 7A68     		ldr	r2, [r7, #4]
 3367 0920 1344     		add	r3, r3, r2
 3368 0922 6C4A     		ldr	r2, .L157
 3369 0924 1168     		ldr	r1, [r2]
ARM GAS  /tmp/ccXEAChk.s 			page 72


 3370 0926 FA6C     		ldr	r2, [r7, #76]
 3371 0928 D200     		lsls	r2, r2, #3
 3372 092a 21FA02F2 		lsr	r2, r1, r2
 3373 092e D2B2     		uxtb	r2, r2
 3374 0930 1A70     		strb	r2, [r3]
 738:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3375              		.loc 1 738 0 discriminator 3
 3376 0932 FB6C     		ldr	r3, [r7, #76]
 3377 0934 0133     		adds	r3, r3, #1
 3378 0936 FB64     		str	r3, [r7, #76]
 3379              	.L145:
 738:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3380              		.loc 1 738 0 is_stmt 0 discriminator 1
 3381 0938 FB6C     		ldr	r3, [r7, #76]
 3382 093a 032B     		cmp	r3, #3
 3383 093c EEDD     		ble	.L146
 740:bluetooth_rxtx.c **** 		}
 741:bluetooth_rxtx.c **** 		*data_len = 4;
 3384              		.loc 1 741 0 is_stmt 1
 3385 093e 3B68     		ldr	r3, [r7]
 3386 0940 0422     		movs	r2, #4
 3387 0942 1A60     		str	r2, [r3]
 742:bluetooth_rxtx.c **** 		break;
 3388              		.loc 1 742 0
 3389 0944 BFE0     		b	.L107
 3390              	.L91:
 743:bluetooth_rxtx.c **** 
 744:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 745:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3391              		.loc 1 745 0
 3392 0946 7B68     		ldr	r3, [r7, #4]
 3393 0948 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3394 094a 1A46     		mov	r2, r3
 3395 094c 7B68     		ldr	r3, [r7, #4]
 3396 094e 0133     		adds	r3, r3, #1
 3397 0950 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3398 0952 1B02     		lsls	r3, r3, #8
 3399 0954 1A43     		orrs	r2, r2, r3
 3400 0956 7B68     		ldr	r3, [r7, #4]
 3401 0958 0233     		adds	r3, r3, #2
 3402 095a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3403 095c 1B04     		lsls	r3, r3, #16
 3404 095e 1A43     		orrs	r2, r2, r3
 3405 0960 7B68     		ldr	r3, [r7, #4]
 3406 0962 0333     		adds	r3, r3, #3
 3407 0964 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3408 0966 1B06     		lsls	r3, r3, #24
 3409 0968 1343     		orrs	r3, r3, r2
 3410 096a 1846     		mov	r0, r3
 3411 096c FFF7FEFF 		bl	le_set_access_address
 746:bluetooth_rxtx.c **** 		le.target_set = 1;
 3412              		.loc 1 746 0
 3413 0970 584B     		ldr	r3, .L157
 3414 0972 0122     		movs	r2, #1
 3415 0974 DA63     		str	r2, [r3, #60]
 747:bluetooth_rxtx.c **** 		break;
 3416              		.loc 1 747 0
ARM GAS  /tmp/ccXEAChk.s 			page 73


 3417 0976 A6E0     		b	.L107
 3418              	.L93:
 748:bluetooth_rxtx.c **** 
 749:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 750:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 751:bluetooth_rxtx.c **** 		break;
 752:bluetooth_rxtx.c **** 
 753:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 754:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 755:bluetooth_rxtx.c **** 		// don't commit here please
 756:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3419              		.loc 1 756 0
 3420 0978 7B68     		ldr	r3, [r7, #4]
 3421 097a 1322     		movs	r2, #19
 3422 097c 1A70     		strb	r2, [r3]
 757:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3423              		.loc 1 757 0
 3424 097e 7B68     		ldr	r3, [r7, #4]
 3425 0980 0133     		adds	r3, r3, #1
 3426 0982 3722     		movs	r2, #55
 3427 0984 1A70     		strb	r2, [r3]
 758:bluetooth_rxtx.c **** 		*data_len = 2;
 3428              		.loc 1 758 0
 3429 0986 3B68     		ldr	r3, [r7]
 3430 0988 0222     		movs	r2, #2
 3431 098a 1A60     		str	r2, [r3]
 759:bluetooth_rxtx.c **** 		break;
 3432              		.loc 1 759 0
 3433 098c 9BE0     		b	.L107
 3434              	.L94:
 760:bluetooth_rxtx.c **** 
 761:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 762:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3435              		.loc 1 762 0
 3436 098e 514B     		ldr	r3, .L157
 3437 0990 1B69     		ldr	r3, [r3, #16]
 3438 0992 002B     		cmp	r3, #0
 3439 0994 14BF     		ite	ne
 3440 0996 0123     		movne	r3, #1
 3441 0998 0023     		moveq	r3, #0
 3442 099a DBB2     		uxtb	r3, r3
 3443 099c 1A46     		mov	r2, r3
 3444 099e 7B68     		ldr	r3, [r7, #4]
 3445 09a0 1A70     		strb	r2, [r3]
 763:bluetooth_rxtx.c **** 		*data_len = 1;
 3446              		.loc 1 763 0
 3447 09a2 3B68     		ldr	r3, [r7]
 3448 09a4 0122     		movs	r2, #1
 3449 09a6 1A60     		str	r2, [r3]
 764:bluetooth_rxtx.c **** 		break;
 3450              		.loc 1 764 0
 3451 09a8 8DE0     		b	.L107
 3452              	.L95:
 765:bluetooth_rxtx.c **** 
 766:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 767:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3453              		.loc 1 767 0
ARM GAS  /tmp/ccXEAChk.s 			page 74


 3454 09aa BB68     		ldr	r3, [r7, #8]
 3455 09ac 1B88     		ldrh	r3, [r3]
 3456 09ae 002B     		cmp	r3, #0
 3457 09b0 14BF     		ite	ne
 3458 09b2 0123     		movne	r3, #1
 3459 09b4 0023     		moveq	r3, #0
 3460 09b6 DBB2     		uxtb	r3, r3
 3461 09b8 1A46     		mov	r2, r3
 3462 09ba 464B     		ldr	r3, .L157
 3463 09bc 1A61     		str	r2, [r3, #16]
 768:bluetooth_rxtx.c **** 		break;
 3464              		.loc 1 768 0
 3465 09be 82E0     		b	.L107
 3466              	.L96:
 769:bluetooth_rxtx.c **** 
 770:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 771:bluetooth_rxtx.c **** 		p = dequeue();
 3467              		.loc 1 771 0
 3468 09c0 FFF7FEFF 		bl	dequeue
 3469 09c4 7864     		str	r0, [r7, #68]
 772:bluetooth_rxtx.c **** 		if (p != NULL) {
 3470              		.loc 1 772 0
 3471 09c6 7B6C     		ldr	r3, [r7, #68]
 3472 09c8 002B     		cmp	r3, #0
 3473 09ca 08D0     		beq	.L147
 773:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3474              		.loc 1 773 0
 3475 09cc 7868     		ldr	r0, [r7, #4]
 3476 09ce 796C     		ldr	r1, [r7, #68]
 3477 09d0 4022     		movs	r2, #64
 3478 09d2 FFF7FEFF 		bl	memcpy
 774:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3479              		.loc 1 774 0
 3480 09d6 3B68     		ldr	r3, [r7]
 3481 09d8 4022     		movs	r2, #64
 3482 09da 1A60     		str	r2, [r3]
 775:bluetooth_rxtx.c **** 		} else {
 776:bluetooth_rxtx.c **** 			data[0] = 0;
 777:bluetooth_rxtx.c **** 			*data_len = 1;
 778:bluetooth_rxtx.c **** 		}
 779:bluetooth_rxtx.c **** 		break;
 3483              		.loc 1 779 0
 3484 09dc 73E0     		b	.L107
 3485              	.L147:
 776:bluetooth_rxtx.c **** 			*data_len = 1;
 3486              		.loc 1 776 0
 3487 09de 7B68     		ldr	r3, [r7, #4]
 3488 09e0 0022     		movs	r2, #0
 3489 09e2 1A70     		strb	r2, [r3]
 777:bluetooth_rxtx.c **** 		}
 3490              		.loc 1 777 0
 3491 09e4 3B68     		ldr	r3, [r7]
 3492 09e6 0122     		movs	r2, #1
 3493 09e8 1A60     		str	r2, [r3]
 3494              		.loc 1 779 0
 3495 09ea 6CE0     		b	.L107
 3496              	.L97:
ARM GAS  /tmp/ccXEAChk.s 			page 75


 780:bluetooth_rxtx.c **** 
 781:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 782:bluetooth_rxtx.c **** 		*data_len = 0;
 3497              		.loc 1 782 0
 3498 09ec 3B68     		ldr	r3, [r7]
 3499 09ee 0022     		movs	r2, #0
 3500 09f0 1A60     		str	r2, [r3]
 783:bluetooth_rxtx.c **** 
 784:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3501              		.loc 1 784 0
 3502 09f2 394B     		ldr	r3, .L157+4
 3503 09f4 0022     		movs	r2, #0
 3504 09f6 1A70     		strb	r2, [r3]
 785:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3505              		.loc 1 785 0
 3506 09f8 384B     		ldr	r3, .L157+8
 3507 09fa 0A22     		movs	r2, #10
 3508 09fc 1A70     		strb	r2, [r3]
 786:bluetooth_rxtx.c **** 
 787:bluetooth_rxtx.c **** 		queue_init();
 3509              		.loc 1 787 0
 3510 09fe FFF7FEFF 		bl	queue_init
 788:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3511              		.loc 1 788 0
 3512 0a02 FFF7FEFF 		bl	cs_threshold_calc_and_set
 789:bluetooth_rxtx.c **** 		break;
 3513              		.loc 1 789 0
 3514 0a06 5EE0     		b	.L107
 3515              	.L100:
 790:bluetooth_rxtx.c **** 
 791:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 792:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3516              		.loc 1 792 0
 3517 0a08 BB68     		ldr	r3, [r7, #8]
 3518 0a0a 1B88     		ldrh	r3, [r3]
 3519 0a0c DBB2     		uxtb	r3, r3
 3520 0a0e 1846     		mov	r0, r3
 3521 0a10 FFF7FEFF 		bl	cc2400_get
 3522 0a14 0346     		mov	r3, r0
 3523 0a16 7B87     		strh	r3, [r7, #58]	@ movhi
 793:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3524              		.loc 1 793 0
 3525 0a18 7B8F     		ldrh	r3, [r7, #58]
 3526 0a1a 1B0A     		lsrs	r3, r3, #8
 3527 0a1c 9BB2     		uxth	r3, r3
 3528 0a1e DAB2     		uxtb	r2, r3
 3529 0a20 7B68     		ldr	r3, [r7, #4]
 3530 0a22 1A70     		strb	r2, [r3]
 794:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3531              		.loc 1 794 0
 3532 0a24 7B68     		ldr	r3, [r7, #4]
 3533 0a26 0133     		adds	r3, r3, #1
 3534 0a28 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3535 0a2a D2B2     		uxtb	r2, r2
 3536 0a2c 1A70     		strb	r2, [r3]
 795:bluetooth_rxtx.c **** 		*data_len = 2;
 3537              		.loc 1 795 0
ARM GAS  /tmp/ccXEAChk.s 			page 76


 3538 0a2e 3B68     		ldr	r3, [r7]
 3539 0a30 0222     		movs	r2, #2
 3540 0a32 1A60     		str	r2, [r3]
 796:bluetooth_rxtx.c **** 		break;
 3541              		.loc 1 796 0
 3542 0a34 47E0     		b	.L107
 3543              	.L104:
 797:bluetooth_rxtx.c **** 
 798:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 799:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3544              		.loc 1 799 0
 3545 0a36 BB68     		ldr	r3, [r7, #8]
 3546 0a38 1B88     		ldrh	r3, [r3]
 3547 0a3a DAB2     		uxtb	r2, r3
 3548 0a3c BB68     		ldr	r3, [r7, #8]
 3549 0a3e 0233     		adds	r3, r3, #2
 3550 0a40 1B88     		ldrh	r3, [r3]
 3551 0a42 1046     		mov	r0, r2
 3552 0a44 1946     		mov	r1, r3
 3553 0a46 FFF7FEFF 		bl	cc2400_set
 800:bluetooth_rxtx.c **** 		break;
 3554              		.loc 1 800 0
 3555 0a4a 3CE0     		b	.L107
 3556              	.L101:
 801:bluetooth_rxtx.c **** 
 802:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 803:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3557              		.loc 1 803 0
 3558 0a4c 2448     		ldr	r0, .L157+12
 3559 0a4e 7968     		ldr	r1, [r7, #4]
 3560 0a50 0622     		movs	r2, #6
 3561 0a52 FFF7FEFF 		bl	memcpy
 804:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3562              		.loc 1 804 0
 3563 0a56 214B     		ldr	r3, .L157+8
 3564 0a58 0C22     		movs	r2, #12
 3565 0a5a 1A70     		strb	r2, [r3]
 805:bluetooth_rxtx.c **** 		break;
 3566              		.loc 1 805 0
 3567 0a5c 33E0     		b	.L107
 3568              	.L103:
 806:bluetooth_rxtx.c **** 
 807:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 808:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 809:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 810:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3569              		.loc 1 810 0
 3570 0a5e 7B68     		ldr	r3, [r7, #4]
 3571 0a60 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3572 0a62 1C4B     		ldr	r3, .L157
 3573 0a64 83F83420 		strb	r2, [r3, #52]
 811:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3574              		.loc 1 811 0
 3575 0a68 7B68     		ldr	r3, [r7, #4]
 3576 0a6a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3577 0a6c 194B     		ldr	r3, .L157
 3578 0a6e 83F83520 		strb	r2, [r3, #53]
ARM GAS  /tmp/ccXEAChk.s 			page 77


 812:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3579              		.loc 1 812 0
 3580 0a72 7B68     		ldr	r3, [r7, #4]
 3581 0a74 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3582 0a76 174B     		ldr	r3, .L157
 3583 0a78 83F83620 		strb	r2, [r3, #54]
 813:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3584              		.loc 1 813 0
 3585 0a7c 7B68     		ldr	r3, [r7, #4]
 3586 0a7e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3587 0a80 144B     		ldr	r3, .L157
 3588 0a82 83F83720 		strb	r2, [r3, #55]
 814:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3589              		.loc 1 814 0
 3590 0a86 7B68     		ldr	r3, [r7, #4]
 3591 0a88 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3592 0a8a 124B     		ldr	r3, .L157
 3593 0a8c 83F83820 		strb	r2, [r3, #56]
 815:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3594              		.loc 1 815 0
 3595 0a90 7B68     		ldr	r3, [r7, #4]
 3596 0a92 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3597 0a94 0F4B     		ldr	r3, .L157
 3598 0a96 83F83920 		strb	r2, [r3, #57]
 816:bluetooth_rxtx.c **** 		le.target_set = 1;
 3599              		.loc 1 816 0
 3600 0a9a 0E4B     		ldr	r3, .L157
 3601 0a9c 0122     		movs	r2, #1
 3602 0a9e DA63     		str	r2, [r3, #60]
 817:bluetooth_rxtx.c **** 		break;
 3603              		.loc 1 817 0
 3604 0aa0 11E0     		b	.L107
 3605              	.L105:
 818:bluetooth_rxtx.c **** 
 819:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 820:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 821:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3606              		.loc 1 821 0
 3607 0aa2 BB68     		ldr	r3, [r7, #8]
 3608 0aa4 1B88     		ldrh	r3, [r3]
 3609 0aa6 DAB2     		uxtb	r2, r3
 3610 0aa8 0E4B     		ldr	r3, .L157+16
 3611 0aaa 1A70     		strb	r2, [r3]
 822:bluetooth_rxtx.c **** 		break;
 3612              		.loc 1 822 0
 3613 0aac 0BE0     		b	.L107
 3614              	.L106:
 823:bluetooth_rxtx.c **** #endif
 824:bluetooth_rxtx.c **** 
 825:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 826:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 827:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 828:bluetooth_rxtx.c **** 			return 0;
 829:bluetooth_rxtx.c **** #endif
 830:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3615              		.loc 1 830 0
 3616 0aae 0B4B     		ldr	r3, .L157+8
ARM GAS  /tmp/ccXEAChk.s 			page 78


 3617 0ab0 0D22     		movs	r2, #13
 3618 0ab2 1A70     		strb	r2, [r3]
 831:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3619              		.loc 1 831 0
 3620 0ab4 BB68     		ldr	r3, [r7, #8]
 3621 0ab6 1B88     		ldrh	r3, [r3]
 3622 0ab8 DAB2     		uxtb	r2, r3
 3623 0aba 0B4B     		ldr	r3, .L157+20
 3624 0abc 1A70     		strb	r2, [r3]
 832:bluetooth_rxtx.c **** 		break;
 3625              		.loc 1 832 0
 3626 0abe 02E0     		b	.L107
 3627              	.L47:
 833:bluetooth_rxtx.c **** 
 834:bluetooth_rxtx.c **** 	default:
 835:bluetooth_rxtx.c **** 		return 0;
 3628              		.loc 1 835 0
 3629 0ac0 0023     		movs	r3, #0
 3630 0ac2 01E0     		b	.L149
 3631              	.L150:
 751:bluetooth_rxtx.c **** 
 3632              		.loc 1 751 0
 3633 0ac4 00BF     		nop
 3634              	.L107:
 836:bluetooth_rxtx.c **** 	}
 837:bluetooth_rxtx.c **** 	return 1;
 3635              		.loc 1 837 0
 3636 0ac6 0123     		movs	r3, #1
 3637              	.L149:
 838:bluetooth_rxtx.c **** }
 3638              		.loc 1 838 0 discriminator 1
 3639 0ac8 1846     		mov	r0, r3
 3640 0aca 5437     		adds	r7, r7, #84
 3641              		.cfi_def_cfa_offset 36
 3642 0acc BD46     		mov	sp, r7
 3643              		.cfi_def_cfa_register 13
 3644              		@ sp needed
 3645 0ace BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3646              	.L158:
 3647 0ad2 00BF     		.align	2
 3648              	.L157:
 3649 0ad4 00000000 		.word	le
 3650 0ad8 00000000 		.word	hop_mode
 3651 0adc 00000000 		.word	requested_mode
 3652 0ae0 00000000 		.word	slave_mac_address
 3653 0ae4 00000000 		.word	jam_mode
 3654 0ae8 00000000 		.word	ego_mode
 3655              		.cfi_endproc
 3656              	.LFE9:
 3658              		.section	.text.clkn_init,"ax",%progbits
 3659              		.align	2
 3660              		.thumb
 3661              		.thumb_func
 3663              	clkn_init:
 3664              	.LFB10:
 839:bluetooth_rxtx.c **** 
 840:bluetooth_rxtx.c **** static void clkn_init()
ARM GAS  /tmp/ccXEAChk.s 			page 79


 841:bluetooth_rxtx.c **** {
 3665              		.loc 1 841 0
 3666              		.cfi_startproc
 3667              		@ args = 0, pretend = 0, frame = 0
 3668              		@ frame_needed = 1, uses_anonymous_args = 0
 3669              		@ link register save eliminated.
 3670 0000 80B4     		push	{r7}
 3671              		.cfi_def_cfa_offset 4
 3672              		.cfi_offset 7, -4
 3673 0002 00AF     		add	r7, sp, #0
 3674              		.cfi_def_cfa_register 7
 842:bluetooth_rxtx.c **** 	/*
 843:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 844:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 845:bluetooth_rxtx.c **** 	 * clock_start().
 846:bluetooth_rxtx.c **** 	 */
 847:bluetooth_rxtx.c **** 
 848:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 849:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3675              		.loc 1 849 0
 3676 0004 0C4B     		ldr	r3, .L160
 3677 0006 0222     		movs	r2, #2
 3678 0008 1A60     		str	r2, [r3]
 850:bluetooth_rxtx.c **** 	clkn = 0;
 3679              		.loc 1 850 0
 3680 000a 0C4B     		ldr	r3, .L160+4
 3681 000c 0022     		movs	r2, #0
 3682 000e 1A60     		str	r2, [r3]
 851:bluetooth_rxtx.c **** 
 852:bluetooth_rxtx.c **** #ifdef TC13BADGE
 853:bluetooth_rxtx.c **** 	/*
 854:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 855:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 856:bluetooth_rxtx.c **** 	 */
 857:bluetooth_rxtx.c **** 	T0PR = 2;
 858:bluetooth_rxtx.c **** #else
 859:bluetooth_rxtx.c **** 	/*
 860:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 861:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 862:bluetooth_rxtx.c **** 	 */
 863:bluetooth_rxtx.c **** 	T0PR = 4;
 3683              		.loc 1 863 0
 3684 0010 0B4B     		ldr	r3, .L160+8
 3685 0012 0422     		movs	r2, #4
 3686 0014 1A60     		str	r2, [r3]
 864:bluetooth_rxtx.c **** #endif
 865:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 866:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3687              		.loc 1 866 0
 3688 0016 0B4B     		ldr	r3, .L160+12
 3689 0018 40F63442 		movw	r2, #3124
 3690 001c 1A60     		str	r2, [r3]
 867:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3691              		.loc 1 867 0
 3692 001e 0A4B     		ldr	r3, .L160+16
 3693 0020 0322     		movs	r2, #3
 3694 0022 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 80


 868:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3695              		.loc 1 868 0
 3696 0024 094B     		ldr	r3, .L160+20
 3697 0026 0222     		movs	r2, #2
 3698 0028 1A60     		str	r2, [r3]
 869:bluetooth_rxtx.c **** 
 870:bluetooth_rxtx.c **** 	/* start timer */
 871:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3699              		.loc 1 871 0
 3700 002a 034B     		ldr	r3, .L160
 3701 002c 0122     		movs	r2, #1
 3702 002e 1A60     		str	r2, [r3]
 872:bluetooth_rxtx.c **** }
 3703              		.loc 1 872 0
 3704 0030 BD46     		mov	sp, r7
 3705              		.cfi_def_cfa_register 13
 3706              		@ sp needed
 3707 0032 5DF8047B 		ldr	r7, [sp], #4
 3708              		.cfi_restore 7
 3709              		.cfi_def_cfa_offset 0
 3710 0036 7047     		bx	lr
 3711              	.L161:
 3712              		.align	2
 3713              	.L160:
 3714 0038 04400040 		.word	1073758212
 3715 003c 00000000 		.word	clkn
 3716 0040 0C400040 		.word	1073758220
 3717 0044 18400040 		.word	1073758232
 3718 0048 14400040 		.word	1073758228
 3719 004c 00E100E0 		.word	-536813312
 3720              		.cfi_endproc
 3721              	.LFE10:
 3723              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3724              		.align	2
 3725              		.global	TIMER0_IRQHandler
 3726              		.thumb
 3727              		.thumb_func
 3729              	TIMER0_IRQHandler:
 3730              	.LFB11:
 873:bluetooth_rxtx.c **** 
 874:bluetooth_rxtx.c **** /* Update CLKN. */
 875:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 876:bluetooth_rxtx.c **** {
 3731              		.loc 1 876 0
 3732              		.cfi_startproc
 3733              		@ args = 0, pretend = 0, frame = 8
 3734              		@ frame_needed = 1, uses_anonymous_args = 0
 3735              		@ link register save eliminated.
 3736 0000 80B4     		push	{r7}
 3737              		.cfi_def_cfa_offset 4
 3738              		.cfi_offset 7, -4
 3739 0002 83B0     		sub	sp, sp, #12
 3740              		.cfi_def_cfa_offset 16
 3741 0004 00AF     		add	r7, sp, #0
 3742              		.cfi_def_cfa_register 7
 877:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
 878:bluetooth_rxtx.c **** 	u32 next;
ARM GAS  /tmp/ccXEAChk.s 			page 81


 879:bluetooth_rxtx.c **** 	u32 le_clk;
 880:bluetooth_rxtx.c **** 
 881:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3743              		.loc 1 881 0
 3744 0006 4FF04023 		mov	r3, #1073758208
 3745 000a 1B68     		ldr	r3, [r3]
 3746 000c 03F00103 		and	r3, r3, #1
 3747 0010 002B     		cmp	r3, #0
 3748 0012 6DD0     		beq	.L162
 882:bluetooth_rxtx.c **** 
 883:bluetooth_rxtx.c **** 		clkn++;
 3749              		.loc 1 883 0
 3750 0014 394B     		ldr	r3, .L172
 3751 0016 1B68     		ldr	r3, [r3]
 3752 0018 0133     		adds	r3, r3, #1
 3753 001a 384A     		ldr	r2, .L172
 3754 001c 1360     		str	r3, [r2]
 884:bluetooth_rxtx.c **** 		next = clkn;
 3755              		.loc 1 884 0
 3756 001e 374B     		ldr	r3, .L172
 3757 0020 1B68     		ldr	r3, [r3]
 3758 0022 7B60     		str	r3, [r7, #4]
 885:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 3759              		.loc 1 885 0
 3760 0024 364B     		ldr	r3, .L172+4
 3761 0026 9B69     		ldr	r3, [r3, #24]
 3762 0028 7A68     		ldr	r2, [r7, #4]
 3763 002a D31A     		subs	r3, r2, r3
 3764 002c 03F00303 		and	r3, r3, #3
 3765 0030 3B60     		str	r3, [r7]
 886:bluetooth_rxtx.c **** 
 887:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 888:bluetooth_rxtx.c **** 
 889:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 890:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 3766              		.loc 1 890 0
 3767 0032 344B     		ldr	r3, .L172+8
 3768 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3769 0036 002B     		cmp	r3, #0
 3770 0038 03D0     		beq	.L164
 3771              		.loc 1 890 0 is_stmt 0 discriminator 1
 3772 003a 324B     		ldr	r3, .L172+8
 3773 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3774 003e 012B     		cmp	r3, #1
 3775 0040 09D1     		bne	.L165
 3776              	.L164:
 891:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3777              		.loc 1 891 0 is_stmt 1
 3778 0042 7B68     		ldr	r3, [r7, #4]
 3779 0044 03F07F03 		and	r3, r3, #127
 3780 0048 002B     		cmp	r3, #0
 3781 004a 03D1     		bne	.L166
 892:bluetooth_rxtx.c **** 				do_hop = 1;
 3782              		.loc 1 892 0
 3783 004c 2E4B     		ldr	r3, .L172+12
 3784 004e 0122     		movs	r2, #1
 3785 0050 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 82


 891:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3786              		.loc 1 891 0
 3787 0052 37E0     		b	.L167
 3788              	.L166:
 3789 0054 36E0     		b	.L167
 3790              	.L165:
 893:bluetooth_rxtx.c **** 		}
 894:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 895:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 3791              		.loc 1 895 0
 3792 0056 2B4B     		ldr	r3, .L172+8
 3793 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3794 005a 022B     		cmp	r3, #2
 3795 005c 08D1     		bne	.L168
 896:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 3796              		.loc 1 896 0
 3797 005e 7B68     		ldr	r3, [r7, #4]
 3798 0060 03F00103 		and	r3, r3, #1
 3799 0064 002B     		cmp	r3, #0
 3800 0066 2DD1     		bne	.L167
 897:bluetooth_rxtx.c **** 				do_hop = 1;
 3801              		.loc 1 897 0
 3802 0068 274B     		ldr	r3, .L172+12
 3803 006a 0122     		movs	r2, #1
 3804 006c 1A70     		strb	r2, [r3]
 3805 006e 29E0     		b	.L167
 3806              	.L168:
 898:bluetooth_rxtx.c **** 		}
 899:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 900:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 3807              		.loc 1 900 0
 3808 0070 244B     		ldr	r3, .L172+8
 3809 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3810 0074 032B     		cmp	r3, #3
 3811 0076 25D1     		bne	.L167
 901:bluetooth_rxtx.c **** 			// Only hop if connected
 902:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 3812              		.loc 1 902 0
 3813 0078 214B     		ldr	r3, .L172+4
 3814 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3815 007c 032B     		cmp	r3, #3
 3816 007e 21D1     		bne	.L167
 3817              		.loc 1 902 0 is_stmt 0 discriminator 1
 3818 0080 3B68     		ldr	r3, [r7]
 3819 0082 002B     		cmp	r3, #0
 3820 0084 1ED1     		bne	.L167
 903:bluetooth_rxtx.c **** 				--le.interval_timer;
 3821              		.loc 1 903 0 is_stmt 1
 3822 0086 1E4B     		ldr	r3, .L172+4
 3823 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3824 008a 9BB2     		uxth	r3, r3
 3825 008c 013B     		subs	r3, r3, #1
 3826 008e 9AB2     		uxth	r2, r3
 3827 0090 1B4B     		ldr	r3, .L172+4
 3828 0092 9A83     		strh	r2, [r3, #28]	@ movhi
 904:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3829              		.loc 1 904 0
ARM GAS  /tmp/ccXEAChk.s 			page 83


 3830 0094 1A4B     		ldr	r3, .L172+4
 3831 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3832 0098 9BB2     		uxth	r3, r3
 3833 009a 002B     		cmp	r3, #0
 3834 009c 0ED1     		bne	.L170
 905:bluetooth_rxtx.c **** 					do_hop = 1;
 3835              		.loc 1 905 0
 3836 009e 1A4B     		ldr	r3, .L172+12
 3837 00a0 0122     		movs	r2, #1
 3838 00a2 1A70     		strb	r2, [r3]
 906:bluetooth_rxtx.c **** 					++le.conn_count;
 3839              		.loc 1 906 0
 3840 00a4 164B     		ldr	r3, .L172+4
 3841 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 3842 00a8 9BB2     		uxth	r3, r3
 3843 00aa 0133     		adds	r3, r3, #1
 3844 00ac 9AB2     		uxth	r2, r3
 3845 00ae 144B     		ldr	r3, .L172+4
 3846 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
 907:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3847              		.loc 1 907 0
 3848 00b2 134B     		ldr	r3, .L172+4
 3849 00b4 DA8B     		ldrh	r2, [r3, #30]
 3850 00b6 124B     		ldr	r3, .L172+4
 3851 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 3852 00ba 03E0     		b	.L167
 3853              	.L170:
 908:bluetooth_rxtx.c **** 				} else {
 909:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 3854              		.loc 1 909 0
 3855 00bc 134B     		ldr	r3, .L172+16
 3856 00be 4FF48072 		mov	r2, #256
 3857 00c2 1A60     		str	r2, [r3]
 3858              	.L167:
 910:bluetooth_rxtx.c **** 				}
 911:bluetooth_rxtx.c **** 			}
 912:bluetooth_rxtx.c **** 		}
 913:bluetooth_rxtx.c **** 
 914:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
 915:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 3859              		.loc 1 915 0
 3860 00c4 7B68     		ldr	r3, [r7, #4]
 3861 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 3862 00ca 002B     		cmp	r3, #0
 3863 00cc 02D1     		bne	.L171
 916:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 3864              		.loc 1 916 0
 3865 00ce 104B     		ldr	r3, .L172+20
 3866 00d0 0122     		movs	r2, #1
 3867 00d2 1A70     		strb	r2, [r3]
 3868              	.L171:
 917:bluetooth_rxtx.c **** 
 918:bluetooth_rxtx.c **** 		/* Ack interrupt */
 919:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 3869              		.loc 1 919 0
 3870 00d4 0F4A     		ldr	r2, .L172+24
 3871 00d6 104B     		ldr	r3, .L172+28
ARM GAS  /tmp/ccXEAChk.s 			page 84


 3872 00d8 1B68     		ldr	r3, [r3]
 3873 00da C3F54363 		rsb	r3, r3, #3120
 3874 00de 0433     		adds	r3, r3, #4
 3875 00e0 1360     		str	r3, [r2]
 920:bluetooth_rxtx.c **** 		clock_trim = 0;
 3876              		.loc 1 920 0
 3877 00e2 0D4B     		ldr	r3, .L172+28
 3878 00e4 0022     		movs	r2, #0
 3879 00e6 1A60     		str	r2, [r3]
 921:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 3880              		.loc 1 921 0
 3881 00e8 4FF04023 		mov	r3, #1073758208
 3882 00ec 0122     		movs	r2, #1
 3883 00ee 1A60     		str	r2, [r3]
 3884              	.L162:
 922:bluetooth_rxtx.c **** 	}
 923:bluetooth_rxtx.c **** }
 3885              		.loc 1 923 0
 3886 00f0 0C37     		adds	r7, r7, #12
 3887              		.cfi_def_cfa_offset 4
 3888 00f2 BD46     		mov	sp, r7
 3889              		.cfi_def_cfa_register 13
 3890              		@ sp needed
 3891 00f4 5DF8047B 		ldr	r7, [sp], #4
 3892              		.cfi_restore 7
 3893              		.cfi_def_cfa_offset 0
 3894 00f8 7047     		bx	lr
 3895              	.L173:
 3896 00fa 00BF     		.align	2
 3897              	.L172:
 3898 00fc 00000000 		.word	clkn
 3899 0100 00000000 		.word	le
 3900 0104 00000000 		.word	hop_mode
 3901 0108 00000000 		.word	do_hop
 3902 010c 3CC00920 		.word	537509948
 3903 0110 00000000 		.word	keepalive_trigger
 3904 0114 18400040 		.word	1073758232
 3905 0118 00000000 		.word	clock_trim
 3906              		.cfi_endproc
 3907              	.LFE11:
 3909              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3910              		.align	2
 3911              		.global	EINT3_IRQHandler
 3912              		.thumb
 3913              		.thumb_func
 3915              	EINT3_IRQHandler:
 3916              	.LFB12:
 924:bluetooth_rxtx.c **** 
 925:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 926:bluetooth_rxtx.c **** #ifndef TC13BADGE
 927:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 928:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 929:bluetooth_rxtx.c **** {
 3917              		.loc 1 929 0
 3918              		.cfi_startproc
 3919              		@ args = 0, pretend = 0, frame = 0
 3920              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccXEAChk.s 			page 85


 3921              		@ link register save eliminated.
 3922 0000 80B4     		push	{r7}
 3923              		.cfi_def_cfa_offset 4
 3924              		.cfi_offset 7, -4
 3925 0002 00AF     		add	r7, sp, #0
 3926              		.cfi_def_cfa_register 7
 930:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 931:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 3927              		.loc 1 931 0
 3928 0004 0B4B     		ldr	r3, .L175
 3929 0006 0422     		movs	r2, #4
 3930 0008 1A60     		str	r2, [r3]
 932:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 3931              		.loc 1 932 0
 3932 000a 0B4B     		ldr	r3, .L175+4
 3933 000c 0122     		movs	r2, #1
 3934 000e 1A70     		strb	r2, [r3]
 933:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 3935              		.loc 1 933 0
 3936 0010 0A4B     		ldr	r3, .L175+8
 3937 0012 1B68     		ldr	r3, [r3]
 3938 0014 C3F31303 		ubfx	r3, r3, #0, #20
 3939 0018 40F63542 		movw	r2, #3125
 3940 001c 02FB03F2 		mul	r2, r2, r3
 3941 0020 074B     		ldr	r3, .L175+12
 3942 0022 1B68     		ldr	r3, [r3]
 3943 0024 1344     		add	r3, r3, r2
 3944 0026 074A     		ldr	r2, .L175+16
 3945 0028 1360     		str	r3, [r2]
 934:bluetooth_rxtx.c **** }
 3946              		.loc 1 934 0
 3947 002a BD46     		mov	sp, r7
 3948              		.cfi_def_cfa_register 13
 3949              		@ sp needed
 3950 002c 5DF8047B 		ldr	r7, [sp], #4
 3951              		.cfi_restore 7
 3952              		.cfi_def_cfa_offset 0
 3953 0030 7047     		bx	lr
 3954              	.L176:
 3955 0032 00BF     		.align	2
 3956              	.L175:
 3957 0034 AC800240 		.word	1073905836
 3958 0038 00000000 		.word	cs_trigger
 3959 003c 00000000 		.word	clkn
 3960 0040 08400040 		.word	1073758216
 3961 0044 00000000 		.word	cs_timestamp
 3962              		.cfi_endproc
 3963              	.LFE12:
 3965              		.global	__aeabi_ui2d
 3966              		.global	__aeabi_dmul
 3967              		.global	__aeabi_ddiv
 3968              		.global	__aeabi_dadd
 3969              		.global	__aeabi_d2uiz
 3970              		.section	.text.msleep,"ax",%progbits
 3971              		.align	2
 3972              		.thumb
 3973              		.thumb_func
ARM GAS  /tmp/ccXEAChk.s 			page 86


 3975              	msleep:
 3976              	.LFB13:
 935:bluetooth_rxtx.c **** #endif // TC13BADGE
 936:bluetooth_rxtx.c **** 
 937:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
 938:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 939:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 940:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 941:bluetooth_rxtx.c **** {
 3977              		.loc 1 941 0
 3978              		.cfi_startproc
 3979              		@ args = 0, pretend = 0, frame = 16
 3980              		@ frame_needed = 1, uses_anonymous_args = 0
 3981 0000 B0B5     		push	{r4, r5, r7, lr}
 3982              		.cfi_def_cfa_offset 16
 3983              		.cfi_offset 4, -16
 3984              		.cfi_offset 5, -12
 3985              		.cfi_offset 7, -8
 3986              		.cfi_offset 14, -4
 3987 0002 84B0     		sub	sp, sp, #16
 3988              		.cfi_def_cfa_offset 32
 3989 0004 00AF     		add	r7, sp, #0
 3990              		.cfi_def_cfa_register 7
 3991 0006 7860     		str	r0, [r7, #4]
 942:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 3992              		.loc 1 942 0
 3993 0008 1B4B     		ldr	r3, .L179+8
 3994 000a 1B68     		ldr	r3, [r3]
 3995 000c 1846     		mov	r0, r3
 3996 000e FFF7FEFF 		bl	__aeabi_ui2d
 3997 0012 0446     		mov	r4, r0
 3998 0014 0D46     		mov	r5, r1
 3999 0016 7868     		ldr	r0, [r7, #4]
 4000 0018 FFF7FEFF 		bl	__aeabi_ui2d
 4001 001c 0246     		mov	r2, r0
 4002 001e 0B46     		mov	r3, r1
 4003 0020 1046     		mov	r0, r2
 4004 0022 1946     		mov	r1, r3
 4005 0024 12A3     		adr	r3, .L179
 4006 0026 D3E90023 		ldrd	r2, [r3]
 4007 002a FFF7FEFF 		bl	__aeabi_dmul
 4008 002e 0246     		mov	r2, r0
 4009 0030 0B46     		mov	r3, r1
 4010 0032 1046     		mov	r0, r2
 4011 0034 1946     		mov	r1, r3
 4012 0036 4FF00002 		mov	r2, #0
 4013 003a 104B     		ldr	r3, .L179+12
 4014 003c FFF7FEFF 		bl	__aeabi_ddiv
 4015 0040 0246     		mov	r2, r0
 4016 0042 0B46     		mov	r3, r1
 4017 0044 2046     		mov	r0, r4
 4018 0046 2946     		mov	r1, r5
 4019 0048 FFF7FEFF 		bl	__aeabi_dadd
 4020 004c 0246     		mov	r2, r0
 4021 004e 0B46     		mov	r3, r1
 4022 0050 1046     		mov	r0, r2
 4023 0052 1946     		mov	r1, r3
ARM GAS  /tmp/ccXEAChk.s 			page 87


 4024 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 4025 0058 0346     		mov	r3, r0
 4026 005a FB60     		str	r3, [r7, #12]
 4027              	.L178:
 943:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 4028              		.loc 1 943 0 discriminator 1
 4029 005c 064B     		ldr	r3, .L179+8
 4030 005e 1A68     		ldr	r2, [r3]
 4031 0060 FB68     		ldr	r3, [r7, #12]
 4032 0062 9A42     		cmp	r2, r3
 4033 0064 FAD3     		bcc	.L178
 944:bluetooth_rxtx.c **** }
 4034              		.loc 1 944 0
 4035 0066 1037     		adds	r7, r7, #16
 4036              		.cfi_def_cfa_offset 16
 4037 0068 BD46     		mov	sp, r7
 4038              		.cfi_def_cfa_register 13
 4039              		@ sp needed
 4040 006a B0BD     		pop	{r4, r5, r7, pc}
 4041              	.L180:
 4042 006c AFF30080 		.align	3
 4043              	.L179:
 4044 0070 00000000 		.word	0
 4045 0074 00887340 		.word	1081313280
 4046 0078 00000000 		.word	clkn
 4047 007c 00408F40 		.word	1083129856
 4048              		.cfi_endproc
 4049              	.LFE13:
 4051              		.section	.text.dma_init,"ax",%progbits
 4052              		.align	2
 4053              		.thumb
 4054              		.thumb_func
 4056              	dma_init:
 4057              	.LFB14:
 945:bluetooth_rxtx.c **** 
 946:bluetooth_rxtx.c **** static void dma_init()
 947:bluetooth_rxtx.c **** {
 4058              		.loc 1 947 0
 4059              		.cfi_startproc
 4060              		@ args = 0, pretend = 0, frame = 0
 4061              		@ frame_needed = 1, uses_anonymous_args = 0
 4062              		@ link register save eliminated.
 4063 0000 80B4     		push	{r7}
 4064              		.cfi_def_cfa_offset 4
 4065              		.cfi_offset 7, -4
 4066 0002 00AF     		add	r7, sp, #0
 4067              		.cfi_def_cfa_register 7
 948:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 949:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4068              		.loc 1 949 0
 4069 0004 3F4A     		ldr	r2, .L183
 4070 0006 3F4B     		ldr	r3, .L183
 4071 0008 1B68     		ldr	r3, [r3]
 4072 000a 43F00053 		orr	r3, r3, #536870912
 4073 000e 1360     		str	r3, [r2]
 950:bluetooth_rxtx.c **** 
 951:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
ARM GAS  /tmp/ccXEAChk.s 			page 88


 952:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4074              		.loc 1 952 0
 4075 0010 3D4B     		ldr	r3, .L183+4
 4076 0012 0022     		movs	r2, #0
 4077 0014 1A60     		str	r2, [r3]
 953:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4078              		.loc 1 953 0
 4079 0016 3D4B     		ldr	r3, .L183+8
 4080 0018 0022     		movs	r2, #0
 4081 001a 1A60     		str	r2, [r3]
 954:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4082              		.loc 1 954 0
 4083 001c 3C4B     		ldr	r3, .L183+12
 4084 001e 0022     		movs	r2, #0
 4085 0020 1A60     		str	r2, [r3]
 955:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4086              		.loc 1 955 0
 4087 0022 3C4B     		ldr	r3, .L183+16
 4088 0024 0022     		movs	r2, #0
 4089 0026 1A60     		str	r2, [r3]
 956:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4090              		.loc 1 956 0
 4091 0028 3B4B     		ldr	r3, .L183+20
 4092 002a 0022     		movs	r2, #0
 4093 002c 1A60     		str	r2, [r3]
 957:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4094              		.loc 1 957 0
 4095 002e 3B4B     		ldr	r3, .L183+24
 4096 0030 0022     		movs	r2, #0
 4097 0032 1A60     		str	r2, [r3]
 958:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4098              		.loc 1 958 0
 4099 0034 3A4B     		ldr	r3, .L183+28
 4100 0036 0022     		movs	r2, #0
 4101 0038 1A60     		str	r2, [r3]
 959:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4102              		.loc 1 959 0
 4103 003a 3A4B     		ldr	r3, .L183+32
 4104 003c 0022     		movs	r2, #0
 4105 003e 1A60     		str	r2, [r3]
 960:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4106              		.loc 1 960 0
 4107 0040 394B     		ldr	r3, .L183+36
 4108 0042 FF22     		movs	r2, #255
 4109 0044 1A60     		str	r2, [r3]
 961:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4110              		.loc 1 961 0
 4111 0046 394B     		ldr	r3, .L183+40
 4112 0048 FF22     		movs	r2, #255
 4113 004a 1A60     		str	r2, [r3]
 962:bluetooth_rxtx.c **** 
 963:bluetooth_rxtx.c **** 	/* DMA linked lists */
 964:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4114              		.loc 1 964 0
 4115 004c 384B     		ldr	r3, .L183+44
 4116 004e 394A     		ldr	r2, .L183+48
 4117 0050 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 89


 965:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4118              		.loc 1 965 0
 4119 0052 394A     		ldr	r2, .L183+52
 4120 0054 364B     		ldr	r3, .L183+44
 4121 0056 5A60     		str	r2, [r3, #4]
 966:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4122              		.loc 1 966 0
 4123 0058 384A     		ldr	r2, .L183+56
 4124 005a 354B     		ldr	r3, .L183+44
 4125 005c 9A60     		str	r2, [r3, #8]
 967:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4126              		.loc 1 967 0
 4127 005e 344B     		ldr	r3, .L183+44
 4128 0060 374A     		ldr	r2, .L183+60
 4129 0062 DA60     		str	r2, [r3, #12]
 968:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 969:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 970:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 971:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 972:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 973:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 974:bluetooth_rxtx.c **** 
 975:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4130              		.loc 1 975 0
 4131 0064 354B     		ldr	r3, .L183+56
 4132 0066 334A     		ldr	r2, .L183+48
 4133 0068 1A60     		str	r2, [r3]
 976:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4134              		.loc 1 976 0
 4135 006a 364A     		ldr	r2, .L183+64
 4136 006c 334B     		ldr	r3, .L183+56
 4137 006e 5A60     		str	r2, [r3, #4]
 977:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4138              		.loc 1 977 0
 4139 0070 2F4A     		ldr	r2, .L183+44
 4140 0072 324B     		ldr	r3, .L183+56
 4141 0074 9A60     		str	r2, [r3, #8]
 978:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4142              		.loc 1 978 0
 4143 0076 314B     		ldr	r3, .L183+56
 4144 0078 314A     		ldr	r2, .L183+60
 4145 007a DA60     		str	r2, [r3, #12]
 979:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 980:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 981:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 982:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 983:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 984:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 985:bluetooth_rxtx.c **** 
 986:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
 987:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4146              		.loc 1 987 0
 4147 007c 324B     		ldr	r3, .L183+68
 4148 007e 4FF08062 		mov	r2, #67108864
 4149 0082 1A60     		str	r2, [r3]
 988:bluetooth_rxtx.c **** 
 989:bluetooth_rxtx.c **** 	/* enable DMA globally */
ARM GAS  /tmp/ccXEAChk.s 			page 90


 990:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4150              		.loc 1 990 0
 4151 0084 314B     		ldr	r3, .L183+72
 4152 0086 0122     		movs	r2, #1
 4153 0088 1A60     		str	r2, [r3]
 991:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4154              		.loc 1 991 0
 4155 008a 00BF     		nop
 4156              	.L182:
 4157              		.loc 1 991 0 is_stmt 0 discriminator 1
 4158 008c 2F4B     		ldr	r3, .L183+72
 4159 008e 1B68     		ldr	r3, [r3]
 4160 0090 03F00103 		and	r3, r3, #1
 4161 0094 002B     		cmp	r3, #0
 4162 0096 F9D0     		beq	.L182
 992:bluetooth_rxtx.c **** 
 993:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
 994:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4163              		.loc 1 994 0 is_stmt 1
 4164 0098 2D4A     		ldr	r2, .L183+76
 4165 009a 254B     		ldr	r3, .L183+44
 4166 009c 1B68     		ldr	r3, [r3]
 4167 009e 1360     		str	r3, [r2]
 995:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4168              		.loc 1 995 0
 4169 00a0 2C4A     		ldr	r2, .L183+80
 4170 00a2 234B     		ldr	r3, .L183+44
 4171 00a4 5B68     		ldr	r3, [r3, #4]
 4172 00a6 1360     		str	r3, [r2]
 996:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4173              		.loc 1 996 0
 4174 00a8 2B4A     		ldr	r2, .L183+84
 4175 00aa 214B     		ldr	r3, .L183+44
 4176 00ac 9B68     		ldr	r3, [r3, #8]
 4177 00ae 1360     		str	r3, [r2]
 997:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4178              		.loc 1 997 0
 4179 00b0 2A4A     		ldr	r2, .L183+88
 4180 00b2 1F4B     		ldr	r3, .L183+44
 4181 00b4 DB68     		ldr	r3, [r3, #12]
 4182 00b6 1360     		str	r3, [r2]
 998:bluetooth_rxtx.c **** 	DMACC0Config =
 4183              		.loc 1 998 0
 4184 00b8 134B     		ldr	r3, .L183+4
 4185 00ba 4DF20602 		movw	r2, #53254
 4186 00be 1A60     		str	r2, [r3]
 999:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1000:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1001:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1002:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1003:bluetooth_rxtx.c **** 
1004:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4187              		.loc 1 1004 0
 4188 00c0 274B     		ldr	r3, .L183+92
 4189 00c2 1B68     		ldr	r3, [r3]
 4190 00c4 1B0D     		lsrs	r3, r3, #20
 4191 00c6 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccXEAChk.s 			page 91


 4192 00c8 264A     		ldr	r2, .L183+96
 4193 00ca 1360     		str	r3, [r2]
1005:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4194              		.loc 1 1005 0
 4195 00cc 244B     		ldr	r3, .L183+92
 4196 00ce 1B68     		ldr	r3, [r3]
 4197 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4198 00d4 40F63542 		movw	r2, #3125
 4199 00d8 02FB03F2 		mul	r2, r2, r3
 4200 00dc 224B     		ldr	r3, .L183+100
 4201 00de 1B68     		ldr	r3, [r3]
 4202 00e0 1344     		add	r3, r3, r2
 4203 00e2 224A     		ldr	r2, .L183+104
 4204 00e4 1360     		str	r3, [r2]
1006:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4205              		.loc 1 1006 0
 4206 00e6 224B     		ldr	r3, .L183+108
 4207 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4208 00ea 9AB2     		uxth	r2, r3
 4209 00ec 214B     		ldr	r3, .L183+112
 4210 00ee 1A80     		strh	r2, [r3]	@ movhi
1007:bluetooth_rxtx.c **** 
1008:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1009:bluetooth_rxtx.c **** 	rx_tc = 0;
 4211              		.loc 1 1009 0
 4212 00f0 214B     		ldr	r3, .L183+116
 4213 00f2 0022     		movs	r2, #0
 4214 00f4 1A60     		str	r2, [r3]
1010:bluetooth_rxtx.c **** 	rx_err = 0;
 4215              		.loc 1 1010 0
 4216 00f6 214B     		ldr	r3, .L183+120
 4217 00f8 0022     		movs	r2, #0
 4218 00fa 1A60     		str	r2, [r3]
1011:bluetooth_rxtx.c **** }
 4219              		.loc 1 1011 0
 4220 00fc BD46     		mov	sp, r7
 4221              		.cfi_def_cfa_register 13
 4222              		@ sp needed
 4223 00fe 5DF8047B 		ldr	r7, [sp], #4
 4224              		.cfi_restore 7
 4225              		.cfi_def_cfa_offset 0
 4226 0102 7047     		bx	lr
 4227              	.L184:
 4228              		.align	2
 4229              	.L183:
 4230 0104 C4C00F40 		.word	1074774212
 4231 0108 10410050 		.word	1342193936
 4232 010c 30410050 		.word	1342193968
 4233 0110 50410050 		.word	1342194000
 4234 0114 70410050 		.word	1342194032
 4235 0118 90410050 		.word	1342194064
 4236 011c B0410050 		.word	1342194096
 4237 0120 D0410050 		.word	1342194128
 4238 0124 F0410050 		.word	1342194160
 4239 0128 08400050 		.word	1342193672
 4240 012c 10400050 		.word	1342193680
 4241 0130 00000000 		.word	rx_dma_lli1
ARM GAS  /tmp/ccXEAChk.s 			page 92


 4242 0134 08000340 		.word	1073938440
 4243 0138 00000000 		.word	rxbuf1
 4244 013c 00000000 		.word	rx_dma_lli2
 4245 0140 32900088 		.word	-2013229006
 4246 0144 00000000 		.word	rxbuf2
 4247 0148 80E100E0 		.word	-536813184
 4248 014c 30400050 		.word	1342193712
 4249 0150 00410050 		.word	1342193920
 4250 0154 04410050 		.word	1342193924
 4251 0158 08410050 		.word	1342193928
 4252 015c 0C410050 		.word	1342193932
 4253 0160 00000000 		.word	clkn
 4254 0164 00000000 		.word	active_buf_clkn_high
 4255 0168 08400040 		.word	1073758216
 4256 016c 00000000 		.word	active_buf_clk100ns
 4257 0170 00000000 		.word	channel
 4258 0174 00000000 		.word	active_buf_channel
 4259 0178 00000000 		.word	rx_tc
 4260 017c 00000000 		.word	rx_err
 4261              		.cfi_endproc
 4262              	.LFE14:
 4264              		.section	.text.dma_init_le,"ax",%progbits
 4265              		.align	2
 4266              		.thumb
 4267              		.thumb_func
 4269              	dma_init_le:
 4270              	.LFB15:
1012:bluetooth_rxtx.c **** 
1013:bluetooth_rxtx.c **** static void dma_init_le()
1014:bluetooth_rxtx.c **** {
 4271              		.loc 1 1014 0
 4272              		.cfi_startproc
 4273              		@ args = 0, pretend = 0, frame = 8
 4274              		@ frame_needed = 1, uses_anonymous_args = 0
 4275              		@ link register save eliminated.
 4276 0000 80B4     		push	{r7}
 4277              		.cfi_def_cfa_offset 4
 4278              		.cfi_offset 7, -4
 4279 0002 83B0     		sub	sp, sp, #12
 4280              		.cfi_def_cfa_offset 16
 4281 0004 00AF     		add	r7, sp, #0
 4282              		.cfi_def_cfa_register 7
1015:bluetooth_rxtx.c **** 	int i;
1016:bluetooth_rxtx.c **** 
1017:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1018:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4283              		.loc 1 1018 0
 4284 0006 4B4A     		ldr	r2, .L191
 4285 0008 4A4B     		ldr	r3, .L191
 4286 000a 1B68     		ldr	r3, [r3]
 4287 000c 43F00053 		orr	r3, r3, #536870912
 4288 0010 1360     		str	r3, [r2]
1019:bluetooth_rxtx.c **** 
1020:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1021:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4289              		.loc 1 1021 0
 4290 0012 494B     		ldr	r3, .L191+4
ARM GAS  /tmp/ccXEAChk.s 			page 93


 4291 0014 0022     		movs	r2, #0
 4292 0016 1A60     		str	r2, [r3]
1022:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4293              		.loc 1 1022 0
 4294 0018 484B     		ldr	r3, .L191+8
 4295 001a 0022     		movs	r2, #0
 4296 001c 1A60     		str	r2, [r3]
1023:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4297              		.loc 1 1023 0
 4298 001e 484B     		ldr	r3, .L191+12
 4299 0020 0022     		movs	r2, #0
 4300 0022 1A60     		str	r2, [r3]
1024:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4301              		.loc 1 1024 0
 4302 0024 474B     		ldr	r3, .L191+16
 4303 0026 0022     		movs	r2, #0
 4304 0028 1A60     		str	r2, [r3]
1025:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4305              		.loc 1 1025 0
 4306 002a 474B     		ldr	r3, .L191+20
 4307 002c 0022     		movs	r2, #0
 4308 002e 1A60     		str	r2, [r3]
1026:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4309              		.loc 1 1026 0
 4310 0030 464B     		ldr	r3, .L191+24
 4311 0032 0022     		movs	r2, #0
 4312 0034 1A60     		str	r2, [r3]
1027:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4313              		.loc 1 1027 0
 4314 0036 464B     		ldr	r3, .L191+28
 4315 0038 0022     		movs	r2, #0
 4316 003a 1A60     		str	r2, [r3]
1028:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4317              		.loc 1 1028 0
 4318 003c 454B     		ldr	r3, .L191+32
 4319 003e 0022     		movs	r2, #0
 4320 0040 1A60     		str	r2, [r3]
1029:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4321              		.loc 1 1029 0
 4322 0042 454B     		ldr	r3, .L191+36
 4323 0044 FF22     		movs	r2, #255
 4324 0046 1A60     		str	r2, [r3]
1030:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4325              		.loc 1 1030 0
 4326 0048 444B     		ldr	r3, .L191+40
 4327 004a FF22     		movs	r2, #255
 4328 004c 1A60     		str	r2, [r3]
1031:bluetooth_rxtx.c **** 
1032:bluetooth_rxtx.c **** 	/* enable DMA globally */
1033:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4329              		.loc 1 1033 0
 4330 004e 444B     		ldr	r3, .L191+44
 4331 0050 0122     		movs	r2, #1
 4332 0052 1A60     		str	r2, [r3]
1034:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4333              		.loc 1 1034 0
 4334 0054 00BF     		nop
ARM GAS  /tmp/ccXEAChk.s 			page 94


 4335              	.L186:
 4336              		.loc 1 1034 0 is_stmt 0 discriminator 1
 4337 0056 424B     		ldr	r3, .L191+44
 4338 0058 1B68     		ldr	r3, [r3]
 4339 005a 03F00103 		and	r3, r3, #1
 4340 005e 002B     		cmp	r3, #0
 4341 0060 F9D0     		beq	.L186
1035:bluetooth_rxtx.c **** 
1036:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4342              		.loc 1 1036 0 is_stmt 1
 4343 0062 0023     		movs	r3, #0
 4344 0064 7B60     		str	r3, [r7, #4]
 4345 0066 2AE0     		b	.L187
 4346              	.L190:
1037:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4347              		.loc 1 1037 0
 4348 0068 3E4A     		ldr	r2, .L191+48
 4349 006a 7B68     		ldr	r3, [r7, #4]
 4350 006c 1B01     		lsls	r3, r3, #4
 4351 006e 1344     		add	r3, r3, r2
 4352 0070 3D4A     		ldr	r2, .L191+52
 4353 0072 1A60     		str	r2, [r3]
1038:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4354              		.loc 1 1038 0
 4355 0074 7B68     		ldr	r3, [r7, #4]
 4356 0076 9B00     		lsls	r3, r3, #2
 4357 0078 3C4A     		ldr	r2, .L191+56
 4358 007a 1344     		add	r3, r3, r2
 4359 007c 1946     		mov	r1, r3
 4360 007e 394A     		ldr	r2, .L191+48
 4361 0080 7B68     		ldr	r3, [r7, #4]
 4362 0082 1B01     		lsls	r3, r3, #4
 4363 0084 1344     		add	r3, r3, r2
 4364 0086 5960     		str	r1, [r3, #4]
1039:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4365              		.loc 1 1039 0
 4366 0088 7B68     		ldr	r3, [r7, #4]
 4367 008a 092B     		cmp	r3, #9
 4368 008c 06DC     		bgt	.L188
 4369              		.loc 1 1039 0 is_stmt 0 discriminator 1
 4370 008e 7B68     		ldr	r3, [r7, #4]
 4371 0090 0133     		adds	r3, r3, #1
 4372 0092 1B01     		lsls	r3, r3, #4
 4373 0094 334A     		ldr	r2, .L191+48
 4374 0096 1344     		add	r3, r3, r2
 4375 0098 1A46     		mov	r2, r3
 4376 009a 00E0     		b	.L189
 4377              	.L188:
 4378              		.loc 1 1039 0 discriminator 2
 4379 009c 0022     		movs	r2, #0
 4380              	.L189:
 4381              		.loc 1 1039 0 discriminator 4
 4382 009e 3149     		ldr	r1, .L191+48
 4383 00a0 7B68     		ldr	r3, [r7, #4]
 4384 00a2 1B01     		lsls	r3, r3, #4
 4385 00a4 0B44     		add	r3, r3, r1
 4386 00a6 0833     		adds	r3, r3, #8
ARM GAS  /tmp/ccXEAChk.s 			page 95


 4387 00a8 1A60     		str	r2, [r3]
1040:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4388              		.loc 1 1040 0 is_stmt 1 discriminator 4
 4389 00aa 2E4A     		ldr	r2, .L191+48
 4390 00ac 7B68     		ldr	r3, [r7, #4]
 4391 00ae 1B01     		lsls	r3, r3, #4
 4392 00b0 1344     		add	r3, r3, r2
 4393 00b2 0833     		adds	r3, r3, #8
 4394 00b4 2E4A     		ldr	r2, .L191+60
 4395 00b6 5A60     		str	r2, [r3, #4]
1036:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4396              		.loc 1 1036 0 discriminator 4
 4397 00b8 7B68     		ldr	r3, [r7, #4]
 4398 00ba 0133     		adds	r3, r3, #1
 4399 00bc 7B60     		str	r3, [r7, #4]
 4400              	.L187:
1036:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4401              		.loc 1 1036 0 is_stmt 0 discriminator 2
 4402 00be 7B68     		ldr	r3, [r7, #4]
 4403 00c0 0A2B     		cmp	r3, #10
 4404 00c2 D1DD     		ble	.L190
1041:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1042:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1043:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1044:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1045:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1046:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1047:bluetooth_rxtx.c **** 	}
1048:bluetooth_rxtx.c **** 
1049:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1050:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4405              		.loc 1 1050 0 is_stmt 1
 4406 00c4 2B4A     		ldr	r2, .L191+64
 4407 00c6 274B     		ldr	r3, .L191+48
 4408 00c8 1B68     		ldr	r3, [r3]
 4409 00ca 1360     		str	r3, [r2]
1051:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4410              		.loc 1 1051 0
 4411 00cc 2A4A     		ldr	r2, .L191+68
 4412 00ce 254B     		ldr	r3, .L191+48
 4413 00d0 5B68     		ldr	r3, [r3, #4]
 4414 00d2 1360     		str	r3, [r2]
1052:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4415              		.loc 1 1052 0
 4416 00d4 294A     		ldr	r2, .L191+72
 4417 00d6 234B     		ldr	r3, .L191+48
 4418 00d8 9B68     		ldr	r3, [r3, #8]
 4419 00da 1360     		str	r3, [r2]
1053:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4420              		.loc 1 1053 0
 4421 00dc 284A     		ldr	r2, .L191+76
 4422 00de 214B     		ldr	r3, .L191+48
 4423 00e0 DB68     		ldr	r3, [r3, #12]
 4424 00e2 1360     		str	r3, [r2]
1054:bluetooth_rxtx.c **** 	DMACC0Config =
 4425              		.loc 1 1054 0
 4426 00e4 144B     		ldr	r3, .L191+4
ARM GAS  /tmp/ccXEAChk.s 			page 96


 4427 00e6 4DF20602 		movw	r2, #53254
 4428 00ea 1A60     		str	r2, [r3]
1055:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1056:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1057:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1058:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1059:bluetooth_rxtx.c **** 
1060:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4429              		.loc 1 1060 0
 4430 00ec 254B     		ldr	r3, .L191+80
 4431 00ee 1B68     		ldr	r3, [r3]
 4432 00f0 1B0D     		lsrs	r3, r3, #20
 4433 00f2 DBB2     		uxtb	r3, r3
 4434 00f4 244A     		ldr	r2, .L191+84
 4435 00f6 1360     		str	r3, [r2]
1061:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4436              		.loc 1 1061 0
 4437 00f8 224B     		ldr	r3, .L191+80
 4438 00fa 1B68     		ldr	r3, [r3]
 4439 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4440 0100 40F63542 		movw	r2, #3125
 4441 0104 02FB03F2 		mul	r2, r2, r3
 4442 0108 204B     		ldr	r3, .L191+88
 4443 010a 1B68     		ldr	r3, [r3]
 4444 010c 1344     		add	r3, r3, r2
 4445 010e 204A     		ldr	r2, .L191+92
 4446 0110 1360     		str	r3, [r2]
1062:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4447              		.loc 1 1062 0
 4448 0112 204B     		ldr	r3, .L191+96
 4449 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4450 0116 9AB2     		uxth	r2, r3
 4451 0118 1F4B     		ldr	r3, .L191+100
 4452 011a 1A80     		strh	r2, [r3]	@ movhi
1063:bluetooth_rxtx.c **** 
1064:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1065:bluetooth_rxtx.c **** 	rx_tc = 0;
 4453              		.loc 1 1065 0
 4454 011c 1F4B     		ldr	r3, .L191+104
 4455 011e 0022     		movs	r2, #0
 4456 0120 1A60     		str	r2, [r3]
1066:bluetooth_rxtx.c **** 	rx_err = 0;
 4457              		.loc 1 1066 0
 4458 0122 1F4B     		ldr	r3, .L191+108
 4459 0124 0022     		movs	r2, #0
 4460 0126 1A60     		str	r2, [r3]
1067:bluetooth_rxtx.c **** }
 4461              		.loc 1 1067 0
 4462 0128 0C37     		adds	r7, r7, #12
 4463              		.cfi_def_cfa_offset 4
 4464 012a BD46     		mov	sp, r7
 4465              		.cfi_def_cfa_register 13
 4466              		@ sp needed
 4467 012c 5DF8047B 		ldr	r7, [sp], #4
 4468              		.cfi_restore 7
 4469              		.cfi_def_cfa_offset 0
 4470 0130 7047     		bx	lr
ARM GAS  /tmp/ccXEAChk.s 			page 97


 4471              	.L192:
 4472 0132 00BF     		.align	2
 4473              	.L191:
 4474 0134 C4C00F40 		.word	1074774212
 4475 0138 10410050 		.word	1342193936
 4476 013c 30410050 		.word	1342193968
 4477 0140 50410050 		.word	1342194000
 4478 0144 70410050 		.word	1342194032
 4479 0148 90410050 		.word	1342194064
 4480 014c B0410050 		.word	1342194096
 4481 0150 D0410050 		.word	1342194128
 4482 0154 F0410050 		.word	1342194160
 4483 0158 08400050 		.word	1342193672
 4484 015c 10400050 		.word	1342193680
 4485 0160 30400050 		.word	1342193712
 4486 0164 00000000 		.word	le_dma_lli
 4487 0168 08000340 		.word	1073938440
 4488 016c 00000000 		.word	rxbuf1
 4489 0170 04100088 		.word	-2013261820
 4490 0174 00410050 		.word	1342193920
 4491 0178 04410050 		.word	1342193924
 4492 017c 08410050 		.word	1342193928
 4493 0180 0C410050 		.word	1342193932
 4494 0184 00000000 		.word	clkn
 4495 0188 00000000 		.word	active_buf_clkn_high
 4496 018c 08400040 		.word	1073758216
 4497 0190 00000000 		.word	active_buf_clk100ns
 4498 0194 00000000 		.word	channel
 4499 0198 00000000 		.word	active_buf_channel
 4500 019c 00000000 		.word	rx_tc
 4501 01a0 00000000 		.word	rx_err
 4502              		.cfi_endproc
 4503              	.LFE15:
 4505              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4506              		.align	2
 4507              		.global	bt_stream_dma_handler
 4508              		.thumb
 4509              		.thumb_func
 4511              	bt_stream_dma_handler:
 4512              	.LFB16:
1068:bluetooth_rxtx.c **** 
1069:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4513              		.loc 1 1069 0
 4514              		.cfi_startproc
 4515              		@ args = 0, pretend = 0, frame = 0
 4516              		@ frame_needed = 1, uses_anonymous_args = 0
 4517              		@ link register save eliminated.
 4518 0000 80B4     		push	{r7}
 4519              		.cfi_def_cfa_offset 4
 4520              		.cfi_offset 7, -4
 4521 0002 00AF     		add	r7, sp, #0
 4522              		.cfi_def_cfa_register 7
1070:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4523              		.loc 1 1070 0
 4524 0004 254B     		ldr	r3, .L196
 4525 0006 1B68     		ldr	r3, [r3]
 4526 0008 254A     		ldr	r2, .L196+4
ARM GAS  /tmp/ccXEAChk.s 			page 98


 4527 000a 1360     		str	r3, [r2]
1071:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4528              		.loc 1 1071 0
 4529 000c 254B     		ldr	r3, .L196+8
 4530 000e 1B68     		ldr	r3, [r3]
 4531 0010 1B0D     		lsrs	r3, r3, #20
 4532 0012 DBB2     		uxtb	r3, r3
 4533 0014 214A     		ldr	r2, .L196
 4534 0016 1360     		str	r3, [r2]
1072:bluetooth_rxtx.c **** 
1073:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4535              		.loc 1 1073 0
 4536 0018 234B     		ldr	r3, .L196+12
 4537 001a 1B68     		ldr	r3, [r3]
 4538 001c 234A     		ldr	r2, .L196+16
 4539 001e 1360     		str	r3, [r2]
1074:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4540              		.loc 1 1074 0
 4541 0020 204B     		ldr	r3, .L196+8
 4542 0022 1B68     		ldr	r3, [r3]
 4543 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4544 0028 40F63542 		movw	r2, #3125
 4545 002c 02FB03F2 		mul	r2, r2, r3
 4546 0030 1F4B     		ldr	r3, .L196+20
 4547 0032 1B68     		ldr	r3, [r3]
 4548 0034 1344     		add	r3, r3, r2
 4549 0036 1C4A     		ldr	r2, .L196+12
 4550 0038 1360     		str	r3, [r2]
1075:bluetooth_rxtx.c **** 
1076:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4551              		.loc 1 1076 0
 4552 003a 1E4B     		ldr	r3, .L196+24
 4553 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4554 003e 9AB2     		uxth	r2, r3
 4555 0040 1D4B     		ldr	r3, .L196+28
 4556 0042 1A80     		strh	r2, [r3]	@ movhi
1077:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4557              		.loc 1 1077 0
 4558 0044 1D4B     		ldr	r3, .L196+32
 4559 0046 1B88     		ldrh	r3, [r3]	@ movhi
 4560 0048 9AB2     		uxth	r2, r3
 4561 004a 1A4B     		ldr	r3, .L196+24
 4562 004c 1A80     		strh	r2, [r3]	@ movhi
1078:bluetooth_rxtx.c **** 
1079:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1080:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4563              		.loc 1 1080 0
 4564 004e 1C4B     		ldr	r3, .L196+36
 4565 0050 1B68     		ldr	r3, [r3]
 4566 0052 03F00103 		and	r3, r3, #1
 4567 0056 002B     		cmp	r3, #0
 4568 0058 1BD0     		beq	.L193
1081:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4569              		.loc 1 1081 0
 4570 005a 1A4B     		ldr	r3, .L196+40
 4571 005c 1B68     		ldr	r3, [r3]
 4572 005e 03F00103 		and	r3, r3, #1
ARM GAS  /tmp/ccXEAChk.s 			page 99


 4573 0062 002B     		cmp	r3, #0
 4574 0064 07D0     		beq	.L195
1082:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4575              		.loc 1 1082 0
 4576 0066 184B     		ldr	r3, .L196+44
 4577 0068 0122     		movs	r2, #1
 4578 006a 1A60     		str	r2, [r3]
1083:bluetooth_rxtx.c **** 			++rx_tc;
 4579              		.loc 1 1083 0
 4580 006c 174B     		ldr	r3, .L196+48
 4581 006e 1B68     		ldr	r3, [r3]
 4582 0070 0133     		adds	r3, r3, #1
 4583 0072 164A     		ldr	r2, .L196+48
 4584 0074 1360     		str	r3, [r2]
 4585              	.L195:
1084:bluetooth_rxtx.c **** 		}
1085:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4586              		.loc 1 1085 0
 4587 0076 164B     		ldr	r3, .L196+52
 4588 0078 1B68     		ldr	r3, [r3]
 4589 007a 03F00103 		and	r3, r3, #1
 4590 007e 002B     		cmp	r3, #0
 4591 0080 07D0     		beq	.L193
1086:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4592              		.loc 1 1086 0
 4593 0082 144B     		ldr	r3, .L196+56
 4594 0084 0122     		movs	r2, #1
 4595 0086 1A60     		str	r2, [r3]
1087:bluetooth_rxtx.c **** 			++rx_err;
 4596              		.loc 1 1087 0
 4597 0088 134B     		ldr	r3, .L196+60
 4598 008a 1B68     		ldr	r3, [r3]
 4599 008c 0133     		adds	r3, r3, #1
 4600 008e 124A     		ldr	r2, .L196+60
 4601 0090 1360     		str	r3, [r2]
 4602              	.L193:
1088:bluetooth_rxtx.c **** 		}
1089:bluetooth_rxtx.c **** 	}
1090:bluetooth_rxtx.c **** }
 4603              		.loc 1 1090 0
 4604 0092 BD46     		mov	sp, r7
 4605              		.cfi_def_cfa_register 13
 4606              		@ sp needed
 4607 0094 5DF8047B 		ldr	r7, [sp], #4
 4608              		.cfi_restore 7
 4609              		.cfi_def_cfa_offset 0
 4610 0098 7047     		bx	lr
 4611              	.L197:
 4612 009a 00BF     		.align	2
 4613              	.L196:
 4614 009c 00000000 		.word	active_buf_clkn_high
 4615 00a0 00000000 		.word	idle_buf_clkn_high
 4616 00a4 00000000 		.word	clkn
 4617 00a8 00000000 		.word	active_buf_clk100ns
 4618 00ac 00000000 		.word	idle_buf_clk100ns
 4619 00b0 08400040 		.word	1073758216
 4620 00b4 00000000 		.word	active_buf_channel
ARM GAS  /tmp/ccXEAChk.s 			page 100


 4621 00b8 00000000 		.word	idle_buf_channel
 4622 00bc 00000000 		.word	channel
 4623 00c0 00400050 		.word	1342193664
 4624 00c4 04400050 		.word	1342193668
 4625 00c8 08400050 		.word	1342193672
 4626 00cc 00000000 		.word	rx_tc
 4627 00d0 0C400050 		.word	1342193676
 4628 00d4 10400050 		.word	1342193680
 4629 00d8 00000000 		.word	rx_err
 4630              		.cfi_endproc
 4631              	.LFE16:
 4633              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4634              		.align	2
 4635              		.global	DMA_IRQHandler
 4636              		.thumb
 4637              		.thumb_func
 4639              	DMA_IRQHandler:
 4640              	.LFB17:
1091:bluetooth_rxtx.c **** 
1092:bluetooth_rxtx.c **** void DMA_IRQHandler()
1093:bluetooth_rxtx.c **** {
 4641              		.loc 1 1093 0
 4642              		.cfi_startproc
 4643              		@ args = 0, pretend = 0, frame = 0
 4644              		@ frame_needed = 1, uses_anonymous_args = 0
 4645 0000 80B5     		push	{r7, lr}
 4646              		.cfi_def_cfa_offset 8
 4647              		.cfi_offset 7, -8
 4648              		.cfi_offset 14, -4
 4649 0002 00AF     		add	r7, sp, #0
 4650              		.cfi_def_cfa_register 7
1094:bluetooth_rxtx.c **** 	switch (mode) {
 4651              		.loc 1 1094 0
 4652 0004 124B     		ldr	r3, .L202
 4653 0006 1B78     		ldrb	r3, [r3]
 4654 0008 DBB2     		uxtb	r3, r3
 4655 000a 013B     		subs	r3, r3, #1
 4656 000c 0B2B     		cmp	r3, #11
 4657 000e 1ED8     		bhi	.L198
 4658 0010 01A2     		adr	r2, .L201
 4659 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4660 0016 00BF     		.p2align 2
 4661              	.L201:
 4662 0018 49000000 		.word	.L200+1
 4663 001c 4F000000 		.word	.L198+1
 4664 0020 4F000000 		.word	.L198+1
 4665 0024 49000000 		.word	.L200+1
 4666 0028 4F000000 		.word	.L198+1
 4667 002c 4F000000 		.word	.L198+1
 4668 0030 4F000000 		.word	.L198+1
 4669 0034 49000000 		.word	.L200+1
 4670 0038 49000000 		.word	.L200+1
 4671 003c 49000000 		.word	.L200+1
 4672 0040 4F000000 		.word	.L198+1
 4673 0044 49000000 		.word	.L200+1
 4674              		.p2align 1
 4675              	.L200:
ARM GAS  /tmp/ccXEAChk.s 			page 101


1095:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1096:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1097:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1098:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1099:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1100:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1101:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4676              		.loc 1 1101 0
 4677 0048 FFF7FEFF 		bl	bt_stream_dma_handler
1102:bluetooth_rxtx.c **** 			break;
 4678              		.loc 1 1102 0
 4679 004c 00BF     		nop
 4680              	.L198:
1103:bluetooth_rxtx.c **** 	}
1104:bluetooth_rxtx.c **** }
 4681              		.loc 1 1104 0
 4682 004e 80BD     		pop	{r7, pc}
 4683              	.L203:
 4684              		.align	2
 4685              	.L202:
 4686 0050 00000000 		.word	mode
 4687              		.cfi_endproc
 4688              	.LFE17:
 4690              		.section	.text.dio_ssp_start,"ax",%progbits
 4691              		.align	2
 4692              		.thumb
 4693              		.thumb_func
 4695              	dio_ssp_start:
 4696              	.LFB18:
1105:bluetooth_rxtx.c **** 
1106:bluetooth_rxtx.c **** static void dio_ssp_start()
1107:bluetooth_rxtx.c **** {
 4697              		.loc 1 1107 0
 4698              		.cfi_startproc
 4699              		@ args = 0, pretend = 0, frame = 0
 4700              		@ frame_needed = 1, uses_anonymous_args = 0
 4701              		@ link register save eliminated.
 4702 0000 80B4     		push	{r7}
 4703              		.cfi_def_cfa_offset 4
 4704              		.cfi_offset 7, -4
 4705 0002 00AF     		add	r7, sp, #0
 4706              		.cfi_def_cfa_register 7
1108:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1109:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4707              		.loc 1 1109 0
 4708 0004 104B     		ldr	r3, .L205
 4709 0006 4FF08052 		mov	r2, #268435456
 4710 000a 1A60     		str	r2, [r3]
1110:bluetooth_rxtx.c **** 
1111:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1112:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4711              		.loc 1 1112 0
 4712 000c 0F4A     		ldr	r2, .L205+4
 4713 000e 0F4B     		ldr	r3, .L205+4
 4714 0010 1B68     		ldr	r3, [r3]
 4715 0012 43F00103 		orr	r3, r3, #1
 4716 0016 1360     		str	r3, [r2]
ARM GAS  /tmp/ccXEAChk.s 			page 102


1113:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4717              		.loc 1 1113 0
 4718 0018 0D4A     		ldr	r2, .L205+8
 4719 001a 0D4B     		ldr	r3, .L205+8
 4720 001c 1B68     		ldr	r3, [r3]
 4721 001e 43F00203 		orr	r3, r3, #2
 4722 0022 1360     		str	r3, [r2]
1114:bluetooth_rxtx.c **** 	
1115:bluetooth_rxtx.c **** 	/* enable DMA */
1116:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 4723              		.loc 1 1116 0
 4724 0024 0B4A     		ldr	r2, .L205+12
 4725 0026 0B4B     		ldr	r3, .L205+12
 4726 0028 1B68     		ldr	r3, [r3]
 4727 002a 43F00103 		orr	r3, r3, #1
 4728 002e 1360     		str	r3, [r2]
1117:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4729              		.loc 1 1117 0
 4730 0030 094B     		ldr	r3, .L205+16
 4731 0032 4FF08062 		mov	r2, #67108864
 4732 0036 1A60     		str	r2, [r3]
1118:bluetooth_rxtx.c **** 
1119:bluetooth_rxtx.c **** 	/* activate slave select pin */
1120:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4733              		.loc 1 1120 0
 4734 0038 084B     		ldr	r3, .L205+20
 4735 003a 4FF08052 		mov	r2, #268435456
 4736 003e 1A60     		str	r2, [r3]
1121:bluetooth_rxtx.c **** }
 4737              		.loc 1 1121 0
 4738 0040 BD46     		mov	sp, r7
 4739              		.cfi_def_cfa_register 13
 4740              		@ sp needed
 4741 0042 5DF8047B 		ldr	r7, [sp], #4
 4742              		.cfi_restore 7
 4743              		.cfi_def_cfa_offset 0
 4744 0046 7047     		bx	lr
 4745              	.L206:
 4746              		.align	2
 4747              	.L205:
 4748 0048 98C00920 		.word	537510040
 4749 004c 24000340 		.word	1073938468
 4750 0050 04000340 		.word	1073938436
 4751 0054 10410050 		.word	1342193936
 4752 0058 00E100E0 		.word	-536813312
 4753 005c 9CC00920 		.word	537510044
 4754              		.cfi_endproc
 4755              	.LFE18:
 4757              		.section	.text.dio_ssp_stop,"ax",%progbits
 4758              		.align	2
 4759              		.thumb
 4760              		.thumb_func
 4762              	dio_ssp_stop:
 4763              	.LFB19:
1122:bluetooth_rxtx.c **** 
1123:bluetooth_rxtx.c **** static void dio_ssp_stop()
1124:bluetooth_rxtx.c **** {
ARM GAS  /tmp/ccXEAChk.s 			page 103


 4764              		.loc 1 1124 0
 4765              		.cfi_startproc
 4766              		@ args = 0, pretend = 0, frame = 0
 4767              		@ frame_needed = 1, uses_anonymous_args = 0
 4768              		@ link register save eliminated.
 4769 0000 80B4     		push	{r7}
 4770              		.cfi_def_cfa_offset 4
 4771              		.cfi_offset 7, -4
 4772 0002 00AF     		add	r7, sp, #0
 4773              		.cfi_def_cfa_register 7
1125:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1126:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4774              		.loc 1 1126 0
 4775 0004 214B     		ldr	r3, .L209
 4776 0006 4FF08052 		mov	r2, #268435456
 4777 000a 1A60     		str	r2, [r3]
1127:bluetooth_rxtx.c **** 
1128:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1129:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 4778              		.loc 1 1129 0
 4779 000c 204A     		ldr	r2, .L209+4
 4780 000e 204B     		ldr	r3, .L209+4
 4781 0010 1B68     		ldr	r3, [r3]
 4782 0012 23F00103 		bic	r3, r3, #1
 4783 0016 1360     		str	r3, [r2]
1130:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 4784              		.loc 1 1130 0
 4785 0018 1E4A     		ldr	r2, .L209+8
 4786 001a 1E4B     		ldr	r3, .L209+8
 4787 001c 1B68     		ldr	r3, [r3]
 4788 001e 23F00203 		bic	r3, r3, #2
 4789 0022 1360     		str	r3, [r2]
1131:bluetooth_rxtx.c **** 
1132:bluetooth_rxtx.c **** 
1133:bluetooth_rxtx.c **** 	// disable DMA engine:
1134:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1135:bluetooth_rxtx.c **** 
1136:bluetooth_rxtx.c **** 	// disable DMA interrupts
1137:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4790              		.loc 1 1137 0
 4791 0024 1C4B     		ldr	r3, .L209+12
 4792 0026 4FF08062 		mov	r2, #67108864
 4793 002a 1A60     		str	r2, [r3]
1138:bluetooth_rxtx.c **** 
1139:bluetooth_rxtx.c **** 	// disable active channels
1140:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4794              		.loc 1 1140 0
 4795 002c 1B4B     		ldr	r3, .L209+16
 4796 002e 0022     		movs	r2, #0
 4797 0030 1A60     		str	r2, [r3]
1141:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4798              		.loc 1 1141 0
 4799 0032 1B4B     		ldr	r3, .L209+20
 4800 0034 0022     		movs	r2, #0
 4801 0036 1A60     		str	r2, [r3]
1142:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4802              		.loc 1 1142 0
ARM GAS  /tmp/ccXEAChk.s 			page 104


 4803 0038 1A4B     		ldr	r3, .L209+24
 4804 003a 0022     		movs	r2, #0
 4805 003c 1A60     		str	r2, [r3]
1143:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4806              		.loc 1 1143 0
 4807 003e 1A4B     		ldr	r3, .L209+28
 4808 0040 0022     		movs	r2, #0
 4809 0042 1A60     		str	r2, [r3]
1144:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4810              		.loc 1 1144 0
 4811 0044 194B     		ldr	r3, .L209+32
 4812 0046 0022     		movs	r2, #0
 4813 0048 1A60     		str	r2, [r3]
1145:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4814              		.loc 1 1145 0
 4815 004a 194B     		ldr	r3, .L209+36
 4816 004c 0022     		movs	r2, #0
 4817 004e 1A60     		str	r2, [r3]
1146:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4818              		.loc 1 1146 0
 4819 0050 184B     		ldr	r3, .L209+40
 4820 0052 0022     		movs	r2, #0
 4821 0054 1A60     		str	r2, [r3]
1147:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4822              		.loc 1 1147 0
 4823 0056 184B     		ldr	r3, .L209+44
 4824 0058 0022     		movs	r2, #0
 4825 005a 1A60     		str	r2, [r3]
1148:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4826              		.loc 1 1148 0
 4827 005c 174B     		ldr	r3, .L209+48
 4828 005e FF22     		movs	r2, #255
 4829 0060 1A60     		str	r2, [r3]
1149:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4830              		.loc 1 1149 0
 4831 0062 174B     		ldr	r3, .L209+52
 4832 0064 FF22     		movs	r2, #255
 4833 0066 1A60     		str	r2, [r3]
1150:bluetooth_rxtx.c **** 
1151:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1152:bluetooth_rxtx.c **** 	// register.
1153:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 4834              		.loc 1 1153 0
 4835 0068 164A     		ldr	r2, .L209+56
 4836 006a 164B     		ldr	r3, .L209+56
 4837 006c 1B68     		ldr	r3, [r3]
 4838 006e 23F00103 		bic	r3, r3, #1
 4839 0072 1360     		str	r3, [r2]
1154:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 4840              		.loc 1 1154 0
 4841 0074 00BF     		nop
 4842              	.L208:
 4843              		.loc 1 1154 0 is_stmt 0 discriminator 1
 4844 0076 134B     		ldr	r3, .L209+56
 4845 0078 1B68     		ldr	r3, [r3]
 4846 007a 03F00103 		and	r3, r3, #1
 4847 007e 002B     		cmp	r3, #0
ARM GAS  /tmp/ccXEAChk.s 			page 105


 4848 0080 F9D1     		bne	.L208
1155:bluetooth_rxtx.c **** }
 4849              		.loc 1 1155 0 is_stmt 1
 4850 0082 BD46     		mov	sp, r7
 4851              		.cfi_def_cfa_register 13
 4852              		@ sp needed
 4853 0084 5DF8047B 		ldr	r7, [sp], #4
 4854              		.cfi_restore 7
 4855              		.cfi_def_cfa_offset 0
 4856 0088 7047     		bx	lr
 4857              	.L210:
 4858 008a 00BF     		.align	2
 4859              	.L209:
 4860 008c 98C00920 		.word	537510040
 4861 0090 24000340 		.word	1073938468
 4862 0094 04000340 		.word	1073938436
 4863 0098 80E100E0 		.word	-536813184
 4864 009c 10410050 		.word	1342193936
 4865 00a0 30410050 		.word	1342193968
 4866 00a4 50410050 		.word	1342194000
 4867 00a8 70410050 		.word	1342194032
 4868 00ac 90410050 		.word	1342194064
 4869 00b0 B0410050 		.word	1342194096
 4870 00b4 D0410050 		.word	1342194128
 4871 00b8 F0410050 		.word	1342194160
 4872 00bc 08400050 		.word	1342193672
 4873 00c0 10400050 		.word	1342193680
 4874 00c4 30400050 		.word	1342193712
 4875              		.cfi_endproc
 4876              	.LFE19:
 4878              		.section	.text.cc2400_idle,"ax",%progbits
 4879              		.align	2
 4880              		.thumb
 4881              		.thumb_func
 4883              	cc2400_idle:
 4884              	.LFB20:
1156:bluetooth_rxtx.c **** 
1157:bluetooth_rxtx.c **** static void cc2400_idle()
1158:bluetooth_rxtx.c **** {
 4885              		.loc 1 1158 0
 4886              		.cfi_startproc
 4887              		@ args = 0, pretend = 0, frame = 0
 4888              		@ frame_needed = 1, uses_anonymous_args = 0
 4889 0000 80B5     		push	{r7, lr}
 4890              		.cfi_def_cfa_offset 8
 4891              		.cfi_offset 7, -8
 4892              		.cfi_offset 14, -4
 4893 0002 00AF     		add	r7, sp, #0
 4894              		.cfi_def_cfa_register 7
1159:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 4895              		.loc 1 1159 0
 4896 0004 6420     		movs	r0, #100
 4897 0006 FFF7FEFF 		bl	cc2400_strobe
1160:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4898              		.loc 1 1160 0
 4899 000a 00BF     		nop
 4900              	.L212:
ARM GAS  /tmp/ccXEAChk.s 			page 106


 4901              		.loc 1 1160 0 is_stmt 0 discriminator 1
 4902 000c FFF7FEFF 		bl	cc2400_status
 4903 0010 0346     		mov	r3, r0
 4904 0012 03F00403 		and	r3, r3, #4
 4905 0016 002B     		cmp	r3, #0
 4906 0018 F8D1     		bne	.L212
1161:bluetooth_rxtx.c **** 
1162:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1163:bluetooth_rxtx.c **** 	PAEN_CLR;
 4907              		.loc 1 1163 0 is_stmt 1
 4908 001a 0A4B     		ldr	r3, .L213
 4909 001c 8022     		movs	r2, #128
 4910 001e 1A60     		str	r2, [r3]
1164:bluetooth_rxtx.c **** 	HGM_CLR;
 4911              		.loc 1 1164 0
 4912 0020 084B     		ldr	r3, .L213
 4913 0022 4FF48072 		mov	r2, #256
 4914 0026 1A60     		str	r2, [r3]
1165:bluetooth_rxtx.c **** #endif
1166:bluetooth_rxtx.c **** 
1167:bluetooth_rxtx.c **** 	RXLED_CLR;
 4915              		.loc 1 1167 0
 4916 0028 074B     		ldr	r3, .L213+4
 4917 002a 1022     		movs	r2, #16
 4918 002c 1A60     		str	r2, [r3]
1168:bluetooth_rxtx.c **** 	TXLED_CLR;
 4919              		.loc 1 1168 0
 4920 002e 064B     		ldr	r3, .L213+4
 4921 0030 4FF48072 		mov	r2, #256
 4922 0034 1A60     		str	r2, [r3]
1169:bluetooth_rxtx.c **** 	USRLED_CLR;
 4923              		.loc 1 1169 0
 4924 0036 044B     		ldr	r3, .L213+4
 4925 0038 0222     		movs	r2, #2
 4926 003a 1A60     		str	r2, [r3]
1170:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 4927              		.loc 1 1170 0
 4928 003c 034B     		ldr	r3, .L213+8
 4929 003e 0022     		movs	r2, #0
 4930 0040 1A70     		strb	r2, [r3]
1171:bluetooth_rxtx.c **** }
 4931              		.loc 1 1171 0
 4932 0042 80BD     		pop	{r7, pc}
 4933              	.L214:
 4934              		.align	2
 4935              	.L213:
 4936 0044 5CC00920 		.word	537509980
 4937 0048 3CC00920 		.word	537509948
 4938 004c 00000000 		.word	mode
 4939              		.cfi_endproc
 4940              	.LFE20:
 4942              		.section	.text.cc2400_rx,"ax",%progbits
 4943              		.align	2
 4944              		.thumb
 4945              		.thumb_func
 4947              	cc2400_rx:
 4948              	.LFB21:
ARM GAS  /tmp/ccXEAChk.s 			page 107


1172:bluetooth_rxtx.c **** 
1173:bluetooth_rxtx.c **** /* start un-buffered rx */
1174:bluetooth_rxtx.c **** static void cc2400_rx()
1175:bluetooth_rxtx.c **** {
 4949              		.loc 1 1175 0
 4950              		.cfi_startproc
 4951              		@ args = 0, pretend = 0, frame = 8
 4952              		@ frame_needed = 1, uses_anonymous_args = 0
 4953 0000 80B5     		push	{r7, lr}
 4954              		.cfi_def_cfa_offset 8
 4955              		.cfi_offset 7, -8
 4956              		.cfi_offset 14, -4
 4957 0002 82B0     		sub	sp, sp, #8
 4958              		.cfi_def_cfa_offset 16
 4959 0004 00AF     		add	r7, sp, #0
 4960              		.cfi_def_cfa_register 7
1176:bluetooth_rxtx.c **** 	u16 mdmctrl;
1177:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4961              		.loc 1 1177 0
 4962 0006 2A4B     		ldr	r3, .L222
 4963 0008 1B78     		ldrb	r3, [r3]
 4964 000a DBB2     		uxtb	r3, r3
 4965 000c 002B     		cmp	r3, #0
 4966 000e 02D1     		bne	.L216
1178:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4967              		.loc 1 1178 0
 4968 0010 2923     		movs	r3, #41
 4969 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 4970 0014 08E0     		b	.L217
 4971              	.L216:
1179:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4972              		.loc 1 1179 0
 4973 0016 264B     		ldr	r3, .L222
 4974 0018 1B78     		ldrb	r3, [r3]
 4975 001a DBB2     		uxtb	r3, r3
 4976 001c 012B     		cmp	r3, #1
 4977 001e 02D1     		bne	.L218
1180:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4978              		.loc 1 1180 0
 4979 0020 4023     		movs	r3, #64
 4980 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 4981 0024 00E0     		b	.L217
 4982              	.L218:
1181:bluetooth_rxtx.c **** 	} else {
1182:bluetooth_rxtx.c **** 		/* oops */
1183:bluetooth_rxtx.c **** 		return;
 4983              		.loc 1 1183 0
 4984 0026 40E0     		b	.L215
 4985              	.L217:
1184:bluetooth_rxtx.c **** 	}
1185:bluetooth_rxtx.c **** 
1186:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4986              		.loc 1 1186 0
 4987 0028 0D20     		movs	r0, #13
 4988 002a 47F6FF71 		movw	r1, #32767
 4989 002e FFF7FEFF 		bl	cc2400_set
1187:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
ARM GAS  /tmp/ccXEAChk.s 			page 108


 4990              		.loc 1 1187 0
 4991 0032 1220     		movs	r0, #18
 4992 0034 42F62231 		movw	r1, #11042
 4993 0038 FFF7FEFF 		bl	cc2400_set
1188:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 4994              		.loc 1 1188 0
 4995 003c 1420     		movs	r0, #20
 4996 003e 41F24B31 		movw	r1, #4939
 4997 0042 FFF7FEFF 		bl	cc2400_set
1189:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 4998              		.loc 1 1189 0
 4999 0046 2020     		movs	r0, #32
 5000 0048 40F20111 		movw	r1, #257
 5001 004c FFF7FEFF 		bl	cc2400_set
1190:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1191:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1192:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1193:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1194:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1195:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1196:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5002              		.loc 1 1196 0
 5003 0050 184B     		ldr	r3, .L222+4
 5004 0052 1B88     		ldrh	r3, [r3]	@ movhi
 5005 0054 9BB2     		uxth	r3, r3
 5006 0056 013B     		subs	r3, r3, #1
 5007 0058 9BB2     		uxth	r3, r3
 5008 005a 0220     		movs	r0, #2
 5009 005c 1946     		mov	r1, r3
 5010 005e FFF7FEFF 		bl	cc2400_set
1197:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5011              		.loc 1 1197 0
 5012 0062 FB88     		ldrh	r3, [r7, #6]
 5013 0064 0320     		movs	r0, #3
 5014 0066 1946     		mov	r1, r3
 5015 0068 FFF7FEFF 		bl	cc2400_set
1198:bluetooth_rxtx.c **** 
1199:bluetooth_rxtx.c **** 	// Set up CS register
1200:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5016              		.loc 1 1200 0
 5017 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1201:bluetooth_rxtx.c **** 
1202:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5018              		.loc 1 1202 0
 5019 0070 00BF     		nop
 5020              	.L220:
 5021              		.loc 1 1202 0 is_stmt 0 discriminator 1
 5022 0072 FFF7FEFF 		bl	cc2400_status
 5023 0076 0346     		mov	r3, r0
 5024 0078 03F04003 		and	r3, r3, #64
 5025 007c 002B     		cmp	r3, #0
 5026 007e F8D0     		beq	.L220
1203:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5027              		.loc 1 1203 0 is_stmt 1
 5028 0080 6120     		movs	r0, #97
 5029 0082 FFF7FEFF 		bl	cc2400_strobe
1204:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
ARM GAS  /tmp/ccXEAChk.s 			page 109


 5030              		.loc 1 1204 0
 5031 0086 00BF     		nop
 5032              	.L221:
 5033              		.loc 1 1204 0 is_stmt 0 discriminator 1
 5034 0088 FFF7FEFF 		bl	cc2400_status
 5035 008c 0346     		mov	r3, r0
 5036 008e 03F00403 		and	r3, r3, #4
 5037 0092 002B     		cmp	r3, #0
 5038 0094 F8D0     		beq	.L221
1205:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5039              		.loc 1 1205 0 is_stmt 1
 5040 0096 6220     		movs	r0, #98
 5041 0098 FFF7FEFF 		bl	cc2400_strobe
1206:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1207:bluetooth_rxtx.c **** 	PAEN_SET;
 5042              		.loc 1 1207 0
 5043 009c 064B     		ldr	r3, .L222+8
 5044 009e 8022     		movs	r2, #128
 5045 00a0 1A60     		str	r2, [r3]
1208:bluetooth_rxtx.c **** 	HGM_SET;
 5046              		.loc 1 1208 0
 5047 00a2 054B     		ldr	r3, .L222+8
 5048 00a4 4FF48072 		mov	r2, #256
 5049 00a8 1A60     		str	r2, [r3]
 5050              	.L215:
1209:bluetooth_rxtx.c **** #endif
1210:bluetooth_rxtx.c **** }
 5051              		.loc 1 1210 0
 5052 00aa 0837     		adds	r7, r7, #8
 5053              		.cfi_def_cfa_offset 8
 5054 00ac BD46     		mov	sp, r7
 5055              		.cfi_def_cfa_register 13
 5056              		@ sp needed
 5057 00ae 80BD     		pop	{r7, pc}
 5058              	.L223:
 5059              		.align	2
 5060              	.L222:
 5061 00b0 00000000 		.word	modulation
 5062 00b4 00000000 		.word	channel
 5063 00b8 58C00920 		.word	537509976
 5064              		.cfi_endproc
 5065              	.LFE21:
 5067              		.section	.text.cc2400_rx_sync,"ax",%progbits
 5068              		.align	2
 5069              		.thumb
 5070              		.thumb_func
 5072              	cc2400_rx_sync:
 5073              	.LFB22:
1211:bluetooth_rxtx.c **** 
1212:bluetooth_rxtx.c **** /* start un-buffered rx */
1213:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1214:bluetooth_rxtx.c **** {
 5074              		.loc 1 1214 0
 5075              		.cfi_startproc
 5076              		@ args = 0, pretend = 0, frame = 16
 5077              		@ frame_needed = 1, uses_anonymous_args = 0
 5078 0000 80B5     		push	{r7, lr}
ARM GAS  /tmp/ccXEAChk.s 			page 110


 5079              		.cfi_def_cfa_offset 8
 5080              		.cfi_offset 7, -8
 5081              		.cfi_offset 14, -4
 5082 0002 84B0     		sub	sp, sp, #16
 5083              		.cfi_def_cfa_offset 24
 5084 0004 00AF     		add	r7, sp, #0
 5085              		.cfi_def_cfa_register 7
 5086 0006 7860     		str	r0, [r7, #4]
1215:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1216:bluetooth_rxtx.c **** 
1217:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5087              		.loc 1 1217 0
 5088 0008 334B     		ldr	r3, .L231
 5089 000a 1B78     		ldrb	r3, [r3]
 5090 000c DBB2     		uxtb	r3, r3
 5091 000e 002B     		cmp	r3, #0
 5092 0010 05D1     		bne	.L225
1218:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5093              		.loc 1 1218 0
 5094 0012 2923     		movs	r3, #41
 5095 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1219:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5096              		.loc 1 1219 0
 5097 0016 40F26143 		movw	r3, #1121
 5098 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5099 001c 0BE0     		b	.L226
 5100              	.L225:
1220:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1221:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1222:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1223:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1224:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1225:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1226:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1227:bluetooth_rxtx.c **** 
1228:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5101              		.loc 1 1228 0
 5102 001e 2E4B     		ldr	r3, .L231
 5103 0020 1B78     		ldrb	r3, [r3]
 5104 0022 DBB2     		uxtb	r3, r3
 5105 0024 012B     		cmp	r3, #1
 5106 0026 05D1     		bne	.L227
1229:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5107              		.loc 1 1229 0
 5108 0028 4023     		movs	r3, #64
 5109 002a BB81     		strh	r3, [r7, #12]	@ movhi
1230:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 5110              		.loc 1 1230 0
 5111 002c 40F26153 		movw	r3, #1377
 5112 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 5113 0032 00E0     		b	.L226
 5114              	.L227:
1231:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1232:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1233:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1234:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1235:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
ARM GAS  /tmp/ccXEAChk.s 			page 111


1236:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1237:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1238:bluetooth_rxtx.c **** 
1239:bluetooth_rxtx.c **** 	} else {
1240:bluetooth_rxtx.c **** 		/* oops */
1241:bluetooth_rxtx.c **** 		return;
 5115              		.loc 1 1241 0
 5116 0034 4DE0     		b	.L224
 5117              	.L226:
1242:bluetooth_rxtx.c **** 	}
1243:bluetooth_rxtx.c **** 
1244:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5118              		.loc 1 1244 0
 5119 0036 0D20     		movs	r0, #13
 5120 0038 47F6FF71 		movw	r1, #32767
 5121 003c FFF7FEFF 		bl	cc2400_set
1245:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5122              		.loc 1 1245 0
 5123 0040 1220     		movs	r0, #18
 5124 0042 42F62231 		movw	r1, #11042
 5125 0046 FFF7FEFF 		bl	cc2400_set
1246:bluetooth_rxtx.c **** 
1247:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 5126              		.loc 1 1247 0
 5127 004a 1420     		movs	r0, #20
 5128 004c 41F24B21 		movw	r1, #4683
 5129 0050 FFF7FEFF 		bl	cc2400_set
1248:bluetooth_rxtx.c **** 	// 1      2      4b
1249:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1250:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1251:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1252:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1253:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1254:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1255:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1256:bluetooth_rxtx.c **** 	//
1257:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1258:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1259:bluetooth_rxtx.c **** 
1260:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5130              		.loc 1 1260 0
 5131 0054 FB89     		ldrh	r3, [r7, #14]
 5132 0056 2020     		movs	r0, #32
 5133 0058 1946     		mov	r1, r3
 5134 005a FFF7FEFF 		bl	cc2400_set
1261:bluetooth_rxtx.c **** 
1262:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5135              		.loc 1 1262 0
 5136 005e 7B68     		ldr	r3, [r7, #4]
 5137 0060 9BB2     		uxth	r3, r3
 5138 0062 2C20     		movs	r0, #44
 5139 0064 1946     		mov	r1, r3
 5140 0066 FFF7FEFF 		bl	cc2400_set
1263:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5141              		.loc 1 1263 0
 5142 006a 7B68     		ldr	r3, [r7, #4]
 5143 006c 1B0C     		lsrs	r3, r3, #16
ARM GAS  /tmp/ccXEAChk.s 			page 112


 5144 006e 9BB2     		uxth	r3, r3
 5145 0070 2D20     		movs	r0, #45
 5146 0072 1946     		mov	r1, r3
 5147 0074 FFF7FEFF 		bl	cc2400_set
1264:bluetooth_rxtx.c **** 	
1265:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5148              		.loc 1 1265 0
 5149 0078 184B     		ldr	r3, .L231+4
 5150 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5151 007c 9BB2     		uxth	r3, r3
 5152 007e 013B     		subs	r3, r3, #1
 5153 0080 9BB2     		uxth	r3, r3
 5154 0082 0220     		movs	r0, #2
 5155 0084 1946     		mov	r1, r3
 5156 0086 FFF7FEFF 		bl	cc2400_set
1266:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5157              		.loc 1 1266 0
 5158 008a BB89     		ldrh	r3, [r7, #12]
 5159 008c 0320     		movs	r0, #3
 5160 008e 1946     		mov	r1, r3
 5161 0090 FFF7FEFF 		bl	cc2400_set
1267:bluetooth_rxtx.c **** 
1268:bluetooth_rxtx.c **** 	// Set up CS register
1269:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5162              		.loc 1 1269 0
 5163 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1270:bluetooth_rxtx.c **** 
1271:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5164              		.loc 1 1271 0
 5165 0098 00BF     		nop
 5166              	.L229:
 5167              		.loc 1 1271 0 is_stmt 0 discriminator 1
 5168 009a FFF7FEFF 		bl	cc2400_status
 5169 009e 0346     		mov	r3, r0
 5170 00a0 03F04003 		and	r3, r3, #64
 5171 00a4 002B     		cmp	r3, #0
 5172 00a6 F8D0     		beq	.L229
1272:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5173              		.loc 1 1272 0 is_stmt 1
 5174 00a8 6120     		movs	r0, #97
 5175 00aa FFF7FEFF 		bl	cc2400_strobe
1273:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5176              		.loc 1 1273 0
 5177 00ae 00BF     		nop
 5178              	.L230:
 5179              		.loc 1 1273 0 is_stmt 0 discriminator 1
 5180 00b0 FFF7FEFF 		bl	cc2400_status
 5181 00b4 0346     		mov	r3, r0
 5182 00b6 03F00403 		and	r3, r3, #4
 5183 00ba 002B     		cmp	r3, #0
 5184 00bc F8D0     		beq	.L230
1274:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5185              		.loc 1 1274 0 is_stmt 1
 5186 00be 6220     		movs	r0, #98
 5187 00c0 FFF7FEFF 		bl	cc2400_strobe
1275:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1276:bluetooth_rxtx.c **** 	PAEN_SET;
ARM GAS  /tmp/ccXEAChk.s 			page 113


 5188              		.loc 1 1276 0
 5189 00c4 064B     		ldr	r3, .L231+8
 5190 00c6 8022     		movs	r2, #128
 5191 00c8 1A60     		str	r2, [r3]
1277:bluetooth_rxtx.c **** 	HGM_SET;
 5192              		.loc 1 1277 0
 5193 00ca 054B     		ldr	r3, .L231+8
 5194 00cc 4FF48072 		mov	r2, #256
 5195 00d0 1A60     		str	r2, [r3]
 5196              	.L224:
1278:bluetooth_rxtx.c **** #endif
1279:bluetooth_rxtx.c **** }
 5197              		.loc 1 1279 0
 5198 00d2 1037     		adds	r7, r7, #16
 5199              		.cfi_def_cfa_offset 8
 5200 00d4 BD46     		mov	sp, r7
 5201              		.cfi_def_cfa_register 13
 5202              		@ sp needed
 5203 00d6 80BD     		pop	{r7, pc}
 5204              	.L232:
 5205              		.align	2
 5206              	.L231:
 5207 00d8 00000000 		.word	modulation
 5208 00dc 00000000 		.word	channel
 5209 00e0 58C00920 		.word	537509976
 5210              		.cfi_endproc
 5211              	.LFE22:
 5213              		.section	.text.le_transmit,"ax",%progbits
 5214              		.align	2
 5215              		.global	le_transmit
 5216              		.thumb
 5217              		.thumb_func
 5219              	le_transmit:
 5220              	.LFB23:
1280:bluetooth_rxtx.c **** 
1281:bluetooth_rxtx.c **** /*
1282:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1283:bluetooth_rxtx.c ****  *
1284:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1285:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1286:bluetooth_rxtx.c ****  * included in the data length.
1287:bluetooth_rxtx.c ****  */
1288:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1289:bluetooth_rxtx.c **** {
 5221              		.loc 1 1289 0
 5222              		.cfi_startproc
 5223              		@ args = 0, pretend = 0, frame = 104
 5224              		@ frame_needed = 1, uses_anonymous_args = 0
 5225 0000 80B5     		push	{r7, lr}
 5226              		.cfi_def_cfa_offset 8
 5227              		.cfi_offset 7, -8
 5228              		.cfi_offset 14, -4
 5229 0002 9AB0     		sub	sp, sp, #104
 5230              		.cfi_def_cfa_offset 112
 5231 0004 00AF     		add	r7, sp, #0
 5232              		.cfi_def_cfa_register 7
 5233 0006 F860     		str	r0, [r7, #12]
ARM GAS  /tmp/ccXEAChk.s 			page 114


 5234 0008 0B46     		mov	r3, r1
 5235 000a 7A60     		str	r2, [r7, #4]
 5236 000c FB72     		strb	r3, [r7, #11]
1290:bluetooth_rxtx.c **** 	unsigned i, j;
1291:bluetooth_rxtx.c **** 	int bit;
1292:bluetooth_rxtx.c **** 	u8 txbuf[64];
1293:bluetooth_rxtx.c **** 	u8 tx_len;
1294:bluetooth_rxtx.c **** 	u8 byte;
1295:bluetooth_rxtx.c **** 	u16 gio_save;
1296:bluetooth_rxtx.c **** 
1297:bluetooth_rxtx.c **** 	// first four bytes: AA
1298:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5237              		.loc 1 1298 0
 5238 000e 0023     		movs	r3, #0
 5239 0010 7B66     		str	r3, [r7, #100]
 5240 0012 35E0     		b	.L234
 5241              	.L237:
1299:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5242              		.loc 1 1299 0
 5243 0014 FB68     		ldr	r3, [r7, #12]
 5244 0016 87F85E30 		strb	r3, [r7, #94]
1300:bluetooth_rxtx.c **** 		aa >>= 8;
 5245              		.loc 1 1300 0
 5246 001a FB68     		ldr	r3, [r7, #12]
 5247 001c 1B0A     		lsrs	r3, r3, #8
 5248 001e FB60     		str	r3, [r7, #12]
1301:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5249              		.loc 1 1301 0
 5250 0020 07F11002 		add	r2, r7, #16
 5251 0024 7B6E     		ldr	r3, [r7, #100]
 5252 0026 1344     		add	r3, r3, r2
 5253 0028 0022     		movs	r2, #0
 5254 002a 1A70     		strb	r2, [r3]
1302:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5255              		.loc 1 1302 0
 5256 002c 0023     		movs	r3, #0
 5257 002e 3B66     		str	r3, [r7, #96]
 5258 0030 20E0     		b	.L235
 5259              	.L236:
1303:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5260              		.loc 1 1303 0 discriminator 3
 5261 0032 07F11002 		add	r2, r7, #16
 5262 0036 7B6E     		ldr	r3, [r7, #100]
 5263 0038 1344     		add	r3, r3, r2
 5264 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5265 003c D9B2     		uxtb	r1, r3
 5266 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5267 0042 03F00103 		and	r3, r3, #1
 5268 0046 3A6E     		ldr	r2, [r7, #96]
 5269 0048 C2F10702 		rsb	r2, r2, #7
 5270 004c 9340     		lsls	r3, r3, r2
 5271 004e DBB2     		uxtb	r3, r3
 5272 0050 0A46     		mov	r2, r1
 5273 0052 1343     		orrs	r3, r3, r2
 5274 0054 DBB2     		uxtb	r3, r3
 5275 0056 D9B2     		uxtb	r1, r3
 5276 0058 07F11002 		add	r2, r7, #16
ARM GAS  /tmp/ccXEAChk.s 			page 115


 5277 005c 7B6E     		ldr	r3, [r7, #100]
 5278 005e 1344     		add	r3, r3, r2
 5279 0060 0A46     		mov	r2, r1
 5280 0062 1A70     		strb	r2, [r3]
1304:bluetooth_rxtx.c **** 			byte >>= 1;
 5281              		.loc 1 1304 0 discriminator 3
 5282 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5283 0068 5B08     		lsrs	r3, r3, #1
 5284 006a 87F85E30 		strb	r3, [r7, #94]
1302:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5285              		.loc 1 1302 0 discriminator 3
 5286 006e 3B6E     		ldr	r3, [r7, #96]
 5287 0070 0133     		adds	r3, r3, #1
 5288 0072 3B66     		str	r3, [r7, #96]
 5289              	.L235:
1302:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5290              		.loc 1 1302 0 is_stmt 0 discriminator 1
 5291 0074 3B6E     		ldr	r3, [r7, #96]
 5292 0076 072B     		cmp	r3, #7
 5293 0078 DBD9     		bls	.L236
1298:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5294              		.loc 1 1298 0 is_stmt 1 discriminator 2
 5295 007a 7B6E     		ldr	r3, [r7, #100]
 5296 007c 0133     		adds	r3, r3, #1
 5297 007e 7B66     		str	r3, [r7, #100]
 5298              	.L234:
1298:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5299              		.loc 1 1298 0 is_stmt 0 discriminator 1
 5300 0080 7B6E     		ldr	r3, [r7, #100]
 5301 0082 032B     		cmp	r3, #3
 5302 0084 C6D9     		bls	.L237
1305:bluetooth_rxtx.c **** 		}
1306:bluetooth_rxtx.c **** 	}
1307:bluetooth_rxtx.c **** 
1308:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1309:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5303              		.loc 1 1309 0 is_stmt 1
 5304 0086 934B     		ldr	r3, .L253
 5305 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5306 008a 9BB2     		uxth	r3, r3
 5307 008c DBB2     		uxtb	r3, r3
 5308 008e 623B     		subs	r3, r3, #98
 5309 0090 DBB2     		uxtb	r3, r3
 5310 0092 1846     		mov	r0, r3
 5311 0094 FFF7FEFF 		bl	btle_channel_index
 5312 0098 0346     		mov	r3, r0
 5313 009a 1A46     		mov	r2, r3
 5314 009c 8E4B     		ldr	r3, .L253+4
 5315 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5316 00a0 BB65     		str	r3, [r7, #88]
1310:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5317              		.loc 1 1310 0
 5318 00a2 0023     		movs	r3, #0
 5319 00a4 7B66     		str	r3, [r7, #100]
 5320 00a6 50E0     		b	.L238
 5321              	.L241:
1311:bluetooth_rxtx.c **** 		byte = data[i];
ARM GAS  /tmp/ccXEAChk.s 			page 116


 5322              		.loc 1 1311 0
 5323 00a8 7A68     		ldr	r2, [r7, #4]
 5324 00aa 7B6E     		ldr	r3, [r7, #100]
 5325 00ac 1344     		add	r3, r3, r2
 5326 00ae 1B78     		ldrb	r3, [r3]
 5327 00b0 87F85E30 		strb	r3, [r7, #94]
1312:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5328              		.loc 1 1312 0
 5329 00b4 7B6E     		ldr	r3, [r7, #100]
 5330 00b6 0433     		adds	r3, r3, #4
 5331 00b8 07F16802 		add	r2, r7, #104
 5332 00bc 1344     		add	r3, r3, r2
 5333 00be 0022     		movs	r2, #0
 5334 00c0 03F8582C 		strb	r2, [r3, #-88]
1313:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5335              		.loc 1 1313 0
 5336 00c4 0023     		movs	r3, #0
 5337 00c6 3B66     		str	r3, [r7, #96]
 5338 00c8 39E0     		b	.L239
 5339              	.L240:
1314:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5340              		.loc 1 1314 0 discriminator 3
 5341 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5342 00ce 03F00103 		and	r3, r3, #1
 5343 00d2 8249     		ldr	r1, .L253+8
 5344 00d4 BA6D     		ldr	r2, [r7, #88]
 5345 00d6 0A44     		add	r2, r2, r1
 5346 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5347 00da 5340     		eors	r3, r3, r2
 5348 00dc 7B65     		str	r3, [r7, #84]
1315:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5349              		.loc 1 1315 0 discriminator 3
 5350 00de BB6D     		ldr	r3, [r7, #88]
 5351 00e0 0133     		adds	r3, r3, #1
 5352 00e2 1946     		mov	r1, r3
 5353 00e4 7E4B     		ldr	r3, .L253+12
 5354 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5355 00ea C81A     		subs	r0, r1, r3
 5356 00ec 4008     		lsrs	r0, r0, #1
 5357 00ee 0344     		add	r3, r3, r0
 5358 00f0 9A09     		lsrs	r2, r3, #6
 5359 00f2 1346     		mov	r3, r2
 5360 00f4 DB01     		lsls	r3, r3, #7
 5361 00f6 9B1A     		subs	r3, r3, r2
 5362 00f8 CA1A     		subs	r2, r1, r3
 5363 00fa BA65     		str	r2, [r7, #88]
1316:bluetooth_rxtx.c **** 			byte >>= 1;
 5364              		.loc 1 1316 0 discriminator 3
 5365 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5366 0100 5B08     		lsrs	r3, r3, #1
 5367 0102 87F85E30 		strb	r3, [r7, #94]
1317:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5368              		.loc 1 1317 0 discriminator 3
 5369 0106 7B6E     		ldr	r3, [r7, #100]
 5370 0108 0433     		adds	r3, r3, #4
 5371 010a 7A6E     		ldr	r2, [r7, #100]
 5372 010c 0432     		adds	r2, r2, #4
ARM GAS  /tmp/ccXEAChk.s 			page 117


 5373 010e 07F16801 		add	r1, r7, #104
 5374 0112 0A44     		add	r2, r2, r1
 5375 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5376 0118 D1B2     		uxtb	r1, r2
 5377 011a 3A6E     		ldr	r2, [r7, #96]
 5378 011c C2F10702 		rsb	r2, r2, #7
 5379 0120 1046     		mov	r0, r2
 5380 0122 7A6D     		ldr	r2, [r7, #84]
 5381 0124 8240     		lsls	r2, r2, r0
 5382 0126 D2B2     		uxtb	r2, r2
 5383 0128 0A43     		orrs	r2, r2, r1
 5384 012a D2B2     		uxtb	r2, r2
 5385 012c D2B2     		uxtb	r2, r2
 5386 012e 07F16801 		add	r1, r7, #104
 5387 0132 0B44     		add	r3, r3, r1
 5388 0134 03F8582C 		strb	r2, [r3, #-88]
1313:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5389              		.loc 1 1313 0 discriminator 3
 5390 0138 3B6E     		ldr	r3, [r7, #96]
 5391 013a 0133     		adds	r3, r3, #1
 5392 013c 3B66     		str	r3, [r7, #96]
 5393              	.L239:
1313:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5394              		.loc 1 1313 0 is_stmt 0 discriminator 1
 5395 013e 3B6E     		ldr	r3, [r7, #96]
 5396 0140 072B     		cmp	r3, #7
 5397 0142 C2D9     		bls	.L240
1310:bluetooth_rxtx.c **** 		byte = data[i];
 5398              		.loc 1 1310 0 is_stmt 1 discriminator 2
 5399 0144 7B6E     		ldr	r3, [r7, #100]
 5400 0146 0133     		adds	r3, r3, #1
 5401 0148 7B66     		str	r3, [r7, #100]
 5402              	.L238:
1310:bluetooth_rxtx.c **** 		byte = data[i];
 5403              		.loc 1 1310 0 is_stmt 0 discriminator 1
 5404 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5405 014c 7B6E     		ldr	r3, [r7, #100]
 5406 014e 9A42     		cmp	r2, r3
 5407 0150 AAD8     		bhi	.L241
1318:bluetooth_rxtx.c **** 		}
1319:bluetooth_rxtx.c **** 	}
1320:bluetooth_rxtx.c **** 
1321:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5408              		.loc 1 1321 0 is_stmt 1
 5409 0152 FB7A     		ldrb	r3, [r7, #11]
 5410 0154 0433     		adds	r3, r3, #4
 5411 0156 FB72     		strb	r3, [r7, #11]
1322:bluetooth_rxtx.c **** 
1323:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1324:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5412              		.loc 1 1324 0
 5413 0158 0D20     		movs	r0, #13
 5414 015a 47F6FF71 		movw	r1, #32767
 5415 015e FFF7FEFF 		bl	cc2400_set
1325:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5416              		.loc 1 1325 0
 5417 0162 1220     		movs	r0, #18
ARM GAS  /tmp/ccXEAChk.s 			page 118


 5418 0164 42F62231 		movw	r1, #11042
 5419 0168 FFF7FEFF 		bl	cc2400_set
1326:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5420              		.loc 1 1326 0
 5421 016c 1420     		movs	r0, #20
 5422 016e 41F24B31 		movw	r1, #4939
 5423 0172 FFF7FEFF 		bl	cc2400_set
1327:bluetooth_rxtx.c **** 
1328:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5424              		.loc 1 1328 0
 5425 0176 2020     		movs	r0, #32
 5426 0178 40F60141 		movw	r1, #3073
 5427 017c FFF7FEFF 		bl	cc2400_set
1329:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1330:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1331:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1332:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1333:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1334:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1335:bluetooth_rxtx.c **** 
1336:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5428              		.loc 1 1336 0
 5429 0180 544B     		ldr	r3, .L253
 5430 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5431 0184 9BB2     		uxth	r3, r3
 5432 0186 0220     		movs	r0, #2
 5433 0188 1946     		mov	r1, r3
 5434 018a FFF7FEFF 		bl	cc2400_set
1337:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5435              		.loc 1 1337 0
 5436 018e 0520     		movs	r0, #5
 5437 0190 0B21     		movs	r1, #11
 5438 0192 FFF7FEFF 		bl	cc2400_set
1338:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5439              		.loc 1 1338 0
 5440 0196 0320     		movs	r0, #3
 5441 0198 4021     		movs	r1, #64
 5442 019a FFF7FEFF 		bl	cc2400_set
1339:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5443              		.loc 1 1339 0
 5444 019e 2320     		movs	r0, #35
 5445 01a0 1421     		movs	r1, #20
 5446 01a2 FFF7FEFF 		bl	cc2400_set
1340:bluetooth_rxtx.c **** 
1341:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1342:bluetooth_rxtx.c **** 	if (aa & 1)
 5447              		.loc 1 1342 0
 5448 01a6 FB68     		ldr	r3, [r7, #12]
 5449 01a8 03F00103 		and	r3, r3, #1
 5450 01ac 002B     		cmp	r3, #0
 5451 01ae 05D0     		beq	.L242
1343:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5452              		.loc 1 1343 0
 5453 01b0 2D20     		movs	r0, #45
 5454 01b2 4AF6AA21 		movw	r1, #43690
 5455 01b6 FFF7FEFF 		bl	cc2400_set
 5456 01ba 04E0     		b	.L243
ARM GAS  /tmp/ccXEAChk.s 			page 119


 5457              	.L242:
1344:bluetooth_rxtx.c **** 	else
1345:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5458              		.loc 1 1345 0
 5459 01bc 2D20     		movs	r0, #45
 5460 01be 45F25551 		movw	r1, #21845
 5461 01c2 FFF7FEFF 		bl	cc2400_set
 5462              	.L243:
1346:bluetooth_rxtx.c **** 
1347:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1348:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5463              		.loc 1 1348 0
 5464 01c6 0820     		movs	r0, #8
 5465 01c8 FFF7FEFF 		bl	cc2400_get
 5466 01cc 0346     		mov	r3, r0
 5467 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1349:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5468              		.loc 1 1349 0
 5469 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5470 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5471 01da 9BB2     		uxth	r3, r3
 5472 01dc 43F49C43 		orr	r3, r3, #19968
 5473 01e0 9BB2     		uxth	r3, r3
 5474 01e2 9BB2     		uxth	r3, r3
 5475 01e4 0820     		movs	r0, #8
 5476 01e6 1946     		mov	r1, r3
 5477 01e8 FFF7FEFF 		bl	cc2400_set
1350:bluetooth_rxtx.c **** 
1351:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5478              		.loc 1 1351 0
 5479 01ec 00BF     		nop
 5480              	.L244:
 5481              		.loc 1 1351 0 is_stmt 0 discriminator 1
 5482 01ee FFF7FEFF 		bl	cc2400_status
 5483 01f2 0346     		mov	r3, r0
 5484 01f4 03F04003 		and	r3, r3, #64
 5485 01f8 002B     		cmp	r3, #0
 5486 01fa F8D0     		beq	.L244
1352:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5487              		.loc 1 1352 0 is_stmt 1
 5488 01fc 6120     		movs	r0, #97
 5489 01fe FFF7FEFF 		bl	cc2400_strobe
1353:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5490              		.loc 1 1353 0
 5491 0202 00BF     		nop
 5492              	.L245:
 5493              		.loc 1 1353 0 is_stmt 0 discriminator 1
 5494 0204 FFF7FEFF 		bl	cc2400_status
 5495 0208 0346     		mov	r3, r0
 5496 020a 03F00403 		and	r3, r3, #4
 5497 020e 002B     		cmp	r3, #0
 5498 0210 F8D0     		beq	.L245
1354:bluetooth_rxtx.c **** 	TXLED_SET;
 5499              		.loc 1 1354 0 is_stmt 1
 5500 0212 344B     		ldr	r3, .L253+16
 5501 0214 4FF48072 		mov	r2, #256
 5502 0218 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 120


1355:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1356:bluetooth_rxtx.c **** 	PAEN_SET;
 5503              		.loc 1 1356 0
 5504 021a 334B     		ldr	r3, .L253+20
 5505 021c 8022     		movs	r2, #128
 5506 021e 1A60     		str	r2, [r3]
1357:bluetooth_rxtx.c **** #endif
1358:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5507              		.loc 1 1358 0
 5508 0220 00BF     		nop
 5509              	.L246:
 5510              		.loc 1 1358 0 is_stmt 0 discriminator 1
 5511 0222 0E20     		movs	r0, #14
 5512 0224 FFF7FEFF 		bl	cc2400_get
 5513 0228 0346     		mov	r3, r0
 5514 022a 03F01F03 		and	r3, r3, #31
 5515 022e 0F2B     		cmp	r3, #15
 5516 0230 F7D1     		bne	.L246
1359:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5517              		.loc 1 1359 0 is_stmt 1
 5518 0232 6320     		movs	r0, #99
 5519 0234 FFF7FEFF 		bl	cc2400_strobe
1360:bluetooth_rxtx.c **** 
1361:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1362:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5520              		.loc 1 1362 0
 5521 0238 0023     		movs	r3, #0
 5522 023a 7B66     		str	r3, [r7, #100]
 5523 023c 21E0     		b	.L247
 5524              	.L250:
1363:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5525              		.loc 1 1363 0
 5526 023e 00BF     		nop
 5527              	.L248:
 5528              		.loc 1 1363 0 is_stmt 0 discriminator 1
 5529 0240 2A4B     		ldr	r3, .L253+24
 5530 0242 1B68     		ldr	r3, [r3]
 5531 0244 03F00403 		and	r3, r3, #4
 5532 0248 002B     		cmp	r3, #0
 5533 024a F9D1     		bne	.L248
1364:bluetooth_rxtx.c **** 		tx_len = len - i;
 5534              		.loc 1 1364 0 is_stmt 1
 5535 024c 7B6E     		ldr	r3, [r7, #100]
 5536 024e DBB2     		uxtb	r3, r3
 5537 0250 FA7A     		ldrb	r2, [r7, #11]
 5538 0252 D31A     		subs	r3, r2, r3
 5539 0254 87F85F30 		strb	r3, [r7, #95]
1365:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5540              		.loc 1 1365 0
 5541 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5542 025c 102B     		cmp	r3, #16
 5543 025e 02D9     		bls	.L249
1366:bluetooth_rxtx.c **** 			tx_len = 16;
 5544              		.loc 1 1366 0
 5545 0260 1023     		movs	r3, #16
 5546 0262 87F85F30 		strb	r3, [r7, #95]
 5547              	.L249:
ARM GAS  /tmp/ccXEAChk.s 			page 121


1367:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5548              		.loc 1 1367 0 discriminator 2
 5549 0266 07F11002 		add	r2, r7, #16
 5550 026a 7B6E     		ldr	r3, [r7, #100]
 5551 026c 1344     		add	r3, r3, r2
 5552 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5553 0272 7020     		movs	r0, #112
 5554 0274 1146     		mov	r1, r2
 5555 0276 1A46     		mov	r2, r3
 5556 0278 FFF7FEFF 		bl	cc2400_spi_buf
1362:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5557              		.loc 1 1362 0 discriminator 2
 5558 027c 7B6E     		ldr	r3, [r7, #100]
 5559 027e 1033     		adds	r3, r3, #16
 5560 0280 7B66     		str	r3, [r7, #100]
 5561              	.L247:
1362:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5562              		.loc 1 1362 0 is_stmt 0 discriminator 1
 5563 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5564 0284 7B6E     		ldr	r3, [r7, #100]
 5565 0286 9A42     		cmp	r2, r3
 5566 0288 D9D8     		bhi	.L250
1368:bluetooth_rxtx.c **** 	}
1369:bluetooth_rxtx.c **** 
1370:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5567              		.loc 1 1370 0 is_stmt 1
 5568 028a 00BF     		nop
 5569              	.L251:
 5570              		.loc 1 1370 0 is_stmt 0 discriminator 1
 5571 028c 0E20     		movs	r0, #14
 5572 028e FFF7FEFF 		bl	cc2400_get
 5573 0292 0346     		mov	r3, r0
 5574 0294 03F01F03 		and	r3, r3, #31
 5575 0298 0F2B     		cmp	r3, #15
 5576 029a F7D1     		bne	.L251
1371:bluetooth_rxtx.c **** 	TXLED_CLR;
 5577              		.loc 1 1371 0 is_stmt 1
 5578 029c 144B     		ldr	r3, .L253+28
 5579 029e 4FF48072 		mov	r2, #256
 5580 02a2 1A60     		str	r2, [r3]
1372:bluetooth_rxtx.c **** 
1373:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5581              		.loc 1 1373 0
 5582 02a4 6420     		movs	r0, #100
 5583 02a6 FFF7FEFF 		bl	cc2400_strobe
1374:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5584              		.loc 1 1374 0
 5585 02aa 00BF     		nop
 5586              	.L252:
 5587              		.loc 1 1374 0 is_stmt 0 discriminator 1
 5588 02ac FFF7FEFF 		bl	cc2400_status
 5589 02b0 0346     		mov	r3, r0
 5590 02b2 03F00403 		and	r3, r3, #4
 5591 02b6 002B     		cmp	r3, #0
 5592 02b8 F8D1     		bne	.L252
1375:bluetooth_rxtx.c **** 
1376:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
ARM GAS  /tmp/ccXEAChk.s 			page 122


1377:bluetooth_rxtx.c **** 	PAEN_CLR;
 5593              		.loc 1 1377 0 is_stmt 1
 5594 02ba 0E4B     		ldr	r3, .L253+32
 5595 02bc 8022     		movs	r2, #128
 5596 02be 1A60     		str	r2, [r3]
1378:bluetooth_rxtx.c **** #endif
1379:bluetooth_rxtx.c **** 
1380:bluetooth_rxtx.c **** 	// reset GIO
1381:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5597              		.loc 1 1381 0
 5598 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5599 02c4 0820     		movs	r0, #8
 5600 02c6 1946     		mov	r1, r3
 5601 02c8 FFF7FEFF 		bl	cc2400_set
1382:bluetooth_rxtx.c **** }
 5602              		.loc 1 1382 0
 5603 02cc 6837     		adds	r7, r7, #104
 5604              		.cfi_def_cfa_offset 8
 5605 02ce BD46     		mov	sp, r7
 5606              		.cfi_def_cfa_register 13
 5607              		@ sp needed
 5608 02d0 80BD     		pop	{r7, pc}
 5609              	.L254:
 5610 02d2 00BF     		.align	2
 5611              	.L253:
 5612 02d4 00000000 		.word	channel
 5613 02d8 C0000000 		.word	whitening_index
 5614 02dc 40000000 		.word	whitening
 5615 02e0 11080402 		.word	33818641
 5616 02e4 38C00920 		.word	537509944
 5617 02e8 58C00920 		.word	537509976
 5618 02ec 54C00920 		.word	537509972
 5619 02f0 3CC00920 		.word	537509948
 5620 02f4 5CC00920 		.word	537509980
 5621              		.cfi_endproc
 5622              	.LFE23:
 5624              		.section	.text.le_jam,"ax",%progbits
 5625              		.align	2
 5626              		.global	le_jam
 5627              		.thumb
 5628              		.thumb_func
 5630              	le_jam:
 5631              	.LFB24:
1383:bluetooth_rxtx.c **** 
1384:bluetooth_rxtx.c **** void le_jam(void) {
 5632              		.loc 1 1384 0
 5633              		.cfi_startproc
 5634              		@ args = 0, pretend = 0, frame = 0
 5635              		@ frame_needed = 1, uses_anonymous_args = 0
 5636 0000 80B5     		push	{r7, lr}
 5637              		.cfi_def_cfa_offset 8
 5638              		.cfi_offset 7, -8
 5639              		.cfi_offset 14, -4
 5640 0002 00AF     		add	r7, sp, #0
 5641              		.cfi_def_cfa_register 7
1385:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1386:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
ARM GAS  /tmp/ccXEAChk.s 			page 123


 5642              		.loc 1 1386 0
 5643 0004 0D20     		movs	r0, #13
 5644 0006 47F6FF71 		movw	r1, #32767
 5645 000a FFF7FEFF 		bl	cc2400_set
1387:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5646              		.loc 1 1387 0
 5647 000e 1220     		movs	r0, #18
 5648 0010 42F62231 		movw	r1, #11042
 5649 0014 FFF7FEFF 		bl	cc2400_set
1388:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 5650              		.loc 1 1388 0
 5651 0018 1420     		movs	r0, #20
 5652 001a 42F24B31 		movw	r1, #9035
 5653 001e FFF7FEFF 		bl	cc2400_set
1389:bluetooth_rxtx.c **** 
1390:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5654              		.loc 1 1390 0
 5655 0022 2020     		movs	r0, #32
 5656 0024 40F60141 		movw	r1, #3073
 5657 0028 FFF7FEFF 		bl	cc2400_set
1391:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1392:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1393:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1394:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1395:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1396:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1397:bluetooth_rxtx.c **** 
1398:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1399:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5658              		.loc 1 1399 0
 5659 002c 0520     		movs	r0, #5
 5660 002e 0B21     		movs	r1, #11
 5661 0030 FFF7FEFF 		bl	cc2400_set
1400:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5662              		.loc 1 1400 0
 5663 0034 0320     		movs	r0, #3
 5664 0036 4021     		movs	r1, #64
 5665 0038 FFF7FEFF 		bl	cc2400_set
1401:bluetooth_rxtx.c **** 
1402:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5666              		.loc 1 1402 0
 5667 003c 00BF     		nop
 5668              	.L256:
 5669              		.loc 1 1402 0 is_stmt 0 discriminator 1
 5670 003e FFF7FEFF 		bl	cc2400_status
 5671 0042 0346     		mov	r3, r0
 5672 0044 03F04003 		and	r3, r3, #64
 5673 0048 002B     		cmp	r3, #0
 5674 004a F8D0     		beq	.L256
1403:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5675              		.loc 1 1403 0 is_stmt 1
 5676 004c 6120     		movs	r0, #97
 5677 004e FFF7FEFF 		bl	cc2400_strobe
1404:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5678              		.loc 1 1404 0
 5679 0052 00BF     		nop
 5680              	.L257:
ARM GAS  /tmp/ccXEAChk.s 			page 124


 5681              		.loc 1 1404 0 is_stmt 0 discriminator 1
 5682 0054 FFF7FEFF 		bl	cc2400_status
 5683 0058 0346     		mov	r3, r0
 5684 005a 03F00403 		and	r3, r3, #4
 5685 005e 002B     		cmp	r3, #0
 5686 0060 F8D0     		beq	.L257
1405:bluetooth_rxtx.c **** 	TXLED_SET;
 5687              		.loc 1 1405 0 is_stmt 1
 5688 0062 0A4B     		ldr	r3, .L259
 5689 0064 4FF48072 		mov	r2, #256
 5690 0068 1A60     		str	r2, [r3]
1406:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1407:bluetooth_rxtx.c **** 	PAEN_SET;
 5691              		.loc 1 1407 0
 5692 006a 094B     		ldr	r3, .L259+4
 5693 006c 8022     		movs	r2, #128
 5694 006e 1A60     		str	r2, [r3]
1408:bluetooth_rxtx.c **** #endif
1409:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5695              		.loc 1 1409 0
 5696 0070 00BF     		nop
 5697              	.L258:
 5698              		.loc 1 1409 0 is_stmt 0 discriminator 1
 5699 0072 0E20     		movs	r0, #14
 5700 0074 FFF7FEFF 		bl	cc2400_get
 5701 0078 0346     		mov	r3, r0
 5702 007a 03F01F03 		and	r3, r3, #31
 5703 007e 0F2B     		cmp	r3, #15
 5704 0080 F7D1     		bne	.L258
1410:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5705              		.loc 1 1410 0 is_stmt 1
 5706 0082 6320     		movs	r0, #99
 5707 0084 FFF7FEFF 		bl	cc2400_strobe
1411:bluetooth_rxtx.c **** #endif
1412:bluetooth_rxtx.c **** }
 5708              		.loc 1 1412 0
 5709 0088 80BD     		pop	{r7, pc}
 5710              	.L260:
 5711 008a 00BF     		.align	2
 5712              	.L259:
 5713 008c 38C00920 		.word	537509944
 5714 0090 58C00920 		.word	537509976
 5715              		.cfi_endproc
 5716              	.LFE24:
 5718              		.section	.text.hop,"ax",%progbits
 5719              		.align	2
 5720              		.global	hop
 5721              		.thumb
 5722              		.thumb_func
 5724              	hop:
 5725              	.LFB25:
1413:bluetooth_rxtx.c **** 
1414:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1415:bluetooth_rxtx.c ****  * track of this? */
1416:bluetooth_rxtx.c **** void hop(void)
1417:bluetooth_rxtx.c **** {
 5726              		.loc 1 1417 0
ARM GAS  /tmp/ccXEAChk.s 			page 125


 5727              		.cfi_startproc
 5728              		@ args = 0, pretend = 0, frame = 0
 5729              		@ frame_needed = 1, uses_anonymous_args = 0
 5730 0000 80B5     		push	{r7, lr}
 5731              		.cfi_def_cfa_offset 8
 5732              		.cfi_offset 7, -8
 5733              		.cfi_offset 14, -4
 5734 0002 00AF     		add	r7, sp, #0
 5735              		.cfi_def_cfa_register 7
1418:bluetooth_rxtx.c **** 	do_hop = 0;
 5736              		.loc 1 1418 0
 5737 0004 414B     		ldr	r3, .L272
 5738 0006 0022     		movs	r2, #0
 5739 0008 1A70     		strb	r2, [r3]
1419:bluetooth_rxtx.c **** 
1420:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1421:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5740              		.loc 1 1421 0
 5741 000a 414B     		ldr	r3, .L272+4
 5742 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5743 000e 002B     		cmp	r3, #0
 5744 0010 0BD1     		bne	.L262
1422:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 5745              		.loc 1 1422 0
 5746 0012 0220     		movs	r0, #2
 5747 0014 FFF7FEFF 		bl	cc2400_get
 5748 0018 0346     		mov	r3, r0
 5749 001a 1A46     		mov	r2, r3
 5750 001c 3D4B     		ldr	r3, .L272+8
 5751 001e 1B88     		ldrh	r3, [r3]	@ movhi
 5752 0020 9BB2     		uxth	r3, r3
 5753 0022 013B     		subs	r3, r3, #1
 5754 0024 9A42     		cmp	r2, r3
 5755 0026 47D1     		bne	.L263
1423:bluetooth_rxtx.c **** 			return;
 5756              		.loc 1 1423 0
 5757 0028 6EE0     		b	.L261
 5758              	.L262:
1424:bluetooth_rxtx.c **** 	}
1425:bluetooth_rxtx.c **** 
1426:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1427:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 5759              		.loc 1 1427 0
 5760 002a 394B     		ldr	r3, .L272+4
 5761 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5762 002e 012B     		cmp	r3, #1
 5763 0030 14D1     		bne	.L265
1428:bluetooth_rxtx.c **** 		channel += 32;
 5764              		.loc 1 1428 0
 5765 0032 384B     		ldr	r3, .L272+8
 5766 0034 1B88     		ldrh	r3, [r3]	@ movhi
 5767 0036 9BB2     		uxth	r3, r3
 5768 0038 2033     		adds	r3, r3, #32
 5769 003a 9AB2     		uxth	r2, r3
 5770 003c 354B     		ldr	r3, .L272+8
 5771 003e 1A80     		strh	r2, [r3]	@ movhi
1429:bluetooth_rxtx.c **** 		if (channel > 2480)
ARM GAS  /tmp/ccXEAChk.s 			page 126


 5772              		.loc 1 1429 0
 5773 0040 344B     		ldr	r3, .L272+8
 5774 0042 1B88     		ldrh	r3, [r3]	@ movhi
 5775 0044 9BB2     		uxth	r3, r3
 5776 0046 B3F51B6F 		cmp	r3, #2480
 5777 004a 35D9     		bls	.L263
1430:bluetooth_rxtx.c **** 			channel -= 79;
 5778              		.loc 1 1430 0
 5779 004c 314B     		ldr	r3, .L272+8
 5780 004e 1B88     		ldrh	r3, [r3]	@ movhi
 5781 0050 9BB2     		uxth	r3, r3
 5782 0052 4F3B     		subs	r3, r3, #79
 5783 0054 9AB2     		uxth	r2, r3
 5784 0056 2F4B     		ldr	r3, .L272+8
 5785 0058 1A80     		strh	r2, [r3]	@ movhi
 5786 005a 2DE0     		b	.L263
 5787              	.L265:
1431:bluetooth_rxtx.c **** 	}
1432:bluetooth_rxtx.c **** 
1433:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 5788              		.loc 1 1433 0
 5789 005c 2C4B     		ldr	r3, .L272+4
 5790 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5791 0060 022B     		cmp	r3, #2
 5792 0062 0DD1     		bne	.L267
1434:bluetooth_rxtx.c **** 		TXLED_SET;
 5793              		.loc 1 1434 0
 5794 0064 2C4B     		ldr	r3, .L272+12
 5795 0066 4FF48072 		mov	r2, #256
 5796 006a 1A60     		str	r2, [r3]
1435:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 5797              		.loc 1 1435 0
 5798 006c 2B4B     		ldr	r3, .L272+16
 5799 006e 1B68     		ldr	r3, [r3]
 5800 0070 1846     		mov	r0, r3
 5801 0072 FFF7FEFF 		bl	next_hop
 5802 0076 0346     		mov	r3, r0
 5803 0078 1A46     		mov	r2, r3
 5804 007a 264B     		ldr	r3, .L272+8
 5805 007c 1A80     		strh	r2, [r3]	@ movhi
 5806 007e 1BE0     		b	.L263
 5807              	.L267:
1436:bluetooth_rxtx.c **** 	}
1437:bluetooth_rxtx.c **** 
1438:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 5808              		.loc 1 1438 0
 5809 0080 234B     		ldr	r3, .L272+4
 5810 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5811 0084 032B     		cmp	r3, #3
 5812 0086 0BD1     		bne	.L268
1439:bluetooth_rxtx.c **** 		TXLED_SET;
 5813              		.loc 1 1439 0
 5814 0088 234B     		ldr	r3, .L272+12
 5815 008a 4FF48072 		mov	r2, #256
 5816 008e 1A60     		str	r2, [r3]
1440:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 5817              		.loc 1 1440 0
ARM GAS  /tmp/ccXEAChk.s 			page 127


 5818 0090 2348     		ldr	r0, .L272+20
 5819 0092 FFF7FEFF 		bl	btle_next_hop
 5820 0096 0346     		mov	r3, r0
 5821 0098 1A46     		mov	r2, r3
 5822 009a 1E4B     		ldr	r3, .L272+8
 5823 009c 1A80     		strh	r2, [r3]	@ movhi
 5824 009e 0BE0     		b	.L263
 5825              	.L268:
1441:bluetooth_rxtx.c **** 	}
1442:bluetooth_rxtx.c **** 
1443:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 5826              		.loc 1 1443 0
 5827 00a0 1B4B     		ldr	r3, .L272+4
 5828 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5829 00a4 042B     		cmp	r3, #4
 5830 00a6 07D1     		bne	.L263
1444:bluetooth_rxtx.c **** 		TXLED_SET;
 5831              		.loc 1 1444 0
 5832 00a8 1B4B     		ldr	r3, .L272+12
 5833 00aa 4FF48072 		mov	r2, #256
 5834 00ae 1A60     		str	r2, [r3]
1445:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 5835              		.loc 1 1445 0
 5836 00b0 1C4B     		ldr	r3, .L272+24
 5837 00b2 1A88     		ldrh	r2, [r3]
 5838 00b4 174B     		ldr	r3, .L272+8
 5839 00b6 1A80     		strh	r2, [r3]	@ movhi
 5840              	.L263:
1446:bluetooth_rxtx.c **** 	}
1447:bluetooth_rxtx.c **** 
1448:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1449:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5841              		.loc 1 1449 0
 5842 00b8 6420     		movs	r0, #100
 5843 00ba FFF7FEFF 		bl	cc2400_strobe
1450:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5844              		.loc 1 1450 0
 5845 00be 00BF     		nop
 5846              	.L269:
 5847              		.loc 1 1450 0 is_stmt 0 discriminator 1
 5848 00c0 FFF7FEFF 		bl	cc2400_status
 5849 00c4 0346     		mov	r3, r0
 5850 00c6 03F00403 		and	r3, r3, #4
 5851 00ca 002B     		cmp	r3, #0
 5852 00cc F8D1     		bne	.L269
1451:bluetooth_rxtx.c **** 
1452:bluetooth_rxtx.c **** 	/* Retune */
1453:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5853              		.loc 1 1453 0 is_stmt 1
 5854 00ce 114B     		ldr	r3, .L272+8
 5855 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 5856 00d2 9BB2     		uxth	r3, r3
 5857 00d4 013B     		subs	r3, r3, #1
 5858 00d6 9BB2     		uxth	r3, r3
 5859 00d8 0220     		movs	r0, #2
 5860 00da 1946     		mov	r1, r3
 5861 00dc FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccXEAChk.s 			page 128


1454:bluetooth_rxtx.c **** 	
1455:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1456:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 5862              		.loc 1 1456 0
 5863 00e0 0B4B     		ldr	r3, .L272+4
 5864 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5865 00e4 002B     		cmp	r3, #0
 5866 00e6 01D0     		beq	.L270
1457:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 5867              		.loc 1 1457 0
 5868 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 5869              	.L270:
1458:bluetooth_rxtx.c **** 	}
1459:bluetooth_rxtx.c **** 
1460:bluetooth_rxtx.c **** 	/* Wait for lock */
1461:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5870              		.loc 1 1461 0
 5871 00ec 6120     		movs	r0, #97
 5872 00ee FFF7FEFF 		bl	cc2400_strobe
1462:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5873              		.loc 1 1462 0
 5874 00f2 00BF     		nop
 5875              	.L271:
 5876              		.loc 1 1462 0 is_stmt 0 discriminator 1
 5877 00f4 FFF7FEFF 		bl	cc2400_status
 5878 00f8 0346     		mov	r3, r0
 5879 00fa 03F00403 		and	r3, r3, #4
 5880 00fe 002B     		cmp	r3, #0
 5881 0100 F8D0     		beq	.L271
1463:bluetooth_rxtx.c **** 	
1464:bluetooth_rxtx.c **** 	/* RX mode */
1465:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5882              		.loc 1 1465 0 is_stmt 1
 5883 0102 6220     		movs	r0, #98
 5884 0104 FFF7FEFF 		bl	cc2400_strobe
 5885              	.L261:
1466:bluetooth_rxtx.c **** 
1467:bluetooth_rxtx.c **** }
 5886              		.loc 1 1467 0
 5887 0108 80BD     		pop	{r7, pc}
 5888              	.L273:
 5889 010a 00BF     		.align	2
 5890              	.L272:
 5891 010c 00000000 		.word	do_hop
 5892 0110 00000000 		.word	hop_mode
 5893 0114 00000000 		.word	channel
 5894 0118 38C00920 		.word	537509944
 5895 011c 00000000 		.word	clkn
 5896 0120 00000000 		.word	le
 5897 0124 00000000 		.word	hop_direct_channel
 5898              		.cfi_endproc
 5899              	.LFE25:
 5901              		.section	.text.bt_stream_rx,"ax",%progbits
 5902              		.align	2
 5903              		.global	bt_stream_rx
 5904              		.thumb
 5905              		.thumb_func
ARM GAS  /tmp/ccXEAChk.s 			page 129


 5907              	bt_stream_rx:
 5908              	.LFB26:
1468:bluetooth_rxtx.c **** 
1469:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1470:bluetooth_rxtx.c **** // wpson
1471:bluetooth_rxtx.c **** void bt_stream_rx()
1472:bluetooth_rxtx.c **** {
 5909              		.loc 1 1472 0
 5910              		.cfi_startproc
 5911              		@ args = 0, pretend = 0, frame = 136
 5912              		@ frame_needed = 1, uses_anonymous_args = 0
 5913 0000 90B5     		push	{r4, r7, lr}
 5914              		.cfi_def_cfa_offset 12
 5915              		.cfi_offset 4, -12
 5916              		.cfi_offset 7, -8
 5917              		.cfi_offset 14, -4
 5918 0002 A3B0     		sub	sp, sp, #140
 5919              		.cfi_def_cfa_offset 152
 5920 0004 00AF     		add	r7, sp, #0
 5921              		.cfi_def_cfa_register 7
1473:bluetooth_rxtx.c **** //	TXLED_SET;
1474:bluetooth_rxtx.c **** 	RXLED_CLR;
 5922              		.loc 1 1474 0
 5923 0006 C04B     		ldr	r3, .L300
 5924 0008 1022     		movs	r2, #16
 5925 000a 1A60     		str	r2, [r3]
1475:bluetooth_rxtx.c **** 	int i;
1476:bluetooth_rxtx.c **** 	
1477:bluetooth_rxtx.c **** 	u8 rssi_buf[DMA_SIZE];
1478:bluetooth_rxtx.c **** 	queue_init();
 5926              		.loc 1 1478 0
 5927 000c FFF7FEFF 		bl	queue_init
1479:bluetooth_rxtx.c **** 	dio_ssp_init();
 5928              		.loc 1 1479 0
 5929 0010 FFF7FEFF 		bl	dio_ssp_init
1480:bluetooth_rxtx.c **** 	dma_init_le();
 5930              		.loc 1 1480 0
 5931 0014 FFF7FEFF 		bl	dma_init_le
1481:bluetooth_rxtx.c **** 	dio_ssp_start();
 5932              		.loc 1 1481 0
 5933 0018 FFF7FEFF 		bl	dio_ssp_start
1482:bluetooth_rxtx.c **** 	
1483:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 5934              		.loc 1 1483 0
 5935 001c 0D20     		movs	r0, #13
 5936 001e 47F6FF71 		movw	r1, #32767
 5937 0022 FFF7FEFF 		bl	cc2400_set
1484:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5938              		.loc 1 1484 0
 5939 0026 1220     		movs	r0, #18
 5940 0028 42F62231 		movw	r1, #11042
 5941 002c FFF7FEFF 		bl	cc2400_set
1485:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 5942              		.loc 1 1485 0
 5943 0030 1420     		movs	r0, #20
 5944 0032 41F24B21 		movw	r1, #4683
 5945 0036 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccXEAChk.s 			page 130


1486:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 5946              		.loc 1 1486 0
 5947 003a 2020     		movs	r0, #32
 5948 003c 40F26151 		movw	r1, #1377
 5949 0040 FFF7FEFF 		bl	cc2400_set
1487:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 5950              		.loc 1 1487 0
 5951 0044 0320     		movs	r0, #3
 5952 0046 4021     		movs	r1, #64
 5953 0048 FFF7FEFF 		bl	cc2400_set
1488:bluetooth_rxtx.c **** 
1489:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1490:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1491:bluetooth_rxtx.c **** 	
1492:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 5954              		.loc 1 1492 0
 5955 004c AF48     		ldr	r0, .L300+4
 5956 004e FFF7FEFF 		bl	rbit
 5957 0052 0346     		mov	r3, r0
 5958 0054 9BB2     		uxth	r3, r3
 5959 0056 2C20     		movs	r0, #44
 5960 0058 1946     		mov	r1, r3
 5961 005a FFF7FEFF 		bl	cc2400_set
1493:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 5962              		.loc 1 1493 0
 5963 005e AB48     		ldr	r0, .L300+4
 5964 0060 FFF7FEFF 		bl	rbit
 5965 0064 0346     		mov	r3, r0
 5966 0066 1B0C     		lsrs	r3, r3, #16
 5967 0068 9BB2     		uxth	r3, r3
 5968 006a 2D20     		movs	r0, #45
 5969 006c 1946     		mov	r1, r3
 5970 006e FFF7FEFF 		bl	cc2400_set
1494:bluetooth_rxtx.c **** 	
1495:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1496:bluetooth_rxtx.c **** 	PAEN_SET;
 5971              		.loc 1 1496 0
 5972 0072 A74B     		ldr	r3, .L300+8
 5973 0074 8022     		movs	r2, #128
 5974 0076 1A60     		str	r2, [r3]
1497:bluetooth_rxtx.c **** //	HGM_SET;
1498:bluetooth_rxtx.c **** #endif
1499:bluetooth_rxtx.c **** 
1500:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5975              		.loc 1 1500 0
 5976 0078 00BF     		nop
 5977              	.L275:
 5978              		.loc 1 1500 0 is_stmt 0 discriminator 1
 5979 007a FFF7FEFF 		bl	cc2400_status
 5980 007e 0346     		mov	r3, r0
 5981 0080 03F04003 		and	r3, r3, #64
 5982 0084 002B     		cmp	r3, #0
 5983 0086 F8D0     		beq	.L275
1501:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5984              		.loc 1 1501 0 is_stmt 1
 5985 0088 00BF     		nop
 5986              	.L276:
ARM GAS  /tmp/ccXEAChk.s 			page 131


 5987              		.loc 1 1501 0 is_stmt 0 discriminator 1
 5988 008a FFF7FEFF 		bl	cc2400_status
 5989 008e 0346     		mov	r3, r0
 5990 0090 03F00403 		and	r3, r3, #4
 5991 0094 002B     		cmp	r3, #0
 5992 0096 F8D1     		bne	.L276
1502:bluetooth_rxtx.c **** 
1503:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5993              		.loc 1 1503 0 is_stmt 1
 5994 0098 9E4B     		ldr	r3, .L300+12
 5995 009a 1B88     		ldrh	r3, [r3]	@ movhi
 5996 009c 9BB2     		uxth	r3, r3
 5997 009e 013B     		subs	r3, r3, #1
 5998 00a0 9BB2     		uxth	r3, r3
 5999 00a2 0220     		movs	r0, #2
 6000 00a4 1946     		mov	r1, r3
 6001 00a6 FFF7FEFF 		bl	cc2400_set
1504:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6002              		.loc 1 1504 0
 6003 00aa 6120     		movs	r0, #97
 6004 00ac FFF7FEFF 		bl	cc2400_strobe
1505:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6005              		.loc 1 1505 0
 6006 00b0 00BF     		nop
 6007              	.L277:
 6008              		.loc 1 1505 0 is_stmt 0 discriminator 1
 6009 00b2 FFF7FEFF 		bl	cc2400_status
 6010 00b6 0346     		mov	r3, r0
 6011 00b8 03F00403 		and	r3, r3, #4
 6012 00bc 002B     		cmp	r3, #0
 6013 00be F8D0     		beq	.L277
1506:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6014              		.loc 1 1506 0 is_stmt 1
 6015 00c0 6220     		movs	r0, #98
 6016 00c2 FFF7FEFF 		bl	cc2400_strobe
1507:bluetooth_rxtx.c **** 	
1508:bluetooth_rxtx.c **** //	cc2400_rx();
1509:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 6017              		.loc 1 1509 0
 6018 00c6 56E1     		b	.L278
 6019              	.L299:
 6020              	.LBB3:
1510:bluetooth_rxtx.c **** 		
1511:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 6021              		.loc 1 1511 0
 6022 00c8 00BF     		nop
 6023              	.L279:
 6024              		.loc 1 1511 0 is_stmt 0 discriminator 1
 6025 00ca FFF7FEFF 		bl	cc2400_status
 6026 00ce 0346     		mov	r3, r0
 6027 00d0 03F01003 		and	r3, r3, #16
 6028 00d4 002B     		cmp	r3, #0
 6029 00d6 F8D0     		beq	.L279
1512:bluetooth_rxtx.c **** /*		int out;
1513:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1514:bluetooth_rxtx.c ****                 if (rssi >= 128)
1515:bluetooth_rxtx.c ****                         out = rssi - 256;
ARM GAS  /tmp/ccXEAChk.s 			page 132


1516:bluetooth_rxtx.c ****                 else
1517:bluetooth_rxtx.c ****                         out = rssi;
1518:bluetooth_rxtx.c ****                 if (out < 0)
1519:bluetooth_rxtx.c **** 		  goto rx_flush;
1520:bluetooth_rxtx.c **** */
1521:bluetooth_rxtx.c **** 		rssi_sum = 0;
 6030              		.loc 1 1521 0 is_stmt 1
 6031 00d8 8F4B     		ldr	r3, .L300+16
 6032 00da 0022     		movs	r2, #0
 6033 00dc 1A60     		str	r2, [r3]
1522:bluetooth_rxtx.c **** 		rssi_count = 5;
 6034              		.loc 1 1522 0
 6035 00de 8F4B     		ldr	r3, .L300+20
 6036 00e0 0522     		movs	r2, #5
 6037 00e2 1A70     		strb	r2, [r3]
1523:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6038              		.loc 1 1523 0
 6039 00e4 0023     		movs	r3, #0
 6040 00e6 C7F88430 		str	r3, [r7, #132]
 6041 00ea 11E0     		b	.L280
 6042              	.L281:
1524:bluetooth_rxtx.c **** 		{
1525:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 6043              		.loc 1 1525 0 discriminator 3
 6044 00ec 0620     		movs	r0, #6
 6045 00ee FFF7FEFF 		bl	cc2400_get
 6046 00f2 0346     		mov	r3, r0
 6047 00f4 1B0A     		lsrs	r3, r3, #8
 6048 00f6 9BB2     		uxth	r3, r3
 6049 00f8 DBB2     		uxtb	r3, r3
 6050 00fa 5AB2     		sxtb	r2, r3
 6051 00fc 864B     		ldr	r3, .L300+16
 6052 00fe 1B68     		ldr	r3, [r3]
 6053 0100 1344     		add	r3, r3, r2
 6054 0102 854A     		ldr	r2, .L300+16
 6055 0104 1360     		str	r3, [r2]
1523:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6056              		.loc 1 1523 0 discriminator 3
 6057 0106 D7F88430 		ldr	r3, [r7, #132]
 6058 010a 0133     		adds	r3, r3, #1
 6059 010c C7F88430 		str	r3, [r7, #132]
 6060              	.L280:
1523:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6061              		.loc 1 1523 0 is_stmt 0 discriminator 1
 6062 0110 824B     		ldr	r3, .L300+20
 6063 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6064 0114 1A46     		mov	r2, r3
 6065 0116 D7F88430 		ldr	r3, [r7, #132]
 6066 011a 9A42     		cmp	r2, r3
 6067 011c E6DC     		bgt	.L281
1526:bluetooth_rxtx.c **** 		}
1527:bluetooth_rxtx.c **** 	
1528:bluetooth_rxtx.c **** 		while (!rx_tc);
 6068              		.loc 1 1528 0 is_stmt 1
 6069 011e 00BF     		nop
 6070              	.L282:
 6071              		.loc 1 1528 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccXEAChk.s 			page 133


 6072 0120 7F4B     		ldr	r3, .L300+24
 6073 0122 1B68     		ldr	r3, [r3]
 6074 0124 002B     		cmp	r3, #0
 6075 0126 FBD0     		beq	.L282
1529:bluetooth_rxtx.c **** 	
1530:bluetooth_rxtx.c **** 		RXLED_SET;
 6076              		.loc 1 1530 0 is_stmt 1
 6077 0128 7E4B     		ldr	r3, .L300+28
 6078 012a 1022     		movs	r2, #16
 6079 012c 1A60     		str	r2, [r3]
1531:bluetooth_rxtx.c **** 		if (rx_err) {
 6080              		.loc 1 1531 0
 6081 012e 7E4B     		ldr	r3, .L300+32
 6082 0130 1B68     		ldr	r3, [r3]
 6083 0132 002B     		cmp	r3, #0
 6084 0134 07D0     		beq	.L283
1532:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 6085              		.loc 1 1532 0
 6086 0136 7D4B     		ldr	r3, .L300+36
 6087 0138 1B78     		ldrb	r3, [r3]
 6088 013a DBB2     		uxtb	r3, r3
 6089 013c 43F00203 		orr	r3, r3, #2
 6090 0140 DAB2     		uxtb	r2, r3
 6091 0142 7A4B     		ldr	r3, .L300+36
 6092 0144 1A70     		strb	r2, [r3]
 6093              	.L283:
1533:bluetooth_rxtx.c **** 		}	
1534:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6094              		.loc 1 1534 0
 6095 0146 764B     		ldr	r3, .L300+24
 6096 0148 1B68     		ldr	r3, [r3]
 6097 014a 012B     		cmp	r3, #1
 6098 014c 07D9     		bls	.L284
1535:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6099              		.loc 1 1535 0
 6100 014e 774B     		ldr	r3, .L300+36
 6101 0150 1B78     		ldrb	r3, [r3]
 6102 0152 DBB2     		uxtb	r3, r3
 6103 0154 43F00103 		orr	r3, r3, #1
 6104 0158 DAB2     		uxtb	r2, r3
 6105 015a 744B     		ldr	r3, .L300+36
 6106 015c 1A70     		strb	r2, [r3]
 6107              	.L284:
1536:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1537:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6108              		.loc 1 1537 0
 6109 015e 3B1D     		adds	r3, r7, #4
 6110 0160 C7F88030 		str	r3, [r7, #128]
1538:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 6111              		.loc 1 1538 0
 6112 0164 724B     		ldr	r3, .L300+40
 6113 0166 1B68     		ldr	r3, [r3]
 6114 0168 7B60     		str	r3, [r7, #4]
1539:bluetooth_rxtx.c **** 
1540:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 6115              		.loc 1 1540 0
 6116 016a 00BF     		nop
ARM GAS  /tmp/ccXEAChk.s 			page 134


 6117              	.L286:
 6118              		.loc 1 1540 0 is_stmt 0 discriminator 2
 6119 016c 714B     		ldr	r3, .L300+44
 6120 016e 1B68     		ldr	r3, [r3]
 6121 0170 03F00103 		and	r3, r3, #1
 6122 0174 002B     		cmp	r3, #0
 6123 0176 03D0     		beq	.L285
 6124              		.loc 1 1540 0 discriminator 1
 6125 0178 6B4B     		ldr	r3, .L300+32
 6126 017a 1B68     		ldr	r3, [r3]
 6127 017c 002B     		cmp	r3, #0
 6128 017e F5D0     		beq	.L286
 6129              	.L285:
1541:bluetooth_rxtx.c ****                 
1542:bluetooth_rxtx.c **** 			
1543:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6130              		.loc 1 1543 0 is_stmt 1
 6131 0180 6D4A     		ldr	r2, .L300+48
 6132 0182 6D4B     		ldr	r3, .L300+48
 6133 0184 1B68     		ldr	r3, [r3]
 6134 0186 23F00103 		bic	r3, r3, #1
 6135 018a 1360     		str	r3, [r2]
1544:bluetooth_rxtx.c **** 	
1545:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 6136              		.loc 1 1545 0
 6137 018c 614B     		ldr	r3, .L300+12
 6138 018e 1B88     		ldrh	r3, [r3]	@ movhi
 6139 0190 9BB2     		uxth	r3, r3
 6140 0192 DBB2     		uxtb	r3, r3
 6141 0194 623B     		subs	r3, r3, #98
 6142 0196 DBB2     		uxtb	r3, r3
 6143 0198 1846     		mov	r0, r3
 6144 019a FFF7FEFF 		bl	btle_channel_index
 6145 019e 0346     		mov	r3, r0
 6146 01a0 1A46     		mov	r2, r3
 6147 01a2 1346     		mov	r3, r2
 6148 01a4 5B00     		lsls	r3, r3, #1
 6149 01a6 1344     		add	r3, r3, r2
 6150 01a8 1B01     		lsls	r3, r3, #4
 6151 01aa 644A     		ldr	r2, .L300+52
 6152 01ac 1344     		add	r3, r3, r2
 6153 01ae FB67     		str	r3, [r7, #124]
1546:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 6154              		.loc 1 1546 0
 6155 01b0 0023     		movs	r3, #0
 6156 01b2 C7F88430 		str	r3, [r7, #132]
 6157 01b6 3CE0     		b	.L287
 6158              	.L290:
 6159              	.LBB4:
1547:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6160              		.loc 1 1547 0 discriminator 3
 6161 01b8 614A     		ldr	r2, .L300+56
 6162 01ba D7F88430 		ldr	r3, [r7, #132]
 6163 01be 1344     		add	r3, r3, r2
 6164 01c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6165 01c2 1A06     		lsls	r2, r3, #24
1548:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
ARM GAS  /tmp/ccXEAChk.s 			page 135


 6166              		.loc 1 1548 0 discriminator 3
 6167 01c4 D7F88430 		ldr	r3, [r7, #132]
 6168 01c8 0133     		adds	r3, r3, #1
 6169 01ca 5D49     		ldr	r1, .L300+56
 6170 01cc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6171 01ce 1B04     		lsls	r3, r3, #16
 6172 01d0 1A43     		orrs	r2, r2, r3
1549:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 6173              		.loc 1 1549 0 discriminator 3
 6174 01d2 D7F88430 		ldr	r3, [r7, #132]
 6175 01d6 0233     		adds	r3, r3, #2
 6176 01d8 5949     		ldr	r1, .L300+56
 6177 01da CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6178 01dc 1B02     		lsls	r3, r3, #8
 6179 01de 1343     		orrs	r3, r3, r2
1550:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 6180              		.loc 1 1550 0 discriminator 3
 6181 01e0 D7F88420 		ldr	r2, [r7, #132]
 6182 01e4 0332     		adds	r2, r2, #3
 6183 01e6 5649     		ldr	r1, .L300+56
 6184 01e8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 6185 01ea 1343     		orrs	r3, r3, r2
1547:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 6186              		.loc 1 1547 0 discriminator 3
 6187 01ec BB67     		str	r3, [r7, #120]
1551:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 6188              		.loc 1 1551 0 discriminator 3
 6189 01ee D7F88430 		ldr	r3, [r7, #132]
 6190 01f2 002B     		cmp	r3, #0
 6191 01f4 00DA     		bge	.L288
 6192 01f6 0333     		adds	r3, r3, #3
 6193              	.L288:
 6194 01f8 9B10     		asrs	r3, r3, #2
 6195 01fa 5C1C     		adds	r4, r3, #1
 6196 01fc B86F     		ldr	r0, [r7, #120]
 6197 01fe FFF7FEFF 		bl	rbit
 6198 0202 0146     		mov	r1, r0
 6199 0204 D7F88430 		ldr	r3, [r7, #132]
 6200 0208 002B     		cmp	r3, #0
 6201 020a 00DA     		bge	.L289
 6202 020c 0333     		adds	r3, r3, #3
 6203              	.L289:
 6204 020e 9B10     		asrs	r3, r3, #2
 6205 0210 9B00     		lsls	r3, r3, #2
 6206 0212 FA6F     		ldr	r2, [r7, #124]
 6207 0214 1344     		add	r3, r3, r2
 6208 0216 1B68     		ldr	r3, [r3]
 6209 0218 81EA0302 		eor	r2, r1, r3
 6210 021c A300     		lsls	r3, r4, #2
 6211 021e 07F18801 		add	r1, r7, #136
 6212 0222 0B44     		add	r3, r3, r1
 6213 0224 43F8842C 		str	r2, [r3, #-132]
 6214              	.LBE4:
1546:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6215              		.loc 1 1546 0 discriminator 3
 6216 0228 D7F88430 		ldr	r3, [r7, #132]
 6217 022c 0433     		adds	r3, r3, #4
ARM GAS  /tmp/ccXEAChk.s 			page 136


 6218 022e C7F88430 		str	r3, [r7, #132]
 6219              	.L287:
1546:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6220              		.loc 1 1546 0 is_stmt 0 discriminator 1
 6221 0232 D7F88430 		ldr	r3, [r7, #132]
 6222 0236 2B2B     		cmp	r3, #43
 6223 0238 BEDD     		ble	.L290
1552:bluetooth_rxtx.c **** 		}
1553:bluetooth_rxtx.c **** 
1554:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
1555:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
1556:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
1557:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
1558:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
1559:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1560:bluetooth_rxtx.c **** 		}
1561:bluetooth_rxtx.c **** */
1562:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 6224              		.loc 1 1562 0 is_stmt 1
 6225 023a D7F88030 		ldr	r3, [r7, #128]
 6226 023e 0533     		adds	r3, r3, #5
 6227 0240 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6228 0242 03F03F03 		and	r3, r3, #63
 6229 0246 0233     		adds	r3, r3, #2
 6230 0248 7B67     		str	r3, [r7, #116]
1563:bluetooth_rxtx.c **** 		
1564:bluetooth_rxtx.c **** 		if (len > 39)
 6231              		.loc 1 1564 0
 6232 024a 7B6F     		ldr	r3, [r7, #116]
 6233 024c 272B     		cmp	r3, #39
 6234 024e 00D9     		bls	.L291
1565:bluetooth_rxtx.c **** 			goto rx_flush;
 6235              		.loc 1 1565 0
 6236 0250 34E0     		b	.L292
 6237              	.L291:
1566:bluetooth_rxtx.c **** 
1567:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 6238              		.loc 1 1567 0
 6239 0252 374B     		ldr	r3, .L300+40
 6240 0254 D968     		ldr	r1, [r3, #12]
 6241 0256 D7F88030 		ldr	r3, [r7, #128]
 6242 025a 1A1D     		adds	r2, r3, #4
 6243 025c 7B6F     		ldr	r3, [r7, #116]
 6244 025e 0846     		mov	r0, r1
 6245 0260 1146     		mov	r1, r2
 6246 0262 1A46     		mov	r2, r3
 6247 0264 FFF7FEFF 		bl	btle_crcgen_lut
 6248 0268 3867     		str	r0, [r7, #112]
1568:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 6249              		.loc 1 1568 0
 6250 026a 7B6F     		ldr	r3, [r7, #116]
 6251 026c 0633     		adds	r3, r3, #6
 6252 026e D7F88020 		ldr	r2, [r7, #128]
 6253 0272 1344     		add	r3, r3, r2
 6254 0274 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6255 0276 1A04     		lsls	r2, r3, #16
1569:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
ARM GAS  /tmp/ccXEAChk.s 			page 137


 6256              		.loc 1 1569 0
 6257 0278 7B6F     		ldr	r3, [r7, #116]
 6258 027a 0533     		adds	r3, r3, #5
 6259 027c D7F88010 		ldr	r1, [r7, #128]
 6260 0280 0B44     		add	r3, r3, r1
 6261 0282 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6262 0284 1B02     		lsls	r3, r3, #8
 6263 0286 1343     		orrs	r3, r3, r2
1570:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 6264              		.loc 1 1570 0
 6265 0288 7A6F     		ldr	r2, [r7, #116]
 6266 028a 0432     		adds	r2, r2, #4
 6267 028c D7F88010 		ldr	r1, [r7, #128]
 6268 0290 0A44     		add	r2, r2, r1
 6269 0292 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6270 0294 1343     		orrs	r3, r3, r2
1568:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 6271              		.loc 1 1568 0
 6272 0296 FB66     		str	r3, [r7, #108]
1571:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 6273              		.loc 1 1571 0
 6274 0298 3A6F     		ldr	r2, [r7, #112]
 6275 029a FB6E     		ldr	r3, [r7, #108]
 6276 029c 9A42     		cmp	r2, r3
 6277 029e 00D0     		beq	.L293
1572:bluetooth_rxtx.c ****                         goto rx_flush;
 6278              		.loc 1 1572 0
 6279 02a0 0CE0     		b	.L292
 6280              	.L293:
1573:bluetooth_rxtx.c **** 
1574:bluetooth_rxtx.c **** 
1575:bluetooth_rxtx.c **** 		enqueue (BR_PACKET, (uint8_t*)packet);
 6281              		.loc 1 1575 0
 6282 02a2 3B1D     		adds	r3, r7, #4
 6283 02a4 0020     		movs	r0, #0
 6284 02a6 1946     		mov	r1, r3
 6285 02a8 FFF7FEFF 		bl	enqueue
1576:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
1577:bluetooth_rxtx.c **** 		handle_usb(clkn);
 6286              		.loc 1 1577 0
 6287 02ac 254B     		ldr	r3, .L300+60
 6288 02ae 1B68     		ldr	r3, [r3]
 6289 02b0 1846     		mov	r0, r3
 6290 02b2 FFF7FEFF 		bl	handle_usb
1578:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
1579:bluetooth_rxtx.c **** //		handle_usb(clkn);
1580:bluetooth_rxtx.c **** 		RXLED_CLR;
 6291              		.loc 1 1580 0
 6292 02b6 144B     		ldr	r3, .L300
 6293 02b8 1022     		movs	r2, #16
 6294 02ba 1A60     		str	r2, [r3]
 6295              	.L292:
1581:bluetooth_rxtx.c **** 	       
1582:bluetooth_rxtx.c **** 	rx_flush:
1583:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 6296              		.loc 1 1583 0
 6297 02bc 6420     		movs	r0, #100
ARM GAS  /tmp/ccXEAChk.s 			page 138


 6298 02be FFF7FEFF 		bl	cc2400_strobe
1584:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 6299              		.loc 1 1584 0
 6300 02c2 00BF     		nop
 6301              	.L294:
 6302              		.loc 1 1584 0 is_stmt 0 discriminator 1
 6303 02c4 FFF7FEFF 		bl	cc2400_status
 6304 02c8 0346     		mov	r3, r0
 6305 02ca 03F00403 		and	r3, r3, #4
 6306 02ce 002B     		cmp	r3, #0
 6307 02d0 F8D1     		bne	.L294
1585:bluetooth_rxtx.c **** 
1586:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 6308              		.loc 1 1586 0 is_stmt 1
 6309 02d2 00BF     		nop
 6310              	.L295:
 6311              		.loc 1 1586 0 is_stmt 0 discriminator 1
 6312 02d4 FFF7FEFF 		bl	cc2400_status
 6313 02d8 0346     		mov	r3, r0
 6314 02da 03F04003 		and	r3, r3, #64
 6315 02de 002B     		cmp	r3, #0
 6316 02e0 F8D0     		beq	.L295
1587:bluetooth_rxtx.c **** 
1588:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 6317              		.loc 1 1588 0 is_stmt 1
 6318 02e2 6120     		movs	r0, #97
 6319 02e4 FFF7FEFF 		bl	cc2400_strobe
1589:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 6320              		.loc 1 1589 0
 6321 02e8 00BF     		nop
 6322              	.L296:
 6323              		.loc 1 1589 0 is_stmt 0 discriminator 1
 6324 02ea FFF7FEFF 		bl	cc2400_status
 6325 02ee 0346     		mov	r3, r0
 6326 02f0 03F00403 		and	r3, r3, #4
 6327 02f4 002B     		cmp	r3, #0
 6328 02f6 F8D0     		beq	.L296
1590:bluetooth_rxtx.c **** 
1591:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6329              		.loc 1 1591 0 is_stmt 1
 6330 02f8 0F4A     		ldr	r2, .L300+48
 6331 02fa 0F4B     		ldr	r3, .L300+48
 6332 02fc 1B68     		ldr	r3, [r3]
 6333 02fe 23F00103 		bic	r3, r3, #1
 6334 0302 1360     		str	r3, [r2]
1592:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6335              		.loc 1 1592 0
 6336 0304 24E0     		b	.L297
 6337              	.L301:
 6338 0306 00BF     		.align	2
 6339              	.L300:
 6340 0308 3CC00920 		.word	537509948
 6341 030c D6BE898E 		.word	-1903575338
 6342 0310 58C00920 		.word	537509976
 6343 0314 00000000 		.word	channel
 6344 0318 00000000 		.word	rssi_sum
 6345 031c 00000000 		.word	rssi_count
ARM GAS  /tmp/ccXEAChk.s 			page 139


 6346 0320 00000000 		.word	rx_tc
 6347 0324 38C00920 		.word	537509944
 6348 0328 00000000 		.word	rx_err
 6349 032c 00000000 		.word	status
 6350 0330 00000000 		.word	le
 6351 0334 10410050 		.word	1342193936
 6352 0338 24000340 		.word	1073938468
 6353 033c 10010000 		.word	whitening_word
 6354 0340 00000000 		.word	rxbuf1
 6355 0344 00000000 		.word	clkn
 6356              	.L298:
 6357              	.LBB5:
1593:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 6358              		.loc 1 1593 0
 6359 0348 114B     		ldr	r3, .L302
 6360 034a 1B68     		ldr	r3, [r3]
 6361 034c 87F86B30 		strb	r3, [r7, #107]
 6362              	.L297:
 6363              	.LBE5:
1592:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6364              		.loc 1 1592 0
 6365 0350 104B     		ldr	r3, .L302+4
 6366 0352 1B68     		ldr	r3, [r3]
 6367 0354 03F00403 		and	r3, r3, #4
 6368 0358 002B     		cmp	r3, #0
 6369 035a F5D1     		bne	.L298
1594:bluetooth_rxtx.c ****                 }
1595:bluetooth_rxtx.c **** 		dma_init_le();
 6370              		.loc 1 1595 0
 6371 035c FFF7FEFF 		bl	dma_init_le
1596:bluetooth_rxtx.c **** 		dio_ssp_start();
 6372              		.loc 1 1596 0
 6373 0360 FFF7FEFF 		bl	dio_ssp_start
1597:bluetooth_rxtx.c **** 		
1598:bluetooth_rxtx.c **** //              msleep(500);    
1599:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 6374              		.loc 1 1599 0
 6375 0364 6220     		movs	r0, #98
 6376 0366 FFF7FEFF 		bl	cc2400_strobe
1600:bluetooth_rxtx.c **** 		rx_tc = 0;
 6377              		.loc 1 1600 0
 6378 036a 0B4B     		ldr	r3, .L302+8
 6379 036c 0022     		movs	r2, #0
 6380 036e 1A60     		str	r2, [r3]
1601:bluetooth_rxtx.c **** 		rx_err = 0;
 6381              		.loc 1 1601 0
 6382 0370 0A4B     		ldr	r3, .L302+12
 6383 0372 0022     		movs	r2, #0
 6384 0374 1A60     		str	r2, [r3]
 6385              	.L278:
 6386              	.LBE3:
1509:bluetooth_rxtx.c **** 		
 6387              		.loc 1 1509 0
 6388 0376 0A4B     		ldr	r3, .L302+16
 6389 0378 1B78     		ldrb	r3, [r3]
 6390 037a DBB2     		uxtb	r3, r3
 6391 037c 012B     		cmp	r3, #1
ARM GAS  /tmp/ccXEAChk.s 			page 140


 6392 037e 3FF4A3AE 		beq	.L299
1602:bluetooth_rxtx.c **** 	 
1603:bluetooth_rxtx.c **** 	
1604:bluetooth_rxtx.c **** 	}
1605:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 6393              		.loc 1 1605 0
 6394 0382 FFF7FEFF 		bl	dio_ssp_stop
1606:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 6395              		.loc 1 1606 0
 6396 0386 FFF7FEFF 		bl	cs_trigger_disable
1607:bluetooth_rxtx.c **** }
 6397              		.loc 1 1607 0
 6398 038a 8C37     		adds	r7, r7, #140
 6399              		.cfi_def_cfa_offset 12
 6400 038c BD46     		mov	sp, r7
 6401              		.cfi_def_cfa_register 13
 6402              		@ sp needed
 6403 038e 90BD     		pop	{r4, r7, pc}
 6404              	.L303:
 6405              		.align	2
 6406              	.L302:
 6407 0390 08000340 		.word	1073938440
 6408 0394 0C000340 		.word	1073938444
 6409 0398 00000000 		.word	rx_tc
 6410 039c 00000000 		.word	rx_err
 6411 03a0 00000000 		.word	requested_mode
 6412              		.cfi_endproc
 6413              	.LFE26:
 6415              		.section	.text.le_set_access_address,"ax",%progbits
 6416              		.align	2
 6417              		.thumb
 6418              		.thumb_func
 6420              	le_set_access_address:
 6421              	.LFB27:
1608:bluetooth_rxtx.c **** /*		
1609:bluetooth_rxtx.c **** 		
1610:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1611:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
1612:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
1613:bluetooth_rxtx.c **** 
1614:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
1615:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
1616:bluetooth_rxtx.c ****                      uint32_t v = rxbuf1[i+0] << 24
1617:bluetooth_rxtx.c ****                                            | rxbuf1[i+1] << 16
1618:bluetooth_rxtx.c ****                                            | rxbuf1[i+2] << 8
1619:bluetooth_rxtx.c ****                                            | rxbuf1[i+3] << 0;
1620:bluetooth_rxtx.c ****                      packet[i/4+1] = rbit(v) ^ whit[i/4];
1621:bluetooth_rxtx.c ****         	}
1622:bluetooth_rxtx.c **** 
1623:bluetooth_rxtx.c ****                 unsigned len = (p[5] & 0x3f) + 2;
1624:bluetooth_rxtx.c **** 		if (len > 39)
1625:bluetooth_rxtx.c **** 			goto rx_flush;
1626:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
1627:bluetooth_rxtx.c **** 		
1628:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
1629:bluetooth_rxtx.c **** 		       while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
1630:bluetooth_rxtx.c ****                                 ;
ARM GAS  /tmp/ccXEAChk.s 			page 141


1631:bluetooth_rxtx.c ****                 } else { // max transfers? just wait till DMA's done
1632:bluetooth_rxtx.c ****                         while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
1633:bluetooth_rxtx.c ****                                 ;
1634:bluetooth_rxtx.c ****                 }
1635:bluetooth_rxtx.c **** 			
1636:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1637:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
1638:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1639:bluetooth_rxtx.c ****                                            | rxbuf1[i+1] << 16
1640:bluetooth_rxtx.c ****                                        | rxbuf1[i+2] << 8
1641:bluetooth_rxtx.c ****                                            | rxbuf1[i+3] << 0;
1642:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1643:bluetooth_rxtx.c **** 		}
1644:bluetooth_rxtx.c **** 		
1645:bluetooth_rxtx.c **** 		if (le.crc_verify) {
1646:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
1647:bluetooth_rxtx.c **** 			 u32 wire_crc = (p[4+len+2] << 16)
1648:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
1649:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
1650:bluetooth_rxtx.c ****                         if (calc_crc != wire_crc) // skip packets with a bad CRC
1651:bluetooth_rxtx.c ****                                 goto rx_flush;
1652:bluetooth_rxtx.c **** 		}
1653:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, (uint8_t *)packet);
1654:bluetooth_rxtx.c **** 		handle_usb(clkn);
1655:bluetooth_rxtx.c **** 
1656:bluetooth_rxtx.c **** 	rx_flush:
1657:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1658:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
1659:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
1660:bluetooth_rxtx.c ****                 }
1661:bluetooth_rxtx.c **** 
1662:bluetooth_rxtx.c **** 		dma_init_le();
1663:bluetooth_rxtx.c **** 		dio_ssp_start ();
1664:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
1665:bluetooth_rxtx.c **** 		rx_tc = 0;
1666:bluetooth_rxtx.c **** 		rx_err = 0;
1667:bluetooth_rxtx.c **** 		RXLED_CLR;
1668:bluetooth_rxtx.c **** 
1669:bluetooth_rxtx.c **** 	}
1670:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
1671:bluetooth_rxtx.c **** }
1672:bluetooth_rxtx.c **** */
1673:bluetooth_rxtx.c **** 
1674:bluetooth_rxtx.c **** 
1675:bluetooth_rxtx.c **** /* set LE access address */
1676:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 6422              		.loc 1 1676 0
 6423              		.cfi_startproc
 6424              		@ args = 0, pretend = 0, frame = 16
 6425              		@ frame_needed = 1, uses_anonymous_args = 0
 6426 0000 80B5     		push	{r7, lr}
 6427              		.cfi_def_cfa_offset 8
 6428              		.cfi_offset 7, -8
 6429              		.cfi_offset 14, -4
 6430 0002 84B0     		sub	sp, sp, #16
 6431              		.cfi_def_cfa_offset 24
 6432 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccXEAChk.s 			page 142


 6433              		.cfi_def_cfa_register 7
 6434 0006 7860     		str	r0, [r7, #4]
1677:bluetooth_rxtx.c **** 	u32 aa_rev;
1678:bluetooth_rxtx.c **** 
1679:bluetooth_rxtx.c **** 	le.access_address = aa;
 6435              		.loc 1 1679 0
 6436 0008 094A     		ldr	r2, .L305
 6437 000a 7B68     		ldr	r3, [r7, #4]
 6438 000c 1360     		str	r3, [r2]
1680:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 6439              		.loc 1 1680 0
 6440 000e 7868     		ldr	r0, [r7, #4]
 6441 0010 FFF7FEFF 		bl	rbit
 6442 0014 F860     		str	r0, [r7, #12]
1681:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 6443              		.loc 1 1681 0
 6444 0016 FB68     		ldr	r3, [r7, #12]
 6445 0018 9AB2     		uxth	r2, r3
 6446 001a 054B     		ldr	r3, .L305
 6447 001c DA80     		strh	r2, [r3, #6]	@ movhi
1682:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 6448              		.loc 1 1682 0
 6449 001e FB68     		ldr	r3, [r7, #12]
 6450 0020 1B0C     		lsrs	r3, r3, #16
 6451 0022 9AB2     		uxth	r2, r3
 6452 0024 024B     		ldr	r3, .L305
 6453 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1683:bluetooth_rxtx.c **** }
 6454              		.loc 1 1683 0
 6455 0028 1037     		adds	r7, r7, #16
 6456              		.cfi_def_cfa_offset 8
 6457 002a BD46     		mov	sp, r7
 6458              		.cfi_def_cfa_register 13
 6459              		@ sp needed
 6460 002c 80BD     		pop	{r7, pc}
 6461              	.L306:
 6462 002e 00BF     		.align	2
 6463              	.L305:
 6464 0030 00000000 		.word	le
 6465              		.cfi_endproc
 6466              	.LFE27:
 6468              		.section	.text.reset_le,"ax",%progbits
 6469              		.align	2
 6470              		.global	reset_le
 6471              		.thumb
 6472              		.thumb_func
 6474              	reset_le:
 6475              	.LFB28:
1684:bluetooth_rxtx.c **** 
1685:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1686:bluetooth_rxtx.c **** void reset_le() {
 6476              		.loc 1 1686 0
 6477              		.cfi_startproc
 6478              		@ args = 0, pretend = 0, frame = 0
 6479              		@ frame_needed = 1, uses_anonymous_args = 0
 6480 0000 80B5     		push	{r7, lr}
 6481              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccXEAChk.s 			page 143


 6482              		.cfi_offset 7, -8
 6483              		.cfi_offset 14, -4
 6484 0002 00AF     		add	r7, sp, #0
 6485              		.cfi_def_cfa_register 7
1687:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 6486              		.loc 1 1687 0
 6487 0004 1F48     		ldr	r0, .L308
 6488 0006 FFF7FEFF 		bl	le_set_access_address
1688:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 6489              		.loc 1 1688 0
 6490 000a 1F4B     		ldr	r3, .L308+4
 6491 000c 1F4A     		ldr	r2, .L308+8
 6492 000e 9A60     		str	r2, [r3, #8]
1689:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 6493              		.loc 1 1689 0
 6494 0010 1D4B     		ldr	r3, .L308+4
 6495 0012 1F4A     		ldr	r2, .L308+12
 6496 0014 DA60     		str	r2, [r3, #12]
1690:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 6497              		.loc 1 1690 0
 6498 0016 1C4B     		ldr	r3, .L308+4
 6499 0018 0122     		movs	r2, #1
 6500 001a 1A61     		str	r2, [r3, #16]
1691:bluetooth_rxtx.c **** 	le.last_packet = 0;
 6501              		.loc 1 1691 0
 6502 001c 1A4B     		ldr	r3, .L308+4
 6503 001e 0022     		movs	r2, #0
 6504 0020 1A64     		str	r2, [r3, #64]
1692:bluetooth_rxtx.c **** 
1693:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 6505              		.loc 1 1693 0
 6506 0022 194B     		ldr	r3, .L308+4
 6507 0024 0022     		movs	r2, #0
 6508 0026 1A75     		strb	r2, [r3, #20]
1694:bluetooth_rxtx.c **** 
1695:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 6509              		.loc 1 1695 0
 6510 0028 174B     		ldr	r3, .L308+4
 6511 002a 0022     		movs	r2, #0
 6512 002c 5A75     		strb	r2, [r3, #21]
1696:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 6513              		.loc 1 1696 0
 6514 002e 164B     		ldr	r3, .L308+4
 6515 0030 0022     		movs	r2, #0
 6516 0032 9A75     		strb	r2, [r3, #22]
1697:bluetooth_rxtx.c **** 
1698:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 6517              		.loc 1 1698 0
 6518 0034 144B     		ldr	r3, .L308+4
 6519 0036 0022     		movs	r2, #0
 6520 0038 9A61     		str	r2, [r3, #24]
1699:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 6521              		.loc 1 1699 0
 6522 003a 134B     		ldr	r3, .L308+4
 6523 003c 0022     		movs	r2, #0
 6524 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1700:bluetooth_rxtx.c **** 	le.conn_interval = 0;
ARM GAS  /tmp/ccXEAChk.s 			page 144


 6525              		.loc 1 1700 0
 6526 0040 114B     		ldr	r3, .L308+4
 6527 0042 0022     		movs	r2, #0
 6528 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1701:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6529              		.loc 1 1701 0
 6530 0046 104B     		ldr	r3, .L308+4
 6531 0048 0022     		movs	r2, #0
 6532 004a DA83     		strh	r2, [r3, #30]	@ movhi
1702:bluetooth_rxtx.c **** 	le.conn_count = 0;
 6533              		.loc 1 1702 0
 6534 004c 0E4B     		ldr	r3, .L308+4
 6535 004e 0022     		movs	r2, #0
 6536 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1703:bluetooth_rxtx.c **** 
1704:bluetooth_rxtx.c **** 	le.win_size = 0;
 6537              		.loc 1 1704 0
 6538 0052 0D4B     		ldr	r3, .L308+4
 6539 0054 0022     		movs	r2, #0
 6540 0056 83F82220 		strb	r2, [r3, #34]
1705:bluetooth_rxtx.c **** 	le.win_offset = 0;
 6541              		.loc 1 1705 0
 6542 005a 0B4B     		ldr	r3, .L308+4
 6543 005c 0022     		movs	r2, #0
 6544 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1706:bluetooth_rxtx.c **** 
1707:bluetooth_rxtx.c **** 	le.update_pending = 0;
 6545              		.loc 1 1707 0
 6546 0060 094B     		ldr	r3, .L308+4
 6547 0062 0022     		movs	r2, #0
 6548 0064 9A62     		str	r2, [r3, #40]
1708:bluetooth_rxtx.c **** 	le.update_instant = 0;
 6549              		.loc 1 1708 0
 6550 0066 084B     		ldr	r3, .L308+4
 6551 0068 0022     		movs	r2, #0
 6552 006a 9A85     		strh	r2, [r3, #44]	@ movhi
1709:bluetooth_rxtx.c **** 	le.interval_update = 0;
 6553              		.loc 1 1709 0
 6554 006c 064B     		ldr	r3, .L308+4
 6555 006e 0022     		movs	r2, #0
 6556 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1710:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 6557              		.loc 1 1710 0
 6558 0072 054B     		ldr	r3, .L308+4
 6559 0074 0022     		movs	r2, #0
 6560 0076 83F83020 		strb	r2, [r3, #48]
1711:bluetooth_rxtx.c **** 	le.win_offset_update;
1712:bluetooth_rxtx.c **** 
1713:bluetooth_rxtx.c **** 	do_hop = 0;
 6561              		.loc 1 1713 0
 6562 007a 064B     		ldr	r3, .L308+16
 6563 007c 0022     		movs	r2, #0
 6564 007e 1A70     		strb	r2, [r3]
1714:bluetooth_rxtx.c **** }
 6565              		.loc 1 1714 0
 6566 0080 80BD     		pop	{r7, pc}
 6567              	.L309:
ARM GAS  /tmp/ccXEAChk.s 			page 145


 6568 0082 00BF     		.align	2
 6569              	.L308:
 6570 0084 D6BE898E 		.word	-1903575338
 6571 0088 00000000 		.word	le
 6572 008c 55555500 		.word	5592405
 6573 0090 AAAAAA00 		.word	11184810
 6574 0094 00000000 		.word	do_hop
 6575              		.cfi_endproc
 6576              	.LFE28:
 6578              		.section	.text.reset_le_promisc,"ax",%progbits
 6579              		.align	2
 6580              		.global	reset_le_promisc
 6581              		.thumb
 6582              		.thumb_func
 6584              	reset_le_promisc:
 6585              	.LFB29:
1715:bluetooth_rxtx.c **** 
1716:bluetooth_rxtx.c **** // reset LE Promisc state
1717:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 6586              		.loc 1 1717 0
 6587              		.cfi_startproc
 6588              		@ args = 0, pretend = 0, frame = 0
 6589              		@ frame_needed = 1, uses_anonymous_args = 0
 6590 0000 80B5     		push	{r7, lr}
 6591              		.cfi_def_cfa_offset 8
 6592              		.cfi_offset 7, -8
 6593              		.cfi_offset 14, -4
 6594 0002 00AF     		add	r7, sp, #0
 6595              		.cfi_def_cfa_register 7
1718:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 6596              		.loc 1 1718 0
 6597 0004 0548     		ldr	r0, .L311
 6598 0006 0021     		movs	r1, #0
 6599 0008 4FF48472 		mov	r2, #264
 6600 000c FFF7FEFF 		bl	memset
1719:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 6601              		.loc 1 1719 0
 6602 0010 024B     		ldr	r3, .L311
 6603 0012 4FF0FF32 		mov	r2, #-1
 6604 0016 C3F80021 		str	r2, [r3, #256]
1720:bluetooth_rxtx.c **** }
 6605              		.loc 1 1720 0
 6606 001a 80BD     		pop	{r7, pc}
 6607              	.L312:
 6608              		.align	2
 6609              	.L311:
 6610 001c 00000000 		.word	le_promisc
 6611              		.cfi_endproc
 6612              	.LFE29:
 6614              		.section	.text.bt_generic_le,"ax",%progbits
 6615              		.align	2
 6616              		.global	bt_generic_le
 6617              		.thumb
 6618              		.thumb_func
 6620              	bt_generic_le:
 6621              	.LFB30:
1721:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccXEAChk.s 			page 146


1722:bluetooth_rxtx.c **** /* generic le mode */
1723:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1724:bluetooth_rxtx.c **** {
 6622              		.loc 1 1724 0
 6623              		.cfi_startproc
 6624              		@ args = 0, pretend = 0, frame = 32
 6625              		@ frame_needed = 1, uses_anonymous_args = 0
 6626 0000 80B5     		push	{r7, lr}
 6627              		.cfi_def_cfa_offset 8
 6628              		.cfi_offset 7, -8
 6629              		.cfi_offset 14, -4
 6630 0002 88B0     		sub	sp, sp, #32
 6631              		.cfi_def_cfa_offset 40
 6632 0004 00AF     		add	r7, sp, #0
 6633              		.cfi_def_cfa_register 7
 6634 0006 0346     		mov	r3, r0
 6635 0008 FB71     		strb	r3, [r7, #7]
1725:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6636              		.loc 1 1725 0
 6637 000a 0023     		movs	r3, #0
 6638 000c FB60     		str	r3, [r7, #12]
1726:bluetooth_rxtx.c **** 	u8 hold;
1727:bluetooth_rxtx.c **** 	int i, j;
1728:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1729:bluetooth_rxtx.c **** 
1730:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6639              		.loc 1 1730 0
 6640 000e A44B     		ldr	r3, .L341
 6641 0010 0122     		movs	r2, #1
 6642 0012 1A70     		strb	r2, [r3]
1731:bluetooth_rxtx.c **** 	mode = active_mode;
 6643              		.loc 1 1731 0
 6644 0014 A34A     		ldr	r2, .L341+4
 6645 0016 FB79     		ldrb	r3, [r7, #7]
 6646 0018 1370     		strb	r3, [r2]
1732:bluetooth_rxtx.c **** 
1733:bluetooth_rxtx.c **** 	reset_le();
 6647              		.loc 1 1733 0
 6648 001a FFF7FEFF 		bl	reset_le
1734:bluetooth_rxtx.c **** 
1735:bluetooth_rxtx.c **** 	// enable USB interrupts
1736:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6649              		.loc 1 1736 0
 6650 001e A24B     		ldr	r3, .L341+8
 6651 0020 4FF08072 		mov	r2, #16777216
 6652 0024 1A60     		str	r2, [r3]
1737:bluetooth_rxtx.c **** 
1738:bluetooth_rxtx.c **** 	RXLED_CLR;
 6653              		.loc 1 1738 0
 6654 0026 A14B     		ldr	r3, .L341+12
 6655 0028 1022     		movs	r2, #16
 6656 002a 1A60     		str	r2, [r3]
1739:bluetooth_rxtx.c **** 
1740:bluetooth_rxtx.c **** 	queue_init();
 6657              		.loc 1 1740 0
 6658 002c FFF7FEFF 		bl	queue_init
1741:bluetooth_rxtx.c **** 	dio_ssp_init();
ARM GAS  /tmp/ccXEAChk.s 			page 147


 6659              		.loc 1 1741 0
 6660 0030 FFF7FEFF 		bl	dio_ssp_init
1742:bluetooth_rxtx.c **** 	dma_init();
 6661              		.loc 1 1742 0
 6662 0034 FFF7FEFF 		bl	dma_init
1743:bluetooth_rxtx.c **** 	dio_ssp_start();
 6663              		.loc 1 1743 0
 6664 0038 FFF7FEFF 		bl	dio_ssp_start
1744:bluetooth_rxtx.c **** 	cc2400_rx();
 6665              		.loc 1 1744 0
 6666 003c FFF7FEFF 		bl	cc2400_rx
1745:bluetooth_rxtx.c **** 
1746:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6667              		.loc 1 1746 0
 6668 0040 FFF7FEFF 		bl	cs_trigger_enable
1747:bluetooth_rxtx.c **** 
1748:bluetooth_rxtx.c **** 	hold = 0;
 6669              		.loc 1 1748 0
 6670 0044 0023     		movs	r3, #0
 6671 0046 FB77     		strb	r3, [r7, #31]
1749:bluetooth_rxtx.c **** 
1750:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6672              		.loc 1 1750 0
 6673 0048 15E1     		b	.L314
 6674              	.L340:
 6675              	.LBB6:
1751:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6676              		.loc 1 1751 0
 6677 004a 994B     		ldr	r3, .L341+16
 6678 004c 1B88     		ldrh	r3, [r3]	@ movhi
 6679 004e 9BB2     		uxth	r3, r3
 6680 0050 002B     		cmp	r3, #0
 6681 0052 24D0     		beq	.L315
1752:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6682              		.loc 1 1752 0
 6683 0054 6420     		movs	r0, #100
 6684 0056 FFF7FEFF 		bl	cc2400_strobe
1753:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6685              		.loc 1 1753 0
 6686 005a 00BF     		nop
 6687              	.L316:
 6688              		.loc 1 1753 0 is_stmt 0 discriminator 1
 6689 005c FFF7FEFF 		bl	cc2400_status
 6690 0060 0346     		mov	r3, r0
 6691 0062 03F00403 		and	r3, r3, #4
 6692 0066 002B     		cmp	r3, #0
 6693 0068 F8D1     		bne	.L316
1754:bluetooth_rxtx.c **** 
1755:bluetooth_rxtx.c **** 			/* Retune */
1756:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6694              		.loc 1 1756 0 is_stmt 1
 6695 006a 924B     		ldr	r3, .L341+20
 6696 006c 1B88     		ldrh	r3, [r3]	@ movhi
 6697 006e 9BB2     		uxth	r3, r3
 6698 0070 013B     		subs	r3, r3, #1
 6699 0072 9BB2     		uxth	r3, r3
 6700 0074 0220     		movs	r0, #2
ARM GAS  /tmp/ccXEAChk.s 			page 148


 6701 0076 1946     		mov	r1, r3
 6702 0078 FFF7FEFF 		bl	cc2400_set
1757:bluetooth_rxtx.c **** 
1758:bluetooth_rxtx.c **** 			/* Wait for lock */
1759:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6703              		.loc 1 1759 0
 6704 007c 6120     		movs	r0, #97
 6705 007e FFF7FEFF 		bl	cc2400_strobe
1760:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6706              		.loc 1 1760 0
 6707 0082 00BF     		nop
 6708              	.L317:
 6709              		.loc 1 1760 0 is_stmt 0 discriminator 1
 6710 0084 FFF7FEFF 		bl	cc2400_status
 6711 0088 0346     		mov	r3, r0
 6712 008a 03F00403 		and	r3, r3, #4
 6713 008e 002B     		cmp	r3, #0
 6714 0090 F8D0     		beq	.L317
1761:bluetooth_rxtx.c **** 
1762:bluetooth_rxtx.c **** 			/* RX mode */
1763:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6715              		.loc 1 1763 0 is_stmt 1
 6716 0092 6220     		movs	r0, #98
 6717 0094 FFF7FEFF 		bl	cc2400_strobe
1764:bluetooth_rxtx.c **** 
1765:bluetooth_rxtx.c **** 			requested_channel = 0;
 6718              		.loc 1 1765 0
 6719 0098 854B     		ldr	r3, .L341+16
 6720 009a 0022     		movs	r2, #0
 6721 009c 1A80     		strh	r2, [r3]	@ movhi
 6722              	.L315:
1766:bluetooth_rxtx.c **** 		}
1767:bluetooth_rxtx.c **** 
1768:bluetooth_rxtx.c **** 		if (do_hop) {
 6723              		.loc 1 1768 0
 6724 009e 864B     		ldr	r3, .L341+24
 6725 00a0 1B78     		ldrb	r3, [r3]
 6726 00a2 DBB2     		uxtb	r3, r3
 6727 00a4 002B     		cmp	r3, #0
 6728 00a6 02D0     		beq	.L318
1769:bluetooth_rxtx.c **** 			hop();
 6729              		.loc 1 1769 0
 6730 00a8 FFF7FEFF 		bl	hop
 6731 00ac 03E0     		b	.L319
 6732              	.L318:
1770:bluetooth_rxtx.c **** 		} else {
1771:bluetooth_rxtx.c **** 			TXLED_CLR;
 6733              		.loc 1 1771 0
 6734 00ae 7F4B     		ldr	r3, .L341+12
 6735 00b0 4FF48072 		mov	r2, #256
 6736 00b4 1A60     		str	r2, [r3]
 6737              	.L319:
1772:bluetooth_rxtx.c **** 		}
1773:bluetooth_rxtx.c **** 
1774:bluetooth_rxtx.c **** 		RXLED_CLR;
 6738              		.loc 1 1774 0
 6739 00b6 7D4B     		ldr	r3, .L341+12
ARM GAS  /tmp/ccXEAChk.s 			page 149


 6740 00b8 1022     		movs	r2, #16
 6741 00ba 1A60     		str	r2, [r3]
1775:bluetooth_rxtx.c **** 
1776:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1777:bluetooth_rxtx.c **** 		rssi_reset();
 6742              		.loc 1 1777 0
 6743 00bc FFF7FEFF 		bl	rssi_reset
1778:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6744              		.loc 1 1778 0
 6745 00c0 8023     		movs	r3, #128
 6746 00c2 BB74     		strb	r3, [r7, #18]
1779:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 6747              		.loc 1 1779 0
 6748 00c4 22E0     		b	.L320
 6749              	.L323:
1780:bluetooth_rxtx.c **** 		{
1781:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6750              		.loc 1 1781 0
 6751 00c6 0620     		movs	r0, #6
 6752 00c8 FFF7FEFF 		bl	cc2400_get
 6753 00cc 0346     		mov	r3, r0
 6754 00ce 1B0A     		lsrs	r3, r3, #8
 6755 00d0 9BB2     		uxth	r3, r3
 6756 00d2 FB74     		strb	r3, [r7, #19]
1782:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6757              		.loc 1 1782 0
 6758 00d4 794B     		ldr	r3, .L341+28
 6759 00d6 1B78     		ldrb	r3, [r3]
 6760 00d8 DBB2     		uxtb	r3, r3
 6761 00da 002B     		cmp	r3, #0
 6762 00dc 11D0     		beq	.L321
 6763              		.loc 1 1782 0 is_stmt 0 discriminator 1
 6764 00de 97F91230 		ldrsb	r3, [r7, #18]
 6765 00e2 13F1800F 		cmn	r3, #128
 6766 00e6 0CD1     		bne	.L321
1783:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6767              		.loc 1 1783 0 is_stmt 1
 6768 00e8 754B     		ldr	r3, .L341+32
 6769 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6770 00ec 5BB2     		sxtb	r3, r3
 6771 00ee 03F13602 		add	r2, r3, #54
 6772 00f2 97F91330 		ldrsb	r3, [r7, #19]
 6773 00f6 9342     		cmp	r3, r2
 6774 00f8 B8BF     		it	lt
 6775 00fa 1346     		movlt	r3, r2
 6776 00fc FB74     		strb	r3, [r7, #19]
1784:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6777              		.loc 1 1784 0
 6778 00fe FB7C     		ldrb	r3, [r7, #19]
 6779 0100 BB74     		strb	r3, [r7, #18]
 6780              	.L321:
1785:bluetooth_rxtx.c **** 			}
1786:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6781              		.loc 1 1786 0
 6782 0102 97F91330 		ldrsb	r3, [r7, #19]
 6783 0106 1846     		mov	r0, r3
 6784 0108 FFF7FEFF 		bl	rssi_add
ARM GAS  /tmp/ccXEAChk.s 			page 150


 6785              	.L320:
1779:bluetooth_rxtx.c **** 		{
 6786              		.loc 1 1779 0
 6787 010c 6D4B     		ldr	r3, .L341+36
 6788 010e 1B68     		ldr	r3, [r3]
 6789 0110 002B     		cmp	r3, #0
 6790 0112 03D1     		bne	.L322
1779:bluetooth_rxtx.c **** 		{
 6791              		.loc 1 1779 0 is_stmt 0 discriminator 1
 6792 0114 6C4B     		ldr	r3, .L341+40
 6793 0116 1B68     		ldr	r3, [r3]
 6794 0118 002B     		cmp	r3, #0
 6795 011a D4D0     		beq	.L323
 6796              	.L322:
1787:bluetooth_rxtx.c **** 		}
1788:bluetooth_rxtx.c **** 
1789:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1790:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 6797              		.loc 1 1790 0 is_stmt 1
 6798 011c 694B     		ldr	r3, .L341+36
 6799 011e 1B68     		ldr	r3, [r3]
 6800 0120 03F00103 		and	r3, r3, #1
 6801 0124 002B     		cmp	r3, #0
 6802 0126 09D0     		beq	.L324
1791:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 6803              		.loc 1 1791 0
 6804 0128 684B     		ldr	r3, .L341+44
 6805 012a 1B68     		ldr	r3, [r3]
 6806 012c FB60     		str	r3, [r7, #12]
1792:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 6807              		.loc 1 1792 0
 6808 012e 684B     		ldr	r3, .L341+48
 6809 0130 1B68     		ldr	r3, [r3]
 6810 0132 664A     		ldr	r2, .L341+44
 6811 0134 1360     		str	r3, [r2]
1793:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 6812              		.loc 1 1793 0
 6813 0136 664A     		ldr	r2, .L341+48
 6814 0138 FB68     		ldr	r3, [r7, #12]
 6815 013a 1360     		str	r3, [r2]
 6816              	.L324:
1794:bluetooth_rxtx.c **** 		}
1795:bluetooth_rxtx.c **** 
1796:bluetooth_rxtx.c **** 		if (rx_err) {
 6817              		.loc 1 1796 0
 6818 013c 624B     		ldr	r3, .L341+40
 6819 013e 1B68     		ldr	r3, [r3]
 6820 0140 002B     		cmp	r3, #0
 6821 0142 07D0     		beq	.L325
1797:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6822              		.loc 1 1797 0
 6823 0144 634B     		ldr	r3, .L341+52
 6824 0146 1B78     		ldrb	r3, [r3]
 6825 0148 DBB2     		uxtb	r3, r3
 6826 014a 43F00203 		orr	r3, r3, #2
 6827 014e DAB2     		uxtb	r2, r3
 6828 0150 604B     		ldr	r3, .L341+52
ARM GAS  /tmp/ccXEAChk.s 			page 151


 6829 0152 1A70     		strb	r2, [r3]
 6830              	.L325:
1798:bluetooth_rxtx.c **** 		}
1799:bluetooth_rxtx.c **** 
1800:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1801:bluetooth_rxtx.c **** 		if (!rx_tc)
 6831              		.loc 1 1801 0
 6832 0154 5B4B     		ldr	r3, .L341+36
 6833 0156 1B68     		ldr	r3, [r3]
 6834 0158 002B     		cmp	r3, #0
 6835 015a 00D1     		bne	.L326
1802:bluetooth_rxtx.c **** 			goto rx_continue;
 6836              		.loc 1 1802 0
 6837 015c 85E0     		b	.L327
 6838              	.L326:
1803:bluetooth_rxtx.c **** 
1804:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1805:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6839              		.loc 1 1805 0
 6840 015e 594B     		ldr	r3, .L341+36
 6841 0160 1B68     		ldr	r3, [r3]
 6842 0162 012B     		cmp	r3, #1
 6843 0164 07D9     		bls	.L328
1806:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6844              		.loc 1 1806 0
 6845 0166 5B4B     		ldr	r3, .L341+52
 6846 0168 1B78     		ldrb	r3, [r3]
 6847 016a DBB2     		uxtb	r3, r3
 6848 016c 43F00103 		orr	r3, r3, #1
 6849 0170 DAB2     		uxtb	r2, r3
 6850 0172 584B     		ldr	r3, .L341+52
 6851 0174 1A70     		strb	r2, [r3]
 6852              	.L328:
1807:bluetooth_rxtx.c **** 
1808:bluetooth_rxtx.c **** 		rssi_iir_update();
 6853              		.loc 1 1808 0
 6854 0176 FFF7FEFF 		bl	rssi_iir_update
1809:bluetooth_rxtx.c **** 
1810:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1811:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1812:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1813:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1814:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6855              		.loc 1 1814 0
 6856 017a 504B     		ldr	r3, .L341+28
 6857 017c 1B78     		ldrb	r3, [r3]
 6858 017e DBB2     		uxtb	r3, r3
 6859 0180 002B     		cmp	r3, #0
 6860 0182 03D1     		bne	.L329
 6861              		.loc 1 1814 0 is_stmt 0 discriminator 1
 6862 0184 544B     		ldr	r3, .L341+56
 6863 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6864 0188 002B     		cmp	r3, #0
 6865 018a 0CD0     		beq	.L330
 6866              	.L329:
1815:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6867              		.loc 1 1815 0 is_stmt 1
ARM GAS  /tmp/ccXEAChk.s 			page 152


 6868 018c 514B     		ldr	r3, .L341+52
 6869 018e 1B78     		ldrb	r3, [r3]
 6870 0190 DBB2     		uxtb	r3, r3
 6871 0192 43F00803 		orr	r3, r3, #8
 6872 0196 DAB2     		uxtb	r2, r3
 6873 0198 4E4B     		ldr	r3, .L341+52
 6874 019a 1A70     		strb	r2, [r3]
1816:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6875              		.loc 1 1816 0
 6876 019c 0223     		movs	r3, #2
 6877 019e FB77     		strb	r3, [r7, #31]
1817:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6878              		.loc 1 1817 0
 6879 01a0 464B     		ldr	r3, .L341+28
 6880 01a2 0022     		movs	r2, #0
 6881 01a4 1A70     		strb	r2, [r3]
 6882              	.L330:
1818:bluetooth_rxtx.c **** 		}
1819:bluetooth_rxtx.c **** 
1820:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6883              		.loc 1 1820 0
 6884 01a6 4D4B     		ldr	r3, .L341+60
 6885 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6886 01aa 5AB2     		sxtb	r2, r3
 6887 01ac 444B     		ldr	r3, .L341+32
 6888 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6889 01b0 5BB2     		sxtb	r3, r3
 6890 01b2 3633     		adds	r3, r3, #54
 6891 01b4 9A42     		cmp	r2, r3
 6892 01b6 09DB     		blt	.L331
1821:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6893              		.loc 1 1821 0
 6894 01b8 464B     		ldr	r3, .L341+52
 6895 01ba 1B78     		ldrb	r3, [r3]
 6896 01bc DBB2     		uxtb	r3, r3
 6897 01be 43F01003 		orr	r3, r3, #16
 6898 01c2 DAB2     		uxtb	r2, r3
 6899 01c4 434B     		ldr	r3, .L341+52
 6900 01c6 1A70     		strb	r2, [r3]
1822:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6901              		.loc 1 1822 0
 6902 01c8 0223     		movs	r3, #2
 6903 01ca FB77     		strb	r3, [r7, #31]
 6904              	.L331:
1823:bluetooth_rxtx.c **** 		}
1824:bluetooth_rxtx.c **** 
1825:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1826:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1827:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 6905              		.loc 1 1827 0
 6906 01cc 444B     		ldr	r3, .L341+64
 6907 01ce 1B78     		ldrb	r3, [r3]
 6908 01d0 DBB2     		uxtb	r3, r3
 6909 01d2 002B     		cmp	r3, #0
 6910 01d4 07D0     		beq	.L332
1828:bluetooth_rxtx.c **** 			if (hold == 0)
 6911              		.loc 1 1828 0
ARM GAS  /tmp/ccXEAChk.s 			page 153


 6912 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6913 01d8 002B     		cmp	r3, #0
 6914 01da 01D1     		bne	.L333
1829:bluetooth_rxtx.c **** 				hold = 1;
 6915              		.loc 1 1829 0
 6916 01dc 0123     		movs	r3, #1
 6917 01de FB77     		strb	r3, [r7, #31]
 6918              	.L333:
1830:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 6919              		.loc 1 1830 0
 6920 01e0 3F4B     		ldr	r3, .L341+64
 6921 01e2 0022     		movs	r2, #0
 6922 01e4 1A70     		strb	r2, [r3]
 6923              	.L332:
1831:bluetooth_rxtx.c **** 		}
1832:bluetooth_rxtx.c **** 
1833:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1834:bluetooth_rxtx.c **** 		if (hold == 0) {
 6924              		.loc 1 1834 0
 6925 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6926 01e8 002B     		cmp	r3, #0
 6927 01ea 00D1     		bne	.L334
1835:bluetooth_rxtx.c **** 			goto rx_continue;
 6928              		.loc 1 1835 0
 6929 01ec 3DE0     		b	.L327
 6930              	.L334:
1836:bluetooth_rxtx.c **** 		}
1837:bluetooth_rxtx.c **** 		hold--;
 6931              		.loc 1 1837 0
 6932 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6933 01f0 013B     		subs	r3, r3, #1
 6934 01f2 FB77     		strb	r3, [r7, #31]
1838:bluetooth_rxtx.c **** 
1839:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1840:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 6935              		.loc 1 1840 0
 6936 01f4 3B48     		ldr	r0, .L341+68
 6937 01f6 3C49     		ldr	r1, .L341+72
 6938 01f8 4FF4C872 		mov	r2, #400
 6939 01fc FFF7FEFF 		bl	memcpy
1841:bluetooth_rxtx.c **** 
1842:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1843:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 6940              		.loc 1 1843 0
 6941 0200 0023     		movs	r3, #0
 6942 0202 BB61     		str	r3, [r7, #24]
 6943 0204 25E0     		b	.L335
 6944              	.L338:
1844:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1845:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 6945              		.loc 1 1845 0
 6946 0206 0023     		movs	r3, #0
 6947 0208 7B61     		str	r3, [r7, #20]
 6948 020a 1CE0     		b	.L336
 6949              	.L337:
1846:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6950              		.loc 1 1846 0 discriminator 3
ARM GAS  /tmp/ccXEAChk.s 			page 154


 6951 020c BB69     		ldr	r3, [r7, #24]
 6952 020e 3233     		adds	r3, r3, #50
 6953 0210 DA00     		lsls	r2, r3, #3
 6954 0212 7B69     		ldr	r3, [r7, #20]
 6955 0214 1344     		add	r3, r3, r2
 6956 0216 2E4A     		ldr	r2, .L341+48
 6957 0218 1168     		ldr	r1, [r2]
 6958 021a BA69     		ldr	r2, [r7, #24]
 6959 021c 0A44     		add	r2, r2, r1
 6960 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6961 0220 D209     		lsrs	r2, r2, #7
 6962 0222 D1B2     		uxtb	r1, r2
 6963 0224 2F4A     		ldr	r2, .L341+68
 6964 0226 D154     		strb	r1, [r2, r3]
1847:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6965              		.loc 1 1847 0 discriminator 3
 6966 0228 294B     		ldr	r3, .L341+48
 6967 022a 1A68     		ldr	r2, [r3]
 6968 022c BB69     		ldr	r3, [r7, #24]
 6969 022e 1344     		add	r3, r3, r2
 6970 0230 274A     		ldr	r2, .L341+48
 6971 0232 1168     		ldr	r1, [r2]
 6972 0234 BA69     		ldr	r2, [r7, #24]
 6973 0236 0A44     		add	r2, r2, r1
 6974 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6975 023a 5200     		lsls	r2, r2, #1
 6976 023c D2B2     		uxtb	r2, r2
 6977 023e 1A70     		strb	r2, [r3]
1845:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6978              		.loc 1 1845 0 discriminator 3
 6979 0240 7B69     		ldr	r3, [r7, #20]
 6980 0242 0133     		adds	r3, r3, #1
 6981 0244 7B61     		str	r3, [r7, #20]
 6982              	.L336:
1845:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6983              		.loc 1 1845 0 is_stmt 0 discriminator 1
 6984 0246 7B69     		ldr	r3, [r7, #20]
 6985 0248 072B     		cmp	r3, #7
 6986 024a DFDD     		ble	.L337
1843:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6987              		.loc 1 1843 0 is_stmt 1 discriminator 2
 6988 024c BB69     		ldr	r3, [r7, #24]
 6989 024e 0133     		adds	r3, r3, #1
 6990 0250 BB61     		str	r3, [r7, #24]
 6991              	.L335:
1843:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6992              		.loc 1 1843 0 is_stmt 0 discriminator 1
 6993 0252 BB69     		ldr	r3, [r7, #24]
 6994 0254 312B     		cmp	r3, #49
 6995 0256 D6DD     		ble	.L338
1848:bluetooth_rxtx.c **** 			}
1849:bluetooth_rxtx.c **** 		}
1850:bluetooth_rxtx.c **** 
1851:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 6996              		.loc 1 1851 0 is_stmt 1
 6997 0258 244B     		ldr	r3, .L341+76
 6998 025a 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 155


 6999 025c 2148     		ldr	r0, .L341+68
 7000 025e 9847     		blx	r3
 7001 0260 B860     		str	r0, [r7, #8]
1852:bluetooth_rxtx.c **** 		if (!ret) break;
 7002              		.loc 1 1852 0
 7003 0262 BB68     		ldr	r3, [r7, #8]
 7004 0264 002B     		cmp	r3, #0
 7005 0266 00D1     		bne	.L327
 7006 0268 0CE0     		b	.L339
 7007              	.L327:
1853:bluetooth_rxtx.c **** 
1854:bluetooth_rxtx.c **** 	rx_continue:
1855:bluetooth_rxtx.c **** 		rx_tc = 0;
 7008              		.loc 1 1855 0
 7009 026a 164B     		ldr	r3, .L341+36
 7010 026c 0022     		movs	r2, #0
 7011 026e 1A60     		str	r2, [r3]
1856:bluetooth_rxtx.c **** 		rx_err = 0;
 7012              		.loc 1 1856 0
 7013 0270 154B     		ldr	r3, .L341+40
 7014 0272 0022     		movs	r2, #0
 7015 0274 1A60     		str	r2, [r3]
 7016              	.L314:
 7017              	.LBE6:
1750:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7018              		.loc 1 1750 0
 7019 0276 1E4B     		ldr	r3, .L341+80
 7020 0278 1B78     		ldrb	r3, [r3]
 7021 027a DBB2     		uxtb	r3, r3
 7022 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7023 027e 9A42     		cmp	r2, r3
 7024 0280 3FF4E3AE 		beq	.L340
 7025              	.L339:
1857:bluetooth_rxtx.c **** 	}
1858:bluetooth_rxtx.c **** 
1859:bluetooth_rxtx.c **** 	// disable USB interrupts
1860:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7026              		.loc 1 1860 0
 7027 0284 1B4B     		ldr	r3, .L341+84
 7028 0286 4FF08072 		mov	r2, #16777216
 7029 028a 1A60     		str	r2, [r3]
1861:bluetooth_rxtx.c **** 
1862:bluetooth_rxtx.c **** 	// reset the radio completely
1863:bluetooth_rxtx.c **** 	cc2400_idle();
 7030              		.loc 1 1863 0
 7031 028c FFF7FEFF 		bl	cc2400_idle
1864:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7032              		.loc 1 1864 0
 7033 0290 FFF7FEFF 		bl	dio_ssp_stop
1865:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7034              		.loc 1 1865 0
 7035 0294 FFF7FEFF 		bl	cs_trigger_disable
1866:bluetooth_rxtx.c **** }
 7036              		.loc 1 1866 0
 7037 0298 2037     		adds	r7, r7, #32
 7038              		.cfi_def_cfa_offset 8
 7039 029a BD46     		mov	sp, r7
ARM GAS  /tmp/ccXEAChk.s 			page 156


 7040              		.cfi_def_cfa_register 13
 7041              		@ sp needed
 7042 029c 80BD     		pop	{r7, pc}
 7043              	.L342:
 7044 029e 00BF     		.align	2
 7045              	.L341:
 7046 02a0 00000000 		.word	modulation
 7047 02a4 00000000 		.word	mode
 7048 02a8 00E100E0 		.word	-536813312
 7049 02ac 3CC00920 		.word	537509948
 7050 02b0 00000000 		.word	requested_channel
 7051 02b4 00000000 		.word	channel
 7052 02b8 00000000 		.word	do_hop
 7053 02bc 00000000 		.word	cs_trigger
 7054 02c0 00000000 		.word	cs_threshold_cur
 7055 02c4 00000000 		.word	rx_tc
 7056 02c8 00000000 		.word	rx_err
 7057 02cc 00000000 		.word	active_rxbuf
 7058 02d0 00000000 		.word	idle_rxbuf
 7059 02d4 00000000 		.word	status
 7060 02d8 00000000 		.word	cs_no_squelch
 7061 02dc 00000000 		.word	rssi_max
 7062 02e0 00000000 		.word	keepalive_trigger
 7063 02e4 00000000 		.word	unpacked
 7064 02e8 90010000 		.word	unpacked+400
 7065 02ec 00000000 		.word	data_cb
 7066 02f0 00000000 		.word	requested_mode
 7067 02f4 80E100E0 		.word	-536813184
 7068              		.cfi_endproc
 7069              	.LFE30:
 7071              		.section	.text.bt_le_sync,"ax",%progbits
 7072              		.align	2
 7073              		.global	bt_le_sync
 7074              		.thumb
 7075              		.thumb_func
 7077              	bt_le_sync:
 7078              	.LFB31:
1867:bluetooth_rxtx.c **** 
1868:bluetooth_rxtx.c **** 
1869:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1870:bluetooth_rxtx.c **** {
 7079              		.loc 1 1870 0
 7080              		.cfi_startproc
 7081              		@ args = 0, pretend = 0, frame = 104
 7082              		@ frame_needed = 1, uses_anonymous_args = 0
 7083 0000 90B5     		push	{r4, r7, lr}
 7084              		.cfi_def_cfa_offset 12
 7085              		.cfi_offset 4, -12
 7086              		.cfi_offset 7, -8
 7087              		.cfi_offset 14, -4
 7088 0002 9BB0     		sub	sp, sp, #108
 7089              		.cfi_def_cfa_offset 120
 7090 0004 00AF     		add	r7, sp, #0
 7091              		.cfi_def_cfa_register 7
 7092 0006 0346     		mov	r3, r0
 7093 0008 FB71     		strb	r3, [r7, #7]
1871:bluetooth_rxtx.c **** 	int i;
ARM GAS  /tmp/ccXEAChk.s 			page 157


1872:bluetooth_rxtx.c **** 	int8_t rssi;
1873:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1874:bluetooth_rxtx.c **** 
1875:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 7094              		.loc 1 1875 0
 7095 000a 874B     		ldr	r3, .L389
 7096 000c 0122     		movs	r2, #1
 7097 000e 1A70     		strb	r2, [r3]
1876:bluetooth_rxtx.c **** 	mode = active_mode;
 7098              		.loc 1 1876 0
 7099 0010 864A     		ldr	r2, .L389+4
 7100 0012 FB79     		ldrb	r3, [r7, #7]
 7101 0014 1370     		strb	r3, [r2]
1877:bluetooth_rxtx.c **** 
1878:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 7102              		.loc 1 1878 0
 7103 0016 864B     		ldr	r3, .L389+8
 7104 0018 0122     		movs	r2, #1
 7105 001a 1A75     		strb	r2, [r3, #20]
1879:bluetooth_rxtx.c **** 
1880:bluetooth_rxtx.c **** 	// enable USB interrupts
1881:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 7106              		.loc 1 1881 0
 7107 001c 854B     		ldr	r3, .L389+12
 7108 001e 4FF08072 		mov	r2, #16777216
 7109 0022 1A60     		str	r2, [r3]
1882:bluetooth_rxtx.c **** 
1883:bluetooth_rxtx.c **** 	RXLED_CLR;
 7110              		.loc 1 1883 0
 7111 0024 844B     		ldr	r3, .L389+16
 7112 0026 1022     		movs	r2, #16
 7113 0028 1A60     		str	r2, [r3]
1884:bluetooth_rxtx.c **** 
1885:bluetooth_rxtx.c **** 	queue_init();
 7114              		.loc 1 1885 0
 7115 002a FFF7FEFF 		bl	queue_init
1886:bluetooth_rxtx.c **** 	dio_ssp_init();
 7116              		.loc 1 1886 0
 7117 002e FFF7FEFF 		bl	dio_ssp_init
1887:bluetooth_rxtx.c **** 	dma_init_le();
 7118              		.loc 1 1887 0
 7119 0032 FFF7FEFF 		bl	dma_init_le
1888:bluetooth_rxtx.c **** 	dio_ssp_start();
 7120              		.loc 1 1888 0
 7121 0036 FFF7FEFF 		bl	dio_ssp_start
1889:bluetooth_rxtx.c **** 
1890:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 7122              		.loc 1 1890 0
 7123 003a 7D4B     		ldr	r3, .L389+8
 7124 003c 1B68     		ldr	r3, [r3]
 7125 003e 1846     		mov	r0, r3
 7126 0040 FFF7FEFF 		bl	rbit
 7127 0044 0346     		mov	r3, r0
 7128 0046 1846     		mov	r0, r3
 7129 0048 FFF7FEFF 		bl	cc2400_rx_sync
1891:bluetooth_rxtx.c **** 
1892:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
ARM GAS  /tmp/ccXEAChk.s 			page 158


 7130              		.loc 1 1892 0
 7131 004c 47E2     		b	.L344
 7132              	.L388:
 7133              	.LBB7:
1893:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7134              		.loc 1 1893 0
 7135 004e 7B4B     		ldr	r3, .L389+20
 7136 0050 1B88     		ldrh	r3, [r3]	@ movhi
 7137 0052 9BB2     		uxth	r3, r3
 7138 0054 002B     		cmp	r3, #0
 7139 0056 29D0     		beq	.L345
1894:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7140              		.loc 1 1894 0
 7141 0058 6420     		movs	r0, #100
 7142 005a FFF7FEFF 		bl	cc2400_strobe
1895:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 7143              		.loc 1 1895 0
 7144 005e 00BF     		nop
 7145              	.L346:
 7146              		.loc 1 1895 0 is_stmt 0 discriminator 1
 7147 0060 FFF7FEFF 		bl	cc2400_status
 7148 0064 0346     		mov	r3, r0
 7149 0066 03F00403 		and	r3, r3, #4
 7150 006a 002B     		cmp	r3, #0
 7151 006c F8D1     		bne	.L346
1896:bluetooth_rxtx.c **** 
1897:bluetooth_rxtx.c **** 			/* Retune */
1898:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 7152              		.loc 1 1898 0 is_stmt 1
 7153 006e 744B     		ldr	r3, .L389+24
 7154 0070 1B88     		ldrh	r3, [r3]	@ movhi
 7155 0072 9BB2     		uxth	r3, r3
 7156 0074 013B     		subs	r3, r3, #1
 7157 0076 9BB2     		uxth	r3, r3
 7158 0078 0220     		movs	r0, #2
 7159 007a 1946     		mov	r1, r3
 7160 007c FFF7FEFF 		bl	cc2400_set
1899:bluetooth_rxtx.c **** 
1900:bluetooth_rxtx.c **** 			/* Wait for lock */
1901:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 7161              		.loc 1 1901 0
 7162 0080 6120     		movs	r0, #97
 7163 0082 FFF7FEFF 		bl	cc2400_strobe
1902:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 7164              		.loc 1 1902 0
 7165 0086 00BF     		nop
 7166              	.L347:
 7167              		.loc 1 1902 0 is_stmt 0 discriminator 1
 7168 0088 FFF7FEFF 		bl	cc2400_status
 7169 008c 0346     		mov	r3, r0
 7170 008e 03F00403 		and	r3, r3, #4
 7171 0092 002B     		cmp	r3, #0
 7172 0094 F8D0     		beq	.L347
1903:bluetooth_rxtx.c **** 
1904:bluetooth_rxtx.c **** 			/* RX mode */
1905:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 7173              		.loc 1 1905 0 is_stmt 1
ARM GAS  /tmp/ccXEAChk.s 			page 159


 7174 0096 6220     		movs	r0, #98
 7175 0098 FFF7FEFF 		bl	cc2400_strobe
1906:bluetooth_rxtx.c **** 
1907:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 7176              		.loc 1 1907 0
 7177 009c 674B     		ldr	r3, .L389+20
 7178 009e 1B88     		ldrh	r3, [r3]	@ movhi
 7179 00a0 9AB2     		uxth	r2, r3
 7180 00a2 684B     		ldr	r3, .L389+28
 7181 00a4 1A80     		strh	r2, [r3]	@ movhi
1908:bluetooth_rxtx.c **** 			requested_channel = 0;
 7182              		.loc 1 1908 0
 7183 00a6 654B     		ldr	r3, .L389+20
 7184 00a8 0022     		movs	r2, #0
 7185 00aa 1A80     		strh	r2, [r3]	@ movhi
 7186              	.L345:
1909:bluetooth_rxtx.c **** 		}
1910:bluetooth_rxtx.c **** 
1911:bluetooth_rxtx.c **** 		RXLED_CLR;
 7187              		.loc 1 1911 0
 7188 00ac 624B     		ldr	r3, .L389+16
 7189 00ae 1022     		movs	r2, #16
 7190 00b0 1A60     		str	r2, [r3]
1912:bluetooth_rxtx.c **** 
1913:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1914:bluetooth_rxtx.c **** 		rssi_reset();
 7191              		.loc 1 1914 0
 7192 00b2 FFF7FEFF 		bl	rssi_reset
1915:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 7193              		.loc 1 1915 0
 7194 00b6 00BF     		nop
 7195              	.L349:
 7196              		.loc 1 1915 0 is_stmt 0 discriminator 4
 7197 00b8 634B     		ldr	r3, .L389+32
 7198 00ba 1B68     		ldr	r3, [r3]
 7199 00bc 002B     		cmp	r3, #0
 7200 00be 0ED1     		bne	.L348
 7201              		.loc 1 1915 0 discriminator 1
 7202 00c0 624B     		ldr	r3, .L389+36
 7203 00c2 1B68     		ldr	r3, [r3]
 7204 00c4 002B     		cmp	r3, #0
 7205 00c6 0AD1     		bne	.L348
 7206              		.loc 1 1915 0 discriminator 2
 7207 00c8 614B     		ldr	r3, .L389+40
 7208 00ca 1B78     		ldrb	r3, [r3]
 7209 00cc DBB2     		uxtb	r3, r3
 7210 00ce 002B     		cmp	r3, #0
 7211 00d0 05D1     		bne	.L348
 7212              		.loc 1 1915 0 discriminator 3
 7213 00d2 604B     		ldr	r3, .L389+44
 7214 00d4 1B78     		ldrb	r3, [r3]
 7215 00d6 DBB2     		uxtb	r3, r3
 7216 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7217 00da 9A42     		cmp	r2, r3
 7218 00dc ECD0     		beq	.L349
 7219              	.L348:
1916:bluetooth_rxtx.c **** 			;
ARM GAS  /tmp/ccXEAChk.s 			page 160


1917:bluetooth_rxtx.c **** 
1918:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 7220              		.loc 1 1918 0 is_stmt 1
 7221 00de 5D4B     		ldr	r3, .L389+44
 7222 00e0 1B78     		ldrb	r3, [r3]
 7223 00e2 DBB2     		uxtb	r3, r3
 7224 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7225 00e6 9A42     		cmp	r2, r3
 7226 00e8 00D0     		beq	.L350
1919:bluetooth_rxtx.c **** 			goto cleanup;
 7227              		.loc 1 1919 0
 7228 00ea FFE1     		b	.L387
 7229              	.L350:
1920:bluetooth_rxtx.c **** 		}
1921:bluetooth_rxtx.c **** 
1922:bluetooth_rxtx.c **** 		if (rx_err) {
 7230              		.loc 1 1922 0
 7231 00ec 574B     		ldr	r3, .L389+36
 7232 00ee 1B68     		ldr	r3, [r3]
 7233 00f0 002B     		cmp	r3, #0
 7234 00f2 07D0     		beq	.L352
1923:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 7235              		.loc 1 1923 0
 7236 00f4 584B     		ldr	r3, .L389+48
 7237 00f6 1B78     		ldrb	r3, [r3]
 7238 00f8 DBB2     		uxtb	r3, r3
 7239 00fa 43F00203 		orr	r3, r3, #2
 7240 00fe DAB2     		uxtb	r2, r3
 7241 0100 554B     		ldr	r3, .L389+48
 7242 0102 1A70     		strb	r2, [r3]
 7243              	.L352:
1924:bluetooth_rxtx.c **** 		}
1925:bluetooth_rxtx.c **** 
1926:bluetooth_rxtx.c **** 		if (do_hop)
 7244              		.loc 1 1926 0
 7245 0104 524B     		ldr	r3, .L389+40
 7246 0106 1B78     		ldrb	r3, [r3]
 7247 0108 DBB2     		uxtb	r3, r3
 7248 010a 002B     		cmp	r3, #0
 7249 010c 00D0     		beq	.L353
1927:bluetooth_rxtx.c **** 			goto rx_flush;
 7250              		.loc 1 1927 0
 7251 010e 2BE1     		b	.L354
 7252              	.L353:
1928:bluetooth_rxtx.c **** 
1929:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1930:bluetooth_rxtx.c **** 		if (!rx_tc)
 7253              		.loc 1 1930 0
 7254 0110 4D4B     		ldr	r3, .L389+32
 7255 0112 1B68     		ldr	r3, [r3]
 7256 0114 002B     		cmp	r3, #0
 7257 0116 00D1     		bne	.L355
 7258 0118 E1E1     		b	.L344
 7259              	.L355:
1931:bluetooth_rxtx.c **** 			continue;
1932:bluetooth_rxtx.c **** 
1933:bluetooth_rxtx.c **** 		/////////////////////
ARM GAS  /tmp/ccXEAChk.s 			page 161


1934:bluetooth_rxtx.c **** 		// process the packet
1935:bluetooth_rxtx.c **** 
1936:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1937:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7260              		.loc 1 1937 0
 7261 011a 07F10803 		add	r3, r7, #8
 7262 011e FB65     		str	r3, [r7, #92]
1938:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7263              		.loc 1 1938 0
 7264 0120 434B     		ldr	r3, .L389+8
 7265 0122 1B68     		ldr	r3, [r3]
 7266 0124 BB60     		str	r3, [r7, #8]
1939:bluetooth_rxtx.c **** 
1940:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7267              		.loc 1 1940 0
 7268 0126 464B     		ldr	r3, .L389+24
 7269 0128 1B88     		ldrh	r3, [r3]	@ movhi
 7270 012a 9BB2     		uxth	r3, r3
 7271 012c DBB2     		uxtb	r3, r3
 7272 012e 623B     		subs	r3, r3, #98
 7273 0130 DBB2     		uxtb	r3, r3
 7274 0132 1846     		mov	r0, r3
 7275 0134 FFF7FEFF 		bl	btle_channel_index
 7276 0138 0346     		mov	r3, r0
 7277 013a 1A46     		mov	r2, r3
 7278 013c 1346     		mov	r3, r2
 7279 013e 5B00     		lsls	r3, r3, #1
 7280 0140 1344     		add	r3, r3, r2
 7281 0142 1B01     		lsls	r3, r3, #4
 7282 0144 454A     		ldr	r2, .L389+52
 7283 0146 1344     		add	r3, r3, r2
 7284 0148 BB65     		str	r3, [r7, #88]
1941:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 7285              		.loc 1 1941 0
 7286 014a 0023     		movs	r3, #0
 7287 014c 7B66     		str	r3, [r7, #100]
 7288 014e 34E0     		b	.L356
 7289              	.L359:
 7290              	.LBB8:
1942:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7291              		.loc 1 1942 0 discriminator 3
 7292 0150 434A     		ldr	r2, .L389+56
 7293 0152 7B6E     		ldr	r3, [r7, #100]
 7294 0154 1344     		add	r3, r3, r2
 7295 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7296 0158 1A06     		lsls	r2, r3, #24
1943:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7297              		.loc 1 1943 0 discriminator 3
 7298 015a 7B6E     		ldr	r3, [r7, #100]
 7299 015c 0133     		adds	r3, r3, #1
 7300 015e 4049     		ldr	r1, .L389+56
 7301 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7302 0162 1B04     		lsls	r3, r3, #16
 7303 0164 1A43     		orrs	r2, r2, r3
1944:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 7304              		.loc 1 1944 0 discriminator 3
 7305 0166 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/ccXEAChk.s 			page 162


 7306 0168 0233     		adds	r3, r3, #2
 7307 016a 3D49     		ldr	r1, .L389+56
 7308 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7309 016e 1B02     		lsls	r3, r3, #8
 7310 0170 1343     		orrs	r3, r3, r2
1945:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7311              		.loc 1 1945 0 discriminator 3
 7312 0172 7A6E     		ldr	r2, [r7, #100]
 7313 0174 0332     		adds	r2, r2, #3
 7314 0176 3A49     		ldr	r1, .L389+56
 7315 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7316 017a 1343     		orrs	r3, r3, r2
1942:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7317              		.loc 1 1942 0 discriminator 3
 7318 017c 7B65     		str	r3, [r7, #84]
1946:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7319              		.loc 1 1946 0 discriminator 3
 7320 017e 7B6E     		ldr	r3, [r7, #100]
 7321 0180 002B     		cmp	r3, #0
 7322 0182 00DA     		bge	.L357
 7323 0184 0333     		adds	r3, r3, #3
 7324              	.L357:
 7325 0186 9B10     		asrs	r3, r3, #2
 7326 0188 5C1C     		adds	r4, r3, #1
 7327 018a 786D     		ldr	r0, [r7, #84]
 7328 018c FFF7FEFF 		bl	rbit
 7329 0190 0146     		mov	r1, r0
 7330 0192 7B6E     		ldr	r3, [r7, #100]
 7331 0194 002B     		cmp	r3, #0
 7332 0196 00DA     		bge	.L358
 7333 0198 0333     		adds	r3, r3, #3
 7334              	.L358:
 7335 019a 9B10     		asrs	r3, r3, #2
 7336 019c 9B00     		lsls	r3, r3, #2
 7337 019e BA6D     		ldr	r2, [r7, #88]
 7338 01a0 1344     		add	r3, r3, r2
 7339 01a2 1B68     		ldr	r3, [r3]
 7340 01a4 81EA0302 		eor	r2, r1, r3
 7341 01a8 A300     		lsls	r3, r4, #2
 7342 01aa 07F16801 		add	r1, r7, #104
 7343 01ae 0B44     		add	r3, r3, r1
 7344 01b0 43F8602C 		str	r2, [r3, #-96]
 7345              	.LBE8:
1941:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7346              		.loc 1 1941 0 discriminator 3
 7347 01b4 7B6E     		ldr	r3, [r7, #100]
 7348 01b6 0433     		adds	r3, r3, #4
 7349 01b8 7B66     		str	r3, [r7, #100]
 7350              	.L356:
1941:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7351              		.loc 1 1941 0 is_stmt 0 discriminator 1
 7352 01ba 7B6E     		ldr	r3, [r7, #100]
 7353 01bc 032B     		cmp	r3, #3
 7354 01be C7DD     		ble	.L359
1947:bluetooth_rxtx.c **** 		}
1948:bluetooth_rxtx.c **** 
1949:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
ARM GAS  /tmp/ccXEAChk.s 			page 163


 7355              		.loc 1 1949 0 is_stmt 1
 7356 01c0 FB6D     		ldr	r3, [r7, #92]
 7357 01c2 0533     		adds	r3, r3, #5
 7358 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7359 01c6 03F03F03 		and	r3, r3, #63
 7360 01ca 0233     		adds	r3, r3, #2
 7361 01cc 3B65     		str	r3, [r7, #80]
1950:bluetooth_rxtx.c **** 		if (len > 39)
 7362              		.loc 1 1950 0
 7363 01ce 3B6D     		ldr	r3, [r7, #80]
 7364 01d0 272B     		cmp	r3, #39
 7365 01d2 00D9     		bls	.L360
1951:bluetooth_rxtx.c **** 			goto rx_flush;
 7366              		.loc 1 1951 0
 7367 01d4 C8E0     		b	.L354
 7368              	.L360:
1952:bluetooth_rxtx.c **** 
1953:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1954:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1955:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 7369              		.loc 1 1955 0
 7370 01d6 3B6D     		ldr	r3, [r7, #80]
 7371 01d8 0633     		adds	r3, r3, #6
 7372 01da 9B08     		lsrs	r3, r3, #2
 7373 01dc FB64     		str	r3, [r7, #76]
1956:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 7374              		.loc 1 1956 0
 7375 01de FB6C     		ldr	r3, [r7, #76]
 7376 01e0 0A2B     		cmp	r3, #10
 7377 01e2 0DD8     		bhi	.L361
1957:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 7378              		.loc 1 1957 0
 7379 01e4 00BF     		nop
 7380              	.L363:
 7381              		.loc 1 1957 0 is_stmt 0 discriminator 2
 7382 01e6 1F4B     		ldr	r3, .L389+60
 7383 01e8 1A68     		ldr	r2, [r3]
 7384 01ea FB6C     		ldr	r3, [r7, #76]
 7385 01ec 9B00     		lsls	r3, r3, #2
 7386 01ee 1C49     		ldr	r1, .L389+56
 7387 01f0 0B44     		add	r3, r3, r1
 7388 01f2 9A42     		cmp	r2, r3
 7389 01f4 0FD2     		bcs	.L362
 7390              		.loc 1 1957 0 discriminator 1
 7391 01f6 154B     		ldr	r3, .L389+36
 7392 01f8 1B68     		ldr	r3, [r3]
 7393 01fa 002B     		cmp	r3, #0
 7394 01fc F3D0     		beq	.L363
 7395 01fe 0AE0     		b	.L362
 7396              	.L361:
1958:bluetooth_rxtx.c **** 				;
1959:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1960:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 7397              		.loc 1 1960 0 is_stmt 1
 7398 0200 00BF     		nop
 7399              	.L364:
 7400              		.loc 1 1960 0 is_stmt 0 discriminator 2
ARM GAS  /tmp/ccXEAChk.s 			page 164


 7401 0202 194B     		ldr	r3, .L389+64
 7402 0204 1B68     		ldr	r3, [r3]
 7403 0206 03F00103 		and	r3, r3, #1
 7404 020a 002B     		cmp	r3, #0
 7405 020c 03D0     		beq	.L362
 7406              		.loc 1 1960 0 discriminator 1
 7407 020e 0F4B     		ldr	r3, .L389+36
 7408 0210 1B68     		ldr	r3, [r3]
 7409 0212 002B     		cmp	r3, #0
 7410 0214 F5D0     		beq	.L364
 7411              	.L362:
1961:bluetooth_rxtx.c **** 				;
1962:bluetooth_rxtx.c **** 		}
1963:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7412              		.loc 1 1963 0 is_stmt 1
 7413 0216 154A     		ldr	r2, .L389+68
 7414 0218 144B     		ldr	r3, .L389+68
 7415 021a 1B68     		ldr	r3, [r3]
 7416 021c 23F00103 		bic	r3, r3, #1
 7417 0220 1360     		str	r3, [r2]
1964:bluetooth_rxtx.c **** 
1965:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1966:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 7418              		.loc 1 1966 0
 7419 0222 0423     		movs	r3, #4
 7420 0224 7B66     		str	r3, [r7, #100]
 7421 0226 58E0     		b	.L365
 7422              	.L390:
 7423              		.align	2
 7424              	.L389:
 7425 0228 00000000 		.word	modulation
 7426 022c 00000000 		.word	mode
 7427 0230 00000000 		.word	le
 7428 0234 00E100E0 		.word	-536813312
 7429 0238 3CC00920 		.word	537509948
 7430 023c 00000000 		.word	requested_channel
 7431 0240 00000000 		.word	channel
 7432 0244 00000000 		.word	saved_request
 7433 0248 00000000 		.word	rx_tc
 7434 024c 00000000 		.word	rx_err
 7435 0250 00000000 		.word	do_hop
 7436 0254 00000000 		.word	requested_mode
 7437 0258 00000000 		.word	status
 7438 025c 10010000 		.word	whitening_word
 7439 0260 00000000 		.word	rxbuf1
 7440 0264 04410050 		.word	1342193924
 7441 0268 10410050 		.word	1342193936
 7442 026c 24000340 		.word	1073938468
 7443              	.L368:
 7444              	.LBB9:
1967:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7445              		.loc 1 1967 0 discriminator 3
 7446 0270 A54A     		ldr	r2, .L391
 7447 0272 7B6E     		ldr	r3, [r7, #100]
 7448 0274 1344     		add	r3, r3, r2
 7449 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7450 0278 1A06     		lsls	r2, r3, #24
ARM GAS  /tmp/ccXEAChk.s 			page 165


1968:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7451              		.loc 1 1968 0 discriminator 3
 7452 027a 7B6E     		ldr	r3, [r7, #100]
 7453 027c 0133     		adds	r3, r3, #1
 7454 027e A249     		ldr	r1, .L391
 7455 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7456 0282 1B04     		lsls	r3, r3, #16
 7457 0284 1A43     		orrs	r2, r2, r3
1969:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 7458              		.loc 1 1969 0 discriminator 3
 7459 0286 7B6E     		ldr	r3, [r7, #100]
 7460 0288 0233     		adds	r3, r3, #2
 7461 028a 9F49     		ldr	r1, .L391
 7462 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7463 028e 1B02     		lsls	r3, r3, #8
 7464 0290 1343     		orrs	r3, r3, r2
1970:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7465              		.loc 1 1970 0 discriminator 3
 7466 0292 7A6E     		ldr	r2, [r7, #100]
 7467 0294 0332     		adds	r2, r2, #3
 7468 0296 9C49     		ldr	r1, .L391
 7469 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7470 029a 1343     		orrs	r3, r3, r2
1967:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7471              		.loc 1 1967 0 discriminator 3
 7472 029c BB64     		str	r3, [r7, #72]
1971:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7473              		.loc 1 1971 0 discriminator 3
 7474 029e 7B6E     		ldr	r3, [r7, #100]
 7475 02a0 002B     		cmp	r3, #0
 7476 02a2 00DA     		bge	.L366
 7477 02a4 0333     		adds	r3, r3, #3
 7478              	.L366:
 7479 02a6 9B10     		asrs	r3, r3, #2
 7480 02a8 5C1C     		adds	r4, r3, #1
 7481 02aa B86C     		ldr	r0, [r7, #72]
 7482 02ac FFF7FEFF 		bl	rbit
 7483 02b0 0146     		mov	r1, r0
 7484 02b2 7B6E     		ldr	r3, [r7, #100]
 7485 02b4 002B     		cmp	r3, #0
 7486 02b6 00DA     		bge	.L367
 7487 02b8 0333     		adds	r3, r3, #3
 7488              	.L367:
 7489 02ba 9B10     		asrs	r3, r3, #2
 7490 02bc 9B00     		lsls	r3, r3, #2
 7491 02be BA6D     		ldr	r2, [r7, #88]
 7492 02c0 1344     		add	r3, r3, r2
 7493 02c2 1B68     		ldr	r3, [r3]
 7494 02c4 81EA0302 		eor	r2, r1, r3
 7495 02c8 A300     		lsls	r3, r4, #2
 7496 02ca 07F16801 		add	r1, r7, #104
 7497 02ce 0B44     		add	r3, r3, r1
 7498 02d0 43F8602C 		str	r2, [r3, #-96]
 7499              	.LBE9:
1966:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7500              		.loc 1 1966 0 discriminator 3
 7501 02d4 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/ccXEAChk.s 			page 166


 7502 02d6 0433     		adds	r3, r3, #4
 7503 02d8 7B66     		str	r3, [r7, #100]
 7504              	.L365:
1966:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7505              		.loc 1 1966 0 is_stmt 0 discriminator 1
 7506 02da 7B6E     		ldr	r3, [r7, #100]
 7507 02dc 2B2B     		cmp	r3, #43
 7508 02de C7DD     		ble	.L368
1972:bluetooth_rxtx.c **** 		}
1973:bluetooth_rxtx.c **** 
1974:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 7509              		.loc 1 1974 0 is_stmt 1
 7510 02e0 8A4B     		ldr	r3, .L391+4
 7511 02e2 1B69     		ldr	r3, [r3, #16]
 7512 02e4 002B     		cmp	r3, #0
 7513 02e6 23D0     		beq	.L369
 7514              	.LBB10:
1975:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7515              		.loc 1 1975 0
 7516 02e8 884B     		ldr	r3, .L391+4
 7517 02ea D968     		ldr	r1, [r3, #12]
 7518 02ec FB6D     		ldr	r3, [r7, #92]
 7519 02ee 1A1D     		adds	r2, r3, #4
 7520 02f0 3B6D     		ldr	r3, [r7, #80]
 7521 02f2 0846     		mov	r0, r1
 7522 02f4 1146     		mov	r1, r2
 7523 02f6 1A46     		mov	r2, r3
 7524 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 7525 02fc 7864     		str	r0, [r7, #68]
1976:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7526              		.loc 1 1976 0
 7527 02fe 3B6D     		ldr	r3, [r7, #80]
 7528 0300 0633     		adds	r3, r3, #6
 7529 0302 FA6D     		ldr	r2, [r7, #92]
 7530 0304 1344     		add	r3, r3, r2
 7531 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7532 0308 1A04     		lsls	r2, r3, #16
1977:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 7533              		.loc 1 1977 0
 7534 030a 3B6D     		ldr	r3, [r7, #80]
 7535 030c 0533     		adds	r3, r3, #5
 7536 030e F96D     		ldr	r1, [r7, #92]
 7537 0310 0B44     		add	r3, r3, r1
 7538 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7539 0314 1B02     		lsls	r3, r3, #8
 7540 0316 1343     		orrs	r3, r3, r2
1978:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 7541              		.loc 1 1978 0
 7542 0318 3A6D     		ldr	r2, [r7, #80]
 7543 031a 0432     		adds	r2, r2, #4
 7544 031c F96D     		ldr	r1, [r7, #92]
 7545 031e 0A44     		add	r2, r2, r1
 7546 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7547 0322 1343     		orrs	r3, r3, r2
1976:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7548              		.loc 1 1976 0
 7549 0324 3B64     		str	r3, [r7, #64]
ARM GAS  /tmp/ccXEAChk.s 			page 167


1979:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 7550              		.loc 1 1979 0
 7551 0326 7A6C     		ldr	r2, [r7, #68]
 7552 0328 3B6C     		ldr	r3, [r7, #64]
 7553 032a 9A42     		cmp	r2, r3
 7554 032c 00D0     		beq	.L369
1980:bluetooth_rxtx.c **** 				goto rx_flush;
 7555              		.loc 1 1980 0
 7556 032e 1BE0     		b	.L354
 7557              	.L369:
 7558              	.LBE10:
1981:bluetooth_rxtx.c **** 		}
1982:bluetooth_rxtx.c **** 
1983:bluetooth_rxtx.c **** 
1984:bluetooth_rxtx.c **** 		RXLED_SET;
 7559              		.loc 1 1984 0
 7560 0330 774B     		ldr	r3, .L391+8
 7561 0332 1022     		movs	r2, #16
 7562 0334 1A60     		str	r2, [r3]
1985:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 7563              		.loc 1 1985 0
 7564 0336 774B     		ldr	r3, .L391+12
 7565 0338 1B68     		ldr	r3, [r3]
 7566 033a 07F10802 		add	r2, r7, #8
 7567 033e 1046     		mov	r0, r2
 7568 0340 9847     		blx	r3
1986:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 7569              		.loc 1 1986 0
 7570 0342 07F10803 		add	r3, r7, #8
 7571 0346 0120     		movs	r0, #1
 7572 0348 1946     		mov	r1, r3
 7573 034a FFF7FEFF 		bl	enqueue
1987:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 7574              		.loc 1 1987 0
 7575 034e 724B     		ldr	r3, .L391+16
 7576 0350 1B68     		ldr	r3, [r3]
 7577 0352 C3F31303 		ubfx	r3, r3, #0, #20
 7578 0356 40F63542 		movw	r2, #3125
 7579 035a 02FB03F2 		mul	r2, r2, r3
 7580 035e 6F4B     		ldr	r3, .L391+20
 7581 0360 1B68     		ldr	r3, [r3]
 7582 0362 1344     		add	r3, r3, r2
 7583 0364 694A     		ldr	r2, .L391+4
 7584 0366 1364     		str	r3, [r2, #64]
 7585              	.L354:
1988:bluetooth_rxtx.c **** 
1989:bluetooth_rxtx.c **** 	rx_flush:
1990:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 7586              		.loc 1 1990 0
 7587 0368 6120     		movs	r0, #97
 7588 036a FFF7FEFF 		bl	cc2400_strobe
1991:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 7589              		.loc 1 1991 0
 7590 036e 00BF     		nop
 7591              	.L370:
 7592              		.loc 1 1991 0 is_stmt 0 discriminator 1
 7593 0370 FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/ccXEAChk.s 			page 168


 7594 0374 0346     		mov	r3, r0
 7595 0376 03F00403 		and	r3, r3, #4
 7596 037a 002B     		cmp	r3, #0
 7597 037c F8D0     		beq	.L370
1992:bluetooth_rxtx.c **** 
1993:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
1994:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7598              		.loc 1 1994 0 is_stmt 1
 7599 037e 684A     		ldr	r2, .L391+24
 7600 0380 674B     		ldr	r3, .L391+24
 7601 0382 1B68     		ldr	r3, [r3]
 7602 0384 23F00103 		bic	r3, r3, #1
 7603 0388 1360     		str	r3, [r2]
1995:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7604              		.loc 1 1995 0
 7605 038a 03E0     		b	.L371
 7606              	.L372:
 7607              	.LBB11:
1996:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 7608              		.loc 1 1996 0
 7609 038c 654B     		ldr	r3, .L391+28
 7610 038e 1B68     		ldr	r3, [r3]
 7611 0390 87F83F30 		strb	r3, [r7, #63]
 7612              	.L371:
 7613              	.LBE11:
1995:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7614              		.loc 1 1995 0
 7615 0394 644B     		ldr	r3, .L391+32
 7616 0396 1B68     		ldr	r3, [r3]
 7617 0398 03F00403 		and	r3, r3, #4
 7618 039c 002B     		cmp	r3, #0
 7619 039e F5D1     		bne	.L372
1997:bluetooth_rxtx.c **** 		}
1998:bluetooth_rxtx.c **** 
1999:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2000:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 7620              		.loc 1 2000 0
 7621 03a0 5D4B     		ldr	r3, .L391+16
 7622 03a2 1B68     		ldr	r3, [r3]
 7623 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 7624 03a8 40F63542 		movw	r2, #3125
 7625 03ac 02FB03F2 		mul	r2, r2, r3
 7626 03b0 5A4B     		ldr	r3, .L391+20
 7627 03b2 1B68     		ldr	r3, [r3]
 7628 03b4 1344     		add	r3, r3, r2
 7629 03b6 3B66     		str	r3, [r7, #96]
2001:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 7630              		.loc 1 2001 0
 7631 03b8 544B     		ldr	r3, .L391+4
 7632 03ba 1A6C     		ldr	r2, [r3, #64]
 7633 03bc 3B6E     		ldr	r3, [r7, #96]
 7634 03be 9A42     		cmp	r2, r3
 7635 03c0 05D9     		bls	.L373
2002:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 7636              		.loc 1 2002 0
 7637 03c2 3B6E     		ldr	r3, [r7, #96]
 7638 03c4 03F14343 		add	r3, r3, #-1023410176
ARM GAS  /tmp/ccXEAChk.s 			page 169


 7639 03c8 03F5A003 		add	r3, r3, #5242880
 7640 03cc 3B66     		str	r3, [r7, #96]
 7641              	.L373:
2003:bluetooth_rxtx.c **** 		if  ( // timeout
2004:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 7642              		.loc 1 2004 0
 7643 03ce 4F4B     		ldr	r3, .L391+4
 7644 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
2003:bluetooth_rxtx.c **** 		if  ( // timeout
 7645              		.loc 1 2003 0
 7646 03d2 032B     		cmp	r3, #3
 7647 03d4 03D0     		beq	.L374
 7648              		.loc 1 2004 0
 7649 03d6 4D4B     		ldr	r3, .L391+4
 7650 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7651 03da 022B     		cmp	r3, #2
 7652 03dc 06D1     		bne	.L375
 7653              	.L374:
2005:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 7654              		.loc 1 2005 0
 7655 03de 4B4B     		ldr	r3, .L391+4
 7656 03e0 1B6C     		ldr	r3, [r3, #64]
 7657 03e2 3A6E     		ldr	r2, [r7, #96]
 7658 03e4 D31A     		subs	r3, r2, r3
 7659 03e6 514A     		ldr	r2, .L391+36
 7660 03e8 9342     		cmp	r3, r2
 7661 03ea 03D8     		bhi	.L376
 7662              	.L375:
2006:bluetooth_rxtx.c **** 			// jam finished
2007:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 7663              		.loc 1 2007 0
 7664 03ec 504B     		ldr	r3, .L391+40
 7665 03ee 1B68     		ldr	r3, [r3]
 7666 03f0 012B     		cmp	r3, #1
 7667 03f2 37D1     		bne	.L377
 7668              	.L376:
2008:bluetooth_rxtx.c **** 			)
2009:bluetooth_rxtx.c **** 		{
2010:bluetooth_rxtx.c **** 			reset_le();
 7669              		.loc 1 2010 0
 7670 03f4 FFF7FEFF 		bl	reset_le
2011:bluetooth_rxtx.c **** 			le_jam_count = 0;
 7671              		.loc 1 2011 0
 7672 03f8 4D4B     		ldr	r3, .L391+40
 7673 03fa 0022     		movs	r2, #0
 7674 03fc 1A60     		str	r2, [r3]
2012:bluetooth_rxtx.c **** 			TXLED_CLR;
 7675              		.loc 1 2012 0
 7676 03fe 4D4B     		ldr	r3, .L391+44
 7677 0400 4FF48072 		mov	r2, #256
 7678 0404 1A60     		str	r2, [r3]
2013:bluetooth_rxtx.c **** 
2014:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 7679              		.loc 1 2014 0
 7680 0406 4C4B     		ldr	r3, .L391+48
 7681 0408 1B78     		ldrb	r3, [r3]
 7682 040a DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccXEAChk.s 			page 170


 7683 040c 012B     		cmp	r3, #1
 7684 040e 06D1     		bne	.L378
2015:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 7685              		.loc 1 2015 0
 7686 0410 494B     		ldr	r3, .L391+48
 7687 0412 0022     		movs	r2, #0
 7688 0414 1A70     		strb	r2, [r3]
2016:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 7689              		.loc 1 2016 0
 7690 0416 494B     		ldr	r3, .L391+52
 7691 0418 0022     		movs	r2, #0
 7692 041a 1A70     		strb	r2, [r3]
2017:bluetooth_rxtx.c **** 				goto cleanup;
 7693              		.loc 1 2017 0
 7694 041c 66E0     		b	.L387
 7695              	.L378:
2018:bluetooth_rxtx.c **** 			}
2019:bluetooth_rxtx.c **** 
2020:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2021:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 7696              		.loc 1 2021 0
 7697 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7698 0420 0A2B     		cmp	r3, #10
 7699 0422 01D1     		bne	.L379
2022:bluetooth_rxtx.c **** 				goto cleanup;
 7700              		.loc 1 2022 0
 7701 0424 00BF     		nop
 7702 0426 61E0     		b	.L387
 7703              	.L379:
2023:bluetooth_rxtx.c **** 
2024:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 7704              		.loc 1 2024 0
 7705 0428 384B     		ldr	r3, .L391+4
 7706 042a 0122     		movs	r2, #1
 7707 042c 1A75     		strb	r2, [r3, #20]
2025:bluetooth_rxtx.c **** 
2026:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7708              		.loc 1 2026 0
 7709 042e 6420     		movs	r0, #100
 7710 0430 FFF7FEFF 		bl	cc2400_strobe
2027:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7711              		.loc 1 2027 0
 7712 0434 00BF     		nop
 7713              	.L380:
 7714              		.loc 1 2027 0 is_stmt 0 discriminator 1
 7715 0436 FFF7FEFF 		bl	cc2400_status
 7716 043a 0346     		mov	r3, r0
 7717 043c 03F00403 		and	r3, r3, #4
 7718 0440 002B     		cmp	r3, #0
 7719 0442 F8D1     		bne	.L380
2028:bluetooth_rxtx.c **** 
2029:bluetooth_rxtx.c **** 			/* Retune */
2030:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 7720              		.loc 1 2030 0 is_stmt 1
 7721 0444 3E4B     		ldr	r3, .L391+56
 7722 0446 1B88     		ldrh	r3, [r3]	@ movhi
 7723 0448 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccXEAChk.s 			page 171


 7724 044a 002B     		cmp	r3, #0
 7725 044c 03D0     		beq	.L381
 7726              		.loc 1 2030 0 is_stmt 0 discriminator 1
 7727 044e 3C4B     		ldr	r3, .L391+56
 7728 0450 1B88     		ldrh	r3, [r3]	@ movhi
 7729 0452 9BB2     		uxth	r3, r3
 7730 0454 01E0     		b	.L382
 7731              	.L381:
 7732              		.loc 1 2030 0 discriminator 2
 7733 0456 40F66213 		movw	r3, #2402
 7734              	.L382:
 7735              		.loc 1 2030 0 discriminator 4
 7736 045a 3A4A     		ldr	r2, .L391+60
 7737 045c 1380     		strh	r3, [r2]	@ movhi
2031:bluetooth_rxtx.c **** 			restart_jamming = 1;
 7738              		.loc 1 2031 0 is_stmt 1 discriminator 4
 7739 045e 3A4B     		ldr	r3, .L391+64
 7740 0460 0122     		movs	r2, #1
 7741 0462 1A60     		str	r2, [r3]
 7742              	.L377:
2032:bluetooth_rxtx.c **** 		}
2033:bluetooth_rxtx.c **** 
2034:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 7743              		.loc 1 2034 0
 7744 0464 294B     		ldr	r3, .L391+4
 7745 0466 DB88     		ldrh	r3, [r3, #6]
 7746 0468 2C20     		movs	r0, #44
 7747 046a 1946     		mov	r1, r3
 7748 046c FFF7FEFF 		bl	cc2400_set
2035:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 7749              		.loc 1 2035 0
 7750 0470 264B     		ldr	r3, .L391+4
 7751 0472 9B88     		ldrh	r3, [r3, #4]
 7752 0474 2D20     		movs	r0, #45
 7753 0476 1946     		mov	r1, r3
 7754 0478 FFF7FEFF 		bl	cc2400_set
2036:bluetooth_rxtx.c **** 
2037:bluetooth_rxtx.c **** 		if (do_hop)
 7755              		.loc 1 2037 0
 7756 047c 334B     		ldr	r3, .L391+68
 7757 047e 1B78     		ldrb	r3, [r3]
 7758 0480 DBB2     		uxtb	r3, r3
 7759 0482 002B     		cmp	r3, #0
 7760 0484 01D0     		beq	.L383
2038:bluetooth_rxtx.c **** 			hop();
 7761              		.loc 1 2038 0
 7762 0486 FFF7FEFF 		bl	hop
 7763              	.L383:
2039:bluetooth_rxtx.c **** 
2040:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2041:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 7764              		.loc 1 2041 0
 7765 048a 294B     		ldr	r3, .L391+40
 7766 048c 1B68     		ldr	r3, [r3]
 7767 048e 002B     		cmp	r3, #0
 7768 0490 07DD     		ble	.L384
2042:bluetooth_rxtx.c **** 			le_jam();
ARM GAS  /tmp/ccXEAChk.s 			page 172


 7769              		.loc 1 2042 0
 7770 0492 FFF7FEFF 		bl	le_jam
2043:bluetooth_rxtx.c **** 			--le_jam_count;
 7771              		.loc 1 2043 0
 7772 0496 264B     		ldr	r3, .L391+40
 7773 0498 1B68     		ldr	r3, [r3]
 7774 049a 013B     		subs	r3, r3, #1
 7775 049c 244A     		ldr	r2, .L391+40
 7776 049e 1360     		str	r3, [r2]
 7777 04a0 17E0     		b	.L385
 7778              	.L384:
2044:bluetooth_rxtx.c **** 		} else {
2045:bluetooth_rxtx.c **** 			/* RX mode */
2046:bluetooth_rxtx.c **** 			dma_init_le();
 7779              		.loc 1 2046 0
 7780 04a2 FFF7FEFF 		bl	dma_init_le
2047:bluetooth_rxtx.c **** 			dio_ssp_start();
 7781              		.loc 1 2047 0
 7782 04a6 FFF7FEFF 		bl	dio_ssp_start
2048:bluetooth_rxtx.c **** 
2049:bluetooth_rxtx.c **** 			if (restart_jamming) {
 7783              		.loc 1 2049 0
 7784 04aa 274B     		ldr	r3, .L391+64
 7785 04ac 1B68     		ldr	r3, [r3]
 7786 04ae 002B     		cmp	r3, #0
 7787 04b0 0CD0     		beq	.L386
2050:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 7788              		.loc 1 2050 0
 7789 04b2 164B     		ldr	r3, .L391+4
 7790 04b4 1B68     		ldr	r3, [r3]
 7791 04b6 1846     		mov	r0, r3
 7792 04b8 FFF7FEFF 		bl	rbit
 7793 04bc 0346     		mov	r3, r0
 7794 04be 1846     		mov	r0, r3
 7795 04c0 FFF7FEFF 		bl	cc2400_rx_sync
2051:bluetooth_rxtx.c **** 				restart_jamming = 0;
 7796              		.loc 1 2051 0
 7797 04c4 204B     		ldr	r3, .L391+64
 7798 04c6 0022     		movs	r2, #0
 7799 04c8 1A60     		str	r2, [r3]
 7800 04ca 02E0     		b	.L385
 7801              	.L386:
2052:bluetooth_rxtx.c **** 			} else {
2053:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 7802              		.loc 1 2053 0
 7803 04cc 6220     		movs	r0, #98
 7804 04ce FFF7FEFF 		bl	cc2400_strobe
 7805              	.L385:
2054:bluetooth_rxtx.c **** 			}
2055:bluetooth_rxtx.c **** 		}
2056:bluetooth_rxtx.c **** 
2057:bluetooth_rxtx.c **** 		rx_tc = 0;
 7806              		.loc 1 2057 0
 7807 04d2 1F4B     		ldr	r3, .L391+72
 7808 04d4 0022     		movs	r2, #0
 7809 04d6 1A60     		str	r2, [r3]
2058:bluetooth_rxtx.c **** 		rx_err = 0;
ARM GAS  /tmp/ccXEAChk.s 			page 173


 7810              		.loc 1 2058 0
 7811 04d8 1E4B     		ldr	r3, .L391+76
 7812 04da 0022     		movs	r2, #0
 7813 04dc 1A60     		str	r2, [r3]
 7814              	.L344:
 7815              	.LBE7:
1892:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7816              		.loc 1 1892 0
 7817 04de 174B     		ldr	r3, .L391+52
 7818 04e0 1B78     		ldrb	r3, [r3]
 7819 04e2 DBB2     		uxtb	r3, r3
 7820 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7821 04e6 9A42     		cmp	r2, r3
 7822 04e8 3FF4B1AD 		beq	.L388
 7823              	.L387:
2059:bluetooth_rxtx.c **** 	}
2060:bluetooth_rxtx.c **** 
2061:bluetooth_rxtx.c **** cleanup:
2062:bluetooth_rxtx.c **** 
2063:bluetooth_rxtx.c **** 	// disable USB interrupts
2064:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7824              		.loc 1 2064 0
 7825 04ec 1A4B     		ldr	r3, .L391+80
 7826 04ee 4FF08072 		mov	r2, #16777216
 7827 04f2 1A60     		str	r2, [r3]
2065:bluetooth_rxtx.c **** 
2066:bluetooth_rxtx.c **** 	// reset the radio completely
2067:bluetooth_rxtx.c **** 	cc2400_idle();
 7828              		.loc 1 2067 0
 7829 04f4 FFF7FEFF 		bl	cc2400_idle
2068:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7830              		.loc 1 2068 0
 7831 04f8 FFF7FEFF 		bl	dio_ssp_stop
2069:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7832              		.loc 1 2069 0
 7833 04fc FFF7FEFF 		bl	cs_trigger_disable
2070:bluetooth_rxtx.c **** }
 7834              		.loc 1 2070 0
 7835 0500 6C37     		adds	r7, r7, #108
 7836              		.cfi_def_cfa_offset 12
 7837 0502 BD46     		mov	sp, r7
 7838              		.cfi_def_cfa_register 13
 7839              		@ sp needed
 7840 0504 90BD     		pop	{r4, r7, pc}
 7841              	.L392:
 7842 0506 00BF     		.align	2
 7843              	.L391:
 7844 0508 00000000 		.word	rxbuf1
 7845 050c 00000000 		.word	le
 7846 0510 38C00920 		.word	537509944
 7847 0514 00000000 		.word	packet_cb
 7848 0518 00000000 		.word	clkn
 7849 051c 08400040 		.word	1073758216
 7850 0520 24000340 		.word	1073938468
 7851 0524 08000340 		.word	1073938440
 7852 0528 0C000340 		.word	1073938444
 7853 052c 80F0FA02 		.word	50000000
ARM GAS  /tmp/ccXEAChk.s 			page 174


 7854 0530 00000000 		.word	le_jam_count
 7855 0534 3CC00920 		.word	537509948
 7856 0538 00000000 		.word	jam_mode
 7857 053c 00000000 		.word	requested_mode
 7858 0540 00000000 		.word	saved_request
 7859 0544 00000000 		.word	channel
 7860 0548 D4000000 		.word	restart_jamming.4710
 7861 054c 00000000 		.word	do_hop
 7862 0550 00000000 		.word	rx_tc
 7863 0554 00000000 		.word	rx_err
 7864 0558 80E100E0 		.word	-536813184
 7865              		.cfi_endproc
 7866              	.LFE31:
 7868              		.section	.text.cb_follow_le,"ax",%progbits
 7869              		.align	2
 7870              		.global	cb_follow_le
 7871              		.thumb
 7872              		.thumb_func
 7874              	cb_follow_le:
 7875              	.LFB32:
2071:bluetooth_rxtx.c **** 
2072:bluetooth_rxtx.c **** 
2073:bluetooth_rxtx.c **** 
2074:bluetooth_rxtx.c **** /* low energy connection following
2075:bluetooth_rxtx.c ****  * follows a known AA around */
2076:bluetooth_rxtx.c **** int cb_follow_le() {
 7876              		.loc 1 2076 0
 7877              		.cfi_startproc
 7878              		@ args = 0, pretend = 0, frame = 48
 7879              		@ frame_needed = 1, uses_anonymous_args = 0
 7880 0000 80B5     		push	{r7, lr}
 7881              		.cfi_def_cfa_offset 8
 7882              		.cfi_offset 7, -8
 7883              		.cfi_offset 14, -4
 7884 0002 8CB0     		sub	sp, sp, #48
 7885              		.cfi_def_cfa_offset 56
 7886 0004 00AF     		add	r7, sp, #0
 7887              		.cfi_def_cfa_register 7
2077:bluetooth_rxtx.c **** 	int i, j, k;
2078:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 7888              		.loc 1 2078 0
 7889 0006 6C4B     		ldr	r3, .L409
 7890 0008 1B88     		ldrh	r3, [r3]	@ movhi
 7891 000a 9BB2     		uxth	r3, r3
 7892 000c DBB2     		uxtb	r3, r3
 7893 000e 623B     		subs	r3, r3, #98
 7894 0010 DBB2     		uxtb	r3, r3
 7895 0012 1846     		mov	r0, r3
 7896 0014 FFF7FEFF 		bl	btle_channel_index
 7897 0018 0346     		mov	r3, r0
 7898 001a 1A46     		mov	r2, r3
 7899 001c 674B     		ldr	r3, .L409+4
 7900 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7901 0020 3B62     		str	r3, [r7, #32]
2079:bluetooth_rxtx.c **** 
2080:bluetooth_rxtx.c **** 	u32 access_address = 0;
 7902              		.loc 1 2080 0
ARM GAS  /tmp/ccXEAChk.s 			page 175


 7903 0022 0023     		movs	r3, #0
 7904 0024 FB61     		str	r3, [r7, #28]
2081:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7905              		.loc 1 2081 0
 7906 0026 0023     		movs	r3, #0
 7907 0028 FB62     		str	r3, [r7, #44]
 7908 002a 0EE0     		b	.L394
 7909              	.L395:
2082:bluetooth_rxtx.c **** 		access_address >>= 1;
 7910              		.loc 1 2082 0 discriminator 3
 7911 002c FB69     		ldr	r3, [r7, #28]
 7912 002e 5B08     		lsrs	r3, r3, #1
 7913 0030 FB61     		str	r3, [r7, #28]
2083:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7914              		.loc 1 2083 0 discriminator 3
 7915 0032 634A     		ldr	r2, .L409+8
 7916 0034 FB6A     		ldr	r3, [r7, #44]
 7917 0036 1344     		add	r3, r3, r2
 7918 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7919 003a DB07     		lsls	r3, r3, #31
 7920 003c 1A46     		mov	r2, r3
 7921 003e FB69     		ldr	r3, [r7, #28]
 7922 0040 1343     		orrs	r3, r3, r2
 7923 0042 FB61     		str	r3, [r7, #28]
2081:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7924              		.loc 1 2081 0 discriminator 3
 7925 0044 FB6A     		ldr	r3, [r7, #44]
 7926 0046 0133     		adds	r3, r3, #1
 7927 0048 FB62     		str	r3, [r7, #44]
 7928              	.L394:
2081:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7929              		.loc 1 2081 0 is_stmt 0 discriminator 1
 7930 004a FB6A     		ldr	r3, [r7, #44]
 7931 004c 1E2B     		cmp	r3, #30
 7932 004e EDDD     		ble	.L395
2084:bluetooth_rxtx.c **** 	}
2085:bluetooth_rxtx.c **** 
2086:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 7933              		.loc 1 2086 0 is_stmt 1
 7934 0050 1F23     		movs	r3, #31
 7935 0052 FB62     		str	r3, [r7, #44]
 7936 0054 A6E0     		b	.L396
 7937              	.L407:
2087:bluetooth_rxtx.c **** 		access_address >>= 1;
 7938              		.loc 1 2087 0
 7939 0056 FB69     		ldr	r3, [r7, #28]
 7940 0058 5B08     		lsrs	r3, r3, #1
 7941 005a FB61     		str	r3, [r7, #28]
2088:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7942              		.loc 1 2088 0
 7943 005c 584A     		ldr	r2, .L409+8
 7944 005e FB6A     		ldr	r3, [r7, #44]
 7945 0060 1344     		add	r3, r3, r2
 7946 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7947 0064 DB07     		lsls	r3, r3, #31
 7948 0066 1A46     		mov	r2, r3
 7949 0068 FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/ccXEAChk.s 			page 176


 7950 006a 1343     		orrs	r3, r3, r2
 7951 006c FB61     		str	r3, [r7, #28]
2089:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 7952              		.loc 1 2089 0
 7953 006e 554B     		ldr	r3, .L409+12
 7954 0070 1A68     		ldr	r2, [r3]
 7955 0072 FB69     		ldr	r3, [r7, #28]
 7956 0074 9A42     		cmp	r2, r3
 7957 0076 40F09280 		bne	.L397
2090:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 7958              		.loc 1 2090 0
 7959 007a 0023     		movs	r3, #0
 7960 007c BB62     		str	r3, [r7, #40]
 7961 007e 48E0     		b	.L398
 7962              	.L404:
 7963              	.LBB12:
2091:bluetooth_rxtx.c **** 				u8 byte = 0;
 7964              		.loc 1 2091 0
 7965 0080 0023     		movs	r3, #0
 7966 0082 FB76     		strb	r3, [r7, #27]
2092:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 7967              		.loc 1 2092 0
 7968 0084 0023     		movs	r3, #0
 7969 0086 7B62     		str	r3, [r7, #36]
 7970 0088 37E0     		b	.L399
 7971              	.L403:
 7972              	.LBB13:
2093:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7973              		.loc 1 2093 0
 7974 008a BB6A     		ldr	r3, [r7, #40]
 7975 008c DA00     		lsls	r2, r3, #3
 7976 008e 7B6A     		ldr	r3, [r7, #36]
 7977 0090 1A44     		add	r2, r2, r3
 7978 0092 FB6A     		ldr	r3, [r7, #44]
 7979 0094 1344     		add	r3, r3, r2
 7980 0096 1F3B     		subs	r3, r3, #31
 7981 0098 3B61     		str	r3, [r7, #16]
2094:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 7982              		.loc 1 2094 0
 7983 009a 3B69     		ldr	r3, [r7, #16]
 7984 009c B3F5487F 		cmp	r3, #800
 7985 00a0 00DB     		blt	.L400
 7986 00a2 2DE0     		b	.L401
 7987              	.L400:
2095:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 7988              		.loc 1 2095 0
 7989 00a4 464A     		ldr	r2, .L409+8
 7990 00a6 3B69     		ldr	r3, [r7, #16]
 7991 00a8 1344     		add	r3, r3, r2
 7992 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7993 00ac 7B61     		str	r3, [r7, #20]
2096:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 7994              		.loc 1 2096 0
 7995 00ae BB6A     		ldr	r3, [r7, #40]
 7996 00b0 032B     		cmp	r3, #3
 7997 00b2 16DD     		ble	.L402
2097:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
ARM GAS  /tmp/ccXEAChk.s 			page 177


 7998              		.loc 1 2097 0
 7999 00b4 444A     		ldr	r2, .L409+16
 8000 00b6 3B6A     		ldr	r3, [r7, #32]
 8001 00b8 1344     		add	r3, r3, r2
 8002 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8003 00bc 1A46     		mov	r2, r3
 8004 00be 7B69     		ldr	r3, [r7, #20]
 8005 00c0 5340     		eors	r3, r3, r2
 8006 00c2 7B61     		str	r3, [r7, #20]
2098:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 8007              		.loc 1 2098 0
 8008 00c4 3B6A     		ldr	r3, [r7, #32]
 8009 00c6 0133     		adds	r3, r3, #1
 8010 00c8 1946     		mov	r1, r3
 8011 00ca 404B     		ldr	r3, .L409+20
 8012 00cc A1FB0323 		umull	r2, r3, r1, r3
 8013 00d0 C81A     		subs	r0, r1, r3
 8014 00d2 4008     		lsrs	r0, r0, #1
 8015 00d4 0344     		add	r3, r3, r0
 8016 00d6 9A09     		lsrs	r2, r3, #6
 8017 00d8 1346     		mov	r3, r2
 8018 00da DB01     		lsls	r3, r3, #7
 8019 00dc 9B1A     		subs	r3, r3, r2
 8020 00de CA1A     		subs	r2, r1, r3
 8021 00e0 3A62     		str	r2, [r7, #32]
 8022              	.L402:
2099:bluetooth_rxtx.c **** 					}
2100:bluetooth_rxtx.c **** 					byte |= bit << k;
 8023              		.loc 1 2100 0 discriminator 2
 8024 00e2 7A69     		ldr	r2, [r7, #20]
 8025 00e4 7B6A     		ldr	r3, [r7, #36]
 8026 00e6 02FA03F3 		lsl	r3, r2, r3
 8027 00ea DAB2     		uxtb	r2, r3
 8028 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 8029 00ee 1343     		orrs	r3, r3, r2
 8030 00f0 DBB2     		uxtb	r3, r3
 8031 00f2 FB76     		strb	r3, [r7, #27]
 8032              	.LBE13:
2092:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8033              		.loc 1 2092 0 discriminator 2
 8034 00f4 7B6A     		ldr	r3, [r7, #36]
 8035 00f6 0133     		adds	r3, r3, #1
 8036 00f8 7B62     		str	r3, [r7, #36]
 8037              	.L399:
2092:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8038              		.loc 1 2092 0 is_stmt 0 discriminator 1
 8039 00fa 7B6A     		ldr	r3, [r7, #36]
 8040 00fc 072B     		cmp	r3, #7
 8041 00fe C4DD     		ble	.L403
 8042              	.L401:
2101:bluetooth_rxtx.c **** 				}
2102:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 8043              		.loc 1 2102 0 is_stmt 1 discriminator 2
 8044 0100 334B     		ldr	r3, .L409+24
 8045 0102 1A68     		ldr	r2, [r3]
 8046 0104 BB6A     		ldr	r3, [r7, #40]
 8047 0106 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccXEAChk.s 			page 178


 8048 0108 FA7E     		ldrb	r2, [r7, #27]
 8049 010a 1A70     		strb	r2, [r3]
 8050              	.LBE12:
2090:bluetooth_rxtx.c **** 				u8 byte = 0;
 8051              		.loc 1 2090 0 discriminator 2
 8052 010c BB6A     		ldr	r3, [r7, #40]
 8053 010e 0133     		adds	r3, r3, #1
 8054 0110 BB62     		str	r3, [r7, #40]
 8055              	.L398:
2090:bluetooth_rxtx.c **** 				u8 byte = 0;
 8056              		.loc 1 2090 0 is_stmt 0 discriminator 1
 8057 0112 BB6A     		ldr	r3, [r7, #40]
 8058 0114 2D2B     		cmp	r3, #45
 8059 0116 B3DD     		ble	.L404
2103:bluetooth_rxtx.c **** 			}
2104:bluetooth_rxtx.c **** 
2105:bluetooth_rxtx.c **** 			// verify CRC
2106:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 8060              		.loc 1 2106 0 is_stmt 1
 8061 0118 2A4B     		ldr	r3, .L409+12
 8062 011a 1B69     		ldr	r3, [r3, #16]
 8063 011c 002B     		cmp	r3, #0
 8064 011e 2ED0     		beq	.L405
 8065              	.LBB14:
2107:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 8066              		.loc 1 2107 0
 8067 0120 2B4B     		ldr	r3, .L409+24
 8068 0122 1B68     		ldr	r3, [r3]
 8069 0124 0533     		adds	r3, r3, #5
 8070 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8071 0128 03F03F03 		and	r3, r3, #63
 8072 012c 0233     		adds	r3, r3, #2
 8073 012e FB60     		str	r3, [r7, #12]
2108:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 8074              		.loc 1 2108 0
 8075 0130 244B     		ldr	r3, .L409+12
 8076 0132 DA68     		ldr	r2, [r3, #12]
 8077 0134 264B     		ldr	r3, .L409+24
 8078 0136 1B68     		ldr	r3, [r3]
 8079 0138 0433     		adds	r3, r3, #4
 8080 013a 1046     		mov	r0, r2
 8081 013c 1946     		mov	r1, r3
 8082 013e FA68     		ldr	r2, [r7, #12]
 8083 0140 FFF7FEFF 		bl	btle_crcgen_lut
 8084 0144 B860     		str	r0, [r7, #8]
2109:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 8085              		.loc 1 2109 0
 8086 0146 224B     		ldr	r3, .L409+24
 8087 0148 1A68     		ldr	r2, [r3]
 8088 014a FB68     		ldr	r3, [r7, #12]
 8089 014c 0633     		adds	r3, r3, #6
 8090 014e 1344     		add	r3, r3, r2
 8091 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8092 0152 1A04     		lsls	r2, r3, #16
2110:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 8093              		.loc 1 2110 0
 8094 0154 1E4B     		ldr	r3, .L409+24
ARM GAS  /tmp/ccXEAChk.s 			page 179


 8095 0156 1968     		ldr	r1, [r3]
 8096 0158 FB68     		ldr	r3, [r7, #12]
 8097 015a 0533     		adds	r3, r3, #5
 8098 015c 0B44     		add	r3, r3, r1
 8099 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8100 0160 1B02     		lsls	r3, r3, #8
 8101 0162 1343     		orrs	r3, r3, r2
2111:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 8102              		.loc 1 2111 0
 8103 0164 1A4A     		ldr	r2, .L409+24
 8104 0166 1268     		ldr	r2, [r2]
 8105 0168 F968     		ldr	r1, [r7, #12]
 8106 016a 0431     		adds	r1, r1, #4
 8107 016c 0A44     		add	r2, r2, r1
 8108 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8109 0170 1343     		orrs	r3, r3, r2
2109:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 8110              		.loc 1 2109 0
 8111 0172 7B60     		str	r3, [r7, #4]
2112:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 8112              		.loc 1 2112 0
 8113 0174 BA68     		ldr	r2, [r7, #8]
 8114 0176 7B68     		ldr	r3, [r7, #4]
 8115 0178 9A42     		cmp	r2, r3
 8116 017a 00D0     		beq	.L405
2113:bluetooth_rxtx.c **** 					break;
 8117              		.loc 1 2113 0
 8118 017c 17E0     		b	.L406
 8119              	.L405:
 8120              	.LBE14:
2114:bluetooth_rxtx.c **** 			}
2115:bluetooth_rxtx.c **** 
2116:bluetooth_rxtx.c **** 			// send to PC
2117:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 8121              		.loc 1 2117 0
 8122 017e 144B     		ldr	r3, .L409+24
 8123 0180 1B68     		ldr	r3, [r3]
 8124 0182 0120     		movs	r0, #1
 8125 0184 1946     		mov	r1, r3
 8126 0186 FFF7FEFF 		bl	enqueue
2118:bluetooth_rxtx.c **** 			RXLED_SET;
 8127              		.loc 1 2118 0
 8128 018a 124B     		ldr	r3, .L409+28
 8129 018c 1022     		movs	r2, #16
 8130 018e 1A60     		str	r2, [r3]
2119:bluetooth_rxtx.c **** 
2120:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 8131              		.loc 1 2120 0
 8132 0190 114B     		ldr	r3, .L409+32
 8133 0192 1B68     		ldr	r3, [r3]
 8134 0194 0E4A     		ldr	r2, .L409+24
 8135 0196 1268     		ldr	r2, [r2]
 8136 0198 1046     		mov	r0, r2
 8137 019a 9847     		blx	r3
2121:bluetooth_rxtx.c **** 
2122:bluetooth_rxtx.c **** 			break;
 8138              		.loc 1 2122 0
ARM GAS  /tmp/ccXEAChk.s 			page 180


 8139 019c 07E0     		b	.L406
 8140              	.L397:
2086:bluetooth_rxtx.c **** 		access_address >>= 1;
 8141              		.loc 1 2086 0 discriminator 2
 8142 019e FB6A     		ldr	r3, [r7, #44]
 8143 01a0 0133     		adds	r3, r3, #1
 8144 01a2 FB62     		str	r3, [r7, #44]
 8145              	.L396:
2086:bluetooth_rxtx.c **** 		access_address >>= 1;
 8146              		.loc 1 2086 0 is_stmt 0 discriminator 1
 8147 01a4 FB6A     		ldr	r3, [r7, #44]
 8148 01a6 B3F5D87F 		cmp	r3, #432
 8149 01aa FFF654AF 		blt	.L407
 8150              	.L406:
2123:bluetooth_rxtx.c **** 		}
2124:bluetooth_rxtx.c **** 	}
2125:bluetooth_rxtx.c **** 
2126:bluetooth_rxtx.c **** 	return 1;
 8151              		.loc 1 2126 0 is_stmt 1
 8152 01ae 0123     		movs	r3, #1
2127:bluetooth_rxtx.c **** }
 8153              		.loc 1 2127 0
 8154 01b0 1846     		mov	r0, r3
 8155 01b2 3037     		adds	r7, r7, #48
 8156              		.cfi_def_cfa_offset 8
 8157 01b4 BD46     		mov	sp, r7
 8158              		.cfi_def_cfa_register 13
 8159              		@ sp needed
 8160 01b6 80BD     		pop	{r7, pc}
 8161              	.L410:
 8162              		.align	2
 8163              	.L409:
 8164 01b8 00000000 		.word	channel
 8165 01bc C0000000 		.word	whitening_index
 8166 01c0 00000000 		.word	unpacked
 8167 01c4 00000000 		.word	le
 8168 01c8 40000000 		.word	whitening
 8169 01cc 11080402 		.word	33818641
 8170 01d0 00000000 		.word	idle_rxbuf
 8171 01d4 38C00920 		.word	537509944
 8172 01d8 00000000 		.word	packet_cb
 8173              		.cfi_endproc
 8174              	.LFE32:
 8176              		.section	.text.connection_follow_cb,"ax",%progbits
 8177              		.align	2
 8178              		.global	connection_follow_cb
 8179              		.thumb
 8180              		.thumb_func
 8182              	connection_follow_cb:
 8183              	.LFB33:
2128:bluetooth_rxtx.c **** 
2129:bluetooth_rxtx.c **** /**
2130:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2131:bluetooth_rxtx.c ****  */
2132:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 8184              		.loc 1 2132 0
 8185              		.cfi_startproc
ARM GAS  /tmp/ccXEAChk.s 			page 181


 8186              		@ args = 0, pretend = 0, frame = 40
 8187              		@ frame_needed = 1, uses_anonymous_args = 0
 8188 0000 80B5     		push	{r7, lr}
 8189              		.cfi_def_cfa_offset 8
 8190              		.cfi_offset 7, -8
 8191              		.cfi_offset 14, -4
 8192 0002 8AB0     		sub	sp, sp, #40
 8193              		.cfi_def_cfa_offset 48
 8194 0004 00AF     		add	r7, sp, #0
 8195              		.cfi_def_cfa_register 7
 8196 0006 7860     		str	r0, [r7, #4]
2133:bluetooth_rxtx.c **** 	int i;
2134:bluetooth_rxtx.c **** 	u32 aa = 0;
 8197              		.loc 1 2134 0
 8198 0008 0023     		movs	r3, #0
 8199 000a 3B62     		str	r3, [r7, #32]
2135:bluetooth_rxtx.c **** 
2136:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2137:bluetooth_rxtx.c **** #define HEADER_IDX 4
2138:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2139:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2140:bluetooth_rxtx.c **** 
2141:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 8200              		.loc 1 2141 0
 8201 000c 7B68     		ldr	r3, [r7, #4]
 8202 000e FB61     		str	r3, [r7, #28]
2142:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 8203              		.loc 1 2142 0
 8204 0010 7B68     		ldr	r3, [r7, #4]
 8205 0012 1B79     		ldrb	r3, [r3, #4]
 8206 0014 FB76     		strb	r3, [r7, #27]
2143:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 8207              		.loc 1 2143 0
 8208 0016 7B68     		ldr	r3, [r7, #4]
 8209 0018 0533     		adds	r3, r3, #5
 8210 001a 7B61     		str	r3, [r7, #20]
2144:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 8211              		.loc 1 2144 0
 8212 001c 7B68     		ldr	r3, [r7, #4]
 8213 001e 0633     		adds	r3, r3, #6
 8214 0020 3B61     		str	r3, [r7, #16]
2145:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 8215              		.loc 1 2145 0
 8216 0022 7B69     		ldr	r3, [r7, #20]
 8217 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8218 0026 0633     		adds	r3, r3, #6
 8219 0028 1A46     		mov	r2, r3
 8220 002a 7B68     		ldr	r3, [r7, #4]
 8221 002c 1344     		add	r3, r3, r2
 8222 002e FB60     		str	r3, [r7, #12]
2146:bluetooth_rxtx.c **** 
2147:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 8223              		.loc 1 2147 0
 8224 0030 8B4B     		ldr	r3, .L421
 8225 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8226 0034 022B     		cmp	r3, #2
 8227 0036 1CD1     		bne	.L412
ARM GAS  /tmp/ccXEAChk.s 			page 182


2148:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2149:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 8228              		.loc 1 2149 0
 8229 0038 894B     		ldr	r3, .L421
 8230 003a 0322     		movs	r2, #3
 8231 003c 1A75     		strb	r2, [r3, #20]
2150:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 8232              		.loc 1 2150 0
 8233 003e 894B     		ldr	r3, .L421+4
 8234 0040 1B68     		ldr	r3, [r3]
 8235 0042 874A     		ldr	r2, .L421
 8236 0044 9361     		str	r3, [r2, #24]
2151:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 8237              		.loc 1 2151 0
 8238 0046 864B     		ldr	r3, .L421
 8239 0048 DB8B     		ldrh	r3, [r3, #30]
 8240 004a 013B     		subs	r3, r3, #1
 8241 004c 9AB2     		uxth	r2, r3
 8242 004e 844B     		ldr	r3, .L421
 8243 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2152:bluetooth_rxtx.c **** 		le.conn_count = 0;
 8244              		.loc 1 2152 0
 8245 0052 834B     		ldr	r3, .L421
 8246 0054 0022     		movs	r2, #0
 8247 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2153:bluetooth_rxtx.c **** 		le.update_pending = 0;
 8248              		.loc 1 2153 0
 8249 0058 814B     		ldr	r3, .L421
 8250 005a 0022     		movs	r2, #0
 8251 005c 9A62     		str	r2, [r3, #40]
2154:bluetooth_rxtx.c **** 
2155:bluetooth_rxtx.c **** 		// hue hue hue
2156:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 8252              		.loc 1 2156 0
 8253 005e 824B     		ldr	r3, .L421+8
 8254 0060 1B78     		ldrb	r3, [r3]
 8255 0062 DBB2     		uxtb	r3, r3
 8256 0064 002B     		cmp	r3, #0
 8257 0066 00F0F780 		beq	.L411
2157:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 8258              		.loc 1 2157 0
 8259 006a 804B     		ldr	r3, .L421+12
 8260 006c 2822     		movs	r2, #40
 8261 006e 1A60     		str	r2, [r3]
 8262 0070 F2E0     		b	.L411
 8263              	.L412:
2158:bluetooth_rxtx.c **** 
2159:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 8264              		.loc 1 2159 0
 8265 0072 7B4B     		ldr	r3, .L421
 8266 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8267 0076 032B     		cmp	r3, #3
 8268 0078 6FD1     		bne	.L415
 8269              	.LBB15:
2160:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 8270              		.loc 1 2160 0
 8271 007a FB7E     		ldrb	r3, [r7, #27]
ARM GAS  /tmp/ccXEAChk.s 			page 183


 8272 007c 03F00303 		and	r3, r3, #3
 8273 0080 FB72     		strb	r3, [r7, #11]
2161:bluetooth_rxtx.c **** 
2162:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2163:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 8274              		.loc 1 2163 0
 8275 0082 774B     		ldr	r3, .L421
 8276 0084 9B6A     		ldr	r3, [r3, #40]
 8277 0086 002B     		cmp	r3, #0
 8278 0088 21D0     		beq	.L416
 8279              		.loc 1 2163 0 is_stmt 0 discriminator 1
 8280 008a 754B     		ldr	r3, .L421
 8281 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8282 008e 9AB2     		uxth	r2, r3
 8283 0090 734B     		ldr	r3, .L421
 8284 0092 9B8D     		ldrh	r3, [r3, #44]
 8285 0094 9A42     		cmp	r2, r3
 8286 0096 1AD1     		bne	.L416
2164:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2165:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 8287              		.loc 1 2165 0 is_stmt 1
 8288 0098 724B     		ldr	r3, .L421+4
 8289 009a 1B68     		ldr	r3, [r3]
 8290 009c 704A     		ldr	r2, .L421
 8291 009e 9361     		str	r3, [r2, #24]
2166:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 8292              		.loc 1 2166 0
 8293 00a0 6F4B     		ldr	r3, .L421
 8294 00a2 DA8D     		ldrh	r2, [r3, #46]
 8295 00a4 6E4B     		ldr	r3, .L421
 8296 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2167:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 8297              		.loc 1 2167 0
 8298 00a8 6D4B     		ldr	r3, .L421
 8299 00aa DB8D     		ldrh	r3, [r3, #46]
 8300 00ac 013B     		subs	r3, r3, #1
 8301 00ae 9AB2     		uxth	r2, r3
 8302 00b0 6B4B     		ldr	r3, .L421
 8303 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2168:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 8304              		.loc 1 2168 0
 8305 00b4 6A4B     		ldr	r3, .L421
 8306 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 8307 00ba 694B     		ldr	r3, .L421
 8308 00bc 83F82220 		strb	r2, [r3, #34]
2169:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 8309              		.loc 1 2169 0
 8310 00c0 674B     		ldr	r3, .L421
 8311 00c2 5A8E     		ldrh	r2, [r3, #50]
 8312 00c4 664B     		ldr	r3, .L421
 8313 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2170:bluetooth_rxtx.c **** 			le.update_pending = 0;
 8314              		.loc 1 2170 0
 8315 00c8 654B     		ldr	r3, .L421
 8316 00ca 0022     		movs	r2, #0
 8317 00cc 9A62     		str	r2, [r3, #40]
 8318              	.L416:
ARM GAS  /tmp/ccXEAChk.s 			page 184


2171:bluetooth_rxtx.c **** 		}
2172:bluetooth_rxtx.c **** 
2173:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 8319              		.loc 1 2173 0
 8320 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 8321 00d0 032B     		cmp	r3, #3
 8322 00d2 41D1     		bne	.L417
 8323              		.loc 1 2173 0 is_stmt 0 discriminator 1
 8324 00d4 3B69     		ldr	r3, [r7, #16]
 8325 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8326 00d8 002B     		cmp	r3, #0
 8327 00da 3DD1     		bne	.L417
2174:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2175:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2176:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 8328              		.loc 1 2176 0 is_stmt 1
 8329 00dc 7B68     		ldr	r3, [r7, #4]
 8330 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 8331 00e0 5F4B     		ldr	r3, .L421
 8332 00e2 83F83020 		strb	r2, [r3, #48]
2177:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 8333              		.loc 1 2177 0
 8334 00e6 7B68     		ldr	r3, [r7, #4]
 8335 00e8 0833     		adds	r3, r3, #8
 8336 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8337 00ec 9AB2     		uxth	r2, r3
 8338 00ee 7B68     		ldr	r3, [r7, #4]
 8339 00f0 0933     		adds	r3, r3, #9
 8340 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8341 00f4 9BB2     		uxth	r3, r3
 8342 00f6 1B02     		lsls	r3, r3, #8
 8343 00f8 9BB2     		uxth	r3, r3
 8344 00fa 1344     		add	r3, r3, r2
 8345 00fc 9AB2     		uxth	r2, r3
 8346 00fe 584B     		ldr	r3, .L421
 8347 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2178:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 8348              		.loc 1 2178 0
 8349 0102 7B68     		ldr	r3, [r7, #4]
 8350 0104 0A33     		adds	r3, r3, #10
 8351 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8352 0108 9AB2     		uxth	r2, r3
 8353 010a 7B68     		ldr	r3, [r7, #4]
 8354 010c 0B33     		adds	r3, r3, #11
 8355 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8356 0110 9BB2     		uxth	r3, r3
 8357 0112 1B02     		lsls	r3, r3, #8
 8358 0114 9BB2     		uxth	r3, r3
 8359 0116 1344     		add	r3, r3, r2
 8360 0118 9AB2     		uxth	r2, r3
 8361 011a 514B     		ldr	r3, .L421
 8362 011c DA85     		strh	r2, [r3, #46]	@ movhi
2179:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 8363              		.loc 1 2179 0
 8364 011e 7B68     		ldr	r3, [r7, #4]
 8365 0120 1033     		adds	r3, r3, #16
 8366 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccXEAChk.s 			page 185


 8367 0124 9AB2     		uxth	r2, r3
 8368 0126 7B68     		ldr	r3, [r7, #4]
 8369 0128 1133     		adds	r3, r3, #17
 8370 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8371 012c 9BB2     		uxth	r3, r3
 8372 012e 1B02     		lsls	r3, r3, #8
 8373 0130 9BB2     		uxth	r3, r3
 8374 0132 1344     		add	r3, r3, r2
 8375 0134 9AB2     		uxth	r2, r3
 8376 0136 4A4B     		ldr	r3, .L421
 8377 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2180:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 8378              		.loc 1 2180 0
 8379 013a 494B     		ldr	r3, .L421
 8380 013c 9B8D     		ldrh	r3, [r3, #44]
 8381 013e 1A46     		mov	r2, r3
 8382 0140 474B     		ldr	r3, .L421
 8383 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8384 0144 9BB2     		uxth	r3, r3
 8385 0146 D31A     		subs	r3, r2, r3
 8386 0148 47F6FE72 		movw	r2, #32766
 8387 014c 9342     		cmp	r3, r2
 8388 014e 03DC     		bgt	.L417
2181:bluetooth_rxtx.c **** 				le.update_pending = 1;
 8389              		.loc 1 2181 0
 8390 0150 434B     		ldr	r3, .L421
 8391 0152 0122     		movs	r2, #1
 8392 0154 9A62     		str	r2, [r3, #40]
 8393              	.LBE15:
 8394 0156 7FE0     		b	.L411
 8395              	.L417:
 8396 0158 7EE0     		b	.L411
 8397              	.L415:
2182:bluetooth_rxtx.c **** 		}
2183:bluetooth_rxtx.c **** 
2184:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 8398              		.loc 1 2184 0
 8399 015a 414B     		ldr	r3, .L421
 8400 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8401 015e 012B     		cmp	r3, #1
 8402 0160 7AD1     		bne	.L411
 8403              	.LBB16:
2185:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 8404              		.loc 1 2185 0
 8405 0162 7B68     		ldr	r3, [r7, #4]
 8406 0164 0433     		adds	r3, r3, #4
 8407 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8408 0168 03F00F03 		and	r3, r3, #15
 8409 016c BB72     		strb	r3, [r7, #10]
2186:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 8410              		.loc 1 2186 0
 8411 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 8412 0170 052B     		cmp	r3, #5
 8413 0172 71D1     		bne	.L411
2187:bluetooth_rxtx.c **** 			// This is a connect packet
2188:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2189:bluetooth_rxtx.c **** 			if (le.target_set &&
ARM GAS  /tmp/ccXEAChk.s 			page 186


 8414              		.loc 1 2189 0
 8415 0174 3A4B     		ldr	r3, .L421
 8416 0176 DB6B     		ldr	r3, [r3, #60]
 8417 0178 002B     		cmp	r3, #0
 8418 017a 14D0     		beq	.L418
2190:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8419              		.loc 1 2190 0 discriminator 1
 8420 017c 7B68     		ldr	r3, [r7, #4]
 8421 017e 0633     		adds	r3, r3, #6
 8422 0180 3B48     		ldr	r0, .L421+16
 8423 0182 1946     		mov	r1, r3
 8424 0184 0622     		movs	r2, #6
 8425 0186 FFF7FEFF 		bl	memcmp
 8426 018a 0346     		mov	r3, r0
2189:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8427              		.loc 1 2189 0 discriminator 1
 8428 018c 002B     		cmp	r3, #0
 8429 018e 0AD0     		beq	.L418
2191:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 8430              		.loc 1 2191 0
 8431 0190 7B68     		ldr	r3, [r7, #4]
 8432 0192 0C33     		adds	r3, r3, #12
 8433 0194 3648     		ldr	r0, .L421+16
 8434 0196 1946     		mov	r1, r3
 8435 0198 0622     		movs	r2, #6
 8436 019a FFF7FEFF 		bl	memcmp
 8437 019e 0346     		mov	r3, r0
2190:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8438              		.loc 1 2190 0
 8439 01a0 002B     		cmp	r3, #0
 8440 01a2 00D0     		beq	.L418
2192:bluetooth_rxtx.c **** 				return;
 8441              		.loc 1 2192 0
 8442 01a4 58E0     		b	.L411
 8443              	.L418:
2193:bluetooth_rxtx.c **** 			}
2194:bluetooth_rxtx.c **** 
2195:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 8444              		.loc 1 2195 0
 8445 01a6 2E4B     		ldr	r3, .L421
 8446 01a8 0222     		movs	r2, #2
 8447 01aa 1A75     		strb	r2, [r3, #20]
2196:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 8448              		.loc 1 2196 0
 8449 01ac 2C4B     		ldr	r3, .L421
 8450 01ae 0022     		movs	r2, #0
 8451 01b0 1A61     		str	r2, [r3, #16]
2197:bluetooth_rxtx.c **** 
2198:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 8452              		.loc 1 2198 0
 8453 01b2 0023     		movs	r3, #0
 8454 01b4 7B62     		str	r3, [r7, #36]
 8455 01b6 11E0     		b	.L419
 8456              	.L420:
2199:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8457              		.loc 1 2199 0 discriminator 3
 8458 01b8 7B6A     		ldr	r3, [r7, #36]
ARM GAS  /tmp/ccXEAChk.s 			page 187


 8459 01ba 1233     		adds	r3, r3, #18
 8460 01bc 1A46     		mov	r2, r3
 8461 01be 7B68     		ldr	r3, [r7, #4]
 8462 01c0 1344     		add	r3, r3, r2
 8463 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8464 01c4 1A46     		mov	r2, r3
 8465 01c6 7B6A     		ldr	r3, [r7, #36]
 8466 01c8 DB00     		lsls	r3, r3, #3
 8467 01ca 02FA03F3 		lsl	r3, r2, r3
 8468 01ce 1A46     		mov	r2, r3
 8469 01d0 3B6A     		ldr	r3, [r7, #32]
 8470 01d2 1343     		orrs	r3, r3, r2
 8471 01d4 3B62     		str	r3, [r7, #32]
2198:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8472              		.loc 1 2198 0 discriminator 3
 8473 01d6 7B6A     		ldr	r3, [r7, #36]
 8474 01d8 0133     		adds	r3, r3, #1
 8475 01da 7B62     		str	r3, [r7, #36]
 8476              	.L419:
2198:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8477              		.loc 1 2198 0 is_stmt 0 discriminator 1
 8478 01dc 7B6A     		ldr	r3, [r7, #36]
 8479 01de 032B     		cmp	r3, #3
 8480 01e0 EADD     		ble	.L420
2200:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 8481              		.loc 1 2200 0 is_stmt 1
 8482 01e2 386A     		ldr	r0, [r7, #32]
 8483 01e4 FFF7FEFF 		bl	le_set_access_address
2201:bluetooth_rxtx.c **** 
2202:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2203:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 8484              		.loc 1 2203 0
 8485 01e8 7B68     		ldr	r3, [r7, #4]
 8486 01ea 1833     		adds	r3, r3, #24
 8487 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8488 01ee 1A04     		lsls	r2, r3, #16
2204:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8489              		.loc 1 2204 0
 8490 01f0 7B68     		ldr	r3, [r7, #4]
 8491 01f2 1733     		adds	r3, r3, #23
 8492 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8493 01f6 1B02     		lsls	r3, r3, #8
 8494 01f8 1343     		orrs	r3, r3, r2
2205:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 8495              		.loc 1 2205 0
 8496 01fa 7A68     		ldr	r2, [r7, #4]
 8497 01fc 1632     		adds	r2, r2, #22
 8498 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8499 0200 1343     		orrs	r3, r3, r2
2203:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8500              		.loc 1 2203 0
 8501 0202 1A46     		mov	r2, r3
 8502 0204 164B     		ldr	r3, .L421
 8503 0206 9A60     		str	r2, [r3, #8]
2206:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 8504              		.loc 1 2206 0
 8505 0208 154B     		ldr	r3, .L421
ARM GAS  /tmp/ccXEAChk.s 			page 188


 8506 020a 9B68     		ldr	r3, [r3, #8]
 8507 020c 1846     		mov	r0, r3
 8508 020e FFF7FEFF 		bl	rbit
 8509 0212 0246     		mov	r2, r0
 8510 0214 124B     		ldr	r3, .L421
 8511 0216 DA60     		str	r2, [r3, #12]
2207:bluetooth_rxtx.c **** 
2208:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2209:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 8512              		.loc 1 2209 0
 8513 0218 7B68     		ldr	r3, [r7, #4]
 8514 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 8515 021c 104B     		ldr	r3, .L421
 8516 021e 83F82220 		strb	r2, [r3, #34]
2210:bluetooth_rxtx.c **** 
2211:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2212:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 8517              		.loc 1 2212 0
 8518 0222 7B68     		ldr	r3, [r7, #4]
 8519 0224 1A33     		adds	r3, r3, #26
 8520 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8521 0228 9AB2     		uxth	r2, r3
 8522 022a 0D4B     		ldr	r3, .L421
 8523 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2213:bluetooth_rxtx.c **** 
2214:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2215:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 8524              		.loc 1 2215 0
 8525 022e 7B68     		ldr	r3, [r7, #4]
 8526 0230 1C33     		adds	r3, r3, #28
 8527 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8528 0234 9AB2     		uxth	r2, r3
 8529 0236 0A4B     		ldr	r3, .L421
 8530 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2216:bluetooth_rxtx.c **** 
2217:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2218:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 8531              		.loc 1 2218 0
 8532 023a 7B68     		ldr	r3, [r7, #4]
 8533 023c 2733     		adds	r3, r3, #39
 8534 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8535 0240 03F01F03 		and	r3, r3, #31
 8536 0244 DAB2     		uxtb	r2, r3
 8537 0246 064B     		ldr	r3, .L421
 8538 0248 9A75     		strb	r2, [r3, #22]
2219:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 8539              		.loc 1 2219 0
 8540 024a 054B     		ldr	r3, .L421
 8541 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 8542 024e 044B     		ldr	r3, .L421
 8543 0250 5A75     		strb	r2, [r3, #21]
2220:bluetooth_rxtx.c **** 
2221:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2222:bluetooth_rxtx.c **** 			do_hop = 1;
 8544              		.loc 1 2222 0
 8545 0252 084B     		ldr	r3, .L421+20
 8546 0254 0122     		movs	r2, #1
ARM GAS  /tmp/ccXEAChk.s 			page 189


 8547 0256 1A70     		strb	r2, [r3]
 8548              	.L411:
 8549              	.LBE16:
2223:bluetooth_rxtx.c **** 		}
2224:bluetooth_rxtx.c **** 	}
2225:bluetooth_rxtx.c **** }
 8550              		.loc 1 2225 0
 8551 0258 2837     		adds	r7, r7, #40
 8552              		.cfi_def_cfa_offset 8
 8553 025a BD46     		mov	sp, r7
 8554              		.cfi_def_cfa_register 13
 8555              		@ sp needed
 8556 025c 80BD     		pop	{r7, pc}
 8557              	.L422:
 8558 025e 00BF     		.align	2
 8559              	.L421:
 8560 0260 00000000 		.word	le
 8561 0264 00000000 		.word	clkn
 8562 0268 00000000 		.word	jam_mode
 8563 026c 00000000 		.word	le_jam_count
 8564 0270 34000000 		.word	le+52
 8565 0274 00000000 		.word	do_hop
 8566              		.cfi_endproc
 8567              	.LFE33:
 8569              		.section	.text.bt_follow_le,"ax",%progbits
 8570              		.align	2
 8571              		.global	bt_follow_le
 8572              		.thumb
 8573              		.thumb_func
 8575              	bt_follow_le:
 8576              	.LFB34:
2226:bluetooth_rxtx.c **** 
2227:bluetooth_rxtx.c **** void bt_follow_le() {
 8577              		.loc 1 2227 0
 8578              		.cfi_startproc
 8579              		@ args = 0, pretend = 0, frame = 0
 8580              		@ frame_needed = 1, uses_anonymous_args = 0
 8581 0000 80B5     		push	{r7, lr}
 8582              		.cfi_def_cfa_offset 8
 8583              		.cfi_offset 7, -8
 8584              		.cfi_offset 14, -4
 8585 0002 00AF     		add	r7, sp, #0
 8586              		.cfi_def_cfa_register 7
2228:bluetooth_rxtx.c **** 	reset_le();
 8587              		.loc 1 2228 0
 8588 0004 FFF7FEFF 		bl	reset_le
2229:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 8589              		.loc 1 2229 0
 8590 0008 044B     		ldr	r3, .L424
 8591 000a 054A     		ldr	r2, .L424+4
 8592 000c 1A60     		str	r2, [r3]
2230:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 8593              		.loc 1 2230 0
 8594 000e 0920     		movs	r0, #9
 8595 0010 FFF7FEFF 		bl	bt_le_sync
2231:bluetooth_rxtx.c **** 
2232:bluetooth_rxtx.c **** 	/* old non-sync mode
ARM GAS  /tmp/ccXEAChk.s 			page 190


2233:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2234:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2235:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2236:bluetooth_rxtx.c **** 	*/
2237:bluetooth_rxtx.c **** 
2238:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 8596              		.loc 1 2238 0
 8597 0014 034B     		ldr	r3, .L424+8
 8598 0016 0022     		movs	r2, #0
 8599 0018 1A70     		strb	r2, [r3]
2239:bluetooth_rxtx.c **** }
 8600              		.loc 1 2239 0
 8601 001a 80BD     		pop	{r7, pc}
 8602              	.L425:
 8603              		.align	2
 8604              	.L424:
 8605 001c 00000000 		.word	packet_cb
 8606 0020 00000000 		.word	connection_follow_cb
 8607 0024 00000000 		.word	mode
 8608              		.cfi_endproc
 8609              	.LFE34:
 8611              		.section	.text.le_promisc_state,"ax",%progbits
 8612              		.align	2
 8613              		.global	le_promisc_state
 8614              		.thumb
 8615              		.thumb_func
 8617              	le_promisc_state:
 8618              	.LFB35:
2240:bluetooth_rxtx.c **** 
2241:bluetooth_rxtx.c **** // issue state change message
2242:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 8619              		.loc 1 2242 0
 8620              		.cfi_startproc
 8621              		@ args = 0, pretend = 0, frame = 72
 8622              		@ frame_needed = 1, uses_anonymous_args = 0
 8623 0000 80B5     		push	{r7, lr}
 8624              		.cfi_def_cfa_offset 8
 8625              		.cfi_offset 7, -8
 8626              		.cfi_offset 14, -4
 8627 0002 92B0     		sub	sp, sp, #72
 8628              		.cfi_def_cfa_offset 80
 8629 0004 00AF     		add	r7, sp, #0
 8630              		.cfi_def_cfa_register 7
 8631 0006 0346     		mov	r3, r0
 8632 0008 B960     		str	r1, [r7, #8]
 8633 000a 7A60     		str	r2, [r7, #4]
 8634 000c FB73     		strb	r3, [r7, #15]
2243:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 8635              		.loc 1 2243 0
 8636 000e 07F11403 		add	r3, r7, #20
 8637 0012 0022     		movs	r2, #0
 8638 0014 1A60     		str	r2, [r3]
 8639 0016 0433     		adds	r3, r3, #4
 8640 0018 0022     		movs	r2, #0
 8641 001a 1A60     		str	r2, [r3]
 8642 001c 0433     		adds	r3, r3, #4
 8643 001e 0022     		movs	r2, #0
ARM GAS  /tmp/ccXEAChk.s 			page 191


 8644 0020 1A60     		str	r2, [r3]
 8645 0022 0433     		adds	r3, r3, #4
 8646 0024 0022     		movs	r2, #0
 8647 0026 1A60     		str	r2, [r3]
 8648 0028 0433     		adds	r3, r3, #4
 8649 002a 0022     		movs	r2, #0
 8650 002c 1A60     		str	r2, [r3]
 8651 002e 0433     		adds	r3, r3, #4
 8652 0030 0022     		movs	r2, #0
 8653 0032 1A60     		str	r2, [r3]
 8654 0034 0433     		adds	r3, r3, #4
 8655 0036 0022     		movs	r2, #0
 8656 0038 1A60     		str	r2, [r3]
 8657 003a 0433     		adds	r3, r3, #4
 8658 003c 0022     		movs	r2, #0
 8659 003e 1A60     		str	r2, [r3]
 8660 0040 0433     		adds	r3, r3, #4
 8661 0042 0022     		movs	r2, #0
 8662 0044 1A60     		str	r2, [r3]
 8663 0046 0433     		adds	r3, r3, #4
 8664 0048 0022     		movs	r2, #0
 8665 004a 1A60     		str	r2, [r3]
 8666 004c 0433     		adds	r3, r3, #4
 8667 004e 0022     		movs	r2, #0
 8668 0050 1A60     		str	r2, [r3]
 8669 0052 0433     		adds	r3, r3, #4
 8670 0054 0022     		movs	r2, #0
 8671 0056 1A60     		str	r2, [r3]
 8672 0058 0433     		adds	r3, r3, #4
 8673 005a 0022     		movs	r2, #0
 8674 005c 1A80     		strh	r2, [r3]	@ movhi
 8675 005e 0233     		adds	r3, r3, #2
2244:bluetooth_rxtx.c **** 	if (len > 49)
 8676              		.loc 1 2244 0
 8677 0060 7B68     		ldr	r3, [r7, #4]
 8678 0062 312B     		cmp	r3, #49
 8679 0064 01D9     		bls	.L427
2245:bluetooth_rxtx.c **** 		len = 49;
 8680              		.loc 1 2245 0
 8681 0066 3123     		movs	r3, #49
 8682 0068 7B60     		str	r3, [r7, #4]
 8683              	.L427:
2246:bluetooth_rxtx.c **** 
2247:bluetooth_rxtx.c **** 	buf[0] = type;
 8684              		.loc 1 2247 0
 8685 006a FB7B     		ldrb	r3, [r7, #15]
 8686 006c 3B75     		strb	r3, [r7, #20]
2248:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 8687              		.loc 1 2248 0
 8688 006e 07F11403 		add	r3, r7, #20
 8689 0072 0133     		adds	r3, r3, #1
 8690 0074 1846     		mov	r0, r3
 8691 0076 B968     		ldr	r1, [r7, #8]
 8692 0078 7A68     		ldr	r2, [r7, #4]
 8693 007a FFF7FEFF 		bl	memcpy
2249:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 8694              		.loc 1 2249 0
ARM GAS  /tmp/ccXEAChk.s 			page 192


 8695 007e 07F11403 		add	r3, r7, #20
 8696 0082 0520     		movs	r0, #5
 8697 0084 1946     		mov	r1, r3
 8698 0086 FFF7FEFF 		bl	enqueue
2250:bluetooth_rxtx.c **** }
 8699              		.loc 1 2250 0
 8700 008a 4837     		adds	r7, r7, #72
 8701              		.cfi_def_cfa_offset 8
 8702 008c BD46     		mov	sp, r7
 8703              		.cfi_def_cfa_register 13
 8704              		@ sp needed
 8705 008e 80BD     		pop	{r7, pc}
 8706              		.cfi_endproc
 8707              	.LFE35:
 8709              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 8710              		.align	2
 8711              		.global	promisc_recover_hop_increment
 8712              		.thumb
 8713              		.thumb_func
 8715              	promisc_recover_hop_increment:
 8716              	.LFB36:
2251:bluetooth_rxtx.c **** 
2252:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2253:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2254:bluetooth_rxtx.c **** 
2255:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 8717              		.loc 1 2255 0
 8718              		.cfi_startproc
 8719              		@ args = 0, pretend = 0, frame = 16
 8720              		@ frame_needed = 1, uses_anonymous_args = 0
 8721 0000 80B5     		push	{r7, lr}
 8722              		.cfi_def_cfa_offset 8
 8723              		.cfi_offset 7, -8
 8724              		.cfi_offset 14, -4
 8725 0002 84B0     		sub	sp, sp, #16
 8726              		.cfi_def_cfa_offset 24
 8727 0004 00AF     		add	r7, sp, #0
 8728              		.cfi_def_cfa_register 7
 8729 0006 7860     		str	r0, [r7, #4]
2256:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2257:bluetooth_rxtx.c **** 	if (channel == 2404) {
 8730              		.loc 1 2257 0
 8731 0008 554B     		ldr	r3, .L435
 8732 000a 1B88     		ldrh	r3, [r3]	@ movhi
 8733 000c 9BB2     		uxth	r3, r3
 8734 000e 40F66412 		movw	r2, #2404
 8735 0012 9342     		cmp	r3, r2
 8736 0014 14D1     		bne	.L429
2258:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 8737              		.loc 1 2258 0
 8738 0016 534B     		ldr	r3, .L435+4
 8739 0018 1B68     		ldr	r3, [r3]
 8740 001a C3F31303 		ubfx	r3, r3, #0, #20
 8741 001e 40F63542 		movw	r2, #3125
 8742 0022 02FB03F2 		mul	r2, r2, r3
 8743 0026 504B     		ldr	r3, .L435+8
 8744 0028 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccXEAChk.s 			page 193


 8745 002a 1344     		add	r3, r3, r2
 8746 002c 4F4A     		ldr	r2, .L435+12
 8747 002e 1360     		str	r3, [r2]
2259:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 8748              		.loc 1 2259 0
 8749 0030 4F4B     		ldr	r3, .L435+16
 8750 0032 40F66612 		movw	r2, #2406
 8751 0036 1A80     		strh	r2, [r3]	@ movhi
2260:bluetooth_rxtx.c **** 		do_hop = 1;
 8752              		.loc 1 2260 0
 8753 0038 4E4B     		ldr	r3, .L435+20
 8754 003a 0122     		movs	r2, #1
 8755 003c 1A70     		strb	r2, [r3]
 8756 003e 8BE0     		b	.L428
 8757              	.L429:
2261:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 8758              		.loc 1 2261 0
 8759 0040 474B     		ldr	r3, .L435
 8760 0042 1B88     		ldrh	r3, [r3]	@ movhi
 8761 0044 9BB2     		uxth	r3, r3
 8762 0046 40F66612 		movw	r2, #2406
 8763 004a 9342     		cmp	r3, r2
 8764 004c 7DD1     		bne	.L431
 8765              	.LBB17:
2262:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 8766              		.loc 1 2262 0
 8767 004e 454B     		ldr	r3, .L435+4
 8768 0050 1B68     		ldr	r3, [r3]
 8769 0052 C3F31303 		ubfx	r3, r3, #0, #20
 8770 0056 40F63542 		movw	r2, #3125
 8771 005a 02FB03F2 		mul	r2, r2, r3
 8772 005e 424B     		ldr	r3, .L435+8
 8773 0060 1B68     		ldr	r3, [r3]
 8774 0062 1344     		add	r3, r3, r2
 8775 0064 FB60     		str	r3, [r7, #12]
2263:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 8776              		.loc 1 2263 0
 8777 0066 414B     		ldr	r3, .L435+12
 8778 0068 1B68     		ldr	r3, [r3]
 8779 006a FA68     		ldr	r2, [r7, #12]
 8780 006c 9A42     		cmp	r2, r3
 8781 006e 05D2     		bcs	.L432
2264:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 8782              		.loc 1 2264 0
 8783 0070 FB68     		ldr	r3, [r7, #12]
 8784 0072 03F14343 		add	r3, r3, #-1023410176
 8785 0076 03F5A003 		add	r3, r3, #5242880
 8786 007a FB60     		str	r3, [r7, #12]
 8787              	.L432:
2265:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2266:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 8788              		.loc 1 2266 0
 8789 007c 3B4B     		ldr	r3, .L435+12
 8790 007e 1B68     		ldr	r3, [r3]
 8791 0080 FA68     		ldr	r2, [r7, #12]
 8792 0082 D21A     		subs	r2, r2, r3
 8793 0084 3C4B     		ldr	r3, .L435+24
ARM GAS  /tmp/ccXEAChk.s 			page 194


 8794 0086 DB8B     		ldrh	r3, [r3, #30]
 8795 0088 1946     		mov	r1, r3
 8796 008a 43F2D403 		movw	r3, #12500
 8797 008e 03FB01F3 		mul	r3, r3, r1
 8798 0092 D90F     		lsrs	r1, r3, #31
 8799 0094 0B44     		add	r3, r3, r1
 8800 0096 5B10     		asrs	r3, r3, #1
 8801 0098 1344     		add	r3, r3, r2
 8802 009a 374A     		ldr	r2, .L435+24
 8803 009c D28B     		ldrh	r2, [r2, #30]
 8804 009e 1146     		mov	r1, r2
 8805 00a0 43F2D402 		movw	r2, #12500
 8806 00a4 02FB01F2 		mul	r2, r2, r1
 8807 00a8 B3FBF2F3 		udiv	r3, r3, r2
 8808 00ac BB60     		str	r3, [r7, #8]
2267:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2268:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 8809              		.loc 1 2268 0
 8810 00ae BB68     		ldr	r3, [r7, #8]
 8811 00b0 242B     		cmp	r3, #36
 8812 00b2 42D8     		bhi	.L433
2269:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2270:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 8813              		.loc 1 2270 0
 8814 00b4 314A     		ldr	r2, .L435+28
 8815 00b6 BB68     		ldr	r3, [r7, #8]
 8816 00b8 1344     		add	r3, r3, r2
 8817 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8818 00bc 2E4B     		ldr	r3, .L435+24
 8819 00be 9A75     		strb	r2, [r3, #22]
2271:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 8820              		.loc 1 2271 0
 8821 00c0 2D4B     		ldr	r3, .L435+24
 8822 00c2 DB8B     		ldrh	r3, [r3, #30]
 8823 00c4 5B08     		lsrs	r3, r3, #1
 8824 00c6 9AB2     		uxth	r2, r3
 8825 00c8 2B4B     		ldr	r3, .L435+24
 8826 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2272:bluetooth_rxtx.c **** 			le.conn_count = 0;
 8827              		.loc 1 2272 0
 8828 00cc 2A4B     		ldr	r3, .L435+24
 8829 00ce 0022     		movs	r2, #0
 8830 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2273:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 8831              		.loc 1 2273 0
 8832 00d2 294B     		ldr	r3, .L435+24
 8833 00d4 0022     		movs	r2, #0
 8834 00d6 9A61     		str	r2, [r3, #24]
2274:bluetooth_rxtx.c **** 			do_hop = 0;
 8835              		.loc 1 2274 0
 8836 00d8 264B     		ldr	r3, .L435+20
 8837 00da 0022     		movs	r2, #0
 8838 00dc 1A70     		strb	r2, [r3]
2275:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2276:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 8839              		.loc 1 2276 0
 8840 00de 264B     		ldr	r3, .L435+24
ARM GAS  /tmp/ccXEAChk.s 			page 195


 8841 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 8842 00e2 5A1C     		adds	r2, r3, #1
 8843 00e4 264B     		ldr	r3, .L435+32
 8844 00e6 82FB0301 		smull	r0, r1, r2, r3
 8845 00ea 5318     		adds	r3, r2, r1
 8846 00ec 5911     		asrs	r1, r3, #5
 8847 00ee D317     		asrs	r3, r2, #31
 8848 00f0 C91A     		subs	r1, r1, r3
 8849 00f2 0B46     		mov	r3, r1
 8850 00f4 DB00     		lsls	r3, r3, #3
 8851 00f6 0B44     		add	r3, r3, r1
 8852 00f8 9B00     		lsls	r3, r3, #2
 8853 00fa 0B44     		add	r3, r3, r1
 8854 00fc D11A     		subs	r1, r2, r3
 8855 00fe CAB2     		uxtb	r2, r1
 8856 0100 1D4B     		ldr	r3, .L435+24
 8857 0102 5A75     		strb	r2, [r3, #21]
2277:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 8858              		.loc 1 2277 0
 8859 0104 1C4B     		ldr	r3, .L435+24
 8860 0106 0322     		movs	r2, #3
 8861 0108 1A75     		strb	r2, [r3, #20]
2278:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 8862              		.loc 1 2278 0
 8863 010a 1B4B     		ldr	r3, .L435+24
 8864 010c 0022     		movs	r2, #0
 8865 010e 1A61     		str	r2, [r3, #16]
2279:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 8866              		.loc 1 2279 0
 8867 0110 1C4B     		ldr	r3, .L435+36
 8868 0112 0322     		movs	r2, #3
 8869 0114 1A70     		strb	r2, [r3]
2280:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 8870              		.loc 1 2280 0
 8871 0116 1C4B     		ldr	r3, .L435+40
 8872 0118 1C4A     		ldr	r2, .L435+44
 8873 011a 1A60     		str	r2, [r3]
2281:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 8874              		.loc 1 2281 0
 8875 011c 0320     		movs	r0, #3
 8876 011e 1C49     		ldr	r1, .L435+48
 8877 0120 0122     		movs	r2, #1
 8878 0122 FFF7FEFF 		bl	le_promisc_state
2282:bluetooth_rxtx.c **** 
2283:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 8879              		.loc 1 2283 0
 8880 0126 1B4B     		ldr	r3, .L435+52
 8881 0128 1B78     		ldrb	r3, [r3]
 8882 012a DBB2     		uxtb	r3, r3
 8883 012c 002B     		cmp	r3, #0
 8884 012e 03D0     		beq	.L434
2284:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 8885              		.loc 1 2284 0
 8886 0130 194B     		ldr	r3, .L435+56
 8887 0132 2822     		movs	r2, #40
 8888 0134 1A60     		str	r2, [r3]
2285:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccXEAChk.s 			page 196


2286:bluetooth_rxtx.c **** 			return;
 8889              		.loc 1 2286 0
 8890 0136 0FE0     		b	.L428
 8891              	.L434:
 8892 0138 0EE0     		b	.L428
 8893              	.L433:
2287:bluetooth_rxtx.c **** 		}
2288:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8894              		.loc 1 2288 0
 8895 013a 0D4B     		ldr	r3, .L435+16
 8896 013c 40F66412 		movw	r2, #2404
 8897 0140 1A80     		strh	r2, [r3]	@ movhi
2289:bluetooth_rxtx.c **** 		do_hop = 1;
 8898              		.loc 1 2289 0
 8899 0142 0C4B     		ldr	r3, .L435+20
 8900 0144 0122     		movs	r2, #1
 8901 0146 1A70     		strb	r2, [r3]
 8902              	.LBE17:
 8903 0148 06E0     		b	.L428
 8904              	.L431:
2290:bluetooth_rxtx.c **** 	}
2291:bluetooth_rxtx.c **** 	else {
2292:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8905              		.loc 1 2292 0
 8906 014a 094B     		ldr	r3, .L435+16
 8907 014c 40F66412 		movw	r2, #2404
 8908 0150 1A80     		strh	r2, [r3]	@ movhi
2293:bluetooth_rxtx.c **** 		do_hop = 1;
 8909              		.loc 1 2293 0
 8910 0152 084B     		ldr	r3, .L435+20
 8911 0154 0122     		movs	r2, #1
 8912 0156 1A70     		strb	r2, [r3]
 8913              	.L428:
2294:bluetooth_rxtx.c **** 	}
2295:bluetooth_rxtx.c **** }
 8914              		.loc 1 2295 0
 8915 0158 1037     		adds	r7, r7, #16
 8916              		.cfi_def_cfa_offset 8
 8917 015a BD46     		mov	sp, r7
 8918              		.cfi_def_cfa_register 13
 8919              		@ sp needed
 8920 015c 80BD     		pop	{r7, pc}
 8921              	.L436:
 8922 015e 00BF     		.align	2
 8923              	.L435:
 8924 0160 00000000 		.word	channel
 8925 0164 00000000 		.word	clkn
 8926 0168 08400040 		.word	1073758216
 8927 016c D8000000 		.word	first_ts.4808
 8928 0170 00000000 		.word	hop_direct_channel
 8929 0174 00000000 		.word	do_hop
 8930 0178 00000000 		.word	le
 8931 017c E8000000 		.word	hop_interval_lut
 8932 0180 A7C867DD 		.word	-580400985
 8933 0184 00000000 		.word	hop_mode
 8934 0188 00000000 		.word	packet_cb
 8935 018c 00000000 		.word	connection_follow_cb
ARM GAS  /tmp/ccXEAChk.s 			page 197


 8936 0190 16000000 		.word	le+22
 8937 0194 00000000 		.word	jam_mode
 8938 0198 00000000 		.word	le_jam_count
 8939              		.cfi_endproc
 8940              	.LFE36:
 8942              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 8943              		.align	2
 8944              		.global	promisc_recover_hop_interval
 8945              		.thumb
 8946              		.thumb_func
 8948              	promisc_recover_hop_interval:
 8949              	.LFB37:
2296:bluetooth_rxtx.c **** 
2297:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 8950              		.loc 1 2297 0
 8951              		.cfi_startproc
 8952              		@ args = 0, pretend = 0, frame = 24
 8953              		@ frame_needed = 1, uses_anonymous_args = 0
 8954 0000 80B5     		push	{r7, lr}
 8955              		.cfi_def_cfa_offset 8
 8956              		.cfi_offset 7, -8
 8957              		.cfi_offset 14, -4
 8958 0002 86B0     		sub	sp, sp, #24
 8959              		.cfi_def_cfa_offset 32
 8960 0004 00AF     		add	r7, sp, #0
 8961              		.cfi_def_cfa_register 7
 8962 0006 7860     		str	r0, [r7, #4]
2298:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2299:bluetooth_rxtx.c **** 
2300:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 8963              		.loc 1 2300 0
 8964 0008 334B     		ldr	r3, .L445
 8965 000a 1B68     		ldr	r3, [r3]
 8966 000c C3F31303 		ubfx	r3, r3, #0, #20
 8967 0010 40F63542 		movw	r2, #3125
 8968 0014 02FB03F2 		mul	r2, r2, r3
 8969 0018 304B     		ldr	r3, .L445+4
 8970 001a 1B68     		ldr	r3, [r3]
 8971 001c 1344     		add	r3, r3, r2
 8972 001e 7B61     		str	r3, [r7, #20]
2301:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 8973              		.loc 1 2301 0
 8974 0020 2F4B     		ldr	r3, .L445+8
 8975 0022 1B68     		ldr	r3, [r3]
 8976 0024 7A69     		ldr	r2, [r7, #20]
 8977 0026 9A42     		cmp	r2, r3
 8978 0028 03D2     		bcs	.L438
2302:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 8979              		.loc 1 2302 0
 8980 002a 7A69     		ldr	r2, [r7, #20]
 8981 002c 2D4B     		ldr	r3, .L445+12
 8982 002e 1344     		add	r3, r3, r2
 8983 0030 7B61     		str	r3, [r7, #20]
 8984              	.L438:
2303:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 8985              		.loc 1 2303 0
 8986 0032 2B4B     		ldr	r3, .L445+8
ARM GAS  /tmp/ccXEAChk.s 			page 198


 8987 0034 1B68     		ldr	r3, [r3]
 8988 0036 7A69     		ldr	r2, [r7, #20]
 8989 0038 D31A     		subs	r3, r2, r3
 8990 003a 3B61     		str	r3, [r7, #16]
2304:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2305:bluetooth_rxtx.c **** 
2306:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2307:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 8991              		.loc 1 2307 0
 8992 003c 3B69     		ldr	r3, [r7, #16]
 8993 003e 46F2A712 		movw	r2, #24999
 8994 0042 9342     		cmp	r3, r2
 8995 0044 00D8     		bhi	.L439
2308:bluetooth_rxtx.c **** 		return;
 8996              		.loc 1 2308 0
 8997 0046 43E0     		b	.L437
 8998              	.L439:
2309:bluetooth_rxtx.c **** 
2310:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 8999              		.loc 1 2310 0
 9000 0048 274B     		ldr	r3, .L445+16
 9001 004a D3F80021 		ldr	r2, [r3, #256]
 9002 004e 3B69     		ldr	r3, [r7, #16]
 9003 0050 9A42     		cmp	r2, r3
 9004 0052 03D9     		bls	.L441
2311:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 9005              		.loc 1 2311 0
 9006 0054 244A     		ldr	r2, .L445+16
 9007 0056 3B69     		ldr	r3, [r7, #16]
 9008 0058 C2F80031 		str	r3, [r2, #256]
 9009              	.L441:
2312:bluetooth_rxtx.c **** 
2313:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 9010              		.loc 1 2313 0
 9011 005c 224B     		ldr	r3, .L445+16
 9012 005e D3F80031 		ldr	r3, [r3, #256]
 9013 0062 03F56133 		add	r3, r3, #230400
 9014 0066 03F25233 		addw	r3, r3, #850
 9015 006a 204A     		ldr	r2, .L445+20
 9016 006c A2FB0323 		umull	r2, r3, r2, r3
 9017 0070 9B0C     		lsrs	r3, r3, #18
 9018 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2314:bluetooth_rxtx.c **** 
2315:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 9019              		.loc 1 2315 0
 9020 0074 1E4B     		ldr	r3, .L445+24
 9021 0076 DB8B     		ldrh	r3, [r3, #30]
 9022 0078 FA89     		ldrh	r2, [r7, #14]
 9023 007a 9A42     		cmp	r2, r3
 9024 007c 1ED1     		bne	.L442
2316:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2317:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 9025              		.loc 1 2317 0
 9026 007e 1A4B     		ldr	r3, .L445+16
 9027 0080 D3F80431 		ldr	r3, [r3, #260]
 9028 0084 0133     		adds	r3, r3, #1
 9029 0086 184A     		ldr	r2, .L445+16
ARM GAS  /tmp/ccXEAChk.s 			page 199


 9030 0088 C2F80431 		str	r3, [r2, #260]
2318:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 9031              		.loc 1 2318 0
 9032 008c 164B     		ldr	r3, .L445+16
 9033 008e D3F80431 		ldr	r3, [r3, #260]
 9034 0092 052B     		cmp	r3, #5
 9035 0094 19D1     		bne	.L444
2319:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 9036              		.loc 1 2319 0
 9037 0096 174B     		ldr	r3, .L445+28
 9038 0098 174A     		ldr	r2, .L445+32
 9039 009a 1A60     		str	r2, [r3]
2320:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 9040              		.loc 1 2320 0
 9041 009c 174B     		ldr	r3, .L445+36
 9042 009e 40F66412 		movw	r2, #2404
 9043 00a2 1A80     		strh	r2, [r3]	@ movhi
2321:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 9044              		.loc 1 2321 0
 9045 00a4 164B     		ldr	r3, .L445+40
 9046 00a6 0422     		movs	r2, #4
 9047 00a8 1A70     		strb	r2, [r3]
2322:bluetooth_rxtx.c **** 			do_hop = 1;
 9048              		.loc 1 2322 0
 9049 00aa 164B     		ldr	r3, .L445+44
 9050 00ac 0122     		movs	r2, #1
 9051 00ae 1A70     		strb	r2, [r3]
2323:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 9052              		.loc 1 2323 0
 9053 00b0 0220     		movs	r0, #2
 9054 00b2 1549     		ldr	r1, .L445+48
 9055 00b4 0222     		movs	r2, #2
 9056 00b6 FFF7FEFF 		bl	le_promisc_state
 9057 00ba 06E0     		b	.L444
 9058              	.L442:
2324:bluetooth_rxtx.c **** 		}
2325:bluetooth_rxtx.c **** 	} else {
2326:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 9059              		.loc 1 2326 0
 9060 00bc 0C4A     		ldr	r2, .L445+24
 9061 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 9062 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2327:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 9063              		.loc 1 2327 0
 9064 00c2 094B     		ldr	r3, .L445+16
 9065 00c4 0022     		movs	r2, #0
 9066 00c6 C3F80421 		str	r2, [r3, #260]
 9067              	.L444:
2328:bluetooth_rxtx.c **** 	}
2329:bluetooth_rxtx.c **** 
2330:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 9068              		.loc 1 2330 0
 9069 00ca 054A     		ldr	r2, .L445+8
 9070 00cc 7B69     		ldr	r3, [r7, #20]
 9071 00ce 1360     		str	r3, [r2]
 9072              	.L437:
2331:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccXEAChk.s 			page 200


 9073              		.loc 1 2331 0
 9074 00d0 1837     		adds	r7, r7, #24
 9075              		.cfi_def_cfa_offset 8
 9076 00d2 BD46     		mov	sp, r7
 9077              		.cfi_def_cfa_register 13
 9078              		@ sp needed
 9079 00d4 80BD     		pop	{r7, pc}
 9080              	.L446:
 9081 00d6 00BF     		.align	2
 9082              	.L445:
 9083 00d8 00000000 		.word	clkn
 9084 00dc 08400040 		.word	1073758216
 9085 00e0 DC000000 		.word	prev_clk.4814
 9086 00e4 C0ABC6C2 		.word	-1027167296
 9087 00e8 00000000 		.word	le_promisc
 9088 00ec C1A91991 		.word	-1860589119
 9089 00f0 00000000 		.word	le
 9090 00f4 00000000 		.word	packet_cb
 9091 00f8 00000000 		.word	promisc_recover_hop_increment
 9092 00fc 00000000 		.word	hop_direct_channel
 9093 0100 00000000 		.word	hop_mode
 9094 0104 00000000 		.word	do_hop
 9095 0108 1E000000 		.word	le+30
 9096              		.cfi_endproc
 9097              	.LFE37:
 9099              		.section	.text.promisc_follow_cb,"ax",%progbits
 9100              		.align	2
 9101              		.global	promisc_follow_cb
 9102              		.thumb
 9103              		.thumb_func
 9105              	promisc_follow_cb:
 9106              	.LFB38:
2332:bluetooth_rxtx.c **** 
2333:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 9107              		.loc 1 2333 0
 9108              		.cfi_startproc
 9109              		@ args = 0, pretend = 0, frame = 16
 9110              		@ frame_needed = 1, uses_anonymous_args = 0
 9111 0000 80B5     		push	{r7, lr}
 9112              		.cfi_def_cfa_offset 8
 9113              		.cfi_offset 7, -8
 9114              		.cfi_offset 14, -4
 9115 0002 84B0     		sub	sp, sp, #16
 9116              		.cfi_def_cfa_offset 24
 9117 0004 00AF     		add	r7, sp, #0
 9118              		.cfi_def_cfa_register 7
 9119 0006 7860     		str	r0, [r7, #4]
2334:bluetooth_rxtx.c **** 	int i;
2335:bluetooth_rxtx.c **** 
2336:bluetooth_rxtx.c **** 	// get the CRCInit
2337:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 9120              		.loc 1 2337 0
 9121 0008 284B     		ldr	r3, .L451
 9122 000a 1B69     		ldr	r3, [r3, #16]
 9123 000c 002B     		cmp	r3, #0
 9124 000e 49D1     		bne	.L447
 9125              		.loc 1 2337 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccXEAChk.s 			page 201


 9126 0010 7B68     		ldr	r3, [r7, #4]
 9127 0012 0433     		adds	r3, r3, #4
 9128 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9129 0016 012B     		cmp	r3, #1
 9130 0018 44D1     		bne	.L447
 9131              		.loc 1 2337 0 discriminator 2
 9132 001a 7B68     		ldr	r3, [r7, #4]
 9133 001c 0533     		adds	r3, r3, #5
 9134 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9135 0020 002B     		cmp	r3, #0
 9136 0022 3FD1     		bne	.L447
 9137              	.LBB18:
2338:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 9138              		.loc 1 2338 0 is_stmt 1
 9139 0024 7B68     		ldr	r3, [r7, #4]
 9140 0026 0833     		adds	r3, r3, #8
 9141 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9142 002a 1A04     		lsls	r2, r3, #16
 9143 002c 7B68     		ldr	r3, [r7, #4]
 9144 002e 0733     		adds	r3, r3, #7
 9145 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9146 0032 1B02     		lsls	r3, r3, #8
 9147 0034 1343     		orrs	r3, r3, r2
 9148 0036 7A68     		ldr	r2, [r7, #4]
 9149 0038 0632     		adds	r2, r2, #6
 9150 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9151 003c 1343     		orrs	r3, r3, r2
 9152 003e BB60     		str	r3, [r7, #8]
2339:bluetooth_rxtx.c **** 
2340:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 9153              		.loc 1 2340 0
 9154 0040 7B68     		ldr	r3, [r7, #4]
 9155 0042 0433     		adds	r3, r3, #4
 9156 0044 B868     		ldr	r0, [r7, #8]
 9157 0046 1946     		mov	r1, r3
 9158 0048 0222     		movs	r2, #2
 9159 004a FFF7FEFF 		bl	btle_reverse_crc
 9160 004e 0246     		mov	r2, r0
 9161 0050 164B     		ldr	r3, .L451
 9162 0052 9A60     		str	r2, [r3, #8]
2341:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 9163              		.loc 1 2341 0
 9164 0054 154B     		ldr	r3, .L451
 9165 0056 0022     		movs	r2, #0
 9166 0058 DA60     		str	r2, [r3, #12]
2342:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9167              		.loc 1 2342 0
 9168 005a 0023     		movs	r3, #0
 9169 005c FB60     		str	r3, [r7, #12]
 9170 005e 13E0     		b	.L449
 9171              	.L450:
2343:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 9172              		.loc 1 2343 0 discriminator 3
 9173 0060 124B     		ldr	r3, .L451
 9174 0062 DA68     		ldr	r2, [r3, #12]
 9175 0064 114B     		ldr	r3, .L451
 9176 0066 9968     		ldr	r1, [r3, #8]
ARM GAS  /tmp/ccXEAChk.s 			page 202


 9177 0068 FB68     		ldr	r3, [r7, #12]
 9178 006a 21FA03F3 		lsr	r3, r1, r3
 9179 006e 03F00101 		and	r1, r3, #1
 9180 0072 FB68     		ldr	r3, [r7, #12]
 9181 0074 C3F11703 		rsb	r3, r3, #23
 9182 0078 01FA03F3 		lsl	r3, r1, r3
 9183 007c 1343     		orrs	r3, r3, r2
 9184 007e 0B4A     		ldr	r2, .L451
 9185 0080 D360     		str	r3, [r2, #12]
2342:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9186              		.loc 1 2342 0 discriminator 3
 9187 0082 FB68     		ldr	r3, [r7, #12]
 9188 0084 0133     		adds	r3, r3, #1
 9189 0086 FB60     		str	r3, [r7, #12]
 9190              	.L449:
2342:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9191              		.loc 1 2342 0 is_stmt 0 discriminator 1
 9192 0088 FB68     		ldr	r3, [r7, #12]
 9193 008a 172B     		cmp	r3, #23
 9194 008c E8DD     		ble	.L450
2344:bluetooth_rxtx.c **** 
2345:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 9195              		.loc 1 2345 0 is_stmt 1
 9196 008e 074B     		ldr	r3, .L451
 9197 0090 0122     		movs	r2, #1
 9198 0092 1A61     		str	r2, [r3, #16]
2346:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 9199              		.loc 1 2346 0
 9200 0094 064B     		ldr	r3, .L451+4
 9201 0096 074A     		ldr	r2, .L451+8
 9202 0098 1A60     		str	r2, [r3]
2347:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 9203              		.loc 1 2347 0
 9204 009a 0120     		movs	r0, #1
 9205 009c 0649     		ldr	r1, .L451+12
 9206 009e 0322     		movs	r2, #3
 9207 00a0 FFF7FEFF 		bl	le_promisc_state
 9208              	.L447:
 9209              	.LBE18:
2348:bluetooth_rxtx.c **** 	}
2349:bluetooth_rxtx.c **** }
 9210              		.loc 1 2349 0
 9211 00a4 1037     		adds	r7, r7, #16
 9212              		.cfi_def_cfa_offset 8
 9213 00a6 BD46     		mov	sp, r7
 9214              		.cfi_def_cfa_register 13
 9215              		@ sp needed
 9216 00a8 80BD     		pop	{r7, pc}
 9217              	.L452:
 9218 00aa 00BF     		.align	2
 9219              	.L451:
 9220 00ac 00000000 		.word	le
 9221 00b0 00000000 		.word	packet_cb
 9222 00b4 00000000 		.word	promisc_recover_hop_interval
 9223 00b8 08000000 		.word	le+8
 9224              		.cfi_endproc
 9225              	.LFE38:
ARM GAS  /tmp/ccXEAChk.s 			page 203


 9227              		.section	.text.see_aa,"ax",%progbits
 9228              		.align	2
 9229              		.global	see_aa
 9230              		.thumb
 9231              		.thumb_func
 9233              	see_aa:
 9234              	.LFB39:
2350:bluetooth_rxtx.c **** 
2351:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2352:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 9235              		.loc 1 2352 0
 9236              		.cfi_startproc
 9237              		@ args = 0, pretend = 0, frame = 24
 9238              		@ frame_needed = 1, uses_anonymous_args = 0
 9239              		@ link register save eliminated.
 9240 0000 80B4     		push	{r7}
 9241              		.cfi_def_cfa_offset 4
 9242              		.cfi_offset 7, -4
 9243 0002 87B0     		sub	sp, sp, #28
 9244              		.cfi_def_cfa_offset 32
 9245 0004 00AF     		add	r7, sp, #0
 9246              		.cfi_def_cfa_register 7
 9247 0006 7860     		str	r0, [r7, #4]
2353:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 9248              		.loc 1 2353 0
 9249 0008 4FF0FF33 		mov	r3, #-1
 9250 000c 3B61     		str	r3, [r7, #16]
 9251 000e 4FF0FF33 		mov	r3, #-1
 9252 0012 FB60     		str	r3, [r7, #12]
2354:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9253              		.loc 1 2354 0
 9254 0014 0023     		movs	r3, #0
 9255 0016 7B61     		str	r3, [r7, #20]
 9256 0018 15E0     		b	.L454
 9257              	.L457:
2355:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9258              		.loc 1 2355 0
 9259 001a 224A     		ldr	r2, .L462
 9260 001c 7B69     		ldr	r3, [r7, #20]
 9261 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 9262 0022 7B68     		ldr	r3, [r7, #4]
 9263 0024 9A42     		cmp	r2, r3
 9264 0026 0BD1     		bne	.L455
2356:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 9265              		.loc 1 2356 0
 9266 0028 1E4A     		ldr	r2, .L462
 9267 002a 7B69     		ldr	r3, [r7, #20]
 9268 002c DB00     		lsls	r3, r3, #3
 9269 002e 1344     		add	r3, r3, r2
 9270 0030 5B68     		ldr	r3, [r3, #4]
 9271 0032 5A1C     		adds	r2, r3, #1
 9272 0034 1B49     		ldr	r1, .L462
 9273 0036 7B69     		ldr	r3, [r7, #20]
 9274 0038 DB00     		lsls	r3, r3, #3
 9275 003a 0B44     		add	r3, r3, r1
 9276 003c 5A60     		str	r2, [r3, #4]
2357:bluetooth_rxtx.c **** 			return;
ARM GAS  /tmp/ccXEAChk.s 			page 204


 9277              		.loc 1 2357 0
 9278 003e 2CE0     		b	.L453
 9279              	.L455:
2354:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9280              		.loc 1 2354 0 discriminator 2
 9281 0040 7B69     		ldr	r3, [r7, #20]
 9282 0042 0133     		adds	r3, r3, #1
 9283 0044 7B61     		str	r3, [r7, #20]
 9284              	.L454:
2354:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9285              		.loc 1 2354 0 is_stmt 0 discriminator 1
 9286 0046 7B69     		ldr	r3, [r7, #20]
 9287 0048 1F2B     		cmp	r3, #31
 9288 004a E6DD     		ble	.L457
2358:bluetooth_rxtx.c **** 		}
2359:bluetooth_rxtx.c **** 
2360:bluetooth_rxtx.c **** 	// evict someone
2361:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9289              		.loc 1 2361 0 is_stmt 1
 9290 004c 0023     		movs	r3, #0
 9291 004e 7B61     		str	r3, [r7, #20]
 9292 0050 15E0     		b	.L458
 9293              	.L461:
2362:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9294              		.loc 1 2362 0
 9295 0052 144A     		ldr	r2, .L462
 9296 0054 7B69     		ldr	r3, [r7, #20]
 9297 0056 DB00     		lsls	r3, r3, #3
 9298 0058 1344     		add	r3, r3, r2
 9299 005a 5A68     		ldr	r2, [r3, #4]
 9300 005c 3B69     		ldr	r3, [r7, #16]
 9301 005e 9A42     		cmp	r2, r3
 9302 0060 02DB     		blt	.L459
 9303              		.loc 1 2362 0 is_stmt 0 discriminator 1
 9304 0062 3B69     		ldr	r3, [r7, #16]
 9305 0064 002B     		cmp	r3, #0
 9306 0066 07DA     		bge	.L460
 9307              	.L459:
2363:bluetooth_rxtx.c **** 			killme = i;
 9308              		.loc 1 2363 0 is_stmt 1
 9309 0068 7B69     		ldr	r3, [r7, #20]
 9310 006a FB60     		str	r3, [r7, #12]
2364:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 9311              		.loc 1 2364 0
 9312 006c 0D4A     		ldr	r2, .L462
 9313 006e 7B69     		ldr	r3, [r7, #20]
 9314 0070 DB00     		lsls	r3, r3, #3
 9315 0072 1344     		add	r3, r3, r2
 9316 0074 5B68     		ldr	r3, [r3, #4]
 9317 0076 3B61     		str	r3, [r7, #16]
 9318              	.L460:
2361:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9319              		.loc 1 2361 0 discriminator 2
 9320 0078 7B69     		ldr	r3, [r7, #20]
 9321 007a 0133     		adds	r3, r3, #1
 9322 007c 7B61     		str	r3, [r7, #20]
 9323              	.L458:
ARM GAS  /tmp/ccXEAChk.s 			page 205


2361:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9324              		.loc 1 2361 0 is_stmt 0 discriminator 1
 9325 007e 7B69     		ldr	r3, [r7, #20]
 9326 0080 1F2B     		cmp	r3, #31
 9327 0082 E6DD     		ble	.L461
2365:bluetooth_rxtx.c **** 		}
2366:bluetooth_rxtx.c **** 
2367:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 9328              		.loc 1 2367 0 is_stmt 1
 9329 0084 0749     		ldr	r1, .L462
 9330 0086 FB68     		ldr	r3, [r7, #12]
 9331 0088 7A68     		ldr	r2, [r7, #4]
 9332 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2368:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 9333              		.loc 1 2368 0
 9334 008e 054A     		ldr	r2, .L462
 9335 0090 FB68     		ldr	r3, [r7, #12]
 9336 0092 DB00     		lsls	r3, r3, #3
 9337 0094 1344     		add	r3, r3, r2
 9338 0096 0122     		movs	r2, #1
 9339 0098 5A60     		str	r2, [r3, #4]
 9340              	.L453:
2369:bluetooth_rxtx.c **** }
 9341              		.loc 1 2369 0
 9342 009a 1C37     		adds	r7, r7, #28
 9343              		.cfi_def_cfa_offset 4
 9344 009c BD46     		mov	sp, r7
 9345              		.cfi_def_cfa_register 13
 9346              		@ sp needed
 9347 009e 5DF8047B 		ldr	r7, [sp], #4
 9348              		.cfi_restore 7
 9349              		.cfi_def_cfa_offset 0
 9350 00a2 7047     		bx	lr
 9351              	.L463:
 9352              		.align	2
 9353              	.L462:
 9354 00a4 00000000 		.word	le_promisc
 9355              		.cfi_endproc
 9356              	.LFE39:
 9358              		.section	.rodata
 9359 0907 00       		.align	2
 9360              	.LC0:
 9361 0908 01000000 		.word	1
 9362 090c 01000000 		.word	1
 9363 0910 01000000 		.word	1
 9364 0914 01000000 		.word	1
 9365              		.section	.text.cb_le_promisc,"ax",%progbits
 9366              		.align	2
 9367              		.global	cb_le_promisc
 9368              		.thumb
 9369              		.thumb_func
 9371              	cb_le_promisc:
 9372              	.LFB40:
2370:bluetooth_rxtx.c **** 
2371:bluetooth_rxtx.c **** /* le promiscuous mode */
2372:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 9373              		.loc 1 2372 0
ARM GAS  /tmp/ccXEAChk.s 			page 206


 9374              		.cfi_startproc
 9375              		@ args = 0, pretend = 0, frame = 128
 9376              		@ frame_needed = 1, uses_anonymous_args = 0
 9377 0000 90B5     		push	{r4, r7, lr}
 9378              		.cfi_def_cfa_offset 12
 9379              		.cfi_offset 4, -12
 9380              		.cfi_offset 7, -8
 9381              		.cfi_offset 14, -4
 9382 0002 A1B0     		sub	sp, sp, #132
 9383              		.cfi_def_cfa_offset 144
 9384 0004 00AF     		add	r7, sp, #0
 9385              		.cfi_def_cfa_register 7
 9386 0006 7860     		str	r0, [r7, #4]
2373:bluetooth_rxtx.c **** 	int i, j, k;
2374:bluetooth_rxtx.c **** 	int idx;
2375:bluetooth_rxtx.c **** 
2376:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2377:bluetooth_rxtx.c **** 	char desired[4][16] = {
 9387              		.loc 1 2377 0
 9388 0008 07F11C03 		add	r3, r7, #28
 9389 000c 4022     		movs	r2, #64
 9390 000e 1846     		mov	r0, r3
 9391 0010 0021     		movs	r1, #0
 9392 0012 FFF7FEFF 		bl	memset
 9393 0016 0123     		movs	r3, #1
 9394 0018 3B77     		strb	r3, [r7, #28]
 9395 001a 0123     		movs	r3, #1
 9396 001c 87F82C30 		strb	r3, [r7, #44]
 9397 0020 0123     		movs	r3, #1
 9398 0022 87F82F30 		strb	r3, [r7, #47]
 9399 0026 0123     		movs	r3, #1
 9400 0028 87F83C30 		strb	r3, [r7, #60]
 9401 002c 0123     		movs	r3, #1
 9402 002e 87F83E30 		strb	r3, [r7, #62]
 9403 0032 0123     		movs	r3, #1
 9404 0034 87F84C30 		strb	r3, [r7, #76]
 9405 0038 0123     		movs	r3, #1
 9406 003a 87F84E30 		strb	r3, [r7, #78]
 9407 003e 0123     		movs	r3, #1
 9408 0040 87F84F30 		strb	r3, [r7, #79]
2378:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2379:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2380:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2381:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2382:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2383:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2384:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2385:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2386:bluetooth_rxtx.c **** 	};
2387:bluetooth_rxtx.c **** 
2388:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 9409              		.loc 1 2388 0
 9410 0044 0023     		movs	r3, #0
 9411 0046 FB67     		str	r3, [r7, #124]
 9412 0048 41E0     		b	.L465
 9413              	.L468:
2389:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
ARM GAS  /tmp/ccXEAChk.s 			page 207


 9414              		.loc 1 2389 0
 9415 004a A54B     		ldr	r3, .L495
 9416 004c 1B88     		ldrh	r3, [r3]	@ movhi
 9417 004e 9BB2     		uxth	r3, r3
 9418 0050 DBB2     		uxtb	r3, r3
 9419 0052 623B     		subs	r3, r3, #98
 9420 0054 DBB2     		uxtb	r3, r3
 9421 0056 1846     		mov	r0, r3
 9422 0058 FFF7FEFF 		bl	btle_channel_index
 9423 005c 0346     		mov	r3, r0
 9424 005e 1A46     		mov	r2, r3
 9425 0060 A04B     		ldr	r3, .L495+4
 9426 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9427 0064 3B67     		str	r3, [r7, #112]
2390:bluetooth_rxtx.c **** 
2391:bluetooth_rxtx.c **** 		// whiten the desired data
2392:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 9428              		.loc 1 2392 0
 9429 0066 0023     		movs	r3, #0
 9430 0068 BB67     		str	r3, [r7, #120]
 9431 006a 2AE0     		b	.L466
 9432              	.L467:
2393:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9433              		.loc 1 2393 0 discriminator 3
 9434 006c FB6F     		ldr	r3, [r7, #124]
 9435 006e 1B01     		lsls	r3, r3, #4
 9436 0070 07F18002 		add	r2, r7, #128
 9437 0074 1A44     		add	r2, r2, r3
 9438 0076 BB6F     		ldr	r3, [r7, #120]
 9439 0078 1344     		add	r3, r3, r2
 9440 007a 643B     		subs	r3, r3, #100
 9441 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9442 007e 9A49     		ldr	r1, .L495+8
 9443 0080 3B6F     		ldr	r3, [r7, #112]
 9444 0082 0B44     		add	r3, r3, r1
 9445 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9446 0086 5340     		eors	r3, r3, r2
 9447 0088 D9B2     		uxtb	r1, r3
 9448 008a FB6F     		ldr	r3, [r7, #124]
 9449 008c 1B01     		lsls	r3, r3, #4
 9450 008e 07F18002 		add	r2, r7, #128
 9451 0092 1A44     		add	r2, r2, r3
 9452 0094 BB6F     		ldr	r3, [r7, #120]
 9453 0096 1344     		add	r3, r3, r2
 9454 0098 643B     		subs	r3, r3, #100
 9455 009a 0A46     		mov	r2, r1
 9456 009c 1A70     		strb	r2, [r3]
2394:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 9457              		.loc 1 2394 0 discriminator 3
 9458 009e 3B6F     		ldr	r3, [r7, #112]
 9459 00a0 0133     		adds	r3, r3, #1
 9460 00a2 1946     		mov	r1, r3
 9461 00a4 914B     		ldr	r3, .L495+12
 9462 00a6 A1FB0323 		umull	r2, r3, r1, r3
 9463 00aa C81A     		subs	r0, r1, r3
 9464 00ac 4008     		lsrs	r0, r0, #1
 9465 00ae 0344     		add	r3, r3, r0
ARM GAS  /tmp/ccXEAChk.s 			page 208


 9466 00b0 9A09     		lsrs	r2, r3, #6
 9467 00b2 1346     		mov	r3, r2
 9468 00b4 DB01     		lsls	r3, r3, #7
 9469 00b6 9B1A     		subs	r3, r3, r2
 9470 00b8 CA1A     		subs	r2, r1, r3
 9471 00ba 3A67     		str	r2, [r7, #112]
2392:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9472              		.loc 1 2392 0 discriminator 3
 9473 00bc BB6F     		ldr	r3, [r7, #120]
 9474 00be 0133     		adds	r3, r3, #1
 9475 00c0 BB67     		str	r3, [r7, #120]
 9476              	.L466:
2392:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9477              		.loc 1 2392 0 is_stmt 0 discriminator 1
 9478 00c2 BB6F     		ldr	r3, [r7, #120]
 9479 00c4 0F2B     		cmp	r3, #15
 9480 00c6 D1DD     		ble	.L467
2388:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9481              		.loc 1 2388 0 is_stmt 1 discriminator 2
 9482 00c8 FB6F     		ldr	r3, [r7, #124]
 9483 00ca 0133     		adds	r3, r3, #1
 9484 00cc FB67     		str	r3, [r7, #124]
 9485              	.L465:
2388:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9486              		.loc 1 2388 0 is_stmt 0 discriminator 1
 9487 00ce FB6F     		ldr	r3, [r7, #124]
 9488 00d0 032B     		cmp	r3, #3
 9489 00d2 BADD     		ble	.L468
2395:bluetooth_rxtx.c **** 		}
2396:bluetooth_rxtx.c **** 	}
2397:bluetooth_rxtx.c **** 
2398:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2399:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 9490              		.loc 1 2399 0 is_stmt 1
 9491 00d4 2023     		movs	r3, #32
 9492 00d6 FB67     		str	r3, [r7, #124]
 9493 00d8 D0E0     		b	.L469
 9494              	.L489:
 9495              	.LBB19:
2400:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9496              		.loc 1 2400 0
 9497 00da 854B     		ldr	r3, .L495+16
 9498 00dc 07F10C04 		add	r4, r7, #12
 9499 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 9500 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2401:bluetooth_rxtx.c **** 		int matching = -1;
 9501              		.loc 1 2401 0
 9502 00e6 4FF0FF33 		mov	r3, #-1
 9503 00ea FB66     		str	r3, [r7, #108]
2402:bluetooth_rxtx.c **** 
2403:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9504              		.loc 1 2403 0
 9505 00ec 0023     		movs	r3, #0
 9506 00ee BB67     		str	r3, [r7, #120]
 9507 00f0 26E0     		b	.L470
 9508              	.L475:
2404:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
ARM GAS  /tmp/ccXEAChk.s 			page 209


 9509              		.loc 1 2404 0
 9510 00f2 0023     		movs	r3, #0
 9511 00f4 7B67     		str	r3, [r7, #116]
 9512 00f6 1DE0     		b	.L471
 9513              	.L474:
2405:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9514              		.loc 1 2405 0
 9515 00f8 FA6F     		ldr	r2, [r7, #124]
 9516 00fa 7B6F     		ldr	r3, [r7, #116]
 9517 00fc 1344     		add	r3, r3, r2
 9518 00fe 1A46     		mov	r2, r3
 9519 0100 7B68     		ldr	r3, [r7, #4]
 9520 0102 1344     		add	r3, r3, r2
 9521 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9522 0106 BB6F     		ldr	r3, [r7, #120]
 9523 0108 1B01     		lsls	r3, r3, #4
 9524 010a 07F18001 		add	r1, r7, #128
 9525 010e 1944     		add	r1, r1, r3
 9526 0110 7B6F     		ldr	r3, [r7, #116]
 9527 0112 0B44     		add	r3, r3, r1
 9528 0114 643B     		subs	r3, r3, #100
 9529 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9530 0118 9A42     		cmp	r2, r3
 9531 011a 08D0     		beq	.L472
2406:bluetooth_rxtx.c **** 					ok[j] = 0;
 9532              		.loc 1 2406 0
 9533 011c BB6F     		ldr	r3, [r7, #120]
 9534 011e 9B00     		lsls	r3, r3, #2
 9535 0120 07F18002 		add	r2, r7, #128
 9536 0124 1344     		add	r3, r3, r2
 9537 0126 0022     		movs	r2, #0
 9538 0128 43F8742C 		str	r2, [r3, #-116]
2407:bluetooth_rxtx.c **** 					break;
 9539              		.loc 1 2407 0
 9540 012c 05E0     		b	.L473
 9541              	.L472:
2404:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9542              		.loc 1 2404 0 discriminator 2
 9543 012e 7B6F     		ldr	r3, [r7, #116]
 9544 0130 0133     		adds	r3, r3, #1
 9545 0132 7B67     		str	r3, [r7, #116]
 9546              	.L471:
2404:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9547              		.loc 1 2404 0 is_stmt 0 discriminator 1
 9548 0134 7B6F     		ldr	r3, [r7, #116]
 9549 0136 0F2B     		cmp	r3, #15
 9550 0138 DEDD     		ble	.L474
 9551              	.L473:
2403:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9552              		.loc 1 2403 0 is_stmt 1 discriminator 2
 9553 013a BB6F     		ldr	r3, [r7, #120]
 9554 013c 0133     		adds	r3, r3, #1
 9555 013e BB67     		str	r3, [r7, #120]
 9556              	.L470:
2403:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9557              		.loc 1 2403 0 is_stmt 0 discriminator 1
 9558 0140 BB6F     		ldr	r3, [r7, #120]
ARM GAS  /tmp/ccXEAChk.s 			page 210


 9559 0142 032B     		cmp	r3, #3
 9560 0144 D5DD     		ble	.L475
2408:bluetooth_rxtx.c **** 				}
2409:bluetooth_rxtx.c **** 			}
2410:bluetooth_rxtx.c **** 		}
2411:bluetooth_rxtx.c **** 
2412:bluetooth_rxtx.c **** 		// see if any match
2413:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9561              		.loc 1 2413 0 is_stmt 1
 9562 0146 0023     		movs	r3, #0
 9563 0148 BB67     		str	r3, [r7, #120]
 9564 014a 0EE0     		b	.L476
 9565              	.L479:
2414:bluetooth_rxtx.c **** 			if (ok[j]) {
 9566              		.loc 1 2414 0
 9567 014c BB6F     		ldr	r3, [r7, #120]
 9568 014e 9B00     		lsls	r3, r3, #2
 9569 0150 07F18002 		add	r2, r7, #128
 9570 0154 1344     		add	r3, r3, r2
 9571 0156 53F8743C 		ldr	r3, [r3, #-116]
 9572 015a 002B     		cmp	r3, #0
 9573 015c 02D0     		beq	.L477
2415:bluetooth_rxtx.c **** 				matching = j;
 9574              		.loc 1 2415 0
 9575 015e BB6F     		ldr	r3, [r7, #120]
 9576 0160 FB66     		str	r3, [r7, #108]
2416:bluetooth_rxtx.c **** 				break;
 9577              		.loc 1 2416 0
 9578 0162 05E0     		b	.L478
 9579              	.L477:
2413:bluetooth_rxtx.c **** 			if (ok[j]) {
 9580              		.loc 1 2413 0 discriminator 2
 9581 0164 BB6F     		ldr	r3, [r7, #120]
 9582 0166 0133     		adds	r3, r3, #1
 9583 0168 BB67     		str	r3, [r7, #120]
 9584              	.L476:
2413:bluetooth_rxtx.c **** 			if (ok[j]) {
 9585              		.loc 1 2413 0 is_stmt 0 discriminator 1
 9586 016a BB6F     		ldr	r3, [r7, #120]
 9587 016c 032B     		cmp	r3, #3
 9588 016e EDDD     		ble	.L479
 9589              	.L478:
2417:bluetooth_rxtx.c **** 			}
2418:bluetooth_rxtx.c **** 		}
2419:bluetooth_rxtx.c **** 
2420:bluetooth_rxtx.c **** 		// skip if no match
2421:bluetooth_rxtx.c **** 		if (matching < 0)
 9590              		.loc 1 2421 0 is_stmt 1
 9591 0170 FB6E     		ldr	r3, [r7, #108]
 9592 0172 002B     		cmp	r3, #0
 9593 0174 7FDB     		blt	.L481
2422:bluetooth_rxtx.c **** 			continue;
2423:bluetooth_rxtx.c **** 
2424:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2425:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9594              		.loc 1 2425 0
 9595 0176 5A4B     		ldr	r3, .L495
ARM GAS  /tmp/ccXEAChk.s 			page 211


 9596 0178 1B88     		ldrh	r3, [r3]	@ movhi
 9597 017a 9BB2     		uxth	r3, r3
 9598 017c DBB2     		uxtb	r3, r3
 9599 017e 623B     		subs	r3, r3, #98
 9600 0180 DBB2     		uxtb	r3, r3
 9601 0182 1846     		mov	r0, r3
 9602 0184 FFF7FEFF 		bl	btle_channel_index
 9603 0188 0346     		mov	r3, r0
 9604 018a 1A46     		mov	r2, r3
 9605 018c 554B     		ldr	r3, .L495+4
 9606 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9607 0190 3B67     		str	r3, [r7, #112]
2426:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 9608              		.loc 1 2426 0
 9609 0192 0023     		movs	r3, #0
 9610 0194 BB67     		str	r3, [r7, #120]
 9611 0196 4CE0     		b	.L482
 9612              	.L488:
 9613              	.LBB20:
2427:bluetooth_rxtx.c **** 			u8 byte = 0;
 9614              		.loc 1 2427 0
 9615 0198 0023     		movs	r3, #0
 9616 019a 87F86B30 		strb	r3, [r7, #107]
2428:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 9617              		.loc 1 2428 0
 9618 019e 0023     		movs	r3, #0
 9619 01a0 7B67     		str	r3, [r7, #116]
 9620 01a2 39E0     		b	.L483
 9621              	.L487:
 9622              	.LBB21:
2429:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9623              		.loc 1 2429 0
 9624 01a4 BB6F     		ldr	r3, [r7, #120]
 9625 01a6 DA00     		lsls	r2, r3, #3
 9626 01a8 7B6F     		ldr	r3, [r7, #116]
 9627 01aa 1A44     		add	r2, r2, r3
 9628 01ac FB6F     		ldr	r3, [r7, #124]
 9629 01ae 1344     		add	r3, r3, r2
 9630 01b0 203B     		subs	r3, r3, #32
 9631 01b2 3B66     		str	r3, [r7, #96]
2430:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 9632              		.loc 1 2430 0
 9633 01b4 3B6E     		ldr	r3, [r7, #96]
 9634 01b6 B3F5487F 		cmp	r3, #800
 9635 01ba 00DB     		blt	.L484
 9636 01bc 2FE0     		b	.L485
 9637              	.L484:
2431:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 9638              		.loc 1 2431 0
 9639 01be 3B6E     		ldr	r3, [r7, #96]
 9640 01c0 7A68     		ldr	r2, [r7, #4]
 9641 01c2 1344     		add	r3, r3, r2
 9642 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9643 01c6 7B66     		str	r3, [r7, #100]
2432:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 9644              		.loc 1 2432 0
 9645 01c8 BB6F     		ldr	r3, [r7, #120]
ARM GAS  /tmp/ccXEAChk.s 			page 212


 9646 01ca 032B     		cmp	r3, #3
 9647 01cc 16DD     		ble	.L486
2433:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 9648              		.loc 1 2433 0
 9649 01ce 464A     		ldr	r2, .L495+8
 9650 01d0 3B6F     		ldr	r3, [r7, #112]
 9651 01d2 1344     		add	r3, r3, r2
 9652 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9653 01d6 1A46     		mov	r2, r3
 9654 01d8 7B6E     		ldr	r3, [r7, #100]
 9655 01da 5340     		eors	r3, r3, r2
 9656 01dc 7B66     		str	r3, [r7, #100]
2434:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 9657              		.loc 1 2434 0
 9658 01de 3B6F     		ldr	r3, [r7, #112]
 9659 01e0 0133     		adds	r3, r3, #1
 9660 01e2 1946     		mov	r1, r3
 9661 01e4 414B     		ldr	r3, .L495+12
 9662 01e6 A1FB0323 		umull	r2, r3, r1, r3
 9663 01ea C81A     		subs	r0, r1, r3
 9664 01ec 4008     		lsrs	r0, r0, #1
 9665 01ee 0344     		add	r3, r3, r0
 9666 01f0 9A09     		lsrs	r2, r3, #6
 9667 01f2 1346     		mov	r3, r2
 9668 01f4 DB01     		lsls	r3, r3, #7
 9669 01f6 9B1A     		subs	r3, r3, r2
 9670 01f8 CA1A     		subs	r2, r1, r3
 9671 01fa 3A67     		str	r2, [r7, #112]
 9672              	.L486:
2435:bluetooth_rxtx.c **** 				}
2436:bluetooth_rxtx.c **** 				byte |= bit << k;
 9673              		.loc 1 2436 0 discriminator 2
 9674 01fc 7A6E     		ldr	r2, [r7, #100]
 9675 01fe 7B6F     		ldr	r3, [r7, #116]
 9676 0200 02FA03F3 		lsl	r3, r2, r3
 9677 0204 DAB2     		uxtb	r2, r3
 9678 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 9679 020a 1343     		orrs	r3, r3, r2
 9680 020c DBB2     		uxtb	r3, r3
 9681 020e 87F86B30 		strb	r3, [r7, #107]
 9682              	.LBE21:
2428:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9683              		.loc 1 2428 0 discriminator 2
 9684 0212 7B6F     		ldr	r3, [r7, #116]
 9685 0214 0133     		adds	r3, r3, #1
 9686 0216 7B67     		str	r3, [r7, #116]
 9687              	.L483:
2428:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9688              		.loc 1 2428 0 is_stmt 0 discriminator 1
 9689 0218 7B6F     		ldr	r3, [r7, #116]
 9690 021a 072B     		cmp	r3, #7
 9691 021c C2DD     		ble	.L487
 9692              	.L485:
2437:bluetooth_rxtx.c **** 			}
2438:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 9693              		.loc 1 2438 0 is_stmt 1 discriminator 2
 9694 021e 354B     		ldr	r3, .L495+20
ARM GAS  /tmp/ccXEAChk.s 			page 213


 9695 0220 1A68     		ldr	r2, [r3]
 9696 0222 BB6F     		ldr	r3, [r7, #120]
 9697 0224 1344     		add	r3, r3, r2
 9698 0226 97F86B20 		ldrb	r2, [r7, #107]
 9699 022a 1A70     		strb	r2, [r3]
 9700              	.LBE20:
2426:bluetooth_rxtx.c **** 			u8 byte = 0;
 9701              		.loc 1 2426 0 discriminator 2
 9702 022c BB6F     		ldr	r3, [r7, #120]
 9703 022e 0133     		adds	r3, r3, #1
 9704 0230 BB67     		str	r3, [r7, #120]
 9705              	.L482:
2426:bluetooth_rxtx.c **** 			u8 byte = 0;
 9706              		.loc 1 2426 0 is_stmt 0 discriminator 1
 9707 0232 BB6F     		ldr	r3, [r7, #120]
 9708 0234 092B     		cmp	r3, #9
 9709 0236 AFDD     		ble	.L488
2439:bluetooth_rxtx.c **** 		}
2440:bluetooth_rxtx.c **** 
2441:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 9710              		.loc 1 2441 0 is_stmt 1
 9711 0238 2E4B     		ldr	r3, .L495+20
 9712 023a 1B68     		ldr	r3, [r3]
 9713 023c 0333     		adds	r3, r3, #3
 9714 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9715 0240 1A06     		lsls	r2, r3, #24
2442:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9716              		.loc 1 2442 0
 9717 0242 2C4B     		ldr	r3, .L495+20
 9718 0244 1B68     		ldr	r3, [r3]
 9719 0246 0233     		adds	r3, r3, #2
 9720 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9721 024a 1B04     		lsls	r3, r3, #16
2441:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9722              		.loc 1 2441 0
 9723 024c 1A43     		orrs	r2, r2, r3
2443:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9724              		.loc 1 2443 0
 9725 024e 294B     		ldr	r3, .L495+20
 9726 0250 1B68     		ldr	r3, [r3]
 9727 0252 0133     		adds	r3, r3, #1
 9728 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9729 0256 1B02     		lsls	r3, r3, #8
2442:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9730              		.loc 1 2442 0
 9731 0258 1343     		orrs	r3, r3, r2
2444:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 9732              		.loc 1 2444 0
 9733 025a 264A     		ldr	r2, .L495+20
 9734 025c 1268     		ldr	r2, [r2]
 9735 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2443:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9736              		.loc 1 2443 0
 9737 0260 1343     		orrs	r3, r3, r2
2441:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9738              		.loc 1 2441 0
 9739 0262 FB65     		str	r3, [r7, #92]
ARM GAS  /tmp/ccXEAChk.s 			page 214


2445:bluetooth_rxtx.c **** 		see_aa(aa);
 9740              		.loc 1 2445 0
 9741 0264 F86D     		ldr	r0, [r7, #92]
 9742 0266 FFF7FEFF 		bl	see_aa
2446:bluetooth_rxtx.c **** 
2447:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 9743              		.loc 1 2447 0
 9744 026a 224B     		ldr	r3, .L495+20
 9745 026c 1B68     		ldr	r3, [r3]
 9746 026e 0120     		movs	r0, #1
 9747 0270 1946     		mov	r1, r3
 9748 0272 FFF7FEFF 		bl	enqueue
 9749              	.L481:
 9750              	.LBE19:
2399:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9751              		.loc 1 2399 0 discriminator 2
 9752 0276 FB6F     		ldr	r3, [r7, #124]
 9753 0278 0133     		adds	r3, r3, #1
 9754 027a FB67     		str	r3, [r7, #124]
 9755              	.L469:
2399:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9756              		.loc 1 2399 0 is_stmt 0 discriminator 1
 9757 027c FB6F     		ldr	r3, [r7, #124]
 9758 027e B3F53C7F 		cmp	r3, #752
 9759 0282 FFF62AAF 		blt	.L489
2448:bluetooth_rxtx.c **** 
2449:bluetooth_rxtx.c **** 	}
2450:bluetooth_rxtx.c **** 
2451:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2452:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 9760              		.loc 1 2452 0 is_stmt 1
 9761 0286 0023     		movs	r3, #0
 9762 0288 FB67     		str	r3, [r7, #124]
 9763 028a 20E0     		b	.L490
 9764              	.L493:
2453:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9765              		.loc 1 2453 0
 9766 028c 1A4A     		ldr	r2, .L495+24
 9767 028e FB6F     		ldr	r3, [r7, #124]
 9768 0290 DB00     		lsls	r3, r3, #3
 9769 0292 1344     		add	r3, r3, r2
 9770 0294 5B68     		ldr	r3, [r3, #4]
 9771 0296 032B     		cmp	r3, #3
 9772 0298 16DD     		ble	.L491
2454:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 9773              		.loc 1 2454 0
 9774 029a 174A     		ldr	r2, .L495+24
 9775 029c FB6F     		ldr	r3, [r7, #124]
 9776 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 9777 02a2 1846     		mov	r0, r3
 9778 02a4 FFF7FEFF 		bl	le_set_access_address
2455:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 9779              		.loc 1 2455 0
 9780 02a8 144B     		ldr	r3, .L495+28
 9781 02aa 154A     		ldr	r2, .L495+32
 9782 02ac 1A60     		str	r2, [r3]
2456:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
ARM GAS  /tmp/ccXEAChk.s 			page 215


 9783              		.loc 1 2456 0
 9784 02ae 154B     		ldr	r3, .L495+36
 9785 02b0 154A     		ldr	r2, .L495+40
 9786 02b2 1A60     		str	r2, [r3]
2457:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9787              		.loc 1 2457 0
 9788 02b4 154B     		ldr	r3, .L495+44
 9789 02b6 0022     		movs	r2, #0
 9790 02b8 1A61     		str	r2, [r3, #16]
2458:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 9791              		.loc 1 2458 0
 9792 02ba 0020     		movs	r0, #0
 9793 02bc 1349     		ldr	r1, .L495+44
 9794 02be 0422     		movs	r2, #4
 9795 02c0 FFF7FEFF 		bl	le_promisc_state
2459:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2460:bluetooth_rxtx.c **** 			return 0;
 9796              		.loc 1 2460 0
 9797 02c4 0023     		movs	r3, #0
 9798 02c6 06E0     		b	.L494
 9799              	.L491:
2452:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9800              		.loc 1 2452 0 discriminator 2
 9801 02c8 FB6F     		ldr	r3, [r7, #124]
 9802 02ca 0133     		adds	r3, r3, #1
 9803 02cc FB67     		str	r3, [r7, #124]
 9804              	.L490:
2452:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9805              		.loc 1 2452 0 is_stmt 0 discriminator 1
 9806 02ce FB6F     		ldr	r3, [r7, #124]
 9807 02d0 1F2B     		cmp	r3, #31
 9808 02d2 DBDD     		ble	.L493
2461:bluetooth_rxtx.c **** 		}
2462:bluetooth_rxtx.c **** 	}
2463:bluetooth_rxtx.c **** 
2464:bluetooth_rxtx.c **** 	return 1;
 9809              		.loc 1 2464 0 is_stmt 1
 9810 02d4 0123     		movs	r3, #1
 9811              	.L494:
2465:bluetooth_rxtx.c **** }
 9812              		.loc 1 2465 0 discriminator 1
 9813 02d6 1846     		mov	r0, r3
 9814 02d8 8437     		adds	r7, r7, #132
 9815              		.cfi_def_cfa_offset 12
 9816 02da BD46     		mov	sp, r7
 9817              		.cfi_def_cfa_register 13
 9818              		@ sp needed
 9819 02dc 90BD     		pop	{r4, r7, pc}
 9820              	.L496:
 9821 02de 00BF     		.align	2
 9822              	.L495:
 9823 02e0 00000000 		.word	channel
 9824 02e4 C0000000 		.word	whitening_index
 9825 02e8 40000000 		.word	whitening
 9826 02ec 11080402 		.word	33818641
 9827 02f0 08090000 		.word	.LC0
 9828 02f4 00000000 		.word	idle_rxbuf
ARM GAS  /tmp/ccXEAChk.s 			page 216


 9829 02f8 00000000 		.word	le_promisc
 9830 02fc 00000000 		.word	data_cb
 9831 0300 00000000 		.word	cb_follow_le
 9832 0304 00000000 		.word	packet_cb
 9833 0308 00000000 		.word	promisc_follow_cb
 9834 030c 00000000 		.word	le
 9835              		.cfi_endproc
 9836              	.LFE40:
 9838              		.section	.text.bt_promisc_le,"ax",%progbits
 9839              		.align	2
 9840              		.global	bt_promisc_le
 9841              		.thumb
 9842              		.thumb_func
 9844              	bt_promisc_le:
 9845              	.LFB41:
2466:bluetooth_rxtx.c **** 
2467:bluetooth_rxtx.c **** void bt_promisc_le() {
 9846              		.loc 1 2467 0
 9847              		.cfi_startproc
 9848              		@ args = 0, pretend = 0, frame = 0
 9849              		@ frame_needed = 1, uses_anonymous_args = 0
 9850 0000 80B5     		push	{r7, lr}
 9851              		.cfi_def_cfa_offset 8
 9852              		.cfi_offset 7, -8
 9853              		.cfi_offset 14, -4
 9854 0002 00AF     		add	r7, sp, #0
 9855              		.cfi_def_cfa_register 7
2468:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 9856              		.loc 1 2468 0
 9857 0004 2CE0     		b	.L498
 9858              	.L503:
2469:bluetooth_rxtx.c **** 		reset_le_promisc();
 9859              		.loc 1 2469 0
 9860 0006 FFF7FEFF 		bl	reset_le_promisc
2470:bluetooth_rxtx.c **** 
2471:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2472:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 9861              		.loc 1 2472 0
 9862 000a 184B     		ldr	r3, .L504
 9863 000c 1B88     		ldrh	r3, [r3]	@ movhi
 9864 000e 9BB2     		uxth	r3, r3
 9865 0010 03F00103 		and	r3, r3, #1
 9866 0014 002B     		cmp	r3, #0
 9867 0016 03D0     		beq	.L499
2473:bluetooth_rxtx.c **** 			channel = 2440;
 9868              		.loc 1 2473 0
 9869 0018 144B     		ldr	r3, .L504
 9870 001a 40F68812 		movw	r2, #2440
 9871 001e 1A80     		strh	r2, [r3]	@ movhi
 9872              	.L499:
2474:bluetooth_rxtx.c **** 
2475:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2476:bluetooth_rxtx.c **** 		if (!le.target_set) {
 9873              		.loc 1 2476 0
 9874 0020 134B     		ldr	r3, .L504+4
 9875 0022 DB6B     		ldr	r3, [r3, #60]
 9876 0024 002B     		cmp	r3, #0
ARM GAS  /tmp/ccXEAChk.s 			page 217


 9877 0026 07D1     		bne	.L500
2477:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2478:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 9878              		.loc 1 2478 0
 9879 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2479:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 9880              		.loc 1 2479 0
 9881 002c 114B     		ldr	r3, .L504+8
 9882 002e 124A     		ldr	r2, .L504+12
 9883 0030 1A60     		str	r2, [r3]
2480:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 9884              		.loc 1 2480 0
 9885 0032 0A20     		movs	r0, #10
 9886 0034 FFF7FEFF 		bl	bt_generic_le
 9887              	.L500:
2481:bluetooth_rxtx.c **** 		}
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2484:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 9888              		.loc 1 2484 0
 9889 0038 104B     		ldr	r3, .L504+16
 9890 003a 1B78     		ldrb	r3, [r3]
 9891 003c DBB2     		uxtb	r3, r3
 9892 003e 0A2B     		cmp	r3, #10
 9893 0040 00D0     		beq	.L501
2485:bluetooth_rxtx.c **** 			break;
 9894              		.loc 1 2485 0
 9895 0042 12E0     		b	.L497
 9896              	.L501:
2486:bluetooth_rxtx.c **** 
2487:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 9897              		.loc 1 2487 0
 9898 0044 0020     		movs	r0, #0
 9899 0046 0A49     		ldr	r1, .L504+4
 9900 0048 0422     		movs	r2, #4
 9901 004a FFF7FEFF 		bl	le_promisc_state
2488:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 9902              		.loc 1 2488 0
 9903 004e 0C4B     		ldr	r3, .L504+20
 9904 0050 0C4A     		ldr	r2, .L504+24
 9905 0052 1A60     		str	r2, [r3]
2489:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 9906              		.loc 1 2489 0
 9907 0054 064B     		ldr	r3, .L504+4
 9908 0056 0022     		movs	r2, #0
 9909 0058 1A61     		str	r2, [r3, #16]
2490:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 9910              		.loc 1 2490 0
 9911 005a 0A20     		movs	r0, #10
 9912 005c FFF7FEFF 		bl	bt_le_sync
 9913              	.L498:
2468:bluetooth_rxtx.c **** 		reset_le_promisc();
 9914              		.loc 1 2468 0
 9915 0060 064B     		ldr	r3, .L504+16
 9916 0062 1B78     		ldrb	r3, [r3]
 9917 0064 DBB2     		uxtb	r3, r3
 9918 0066 0A2B     		cmp	r3, #10
ARM GAS  /tmp/ccXEAChk.s 			page 218


 9919 0068 CDD0     		beq	.L503
 9920              	.L497:
2491:bluetooth_rxtx.c **** 	}
2492:bluetooth_rxtx.c **** }
 9921              		.loc 1 2492 0
 9922 006a 80BD     		pop	{r7, pc}
 9923              	.L505:
 9924              		.align	2
 9925              	.L504:
 9926 006c 00000000 		.word	channel
 9927 0070 00000000 		.word	le
 9928 0074 00000000 		.word	data_cb
 9929 0078 00000000 		.word	cb_le_promisc
 9930 007c 00000000 		.word	requested_mode
 9931 0080 00000000 		.word	packet_cb
 9932 0084 00000000 		.word	promisc_follow_cb
 9933              		.cfi_endproc
 9934              	.LFE41:
 9936              		.section	.rodata
 9937              		.align	2
 9938              	.LC1:
 9939 0918 00       		.byte	0
 9940 0919 09       		.byte	9
 9941 091a FF       		.byte	-1
 9942 091b FF       		.byte	-1
 9943 091c FF       		.byte	-1
 9944 091d FF       		.byte	-1
 9945 091e FF       		.byte	-1
 9946 091f FF       		.byte	-1
 9947 0920 02       		.byte	2
 9948 0921 01       		.byte	1
 9949 0922 05       		.byte	5
 9950 0923 FF       		.byte	-1
 9951 0924 FF       		.byte	-1
 9952 0925 FF       		.byte	-1
 9953              		.section	.text.bt_slave_le,"ax",%progbits
 9954              		.align	2
 9955              		.global	bt_slave_le
 9956              		.thumb
 9957              		.thumb_func
 9959              	bt_slave_le:
 9960              	.LFB42:
2493:bluetooth_rxtx.c **** 
2494:bluetooth_rxtx.c **** void bt_slave_le() {
 9961              		.loc 1 2494 0
 9962              		.cfi_startproc
 9963              		@ args = 0, pretend = 0, frame = 32
 9964              		@ frame_needed = 1, uses_anonymous_args = 0
 9965 0000 90B5     		push	{r4, r7, lr}
 9966              		.cfi_def_cfa_offset 12
 9967              		.cfi_offset 4, -12
 9968              		.cfi_offset 7, -8
 9969              		.cfi_offset 14, -4
 9970 0002 89B0     		sub	sp, sp, #36
 9971              		.cfi_def_cfa_offset 48
 9972 0004 00AF     		add	r7, sp, #0
 9973              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccXEAChk.s 			page 219


2495:bluetooth_rxtx.c **** 	u32 calc_crc;
2496:bluetooth_rxtx.c **** 	int i;
2497:bluetooth_rxtx.c **** 
2498:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 9974              		.loc 1 2498 0
 9975 0006 354A     		ldr	r2, .L511
 9976 0008 3B1D     		adds	r3, r7, #4
 9977 000a 1446     		mov	r4, r2
 9978 000c 2068     		ldr	r0, [r4]	@ unaligned
 9979 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 9980 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 9981 0012 07C3     		stmia	r3!, {r0, r1, r2}
 9982 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 9983 0016 1A80     		strh	r2, [r3]	@ unaligned
2499:bluetooth_rxtx.c **** 		// LL header
2500:bluetooth_rxtx.c **** 		0x00, 0x09,
2501:bluetooth_rxtx.c **** 
2502:bluetooth_rxtx.c **** 		// advertising address
2503:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2504:bluetooth_rxtx.c **** 
2505:bluetooth_rxtx.c **** 		// advertising data
2506:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2507:bluetooth_rxtx.c **** 
2508:bluetooth_rxtx.c **** 		// CRC (calc)
2509:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2510:bluetooth_rxtx.c **** 	};
2511:bluetooth_rxtx.c **** 
2512:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 9984              		.loc 1 2512 0
 9985 0018 0B23     		movs	r3, #11
 9986 001a FB76     		strb	r3, [r7, #27]
2513:bluetooth_rxtx.c **** 
2514:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2515:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 9987              		.loc 1 2515 0
 9988 001c 0023     		movs	r3, #0
 9989 001e FB61     		str	r3, [r7, #28]
 9990 0020 0EE0     		b	.L507
 9991              	.L508:
2516:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9992              		.loc 1 2516 0 discriminator 3
 9993 0022 FB69     		ldr	r3, [r7, #28]
 9994 0024 0233     		adds	r3, r3, #2
 9995 0026 FA69     		ldr	r2, [r7, #28]
 9996 0028 C2F10502 		rsb	r2, r2, #5
 9997 002c 2C49     		ldr	r1, .L511+4
 9998 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9999 0030 07F12001 		add	r1, r7, #32
 10000 0034 0B44     		add	r3, r3, r1
 10001 0036 03F81C2C 		strb	r2, [r3, #-28]
2515:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10002              		.loc 1 2515 0 discriminator 3
 10003 003a FB69     		ldr	r3, [r7, #28]
 10004 003c 0133     		adds	r3, r3, #1
 10005 003e FB61     		str	r3, [r7, #28]
 10006              	.L507:
2515:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
ARM GAS  /tmp/ccXEAChk.s 			page 220


 10007              		.loc 1 2515 0 is_stmt 0 discriminator 1
 10008 0040 FB69     		ldr	r3, [r7, #28]
 10009 0042 052B     		cmp	r3, #5
 10010 0044 EDDD     		ble	.L508
2517:bluetooth_rxtx.c **** 
2518:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 10011              		.loc 1 2518 0 is_stmt 1
 10012 0046 274B     		ldr	r3, .L511+8
 10013 0048 D968     		ldr	r1, [r3, #12]
 10014 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10015 004c 3A1D     		adds	r2, r7, #4
 10016 004e 0846     		mov	r0, r1
 10017 0050 1146     		mov	r1, r2
 10018 0052 1A46     		mov	r2, r3
 10019 0054 FFF7FEFF 		bl	btle_calc_crc
 10020 0058 7861     		str	r0, [r7, #20]
2519:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 10021              		.loc 1 2519 0
 10022 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10023 005c 7A69     		ldr	r2, [r7, #20]
 10024 005e D2B2     		uxtb	r2, r2
 10025 0060 07F12001 		add	r1, r7, #32
 10026 0064 0B44     		add	r3, r3, r1
 10027 0066 03F81C2C 		strb	r2, [r3, #-28]
2520:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 10028              		.loc 1 2520 0
 10029 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10030 006c 0133     		adds	r3, r3, #1
 10031 006e 7A69     		ldr	r2, [r7, #20]
 10032 0070 120A     		lsrs	r2, r2, #8
 10033 0072 D2B2     		uxtb	r2, r2
 10034 0074 07F12001 		add	r1, r7, #32
 10035 0078 0B44     		add	r3, r3, r1
 10036 007a 03F81C2C 		strb	r2, [r3, #-28]
2521:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 10037              		.loc 1 2521 0
 10038 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10039 0080 0233     		adds	r3, r3, #2
 10040 0082 7A69     		ldr	r2, [r7, #20]
 10041 0084 120C     		lsrs	r2, r2, #16
 10042 0086 D2B2     		uxtb	r2, r2
 10043 0088 07F12001 		add	r1, r7, #32
 10044 008c 0B44     		add	r3, r3, r1
 10045 008e 03F81C2C 		strb	r2, [r3, #-28]
2522:bluetooth_rxtx.c **** 
2523:bluetooth_rxtx.c **** 	// spam advertising packets
2524:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 10046              		.loc 1 2524 0
 10047 0092 1BE0     		b	.L509
 10048              	.L510:
2525:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 10049              		.loc 1 2525 0
 10050 0094 144B     		ldr	r3, .L511+12
 10051 0096 4FF08072 		mov	r2, #16777216
 10052 009a 1A60     		str	r2, [r3]
2526:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 10053              		.loc 1 2526 0
ARM GAS  /tmp/ccXEAChk.s 			page 221


 10054 009c 124B     		ldr	r3, .L511+12
 10055 009e 4FF08062 		mov	r2, #67108864
 10056 00a2 1A60     		str	r2, [r3]
2527:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 10057              		.loc 1 2527 0
 10058 00a4 FB7E     		ldrb	r3, [r7, #27]
 10059 00a6 0333     		adds	r3, r3, #3
 10060 00a8 DAB2     		uxtb	r2, r3
 10061 00aa 3B1D     		adds	r3, r7, #4
 10062 00ac 0F48     		ldr	r0, .L511+16
 10063 00ae 1146     		mov	r1, r2
 10064 00b0 1A46     		mov	r2, r3
 10065 00b2 FFF7FEFF 		bl	le_transmit
2528:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 10066              		.loc 1 2528 0
 10067 00b6 0E4B     		ldr	r3, .L511+20
 10068 00b8 4FF08072 		mov	r2, #16777216
 10069 00bc 1A60     		str	r2, [r3]
2529:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 10070              		.loc 1 2529 0
 10071 00be 0C4B     		ldr	r3, .L511+20
 10072 00c0 4FF08062 		mov	r2, #67108864
 10073 00c4 1A60     		str	r2, [r3]
2530:bluetooth_rxtx.c **** 		msleep(100);
 10074              		.loc 1 2530 0
 10075 00c6 6420     		movs	r0, #100
 10076 00c8 FFF7FEFF 		bl	msleep
 10077              	.L509:
2524:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 10078              		.loc 1 2524 0
 10079 00cc 094B     		ldr	r3, .L511+24
 10080 00ce 1B78     		ldrb	r3, [r3]
 10081 00d0 DBB2     		uxtb	r3, r3
 10082 00d2 0C2B     		cmp	r3, #12
 10083 00d4 DED0     		beq	.L510
2531:bluetooth_rxtx.c **** 	}
2532:bluetooth_rxtx.c **** }
 10084              		.loc 1 2532 0
 10085 00d6 2437     		adds	r7, r7, #36
 10086              		.cfi_def_cfa_offset 12
 10087 00d8 BD46     		mov	sp, r7
 10088              		.cfi_def_cfa_register 13
 10089              		@ sp needed
 10090 00da 90BD     		pop	{r4, r7, pc}
 10091              	.L512:
 10092              		.align	2
 10093              	.L511:
 10094 00dc 18090000 		.word	.LC1
 10095 00e0 00000000 		.word	slave_mac_address
 10096 00e4 00000000 		.word	le
 10097 00e8 80E100E0 		.word	-536813184
 10098 00ec D6BE898E 		.word	-1903575338
 10099 00f0 00E100E0 		.word	-536813312
 10100 00f4 00000000 		.word	requested_mode
 10101              		.cfi_endproc
 10102              	.LFE42:
 10104              		.section	.text.specan,"ax",%progbits
ARM GAS  /tmp/ccXEAChk.s 			page 222


 10105              		.align	2
 10106              		.global	specan
 10107              		.thumb
 10108              		.thumb_func
 10110              	specan:
 10111              	.LFB43:
2533:bluetooth_rxtx.c **** 
2534:bluetooth_rxtx.c **** /* spectrum analysis */
2535:bluetooth_rxtx.c **** void specan()
2536:bluetooth_rxtx.c **** {
 10112              		.loc 1 2536 0
 10113              		.cfi_startproc
 10114              		@ args = 0, pretend = 0, frame = 64
 10115              		@ frame_needed = 1, uses_anonymous_args = 0
 10116 0000 90B5     		push	{r4, r7, lr}
 10117              		.cfi_def_cfa_offset 12
 10118              		.cfi_offset 4, -12
 10119              		.cfi_offset 7, -8
 10120              		.cfi_offset 14, -4
 10121 0002 91B0     		sub	sp, sp, #68
 10122              		.cfi_def_cfa_offset 80
 10123 0004 00AF     		add	r7, sp, #0
 10124              		.cfi_def_cfa_register 7
2537:bluetooth_rxtx.c **** 	u8 epstat;
2538:bluetooth_rxtx.c **** 	u16 f;
2539:bluetooth_rxtx.c **** 	u8 i = 0;
 10125              		.loc 1 2539 0
 10126 0006 0023     		movs	r3, #0
 10127 0008 87F83D30 		strb	r3, [r7, #61]
2540:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2541:bluetooth_rxtx.c **** 
2542:bluetooth_rxtx.c **** 	RXLED_SET;
 10128              		.loc 1 2542 0
 10129 000c 5A4B     		ldr	r3, .L524
 10130 000e 1022     		movs	r2, #16
 10131 0010 1A60     		str	r2, [r3]
2543:bluetooth_rxtx.c **** 
2544:bluetooth_rxtx.c **** 	queue_init();
 10132              		.loc 1 2544 0
 10133 0012 FFF7FEFF 		bl	queue_init
2545:bluetooth_rxtx.c **** 
2546:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2547:bluetooth_rxtx.c **** 	PAEN_SET;
 10134              		.loc 1 2547 0
 10135 0016 594B     		ldr	r3, .L524+4
 10136 0018 8022     		movs	r2, #128
 10137 001a 1A60     		str	r2, [r3]
2548:bluetooth_rxtx.c **** 	//HGM_SET;
2549:bluetooth_rxtx.c **** #endif
2550:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10138              		.loc 1 2550 0
 10139 001c 1220     		movs	r0, #18
 10140 001e 42F62231 		movw	r1, #11042
 10141 0022 FFF7FEFF 		bl	cc2400_set
2551:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10142              		.loc 1 2551 0
 10143 0026 1420     		movs	r0, #20
ARM GAS  /tmp/ccXEAChk.s 			page 223


 10144 0028 41F24B31 		movw	r1, #4939
 10145 002c FFF7FEFF 		bl	cc2400_set
2552:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10146              		.loc 1 2552 0
 10147 0030 2020     		movs	r0, #32
 10148 0032 40F20111 		movw	r1, #257
 10149 0036 FFF7FEFF 		bl	cc2400_set
2553:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10150              		.loc 1 2553 0
 10151 003a 0320     		movs	r0, #3
 10152 003c 2921     		movs	r1, #41
 10153 003e FFF7FEFF 		bl	cc2400_set
2554:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2555:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10154              		.loc 1 2555 0
 10155 0042 00BF     		nop
 10156              	.L514:
 10157              		.loc 1 2555 0 is_stmt 0 discriminator 1
 10158 0044 FFF7FEFF 		bl	cc2400_status
 10159 0048 0346     		mov	r3, r0
 10160 004a 03F04003 		and	r3, r3, #64
 10161 004e 002B     		cmp	r3, #0
 10162 0050 F8D0     		beq	.L514
2556:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10163              		.loc 1 2556 0 is_stmt 1
 10164 0052 00BF     		nop
 10165              	.L515:
 10166              		.loc 1 2556 0 is_stmt 0 discriminator 1
 10167 0054 FFF7FEFF 		bl	cc2400_status
 10168 0058 0346     		mov	r3, r0
 10169 005a 03F00403 		and	r3, r3, #4
 10170 005e 002B     		cmp	r3, #0
 10171 0060 F8D1     		bne	.L515
2557:bluetooth_rxtx.c **** 
2558:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 10172              		.loc 1 2558 0 is_stmt 1
 10173 0062 7AE0     		b	.L516
 10174              	.L523:
2559:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10175              		.loc 1 2559 0
 10176 0064 464B     		ldr	r3, .L524+8
 10177 0066 1B88     		ldrh	r3, [r3]	@ movhi
 10178 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 10179 006a 6FE0     		b	.L517
 10180              	.L522:
 10181              	.LBB22:
2560:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10182              		.loc 1 2560 0
 10183 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 10184 006e 013B     		subs	r3, r3, #1
 10185 0070 9BB2     		uxth	r3, r3
 10186 0072 0220     		movs	r0, #2
 10187 0074 1946     		mov	r1, r3
 10188 0076 FFF7FEFF 		bl	cc2400_set
2561:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 10189              		.loc 1 2561 0
 10190 007a 6120     		movs	r0, #97
ARM GAS  /tmp/ccXEAChk.s 			page 224


 10191 007c FFF7FEFF 		bl	cc2400_strobe
2562:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 10192              		.loc 1 2562 0
 10193 0080 00BF     		nop
 10194              	.L518:
 10195              		.loc 1 2562 0 is_stmt 0 discriminator 1
 10196 0082 FFF7FEFF 		bl	cc2400_status
 10197 0086 0346     		mov	r3, r0
 10198 0088 03F00403 		and	r3, r3, #4
 10199 008c 002B     		cmp	r3, #0
 10200 008e F8D0     		beq	.L518
2563:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 10201              		.loc 1 2563 0 is_stmt 1
 10202 0090 6220     		movs	r0, #98
 10203 0092 FFF7FEFF 		bl	cc2400_strobe
2564:bluetooth_rxtx.c **** 
2565:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2566:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 10204              		.loc 1 2566 0
 10205 0096 4FF4FA73 		mov	r3, #500
 10206 009a 7B60     		str	r3, [r7, #4]
 10207 009c 00BF     		nop
 10208              	.L519:
 10209              		.loc 1 2566 0 is_stmt 0 discriminator 2
 10210 009e 7B68     		ldr	r3, [r7, #4]
 10211 00a0 013B     		subs	r3, r3, #1
 10212 00a2 7B60     		str	r3, [r7, #4]
 10213 00a4 002B     		cmp	r3, #0
 10214 00a6 FAD1     		bne	.L519
2567:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 10215              		.loc 1 2567 0 is_stmt 1
 10216 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10217 00ac 1346     		mov	r3, r2
 10218 00ae 5B00     		lsls	r3, r3, #1
 10219 00b0 1344     		add	r3, r3, r2
 10220 00b2 FA8F     		ldrh	r2, [r7, #62]
 10221 00b4 120A     		lsrs	r2, r2, #8
 10222 00b6 92B2     		uxth	r2, r2
 10223 00b8 D2B2     		uxtb	r2, r2
 10224 00ba 07F14001 		add	r1, r7, #64
 10225 00be 0B44     		add	r3, r3, r1
 10226 00c0 03F8382C 		strb	r2, [r3, #-56]
2568:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 10227              		.loc 1 2568 0
 10228 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10229 00c8 1346     		mov	r3, r2
 10230 00ca 5B00     		lsls	r3, r3, #1
 10231 00cc 1344     		add	r3, r3, r2
 10232 00ce 0133     		adds	r3, r3, #1
 10233 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 10234 00d2 D2B2     		uxtb	r2, r2
 10235 00d4 07F14001 		add	r1, r7, #64
 10236 00d8 0B44     		add	r3, r3, r1
 10237 00da 03F8382C 		strb	r2, [r3, #-56]
2569:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 10238              		.loc 1 2569 0
 10239 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
ARM GAS  /tmp/ccXEAChk.s 			page 225


 10240 00e2 1346     		mov	r3, r2
 10241 00e4 5B00     		lsls	r3, r3, #1
 10242 00e6 1344     		add	r3, r3, r2
 10243 00e8 9C1C     		adds	r4, r3, #2
 10244 00ea 0620     		movs	r0, #6
 10245 00ec FFF7FEFF 		bl	cc2400_get
 10246 00f0 0346     		mov	r3, r0
 10247 00f2 1B0A     		lsrs	r3, r3, #8
 10248 00f4 9BB2     		uxth	r3, r3
 10249 00f6 DAB2     		uxtb	r2, r3
 10250 00f8 07F14003 		add	r3, r7, #64
 10251 00fc 2344     		add	r3, r3, r4
 10252 00fe 03F8382C 		strb	r2, [r3, #-56]
2570:bluetooth_rxtx.c **** 			i++;
 10253              		.loc 1 2570 0
 10254 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10255 0106 0133     		adds	r3, r3, #1
 10256 0108 87F83D30 		strb	r3, [r7, #61]
2571:bluetooth_rxtx.c **** 			if (i == 16) {
 10257              		.loc 1 2571 0
 10258 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10259 0110 102B     		cmp	r3, #16
 10260 0112 0DD1     		bne	.L520
2572:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 10261              		.loc 1 2572 0
 10262 0114 07F10803 		add	r3, r7, #8
 10263 0118 0420     		movs	r0, #4
 10264 011a 1946     		mov	r1, r3
 10265 011c FFF7FEFF 		bl	enqueue
2573:bluetooth_rxtx.c **** 				i = 0;
 10266              		.loc 1 2573 0
 10267 0120 0023     		movs	r3, #0
 10268 0122 87F83D30 		strb	r3, [r7, #61]
2574:bluetooth_rxtx.c **** 
2575:bluetooth_rxtx.c **** 				handle_usb(clkn);
 10269              		.loc 1 2575 0
 10270 0126 174B     		ldr	r3, .L524+12
 10271 0128 1B68     		ldr	r3, [r3]
 10272 012a 1846     		mov	r0, r3
 10273 012c FFF7FEFF 		bl	handle_usb
 10274              	.L520:
2576:bluetooth_rxtx.c **** 			}
2577:bluetooth_rxtx.c **** 
2578:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 10275              		.loc 1 2578 0
 10276 0130 6420     		movs	r0, #100
 10277 0132 FFF7FEFF 		bl	cc2400_strobe
2579:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 10278              		.loc 1 2579 0
 10279 0136 00BF     		nop
 10280              	.L521:
 10281              		.loc 1 2579 0 is_stmt 0 discriminator 1
 10282 0138 FFF7FEFF 		bl	cc2400_status
 10283 013c 0346     		mov	r3, r0
 10284 013e 03F00403 		and	r3, r3, #4
 10285 0142 002B     		cmp	r3, #0
 10286 0144 F8D1     		bne	.L521
ARM GAS  /tmp/ccXEAChk.s 			page 226


 10287              	.LBE22:
2559:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10288              		.loc 1 2559 0 is_stmt 1 discriminator 2
 10289 0146 FB8F     		ldrh	r3, [r7, #62]
 10290 0148 0133     		adds	r3, r3, #1
 10291 014a FB87     		strh	r3, [r7, #62]	@ movhi
 10292              	.L517:
2559:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10293              		.loc 1 2559 0 is_stmt 0 discriminator 1
 10294 014c FA8F     		ldrh	r2, [r7, #62]
 10295 014e 0E4B     		ldr	r3, .L524+16
 10296 0150 1B88     		ldrh	r3, [r3]	@ movhi
 10297 0152 9BB2     		uxth	r3, r3
 10298 0154 0133     		adds	r3, r3, #1
 10299 0156 9A42     		cmp	r2, r3
 10300 0158 88DB     		blt	.L522
 10301              	.L516:
2558:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10302              		.loc 1 2558 0 is_stmt 1
 10303 015a 0C4B     		ldr	r3, .L524+20
 10304 015c 1B78     		ldrb	r3, [r3]
 10305 015e DBB2     		uxtb	r3, r3
 10306 0160 042B     		cmp	r3, #4
 10307 0162 3FF47FAF 		beq	.L523
2580:bluetooth_rxtx.c **** 		}
2581:bluetooth_rxtx.c **** 	}
2582:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10308              		.loc 1 2582 0
 10309 0166 0A4B     		ldr	r3, .L524+24
 10310 0168 0022     		movs	r2, #0
 10311 016a 1A70     		strb	r2, [r3]
2583:bluetooth_rxtx.c **** 	RXLED_CLR;
 10312              		.loc 1 2583 0
 10313 016c 094B     		ldr	r3, .L524+28
 10314 016e 1022     		movs	r2, #16
 10315 0170 1A60     		str	r2, [r3]
2584:bluetooth_rxtx.c **** }
 10316              		.loc 1 2584 0
 10317 0172 4437     		adds	r7, r7, #68
 10318              		.cfi_def_cfa_offset 12
 10319 0174 BD46     		mov	sp, r7
 10320              		.cfi_def_cfa_register 13
 10321              		@ sp needed
 10322 0176 90BD     		pop	{r4, r7, pc}
 10323              	.L525:
 10324              		.align	2
 10325              	.L524:
 10326 0178 38C00920 		.word	537509944
 10327 017c 58C00920 		.word	537509976
 10328 0180 00000000 		.word	low_freq
 10329 0184 00000000 		.word	clkn
 10330 0188 00000000 		.word	high_freq
 10331 018c 00000000 		.word	requested_mode
 10332 0190 00000000 		.word	mode
 10333 0194 3CC00920 		.word	537509948
 10334              		.cfi_endproc
 10335              	.LFE43:
ARM GAS  /tmp/ccXEAChk.s 			page 227


 10337              		.section	.rodata
 10338 0926 0000     		.align	2
 10339              	.LC2:
 10340 0928 6C09     		.short	2412
 10341 092a 8509     		.short	2437
 10342 092c 9E09     		.short	2462
 10343              		.section	.text.led_specan,"ax",%progbits
 10344              		.align	2
 10345              		.global	led_specan
 10346              		.thumb
 10347              		.thumb_func
 10349              	led_specan:
 10350              	.LFB44:
2585:bluetooth_rxtx.c **** 
2586:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2587:bluetooth_rxtx.c **** void led_specan()
2588:bluetooth_rxtx.c **** {
 10351              		.loc 1 2588 0
 10352              		.cfi_startproc
 10353              		@ args = 0, pretend = 0, frame = 16
 10354              		@ frame_needed = 1, uses_anonymous_args = 0
 10355 0000 80B5     		push	{r7, lr}
 10356              		.cfi_def_cfa_offset 8
 10357              		.cfi_offset 7, -8
 10358              		.cfi_offset 14, -4
 10359 0002 84B0     		sub	sp, sp, #16
 10360              		.cfi_def_cfa_offset 24
 10361 0004 00AF     		add	r7, sp, #0
 10362              		.cfi_def_cfa_register 7
2589:bluetooth_rxtx.c **** 	int8_t lvl;
2590:bluetooth_rxtx.c **** 	u8 i = 0;
 10363              		.loc 1 2590 0
 10364 0006 0023     		movs	r3, #0
 10365 0008 FB73     		strb	r3, [r7, #15]
2591:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 10366              		.loc 1 2591 0
 10367 000a 5B4A     		ldr	r2, .L543
 10368 000c 07F10803 		add	r3, r7, #8
 10369 0010 1068     		ldr	r0, [r2]	@ unaligned
 10370 0012 1860     		str	r0, [r3]	@ unaligned
 10371 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 10372 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2592:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2593:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2594:bluetooth_rxtx.c **** 
2595:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2596:bluetooth_rxtx.c **** 	PAEN_SET;
 10373              		.loc 1 2596 0
 10374 0018 584B     		ldr	r3, .L543+4
 10375 001a 8022     		movs	r2, #128
 10376 001c 1A60     		str	r2, [r3]
2597:bluetooth_rxtx.c **** 	//HGM_SET;
2598:bluetooth_rxtx.c **** #endif
2599:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10377              		.loc 1 2599 0
 10378 001e 1220     		movs	r0, #18
 10379 0020 42F62231 		movw	r1, #11042
ARM GAS  /tmp/ccXEAChk.s 			page 228


 10380 0024 FFF7FEFF 		bl	cc2400_set
2600:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10381              		.loc 1 2600 0
 10382 0028 1420     		movs	r0, #20
 10383 002a 41F24B31 		movw	r1, #4939
 10384 002e FFF7FEFF 		bl	cc2400_set
2601:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10385              		.loc 1 2601 0
 10386 0032 2020     		movs	r0, #32
 10387 0034 40F20111 		movw	r1, #257
 10388 0038 FFF7FEFF 		bl	cc2400_set
2602:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10389              		.loc 1 2602 0
 10390 003c 0320     		movs	r0, #3
 10391 003e 2921     		movs	r1, #41
 10392 0040 FFF7FEFF 		bl	cc2400_set
2603:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 10393              		.loc 1 2603 0
 10394 0044 0620     		movs	r0, #6
 10395 0046 F121     		movs	r1, #241
 10396 0048 FFF7FEFF 		bl	cc2400_set
2604:bluetooth_rxtx.c **** 
2605:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10397              		.loc 1 2605 0
 10398 004c 00BF     		nop
 10399              	.L527:
 10400              		.loc 1 2605 0 is_stmt 0 discriminator 1
 10401 004e FFF7FEFF 		bl	cc2400_status
 10402 0052 0346     		mov	r3, r0
 10403 0054 03F04003 		and	r3, r3, #64
 10404 0058 002B     		cmp	r3, #0
 10405 005a F8D0     		beq	.L527
2606:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10406              		.loc 1 2606 0 is_stmt 1
 10407 005c 00BF     		nop
 10408              	.L528:
 10409              		.loc 1 2606 0 is_stmt 0 discriminator 1
 10410 005e FFF7FEFF 		bl	cc2400_status
 10411 0062 0346     		mov	r3, r0
 10412 0064 03F00403 		and	r3, r3, #4
 10413 0068 002B     		cmp	r3, #0
 10414 006a F8D1     		bne	.L528
2607:bluetooth_rxtx.c **** 
2608:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 10415              		.loc 1 2608 0 is_stmt 1
 10416 006c 79E0     		b	.L529
 10417              	.L542:
 10418              	.LBB23:
2609:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10419              		.loc 1 2609 0
 10420 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10421 0070 5B00     		lsls	r3, r3, #1
 10422 0072 07F11002 		add	r2, r7, #16
 10423 0076 1344     		add	r3, r3, r2
 10424 0078 33F8083C 		ldrh	r3, [r3, #-8]
 10425 007c 013B     		subs	r3, r3, #1
 10426 007e 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccXEAChk.s 			page 229


 10427 0080 0220     		movs	r0, #2
 10428 0082 1946     		mov	r1, r3
 10429 0084 FFF7FEFF 		bl	cc2400_set
2610:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 10430              		.loc 1 2610 0
 10431 0088 6120     		movs	r0, #97
 10432 008a FFF7FEFF 		bl	cc2400_strobe
2611:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 10433              		.loc 1 2611 0
 10434 008e 00BF     		nop
 10435              	.L530:
 10436              		.loc 1 2611 0 is_stmt 0 discriminator 1
 10437 0090 FFF7FEFF 		bl	cc2400_status
 10438 0094 0346     		mov	r3, r0
 10439 0096 03F00403 		and	r3, r3, #4
 10440 009a 002B     		cmp	r3, #0
 10441 009c F8D0     		beq	.L530
2612:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 10442              		.loc 1 2612 0 is_stmt 1
 10443 009e 6220     		movs	r0, #98
 10444 00a0 FFF7FEFF 		bl	cc2400_strobe
2613:bluetooth_rxtx.c **** 
2614:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2615:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 10445              		.loc 1 2615 0
 10446 00a4 4FF4FA73 		mov	r3, #500
 10447 00a8 7B60     		str	r3, [r7, #4]
 10448 00aa 00BF     		nop
 10449              	.L531:
 10450              		.loc 1 2615 0 is_stmt 0 discriminator 2
 10451 00ac 7B68     		ldr	r3, [r7, #4]
 10452 00ae 013B     		subs	r3, r3, #1
 10453 00b0 7B60     		str	r3, [r7, #4]
 10454 00b2 002B     		cmp	r3, #0
 10455 00b4 FAD1     		bne	.L531
2616:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 10456              		.loc 1 2616 0 is_stmt 1
 10457 00b6 0620     		movs	r0, #6
 10458 00b8 FFF7FEFF 		bl	cc2400_get
 10459 00bc 0346     		mov	r3, r0
 10460 00be 1B0A     		lsrs	r3, r3, #8
 10461 00c0 9BB2     		uxth	r3, r3
 10462 00c2 BB73     		strb	r3, [r7, #14]
2617:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 10463              		.loc 1 2617 0
 10464 00c4 2E4B     		ldr	r3, .L543+8
 10465 00c6 1B78     		ldrb	r3, [r3]
 10466 00c8 DBB2     		uxtb	r3, r3
 10467 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 10468 00ce 5BB2     		sxtb	r3, r3
 10469 00d0 9A42     		cmp	r2, r3
 10470 00d2 15DD     		ble	.L532
2618:bluetooth_rxtx.c ****             switch (i) {
 10471              		.loc 1 2618 0
 10472 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10473 00d6 012B     		cmp	r3, #1
 10474 00d8 09D0     		beq	.L534
ARM GAS  /tmp/ccXEAChk.s 			page 230


 10475 00da 022B     		cmp	r3, #2
 10476 00dc 0BD0     		beq	.L535
 10477 00de 002B     		cmp	r3, #0
 10478 00e0 00D0     		beq	.L536
 10479 00e2 21E0     		b	.L537
 10480              	.L536:
2619:bluetooth_rxtx.c ****                 case 0:
2620:bluetooth_rxtx.c ****                     TXLED_SET;
 10481              		.loc 1 2620 0
 10482 00e4 274B     		ldr	r3, .L543+12
 10483 00e6 4FF48072 		mov	r2, #256
 10484 00ea 1A60     		str	r2, [r3]
2621:bluetooth_rxtx.c ****                     break;
 10485              		.loc 1 2621 0
 10486 00ec 07E0     		b	.L533
 10487              	.L534:
2622:bluetooth_rxtx.c ****                 case 1:
2623:bluetooth_rxtx.c ****                     RXLED_SET;
 10488              		.loc 1 2623 0
 10489 00ee 254B     		ldr	r3, .L543+12
 10490 00f0 1022     		movs	r2, #16
 10491 00f2 1A60     		str	r2, [r3]
2624:bluetooth_rxtx.c ****                     break;
 10492              		.loc 1 2624 0
 10493 00f4 03E0     		b	.L533
 10494              	.L535:
2625:bluetooth_rxtx.c ****                 case 2:
2626:bluetooth_rxtx.c ****                     USRLED_SET;
 10495              		.loc 1 2626 0
 10496 00f6 234B     		ldr	r3, .L543+12
 10497 00f8 0222     		movs	r2, #2
 10498 00fa 1A60     		str	r2, [r3]
2627:bluetooth_rxtx.c ****                     break;
 10499              		.loc 1 2627 0
 10500 00fc 00BF     		nop
 10501              	.L533:
 10502 00fe 13E0     		b	.L537
 10503              	.L532:
2628:bluetooth_rxtx.c ****             }
2629:bluetooth_rxtx.c ****         }
2630:bluetooth_rxtx.c ****         else {
2631:bluetooth_rxtx.c ****             switch (i) {
 10504              		.loc 1 2631 0
 10505 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10506 0102 012B     		cmp	r3, #1
 10507 0104 08D0     		beq	.L538
 10508 0106 022B     		cmp	r3, #2
 10509 0108 0AD0     		beq	.L539
 10510 010a 002B     		cmp	r3, #0
 10511 010c 0CD1     		bne	.L537
2632:bluetooth_rxtx.c ****                 case 0:
2633:bluetooth_rxtx.c ****                     TXLED_CLR;
 10512              		.loc 1 2633 0
 10513 010e 1E4B     		ldr	r3, .L543+16
 10514 0110 4FF48072 		mov	r2, #256
 10515 0114 1A60     		str	r2, [r3]
2634:bluetooth_rxtx.c ****                     break;
ARM GAS  /tmp/ccXEAChk.s 			page 231


 10516              		.loc 1 2634 0
 10517 0116 07E0     		b	.L537
 10518              	.L538:
2635:bluetooth_rxtx.c ****                 case 1:
2636:bluetooth_rxtx.c ****                     RXLED_CLR;
 10519              		.loc 1 2636 0
 10520 0118 1B4B     		ldr	r3, .L543+16
 10521 011a 1022     		movs	r2, #16
 10522 011c 1A60     		str	r2, [r3]
2637:bluetooth_rxtx.c ****                     break;
 10523              		.loc 1 2637 0
 10524 011e 03E0     		b	.L537
 10525              	.L539:
2638:bluetooth_rxtx.c ****                 case 2:
2639:bluetooth_rxtx.c ****                     USRLED_CLR;
 10526              		.loc 1 2639 0
 10527 0120 194B     		ldr	r3, .L543+16
 10528 0122 0222     		movs	r2, #2
 10529 0124 1A60     		str	r2, [r3]
2640:bluetooth_rxtx.c ****                     break;
 10530              		.loc 1 2640 0
 10531 0126 00BF     		nop
 10532              	.L537:
2641:bluetooth_rxtx.c ****             }
2642:bluetooth_rxtx.c ****         }
2643:bluetooth_rxtx.c **** 
2644:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 10533              		.loc 1 2644 0
 10534 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10535 012a 5A1C     		adds	r2, r3, #1
 10536 012c 174B     		ldr	r3, .L543+20
 10537 012e 83FB0231 		smull	r3, r1, r3, r2
 10538 0132 D317     		asrs	r3, r2, #31
 10539 0134 C91A     		subs	r1, r1, r3
 10540 0136 0B46     		mov	r3, r1
 10541 0138 5B00     		lsls	r3, r3, #1
 10542 013a 0B44     		add	r3, r3, r1
 10543 013c D11A     		subs	r1, r2, r3
 10544 013e 0B46     		mov	r3, r1
 10545 0140 FB73     		strb	r3, [r7, #15]
2645:bluetooth_rxtx.c **** 
2646:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10546              		.loc 1 2646 0
 10547 0142 134B     		ldr	r3, .L543+24
 10548 0144 1B68     		ldr	r3, [r3]
 10549 0146 1846     		mov	r0, r3
 10550 0148 FFF7FEFF 		bl	handle_usb
2647:bluetooth_rxtx.c ****         //wait(1);
2648:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 10551              		.loc 1 2648 0
 10552 014c 6420     		movs	r0, #100
 10553 014e FFF7FEFF 		bl	cc2400_strobe
2649:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 10554              		.loc 1 2649 0
 10555 0152 00BF     		nop
 10556              	.L541:
 10557              		.loc 1 2649 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccXEAChk.s 			page 232


 10558 0154 FFF7FEFF 		bl	cc2400_status
 10559 0158 0346     		mov	r3, r0
 10560 015a 03F00403 		and	r3, r3, #4
 10561 015e 002B     		cmp	r3, #0
 10562 0160 F8D1     		bne	.L541
 10563              	.L529:
 10564              	.LBE23:
2608:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10565              		.loc 1 2608 0 is_stmt 1
 10566 0162 0C4B     		ldr	r3, .L543+28
 10567 0164 1B78     		ldrb	r3, [r3]
 10568 0166 DBB2     		uxtb	r3, r3
 10569 0168 072B     		cmp	r3, #7
 10570 016a 80D0     		beq	.L542
2650:bluetooth_rxtx.c **** 	}
2651:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10571              		.loc 1 2651 0
 10572 016c 0A4B     		ldr	r3, .L543+32
 10573 016e 0022     		movs	r2, #0
 10574 0170 1A70     		strb	r2, [r3]
2652:bluetooth_rxtx.c **** }
 10575              		.loc 1 2652 0
 10576 0172 1037     		adds	r7, r7, #16
 10577              		.cfi_def_cfa_offset 8
 10578 0174 BD46     		mov	sp, r7
 10579              		.cfi_def_cfa_register 13
 10580              		@ sp needed
 10581 0176 80BD     		pop	{r7, pc}
 10582              	.L544:
 10583              		.align	2
 10584              	.L543:
 10585 0178 28090000 		.word	.LC2
 10586 017c 58C00920 		.word	537509976
 10587 0180 00000000 		.word	rssi_threshold
 10588 0184 38C00920 		.word	537509944
 10589 0188 3CC00920 		.word	537509948
 10590 018c 56555555 		.word	1431655766
 10591 0190 00000000 		.word	clkn
 10592 0194 00000000 		.word	requested_mode
 10593 0198 00000000 		.word	mode
 10594              		.cfi_endproc
 10595              	.LFE44:
 10597              		.section	.text.main,"ax",%progbits
 10598              		.align	2
 10599              		.global	main
 10600              		.thumb
 10601              		.thumb_func
 10603              	main:
 10604              	.LFB45:
2653:bluetooth_rxtx.c **** 
2654:bluetooth_rxtx.c **** int main()
2655:bluetooth_rxtx.c **** {
 10605              		.loc 1 2655 0
 10606              		.cfi_startproc
 10607              		@ args = 0, pretend = 0, frame = 0
 10608              		@ frame_needed = 1, uses_anonymous_args = 0
 10609 0000 80B5     		push	{r7, lr}
ARM GAS  /tmp/ccXEAChk.s 			page 233


 10610              		.cfi_def_cfa_offset 8
 10611              		.cfi_offset 7, -8
 10612              		.cfi_offset 14, -4
 10613 0002 00AF     		add	r7, sp, #0
 10614              		.cfi_def_cfa_register 7
2656:bluetooth_rxtx.c **** 	ubertooth_init();
 10615              		.loc 1 2656 0
 10616 0004 FFF7FEFF 		bl	ubertooth_init
2657:bluetooth_rxtx.c **** 	clkn_init();
 10617              		.loc 1 2657 0
 10618 0008 FFF7FEFF 		bl	clkn_init
2658:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 10619              		.loc 1 2658 0
 10620 000c 4248     		ldr	r0, .L565
 10621 000e FFF7FEFF 		bl	ubertooth_usb_init
 10622              	.L563:
2659:bluetooth_rxtx.c **** 
2660:bluetooth_rxtx.c **** 	while (1) {
2661:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10623              		.loc 1 2661 0
 10624 0012 424B     		ldr	r3, .L565+4
 10625 0014 1B68     		ldr	r3, [r3]
 10626 0016 1846     		mov	r0, r3
 10627 0018 FFF7FEFF 		bl	handle_usb
2662:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 10628              		.loc 1 2662 0
 10629 001c 404B     		ldr	r3, .L565+8
 10630 001e 1B78     		ldrb	r3, [r3]
 10631 0020 DAB2     		uxtb	r2, r3
 10632 0022 404B     		ldr	r3, .L565+12
 10633 0024 1B78     		ldrb	r3, [r3]
 10634 0026 DBB2     		uxtb	r3, r3
 10635 0028 9A42     		cmp	r2, r3
 10636 002a 74D0     		beq	.L546
2663:bluetooth_rxtx.c **** 			switch (requested_mode) {
 10637              		.loc 1 2663 0
 10638 002c 3C4B     		ldr	r3, .L565+8
 10639 002e 1B78     		ldrb	r3, [r3]
 10640 0030 DBB2     		uxtb	r3, r3
 10641 0032 0D2B     		cmp	r3, #13
 10642 0034 6ED8     		bhi	.L564
 10643 0036 01A2     		adr	r2, .L549
 10644 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 10645              		.p2align 2
 10646              	.L549:
 10647 003c 0F010000 		.word	.L548+1
 10648 0040 81000000 		.word	.L550+1
 10649 0044 15010000 		.word	.L564+1
 10650 0048 AB000000 		.word	.L551+1
 10651 004c EF000000 		.word	.L552+1
 10652 0050 BB000000 		.word	.L553+1
 10653 0054 E1000000 		.word	.L554+1
 10654 0058 F5000000 		.word	.L555+1
 10655 005c 8D000000 		.word	.L556+1
 10656 0060 99000000 		.word	.L557+1
 10657 0064 9F000000 		.word	.L558+1
 10658 0068 75000000 		.word	.L559+1
ARM GAS  /tmp/ccXEAChk.s 			page 234


 10659 006c A5000000 		.word	.L560+1
 10660 0070 FB000000 		.word	.L561+1
 10661              		.p2align 1
 10662              	.L559:
2664:bluetooth_rxtx.c **** 				 case MODE_RESET:
2665:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2666:bluetooth_rxtx.c **** 					wait(1);
 10663              		.loc 1 2666 0
 10664 0074 0120     		movs	r0, #1
 10665 0076 FFF7FEFF 		bl	wait
2667:bluetooth_rxtx.c **** 					reset();
 10666              		.loc 1 2667 0
 10667 007a FFF7FEFF 		bl	reset
2668:bluetooth_rxtx.c **** 					break;
 10668              		.loc 1 2668 0
 10669 007e 4AE0     		b	.L546
 10670              	.L550:
2669:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2670:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 10671              		.loc 1 2670 0
 10672 0080 284B     		ldr	r3, .L565+12
 10673 0082 0122     		movs	r2, #1
 10674 0084 1A70     		strb	r2, [r3]
2671:bluetooth_rxtx.c **** 					bt_stream_rx();
 10675              		.loc 1 2671 0
 10676 0086 FFF7FEFF 		bl	bt_stream_rx
2672:bluetooth_rxtx.c **** 					break;
 10677              		.loc 1 2672 0
 10678 008a 44E0     		b	.L546
 10679              	.L556:
2673:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2674:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 10680              		.loc 1 2674 0
 10681 008c 254B     		ldr	r3, .L565+12
 10682 008e 0822     		movs	r2, #8
 10683 0090 1A70     		strb	r2, [r3]
2675:bluetooth_rxtx.c **** 					bt_stream_rx();
 10684              		.loc 1 2675 0
 10685 0092 FFF7FEFF 		bl	bt_stream_rx
2676:bluetooth_rxtx.c **** 					break;
 10686              		.loc 1 2676 0
 10687 0096 3EE0     		b	.L546
 10688              	.L557:
2677:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2678:bluetooth_rxtx.c **** 					bt_follow_le();
 10689              		.loc 1 2678 0
 10690 0098 FFF7FEFF 		bl	bt_follow_le
2679:bluetooth_rxtx.c **** 					break;
 10691              		.loc 1 2679 0
 10692 009c 3BE0     		b	.L546
 10693              	.L558:
2680:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2681:bluetooth_rxtx.c **** 					bt_promisc_le();
 10694              		.loc 1 2681 0
 10695 009e FFF7FEFF 		bl	bt_promisc_le
2682:bluetooth_rxtx.c **** 					break;
 10696              		.loc 1 2682 0
ARM GAS  /tmp/ccXEAChk.s 			page 235


 10697 00a2 38E0     		b	.L546
 10698              	.L560:
2683:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2684:bluetooth_rxtx.c **** 					bt_slave_le();
 10699              		.loc 1 2684 0
 10700 00a4 FFF7FEFF 		bl	bt_slave_le
2685:bluetooth_rxtx.c **** 					break;
 10701              		.loc 1 2685 0
 10702 00a8 35E0     		b	.L546
 10703              	.L551:
2686:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2687:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 10704              		.loc 1 2687 0
 10705 00aa 1E4B     		ldr	r3, .L565+12
 10706 00ac 0322     		movs	r2, #3
 10707 00ae 1A70     		strb	r2, [r3]
2688:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 10708              		.loc 1 2688 0
 10709 00b0 1D48     		ldr	r0, .L565+16
 10710 00b2 1E49     		ldr	r1, .L565+20
 10711 00b4 FFF7FEFF 		bl	cc2400_txtest
2689:bluetooth_rxtx.c **** 					break;
 10712              		.loc 1 2689 0
 10713 00b8 2DE0     		b	.L546
 10714              	.L553:
2690:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2691:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 10715              		.loc 1 2691 0
 10716 00ba 1A4B     		ldr	r3, .L565+12
 10717 00bc 0522     		movs	r2, #5
 10718 00be 1A70     		strb	r2, [r3]
2692:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 10719              		.loc 1 2692 0
 10720 00c0 1A48     		ldr	r0, .L565+20
 10721 00c2 FFF7FEFF 		bl	cc2400_rangetest
2693:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 10722              		.loc 1 2693 0
 10723 00c6 174B     		ldr	r3, .L565+12
 10724 00c8 0022     		movs	r2, #0
 10725 00ca 1A70     		strb	r2, [r3]
2694:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 10726              		.loc 1 2694 0
 10727 00cc 144B     		ldr	r3, .L565+8
 10728 00ce 1B78     		ldrb	r3, [r3]
 10729 00d0 DBB2     		uxtb	r3, r3
 10730 00d2 052B     		cmp	r3, #5
 10731 00d4 03D1     		bne	.L562
2695:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 10732              		.loc 1 2695 0
 10733 00d6 124B     		ldr	r3, .L565+8
 10734 00d8 0022     		movs	r2, #0
 10735 00da 1A70     		strb	r2, [r3]
2696:bluetooth_rxtx.c **** 					break;
 10736              		.loc 1 2696 0
 10737 00dc 1BE0     		b	.L546
 10738              	.L562:
 10739 00de 1AE0     		b	.L546
ARM GAS  /tmp/ccXEAChk.s 			page 236


 10740              	.L554:
2697:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2698:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 10741              		.loc 1 2698 0
 10742 00e0 104B     		ldr	r3, .L565+12
 10743 00e2 0622     		movs	r2, #6
 10744 00e4 1A70     		strb	r2, [r3]
2699:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 10745              		.loc 1 2699 0
 10746 00e6 1148     		ldr	r0, .L565+20
 10747 00e8 FFF7FEFF 		bl	cc2400_repeater
2700:bluetooth_rxtx.c **** 					break;
 10748              		.loc 1 2700 0
 10749 00ec 13E0     		b	.L546
 10750              	.L552:
2701:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2702:bluetooth_rxtx.c **** 					specan();
 10751              		.loc 1 2702 0
 10752 00ee FFF7FEFF 		bl	specan
2703:bluetooth_rxtx.c **** 					break;
 10753              		.loc 1 2703 0
 10754 00f2 10E0     		b	.L546
 10755              	.L555:
2704:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2705:bluetooth_rxtx.c **** 					led_specan();
 10756              		.loc 1 2705 0
 10757 00f4 FFF7FEFF 		bl	led_specan
2706:bluetooth_rxtx.c **** 					break;
 10758              		.loc 1 2706 0
 10759 00f8 0DE0     		b	.L546
 10760              	.L561:
2707:bluetooth_rxtx.c **** 				case MODE_EGO:
2708:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 10761              		.loc 1 2708 0
 10762 00fa 0A4B     		ldr	r3, .L565+12
 10763 00fc 0D22     		movs	r2, #13
 10764 00fe 1A70     		strb	r2, [r3]
2709:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 10765              		.loc 1 2709 0
 10766 0100 0B4B     		ldr	r3, .L565+24
 10767 0102 1B78     		ldrb	r3, [r3]
 10768 0104 DBB2     		uxtb	r3, r3
 10769 0106 1846     		mov	r0, r3
 10770 0108 FFF7FEFF 		bl	ego_main
2710:bluetooth_rxtx.c **** 					break;
 10771              		.loc 1 2710 0
 10772 010c 03E0     		b	.L546
 10773              	.L548:
2711:bluetooth_rxtx.c **** 				case MODE_IDLE:
2712:bluetooth_rxtx.c **** 					cc2400_idle();
 10774              		.loc 1 2712 0
 10775 010e FFF7FEFF 		bl	cc2400_idle
2713:bluetooth_rxtx.c **** 					break;
 10776              		.loc 1 2713 0
 10777 0112 00E0     		b	.L546
 10778              	.L564:
2714:bluetooth_rxtx.c **** 				default:
ARM GAS  /tmp/ccXEAChk.s 			page 237


2715:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2716:bluetooth_rxtx.c **** 					break;
 10779              		.loc 1 2716 0
 10780 0114 00BF     		nop
 10781              	.L546:
2717:bluetooth_rxtx.c **** 			}
2718:bluetooth_rxtx.c **** 	}
 10782              		.loc 1 2718 0 discriminator 1
 10783 0116 7CE7     		b	.L563
 10784              	.L566:
 10785              		.align	2
 10786              	.L565:
 10787 0118 00000000 		.word	vendor_request_handler
 10788 011c 00000000 		.word	clkn
 10789 0120 00000000 		.word	requested_mode
 10790 0124 00000000 		.word	mode
 10791 0128 00000000 		.word	modulation
 10792 012c 00000000 		.word	channel
 10793 0130 00000000 		.word	ego_mode
 10794              		.cfi_endproc
 10795              	.LFE45:
 10797              		.bss
 10798              		.align	2
 10799              	restart_jamming.4710:
 10800 00d4 00000000 		.space	4
 10801              		.align	2
 10802              	first_ts.4808:
 10803 00d8 00000000 		.space	4
 10804              		.align	2
 10805              	prev_clk.4814:
 10806 00dc 00000000 		.space	4
 10807              		.text
 10808              	.Letext0:
 10809              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 10810              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 10811              		.file 4 "../common/ubertooth.h"
 10812              		.file 5 "bluetooth_le.h"
 10813              		.file 6 "bluetooth.h"
 10814              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccXEAChk.s 			page 238


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccXEAChk.s:19     .data:0000000000000000 $d
     /tmp/ccXEAChk.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccXEAChk.s:29     .rodata:0000000000000000 $d
     /tmp/ccXEAChk.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccXEAChk.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccXEAChk.s:80     .rodata:000000000000002c payload
     /tmp/ccXEAChk.s:104    .rodata:0000000000000040 whitening
     /tmp/ccXEAChk.s:235    .rodata:00000000000000c0 whitening_index
     /tmp/ccXEAChk.s:279    .rodata:00000000000000e8 hop_interval_lut
     /tmp/ccXEAChk.s:320    .rodata:0000000000000110 whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccXEAChk.s:806    .rodata:0000000000000890 compile_info
     /tmp/ccXEAChk.s:812    .rodata:00000000000008d4 eddystone
                            *COM*:0000000000000004 clkn
     /tmp/ccXEAChk.s:855    .bss:0000000000000000 hop_mode
     /tmp/ccXEAChk.s:856    .bss:0000000000000000 $d
     /tmp/ccXEAChk.s:860    .bss:0000000000000001 do_hop
     /tmp/ccXEAChk.s:865    .bss:0000000000000002 cs_no_squelch
     /tmp/ccXEAChk.s:871    .data:0000000000000004 cs_threshold_req
     /tmp/ccXEAChk.s:876    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/ccXEAChk.s:886    .bss:0000000000000004 hop_direct_channel
     /tmp/ccXEAChk.s:892    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/ccXEAChk.s:902    .bss:000000000000000c idle_buf_channel
     /tmp/ccXEAChk.s:908    .bss:000000000000000e active_buf_channel
     /tmp/ccXEAChk.s:914    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccXEAChk.s:923    .data:0000000000000008 active_rxbuf
     /tmp/ccXEAChk.s:929    .data:000000000000000c idle_rxbuf
     /tmp/ccXEAChk.s:935    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccXEAChk.s:954    .bss:0000000000000018 le_jam_count
     /tmp/ccXEAChk.s:960    .bss:000000000000001c data_cb
     /tmp/ccXEAChk.s:966    .bss:0000000000000020 packet_cb
     /tmp/ccXEAChk.s:972    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/ccXEAChk.s:978    .bss:00000000000000c2 mode
     /tmp/ccXEAChk.s:983    .bss:00000000000000c3 requested_mode
     /tmp/ccXEAChk.s:988    .bss:00000000000000c4 jam_mode
     /tmp/ccXEAChk.s:993    .bss:00000000000000c5 ego_mode
     /tmp/ccXEAChk.s:998    .bss:00000000000000c6 modulation
     /tmp/ccXEAChk.s:1005   .data:0000000000000054 channel
     /tmp/ccXEAChk.s:1012   .bss:00000000000000c8 requested_channel
     /tmp/ccXEAChk.s:1018   .bss:00000000000000ca saved_request
ARM GAS  /tmp/ccXEAChk.s 			page 239


     /tmp/ccXEAChk.s:1025   .data:0000000000000056 low_freq
     /tmp/ccXEAChk.s:1031   .data:0000000000000058 high_freq
     /tmp/ccXEAChk.s:1036   .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccXEAChk.s:1047   .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/ccXEAChk.s:1054   .bss:00000000000000cd rssi_count
     /tmp/ccXEAChk.s:1060   .bss:00000000000000d0 rssi_sum
     /tmp/ccXEAChk.s:1063   .text.rssi_reset:0000000000000000 $t
     /tmp/ccXEAChk.s:1067   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccXEAChk.s:1107   .text.rssi_reset:0000000000000024 $d
     /tmp/ccXEAChk.s:1115   .text.rssi_add:0000000000000000 $t
     /tmp/ccXEAChk.s:1119   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccXEAChk.s:1185   .text.rssi_add:000000000000005c $d
     /tmp/ccXEAChk.s:1193   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccXEAChk.s:1197   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccXEAChk.s:1291   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccXEAChk.s:1300   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccXEAChk.s:1304   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccXEAChk.s:1386   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccXEAChk.s:1392   .text.enqueue:0000000000000000 $t
     /tmp/ccXEAChk.s:1396   .text.enqueue:0000000000000000 enqueue
     /tmp/ccXEAChk.s:1643   .text.enqueue:0000000000000180 $d
     /tmp/ccXEAChk.s:1659   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccXEAChk.s:1664   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccXEAChk.s:1845   .text.enqueue_with_ts:000000000000010c $d
     /tmp/ccXEAChk.s:1852   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccXEAChk.s:1856   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccXEAChk.s:1931   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccXEAChk.s:1939   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccXEAChk.s:1943   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccXEAChk.s:1984   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccXEAChk.s:1992   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccXEAChk.s:1996   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccXEAChk.s:2037   .text.cs_trigger_disable:000000000000002c $d
     /tmp/ccXEAChk.s:2049   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccXEAChk.s:2053   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccXEAChk.s:2090   .text.vendor_request_handler:0000000000000024 $d
     /tmp/ccXEAChk.s:2151   .text.vendor_request_handler:0000000000000118 $t
     /tmp/ccXEAChk.s:2551   .text.vendor_request_handler:00000000000003a8 $d
     /tmp/ccXEAChk.s:2561   .text.vendor_request_handler:00000000000003c8 $t
     /tmp/ccXEAChk.s:2945   .text.vendor_request_handler:0000000000000614 $d
     /tmp/ccXEAChk.s:2963   .text.vendor_request_handler:0000000000000654 $t
     /tmp/ccXEAChk.s:3353   .text.vendor_request_handler:00000000000008f4 $d
     /tmp/ccXEAChk.s:3365   .text.vendor_request_handler:000000000000091c $t
     /tmp/ccXEAChk.s:6420   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccXEAChk.s:3649   .text.vendor_request_handler:0000000000000ad4 $d
     /tmp/ccXEAChk.s:3659   .text.clkn_init:0000000000000000 $t
     /tmp/ccXEAChk.s:3663   .text.clkn_init:0000000000000000 clkn_init
     /tmp/ccXEAChk.s:3714   .text.clkn_init:0000000000000038 $d
     /tmp/ccXEAChk.s:3724   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccXEAChk.s:3729   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
ARM GAS  /tmp/ccXEAChk.s 			page 240


     /tmp/ccXEAChk.s:3898   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/ccXEAChk.s:3910   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccXEAChk.s:3915   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccXEAChk.s:3957   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/ccXEAChk.s:3971   .text.msleep:0000000000000000 $t
     /tmp/ccXEAChk.s:3975   .text.msleep:0000000000000000 msleep
     /tmp/ccXEAChk.s:4044   .text.msleep:0000000000000070 $d
     /tmp/ccXEAChk.s:4052   .text.dma_init:0000000000000000 $t
     /tmp/ccXEAChk.s:4056   .text.dma_init:0000000000000000 dma_init
     /tmp/ccXEAChk.s:4230   .text.dma_init:0000000000000104 $d
     /tmp/ccXEAChk.s:4265   .text.dma_init_le:0000000000000000 $t
     /tmp/ccXEAChk.s:4269   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccXEAChk.s:4474   .text.dma_init_le:0000000000000134 $d
     /tmp/ccXEAChk.s:4506   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccXEAChk.s:4511   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccXEAChk.s:4614   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/ccXEAChk.s:4634   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccXEAChk.s:4639   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccXEAChk.s:4662   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccXEAChk.s:4674   .text.DMA_IRQHandler:0000000000000048 $t
     /tmp/ccXEAChk.s:4686   .text.DMA_IRQHandler:0000000000000050 $d
     /tmp/ccXEAChk.s:4691   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccXEAChk.s:4695   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccXEAChk.s:4748   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccXEAChk.s:4758   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccXEAChk.s:4762   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccXEAChk.s:4860   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccXEAChk.s:4879   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccXEAChk.s:4883   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccXEAChk.s:4936   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccXEAChk.s:4943   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccXEAChk.s:4947   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccXEAChk.s:5061   .text.cc2400_rx:00000000000000b0 $d
     /tmp/ccXEAChk.s:5068   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccXEAChk.s:5072   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccXEAChk.s:5207   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccXEAChk.s:5214   .text.le_transmit:0000000000000000 $t
     /tmp/ccXEAChk.s:5219   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccXEAChk.s:5612   .text.le_transmit:00000000000002d4 $d
     /tmp/ccXEAChk.s:5625   .text.le_jam:0000000000000000 $t
     /tmp/ccXEAChk.s:5630   .text.le_jam:0000000000000000 le_jam
     /tmp/ccXEAChk.s:5713   .text.le_jam:000000000000008c $d
     /tmp/ccXEAChk.s:5719   .text.hop:0000000000000000 $t
     /tmp/ccXEAChk.s:5724   .text.hop:0000000000000000 hop
     /tmp/ccXEAChk.s:5891   .text.hop:000000000000010c $d
     /tmp/ccXEAChk.s:5902   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccXEAChk.s:5907   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccXEAChk.s:6340   .text.bt_stream_rx:0000000000000308 $d
     /tmp/ccXEAChk.s:6359   .text.bt_stream_rx:0000000000000348 $t
     /tmp/ccXEAChk.s:6407   .text.bt_stream_rx:0000000000000390 $d
     /tmp/ccXEAChk.s:6416   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccXEAChk.s:6464   .text.le_set_access_address:0000000000000030 $d
     /tmp/ccXEAChk.s:6469   .text.reset_le:0000000000000000 $t
     /tmp/ccXEAChk.s:6474   .text.reset_le:0000000000000000 reset_le
     /tmp/ccXEAChk.s:6570   .text.reset_le:0000000000000084 $d
     /tmp/ccXEAChk.s:6579   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccXEAChk.s:6584   .text.reset_le_promisc:0000000000000000 reset_le_promisc
ARM GAS  /tmp/ccXEAChk.s 			page 241


     /tmp/ccXEAChk.s:6610   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccXEAChk.s:6615   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccXEAChk.s:6620   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccXEAChk.s:7046   .text.bt_generic_le:00000000000002a0 $d
     /tmp/ccXEAChk.s:7072   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccXEAChk.s:7077   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccXEAChk.s:7425   .text.bt_le_sync:0000000000000228 $d
     /tmp/ccXEAChk.s:7446   .text.bt_le_sync:0000000000000270 $t
     /tmp/ccXEAChk.s:7844   .text.bt_le_sync:0000000000000508 $d
     /tmp/ccXEAChk.s:10799  .bss:00000000000000d4 restart_jamming.4710
     /tmp/ccXEAChk.s:7869   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccXEAChk.s:7874   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccXEAChk.s:8164   .text.cb_follow_le:00000000000001b8 $d
     /tmp/ccXEAChk.s:8177   .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccXEAChk.s:8182   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccXEAChk.s:8560   .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccXEAChk.s:8570   .text.bt_follow_le:0000000000000000 $t
     /tmp/ccXEAChk.s:8575   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccXEAChk.s:8605   .text.bt_follow_le:000000000000001c $d
     /tmp/ccXEAChk.s:8612   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccXEAChk.s:8617   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccXEAChk.s:8710   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccXEAChk.s:8715   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccXEAChk.s:8924   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccXEAChk.s:10802  .bss:00000000000000d8 first_ts.4808
     /tmp/ccXEAChk.s:8943   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccXEAChk.s:8948   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccXEAChk.s:9083   .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccXEAChk.s:10805  .bss:00000000000000dc prev_clk.4814
     /tmp/ccXEAChk.s:9100   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccXEAChk.s:9105   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccXEAChk.s:9220   .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccXEAChk.s:9228   .text.see_aa:0000000000000000 $t
     /tmp/ccXEAChk.s:9233   .text.see_aa:0000000000000000 see_aa
     /tmp/ccXEAChk.s:9354   .text.see_aa:00000000000000a4 $d
     /tmp/ccXEAChk.s:9366   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccXEAChk.s:9371   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccXEAChk.s:9823   .text.cb_le_promisc:00000000000002e0 $d
     /tmp/ccXEAChk.s:9839   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccXEAChk.s:9844   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccXEAChk.s:9926   .text.bt_promisc_le:000000000000006c $d
     /tmp/ccXEAChk.s:9954   .text.bt_slave_le:0000000000000000 $t
     /tmp/ccXEAChk.s:9959   .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccXEAChk.s:10094  .text.bt_slave_le:00000000000000dc $d
     /tmp/ccXEAChk.s:10105  .text.specan:0000000000000000 $t
     /tmp/ccXEAChk.s:10110  .text.specan:0000000000000000 specan
     /tmp/ccXEAChk.s:10326  .text.specan:0000000000000178 $d
     /tmp/ccXEAChk.s:10344  .text.led_specan:0000000000000000 $t
     /tmp/ccXEAChk.s:10349  .text.led_specan:0000000000000000 led_specan
     /tmp/ccXEAChk.s:10585  .text.led_specan:0000000000000178 $d
     /tmp/ccXEAChk.s:10598  .text.main:0000000000000000 $t
     /tmp/ccXEAChk.s:10603  .text.main:0000000000000000 main
     /tmp/ccXEAChk.s:10647  .text.main:000000000000003c $d
     /tmp/ccXEAChk.s:10661  .text.main:0000000000000074 $t
     /tmp/ccXEAChk.s:10787  .text.main:0000000000000118 $d
                     .debug_frame:0000000000000010 $d

ARM GAS  /tmp/ccXEAChk.s 			page 242


UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
dio_ssp_init
rbit
btle_crcgen_lut
handle_usb
memset
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
