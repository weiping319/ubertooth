ARM GAS  /tmp/ccvLzxWr.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccvLzxWr.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	whitening:
  81 002c 01       		.byte	1
  82 002d 01       		.byte	1
  83 002e 01       		.byte	1
  84 002f 01       		.byte	1
  85 0030 00       		.byte	0
  86 0031 01       		.byte	1
  87 0032 00       		.byte	0
  88 0033 01       		.byte	1
  89 0034 00       		.byte	0
  90 0035 01       		.byte	1
  91 0036 00       		.byte	0
  92 0037 00       		.byte	0
  93 0038 00       		.byte	0
  94 0039 00       		.byte	0
  95 003a 01       		.byte	1
  96 003b 00       		.byte	0
  97 003c 01       		.byte	1
  98 003d 01       		.byte	1
  99 003e 00       		.byte	0
 100 003f 01       		.byte	1
 101 0040 01       		.byte	1
 102 0041 01       		.byte	1
 103 0042 01       		.byte	1
 104 0043 00       		.byte	0
 105 0044 00       		.byte	0
 106 0045 01       		.byte	1
 107 0046 01       		.byte	1
 108 0047 01       		.byte	1
 109 0048 00       		.byte	0
 110 0049 00       		.byte	0
 111 004a 01       		.byte	1
 112 004b 00       		.byte	0
 113 004c 01       		.byte	1
 114 004d 00       		.byte	0
 115 004e 01       		.byte	1
 116 004f 01       		.byte	1
 117 0050 00       		.byte	0
 118 0051 00       		.byte	0
 119 0052 01       		.byte	1
 120 0053 01       		.byte	1
 121 0054 00       		.byte	0
 122 0055 00       		.byte	0
ARM GAS  /tmp/ccvLzxWr.s 			page 3


 123 0056 00       		.byte	0
 124 0057 00       		.byte	0
 125 0058 00       		.byte	0
 126 0059 01       		.byte	1
 127 005a 01       		.byte	1
 128 005b 00       		.byte	0
 129 005c 01       		.byte	1
 130 005d 01       		.byte	1
 131 005e 00       		.byte	0
 132 005f 01       		.byte	1
 133 0060 00       		.byte	0
 134 0061 01       		.byte	1
 135 0062 01       		.byte	1
 136 0063 01       		.byte	1
 137 0064 00       		.byte	0
 138 0065 01       		.byte	1
 139 0066 00       		.byte	0
 140 0067 00       		.byte	0
 141 0068 00       		.byte	0
 142 0069 01       		.byte	1
 143 006a 01       		.byte	1
 144 006b 00       		.byte	0
 145 006c 00       		.byte	0
 146 006d 01       		.byte	1
 147 006e 00       		.byte	0
 148 006f 00       		.byte	0
 149 0070 00       		.byte	0
 150 0071 01       		.byte	1
 151 0072 00       		.byte	0
 152 0073 00       		.byte	0
 153 0074 00       		.byte	0
 154 0075 00       		.byte	0
 155 0076 00       		.byte	0
 156 0077 00       		.byte	0
 157 0078 01       		.byte	1
 158 0079 00       		.byte	0
 159 007a 00       		.byte	0
 160 007b 01       		.byte	1
 161 007c 00       		.byte	0
 162 007d 00       		.byte	0
 163 007e 01       		.byte	1
 164 007f 01       		.byte	1
 165 0080 00       		.byte	0
 166 0081 01       		.byte	1
 167 0082 00       		.byte	0
 168 0083 00       		.byte	0
 169 0084 01       		.byte	1
 170 0085 01       		.byte	1
 171 0086 01       		.byte	1
 172 0087 01       		.byte	1
 173 0088 00       		.byte	0
 174 0089 01       		.byte	1
 175 008a 01       		.byte	1
 176 008b 01       		.byte	1
 177 008c 00       		.byte	0
 178 008d 00       		.byte	0
 179 008e 00       		.byte	0
ARM GAS  /tmp/ccvLzxWr.s 			page 4


 180 008f 00       		.byte	0
 181 0090 01       		.byte	1
 182 0091 01       		.byte	1
 183 0092 01       		.byte	1
 184 0093 01       		.byte	1
 185 0094 01       		.byte	1
 186 0095 01       		.byte	1
 187 0096 01       		.byte	1
 188 0097 00       		.byte	0
 189 0098 00       		.byte	0
 190 0099 00       		.byte	0
 191 009a 01       		.byte	1
 192 009b 01       		.byte	1
 193 009c 01       		.byte	1
 194 009d 00       		.byte	0
 195 009e 01       		.byte	1
 196 009f 01       		.byte	1
 197 00a0 00       		.byte	0
 198 00a1 00       		.byte	0
 199 00a2 00       		.byte	0
 200 00a3 01       		.byte	1
 201 00a4 00       		.byte	0
 202 00a5 01       		.byte	1
 203 00a6 00       		.byte	0
 204 00a7 00       		.byte	0
 205 00a8 01       		.byte	1
 206 00a9 00       		.byte	0
 207 00aa 01       		.byte	1
 208 00ab 00       		.align	2
 211              	whitening_index:
 212 00ac 46       		.byte	70
 213 00ad 3E       		.byte	62
 214 00ae 78       		.byte	120
 215 00af 6F       		.byte	111
 216 00b0 4D       		.byte	77
 217 00b1 2E       		.byte	46
 218 00b2 0F       		.byte	15
 219 00b3 65       		.byte	101
 220 00b4 42       		.byte	66
 221 00b5 27       		.byte	39
 222 00b6 1F       		.byte	31
 223 00b7 1A       		.byte	26
 224 00b8 50       		.byte	80
 225 00b9 53       		.byte	83
 226 00ba 7D       		.byte	125
 227 00bb 59       		.byte	89
 228 00bc 0A       		.byte	10
 229 00bd 23       		.byte	35
 230 00be 08       		.byte	8
 231 00bf 36       		.byte	54
 232 00c0 7A       		.byte	122
 233 00c1 11       		.byte	17
 234 00c2 21       		.byte	33
 235 00c3 00       		.byte	0
 236 00c4 3A       		.byte	58
 237 00c5 73       		.byte	115
 238 00c6 06       		.byte	6
ARM GAS  /tmp/ccvLzxWr.s 			page 5


 239 00c7 5E       		.byte	94
 240 00c8 56       		.byte	86
 241 00c9 31       		.byte	49
 242 00ca 34       		.byte	52
 243 00cb 14       		.byte	20
 244 00cc 28       		.byte	40
 245 00cd 1B       		.byte	27
 246 00ce 54       		.byte	84
 247 00cf 5A       		.byte	90
 248 00d0 3F       		.byte	63
 249 00d1 70       		.byte	112
 250 00d2 2F       		.byte	47
 251 00d3 66       		.byte	102
 252              		.align	2
 255              	hop_interval_lut:
 256 00d4 00       		.byte	0
 257 00d5 01       		.byte	1
 258 00d6 13       		.byte	19
 259 00d7 19       		.byte	25
 260 00d8 1C       		.byte	28
 261 00d9 0F       		.byte	15
 262 00da 1F       		.byte	31
 263 00db 10       		.byte	16
 264 00dc 0E       		.byte	14
 265 00dd 21       		.byte	33
 266 00de 1A       		.byte	26
 267 00df 1B       		.byte	27
 268 00e0 22       		.byte	34
 269 00e1 14       		.byte	20
 270 00e2 08       		.byte	8
 271 00e3 05       		.byte	5
 272 00e4 07       		.byte	7
 273 00e5 18       		.byte	24
 274 00e6 23       		.byte	35
 275 00e7 02       		.byte	2
 276 00e8 0D       		.byte	13
 277 00e9 1E       		.byte	30
 278 00ea 20       		.byte	32
 279 00eb 1D       		.byte	29
 280 00ec 11       		.byte	17
 281 00ed 03       		.byte	3
 282 00ee 0A       		.byte	10
 283 00ef 0B       		.byte	11
 284 00f0 04       		.byte	4
 285 00f1 17       		.byte	23
 286 00f2 15       		.byte	21
 287 00f3 06       		.byte	6
 288 00f4 16       		.byte	22
 289 00f5 09       		.byte	9
 290 00f6 0C       		.byte	12
 291 00f7 12       		.byte	18
 292 00f8 24       		.byte	36
 293 00f9 000000   		.align	2
 296              	whitening_word:
 297 00fc 40B2BCC3 		.word	-1011043776
 298 0100 1F374A5F 		.word	1598699295
 299 0104 85F69C9A 		.word	-1700989307
ARM GAS  /tmp/ccvLzxWr.s 			page 6


 300 0108 C1D6C544 		.word	1153816257
 301 010c 2059DEE1 		.word	-505521888
 302 0110 8F1BA5AF 		.word	-1348134001
 303 0114 427B4ECD 		.word	-850494654
 304 0118 60EB6222 		.word	576908128
 305 011c 902CEFF0 		.word	-252760944
 306 0120 C78DD257 		.word	1473416647
 307 0124 A13DA766 		.word	1722236321
 308 0128 B0753111 		.word	288454064
 309 012c 8940B2BC 		.word	-1129168759
 310 0130 C31F374A 		.word	1245126595
 311 0134 5F85F69C 		.word	-1661565601
 312 0138 9AC1D6C5 		.word	-975781478
 313 013c 442059DE 		.word	-564584380
 314 0140 E18F1BA5 		.word	-1524920351
 315 0144 AF427B4E 		.word	1316700847
 316 0148 CD60EB62 		.word	1659592909
 317 014c 22902CEF 		.word	-282292190
 318 0150 F0C78DD2 		.word	-762460176
 319 0154 57A13DA7 		.word	-1489133225
 320 0158 66B07531 		.word	829796454
 321 015c D257A13D 		.word	1033983954
 322 0160 A766B075 		.word	1974494887
 323 0164 31114896 		.word	-1773661903
 324 0168 77F8E346 		.word	1189345399
 325 016c E9ABD09E 		.word	-1630491671
 326 0170 5333D8BA 		.word	-1160236205
 327 0174 980824CB 		.word	-886830952
 328 0178 3BFC71A3 		.word	-1552810949
 329 017c F45568CF 		.word	-815245836
 330 0180 A9196C5D 		.word	1567365545
 331 0184 4C0492E5 		.word	-443415476
 332 0188 1DFEB851 		.word	1371078173
 333 018c 1BA5AF42 		.word	1118807323
 334 0190 7B4ECD60 		.word	1624067707
 335 0194 EB622290 		.word	-1876794645
 336 0198 2CEFF0C7 		.word	-940511444
 337 019c 8DD257A1 		.word	-1588079987
 338 01a0 3DA766B0 		.word	-1335449795
 339 01a4 75311148 		.word	1209086325
 340 01a8 9677F8E3 		.word	-470255722
 341 01ac 46E9ABD0 		.word	-794039994
 342 01b0 9E5333D8 		.word	-667724898
 343 01b4 BA980824 		.word	604543162
 344 01b8 CB3BFC71 		.word	1912355787
 345 01bc 6479873F 		.word	1065843044
 346 01c0 6E94BE0A 		.word	180261998
 347 01c4 ED393583 		.word	-2093663763
 348 01c8 AD8B8940 		.word	1082756013
 349 01cc B2BCC31F 		.word	532921522
 350 01d0 374A5F85 		.word	-2057352649
 351 01d4 F69C9AC1 		.word	-1046831882
 352 01d8 D6C54420 		.word	541378006
 353 01dc 59DEE18F 		.word	-1881022887
 354 01e0 1BA5AF42 		.word	1118807323
 355 01e4 7B4ECD60 		.word	1624067707
 356 01e8 EB622290 		.word	-1876794645
ARM GAS  /tmp/ccvLzxWr.s 			page 7


 357 01ec AD8B8940 		.word	1082756013
 358 01f0 B2BCC31F 		.word	532921522
 359 01f4 374A5F85 		.word	-2057352649
 360 01f8 F69C9AC1 		.word	-1046831882
 361 01fc D6C54420 		.word	541378006
 362 0200 59DEE18F 		.word	-1881022887
 363 0204 1BA5AF42 		.word	1118807323
 364 0208 7B4ECD60 		.word	1624067707
 365 020c EB622290 		.word	-1876794645
 366 0210 2CEFF0C7 		.word	-940511444
 367 0214 8DD257A1 		.word	-1588079987
 368 0218 3DA766B0 		.word	-1335449795
 369 021c F69C9AC1 		.word	-1046831882
 370 0220 D6C54420 		.word	541378006
 371 0224 59DEE18F 		.word	-1881022887
 372 0228 1BA5AF42 		.word	1118807323
 373 022c 7B4ECD60 		.word	1624067707
 374 0230 EB622290 		.word	-1876794645
 375 0234 2CEFF0C7 		.word	-940511444
 376 0238 8DD257A1 		.word	-1588079987
 377 023c 3DA766B0 		.word	-1335449795
 378 0240 75311148 		.word	1209086325
 379 0244 9677F8E3 		.word	-470255722
 380 0248 46E9ABD0 		.word	-794039994
 381 024c 3F6E94BE 		.word	-1097568705
 382 0250 0AED3935 		.word	892988682
 383 0254 83AD8B89 		.word	-1987334781
 384 0258 40B2BCC3 		.word	-1011043776
 385 025c 1F374A5F 		.word	1598699295
 386 0260 85F69C9A 		.word	-1700989307
 387 0264 C1D6C544 		.word	1153816257
 388 0268 2059DEE1 		.word	-505521888
 389 026c 8F1BA5AF 		.word	-1348134001
 390 0270 427B4ECD 		.word	-850494654
 391 0274 60EB6222 		.word	576908128
 392 0278 902CEFF0 		.word	-252760944
 393 027c 0824CB3B 		.word	1003168776
 394 0280 FC71A3F4 		.word	-190615044
 395 0284 5568CFA9 		.word	-1446025131
 396 0288 196C5D4C 		.word	1281190937
 397 028c 0492E51D 		.word	501584388
 398 0290 FEB851FA 		.word	-95307522
 399 0294 2AB4E7D4 		.word	-723012566
 400 0298 0CB62E26 		.word	640595468
 401 029c 02C9F20E 		.word	250792194
 402 02a0 7FDC287D 		.word	2099829887
 403 02a4 15DA736A 		.word	1785977365
 404 02a8 065B1713 		.word	320297734
 405 02ac C1D6C544 		.word	1153816257
 406 02b0 2059DEE1 		.word	-505521888
 407 02b4 8F1BA5AF 		.word	-1348134001
 408 02b8 427B4ECD 		.word	-850494654
 409 02bc 60EB6222 		.word	576908128
 410 02c0 902CEFF0 		.word	-252760944
 411 02c4 C78DD257 		.word	1473416647
 412 02c8 A13DA766 		.word	1722236321
 413 02cc B0753111 		.word	288454064
ARM GAS  /tmp/ccvLzxWr.s 			page 8


 414 02d0 489677F8 		.word	-126380472
 415 02d4 E346E9AB 		.word	-1410775325
 416 02d8 D09E5333 		.word	861118160
 417 02dc 9AC1D6C5 		.word	-975781478
 418 02e0 442059DE 		.word	-564584380
 419 02e4 E18F1BA5 		.word	-1524920351
 420 02e8 AF427B4E 		.word	1316700847
 421 02ec CD60EB62 		.word	1659592909
 422 02f0 22902CEF 		.word	-282292190
 423 02f4 F0C78DD2 		.word	-762460176
 424 02f8 57A13DA7 		.word	-1489133225
 425 02fc 66B07531 		.word	829796454
 426 0300 11489677 		.word	2006337553
 427 0304 F8E346E9 		.word	-381230088
 428 0308 ABD09E53 		.word	1402917035
 429 030c 5333D8BA 		.word	-1160236205
 430 0310 980824CB 		.word	-886830952
 431 0314 3BFC71A3 		.word	-1552810949
 432 0318 F45568CF 		.word	-815245836
 433 031c A9196C5D 		.word	1567365545
 434 0320 4C0492E5 		.word	-443415476
 435 0324 1DFEB851 		.word	1371078173
 436 0328 FA2AB4E7 		.word	-407622918
 437 032c D40CB62E 		.word	783682772
 438 0330 2602C9F2 		.word	-221707738
 439 0334 0E7FDC28 		.word	685539086
 440 0338 7D15DA73 		.word	1943672189
 441 033c 2CEFF0C7 		.word	-940511444
 442 0340 8DD257A1 		.word	-1588079987
 443 0344 3DA766B0 		.word	-1335449795
 444 0348 75311148 		.word	1209086325
 445 034c 9677F8E3 		.word	-470255722
 446 0350 46E9ABD0 		.word	-794039994
 447 0354 9E5333D8 		.word	-667724898
 448 0358 BA980824 		.word	604543162
 449 035c CB3BFC71 		.word	1912355787
 450 0360 A3F45568 		.word	1750463651
 451 0364 CFA9196C 		.word	1813621199
 452 0368 5D4C0492 		.word	-1845212067
 453 036c E51DFEB8 		.word	-1191305755
 454 0370 51FA2AB4 		.word	-1272251823
 455 0374 E7D40CB6 		.word	-1240673049
 456 0378 2E2602C9 		.word	-922606034
 457 037c F20E7FDC 		.word	-595652878
 458 0380 287D15DA 		.word	-636125912
 459 0384 736A065B 		.word	1527147123
 460 0388 17138164 		.word	1686180631
 461 038c 79873F6E 		.word	1849657209
 462 0390 94BE0AED 		.word	-318062956
 463 0394 393583AD 		.word	-1383910087
 464 0398 8B8940B2 		.word	-1304393333
 465 039c BE0AED39 		.word	971836094
 466 03a0 3583AD8B 		.word	-1951562955
 467 03a4 8940B2BC 		.word	-1129168759
 468 03a8 C31F374A 		.word	1245126595
 469 03ac 5F85F69C 		.word	-1661565601
 470 03b0 9AC1D6C5 		.word	-975781478
ARM GAS  /tmp/ccvLzxWr.s 			page 9


 471 03b4 442059DE 		.word	-564584380
 472 03b8 E18F1BA5 		.word	-1524920351
 473 03bc AF427B4E 		.word	1316700847
 474 03c0 CD60EB62 		.word	1659592909
 475 03c4 22902CEF 		.word	-282292190
 476 03c8 F0C78DD2 		.word	-762460176
 477 03cc 77F8E346 		.word	1189345399
 478 03d0 E9ABD09E 		.word	-1630491671
 479 03d4 5333D8BA 		.word	-1160236205
 480 03d8 980824CB 		.word	-886830952
 481 03dc 3BFC71A3 		.word	-1552810949
 482 03e0 F45568CF 		.word	-815245836
 483 03e4 A9196C5D 		.word	1567365545
 484 03e8 4C0492E5 		.word	-443415476
 485 03ec 1DFEB851 		.word	1371078173
 486 03f0 FA2AB4E7 		.word	-407622918
 487 03f4 D40CB62E 		.word	783682772
 488 03f8 2602C9F2 		.word	-221707738
 489 03fc D09E5333 		.word	861118160
 490 0400 D8BA9808 		.word	144227032
 491 0404 24CB3BFC 		.word	-63190236
 492 0408 71A3F455 		.word	1442095985
 493 040c 68CFA919 		.word	430559080
 494 0410 6C5D4C04 		.word	72113516
 495 0414 92E51DFE 		.word	-31595118
 496 0418 B851FA2A 		.word	721047992
 497 041c B4E7D40C 		.word	215279540
 498 0420 B62E2602 		.word	36056758
 499 0424 C9F20E7F 		.word	2131686089
 500 0428 DC287D15 		.word	360523996
 501 042c 196C5D4C 		.word	1281190937
 502 0430 0492E51D 		.word	501584388
 503 0434 FEB851FA 		.word	-95307522
 504 0438 2AB4E7D4 		.word	-723012566
 505 043c 0CB62E26 		.word	640595468
 506 0440 02C9F20E 		.word	250792194
 507 0444 7FDC287D 		.word	2099829887
 508 0448 15DA736A 		.word	1785977365
 509 044c 065B1713 		.word	320297734
 510 0450 81647987 		.word	-2022087551
 511 0454 3F6E94BE 		.word	-1097568705
 512 0458 0AED3935 		.word	892988682
 513 045c 427B4ECD 		.word	-850494654
 514 0460 60EB6222 		.word	576908128
 515 0464 902CEFF0 		.word	-252760944
 516 0468 C78DD257 		.word	1473416647
 517 046c A13DA766 		.word	1722236321
 518 0470 B0753111 		.word	288454064
 519 0474 489677F8 		.word	-126380472
 520 0478 E346E9AB 		.word	-1410775325
 521 047c D09E5333 		.word	861118160
 522 0480 D8BA9808 		.word	144227032
 523 0484 24CB3BFC 		.word	-63190236
 524 0488 71A3F455 		.word	1442095985
 525 048c 8B8940B2 		.word	-1304393333
 526 0490 BCC31F37 		.word	924828604
 527 0494 4A5F85F6 		.word	-159031478
ARM GAS  /tmp/ccvLzxWr.s 			page 10


 528 0498 9C9AC1D6 		.word	-691955044
 529 049c C5442059 		.word	1495286981
 530 04a0 DEE18F1B 		.word	462414302
 531 04a4 A5AF427B 		.word	2067967909
 532 04a8 4ECD60EB 		.word	-345977522
 533 04ac 6222902C 		.word	747643490
 534 04b0 EFF0C78D 		.word	-1916276497
 535 04b4 D257A13D 		.word	1033983954
 536 04b8 A766B075 		.word	1974494887
 537 04bc F45568CF 		.word	-815245836
 538 04c0 A9196C5D 		.word	1567365545
 539 04c4 4C0492E5 		.word	-443415476
 540 04c8 1DFEB851 		.word	1371078173
 541 04cc FA2AB4E7 		.word	-407622918
 542 04d0 D40CB62E 		.word	783682772
 543 04d4 2602C9F2 		.word	-221707738
 544 04d8 0E7FDC28 		.word	685539086
 545 04dc 7D15DA73 		.word	1943672189
 546 04e0 6A065B17 		.word	391841386
 547 04e4 13816479 		.word	2036629779
 548 04e8 873F6E94 		.word	-1804714105
 549 04ec 3DA766B0 		.word	-1335449795
 550 04f0 75311148 		.word	1209086325
 551 04f4 9677F8E3 		.word	-470255722
 552 04f8 46E9ABD0 		.word	-794039994
 553 04fc 9E5333D8 		.word	-667724898
 554 0500 BA980824 		.word	604543162
 555 0504 CB3BFC71 		.word	1912355787
 556 0508 A3F45568 		.word	1750463651
 557 050c CFA9196C 		.word	1813621199
 558 0510 5D4C0492 		.word	-1845212067
 559 0514 E51DFEB8 		.word	-1191305755
 560 0518 51FA2AB4 		.word	-1272251823
 561 051c 66B07531 		.word	829796454
 562 0520 11489677 		.word	2006337553
 563 0524 F8E346E9 		.word	-381230088
 564 0528 ABD09E53 		.word	1402917035
 565 052c 33D8BA98 		.word	-1732585421
 566 0530 0824CB3B 		.word	1003168776
 567 0534 FC71A3F4 		.word	-190615044
 568 0538 5568CFA9 		.word	-1446025131
 569 053c 196C5D4C 		.word	1281190937
 570 0540 0492E51D 		.word	501584388
 571 0544 FEB851FA 		.word	-95307522
 572 0548 2AB4E7D4 		.word	-723012566
 573 054c AF427B4E 		.word	1316700847
 574 0550 CD60EB62 		.word	1659592909
 575 0554 22902CEF 		.word	-282292190
 576 0558 F0C78DD2 		.word	-762460176
 577 055c 57A13DA7 		.word	-1489133225
 578 0560 66B07531 		.word	829796454
 579 0564 11489677 		.word	2006337553
 580 0568 F8E346E9 		.word	-381230088
 581 056c ABD09E53 		.word	1402917035
 582 0570 33D8BA98 		.word	-1732585421
 583 0574 0824CB3B 		.word	1003168776
 584 0578 FC71A3F4 		.word	-190615044
ARM GAS  /tmp/ccvLzxWr.s 			page 11


 585 057c 980824CB 		.word	-886830952
 586 0580 3BFC71A3 		.word	-1552810949
 587 0584 F45568CF 		.word	-815245836
 588 0588 A9196C5D 		.word	1567365545
 589 058c 4C0492E5 		.word	-443415476
 590 0590 1DFEB851 		.word	1371078173
 591 0594 FA2AB4E7 		.word	-407622918
 592 0598 D40CB62E 		.word	783682772
 593 059c 2602C9F2 		.word	-221707738
 594 05a0 0E7FDC28 		.word	685539086
 595 05a4 7D15DA73 		.word	1943672189
 596 05a8 6A065B17 		.word	391841386
 597 05ac 51FA2AB4 		.word	-1272251823
 598 05b0 E7D40CB6 		.word	-1240673049
 599 05b4 2E2602C9 		.word	-922606034
 600 05b8 F20E7FDC 		.word	-595652878
 601 05bc 287D15DA 		.word	-636125912
 602 05c0 736A065B 		.word	1527147123
 603 05c4 17138164 		.word	1686180631
 604 05c8 79873F6E 		.word	1849657209
 605 05cc 94BE0AED 		.word	-318062956
 606 05d0 393583AD 		.word	-1383910087
 607 05d4 8B8940B2 		.word	-1304393333
 608 05d8 BCC31F37 		.word	924828604
 609 05dc 0AED3935 		.word	892988682
 610 05e0 83AD8B89 		.word	-1987334781
 611 05e4 40B2BCC3 		.word	-1011043776
 612 05e8 1F374A5F 		.word	1598699295
 613 05ec 85F69C9A 		.word	-1700989307
 614 05f0 C1D6C544 		.word	1153816257
 615 05f4 2059DEE1 		.word	-505521888
 616 05f8 8F1BA5AF 		.word	-1348134001
 617 05fc 427B4ECD 		.word	-850494654
 618 0600 60EB6222 		.word	576908128
 619 0604 902CEFF0 		.word	-252760944
 620 0608 C78DD257 		.word	1473416647
 621 060c C31F374A 		.word	1245126595
 622 0610 5F85F69C 		.word	-1661565601
 623 0614 9AC1D6C5 		.word	-975781478
 624 0618 442059DE 		.word	-564584380
 625 061c E18F1BA5 		.word	-1524920351
 626 0620 AF427B4E 		.word	1316700847
 627 0624 CD60EB62 		.word	1659592909
 628 0628 22902CEF 		.word	-282292190
 629 062c F0C78DD2 		.word	-762460176
 630 0630 57A13DA7 		.word	-1489133225
 631 0634 66B07531 		.word	829796454
 632 0638 11489677 		.word	2006337553
 633 063c BCC31F37 		.word	924828604
 634 0640 4A5F85F6 		.word	-159031478
 635 0644 9C9AC1D6 		.word	-691955044
 636 0648 C5442059 		.word	1495286981
 637 064c DEE18F1B 		.word	462414302
 638 0650 A5AF427B 		.word	2067967909
 639 0654 4ECD60EB 		.word	-345977522
 640 0658 6222902C 		.word	747643490
 641 065c EFF0C78D 		.word	-1916276497
ARM GAS  /tmp/ccvLzxWr.s 			page 12


 642 0660 D257A13D 		.word	1033983954
 643 0664 A766B075 		.word	1974494887
 644 0668 31114896 		.word	-1773661903
 645 066c 75311148 		.word	1209086325
 646 0670 9677F8E3 		.word	-470255722
 647 0674 46E9ABD0 		.word	-794039994
 648 0678 9E5333D8 		.word	-667724898
 649 067c BA980824 		.word	604543162
 650 0680 CB3BFC71 		.word	1912355787
 651 0684 A3F45568 		.word	1750463651
 652 0688 CFA9196C 		.word	1813621199
 653 068c 5D4C0492 		.word	-1845212067
 654 0690 E51DFEB8 		.word	-1191305755
 655 0694 51FA2AB4 		.word	-1272251823
 656 0698 E7D40CB6 		.word	-1240673049
 657 069c 2E2602C9 		.word	-922606034
 658 06a0 F20E7FDC 		.word	-595652878
 659 06a4 287D15DA 		.word	-636125912
 660 06a8 736A065B 		.word	1527147123
 661 06ac 17138164 		.word	1686180631
 662 06b0 79873F6E 		.word	1849657209
 663 06b4 94BE0AED 		.word	-318062956
 664 06b8 393583AD 		.word	-1383910087
 665 06bc 8B8940B2 		.word	-1304393333
 666 06c0 BCC31F37 		.word	924828604
 667 06c4 4A5F85F6 		.word	-159031478
 668 06c8 9C9AC1D6 		.word	-691955044
 669 06cc E7D40CB6 		.word	-1240673049
 670 06d0 2E2602C9 		.word	-922606034
 671 06d4 F20E7FDC 		.word	-595652878
 672 06d8 287D15DA 		.word	-636125912
 673 06dc 736A065B 		.word	1527147123
 674 06e0 17138164 		.word	1686180631
 675 06e4 79873F6E 		.word	1849657209
 676 06e8 94BE0AED 		.word	-318062956
 677 06ec 393583AD 		.word	-1383910087
 678 06f0 8B8940B2 		.word	-1304393333
 679 06f4 BCC31F37 		.word	924828604
 680 06f8 4A5F85F6 		.word	-159031478
 681 06fc 60EB6222 		.word	576908128
 682 0700 902CEFF0 		.word	-252760944
 683 0704 C78DD257 		.word	1473416647
 684 0708 A13DA766 		.word	1722236321
 685 070c B0753111 		.word	288454064
 686 0710 489677F8 		.word	-126380472
 687 0714 E346E9AB 		.word	-1410775325
 688 0718 D09E5333 		.word	861118160
 689 071c D8BA9808 		.word	144227032
 690 0720 24CB3BFC 		.word	-63190236
 691 0724 71A3F455 		.word	1442095985
 692 0728 68CFA919 		.word	430559080
 693 072c A9196C5D 		.word	1567365545
 694 0730 4C0492E5 		.word	-443415476
 695 0734 1DFEB851 		.word	1371078173
 696 0738 FA2AB4E7 		.word	-407622918
 697 073c D40CB62E 		.word	783682772
 698 0740 2602C9F2 		.word	-221707738
ARM GAS  /tmp/ccvLzxWr.s 			page 13


 699 0744 0E7FDC28 		.word	685539086
 700 0748 7D15DA73 		.word	1943672189
 701 074c 6A065B17 		.word	391841386
 702 0750 13816479 		.word	2036629779
 703 0754 873F6E94 		.word	-1804714105
 704 0758 BE0AED39 		.word	971836094
 705 075c F20E7FDC 		.word	-595652878
 706 0760 287D15DA 		.word	-636125912
 707 0764 736A065B 		.word	1527147123
 708 0768 17138164 		.word	1686180631
 709 076c 79873F6E 		.word	1849657209
 710 0770 94BE0AED 		.word	-318062956
 711 0774 393583AD 		.word	-1383910087
 712 0778 8B8940B2 		.word	-1304393333
 713 077c BCC31F37 		.word	924828604
 714 0780 4A5F85F6 		.word	-159031478
 715 0784 9C9AC1D6 		.word	-691955044
 716 0788 C5442059 		.word	1495286981
 717 078c 3BFC71A3 		.word	-1552810949
 718 0790 F45568CF 		.word	-815245836
 719 0794 A9196C5D 		.word	1567365545
 720 0798 4C0492E5 		.word	-443415476
 721 079c 1DFEB851 		.word	1371078173
 722 07a0 FA2AB4E7 		.word	-407622918
 723 07a4 D40CB62E 		.word	783682772
 724 07a8 2602C9F2 		.word	-221707738
 725 07ac 0E7FDC28 		.word	685539086
 726 07b0 7D15DA73 		.word	1943672189
 727 07b4 6A065B17 		.word	391841386
 728 07b8 13816479 		.word	2036629779
 729 07bc 442059DE 		.word	-564584380
 730 07c0 E18F1BA5 		.word	-1524920351
 731 07c4 AF427B4E 		.word	1316700847
 732 07c8 CD60EB62 		.word	1659592909
 733 07cc 22902CEF 		.word	-282292190
 734 07d0 F0C78DD2 		.word	-762460176
 735 07d4 57A13DA7 		.word	-1489133225
 736 07d8 66B07531 		.word	829796454
 737 07dc 11489677 		.word	2006337553
 738 07e0 F8E346E9 		.word	-381230088
 739 07e4 ABD09E53 		.word	1402917035
 740 07e8 33D8BA98 		.word	-1732585421
 741 07ec 8DD257A1 		.word	-1588079987
 742 07f0 3DA766B0 		.word	-1335449795
 743 07f4 75311148 		.word	1209086325
 744 07f8 9677F8E3 		.word	-470255722
 745 07fc 46E9ABD0 		.word	-794039994
 746 0800 9E5333D8 		.word	-667724898
 747 0804 BA980824 		.word	604543162
 748 0808 CB3BFC71 		.word	1912355787
 749 080c A3F45568 		.word	1750463651
 750 0810 CFA9196C 		.word	1813621199
 751 0814 5D4C0492 		.word	-1845212067
 752 0818 E51DFEB8 		.word	-1191305755
 753 081c D6C54420 		.word	541378006
 754 0820 59DEE18F 		.word	-1881022887
 755 0824 1BA5AF42 		.word	1118807323
ARM GAS  /tmp/ccvLzxWr.s 			page 14


 756 0828 7B4ECD60 		.word	1624067707
 757 082c EB622290 		.word	-1876794645
 758 0830 2CEFF0C7 		.word	-940511444
 759 0834 8DD257A1 		.word	-1588079987
 760 0838 3DA766B0 		.word	-1335449795
 761 083c 75311148 		.word	1209086325
 762 0840 9677F8E3 		.word	-470255722
 763 0844 46E9ABD0 		.word	-794039994
 764 0848 9E5333D8 		.word	-667724898
 765 084c 1F374A5F 		.word	1598699295
 766 0850 85F69C9A 		.word	-1700989307
 767 0854 C1D6C544 		.word	1153816257
 768 0858 2059DEE1 		.word	-505521888
 769 085c 8F1BA5AF 		.word	-1348134001
 770 0860 427B4ECD 		.word	-850494654
 771 0864 60EB6222 		.word	576908128
 772 0868 902CEFF0 		.word	-252760944
 773 086c C78DD257 		.word	1473416647
 774 0870 A13DA766 		.word	1722236321
 775 0874 B0753111 		.word	288454064
 776 0878 489677F8 		.word	-126380472
 777              		.comm	rr,5,4
 778              		.global	compile_info
 779              		.align	2
 782              	compile_info:
 783 087c 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Mon Oct 31 22:4"
 783      746F6F74 
 783      68203230 
 783      31352D31 
 783      302D5231 
 784 08af 343A3337 		.ascii	"4:37 KST 2016\000"
 784      204B5354 
 784      20323031 
 784      3600
 785              		.comm	first_ts,4,4
 786              		.comm	second_ts,4,4
 787              		.comm	diff_ts,4,4
 788              		.comm	clkn,4,4
 789              		.global	hop_mode
 790              		.bss
 793              	hop_mode:
 794 0000 00       		.space	1
 795              		.global	do_hop
 798              	do_hop:
 799 0001 00       		.space	1
 800              		.global	cs_no_squelch
 803              	cs_no_squelch:
 804 0002 00       		.space	1
 805              		.global	cs_threshold_req
 806              		.data
 809              	cs_threshold_req:
 810 0004 88       		.byte	-120
 811              		.global	cs_threshold_cur
 814              	cs_threshold_cur:
 815 0005 88       		.byte	-120
 816              		.comm	cs_trigger,1,1
 817              		.comm	keepalive_trigger,1,1
ARM GAS  /tmp/ccvLzxWr.s 			page 15


 818              		.comm	cs_timestamp,4,4
 819              		.global	hop_direct_channel
 820              		.bss
 821 0003 00       		.align	1
 824              	hop_direct_channel:
 825 0004 0000     		.space	2
 826              		.global	clock_trim
 827 0006 0000     		.align	2
 830              	clock_trim:
 831 0008 00000000 		.space	4
 832              		.comm	idle_buf_clkn_high,4,4
 833              		.comm	active_buf_clkn_high,4,4
 834              		.comm	idle_buf_clk100ns,4,4
 835              		.comm	active_buf_clk100ns,4,4
 836              		.global	idle_buf_channel
 837              		.align	1
 840              	idle_buf_channel:
 841 000c 0000     		.space	2
 842              		.global	active_buf_channel
 843              		.align	1
 846              	active_buf_channel:
 847 000e 0000     		.space	2
 848              		.global	slave_mac_address
 849              		.align	2
 852              	slave_mac_address:
 853 0010 00000000 		.space	6
 853      0000
 854              		.comm	rxbuf1,50,4
 855              		.comm	rxbuf2,50,4
 856              		.global	active_rxbuf
 857              		.data
 858 0006 0000     		.align	2
 861              	active_rxbuf:
 862 0008 00000000 		.word	rxbuf1
 863              		.global	idle_rxbuf
 864              		.align	2
 867              	idle_rxbuf:
 868 000c 00000000 		.word	rxbuf2
 869              		.global	le
 870              		.align	2
 873              	le:
 874 0010 D6BE898E 		.word	-1903575338
 875 0014 7D6B     		.short	27517
 876 0016 7191     		.short	-28303
 877 0018 55555500 		.word	5592405
 878 001c AAAAAA00 		.word	11184810
 879 0020 01000000 		.word	1
 880 0024 00       		.byte	0
 881 0025 000000   		.space	3
 882 0028 00000000 		.word	0
 883 002c 00000000 		.space	32
 883      00000000 
 883      00000000 
 883      00000000 
 883      00000000 
 884 004c 00000000 		.word	0
 885 0050 00000000 		.word	0
ARM GAS  /tmp/ccvLzxWr.s 			page 16


 886              		.comm	le_promisc,264,4
 887              		.global	le_jam_count
 888              		.bss
 889 0016 0000     		.align	2
 892              	le_jam_count:
 893 0018 00000000 		.space	4
 894              		.global	data_cb
 895              		.align	2
 898              	data_cb:
 899 001c 00000000 		.space	4
 900              		.global	packet_cb
 901              		.align	2
 904              	packet_cb:
 905 0020 00000000 		.space	4
 906              		.global	rssi_iir
 907              		.align	2
 910              	rssi_iir:
 911 0024 00000000 		.space	158
 911      00000000 
 911      00000000 
 911      00000000 
 911      00000000 
 912              		.comm	unpacked,800,4
 913              		.global	mode
 916              	mode:
 917 00c2 00       		.space	1
 918              		.global	requested_mode
 921              	requested_mode:
 922 00c3 00       		.space	1
 923              		.global	jam_mode
 926              	jam_mode:
 927 00c4 00       		.space	1
 928              		.global	ego_mode
 931              	ego_mode:
 932 00c5 00       		.space	1
 933              		.global	modulation
 936              	modulation:
 937 00c6 00       		.space	1
 938              		.global	channel
 939              		.data
 940              		.align	1
 943              	channel:
 944 0054 6209     		.short	2402
 945              		.global	requested_channel
 946              		.bss
 947 00c7 00       		.align	1
 950              	requested_channel:
 951 00c8 0000     		.space	2
 952              		.global	saved_request
 953              		.align	1
 956              	saved_request:
 957 00ca 0000     		.space	2
 958              		.global	low_freq
 959              		.data
 960              		.align	1
 963              	low_freq:
 964 0056 6009     		.short	2400
ARM GAS  /tmp/ccvLzxWr.s 			page 17


 965              		.global	high_freq
 966              		.align	1
 969              	high_freq:
 970 0058 B309     		.short	2483
 971              		.global	rssi_threshold
 974              	rssi_threshold:
 975 005a E2       		.byte	-30
 976              		.comm	rx_dma_lli1,16,4
 977              		.comm	rx_dma_lli2,16,4
 978              		.comm	le_dma_lli,176,4
 979              		.comm	rx_tc,4,4
 980              		.comm	rx_err,4,4
 981              		.global	status
 982              		.bss
 985              	status:
 986 00cc 00       		.space	1
 987              		.comm	rssi_max,1,1
 988              		.comm	rssi_min,1,1
 989              		.global	rssi_count
 992              	rssi_count:
 993 00cd 00       		.space	1
 994              		.global	rssi_sum
 995 00ce 0000     		.align	2
 998              	rssi_sum:
 999 00d0 00000000 		.space	4
 1000              		.comm	rssi_avg,1,1
 1001              		.comm	freq_avg,1,1
 1002              		.section	.text.rssi_reset,"ax",%progbits
 1003              		.align	2
 1004              		.thumb
 1005              		.thumb_func
 1007              	rssi_reset:
 1008              	.LFB0:
 1009              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
ARM GAS  /tmp/ccvLzxWr.s 			page 18


  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** u32 first_ts, second_ts, diff_ts;
  50:bluetooth_rxtx.c **** 
  51:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  52:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  53:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  54:bluetooth_rxtx.c **** 
  55:bluetooth_rxtx.c **** #define HOP_NONE      0
  56:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  57:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  58:bluetooth_rxtx.c **** #define HOP_BTLE      3
  59:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  60:bluetooth_rxtx.c **** 
  61:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  62:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  63:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  64:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  65:bluetooth_rxtx.c **** 
  66:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  67:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  68:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  69:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  70:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  71:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  72:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  73:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  74:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  75:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  76:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  77:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  78:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  79:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  80:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
ARM GAS  /tmp/ccvLzxWr.s 			page 19


  81:bluetooth_rxtx.c **** 
  82:bluetooth_rxtx.c **** /* DMA buffers */
  83:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  84:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  85:bluetooth_rxtx.c **** 
  86:bluetooth_rxtx.c **** /*
  87:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  88:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  89:bluetooth_rxtx.c ****  */
  90:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  91:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  92:bluetooth_rxtx.c **** 
  93:bluetooth_rxtx.c **** le_state_t le = {
  94:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  95:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  96:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  97:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  98:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
  99:bluetooth_rxtx.c **** 	.crc_verify = 1,
 100:bluetooth_rxtx.c **** 
 101:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 102:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 103:bluetooth_rxtx.c **** 	.target_set = 0,
 104:bluetooth_rxtx.c **** 	.last_packet = 0,
 105:bluetooth_rxtx.c **** };
 106:bluetooth_rxtx.c **** 
 107:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 108:bluetooth_rxtx.c **** 	u32 aa;
 109:bluetooth_rxtx.c **** 	int count;
 110:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 111:bluetooth_rxtx.c **** 
 112:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 113:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 114:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 115:bluetooth_rxtx.c **** 
 116:bluetooth_rxtx.c **** 	// recovering hop interval
 117:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 118:bluetooth_rxtx.c **** 	int consec_intervals;
 119:bluetooth_rxtx.c **** } le_promisc_state_t;
 120:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 121:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 122:bluetooth_rxtx.c **** 
 123:bluetooth_rxtx.c **** /* LE jamming */
 124:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 125:bluetooth_rxtx.c **** int le_jam_count = 0;
 126:bluetooth_rxtx.c **** 
 127:bluetooth_rxtx.c **** /* set LE access address */
 128:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 129:bluetooth_rxtx.c **** 
 130:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 131:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 132:bluetooth_rxtx.c **** 
 133:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 134:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 135:bluetooth_rxtx.c **** 
 136:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 137:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
ARM GAS  /tmp/ccvLzxWr.s 			page 20


 138:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 139:bluetooth_rxtx.c **** 
 140:bluetooth_rxtx.c **** /*
 141:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 142:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 143:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 144:bluetooth_rxtx.c **** */
 145:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 146:bluetooth_rxtx.c **** 
 147:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 148:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 149:bluetooth_rxtx.c **** 
 150:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 151:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 152:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 153:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 154:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 155:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 156:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 157:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 158:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 159:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 160:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 161:bluetooth_rxtx.c **** 
 162:bluetooth_rxtx.c **** /* DMA linked list items */
 163:bluetooth_rxtx.c **** typedef struct {
 164:bluetooth_rxtx.c **** 	u32 src;
 165:bluetooth_rxtx.c **** 	u32 dest;
 166:bluetooth_rxtx.c **** 	u32 next_lli;
 167:bluetooth_rxtx.c **** 	u32 control;
 168:bluetooth_rxtx.c **** } dma_lli;
 169:bluetooth_rxtx.c **** 
 170:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 171:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 174:bluetooth_rxtx.c **** 
 175:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 176:bluetooth_rxtx.c **** volatile u32 rx_tc;
 177:bluetooth_rxtx.c **** volatile u32 rx_err;
 178:bluetooth_rxtx.c **** 
 179:bluetooth_rxtx.c **** /* status information byte */
 180:bluetooth_rxtx.c **** volatile u8 status = 0;
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 183:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 184:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 185:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 186:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 187:bluetooth_rxtx.c **** 
 188:bluetooth_rxtx.c **** /*
 189:bluetooth_rxtx.c ****  * RSSI
 190:bluetooth_rxtx.c ****  */
 191:bluetooth_rxtx.c **** int8_t rssi_max;
 192:bluetooth_rxtx.c **** int8_t rssi_min;
 193:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 194:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
ARM GAS  /tmp/ccvLzxWr.s 			page 21


 195:bluetooth_rxtx.c **** int8_t rssi_avg;
 196:bluetooth_rxtx.c **** int8_t freq_avg;
 197:bluetooth_rxtx.c **** 
 198:bluetooth_rxtx.c **** static void rssi_reset(void)
 199:bluetooth_rxtx.c **** {
 1010              		.loc 1 199 0
 1011              		.cfi_startproc
 1012              		@ args = 0, pretend = 0, frame = 0
 1013              		@ frame_needed = 1, uses_anonymous_args = 0
 1014              		@ link register save eliminated.
 1015 0000 80B4     		push	{r7}
 1016              		.cfi_def_cfa_offset 4
 1017              		.cfi_offset 7, -4
 1018 0002 00AF     		add	r7, sp, #0
 1019              		.cfi_def_cfa_register 7
 200:bluetooth_rxtx.c **** 	rssi_count = 0;
 1020              		.loc 1 200 0
 1021 0004 074B     		ldr	r3, .L2
 1022 0006 0022     		movs	r2, #0
 1023 0008 1A70     		strb	r2, [r3]
 201:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1024              		.loc 1 201 0
 1025 000a 074B     		ldr	r3, .L2+4
 1026 000c 0022     		movs	r2, #0
 1027 000e 1A60     		str	r2, [r3]
 202:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1028              		.loc 1 202 0
 1029 0010 064B     		ldr	r3, .L2+8
 1030 0012 8022     		movs	r2, #128
 1031 0014 1A70     		strb	r2, [r3]
 203:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1032              		.loc 1 203 0
 1033 0016 064B     		ldr	r3, .L2+12
 1034 0018 7F22     		movs	r2, #127
 1035 001a 1A70     		strb	r2, [r3]
 204:bluetooth_rxtx.c **** }
 1036              		.loc 1 204 0
 1037 001c BD46     		mov	sp, r7
 1038              		.cfi_def_cfa_register 13
 1039              		@ sp needed
 1040 001e 5DF8047B 		ldr	r7, [sp], #4
 1041              		.cfi_restore 7
 1042              		.cfi_def_cfa_offset 0
 1043 0022 7047     		bx	lr
 1044              	.L3:
 1045              		.align	2
 1046              	.L2:
 1047 0024 00000000 		.word	rssi_count
 1048 0028 00000000 		.word	rssi_sum
 1049 002c 00000000 		.word	rssi_max
 1050 0030 00000000 		.word	rssi_min
 1051              		.cfi_endproc
 1052              	.LFE0:
 1054              		.section	.text.rssi_add,"ax",%progbits
 1055              		.align	2
 1056              		.thumb
 1057              		.thumb_func
ARM GAS  /tmp/ccvLzxWr.s 			page 22


 1059              	rssi_add:
 1060              	.LFB1:
 205:bluetooth_rxtx.c **** 
 206:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 207:bluetooth_rxtx.c **** {
 1061              		.loc 1 207 0
 1062              		.cfi_startproc
 1063              		@ args = 0, pretend = 0, frame = 8
 1064              		@ frame_needed = 1, uses_anonymous_args = 0
 1065              		@ link register save eliminated.
 1066 0000 80B4     		push	{r7}
 1067              		.cfi_def_cfa_offset 4
 1068              		.cfi_offset 7, -4
 1069 0002 83B0     		sub	sp, sp, #12
 1070              		.cfi_def_cfa_offset 16
 1071 0004 00AF     		add	r7, sp, #0
 1072              		.cfi_def_cfa_register 7
 1073 0006 0346     		mov	r3, r0
 1074 0008 FB71     		strb	r3, [r7, #7]
 208:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1075              		.loc 1 208 0
 1076 000a 144B     		ldr	r3, .L5
 1077 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1078 000e 5AB2     		sxtb	r2, r3
 1079 0010 97F90730 		ldrsb	r3, [r7, #7]
 1080 0014 9342     		cmp	r3, r2
 1081 0016 B8BF     		it	lt
 1082 0018 1346     		movlt	r3, r2
 1083 001a DAB2     		uxtb	r2, r3
 1084 001c 0F4B     		ldr	r3, .L5
 1085 001e 1A70     		strb	r2, [r3]
 209:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1086              		.loc 1 209 0
 1087 0020 0F4B     		ldr	r3, .L5+4
 1088 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1089 0024 5AB2     		sxtb	r2, r3
 1090 0026 97F90730 		ldrsb	r3, [r7, #7]
 1091 002a 9342     		cmp	r3, r2
 1092 002c A8BF     		it	ge
 1093 002e 1346     		movge	r3, r2
 1094 0030 DAB2     		uxtb	r2, r3
 1095 0032 0B4B     		ldr	r3, .L5+4
 1096 0034 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1097              		.loc 1 210 0
 1098 0036 97F90730 		ldrsb	r3, [r7, #7]
 1099 003a 1A02     		lsls	r2, r3, #8
 1100 003c 094B     		ldr	r3, .L5+8
 1101 003e 1B68     		ldr	r3, [r3]
 1102 0040 1344     		add	r3, r3, r2
 1103 0042 084A     		ldr	r2, .L5+8
 1104 0044 1360     		str	r3, [r2]
 211:bluetooth_rxtx.c **** 	rssi_count += 1;
 1105              		.loc 1 211 0
 1106 0046 084B     		ldr	r3, .L5+12
 1107 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1108 004a 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccvLzxWr.s 			page 23


 1109 004c DAB2     		uxtb	r2, r3
 1110 004e 064B     		ldr	r3, .L5+12
 1111 0050 1A70     		strb	r2, [r3]
 212:bluetooth_rxtx.c **** }
 1112              		.loc 1 212 0
 1113 0052 0C37     		adds	r7, r7, #12
 1114              		.cfi_def_cfa_offset 4
 1115 0054 BD46     		mov	sp, r7
 1116              		.cfi_def_cfa_register 13
 1117              		@ sp needed
 1118 0056 5DF8047B 		ldr	r7, [sp], #4
 1119              		.cfi_restore 7
 1120              		.cfi_def_cfa_offset 0
 1121 005a 7047     		bx	lr
 1122              	.L6:
 1123              		.align	2
 1124              	.L5:
 1125 005c 00000000 		.word	rssi_max
 1126 0060 00000000 		.word	rssi_min
 1127 0064 00000000 		.word	rssi_sum
 1128 0068 00000000 		.word	rssi_count
 1129              		.cfi_endproc
 1130              	.LFE1:
 1132              		.section	.text.rssi_iir_update,"ax",%progbits
 1133              		.align	2
 1134              		.thumb
 1135              		.thumb_func
 1137              	rssi_iir_update:
 1138              	.LFB2:
 213:bluetooth_rxtx.c **** 
 214:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 215:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 216:bluetooth_rxtx.c **** {
 1139              		.loc 1 216 0
 1140              		.cfi_startproc
 1141              		@ args = 0, pretend = 0, frame = 16
 1142              		@ frame_needed = 1, uses_anonymous_args = 0
 1143              		@ link register save eliminated.
 1144 0000 80B4     		push	{r7}
 1145              		.cfi_def_cfa_offset 4
 1146              		.cfi_offset 7, -4
 1147 0002 85B0     		sub	sp, sp, #20
 1148              		.cfi_def_cfa_offset 24
 1149 0004 00AF     		add	r7, sp, #0
 1150              		.cfi_def_cfa_register 7
 217:bluetooth_rxtx.c **** 	int i;
 218:bluetooth_rxtx.c **** 	int32_t avg;
 219:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 220:bluetooth_rxtx.c **** 
 221:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 222:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 223:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1151              		.loc 1 223 0
 1152 0006 1F4B     		ldr	r3, .L13
 1153 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1154 000a 002B     		cmp	r3, #0
 1155 000c 06D0     		beq	.L8
ARM GAS  /tmp/ccvLzxWr.s 			page 24


 224:bluetooth_rxtx.c **** 		i = channel - 2402;
 1156              		.loc 1 224 0
 1157 000e 1E4B     		ldr	r3, .L13+4
 1158 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1159 0012 9BB2     		uxth	r3, r3
 1160 0014 A3F66213 		subw	r3, r3, #2402
 1161 0018 FB60     		str	r3, [r7, #12]
 1162 001a 01E0     		b	.L9
 1163              	.L8:
 225:bluetooth_rxtx.c **** 	else
 226:bluetooth_rxtx.c **** 		i = 0;
 1164              		.loc 1 226 0
 1165 001c 0023     		movs	r3, #0
 1166 001e FB60     		str	r3, [r7, #12]
 1167              	.L9:
 227:bluetooth_rxtx.c **** 
 228:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 229:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1168              		.loc 1 229 0
 1169 0020 1A4B     		ldr	r3, .L13+8
 1170 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1171 0024 002B     		cmp	r3, #0
 1172 0026 08D0     		beq	.L10
 230:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1173              		.loc 1 230 0
 1174 0028 194B     		ldr	r3, .L13+12
 1175 002a 1B68     		ldr	r3, [r3]
 1176 002c 8033     		adds	r3, r3, #128
 1177 002e 174A     		ldr	r2, .L13+8
 1178 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1179 0032 93FBF2F3 		sdiv	r3, r3, r2
 1180 0036 BB60     		str	r3, [r7, #8]
 1181 0038 01E0     		b	.L11
 1182              	.L10:
 231:bluetooth_rxtx.c **** 	else
 232:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1183              		.loc 1 232 0
 1184 003a 0023     		movs	r3, #0
 1185 003c BB60     		str	r3, [r7, #8]
 1186              	.L11:
 233:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1187              		.loc 1 233 0
 1188 003e 154A     		ldr	r2, .L13+16
 1189 0040 FB68     		ldr	r3, [r7, #12]
 1190 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1191 0046 1AB2     		sxth	r2, r3
 1192 0048 1346     		mov	r3, r2
 1193 004a 9B01     		lsls	r3, r3, #6
 1194 004c 9B1A     		subs	r3, r3, r2
 1195 004e 9B00     		lsls	r3, r3, #2
 1196 0050 1344     		add	r3, r3, r2
 1197 0052 7B60     		str	r3, [r7, #4]
 234:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1198              		.loc 1 234 0
 1199 0054 BA68     		ldr	r2, [r7, #8]
 1200 0056 1346     		mov	r3, r2
 1201 0058 5B00     		lsls	r3, r3, #1
ARM GAS  /tmp/ccvLzxWr.s 			page 25


 1202 005a 1344     		add	r3, r3, r2
 1203 005c 7A68     		ldr	r2, [r7, #4]
 1204 005e 1344     		add	r3, r3, r2
 1205 0060 7B60     		str	r3, [r7, #4]
 235:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1206              		.loc 1 235 0
 1207 0062 7B68     		ldr	r3, [r7, #4]
 1208 0064 8033     		adds	r3, r3, #128
 1209 0066 002B     		cmp	r3, #0
 1210 0068 00DA     		bge	.L12
 1211 006a FF33     		adds	r3, r3, #255
 1212              	.L12:
 1213 006c 1B12     		asrs	r3, r3, #8
 1214 006e 99B2     		uxth	r1, r3
 1215 0070 084A     		ldr	r2, .L13+16
 1216 0072 FB68     		ldr	r3, [r7, #12]
 1217 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 236:bluetooth_rxtx.c **** }
 1218              		.loc 1 236 0
 1219 0078 1437     		adds	r7, r7, #20
 1220              		.cfi_def_cfa_offset 4
 1221 007a BD46     		mov	sp, r7
 1222              		.cfi_def_cfa_register 13
 1223              		@ sp needed
 1224 007c 5DF8047B 		ldr	r7, [sp], #4
 1225              		.cfi_restore 7
 1226              		.cfi_def_cfa_offset 0
 1227 0080 7047     		bx	lr
 1228              	.L14:
 1229 0082 00BF     		.align	2
 1230              	.L13:
 1231 0084 00000000 		.word	hop_mode
 1232 0088 00000000 		.word	channel
 1233 008c 00000000 		.word	rssi_count
 1234 0090 00000000 		.word	rssi_sum
 1235 0094 00000000 		.word	rssi_iir
 1236              		.cfi_endproc
 1237              	.LFE2:
 1239              		.section	.text.cs_threshold_set,"ax",%progbits
 1240              		.align	2
 1241              		.thumb
 1242              		.thumb_func
 1244              	cs_threshold_set:
 1245              	.LFB3:
 237:bluetooth_rxtx.c **** 
 238:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 239:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 240:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 241:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 242:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 243:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 244:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 245:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 246:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 247:bluetooth_rxtx.c **** {
 1246              		.loc 1 247 0
 1247              		.cfi_startproc
ARM GAS  /tmp/ccvLzxWr.s 			page 26


 1248              		@ args = 0, pretend = 0, frame = 8
 1249              		@ frame_needed = 1, uses_anonymous_args = 0
 1250 0000 80B5     		push	{r7, lr}
 1251              		.cfi_def_cfa_offset 8
 1252              		.cfi_offset 7, -8
 1253              		.cfi_offset 14, -4
 1254 0002 82B0     		sub	sp, sp, #8
 1255              		.cfi_def_cfa_offset 16
 1256 0004 00AF     		add	r7, sp, #0
 1257              		.cfi_def_cfa_register 7
 1258 0006 0346     		mov	r3, r0
 1259 0008 0A46     		mov	r2, r1
 1260 000a FB71     		strb	r3, [r7, #7]
 1261 000c 1346     		mov	r3, r2
 1262 000e BB71     		strb	r3, [r7, #6]
 248:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1263              		.loc 1 248 0
 1264 0010 97F90730 		ldrsb	r3, [r7, #7]
 1265 0014 13F1140F 		cmn	r3, #20
 1266 0018 0DD0     		beq	.L16
 1267              		.loc 1 248 0 is_stmt 0 discriminator 1
 1268 001a 97F90730 		ldrsb	r3, [r7, #7]
 1269 001e 13F1130F 		cmn	r3, #19
 1270 0022 08DA     		bge	.L16
 1271              		.loc 1 248 0 discriminator 3
 1272 0024 97F90730 		ldrsb	r3, [r7, #7]
 1273 0028 6FF07702 		mvn	r2, #119
 1274 002c 9342     		cmp	r3, r2
 1275 002e B8BF     		it	lt
 1276 0030 1346     		movlt	r3, r2
 1277 0032 DBB2     		uxtb	r3, r3
 1278 0034 00E0     		b	.L17
 1279              	.L16:
 1280              		.loc 1 248 0 discriminator 4
 1281 0036 EC23     		movs	r3, #236
 1282              	.L17:
 1283              		.loc 1 248 0 discriminator 6
 1284 0038 FB71     		strb	r3, [r7, #7]
 249:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1285              		.loc 1 249 0 is_stmt 1 discriminator 6
 1286 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1287 003c 3833     		adds	r3, r3, #56
 1288 003e DBB2     		uxtb	r3, r3
 1289 0040 9BB2     		uxth	r3, r3
 1290 0042 03F0FC03 		and	r3, r3, #252
 1291 0046 9AB2     		uxth	r2, r3
 1292 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1293 004a 9BB2     		uxth	r3, r3
 1294 004c 03F00303 		and	r3, r3, #3
 1295 0050 9BB2     		uxth	r3, r3
 1296 0052 1343     		orrs	r3, r3, r2
 1297 0054 9BB2     		uxth	r3, r3
 1298 0056 9BB2     		uxth	r3, r3
 1299 0058 0620     		movs	r0, #6
 1300 005a 1946     		mov	r1, r3
 1301 005c FFF7FEFF 		bl	cc2400_set
 250:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
ARM GAS  /tmp/ccvLzxWr.s 			page 27


 1302              		.loc 1 250 0 discriminator 6
 1303 0060 084A     		ldr	r2, .L18
 1304 0062 FB79     		ldrb	r3, [r7, #7]
 1305 0064 1370     		strb	r3, [r2]
 251:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1306              		.loc 1 251 0 discriminator 6
 1307 0066 97F90730 		ldrsb	r3, [r7, #7]
 1308 006a 13F1770F 		cmn	r3, #119
 1309 006e B4BF     		ite	lt
 1310 0070 0123     		movlt	r3, #1
 1311 0072 0023     		movge	r3, #0
 1312 0074 DBB2     		uxtb	r3, r3
 1313 0076 1A46     		mov	r2, r3
 1314 0078 034B     		ldr	r3, .L18+4
 1315 007a 1A70     		strb	r2, [r3]
 252:bluetooth_rxtx.c **** }
 1316              		.loc 1 252 0 discriminator 6
 1317 007c 0837     		adds	r7, r7, #8
 1318              		.cfi_def_cfa_offset 8
 1319 007e BD46     		mov	sp, r7
 1320              		.cfi_def_cfa_register 13
 1321              		@ sp needed
 1322 0080 80BD     		pop	{r7, pc}
 1323              	.L19:
 1324 0082 00BF     		.align	2
 1325              	.L18:
 1326 0084 00000000 		.word	cs_threshold_cur
 1327 0088 00000000 		.word	cs_no_squelch
 1328              		.cfi_endproc
 1329              	.LFE3:
 1331              		.section	.text.enqueue,"ax",%progbits
 1332              		.align	2
 1333              		.thumb
 1334              		.thumb_func
 1336              	enqueue:
 1337              	.LFB4:
 253:bluetooth_rxtx.c **** 
 254:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 255:bluetooth_rxtx.c **** {
 1338              		.loc 1 255 0
 1339              		.cfi_startproc
 1340              		@ args = 0, pretend = 0, frame = 32
 1341              		@ frame_needed = 1, uses_anonymous_args = 0
 1342 0000 80B5     		push	{r7, lr}
 1343              		.cfi_def_cfa_offset 8
 1344              		.cfi_offset 7, -8
 1345              		.cfi_offset 14, -4
 1346 0002 88B0     		sub	sp, sp, #32
 1347              		.cfi_def_cfa_offset 40
 1348 0004 00AF     		add	r7, sp, #0
 1349              		.cfi_def_cfa_register 7
 1350 0006 0346     		mov	r3, r0
 1351 0008 3960     		str	r1, [r7]
 1352 000a FB71     		strb	r3, [r7, #7]
 256:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1353              		.loc 1 256 0
 1354 000c FFF7FEFF 		bl	usb_enqueue
ARM GAS  /tmp/ccvLzxWr.s 			page 28


 1355 0010 F861     		str	r0, [r7, #28]
 257:bluetooth_rxtx.c **** 
 258:bluetooth_rxtx.c **** 	/* fail if queue is full */
 259:bluetooth_rxtx.c **** 	if (f == NULL) {
 1356              		.loc 1 259 0
 1357 0012 FB69     		ldr	r3, [r7, #28]
 1358 0014 002B     		cmp	r3, #0
 1359 0016 09D1     		bne	.L21
 260:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1360              		.loc 1 260 0
 1361 0018 474B     		ldr	r3, .L25
 1362 001a 1B78     		ldrb	r3, [r3]
 1363 001c DBB2     		uxtb	r3, r3
 1364 001e 43F00403 		orr	r3, r3, #4
 1365 0022 DAB2     		uxtb	r2, r3
 1366 0024 444B     		ldr	r3, .L25
 1367 0026 1A70     		strb	r2, [r3]
 261:bluetooth_rxtx.c **** 		return 0;
 1368              		.loc 1 261 0
 1369 0028 0023     		movs	r3, #0
 1370 002a 80E0     		b	.L22
 1371              	.L21:
 262:bluetooth_rxtx.c **** 	}
 263:bluetooth_rxtx.c **** 
 264:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1372              		.loc 1 264 0
 1373 002c FB69     		ldr	r3, [r7, #28]
 1374 002e FA79     		ldrb	r2, [r7, #7]
 1375 0030 1A70     		strb	r2, [r3]
 265:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1376              		.loc 1 265 0
 1377 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1378 0034 042B     		cmp	r3, #4
 1379 0036 13D1     		bne	.L23
 266:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1380              		.loc 1 266 0
 1381 0038 404B     		ldr	r3, .L25+4
 1382 003a 1B68     		ldr	r3, [r3]
 1383 003c 1B0D     		lsrs	r3, r3, #20
 1384 003e DAB2     		uxtb	r2, r3
 1385 0040 FB69     		ldr	r3, [r7, #28]
 1386 0042 DA70     		strb	r2, [r3, #3]
 267:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1387              		.loc 1 267 0
 1388 0044 3D4B     		ldr	r3, .L25+4
 1389 0046 1B68     		ldr	r3, [r3]
 1390 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1391 004c 40F63542 		movw	r2, #3125
 1392 0050 02FB03F2 		mul	r2, r2, r3
 1393 0054 3A4B     		ldr	r3, .L25+8
 1394 0056 1B68     		ldr	r3, [r3]
 1395 0058 1A44     		add	r2, r2, r3
 1396 005a FB69     		ldr	r3, [r7, #28]
 1397 005c 5A60     		str	r2, [r3, #4]
 1398 005e 08E0     		b	.L24
 1399              	.L23:
 268:bluetooth_rxtx.c **** 	} else {
ARM GAS  /tmp/ccvLzxWr.s 			page 29


 269:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1400              		.loc 1 269 0
 1401 0060 384B     		ldr	r3, .L25+12
 1402 0062 1B68     		ldr	r3, [r3]
 1403 0064 DAB2     		uxtb	r2, r3
 1404 0066 FB69     		ldr	r3, [r7, #28]
 1405 0068 DA70     		strb	r2, [r3, #3]
 270:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1406              		.loc 1 270 0
 1407 006a 374B     		ldr	r3, .L25+16
 1408 006c 1A68     		ldr	r2, [r3]
 1409 006e FB69     		ldr	r3, [r7, #28]
 1410 0070 5A60     		str	r2, [r3, #4]
 1411              	.L24:
 271:bluetooth_rxtx.c **** 	}
 272:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1412              		.loc 1 272 0
 1413 0072 364B     		ldr	r3, .L25+20
 1414 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1415 0076 9BB2     		uxth	r3, r3
 1416 0078 DBB2     		uxtb	r3, r3
 1417 007a 623B     		subs	r3, r3, #98
 1418 007c DAB2     		uxtb	r2, r3
 1419 007e FB69     		ldr	r3, [r7, #28]
 1420 0080 9A70     		strb	r2, [r3, #2]
 273:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 274:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 275:bluetooth_rxtx.c **** /*	if (hop_mode != HOP_NONE)
 276:bluetooth_rxtx.c **** 	//	f->rssi_avg = (int8_t)((rssi_iir[idle_buf_channel-2402] + 128)/256);
 277:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_sum/rssi_count;
 278:bluetooth_rxtx.c **** 	else
 279:bluetooth_rxtx.c **** 		//f->rssi_avg = (int8_t)((rssi_iir[0] + 128)/256);
 280:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_sum/rssi_count;
 281:bluetooth_rxtx.c **** 	f->rssi_count = rssi_count;
 282:bluetooth_rxtx.c **** */
 283:bluetooth_rxtx.c **** 	USRLED_SET;
 1421              		.loc 1 283 0
 1422 0082 334B     		ldr	r3, .L25+24
 1423 0084 0222     		movs	r2, #2
 1424 0086 1A60     		str	r2, [r3]
 284:bluetooth_rxtx.c **** 
 285:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 286:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1425              		.loc 1 286 0
 1426 0088 FB69     		ldr	r3, [r7, #28]
 1427 008a 0E33     		adds	r3, r3, #14
 1428 008c BB61     		str	r3, [r7, #24]
 287:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1429              		.loc 1 287 0
 1430 008e 3B68     		ldr	r3, [r7]
 1431 0090 7B61     		str	r3, [r7, #20]
 288:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1432              		.loc 1 288 0
 1433 0092 7B69     		ldr	r3, [r7, #20]
 1434 0094 1A68     		ldr	r2, [r3]
 1435 0096 BB69     		ldr	r3, [r7, #24]
 1436 0098 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 30


 289:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1437              		.loc 1 289 0
 1438 009a BB69     		ldr	r3, [r7, #24]
 1439 009c 0433     		adds	r3, r3, #4
 1440 009e 7A69     		ldr	r2, [r7, #20]
 1441 00a0 5268     		ldr	r2, [r2, #4]
 1442 00a2 1A60     		str	r2, [r3]
 290:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1443              		.loc 1 290 0
 1444 00a4 BB69     		ldr	r3, [r7, #24]
 1445 00a6 0833     		adds	r3, r3, #8
 1446 00a8 7A69     		ldr	r2, [r7, #20]
 1447 00aa 9268     		ldr	r2, [r2, #8]
 1448 00ac 1A60     		str	r2, [r3]
 291:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1449              		.loc 1 291 0
 1450 00ae BB69     		ldr	r3, [r7, #24]
 1451 00b0 0C33     		adds	r3, r3, #12
 1452 00b2 7A69     		ldr	r2, [r7, #20]
 1453 00b4 D268     		ldr	r2, [r2, #12]
 1454 00b6 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1455              		.loc 1 292 0
 1456 00b8 BB69     		ldr	r3, [r7, #24]
 1457 00ba 1033     		adds	r3, r3, #16
 1458 00bc 7A69     		ldr	r2, [r7, #20]
 1459 00be 1269     		ldr	r2, [r2, #16]
 1460 00c0 1A60     		str	r2, [r3]
 293:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1461              		.loc 1 293 0
 1462 00c2 BB69     		ldr	r3, [r7, #24]
 1463 00c4 1433     		adds	r3, r3, #20
 1464 00c6 7A69     		ldr	r2, [r7, #20]
 1465 00c8 5269     		ldr	r2, [r2, #20]
 1466 00ca 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1467              		.loc 1 294 0
 1468 00cc BB69     		ldr	r3, [r7, #24]
 1469 00ce 1833     		adds	r3, r3, #24
 1470 00d0 7A69     		ldr	r2, [r7, #20]
 1471 00d2 9269     		ldr	r2, [r2, #24]
 1472 00d4 1A60     		str	r2, [r3]
 295:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1473              		.loc 1 295 0
 1474 00d6 BB69     		ldr	r3, [r7, #24]
 1475 00d8 1C33     		adds	r3, r3, #28
 1476 00da 7A69     		ldr	r2, [r7, #20]
 1477 00dc D269     		ldr	r2, [r2, #28]
 1478 00de 1A60     		str	r2, [r3]
 296:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1479              		.loc 1 296 0
 1480 00e0 BB69     		ldr	r3, [r7, #24]
 1481 00e2 2033     		adds	r3, r3, #32
 1482 00e4 7A69     		ldr	r2, [r7, #20]
 1483 00e6 126A     		ldr	r2, [r2, #32]
 1484 00e8 1A60     		str	r2, [r3]
 297:bluetooth_rxtx.c **** 	p1[9] = p2[9];
ARM GAS  /tmp/ccvLzxWr.s 			page 31


 1485              		.loc 1 297 0
 1486 00ea BB69     		ldr	r3, [r7, #24]
 1487 00ec 2433     		adds	r3, r3, #36
 1488 00ee 7A69     		ldr	r2, [r7, #20]
 1489 00f0 526A     		ldr	r2, [r2, #36]
 1490 00f2 1A60     		str	r2, [r3]
 298:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1491              		.loc 1 298 0
 1492 00f4 BB69     		ldr	r3, [r7, #24]
 1493 00f6 2833     		adds	r3, r3, #40
 1494 00f8 7A69     		ldr	r2, [r7, #20]
 1495 00fa 926A     		ldr	r2, [r2, #40]
 1496 00fc 1A60     		str	r2, [r3]
 299:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1497              		.loc 1 299 0
 1498 00fe BB69     		ldr	r3, [r7, #24]
 1499 0100 2C33     		adds	r3, r3, #44
 1500 0102 7A69     		ldr	r2, [r7, #20]
 1501 0104 D26A     		ldr	r2, [r2, #44]
 1502 0106 1A60     		str	r2, [r3]
 300:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 301:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1503              		.loc 1 301 0
 1504 0108 FB69     		ldr	r3, [r7, #28]
 1505 010a 0E33     		adds	r3, r3, #14
 1506 010c 3B61     		str	r3, [r7, #16]
 302:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1507              		.loc 1 302 0
 1508 010e 3B68     		ldr	r3, [r7]
 1509 0110 FB60     		str	r3, [r7, #12]
 303:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1510              		.loc 1 303 0
 1511 0112 3B69     		ldr	r3, [r7, #16]
 1512 0114 3033     		adds	r3, r3, #48
 1513 0116 FA68     		ldr	r2, [r7, #12]
 1514 0118 128E     		ldrh	r2, [r2, #48]
 1515 011a 1A80     		strh	r2, [r3]	@ movhi
 304:bluetooth_rxtx.c **** 
 305:bluetooth_rxtx.c **** 	f->status = status;
 1516              		.loc 1 305 0
 1517 011c 064B     		ldr	r3, .L25
 1518 011e 1B78     		ldrb	r3, [r3]
 1519 0120 DAB2     		uxtb	r2, r3
 1520 0122 FB69     		ldr	r3, [r7, #28]
 1521 0124 5A70     		strb	r2, [r3, #1]
 306:bluetooth_rxtx.c **** 	status = 0;
 1522              		.loc 1 306 0
 1523 0126 044B     		ldr	r3, .L25
 1524 0128 0022     		movs	r2, #0
 1525 012a 1A70     		strb	r2, [r3]
 307:bluetooth_rxtx.c **** 
 308:bluetooth_rxtx.c **** 	return 1;
 1526              		.loc 1 308 0
 1527 012c 0123     		movs	r3, #1
 1528              	.L22:
 309:bluetooth_rxtx.c **** }
 1529              		.loc 1 309 0
ARM GAS  /tmp/ccvLzxWr.s 			page 32


 1530 012e 1846     		mov	r0, r3
 1531 0130 2037     		adds	r7, r7, #32
 1532              		.cfi_def_cfa_offset 8
 1533 0132 BD46     		mov	sp, r7
 1534              		.cfi_def_cfa_register 13
 1535              		@ sp needed
 1536 0134 80BD     		pop	{r7, pc}
 1537              	.L26:
 1538 0136 00BF     		.align	2
 1539              	.L25:
 1540 0138 00000000 		.word	status
 1541 013c 00000000 		.word	clkn
 1542 0140 08400040 		.word	1073758216
 1543 0144 00000000 		.word	idle_buf_clkn_high
 1544 0148 00000000 		.word	idle_buf_clk100ns
 1545 014c 00000000 		.word	idle_buf_channel
 1546 0150 38C00920 		.word	537509944
 1547              		.cfi_endproc
 1548              	.LFE4:
 1550              		.section	.text.enqueue_with_ts,"ax",%progbits
 1551              		.align	2
 1552              		.global	enqueue_with_ts
 1553              		.thumb
 1554              		.thumb_func
 1556              	enqueue_with_ts:
 1557              	.LFB5:
 310:bluetooth_rxtx.c **** 
 311:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 312:bluetooth_rxtx.c **** {
 1558              		.loc 1 312 0
 1559              		.cfi_startproc
 1560              		@ args = 0, pretend = 0, frame = 24
 1561              		@ frame_needed = 1, uses_anonymous_args = 0
 1562 0000 80B5     		push	{r7, lr}
 1563              		.cfi_def_cfa_offset 8
 1564              		.cfi_offset 7, -8
 1565              		.cfi_offset 14, -4
 1566 0002 86B0     		sub	sp, sp, #24
 1567              		.cfi_def_cfa_offset 32
 1568 0004 00AF     		add	r7, sp, #0
 1569              		.cfi_def_cfa_register 7
 1570 0006 0346     		mov	r3, r0
 1571 0008 B960     		str	r1, [r7, #8]
 1572 000a 7A60     		str	r2, [r7, #4]
 1573 000c FB73     		strb	r3, [r7, #15]
 313:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1574              		.loc 1 313 0
 1575 000e FFF7FEFF 		bl	usb_enqueue
 1576 0012 7861     		str	r0, [r7, #20]
 314:bluetooth_rxtx.c **** 
 315:bluetooth_rxtx.c **** 	/* fail if queue is full */
 316:bluetooth_rxtx.c **** 	if (f == NULL) {
 1577              		.loc 1 316 0
 1578 0014 7B69     		ldr	r3, [r7, #20]
 1579 0016 002B     		cmp	r3, #0
 1580 0018 09D1     		bne	.L28
 317:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
ARM GAS  /tmp/ccvLzxWr.s 			page 33


 1581              		.loc 1 317 0
 1582 001a 194B     		ldr	r3, .L30
 1583 001c 1B78     		ldrb	r3, [r3]
 1584 001e DBB2     		uxtb	r3, r3
 1585 0020 43F00403 		orr	r3, r3, #4
 1586 0024 DAB2     		uxtb	r2, r3
 1587 0026 164B     		ldr	r3, .L30
 1588 0028 1A70     		strb	r2, [r3]
 318:bluetooth_rxtx.c **** 		return 0;
 1589              		.loc 1 318 0
 1590 002a 0023     		movs	r3, #0
 1591 002c 23E0     		b	.L29
 1592              	.L28:
 319:bluetooth_rxtx.c **** 	}
 320:bluetooth_rxtx.c **** 
 321:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1593              		.loc 1 321 0
 1594 002e 7B69     		ldr	r3, [r7, #20]
 1595 0030 FA7B     		ldrb	r2, [r7, #15]
 1596 0032 1A70     		strb	r2, [r3]
 322:bluetooth_rxtx.c **** //	f->clkn_high = 0;
 323:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1597              		.loc 1 323 0
 1598 0034 7B69     		ldr	r3, [r7, #20]
 1599 0036 7A68     		ldr	r2, [r7, #4]
 1600 0038 5A60     		str	r2, [r3, #4]
 324:bluetooth_rxtx.c **** 
 325:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1601              		.loc 1 325 0
 1602 003a 124B     		ldr	r3, .L30+4
 1603 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1604 003e 9BB2     		uxth	r3, r3
 1605 0040 DBB2     		uxtb	r3, r3
 1606 0042 623B     		subs	r3, r3, #98
 1607 0044 DAB2     		uxtb	r2, r3
 1608 0046 7B69     		ldr	r3, [r7, #20]
 1609 0048 9A70     		strb	r2, [r3, #2]
 326:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 1610              		.loc 1 326 0
 1611 004a 0F4B     		ldr	r3, .L30+8
 1612 004c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1613 004e DAB2     		uxtb	r2, r3
 1614 0050 7B69     		ldr	r3, [r7, #20]
 1615 0052 9A72     		strb	r2, [r3, #10]
 327:bluetooth_rxtx.c **** 	f->rssi_count = freq_avg;
 1616              		.loc 1 327 0
 1617 0054 0D4B     		ldr	r3, .L30+12
 1618 0056 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1619 0058 DAB2     		uxtb	r2, r3
 1620 005a 7B69     		ldr	r3, [r7, #20]
 1621 005c DA72     		strb	r2, [r3, #11]
 328:bluetooth_rxtx.c **** 
 329:bluetooth_rxtx.c **** 	USRLED_SET;
 1622              		.loc 1 329 0
 1623 005e 0C4B     		ldr	r3, .L30+16
 1624 0060 0222     		movs	r2, #2
 1625 0062 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 34


 330:bluetooth_rxtx.c **** 
 331:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 332:bluetooth_rxtx.c **** /*	u32 *p1 = (u32 *)f->data;
 333:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 334:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 335:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 336:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 337:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 338:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 339:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 340:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 341:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 342:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 343:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 344:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 345:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 346:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 347:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 348:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 349:bluetooth_rxtx.c **** */
 350:bluetooth_rxtx.c **** 	f->status = status;
 1626              		.loc 1 350 0
 1627 0064 064B     		ldr	r3, .L30
 1628 0066 1B78     		ldrb	r3, [r3]
 1629 0068 DAB2     		uxtb	r2, r3
 1630 006a 7B69     		ldr	r3, [r7, #20]
 1631 006c 5A70     		strb	r2, [r3, #1]
 351:bluetooth_rxtx.c **** 	status = 0;
 1632              		.loc 1 351 0
 1633 006e 044B     		ldr	r3, .L30
 1634 0070 0022     		movs	r2, #0
 1635 0072 1A70     		strb	r2, [r3]
 352:bluetooth_rxtx.c **** 
 353:bluetooth_rxtx.c **** 	return 1;
 1636              		.loc 1 353 0
 1637 0074 0123     		movs	r3, #1
 1638              	.L29:
 354:bluetooth_rxtx.c **** }
 1639              		.loc 1 354 0
 1640 0076 1846     		mov	r0, r3
 1641 0078 1837     		adds	r7, r7, #24
 1642              		.cfi_def_cfa_offset 8
 1643 007a BD46     		mov	sp, r7
 1644              		.cfi_def_cfa_register 13
 1645              		@ sp needed
 1646 007c 80BD     		pop	{r7, pc}
 1647              	.L31:
 1648 007e 00BF     		.align	2
 1649              	.L30:
 1650 0080 00000000 		.word	status
 1651 0084 00000000 		.word	channel
 1652 0088 00000000 		.word	rssi_avg
 1653 008c 00000000 		.word	freq_avg
 1654 0090 38C00920 		.word	537509944
 1655              		.cfi_endproc
 1656              	.LFE5:
 1658              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
ARM GAS  /tmp/ccvLzxWr.s 			page 35


 1659              		.align	2
 1660              		.thumb
 1661              		.thumb_func
 1663              	cs_threshold_calc_and_set:
 1664              	.LFB6:
 355:bluetooth_rxtx.c **** 
 356:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 357:bluetooth_rxtx.c **** {
 1665              		.loc 1 357 0
 1666              		.cfi_startproc
 1667              		@ args = 0, pretend = 0, frame = 8
 1668              		@ frame_needed = 1, uses_anonymous_args = 0
 1669 0000 80B5     		push	{r7, lr}
 1670              		.cfi_def_cfa_offset 8
 1671              		.cfi_offset 7, -8
 1672              		.cfi_offset 14, -4
 1673 0002 82B0     		sub	sp, sp, #8
 1674              		.cfi_def_cfa_offset 16
 1675 0004 00AF     		add	r7, sp, #0
 1676              		.cfi_def_cfa_register 7
 358:bluetooth_rxtx.c **** 	int8_t level;
 359:bluetooth_rxtx.c **** 
 360:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 361:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 362:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 363:bluetooth_rxtx.c **** 	 * value for it. */
 364:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 1677              		.loc 1 364 0
 1678 0006 174B     		ldr	r3, .L36
 1679 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1680 000a 002B     		cmp	r3, #0
 1681 000c 1DD0     		beq	.L33
 1682              		.loc 1 364 0 is_stmt 0 discriminator 1
 1683 000e 164B     		ldr	r3, .L36+4
 1684 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1685 0012 5BB2     		sxtb	r3, r3
 1686 0014 002B     		cmp	r3, #0
 1687 0016 18DD     		ble	.L33
 1688              	.LBB2:
 365:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1689              		.loc 1 365 0 is_stmt 1
 1690 0018 144B     		ldr	r3, .L36+8
 1691 001a 1B88     		ldrh	r3, [r3]	@ movhi
 1692 001c 9BB2     		uxth	r3, r3
 1693 001e A3F66213 		subw	r3, r3, #2402
 1694 0022 134A     		ldr	r2, .L36+12
 1695 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1696 0028 1BB2     		sxth	r3, r3
 1697 002a 8033     		adds	r3, r3, #128
 1698 002c 002B     		cmp	r3, #0
 1699 002e 00DA     		bge	.L34
 1700 0030 FF33     		adds	r3, r3, #255
 1701              	.L34:
 1702 0032 1B12     		asrs	r3, r3, #8
 1703 0034 BB71     		strb	r3, [r7, #6]
 366:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 1704              		.loc 1 366 0
ARM GAS  /tmp/ccvLzxWr.s 			page 36


 1705 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1706 0038 0B4B     		ldr	r3, .L36+4
 1707 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1708 003c DBB2     		uxtb	r3, r3
 1709 003e 1344     		add	r3, r3, r2
 1710 0040 DBB2     		uxtb	r3, r3
 1711 0042 363B     		subs	r3, r3, #54
 1712 0044 DBB2     		uxtb	r3, r3
 1713 0046 FB71     		strb	r3, [r7, #7]
 1714              	.LBE2:
 364:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1715              		.loc 1 364 0
 1716 0048 02E0     		b	.L35
 1717              	.L33:
 367:bluetooth_rxtx.c **** 	}
 368:bluetooth_rxtx.c **** 	else {
 369:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 1718              		.loc 1 369 0
 1719 004a 074B     		ldr	r3, .L36+4
 1720 004c 1B78     		ldrb	r3, [r3]
 1721 004e FB71     		strb	r3, [r7, #7]
 1722              	.L35:
 370:bluetooth_rxtx.c **** 	}
 371:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 1723              		.loc 1 371 0
 1724 0050 97F90730 		ldrsb	r3, [r7, #7]
 1725 0054 1846     		mov	r0, r3
 1726 0056 0321     		movs	r1, #3
 1727 0058 FFF7FEFF 		bl	cs_threshold_set
 372:bluetooth_rxtx.c **** }
 1728              		.loc 1 372 0
 1729 005c 0837     		adds	r7, r7, #8
 1730              		.cfi_def_cfa_offset 8
 1731 005e BD46     		mov	sp, r7
 1732              		.cfi_def_cfa_register 13
 1733              		@ sp needed
 1734 0060 80BD     		pop	{r7, pc}
 1735              	.L37:
 1736 0062 00BF     		.align	2
 1737              	.L36:
 1738 0064 00000000 		.word	hop_mode
 1739 0068 00000000 		.word	cs_threshold_req
 1740 006c 00000000 		.word	channel
 1741 0070 00000000 		.word	rssi_iir
 1742              		.cfi_endproc
 1743              	.LFE6:
 1745              		.section	.text.cs_trigger_enable,"ax",%progbits
 1746              		.align	2
 1747              		.thumb
 1748              		.thumb_func
 1750              	cs_trigger_enable:
 1751              	.LFB7:
 373:bluetooth_rxtx.c **** 
 374:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 375:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 376:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 377:bluetooth_rxtx.c ****  * and off here. */
ARM GAS  /tmp/ccvLzxWr.s 			page 37


 378:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 379:bluetooth_rxtx.c **** {
 1752              		.loc 1 379 0
 1753              		.cfi_startproc
 1754              		@ args = 0, pretend = 0, frame = 0
 1755              		@ frame_needed = 1, uses_anonymous_args = 0
 1756              		@ link register save eliminated.
 1757 0000 80B4     		push	{r7}
 1758              		.cfi_def_cfa_offset 4
 1759              		.cfi_offset 7, -4
 1760 0002 00AF     		add	r7, sp, #0
 1761              		.cfi_def_cfa_register 7
 380:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1762              		.loc 1 380 0
 1763 0004 094B     		ldr	r3, .L39
 1764 0006 0022     		movs	r2, #0
 1765 0008 1A70     		strb	r2, [r3]
 381:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 1766              		.loc 1 381 0
 1767 000a 094B     		ldr	r3, .L39+4
 1768 000c 4FF40012 		mov	r2, #2097152
 1769 0010 1A60     		str	r2, [r3]
 382:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1770              		.loc 1 382 0
 1771 0012 084B     		ldr	r3, .L39+8
 1772 0014 0422     		movs	r2, #4
 1773 0016 1A60     		str	r2, [r3]
 383:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 1774              		.loc 1 383 0
 1775 0018 074A     		ldr	r2, .L39+12
 1776 001a 074B     		ldr	r3, .L39+12
 1777 001c 1B68     		ldr	r3, [r3]
 1778 001e 43F00403 		orr	r3, r3, #4
 1779 0022 1360     		str	r3, [r2]
 384:bluetooth_rxtx.c **** }
 1780              		.loc 1 384 0
 1781 0024 BD46     		mov	sp, r7
 1782              		.cfi_def_cfa_register 13
 1783              		@ sp needed
 1784 0026 5DF8047B 		ldr	r7, [sp], #4
 1785              		.cfi_restore 7
 1786              		.cfi_def_cfa_offset 0
 1787 002a 7047     		bx	lr
 1788              	.L40:
 1789              		.align	2
 1790              	.L39:
 1791 002c 00000000 		.word	cs_trigger
 1792 0030 00E100E0 		.word	-536813312
 1793 0034 AC800240 		.word	1073905836
 1794 0038 B4800240 		.word	1073905844
 1795              		.cfi_endproc
 1796              	.LFE7:
 1798              		.section	.text.cs_trigger_disable,"ax",%progbits
 1799              		.align	2
 1800              		.thumb
 1801              		.thumb_func
 1803              	cs_trigger_disable:
ARM GAS  /tmp/ccvLzxWr.s 			page 38


 1804              	.LFB8:
 385:bluetooth_rxtx.c **** 
 386:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 387:bluetooth_rxtx.c **** {
 1805              		.loc 1 387 0
 1806              		.cfi_startproc
 1807              		@ args = 0, pretend = 0, frame = 0
 1808              		@ frame_needed = 1, uses_anonymous_args = 0
 1809              		@ link register save eliminated.
 1810 0000 80B4     		push	{r7}
 1811              		.cfi_def_cfa_offset 4
 1812              		.cfi_offset 7, -4
 1813 0002 00AF     		add	r7, sp, #0
 1814              		.cfi_def_cfa_register 7
 388:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 1815              		.loc 1 388 0
 1816 0004 094A     		ldr	r2, .L42
 1817 0006 094B     		ldr	r3, .L42
 1818 0008 1B68     		ldr	r3, [r3]
 1819 000a 23F00403 		bic	r3, r3, #4
 1820 000e 1360     		str	r3, [r2]
 389:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1821              		.loc 1 389 0
 1822 0010 074B     		ldr	r3, .L42+4
 1823 0012 0422     		movs	r2, #4
 1824 0014 1A60     		str	r2, [r3]
 390:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 1825              		.loc 1 390 0
 1826 0016 074B     		ldr	r3, .L42+8
 1827 0018 4FF40012 		mov	r2, #2097152
 1828 001c 1A60     		str	r2, [r3]
 391:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1829              		.loc 1 391 0
 1830 001e 064B     		ldr	r3, .L42+12
 1831 0020 0022     		movs	r2, #0
 1832 0022 1A70     		strb	r2, [r3]
 392:bluetooth_rxtx.c **** }
 1833              		.loc 1 392 0
 1834 0024 BD46     		mov	sp, r7
 1835              		.cfi_def_cfa_register 13
 1836              		@ sp needed
 1837 0026 5DF8047B 		ldr	r7, [sp], #4
 1838              		.cfi_restore 7
 1839              		.cfi_def_cfa_offset 0
 1840 002a 7047     		bx	lr
 1841              	.L43:
 1842              		.align	2
 1843              	.L42:
 1844 002c B4800240 		.word	1073905844
 1845 0030 AC800240 		.word	1073905836
 1846 0034 80E100E0 		.word	-536813184
 1847 0038 00000000 		.word	cs_trigger
 1848              		.cfi_endproc
 1849              	.LFE8:
 1851              		.section	.rodata
 1852 08bd 000000   		.align	2
 1853              	.LC3:
ARM GAS  /tmp/ccvLzxWr.s 			page 39


 1854 08c0 32303135 		.ascii	"2015-10-R1\000"
 1854      2D31302D 
 1854      523100
 1855              		.section	.text.vendor_request_handler,"ax",%progbits
 1856              		.align	2
 1857              		.thumb
 1858              		.thumb_func
 1860              	vendor_request_handler:
 1861              	.LFB9:
 393:bluetooth_rxtx.c **** 
 394:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 395:bluetooth_rxtx.c **** {
 1862              		.loc 1 395 0
 1863              		.cfi_startproc
 1864              		@ args = 0, pretend = 0, frame = 80
 1865              		@ frame_needed = 1, uses_anonymous_args = 0
 1866 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1867              		.cfi_def_cfa_offset 36
 1868              		.cfi_offset 4, -36
 1869              		.cfi_offset 5, -32
 1870              		.cfi_offset 6, -28
 1871              		.cfi_offset 7, -24
 1872              		.cfi_offset 8, -20
 1873              		.cfi_offset 9, -16
 1874              		.cfi_offset 10, -12
 1875              		.cfi_offset 11, -8
 1876              		.cfi_offset 14, -4
 1877 0004 95B0     		sub	sp, sp, #84
 1878              		.cfi_def_cfa_offset 120
 1879 0006 00AF     		add	r7, sp, #0
 1880              		.cfi_def_cfa_register 7
 1881 0008 B960     		str	r1, [r7, #8]
 1882 000a 7A60     		str	r2, [r7, #4]
 1883 000c 3B60     		str	r3, [r7]
 1884 000e 0346     		mov	r3, r0
 1885 0010 FB73     		strb	r3, [r7, #15]
 396:bluetooth_rxtx.c **** 	u32 command[5];
 397:bluetooth_rxtx.c **** 	u32 result[5];
 398:bluetooth_rxtx.c **** 	u64 ac_copy;
 399:bluetooth_rxtx.c **** 	int i; // loop counter
 400:bluetooth_rxtx.c **** 	u32 clock;
 401:bluetooth_rxtx.c **** 	int clock_offset;
 402:bluetooth_rxtx.c **** 	u8 length; // string length
 403:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 1886              		.loc 1 403 0
 1887 0012 0023     		movs	r3, #0
 1888 0014 7B64     		str	r3, [r7, #68]
 404:bluetooth_rxtx.c **** 	u16 reg_val;
 405:bluetooth_rxtx.c **** 
 406:bluetooth_rxtx.c **** 	switch (request) {
 1889              		.loc 1 406 0
 1890 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1891 0018 3C2B     		cmp	r3, #60
 1892 001a 00F25185 		bhi	.L45
 1893 001e 01A2     		adr	r2, .L47
 1894 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1895              		.p2align 2
ARM GAS  /tmp/ccvLzxWr.s 			page 40


 1896              	.L47:
 1897 0024 19010000 		.word	.L46+1
 1898 0028 23010000 		.word	.L48+1
 1899 002c C10A0000 		.word	.L45+1
 1900 0030 33010000 		.word	.L49+1
 1901 0034 55010000 		.word	.L50+1
 1902 0038 71010000 		.word	.L51+1
 1903 003c 93010000 		.word	.L52+1
 1904 0040 AF010000 		.word	.L53+1
 1905 0044 D1010000 		.word	.L54+1
 1906 0048 F1010000 		.word	.L55+1
 1907 004c 13020000 		.word	.L56+1
 1908 0050 B7040000 		.word	.L57+1
 1909 0054 DD040000 		.word	.L58+1
 1910 0058 89020000 		.word	.L59+1
 1911 005c 93020000 		.word	.L60+1
 1912 0060 33020000 		.word	.L61+1
 1913 0064 71030000 		.word	.L62+1
 1914 0068 91030000 		.word	.L63+1
 1915 006c C9030000 		.word	.L64+1
 1916 0070 E9030000 		.word	.L65+1
 1917 0074 05040000 		.word	.L66+1
 1918 0078 91040000 		.word	.L67+1
 1919 007c 99040000 		.word	.L68+1
 1920 0080 AB040000 		.word	.L69+1
 1921 0084 67050000 		.word	.L70+1
 1922 0088 85050000 		.word	.L71+1
 1923 008c C10A0000 		.word	.L45+1
 1924 0090 91050000 		.word	.L72+1
 1925 0094 0D040000 		.word	.L73+1
 1926 0098 29040000 		.word	.L74+1
 1927 009c 51040000 		.word	.L75+1
 1928 00a0 49040000 		.word	.L76+1
 1929 00a4 59040000 		.word	.L77+1
 1930 00a8 55060000 		.word	.L78+1
 1931 00ac ED050000 		.word	.L79+1
 1932 00b0 C9060000 		.word	.L80+1
 1933 00b4 D7060000 		.word	.L81+1
 1934 00b8 E7060000 		.word	.L82+1
 1935 00bc F9060000 		.word	.L83+1
 1936 00c0 C5070000 		.word	.L84+1
 1937 00c4 0B080000 		.word	.L85+1
 1938 00c8 99080000 		.word	.L86+1
 1939 00cc CD080000 		.word	.L87+1
 1940 00d0 EF080000 		.word	.L88+1
 1941 00d4 47090000 		.word	.L89+1
 1942 00d8 C50A0000 		.word	.L148+1
 1943 00dc 79090000 		.word	.L91+1
 1944 00e0 8F090000 		.word	.L92+1
 1945 00e4 AB090000 		.word	.L93+1
 1946 00e8 C1090000 		.word	.L94+1
 1947 00ec ED090000 		.word	.L95+1
 1948 00f0 3D080000 		.word	.L96+1
 1949 00f4 6F080000 		.word	.L97+1
 1950 00f8 090A0000 		.word	.L98+1
 1951 00fc 4D0A0000 		.word	.L99+1
 1952 0100 97060000 		.word	.L100+1
ARM GAS  /tmp/ccvLzxWr.s 			page 41


 1953 0104 5F0A0000 		.word	.L101+1
 1954 0108 C10A0000 		.word	.L45+1
 1955 010c 370A0000 		.word	.L102+1
 1956 0110 A30A0000 		.word	.L103+1
 1957 0114 AF0A0000 		.word	.L104+1
 1958              		.p2align 1
 1959              	.L46:
 407:bluetooth_rxtx.c **** 
 408:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 409:bluetooth_rxtx.c **** 		*data_len = 0;
 1960              		.loc 1 409 0
 1961 0118 3B68     		ldr	r3, [r7]
 1962 011a 0022     		movs	r2, #0
 1963 011c 1A60     		str	r2, [r3]
 410:bluetooth_rxtx.c **** 		break;
 1964              		.loc 1 410 0
 1965 011e 00F0D2BC 		b	.L105
 1966              	.L48:
 411:bluetooth_rxtx.c **** 
 412:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 413:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 1967              		.loc 1 413 0
 1968 0122 A14B     		ldr	r3, .L149
 1969 0124 0122     		movs	r2, #1
 1970 0126 1A70     		strb	r2, [r3]
 414:bluetooth_rxtx.c **** 		*data_len = 0;
 1971              		.loc 1 414 0
 1972 0128 3B68     		ldr	r3, [r7]
 1973 012a 0022     		movs	r2, #0
 1974 012c 1A60     		str	r2, [r3]
 415:bluetooth_rxtx.c **** 		break;
 1975              		.loc 1 415 0
 1976 012e 00F0CABC 		b	.L105
 1977              	.L49:
 416:bluetooth_rxtx.c **** 
 417:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 418:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 1978              		.loc 1 418 0
 1979 0132 9E4B     		ldr	r3, .L149+4
 1980 0134 1B68     		ldr	r3, [r3]
 1981 0136 03F00203 		and	r3, r3, #2
 1982 013a 002B     		cmp	r3, #0
 1983 013c 14BF     		ite	ne
 1984 013e 0123     		movne	r3, #1
 1985 0140 0023     		moveq	r3, #0
 1986 0142 DBB2     		uxtb	r3, r3
 1987 0144 1A46     		mov	r2, r3
 1988 0146 7B68     		ldr	r3, [r7, #4]
 1989 0148 1A70     		strb	r2, [r3]
 419:bluetooth_rxtx.c **** 		*data_len = 1;
 1990              		.loc 1 419 0
 1991 014a 3B68     		ldr	r3, [r7]
 1992 014c 0122     		movs	r2, #1
 1993 014e 1A60     		str	r2, [r3]
 420:bluetooth_rxtx.c **** 		break;
 1994              		.loc 1 420 0
 1995 0150 00F0B9BC 		b	.L105
ARM GAS  /tmp/ccvLzxWr.s 			page 42


 1996              	.L50:
 421:bluetooth_rxtx.c **** 
 422:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 423:bluetooth_rxtx.c **** 		if (request_params[0])
 1997              		.loc 1 423 0
 1998 0154 BB68     		ldr	r3, [r7, #8]
 1999 0156 1B88     		ldrh	r3, [r3]
 2000 0158 002B     		cmp	r3, #0
 2001 015a 04D0     		beq	.L106
 424:bluetooth_rxtx.c **** 			USRLED_SET;
 2002              		.loc 1 424 0
 2003 015c 944B     		ldr	r3, .L149+8
 2004 015e 0222     		movs	r2, #2
 2005 0160 1A60     		str	r2, [r3]
 425:bluetooth_rxtx.c **** 		else
 426:bluetooth_rxtx.c **** 			USRLED_CLR;
 427:bluetooth_rxtx.c **** 		break;
 2006              		.loc 1 427 0
 2007 0162 00F0B0BC 		b	.L105
 2008              	.L106:
 426:bluetooth_rxtx.c **** 		break;
 2009              		.loc 1 426 0
 2010 0166 934B     		ldr	r3, .L149+12
 2011 0168 0222     		movs	r2, #2
 2012 016a 1A60     		str	r2, [r3]
 2013              		.loc 1 427 0
 2014 016c 00F0ABBC 		b	.L105
 2015              	.L51:
 428:bluetooth_rxtx.c **** 
 429:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 430:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2016              		.loc 1 430 0
 2017 0170 8E4B     		ldr	r3, .L149+4
 2018 0172 1B68     		ldr	r3, [r3]
 2019 0174 03F01003 		and	r3, r3, #16
 2020 0178 002B     		cmp	r3, #0
 2021 017a 14BF     		ite	ne
 2022 017c 0123     		movne	r3, #1
 2023 017e 0023     		moveq	r3, #0
 2024 0180 DBB2     		uxtb	r3, r3
 2025 0182 1A46     		mov	r2, r3
 2026 0184 7B68     		ldr	r3, [r7, #4]
 2027 0186 1A70     		strb	r2, [r3]
 431:bluetooth_rxtx.c **** 		*data_len = 1;
 2028              		.loc 1 431 0
 2029 0188 3B68     		ldr	r3, [r7]
 2030 018a 0122     		movs	r2, #1
 2031 018c 1A60     		str	r2, [r3]
 432:bluetooth_rxtx.c **** 		break;
 2032              		.loc 1 432 0
 2033 018e 00F09ABC 		b	.L105
 2034              	.L52:
 433:bluetooth_rxtx.c **** 
 434:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 435:bluetooth_rxtx.c **** 		if (request_params[0])
 2035              		.loc 1 435 0
 2036 0192 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccvLzxWr.s 			page 43


 2037 0194 1B88     		ldrh	r3, [r3]
 2038 0196 002B     		cmp	r3, #0
 2039 0198 04D0     		beq	.L108
 436:bluetooth_rxtx.c **** 			RXLED_SET;
 2040              		.loc 1 436 0
 2041 019a 854B     		ldr	r3, .L149+8
 2042 019c 1022     		movs	r2, #16
 2043 019e 1A60     		str	r2, [r3]
 437:bluetooth_rxtx.c **** 		else
 438:bluetooth_rxtx.c **** 			RXLED_CLR;
 439:bluetooth_rxtx.c **** 		break;
 2044              		.loc 1 439 0
 2045 01a0 00F091BC 		b	.L105
 2046              	.L108:
 438:bluetooth_rxtx.c **** 		break;
 2047              		.loc 1 438 0
 2048 01a4 834B     		ldr	r3, .L149+12
 2049 01a6 1022     		movs	r2, #16
 2050 01a8 1A60     		str	r2, [r3]
 2051              		.loc 1 439 0
 2052 01aa 00F08CBC 		b	.L105
 2053              	.L53:
 440:bluetooth_rxtx.c **** 
 441:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 442:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2054              		.loc 1 442 0
 2055 01ae 7F4B     		ldr	r3, .L149+4
 2056 01b0 1B68     		ldr	r3, [r3]
 2057 01b2 03F48073 		and	r3, r3, #256
 2058 01b6 002B     		cmp	r3, #0
 2059 01b8 14BF     		ite	ne
 2060 01ba 0123     		movne	r3, #1
 2061 01bc 0023     		moveq	r3, #0
 2062 01be DBB2     		uxtb	r3, r3
 2063 01c0 1A46     		mov	r2, r3
 2064 01c2 7B68     		ldr	r3, [r7, #4]
 2065 01c4 1A70     		strb	r2, [r3]
 443:bluetooth_rxtx.c **** 		*data_len = 1;
 2066              		.loc 1 443 0
 2067 01c6 3B68     		ldr	r3, [r7]
 2068 01c8 0122     		movs	r2, #1
 2069 01ca 1A60     		str	r2, [r3]
 444:bluetooth_rxtx.c **** 		break;
 2070              		.loc 1 444 0
 2071 01cc 00F07BBC 		b	.L105
 2072              	.L54:
 445:bluetooth_rxtx.c **** 
 446:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 447:bluetooth_rxtx.c **** 		if (request_params[0])
 2073              		.loc 1 447 0
 2074 01d0 BB68     		ldr	r3, [r7, #8]
 2075 01d2 1B88     		ldrh	r3, [r3]
 2076 01d4 002B     		cmp	r3, #0
 2077 01d6 05D0     		beq	.L110
 448:bluetooth_rxtx.c **** 			TXLED_SET;
 2078              		.loc 1 448 0
 2079 01d8 754B     		ldr	r3, .L149+8
ARM GAS  /tmp/ccvLzxWr.s 			page 44


 2080 01da 4FF48072 		mov	r2, #256
 2081 01de 1A60     		str	r2, [r3]
 449:bluetooth_rxtx.c **** 		else
 450:bluetooth_rxtx.c **** 			TXLED_CLR;
 451:bluetooth_rxtx.c **** 		break;
 2082              		.loc 1 451 0
 2083 01e0 00F071BC 		b	.L105
 2084              	.L110:
 450:bluetooth_rxtx.c **** 		break;
 2085              		.loc 1 450 0
 2086 01e4 734B     		ldr	r3, .L149+12
 2087 01e6 4FF48072 		mov	r2, #256
 2088 01ea 1A60     		str	r2, [r3]
 2089              		.loc 1 451 0
 2090 01ec 00F06BBC 		b	.L105
 2091              	.L55:
 452:bluetooth_rxtx.c **** 
 453:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 454:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2092              		.loc 1 454 0
 2093 01f0 6E4B     		ldr	r3, .L149+4
 2094 01f2 1B68     		ldr	r3, [r3]
 2095 01f4 03F40073 		and	r3, r3, #512
 2096 01f8 002B     		cmp	r3, #0
 2097 01fa 14BF     		ite	ne
 2098 01fc 0123     		movne	r3, #1
 2099 01fe 0023     		moveq	r3, #0
 2100 0200 DBB2     		uxtb	r3, r3
 2101 0202 1A46     		mov	r2, r3
 2102 0204 7B68     		ldr	r3, [r7, #4]
 2103 0206 1A70     		strb	r2, [r3]
 455:bluetooth_rxtx.c **** 		*data_len = 1;
 2104              		.loc 1 455 0
 2105 0208 3B68     		ldr	r3, [r7]
 2106 020a 0122     		movs	r2, #1
 2107 020c 1A60     		str	r2, [r3]
 456:bluetooth_rxtx.c **** 		break;
 2108              		.loc 1 456 0
 2109 020e 00F05ABC 		b	.L105
 2110              	.L56:
 457:bluetooth_rxtx.c **** 
 458:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 459:bluetooth_rxtx.c **** 		if (request_params[0])
 2111              		.loc 1 459 0
 2112 0212 BB68     		ldr	r3, [r7, #8]
 2113 0214 1B88     		ldrh	r3, [r3]
 2114 0216 002B     		cmp	r3, #0
 2115 0218 05D0     		beq	.L112
 460:bluetooth_rxtx.c **** 			CC1V8_SET;
 2116              		.loc 1 460 0
 2117 021a 654B     		ldr	r3, .L149+8
 2118 021c 4FF40072 		mov	r2, #512
 2119 0220 1A60     		str	r2, [r3]
 461:bluetooth_rxtx.c **** 		else
 462:bluetooth_rxtx.c **** 			CC1V8_CLR;
 463:bluetooth_rxtx.c **** 		break;
 2120              		.loc 1 463 0
ARM GAS  /tmp/ccvLzxWr.s 			page 45


 2121 0222 00F050BC 		b	.L105
 2122              	.L112:
 462:bluetooth_rxtx.c **** 		break;
 2123              		.loc 1 462 0
 2124 0226 634B     		ldr	r3, .L149+12
 2125 0228 4FF40072 		mov	r2, #512
 2126 022c 1A60     		str	r2, [r3]
 2127              		.loc 1 463 0
 2128 022e 00F04ABC 		b	.L105
 2129              	.L61:
 464:bluetooth_rxtx.c **** 
 465:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 466:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2130              		.loc 1 466 0
 2131 0232 3623     		movs	r3, #54
 2132 0234 7B62     		str	r3, [r7, #36]
 467:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2133              		.loc 1 467 0
 2134 0236 604B     		ldr	r3, .L149+16
 2135 0238 1B68     		ldr	r3, [r3]
 2136 023a 07F12401 		add	r1, r7, #36
 2137 023e 07F11002 		add	r2, r7, #16
 2138 0242 0846     		mov	r0, r1
 2139 0244 1146     		mov	r1, r2
 2140 0246 9847     		blx	r3
 468:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2141              		.loc 1 468 0
 2142 0248 3B69     		ldr	r3, [r7, #16]
 2143 024a DAB2     		uxtb	r2, r3
 2144 024c 7B68     		ldr	r3, [r7, #4]
 2145 024e 1A70     		strb	r2, [r3]
 469:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2146              		.loc 1 469 0
 2147 0250 7B68     		ldr	r3, [r7, #4]
 2148 0252 0133     		adds	r3, r3, #1
 2149 0254 7A69     		ldr	r2, [r7, #20]
 2150 0256 D2B2     		uxtb	r2, r2
 2151 0258 1A70     		strb	r2, [r3]
 470:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2152              		.loc 1 470 0
 2153 025a 7B68     		ldr	r3, [r7, #4]
 2154 025c 0233     		adds	r3, r3, #2
 2155 025e 7A69     		ldr	r2, [r7, #20]
 2156 0260 120A     		lsrs	r2, r2, #8
 2157 0262 D2B2     		uxtb	r2, r2
 2158 0264 1A70     		strb	r2, [r3]
 471:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2159              		.loc 1 471 0
 2160 0266 7B68     		ldr	r3, [r7, #4]
 2161 0268 0333     		adds	r3, r3, #3
 2162 026a 7A69     		ldr	r2, [r7, #20]
 2163 026c 120C     		lsrs	r2, r2, #16
 2164 026e D2B2     		uxtb	r2, r2
 2165 0270 1A70     		strb	r2, [r3]
 472:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2166              		.loc 1 472 0
 2167 0272 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccvLzxWr.s 			page 46


 2168 0274 0433     		adds	r3, r3, #4
 2169 0276 7A69     		ldr	r2, [r7, #20]
 2170 0278 120E     		lsrs	r2, r2, #24
 2171 027a D2B2     		uxtb	r2, r2
 2172 027c 1A70     		strb	r2, [r3]
 473:bluetooth_rxtx.c **** 		*data_len = 5;
 2173              		.loc 1 473 0
 2174 027e 3B68     		ldr	r3, [r7]
 2175 0280 0522     		movs	r2, #5
 2176 0282 1A60     		str	r2, [r3]
 474:bluetooth_rxtx.c **** 		break;
 2177              		.loc 1 474 0
 2178 0284 00F01FBC 		b	.L105
 2179              	.L59:
 475:bluetooth_rxtx.c **** 
 476:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 477:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2180              		.loc 1 477 0
 2181 0288 474B     		ldr	r3, .L149
 2182 028a 0B22     		movs	r2, #11
 2183 028c 1A70     		strb	r2, [r3]
 478:bluetooth_rxtx.c **** 		break;
 2184              		.loc 1 478 0
 2185 028e 00F01ABC 		b	.L105
 2186              	.L60:
 479:bluetooth_rxtx.c **** 
 480:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 481:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2187              		.loc 1 481 0
 2188 0292 3A23     		movs	r3, #58
 2189 0294 7B62     		str	r3, [r7, #36]
 482:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2190              		.loc 1 482 0
 2191 0296 484B     		ldr	r3, .L149+16
 2192 0298 1B68     		ldr	r3, [r3]
 2193 029a 07F12401 		add	r1, r7, #36
 2194 029e 07F11002 		add	r2, r7, #16
 2195 02a2 0846     		mov	r0, r1
 2196 02a4 1146     		mov	r1, r2
 2197 02a6 9847     		blx	r3
 483:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2198              		.loc 1 483 0
 2199 02a8 3B69     		ldr	r3, [r7, #16]
 2200 02aa DAB2     		uxtb	r2, r3
 2201 02ac 7B68     		ldr	r3, [r7, #4]
 2202 02ae 1A70     		strb	r2, [r3]
 484:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2203              		.loc 1 484 0
 2204 02b0 7B68     		ldr	r3, [r7, #4]
 2205 02b2 0133     		adds	r3, r3, #1
 2206 02b4 7A69     		ldr	r2, [r7, #20]
 2207 02b6 D2B2     		uxtb	r2, r2
 2208 02b8 1A70     		strb	r2, [r3]
 485:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2209              		.loc 1 485 0
 2210 02ba 7B68     		ldr	r3, [r7, #4]
 2211 02bc 0233     		adds	r3, r3, #2
ARM GAS  /tmp/ccvLzxWr.s 			page 47


 2212 02be 7A69     		ldr	r2, [r7, #20]
 2213 02c0 120A     		lsrs	r2, r2, #8
 2214 02c2 D2B2     		uxtb	r2, r2
 2215 02c4 1A70     		strb	r2, [r3]
 486:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2216              		.loc 1 486 0
 2217 02c6 7B68     		ldr	r3, [r7, #4]
 2218 02c8 0333     		adds	r3, r3, #3
 2219 02ca 7A69     		ldr	r2, [r7, #20]
 2220 02cc 120C     		lsrs	r2, r2, #16
 2221 02ce D2B2     		uxtb	r2, r2
 2222 02d0 1A70     		strb	r2, [r3]
 487:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2223              		.loc 1 487 0
 2224 02d2 7B68     		ldr	r3, [r7, #4]
 2225 02d4 0433     		adds	r3, r3, #4
 2226 02d6 7A69     		ldr	r2, [r7, #20]
 2227 02d8 120E     		lsrs	r2, r2, #24
 2228 02da D2B2     		uxtb	r2, r2
 2229 02dc 1A70     		strb	r2, [r3]
 488:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2230              		.loc 1 488 0
 2231 02de 7B68     		ldr	r3, [r7, #4]
 2232 02e0 0533     		adds	r3, r3, #5
 2233 02e2 BA69     		ldr	r2, [r7, #24]
 2234 02e4 D2B2     		uxtb	r2, r2
 2235 02e6 1A70     		strb	r2, [r3]
 489:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2236              		.loc 1 489 0
 2237 02e8 7B68     		ldr	r3, [r7, #4]
 2238 02ea 0633     		adds	r3, r3, #6
 2239 02ec BA69     		ldr	r2, [r7, #24]
 2240 02ee 120A     		lsrs	r2, r2, #8
 2241 02f0 D2B2     		uxtb	r2, r2
 2242 02f2 1A70     		strb	r2, [r3]
 490:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2243              		.loc 1 490 0
 2244 02f4 7B68     		ldr	r3, [r7, #4]
 2245 02f6 0733     		adds	r3, r3, #7
 2246 02f8 BA69     		ldr	r2, [r7, #24]
 2247 02fa 120C     		lsrs	r2, r2, #16
 2248 02fc D2B2     		uxtb	r2, r2
 2249 02fe 1A70     		strb	r2, [r3]
 491:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2250              		.loc 1 491 0
 2251 0300 7B68     		ldr	r3, [r7, #4]
 2252 0302 0833     		adds	r3, r3, #8
 2253 0304 BA69     		ldr	r2, [r7, #24]
 2254 0306 120E     		lsrs	r2, r2, #24
 2255 0308 D2B2     		uxtb	r2, r2
 2256 030a 1A70     		strb	r2, [r3]
 492:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2257              		.loc 1 492 0
 2258 030c 7B68     		ldr	r3, [r7, #4]
 2259 030e 0933     		adds	r3, r3, #9
 2260 0310 FA69     		ldr	r2, [r7, #28]
 2261 0312 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/ccvLzxWr.s 			page 48


 2262 0314 1A70     		strb	r2, [r3]
 493:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2263              		.loc 1 493 0
 2264 0316 7B68     		ldr	r3, [r7, #4]
 2265 0318 0A33     		adds	r3, r3, #10
 2266 031a FA69     		ldr	r2, [r7, #28]
 2267 031c 120A     		lsrs	r2, r2, #8
 2268 031e D2B2     		uxtb	r2, r2
 2269 0320 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2270              		.loc 1 494 0
 2271 0322 7B68     		ldr	r3, [r7, #4]
 2272 0324 0B33     		adds	r3, r3, #11
 2273 0326 FA69     		ldr	r2, [r7, #28]
 2274 0328 120C     		lsrs	r2, r2, #16
 2275 032a D2B2     		uxtb	r2, r2
 2276 032c 1A70     		strb	r2, [r3]
 495:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2277              		.loc 1 495 0
 2278 032e 7B68     		ldr	r3, [r7, #4]
 2279 0330 0C33     		adds	r3, r3, #12
 2280 0332 FA69     		ldr	r2, [r7, #28]
 2281 0334 120E     		lsrs	r2, r2, #24
 2282 0336 D2B2     		uxtb	r2, r2
 2283 0338 1A70     		strb	r2, [r3]
 496:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2284              		.loc 1 496 0
 2285 033a 7B68     		ldr	r3, [r7, #4]
 2286 033c 0D33     		adds	r3, r3, #13
 2287 033e 3A6A     		ldr	r2, [r7, #32]
 2288 0340 D2B2     		uxtb	r2, r2
 2289 0342 1A70     		strb	r2, [r3]
 497:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2290              		.loc 1 497 0
 2291 0344 7B68     		ldr	r3, [r7, #4]
 2292 0346 0E33     		adds	r3, r3, #14
 2293 0348 3A6A     		ldr	r2, [r7, #32]
 2294 034a 120A     		lsrs	r2, r2, #8
 2295 034c D2B2     		uxtb	r2, r2
 2296 034e 1A70     		strb	r2, [r3]
 498:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2297              		.loc 1 498 0
 2298 0350 7B68     		ldr	r3, [r7, #4]
 2299 0352 0F33     		adds	r3, r3, #15
 2300 0354 3A6A     		ldr	r2, [r7, #32]
 2301 0356 120C     		lsrs	r2, r2, #16
 2302 0358 D2B2     		uxtb	r2, r2
 2303 035a 1A70     		strb	r2, [r3]
 499:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2304              		.loc 1 499 0
 2305 035c 7B68     		ldr	r3, [r7, #4]
 2306 035e 1033     		adds	r3, r3, #16
 2307 0360 3A6A     		ldr	r2, [r7, #32]
 2308 0362 120E     		lsrs	r2, r2, #24
 2309 0364 D2B2     		uxtb	r2, r2
 2310 0366 1A70     		strb	r2, [r3]
 500:bluetooth_rxtx.c **** 		*data_len = 17;
ARM GAS  /tmp/ccvLzxWr.s 			page 49


 2311              		.loc 1 500 0
 2312 0368 3B68     		ldr	r3, [r7]
 2313 036a 1122     		movs	r2, #17
 2314 036c 1A60     		str	r2, [r3]
 501:bluetooth_rxtx.c **** 		break;
 2315              		.loc 1 501 0
 2316 036e AAE3     		b	.L105
 2317              	.L62:
 502:bluetooth_rxtx.c **** 
 503:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 504:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 505:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2318              		.loc 1 505 0
 2319 0370 124B     		ldr	r3, .L149+20
 2320 0372 1B68     		ldr	r3, [r3]
 2321 0374 03F08003 		and	r3, r3, #128
 2322 0378 002B     		cmp	r3, #0
 2323 037a 14BF     		ite	ne
 2324 037c 0123     		movne	r3, #1
 2325 037e 0023     		moveq	r3, #0
 2326 0380 DBB2     		uxtb	r3, r3
 2327 0382 1A46     		mov	r2, r3
 2328 0384 7B68     		ldr	r3, [r7, #4]
 2329 0386 1A70     		strb	r2, [r3]
 506:bluetooth_rxtx.c **** 		*data_len = 1;
 2330              		.loc 1 506 0
 2331 0388 3B68     		ldr	r3, [r7]
 2332 038a 0122     		movs	r2, #1
 2333 038c 1A60     		str	r2, [r3]
 507:bluetooth_rxtx.c **** 		break;
 2334              		.loc 1 507 0
 2335 038e 9AE3     		b	.L105
 2336              	.L63:
 508:bluetooth_rxtx.c **** 
 509:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 510:bluetooth_rxtx.c **** 		if (request_params[0])
 2337              		.loc 1 510 0
 2338 0390 BB68     		ldr	r3, [r7, #8]
 2339 0392 1B88     		ldrh	r3, [r3]
 2340 0394 002B     		cmp	r3, #0
 2341 0396 03D0     		beq	.L114
 511:bluetooth_rxtx.c **** 			PAEN_SET;
 2342              		.loc 1 511 0
 2343 0398 094B     		ldr	r3, .L149+24
 2344 039a 8022     		movs	r2, #128
 2345 039c 1A60     		str	r2, [r3]
 512:bluetooth_rxtx.c **** 		else
 513:bluetooth_rxtx.c **** 			PAEN_CLR;
 514:bluetooth_rxtx.c **** 		break;
 2346              		.loc 1 514 0
 2347 039e 92E3     		b	.L105
 2348              	.L114:
 513:bluetooth_rxtx.c **** 		break;
 2349              		.loc 1 513 0
 2350 03a0 084B     		ldr	r3, .L149+28
 2351 03a2 8022     		movs	r2, #128
 2352 03a4 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 50


 2353              		.loc 1 514 0
 2354 03a6 8EE3     		b	.L105
 2355              	.L150:
 2356              		.align	2
 2357              	.L149:
 2358 03a8 00000000 		.word	requested_mode
 2359 03ac 34C00920 		.word	537509940
 2360 03b0 38C00920 		.word	537509944
 2361 03b4 3CC00920 		.word	537509948
 2362 03b8 00000000 		.word	iap_entry
 2363 03bc 54C00920 		.word	537509972
 2364 03c0 58C00920 		.word	537509976
 2365 03c4 5CC00920 		.word	537509980
 2366              	.L64:
 515:bluetooth_rxtx.c **** 
 516:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 517:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2367              		.loc 1 517 0
 2368 03c8 924B     		ldr	r3, .L151
 2369 03ca 1B68     		ldr	r3, [r3]
 2370 03cc 03F48073 		and	r3, r3, #256
 2371 03d0 002B     		cmp	r3, #0
 2372 03d2 14BF     		ite	ne
 2373 03d4 0123     		movne	r3, #1
 2374 03d6 0023     		moveq	r3, #0
 2375 03d8 DBB2     		uxtb	r3, r3
 2376 03da 1A46     		mov	r2, r3
 2377 03dc 7B68     		ldr	r3, [r7, #4]
 2378 03de 1A70     		strb	r2, [r3]
 518:bluetooth_rxtx.c **** 		*data_len = 1;
 2379              		.loc 1 518 0
 2380 03e0 3B68     		ldr	r3, [r7]
 2381 03e2 0122     		movs	r2, #1
 2382 03e4 1A60     		str	r2, [r3]
 519:bluetooth_rxtx.c **** 		break;
 2383              		.loc 1 519 0
 2384 03e6 6EE3     		b	.L105
 2385              	.L65:
 520:bluetooth_rxtx.c **** 
 521:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 522:bluetooth_rxtx.c **** 		if (request_params[0])
 2386              		.loc 1 522 0
 2387 03e8 BB68     		ldr	r3, [r7, #8]
 2388 03ea 1B88     		ldrh	r3, [r3]
 2389 03ec 002B     		cmp	r3, #0
 2390 03ee 04D0     		beq	.L116
 523:bluetooth_rxtx.c **** 			HGM_SET;
 2391              		.loc 1 523 0
 2392 03f0 894B     		ldr	r3, .L151+4
 2393 03f2 4FF48072 		mov	r2, #256
 2394 03f6 1A60     		str	r2, [r3]
 524:bluetooth_rxtx.c **** 		else
 525:bluetooth_rxtx.c **** 			HGM_CLR;
 526:bluetooth_rxtx.c **** 		break;
 2395              		.loc 1 526 0
 2396 03f8 65E3     		b	.L105
 2397              	.L116:
ARM GAS  /tmp/ccvLzxWr.s 			page 51


 525:bluetooth_rxtx.c **** 		break;
 2398              		.loc 1 525 0
 2399 03fa 884B     		ldr	r3, .L151+8
 2400 03fc 4FF48072 		mov	r2, #256
 2401 0400 1A60     		str	r2, [r3]
 2402              		.loc 1 526 0
 2403 0402 60E3     		b	.L105
 2404              	.L66:
 527:bluetooth_rxtx.c **** #endif
 528:bluetooth_rxtx.c **** 
 529:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 530:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 531:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2405              		.loc 1 531 0
 2406 0404 864B     		ldr	r3, .L151+12
 2407 0406 0322     		movs	r2, #3
 2408 0408 1A70     		strb	r2, [r3]
 532:bluetooth_rxtx.c **** 		break;
 2409              		.loc 1 532 0
 2410 040a 5CE3     		b	.L105
 2411              	.L73:
 533:bluetooth_rxtx.c **** 
 534:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 535:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2412              		.loc 1 535 0
 2413 040c 0520     		movs	r0, #5
 2414 040e FFF7FEFF 		bl	cc2400_get
 2415 0412 0346     		mov	r3, r0
 2416 0414 DBB2     		uxtb	r3, r3
 2417 0416 03F00703 		and	r3, r3, #7
 2418 041a DAB2     		uxtb	r2, r3
 2419 041c 7B68     		ldr	r3, [r7, #4]
 2420 041e 1A70     		strb	r2, [r3]
 536:bluetooth_rxtx.c **** 		*data_len = 1;
 2421              		.loc 1 536 0
 2422 0420 3B68     		ldr	r3, [r7]
 2423 0422 0122     		movs	r2, #1
 2424 0424 1A60     		str	r2, [r3]
 537:bluetooth_rxtx.c **** 		break;
 2425              		.loc 1 537 0
 2426 0426 4EE3     		b	.L105
 2427              	.L74:
 538:bluetooth_rxtx.c **** 
 539:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 540:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2428              		.loc 1 540 0
 2429 0428 BB68     		ldr	r3, [r7, #8]
 2430 042a 1B88     		ldrh	r3, [r3]
 2431 042c 072B     		cmp	r3, #7
 2432 042e 09D8     		bhi	.L118
 541:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2433              		.loc 1 541 0
 2434 0430 BB68     		ldr	r3, [r7, #8]
 2435 0432 1B88     		ldrh	r3, [r3]
 2436 0434 43F00803 		orr	r3, r3, #8
 2437 0438 9BB2     		uxth	r3, r3
 2438 043a 0520     		movs	r0, #5
ARM GAS  /tmp/ccvLzxWr.s 			page 52


 2439 043c 1946     		mov	r1, r3
 2440 043e FFF7FEFF 		bl	cc2400_set
 542:bluetooth_rxtx.c **** 		} else {
 543:bluetooth_rxtx.c **** 			return 0;
 544:bluetooth_rxtx.c **** 		}
 545:bluetooth_rxtx.c **** 		break;
 2441              		.loc 1 545 0
 2442 0442 40E3     		b	.L105
 2443              	.L118:
 543:bluetooth_rxtx.c **** 		}
 2444              		.loc 1 543 0
 2445 0444 0023     		movs	r3, #0
 2446 0446 3FE3     		b	.L147
 2447              	.L76:
 546:bluetooth_rxtx.c **** 
 547:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 548:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2448              		.loc 1 548 0
 2449 0448 754B     		ldr	r3, .L151+12
 2450 044a 0522     		movs	r2, #5
 2451 044c 1A70     		strb	r2, [r3]
 549:bluetooth_rxtx.c **** 		break;
 2452              		.loc 1 549 0
 2453 044e 3AE3     		b	.L105
 2454              	.L75:
 550:bluetooth_rxtx.c **** 
 551:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 552:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2455              		.loc 1 552 0
 2456 0450 734B     		ldr	r3, .L151+12
 2457 0452 0622     		movs	r2, #6
 2458 0454 1A70     		strb	r2, [r3]
 553:bluetooth_rxtx.c **** 		break;
 2459              		.loc 1 553 0
 2460 0456 36E3     		b	.L105
 2461              	.L77:
 554:bluetooth_rxtx.c **** #endif
 555:bluetooth_rxtx.c **** 
 556:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 557:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2462              		.loc 1 557 0
 2463 0458 724B     		ldr	r3, .L151+16
 2464 045a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2465 045c 7B68     		ldr	r3, [r7, #4]
 2466 045e 1A70     		strb	r2, [r3]
 558:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2467              		.loc 1 558 0
 2468 0460 7B68     		ldr	r3, [r7, #4]
 2469 0462 0133     		adds	r3, r3, #1
 2470 0464 6F4A     		ldr	r2, .L151+16
 2471 0466 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2472 0468 1A70     		strb	r2, [r3]
 559:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2473              		.loc 1 559 0
 2474 046a 7B68     		ldr	r3, [r7, #4]
 2475 046c 0233     		adds	r3, r3, #2
 2476 046e 6D4A     		ldr	r2, .L151+16
ARM GAS  /tmp/ccvLzxWr.s 			page 53


 2477 0470 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2478 0472 1A70     		strb	r2, [r3]
 560:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2479              		.loc 1 560 0
 2480 0474 7B68     		ldr	r3, [r7, #4]
 2481 0476 0333     		adds	r3, r3, #3
 2482 0478 6A4A     		ldr	r2, .L151+16
 2483 047a D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2484 047c 1A70     		strb	r2, [r3]
 561:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2485              		.loc 1 561 0
 2486 047e 7B68     		ldr	r3, [r7, #4]
 2487 0480 0433     		adds	r3, r3, #4
 2488 0482 684A     		ldr	r2, .L151+16
 2489 0484 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2490 0486 1A70     		strb	r2, [r3]
 562:bluetooth_rxtx.c **** 		*data_len = 5;
 2491              		.loc 1 562 0
 2492 0488 3B68     		ldr	r3, [r7]
 2493 048a 0522     		movs	r2, #5
 2494 048c 1A60     		str	r2, [r3]
 563:bluetooth_rxtx.c **** 		break;
 2495              		.loc 1 563 0
 2496 048e 1AE3     		b	.L105
 2497              	.L67:
 564:bluetooth_rxtx.c **** 
 565:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 566:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2498              		.loc 1 566 0
 2499 0490 634B     		ldr	r3, .L151+12
 2500 0492 0022     		movs	r2, #0
 2501 0494 1A70     		strb	r2, [r3]
 567:bluetooth_rxtx.c **** 		break;
 2502              		.loc 1 567 0
 2503 0496 16E3     		b	.L105
 2504              	.L68:
 568:bluetooth_rxtx.c **** 
 569:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 570:bluetooth_rxtx.c **** 		data[0] = modulation;
 2505              		.loc 1 570 0
 2506 0498 634B     		ldr	r3, .L151+20
 2507 049a 1B78     		ldrb	r3, [r3]
 2508 049c DAB2     		uxtb	r2, r3
 2509 049e 7B68     		ldr	r3, [r7, #4]
 2510 04a0 1A70     		strb	r2, [r3]
 571:bluetooth_rxtx.c **** 		*data_len = 1;
 2511              		.loc 1 571 0
 2512 04a2 3B68     		ldr	r3, [r7]
 2513 04a4 0122     		movs	r2, #1
 2514 04a6 1A60     		str	r2, [r3]
 572:bluetooth_rxtx.c **** 		break;
 2515              		.loc 1 572 0
 2516 04a8 0DE3     		b	.L105
 2517              	.L69:
 573:bluetooth_rxtx.c **** 
 574:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 575:bluetooth_rxtx.c **** 		modulation = request_params[0];
ARM GAS  /tmp/ccvLzxWr.s 			page 54


 2518              		.loc 1 575 0
 2519 04aa BB68     		ldr	r3, [r7, #8]
 2520 04ac 1B88     		ldrh	r3, [r3]
 2521 04ae DAB2     		uxtb	r2, r3
 2522 04b0 5D4B     		ldr	r3, .L151+20
 2523 04b2 1A70     		strb	r2, [r3]
 576:bluetooth_rxtx.c **** 		break;
 2524              		.loc 1 576 0
 2525 04b4 07E3     		b	.L105
 2526              	.L57:
 577:bluetooth_rxtx.c **** 
 578:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 579:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 2527              		.loc 1 579 0
 2528 04b6 5D4B     		ldr	r3, .L151+24
 2529 04b8 1B88     		ldrh	r3, [r3]	@ movhi
 2530 04ba 9BB2     		uxth	r3, r3
 2531 04bc DAB2     		uxtb	r2, r3
 2532 04be 7B68     		ldr	r3, [r7, #4]
 2533 04c0 1A70     		strb	r2, [r3]
 580:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 2534              		.loc 1 580 0
 2535 04c2 7B68     		ldr	r3, [r7, #4]
 2536 04c4 0133     		adds	r3, r3, #1
 2537 04c6 594A     		ldr	r2, .L151+24
 2538 04c8 1288     		ldrh	r2, [r2]	@ movhi
 2539 04ca 92B2     		uxth	r2, r2
 2540 04cc 120A     		lsrs	r2, r2, #8
 2541 04ce 92B2     		uxth	r2, r2
 2542 04d0 D2B2     		uxtb	r2, r2
 2543 04d2 1A70     		strb	r2, [r3]
 581:bluetooth_rxtx.c **** 		*data_len = 2;
 2544              		.loc 1 581 0
 2545 04d4 3B68     		ldr	r3, [r7]
 2546 04d6 0222     		movs	r2, #2
 2547 04d8 1A60     		str	r2, [r3]
 582:bluetooth_rxtx.c **** 		break;
 2548              		.loc 1 582 0
 2549 04da F4E2     		b	.L105
 2550              	.L58:
 583:bluetooth_rxtx.c **** 
 584:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 585:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2551              		.loc 1 585 0
 2552 04dc BB68     		ldr	r3, [r7, #8]
 2553 04de 1A88     		ldrh	r2, [r3]
 2554 04e0 534B     		ldr	r3, .L151+28
 2555 04e2 1A80     		strh	r2, [r3]	@ movhi
 586:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 587:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 2556              		.loc 1 587 0
 2557 04e4 524B     		ldr	r3, .L151+28
 2558 04e6 1B88     		ldrh	r3, [r3]	@ movhi
 2559 04e8 9BB2     		uxth	r3, r3
 2560 04ea 40F6EA22 		movw	r2, #2794
 2561 04ee 9342     		cmp	r3, r2
 2562 04f0 07D9     		bls	.L121
ARM GAS  /tmp/ccvLzxWr.s 			page 55


 588:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 2563              		.loc 1 588 0
 2564 04f2 504B     		ldr	r3, .L151+32
 2565 04f4 0122     		movs	r2, #1
 2566 04f6 1A70     		strb	r2, [r3]
 589:bluetooth_rxtx.c **** 			requested_channel = 2402;
 2567              		.loc 1 589 0
 2568 04f8 4D4B     		ldr	r3, .L151+28
 2569 04fa 40F66212 		movw	r2, #2402
 2570 04fe 1A80     		strh	r2, [r3]	@ movhi
 2571 0500 20E0     		b	.L122
 2572              	.L121:
 590:bluetooth_rxtx.c **** 		}
 591:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 592:bluetooth_rxtx.c **** 		else {
 593:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 2573              		.loc 1 593 0
 2574 0502 4C4B     		ldr	r3, .L151+32
 2575 0504 0022     		movs	r2, #0
 2576 0506 1A70     		strb	r2, [r3]
 594:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 2577              		.loc 1 594 0
 2578 0508 494B     		ldr	r3, .L151+28
 2579 050a 1B88     		ldrh	r3, [r3]	@ movhi
 2580 050c 9BB2     		uxth	r3, r3
 2581 050e 40F6DC02 		movw	r2, #2268
 2582 0512 9342     		cmp	r3, r2
 2583 0514 03D9     		bls	.L123
 2584              		.loc 1 594 0 is_stmt 0 discriminator 1
 2585 0516 464B     		ldr	r3, .L151+28
 2586 0518 1B88     		ldrh	r3, [r3]	@ movhi
 2587 051a 9BB2     		uxth	r3, r3
 2588 051c 01E0     		b	.L124
 2589              	.L123:
 2590              		.loc 1 594 0 discriminator 2
 2591 051e 40F6DC03 		movw	r3, #2268
 2592              	.L124:
 2593              		.loc 1 594 0 discriminator 4
 2594 0522 434A     		ldr	r2, .L151+28
 2595 0524 1380     		strh	r3, [r2]	@ movhi
 595:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 2596              		.loc 1 595 0 is_stmt 1 discriminator 4
 2597 0526 424B     		ldr	r3, .L151+28
 2598 0528 1B88     		ldrh	r3, [r3]	@ movhi
 2599 052a 9BB2     		uxth	r3, r3
 2600 052c 40F6E922 		movw	r2, #2793
 2601 0530 9342     		cmp	r3, r2
 2602 0532 03D8     		bhi	.L125
 2603              		.loc 1 595 0 is_stmt 0 discriminator 1
 2604 0534 3E4B     		ldr	r3, .L151+28
 2605 0536 1B88     		ldrh	r3, [r3]	@ movhi
 2606 0538 9BB2     		uxth	r3, r3
 2607 053a 01E0     		b	.L126
 2608              	.L125:
 2609              		.loc 1 595 0 discriminator 2
 2610 053c 40F6EA23 		movw	r3, #2794
 2611              	.L126:
ARM GAS  /tmp/ccvLzxWr.s 			page 56


 2612              		.loc 1 595 0 discriminator 4
 2613 0540 3B4A     		ldr	r2, .L151+28
 2614 0542 1380     		strh	r3, [r2]	@ movhi
 2615              	.L122:
 596:bluetooth_rxtx.c **** 		}
 597:bluetooth_rxtx.c **** 
 598:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 2616              		.loc 1 598 0 is_stmt 1
 2617 0544 3C4B     		ldr	r3, .L151+36
 2618 0546 1B78     		ldrb	r3, [r3]
 2619 0548 DBB2     		uxtb	r3, r3
 2620 054a 092B     		cmp	r3, #9
 2621 054c 0AD0     		beq	.L127
 599:bluetooth_rxtx.c **** 			channel = requested_channel;
 2622              		.loc 1 599 0
 2623 054e 384B     		ldr	r3, .L151+28
 2624 0550 1B88     		ldrh	r3, [r3]	@ movhi
 2625 0552 9AB2     		uxth	r2, r3
 2626 0554 354B     		ldr	r3, .L151+24
 2627 0556 1A80     		strh	r2, [r3]	@ movhi
 600:bluetooth_rxtx.c **** 			requested_channel = 0;
 2628              		.loc 1 600 0
 2629 0558 354B     		ldr	r3, .L151+28
 2630 055a 0022     		movs	r2, #0
 2631 055c 1A80     		strh	r2, [r3]	@ movhi
 601:bluetooth_rxtx.c **** 
 602:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 603:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 604:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 2632              		.loc 1 604 0
 2633 055e FFF7FEFF 		bl	cs_threshold_calc_and_set
 605:bluetooth_rxtx.c **** 		}
 606:bluetooth_rxtx.c **** 		break;
 2634              		.loc 1 606 0
 2635 0562 B0E2     		b	.L105
 2636              	.L127:
 2637 0564 AFE2     		b	.L105
 2638              	.L70:
 607:bluetooth_rxtx.c **** 
 608:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 609:bluetooth_rxtx.c **** 		command[0] = 57;
 2639              		.loc 1 609 0
 2640 0566 3923     		movs	r3, #57
 2641 0568 7B62     		str	r3, [r7, #36]
 610:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2642              		.loc 1 610 0
 2643 056a 344B     		ldr	r3, .L151+40
 2644 056c 1B68     		ldr	r3, [r3]
 2645 056e 07F12401 		add	r1, r7, #36
 2646 0572 07F11002 		add	r2, r7, #16
 2647 0576 0846     		mov	r0, r1
 2648 0578 1146     		mov	r1, r2
 2649 057a 9847     		blx	r3
 611:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 2650              		.loc 1 611 0
 2651 057c 3B68     		ldr	r3, [r7]
 2652 057e 0022     		movs	r2, #0
ARM GAS  /tmp/ccvLzxWr.s 			page 57


 2653 0580 1A60     		str	r2, [r3]
 612:bluetooth_rxtx.c **** 		break;
 2654              		.loc 1 612 0
 2655 0582 A0E2     		b	.L105
 2656              	.L71:
 613:bluetooth_rxtx.c **** 
 614:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 615:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 2657              		.loc 1 615 0
 2658 0584 2E4B     		ldr	r3, .L151+44
 2659 0586 2F4A     		ldr	r2, .L151+48
 2660 0588 1A60     		str	r2, [r3]
 616:bluetooth_rxtx.c **** 		reset();
 2661              		.loc 1 616 0
 2662 058a FFF7FEFF 		bl	reset
 617:bluetooth_rxtx.c **** 		break;
 2663              		.loc 1 617 0
 2664 058e 9AE2     		b	.L105
 2665              	.L72:
 618:bluetooth_rxtx.c **** 
 619:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 620:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 2666              		.loc 1 620 0
 2667 0590 BB68     		ldr	r3, [r7, #8]
 2668 0592 1B88     		ldrh	r3, [r3]
 2669 0594 B3F5006F 		cmp	r3, #2048
 2670 0598 17D9     		bls	.L128
 2671              		.loc 1 620 0 is_stmt 0 discriminator 1
 2672 059a BB68     		ldr	r3, [r7, #8]
 2673 059c 1B88     		ldrh	r3, [r3]
 2674 059e B3F5406F 		cmp	r3, #3072
 2675 05a2 12D8     		bhi	.L128
 621:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2676              		.loc 1 621 0 is_stmt 1 discriminator 2
 2677 05a4 BB68     		ldr	r3, [r7, #8]
 2678 05a6 0233     		adds	r3, r3, #2
 2679 05a8 1B88     		ldrh	r3, [r3]
 620:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2680              		.loc 1 620 0 discriminator 2
 2681 05aa B3F5006F 		cmp	r3, #2048
 2682 05ae 0CD9     		bls	.L128
 2683              		.loc 1 621 0
 2684 05b0 BB68     		ldr	r3, [r7, #8]
 2685 05b2 0233     		adds	r3, r3, #2
 2686 05b4 1B88     		ldrh	r3, [r3]
 2687 05b6 B3F5406F 		cmp	r3, #3072
 2688 05ba 06D8     		bhi	.L128
 622:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 2689              		.loc 1 622 0 discriminator 1
 2690 05bc BB68     		ldr	r3, [r7, #8]
 2691 05be 0233     		adds	r3, r3, #2
 2692 05c0 1A88     		ldrh	r2, [r3]
 2693 05c2 BB68     		ldr	r3, [r7, #8]
 2694 05c4 1B88     		ldrh	r3, [r3]
 621:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2695              		.loc 1 621 0 discriminator 1
 2696 05c6 9A42     		cmp	r2, r3
ARM GAS  /tmp/ccvLzxWr.s 			page 58


 2697 05c8 01D2     		bcs	.L129
 2698              	.L128:
 623:bluetooth_rxtx.c **** 			return 0;
 2699              		.loc 1 623 0
 2700 05ca 0023     		movs	r3, #0
 2701 05cc 7CE2     		b	.L147
 2702              	.L129:
 624:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 2703              		.loc 1 624 0
 2704 05ce BB68     		ldr	r3, [r7, #8]
 2705 05d0 1A88     		ldrh	r2, [r3]
 2706 05d2 1D4B     		ldr	r3, .L151+52
 2707 05d4 1A80     		strh	r2, [r3]	@ movhi
 625:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2708              		.loc 1 625 0
 2709 05d6 BB68     		ldr	r3, [r7, #8]
 2710 05d8 5A88     		ldrh	r2, [r3, #2]
 2711 05da 1C4B     		ldr	r3, .L151+56
 2712 05dc 1A80     		strh	r2, [r3]	@ movhi
 626:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2713              		.loc 1 626 0
 2714 05de 104B     		ldr	r3, .L151+12
 2715 05e0 0422     		movs	r2, #4
 2716 05e2 1A70     		strb	r2, [r3]
 627:bluetooth_rxtx.c **** 		*data_len = 0;
 2717              		.loc 1 627 0
 2718 05e4 3B68     		ldr	r3, [r7]
 2719 05e6 0022     		movs	r2, #0
 2720 05e8 1A60     		str	r2, [r3]
 628:bluetooth_rxtx.c **** 		break;
 2721              		.loc 1 628 0
 2722 05ea 6CE2     		b	.L105
 2723              	.L79:
 629:bluetooth_rxtx.c **** 
 630:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 631:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 2724              		.loc 1 631 0
 2725 05ec BB68     		ldr	r3, [r7, #8]
 2726 05ee 1B88     		ldrh	r3, [r3]
 2727 05f0 B3F5807F 		cmp	r3, #256
 2728 05f4 01D9     		bls	.L130
 632:bluetooth_rxtx.c **** 			return 0;
 2729              		.loc 1 632 0
 2730 05f6 0023     		movs	r3, #0
 2731 05f8 66E2     		b	.L147
 2732              	.L130:
 633:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 2733              		.loc 1 633 0
 2734 05fa BB68     		ldr	r3, [r7, #8]
 2735 05fc 1B88     		ldrh	r3, [r3]
 2736 05fe DAB2     		uxtb	r2, r3
 2737 0600 134B     		ldr	r3, .L151+60
 2738 0602 1A70     		strb	r2, [r3]
 634:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2739              		.loc 1 634 0
 2740 0604 064B     		ldr	r3, .L151+12
 2741 0606 0722     		movs	r2, #7
ARM GAS  /tmp/ccvLzxWr.s 			page 59


 2742 0608 1A70     		strb	r2, [r3]
 635:bluetooth_rxtx.c **** 		*data_len = 0;
 2743              		.loc 1 635 0
 2744 060a 3B68     		ldr	r3, [r7]
 2745 060c 0022     		movs	r2, #0
 2746 060e 1A60     		str	r2, [r3]
 636:bluetooth_rxtx.c **** 		break;
 2747              		.loc 1 636 0
 2748 0610 59E2     		b	.L105
 2749              	.L152:
 2750 0612 00BF     		.align	2
 2751              	.L151:
 2752 0614 54C00920 		.word	537509972
 2753 0618 58C00920 		.word	537509976
 2754 061c 5CC00920 		.word	537509980
 2755 0620 00000000 		.word	requested_mode
 2756 0624 00000000 		.word	rr
 2757 0628 00000000 		.word	modulation
 2758 062c 00000000 		.word	channel
 2759 0630 00000000 		.word	requested_channel
 2760 0634 00000000 		.word	hop_mode
 2761 0638 00000000 		.word	mode
 2762 063c 00000000 		.word	iap_entry
 2763 0640 00000000 		.word	bootloader_ctrl
 2764 0644 21BB0543 		.word	1124449057
 2765 0648 00000000 		.word	low_freq
 2766 064c 00000000 		.word	high_freq
 2767 0650 00000000 		.word	rssi_threshold
 2768              	.L78:
 637:bluetooth_rxtx.c **** 
 638:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 639:bluetooth_rxtx.c **** 		data[0] = 0x00;
 2769              		.loc 1 639 0
 2770 0654 7B68     		ldr	r3, [r7, #4]
 2771 0656 0022     		movs	r2, #0
 2772 0658 1A70     		strb	r2, [r3]
 640:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2773              		.loc 1 640 0
 2774 065a 7B68     		ldr	r3, [r7, #4]
 2775 065c 0133     		adds	r3, r3, #1
 2776 065e 0022     		movs	r2, #0
 2777 0660 1A70     		strb	r2, [r3]
 641:bluetooth_rxtx.c **** 
 642:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 2778              		.loc 1 642 0
 2779 0662 A448     		ldr	r0, .L153
 2780 0664 FFF7FEFF 		bl	strlen
 2781 0668 0346     		mov	r3, r0
 2782 066a 87F84330 		strb	r3, [r7, #67]
 643:bluetooth_rxtx.c **** 		data[2] = length;
 2783              		.loc 1 643 0
 2784 066e 7B68     		ldr	r3, [r7, #4]
 2785 0670 0233     		adds	r3, r3, #2
 2786 0672 97F84320 		ldrb	r2, [r7, #67]
 2787 0676 1A70     		strb	r2, [r3]
 644:bluetooth_rxtx.c **** 
 645:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
ARM GAS  /tmp/ccvLzxWr.s 			page 60


 2788              		.loc 1 645 0
 2789 0678 7B68     		ldr	r3, [r7, #4]
 2790 067a DA1C     		adds	r2, r3, #3
 2791 067c 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2792 0680 1046     		mov	r0, r2
 2793 0682 9C49     		ldr	r1, .L153
 2794 0684 1A46     		mov	r2, r3
 2795 0686 FFF7FEFF 		bl	memcpy
 646:bluetooth_rxtx.c **** 
 647:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 2796              		.loc 1 647 0
 2797 068a 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2798 068e DA1C     		adds	r2, r3, #3
 2799 0690 3B68     		ldr	r3, [r7]
 2800 0692 1A60     		str	r2, [r3]
 648:bluetooth_rxtx.c **** 		break;
 2801              		.loc 1 648 0
 2802 0694 17E2     		b	.L105
 2803              	.L100:
 649:bluetooth_rxtx.c **** 
 650:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 651:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 2804              		.loc 1 651 0
 2805 0696 9848     		ldr	r0, .L153+4
 2806 0698 FFF7FEFF 		bl	strlen
 2807 069c 0346     		mov	r3, r0
 2808 069e 87F84330 		strb	r3, [r7, #67]
 652:bluetooth_rxtx.c **** 		data[0] = length;
 2809              		.loc 1 652 0
 2810 06a2 7B68     		ldr	r3, [r7, #4]
 2811 06a4 97F84320 		ldrb	r2, [r7, #67]
 2812 06a8 1A70     		strb	r2, [r3]
 653:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 2813              		.loc 1 653 0
 2814 06aa 7B68     		ldr	r3, [r7, #4]
 2815 06ac 5A1C     		adds	r2, r3, #1
 2816 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2817 06b2 1046     		mov	r0, r2
 2818 06b4 9049     		ldr	r1, .L153+4
 2819 06b6 1A46     		mov	r2, r3
 2820 06b8 FFF7FEFF 		bl	memcpy
 654:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 2821              		.loc 1 654 0
 2822 06bc 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2823 06c0 5A1C     		adds	r2, r3, #1
 2824 06c2 3B68     		ldr	r3, [r7]
 2825 06c4 1A60     		str	r2, [r3]
 655:bluetooth_rxtx.c **** 		break;
 2826              		.loc 1 655 0
 2827 06c6 FEE1     		b	.L105
 2828              	.L80:
 656:bluetooth_rxtx.c **** 
 657:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 658:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 2829              		.loc 1 658 0
 2830 06c8 7B68     		ldr	r3, [r7, #4]
 2831 06ca 0122     		movs	r2, #1
ARM GAS  /tmp/ccvLzxWr.s 			page 61


 2832 06cc 1A70     		strb	r2, [r3]
 659:bluetooth_rxtx.c **** 		*data_len = 1;
 2833              		.loc 1 659 0
 2834 06ce 3B68     		ldr	r3, [r7]
 2835 06d0 0122     		movs	r2, #1
 2836 06d2 1A60     		str	r2, [r3]
 660:bluetooth_rxtx.c **** 		break;
 2837              		.loc 1 660 0
 2838 06d4 F7E1     		b	.L105
 2839              	.L81:
 661:bluetooth_rxtx.c **** 
 662:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 663:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 2840              		.loc 1 663 0
 2841 06d6 BB68     		ldr	r3, [r7, #8]
 2842 06d8 1B88     		ldrh	r3, [r3]
 2843 06da DAB2     		uxtb	r2, r3
 2844 06dc 874B     		ldr	r3, .L153+8
 2845 06de 1A70     		strb	r2, [r3]
 664:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 2846              		.loc 1 664 0
 2847 06e0 FFF7FEFF 		bl	cs_threshold_calc_and_set
 665:bluetooth_rxtx.c **** 		break;
 2848              		.loc 1 665 0
 2849 06e4 EFE1     		b	.L105
 2850              	.L82:
 666:bluetooth_rxtx.c **** 
 667:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 668:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 2851              		.loc 1 668 0
 2852 06e6 854B     		ldr	r3, .L153+8
 2853 06e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2854 06ea DAB2     		uxtb	r2, r3
 2855 06ec 7B68     		ldr	r3, [r7, #4]
 2856 06ee 1A70     		strb	r2, [r3]
 669:bluetooth_rxtx.c **** 		*data_len = 1;
 2857              		.loc 1 669 0
 2858 06f0 3B68     		ldr	r3, [r7]
 2859 06f2 0122     		movs	r2, #1
 2860 06f4 1A60     		str	r2, [r3]
 670:bluetooth_rxtx.c **** 		break;
 2861              		.loc 1 670 0
 2862 06f6 E6E1     		b	.L105
 2863              	.L83:
 671:bluetooth_rxtx.c **** 
 672:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 673:bluetooth_rxtx.c **** 		target.address = 0;
 2864              		.loc 1 673 0
 2865 06f8 8149     		ldr	r1, .L153+12
 2866 06fa 4FF00002 		mov	r2, #0
 2867 06fe 4FF00003 		mov	r3, #0
 2868 0702 C1E90023 		strd	r2, [r1]
 674:bluetooth_rxtx.c **** 		target.access_code = 0;
 2869              		.loc 1 674 0
 2870 0706 7E49     		ldr	r1, .L153+12
 2871 0708 4FF00002 		mov	r2, #0
 2872 070c 4FF00003 		mov	r3, #0
ARM GAS  /tmp/ccvLzxWr.s 			page 62


 2873 0710 C1E90223 		strd	r2, [r1, #8]
 675:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2874              		.loc 1 675 0
 2875 0714 0023     		movs	r3, #0
 2876 0716 FB64     		str	r3, [r7, #76]
 2877 0718 25E0     		b	.L131
 2878              	.L132:
 676:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2879              		.loc 1 676 0 discriminator 3
 2880 071a 794B     		ldr	r3, .L153+12
 2881 071c D3E900AB 		ldrd	r10, [r3]
 2882 0720 FB6C     		ldr	r3, [r7, #76]
 2883 0722 7A68     		ldr	r2, [r7, #4]
 2884 0724 1344     		add	r3, r3, r2
 2885 0726 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2886 0728 DAB2     		uxtb	r2, r3
 2887 072a 4FF00003 		mov	r3, #0
 2888 072e F96C     		ldr	r1, [r7, #76]
 2889 0730 C900     		lsls	r1, r1, #3
 2890 0732 A1F12006 		sub	r6, r1, #32
 2891 0736 C1F12000 		rsb	r0, r1, #32
 2892 073a 03FA01F9 		lsl	r9, r3, r1
 2893 073e 02FA06F6 		lsl	r6, r2, r6
 2894 0742 49EA0609 		orr	r9, r9, r6
 2895 0746 22FA00F0 		lsr	r0, r2, r0
 2896 074a 49EA0009 		orr	r9, r9, r0
 2897 074e 02FA01F8 		lsl	r8, r2, r1
 2898 0752 4AEA0802 		orr	r2, r10, r8
 2899 0756 4BEA0903 		orr	r3, fp, r9
 2900 075a 6949     		ldr	r1, .L153+12
 2901 075c C1E90023 		strd	r2, [r1]
 675:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2902              		.loc 1 675 0 discriminator 3
 2903 0760 FB6C     		ldr	r3, [r7, #76]
 2904 0762 0133     		adds	r3, r3, #1
 2905 0764 FB64     		str	r3, [r7, #76]
 2906              	.L131:
 675:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2907              		.loc 1 675 0 is_stmt 0 discriminator 1
 2908 0766 FB6C     		ldr	r3, [r7, #76]
 2909 0768 072B     		cmp	r3, #7
 2910 076a D6DD     		ble	.L132
 677:bluetooth_rxtx.c **** 		}
 678:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2911              		.loc 1 678 0 is_stmt 1
 2912 076c 0023     		movs	r3, #0
 2913 076e FB64     		str	r3, [r7, #76]
 2914 0770 24E0     		b	.L133
 2915              	.L134:
 679:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2916              		.loc 1 679 0 discriminator 3
 2917 0772 634B     		ldr	r3, .L153+12
 2918 0774 D3E90289 		ldrd	r8, [r3, #8]
 2919 0778 FB6C     		ldr	r3, [r7, #76]
 2920 077a 0833     		adds	r3, r3, #8
 2921 077c 7A68     		ldr	r2, [r7, #4]
 2922 077e 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccvLzxWr.s 			page 63


 2923 0780 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2924 0782 DAB2     		uxtb	r2, r3
 2925 0784 4FF00003 		mov	r3, #0
 2926 0788 F96C     		ldr	r1, [r7, #76]
 2927 078a C900     		lsls	r1, r1, #3
 2928 078c A1F12006 		sub	r6, r1, #32
 2929 0790 C1F12000 		rsb	r0, r1, #32
 2930 0794 03FA01F5 		lsl	r5, r3, r1
 2931 0798 02FA06F6 		lsl	r6, r2, r6
 2932 079c 3543     		orrs	r5, r5, r6
 2933 079e 22FA00F0 		lsr	r0, r2, r0
 2934 07a2 0543     		orrs	r5, r5, r0
 2935 07a4 02FA01F4 		lsl	r4, r2, r1
 2936 07a8 48EA0402 		orr	r2, r8, r4
 2937 07ac 49EA0503 		orr	r3, r9, r5
 2938 07b0 5349     		ldr	r1, .L153+12
 2939 07b2 C1E90223 		strd	r2, [r1, #8]
 678:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2940              		.loc 1 678 0 discriminator 3
 2941 07b6 FB6C     		ldr	r3, [r7, #76]
 2942 07b8 0133     		adds	r3, r3, #1
 2943 07ba FB64     		str	r3, [r7, #76]
 2944              	.L133:
 678:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2945              		.loc 1 678 0 is_stmt 0 discriminator 1
 2946 07bc FB6C     		ldr	r3, [r7, #76]
 2947 07be 072B     		cmp	r3, #7
 2948 07c0 D7DD     		ble	.L134
 680:bluetooth_rxtx.c **** 		}
 681:bluetooth_rxtx.c **** 		break;
 2949              		.loc 1 681 0 is_stmt 1
 2950 07c2 80E1     		b	.L105
 2951              	.L84:
 682:bluetooth_rxtx.c **** 
 683:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 684:bluetooth_rxtx.c **** 		clock_offset = 0;
 2952              		.loc 1 684 0
 2953 07c4 0023     		movs	r3, #0
 2954 07c6 BB64     		str	r3, [r7, #72]
 685:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 2955              		.loc 1 685 0
 2956 07c8 0023     		movs	r3, #0
 2957 07ca FB64     		str	r3, [r7, #76]
 2958 07cc 0DE0     		b	.L135
 2959              	.L136:
 686:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 2960              		.loc 1 686 0 discriminator 3
 2961 07ce BB6C     		ldr	r3, [r7, #72]
 2962 07d0 1B02     		lsls	r3, r3, #8
 2963 07d2 BB64     		str	r3, [r7, #72]
 687:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 2964              		.loc 1 687 0 discriminator 3
 2965 07d4 FB6C     		ldr	r3, [r7, #76]
 2966 07d6 7A68     		ldr	r2, [r7, #4]
 2967 07d8 1344     		add	r3, r3, r2
 2968 07da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2969 07dc 1A46     		mov	r2, r3
ARM GAS  /tmp/ccvLzxWr.s 			page 64


 2970 07de BB6C     		ldr	r3, [r7, #72]
 2971 07e0 1343     		orrs	r3, r3, r2
 2972 07e2 BB64     		str	r3, [r7, #72]
 685:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 2973              		.loc 1 685 0 discriminator 3
 2974 07e4 FB6C     		ldr	r3, [r7, #76]
 2975 07e6 0133     		adds	r3, r3, #1
 2976 07e8 FB64     		str	r3, [r7, #76]
 2977              	.L135:
 685:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 2978              		.loc 1 685 0 is_stmt 0 discriminator 1
 2979 07ea FB6C     		ldr	r3, [r7, #76]
 2980 07ec 032B     		cmp	r3, #3
 2981 07ee EEDD     		ble	.L136
 688:bluetooth_rxtx.c **** 		}
 689:bluetooth_rxtx.c **** 		clkn += clock_offset;
 2982              		.loc 1 689 0 is_stmt 1
 2983 07f0 444B     		ldr	r3, .L153+16
 2984 07f2 1A68     		ldr	r2, [r3]
 2985 07f4 BB6C     		ldr	r3, [r7, #72]
 2986 07f6 1344     		add	r3, r3, r2
 2987 07f8 424A     		ldr	r2, .L153+16
 2988 07fa 1360     		str	r3, [r2]
 690:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 2989              		.loc 1 690 0
 2990 07fc 424B     		ldr	r3, .L153+20
 2991 07fe 0222     		movs	r2, #2
 2992 0800 1A70     		strb	r2, [r3]
 691:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 2993              		.loc 1 691 0
 2994 0802 424B     		ldr	r3, .L153+24
 2995 0804 0822     		movs	r2, #8
 2996 0806 1A70     		strb	r2, [r3]
 692:bluetooth_rxtx.c **** 		break;
 2997              		.loc 1 692 0
 2998 0808 5DE1     		b	.L105
 2999              	.L85:
 693:bluetooth_rxtx.c **** 
 694:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 695:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3000              		.loc 1 695 0
 3001 080a 7B68     		ldr	r3, [r7, #4]
 3002 080c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3003 080e 1A46     		mov	r2, r3
 3004 0810 7B68     		ldr	r3, [r7, #4]
 3005 0812 0133     		adds	r3, r3, #1
 3006 0814 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3007 0816 1B02     		lsls	r3, r3, #8
 3008 0818 1A43     		orrs	r2, r2, r3
 3009 081a 7B68     		ldr	r3, [r7, #4]
 3010 081c 0233     		adds	r3, r3, #2
 3011 081e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3012 0820 1B04     		lsls	r3, r3, #16
 3013 0822 1A43     		orrs	r2, r2, r3
 3014 0824 7B68     		ldr	r3, [r7, #4]
 3015 0826 0333     		adds	r3, r3, #3
 3016 0828 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccvLzxWr.s 			page 65


 3017 082a 1B06     		lsls	r3, r3, #24
 3018 082c 1343     		orrs	r3, r3, r2
 3019 082e FB63     		str	r3, [r7, #60]
 696:bluetooth_rxtx.c **** 		clkn = clock;
 3020              		.loc 1 696 0
 3021 0830 344A     		ldr	r2, .L153+16
 3022 0832 FB6B     		ldr	r3, [r7, #60]
 3023 0834 1360     		str	r3, [r2]
 697:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3024              		.loc 1 697 0
 3025 0836 FFF7FEFF 		bl	cs_threshold_calc_and_set
 698:bluetooth_rxtx.c **** 		break;
 3026              		.loc 1 698 0
 3027 083a 44E1     		b	.L105
 3028              	.L96:
 699:bluetooth_rxtx.c **** 
 700:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 701:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3029              		.loc 1 701 0
 3030 083c 0023     		movs	r3, #0
 3031 083e FB64     		str	r3, [r7, #76]
 3032 0840 0BE0     		b	.L137
 3033              	.L138:
 702:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3034              		.loc 1 702 0 discriminator 3
 3035 0842 FB6C     		ldr	r3, [r7, #76]
 3036 0844 7A68     		ldr	r2, [r7, #4]
 3037 0846 1344     		add	r3, r3, r2
 3038 0848 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3039 084a 314A     		ldr	r2, .L153+28
 3040 084c FB6C     		ldr	r3, [r7, #76]
 3041 084e 1344     		add	r3, r3, r2
 3042 0850 0A46     		mov	r2, r1
 3043 0852 1A70     		strb	r2, [r3]
 701:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3044              		.loc 1 701 0 discriminator 3
 3045 0854 FB6C     		ldr	r3, [r7, #76]
 3046 0856 0133     		adds	r3, r3, #1
 3047 0858 FB64     		str	r3, [r7, #76]
 3048              	.L137:
 701:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3049              		.loc 1 701 0 is_stmt 0 discriminator 1
 3050 085a FB6C     		ldr	r3, [r7, #76]
 3051 085c 092B     		cmp	r3, #9
 3052 085e F0DD     		ble	.L138
 703:bluetooth_rxtx.c **** 		}
 704:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3053              		.loc 1 704 0 is_stmt 1
 3054 0860 2C4B     		ldr	r3, .L153+32
 3055 0862 0122     		movs	r2, #1
 3056 0864 1A70     		strb	r2, [r3]
 705:bluetooth_rxtx.c **** 		*data_len = 10;
 3057              		.loc 1 705 0
 3058 0866 3B68     		ldr	r3, [r7]
 3059 0868 0A22     		movs	r2, #10
 3060 086a 1A60     		str	r2, [r3]
 706:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccvLzxWr.s 			page 66


 3061              		.loc 1 706 0
 3062 086c 2BE1     		b	.L105
 3063              	.L97:
 707:bluetooth_rxtx.c **** 
 708:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 709:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3064              		.loc 1 709 0
 3065 086e 0023     		movs	r3, #0
 3066 0870 FB64     		str	r3, [r7, #76]
 3067 0872 07E0     		b	.L139
 3068              	.L140:
 710:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3069              		.loc 1 710 0 discriminator 3
 3070 0874 264A     		ldr	r2, .L153+28
 3071 0876 FB6C     		ldr	r3, [r7, #76]
 3072 0878 1344     		add	r3, r3, r2
 3073 087a 0022     		movs	r2, #0
 3074 087c 1A70     		strb	r2, [r3]
 709:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3075              		.loc 1 709 0 discriminator 3
 3076 087e FB6C     		ldr	r3, [r7, #76]
 3077 0880 0133     		adds	r3, r3, #1
 3078 0882 FB64     		str	r3, [r7, #76]
 3079              	.L139:
 709:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3080              		.loc 1 709 0 is_stmt 0 discriminator 1
 3081 0884 FB6C     		ldr	r3, [r7, #76]
 3082 0886 092B     		cmp	r3, #9
 3083 0888 F4DD     		ble	.L140
 711:bluetooth_rxtx.c **** 		}
 712:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3084              		.loc 1 712 0 is_stmt 1
 3085 088a 224B     		ldr	r3, .L153+32
 3086 088c 0022     		movs	r2, #0
 3087 088e 1A70     		strb	r2, [r3]
 713:bluetooth_rxtx.c **** 		*data_len = 10;
 3088              		.loc 1 713 0
 3089 0890 3B68     		ldr	r3, [r7]
 3090 0892 0A22     		movs	r2, #10
 3091 0894 1A60     		str	r2, [r3]
 714:bluetooth_rxtx.c **** 		break;
 3092              		.loc 1 714 0
 3093 0896 16E1     		b	.L105
 3094              	.L86:
 715:bluetooth_rxtx.c **** 
 716:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 717:bluetooth_rxtx.c **** 		clock = clkn;
 3095              		.loc 1 717 0
 3096 0898 1A4B     		ldr	r3, .L153+16
 3097 089a 1B68     		ldr	r3, [r3]
 3098 089c FB63     		str	r3, [r7, #60]
 718:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3099              		.loc 1 718 0
 3100 089e 0023     		movs	r3, #0
 3101 08a0 FB64     		str	r3, [r7, #76]
 3102 08a2 0CE0     		b	.L141
 3103              	.L142:
ARM GAS  /tmp/ccvLzxWr.s 			page 67


 719:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3104              		.loc 1 719 0 discriminator 3
 3105 08a4 FB6C     		ldr	r3, [r7, #76]
 3106 08a6 7A68     		ldr	r2, [r7, #4]
 3107 08a8 1344     		add	r3, r3, r2
 3108 08aa FA6C     		ldr	r2, [r7, #76]
 3109 08ac D200     		lsls	r2, r2, #3
 3110 08ae F96B     		ldr	r1, [r7, #60]
 3111 08b0 21FA02F2 		lsr	r2, r1, r2
 3112 08b4 D2B2     		uxtb	r2, r2
 3113 08b6 1A70     		strb	r2, [r3]
 718:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3114              		.loc 1 718 0 discriminator 3
 3115 08b8 FB6C     		ldr	r3, [r7, #76]
 3116 08ba 0133     		adds	r3, r3, #1
 3117 08bc FB64     		str	r3, [r7, #76]
 3118              	.L141:
 718:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3119              		.loc 1 718 0 is_stmt 0 discriminator 1
 3120 08be FB6C     		ldr	r3, [r7, #76]
 3121 08c0 032B     		cmp	r3, #3
 3122 08c2 EFDD     		ble	.L142
 720:bluetooth_rxtx.c **** 		}
 721:bluetooth_rxtx.c **** 		*data_len = 4;
 3123              		.loc 1 721 0 is_stmt 1
 3124 08c4 3B68     		ldr	r3, [r7]
 3125 08c6 0422     		movs	r2, #4
 3126 08c8 1A60     		str	r2, [r3]
 722:bluetooth_rxtx.c **** 		break;
 3127              		.loc 1 722 0
 3128 08ca FCE0     		b	.L105
 3129              	.L87:
 723:bluetooth_rxtx.c **** 
 724:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 725:bluetooth_rxtx.c **** 		*data_len = 0;
 3130              		.loc 1 725 0
 3131 08cc 3B68     		ldr	r3, [r7]
 3132 08ce 0022     		movs	r2, #0
 3133 08d0 1A60     		str	r2, [r3]
 726:bluetooth_rxtx.c **** 
 727:bluetooth_rxtx.c **** 		do_hop = 0;
 3134              		.loc 1 727 0
 3135 08d2 114B     		ldr	r3, .L153+36
 3136 08d4 0022     		movs	r2, #0
 3137 08d6 1A70     		strb	r2, [r3]
 728:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3138              		.loc 1 728 0
 3139 08d8 0B4B     		ldr	r3, .L153+20
 3140 08da 0322     		movs	r2, #3
 3141 08dc 1A70     		strb	r2, [r3]
 729:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3142              		.loc 1 729 0
 3143 08de 0B4B     		ldr	r3, .L153+24
 3144 08e0 0922     		movs	r2, #9
 3145 08e2 1A70     		strb	r2, [r3]
 730:bluetooth_rxtx.c **** 
 731:bluetooth_rxtx.c **** 		queue_init();
ARM GAS  /tmp/ccvLzxWr.s 			page 68


 3146              		.loc 1 731 0
 3147 08e4 FFF7FEFF 		bl	queue_init
 732:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3148              		.loc 1 732 0
 3149 08e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 733:bluetooth_rxtx.c **** 		break;
 3150              		.loc 1 733 0
 3151 08ec EBE0     		b	.L105
 3152              	.L88:
 734:bluetooth_rxtx.c **** 
 735:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 736:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3153              		.loc 1 736 0
 3154 08ee 0023     		movs	r3, #0
 3155 08f0 FB64     		str	r3, [r7, #76]
 3156 08f2 21E0     		b	.L143
 3157              	.L154:
 3158              		.align	2
 3159              	.L153:
 3160 08f4 C0080000 		.word	.LC3
 3161 08f8 00000000 		.word	compile_info
 3162 08fc 00000000 		.word	cs_threshold_req
 3163 0900 00000000 		.word	target
 3164 0904 00000000 		.word	clkn
 3165 0908 00000000 		.word	hop_mode
 3166 090c 00000000 		.word	requested_mode
 3167 0910 00000000 		.word	afh_map
 3168 0914 00000000 		.word	afh_enabled
 3169 0918 00000000 		.word	do_hop
 3170              	.L144:
 737:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3171              		.loc 1 737 0 discriminator 3
 3172 091c FB6C     		ldr	r3, [r7, #76]
 3173 091e 7A68     		ldr	r2, [r7, #4]
 3174 0920 1344     		add	r3, r3, r2
 3175 0922 6C4A     		ldr	r2, .L155
 3176 0924 1168     		ldr	r1, [r2]
 3177 0926 FA6C     		ldr	r2, [r7, #76]
 3178 0928 D200     		lsls	r2, r2, #3
 3179 092a 21FA02F2 		lsr	r2, r1, r2
 3180 092e D2B2     		uxtb	r2, r2
 3181 0930 1A70     		strb	r2, [r3]
 736:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3182              		.loc 1 736 0 discriminator 3
 3183 0932 FB6C     		ldr	r3, [r7, #76]
 3184 0934 0133     		adds	r3, r3, #1
 3185 0936 FB64     		str	r3, [r7, #76]
 3186              	.L143:
 736:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3187              		.loc 1 736 0 is_stmt 0 discriminator 1
 3188 0938 FB6C     		ldr	r3, [r7, #76]
 3189 093a 032B     		cmp	r3, #3
 3190 093c EEDD     		ble	.L144
 738:bluetooth_rxtx.c **** 		}
 739:bluetooth_rxtx.c **** 		*data_len = 4;
 3191              		.loc 1 739 0 is_stmt 1
 3192 093e 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccvLzxWr.s 			page 69


 3193 0940 0422     		movs	r2, #4
 3194 0942 1A60     		str	r2, [r3]
 740:bluetooth_rxtx.c **** 		break;
 3195              		.loc 1 740 0
 3196 0944 BFE0     		b	.L105
 3197              	.L89:
 741:bluetooth_rxtx.c **** 
 742:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 743:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3198              		.loc 1 743 0
 3199 0946 7B68     		ldr	r3, [r7, #4]
 3200 0948 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3201 094a 1A46     		mov	r2, r3
 3202 094c 7B68     		ldr	r3, [r7, #4]
 3203 094e 0133     		adds	r3, r3, #1
 3204 0950 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3205 0952 1B02     		lsls	r3, r3, #8
 3206 0954 1A43     		orrs	r2, r2, r3
 3207 0956 7B68     		ldr	r3, [r7, #4]
 3208 0958 0233     		adds	r3, r3, #2
 3209 095a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3210 095c 1B04     		lsls	r3, r3, #16
 3211 095e 1A43     		orrs	r2, r2, r3
 3212 0960 7B68     		ldr	r3, [r7, #4]
 3213 0962 0333     		adds	r3, r3, #3
 3214 0964 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3215 0966 1B06     		lsls	r3, r3, #24
 3216 0968 1343     		orrs	r3, r3, r2
 3217 096a 1846     		mov	r0, r3
 3218 096c FFF7FEFF 		bl	le_set_access_address
 744:bluetooth_rxtx.c **** 		le.target_set = 1;
 3219              		.loc 1 744 0
 3220 0970 584B     		ldr	r3, .L155
 3221 0972 0122     		movs	r2, #1
 3222 0974 DA63     		str	r2, [r3, #60]
 745:bluetooth_rxtx.c **** 		break;
 3223              		.loc 1 745 0
 3224 0976 A6E0     		b	.L105
 3225              	.L91:
 746:bluetooth_rxtx.c **** 
 747:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 748:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 749:bluetooth_rxtx.c **** 		break;
 750:bluetooth_rxtx.c **** 
 751:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 752:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 753:bluetooth_rxtx.c **** 		// don't commit here please
 754:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3226              		.loc 1 754 0
 3227 0978 7B68     		ldr	r3, [r7, #4]
 3228 097a 1322     		movs	r2, #19
 3229 097c 1A70     		strb	r2, [r3]
 755:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3230              		.loc 1 755 0
 3231 097e 7B68     		ldr	r3, [r7, #4]
 3232 0980 0133     		adds	r3, r3, #1
 3233 0982 3722     		movs	r2, #55
ARM GAS  /tmp/ccvLzxWr.s 			page 70


 3234 0984 1A70     		strb	r2, [r3]
 756:bluetooth_rxtx.c **** 		*data_len = 2;
 3235              		.loc 1 756 0
 3236 0986 3B68     		ldr	r3, [r7]
 3237 0988 0222     		movs	r2, #2
 3238 098a 1A60     		str	r2, [r3]
 757:bluetooth_rxtx.c **** 		break;
 3239              		.loc 1 757 0
 3240 098c 9BE0     		b	.L105
 3241              	.L92:
 758:bluetooth_rxtx.c **** 
 759:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 760:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3242              		.loc 1 760 0
 3243 098e 514B     		ldr	r3, .L155
 3244 0990 1B69     		ldr	r3, [r3, #16]
 3245 0992 002B     		cmp	r3, #0
 3246 0994 14BF     		ite	ne
 3247 0996 0123     		movne	r3, #1
 3248 0998 0023     		moveq	r3, #0
 3249 099a DBB2     		uxtb	r3, r3
 3250 099c 1A46     		mov	r2, r3
 3251 099e 7B68     		ldr	r3, [r7, #4]
 3252 09a0 1A70     		strb	r2, [r3]
 761:bluetooth_rxtx.c **** 		*data_len = 1;
 3253              		.loc 1 761 0
 3254 09a2 3B68     		ldr	r3, [r7]
 3255 09a4 0122     		movs	r2, #1
 3256 09a6 1A60     		str	r2, [r3]
 762:bluetooth_rxtx.c **** 		break;
 3257              		.loc 1 762 0
 3258 09a8 8DE0     		b	.L105
 3259              	.L93:
 763:bluetooth_rxtx.c **** 
 764:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 765:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3260              		.loc 1 765 0
 3261 09aa BB68     		ldr	r3, [r7, #8]
 3262 09ac 1B88     		ldrh	r3, [r3]
 3263 09ae 002B     		cmp	r3, #0
 3264 09b0 14BF     		ite	ne
 3265 09b2 0123     		movne	r3, #1
 3266 09b4 0023     		moveq	r3, #0
 3267 09b6 DBB2     		uxtb	r3, r3
 3268 09b8 1A46     		mov	r2, r3
 3269 09ba 464B     		ldr	r3, .L155
 3270 09bc 1A61     		str	r2, [r3, #16]
 766:bluetooth_rxtx.c **** 		break;
 3271              		.loc 1 766 0
 3272 09be 82E0     		b	.L105
 3273              	.L94:
 767:bluetooth_rxtx.c **** 
 768:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 769:bluetooth_rxtx.c **** 		p = dequeue();
 3274              		.loc 1 769 0
 3275 09c0 FFF7FEFF 		bl	dequeue
 3276 09c4 7864     		str	r0, [r7, #68]
ARM GAS  /tmp/ccvLzxWr.s 			page 71


 770:bluetooth_rxtx.c **** 		if (p != NULL) {
 3277              		.loc 1 770 0
 3278 09c6 7B6C     		ldr	r3, [r7, #68]
 3279 09c8 002B     		cmp	r3, #0
 3280 09ca 08D0     		beq	.L145
 771:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3281              		.loc 1 771 0
 3282 09cc 7868     		ldr	r0, [r7, #4]
 3283 09ce 796C     		ldr	r1, [r7, #68]
 3284 09d0 4022     		movs	r2, #64
 3285 09d2 FFF7FEFF 		bl	memcpy
 772:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3286              		.loc 1 772 0
 3287 09d6 3B68     		ldr	r3, [r7]
 3288 09d8 4022     		movs	r2, #64
 3289 09da 1A60     		str	r2, [r3]
 773:bluetooth_rxtx.c **** 		} else {
 774:bluetooth_rxtx.c **** 			data[0] = 0;
 775:bluetooth_rxtx.c **** 			*data_len = 1;
 776:bluetooth_rxtx.c **** 		}
 777:bluetooth_rxtx.c **** 		break;
 3290              		.loc 1 777 0
 3291 09dc 73E0     		b	.L105
 3292              	.L145:
 774:bluetooth_rxtx.c **** 			*data_len = 1;
 3293              		.loc 1 774 0
 3294 09de 7B68     		ldr	r3, [r7, #4]
 3295 09e0 0022     		movs	r2, #0
 3296 09e2 1A70     		strb	r2, [r3]
 775:bluetooth_rxtx.c **** 		}
 3297              		.loc 1 775 0
 3298 09e4 3B68     		ldr	r3, [r7]
 3299 09e6 0122     		movs	r2, #1
 3300 09e8 1A60     		str	r2, [r3]
 3301              		.loc 1 777 0
 3302 09ea 6CE0     		b	.L105
 3303              	.L95:
 778:bluetooth_rxtx.c **** 
 779:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 780:bluetooth_rxtx.c **** 		*data_len = 0;
 3304              		.loc 1 780 0
 3305 09ec 3B68     		ldr	r3, [r7]
 3306 09ee 0022     		movs	r2, #0
 3307 09f0 1A60     		str	r2, [r3]
 781:bluetooth_rxtx.c **** 
 782:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3308              		.loc 1 782 0
 3309 09f2 394B     		ldr	r3, .L155+4
 3310 09f4 0022     		movs	r2, #0
 3311 09f6 1A70     		strb	r2, [r3]
 783:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3312              		.loc 1 783 0
 3313 09f8 384B     		ldr	r3, .L155+8
 3314 09fa 0A22     		movs	r2, #10
 3315 09fc 1A70     		strb	r2, [r3]
 784:bluetooth_rxtx.c **** 
 785:bluetooth_rxtx.c **** 		queue_init();
ARM GAS  /tmp/ccvLzxWr.s 			page 72


 3316              		.loc 1 785 0
 3317 09fe FFF7FEFF 		bl	queue_init
 786:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3318              		.loc 1 786 0
 3319 0a02 FFF7FEFF 		bl	cs_threshold_calc_and_set
 787:bluetooth_rxtx.c **** 		break;
 3320              		.loc 1 787 0
 3321 0a06 5EE0     		b	.L105
 3322              	.L98:
 788:bluetooth_rxtx.c **** 
 789:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 790:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3323              		.loc 1 790 0
 3324 0a08 BB68     		ldr	r3, [r7, #8]
 3325 0a0a 1B88     		ldrh	r3, [r3]
 3326 0a0c DBB2     		uxtb	r3, r3
 3327 0a0e 1846     		mov	r0, r3
 3328 0a10 FFF7FEFF 		bl	cc2400_get
 3329 0a14 0346     		mov	r3, r0
 3330 0a16 7B87     		strh	r3, [r7, #58]	@ movhi
 791:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3331              		.loc 1 791 0
 3332 0a18 7B8F     		ldrh	r3, [r7, #58]
 3333 0a1a 1B0A     		lsrs	r3, r3, #8
 3334 0a1c 9BB2     		uxth	r3, r3
 3335 0a1e DAB2     		uxtb	r2, r3
 3336 0a20 7B68     		ldr	r3, [r7, #4]
 3337 0a22 1A70     		strb	r2, [r3]
 792:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3338              		.loc 1 792 0
 3339 0a24 7B68     		ldr	r3, [r7, #4]
 3340 0a26 0133     		adds	r3, r3, #1
 3341 0a28 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3342 0a2a D2B2     		uxtb	r2, r2
 3343 0a2c 1A70     		strb	r2, [r3]
 793:bluetooth_rxtx.c **** 		*data_len = 2;
 3344              		.loc 1 793 0
 3345 0a2e 3B68     		ldr	r3, [r7]
 3346 0a30 0222     		movs	r2, #2
 3347 0a32 1A60     		str	r2, [r3]
 794:bluetooth_rxtx.c **** 		break;
 3348              		.loc 1 794 0
 3349 0a34 47E0     		b	.L105
 3350              	.L102:
 795:bluetooth_rxtx.c **** 
 796:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 797:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3351              		.loc 1 797 0
 3352 0a36 BB68     		ldr	r3, [r7, #8]
 3353 0a38 1B88     		ldrh	r3, [r3]
 3354 0a3a DAB2     		uxtb	r2, r3
 3355 0a3c BB68     		ldr	r3, [r7, #8]
 3356 0a3e 0233     		adds	r3, r3, #2
 3357 0a40 1B88     		ldrh	r3, [r3]
 3358 0a42 1046     		mov	r0, r2
 3359 0a44 1946     		mov	r1, r3
 3360 0a46 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccvLzxWr.s 			page 73


 798:bluetooth_rxtx.c **** 		break;
 3361              		.loc 1 798 0
 3362 0a4a 3CE0     		b	.L105
 3363              	.L99:
 799:bluetooth_rxtx.c **** 
 800:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 801:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3364              		.loc 1 801 0
 3365 0a4c 2448     		ldr	r0, .L155+12
 3366 0a4e 7968     		ldr	r1, [r7, #4]
 3367 0a50 0622     		movs	r2, #6
 3368 0a52 FFF7FEFF 		bl	memcpy
 802:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3369              		.loc 1 802 0
 3370 0a56 214B     		ldr	r3, .L155+8
 3371 0a58 0C22     		movs	r2, #12
 3372 0a5a 1A70     		strb	r2, [r3]
 803:bluetooth_rxtx.c **** 		break;
 3373              		.loc 1 803 0
 3374 0a5c 33E0     		b	.L105
 3375              	.L101:
 804:bluetooth_rxtx.c **** 
 805:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 806:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 807:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 808:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3376              		.loc 1 808 0
 3377 0a5e 7B68     		ldr	r3, [r7, #4]
 3378 0a60 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3379 0a62 1C4B     		ldr	r3, .L155
 3380 0a64 83F83420 		strb	r2, [r3, #52]
 809:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3381              		.loc 1 809 0
 3382 0a68 7B68     		ldr	r3, [r7, #4]
 3383 0a6a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3384 0a6c 194B     		ldr	r3, .L155
 3385 0a6e 83F83520 		strb	r2, [r3, #53]
 810:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3386              		.loc 1 810 0
 3387 0a72 7B68     		ldr	r3, [r7, #4]
 3388 0a74 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3389 0a76 174B     		ldr	r3, .L155
 3390 0a78 83F83620 		strb	r2, [r3, #54]
 811:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3391              		.loc 1 811 0
 3392 0a7c 7B68     		ldr	r3, [r7, #4]
 3393 0a7e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3394 0a80 144B     		ldr	r3, .L155
 3395 0a82 83F83720 		strb	r2, [r3, #55]
 812:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3396              		.loc 1 812 0
 3397 0a86 7B68     		ldr	r3, [r7, #4]
 3398 0a88 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3399 0a8a 124B     		ldr	r3, .L155
 3400 0a8c 83F83820 		strb	r2, [r3, #56]
 813:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3401              		.loc 1 813 0
ARM GAS  /tmp/ccvLzxWr.s 			page 74


 3402 0a90 7B68     		ldr	r3, [r7, #4]
 3403 0a92 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3404 0a94 0F4B     		ldr	r3, .L155
 3405 0a96 83F83920 		strb	r2, [r3, #57]
 814:bluetooth_rxtx.c **** 		le.target_set = 1;
 3406              		.loc 1 814 0
 3407 0a9a 0E4B     		ldr	r3, .L155
 3408 0a9c 0122     		movs	r2, #1
 3409 0a9e DA63     		str	r2, [r3, #60]
 815:bluetooth_rxtx.c **** 		break;
 3410              		.loc 1 815 0
 3411 0aa0 11E0     		b	.L105
 3412              	.L103:
 816:bluetooth_rxtx.c **** 
 817:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 818:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 819:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3413              		.loc 1 819 0
 3414 0aa2 BB68     		ldr	r3, [r7, #8]
 3415 0aa4 1B88     		ldrh	r3, [r3]
 3416 0aa6 DAB2     		uxtb	r2, r3
 3417 0aa8 0E4B     		ldr	r3, .L155+16
 3418 0aaa 1A70     		strb	r2, [r3]
 820:bluetooth_rxtx.c **** 		break;
 3419              		.loc 1 820 0
 3420 0aac 0BE0     		b	.L105
 3421              	.L104:
 821:bluetooth_rxtx.c **** #endif
 822:bluetooth_rxtx.c **** 
 823:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 824:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 825:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 826:bluetooth_rxtx.c **** 			return 0;
 827:bluetooth_rxtx.c **** #endif
 828:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3422              		.loc 1 828 0
 3423 0aae 0B4B     		ldr	r3, .L155+8
 3424 0ab0 0D22     		movs	r2, #13
 3425 0ab2 1A70     		strb	r2, [r3]
 829:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3426              		.loc 1 829 0
 3427 0ab4 BB68     		ldr	r3, [r7, #8]
 3428 0ab6 1B88     		ldrh	r3, [r3]
 3429 0ab8 DAB2     		uxtb	r2, r3
 3430 0aba 0B4B     		ldr	r3, .L155+20
 3431 0abc 1A70     		strb	r2, [r3]
 830:bluetooth_rxtx.c **** 		break;
 3432              		.loc 1 830 0
 3433 0abe 02E0     		b	.L105
 3434              	.L45:
 831:bluetooth_rxtx.c **** 
 832:bluetooth_rxtx.c **** 	default:
 833:bluetooth_rxtx.c **** 		return 0;
 3435              		.loc 1 833 0
 3436 0ac0 0023     		movs	r3, #0
 3437 0ac2 01E0     		b	.L147
 3438              	.L148:
ARM GAS  /tmp/ccvLzxWr.s 			page 75


 749:bluetooth_rxtx.c **** 
 3439              		.loc 1 749 0
 3440 0ac4 00BF     		nop
 3441              	.L105:
 834:bluetooth_rxtx.c **** 	}
 835:bluetooth_rxtx.c **** 	return 1;
 3442              		.loc 1 835 0
 3443 0ac6 0123     		movs	r3, #1
 3444              	.L147:
 836:bluetooth_rxtx.c **** }
 3445              		.loc 1 836 0 discriminator 1
 3446 0ac8 1846     		mov	r0, r3
 3447 0aca 5437     		adds	r7, r7, #84
 3448              		.cfi_def_cfa_offset 36
 3449 0acc BD46     		mov	sp, r7
 3450              		.cfi_def_cfa_register 13
 3451              		@ sp needed
 3452 0ace BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3453              	.L156:
 3454 0ad2 00BF     		.align	2
 3455              	.L155:
 3456 0ad4 00000000 		.word	le
 3457 0ad8 00000000 		.word	hop_mode
 3458 0adc 00000000 		.word	requested_mode
 3459 0ae0 00000000 		.word	slave_mac_address
 3460 0ae4 00000000 		.word	jam_mode
 3461 0ae8 00000000 		.word	ego_mode
 3462              		.cfi_endproc
 3463              	.LFE9:
 3465              		.section	.text.clkn_init,"ax",%progbits
 3466              		.align	2
 3467              		.thumb
 3468              		.thumb_func
 3470              	clkn_init:
 3471              	.LFB10:
 837:bluetooth_rxtx.c **** 
 838:bluetooth_rxtx.c **** static void clkn_init()
 839:bluetooth_rxtx.c **** {
 3472              		.loc 1 839 0
 3473              		.cfi_startproc
 3474              		@ args = 0, pretend = 0, frame = 0
 3475              		@ frame_needed = 1, uses_anonymous_args = 0
 3476              		@ link register save eliminated.
 3477 0000 80B4     		push	{r7}
 3478              		.cfi_def_cfa_offset 4
 3479              		.cfi_offset 7, -4
 3480 0002 00AF     		add	r7, sp, #0
 3481              		.cfi_def_cfa_register 7
 840:bluetooth_rxtx.c **** 	/*
 841:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 842:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 843:bluetooth_rxtx.c **** 	 * clock_start().
 844:bluetooth_rxtx.c **** 	 */
 845:bluetooth_rxtx.c **** 
 846:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 847:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3482              		.loc 1 847 0
ARM GAS  /tmp/ccvLzxWr.s 			page 76


 3483 0004 0C4B     		ldr	r3, .L158
 3484 0006 0222     		movs	r2, #2
 3485 0008 1A60     		str	r2, [r3]
 848:bluetooth_rxtx.c **** 	clkn = 0;
 3486              		.loc 1 848 0
 3487 000a 0C4B     		ldr	r3, .L158+4
 3488 000c 0022     		movs	r2, #0
 3489 000e 1A60     		str	r2, [r3]
 849:bluetooth_rxtx.c **** 
 850:bluetooth_rxtx.c **** #ifdef TC13BADGE
 851:bluetooth_rxtx.c **** 	/*
 852:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 853:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 854:bluetooth_rxtx.c **** 	 */
 855:bluetooth_rxtx.c **** 	T0PR = 2;
 856:bluetooth_rxtx.c **** #else
 857:bluetooth_rxtx.c **** 	/*
 858:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 859:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 860:bluetooth_rxtx.c **** 	 */
 861:bluetooth_rxtx.c **** 	T0PR = 4;
 3490              		.loc 1 861 0
 3491 0010 0B4B     		ldr	r3, .L158+8
 3492 0012 0422     		movs	r2, #4
 3493 0014 1A60     		str	r2, [r3]
 862:bluetooth_rxtx.c **** #endif
 863:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 864:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3494              		.loc 1 864 0
 3495 0016 0B4B     		ldr	r3, .L158+12
 3496 0018 40F63442 		movw	r2, #3124
 3497 001c 1A60     		str	r2, [r3]
 865:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3498              		.loc 1 865 0
 3499 001e 0A4B     		ldr	r3, .L158+16
 3500 0020 0322     		movs	r2, #3
 3501 0022 1A60     		str	r2, [r3]
 866:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3502              		.loc 1 866 0
 3503 0024 094B     		ldr	r3, .L158+20
 3504 0026 0222     		movs	r2, #2
 3505 0028 1A60     		str	r2, [r3]
 867:bluetooth_rxtx.c **** 
 868:bluetooth_rxtx.c **** 	/* start timer */
 869:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3506              		.loc 1 869 0
 3507 002a 034B     		ldr	r3, .L158
 3508 002c 0122     		movs	r2, #1
 3509 002e 1A60     		str	r2, [r3]
 870:bluetooth_rxtx.c **** }
 3510              		.loc 1 870 0
 3511 0030 BD46     		mov	sp, r7
 3512              		.cfi_def_cfa_register 13
 3513              		@ sp needed
 3514 0032 5DF8047B 		ldr	r7, [sp], #4
 3515              		.cfi_restore 7
 3516              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccvLzxWr.s 			page 77


 3517 0036 7047     		bx	lr
 3518              	.L159:
 3519              		.align	2
 3520              	.L158:
 3521 0038 04400040 		.word	1073758212
 3522 003c 00000000 		.word	clkn
 3523 0040 0C400040 		.word	1073758220
 3524 0044 18400040 		.word	1073758232
 3525 0048 14400040 		.word	1073758228
 3526 004c 00E100E0 		.word	-536813312
 3527              		.cfi_endproc
 3528              	.LFE10:
 3530              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3531              		.align	2
 3532              		.global	TIMER0_IRQHandler
 3533              		.thumb
 3534              		.thumb_func
 3536              	TIMER0_IRQHandler:
 3537              	.LFB11:
 871:bluetooth_rxtx.c **** 
 872:bluetooth_rxtx.c **** /* Update CLKN. */
 873:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 874:bluetooth_rxtx.c **** {
 3538              		.loc 1 874 0
 3539              		.cfi_startproc
 3540              		@ args = 0, pretend = 0, frame = 8
 3541              		@ frame_needed = 1, uses_anonymous_args = 0
 3542              		@ link register save eliminated.
 3543 0000 80B4     		push	{r7}
 3544              		.cfi_def_cfa_offset 4
 3545              		.cfi_offset 7, -4
 3546 0002 83B0     		sub	sp, sp, #12
 3547              		.cfi_def_cfa_offset 16
 3548 0004 00AF     		add	r7, sp, #0
 3549              		.cfi_def_cfa_register 7
 875:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
 876:bluetooth_rxtx.c **** 	u32 next;
 877:bluetooth_rxtx.c **** 	u32 le_clk;
 878:bluetooth_rxtx.c **** 
 879:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3550              		.loc 1 879 0
 3551 0006 4FF04023 		mov	r3, #1073758208
 3552 000a 1B68     		ldr	r3, [r3]
 3553 000c 03F00103 		and	r3, r3, #1
 3554 0010 002B     		cmp	r3, #0
 3555 0012 6DD0     		beq	.L160
 880:bluetooth_rxtx.c **** 
 881:bluetooth_rxtx.c **** 		clkn++;
 3556              		.loc 1 881 0
 3557 0014 394B     		ldr	r3, .L170
 3558 0016 1B68     		ldr	r3, [r3]
 3559 0018 0133     		adds	r3, r3, #1
 3560 001a 384A     		ldr	r2, .L170
 3561 001c 1360     		str	r3, [r2]
 882:bluetooth_rxtx.c **** 		next = clkn;
 3562              		.loc 1 882 0
 3563 001e 374B     		ldr	r3, .L170
ARM GAS  /tmp/ccvLzxWr.s 			page 78


 3564 0020 1B68     		ldr	r3, [r3]
 3565 0022 7B60     		str	r3, [r7, #4]
 883:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 3566              		.loc 1 883 0
 3567 0024 364B     		ldr	r3, .L170+4
 3568 0026 9B69     		ldr	r3, [r3, #24]
 3569 0028 7A68     		ldr	r2, [r7, #4]
 3570 002a D31A     		subs	r3, r2, r3
 3571 002c 03F00303 		and	r3, r3, #3
 3572 0030 3B60     		str	r3, [r7]
 884:bluetooth_rxtx.c **** 
 885:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 886:bluetooth_rxtx.c **** 
 887:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 888:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 3573              		.loc 1 888 0
 3574 0032 344B     		ldr	r3, .L170+8
 3575 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3576 0036 002B     		cmp	r3, #0
 3577 0038 03D0     		beq	.L162
 3578              		.loc 1 888 0 is_stmt 0 discriminator 1
 3579 003a 324B     		ldr	r3, .L170+8
 3580 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3581 003e 012B     		cmp	r3, #1
 3582 0040 09D1     		bne	.L163
 3583              	.L162:
 889:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3584              		.loc 1 889 0 is_stmt 1
 3585 0042 7B68     		ldr	r3, [r7, #4]
 3586 0044 03F07F03 		and	r3, r3, #127
 3587 0048 002B     		cmp	r3, #0
 3588 004a 03D1     		bne	.L164
 890:bluetooth_rxtx.c **** 				do_hop = 1;
 3589              		.loc 1 890 0
 3590 004c 2E4B     		ldr	r3, .L170+12
 3591 004e 0122     		movs	r2, #1
 3592 0050 1A70     		strb	r2, [r3]
 889:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3593              		.loc 1 889 0
 3594 0052 37E0     		b	.L165
 3595              	.L164:
 3596 0054 36E0     		b	.L165
 3597              	.L163:
 891:bluetooth_rxtx.c **** 		}
 892:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 893:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 3598              		.loc 1 893 0
 3599 0056 2B4B     		ldr	r3, .L170+8
 3600 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3601 005a 022B     		cmp	r3, #2
 3602 005c 08D1     		bne	.L166
 894:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 3603              		.loc 1 894 0
 3604 005e 7B68     		ldr	r3, [r7, #4]
 3605 0060 03F00103 		and	r3, r3, #1
 3606 0064 002B     		cmp	r3, #0
 3607 0066 2DD1     		bne	.L165
ARM GAS  /tmp/ccvLzxWr.s 			page 79


 895:bluetooth_rxtx.c **** 				do_hop = 1;
 3608              		.loc 1 895 0
 3609 0068 274B     		ldr	r3, .L170+12
 3610 006a 0122     		movs	r2, #1
 3611 006c 1A70     		strb	r2, [r3]
 3612 006e 29E0     		b	.L165
 3613              	.L166:
 896:bluetooth_rxtx.c **** 		}
 897:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 898:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 3614              		.loc 1 898 0
 3615 0070 244B     		ldr	r3, .L170+8
 3616 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3617 0074 032B     		cmp	r3, #3
 3618 0076 25D1     		bne	.L165
 899:bluetooth_rxtx.c **** 			// Only hop if connected
 900:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 3619              		.loc 1 900 0
 3620 0078 214B     		ldr	r3, .L170+4
 3621 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3622 007c 032B     		cmp	r3, #3
 3623 007e 21D1     		bne	.L165
 3624              		.loc 1 900 0 is_stmt 0 discriminator 1
 3625 0080 3B68     		ldr	r3, [r7]
 3626 0082 002B     		cmp	r3, #0
 3627 0084 1ED1     		bne	.L165
 901:bluetooth_rxtx.c **** 				--le.interval_timer;
 3628              		.loc 1 901 0 is_stmt 1
 3629 0086 1E4B     		ldr	r3, .L170+4
 3630 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3631 008a 9BB2     		uxth	r3, r3
 3632 008c 013B     		subs	r3, r3, #1
 3633 008e 9AB2     		uxth	r2, r3
 3634 0090 1B4B     		ldr	r3, .L170+4
 3635 0092 9A83     		strh	r2, [r3, #28]	@ movhi
 902:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3636              		.loc 1 902 0
 3637 0094 1A4B     		ldr	r3, .L170+4
 3638 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3639 0098 9BB2     		uxth	r3, r3
 3640 009a 002B     		cmp	r3, #0
 3641 009c 0ED1     		bne	.L168
 903:bluetooth_rxtx.c **** 					do_hop = 1;
 3642              		.loc 1 903 0
 3643 009e 1A4B     		ldr	r3, .L170+12
 3644 00a0 0122     		movs	r2, #1
 3645 00a2 1A70     		strb	r2, [r3]
 904:bluetooth_rxtx.c **** 					++le.conn_count;
 3646              		.loc 1 904 0
 3647 00a4 164B     		ldr	r3, .L170+4
 3648 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 3649 00a8 9BB2     		uxth	r3, r3
 3650 00aa 0133     		adds	r3, r3, #1
 3651 00ac 9AB2     		uxth	r2, r3
 3652 00ae 144B     		ldr	r3, .L170+4
 3653 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
 905:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
ARM GAS  /tmp/ccvLzxWr.s 			page 80


 3654              		.loc 1 905 0
 3655 00b2 134B     		ldr	r3, .L170+4
 3656 00b4 DA8B     		ldrh	r2, [r3, #30]
 3657 00b6 124B     		ldr	r3, .L170+4
 3658 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 3659 00ba 03E0     		b	.L165
 3660              	.L168:
 906:bluetooth_rxtx.c **** 				} else {
 907:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 3661              		.loc 1 907 0
 3662 00bc 134B     		ldr	r3, .L170+16
 3663 00be 4FF48072 		mov	r2, #256
 3664 00c2 1A60     		str	r2, [r3]
 3665              	.L165:
 908:bluetooth_rxtx.c **** 				}
 909:bluetooth_rxtx.c **** 			}
 910:bluetooth_rxtx.c **** 		}
 911:bluetooth_rxtx.c **** 
 912:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
 913:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 3666              		.loc 1 913 0
 3667 00c4 7B68     		ldr	r3, [r7, #4]
 3668 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 3669 00ca 002B     		cmp	r3, #0
 3670 00cc 02D1     		bne	.L169
 914:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 3671              		.loc 1 914 0
 3672 00ce 104B     		ldr	r3, .L170+20
 3673 00d0 0122     		movs	r2, #1
 3674 00d2 1A70     		strb	r2, [r3]
 3675              	.L169:
 915:bluetooth_rxtx.c **** 
 916:bluetooth_rxtx.c **** 		/* Ack interrupt */
 917:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 3676              		.loc 1 917 0
 3677 00d4 0F4A     		ldr	r2, .L170+24
 3678 00d6 104B     		ldr	r3, .L170+28
 3679 00d8 1B68     		ldr	r3, [r3]
 3680 00da C3F54363 		rsb	r3, r3, #3120
 3681 00de 0433     		adds	r3, r3, #4
 3682 00e0 1360     		str	r3, [r2]
 918:bluetooth_rxtx.c **** 		clock_trim = 0;
 3683              		.loc 1 918 0
 3684 00e2 0D4B     		ldr	r3, .L170+28
 3685 00e4 0022     		movs	r2, #0
 3686 00e6 1A60     		str	r2, [r3]
 919:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 3687              		.loc 1 919 0
 3688 00e8 4FF04023 		mov	r3, #1073758208
 3689 00ec 0122     		movs	r2, #1
 3690 00ee 1A60     		str	r2, [r3]
 3691              	.L160:
 920:bluetooth_rxtx.c **** 	}
 921:bluetooth_rxtx.c **** }
 3692              		.loc 1 921 0
 3693 00f0 0C37     		adds	r7, r7, #12
 3694              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccvLzxWr.s 			page 81


 3695 00f2 BD46     		mov	sp, r7
 3696              		.cfi_def_cfa_register 13
 3697              		@ sp needed
 3698 00f4 5DF8047B 		ldr	r7, [sp], #4
 3699              		.cfi_restore 7
 3700              		.cfi_def_cfa_offset 0
 3701 00f8 7047     		bx	lr
 3702              	.L171:
 3703 00fa 00BF     		.align	2
 3704              	.L170:
 3705 00fc 00000000 		.word	clkn
 3706 0100 00000000 		.word	le
 3707 0104 00000000 		.word	hop_mode
 3708 0108 00000000 		.word	do_hop
 3709 010c 3CC00920 		.word	537509948
 3710 0110 00000000 		.word	keepalive_trigger
 3711 0114 18400040 		.word	1073758232
 3712 0118 00000000 		.word	clock_trim
 3713              		.cfi_endproc
 3714              	.LFE11:
 3716              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3717              		.align	2
 3718              		.global	EINT3_IRQHandler
 3719              		.thumb
 3720              		.thumb_func
 3722              	EINT3_IRQHandler:
 3723              	.LFB12:
 922:bluetooth_rxtx.c **** 
 923:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 924:bluetooth_rxtx.c **** #ifndef TC13BADGE
 925:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 926:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 927:bluetooth_rxtx.c **** {
 3724              		.loc 1 927 0
 3725              		.cfi_startproc
 3726              		@ args = 0, pretend = 0, frame = 0
 3727              		@ frame_needed = 1, uses_anonymous_args = 0
 3728              		@ link register save eliminated.
 3729 0000 80B4     		push	{r7}
 3730              		.cfi_def_cfa_offset 4
 3731              		.cfi_offset 7, -4
 3732 0002 00AF     		add	r7, sp, #0
 3733              		.cfi_def_cfa_register 7
 928:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 929:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 3734              		.loc 1 929 0
 3735 0004 0B4B     		ldr	r3, .L173
 3736 0006 0422     		movs	r2, #4
 3737 0008 1A60     		str	r2, [r3]
 930:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 3738              		.loc 1 930 0
 3739 000a 0B4B     		ldr	r3, .L173+4
 3740 000c 0122     		movs	r2, #1
 3741 000e 1A70     		strb	r2, [r3]
 931:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 3742              		.loc 1 931 0
 3743 0010 0A4B     		ldr	r3, .L173+8
ARM GAS  /tmp/ccvLzxWr.s 			page 82


 3744 0012 1B68     		ldr	r3, [r3]
 3745 0014 C3F31303 		ubfx	r3, r3, #0, #20
 3746 0018 40F63542 		movw	r2, #3125
 3747 001c 02FB03F2 		mul	r2, r2, r3
 3748 0020 074B     		ldr	r3, .L173+12
 3749 0022 1B68     		ldr	r3, [r3]
 3750 0024 1344     		add	r3, r3, r2
 3751 0026 074A     		ldr	r2, .L173+16
 3752 0028 1360     		str	r3, [r2]
 932:bluetooth_rxtx.c **** }
 3753              		.loc 1 932 0
 3754 002a BD46     		mov	sp, r7
 3755              		.cfi_def_cfa_register 13
 3756              		@ sp needed
 3757 002c 5DF8047B 		ldr	r7, [sp], #4
 3758              		.cfi_restore 7
 3759              		.cfi_def_cfa_offset 0
 3760 0030 7047     		bx	lr
 3761              	.L174:
 3762 0032 00BF     		.align	2
 3763              	.L173:
 3764 0034 AC800240 		.word	1073905836
 3765 0038 00000000 		.word	cs_trigger
 3766 003c 00000000 		.word	clkn
 3767 0040 08400040 		.word	1073758216
 3768 0044 00000000 		.word	cs_timestamp
 3769              		.cfi_endproc
 3770              	.LFE12:
 3772              		.global	__aeabi_ui2d
 3773              		.global	__aeabi_dmul
 3774              		.global	__aeabi_ddiv
 3775              		.global	__aeabi_dadd
 3776              		.global	__aeabi_d2uiz
 3777              		.section	.text.msleep,"ax",%progbits
 3778              		.align	2
 3779              		.thumb
 3780              		.thumb_func
 3782              	msleep:
 3783              	.LFB13:
 933:bluetooth_rxtx.c **** #endif // TC13BADGE
 934:bluetooth_rxtx.c **** 
 935:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
 936:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 937:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 938:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 939:bluetooth_rxtx.c **** {
 3784              		.loc 1 939 0
 3785              		.cfi_startproc
 3786              		@ args = 0, pretend = 0, frame = 16
 3787              		@ frame_needed = 1, uses_anonymous_args = 0
 3788 0000 B0B5     		push	{r4, r5, r7, lr}
 3789              		.cfi_def_cfa_offset 16
 3790              		.cfi_offset 4, -16
 3791              		.cfi_offset 5, -12
 3792              		.cfi_offset 7, -8
 3793              		.cfi_offset 14, -4
 3794 0002 84B0     		sub	sp, sp, #16
ARM GAS  /tmp/ccvLzxWr.s 			page 83


 3795              		.cfi_def_cfa_offset 32
 3796 0004 00AF     		add	r7, sp, #0
 3797              		.cfi_def_cfa_register 7
 3798 0006 7860     		str	r0, [r7, #4]
 940:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 3799              		.loc 1 940 0
 3800 0008 1B4B     		ldr	r3, .L177+8
 3801 000a 1B68     		ldr	r3, [r3]
 3802 000c 1846     		mov	r0, r3
 3803 000e FFF7FEFF 		bl	__aeabi_ui2d
 3804 0012 0446     		mov	r4, r0
 3805 0014 0D46     		mov	r5, r1
 3806 0016 7868     		ldr	r0, [r7, #4]
 3807 0018 FFF7FEFF 		bl	__aeabi_ui2d
 3808 001c 0246     		mov	r2, r0
 3809 001e 0B46     		mov	r3, r1
 3810 0020 1046     		mov	r0, r2
 3811 0022 1946     		mov	r1, r3
 3812 0024 12A3     		adr	r3, .L177
 3813 0026 D3E90023 		ldrd	r2, [r3]
 3814 002a FFF7FEFF 		bl	__aeabi_dmul
 3815 002e 0246     		mov	r2, r0
 3816 0030 0B46     		mov	r3, r1
 3817 0032 1046     		mov	r0, r2
 3818 0034 1946     		mov	r1, r3
 3819 0036 4FF00002 		mov	r2, #0
 3820 003a 104B     		ldr	r3, .L177+12
 3821 003c FFF7FEFF 		bl	__aeabi_ddiv
 3822 0040 0246     		mov	r2, r0
 3823 0042 0B46     		mov	r3, r1
 3824 0044 2046     		mov	r0, r4
 3825 0046 2946     		mov	r1, r5
 3826 0048 FFF7FEFF 		bl	__aeabi_dadd
 3827 004c 0246     		mov	r2, r0
 3828 004e 0B46     		mov	r3, r1
 3829 0050 1046     		mov	r0, r2
 3830 0052 1946     		mov	r1, r3
 3831 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 3832 0058 0346     		mov	r3, r0
 3833 005a FB60     		str	r3, [r7, #12]
 3834              	.L176:
 941:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 3835              		.loc 1 941 0 discriminator 1
 3836 005c 064B     		ldr	r3, .L177+8
 3837 005e 1A68     		ldr	r2, [r3]
 3838 0060 FB68     		ldr	r3, [r7, #12]
 3839 0062 9A42     		cmp	r2, r3
 3840 0064 FAD3     		bcc	.L176
 942:bluetooth_rxtx.c **** }
 3841              		.loc 1 942 0
 3842 0066 1037     		adds	r7, r7, #16
 3843              		.cfi_def_cfa_offset 16
 3844 0068 BD46     		mov	sp, r7
 3845              		.cfi_def_cfa_register 13
 3846              		@ sp needed
 3847 006a B0BD     		pop	{r4, r5, r7, pc}
 3848              	.L178:
ARM GAS  /tmp/ccvLzxWr.s 			page 84


 3849 006c AFF30080 		.align	3
 3850              	.L177:
 3851 0070 00000000 		.word	0
 3852 0074 00887340 		.word	1081313280
 3853 0078 00000000 		.word	clkn
 3854 007c 00408F40 		.word	1083129856
 3855              		.cfi_endproc
 3856              	.LFE13:
 3858              		.section	.text.dma_init,"ax",%progbits
 3859              		.align	2
 3860              		.thumb
 3861              		.thumb_func
 3863              	dma_init:
 3864              	.LFB14:
 943:bluetooth_rxtx.c **** 
 944:bluetooth_rxtx.c **** static void dma_init()
 945:bluetooth_rxtx.c **** {
 3865              		.loc 1 945 0
 3866              		.cfi_startproc
 3867              		@ args = 0, pretend = 0, frame = 0
 3868              		@ frame_needed = 1, uses_anonymous_args = 0
 3869              		@ link register save eliminated.
 3870 0000 80B4     		push	{r7}
 3871              		.cfi_def_cfa_offset 4
 3872              		.cfi_offset 7, -4
 3873 0002 00AF     		add	r7, sp, #0
 3874              		.cfi_def_cfa_register 7
 946:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 947:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 3875              		.loc 1 947 0
 3876 0004 3F4A     		ldr	r2, .L181
 3877 0006 3F4B     		ldr	r3, .L181
 3878 0008 1B68     		ldr	r3, [r3]
 3879 000a 43F00053 		orr	r3, r3, #536870912
 3880 000e 1360     		str	r3, [r2]
 948:bluetooth_rxtx.c **** 
 949:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
 950:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 3881              		.loc 1 950 0
 3882 0010 3D4B     		ldr	r3, .L181+4
 3883 0012 0022     		movs	r2, #0
 3884 0014 1A60     		str	r2, [r3]
 951:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 3885              		.loc 1 951 0
 3886 0016 3D4B     		ldr	r3, .L181+8
 3887 0018 0022     		movs	r2, #0
 3888 001a 1A60     		str	r2, [r3]
 952:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 3889              		.loc 1 952 0
 3890 001c 3C4B     		ldr	r3, .L181+12
 3891 001e 0022     		movs	r2, #0
 3892 0020 1A60     		str	r2, [r3]
 953:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 3893              		.loc 1 953 0
 3894 0022 3C4B     		ldr	r3, .L181+16
 3895 0024 0022     		movs	r2, #0
 3896 0026 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 85


 954:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 3897              		.loc 1 954 0
 3898 0028 3B4B     		ldr	r3, .L181+20
 3899 002a 0022     		movs	r2, #0
 3900 002c 1A60     		str	r2, [r3]
 955:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 3901              		.loc 1 955 0
 3902 002e 3B4B     		ldr	r3, .L181+24
 3903 0030 0022     		movs	r2, #0
 3904 0032 1A60     		str	r2, [r3]
 956:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 3905              		.loc 1 956 0
 3906 0034 3A4B     		ldr	r3, .L181+28
 3907 0036 0022     		movs	r2, #0
 3908 0038 1A60     		str	r2, [r3]
 957:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 3909              		.loc 1 957 0
 3910 003a 3A4B     		ldr	r3, .L181+32
 3911 003c 0022     		movs	r2, #0
 3912 003e 1A60     		str	r2, [r3]
 958:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 3913              		.loc 1 958 0
 3914 0040 394B     		ldr	r3, .L181+36
 3915 0042 FF22     		movs	r2, #255
 3916 0044 1A60     		str	r2, [r3]
 959:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 3917              		.loc 1 959 0
 3918 0046 394B     		ldr	r3, .L181+40
 3919 0048 FF22     		movs	r2, #255
 3920 004a 1A60     		str	r2, [r3]
 960:bluetooth_rxtx.c **** 
 961:bluetooth_rxtx.c **** 	/* DMA linked lists */
 962:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 3921              		.loc 1 962 0
 3922 004c 384B     		ldr	r3, .L181+44
 3923 004e 394A     		ldr	r2, .L181+48
 3924 0050 1A60     		str	r2, [r3]
 963:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 3925              		.loc 1 963 0
 3926 0052 394A     		ldr	r2, .L181+52
 3927 0054 364B     		ldr	r3, .L181+44
 3928 0056 5A60     		str	r2, [r3, #4]
 964:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 3929              		.loc 1 964 0
 3930 0058 384A     		ldr	r2, .L181+56
 3931 005a 354B     		ldr	r3, .L181+44
 3932 005c 9A60     		str	r2, [r3, #8]
 965:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 3933              		.loc 1 965 0
 3934 005e 344B     		ldr	r3, .L181+44
 3935 0060 374A     		ldr	r2, .L181+60
 3936 0062 DA60     		str	r2, [r3, #12]
 966:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 967:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 968:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 969:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 970:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
ARM GAS  /tmp/ccvLzxWr.s 			page 86


 971:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 972:bluetooth_rxtx.c **** 
 973:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 3937              		.loc 1 973 0
 3938 0064 354B     		ldr	r3, .L181+56
 3939 0066 334A     		ldr	r2, .L181+48
 3940 0068 1A60     		str	r2, [r3]
 974:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 3941              		.loc 1 974 0
 3942 006a 364A     		ldr	r2, .L181+64
 3943 006c 334B     		ldr	r3, .L181+56
 3944 006e 5A60     		str	r2, [r3, #4]
 975:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 3945              		.loc 1 975 0
 3946 0070 2F4A     		ldr	r2, .L181+44
 3947 0072 324B     		ldr	r3, .L181+56
 3948 0074 9A60     		str	r2, [r3, #8]
 976:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 3949              		.loc 1 976 0
 3950 0076 314B     		ldr	r3, .L181+56
 3951 0078 314A     		ldr	r2, .L181+60
 3952 007a DA60     		str	r2, [r3, #12]
 977:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 978:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 979:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 980:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 981:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 982:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 983:bluetooth_rxtx.c **** 
 984:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
 985:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 3953              		.loc 1 985 0
 3954 007c 324B     		ldr	r3, .L181+68
 3955 007e 4FF08062 		mov	r2, #67108864
 3956 0082 1A60     		str	r2, [r3]
 986:bluetooth_rxtx.c **** 
 987:bluetooth_rxtx.c **** 	/* enable DMA globally */
 988:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 3957              		.loc 1 988 0
 3958 0084 314B     		ldr	r3, .L181+72
 3959 0086 0122     		movs	r2, #1
 3960 0088 1A60     		str	r2, [r3]
 989:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 3961              		.loc 1 989 0
 3962 008a 00BF     		nop
 3963              	.L180:
 3964              		.loc 1 989 0 is_stmt 0 discriminator 1
 3965 008c 2F4B     		ldr	r3, .L181+72
 3966 008e 1B68     		ldr	r3, [r3]
 3967 0090 03F00103 		and	r3, r3, #1
 3968 0094 002B     		cmp	r3, #0
 3969 0096 F9D0     		beq	.L180
 990:bluetooth_rxtx.c **** 
 991:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
 992:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 3970              		.loc 1 992 0 is_stmt 1
 3971 0098 2D4A     		ldr	r2, .L181+76
ARM GAS  /tmp/ccvLzxWr.s 			page 87


 3972 009a 254B     		ldr	r3, .L181+44
 3973 009c 1B68     		ldr	r3, [r3]
 3974 009e 1360     		str	r3, [r2]
 993:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 3975              		.loc 1 993 0
 3976 00a0 2C4A     		ldr	r2, .L181+80
 3977 00a2 234B     		ldr	r3, .L181+44
 3978 00a4 5B68     		ldr	r3, [r3, #4]
 3979 00a6 1360     		str	r3, [r2]
 994:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 3980              		.loc 1 994 0
 3981 00a8 2B4A     		ldr	r2, .L181+84
 3982 00aa 214B     		ldr	r3, .L181+44
 3983 00ac 9B68     		ldr	r3, [r3, #8]
 3984 00ae 1360     		str	r3, [r2]
 995:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 3985              		.loc 1 995 0
 3986 00b0 2A4A     		ldr	r2, .L181+88
 3987 00b2 1F4B     		ldr	r3, .L181+44
 3988 00b4 DB68     		ldr	r3, [r3, #12]
 3989 00b6 1360     		str	r3, [r2]
 996:bluetooth_rxtx.c **** 	DMACC0Config =
 3990              		.loc 1 996 0
 3991 00b8 134B     		ldr	r3, .L181+4
 3992 00ba 4DF20602 		movw	r2, #53254
 3993 00be 1A60     		str	r2, [r3]
 997:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
 998:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
 999:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1000:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1001:bluetooth_rxtx.c **** 
1002:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 3994              		.loc 1 1002 0
 3995 00c0 274B     		ldr	r3, .L181+92
 3996 00c2 1B68     		ldr	r3, [r3]
 3997 00c4 1B0D     		lsrs	r3, r3, #20
 3998 00c6 DBB2     		uxtb	r3, r3
 3999 00c8 264A     		ldr	r2, .L181+96
 4000 00ca 1360     		str	r3, [r2]
1003:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4001              		.loc 1 1003 0
 4002 00cc 244B     		ldr	r3, .L181+92
 4003 00ce 1B68     		ldr	r3, [r3]
 4004 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4005 00d4 40F63542 		movw	r2, #3125
 4006 00d8 02FB03F2 		mul	r2, r2, r3
 4007 00dc 224B     		ldr	r3, .L181+100
 4008 00de 1B68     		ldr	r3, [r3]
 4009 00e0 1344     		add	r3, r3, r2
 4010 00e2 224A     		ldr	r2, .L181+104
 4011 00e4 1360     		str	r3, [r2]
1004:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4012              		.loc 1 1004 0
 4013 00e6 224B     		ldr	r3, .L181+108
 4014 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4015 00ea 9AB2     		uxth	r2, r3
 4016 00ec 214B     		ldr	r3, .L181+112
ARM GAS  /tmp/ccvLzxWr.s 			page 88


 4017 00ee 1A80     		strh	r2, [r3]	@ movhi
1005:bluetooth_rxtx.c **** 
1006:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1007:bluetooth_rxtx.c **** 	rx_tc = 0;
 4018              		.loc 1 1007 0
 4019 00f0 214B     		ldr	r3, .L181+116
 4020 00f2 0022     		movs	r2, #0
 4021 00f4 1A60     		str	r2, [r3]
1008:bluetooth_rxtx.c **** 	rx_err = 0;
 4022              		.loc 1 1008 0
 4023 00f6 214B     		ldr	r3, .L181+120
 4024 00f8 0022     		movs	r2, #0
 4025 00fa 1A60     		str	r2, [r3]
1009:bluetooth_rxtx.c **** }
 4026              		.loc 1 1009 0
 4027 00fc BD46     		mov	sp, r7
 4028              		.cfi_def_cfa_register 13
 4029              		@ sp needed
 4030 00fe 5DF8047B 		ldr	r7, [sp], #4
 4031              		.cfi_restore 7
 4032              		.cfi_def_cfa_offset 0
 4033 0102 7047     		bx	lr
 4034              	.L182:
 4035              		.align	2
 4036              	.L181:
 4037 0104 C4C00F40 		.word	1074774212
 4038 0108 10410050 		.word	1342193936
 4039 010c 30410050 		.word	1342193968
 4040 0110 50410050 		.word	1342194000
 4041 0114 70410050 		.word	1342194032
 4042 0118 90410050 		.word	1342194064
 4043 011c B0410050 		.word	1342194096
 4044 0120 D0410050 		.word	1342194128
 4045 0124 F0410050 		.word	1342194160
 4046 0128 08400050 		.word	1342193672
 4047 012c 10400050 		.word	1342193680
 4048 0130 00000000 		.word	rx_dma_lli1
 4049 0134 08000340 		.word	1073938440
 4050 0138 00000000 		.word	rxbuf1
 4051 013c 00000000 		.word	rx_dma_lli2
 4052 0140 32900088 		.word	-2013229006
 4053 0144 00000000 		.word	rxbuf2
 4054 0148 80E100E0 		.word	-536813184
 4055 014c 30400050 		.word	1342193712
 4056 0150 00410050 		.word	1342193920
 4057 0154 04410050 		.word	1342193924
 4058 0158 08410050 		.word	1342193928
 4059 015c 0C410050 		.word	1342193932
 4060 0160 00000000 		.word	clkn
 4061 0164 00000000 		.word	active_buf_clkn_high
 4062 0168 08400040 		.word	1073758216
 4063 016c 00000000 		.word	active_buf_clk100ns
 4064 0170 00000000 		.word	channel
 4065 0174 00000000 		.word	active_buf_channel
 4066 0178 00000000 		.word	rx_tc
 4067 017c 00000000 		.word	rx_err
 4068              		.cfi_endproc
ARM GAS  /tmp/ccvLzxWr.s 			page 89


 4069              	.LFE14:
 4071              		.section	.text.dma_init_le,"ax",%progbits
 4072              		.align	2
 4073              		.thumb
 4074              		.thumb_func
 4076              	dma_init_le:
 4077              	.LFB15:
1010:bluetooth_rxtx.c **** 
1011:bluetooth_rxtx.c **** static void dma_init_le()
1012:bluetooth_rxtx.c **** {
 4078              		.loc 1 1012 0
 4079              		.cfi_startproc
 4080              		@ args = 0, pretend = 0, frame = 8
 4081              		@ frame_needed = 1, uses_anonymous_args = 0
 4082              		@ link register save eliminated.
 4083 0000 80B4     		push	{r7}
 4084              		.cfi_def_cfa_offset 4
 4085              		.cfi_offset 7, -4
 4086 0002 83B0     		sub	sp, sp, #12
 4087              		.cfi_def_cfa_offset 16
 4088 0004 00AF     		add	r7, sp, #0
 4089              		.cfi_def_cfa_register 7
1013:bluetooth_rxtx.c **** 	int i;
1014:bluetooth_rxtx.c **** 
1015:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1016:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4090              		.loc 1 1016 0
 4091 0006 4B4A     		ldr	r2, .L189
 4092 0008 4A4B     		ldr	r3, .L189
 4093 000a 1B68     		ldr	r3, [r3]
 4094 000c 43F00053 		orr	r3, r3, #536870912
 4095 0010 1360     		str	r3, [r2]
1017:bluetooth_rxtx.c **** 
1018:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1019:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4096              		.loc 1 1019 0
 4097 0012 494B     		ldr	r3, .L189+4
 4098 0014 0022     		movs	r2, #0
 4099 0016 1A60     		str	r2, [r3]
1020:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4100              		.loc 1 1020 0
 4101 0018 484B     		ldr	r3, .L189+8
 4102 001a 0022     		movs	r2, #0
 4103 001c 1A60     		str	r2, [r3]
1021:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4104              		.loc 1 1021 0
 4105 001e 484B     		ldr	r3, .L189+12
 4106 0020 0022     		movs	r2, #0
 4107 0022 1A60     		str	r2, [r3]
1022:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4108              		.loc 1 1022 0
 4109 0024 474B     		ldr	r3, .L189+16
 4110 0026 0022     		movs	r2, #0
 4111 0028 1A60     		str	r2, [r3]
1023:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4112              		.loc 1 1023 0
 4113 002a 474B     		ldr	r3, .L189+20
ARM GAS  /tmp/ccvLzxWr.s 			page 90


 4114 002c 0022     		movs	r2, #0
 4115 002e 1A60     		str	r2, [r3]
1024:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4116              		.loc 1 1024 0
 4117 0030 464B     		ldr	r3, .L189+24
 4118 0032 0022     		movs	r2, #0
 4119 0034 1A60     		str	r2, [r3]
1025:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4120              		.loc 1 1025 0
 4121 0036 464B     		ldr	r3, .L189+28
 4122 0038 0022     		movs	r2, #0
 4123 003a 1A60     		str	r2, [r3]
1026:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4124              		.loc 1 1026 0
 4125 003c 454B     		ldr	r3, .L189+32
 4126 003e 0022     		movs	r2, #0
 4127 0040 1A60     		str	r2, [r3]
1027:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4128              		.loc 1 1027 0
 4129 0042 454B     		ldr	r3, .L189+36
 4130 0044 FF22     		movs	r2, #255
 4131 0046 1A60     		str	r2, [r3]
1028:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4132              		.loc 1 1028 0
 4133 0048 444B     		ldr	r3, .L189+40
 4134 004a FF22     		movs	r2, #255
 4135 004c 1A60     		str	r2, [r3]
1029:bluetooth_rxtx.c **** 
1030:bluetooth_rxtx.c **** 	/* enable DMA globally */
1031:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4136              		.loc 1 1031 0
 4137 004e 444B     		ldr	r3, .L189+44
 4138 0050 0122     		movs	r2, #1
 4139 0052 1A60     		str	r2, [r3]
1032:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4140              		.loc 1 1032 0
 4141 0054 00BF     		nop
 4142              	.L184:
 4143              		.loc 1 1032 0 is_stmt 0 discriminator 1
 4144 0056 424B     		ldr	r3, .L189+44
 4145 0058 1B68     		ldr	r3, [r3]
 4146 005a 03F00103 		and	r3, r3, #1
 4147 005e 002B     		cmp	r3, #0
 4148 0060 F9D0     		beq	.L184
1033:bluetooth_rxtx.c **** 
1034:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4149              		.loc 1 1034 0 is_stmt 1
 4150 0062 0023     		movs	r3, #0
 4151 0064 7B60     		str	r3, [r7, #4]
 4152 0066 2AE0     		b	.L185
 4153              	.L188:
1035:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4154              		.loc 1 1035 0
 4155 0068 3E4A     		ldr	r2, .L189+48
 4156 006a 7B68     		ldr	r3, [r7, #4]
 4157 006c 1B01     		lsls	r3, r3, #4
 4158 006e 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccvLzxWr.s 			page 91


 4159 0070 3D4A     		ldr	r2, .L189+52
 4160 0072 1A60     		str	r2, [r3]
1036:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4161              		.loc 1 1036 0
 4162 0074 7B68     		ldr	r3, [r7, #4]
 4163 0076 9B00     		lsls	r3, r3, #2
 4164 0078 3C4A     		ldr	r2, .L189+56
 4165 007a 1344     		add	r3, r3, r2
 4166 007c 1946     		mov	r1, r3
 4167 007e 394A     		ldr	r2, .L189+48
 4168 0080 7B68     		ldr	r3, [r7, #4]
 4169 0082 1B01     		lsls	r3, r3, #4
 4170 0084 1344     		add	r3, r3, r2
 4171 0086 5960     		str	r1, [r3, #4]
1037:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4172              		.loc 1 1037 0
 4173 0088 7B68     		ldr	r3, [r7, #4]
 4174 008a 092B     		cmp	r3, #9
 4175 008c 06DC     		bgt	.L186
 4176              		.loc 1 1037 0 is_stmt 0 discriminator 1
 4177 008e 7B68     		ldr	r3, [r7, #4]
 4178 0090 0133     		adds	r3, r3, #1
 4179 0092 1B01     		lsls	r3, r3, #4
 4180 0094 334A     		ldr	r2, .L189+48
 4181 0096 1344     		add	r3, r3, r2
 4182 0098 1A46     		mov	r2, r3
 4183 009a 00E0     		b	.L187
 4184              	.L186:
 4185              		.loc 1 1037 0 discriminator 2
 4186 009c 0022     		movs	r2, #0
 4187              	.L187:
 4188              		.loc 1 1037 0 discriminator 4
 4189 009e 3149     		ldr	r1, .L189+48
 4190 00a0 7B68     		ldr	r3, [r7, #4]
 4191 00a2 1B01     		lsls	r3, r3, #4
 4192 00a4 0B44     		add	r3, r3, r1
 4193 00a6 0833     		adds	r3, r3, #8
 4194 00a8 1A60     		str	r2, [r3]
1038:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4195              		.loc 1 1038 0 is_stmt 1 discriminator 4
 4196 00aa 2E4A     		ldr	r2, .L189+48
 4197 00ac 7B68     		ldr	r3, [r7, #4]
 4198 00ae 1B01     		lsls	r3, r3, #4
 4199 00b0 1344     		add	r3, r3, r2
 4200 00b2 0833     		adds	r3, r3, #8
 4201 00b4 2E4A     		ldr	r2, .L189+60
 4202 00b6 5A60     		str	r2, [r3, #4]
1034:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4203              		.loc 1 1034 0 discriminator 4
 4204 00b8 7B68     		ldr	r3, [r7, #4]
 4205 00ba 0133     		adds	r3, r3, #1
 4206 00bc 7B60     		str	r3, [r7, #4]
 4207              	.L185:
1034:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4208              		.loc 1 1034 0 is_stmt 0 discriminator 2
 4209 00be 7B68     		ldr	r3, [r7, #4]
 4210 00c0 0A2B     		cmp	r3, #10
ARM GAS  /tmp/ccvLzxWr.s 			page 92


 4211 00c2 D1DD     		ble	.L188
1039:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1040:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1041:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1042:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1043:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1044:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1045:bluetooth_rxtx.c **** 	}
1046:bluetooth_rxtx.c **** 
1047:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1048:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4212              		.loc 1 1048 0 is_stmt 1
 4213 00c4 2B4A     		ldr	r2, .L189+64
 4214 00c6 274B     		ldr	r3, .L189+48
 4215 00c8 1B68     		ldr	r3, [r3]
 4216 00ca 1360     		str	r3, [r2]
1049:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4217              		.loc 1 1049 0
 4218 00cc 2A4A     		ldr	r2, .L189+68
 4219 00ce 254B     		ldr	r3, .L189+48
 4220 00d0 5B68     		ldr	r3, [r3, #4]
 4221 00d2 1360     		str	r3, [r2]
1050:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4222              		.loc 1 1050 0
 4223 00d4 294A     		ldr	r2, .L189+72
 4224 00d6 234B     		ldr	r3, .L189+48
 4225 00d8 9B68     		ldr	r3, [r3, #8]
 4226 00da 1360     		str	r3, [r2]
1051:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4227              		.loc 1 1051 0
 4228 00dc 284A     		ldr	r2, .L189+76
 4229 00de 214B     		ldr	r3, .L189+48
 4230 00e0 DB68     		ldr	r3, [r3, #12]
 4231 00e2 1360     		str	r3, [r2]
1052:bluetooth_rxtx.c **** 	DMACC0Config =
 4232              		.loc 1 1052 0
 4233 00e4 144B     		ldr	r3, .L189+4
 4234 00e6 4DF20602 		movw	r2, #53254
 4235 00ea 1A60     		str	r2, [r3]
1053:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1054:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1055:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1056:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1057:bluetooth_rxtx.c **** 
1058:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4236              		.loc 1 1058 0
 4237 00ec 254B     		ldr	r3, .L189+80
 4238 00ee 1B68     		ldr	r3, [r3]
 4239 00f0 1B0D     		lsrs	r3, r3, #20
 4240 00f2 DBB2     		uxtb	r3, r3
 4241 00f4 244A     		ldr	r2, .L189+84
 4242 00f6 1360     		str	r3, [r2]
1059:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4243              		.loc 1 1059 0
 4244 00f8 224B     		ldr	r3, .L189+80
 4245 00fa 1B68     		ldr	r3, [r3]
 4246 00fc C3F31303 		ubfx	r3, r3, #0, #20
ARM GAS  /tmp/ccvLzxWr.s 			page 93


 4247 0100 40F63542 		movw	r2, #3125
 4248 0104 02FB03F2 		mul	r2, r2, r3
 4249 0108 204B     		ldr	r3, .L189+88
 4250 010a 1B68     		ldr	r3, [r3]
 4251 010c 1344     		add	r3, r3, r2
 4252 010e 204A     		ldr	r2, .L189+92
 4253 0110 1360     		str	r3, [r2]
1060:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4254              		.loc 1 1060 0
 4255 0112 204B     		ldr	r3, .L189+96
 4256 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4257 0116 9AB2     		uxth	r2, r3
 4258 0118 1F4B     		ldr	r3, .L189+100
 4259 011a 1A80     		strh	r2, [r3]	@ movhi
1061:bluetooth_rxtx.c **** 
1062:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1063:bluetooth_rxtx.c **** 	rx_tc = 0;
 4260              		.loc 1 1063 0
 4261 011c 1F4B     		ldr	r3, .L189+104
 4262 011e 0022     		movs	r2, #0
 4263 0120 1A60     		str	r2, [r3]
1064:bluetooth_rxtx.c **** 	rx_err = 0;
 4264              		.loc 1 1064 0
 4265 0122 1F4B     		ldr	r3, .L189+108
 4266 0124 0022     		movs	r2, #0
 4267 0126 1A60     		str	r2, [r3]
1065:bluetooth_rxtx.c **** }
 4268              		.loc 1 1065 0
 4269 0128 0C37     		adds	r7, r7, #12
 4270              		.cfi_def_cfa_offset 4
 4271 012a BD46     		mov	sp, r7
 4272              		.cfi_def_cfa_register 13
 4273              		@ sp needed
 4274 012c 5DF8047B 		ldr	r7, [sp], #4
 4275              		.cfi_restore 7
 4276              		.cfi_def_cfa_offset 0
 4277 0130 7047     		bx	lr
 4278              	.L190:
 4279 0132 00BF     		.align	2
 4280              	.L189:
 4281 0134 C4C00F40 		.word	1074774212
 4282 0138 10410050 		.word	1342193936
 4283 013c 30410050 		.word	1342193968
 4284 0140 50410050 		.word	1342194000
 4285 0144 70410050 		.word	1342194032
 4286 0148 90410050 		.word	1342194064
 4287 014c B0410050 		.word	1342194096
 4288 0150 D0410050 		.word	1342194128
 4289 0154 F0410050 		.word	1342194160
 4290 0158 08400050 		.word	1342193672
 4291 015c 10400050 		.word	1342193680
 4292 0160 30400050 		.word	1342193712
 4293 0164 00000000 		.word	le_dma_lli
 4294 0168 08000340 		.word	1073938440
 4295 016c 00000000 		.word	rxbuf1
 4296 0170 04100088 		.word	-2013261820
 4297 0174 00410050 		.word	1342193920
ARM GAS  /tmp/ccvLzxWr.s 			page 94


 4298 0178 04410050 		.word	1342193924
 4299 017c 08410050 		.word	1342193928
 4300 0180 0C410050 		.word	1342193932
 4301 0184 00000000 		.word	clkn
 4302 0188 00000000 		.word	active_buf_clkn_high
 4303 018c 08400040 		.word	1073758216
 4304 0190 00000000 		.word	active_buf_clk100ns
 4305 0194 00000000 		.word	channel
 4306 0198 00000000 		.word	active_buf_channel
 4307 019c 00000000 		.word	rx_tc
 4308 01a0 00000000 		.word	rx_err
 4309              		.cfi_endproc
 4310              	.LFE15:
 4312              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4313              		.align	2
 4314              		.global	bt_stream_dma_handler
 4315              		.thumb
 4316              		.thumb_func
 4318              	bt_stream_dma_handler:
 4319              	.LFB16:
1066:bluetooth_rxtx.c **** 
1067:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4320              		.loc 1 1067 0
 4321              		.cfi_startproc
 4322              		@ args = 0, pretend = 0, frame = 0
 4323              		@ frame_needed = 1, uses_anonymous_args = 0
 4324              		@ link register save eliminated.
 4325 0000 80B4     		push	{r7}
 4326              		.cfi_def_cfa_offset 4
 4327              		.cfi_offset 7, -4
 4328 0002 00AF     		add	r7, sp, #0
 4329              		.cfi_def_cfa_register 7
1068:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4330              		.loc 1 1068 0
 4331 0004 254B     		ldr	r3, .L194
 4332 0006 1B68     		ldr	r3, [r3]
 4333 0008 254A     		ldr	r2, .L194+4
 4334 000a 1360     		str	r3, [r2]
1069:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4335              		.loc 1 1069 0
 4336 000c 254B     		ldr	r3, .L194+8
 4337 000e 1B68     		ldr	r3, [r3]
 4338 0010 1B0D     		lsrs	r3, r3, #20
 4339 0012 DBB2     		uxtb	r3, r3
 4340 0014 214A     		ldr	r2, .L194
 4341 0016 1360     		str	r3, [r2]
1070:bluetooth_rxtx.c **** 
1071:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4342              		.loc 1 1071 0
 4343 0018 234B     		ldr	r3, .L194+12
 4344 001a 1B68     		ldr	r3, [r3]
 4345 001c 234A     		ldr	r2, .L194+16
 4346 001e 1360     		str	r3, [r2]
1072:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4347              		.loc 1 1072 0
 4348 0020 204B     		ldr	r3, .L194+8
 4349 0022 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 95


 4350 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4351 0028 40F63542 		movw	r2, #3125
 4352 002c 02FB03F2 		mul	r2, r2, r3
 4353 0030 1F4B     		ldr	r3, .L194+20
 4354 0032 1B68     		ldr	r3, [r3]
 4355 0034 1344     		add	r3, r3, r2
 4356 0036 1C4A     		ldr	r2, .L194+12
 4357 0038 1360     		str	r3, [r2]
1073:bluetooth_rxtx.c **** 
1074:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4358              		.loc 1 1074 0
 4359 003a 1E4B     		ldr	r3, .L194+24
 4360 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4361 003e 9AB2     		uxth	r2, r3
 4362 0040 1D4B     		ldr	r3, .L194+28
 4363 0042 1A80     		strh	r2, [r3]	@ movhi
1075:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4364              		.loc 1 1075 0
 4365 0044 1D4B     		ldr	r3, .L194+32
 4366 0046 1B88     		ldrh	r3, [r3]	@ movhi
 4367 0048 9AB2     		uxth	r2, r3
 4368 004a 1A4B     		ldr	r3, .L194+24
 4369 004c 1A80     		strh	r2, [r3]	@ movhi
1076:bluetooth_rxtx.c **** 
1077:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1078:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4370              		.loc 1 1078 0
 4371 004e 1C4B     		ldr	r3, .L194+36
 4372 0050 1B68     		ldr	r3, [r3]
 4373 0052 03F00103 		and	r3, r3, #1
 4374 0056 002B     		cmp	r3, #0
 4375 0058 1BD0     		beq	.L191
1079:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4376              		.loc 1 1079 0
 4377 005a 1A4B     		ldr	r3, .L194+40
 4378 005c 1B68     		ldr	r3, [r3]
 4379 005e 03F00103 		and	r3, r3, #1
 4380 0062 002B     		cmp	r3, #0
 4381 0064 07D0     		beq	.L193
1080:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4382              		.loc 1 1080 0
 4383 0066 184B     		ldr	r3, .L194+44
 4384 0068 0122     		movs	r2, #1
 4385 006a 1A60     		str	r2, [r3]
1081:bluetooth_rxtx.c **** 			++rx_tc;
 4386              		.loc 1 1081 0
 4387 006c 174B     		ldr	r3, .L194+48
 4388 006e 1B68     		ldr	r3, [r3]
 4389 0070 0133     		adds	r3, r3, #1
 4390 0072 164A     		ldr	r2, .L194+48
 4391 0074 1360     		str	r3, [r2]
 4392              	.L193:
1082:bluetooth_rxtx.c **** 		}
1083:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4393              		.loc 1 1083 0
 4394 0076 164B     		ldr	r3, .L194+52
 4395 0078 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 96


 4396 007a 03F00103 		and	r3, r3, #1
 4397 007e 002B     		cmp	r3, #0
 4398 0080 07D0     		beq	.L191
1084:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4399              		.loc 1 1084 0
 4400 0082 144B     		ldr	r3, .L194+56
 4401 0084 0122     		movs	r2, #1
 4402 0086 1A60     		str	r2, [r3]
1085:bluetooth_rxtx.c **** 			++rx_err;
 4403              		.loc 1 1085 0
 4404 0088 134B     		ldr	r3, .L194+60
 4405 008a 1B68     		ldr	r3, [r3]
 4406 008c 0133     		adds	r3, r3, #1
 4407 008e 124A     		ldr	r2, .L194+60
 4408 0090 1360     		str	r3, [r2]
 4409              	.L191:
1086:bluetooth_rxtx.c **** 		}
1087:bluetooth_rxtx.c **** 	}
1088:bluetooth_rxtx.c **** }
 4410              		.loc 1 1088 0
 4411 0092 BD46     		mov	sp, r7
 4412              		.cfi_def_cfa_register 13
 4413              		@ sp needed
 4414 0094 5DF8047B 		ldr	r7, [sp], #4
 4415              		.cfi_restore 7
 4416              		.cfi_def_cfa_offset 0
 4417 0098 7047     		bx	lr
 4418              	.L195:
 4419 009a 00BF     		.align	2
 4420              	.L194:
 4421 009c 00000000 		.word	active_buf_clkn_high
 4422 00a0 00000000 		.word	idle_buf_clkn_high
 4423 00a4 00000000 		.word	clkn
 4424 00a8 00000000 		.word	active_buf_clk100ns
 4425 00ac 00000000 		.word	idle_buf_clk100ns
 4426 00b0 08400040 		.word	1073758216
 4427 00b4 00000000 		.word	active_buf_channel
 4428 00b8 00000000 		.word	idle_buf_channel
 4429 00bc 00000000 		.word	channel
 4430 00c0 00400050 		.word	1342193664
 4431 00c4 04400050 		.word	1342193668
 4432 00c8 08400050 		.word	1342193672
 4433 00cc 00000000 		.word	rx_tc
 4434 00d0 0C400050 		.word	1342193676
 4435 00d4 10400050 		.word	1342193680
 4436 00d8 00000000 		.word	rx_err
 4437              		.cfi_endproc
 4438              	.LFE16:
 4440              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4441              		.align	2
 4442              		.global	DMA_IRQHandler
 4443              		.thumb
 4444              		.thumb_func
 4446              	DMA_IRQHandler:
 4447              	.LFB17:
1089:bluetooth_rxtx.c **** 
1090:bluetooth_rxtx.c **** void DMA_IRQHandler()
ARM GAS  /tmp/ccvLzxWr.s 			page 97


1091:bluetooth_rxtx.c **** {
 4448              		.loc 1 1091 0
 4449              		.cfi_startproc
 4450              		@ args = 0, pretend = 0, frame = 0
 4451              		@ frame_needed = 1, uses_anonymous_args = 0
 4452 0000 80B5     		push	{r7, lr}
 4453              		.cfi_def_cfa_offset 8
 4454              		.cfi_offset 7, -8
 4455              		.cfi_offset 14, -4
 4456 0002 00AF     		add	r7, sp, #0
 4457              		.cfi_def_cfa_register 7
1092:bluetooth_rxtx.c **** 	switch (mode) {
 4458              		.loc 1 1092 0
 4459 0004 124B     		ldr	r3, .L200
 4460 0006 1B78     		ldrb	r3, [r3]
 4461 0008 DBB2     		uxtb	r3, r3
 4462 000a 013B     		subs	r3, r3, #1
 4463 000c 0B2B     		cmp	r3, #11
 4464 000e 1ED8     		bhi	.L196
 4465 0010 01A2     		adr	r2, .L199
 4466 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4467 0016 00BF     		.p2align 2
 4468              	.L199:
 4469 0018 49000000 		.word	.L198+1
 4470 001c 4F000000 		.word	.L196+1
 4471 0020 4F000000 		.word	.L196+1
 4472 0024 49000000 		.word	.L198+1
 4473 0028 4F000000 		.word	.L196+1
 4474 002c 4F000000 		.word	.L196+1
 4475 0030 4F000000 		.word	.L196+1
 4476 0034 49000000 		.word	.L198+1
 4477 0038 49000000 		.word	.L198+1
 4478 003c 49000000 		.word	.L198+1
 4479 0040 4F000000 		.word	.L196+1
 4480 0044 49000000 		.word	.L198+1
 4481              		.p2align 1
 4482              	.L198:
1093:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1094:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1095:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1096:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1097:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1098:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1099:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4483              		.loc 1 1099 0
 4484 0048 FFF7FEFF 		bl	bt_stream_dma_handler
1100:bluetooth_rxtx.c **** 			break;
 4485              		.loc 1 1100 0
 4486 004c 00BF     		nop
 4487              	.L196:
1101:bluetooth_rxtx.c **** 	}
1102:bluetooth_rxtx.c **** }
 4488              		.loc 1 1102 0
 4489 004e 80BD     		pop	{r7, pc}
 4490              	.L201:
 4491              		.align	2
 4492              	.L200:
ARM GAS  /tmp/ccvLzxWr.s 			page 98


 4493 0050 00000000 		.word	mode
 4494              		.cfi_endproc
 4495              	.LFE17:
 4497              		.section	.text.dio_ssp_start,"ax",%progbits
 4498              		.align	2
 4499              		.thumb
 4500              		.thumb_func
 4502              	dio_ssp_start:
 4503              	.LFB18:
1103:bluetooth_rxtx.c **** 
1104:bluetooth_rxtx.c **** static void dio_ssp_start()
1105:bluetooth_rxtx.c **** {
 4504              		.loc 1 1105 0
 4505              		.cfi_startproc
 4506              		@ args = 0, pretend = 0, frame = 0
 4507              		@ frame_needed = 1, uses_anonymous_args = 0
 4508              		@ link register save eliminated.
 4509 0000 80B4     		push	{r7}
 4510              		.cfi_def_cfa_offset 4
 4511              		.cfi_offset 7, -4
 4512 0002 00AF     		add	r7, sp, #0
 4513              		.cfi_def_cfa_register 7
1106:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1107:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4514              		.loc 1 1107 0
 4515 0004 104B     		ldr	r3, .L203
 4516 0006 4FF08052 		mov	r2, #268435456
 4517 000a 1A60     		str	r2, [r3]
1108:bluetooth_rxtx.c **** 
1109:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1110:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4518              		.loc 1 1110 0
 4519 000c 0F4A     		ldr	r2, .L203+4
 4520 000e 0F4B     		ldr	r3, .L203+4
 4521 0010 1B68     		ldr	r3, [r3]
 4522 0012 43F00103 		orr	r3, r3, #1
 4523 0016 1360     		str	r3, [r2]
1111:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4524              		.loc 1 1111 0
 4525 0018 0D4A     		ldr	r2, .L203+8
 4526 001a 0D4B     		ldr	r3, .L203+8
 4527 001c 1B68     		ldr	r3, [r3]
 4528 001e 43F00203 		orr	r3, r3, #2
 4529 0022 1360     		str	r3, [r2]
1112:bluetooth_rxtx.c **** 	
1113:bluetooth_rxtx.c **** 	/* enable DMA */
1114:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 4530              		.loc 1 1114 0
 4531 0024 0B4A     		ldr	r2, .L203+12
 4532 0026 0B4B     		ldr	r3, .L203+12
 4533 0028 1B68     		ldr	r3, [r3]
 4534 002a 43F00103 		orr	r3, r3, #1
 4535 002e 1360     		str	r3, [r2]
1115:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4536              		.loc 1 1115 0
 4537 0030 094B     		ldr	r3, .L203+16
 4538 0032 4FF08062 		mov	r2, #67108864
ARM GAS  /tmp/ccvLzxWr.s 			page 99


 4539 0036 1A60     		str	r2, [r3]
1116:bluetooth_rxtx.c **** 
1117:bluetooth_rxtx.c **** 	/* activate slave select pin */
1118:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4540              		.loc 1 1118 0
 4541 0038 084B     		ldr	r3, .L203+20
 4542 003a 4FF08052 		mov	r2, #268435456
 4543 003e 1A60     		str	r2, [r3]
1119:bluetooth_rxtx.c **** }
 4544              		.loc 1 1119 0
 4545 0040 BD46     		mov	sp, r7
 4546              		.cfi_def_cfa_register 13
 4547              		@ sp needed
 4548 0042 5DF8047B 		ldr	r7, [sp], #4
 4549              		.cfi_restore 7
 4550              		.cfi_def_cfa_offset 0
 4551 0046 7047     		bx	lr
 4552              	.L204:
 4553              		.align	2
 4554              	.L203:
 4555 0048 98C00920 		.word	537510040
 4556 004c 24000340 		.word	1073938468
 4557 0050 04000340 		.word	1073938436
 4558 0054 10410050 		.word	1342193936
 4559 0058 00E100E0 		.word	-536813312
 4560 005c 9CC00920 		.word	537510044
 4561              		.cfi_endproc
 4562              	.LFE18:
 4564              		.section	.text.dio_ssp_stop,"ax",%progbits
 4565              		.align	2
 4566              		.thumb
 4567              		.thumb_func
 4569              	dio_ssp_stop:
 4570              	.LFB19:
1120:bluetooth_rxtx.c **** 
1121:bluetooth_rxtx.c **** static void dio_ssp_stop()
1122:bluetooth_rxtx.c **** {
 4571              		.loc 1 1122 0
 4572              		.cfi_startproc
 4573              		@ args = 0, pretend = 0, frame = 0
 4574              		@ frame_needed = 1, uses_anonymous_args = 0
 4575              		@ link register save eliminated.
 4576 0000 80B4     		push	{r7}
 4577              		.cfi_def_cfa_offset 4
 4578              		.cfi_offset 7, -4
 4579 0002 00AF     		add	r7, sp, #0
 4580              		.cfi_def_cfa_register 7
1123:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1124:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4581              		.loc 1 1124 0
 4582 0004 214B     		ldr	r3, .L207
 4583 0006 4FF08052 		mov	r2, #268435456
 4584 000a 1A60     		str	r2, [r3]
1125:bluetooth_rxtx.c **** 
1126:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1127:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 4585              		.loc 1 1127 0
ARM GAS  /tmp/ccvLzxWr.s 			page 100


 4586 000c 204A     		ldr	r2, .L207+4
 4587 000e 204B     		ldr	r3, .L207+4
 4588 0010 1B68     		ldr	r3, [r3]
 4589 0012 23F00103 		bic	r3, r3, #1
 4590 0016 1360     		str	r3, [r2]
1128:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 4591              		.loc 1 1128 0
 4592 0018 1E4A     		ldr	r2, .L207+8
 4593 001a 1E4B     		ldr	r3, .L207+8
 4594 001c 1B68     		ldr	r3, [r3]
 4595 001e 23F00203 		bic	r3, r3, #2
 4596 0022 1360     		str	r3, [r2]
1129:bluetooth_rxtx.c **** 
1130:bluetooth_rxtx.c **** 
1131:bluetooth_rxtx.c **** 	// disable DMA engine:
1132:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1133:bluetooth_rxtx.c **** 
1134:bluetooth_rxtx.c **** 	// disable DMA interrupts
1135:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4597              		.loc 1 1135 0
 4598 0024 1C4B     		ldr	r3, .L207+12
 4599 0026 4FF08062 		mov	r2, #67108864
 4600 002a 1A60     		str	r2, [r3]
1136:bluetooth_rxtx.c **** 
1137:bluetooth_rxtx.c **** 	// disable active channels
1138:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4601              		.loc 1 1138 0
 4602 002c 1B4B     		ldr	r3, .L207+16
 4603 002e 0022     		movs	r2, #0
 4604 0030 1A60     		str	r2, [r3]
1139:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4605              		.loc 1 1139 0
 4606 0032 1B4B     		ldr	r3, .L207+20
 4607 0034 0022     		movs	r2, #0
 4608 0036 1A60     		str	r2, [r3]
1140:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4609              		.loc 1 1140 0
 4610 0038 1A4B     		ldr	r3, .L207+24
 4611 003a 0022     		movs	r2, #0
 4612 003c 1A60     		str	r2, [r3]
1141:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4613              		.loc 1 1141 0
 4614 003e 1A4B     		ldr	r3, .L207+28
 4615 0040 0022     		movs	r2, #0
 4616 0042 1A60     		str	r2, [r3]
1142:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4617              		.loc 1 1142 0
 4618 0044 194B     		ldr	r3, .L207+32
 4619 0046 0022     		movs	r2, #0
 4620 0048 1A60     		str	r2, [r3]
1143:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4621              		.loc 1 1143 0
 4622 004a 194B     		ldr	r3, .L207+36
 4623 004c 0022     		movs	r2, #0
 4624 004e 1A60     		str	r2, [r3]
1144:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4625              		.loc 1 1144 0
ARM GAS  /tmp/ccvLzxWr.s 			page 101


 4626 0050 184B     		ldr	r3, .L207+40
 4627 0052 0022     		movs	r2, #0
 4628 0054 1A60     		str	r2, [r3]
1145:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4629              		.loc 1 1145 0
 4630 0056 184B     		ldr	r3, .L207+44
 4631 0058 0022     		movs	r2, #0
 4632 005a 1A60     		str	r2, [r3]
1146:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4633              		.loc 1 1146 0
 4634 005c 174B     		ldr	r3, .L207+48
 4635 005e FF22     		movs	r2, #255
 4636 0060 1A60     		str	r2, [r3]
1147:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4637              		.loc 1 1147 0
 4638 0062 174B     		ldr	r3, .L207+52
 4639 0064 FF22     		movs	r2, #255
 4640 0066 1A60     		str	r2, [r3]
1148:bluetooth_rxtx.c **** 
1149:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1150:bluetooth_rxtx.c **** 	// register.
1151:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 4641              		.loc 1 1151 0
 4642 0068 164A     		ldr	r2, .L207+56
 4643 006a 164B     		ldr	r3, .L207+56
 4644 006c 1B68     		ldr	r3, [r3]
 4645 006e 23F00103 		bic	r3, r3, #1
 4646 0072 1360     		str	r3, [r2]
1152:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 4647              		.loc 1 1152 0
 4648 0074 00BF     		nop
 4649              	.L206:
 4650              		.loc 1 1152 0 is_stmt 0 discriminator 1
 4651 0076 134B     		ldr	r3, .L207+56
 4652 0078 1B68     		ldr	r3, [r3]
 4653 007a 03F00103 		and	r3, r3, #1
 4654 007e 002B     		cmp	r3, #0
 4655 0080 F9D1     		bne	.L206
1153:bluetooth_rxtx.c **** }
 4656              		.loc 1 1153 0 is_stmt 1
 4657 0082 BD46     		mov	sp, r7
 4658              		.cfi_def_cfa_register 13
 4659              		@ sp needed
 4660 0084 5DF8047B 		ldr	r7, [sp], #4
 4661              		.cfi_restore 7
 4662              		.cfi_def_cfa_offset 0
 4663 0088 7047     		bx	lr
 4664              	.L208:
 4665 008a 00BF     		.align	2
 4666              	.L207:
 4667 008c 98C00920 		.word	537510040
 4668 0090 24000340 		.word	1073938468
 4669 0094 04000340 		.word	1073938436
 4670 0098 80E100E0 		.word	-536813184
 4671 009c 10410050 		.word	1342193936
 4672 00a0 30410050 		.word	1342193968
 4673 00a4 50410050 		.word	1342194000
ARM GAS  /tmp/ccvLzxWr.s 			page 102


 4674 00a8 70410050 		.word	1342194032
 4675 00ac 90410050 		.word	1342194064
 4676 00b0 B0410050 		.word	1342194096
 4677 00b4 D0410050 		.word	1342194128
 4678 00b8 F0410050 		.word	1342194160
 4679 00bc 08400050 		.word	1342193672
 4680 00c0 10400050 		.word	1342193680
 4681 00c4 30400050 		.word	1342193712
 4682              		.cfi_endproc
 4683              	.LFE19:
 4685              		.section	.text.cc2400_idle,"ax",%progbits
 4686              		.align	2
 4687              		.thumb
 4688              		.thumb_func
 4690              	cc2400_idle:
 4691              	.LFB20:
1154:bluetooth_rxtx.c **** 
1155:bluetooth_rxtx.c **** static void cc2400_idle()
1156:bluetooth_rxtx.c **** {
 4692              		.loc 1 1156 0
 4693              		.cfi_startproc
 4694              		@ args = 0, pretend = 0, frame = 0
 4695              		@ frame_needed = 1, uses_anonymous_args = 0
 4696 0000 80B5     		push	{r7, lr}
 4697              		.cfi_def_cfa_offset 8
 4698              		.cfi_offset 7, -8
 4699              		.cfi_offset 14, -4
 4700 0002 00AF     		add	r7, sp, #0
 4701              		.cfi_def_cfa_register 7
1157:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 4702              		.loc 1 1157 0
 4703 0004 6420     		movs	r0, #100
 4704 0006 FFF7FEFF 		bl	cc2400_strobe
1158:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4705              		.loc 1 1158 0
 4706 000a 00BF     		nop
 4707              	.L210:
 4708              		.loc 1 1158 0 is_stmt 0 discriminator 1
 4709 000c FFF7FEFF 		bl	cc2400_status
 4710 0010 0346     		mov	r3, r0
 4711 0012 03F00403 		and	r3, r3, #4
 4712 0016 002B     		cmp	r3, #0
 4713 0018 F8D1     		bne	.L210
1159:bluetooth_rxtx.c **** 
1160:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1161:bluetooth_rxtx.c **** 	PAEN_CLR;
 4714              		.loc 1 1161 0 is_stmt 1
 4715 001a 0A4B     		ldr	r3, .L211
 4716 001c 8022     		movs	r2, #128
 4717 001e 1A60     		str	r2, [r3]
1162:bluetooth_rxtx.c **** 	HGM_CLR;
 4718              		.loc 1 1162 0
 4719 0020 084B     		ldr	r3, .L211
 4720 0022 4FF48072 		mov	r2, #256
 4721 0026 1A60     		str	r2, [r3]
1163:bluetooth_rxtx.c **** #endif
1164:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccvLzxWr.s 			page 103


1165:bluetooth_rxtx.c **** 	RXLED_CLR;
 4722              		.loc 1 1165 0
 4723 0028 074B     		ldr	r3, .L211+4
 4724 002a 1022     		movs	r2, #16
 4725 002c 1A60     		str	r2, [r3]
1166:bluetooth_rxtx.c **** 	TXLED_CLR;
 4726              		.loc 1 1166 0
 4727 002e 064B     		ldr	r3, .L211+4
 4728 0030 4FF48072 		mov	r2, #256
 4729 0034 1A60     		str	r2, [r3]
1167:bluetooth_rxtx.c **** 	USRLED_CLR;
 4730              		.loc 1 1167 0
 4731 0036 044B     		ldr	r3, .L211+4
 4732 0038 0222     		movs	r2, #2
 4733 003a 1A60     		str	r2, [r3]
1168:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 4734              		.loc 1 1168 0
 4735 003c 034B     		ldr	r3, .L211+8
 4736 003e 0022     		movs	r2, #0
 4737 0040 1A70     		strb	r2, [r3]
1169:bluetooth_rxtx.c **** }
 4738              		.loc 1 1169 0
 4739 0042 80BD     		pop	{r7, pc}
 4740              	.L212:
 4741              		.align	2
 4742              	.L211:
 4743 0044 5CC00920 		.word	537509980
 4744 0048 3CC00920 		.word	537509948
 4745 004c 00000000 		.word	mode
 4746              		.cfi_endproc
 4747              	.LFE20:
 4749              		.section	.text.cc2400_rx,"ax",%progbits
 4750              		.align	2
 4751              		.thumb
 4752              		.thumb_func
 4754              	cc2400_rx:
 4755              	.LFB21:
1170:bluetooth_rxtx.c **** 
1171:bluetooth_rxtx.c **** /* start un-buffered rx */
1172:bluetooth_rxtx.c **** static void cc2400_rx()
1173:bluetooth_rxtx.c **** {
 4756              		.loc 1 1173 0
 4757              		.cfi_startproc
 4758              		@ args = 0, pretend = 0, frame = 8
 4759              		@ frame_needed = 1, uses_anonymous_args = 0
 4760 0000 80B5     		push	{r7, lr}
 4761              		.cfi_def_cfa_offset 8
 4762              		.cfi_offset 7, -8
 4763              		.cfi_offset 14, -4
 4764 0002 82B0     		sub	sp, sp, #8
 4765              		.cfi_def_cfa_offset 16
 4766 0004 00AF     		add	r7, sp, #0
 4767              		.cfi_def_cfa_register 7
1174:bluetooth_rxtx.c **** 	u16 mdmctrl;
1175:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4768              		.loc 1 1175 0
 4769 0006 2A4B     		ldr	r3, .L220
ARM GAS  /tmp/ccvLzxWr.s 			page 104


 4770 0008 1B78     		ldrb	r3, [r3]
 4771 000a DBB2     		uxtb	r3, r3
 4772 000c 002B     		cmp	r3, #0
 4773 000e 02D1     		bne	.L214
1176:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4774              		.loc 1 1176 0
 4775 0010 2923     		movs	r3, #41
 4776 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 4777 0014 08E0     		b	.L215
 4778              	.L214:
1177:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4779              		.loc 1 1177 0
 4780 0016 264B     		ldr	r3, .L220
 4781 0018 1B78     		ldrb	r3, [r3]
 4782 001a DBB2     		uxtb	r3, r3
 4783 001c 012B     		cmp	r3, #1
 4784 001e 02D1     		bne	.L216
1178:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4785              		.loc 1 1178 0
 4786 0020 4023     		movs	r3, #64
 4787 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 4788 0024 00E0     		b	.L215
 4789              	.L216:
1179:bluetooth_rxtx.c **** 	} else {
1180:bluetooth_rxtx.c **** 		/* oops */
1181:bluetooth_rxtx.c **** 		return;
 4790              		.loc 1 1181 0
 4791 0026 40E0     		b	.L213
 4792              	.L215:
1182:bluetooth_rxtx.c **** 	}
1183:bluetooth_rxtx.c **** 
1184:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4793              		.loc 1 1184 0
 4794 0028 0D20     		movs	r0, #13
 4795 002a 47F6FF71 		movw	r1, #32767
 4796 002e FFF7FEFF 		bl	cc2400_set
1185:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4797              		.loc 1 1185 0
 4798 0032 1220     		movs	r0, #18
 4799 0034 42F62231 		movw	r1, #11042
 4800 0038 FFF7FEFF 		bl	cc2400_set
1186:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 4801              		.loc 1 1186 0
 4802 003c 1420     		movs	r0, #20
 4803 003e 41F24B31 		movw	r1, #4939
 4804 0042 FFF7FEFF 		bl	cc2400_set
1187:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 4805              		.loc 1 1187 0
 4806 0046 2020     		movs	r0, #32
 4807 0048 40F20111 		movw	r1, #257
 4808 004c FFF7FEFF 		bl	cc2400_set
1188:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1189:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1190:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1191:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1192:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1193:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
ARM GAS  /tmp/ccvLzxWr.s 			page 105


1194:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 4809              		.loc 1 1194 0
 4810 0050 184B     		ldr	r3, .L220+4
 4811 0052 1B88     		ldrh	r3, [r3]	@ movhi
 4812 0054 9BB2     		uxth	r3, r3
 4813 0056 013B     		subs	r3, r3, #1
 4814 0058 9BB2     		uxth	r3, r3
 4815 005a 0220     		movs	r0, #2
 4816 005c 1946     		mov	r1, r3
 4817 005e FFF7FEFF 		bl	cc2400_set
1195:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 4818              		.loc 1 1195 0
 4819 0062 FB88     		ldrh	r3, [r7, #6]
 4820 0064 0320     		movs	r0, #3
 4821 0066 1946     		mov	r1, r3
 4822 0068 FFF7FEFF 		bl	cc2400_set
1196:bluetooth_rxtx.c **** 
1197:bluetooth_rxtx.c **** 	// Set up CS register
1198:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4823              		.loc 1 1198 0
 4824 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1199:bluetooth_rxtx.c **** 
1200:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4825              		.loc 1 1200 0
 4826 0070 00BF     		nop
 4827              	.L218:
 4828              		.loc 1 1200 0 is_stmt 0 discriminator 1
 4829 0072 FFF7FEFF 		bl	cc2400_status
 4830 0076 0346     		mov	r3, r0
 4831 0078 03F04003 		and	r3, r3, #64
 4832 007c 002B     		cmp	r3, #0
 4833 007e F8D0     		beq	.L218
1201:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4834              		.loc 1 1201 0 is_stmt 1
 4835 0080 6120     		movs	r0, #97
 4836 0082 FFF7FEFF 		bl	cc2400_strobe
1202:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4837              		.loc 1 1202 0
 4838 0086 00BF     		nop
 4839              	.L219:
 4840              		.loc 1 1202 0 is_stmt 0 discriminator 1
 4841 0088 FFF7FEFF 		bl	cc2400_status
 4842 008c 0346     		mov	r3, r0
 4843 008e 03F00403 		and	r3, r3, #4
 4844 0092 002B     		cmp	r3, #0
 4845 0094 F8D0     		beq	.L219
1203:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 4846              		.loc 1 1203 0 is_stmt 1
 4847 0096 6220     		movs	r0, #98
 4848 0098 FFF7FEFF 		bl	cc2400_strobe
1204:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1205:bluetooth_rxtx.c **** 	PAEN_SET;
 4849              		.loc 1 1205 0
 4850 009c 064B     		ldr	r3, .L220+8
 4851 009e 8022     		movs	r2, #128
 4852 00a0 1A60     		str	r2, [r3]
1206:bluetooth_rxtx.c **** 	HGM_SET;
ARM GAS  /tmp/ccvLzxWr.s 			page 106


 4853              		.loc 1 1206 0
 4854 00a2 054B     		ldr	r3, .L220+8
 4855 00a4 4FF48072 		mov	r2, #256
 4856 00a8 1A60     		str	r2, [r3]
 4857              	.L213:
1207:bluetooth_rxtx.c **** #endif
1208:bluetooth_rxtx.c **** }
 4858              		.loc 1 1208 0
 4859 00aa 0837     		adds	r7, r7, #8
 4860              		.cfi_def_cfa_offset 8
 4861 00ac BD46     		mov	sp, r7
 4862              		.cfi_def_cfa_register 13
 4863              		@ sp needed
 4864 00ae 80BD     		pop	{r7, pc}
 4865              	.L221:
 4866              		.align	2
 4867              	.L220:
 4868 00b0 00000000 		.word	modulation
 4869 00b4 00000000 		.word	channel
 4870 00b8 58C00920 		.word	537509976
 4871              		.cfi_endproc
 4872              	.LFE21:
 4874              		.section	.text.cc2400_rx_sync,"ax",%progbits
 4875              		.align	2
 4876              		.thumb
 4877              		.thumb_func
 4879              	cc2400_rx_sync:
 4880              	.LFB22:
1209:bluetooth_rxtx.c **** 
1210:bluetooth_rxtx.c **** /* start un-buffered rx */
1211:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1212:bluetooth_rxtx.c **** {
 4881              		.loc 1 1212 0
 4882              		.cfi_startproc
 4883              		@ args = 0, pretend = 0, frame = 16
 4884              		@ frame_needed = 1, uses_anonymous_args = 0
 4885 0000 80B5     		push	{r7, lr}
 4886              		.cfi_def_cfa_offset 8
 4887              		.cfi_offset 7, -8
 4888              		.cfi_offset 14, -4
 4889 0002 84B0     		sub	sp, sp, #16
 4890              		.cfi_def_cfa_offset 24
 4891 0004 00AF     		add	r7, sp, #0
 4892              		.cfi_def_cfa_register 7
 4893 0006 7860     		str	r0, [r7, #4]
1213:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1214:bluetooth_rxtx.c **** 
1215:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4894              		.loc 1 1215 0
 4895 0008 334B     		ldr	r3, .L229
 4896 000a 1B78     		ldrb	r3, [r3]
 4897 000c DBB2     		uxtb	r3, r3
 4898 000e 002B     		cmp	r3, #0
 4899 0010 05D1     		bne	.L223
1216:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4900              		.loc 1 1216 0
 4901 0012 2923     		movs	r3, #41
ARM GAS  /tmp/ccvLzxWr.s 			page 107


 4902 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1217:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 4903              		.loc 1 1217 0
 4904 0016 40F26143 		movw	r3, #1121
 4905 001a FB81     		strh	r3, [r7, #14]	@ movhi
 4906 001c 0BE0     		b	.L224
 4907              	.L223:
1218:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1219:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1220:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1221:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1222:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1223:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1224:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1225:bluetooth_rxtx.c **** 
1226:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4908              		.loc 1 1226 0
 4909 001e 2E4B     		ldr	r3, .L229
 4910 0020 1B78     		ldrb	r3, [r3]
 4911 0022 DBB2     		uxtb	r3, r3
 4912 0024 012B     		cmp	r3, #1
 4913 0026 05D1     		bne	.L225
1227:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4914              		.loc 1 1227 0
 4915 0028 4023     		movs	r3, #64
 4916 002a BB81     		strh	r3, [r7, #12]	@ movhi
1228:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 4917              		.loc 1 1228 0
 4918 002c 40F26153 		movw	r3, #1377
 4919 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 4920 0032 00E0     		b	.L224
 4921              	.L225:
1229:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1230:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1231:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1232:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1233:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1234:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1235:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1236:bluetooth_rxtx.c **** 
1237:bluetooth_rxtx.c **** 	} else {
1238:bluetooth_rxtx.c **** 		/* oops */
1239:bluetooth_rxtx.c **** 		return;
 4922              		.loc 1 1239 0
 4923 0034 4DE0     		b	.L222
 4924              	.L224:
1240:bluetooth_rxtx.c **** 	}
1241:bluetooth_rxtx.c **** 
1242:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4925              		.loc 1 1242 0
 4926 0036 0D20     		movs	r0, #13
 4927 0038 47F6FF71 		movw	r1, #32767
 4928 003c FFF7FEFF 		bl	cc2400_set
1243:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4929              		.loc 1 1243 0
 4930 0040 1220     		movs	r0, #18
 4931 0042 42F62231 		movw	r1, #11042
ARM GAS  /tmp/ccvLzxWr.s 			page 108


 4932 0046 FFF7FEFF 		bl	cc2400_set
1244:bluetooth_rxtx.c **** 
1245:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 4933              		.loc 1 1245 0
 4934 004a 1420     		movs	r0, #20
 4935 004c 41F24B21 		movw	r1, #4683
 4936 0050 FFF7FEFF 		bl	cc2400_set
1246:bluetooth_rxtx.c **** 	// 1      2      4b
1247:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1248:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1249:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1250:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1251:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1252:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1253:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1254:bluetooth_rxtx.c **** 	//
1255:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1256:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1257:bluetooth_rxtx.c **** 
1258:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 4937              		.loc 1 1258 0
 4938 0054 FB89     		ldrh	r3, [r7, #14]
 4939 0056 2020     		movs	r0, #32
 4940 0058 1946     		mov	r1, r3
 4941 005a FFF7FEFF 		bl	cc2400_set
1259:bluetooth_rxtx.c **** 
1260:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 4942              		.loc 1 1260 0
 4943 005e 7B68     		ldr	r3, [r7, #4]
 4944 0060 9BB2     		uxth	r3, r3
 4945 0062 2C20     		movs	r0, #44
 4946 0064 1946     		mov	r1, r3
 4947 0066 FFF7FEFF 		bl	cc2400_set
1261:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 4948              		.loc 1 1261 0
 4949 006a 7B68     		ldr	r3, [r7, #4]
 4950 006c 1B0C     		lsrs	r3, r3, #16
 4951 006e 9BB2     		uxth	r3, r3
 4952 0070 2D20     		movs	r0, #45
 4953 0072 1946     		mov	r1, r3
 4954 0074 FFF7FEFF 		bl	cc2400_set
1262:bluetooth_rxtx.c **** 	
1263:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 4955              		.loc 1 1263 0
 4956 0078 184B     		ldr	r3, .L229+4
 4957 007a 1B88     		ldrh	r3, [r3]	@ movhi
 4958 007c 9BB2     		uxth	r3, r3
 4959 007e 013B     		subs	r3, r3, #1
 4960 0080 9BB2     		uxth	r3, r3
 4961 0082 0220     		movs	r0, #2
 4962 0084 1946     		mov	r1, r3
 4963 0086 FFF7FEFF 		bl	cc2400_set
1264:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 4964              		.loc 1 1264 0
 4965 008a BB89     		ldrh	r3, [r7, #12]
 4966 008c 0320     		movs	r0, #3
 4967 008e 1946     		mov	r1, r3
ARM GAS  /tmp/ccvLzxWr.s 			page 109


 4968 0090 FFF7FEFF 		bl	cc2400_set
1265:bluetooth_rxtx.c **** 
1266:bluetooth_rxtx.c **** 	// Set up CS register
1267:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4969              		.loc 1 1267 0
 4970 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1268:bluetooth_rxtx.c **** 
1269:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4971              		.loc 1 1269 0
 4972 0098 00BF     		nop
 4973              	.L227:
 4974              		.loc 1 1269 0 is_stmt 0 discriminator 1
 4975 009a FFF7FEFF 		bl	cc2400_status
 4976 009e 0346     		mov	r3, r0
 4977 00a0 03F04003 		and	r3, r3, #64
 4978 00a4 002B     		cmp	r3, #0
 4979 00a6 F8D0     		beq	.L227
1270:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4980              		.loc 1 1270 0 is_stmt 1
 4981 00a8 6120     		movs	r0, #97
 4982 00aa FFF7FEFF 		bl	cc2400_strobe
1271:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4983              		.loc 1 1271 0
 4984 00ae 00BF     		nop
 4985              	.L228:
 4986              		.loc 1 1271 0 is_stmt 0 discriminator 1
 4987 00b0 FFF7FEFF 		bl	cc2400_status
 4988 00b4 0346     		mov	r3, r0
 4989 00b6 03F00403 		and	r3, r3, #4
 4990 00ba 002B     		cmp	r3, #0
 4991 00bc F8D0     		beq	.L228
1272:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 4992              		.loc 1 1272 0 is_stmt 1
 4993 00be 6220     		movs	r0, #98
 4994 00c0 FFF7FEFF 		bl	cc2400_strobe
1273:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1274:bluetooth_rxtx.c **** 	PAEN_SET;
 4995              		.loc 1 1274 0
 4996 00c4 064B     		ldr	r3, .L229+8
 4997 00c6 8022     		movs	r2, #128
 4998 00c8 1A60     		str	r2, [r3]
1275:bluetooth_rxtx.c **** 	HGM_SET;
 4999              		.loc 1 1275 0
 5000 00ca 054B     		ldr	r3, .L229+8
 5001 00cc 4FF48072 		mov	r2, #256
 5002 00d0 1A60     		str	r2, [r3]
 5003              	.L222:
1276:bluetooth_rxtx.c **** #endif
1277:bluetooth_rxtx.c **** }
 5004              		.loc 1 1277 0
 5005 00d2 1037     		adds	r7, r7, #16
 5006              		.cfi_def_cfa_offset 8
 5007 00d4 BD46     		mov	sp, r7
 5008              		.cfi_def_cfa_register 13
 5009              		@ sp needed
 5010 00d6 80BD     		pop	{r7, pc}
 5011              	.L230:
ARM GAS  /tmp/ccvLzxWr.s 			page 110


 5012              		.align	2
 5013              	.L229:
 5014 00d8 00000000 		.word	modulation
 5015 00dc 00000000 		.word	channel
 5016 00e0 58C00920 		.word	537509976
 5017              		.cfi_endproc
 5018              	.LFE22:
 5020              		.section	.text.le_transmit,"ax",%progbits
 5021              		.align	2
 5022              		.global	le_transmit
 5023              		.thumb
 5024              		.thumb_func
 5026              	le_transmit:
 5027              	.LFB23:
1278:bluetooth_rxtx.c **** 
1279:bluetooth_rxtx.c **** /*
1280:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1281:bluetooth_rxtx.c ****  *
1282:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1283:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1284:bluetooth_rxtx.c ****  * included in the data length.
1285:bluetooth_rxtx.c ****  */
1286:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1287:bluetooth_rxtx.c **** {
 5028              		.loc 1 1287 0
 5029              		.cfi_startproc
 5030              		@ args = 0, pretend = 0, frame = 104
 5031              		@ frame_needed = 1, uses_anonymous_args = 0
 5032 0000 80B5     		push	{r7, lr}
 5033              		.cfi_def_cfa_offset 8
 5034              		.cfi_offset 7, -8
 5035              		.cfi_offset 14, -4
 5036 0002 9AB0     		sub	sp, sp, #104
 5037              		.cfi_def_cfa_offset 112
 5038 0004 00AF     		add	r7, sp, #0
 5039              		.cfi_def_cfa_register 7
 5040 0006 F860     		str	r0, [r7, #12]
 5041 0008 0B46     		mov	r3, r1
 5042 000a 7A60     		str	r2, [r7, #4]
 5043 000c FB72     		strb	r3, [r7, #11]
1288:bluetooth_rxtx.c **** 	unsigned i, j;
1289:bluetooth_rxtx.c **** 	int bit;
1290:bluetooth_rxtx.c **** 	u8 txbuf[64];
1291:bluetooth_rxtx.c **** 	u8 tx_len;
1292:bluetooth_rxtx.c **** 	u8 byte;
1293:bluetooth_rxtx.c **** 	u16 gio_save;
1294:bluetooth_rxtx.c **** 
1295:bluetooth_rxtx.c **** 	// first four bytes: AA
1296:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5044              		.loc 1 1296 0
 5045 000e 0023     		movs	r3, #0
 5046 0010 7B66     		str	r3, [r7, #100]
 5047 0012 35E0     		b	.L232
 5048              	.L235:
1297:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5049              		.loc 1 1297 0
 5050 0014 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccvLzxWr.s 			page 111


 5051 0016 87F85E30 		strb	r3, [r7, #94]
1298:bluetooth_rxtx.c **** 		aa >>= 8;
 5052              		.loc 1 1298 0
 5053 001a FB68     		ldr	r3, [r7, #12]
 5054 001c 1B0A     		lsrs	r3, r3, #8
 5055 001e FB60     		str	r3, [r7, #12]
1299:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5056              		.loc 1 1299 0
 5057 0020 07F11002 		add	r2, r7, #16
 5058 0024 7B6E     		ldr	r3, [r7, #100]
 5059 0026 1344     		add	r3, r3, r2
 5060 0028 0022     		movs	r2, #0
 5061 002a 1A70     		strb	r2, [r3]
1300:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5062              		.loc 1 1300 0
 5063 002c 0023     		movs	r3, #0
 5064 002e 3B66     		str	r3, [r7, #96]
 5065 0030 20E0     		b	.L233
 5066              	.L234:
1301:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5067              		.loc 1 1301 0 discriminator 3
 5068 0032 07F11002 		add	r2, r7, #16
 5069 0036 7B6E     		ldr	r3, [r7, #100]
 5070 0038 1344     		add	r3, r3, r2
 5071 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5072 003c D9B2     		uxtb	r1, r3
 5073 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5074 0042 03F00103 		and	r3, r3, #1
 5075 0046 3A6E     		ldr	r2, [r7, #96]
 5076 0048 C2F10702 		rsb	r2, r2, #7
 5077 004c 9340     		lsls	r3, r3, r2
 5078 004e DBB2     		uxtb	r3, r3
 5079 0050 0A46     		mov	r2, r1
 5080 0052 1343     		orrs	r3, r3, r2
 5081 0054 DBB2     		uxtb	r3, r3
 5082 0056 D9B2     		uxtb	r1, r3
 5083 0058 07F11002 		add	r2, r7, #16
 5084 005c 7B6E     		ldr	r3, [r7, #100]
 5085 005e 1344     		add	r3, r3, r2
 5086 0060 0A46     		mov	r2, r1
 5087 0062 1A70     		strb	r2, [r3]
1302:bluetooth_rxtx.c **** 			byte >>= 1;
 5088              		.loc 1 1302 0 discriminator 3
 5089 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5090 0068 5B08     		lsrs	r3, r3, #1
 5091 006a 87F85E30 		strb	r3, [r7, #94]
1300:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5092              		.loc 1 1300 0 discriminator 3
 5093 006e 3B6E     		ldr	r3, [r7, #96]
 5094 0070 0133     		adds	r3, r3, #1
 5095 0072 3B66     		str	r3, [r7, #96]
 5096              	.L233:
1300:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5097              		.loc 1 1300 0 is_stmt 0 discriminator 1
 5098 0074 3B6E     		ldr	r3, [r7, #96]
 5099 0076 072B     		cmp	r3, #7
 5100 0078 DBD9     		bls	.L234
ARM GAS  /tmp/ccvLzxWr.s 			page 112


1296:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5101              		.loc 1 1296 0 is_stmt 1 discriminator 2
 5102 007a 7B6E     		ldr	r3, [r7, #100]
 5103 007c 0133     		adds	r3, r3, #1
 5104 007e 7B66     		str	r3, [r7, #100]
 5105              	.L232:
1296:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5106              		.loc 1 1296 0 is_stmt 0 discriminator 1
 5107 0080 7B6E     		ldr	r3, [r7, #100]
 5108 0082 032B     		cmp	r3, #3
 5109 0084 C6D9     		bls	.L235
1303:bluetooth_rxtx.c **** 		}
1304:bluetooth_rxtx.c **** 	}
1305:bluetooth_rxtx.c **** 
1306:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1307:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5110              		.loc 1 1307 0 is_stmt 1
 5111 0086 934B     		ldr	r3, .L251
 5112 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5113 008a 9BB2     		uxth	r3, r3
 5114 008c DBB2     		uxtb	r3, r3
 5115 008e 623B     		subs	r3, r3, #98
 5116 0090 DBB2     		uxtb	r3, r3
 5117 0092 1846     		mov	r0, r3
 5118 0094 FFF7FEFF 		bl	btle_channel_index
 5119 0098 0346     		mov	r3, r0
 5120 009a 1A46     		mov	r2, r3
 5121 009c 8E4B     		ldr	r3, .L251+4
 5122 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5123 00a0 BB65     		str	r3, [r7, #88]
1308:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5124              		.loc 1 1308 0
 5125 00a2 0023     		movs	r3, #0
 5126 00a4 7B66     		str	r3, [r7, #100]
 5127 00a6 50E0     		b	.L236
 5128              	.L239:
1309:bluetooth_rxtx.c **** 		byte = data[i];
 5129              		.loc 1 1309 0
 5130 00a8 7A68     		ldr	r2, [r7, #4]
 5131 00aa 7B6E     		ldr	r3, [r7, #100]
 5132 00ac 1344     		add	r3, r3, r2
 5133 00ae 1B78     		ldrb	r3, [r3]
 5134 00b0 87F85E30 		strb	r3, [r7, #94]
1310:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5135              		.loc 1 1310 0
 5136 00b4 7B6E     		ldr	r3, [r7, #100]
 5137 00b6 0433     		adds	r3, r3, #4
 5138 00b8 07F16802 		add	r2, r7, #104
 5139 00bc 1344     		add	r3, r3, r2
 5140 00be 0022     		movs	r2, #0
 5141 00c0 03F8582C 		strb	r2, [r3, #-88]
1311:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5142              		.loc 1 1311 0
 5143 00c4 0023     		movs	r3, #0
 5144 00c6 3B66     		str	r3, [r7, #96]
 5145 00c8 39E0     		b	.L237
 5146              	.L238:
ARM GAS  /tmp/ccvLzxWr.s 			page 113


1312:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5147              		.loc 1 1312 0 discriminator 3
 5148 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5149 00ce 03F00103 		and	r3, r3, #1
 5150 00d2 8249     		ldr	r1, .L251+8
 5151 00d4 BA6D     		ldr	r2, [r7, #88]
 5152 00d6 0A44     		add	r2, r2, r1
 5153 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5154 00da 5340     		eors	r3, r3, r2
 5155 00dc 7B65     		str	r3, [r7, #84]
1313:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5156              		.loc 1 1313 0 discriminator 3
 5157 00de BB6D     		ldr	r3, [r7, #88]
 5158 00e0 0133     		adds	r3, r3, #1
 5159 00e2 1946     		mov	r1, r3
 5160 00e4 7E4B     		ldr	r3, .L251+12
 5161 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5162 00ea C81A     		subs	r0, r1, r3
 5163 00ec 4008     		lsrs	r0, r0, #1
 5164 00ee 0344     		add	r3, r3, r0
 5165 00f0 9A09     		lsrs	r2, r3, #6
 5166 00f2 1346     		mov	r3, r2
 5167 00f4 DB01     		lsls	r3, r3, #7
 5168 00f6 9B1A     		subs	r3, r3, r2
 5169 00f8 CA1A     		subs	r2, r1, r3
 5170 00fa BA65     		str	r2, [r7, #88]
1314:bluetooth_rxtx.c **** 			byte >>= 1;
 5171              		.loc 1 1314 0 discriminator 3
 5172 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5173 0100 5B08     		lsrs	r3, r3, #1
 5174 0102 87F85E30 		strb	r3, [r7, #94]
1315:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5175              		.loc 1 1315 0 discriminator 3
 5176 0106 7B6E     		ldr	r3, [r7, #100]
 5177 0108 0433     		adds	r3, r3, #4
 5178 010a 7A6E     		ldr	r2, [r7, #100]
 5179 010c 0432     		adds	r2, r2, #4
 5180 010e 07F16801 		add	r1, r7, #104
 5181 0112 0A44     		add	r2, r2, r1
 5182 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5183 0118 D1B2     		uxtb	r1, r2
 5184 011a 3A6E     		ldr	r2, [r7, #96]
 5185 011c C2F10702 		rsb	r2, r2, #7
 5186 0120 1046     		mov	r0, r2
 5187 0122 7A6D     		ldr	r2, [r7, #84]
 5188 0124 8240     		lsls	r2, r2, r0
 5189 0126 D2B2     		uxtb	r2, r2
 5190 0128 0A43     		orrs	r2, r2, r1
 5191 012a D2B2     		uxtb	r2, r2
 5192 012c D2B2     		uxtb	r2, r2
 5193 012e 07F16801 		add	r1, r7, #104
 5194 0132 0B44     		add	r3, r3, r1
 5195 0134 03F8582C 		strb	r2, [r3, #-88]
1311:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5196              		.loc 1 1311 0 discriminator 3
 5197 0138 3B6E     		ldr	r3, [r7, #96]
 5198 013a 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccvLzxWr.s 			page 114


 5199 013c 3B66     		str	r3, [r7, #96]
 5200              	.L237:
1311:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5201              		.loc 1 1311 0 is_stmt 0 discriminator 1
 5202 013e 3B6E     		ldr	r3, [r7, #96]
 5203 0140 072B     		cmp	r3, #7
 5204 0142 C2D9     		bls	.L238
1308:bluetooth_rxtx.c **** 		byte = data[i];
 5205              		.loc 1 1308 0 is_stmt 1 discriminator 2
 5206 0144 7B6E     		ldr	r3, [r7, #100]
 5207 0146 0133     		adds	r3, r3, #1
 5208 0148 7B66     		str	r3, [r7, #100]
 5209              	.L236:
1308:bluetooth_rxtx.c **** 		byte = data[i];
 5210              		.loc 1 1308 0 is_stmt 0 discriminator 1
 5211 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5212 014c 7B6E     		ldr	r3, [r7, #100]
 5213 014e 9A42     		cmp	r2, r3
 5214 0150 AAD8     		bhi	.L239
1316:bluetooth_rxtx.c **** 		}
1317:bluetooth_rxtx.c **** 	}
1318:bluetooth_rxtx.c **** 
1319:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5215              		.loc 1 1319 0 is_stmt 1
 5216 0152 FB7A     		ldrb	r3, [r7, #11]
 5217 0154 0433     		adds	r3, r3, #4
 5218 0156 FB72     		strb	r3, [r7, #11]
1320:bluetooth_rxtx.c **** 
1321:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1322:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5219              		.loc 1 1322 0
 5220 0158 0D20     		movs	r0, #13
 5221 015a 47F6FF71 		movw	r1, #32767
 5222 015e FFF7FEFF 		bl	cc2400_set
1323:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5223              		.loc 1 1323 0
 5224 0162 1220     		movs	r0, #18
 5225 0164 42F62231 		movw	r1, #11042
 5226 0168 FFF7FEFF 		bl	cc2400_set
1324:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5227              		.loc 1 1324 0
 5228 016c 1420     		movs	r0, #20
 5229 016e 41F24B31 		movw	r1, #4939
 5230 0172 FFF7FEFF 		bl	cc2400_set
1325:bluetooth_rxtx.c **** 
1326:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5231              		.loc 1 1326 0
 5232 0176 2020     		movs	r0, #32
 5233 0178 40F60141 		movw	r1, #3073
 5234 017c FFF7FEFF 		bl	cc2400_set
1327:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1328:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1329:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1330:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1331:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1332:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1333:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccvLzxWr.s 			page 115


1334:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5235              		.loc 1 1334 0
 5236 0180 544B     		ldr	r3, .L251
 5237 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5238 0184 9BB2     		uxth	r3, r3
 5239 0186 0220     		movs	r0, #2
 5240 0188 1946     		mov	r1, r3
 5241 018a FFF7FEFF 		bl	cc2400_set
1335:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5242              		.loc 1 1335 0
 5243 018e 0520     		movs	r0, #5
 5244 0190 0B21     		movs	r1, #11
 5245 0192 FFF7FEFF 		bl	cc2400_set
1336:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5246              		.loc 1 1336 0
 5247 0196 0320     		movs	r0, #3
 5248 0198 4021     		movs	r1, #64
 5249 019a FFF7FEFF 		bl	cc2400_set
1337:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5250              		.loc 1 1337 0
 5251 019e 2320     		movs	r0, #35
 5252 01a0 1421     		movs	r1, #20
 5253 01a2 FFF7FEFF 		bl	cc2400_set
1338:bluetooth_rxtx.c **** 
1339:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1340:bluetooth_rxtx.c **** 	if (aa & 1)
 5254              		.loc 1 1340 0
 5255 01a6 FB68     		ldr	r3, [r7, #12]
 5256 01a8 03F00103 		and	r3, r3, #1
 5257 01ac 002B     		cmp	r3, #0
 5258 01ae 05D0     		beq	.L240
1341:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5259              		.loc 1 1341 0
 5260 01b0 2D20     		movs	r0, #45
 5261 01b2 4AF6AA21 		movw	r1, #43690
 5262 01b6 FFF7FEFF 		bl	cc2400_set
 5263 01ba 04E0     		b	.L241
 5264              	.L240:
1342:bluetooth_rxtx.c **** 	else
1343:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5265              		.loc 1 1343 0
 5266 01bc 2D20     		movs	r0, #45
 5267 01be 45F25551 		movw	r1, #21845
 5268 01c2 FFF7FEFF 		bl	cc2400_set
 5269              	.L241:
1344:bluetooth_rxtx.c **** 
1345:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1346:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5270              		.loc 1 1346 0
 5271 01c6 0820     		movs	r0, #8
 5272 01c8 FFF7FEFF 		bl	cc2400_get
 5273 01cc 0346     		mov	r3, r0
 5274 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1347:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5275              		.loc 1 1347 0
 5276 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5277 01d6 C3F30803 		ubfx	r3, r3, #0, #9
ARM GAS  /tmp/ccvLzxWr.s 			page 116


 5278 01da 9BB2     		uxth	r3, r3
 5279 01dc 43F49C43 		orr	r3, r3, #19968
 5280 01e0 9BB2     		uxth	r3, r3
 5281 01e2 9BB2     		uxth	r3, r3
 5282 01e4 0820     		movs	r0, #8
 5283 01e6 1946     		mov	r1, r3
 5284 01e8 FFF7FEFF 		bl	cc2400_set
1348:bluetooth_rxtx.c **** 
1349:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5285              		.loc 1 1349 0
 5286 01ec 00BF     		nop
 5287              	.L242:
 5288              		.loc 1 1349 0 is_stmt 0 discriminator 1
 5289 01ee FFF7FEFF 		bl	cc2400_status
 5290 01f2 0346     		mov	r3, r0
 5291 01f4 03F04003 		and	r3, r3, #64
 5292 01f8 002B     		cmp	r3, #0
 5293 01fa F8D0     		beq	.L242
1350:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5294              		.loc 1 1350 0 is_stmt 1
 5295 01fc 6120     		movs	r0, #97
 5296 01fe FFF7FEFF 		bl	cc2400_strobe
1351:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5297              		.loc 1 1351 0
 5298 0202 00BF     		nop
 5299              	.L243:
 5300              		.loc 1 1351 0 is_stmt 0 discriminator 1
 5301 0204 FFF7FEFF 		bl	cc2400_status
 5302 0208 0346     		mov	r3, r0
 5303 020a 03F00403 		and	r3, r3, #4
 5304 020e 002B     		cmp	r3, #0
 5305 0210 F8D0     		beq	.L243
1352:bluetooth_rxtx.c **** 	TXLED_SET;
 5306              		.loc 1 1352 0 is_stmt 1
 5307 0212 344B     		ldr	r3, .L251+16
 5308 0214 4FF48072 		mov	r2, #256
 5309 0218 1A60     		str	r2, [r3]
1353:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1354:bluetooth_rxtx.c **** 	PAEN_SET;
 5310              		.loc 1 1354 0
 5311 021a 334B     		ldr	r3, .L251+20
 5312 021c 8022     		movs	r2, #128
 5313 021e 1A60     		str	r2, [r3]
1355:bluetooth_rxtx.c **** #endif
1356:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5314              		.loc 1 1356 0
 5315 0220 00BF     		nop
 5316              	.L244:
 5317              		.loc 1 1356 0 is_stmt 0 discriminator 1
 5318 0222 0E20     		movs	r0, #14
 5319 0224 FFF7FEFF 		bl	cc2400_get
 5320 0228 0346     		mov	r3, r0
 5321 022a 03F01F03 		and	r3, r3, #31
 5322 022e 0F2B     		cmp	r3, #15
 5323 0230 F7D1     		bne	.L244
1357:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5324              		.loc 1 1357 0 is_stmt 1
ARM GAS  /tmp/ccvLzxWr.s 			page 117


 5325 0232 6320     		movs	r0, #99
 5326 0234 FFF7FEFF 		bl	cc2400_strobe
1358:bluetooth_rxtx.c **** 
1359:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1360:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5327              		.loc 1 1360 0
 5328 0238 0023     		movs	r3, #0
 5329 023a 7B66     		str	r3, [r7, #100]
 5330 023c 21E0     		b	.L245
 5331              	.L248:
1361:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5332              		.loc 1 1361 0
 5333 023e 00BF     		nop
 5334              	.L246:
 5335              		.loc 1 1361 0 is_stmt 0 discriminator 1
 5336 0240 2A4B     		ldr	r3, .L251+24
 5337 0242 1B68     		ldr	r3, [r3]
 5338 0244 03F00403 		and	r3, r3, #4
 5339 0248 002B     		cmp	r3, #0
 5340 024a F9D1     		bne	.L246
1362:bluetooth_rxtx.c **** 		tx_len = len - i;
 5341              		.loc 1 1362 0 is_stmt 1
 5342 024c 7B6E     		ldr	r3, [r7, #100]
 5343 024e DBB2     		uxtb	r3, r3
 5344 0250 FA7A     		ldrb	r2, [r7, #11]
 5345 0252 D31A     		subs	r3, r2, r3
 5346 0254 87F85F30 		strb	r3, [r7, #95]
1363:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5347              		.loc 1 1363 0
 5348 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5349 025c 102B     		cmp	r3, #16
 5350 025e 02D9     		bls	.L247
1364:bluetooth_rxtx.c **** 			tx_len = 16;
 5351              		.loc 1 1364 0
 5352 0260 1023     		movs	r3, #16
 5353 0262 87F85F30 		strb	r3, [r7, #95]
 5354              	.L247:
1365:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5355              		.loc 1 1365 0 discriminator 2
 5356 0266 07F11002 		add	r2, r7, #16
 5357 026a 7B6E     		ldr	r3, [r7, #100]
 5358 026c 1344     		add	r3, r3, r2
 5359 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5360 0272 7020     		movs	r0, #112
 5361 0274 1146     		mov	r1, r2
 5362 0276 1A46     		mov	r2, r3
 5363 0278 FFF7FEFF 		bl	cc2400_spi_buf
1360:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5364              		.loc 1 1360 0 discriminator 2
 5365 027c 7B6E     		ldr	r3, [r7, #100]
 5366 027e 1033     		adds	r3, r3, #16
 5367 0280 7B66     		str	r3, [r7, #100]
 5368              	.L245:
1360:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5369              		.loc 1 1360 0 is_stmt 0 discriminator 1
 5370 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5371 0284 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/ccvLzxWr.s 			page 118


 5372 0286 9A42     		cmp	r2, r3
 5373 0288 D9D8     		bhi	.L248
1366:bluetooth_rxtx.c **** 	}
1367:bluetooth_rxtx.c **** 
1368:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5374              		.loc 1 1368 0 is_stmt 1
 5375 028a 00BF     		nop
 5376              	.L249:
 5377              		.loc 1 1368 0 is_stmt 0 discriminator 1
 5378 028c 0E20     		movs	r0, #14
 5379 028e FFF7FEFF 		bl	cc2400_get
 5380 0292 0346     		mov	r3, r0
 5381 0294 03F01F03 		and	r3, r3, #31
 5382 0298 0F2B     		cmp	r3, #15
 5383 029a F7D1     		bne	.L249
1369:bluetooth_rxtx.c **** 	TXLED_CLR;
 5384              		.loc 1 1369 0 is_stmt 1
 5385 029c 144B     		ldr	r3, .L251+28
 5386 029e 4FF48072 		mov	r2, #256
 5387 02a2 1A60     		str	r2, [r3]
1370:bluetooth_rxtx.c **** 
1371:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5388              		.loc 1 1371 0
 5389 02a4 6420     		movs	r0, #100
 5390 02a6 FFF7FEFF 		bl	cc2400_strobe
1372:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5391              		.loc 1 1372 0
 5392 02aa 00BF     		nop
 5393              	.L250:
 5394              		.loc 1 1372 0 is_stmt 0 discriminator 1
 5395 02ac FFF7FEFF 		bl	cc2400_status
 5396 02b0 0346     		mov	r3, r0
 5397 02b2 03F00403 		and	r3, r3, #4
 5398 02b6 002B     		cmp	r3, #0
 5399 02b8 F8D1     		bne	.L250
1373:bluetooth_rxtx.c **** 
1374:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1375:bluetooth_rxtx.c **** 	PAEN_CLR;
 5400              		.loc 1 1375 0 is_stmt 1
 5401 02ba 0E4B     		ldr	r3, .L251+32
 5402 02bc 8022     		movs	r2, #128
 5403 02be 1A60     		str	r2, [r3]
1376:bluetooth_rxtx.c **** #endif
1377:bluetooth_rxtx.c **** 
1378:bluetooth_rxtx.c **** 	// reset GIO
1379:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5404              		.loc 1 1379 0
 5405 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5406 02c4 0820     		movs	r0, #8
 5407 02c6 1946     		mov	r1, r3
 5408 02c8 FFF7FEFF 		bl	cc2400_set
1380:bluetooth_rxtx.c **** }
 5409              		.loc 1 1380 0
 5410 02cc 6837     		adds	r7, r7, #104
 5411              		.cfi_def_cfa_offset 8
 5412 02ce BD46     		mov	sp, r7
 5413              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccvLzxWr.s 			page 119


 5414              		@ sp needed
 5415 02d0 80BD     		pop	{r7, pc}
 5416              	.L252:
 5417 02d2 00BF     		.align	2
 5418              	.L251:
 5419 02d4 00000000 		.word	channel
 5420 02d8 AC000000 		.word	whitening_index
 5421 02dc 2C000000 		.word	whitening
 5422 02e0 11080402 		.word	33818641
 5423 02e4 38C00920 		.word	537509944
 5424 02e8 58C00920 		.word	537509976
 5425 02ec 54C00920 		.word	537509972
 5426 02f0 3CC00920 		.word	537509948
 5427 02f4 5CC00920 		.word	537509980
 5428              		.cfi_endproc
 5429              	.LFE23:
 5431              		.section	.text.le_jam,"ax",%progbits
 5432              		.align	2
 5433              		.global	le_jam
 5434              		.thumb
 5435              		.thumb_func
 5437              	le_jam:
 5438              	.LFB24:
1381:bluetooth_rxtx.c **** 
1382:bluetooth_rxtx.c **** void le_jam(void) {
 5439              		.loc 1 1382 0
 5440              		.cfi_startproc
 5441              		@ args = 0, pretend = 0, frame = 0
 5442              		@ frame_needed = 1, uses_anonymous_args = 0
 5443 0000 80B5     		push	{r7, lr}
 5444              		.cfi_def_cfa_offset 8
 5445              		.cfi_offset 7, -8
 5446              		.cfi_offset 14, -4
 5447 0002 00AF     		add	r7, sp, #0
 5448              		.cfi_def_cfa_register 7
1383:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1384:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5449              		.loc 1 1384 0
 5450 0004 0D20     		movs	r0, #13
 5451 0006 47F6FF71 		movw	r1, #32767
 5452 000a FFF7FEFF 		bl	cc2400_set
1385:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5453              		.loc 1 1385 0
 5454 000e 1220     		movs	r0, #18
 5455 0010 42F62231 		movw	r1, #11042
 5456 0014 FFF7FEFF 		bl	cc2400_set
1386:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 5457              		.loc 1 1386 0
 5458 0018 1420     		movs	r0, #20
 5459 001a 42F24B31 		movw	r1, #9035
 5460 001e FFF7FEFF 		bl	cc2400_set
1387:bluetooth_rxtx.c **** 
1388:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5461              		.loc 1 1388 0
 5462 0022 2020     		movs	r0, #32
 5463 0024 40F60141 		movw	r1, #3073
 5464 0028 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccvLzxWr.s 			page 120


1389:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1390:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1391:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1392:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1393:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1394:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1395:bluetooth_rxtx.c **** 
1396:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1397:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5465              		.loc 1 1397 0
 5466 002c 0520     		movs	r0, #5
 5467 002e 0B21     		movs	r1, #11
 5468 0030 FFF7FEFF 		bl	cc2400_set
1398:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5469              		.loc 1 1398 0
 5470 0034 0320     		movs	r0, #3
 5471 0036 4021     		movs	r1, #64
 5472 0038 FFF7FEFF 		bl	cc2400_set
1399:bluetooth_rxtx.c **** 
1400:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5473              		.loc 1 1400 0
 5474 003c 00BF     		nop
 5475              	.L254:
 5476              		.loc 1 1400 0 is_stmt 0 discriminator 1
 5477 003e FFF7FEFF 		bl	cc2400_status
 5478 0042 0346     		mov	r3, r0
 5479 0044 03F04003 		and	r3, r3, #64
 5480 0048 002B     		cmp	r3, #0
 5481 004a F8D0     		beq	.L254
1401:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5482              		.loc 1 1401 0 is_stmt 1
 5483 004c 6120     		movs	r0, #97
 5484 004e FFF7FEFF 		bl	cc2400_strobe
1402:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5485              		.loc 1 1402 0
 5486 0052 00BF     		nop
 5487              	.L255:
 5488              		.loc 1 1402 0 is_stmt 0 discriminator 1
 5489 0054 FFF7FEFF 		bl	cc2400_status
 5490 0058 0346     		mov	r3, r0
 5491 005a 03F00403 		and	r3, r3, #4
 5492 005e 002B     		cmp	r3, #0
 5493 0060 F8D0     		beq	.L255
1403:bluetooth_rxtx.c **** 	TXLED_SET;
 5494              		.loc 1 1403 0 is_stmt 1
 5495 0062 0A4B     		ldr	r3, .L257
 5496 0064 4FF48072 		mov	r2, #256
 5497 0068 1A60     		str	r2, [r3]
1404:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1405:bluetooth_rxtx.c **** 	PAEN_SET;
 5498              		.loc 1 1405 0
 5499 006a 094B     		ldr	r3, .L257+4
 5500 006c 8022     		movs	r2, #128
 5501 006e 1A60     		str	r2, [r3]
1406:bluetooth_rxtx.c **** #endif
1407:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5502              		.loc 1 1407 0
ARM GAS  /tmp/ccvLzxWr.s 			page 121


 5503 0070 00BF     		nop
 5504              	.L256:
 5505              		.loc 1 1407 0 is_stmt 0 discriminator 1
 5506 0072 0E20     		movs	r0, #14
 5507 0074 FFF7FEFF 		bl	cc2400_get
 5508 0078 0346     		mov	r3, r0
 5509 007a 03F01F03 		and	r3, r3, #31
 5510 007e 0F2B     		cmp	r3, #15
 5511 0080 F7D1     		bne	.L256
1408:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5512              		.loc 1 1408 0 is_stmt 1
 5513 0082 6320     		movs	r0, #99
 5514 0084 FFF7FEFF 		bl	cc2400_strobe
1409:bluetooth_rxtx.c **** #endif
1410:bluetooth_rxtx.c **** }
 5515              		.loc 1 1410 0
 5516 0088 80BD     		pop	{r7, pc}
 5517              	.L258:
 5518 008a 00BF     		.align	2
 5519              	.L257:
 5520 008c 38C00920 		.word	537509944
 5521 0090 58C00920 		.word	537509976
 5522              		.cfi_endproc
 5523              	.LFE24:
 5525              		.section	.text.hop,"ax",%progbits
 5526              		.align	2
 5527              		.global	hop
 5528              		.thumb
 5529              		.thumb_func
 5531              	hop:
 5532              	.LFB25:
1411:bluetooth_rxtx.c **** 
1412:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1413:bluetooth_rxtx.c ****  * track of this? */
1414:bluetooth_rxtx.c **** void hop(void)
1415:bluetooth_rxtx.c **** {
 5533              		.loc 1 1415 0
 5534              		.cfi_startproc
 5535              		@ args = 0, pretend = 0, frame = 0
 5536              		@ frame_needed = 1, uses_anonymous_args = 0
 5537 0000 80B5     		push	{r7, lr}
 5538              		.cfi_def_cfa_offset 8
 5539              		.cfi_offset 7, -8
 5540              		.cfi_offset 14, -4
 5541 0002 00AF     		add	r7, sp, #0
 5542              		.cfi_def_cfa_register 7
1416:bluetooth_rxtx.c **** 	do_hop = 0;
 5543              		.loc 1 1416 0
 5544 0004 414B     		ldr	r3, .L270
 5545 0006 0022     		movs	r2, #0
 5546 0008 1A70     		strb	r2, [r3]
1417:bluetooth_rxtx.c **** 
1418:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1419:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5547              		.loc 1 1419 0
 5548 000a 414B     		ldr	r3, .L270+4
 5549 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccvLzxWr.s 			page 122


 5550 000e 002B     		cmp	r3, #0
 5551 0010 0BD1     		bne	.L260
1420:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 5552              		.loc 1 1420 0
 5553 0012 0220     		movs	r0, #2
 5554 0014 FFF7FEFF 		bl	cc2400_get
 5555 0018 0346     		mov	r3, r0
 5556 001a 1A46     		mov	r2, r3
 5557 001c 3D4B     		ldr	r3, .L270+8
 5558 001e 1B88     		ldrh	r3, [r3]	@ movhi
 5559 0020 9BB2     		uxth	r3, r3
 5560 0022 013B     		subs	r3, r3, #1
 5561 0024 9A42     		cmp	r2, r3
 5562 0026 47D1     		bne	.L261
1421:bluetooth_rxtx.c **** 			return;
 5563              		.loc 1 1421 0
 5564 0028 6EE0     		b	.L259
 5565              	.L260:
1422:bluetooth_rxtx.c **** 	}
1423:bluetooth_rxtx.c **** 
1424:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1425:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 5566              		.loc 1 1425 0
 5567 002a 394B     		ldr	r3, .L270+4
 5568 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5569 002e 012B     		cmp	r3, #1
 5570 0030 14D1     		bne	.L263
1426:bluetooth_rxtx.c **** 		channel += 32;
 5571              		.loc 1 1426 0
 5572 0032 384B     		ldr	r3, .L270+8
 5573 0034 1B88     		ldrh	r3, [r3]	@ movhi
 5574 0036 9BB2     		uxth	r3, r3
 5575 0038 2033     		adds	r3, r3, #32
 5576 003a 9AB2     		uxth	r2, r3
 5577 003c 354B     		ldr	r3, .L270+8
 5578 003e 1A80     		strh	r2, [r3]	@ movhi
1427:bluetooth_rxtx.c **** 		if (channel > 2480)
 5579              		.loc 1 1427 0
 5580 0040 344B     		ldr	r3, .L270+8
 5581 0042 1B88     		ldrh	r3, [r3]	@ movhi
 5582 0044 9BB2     		uxth	r3, r3
 5583 0046 B3F51B6F 		cmp	r3, #2480
 5584 004a 35D9     		bls	.L261
1428:bluetooth_rxtx.c **** 			channel -= 79;
 5585              		.loc 1 1428 0
 5586 004c 314B     		ldr	r3, .L270+8
 5587 004e 1B88     		ldrh	r3, [r3]	@ movhi
 5588 0050 9BB2     		uxth	r3, r3
 5589 0052 4F3B     		subs	r3, r3, #79
 5590 0054 9AB2     		uxth	r2, r3
 5591 0056 2F4B     		ldr	r3, .L270+8
 5592 0058 1A80     		strh	r2, [r3]	@ movhi
 5593 005a 2DE0     		b	.L261
 5594              	.L263:
1429:bluetooth_rxtx.c **** 	}
1430:bluetooth_rxtx.c **** 
1431:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
ARM GAS  /tmp/ccvLzxWr.s 			page 123


 5595              		.loc 1 1431 0
 5596 005c 2C4B     		ldr	r3, .L270+4
 5597 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5598 0060 022B     		cmp	r3, #2
 5599 0062 0DD1     		bne	.L265
1432:bluetooth_rxtx.c **** 		TXLED_SET;
 5600              		.loc 1 1432 0
 5601 0064 2C4B     		ldr	r3, .L270+12
 5602 0066 4FF48072 		mov	r2, #256
 5603 006a 1A60     		str	r2, [r3]
1433:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 5604              		.loc 1 1433 0
 5605 006c 2B4B     		ldr	r3, .L270+16
 5606 006e 1B68     		ldr	r3, [r3]
 5607 0070 1846     		mov	r0, r3
 5608 0072 FFF7FEFF 		bl	next_hop
 5609 0076 0346     		mov	r3, r0
 5610 0078 1A46     		mov	r2, r3
 5611 007a 264B     		ldr	r3, .L270+8
 5612 007c 1A80     		strh	r2, [r3]	@ movhi
 5613 007e 1BE0     		b	.L261
 5614              	.L265:
1434:bluetooth_rxtx.c **** 	}
1435:bluetooth_rxtx.c **** 
1436:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 5615              		.loc 1 1436 0
 5616 0080 234B     		ldr	r3, .L270+4
 5617 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5618 0084 032B     		cmp	r3, #3
 5619 0086 0BD1     		bne	.L266
1437:bluetooth_rxtx.c **** 		TXLED_SET;
 5620              		.loc 1 1437 0
 5621 0088 234B     		ldr	r3, .L270+12
 5622 008a 4FF48072 		mov	r2, #256
 5623 008e 1A60     		str	r2, [r3]
1438:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 5624              		.loc 1 1438 0
 5625 0090 2348     		ldr	r0, .L270+20
 5626 0092 FFF7FEFF 		bl	btle_next_hop
 5627 0096 0346     		mov	r3, r0
 5628 0098 1A46     		mov	r2, r3
 5629 009a 1E4B     		ldr	r3, .L270+8
 5630 009c 1A80     		strh	r2, [r3]	@ movhi
 5631 009e 0BE0     		b	.L261
 5632              	.L266:
1439:bluetooth_rxtx.c **** 	}
1440:bluetooth_rxtx.c **** 
1441:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 5633              		.loc 1 1441 0
 5634 00a0 1B4B     		ldr	r3, .L270+4
 5635 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5636 00a4 042B     		cmp	r3, #4
 5637 00a6 07D1     		bne	.L261
1442:bluetooth_rxtx.c **** 		TXLED_SET;
 5638              		.loc 1 1442 0
 5639 00a8 1B4B     		ldr	r3, .L270+12
 5640 00aa 4FF48072 		mov	r2, #256
ARM GAS  /tmp/ccvLzxWr.s 			page 124


 5641 00ae 1A60     		str	r2, [r3]
1443:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 5642              		.loc 1 1443 0
 5643 00b0 1C4B     		ldr	r3, .L270+24
 5644 00b2 1A88     		ldrh	r2, [r3]
 5645 00b4 174B     		ldr	r3, .L270+8
 5646 00b6 1A80     		strh	r2, [r3]	@ movhi
 5647              	.L261:
1444:bluetooth_rxtx.c **** 	}
1445:bluetooth_rxtx.c **** 
1446:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1447:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5648              		.loc 1 1447 0
 5649 00b8 6420     		movs	r0, #100
 5650 00ba FFF7FEFF 		bl	cc2400_strobe
1448:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5651              		.loc 1 1448 0
 5652 00be 00BF     		nop
 5653              	.L267:
 5654              		.loc 1 1448 0 is_stmt 0 discriminator 1
 5655 00c0 FFF7FEFF 		bl	cc2400_status
 5656 00c4 0346     		mov	r3, r0
 5657 00c6 03F00403 		and	r3, r3, #4
 5658 00ca 002B     		cmp	r3, #0
 5659 00cc F8D1     		bne	.L267
1449:bluetooth_rxtx.c **** 
1450:bluetooth_rxtx.c **** 	/* Retune */
1451:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5660              		.loc 1 1451 0 is_stmt 1
 5661 00ce 114B     		ldr	r3, .L270+8
 5662 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 5663 00d2 9BB2     		uxth	r3, r3
 5664 00d4 013B     		subs	r3, r3, #1
 5665 00d6 9BB2     		uxth	r3, r3
 5666 00d8 0220     		movs	r0, #2
 5667 00da 1946     		mov	r1, r3
 5668 00dc FFF7FEFF 		bl	cc2400_set
1452:bluetooth_rxtx.c **** 	
1453:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1454:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 5669              		.loc 1 1454 0
 5670 00e0 0B4B     		ldr	r3, .L270+4
 5671 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5672 00e4 002B     		cmp	r3, #0
 5673 00e6 01D0     		beq	.L268
1455:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 5674              		.loc 1 1455 0
 5675 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 5676              	.L268:
1456:bluetooth_rxtx.c **** 	}
1457:bluetooth_rxtx.c **** 
1458:bluetooth_rxtx.c **** 	/* Wait for lock */
1459:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5677              		.loc 1 1459 0
 5678 00ec 6120     		movs	r0, #97
 5679 00ee FFF7FEFF 		bl	cc2400_strobe
1460:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
ARM GAS  /tmp/ccvLzxWr.s 			page 125


 5680              		.loc 1 1460 0
 5681 00f2 00BF     		nop
 5682              	.L269:
 5683              		.loc 1 1460 0 is_stmt 0 discriminator 1
 5684 00f4 FFF7FEFF 		bl	cc2400_status
 5685 00f8 0346     		mov	r3, r0
 5686 00fa 03F00403 		and	r3, r3, #4
 5687 00fe 002B     		cmp	r3, #0
 5688 0100 F8D0     		beq	.L269
1461:bluetooth_rxtx.c **** 	
1462:bluetooth_rxtx.c **** 	/* RX mode */
1463:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5689              		.loc 1 1463 0 is_stmt 1
 5690 0102 6220     		movs	r0, #98
 5691 0104 FFF7FEFF 		bl	cc2400_strobe
 5692              	.L259:
1464:bluetooth_rxtx.c **** 
1465:bluetooth_rxtx.c **** }
 5693              		.loc 1 1465 0
 5694 0108 80BD     		pop	{r7, pc}
 5695              	.L271:
 5696 010a 00BF     		.align	2
 5697              	.L270:
 5698 010c 00000000 		.word	do_hop
 5699 0110 00000000 		.word	hop_mode
 5700 0114 00000000 		.word	channel
 5701 0118 38C00920 		.word	537509944
 5702 011c 00000000 		.word	clkn
 5703 0120 00000000 		.word	le
 5704 0124 00000000 		.word	hop_direct_channel
 5705              		.cfi_endproc
 5706              	.LFE25:
 5708              		.section	.text.cc2400_spi_rev,"ax",%progbits
 5709              		.align	2
 5710              		.global	cc2400_spi_rev
 5711              		.thumb
 5712              		.thumb_func
 5714              	cc2400_spi_rev:
 5715              	.LFB26:
1466:bluetooth_rxtx.c **** 
1467:bluetooth_rxtx.c **** 
1468:bluetooth_rxtx.c **** u32 cc2400_spi_rev(u8 len, u32 data)
1469:bluetooth_rxtx.c **** {
 5716              		.loc 1 1469 0
 5717              		.cfi_startproc
 5718              		@ args = 0, pretend = 0, frame = 16
 5719              		@ frame_needed = 1, uses_anonymous_args = 0
 5720              		@ link register save eliminated.
 5721 0000 80B4     		push	{r7}
 5722              		.cfi_def_cfa_offset 4
 5723              		.cfi_offset 7, -4
 5724 0002 85B0     		sub	sp, sp, #20
 5725              		.cfi_def_cfa_offset 24
 5726 0004 00AF     		add	r7, sp, #0
 5727              		.cfi_def_cfa_register 7
 5728 0006 0346     		mov	r3, r0
 5729 0008 3960     		str	r1, [r7]
ARM GAS  /tmp/ccvLzxWr.s 			page 126


 5730 000a FB71     		strb	r3, [r7, #7]
1470:bluetooth_rxtx.c ****     //    u32 first_ts, second_ts, diff;
1471:bluetooth_rxtx.c **** 
1472:bluetooth_rxtx.c **** 
1473:bluetooth_rxtx.c ****         u32 msb = 1 << (len - 1);
 5731              		.loc 1 1473 0
 5732 000c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5733 000e 013B     		subs	r3, r3, #1
 5734 0010 0122     		movs	r2, #1
 5735 0012 02FA03F3 		lsl	r3, r2, r3
 5736 0016 FB60     		str	r3, [r7, #12]
1474:bluetooth_rxtx.c **** 
1475:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1476:bluetooth_rxtx.c ****         CSN_CLR;
 5737              		.loc 1 1476 0
 5738 0018 184B     		ldr	r3, .L279
 5739 001a 2022     		movs	r2, #32
 5740 001c 1A60     		str	r2, [r3]
1477:bluetooth_rxtx.c **** 	
1478:bluetooth_rxtx.c **** //	first_ts = CLK100NS;
1479:bluetooth_rxtx.c ****         while (len--) {
 5741              		.loc 1 1479 0
 5742 001e 1EE0     		b	.L273
 5743              	.L277:
1480:bluetooth_rxtx.c ****                 if (data & msb)
 5744              		.loc 1 1480 0
 5745 0020 3A68     		ldr	r2, [r7]
 5746 0022 FB68     		ldr	r3, [r7, #12]
 5747 0024 1340     		ands	r3, r3, r2
 5748 0026 002B     		cmp	r3, #0
 5749 0028 03D0     		beq	.L274
1481:bluetooth_rxtx.c ****                         MOSI_SET;
 5750              		.loc 1 1481 0
 5751 002a 154B     		ldr	r3, .L279+4
 5752 002c 0122     		movs	r2, #1
 5753 002e 1A60     		str	r2, [r3]
 5754 0030 02E0     		b	.L275
 5755              	.L274:
1482:bluetooth_rxtx.c ****                 else
1483:bluetooth_rxtx.c ****                         MOSI_CLR;
 5756              		.loc 1 1483 0
 5757 0032 124B     		ldr	r3, .L279
 5758 0034 0122     		movs	r2, #1
 5759 0036 1A60     		str	r2, [r3]
 5760              	.L275:
1484:bluetooth_rxtx.c ****                 data <<= 1;
 5761              		.loc 1 1484 0
 5762 0038 3B68     		ldr	r3, [r7]
 5763 003a 5B00     		lsls	r3, r3, #1
 5764 003c 3B60     		str	r3, [r7]
1485:bluetooth_rxtx.c **** 
1486:bluetooth_rxtx.c ****                 SCLK_SET;
 5765              		.loc 1 1486 0
 5766 003e 104B     		ldr	r3, .L279+4
 5767 0040 1022     		movs	r2, #16
 5768 0042 1A60     		str	r2, [r3]
1487:bluetooth_rxtx.c ****                 if (MISO)
ARM GAS  /tmp/ccvLzxWr.s 			page 127


 5769              		.loc 1 1487 0
 5770 0044 0F4B     		ldr	r3, .L279+8
 5771 0046 1B68     		ldr	r3, [r3]
 5772 0048 03F00203 		and	r3, r3, #2
 5773 004c 002B     		cmp	r3, #0
 5774 004e 03D0     		beq	.L276
1488:bluetooth_rxtx.c ****                         data |= 1;
 5775              		.loc 1 1488 0
 5776 0050 3B68     		ldr	r3, [r7]
 5777 0052 43F00103 		orr	r3, r3, #1
 5778 0056 3B60     		str	r3, [r7]
 5779              	.L276:
1489:bluetooth_rxtx.c **** 
1490:bluetooth_rxtx.c ****                 SCLK_CLR;
 5780              		.loc 1 1490 0
 5781 0058 084B     		ldr	r3, .L279
 5782 005a 1022     		movs	r2, #16
 5783 005c 1A60     		str	r2, [r3]
 5784              	.L273:
1479:bluetooth_rxtx.c ****                 if (data & msb)
 5785              		.loc 1 1479 0
 5786 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5787 0060 5A1E     		subs	r2, r3, #1
 5788 0062 FA71     		strb	r2, [r7, #7]
 5789 0064 002B     		cmp	r3, #0
 5790 0066 DBD1     		bne	.L277
1491:bluetooth_rxtx.c ****         }
1492:bluetooth_rxtx.c **** //	second_ts = CLK100NS;
1493:bluetooth_rxtx.c **** //	diff_ts = second_ts - first_ts;
1494:bluetooth_rxtx.c **** 
1495:bluetooth_rxtx.c **** 	CSN_SET;
 5791              		.loc 1 1495 0
 5792 0068 054B     		ldr	r3, .L279+4
 5793 006a 2022     		movs	r2, #32
 5794 006c 1A60     		str	r2, [r3]
1496:bluetooth_rxtx.c **** 	return data;
 5795              		.loc 1 1496 0
 5796 006e 3B68     		ldr	r3, [r7]
1497:bluetooth_rxtx.c **** }
 5797              		.loc 1 1497 0
 5798 0070 1846     		mov	r0, r3
 5799 0072 1437     		adds	r7, r7, #20
 5800              		.cfi_def_cfa_offset 4
 5801 0074 BD46     		mov	sp, r7
 5802              		.cfi_def_cfa_register 13
 5803              		@ sp needed
 5804 0076 5DF8047B 		ldr	r7, [sp], #4
 5805              		.cfi_restore 7
 5806              		.cfi_def_cfa_offset 0
 5807 007a 7047     		bx	lr
 5808              	.L280:
 5809              		.align	2
 5810              	.L279:
 5811 007c 5CC00920 		.word	537509980
 5812 0080 58C00920 		.word	537509976
 5813 0084 54C00920 		.word	537509972
 5814              		.cfi_endproc
ARM GAS  /tmp/ccvLzxWr.s 			page 128


 5815              	.LFE26:
 5817              		.section	.text.cc2400_get_rev,"ax",%progbits
 5818              		.align	2
 5819              		.global	cc2400_get_rev
 5820              		.thumb
 5821              		.thumb_func
 5823              	cc2400_get_rev:
 5824              	.LFB27:
1498:bluetooth_rxtx.c **** 
1499:bluetooth_rxtx.c **** 
1500:bluetooth_rxtx.c **** 
1501:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1502:bluetooth_rxtx.c **** {
 5825              		.loc 1 1502 0
 5826              		.cfi_startproc
 5827              		@ args = 0, pretend = 0, frame = 16
 5828              		@ frame_needed = 1, uses_anonymous_args = 0
 5829 0000 80B5     		push	{r7, lr}
 5830              		.cfi_def_cfa_offset 8
 5831              		.cfi_offset 7, -8
 5832              		.cfi_offset 14, -4
 5833 0002 84B0     		sub	sp, sp, #16
 5834              		.cfi_def_cfa_offset 24
 5835 0004 00AF     		add	r7, sp, #0
 5836              		.cfi_def_cfa_register 7
 5837 0006 0346     		mov	r3, r0
 5838 0008 FB71     		strb	r3, [r7, #7]
1503:bluetooth_rxtx.c ****         u32 in;
1504:bluetooth_rxtx.c **** 
1505:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
 5839              		.loc 1 1505 0
 5840 000a FB79     		ldrb	r3, [r7, #7]
 5841 000c 63F07F03 		orn	r3, r3, #127
 5842 0010 DBB2     		uxtb	r3, r3
 5843 0012 1B02     		lsls	r3, r3, #8
 5844 0014 FB60     		str	r3, [r7, #12]
1506:bluetooth_rxtx.c ****         in = cc2400_spi_rev(16, out);
 5845              		.loc 1 1506 0
 5846 0016 1020     		movs	r0, #16
 5847 0018 F968     		ldr	r1, [r7, #12]
 5848 001a FFF7FEFF 		bl	cc2400_spi_rev
 5849 001e B860     		str	r0, [r7, #8]
1507:bluetooth_rxtx.c ****         return in & 0xFF;
 5850              		.loc 1 1507 0
 5851 0020 BB68     		ldr	r3, [r7, #8]
 5852 0022 DBB2     		uxtb	r3, r3
1508:bluetooth_rxtx.c **** }
 5853              		.loc 1 1508 0
 5854 0024 1846     		mov	r0, r3
 5855 0026 1037     		adds	r7, r7, #16
 5856              		.cfi_def_cfa_offset 8
 5857 0028 BD46     		mov	sp, r7
 5858              		.cfi_def_cfa_register 13
 5859              		@ sp needed
 5860 002a 80BD     		pop	{r7, pc}
 5861              		.cfi_endproc
 5862              	.LFE27:
ARM GAS  /tmp/ccvLzxWr.s 			page 129


 5864              		.section	.text.convert_to_int,"ax",%progbits
 5865              		.align	2
 5866              		.global	convert_to_int
 5867              		.thumb
 5868              		.thumb_func
 5870              	convert_to_int:
 5871              	.LFB28:
1509:bluetooth_rxtx.c **** 
1510:bluetooth_rxtx.c **** int convert_to_int (int in)
1511:bluetooth_rxtx.c **** {
 5872              		.loc 1 1511 0
 5873              		.cfi_startproc
 5874              		@ args = 0, pretend = 0, frame = 16
 5875              		@ frame_needed = 1, uses_anonymous_args = 0
 5876              		@ link register save eliminated.
 5877 0000 80B4     		push	{r7}
 5878              		.cfi_def_cfa_offset 4
 5879              		.cfi_offset 7, -4
 5880 0002 85B0     		sub	sp, sp, #20
 5881              		.cfi_def_cfa_offset 24
 5882 0004 00AF     		add	r7, sp, #0
 5883              		.cfi_def_cfa_register 7
 5884 0006 7860     		str	r0, [r7, #4]
1512:bluetooth_rxtx.c ****   int out;
1513:bluetooth_rxtx.c ****   if (in >= 128)
 5885              		.loc 1 1513 0
 5886 0008 7B68     		ldr	r3, [r7, #4]
 5887 000a 7F2B     		cmp	r3, #127
 5888 000c 04DD     		ble	.L284
1514:bluetooth_rxtx.c **** 	out = (in - 256);
 5889              		.loc 1 1514 0
 5890 000e 7B68     		ldr	r3, [r7, #4]
 5891 0010 A3F58073 		sub	r3, r3, #256
 5892 0014 FB60     		str	r3, [r7, #12]
 5893 0016 01E0     		b	.L285
 5894              	.L284:
1515:bluetooth_rxtx.c ****   else
1516:bluetooth_rxtx.c ****         out = in;
 5895              		.loc 1 1516 0
 5896 0018 7B68     		ldr	r3, [r7, #4]
 5897 001a FB60     		str	r3, [r7, #12]
 5898              	.L285:
1517:bluetooth_rxtx.c ****   return out;
 5899              		.loc 1 1517 0
 5900 001c FB68     		ldr	r3, [r7, #12]
1518:bluetooth_rxtx.c **** }
 5901              		.loc 1 1518 0
 5902 001e 1846     		mov	r0, r3
 5903 0020 1437     		adds	r7, r7, #20
 5904              		.cfi_def_cfa_offset 4
 5905 0022 BD46     		mov	sp, r7
 5906              		.cfi_def_cfa_register 13
 5907              		@ sp needed
 5908 0024 5DF8047B 		ldr	r7, [sp], #4
 5909              		.cfi_restore 7
 5910              		.cfi_def_cfa_offset 0
 5911 0028 7047     		bx	lr
ARM GAS  /tmp/ccvLzxWr.s 			page 130


 5912              		.cfi_endproc
 5913              	.LFE28:
 5915 002a 00BF     		.section	.text.add,"ax",%progbits
 5916              		.align	2
 5917              		.global	add
 5918              		.thumb
 5919              		.thumb_func
 5921              	add:
 5922              	.LFB29:
1519:bluetooth_rxtx.c **** /*
1520:bluetooth_rxtx.c **** u8 add (u8 x, u8 y)
1521:bluetooth_rxtx.c **** {
1522:bluetooth_rxtx.c ****   u8 carry = 0;
1523:bluetooth_rxtx.c ****   u8 result = 0;
1524:bluetooth_rxtx.c ****   u8 i;
1525:bluetooth_rxtx.c ****   
1526:bluetooth_rxtx.c ****   for (i = 0; i < 8; ++i)
1527:bluetooth_rxtx.c ****   {
1528:bluetooth_rxtx.c ****     u8 a = (x >> i) & 1;
1529:bluetooth_rxtx.c ****     u8 b = (y >> i) & 1;
1530:bluetooth_rxtx.c ****     result |= ((a^b)^carry) << i;
1531:bluetooth_rxtx.c ****     carry = (a & b) | (b & carry) | (carry & a);
1532:bluetooth_rxtx.c ****   }
1533:bluetooth_rxtx.c ****   return result;
1534:bluetooth_rxtx.c **** }
1535:bluetooth_rxtx.c **** */
1536:bluetooth_rxtx.c **** 
1537:bluetooth_rxtx.c **** u8 add (u8 x, u8 y)
1538:bluetooth_rxtx.c **** {
 5923              		.loc 1 1538 0
 5924              		.cfi_startproc
 5925              		@ args = 0, pretend = 0, frame = 16
 5926              		@ frame_needed = 1, uses_anonymous_args = 0
 5927              		@ link register save eliminated.
 5928 0000 80B4     		push	{r7}
 5929              		.cfi_def_cfa_offset 4
 5930              		.cfi_offset 7, -4
 5931 0002 85B0     		sub	sp, sp, #20
 5932              		.cfi_def_cfa_offset 24
 5933 0004 00AF     		add	r7, sp, #0
 5934              		.cfi_def_cfa_register 7
 5935 0006 0346     		mov	r3, r0
 5936 0008 0A46     		mov	r2, r1
 5937 000a FB71     		strb	r3, [r7, #7]
 5938 000c 1346     		mov	r3, r2
 5939 000e BB71     		strb	r3, [r7, #6]
1539:bluetooth_rxtx.c ****   while (y)
 5940              		.loc 1 1539 0
 5941 0010 0AE0     		b	.L288
 5942              	.L289:
 5943              	.LBB3:
1540:bluetooth_rxtx.c ****   {
1541:bluetooth_rxtx.c ****     u8 carry = x & y;
 5944              		.loc 1 1541 0
 5945 0012 FA79     		ldrb	r2, [r7, #7]
 5946 0014 BB79     		ldrb	r3, [r7, #6]
 5947 0016 1340     		ands	r3, r3, r2
ARM GAS  /tmp/ccvLzxWr.s 			page 131


 5948 0018 FB73     		strb	r3, [r7, #15]
1542:bluetooth_rxtx.c ****     x = x ^ y;
 5949              		.loc 1 1542 0
 5950 001a FA79     		ldrb	r2, [r7, #7]
 5951 001c BB79     		ldrb	r3, [r7, #6]
 5952 001e 5340     		eors	r3, r3, r2
 5953 0020 FB71     		strb	r3, [r7, #7]
1543:bluetooth_rxtx.c ****     y = carry << 1;
 5954              		.loc 1 1543 0
 5955 0022 FB7B     		ldrb	r3, [r7, #15]
 5956 0024 5B00     		lsls	r3, r3, #1
 5957 0026 BB71     		strb	r3, [r7, #6]
 5958              	.L288:
 5959              	.LBE3:
1539:bluetooth_rxtx.c ****   {
 5960              		.loc 1 1539 0
 5961 0028 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 5962 002a 002B     		cmp	r3, #0
 5963 002c F1D1     		bne	.L289
1544:bluetooth_rxtx.c ****   }
1545:bluetooth_rxtx.c ****   return x;
 5964              		.loc 1 1545 0
 5965 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
1546:bluetooth_rxtx.c **** }
 5966              		.loc 1 1546 0
 5967 0030 1846     		mov	r0, r3
 5968 0032 1437     		adds	r7, r7, #20
 5969              		.cfi_def_cfa_offset 4
 5970 0034 BD46     		mov	sp, r7
 5971              		.cfi_def_cfa_register 13
 5972              		@ sp needed
 5973 0036 5DF8047B 		ldr	r7, [sp], #4
 5974              		.cfi_restore 7
 5975              		.cfi_def_cfa_offset 0
 5976 003a 7047     		bx	lr
 5977              		.cfi_endproc
 5978              	.LFE29:
 5980              		.section	.text.bt_stream_rx,"ax",%progbits
 5981              		.align	2
 5982              		.global	bt_stream_rx
 5983              		.thumb
 5984              		.thumb_func
 5986              	bt_stream_rx:
 5987              	.LFB30:
1547:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1548:bluetooth_rxtx.c **** // wpson
1549:bluetooth_rxtx.c **** void bt_stream_rx()
1550:bluetooth_rxtx.c **** {
 5988              		.loc 1 1550 0
 5989              		.cfi_startproc
 5990              		@ args = 0, pretend = 0, frame = 64
 5991              		@ frame_needed = 1, uses_anonymous_args = 0
 5992 0000 90B5     		push	{r4, r7, lr}
 5993              		.cfi_def_cfa_offset 12
 5994              		.cfi_offset 4, -12
 5995              		.cfi_offset 7, -8
 5996              		.cfi_offset 14, -4
ARM GAS  /tmp/ccvLzxWr.s 			page 132


 5997 0002 91B0     		sub	sp, sp, #68
 5998              		.cfi_def_cfa_offset 80
 5999 0004 00AF     		add	r7, sp, #0
 6000              		.cfi_def_cfa_register 7
1551:bluetooth_rxtx.c **** 	u8 epstat;
1552:bluetooth_rxtx.c **** //	u16 f;
1553:bluetooth_rxtx.c **** //	u8 buf[DMA_SIZE];
1554:bluetooth_rxtx.c **** 	u8 rssi[50];
1555:bluetooth_rxtx.c **** 	int i = 0;
 6001              		.loc 1 1555 0
 6002 0006 0023     		movs	r3, #0
 6003 0008 FB63     		str	r3, [r7, #60]
1556:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6004              		.loc 1 1556 0
 6005 000a 0023     		movs	r3, #0
 6006 000c FB63     		str	r3, [r7, #60]
 6007 000e 07E0     		b	.L292
 6008              	.L293:
1557:bluetooth_rxtx.c **** 		rssi[i] = 0;
 6009              		.loc 1 1557 0 discriminator 3
 6010 0010 3A46     		mov	r2, r7
 6011 0012 FB6B     		ldr	r3, [r7, #60]
 6012 0014 1344     		add	r3, r3, r2
 6013 0016 0022     		movs	r2, #0
 6014 0018 1A70     		strb	r2, [r3]
1556:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6015              		.loc 1 1556 0 discriminator 3
 6016 001a FB6B     		ldr	r3, [r7, #60]
 6017 001c 0133     		adds	r3, r3, #1
 6018 001e FB63     		str	r3, [r7, #60]
 6019              	.L292:
1556:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6020              		.loc 1 1556 0 is_stmt 0 discriminator 1
 6021 0020 FB6B     		ldr	r3, [r7, #60]
 6022 0022 312B     		cmp	r3, #49
 6023 0024 F4DD     		ble	.L293
1558:bluetooth_rxtx.c **** //	u8 length = 50;
1559:bluetooth_rxtx.c **** 	int window = 0;
 6024              		.loc 1 1559 0 is_stmt 1
 6025 0026 0023     		movs	r3, #0
 6026 0028 BB63     		str	r3, [r7, #56]
1560:bluetooth_rxtx.c **** //	u8 index = 0;
1561:bluetooth_rxtx.c **** 	u8 old = 0;
 6027              		.loc 1 1561 0
 6028 002a 0023     		movs	r3, #0
 6029 002c 87F83730 		strb	r3, [r7, #55]
1562:bluetooth_rxtx.c **** 	u8 now = 0;
 6030              		.loc 1 1562 0
 6031 0030 0023     		movs	r3, #0
 6032 0032 87F83530 		strb	r3, [r7, #53]
1563:bluetooth_rxtx.c **** 	u8 diff = 0;
 6033              		.loc 1 1563 0
 6034 0036 0023     		movs	r3, #0
 6035 0038 87F83630 		strb	r3, [r7, #54]
1564:bluetooth_rxtx.c **** 	u8 k = 0;
 6036              		.loc 1 1564 0
 6037 003c 0023     		movs	r3, #0
ARM GAS  /tmp/ccvLzxWr.s 			page 133


 6038 003e 87F83430 		strb	r3, [r7, #52]
1565:bluetooth_rxtx.c **** 	u8 temp = 0;
 6039              		.loc 1 1565 0
 6040 0042 0023     		movs	r3, #0
 6041 0044 87F83330 		strb	r3, [r7, #51]
1566:bluetooth_rxtx.c **** //	TXLED_SET;
1567:bluetooth_rxtx.c **** 	queue_init();
 6042              		.loc 1 1567 0
 6043 0048 FFF7FEFF 		bl	queue_init
1568:bluetooth_rxtx.c **** 
1569:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1570:bluetooth_rxtx.c **** 	PAEN_SET;
 6044              		.loc 1 1570 0
 6045 004c 694B     		ldr	r3, .L304
 6046 004e 8022     		movs	r2, #128
 6047 0050 1A60     		str	r2, [r3]
1571:bluetooth_rxtx.c **** //	HGM_SET;
1572:bluetooth_rxtx.c **** #endif
1573:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6048              		.loc 1 1573 0
 6049 0052 0D20     		movs	r0, #13
 6050 0054 47F6FF71 		movw	r1, #32767
 6051 0058 FFF7FEFF 		bl	cc2400_set
1574:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6052              		.loc 1 1574 0
 6053 005c 1220     		movs	r0, #18
 6054 005e 42F62231 		movw	r1, #11042
 6055 0062 FFF7FEFF 		bl	cc2400_set
1575:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6056              		.loc 1 1575 0
 6057 0066 1420     		movs	r0, #20
 6058 0068 41F24B21 		movw	r1, #4683
 6059 006c FFF7FEFF 		bl	cc2400_set
1576:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6060              		.loc 1 1576 0
 6061 0070 2020     		movs	r0, #32
 6062 0072 40F26151 		movw	r1, #1377
 6063 0076 FFF7FEFF 		bl	cc2400_set
1577:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6064              		.loc 1 1577 0
 6065 007a 0320     		movs	r0, #3
 6066 007c 4021     		movs	r1, #64
 6067 007e FFF7FEFF 		bl	cc2400_set
1578:bluetooth_rxtx.c **** 
1579:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1580:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1581:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0x00ff);
1582:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x00ff);
1583:bluetooth_rxtx.c **** 	
1584:bluetooth_rxtx.c **** //	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
1585:bluetooth_rxtx.c **** //	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
1586:bluetooth_rxtx.c **** 	
1587:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6068              		.loc 1 1587 0
 6069 0082 00BF     		nop
 6070              	.L294:
 6071              		.loc 1 1587 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccvLzxWr.s 			page 134


 6072 0084 FFF7FEFF 		bl	cc2400_status
 6073 0088 0346     		mov	r3, r0
 6074 008a 03F04003 		and	r3, r3, #64
 6075 008e 002B     		cmp	r3, #0
 6076 0090 F8D0     		beq	.L294
1588:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6077              		.loc 1 1588 0 is_stmt 1
 6078 0092 00BF     		nop
 6079              	.L295:
 6080              		.loc 1 1588 0 is_stmt 0 discriminator 1
 6081 0094 FFF7FEFF 		bl	cc2400_status
 6082 0098 0346     		mov	r3, r0
 6083 009a 03F00403 		and	r3, r3, #4
 6084 009e 002B     		cmp	r3, #0
 6085 00a0 F8D1     		bne	.L295
1589:bluetooth_rxtx.c **** 
1590:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6086              		.loc 1 1590 0 is_stmt 1
 6087 00a2 554B     		ldr	r3, .L304+4
 6088 00a4 1B88     		ldrh	r3, [r3]	@ movhi
 6089 00a6 9BB2     		uxth	r3, r3
 6090 00a8 013B     		subs	r3, r3, #1
 6091 00aa 9BB2     		uxth	r3, r3
 6092 00ac 0220     		movs	r0, #2
 6093 00ae 1946     		mov	r1, r3
 6094 00b0 FFF7FEFF 		bl	cc2400_set
1591:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6095              		.loc 1 1591 0
 6096 00b4 6120     		movs	r0, #97
 6097 00b6 FFF7FEFF 		bl	cc2400_strobe
1592:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6098              		.loc 1 1592 0
 6099 00ba 00BF     		nop
 6100              	.L296:
 6101              		.loc 1 1592 0 is_stmt 0 discriminator 1
 6102 00bc FFF7FEFF 		bl	cc2400_status
 6103 00c0 0346     		mov	r3, r0
 6104 00c2 03F00403 		and	r3, r3, #4
 6105 00c6 002B     		cmp	r3, #0
 6106 00c8 F8D0     		beq	.L296
1593:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6107              		.loc 1 1593 0 is_stmt 1
 6108 00ca 6220     		movs	r0, #98
 6109 00cc FFF7FEFF 		bl	cc2400_strobe
1594:bluetooth_rxtx.c **** 	
1595:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 6110              		.loc 1 1595 0
 6111 00d0 83E0     		b	.L297
 6112              	.L303:
1596:bluetooth_rxtx.c **** 	
1597:bluetooth_rxtx.c **** //		while (!(cc2400_status () & SYNC_RECEIVED));	
1598:bluetooth_rxtx.c **** 		window = 0;
 6113              		.loc 1 1598 0
 6114 00d2 0023     		movs	r3, #0
 6115 00d4 BB63     		str	r3, [r7, #56]
1599:bluetooth_rxtx.c **** 		old = 0;
 6116              		.loc 1 1599 0
ARM GAS  /tmp/ccvLzxWr.s 			page 135


 6117 00d6 0023     		movs	r3, #0
 6118 00d8 87F83730 		strb	r3, [r7, #55]
1600:bluetooth_rxtx.c **** 		now = 0;
 6119              		.loc 1 1600 0
 6120 00dc 0023     		movs	r3, #0
 6121 00de 87F83530 		strb	r3, [r7, #53]
1601:bluetooth_rxtx.c **** 		diff = 0;
 6122              		.loc 1 1601 0
 6123 00e2 0023     		movs	r3, #0
 6124 00e4 87F83630 		strb	r3, [r7, #54]
1602:bluetooth_rxtx.c **** 		
1603:bluetooth_rxtx.c **** 
1604:bluetooth_rxtx.c **** //		diff_ts = CLK100NS - first_ts;
1605:bluetooth_rxtx.c **** //wpson
1606:bluetooth_rxtx.c **** 		while (window < 10)
 6125              		.loc 1 1606 0
 6126 00e8 34E0     		b	.L298
 6127              	.L301:
1607:bluetooth_rxtx.c **** 		{
1608:bluetooth_rxtx.c **** 		
1609:bluetooth_rxtx.c **** 			now = cc2400_get_rev(FREQEST);	 
 6128              		.loc 1 1609 0
 6129 00ea 0720     		movs	r0, #7
 6130 00ec FFF7FEFF 		bl	cc2400_get_rev
 6131 00f0 0346     		mov	r3, r0
 6132 00f2 87F83530 		strb	r3, [r7, #53]
1610:bluetooth_rxtx.c **** 		//	diff = add (now, 0xfa); // 1->6
1611:bluetooth_rxtx.c **** 		//	diff = add (now, 0xf9); // 2->7
1612:bluetooth_rxtx.c **** 		//	diff = add (now, 0xfc); // 3->4
1613:bluetooth_rxtx.c **** 		//	diff = add (now, 0xfb); // 4->5
1614:bluetooth_rxtx.c **** 			diff = add (now, 0xf8); // 5->8
 6133              		.loc 1 1614 0
 6134 00f6 97F83530 		ldrb	r3, [r7, #53]	@ zero_extendqisi2
 6135 00fa 1846     		mov	r0, r3
 6136 00fc F821     		movs	r1, #248
 6137 00fe FFF7FEFF 		bl	add
 6138 0102 0346     		mov	r3, r0
 6139 0104 87F83630 		strb	r3, [r7, #54]
1615:bluetooth_rxtx.c **** 			if (diff & 0x80) 
 6140              		.loc 1 1615 0
 6141 0108 97F83630 		ldrb	r3, [r7, #54]	@ zero_extendqisi2
 6142 010c 5BB2     		sxtb	r3, r3
 6143 010e 002B     		cmp	r3, #0
 6144 0110 0ADA     		bge	.L299
1616:bluetooth_rxtx.c **** 				diff = add (~diff, 1);	
 6145              		.loc 1 1616 0
 6146 0112 97F83630 		ldrb	r3, [r7, #54]
 6147 0116 DB43     		mvns	r3, r3
 6148 0118 DBB2     		uxtb	r3, r3
 6149 011a 1846     		mov	r0, r3
 6150 011c 0121     		movs	r1, #1
 6151 011e FFF7FEFF 		bl	add
 6152 0122 0346     		mov	r3, r0
 6153 0124 87F83630 		strb	r3, [r7, #54]
 6154              	.L299:
1617:bluetooth_rxtx.c **** 
1618:bluetooth_rxtx.c **** 			if (diff < 0x05)
ARM GAS  /tmp/ccvLzxWr.s 			page 136


 6155              		.loc 1 1618 0
 6156 0128 97F83630 		ldrb	r3, [r7, #54]	@ zero_extendqisi2
 6157 012c 042B     		cmp	r3, #4
 6158 012e 03D8     		bhi	.L300
1619:bluetooth_rxtx.c **** 				window++;
 6159              		.loc 1 1619 0
 6160 0130 BB6B     		ldr	r3, [r7, #56]
 6161 0132 0133     		adds	r3, r3, #1
 6162 0134 BB63     		str	r3, [r7, #56]
 6163 0136 0DE0     		b	.L298
 6164              	.L300:
1620:bluetooth_rxtx.c **** 			else
1621:bluetooth_rxtx.c **** 			{
1622:bluetooth_rxtx.c **** 				old++;
 6165              		.loc 1 1622 0
 6166 0138 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 6167 013c 0133     		adds	r3, r3, #1
 6168 013e 87F83730 		strb	r3, [r7, #55]
1623:bluetooth_rxtx.c **** 				if (old > 1)
 6169              		.loc 1 1623 0
 6170 0142 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 6171 0146 012B     		cmp	r3, #1
 6172 0148 04D9     		bls	.L298
1624:bluetooth_rxtx.c **** 				{
1625:bluetooth_rxtx.c **** 					old = 0;
 6173              		.loc 1 1625 0
 6174 014a 0023     		movs	r3, #0
 6175 014c 87F83730 		strb	r3, [r7, #55]
1626:bluetooth_rxtx.c **** 					window = 0;
 6176              		.loc 1 1626 0
 6177 0150 0023     		movs	r3, #0
 6178 0152 BB63     		str	r3, [r7, #56]
 6179              	.L298:
1606:bluetooth_rxtx.c **** 		{
 6180              		.loc 1 1606 0
 6181 0154 BB6B     		ldr	r3, [r7, #56]
 6182 0156 092B     		cmp	r3, #9
 6183 0158 C7DD     		ble	.L301
1627:bluetooth_rxtx.c **** 				}
1628:bluetooth_rxtx.c **** 			}
1629:bluetooth_rxtx.c **** 		//	old = now;
1630:bluetooth_rxtx.c **** 		}
1631:bluetooth_rxtx.c **** 	
1632:bluetooth_rxtx.c **** 
1633:bluetooth_rxtx.c **** 	//	if (now >= 0 && now <= 3)
1634:bluetooth_rxtx.c **** 		{
1635:bluetooth_rxtx.c **** 	
1636:bluetooth_rxtx.c **** //			first_ts = CLK100NS;
1637:bluetooth_rxtx.c **** 			rssi_avg = ((int8_t)cc2400_get_rev(RSSI) + (int8_t)cc2400_get_rev(RSSI))/2;
 6184              		.loc 1 1637 0
 6185 015a 0620     		movs	r0, #6
 6186 015c FFF7FEFF 		bl	cc2400_get_rev
 6187 0160 0346     		mov	r3, r0
 6188 0162 DBB2     		uxtb	r3, r3
 6189 0164 5CB2     		sxtb	r4, r3
 6190 0166 0620     		movs	r0, #6
 6191 0168 FFF7FEFF 		bl	cc2400_get_rev
ARM GAS  /tmp/ccvLzxWr.s 			page 137


 6192 016c 0346     		mov	r3, r0
 6193 016e DBB2     		uxtb	r3, r3
 6194 0170 5BB2     		sxtb	r3, r3
 6195 0172 2344     		add	r3, r3, r4
 6196 0174 DA0F     		lsrs	r2, r3, #31
 6197 0176 1344     		add	r3, r3, r2
 6198 0178 5B10     		asrs	r3, r3, #1
 6199 017a DAB2     		uxtb	r2, r3
 6200 017c 1F4B     		ldr	r3, .L304+8
 6201 017e 1A70     		strb	r2, [r3]
1638:bluetooth_rxtx.c **** //			freq_avg = now;
1639:bluetooth_rxtx.c **** 	
1640:bluetooth_rxtx.c **** //			diff_ts = second_ts - first_ts;
1641:bluetooth_rxtx.c **** 			enqueue_with_ts(FREQ_PACKET, rssi, diff_ts);
 6202              		.loc 1 1641 0
 6203 0180 1F4B     		ldr	r3, .L304+12
 6204 0182 1B68     		ldr	r3, [r3]
 6205 0184 3A46     		mov	r2, r7
 6206 0186 0720     		movs	r0, #7
 6207 0188 1146     		mov	r1, r2
 6208 018a 1A46     		mov	r2, r3
 6209 018c FFF7FEFF 		bl	enqueue_with_ts
1642:bluetooth_rxtx.c **** 			handle_usb(clkn);
 6210              		.loc 1 1642 0
 6211 0190 1C4B     		ldr	r3, .L304+16
 6212 0192 1B68     		ldr	r3, [r3]
 6213 0194 1846     		mov	r0, r3
 6214 0196 FFF7FEFF 		bl	handle_usb
1643:bluetooth_rxtx.c **** 		}
1644:bluetooth_rxtx.c **** 
1645:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 6215              		.loc 1 1645 0
 6216 019a 1A4B     		ldr	r3, .L304+16
 6217 019c 1B68     		ldr	r3, [r3]
 6218 019e C3F31303 		ubfx	r3, r3, #0, #20
 6219 01a2 40F63542 		movw	r2, #3125
 6220 01a6 02FB03F2 		mul	r2, r2, r3
 6221 01aa 174B     		ldr	r3, .L304+20
 6222 01ac 1B68     		ldr	r3, [r3]
 6223 01ae 1344     		add	r3, r3, r2
 6224 01b0 164A     		ldr	r2, .L304+24
 6225 01b2 1360     		str	r3, [r2]
1646:bluetooth_rxtx.c **** 		while ((CLK100NS-first_ts)<3000)
 6226              		.loc 1 1646 0
 6227 01b4 00BF     		nop
 6228              	.L302:
 6229              		.loc 1 1646 0 is_stmt 0 discriminator 1
 6230 01b6 134B     		ldr	r3, .L304+16
 6231 01b8 1B68     		ldr	r3, [r3]
 6232 01ba C3F31303 		ubfx	r3, r3, #0, #20
 6233 01be 40F63542 		movw	r2, #3125
 6234 01c2 02FB03F2 		mul	r2, r2, r3
 6235 01c6 104B     		ldr	r3, .L304+20
 6236 01c8 1B68     		ldr	r3, [r3]
 6237 01ca 1A44     		add	r2, r2, r3
 6238 01cc 0F4B     		ldr	r3, .L304+24
 6239 01ce 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 138


 6240 01d0 D31A     		subs	r3, r2, r3
 6241 01d2 40F6B732 		movw	r2, #2999
 6242 01d6 9342     		cmp	r3, r2
 6243 01d8 EDD9     		bls	.L302
 6244              	.L297:
1595:bluetooth_rxtx.c **** 	
 6245              		.loc 1 1595 0 is_stmt 1
 6246 01da 0D4B     		ldr	r3, .L304+28
 6247 01dc 1B78     		ldrb	r3, [r3]
 6248 01de DBB2     		uxtb	r3, r3
 6249 01e0 012B     		cmp	r3, #1
 6250 01e2 3FF476AF 		beq	.L303
1647:bluetooth_rxtx.c **** 		{};
1648:bluetooth_rxtx.c **** /*		cc2400_strobe (SRFOFF);
1649:bluetooth_rxtx.c **** 		while ((cc2400_status () & FS_LOCK));
1650:bluetooth_rxtx.c **** 
1651:bluetooth_rxtx.c **** 		while (!(cc2400_status () & XOSC16M_STABLE));
1652:bluetooth_rxtx.c **** 		
1653:bluetooth_rxtx.c **** 		cc2400_strobe (SFSON);
1654:bluetooth_rxtx.c **** 		while (!(cc2400_status () & FS_LOCK));
1655:bluetooth_rxtx.c **** 
1656:bluetooth_rxtx.c **** 	
1657:bluetooth_rxtx.c **** //		msleep(500);	
1658:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
1659:bluetooth_rxtx.c **** */
1660:bluetooth_rxtx.c **** 	}
1661:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 6251              		.loc 1 1661 0
 6252 01e6 0B4B     		ldr	r3, .L304+32
 6253 01e8 0022     		movs	r2, #0
 6254 01ea 1A70     		strb	r2, [r3]
1662:bluetooth_rxtx.c **** }
 6255              		.loc 1 1662 0
 6256 01ec 4437     		adds	r7, r7, #68
 6257              		.cfi_def_cfa_offset 12
 6258 01ee BD46     		mov	sp, r7
 6259              		.cfi_def_cfa_register 13
 6260              		@ sp needed
 6261 01f0 90BD     		pop	{r4, r7, pc}
 6262              	.L305:
 6263 01f2 00BF     		.align	2
 6264              	.L304:
 6265 01f4 58C00920 		.word	537509976
 6266 01f8 00000000 		.word	channel
 6267 01fc 00000000 		.word	rssi_avg
 6268 0200 00000000 		.word	diff_ts
 6269 0204 00000000 		.word	clkn
 6270 0208 08400040 		.word	1073758216
 6271 020c 00000000 		.word	first_ts
 6272 0210 00000000 		.word	requested_mode
 6273 0214 00000000 		.word	mode
 6274              		.cfi_endproc
 6275              	.LFE30:
 6277              		.section	.text.le_set_access_address,"ax",%progbits
 6278              		.align	2
 6279              		.thumb
 6280              		.thumb_func
ARM GAS  /tmp/ccvLzxWr.s 			page 139


 6282              	le_set_access_address:
 6283              	.LFB31:
1663:bluetooth_rxtx.c **** 
1664:bluetooth_rxtx.c **** 
1665:bluetooth_rxtx.c **** /* set LE access address */
1666:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 6284              		.loc 1 1666 0
 6285              		.cfi_startproc
 6286              		@ args = 0, pretend = 0, frame = 16
 6287              		@ frame_needed = 1, uses_anonymous_args = 0
 6288 0000 80B5     		push	{r7, lr}
 6289              		.cfi_def_cfa_offset 8
 6290              		.cfi_offset 7, -8
 6291              		.cfi_offset 14, -4
 6292 0002 84B0     		sub	sp, sp, #16
 6293              		.cfi_def_cfa_offset 24
 6294 0004 00AF     		add	r7, sp, #0
 6295              		.cfi_def_cfa_register 7
 6296 0006 7860     		str	r0, [r7, #4]
1667:bluetooth_rxtx.c **** 	u32 aa_rev;
1668:bluetooth_rxtx.c **** 
1669:bluetooth_rxtx.c **** 	le.access_address = aa;
 6297              		.loc 1 1669 0
 6298 0008 094A     		ldr	r2, .L307
 6299 000a 7B68     		ldr	r3, [r7, #4]
 6300 000c 1360     		str	r3, [r2]
1670:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 6301              		.loc 1 1670 0
 6302 000e 7868     		ldr	r0, [r7, #4]
 6303 0010 FFF7FEFF 		bl	rbit
 6304 0014 F860     		str	r0, [r7, #12]
1671:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 6305              		.loc 1 1671 0
 6306 0016 FB68     		ldr	r3, [r7, #12]
 6307 0018 9AB2     		uxth	r2, r3
 6308 001a 054B     		ldr	r3, .L307
 6309 001c DA80     		strh	r2, [r3, #6]	@ movhi
1672:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 6310              		.loc 1 1672 0
 6311 001e FB68     		ldr	r3, [r7, #12]
 6312 0020 1B0C     		lsrs	r3, r3, #16
 6313 0022 9AB2     		uxth	r2, r3
 6314 0024 024B     		ldr	r3, .L307
 6315 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1673:bluetooth_rxtx.c **** }
 6316              		.loc 1 1673 0
 6317 0028 1037     		adds	r7, r7, #16
 6318              		.cfi_def_cfa_offset 8
 6319 002a BD46     		mov	sp, r7
 6320              		.cfi_def_cfa_register 13
 6321              		@ sp needed
 6322 002c 80BD     		pop	{r7, pc}
 6323              	.L308:
 6324 002e 00BF     		.align	2
 6325              	.L307:
 6326 0030 00000000 		.word	le
 6327              		.cfi_endproc
ARM GAS  /tmp/ccvLzxWr.s 			page 140


 6328              	.LFE31:
 6330              		.section	.text.reset_le,"ax",%progbits
 6331              		.align	2
 6332              		.global	reset_le
 6333              		.thumb
 6334              		.thumb_func
 6336              	reset_le:
 6337              	.LFB32:
1674:bluetooth_rxtx.c **** 
1675:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1676:bluetooth_rxtx.c **** void reset_le() {
 6338              		.loc 1 1676 0
 6339              		.cfi_startproc
 6340              		@ args = 0, pretend = 0, frame = 0
 6341              		@ frame_needed = 1, uses_anonymous_args = 0
 6342 0000 80B5     		push	{r7, lr}
 6343              		.cfi_def_cfa_offset 8
 6344              		.cfi_offset 7, -8
 6345              		.cfi_offset 14, -4
 6346 0002 00AF     		add	r7, sp, #0
 6347              		.cfi_def_cfa_register 7
1677:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 6348              		.loc 1 1677 0
 6349 0004 1F48     		ldr	r0, .L310
 6350 0006 FFF7FEFF 		bl	le_set_access_address
1678:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 6351              		.loc 1 1678 0
 6352 000a 1F4B     		ldr	r3, .L310+4
 6353 000c 1F4A     		ldr	r2, .L310+8
 6354 000e 9A60     		str	r2, [r3, #8]
1679:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 6355              		.loc 1 1679 0
 6356 0010 1D4B     		ldr	r3, .L310+4
 6357 0012 1F4A     		ldr	r2, .L310+12
 6358 0014 DA60     		str	r2, [r3, #12]
1680:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 6359              		.loc 1 1680 0
 6360 0016 1C4B     		ldr	r3, .L310+4
 6361 0018 0122     		movs	r2, #1
 6362 001a 1A61     		str	r2, [r3, #16]
1681:bluetooth_rxtx.c **** 	le.last_packet = 0;
 6363              		.loc 1 1681 0
 6364 001c 1A4B     		ldr	r3, .L310+4
 6365 001e 0022     		movs	r2, #0
 6366 0020 1A64     		str	r2, [r3, #64]
1682:bluetooth_rxtx.c **** 
1683:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 6367              		.loc 1 1683 0
 6368 0022 194B     		ldr	r3, .L310+4
 6369 0024 0022     		movs	r2, #0
 6370 0026 1A75     		strb	r2, [r3, #20]
1684:bluetooth_rxtx.c **** 
1685:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 6371              		.loc 1 1685 0
 6372 0028 174B     		ldr	r3, .L310+4
 6373 002a 0022     		movs	r2, #0
 6374 002c 5A75     		strb	r2, [r3, #21]
ARM GAS  /tmp/ccvLzxWr.s 			page 141


1686:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 6375              		.loc 1 1686 0
 6376 002e 164B     		ldr	r3, .L310+4
 6377 0030 0022     		movs	r2, #0
 6378 0032 9A75     		strb	r2, [r3, #22]
1687:bluetooth_rxtx.c **** 
1688:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 6379              		.loc 1 1688 0
 6380 0034 144B     		ldr	r3, .L310+4
 6381 0036 0022     		movs	r2, #0
 6382 0038 9A61     		str	r2, [r3, #24]
1689:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 6383              		.loc 1 1689 0
 6384 003a 134B     		ldr	r3, .L310+4
 6385 003c 0022     		movs	r2, #0
 6386 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1690:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6387              		.loc 1 1690 0
 6388 0040 114B     		ldr	r3, .L310+4
 6389 0042 0022     		movs	r2, #0
 6390 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1691:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6391              		.loc 1 1691 0
 6392 0046 104B     		ldr	r3, .L310+4
 6393 0048 0022     		movs	r2, #0
 6394 004a DA83     		strh	r2, [r3, #30]	@ movhi
1692:bluetooth_rxtx.c **** 	le.conn_count = 0;
 6395              		.loc 1 1692 0
 6396 004c 0E4B     		ldr	r3, .L310+4
 6397 004e 0022     		movs	r2, #0
 6398 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1693:bluetooth_rxtx.c **** 
1694:bluetooth_rxtx.c **** 	le.win_size = 0;
 6399              		.loc 1 1694 0
 6400 0052 0D4B     		ldr	r3, .L310+4
 6401 0054 0022     		movs	r2, #0
 6402 0056 83F82220 		strb	r2, [r3, #34]
1695:bluetooth_rxtx.c **** 	le.win_offset = 0;
 6403              		.loc 1 1695 0
 6404 005a 0B4B     		ldr	r3, .L310+4
 6405 005c 0022     		movs	r2, #0
 6406 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1696:bluetooth_rxtx.c **** 
1697:bluetooth_rxtx.c **** 	le.update_pending = 0;
 6407              		.loc 1 1697 0
 6408 0060 094B     		ldr	r3, .L310+4
 6409 0062 0022     		movs	r2, #0
 6410 0064 9A62     		str	r2, [r3, #40]
1698:bluetooth_rxtx.c **** 	le.update_instant = 0;
 6411              		.loc 1 1698 0
 6412 0066 084B     		ldr	r3, .L310+4
 6413 0068 0022     		movs	r2, #0
 6414 006a 9A85     		strh	r2, [r3, #44]	@ movhi
1699:bluetooth_rxtx.c **** 	le.interval_update = 0;
 6415              		.loc 1 1699 0
 6416 006c 064B     		ldr	r3, .L310+4
 6417 006e 0022     		movs	r2, #0
ARM GAS  /tmp/ccvLzxWr.s 			page 142


 6418 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1700:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 6419              		.loc 1 1700 0
 6420 0072 054B     		ldr	r3, .L310+4
 6421 0074 0022     		movs	r2, #0
 6422 0076 83F83020 		strb	r2, [r3, #48]
1701:bluetooth_rxtx.c **** 	le.win_offset_update;
1702:bluetooth_rxtx.c **** 
1703:bluetooth_rxtx.c **** 	do_hop = 0;
 6423              		.loc 1 1703 0
 6424 007a 064B     		ldr	r3, .L310+16
 6425 007c 0022     		movs	r2, #0
 6426 007e 1A70     		strb	r2, [r3]
1704:bluetooth_rxtx.c **** }
 6427              		.loc 1 1704 0
 6428 0080 80BD     		pop	{r7, pc}
 6429              	.L311:
 6430 0082 00BF     		.align	2
 6431              	.L310:
 6432 0084 D6BE898E 		.word	-1903575338
 6433 0088 00000000 		.word	le
 6434 008c 55555500 		.word	5592405
 6435 0090 AAAAAA00 		.word	11184810
 6436 0094 00000000 		.word	do_hop
 6437              		.cfi_endproc
 6438              	.LFE32:
 6440              		.section	.text.reset_le_promisc,"ax",%progbits
 6441              		.align	2
 6442              		.global	reset_le_promisc
 6443              		.thumb
 6444              		.thumb_func
 6446              	reset_le_promisc:
 6447              	.LFB33:
1705:bluetooth_rxtx.c **** 
1706:bluetooth_rxtx.c **** // reset LE Promisc state
1707:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 6448              		.loc 1 1707 0
 6449              		.cfi_startproc
 6450              		@ args = 0, pretend = 0, frame = 0
 6451              		@ frame_needed = 1, uses_anonymous_args = 0
 6452 0000 80B5     		push	{r7, lr}
 6453              		.cfi_def_cfa_offset 8
 6454              		.cfi_offset 7, -8
 6455              		.cfi_offset 14, -4
 6456 0002 00AF     		add	r7, sp, #0
 6457              		.cfi_def_cfa_register 7
1708:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 6458              		.loc 1 1708 0
 6459 0004 0548     		ldr	r0, .L313
 6460 0006 0021     		movs	r1, #0
 6461 0008 4FF48472 		mov	r2, #264
 6462 000c FFF7FEFF 		bl	memset
1709:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 6463              		.loc 1 1709 0
 6464 0010 024B     		ldr	r3, .L313
 6465 0012 4FF0FF32 		mov	r2, #-1
 6466 0016 C3F80021 		str	r2, [r3, #256]
ARM GAS  /tmp/ccvLzxWr.s 			page 143


1710:bluetooth_rxtx.c **** }
 6467              		.loc 1 1710 0
 6468 001a 80BD     		pop	{r7, pc}
 6469              	.L314:
 6470              		.align	2
 6471              	.L313:
 6472 001c 00000000 		.word	le_promisc
 6473              		.cfi_endproc
 6474              	.LFE33:
 6476              		.section	.text.bt_generic_le,"ax",%progbits
 6477              		.align	2
 6478              		.global	bt_generic_le
 6479              		.thumb
 6480              		.thumb_func
 6482              	bt_generic_le:
 6483              	.LFB34:
1711:bluetooth_rxtx.c **** 
1712:bluetooth_rxtx.c **** /* generic le mode */
1713:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1714:bluetooth_rxtx.c **** {
 6484              		.loc 1 1714 0
 6485              		.cfi_startproc
 6486              		@ args = 0, pretend = 0, frame = 32
 6487              		@ frame_needed = 1, uses_anonymous_args = 0
 6488 0000 80B5     		push	{r7, lr}
 6489              		.cfi_def_cfa_offset 8
 6490              		.cfi_offset 7, -8
 6491              		.cfi_offset 14, -4
 6492 0002 88B0     		sub	sp, sp, #32
 6493              		.cfi_def_cfa_offset 40
 6494 0004 00AF     		add	r7, sp, #0
 6495              		.cfi_def_cfa_register 7
 6496 0006 0346     		mov	r3, r0
 6497 0008 FB71     		strb	r3, [r7, #7]
1715:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6498              		.loc 1 1715 0
 6499 000a 0023     		movs	r3, #0
 6500 000c FB60     		str	r3, [r7, #12]
1716:bluetooth_rxtx.c **** 	u8 hold;
1717:bluetooth_rxtx.c **** 	int i, j;
1718:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1719:bluetooth_rxtx.c **** 
1720:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6501              		.loc 1 1720 0
 6502 000e A44B     		ldr	r3, .L343
 6503 0010 0122     		movs	r2, #1
 6504 0012 1A70     		strb	r2, [r3]
1721:bluetooth_rxtx.c **** 	mode = active_mode;
 6505              		.loc 1 1721 0
 6506 0014 A34A     		ldr	r2, .L343+4
 6507 0016 FB79     		ldrb	r3, [r7, #7]
 6508 0018 1370     		strb	r3, [r2]
1722:bluetooth_rxtx.c **** 
1723:bluetooth_rxtx.c **** 	reset_le();
 6509              		.loc 1 1723 0
 6510 001a FFF7FEFF 		bl	reset_le
1724:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccvLzxWr.s 			page 144


1725:bluetooth_rxtx.c **** 	// enable USB interrupts
1726:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6511              		.loc 1 1726 0
 6512 001e A24B     		ldr	r3, .L343+8
 6513 0020 4FF08072 		mov	r2, #16777216
 6514 0024 1A60     		str	r2, [r3]
1727:bluetooth_rxtx.c **** 
1728:bluetooth_rxtx.c **** 	RXLED_CLR;
 6515              		.loc 1 1728 0
 6516 0026 A14B     		ldr	r3, .L343+12
 6517 0028 1022     		movs	r2, #16
 6518 002a 1A60     		str	r2, [r3]
1729:bluetooth_rxtx.c **** 
1730:bluetooth_rxtx.c **** 	queue_init();
 6519              		.loc 1 1730 0
 6520 002c FFF7FEFF 		bl	queue_init
1731:bluetooth_rxtx.c **** 	dio_ssp_init();
 6521              		.loc 1 1731 0
 6522 0030 FFF7FEFF 		bl	dio_ssp_init
1732:bluetooth_rxtx.c **** 	dma_init();
 6523              		.loc 1 1732 0
 6524 0034 FFF7FEFF 		bl	dma_init
1733:bluetooth_rxtx.c **** 	dio_ssp_start();
 6525              		.loc 1 1733 0
 6526 0038 FFF7FEFF 		bl	dio_ssp_start
1734:bluetooth_rxtx.c **** 	cc2400_rx();
 6527              		.loc 1 1734 0
 6528 003c FFF7FEFF 		bl	cc2400_rx
1735:bluetooth_rxtx.c **** 
1736:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6529              		.loc 1 1736 0
 6530 0040 FFF7FEFF 		bl	cs_trigger_enable
1737:bluetooth_rxtx.c **** 
1738:bluetooth_rxtx.c **** 	hold = 0;
 6531              		.loc 1 1738 0
 6532 0044 0023     		movs	r3, #0
 6533 0046 FB77     		strb	r3, [r7, #31]
1739:bluetooth_rxtx.c **** 
1740:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6534              		.loc 1 1740 0
 6535 0048 15E1     		b	.L316
 6536              	.L342:
 6537              	.LBB4:
1741:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6538              		.loc 1 1741 0
 6539 004a 994B     		ldr	r3, .L343+16
 6540 004c 1B88     		ldrh	r3, [r3]	@ movhi
 6541 004e 9BB2     		uxth	r3, r3
 6542 0050 002B     		cmp	r3, #0
 6543 0052 24D0     		beq	.L317
1742:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6544              		.loc 1 1742 0
 6545 0054 6420     		movs	r0, #100
 6546 0056 FFF7FEFF 		bl	cc2400_strobe
1743:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6547              		.loc 1 1743 0
 6548 005a 00BF     		nop
ARM GAS  /tmp/ccvLzxWr.s 			page 145


 6549              	.L318:
 6550              		.loc 1 1743 0 is_stmt 0 discriminator 1
 6551 005c FFF7FEFF 		bl	cc2400_status
 6552 0060 0346     		mov	r3, r0
 6553 0062 03F00403 		and	r3, r3, #4
 6554 0066 002B     		cmp	r3, #0
 6555 0068 F8D1     		bne	.L318
1744:bluetooth_rxtx.c **** 
1745:bluetooth_rxtx.c **** 			/* Retune */
1746:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6556              		.loc 1 1746 0 is_stmt 1
 6557 006a 924B     		ldr	r3, .L343+20
 6558 006c 1B88     		ldrh	r3, [r3]	@ movhi
 6559 006e 9BB2     		uxth	r3, r3
 6560 0070 013B     		subs	r3, r3, #1
 6561 0072 9BB2     		uxth	r3, r3
 6562 0074 0220     		movs	r0, #2
 6563 0076 1946     		mov	r1, r3
 6564 0078 FFF7FEFF 		bl	cc2400_set
1747:bluetooth_rxtx.c **** 
1748:bluetooth_rxtx.c **** 			/* Wait for lock */
1749:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6565              		.loc 1 1749 0
 6566 007c 6120     		movs	r0, #97
 6567 007e FFF7FEFF 		bl	cc2400_strobe
1750:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6568              		.loc 1 1750 0
 6569 0082 00BF     		nop
 6570              	.L319:
 6571              		.loc 1 1750 0 is_stmt 0 discriminator 1
 6572 0084 FFF7FEFF 		bl	cc2400_status
 6573 0088 0346     		mov	r3, r0
 6574 008a 03F00403 		and	r3, r3, #4
 6575 008e 002B     		cmp	r3, #0
 6576 0090 F8D0     		beq	.L319
1751:bluetooth_rxtx.c **** 
1752:bluetooth_rxtx.c **** 			/* RX mode */
1753:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6577              		.loc 1 1753 0 is_stmt 1
 6578 0092 6220     		movs	r0, #98
 6579 0094 FFF7FEFF 		bl	cc2400_strobe
1754:bluetooth_rxtx.c **** 
1755:bluetooth_rxtx.c **** 			requested_channel = 0;
 6580              		.loc 1 1755 0
 6581 0098 854B     		ldr	r3, .L343+16
 6582 009a 0022     		movs	r2, #0
 6583 009c 1A80     		strh	r2, [r3]	@ movhi
 6584              	.L317:
1756:bluetooth_rxtx.c **** 		}
1757:bluetooth_rxtx.c **** 
1758:bluetooth_rxtx.c **** 		if (do_hop) {
 6585              		.loc 1 1758 0
 6586 009e 864B     		ldr	r3, .L343+24
 6587 00a0 1B78     		ldrb	r3, [r3]
 6588 00a2 DBB2     		uxtb	r3, r3
 6589 00a4 002B     		cmp	r3, #0
 6590 00a6 02D0     		beq	.L320
ARM GAS  /tmp/ccvLzxWr.s 			page 146


1759:bluetooth_rxtx.c **** 			hop();
 6591              		.loc 1 1759 0
 6592 00a8 FFF7FEFF 		bl	hop
 6593 00ac 03E0     		b	.L321
 6594              	.L320:
1760:bluetooth_rxtx.c **** 		} else {
1761:bluetooth_rxtx.c **** 			TXLED_CLR;
 6595              		.loc 1 1761 0
 6596 00ae 7F4B     		ldr	r3, .L343+12
 6597 00b0 4FF48072 		mov	r2, #256
 6598 00b4 1A60     		str	r2, [r3]
 6599              	.L321:
1762:bluetooth_rxtx.c **** 		}
1763:bluetooth_rxtx.c **** 
1764:bluetooth_rxtx.c **** 		RXLED_CLR;
 6600              		.loc 1 1764 0
 6601 00b6 7D4B     		ldr	r3, .L343+12
 6602 00b8 1022     		movs	r2, #16
 6603 00ba 1A60     		str	r2, [r3]
1765:bluetooth_rxtx.c **** 
1766:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1767:bluetooth_rxtx.c **** 		rssi_reset();
 6604              		.loc 1 1767 0
 6605 00bc FFF7FEFF 		bl	rssi_reset
1768:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6606              		.loc 1 1768 0
 6607 00c0 8023     		movs	r3, #128
 6608 00c2 BB74     		strb	r3, [r7, #18]
1769:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 6609              		.loc 1 1769 0
 6610 00c4 22E0     		b	.L322
 6611              	.L325:
1770:bluetooth_rxtx.c **** 		{
1771:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6612              		.loc 1 1771 0
 6613 00c6 0620     		movs	r0, #6
 6614 00c8 FFF7FEFF 		bl	cc2400_get
 6615 00cc 0346     		mov	r3, r0
 6616 00ce 1B0A     		lsrs	r3, r3, #8
 6617 00d0 9BB2     		uxth	r3, r3
 6618 00d2 FB74     		strb	r3, [r7, #19]
1772:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6619              		.loc 1 1772 0
 6620 00d4 794B     		ldr	r3, .L343+28
 6621 00d6 1B78     		ldrb	r3, [r3]
 6622 00d8 DBB2     		uxtb	r3, r3
 6623 00da 002B     		cmp	r3, #0
 6624 00dc 11D0     		beq	.L323
 6625              		.loc 1 1772 0 is_stmt 0 discriminator 1
 6626 00de 97F91230 		ldrsb	r3, [r7, #18]
 6627 00e2 13F1800F 		cmn	r3, #128
 6628 00e6 0CD1     		bne	.L323
1773:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6629              		.loc 1 1773 0 is_stmt 1
 6630 00e8 754B     		ldr	r3, .L343+32
 6631 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6632 00ec 5BB2     		sxtb	r3, r3
ARM GAS  /tmp/ccvLzxWr.s 			page 147


 6633 00ee 03F13602 		add	r2, r3, #54
 6634 00f2 97F91330 		ldrsb	r3, [r7, #19]
 6635 00f6 9342     		cmp	r3, r2
 6636 00f8 B8BF     		it	lt
 6637 00fa 1346     		movlt	r3, r2
 6638 00fc FB74     		strb	r3, [r7, #19]
1774:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6639              		.loc 1 1774 0
 6640 00fe FB7C     		ldrb	r3, [r7, #19]
 6641 0100 BB74     		strb	r3, [r7, #18]
 6642              	.L323:
1775:bluetooth_rxtx.c **** 			}
1776:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6643              		.loc 1 1776 0
 6644 0102 97F91330 		ldrsb	r3, [r7, #19]
 6645 0106 1846     		mov	r0, r3
 6646 0108 FFF7FEFF 		bl	rssi_add
 6647              	.L322:
1769:bluetooth_rxtx.c **** 		{
 6648              		.loc 1 1769 0
 6649 010c 6D4B     		ldr	r3, .L343+36
 6650 010e 1B68     		ldr	r3, [r3]
 6651 0110 002B     		cmp	r3, #0
 6652 0112 03D1     		bne	.L324
1769:bluetooth_rxtx.c **** 		{
 6653              		.loc 1 1769 0 is_stmt 0 discriminator 1
 6654 0114 6C4B     		ldr	r3, .L343+40
 6655 0116 1B68     		ldr	r3, [r3]
 6656 0118 002B     		cmp	r3, #0
 6657 011a D4D0     		beq	.L325
 6658              	.L324:
1777:bluetooth_rxtx.c **** 		}
1778:bluetooth_rxtx.c **** 
1779:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1780:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 6659              		.loc 1 1780 0 is_stmt 1
 6660 011c 694B     		ldr	r3, .L343+36
 6661 011e 1B68     		ldr	r3, [r3]
 6662 0120 03F00103 		and	r3, r3, #1
 6663 0124 002B     		cmp	r3, #0
 6664 0126 09D0     		beq	.L326
1781:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 6665              		.loc 1 1781 0
 6666 0128 684B     		ldr	r3, .L343+44
 6667 012a 1B68     		ldr	r3, [r3]
 6668 012c FB60     		str	r3, [r7, #12]
1782:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 6669              		.loc 1 1782 0
 6670 012e 684B     		ldr	r3, .L343+48
 6671 0130 1B68     		ldr	r3, [r3]
 6672 0132 664A     		ldr	r2, .L343+44
 6673 0134 1360     		str	r3, [r2]
1783:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 6674              		.loc 1 1783 0
 6675 0136 664A     		ldr	r2, .L343+48
 6676 0138 FB68     		ldr	r3, [r7, #12]
 6677 013a 1360     		str	r3, [r2]
ARM GAS  /tmp/ccvLzxWr.s 			page 148


 6678              	.L326:
1784:bluetooth_rxtx.c **** 		}
1785:bluetooth_rxtx.c **** 
1786:bluetooth_rxtx.c **** 		if (rx_err) {
 6679              		.loc 1 1786 0
 6680 013c 624B     		ldr	r3, .L343+40
 6681 013e 1B68     		ldr	r3, [r3]
 6682 0140 002B     		cmp	r3, #0
 6683 0142 07D0     		beq	.L327
1787:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6684              		.loc 1 1787 0
 6685 0144 634B     		ldr	r3, .L343+52
 6686 0146 1B78     		ldrb	r3, [r3]
 6687 0148 DBB2     		uxtb	r3, r3
 6688 014a 43F00203 		orr	r3, r3, #2
 6689 014e DAB2     		uxtb	r2, r3
 6690 0150 604B     		ldr	r3, .L343+52
 6691 0152 1A70     		strb	r2, [r3]
 6692              	.L327:
1788:bluetooth_rxtx.c **** 		}
1789:bluetooth_rxtx.c **** 
1790:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1791:bluetooth_rxtx.c **** 		if (!rx_tc)
 6693              		.loc 1 1791 0
 6694 0154 5B4B     		ldr	r3, .L343+36
 6695 0156 1B68     		ldr	r3, [r3]
 6696 0158 002B     		cmp	r3, #0
 6697 015a 00D1     		bne	.L328
1792:bluetooth_rxtx.c **** 			goto rx_continue;
 6698              		.loc 1 1792 0
 6699 015c 85E0     		b	.L329
 6700              	.L328:
1793:bluetooth_rxtx.c **** 
1794:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1795:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6701              		.loc 1 1795 0
 6702 015e 594B     		ldr	r3, .L343+36
 6703 0160 1B68     		ldr	r3, [r3]
 6704 0162 012B     		cmp	r3, #1
 6705 0164 07D9     		bls	.L330
1796:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6706              		.loc 1 1796 0
 6707 0166 5B4B     		ldr	r3, .L343+52
 6708 0168 1B78     		ldrb	r3, [r3]
 6709 016a DBB2     		uxtb	r3, r3
 6710 016c 43F00103 		orr	r3, r3, #1
 6711 0170 DAB2     		uxtb	r2, r3
 6712 0172 584B     		ldr	r3, .L343+52
 6713 0174 1A70     		strb	r2, [r3]
 6714              	.L330:
1797:bluetooth_rxtx.c **** 
1798:bluetooth_rxtx.c **** 		rssi_iir_update();
 6715              		.loc 1 1798 0
 6716 0176 FFF7FEFF 		bl	rssi_iir_update
1799:bluetooth_rxtx.c **** 
1800:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1801:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
ARM GAS  /tmp/ccvLzxWr.s 			page 149


1802:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1803:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1804:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6717              		.loc 1 1804 0
 6718 017a 504B     		ldr	r3, .L343+28
 6719 017c 1B78     		ldrb	r3, [r3]
 6720 017e DBB2     		uxtb	r3, r3
 6721 0180 002B     		cmp	r3, #0
 6722 0182 03D1     		bne	.L331
 6723              		.loc 1 1804 0 is_stmt 0 discriminator 1
 6724 0184 544B     		ldr	r3, .L343+56
 6725 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6726 0188 002B     		cmp	r3, #0
 6727 018a 0CD0     		beq	.L332
 6728              	.L331:
1805:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6729              		.loc 1 1805 0 is_stmt 1
 6730 018c 514B     		ldr	r3, .L343+52
 6731 018e 1B78     		ldrb	r3, [r3]
 6732 0190 DBB2     		uxtb	r3, r3
 6733 0192 43F00803 		orr	r3, r3, #8
 6734 0196 DAB2     		uxtb	r2, r3
 6735 0198 4E4B     		ldr	r3, .L343+52
 6736 019a 1A70     		strb	r2, [r3]
1806:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6737              		.loc 1 1806 0
 6738 019c 0223     		movs	r3, #2
 6739 019e FB77     		strb	r3, [r7, #31]
1807:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6740              		.loc 1 1807 0
 6741 01a0 464B     		ldr	r3, .L343+28
 6742 01a2 0022     		movs	r2, #0
 6743 01a4 1A70     		strb	r2, [r3]
 6744              	.L332:
1808:bluetooth_rxtx.c **** 		}
1809:bluetooth_rxtx.c **** 
1810:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6745              		.loc 1 1810 0
 6746 01a6 4D4B     		ldr	r3, .L343+60
 6747 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6748 01aa 5AB2     		sxtb	r2, r3
 6749 01ac 444B     		ldr	r3, .L343+32
 6750 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6751 01b0 5BB2     		sxtb	r3, r3
 6752 01b2 3633     		adds	r3, r3, #54
 6753 01b4 9A42     		cmp	r2, r3
 6754 01b6 09DB     		blt	.L333
1811:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6755              		.loc 1 1811 0
 6756 01b8 464B     		ldr	r3, .L343+52
 6757 01ba 1B78     		ldrb	r3, [r3]
 6758 01bc DBB2     		uxtb	r3, r3
 6759 01be 43F01003 		orr	r3, r3, #16
 6760 01c2 DAB2     		uxtb	r2, r3
 6761 01c4 434B     		ldr	r3, .L343+52
 6762 01c6 1A70     		strb	r2, [r3]
1812:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
ARM GAS  /tmp/ccvLzxWr.s 			page 150


 6763              		.loc 1 1812 0
 6764 01c8 0223     		movs	r3, #2
 6765 01ca FB77     		strb	r3, [r7, #31]
 6766              	.L333:
1813:bluetooth_rxtx.c **** 		}
1814:bluetooth_rxtx.c **** 
1815:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1816:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1817:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 6767              		.loc 1 1817 0
 6768 01cc 444B     		ldr	r3, .L343+64
 6769 01ce 1B78     		ldrb	r3, [r3]
 6770 01d0 DBB2     		uxtb	r3, r3
 6771 01d2 002B     		cmp	r3, #0
 6772 01d4 07D0     		beq	.L334
1818:bluetooth_rxtx.c **** 			if (hold == 0)
 6773              		.loc 1 1818 0
 6774 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6775 01d8 002B     		cmp	r3, #0
 6776 01da 01D1     		bne	.L335
1819:bluetooth_rxtx.c **** 				hold = 1;
 6777              		.loc 1 1819 0
 6778 01dc 0123     		movs	r3, #1
 6779 01de FB77     		strb	r3, [r7, #31]
 6780              	.L335:
1820:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 6781              		.loc 1 1820 0
 6782 01e0 3F4B     		ldr	r3, .L343+64
 6783 01e2 0022     		movs	r2, #0
 6784 01e4 1A70     		strb	r2, [r3]
 6785              	.L334:
1821:bluetooth_rxtx.c **** 		}
1822:bluetooth_rxtx.c **** 
1823:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1824:bluetooth_rxtx.c **** 		if (hold == 0) {
 6786              		.loc 1 1824 0
 6787 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6788 01e8 002B     		cmp	r3, #0
 6789 01ea 00D1     		bne	.L336
1825:bluetooth_rxtx.c **** 			goto rx_continue;
 6790              		.loc 1 1825 0
 6791 01ec 3DE0     		b	.L329
 6792              	.L336:
1826:bluetooth_rxtx.c **** 		}
1827:bluetooth_rxtx.c **** 		hold--;
 6793              		.loc 1 1827 0
 6794 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6795 01f0 013B     		subs	r3, r3, #1
 6796 01f2 FB77     		strb	r3, [r7, #31]
1828:bluetooth_rxtx.c **** 
1829:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1830:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 6797              		.loc 1 1830 0
 6798 01f4 3B48     		ldr	r0, .L343+68
 6799 01f6 3C49     		ldr	r1, .L343+72
 6800 01f8 4FF4C872 		mov	r2, #400
 6801 01fc FFF7FEFF 		bl	memcpy
ARM GAS  /tmp/ccvLzxWr.s 			page 151


1831:bluetooth_rxtx.c **** 
1832:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1833:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 6802              		.loc 1 1833 0
 6803 0200 0023     		movs	r3, #0
 6804 0202 BB61     		str	r3, [r7, #24]
 6805 0204 25E0     		b	.L337
 6806              	.L340:
1834:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1835:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 6807              		.loc 1 1835 0
 6808 0206 0023     		movs	r3, #0
 6809 0208 7B61     		str	r3, [r7, #20]
 6810 020a 1CE0     		b	.L338
 6811              	.L339:
1836:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6812              		.loc 1 1836 0 discriminator 3
 6813 020c BB69     		ldr	r3, [r7, #24]
 6814 020e 3233     		adds	r3, r3, #50
 6815 0210 DA00     		lsls	r2, r3, #3
 6816 0212 7B69     		ldr	r3, [r7, #20]
 6817 0214 1344     		add	r3, r3, r2
 6818 0216 2E4A     		ldr	r2, .L343+48
 6819 0218 1168     		ldr	r1, [r2]
 6820 021a BA69     		ldr	r2, [r7, #24]
 6821 021c 0A44     		add	r2, r2, r1
 6822 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6823 0220 D209     		lsrs	r2, r2, #7
 6824 0222 D1B2     		uxtb	r1, r2
 6825 0224 2F4A     		ldr	r2, .L343+68
 6826 0226 D154     		strb	r1, [r2, r3]
1837:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6827              		.loc 1 1837 0 discriminator 3
 6828 0228 294B     		ldr	r3, .L343+48
 6829 022a 1A68     		ldr	r2, [r3]
 6830 022c BB69     		ldr	r3, [r7, #24]
 6831 022e 1344     		add	r3, r3, r2
 6832 0230 274A     		ldr	r2, .L343+48
 6833 0232 1168     		ldr	r1, [r2]
 6834 0234 BA69     		ldr	r2, [r7, #24]
 6835 0236 0A44     		add	r2, r2, r1
 6836 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6837 023a 5200     		lsls	r2, r2, #1
 6838 023c D2B2     		uxtb	r2, r2
 6839 023e 1A70     		strb	r2, [r3]
1835:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6840              		.loc 1 1835 0 discriminator 3
 6841 0240 7B69     		ldr	r3, [r7, #20]
 6842 0242 0133     		adds	r3, r3, #1
 6843 0244 7B61     		str	r3, [r7, #20]
 6844              	.L338:
1835:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6845              		.loc 1 1835 0 is_stmt 0 discriminator 1
 6846 0246 7B69     		ldr	r3, [r7, #20]
 6847 0248 072B     		cmp	r3, #7
 6848 024a DFDD     		ble	.L339
1833:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
ARM GAS  /tmp/ccvLzxWr.s 			page 152


 6849              		.loc 1 1833 0 is_stmt 1 discriminator 2
 6850 024c BB69     		ldr	r3, [r7, #24]
 6851 024e 0133     		adds	r3, r3, #1
 6852 0250 BB61     		str	r3, [r7, #24]
 6853              	.L337:
1833:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6854              		.loc 1 1833 0 is_stmt 0 discriminator 1
 6855 0252 BB69     		ldr	r3, [r7, #24]
 6856 0254 312B     		cmp	r3, #49
 6857 0256 D6DD     		ble	.L340
1838:bluetooth_rxtx.c **** 			}
1839:bluetooth_rxtx.c **** 		}
1840:bluetooth_rxtx.c **** 
1841:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 6858              		.loc 1 1841 0 is_stmt 1
 6859 0258 244B     		ldr	r3, .L343+76
 6860 025a 1B68     		ldr	r3, [r3]
 6861 025c 2148     		ldr	r0, .L343+68
 6862 025e 9847     		blx	r3
 6863 0260 B860     		str	r0, [r7, #8]
1842:bluetooth_rxtx.c **** 		if (!ret) break;
 6864              		.loc 1 1842 0
 6865 0262 BB68     		ldr	r3, [r7, #8]
 6866 0264 002B     		cmp	r3, #0
 6867 0266 00D1     		bne	.L329
 6868 0268 0CE0     		b	.L341
 6869              	.L329:
1843:bluetooth_rxtx.c **** 
1844:bluetooth_rxtx.c **** 	rx_continue:
1845:bluetooth_rxtx.c **** 		rx_tc = 0;
 6870              		.loc 1 1845 0
 6871 026a 164B     		ldr	r3, .L343+36
 6872 026c 0022     		movs	r2, #0
 6873 026e 1A60     		str	r2, [r3]
1846:bluetooth_rxtx.c **** 		rx_err = 0;
 6874              		.loc 1 1846 0
 6875 0270 154B     		ldr	r3, .L343+40
 6876 0272 0022     		movs	r2, #0
 6877 0274 1A60     		str	r2, [r3]
 6878              	.L316:
 6879              	.LBE4:
1740:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6880              		.loc 1 1740 0
 6881 0276 1E4B     		ldr	r3, .L343+80
 6882 0278 1B78     		ldrb	r3, [r3]
 6883 027a DBB2     		uxtb	r3, r3
 6884 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6885 027e 9A42     		cmp	r2, r3
 6886 0280 3FF4E3AE 		beq	.L342
 6887              	.L341:
1847:bluetooth_rxtx.c **** 	}
1848:bluetooth_rxtx.c **** 
1849:bluetooth_rxtx.c **** 	// disable USB interrupts
1850:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 6888              		.loc 1 1850 0
 6889 0284 1B4B     		ldr	r3, .L343+84
 6890 0286 4FF08072 		mov	r2, #16777216
ARM GAS  /tmp/ccvLzxWr.s 			page 153


 6891 028a 1A60     		str	r2, [r3]
1851:bluetooth_rxtx.c **** 
1852:bluetooth_rxtx.c **** 	// reset the radio completely
1853:bluetooth_rxtx.c **** 	cc2400_idle();
 6892              		.loc 1 1853 0
 6893 028c FFF7FEFF 		bl	cc2400_idle
1854:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6894              		.loc 1 1854 0
 6895 0290 FFF7FEFF 		bl	dio_ssp_stop
1855:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6896              		.loc 1 1855 0
 6897 0294 FFF7FEFF 		bl	cs_trigger_disable
1856:bluetooth_rxtx.c **** }
 6898              		.loc 1 1856 0
 6899 0298 2037     		adds	r7, r7, #32
 6900              		.cfi_def_cfa_offset 8
 6901 029a BD46     		mov	sp, r7
 6902              		.cfi_def_cfa_register 13
 6903              		@ sp needed
 6904 029c 80BD     		pop	{r7, pc}
 6905              	.L344:
 6906 029e 00BF     		.align	2
 6907              	.L343:
 6908 02a0 00000000 		.word	modulation
 6909 02a4 00000000 		.word	mode
 6910 02a8 00E100E0 		.word	-536813312
 6911 02ac 3CC00920 		.word	537509948
 6912 02b0 00000000 		.word	requested_channel
 6913 02b4 00000000 		.word	channel
 6914 02b8 00000000 		.word	do_hop
 6915 02bc 00000000 		.word	cs_trigger
 6916 02c0 00000000 		.word	cs_threshold_cur
 6917 02c4 00000000 		.word	rx_tc
 6918 02c8 00000000 		.word	rx_err
 6919 02cc 00000000 		.word	active_rxbuf
 6920 02d0 00000000 		.word	idle_rxbuf
 6921 02d4 00000000 		.word	status
 6922 02d8 00000000 		.word	cs_no_squelch
 6923 02dc 00000000 		.word	rssi_max
 6924 02e0 00000000 		.word	keepalive_trigger
 6925 02e4 00000000 		.word	unpacked
 6926 02e8 90010000 		.word	unpacked+400
 6927 02ec 00000000 		.word	data_cb
 6928 02f0 00000000 		.word	requested_mode
 6929 02f4 80E100E0 		.word	-536813184
 6930              		.cfi_endproc
 6931              	.LFE34:
 6933              		.section	.text.bt_le_sync,"ax",%progbits
 6934              		.align	2
 6935              		.global	bt_le_sync
 6936              		.thumb
 6937              		.thumb_func
 6939              	bt_le_sync:
 6940              	.LFB35:
1857:bluetooth_rxtx.c **** 
1858:bluetooth_rxtx.c **** 
1859:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
ARM GAS  /tmp/ccvLzxWr.s 			page 154


1860:bluetooth_rxtx.c **** {
 6941              		.loc 1 1860 0
 6942              		.cfi_startproc
 6943              		@ args = 0, pretend = 0, frame = 104
 6944              		@ frame_needed = 1, uses_anonymous_args = 0
 6945 0000 90B5     		push	{r4, r7, lr}
 6946              		.cfi_def_cfa_offset 12
 6947              		.cfi_offset 4, -12
 6948              		.cfi_offset 7, -8
 6949              		.cfi_offset 14, -4
 6950 0002 9BB0     		sub	sp, sp, #108
 6951              		.cfi_def_cfa_offset 120
 6952 0004 00AF     		add	r7, sp, #0
 6953              		.cfi_def_cfa_register 7
 6954 0006 0346     		mov	r3, r0
 6955 0008 FB71     		strb	r3, [r7, #7]
1861:bluetooth_rxtx.c **** 	int i;
1862:bluetooth_rxtx.c **** 	int8_t rssi;
1863:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1864:bluetooth_rxtx.c **** 
1865:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6956              		.loc 1 1865 0
 6957 000a 874B     		ldr	r3, .L391
 6958 000c 0122     		movs	r2, #1
 6959 000e 1A70     		strb	r2, [r3]
1866:bluetooth_rxtx.c **** 	mode = active_mode;
 6960              		.loc 1 1866 0
 6961 0010 864A     		ldr	r2, .L391+4
 6962 0012 FB79     		ldrb	r3, [r7, #7]
 6963 0014 1370     		strb	r3, [r2]
1867:bluetooth_rxtx.c **** 
1868:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 6964              		.loc 1 1868 0
 6965 0016 864B     		ldr	r3, .L391+8
 6966 0018 0122     		movs	r2, #1
 6967 001a 1A75     		strb	r2, [r3, #20]
1869:bluetooth_rxtx.c **** 
1870:bluetooth_rxtx.c **** 	// enable USB interrupts
1871:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6968              		.loc 1 1871 0
 6969 001c 854B     		ldr	r3, .L391+12
 6970 001e 4FF08072 		mov	r2, #16777216
 6971 0022 1A60     		str	r2, [r3]
1872:bluetooth_rxtx.c **** 
1873:bluetooth_rxtx.c **** 	RXLED_CLR;
 6972              		.loc 1 1873 0
 6973 0024 844B     		ldr	r3, .L391+16
 6974 0026 1022     		movs	r2, #16
 6975 0028 1A60     		str	r2, [r3]
1874:bluetooth_rxtx.c **** 
1875:bluetooth_rxtx.c **** 	queue_init();
 6976              		.loc 1 1875 0
 6977 002a FFF7FEFF 		bl	queue_init
1876:bluetooth_rxtx.c **** 	dio_ssp_init();
 6978              		.loc 1 1876 0
 6979 002e FFF7FEFF 		bl	dio_ssp_init
1877:bluetooth_rxtx.c **** 	dma_init_le();
ARM GAS  /tmp/ccvLzxWr.s 			page 155


 6980              		.loc 1 1877 0
 6981 0032 FFF7FEFF 		bl	dma_init_le
1878:bluetooth_rxtx.c **** 	dio_ssp_start();
 6982              		.loc 1 1878 0
 6983 0036 FFF7FEFF 		bl	dio_ssp_start
1879:bluetooth_rxtx.c **** 
1880:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 6984              		.loc 1 1880 0
 6985 003a 7D4B     		ldr	r3, .L391+8
 6986 003c 1B68     		ldr	r3, [r3]
 6987 003e 1846     		mov	r0, r3
 6988 0040 FFF7FEFF 		bl	rbit
 6989 0044 0346     		mov	r3, r0
 6990 0046 1846     		mov	r0, r3
 6991 0048 FFF7FEFF 		bl	cc2400_rx_sync
1881:bluetooth_rxtx.c **** 
1882:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6992              		.loc 1 1882 0
 6993 004c 47E2     		b	.L346
 6994              	.L390:
 6995              	.LBB5:
1883:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6996              		.loc 1 1883 0
 6997 004e 7B4B     		ldr	r3, .L391+20
 6998 0050 1B88     		ldrh	r3, [r3]	@ movhi
 6999 0052 9BB2     		uxth	r3, r3
 7000 0054 002B     		cmp	r3, #0
 7001 0056 29D0     		beq	.L347
1884:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7002              		.loc 1 1884 0
 7003 0058 6420     		movs	r0, #100
 7004 005a FFF7FEFF 		bl	cc2400_strobe
1885:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 7005              		.loc 1 1885 0
 7006 005e 00BF     		nop
 7007              	.L348:
 7008              		.loc 1 1885 0 is_stmt 0 discriminator 1
 7009 0060 FFF7FEFF 		bl	cc2400_status
 7010 0064 0346     		mov	r3, r0
 7011 0066 03F00403 		and	r3, r3, #4
 7012 006a 002B     		cmp	r3, #0
 7013 006c F8D1     		bne	.L348
1886:bluetooth_rxtx.c **** 
1887:bluetooth_rxtx.c **** 			/* Retune */
1888:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 7014              		.loc 1 1888 0 is_stmt 1
 7015 006e 744B     		ldr	r3, .L391+24
 7016 0070 1B88     		ldrh	r3, [r3]	@ movhi
 7017 0072 9BB2     		uxth	r3, r3
 7018 0074 013B     		subs	r3, r3, #1
 7019 0076 9BB2     		uxth	r3, r3
 7020 0078 0220     		movs	r0, #2
 7021 007a 1946     		mov	r1, r3
 7022 007c FFF7FEFF 		bl	cc2400_set
1889:bluetooth_rxtx.c **** 
1890:bluetooth_rxtx.c **** 			/* Wait for lock */
1891:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
ARM GAS  /tmp/ccvLzxWr.s 			page 156


 7023              		.loc 1 1891 0
 7024 0080 6120     		movs	r0, #97
 7025 0082 FFF7FEFF 		bl	cc2400_strobe
1892:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 7026              		.loc 1 1892 0
 7027 0086 00BF     		nop
 7028              	.L349:
 7029              		.loc 1 1892 0 is_stmt 0 discriminator 1
 7030 0088 FFF7FEFF 		bl	cc2400_status
 7031 008c 0346     		mov	r3, r0
 7032 008e 03F00403 		and	r3, r3, #4
 7033 0092 002B     		cmp	r3, #0
 7034 0094 F8D0     		beq	.L349
1893:bluetooth_rxtx.c **** 
1894:bluetooth_rxtx.c **** 			/* RX mode */
1895:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 7035              		.loc 1 1895 0 is_stmt 1
 7036 0096 6220     		movs	r0, #98
 7037 0098 FFF7FEFF 		bl	cc2400_strobe
1896:bluetooth_rxtx.c **** 
1897:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 7038              		.loc 1 1897 0
 7039 009c 674B     		ldr	r3, .L391+20
 7040 009e 1B88     		ldrh	r3, [r3]	@ movhi
 7041 00a0 9AB2     		uxth	r2, r3
 7042 00a2 684B     		ldr	r3, .L391+28
 7043 00a4 1A80     		strh	r2, [r3]	@ movhi
1898:bluetooth_rxtx.c **** 			requested_channel = 0;
 7044              		.loc 1 1898 0
 7045 00a6 654B     		ldr	r3, .L391+20
 7046 00a8 0022     		movs	r2, #0
 7047 00aa 1A80     		strh	r2, [r3]	@ movhi
 7048              	.L347:
1899:bluetooth_rxtx.c **** 		}
1900:bluetooth_rxtx.c **** 
1901:bluetooth_rxtx.c **** 		RXLED_CLR;
 7049              		.loc 1 1901 0
 7050 00ac 624B     		ldr	r3, .L391+16
 7051 00ae 1022     		movs	r2, #16
 7052 00b0 1A60     		str	r2, [r3]
1902:bluetooth_rxtx.c **** 
1903:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1904:bluetooth_rxtx.c **** 		rssi_reset();
 7053              		.loc 1 1904 0
 7054 00b2 FFF7FEFF 		bl	rssi_reset
1905:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 7055              		.loc 1 1905 0
 7056 00b6 00BF     		nop
 7057              	.L351:
 7058              		.loc 1 1905 0 is_stmt 0 discriminator 4
 7059 00b8 634B     		ldr	r3, .L391+32
 7060 00ba 1B68     		ldr	r3, [r3]
 7061 00bc 002B     		cmp	r3, #0
 7062 00be 0ED1     		bne	.L350
 7063              		.loc 1 1905 0 discriminator 1
 7064 00c0 624B     		ldr	r3, .L391+36
 7065 00c2 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 157


 7066 00c4 002B     		cmp	r3, #0
 7067 00c6 0AD1     		bne	.L350
 7068              		.loc 1 1905 0 discriminator 2
 7069 00c8 614B     		ldr	r3, .L391+40
 7070 00ca 1B78     		ldrb	r3, [r3]
 7071 00cc DBB2     		uxtb	r3, r3
 7072 00ce 002B     		cmp	r3, #0
 7073 00d0 05D1     		bne	.L350
 7074              		.loc 1 1905 0 discriminator 3
 7075 00d2 604B     		ldr	r3, .L391+44
 7076 00d4 1B78     		ldrb	r3, [r3]
 7077 00d6 DBB2     		uxtb	r3, r3
 7078 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7079 00da 9A42     		cmp	r2, r3
 7080 00dc ECD0     		beq	.L351
 7081              	.L350:
1906:bluetooth_rxtx.c **** 			;
1907:bluetooth_rxtx.c **** 
1908:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 7082              		.loc 1 1908 0 is_stmt 1
 7083 00de 5D4B     		ldr	r3, .L391+44
 7084 00e0 1B78     		ldrb	r3, [r3]
 7085 00e2 DBB2     		uxtb	r3, r3
 7086 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7087 00e6 9A42     		cmp	r2, r3
 7088 00e8 00D0     		beq	.L352
1909:bluetooth_rxtx.c **** 			goto cleanup;
 7089              		.loc 1 1909 0
 7090 00ea FFE1     		b	.L389
 7091              	.L352:
1910:bluetooth_rxtx.c **** 		}
1911:bluetooth_rxtx.c **** 
1912:bluetooth_rxtx.c **** 		if (rx_err) {
 7092              		.loc 1 1912 0
 7093 00ec 574B     		ldr	r3, .L391+36
 7094 00ee 1B68     		ldr	r3, [r3]
 7095 00f0 002B     		cmp	r3, #0
 7096 00f2 07D0     		beq	.L354
1913:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 7097              		.loc 1 1913 0
 7098 00f4 584B     		ldr	r3, .L391+48
 7099 00f6 1B78     		ldrb	r3, [r3]
 7100 00f8 DBB2     		uxtb	r3, r3
 7101 00fa 43F00203 		orr	r3, r3, #2
 7102 00fe DAB2     		uxtb	r2, r3
 7103 0100 554B     		ldr	r3, .L391+48
 7104 0102 1A70     		strb	r2, [r3]
 7105              	.L354:
1914:bluetooth_rxtx.c **** 		}
1915:bluetooth_rxtx.c **** 
1916:bluetooth_rxtx.c **** 		if (do_hop)
 7106              		.loc 1 1916 0
 7107 0104 524B     		ldr	r3, .L391+40
 7108 0106 1B78     		ldrb	r3, [r3]
 7109 0108 DBB2     		uxtb	r3, r3
 7110 010a 002B     		cmp	r3, #0
 7111 010c 00D0     		beq	.L355
ARM GAS  /tmp/ccvLzxWr.s 			page 158


1917:bluetooth_rxtx.c **** 			goto rx_flush;
 7112              		.loc 1 1917 0
 7113 010e 2BE1     		b	.L356
 7114              	.L355:
1918:bluetooth_rxtx.c **** 
1919:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1920:bluetooth_rxtx.c **** 		if (!rx_tc)
 7115              		.loc 1 1920 0
 7116 0110 4D4B     		ldr	r3, .L391+32
 7117 0112 1B68     		ldr	r3, [r3]
 7118 0114 002B     		cmp	r3, #0
 7119 0116 00D1     		bne	.L357
 7120 0118 E1E1     		b	.L346
 7121              	.L357:
1921:bluetooth_rxtx.c **** 			continue;
1922:bluetooth_rxtx.c **** 
1923:bluetooth_rxtx.c **** 		/////////////////////
1924:bluetooth_rxtx.c **** 		// process the packet
1925:bluetooth_rxtx.c **** 
1926:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1927:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7122              		.loc 1 1927 0
 7123 011a 07F10803 		add	r3, r7, #8
 7124 011e FB65     		str	r3, [r7, #92]
1928:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7125              		.loc 1 1928 0
 7126 0120 434B     		ldr	r3, .L391+8
 7127 0122 1B68     		ldr	r3, [r3]
 7128 0124 BB60     		str	r3, [r7, #8]
1929:bluetooth_rxtx.c **** 
1930:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7129              		.loc 1 1930 0
 7130 0126 464B     		ldr	r3, .L391+24
 7131 0128 1B88     		ldrh	r3, [r3]	@ movhi
 7132 012a 9BB2     		uxth	r3, r3
 7133 012c DBB2     		uxtb	r3, r3
 7134 012e 623B     		subs	r3, r3, #98
 7135 0130 DBB2     		uxtb	r3, r3
 7136 0132 1846     		mov	r0, r3
 7137 0134 FFF7FEFF 		bl	btle_channel_index
 7138 0138 0346     		mov	r3, r0
 7139 013a 1A46     		mov	r2, r3
 7140 013c 1346     		mov	r3, r2
 7141 013e 5B00     		lsls	r3, r3, #1
 7142 0140 1344     		add	r3, r3, r2
 7143 0142 1B01     		lsls	r3, r3, #4
 7144 0144 454A     		ldr	r2, .L391+52
 7145 0146 1344     		add	r3, r3, r2
 7146 0148 BB65     		str	r3, [r7, #88]
1931:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 7147              		.loc 1 1931 0
 7148 014a 0023     		movs	r3, #0
 7149 014c 7B66     		str	r3, [r7, #100]
 7150 014e 34E0     		b	.L358
 7151              	.L361:
 7152              	.LBB6:
1932:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
ARM GAS  /tmp/ccvLzxWr.s 			page 159


 7153              		.loc 1 1932 0 discriminator 3
 7154 0150 434A     		ldr	r2, .L391+56
 7155 0152 7B6E     		ldr	r3, [r7, #100]
 7156 0154 1344     		add	r3, r3, r2
 7157 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7158 0158 1A06     		lsls	r2, r3, #24
1933:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7159              		.loc 1 1933 0 discriminator 3
 7160 015a 7B6E     		ldr	r3, [r7, #100]
 7161 015c 0133     		adds	r3, r3, #1
 7162 015e 4049     		ldr	r1, .L391+56
 7163 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7164 0162 1B04     		lsls	r3, r3, #16
 7165 0164 1A43     		orrs	r2, r2, r3
1934:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 7166              		.loc 1 1934 0 discriminator 3
 7167 0166 7B6E     		ldr	r3, [r7, #100]
 7168 0168 0233     		adds	r3, r3, #2
 7169 016a 3D49     		ldr	r1, .L391+56
 7170 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7171 016e 1B02     		lsls	r3, r3, #8
 7172 0170 1343     		orrs	r3, r3, r2
1935:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7173              		.loc 1 1935 0 discriminator 3
 7174 0172 7A6E     		ldr	r2, [r7, #100]
 7175 0174 0332     		adds	r2, r2, #3
 7176 0176 3A49     		ldr	r1, .L391+56
 7177 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7178 017a 1343     		orrs	r3, r3, r2
1932:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7179              		.loc 1 1932 0 discriminator 3
 7180 017c 7B65     		str	r3, [r7, #84]
1936:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7181              		.loc 1 1936 0 discriminator 3
 7182 017e 7B6E     		ldr	r3, [r7, #100]
 7183 0180 002B     		cmp	r3, #0
 7184 0182 00DA     		bge	.L359
 7185 0184 0333     		adds	r3, r3, #3
 7186              	.L359:
 7187 0186 9B10     		asrs	r3, r3, #2
 7188 0188 5C1C     		adds	r4, r3, #1
 7189 018a 786D     		ldr	r0, [r7, #84]
 7190 018c FFF7FEFF 		bl	rbit
 7191 0190 0146     		mov	r1, r0
 7192 0192 7B6E     		ldr	r3, [r7, #100]
 7193 0194 002B     		cmp	r3, #0
 7194 0196 00DA     		bge	.L360
 7195 0198 0333     		adds	r3, r3, #3
 7196              	.L360:
 7197 019a 9B10     		asrs	r3, r3, #2
 7198 019c 9B00     		lsls	r3, r3, #2
 7199 019e BA6D     		ldr	r2, [r7, #88]
 7200 01a0 1344     		add	r3, r3, r2
 7201 01a2 1B68     		ldr	r3, [r3]
 7202 01a4 81EA0302 		eor	r2, r1, r3
 7203 01a8 A300     		lsls	r3, r4, #2
 7204 01aa 07F16801 		add	r1, r7, #104
ARM GAS  /tmp/ccvLzxWr.s 			page 160


 7205 01ae 0B44     		add	r3, r3, r1
 7206 01b0 43F8602C 		str	r2, [r3, #-96]
 7207              	.LBE6:
1931:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7208              		.loc 1 1931 0 discriminator 3
 7209 01b4 7B6E     		ldr	r3, [r7, #100]
 7210 01b6 0433     		adds	r3, r3, #4
 7211 01b8 7B66     		str	r3, [r7, #100]
 7212              	.L358:
1931:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7213              		.loc 1 1931 0 is_stmt 0 discriminator 1
 7214 01ba 7B6E     		ldr	r3, [r7, #100]
 7215 01bc 032B     		cmp	r3, #3
 7216 01be C7DD     		ble	.L361
1937:bluetooth_rxtx.c **** 		}
1938:bluetooth_rxtx.c **** 
1939:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7217              		.loc 1 1939 0 is_stmt 1
 7218 01c0 FB6D     		ldr	r3, [r7, #92]
 7219 01c2 0533     		adds	r3, r3, #5
 7220 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7221 01c6 03F03F03 		and	r3, r3, #63
 7222 01ca 0233     		adds	r3, r3, #2
 7223 01cc 3B65     		str	r3, [r7, #80]
1940:bluetooth_rxtx.c **** 		if (len > 39)
 7224              		.loc 1 1940 0
 7225 01ce 3B6D     		ldr	r3, [r7, #80]
 7226 01d0 272B     		cmp	r3, #39
 7227 01d2 00D9     		bls	.L362
1941:bluetooth_rxtx.c **** 			goto rx_flush;
 7228              		.loc 1 1941 0
 7229 01d4 C8E0     		b	.L356
 7230              	.L362:
1942:bluetooth_rxtx.c **** 
1943:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1944:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1945:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 7231              		.loc 1 1945 0
 7232 01d6 3B6D     		ldr	r3, [r7, #80]
 7233 01d8 0633     		adds	r3, r3, #6
 7234 01da 9B08     		lsrs	r3, r3, #2
 7235 01dc FB64     		str	r3, [r7, #76]
1946:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 7236              		.loc 1 1946 0
 7237 01de FB6C     		ldr	r3, [r7, #76]
 7238 01e0 0A2B     		cmp	r3, #10
 7239 01e2 0DD8     		bhi	.L363
1947:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 7240              		.loc 1 1947 0
 7241 01e4 00BF     		nop
 7242              	.L365:
 7243              		.loc 1 1947 0 is_stmt 0 discriminator 2
 7244 01e6 1F4B     		ldr	r3, .L391+60
 7245 01e8 1A68     		ldr	r2, [r3]
 7246 01ea FB6C     		ldr	r3, [r7, #76]
 7247 01ec 9B00     		lsls	r3, r3, #2
 7248 01ee 1C49     		ldr	r1, .L391+56
ARM GAS  /tmp/ccvLzxWr.s 			page 161


 7249 01f0 0B44     		add	r3, r3, r1
 7250 01f2 9A42     		cmp	r2, r3
 7251 01f4 0FD2     		bcs	.L364
 7252              		.loc 1 1947 0 discriminator 1
 7253 01f6 154B     		ldr	r3, .L391+36
 7254 01f8 1B68     		ldr	r3, [r3]
 7255 01fa 002B     		cmp	r3, #0
 7256 01fc F3D0     		beq	.L365
 7257 01fe 0AE0     		b	.L364
 7258              	.L363:
1948:bluetooth_rxtx.c **** 				;
1949:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1950:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 7259              		.loc 1 1950 0 is_stmt 1
 7260 0200 00BF     		nop
 7261              	.L366:
 7262              		.loc 1 1950 0 is_stmt 0 discriminator 2
 7263 0202 194B     		ldr	r3, .L391+64
 7264 0204 1B68     		ldr	r3, [r3]
 7265 0206 03F00103 		and	r3, r3, #1
 7266 020a 002B     		cmp	r3, #0
 7267 020c 03D0     		beq	.L364
 7268              		.loc 1 1950 0 discriminator 1
 7269 020e 0F4B     		ldr	r3, .L391+36
 7270 0210 1B68     		ldr	r3, [r3]
 7271 0212 002B     		cmp	r3, #0
 7272 0214 F5D0     		beq	.L366
 7273              	.L364:
1951:bluetooth_rxtx.c **** 				;
1952:bluetooth_rxtx.c **** 		}
1953:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7274              		.loc 1 1953 0 is_stmt 1
 7275 0216 154A     		ldr	r2, .L391+68
 7276 0218 144B     		ldr	r3, .L391+68
 7277 021a 1B68     		ldr	r3, [r3]
 7278 021c 23F00103 		bic	r3, r3, #1
 7279 0220 1360     		str	r3, [r2]
1954:bluetooth_rxtx.c **** 
1955:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1956:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 7280              		.loc 1 1956 0
 7281 0222 0423     		movs	r3, #4
 7282 0224 7B66     		str	r3, [r7, #100]
 7283 0226 58E0     		b	.L367
 7284              	.L392:
 7285              		.align	2
 7286              	.L391:
 7287 0228 00000000 		.word	modulation
 7288 022c 00000000 		.word	mode
 7289 0230 00000000 		.word	le
 7290 0234 00E100E0 		.word	-536813312
 7291 0238 3CC00920 		.word	537509948
 7292 023c 00000000 		.word	requested_channel
 7293 0240 00000000 		.word	channel
 7294 0244 00000000 		.word	saved_request
 7295 0248 00000000 		.word	rx_tc
 7296 024c 00000000 		.word	rx_err
ARM GAS  /tmp/ccvLzxWr.s 			page 162


 7297 0250 00000000 		.word	do_hop
 7298 0254 00000000 		.word	requested_mode
 7299 0258 00000000 		.word	status
 7300 025c FC000000 		.word	whitening_word
 7301 0260 00000000 		.word	rxbuf1
 7302 0264 04410050 		.word	1342193924
 7303 0268 10410050 		.word	1342193936
 7304 026c 24000340 		.word	1073938468
 7305              	.L370:
 7306              	.LBB7:
1957:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7307              		.loc 1 1957 0 discriminator 3
 7308 0270 A54A     		ldr	r2, .L393
 7309 0272 7B6E     		ldr	r3, [r7, #100]
 7310 0274 1344     		add	r3, r3, r2
 7311 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7312 0278 1A06     		lsls	r2, r3, #24
1958:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7313              		.loc 1 1958 0 discriminator 3
 7314 027a 7B6E     		ldr	r3, [r7, #100]
 7315 027c 0133     		adds	r3, r3, #1
 7316 027e A249     		ldr	r1, .L393
 7317 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7318 0282 1B04     		lsls	r3, r3, #16
 7319 0284 1A43     		orrs	r2, r2, r3
1959:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 7320              		.loc 1 1959 0 discriminator 3
 7321 0286 7B6E     		ldr	r3, [r7, #100]
 7322 0288 0233     		adds	r3, r3, #2
 7323 028a 9F49     		ldr	r1, .L393
 7324 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7325 028e 1B02     		lsls	r3, r3, #8
 7326 0290 1343     		orrs	r3, r3, r2
1960:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7327              		.loc 1 1960 0 discriminator 3
 7328 0292 7A6E     		ldr	r2, [r7, #100]
 7329 0294 0332     		adds	r2, r2, #3
 7330 0296 9C49     		ldr	r1, .L393
 7331 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7332 029a 1343     		orrs	r3, r3, r2
1957:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7333              		.loc 1 1957 0 discriminator 3
 7334 029c BB64     		str	r3, [r7, #72]
1961:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7335              		.loc 1 1961 0 discriminator 3
 7336 029e 7B6E     		ldr	r3, [r7, #100]
 7337 02a0 002B     		cmp	r3, #0
 7338 02a2 00DA     		bge	.L368
 7339 02a4 0333     		adds	r3, r3, #3
 7340              	.L368:
 7341 02a6 9B10     		asrs	r3, r3, #2
 7342 02a8 5C1C     		adds	r4, r3, #1
 7343 02aa B86C     		ldr	r0, [r7, #72]
 7344 02ac FFF7FEFF 		bl	rbit
 7345 02b0 0146     		mov	r1, r0
 7346 02b2 7B6E     		ldr	r3, [r7, #100]
 7347 02b4 002B     		cmp	r3, #0
ARM GAS  /tmp/ccvLzxWr.s 			page 163


 7348 02b6 00DA     		bge	.L369
 7349 02b8 0333     		adds	r3, r3, #3
 7350              	.L369:
 7351 02ba 9B10     		asrs	r3, r3, #2
 7352 02bc 9B00     		lsls	r3, r3, #2
 7353 02be BA6D     		ldr	r2, [r7, #88]
 7354 02c0 1344     		add	r3, r3, r2
 7355 02c2 1B68     		ldr	r3, [r3]
 7356 02c4 81EA0302 		eor	r2, r1, r3
 7357 02c8 A300     		lsls	r3, r4, #2
 7358 02ca 07F16801 		add	r1, r7, #104
 7359 02ce 0B44     		add	r3, r3, r1
 7360 02d0 43F8602C 		str	r2, [r3, #-96]
 7361              	.LBE7:
1956:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7362              		.loc 1 1956 0 discriminator 3
 7363 02d4 7B6E     		ldr	r3, [r7, #100]
 7364 02d6 0433     		adds	r3, r3, #4
 7365 02d8 7B66     		str	r3, [r7, #100]
 7366              	.L367:
1956:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7367              		.loc 1 1956 0 is_stmt 0 discriminator 1
 7368 02da 7B6E     		ldr	r3, [r7, #100]
 7369 02dc 2B2B     		cmp	r3, #43
 7370 02de C7DD     		ble	.L370
1962:bluetooth_rxtx.c **** 		}
1963:bluetooth_rxtx.c **** 
1964:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 7371              		.loc 1 1964 0 is_stmt 1
 7372 02e0 8A4B     		ldr	r3, .L393+4
 7373 02e2 1B69     		ldr	r3, [r3, #16]
 7374 02e4 002B     		cmp	r3, #0
 7375 02e6 23D0     		beq	.L371
 7376              	.LBB8:
1965:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7377              		.loc 1 1965 0
 7378 02e8 884B     		ldr	r3, .L393+4
 7379 02ea D968     		ldr	r1, [r3, #12]
 7380 02ec FB6D     		ldr	r3, [r7, #92]
 7381 02ee 1A1D     		adds	r2, r3, #4
 7382 02f0 3B6D     		ldr	r3, [r7, #80]
 7383 02f2 0846     		mov	r0, r1
 7384 02f4 1146     		mov	r1, r2
 7385 02f6 1A46     		mov	r2, r3
 7386 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 7387 02fc 7864     		str	r0, [r7, #68]
1966:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7388              		.loc 1 1966 0
 7389 02fe 3B6D     		ldr	r3, [r7, #80]
 7390 0300 0633     		adds	r3, r3, #6
 7391 0302 FA6D     		ldr	r2, [r7, #92]
 7392 0304 1344     		add	r3, r3, r2
 7393 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7394 0308 1A04     		lsls	r2, r3, #16
1967:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 7395              		.loc 1 1967 0
 7396 030a 3B6D     		ldr	r3, [r7, #80]
ARM GAS  /tmp/ccvLzxWr.s 			page 164


 7397 030c 0533     		adds	r3, r3, #5
 7398 030e F96D     		ldr	r1, [r7, #92]
 7399 0310 0B44     		add	r3, r3, r1
 7400 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7401 0314 1B02     		lsls	r3, r3, #8
 7402 0316 1343     		orrs	r3, r3, r2
1968:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 7403              		.loc 1 1968 0
 7404 0318 3A6D     		ldr	r2, [r7, #80]
 7405 031a 0432     		adds	r2, r2, #4
 7406 031c F96D     		ldr	r1, [r7, #92]
 7407 031e 0A44     		add	r2, r2, r1
 7408 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7409 0322 1343     		orrs	r3, r3, r2
1966:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7410              		.loc 1 1966 0
 7411 0324 3B64     		str	r3, [r7, #64]
1969:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 7412              		.loc 1 1969 0
 7413 0326 7A6C     		ldr	r2, [r7, #68]
 7414 0328 3B6C     		ldr	r3, [r7, #64]
 7415 032a 9A42     		cmp	r2, r3
 7416 032c 00D0     		beq	.L371
1970:bluetooth_rxtx.c **** 				goto rx_flush;
 7417              		.loc 1 1970 0
 7418 032e 1BE0     		b	.L356
 7419              	.L371:
 7420              	.LBE8:
1971:bluetooth_rxtx.c **** 		}
1972:bluetooth_rxtx.c **** 
1973:bluetooth_rxtx.c **** 
1974:bluetooth_rxtx.c **** 		RXLED_SET;
 7421              		.loc 1 1974 0
 7422 0330 774B     		ldr	r3, .L393+8
 7423 0332 1022     		movs	r2, #16
 7424 0334 1A60     		str	r2, [r3]
1975:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 7425              		.loc 1 1975 0
 7426 0336 774B     		ldr	r3, .L393+12
 7427 0338 1B68     		ldr	r3, [r3]
 7428 033a 07F10802 		add	r2, r7, #8
 7429 033e 1046     		mov	r0, r2
 7430 0340 9847     		blx	r3
1976:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 7431              		.loc 1 1976 0
 7432 0342 07F10803 		add	r3, r7, #8
 7433 0346 0120     		movs	r0, #1
 7434 0348 1946     		mov	r1, r3
 7435 034a FFF7FEFF 		bl	enqueue
1977:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 7436              		.loc 1 1977 0
 7437 034e 724B     		ldr	r3, .L393+16
 7438 0350 1B68     		ldr	r3, [r3]
 7439 0352 C3F31303 		ubfx	r3, r3, #0, #20
 7440 0356 40F63542 		movw	r2, #3125
 7441 035a 02FB03F2 		mul	r2, r2, r3
 7442 035e 6F4B     		ldr	r3, .L393+20
ARM GAS  /tmp/ccvLzxWr.s 			page 165


 7443 0360 1B68     		ldr	r3, [r3]
 7444 0362 1344     		add	r3, r3, r2
 7445 0364 694A     		ldr	r2, .L393+4
 7446 0366 1364     		str	r3, [r2, #64]
 7447              	.L356:
1978:bluetooth_rxtx.c **** 
1979:bluetooth_rxtx.c **** 	rx_flush:
1980:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 7448              		.loc 1 1980 0
 7449 0368 6120     		movs	r0, #97
 7450 036a FFF7FEFF 		bl	cc2400_strobe
1981:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 7451              		.loc 1 1981 0
 7452 036e 00BF     		nop
 7453              	.L372:
 7454              		.loc 1 1981 0 is_stmt 0 discriminator 1
 7455 0370 FFF7FEFF 		bl	cc2400_status
 7456 0374 0346     		mov	r3, r0
 7457 0376 03F00403 		and	r3, r3, #4
 7458 037a 002B     		cmp	r3, #0
 7459 037c F8D0     		beq	.L372
1982:bluetooth_rxtx.c **** 
1983:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
1984:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7460              		.loc 1 1984 0 is_stmt 1
 7461 037e 684A     		ldr	r2, .L393+24
 7462 0380 674B     		ldr	r3, .L393+24
 7463 0382 1B68     		ldr	r3, [r3]
 7464 0384 23F00103 		bic	r3, r3, #1
 7465 0388 1360     		str	r3, [r2]
1985:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7466              		.loc 1 1985 0
 7467 038a 03E0     		b	.L373
 7468              	.L374:
 7469              	.LBB9:
1986:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 7470              		.loc 1 1986 0
 7471 038c 654B     		ldr	r3, .L393+28
 7472 038e 1B68     		ldr	r3, [r3]
 7473 0390 87F83F30 		strb	r3, [r7, #63]
 7474              	.L373:
 7475              	.LBE9:
1985:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7476              		.loc 1 1985 0
 7477 0394 644B     		ldr	r3, .L393+32
 7478 0396 1B68     		ldr	r3, [r3]
 7479 0398 03F00403 		and	r3, r3, #4
 7480 039c 002B     		cmp	r3, #0
 7481 039e F5D1     		bne	.L374
1987:bluetooth_rxtx.c **** 		}
1988:bluetooth_rxtx.c **** 
1989:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
1990:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 7482              		.loc 1 1990 0
 7483 03a0 5D4B     		ldr	r3, .L393+16
 7484 03a2 1B68     		ldr	r3, [r3]
 7485 03a4 C3F31303 		ubfx	r3, r3, #0, #20
ARM GAS  /tmp/ccvLzxWr.s 			page 166


 7486 03a8 40F63542 		movw	r2, #3125
 7487 03ac 02FB03F2 		mul	r2, r2, r3
 7488 03b0 5A4B     		ldr	r3, .L393+20
 7489 03b2 1B68     		ldr	r3, [r3]
 7490 03b4 1344     		add	r3, r3, r2
 7491 03b6 3B66     		str	r3, [r7, #96]
1991:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 7492              		.loc 1 1991 0
 7493 03b8 544B     		ldr	r3, .L393+4
 7494 03ba 1A6C     		ldr	r2, [r3, #64]
 7495 03bc 3B6E     		ldr	r3, [r7, #96]
 7496 03be 9A42     		cmp	r2, r3
 7497 03c0 05D9     		bls	.L375
1992:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 7498              		.loc 1 1992 0
 7499 03c2 3B6E     		ldr	r3, [r7, #96]
 7500 03c4 03F14343 		add	r3, r3, #-1023410176
 7501 03c8 03F5A003 		add	r3, r3, #5242880
 7502 03cc 3B66     		str	r3, [r7, #96]
 7503              	.L375:
1993:bluetooth_rxtx.c **** 		if  ( // timeout
1994:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 7504              		.loc 1 1994 0
 7505 03ce 4F4B     		ldr	r3, .L393+4
 7506 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
1993:bluetooth_rxtx.c **** 		if  ( // timeout
 7507              		.loc 1 1993 0
 7508 03d2 032B     		cmp	r3, #3
 7509 03d4 03D0     		beq	.L376
 7510              		.loc 1 1994 0
 7511 03d6 4D4B     		ldr	r3, .L393+4
 7512 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7513 03da 022B     		cmp	r3, #2
 7514 03dc 06D1     		bne	.L377
 7515              	.L376:
1995:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 7516              		.loc 1 1995 0
 7517 03de 4B4B     		ldr	r3, .L393+4
 7518 03e0 1B6C     		ldr	r3, [r3, #64]
 7519 03e2 3A6E     		ldr	r2, [r7, #96]
 7520 03e4 D31A     		subs	r3, r2, r3
 7521 03e6 514A     		ldr	r2, .L393+36
 7522 03e8 9342     		cmp	r3, r2
 7523 03ea 03D8     		bhi	.L378
 7524              	.L377:
1996:bluetooth_rxtx.c **** 			// jam finished
1997:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 7525              		.loc 1 1997 0
 7526 03ec 504B     		ldr	r3, .L393+40
 7527 03ee 1B68     		ldr	r3, [r3]
 7528 03f0 012B     		cmp	r3, #1
 7529 03f2 37D1     		bne	.L379
 7530              	.L378:
1998:bluetooth_rxtx.c **** 			)
1999:bluetooth_rxtx.c **** 		{
2000:bluetooth_rxtx.c **** 			reset_le();
 7531              		.loc 1 2000 0
ARM GAS  /tmp/ccvLzxWr.s 			page 167


 7532 03f4 FFF7FEFF 		bl	reset_le
2001:bluetooth_rxtx.c **** 			le_jam_count = 0;
 7533              		.loc 1 2001 0
 7534 03f8 4D4B     		ldr	r3, .L393+40
 7535 03fa 0022     		movs	r2, #0
 7536 03fc 1A60     		str	r2, [r3]
2002:bluetooth_rxtx.c **** 			TXLED_CLR;
 7537              		.loc 1 2002 0
 7538 03fe 4D4B     		ldr	r3, .L393+44
 7539 0400 4FF48072 		mov	r2, #256
 7540 0404 1A60     		str	r2, [r3]
2003:bluetooth_rxtx.c **** 
2004:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 7541              		.loc 1 2004 0
 7542 0406 4C4B     		ldr	r3, .L393+48
 7543 0408 1B78     		ldrb	r3, [r3]
 7544 040a DBB2     		uxtb	r3, r3
 7545 040c 012B     		cmp	r3, #1
 7546 040e 06D1     		bne	.L380
2005:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 7547              		.loc 1 2005 0
 7548 0410 494B     		ldr	r3, .L393+48
 7549 0412 0022     		movs	r2, #0
 7550 0414 1A70     		strb	r2, [r3]
2006:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 7551              		.loc 1 2006 0
 7552 0416 494B     		ldr	r3, .L393+52
 7553 0418 0022     		movs	r2, #0
 7554 041a 1A70     		strb	r2, [r3]
2007:bluetooth_rxtx.c **** 				goto cleanup;
 7555              		.loc 1 2007 0
 7556 041c 66E0     		b	.L389
 7557              	.L380:
2008:bluetooth_rxtx.c **** 			}
2009:bluetooth_rxtx.c **** 
2010:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2011:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 7558              		.loc 1 2011 0
 7559 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7560 0420 0A2B     		cmp	r3, #10
 7561 0422 01D1     		bne	.L381
2012:bluetooth_rxtx.c **** 				goto cleanup;
 7562              		.loc 1 2012 0
 7563 0424 00BF     		nop
 7564 0426 61E0     		b	.L389
 7565              	.L381:
2013:bluetooth_rxtx.c **** 
2014:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 7566              		.loc 1 2014 0
 7567 0428 384B     		ldr	r3, .L393+4
 7568 042a 0122     		movs	r2, #1
 7569 042c 1A75     		strb	r2, [r3, #20]
2015:bluetooth_rxtx.c **** 
2016:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7570              		.loc 1 2016 0
 7571 042e 6420     		movs	r0, #100
 7572 0430 FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/ccvLzxWr.s 			page 168


2017:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7573              		.loc 1 2017 0
 7574 0434 00BF     		nop
 7575              	.L382:
 7576              		.loc 1 2017 0 is_stmt 0 discriminator 1
 7577 0436 FFF7FEFF 		bl	cc2400_status
 7578 043a 0346     		mov	r3, r0
 7579 043c 03F00403 		and	r3, r3, #4
 7580 0440 002B     		cmp	r3, #0
 7581 0442 F8D1     		bne	.L382
2018:bluetooth_rxtx.c **** 
2019:bluetooth_rxtx.c **** 			/* Retune */
2020:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 7582              		.loc 1 2020 0 is_stmt 1
 7583 0444 3E4B     		ldr	r3, .L393+56
 7584 0446 1B88     		ldrh	r3, [r3]	@ movhi
 7585 0448 9BB2     		uxth	r3, r3
 7586 044a 002B     		cmp	r3, #0
 7587 044c 03D0     		beq	.L383
 7588              		.loc 1 2020 0 is_stmt 0 discriminator 1
 7589 044e 3C4B     		ldr	r3, .L393+56
 7590 0450 1B88     		ldrh	r3, [r3]	@ movhi
 7591 0452 9BB2     		uxth	r3, r3
 7592 0454 01E0     		b	.L384
 7593              	.L383:
 7594              		.loc 1 2020 0 discriminator 2
 7595 0456 40F66213 		movw	r3, #2402
 7596              	.L384:
 7597              		.loc 1 2020 0 discriminator 4
 7598 045a 3A4A     		ldr	r2, .L393+60
 7599 045c 1380     		strh	r3, [r2]	@ movhi
2021:bluetooth_rxtx.c **** 			restart_jamming = 1;
 7600              		.loc 1 2021 0 is_stmt 1 discriminator 4
 7601 045e 3A4B     		ldr	r3, .L393+64
 7602 0460 0122     		movs	r2, #1
 7603 0462 1A60     		str	r2, [r3]
 7604              	.L379:
2022:bluetooth_rxtx.c **** 		}
2023:bluetooth_rxtx.c **** 
2024:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 7605              		.loc 1 2024 0
 7606 0464 294B     		ldr	r3, .L393+4
 7607 0466 DB88     		ldrh	r3, [r3, #6]
 7608 0468 2C20     		movs	r0, #44
 7609 046a 1946     		mov	r1, r3
 7610 046c FFF7FEFF 		bl	cc2400_set
2025:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 7611              		.loc 1 2025 0
 7612 0470 264B     		ldr	r3, .L393+4
 7613 0472 9B88     		ldrh	r3, [r3, #4]
 7614 0474 2D20     		movs	r0, #45
 7615 0476 1946     		mov	r1, r3
 7616 0478 FFF7FEFF 		bl	cc2400_set
2026:bluetooth_rxtx.c **** 
2027:bluetooth_rxtx.c **** 		if (do_hop)
 7617              		.loc 1 2027 0
 7618 047c 334B     		ldr	r3, .L393+68
ARM GAS  /tmp/ccvLzxWr.s 			page 169


 7619 047e 1B78     		ldrb	r3, [r3]
 7620 0480 DBB2     		uxtb	r3, r3
 7621 0482 002B     		cmp	r3, #0
 7622 0484 01D0     		beq	.L385
2028:bluetooth_rxtx.c **** 			hop();
 7623              		.loc 1 2028 0
 7624 0486 FFF7FEFF 		bl	hop
 7625              	.L385:
2029:bluetooth_rxtx.c **** 
2030:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2031:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 7626              		.loc 1 2031 0
 7627 048a 294B     		ldr	r3, .L393+40
 7628 048c 1B68     		ldr	r3, [r3]
 7629 048e 002B     		cmp	r3, #0
 7630 0490 07DD     		ble	.L386
2032:bluetooth_rxtx.c **** 			le_jam();
 7631              		.loc 1 2032 0
 7632 0492 FFF7FEFF 		bl	le_jam
2033:bluetooth_rxtx.c **** 			--le_jam_count;
 7633              		.loc 1 2033 0
 7634 0496 264B     		ldr	r3, .L393+40
 7635 0498 1B68     		ldr	r3, [r3]
 7636 049a 013B     		subs	r3, r3, #1
 7637 049c 244A     		ldr	r2, .L393+40
 7638 049e 1360     		str	r3, [r2]
 7639 04a0 17E0     		b	.L387
 7640              	.L386:
2034:bluetooth_rxtx.c **** 		} else {
2035:bluetooth_rxtx.c **** 			/* RX mode */
2036:bluetooth_rxtx.c **** 			dma_init_le();
 7641              		.loc 1 2036 0
 7642 04a2 FFF7FEFF 		bl	dma_init_le
2037:bluetooth_rxtx.c **** 			dio_ssp_start();
 7643              		.loc 1 2037 0
 7644 04a6 FFF7FEFF 		bl	dio_ssp_start
2038:bluetooth_rxtx.c **** 
2039:bluetooth_rxtx.c **** 			if (restart_jamming) {
 7645              		.loc 1 2039 0
 7646 04aa 274B     		ldr	r3, .L393+64
 7647 04ac 1B68     		ldr	r3, [r3]
 7648 04ae 002B     		cmp	r3, #0
 7649 04b0 0CD0     		beq	.L388
2040:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 7650              		.loc 1 2040 0
 7651 04b2 164B     		ldr	r3, .L393+4
 7652 04b4 1B68     		ldr	r3, [r3]
 7653 04b6 1846     		mov	r0, r3
 7654 04b8 FFF7FEFF 		bl	rbit
 7655 04bc 0346     		mov	r3, r0
 7656 04be 1846     		mov	r0, r3
 7657 04c0 FFF7FEFF 		bl	cc2400_rx_sync
2041:bluetooth_rxtx.c **** 				restart_jamming = 0;
 7658              		.loc 1 2041 0
 7659 04c4 204B     		ldr	r3, .L393+64
 7660 04c6 0022     		movs	r2, #0
 7661 04c8 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 170


 7662 04ca 02E0     		b	.L387
 7663              	.L388:
2042:bluetooth_rxtx.c **** 			} else {
2043:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 7664              		.loc 1 2043 0
 7665 04cc 6220     		movs	r0, #98
 7666 04ce FFF7FEFF 		bl	cc2400_strobe
 7667              	.L387:
2044:bluetooth_rxtx.c **** 			}
2045:bluetooth_rxtx.c **** 		}
2046:bluetooth_rxtx.c **** 
2047:bluetooth_rxtx.c **** 		rx_tc = 0;
 7668              		.loc 1 2047 0
 7669 04d2 1F4B     		ldr	r3, .L393+72
 7670 04d4 0022     		movs	r2, #0
 7671 04d6 1A60     		str	r2, [r3]
2048:bluetooth_rxtx.c **** 		rx_err = 0;
 7672              		.loc 1 2048 0
 7673 04d8 1E4B     		ldr	r3, .L393+76
 7674 04da 0022     		movs	r2, #0
 7675 04dc 1A60     		str	r2, [r3]
 7676              	.L346:
 7677              	.LBE5:
1882:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7678              		.loc 1 1882 0
 7679 04de 174B     		ldr	r3, .L393+52
 7680 04e0 1B78     		ldrb	r3, [r3]
 7681 04e2 DBB2     		uxtb	r3, r3
 7682 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7683 04e6 9A42     		cmp	r2, r3
 7684 04e8 3FF4B1AD 		beq	.L390
 7685              	.L389:
2049:bluetooth_rxtx.c **** 	}
2050:bluetooth_rxtx.c **** 
2051:bluetooth_rxtx.c **** cleanup:
2052:bluetooth_rxtx.c **** 
2053:bluetooth_rxtx.c **** 	// disable USB interrupts
2054:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7686              		.loc 1 2054 0
 7687 04ec 1A4B     		ldr	r3, .L393+80
 7688 04ee 4FF08072 		mov	r2, #16777216
 7689 04f2 1A60     		str	r2, [r3]
2055:bluetooth_rxtx.c **** 
2056:bluetooth_rxtx.c **** 	// reset the radio completely
2057:bluetooth_rxtx.c **** 	cc2400_idle();
 7690              		.loc 1 2057 0
 7691 04f4 FFF7FEFF 		bl	cc2400_idle
2058:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7692              		.loc 1 2058 0
 7693 04f8 FFF7FEFF 		bl	dio_ssp_stop
2059:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7694              		.loc 1 2059 0
 7695 04fc FFF7FEFF 		bl	cs_trigger_disable
2060:bluetooth_rxtx.c **** }
 7696              		.loc 1 2060 0
 7697 0500 6C37     		adds	r7, r7, #108
 7698              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccvLzxWr.s 			page 171


 7699 0502 BD46     		mov	sp, r7
 7700              		.cfi_def_cfa_register 13
 7701              		@ sp needed
 7702 0504 90BD     		pop	{r4, r7, pc}
 7703              	.L394:
 7704 0506 00BF     		.align	2
 7705              	.L393:
 7706 0508 00000000 		.word	rxbuf1
 7707 050c 00000000 		.word	le
 7708 0510 38C00920 		.word	537509944
 7709 0514 00000000 		.word	packet_cb
 7710 0518 00000000 		.word	clkn
 7711 051c 08400040 		.word	1073758216
 7712 0520 24000340 		.word	1073938468
 7713 0524 08000340 		.word	1073938440
 7714 0528 0C000340 		.word	1073938444
 7715 052c 80F0FA02 		.word	50000000
 7716 0530 00000000 		.word	le_jam_count
 7717 0534 3CC00920 		.word	537509948
 7718 0538 00000000 		.word	jam_mode
 7719 053c 00000000 		.word	requested_mode
 7720 0540 00000000 		.word	saved_request
 7721 0544 00000000 		.word	channel
 7722 0548 D4000000 		.word	restart_jamming.4716
 7723 054c 00000000 		.word	do_hop
 7724 0550 00000000 		.word	rx_tc
 7725 0554 00000000 		.word	rx_err
 7726 0558 80E100E0 		.word	-536813184
 7727              		.cfi_endproc
 7728              	.LFE35:
 7730              		.section	.text.cb_follow_le,"ax",%progbits
 7731              		.align	2
 7732              		.global	cb_follow_le
 7733              		.thumb
 7734              		.thumb_func
 7736              	cb_follow_le:
 7737              	.LFB36:
2061:bluetooth_rxtx.c **** 
2062:bluetooth_rxtx.c **** 
2063:bluetooth_rxtx.c **** 
2064:bluetooth_rxtx.c **** /* low energy connection following
2065:bluetooth_rxtx.c ****  * follows a known AA around */
2066:bluetooth_rxtx.c **** int cb_follow_le() {
 7738              		.loc 1 2066 0
 7739              		.cfi_startproc
 7740              		@ args = 0, pretend = 0, frame = 48
 7741              		@ frame_needed = 1, uses_anonymous_args = 0
 7742 0000 80B5     		push	{r7, lr}
 7743              		.cfi_def_cfa_offset 8
 7744              		.cfi_offset 7, -8
 7745              		.cfi_offset 14, -4
 7746 0002 8CB0     		sub	sp, sp, #48
 7747              		.cfi_def_cfa_offset 56
 7748 0004 00AF     		add	r7, sp, #0
 7749              		.cfi_def_cfa_register 7
2067:bluetooth_rxtx.c **** 	int i, j, k;
2068:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
ARM GAS  /tmp/ccvLzxWr.s 			page 172


 7750              		.loc 1 2068 0
 7751 0006 6C4B     		ldr	r3, .L411
 7752 0008 1B88     		ldrh	r3, [r3]	@ movhi
 7753 000a 9BB2     		uxth	r3, r3
 7754 000c DBB2     		uxtb	r3, r3
 7755 000e 623B     		subs	r3, r3, #98
 7756 0010 DBB2     		uxtb	r3, r3
 7757 0012 1846     		mov	r0, r3
 7758 0014 FFF7FEFF 		bl	btle_channel_index
 7759 0018 0346     		mov	r3, r0
 7760 001a 1A46     		mov	r2, r3
 7761 001c 674B     		ldr	r3, .L411+4
 7762 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7763 0020 3B62     		str	r3, [r7, #32]
2069:bluetooth_rxtx.c **** 
2070:bluetooth_rxtx.c **** 	u32 access_address = 0;
 7764              		.loc 1 2070 0
 7765 0022 0023     		movs	r3, #0
 7766 0024 FB61     		str	r3, [r7, #28]
2071:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7767              		.loc 1 2071 0
 7768 0026 0023     		movs	r3, #0
 7769 0028 FB62     		str	r3, [r7, #44]
 7770 002a 0EE0     		b	.L396
 7771              	.L397:
2072:bluetooth_rxtx.c **** 		access_address >>= 1;
 7772              		.loc 1 2072 0 discriminator 3
 7773 002c FB69     		ldr	r3, [r7, #28]
 7774 002e 5B08     		lsrs	r3, r3, #1
 7775 0030 FB61     		str	r3, [r7, #28]
2073:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7776              		.loc 1 2073 0 discriminator 3
 7777 0032 634A     		ldr	r2, .L411+8
 7778 0034 FB6A     		ldr	r3, [r7, #44]
 7779 0036 1344     		add	r3, r3, r2
 7780 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7781 003a DB07     		lsls	r3, r3, #31
 7782 003c 1A46     		mov	r2, r3
 7783 003e FB69     		ldr	r3, [r7, #28]
 7784 0040 1343     		orrs	r3, r3, r2
 7785 0042 FB61     		str	r3, [r7, #28]
2071:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7786              		.loc 1 2071 0 discriminator 3
 7787 0044 FB6A     		ldr	r3, [r7, #44]
 7788 0046 0133     		adds	r3, r3, #1
 7789 0048 FB62     		str	r3, [r7, #44]
 7790              	.L396:
2071:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7791              		.loc 1 2071 0 is_stmt 0 discriminator 1
 7792 004a FB6A     		ldr	r3, [r7, #44]
 7793 004c 1E2B     		cmp	r3, #30
 7794 004e EDDD     		ble	.L397
2074:bluetooth_rxtx.c **** 	}
2075:bluetooth_rxtx.c **** 
2076:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 7795              		.loc 1 2076 0 is_stmt 1
 7796 0050 1F23     		movs	r3, #31
ARM GAS  /tmp/ccvLzxWr.s 			page 173


 7797 0052 FB62     		str	r3, [r7, #44]
 7798 0054 A6E0     		b	.L398
 7799              	.L409:
2077:bluetooth_rxtx.c **** 		access_address >>= 1;
 7800              		.loc 1 2077 0
 7801 0056 FB69     		ldr	r3, [r7, #28]
 7802 0058 5B08     		lsrs	r3, r3, #1
 7803 005a FB61     		str	r3, [r7, #28]
2078:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7804              		.loc 1 2078 0
 7805 005c 584A     		ldr	r2, .L411+8
 7806 005e FB6A     		ldr	r3, [r7, #44]
 7807 0060 1344     		add	r3, r3, r2
 7808 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7809 0064 DB07     		lsls	r3, r3, #31
 7810 0066 1A46     		mov	r2, r3
 7811 0068 FB69     		ldr	r3, [r7, #28]
 7812 006a 1343     		orrs	r3, r3, r2
 7813 006c FB61     		str	r3, [r7, #28]
2079:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 7814              		.loc 1 2079 0
 7815 006e 554B     		ldr	r3, .L411+12
 7816 0070 1A68     		ldr	r2, [r3]
 7817 0072 FB69     		ldr	r3, [r7, #28]
 7818 0074 9A42     		cmp	r2, r3
 7819 0076 40F09280 		bne	.L399
2080:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 7820              		.loc 1 2080 0
 7821 007a 0023     		movs	r3, #0
 7822 007c BB62     		str	r3, [r7, #40]
 7823 007e 48E0     		b	.L400
 7824              	.L406:
 7825              	.LBB10:
2081:bluetooth_rxtx.c **** 				u8 byte = 0;
 7826              		.loc 1 2081 0
 7827 0080 0023     		movs	r3, #0
 7828 0082 FB76     		strb	r3, [r7, #27]
2082:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 7829              		.loc 1 2082 0
 7830 0084 0023     		movs	r3, #0
 7831 0086 7B62     		str	r3, [r7, #36]
 7832 0088 37E0     		b	.L401
 7833              	.L405:
 7834              	.LBB11:
2083:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7835              		.loc 1 2083 0
 7836 008a BB6A     		ldr	r3, [r7, #40]
 7837 008c DA00     		lsls	r2, r3, #3
 7838 008e 7B6A     		ldr	r3, [r7, #36]
 7839 0090 1A44     		add	r2, r2, r3
 7840 0092 FB6A     		ldr	r3, [r7, #44]
 7841 0094 1344     		add	r3, r3, r2
 7842 0096 1F3B     		subs	r3, r3, #31
 7843 0098 3B61     		str	r3, [r7, #16]
2084:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 7844              		.loc 1 2084 0
 7845 009a 3B69     		ldr	r3, [r7, #16]
ARM GAS  /tmp/ccvLzxWr.s 			page 174


 7846 009c B3F5487F 		cmp	r3, #800
 7847 00a0 00DB     		blt	.L402
 7848 00a2 2DE0     		b	.L403
 7849              	.L402:
2085:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 7850              		.loc 1 2085 0
 7851 00a4 464A     		ldr	r2, .L411+8
 7852 00a6 3B69     		ldr	r3, [r7, #16]
 7853 00a8 1344     		add	r3, r3, r2
 7854 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7855 00ac 7B61     		str	r3, [r7, #20]
2086:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 7856              		.loc 1 2086 0
 7857 00ae BB6A     		ldr	r3, [r7, #40]
 7858 00b0 032B     		cmp	r3, #3
 7859 00b2 16DD     		ble	.L404
2087:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 7860              		.loc 1 2087 0
 7861 00b4 444A     		ldr	r2, .L411+16
 7862 00b6 3B6A     		ldr	r3, [r7, #32]
 7863 00b8 1344     		add	r3, r3, r2
 7864 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7865 00bc 1A46     		mov	r2, r3
 7866 00be 7B69     		ldr	r3, [r7, #20]
 7867 00c0 5340     		eors	r3, r3, r2
 7868 00c2 7B61     		str	r3, [r7, #20]
2088:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 7869              		.loc 1 2088 0
 7870 00c4 3B6A     		ldr	r3, [r7, #32]
 7871 00c6 0133     		adds	r3, r3, #1
 7872 00c8 1946     		mov	r1, r3
 7873 00ca 404B     		ldr	r3, .L411+20
 7874 00cc A1FB0323 		umull	r2, r3, r1, r3
 7875 00d0 C81A     		subs	r0, r1, r3
 7876 00d2 4008     		lsrs	r0, r0, #1
 7877 00d4 0344     		add	r3, r3, r0
 7878 00d6 9A09     		lsrs	r2, r3, #6
 7879 00d8 1346     		mov	r3, r2
 7880 00da DB01     		lsls	r3, r3, #7
 7881 00dc 9B1A     		subs	r3, r3, r2
 7882 00de CA1A     		subs	r2, r1, r3
 7883 00e0 3A62     		str	r2, [r7, #32]
 7884              	.L404:
2089:bluetooth_rxtx.c **** 					}
2090:bluetooth_rxtx.c **** 					byte |= bit << k;
 7885              		.loc 1 2090 0 discriminator 2
 7886 00e2 7A69     		ldr	r2, [r7, #20]
 7887 00e4 7B6A     		ldr	r3, [r7, #36]
 7888 00e6 02FA03F3 		lsl	r3, r2, r3
 7889 00ea DAB2     		uxtb	r2, r3
 7890 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 7891 00ee 1343     		orrs	r3, r3, r2
 7892 00f0 DBB2     		uxtb	r3, r3
 7893 00f2 FB76     		strb	r3, [r7, #27]
 7894              	.LBE11:
2082:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7895              		.loc 1 2082 0 discriminator 2
ARM GAS  /tmp/ccvLzxWr.s 			page 175


 7896 00f4 7B6A     		ldr	r3, [r7, #36]
 7897 00f6 0133     		adds	r3, r3, #1
 7898 00f8 7B62     		str	r3, [r7, #36]
 7899              	.L401:
2082:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7900              		.loc 1 2082 0 is_stmt 0 discriminator 1
 7901 00fa 7B6A     		ldr	r3, [r7, #36]
 7902 00fc 072B     		cmp	r3, #7
 7903 00fe C4DD     		ble	.L405
 7904              	.L403:
2091:bluetooth_rxtx.c **** 				}
2092:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 7905              		.loc 1 2092 0 is_stmt 1 discriminator 2
 7906 0100 334B     		ldr	r3, .L411+24
 7907 0102 1A68     		ldr	r2, [r3]
 7908 0104 BB6A     		ldr	r3, [r7, #40]
 7909 0106 1344     		add	r3, r3, r2
 7910 0108 FA7E     		ldrb	r2, [r7, #27]
 7911 010a 1A70     		strb	r2, [r3]
 7912              	.LBE10:
2080:bluetooth_rxtx.c **** 				u8 byte = 0;
 7913              		.loc 1 2080 0 discriminator 2
 7914 010c BB6A     		ldr	r3, [r7, #40]
 7915 010e 0133     		adds	r3, r3, #1
 7916 0110 BB62     		str	r3, [r7, #40]
 7917              	.L400:
2080:bluetooth_rxtx.c **** 				u8 byte = 0;
 7918              		.loc 1 2080 0 is_stmt 0 discriminator 1
 7919 0112 BB6A     		ldr	r3, [r7, #40]
 7920 0114 2D2B     		cmp	r3, #45
 7921 0116 B3DD     		ble	.L406
2093:bluetooth_rxtx.c **** 			}
2094:bluetooth_rxtx.c **** 
2095:bluetooth_rxtx.c **** 			// verify CRC
2096:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 7922              		.loc 1 2096 0 is_stmt 1
 7923 0118 2A4B     		ldr	r3, .L411+12
 7924 011a 1B69     		ldr	r3, [r3, #16]
 7925 011c 002B     		cmp	r3, #0
 7926 011e 2ED0     		beq	.L407
 7927              	.LBB12:
2097:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 7928              		.loc 1 2097 0
 7929 0120 2B4B     		ldr	r3, .L411+24
 7930 0122 1B68     		ldr	r3, [r3]
 7931 0124 0533     		adds	r3, r3, #5
 7932 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7933 0128 03F03F03 		and	r3, r3, #63
 7934 012c 0233     		adds	r3, r3, #2
 7935 012e FB60     		str	r3, [r7, #12]
2098:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 7936              		.loc 1 2098 0
 7937 0130 244B     		ldr	r3, .L411+12
 7938 0132 DA68     		ldr	r2, [r3, #12]
 7939 0134 264B     		ldr	r3, .L411+24
 7940 0136 1B68     		ldr	r3, [r3]
 7941 0138 0433     		adds	r3, r3, #4
ARM GAS  /tmp/ccvLzxWr.s 			page 176


 7942 013a 1046     		mov	r0, r2
 7943 013c 1946     		mov	r1, r3
 7944 013e FA68     		ldr	r2, [r7, #12]
 7945 0140 FFF7FEFF 		bl	btle_crcgen_lut
 7946 0144 B860     		str	r0, [r7, #8]
2099:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 7947              		.loc 1 2099 0
 7948 0146 224B     		ldr	r3, .L411+24
 7949 0148 1A68     		ldr	r2, [r3]
 7950 014a FB68     		ldr	r3, [r7, #12]
 7951 014c 0633     		adds	r3, r3, #6
 7952 014e 1344     		add	r3, r3, r2
 7953 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7954 0152 1A04     		lsls	r2, r3, #16
2100:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 7955              		.loc 1 2100 0
 7956 0154 1E4B     		ldr	r3, .L411+24
 7957 0156 1968     		ldr	r1, [r3]
 7958 0158 FB68     		ldr	r3, [r7, #12]
 7959 015a 0533     		adds	r3, r3, #5
 7960 015c 0B44     		add	r3, r3, r1
 7961 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7962 0160 1B02     		lsls	r3, r3, #8
 7963 0162 1343     		orrs	r3, r3, r2
2101:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 7964              		.loc 1 2101 0
 7965 0164 1A4A     		ldr	r2, .L411+24
 7966 0166 1268     		ldr	r2, [r2]
 7967 0168 F968     		ldr	r1, [r7, #12]
 7968 016a 0431     		adds	r1, r1, #4
 7969 016c 0A44     		add	r2, r2, r1
 7970 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7971 0170 1343     		orrs	r3, r3, r2
2099:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 7972              		.loc 1 2099 0
 7973 0172 7B60     		str	r3, [r7, #4]
2102:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 7974              		.loc 1 2102 0
 7975 0174 BA68     		ldr	r2, [r7, #8]
 7976 0176 7B68     		ldr	r3, [r7, #4]
 7977 0178 9A42     		cmp	r2, r3
 7978 017a 00D0     		beq	.L407
2103:bluetooth_rxtx.c **** 					break;
 7979              		.loc 1 2103 0
 7980 017c 17E0     		b	.L408
 7981              	.L407:
 7982              	.LBE12:
2104:bluetooth_rxtx.c **** 			}
2105:bluetooth_rxtx.c **** 
2106:bluetooth_rxtx.c **** 			// send to PC
2107:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 7983              		.loc 1 2107 0
 7984 017e 144B     		ldr	r3, .L411+24
 7985 0180 1B68     		ldr	r3, [r3]
 7986 0182 0120     		movs	r0, #1
 7987 0184 1946     		mov	r1, r3
 7988 0186 FFF7FEFF 		bl	enqueue
ARM GAS  /tmp/ccvLzxWr.s 			page 177


2108:bluetooth_rxtx.c **** 			RXLED_SET;
 7989              		.loc 1 2108 0
 7990 018a 124B     		ldr	r3, .L411+28
 7991 018c 1022     		movs	r2, #16
 7992 018e 1A60     		str	r2, [r3]
2109:bluetooth_rxtx.c **** 
2110:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 7993              		.loc 1 2110 0
 7994 0190 114B     		ldr	r3, .L411+32
 7995 0192 1B68     		ldr	r3, [r3]
 7996 0194 0E4A     		ldr	r2, .L411+24
 7997 0196 1268     		ldr	r2, [r2]
 7998 0198 1046     		mov	r0, r2
 7999 019a 9847     		blx	r3
2111:bluetooth_rxtx.c **** 
2112:bluetooth_rxtx.c **** 			break;
 8000              		.loc 1 2112 0
 8001 019c 07E0     		b	.L408
 8002              	.L399:
2076:bluetooth_rxtx.c **** 		access_address >>= 1;
 8003              		.loc 1 2076 0 discriminator 2
 8004 019e FB6A     		ldr	r3, [r7, #44]
 8005 01a0 0133     		adds	r3, r3, #1
 8006 01a2 FB62     		str	r3, [r7, #44]
 8007              	.L398:
2076:bluetooth_rxtx.c **** 		access_address >>= 1;
 8008              		.loc 1 2076 0 is_stmt 0 discriminator 1
 8009 01a4 FB6A     		ldr	r3, [r7, #44]
 8010 01a6 B3F5D87F 		cmp	r3, #432
 8011 01aa FFF654AF 		blt	.L409
 8012              	.L408:
2113:bluetooth_rxtx.c **** 		}
2114:bluetooth_rxtx.c **** 	}
2115:bluetooth_rxtx.c **** 
2116:bluetooth_rxtx.c **** 	return 1;
 8013              		.loc 1 2116 0 is_stmt 1
 8014 01ae 0123     		movs	r3, #1
2117:bluetooth_rxtx.c **** }
 8015              		.loc 1 2117 0
 8016 01b0 1846     		mov	r0, r3
 8017 01b2 3037     		adds	r7, r7, #48
 8018              		.cfi_def_cfa_offset 8
 8019 01b4 BD46     		mov	sp, r7
 8020              		.cfi_def_cfa_register 13
 8021              		@ sp needed
 8022 01b6 80BD     		pop	{r7, pc}
 8023              	.L412:
 8024              		.align	2
 8025              	.L411:
 8026 01b8 00000000 		.word	channel
 8027 01bc AC000000 		.word	whitening_index
 8028 01c0 00000000 		.word	unpacked
 8029 01c4 00000000 		.word	le
 8030 01c8 2C000000 		.word	whitening
 8031 01cc 11080402 		.word	33818641
 8032 01d0 00000000 		.word	idle_rxbuf
 8033 01d4 38C00920 		.word	537509944
ARM GAS  /tmp/ccvLzxWr.s 			page 178


 8034 01d8 00000000 		.word	packet_cb
 8035              		.cfi_endproc
 8036              	.LFE36:
 8038              		.section	.text.connection_follow_cb,"ax",%progbits
 8039              		.align	2
 8040              		.global	connection_follow_cb
 8041              		.thumb
 8042              		.thumb_func
 8044              	connection_follow_cb:
 8045              	.LFB37:
2118:bluetooth_rxtx.c **** 
2119:bluetooth_rxtx.c **** /**
2120:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2121:bluetooth_rxtx.c ****  */
2122:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 8046              		.loc 1 2122 0
 8047              		.cfi_startproc
 8048              		@ args = 0, pretend = 0, frame = 40
 8049              		@ frame_needed = 1, uses_anonymous_args = 0
 8050 0000 80B5     		push	{r7, lr}
 8051              		.cfi_def_cfa_offset 8
 8052              		.cfi_offset 7, -8
 8053              		.cfi_offset 14, -4
 8054 0002 8AB0     		sub	sp, sp, #40
 8055              		.cfi_def_cfa_offset 48
 8056 0004 00AF     		add	r7, sp, #0
 8057              		.cfi_def_cfa_register 7
 8058 0006 7860     		str	r0, [r7, #4]
2123:bluetooth_rxtx.c **** 	int i;
2124:bluetooth_rxtx.c **** 	u32 aa = 0;
 8059              		.loc 1 2124 0
 8060 0008 0023     		movs	r3, #0
 8061 000a 3B62     		str	r3, [r7, #32]
2125:bluetooth_rxtx.c **** 
2126:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2127:bluetooth_rxtx.c **** #define HEADER_IDX 4
2128:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2129:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2130:bluetooth_rxtx.c **** 
2131:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 8062              		.loc 1 2131 0
 8063 000c 7B68     		ldr	r3, [r7, #4]
 8064 000e FB61     		str	r3, [r7, #28]
2132:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 8065              		.loc 1 2132 0
 8066 0010 7B68     		ldr	r3, [r7, #4]
 8067 0012 1B79     		ldrb	r3, [r3, #4]
 8068 0014 FB76     		strb	r3, [r7, #27]
2133:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 8069              		.loc 1 2133 0
 8070 0016 7B68     		ldr	r3, [r7, #4]
 8071 0018 0533     		adds	r3, r3, #5
 8072 001a 7B61     		str	r3, [r7, #20]
2134:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 8073              		.loc 1 2134 0
 8074 001c 7B68     		ldr	r3, [r7, #4]
 8075 001e 0633     		adds	r3, r3, #6
ARM GAS  /tmp/ccvLzxWr.s 			page 179


 8076 0020 3B61     		str	r3, [r7, #16]
2135:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 8077              		.loc 1 2135 0
 8078 0022 7B69     		ldr	r3, [r7, #20]
 8079 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8080 0026 0633     		adds	r3, r3, #6
 8081 0028 1A46     		mov	r2, r3
 8082 002a 7B68     		ldr	r3, [r7, #4]
 8083 002c 1344     		add	r3, r3, r2
 8084 002e FB60     		str	r3, [r7, #12]
2136:bluetooth_rxtx.c **** 
2137:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 8085              		.loc 1 2137 0
 8086 0030 8B4B     		ldr	r3, .L423
 8087 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8088 0034 022B     		cmp	r3, #2
 8089 0036 1CD1     		bne	.L414
2138:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2139:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 8090              		.loc 1 2139 0
 8091 0038 894B     		ldr	r3, .L423
 8092 003a 0322     		movs	r2, #3
 8093 003c 1A75     		strb	r2, [r3, #20]
2140:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 8094              		.loc 1 2140 0
 8095 003e 894B     		ldr	r3, .L423+4
 8096 0040 1B68     		ldr	r3, [r3]
 8097 0042 874A     		ldr	r2, .L423
 8098 0044 9361     		str	r3, [r2, #24]
2141:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 8099              		.loc 1 2141 0
 8100 0046 864B     		ldr	r3, .L423
 8101 0048 DB8B     		ldrh	r3, [r3, #30]
 8102 004a 013B     		subs	r3, r3, #1
 8103 004c 9AB2     		uxth	r2, r3
 8104 004e 844B     		ldr	r3, .L423
 8105 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2142:bluetooth_rxtx.c **** 		le.conn_count = 0;
 8106              		.loc 1 2142 0
 8107 0052 834B     		ldr	r3, .L423
 8108 0054 0022     		movs	r2, #0
 8109 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2143:bluetooth_rxtx.c **** 		le.update_pending = 0;
 8110              		.loc 1 2143 0
 8111 0058 814B     		ldr	r3, .L423
 8112 005a 0022     		movs	r2, #0
 8113 005c 9A62     		str	r2, [r3, #40]
2144:bluetooth_rxtx.c **** 
2145:bluetooth_rxtx.c **** 		// hue hue hue
2146:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 8114              		.loc 1 2146 0
 8115 005e 824B     		ldr	r3, .L423+8
 8116 0060 1B78     		ldrb	r3, [r3]
 8117 0062 DBB2     		uxtb	r3, r3
 8118 0064 002B     		cmp	r3, #0
 8119 0066 00F0F780 		beq	.L413
2147:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
ARM GAS  /tmp/ccvLzxWr.s 			page 180


 8120              		.loc 1 2147 0
 8121 006a 804B     		ldr	r3, .L423+12
 8122 006c 2822     		movs	r2, #40
 8123 006e 1A60     		str	r2, [r3]
 8124 0070 F2E0     		b	.L413
 8125              	.L414:
2148:bluetooth_rxtx.c **** 
2149:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 8126              		.loc 1 2149 0
 8127 0072 7B4B     		ldr	r3, .L423
 8128 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8129 0076 032B     		cmp	r3, #3
 8130 0078 6FD1     		bne	.L417
 8131              	.LBB13:
2150:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 8132              		.loc 1 2150 0
 8133 007a FB7E     		ldrb	r3, [r7, #27]
 8134 007c 03F00303 		and	r3, r3, #3
 8135 0080 FB72     		strb	r3, [r7, #11]
2151:bluetooth_rxtx.c **** 
2152:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2153:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 8136              		.loc 1 2153 0
 8137 0082 774B     		ldr	r3, .L423
 8138 0084 9B6A     		ldr	r3, [r3, #40]
 8139 0086 002B     		cmp	r3, #0
 8140 0088 21D0     		beq	.L418
 8141              		.loc 1 2153 0 is_stmt 0 discriminator 1
 8142 008a 754B     		ldr	r3, .L423
 8143 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8144 008e 9AB2     		uxth	r2, r3
 8145 0090 734B     		ldr	r3, .L423
 8146 0092 9B8D     		ldrh	r3, [r3, #44]
 8147 0094 9A42     		cmp	r2, r3
 8148 0096 1AD1     		bne	.L418
2154:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2155:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 8149              		.loc 1 2155 0 is_stmt 1
 8150 0098 724B     		ldr	r3, .L423+4
 8151 009a 1B68     		ldr	r3, [r3]
 8152 009c 704A     		ldr	r2, .L423
 8153 009e 9361     		str	r3, [r2, #24]
2156:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 8154              		.loc 1 2156 0
 8155 00a0 6F4B     		ldr	r3, .L423
 8156 00a2 DA8D     		ldrh	r2, [r3, #46]
 8157 00a4 6E4B     		ldr	r3, .L423
 8158 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2157:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 8159              		.loc 1 2157 0
 8160 00a8 6D4B     		ldr	r3, .L423
 8161 00aa DB8D     		ldrh	r3, [r3, #46]
 8162 00ac 013B     		subs	r3, r3, #1
 8163 00ae 9AB2     		uxth	r2, r3
 8164 00b0 6B4B     		ldr	r3, .L423
 8165 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2158:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
ARM GAS  /tmp/ccvLzxWr.s 			page 181


 8166              		.loc 1 2158 0
 8167 00b4 6A4B     		ldr	r3, .L423
 8168 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 8169 00ba 694B     		ldr	r3, .L423
 8170 00bc 83F82220 		strb	r2, [r3, #34]
2159:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 8171              		.loc 1 2159 0
 8172 00c0 674B     		ldr	r3, .L423
 8173 00c2 5A8E     		ldrh	r2, [r3, #50]
 8174 00c4 664B     		ldr	r3, .L423
 8175 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2160:bluetooth_rxtx.c **** 			le.update_pending = 0;
 8176              		.loc 1 2160 0
 8177 00c8 654B     		ldr	r3, .L423
 8178 00ca 0022     		movs	r2, #0
 8179 00cc 9A62     		str	r2, [r3, #40]
 8180              	.L418:
2161:bluetooth_rxtx.c **** 		}
2162:bluetooth_rxtx.c **** 
2163:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 8181              		.loc 1 2163 0
 8182 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 8183 00d0 032B     		cmp	r3, #3
 8184 00d2 41D1     		bne	.L419
 8185              		.loc 1 2163 0 is_stmt 0 discriminator 1
 8186 00d4 3B69     		ldr	r3, [r7, #16]
 8187 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8188 00d8 002B     		cmp	r3, #0
 8189 00da 3DD1     		bne	.L419
2164:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2165:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2166:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 8190              		.loc 1 2166 0 is_stmt 1
 8191 00dc 7B68     		ldr	r3, [r7, #4]
 8192 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 8193 00e0 5F4B     		ldr	r3, .L423
 8194 00e2 83F83020 		strb	r2, [r3, #48]
2167:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 8195              		.loc 1 2167 0
 8196 00e6 7B68     		ldr	r3, [r7, #4]
 8197 00e8 0833     		adds	r3, r3, #8
 8198 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8199 00ec 9AB2     		uxth	r2, r3
 8200 00ee 7B68     		ldr	r3, [r7, #4]
 8201 00f0 0933     		adds	r3, r3, #9
 8202 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8203 00f4 9BB2     		uxth	r3, r3
 8204 00f6 1B02     		lsls	r3, r3, #8
 8205 00f8 9BB2     		uxth	r3, r3
 8206 00fa 1344     		add	r3, r3, r2
 8207 00fc 9AB2     		uxth	r2, r3
 8208 00fe 584B     		ldr	r3, .L423
 8209 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2168:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 8210              		.loc 1 2168 0
 8211 0102 7B68     		ldr	r3, [r7, #4]
 8212 0104 0A33     		adds	r3, r3, #10
ARM GAS  /tmp/ccvLzxWr.s 			page 182


 8213 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8214 0108 9AB2     		uxth	r2, r3
 8215 010a 7B68     		ldr	r3, [r7, #4]
 8216 010c 0B33     		adds	r3, r3, #11
 8217 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8218 0110 9BB2     		uxth	r3, r3
 8219 0112 1B02     		lsls	r3, r3, #8
 8220 0114 9BB2     		uxth	r3, r3
 8221 0116 1344     		add	r3, r3, r2
 8222 0118 9AB2     		uxth	r2, r3
 8223 011a 514B     		ldr	r3, .L423
 8224 011c DA85     		strh	r2, [r3, #46]	@ movhi
2169:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 8225              		.loc 1 2169 0
 8226 011e 7B68     		ldr	r3, [r7, #4]
 8227 0120 1033     		adds	r3, r3, #16
 8228 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8229 0124 9AB2     		uxth	r2, r3
 8230 0126 7B68     		ldr	r3, [r7, #4]
 8231 0128 1133     		adds	r3, r3, #17
 8232 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8233 012c 9BB2     		uxth	r3, r3
 8234 012e 1B02     		lsls	r3, r3, #8
 8235 0130 9BB2     		uxth	r3, r3
 8236 0132 1344     		add	r3, r3, r2
 8237 0134 9AB2     		uxth	r2, r3
 8238 0136 4A4B     		ldr	r3, .L423
 8239 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2170:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 8240              		.loc 1 2170 0
 8241 013a 494B     		ldr	r3, .L423
 8242 013c 9B8D     		ldrh	r3, [r3, #44]
 8243 013e 1A46     		mov	r2, r3
 8244 0140 474B     		ldr	r3, .L423
 8245 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8246 0144 9BB2     		uxth	r3, r3
 8247 0146 D31A     		subs	r3, r2, r3
 8248 0148 47F6FE72 		movw	r2, #32766
 8249 014c 9342     		cmp	r3, r2
 8250 014e 03DC     		bgt	.L419
2171:bluetooth_rxtx.c **** 				le.update_pending = 1;
 8251              		.loc 1 2171 0
 8252 0150 434B     		ldr	r3, .L423
 8253 0152 0122     		movs	r2, #1
 8254 0154 9A62     		str	r2, [r3, #40]
 8255              	.LBE13:
 8256 0156 7FE0     		b	.L413
 8257              	.L419:
 8258 0158 7EE0     		b	.L413
 8259              	.L417:
2172:bluetooth_rxtx.c **** 		}
2173:bluetooth_rxtx.c **** 
2174:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 8260              		.loc 1 2174 0
 8261 015a 414B     		ldr	r3, .L423
 8262 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8263 015e 012B     		cmp	r3, #1
ARM GAS  /tmp/ccvLzxWr.s 			page 183


 8264 0160 7AD1     		bne	.L413
 8265              	.LBB14:
2175:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 8266              		.loc 1 2175 0
 8267 0162 7B68     		ldr	r3, [r7, #4]
 8268 0164 0433     		adds	r3, r3, #4
 8269 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8270 0168 03F00F03 		and	r3, r3, #15
 8271 016c BB72     		strb	r3, [r7, #10]
2176:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 8272              		.loc 1 2176 0
 8273 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 8274 0170 052B     		cmp	r3, #5
 8275 0172 71D1     		bne	.L413
2177:bluetooth_rxtx.c **** 			// This is a connect packet
2178:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2179:bluetooth_rxtx.c **** 			if (le.target_set &&
 8276              		.loc 1 2179 0
 8277 0174 3A4B     		ldr	r3, .L423
 8278 0176 DB6B     		ldr	r3, [r3, #60]
 8279 0178 002B     		cmp	r3, #0
 8280 017a 14D0     		beq	.L420
2180:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8281              		.loc 1 2180 0 discriminator 1
 8282 017c 7B68     		ldr	r3, [r7, #4]
 8283 017e 0633     		adds	r3, r3, #6
 8284 0180 3B48     		ldr	r0, .L423+16
 8285 0182 1946     		mov	r1, r3
 8286 0184 0622     		movs	r2, #6
 8287 0186 FFF7FEFF 		bl	memcmp
 8288 018a 0346     		mov	r3, r0
2179:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8289              		.loc 1 2179 0 discriminator 1
 8290 018c 002B     		cmp	r3, #0
 8291 018e 0AD0     		beq	.L420
2181:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 8292              		.loc 1 2181 0
 8293 0190 7B68     		ldr	r3, [r7, #4]
 8294 0192 0C33     		adds	r3, r3, #12
 8295 0194 3648     		ldr	r0, .L423+16
 8296 0196 1946     		mov	r1, r3
 8297 0198 0622     		movs	r2, #6
 8298 019a FFF7FEFF 		bl	memcmp
 8299 019e 0346     		mov	r3, r0
2180:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8300              		.loc 1 2180 0
 8301 01a0 002B     		cmp	r3, #0
 8302 01a2 00D0     		beq	.L420
2182:bluetooth_rxtx.c **** 				return;
 8303              		.loc 1 2182 0
 8304 01a4 58E0     		b	.L413
 8305              	.L420:
2183:bluetooth_rxtx.c **** 			}
2184:bluetooth_rxtx.c **** 
2185:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 8306              		.loc 1 2185 0
 8307 01a6 2E4B     		ldr	r3, .L423
ARM GAS  /tmp/ccvLzxWr.s 			page 184


 8308 01a8 0222     		movs	r2, #2
 8309 01aa 1A75     		strb	r2, [r3, #20]
2186:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 8310              		.loc 1 2186 0
 8311 01ac 2C4B     		ldr	r3, .L423
 8312 01ae 0022     		movs	r2, #0
 8313 01b0 1A61     		str	r2, [r3, #16]
2187:bluetooth_rxtx.c **** 
2188:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 8314              		.loc 1 2188 0
 8315 01b2 0023     		movs	r3, #0
 8316 01b4 7B62     		str	r3, [r7, #36]
 8317 01b6 11E0     		b	.L421
 8318              	.L422:
2189:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8319              		.loc 1 2189 0 discriminator 3
 8320 01b8 7B6A     		ldr	r3, [r7, #36]
 8321 01ba 1233     		adds	r3, r3, #18
 8322 01bc 1A46     		mov	r2, r3
 8323 01be 7B68     		ldr	r3, [r7, #4]
 8324 01c0 1344     		add	r3, r3, r2
 8325 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8326 01c4 1A46     		mov	r2, r3
 8327 01c6 7B6A     		ldr	r3, [r7, #36]
 8328 01c8 DB00     		lsls	r3, r3, #3
 8329 01ca 02FA03F3 		lsl	r3, r2, r3
 8330 01ce 1A46     		mov	r2, r3
 8331 01d0 3B6A     		ldr	r3, [r7, #32]
 8332 01d2 1343     		orrs	r3, r3, r2
 8333 01d4 3B62     		str	r3, [r7, #32]
2188:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8334              		.loc 1 2188 0 discriminator 3
 8335 01d6 7B6A     		ldr	r3, [r7, #36]
 8336 01d8 0133     		adds	r3, r3, #1
 8337 01da 7B62     		str	r3, [r7, #36]
 8338              	.L421:
2188:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8339              		.loc 1 2188 0 is_stmt 0 discriminator 1
 8340 01dc 7B6A     		ldr	r3, [r7, #36]
 8341 01de 032B     		cmp	r3, #3
 8342 01e0 EADD     		ble	.L422
2190:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 8343              		.loc 1 2190 0 is_stmt 1
 8344 01e2 386A     		ldr	r0, [r7, #32]
 8345 01e4 FFF7FEFF 		bl	le_set_access_address
2191:bluetooth_rxtx.c **** 
2192:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2193:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 8346              		.loc 1 2193 0
 8347 01e8 7B68     		ldr	r3, [r7, #4]
 8348 01ea 1833     		adds	r3, r3, #24
 8349 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8350 01ee 1A04     		lsls	r2, r3, #16
2194:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8351              		.loc 1 2194 0
 8352 01f0 7B68     		ldr	r3, [r7, #4]
 8353 01f2 1733     		adds	r3, r3, #23
ARM GAS  /tmp/ccvLzxWr.s 			page 185


 8354 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8355 01f6 1B02     		lsls	r3, r3, #8
 8356 01f8 1343     		orrs	r3, r3, r2
2195:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 8357              		.loc 1 2195 0
 8358 01fa 7A68     		ldr	r2, [r7, #4]
 8359 01fc 1632     		adds	r2, r2, #22
 8360 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8361 0200 1343     		orrs	r3, r3, r2
2193:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8362              		.loc 1 2193 0
 8363 0202 1A46     		mov	r2, r3
 8364 0204 164B     		ldr	r3, .L423
 8365 0206 9A60     		str	r2, [r3, #8]
2196:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 8366              		.loc 1 2196 0
 8367 0208 154B     		ldr	r3, .L423
 8368 020a 9B68     		ldr	r3, [r3, #8]
 8369 020c 1846     		mov	r0, r3
 8370 020e FFF7FEFF 		bl	rbit
 8371 0212 0246     		mov	r2, r0
 8372 0214 124B     		ldr	r3, .L423
 8373 0216 DA60     		str	r2, [r3, #12]
2197:bluetooth_rxtx.c **** 
2198:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2199:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 8374              		.loc 1 2199 0
 8375 0218 7B68     		ldr	r3, [r7, #4]
 8376 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 8377 021c 104B     		ldr	r3, .L423
 8378 021e 83F82220 		strb	r2, [r3, #34]
2200:bluetooth_rxtx.c **** 
2201:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2202:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 8379              		.loc 1 2202 0
 8380 0222 7B68     		ldr	r3, [r7, #4]
 8381 0224 1A33     		adds	r3, r3, #26
 8382 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8383 0228 9AB2     		uxth	r2, r3
 8384 022a 0D4B     		ldr	r3, .L423
 8385 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2203:bluetooth_rxtx.c **** 
2204:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2205:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 8386              		.loc 1 2205 0
 8387 022e 7B68     		ldr	r3, [r7, #4]
 8388 0230 1C33     		adds	r3, r3, #28
 8389 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8390 0234 9AB2     		uxth	r2, r3
 8391 0236 0A4B     		ldr	r3, .L423
 8392 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2206:bluetooth_rxtx.c **** 
2207:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2208:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 8393              		.loc 1 2208 0
 8394 023a 7B68     		ldr	r3, [r7, #4]
 8395 023c 2733     		adds	r3, r3, #39
ARM GAS  /tmp/ccvLzxWr.s 			page 186


 8396 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8397 0240 03F01F03 		and	r3, r3, #31
 8398 0244 DAB2     		uxtb	r2, r3
 8399 0246 064B     		ldr	r3, .L423
 8400 0248 9A75     		strb	r2, [r3, #22]
2209:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 8401              		.loc 1 2209 0
 8402 024a 054B     		ldr	r3, .L423
 8403 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 8404 024e 044B     		ldr	r3, .L423
 8405 0250 5A75     		strb	r2, [r3, #21]
2210:bluetooth_rxtx.c **** 
2211:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2212:bluetooth_rxtx.c **** 			do_hop = 1;
 8406              		.loc 1 2212 0
 8407 0252 084B     		ldr	r3, .L423+20
 8408 0254 0122     		movs	r2, #1
 8409 0256 1A70     		strb	r2, [r3]
 8410              	.L413:
 8411              	.LBE14:
2213:bluetooth_rxtx.c **** 		}
2214:bluetooth_rxtx.c **** 	}
2215:bluetooth_rxtx.c **** }
 8412              		.loc 1 2215 0
 8413 0258 2837     		adds	r7, r7, #40
 8414              		.cfi_def_cfa_offset 8
 8415 025a BD46     		mov	sp, r7
 8416              		.cfi_def_cfa_register 13
 8417              		@ sp needed
 8418 025c 80BD     		pop	{r7, pc}
 8419              	.L424:
 8420 025e 00BF     		.align	2
 8421              	.L423:
 8422 0260 00000000 		.word	le
 8423 0264 00000000 		.word	clkn
 8424 0268 00000000 		.word	jam_mode
 8425 026c 00000000 		.word	le_jam_count
 8426 0270 34000000 		.word	le+52
 8427 0274 00000000 		.word	do_hop
 8428              		.cfi_endproc
 8429              	.LFE37:
 8431              		.section	.text.bt_follow_le,"ax",%progbits
 8432              		.align	2
 8433              		.global	bt_follow_le
 8434              		.thumb
 8435              		.thumb_func
 8437              	bt_follow_le:
 8438              	.LFB38:
2216:bluetooth_rxtx.c **** 
2217:bluetooth_rxtx.c **** void bt_follow_le() {
 8439              		.loc 1 2217 0
 8440              		.cfi_startproc
 8441              		@ args = 0, pretend = 0, frame = 0
 8442              		@ frame_needed = 1, uses_anonymous_args = 0
 8443 0000 80B5     		push	{r7, lr}
 8444              		.cfi_def_cfa_offset 8
 8445              		.cfi_offset 7, -8
ARM GAS  /tmp/ccvLzxWr.s 			page 187


 8446              		.cfi_offset 14, -4
 8447 0002 00AF     		add	r7, sp, #0
 8448              		.cfi_def_cfa_register 7
2218:bluetooth_rxtx.c **** 	reset_le();
 8449              		.loc 1 2218 0
 8450 0004 FFF7FEFF 		bl	reset_le
2219:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 8451              		.loc 1 2219 0
 8452 0008 044B     		ldr	r3, .L426
 8453 000a 054A     		ldr	r2, .L426+4
 8454 000c 1A60     		str	r2, [r3]
2220:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 8455              		.loc 1 2220 0
 8456 000e 0920     		movs	r0, #9
 8457 0010 FFF7FEFF 		bl	bt_le_sync
2221:bluetooth_rxtx.c **** 
2222:bluetooth_rxtx.c **** 	/* old non-sync mode
2223:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2224:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2225:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2226:bluetooth_rxtx.c **** 	*/
2227:bluetooth_rxtx.c **** 
2228:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 8458              		.loc 1 2228 0
 8459 0014 034B     		ldr	r3, .L426+8
 8460 0016 0022     		movs	r2, #0
 8461 0018 1A70     		strb	r2, [r3]
2229:bluetooth_rxtx.c **** }
 8462              		.loc 1 2229 0
 8463 001a 80BD     		pop	{r7, pc}
 8464              	.L427:
 8465              		.align	2
 8466              	.L426:
 8467 001c 00000000 		.word	packet_cb
 8468 0020 00000000 		.word	connection_follow_cb
 8469 0024 00000000 		.word	mode
 8470              		.cfi_endproc
 8471              	.LFE38:
 8473              		.section	.text.le_promisc_state,"ax",%progbits
 8474              		.align	2
 8475              		.global	le_promisc_state
 8476              		.thumb
 8477              		.thumb_func
 8479              	le_promisc_state:
 8480              	.LFB39:
2230:bluetooth_rxtx.c **** 
2231:bluetooth_rxtx.c **** // issue state change message
2232:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 8481              		.loc 1 2232 0
 8482              		.cfi_startproc
 8483              		@ args = 0, pretend = 0, frame = 72
 8484              		@ frame_needed = 1, uses_anonymous_args = 0
 8485 0000 80B5     		push	{r7, lr}
 8486              		.cfi_def_cfa_offset 8
 8487              		.cfi_offset 7, -8
 8488              		.cfi_offset 14, -4
 8489 0002 92B0     		sub	sp, sp, #72
ARM GAS  /tmp/ccvLzxWr.s 			page 188


 8490              		.cfi_def_cfa_offset 80
 8491 0004 00AF     		add	r7, sp, #0
 8492              		.cfi_def_cfa_register 7
 8493 0006 0346     		mov	r3, r0
 8494 0008 B960     		str	r1, [r7, #8]
 8495 000a 7A60     		str	r2, [r7, #4]
 8496 000c FB73     		strb	r3, [r7, #15]
2233:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 8497              		.loc 1 2233 0
 8498 000e 07F11403 		add	r3, r7, #20
 8499 0012 0022     		movs	r2, #0
 8500 0014 1A60     		str	r2, [r3]
 8501 0016 0433     		adds	r3, r3, #4
 8502 0018 0022     		movs	r2, #0
 8503 001a 1A60     		str	r2, [r3]
 8504 001c 0433     		adds	r3, r3, #4
 8505 001e 0022     		movs	r2, #0
 8506 0020 1A60     		str	r2, [r3]
 8507 0022 0433     		adds	r3, r3, #4
 8508 0024 0022     		movs	r2, #0
 8509 0026 1A60     		str	r2, [r3]
 8510 0028 0433     		adds	r3, r3, #4
 8511 002a 0022     		movs	r2, #0
 8512 002c 1A60     		str	r2, [r3]
 8513 002e 0433     		adds	r3, r3, #4
 8514 0030 0022     		movs	r2, #0
 8515 0032 1A60     		str	r2, [r3]
 8516 0034 0433     		adds	r3, r3, #4
 8517 0036 0022     		movs	r2, #0
 8518 0038 1A60     		str	r2, [r3]
 8519 003a 0433     		adds	r3, r3, #4
 8520 003c 0022     		movs	r2, #0
 8521 003e 1A60     		str	r2, [r3]
 8522 0040 0433     		adds	r3, r3, #4
 8523 0042 0022     		movs	r2, #0
 8524 0044 1A60     		str	r2, [r3]
 8525 0046 0433     		adds	r3, r3, #4
 8526 0048 0022     		movs	r2, #0
 8527 004a 1A60     		str	r2, [r3]
 8528 004c 0433     		adds	r3, r3, #4
 8529 004e 0022     		movs	r2, #0
 8530 0050 1A60     		str	r2, [r3]
 8531 0052 0433     		adds	r3, r3, #4
 8532 0054 0022     		movs	r2, #0
 8533 0056 1A60     		str	r2, [r3]
 8534 0058 0433     		adds	r3, r3, #4
 8535 005a 0022     		movs	r2, #0
 8536 005c 1A80     		strh	r2, [r3]	@ movhi
 8537 005e 0233     		adds	r3, r3, #2
2234:bluetooth_rxtx.c **** 	if (len > 49)
 8538              		.loc 1 2234 0
 8539 0060 7B68     		ldr	r3, [r7, #4]
 8540 0062 312B     		cmp	r3, #49
 8541 0064 01D9     		bls	.L429
2235:bluetooth_rxtx.c **** 		len = 49;
 8542              		.loc 1 2235 0
 8543 0066 3123     		movs	r3, #49
ARM GAS  /tmp/ccvLzxWr.s 			page 189


 8544 0068 7B60     		str	r3, [r7, #4]
 8545              	.L429:
2236:bluetooth_rxtx.c **** 
2237:bluetooth_rxtx.c **** 	buf[0] = type;
 8546              		.loc 1 2237 0
 8547 006a FB7B     		ldrb	r3, [r7, #15]
 8548 006c 3B75     		strb	r3, [r7, #20]
2238:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 8549              		.loc 1 2238 0
 8550 006e 07F11403 		add	r3, r7, #20
 8551 0072 0133     		adds	r3, r3, #1
 8552 0074 1846     		mov	r0, r3
 8553 0076 B968     		ldr	r1, [r7, #8]
 8554 0078 7A68     		ldr	r2, [r7, #4]
 8555 007a FFF7FEFF 		bl	memcpy
2239:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 8556              		.loc 1 2239 0
 8557 007e 07F11403 		add	r3, r7, #20
 8558 0082 0520     		movs	r0, #5
 8559 0084 1946     		mov	r1, r3
 8560 0086 FFF7FEFF 		bl	enqueue
2240:bluetooth_rxtx.c **** }
 8561              		.loc 1 2240 0
 8562 008a 4837     		adds	r7, r7, #72
 8563              		.cfi_def_cfa_offset 8
 8564 008c BD46     		mov	sp, r7
 8565              		.cfi_def_cfa_register 13
 8566              		@ sp needed
 8567 008e 80BD     		pop	{r7, pc}
 8568              		.cfi_endproc
 8569              	.LFE39:
 8571              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 8572              		.align	2
 8573              		.global	promisc_recover_hop_increment
 8574              		.thumb
 8575              		.thumb_func
 8577              	promisc_recover_hop_increment:
 8578              	.LFB40:
2241:bluetooth_rxtx.c **** 
2242:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2243:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2244:bluetooth_rxtx.c **** 
2245:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 8579              		.loc 1 2245 0
 8580              		.cfi_startproc
 8581              		@ args = 0, pretend = 0, frame = 16
 8582              		@ frame_needed = 1, uses_anonymous_args = 0
 8583 0000 80B5     		push	{r7, lr}
 8584              		.cfi_def_cfa_offset 8
 8585              		.cfi_offset 7, -8
 8586              		.cfi_offset 14, -4
 8587 0002 84B0     		sub	sp, sp, #16
 8588              		.cfi_def_cfa_offset 24
 8589 0004 00AF     		add	r7, sp, #0
 8590              		.cfi_def_cfa_register 7
 8591 0006 7860     		str	r0, [r7, #4]
2246:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
ARM GAS  /tmp/ccvLzxWr.s 			page 190


2247:bluetooth_rxtx.c **** 	if (channel == 2404) {
 8592              		.loc 1 2247 0
 8593 0008 554B     		ldr	r3, .L437
 8594 000a 1B88     		ldrh	r3, [r3]	@ movhi
 8595 000c 9BB2     		uxth	r3, r3
 8596 000e 40F66412 		movw	r2, #2404
 8597 0012 9342     		cmp	r3, r2
 8598 0014 14D1     		bne	.L431
2248:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 8599              		.loc 1 2248 0
 8600 0016 534B     		ldr	r3, .L437+4
 8601 0018 1B68     		ldr	r3, [r3]
 8602 001a C3F31303 		ubfx	r3, r3, #0, #20
 8603 001e 40F63542 		movw	r2, #3125
 8604 0022 02FB03F2 		mul	r2, r2, r3
 8605 0026 504B     		ldr	r3, .L437+8
 8606 0028 1B68     		ldr	r3, [r3]
 8607 002a 1344     		add	r3, r3, r2
 8608 002c 4F4A     		ldr	r2, .L437+12
 8609 002e 1360     		str	r3, [r2]
2249:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 8610              		.loc 1 2249 0
 8611 0030 4F4B     		ldr	r3, .L437+16
 8612 0032 40F66612 		movw	r2, #2406
 8613 0036 1A80     		strh	r2, [r3]	@ movhi
2250:bluetooth_rxtx.c **** 		do_hop = 1;
 8614              		.loc 1 2250 0
 8615 0038 4E4B     		ldr	r3, .L437+20
 8616 003a 0122     		movs	r2, #1
 8617 003c 1A70     		strb	r2, [r3]
 8618 003e 8BE0     		b	.L430
 8619              	.L431:
2251:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 8620              		.loc 1 2251 0
 8621 0040 474B     		ldr	r3, .L437
 8622 0042 1B88     		ldrh	r3, [r3]	@ movhi
 8623 0044 9BB2     		uxth	r3, r3
 8624 0046 40F66612 		movw	r2, #2406
 8625 004a 9342     		cmp	r3, r2
 8626 004c 7DD1     		bne	.L433
 8627              	.LBB15:
2252:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 8628              		.loc 1 2252 0
 8629 004e 454B     		ldr	r3, .L437+4
 8630 0050 1B68     		ldr	r3, [r3]
 8631 0052 C3F31303 		ubfx	r3, r3, #0, #20
 8632 0056 40F63542 		movw	r2, #3125
 8633 005a 02FB03F2 		mul	r2, r2, r3
 8634 005e 424B     		ldr	r3, .L437+8
 8635 0060 1B68     		ldr	r3, [r3]
 8636 0062 1344     		add	r3, r3, r2
 8637 0064 FB60     		str	r3, [r7, #12]
2253:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 8638              		.loc 1 2253 0
 8639 0066 414B     		ldr	r3, .L437+12
 8640 0068 1B68     		ldr	r3, [r3]
 8641 006a FA68     		ldr	r2, [r7, #12]
ARM GAS  /tmp/ccvLzxWr.s 			page 191


 8642 006c 9A42     		cmp	r2, r3
 8643 006e 05D2     		bcs	.L434
2254:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 8644              		.loc 1 2254 0
 8645 0070 FB68     		ldr	r3, [r7, #12]
 8646 0072 03F14343 		add	r3, r3, #-1023410176
 8647 0076 03F5A003 		add	r3, r3, #5242880
 8648 007a FB60     		str	r3, [r7, #12]
 8649              	.L434:
2255:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2256:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 8650              		.loc 1 2256 0
 8651 007c 3B4B     		ldr	r3, .L437+12
 8652 007e 1B68     		ldr	r3, [r3]
 8653 0080 FA68     		ldr	r2, [r7, #12]
 8654 0082 D21A     		subs	r2, r2, r3
 8655 0084 3C4B     		ldr	r3, .L437+24
 8656 0086 DB8B     		ldrh	r3, [r3, #30]
 8657 0088 1946     		mov	r1, r3
 8658 008a 43F2D403 		movw	r3, #12500
 8659 008e 03FB01F3 		mul	r3, r3, r1
 8660 0092 D90F     		lsrs	r1, r3, #31
 8661 0094 0B44     		add	r3, r3, r1
 8662 0096 5B10     		asrs	r3, r3, #1
 8663 0098 1344     		add	r3, r3, r2
 8664 009a 374A     		ldr	r2, .L437+24
 8665 009c D28B     		ldrh	r2, [r2, #30]
 8666 009e 1146     		mov	r1, r2
 8667 00a0 43F2D402 		movw	r2, #12500
 8668 00a4 02FB01F2 		mul	r2, r2, r1
 8669 00a8 B3FBF2F3 		udiv	r3, r3, r2
 8670 00ac BB60     		str	r3, [r7, #8]
2257:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2258:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 8671              		.loc 1 2258 0
 8672 00ae BB68     		ldr	r3, [r7, #8]
 8673 00b0 242B     		cmp	r3, #36
 8674 00b2 42D8     		bhi	.L435
2259:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2260:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 8675              		.loc 1 2260 0
 8676 00b4 314A     		ldr	r2, .L437+28
 8677 00b6 BB68     		ldr	r3, [r7, #8]
 8678 00b8 1344     		add	r3, r3, r2
 8679 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8680 00bc 2E4B     		ldr	r3, .L437+24
 8681 00be 9A75     		strb	r2, [r3, #22]
2261:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 8682              		.loc 1 2261 0
 8683 00c0 2D4B     		ldr	r3, .L437+24
 8684 00c2 DB8B     		ldrh	r3, [r3, #30]
 8685 00c4 5B08     		lsrs	r3, r3, #1
 8686 00c6 9AB2     		uxth	r2, r3
 8687 00c8 2B4B     		ldr	r3, .L437+24
 8688 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2262:bluetooth_rxtx.c **** 			le.conn_count = 0;
 8689              		.loc 1 2262 0
ARM GAS  /tmp/ccvLzxWr.s 			page 192


 8690 00cc 2A4B     		ldr	r3, .L437+24
 8691 00ce 0022     		movs	r2, #0
 8692 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2263:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 8693              		.loc 1 2263 0
 8694 00d2 294B     		ldr	r3, .L437+24
 8695 00d4 0022     		movs	r2, #0
 8696 00d6 9A61     		str	r2, [r3, #24]
2264:bluetooth_rxtx.c **** 			do_hop = 0;
 8697              		.loc 1 2264 0
 8698 00d8 264B     		ldr	r3, .L437+20
 8699 00da 0022     		movs	r2, #0
 8700 00dc 1A70     		strb	r2, [r3]
2265:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2266:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 8701              		.loc 1 2266 0
 8702 00de 264B     		ldr	r3, .L437+24
 8703 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 8704 00e2 5A1C     		adds	r2, r3, #1
 8705 00e4 264B     		ldr	r3, .L437+32
 8706 00e6 82FB0301 		smull	r0, r1, r2, r3
 8707 00ea 5318     		adds	r3, r2, r1
 8708 00ec 5911     		asrs	r1, r3, #5
 8709 00ee D317     		asrs	r3, r2, #31
 8710 00f0 C91A     		subs	r1, r1, r3
 8711 00f2 0B46     		mov	r3, r1
 8712 00f4 DB00     		lsls	r3, r3, #3
 8713 00f6 0B44     		add	r3, r3, r1
 8714 00f8 9B00     		lsls	r3, r3, #2
 8715 00fa 0B44     		add	r3, r3, r1
 8716 00fc D11A     		subs	r1, r2, r3
 8717 00fe CAB2     		uxtb	r2, r1
 8718 0100 1D4B     		ldr	r3, .L437+24
 8719 0102 5A75     		strb	r2, [r3, #21]
2267:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 8720              		.loc 1 2267 0
 8721 0104 1C4B     		ldr	r3, .L437+24
 8722 0106 0322     		movs	r2, #3
 8723 0108 1A75     		strb	r2, [r3, #20]
2268:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 8724              		.loc 1 2268 0
 8725 010a 1B4B     		ldr	r3, .L437+24
 8726 010c 0022     		movs	r2, #0
 8727 010e 1A61     		str	r2, [r3, #16]
2269:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 8728              		.loc 1 2269 0
 8729 0110 1C4B     		ldr	r3, .L437+36
 8730 0112 0322     		movs	r2, #3
 8731 0114 1A70     		strb	r2, [r3]
2270:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 8732              		.loc 1 2270 0
 8733 0116 1C4B     		ldr	r3, .L437+40
 8734 0118 1C4A     		ldr	r2, .L437+44
 8735 011a 1A60     		str	r2, [r3]
2271:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 8736              		.loc 1 2271 0
 8737 011c 0320     		movs	r0, #3
ARM GAS  /tmp/ccvLzxWr.s 			page 193


 8738 011e 1C49     		ldr	r1, .L437+48
 8739 0120 0122     		movs	r2, #1
 8740 0122 FFF7FEFF 		bl	le_promisc_state
2272:bluetooth_rxtx.c **** 
2273:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 8741              		.loc 1 2273 0
 8742 0126 1B4B     		ldr	r3, .L437+52
 8743 0128 1B78     		ldrb	r3, [r3]
 8744 012a DBB2     		uxtb	r3, r3
 8745 012c 002B     		cmp	r3, #0
 8746 012e 03D0     		beq	.L436
2274:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 8747              		.loc 1 2274 0
 8748 0130 194B     		ldr	r3, .L437+56
 8749 0132 2822     		movs	r2, #40
 8750 0134 1A60     		str	r2, [r3]
2275:bluetooth_rxtx.c **** 
2276:bluetooth_rxtx.c **** 			return;
 8751              		.loc 1 2276 0
 8752 0136 0FE0     		b	.L430
 8753              	.L436:
 8754 0138 0EE0     		b	.L430
 8755              	.L435:
2277:bluetooth_rxtx.c **** 		}
2278:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8756              		.loc 1 2278 0
 8757 013a 0D4B     		ldr	r3, .L437+16
 8758 013c 40F66412 		movw	r2, #2404
 8759 0140 1A80     		strh	r2, [r3]	@ movhi
2279:bluetooth_rxtx.c **** 		do_hop = 1;
 8760              		.loc 1 2279 0
 8761 0142 0C4B     		ldr	r3, .L437+20
 8762 0144 0122     		movs	r2, #1
 8763 0146 1A70     		strb	r2, [r3]
 8764              	.LBE15:
 8765 0148 06E0     		b	.L430
 8766              	.L433:
2280:bluetooth_rxtx.c **** 	}
2281:bluetooth_rxtx.c **** 	else {
2282:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8767              		.loc 1 2282 0
 8768 014a 094B     		ldr	r3, .L437+16
 8769 014c 40F66412 		movw	r2, #2404
 8770 0150 1A80     		strh	r2, [r3]	@ movhi
2283:bluetooth_rxtx.c **** 		do_hop = 1;
 8771              		.loc 1 2283 0
 8772 0152 084B     		ldr	r3, .L437+20
 8773 0154 0122     		movs	r2, #1
 8774 0156 1A70     		strb	r2, [r3]
 8775              	.L430:
2284:bluetooth_rxtx.c **** 	}
2285:bluetooth_rxtx.c **** }
 8776              		.loc 1 2285 0
 8777 0158 1037     		adds	r7, r7, #16
 8778              		.cfi_def_cfa_offset 8
 8779 015a BD46     		mov	sp, r7
 8780              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccvLzxWr.s 			page 194


 8781              		@ sp needed
 8782 015c 80BD     		pop	{r7, pc}
 8783              	.L438:
 8784 015e 00BF     		.align	2
 8785              	.L437:
 8786 0160 00000000 		.word	channel
 8787 0164 00000000 		.word	clkn
 8788 0168 08400040 		.word	1073758216
 8789 016c D8000000 		.word	first_ts.4814
 8790 0170 00000000 		.word	hop_direct_channel
 8791 0174 00000000 		.word	do_hop
 8792 0178 00000000 		.word	le
 8793 017c D4000000 		.word	hop_interval_lut
 8794 0180 A7C867DD 		.word	-580400985
 8795 0184 00000000 		.word	hop_mode
 8796 0188 00000000 		.word	packet_cb
 8797 018c 00000000 		.word	connection_follow_cb
 8798 0190 16000000 		.word	le+22
 8799 0194 00000000 		.word	jam_mode
 8800 0198 00000000 		.word	le_jam_count
 8801              		.cfi_endproc
 8802              	.LFE40:
 8804              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 8805              		.align	2
 8806              		.global	promisc_recover_hop_interval
 8807              		.thumb
 8808              		.thumb_func
 8810              	promisc_recover_hop_interval:
 8811              	.LFB41:
2286:bluetooth_rxtx.c **** 
2287:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 8812              		.loc 1 2287 0
 8813              		.cfi_startproc
 8814              		@ args = 0, pretend = 0, frame = 24
 8815              		@ frame_needed = 1, uses_anonymous_args = 0
 8816 0000 80B5     		push	{r7, lr}
 8817              		.cfi_def_cfa_offset 8
 8818              		.cfi_offset 7, -8
 8819              		.cfi_offset 14, -4
 8820 0002 86B0     		sub	sp, sp, #24
 8821              		.cfi_def_cfa_offset 32
 8822 0004 00AF     		add	r7, sp, #0
 8823              		.cfi_def_cfa_register 7
 8824 0006 7860     		str	r0, [r7, #4]
2288:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2289:bluetooth_rxtx.c **** 
2290:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 8825              		.loc 1 2290 0
 8826 0008 334B     		ldr	r3, .L447
 8827 000a 1B68     		ldr	r3, [r3]
 8828 000c C3F31303 		ubfx	r3, r3, #0, #20
 8829 0010 40F63542 		movw	r2, #3125
 8830 0014 02FB03F2 		mul	r2, r2, r3
 8831 0018 304B     		ldr	r3, .L447+4
 8832 001a 1B68     		ldr	r3, [r3]
 8833 001c 1344     		add	r3, r3, r2
 8834 001e 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccvLzxWr.s 			page 195


2291:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 8835              		.loc 1 2291 0
 8836 0020 2F4B     		ldr	r3, .L447+8
 8837 0022 1B68     		ldr	r3, [r3]
 8838 0024 7A69     		ldr	r2, [r7, #20]
 8839 0026 9A42     		cmp	r2, r3
 8840 0028 03D2     		bcs	.L440
2292:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 8841              		.loc 1 2292 0
 8842 002a 7A69     		ldr	r2, [r7, #20]
 8843 002c 2D4B     		ldr	r3, .L447+12
 8844 002e 1344     		add	r3, r3, r2
 8845 0030 7B61     		str	r3, [r7, #20]
 8846              	.L440:
2293:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 8847              		.loc 1 2293 0
 8848 0032 2B4B     		ldr	r3, .L447+8
 8849 0034 1B68     		ldr	r3, [r3]
 8850 0036 7A69     		ldr	r2, [r7, #20]
 8851 0038 D31A     		subs	r3, r2, r3
 8852 003a 3B61     		str	r3, [r7, #16]
2294:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2295:bluetooth_rxtx.c **** 
2296:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2297:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 8853              		.loc 1 2297 0
 8854 003c 3B69     		ldr	r3, [r7, #16]
 8855 003e 46F2A712 		movw	r2, #24999
 8856 0042 9342     		cmp	r3, r2
 8857 0044 00D8     		bhi	.L441
2298:bluetooth_rxtx.c **** 		return;
 8858              		.loc 1 2298 0
 8859 0046 43E0     		b	.L439
 8860              	.L441:
2299:bluetooth_rxtx.c **** 
2300:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 8861              		.loc 1 2300 0
 8862 0048 274B     		ldr	r3, .L447+16
 8863 004a D3F80021 		ldr	r2, [r3, #256]
 8864 004e 3B69     		ldr	r3, [r7, #16]
 8865 0050 9A42     		cmp	r2, r3
 8866 0052 03D9     		bls	.L443
2301:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 8867              		.loc 1 2301 0
 8868 0054 244A     		ldr	r2, .L447+16
 8869 0056 3B69     		ldr	r3, [r7, #16]
 8870 0058 C2F80031 		str	r3, [r2, #256]
 8871              	.L443:
2302:bluetooth_rxtx.c **** 
2303:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 8872              		.loc 1 2303 0
 8873 005c 224B     		ldr	r3, .L447+16
 8874 005e D3F80031 		ldr	r3, [r3, #256]
 8875 0062 03F56133 		add	r3, r3, #230400
 8876 0066 03F25233 		addw	r3, r3, #850
 8877 006a 204A     		ldr	r2, .L447+20
 8878 006c A2FB0323 		umull	r2, r3, r2, r3
ARM GAS  /tmp/ccvLzxWr.s 			page 196


 8879 0070 9B0C     		lsrs	r3, r3, #18
 8880 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2304:bluetooth_rxtx.c **** 
2305:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 8881              		.loc 1 2305 0
 8882 0074 1E4B     		ldr	r3, .L447+24
 8883 0076 DB8B     		ldrh	r3, [r3, #30]
 8884 0078 FA89     		ldrh	r2, [r7, #14]
 8885 007a 9A42     		cmp	r2, r3
 8886 007c 1ED1     		bne	.L444
2306:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2307:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 8887              		.loc 1 2307 0
 8888 007e 1A4B     		ldr	r3, .L447+16
 8889 0080 D3F80431 		ldr	r3, [r3, #260]
 8890 0084 0133     		adds	r3, r3, #1
 8891 0086 184A     		ldr	r2, .L447+16
 8892 0088 C2F80431 		str	r3, [r2, #260]
2308:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 8893              		.loc 1 2308 0
 8894 008c 164B     		ldr	r3, .L447+16
 8895 008e D3F80431 		ldr	r3, [r3, #260]
 8896 0092 052B     		cmp	r3, #5
 8897 0094 19D1     		bne	.L446
2309:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 8898              		.loc 1 2309 0
 8899 0096 174B     		ldr	r3, .L447+28
 8900 0098 174A     		ldr	r2, .L447+32
 8901 009a 1A60     		str	r2, [r3]
2310:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 8902              		.loc 1 2310 0
 8903 009c 174B     		ldr	r3, .L447+36
 8904 009e 40F66412 		movw	r2, #2404
 8905 00a2 1A80     		strh	r2, [r3]	@ movhi
2311:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 8906              		.loc 1 2311 0
 8907 00a4 164B     		ldr	r3, .L447+40
 8908 00a6 0422     		movs	r2, #4
 8909 00a8 1A70     		strb	r2, [r3]
2312:bluetooth_rxtx.c **** 			do_hop = 1;
 8910              		.loc 1 2312 0
 8911 00aa 164B     		ldr	r3, .L447+44
 8912 00ac 0122     		movs	r2, #1
 8913 00ae 1A70     		strb	r2, [r3]
2313:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 8914              		.loc 1 2313 0
 8915 00b0 0220     		movs	r0, #2
 8916 00b2 1549     		ldr	r1, .L447+48
 8917 00b4 0222     		movs	r2, #2
 8918 00b6 FFF7FEFF 		bl	le_promisc_state
 8919 00ba 06E0     		b	.L446
 8920              	.L444:
2314:bluetooth_rxtx.c **** 		}
2315:bluetooth_rxtx.c **** 	} else {
2316:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 8921              		.loc 1 2316 0
 8922 00bc 0C4A     		ldr	r2, .L447+24
ARM GAS  /tmp/ccvLzxWr.s 			page 197


 8923 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 8924 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2317:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 8925              		.loc 1 2317 0
 8926 00c2 094B     		ldr	r3, .L447+16
 8927 00c4 0022     		movs	r2, #0
 8928 00c6 C3F80421 		str	r2, [r3, #260]
 8929              	.L446:
2318:bluetooth_rxtx.c **** 	}
2319:bluetooth_rxtx.c **** 
2320:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 8930              		.loc 1 2320 0
 8931 00ca 054A     		ldr	r2, .L447+8
 8932 00cc 7B69     		ldr	r3, [r7, #20]
 8933 00ce 1360     		str	r3, [r2]
 8934              	.L439:
2321:bluetooth_rxtx.c **** }
 8935              		.loc 1 2321 0
 8936 00d0 1837     		adds	r7, r7, #24
 8937              		.cfi_def_cfa_offset 8
 8938 00d2 BD46     		mov	sp, r7
 8939              		.cfi_def_cfa_register 13
 8940              		@ sp needed
 8941 00d4 80BD     		pop	{r7, pc}
 8942              	.L448:
 8943 00d6 00BF     		.align	2
 8944              	.L447:
 8945 00d8 00000000 		.word	clkn
 8946 00dc 08400040 		.word	1073758216
 8947 00e0 DC000000 		.word	prev_clk.4820
 8948 00e4 C0ABC6C2 		.word	-1027167296
 8949 00e8 00000000 		.word	le_promisc
 8950 00ec C1A91991 		.word	-1860589119
 8951 00f0 00000000 		.word	le
 8952 00f4 00000000 		.word	packet_cb
 8953 00f8 00000000 		.word	promisc_recover_hop_increment
 8954 00fc 00000000 		.word	hop_direct_channel
 8955 0100 00000000 		.word	hop_mode
 8956 0104 00000000 		.word	do_hop
 8957 0108 1E000000 		.word	le+30
 8958              		.cfi_endproc
 8959              	.LFE41:
 8961              		.section	.text.promisc_follow_cb,"ax",%progbits
 8962              		.align	2
 8963              		.global	promisc_follow_cb
 8964              		.thumb
 8965              		.thumb_func
 8967              	promisc_follow_cb:
 8968              	.LFB42:
2322:bluetooth_rxtx.c **** 
2323:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 8969              		.loc 1 2323 0
 8970              		.cfi_startproc
 8971              		@ args = 0, pretend = 0, frame = 16
 8972              		@ frame_needed = 1, uses_anonymous_args = 0
 8973 0000 80B5     		push	{r7, lr}
 8974              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccvLzxWr.s 			page 198


 8975              		.cfi_offset 7, -8
 8976              		.cfi_offset 14, -4
 8977 0002 84B0     		sub	sp, sp, #16
 8978              		.cfi_def_cfa_offset 24
 8979 0004 00AF     		add	r7, sp, #0
 8980              		.cfi_def_cfa_register 7
 8981 0006 7860     		str	r0, [r7, #4]
2324:bluetooth_rxtx.c **** 	int i;
2325:bluetooth_rxtx.c **** 
2326:bluetooth_rxtx.c **** 	// get the CRCInit
2327:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 8982              		.loc 1 2327 0
 8983 0008 284B     		ldr	r3, .L453
 8984 000a 1B69     		ldr	r3, [r3, #16]
 8985 000c 002B     		cmp	r3, #0
 8986 000e 49D1     		bne	.L449
 8987              		.loc 1 2327 0 is_stmt 0 discriminator 1
 8988 0010 7B68     		ldr	r3, [r7, #4]
 8989 0012 0433     		adds	r3, r3, #4
 8990 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8991 0016 012B     		cmp	r3, #1
 8992 0018 44D1     		bne	.L449
 8993              		.loc 1 2327 0 discriminator 2
 8994 001a 7B68     		ldr	r3, [r7, #4]
 8995 001c 0533     		adds	r3, r3, #5
 8996 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8997 0020 002B     		cmp	r3, #0
 8998 0022 3FD1     		bne	.L449
 8999              	.LBB16:
2328:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 9000              		.loc 1 2328 0 is_stmt 1
 9001 0024 7B68     		ldr	r3, [r7, #4]
 9002 0026 0833     		adds	r3, r3, #8
 9003 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9004 002a 1A04     		lsls	r2, r3, #16
 9005 002c 7B68     		ldr	r3, [r7, #4]
 9006 002e 0733     		adds	r3, r3, #7
 9007 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9008 0032 1B02     		lsls	r3, r3, #8
 9009 0034 1343     		orrs	r3, r3, r2
 9010 0036 7A68     		ldr	r2, [r7, #4]
 9011 0038 0632     		adds	r2, r2, #6
 9012 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9013 003c 1343     		orrs	r3, r3, r2
 9014 003e BB60     		str	r3, [r7, #8]
2329:bluetooth_rxtx.c **** 
2330:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 9015              		.loc 1 2330 0
 9016 0040 7B68     		ldr	r3, [r7, #4]
 9017 0042 0433     		adds	r3, r3, #4
 9018 0044 B868     		ldr	r0, [r7, #8]
 9019 0046 1946     		mov	r1, r3
 9020 0048 0222     		movs	r2, #2
 9021 004a FFF7FEFF 		bl	btle_reverse_crc
 9022 004e 0246     		mov	r2, r0
 9023 0050 164B     		ldr	r3, .L453
 9024 0052 9A60     		str	r2, [r3, #8]
ARM GAS  /tmp/ccvLzxWr.s 			page 199


2331:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 9025              		.loc 1 2331 0
 9026 0054 154B     		ldr	r3, .L453
 9027 0056 0022     		movs	r2, #0
 9028 0058 DA60     		str	r2, [r3, #12]
2332:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9029              		.loc 1 2332 0
 9030 005a 0023     		movs	r3, #0
 9031 005c FB60     		str	r3, [r7, #12]
 9032 005e 13E0     		b	.L451
 9033              	.L452:
2333:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 9034              		.loc 1 2333 0 discriminator 3
 9035 0060 124B     		ldr	r3, .L453
 9036 0062 DA68     		ldr	r2, [r3, #12]
 9037 0064 114B     		ldr	r3, .L453
 9038 0066 9968     		ldr	r1, [r3, #8]
 9039 0068 FB68     		ldr	r3, [r7, #12]
 9040 006a 21FA03F3 		lsr	r3, r1, r3
 9041 006e 03F00101 		and	r1, r3, #1
 9042 0072 FB68     		ldr	r3, [r7, #12]
 9043 0074 C3F11703 		rsb	r3, r3, #23
 9044 0078 01FA03F3 		lsl	r3, r1, r3
 9045 007c 1343     		orrs	r3, r3, r2
 9046 007e 0B4A     		ldr	r2, .L453
 9047 0080 D360     		str	r3, [r2, #12]
2332:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9048              		.loc 1 2332 0 discriminator 3
 9049 0082 FB68     		ldr	r3, [r7, #12]
 9050 0084 0133     		adds	r3, r3, #1
 9051 0086 FB60     		str	r3, [r7, #12]
 9052              	.L451:
2332:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9053              		.loc 1 2332 0 is_stmt 0 discriminator 1
 9054 0088 FB68     		ldr	r3, [r7, #12]
 9055 008a 172B     		cmp	r3, #23
 9056 008c E8DD     		ble	.L452
2334:bluetooth_rxtx.c **** 
2335:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 9057              		.loc 1 2335 0 is_stmt 1
 9058 008e 074B     		ldr	r3, .L453
 9059 0090 0122     		movs	r2, #1
 9060 0092 1A61     		str	r2, [r3, #16]
2336:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 9061              		.loc 1 2336 0
 9062 0094 064B     		ldr	r3, .L453+4
 9063 0096 074A     		ldr	r2, .L453+8
 9064 0098 1A60     		str	r2, [r3]
2337:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 9065              		.loc 1 2337 0
 9066 009a 0120     		movs	r0, #1
 9067 009c 0649     		ldr	r1, .L453+12
 9068 009e 0322     		movs	r2, #3
 9069 00a0 FFF7FEFF 		bl	le_promisc_state
 9070              	.L449:
 9071              	.LBE16:
2338:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccvLzxWr.s 			page 200


2339:bluetooth_rxtx.c **** }
 9072              		.loc 1 2339 0
 9073 00a4 1037     		adds	r7, r7, #16
 9074              		.cfi_def_cfa_offset 8
 9075 00a6 BD46     		mov	sp, r7
 9076              		.cfi_def_cfa_register 13
 9077              		@ sp needed
 9078 00a8 80BD     		pop	{r7, pc}
 9079              	.L454:
 9080 00aa 00BF     		.align	2
 9081              	.L453:
 9082 00ac 00000000 		.word	le
 9083 00b0 00000000 		.word	packet_cb
 9084 00b4 00000000 		.word	promisc_recover_hop_interval
 9085 00b8 08000000 		.word	le+8
 9086              		.cfi_endproc
 9087              	.LFE42:
 9089              		.section	.text.see_aa,"ax",%progbits
 9090              		.align	2
 9091              		.global	see_aa
 9092              		.thumb
 9093              		.thumb_func
 9095              	see_aa:
 9096              	.LFB43:
2340:bluetooth_rxtx.c **** 
2341:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2342:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 9097              		.loc 1 2342 0
 9098              		.cfi_startproc
 9099              		@ args = 0, pretend = 0, frame = 24
 9100              		@ frame_needed = 1, uses_anonymous_args = 0
 9101              		@ link register save eliminated.
 9102 0000 80B4     		push	{r7}
 9103              		.cfi_def_cfa_offset 4
 9104              		.cfi_offset 7, -4
 9105 0002 87B0     		sub	sp, sp, #28
 9106              		.cfi_def_cfa_offset 32
 9107 0004 00AF     		add	r7, sp, #0
 9108              		.cfi_def_cfa_register 7
 9109 0006 7860     		str	r0, [r7, #4]
2343:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 9110              		.loc 1 2343 0
 9111 0008 4FF0FF33 		mov	r3, #-1
 9112 000c 3B61     		str	r3, [r7, #16]
 9113 000e 4FF0FF33 		mov	r3, #-1
 9114 0012 FB60     		str	r3, [r7, #12]
2344:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9115              		.loc 1 2344 0
 9116 0014 0023     		movs	r3, #0
 9117 0016 7B61     		str	r3, [r7, #20]
 9118 0018 15E0     		b	.L456
 9119              	.L459:
2345:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9120              		.loc 1 2345 0
 9121 001a 224A     		ldr	r2, .L464
 9122 001c 7B69     		ldr	r3, [r7, #20]
 9123 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
ARM GAS  /tmp/ccvLzxWr.s 			page 201


 9124 0022 7B68     		ldr	r3, [r7, #4]
 9125 0024 9A42     		cmp	r2, r3
 9126 0026 0BD1     		bne	.L457
2346:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 9127              		.loc 1 2346 0
 9128 0028 1E4A     		ldr	r2, .L464
 9129 002a 7B69     		ldr	r3, [r7, #20]
 9130 002c DB00     		lsls	r3, r3, #3
 9131 002e 1344     		add	r3, r3, r2
 9132 0030 5B68     		ldr	r3, [r3, #4]
 9133 0032 5A1C     		adds	r2, r3, #1
 9134 0034 1B49     		ldr	r1, .L464
 9135 0036 7B69     		ldr	r3, [r7, #20]
 9136 0038 DB00     		lsls	r3, r3, #3
 9137 003a 0B44     		add	r3, r3, r1
 9138 003c 5A60     		str	r2, [r3, #4]
2347:bluetooth_rxtx.c **** 			return;
 9139              		.loc 1 2347 0
 9140 003e 2CE0     		b	.L455
 9141              	.L457:
2344:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9142              		.loc 1 2344 0 discriminator 2
 9143 0040 7B69     		ldr	r3, [r7, #20]
 9144 0042 0133     		adds	r3, r3, #1
 9145 0044 7B61     		str	r3, [r7, #20]
 9146              	.L456:
2344:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9147              		.loc 1 2344 0 is_stmt 0 discriminator 1
 9148 0046 7B69     		ldr	r3, [r7, #20]
 9149 0048 1F2B     		cmp	r3, #31
 9150 004a E6DD     		ble	.L459
2348:bluetooth_rxtx.c **** 		}
2349:bluetooth_rxtx.c **** 
2350:bluetooth_rxtx.c **** 	// evict someone
2351:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9151              		.loc 1 2351 0 is_stmt 1
 9152 004c 0023     		movs	r3, #0
 9153 004e 7B61     		str	r3, [r7, #20]
 9154 0050 15E0     		b	.L460
 9155              	.L463:
2352:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9156              		.loc 1 2352 0
 9157 0052 144A     		ldr	r2, .L464
 9158 0054 7B69     		ldr	r3, [r7, #20]
 9159 0056 DB00     		lsls	r3, r3, #3
 9160 0058 1344     		add	r3, r3, r2
 9161 005a 5A68     		ldr	r2, [r3, #4]
 9162 005c 3B69     		ldr	r3, [r7, #16]
 9163 005e 9A42     		cmp	r2, r3
 9164 0060 02DB     		blt	.L461
 9165              		.loc 1 2352 0 is_stmt 0 discriminator 1
 9166 0062 3B69     		ldr	r3, [r7, #16]
 9167 0064 002B     		cmp	r3, #0
 9168 0066 07DA     		bge	.L462
 9169              	.L461:
2353:bluetooth_rxtx.c **** 			killme = i;
 9170              		.loc 1 2353 0 is_stmt 1
ARM GAS  /tmp/ccvLzxWr.s 			page 202


 9171 0068 7B69     		ldr	r3, [r7, #20]
 9172 006a FB60     		str	r3, [r7, #12]
2354:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 9173              		.loc 1 2354 0
 9174 006c 0D4A     		ldr	r2, .L464
 9175 006e 7B69     		ldr	r3, [r7, #20]
 9176 0070 DB00     		lsls	r3, r3, #3
 9177 0072 1344     		add	r3, r3, r2
 9178 0074 5B68     		ldr	r3, [r3, #4]
 9179 0076 3B61     		str	r3, [r7, #16]
 9180              	.L462:
2351:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9181              		.loc 1 2351 0 discriminator 2
 9182 0078 7B69     		ldr	r3, [r7, #20]
 9183 007a 0133     		adds	r3, r3, #1
 9184 007c 7B61     		str	r3, [r7, #20]
 9185              	.L460:
2351:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9186              		.loc 1 2351 0 is_stmt 0 discriminator 1
 9187 007e 7B69     		ldr	r3, [r7, #20]
 9188 0080 1F2B     		cmp	r3, #31
 9189 0082 E6DD     		ble	.L463
2355:bluetooth_rxtx.c **** 		}
2356:bluetooth_rxtx.c **** 
2357:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 9190              		.loc 1 2357 0 is_stmt 1
 9191 0084 0749     		ldr	r1, .L464
 9192 0086 FB68     		ldr	r3, [r7, #12]
 9193 0088 7A68     		ldr	r2, [r7, #4]
 9194 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2358:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 9195              		.loc 1 2358 0
 9196 008e 054A     		ldr	r2, .L464
 9197 0090 FB68     		ldr	r3, [r7, #12]
 9198 0092 DB00     		lsls	r3, r3, #3
 9199 0094 1344     		add	r3, r3, r2
 9200 0096 0122     		movs	r2, #1
 9201 0098 5A60     		str	r2, [r3, #4]
 9202              	.L455:
2359:bluetooth_rxtx.c **** }
 9203              		.loc 1 2359 0
 9204 009a 1C37     		adds	r7, r7, #28
 9205              		.cfi_def_cfa_offset 4
 9206 009c BD46     		mov	sp, r7
 9207              		.cfi_def_cfa_register 13
 9208              		@ sp needed
 9209 009e 5DF8047B 		ldr	r7, [sp], #4
 9210              		.cfi_restore 7
 9211              		.cfi_def_cfa_offset 0
 9212 00a2 7047     		bx	lr
 9213              	.L465:
 9214              		.align	2
 9215              	.L464:
 9216 00a4 00000000 		.word	le_promisc
 9217              		.cfi_endproc
 9218              	.LFE43:
 9220              		.section	.rodata
ARM GAS  /tmp/ccvLzxWr.s 			page 203


 9221 08cb 00       		.align	2
 9222              	.LC0:
 9223 08cc 01000000 		.word	1
 9224 08d0 01000000 		.word	1
 9225 08d4 01000000 		.word	1
 9226 08d8 01000000 		.word	1
 9227              		.section	.text.cb_le_promisc,"ax",%progbits
 9228              		.align	2
 9229              		.global	cb_le_promisc
 9230              		.thumb
 9231              		.thumb_func
 9233              	cb_le_promisc:
 9234              	.LFB44:
2360:bluetooth_rxtx.c **** 
2361:bluetooth_rxtx.c **** /* le promiscuous mode */
2362:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 9235              		.loc 1 2362 0
 9236              		.cfi_startproc
 9237              		@ args = 0, pretend = 0, frame = 128
 9238              		@ frame_needed = 1, uses_anonymous_args = 0
 9239 0000 90B5     		push	{r4, r7, lr}
 9240              		.cfi_def_cfa_offset 12
 9241              		.cfi_offset 4, -12
 9242              		.cfi_offset 7, -8
 9243              		.cfi_offset 14, -4
 9244 0002 A1B0     		sub	sp, sp, #132
 9245              		.cfi_def_cfa_offset 144
 9246 0004 00AF     		add	r7, sp, #0
 9247              		.cfi_def_cfa_register 7
 9248 0006 7860     		str	r0, [r7, #4]
2363:bluetooth_rxtx.c **** 	int i, j, k;
2364:bluetooth_rxtx.c **** 	int idx;
2365:bluetooth_rxtx.c **** 
2366:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2367:bluetooth_rxtx.c **** 	char desired[4][16] = {
 9249              		.loc 1 2367 0
 9250 0008 07F11C03 		add	r3, r7, #28
 9251 000c 4022     		movs	r2, #64
 9252 000e 1846     		mov	r0, r3
 9253 0010 0021     		movs	r1, #0
 9254 0012 FFF7FEFF 		bl	memset
 9255 0016 0123     		movs	r3, #1
 9256 0018 3B77     		strb	r3, [r7, #28]
 9257 001a 0123     		movs	r3, #1
 9258 001c 87F82C30 		strb	r3, [r7, #44]
 9259 0020 0123     		movs	r3, #1
 9260 0022 87F82F30 		strb	r3, [r7, #47]
 9261 0026 0123     		movs	r3, #1
 9262 0028 87F83C30 		strb	r3, [r7, #60]
 9263 002c 0123     		movs	r3, #1
 9264 002e 87F83E30 		strb	r3, [r7, #62]
 9265 0032 0123     		movs	r3, #1
 9266 0034 87F84C30 		strb	r3, [r7, #76]
 9267 0038 0123     		movs	r3, #1
 9268 003a 87F84E30 		strb	r3, [r7, #78]
 9269 003e 0123     		movs	r3, #1
 9270 0040 87F84F30 		strb	r3, [r7, #79]
ARM GAS  /tmp/ccvLzxWr.s 			page 204


2368:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2369:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2370:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2371:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2372:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2373:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2374:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2375:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2376:bluetooth_rxtx.c **** 	};
2377:bluetooth_rxtx.c **** 
2378:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 9271              		.loc 1 2378 0
 9272 0044 0023     		movs	r3, #0
 9273 0046 FB67     		str	r3, [r7, #124]
 9274 0048 41E0     		b	.L467
 9275              	.L470:
2379:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9276              		.loc 1 2379 0
 9277 004a A54B     		ldr	r3, .L497
 9278 004c 1B88     		ldrh	r3, [r3]	@ movhi
 9279 004e 9BB2     		uxth	r3, r3
 9280 0050 DBB2     		uxtb	r3, r3
 9281 0052 623B     		subs	r3, r3, #98
 9282 0054 DBB2     		uxtb	r3, r3
 9283 0056 1846     		mov	r0, r3
 9284 0058 FFF7FEFF 		bl	btle_channel_index
 9285 005c 0346     		mov	r3, r0
 9286 005e 1A46     		mov	r2, r3
 9287 0060 A04B     		ldr	r3, .L497+4
 9288 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9289 0064 3B67     		str	r3, [r7, #112]
2380:bluetooth_rxtx.c **** 
2381:bluetooth_rxtx.c **** 		// whiten the desired data
2382:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 9290              		.loc 1 2382 0
 9291 0066 0023     		movs	r3, #0
 9292 0068 BB67     		str	r3, [r7, #120]
 9293 006a 2AE0     		b	.L468
 9294              	.L469:
2383:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9295              		.loc 1 2383 0 discriminator 3
 9296 006c FB6F     		ldr	r3, [r7, #124]
 9297 006e 1B01     		lsls	r3, r3, #4
 9298 0070 07F18002 		add	r2, r7, #128
 9299 0074 1A44     		add	r2, r2, r3
 9300 0076 BB6F     		ldr	r3, [r7, #120]
 9301 0078 1344     		add	r3, r3, r2
 9302 007a 643B     		subs	r3, r3, #100
 9303 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9304 007e 9A49     		ldr	r1, .L497+8
 9305 0080 3B6F     		ldr	r3, [r7, #112]
 9306 0082 0B44     		add	r3, r3, r1
 9307 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9308 0086 5340     		eors	r3, r3, r2
 9309 0088 D9B2     		uxtb	r1, r3
 9310 008a FB6F     		ldr	r3, [r7, #124]
 9311 008c 1B01     		lsls	r3, r3, #4
ARM GAS  /tmp/ccvLzxWr.s 			page 205


 9312 008e 07F18002 		add	r2, r7, #128
 9313 0092 1A44     		add	r2, r2, r3
 9314 0094 BB6F     		ldr	r3, [r7, #120]
 9315 0096 1344     		add	r3, r3, r2
 9316 0098 643B     		subs	r3, r3, #100
 9317 009a 0A46     		mov	r2, r1
 9318 009c 1A70     		strb	r2, [r3]
2384:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 9319              		.loc 1 2384 0 discriminator 3
 9320 009e 3B6F     		ldr	r3, [r7, #112]
 9321 00a0 0133     		adds	r3, r3, #1
 9322 00a2 1946     		mov	r1, r3
 9323 00a4 914B     		ldr	r3, .L497+12
 9324 00a6 A1FB0323 		umull	r2, r3, r1, r3
 9325 00aa C81A     		subs	r0, r1, r3
 9326 00ac 4008     		lsrs	r0, r0, #1
 9327 00ae 0344     		add	r3, r3, r0
 9328 00b0 9A09     		lsrs	r2, r3, #6
 9329 00b2 1346     		mov	r3, r2
 9330 00b4 DB01     		lsls	r3, r3, #7
 9331 00b6 9B1A     		subs	r3, r3, r2
 9332 00b8 CA1A     		subs	r2, r1, r3
 9333 00ba 3A67     		str	r2, [r7, #112]
2382:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9334              		.loc 1 2382 0 discriminator 3
 9335 00bc BB6F     		ldr	r3, [r7, #120]
 9336 00be 0133     		adds	r3, r3, #1
 9337 00c0 BB67     		str	r3, [r7, #120]
 9338              	.L468:
2382:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9339              		.loc 1 2382 0 is_stmt 0 discriminator 1
 9340 00c2 BB6F     		ldr	r3, [r7, #120]
 9341 00c4 0F2B     		cmp	r3, #15
 9342 00c6 D1DD     		ble	.L469
2378:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9343              		.loc 1 2378 0 is_stmt 1 discriminator 2
 9344 00c8 FB6F     		ldr	r3, [r7, #124]
 9345 00ca 0133     		adds	r3, r3, #1
 9346 00cc FB67     		str	r3, [r7, #124]
 9347              	.L467:
2378:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9348              		.loc 1 2378 0 is_stmt 0 discriminator 1
 9349 00ce FB6F     		ldr	r3, [r7, #124]
 9350 00d0 032B     		cmp	r3, #3
 9351 00d2 BADD     		ble	.L470
2385:bluetooth_rxtx.c **** 		}
2386:bluetooth_rxtx.c **** 	}
2387:bluetooth_rxtx.c **** 
2388:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2389:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 9352              		.loc 1 2389 0 is_stmt 1
 9353 00d4 2023     		movs	r3, #32
 9354 00d6 FB67     		str	r3, [r7, #124]
 9355 00d8 D0E0     		b	.L471
 9356              	.L491:
 9357              	.LBB17:
2390:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
ARM GAS  /tmp/ccvLzxWr.s 			page 206


 9358              		.loc 1 2390 0
 9359 00da 854B     		ldr	r3, .L497+16
 9360 00dc 07F10C04 		add	r4, r7, #12
 9361 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 9362 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2391:bluetooth_rxtx.c **** 		int matching = -1;
 9363              		.loc 1 2391 0
 9364 00e6 4FF0FF33 		mov	r3, #-1
 9365 00ea FB66     		str	r3, [r7, #108]
2392:bluetooth_rxtx.c **** 
2393:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9366              		.loc 1 2393 0
 9367 00ec 0023     		movs	r3, #0
 9368 00ee BB67     		str	r3, [r7, #120]
 9369 00f0 26E0     		b	.L472
 9370              	.L477:
2394:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9371              		.loc 1 2394 0
 9372 00f2 0023     		movs	r3, #0
 9373 00f4 7B67     		str	r3, [r7, #116]
 9374 00f6 1DE0     		b	.L473
 9375              	.L476:
2395:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9376              		.loc 1 2395 0
 9377 00f8 FA6F     		ldr	r2, [r7, #124]
 9378 00fa 7B6F     		ldr	r3, [r7, #116]
 9379 00fc 1344     		add	r3, r3, r2
 9380 00fe 1A46     		mov	r2, r3
 9381 0100 7B68     		ldr	r3, [r7, #4]
 9382 0102 1344     		add	r3, r3, r2
 9383 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9384 0106 BB6F     		ldr	r3, [r7, #120]
 9385 0108 1B01     		lsls	r3, r3, #4
 9386 010a 07F18001 		add	r1, r7, #128
 9387 010e 1944     		add	r1, r1, r3
 9388 0110 7B6F     		ldr	r3, [r7, #116]
 9389 0112 0B44     		add	r3, r3, r1
 9390 0114 643B     		subs	r3, r3, #100
 9391 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9392 0118 9A42     		cmp	r2, r3
 9393 011a 08D0     		beq	.L474
2396:bluetooth_rxtx.c **** 					ok[j] = 0;
 9394              		.loc 1 2396 0
 9395 011c BB6F     		ldr	r3, [r7, #120]
 9396 011e 9B00     		lsls	r3, r3, #2
 9397 0120 07F18002 		add	r2, r7, #128
 9398 0124 1344     		add	r3, r3, r2
 9399 0126 0022     		movs	r2, #0
 9400 0128 43F8742C 		str	r2, [r3, #-116]
2397:bluetooth_rxtx.c **** 					break;
 9401              		.loc 1 2397 0
 9402 012c 05E0     		b	.L475
 9403              	.L474:
2394:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9404              		.loc 1 2394 0 discriminator 2
 9405 012e 7B6F     		ldr	r3, [r7, #116]
 9406 0130 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccvLzxWr.s 			page 207


 9407 0132 7B67     		str	r3, [r7, #116]
 9408              	.L473:
2394:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9409              		.loc 1 2394 0 is_stmt 0 discriminator 1
 9410 0134 7B6F     		ldr	r3, [r7, #116]
 9411 0136 0F2B     		cmp	r3, #15
 9412 0138 DEDD     		ble	.L476
 9413              	.L475:
2393:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9414              		.loc 1 2393 0 is_stmt 1 discriminator 2
 9415 013a BB6F     		ldr	r3, [r7, #120]
 9416 013c 0133     		adds	r3, r3, #1
 9417 013e BB67     		str	r3, [r7, #120]
 9418              	.L472:
2393:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9419              		.loc 1 2393 0 is_stmt 0 discriminator 1
 9420 0140 BB6F     		ldr	r3, [r7, #120]
 9421 0142 032B     		cmp	r3, #3
 9422 0144 D5DD     		ble	.L477
2398:bluetooth_rxtx.c **** 				}
2399:bluetooth_rxtx.c **** 			}
2400:bluetooth_rxtx.c **** 		}
2401:bluetooth_rxtx.c **** 
2402:bluetooth_rxtx.c **** 		// see if any match
2403:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9423              		.loc 1 2403 0 is_stmt 1
 9424 0146 0023     		movs	r3, #0
 9425 0148 BB67     		str	r3, [r7, #120]
 9426 014a 0EE0     		b	.L478
 9427              	.L481:
2404:bluetooth_rxtx.c **** 			if (ok[j]) {
 9428              		.loc 1 2404 0
 9429 014c BB6F     		ldr	r3, [r7, #120]
 9430 014e 9B00     		lsls	r3, r3, #2
 9431 0150 07F18002 		add	r2, r7, #128
 9432 0154 1344     		add	r3, r3, r2
 9433 0156 53F8743C 		ldr	r3, [r3, #-116]
 9434 015a 002B     		cmp	r3, #0
 9435 015c 02D0     		beq	.L479
2405:bluetooth_rxtx.c **** 				matching = j;
 9436              		.loc 1 2405 0
 9437 015e BB6F     		ldr	r3, [r7, #120]
 9438 0160 FB66     		str	r3, [r7, #108]
2406:bluetooth_rxtx.c **** 				break;
 9439              		.loc 1 2406 0
 9440 0162 05E0     		b	.L480
 9441              	.L479:
2403:bluetooth_rxtx.c **** 			if (ok[j]) {
 9442              		.loc 1 2403 0 discriminator 2
 9443 0164 BB6F     		ldr	r3, [r7, #120]
 9444 0166 0133     		adds	r3, r3, #1
 9445 0168 BB67     		str	r3, [r7, #120]
 9446              	.L478:
2403:bluetooth_rxtx.c **** 			if (ok[j]) {
 9447              		.loc 1 2403 0 is_stmt 0 discriminator 1
 9448 016a BB6F     		ldr	r3, [r7, #120]
 9449 016c 032B     		cmp	r3, #3
ARM GAS  /tmp/ccvLzxWr.s 			page 208


 9450 016e EDDD     		ble	.L481
 9451              	.L480:
2407:bluetooth_rxtx.c **** 			}
2408:bluetooth_rxtx.c **** 		}
2409:bluetooth_rxtx.c **** 
2410:bluetooth_rxtx.c **** 		// skip if no match
2411:bluetooth_rxtx.c **** 		if (matching < 0)
 9452              		.loc 1 2411 0 is_stmt 1
 9453 0170 FB6E     		ldr	r3, [r7, #108]
 9454 0172 002B     		cmp	r3, #0
 9455 0174 7FDB     		blt	.L483
2412:bluetooth_rxtx.c **** 			continue;
2413:bluetooth_rxtx.c **** 
2414:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2415:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9456              		.loc 1 2415 0
 9457 0176 5A4B     		ldr	r3, .L497
 9458 0178 1B88     		ldrh	r3, [r3]	@ movhi
 9459 017a 9BB2     		uxth	r3, r3
 9460 017c DBB2     		uxtb	r3, r3
 9461 017e 623B     		subs	r3, r3, #98
 9462 0180 DBB2     		uxtb	r3, r3
 9463 0182 1846     		mov	r0, r3
 9464 0184 FFF7FEFF 		bl	btle_channel_index
 9465 0188 0346     		mov	r3, r0
 9466 018a 1A46     		mov	r2, r3
 9467 018c 554B     		ldr	r3, .L497+4
 9468 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9469 0190 3B67     		str	r3, [r7, #112]
2416:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 9470              		.loc 1 2416 0
 9471 0192 0023     		movs	r3, #0
 9472 0194 BB67     		str	r3, [r7, #120]
 9473 0196 4CE0     		b	.L484
 9474              	.L490:
 9475              	.LBB18:
2417:bluetooth_rxtx.c **** 			u8 byte = 0;
 9476              		.loc 1 2417 0
 9477 0198 0023     		movs	r3, #0
 9478 019a 87F86B30 		strb	r3, [r7, #107]
2418:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 9479              		.loc 1 2418 0
 9480 019e 0023     		movs	r3, #0
 9481 01a0 7B67     		str	r3, [r7, #116]
 9482 01a2 39E0     		b	.L485
 9483              	.L489:
 9484              	.LBB19:
2419:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9485              		.loc 1 2419 0
 9486 01a4 BB6F     		ldr	r3, [r7, #120]
 9487 01a6 DA00     		lsls	r2, r3, #3
 9488 01a8 7B6F     		ldr	r3, [r7, #116]
 9489 01aa 1A44     		add	r2, r2, r3
 9490 01ac FB6F     		ldr	r3, [r7, #124]
 9491 01ae 1344     		add	r3, r3, r2
 9492 01b0 203B     		subs	r3, r3, #32
 9493 01b2 3B66     		str	r3, [r7, #96]
ARM GAS  /tmp/ccvLzxWr.s 			page 209


2420:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 9494              		.loc 1 2420 0
 9495 01b4 3B6E     		ldr	r3, [r7, #96]
 9496 01b6 B3F5487F 		cmp	r3, #800
 9497 01ba 00DB     		blt	.L486
 9498 01bc 2FE0     		b	.L487
 9499              	.L486:
2421:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 9500              		.loc 1 2421 0
 9501 01be 3B6E     		ldr	r3, [r7, #96]
 9502 01c0 7A68     		ldr	r2, [r7, #4]
 9503 01c2 1344     		add	r3, r3, r2
 9504 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9505 01c6 7B66     		str	r3, [r7, #100]
2422:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 9506              		.loc 1 2422 0
 9507 01c8 BB6F     		ldr	r3, [r7, #120]
 9508 01ca 032B     		cmp	r3, #3
 9509 01cc 16DD     		ble	.L488
2423:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 9510              		.loc 1 2423 0
 9511 01ce 464A     		ldr	r2, .L497+8
 9512 01d0 3B6F     		ldr	r3, [r7, #112]
 9513 01d2 1344     		add	r3, r3, r2
 9514 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9515 01d6 1A46     		mov	r2, r3
 9516 01d8 7B6E     		ldr	r3, [r7, #100]
 9517 01da 5340     		eors	r3, r3, r2
 9518 01dc 7B66     		str	r3, [r7, #100]
2424:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 9519              		.loc 1 2424 0
 9520 01de 3B6F     		ldr	r3, [r7, #112]
 9521 01e0 0133     		adds	r3, r3, #1
 9522 01e2 1946     		mov	r1, r3
 9523 01e4 414B     		ldr	r3, .L497+12
 9524 01e6 A1FB0323 		umull	r2, r3, r1, r3
 9525 01ea C81A     		subs	r0, r1, r3
 9526 01ec 4008     		lsrs	r0, r0, #1
 9527 01ee 0344     		add	r3, r3, r0
 9528 01f0 9A09     		lsrs	r2, r3, #6
 9529 01f2 1346     		mov	r3, r2
 9530 01f4 DB01     		lsls	r3, r3, #7
 9531 01f6 9B1A     		subs	r3, r3, r2
 9532 01f8 CA1A     		subs	r2, r1, r3
 9533 01fa 3A67     		str	r2, [r7, #112]
 9534              	.L488:
2425:bluetooth_rxtx.c **** 				}
2426:bluetooth_rxtx.c **** 				byte |= bit << k;
 9535              		.loc 1 2426 0 discriminator 2
 9536 01fc 7A6E     		ldr	r2, [r7, #100]
 9537 01fe 7B6F     		ldr	r3, [r7, #116]
 9538 0200 02FA03F3 		lsl	r3, r2, r3
 9539 0204 DAB2     		uxtb	r2, r3
 9540 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 9541 020a 1343     		orrs	r3, r3, r2
 9542 020c DBB2     		uxtb	r3, r3
 9543 020e 87F86B30 		strb	r3, [r7, #107]
ARM GAS  /tmp/ccvLzxWr.s 			page 210


 9544              	.LBE19:
2418:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9545              		.loc 1 2418 0 discriminator 2
 9546 0212 7B6F     		ldr	r3, [r7, #116]
 9547 0214 0133     		adds	r3, r3, #1
 9548 0216 7B67     		str	r3, [r7, #116]
 9549              	.L485:
2418:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9550              		.loc 1 2418 0 is_stmt 0 discriminator 1
 9551 0218 7B6F     		ldr	r3, [r7, #116]
 9552 021a 072B     		cmp	r3, #7
 9553 021c C2DD     		ble	.L489
 9554              	.L487:
2427:bluetooth_rxtx.c **** 			}
2428:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 9555              		.loc 1 2428 0 is_stmt 1 discriminator 2
 9556 021e 354B     		ldr	r3, .L497+20
 9557 0220 1A68     		ldr	r2, [r3]
 9558 0222 BB6F     		ldr	r3, [r7, #120]
 9559 0224 1344     		add	r3, r3, r2
 9560 0226 97F86B20 		ldrb	r2, [r7, #107]
 9561 022a 1A70     		strb	r2, [r3]
 9562              	.LBE18:
2416:bluetooth_rxtx.c **** 			u8 byte = 0;
 9563              		.loc 1 2416 0 discriminator 2
 9564 022c BB6F     		ldr	r3, [r7, #120]
 9565 022e 0133     		adds	r3, r3, #1
 9566 0230 BB67     		str	r3, [r7, #120]
 9567              	.L484:
2416:bluetooth_rxtx.c **** 			u8 byte = 0;
 9568              		.loc 1 2416 0 is_stmt 0 discriminator 1
 9569 0232 BB6F     		ldr	r3, [r7, #120]
 9570 0234 092B     		cmp	r3, #9
 9571 0236 AFDD     		ble	.L490
2429:bluetooth_rxtx.c **** 		}
2430:bluetooth_rxtx.c **** 
2431:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 9572              		.loc 1 2431 0 is_stmt 1
 9573 0238 2E4B     		ldr	r3, .L497+20
 9574 023a 1B68     		ldr	r3, [r3]
 9575 023c 0333     		adds	r3, r3, #3
 9576 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9577 0240 1A06     		lsls	r2, r3, #24
2432:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9578              		.loc 1 2432 0
 9579 0242 2C4B     		ldr	r3, .L497+20
 9580 0244 1B68     		ldr	r3, [r3]
 9581 0246 0233     		adds	r3, r3, #2
 9582 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9583 024a 1B04     		lsls	r3, r3, #16
2431:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9584              		.loc 1 2431 0
 9585 024c 1A43     		orrs	r2, r2, r3
2433:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9586              		.loc 1 2433 0
 9587 024e 294B     		ldr	r3, .L497+20
 9588 0250 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 211


 9589 0252 0133     		adds	r3, r3, #1
 9590 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9591 0256 1B02     		lsls	r3, r3, #8
2432:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9592              		.loc 1 2432 0
 9593 0258 1343     		orrs	r3, r3, r2
2434:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 9594              		.loc 1 2434 0
 9595 025a 264A     		ldr	r2, .L497+20
 9596 025c 1268     		ldr	r2, [r2]
 9597 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2433:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9598              		.loc 1 2433 0
 9599 0260 1343     		orrs	r3, r3, r2
2431:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9600              		.loc 1 2431 0
 9601 0262 FB65     		str	r3, [r7, #92]
2435:bluetooth_rxtx.c **** 		see_aa(aa);
 9602              		.loc 1 2435 0
 9603 0264 F86D     		ldr	r0, [r7, #92]
 9604 0266 FFF7FEFF 		bl	see_aa
2436:bluetooth_rxtx.c **** 
2437:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 9605              		.loc 1 2437 0
 9606 026a 224B     		ldr	r3, .L497+20
 9607 026c 1B68     		ldr	r3, [r3]
 9608 026e 0120     		movs	r0, #1
 9609 0270 1946     		mov	r1, r3
 9610 0272 FFF7FEFF 		bl	enqueue
 9611              	.L483:
 9612              	.LBE17:
2389:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9613              		.loc 1 2389 0 discriminator 2
 9614 0276 FB6F     		ldr	r3, [r7, #124]
 9615 0278 0133     		adds	r3, r3, #1
 9616 027a FB67     		str	r3, [r7, #124]
 9617              	.L471:
2389:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9618              		.loc 1 2389 0 is_stmt 0 discriminator 1
 9619 027c FB6F     		ldr	r3, [r7, #124]
 9620 027e B3F53C7F 		cmp	r3, #752
 9621 0282 FFF62AAF 		blt	.L491
2438:bluetooth_rxtx.c **** 
2439:bluetooth_rxtx.c **** 	}
2440:bluetooth_rxtx.c **** 
2441:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2442:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 9622              		.loc 1 2442 0 is_stmt 1
 9623 0286 0023     		movs	r3, #0
 9624 0288 FB67     		str	r3, [r7, #124]
 9625 028a 20E0     		b	.L492
 9626              	.L495:
2443:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9627              		.loc 1 2443 0
 9628 028c 1A4A     		ldr	r2, .L497+24
 9629 028e FB6F     		ldr	r3, [r7, #124]
 9630 0290 DB00     		lsls	r3, r3, #3
ARM GAS  /tmp/ccvLzxWr.s 			page 212


 9631 0292 1344     		add	r3, r3, r2
 9632 0294 5B68     		ldr	r3, [r3, #4]
 9633 0296 032B     		cmp	r3, #3
 9634 0298 16DD     		ble	.L493
2444:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 9635              		.loc 1 2444 0
 9636 029a 174A     		ldr	r2, .L497+24
 9637 029c FB6F     		ldr	r3, [r7, #124]
 9638 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 9639 02a2 1846     		mov	r0, r3
 9640 02a4 FFF7FEFF 		bl	le_set_access_address
2445:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 9641              		.loc 1 2445 0
 9642 02a8 144B     		ldr	r3, .L497+28
 9643 02aa 154A     		ldr	r2, .L497+32
 9644 02ac 1A60     		str	r2, [r3]
2446:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 9645              		.loc 1 2446 0
 9646 02ae 154B     		ldr	r3, .L497+36
 9647 02b0 154A     		ldr	r2, .L497+40
 9648 02b2 1A60     		str	r2, [r3]
2447:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9649              		.loc 1 2447 0
 9650 02b4 154B     		ldr	r3, .L497+44
 9651 02b6 0022     		movs	r2, #0
 9652 02b8 1A61     		str	r2, [r3, #16]
2448:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 9653              		.loc 1 2448 0
 9654 02ba 0020     		movs	r0, #0
 9655 02bc 1349     		ldr	r1, .L497+44
 9656 02be 0422     		movs	r2, #4
 9657 02c0 FFF7FEFF 		bl	le_promisc_state
2449:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2450:bluetooth_rxtx.c **** 			return 0;
 9658              		.loc 1 2450 0
 9659 02c4 0023     		movs	r3, #0
 9660 02c6 06E0     		b	.L496
 9661              	.L493:
2442:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9662              		.loc 1 2442 0 discriminator 2
 9663 02c8 FB6F     		ldr	r3, [r7, #124]
 9664 02ca 0133     		adds	r3, r3, #1
 9665 02cc FB67     		str	r3, [r7, #124]
 9666              	.L492:
2442:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9667              		.loc 1 2442 0 is_stmt 0 discriminator 1
 9668 02ce FB6F     		ldr	r3, [r7, #124]
 9669 02d0 1F2B     		cmp	r3, #31
 9670 02d2 DBDD     		ble	.L495
2451:bluetooth_rxtx.c **** 		}
2452:bluetooth_rxtx.c **** 	}
2453:bluetooth_rxtx.c **** 
2454:bluetooth_rxtx.c **** 	return 1;
 9671              		.loc 1 2454 0 is_stmt 1
 9672 02d4 0123     		movs	r3, #1
 9673              	.L496:
2455:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccvLzxWr.s 			page 213


 9674              		.loc 1 2455 0 discriminator 1
 9675 02d6 1846     		mov	r0, r3
 9676 02d8 8437     		adds	r7, r7, #132
 9677              		.cfi_def_cfa_offset 12
 9678 02da BD46     		mov	sp, r7
 9679              		.cfi_def_cfa_register 13
 9680              		@ sp needed
 9681 02dc 90BD     		pop	{r4, r7, pc}
 9682              	.L498:
 9683 02de 00BF     		.align	2
 9684              	.L497:
 9685 02e0 00000000 		.word	channel
 9686 02e4 AC000000 		.word	whitening_index
 9687 02e8 2C000000 		.word	whitening
 9688 02ec 11080402 		.word	33818641
 9689 02f0 CC080000 		.word	.LC0
 9690 02f4 00000000 		.word	idle_rxbuf
 9691 02f8 00000000 		.word	le_promisc
 9692 02fc 00000000 		.word	data_cb
 9693 0300 00000000 		.word	cb_follow_le
 9694 0304 00000000 		.word	packet_cb
 9695 0308 00000000 		.word	promisc_follow_cb
 9696 030c 00000000 		.word	le
 9697              		.cfi_endproc
 9698              	.LFE44:
 9700              		.section	.text.bt_promisc_le,"ax",%progbits
 9701              		.align	2
 9702              		.global	bt_promisc_le
 9703              		.thumb
 9704              		.thumb_func
 9706              	bt_promisc_le:
 9707              	.LFB45:
2456:bluetooth_rxtx.c **** 
2457:bluetooth_rxtx.c **** void bt_promisc_le() {
 9708              		.loc 1 2457 0
 9709              		.cfi_startproc
 9710              		@ args = 0, pretend = 0, frame = 0
 9711              		@ frame_needed = 1, uses_anonymous_args = 0
 9712 0000 80B5     		push	{r7, lr}
 9713              		.cfi_def_cfa_offset 8
 9714              		.cfi_offset 7, -8
 9715              		.cfi_offset 14, -4
 9716 0002 00AF     		add	r7, sp, #0
 9717              		.cfi_def_cfa_register 7
2458:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 9718              		.loc 1 2458 0
 9719 0004 2CE0     		b	.L500
 9720              	.L505:
2459:bluetooth_rxtx.c **** 		reset_le_promisc();
 9721              		.loc 1 2459 0
 9722 0006 FFF7FEFF 		bl	reset_le_promisc
2460:bluetooth_rxtx.c **** 
2461:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2462:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 9723              		.loc 1 2462 0
 9724 000a 184B     		ldr	r3, .L506
 9725 000c 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccvLzxWr.s 			page 214


 9726 000e 9BB2     		uxth	r3, r3
 9727 0010 03F00103 		and	r3, r3, #1
 9728 0014 002B     		cmp	r3, #0
 9729 0016 03D0     		beq	.L501
2463:bluetooth_rxtx.c **** 			channel = 2440;
 9730              		.loc 1 2463 0
 9731 0018 144B     		ldr	r3, .L506
 9732 001a 40F68812 		movw	r2, #2440
 9733 001e 1A80     		strh	r2, [r3]	@ movhi
 9734              	.L501:
2464:bluetooth_rxtx.c **** 
2465:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2466:bluetooth_rxtx.c **** 		if (!le.target_set) {
 9735              		.loc 1 2466 0
 9736 0020 134B     		ldr	r3, .L506+4
 9737 0022 DB6B     		ldr	r3, [r3, #60]
 9738 0024 002B     		cmp	r3, #0
 9739 0026 07D1     		bne	.L502
2467:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2468:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 9740              		.loc 1 2468 0
 9741 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2469:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 9742              		.loc 1 2469 0
 9743 002c 114B     		ldr	r3, .L506+8
 9744 002e 124A     		ldr	r2, .L506+12
 9745 0030 1A60     		str	r2, [r3]
2470:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 9746              		.loc 1 2470 0
 9747 0032 0A20     		movs	r0, #10
 9748 0034 FFF7FEFF 		bl	bt_generic_le
 9749              	.L502:
2471:bluetooth_rxtx.c **** 		}
2472:bluetooth_rxtx.c **** 
2473:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2474:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 9750              		.loc 1 2474 0
 9751 0038 104B     		ldr	r3, .L506+16
 9752 003a 1B78     		ldrb	r3, [r3]
 9753 003c DBB2     		uxtb	r3, r3
 9754 003e 0A2B     		cmp	r3, #10
 9755 0040 00D0     		beq	.L503
2475:bluetooth_rxtx.c **** 			break;
 9756              		.loc 1 2475 0
 9757 0042 12E0     		b	.L499
 9758              	.L503:
2476:bluetooth_rxtx.c **** 
2477:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 9759              		.loc 1 2477 0
 9760 0044 0020     		movs	r0, #0
 9761 0046 0A49     		ldr	r1, .L506+4
 9762 0048 0422     		movs	r2, #4
 9763 004a FFF7FEFF 		bl	le_promisc_state
2478:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 9764              		.loc 1 2478 0
 9765 004e 0C4B     		ldr	r3, .L506+20
 9766 0050 0C4A     		ldr	r2, .L506+24
ARM GAS  /tmp/ccvLzxWr.s 			page 215


 9767 0052 1A60     		str	r2, [r3]
2479:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 9768              		.loc 1 2479 0
 9769 0054 064B     		ldr	r3, .L506+4
 9770 0056 0022     		movs	r2, #0
 9771 0058 1A61     		str	r2, [r3, #16]
2480:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 9772              		.loc 1 2480 0
 9773 005a 0A20     		movs	r0, #10
 9774 005c FFF7FEFF 		bl	bt_le_sync
 9775              	.L500:
2458:bluetooth_rxtx.c **** 		reset_le_promisc();
 9776              		.loc 1 2458 0
 9777 0060 064B     		ldr	r3, .L506+16
 9778 0062 1B78     		ldrb	r3, [r3]
 9779 0064 DBB2     		uxtb	r3, r3
 9780 0066 0A2B     		cmp	r3, #10
 9781 0068 CDD0     		beq	.L505
 9782              	.L499:
2481:bluetooth_rxtx.c **** 	}
2482:bluetooth_rxtx.c **** }
 9783              		.loc 1 2482 0
 9784 006a 80BD     		pop	{r7, pc}
 9785              	.L507:
 9786              		.align	2
 9787              	.L506:
 9788 006c 00000000 		.word	channel
 9789 0070 00000000 		.word	le
 9790 0074 00000000 		.word	data_cb
 9791 0078 00000000 		.word	cb_le_promisc
 9792 007c 00000000 		.word	requested_mode
 9793 0080 00000000 		.word	packet_cb
 9794 0084 00000000 		.word	promisc_follow_cb
 9795              		.cfi_endproc
 9796              	.LFE45:
 9798              		.section	.rodata
 9799              		.align	2
 9800              	.LC1:
 9801 08dc 00       		.byte	0
 9802 08dd 09       		.byte	9
 9803 08de FF       		.byte	-1
 9804 08df FF       		.byte	-1
 9805 08e0 FF       		.byte	-1
 9806 08e1 FF       		.byte	-1
 9807 08e2 FF       		.byte	-1
 9808 08e3 FF       		.byte	-1
 9809 08e4 02       		.byte	2
 9810 08e5 01       		.byte	1
 9811 08e6 05       		.byte	5
 9812 08e7 FF       		.byte	-1
 9813 08e8 FF       		.byte	-1
 9814 08e9 FF       		.byte	-1
 9815              		.section	.text.bt_slave_le,"ax",%progbits
 9816              		.align	2
 9817              		.global	bt_slave_le
 9818              		.thumb
 9819              		.thumb_func
ARM GAS  /tmp/ccvLzxWr.s 			page 216


 9821              	bt_slave_le:
 9822              	.LFB46:
2483:bluetooth_rxtx.c **** 
2484:bluetooth_rxtx.c **** void bt_slave_le() {
 9823              		.loc 1 2484 0
 9824              		.cfi_startproc
 9825              		@ args = 0, pretend = 0, frame = 32
 9826              		@ frame_needed = 1, uses_anonymous_args = 0
 9827 0000 90B5     		push	{r4, r7, lr}
 9828              		.cfi_def_cfa_offset 12
 9829              		.cfi_offset 4, -12
 9830              		.cfi_offset 7, -8
 9831              		.cfi_offset 14, -4
 9832 0002 89B0     		sub	sp, sp, #36
 9833              		.cfi_def_cfa_offset 48
 9834 0004 00AF     		add	r7, sp, #0
 9835              		.cfi_def_cfa_register 7
2485:bluetooth_rxtx.c **** 	u32 calc_crc;
2486:bluetooth_rxtx.c **** 	int i;
2487:bluetooth_rxtx.c **** 
2488:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 9836              		.loc 1 2488 0
 9837 0006 354A     		ldr	r2, .L513
 9838 0008 3B1D     		adds	r3, r7, #4
 9839 000a 1446     		mov	r4, r2
 9840 000c 2068     		ldr	r0, [r4]	@ unaligned
 9841 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 9842 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 9843 0012 07C3     		stmia	r3!, {r0, r1, r2}
 9844 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 9845 0016 1A80     		strh	r2, [r3]	@ unaligned
2489:bluetooth_rxtx.c **** 		// LL header
2490:bluetooth_rxtx.c **** 		0x00, 0x09,
2491:bluetooth_rxtx.c **** 
2492:bluetooth_rxtx.c **** 		// advertising address
2493:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2494:bluetooth_rxtx.c **** 
2495:bluetooth_rxtx.c **** 		// advertising data
2496:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2497:bluetooth_rxtx.c **** 
2498:bluetooth_rxtx.c **** 		// CRC (calc)
2499:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2500:bluetooth_rxtx.c **** 	};
2501:bluetooth_rxtx.c **** 
2502:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 9846              		.loc 1 2502 0
 9847 0018 0B23     		movs	r3, #11
 9848 001a FB76     		strb	r3, [r7, #27]
2503:bluetooth_rxtx.c **** 
2504:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2505:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 9849              		.loc 1 2505 0
 9850 001c 0023     		movs	r3, #0
 9851 001e FB61     		str	r3, [r7, #28]
 9852 0020 0EE0     		b	.L509
 9853              	.L510:
2506:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
ARM GAS  /tmp/ccvLzxWr.s 			page 217


 9854              		.loc 1 2506 0 discriminator 3
 9855 0022 FB69     		ldr	r3, [r7, #28]
 9856 0024 0233     		adds	r3, r3, #2
 9857 0026 FA69     		ldr	r2, [r7, #28]
 9858 0028 C2F10502 		rsb	r2, r2, #5
 9859 002c 2C49     		ldr	r1, .L513+4
 9860 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9861 0030 07F12001 		add	r1, r7, #32
 9862 0034 0B44     		add	r3, r3, r1
 9863 0036 03F81C2C 		strb	r2, [r3, #-28]
2505:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9864              		.loc 1 2505 0 discriminator 3
 9865 003a FB69     		ldr	r3, [r7, #28]
 9866 003c 0133     		adds	r3, r3, #1
 9867 003e FB61     		str	r3, [r7, #28]
 9868              	.L509:
2505:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9869              		.loc 1 2505 0 is_stmt 0 discriminator 1
 9870 0040 FB69     		ldr	r3, [r7, #28]
 9871 0042 052B     		cmp	r3, #5
 9872 0044 EDDD     		ble	.L510
2507:bluetooth_rxtx.c **** 
2508:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 9873              		.loc 1 2508 0 is_stmt 1
 9874 0046 274B     		ldr	r3, .L513+8
 9875 0048 D968     		ldr	r1, [r3, #12]
 9876 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9877 004c 3A1D     		adds	r2, r7, #4
 9878 004e 0846     		mov	r0, r1
 9879 0050 1146     		mov	r1, r2
 9880 0052 1A46     		mov	r2, r3
 9881 0054 FFF7FEFF 		bl	btle_calc_crc
 9882 0058 7861     		str	r0, [r7, #20]
2509:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 9883              		.loc 1 2509 0
 9884 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9885 005c 7A69     		ldr	r2, [r7, #20]
 9886 005e D2B2     		uxtb	r2, r2
 9887 0060 07F12001 		add	r1, r7, #32
 9888 0064 0B44     		add	r3, r3, r1
 9889 0066 03F81C2C 		strb	r2, [r3, #-28]
2510:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 9890              		.loc 1 2510 0
 9891 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9892 006c 0133     		adds	r3, r3, #1
 9893 006e 7A69     		ldr	r2, [r7, #20]
 9894 0070 120A     		lsrs	r2, r2, #8
 9895 0072 D2B2     		uxtb	r2, r2
 9896 0074 07F12001 		add	r1, r7, #32
 9897 0078 0B44     		add	r3, r3, r1
 9898 007a 03F81C2C 		strb	r2, [r3, #-28]
2511:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 9899              		.loc 1 2511 0
 9900 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9901 0080 0233     		adds	r3, r3, #2
 9902 0082 7A69     		ldr	r2, [r7, #20]
 9903 0084 120C     		lsrs	r2, r2, #16
ARM GAS  /tmp/ccvLzxWr.s 			page 218


 9904 0086 D2B2     		uxtb	r2, r2
 9905 0088 07F12001 		add	r1, r7, #32
 9906 008c 0B44     		add	r3, r3, r1
 9907 008e 03F81C2C 		strb	r2, [r3, #-28]
2512:bluetooth_rxtx.c **** 
2513:bluetooth_rxtx.c **** 	// spam advertising packets
2514:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 9908              		.loc 1 2514 0
 9909 0092 1BE0     		b	.L511
 9910              	.L512:
2515:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9911              		.loc 1 2515 0
 9912 0094 144B     		ldr	r3, .L513+12
 9913 0096 4FF08072 		mov	r2, #16777216
 9914 009a 1A60     		str	r2, [r3]
2516:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 9915              		.loc 1 2516 0
 9916 009c 124B     		ldr	r3, .L513+12
 9917 009e 4FF08062 		mov	r2, #67108864
 9918 00a2 1A60     		str	r2, [r3]
2517:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 9919              		.loc 1 2517 0
 9920 00a4 FB7E     		ldrb	r3, [r7, #27]
 9921 00a6 0333     		adds	r3, r3, #3
 9922 00a8 DAB2     		uxtb	r2, r3
 9923 00aa 3B1D     		adds	r3, r7, #4
 9924 00ac 0F48     		ldr	r0, .L513+16
 9925 00ae 1146     		mov	r1, r2
 9926 00b0 1A46     		mov	r2, r3
 9927 00b2 FFF7FEFF 		bl	le_transmit
2518:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 9928              		.loc 1 2518 0
 9929 00b6 0E4B     		ldr	r3, .L513+20
 9930 00b8 4FF08072 		mov	r2, #16777216
 9931 00bc 1A60     		str	r2, [r3]
2519:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 9932              		.loc 1 2519 0
 9933 00be 0C4B     		ldr	r3, .L513+20
 9934 00c0 4FF08062 		mov	r2, #67108864
 9935 00c4 1A60     		str	r2, [r3]
2520:bluetooth_rxtx.c **** 		msleep(100);
 9936              		.loc 1 2520 0
 9937 00c6 6420     		movs	r0, #100
 9938 00c8 FFF7FEFF 		bl	msleep
 9939              	.L511:
2514:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9940              		.loc 1 2514 0
 9941 00cc 094B     		ldr	r3, .L513+24
 9942 00ce 1B78     		ldrb	r3, [r3]
 9943 00d0 DBB2     		uxtb	r3, r3
 9944 00d2 0C2B     		cmp	r3, #12
 9945 00d4 DED0     		beq	.L512
2521:bluetooth_rxtx.c **** 	}
2522:bluetooth_rxtx.c **** }
 9946              		.loc 1 2522 0
 9947 00d6 2437     		adds	r7, r7, #36
 9948              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccvLzxWr.s 			page 219


 9949 00d8 BD46     		mov	sp, r7
 9950              		.cfi_def_cfa_register 13
 9951              		@ sp needed
 9952 00da 90BD     		pop	{r4, r7, pc}
 9953              	.L514:
 9954              		.align	2
 9955              	.L513:
 9956 00dc DC080000 		.word	.LC1
 9957 00e0 00000000 		.word	slave_mac_address
 9958 00e4 00000000 		.word	le
 9959 00e8 80E100E0 		.word	-536813184
 9960 00ec D6BE898E 		.word	-1903575338
 9961 00f0 00E100E0 		.word	-536813312
 9962 00f4 00000000 		.word	requested_mode
 9963              		.cfi_endproc
 9964              	.LFE46:
 9966              		.section	.text.specan,"ax",%progbits
 9967              		.align	2
 9968              		.global	specan
 9969              		.thumb
 9970              		.thumb_func
 9972              	specan:
 9973              	.LFB47:
2523:bluetooth_rxtx.c **** 
2524:bluetooth_rxtx.c **** /* spectrum analysis */
2525:bluetooth_rxtx.c **** void specan()
2526:bluetooth_rxtx.c **** {
 9974              		.loc 1 2526 0
 9975              		.cfi_startproc
 9976              		@ args = 0, pretend = 0, frame = 64
 9977              		@ frame_needed = 1, uses_anonymous_args = 0
 9978 0000 90B5     		push	{r4, r7, lr}
 9979              		.cfi_def_cfa_offset 12
 9980              		.cfi_offset 4, -12
 9981              		.cfi_offset 7, -8
 9982              		.cfi_offset 14, -4
 9983 0002 91B0     		sub	sp, sp, #68
 9984              		.cfi_def_cfa_offset 80
 9985 0004 00AF     		add	r7, sp, #0
 9986              		.cfi_def_cfa_register 7
2527:bluetooth_rxtx.c **** 	u8 epstat;
2528:bluetooth_rxtx.c **** 	u16 f;
2529:bluetooth_rxtx.c **** 	u8 i = 0;
 9987              		.loc 1 2529 0
 9988 0006 0023     		movs	r3, #0
 9989 0008 87F83D30 		strb	r3, [r7, #61]
2530:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2531:bluetooth_rxtx.c **** 
2532:bluetooth_rxtx.c **** 	RXLED_SET;
 9990              		.loc 1 2532 0
 9991 000c 5A4B     		ldr	r3, .L526
 9992 000e 1022     		movs	r2, #16
 9993 0010 1A60     		str	r2, [r3]
2533:bluetooth_rxtx.c **** 
2534:bluetooth_rxtx.c **** 	queue_init();
 9994              		.loc 1 2534 0
 9995 0012 FFF7FEFF 		bl	queue_init
ARM GAS  /tmp/ccvLzxWr.s 			page 220


2535:bluetooth_rxtx.c **** 
2536:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2537:bluetooth_rxtx.c **** 	PAEN_SET;
 9996              		.loc 1 2537 0
 9997 0016 594B     		ldr	r3, .L526+4
 9998 0018 8022     		movs	r2, #128
 9999 001a 1A60     		str	r2, [r3]
2538:bluetooth_rxtx.c **** 	//HGM_SET;
2539:bluetooth_rxtx.c **** #endif
2540:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10000              		.loc 1 2540 0
 10001 001c 1220     		movs	r0, #18
 10002 001e 42F62231 		movw	r1, #11042
 10003 0022 FFF7FEFF 		bl	cc2400_set
2541:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10004              		.loc 1 2541 0
 10005 0026 1420     		movs	r0, #20
 10006 0028 41F24B31 		movw	r1, #4939
 10007 002c FFF7FEFF 		bl	cc2400_set
2542:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10008              		.loc 1 2542 0
 10009 0030 2020     		movs	r0, #32
 10010 0032 40F20111 		movw	r1, #257
 10011 0036 FFF7FEFF 		bl	cc2400_set
2543:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10012              		.loc 1 2543 0
 10013 003a 0320     		movs	r0, #3
 10014 003c 2921     		movs	r1, #41
 10015 003e FFF7FEFF 		bl	cc2400_set
2544:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2545:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10016              		.loc 1 2545 0
 10017 0042 00BF     		nop
 10018              	.L516:
 10019              		.loc 1 2545 0 is_stmt 0 discriminator 1
 10020 0044 FFF7FEFF 		bl	cc2400_status
 10021 0048 0346     		mov	r3, r0
 10022 004a 03F04003 		and	r3, r3, #64
 10023 004e 002B     		cmp	r3, #0
 10024 0050 F8D0     		beq	.L516
2546:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10025              		.loc 1 2546 0 is_stmt 1
 10026 0052 00BF     		nop
 10027              	.L517:
 10028              		.loc 1 2546 0 is_stmt 0 discriminator 1
 10029 0054 FFF7FEFF 		bl	cc2400_status
 10030 0058 0346     		mov	r3, r0
 10031 005a 03F00403 		and	r3, r3, #4
 10032 005e 002B     		cmp	r3, #0
 10033 0060 F8D1     		bne	.L517
2547:bluetooth_rxtx.c **** 
2548:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 10034              		.loc 1 2548 0 is_stmt 1
 10035 0062 7AE0     		b	.L518
 10036              	.L525:
2549:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10037              		.loc 1 2549 0
ARM GAS  /tmp/ccvLzxWr.s 			page 221


 10038 0064 464B     		ldr	r3, .L526+8
 10039 0066 1B88     		ldrh	r3, [r3]	@ movhi
 10040 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 10041 006a 6FE0     		b	.L519
 10042              	.L524:
 10043              	.LBB20:
2550:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10044              		.loc 1 2550 0
 10045 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 10046 006e 013B     		subs	r3, r3, #1
 10047 0070 9BB2     		uxth	r3, r3
 10048 0072 0220     		movs	r0, #2
 10049 0074 1946     		mov	r1, r3
 10050 0076 FFF7FEFF 		bl	cc2400_set
2551:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 10051              		.loc 1 2551 0
 10052 007a 6120     		movs	r0, #97
 10053 007c FFF7FEFF 		bl	cc2400_strobe
2552:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 10054              		.loc 1 2552 0
 10055 0080 00BF     		nop
 10056              	.L520:
 10057              		.loc 1 2552 0 is_stmt 0 discriminator 1
 10058 0082 FFF7FEFF 		bl	cc2400_status
 10059 0086 0346     		mov	r3, r0
 10060 0088 03F00403 		and	r3, r3, #4
 10061 008c 002B     		cmp	r3, #0
 10062 008e F8D0     		beq	.L520
2553:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 10063              		.loc 1 2553 0 is_stmt 1
 10064 0090 6220     		movs	r0, #98
 10065 0092 FFF7FEFF 		bl	cc2400_strobe
2554:bluetooth_rxtx.c **** 
2555:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2556:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 10066              		.loc 1 2556 0
 10067 0096 4FF4FA73 		mov	r3, #500
 10068 009a 7B60     		str	r3, [r7, #4]
 10069 009c 00BF     		nop
 10070              	.L521:
 10071              		.loc 1 2556 0 is_stmt 0 discriminator 2
 10072 009e 7B68     		ldr	r3, [r7, #4]
 10073 00a0 013B     		subs	r3, r3, #1
 10074 00a2 7B60     		str	r3, [r7, #4]
 10075 00a4 002B     		cmp	r3, #0
 10076 00a6 FAD1     		bne	.L521
2557:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 10077              		.loc 1 2557 0 is_stmt 1
 10078 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10079 00ac 1346     		mov	r3, r2
 10080 00ae 5B00     		lsls	r3, r3, #1
 10081 00b0 1344     		add	r3, r3, r2
 10082 00b2 FA8F     		ldrh	r2, [r7, #62]
 10083 00b4 120A     		lsrs	r2, r2, #8
 10084 00b6 92B2     		uxth	r2, r2
 10085 00b8 D2B2     		uxtb	r2, r2
 10086 00ba 07F14001 		add	r1, r7, #64
ARM GAS  /tmp/ccvLzxWr.s 			page 222


 10087 00be 0B44     		add	r3, r3, r1
 10088 00c0 03F8382C 		strb	r2, [r3, #-56]
2558:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 10089              		.loc 1 2558 0
 10090 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10091 00c8 1346     		mov	r3, r2
 10092 00ca 5B00     		lsls	r3, r3, #1
 10093 00cc 1344     		add	r3, r3, r2
 10094 00ce 0133     		adds	r3, r3, #1
 10095 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 10096 00d2 D2B2     		uxtb	r2, r2
 10097 00d4 07F14001 		add	r1, r7, #64
 10098 00d8 0B44     		add	r3, r3, r1
 10099 00da 03F8382C 		strb	r2, [r3, #-56]
2559:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 10100              		.loc 1 2559 0
 10101 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10102 00e2 1346     		mov	r3, r2
 10103 00e4 5B00     		lsls	r3, r3, #1
 10104 00e6 1344     		add	r3, r3, r2
 10105 00e8 9C1C     		adds	r4, r3, #2
 10106 00ea 0620     		movs	r0, #6
 10107 00ec FFF7FEFF 		bl	cc2400_get
 10108 00f0 0346     		mov	r3, r0
 10109 00f2 1B0A     		lsrs	r3, r3, #8
 10110 00f4 9BB2     		uxth	r3, r3
 10111 00f6 DAB2     		uxtb	r2, r3
 10112 00f8 07F14003 		add	r3, r7, #64
 10113 00fc 2344     		add	r3, r3, r4
 10114 00fe 03F8382C 		strb	r2, [r3, #-56]
2560:bluetooth_rxtx.c **** 			i++;
 10115              		.loc 1 2560 0
 10116 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10117 0106 0133     		adds	r3, r3, #1
 10118 0108 87F83D30 		strb	r3, [r7, #61]
2561:bluetooth_rxtx.c **** 			if (i == 16) {
 10119              		.loc 1 2561 0
 10120 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10121 0110 102B     		cmp	r3, #16
 10122 0112 0DD1     		bne	.L522
2562:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 10123              		.loc 1 2562 0
 10124 0114 07F10803 		add	r3, r7, #8
 10125 0118 0420     		movs	r0, #4
 10126 011a 1946     		mov	r1, r3
 10127 011c FFF7FEFF 		bl	enqueue
2563:bluetooth_rxtx.c **** 				i = 0;
 10128              		.loc 1 2563 0
 10129 0120 0023     		movs	r3, #0
 10130 0122 87F83D30 		strb	r3, [r7, #61]
2564:bluetooth_rxtx.c **** 
2565:bluetooth_rxtx.c **** 				handle_usb(clkn);
 10131              		.loc 1 2565 0
 10132 0126 174B     		ldr	r3, .L526+12
 10133 0128 1B68     		ldr	r3, [r3]
 10134 012a 1846     		mov	r0, r3
 10135 012c FFF7FEFF 		bl	handle_usb
ARM GAS  /tmp/ccvLzxWr.s 			page 223


 10136              	.L522:
2566:bluetooth_rxtx.c **** 			}
2567:bluetooth_rxtx.c **** 
2568:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 10137              		.loc 1 2568 0
 10138 0130 6420     		movs	r0, #100
 10139 0132 FFF7FEFF 		bl	cc2400_strobe
2569:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 10140              		.loc 1 2569 0
 10141 0136 00BF     		nop
 10142              	.L523:
 10143              		.loc 1 2569 0 is_stmt 0 discriminator 1
 10144 0138 FFF7FEFF 		bl	cc2400_status
 10145 013c 0346     		mov	r3, r0
 10146 013e 03F00403 		and	r3, r3, #4
 10147 0142 002B     		cmp	r3, #0
 10148 0144 F8D1     		bne	.L523
 10149              	.LBE20:
2549:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10150              		.loc 1 2549 0 is_stmt 1 discriminator 2
 10151 0146 FB8F     		ldrh	r3, [r7, #62]
 10152 0148 0133     		adds	r3, r3, #1
 10153 014a FB87     		strh	r3, [r7, #62]	@ movhi
 10154              	.L519:
2549:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10155              		.loc 1 2549 0 is_stmt 0 discriminator 1
 10156 014c FA8F     		ldrh	r2, [r7, #62]
 10157 014e 0E4B     		ldr	r3, .L526+16
 10158 0150 1B88     		ldrh	r3, [r3]	@ movhi
 10159 0152 9BB2     		uxth	r3, r3
 10160 0154 0133     		adds	r3, r3, #1
 10161 0156 9A42     		cmp	r2, r3
 10162 0158 88DB     		blt	.L524
 10163              	.L518:
2548:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10164              		.loc 1 2548 0 is_stmt 1
 10165 015a 0C4B     		ldr	r3, .L526+20
 10166 015c 1B78     		ldrb	r3, [r3]
 10167 015e DBB2     		uxtb	r3, r3
 10168 0160 042B     		cmp	r3, #4
 10169 0162 3FF47FAF 		beq	.L525
2570:bluetooth_rxtx.c **** 		}
2571:bluetooth_rxtx.c **** 	}
2572:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10170              		.loc 1 2572 0
 10171 0166 0A4B     		ldr	r3, .L526+24
 10172 0168 0022     		movs	r2, #0
 10173 016a 1A70     		strb	r2, [r3]
2573:bluetooth_rxtx.c **** 	RXLED_CLR;
 10174              		.loc 1 2573 0
 10175 016c 094B     		ldr	r3, .L526+28
 10176 016e 1022     		movs	r2, #16
 10177 0170 1A60     		str	r2, [r3]
2574:bluetooth_rxtx.c **** }
 10178              		.loc 1 2574 0
 10179 0172 4437     		adds	r7, r7, #68
 10180              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccvLzxWr.s 			page 224


 10181 0174 BD46     		mov	sp, r7
 10182              		.cfi_def_cfa_register 13
 10183              		@ sp needed
 10184 0176 90BD     		pop	{r4, r7, pc}
 10185              	.L527:
 10186              		.align	2
 10187              	.L526:
 10188 0178 38C00920 		.word	537509944
 10189 017c 58C00920 		.word	537509976
 10190 0180 00000000 		.word	low_freq
 10191 0184 00000000 		.word	clkn
 10192 0188 00000000 		.word	high_freq
 10193 018c 00000000 		.word	requested_mode
 10194 0190 00000000 		.word	mode
 10195 0194 3CC00920 		.word	537509948
 10196              		.cfi_endproc
 10197              	.LFE47:
 10199              		.section	.rodata
 10200 08ea 0000     		.align	2
 10201              	.LC2:
 10202 08ec 6C09     		.short	2412
 10203 08ee 8509     		.short	2437
 10204 08f0 9E09     		.short	2462
 10205              		.section	.text.led_specan,"ax",%progbits
 10206              		.align	2
 10207              		.global	led_specan
 10208              		.thumb
 10209              		.thumb_func
 10211              	led_specan:
 10212              	.LFB48:
2575:bluetooth_rxtx.c **** 
2576:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2577:bluetooth_rxtx.c **** void led_specan()
2578:bluetooth_rxtx.c **** {
 10213              		.loc 1 2578 0
 10214              		.cfi_startproc
 10215              		@ args = 0, pretend = 0, frame = 16
 10216              		@ frame_needed = 1, uses_anonymous_args = 0
 10217 0000 80B5     		push	{r7, lr}
 10218              		.cfi_def_cfa_offset 8
 10219              		.cfi_offset 7, -8
 10220              		.cfi_offset 14, -4
 10221 0002 84B0     		sub	sp, sp, #16
 10222              		.cfi_def_cfa_offset 24
 10223 0004 00AF     		add	r7, sp, #0
 10224              		.cfi_def_cfa_register 7
2579:bluetooth_rxtx.c **** 	int8_t lvl;
2580:bluetooth_rxtx.c **** 	u8 i = 0;
 10225              		.loc 1 2580 0
 10226 0006 0023     		movs	r3, #0
 10227 0008 FB73     		strb	r3, [r7, #15]
2581:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 10228              		.loc 1 2581 0
 10229 000a 5B4A     		ldr	r2, .L545
 10230 000c 07F10803 		add	r3, r7, #8
 10231 0010 1068     		ldr	r0, [r2]	@ unaligned
 10232 0012 1860     		str	r0, [r3]	@ unaligned
ARM GAS  /tmp/ccvLzxWr.s 			page 225


 10233 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 10234 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2582:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2583:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2584:bluetooth_rxtx.c **** 
2585:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2586:bluetooth_rxtx.c **** 	PAEN_SET;
 10235              		.loc 1 2586 0
 10236 0018 584B     		ldr	r3, .L545+4
 10237 001a 8022     		movs	r2, #128
 10238 001c 1A60     		str	r2, [r3]
2587:bluetooth_rxtx.c **** 	//HGM_SET;
2588:bluetooth_rxtx.c **** #endif
2589:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10239              		.loc 1 2589 0
 10240 001e 1220     		movs	r0, #18
 10241 0020 42F62231 		movw	r1, #11042
 10242 0024 FFF7FEFF 		bl	cc2400_set
2590:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10243              		.loc 1 2590 0
 10244 0028 1420     		movs	r0, #20
 10245 002a 41F24B31 		movw	r1, #4939
 10246 002e FFF7FEFF 		bl	cc2400_set
2591:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10247              		.loc 1 2591 0
 10248 0032 2020     		movs	r0, #32
 10249 0034 40F20111 		movw	r1, #257
 10250 0038 FFF7FEFF 		bl	cc2400_set
2592:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10251              		.loc 1 2592 0
 10252 003c 0320     		movs	r0, #3
 10253 003e 2921     		movs	r1, #41
 10254 0040 FFF7FEFF 		bl	cc2400_set
2593:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 10255              		.loc 1 2593 0
 10256 0044 0620     		movs	r0, #6
 10257 0046 F121     		movs	r1, #241
 10258 0048 FFF7FEFF 		bl	cc2400_set
2594:bluetooth_rxtx.c **** 
2595:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10259              		.loc 1 2595 0
 10260 004c 00BF     		nop
 10261              	.L529:
 10262              		.loc 1 2595 0 is_stmt 0 discriminator 1
 10263 004e FFF7FEFF 		bl	cc2400_status
 10264 0052 0346     		mov	r3, r0
 10265 0054 03F04003 		and	r3, r3, #64
 10266 0058 002B     		cmp	r3, #0
 10267 005a F8D0     		beq	.L529
2596:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10268              		.loc 1 2596 0 is_stmt 1
 10269 005c 00BF     		nop
 10270              	.L530:
 10271              		.loc 1 2596 0 is_stmt 0 discriminator 1
 10272 005e FFF7FEFF 		bl	cc2400_status
 10273 0062 0346     		mov	r3, r0
 10274 0064 03F00403 		and	r3, r3, #4
ARM GAS  /tmp/ccvLzxWr.s 			page 226


 10275 0068 002B     		cmp	r3, #0
 10276 006a F8D1     		bne	.L530
2597:bluetooth_rxtx.c **** 
2598:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 10277              		.loc 1 2598 0 is_stmt 1
 10278 006c 79E0     		b	.L531
 10279              	.L544:
 10280              	.LBB21:
2599:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10281              		.loc 1 2599 0
 10282 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10283 0070 5B00     		lsls	r3, r3, #1
 10284 0072 07F11002 		add	r2, r7, #16
 10285 0076 1344     		add	r3, r3, r2
 10286 0078 33F8083C 		ldrh	r3, [r3, #-8]
 10287 007c 013B     		subs	r3, r3, #1
 10288 007e 9BB2     		uxth	r3, r3
 10289 0080 0220     		movs	r0, #2
 10290 0082 1946     		mov	r1, r3
 10291 0084 FFF7FEFF 		bl	cc2400_set
2600:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 10292              		.loc 1 2600 0
 10293 0088 6120     		movs	r0, #97
 10294 008a FFF7FEFF 		bl	cc2400_strobe
2601:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 10295              		.loc 1 2601 0
 10296 008e 00BF     		nop
 10297              	.L532:
 10298              		.loc 1 2601 0 is_stmt 0 discriminator 1
 10299 0090 FFF7FEFF 		bl	cc2400_status
 10300 0094 0346     		mov	r3, r0
 10301 0096 03F00403 		and	r3, r3, #4
 10302 009a 002B     		cmp	r3, #0
 10303 009c F8D0     		beq	.L532
2602:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 10304              		.loc 1 2602 0 is_stmt 1
 10305 009e 6220     		movs	r0, #98
 10306 00a0 FFF7FEFF 		bl	cc2400_strobe
2603:bluetooth_rxtx.c **** 
2604:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2605:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 10307              		.loc 1 2605 0
 10308 00a4 4FF4FA73 		mov	r3, #500
 10309 00a8 7B60     		str	r3, [r7, #4]
 10310 00aa 00BF     		nop
 10311              	.L533:
 10312              		.loc 1 2605 0 is_stmt 0 discriminator 2
 10313 00ac 7B68     		ldr	r3, [r7, #4]
 10314 00ae 013B     		subs	r3, r3, #1
 10315 00b0 7B60     		str	r3, [r7, #4]
 10316 00b2 002B     		cmp	r3, #0
 10317 00b4 FAD1     		bne	.L533
2606:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 10318              		.loc 1 2606 0 is_stmt 1
 10319 00b6 0620     		movs	r0, #6
 10320 00b8 FFF7FEFF 		bl	cc2400_get
 10321 00bc 0346     		mov	r3, r0
ARM GAS  /tmp/ccvLzxWr.s 			page 227


 10322 00be 1B0A     		lsrs	r3, r3, #8
 10323 00c0 9BB2     		uxth	r3, r3
 10324 00c2 BB73     		strb	r3, [r7, #14]
2607:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 10325              		.loc 1 2607 0
 10326 00c4 2E4B     		ldr	r3, .L545+8
 10327 00c6 1B78     		ldrb	r3, [r3]
 10328 00c8 DBB2     		uxtb	r3, r3
 10329 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 10330 00ce 5BB2     		sxtb	r3, r3
 10331 00d0 9A42     		cmp	r2, r3
 10332 00d2 15DD     		ble	.L534
2608:bluetooth_rxtx.c ****             switch (i) {
 10333              		.loc 1 2608 0
 10334 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10335 00d6 012B     		cmp	r3, #1
 10336 00d8 09D0     		beq	.L536
 10337 00da 022B     		cmp	r3, #2
 10338 00dc 0BD0     		beq	.L537
 10339 00de 002B     		cmp	r3, #0
 10340 00e0 00D0     		beq	.L538
 10341 00e2 21E0     		b	.L539
 10342              	.L538:
2609:bluetooth_rxtx.c ****                 case 0:
2610:bluetooth_rxtx.c ****                     TXLED_SET;
 10343              		.loc 1 2610 0
 10344 00e4 274B     		ldr	r3, .L545+12
 10345 00e6 4FF48072 		mov	r2, #256
 10346 00ea 1A60     		str	r2, [r3]
2611:bluetooth_rxtx.c ****                     break;
 10347              		.loc 1 2611 0
 10348 00ec 07E0     		b	.L535
 10349              	.L536:
2612:bluetooth_rxtx.c ****                 case 1:
2613:bluetooth_rxtx.c ****                     RXLED_SET;
 10350              		.loc 1 2613 0
 10351 00ee 254B     		ldr	r3, .L545+12
 10352 00f0 1022     		movs	r2, #16
 10353 00f2 1A60     		str	r2, [r3]
2614:bluetooth_rxtx.c ****                     break;
 10354              		.loc 1 2614 0
 10355 00f4 03E0     		b	.L535
 10356              	.L537:
2615:bluetooth_rxtx.c ****                 case 2:
2616:bluetooth_rxtx.c ****                     USRLED_SET;
 10357              		.loc 1 2616 0
 10358 00f6 234B     		ldr	r3, .L545+12
 10359 00f8 0222     		movs	r2, #2
 10360 00fa 1A60     		str	r2, [r3]
2617:bluetooth_rxtx.c ****                     break;
 10361              		.loc 1 2617 0
 10362 00fc 00BF     		nop
 10363              	.L535:
 10364 00fe 13E0     		b	.L539
 10365              	.L534:
2618:bluetooth_rxtx.c ****             }
2619:bluetooth_rxtx.c ****         }
ARM GAS  /tmp/ccvLzxWr.s 			page 228


2620:bluetooth_rxtx.c ****         else {
2621:bluetooth_rxtx.c ****             switch (i) {
 10366              		.loc 1 2621 0
 10367 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10368 0102 012B     		cmp	r3, #1
 10369 0104 08D0     		beq	.L540
 10370 0106 022B     		cmp	r3, #2
 10371 0108 0AD0     		beq	.L541
 10372 010a 002B     		cmp	r3, #0
 10373 010c 0CD1     		bne	.L539
2622:bluetooth_rxtx.c ****                 case 0:
2623:bluetooth_rxtx.c ****                     TXLED_CLR;
 10374              		.loc 1 2623 0
 10375 010e 1E4B     		ldr	r3, .L545+16
 10376 0110 4FF48072 		mov	r2, #256
 10377 0114 1A60     		str	r2, [r3]
2624:bluetooth_rxtx.c ****                     break;
 10378              		.loc 1 2624 0
 10379 0116 07E0     		b	.L539
 10380              	.L540:
2625:bluetooth_rxtx.c ****                 case 1:
2626:bluetooth_rxtx.c ****                     RXLED_CLR;
 10381              		.loc 1 2626 0
 10382 0118 1B4B     		ldr	r3, .L545+16
 10383 011a 1022     		movs	r2, #16
 10384 011c 1A60     		str	r2, [r3]
2627:bluetooth_rxtx.c ****                     break;
 10385              		.loc 1 2627 0
 10386 011e 03E0     		b	.L539
 10387              	.L541:
2628:bluetooth_rxtx.c ****                 case 2:
2629:bluetooth_rxtx.c ****                     USRLED_CLR;
 10388              		.loc 1 2629 0
 10389 0120 194B     		ldr	r3, .L545+16
 10390 0122 0222     		movs	r2, #2
 10391 0124 1A60     		str	r2, [r3]
2630:bluetooth_rxtx.c ****                     break;
 10392              		.loc 1 2630 0
 10393 0126 00BF     		nop
 10394              	.L539:
2631:bluetooth_rxtx.c ****             }
2632:bluetooth_rxtx.c ****         }
2633:bluetooth_rxtx.c **** 
2634:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 10395              		.loc 1 2634 0
 10396 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10397 012a 5A1C     		adds	r2, r3, #1
 10398 012c 174B     		ldr	r3, .L545+20
 10399 012e 83FB0231 		smull	r3, r1, r3, r2
 10400 0132 D317     		asrs	r3, r2, #31
 10401 0134 C91A     		subs	r1, r1, r3
 10402 0136 0B46     		mov	r3, r1
 10403 0138 5B00     		lsls	r3, r3, #1
 10404 013a 0B44     		add	r3, r3, r1
 10405 013c D11A     		subs	r1, r2, r3
 10406 013e 0B46     		mov	r3, r1
 10407 0140 FB73     		strb	r3, [r7, #15]
ARM GAS  /tmp/ccvLzxWr.s 			page 229


2635:bluetooth_rxtx.c **** 
2636:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10408              		.loc 1 2636 0
 10409 0142 134B     		ldr	r3, .L545+24
 10410 0144 1B68     		ldr	r3, [r3]
 10411 0146 1846     		mov	r0, r3
 10412 0148 FFF7FEFF 		bl	handle_usb
2637:bluetooth_rxtx.c ****         //wait(1);
2638:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 10413              		.loc 1 2638 0
 10414 014c 6420     		movs	r0, #100
 10415 014e FFF7FEFF 		bl	cc2400_strobe
2639:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 10416              		.loc 1 2639 0
 10417 0152 00BF     		nop
 10418              	.L543:
 10419              		.loc 1 2639 0 is_stmt 0 discriminator 1
 10420 0154 FFF7FEFF 		bl	cc2400_status
 10421 0158 0346     		mov	r3, r0
 10422 015a 03F00403 		and	r3, r3, #4
 10423 015e 002B     		cmp	r3, #0
 10424 0160 F8D1     		bne	.L543
 10425              	.L531:
 10426              	.LBE21:
2598:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10427              		.loc 1 2598 0 is_stmt 1
 10428 0162 0C4B     		ldr	r3, .L545+28
 10429 0164 1B78     		ldrb	r3, [r3]
 10430 0166 DBB2     		uxtb	r3, r3
 10431 0168 072B     		cmp	r3, #7
 10432 016a 80D0     		beq	.L544
2640:bluetooth_rxtx.c **** 	}
2641:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10433              		.loc 1 2641 0
 10434 016c 0A4B     		ldr	r3, .L545+32
 10435 016e 0022     		movs	r2, #0
 10436 0170 1A70     		strb	r2, [r3]
2642:bluetooth_rxtx.c **** }
 10437              		.loc 1 2642 0
 10438 0172 1037     		adds	r7, r7, #16
 10439              		.cfi_def_cfa_offset 8
 10440 0174 BD46     		mov	sp, r7
 10441              		.cfi_def_cfa_register 13
 10442              		@ sp needed
 10443 0176 80BD     		pop	{r7, pc}
 10444              	.L546:
 10445              		.align	2
 10446              	.L545:
 10447 0178 EC080000 		.word	.LC2
 10448 017c 58C00920 		.word	537509976
 10449 0180 00000000 		.word	rssi_threshold
 10450 0184 38C00920 		.word	537509944
 10451 0188 3CC00920 		.word	537509948
 10452 018c 56555555 		.word	1431655766
 10453 0190 00000000 		.word	clkn
 10454 0194 00000000 		.word	requested_mode
 10455 0198 00000000 		.word	mode
ARM GAS  /tmp/ccvLzxWr.s 			page 230


 10456              		.cfi_endproc
 10457              	.LFE48:
 10459              		.section	.text.main,"ax",%progbits
 10460              		.align	2
 10461              		.global	main
 10462              		.thumb
 10463              		.thumb_func
 10465              	main:
 10466              	.LFB49:
2643:bluetooth_rxtx.c **** 
2644:bluetooth_rxtx.c **** int main()
2645:bluetooth_rxtx.c **** {
 10467              		.loc 1 2645 0
 10468              		.cfi_startproc
 10469              		@ args = 0, pretend = 0, frame = 0
 10470              		@ frame_needed = 1, uses_anonymous_args = 0
 10471 0000 80B5     		push	{r7, lr}
 10472              		.cfi_def_cfa_offset 8
 10473              		.cfi_offset 7, -8
 10474              		.cfi_offset 14, -4
 10475 0002 00AF     		add	r7, sp, #0
 10476              		.cfi_def_cfa_register 7
2646:bluetooth_rxtx.c **** 	ubertooth_init();
 10477              		.loc 1 2646 0
 10478 0004 FFF7FEFF 		bl	ubertooth_init
2647:bluetooth_rxtx.c **** 	clkn_init();
 10479              		.loc 1 2647 0
 10480 0008 FFF7FEFF 		bl	clkn_init
2648:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 10481              		.loc 1 2648 0
 10482 000c 4248     		ldr	r0, .L567
 10483 000e FFF7FEFF 		bl	ubertooth_usb_init
 10484              	.L565:
2649:bluetooth_rxtx.c **** 
2650:bluetooth_rxtx.c **** 	while (1) {
2651:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10485              		.loc 1 2651 0
 10486 0012 424B     		ldr	r3, .L567+4
 10487 0014 1B68     		ldr	r3, [r3]
 10488 0016 1846     		mov	r0, r3
 10489 0018 FFF7FEFF 		bl	handle_usb
2652:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 10490              		.loc 1 2652 0
 10491 001c 404B     		ldr	r3, .L567+8
 10492 001e 1B78     		ldrb	r3, [r3]
 10493 0020 DAB2     		uxtb	r2, r3
 10494 0022 404B     		ldr	r3, .L567+12
 10495 0024 1B78     		ldrb	r3, [r3]
 10496 0026 DBB2     		uxtb	r3, r3
 10497 0028 9A42     		cmp	r2, r3
 10498 002a 74D0     		beq	.L548
2653:bluetooth_rxtx.c **** 			switch (requested_mode) {
 10499              		.loc 1 2653 0
 10500 002c 3C4B     		ldr	r3, .L567+8
 10501 002e 1B78     		ldrb	r3, [r3]
 10502 0030 DBB2     		uxtb	r3, r3
 10503 0032 0D2B     		cmp	r3, #13
ARM GAS  /tmp/ccvLzxWr.s 			page 231


 10504 0034 6ED8     		bhi	.L566
 10505 0036 01A2     		adr	r2, .L551
 10506 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 10507              		.p2align 2
 10508              	.L551:
 10509 003c 0F010000 		.word	.L550+1
 10510 0040 81000000 		.word	.L552+1
 10511 0044 15010000 		.word	.L566+1
 10512 0048 AB000000 		.word	.L553+1
 10513 004c EF000000 		.word	.L554+1
 10514 0050 BB000000 		.word	.L555+1
 10515 0054 E1000000 		.word	.L556+1
 10516 0058 F5000000 		.word	.L557+1
 10517 005c 8D000000 		.word	.L558+1
 10518 0060 99000000 		.word	.L559+1
 10519 0064 9F000000 		.word	.L560+1
 10520 0068 75000000 		.word	.L561+1
 10521 006c A5000000 		.word	.L562+1
 10522 0070 FB000000 		.word	.L563+1
 10523              		.p2align 1
 10524              	.L561:
2654:bluetooth_rxtx.c **** 				 case MODE_RESET:
2655:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2656:bluetooth_rxtx.c **** 					wait(1);
 10525              		.loc 1 2656 0
 10526 0074 0120     		movs	r0, #1
 10527 0076 FFF7FEFF 		bl	wait
2657:bluetooth_rxtx.c **** 					reset();
 10528              		.loc 1 2657 0
 10529 007a FFF7FEFF 		bl	reset
2658:bluetooth_rxtx.c **** 					break;
 10530              		.loc 1 2658 0
 10531 007e 4AE0     		b	.L548
 10532              	.L552:
2659:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2660:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 10533              		.loc 1 2660 0
 10534 0080 284B     		ldr	r3, .L567+12
 10535 0082 0122     		movs	r2, #1
 10536 0084 1A70     		strb	r2, [r3]
2661:bluetooth_rxtx.c **** 					bt_stream_rx();
 10537              		.loc 1 2661 0
 10538 0086 FFF7FEFF 		bl	bt_stream_rx
2662:bluetooth_rxtx.c **** 					break;
 10539              		.loc 1 2662 0
 10540 008a 44E0     		b	.L548
 10541              	.L558:
2663:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2664:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 10542              		.loc 1 2664 0
 10543 008c 254B     		ldr	r3, .L567+12
 10544 008e 0822     		movs	r2, #8
 10545 0090 1A70     		strb	r2, [r3]
2665:bluetooth_rxtx.c **** 					bt_stream_rx();
 10546              		.loc 1 2665 0
 10547 0092 FFF7FEFF 		bl	bt_stream_rx
2666:bluetooth_rxtx.c **** 					break;
ARM GAS  /tmp/ccvLzxWr.s 			page 232


 10548              		.loc 1 2666 0
 10549 0096 3EE0     		b	.L548
 10550              	.L559:
2667:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2668:bluetooth_rxtx.c **** 					bt_follow_le();
 10551              		.loc 1 2668 0
 10552 0098 FFF7FEFF 		bl	bt_follow_le
2669:bluetooth_rxtx.c **** 					break;
 10553              		.loc 1 2669 0
 10554 009c 3BE0     		b	.L548
 10555              	.L560:
2670:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2671:bluetooth_rxtx.c **** 					bt_promisc_le();
 10556              		.loc 1 2671 0
 10557 009e FFF7FEFF 		bl	bt_promisc_le
2672:bluetooth_rxtx.c **** 					break;
 10558              		.loc 1 2672 0
 10559 00a2 38E0     		b	.L548
 10560              	.L562:
2673:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2674:bluetooth_rxtx.c **** 					bt_slave_le();
 10561              		.loc 1 2674 0
 10562 00a4 FFF7FEFF 		bl	bt_slave_le
2675:bluetooth_rxtx.c **** 					break;
 10563              		.loc 1 2675 0
 10564 00a8 35E0     		b	.L548
 10565              	.L553:
2676:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2677:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 10566              		.loc 1 2677 0
 10567 00aa 1E4B     		ldr	r3, .L567+12
 10568 00ac 0322     		movs	r2, #3
 10569 00ae 1A70     		strb	r2, [r3]
2678:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 10570              		.loc 1 2678 0
 10571 00b0 1D48     		ldr	r0, .L567+16
 10572 00b2 1E49     		ldr	r1, .L567+20
 10573 00b4 FFF7FEFF 		bl	cc2400_txtest
2679:bluetooth_rxtx.c **** 					break;
 10574              		.loc 1 2679 0
 10575 00b8 2DE0     		b	.L548
 10576              	.L555:
2680:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2681:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 10577              		.loc 1 2681 0
 10578 00ba 1A4B     		ldr	r3, .L567+12
 10579 00bc 0522     		movs	r2, #5
 10580 00be 1A70     		strb	r2, [r3]
2682:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 10581              		.loc 1 2682 0
 10582 00c0 1A48     		ldr	r0, .L567+20
 10583 00c2 FFF7FEFF 		bl	cc2400_rangetest
2683:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 10584              		.loc 1 2683 0
 10585 00c6 174B     		ldr	r3, .L567+12
 10586 00c8 0022     		movs	r2, #0
 10587 00ca 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccvLzxWr.s 			page 233


2684:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 10588              		.loc 1 2684 0
 10589 00cc 144B     		ldr	r3, .L567+8
 10590 00ce 1B78     		ldrb	r3, [r3]
 10591 00d0 DBB2     		uxtb	r3, r3
 10592 00d2 052B     		cmp	r3, #5
 10593 00d4 03D1     		bne	.L564
2685:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 10594              		.loc 1 2685 0
 10595 00d6 124B     		ldr	r3, .L567+8
 10596 00d8 0022     		movs	r2, #0
 10597 00da 1A70     		strb	r2, [r3]
2686:bluetooth_rxtx.c **** 					break;
 10598              		.loc 1 2686 0
 10599 00dc 1BE0     		b	.L548
 10600              	.L564:
 10601 00de 1AE0     		b	.L548
 10602              	.L556:
2687:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2688:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 10603              		.loc 1 2688 0
 10604 00e0 104B     		ldr	r3, .L567+12
 10605 00e2 0622     		movs	r2, #6
 10606 00e4 1A70     		strb	r2, [r3]
2689:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 10607              		.loc 1 2689 0
 10608 00e6 1148     		ldr	r0, .L567+20
 10609 00e8 FFF7FEFF 		bl	cc2400_repeater
2690:bluetooth_rxtx.c **** 					break;
 10610              		.loc 1 2690 0
 10611 00ec 13E0     		b	.L548
 10612              	.L554:
2691:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2692:bluetooth_rxtx.c **** 					specan();
 10613              		.loc 1 2692 0
 10614 00ee FFF7FEFF 		bl	specan
2693:bluetooth_rxtx.c **** 					break;
 10615              		.loc 1 2693 0
 10616 00f2 10E0     		b	.L548
 10617              	.L557:
2694:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2695:bluetooth_rxtx.c **** 					led_specan();
 10618              		.loc 1 2695 0
 10619 00f4 FFF7FEFF 		bl	led_specan
2696:bluetooth_rxtx.c **** 					break;
 10620              		.loc 1 2696 0
 10621 00f8 0DE0     		b	.L548
 10622              	.L563:
2697:bluetooth_rxtx.c **** 				case MODE_EGO:
2698:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 10623              		.loc 1 2698 0
 10624 00fa 0A4B     		ldr	r3, .L567+12
 10625 00fc 0D22     		movs	r2, #13
 10626 00fe 1A70     		strb	r2, [r3]
2699:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 10627              		.loc 1 2699 0
 10628 0100 0B4B     		ldr	r3, .L567+24
ARM GAS  /tmp/ccvLzxWr.s 			page 234


 10629 0102 1B78     		ldrb	r3, [r3]
 10630 0104 DBB2     		uxtb	r3, r3
 10631 0106 1846     		mov	r0, r3
 10632 0108 FFF7FEFF 		bl	ego_main
2700:bluetooth_rxtx.c **** 					break;
 10633              		.loc 1 2700 0
 10634 010c 03E0     		b	.L548
 10635              	.L550:
2701:bluetooth_rxtx.c **** 				case MODE_IDLE:
2702:bluetooth_rxtx.c **** 					cc2400_idle();
 10636              		.loc 1 2702 0
 10637 010e FFF7FEFF 		bl	cc2400_idle
2703:bluetooth_rxtx.c **** 					break;
 10638              		.loc 1 2703 0
 10639 0112 00E0     		b	.L548
 10640              	.L566:
2704:bluetooth_rxtx.c **** 				default:
2705:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2706:bluetooth_rxtx.c **** 					break;
 10641              		.loc 1 2706 0
 10642 0114 00BF     		nop
 10643              	.L548:
2707:bluetooth_rxtx.c **** 			}
2708:bluetooth_rxtx.c **** 	}
 10644              		.loc 1 2708 0 discriminator 1
 10645 0116 7CE7     		b	.L565
 10646              	.L568:
 10647              		.align	2
 10648              	.L567:
 10649 0118 00000000 		.word	vendor_request_handler
 10650 011c 00000000 		.word	clkn
 10651 0120 00000000 		.word	requested_mode
 10652 0124 00000000 		.word	mode
 10653 0128 00000000 		.word	modulation
 10654 012c 00000000 		.word	channel
 10655 0130 00000000 		.word	ego_mode
 10656              		.cfi_endproc
 10657              	.LFE49:
 10659              		.bss
 10660              		.align	2
 10661              	restart_jamming.4716:
 10662 00d4 00000000 		.space	4
 10663              		.align	2
 10664              	first_ts.4814:
 10665 00d8 00000000 		.space	4
 10666              		.align	2
 10667              	prev_clk.4820:
 10668 00dc 00000000 		.space	4
 10669              		.text
 10670              	.Letext0:
 10671              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 10672              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 10673              		.file 4 "../common/ubertooth.h"
 10674              		.file 5 "bluetooth_le.h"
 10675              		.file 6 "bluetooth.h"
 10676              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccvLzxWr.s 			page 235


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccvLzxWr.s:19     .data:0000000000000000 $d
     /tmp/ccvLzxWr.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccvLzxWr.s:29     .rodata:0000000000000000 $d
     /tmp/ccvLzxWr.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccvLzxWr.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccvLzxWr.s:80     .rodata:000000000000002c whitening
     /tmp/ccvLzxWr.s:211    .rodata:00000000000000ac whitening_index
     /tmp/ccvLzxWr.s:255    .rodata:00000000000000d4 hop_interval_lut
     /tmp/ccvLzxWr.s:296    .rodata:00000000000000fc whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccvLzxWr.s:782    .rodata:000000000000087c compile_info
                            *COM*:0000000000000004 first_ts
                            *COM*:0000000000000004 second_ts
                            *COM*:0000000000000004 diff_ts
                            *COM*:0000000000000004 clkn
     /tmp/ccvLzxWr.s:793    .bss:0000000000000000 hop_mode
     /tmp/ccvLzxWr.s:794    .bss:0000000000000000 $d
     /tmp/ccvLzxWr.s:798    .bss:0000000000000001 do_hop
     /tmp/ccvLzxWr.s:803    .bss:0000000000000002 cs_no_squelch
     /tmp/ccvLzxWr.s:809    .data:0000000000000004 cs_threshold_req
     /tmp/ccvLzxWr.s:814    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/ccvLzxWr.s:824    .bss:0000000000000004 hop_direct_channel
     /tmp/ccvLzxWr.s:830    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/ccvLzxWr.s:840    .bss:000000000000000c idle_buf_channel
     /tmp/ccvLzxWr.s:846    .bss:000000000000000e active_buf_channel
     /tmp/ccvLzxWr.s:852    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccvLzxWr.s:861    .data:0000000000000008 active_rxbuf
     /tmp/ccvLzxWr.s:867    .data:000000000000000c idle_rxbuf
     /tmp/ccvLzxWr.s:873    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccvLzxWr.s:892    .bss:0000000000000018 le_jam_count
     /tmp/ccvLzxWr.s:898    .bss:000000000000001c data_cb
     /tmp/ccvLzxWr.s:904    .bss:0000000000000020 packet_cb
     /tmp/ccvLzxWr.s:910    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/ccvLzxWr.s:916    .bss:00000000000000c2 mode
     /tmp/ccvLzxWr.s:921    .bss:00000000000000c3 requested_mode
     /tmp/ccvLzxWr.s:926    .bss:00000000000000c4 jam_mode
     /tmp/ccvLzxWr.s:931    .bss:00000000000000c5 ego_mode
     /tmp/ccvLzxWr.s:936    .bss:00000000000000c6 modulation
     /tmp/ccvLzxWr.s:943    .data:0000000000000054 channel
     /tmp/ccvLzxWr.s:950    .bss:00000000000000c8 requested_channel
ARM GAS  /tmp/ccvLzxWr.s 			page 236


     /tmp/ccvLzxWr.s:956    .bss:00000000000000ca saved_request
     /tmp/ccvLzxWr.s:963    .data:0000000000000056 low_freq
     /tmp/ccvLzxWr.s:969    .data:0000000000000058 high_freq
     /tmp/ccvLzxWr.s:974    .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccvLzxWr.s:985    .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/ccvLzxWr.s:992    .bss:00000000000000cd rssi_count
     /tmp/ccvLzxWr.s:998    .bss:00000000000000d0 rssi_sum
                            *COM*:0000000000000001 rssi_avg
                            *COM*:0000000000000001 freq_avg
     /tmp/ccvLzxWr.s:1003   .text.rssi_reset:0000000000000000 $t
     /tmp/ccvLzxWr.s:1007   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccvLzxWr.s:1047   .text.rssi_reset:0000000000000024 $d
     /tmp/ccvLzxWr.s:1055   .text.rssi_add:0000000000000000 $t
     /tmp/ccvLzxWr.s:1059   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccvLzxWr.s:1125   .text.rssi_add:000000000000005c $d
     /tmp/ccvLzxWr.s:1133   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccvLzxWr.s:1137   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccvLzxWr.s:1231   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccvLzxWr.s:1240   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccvLzxWr.s:1244   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccvLzxWr.s:1326   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccvLzxWr.s:1332   .text.enqueue:0000000000000000 $t
     /tmp/ccvLzxWr.s:1336   .text.enqueue:0000000000000000 enqueue
     /tmp/ccvLzxWr.s:1540   .text.enqueue:0000000000000138 $d
     /tmp/ccvLzxWr.s:1551   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccvLzxWr.s:1556   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccvLzxWr.s:1650   .text.enqueue_with_ts:0000000000000080 $d
     /tmp/ccvLzxWr.s:1659   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccvLzxWr.s:1663   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccvLzxWr.s:1738   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccvLzxWr.s:1746   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccvLzxWr.s:1750   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccvLzxWr.s:1791   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccvLzxWr.s:1799   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccvLzxWr.s:1803   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccvLzxWr.s:1844   .text.cs_trigger_disable:000000000000002c $d
     /tmp/ccvLzxWr.s:1856   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccvLzxWr.s:1860   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccvLzxWr.s:1897   .text.vendor_request_handler:0000000000000024 $d
     /tmp/ccvLzxWr.s:1958   .text.vendor_request_handler:0000000000000118 $t
     /tmp/ccvLzxWr.s:2358   .text.vendor_request_handler:00000000000003a8 $d
     /tmp/ccvLzxWr.s:2368   .text.vendor_request_handler:00000000000003c8 $t
     /tmp/ccvLzxWr.s:2752   .text.vendor_request_handler:0000000000000614 $d
     /tmp/ccvLzxWr.s:2770   .text.vendor_request_handler:0000000000000654 $t
     /tmp/ccvLzxWr.s:3160   .text.vendor_request_handler:00000000000008f4 $d
     /tmp/ccvLzxWr.s:3172   .text.vendor_request_handler:000000000000091c $t
     /tmp/ccvLzxWr.s:6282   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccvLzxWr.s:3456   .text.vendor_request_handler:0000000000000ad4 $d
     /tmp/ccvLzxWr.s:3466   .text.clkn_init:0000000000000000 $t
     /tmp/ccvLzxWr.s:3470   .text.clkn_init:0000000000000000 clkn_init
ARM GAS  /tmp/ccvLzxWr.s 			page 237


     /tmp/ccvLzxWr.s:3521   .text.clkn_init:0000000000000038 $d
     /tmp/ccvLzxWr.s:3531   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccvLzxWr.s:3536   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/ccvLzxWr.s:3705   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/ccvLzxWr.s:3717   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccvLzxWr.s:3722   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccvLzxWr.s:3764   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/ccvLzxWr.s:3778   .text.msleep:0000000000000000 $t
     /tmp/ccvLzxWr.s:3782   .text.msleep:0000000000000000 msleep
     /tmp/ccvLzxWr.s:3851   .text.msleep:0000000000000070 $d
     /tmp/ccvLzxWr.s:3859   .text.dma_init:0000000000000000 $t
     /tmp/ccvLzxWr.s:3863   .text.dma_init:0000000000000000 dma_init
     /tmp/ccvLzxWr.s:4037   .text.dma_init:0000000000000104 $d
     /tmp/ccvLzxWr.s:4072   .text.dma_init_le:0000000000000000 $t
     /tmp/ccvLzxWr.s:4076   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccvLzxWr.s:4281   .text.dma_init_le:0000000000000134 $d
     /tmp/ccvLzxWr.s:4313   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccvLzxWr.s:4318   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccvLzxWr.s:4421   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/ccvLzxWr.s:4441   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccvLzxWr.s:4446   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccvLzxWr.s:4469   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccvLzxWr.s:4481   .text.DMA_IRQHandler:0000000000000048 $t
     /tmp/ccvLzxWr.s:4493   .text.DMA_IRQHandler:0000000000000050 $d
     /tmp/ccvLzxWr.s:4498   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccvLzxWr.s:4502   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccvLzxWr.s:4555   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccvLzxWr.s:4565   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccvLzxWr.s:4569   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccvLzxWr.s:4667   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccvLzxWr.s:4686   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccvLzxWr.s:4690   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccvLzxWr.s:4743   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccvLzxWr.s:4750   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccvLzxWr.s:4754   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccvLzxWr.s:4868   .text.cc2400_rx:00000000000000b0 $d
     /tmp/ccvLzxWr.s:4875   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccvLzxWr.s:4879   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccvLzxWr.s:5014   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccvLzxWr.s:5021   .text.le_transmit:0000000000000000 $t
     /tmp/ccvLzxWr.s:5026   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccvLzxWr.s:5419   .text.le_transmit:00000000000002d4 $d
     /tmp/ccvLzxWr.s:5432   .text.le_jam:0000000000000000 $t
     /tmp/ccvLzxWr.s:5437   .text.le_jam:0000000000000000 le_jam
     /tmp/ccvLzxWr.s:5520   .text.le_jam:000000000000008c $d
     /tmp/ccvLzxWr.s:5526   .text.hop:0000000000000000 $t
     /tmp/ccvLzxWr.s:5531   .text.hop:0000000000000000 hop
     /tmp/ccvLzxWr.s:5698   .text.hop:000000000000010c $d
     /tmp/ccvLzxWr.s:5709   .text.cc2400_spi_rev:0000000000000000 $t
     /tmp/ccvLzxWr.s:5714   .text.cc2400_spi_rev:0000000000000000 cc2400_spi_rev
     /tmp/ccvLzxWr.s:5811   .text.cc2400_spi_rev:000000000000007c $d
     /tmp/ccvLzxWr.s:5818   .text.cc2400_get_rev:0000000000000000 $t
     /tmp/ccvLzxWr.s:5823   .text.cc2400_get_rev:0000000000000000 cc2400_get_rev
     /tmp/ccvLzxWr.s:5865   .text.convert_to_int:0000000000000000 $t
     /tmp/ccvLzxWr.s:5870   .text.convert_to_int:0000000000000000 convert_to_int
     /tmp/ccvLzxWr.s:5916   .text.add:0000000000000000 $t
     /tmp/ccvLzxWr.s:5921   .text.add:0000000000000000 add
ARM GAS  /tmp/ccvLzxWr.s 			page 238


     /tmp/ccvLzxWr.s:5981   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccvLzxWr.s:5986   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccvLzxWr.s:6265   .text.bt_stream_rx:00000000000001f4 $d
     /tmp/ccvLzxWr.s:6278   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccvLzxWr.s:6326   .text.le_set_access_address:0000000000000030 $d
     /tmp/ccvLzxWr.s:6331   .text.reset_le:0000000000000000 $t
     /tmp/ccvLzxWr.s:6336   .text.reset_le:0000000000000000 reset_le
     /tmp/ccvLzxWr.s:6432   .text.reset_le:0000000000000084 $d
     /tmp/ccvLzxWr.s:6441   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccvLzxWr.s:6446   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccvLzxWr.s:6472   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccvLzxWr.s:6477   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccvLzxWr.s:6482   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccvLzxWr.s:6908   .text.bt_generic_le:00000000000002a0 $d
     /tmp/ccvLzxWr.s:6934   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccvLzxWr.s:6939   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccvLzxWr.s:7287   .text.bt_le_sync:0000000000000228 $d
     /tmp/ccvLzxWr.s:7308   .text.bt_le_sync:0000000000000270 $t
     /tmp/ccvLzxWr.s:7706   .text.bt_le_sync:0000000000000508 $d
     /tmp/ccvLzxWr.s:10661  .bss:00000000000000d4 restart_jamming.4716
     /tmp/ccvLzxWr.s:7731   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccvLzxWr.s:7736   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccvLzxWr.s:8026   .text.cb_follow_le:00000000000001b8 $d
     /tmp/ccvLzxWr.s:8039   .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccvLzxWr.s:8044   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccvLzxWr.s:8422   .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccvLzxWr.s:8432   .text.bt_follow_le:0000000000000000 $t
     /tmp/ccvLzxWr.s:8437   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccvLzxWr.s:8467   .text.bt_follow_le:000000000000001c $d
     /tmp/ccvLzxWr.s:8474   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccvLzxWr.s:8479   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccvLzxWr.s:8572   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccvLzxWr.s:8577   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccvLzxWr.s:8786   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccvLzxWr.s:10664  .bss:00000000000000d8 first_ts.4814
     /tmp/ccvLzxWr.s:8805   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccvLzxWr.s:8810   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccvLzxWr.s:8945   .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccvLzxWr.s:10667  .bss:00000000000000dc prev_clk.4820
     /tmp/ccvLzxWr.s:8962   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccvLzxWr.s:8967   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccvLzxWr.s:9082   .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccvLzxWr.s:9090   .text.see_aa:0000000000000000 $t
     /tmp/ccvLzxWr.s:9095   .text.see_aa:0000000000000000 see_aa
     /tmp/ccvLzxWr.s:9216   .text.see_aa:00000000000000a4 $d
     /tmp/ccvLzxWr.s:9228   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccvLzxWr.s:9233   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccvLzxWr.s:9685   .text.cb_le_promisc:00000000000002e0 $d
     /tmp/ccvLzxWr.s:9701   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccvLzxWr.s:9706   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccvLzxWr.s:9788   .text.bt_promisc_le:000000000000006c $d
     /tmp/ccvLzxWr.s:9816   .text.bt_slave_le:0000000000000000 $t
     /tmp/ccvLzxWr.s:9821   .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccvLzxWr.s:9956   .text.bt_slave_le:00000000000000dc $d
     /tmp/ccvLzxWr.s:9967   .text.specan:0000000000000000 $t
     /tmp/ccvLzxWr.s:9972   .text.specan:0000000000000000 specan
     /tmp/ccvLzxWr.s:10188  .text.specan:0000000000000178 $d
ARM GAS  /tmp/ccvLzxWr.s 			page 239


     /tmp/ccvLzxWr.s:10206  .text.led_specan:0000000000000000 $t
     /tmp/ccvLzxWr.s:10211  .text.led_specan:0000000000000000 led_specan
     /tmp/ccvLzxWr.s:10447  .text.led_specan:0000000000000178 $d
     /tmp/ccvLzxWr.s:10460  .text.main:0000000000000000 $t
     /tmp/ccvLzxWr.s:10465  .text.main:0000000000000000 main
     /tmp/ccvLzxWr.s:10509  .text.main:000000000000003c $d
     /tmp/ccvLzxWr.s:10523  .text.main:0000000000000074 $t
     /tmp/ccvLzxWr.s:10649  .text.main:0000000000000118 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
handle_usb
rbit
memset
dio_ssp_init
btle_crcgen_lut
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
