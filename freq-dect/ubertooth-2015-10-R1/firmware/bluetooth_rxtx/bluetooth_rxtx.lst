ARM GAS  /tmp/cctJTvh1.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/cctJTvh1.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	payload:
  81 002c CA       		.byte	-54
  82 002d AA       		.byte	-86
  83 002e AA       		.byte	-86
  84 002f AA       		.byte	-86
  85 0030 AA       		.byte	-86
  86 0031 AA       		.byte	-86
  87 0032 AA       		.byte	-86
  88 0033 AA       		.byte	-86
  89 0034 AA       		.byte	-86
  90 0035 AA       		.byte	-86
  91 0036 AA       		.byte	-86
  92 0037 AA       		.byte	-86
  93 0038 AA       		.byte	-86
  94 0039 AA       		.byte	-86
  95 003a AA       		.byte	-86
  96 003b AA       		.byte	-86
  97 003c AA       		.byte	-86
  98 003d AA       		.byte	-86
  99 003e AA       		.byte	-86
 100 003f AA       		.byte	-86
 101              		.align	2
 104              	whitening:
 105 0040 01       		.byte	1
 106 0041 01       		.byte	1
 107 0042 01       		.byte	1
 108 0043 01       		.byte	1
 109 0044 00       		.byte	0
 110 0045 01       		.byte	1
 111 0046 00       		.byte	0
 112 0047 01       		.byte	1
 113 0048 00       		.byte	0
 114 0049 01       		.byte	1
 115 004a 00       		.byte	0
 116 004b 00       		.byte	0
 117 004c 00       		.byte	0
 118 004d 00       		.byte	0
 119 004e 01       		.byte	1
 120 004f 00       		.byte	0
 121 0050 01       		.byte	1
 122 0051 01       		.byte	1
 123 0052 00       		.byte	0
 124 0053 01       		.byte	1
ARM GAS  /tmp/cctJTvh1.s 			page 3


 125 0054 01       		.byte	1
 126 0055 01       		.byte	1
 127 0056 01       		.byte	1
 128 0057 00       		.byte	0
 129 0058 00       		.byte	0
 130 0059 01       		.byte	1
 131 005a 01       		.byte	1
 132 005b 01       		.byte	1
 133 005c 00       		.byte	0
 134 005d 00       		.byte	0
 135 005e 01       		.byte	1
 136 005f 00       		.byte	0
 137 0060 01       		.byte	1
 138 0061 00       		.byte	0
 139 0062 01       		.byte	1
 140 0063 01       		.byte	1
 141 0064 00       		.byte	0
 142 0065 00       		.byte	0
 143 0066 01       		.byte	1
 144 0067 01       		.byte	1
 145 0068 00       		.byte	0
 146 0069 00       		.byte	0
 147 006a 00       		.byte	0
 148 006b 00       		.byte	0
 149 006c 00       		.byte	0
 150 006d 01       		.byte	1
 151 006e 01       		.byte	1
 152 006f 00       		.byte	0
 153 0070 01       		.byte	1
 154 0071 01       		.byte	1
 155 0072 00       		.byte	0
 156 0073 01       		.byte	1
 157 0074 00       		.byte	0
 158 0075 01       		.byte	1
 159 0076 01       		.byte	1
 160 0077 01       		.byte	1
 161 0078 00       		.byte	0
 162 0079 01       		.byte	1
 163 007a 00       		.byte	0
 164 007b 00       		.byte	0
 165 007c 00       		.byte	0
 166 007d 01       		.byte	1
 167 007e 01       		.byte	1
 168 007f 00       		.byte	0
 169 0080 00       		.byte	0
 170 0081 01       		.byte	1
 171 0082 00       		.byte	0
 172 0083 00       		.byte	0
 173 0084 00       		.byte	0
 174 0085 01       		.byte	1
 175 0086 00       		.byte	0
 176 0087 00       		.byte	0
 177 0088 00       		.byte	0
 178 0089 00       		.byte	0
 179 008a 00       		.byte	0
 180 008b 00       		.byte	0
 181 008c 01       		.byte	1
ARM GAS  /tmp/cctJTvh1.s 			page 4


 182 008d 00       		.byte	0
 183 008e 00       		.byte	0
 184 008f 01       		.byte	1
 185 0090 00       		.byte	0
 186 0091 00       		.byte	0
 187 0092 01       		.byte	1
 188 0093 01       		.byte	1
 189 0094 00       		.byte	0
 190 0095 01       		.byte	1
 191 0096 00       		.byte	0
 192 0097 00       		.byte	0
 193 0098 01       		.byte	1
 194 0099 01       		.byte	1
 195 009a 01       		.byte	1
 196 009b 01       		.byte	1
 197 009c 00       		.byte	0
 198 009d 01       		.byte	1
 199 009e 01       		.byte	1
 200 009f 01       		.byte	1
 201 00a0 00       		.byte	0
 202 00a1 00       		.byte	0
 203 00a2 00       		.byte	0
 204 00a3 00       		.byte	0
 205 00a4 01       		.byte	1
 206 00a5 01       		.byte	1
 207 00a6 01       		.byte	1
 208 00a7 01       		.byte	1
 209 00a8 01       		.byte	1
 210 00a9 01       		.byte	1
 211 00aa 01       		.byte	1
 212 00ab 00       		.byte	0
 213 00ac 00       		.byte	0
 214 00ad 00       		.byte	0
 215 00ae 01       		.byte	1
 216 00af 01       		.byte	1
 217 00b0 01       		.byte	1
 218 00b1 00       		.byte	0
 219 00b2 01       		.byte	1
 220 00b3 01       		.byte	1
 221 00b4 00       		.byte	0
 222 00b5 00       		.byte	0
 223 00b6 00       		.byte	0
 224 00b7 01       		.byte	1
 225 00b8 00       		.byte	0
 226 00b9 01       		.byte	1
 227 00ba 00       		.byte	0
 228 00bb 00       		.byte	0
 229 00bc 01       		.byte	1
 230 00bd 00       		.byte	0
 231 00be 01       		.byte	1
 232 00bf 00       		.align	2
 235              	whitening_index:
 236 00c0 46       		.byte	70
 237 00c1 3E       		.byte	62
 238 00c2 78       		.byte	120
 239 00c3 6F       		.byte	111
 240 00c4 4D       		.byte	77
ARM GAS  /tmp/cctJTvh1.s 			page 5


 241 00c5 2E       		.byte	46
 242 00c6 0F       		.byte	15
 243 00c7 65       		.byte	101
 244 00c8 42       		.byte	66
 245 00c9 27       		.byte	39
 246 00ca 1F       		.byte	31
 247 00cb 1A       		.byte	26
 248 00cc 50       		.byte	80
 249 00cd 53       		.byte	83
 250 00ce 7D       		.byte	125
 251 00cf 59       		.byte	89
 252 00d0 0A       		.byte	10
 253 00d1 23       		.byte	35
 254 00d2 08       		.byte	8
 255 00d3 36       		.byte	54
 256 00d4 7A       		.byte	122
 257 00d5 11       		.byte	17
 258 00d6 21       		.byte	33
 259 00d7 00       		.byte	0
 260 00d8 3A       		.byte	58
 261 00d9 73       		.byte	115
 262 00da 06       		.byte	6
 263 00db 5E       		.byte	94
 264 00dc 56       		.byte	86
 265 00dd 31       		.byte	49
 266 00de 34       		.byte	52
 267 00df 14       		.byte	20
 268 00e0 28       		.byte	40
 269 00e1 1B       		.byte	27
 270 00e2 54       		.byte	84
 271 00e3 5A       		.byte	90
 272 00e4 3F       		.byte	63
 273 00e5 70       		.byte	112
 274 00e6 2F       		.byte	47
 275 00e7 66       		.byte	102
 276              		.align	2
 279              	hop_interval_lut:
 280 00e8 00       		.byte	0
 281 00e9 01       		.byte	1
 282 00ea 13       		.byte	19
 283 00eb 19       		.byte	25
 284 00ec 1C       		.byte	28
 285 00ed 0F       		.byte	15
 286 00ee 1F       		.byte	31
 287 00ef 10       		.byte	16
 288 00f0 0E       		.byte	14
 289 00f1 21       		.byte	33
 290 00f2 1A       		.byte	26
 291 00f3 1B       		.byte	27
 292 00f4 22       		.byte	34
 293 00f5 14       		.byte	20
 294 00f6 08       		.byte	8
 295 00f7 05       		.byte	5
 296 00f8 07       		.byte	7
 297 00f9 18       		.byte	24
 298 00fa 23       		.byte	35
 299 00fb 02       		.byte	2
ARM GAS  /tmp/cctJTvh1.s 			page 6


 300 00fc 0D       		.byte	13
 301 00fd 1E       		.byte	30
 302 00fe 20       		.byte	32
 303 00ff 1D       		.byte	29
 304 0100 11       		.byte	17
 305 0101 03       		.byte	3
 306 0102 0A       		.byte	10
 307 0103 0B       		.byte	11
 308 0104 04       		.byte	4
 309 0105 17       		.byte	23
 310 0106 15       		.byte	21
 311 0107 06       		.byte	6
 312 0108 16       		.byte	22
 313 0109 09       		.byte	9
 314 010a 0C       		.byte	12
 315 010b 12       		.byte	18
 316 010c 24       		.byte	36
 317 010d 000000   		.align	2
 320              	whitening_word:
 321 0110 40B2BCC3 		.word	-1011043776
 322 0114 1F374A5F 		.word	1598699295
 323 0118 85F69C9A 		.word	-1700989307
 324 011c C1D6C544 		.word	1153816257
 325 0120 2059DEE1 		.word	-505521888
 326 0124 8F1BA5AF 		.word	-1348134001
 327 0128 427B4ECD 		.word	-850494654
 328 012c 60EB6222 		.word	576908128
 329 0130 902CEFF0 		.word	-252760944
 330 0134 C78DD257 		.word	1473416647
 331 0138 A13DA766 		.word	1722236321
 332 013c B0753111 		.word	288454064
 333 0140 8940B2BC 		.word	-1129168759
 334 0144 C31F374A 		.word	1245126595
 335 0148 5F85F69C 		.word	-1661565601
 336 014c 9AC1D6C5 		.word	-975781478
 337 0150 442059DE 		.word	-564584380
 338 0154 E18F1BA5 		.word	-1524920351
 339 0158 AF427B4E 		.word	1316700847
 340 015c CD60EB62 		.word	1659592909
 341 0160 22902CEF 		.word	-282292190
 342 0164 F0C78DD2 		.word	-762460176
 343 0168 57A13DA7 		.word	-1489133225
 344 016c 66B07531 		.word	829796454
 345 0170 D257A13D 		.word	1033983954
 346 0174 A766B075 		.word	1974494887
 347 0178 31114896 		.word	-1773661903
 348 017c 77F8E346 		.word	1189345399
 349 0180 E9ABD09E 		.word	-1630491671
 350 0184 5333D8BA 		.word	-1160236205
 351 0188 980824CB 		.word	-886830952
 352 018c 3BFC71A3 		.word	-1552810949
 353 0190 F45568CF 		.word	-815245836
 354 0194 A9196C5D 		.word	1567365545
 355 0198 4C0492E5 		.word	-443415476
 356 019c 1DFEB851 		.word	1371078173
 357 01a0 1BA5AF42 		.word	1118807323
 358 01a4 7B4ECD60 		.word	1624067707
ARM GAS  /tmp/cctJTvh1.s 			page 7


 359 01a8 EB622290 		.word	-1876794645
 360 01ac 2CEFF0C7 		.word	-940511444
 361 01b0 8DD257A1 		.word	-1588079987
 362 01b4 3DA766B0 		.word	-1335449795
 363 01b8 75311148 		.word	1209086325
 364 01bc 9677F8E3 		.word	-470255722
 365 01c0 46E9ABD0 		.word	-794039994
 366 01c4 9E5333D8 		.word	-667724898
 367 01c8 BA980824 		.word	604543162
 368 01cc CB3BFC71 		.word	1912355787
 369 01d0 6479873F 		.word	1065843044
 370 01d4 6E94BE0A 		.word	180261998
 371 01d8 ED393583 		.word	-2093663763
 372 01dc AD8B8940 		.word	1082756013
 373 01e0 B2BCC31F 		.word	532921522
 374 01e4 374A5F85 		.word	-2057352649
 375 01e8 F69C9AC1 		.word	-1046831882
 376 01ec D6C54420 		.word	541378006
 377 01f0 59DEE18F 		.word	-1881022887
 378 01f4 1BA5AF42 		.word	1118807323
 379 01f8 7B4ECD60 		.word	1624067707
 380 01fc EB622290 		.word	-1876794645
 381 0200 AD8B8940 		.word	1082756013
 382 0204 B2BCC31F 		.word	532921522
 383 0208 374A5F85 		.word	-2057352649
 384 020c F69C9AC1 		.word	-1046831882
 385 0210 D6C54420 		.word	541378006
 386 0214 59DEE18F 		.word	-1881022887
 387 0218 1BA5AF42 		.word	1118807323
 388 021c 7B4ECD60 		.word	1624067707
 389 0220 EB622290 		.word	-1876794645
 390 0224 2CEFF0C7 		.word	-940511444
 391 0228 8DD257A1 		.word	-1588079987
 392 022c 3DA766B0 		.word	-1335449795
 393 0230 F69C9AC1 		.word	-1046831882
 394 0234 D6C54420 		.word	541378006
 395 0238 59DEE18F 		.word	-1881022887
 396 023c 1BA5AF42 		.word	1118807323
 397 0240 7B4ECD60 		.word	1624067707
 398 0244 EB622290 		.word	-1876794645
 399 0248 2CEFF0C7 		.word	-940511444
 400 024c 8DD257A1 		.word	-1588079987
 401 0250 3DA766B0 		.word	-1335449795
 402 0254 75311148 		.word	1209086325
 403 0258 9677F8E3 		.word	-470255722
 404 025c 46E9ABD0 		.word	-794039994
 405 0260 3F6E94BE 		.word	-1097568705
 406 0264 0AED3935 		.word	892988682
 407 0268 83AD8B89 		.word	-1987334781
 408 026c 40B2BCC3 		.word	-1011043776
 409 0270 1F374A5F 		.word	1598699295
 410 0274 85F69C9A 		.word	-1700989307
 411 0278 C1D6C544 		.word	1153816257
 412 027c 2059DEE1 		.word	-505521888
 413 0280 8F1BA5AF 		.word	-1348134001
 414 0284 427B4ECD 		.word	-850494654
 415 0288 60EB6222 		.word	576908128
ARM GAS  /tmp/cctJTvh1.s 			page 8


 416 028c 902CEFF0 		.word	-252760944
 417 0290 0824CB3B 		.word	1003168776
 418 0294 FC71A3F4 		.word	-190615044
 419 0298 5568CFA9 		.word	-1446025131
 420 029c 196C5D4C 		.word	1281190937
 421 02a0 0492E51D 		.word	501584388
 422 02a4 FEB851FA 		.word	-95307522
 423 02a8 2AB4E7D4 		.word	-723012566
 424 02ac 0CB62E26 		.word	640595468
 425 02b0 02C9F20E 		.word	250792194
 426 02b4 7FDC287D 		.word	2099829887
 427 02b8 15DA736A 		.word	1785977365
 428 02bc 065B1713 		.word	320297734
 429 02c0 C1D6C544 		.word	1153816257
 430 02c4 2059DEE1 		.word	-505521888
 431 02c8 8F1BA5AF 		.word	-1348134001
 432 02cc 427B4ECD 		.word	-850494654
 433 02d0 60EB6222 		.word	576908128
 434 02d4 902CEFF0 		.word	-252760944
 435 02d8 C78DD257 		.word	1473416647
 436 02dc A13DA766 		.word	1722236321
 437 02e0 B0753111 		.word	288454064
 438 02e4 489677F8 		.word	-126380472
 439 02e8 E346E9AB 		.word	-1410775325
 440 02ec D09E5333 		.word	861118160
 441 02f0 9AC1D6C5 		.word	-975781478
 442 02f4 442059DE 		.word	-564584380
 443 02f8 E18F1BA5 		.word	-1524920351
 444 02fc AF427B4E 		.word	1316700847
 445 0300 CD60EB62 		.word	1659592909
 446 0304 22902CEF 		.word	-282292190
 447 0308 F0C78DD2 		.word	-762460176
 448 030c 57A13DA7 		.word	-1489133225
 449 0310 66B07531 		.word	829796454
 450 0314 11489677 		.word	2006337553
 451 0318 F8E346E9 		.word	-381230088
 452 031c ABD09E53 		.word	1402917035
 453 0320 5333D8BA 		.word	-1160236205
 454 0324 980824CB 		.word	-886830952
 455 0328 3BFC71A3 		.word	-1552810949
 456 032c F45568CF 		.word	-815245836
 457 0330 A9196C5D 		.word	1567365545
 458 0334 4C0492E5 		.word	-443415476
 459 0338 1DFEB851 		.word	1371078173
 460 033c FA2AB4E7 		.word	-407622918
 461 0340 D40CB62E 		.word	783682772
 462 0344 2602C9F2 		.word	-221707738
 463 0348 0E7FDC28 		.word	685539086
 464 034c 7D15DA73 		.word	1943672189
 465 0350 2CEFF0C7 		.word	-940511444
 466 0354 8DD257A1 		.word	-1588079987
 467 0358 3DA766B0 		.word	-1335449795
 468 035c 75311148 		.word	1209086325
 469 0360 9677F8E3 		.word	-470255722
 470 0364 46E9ABD0 		.word	-794039994
 471 0368 9E5333D8 		.word	-667724898
 472 036c BA980824 		.word	604543162
ARM GAS  /tmp/cctJTvh1.s 			page 9


 473 0370 CB3BFC71 		.word	1912355787
 474 0374 A3F45568 		.word	1750463651
 475 0378 CFA9196C 		.word	1813621199
 476 037c 5D4C0492 		.word	-1845212067
 477 0380 E51DFEB8 		.word	-1191305755
 478 0384 51FA2AB4 		.word	-1272251823
 479 0388 E7D40CB6 		.word	-1240673049
 480 038c 2E2602C9 		.word	-922606034
 481 0390 F20E7FDC 		.word	-595652878
 482 0394 287D15DA 		.word	-636125912
 483 0398 736A065B 		.word	1527147123
 484 039c 17138164 		.word	1686180631
 485 03a0 79873F6E 		.word	1849657209
 486 03a4 94BE0AED 		.word	-318062956
 487 03a8 393583AD 		.word	-1383910087
 488 03ac 8B8940B2 		.word	-1304393333
 489 03b0 BE0AED39 		.word	971836094
 490 03b4 3583AD8B 		.word	-1951562955
 491 03b8 8940B2BC 		.word	-1129168759
 492 03bc C31F374A 		.word	1245126595
 493 03c0 5F85F69C 		.word	-1661565601
 494 03c4 9AC1D6C5 		.word	-975781478
 495 03c8 442059DE 		.word	-564584380
 496 03cc E18F1BA5 		.word	-1524920351
 497 03d0 AF427B4E 		.word	1316700847
 498 03d4 CD60EB62 		.word	1659592909
 499 03d8 22902CEF 		.word	-282292190
 500 03dc F0C78DD2 		.word	-762460176
 501 03e0 77F8E346 		.word	1189345399
 502 03e4 E9ABD09E 		.word	-1630491671
 503 03e8 5333D8BA 		.word	-1160236205
 504 03ec 980824CB 		.word	-886830952
 505 03f0 3BFC71A3 		.word	-1552810949
 506 03f4 F45568CF 		.word	-815245836
 507 03f8 A9196C5D 		.word	1567365545
 508 03fc 4C0492E5 		.word	-443415476
 509 0400 1DFEB851 		.word	1371078173
 510 0404 FA2AB4E7 		.word	-407622918
 511 0408 D40CB62E 		.word	783682772
 512 040c 2602C9F2 		.word	-221707738
 513 0410 D09E5333 		.word	861118160
 514 0414 D8BA9808 		.word	144227032
 515 0418 24CB3BFC 		.word	-63190236
 516 041c 71A3F455 		.word	1442095985
 517 0420 68CFA919 		.word	430559080
 518 0424 6C5D4C04 		.word	72113516
 519 0428 92E51DFE 		.word	-31595118
 520 042c B851FA2A 		.word	721047992
 521 0430 B4E7D40C 		.word	215279540
 522 0434 B62E2602 		.word	36056758
 523 0438 C9F20E7F 		.word	2131686089
 524 043c DC287D15 		.word	360523996
 525 0440 196C5D4C 		.word	1281190937
 526 0444 0492E51D 		.word	501584388
 527 0448 FEB851FA 		.word	-95307522
 528 044c 2AB4E7D4 		.word	-723012566
 529 0450 0CB62E26 		.word	640595468
ARM GAS  /tmp/cctJTvh1.s 			page 10


 530 0454 02C9F20E 		.word	250792194
 531 0458 7FDC287D 		.word	2099829887
 532 045c 15DA736A 		.word	1785977365
 533 0460 065B1713 		.word	320297734
 534 0464 81647987 		.word	-2022087551
 535 0468 3F6E94BE 		.word	-1097568705
 536 046c 0AED3935 		.word	892988682
 537 0470 427B4ECD 		.word	-850494654
 538 0474 60EB6222 		.word	576908128
 539 0478 902CEFF0 		.word	-252760944
 540 047c C78DD257 		.word	1473416647
 541 0480 A13DA766 		.word	1722236321
 542 0484 B0753111 		.word	288454064
 543 0488 489677F8 		.word	-126380472
 544 048c E346E9AB 		.word	-1410775325
 545 0490 D09E5333 		.word	861118160
 546 0494 D8BA9808 		.word	144227032
 547 0498 24CB3BFC 		.word	-63190236
 548 049c 71A3F455 		.word	1442095985
 549 04a0 8B8940B2 		.word	-1304393333
 550 04a4 BCC31F37 		.word	924828604
 551 04a8 4A5F85F6 		.word	-159031478
 552 04ac 9C9AC1D6 		.word	-691955044
 553 04b0 C5442059 		.word	1495286981
 554 04b4 DEE18F1B 		.word	462414302
 555 04b8 A5AF427B 		.word	2067967909
 556 04bc 4ECD60EB 		.word	-345977522
 557 04c0 6222902C 		.word	747643490
 558 04c4 EFF0C78D 		.word	-1916276497
 559 04c8 D257A13D 		.word	1033983954
 560 04cc A766B075 		.word	1974494887
 561 04d0 F45568CF 		.word	-815245836
 562 04d4 A9196C5D 		.word	1567365545
 563 04d8 4C0492E5 		.word	-443415476
 564 04dc 1DFEB851 		.word	1371078173
 565 04e0 FA2AB4E7 		.word	-407622918
 566 04e4 D40CB62E 		.word	783682772
 567 04e8 2602C9F2 		.word	-221707738
 568 04ec 0E7FDC28 		.word	685539086
 569 04f0 7D15DA73 		.word	1943672189
 570 04f4 6A065B17 		.word	391841386
 571 04f8 13816479 		.word	2036629779
 572 04fc 873F6E94 		.word	-1804714105
 573 0500 3DA766B0 		.word	-1335449795
 574 0504 75311148 		.word	1209086325
 575 0508 9677F8E3 		.word	-470255722
 576 050c 46E9ABD0 		.word	-794039994
 577 0510 9E5333D8 		.word	-667724898
 578 0514 BA980824 		.word	604543162
 579 0518 CB3BFC71 		.word	1912355787
 580 051c A3F45568 		.word	1750463651
 581 0520 CFA9196C 		.word	1813621199
 582 0524 5D4C0492 		.word	-1845212067
 583 0528 E51DFEB8 		.word	-1191305755
 584 052c 51FA2AB4 		.word	-1272251823
 585 0530 66B07531 		.word	829796454
 586 0534 11489677 		.word	2006337553
ARM GAS  /tmp/cctJTvh1.s 			page 11


 587 0538 F8E346E9 		.word	-381230088
 588 053c ABD09E53 		.word	1402917035
 589 0540 33D8BA98 		.word	-1732585421
 590 0544 0824CB3B 		.word	1003168776
 591 0548 FC71A3F4 		.word	-190615044
 592 054c 5568CFA9 		.word	-1446025131
 593 0550 196C5D4C 		.word	1281190937
 594 0554 0492E51D 		.word	501584388
 595 0558 FEB851FA 		.word	-95307522
 596 055c 2AB4E7D4 		.word	-723012566
 597 0560 AF427B4E 		.word	1316700847
 598 0564 CD60EB62 		.word	1659592909
 599 0568 22902CEF 		.word	-282292190
 600 056c F0C78DD2 		.word	-762460176
 601 0570 57A13DA7 		.word	-1489133225
 602 0574 66B07531 		.word	829796454
 603 0578 11489677 		.word	2006337553
 604 057c F8E346E9 		.word	-381230088
 605 0580 ABD09E53 		.word	1402917035
 606 0584 33D8BA98 		.word	-1732585421
 607 0588 0824CB3B 		.word	1003168776
 608 058c FC71A3F4 		.word	-190615044
 609 0590 980824CB 		.word	-886830952
 610 0594 3BFC71A3 		.word	-1552810949
 611 0598 F45568CF 		.word	-815245836
 612 059c A9196C5D 		.word	1567365545
 613 05a0 4C0492E5 		.word	-443415476
 614 05a4 1DFEB851 		.word	1371078173
 615 05a8 FA2AB4E7 		.word	-407622918
 616 05ac D40CB62E 		.word	783682772
 617 05b0 2602C9F2 		.word	-221707738
 618 05b4 0E7FDC28 		.word	685539086
 619 05b8 7D15DA73 		.word	1943672189
 620 05bc 6A065B17 		.word	391841386
 621 05c0 51FA2AB4 		.word	-1272251823
 622 05c4 E7D40CB6 		.word	-1240673049
 623 05c8 2E2602C9 		.word	-922606034
 624 05cc F20E7FDC 		.word	-595652878
 625 05d0 287D15DA 		.word	-636125912
 626 05d4 736A065B 		.word	1527147123
 627 05d8 17138164 		.word	1686180631
 628 05dc 79873F6E 		.word	1849657209
 629 05e0 94BE0AED 		.word	-318062956
 630 05e4 393583AD 		.word	-1383910087
 631 05e8 8B8940B2 		.word	-1304393333
 632 05ec BCC31F37 		.word	924828604
 633 05f0 0AED3935 		.word	892988682
 634 05f4 83AD8B89 		.word	-1987334781
 635 05f8 40B2BCC3 		.word	-1011043776
 636 05fc 1F374A5F 		.word	1598699295
 637 0600 85F69C9A 		.word	-1700989307
 638 0604 C1D6C544 		.word	1153816257
 639 0608 2059DEE1 		.word	-505521888
 640 060c 8F1BA5AF 		.word	-1348134001
 641 0610 427B4ECD 		.word	-850494654
 642 0614 60EB6222 		.word	576908128
 643 0618 902CEFF0 		.word	-252760944
ARM GAS  /tmp/cctJTvh1.s 			page 12


 644 061c C78DD257 		.word	1473416647
 645 0620 C31F374A 		.word	1245126595
 646 0624 5F85F69C 		.word	-1661565601
 647 0628 9AC1D6C5 		.word	-975781478
 648 062c 442059DE 		.word	-564584380
 649 0630 E18F1BA5 		.word	-1524920351
 650 0634 AF427B4E 		.word	1316700847
 651 0638 CD60EB62 		.word	1659592909
 652 063c 22902CEF 		.word	-282292190
 653 0640 F0C78DD2 		.word	-762460176
 654 0644 57A13DA7 		.word	-1489133225
 655 0648 66B07531 		.word	829796454
 656 064c 11489677 		.word	2006337553
 657 0650 BCC31F37 		.word	924828604
 658 0654 4A5F85F6 		.word	-159031478
 659 0658 9C9AC1D6 		.word	-691955044
 660 065c C5442059 		.word	1495286981
 661 0660 DEE18F1B 		.word	462414302
 662 0664 A5AF427B 		.word	2067967909
 663 0668 4ECD60EB 		.word	-345977522
 664 066c 6222902C 		.word	747643490
 665 0670 EFF0C78D 		.word	-1916276497
 666 0674 D257A13D 		.word	1033983954
 667 0678 A766B075 		.word	1974494887
 668 067c 31114896 		.word	-1773661903
 669 0680 75311148 		.word	1209086325
 670 0684 9677F8E3 		.word	-470255722
 671 0688 46E9ABD0 		.word	-794039994
 672 068c 9E5333D8 		.word	-667724898
 673 0690 BA980824 		.word	604543162
 674 0694 CB3BFC71 		.word	1912355787
 675 0698 A3F45568 		.word	1750463651
 676 069c CFA9196C 		.word	1813621199
 677 06a0 5D4C0492 		.word	-1845212067
 678 06a4 E51DFEB8 		.word	-1191305755
 679 06a8 51FA2AB4 		.word	-1272251823
 680 06ac E7D40CB6 		.word	-1240673049
 681 06b0 2E2602C9 		.word	-922606034
 682 06b4 F20E7FDC 		.word	-595652878
 683 06b8 287D15DA 		.word	-636125912
 684 06bc 736A065B 		.word	1527147123
 685 06c0 17138164 		.word	1686180631
 686 06c4 79873F6E 		.word	1849657209
 687 06c8 94BE0AED 		.word	-318062956
 688 06cc 393583AD 		.word	-1383910087
 689 06d0 8B8940B2 		.word	-1304393333
 690 06d4 BCC31F37 		.word	924828604
 691 06d8 4A5F85F6 		.word	-159031478
 692 06dc 9C9AC1D6 		.word	-691955044
 693 06e0 E7D40CB6 		.word	-1240673049
 694 06e4 2E2602C9 		.word	-922606034
 695 06e8 F20E7FDC 		.word	-595652878
 696 06ec 287D15DA 		.word	-636125912
 697 06f0 736A065B 		.word	1527147123
 698 06f4 17138164 		.word	1686180631
 699 06f8 79873F6E 		.word	1849657209
 700 06fc 94BE0AED 		.word	-318062956
ARM GAS  /tmp/cctJTvh1.s 			page 13


 701 0700 393583AD 		.word	-1383910087
 702 0704 8B8940B2 		.word	-1304393333
 703 0708 BCC31F37 		.word	924828604
 704 070c 4A5F85F6 		.word	-159031478
 705 0710 60EB6222 		.word	576908128
 706 0714 902CEFF0 		.word	-252760944
 707 0718 C78DD257 		.word	1473416647
 708 071c A13DA766 		.word	1722236321
 709 0720 B0753111 		.word	288454064
 710 0724 489677F8 		.word	-126380472
 711 0728 E346E9AB 		.word	-1410775325
 712 072c D09E5333 		.word	861118160
 713 0730 D8BA9808 		.word	144227032
 714 0734 24CB3BFC 		.word	-63190236
 715 0738 71A3F455 		.word	1442095985
 716 073c 68CFA919 		.word	430559080
 717 0740 A9196C5D 		.word	1567365545
 718 0744 4C0492E5 		.word	-443415476
 719 0748 1DFEB851 		.word	1371078173
 720 074c FA2AB4E7 		.word	-407622918
 721 0750 D40CB62E 		.word	783682772
 722 0754 2602C9F2 		.word	-221707738
 723 0758 0E7FDC28 		.word	685539086
 724 075c 7D15DA73 		.word	1943672189
 725 0760 6A065B17 		.word	391841386
 726 0764 13816479 		.word	2036629779
 727 0768 873F6E94 		.word	-1804714105
 728 076c BE0AED39 		.word	971836094
 729 0770 F20E7FDC 		.word	-595652878
 730 0774 287D15DA 		.word	-636125912
 731 0778 736A065B 		.word	1527147123
 732 077c 17138164 		.word	1686180631
 733 0780 79873F6E 		.word	1849657209
 734 0784 94BE0AED 		.word	-318062956
 735 0788 393583AD 		.word	-1383910087
 736 078c 8B8940B2 		.word	-1304393333
 737 0790 BCC31F37 		.word	924828604
 738 0794 4A5F85F6 		.word	-159031478
 739 0798 9C9AC1D6 		.word	-691955044
 740 079c C5442059 		.word	1495286981
 741 07a0 3BFC71A3 		.word	-1552810949
 742 07a4 F45568CF 		.word	-815245836
 743 07a8 A9196C5D 		.word	1567365545
 744 07ac 4C0492E5 		.word	-443415476
 745 07b0 1DFEB851 		.word	1371078173
 746 07b4 FA2AB4E7 		.word	-407622918
 747 07b8 D40CB62E 		.word	783682772
 748 07bc 2602C9F2 		.word	-221707738
 749 07c0 0E7FDC28 		.word	685539086
 750 07c4 7D15DA73 		.word	1943672189
 751 07c8 6A065B17 		.word	391841386
 752 07cc 13816479 		.word	2036629779
 753 07d0 442059DE 		.word	-564584380
 754 07d4 E18F1BA5 		.word	-1524920351
 755 07d8 AF427B4E 		.word	1316700847
 756 07dc CD60EB62 		.word	1659592909
 757 07e0 22902CEF 		.word	-282292190
ARM GAS  /tmp/cctJTvh1.s 			page 14


 758 07e4 F0C78DD2 		.word	-762460176
 759 07e8 57A13DA7 		.word	-1489133225
 760 07ec 66B07531 		.word	829796454
 761 07f0 11489677 		.word	2006337553
 762 07f4 F8E346E9 		.word	-381230088
 763 07f8 ABD09E53 		.word	1402917035
 764 07fc 33D8BA98 		.word	-1732585421
 765 0800 8DD257A1 		.word	-1588079987
 766 0804 3DA766B0 		.word	-1335449795
 767 0808 75311148 		.word	1209086325
 768 080c 9677F8E3 		.word	-470255722
 769 0810 46E9ABD0 		.word	-794039994
 770 0814 9E5333D8 		.word	-667724898
 771 0818 BA980824 		.word	604543162
 772 081c CB3BFC71 		.word	1912355787
 773 0820 A3F45568 		.word	1750463651
 774 0824 CFA9196C 		.word	1813621199
 775 0828 5D4C0492 		.word	-1845212067
 776 082c E51DFEB8 		.word	-1191305755
 777 0830 D6C54420 		.word	541378006
 778 0834 59DEE18F 		.word	-1881022887
 779 0838 1BA5AF42 		.word	1118807323
 780 083c 7B4ECD60 		.word	1624067707
 781 0840 EB622290 		.word	-1876794645
 782 0844 2CEFF0C7 		.word	-940511444
 783 0848 8DD257A1 		.word	-1588079987
 784 084c 3DA766B0 		.word	-1335449795
 785 0850 75311148 		.word	1209086325
 786 0854 9677F8E3 		.word	-470255722
 787 0858 46E9ABD0 		.word	-794039994
 788 085c 9E5333D8 		.word	-667724898
 789 0860 1F374A5F 		.word	1598699295
 790 0864 85F69C9A 		.word	-1700989307
 791 0868 C1D6C544 		.word	1153816257
 792 086c 2059DEE1 		.word	-505521888
 793 0870 8F1BA5AF 		.word	-1348134001
 794 0874 427B4ECD 		.word	-850494654
 795 0878 60EB6222 		.word	576908128
 796 087c 902CEFF0 		.word	-252760944
 797 0880 C78DD257 		.word	1473416647
 798 0884 A13DA766 		.word	1722236321
 799 0888 B0753111 		.word	288454064
 800 088c 489677F8 		.word	-126380472
 801              		.comm	rr,5,4
 802              		.global	compile_info
 803              		.align	2
 806              	compile_info:
 807 0890 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Mon Jul 17 06:1"
 807      746F6F74 
 807      68203230 
 807      31352D31 
 807      302D5231 
 808 08c3 373A3035 		.ascii	"7:05 KST 2017\000"
 808      204B5354 
 808      20323031 
 808      3700
 809              		.comm	device_index,1,1
ARM GAS  /tmp/cctJTvh1.s 			page 15


 810              		.comm	first_ts,4,4
 811              		.comm	second_ts,4,4
 812              		.comm	diff_ts,4,4
 813              		.comm	rssi_avg,1,1
 814              		.comm	freq_avg,1,1
 815              		.comm	clkn_freq,4,4
 816              		.comm	clkn_legacy,4,4
 817              		.comm	clkn_proposed,4,4
 818              		.comm	clkn,4,4
 819              		.global	hop_mode
 820              		.bss
 823              	hop_mode:
 824 0000 00       		.space	1
 825              		.global	do_hop
 828              	do_hop:
 829 0001 00       		.space	1
 830              		.global	cs_no_squelch
 833              	cs_no_squelch:
 834 0002 00       		.space	1
 835              		.global	cs_threshold_req
 836              		.data
 839              	cs_threshold_req:
 840 0004 88       		.byte	-120
 841              		.global	cs_threshold_cur
 844              	cs_threshold_cur:
 845 0005 88       		.byte	-120
 846              		.comm	cs_trigger,1,1
 847              		.comm	keepalive_trigger,1,1
 848              		.comm	cs_timestamp,4,4
 849              		.global	hop_direct_channel
 850              		.bss
 851 0003 00       		.align	1
 854              	hop_direct_channel:
 855 0004 0000     		.space	2
 856              		.global	clock_trim
 857 0006 0000     		.align	2
 860              	clock_trim:
 861 0008 00000000 		.space	4
 862              		.comm	idle_buf_clkn_high,4,4
 863              		.comm	active_buf_clkn_high,4,4
 864              		.comm	idle_buf_clk100ns,4,4
 865              		.comm	active_buf_clk100ns,4,4
 866              		.global	idle_buf_channel
 867              		.align	1
 870              	idle_buf_channel:
 871 000c 0000     		.space	2
 872              		.global	active_buf_channel
 873              		.align	1
 876              	active_buf_channel:
 877 000e 0000     		.space	2
 878              		.global	slave_mac_address
 879              		.align	2
 882              	slave_mac_address:
 883 0010 00000000 		.space	6
 883      0000
 884              		.comm	rxbuf1,50,4
 885              		.comm	rxbuf2,50,4
ARM GAS  /tmp/cctJTvh1.s 			page 16


 886              		.global	active_rxbuf
 887              		.data
 888 0006 0000     		.align	2
 891              	active_rxbuf:
 892 0008 00000000 		.word	rxbuf1
 893              		.global	idle_rxbuf
 894              		.align	2
 897              	idle_rxbuf:
 898 000c 00000000 		.word	rxbuf2
 899              		.global	le
 900              		.align	2
 903              	le:
 904 0010 D6BE898E 		.word	-1903575338
 905 0014 7D6B     		.short	27517
 906 0016 7191     		.short	-28303
 907 0018 55555500 		.word	5592405
 908 001c AAAAAA00 		.word	11184810
 909 0020 01000000 		.word	1
 910 0024 00       		.byte	0
 911 0025 000000   		.space	3
 912 0028 00000000 		.word	0
 913 002c 00000000 		.space	32
 913      00000000 
 913      00000000 
 913      00000000 
 913      00000000 
 914 004c 00000000 		.word	0
 915 0050 00000000 		.word	0
 916              		.comm	le_promisc,264,4
 917              		.global	le_jam_count
 918              		.bss
 919 0016 0000     		.align	2
 922              	le_jam_count:
 923 0018 00000000 		.space	4
 924              		.global	data_cb
 925              		.align	2
 928              	data_cb:
 929 001c 00000000 		.space	4
 930              		.global	packet_cb
 931              		.align	2
 934              	packet_cb:
 935 0020 00000000 		.space	4
 936              		.global	rssi_iir
 937              		.align	2
 940              	rssi_iir:
 941 0024 00000000 		.space	158
 941      00000000 
 941      00000000 
 941      00000000 
 941      00000000 
 942              		.comm	unpacked,800,4
 943              		.global	mode
 946              	mode:
 947 00c2 00       		.space	1
 948              		.global	requested_mode
 951              	requested_mode:
 952 00c3 00       		.space	1
ARM GAS  /tmp/cctJTvh1.s 			page 17


 953              		.global	jam_mode
 956              	jam_mode:
 957 00c4 00       		.space	1
 958              		.global	ego_mode
 961              	ego_mode:
 962 00c5 00       		.space	1
 963              		.global	modulation
 966              	modulation:
 967 00c6 00       		.space	1
 968              		.global	channel
 969              		.data
 970              		.align	1
 973              	channel:
 974 0054 B009     		.short	2480
 975              		.global	requested_channel
 976              		.bss
 977 00c7 00       		.align	1
 980              	requested_channel:
 981 00c8 0000     		.space	2
 982              		.global	saved_request
 983              		.align	1
 986              	saved_request:
 987 00ca 0000     		.space	2
 988              		.global	low_freq
 989              		.data
 990              		.align	1
 993              	low_freq:
 994 0056 6009     		.short	2400
 995              		.global	high_freq
 996              		.align	1
 999              	high_freq:
 1000 0058 B309     		.short	2483
 1001              		.global	rssi_threshold
 1004              	rssi_threshold:
 1005 005a E2       		.byte	-30
 1006              		.comm	rx_dma_lli1,16,4
 1007              		.comm	rx_dma_lli2,16,4
 1008              		.comm	le_dma_lli,176,4
 1009              		.comm	rx_tc,4,4
 1010              		.comm	rx_err,4,4
 1011              		.global	status
 1012              		.bss
 1015              	status:
 1016 00cc 00       		.space	1
 1017              		.comm	rssi_max,1,1
 1018              		.comm	rssi_min,1,1
 1019              		.global	rssi_count
 1022              	rssi_count:
 1023 00cd 00       		.space	1
 1024              		.global	rssi_sum
 1025 00ce 0000     		.align	2
 1028              	rssi_sum:
 1029 00d0 00000000 		.space	4
 1030              		.section	.text.rssi_reset,"ax",%progbits
 1031              		.align	2
 1032              		.thumb
 1033              		.thumb_func
ARM GAS  /tmp/cctJTvh1.s 			page 18


 1035              	rssi_reset:
 1036              	.LFB0:
 1037              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** 
   2:bluetooth_rxtx.c **** /*
   3:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   4:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   5:bluetooth_rxtx.c ****  *
   6:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   7:bluetooth_rxtx.c ****  *
   8:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   9:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
  10:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  11:bluetooth_rxtx.c ****  * any later version.
  12:bluetooth_rxtx.c ****  *
  13:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  14:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  15:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  16:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  17:bluetooth_rxtx.c ****  *
  18:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  19:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  20:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  21:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  22:bluetooth_rxtx.c ****  */
  23:bluetooth_rxtx.c **** 
  24:bluetooth_rxtx.c **** #include <string.h>
  25:bluetooth_rxtx.c **** 
  26:bluetooth_rxtx.c **** #include "ubertooth.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  28:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  29:bluetooth_rxtx.c **** #include "bluetooth.h"
  30:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  31:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  32:bluetooth_rxtx.c **** #include "ego.h"
  33:bluetooth_rxtx.c **** 
  34:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  35:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  36:bluetooth_rxtx.c **** 
  37:bluetooth_rxtx.c **** /* build info */
  38:bluetooth_rxtx.c **** const char compile_info[] =
  39:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  40:bluetooth_rxtx.c **** 
  41:bluetooth_rxtx.c **** /*
  42:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  43:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  44:bluetooth_rxtx.c ****  *
  45:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  46:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  47:bluetooth_rxtx.c ****  * slot.
  48:bluetooth_rxtx.c ****  */
  49:bluetooth_rxtx.c **** 
  50:bluetooth_rxtx.c **** u8 device_index;
  51:bluetooth_rxtx.c **** u32 first_ts, second_ts, diff_ts;
  52:bluetooth_rxtx.c **** uint8_t rssi_avg;
  53:bluetooth_rxtx.c **** uint8_t freq_avg;
  54:bluetooth_rxtx.c **** uint32_t clkn_freq;
ARM GAS  /tmp/cctJTvh1.s 			page 19


  55:bluetooth_rxtx.c **** uint32_t clkn_legacy;
  56:bluetooth_rxtx.c **** uint32_t clkn_proposed;
  57:bluetooth_rxtx.c **** 
  58:bluetooth_rxtx.c **** 
  59:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  60:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  61:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  62:bluetooth_rxtx.c **** 
  63:bluetooth_rxtx.c **** #define HOP_NONE      0
  64:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  65:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  66:bluetooth_rxtx.c **** #define HOP_BTLE      3
  67:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  68:bluetooth_rxtx.c **** 
  69:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  70:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  71:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  72:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  73:bluetooth_rxtx.c **** 
  74:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  75:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  76:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  77:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  78:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  79:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  80:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  81:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  82:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  83:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  84:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  85:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  86:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  87:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  88:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  89:bluetooth_rxtx.c **** 
  90:bluetooth_rxtx.c **** /* DMA buffers */
  91:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  92:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  93:bluetooth_rxtx.c **** 
  94:bluetooth_rxtx.c **** /*
  95:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  96:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  97:bluetooth_rxtx.c ****  */
  98:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  99:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
 100:bluetooth_rxtx.c **** 
 101:bluetooth_rxtx.c **** le_state_t le = {
 102:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising /channel access address
 103:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
 104:bluetooth_rxtx.c **** 	.syncl = 0x9171,
 105:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
 106:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
 107:bluetooth_rxtx.c **** 	.crc_verify = 1,
 108:bluetooth_rxtx.c **** 
 109:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 110:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 111:bluetooth_rxtx.c **** 	.target_set = 0,
ARM GAS  /tmp/cctJTvh1.s 			page 20


 112:bluetooth_rxtx.c **** 	.last_packet = 0,
 113:bluetooth_rxtx.c **** };
 114:bluetooth_rxtx.c **** 
 115:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 116:bluetooth_rxtx.c **** 	u32 aa;
 117:bluetooth_rxtx.c **** 	int count;
 118:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 119:bluetooth_rxtx.c **** 
 120:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 121:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 122:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 123:bluetooth_rxtx.c **** 
 124:bluetooth_rxtx.c **** 	// recovering hop interval
 125:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 126:bluetooth_rxtx.c **** 	int consec_intervals;
 127:bluetooth_rxtx.c **** } le_promisc_state_t;
 128:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 129:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 130:bluetooth_rxtx.c **** 
 131:bluetooth_rxtx.c **** /* LE jamming */
 132:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 133:bluetooth_rxtx.c **** int le_jam_count = 0;
 134:bluetooth_rxtx.c **** 
 135:bluetooth_rxtx.c **** /* set LE access address */
 136:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 137:bluetooth_rxtx.c **** 
 138:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 139:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 140:bluetooth_rxtx.c **** 
 141:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 142:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 143:bluetooth_rxtx.c **** 
 144:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 145:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 146:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 147:bluetooth_rxtx.c **** 
 148:bluetooth_rxtx.c **** /*
 149:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 150:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 151:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 152:bluetooth_rxtx.c **** */
 153:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 154:bluetooth_rxtx.c **** 
 155:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 156:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 157:bluetooth_rxtx.c **** 
 158:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 159:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 160:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 161:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 162:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 163:bluetooth_rxtx.c **** //volatile u16 channel = 2455;
 164:bluetooth_rxtx.c **** //volatile u16 channel = 2402;
 165:bluetooth_rxtx.c **** //volatile u16 channel = 2426;
 166:bluetooth_rxtx.c **** volatile u16 channel = 2480;
 167:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 168:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
ARM GAS  /tmp/cctJTvh1.s 			page 21


 169:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 170:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 171:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** /* DMA linked list items */
 174:bluetooth_rxtx.c **** typedef struct {
 175:bluetooth_rxtx.c **** 	u32 src;
 176:bluetooth_rxtx.c **** 	u32 dest;
 177:bluetooth_rxtx.c **** 	u32 next_lli;
 178:bluetooth_rxtx.c **** 	u32 control;
 179:bluetooth_rxtx.c **** } dma_lli;
 180:bluetooth_rxtx.c **** 
 181:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 182:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 183:bluetooth_rxtx.c **** 
 184:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 185:bluetooth_rxtx.c **** 
 186:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 187:bluetooth_rxtx.c **** volatile u32 rx_tc;
 188:bluetooth_rxtx.c **** volatile u32 rx_err;
 189:bluetooth_rxtx.c **** 
 190:bluetooth_rxtx.c **** /* status information byte */
 191:bluetooth_rxtx.c **** volatile u8 status = 0;
 192:bluetooth_rxtx.c **** 
 193:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 194:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 195:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 196:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 197:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 198:bluetooth_rxtx.c **** 
 199:bluetooth_rxtx.c **** /*
 200:bluetooth_rxtx.c ****  * RSSI
 201:bluetooth_rxtx.c ****  */
 202:bluetooth_rxtx.c **** int8_t rssi_max;
 203:bluetooth_rxtx.c **** int8_t rssi_min;
 204:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 205:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 206:bluetooth_rxtx.c **** 
 207:bluetooth_rxtx.c **** static void rssi_reset(void)
 208:bluetooth_rxtx.c **** {
 1038              		.loc 1 208 0
 1039              		.cfi_startproc
 1040              		@ args = 0, pretend = 0, frame = 0
 1041              		@ frame_needed = 1, uses_anonymous_args = 0
 1042              		@ link register save eliminated.
 1043 0000 80B4     		push	{r7}
 1044              		.cfi_def_cfa_offset 4
 1045              		.cfi_offset 7, -4
 1046 0002 00AF     		add	r7, sp, #0
 1047              		.cfi_def_cfa_register 7
 209:bluetooth_rxtx.c **** 	rssi_count = 0;
 1048              		.loc 1 209 0
 1049 0004 074B     		ldr	r3, .L2
 1050 0006 0022     		movs	r2, #0
 1051 0008 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1052              		.loc 1 210 0
ARM GAS  /tmp/cctJTvh1.s 			page 22


 1053 000a 074B     		ldr	r3, .L2+4
 1054 000c 0022     		movs	r2, #0
 1055 000e 1A60     		str	r2, [r3]
 211:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1056              		.loc 1 211 0
 1057 0010 064B     		ldr	r3, .L2+8
 1058 0012 8022     		movs	r2, #128
 1059 0014 1A70     		strb	r2, [r3]
 212:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1060              		.loc 1 212 0
 1061 0016 064B     		ldr	r3, .L2+12
 1062 0018 7F22     		movs	r2, #127
 1063 001a 1A70     		strb	r2, [r3]
 213:bluetooth_rxtx.c **** }
 1064              		.loc 1 213 0
 1065 001c BD46     		mov	sp, r7
 1066              		.cfi_def_cfa_register 13
 1067              		@ sp needed
 1068 001e 5DF8047B 		ldr	r7, [sp], #4
 1069              		.cfi_restore 7
 1070              		.cfi_def_cfa_offset 0
 1071 0022 7047     		bx	lr
 1072              	.L3:
 1073              		.align	2
 1074              	.L2:
 1075 0024 00000000 		.word	rssi_count
 1076 0028 00000000 		.word	rssi_sum
 1077 002c 00000000 		.word	rssi_max
 1078 0030 00000000 		.word	rssi_min
 1079              		.cfi_endproc
 1080              	.LFE0:
 1082              		.section	.text.rssi_add,"ax",%progbits
 1083              		.align	2
 1084              		.thumb
 1085              		.thumb_func
 1087              	rssi_add:
 1088              	.LFB1:
 214:bluetooth_rxtx.c **** 
 215:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 216:bluetooth_rxtx.c **** {
 1089              		.loc 1 216 0
 1090              		.cfi_startproc
 1091              		@ args = 0, pretend = 0, frame = 8
 1092              		@ frame_needed = 1, uses_anonymous_args = 0
 1093              		@ link register save eliminated.
 1094 0000 80B4     		push	{r7}
 1095              		.cfi_def_cfa_offset 4
 1096              		.cfi_offset 7, -4
 1097 0002 83B0     		sub	sp, sp, #12
 1098              		.cfi_def_cfa_offset 16
 1099 0004 00AF     		add	r7, sp, #0
 1100              		.cfi_def_cfa_register 7
 1101 0006 0346     		mov	r3, r0
 1102 0008 FB71     		strb	r3, [r7, #7]
 217:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1103              		.loc 1 217 0
 1104 000a 144B     		ldr	r3, .L5
ARM GAS  /tmp/cctJTvh1.s 			page 23


 1105 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1106 000e 5AB2     		sxtb	r2, r3
 1107 0010 97F90730 		ldrsb	r3, [r7, #7]
 1108 0014 9342     		cmp	r3, r2
 1109 0016 B8BF     		it	lt
 1110 0018 1346     		movlt	r3, r2
 1111 001a DAB2     		uxtb	r2, r3
 1112 001c 0F4B     		ldr	r3, .L5
 1113 001e 1A70     		strb	r2, [r3]
 218:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1114              		.loc 1 218 0
 1115 0020 0F4B     		ldr	r3, .L5+4
 1116 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1117 0024 5AB2     		sxtb	r2, r3
 1118 0026 97F90730 		ldrsb	r3, [r7, #7]
 1119 002a 9342     		cmp	r3, r2
 1120 002c A8BF     		it	ge
 1121 002e 1346     		movge	r3, r2
 1122 0030 DAB2     		uxtb	r2, r3
 1123 0032 0B4B     		ldr	r3, .L5+4
 1124 0034 1A70     		strb	r2, [r3]
 219:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1125              		.loc 1 219 0
 1126 0036 97F90730 		ldrsb	r3, [r7, #7]
 1127 003a 1A02     		lsls	r2, r3, #8
 1128 003c 094B     		ldr	r3, .L5+8
 1129 003e 1B68     		ldr	r3, [r3]
 1130 0040 1344     		add	r3, r3, r2
 1131 0042 084A     		ldr	r2, .L5+8
 1132 0044 1360     		str	r3, [r2]
 220:bluetooth_rxtx.c **** 	rssi_count += 1;
 1133              		.loc 1 220 0
 1134 0046 084B     		ldr	r3, .L5+12
 1135 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1136 004a 0133     		adds	r3, r3, #1
 1137 004c DAB2     		uxtb	r2, r3
 1138 004e 064B     		ldr	r3, .L5+12
 1139 0050 1A70     		strb	r2, [r3]
 221:bluetooth_rxtx.c **** }
 1140              		.loc 1 221 0
 1141 0052 0C37     		adds	r7, r7, #12
 1142              		.cfi_def_cfa_offset 4
 1143 0054 BD46     		mov	sp, r7
 1144              		.cfi_def_cfa_register 13
 1145              		@ sp needed
 1146 0056 5DF8047B 		ldr	r7, [sp], #4
 1147              		.cfi_restore 7
 1148              		.cfi_def_cfa_offset 0
 1149 005a 7047     		bx	lr
 1150              	.L6:
 1151              		.align	2
 1152              	.L5:
 1153 005c 00000000 		.word	rssi_max
 1154 0060 00000000 		.word	rssi_min
 1155 0064 00000000 		.word	rssi_sum
 1156 0068 00000000 		.word	rssi_count
 1157              		.cfi_endproc
ARM GAS  /tmp/cctJTvh1.s 			page 24


 1158              	.LFE1:
 1160              		.section	.text.cc2400_rssi_to_dbm,"ax",%progbits
 1161              		.align	2
 1162              		.thumb
 1163              		.thumb_func
 1165              	cc2400_rssi_to_dbm:
 1166              	.LFB2:
 222:bluetooth_rxtx.c **** 
 223:bluetooth_rxtx.c **** static int8_t cc2400_rssi_to_dbm( const int8_t rssi )
 224:bluetooth_rxtx.c **** {
 1167              		.loc 1 224 0
 1168              		.cfi_startproc
 1169              		@ args = 0, pretend = 0, frame = 8
 1170              		@ frame_needed = 1, uses_anonymous_args = 0
 1171              		@ link register save eliminated.
 1172 0000 80B4     		push	{r7}
 1173              		.cfi_def_cfa_offset 4
 1174              		.cfi_offset 7, -4
 1175 0002 83B0     		sub	sp, sp, #12
 1176              		.cfi_def_cfa_offset 16
 1177 0004 00AF     		add	r7, sp, #0
 1178              		.cfi_def_cfa_register 7
 1179 0006 0346     		mov	r3, r0
 1180 0008 FB71     		strb	r3, [r7, #7]
 225:bluetooth_rxtx.c ****   	if (rssi <= -46)
 1181              		.loc 1 225 0
 1182 000a 97F90730 		ldrsb	r3, [r7, #7]
 1183 000e 13F12D0F 		cmn	r3, #45
 1184 0012 01DA     		bge	.L8
 226:bluetooth_rxtx.c ****   	{
 227:bluetooth_rxtx.c ****                 return -100;
 1185              		.loc 1 227 0
 1186 0014 9C23     		movs	r3, #156
 1187 0016 09E0     		b	.L9
 1188              	.L8:
 228:bluetooth_rxtx.c ****     	}
 229:bluetooth_rxtx.c ****         else if (rssi >= 34)
 1189              		.loc 1 229 0
 1190 0018 97F90730 		ldrsb	r3, [r7, #7]
 1191 001c 212B     		cmp	r3, #33
 1192 001e 01DD     		ble	.L10
 230:bluetooth_rxtx.c ****         {
 231:bluetooth_rxtx.c ****                 return -20;
 1193              		.loc 1 231 0
 1194 0020 EC23     		movs	r3, #236
 1195 0022 03E0     		b	.L9
 1196              	.L10:
 232:bluetooth_rxtx.c ****         }
 233:bluetooth_rxtx.c ****         else
 234:bluetooth_rxtx.c ****         {
 235:bluetooth_rxtx.c ****                 return rssi - 54;
 1197              		.loc 1 235 0
 1198 0024 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1199 0026 363B     		subs	r3, r3, #54
 1200 0028 DBB2     		uxtb	r3, r3
 1201 002a DBB2     		uxtb	r3, r3
 1202              	.L9:
ARM GAS  /tmp/cctJTvh1.s 			page 25


 1203 002c 5BB2     		sxtb	r3, r3
 236:bluetooth_rxtx.c ****         }
 237:bluetooth_rxtx.c **** 
 238:bluetooth_rxtx.c **** }
 1204              		.loc 1 238 0
 1205 002e 1846     		mov	r0, r3
 1206 0030 0C37     		adds	r7, r7, #12
 1207              		.cfi_def_cfa_offset 4
 1208 0032 BD46     		mov	sp, r7
 1209              		.cfi_def_cfa_register 13
 1210              		@ sp needed
 1211 0034 5DF8047B 		ldr	r7, [sp], #4
 1212              		.cfi_restore 7
 1213              		.cfi_def_cfa_offset 0
 1214 0038 7047     		bx	lr
 1215              		.cfi_endproc
 1216              	.LFE2:
 1218 003a 00BF     		.section	.text.rssi_iir_update,"ax",%progbits
 1219              		.align	2
 1220              		.thumb
 1221              		.thumb_func
 1223              	rssi_iir_update:
 1224              	.LFB3:
 239:bluetooth_rxtx.c **** 
 240:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 241:bluetooth_rxtx.c **** {
 1225              		.loc 1 241 0
 1226              		.cfi_startproc
 1227              		@ args = 0, pretend = 0, frame = 16
 1228              		@ frame_needed = 1, uses_anonymous_args = 0
 1229              		@ link register save eliminated.
 1230 0000 80B4     		push	{r7}
 1231              		.cfi_def_cfa_offset 4
 1232              		.cfi_offset 7, -4
 1233 0002 85B0     		sub	sp, sp, #20
 1234              		.cfi_def_cfa_offset 24
 1235 0004 00AF     		add	r7, sp, #0
 1236              		.cfi_def_cfa_register 7
 242:bluetooth_rxtx.c **** 	int i;
 243:bluetooth_rxtx.c **** 	int32_t avg;
 244:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 245:bluetooth_rxtx.c **** 
 246:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 247:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 248:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1237              		.loc 1 248 0
 1238 0006 1F4B     		ldr	r3, .L17
 1239 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1240 000a 002B     		cmp	r3, #0
 1241 000c 06D0     		beq	.L12
 249:bluetooth_rxtx.c **** 		i = channel - 2402;
 1242              		.loc 1 249 0
 1243 000e 1E4B     		ldr	r3, .L17+4
 1244 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1245 0012 9BB2     		uxth	r3, r3
 1246 0014 A3F66213 		subw	r3, r3, #2402
 1247 0018 FB60     		str	r3, [r7, #12]
ARM GAS  /tmp/cctJTvh1.s 			page 26


 1248 001a 01E0     		b	.L13
 1249              	.L12:
 250:bluetooth_rxtx.c **** 	else
 251:bluetooth_rxtx.c **** 		i = 0;
 1250              		.loc 1 251 0
 1251 001c 0023     		movs	r3, #0
 1252 001e FB60     		str	r3, [r7, #12]
 1253              	.L13:
 252:bluetooth_rxtx.c **** 
 253:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 254:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1254              		.loc 1 254 0
 1255 0020 1A4B     		ldr	r3, .L17+8
 1256 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1257 0024 002B     		cmp	r3, #0
 1258 0026 08D0     		beq	.L14
 255:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1259              		.loc 1 255 0
 1260 0028 194B     		ldr	r3, .L17+12
 1261 002a 1B68     		ldr	r3, [r3]
 1262 002c 8033     		adds	r3, r3, #128
 1263 002e 174A     		ldr	r2, .L17+8
 1264 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1265 0032 93FBF2F3 		sdiv	r3, r3, r2
 1266 0036 BB60     		str	r3, [r7, #8]
 1267 0038 01E0     		b	.L15
 1268              	.L14:
 256:bluetooth_rxtx.c **** 	else
 257:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1269              		.loc 1 257 0
 1270 003a 0023     		movs	r3, #0
 1271 003c BB60     		str	r3, [r7, #8]
 1272              	.L15:
 258:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1273              		.loc 1 258 0
 1274 003e 154A     		ldr	r2, .L17+16
 1275 0040 FB68     		ldr	r3, [r7, #12]
 1276 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1277 0046 1AB2     		sxth	r2, r3
 1278 0048 1346     		mov	r3, r2
 1279 004a 9B01     		lsls	r3, r3, #6
 1280 004c 9B1A     		subs	r3, r3, r2
 1281 004e 9B00     		lsls	r3, r3, #2
 1282 0050 1344     		add	r3, r3, r2
 1283 0052 7B60     		str	r3, [r7, #4]
 259:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1284              		.loc 1 259 0
 1285 0054 BA68     		ldr	r2, [r7, #8]
 1286 0056 1346     		mov	r3, r2
 1287 0058 5B00     		lsls	r3, r3, #1
 1288 005a 1344     		add	r3, r3, r2
 1289 005c 7A68     		ldr	r2, [r7, #4]
 1290 005e 1344     		add	r3, r3, r2
 1291 0060 7B60     		str	r3, [r7, #4]
 260:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1292              		.loc 1 260 0
 1293 0062 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cctJTvh1.s 			page 27


 1294 0064 8033     		adds	r3, r3, #128
 1295 0066 002B     		cmp	r3, #0
 1296 0068 00DA     		bge	.L16
 1297 006a FF33     		adds	r3, r3, #255
 1298              	.L16:
 1299 006c 1B12     		asrs	r3, r3, #8
 1300 006e 99B2     		uxth	r1, r3
 1301 0070 084A     		ldr	r2, .L17+16
 1302 0072 FB68     		ldr	r3, [r7, #12]
 1303 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 261:bluetooth_rxtx.c **** }
 1304              		.loc 1 261 0
 1305 0078 1437     		adds	r7, r7, #20
 1306              		.cfi_def_cfa_offset 4
 1307 007a BD46     		mov	sp, r7
 1308              		.cfi_def_cfa_register 13
 1309              		@ sp needed
 1310 007c 5DF8047B 		ldr	r7, [sp], #4
 1311              		.cfi_restore 7
 1312              		.cfi_def_cfa_offset 0
 1313 0080 7047     		bx	lr
 1314              	.L18:
 1315 0082 00BF     		.align	2
 1316              	.L17:
 1317 0084 00000000 		.word	hop_mode
 1318 0088 00000000 		.word	channel
 1319 008c 00000000 		.word	rssi_count
 1320 0090 00000000 		.word	rssi_sum
 1321 0094 00000000 		.word	rssi_iir
 1322              		.cfi_endproc
 1323              	.LFE3:
 1325              		.section	.text.cs_threshold_set,"ax",%progbits
 1326              		.align	2
 1327              		.thumb
 1328              		.thumb_func
 1330              	cs_threshold_set:
 1331              	.LFB4:
 262:bluetooth_rxtx.c **** 
 263:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 264:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 265:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 266:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 267:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 268:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 269:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 270:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 271:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 272:bluetooth_rxtx.c **** {
 1332              		.loc 1 272 0
 1333              		.cfi_startproc
 1334              		@ args = 0, pretend = 0, frame = 8
 1335              		@ frame_needed = 1, uses_anonymous_args = 0
 1336 0000 80B5     		push	{r7, lr}
 1337              		.cfi_def_cfa_offset 8
 1338              		.cfi_offset 7, -8
 1339              		.cfi_offset 14, -4
 1340 0002 82B0     		sub	sp, sp, #8
ARM GAS  /tmp/cctJTvh1.s 			page 28


 1341              		.cfi_def_cfa_offset 16
 1342 0004 00AF     		add	r7, sp, #0
 1343              		.cfi_def_cfa_register 7
 1344 0006 0346     		mov	r3, r0
 1345 0008 0A46     		mov	r2, r1
 1346 000a FB71     		strb	r3, [r7, #7]
 1347 000c 1346     		mov	r3, r2
 1348 000e BB71     		strb	r3, [r7, #6]
 273:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1349              		.loc 1 273 0
 1350 0010 97F90730 		ldrsb	r3, [r7, #7]
 1351 0014 13F1140F 		cmn	r3, #20
 1352 0018 0DD0     		beq	.L20
 1353              		.loc 1 273 0 is_stmt 0 discriminator 1
 1354 001a 97F90730 		ldrsb	r3, [r7, #7]
 1355 001e 13F1130F 		cmn	r3, #19
 1356 0022 08DA     		bge	.L20
 1357              		.loc 1 273 0 discriminator 3
 1358 0024 97F90730 		ldrsb	r3, [r7, #7]
 1359 0028 6FF07702 		mvn	r2, #119
 1360 002c 9342     		cmp	r3, r2
 1361 002e B8BF     		it	lt
 1362 0030 1346     		movlt	r3, r2
 1363 0032 DBB2     		uxtb	r3, r3
 1364 0034 00E0     		b	.L21
 1365              	.L20:
 1366              		.loc 1 273 0 discriminator 4
 1367 0036 EC23     		movs	r3, #236
 1368              	.L21:
 1369              		.loc 1 273 0 discriminator 6
 1370 0038 FB71     		strb	r3, [r7, #7]
 274:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1371              		.loc 1 274 0 is_stmt 1 discriminator 6
 1372 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1373 003c 3833     		adds	r3, r3, #56
 1374 003e DBB2     		uxtb	r3, r3
 1375 0040 9BB2     		uxth	r3, r3
 1376 0042 03F0FC03 		and	r3, r3, #252
 1377 0046 9AB2     		uxth	r2, r3
 1378 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1379 004a 9BB2     		uxth	r3, r3
 1380 004c 03F00303 		and	r3, r3, #3
 1381 0050 9BB2     		uxth	r3, r3
 1382 0052 1343     		orrs	r3, r3, r2
 1383 0054 9BB2     		uxth	r3, r3
 1384 0056 9BB2     		uxth	r3, r3
 1385 0058 0620     		movs	r0, #6
 1386 005a 1946     		mov	r1, r3
 1387 005c FFF7FEFF 		bl	cc2400_set
 275:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1388              		.loc 1 275 0 discriminator 6
 1389 0060 084A     		ldr	r2, .L22
 1390 0062 FB79     		ldrb	r3, [r7, #7]
 1391 0064 1370     		strb	r3, [r2]
 276:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1392              		.loc 1 276 0 discriminator 6
 1393 0066 97F90730 		ldrsb	r3, [r7, #7]
ARM GAS  /tmp/cctJTvh1.s 			page 29


 1394 006a 13F1770F 		cmn	r3, #119
 1395 006e B4BF     		ite	lt
 1396 0070 0123     		movlt	r3, #1
 1397 0072 0023     		movge	r3, #0
 1398 0074 DBB2     		uxtb	r3, r3
 1399 0076 1A46     		mov	r2, r3
 1400 0078 034B     		ldr	r3, .L22+4
 1401 007a 1A70     		strb	r2, [r3]
 277:bluetooth_rxtx.c **** }
 1402              		.loc 1 277 0 discriminator 6
 1403 007c 0837     		adds	r7, r7, #8
 1404              		.cfi_def_cfa_offset 8
 1405 007e BD46     		mov	sp, r7
 1406              		.cfi_def_cfa_register 13
 1407              		@ sp needed
 1408 0080 80BD     		pop	{r7, pc}
 1409              	.L23:
 1410 0082 00BF     		.align	2
 1411              	.L22:
 1412 0084 00000000 		.word	cs_threshold_cur
 1413 0088 00000000 		.word	cs_no_squelch
 1414              		.cfi_endproc
 1415              	.LFE4:
 1417              		.section	.text.enqueue,"ax",%progbits
 1418              		.align	2
 1419              		.thumb
 1420              		.thumb_func
 1422              	enqueue:
 1423              	.LFB5:
 278:bluetooth_rxtx.c **** 
 279:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 280:bluetooth_rxtx.c **** {
 1424              		.loc 1 280 0
 1425              		.cfi_startproc
 1426              		@ args = 0, pretend = 0, frame = 32
 1427              		@ frame_needed = 1, uses_anonymous_args = 0
 1428 0000 80B5     		push	{r7, lr}
 1429              		.cfi_def_cfa_offset 8
 1430              		.cfi_offset 7, -8
 1431              		.cfi_offset 14, -4
 1432 0002 88B0     		sub	sp, sp, #32
 1433              		.cfi_def_cfa_offset 40
 1434 0004 00AF     		add	r7, sp, #0
 1435              		.cfi_def_cfa_register 7
 1436 0006 0346     		mov	r3, r0
 1437 0008 3960     		str	r1, [r7]
 1438 000a FB71     		strb	r3, [r7, #7]
 281:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1439              		.loc 1 281 0
 1440 000c FFF7FEFF 		bl	usb_enqueue
 1441 0010 F861     		str	r0, [r7, #28]
 282:bluetooth_rxtx.c **** 
 283:bluetooth_rxtx.c **** 	/* fail if queue is full */
 284:bluetooth_rxtx.c **** 	if (f == NULL) {
 1442              		.loc 1 284 0
 1443 0012 FB69     		ldr	r3, [r7, #28]
 1444 0014 002B     		cmp	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 30


 1445 0016 09D1     		bne	.L25
 285:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1446              		.loc 1 285 0
 1447 0018 524B     		ldr	r3, .L29
 1448 001a 1B78     		ldrb	r3, [r3]
 1449 001c DBB2     		uxtb	r3, r3
 1450 001e 43F00403 		orr	r3, r3, #4
 1451 0022 DAB2     		uxtb	r2, r3
 1452 0024 4F4B     		ldr	r3, .L29
 1453 0026 1A70     		strb	r2, [r3]
 286:bluetooth_rxtx.c **** 		return 0;
 1454              		.loc 1 286 0
 1455 0028 0023     		movs	r3, #0
 1456 002a 97E0     		b	.L26
 1457              	.L25:
 287:bluetooth_rxtx.c **** 	}
 288:bluetooth_rxtx.c **** 
 289:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1458              		.loc 1 289 0
 1459 002c FB69     		ldr	r3, [r7, #28]
 1460 002e FA79     		ldrb	r2, [r7, #7]
 1461 0030 1A70     		strb	r2, [r3]
 290:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1462              		.loc 1 290 0
 1463 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1464 0034 042B     		cmp	r3, #4
 1465 0036 13D1     		bne	.L27
 291:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1466              		.loc 1 291 0
 1467 0038 4B4B     		ldr	r3, .L29+4
 1468 003a 1B68     		ldr	r3, [r3]
 1469 003c 1B0D     		lsrs	r3, r3, #20
 1470 003e DAB2     		uxtb	r2, r3
 1471 0040 FB69     		ldr	r3, [r7, #28]
 1472 0042 DA70     		strb	r2, [r3, #3]
 292:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1473              		.loc 1 292 0
 1474 0044 484B     		ldr	r3, .L29+4
 1475 0046 1B68     		ldr	r3, [r3]
 1476 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1477 004c 40F63542 		movw	r2, #3125
 1478 0050 02FB03F2 		mul	r2, r2, r3
 1479 0054 454B     		ldr	r3, .L29+8
 1480 0056 1B68     		ldr	r3, [r3]
 1481 0058 1A44     		add	r2, r2, r3
 1482 005a FB69     		ldr	r3, [r7, #28]
 1483 005c 5A60     		str	r2, [r3, #4]
 1484 005e 08E0     		b	.L28
 1485              	.L27:
 293:bluetooth_rxtx.c **** 	} else {
 294:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1486              		.loc 1 294 0
 1487 0060 434B     		ldr	r3, .L29+12
 1488 0062 1B68     		ldr	r3, [r3]
 1489 0064 DAB2     		uxtb	r2, r3
 1490 0066 FB69     		ldr	r3, [r7, #28]
 1491 0068 DA70     		strb	r2, [r3, #3]
ARM GAS  /tmp/cctJTvh1.s 			page 31


 295:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1492              		.loc 1 295 0
 1493 006a 424B     		ldr	r3, .L29+16
 1494 006c 1A68     		ldr	r2, [r3]
 1495 006e FB69     		ldr	r3, [r7, #28]
 1496 0070 5A60     		str	r2, [r3, #4]
 1497              	.L28:
 296:bluetooth_rxtx.c **** 	}
 297:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1498              		.loc 1 297 0
 1499 0072 414B     		ldr	r3, .L29+20
 1500 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1501 0076 9BB2     		uxth	r3, r3
 1502 0078 DBB2     		uxtb	r3, r3
 1503 007a 623B     		subs	r3, r3, #98
 1504 007c DAB2     		uxtb	r2, r3
 1505 007e FB69     		ldr	r3, [r7, #28]
 1506 0080 9A70     		strb	r2, [r3, #2]
 298:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1507              		.loc 1 298 0
 1508 0082 3E4B     		ldr	r3, .L29+24
 1509 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1510 0086 DAB2     		uxtb	r2, r3
 1511 0088 FB69     		ldr	r3, [r7, #28]
 1512 008a 5A72     		strb	r2, [r3, #9]
 299:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
 1513              		.loc 1 299 0
 1514 008c 3C4B     		ldr	r3, .L29+28
 1515 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1516 0090 DAB2     		uxtb	r2, r3
 1517 0092 FB69     		ldr	r3, [r7, #28]
 1518 0094 1A72     		strb	r2, [r3, #8]
 300:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
 1519              		.loc 1 300 0
 1520 0096 3B4B     		ldr	r3, .L29+32
 1521 0098 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1522 009a FB69     		ldr	r3, [r7, #28]
 1523 009c 1A73     		strb	r2, [r3, #12]
 301:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_sum/rssi_count;
 1524              		.loc 1 301 0
 1525 009e 3A4B     		ldr	r3, .L29+36
 1526 00a0 1B68     		ldr	r3, [r3]
 1527 00a2 3A4A     		ldr	r2, .L29+40
 1528 00a4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1529 00a6 93FBF2F3 		sdiv	r3, r3, r2
 1530 00aa DAB2     		uxtb	r2, r3
 1531 00ac FB69     		ldr	r3, [r7, #28]
 1532 00ae 9A72     		strb	r2, [r3, #10]
 302:bluetooth_rxtx.c **** 	
 303:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 304:bluetooth_rxtx.c **** 
 305:bluetooth_rxtx.c **** 	USRLED_SET;
 1533              		.loc 1 305 0
 1534 00b0 374B     		ldr	r3, .L29+44
 1535 00b2 0222     		movs	r2, #2
 1536 00b4 1A60     		str	r2, [r3]
 306:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 32


 307:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 308:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1537              		.loc 1 308 0
 1538 00b6 FB69     		ldr	r3, [r7, #28]
 1539 00b8 0E33     		adds	r3, r3, #14
 1540 00ba BB61     		str	r3, [r7, #24]
 309:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1541              		.loc 1 309 0
 1542 00bc 3B68     		ldr	r3, [r7]
 1543 00be 7B61     		str	r3, [r7, #20]
 310:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1544              		.loc 1 310 0
 1545 00c0 7B69     		ldr	r3, [r7, #20]
 1546 00c2 1A68     		ldr	r2, [r3]
 1547 00c4 BB69     		ldr	r3, [r7, #24]
 1548 00c6 1A60     		str	r2, [r3]
 311:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1549              		.loc 1 311 0
 1550 00c8 BB69     		ldr	r3, [r7, #24]
 1551 00ca 0433     		adds	r3, r3, #4
 1552 00cc 7A69     		ldr	r2, [r7, #20]
 1553 00ce 5268     		ldr	r2, [r2, #4]
 1554 00d0 1A60     		str	r2, [r3]
 312:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1555              		.loc 1 312 0
 1556 00d2 BB69     		ldr	r3, [r7, #24]
 1557 00d4 0833     		adds	r3, r3, #8
 1558 00d6 7A69     		ldr	r2, [r7, #20]
 1559 00d8 9268     		ldr	r2, [r2, #8]
 1560 00da 1A60     		str	r2, [r3]
 313:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1561              		.loc 1 313 0
 1562 00dc BB69     		ldr	r3, [r7, #24]
 1563 00de 0C33     		adds	r3, r3, #12
 1564 00e0 7A69     		ldr	r2, [r7, #20]
 1565 00e2 D268     		ldr	r2, [r2, #12]
 1566 00e4 1A60     		str	r2, [r3]
 314:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1567              		.loc 1 314 0
 1568 00e6 BB69     		ldr	r3, [r7, #24]
 1569 00e8 1033     		adds	r3, r3, #16
 1570 00ea 7A69     		ldr	r2, [r7, #20]
 1571 00ec 1269     		ldr	r2, [r2, #16]
 1572 00ee 1A60     		str	r2, [r3]
 315:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1573              		.loc 1 315 0
 1574 00f0 BB69     		ldr	r3, [r7, #24]
 1575 00f2 1433     		adds	r3, r3, #20
 1576 00f4 7A69     		ldr	r2, [r7, #20]
 1577 00f6 5269     		ldr	r2, [r2, #20]
 1578 00f8 1A60     		str	r2, [r3]
 316:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1579              		.loc 1 316 0
 1580 00fa BB69     		ldr	r3, [r7, #24]
 1581 00fc 1833     		adds	r3, r3, #24
 1582 00fe 7A69     		ldr	r2, [r7, #20]
 1583 0100 9269     		ldr	r2, [r2, #24]
ARM GAS  /tmp/cctJTvh1.s 			page 33


 1584 0102 1A60     		str	r2, [r3]
 317:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1585              		.loc 1 317 0
 1586 0104 BB69     		ldr	r3, [r7, #24]
 1587 0106 1C33     		adds	r3, r3, #28
 1588 0108 7A69     		ldr	r2, [r7, #20]
 1589 010a D269     		ldr	r2, [r2, #28]
 1590 010c 1A60     		str	r2, [r3]
 318:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1591              		.loc 1 318 0
 1592 010e BB69     		ldr	r3, [r7, #24]
 1593 0110 2033     		adds	r3, r3, #32
 1594 0112 7A69     		ldr	r2, [r7, #20]
 1595 0114 126A     		ldr	r2, [r2, #32]
 1596 0116 1A60     		str	r2, [r3]
 319:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1597              		.loc 1 319 0
 1598 0118 BB69     		ldr	r3, [r7, #24]
 1599 011a 2433     		adds	r3, r3, #36
 1600 011c 7A69     		ldr	r2, [r7, #20]
 1601 011e 526A     		ldr	r2, [r2, #36]
 1602 0120 1A60     		str	r2, [r3]
 320:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1603              		.loc 1 320 0
 1604 0122 BB69     		ldr	r3, [r7, #24]
 1605 0124 2833     		adds	r3, r3, #40
 1606 0126 7A69     		ldr	r2, [r7, #20]
 1607 0128 926A     		ldr	r2, [r2, #40]
 1608 012a 1A60     		str	r2, [r3]
 321:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1609              		.loc 1 321 0
 1610 012c BB69     		ldr	r3, [r7, #24]
 1611 012e 2C33     		adds	r3, r3, #44
 1612 0130 7A69     		ldr	r2, [r7, #20]
 1613 0132 D26A     		ldr	r2, [r2, #44]
 1614 0134 1A60     		str	r2, [r3]
 322:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 323:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1615              		.loc 1 323 0
 1616 0136 FB69     		ldr	r3, [r7, #28]
 1617 0138 0E33     		adds	r3, r3, #14
 1618 013a 3B61     		str	r3, [r7, #16]
 324:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1619              		.loc 1 324 0
 1620 013c 3B68     		ldr	r3, [r7]
 1621 013e FB60     		str	r3, [r7, #12]
 325:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1622              		.loc 1 325 0
 1623 0140 3B69     		ldr	r3, [r7, #16]
 1624 0142 3033     		adds	r3, r3, #48
 1625 0144 FA68     		ldr	r2, [r7, #12]
 1626 0146 128E     		ldrh	r2, [r2, #48]
 1627 0148 1A80     		strh	r2, [r3]	@ movhi
 326:bluetooth_rxtx.c **** 
 327:bluetooth_rxtx.c **** 	f->status = status;
 1628              		.loc 1 327 0
 1629 014a 064B     		ldr	r3, .L29
ARM GAS  /tmp/cctJTvh1.s 			page 34


 1630 014c 1B78     		ldrb	r3, [r3]
 1631 014e DAB2     		uxtb	r2, r3
 1632 0150 FB69     		ldr	r3, [r7, #28]
 1633 0152 5A70     		strb	r2, [r3, #1]
 328:bluetooth_rxtx.c **** 	status = 0;
 1634              		.loc 1 328 0
 1635 0154 034B     		ldr	r3, .L29
 1636 0156 0022     		movs	r2, #0
 1637 0158 1A70     		strb	r2, [r3]
 329:bluetooth_rxtx.c **** 
 330:bluetooth_rxtx.c **** 	return 1;
 1638              		.loc 1 330 0
 1639 015a 0123     		movs	r3, #1
 1640              	.L26:
 331:bluetooth_rxtx.c **** }
 1641              		.loc 1 331 0
 1642 015c 1846     		mov	r0, r3
 1643 015e 2037     		adds	r7, r7, #32
 1644              		.cfi_def_cfa_offset 8
 1645 0160 BD46     		mov	sp, r7
 1646              		.cfi_def_cfa_register 13
 1647              		@ sp needed
 1648 0162 80BD     		pop	{r7, pc}
 1649              	.L30:
 1650              		.align	2
 1651              	.L29:
 1652 0164 00000000 		.word	status
 1653 0168 00000000 		.word	clkn
 1654 016c 08400040 		.word	1073758216
 1655 0170 00000000 		.word	idle_buf_clkn_high
 1656 0174 00000000 		.word	idle_buf_clk100ns
 1657 0178 00000000 		.word	idle_buf_channel
 1658 017c 00000000 		.word	rssi_min
 1659 0180 00000000 		.word	rssi_max
 1660 0184 00000000 		.word	device_index
 1661 0188 00000000 		.word	rssi_sum
 1662 018c 00000000 		.word	rssi_count
 1663 0190 38C00920 		.word	537509944
 1664              		.cfi_endproc
 1665              	.LFE5:
 1667              		.section	.text.enqueue_legacy,"ax",%progbits
 1668              		.align	2
 1669              		.thumb
 1670              		.thumb_func
 1672              	enqueue_legacy:
 1673              	.LFB6:
 332:bluetooth_rxtx.c **** 
 333:bluetooth_rxtx.c **** 
 334:bluetooth_rxtx.c **** static int enqueue_legacy(u8 type, u8 *buf)
 335:bluetooth_rxtx.c **** {
 1674              		.loc 1 335 0
 1675              		.cfi_startproc
 1676              		@ args = 0, pretend = 0, frame = 32
 1677              		@ frame_needed = 1, uses_anonymous_args = 0
 1678 0000 80B5     		push	{r7, lr}
 1679              		.cfi_def_cfa_offset 8
 1680              		.cfi_offset 7, -8
ARM GAS  /tmp/cctJTvh1.s 			page 35


 1681              		.cfi_offset 14, -4
 1682 0002 88B0     		sub	sp, sp, #32
 1683              		.cfi_def_cfa_offset 40
 1684 0004 00AF     		add	r7, sp, #0
 1685              		.cfi_def_cfa_register 7
 1686 0006 0346     		mov	r3, r0
 1687 0008 3960     		str	r1, [r7]
 1688 000a FB71     		strb	r3, [r7, #7]
 336:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1689              		.loc 1 336 0
 1690 000c FFF7FEFF 		bl	usb_enqueue
 1691 0010 F861     		str	r0, [r7, #28]
 337:bluetooth_rxtx.c **** 
 338:bluetooth_rxtx.c **** 	/* fail if queue is full */
 339:bluetooth_rxtx.c **** 	if (f == NULL) {
 1692              		.loc 1 339 0
 1693 0012 FB69     		ldr	r3, [r7, #28]
 1694 0014 002B     		cmp	r3, #0
 1695 0016 09D1     		bne	.L32
 340:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1696              		.loc 1 340 0
 1697 0018 3D4B     		ldr	r3, .L34
 1698 001a 1B78     		ldrb	r3, [r3]
 1699 001c DBB2     		uxtb	r3, r3
 1700 001e 43F00403 		orr	r3, r3, #4
 1701 0022 DAB2     		uxtb	r2, r3
 1702 0024 3A4B     		ldr	r3, .L34
 1703 0026 1A70     		strb	r2, [r3]
 341:bluetooth_rxtx.c **** 		return 0;
 1704              		.loc 1 341 0
 1705 0028 0023     		movs	r3, #0
 1706 002a 6DE0     		b	.L33
 1707              	.L32:
 342:bluetooth_rxtx.c **** 	}
 343:bluetooth_rxtx.c **** 
 344:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1708              		.loc 1 344 0
 1709 002c FB69     		ldr	r3, [r7, #28]
 1710 002e FA79     		ldrb	r2, [r7, #7]
 1711 0030 1A70     		strb	r2, [r3]
 345:bluetooth_rxtx.c **** //	f->clkn_high = idle_buf_clkn_high;
 346:bluetooth_rxtx.c **** 	f->clk100ns = clkn_legacy;
 1712              		.loc 1 346 0
 1713 0032 384B     		ldr	r3, .L34+4
 1714 0034 1A68     		ldr	r2, [r3]
 1715 0036 FB69     		ldr	r3, [r7, #28]
 1716 0038 5A60     		str	r2, [r3, #4]
 347:bluetooth_rxtx.c **** 	
 348:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1717              		.loc 1 348 0
 1718 003a 374B     		ldr	r3, .L34+8
 1719 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1720 003e 9BB2     		uxth	r3, r3
 1721 0040 DBB2     		uxtb	r3, r3
 1722 0042 623B     		subs	r3, r3, #98
 1723 0044 DAB2     		uxtb	r2, r3
 1724 0046 FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/cctJTvh1.s 			page 36


 1725 0048 9A70     		strb	r2, [r3, #2]
 349:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 350:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 351:bluetooth_rxtx.c **** //	f->reserved[0] = device_index;
 352:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_sum/rssi_count;
 1726              		.loc 1 352 0
 1727 004a 344B     		ldr	r3, .L34+12
 1728 004c 1B68     		ldr	r3, [r3]
 1729 004e 344A     		ldr	r2, .L34+16
 1730 0050 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1731 0052 93FBF2F3 		sdiv	r3, r3, r2
 1732 0056 DAB2     		uxtb	r2, r3
 1733 0058 FB69     		ldr	r3, [r7, #28]
 1734 005a 9A72     		strb	r2, [r3, #10]
 353:bluetooth_rxtx.c **** 	
 354:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 355:bluetooth_rxtx.c **** 
 356:bluetooth_rxtx.c **** 	USRLED_SET;
 1735              		.loc 1 356 0
 1736 005c 314B     		ldr	r3, .L34+20
 1737 005e 0222     		movs	r2, #2
 1738 0060 1A60     		str	r2, [r3]
 357:bluetooth_rxtx.c **** 
 358:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 359:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1739              		.loc 1 359 0
 1740 0062 FB69     		ldr	r3, [r7, #28]
 1741 0064 0E33     		adds	r3, r3, #14
 1742 0066 BB61     		str	r3, [r7, #24]
 360:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1743              		.loc 1 360 0
 1744 0068 3B68     		ldr	r3, [r7]
 1745 006a 7B61     		str	r3, [r7, #20]
 361:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1746              		.loc 1 361 0
 1747 006c 7B69     		ldr	r3, [r7, #20]
 1748 006e 1A68     		ldr	r2, [r3]
 1749 0070 BB69     		ldr	r3, [r7, #24]
 1750 0072 1A60     		str	r2, [r3]
 362:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1751              		.loc 1 362 0
 1752 0074 BB69     		ldr	r3, [r7, #24]
 1753 0076 0433     		adds	r3, r3, #4
 1754 0078 7A69     		ldr	r2, [r7, #20]
 1755 007a 5268     		ldr	r2, [r2, #4]
 1756 007c 1A60     		str	r2, [r3]
 363:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1757              		.loc 1 363 0
 1758 007e BB69     		ldr	r3, [r7, #24]
 1759 0080 0833     		adds	r3, r3, #8
 1760 0082 7A69     		ldr	r2, [r7, #20]
 1761 0084 9268     		ldr	r2, [r2, #8]
 1762 0086 1A60     		str	r2, [r3]
 364:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1763              		.loc 1 364 0
 1764 0088 BB69     		ldr	r3, [r7, #24]
 1765 008a 0C33     		adds	r3, r3, #12
ARM GAS  /tmp/cctJTvh1.s 			page 37


 1766 008c 7A69     		ldr	r2, [r7, #20]
 1767 008e D268     		ldr	r2, [r2, #12]
 1768 0090 1A60     		str	r2, [r3]
 365:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1769              		.loc 1 365 0
 1770 0092 BB69     		ldr	r3, [r7, #24]
 1771 0094 1033     		adds	r3, r3, #16
 1772 0096 7A69     		ldr	r2, [r7, #20]
 1773 0098 1269     		ldr	r2, [r2, #16]
 1774 009a 1A60     		str	r2, [r3]
 366:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1775              		.loc 1 366 0
 1776 009c BB69     		ldr	r3, [r7, #24]
 1777 009e 1433     		adds	r3, r3, #20
 1778 00a0 7A69     		ldr	r2, [r7, #20]
 1779 00a2 5269     		ldr	r2, [r2, #20]
 1780 00a4 1A60     		str	r2, [r3]
 367:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1781              		.loc 1 367 0
 1782 00a6 BB69     		ldr	r3, [r7, #24]
 1783 00a8 1833     		adds	r3, r3, #24
 1784 00aa 7A69     		ldr	r2, [r7, #20]
 1785 00ac 9269     		ldr	r2, [r2, #24]
 1786 00ae 1A60     		str	r2, [r3]
 368:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1787              		.loc 1 368 0
 1788 00b0 BB69     		ldr	r3, [r7, #24]
 1789 00b2 1C33     		adds	r3, r3, #28
 1790 00b4 7A69     		ldr	r2, [r7, #20]
 1791 00b6 D269     		ldr	r2, [r2, #28]
 1792 00b8 1A60     		str	r2, [r3]
 369:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1793              		.loc 1 369 0
 1794 00ba BB69     		ldr	r3, [r7, #24]
 1795 00bc 2033     		adds	r3, r3, #32
 1796 00be 7A69     		ldr	r2, [r7, #20]
 1797 00c0 126A     		ldr	r2, [r2, #32]
 1798 00c2 1A60     		str	r2, [r3]
 370:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1799              		.loc 1 370 0
 1800 00c4 BB69     		ldr	r3, [r7, #24]
 1801 00c6 2433     		adds	r3, r3, #36
 1802 00c8 7A69     		ldr	r2, [r7, #20]
 1803 00ca 526A     		ldr	r2, [r2, #36]
 1804 00cc 1A60     		str	r2, [r3]
 371:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1805              		.loc 1 371 0
 1806 00ce BB69     		ldr	r3, [r7, #24]
 1807 00d0 2833     		adds	r3, r3, #40
 1808 00d2 7A69     		ldr	r2, [r7, #20]
 1809 00d4 926A     		ldr	r2, [r2, #40]
 1810 00d6 1A60     		str	r2, [r3]
 372:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1811              		.loc 1 372 0
 1812 00d8 BB69     		ldr	r3, [r7, #24]
 1813 00da 2C33     		adds	r3, r3, #44
 1814 00dc 7A69     		ldr	r2, [r7, #20]
ARM GAS  /tmp/cctJTvh1.s 			page 38


 1815 00de D26A     		ldr	r2, [r2, #44]
 1816 00e0 1A60     		str	r2, [r3]
 373:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 374:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1817              		.loc 1 374 0
 1818 00e2 FB69     		ldr	r3, [r7, #28]
 1819 00e4 0E33     		adds	r3, r3, #14
 1820 00e6 3B61     		str	r3, [r7, #16]
 375:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1821              		.loc 1 375 0
 1822 00e8 3B68     		ldr	r3, [r7]
 1823 00ea FB60     		str	r3, [r7, #12]
 376:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1824              		.loc 1 376 0
 1825 00ec 3B69     		ldr	r3, [r7, #16]
 1826 00ee 3033     		adds	r3, r3, #48
 1827 00f0 FA68     		ldr	r2, [r7, #12]
 1828 00f2 128E     		ldrh	r2, [r2, #48]
 1829 00f4 1A80     		strh	r2, [r3]	@ movhi
 377:bluetooth_rxtx.c **** 
 378:bluetooth_rxtx.c **** 	f->status = status;
 1830              		.loc 1 378 0
 1831 00f6 064B     		ldr	r3, .L34
 1832 00f8 1B78     		ldrb	r3, [r3]
 1833 00fa DAB2     		uxtb	r2, r3
 1834 00fc FB69     		ldr	r3, [r7, #28]
 1835 00fe 5A70     		strb	r2, [r3, #1]
 379:bluetooth_rxtx.c **** 	status = 0;
 1836              		.loc 1 379 0
 1837 0100 034B     		ldr	r3, .L34
 1838 0102 0022     		movs	r2, #0
 1839 0104 1A70     		strb	r2, [r3]
 380:bluetooth_rxtx.c **** 
 381:bluetooth_rxtx.c **** 	return 1;
 1840              		.loc 1 381 0
 1841 0106 0123     		movs	r3, #1
 1842              	.L33:
 382:bluetooth_rxtx.c **** }
 1843              		.loc 1 382 0
 1844 0108 1846     		mov	r0, r3
 1845 010a 2037     		adds	r7, r7, #32
 1846              		.cfi_def_cfa_offset 8
 1847 010c BD46     		mov	sp, r7
 1848              		.cfi_def_cfa_register 13
 1849              		@ sp needed
 1850 010e 80BD     		pop	{r7, pc}
 1851              	.L35:
 1852              		.align	2
 1853              	.L34:
 1854 0110 00000000 		.word	status
 1855 0114 00000000 		.word	clkn_legacy
 1856 0118 00000000 		.word	channel
 1857 011c 00000000 		.word	rssi_sum
 1858 0120 00000000 		.word	rssi_count
 1859 0124 38C00920 		.word	537509944
 1860              		.cfi_endproc
 1861              	.LFE6:
ARM GAS  /tmp/cctJTvh1.s 			page 39


 1863              		.section	.text.enqueue_freq,"ax",%progbits
 1864              		.align	2
 1865              		.thumb
 1866              		.thumb_func
 1868              	enqueue_freq:
 1869              	.LFB7:
 383:bluetooth_rxtx.c **** 
 384:bluetooth_rxtx.c **** 
 385:bluetooth_rxtx.c **** 
 386:bluetooth_rxtx.c **** static int enqueue_freq(u8 type, u8 *buf)
 387:bluetooth_rxtx.c **** {
 1870              		.loc 1 387 0
 1871              		.cfi_startproc
 1872              		@ args = 0, pretend = 0, frame = 32
 1873              		@ frame_needed = 1, uses_anonymous_args = 0
 1874 0000 80B5     		push	{r7, lr}
 1875              		.cfi_def_cfa_offset 8
 1876              		.cfi_offset 7, -8
 1877              		.cfi_offset 14, -4
 1878 0002 88B0     		sub	sp, sp, #32
 1879              		.cfi_def_cfa_offset 40
 1880 0004 00AF     		add	r7, sp, #0
 1881              		.cfi_def_cfa_register 7
 1882 0006 0346     		mov	r3, r0
 1883 0008 3960     		str	r1, [r7]
 1884 000a FB71     		strb	r3, [r7, #7]
 388:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1885              		.loc 1 388 0
 1886 000c FFF7FEFF 		bl	usb_enqueue
 1887 0010 F861     		str	r0, [r7, #28]
 389:bluetooth_rxtx.c **** 
 390:bluetooth_rxtx.c **** 	/* fail if queue is full */
 391:bluetooth_rxtx.c **** 	if (f == NULL) {
 1888              		.loc 1 391 0
 1889 0012 FB69     		ldr	r3, [r7, #28]
 1890 0014 002B     		cmp	r3, #0
 1891 0016 09D1     		bne	.L37
 392:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1892              		.loc 1 392 0
 1893 0018 3D4B     		ldr	r3, .L39
 1894 001a 1B78     		ldrb	r3, [r3]
 1895 001c DBB2     		uxtb	r3, r3
 1896 001e 43F00403 		orr	r3, r3, #4
 1897 0022 DAB2     		uxtb	r2, r3
 1898 0024 3A4B     		ldr	r3, .L39
 1899 0026 1A70     		strb	r2, [r3]
 393:bluetooth_rxtx.c **** 		return 0;
 1900              		.loc 1 393 0
 1901 0028 0023     		movs	r3, #0
 1902 002a 6DE0     		b	.L38
 1903              	.L37:
 394:bluetooth_rxtx.c **** 	}
 395:bluetooth_rxtx.c **** 
 396:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1904              		.loc 1 396 0
 1905 002c FB69     		ldr	r3, [r7, #28]
 1906 002e FA79     		ldrb	r2, [r7, #7]
ARM GAS  /tmp/cctJTvh1.s 			page 40


 1907 0030 1A70     		strb	r2, [r3]
 397:bluetooth_rxtx.c **** 	
 398:bluetooth_rxtx.c **** 	f->clkn_high = idle_buf_clkn_high;
 1908              		.loc 1 398 0
 1909 0032 384B     		ldr	r3, .L39+4
 1910 0034 1B68     		ldr	r3, [r3]
 1911 0036 DAB2     		uxtb	r2, r3
 1912 0038 FB69     		ldr	r3, [r7, #28]
 1913 003a DA70     		strb	r2, [r3, #3]
 399:bluetooth_rxtx.c **** 	f->clk100ns = clkn_freq;
 1914              		.loc 1 399 0
 1915 003c 364B     		ldr	r3, .L39+8
 1916 003e 1A68     		ldr	r2, [r3]
 1917 0040 FB69     		ldr	r3, [r7, #28]
 1918 0042 5A60     		str	r2, [r3, #4]
 400:bluetooth_rxtx.c **** 	
 401:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1919              		.loc 1 401 0
 1920 0044 354B     		ldr	r3, .L39+12
 1921 0046 1B88     		ldrh	r3, [r3]	@ movhi
 1922 0048 9BB2     		uxth	r3, r3
 1923 004a DBB2     		uxtb	r3, r3
 1924 004c 623B     		subs	r3, r3, #98
 1925 004e DAB2     		uxtb	r2, r3
 1926 0050 FB69     		ldr	r3, [r7, #28]
 1927 0052 9A70     		strb	r2, [r3, #2]
 402:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 403:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 404:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
 1928              		.loc 1 404 0
 1929 0054 324B     		ldr	r3, .L39+16
 1930 0056 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1931 0058 FB69     		ldr	r3, [r7, #28]
 1932 005a 1A73     		strb	r2, [r3, #12]
 405:bluetooth_rxtx.c **** //	f->rssi_avg = rssi_sum/rssi_count;
 406:bluetooth_rxtx.c **** 
 407:bluetooth_rxtx.c **** 	USRLED_SET;
 1933              		.loc 1 407 0
 1934 005c 314B     		ldr	r3, .L39+20
 1935 005e 0222     		movs	r2, #2
 1936 0060 1A60     		str	r2, [r3]
 408:bluetooth_rxtx.c **** 
 409:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 410:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1937              		.loc 1 410 0
 1938 0062 FB69     		ldr	r3, [r7, #28]
 1939 0064 0E33     		adds	r3, r3, #14
 1940 0066 BB61     		str	r3, [r7, #24]
 411:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1941              		.loc 1 411 0
 1942 0068 3B68     		ldr	r3, [r7]
 1943 006a 7B61     		str	r3, [r7, #20]
 412:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1944              		.loc 1 412 0
 1945 006c 7B69     		ldr	r3, [r7, #20]
 1946 006e 1A68     		ldr	r2, [r3]
 1947 0070 BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/cctJTvh1.s 			page 41


 1948 0072 1A60     		str	r2, [r3]
 413:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1949              		.loc 1 413 0
 1950 0074 BB69     		ldr	r3, [r7, #24]
 1951 0076 0433     		adds	r3, r3, #4
 1952 0078 7A69     		ldr	r2, [r7, #20]
 1953 007a 5268     		ldr	r2, [r2, #4]
 1954 007c 1A60     		str	r2, [r3]
 414:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1955              		.loc 1 414 0
 1956 007e BB69     		ldr	r3, [r7, #24]
 1957 0080 0833     		adds	r3, r3, #8
 1958 0082 7A69     		ldr	r2, [r7, #20]
 1959 0084 9268     		ldr	r2, [r2, #8]
 1960 0086 1A60     		str	r2, [r3]
 415:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1961              		.loc 1 415 0
 1962 0088 BB69     		ldr	r3, [r7, #24]
 1963 008a 0C33     		adds	r3, r3, #12
 1964 008c 7A69     		ldr	r2, [r7, #20]
 1965 008e D268     		ldr	r2, [r2, #12]
 1966 0090 1A60     		str	r2, [r3]
 416:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1967              		.loc 1 416 0
 1968 0092 BB69     		ldr	r3, [r7, #24]
 1969 0094 1033     		adds	r3, r3, #16
 1970 0096 7A69     		ldr	r2, [r7, #20]
 1971 0098 1269     		ldr	r2, [r2, #16]
 1972 009a 1A60     		str	r2, [r3]
 417:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1973              		.loc 1 417 0
 1974 009c BB69     		ldr	r3, [r7, #24]
 1975 009e 1433     		adds	r3, r3, #20
 1976 00a0 7A69     		ldr	r2, [r7, #20]
 1977 00a2 5269     		ldr	r2, [r2, #20]
 1978 00a4 1A60     		str	r2, [r3]
 418:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1979              		.loc 1 418 0
 1980 00a6 BB69     		ldr	r3, [r7, #24]
 1981 00a8 1833     		adds	r3, r3, #24
 1982 00aa 7A69     		ldr	r2, [r7, #20]
 1983 00ac 9269     		ldr	r2, [r2, #24]
 1984 00ae 1A60     		str	r2, [r3]
 419:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1985              		.loc 1 419 0
 1986 00b0 BB69     		ldr	r3, [r7, #24]
 1987 00b2 1C33     		adds	r3, r3, #28
 1988 00b4 7A69     		ldr	r2, [r7, #20]
 1989 00b6 D269     		ldr	r2, [r2, #28]
 1990 00b8 1A60     		str	r2, [r3]
 420:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1991              		.loc 1 420 0
 1992 00ba BB69     		ldr	r3, [r7, #24]
 1993 00bc 2033     		adds	r3, r3, #32
 1994 00be 7A69     		ldr	r2, [r7, #20]
 1995 00c0 126A     		ldr	r2, [r2, #32]
 1996 00c2 1A60     		str	r2, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 42


 421:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1997              		.loc 1 421 0
 1998 00c4 BB69     		ldr	r3, [r7, #24]
 1999 00c6 2433     		adds	r3, r3, #36
 2000 00c8 7A69     		ldr	r2, [r7, #20]
 2001 00ca 526A     		ldr	r2, [r2, #36]
 2002 00cc 1A60     		str	r2, [r3]
 422:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 2003              		.loc 1 422 0
 2004 00ce BB69     		ldr	r3, [r7, #24]
 2005 00d0 2833     		adds	r3, r3, #40
 2006 00d2 7A69     		ldr	r2, [r7, #20]
 2007 00d4 926A     		ldr	r2, [r2, #40]
 2008 00d6 1A60     		str	r2, [r3]
 423:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 2009              		.loc 1 423 0
 2010 00d8 BB69     		ldr	r3, [r7, #24]
 2011 00da 2C33     		adds	r3, r3, #44
 2012 00dc 7A69     		ldr	r2, [r7, #20]
 2013 00de D26A     		ldr	r2, [r2, #44]
 2014 00e0 1A60     		str	r2, [r3]
 424:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 425:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 2015              		.loc 1 425 0
 2016 00e2 FB69     		ldr	r3, [r7, #28]
 2017 00e4 0E33     		adds	r3, r3, #14
 2018 00e6 3B61     		str	r3, [r7, #16]
 426:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 2019              		.loc 1 426 0
 2020 00e8 3B68     		ldr	r3, [r7]
 2021 00ea FB60     		str	r3, [r7, #12]
 427:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 2022              		.loc 1 427 0
 2023 00ec 3B69     		ldr	r3, [r7, #16]
 2024 00ee 3033     		adds	r3, r3, #48
 2025 00f0 FA68     		ldr	r2, [r7, #12]
 2026 00f2 128E     		ldrh	r2, [r2, #48]
 2027 00f4 1A80     		strh	r2, [r3]	@ movhi
 428:bluetooth_rxtx.c **** 
 429:bluetooth_rxtx.c **** 	f->status = status;
 2028              		.loc 1 429 0
 2029 00f6 064B     		ldr	r3, .L39
 2030 00f8 1B78     		ldrb	r3, [r3]
 2031 00fa DAB2     		uxtb	r2, r3
 2032 00fc FB69     		ldr	r3, [r7, #28]
 2033 00fe 5A70     		strb	r2, [r3, #1]
 430:bluetooth_rxtx.c **** 	status = 0;
 2034              		.loc 1 430 0
 2035 0100 034B     		ldr	r3, .L39
 2036 0102 0022     		movs	r2, #0
 2037 0104 1A70     		strb	r2, [r3]
 431:bluetooth_rxtx.c **** 
 432:bluetooth_rxtx.c **** 	return 1;
 2038              		.loc 1 432 0
 2039 0106 0123     		movs	r3, #1
 2040              	.L38:
 433:bluetooth_rxtx.c **** }
ARM GAS  /tmp/cctJTvh1.s 			page 43


 2041              		.loc 1 433 0
 2042 0108 1846     		mov	r0, r3
 2043 010a 2037     		adds	r7, r7, #32
 2044              		.cfi_def_cfa_offset 8
 2045 010c BD46     		mov	sp, r7
 2046              		.cfi_def_cfa_register 13
 2047              		@ sp needed
 2048 010e 80BD     		pop	{r7, pc}
 2049              	.L40:
 2050              		.align	2
 2051              	.L39:
 2052 0110 00000000 		.word	status
 2053 0114 00000000 		.word	idle_buf_clkn_high
 2054 0118 00000000 		.word	clkn_freq
 2055 011c 00000000 		.word	idle_buf_channel
 2056 0120 00000000 		.word	device_index
 2057 0124 38C00920 		.word	537509944
 2058              		.cfi_endproc
 2059              	.LFE7:
 2061              		.section	.text.enqueue_proposed,"ax",%progbits
 2062              		.align	2
 2063              		.thumb
 2064              		.thumb_func
 2066              	enqueue_proposed:
 2067              	.LFB8:
 434:bluetooth_rxtx.c **** 
 435:bluetooth_rxtx.c **** 
 436:bluetooth_rxtx.c **** 
 437:bluetooth_rxtx.c **** static int enqueue_proposed(u8 type, u8 *buf)
 438:bluetooth_rxtx.c **** {
 2068              		.loc 1 438 0
 2069              		.cfi_startproc
 2070              		@ args = 0, pretend = 0, frame = 32
 2071              		@ frame_needed = 1, uses_anonymous_args = 0
 2072 0000 80B5     		push	{r7, lr}
 2073              		.cfi_def_cfa_offset 8
 2074              		.cfi_offset 7, -8
 2075              		.cfi_offset 14, -4
 2076 0002 88B0     		sub	sp, sp, #32
 2077              		.cfi_def_cfa_offset 40
 2078 0004 00AF     		add	r7, sp, #0
 2079              		.cfi_def_cfa_register 7
 2080 0006 0346     		mov	r3, r0
 2081 0008 3960     		str	r1, [r7]
 2082 000a FB71     		strb	r3, [r7, #7]
 439:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 2083              		.loc 1 439 0
 2084 000c FFF7FEFF 		bl	usb_enqueue
 2085 0010 F861     		str	r0, [r7, #28]
 440:bluetooth_rxtx.c **** 
 441:bluetooth_rxtx.c **** 	/* fail if queue is full */
 442:bluetooth_rxtx.c **** 	if (f == NULL) {
 2086              		.loc 1 442 0
 2087 0012 FB69     		ldr	r3, [r7, #28]
 2088 0014 002B     		cmp	r3, #0
 2089 0016 09D1     		bne	.L42
 443:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
ARM GAS  /tmp/cctJTvh1.s 			page 44


 2090              		.loc 1 443 0
 2091 0018 3D4B     		ldr	r3, .L44
 2092 001a 1B78     		ldrb	r3, [r3]
 2093 001c DBB2     		uxtb	r3, r3
 2094 001e 43F00403 		orr	r3, r3, #4
 2095 0022 DAB2     		uxtb	r2, r3
 2096 0024 3A4B     		ldr	r3, .L44
 2097 0026 1A70     		strb	r2, [r3]
 444:bluetooth_rxtx.c **** 		return 0;
 2098              		.loc 1 444 0
 2099 0028 0023     		movs	r3, #0
 2100 002a 6CE0     		b	.L43
 2101              	.L42:
 445:bluetooth_rxtx.c **** 	}
 446:bluetooth_rxtx.c **** 
 447:bluetooth_rxtx.c **** 	f->pkt_type = type;
 2102              		.loc 1 447 0
 2103 002c FB69     		ldr	r3, [r7, #28]
 2104 002e FA79     		ldrb	r2, [r7, #7]
 2105 0030 1A70     		strb	r2, [r3]
 448:bluetooth_rxtx.c **** //	f->clkn_high = idle_buf_clkn_high;
 449:bluetooth_rxtx.c **** 	f->clk100ns = clkn_proposed;
 2106              		.loc 1 449 0
 2107 0032 384B     		ldr	r3, .L44+4
 2108 0034 1A68     		ldr	r2, [r3]
 2109 0036 FB69     		ldr	r3, [r7, #28]
 2110 0038 5A60     		str	r2, [r3, #4]
 450:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 2111              		.loc 1 450 0
 2112 003a 374B     		ldr	r3, .L44+8
 2113 003c 1B88     		ldrh	r3, [r3]	@ movhi
 2114 003e 9BB2     		uxth	r3, r3
 2115 0040 DBB2     		uxtb	r3, r3
 2116 0042 623B     		subs	r3, r3, #98
 2117 0044 DAB2     		uxtb	r2, r3
 2118 0046 FB69     		ldr	r3, [r7, #28]
 2119 0048 9A70     		strb	r2, [r3, #2]
 451:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 452:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 453:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 2120              		.loc 1 453 0
 2121 004a 344B     		ldr	r3, .L44+12
 2122 004c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2123 004e FB69     		ldr	r3, [r7, #28]
 2124 0050 9A72     		strb	r2, [r3, #10]
 454:bluetooth_rxtx.c **** 	
 455:bluetooth_rxtx.c **** 	f->reserved[1] = freq_avg;
 2125              		.loc 1 455 0
 2126 0052 334B     		ldr	r3, .L44+16
 2127 0054 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2128 0056 FB69     		ldr	r3, [r7, #28]
 2129 0058 5A73     		strb	r2, [r3, #13]
 456:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 457:bluetooth_rxtx.c **** 
 458:bluetooth_rxtx.c **** 	USRLED_SET;
 2130              		.loc 1 458 0
 2131 005a 324B     		ldr	r3, .L44+20
ARM GAS  /tmp/cctJTvh1.s 			page 45


 2132 005c 0222     		movs	r2, #2
 2133 005e 1A60     		str	r2, [r3]
 459:bluetooth_rxtx.c **** 
 460:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 461:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 2134              		.loc 1 461 0
 2135 0060 FB69     		ldr	r3, [r7, #28]
 2136 0062 0E33     		adds	r3, r3, #14
 2137 0064 BB61     		str	r3, [r7, #24]
 462:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 2138              		.loc 1 462 0
 2139 0066 3B68     		ldr	r3, [r7]
 2140 0068 7B61     		str	r3, [r7, #20]
 463:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 2141              		.loc 1 463 0
 2142 006a 7B69     		ldr	r3, [r7, #20]
 2143 006c 1A68     		ldr	r2, [r3]
 2144 006e BB69     		ldr	r3, [r7, #24]
 2145 0070 1A60     		str	r2, [r3]
 464:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 2146              		.loc 1 464 0
 2147 0072 BB69     		ldr	r3, [r7, #24]
 2148 0074 0433     		adds	r3, r3, #4
 2149 0076 7A69     		ldr	r2, [r7, #20]
 2150 0078 5268     		ldr	r2, [r2, #4]
 2151 007a 1A60     		str	r2, [r3]
 465:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 2152              		.loc 1 465 0
 2153 007c BB69     		ldr	r3, [r7, #24]
 2154 007e 0833     		adds	r3, r3, #8
 2155 0080 7A69     		ldr	r2, [r7, #20]
 2156 0082 9268     		ldr	r2, [r2, #8]
 2157 0084 1A60     		str	r2, [r3]
 466:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 2158              		.loc 1 466 0
 2159 0086 BB69     		ldr	r3, [r7, #24]
 2160 0088 0C33     		adds	r3, r3, #12
 2161 008a 7A69     		ldr	r2, [r7, #20]
 2162 008c D268     		ldr	r2, [r2, #12]
 2163 008e 1A60     		str	r2, [r3]
 467:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 2164              		.loc 1 467 0
 2165 0090 BB69     		ldr	r3, [r7, #24]
 2166 0092 1033     		adds	r3, r3, #16
 2167 0094 7A69     		ldr	r2, [r7, #20]
 2168 0096 1269     		ldr	r2, [r2, #16]
 2169 0098 1A60     		str	r2, [r3]
 468:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 2170              		.loc 1 468 0
 2171 009a BB69     		ldr	r3, [r7, #24]
 2172 009c 1433     		adds	r3, r3, #20
 2173 009e 7A69     		ldr	r2, [r7, #20]
 2174 00a0 5269     		ldr	r2, [r2, #20]
 2175 00a2 1A60     		str	r2, [r3]
 469:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 2176              		.loc 1 469 0
 2177 00a4 BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/cctJTvh1.s 			page 46


 2178 00a6 1833     		adds	r3, r3, #24
 2179 00a8 7A69     		ldr	r2, [r7, #20]
 2180 00aa 9269     		ldr	r2, [r2, #24]
 2181 00ac 1A60     		str	r2, [r3]
 470:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 2182              		.loc 1 470 0
 2183 00ae BB69     		ldr	r3, [r7, #24]
 2184 00b0 1C33     		adds	r3, r3, #28
 2185 00b2 7A69     		ldr	r2, [r7, #20]
 2186 00b4 D269     		ldr	r2, [r2, #28]
 2187 00b6 1A60     		str	r2, [r3]
 471:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 2188              		.loc 1 471 0
 2189 00b8 BB69     		ldr	r3, [r7, #24]
 2190 00ba 2033     		adds	r3, r3, #32
 2191 00bc 7A69     		ldr	r2, [r7, #20]
 2192 00be 126A     		ldr	r2, [r2, #32]
 2193 00c0 1A60     		str	r2, [r3]
 472:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 2194              		.loc 1 472 0
 2195 00c2 BB69     		ldr	r3, [r7, #24]
 2196 00c4 2433     		adds	r3, r3, #36
 2197 00c6 7A69     		ldr	r2, [r7, #20]
 2198 00c8 526A     		ldr	r2, [r2, #36]
 2199 00ca 1A60     		str	r2, [r3]
 473:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 2200              		.loc 1 473 0
 2201 00cc BB69     		ldr	r3, [r7, #24]
 2202 00ce 2833     		adds	r3, r3, #40
 2203 00d0 7A69     		ldr	r2, [r7, #20]
 2204 00d2 926A     		ldr	r2, [r2, #40]
 2205 00d4 1A60     		str	r2, [r3]
 474:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 2206              		.loc 1 474 0
 2207 00d6 BB69     		ldr	r3, [r7, #24]
 2208 00d8 2C33     		adds	r3, r3, #44
 2209 00da 7A69     		ldr	r2, [r7, #20]
 2210 00dc D26A     		ldr	r2, [r2, #44]
 2211 00de 1A60     		str	r2, [r3]
 475:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 2212              		.loc 1 475 0
 2213 00e0 FB69     		ldr	r3, [r7, #28]
 2214 00e2 0E33     		adds	r3, r3, #14
 2215 00e4 3B61     		str	r3, [r7, #16]
 476:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 2216              		.loc 1 476 0
 2217 00e6 3B68     		ldr	r3, [r7]
 2218 00e8 FB60     		str	r3, [r7, #12]
 477:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 2219              		.loc 1 477 0
 2220 00ea 3B69     		ldr	r3, [r7, #16]
 2221 00ec 3033     		adds	r3, r3, #48
 2222 00ee FA68     		ldr	r2, [r7, #12]
 2223 00f0 128E     		ldrh	r2, [r2, #48]
 2224 00f2 1A80     		strh	r2, [r3]	@ movhi
 478:bluetooth_rxtx.c **** 
 479:bluetooth_rxtx.c **** 	f->status = status;
ARM GAS  /tmp/cctJTvh1.s 			page 47


 2225              		.loc 1 479 0
 2226 00f4 064B     		ldr	r3, .L44
 2227 00f6 1B78     		ldrb	r3, [r3]
 2228 00f8 DAB2     		uxtb	r2, r3
 2229 00fa FB69     		ldr	r3, [r7, #28]
 2230 00fc 5A70     		strb	r2, [r3, #1]
 480:bluetooth_rxtx.c **** 	status = 0;
 2231              		.loc 1 480 0
 2232 00fe 044B     		ldr	r3, .L44
 2233 0100 0022     		movs	r2, #0
 2234 0102 1A70     		strb	r2, [r3]
 481:bluetooth_rxtx.c **** 
 482:bluetooth_rxtx.c **** 	return 1;
 2235              		.loc 1 482 0
 2236 0104 0123     		movs	r3, #1
 2237              	.L43:
 483:bluetooth_rxtx.c **** }
 2238              		.loc 1 483 0
 2239 0106 1846     		mov	r0, r3
 2240 0108 2037     		adds	r7, r7, #32
 2241              		.cfi_def_cfa_offset 8
 2242 010a BD46     		mov	sp, r7
 2243              		.cfi_def_cfa_register 13
 2244              		@ sp needed
 2245 010c 80BD     		pop	{r7, pc}
 2246              	.L45:
 2247 010e 00BF     		.align	2
 2248              	.L44:
 2249 0110 00000000 		.word	status
 2250 0114 00000000 		.word	clkn_proposed
 2251 0118 00000000 		.word	idle_buf_channel
 2252 011c 00000000 		.word	rssi_avg
 2253 0120 00000000 		.word	freq_avg
 2254 0124 38C00920 		.word	537509944
 2255              		.cfi_endproc
 2256              	.LFE8:
 2258              		.section	.text.enqueue_with_ts,"ax",%progbits
 2259              		.align	2
 2260              		.global	enqueue_with_ts
 2261              		.thumb
 2262              		.thumb_func
 2264              	enqueue_with_ts:
 2265              	.LFB9:
 484:bluetooth_rxtx.c **** 
 485:bluetooth_rxtx.c **** 
 486:bluetooth_rxtx.c **** 
 487:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 488:bluetooth_rxtx.c **** {
 2266              		.loc 1 488 0
 2267              		.cfi_startproc
 2268              		@ args = 0, pretend = 0, frame = 24
 2269              		@ frame_needed = 1, uses_anonymous_args = 0
 2270 0000 80B5     		push	{r7, lr}
 2271              		.cfi_def_cfa_offset 8
 2272              		.cfi_offset 7, -8
 2273              		.cfi_offset 14, -4
 2274 0002 86B0     		sub	sp, sp, #24
ARM GAS  /tmp/cctJTvh1.s 			page 48


 2275              		.cfi_def_cfa_offset 32
 2276 0004 00AF     		add	r7, sp, #0
 2277              		.cfi_def_cfa_register 7
 2278 0006 0346     		mov	r3, r0
 2279 0008 B960     		str	r1, [r7, #8]
 2280 000a 7A60     		str	r2, [r7, #4]
 2281 000c FB73     		strb	r3, [r7, #15]
 489:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 2282              		.loc 1 489 0
 2283 000e FFF7FEFF 		bl	usb_enqueue
 2284 0012 7861     		str	r0, [r7, #20]
 490:bluetooth_rxtx.c **** 
 491:bluetooth_rxtx.c **** 	/* fail if queue is full */
 492:bluetooth_rxtx.c **** 	if (f == NULL) {
 2285              		.loc 1 492 0
 2286 0014 7B69     		ldr	r3, [r7, #20]
 2287 0016 002B     		cmp	r3, #0
 2288 0018 09D1     		bne	.L47
 493:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 2289              		.loc 1 493 0
 2290 001a 144B     		ldr	r3, .L49
 2291 001c 1B78     		ldrb	r3, [r3]
 2292 001e DBB2     		uxtb	r3, r3
 2293 0020 43F00403 		orr	r3, r3, #4
 2294 0024 DAB2     		uxtb	r2, r3
 2295 0026 114B     		ldr	r3, .L49
 2296 0028 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		return 0;
 2297              		.loc 1 494 0
 2298 002a 0023     		movs	r3, #0
 2299 002c 19E0     		b	.L48
 2300              	.L47:
 495:bluetooth_rxtx.c **** 	}
 496:bluetooth_rxtx.c **** 
 497:bluetooth_rxtx.c **** 	f->pkt_type = type;
 2301              		.loc 1 497 0
 2302 002e 7B69     		ldr	r3, [r7, #20]
 2303 0030 FA7B     		ldrb	r2, [r7, #15]
 2304 0032 1A70     		strb	r2, [r3]
 498:bluetooth_rxtx.c **** //	f->clkn_high = 0;
 499:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 2305              		.loc 1 499 0
 2306 0034 7B69     		ldr	r3, [r7, #20]
 2307 0036 7A68     		ldr	r2, [r7, #4]
 2308 0038 5A60     		str	r2, [r3, #4]
 500:bluetooth_rxtx.c **** 
 501:bluetooth_rxtx.c **** //	f->channel = channel - 2402;
 502:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 2309              		.loc 1 502 0
 2310 003a 0D4B     		ldr	r3, .L49+4
 2311 003c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2312 003e 7B69     		ldr	r3, [r7, #20]
 2313 0040 9A72     		strb	r2, [r3, #10]
 503:bluetooth_rxtx.c **** 	f->rssi_count = freq_avg;
 2314              		.loc 1 503 0
 2315 0042 0C4B     		ldr	r3, .L49+8
 2316 0044 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cctJTvh1.s 			page 49


 2317 0046 7B69     		ldr	r3, [r7, #20]
 2318 0048 DA72     		strb	r2, [r3, #11]
 504:bluetooth_rxtx.c **** 
 505:bluetooth_rxtx.c **** 	USRLED_SET;
 2319              		.loc 1 505 0
 2320 004a 0B4B     		ldr	r3, .L49+12
 2321 004c 0222     		movs	r2, #2
 2322 004e 1A60     		str	r2, [r3]
 506:bluetooth_rxtx.c **** 
 507:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 508:bluetooth_rxtx.c **** /*	u32 *p1 = (u32 *)f->data;
 509:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 510:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 511:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 512:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 513:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 514:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 515:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 516:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 517:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 518:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 519:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 520:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 521:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 522:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 523:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 524:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 525:bluetooth_rxtx.c **** */
 526:bluetooth_rxtx.c **** 	f->status = status;
 2323              		.loc 1 526 0
 2324 0050 064B     		ldr	r3, .L49
 2325 0052 1B78     		ldrb	r3, [r3]
 2326 0054 DAB2     		uxtb	r2, r3
 2327 0056 7B69     		ldr	r3, [r7, #20]
 2328 0058 5A70     		strb	r2, [r3, #1]
 527:bluetooth_rxtx.c **** 	status = 0;
 2329              		.loc 1 527 0
 2330 005a 044B     		ldr	r3, .L49
 2331 005c 0022     		movs	r2, #0
 2332 005e 1A70     		strb	r2, [r3]
 528:bluetooth_rxtx.c **** 
 529:bluetooth_rxtx.c **** 	return 1;
 2333              		.loc 1 529 0
 2334 0060 0123     		movs	r3, #1
 2335              	.L48:
 530:bluetooth_rxtx.c **** }
 2336              		.loc 1 530 0
 2337 0062 1846     		mov	r0, r3
 2338 0064 1837     		adds	r7, r7, #24
 2339              		.cfi_def_cfa_offset 8
 2340 0066 BD46     		mov	sp, r7
 2341              		.cfi_def_cfa_register 13
 2342              		@ sp needed
 2343 0068 80BD     		pop	{r7, pc}
 2344              	.L50:
 2345 006a 00BF     		.align	2
 2346              	.L49:
ARM GAS  /tmp/cctJTvh1.s 			page 50


 2347 006c 00000000 		.word	status
 2348 0070 00000000 		.word	rssi_avg
 2349 0074 00000000 		.word	freq_avg
 2350 0078 38C00920 		.word	537509944
 2351              		.cfi_endproc
 2352              	.LFE9:
 2354              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 2355              		.align	2
 2356              		.thumb
 2357              		.thumb_func
 2359              	cs_threshold_calc_and_set:
 2360              	.LFB10:
 531:bluetooth_rxtx.c **** 
 532:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 533:bluetooth_rxtx.c **** {
 2361              		.loc 1 533 0
 2362              		.cfi_startproc
 2363              		@ args = 0, pretend = 0, frame = 8
 2364              		@ frame_needed = 1, uses_anonymous_args = 0
 2365 0000 80B5     		push	{r7, lr}
 2366              		.cfi_def_cfa_offset 8
 2367              		.cfi_offset 7, -8
 2368              		.cfi_offset 14, -4
 2369 0002 82B0     		sub	sp, sp, #8
 2370              		.cfi_def_cfa_offset 16
 2371 0004 00AF     		add	r7, sp, #0
 2372              		.cfi_def_cfa_register 7
 534:bluetooth_rxtx.c **** 	int8_t level;
 535:bluetooth_rxtx.c **** 
 536:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 537:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 538:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 539:bluetooth_rxtx.c **** 	 * value for it. */
 540:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 2373              		.loc 1 540 0
 2374 0006 174B     		ldr	r3, .L55
 2375 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2376 000a 002B     		cmp	r3, #0
 2377 000c 1DD0     		beq	.L52
 2378              		.loc 1 540 0 is_stmt 0 discriminator 1
 2379 000e 164B     		ldr	r3, .L55+4
 2380 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2381 0012 5BB2     		sxtb	r3, r3
 2382 0014 002B     		cmp	r3, #0
 2383 0016 18DD     		ble	.L52
 2384              	.LBB2:
 541:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 2385              		.loc 1 541 0 is_stmt 1
 2386 0018 144B     		ldr	r3, .L55+8
 2387 001a 1B88     		ldrh	r3, [r3]	@ movhi
 2388 001c 9BB2     		uxth	r3, r3
 2389 001e A3F66213 		subw	r3, r3, #2402
 2390 0022 134A     		ldr	r2, .L55+12
 2391 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 2392 0028 1BB2     		sxth	r3, r3
 2393 002a 8033     		adds	r3, r3, #128
 2394 002c 002B     		cmp	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 51


 2395 002e 00DA     		bge	.L53
 2396 0030 FF33     		adds	r3, r3, #255
 2397              	.L53:
 2398 0032 1B12     		asrs	r3, r3, #8
 2399 0034 BB71     		strb	r3, [r7, #6]
 542:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 2400              		.loc 1 542 0
 2401 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 2402 0038 0B4B     		ldr	r3, .L55+4
 2403 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2404 003c DBB2     		uxtb	r3, r3
 2405 003e 1344     		add	r3, r3, r2
 2406 0040 DBB2     		uxtb	r3, r3
 2407 0042 363B     		subs	r3, r3, #54
 2408 0044 DBB2     		uxtb	r3, r3
 2409 0046 FB71     		strb	r3, [r7, #7]
 2410              	.LBE2:
 540:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 2411              		.loc 1 540 0
 2412 0048 02E0     		b	.L54
 2413              	.L52:
 543:bluetooth_rxtx.c **** 	}
 544:bluetooth_rxtx.c **** 	else {
 545:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 2414              		.loc 1 545 0
 2415 004a 074B     		ldr	r3, .L55+4
 2416 004c 1B78     		ldrb	r3, [r3]
 2417 004e FB71     		strb	r3, [r7, #7]
 2418              	.L54:
 546:bluetooth_rxtx.c **** 	}
 547:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 2419              		.loc 1 547 0
 2420 0050 97F90730 		ldrsb	r3, [r7, #7]
 2421 0054 1846     		mov	r0, r3
 2422 0056 0321     		movs	r1, #3
 2423 0058 FFF7FEFF 		bl	cs_threshold_set
 548:bluetooth_rxtx.c **** }
 2424              		.loc 1 548 0
 2425 005c 0837     		adds	r7, r7, #8
 2426              		.cfi_def_cfa_offset 8
 2427 005e BD46     		mov	sp, r7
 2428              		.cfi_def_cfa_register 13
 2429              		@ sp needed
 2430 0060 80BD     		pop	{r7, pc}
 2431              	.L56:
 2432 0062 00BF     		.align	2
 2433              	.L55:
 2434 0064 00000000 		.word	hop_mode
 2435 0068 00000000 		.word	cs_threshold_req
 2436 006c 00000000 		.word	channel
 2437 0070 00000000 		.word	rssi_iir
 2438              		.cfi_endproc
 2439              	.LFE10:
 2441              		.section	.text.cs_trigger_enable,"ax",%progbits
 2442              		.align	2
 2443              		.thumb
 2444              		.thumb_func
ARM GAS  /tmp/cctJTvh1.s 			page 52


 2446              	cs_trigger_enable:
 2447              	.LFB11:
 549:bluetooth_rxtx.c **** 
 550:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 551:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 552:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 553:bluetooth_rxtx.c ****  * and off here. */
 554:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 555:bluetooth_rxtx.c **** {
 2448              		.loc 1 555 0
 2449              		.cfi_startproc
 2450              		@ args = 0, pretend = 0, frame = 0
 2451              		@ frame_needed = 1, uses_anonymous_args = 0
 2452              		@ link register save eliminated.
 2453 0000 80B4     		push	{r7}
 2454              		.cfi_def_cfa_offset 4
 2455              		.cfi_offset 7, -4
 2456 0002 00AF     		add	r7, sp, #0
 2457              		.cfi_def_cfa_register 7
 556:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2458              		.loc 1 556 0
 2459 0004 094B     		ldr	r3, .L58
 2460 0006 0022     		movs	r2, #0
 2461 0008 1A70     		strb	r2, [r3]
 557:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 2462              		.loc 1 557 0
 2463 000a 094B     		ldr	r3, .L58+4
 2464 000c 4FF40012 		mov	r2, #2097152
 2465 0010 1A60     		str	r2, [r3]
 558:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2466              		.loc 1 558 0
 2467 0012 084B     		ldr	r3, .L58+8
 2468 0014 0422     		movs	r2, #4
 2469 0016 1A60     		str	r2, [r3]
 559:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 2470              		.loc 1 559 0
 2471 0018 074A     		ldr	r2, .L58+12
 2472 001a 074B     		ldr	r3, .L58+12
 2473 001c 1B68     		ldr	r3, [r3]
 2474 001e 43F00403 		orr	r3, r3, #4
 2475 0022 1360     		str	r3, [r2]
 560:bluetooth_rxtx.c **** }
 2476              		.loc 1 560 0
 2477 0024 BD46     		mov	sp, r7
 2478              		.cfi_def_cfa_register 13
 2479              		@ sp needed
 2480 0026 5DF8047B 		ldr	r7, [sp], #4
 2481              		.cfi_restore 7
 2482              		.cfi_def_cfa_offset 0
 2483 002a 7047     		bx	lr
 2484              	.L59:
 2485              		.align	2
 2486              	.L58:
 2487 002c 00000000 		.word	cs_trigger
 2488 0030 00E100E0 		.word	-536813312
 2489 0034 AC800240 		.word	1073905836
 2490 0038 B4800240 		.word	1073905844
ARM GAS  /tmp/cctJTvh1.s 			page 53


 2491              		.cfi_endproc
 2492              	.LFE11:
 2494              		.section	.text.cs_trigger_disable,"ax",%progbits
 2495              		.align	2
 2496              		.thumb
 2497              		.thumb_func
 2499              	cs_trigger_disable:
 2500              	.LFB12:
 561:bluetooth_rxtx.c **** 
 562:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 563:bluetooth_rxtx.c **** {
 2501              		.loc 1 563 0
 2502              		.cfi_startproc
 2503              		@ args = 0, pretend = 0, frame = 0
 2504              		@ frame_needed = 1, uses_anonymous_args = 0
 2505              		@ link register save eliminated.
 2506 0000 80B4     		push	{r7}
 2507              		.cfi_def_cfa_offset 4
 2508              		.cfi_offset 7, -4
 2509 0002 00AF     		add	r7, sp, #0
 2510              		.cfi_def_cfa_register 7
 564:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 2511              		.loc 1 564 0
 2512 0004 094A     		ldr	r2, .L61
 2513 0006 094B     		ldr	r3, .L61
 2514 0008 1B68     		ldr	r3, [r3]
 2515 000a 23F00403 		bic	r3, r3, #4
 2516 000e 1360     		str	r3, [r2]
 565:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2517              		.loc 1 565 0
 2518 0010 074B     		ldr	r3, .L61+4
 2519 0012 0422     		movs	r2, #4
 2520 0014 1A60     		str	r2, [r3]
 566:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 2521              		.loc 1 566 0
 2522 0016 074B     		ldr	r3, .L61+8
 2523 0018 4FF40012 		mov	r2, #2097152
 2524 001c 1A60     		str	r2, [r3]
 567:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2525              		.loc 1 567 0
 2526 001e 064B     		ldr	r3, .L61+12
 2527 0020 0022     		movs	r2, #0
 2528 0022 1A70     		strb	r2, [r3]
 568:bluetooth_rxtx.c **** }
 2529              		.loc 1 568 0
 2530 0024 BD46     		mov	sp, r7
 2531              		.cfi_def_cfa_register 13
 2532              		@ sp needed
 2533 0026 5DF8047B 		ldr	r7, [sp], #4
 2534              		.cfi_restore 7
 2535              		.cfi_def_cfa_offset 0
 2536 002a 7047     		bx	lr
 2537              	.L62:
 2538              		.align	2
 2539              	.L61:
 2540 002c B4800240 		.word	1073905844
 2541 0030 AC800240 		.word	1073905836
ARM GAS  /tmp/cctJTvh1.s 			page 54


 2542 0034 80E100E0 		.word	-536813184
 2543 0038 00000000 		.word	cs_trigger
 2544              		.cfi_endproc
 2545              	.LFE12:
 2547              		.section	.rodata
 2548 08d1 000000   		.align	2
 2549              	.LC4:
 2550 08d4 32303135 		.ascii	"2015-10-R1\000"
 2550      2D31302D 
 2550      523100
 2551              		.section	.text.vendor_request_handler,"ax",%progbits
 2552              		.align	2
 2553              		.thumb
 2554              		.thumb_func
 2556              	vendor_request_handler:
 2557              	.LFB13:
 569:bluetooth_rxtx.c **** 
 570:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 571:bluetooth_rxtx.c **** {
 2558              		.loc 1 571 0
 2559              		.cfi_startproc
 2560              		@ args = 0, pretend = 0, frame = 80
 2561              		@ frame_needed = 1, uses_anonymous_args = 0
 2562 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2563              		.cfi_def_cfa_offset 36
 2564              		.cfi_offset 4, -36
 2565              		.cfi_offset 5, -32
 2566              		.cfi_offset 6, -28
 2567              		.cfi_offset 7, -24
 2568              		.cfi_offset 8, -20
 2569              		.cfi_offset 9, -16
 2570              		.cfi_offset 10, -12
 2571              		.cfi_offset 11, -8
 2572              		.cfi_offset 14, -4
 2573 0004 95B0     		sub	sp, sp, #84
 2574              		.cfi_def_cfa_offset 120
 2575 0006 00AF     		add	r7, sp, #0
 2576              		.cfi_def_cfa_register 7
 2577 0008 B960     		str	r1, [r7, #8]
 2578 000a 7A60     		str	r2, [r7, #4]
 2579 000c 3B60     		str	r3, [r7]
 2580 000e 0346     		mov	r3, r0
 2581 0010 FB73     		strb	r3, [r7, #15]
 572:bluetooth_rxtx.c **** 	u32 command[5];
 573:bluetooth_rxtx.c **** 	u32 result[5];
 574:bluetooth_rxtx.c **** 	u64 ac_copy;
 575:bluetooth_rxtx.c **** 	int i; // loop counter
 576:bluetooth_rxtx.c **** 	u32 clock;
 577:bluetooth_rxtx.c **** 	int clock_offset;
 578:bluetooth_rxtx.c **** 	u8 length; // string length
 579:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2582              		.loc 1 579 0
 2583 0012 0023     		movs	r3, #0
 2584 0014 7B64     		str	r3, [r7, #68]
 580:bluetooth_rxtx.c **** 	u16 reg_val;
 581:bluetooth_rxtx.c **** 
 582:bluetooth_rxtx.c **** 	switch (request) {
ARM GAS  /tmp/cctJTvh1.s 			page 55


 2585              		.loc 1 582 0
 2586 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2587 0018 422B     		cmp	r3, #66
 2588 001a 00F24D85 		bhi	.L64
 2589 001e 01A2     		adr	r2, .L66
 2590 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2591              		.p2align 2
 2592              	.L66:
 2593 0024 31010000 		.word	.L65+1
 2594 0028 3B010000 		.word	.L67+1
 2595 002c B90A0000 		.word	.L64+1
 2596 0030 BD010000 		.word	.L68+1
 2597 0034 DF010000 		.word	.L69+1
 2598 0038 FB010000 		.word	.L70+1
 2599 003c 1D020000 		.word	.L71+1
 2600 0040 39020000 		.word	.L72+1
 2601 0044 5B020000 		.word	.L73+1
 2602 0048 7B020000 		.word	.L74+1
 2603 004c 9D020000 		.word	.L75+1
 2604 0050 39050000 		.word	.L76+1
 2605 0054 5F050000 		.word	.L77+1
 2606 0058 11030000 		.word	.L78+1
 2607 005c 35030000 		.word	.L79+1
 2608 0060 BD020000 		.word	.L80+1
 2609 0064 13040000 		.word	.L81+1
 2610 0068 33040000 		.word	.L82+1
 2611 006c 4B040000 		.word	.L83+1
 2612 0070 6B040000 		.word	.L84+1
 2613 0074 87040000 		.word	.L85+1
 2614 0078 13050000 		.word	.L86+1
 2615 007c 1B050000 		.word	.L87+1
 2616 0080 2D050000 		.word	.L88+1
 2617 0084 69050000 		.word	.L89+1
 2618 0088 87050000 		.word	.L90+1
 2619 008c B90A0000 		.word	.L64+1
 2620 0090 C1050000 		.word	.L91+1
 2621 0094 8F040000 		.word	.L92+1
 2622 0098 AB040000 		.word	.L93+1
 2623 009c D3040000 		.word	.L94+1
 2624 00a0 CB040000 		.word	.L95+1
 2625 00a4 DB040000 		.word	.L96+1
 2626 00a8 43060000 		.word	.L97+1
 2627 00ac 1D060000 		.word	.L98+1
 2628 00b0 B7060000 		.word	.L99+1
 2629 00b4 C5060000 		.word	.L100+1
 2630 00b8 D5060000 		.word	.L101+1
 2631 00bc E7060000 		.word	.L102+1
 2632 00c0 B3070000 		.word	.L103+1
 2633 00c4 F9070000 		.word	.L104+1
 2634 00c8 87080000 		.word	.L105+1
 2635 00cc ED080000 		.word	.L106+1
 2636 00d0 0F090000 		.word	.L107+1
 2637 00d4 3F090000 		.word	.L108+1
 2638 00d8 BD0A0000 		.word	.L166+1
 2639 00dc 71090000 		.word	.L110+1
 2640 00e0 87090000 		.word	.L111+1
 2641 00e4 A3090000 		.word	.L112+1
ARM GAS  /tmp/cctJTvh1.s 			page 56


 2642 00e8 B9090000 		.word	.L113+1
 2643 00ec E5090000 		.word	.L114+1
 2644 00f0 2B080000 		.word	.L115+1
 2645 00f4 5D080000 		.word	.L116+1
 2646 00f8 010A0000 		.word	.L117+1
 2647 00fc 450A0000 		.word	.L118+1
 2648 0100 85060000 		.word	.L119+1
 2649 0104 570A0000 		.word	.L120+1
 2650 0108 B90A0000 		.word	.L64+1
 2651 010c 2F0A0000 		.word	.L121+1
 2652 0110 9B0A0000 		.word	.L122+1
 2653 0114 A70A0000 		.word	.L123+1
 2654 0118 6D010000 		.word	.L124+1
 2655 011c AD010000 		.word	.L125+1
 2656 0120 4B010000 		.word	.L126+1
 2657 0124 8D010000 		.word	.L127+1
 2658 0128 7D010000 		.word	.L128+1
 2659 012c 9D010000 		.word	.L129+1
 2660              		.p2align 1
 2661              	.L65:
 583:bluetooth_rxtx.c **** 
 584:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 585:bluetooth_rxtx.c **** 		*data_len = 0;
 2662              		.loc 1 585 0
 2663 0130 3B68     		ldr	r3, [r7]
 2664 0132 0022     		movs	r2, #0
 2665 0134 1A60     		str	r2, [r3]
 586:bluetooth_rxtx.c **** 		break;
 2666              		.loc 1 586 0
 2667 0136 00F0C2BC 		b	.L130
 2668              	.L67:
 587:bluetooth_rxtx.c **** 
 588:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 589:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2669              		.loc 1 589 0
 2670 013a 774B     		ldr	r3, .L167
 2671 013c 0122     		movs	r2, #1
 2672 013e 1A70     		strb	r2, [r3]
 590:bluetooth_rxtx.c **** 		*data_len = 0;
 2673              		.loc 1 590 0
 2674 0140 3B68     		ldr	r3, [r7]
 2675 0142 0022     		movs	r2, #0
 2676 0144 1A60     		str	r2, [r3]
 591:bluetooth_rxtx.c **** 		break;
 2677              		.loc 1 591 0
 2678 0146 00F0BABC 		b	.L130
 2679              	.L126:
 592:bluetooth_rxtx.c **** 	
 593:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_HOP:
 594:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_HOP;
 2680              		.loc 1 594 0
 2681 014a 734B     		ldr	r3, .L167
 2682 014c 1022     		movs	r2, #16
 2683 014e 1A70     		strb	r2, [r3]
 595:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2684              		.loc 1 595 0
 2685 0150 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/cctJTvh1.s 			page 57


 2686 0152 1A88     		ldrh	r2, [r3]
 2687 0154 714B     		ldr	r3, .L167+4
 2688 0156 1A80     		strh	r2, [r3]	@ movhi
 596:bluetooth_rxtx.c **** 		channel = requested_channel;
 2689              		.loc 1 596 0
 2690 0158 704B     		ldr	r3, .L167+4
 2691 015a 1B88     		ldrh	r3, [r3]	@ movhi
 2692 015c 9AB2     		uxth	r2, r3
 2693 015e 704B     		ldr	r3, .L167+8
 2694 0160 1A80     		strh	r2, [r3]	@ movhi
 597:bluetooth_rxtx.c **** 		*data_len = 0;
 2695              		.loc 1 597 0
 2696 0162 3B68     		ldr	r3, [r7]
 2697 0164 0022     		movs	r2, #0
 2698 0166 1A60     		str	r2, [r3]
 598:bluetooth_rxtx.c **** 		break;
 2699              		.loc 1 598 0
 2700 0168 00F0A9BC 		b	.L130
 2701              	.L124:
 599:bluetooth_rxtx.c **** 
 600:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_FREQ:
 601:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_FREQ;
 2702              		.loc 1 601 0
 2703 016c 6A4B     		ldr	r3, .L167
 2704 016e 0E22     		movs	r2, #14
 2705 0170 1A70     		strb	r2, [r3]
 602:bluetooth_rxtx.c **** 		*data_len = 0;
 2706              		.loc 1 602 0
 2707 0172 3B68     		ldr	r3, [r7]
 2708 0174 0022     		movs	r2, #0
 2709 0176 1A60     		str	r2, [r3]
 603:bluetooth_rxtx.c **** 		break;
 2710              		.loc 1 603 0
 2711 0178 00F0A1BC 		b	.L130
 2712              	.L128:
 604:bluetooth_rxtx.c **** 
 605:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_CFO:
 606:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_CFO;
 2713              		.loc 1 606 0
 2714 017c 664B     		ldr	r3, .L167
 2715 017e 1222     		movs	r2, #18
 2716 0180 1A70     		strb	r2, [r3]
 607:bluetooth_rxtx.c **** 		*data_len = 0;
 2717              		.loc 1 607 0
 2718 0182 3B68     		ldr	r3, [r7]
 2719 0184 0022     		movs	r2, #0
 2720 0186 1A60     		str	r2, [r3]
 608:bluetooth_rxtx.c **** 		break;
 2721              		.loc 1 608 0
 2722 0188 00F099BC 		b	.L130
 2723              	.L127:
 609:bluetooth_rxtx.c **** 
 610:bluetooth_rxtx.c **** 
 611:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_RSSI:
 612:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_RSSI;
 2724              		.loc 1 612 0
 2725 018c 624B     		ldr	r3, .L167
ARM GAS  /tmp/cctJTvh1.s 			page 58


 2726 018e 1122     		movs	r2, #17
 2727 0190 1A70     		strb	r2, [r3]
 613:bluetooth_rxtx.c **** 		*data_len = 0;
 2728              		.loc 1 613 0
 2729 0192 3B68     		ldr	r3, [r7]
 2730 0194 0022     		movs	r2, #0
 2731 0196 1A60     		str	r2, [r3]
 614:bluetooth_rxtx.c **** 		break;
 2732              		.loc 1 614 0
 2733 0198 00F091BC 		b	.L130
 2734              	.L129:
 615:bluetooth_rxtx.c **** 	
 616:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SNIFF:
 617:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SNIFF;
 2735              		.loc 1 617 0
 2736 019c 5E4B     		ldr	r3, .L167
 2737 019e 1322     		movs	r2, #19
 2738 01a0 1A70     		strb	r2, [r3]
 618:bluetooth_rxtx.c **** 		*data_len = 0;
 2739              		.loc 1 618 0
 2740 01a2 3B68     		ldr	r3, [r7]
 2741 01a4 0022     		movs	r2, #0
 2742 01a6 1A60     		str	r2, [r3]
 619:bluetooth_rxtx.c **** 		break;
 2743              		.loc 1 619 0
 2744 01a8 00F089BC 		b	.L130
 2745              	.L125:
 620:bluetooth_rxtx.c **** 
 621:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_PROPOSED:
 622:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_PROPOSED;
 2746              		.loc 1 622 0
 2747 01ac 5A4B     		ldr	r3, .L167
 2748 01ae 0F22     		movs	r2, #15
 2749 01b0 1A70     		strb	r2, [r3]
 623:bluetooth_rxtx.c **** 		*data_len = 0;
 2750              		.loc 1 623 0
 2751 01b2 3B68     		ldr	r3, [r7]
 2752 01b4 0022     		movs	r2, #0
 2753 01b6 1A60     		str	r2, [r3]
 624:bluetooth_rxtx.c **** 		break;
 2754              		.loc 1 624 0
 2755 01b8 00F081BC 		b	.L130
 2756              	.L68:
 625:bluetooth_rxtx.c **** 
 626:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 627:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 2757              		.loc 1 627 0
 2758 01bc 594B     		ldr	r3, .L167+12
 2759 01be 1B68     		ldr	r3, [r3]
 2760 01c0 03F00203 		and	r3, r3, #2
 2761 01c4 002B     		cmp	r3, #0
 2762 01c6 14BF     		ite	ne
 2763 01c8 0123     		movne	r3, #1
 2764 01ca 0023     		moveq	r3, #0
 2765 01cc DBB2     		uxtb	r3, r3
 2766 01ce 1A46     		mov	r2, r3
 2767 01d0 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cctJTvh1.s 			page 59


 2768 01d2 1A70     		strb	r2, [r3]
 628:bluetooth_rxtx.c **** 		*data_len = 1;
 2769              		.loc 1 628 0
 2770 01d4 3B68     		ldr	r3, [r7]
 2771 01d6 0122     		movs	r2, #1
 2772 01d8 1A60     		str	r2, [r3]
 629:bluetooth_rxtx.c **** 		break;
 2773              		.loc 1 629 0
 2774 01da 00F070BC 		b	.L130
 2775              	.L69:
 630:bluetooth_rxtx.c **** 
 631:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 632:bluetooth_rxtx.c **** 		if (request_params[0])
 2776              		.loc 1 632 0
 2777 01de BB68     		ldr	r3, [r7, #8]
 2778 01e0 1B88     		ldrh	r3, [r3]
 2779 01e2 002B     		cmp	r3, #0
 2780 01e4 04D0     		beq	.L131
 633:bluetooth_rxtx.c **** 			USRLED_SET;
 2781              		.loc 1 633 0
 2782 01e6 504B     		ldr	r3, .L167+16
 2783 01e8 0222     		movs	r2, #2
 2784 01ea 1A60     		str	r2, [r3]
 634:bluetooth_rxtx.c **** 		else
 635:bluetooth_rxtx.c **** 			USRLED_CLR;
 636:bluetooth_rxtx.c **** 		break;
 2785              		.loc 1 636 0
 2786 01ec 00F067BC 		b	.L130
 2787              	.L131:
 635:bluetooth_rxtx.c **** 		break;
 2788              		.loc 1 635 0
 2789 01f0 4E4B     		ldr	r3, .L167+20
 2790 01f2 0222     		movs	r2, #2
 2791 01f4 1A60     		str	r2, [r3]
 2792              		.loc 1 636 0
 2793 01f6 00F062BC 		b	.L130
 2794              	.L70:
 637:bluetooth_rxtx.c **** 
 638:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 639:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2795              		.loc 1 639 0
 2796 01fa 4A4B     		ldr	r3, .L167+12
 2797 01fc 1B68     		ldr	r3, [r3]
 2798 01fe 03F01003 		and	r3, r3, #16
 2799 0202 002B     		cmp	r3, #0
 2800 0204 14BF     		ite	ne
 2801 0206 0123     		movne	r3, #1
 2802 0208 0023     		moveq	r3, #0
 2803 020a DBB2     		uxtb	r3, r3
 2804 020c 1A46     		mov	r2, r3
 2805 020e 7B68     		ldr	r3, [r7, #4]
 2806 0210 1A70     		strb	r2, [r3]
 640:bluetooth_rxtx.c **** 		*data_len = 1;
 2807              		.loc 1 640 0
 2808 0212 3B68     		ldr	r3, [r7]
 2809 0214 0122     		movs	r2, #1
 2810 0216 1A60     		str	r2, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 60


 641:bluetooth_rxtx.c **** 		break;
 2811              		.loc 1 641 0
 2812 0218 00F051BC 		b	.L130
 2813              	.L71:
 642:bluetooth_rxtx.c **** 
 643:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 644:bluetooth_rxtx.c **** 		if (request_params[0])
 2814              		.loc 1 644 0
 2815 021c BB68     		ldr	r3, [r7, #8]
 2816 021e 1B88     		ldrh	r3, [r3]
 2817 0220 002B     		cmp	r3, #0
 2818 0222 04D0     		beq	.L133
 645:bluetooth_rxtx.c **** 			RXLED_SET;
 2819              		.loc 1 645 0
 2820 0224 404B     		ldr	r3, .L167+16
 2821 0226 1022     		movs	r2, #16
 2822 0228 1A60     		str	r2, [r3]
 646:bluetooth_rxtx.c **** 		else
 647:bluetooth_rxtx.c **** 			RXLED_CLR;
 648:bluetooth_rxtx.c **** 		break;
 2823              		.loc 1 648 0
 2824 022a 00F048BC 		b	.L130
 2825              	.L133:
 647:bluetooth_rxtx.c **** 		break;
 2826              		.loc 1 647 0
 2827 022e 3F4B     		ldr	r3, .L167+20
 2828 0230 1022     		movs	r2, #16
 2829 0232 1A60     		str	r2, [r3]
 2830              		.loc 1 648 0
 2831 0234 00F043BC 		b	.L130
 2832              	.L72:
 649:bluetooth_rxtx.c **** 
 650:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 651:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2833              		.loc 1 651 0
 2834 0238 3A4B     		ldr	r3, .L167+12
 2835 023a 1B68     		ldr	r3, [r3]
 2836 023c 03F48073 		and	r3, r3, #256
 2837 0240 002B     		cmp	r3, #0
 2838 0242 14BF     		ite	ne
 2839 0244 0123     		movne	r3, #1
 2840 0246 0023     		moveq	r3, #0
 2841 0248 DBB2     		uxtb	r3, r3
 2842 024a 1A46     		mov	r2, r3
 2843 024c 7B68     		ldr	r3, [r7, #4]
 2844 024e 1A70     		strb	r2, [r3]
 652:bluetooth_rxtx.c **** 		*data_len = 1;
 2845              		.loc 1 652 0
 2846 0250 3B68     		ldr	r3, [r7]
 2847 0252 0122     		movs	r2, #1
 2848 0254 1A60     		str	r2, [r3]
 653:bluetooth_rxtx.c **** 		break;
 2849              		.loc 1 653 0
 2850 0256 00F032BC 		b	.L130
 2851              	.L73:
 654:bluetooth_rxtx.c **** 
 655:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
ARM GAS  /tmp/cctJTvh1.s 			page 61


 656:bluetooth_rxtx.c **** 		if (request_params[0])
 2852              		.loc 1 656 0
 2853 025a BB68     		ldr	r3, [r7, #8]
 2854 025c 1B88     		ldrh	r3, [r3]
 2855 025e 002B     		cmp	r3, #0
 2856 0260 05D0     		beq	.L135
 657:bluetooth_rxtx.c **** 			TXLED_SET;
 2857              		.loc 1 657 0
 2858 0262 314B     		ldr	r3, .L167+16
 2859 0264 4FF48072 		mov	r2, #256
 2860 0268 1A60     		str	r2, [r3]
 658:bluetooth_rxtx.c **** 		else
 659:bluetooth_rxtx.c **** 			TXLED_CLR;
 660:bluetooth_rxtx.c **** 		break;
 2861              		.loc 1 660 0
 2862 026a 00F028BC 		b	.L130
 2863              	.L135:
 659:bluetooth_rxtx.c **** 		break;
 2864              		.loc 1 659 0
 2865 026e 2F4B     		ldr	r3, .L167+20
 2866 0270 4FF48072 		mov	r2, #256
 2867 0274 1A60     		str	r2, [r3]
 2868              		.loc 1 660 0
 2869 0276 00F022BC 		b	.L130
 2870              	.L74:
 661:bluetooth_rxtx.c **** 
 662:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 663:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2871              		.loc 1 663 0
 2872 027a 2A4B     		ldr	r3, .L167+12
 2873 027c 1B68     		ldr	r3, [r3]
 2874 027e 03F40073 		and	r3, r3, #512
 2875 0282 002B     		cmp	r3, #0
 2876 0284 14BF     		ite	ne
 2877 0286 0123     		movne	r3, #1
 2878 0288 0023     		moveq	r3, #0
 2879 028a DBB2     		uxtb	r3, r3
 2880 028c 1A46     		mov	r2, r3
 2881 028e 7B68     		ldr	r3, [r7, #4]
 2882 0290 1A70     		strb	r2, [r3]
 664:bluetooth_rxtx.c **** 		*data_len = 1;
 2883              		.loc 1 664 0
 2884 0292 3B68     		ldr	r3, [r7]
 2885 0294 0122     		movs	r2, #1
 2886 0296 1A60     		str	r2, [r3]
 665:bluetooth_rxtx.c **** 		break;
 2887              		.loc 1 665 0
 2888 0298 00F011BC 		b	.L130
 2889              	.L75:
 666:bluetooth_rxtx.c **** 
 667:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 668:bluetooth_rxtx.c **** 		if (request_params[0])
 2890              		.loc 1 668 0
 2891 029c BB68     		ldr	r3, [r7, #8]
 2892 029e 1B88     		ldrh	r3, [r3]
 2893 02a0 002B     		cmp	r3, #0
 2894 02a2 05D0     		beq	.L137
ARM GAS  /tmp/cctJTvh1.s 			page 62


 669:bluetooth_rxtx.c **** 			CC1V8_SET;
 2895              		.loc 1 669 0
 2896 02a4 204B     		ldr	r3, .L167+16
 2897 02a6 4FF40072 		mov	r2, #512
 2898 02aa 1A60     		str	r2, [r3]
 670:bluetooth_rxtx.c **** 		else
 671:bluetooth_rxtx.c **** 			CC1V8_CLR;
 672:bluetooth_rxtx.c **** 		break;
 2899              		.loc 1 672 0
 2900 02ac 00F007BC 		b	.L130
 2901              	.L137:
 671:bluetooth_rxtx.c **** 		break;
 2902              		.loc 1 671 0
 2903 02b0 1E4B     		ldr	r3, .L167+20
 2904 02b2 4FF40072 		mov	r2, #512
 2905 02b6 1A60     		str	r2, [r3]
 2906              		.loc 1 672 0
 2907 02b8 00F001BC 		b	.L130
 2908              	.L80:
 673:bluetooth_rxtx.c **** 
 674:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 675:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2909              		.loc 1 675 0
 2910 02bc 3623     		movs	r3, #54
 2911 02be 7B62     		str	r3, [r7, #36]
 676:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2912              		.loc 1 676 0
 2913 02c0 1B4B     		ldr	r3, .L167+24
 2914 02c2 1B68     		ldr	r3, [r3]
 2915 02c4 07F12401 		add	r1, r7, #36
 2916 02c8 07F11002 		add	r2, r7, #16
 2917 02cc 0846     		mov	r0, r1
 2918 02ce 1146     		mov	r1, r2
 2919 02d0 9847     		blx	r3
 677:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2920              		.loc 1 677 0
 2921 02d2 3B69     		ldr	r3, [r7, #16]
 2922 02d4 DAB2     		uxtb	r2, r3
 2923 02d6 7B68     		ldr	r3, [r7, #4]
 2924 02d8 1A70     		strb	r2, [r3]
 678:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2925              		.loc 1 678 0
 2926 02da 7B68     		ldr	r3, [r7, #4]
 2927 02dc 0133     		adds	r3, r3, #1
 2928 02de 7A69     		ldr	r2, [r7, #20]
 2929 02e0 D2B2     		uxtb	r2, r2
 2930 02e2 1A70     		strb	r2, [r3]
 679:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2931              		.loc 1 679 0
 2932 02e4 7B68     		ldr	r3, [r7, #4]
 2933 02e6 0233     		adds	r3, r3, #2
 2934 02e8 7A69     		ldr	r2, [r7, #20]
 2935 02ea 120A     		lsrs	r2, r2, #8
 2936 02ec D2B2     		uxtb	r2, r2
 2937 02ee 1A70     		strb	r2, [r3]
 680:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2938              		.loc 1 680 0
ARM GAS  /tmp/cctJTvh1.s 			page 63


 2939 02f0 7B68     		ldr	r3, [r7, #4]
 2940 02f2 0333     		adds	r3, r3, #3
 2941 02f4 7A69     		ldr	r2, [r7, #20]
 2942 02f6 120C     		lsrs	r2, r2, #16
 2943 02f8 D2B2     		uxtb	r2, r2
 2944 02fa 1A70     		strb	r2, [r3]
 681:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2945              		.loc 1 681 0
 2946 02fc 7B68     		ldr	r3, [r7, #4]
 2947 02fe 0433     		adds	r3, r3, #4
 2948 0300 7A69     		ldr	r2, [r7, #20]
 2949 0302 120E     		lsrs	r2, r2, #24
 2950 0304 D2B2     		uxtb	r2, r2
 2951 0306 1A70     		strb	r2, [r3]
 682:bluetooth_rxtx.c **** 		*data_len = 5;
 2952              		.loc 1 682 0
 2953 0308 3B68     		ldr	r3, [r7]
 2954 030a 0522     		movs	r2, #5
 2955 030c 1A60     		str	r2, [r3]
 683:bluetooth_rxtx.c **** 		break;
 2956              		.loc 1 683 0
 2957 030e D6E3     		b	.L130
 2958              	.L78:
 684:bluetooth_rxtx.c **** 
 685:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 686:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2959              		.loc 1 686 0
 2960 0310 014B     		ldr	r3, .L167
 2961 0312 0B22     		movs	r2, #11
 2962 0314 1A70     		strb	r2, [r3]
 687:bluetooth_rxtx.c **** 		break;
 2963              		.loc 1 687 0
 2964 0316 D2E3     		b	.L130
 2965              	.L168:
 2966              		.align	2
 2967              	.L167:
 2968 0318 00000000 		.word	requested_mode
 2969 031c 00000000 		.word	requested_channel
 2970 0320 00000000 		.word	channel
 2971 0324 34C00920 		.word	537509940
 2972 0328 38C00920 		.word	537509944
 2973 032c 3CC00920 		.word	537509948
 2974 0330 00000000 		.word	iap_entry
 2975              	.L79:
 688:bluetooth_rxtx.c **** 
 689:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 690:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2976              		.loc 1 690 0
 2977 0334 3A23     		movs	r3, #58
 2978 0336 7B62     		str	r3, [r7, #36]
 691:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2979              		.loc 1 691 0
 2980 0338 964B     		ldr	r3, .L169
 2981 033a 1B68     		ldr	r3, [r3]
 2982 033c 07F12401 		add	r1, r7, #36
 2983 0340 07F11002 		add	r2, r7, #16
 2984 0344 0846     		mov	r0, r1
ARM GAS  /tmp/cctJTvh1.s 			page 64


 2985 0346 1146     		mov	r1, r2
 2986 0348 9847     		blx	r3
 692:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2987              		.loc 1 692 0
 2988 034a 3B69     		ldr	r3, [r7, #16]
 2989 034c DAB2     		uxtb	r2, r3
 2990 034e 7B68     		ldr	r3, [r7, #4]
 2991 0350 1A70     		strb	r2, [r3]
 693:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2992              		.loc 1 693 0
 2993 0352 7B68     		ldr	r3, [r7, #4]
 2994 0354 0133     		adds	r3, r3, #1
 2995 0356 7A69     		ldr	r2, [r7, #20]
 2996 0358 D2B2     		uxtb	r2, r2
 2997 035a 1A70     		strb	r2, [r3]
 694:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2998              		.loc 1 694 0
 2999 035c 7B68     		ldr	r3, [r7, #4]
 3000 035e 0233     		adds	r3, r3, #2
 3001 0360 7A69     		ldr	r2, [r7, #20]
 3002 0362 120A     		lsrs	r2, r2, #8
 3003 0364 D2B2     		uxtb	r2, r2
 3004 0366 1A70     		strb	r2, [r3]
 695:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 3005              		.loc 1 695 0
 3006 0368 7B68     		ldr	r3, [r7, #4]
 3007 036a 0333     		adds	r3, r3, #3
 3008 036c 7A69     		ldr	r2, [r7, #20]
 3009 036e 120C     		lsrs	r2, r2, #16
 3010 0370 D2B2     		uxtb	r2, r2
 3011 0372 1A70     		strb	r2, [r3]
 696:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 3012              		.loc 1 696 0
 3013 0374 7B68     		ldr	r3, [r7, #4]
 3014 0376 0433     		adds	r3, r3, #4
 3015 0378 7A69     		ldr	r2, [r7, #20]
 3016 037a 120E     		lsrs	r2, r2, #24
 3017 037c D2B2     		uxtb	r2, r2
 3018 037e 1A70     		strb	r2, [r3]
 697:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 3019              		.loc 1 697 0
 3020 0380 7B68     		ldr	r3, [r7, #4]
 3021 0382 0533     		adds	r3, r3, #5
 3022 0384 BA69     		ldr	r2, [r7, #24]
 3023 0386 D2B2     		uxtb	r2, r2
 3024 0388 1A70     		strb	r2, [r3]
 698:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 3025              		.loc 1 698 0
 3026 038a 7B68     		ldr	r3, [r7, #4]
 3027 038c 0633     		adds	r3, r3, #6
 3028 038e BA69     		ldr	r2, [r7, #24]
 3029 0390 120A     		lsrs	r2, r2, #8
 3030 0392 D2B2     		uxtb	r2, r2
 3031 0394 1A70     		strb	r2, [r3]
 699:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 3032              		.loc 1 699 0
 3033 0396 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cctJTvh1.s 			page 65


 3034 0398 0733     		adds	r3, r3, #7
 3035 039a BA69     		ldr	r2, [r7, #24]
 3036 039c 120C     		lsrs	r2, r2, #16
 3037 039e D2B2     		uxtb	r2, r2
 3038 03a0 1A70     		strb	r2, [r3]
 700:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 3039              		.loc 1 700 0
 3040 03a2 7B68     		ldr	r3, [r7, #4]
 3041 03a4 0833     		adds	r3, r3, #8
 3042 03a6 BA69     		ldr	r2, [r7, #24]
 3043 03a8 120E     		lsrs	r2, r2, #24
 3044 03aa D2B2     		uxtb	r2, r2
 3045 03ac 1A70     		strb	r2, [r3]
 701:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 3046              		.loc 1 701 0
 3047 03ae 7B68     		ldr	r3, [r7, #4]
 3048 03b0 0933     		adds	r3, r3, #9
 3049 03b2 FA69     		ldr	r2, [r7, #28]
 3050 03b4 D2B2     		uxtb	r2, r2
 3051 03b6 1A70     		strb	r2, [r3]
 702:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 3052              		.loc 1 702 0
 3053 03b8 7B68     		ldr	r3, [r7, #4]
 3054 03ba 0A33     		adds	r3, r3, #10
 3055 03bc FA69     		ldr	r2, [r7, #28]
 3056 03be 120A     		lsrs	r2, r2, #8
 3057 03c0 D2B2     		uxtb	r2, r2
 3058 03c2 1A70     		strb	r2, [r3]
 703:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 3059              		.loc 1 703 0
 3060 03c4 7B68     		ldr	r3, [r7, #4]
 3061 03c6 0B33     		adds	r3, r3, #11
 3062 03c8 FA69     		ldr	r2, [r7, #28]
 3063 03ca 120C     		lsrs	r2, r2, #16
 3064 03cc D2B2     		uxtb	r2, r2
 3065 03ce 1A70     		strb	r2, [r3]
 704:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 3066              		.loc 1 704 0
 3067 03d0 7B68     		ldr	r3, [r7, #4]
 3068 03d2 0C33     		adds	r3, r3, #12
 3069 03d4 FA69     		ldr	r2, [r7, #28]
 3070 03d6 120E     		lsrs	r2, r2, #24
 3071 03d8 D2B2     		uxtb	r2, r2
 3072 03da 1A70     		strb	r2, [r3]
 705:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 3073              		.loc 1 705 0
 3074 03dc 7B68     		ldr	r3, [r7, #4]
 3075 03de 0D33     		adds	r3, r3, #13
 3076 03e0 3A6A     		ldr	r2, [r7, #32]
 3077 03e2 D2B2     		uxtb	r2, r2
 3078 03e4 1A70     		strb	r2, [r3]
 706:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 3079              		.loc 1 706 0
 3080 03e6 7B68     		ldr	r3, [r7, #4]
 3081 03e8 0E33     		adds	r3, r3, #14
 3082 03ea 3A6A     		ldr	r2, [r7, #32]
 3083 03ec 120A     		lsrs	r2, r2, #8
ARM GAS  /tmp/cctJTvh1.s 			page 66


 3084 03ee D2B2     		uxtb	r2, r2
 3085 03f0 1A70     		strb	r2, [r3]
 707:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 3086              		.loc 1 707 0
 3087 03f2 7B68     		ldr	r3, [r7, #4]
 3088 03f4 0F33     		adds	r3, r3, #15
 3089 03f6 3A6A     		ldr	r2, [r7, #32]
 3090 03f8 120C     		lsrs	r2, r2, #16
 3091 03fa D2B2     		uxtb	r2, r2
 3092 03fc 1A70     		strb	r2, [r3]
 708:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 3093              		.loc 1 708 0
 3094 03fe 7B68     		ldr	r3, [r7, #4]
 3095 0400 1033     		adds	r3, r3, #16
 3096 0402 3A6A     		ldr	r2, [r7, #32]
 3097 0404 120E     		lsrs	r2, r2, #24
 3098 0406 D2B2     		uxtb	r2, r2
 3099 0408 1A70     		strb	r2, [r3]
 709:bluetooth_rxtx.c **** 		*data_len = 17;
 3100              		.loc 1 709 0
 3101 040a 3B68     		ldr	r3, [r7]
 3102 040c 1122     		movs	r2, #17
 3103 040e 1A60     		str	r2, [r3]
 710:bluetooth_rxtx.c **** 		break;
 3104              		.loc 1 710 0
 3105 0410 55E3     		b	.L130
 3106              	.L81:
 711:bluetooth_rxtx.c **** 
 712:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 713:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 714:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 3107              		.loc 1 714 0
 3108 0412 614B     		ldr	r3, .L169+4
 3109 0414 1B68     		ldr	r3, [r3]
 3110 0416 03F08003 		and	r3, r3, #128
 3111 041a 002B     		cmp	r3, #0
 3112 041c 14BF     		ite	ne
 3113 041e 0123     		movne	r3, #1
 3114 0420 0023     		moveq	r3, #0
 3115 0422 DBB2     		uxtb	r3, r3
 3116 0424 1A46     		mov	r2, r3
 3117 0426 7B68     		ldr	r3, [r7, #4]
 3118 0428 1A70     		strb	r2, [r3]
 715:bluetooth_rxtx.c **** 		*data_len = 1;
 3119              		.loc 1 715 0
 3120 042a 3B68     		ldr	r3, [r7]
 3121 042c 0122     		movs	r2, #1
 3122 042e 1A60     		str	r2, [r3]
 716:bluetooth_rxtx.c **** 		break;
 3123              		.loc 1 716 0
 3124 0430 45E3     		b	.L130
 3125              	.L82:
 717:bluetooth_rxtx.c **** 
 718:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 719:bluetooth_rxtx.c **** 		if (request_params[0])
 3126              		.loc 1 719 0
 3127 0432 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/cctJTvh1.s 			page 67


 3128 0434 1B88     		ldrh	r3, [r3]
 3129 0436 002B     		cmp	r3, #0
 3130 0438 03D0     		beq	.L139
 720:bluetooth_rxtx.c **** 			PAEN_SET;
 3131              		.loc 1 720 0
 3132 043a 584B     		ldr	r3, .L169+8
 3133 043c 8022     		movs	r2, #128
 3134 043e 1A60     		str	r2, [r3]
 721:bluetooth_rxtx.c **** 		else
 722:bluetooth_rxtx.c **** 			PAEN_CLR;
 723:bluetooth_rxtx.c **** 		break;
 3135              		.loc 1 723 0
 3136 0440 3DE3     		b	.L130
 3137              	.L139:
 722:bluetooth_rxtx.c **** 		break;
 3138              		.loc 1 722 0
 3139 0442 574B     		ldr	r3, .L169+12
 3140 0444 8022     		movs	r2, #128
 3141 0446 1A60     		str	r2, [r3]
 3142              		.loc 1 723 0
 3143 0448 39E3     		b	.L130
 3144              	.L83:
 724:bluetooth_rxtx.c **** 
 725:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 726:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 3145              		.loc 1 726 0
 3146 044a 534B     		ldr	r3, .L169+4
 3147 044c 1B68     		ldr	r3, [r3]
 3148 044e 03F48073 		and	r3, r3, #256
 3149 0452 002B     		cmp	r3, #0
 3150 0454 14BF     		ite	ne
 3151 0456 0123     		movne	r3, #1
 3152 0458 0023     		moveq	r3, #0
 3153 045a DBB2     		uxtb	r3, r3
 3154 045c 1A46     		mov	r2, r3
 3155 045e 7B68     		ldr	r3, [r7, #4]
 3156 0460 1A70     		strb	r2, [r3]
 727:bluetooth_rxtx.c **** 		*data_len = 1;
 3157              		.loc 1 727 0
 3158 0462 3B68     		ldr	r3, [r7]
 3159 0464 0122     		movs	r2, #1
 3160 0466 1A60     		str	r2, [r3]
 728:bluetooth_rxtx.c **** 		break;
 3161              		.loc 1 728 0
 3162 0468 29E3     		b	.L130
 3163              	.L84:
 729:bluetooth_rxtx.c **** 
 730:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 731:bluetooth_rxtx.c **** 		if (request_params[0])
 3164              		.loc 1 731 0
 3165 046a BB68     		ldr	r3, [r7, #8]
 3166 046c 1B88     		ldrh	r3, [r3]
 3167 046e 002B     		cmp	r3, #0
 3168 0470 04D0     		beq	.L141
 732:bluetooth_rxtx.c **** 			HGM_SET;
 3169              		.loc 1 732 0
 3170 0472 4A4B     		ldr	r3, .L169+8
ARM GAS  /tmp/cctJTvh1.s 			page 68


 3171 0474 4FF48072 		mov	r2, #256
 3172 0478 1A60     		str	r2, [r3]
 733:bluetooth_rxtx.c **** 		else
 734:bluetooth_rxtx.c **** 			HGM_CLR;
 735:bluetooth_rxtx.c **** 		break;
 3173              		.loc 1 735 0
 3174 047a 20E3     		b	.L130
 3175              	.L141:
 734:bluetooth_rxtx.c **** 		break;
 3176              		.loc 1 734 0
 3177 047c 484B     		ldr	r3, .L169+12
 3178 047e 4FF48072 		mov	r2, #256
 3179 0482 1A60     		str	r2, [r3]
 3180              		.loc 1 735 0
 3181 0484 1BE3     		b	.L130
 3182              	.L85:
 736:bluetooth_rxtx.c **** #endif
 737:bluetooth_rxtx.c **** 
 738:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 739:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 740:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 3183              		.loc 1 740 0
 3184 0486 474B     		ldr	r3, .L169+16
 3185 0488 0322     		movs	r2, #3
 3186 048a 1A70     		strb	r2, [r3]
 741:bluetooth_rxtx.c **** 		break;
 3187              		.loc 1 741 0
 3188 048c 17E3     		b	.L130
 3189              	.L92:
 742:bluetooth_rxtx.c **** 
 743:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 744:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 3190              		.loc 1 744 0
 3191 048e 0520     		movs	r0, #5
 3192 0490 FFF7FEFF 		bl	cc2400_get
 3193 0494 0346     		mov	r3, r0
 3194 0496 DBB2     		uxtb	r3, r3
 3195 0498 03F00703 		and	r3, r3, #7
 3196 049c DAB2     		uxtb	r2, r3
 3197 049e 7B68     		ldr	r3, [r7, #4]
 3198 04a0 1A70     		strb	r2, [r3]
 745:bluetooth_rxtx.c **** 		*data_len = 1;
 3199              		.loc 1 745 0
 3200 04a2 3B68     		ldr	r3, [r7]
 3201 04a4 0122     		movs	r2, #1
 3202 04a6 1A60     		str	r2, [r3]
 746:bluetooth_rxtx.c **** 		break;
 3203              		.loc 1 746 0
 3204 04a8 09E3     		b	.L130
 3205              	.L93:
 747:bluetooth_rxtx.c **** 
 748:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 749:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 3206              		.loc 1 749 0
 3207 04aa BB68     		ldr	r3, [r7, #8]
 3208 04ac 1B88     		ldrh	r3, [r3]
 3209 04ae 072B     		cmp	r3, #7
ARM GAS  /tmp/cctJTvh1.s 			page 69


 3210 04b0 09D8     		bhi	.L143
 750:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 3211              		.loc 1 750 0
 3212 04b2 BB68     		ldr	r3, [r7, #8]
 3213 04b4 1B88     		ldrh	r3, [r3]
 3214 04b6 43F00803 		orr	r3, r3, #8
 3215 04ba 9BB2     		uxth	r3, r3
 3216 04bc 0520     		movs	r0, #5
 3217 04be 1946     		mov	r1, r3
 3218 04c0 FFF7FEFF 		bl	cc2400_set
 751:bluetooth_rxtx.c **** 		} else {
 752:bluetooth_rxtx.c **** 			return 0;
 753:bluetooth_rxtx.c **** 		}
 754:bluetooth_rxtx.c **** 		break;
 3219              		.loc 1 754 0
 3220 04c4 FBE2     		b	.L130
 3221              	.L143:
 752:bluetooth_rxtx.c **** 		}
 3222              		.loc 1 752 0
 3223 04c6 0023     		movs	r3, #0
 3224 04c8 FAE2     		b	.L165
 3225              	.L95:
 755:bluetooth_rxtx.c **** 
 756:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 757:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 3226              		.loc 1 757 0
 3227 04ca 364B     		ldr	r3, .L169+16
 3228 04cc 0522     		movs	r2, #5
 3229 04ce 1A70     		strb	r2, [r3]
 758:bluetooth_rxtx.c **** 		break;
 3230              		.loc 1 758 0
 3231 04d0 F5E2     		b	.L130
 3232              	.L94:
 759:bluetooth_rxtx.c **** 
 760:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 761:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 3233              		.loc 1 761 0
 3234 04d2 344B     		ldr	r3, .L169+16
 3235 04d4 0622     		movs	r2, #6
 3236 04d6 1A70     		strb	r2, [r3]
 762:bluetooth_rxtx.c **** 		break;
 3237              		.loc 1 762 0
 3238 04d8 F1E2     		b	.L130
 3239              	.L96:
 763:bluetooth_rxtx.c **** #endif
 764:bluetooth_rxtx.c **** 
 765:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 766:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 3240              		.loc 1 766 0
 3241 04da 334B     		ldr	r3, .L169+20
 3242 04dc 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3243 04de 7B68     		ldr	r3, [r7, #4]
 3244 04e0 1A70     		strb	r2, [r3]
 767:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 3245              		.loc 1 767 0
 3246 04e2 7B68     		ldr	r3, [r7, #4]
 3247 04e4 0133     		adds	r3, r3, #1
ARM GAS  /tmp/cctJTvh1.s 			page 70


 3248 04e6 304A     		ldr	r2, .L169+20
 3249 04e8 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 3250 04ea 1A70     		strb	r2, [r3]
 768:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 3251              		.loc 1 768 0
 3252 04ec 7B68     		ldr	r3, [r7, #4]
 3253 04ee 0233     		adds	r3, r3, #2
 3254 04f0 2D4A     		ldr	r2, .L169+20
 3255 04f2 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 3256 04f4 1A70     		strb	r2, [r3]
 769:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 3257              		.loc 1 769 0
 3258 04f6 7B68     		ldr	r3, [r7, #4]
 3259 04f8 0333     		adds	r3, r3, #3
 3260 04fa 2B4A     		ldr	r2, .L169+20
 3261 04fc D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 3262 04fe 1A70     		strb	r2, [r3]
 770:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 3263              		.loc 1 770 0
 3264 0500 7B68     		ldr	r3, [r7, #4]
 3265 0502 0433     		adds	r3, r3, #4
 3266 0504 284A     		ldr	r2, .L169+20
 3267 0506 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 3268 0508 1A70     		strb	r2, [r3]
 771:bluetooth_rxtx.c **** 		*data_len = 5;
 3269              		.loc 1 771 0
 3270 050a 3B68     		ldr	r3, [r7]
 3271 050c 0522     		movs	r2, #5
 3272 050e 1A60     		str	r2, [r3]
 772:bluetooth_rxtx.c **** 		break;
 3273              		.loc 1 772 0
 3274 0510 D5E2     		b	.L130
 3275              	.L86:
 773:bluetooth_rxtx.c **** 
 774:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 775:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 3276              		.loc 1 775 0
 3277 0512 244B     		ldr	r3, .L169+16
 3278 0514 0022     		movs	r2, #0
 3279 0516 1A70     		strb	r2, [r3]
 776:bluetooth_rxtx.c **** 		break;
 3280              		.loc 1 776 0
 3281 0518 D1E2     		b	.L130
 3282              	.L87:
 777:bluetooth_rxtx.c **** 
 778:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 779:bluetooth_rxtx.c **** 		data[0] = modulation;
 3283              		.loc 1 779 0
 3284 051a 244B     		ldr	r3, .L169+24
 3285 051c 1B78     		ldrb	r3, [r3]
 3286 051e DAB2     		uxtb	r2, r3
 3287 0520 7B68     		ldr	r3, [r7, #4]
 3288 0522 1A70     		strb	r2, [r3]
 780:bluetooth_rxtx.c **** 		*data_len = 1;
 3289              		.loc 1 780 0
 3290 0524 3B68     		ldr	r3, [r7]
 3291 0526 0122     		movs	r2, #1
ARM GAS  /tmp/cctJTvh1.s 			page 71


 3292 0528 1A60     		str	r2, [r3]
 781:bluetooth_rxtx.c **** 		break;
 3293              		.loc 1 781 0
 3294 052a C8E2     		b	.L130
 3295              	.L88:
 782:bluetooth_rxtx.c **** 
 783:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 784:bluetooth_rxtx.c **** 		modulation = request_params[0];
 3296              		.loc 1 784 0
 3297 052c BB68     		ldr	r3, [r7, #8]
 3298 052e 1B88     		ldrh	r3, [r3]
 3299 0530 DAB2     		uxtb	r2, r3
 3300 0532 1E4B     		ldr	r3, .L169+24
 3301 0534 1A70     		strb	r2, [r3]
 785:bluetooth_rxtx.c **** 		break;
 3302              		.loc 1 785 0
 3303 0536 C2E2     		b	.L130
 3304              	.L76:
 786:bluetooth_rxtx.c **** 
 787:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 788:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 3305              		.loc 1 788 0
 3306 0538 1D4B     		ldr	r3, .L169+28
 3307 053a 1B88     		ldrh	r3, [r3]	@ movhi
 3308 053c 9BB2     		uxth	r3, r3
 3309 053e DAB2     		uxtb	r2, r3
 3310 0540 7B68     		ldr	r3, [r7, #4]
 3311 0542 1A70     		strb	r2, [r3]
 789:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 3312              		.loc 1 789 0
 3313 0544 7B68     		ldr	r3, [r7, #4]
 3314 0546 0133     		adds	r3, r3, #1
 3315 0548 194A     		ldr	r2, .L169+28
 3316 054a 1288     		ldrh	r2, [r2]	@ movhi
 3317 054c 92B2     		uxth	r2, r2
 3318 054e 120A     		lsrs	r2, r2, #8
 3319 0550 92B2     		uxth	r2, r2
 3320 0552 D2B2     		uxtb	r2, r2
 3321 0554 1A70     		strb	r2, [r3]
 790:bluetooth_rxtx.c **** 		*data_len = 2;
 3322              		.loc 1 790 0
 3323 0556 3B68     		ldr	r3, [r7]
 3324 0558 0222     		movs	r2, #2
 3325 055a 1A60     		str	r2, [r3]
 791:bluetooth_rxtx.c **** 		break;
 3326              		.loc 1 791 0
 3327 055c AFE2     		b	.L130
 3328              	.L77:
 792:bluetooth_rxtx.c **** 
 793:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 794:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 3329              		.loc 1 794 0
 3330 055e BB68     		ldr	r3, [r7, #8]
 3331 0560 1A88     		ldrh	r2, [r3]
 3332 0562 144B     		ldr	r3, .L169+32
 3333 0564 1A80     		strh	r2, [r3]	@ movhi
 795:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
ARM GAS  /tmp/cctJTvh1.s 			page 72


 796:bluetooth_rxtx.c **** 	/*	if (requested_channel > MAX_FREQ) {
 797:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 798:bluetooth_rxtx.c **** 			requested_channel = 2402;
 799:bluetooth_rxtx.c **** 		}
 800:bluetooth_rxtx.c **** 		else {
 801:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 802:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 803:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 804:bluetooth_rxtx.c **** 		}
 805:bluetooth_rxtx.c **** 
 806:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 807:bluetooth_rxtx.c **** 			channel = requested_channel;
 808:bluetooth_rxtx.c **** 			requested_channel = 0;
 809:bluetooth_rxtx.c **** 
 810:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 811:bluetooth_rxtx.c **** 		}
 812:bluetooth_rxtx.c **** 	*/
 813:bluetooth_rxtx.c **** 		break;
 3334              		.loc 1 813 0
 3335 0566 AAE2     		b	.L130
 3336              	.L89:
 814:bluetooth_rxtx.c **** 
 815:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 816:bluetooth_rxtx.c **** 		command[0] = 57;
 3337              		.loc 1 816 0
 3338 0568 3923     		movs	r3, #57
 3339 056a 7B62     		str	r3, [r7, #36]
 817:bluetooth_rxtx.c **** 		iap_entry(command, result);
 3340              		.loc 1 817 0
 3341 056c 094B     		ldr	r3, .L169
 3342 056e 1B68     		ldr	r3, [r3]
 3343 0570 07F12401 		add	r1, r7, #36
 3344 0574 07F11002 		add	r2, r7, #16
 3345 0578 0846     		mov	r0, r1
 3346 057a 1146     		mov	r1, r2
 3347 057c 9847     		blx	r3
 818:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 3348              		.loc 1 818 0
 3349 057e 3B68     		ldr	r3, [r7]
 3350 0580 0022     		movs	r2, #0
 3351 0582 1A60     		str	r2, [r3]
 819:bluetooth_rxtx.c **** 		break;
 3352              		.loc 1 819 0
 3353 0584 9BE2     		b	.L130
 3354              	.L90:
 820:bluetooth_rxtx.c **** 
 821:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 822:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 3355              		.loc 1 822 0
 3356 0586 0C4B     		ldr	r3, .L169+36
 3357 0588 0C4A     		ldr	r2, .L169+40
 3358 058a 1A60     		str	r2, [r3]
 823:bluetooth_rxtx.c **** 		reset();
 3359              		.loc 1 823 0
 3360 058c FFF7FEFF 		bl	reset
 824:bluetooth_rxtx.c **** 		break;
 3361              		.loc 1 824 0
ARM GAS  /tmp/cctJTvh1.s 			page 73


 3362 0590 95E2     		b	.L130
 3363              	.L170:
 3364 0592 00BF     		.align	2
 3365              	.L169:
 3366 0594 00000000 		.word	iap_entry
 3367 0598 54C00920 		.word	537509972
 3368 059c 58C00920 		.word	537509976
 3369 05a0 5CC00920 		.word	537509980
 3370 05a4 00000000 		.word	requested_mode
 3371 05a8 00000000 		.word	rr
 3372 05ac 00000000 		.word	modulation
 3373 05b0 00000000 		.word	channel
 3374 05b4 00000000 		.word	requested_channel
 3375 05b8 00000000 		.word	bootloader_ctrl
 3376 05bc 21BB0543 		.word	1124449057
 3377              	.L91:
 825:bluetooth_rxtx.c **** 
 826:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 827:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 3378              		.loc 1 827 0
 3379 05c0 BB68     		ldr	r3, [r7, #8]
 3380 05c2 1B88     		ldrh	r3, [r3]
 3381 05c4 B3F5006F 		cmp	r3, #2048
 3382 05c8 17D9     		bls	.L146
 3383              		.loc 1 827 0 is_stmt 0 discriminator 1
 3384 05ca BB68     		ldr	r3, [r7, #8]
 3385 05cc 1B88     		ldrh	r3, [r3]
 3386 05ce B3F5406F 		cmp	r3, #3072
 3387 05d2 12D8     		bhi	.L146
 828:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3388              		.loc 1 828 0 is_stmt 1 discriminator 2
 3389 05d4 BB68     		ldr	r3, [r7, #8]
 3390 05d6 0233     		adds	r3, r3, #2
 3391 05d8 1B88     		ldrh	r3, [r3]
 827:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3392              		.loc 1 827 0 discriminator 2
 3393 05da B3F5006F 		cmp	r3, #2048
 3394 05de 0CD9     		bls	.L146
 3395              		.loc 1 828 0
 3396 05e0 BB68     		ldr	r3, [r7, #8]
 3397 05e2 0233     		adds	r3, r3, #2
 3398 05e4 1B88     		ldrh	r3, [r3]
 3399 05e6 B3F5406F 		cmp	r3, #3072
 3400 05ea 06D8     		bhi	.L146
 829:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 3401              		.loc 1 829 0 discriminator 1
 3402 05ec BB68     		ldr	r3, [r7, #8]
 3403 05ee 0233     		adds	r3, r3, #2
 3404 05f0 1A88     		ldrh	r2, [r3]
 3405 05f2 BB68     		ldr	r3, [r7, #8]
 3406 05f4 1B88     		ldrh	r3, [r3]
 828:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3407              		.loc 1 828 0 discriminator 1
 3408 05f6 9A42     		cmp	r2, r3
 3409 05f8 01D2     		bcs	.L147
 3410              	.L146:
 830:bluetooth_rxtx.c **** 			return 0;
ARM GAS  /tmp/cctJTvh1.s 			page 74


 3411              		.loc 1 830 0
 3412 05fa 0023     		movs	r3, #0
 3413 05fc 60E2     		b	.L165
 3414              	.L147:
 831:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 3415              		.loc 1 831 0
 3416 05fe BB68     		ldr	r3, [r7, #8]
 3417 0600 1A88     		ldrh	r2, [r3]
 3418 0602 A44B     		ldr	r3, .L171
 3419 0604 1A80     		strh	r2, [r3]	@ movhi
 832:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 3420              		.loc 1 832 0
 3421 0606 BB68     		ldr	r3, [r7, #8]
 3422 0608 5A88     		ldrh	r2, [r3, #2]
 3423 060a A34B     		ldr	r3, .L171+4
 3424 060c 1A80     		strh	r2, [r3]	@ movhi
 833:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 3425              		.loc 1 833 0
 3426 060e A34B     		ldr	r3, .L171+8
 3427 0610 0422     		movs	r2, #4
 3428 0612 1A70     		strb	r2, [r3]
 834:bluetooth_rxtx.c **** 		*data_len = 0;
 3429              		.loc 1 834 0
 3430 0614 3B68     		ldr	r3, [r7]
 3431 0616 0022     		movs	r2, #0
 3432 0618 1A60     		str	r2, [r3]
 835:bluetooth_rxtx.c **** 		break;
 3433              		.loc 1 835 0
 3434 061a 50E2     		b	.L130
 3435              	.L98:
 836:bluetooth_rxtx.c **** 
 837:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 838:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 3436              		.loc 1 838 0
 3437 061c BB68     		ldr	r3, [r7, #8]
 3438 061e 1B88     		ldrh	r3, [r3]
 3439 0620 B3F5807F 		cmp	r3, #256
 3440 0624 01D9     		bls	.L148
 839:bluetooth_rxtx.c **** 			return 0;
 3441              		.loc 1 839 0
 3442 0626 0023     		movs	r3, #0
 3443 0628 4AE2     		b	.L165
 3444              	.L148:
 840:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 3445              		.loc 1 840 0
 3446 062a BB68     		ldr	r3, [r7, #8]
 3447 062c 1B88     		ldrh	r3, [r3]
 3448 062e DAB2     		uxtb	r2, r3
 3449 0630 9B4B     		ldr	r3, .L171+12
 3450 0632 1A70     		strb	r2, [r3]
 841:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 3451              		.loc 1 841 0
 3452 0634 994B     		ldr	r3, .L171+8
 3453 0636 0722     		movs	r2, #7
 3454 0638 1A70     		strb	r2, [r3]
 842:bluetooth_rxtx.c **** 		*data_len = 0;
 3455              		.loc 1 842 0
ARM GAS  /tmp/cctJTvh1.s 			page 75


 3456 063a 3B68     		ldr	r3, [r7]
 3457 063c 0022     		movs	r2, #0
 3458 063e 1A60     		str	r2, [r3]
 843:bluetooth_rxtx.c **** 		break;
 3459              		.loc 1 843 0
 3460 0640 3DE2     		b	.L130
 3461              	.L97:
 844:bluetooth_rxtx.c **** 
 845:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 846:bluetooth_rxtx.c **** 		data[0] = 0x00;
 3462              		.loc 1 846 0
 3463 0642 7B68     		ldr	r3, [r7, #4]
 3464 0644 0022     		movs	r2, #0
 3465 0646 1A70     		strb	r2, [r3]
 847:bluetooth_rxtx.c **** 		data[1] = 0x00;
 3466              		.loc 1 847 0
 3467 0648 7B68     		ldr	r3, [r7, #4]
 3468 064a 0133     		adds	r3, r3, #1
 3469 064c 0022     		movs	r2, #0
 3470 064e 1A70     		strb	r2, [r3]
 848:bluetooth_rxtx.c **** 
 849:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 3471              		.loc 1 849 0
 3472 0650 9448     		ldr	r0, .L171+16
 3473 0652 FFF7FEFF 		bl	strlen
 3474 0656 0346     		mov	r3, r0
 3475 0658 87F84330 		strb	r3, [r7, #67]
 850:bluetooth_rxtx.c **** 		data[2] = length;
 3476              		.loc 1 850 0
 3477 065c 7B68     		ldr	r3, [r7, #4]
 3478 065e 0233     		adds	r3, r3, #2
 3479 0660 97F84320 		ldrb	r2, [r7, #67]
 3480 0664 1A70     		strb	r2, [r3]
 851:bluetooth_rxtx.c **** 
 852:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 3481              		.loc 1 852 0
 3482 0666 7B68     		ldr	r3, [r7, #4]
 3483 0668 DA1C     		adds	r2, r3, #3
 3484 066a 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3485 066e 1046     		mov	r0, r2
 3486 0670 8C49     		ldr	r1, .L171+16
 3487 0672 1A46     		mov	r2, r3
 3488 0674 FFF7FEFF 		bl	memcpy
 853:bluetooth_rxtx.c **** 
 854:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 3489              		.loc 1 854 0
 3490 0678 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3491 067c DA1C     		adds	r2, r3, #3
 3492 067e 3B68     		ldr	r3, [r7]
 3493 0680 1A60     		str	r2, [r3]
 855:bluetooth_rxtx.c **** 		break;
 3494              		.loc 1 855 0
 3495 0682 1CE2     		b	.L130
 3496              	.L119:
 856:bluetooth_rxtx.c **** 
 857:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 858:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
ARM GAS  /tmp/cctJTvh1.s 			page 76


 3497              		.loc 1 858 0
 3498 0684 8848     		ldr	r0, .L171+20
 3499 0686 FFF7FEFF 		bl	strlen
 3500 068a 0346     		mov	r3, r0
 3501 068c 87F84330 		strb	r3, [r7, #67]
 859:bluetooth_rxtx.c **** 		data[0] = length;
 3502              		.loc 1 859 0
 3503 0690 7B68     		ldr	r3, [r7, #4]
 3504 0692 97F84320 		ldrb	r2, [r7, #67]
 3505 0696 1A70     		strb	r2, [r3]
 860:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 3506              		.loc 1 860 0
 3507 0698 7B68     		ldr	r3, [r7, #4]
 3508 069a 5A1C     		adds	r2, r3, #1
 3509 069c 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3510 06a0 1046     		mov	r0, r2
 3511 06a2 8149     		ldr	r1, .L171+20
 3512 06a4 1A46     		mov	r2, r3
 3513 06a6 FFF7FEFF 		bl	memcpy
 861:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 3514              		.loc 1 861 0
 3515 06aa 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3516 06ae 5A1C     		adds	r2, r3, #1
 3517 06b0 3B68     		ldr	r3, [r7]
 3518 06b2 1A60     		str	r2, [r3]
 862:bluetooth_rxtx.c **** 		break;
 3519              		.loc 1 862 0
 3520 06b4 03E2     		b	.L130
 3521              	.L99:
 863:bluetooth_rxtx.c **** 
 864:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 865:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 3522              		.loc 1 865 0
 3523 06b6 7B68     		ldr	r3, [r7, #4]
 3524 06b8 0122     		movs	r2, #1
 3525 06ba 1A70     		strb	r2, [r3]
 866:bluetooth_rxtx.c **** 		*data_len = 1;
 3526              		.loc 1 866 0
 3527 06bc 3B68     		ldr	r3, [r7]
 3528 06be 0122     		movs	r2, #1
 3529 06c0 1A60     		str	r2, [r3]
 867:bluetooth_rxtx.c **** 		break;
 3530              		.loc 1 867 0
 3531 06c2 FCE1     		b	.L130
 3532              	.L100:
 868:bluetooth_rxtx.c **** 
 869:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 870:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 3533              		.loc 1 870 0
 3534 06c4 BB68     		ldr	r3, [r7, #8]
 3535 06c6 1B88     		ldrh	r3, [r3]
 3536 06c8 DAB2     		uxtb	r2, r3
 3537 06ca 784B     		ldr	r3, .L171+24
 3538 06cc 1A70     		strb	r2, [r3]
 871:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3539              		.loc 1 871 0
 3540 06ce FFF7FEFF 		bl	cs_threshold_calc_and_set
ARM GAS  /tmp/cctJTvh1.s 			page 77


 872:bluetooth_rxtx.c **** 		break;
 3541              		.loc 1 872 0
 3542 06d2 F4E1     		b	.L130
 3543              	.L101:
 873:bluetooth_rxtx.c **** 
 874:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 875:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 3544              		.loc 1 875 0
 3545 06d4 754B     		ldr	r3, .L171+24
 3546 06d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3547 06d8 DAB2     		uxtb	r2, r3
 3548 06da 7B68     		ldr	r3, [r7, #4]
 3549 06dc 1A70     		strb	r2, [r3]
 876:bluetooth_rxtx.c **** 		*data_len = 1;
 3550              		.loc 1 876 0
 3551 06de 3B68     		ldr	r3, [r7]
 3552 06e0 0122     		movs	r2, #1
 3553 06e2 1A60     		str	r2, [r3]
 877:bluetooth_rxtx.c **** 		break;
 3554              		.loc 1 877 0
 3555 06e4 EBE1     		b	.L130
 3556              	.L102:
 878:bluetooth_rxtx.c **** 
 879:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 880:bluetooth_rxtx.c **** 		target.address = 0;
 3557              		.loc 1 880 0
 3558 06e6 7249     		ldr	r1, .L171+28
 3559 06e8 4FF00002 		mov	r2, #0
 3560 06ec 4FF00003 		mov	r3, #0
 3561 06f0 C1E90023 		strd	r2, [r1]
 881:bluetooth_rxtx.c **** 		target.access_code = 0;
 3562              		.loc 1 881 0
 3563 06f4 6E49     		ldr	r1, .L171+28
 3564 06f6 4FF00002 		mov	r2, #0
 3565 06fa 4FF00003 		mov	r3, #0
 3566 06fe C1E90223 		strd	r2, [r1, #8]
 882:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3567              		.loc 1 882 0
 3568 0702 0023     		movs	r3, #0
 3569 0704 FB64     		str	r3, [r7, #76]
 3570 0706 25E0     		b	.L149
 3571              	.L150:
 883:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3572              		.loc 1 883 0 discriminator 3
 3573 0708 694B     		ldr	r3, .L171+28
 3574 070a D3E900AB 		ldrd	r10, [r3]
 3575 070e FB6C     		ldr	r3, [r7, #76]
 3576 0710 7A68     		ldr	r2, [r7, #4]
 3577 0712 1344     		add	r3, r3, r2
 3578 0714 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3579 0716 DAB2     		uxtb	r2, r3
 3580 0718 4FF00003 		mov	r3, #0
 3581 071c F96C     		ldr	r1, [r7, #76]
 3582 071e C900     		lsls	r1, r1, #3
 3583 0720 A1F12006 		sub	r6, r1, #32
 3584 0724 C1F12000 		rsb	r0, r1, #32
 3585 0728 03FA01F9 		lsl	r9, r3, r1
ARM GAS  /tmp/cctJTvh1.s 			page 78


 3586 072c 02FA06F6 		lsl	r6, r2, r6
 3587 0730 49EA0609 		orr	r9, r9, r6
 3588 0734 22FA00F0 		lsr	r0, r2, r0
 3589 0738 49EA0009 		orr	r9, r9, r0
 3590 073c 02FA01F8 		lsl	r8, r2, r1
 3591 0740 4AEA0802 		orr	r2, r10, r8
 3592 0744 4BEA0903 		orr	r3, fp, r9
 3593 0748 5949     		ldr	r1, .L171+28
 3594 074a C1E90023 		strd	r2, [r1]
 882:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3595              		.loc 1 882 0 discriminator 3
 3596 074e FB6C     		ldr	r3, [r7, #76]
 3597 0750 0133     		adds	r3, r3, #1
 3598 0752 FB64     		str	r3, [r7, #76]
 3599              	.L149:
 882:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3600              		.loc 1 882 0 is_stmt 0 discriminator 1
 3601 0754 FB6C     		ldr	r3, [r7, #76]
 3602 0756 072B     		cmp	r3, #7
 3603 0758 D6DD     		ble	.L150
 884:bluetooth_rxtx.c **** 		}
 885:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3604              		.loc 1 885 0 is_stmt 1
 3605 075a 0023     		movs	r3, #0
 3606 075c FB64     		str	r3, [r7, #76]
 3607 075e 24E0     		b	.L151
 3608              	.L152:
 886:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3609              		.loc 1 886 0 discriminator 3
 3610 0760 534B     		ldr	r3, .L171+28
 3611 0762 D3E90289 		ldrd	r8, [r3, #8]
 3612 0766 FB6C     		ldr	r3, [r7, #76]
 3613 0768 0833     		adds	r3, r3, #8
 3614 076a 7A68     		ldr	r2, [r7, #4]
 3615 076c 1344     		add	r3, r3, r2
 3616 076e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3617 0770 DAB2     		uxtb	r2, r3
 3618 0772 4FF00003 		mov	r3, #0
 3619 0776 F96C     		ldr	r1, [r7, #76]
 3620 0778 C900     		lsls	r1, r1, #3
 3621 077a A1F12006 		sub	r6, r1, #32
 3622 077e C1F12000 		rsb	r0, r1, #32
 3623 0782 03FA01F5 		lsl	r5, r3, r1
 3624 0786 02FA06F6 		lsl	r6, r2, r6
 3625 078a 3543     		orrs	r5, r5, r6
 3626 078c 22FA00F0 		lsr	r0, r2, r0
 3627 0790 0543     		orrs	r5, r5, r0
 3628 0792 02FA01F4 		lsl	r4, r2, r1
 3629 0796 48EA0402 		orr	r2, r8, r4
 3630 079a 49EA0503 		orr	r3, r9, r5
 3631 079e 4449     		ldr	r1, .L171+28
 3632 07a0 C1E90223 		strd	r2, [r1, #8]
 885:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3633              		.loc 1 885 0 discriminator 3
 3634 07a4 FB6C     		ldr	r3, [r7, #76]
 3635 07a6 0133     		adds	r3, r3, #1
 3636 07a8 FB64     		str	r3, [r7, #76]
ARM GAS  /tmp/cctJTvh1.s 			page 79


 3637              	.L151:
 885:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3638              		.loc 1 885 0 is_stmt 0 discriminator 1
 3639 07aa FB6C     		ldr	r3, [r7, #76]
 3640 07ac 072B     		cmp	r3, #7
 3641 07ae D7DD     		ble	.L152
 887:bluetooth_rxtx.c **** 		}
 888:bluetooth_rxtx.c **** 		break;
 3642              		.loc 1 888 0 is_stmt 1
 3643 07b0 85E1     		b	.L130
 3644              	.L103:
 889:bluetooth_rxtx.c **** 
 890:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 891:bluetooth_rxtx.c **** 		clock_offset = 0;
 3645              		.loc 1 891 0
 3646 07b2 0023     		movs	r3, #0
 3647 07b4 BB64     		str	r3, [r7, #72]
 892:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3648              		.loc 1 892 0
 3649 07b6 0023     		movs	r3, #0
 3650 07b8 FB64     		str	r3, [r7, #76]
 3651 07ba 0DE0     		b	.L153
 3652              	.L154:
 893:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3653              		.loc 1 893 0 discriminator 3
 3654 07bc BB6C     		ldr	r3, [r7, #72]
 3655 07be 1B02     		lsls	r3, r3, #8
 3656 07c0 BB64     		str	r3, [r7, #72]
 894:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3657              		.loc 1 894 0 discriminator 3
 3658 07c2 FB6C     		ldr	r3, [r7, #76]
 3659 07c4 7A68     		ldr	r2, [r7, #4]
 3660 07c6 1344     		add	r3, r3, r2
 3661 07c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3662 07ca 1A46     		mov	r2, r3
 3663 07cc BB6C     		ldr	r3, [r7, #72]
 3664 07ce 1343     		orrs	r3, r3, r2
 3665 07d0 BB64     		str	r3, [r7, #72]
 892:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3666              		.loc 1 892 0 discriminator 3
 3667 07d2 FB6C     		ldr	r3, [r7, #76]
 3668 07d4 0133     		adds	r3, r3, #1
 3669 07d6 FB64     		str	r3, [r7, #76]
 3670              	.L153:
 892:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3671              		.loc 1 892 0 is_stmt 0 discriminator 1
 3672 07d8 FB6C     		ldr	r3, [r7, #76]
 3673 07da 032B     		cmp	r3, #3
 3674 07dc EEDD     		ble	.L154
 895:bluetooth_rxtx.c **** 		}
 896:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3675              		.loc 1 896 0 is_stmt 1
 3676 07de 354B     		ldr	r3, .L171+32
 3677 07e0 1A68     		ldr	r2, [r3]
 3678 07e2 BB6C     		ldr	r3, [r7, #72]
 3679 07e4 1344     		add	r3, r3, r2
 3680 07e6 334A     		ldr	r2, .L171+32
ARM GAS  /tmp/cctJTvh1.s 			page 80


 3681 07e8 1360     		str	r3, [r2]
 897:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3682              		.loc 1 897 0
 3683 07ea 334B     		ldr	r3, .L171+36
 3684 07ec 0222     		movs	r2, #2
 3685 07ee 1A70     		strb	r2, [r3]
 898:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3686              		.loc 1 898 0
 3687 07f0 2A4B     		ldr	r3, .L171+8
 3688 07f2 0822     		movs	r2, #8
 3689 07f4 1A70     		strb	r2, [r3]
 899:bluetooth_rxtx.c **** 		break;
 3690              		.loc 1 899 0
 3691 07f6 62E1     		b	.L130
 3692              	.L104:
 900:bluetooth_rxtx.c **** 
 901:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 902:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3693              		.loc 1 902 0
 3694 07f8 7B68     		ldr	r3, [r7, #4]
 3695 07fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3696 07fc 1A46     		mov	r2, r3
 3697 07fe 7B68     		ldr	r3, [r7, #4]
 3698 0800 0133     		adds	r3, r3, #1
 3699 0802 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3700 0804 1B02     		lsls	r3, r3, #8
 3701 0806 1A43     		orrs	r2, r2, r3
 3702 0808 7B68     		ldr	r3, [r7, #4]
 3703 080a 0233     		adds	r3, r3, #2
 3704 080c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3705 080e 1B04     		lsls	r3, r3, #16
 3706 0810 1A43     		orrs	r2, r2, r3
 3707 0812 7B68     		ldr	r3, [r7, #4]
 3708 0814 0333     		adds	r3, r3, #3
 3709 0816 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3710 0818 1B06     		lsls	r3, r3, #24
 3711 081a 1343     		orrs	r3, r3, r2
 3712 081c FB63     		str	r3, [r7, #60]
 903:bluetooth_rxtx.c **** 		clkn = clock;
 3713              		.loc 1 903 0
 3714 081e 254A     		ldr	r2, .L171+32
 3715 0820 FB6B     		ldr	r3, [r7, #60]
 3716 0822 1360     		str	r3, [r2]
 904:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3717              		.loc 1 904 0
 3718 0824 FFF7FEFF 		bl	cs_threshold_calc_and_set
 905:bluetooth_rxtx.c **** 		break;
 3719              		.loc 1 905 0
 3720 0828 49E1     		b	.L130
 3721              	.L115:
 906:bluetooth_rxtx.c **** 
 907:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 908:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3722              		.loc 1 908 0
 3723 082a 0023     		movs	r3, #0
 3724 082c FB64     		str	r3, [r7, #76]
 3725 082e 0BE0     		b	.L155
ARM GAS  /tmp/cctJTvh1.s 			page 81


 3726              	.L156:
 909:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3727              		.loc 1 909 0 discriminator 3
 3728 0830 FB6C     		ldr	r3, [r7, #76]
 3729 0832 7A68     		ldr	r2, [r7, #4]
 3730 0834 1344     		add	r3, r3, r2
 3731 0836 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3732 0838 204A     		ldr	r2, .L171+40
 3733 083a FB6C     		ldr	r3, [r7, #76]
 3734 083c 1344     		add	r3, r3, r2
 3735 083e 0A46     		mov	r2, r1
 3736 0840 1A70     		strb	r2, [r3]
 908:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3737              		.loc 1 908 0 discriminator 3
 3738 0842 FB6C     		ldr	r3, [r7, #76]
 3739 0844 0133     		adds	r3, r3, #1
 3740 0846 FB64     		str	r3, [r7, #76]
 3741              	.L155:
 908:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3742              		.loc 1 908 0 is_stmt 0 discriminator 1
 3743 0848 FB6C     		ldr	r3, [r7, #76]
 3744 084a 092B     		cmp	r3, #9
 3745 084c F0DD     		ble	.L156
 910:bluetooth_rxtx.c **** 		}
 911:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3746              		.loc 1 911 0 is_stmt 1
 3747 084e 1C4B     		ldr	r3, .L171+44
 3748 0850 0122     		movs	r2, #1
 3749 0852 1A70     		strb	r2, [r3]
 912:bluetooth_rxtx.c **** 		*data_len = 10;
 3750              		.loc 1 912 0
 3751 0854 3B68     		ldr	r3, [r7]
 3752 0856 0A22     		movs	r2, #10
 3753 0858 1A60     		str	r2, [r3]
 913:bluetooth_rxtx.c **** 		break;
 3754              		.loc 1 913 0
 3755 085a 30E1     		b	.L130
 3756              	.L116:
 914:bluetooth_rxtx.c **** 
 915:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 916:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3757              		.loc 1 916 0
 3758 085c 0023     		movs	r3, #0
 3759 085e FB64     		str	r3, [r7, #76]
 3760 0860 07E0     		b	.L157
 3761              	.L158:
 917:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3762              		.loc 1 917 0 discriminator 3
 3763 0862 164A     		ldr	r2, .L171+40
 3764 0864 FB6C     		ldr	r3, [r7, #76]
 3765 0866 1344     		add	r3, r3, r2
 3766 0868 0022     		movs	r2, #0
 3767 086a 1A70     		strb	r2, [r3]
 916:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3768              		.loc 1 916 0 discriminator 3
 3769 086c FB6C     		ldr	r3, [r7, #76]
 3770 086e 0133     		adds	r3, r3, #1
ARM GAS  /tmp/cctJTvh1.s 			page 82


 3771 0870 FB64     		str	r3, [r7, #76]
 3772              	.L157:
 916:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3773              		.loc 1 916 0 is_stmt 0 discriminator 1
 3774 0872 FB6C     		ldr	r3, [r7, #76]
 3775 0874 092B     		cmp	r3, #9
 3776 0876 F4DD     		ble	.L158
 918:bluetooth_rxtx.c **** 		}
 919:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3777              		.loc 1 919 0 is_stmt 1
 3778 0878 114B     		ldr	r3, .L171+44
 3779 087a 0022     		movs	r2, #0
 3780 087c 1A70     		strb	r2, [r3]
 920:bluetooth_rxtx.c **** 		*data_len = 10;
 3781              		.loc 1 920 0
 3782 087e 3B68     		ldr	r3, [r7]
 3783 0880 0A22     		movs	r2, #10
 3784 0882 1A60     		str	r2, [r3]
 921:bluetooth_rxtx.c **** 		break;
 3785              		.loc 1 921 0
 3786 0884 1BE1     		b	.L130
 3787              	.L105:
 922:bluetooth_rxtx.c **** 
 923:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 924:bluetooth_rxtx.c **** 		clock = clkn;
 3788              		.loc 1 924 0
 3789 0886 0B4B     		ldr	r3, .L171+32
 3790 0888 1B68     		ldr	r3, [r3]
 3791 088a FB63     		str	r3, [r7, #60]
 925:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3792              		.loc 1 925 0
 3793 088c 0023     		movs	r3, #0
 3794 088e FB64     		str	r3, [r7, #76]
 3795 0890 25E0     		b	.L159
 3796              	.L172:
 3797 0892 00BF     		.align	2
 3798              	.L171:
 3799 0894 00000000 		.word	low_freq
 3800 0898 00000000 		.word	high_freq
 3801 089c 00000000 		.word	requested_mode
 3802 08a0 00000000 		.word	rssi_threshold
 3803 08a4 D4080000 		.word	.LC4
 3804 08a8 00000000 		.word	compile_info
 3805 08ac 00000000 		.word	cs_threshold_req
 3806 08b0 00000000 		.word	target
 3807 08b4 00000000 		.word	clkn
 3808 08b8 00000000 		.word	hop_mode
 3809 08bc 00000000 		.word	afh_map
 3810 08c0 00000000 		.word	afh_enabled
 3811              	.L160:
 926:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3812              		.loc 1 926 0 discriminator 3
 3813 08c4 FB6C     		ldr	r3, [r7, #76]
 3814 08c6 7A68     		ldr	r2, [r7, #4]
 3815 08c8 1344     		add	r3, r3, r2
 3816 08ca FA6C     		ldr	r2, [r7, #76]
 3817 08cc D200     		lsls	r2, r2, #3
ARM GAS  /tmp/cctJTvh1.s 			page 83


 3818 08ce F96B     		ldr	r1, [r7, #60]
 3819 08d0 21FA02F2 		lsr	r2, r1, r2
 3820 08d4 D2B2     		uxtb	r2, r2
 3821 08d6 1A70     		strb	r2, [r3]
 925:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3822              		.loc 1 925 0 discriminator 3
 3823 08d8 FB6C     		ldr	r3, [r7, #76]
 3824 08da 0133     		adds	r3, r3, #1
 3825 08dc FB64     		str	r3, [r7, #76]
 3826              	.L159:
 925:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3827              		.loc 1 925 0 is_stmt 0 discriminator 1
 3828 08de FB6C     		ldr	r3, [r7, #76]
 3829 08e0 032B     		cmp	r3, #3
 3830 08e2 EFDD     		ble	.L160
 927:bluetooth_rxtx.c **** 		}
 928:bluetooth_rxtx.c **** 		*data_len = 4;
 3831              		.loc 1 928 0 is_stmt 1
 3832 08e4 3B68     		ldr	r3, [r7]
 3833 08e6 0422     		movs	r2, #4
 3834 08e8 1A60     		str	r2, [r3]
 929:bluetooth_rxtx.c **** 		break;
 3835              		.loc 1 929 0
 3836 08ea E8E0     		b	.L130
 3837              	.L106:
 930:bluetooth_rxtx.c **** 
 931:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 932:bluetooth_rxtx.c **** 		*data_len = 0;
 3838              		.loc 1 932 0
 3839 08ec 3B68     		ldr	r3, [r7]
 3840 08ee 0022     		movs	r2, #0
 3841 08f0 1A60     		str	r2, [r3]
 933:bluetooth_rxtx.c **** 
 934:bluetooth_rxtx.c **** 		do_hop = 0;
 3842              		.loc 1 934 0
 3843 08f2 764B     		ldr	r3, .L173
 3844 08f4 0022     		movs	r2, #0
 3845 08f6 1A70     		strb	r2, [r3]
 935:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3846              		.loc 1 935 0
 3847 08f8 754B     		ldr	r3, .L173+4
 3848 08fa 0322     		movs	r2, #3
 3849 08fc 1A70     		strb	r2, [r3]
 936:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3850              		.loc 1 936 0
 3851 08fe 754B     		ldr	r3, .L173+8
 3852 0900 0922     		movs	r2, #9
 3853 0902 1A70     		strb	r2, [r3]
 937:bluetooth_rxtx.c **** 
 938:bluetooth_rxtx.c **** 		queue_init();
 3854              		.loc 1 938 0
 3855 0904 FFF7FEFF 		bl	queue_init
 939:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3856              		.loc 1 939 0
 3857 0908 FFF7FEFF 		bl	cs_threshold_calc_and_set
 940:bluetooth_rxtx.c **** 		break;
 3858              		.loc 1 940 0
ARM GAS  /tmp/cctJTvh1.s 			page 84


 3859 090c D7E0     		b	.L130
 3860              	.L107:
 941:bluetooth_rxtx.c **** 
 942:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 943:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3861              		.loc 1 943 0
 3862 090e 0023     		movs	r3, #0
 3863 0910 FB64     		str	r3, [r7, #76]
 3864 0912 0DE0     		b	.L161
 3865              	.L162:
 944:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3866              		.loc 1 944 0 discriminator 3
 3867 0914 FB6C     		ldr	r3, [r7, #76]
 3868 0916 7A68     		ldr	r2, [r7, #4]
 3869 0918 1344     		add	r3, r3, r2
 3870 091a 6F4A     		ldr	r2, .L173+12
 3871 091c 1168     		ldr	r1, [r2]
 3872 091e FA6C     		ldr	r2, [r7, #76]
 3873 0920 D200     		lsls	r2, r2, #3
 3874 0922 21FA02F2 		lsr	r2, r1, r2
 3875 0926 D2B2     		uxtb	r2, r2
 3876 0928 1A70     		strb	r2, [r3]
 943:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3877              		.loc 1 943 0 discriminator 3
 3878 092a FB6C     		ldr	r3, [r7, #76]
 3879 092c 0133     		adds	r3, r3, #1
 3880 092e FB64     		str	r3, [r7, #76]
 3881              	.L161:
 943:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3882              		.loc 1 943 0 is_stmt 0 discriminator 1
 3883 0930 FB6C     		ldr	r3, [r7, #76]
 3884 0932 032B     		cmp	r3, #3
 3885 0934 EEDD     		ble	.L162
 945:bluetooth_rxtx.c **** 		}
 946:bluetooth_rxtx.c **** 		*data_len = 4;
 3886              		.loc 1 946 0 is_stmt 1
 3887 0936 3B68     		ldr	r3, [r7]
 3888 0938 0422     		movs	r2, #4
 3889 093a 1A60     		str	r2, [r3]
 947:bluetooth_rxtx.c **** 		break;
 3890              		.loc 1 947 0
 3891 093c BFE0     		b	.L130
 3892              	.L108:
 948:bluetooth_rxtx.c **** 
 949:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 950:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3893              		.loc 1 950 0
 3894 093e 7B68     		ldr	r3, [r7, #4]
 3895 0940 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3896 0942 1A46     		mov	r2, r3
 3897 0944 7B68     		ldr	r3, [r7, #4]
 3898 0946 0133     		adds	r3, r3, #1
 3899 0948 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3900 094a 1B02     		lsls	r3, r3, #8
 3901 094c 1A43     		orrs	r2, r2, r3
 3902 094e 7B68     		ldr	r3, [r7, #4]
 3903 0950 0233     		adds	r3, r3, #2
ARM GAS  /tmp/cctJTvh1.s 			page 85


 3904 0952 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3905 0954 1B04     		lsls	r3, r3, #16
 3906 0956 1A43     		orrs	r2, r2, r3
 3907 0958 7B68     		ldr	r3, [r7, #4]
 3908 095a 0333     		adds	r3, r3, #3
 3909 095c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3910 095e 1B06     		lsls	r3, r3, #24
 3911 0960 1343     		orrs	r3, r3, r2
 3912 0962 1846     		mov	r0, r3
 3913 0964 FFF7FEFF 		bl	le_set_access_address
 951:bluetooth_rxtx.c **** 		le.target_set = 1;
 3914              		.loc 1 951 0
 3915 0968 5B4B     		ldr	r3, .L173+12
 3916 096a 0122     		movs	r2, #1
 3917 096c DA63     		str	r2, [r3, #60]
 952:bluetooth_rxtx.c **** 		break;
 3918              		.loc 1 952 0
 3919 096e A6E0     		b	.L130
 3920              	.L110:
 953:bluetooth_rxtx.c **** 
 954:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 955:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 956:bluetooth_rxtx.c **** 		break;
 957:bluetooth_rxtx.c **** 
 958:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 959:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 960:bluetooth_rxtx.c **** 		// don't commit here please
 961:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3921              		.loc 1 961 0
 3922 0970 7B68     		ldr	r3, [r7, #4]
 3923 0972 1322     		movs	r2, #19
 3924 0974 1A70     		strb	r2, [r3]
 962:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3925              		.loc 1 962 0
 3926 0976 7B68     		ldr	r3, [r7, #4]
 3927 0978 0133     		adds	r3, r3, #1
 3928 097a 3722     		movs	r2, #55
 3929 097c 1A70     		strb	r2, [r3]
 963:bluetooth_rxtx.c **** 		*data_len = 2;
 3930              		.loc 1 963 0
 3931 097e 3B68     		ldr	r3, [r7]
 3932 0980 0222     		movs	r2, #2
 3933 0982 1A60     		str	r2, [r3]
 964:bluetooth_rxtx.c **** 		break;
 3934              		.loc 1 964 0
 3935 0984 9BE0     		b	.L130
 3936              	.L111:
 965:bluetooth_rxtx.c **** 
 966:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 967:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3937              		.loc 1 967 0
 3938 0986 544B     		ldr	r3, .L173+12
 3939 0988 1B69     		ldr	r3, [r3, #16]
 3940 098a 002B     		cmp	r3, #0
 3941 098c 14BF     		ite	ne
 3942 098e 0123     		movne	r3, #1
 3943 0990 0023     		moveq	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 86


 3944 0992 DBB2     		uxtb	r3, r3
 3945 0994 1A46     		mov	r2, r3
 3946 0996 7B68     		ldr	r3, [r7, #4]
 3947 0998 1A70     		strb	r2, [r3]
 968:bluetooth_rxtx.c **** 		*data_len = 1;
 3948              		.loc 1 968 0
 3949 099a 3B68     		ldr	r3, [r7]
 3950 099c 0122     		movs	r2, #1
 3951 099e 1A60     		str	r2, [r3]
 969:bluetooth_rxtx.c **** 		break;
 3952              		.loc 1 969 0
 3953 09a0 8DE0     		b	.L130
 3954              	.L112:
 970:bluetooth_rxtx.c **** 
 971:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 972:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3955              		.loc 1 972 0
 3956 09a2 BB68     		ldr	r3, [r7, #8]
 3957 09a4 1B88     		ldrh	r3, [r3]
 3958 09a6 002B     		cmp	r3, #0
 3959 09a8 14BF     		ite	ne
 3960 09aa 0123     		movne	r3, #1
 3961 09ac 0023     		moveq	r3, #0
 3962 09ae DBB2     		uxtb	r3, r3
 3963 09b0 1A46     		mov	r2, r3
 3964 09b2 494B     		ldr	r3, .L173+12
 3965 09b4 1A61     		str	r2, [r3, #16]
 973:bluetooth_rxtx.c **** 		break;
 3966              		.loc 1 973 0
 3967 09b6 82E0     		b	.L130
 3968              	.L113:
 974:bluetooth_rxtx.c **** 
 975:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 976:bluetooth_rxtx.c **** 		p = dequeue();
 3969              		.loc 1 976 0
 3970 09b8 FFF7FEFF 		bl	dequeue
 3971 09bc 7864     		str	r0, [r7, #68]
 977:bluetooth_rxtx.c **** 		if (p != NULL) {
 3972              		.loc 1 977 0
 3973 09be 7B6C     		ldr	r3, [r7, #68]
 3974 09c0 002B     		cmp	r3, #0
 3975 09c2 08D0     		beq	.L163
 978:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3976              		.loc 1 978 0
 3977 09c4 7868     		ldr	r0, [r7, #4]
 3978 09c6 796C     		ldr	r1, [r7, #68]
 3979 09c8 4022     		movs	r2, #64
 3980 09ca FFF7FEFF 		bl	memcpy
 979:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3981              		.loc 1 979 0
 3982 09ce 3B68     		ldr	r3, [r7]
 3983 09d0 4022     		movs	r2, #64
 3984 09d2 1A60     		str	r2, [r3]
 980:bluetooth_rxtx.c **** 		} else {
 981:bluetooth_rxtx.c **** 			data[0] = 0;
 982:bluetooth_rxtx.c **** 			*data_len = 1;
 983:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/cctJTvh1.s 			page 87


 984:bluetooth_rxtx.c **** 		break;
 3985              		.loc 1 984 0
 3986 09d4 73E0     		b	.L130
 3987              	.L163:
 981:bluetooth_rxtx.c **** 			*data_len = 1;
 3988              		.loc 1 981 0
 3989 09d6 7B68     		ldr	r3, [r7, #4]
 3990 09d8 0022     		movs	r2, #0
 3991 09da 1A70     		strb	r2, [r3]
 982:bluetooth_rxtx.c **** 		}
 3992              		.loc 1 982 0
 3993 09dc 3B68     		ldr	r3, [r7]
 3994 09de 0122     		movs	r2, #1
 3995 09e0 1A60     		str	r2, [r3]
 3996              		.loc 1 984 0
 3997 09e2 6CE0     		b	.L130
 3998              	.L114:
 985:bluetooth_rxtx.c **** 
 986:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 987:bluetooth_rxtx.c **** 		*data_len = 0;
 3999              		.loc 1 987 0
 4000 09e4 3B68     		ldr	r3, [r7]
 4001 09e6 0022     		movs	r2, #0
 4002 09e8 1A60     		str	r2, [r3]
 988:bluetooth_rxtx.c **** 
 989:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 4003              		.loc 1 989 0
 4004 09ea 394B     		ldr	r3, .L173+4
 4005 09ec 0022     		movs	r2, #0
 4006 09ee 1A70     		strb	r2, [r3]
 990:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 4007              		.loc 1 990 0
 4008 09f0 384B     		ldr	r3, .L173+8
 4009 09f2 0A22     		movs	r2, #10
 4010 09f4 1A70     		strb	r2, [r3]
 991:bluetooth_rxtx.c **** 
 992:bluetooth_rxtx.c **** 		queue_init();
 4011              		.loc 1 992 0
 4012 09f6 FFF7FEFF 		bl	queue_init
 993:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 4013              		.loc 1 993 0
 4014 09fa FFF7FEFF 		bl	cs_threshold_calc_and_set
 994:bluetooth_rxtx.c **** 		break;
 4015              		.loc 1 994 0
 4016 09fe 5EE0     		b	.L130
 4017              	.L117:
 995:bluetooth_rxtx.c **** 
 996:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 997:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 4018              		.loc 1 997 0
 4019 0a00 BB68     		ldr	r3, [r7, #8]
 4020 0a02 1B88     		ldrh	r3, [r3]
 4021 0a04 DBB2     		uxtb	r3, r3
 4022 0a06 1846     		mov	r0, r3
 4023 0a08 FFF7FEFF 		bl	cc2400_get
 4024 0a0c 0346     		mov	r3, r0
 4025 0a0e 7B87     		strh	r3, [r7, #58]	@ movhi
ARM GAS  /tmp/cctJTvh1.s 			page 88


 998:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 4026              		.loc 1 998 0
 4027 0a10 7B8F     		ldrh	r3, [r7, #58]
 4028 0a12 1B0A     		lsrs	r3, r3, #8
 4029 0a14 9BB2     		uxth	r3, r3
 4030 0a16 DAB2     		uxtb	r2, r3
 4031 0a18 7B68     		ldr	r3, [r7, #4]
 4032 0a1a 1A70     		strb	r2, [r3]
 999:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 4033              		.loc 1 999 0
 4034 0a1c 7B68     		ldr	r3, [r7, #4]
 4035 0a1e 0133     		adds	r3, r3, #1
 4036 0a20 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 4037 0a22 D2B2     		uxtb	r2, r2
 4038 0a24 1A70     		strb	r2, [r3]
1000:bluetooth_rxtx.c **** 		*data_len = 2;
 4039              		.loc 1 1000 0
 4040 0a26 3B68     		ldr	r3, [r7]
 4041 0a28 0222     		movs	r2, #2
 4042 0a2a 1A60     		str	r2, [r3]
1001:bluetooth_rxtx.c **** 		break;
 4043              		.loc 1 1001 0
 4044 0a2c 47E0     		b	.L130
 4045              	.L121:
1002:bluetooth_rxtx.c **** 
1003:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
1004:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 4046              		.loc 1 1004 0
 4047 0a2e BB68     		ldr	r3, [r7, #8]
 4048 0a30 1B88     		ldrh	r3, [r3]
 4049 0a32 DAB2     		uxtb	r2, r3
 4050 0a34 BB68     		ldr	r3, [r7, #8]
 4051 0a36 0233     		adds	r3, r3, #2
 4052 0a38 1B88     		ldrh	r3, [r3]
 4053 0a3a 1046     		mov	r0, r2
 4054 0a3c 1946     		mov	r1, r3
 4055 0a3e FFF7FEFF 		bl	cc2400_set
1005:bluetooth_rxtx.c **** 		break;
 4056              		.loc 1 1005 0
 4057 0a42 3CE0     		b	.L130
 4058              	.L118:
1006:bluetooth_rxtx.c **** 
1007:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
1008:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 4059              		.loc 1 1008 0
 4060 0a44 2548     		ldr	r0, .L173+16
 4061 0a46 7968     		ldr	r1, [r7, #4]
 4062 0a48 0622     		movs	r2, #6
 4063 0a4a FFF7FEFF 		bl	memcpy
1009:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 4064              		.loc 1 1009 0
 4065 0a4e 214B     		ldr	r3, .L173+8
 4066 0a50 0C22     		movs	r2, #12
 4067 0a52 1A70     		strb	r2, [r3]
1010:bluetooth_rxtx.c **** 		break;
 4068              		.loc 1 1010 0
 4069 0a54 33E0     		b	.L130
ARM GAS  /tmp/cctJTvh1.s 			page 89


 4070              	.L120:
1011:bluetooth_rxtx.c **** 
1012:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
1013:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
1014:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
1015:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 4071              		.loc 1 1015 0
 4072 0a56 7B68     		ldr	r3, [r7, #4]
 4073 0a58 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 4074 0a5a 1F4B     		ldr	r3, .L173+12
 4075 0a5c 83F83420 		strb	r2, [r3, #52]
1016:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 4076              		.loc 1 1016 0
 4077 0a60 7B68     		ldr	r3, [r7, #4]
 4078 0a62 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 4079 0a64 1C4B     		ldr	r3, .L173+12
 4080 0a66 83F83520 		strb	r2, [r3, #53]
1017:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 4081              		.loc 1 1017 0
 4082 0a6a 7B68     		ldr	r3, [r7, #4]
 4083 0a6c DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 4084 0a6e 1A4B     		ldr	r3, .L173+12
 4085 0a70 83F83620 		strb	r2, [r3, #54]
1018:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 4086              		.loc 1 1018 0
 4087 0a74 7B68     		ldr	r3, [r7, #4]
 4088 0a76 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 4089 0a78 174B     		ldr	r3, .L173+12
 4090 0a7a 83F83720 		strb	r2, [r3, #55]
1019:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 4091              		.loc 1 1019 0
 4092 0a7e 7B68     		ldr	r3, [r7, #4]
 4093 0a80 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 4094 0a82 154B     		ldr	r3, .L173+12
 4095 0a84 83F83820 		strb	r2, [r3, #56]
1020:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 4096              		.loc 1 1020 0
 4097 0a88 7B68     		ldr	r3, [r7, #4]
 4098 0a8a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 4099 0a8c 124B     		ldr	r3, .L173+12
 4100 0a8e 83F83920 		strb	r2, [r3, #57]
1021:bluetooth_rxtx.c **** 		le.target_set = 1;
 4101              		.loc 1 1021 0
 4102 0a92 114B     		ldr	r3, .L173+12
 4103 0a94 0122     		movs	r2, #1
 4104 0a96 DA63     		str	r2, [r3, #60]
1022:bluetooth_rxtx.c **** 		break;
 4105              		.loc 1 1022 0
 4106 0a98 11E0     		b	.L130
 4107              	.L122:
1023:bluetooth_rxtx.c **** 
1024:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1025:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
1026:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 4108              		.loc 1 1026 0
 4109 0a9a BB68     		ldr	r3, [r7, #8]
 4110 0a9c 1B88     		ldrh	r3, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 90


 4111 0a9e DAB2     		uxtb	r2, r3
 4112 0aa0 0F4B     		ldr	r3, .L173+20
 4113 0aa2 1A70     		strb	r2, [r3]
1027:bluetooth_rxtx.c **** 		break;
 4114              		.loc 1 1027 0
 4115 0aa4 0BE0     		b	.L130
 4116              	.L123:
1028:bluetooth_rxtx.c **** #endif
1029:bluetooth_rxtx.c **** 
1030:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
1031:bluetooth_rxtx.c **** #ifndef TX_ENABLE
1032:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
1033:bluetooth_rxtx.c **** 			return 0;
1034:bluetooth_rxtx.c **** #endif
1035:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 4117              		.loc 1 1035 0
 4118 0aa6 0B4B     		ldr	r3, .L173+8
 4119 0aa8 0D22     		movs	r2, #13
 4120 0aaa 1A70     		strb	r2, [r3]
1036:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 4121              		.loc 1 1036 0
 4122 0aac BB68     		ldr	r3, [r7, #8]
 4123 0aae 1B88     		ldrh	r3, [r3]
 4124 0ab0 DAB2     		uxtb	r2, r3
 4125 0ab2 0C4B     		ldr	r3, .L173+24
 4126 0ab4 1A70     		strb	r2, [r3]
1037:bluetooth_rxtx.c **** 		break;
 4127              		.loc 1 1037 0
 4128 0ab6 02E0     		b	.L130
 4129              	.L64:
1038:bluetooth_rxtx.c **** 
1039:bluetooth_rxtx.c **** 	default:
1040:bluetooth_rxtx.c **** 		return 0;
 4130              		.loc 1 1040 0
 4131 0ab8 0023     		movs	r3, #0
 4132 0aba 01E0     		b	.L165
 4133              	.L166:
 956:bluetooth_rxtx.c **** 
 4134              		.loc 1 956 0
 4135 0abc 00BF     		nop
 4136              	.L130:
1041:bluetooth_rxtx.c **** 	}
1042:bluetooth_rxtx.c **** 	return 1;
 4137              		.loc 1 1042 0
 4138 0abe 0123     		movs	r3, #1
 4139              	.L165:
1043:bluetooth_rxtx.c **** }
 4140              		.loc 1 1043 0 discriminator 1
 4141 0ac0 1846     		mov	r0, r3
 4142 0ac2 5437     		adds	r7, r7, #84
 4143              		.cfi_def_cfa_offset 36
 4144 0ac4 BD46     		mov	sp, r7
 4145              		.cfi_def_cfa_register 13
 4146              		@ sp needed
 4147 0ac6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4148              	.L174:
 4149 0aca 00BF     		.align	2
ARM GAS  /tmp/cctJTvh1.s 			page 91


 4150              	.L173:
 4151 0acc 00000000 		.word	do_hop
 4152 0ad0 00000000 		.word	hop_mode
 4153 0ad4 00000000 		.word	requested_mode
 4154 0ad8 00000000 		.word	le
 4155 0adc 00000000 		.word	slave_mac_address
 4156 0ae0 00000000 		.word	jam_mode
 4157 0ae4 00000000 		.word	ego_mode
 4158              		.cfi_endproc
 4159              	.LFE13:
 4161              		.section	.text.clkn_init,"ax",%progbits
 4162              		.align	2
 4163              		.thumb
 4164              		.thumb_func
 4166              	clkn_init:
 4167              	.LFB14:
1044:bluetooth_rxtx.c **** 
1045:bluetooth_rxtx.c **** static void clkn_init()
1046:bluetooth_rxtx.c **** {
 4168              		.loc 1 1046 0
 4169              		.cfi_startproc
 4170              		@ args = 0, pretend = 0, frame = 0
 4171              		@ frame_needed = 1, uses_anonymous_args = 0
 4172              		@ link register save eliminated.
 4173 0000 80B4     		push	{r7}
 4174              		.cfi_def_cfa_offset 4
 4175              		.cfi_offset 7, -4
 4176 0002 00AF     		add	r7, sp, #0
 4177              		.cfi_def_cfa_register 7
1047:bluetooth_rxtx.c **** 	/*
1048:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
1049:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
1050:bluetooth_rxtx.c **** 	 * clock_start().
1051:bluetooth_rxtx.c **** 	 */
1052:bluetooth_rxtx.c **** 
1053:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
1054:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 4178              		.loc 1 1054 0
 4179 0004 0C4B     		ldr	r3, .L176
 4180 0006 0222     		movs	r2, #2
 4181 0008 1A60     		str	r2, [r3]
1055:bluetooth_rxtx.c **** 	clkn = 0;
 4182              		.loc 1 1055 0
 4183 000a 0C4B     		ldr	r3, .L176+4
 4184 000c 0022     		movs	r2, #0
 4185 000e 1A60     		str	r2, [r3]
1056:bluetooth_rxtx.c **** 
1057:bluetooth_rxtx.c **** #ifdef TC13BADGE
1058:bluetooth_rxtx.c **** 	/*
1059:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
1060:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
1061:bluetooth_rxtx.c **** 	 */
1062:bluetooth_rxtx.c **** 	T0PR = 2;
1063:bluetooth_rxtx.c **** #else
1064:bluetooth_rxtx.c **** 	/*
1065:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
1066:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
ARM GAS  /tmp/cctJTvh1.s 			page 92


1067:bluetooth_rxtx.c **** 	 */
1068:bluetooth_rxtx.c **** 	T0PR = 4;
 4186              		.loc 1 1068 0
 4187 0010 0B4B     		ldr	r3, .L176+8
 4188 0012 0422     		movs	r2, #4
 4189 0014 1A60     		str	r2, [r3]
1069:bluetooth_rxtx.c **** #endif
1070:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
1071:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 4190              		.loc 1 1071 0
 4191 0016 0B4B     		ldr	r3, .L176+12
 4192 0018 40F63442 		movw	r2, #3124
 4193 001c 1A60     		str	r2, [r3]
1072:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 4194              		.loc 1 1072 0
 4195 001e 0A4B     		ldr	r3, .L176+16
 4196 0020 0322     		movs	r2, #3
 4197 0022 1A60     		str	r2, [r3]
1073:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 4198              		.loc 1 1073 0
 4199 0024 094B     		ldr	r3, .L176+20
 4200 0026 0222     		movs	r2, #2
 4201 0028 1A60     		str	r2, [r3]
1074:bluetooth_rxtx.c **** 
1075:bluetooth_rxtx.c **** 	/* start timer */
1076:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 4202              		.loc 1 1076 0
 4203 002a 034B     		ldr	r3, .L176
 4204 002c 0122     		movs	r2, #1
 4205 002e 1A60     		str	r2, [r3]
1077:bluetooth_rxtx.c **** }
 4206              		.loc 1 1077 0
 4207 0030 BD46     		mov	sp, r7
 4208              		.cfi_def_cfa_register 13
 4209              		@ sp needed
 4210 0032 5DF8047B 		ldr	r7, [sp], #4
 4211              		.cfi_restore 7
 4212              		.cfi_def_cfa_offset 0
 4213 0036 7047     		bx	lr
 4214              	.L177:
 4215              		.align	2
 4216              	.L176:
 4217 0038 04400040 		.word	1073758212
 4218 003c 00000000 		.word	clkn
 4219 0040 0C400040 		.word	1073758220
 4220 0044 18400040 		.word	1073758232
 4221 0048 14400040 		.word	1073758228
 4222 004c 00E100E0 		.word	-536813312
 4223              		.cfi_endproc
 4224              	.LFE14:
 4226              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 4227              		.align	2
 4228              		.global	TIMER0_IRQHandler
 4229              		.thumb
 4230              		.thumb_func
 4232              	TIMER0_IRQHandler:
 4233              	.LFB15:
ARM GAS  /tmp/cctJTvh1.s 			page 93


1078:bluetooth_rxtx.c **** 
1079:bluetooth_rxtx.c **** /* Update CLKN. */
1080:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
1081:bluetooth_rxtx.c **** {
 4234              		.loc 1 1081 0
 4235              		.cfi_startproc
 4236              		@ args = 0, pretend = 0, frame = 8
 4237              		@ frame_needed = 1, uses_anonymous_args = 0
 4238              		@ link register save eliminated.
 4239 0000 80B4     		push	{r7}
 4240              		.cfi_def_cfa_offset 4
 4241              		.cfi_offset 7, -4
 4242 0002 83B0     		sub	sp, sp, #12
 4243              		.cfi_def_cfa_offset 16
 4244 0004 00AF     		add	r7, sp, #0
 4245              		.cfi_def_cfa_register 7
1082:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
1083:bluetooth_rxtx.c **** 	u32 next;
1084:bluetooth_rxtx.c **** 	u32 le_clk;
1085:bluetooth_rxtx.c **** 
1086:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 4246              		.loc 1 1086 0
 4247 0006 4FF04023 		mov	r3, #1073758208
 4248 000a 1B68     		ldr	r3, [r3]
 4249 000c 03F00103 		and	r3, r3, #1
 4250 0010 002B     		cmp	r3, #0
 4251 0012 6DD0     		beq	.L178
1087:bluetooth_rxtx.c **** 
1088:bluetooth_rxtx.c **** 		clkn++;
 4252              		.loc 1 1088 0
 4253 0014 394B     		ldr	r3, .L188
 4254 0016 1B68     		ldr	r3, [r3]
 4255 0018 0133     		adds	r3, r3, #1
 4256 001a 384A     		ldr	r2, .L188
 4257 001c 1360     		str	r3, [r2]
1089:bluetooth_rxtx.c **** 		next = clkn;
 4258              		.loc 1 1089 0
 4259 001e 374B     		ldr	r3, .L188
 4260 0020 1B68     		ldr	r3, [r3]
 4261 0022 7B60     		str	r3, [r7, #4]
1090:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 4262              		.loc 1 1090 0
 4263 0024 364B     		ldr	r3, .L188+4
 4264 0026 9B69     		ldr	r3, [r3, #24]
 4265 0028 7A68     		ldr	r2, [r7, #4]
 4266 002a D31A     		subs	r3, r2, r3
 4267 002c 03F00303 		and	r3, r3, #3
 4268 0030 3B60     		str	r3, [r7]
1091:bluetooth_rxtx.c **** 
1092:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
1093:bluetooth_rxtx.c **** 
1094:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
1095:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 4269              		.loc 1 1095 0
 4270 0032 344B     		ldr	r3, .L188+8
 4271 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4272 0036 002B     		cmp	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 94


 4273 0038 03D0     		beq	.L180
 4274              		.loc 1 1095 0 is_stmt 0 discriminator 1
 4275 003a 324B     		ldr	r3, .L188+8
 4276 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4277 003e 012B     		cmp	r3, #1
 4278 0040 09D1     		bne	.L181
 4279              	.L180:
1096:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4280              		.loc 1 1096 0 is_stmt 1
 4281 0042 7B68     		ldr	r3, [r7, #4]
 4282 0044 03F07F03 		and	r3, r3, #127
 4283 0048 002B     		cmp	r3, #0
 4284 004a 03D1     		bne	.L182
1097:bluetooth_rxtx.c **** 				do_hop = 1;
 4285              		.loc 1 1097 0
 4286 004c 2E4B     		ldr	r3, .L188+12
 4287 004e 0122     		movs	r2, #1
 4288 0050 1A70     		strb	r2, [r3]
1096:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4289              		.loc 1 1096 0
 4290 0052 37E0     		b	.L183
 4291              	.L182:
 4292 0054 36E0     		b	.L183
 4293              	.L181:
1098:bluetooth_rxtx.c **** 		}
1099:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
1100:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 4294              		.loc 1 1100 0
 4295 0056 2B4B     		ldr	r3, .L188+8
 4296 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4297 005a 022B     		cmp	r3, #2
 4298 005c 08D1     		bne	.L184
1101:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 4299              		.loc 1 1101 0
 4300 005e 7B68     		ldr	r3, [r7, #4]
 4301 0060 03F00103 		and	r3, r3, #1
 4302 0064 002B     		cmp	r3, #0
 4303 0066 2DD1     		bne	.L183
1102:bluetooth_rxtx.c **** 				do_hop = 1;
 4304              		.loc 1 1102 0
 4305 0068 274B     		ldr	r3, .L188+12
 4306 006a 0122     		movs	r2, #1
 4307 006c 1A70     		strb	r2, [r3]
 4308 006e 29E0     		b	.L183
 4309              	.L184:
1103:bluetooth_rxtx.c **** 		}
1104:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
1105:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 4310              		.loc 1 1105 0
 4311 0070 244B     		ldr	r3, .L188+8
 4312 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4313 0074 032B     		cmp	r3, #3
 4314 0076 25D1     		bne	.L183
1106:bluetooth_rxtx.c **** 			// Only hop if connected
1107:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 4315              		.loc 1 1107 0
 4316 0078 214B     		ldr	r3, .L188+4
ARM GAS  /tmp/cctJTvh1.s 			page 95


 4317 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 4318 007c 032B     		cmp	r3, #3
 4319 007e 21D1     		bne	.L183
 4320              		.loc 1 1107 0 is_stmt 0 discriminator 1
 4321 0080 3B68     		ldr	r3, [r7]
 4322 0082 002B     		cmp	r3, #0
 4323 0084 1ED1     		bne	.L183
1108:bluetooth_rxtx.c **** 				--le.interval_timer;
 4324              		.loc 1 1108 0 is_stmt 1
 4325 0086 1E4B     		ldr	r3, .L188+4
 4326 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4327 008a 9BB2     		uxth	r3, r3
 4328 008c 013B     		subs	r3, r3, #1
 4329 008e 9AB2     		uxth	r2, r3
 4330 0090 1B4B     		ldr	r3, .L188+4
 4331 0092 9A83     		strh	r2, [r3, #28]	@ movhi
1109:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 4332              		.loc 1 1109 0
 4333 0094 1A4B     		ldr	r3, .L188+4
 4334 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4335 0098 9BB2     		uxth	r3, r3
 4336 009a 002B     		cmp	r3, #0
 4337 009c 0ED1     		bne	.L186
1110:bluetooth_rxtx.c **** 					do_hop = 1;
 4338              		.loc 1 1110 0
 4339 009e 1A4B     		ldr	r3, .L188+12
 4340 00a0 0122     		movs	r2, #1
 4341 00a2 1A70     		strb	r2, [r3]
1111:bluetooth_rxtx.c **** 					++le.conn_count;
 4342              		.loc 1 1111 0
 4343 00a4 164B     		ldr	r3, .L188+4
 4344 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 4345 00a8 9BB2     		uxth	r3, r3
 4346 00aa 0133     		adds	r3, r3, #1
 4347 00ac 9AB2     		uxth	r2, r3
 4348 00ae 144B     		ldr	r3, .L188+4
 4349 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
1112:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 4350              		.loc 1 1112 0
 4351 00b2 134B     		ldr	r3, .L188+4
 4352 00b4 DA8B     		ldrh	r2, [r3, #30]
 4353 00b6 124B     		ldr	r3, .L188+4
 4354 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 4355 00ba 03E0     		b	.L183
 4356              	.L186:
1113:bluetooth_rxtx.c **** 				} else {
1114:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 4357              		.loc 1 1114 0
 4358 00bc 134B     		ldr	r3, .L188+16
 4359 00be 4FF48072 		mov	r2, #256
 4360 00c2 1A60     		str	r2, [r3]
 4361              	.L183:
1115:bluetooth_rxtx.c **** 				}
1116:bluetooth_rxtx.c **** 			}
1117:bluetooth_rxtx.c **** 		}
1118:bluetooth_rxtx.c **** 
1119:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
ARM GAS  /tmp/cctJTvh1.s 			page 96


1120:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 4362              		.loc 1 1120 0
 4363 00c4 7B68     		ldr	r3, [r7, #4]
 4364 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 4365 00ca 002B     		cmp	r3, #0
 4366 00cc 02D1     		bne	.L187
1121:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 4367              		.loc 1 1121 0
 4368 00ce 104B     		ldr	r3, .L188+20
 4369 00d0 0122     		movs	r2, #1
 4370 00d2 1A70     		strb	r2, [r3]
 4371              	.L187:
1122:bluetooth_rxtx.c **** 
1123:bluetooth_rxtx.c **** 		/* Ack interrupt */
1124:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 4372              		.loc 1 1124 0
 4373 00d4 0F4A     		ldr	r2, .L188+24
 4374 00d6 104B     		ldr	r3, .L188+28
 4375 00d8 1B68     		ldr	r3, [r3]
 4376 00da C3F54363 		rsb	r3, r3, #3120
 4377 00de 0433     		adds	r3, r3, #4
 4378 00e0 1360     		str	r3, [r2]
1125:bluetooth_rxtx.c **** 		clock_trim = 0;
 4379              		.loc 1 1125 0
 4380 00e2 0D4B     		ldr	r3, .L188+28
 4381 00e4 0022     		movs	r2, #0
 4382 00e6 1A60     		str	r2, [r3]
1126:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 4383              		.loc 1 1126 0
 4384 00e8 4FF04023 		mov	r3, #1073758208
 4385 00ec 0122     		movs	r2, #1
 4386 00ee 1A60     		str	r2, [r3]
 4387              	.L178:
1127:bluetooth_rxtx.c **** 	}
1128:bluetooth_rxtx.c **** }
 4388              		.loc 1 1128 0
 4389 00f0 0C37     		adds	r7, r7, #12
 4390              		.cfi_def_cfa_offset 4
 4391 00f2 BD46     		mov	sp, r7
 4392              		.cfi_def_cfa_register 13
 4393              		@ sp needed
 4394 00f4 5DF8047B 		ldr	r7, [sp], #4
 4395              		.cfi_restore 7
 4396              		.cfi_def_cfa_offset 0
 4397 00f8 7047     		bx	lr
 4398              	.L189:
 4399 00fa 00BF     		.align	2
 4400              	.L188:
 4401 00fc 00000000 		.word	clkn
 4402 0100 00000000 		.word	le
 4403 0104 00000000 		.word	hop_mode
 4404 0108 00000000 		.word	do_hop
 4405 010c 3CC00920 		.word	537509948
 4406 0110 00000000 		.word	keepalive_trigger
 4407 0114 18400040 		.word	1073758232
 4408 0118 00000000 		.word	clock_trim
 4409              		.cfi_endproc
ARM GAS  /tmp/cctJTvh1.s 			page 97


 4410              	.LFE15:
 4412              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 4413              		.align	2
 4414              		.global	EINT3_IRQHandler
 4415              		.thumb
 4416              		.thumb_func
 4418              	EINT3_IRQHandler:
 4419              	.LFB16:
1129:bluetooth_rxtx.c **** 
1130:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
1131:bluetooth_rxtx.c **** #ifndef TC13BADGE
1132:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
1133:bluetooth_rxtx.c **** void EINT3_IRQHandler()
1134:bluetooth_rxtx.c **** {
 4420              		.loc 1 1134 0
 4421              		.cfi_startproc
 4422              		@ args = 0, pretend = 0, frame = 0
 4423              		@ frame_needed = 1, uses_anonymous_args = 0
 4424              		@ link register save eliminated.
 4425 0000 80B4     		push	{r7}
 4426              		.cfi_def_cfa_offset 4
 4427              		.cfi_offset 7, -4
 4428 0002 00AF     		add	r7, sp, #0
 4429              		.cfi_def_cfa_register 7
1135:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
1136:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 4430              		.loc 1 1136 0
 4431 0004 0B4B     		ldr	r3, .L191
 4432 0006 0422     		movs	r2, #4
 4433 0008 1A60     		str	r2, [r3]
1137:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 4434              		.loc 1 1137 0
 4435 000a 0B4B     		ldr	r3, .L191+4
 4436 000c 0122     		movs	r2, #1
 4437 000e 1A70     		strb	r2, [r3]
1138:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 4438              		.loc 1 1138 0
 4439 0010 0A4B     		ldr	r3, .L191+8
 4440 0012 1B68     		ldr	r3, [r3]
 4441 0014 C3F31303 		ubfx	r3, r3, #0, #20
 4442 0018 40F63542 		movw	r2, #3125
 4443 001c 02FB03F2 		mul	r2, r2, r3
 4444 0020 074B     		ldr	r3, .L191+12
 4445 0022 1B68     		ldr	r3, [r3]
 4446 0024 1344     		add	r3, r3, r2
 4447 0026 074A     		ldr	r2, .L191+16
 4448 0028 1360     		str	r3, [r2]
1139:bluetooth_rxtx.c **** }
 4449              		.loc 1 1139 0
 4450 002a BD46     		mov	sp, r7
 4451              		.cfi_def_cfa_register 13
 4452              		@ sp needed
 4453 002c 5DF8047B 		ldr	r7, [sp], #4
 4454              		.cfi_restore 7
 4455              		.cfi_def_cfa_offset 0
 4456 0030 7047     		bx	lr
 4457              	.L192:
ARM GAS  /tmp/cctJTvh1.s 			page 98


 4458 0032 00BF     		.align	2
 4459              	.L191:
 4460 0034 AC800240 		.word	1073905836
 4461 0038 00000000 		.word	cs_trigger
 4462 003c 00000000 		.word	clkn
 4463 0040 08400040 		.word	1073758216
 4464 0044 00000000 		.word	cs_timestamp
 4465              		.cfi_endproc
 4466              	.LFE16:
 4468              		.global	__aeabi_ui2d
 4469              		.global	__aeabi_dmul
 4470              		.global	__aeabi_ddiv
 4471              		.global	__aeabi_dadd
 4472              		.global	__aeabi_d2uiz
 4473              		.section	.text.msleep,"ax",%progbits
 4474              		.align	2
 4475              		.thumb
 4476              		.thumb_func
 4478              	msleep:
 4479              	.LFB17:
1140:bluetooth_rxtx.c **** #endif // TC13BADGE
1141:bluetooth_rxtx.c **** 
1142:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
1143:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
1144:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
1145:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
1146:bluetooth_rxtx.c **** {
 4480              		.loc 1 1146 0
 4481              		.cfi_startproc
 4482              		@ args = 0, pretend = 0, frame = 16
 4483              		@ frame_needed = 1, uses_anonymous_args = 0
 4484 0000 B0B5     		push	{r4, r5, r7, lr}
 4485              		.cfi_def_cfa_offset 16
 4486              		.cfi_offset 4, -16
 4487              		.cfi_offset 5, -12
 4488              		.cfi_offset 7, -8
 4489              		.cfi_offset 14, -4
 4490 0002 84B0     		sub	sp, sp, #16
 4491              		.cfi_def_cfa_offset 32
 4492 0004 00AF     		add	r7, sp, #0
 4493              		.cfi_def_cfa_register 7
 4494 0006 7860     		str	r0, [r7, #4]
1147:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 4495              		.loc 1 1147 0
 4496 0008 1B4B     		ldr	r3, .L195+8
 4497 000a 1B68     		ldr	r3, [r3]
 4498 000c 1846     		mov	r0, r3
 4499 000e FFF7FEFF 		bl	__aeabi_ui2d
 4500 0012 0446     		mov	r4, r0
 4501 0014 0D46     		mov	r5, r1
 4502 0016 7868     		ldr	r0, [r7, #4]
 4503 0018 FFF7FEFF 		bl	__aeabi_ui2d
 4504 001c 0246     		mov	r2, r0
 4505 001e 0B46     		mov	r3, r1
 4506 0020 1046     		mov	r0, r2
 4507 0022 1946     		mov	r1, r3
 4508 0024 12A3     		adr	r3, .L195
ARM GAS  /tmp/cctJTvh1.s 			page 99


 4509 0026 D3E90023 		ldrd	r2, [r3]
 4510 002a FFF7FEFF 		bl	__aeabi_dmul
 4511 002e 0246     		mov	r2, r0
 4512 0030 0B46     		mov	r3, r1
 4513 0032 1046     		mov	r0, r2
 4514 0034 1946     		mov	r1, r3
 4515 0036 4FF00002 		mov	r2, #0
 4516 003a 104B     		ldr	r3, .L195+12
 4517 003c FFF7FEFF 		bl	__aeabi_ddiv
 4518 0040 0246     		mov	r2, r0
 4519 0042 0B46     		mov	r3, r1
 4520 0044 2046     		mov	r0, r4
 4521 0046 2946     		mov	r1, r5
 4522 0048 FFF7FEFF 		bl	__aeabi_dadd
 4523 004c 0246     		mov	r2, r0
 4524 004e 0B46     		mov	r3, r1
 4525 0050 1046     		mov	r0, r2
 4526 0052 1946     		mov	r1, r3
 4527 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 4528 0058 0346     		mov	r3, r0
 4529 005a FB60     		str	r3, [r7, #12]
 4530              	.L194:
1148:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 4531              		.loc 1 1148 0 discriminator 1
 4532 005c 064B     		ldr	r3, .L195+8
 4533 005e 1A68     		ldr	r2, [r3]
 4534 0060 FB68     		ldr	r3, [r7, #12]
 4535 0062 9A42     		cmp	r2, r3
 4536 0064 FAD3     		bcc	.L194
1149:bluetooth_rxtx.c **** }
 4537              		.loc 1 1149 0
 4538 0066 1037     		adds	r7, r7, #16
 4539              		.cfi_def_cfa_offset 16
 4540 0068 BD46     		mov	sp, r7
 4541              		.cfi_def_cfa_register 13
 4542              		@ sp needed
 4543 006a B0BD     		pop	{r4, r5, r7, pc}
 4544              	.L196:
 4545 006c AFF30080 		.align	3
 4546              	.L195:
 4547 0070 00000000 		.word	0
 4548 0074 00887340 		.word	1081313280
 4549 0078 00000000 		.word	clkn
 4550 007c 00408F40 		.word	1083129856
 4551              		.cfi_endproc
 4552              	.LFE17:
 4554              		.section	.text.dma_init,"ax",%progbits
 4555              		.align	2
 4556              		.thumb
 4557              		.thumb_func
 4559              	dma_init:
 4560              	.LFB18:
1150:bluetooth_rxtx.c **** 
1151:bluetooth_rxtx.c **** static void dma_init()
1152:bluetooth_rxtx.c **** {
 4561              		.loc 1 1152 0
 4562              		.cfi_startproc
ARM GAS  /tmp/cctJTvh1.s 			page 100


 4563              		@ args = 0, pretend = 0, frame = 0
 4564              		@ frame_needed = 1, uses_anonymous_args = 0
 4565              		@ link register save eliminated.
 4566 0000 80B4     		push	{r7}
 4567              		.cfi_def_cfa_offset 4
 4568              		.cfi_offset 7, -4
 4569 0002 00AF     		add	r7, sp, #0
 4570              		.cfi_def_cfa_register 7
1153:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1154:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4571              		.loc 1 1154 0
 4572 0004 3F4A     		ldr	r2, .L199
 4573 0006 3F4B     		ldr	r3, .L199
 4574 0008 1B68     		ldr	r3, [r3]
 4575 000a 43F00053 		orr	r3, r3, #536870912
 4576 000e 1360     		str	r3, [r2]
1155:bluetooth_rxtx.c **** 
1156:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1157:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4577              		.loc 1 1157 0
 4578 0010 3D4B     		ldr	r3, .L199+4
 4579 0012 0022     		movs	r2, #0
 4580 0014 1A60     		str	r2, [r3]
1158:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4581              		.loc 1 1158 0
 4582 0016 3D4B     		ldr	r3, .L199+8
 4583 0018 0022     		movs	r2, #0
 4584 001a 1A60     		str	r2, [r3]
1159:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4585              		.loc 1 1159 0
 4586 001c 3C4B     		ldr	r3, .L199+12
 4587 001e 0022     		movs	r2, #0
 4588 0020 1A60     		str	r2, [r3]
1160:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4589              		.loc 1 1160 0
 4590 0022 3C4B     		ldr	r3, .L199+16
 4591 0024 0022     		movs	r2, #0
 4592 0026 1A60     		str	r2, [r3]
1161:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4593              		.loc 1 1161 0
 4594 0028 3B4B     		ldr	r3, .L199+20
 4595 002a 0022     		movs	r2, #0
 4596 002c 1A60     		str	r2, [r3]
1162:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4597              		.loc 1 1162 0
 4598 002e 3B4B     		ldr	r3, .L199+24
 4599 0030 0022     		movs	r2, #0
 4600 0032 1A60     		str	r2, [r3]
1163:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4601              		.loc 1 1163 0
 4602 0034 3A4B     		ldr	r3, .L199+28
 4603 0036 0022     		movs	r2, #0
 4604 0038 1A60     		str	r2, [r3]
1164:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4605              		.loc 1 1164 0
 4606 003a 3A4B     		ldr	r3, .L199+32
 4607 003c 0022     		movs	r2, #0
ARM GAS  /tmp/cctJTvh1.s 			page 101


 4608 003e 1A60     		str	r2, [r3]
1165:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4609              		.loc 1 1165 0
 4610 0040 394B     		ldr	r3, .L199+36
 4611 0042 FF22     		movs	r2, #255
 4612 0044 1A60     		str	r2, [r3]
1166:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4613              		.loc 1 1166 0
 4614 0046 394B     		ldr	r3, .L199+40
 4615 0048 FF22     		movs	r2, #255
 4616 004a 1A60     		str	r2, [r3]
1167:bluetooth_rxtx.c **** 
1168:bluetooth_rxtx.c **** 	/* DMA linked lists */
1169:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4617              		.loc 1 1169 0
 4618 004c 384B     		ldr	r3, .L199+44
 4619 004e 394A     		ldr	r2, .L199+48
 4620 0050 1A60     		str	r2, [r3]
1170:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4621              		.loc 1 1170 0
 4622 0052 394A     		ldr	r2, .L199+52
 4623 0054 364B     		ldr	r3, .L199+44
 4624 0056 5A60     		str	r2, [r3, #4]
1171:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4625              		.loc 1 1171 0
 4626 0058 384A     		ldr	r2, .L199+56
 4627 005a 354B     		ldr	r3, .L199+44
 4628 005c 9A60     		str	r2, [r3, #8]
1172:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4629              		.loc 1 1172 0
 4630 005e 344B     		ldr	r3, .L199+44
 4631 0060 374A     		ldr	r2, .L199+60
 4632 0062 DA60     		str	r2, [r3, #12]
1173:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1174:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1175:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1176:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1177:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1178:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1179:bluetooth_rxtx.c **** 
1180:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4633              		.loc 1 1180 0
 4634 0064 354B     		ldr	r3, .L199+56
 4635 0066 334A     		ldr	r2, .L199+48
 4636 0068 1A60     		str	r2, [r3]
1181:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4637              		.loc 1 1181 0
 4638 006a 364A     		ldr	r2, .L199+64
 4639 006c 334B     		ldr	r3, .L199+56
 4640 006e 5A60     		str	r2, [r3, #4]
1182:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4641              		.loc 1 1182 0
 4642 0070 2F4A     		ldr	r2, .L199+44
 4643 0072 324B     		ldr	r3, .L199+56
 4644 0074 9A60     		str	r2, [r3, #8]
1183:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4645              		.loc 1 1183 0
ARM GAS  /tmp/cctJTvh1.s 			page 102


 4646 0076 314B     		ldr	r3, .L199+56
 4647 0078 314A     		ldr	r2, .L199+60
 4648 007a DA60     		str	r2, [r3, #12]
1184:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1185:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1186:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1187:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1188:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1189:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1190:bluetooth_rxtx.c **** 
1191:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
1192:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4649              		.loc 1 1192 0
 4650 007c 324B     		ldr	r3, .L199+68
 4651 007e 4FF08062 		mov	r2, #67108864
 4652 0082 1A60     		str	r2, [r3]
1193:bluetooth_rxtx.c **** 
1194:bluetooth_rxtx.c **** 	/* enable DMA globally */
1195:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4653              		.loc 1 1195 0
 4654 0084 314B     		ldr	r3, .L199+72
 4655 0086 0122     		movs	r2, #1
 4656 0088 1A60     		str	r2, [r3]
1196:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4657              		.loc 1 1196 0
 4658 008a 00BF     		nop
 4659              	.L198:
 4660              		.loc 1 1196 0 is_stmt 0 discriminator 1
 4661 008c 2F4B     		ldr	r3, .L199+72
 4662 008e 1B68     		ldr	r3, [r3]
 4663 0090 03F00103 		and	r3, r3, #1
 4664 0094 002B     		cmp	r3, #0
 4665 0096 F9D0     		beq	.L198
1197:bluetooth_rxtx.c **** 
1198:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
1199:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4666              		.loc 1 1199 0 is_stmt 1
 4667 0098 2D4A     		ldr	r2, .L199+76
 4668 009a 254B     		ldr	r3, .L199+44
 4669 009c 1B68     		ldr	r3, [r3]
 4670 009e 1360     		str	r3, [r2]
1200:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4671              		.loc 1 1200 0
 4672 00a0 2C4A     		ldr	r2, .L199+80
 4673 00a2 234B     		ldr	r3, .L199+44
 4674 00a4 5B68     		ldr	r3, [r3, #4]
 4675 00a6 1360     		str	r3, [r2]
1201:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4676              		.loc 1 1201 0
 4677 00a8 2B4A     		ldr	r2, .L199+84
 4678 00aa 214B     		ldr	r3, .L199+44
 4679 00ac 9B68     		ldr	r3, [r3, #8]
 4680 00ae 1360     		str	r3, [r2]
1202:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4681              		.loc 1 1202 0
 4682 00b0 2A4A     		ldr	r2, .L199+88
 4683 00b2 1F4B     		ldr	r3, .L199+44
ARM GAS  /tmp/cctJTvh1.s 			page 103


 4684 00b4 DB68     		ldr	r3, [r3, #12]
 4685 00b6 1360     		str	r3, [r2]
1203:bluetooth_rxtx.c **** 	DMACC0Config =
 4686              		.loc 1 1203 0
 4687 00b8 134B     		ldr	r3, .L199+4
 4688 00ba 4DF20602 		movw	r2, #53254
 4689 00be 1A60     		str	r2, [r3]
1204:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1205:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1206:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1207:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1208:bluetooth_rxtx.c **** 
1209:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4690              		.loc 1 1209 0
 4691 00c0 274B     		ldr	r3, .L199+92
 4692 00c2 1B68     		ldr	r3, [r3]
 4693 00c4 1B0D     		lsrs	r3, r3, #20
 4694 00c6 DBB2     		uxtb	r3, r3
 4695 00c8 264A     		ldr	r2, .L199+96
 4696 00ca 1360     		str	r3, [r2]
1210:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4697              		.loc 1 1210 0
 4698 00cc 244B     		ldr	r3, .L199+92
 4699 00ce 1B68     		ldr	r3, [r3]
 4700 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4701 00d4 40F63542 		movw	r2, #3125
 4702 00d8 02FB03F2 		mul	r2, r2, r3
 4703 00dc 224B     		ldr	r3, .L199+100
 4704 00de 1B68     		ldr	r3, [r3]
 4705 00e0 1344     		add	r3, r3, r2
 4706 00e2 224A     		ldr	r2, .L199+104
 4707 00e4 1360     		str	r3, [r2]
1211:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4708              		.loc 1 1211 0
 4709 00e6 224B     		ldr	r3, .L199+108
 4710 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4711 00ea 9AB2     		uxth	r2, r3
 4712 00ec 214B     		ldr	r3, .L199+112
 4713 00ee 1A80     		strh	r2, [r3]	@ movhi
1212:bluetooth_rxtx.c **** 
1213:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1214:bluetooth_rxtx.c **** 	rx_tc = 0;
 4714              		.loc 1 1214 0
 4715 00f0 214B     		ldr	r3, .L199+116
 4716 00f2 0022     		movs	r2, #0
 4717 00f4 1A60     		str	r2, [r3]
1215:bluetooth_rxtx.c **** 	rx_err = 0;
 4718              		.loc 1 1215 0
 4719 00f6 214B     		ldr	r3, .L199+120
 4720 00f8 0022     		movs	r2, #0
 4721 00fa 1A60     		str	r2, [r3]
1216:bluetooth_rxtx.c **** }
 4722              		.loc 1 1216 0
 4723 00fc BD46     		mov	sp, r7
 4724              		.cfi_def_cfa_register 13
 4725              		@ sp needed
 4726 00fe 5DF8047B 		ldr	r7, [sp], #4
ARM GAS  /tmp/cctJTvh1.s 			page 104


 4727              		.cfi_restore 7
 4728              		.cfi_def_cfa_offset 0
 4729 0102 7047     		bx	lr
 4730              	.L200:
 4731              		.align	2
 4732              	.L199:
 4733 0104 C4C00F40 		.word	1074774212
 4734 0108 10410050 		.word	1342193936
 4735 010c 30410050 		.word	1342193968
 4736 0110 50410050 		.word	1342194000
 4737 0114 70410050 		.word	1342194032
 4738 0118 90410050 		.word	1342194064
 4739 011c B0410050 		.word	1342194096
 4740 0120 D0410050 		.word	1342194128
 4741 0124 F0410050 		.word	1342194160
 4742 0128 08400050 		.word	1342193672
 4743 012c 10400050 		.word	1342193680
 4744 0130 00000000 		.word	rx_dma_lli1
 4745 0134 08000340 		.word	1073938440
 4746 0138 00000000 		.word	rxbuf1
 4747 013c 00000000 		.word	rx_dma_lli2
 4748 0140 32900088 		.word	-2013229006
 4749 0144 00000000 		.word	rxbuf2
 4750 0148 80E100E0 		.word	-536813184
 4751 014c 30400050 		.word	1342193712
 4752 0150 00410050 		.word	1342193920
 4753 0154 04410050 		.word	1342193924
 4754 0158 08410050 		.word	1342193928
 4755 015c 0C410050 		.word	1342193932
 4756 0160 00000000 		.word	clkn
 4757 0164 00000000 		.word	active_buf_clkn_high
 4758 0168 08400040 		.word	1073758216
 4759 016c 00000000 		.word	active_buf_clk100ns
 4760 0170 00000000 		.word	channel
 4761 0174 00000000 		.word	active_buf_channel
 4762 0178 00000000 		.word	rx_tc
 4763 017c 00000000 		.word	rx_err
 4764              		.cfi_endproc
 4765              	.LFE18:
 4767              		.section	.text.dma_init_le,"ax",%progbits
 4768              		.align	2
 4769              		.thumb
 4770              		.thumb_func
 4772              	dma_init_le:
 4773              	.LFB19:
1217:bluetooth_rxtx.c **** 
1218:bluetooth_rxtx.c **** static void dma_init_le()
1219:bluetooth_rxtx.c **** {
 4774              		.loc 1 1219 0
 4775              		.cfi_startproc
 4776              		@ args = 0, pretend = 0, frame = 8
 4777              		@ frame_needed = 1, uses_anonymous_args = 0
 4778              		@ link register save eliminated.
 4779 0000 80B4     		push	{r7}
 4780              		.cfi_def_cfa_offset 4
 4781              		.cfi_offset 7, -4
 4782 0002 83B0     		sub	sp, sp, #12
ARM GAS  /tmp/cctJTvh1.s 			page 105


 4783              		.cfi_def_cfa_offset 16
 4784 0004 00AF     		add	r7, sp, #0
 4785              		.cfi_def_cfa_register 7
1220:bluetooth_rxtx.c **** 	int i;
1221:bluetooth_rxtx.c **** 
1222:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1223:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4786              		.loc 1 1223 0
 4787 0006 4B4A     		ldr	r2, .L207
 4788 0008 4A4B     		ldr	r3, .L207
 4789 000a 1B68     		ldr	r3, [r3]
 4790 000c 43F00053 		orr	r3, r3, #536870912
 4791 0010 1360     		str	r3, [r2]
1224:bluetooth_rxtx.c **** 
1225:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1226:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4792              		.loc 1 1226 0
 4793 0012 494B     		ldr	r3, .L207+4
 4794 0014 0022     		movs	r2, #0
 4795 0016 1A60     		str	r2, [r3]
1227:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4796              		.loc 1 1227 0
 4797 0018 484B     		ldr	r3, .L207+8
 4798 001a 0022     		movs	r2, #0
 4799 001c 1A60     		str	r2, [r3]
1228:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4800              		.loc 1 1228 0
 4801 001e 484B     		ldr	r3, .L207+12
 4802 0020 0022     		movs	r2, #0
 4803 0022 1A60     		str	r2, [r3]
1229:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4804              		.loc 1 1229 0
 4805 0024 474B     		ldr	r3, .L207+16
 4806 0026 0022     		movs	r2, #0
 4807 0028 1A60     		str	r2, [r3]
1230:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4808              		.loc 1 1230 0
 4809 002a 474B     		ldr	r3, .L207+20
 4810 002c 0022     		movs	r2, #0
 4811 002e 1A60     		str	r2, [r3]
1231:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4812              		.loc 1 1231 0
 4813 0030 464B     		ldr	r3, .L207+24
 4814 0032 0022     		movs	r2, #0
 4815 0034 1A60     		str	r2, [r3]
1232:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4816              		.loc 1 1232 0
 4817 0036 464B     		ldr	r3, .L207+28
 4818 0038 0022     		movs	r2, #0
 4819 003a 1A60     		str	r2, [r3]
1233:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4820              		.loc 1 1233 0
 4821 003c 454B     		ldr	r3, .L207+32
 4822 003e 0022     		movs	r2, #0
 4823 0040 1A60     		str	r2, [r3]
1234:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4824              		.loc 1 1234 0
ARM GAS  /tmp/cctJTvh1.s 			page 106


 4825 0042 454B     		ldr	r3, .L207+36
 4826 0044 FF22     		movs	r2, #255
 4827 0046 1A60     		str	r2, [r3]
1235:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4828              		.loc 1 1235 0
 4829 0048 444B     		ldr	r3, .L207+40
 4830 004a FF22     		movs	r2, #255
 4831 004c 1A60     		str	r2, [r3]
1236:bluetooth_rxtx.c **** 
1237:bluetooth_rxtx.c **** 	/* enable DMA globally */
1238:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4832              		.loc 1 1238 0
 4833 004e 444B     		ldr	r3, .L207+44
 4834 0050 0122     		movs	r2, #1
 4835 0052 1A60     		str	r2, [r3]
1239:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4836              		.loc 1 1239 0
 4837 0054 00BF     		nop
 4838              	.L202:
 4839              		.loc 1 1239 0 is_stmt 0 discriminator 1
 4840 0056 424B     		ldr	r3, .L207+44
 4841 0058 1B68     		ldr	r3, [r3]
 4842 005a 03F00103 		and	r3, r3, #1
 4843 005e 002B     		cmp	r3, #0
 4844 0060 F9D0     		beq	.L202
1240:bluetooth_rxtx.c **** 
1241:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4845              		.loc 1 1241 0 is_stmt 1
 4846 0062 0023     		movs	r3, #0
 4847 0064 7B60     		str	r3, [r7, #4]
 4848 0066 2AE0     		b	.L203
 4849              	.L206:
1242:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4850              		.loc 1 1242 0
 4851 0068 3E4A     		ldr	r2, .L207+48
 4852 006a 7B68     		ldr	r3, [r7, #4]
 4853 006c 1B01     		lsls	r3, r3, #4
 4854 006e 1344     		add	r3, r3, r2
 4855 0070 3D4A     		ldr	r2, .L207+52
 4856 0072 1A60     		str	r2, [r3]
1243:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4857              		.loc 1 1243 0
 4858 0074 7B68     		ldr	r3, [r7, #4]
 4859 0076 9B00     		lsls	r3, r3, #2
 4860 0078 3C4A     		ldr	r2, .L207+56
 4861 007a 1344     		add	r3, r3, r2
 4862 007c 1946     		mov	r1, r3
 4863 007e 394A     		ldr	r2, .L207+48
 4864 0080 7B68     		ldr	r3, [r7, #4]
 4865 0082 1B01     		lsls	r3, r3, #4
 4866 0084 1344     		add	r3, r3, r2
 4867 0086 5960     		str	r1, [r3, #4]
1244:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4868              		.loc 1 1244 0
 4869 0088 7B68     		ldr	r3, [r7, #4]
 4870 008a 092B     		cmp	r3, #9
 4871 008c 06DC     		bgt	.L204
ARM GAS  /tmp/cctJTvh1.s 			page 107


 4872              		.loc 1 1244 0 is_stmt 0 discriminator 1
 4873 008e 7B68     		ldr	r3, [r7, #4]
 4874 0090 0133     		adds	r3, r3, #1
 4875 0092 1B01     		lsls	r3, r3, #4
 4876 0094 334A     		ldr	r2, .L207+48
 4877 0096 1344     		add	r3, r3, r2
 4878 0098 1A46     		mov	r2, r3
 4879 009a 00E0     		b	.L205
 4880              	.L204:
 4881              		.loc 1 1244 0 discriminator 2
 4882 009c 0022     		movs	r2, #0
 4883              	.L205:
 4884              		.loc 1 1244 0 discriminator 4
 4885 009e 3149     		ldr	r1, .L207+48
 4886 00a0 7B68     		ldr	r3, [r7, #4]
 4887 00a2 1B01     		lsls	r3, r3, #4
 4888 00a4 0B44     		add	r3, r3, r1
 4889 00a6 0833     		adds	r3, r3, #8
 4890 00a8 1A60     		str	r2, [r3]
1245:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4891              		.loc 1 1245 0 is_stmt 1 discriminator 4
 4892 00aa 2E4A     		ldr	r2, .L207+48
 4893 00ac 7B68     		ldr	r3, [r7, #4]
 4894 00ae 1B01     		lsls	r3, r3, #4
 4895 00b0 1344     		add	r3, r3, r2
 4896 00b2 0833     		adds	r3, r3, #8
 4897 00b4 2E4A     		ldr	r2, .L207+60
 4898 00b6 5A60     		str	r2, [r3, #4]
1241:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4899              		.loc 1 1241 0 discriminator 4
 4900 00b8 7B68     		ldr	r3, [r7, #4]
 4901 00ba 0133     		adds	r3, r3, #1
 4902 00bc 7B60     		str	r3, [r7, #4]
 4903              	.L203:
1241:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4904              		.loc 1 1241 0 is_stmt 0 discriminator 2
 4905 00be 7B68     		ldr	r3, [r7, #4]
 4906 00c0 0A2B     		cmp	r3, #10
 4907 00c2 D1DD     		ble	.L206
1246:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1247:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1248:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1249:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1250:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1251:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1252:bluetooth_rxtx.c **** 	}
1253:bluetooth_rxtx.c **** 
1254:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1255:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4908              		.loc 1 1255 0 is_stmt 1
 4909 00c4 2B4A     		ldr	r2, .L207+64
 4910 00c6 274B     		ldr	r3, .L207+48
 4911 00c8 1B68     		ldr	r3, [r3]
 4912 00ca 1360     		str	r3, [r2]
1256:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4913              		.loc 1 1256 0
 4914 00cc 2A4A     		ldr	r2, .L207+68
ARM GAS  /tmp/cctJTvh1.s 			page 108


 4915 00ce 254B     		ldr	r3, .L207+48
 4916 00d0 5B68     		ldr	r3, [r3, #4]
 4917 00d2 1360     		str	r3, [r2]
1257:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4918              		.loc 1 1257 0
 4919 00d4 294A     		ldr	r2, .L207+72
 4920 00d6 234B     		ldr	r3, .L207+48
 4921 00d8 9B68     		ldr	r3, [r3, #8]
 4922 00da 1360     		str	r3, [r2]
1258:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4923              		.loc 1 1258 0
 4924 00dc 284A     		ldr	r2, .L207+76
 4925 00de 214B     		ldr	r3, .L207+48
 4926 00e0 DB68     		ldr	r3, [r3, #12]
 4927 00e2 1360     		str	r3, [r2]
1259:bluetooth_rxtx.c **** 	DMACC0Config =
 4928              		.loc 1 1259 0
 4929 00e4 144B     		ldr	r3, .L207+4
 4930 00e6 4DF20602 		movw	r2, #53254
 4931 00ea 1A60     		str	r2, [r3]
1260:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1261:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1262:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1263:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1264:bluetooth_rxtx.c **** 
1265:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4932              		.loc 1 1265 0
 4933 00ec 254B     		ldr	r3, .L207+80
 4934 00ee 1B68     		ldr	r3, [r3]
 4935 00f0 1B0D     		lsrs	r3, r3, #20
 4936 00f2 DBB2     		uxtb	r3, r3
 4937 00f4 244A     		ldr	r2, .L207+84
 4938 00f6 1360     		str	r3, [r2]
1266:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4939              		.loc 1 1266 0
 4940 00f8 224B     		ldr	r3, .L207+80
 4941 00fa 1B68     		ldr	r3, [r3]
 4942 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4943 0100 40F63542 		movw	r2, #3125
 4944 0104 02FB03F2 		mul	r2, r2, r3
 4945 0108 204B     		ldr	r3, .L207+88
 4946 010a 1B68     		ldr	r3, [r3]
 4947 010c 1344     		add	r3, r3, r2
 4948 010e 204A     		ldr	r2, .L207+92
 4949 0110 1360     		str	r3, [r2]
1267:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4950              		.loc 1 1267 0
 4951 0112 204B     		ldr	r3, .L207+96
 4952 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4953 0116 9AB2     		uxth	r2, r3
 4954 0118 1F4B     		ldr	r3, .L207+100
 4955 011a 1A80     		strh	r2, [r3]	@ movhi
1268:bluetooth_rxtx.c **** 
1269:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1270:bluetooth_rxtx.c **** 	rx_tc = 0;
 4956              		.loc 1 1270 0
 4957 011c 1F4B     		ldr	r3, .L207+104
ARM GAS  /tmp/cctJTvh1.s 			page 109


 4958 011e 0022     		movs	r2, #0
 4959 0120 1A60     		str	r2, [r3]
1271:bluetooth_rxtx.c **** 	rx_err = 0;
 4960              		.loc 1 1271 0
 4961 0122 1F4B     		ldr	r3, .L207+108
 4962 0124 0022     		movs	r2, #0
 4963 0126 1A60     		str	r2, [r3]
1272:bluetooth_rxtx.c **** }
 4964              		.loc 1 1272 0
 4965 0128 0C37     		adds	r7, r7, #12
 4966              		.cfi_def_cfa_offset 4
 4967 012a BD46     		mov	sp, r7
 4968              		.cfi_def_cfa_register 13
 4969              		@ sp needed
 4970 012c 5DF8047B 		ldr	r7, [sp], #4
 4971              		.cfi_restore 7
 4972              		.cfi_def_cfa_offset 0
 4973 0130 7047     		bx	lr
 4974              	.L208:
 4975 0132 00BF     		.align	2
 4976              	.L207:
 4977 0134 C4C00F40 		.word	1074774212
 4978 0138 10410050 		.word	1342193936
 4979 013c 30410050 		.word	1342193968
 4980 0140 50410050 		.word	1342194000
 4981 0144 70410050 		.word	1342194032
 4982 0148 90410050 		.word	1342194064
 4983 014c B0410050 		.word	1342194096
 4984 0150 D0410050 		.word	1342194128
 4985 0154 F0410050 		.word	1342194160
 4986 0158 08400050 		.word	1342193672
 4987 015c 10400050 		.word	1342193680
 4988 0160 30400050 		.word	1342193712
 4989 0164 00000000 		.word	le_dma_lli
 4990 0168 08000340 		.word	1073938440
 4991 016c 00000000 		.word	rxbuf1
 4992 0170 04100088 		.word	-2013261820
 4993 0174 00410050 		.word	1342193920
 4994 0178 04410050 		.word	1342193924
 4995 017c 08410050 		.word	1342193928
 4996 0180 0C410050 		.word	1342193932
 4997 0184 00000000 		.word	clkn
 4998 0188 00000000 		.word	active_buf_clkn_high
 4999 018c 08400040 		.word	1073758216
 5000 0190 00000000 		.word	active_buf_clk100ns
 5001 0194 00000000 		.word	channel
 5002 0198 00000000 		.word	active_buf_channel
 5003 019c 00000000 		.word	rx_tc
 5004 01a0 00000000 		.word	rx_err
 5005              		.cfi_endproc
 5006              	.LFE19:
 5008              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 5009              		.align	2
 5010              		.global	bt_stream_dma_handler
 5011              		.thumb
 5012              		.thumb_func
 5014              	bt_stream_dma_handler:
ARM GAS  /tmp/cctJTvh1.s 			page 110


 5015              	.LFB20:
1273:bluetooth_rxtx.c **** 
1274:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 5016              		.loc 1 1274 0
 5017              		.cfi_startproc
 5018              		@ args = 0, pretend = 0, frame = 0
 5019              		@ frame_needed = 1, uses_anonymous_args = 0
 5020              		@ link register save eliminated.
 5021 0000 80B4     		push	{r7}
 5022              		.cfi_def_cfa_offset 4
 5023              		.cfi_offset 7, -4
 5024 0002 00AF     		add	r7, sp, #0
 5025              		.cfi_def_cfa_register 7
1275:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 5026              		.loc 1 1275 0
 5027 0004 254B     		ldr	r3, .L212
 5028 0006 1B68     		ldr	r3, [r3]
 5029 0008 254A     		ldr	r2, .L212+4
 5030 000a 1360     		str	r3, [r2]
1276:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 5031              		.loc 1 1276 0
 5032 000c 254B     		ldr	r3, .L212+8
 5033 000e 1B68     		ldr	r3, [r3]
 5034 0010 1B0D     		lsrs	r3, r3, #20
 5035 0012 DBB2     		uxtb	r3, r3
 5036 0014 214A     		ldr	r2, .L212
 5037 0016 1360     		str	r3, [r2]
1277:bluetooth_rxtx.c **** 
1278:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 5038              		.loc 1 1278 0
 5039 0018 234B     		ldr	r3, .L212+12
 5040 001a 1B68     		ldr	r3, [r3]
 5041 001c 234A     		ldr	r2, .L212+16
 5042 001e 1360     		str	r3, [r2]
1279:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 5043              		.loc 1 1279 0
 5044 0020 204B     		ldr	r3, .L212+8
 5045 0022 1B68     		ldr	r3, [r3]
 5046 0024 C3F31303 		ubfx	r3, r3, #0, #20
 5047 0028 40F63542 		movw	r2, #3125
 5048 002c 02FB03F2 		mul	r2, r2, r3
 5049 0030 1F4B     		ldr	r3, .L212+20
 5050 0032 1B68     		ldr	r3, [r3]
 5051 0034 1344     		add	r3, r3, r2
 5052 0036 1C4A     		ldr	r2, .L212+12
 5053 0038 1360     		str	r3, [r2]
1280:bluetooth_rxtx.c **** 
1281:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 5054              		.loc 1 1281 0
 5055 003a 1E4B     		ldr	r3, .L212+24
 5056 003c 1B88     		ldrh	r3, [r3]	@ movhi
 5057 003e 9AB2     		uxth	r2, r3
 5058 0040 1D4B     		ldr	r3, .L212+28
 5059 0042 1A80     		strh	r2, [r3]	@ movhi
1282:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 5060              		.loc 1 1282 0
 5061 0044 1D4B     		ldr	r3, .L212+32
ARM GAS  /tmp/cctJTvh1.s 			page 111


 5062 0046 1B88     		ldrh	r3, [r3]	@ movhi
 5063 0048 9AB2     		uxth	r2, r3
 5064 004a 1A4B     		ldr	r3, .L212+24
 5065 004c 1A80     		strh	r2, [r3]	@ movhi
1283:bluetooth_rxtx.c **** 
1284:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1285:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 5066              		.loc 1 1285 0
 5067 004e 1C4B     		ldr	r3, .L212+36
 5068 0050 1B68     		ldr	r3, [r3]
 5069 0052 03F00103 		and	r3, r3, #1
 5070 0056 002B     		cmp	r3, #0
 5071 0058 1BD0     		beq	.L209
1286:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 5072              		.loc 1 1286 0
 5073 005a 1A4B     		ldr	r3, .L212+40
 5074 005c 1B68     		ldr	r3, [r3]
 5075 005e 03F00103 		and	r3, r3, #1
 5076 0062 002B     		cmp	r3, #0
 5077 0064 07D0     		beq	.L211
1287:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 5078              		.loc 1 1287 0
 5079 0066 184B     		ldr	r3, .L212+44
 5080 0068 0122     		movs	r2, #1
 5081 006a 1A60     		str	r2, [r3]
1288:bluetooth_rxtx.c **** 			++rx_tc;
 5082              		.loc 1 1288 0
 5083 006c 174B     		ldr	r3, .L212+48
 5084 006e 1B68     		ldr	r3, [r3]
 5085 0070 0133     		adds	r3, r3, #1
 5086 0072 164A     		ldr	r2, .L212+48
 5087 0074 1360     		str	r3, [r2]
 5088              	.L211:
1289:bluetooth_rxtx.c **** 		}
1290:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 5089              		.loc 1 1290 0
 5090 0076 164B     		ldr	r3, .L212+52
 5091 0078 1B68     		ldr	r3, [r3]
 5092 007a 03F00103 		and	r3, r3, #1
 5093 007e 002B     		cmp	r3, #0
 5094 0080 07D0     		beq	.L209
1291:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 5095              		.loc 1 1291 0
 5096 0082 144B     		ldr	r3, .L212+56
 5097 0084 0122     		movs	r2, #1
 5098 0086 1A60     		str	r2, [r3]
1292:bluetooth_rxtx.c **** 			++rx_err;
 5099              		.loc 1 1292 0
 5100 0088 134B     		ldr	r3, .L212+60
 5101 008a 1B68     		ldr	r3, [r3]
 5102 008c 0133     		adds	r3, r3, #1
 5103 008e 124A     		ldr	r2, .L212+60
 5104 0090 1360     		str	r3, [r2]
 5105              	.L209:
1293:bluetooth_rxtx.c **** 		}
1294:bluetooth_rxtx.c **** 	}
1295:bluetooth_rxtx.c **** }
ARM GAS  /tmp/cctJTvh1.s 			page 112


 5106              		.loc 1 1295 0
 5107 0092 BD46     		mov	sp, r7
 5108              		.cfi_def_cfa_register 13
 5109              		@ sp needed
 5110 0094 5DF8047B 		ldr	r7, [sp], #4
 5111              		.cfi_restore 7
 5112              		.cfi_def_cfa_offset 0
 5113 0098 7047     		bx	lr
 5114              	.L213:
 5115 009a 00BF     		.align	2
 5116              	.L212:
 5117 009c 00000000 		.word	active_buf_clkn_high
 5118 00a0 00000000 		.word	idle_buf_clkn_high
 5119 00a4 00000000 		.word	clkn
 5120 00a8 00000000 		.word	active_buf_clk100ns
 5121 00ac 00000000 		.word	idle_buf_clk100ns
 5122 00b0 08400040 		.word	1073758216
 5123 00b4 00000000 		.word	active_buf_channel
 5124 00b8 00000000 		.word	idle_buf_channel
 5125 00bc 00000000 		.word	channel
 5126 00c0 00400050 		.word	1342193664
 5127 00c4 04400050 		.word	1342193668
 5128 00c8 08400050 		.word	1342193672
 5129 00cc 00000000 		.word	rx_tc
 5130 00d0 0C400050 		.word	1342193676
 5131 00d4 10400050 		.word	1342193680
 5132 00d8 00000000 		.word	rx_err
 5133              		.cfi_endproc
 5134              	.LFE20:
 5136              		.section	.text.DMA_IRQHandler,"ax",%progbits
 5137              		.align	2
 5138              		.global	DMA_IRQHandler
 5139              		.thumb
 5140              		.thumb_func
 5142              	DMA_IRQHandler:
 5143              	.LFB21:
1296:bluetooth_rxtx.c **** 
1297:bluetooth_rxtx.c **** void DMA_IRQHandler()
1298:bluetooth_rxtx.c **** {
 5144              		.loc 1 1298 0
 5145              		.cfi_startproc
 5146              		@ args = 0, pretend = 0, frame = 0
 5147              		@ frame_needed = 1, uses_anonymous_args = 0
 5148 0000 80B5     		push	{r7, lr}
 5149              		.cfi_def_cfa_offset 8
 5150              		.cfi_offset 7, -8
 5151              		.cfi_offset 14, -4
 5152 0002 00AF     		add	r7, sp, #0
 5153              		.cfi_def_cfa_register 7
1299:bluetooth_rxtx.c **** 	switch (mode) {
 5154              		.loc 1 1299 0
 5155 0004 194B     		ldr	r3, .L218
 5156 0006 1B78     		ldrb	r3, [r3]
 5157 0008 DBB2     		uxtb	r3, r3
 5158 000a 013B     		subs	r3, r3, #1
 5159 000c 122B     		cmp	r3, #18
 5160 000e 2CD8     		bhi	.L214
ARM GAS  /tmp/cctJTvh1.s 			page 113


 5161 0010 01A2     		adr	r2, .L217
 5162 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 5163 0016 00BF     		.p2align 2
 5164              	.L217:
 5165 0018 65000000 		.word	.L216+1
 5166 001c 6B000000 		.word	.L214+1
 5167 0020 6B000000 		.word	.L214+1
 5168 0024 65000000 		.word	.L216+1
 5169 0028 6B000000 		.word	.L214+1
 5170 002c 6B000000 		.word	.L214+1
 5171 0030 6B000000 		.word	.L214+1
 5172 0034 65000000 		.word	.L216+1
 5173 0038 65000000 		.word	.L216+1
 5174 003c 65000000 		.word	.L216+1
 5175 0040 6B000000 		.word	.L214+1
 5176 0044 65000000 		.word	.L216+1
 5177 0048 6B000000 		.word	.L214+1
 5178 004c 65000000 		.word	.L216+1
 5179 0050 6B000000 		.word	.L214+1
 5180 0054 65000000 		.word	.L216+1
 5181 0058 6B000000 		.word	.L214+1
 5182 005c 6B000000 		.word	.L214+1
 5183 0060 65000000 		.word	.L216+1
 5184              		.p2align 1
 5185              	.L216:
1300:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1301:bluetooth_rxtx.c **** 		case MODE_RX_SNIFF:
1302:bluetooth_rxtx.c **** 		case MODE_RX_FREQ:
1303:bluetooth_rxtx.c **** 		case MODE_RX_HOP:
1304:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1305:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1306:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1307:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1308:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1309:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 5186              		.loc 1 1309 0
 5187 0064 FFF7FEFF 		bl	bt_stream_dma_handler
1310:bluetooth_rxtx.c **** 			break;
 5188              		.loc 1 1310 0
 5189 0068 00BF     		nop
 5190              	.L214:
1311:bluetooth_rxtx.c **** 	}
1312:bluetooth_rxtx.c **** }
 5191              		.loc 1 1312 0
 5192 006a 80BD     		pop	{r7, pc}
 5193              	.L219:
 5194              		.align	2
 5195              	.L218:
 5196 006c 00000000 		.word	mode
 5197              		.cfi_endproc
 5198              	.LFE21:
 5200              		.section	.text.dio_ssp_start,"ax",%progbits
 5201              		.align	2
 5202              		.thumb
 5203              		.thumb_func
 5205              	dio_ssp_start:
 5206              	.LFB22:
ARM GAS  /tmp/cctJTvh1.s 			page 114


1313:bluetooth_rxtx.c **** 
1314:bluetooth_rxtx.c **** static void dio_ssp_start()
1315:bluetooth_rxtx.c **** {
 5207              		.loc 1 1315 0
 5208              		.cfi_startproc
 5209              		@ args = 0, pretend = 0, frame = 0
 5210              		@ frame_needed = 1, uses_anonymous_args = 0
 5211              		@ link register save eliminated.
 5212 0000 80B4     		push	{r7}
 5213              		.cfi_def_cfa_offset 4
 5214              		.cfi_offset 7, -4
 5215 0002 00AF     		add	r7, sp, #0
 5216              		.cfi_def_cfa_register 7
1316:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1317:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 5217              		.loc 1 1317 0
 5218 0004 104B     		ldr	r3, .L221
 5219 0006 4FF08052 		mov	r2, #268435456
 5220 000a 1A60     		str	r2, [r3]
1318:bluetooth_rxtx.c **** 
1319:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1320:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 5221              		.loc 1 1320 0
 5222 000c 0F4A     		ldr	r2, .L221+4
 5223 000e 0F4B     		ldr	r3, .L221+4
 5224 0010 1B68     		ldr	r3, [r3]
 5225 0012 43F00103 		orr	r3, r3, #1
 5226 0016 1360     		str	r3, [r2]
1321:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 5227              		.loc 1 1321 0
 5228 0018 0D4A     		ldr	r2, .L221+8
 5229 001a 0D4B     		ldr	r3, .L221+8
 5230 001c 1B68     		ldr	r3, [r3]
 5231 001e 43F00203 		orr	r3, r3, #2
 5232 0022 1360     		str	r3, [r2]
1322:bluetooth_rxtx.c **** 	
1323:bluetooth_rxtx.c **** 	/* enable DMA */
1324:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 5233              		.loc 1 1324 0
 5234 0024 0B4A     		ldr	r2, .L221+12
 5235 0026 0B4B     		ldr	r3, .L221+12
 5236 0028 1B68     		ldr	r3, [r3]
 5237 002a 43F00103 		orr	r3, r3, #1
 5238 002e 1360     		str	r3, [r2]
1325:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 5239              		.loc 1 1325 0
 5240 0030 094B     		ldr	r3, .L221+16
 5241 0032 4FF08062 		mov	r2, #67108864
 5242 0036 1A60     		str	r2, [r3]
1326:bluetooth_rxtx.c **** 
1327:bluetooth_rxtx.c **** 	/* activate slave select pin */
1328:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 5243              		.loc 1 1328 0
 5244 0038 084B     		ldr	r3, .L221+20
 5245 003a 4FF08052 		mov	r2, #268435456
 5246 003e 1A60     		str	r2, [r3]
1329:bluetooth_rxtx.c **** }
ARM GAS  /tmp/cctJTvh1.s 			page 115


 5247              		.loc 1 1329 0
 5248 0040 BD46     		mov	sp, r7
 5249              		.cfi_def_cfa_register 13
 5250              		@ sp needed
 5251 0042 5DF8047B 		ldr	r7, [sp], #4
 5252              		.cfi_restore 7
 5253              		.cfi_def_cfa_offset 0
 5254 0046 7047     		bx	lr
 5255              	.L222:
 5256              		.align	2
 5257              	.L221:
 5258 0048 98C00920 		.word	537510040
 5259 004c 24000340 		.word	1073938468
 5260 0050 04000340 		.word	1073938436
 5261 0054 10410050 		.word	1342193936
 5262 0058 00E100E0 		.word	-536813312
 5263 005c 9CC00920 		.word	537510044
 5264              		.cfi_endproc
 5265              	.LFE22:
 5267              		.section	.text.dio_ssp_stop,"ax",%progbits
 5268              		.align	2
 5269              		.thumb
 5270              		.thumb_func
 5272              	dio_ssp_stop:
 5273              	.LFB23:
1330:bluetooth_rxtx.c **** 
1331:bluetooth_rxtx.c **** static void dio_ssp_stop()
1332:bluetooth_rxtx.c **** {
 5274              		.loc 1 1332 0
 5275              		.cfi_startproc
 5276              		@ args = 0, pretend = 0, frame = 0
 5277              		@ frame_needed = 1, uses_anonymous_args = 0
 5278              		@ link register save eliminated.
 5279 0000 80B4     		push	{r7}
 5280              		.cfi_def_cfa_offset 4
 5281              		.cfi_offset 7, -4
 5282 0002 00AF     		add	r7, sp, #0
 5283              		.cfi_def_cfa_register 7
1333:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1334:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 5284              		.loc 1 1334 0
 5285 0004 214B     		ldr	r3, .L225
 5286 0006 4FF08052 		mov	r2, #268435456
 5287 000a 1A60     		str	r2, [r3]
1335:bluetooth_rxtx.c **** 
1336:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1337:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 5288              		.loc 1 1337 0
 5289 000c 204A     		ldr	r2, .L225+4
 5290 000e 204B     		ldr	r3, .L225+4
 5291 0010 1B68     		ldr	r3, [r3]
 5292 0012 23F00103 		bic	r3, r3, #1
 5293 0016 1360     		str	r3, [r2]
1338:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 5294              		.loc 1 1338 0
 5295 0018 1E4A     		ldr	r2, .L225+8
 5296 001a 1E4B     		ldr	r3, .L225+8
ARM GAS  /tmp/cctJTvh1.s 			page 116


 5297 001c 1B68     		ldr	r3, [r3]
 5298 001e 23F00203 		bic	r3, r3, #2
 5299 0022 1360     		str	r3, [r2]
1339:bluetooth_rxtx.c **** 
1340:bluetooth_rxtx.c **** 
1341:bluetooth_rxtx.c **** 	// disable DMA engine:
1342:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1343:bluetooth_rxtx.c **** 
1344:bluetooth_rxtx.c **** 	// disable DMA interrupts
1345:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 5300              		.loc 1 1345 0
 5301 0024 1C4B     		ldr	r3, .L225+12
 5302 0026 4FF08062 		mov	r2, #67108864
 5303 002a 1A60     		str	r2, [r3]
1346:bluetooth_rxtx.c **** 
1347:bluetooth_rxtx.c **** 	// disable active channels
1348:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 5304              		.loc 1 1348 0
 5305 002c 1B4B     		ldr	r3, .L225+16
 5306 002e 0022     		movs	r2, #0
 5307 0030 1A60     		str	r2, [r3]
1349:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 5308              		.loc 1 1349 0
 5309 0032 1B4B     		ldr	r3, .L225+20
 5310 0034 0022     		movs	r2, #0
 5311 0036 1A60     		str	r2, [r3]
1350:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 5312              		.loc 1 1350 0
 5313 0038 1A4B     		ldr	r3, .L225+24
 5314 003a 0022     		movs	r2, #0
 5315 003c 1A60     		str	r2, [r3]
1351:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 5316              		.loc 1 1351 0
 5317 003e 1A4B     		ldr	r3, .L225+28
 5318 0040 0022     		movs	r2, #0
 5319 0042 1A60     		str	r2, [r3]
1352:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 5320              		.loc 1 1352 0
 5321 0044 194B     		ldr	r3, .L225+32
 5322 0046 0022     		movs	r2, #0
 5323 0048 1A60     		str	r2, [r3]
1353:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 5324              		.loc 1 1353 0
 5325 004a 194B     		ldr	r3, .L225+36
 5326 004c 0022     		movs	r2, #0
 5327 004e 1A60     		str	r2, [r3]
1354:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 5328              		.loc 1 1354 0
 5329 0050 184B     		ldr	r3, .L225+40
 5330 0052 0022     		movs	r2, #0
 5331 0054 1A60     		str	r2, [r3]
1355:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 5332              		.loc 1 1355 0
 5333 0056 184B     		ldr	r3, .L225+44
 5334 0058 0022     		movs	r2, #0
 5335 005a 1A60     		str	r2, [r3]
1356:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
ARM GAS  /tmp/cctJTvh1.s 			page 117


 5336              		.loc 1 1356 0
 5337 005c 174B     		ldr	r3, .L225+48
 5338 005e FF22     		movs	r2, #255
 5339 0060 1A60     		str	r2, [r3]
1357:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 5340              		.loc 1 1357 0
 5341 0062 174B     		ldr	r3, .L225+52
 5342 0064 FF22     		movs	r2, #255
 5343 0066 1A60     		str	r2, [r3]
1358:bluetooth_rxtx.c **** 
1359:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1360:bluetooth_rxtx.c **** 	// register.
1361:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 5344              		.loc 1 1361 0
 5345 0068 164A     		ldr	r2, .L225+56
 5346 006a 164B     		ldr	r3, .L225+56
 5347 006c 1B68     		ldr	r3, [r3]
 5348 006e 23F00103 		bic	r3, r3, #1
 5349 0072 1360     		str	r3, [r2]
1362:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 5350              		.loc 1 1362 0
 5351 0074 00BF     		nop
 5352              	.L224:
 5353              		.loc 1 1362 0 is_stmt 0 discriminator 1
 5354 0076 134B     		ldr	r3, .L225+56
 5355 0078 1B68     		ldr	r3, [r3]
 5356 007a 03F00103 		and	r3, r3, #1
 5357 007e 002B     		cmp	r3, #0
 5358 0080 F9D1     		bne	.L224
1363:bluetooth_rxtx.c **** }
 5359              		.loc 1 1363 0 is_stmt 1
 5360 0082 BD46     		mov	sp, r7
 5361              		.cfi_def_cfa_register 13
 5362              		@ sp needed
 5363 0084 5DF8047B 		ldr	r7, [sp], #4
 5364              		.cfi_restore 7
 5365              		.cfi_def_cfa_offset 0
 5366 0088 7047     		bx	lr
 5367              	.L226:
 5368 008a 00BF     		.align	2
 5369              	.L225:
 5370 008c 98C00920 		.word	537510040
 5371 0090 24000340 		.word	1073938468
 5372 0094 04000340 		.word	1073938436
 5373 0098 80E100E0 		.word	-536813184
 5374 009c 10410050 		.word	1342193936
 5375 00a0 30410050 		.word	1342193968
 5376 00a4 50410050 		.word	1342194000
 5377 00a8 70410050 		.word	1342194032
 5378 00ac 90410050 		.word	1342194064
 5379 00b0 B0410050 		.word	1342194096
 5380 00b4 D0410050 		.word	1342194128
 5381 00b8 F0410050 		.word	1342194160
 5382 00bc 08400050 		.word	1342193672
 5383 00c0 10400050 		.word	1342193680
 5384 00c4 30400050 		.word	1342193712
 5385              		.cfi_endproc
ARM GAS  /tmp/cctJTvh1.s 			page 118


 5386              	.LFE23:
 5388              		.section	.text.cc2400_idle,"ax",%progbits
 5389              		.align	2
 5390              		.thumb
 5391              		.thumb_func
 5393              	cc2400_idle:
 5394              	.LFB24:
1364:bluetooth_rxtx.c **** 
1365:bluetooth_rxtx.c **** static void cc2400_idle()
1366:bluetooth_rxtx.c **** {
 5395              		.loc 1 1366 0
 5396              		.cfi_startproc
 5397              		@ args = 0, pretend = 0, frame = 0
 5398              		@ frame_needed = 1, uses_anonymous_args = 0
 5399 0000 80B5     		push	{r7, lr}
 5400              		.cfi_def_cfa_offset 8
 5401              		.cfi_offset 7, -8
 5402              		.cfi_offset 14, -4
 5403 0002 00AF     		add	r7, sp, #0
 5404              		.cfi_def_cfa_register 7
1367:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5405              		.loc 1 1367 0
 5406 0004 6420     		movs	r0, #100
 5407 0006 FFF7FEFF 		bl	cc2400_strobe
1368:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5408              		.loc 1 1368 0
 5409 000a 00BF     		nop
 5410              	.L228:
 5411              		.loc 1 1368 0 is_stmt 0 discriminator 1
 5412 000c FFF7FEFF 		bl	cc2400_status
 5413 0010 0346     		mov	r3, r0
 5414 0012 03F00403 		and	r3, r3, #4
 5415 0016 002B     		cmp	r3, #0
 5416 0018 F8D1     		bne	.L228
1369:bluetooth_rxtx.c **** 
1370:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1371:bluetooth_rxtx.c **** 	PAEN_CLR;
 5417              		.loc 1 1371 0 is_stmt 1
 5418 001a 0A4B     		ldr	r3, .L229
 5419 001c 8022     		movs	r2, #128
 5420 001e 1A60     		str	r2, [r3]
1372:bluetooth_rxtx.c **** 	HGM_CLR;
 5421              		.loc 1 1372 0
 5422 0020 084B     		ldr	r3, .L229
 5423 0022 4FF48072 		mov	r2, #256
 5424 0026 1A60     		str	r2, [r3]
1373:bluetooth_rxtx.c **** #endif
1374:bluetooth_rxtx.c **** 
1375:bluetooth_rxtx.c **** 	RXLED_CLR;
 5425              		.loc 1 1375 0
 5426 0028 074B     		ldr	r3, .L229+4
 5427 002a 1022     		movs	r2, #16
 5428 002c 1A60     		str	r2, [r3]
1376:bluetooth_rxtx.c **** 	TXLED_CLR;
 5429              		.loc 1 1376 0
 5430 002e 064B     		ldr	r3, .L229+4
 5431 0030 4FF48072 		mov	r2, #256
ARM GAS  /tmp/cctJTvh1.s 			page 119


 5432 0034 1A60     		str	r2, [r3]
1377:bluetooth_rxtx.c **** 	USRLED_CLR;
 5433              		.loc 1 1377 0
 5434 0036 044B     		ldr	r3, .L229+4
 5435 0038 0222     		movs	r2, #2
 5436 003a 1A60     		str	r2, [r3]
1378:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 5437              		.loc 1 1378 0
 5438 003c 034B     		ldr	r3, .L229+8
 5439 003e 0022     		movs	r2, #0
 5440 0040 1A70     		strb	r2, [r3]
1379:bluetooth_rxtx.c **** }
 5441              		.loc 1 1379 0
 5442 0042 80BD     		pop	{r7, pc}
 5443              	.L230:
 5444              		.align	2
 5445              	.L229:
 5446 0044 5CC00920 		.word	537509980
 5447 0048 3CC00920 		.word	537509948
 5448 004c 00000000 		.word	mode
 5449              		.cfi_endproc
 5450              	.LFE24:
 5452              		.section	.text.cc2400_rx,"ax",%progbits
 5453              		.align	2
 5454              		.thumb
 5455              		.thumb_func
 5457              	cc2400_rx:
 5458              	.LFB25:
1380:bluetooth_rxtx.c **** 
1381:bluetooth_rxtx.c **** /* start un-buffered rx */
1382:bluetooth_rxtx.c **** static void cc2400_rx()
1383:bluetooth_rxtx.c **** {
 5459              		.loc 1 1383 0
 5460              		.cfi_startproc
 5461              		@ args = 0, pretend = 0, frame = 8
 5462              		@ frame_needed = 1, uses_anonymous_args = 0
 5463 0000 80B5     		push	{r7, lr}
 5464              		.cfi_def_cfa_offset 8
 5465              		.cfi_offset 7, -8
 5466              		.cfi_offset 14, -4
 5467 0002 82B0     		sub	sp, sp, #8
 5468              		.cfi_def_cfa_offset 16
 5469 0004 00AF     		add	r7, sp, #0
 5470              		.cfi_def_cfa_register 7
1384:bluetooth_rxtx.c **** 	u16 mdmctrl;
1385:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5471              		.loc 1 1385 0
 5472 0006 2A4B     		ldr	r3, .L238
 5473 0008 1B78     		ldrb	r3, [r3]
 5474 000a DBB2     		uxtb	r3, r3
 5475 000c 002B     		cmp	r3, #0
 5476 000e 02D1     		bne	.L232
1386:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5477              		.loc 1 1386 0
 5478 0010 2923     		movs	r3, #41
 5479 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 5480 0014 08E0     		b	.L233
ARM GAS  /tmp/cctJTvh1.s 			page 120


 5481              	.L232:
1387:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5482              		.loc 1 1387 0
 5483 0016 264B     		ldr	r3, .L238
 5484 0018 1B78     		ldrb	r3, [r3]
 5485 001a DBB2     		uxtb	r3, r3
 5486 001c 012B     		cmp	r3, #1
 5487 001e 02D1     		bne	.L234
1388:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5488              		.loc 1 1388 0
 5489 0020 4023     		movs	r3, #64
 5490 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 5491 0024 00E0     		b	.L233
 5492              	.L234:
1389:bluetooth_rxtx.c **** 	} else {
1390:bluetooth_rxtx.c **** 		/* oops */
1391:bluetooth_rxtx.c **** 		return;
 5493              		.loc 1 1391 0
 5494 0026 40E0     		b	.L231
 5495              	.L233:
1392:bluetooth_rxtx.c **** 	}
1393:bluetooth_rxtx.c **** 
1394:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5496              		.loc 1 1394 0
 5497 0028 0D20     		movs	r0, #13
 5498 002a 47F6FF71 		movw	r1, #32767
 5499 002e FFF7FEFF 		bl	cc2400_set
1395:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5500              		.loc 1 1395 0
 5501 0032 1220     		movs	r0, #18
 5502 0034 42F62231 		movw	r1, #11042
 5503 0038 FFF7FEFF 		bl	cc2400_set
1396:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 5504              		.loc 1 1396 0
 5505 003c 1420     		movs	r0, #20
 5506 003e 41F24B31 		movw	r1, #4939
 5507 0042 FFF7FEFF 		bl	cc2400_set
1397:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 5508              		.loc 1 1397 0
 5509 0046 2020     		movs	r0, #32
 5510 0048 40F20111 		movw	r1, #257
 5511 004c FFF7FEFF 		bl	cc2400_set
1398:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1399:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1400:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1401:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1402:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1403:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1404:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5512              		.loc 1 1404 0
 5513 0050 184B     		ldr	r3, .L238+4
 5514 0052 1B88     		ldrh	r3, [r3]	@ movhi
 5515 0054 9BB2     		uxth	r3, r3
 5516 0056 013B     		subs	r3, r3, #1
 5517 0058 9BB2     		uxth	r3, r3
 5518 005a 0220     		movs	r0, #2
 5519 005c 1946     		mov	r1, r3
ARM GAS  /tmp/cctJTvh1.s 			page 121


 5520 005e FFF7FEFF 		bl	cc2400_set
1405:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5521              		.loc 1 1405 0
 5522 0062 FB88     		ldrh	r3, [r7, #6]
 5523 0064 0320     		movs	r0, #3
 5524 0066 1946     		mov	r1, r3
 5525 0068 FFF7FEFF 		bl	cc2400_set
1406:bluetooth_rxtx.c **** 
1407:bluetooth_rxtx.c **** 	// Set up CS register
1408:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5526              		.loc 1 1408 0
 5527 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1409:bluetooth_rxtx.c **** 
1410:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5528              		.loc 1 1410 0
 5529 0070 00BF     		nop
 5530              	.L236:
 5531              		.loc 1 1410 0 is_stmt 0 discriminator 1
 5532 0072 FFF7FEFF 		bl	cc2400_status
 5533 0076 0346     		mov	r3, r0
 5534 0078 03F04003 		and	r3, r3, #64
 5535 007c 002B     		cmp	r3, #0
 5536 007e F8D0     		beq	.L236
1411:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5537              		.loc 1 1411 0 is_stmt 1
 5538 0080 6120     		movs	r0, #97
 5539 0082 FFF7FEFF 		bl	cc2400_strobe
1412:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5540              		.loc 1 1412 0
 5541 0086 00BF     		nop
 5542              	.L237:
 5543              		.loc 1 1412 0 is_stmt 0 discriminator 1
 5544 0088 FFF7FEFF 		bl	cc2400_status
 5545 008c 0346     		mov	r3, r0
 5546 008e 03F00403 		and	r3, r3, #4
 5547 0092 002B     		cmp	r3, #0
 5548 0094 F8D0     		beq	.L237
1413:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5549              		.loc 1 1413 0 is_stmt 1
 5550 0096 6220     		movs	r0, #98
 5551 0098 FFF7FEFF 		bl	cc2400_strobe
1414:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1415:bluetooth_rxtx.c **** 	PAEN_SET;
 5552              		.loc 1 1415 0
 5553 009c 064B     		ldr	r3, .L238+8
 5554 009e 8022     		movs	r2, #128
 5555 00a0 1A60     		str	r2, [r3]
1416:bluetooth_rxtx.c **** 	HGM_SET;
 5556              		.loc 1 1416 0
 5557 00a2 054B     		ldr	r3, .L238+8
 5558 00a4 4FF48072 		mov	r2, #256
 5559 00a8 1A60     		str	r2, [r3]
 5560              	.L231:
1417:bluetooth_rxtx.c **** #endif
1418:bluetooth_rxtx.c **** }
 5561              		.loc 1 1418 0
 5562 00aa 0837     		adds	r7, r7, #8
ARM GAS  /tmp/cctJTvh1.s 			page 122


 5563              		.cfi_def_cfa_offset 8
 5564 00ac BD46     		mov	sp, r7
 5565              		.cfi_def_cfa_register 13
 5566              		@ sp needed
 5567 00ae 80BD     		pop	{r7, pc}
 5568              	.L239:
 5569              		.align	2
 5570              	.L238:
 5571 00b0 00000000 		.word	modulation
 5572 00b4 00000000 		.word	channel
 5573 00b8 58C00920 		.word	537509976
 5574              		.cfi_endproc
 5575              	.LFE25:
 5577              		.section	.text.cc2400_rx_sync,"ax",%progbits
 5578              		.align	2
 5579              		.thumb
 5580              		.thumb_func
 5582              	cc2400_rx_sync:
 5583              	.LFB26:
1419:bluetooth_rxtx.c **** 
1420:bluetooth_rxtx.c **** /* start un-buffered rx */
1421:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1422:bluetooth_rxtx.c **** {
 5584              		.loc 1 1422 0
 5585              		.cfi_startproc
 5586              		@ args = 0, pretend = 0, frame = 16
 5587              		@ frame_needed = 1, uses_anonymous_args = 0
 5588 0000 80B5     		push	{r7, lr}
 5589              		.cfi_def_cfa_offset 8
 5590              		.cfi_offset 7, -8
 5591              		.cfi_offset 14, -4
 5592 0002 84B0     		sub	sp, sp, #16
 5593              		.cfi_def_cfa_offset 24
 5594 0004 00AF     		add	r7, sp, #0
 5595              		.cfi_def_cfa_register 7
 5596 0006 7860     		str	r0, [r7, #4]
1423:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1424:bluetooth_rxtx.c **** 
1425:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5597              		.loc 1 1425 0
 5598 0008 334B     		ldr	r3, .L247
 5599 000a 1B78     		ldrb	r3, [r3]
 5600 000c DBB2     		uxtb	r3, r3
 5601 000e 002B     		cmp	r3, #0
 5602 0010 05D1     		bne	.L241
1426:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5603              		.loc 1 1426 0
 5604 0012 2923     		movs	r3, #41
 5605 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1427:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5606              		.loc 1 1427 0
 5607 0016 40F26143 		movw	r3, #1121
 5608 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5609 001c 0BE0     		b	.L242
 5610              	.L241:
1428:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1429:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
ARM GAS  /tmp/cctJTvh1.s 			page 123


1430:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1431:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1432:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1433:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1434:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1435:bluetooth_rxtx.c **** 
1436:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5611              		.loc 1 1436 0
 5612 001e 2E4B     		ldr	r3, .L247
 5613 0020 1B78     		ldrb	r3, [r3]
 5614 0022 DBB2     		uxtb	r3, r3
 5615 0024 012B     		cmp	r3, #1
 5616 0026 05D1     		bne	.L243
1437:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5617              		.loc 1 1437 0
 5618 0028 4023     		movs	r3, #64
 5619 002a BB81     		strh	r3, [r7, #12]	@ movhi
1438:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 5620              		.loc 1 1438 0
 5621 002c 40F26153 		movw	r3, #1377
 5622 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 5623 0032 00E0     		b	.L242
 5624              	.L243:
1439:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1440:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1441:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1442:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1443:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1444:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1445:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1446:bluetooth_rxtx.c **** 
1447:bluetooth_rxtx.c **** 	} else {
1448:bluetooth_rxtx.c **** 		/* oops */
1449:bluetooth_rxtx.c **** 		return;
 5625              		.loc 1 1449 0
 5626 0034 4DE0     		b	.L240
 5627              	.L242:
1450:bluetooth_rxtx.c **** 	}
1451:bluetooth_rxtx.c **** 
1452:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5628              		.loc 1 1452 0
 5629 0036 0D20     		movs	r0, #13
 5630 0038 47F6FF71 		movw	r1, #32767
 5631 003c FFF7FEFF 		bl	cc2400_set
1453:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5632              		.loc 1 1453 0
 5633 0040 1220     		movs	r0, #18
 5634 0042 42F62231 		movw	r1, #11042
 5635 0046 FFF7FEFF 		bl	cc2400_set
1454:bluetooth_rxtx.c **** 
1455:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 5636              		.loc 1 1455 0
 5637 004a 1420     		movs	r0, #20
 5638 004c 41F24B21 		movw	r1, #4683
 5639 0050 FFF7FEFF 		bl	cc2400_set
1456:bluetooth_rxtx.c **** 	// 1      2      4b
1457:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
ARM GAS  /tmp/cctJTvh1.s 			page 124


1458:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1459:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1460:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1461:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1462:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1463:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1464:bluetooth_rxtx.c **** 	//
1465:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1466:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1467:bluetooth_rxtx.c **** 
1468:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5640              		.loc 1 1468 0
 5641 0054 FB89     		ldrh	r3, [r7, #14]
 5642 0056 2020     		movs	r0, #32
 5643 0058 1946     		mov	r1, r3
 5644 005a FFF7FEFF 		bl	cc2400_set
1469:bluetooth_rxtx.c **** 
1470:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5645              		.loc 1 1470 0
 5646 005e 7B68     		ldr	r3, [r7, #4]
 5647 0060 9BB2     		uxth	r3, r3
 5648 0062 2C20     		movs	r0, #44
 5649 0064 1946     		mov	r1, r3
 5650 0066 FFF7FEFF 		bl	cc2400_set
1471:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5651              		.loc 1 1471 0
 5652 006a 7B68     		ldr	r3, [r7, #4]
 5653 006c 1B0C     		lsrs	r3, r3, #16
 5654 006e 9BB2     		uxth	r3, r3
 5655 0070 2D20     		movs	r0, #45
 5656 0072 1946     		mov	r1, r3
 5657 0074 FFF7FEFF 		bl	cc2400_set
1472:bluetooth_rxtx.c **** 	
1473:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5658              		.loc 1 1473 0
 5659 0078 184B     		ldr	r3, .L247+4
 5660 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5661 007c 9BB2     		uxth	r3, r3
 5662 007e 013B     		subs	r3, r3, #1
 5663 0080 9BB2     		uxth	r3, r3
 5664 0082 0220     		movs	r0, #2
 5665 0084 1946     		mov	r1, r3
 5666 0086 FFF7FEFF 		bl	cc2400_set
1474:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5667              		.loc 1 1474 0
 5668 008a BB89     		ldrh	r3, [r7, #12]
 5669 008c 0320     		movs	r0, #3
 5670 008e 1946     		mov	r1, r3
 5671 0090 FFF7FEFF 		bl	cc2400_set
1475:bluetooth_rxtx.c **** 
1476:bluetooth_rxtx.c **** 	// Set up CS register
1477:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5672              		.loc 1 1477 0
 5673 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1478:bluetooth_rxtx.c **** 
1479:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5674              		.loc 1 1479 0
ARM GAS  /tmp/cctJTvh1.s 			page 125


 5675 0098 00BF     		nop
 5676              	.L245:
 5677              		.loc 1 1479 0 is_stmt 0 discriminator 1
 5678 009a FFF7FEFF 		bl	cc2400_status
 5679 009e 0346     		mov	r3, r0
 5680 00a0 03F04003 		and	r3, r3, #64
 5681 00a4 002B     		cmp	r3, #0
 5682 00a6 F8D0     		beq	.L245
1480:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5683              		.loc 1 1480 0 is_stmt 1
 5684 00a8 6120     		movs	r0, #97
 5685 00aa FFF7FEFF 		bl	cc2400_strobe
1481:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5686              		.loc 1 1481 0
 5687 00ae 00BF     		nop
 5688              	.L246:
 5689              		.loc 1 1481 0 is_stmt 0 discriminator 1
 5690 00b0 FFF7FEFF 		bl	cc2400_status
 5691 00b4 0346     		mov	r3, r0
 5692 00b6 03F00403 		and	r3, r3, #4
 5693 00ba 002B     		cmp	r3, #0
 5694 00bc F8D0     		beq	.L246
1482:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5695              		.loc 1 1482 0 is_stmt 1
 5696 00be 6220     		movs	r0, #98
 5697 00c0 FFF7FEFF 		bl	cc2400_strobe
1483:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1484:bluetooth_rxtx.c **** 	PAEN_SET;
 5698              		.loc 1 1484 0
 5699 00c4 064B     		ldr	r3, .L247+8
 5700 00c6 8022     		movs	r2, #128
 5701 00c8 1A60     		str	r2, [r3]
1485:bluetooth_rxtx.c **** 	HGM_SET;
 5702              		.loc 1 1485 0
 5703 00ca 054B     		ldr	r3, .L247+8
 5704 00cc 4FF48072 		mov	r2, #256
 5705 00d0 1A60     		str	r2, [r3]
 5706              	.L240:
1486:bluetooth_rxtx.c **** #endif
1487:bluetooth_rxtx.c **** }
 5707              		.loc 1 1487 0
 5708 00d2 1037     		adds	r7, r7, #16
 5709              		.cfi_def_cfa_offset 8
 5710 00d4 BD46     		mov	sp, r7
 5711              		.cfi_def_cfa_register 13
 5712              		@ sp needed
 5713 00d6 80BD     		pop	{r7, pc}
 5714              	.L248:
 5715              		.align	2
 5716              	.L247:
 5717 00d8 00000000 		.word	modulation
 5718 00dc 00000000 		.word	channel
 5719 00e0 58C00920 		.word	537509976
 5720              		.cfi_endproc
 5721              	.LFE26:
 5723              		.section	.text.le_transmit,"ax",%progbits
 5724              		.align	2
ARM GAS  /tmp/cctJTvh1.s 			page 126


 5725              		.global	le_transmit
 5726              		.thumb
 5727              		.thumb_func
 5729              	le_transmit:
 5730              	.LFB27:
1488:bluetooth_rxtx.c **** 
1489:bluetooth_rxtx.c **** /*
1490:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1491:bluetooth_rxtx.c ****  *
1492:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1493:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1494:bluetooth_rxtx.c ****  * included in the data length.
1495:bluetooth_rxtx.c ****  */
1496:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1497:bluetooth_rxtx.c **** {
 5731              		.loc 1 1497 0
 5732              		.cfi_startproc
 5733              		@ args = 0, pretend = 0, frame = 104
 5734              		@ frame_needed = 1, uses_anonymous_args = 0
 5735 0000 80B5     		push	{r7, lr}
 5736              		.cfi_def_cfa_offset 8
 5737              		.cfi_offset 7, -8
 5738              		.cfi_offset 14, -4
 5739 0002 9AB0     		sub	sp, sp, #104
 5740              		.cfi_def_cfa_offset 112
 5741 0004 00AF     		add	r7, sp, #0
 5742              		.cfi_def_cfa_register 7
 5743 0006 F860     		str	r0, [r7, #12]
 5744 0008 0B46     		mov	r3, r1
 5745 000a 7A60     		str	r2, [r7, #4]
 5746 000c FB72     		strb	r3, [r7, #11]
1498:bluetooth_rxtx.c **** 	unsigned i, j;
1499:bluetooth_rxtx.c **** 	int bit;
1500:bluetooth_rxtx.c **** 	u8 txbuf[64];
1501:bluetooth_rxtx.c **** 	u8 tx_len;
1502:bluetooth_rxtx.c **** 	u8 byte;
1503:bluetooth_rxtx.c **** 	u16 gio_save;
1504:bluetooth_rxtx.c **** 
1505:bluetooth_rxtx.c **** 	// first four bytes: AA
1506:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5747              		.loc 1 1506 0
 5748 000e 0023     		movs	r3, #0
 5749 0010 7B66     		str	r3, [r7, #100]
 5750 0012 35E0     		b	.L250
 5751              	.L253:
1507:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5752              		.loc 1 1507 0
 5753 0014 FB68     		ldr	r3, [r7, #12]
 5754 0016 87F85E30 		strb	r3, [r7, #94]
1508:bluetooth_rxtx.c **** 		aa >>= 8;
 5755              		.loc 1 1508 0
 5756 001a FB68     		ldr	r3, [r7, #12]
 5757 001c 1B0A     		lsrs	r3, r3, #8
 5758 001e FB60     		str	r3, [r7, #12]
1509:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5759              		.loc 1 1509 0
 5760 0020 07F11002 		add	r2, r7, #16
ARM GAS  /tmp/cctJTvh1.s 			page 127


 5761 0024 7B6E     		ldr	r3, [r7, #100]
 5762 0026 1344     		add	r3, r3, r2
 5763 0028 0022     		movs	r2, #0
 5764 002a 1A70     		strb	r2, [r3]
1510:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5765              		.loc 1 1510 0
 5766 002c 0023     		movs	r3, #0
 5767 002e 3B66     		str	r3, [r7, #96]
 5768 0030 20E0     		b	.L251
 5769              	.L252:
1511:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5770              		.loc 1 1511 0 discriminator 3
 5771 0032 07F11002 		add	r2, r7, #16
 5772 0036 7B6E     		ldr	r3, [r7, #100]
 5773 0038 1344     		add	r3, r3, r2
 5774 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5775 003c D9B2     		uxtb	r1, r3
 5776 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5777 0042 03F00103 		and	r3, r3, #1
 5778 0046 3A6E     		ldr	r2, [r7, #96]
 5779 0048 C2F10702 		rsb	r2, r2, #7
 5780 004c 9340     		lsls	r3, r3, r2
 5781 004e DBB2     		uxtb	r3, r3
 5782 0050 0A46     		mov	r2, r1
 5783 0052 1343     		orrs	r3, r3, r2
 5784 0054 DBB2     		uxtb	r3, r3
 5785 0056 D9B2     		uxtb	r1, r3
 5786 0058 07F11002 		add	r2, r7, #16
 5787 005c 7B6E     		ldr	r3, [r7, #100]
 5788 005e 1344     		add	r3, r3, r2
 5789 0060 0A46     		mov	r2, r1
 5790 0062 1A70     		strb	r2, [r3]
1512:bluetooth_rxtx.c **** 			byte >>= 1;
 5791              		.loc 1 1512 0 discriminator 3
 5792 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5793 0068 5B08     		lsrs	r3, r3, #1
 5794 006a 87F85E30 		strb	r3, [r7, #94]
1510:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5795              		.loc 1 1510 0 discriminator 3
 5796 006e 3B6E     		ldr	r3, [r7, #96]
 5797 0070 0133     		adds	r3, r3, #1
 5798 0072 3B66     		str	r3, [r7, #96]
 5799              	.L251:
1510:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5800              		.loc 1 1510 0 is_stmt 0 discriminator 1
 5801 0074 3B6E     		ldr	r3, [r7, #96]
 5802 0076 072B     		cmp	r3, #7
 5803 0078 DBD9     		bls	.L252
1506:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5804              		.loc 1 1506 0 is_stmt 1 discriminator 2
 5805 007a 7B6E     		ldr	r3, [r7, #100]
 5806 007c 0133     		adds	r3, r3, #1
 5807 007e 7B66     		str	r3, [r7, #100]
 5808              	.L250:
1506:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5809              		.loc 1 1506 0 is_stmt 0 discriminator 1
 5810 0080 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/cctJTvh1.s 			page 128


 5811 0082 032B     		cmp	r3, #3
 5812 0084 C6D9     		bls	.L253
1513:bluetooth_rxtx.c **** 		}
1514:bluetooth_rxtx.c **** 	}
1515:bluetooth_rxtx.c **** 
1516:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1517:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5813              		.loc 1 1517 0 is_stmt 1
 5814 0086 934B     		ldr	r3, .L269
 5815 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5816 008a 9BB2     		uxth	r3, r3
 5817 008c DBB2     		uxtb	r3, r3
 5818 008e 623B     		subs	r3, r3, #98
 5819 0090 DBB2     		uxtb	r3, r3
 5820 0092 1846     		mov	r0, r3
 5821 0094 FFF7FEFF 		bl	btle_channel_index
 5822 0098 0346     		mov	r3, r0
 5823 009a 1A46     		mov	r2, r3
 5824 009c 8E4B     		ldr	r3, .L269+4
 5825 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5826 00a0 BB65     		str	r3, [r7, #88]
1518:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5827              		.loc 1 1518 0
 5828 00a2 0023     		movs	r3, #0
 5829 00a4 7B66     		str	r3, [r7, #100]
 5830 00a6 50E0     		b	.L254
 5831              	.L257:
1519:bluetooth_rxtx.c **** 		byte = data[i];
 5832              		.loc 1 1519 0
 5833 00a8 7A68     		ldr	r2, [r7, #4]
 5834 00aa 7B6E     		ldr	r3, [r7, #100]
 5835 00ac 1344     		add	r3, r3, r2
 5836 00ae 1B78     		ldrb	r3, [r3]
 5837 00b0 87F85E30 		strb	r3, [r7, #94]
1520:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5838              		.loc 1 1520 0
 5839 00b4 7B6E     		ldr	r3, [r7, #100]
 5840 00b6 0433     		adds	r3, r3, #4
 5841 00b8 07F16802 		add	r2, r7, #104
 5842 00bc 1344     		add	r3, r3, r2
 5843 00be 0022     		movs	r2, #0
 5844 00c0 03F8582C 		strb	r2, [r3, #-88]
1521:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5845              		.loc 1 1521 0
 5846 00c4 0023     		movs	r3, #0
 5847 00c6 3B66     		str	r3, [r7, #96]
 5848 00c8 39E0     		b	.L255
 5849              	.L256:
1522:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5850              		.loc 1 1522 0 discriminator 3
 5851 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5852 00ce 03F00103 		and	r3, r3, #1
 5853 00d2 8249     		ldr	r1, .L269+8
 5854 00d4 BA6D     		ldr	r2, [r7, #88]
 5855 00d6 0A44     		add	r2, r2, r1
 5856 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5857 00da 5340     		eors	r3, r3, r2
ARM GAS  /tmp/cctJTvh1.s 			page 129


 5858 00dc 7B65     		str	r3, [r7, #84]
1523:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5859              		.loc 1 1523 0 discriminator 3
 5860 00de BB6D     		ldr	r3, [r7, #88]
 5861 00e0 0133     		adds	r3, r3, #1
 5862 00e2 1946     		mov	r1, r3
 5863 00e4 7E4B     		ldr	r3, .L269+12
 5864 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5865 00ea C81A     		subs	r0, r1, r3
 5866 00ec 4008     		lsrs	r0, r0, #1
 5867 00ee 0344     		add	r3, r3, r0
 5868 00f0 9A09     		lsrs	r2, r3, #6
 5869 00f2 1346     		mov	r3, r2
 5870 00f4 DB01     		lsls	r3, r3, #7
 5871 00f6 9B1A     		subs	r3, r3, r2
 5872 00f8 CA1A     		subs	r2, r1, r3
 5873 00fa BA65     		str	r2, [r7, #88]
1524:bluetooth_rxtx.c **** 			byte >>= 1;
 5874              		.loc 1 1524 0 discriminator 3
 5875 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5876 0100 5B08     		lsrs	r3, r3, #1
 5877 0102 87F85E30 		strb	r3, [r7, #94]
1525:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5878              		.loc 1 1525 0 discriminator 3
 5879 0106 7B6E     		ldr	r3, [r7, #100]
 5880 0108 0433     		adds	r3, r3, #4
 5881 010a 7A6E     		ldr	r2, [r7, #100]
 5882 010c 0432     		adds	r2, r2, #4
 5883 010e 07F16801 		add	r1, r7, #104
 5884 0112 0A44     		add	r2, r2, r1
 5885 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5886 0118 D1B2     		uxtb	r1, r2
 5887 011a 3A6E     		ldr	r2, [r7, #96]
 5888 011c C2F10702 		rsb	r2, r2, #7
 5889 0120 1046     		mov	r0, r2
 5890 0122 7A6D     		ldr	r2, [r7, #84]
 5891 0124 8240     		lsls	r2, r2, r0
 5892 0126 D2B2     		uxtb	r2, r2
 5893 0128 0A43     		orrs	r2, r2, r1
 5894 012a D2B2     		uxtb	r2, r2
 5895 012c D2B2     		uxtb	r2, r2
 5896 012e 07F16801 		add	r1, r7, #104
 5897 0132 0B44     		add	r3, r3, r1
 5898 0134 03F8582C 		strb	r2, [r3, #-88]
1521:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5899              		.loc 1 1521 0 discriminator 3
 5900 0138 3B6E     		ldr	r3, [r7, #96]
 5901 013a 0133     		adds	r3, r3, #1
 5902 013c 3B66     		str	r3, [r7, #96]
 5903              	.L255:
1521:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5904              		.loc 1 1521 0 is_stmt 0 discriminator 1
 5905 013e 3B6E     		ldr	r3, [r7, #96]
 5906 0140 072B     		cmp	r3, #7
 5907 0142 C2D9     		bls	.L256
1518:bluetooth_rxtx.c **** 		byte = data[i];
 5908              		.loc 1 1518 0 is_stmt 1 discriminator 2
ARM GAS  /tmp/cctJTvh1.s 			page 130


 5909 0144 7B6E     		ldr	r3, [r7, #100]
 5910 0146 0133     		adds	r3, r3, #1
 5911 0148 7B66     		str	r3, [r7, #100]
 5912              	.L254:
1518:bluetooth_rxtx.c **** 		byte = data[i];
 5913              		.loc 1 1518 0 is_stmt 0 discriminator 1
 5914 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5915 014c 7B6E     		ldr	r3, [r7, #100]
 5916 014e 9A42     		cmp	r2, r3
 5917 0150 AAD8     		bhi	.L257
1526:bluetooth_rxtx.c **** 		}
1527:bluetooth_rxtx.c **** 	}
1528:bluetooth_rxtx.c **** 
1529:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5918              		.loc 1 1529 0 is_stmt 1
 5919 0152 FB7A     		ldrb	r3, [r7, #11]
 5920 0154 0433     		adds	r3, r3, #4
 5921 0156 FB72     		strb	r3, [r7, #11]
1530:bluetooth_rxtx.c **** 
1531:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1532:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5922              		.loc 1 1532 0
 5923 0158 0D20     		movs	r0, #13
 5924 015a 47F6FF71 		movw	r1, #32767
 5925 015e FFF7FEFF 		bl	cc2400_set
1533:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5926              		.loc 1 1533 0
 5927 0162 1220     		movs	r0, #18
 5928 0164 42F62231 		movw	r1, #11042
 5929 0168 FFF7FEFF 		bl	cc2400_set
1534:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5930              		.loc 1 1534 0
 5931 016c 1420     		movs	r0, #20
 5932 016e 41F24B31 		movw	r1, #4939
 5933 0172 FFF7FEFF 		bl	cc2400_set
1535:bluetooth_rxtx.c **** 
1536:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5934              		.loc 1 1536 0
 5935 0176 2020     		movs	r0, #32
 5936 0178 40F60141 		movw	r1, #3073
 5937 017c FFF7FEFF 		bl	cc2400_set
1537:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1538:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1539:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1540:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1541:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1542:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1543:bluetooth_rxtx.c **** 
1544:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5938              		.loc 1 1544 0
 5939 0180 544B     		ldr	r3, .L269
 5940 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5941 0184 9BB2     		uxth	r3, r3
 5942 0186 0220     		movs	r0, #2
 5943 0188 1946     		mov	r1, r3
 5944 018a FFF7FEFF 		bl	cc2400_set
1545:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
ARM GAS  /tmp/cctJTvh1.s 			page 131


 5945              		.loc 1 1545 0
 5946 018e 0520     		movs	r0, #5
 5947 0190 0B21     		movs	r1, #11
 5948 0192 FFF7FEFF 		bl	cc2400_set
1546:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5949              		.loc 1 1546 0
 5950 0196 0320     		movs	r0, #3
 5951 0198 4021     		movs	r1, #64
 5952 019a FFF7FEFF 		bl	cc2400_set
1547:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5953              		.loc 1 1547 0
 5954 019e 2320     		movs	r0, #35
 5955 01a0 1421     		movs	r1, #20
 5956 01a2 FFF7FEFF 		bl	cc2400_set
1548:bluetooth_rxtx.c **** 
1549:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1550:bluetooth_rxtx.c **** 	if (aa & 1)
 5957              		.loc 1 1550 0
 5958 01a6 FB68     		ldr	r3, [r7, #12]
 5959 01a8 03F00103 		and	r3, r3, #1
 5960 01ac 002B     		cmp	r3, #0
 5961 01ae 05D0     		beq	.L258
1551:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5962              		.loc 1 1551 0
 5963 01b0 2D20     		movs	r0, #45
 5964 01b2 4AF6AA21 		movw	r1, #43690
 5965 01b6 FFF7FEFF 		bl	cc2400_set
 5966 01ba 04E0     		b	.L259
 5967              	.L258:
1552:bluetooth_rxtx.c **** 	else
1553:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5968              		.loc 1 1553 0
 5969 01bc 2D20     		movs	r0, #45
 5970 01be 45F25551 		movw	r1, #21845
 5971 01c2 FFF7FEFF 		bl	cc2400_set
 5972              	.L259:
1554:bluetooth_rxtx.c **** 
1555:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1556:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5973              		.loc 1 1556 0
 5974 01c6 0820     		movs	r0, #8
 5975 01c8 FFF7FEFF 		bl	cc2400_get
 5976 01cc 0346     		mov	r3, r0
 5977 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1557:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5978              		.loc 1 1557 0
 5979 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5980 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5981 01da 9BB2     		uxth	r3, r3
 5982 01dc 43F49C43 		orr	r3, r3, #19968
 5983 01e0 9BB2     		uxth	r3, r3
 5984 01e2 9BB2     		uxth	r3, r3
 5985 01e4 0820     		movs	r0, #8
 5986 01e6 1946     		mov	r1, r3
 5987 01e8 FFF7FEFF 		bl	cc2400_set
1558:bluetooth_rxtx.c **** 
1559:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
ARM GAS  /tmp/cctJTvh1.s 			page 132


 5988              		.loc 1 1559 0
 5989 01ec 00BF     		nop
 5990              	.L260:
 5991              		.loc 1 1559 0 is_stmt 0 discriminator 1
 5992 01ee FFF7FEFF 		bl	cc2400_status
 5993 01f2 0346     		mov	r3, r0
 5994 01f4 03F04003 		and	r3, r3, #64
 5995 01f8 002B     		cmp	r3, #0
 5996 01fa F8D0     		beq	.L260
1560:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5997              		.loc 1 1560 0 is_stmt 1
 5998 01fc 6120     		movs	r0, #97
 5999 01fe FFF7FEFF 		bl	cc2400_strobe
1561:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6000              		.loc 1 1561 0
 6001 0202 00BF     		nop
 6002              	.L261:
 6003              		.loc 1 1561 0 is_stmt 0 discriminator 1
 6004 0204 FFF7FEFF 		bl	cc2400_status
 6005 0208 0346     		mov	r3, r0
 6006 020a 03F00403 		and	r3, r3, #4
 6007 020e 002B     		cmp	r3, #0
 6008 0210 F8D0     		beq	.L261
1562:bluetooth_rxtx.c **** 	TXLED_SET;
 6009              		.loc 1 1562 0 is_stmt 1
 6010 0212 344B     		ldr	r3, .L269+16
 6011 0214 4FF48072 		mov	r2, #256
 6012 0218 1A60     		str	r2, [r3]
1563:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1564:bluetooth_rxtx.c **** 	PAEN_SET;
 6013              		.loc 1 1564 0
 6014 021a 334B     		ldr	r3, .L269+20
 6015 021c 8022     		movs	r2, #128
 6016 021e 1A60     		str	r2, [r3]
1565:bluetooth_rxtx.c **** #endif
1566:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 6017              		.loc 1 1566 0
 6018 0220 00BF     		nop
 6019              	.L262:
 6020              		.loc 1 1566 0 is_stmt 0 discriminator 1
 6021 0222 0E20     		movs	r0, #14
 6022 0224 FFF7FEFF 		bl	cc2400_get
 6023 0228 0346     		mov	r3, r0
 6024 022a 03F01F03 		and	r3, r3, #31
 6025 022e 0F2B     		cmp	r3, #15
 6026 0230 F7D1     		bne	.L262
1567:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 6027              		.loc 1 1567 0 is_stmt 1
 6028 0232 6320     		movs	r0, #99
 6029 0234 FFF7FEFF 		bl	cc2400_strobe
1568:bluetooth_rxtx.c **** 
1569:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1570:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 6030              		.loc 1 1570 0
 6031 0238 0023     		movs	r3, #0
 6032 023a 7B66     		str	r3, [r7, #100]
 6033 023c 21E0     		b	.L263
ARM GAS  /tmp/cctJTvh1.s 			page 133


 6034              	.L266:
1571:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 6035              		.loc 1 1571 0
 6036 023e 00BF     		nop
 6037              	.L264:
 6038              		.loc 1 1571 0 is_stmt 0 discriminator 1
 6039 0240 2A4B     		ldr	r3, .L269+24
 6040 0242 1B68     		ldr	r3, [r3]
 6041 0244 03F00403 		and	r3, r3, #4
 6042 0248 002B     		cmp	r3, #0
 6043 024a F9D1     		bne	.L264
1572:bluetooth_rxtx.c **** 		tx_len = len - i;
 6044              		.loc 1 1572 0 is_stmt 1
 6045 024c 7B6E     		ldr	r3, [r7, #100]
 6046 024e DBB2     		uxtb	r3, r3
 6047 0250 FA7A     		ldrb	r2, [r7, #11]
 6048 0252 D31A     		subs	r3, r2, r3
 6049 0254 87F85F30 		strb	r3, [r7, #95]
1573:bluetooth_rxtx.c **** 		if (tx_len > 16)
 6050              		.loc 1 1573 0
 6051 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 6052 025c 102B     		cmp	r3, #16
 6053 025e 02D9     		bls	.L265
1574:bluetooth_rxtx.c **** 			tx_len = 16;
 6054              		.loc 1 1574 0
 6055 0260 1023     		movs	r3, #16
 6056 0262 87F85F30 		strb	r3, [r7, #95]
 6057              	.L265:
1575:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 6058              		.loc 1 1575 0 discriminator 2
 6059 0266 07F11002 		add	r2, r7, #16
 6060 026a 7B6E     		ldr	r3, [r7, #100]
 6061 026c 1344     		add	r3, r3, r2
 6062 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 6063 0272 7020     		movs	r0, #112
 6064 0274 1146     		mov	r1, r2
 6065 0276 1A46     		mov	r2, r3
 6066 0278 FFF7FEFF 		bl	cc2400_spi_buf
1570:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 6067              		.loc 1 1570 0 discriminator 2
 6068 027c 7B6E     		ldr	r3, [r7, #100]
 6069 027e 1033     		adds	r3, r3, #16
 6070 0280 7B66     		str	r3, [r7, #100]
 6071              	.L263:
1570:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 6072              		.loc 1 1570 0 is_stmt 0 discriminator 1
 6073 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 6074 0284 7B6E     		ldr	r3, [r7, #100]
 6075 0286 9A42     		cmp	r2, r3
 6076 0288 D9D8     		bhi	.L266
1576:bluetooth_rxtx.c **** 	}
1577:bluetooth_rxtx.c **** 
1578:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 6077              		.loc 1 1578 0 is_stmt 1
 6078 028a 00BF     		nop
 6079              	.L267:
 6080              		.loc 1 1578 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cctJTvh1.s 			page 134


 6081 028c 0E20     		movs	r0, #14
 6082 028e FFF7FEFF 		bl	cc2400_get
 6083 0292 0346     		mov	r3, r0
 6084 0294 03F01F03 		and	r3, r3, #31
 6085 0298 0F2B     		cmp	r3, #15
 6086 029a F7D1     		bne	.L267
1579:bluetooth_rxtx.c **** 	TXLED_CLR;
 6087              		.loc 1 1579 0 is_stmt 1
 6088 029c 144B     		ldr	r3, .L269+28
 6089 029e 4FF48072 		mov	r2, #256
 6090 02a2 1A60     		str	r2, [r3]
1580:bluetooth_rxtx.c **** 
1581:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 6091              		.loc 1 1581 0
 6092 02a4 6420     		movs	r0, #100
 6093 02a6 FFF7FEFF 		bl	cc2400_strobe
1582:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6094              		.loc 1 1582 0
 6095 02aa 00BF     		nop
 6096              	.L268:
 6097              		.loc 1 1582 0 is_stmt 0 discriminator 1
 6098 02ac FFF7FEFF 		bl	cc2400_status
 6099 02b0 0346     		mov	r3, r0
 6100 02b2 03F00403 		and	r3, r3, #4
 6101 02b6 002B     		cmp	r3, #0
 6102 02b8 F8D1     		bne	.L268
1583:bluetooth_rxtx.c **** 
1584:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1585:bluetooth_rxtx.c **** 	PAEN_CLR;
 6103              		.loc 1 1585 0 is_stmt 1
 6104 02ba 0E4B     		ldr	r3, .L269+32
 6105 02bc 8022     		movs	r2, #128
 6106 02be 1A60     		str	r2, [r3]
1586:bluetooth_rxtx.c **** #endif
1587:bluetooth_rxtx.c **** 
1588:bluetooth_rxtx.c **** 	// reset GIO
1589:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 6107              		.loc 1 1589 0
 6108 02c0 B7F85230 		ldrh	r3, [r7, #82]
 6109 02c4 0820     		movs	r0, #8
 6110 02c6 1946     		mov	r1, r3
 6111 02c8 FFF7FEFF 		bl	cc2400_set
1590:bluetooth_rxtx.c **** }
 6112              		.loc 1 1590 0
 6113 02cc 6837     		adds	r7, r7, #104
 6114              		.cfi_def_cfa_offset 8
 6115 02ce BD46     		mov	sp, r7
 6116              		.cfi_def_cfa_register 13
 6117              		@ sp needed
 6118 02d0 80BD     		pop	{r7, pc}
 6119              	.L270:
 6120 02d2 00BF     		.align	2
 6121              	.L269:
 6122 02d4 00000000 		.word	channel
 6123 02d8 C0000000 		.word	whitening_index
 6124 02dc 40000000 		.word	whitening
 6125 02e0 11080402 		.word	33818641
ARM GAS  /tmp/cctJTvh1.s 			page 135


 6126 02e4 38C00920 		.word	537509944
 6127 02e8 58C00920 		.word	537509976
 6128 02ec 54C00920 		.word	537509972
 6129 02f0 3CC00920 		.word	537509948
 6130 02f4 5CC00920 		.word	537509980
 6131              		.cfi_endproc
 6132              	.LFE27:
 6134              		.section	.text.le_jam,"ax",%progbits
 6135              		.align	2
 6136              		.global	le_jam
 6137              		.thumb
 6138              		.thumb_func
 6140              	le_jam:
 6141              	.LFB28:
1591:bluetooth_rxtx.c **** 
1592:bluetooth_rxtx.c **** void le_jam(void) {
 6142              		.loc 1 1592 0
 6143              		.cfi_startproc
 6144              		@ args = 0, pretend = 0, frame = 0
 6145              		@ frame_needed = 1, uses_anonymous_args = 0
 6146 0000 80B5     		push	{r7, lr}
 6147              		.cfi_def_cfa_offset 8
 6148              		.cfi_offset 7, -8
 6149              		.cfi_offset 14, -4
 6150 0002 00AF     		add	r7, sp, #0
 6151              		.cfi_def_cfa_register 7
1593:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1594:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 6152              		.loc 1 1594 0
 6153 0004 0D20     		movs	r0, #13
 6154 0006 47F6FF71 		movw	r1, #32767
 6155 000a FFF7FEFF 		bl	cc2400_set
1595:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 6156              		.loc 1 1595 0
 6157 000e 1220     		movs	r0, #18
 6158 0010 42F62231 		movw	r1, #11042
 6159 0014 FFF7FEFF 		bl	cc2400_set
1596:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 6160              		.loc 1 1596 0
 6161 0018 1420     		movs	r0, #20
 6162 001a 42F24B31 		movw	r1, #9035
 6163 001e FFF7FEFF 		bl	cc2400_set
1597:bluetooth_rxtx.c **** 
1598:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 6164              		.loc 1 1598 0
 6165 0022 2020     		movs	r0, #32
 6166 0024 40F60141 		movw	r1, #3073
 6167 0028 FFF7FEFF 		bl	cc2400_set
1599:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1600:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1601:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1602:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1603:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1604:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1605:bluetooth_rxtx.c **** 
1606:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1607:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
ARM GAS  /tmp/cctJTvh1.s 			page 136


 6168              		.loc 1 1607 0
 6169 002c 0520     		movs	r0, #5
 6170 002e 0B21     		movs	r1, #11
 6171 0030 FFF7FEFF 		bl	cc2400_set
1608:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 6172              		.loc 1 1608 0
 6173 0034 0320     		movs	r0, #3
 6174 0036 4021     		movs	r1, #64
 6175 0038 FFF7FEFF 		bl	cc2400_set
1609:bluetooth_rxtx.c **** 
1610:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6176              		.loc 1 1610 0
 6177 003c 00BF     		nop
 6178              	.L272:
 6179              		.loc 1 1610 0 is_stmt 0 discriminator 1
 6180 003e FFF7FEFF 		bl	cc2400_status
 6181 0042 0346     		mov	r3, r0
 6182 0044 03F04003 		and	r3, r3, #64
 6183 0048 002B     		cmp	r3, #0
 6184 004a F8D0     		beq	.L272
1611:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6185              		.loc 1 1611 0 is_stmt 1
 6186 004c 6120     		movs	r0, #97
 6187 004e FFF7FEFF 		bl	cc2400_strobe
1612:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6188              		.loc 1 1612 0
 6189 0052 00BF     		nop
 6190              	.L273:
 6191              		.loc 1 1612 0 is_stmt 0 discriminator 1
 6192 0054 FFF7FEFF 		bl	cc2400_status
 6193 0058 0346     		mov	r3, r0
 6194 005a 03F00403 		and	r3, r3, #4
 6195 005e 002B     		cmp	r3, #0
 6196 0060 F8D0     		beq	.L273
1613:bluetooth_rxtx.c **** 	TXLED_SET;
 6197              		.loc 1 1613 0 is_stmt 1
 6198 0062 0A4B     		ldr	r3, .L275
 6199 0064 4FF48072 		mov	r2, #256
 6200 0068 1A60     		str	r2, [r3]
1614:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1615:bluetooth_rxtx.c **** 	PAEN_SET;
 6201              		.loc 1 1615 0
 6202 006a 094B     		ldr	r3, .L275+4
 6203 006c 8022     		movs	r2, #128
 6204 006e 1A60     		str	r2, [r3]
1616:bluetooth_rxtx.c **** #endif
1617:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 6205              		.loc 1 1617 0
 6206 0070 00BF     		nop
 6207              	.L274:
 6208              		.loc 1 1617 0 is_stmt 0 discriminator 1
 6209 0072 0E20     		movs	r0, #14
 6210 0074 FFF7FEFF 		bl	cc2400_get
 6211 0078 0346     		mov	r3, r0
 6212 007a 03F01F03 		and	r3, r3, #31
 6213 007e 0F2B     		cmp	r3, #15
 6214 0080 F7D1     		bne	.L274
ARM GAS  /tmp/cctJTvh1.s 			page 137


1618:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 6215              		.loc 1 1618 0 is_stmt 1
 6216 0082 6320     		movs	r0, #99
 6217 0084 FFF7FEFF 		bl	cc2400_strobe
1619:bluetooth_rxtx.c **** #endif
1620:bluetooth_rxtx.c **** }
 6218              		.loc 1 1620 0
 6219 0088 80BD     		pop	{r7, pc}
 6220              	.L276:
 6221 008a 00BF     		.align	2
 6222              	.L275:
 6223 008c 38C00920 		.word	537509944
 6224 0090 58C00920 		.word	537509976
 6225              		.cfi_endproc
 6226              	.LFE28:
 6228              		.section	.text.hop,"ax",%progbits
 6229              		.align	2
 6230              		.global	hop
 6231              		.thumb
 6232              		.thumb_func
 6234              	hop:
 6235              	.LFB29:
1621:bluetooth_rxtx.c **** 
1622:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1623:bluetooth_rxtx.c ****  * track of this? */
1624:bluetooth_rxtx.c **** void hop(void)
1625:bluetooth_rxtx.c **** {
 6236              		.loc 1 1625 0
 6237              		.cfi_startproc
 6238              		@ args = 0, pretend = 0, frame = 0
 6239              		@ frame_needed = 1, uses_anonymous_args = 0
 6240 0000 80B5     		push	{r7, lr}
 6241              		.cfi_def_cfa_offset 8
 6242              		.cfi_offset 7, -8
 6243              		.cfi_offset 14, -4
 6244 0002 00AF     		add	r7, sp, #0
 6245              		.cfi_def_cfa_register 7
1626:bluetooth_rxtx.c **** 	do_hop = 0;
 6246              		.loc 1 1626 0
 6247 0004 414B     		ldr	r3, .L288
 6248 0006 0022     		movs	r2, #0
 6249 0008 1A70     		strb	r2, [r3]
1627:bluetooth_rxtx.c **** 
1628:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1629:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 6250              		.loc 1 1629 0
 6251 000a 414B     		ldr	r3, .L288+4
 6252 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6253 000e 002B     		cmp	r3, #0
 6254 0010 0BD1     		bne	.L278
1630:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 6255              		.loc 1 1630 0
 6256 0012 0220     		movs	r0, #2
 6257 0014 FFF7FEFF 		bl	cc2400_get
 6258 0018 0346     		mov	r3, r0
 6259 001a 1A46     		mov	r2, r3
 6260 001c 3D4B     		ldr	r3, .L288+8
ARM GAS  /tmp/cctJTvh1.s 			page 138


 6261 001e 1B88     		ldrh	r3, [r3]	@ movhi
 6262 0020 9BB2     		uxth	r3, r3
 6263 0022 013B     		subs	r3, r3, #1
 6264 0024 9A42     		cmp	r2, r3
 6265 0026 47D1     		bne	.L279
1631:bluetooth_rxtx.c **** 			return;
 6266              		.loc 1 1631 0
 6267 0028 6EE0     		b	.L277
 6268              	.L278:
1632:bluetooth_rxtx.c **** 	}
1633:bluetooth_rxtx.c **** 
1634:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1635:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 6269              		.loc 1 1635 0
 6270 002a 394B     		ldr	r3, .L288+4
 6271 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6272 002e 012B     		cmp	r3, #1
 6273 0030 14D1     		bne	.L281
1636:bluetooth_rxtx.c **** 		channel += 32;
 6274              		.loc 1 1636 0
 6275 0032 384B     		ldr	r3, .L288+8
 6276 0034 1B88     		ldrh	r3, [r3]	@ movhi
 6277 0036 9BB2     		uxth	r3, r3
 6278 0038 2033     		adds	r3, r3, #32
 6279 003a 9AB2     		uxth	r2, r3
 6280 003c 354B     		ldr	r3, .L288+8
 6281 003e 1A80     		strh	r2, [r3]	@ movhi
1637:bluetooth_rxtx.c **** 		if (channel > 2480)
 6282              		.loc 1 1637 0
 6283 0040 344B     		ldr	r3, .L288+8
 6284 0042 1B88     		ldrh	r3, [r3]	@ movhi
 6285 0044 9BB2     		uxth	r3, r3
 6286 0046 B3F51B6F 		cmp	r3, #2480
 6287 004a 35D9     		bls	.L279
1638:bluetooth_rxtx.c **** 			channel -= 79;
 6288              		.loc 1 1638 0
 6289 004c 314B     		ldr	r3, .L288+8
 6290 004e 1B88     		ldrh	r3, [r3]	@ movhi
 6291 0050 9BB2     		uxth	r3, r3
 6292 0052 4F3B     		subs	r3, r3, #79
 6293 0054 9AB2     		uxth	r2, r3
 6294 0056 2F4B     		ldr	r3, .L288+8
 6295 0058 1A80     		strh	r2, [r3]	@ movhi
 6296 005a 2DE0     		b	.L279
 6297              	.L281:
1639:bluetooth_rxtx.c **** 	}
1640:bluetooth_rxtx.c **** 
1641:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 6298              		.loc 1 1641 0
 6299 005c 2C4B     		ldr	r3, .L288+4
 6300 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6301 0060 022B     		cmp	r3, #2
 6302 0062 0DD1     		bne	.L283
1642:bluetooth_rxtx.c **** 		TXLED_SET;
 6303              		.loc 1 1642 0
 6304 0064 2C4B     		ldr	r3, .L288+12
 6305 0066 4FF48072 		mov	r2, #256
ARM GAS  /tmp/cctJTvh1.s 			page 139


 6306 006a 1A60     		str	r2, [r3]
1643:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 6307              		.loc 1 1643 0
 6308 006c 2B4B     		ldr	r3, .L288+16
 6309 006e 1B68     		ldr	r3, [r3]
 6310 0070 1846     		mov	r0, r3
 6311 0072 FFF7FEFF 		bl	next_hop
 6312 0076 0346     		mov	r3, r0
 6313 0078 1A46     		mov	r2, r3
 6314 007a 264B     		ldr	r3, .L288+8
 6315 007c 1A80     		strh	r2, [r3]	@ movhi
 6316 007e 1BE0     		b	.L279
 6317              	.L283:
1644:bluetooth_rxtx.c **** 	}
1645:bluetooth_rxtx.c **** 
1646:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 6318              		.loc 1 1646 0
 6319 0080 234B     		ldr	r3, .L288+4
 6320 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6321 0084 032B     		cmp	r3, #3
 6322 0086 0BD1     		bne	.L284
1647:bluetooth_rxtx.c **** 		TXLED_SET;
 6323              		.loc 1 1647 0
 6324 0088 234B     		ldr	r3, .L288+12
 6325 008a 4FF48072 		mov	r2, #256
 6326 008e 1A60     		str	r2, [r3]
1648:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 6327              		.loc 1 1648 0
 6328 0090 2348     		ldr	r0, .L288+20
 6329 0092 FFF7FEFF 		bl	btle_next_hop
 6330 0096 0346     		mov	r3, r0
 6331 0098 1A46     		mov	r2, r3
 6332 009a 1E4B     		ldr	r3, .L288+8
 6333 009c 1A80     		strh	r2, [r3]	@ movhi
 6334 009e 0BE0     		b	.L279
 6335              	.L284:
1649:bluetooth_rxtx.c **** 	}
1650:bluetooth_rxtx.c **** 
1651:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 6336              		.loc 1 1651 0
 6337 00a0 1B4B     		ldr	r3, .L288+4
 6338 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6339 00a4 042B     		cmp	r3, #4
 6340 00a6 07D1     		bne	.L279
1652:bluetooth_rxtx.c **** 		TXLED_SET;
 6341              		.loc 1 1652 0
 6342 00a8 1B4B     		ldr	r3, .L288+12
 6343 00aa 4FF48072 		mov	r2, #256
 6344 00ae 1A60     		str	r2, [r3]
1653:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 6345              		.loc 1 1653 0
 6346 00b0 1C4B     		ldr	r3, .L288+24
 6347 00b2 1A88     		ldrh	r2, [r3]
 6348 00b4 174B     		ldr	r3, .L288+8
 6349 00b6 1A80     		strh	r2, [r3]	@ movhi
 6350              	.L279:
1654:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/cctJTvh1.s 			page 140


1655:bluetooth_rxtx.c **** 
1656:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1657:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 6351              		.loc 1 1657 0
 6352 00b8 6420     		movs	r0, #100
 6353 00ba FFF7FEFF 		bl	cc2400_strobe
1658:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6354              		.loc 1 1658 0
 6355 00be 00BF     		nop
 6356              	.L285:
 6357              		.loc 1 1658 0 is_stmt 0 discriminator 1
 6358 00c0 FFF7FEFF 		bl	cc2400_status
 6359 00c4 0346     		mov	r3, r0
 6360 00c6 03F00403 		and	r3, r3, #4
 6361 00ca 002B     		cmp	r3, #0
 6362 00cc F8D1     		bne	.L285
1659:bluetooth_rxtx.c **** 
1660:bluetooth_rxtx.c **** 	/* Retune */
1661:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6363              		.loc 1 1661 0 is_stmt 1
 6364 00ce 114B     		ldr	r3, .L288+8
 6365 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 6366 00d2 9BB2     		uxth	r3, r3
 6367 00d4 013B     		subs	r3, r3, #1
 6368 00d6 9BB2     		uxth	r3, r3
 6369 00d8 0220     		movs	r0, #2
 6370 00da 1946     		mov	r1, r3
 6371 00dc FFF7FEFF 		bl	cc2400_set
1662:bluetooth_rxtx.c **** 	
1663:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1664:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 6372              		.loc 1 1664 0
 6373 00e0 0B4B     		ldr	r3, .L288+4
 6374 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6375 00e4 002B     		cmp	r3, #0
 6376 00e6 01D0     		beq	.L286
1665:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 6377              		.loc 1 1665 0
 6378 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 6379              	.L286:
1666:bluetooth_rxtx.c **** 	}
1667:bluetooth_rxtx.c **** 
1668:bluetooth_rxtx.c **** 	/* Wait for lock */
1669:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6380              		.loc 1 1669 0
 6381 00ec 6120     		movs	r0, #97
 6382 00ee FFF7FEFF 		bl	cc2400_strobe
1670:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6383              		.loc 1 1670 0
 6384 00f2 00BF     		nop
 6385              	.L287:
 6386              		.loc 1 1670 0 is_stmt 0 discriminator 1
 6387 00f4 FFF7FEFF 		bl	cc2400_status
 6388 00f8 0346     		mov	r3, r0
 6389 00fa 03F00403 		and	r3, r3, #4
 6390 00fe 002B     		cmp	r3, #0
 6391 0100 F8D0     		beq	.L287
ARM GAS  /tmp/cctJTvh1.s 			page 141


1671:bluetooth_rxtx.c **** 	
1672:bluetooth_rxtx.c **** 	/* RX mode */
1673:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6392              		.loc 1 1673 0 is_stmt 1
 6393 0102 6220     		movs	r0, #98
 6394 0104 FFF7FEFF 		bl	cc2400_strobe
 6395              	.L277:
1674:bluetooth_rxtx.c **** 
1675:bluetooth_rxtx.c **** }
 6396              		.loc 1 1675 0
 6397 0108 80BD     		pop	{r7, pc}
 6398              	.L289:
 6399 010a 00BF     		.align	2
 6400              	.L288:
 6401 010c 00000000 		.word	do_hop
 6402 0110 00000000 		.word	hop_mode
 6403 0114 00000000 		.word	channel
 6404 0118 38C00920 		.word	537509944
 6405 011c 00000000 		.word	clkn
 6406 0120 00000000 		.word	le
 6407 0124 00000000 		.word	hop_direct_channel
 6408              		.cfi_endproc
 6409              	.LFE29:
 6411              		.section	.text.cc2400_spi_rev,"ax",%progbits
 6412              		.align	2
 6413              		.global	cc2400_spi_rev
 6414              		.thumb
 6415              		.thumb_func
 6417              	cc2400_spi_rev:
 6418              	.LFB30:
1676:bluetooth_rxtx.c **** 
1677:bluetooth_rxtx.c **** 
1678:bluetooth_rxtx.c **** u32 cc2400_spi_rev(u8 len, u32 data)
1679:bluetooth_rxtx.c **** {
 6419              		.loc 1 1679 0
 6420              		.cfi_startproc
 6421              		@ args = 0, pretend = 0, frame = 16
 6422              		@ frame_needed = 1, uses_anonymous_args = 0
 6423              		@ link register save eliminated.
 6424 0000 80B4     		push	{r7}
 6425              		.cfi_def_cfa_offset 4
 6426              		.cfi_offset 7, -4
 6427 0002 85B0     		sub	sp, sp, #20
 6428              		.cfi_def_cfa_offset 24
 6429 0004 00AF     		add	r7, sp, #0
 6430              		.cfi_def_cfa_register 7
 6431 0006 0346     		mov	r3, r0
 6432 0008 3960     		str	r1, [r7]
 6433 000a FB71     		strb	r3, [r7, #7]
1680:bluetooth_rxtx.c ****     //    u32 first_ts, second_ts, diff;
1681:bluetooth_rxtx.c **** 
1682:bluetooth_rxtx.c **** 
1683:bluetooth_rxtx.c ****         u32 msb = 1 << (len - 1);
 6434              		.loc 1 1683 0
 6435 000c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6436 000e 013B     		subs	r3, r3, #1
 6437 0010 0122     		movs	r2, #1
ARM GAS  /tmp/cctJTvh1.s 			page 142


 6438 0012 02FA03F3 		lsl	r3, r2, r3
 6439 0016 FB60     		str	r3, [r7, #12]
1684:bluetooth_rxtx.c **** 
1685:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1686:bluetooth_rxtx.c ****         CSN_CLR;
 6440              		.loc 1 1686 0
 6441 0018 184B     		ldr	r3, .L297
 6442 001a 2022     		movs	r2, #32
 6443 001c 1A60     		str	r2, [r3]
1687:bluetooth_rxtx.c **** 
1688:bluetooth_rxtx.c **** //      first_ts = CLK100NS;
1689:bluetooth_rxtx.c ****         while (len--) {
 6444              		.loc 1 1689 0
 6445 001e 1EE0     		b	.L291
 6446              	.L295:
1690:bluetooth_rxtx.c ****                 if (data & msb)
 6447              		.loc 1 1690 0
 6448 0020 3A68     		ldr	r2, [r7]
 6449 0022 FB68     		ldr	r3, [r7, #12]
 6450 0024 1340     		ands	r3, r3, r2
 6451 0026 002B     		cmp	r3, #0
 6452 0028 03D0     		beq	.L292
1691:bluetooth_rxtx.c ****                         MOSI_SET;
 6453              		.loc 1 1691 0
 6454 002a 154B     		ldr	r3, .L297+4
 6455 002c 0122     		movs	r2, #1
 6456 002e 1A60     		str	r2, [r3]
 6457 0030 02E0     		b	.L293
 6458              	.L292:
1692:bluetooth_rxtx.c ****                 else
1693:bluetooth_rxtx.c ****                         MOSI_CLR;
 6459              		.loc 1 1693 0
 6460 0032 124B     		ldr	r3, .L297
 6461 0034 0122     		movs	r2, #1
 6462 0036 1A60     		str	r2, [r3]
 6463              	.L293:
1694:bluetooth_rxtx.c ****                 data <<= 1;
 6464              		.loc 1 1694 0
 6465 0038 3B68     		ldr	r3, [r7]
 6466 003a 5B00     		lsls	r3, r3, #1
 6467 003c 3B60     		str	r3, [r7]
1695:bluetooth_rxtx.c **** 
1696:bluetooth_rxtx.c ****                 SCLK_SET;
 6468              		.loc 1 1696 0
 6469 003e 104B     		ldr	r3, .L297+4
 6470 0040 1022     		movs	r2, #16
 6471 0042 1A60     		str	r2, [r3]
1697:bluetooth_rxtx.c ****                 if (MISO)
 6472              		.loc 1 1697 0
 6473 0044 0F4B     		ldr	r3, .L297+8
 6474 0046 1B68     		ldr	r3, [r3]
 6475 0048 03F00203 		and	r3, r3, #2
 6476 004c 002B     		cmp	r3, #0
 6477 004e 03D0     		beq	.L294
1698:bluetooth_rxtx.c ****                         data |= 1;
 6478              		.loc 1 1698 0
 6479 0050 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/cctJTvh1.s 			page 143


 6480 0052 43F00103 		orr	r3, r3, #1
 6481 0056 3B60     		str	r3, [r7]
 6482              	.L294:
1699:bluetooth_rxtx.c **** 
1700:bluetooth_rxtx.c ****                 SCLK_CLR;
 6483              		.loc 1 1700 0
 6484 0058 084B     		ldr	r3, .L297
 6485 005a 1022     		movs	r2, #16
 6486 005c 1A60     		str	r2, [r3]
 6487              	.L291:
1689:bluetooth_rxtx.c ****                 if (data & msb)
 6488              		.loc 1 1689 0
 6489 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6490 0060 5A1E     		subs	r2, r3, #1
 6491 0062 FA71     		strb	r2, [r7, #7]
 6492 0064 002B     		cmp	r3, #0
 6493 0066 DBD1     		bne	.L295
1701:bluetooth_rxtx.c ****         }
1702:bluetooth_rxtx.c **** //      second_ts = CLK100NS;
1703:bluetooth_rxtx.c **** //      diff_ts = second_ts - first_ts;
1704:bluetooth_rxtx.c **** 
1705:bluetooth_rxtx.c ****         CSN_SET;
 6494              		.loc 1 1705 0
 6495 0068 054B     		ldr	r3, .L297+4
 6496 006a 2022     		movs	r2, #32
 6497 006c 1A60     		str	r2, [r3]
1706:bluetooth_rxtx.c ****         return data;
 6498              		.loc 1 1706 0
 6499 006e 3B68     		ldr	r3, [r7]
1707:bluetooth_rxtx.c **** }
 6500              		.loc 1 1707 0
 6501 0070 1846     		mov	r0, r3
 6502 0072 1437     		adds	r7, r7, #20
 6503              		.cfi_def_cfa_offset 4
 6504 0074 BD46     		mov	sp, r7
 6505              		.cfi_def_cfa_register 13
 6506              		@ sp needed
 6507 0076 5DF8047B 		ldr	r7, [sp], #4
 6508              		.cfi_restore 7
 6509              		.cfi_def_cfa_offset 0
 6510 007a 7047     		bx	lr
 6511              	.L298:
 6512              		.align	2
 6513              	.L297:
 6514 007c 5CC00920 		.word	537509980
 6515 0080 58C00920 		.word	537509976
 6516 0084 54C00920 		.word	537509972
 6517              		.cfi_endproc
 6518              	.LFE30:
 6520              		.section	.text.cc2400_get_rev,"ax",%progbits
 6521              		.align	2
 6522              		.global	cc2400_get_rev
 6523              		.thumb
 6524              		.thumb_func
 6526              	cc2400_get_rev:
 6527              	.LFB31:
1708:bluetooth_rxtx.c **** /*
ARM GAS  /tmp/cctJTvh1.s 			page 144


1709:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1710:bluetooth_rxtx.c **** {
1711:bluetooth_rxtx.c ****         u32 in;
1712:bluetooth_rxtx.c **** 
1713:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
1714:bluetooth_rxtx.c ****         in = cc2400_spi_rev(16, out);
1715:bluetooth_rxtx.c ****         return in & 0xFF;
1716:bluetooth_rxtx.c **** }
1717:bluetooth_rxtx.c **** */
1718:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1719:bluetooth_rxtx.c **** {
 6528              		.loc 1 1719 0
 6529              		.cfi_startproc
 6530              		@ args = 0, pretend = 0, frame = 24
 6531              		@ frame_needed = 1, uses_anonymous_args = 0
 6532              		@ link register save eliminated.
 6533 0000 80B4     		push	{r7}
 6534              		.cfi_def_cfa_offset 4
 6535              		.cfi_offset 7, -4
 6536 0002 87B0     		sub	sp, sp, #28
 6537              		.cfi_def_cfa_offset 32
 6538 0004 00AF     		add	r7, sp, #0
 6539              		.cfi_def_cfa_register 7
 6540 0006 0346     		mov	r3, r0
 6541 0008 FB71     		strb	r3, [r7, #7]
1720:bluetooth_rxtx.c **** //        u32 in;
1721:bluetooth_rxtx.c **** 
1722:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
 6542              		.loc 1 1722 0
 6543 000a FB79     		ldrb	r3, [r7, #7]
 6544 000c 63F07F03 		orn	r3, r3, #127
 6545 0010 DBB2     		uxtb	r3, r3
 6546 0012 1B02     		lsls	r3, r3, #8
 6547 0014 7B61     		str	r3, [r7, #20]
1723:bluetooth_rxtx.c **** //        in = cc2400_spi_rev(16, out);
1724:bluetooth_rxtx.c ****         u32 msb = 1 << 15;
 6548              		.loc 1 1724 0
 6549 0016 4FF40043 		mov	r3, #32768
 6550 001a FB60     		str	r3, [r7, #12]
1725:bluetooth_rxtx.c **** 	
1726:bluetooth_rxtx.c **** 	u8 len = 16;
 6551              		.loc 1 1726 0
 6552 001c 1023     		movs	r3, #16
 6553 001e FB74     		strb	r3, [r7, #19]
1727:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1728:bluetooth_rxtx.c ****         CSN_CLR;
 6554              		.loc 1 1728 0
 6555 0020 194B     		ldr	r3, .L306
 6556 0022 2022     		movs	r2, #32
 6557 0024 1A60     		str	r2, [r3]
1729:bluetooth_rxtx.c **** //      first_ts = CLK100NS;
1730:bluetooth_rxtx.c ****         while (len--) {
 6558              		.loc 1 1730 0
 6559 0026 1EE0     		b	.L300
 6560              	.L304:
1731:bluetooth_rxtx.c ****                 if (out & msb)
 6561              		.loc 1 1731 0
ARM GAS  /tmp/cctJTvh1.s 			page 145


 6562 0028 7A69     		ldr	r2, [r7, #20]
 6563 002a FB68     		ldr	r3, [r7, #12]
 6564 002c 1340     		ands	r3, r3, r2
 6565 002e 002B     		cmp	r3, #0
 6566 0030 03D0     		beq	.L301
1732:bluetooth_rxtx.c ****                         MOSI_SET;
 6567              		.loc 1 1732 0
 6568 0032 164B     		ldr	r3, .L306+4
 6569 0034 0122     		movs	r2, #1
 6570 0036 1A60     		str	r2, [r3]
 6571 0038 02E0     		b	.L302
 6572              	.L301:
1733:bluetooth_rxtx.c ****                 else
1734:bluetooth_rxtx.c ****                         MOSI_CLR;
 6573              		.loc 1 1734 0
 6574 003a 134B     		ldr	r3, .L306
 6575 003c 0122     		movs	r2, #1
 6576 003e 1A60     		str	r2, [r3]
 6577              	.L302:
1735:bluetooth_rxtx.c ****               
1736:bluetooth_rxtx.c **** 		out <<= 1;
 6578              		.loc 1 1736 0
 6579 0040 7B69     		ldr	r3, [r7, #20]
 6580 0042 5B00     		lsls	r3, r3, #1
 6581 0044 7B61     		str	r3, [r7, #20]
1737:bluetooth_rxtx.c **** 
1738:bluetooth_rxtx.c ****                 SCLK_SET;
 6582              		.loc 1 1738 0
 6583 0046 114B     		ldr	r3, .L306+4
 6584 0048 1022     		movs	r2, #16
 6585 004a 1A60     		str	r2, [r3]
1739:bluetooth_rxtx.c ****                 if (MISO)
 6586              		.loc 1 1739 0
 6587 004c 104B     		ldr	r3, .L306+8
 6588 004e 1B68     		ldr	r3, [r3]
 6589 0050 03F00203 		and	r3, r3, #2
 6590 0054 002B     		cmp	r3, #0
 6591 0056 03D0     		beq	.L303
1740:bluetooth_rxtx.c ****                         out |= 1;
 6592              		.loc 1 1740 0
 6593 0058 7B69     		ldr	r3, [r7, #20]
 6594 005a 43F00103 		orr	r3, r3, #1
 6595 005e 7B61     		str	r3, [r7, #20]
 6596              	.L303:
1741:bluetooth_rxtx.c **** 
1742:bluetooth_rxtx.c ****                 SCLK_CLR;
 6597              		.loc 1 1742 0
 6598 0060 094B     		ldr	r3, .L306
 6599 0062 1022     		movs	r2, #16
 6600 0064 1A60     		str	r2, [r3]
 6601              	.L300:
1730:bluetooth_rxtx.c ****                 if (out & msb)
 6602              		.loc 1 1730 0
 6603 0066 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 6604 0068 5A1E     		subs	r2, r3, #1
 6605 006a FA74     		strb	r2, [r7, #19]
 6606 006c 002B     		cmp	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 146


 6607 006e DBD1     		bne	.L304
1743:bluetooth_rxtx.c ****         }
1744:bluetooth_rxtx.c **** //      second_ts = CLK100NS;
1745:bluetooth_rxtx.c **** //      diff_ts = second_ts - first_ts;
1746:bluetooth_rxtx.c **** 
1747:bluetooth_rxtx.c ****         CSN_SET;
 6608              		.loc 1 1747 0
 6609 0070 064B     		ldr	r3, .L306+4
 6610 0072 2022     		movs	r2, #32
 6611 0074 1A60     		str	r2, [r3]
1748:bluetooth_rxtx.c ****   
1749:bluetooth_rxtx.c **** 
1750:bluetooth_rxtx.c ****         return out & 0xFF;
 6612              		.loc 1 1750 0
 6613 0076 7B69     		ldr	r3, [r7, #20]
 6614 0078 DBB2     		uxtb	r3, r3
1751:bluetooth_rxtx.c **** }
 6615              		.loc 1 1751 0
 6616 007a 1846     		mov	r0, r3
 6617 007c 1C37     		adds	r7, r7, #28
 6618              		.cfi_def_cfa_offset 4
 6619 007e BD46     		mov	sp, r7
 6620              		.cfi_def_cfa_register 13
 6621              		@ sp needed
 6622 0080 5DF8047B 		ldr	r7, [sp], #4
 6623              		.cfi_restore 7
 6624              		.cfi_def_cfa_offset 0
 6625 0084 7047     		bx	lr
 6626              	.L307:
 6627 0086 00BF     		.align	2
 6628              	.L306:
 6629 0088 5CC00920 		.word	537509980
 6630 008c 58C00920 		.word	537509976
 6631 0090 54C00920 		.word	537509972
 6632              		.cfi_endproc
 6633              	.LFE31:
 6635              		.section	.text.add,"ax",%progbits
 6636              		.align	2
 6637              		.global	add
 6638              		.thumb
 6639              		.thumb_func
 6641              	add:
 6642              	.LFB32:
1752:bluetooth_rxtx.c **** 
1753:bluetooth_rxtx.c **** 
1754:bluetooth_rxtx.c **** u8 add (u8 x, u8 y)
1755:bluetooth_rxtx.c **** {
 6643              		.loc 1 1755 0
 6644              		.cfi_startproc
 6645              		@ args = 0, pretend = 0, frame = 16
 6646              		@ frame_needed = 1, uses_anonymous_args = 0
 6647              		@ link register save eliminated.
 6648 0000 80B4     		push	{r7}
 6649              		.cfi_def_cfa_offset 4
 6650              		.cfi_offset 7, -4
 6651 0002 85B0     		sub	sp, sp, #20
 6652              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/cctJTvh1.s 			page 147


 6653 0004 00AF     		add	r7, sp, #0
 6654              		.cfi_def_cfa_register 7
 6655 0006 0346     		mov	r3, r0
 6656 0008 0A46     		mov	r2, r1
 6657 000a FB71     		strb	r3, [r7, #7]
 6658 000c 1346     		mov	r3, r2
 6659 000e BB71     		strb	r3, [r7, #6]
1756:bluetooth_rxtx.c ****   while (y)
 6660              		.loc 1 1756 0
 6661 0010 0AE0     		b	.L309
 6662              	.L310:
 6663              	.LBB3:
1757:bluetooth_rxtx.c ****   {
1758:bluetooth_rxtx.c ****     u8 carry = x & y;
 6664              		.loc 1 1758 0
 6665 0012 FA79     		ldrb	r2, [r7, #7]
 6666 0014 BB79     		ldrb	r3, [r7, #6]
 6667 0016 1340     		ands	r3, r3, r2
 6668 0018 FB73     		strb	r3, [r7, #15]
1759:bluetooth_rxtx.c ****     x = x ^ y;
 6669              		.loc 1 1759 0
 6670 001a FA79     		ldrb	r2, [r7, #7]
 6671 001c BB79     		ldrb	r3, [r7, #6]
 6672 001e 5340     		eors	r3, r3, r2
 6673 0020 FB71     		strb	r3, [r7, #7]
1760:bluetooth_rxtx.c ****     y = carry << 1;
 6674              		.loc 1 1760 0
 6675 0022 FB7B     		ldrb	r3, [r7, #15]
 6676 0024 5B00     		lsls	r3, r3, #1
 6677 0026 BB71     		strb	r3, [r7, #6]
 6678              	.L309:
 6679              	.LBE3:
1756:bluetooth_rxtx.c ****   {
 6680              		.loc 1 1756 0
 6681 0028 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 6682 002a 002B     		cmp	r3, #0
 6683 002c F1D1     		bne	.L310
1761:bluetooth_rxtx.c ****   }
1762:bluetooth_rxtx.c ****   return x;
 6684              		.loc 1 1762 0
 6685 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
1763:bluetooth_rxtx.c **** }
 6686              		.loc 1 1763 0
 6687 0030 1846     		mov	r0, r3
 6688 0032 1437     		adds	r7, r7, #20
 6689              		.cfi_def_cfa_offset 4
 6690 0034 BD46     		mov	sp, r7
 6691              		.cfi_def_cfa_register 13
 6692              		@ sp needed
 6693 0036 5DF8047B 		ldr	r7, [sp], #4
 6694              		.cfi_restore 7
 6695              		.cfi_def_cfa_offset 0
 6696 003a 7047     		bx	lr
 6697              		.cfi_endproc
 6698              	.LFE32:
 6700              		.section	.text.bt_stream_hop,"ax",%progbits
 6701              		.align	2
ARM GAS  /tmp/cctJTvh1.s 			page 148


 6702              		.global	bt_stream_hop
 6703              		.thumb
 6704              		.thumb_func
 6706              	bt_stream_hop:
 6707              	.LFB33:
1764:bluetooth_rxtx.c **** 
1765:bluetooth_rxtx.c **** //wpson hop
1766:bluetooth_rxtx.c **** void bt_stream_hop ()
1767:bluetooth_rxtx.c **** {
 6708              		.loc 1 1767 0
 6709              		.cfi_startproc
 6710              		@ args = 0, pretend = 0, frame = 88
 6711              		@ frame_needed = 1, uses_anonymous_args = 0
 6712 0000 90B5     		push	{r4, r7, lr}
 6713              		.cfi_def_cfa_offset 12
 6714              		.cfi_offset 4, -12
 6715              		.cfi_offset 7, -8
 6716              		.cfi_offset 14, -4
 6717 0002 97B0     		sub	sp, sp, #92
 6718              		.cfi_def_cfa_offset 104
 6719 0004 00AF     		add	r7, sp, #0
 6720              		.cfi_def_cfa_register 7
1768:bluetooth_rxtx.c **** 	RXLED_CLR;
 6721              		.loc 1 1768 0
 6722 0006 AB4B     		ldr	r3, .L343
 6723 0008 1022     		movs	r2, #16
 6724 000a 1A60     		str	r2, [r3]
1769:bluetooth_rxtx.c **** 	int i ;
1770:bluetooth_rxtx.c **** 
1771:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6725              		.loc 1 1771 0
 6726 000c AA4B     		ldr	r3, .L343+4
 6727 000e 4FF08072 		mov	r2, #16777216
 6728 0012 1A60     		str	r2, [r3]
1772:bluetooth_rxtx.c **** 	
1773:bluetooth_rxtx.c **** 	queue_init();
 6729              		.loc 1 1773 0
 6730 0014 FFF7FEFF 		bl	queue_init
1774:bluetooth_rxtx.c **** 	dio_ssp_init();
 6731              		.loc 1 1774 0
 6732 0018 FFF7FEFF 		bl	dio_ssp_init
1775:bluetooth_rxtx.c **** 	dma_init_le();
 6733              		.loc 1 1775 0
 6734 001c FFF7FEFF 		bl	dma_init_le
1776:bluetooth_rxtx.c **** 	dio_ssp_start();
 6735              		.loc 1 1776 0
 6736 0020 FFF7FEFF 		bl	dio_ssp_start
1777:bluetooth_rxtx.c **** 	
1778:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6737              		.loc 1 1778 0
 6738 0024 0D20     		movs	r0, #13
 6739 0026 47F6FF71 		movw	r1, #32767
 6740 002a FFF7FEFF 		bl	cc2400_set
1779:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6741              		.loc 1 1779 0
 6742 002e 1220     		movs	r0, #18
 6743 0030 42F62231 		movw	r1, #11042
ARM GAS  /tmp/cctJTvh1.s 			page 149


 6744 0034 FFF7FEFF 		bl	cc2400_set
1780:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6745              		.loc 1 1780 0
 6746 0038 1420     		movs	r0, #20
 6747 003a 41F24B21 		movw	r1, #4683
 6748 003e FFF7FEFF 		bl	cc2400_set
1781:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6749              		.loc 1 1781 0
 6750 0042 2020     		movs	r0, #32
 6751 0044 40F26151 		movw	r1, #1377
 6752 0048 FFF7FEFF 		bl	cc2400_set
1782:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6753              		.loc 1 1782 0
 6754 004c 0320     		movs	r0, #3
 6755 004e 4021     		movs	r1, #64
 6756 0050 FFF7FEFF 		bl	cc2400_set
1783:bluetooth_rxtx.c **** 
1784:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1785:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1786:bluetooth_rxtx.c **** 	
1787:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 6757              		.loc 1 1787 0
 6758 0054 9948     		ldr	r0, .L343+8
 6759 0056 FFF7FEFF 		bl	rbit
 6760 005a 0346     		mov	r3, r0
 6761 005c 9BB2     		uxth	r3, r3
 6762 005e 2C20     		movs	r0, #44
 6763 0060 1946     		mov	r1, r3
 6764 0062 FFF7FEFF 		bl	cc2400_set
1788:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 6765              		.loc 1 1788 0
 6766 0066 9548     		ldr	r0, .L343+8
 6767 0068 FFF7FEFF 		bl	rbit
 6768 006c 0346     		mov	r3, r0
 6769 006e 1B0C     		lsrs	r3, r3, #16
 6770 0070 9BB2     		uxth	r3, r3
 6771 0072 2D20     		movs	r0, #45
 6772 0074 1946     		mov	r1, r3
 6773 0076 FFF7FEFF 		bl	cc2400_set
1789:bluetooth_rxtx.c **** 	
1790:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1791:bluetooth_rxtx.c **** 	PAEN_SET;
 6774              		.loc 1 1791 0
 6775 007a 914B     		ldr	r3, .L343+12
 6776 007c 8022     		movs	r2, #128
 6777 007e 1A60     		str	r2, [r3]
1792:bluetooth_rxtx.c **** //	HGM_SET;
1793:bluetooth_rxtx.c **** #endif
1794:bluetooth_rxtx.c **** 
1795:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6778              		.loc 1 1795 0
 6779 0080 00BF     		nop
 6780              	.L313:
 6781              		.loc 1 1795 0 is_stmt 0 discriminator 1
 6782 0082 FFF7FEFF 		bl	cc2400_status
 6783 0086 0346     		mov	r3, r0
 6784 0088 03F04003 		and	r3, r3, #64
ARM GAS  /tmp/cctJTvh1.s 			page 150


 6785 008c 002B     		cmp	r3, #0
 6786 008e F8D0     		beq	.L313
1796:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6787              		.loc 1 1796 0 is_stmt 1
 6788 0090 00BF     		nop
 6789              	.L314:
 6790              		.loc 1 1796 0 is_stmt 0 discriminator 1
 6791 0092 FFF7FEFF 		bl	cc2400_status
 6792 0096 0346     		mov	r3, r0
 6793 0098 03F00403 		and	r3, r3, #4
 6794 009c 002B     		cmp	r3, #0
 6795 009e F8D1     		bne	.L314
1797:bluetooth_rxtx.c **** 
1798:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6796              		.loc 1 1798 0 is_stmt 1
 6797 00a0 884B     		ldr	r3, .L343+16
 6798 00a2 1B88     		ldrh	r3, [r3]	@ movhi
 6799 00a4 9BB2     		uxth	r3, r3
 6800 00a6 013B     		subs	r3, r3, #1
 6801 00a8 9BB2     		uxth	r3, r3
 6802 00aa 0220     		movs	r0, #2
 6803 00ac 1946     		mov	r1, r3
 6804 00ae FFF7FEFF 		bl	cc2400_set
1799:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6805              		.loc 1 1799 0
 6806 00b2 6120     		movs	r0, #97
 6807 00b4 FFF7FEFF 		bl	cc2400_strobe
1800:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6808              		.loc 1 1800 0
 6809 00b8 00BF     		nop
 6810              	.L315:
 6811              		.loc 1 1800 0 is_stmt 0 discriminator 1
 6812 00ba FFF7FEFF 		bl	cc2400_status
 6813 00be 0346     		mov	r3, r0
 6814 00c0 03F00403 		and	r3, r3, #4
 6815 00c4 002B     		cmp	r3, #0
 6816 00c6 F8D0     		beq	.L315
1801:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6817              		.loc 1 1801 0 is_stmt 1
 6818 00c8 6220     		movs	r0, #98
 6819 00ca FFF7FEFF 		bl	cc2400_strobe
1802:bluetooth_rxtx.c **** 	
1803:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_HOP) {
 6820              		.loc 1 1803 0
 6821 00ce 71E1     		b	.L316
 6822              	.L342:
 6823              	.LBB4:
1804:bluetooth_rxtx.c **** 
1805:bluetooth_rxtx.c **** //		ICER0 = ICER0_ICE_USB;		
1806:bluetooth_rxtx.c **** 		while ((!(cc2400_status () & SYNC_RECEIVED)) && (requested_channel == channel));
 6824              		.loc 1 1806 0
 6825 00d0 00BF     		nop
 6826              	.L318:
 6827              		.loc 1 1806 0 is_stmt 0 discriminator 2
 6828 00d2 FFF7FEFF 		bl	cc2400_status
 6829 00d6 0346     		mov	r3, r0
 6830 00d8 03F01003 		and	r3, r3, #16
ARM GAS  /tmp/cctJTvh1.s 			page 151


 6831 00dc 002B     		cmp	r3, #0
 6832 00de 07D1     		bne	.L317
 6833              		.loc 1 1806 0 discriminator 1
 6834 00e0 794B     		ldr	r3, .L343+20
 6835 00e2 1B88     		ldrh	r3, [r3]	@ movhi
 6836 00e4 9AB2     		uxth	r2, r3
 6837 00e6 774B     		ldr	r3, .L343+16
 6838 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 6839 00ea 9BB2     		uxth	r3, r3
 6840 00ec 9A42     		cmp	r2, r3
 6841 00ee F0D0     		beq	.L318
 6842              	.L317:
1807:bluetooth_rxtx.c **** /*		int out;
1808:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1809:bluetooth_rxtx.c ****                 if (rssi >= 128)
1810:bluetooth_rxtx.c ****                         out = rssi - 256;
1811:bluetooth_rxtx.c ****                 else
1812:bluetooth_rxtx.c ****                         out = rssi;
1813:bluetooth_rxtx.c ****                 if (out < 0)
1814:bluetooth_rxtx.c **** 		  goto rx_flush;
1815:bluetooth_rxtx.c **** */
1816:bluetooth_rxtx.c **** 		if (requested_channel != channel)
 6843              		.loc 1 1816 0 is_stmt 1
 6844 00f0 754B     		ldr	r3, .L343+20
 6845 00f2 1B88     		ldrh	r3, [r3]	@ movhi
 6846 00f4 9AB2     		uxth	r2, r3
 6847 00f6 734B     		ldr	r3, .L343+16
 6848 00f8 1B88     		ldrh	r3, [r3]	@ movhi
 6849 00fa 9BB2     		uxth	r3, r3
 6850 00fc 9A42     		cmp	r2, r3
 6851 00fe 00D0     		beq	.L319
1817:bluetooth_rxtx.c **** 			goto rx_flush;
 6852              		.loc 1 1817 0
 6853 0100 06E1     		b	.L320
 6854              	.L319:
1818:bluetooth_rxtx.c **** 
1819:bluetooth_rxtx.c **** 
1820:bluetooth_rxtx.c **** 		rssi_sum = 0;
 6855              		.loc 1 1820 0
 6856 0102 724B     		ldr	r3, .L343+24
 6857 0104 0022     		movs	r2, #0
 6858 0106 1A60     		str	r2, [r3]
1821:bluetooth_rxtx.c **** 		rssi_count = 2;
 6859              		.loc 1 1821 0
 6860 0108 714B     		ldr	r3, .L343+28
 6861 010a 0222     		movs	r2, #2
 6862 010c 1A70     		strb	r2, [r3]
1822:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6863              		.loc 1 1822 0
 6864 010e 0023     		movs	r3, #0
 6865 0110 7B65     		str	r3, [r7, #84]
 6866 0112 0FE0     		b	.L321
 6867              	.L322:
1823:bluetooth_rxtx.c **** 		{
1824:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 6868              		.loc 1 1824 0 discriminator 3
 6869 0114 0620     		movs	r0, #6
ARM GAS  /tmp/cctJTvh1.s 			page 152


 6870 0116 FFF7FEFF 		bl	cc2400_get
 6871 011a 0346     		mov	r3, r0
 6872 011c 1B0A     		lsrs	r3, r3, #8
 6873 011e 9BB2     		uxth	r3, r3
 6874 0120 DBB2     		uxtb	r3, r3
 6875 0122 5AB2     		sxtb	r2, r3
 6876 0124 694B     		ldr	r3, .L343+24
 6877 0126 1B68     		ldr	r3, [r3]
 6878 0128 1344     		add	r3, r3, r2
 6879 012a 684A     		ldr	r2, .L343+24
 6880 012c 1360     		str	r3, [r2]
1822:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6881              		.loc 1 1822 0 discriminator 3
 6882 012e 7B6D     		ldr	r3, [r7, #84]
 6883 0130 0133     		adds	r3, r3, #1
 6884 0132 7B65     		str	r3, [r7, #84]
 6885              	.L321:
1822:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6886              		.loc 1 1822 0 is_stmt 0 discriminator 1
 6887 0134 664B     		ldr	r3, .L343+28
 6888 0136 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6889 0138 1A46     		mov	r2, r3
 6890 013a 7B6D     		ldr	r3, [r7, #84]
 6891 013c 9A42     		cmp	r2, r3
 6892 013e E9DC     		bgt	.L322
1825:bluetooth_rxtx.c **** 		}
1826:bluetooth_rxtx.c **** 	
1827:bluetooth_rxtx.c **** //		ISER0 = ISER0_ISE_USB;
1828:bluetooth_rxtx.c **** 		clkn_legacy = clkn;
 6893              		.loc 1 1828 0 is_stmt 1
 6894 0140 644B     		ldr	r3, .L343+32
 6895 0142 1B68     		ldr	r3, [r3]
 6896 0144 644A     		ldr	r2, .L343+36
 6897 0146 1360     		str	r3, [r2]
1829:bluetooth_rxtx.c **** 		while (!rx_tc);
 6898              		.loc 1 1829 0
 6899 0148 00BF     		nop
 6900              	.L323:
 6901              		.loc 1 1829 0 is_stmt 0 discriminator 1
 6902 014a 644B     		ldr	r3, .L343+40
 6903 014c 1B68     		ldr	r3, [r3]
 6904 014e 002B     		cmp	r3, #0
 6905 0150 FBD0     		beq	.L323
1830:bluetooth_rxtx.c **** 	
1831:bluetooth_rxtx.c **** 		if (requested_mode != MODE_RX_HOP)
 6906              		.loc 1 1831 0 is_stmt 1
 6907 0152 634B     		ldr	r3, .L343+44
 6908 0154 1B78     		ldrb	r3, [r3]
 6909 0156 DBB2     		uxtb	r3, r3
 6910 0158 102B     		cmp	r3, #16
 6911 015a 40F03181 		bne	.L325
1832:bluetooth_rxtx.c **** 			goto cleanup;
1833:bluetooth_rxtx.c **** 
1834:bluetooth_rxtx.c **** 		
1835:bluetooth_rxtx.c **** 		if (rx_err) {
 6912              		.loc 1 1835 0
 6913 015e 614B     		ldr	r3, .L343+48
ARM GAS  /tmp/cctJTvh1.s 			page 153


 6914 0160 1B68     		ldr	r3, [r3]
 6915 0162 002B     		cmp	r3, #0
 6916 0164 07D0     		beq	.L326
1836:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 6917              		.loc 1 1836 0
 6918 0166 604B     		ldr	r3, .L343+52
 6919 0168 1B78     		ldrb	r3, [r3]
 6920 016a DBB2     		uxtb	r3, r3
 6921 016c 43F00203 		orr	r3, r3, #2
 6922 0170 DAB2     		uxtb	r2, r3
 6923 0172 5D4B     		ldr	r3, .L343+52
 6924 0174 1A70     		strb	r2, [r3]
 6925              	.L326:
1837:bluetooth_rxtx.c **** 		}	
1838:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6926              		.loc 1 1838 0
 6927 0176 594B     		ldr	r3, .L343+40
 6928 0178 1B68     		ldr	r3, [r3]
 6929 017a 012B     		cmp	r3, #1
 6930 017c 07D9     		bls	.L327
1839:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6931              		.loc 1 1839 0
 6932 017e 5A4B     		ldr	r3, .L343+52
 6933 0180 1B78     		ldrb	r3, [r3]
 6934 0182 DBB2     		uxtb	r3, r3
 6935 0184 43F00103 		orr	r3, r3, #1
 6936 0188 DAB2     		uxtb	r2, r3
 6937 018a 574B     		ldr	r3, .L343+52
 6938 018c 1A70     		strb	r2, [r3]
 6939              	.L327:
1840:bluetooth_rxtx.c **** 
1841:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1842:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6940              		.loc 1 1842 0
 6941 018e 3B1D     		adds	r3, r7, #4
 6942 0190 FB64     		str	r3, [r7, #76]
1843:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 6943              		.loc 1 1843 0
 6944 0192 564B     		ldr	r3, .L343+56
 6945 0194 1B68     		ldr	r3, [r3]
 6946 0196 7B60     		str	r3, [r7, #4]
1844:bluetooth_rxtx.c **** 
1845:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 6947              		.loc 1 1845 0
 6948 0198 00BF     		nop
 6949              	.L329:
 6950              		.loc 1 1845 0 is_stmt 0 discriminator 2
 6951 019a 554B     		ldr	r3, .L343+60
 6952 019c 1B68     		ldr	r3, [r3]
 6953 019e 03F00103 		and	r3, r3, #1
 6954 01a2 002B     		cmp	r3, #0
 6955 01a4 03D0     		beq	.L328
 6956              		.loc 1 1845 0 discriminator 1
 6957 01a6 4F4B     		ldr	r3, .L343+48
 6958 01a8 1B68     		ldr	r3, [r3]
 6959 01aa 002B     		cmp	r3, #0
 6960 01ac F5D0     		beq	.L329
ARM GAS  /tmp/cctJTvh1.s 			page 154


 6961              	.L328:
1846:bluetooth_rxtx.c ****                 
1847:bluetooth_rxtx.c **** 			
1848:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6962              		.loc 1 1848 0 is_stmt 1
 6963 01ae 514A     		ldr	r2, .L343+64
 6964 01b0 504B     		ldr	r3, .L343+64
 6965 01b2 1B68     		ldr	r3, [r3]
 6966 01b4 23F00103 		bic	r3, r3, #1
 6967 01b8 1360     		str	r3, [r2]
1849:bluetooth_rxtx.c **** 	
1850:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 6968              		.loc 1 1850 0
 6969 01ba 424B     		ldr	r3, .L343+16
 6970 01bc 1B88     		ldrh	r3, [r3]	@ movhi
 6971 01be 9BB2     		uxth	r3, r3
 6972 01c0 DBB2     		uxtb	r3, r3
 6973 01c2 623B     		subs	r3, r3, #98
 6974 01c4 DBB2     		uxtb	r3, r3
 6975 01c6 1846     		mov	r0, r3
 6976 01c8 FFF7FEFF 		bl	btle_channel_index
 6977 01cc 0346     		mov	r3, r0
 6978 01ce 1A46     		mov	r2, r3
 6979 01d0 1346     		mov	r3, r2
 6980 01d2 5B00     		lsls	r3, r3, #1
 6981 01d4 1344     		add	r3, r3, r2
 6982 01d6 1B01     		lsls	r3, r3, #4
 6983 01d8 474A     		ldr	r2, .L343+68
 6984 01da 1344     		add	r3, r3, r2
 6985 01dc BB64     		str	r3, [r7, #72]
1851:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 6986              		.loc 1 1851 0
 6987 01de 0023     		movs	r3, #0
 6988 01e0 7B65     		str	r3, [r7, #84]
 6989 01e2 34E0     		b	.L330
 6990              	.L333:
 6991              	.LBB5:
1852:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6992              		.loc 1 1852 0 discriminator 3
 6993 01e4 454A     		ldr	r2, .L343+72
 6994 01e6 7B6D     		ldr	r3, [r7, #84]
 6995 01e8 1344     		add	r3, r3, r2
 6996 01ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6997 01ec 1A06     		lsls	r2, r3, #24
1853:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 6998              		.loc 1 1853 0 discriminator 3
 6999 01ee 7B6D     		ldr	r3, [r7, #84]
 7000 01f0 0133     		adds	r3, r3, #1
 7001 01f2 4249     		ldr	r1, .L343+72
 7002 01f4 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7003 01f6 1B04     		lsls	r3, r3, #16
 7004 01f8 1A43     		orrs	r2, r2, r3
1854:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 7005              		.loc 1 1854 0 discriminator 3
 7006 01fa 7B6D     		ldr	r3, [r7, #84]
 7007 01fc 0233     		adds	r3, r3, #2
 7008 01fe 3F49     		ldr	r1, .L343+72
ARM GAS  /tmp/cctJTvh1.s 			page 155


 7009 0200 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7010 0202 1B02     		lsls	r3, r3, #8
 7011 0204 1343     		orrs	r3, r3, r2
1855:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 7012              		.loc 1 1855 0 discriminator 3
 7013 0206 7A6D     		ldr	r2, [r7, #84]
 7014 0208 0332     		adds	r2, r2, #3
 7015 020a 3C49     		ldr	r1, .L343+72
 7016 020c 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7017 020e 1343     		orrs	r3, r3, r2
1852:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7018              		.loc 1 1852 0 discriminator 3
 7019 0210 7B64     		str	r3, [r7, #68]
1856:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 7020              		.loc 1 1856 0 discriminator 3
 7021 0212 7B6D     		ldr	r3, [r7, #84]
 7022 0214 002B     		cmp	r3, #0
 7023 0216 00DA     		bge	.L331
 7024 0218 0333     		adds	r3, r3, #3
 7025              	.L331:
 7026 021a 9B10     		asrs	r3, r3, #2
 7027 021c 5C1C     		adds	r4, r3, #1
 7028 021e 786C     		ldr	r0, [r7, #68]
 7029 0220 FFF7FEFF 		bl	rbit
 7030 0224 0146     		mov	r1, r0
 7031 0226 7B6D     		ldr	r3, [r7, #84]
 7032 0228 002B     		cmp	r3, #0
 7033 022a 00DA     		bge	.L332
 7034 022c 0333     		adds	r3, r3, #3
 7035              	.L332:
 7036 022e 9B10     		asrs	r3, r3, #2
 7037 0230 9B00     		lsls	r3, r3, #2
 7038 0232 BA6C     		ldr	r2, [r7, #72]
 7039 0234 1344     		add	r3, r3, r2
 7040 0236 1B68     		ldr	r3, [r3]
 7041 0238 81EA0302 		eor	r2, r1, r3
 7042 023c A300     		lsls	r3, r4, #2
 7043 023e 07F15801 		add	r1, r7, #88
 7044 0242 0B44     		add	r3, r3, r1
 7045 0244 43F8542C 		str	r2, [r3, #-84]
 7046              	.LBE5:
1851:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7047              		.loc 1 1851 0 discriminator 3
 7048 0248 7B6D     		ldr	r3, [r7, #84]
 7049 024a 0433     		adds	r3, r3, #4
 7050 024c 7B65     		str	r3, [r7, #84]
 7051              	.L330:
1851:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7052              		.loc 1 1851 0 is_stmt 0 discriminator 1
 7053 024e 7B6D     		ldr	r3, [r7, #84]
 7054 0250 2B2B     		cmp	r3, #43
 7055 0252 C7DD     		ble	.L333
1857:bluetooth_rxtx.c **** 		}
1858:bluetooth_rxtx.c **** 
1859:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
1860:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
1861:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
ARM GAS  /tmp/cctJTvh1.s 			page 156


1862:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
1863:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
1864:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1865:bluetooth_rxtx.c **** 		}
1866:bluetooth_rxtx.c **** */
1867:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7056              		.loc 1 1867 0 is_stmt 1
 7057 0254 FB6C     		ldr	r3, [r7, #76]
 7058 0256 0533     		adds	r3, r3, #5
 7059 0258 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7060 025a 03F03F03 		and	r3, r3, #63
 7061 025e 0233     		adds	r3, r3, #2
 7062 0260 3B64     		str	r3, [r7, #64]
1868:bluetooth_rxtx.c **** 		
1869:bluetooth_rxtx.c **** 		if (len > 39)
 7063              		.loc 1 1869 0
 7064 0262 3B6C     		ldr	r3, [r7, #64]
 7065 0264 272B     		cmp	r3, #39
 7066 0266 00D9     		bls	.L334
1870:bluetooth_rxtx.c **** 			goto rx_flush;
 7067              		.loc 1 1870 0
 7068 0268 52E0     		b	.L320
 7069              	.L334:
1871:bluetooth_rxtx.c **** 
1872:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7070              		.loc 1 1872 0
 7071 026a 204B     		ldr	r3, .L343+56
 7072 026c D968     		ldr	r1, [r3, #12]
 7073 026e FB6C     		ldr	r3, [r7, #76]
 7074 0270 1A1D     		adds	r2, r3, #4
 7075 0272 3B6C     		ldr	r3, [r7, #64]
 7076 0274 0846     		mov	r0, r1
 7077 0276 1146     		mov	r1, r2
 7078 0278 1A46     		mov	r2, r3
 7079 027a FFF7FEFF 		bl	btle_crcgen_lut
 7080 027e F863     		str	r0, [r7, #60]
1873:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7081              		.loc 1 1873 0
 7082 0280 3B6C     		ldr	r3, [r7, #64]
 7083 0282 0633     		adds	r3, r3, #6
 7084 0284 FA6C     		ldr	r2, [r7, #76]
 7085 0286 1344     		add	r3, r3, r2
 7086 0288 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7087 028a 1A04     		lsls	r2, r3, #16
1874:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 7088              		.loc 1 1874 0
 7089 028c 3B6C     		ldr	r3, [r7, #64]
 7090 028e 0533     		adds	r3, r3, #5
 7091 0290 F96C     		ldr	r1, [r7, #76]
 7092 0292 0B44     		add	r3, r3, r1
 7093 0294 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7094 0296 1B02     		lsls	r3, r3, #8
 7095 0298 1343     		orrs	r3, r3, r2
1875:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 7096              		.loc 1 1875 0
 7097 029a 3A6C     		ldr	r2, [r7, #64]
 7098 029c 0432     		adds	r2, r2, #4
ARM GAS  /tmp/cctJTvh1.s 			page 157


 7099 029e F96C     		ldr	r1, [r7, #76]
 7100 02a0 0A44     		add	r2, r2, r1
 7101 02a2 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7102 02a4 1343     		orrs	r3, r3, r2
1873:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7103              		.loc 1 1873 0
 7104 02a6 BB63     		str	r3, [r7, #56]
1876:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 7105              		.loc 1 1876 0
 7106 02a8 FA6B     		ldr	r2, [r7, #60]
 7107 02aa BB6B     		ldr	r3, [r7, #56]
 7108 02ac 9A42     		cmp	r2, r3
 7109 02ae 27D0     		beq	.L335
1877:bluetooth_rxtx.c ****                         goto rx_flush;
 7110              		.loc 1 1877 0
 7111 02b0 2EE0     		b	.L320
 7112              	.L344:
 7113 02b2 00BF     		.align	2
 7114              	.L343:
 7115 02b4 3CC00920 		.word	537509948
 7116 02b8 00E100E0 		.word	-536813312
 7117 02bc D6BE898E 		.word	-1903575338
 7118 02c0 58C00920 		.word	537509976
 7119 02c4 00000000 		.word	channel
 7120 02c8 00000000 		.word	requested_channel
 7121 02cc 00000000 		.word	rssi_sum
 7122 02d0 00000000 		.word	rssi_count
 7123 02d4 00000000 		.word	clkn
 7124 02d8 00000000 		.word	clkn_legacy
 7125 02dc 00000000 		.word	rx_tc
 7126 02e0 00000000 		.word	requested_mode
 7127 02e4 00000000 		.word	rx_err
 7128 02e8 00000000 		.word	status
 7129 02ec 00000000 		.word	le
 7130 02f0 10410050 		.word	1342193936
 7131 02f4 24000340 		.word	1073938468
 7132 02f8 10010000 		.word	whitening_word
 7133 02fc 00000000 		.word	rxbuf1
 7134              	.L335:
1878:bluetooth_rxtx.c **** 
1879:bluetooth_rxtx.c **** 		RXLED_SET;
 7135              		.loc 1 1879 0
 7136 0300 344B     		ldr	r3, .L345
 7137 0302 1022     		movs	r2, #16
 7138 0304 1A60     		str	r2, [r3]
1880:bluetooth_rxtx.c **** 
1881:bluetooth_rxtx.c **** 		enqueue_legacy (BR_PACKET, (uint8_t*)packet);
 7139              		.loc 1 1881 0
 7140 0306 3B1D     		adds	r3, r7, #4
 7141 0308 0020     		movs	r0, #0
 7142 030a 1946     		mov	r1, r3
 7143 030c FFF7FEFF 		bl	enqueue_legacy
 7144              	.L320:
1882:bluetooth_rxtx.c **** 	       
1883:bluetooth_rxtx.c **** 	rx_flush:
1884:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 7145              		.loc 1 1884 0
ARM GAS  /tmp/cctJTvh1.s 			page 158


 7146 0310 6420     		movs	r0, #100
 7147 0312 FFF7FEFF 		bl	cc2400_strobe
1885:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 7148              		.loc 1 1885 0
 7149 0316 00BF     		nop
 7150              	.L336:
 7151              		.loc 1 1885 0 is_stmt 0 discriminator 1
 7152 0318 FFF7FEFF 		bl	cc2400_status
 7153 031c 0346     		mov	r3, r0
 7154 031e 03F00403 		and	r3, r3, #4
 7155 0322 002B     		cmp	r3, #0
 7156 0324 F8D1     		bne	.L336
1886:bluetooth_rxtx.c **** 
1887:bluetooth_rxtx.c **** 		if (requested_channel != channel)
 7157              		.loc 1 1887 0 is_stmt 1
 7158 0326 2C4B     		ldr	r3, .L345+4
 7159 0328 1B88     		ldrh	r3, [r3]	@ movhi
 7160 032a 9AB2     		uxth	r2, r3
 7161 032c 2B4B     		ldr	r3, .L345+8
 7162 032e 1B88     		ldrh	r3, [r3]	@ movhi
 7163 0330 9BB2     		uxth	r3, r3
 7164 0332 9A42     		cmp	r2, r3
 7165 0334 0DD0     		beq	.L337
1888:bluetooth_rxtx.c **** 		{
1889:bluetooth_rxtx.c **** 			channel = requested_channel;
 7166              		.loc 1 1889 0
 7167 0336 284B     		ldr	r3, .L345+4
 7168 0338 1B88     		ldrh	r3, [r3]	@ movhi
 7169 033a 9AB2     		uxth	r2, r3
 7170 033c 274B     		ldr	r3, .L345+8
 7171 033e 1A80     		strh	r2, [r3]	@ movhi
1890:bluetooth_rxtx.c **** 			cc2400_set (FSDIV, channel - 1);
 7172              		.loc 1 1890 0
 7173 0340 264B     		ldr	r3, .L345+8
 7174 0342 1B88     		ldrh	r3, [r3]	@ movhi
 7175 0344 9BB2     		uxth	r3, r3
 7176 0346 013B     		subs	r3, r3, #1
 7177 0348 9BB2     		uxth	r3, r3
 7178 034a 0220     		movs	r0, #2
 7179 034c 1946     		mov	r1, r3
 7180 034e FFF7FEFF 		bl	cc2400_set
 7181              	.L337:
1891:bluetooth_rxtx.c **** 		}
1892:bluetooth_rxtx.c **** 
1893:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 7182              		.loc 1 1893 0
 7183 0352 00BF     		nop
 7184              	.L338:
 7185              		.loc 1 1893 0 is_stmt 0 discriminator 1
 7186 0354 FFF7FEFF 		bl	cc2400_status
 7187 0358 0346     		mov	r3, r0
 7188 035a 03F04003 		and	r3, r3, #64
 7189 035e 002B     		cmp	r3, #0
 7190 0360 F8D0     		beq	.L338
1894:bluetooth_rxtx.c **** 
1895:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 7191              		.loc 1 1895 0 is_stmt 1
ARM GAS  /tmp/cctJTvh1.s 			page 159


 7192 0362 6120     		movs	r0, #97
 7193 0364 FFF7FEFF 		bl	cc2400_strobe
1896:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 7194              		.loc 1 1896 0
 7195 0368 00BF     		nop
 7196              	.L339:
 7197              		.loc 1 1896 0 is_stmt 0 discriminator 1
 7198 036a FFF7FEFF 		bl	cc2400_status
 7199 036e 0346     		mov	r3, r0
 7200 0370 03F00403 		and	r3, r3, #4
 7201 0374 002B     		cmp	r3, #0
 7202 0376 F8D0     		beq	.L339
1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7203              		.loc 1 1898 0 is_stmt 1
 7204 0378 194A     		ldr	r2, .L345+12
 7205 037a 194B     		ldr	r3, .L345+12
 7206 037c 1B68     		ldr	r3, [r3]
 7207 037e 23F00103 		bic	r3, r3, #1
 7208 0382 1360     		str	r3, [r2]
1899:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7209              		.loc 1 1899 0
 7210 0384 03E0     		b	.L340
 7211              	.L341:
 7212              	.LBB6:
1900:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 7213              		.loc 1 1900 0
 7214 0386 174B     		ldr	r3, .L345+16
 7215 0388 1B68     		ldr	r3, [r3]
 7216 038a 87F85330 		strb	r3, [r7, #83]
 7217              	.L340:
 7218              	.LBE6:
1899:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7219              		.loc 1 1899 0
 7220 038e 164B     		ldr	r3, .L345+20
 7221 0390 1B68     		ldr	r3, [r3]
 7222 0392 03F00403 		and	r3, r3, #4
 7223 0396 002B     		cmp	r3, #0
 7224 0398 F5D1     		bne	.L341
1901:bluetooth_rxtx.c ****                 }
1902:bluetooth_rxtx.c **** 		dma_init_le();
 7225              		.loc 1 1902 0
 7226 039a FFF7FEFF 		bl	dma_init_le
1903:bluetooth_rxtx.c **** 		dio_ssp_start();
 7227              		.loc 1 1903 0
 7228 039e FFF7FEFF 		bl	dio_ssp_start
1904:bluetooth_rxtx.c **** 		
1905:bluetooth_rxtx.c **** //              msleep(500);    
1906:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 7229              		.loc 1 1906 0
 7230 03a2 6220     		movs	r0, #98
 7231 03a4 FFF7FEFF 		bl	cc2400_strobe
1907:bluetooth_rxtx.c **** 		rx_tc = 0;
 7232              		.loc 1 1907 0
 7233 03a8 104B     		ldr	r3, .L345+24
 7234 03aa 0022     		movs	r2, #0
 7235 03ac 1A60     		str	r2, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 160


1908:bluetooth_rxtx.c **** 		rx_err = 0;
 7236              		.loc 1 1908 0
 7237 03ae 104B     		ldr	r3, .L345+28
 7238 03b0 0022     		movs	r2, #0
 7239 03b2 1A60     		str	r2, [r3]
 7240              	.L316:
 7241              	.LBE4:
1803:bluetooth_rxtx.c **** 
 7242              		.loc 1 1803 0
 7243 03b4 0F4B     		ldr	r3, .L345+32
 7244 03b6 1B78     		ldrb	r3, [r3]
 7245 03b8 DBB2     		uxtb	r3, r3
 7246 03ba 102B     		cmp	r3, #16
 7247 03bc 3FF488AE 		beq	.L342
 7248              	.L325:
1909:bluetooth_rxtx.c **** 	 
1910:bluetooth_rxtx.c **** 	
1911:bluetooth_rxtx.c **** 	}
1912:bluetooth_rxtx.c **** cleanup:
1913:bluetooth_rxtx.c **** 	cc2400_idle();
 7249              		.loc 1 1913 0
 7250 03c0 FFF7FEFF 		bl	cc2400_idle
1914:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 7251              		.loc 1 1914 0
 7252 03c4 FFF7FEFF 		bl	dio_ssp_stop
1915:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 7253              		.loc 1 1915 0
 7254 03c8 FFF7FEFF 		bl	cs_trigger_disable
1916:bluetooth_rxtx.c **** }
 7255              		.loc 1 1916 0
 7256 03cc 5C37     		adds	r7, r7, #92
 7257              		.cfi_def_cfa_offset 12
 7258 03ce BD46     		mov	sp, r7
 7259              		.cfi_def_cfa_register 13
 7260              		@ sp needed
 7261 03d0 90BD     		pop	{r4, r7, pc}
 7262              	.L346:
 7263 03d2 00BF     		.align	2
 7264              	.L345:
 7265 03d4 38C00920 		.word	537509944
 7266 03d8 00000000 		.word	requested_channel
 7267 03dc 00000000 		.word	channel
 7268 03e0 24000340 		.word	1073938468
 7269 03e4 08000340 		.word	1073938440
 7270 03e8 0C000340 		.word	1073938444
 7271 03ec 00000000 		.word	rx_tc
 7272 03f0 00000000 		.word	rx_err
 7273 03f4 00000000 		.word	requested_mode
 7274              		.cfi_endproc
 7275              	.LFE33:
 7277              		.section	.text.bt_stream_proposed,"ax",%progbits
 7278              		.align	2
 7279              		.global	bt_stream_proposed
 7280              		.thumb
 7281              		.thumb_func
 7283              	bt_stream_proposed:
 7284              	.LFB34:
ARM GAS  /tmp/cctJTvh1.s 			page 161


1917:bluetooth_rxtx.c **** 
1918:bluetooth_rxtx.c **** // wpson proposed
1919:bluetooth_rxtx.c **** void bt_stream_proposed()
1920:bluetooth_rxtx.c **** {
 7285              		.loc 1 1920 0
 7286              		.cfi_startproc
 7287              		@ args = 0, pretend = 0, frame = 72
 7288              		@ frame_needed = 1, uses_anonymous_args = 0
 7289 0000 80B5     		push	{r7, lr}
 7290              		.cfi_def_cfa_offset 8
 7291              		.cfi_offset 7, -8
 7292              		.cfi_offset 14, -4
 7293 0002 92B0     		sub	sp, sp, #72
 7294              		.cfi_def_cfa_offset 80
 7295 0004 00AF     		add	r7, sp, #0
 7296              		.cfi_def_cfa_register 7
1921:bluetooth_rxtx.c **** 
1922:bluetooth_rxtx.c **** 	u8 epstat;
1923:bluetooth_rxtx.c **** //	u16 f;
1924:bluetooth_rxtx.c **** //	u8 buf[DMA_SIZE];
1925:bluetooth_rxtx.c **** 	u8 rssi[50] = {0};
 7297              		.loc 1 1925 0
 7298 0006 3B1D     		adds	r3, r7, #4
 7299 0008 0022     		movs	r2, #0
 7300 000a 1A60     		str	r2, [r3]
 7301 000c 0433     		adds	r3, r3, #4
 7302 000e 0022     		movs	r2, #0
 7303 0010 1A60     		str	r2, [r3]
 7304 0012 0433     		adds	r3, r3, #4
 7305 0014 0022     		movs	r2, #0
 7306 0016 1A60     		str	r2, [r3]
 7307 0018 0433     		adds	r3, r3, #4
 7308 001a 0022     		movs	r2, #0
 7309 001c 1A60     		str	r2, [r3]
 7310 001e 0433     		adds	r3, r3, #4
 7311 0020 0022     		movs	r2, #0
 7312 0022 1A60     		str	r2, [r3]
 7313 0024 0433     		adds	r3, r3, #4
 7314 0026 0022     		movs	r2, #0
 7315 0028 1A60     		str	r2, [r3]
 7316 002a 0433     		adds	r3, r3, #4
 7317 002c 0022     		movs	r2, #0
 7318 002e 1A60     		str	r2, [r3]
 7319 0030 0433     		adds	r3, r3, #4
 7320 0032 0022     		movs	r2, #0
 7321 0034 1A60     		str	r2, [r3]
 7322 0036 0433     		adds	r3, r3, #4
 7323 0038 0022     		movs	r2, #0
 7324 003a 1A60     		str	r2, [r3]
 7325 003c 0433     		adds	r3, r3, #4
 7326 003e 0022     		movs	r2, #0
 7327 0040 1A60     		str	r2, [r3]
 7328 0042 0433     		adds	r3, r3, #4
 7329 0044 0022     		movs	r2, #0
 7330 0046 1A60     		str	r2, [r3]
 7331 0048 0433     		adds	r3, r3, #4
 7332 004a 0022     		movs	r2, #0
ARM GAS  /tmp/cctJTvh1.s 			page 162


 7333 004c 1A60     		str	r2, [r3]
 7334 004e 0433     		adds	r3, r3, #4
 7335 0050 0022     		movs	r2, #0
 7336 0052 1A80     		strh	r2, [r3]	@ movhi
 7337 0054 0233     		adds	r3, r3, #2
1926:bluetooth_rxtx.c **** 	int i = 0;
 7338              		.loc 1 1926 0
 7339 0056 0023     		movs	r3, #0
 7340 0058 FB63     		str	r3, [r7, #60]
1927:bluetooth_rxtx.c **** 	int window = 0;
 7341              		.loc 1 1927 0
 7342 005a 0023     		movs	r3, #0
 7343 005c 7B64     		str	r3, [r7, #68]
1928:bluetooth_rxtx.c **** 	u8 old = 0;
 7344              		.loc 1 1928 0
 7345 005e 0023     		movs	r3, #0
 7346 0060 87F84330 		strb	r3, [r7, #67]
1929:bluetooth_rxtx.c **** 	u8 now = 0;
 7347              		.loc 1 1929 0
 7348 0064 0023     		movs	r3, #0
 7349 0066 87F84230 		strb	r3, [r7, #66]
1930:bluetooth_rxtx.c **** 	int8_t diff = 0;
 7350              		.loc 1 1930 0
 7351 006a 0023     		movs	r3, #0
 7352 006c 87F83B30 		strb	r3, [r7, #59]
1931:bluetooth_rxtx.c **** 	u8 k = 0;
 7353              		.loc 1 1931 0
 7354 0070 0023     		movs	r3, #0
 7355 0072 87F83A30 		strb	r3, [r7, #58]
1932:bluetooth_rxtx.c **** 	u8 temp = 0;
 7356              		.loc 1 1932 0
 7357 0076 0023     		movs	r3, #0
 7358 0078 87F83930 		strb	r3, [r7, #57]
1933:bluetooth_rxtx.c **** 	u8 outage = 0;
 7359              		.loc 1 1933 0
 7360 007c 0023     		movs	r3, #0
 7361 007e 87F83830 		strb	r3, [r7, #56]
1934:bluetooth_rxtx.c **** 	queue_init();
 7362              		.loc 1 1934 0
 7363 0082 FFF7FEFF 		bl	queue_init
1935:bluetooth_rxtx.c **** 
1936:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1937:bluetooth_rxtx.c **** 	PAEN_SET;
 7364              		.loc 1 1937 0
 7365 0086 504B     		ldr	r3, .L357
 7366 0088 8022     		movs	r2, #128
 7367 008a 1A60     		str	r2, [r3]
1938:bluetooth_rxtx.c **** //	HGM_SET;
1939:bluetooth_rxtx.c **** #endif
1940:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 7368              		.loc 1 1940 0
 7369 008c 0D20     		movs	r0, #13
 7370 008e 47F6FF71 		movw	r1, #32767
 7371 0092 FFF7FEFF 		bl	cc2400_set
1941:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 7372              		.loc 1 1941 0
 7373 0096 1220     		movs	r0, #18
ARM GAS  /tmp/cctJTvh1.s 			page 163


 7374 0098 42F62231 		movw	r1, #11042
 7375 009c FFF7FEFF 		bl	cc2400_set
1942:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 7376              		.loc 1 1942 0
 7377 00a0 1420     		movs	r0, #20
 7378 00a2 41F24B31 		movw	r1, #4939
 7379 00a6 FFF7FEFF 		bl	cc2400_set
1943:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 7380              		.loc 1 1943 0
 7381 00aa 2020     		movs	r0, #32
 7382 00ac 40F26151 		movw	r1, #1377
 7383 00b0 FFF7FEFF 		bl	cc2400_set
1944:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 7384              		.loc 1 1944 0
 7385 00b4 0320     		movs	r0, #3
 7386 00b6 4021     		movs	r1, #64
 7387 00b8 FFF7FEFF 		bl	cc2400_set
1945:bluetooth_rxtx.c **** 
1946:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1947:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1948:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0x00ff);
1949:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x00ff);
1950:bluetooth_rxtx.c **** 	
1951:bluetooth_rxtx.c **** //	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
1952:bluetooth_rxtx.c **** //	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
1953:bluetooth_rxtx.c **** 	
1954:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 7388              		.loc 1 1954 0
 7389 00bc 00BF     		nop
 7390              	.L348:
 7391              		.loc 1 1954 0 is_stmt 0 discriminator 1
 7392 00be FFF7FEFF 		bl	cc2400_status
 7393 00c2 0346     		mov	r3, r0
 7394 00c4 03F04003 		and	r3, r3, #64
 7395 00c8 002B     		cmp	r3, #0
 7396 00ca F8D0     		beq	.L348
1955:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 7397              		.loc 1 1955 0 is_stmt 1
 7398 00cc 00BF     		nop
 7399              	.L349:
 7400              		.loc 1 1955 0 is_stmt 0 discriminator 1
 7401 00ce FFF7FEFF 		bl	cc2400_status
 7402 00d2 0346     		mov	r3, r0
 7403 00d4 03F00403 		and	r3, r3, #4
 7404 00d8 002B     		cmp	r3, #0
 7405 00da F8D1     		bne	.L349
1956:bluetooth_rxtx.c **** 
1957:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 7406              		.loc 1 1957 0 is_stmt 1
 7407 00dc 3B4B     		ldr	r3, .L357+4
 7408 00de 1B88     		ldrh	r3, [r3]	@ movhi
 7409 00e0 9BB2     		uxth	r3, r3
 7410 00e2 013B     		subs	r3, r3, #1
 7411 00e4 9BB2     		uxth	r3, r3
 7412 00e6 0220     		movs	r0, #2
 7413 00e8 1946     		mov	r1, r3
 7414 00ea FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/cctJTvh1.s 			page 164


1958:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7415              		.loc 1 1958 0
 7416 00ee 6120     		movs	r0, #97
 7417 00f0 FFF7FEFF 		bl	cc2400_strobe
1959:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7418              		.loc 1 1959 0
 7419 00f4 00BF     		nop
 7420              	.L350:
 7421              		.loc 1 1959 0 is_stmt 0 discriminator 1
 7422 00f6 FFF7FEFF 		bl	cc2400_status
 7423 00fa 0346     		mov	r3, r0
 7424 00fc 03F00403 		and	r3, r3, #4
 7425 0100 002B     		cmp	r3, #0
 7426 0102 F8D0     		beq	.L350
1960:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 7427              		.loc 1 1960 0 is_stmt 1
 7428 0104 6220     		movs	r0, #98
 7429 0106 FFF7FEFF 		bl	cc2400_strobe
1961:bluetooth_rxtx.c **** 	
1962:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_PROPOSED)
 7430              		.loc 1 1962 0
 7431 010a 4FE0     		b	.L351
 7432              	.L356:
1963:bluetooth_rxtx.c **** 	{
1964:bluetooth_rxtx.c **** 
1965:bluetooth_rxtx.c **** 			
1966:bluetooth_rxtx.c **** 	//	while (!(cc2400_status () & SYNC_RECEIVED));	
1967:bluetooth_rxtx.c **** 		window = 0;
 7433              		.loc 1 1967 0
 7434 010c 0023     		movs	r3, #0
 7435 010e 7B64     		str	r3, [r7, #68]
1968:bluetooth_rxtx.c **** 		old = 0;
 7436              		.loc 1 1968 0
 7437 0110 0023     		movs	r3, #0
 7438 0112 87F84330 		strb	r3, [r7, #67]
1969:bluetooth_rxtx.c **** 		now = 0;
 7439              		.loc 1 1969 0
 7440 0116 0023     		movs	r3, #0
 7441 0118 87F84230 		strb	r3, [r7, #66]
1970:bluetooth_rxtx.c **** 		diff = 0;
 7442              		.loc 1 1970 0
 7443 011c 0023     		movs	r3, #0
 7444 011e 87F83B30 		strb	r3, [r7, #59]
1971:bluetooth_rxtx.c **** 		
1972:bluetooth_rxtx.c **** 
1973:bluetooth_rxtx.c **** //		diff_ts = CLK100NS - first_ts;
1974:bluetooth_rxtx.c **** //wpson
1975:bluetooth_rxtx.c **** 		while ( window < 6)
 7445              		.loc 1 1975 0
 7446 0122 2BE0     		b	.L352
 7447              	.L355:
1976:bluetooth_rxtx.c **** 		{	
1977:bluetooth_rxtx.c **** //			first_ts = CLK100NS;
1978:bluetooth_rxtx.c **** 			now = cc2400_get_rev(FREQEST);
 7448              		.loc 1 1978 0
 7449 0124 0720     		movs	r0, #7
 7450 0126 FFF7FEFF 		bl	cc2400_get_rev
ARM GAS  /tmp/cctJTvh1.s 			page 165


 7451 012a 0346     		mov	r3, r0
 7452 012c 87F84230 		strb	r3, [r7, #66]
1979:bluetooth_rxtx.c **** 			diff = add (now, add (~old, 1));	 
 7453              		.loc 1 1979 0
 7454 0130 97F84330 		ldrb	r3, [r7, #67]
 7455 0134 DB43     		mvns	r3, r3
 7456 0136 DBB2     		uxtb	r3, r3
 7457 0138 1846     		mov	r0, r3
 7458 013a 0121     		movs	r1, #1
 7459 013c FFF7FEFF 		bl	add
 7460 0140 0346     		mov	r3, r0
 7461 0142 1A46     		mov	r2, r3
 7462 0144 97F84230 		ldrb	r3, [r7, #66]	@ zero_extendqisi2
 7463 0148 1846     		mov	r0, r3
 7464 014a 1146     		mov	r1, r2
 7465 014c FFF7FEFF 		bl	add
 7466 0150 0346     		mov	r3, r0
 7467 0152 87F83B30 		strb	r3, [r7, #59]
1980:bluetooth_rxtx.c **** /*			if (diff & 0x80) 
1981:bluetooth_rxtx.c **** 				diff = add (~diff, 1);	
1982:bluetooth_rxtx.c **** */
1983:bluetooth_rxtx.c **** 			if (diff < 4 && diff > -4)
 7468              		.loc 1 1983 0
 7469 0156 97F93B30 		ldrsb	r3, [r7, #59]
 7470 015a 032B     		cmp	r3, #3
 7471 015c 08DC     		bgt	.L353
 7472              		.loc 1 1983 0 is_stmt 0 discriminator 1
 7473 015e 97F93B30 		ldrsb	r3, [r7, #59]
 7474 0162 13F1030F 		cmn	r3, #3
 7475 0166 03DB     		blt	.L353
1984:bluetooth_rxtx.c **** 				window++;
 7476              		.loc 1 1984 0 is_stmt 1
 7477 0168 7B6C     		ldr	r3, [r7, #68]
 7478 016a 0133     		adds	r3, r3, #1
 7479 016c 7B64     		str	r3, [r7, #68]
 7480 016e 01E0     		b	.L354
 7481              	.L353:
1985:bluetooth_rxtx.c **** 			else
1986:bluetooth_rxtx.c **** 				window = 0;
 7482              		.loc 1 1986 0
 7483 0170 0023     		movs	r3, #0
 7484 0172 7B64     		str	r3, [r7, #68]
 7485              	.L354:
1987:bluetooth_rxtx.c **** 			old = now;
 7486              		.loc 1 1987 0
 7487 0174 97F84230 		ldrb	r3, [r7, #66]
 7488 0178 87F84330 		strb	r3, [r7, #67]
 7489              	.L352:
1975:bluetooth_rxtx.c **** 		{	
 7490              		.loc 1 1975 0
 7491 017c 7B6C     		ldr	r3, [r7, #68]
 7492 017e 052B     		cmp	r3, #5
 7493 0180 D0DD     		ble	.L355
1988:bluetooth_rxtx.c **** //			second_ts = CLK100NS;
1989:bluetooth_rxtx.c **** 		}
1990:bluetooth_rxtx.c **** 
1991:bluetooth_rxtx.c **** 		rssi_avg = (int8_t)cc2400_get_rev(RSSI);
ARM GAS  /tmp/cctJTvh1.s 			page 166


 7494              		.loc 1 1991 0
 7495 0182 0620     		movs	r0, #6
 7496 0184 FFF7FEFF 		bl	cc2400_get_rev
 7497 0188 0346     		mov	r3, r0
 7498 018a 1A46     		mov	r2, r3
 7499 018c 104B     		ldr	r3, .L357+8
 7500 018e 1A70     		strb	r2, [r3]
1992:bluetooth_rxtx.c **** 		freq_avg = now;
 7501              		.loc 1 1992 0
 7502 0190 104A     		ldr	r2, .L357+12
 7503 0192 97F84230 		ldrb	r3, [r7, #66]
 7504 0196 1370     		strb	r3, [r2]
1993:bluetooth_rxtx.c **** 	
1994:bluetooth_rxtx.c **** 	//	clkn_proposed = clkn;
1995:bluetooth_rxtx.c **** //		diff_ts = second_ts - first_ts;
1996:bluetooth_rxtx.c **** 		enqueue_proposed(FREQ_PACKET, rssi);
 7505              		.loc 1 1996 0
 7506 0198 3B1D     		adds	r3, r7, #4
 7507 019a 0720     		movs	r0, #7
 7508 019c 1946     		mov	r1, r3
 7509 019e FFF7FEFF 		bl	enqueue_proposed
1997:bluetooth_rxtx.c **** //		enqueue(FREQ_PACKET, rssi);
1998:bluetooth_rxtx.c **** 		handle_usb(clkn);
 7510              		.loc 1 1998 0
 7511 01a2 0D4B     		ldr	r3, .L357+16
 7512 01a4 1B68     		ldr	r3, [r3]
 7513 01a6 1846     		mov	r0, r3
 7514 01a8 FFF7FEFF 		bl	handle_usb
 7515              	.L351:
1962:bluetooth_rxtx.c **** 	{
 7516              		.loc 1 1962 0
 7517 01ac 0B4B     		ldr	r3, .L357+20
 7518 01ae 1B78     		ldrb	r3, [r3]
 7519 01b0 DBB2     		uxtb	r3, r3
 7520 01b2 0F2B     		cmp	r3, #15
 7521 01b4 AAD0     		beq	.L356
1999:bluetooth_rxtx.c **** 
2000:bluetooth_rxtx.c **** 	//	first_ts = CLK100NS;
2001:bluetooth_rxtx.c **** 	//	while ((CLK100NS-first_ts)<500)
2002:bluetooth_rxtx.c **** 	//	{};
2003:bluetooth_rxtx.c **** /*		cc2400_strobe (SRFOFF);
2004:bluetooth_rxtx.c **** 		while ((cc2400_status () & FS_LOCK));
2005:bluetooth_rxtx.c **** 
2006:bluetooth_rxtx.c **** 		while (!(cc2400_status () & XOSC16M_STABLE));
2007:bluetooth_rxtx.c **** 		
2008:bluetooth_rxtx.c **** 		cc2400_strobe (SFSON);
2009:bluetooth_rxtx.c **** 		while (!(cc2400_status () & FS_LOCK));
2010:bluetooth_rxtx.c **** 
2011:bluetooth_rxtx.c **** 	
2012:bluetooth_rxtx.c **** //		msleep(500);	
2013:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
2014:bluetooth_rxtx.c **** */
2015:bluetooth_rxtx.c **** 	}
2016:bluetooth_rxtx.c **** 	cc2400_idle();
 7522              		.loc 1 2016 0
 7523 01b6 FFF7FEFF 		bl	cc2400_idle
2017:bluetooth_rxtx.c **** 	dio_ssp_stop ();
ARM GAS  /tmp/cctJTvh1.s 			page 167


 7524              		.loc 1 2017 0
 7525 01ba FFF7FEFF 		bl	dio_ssp_stop
2018:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 7526              		.loc 1 2018 0
 7527 01be FFF7FEFF 		bl	cs_trigger_disable
2019:bluetooth_rxtx.c **** }
 7528              		.loc 1 2019 0
 7529 01c2 4837     		adds	r7, r7, #72
 7530              		.cfi_def_cfa_offset 8
 7531 01c4 BD46     		mov	sp, r7
 7532              		.cfi_def_cfa_register 13
 7533              		@ sp needed
 7534 01c6 80BD     		pop	{r7, pc}
 7535              	.L358:
 7536              		.align	2
 7537              	.L357:
 7538 01c8 58C00920 		.word	537509976
 7539 01cc 00000000 		.word	channel
 7540 01d0 00000000 		.word	rssi_avg
 7541 01d4 00000000 		.word	freq_avg
 7542 01d8 00000000 		.word	clkn
 7543 01dc 00000000 		.word	requested_mode
 7544              		.cfi_endproc
 7545              	.LFE34:
 7547              		.section	.text.bt_stream_freq,"ax",%progbits
 7548              		.align	2
 7549              		.global	bt_stream_freq
 7550              		.thumb
 7551              		.thumb_func
 7553              	bt_stream_freq:
 7554              	.LFB35:
2020:bluetooth_rxtx.c **** 
2021:bluetooth_rxtx.c **** 
2022:bluetooth_rxtx.c **** 
2023:bluetooth_rxtx.c **** // wpson freq
2024:bluetooth_rxtx.c **** void bt_stream_freq()
2025:bluetooth_rxtx.c **** {
 7555              		.loc 1 2025 0
 7556              		.cfi_startproc
 7557              		@ args = 0, pretend = 0, frame = 136
 7558              		@ frame_needed = 1, uses_anonymous_args = 0
 7559 0000 90B5     		push	{r4, r7, lr}
 7560              		.cfi_def_cfa_offset 12
 7561              		.cfi_offset 4, -12
 7562              		.cfi_offset 7, -8
 7563              		.cfi_offset 14, -4
 7564 0002 A3B0     		sub	sp, sp, #140
 7565              		.cfi_def_cfa_offset 152
 7566 0004 00AF     		add	r7, sp, #0
 7567              		.cfi_def_cfa_register 7
2026:bluetooth_rxtx.c **** //	TXLED_SET;
2027:bluetooth_rxtx.c **** 	RXLED_CLR;
 7568              		.loc 1 2027 0
 7569 0006 B34B     		ldr	r3, .L386
 7570 0008 1022     		movs	r2, #16
 7571 000a 1A60     		str	r2, [r3]
2028:bluetooth_rxtx.c **** 	int i;
ARM GAS  /tmp/cctJTvh1.s 			page 168


2029:bluetooth_rxtx.c **** 	
2030:bluetooth_rxtx.c **** 	u8 freq_buf[50] = {0};
 7572              		.loc 1 2030 0
 7573 000c 07F13803 		add	r3, r7, #56
 7574 0010 0022     		movs	r2, #0
 7575 0012 1A60     		str	r2, [r3]
 7576 0014 0433     		adds	r3, r3, #4
 7577 0016 0022     		movs	r2, #0
 7578 0018 1A60     		str	r2, [r3]
 7579 001a 0433     		adds	r3, r3, #4
 7580 001c 0022     		movs	r2, #0
 7581 001e 1A60     		str	r2, [r3]
 7582 0020 0433     		adds	r3, r3, #4
 7583 0022 0022     		movs	r2, #0
 7584 0024 1A60     		str	r2, [r3]
 7585 0026 0433     		adds	r3, r3, #4
 7586 0028 0022     		movs	r2, #0
 7587 002a 1A60     		str	r2, [r3]
 7588 002c 0433     		adds	r3, r3, #4
 7589 002e 0022     		movs	r2, #0
 7590 0030 1A60     		str	r2, [r3]
 7591 0032 0433     		adds	r3, r3, #4
 7592 0034 0022     		movs	r2, #0
 7593 0036 1A60     		str	r2, [r3]
 7594 0038 0433     		adds	r3, r3, #4
 7595 003a 0022     		movs	r2, #0
 7596 003c 1A60     		str	r2, [r3]
 7597 003e 0433     		adds	r3, r3, #4
 7598 0040 0022     		movs	r2, #0
 7599 0042 1A60     		str	r2, [r3]
 7600 0044 0433     		adds	r3, r3, #4
 7601 0046 0022     		movs	r2, #0
 7602 0048 1A60     		str	r2, [r3]
 7603 004a 0433     		adds	r3, r3, #4
 7604 004c 0022     		movs	r2, #0
 7605 004e 1A60     		str	r2, [r3]
 7606 0050 0433     		adds	r3, r3, #4
 7607 0052 0022     		movs	r2, #0
 7608 0054 1A60     		str	r2, [r3]
 7609 0056 0433     		adds	r3, r3, #4
 7610 0058 0022     		movs	r2, #0
 7611 005a 1A80     		strh	r2, [r3]	@ movhi
 7612 005c 0233     		adds	r3, r3, #2
2031:bluetooth_rxtx.c **** 	queue_init();
 7613              		.loc 1 2031 0
 7614 005e FFF7FEFF 		bl	queue_init
2032:bluetooth_rxtx.c **** 	dio_ssp_init();
 7615              		.loc 1 2032 0
 7616 0062 FFF7FEFF 		bl	dio_ssp_init
2033:bluetooth_rxtx.c **** 	dma_init_le();
 7617              		.loc 1 2033 0
 7618 0066 FFF7FEFF 		bl	dma_init_le
2034:bluetooth_rxtx.c **** 	dio_ssp_start();
 7619              		.loc 1 2034 0
 7620 006a FFF7FEFF 		bl	dio_ssp_start
2035:bluetooth_rxtx.c **** 	
2036:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
ARM GAS  /tmp/cctJTvh1.s 			page 169


 7621              		.loc 1 2036 0
 7622 006e 0D20     		movs	r0, #13
 7623 0070 47F6FF71 		movw	r1, #32767
 7624 0074 FFF7FEFF 		bl	cc2400_set
2037:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 7625              		.loc 1 2037 0
 7626 0078 1220     		movs	r0, #18
 7627 007a 42F62231 		movw	r1, #11042
 7628 007e FFF7FEFF 		bl	cc2400_set
2038:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 7629              		.loc 1 2038 0
 7630 0082 1420     		movs	r0, #20
 7631 0084 41F24B31 		movw	r1, #4939
 7632 0088 FFF7FEFF 		bl	cc2400_set
2039:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 7633              		.loc 1 2039 0
 7634 008c 2020     		movs	r0, #32
 7635 008e 40F26151 		movw	r1, #1377
 7636 0092 FFF7FEFF 		bl	cc2400_set
2040:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 7637              		.loc 1 2040 0
 7638 0096 0320     		movs	r0, #3
 7639 0098 4021     		movs	r1, #64
 7640 009a FFF7FEFF 		bl	cc2400_set
2041:bluetooth_rxtx.c **** 
2042:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2043:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2044:bluetooth_rxtx.c **** 	
2045:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 7641              		.loc 1 2045 0
 7642 009e 8E48     		ldr	r0, .L386+4
 7643 00a0 FFF7FEFF 		bl	rbit
 7644 00a4 0346     		mov	r3, r0
 7645 00a6 9BB2     		uxth	r3, r3
 7646 00a8 2C20     		movs	r0, #44
 7647 00aa 1946     		mov	r1, r3
 7648 00ac FFF7FEFF 		bl	cc2400_set
2046:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 7649              		.loc 1 2046 0
 7650 00b0 8948     		ldr	r0, .L386+4
 7651 00b2 FFF7FEFF 		bl	rbit
 7652 00b6 0346     		mov	r3, r0
 7653 00b8 1B0C     		lsrs	r3, r3, #16
 7654 00ba 9BB2     		uxth	r3, r3
 7655 00bc 2D20     		movs	r0, #45
 7656 00be 1946     		mov	r1, r3
 7657 00c0 FFF7FEFF 		bl	cc2400_set
2047:bluetooth_rxtx.c **** 	
2048:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2049:bluetooth_rxtx.c **** 	PAEN_SET;
 7658              		.loc 1 2049 0
 7659 00c4 854B     		ldr	r3, .L386+8
 7660 00c6 8022     		movs	r2, #128
 7661 00c8 1A60     		str	r2, [r3]
2050:bluetooth_rxtx.c **** //	HGM_SET;
2051:bluetooth_rxtx.c **** #endif
2052:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 170


2053:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 7662              		.loc 1 2053 0
 7663 00ca 00BF     		nop
 7664              	.L360:
 7665              		.loc 1 2053 0 is_stmt 0 discriminator 1
 7666 00cc FFF7FEFF 		bl	cc2400_status
 7667 00d0 0346     		mov	r3, r0
 7668 00d2 03F04003 		and	r3, r3, #64
 7669 00d6 002B     		cmp	r3, #0
 7670 00d8 F8D0     		beq	.L360
2054:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 7671              		.loc 1 2054 0 is_stmt 1
 7672 00da 00BF     		nop
 7673              	.L361:
 7674              		.loc 1 2054 0 is_stmt 0 discriminator 1
 7675 00dc FFF7FEFF 		bl	cc2400_status
 7676 00e0 0346     		mov	r3, r0
 7677 00e2 03F00403 		and	r3, r3, #4
 7678 00e6 002B     		cmp	r3, #0
 7679 00e8 F8D1     		bne	.L361
2055:bluetooth_rxtx.c **** 
2056:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 7680              		.loc 1 2056 0 is_stmt 1
 7681 00ea 7D4B     		ldr	r3, .L386+12
 7682 00ec 1B88     		ldrh	r3, [r3]	@ movhi
 7683 00ee 9BB2     		uxth	r3, r3
 7684 00f0 013B     		subs	r3, r3, #1
 7685 00f2 9BB2     		uxth	r3, r3
 7686 00f4 0220     		movs	r0, #2
 7687 00f6 1946     		mov	r1, r3
 7688 00f8 FFF7FEFF 		bl	cc2400_set
2057:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7689              		.loc 1 2057 0
 7690 00fc 6120     		movs	r0, #97
 7691 00fe FFF7FEFF 		bl	cc2400_strobe
2058:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7692              		.loc 1 2058 0
 7693 0102 00BF     		nop
 7694              	.L362:
 7695              		.loc 1 2058 0 is_stmt 0 discriminator 1
 7696 0104 FFF7FEFF 		bl	cc2400_status
 7697 0108 0346     		mov	r3, r0
 7698 010a 03F00403 		and	r3, r3, #4
 7699 010e 002B     		cmp	r3, #0
 7700 0110 F8D0     		beq	.L362
2059:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 7701              		.loc 1 2059 0 is_stmt 1
 7702 0112 6220     		movs	r0, #98
 7703 0114 FFF7FEFF 		bl	cc2400_strobe
2060:bluetooth_rxtx.c **** 	
2061:bluetooth_rxtx.c **** //	cc2400_rx();
2062:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_FREQ) {
 7704              		.loc 1 2062 0
 7705 0118 52E1     		b	.L363
 7706              	.L385:
 7707              	.LBB7:
2063:bluetooth_rxtx.c **** 		
ARM GAS  /tmp/cctJTvh1.s 			page 171


2064:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 7708              		.loc 1 2064 0
 7709 011a 00BF     		nop
 7710              	.L364:
 7711              		.loc 1 2064 0 is_stmt 0 discriminator 1
 7712 011c FFF7FEFF 		bl	cc2400_status
 7713 0120 0346     		mov	r3, r0
 7714 0122 03F01003 		and	r3, r3, #16
 7715 0126 002B     		cmp	r3, #0
 7716 0128 F8D0     		beq	.L364
2065:bluetooth_rxtx.c **** /*		int out;
2066:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
2067:bluetooth_rxtx.c ****                 if (rssi >= 128)
2068:bluetooth_rxtx.c ****                         out = rssi - 256;
2069:bluetooth_rxtx.c ****                 else
2070:bluetooth_rxtx.c ****                         out = rssi;
2071:bluetooth_rxtx.c ****                 if (out < 0)
2072:bluetooth_rxtx.c **** 		  goto rx_flush;
2073:bluetooth_rxtx.c **** */
2074:bluetooth_rxtx.c **** 
2075:bluetooth_rxtx.c **** 		for (i = 0; i < 40; i++)
 7717              		.loc 1 2075 0 is_stmt 1
 7718 012a 0023     		movs	r3, #0
 7719 012c C7F88430 		str	r3, [r7, #132]
 7720 0130 10E0     		b	.L365
 7721              	.L366:
2076:bluetooth_rxtx.c **** 		{
2077:bluetooth_rxtx.c **** 			freq_buf[i] = cc2400_get_rev(FREQEST);	
 7722              		.loc 1 2077 0 discriminator 3
 7723 0132 0720     		movs	r0, #7
 7724 0134 FFF7FEFF 		bl	cc2400_get_rev
 7725 0138 0346     		mov	r3, r0
 7726 013a 1946     		mov	r1, r3
 7727 013c 07F13802 		add	r2, r7, #56
 7728 0140 D7F88430 		ldr	r3, [r7, #132]
 7729 0144 1344     		add	r3, r3, r2
 7730 0146 0A46     		mov	r2, r1
 7731 0148 1A70     		strb	r2, [r3]
2075:bluetooth_rxtx.c **** 		{
 7732              		.loc 1 2075 0 discriminator 3
 7733 014a D7F88430 		ldr	r3, [r7, #132]
 7734 014e 0133     		adds	r3, r3, #1
 7735 0150 C7F88430 		str	r3, [r7, #132]
 7736              	.L365:
2075:bluetooth_rxtx.c **** 		{
 7737              		.loc 1 2075 0 is_stmt 0 discriminator 1
 7738 0154 D7F88430 		ldr	r3, [r7, #132]
 7739 0158 272B     		cmp	r3, #39
 7740 015a EADD     		ble	.L366
2078:bluetooth_rxtx.c **** 		}
2079:bluetooth_rxtx.c **** //		clkn_freq = clkn;
2080:bluetooth_rxtx.c **** 		
2081:bluetooth_rxtx.c **** 		while (!rx_tc);
 7741              		.loc 1 2081 0 is_stmt 1
 7742 015c 00BF     		nop
 7743              	.L367:
 7744              		.loc 1 2081 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cctJTvh1.s 			page 172


 7745 015e 614B     		ldr	r3, .L386+16
 7746 0160 1B68     		ldr	r3, [r3]
 7747 0162 002B     		cmp	r3, #0
 7748 0164 FBD0     		beq	.L367
2082:bluetooth_rxtx.c **** 	
2083:bluetooth_rxtx.c **** 		RXLED_SET;
 7749              		.loc 1 2083 0 is_stmt 1
 7750 0166 604B     		ldr	r3, .L386+20
 7751 0168 1022     		movs	r2, #16
 7752 016a 1A60     		str	r2, [r3]
2084:bluetooth_rxtx.c **** 		if (rx_err) {
 7753              		.loc 1 2084 0
 7754 016c 5F4B     		ldr	r3, .L386+24
 7755 016e 1B68     		ldr	r3, [r3]
 7756 0170 002B     		cmp	r3, #0
 7757 0172 07D0     		beq	.L368
2085:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 7758              		.loc 1 2085 0
 7759 0174 5E4B     		ldr	r3, .L386+28
 7760 0176 1B78     		ldrb	r3, [r3]
 7761 0178 DBB2     		uxtb	r3, r3
 7762 017a 43F00203 		orr	r3, r3, #2
 7763 017e DAB2     		uxtb	r2, r3
 7764 0180 5B4B     		ldr	r3, .L386+28
 7765 0182 1A70     		strb	r2, [r3]
 7766              	.L368:
2086:bluetooth_rxtx.c **** 		}	
2087:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 7767              		.loc 1 2087 0
 7768 0184 574B     		ldr	r3, .L386+16
 7769 0186 1B68     		ldr	r3, [r3]
 7770 0188 012B     		cmp	r3, #1
 7771 018a 07D9     		bls	.L369
2088:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 7772              		.loc 1 2088 0
 7773 018c 584B     		ldr	r3, .L386+28
 7774 018e 1B78     		ldrb	r3, [r3]
 7775 0190 DBB2     		uxtb	r3, r3
 7776 0192 43F00103 		orr	r3, r3, #1
 7777 0196 DAB2     		uxtb	r2, r3
 7778 0198 554B     		ldr	r3, .L386+28
 7779 019a 1A70     		strb	r2, [r3]
 7780              	.L369:
2089:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2090:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7781              		.loc 1 2090 0
 7782 019c 3B1D     		adds	r3, r7, #4
 7783 019e C7F88030 		str	r3, [r7, #128]
2091:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7784              		.loc 1 2091 0
 7785 01a2 544B     		ldr	r3, .L386+32
 7786 01a4 1B68     		ldr	r3, [r3]
 7787 01a6 7B60     		str	r3, [r7, #4]
2092:bluetooth_rxtx.c **** 
2093:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 7788              		.loc 1 2093 0
 7789 01a8 00BF     		nop
ARM GAS  /tmp/cctJTvh1.s 			page 173


 7790              	.L371:
 7791              		.loc 1 2093 0 is_stmt 0 discriminator 2
 7792 01aa 534B     		ldr	r3, .L386+36
 7793 01ac 1B68     		ldr	r3, [r3]
 7794 01ae 03F00103 		and	r3, r3, #1
 7795 01b2 002B     		cmp	r3, #0
 7796 01b4 03D0     		beq	.L370
 7797              		.loc 1 2093 0 discriminator 1
 7798 01b6 4D4B     		ldr	r3, .L386+24
 7799 01b8 1B68     		ldr	r3, [r3]
 7800 01ba 002B     		cmp	r3, #0
 7801 01bc F5D0     		beq	.L371
 7802              	.L370:
2094:bluetooth_rxtx.c ****                 
2095:bluetooth_rxtx.c **** 			
2096:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7803              		.loc 1 2096 0 is_stmt 1
 7804 01be 4F4A     		ldr	r2, .L386+40
 7805 01c0 4E4B     		ldr	r3, .L386+40
 7806 01c2 1B68     		ldr	r3, [r3]
 7807 01c4 23F00103 		bic	r3, r3, #1
 7808 01c8 1360     		str	r3, [r2]
2097:bluetooth_rxtx.c **** 	
2098:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(2402-2402)];
 7809              		.loc 1 2098 0
 7810 01ca 0020     		movs	r0, #0
 7811 01cc FFF7FEFF 		bl	btle_channel_index
 7812 01d0 0346     		mov	r3, r0
 7813 01d2 1A46     		mov	r2, r3
 7814 01d4 1346     		mov	r3, r2
 7815 01d6 5B00     		lsls	r3, r3, #1
 7816 01d8 1344     		add	r3, r3, r2
 7817 01da 1B01     		lsls	r3, r3, #4
 7818 01dc 484A     		ldr	r2, .L386+44
 7819 01de 1344     		add	r3, r3, r2
 7820 01e0 FB67     		str	r3, [r7, #124]
2099:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 7821              		.loc 1 2099 0
 7822 01e2 0023     		movs	r3, #0
 7823 01e4 C7F88430 		str	r3, [r7, #132]
 7824 01e8 3CE0     		b	.L372
 7825              	.L375:
 7826              	.LBB8:
2100:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7827              		.loc 1 2100 0 discriminator 3
 7828 01ea 464A     		ldr	r2, .L386+48
 7829 01ec D7F88430 		ldr	r3, [r7, #132]
 7830 01f0 1344     		add	r3, r3, r2
 7831 01f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7832 01f4 1A06     		lsls	r2, r3, #24
2101:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7833              		.loc 1 2101 0 discriminator 3
 7834 01f6 D7F88430 		ldr	r3, [r7, #132]
 7835 01fa 0133     		adds	r3, r3, #1
 7836 01fc 4149     		ldr	r1, .L386+48
 7837 01fe CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7838 0200 1B04     		lsls	r3, r3, #16
ARM GAS  /tmp/cctJTvh1.s 			page 174


 7839 0202 1A43     		orrs	r2, r2, r3
2102:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 7840              		.loc 1 2102 0 discriminator 3
 7841 0204 D7F88430 		ldr	r3, [r7, #132]
 7842 0208 0233     		adds	r3, r3, #2
 7843 020a 3E49     		ldr	r1, .L386+48
 7844 020c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7845 020e 1B02     		lsls	r3, r3, #8
 7846 0210 1343     		orrs	r3, r3, r2
2103:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 7847              		.loc 1 2103 0 discriminator 3
 7848 0212 D7F88420 		ldr	r2, [r7, #132]
 7849 0216 0332     		adds	r2, r2, #3
 7850 0218 3A49     		ldr	r1, .L386+48
 7851 021a 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7852 021c 1343     		orrs	r3, r3, r2
2100:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7853              		.loc 1 2100 0 discriminator 3
 7854 021e BB67     		str	r3, [r7, #120]
2104:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 7855              		.loc 1 2104 0 discriminator 3
 7856 0220 D7F88430 		ldr	r3, [r7, #132]
 7857 0224 002B     		cmp	r3, #0
 7858 0226 00DA     		bge	.L373
 7859 0228 0333     		adds	r3, r3, #3
 7860              	.L373:
 7861 022a 9B10     		asrs	r3, r3, #2
 7862 022c 5C1C     		adds	r4, r3, #1
 7863 022e B86F     		ldr	r0, [r7, #120]
 7864 0230 FFF7FEFF 		bl	rbit
 7865 0234 0146     		mov	r1, r0
 7866 0236 D7F88430 		ldr	r3, [r7, #132]
 7867 023a 002B     		cmp	r3, #0
 7868 023c 00DA     		bge	.L374
 7869 023e 0333     		adds	r3, r3, #3
 7870              	.L374:
 7871 0240 9B10     		asrs	r3, r3, #2
 7872 0242 9B00     		lsls	r3, r3, #2
 7873 0244 FA6F     		ldr	r2, [r7, #124]
 7874 0246 1344     		add	r3, r3, r2
 7875 0248 1B68     		ldr	r3, [r3]
 7876 024a 81EA0302 		eor	r2, r1, r3
 7877 024e A300     		lsls	r3, r4, #2
 7878 0250 07F18801 		add	r1, r7, #136
 7879 0254 0B44     		add	r3, r3, r1
 7880 0256 43F8842C 		str	r2, [r3, #-132]
 7881              	.LBE8:
2099:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7882              		.loc 1 2099 0 discriminator 3
 7883 025a D7F88430 		ldr	r3, [r7, #132]
 7884 025e 0433     		adds	r3, r3, #4
 7885 0260 C7F88430 		str	r3, [r7, #132]
 7886              	.L372:
2099:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7887              		.loc 1 2099 0 is_stmt 0 discriminator 1
 7888 0264 D7F88430 		ldr	r3, [r7, #132]
 7889 0268 2B2B     		cmp	r3, #43
ARM GAS  /tmp/cctJTvh1.s 			page 175


 7890 026a BEDD     		ble	.L375
2105:bluetooth_rxtx.c **** 		}
2106:bluetooth_rxtx.c **** 
2107:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2108:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2109:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2110:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2111:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2112:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2113:bluetooth_rxtx.c **** 		}
2114:bluetooth_rxtx.c **** */
2115:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7891              		.loc 1 2115 0 is_stmt 1
 7892 026c D7F88030 		ldr	r3, [r7, #128]
 7893 0270 0533     		adds	r3, r3, #5
 7894 0272 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7895 0274 03F03F03 		and	r3, r3, #63
 7896 0278 0233     		adds	r3, r3, #2
 7897 027a 7B67     		str	r3, [r7, #116]
2116:bluetooth_rxtx.c **** 		
2117:bluetooth_rxtx.c **** 		if (len > 39)
 7898              		.loc 1 2117 0
 7899 027c 7B6F     		ldr	r3, [r7, #116]
 7900 027e 272B     		cmp	r3, #39
 7901 0280 00D9     		bls	.L376
2118:bluetooth_rxtx.c **** 			goto rx_flush;
 7902              		.loc 1 2118 0
 7903 0282 61E0     		b	.L377
 7904              	.L376:
2119:bluetooth_rxtx.c **** 
2120:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7905              		.loc 1 2120 0
 7906 0284 1B4B     		ldr	r3, .L386+32
 7907 0286 D968     		ldr	r1, [r3, #12]
 7908 0288 D7F88030 		ldr	r3, [r7, #128]
 7909 028c 1A1D     		adds	r2, r3, #4
 7910 028e 7B6F     		ldr	r3, [r7, #116]
 7911 0290 0846     		mov	r0, r1
 7912 0292 1146     		mov	r1, r2
 7913 0294 1A46     		mov	r2, r3
 7914 0296 FFF7FEFF 		bl	btle_crcgen_lut
 7915 029a 3867     		str	r0, [r7, #112]
2121:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7916              		.loc 1 2121 0
 7917 029c 7B6F     		ldr	r3, [r7, #116]
 7918 029e 0633     		adds	r3, r3, #6
 7919 02a0 D7F88020 		ldr	r2, [r7, #128]
 7920 02a4 1344     		add	r3, r3, r2
 7921 02a6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7922 02a8 1A04     		lsls	r2, r3, #16
2122:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 7923              		.loc 1 2122 0
 7924 02aa 7B6F     		ldr	r3, [r7, #116]
 7925 02ac 0533     		adds	r3, r3, #5
 7926 02ae D7F88010 		ldr	r1, [r7, #128]
 7927 02b2 0B44     		add	r3, r3, r1
 7928 02b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cctJTvh1.s 			page 176


 7929 02b6 1B02     		lsls	r3, r3, #8
 7930 02b8 1343     		orrs	r3, r3, r2
2123:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 7931              		.loc 1 2123 0
 7932 02ba 7A6F     		ldr	r2, [r7, #116]
 7933 02bc 0432     		adds	r2, r2, #4
 7934 02be D7F88010 		ldr	r1, [r7, #128]
 7935 02c2 0A44     		add	r2, r2, r1
 7936 02c4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7937 02c6 1343     		orrs	r3, r3, r2
2121:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7938              		.loc 1 2121 0
 7939 02c8 FB66     		str	r3, [r7, #108]
2124:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 7940              		.loc 1 2124 0
 7941 02ca 3A6F     		ldr	r2, [r7, #112]
 7942 02cc FB6E     		ldr	r3, [r7, #108]
 7943 02ce 9A42     		cmp	r2, r3
 7944 02d0 1AD0     		beq	.L378
2125:bluetooth_rxtx.c ****                         goto rx_flush;
 7945              		.loc 1 2125 0
 7946 02d2 39E0     		b	.L377
 7947              	.L387:
 7948              		.align	2
 7949              	.L386:
 7950 02d4 3CC00920 		.word	537509948
 7951 02d8 D6BE898E 		.word	-1903575338
 7952 02dc 58C00920 		.word	537509976
 7953 02e0 00000000 		.word	channel
 7954 02e4 00000000 		.word	rx_tc
 7955 02e8 38C00920 		.word	537509944
 7956 02ec 00000000 		.word	rx_err
 7957 02f0 00000000 		.word	status
 7958 02f4 00000000 		.word	le
 7959 02f8 10410050 		.word	1342193936
 7960 02fc 24000340 		.word	1073938468
 7961 0300 10010000 		.word	whitening_word
 7962 0304 00000000 		.word	rxbuf1
 7963              	.L378:
2126:bluetooth_rxtx.c **** 
2127:bluetooth_rxtx.c **** 		
2128:bluetooth_rxtx.c **** 		if (p[38] == 0x00 && p[39] == 0x3d) // 37
 7964              		.loc 1 2128 0
 7965 0308 D7F88030 		ldr	r3, [r7, #128]
 7966 030c 2633     		adds	r3, r3, #38
 7967 030e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7968 0310 002B     		cmp	r3, #0
 7969 0312 16D1     		bne	.L379
 7970              		.loc 1 2128 0 is_stmt 0 discriminator 1
 7971 0314 D7F88030 		ldr	r3, [r7, #128]
 7972 0318 2733     		adds	r3, r3, #39
 7973 031a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7974 031c 3D2B     		cmp	r3, #61
 7975 031e 10D1     		bne	.L379
2129:bluetooth_rxtx.c **** 	//	if (p[38] == 0x44 && p[39] == 0x1d) // 38
2130:bluetooth_rxtx.c **** 	//	if (p[38] == 0x87 && p[39] == 0x02) // 39
2131:bluetooth_rxtx.c **** 		{
ARM GAS  /tmp/cctJTvh1.s 			page 177


2132:bluetooth_rxtx.c **** 			device_index = p[40];
 7976              		.loc 1 2132 0 is_stmt 1
 7977 0320 D7F88030 		ldr	r3, [r7, #128]
 7978 0324 93F82820 		ldrb	r2, [r3, #40]	@ zero_extendqisi2
 7979 0328 2D4B     		ldr	r3, .L388
 7980 032a 1A70     		strb	r2, [r3]
2133:bluetooth_rxtx.c **** 			enqueue_freq (MESSAGE, freq_buf);
 7981              		.loc 1 2133 0
 7982 032c 07F13803 		add	r3, r7, #56
 7983 0330 0220     		movs	r0, #2
 7984 0332 1946     		mov	r1, r3
 7985 0334 FFF7FEFF 		bl	enqueue_freq
2134:bluetooth_rxtx.c **** 			handle_usb(clkn);
 7986              		.loc 1 2134 0
 7987 0338 2A4B     		ldr	r3, .L388+4
 7988 033a 1B68     		ldr	r3, [r3]
 7989 033c 1846     		mov	r0, r3
 7990 033e FFF7FEFF 		bl	handle_usb
 7991              	.L379:
2135:bluetooth_rxtx.c **** 		}
2136:bluetooth_rxtx.c **** 		RXLED_CLR;
 7992              		.loc 1 2136 0
 7993 0342 294B     		ldr	r3, .L388+8
 7994 0344 1022     		movs	r2, #16
 7995 0346 1A60     		str	r2, [r3]
 7996              	.L377:
2137:bluetooth_rxtx.c **** 	       
2138:bluetooth_rxtx.c **** 	rx_flush:
2139:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 7997              		.loc 1 2139 0
 7998 0348 6420     		movs	r0, #100
 7999 034a FFF7FEFF 		bl	cc2400_strobe
2140:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 8000              		.loc 1 2140 0
 8001 034e 00BF     		nop
 8002              	.L380:
 8003              		.loc 1 2140 0 is_stmt 0 discriminator 1
 8004 0350 FFF7FEFF 		bl	cc2400_status
 8005 0354 0346     		mov	r3, r0
 8006 0356 03F00403 		and	r3, r3, #4
 8007 035a 002B     		cmp	r3, #0
 8008 035c F8D1     		bne	.L380
2141:bluetooth_rxtx.c **** 
2142:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 8009              		.loc 1 2142 0 is_stmt 1
 8010 035e 00BF     		nop
 8011              	.L381:
 8012              		.loc 1 2142 0 is_stmt 0 discriminator 1
 8013 0360 FFF7FEFF 		bl	cc2400_status
 8014 0364 0346     		mov	r3, r0
 8015 0366 03F04003 		and	r3, r3, #64
 8016 036a 002B     		cmp	r3, #0
 8017 036c F8D0     		beq	.L381
2143:bluetooth_rxtx.c **** 
2144:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 8018              		.loc 1 2144 0 is_stmt 1
 8019 036e 6120     		movs	r0, #97
ARM GAS  /tmp/cctJTvh1.s 			page 178


 8020 0370 FFF7FEFF 		bl	cc2400_strobe
2145:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 8021              		.loc 1 2145 0
 8022 0374 00BF     		nop
 8023              	.L382:
 8024              		.loc 1 2145 0 is_stmt 0 discriminator 1
 8025 0376 FFF7FEFF 		bl	cc2400_status
 8026 037a 0346     		mov	r3, r0
 8027 037c 03F00403 		and	r3, r3, #4
 8028 0380 002B     		cmp	r3, #0
 8029 0382 F8D0     		beq	.L382
2146:bluetooth_rxtx.c **** 
2147:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8030              		.loc 1 2147 0 is_stmt 1
 8031 0384 194A     		ldr	r2, .L388+12
 8032 0386 194B     		ldr	r3, .L388+12
 8033 0388 1B68     		ldr	r3, [r3]
 8034 038a 23F00103 		bic	r3, r3, #1
 8035 038e 1360     		str	r3, [r2]
2148:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8036              		.loc 1 2148 0
 8037 0390 03E0     		b	.L383
 8038              	.L384:
 8039              	.LBB9:
2149:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 8040              		.loc 1 2149 0
 8041 0392 174B     		ldr	r3, .L388+16
 8042 0394 1B68     		ldr	r3, [r3]
 8043 0396 87F86B30 		strb	r3, [r7, #107]
 8044              	.L383:
 8045              	.LBE9:
2148:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8046              		.loc 1 2148 0
 8047 039a 164B     		ldr	r3, .L388+20
 8048 039c 1B68     		ldr	r3, [r3]
 8049 039e 03F00403 		and	r3, r3, #4
 8050 03a2 002B     		cmp	r3, #0
 8051 03a4 F5D1     		bne	.L384
2150:bluetooth_rxtx.c ****                 }
2151:bluetooth_rxtx.c **** 		dma_init_le();
 8052              		.loc 1 2151 0
 8053 03a6 FFF7FEFF 		bl	dma_init_le
2152:bluetooth_rxtx.c **** 		dio_ssp_start();
 8054              		.loc 1 2152 0
 8055 03aa FFF7FEFF 		bl	dio_ssp_start
2153:bluetooth_rxtx.c **** 		
2154:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 8056              		.loc 1 2154 0
 8057 03ae 6220     		movs	r0, #98
 8058 03b0 FFF7FEFF 		bl	cc2400_strobe
2155:bluetooth_rxtx.c **** 		rx_tc = 0;
 8059              		.loc 1 2155 0
 8060 03b4 104B     		ldr	r3, .L388+24
 8061 03b6 0022     		movs	r2, #0
 8062 03b8 1A60     		str	r2, [r3]
2156:bluetooth_rxtx.c **** 		rx_err = 0;
 8063              		.loc 1 2156 0
ARM GAS  /tmp/cctJTvh1.s 			page 179


 8064 03ba 104B     		ldr	r3, .L388+28
 8065 03bc 0022     		movs	r2, #0
 8066 03be 1A60     		str	r2, [r3]
 8067              	.L363:
 8068              	.LBE7:
2062:bluetooth_rxtx.c **** 		
 8069              		.loc 1 2062 0
 8070 03c0 0F4B     		ldr	r3, .L388+32
 8071 03c2 1B78     		ldrb	r3, [r3]
 8072 03c4 DBB2     		uxtb	r3, r3
 8073 03c6 0E2B     		cmp	r3, #14
 8074 03c8 3FF4A7AE 		beq	.L385
2157:bluetooth_rxtx.c **** 	 
2158:bluetooth_rxtx.c **** 	
2159:bluetooth_rxtx.c **** 	}
2160:bluetooth_rxtx.c **** 	cc2400_idle();
 8075              		.loc 1 2160 0
 8076 03cc FFF7FEFF 		bl	cc2400_idle
2161:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 8077              		.loc 1 2161 0
 8078 03d0 FFF7FEFF 		bl	dio_ssp_stop
2162:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 8079              		.loc 1 2162 0
 8080 03d4 FFF7FEFF 		bl	cs_trigger_disable
2163:bluetooth_rxtx.c **** }
 8081              		.loc 1 2163 0
 8082 03d8 8C37     		adds	r7, r7, #140
 8083              		.cfi_def_cfa_offset 12
 8084 03da BD46     		mov	sp, r7
 8085              		.cfi_def_cfa_register 13
 8086              		@ sp needed
 8087 03dc 90BD     		pop	{r4, r7, pc}
 8088              	.L389:
 8089 03de 00BF     		.align	2
 8090              	.L388:
 8091 03e0 00000000 		.word	device_index
 8092 03e4 00000000 		.word	clkn
 8093 03e8 3CC00920 		.word	537509948
 8094 03ec 24000340 		.word	1073938468
 8095 03f0 08000340 		.word	1073938440
 8096 03f4 0C000340 		.word	1073938444
 8097 03f8 00000000 		.word	rx_tc
 8098 03fc 00000000 		.word	rx_err
 8099 0400 00000000 		.word	requested_mode
 8100              		.cfi_endproc
 8101              	.LFE35:
 8103              		.section	.text.bt_stream_legacy,"ax",%progbits
 8104              		.align	2
 8105              		.global	bt_stream_legacy
 8106              		.thumb
 8107              		.thumb_func
 8109              	bt_stream_legacy:
 8110              	.LFB36:
2164:bluetooth_rxtx.c **** 
2165:bluetooth_rxtx.c **** 
2166:bluetooth_rxtx.c **** // wpson legacy mode
2167:bluetooth_rxtx.c **** void bt_stream_legacy()
ARM GAS  /tmp/cctJTvh1.s 			page 180


2168:bluetooth_rxtx.c **** {
 8111              		.loc 1 2168 0
 8112              		.cfi_startproc
 8113              		@ args = 0, pretend = 0, frame = 88
 8114              		@ frame_needed = 1, uses_anonymous_args = 0
 8115 0000 90B5     		push	{r4, r7, lr}
 8116              		.cfi_def_cfa_offset 12
 8117              		.cfi_offset 4, -12
 8118              		.cfi_offset 7, -8
 8119              		.cfi_offset 14, -4
 8120 0002 97B0     		sub	sp, sp, #92
 8121              		.cfi_def_cfa_offset 104
 8122 0004 00AF     		add	r7, sp, #0
 8123              		.cfi_def_cfa_register 7
2169:bluetooth_rxtx.c **** //	TXLED_SET;
2170:bluetooth_rxtx.c **** 	RXLED_CLR;
 8124              		.loc 1 2170 0
 8125 0006 9E4B     		ldr	r3, .L417
 8126 0008 1022     		movs	r2, #16
 8127 000a 1A60     		str	r2, [r3]
2171:bluetooth_rxtx.c **** 	int i;
2172:bluetooth_rxtx.c **** 	
2173:bluetooth_rxtx.c **** 	queue_init();
 8128              		.loc 1 2173 0
 8129 000c FFF7FEFF 		bl	queue_init
2174:bluetooth_rxtx.c **** 	dio_ssp_init();
 8130              		.loc 1 2174 0
 8131 0010 FFF7FEFF 		bl	dio_ssp_init
2175:bluetooth_rxtx.c **** 	dma_init_le();
 8132              		.loc 1 2175 0
 8133 0014 FFF7FEFF 		bl	dma_init_le
2176:bluetooth_rxtx.c **** 	dio_ssp_start();
 8134              		.loc 1 2176 0
 8135 0018 FFF7FEFF 		bl	dio_ssp_start
2177:bluetooth_rxtx.c **** 	
2178:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 8136              		.loc 1 2178 0
 8137 001c 0D20     		movs	r0, #13
 8138 001e 47F6FF71 		movw	r1, #32767
 8139 0022 FFF7FEFF 		bl	cc2400_set
2179:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 8140              		.loc 1 2179 0
 8141 0026 1220     		movs	r0, #18
 8142 0028 42F62231 		movw	r1, #11042
 8143 002c FFF7FEFF 		bl	cc2400_set
2180:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 8144              		.loc 1 2180 0
 8145 0030 1420     		movs	r0, #20
 8146 0032 41F24B21 		movw	r1, #4683
 8147 0036 FFF7FEFF 		bl	cc2400_set
2181:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x6561); // un-buffered mode, GFSK
 8148              		.loc 1 2181 0
 8149 003a 2020     		movs	r0, #32
 8150 003c 46F26151 		movw	r1, #25953
 8151 0040 FFF7FEFF 		bl	cc2400_set
2182:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 8152              		.loc 1 2182 0
ARM GAS  /tmp/cctJTvh1.s 			page 181


 8153 0044 0320     		movs	r0, #3
 8154 0046 4021     		movs	r1, #64
 8155 0048 FFF7FEFF 		bl	cc2400_set
2183:bluetooth_rxtx.c **** 
2184:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2185:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2186:bluetooth_rxtx.c **** 	
2187:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 8156              		.loc 1 2187 0
 8157 004c 8D48     		ldr	r0, .L417+4
 8158 004e FFF7FEFF 		bl	rbit
 8159 0052 0346     		mov	r3, r0
 8160 0054 9BB2     		uxth	r3, r3
 8161 0056 2C20     		movs	r0, #44
 8162 0058 1946     		mov	r1, r3
 8163 005a FFF7FEFF 		bl	cc2400_set
2188:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 8164              		.loc 1 2188 0
 8165 005e 8948     		ldr	r0, .L417+4
 8166 0060 FFF7FEFF 		bl	rbit
 8167 0064 0346     		mov	r3, r0
 8168 0066 1B0C     		lsrs	r3, r3, #16
 8169 0068 9BB2     		uxth	r3, r3
 8170 006a 2D20     		movs	r0, #45
 8171 006c 1946     		mov	r1, r3
 8172 006e FFF7FEFF 		bl	cc2400_set
2189:bluetooth_rxtx.c **** 	
2190:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2191:bluetooth_rxtx.c **** 	PAEN_SET;
 8173              		.loc 1 2191 0
 8174 0072 854B     		ldr	r3, .L417+8
 8175 0074 8022     		movs	r2, #128
 8176 0076 1A60     		str	r2, [r3]
2192:bluetooth_rxtx.c **** //	HGM_SET;
2193:bluetooth_rxtx.c **** #endif
2194:bluetooth_rxtx.c **** 
2195:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8177              		.loc 1 2195 0
 8178 0078 00BF     		nop
 8179              	.L391:
 8180              		.loc 1 2195 0 is_stmt 0 discriminator 1
 8181 007a FFF7FEFF 		bl	cc2400_status
 8182 007e 0346     		mov	r3, r0
 8183 0080 03F04003 		and	r3, r3, #64
 8184 0084 002B     		cmp	r3, #0
 8185 0086 F8D0     		beq	.L391
2196:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8186              		.loc 1 2196 0 is_stmt 1
 8187 0088 00BF     		nop
 8188              	.L392:
 8189              		.loc 1 2196 0 is_stmt 0 discriminator 1
 8190 008a FFF7FEFF 		bl	cc2400_status
 8191 008e 0346     		mov	r3, r0
 8192 0090 03F00403 		and	r3, r3, #4
 8193 0094 002B     		cmp	r3, #0
 8194 0096 F8D1     		bne	.L392
2197:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 182


2198:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 8195              		.loc 1 2198 0 is_stmt 1
 8196 0098 7C4B     		ldr	r3, .L417+12
 8197 009a 1B88     		ldrh	r3, [r3]	@ movhi
 8198 009c 9BB2     		uxth	r3, r3
 8199 009e 013B     		subs	r3, r3, #1
 8200 00a0 9BB2     		uxth	r3, r3
 8201 00a2 0220     		movs	r0, #2
 8202 00a4 1946     		mov	r1, r3
 8203 00a6 FFF7FEFF 		bl	cc2400_set
2199:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 8204              		.loc 1 2199 0
 8205 00aa 6120     		movs	r0, #97
 8206 00ac FFF7FEFF 		bl	cc2400_strobe
2200:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 8207              		.loc 1 2200 0
 8208 00b0 00BF     		nop
 8209              	.L393:
 8210              		.loc 1 2200 0 is_stmt 0 discriminator 1
 8211 00b2 FFF7FEFF 		bl	cc2400_status
 8212 00b6 0346     		mov	r3, r0
 8213 00b8 03F00403 		and	r3, r3, #4
 8214 00bc 002B     		cmp	r3, #0
 8215 00be F8D0     		beq	.L393
2201:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 8216              		.loc 1 2201 0 is_stmt 1
 8217 00c0 6220     		movs	r0, #98
 8218 00c2 FFF7FEFF 		bl	cc2400_strobe
2202:bluetooth_rxtx.c **** 	
2203:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 8219              		.loc 1 2203 0
 8220 00c6 50E1     		b	.L394
 8221              	.L416:
 8222              	.LBB10:
2204:bluetooth_rxtx.c **** 		
2205:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 8223              		.loc 1 2205 0
 8224 00c8 00BF     		nop
 8225              	.L395:
 8226              		.loc 1 2205 0 is_stmt 0 discriminator 1
 8227 00ca FFF7FEFF 		bl	cc2400_status
 8228 00ce 0346     		mov	r3, r0
 8229 00d0 03F01003 		and	r3, r3, #16
 8230 00d4 002B     		cmp	r3, #0
 8231 00d6 F8D0     		beq	.L395
2206:bluetooth_rxtx.c **** /*		int out;
2207:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
2208:bluetooth_rxtx.c ****                 if (rssi >= 128)
2209:bluetooth_rxtx.c ****                         out = rssi - 256;
2210:bluetooth_rxtx.c ****                 else
2211:bluetooth_rxtx.c ****                         out = rssi;
2212:bluetooth_rxtx.c ****                 if (out < 0)
2213:bluetooth_rxtx.c **** 		  goto rx_flush;
2214:bluetooth_rxtx.c **** */
2215:bluetooth_rxtx.c **** 		rssi_sum = 0;
 8232              		.loc 1 2215 0 is_stmt 1
 8233 00d8 6D4B     		ldr	r3, .L417+16
ARM GAS  /tmp/cctJTvh1.s 			page 183


 8234 00da 0022     		movs	r2, #0
 8235 00dc 1A60     		str	r2, [r3]
2216:bluetooth_rxtx.c **** 		rssi_count = 5;
 8236              		.loc 1 2216 0
 8237 00de 6D4B     		ldr	r3, .L417+20
 8238 00e0 0522     		movs	r2, #5
 8239 00e2 1A70     		strb	r2, [r3]
2217:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8240              		.loc 1 2217 0
 8241 00e4 0023     		movs	r3, #0
 8242 00e6 7B65     		str	r3, [r7, #84]
 8243 00e8 0DE0     		b	.L396
 8244              	.L397:
2218:bluetooth_rxtx.c **** 		{
2219:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)cc2400_get_rev(RSSI);
 8245              		.loc 1 2219 0 discriminator 3
 8246 00ea 0620     		movs	r0, #6
 8247 00ec FFF7FEFF 		bl	cc2400_get_rev
 8248 00f0 0346     		mov	r3, r0
 8249 00f2 DBB2     		uxtb	r3, r3
 8250 00f4 5AB2     		sxtb	r2, r3
 8251 00f6 664B     		ldr	r3, .L417+16
 8252 00f8 1B68     		ldr	r3, [r3]
 8253 00fa 1344     		add	r3, r3, r2
 8254 00fc 644A     		ldr	r2, .L417+16
 8255 00fe 1360     		str	r3, [r2]
2217:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8256              		.loc 1 2217 0 discriminator 3
 8257 0100 7B6D     		ldr	r3, [r7, #84]
 8258 0102 0133     		adds	r3, r3, #1
 8259 0104 7B65     		str	r3, [r7, #84]
 8260              	.L396:
2217:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8261              		.loc 1 2217 0 is_stmt 0 discriminator 1
 8262 0106 634B     		ldr	r3, .L417+20
 8263 0108 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8264 010a 1A46     		mov	r2, r3
 8265 010c 7B6D     		ldr	r3, [r7, #84]
 8266 010e 9A42     		cmp	r2, r3
 8267 0110 EBDC     		bgt	.L397
2220:bluetooth_rxtx.c **** 		}
2221:bluetooth_rxtx.c **** 	
2222:bluetooth_rxtx.c **** 		clkn_legacy = clkn;
 8268              		.loc 1 2222 0 is_stmt 1
 8269 0112 614B     		ldr	r3, .L417+24
 8270 0114 1B68     		ldr	r3, [r3]
 8271 0116 614A     		ldr	r2, .L417+28
 8272 0118 1360     		str	r3, [r2]
2223:bluetooth_rxtx.c **** 		while (!rx_tc);
 8273              		.loc 1 2223 0
 8274 011a 00BF     		nop
 8275              	.L398:
 8276              		.loc 1 2223 0 is_stmt 0 discriminator 1
 8277 011c 604B     		ldr	r3, .L417+32
 8278 011e 1B68     		ldr	r3, [r3]
 8279 0120 002B     		cmp	r3, #0
 8280 0122 FBD0     		beq	.L398
ARM GAS  /tmp/cctJTvh1.s 			page 184


2224:bluetooth_rxtx.c **** 	
2225:bluetooth_rxtx.c **** 		RXLED_SET;
 8281              		.loc 1 2225 0 is_stmt 1
 8282 0124 5F4B     		ldr	r3, .L417+36
 8283 0126 1022     		movs	r2, #16
 8284 0128 1A60     		str	r2, [r3]
2226:bluetooth_rxtx.c **** 		if (rx_err) {
 8285              		.loc 1 2226 0
 8286 012a 5F4B     		ldr	r3, .L417+40
 8287 012c 1B68     		ldr	r3, [r3]
 8288 012e 002B     		cmp	r3, #0
 8289 0130 07D0     		beq	.L399
2227:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 8290              		.loc 1 2227 0
 8291 0132 5E4B     		ldr	r3, .L417+44
 8292 0134 1B78     		ldrb	r3, [r3]
 8293 0136 DBB2     		uxtb	r3, r3
 8294 0138 43F00203 		orr	r3, r3, #2
 8295 013c DAB2     		uxtb	r2, r3
 8296 013e 5B4B     		ldr	r3, .L417+44
 8297 0140 1A70     		strb	r2, [r3]
 8298              	.L399:
2228:bluetooth_rxtx.c **** 		}	
2229:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 8299              		.loc 1 2229 0
 8300 0142 574B     		ldr	r3, .L417+32
 8301 0144 1B68     		ldr	r3, [r3]
 8302 0146 012B     		cmp	r3, #1
 8303 0148 07D9     		bls	.L400
2230:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 8304              		.loc 1 2230 0
 8305 014a 584B     		ldr	r3, .L417+44
 8306 014c 1B78     		ldrb	r3, [r3]
 8307 014e DBB2     		uxtb	r3, r3
 8308 0150 43F00103 		orr	r3, r3, #1
 8309 0154 DAB2     		uxtb	r2, r3
 8310 0156 554B     		ldr	r3, .L417+44
 8311 0158 1A70     		strb	r2, [r3]
 8312              	.L400:
2231:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2232:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 8313              		.loc 1 2232 0
 8314 015a 3B1D     		adds	r3, r7, #4
 8315 015c 3B65     		str	r3, [r7, #80]
2233:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 8316              		.loc 1 2233 0
 8317 015e 544B     		ldr	r3, .L417+48
 8318 0160 1B68     		ldr	r3, [r3]
 8319 0162 7B60     		str	r3, [r7, #4]
2234:bluetooth_rxtx.c **** 
2235:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 8320              		.loc 1 2235 0
 8321 0164 00BF     		nop
 8322              	.L402:
 8323              		.loc 1 2235 0 is_stmt 0 discriminator 2
 8324 0166 534B     		ldr	r3, .L417+52
 8325 0168 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 185


 8326 016a 03F00103 		and	r3, r3, #1
 8327 016e 002B     		cmp	r3, #0
 8328 0170 03D0     		beq	.L401
 8329              		.loc 1 2235 0 discriminator 1
 8330 0172 4D4B     		ldr	r3, .L417+40
 8331 0174 1B68     		ldr	r3, [r3]
 8332 0176 002B     		cmp	r3, #0
 8333 0178 F5D0     		beq	.L402
 8334              	.L401:
2236:bluetooth_rxtx.c ****                 
2237:bluetooth_rxtx.c **** 			
2238:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8335              		.loc 1 2238 0 is_stmt 1
 8336 017a 4F4A     		ldr	r2, .L417+56
 8337 017c 4E4B     		ldr	r3, .L417+56
 8338 017e 1B68     		ldr	r3, [r3]
 8339 0180 23F00103 		bic	r3, r3, #1
 8340 0184 1360     		str	r3, [r2]
2239:bluetooth_rxtx.c **** 	
2240:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 8341              		.loc 1 2240 0
 8342 0186 414B     		ldr	r3, .L417+12
 8343 0188 1B88     		ldrh	r3, [r3]	@ movhi
 8344 018a 9BB2     		uxth	r3, r3
 8345 018c DBB2     		uxtb	r3, r3
 8346 018e 623B     		subs	r3, r3, #98
 8347 0190 DBB2     		uxtb	r3, r3
 8348 0192 1846     		mov	r0, r3
 8349 0194 FFF7FEFF 		bl	btle_channel_index
 8350 0198 0346     		mov	r3, r0
 8351 019a 1A46     		mov	r2, r3
 8352 019c 1346     		mov	r3, r2
 8353 019e 5B00     		lsls	r3, r3, #1
 8354 01a0 1344     		add	r3, r3, r2
 8355 01a2 1B01     		lsls	r3, r3, #4
 8356 01a4 454A     		ldr	r2, .L417+60
 8357 01a6 1344     		add	r3, r3, r2
 8358 01a8 FB64     		str	r3, [r7, #76]
2241:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 8359              		.loc 1 2241 0
 8360 01aa 0023     		movs	r3, #0
 8361 01ac 7B65     		str	r3, [r7, #84]
 8362 01ae 34E0     		b	.L403
 8363              	.L406:
 8364              	.LBB11:
2242:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8365              		.loc 1 2242 0 discriminator 3
 8366 01b0 434A     		ldr	r2, .L417+64
 8367 01b2 7B6D     		ldr	r3, [r7, #84]
 8368 01b4 1344     		add	r3, r3, r2
 8369 01b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8370 01b8 1A06     		lsls	r2, r3, #24
2243:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8371              		.loc 1 2243 0 discriminator 3
 8372 01ba 7B6D     		ldr	r3, [r7, #84]
 8373 01bc 0133     		adds	r3, r3, #1
 8374 01be 4049     		ldr	r1, .L417+64
ARM GAS  /tmp/cctJTvh1.s 			page 186


 8375 01c0 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8376 01c2 1B04     		lsls	r3, r3, #16
 8377 01c4 1A43     		orrs	r2, r2, r3
2244:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 8378              		.loc 1 2244 0 discriminator 3
 8379 01c6 7B6D     		ldr	r3, [r7, #84]
 8380 01c8 0233     		adds	r3, r3, #2
 8381 01ca 3D49     		ldr	r1, .L417+64
 8382 01cc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8383 01ce 1B02     		lsls	r3, r3, #8
 8384 01d0 1343     		orrs	r3, r3, r2
2245:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 8385              		.loc 1 2245 0 discriminator 3
 8386 01d2 7A6D     		ldr	r2, [r7, #84]
 8387 01d4 0332     		adds	r2, r2, #3
 8388 01d6 3A49     		ldr	r1, .L417+64
 8389 01d8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 8390 01da 1343     		orrs	r3, r3, r2
2242:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8391              		.loc 1 2242 0 discriminator 3
 8392 01dc BB64     		str	r3, [r7, #72]
2246:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 8393              		.loc 1 2246 0 discriminator 3
 8394 01de 7B6D     		ldr	r3, [r7, #84]
 8395 01e0 002B     		cmp	r3, #0
 8396 01e2 00DA     		bge	.L404
 8397 01e4 0333     		adds	r3, r3, #3
 8398              	.L404:
 8399 01e6 9B10     		asrs	r3, r3, #2
 8400 01e8 5C1C     		adds	r4, r3, #1
 8401 01ea B86C     		ldr	r0, [r7, #72]
 8402 01ec FFF7FEFF 		bl	rbit
 8403 01f0 0146     		mov	r1, r0
 8404 01f2 7B6D     		ldr	r3, [r7, #84]
 8405 01f4 002B     		cmp	r3, #0
 8406 01f6 00DA     		bge	.L405
 8407 01f8 0333     		adds	r3, r3, #3
 8408              	.L405:
 8409 01fa 9B10     		asrs	r3, r3, #2
 8410 01fc 9B00     		lsls	r3, r3, #2
 8411 01fe FA6C     		ldr	r2, [r7, #76]
 8412 0200 1344     		add	r3, r3, r2
 8413 0202 1B68     		ldr	r3, [r3]
 8414 0204 81EA0302 		eor	r2, r1, r3
 8415 0208 A300     		lsls	r3, r4, #2
 8416 020a 07F15801 		add	r1, r7, #88
 8417 020e 0B44     		add	r3, r3, r1
 8418 0210 43F8542C 		str	r2, [r3, #-84]
 8419              	.LBE11:
2241:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8420              		.loc 1 2241 0 discriminator 3
 8421 0214 7B6D     		ldr	r3, [r7, #84]
 8422 0216 0433     		adds	r3, r3, #4
 8423 0218 7B65     		str	r3, [r7, #84]
 8424              	.L403:
2241:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8425              		.loc 1 2241 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cctJTvh1.s 			page 187


 8426 021a 7B6D     		ldr	r3, [r7, #84]
 8427 021c 2B2B     		cmp	r3, #43
 8428 021e C7DD     		ble	.L406
2247:bluetooth_rxtx.c **** 		}
2248:bluetooth_rxtx.c **** 
2249:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2250:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2251:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2252:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2253:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2254:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2255:bluetooth_rxtx.c **** 		}
2256:bluetooth_rxtx.c **** */
2257:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 8429              		.loc 1 2257 0 is_stmt 1
 8430 0220 3B6D     		ldr	r3, [r7, #80]
 8431 0222 0533     		adds	r3, r3, #5
 8432 0224 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8433 0226 03F03F03 		and	r3, r3, #63
 8434 022a 0233     		adds	r3, r3, #2
 8435 022c 7B64     		str	r3, [r7, #68]
2258:bluetooth_rxtx.c **** 		
2259:bluetooth_rxtx.c **** 		if (len > 39)
 8436              		.loc 1 2259 0
 8437 022e 7B6C     		ldr	r3, [r7, #68]
 8438 0230 272B     		cmp	r3, #39
 8439 0232 00D9     		bls	.L407
2260:bluetooth_rxtx.c **** 			goto rx_flush;
 8440              		.loc 1 2260 0
 8441 0234 5DE0     		b	.L408
 8442              	.L407:
2261:bluetooth_rxtx.c **** 
2262:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 8443              		.loc 1 2262 0
 8444 0236 1E4B     		ldr	r3, .L417+48
 8445 0238 D968     		ldr	r1, [r3, #12]
 8446 023a 3B6D     		ldr	r3, [r7, #80]
 8447 023c 1A1D     		adds	r2, r3, #4
 8448 023e 7B6C     		ldr	r3, [r7, #68]
 8449 0240 0846     		mov	r0, r1
 8450 0242 1146     		mov	r1, r2
 8451 0244 1A46     		mov	r2, r3
 8452 0246 FFF7FEFF 		bl	btle_crcgen_lut
 8453 024a 3864     		str	r0, [r7, #64]
2263:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 8454              		.loc 1 2263 0
 8455 024c 7B6C     		ldr	r3, [r7, #68]
 8456 024e 0633     		adds	r3, r3, #6
 8457 0250 3A6D     		ldr	r2, [r7, #80]
 8458 0252 1344     		add	r3, r3, r2
 8459 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8460 0256 1A04     		lsls	r2, r3, #16
2264:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 8461              		.loc 1 2264 0
 8462 0258 7B6C     		ldr	r3, [r7, #68]
 8463 025a 0533     		adds	r3, r3, #5
 8464 025c 396D     		ldr	r1, [r7, #80]
ARM GAS  /tmp/cctJTvh1.s 			page 188


 8465 025e 0B44     		add	r3, r3, r1
 8466 0260 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8467 0262 1B02     		lsls	r3, r3, #8
 8468 0264 1343     		orrs	r3, r3, r2
2265:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 8469              		.loc 1 2265 0
 8470 0266 7A6C     		ldr	r2, [r7, #68]
 8471 0268 0432     		adds	r2, r2, #4
 8472 026a 396D     		ldr	r1, [r7, #80]
 8473 026c 0A44     		add	r2, r2, r1
 8474 026e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8475 0270 1343     		orrs	r3, r3, r2
2263:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 8476              		.loc 1 2263 0
 8477 0272 FB63     		str	r3, [r7, #60]
2266:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 8478              		.loc 1 2266 0
 8479 0274 3A6C     		ldr	r2, [r7, #64]
 8480 0276 FB6B     		ldr	r3, [r7, #60]
 8481 0278 9A42     		cmp	r2, r3
 8482 027a 23D0     		beq	.L409
2267:bluetooth_rxtx.c ****                         goto rx_flush;
 8483              		.loc 1 2267 0
 8484 027c 39E0     		b	.L408
 8485              	.L418:
 8486 027e 00BF     		.align	2
 8487              	.L417:
 8488 0280 3CC00920 		.word	537509948
 8489 0284 D6BE898E 		.word	-1903575338
 8490 0288 58C00920 		.word	537509976
 8491 028c 00000000 		.word	channel
 8492 0290 00000000 		.word	rssi_sum
 8493 0294 00000000 		.word	rssi_count
 8494 0298 00000000 		.word	clkn
 8495 029c 00000000 		.word	clkn_legacy
 8496 02a0 00000000 		.word	rx_tc
 8497 02a4 38C00920 		.word	537509944
 8498 02a8 00000000 		.word	rx_err
 8499 02ac 00000000 		.word	status
 8500 02b0 00000000 		.word	le
 8501 02b4 10410050 		.word	1342193936
 8502 02b8 24000340 		.word	1073938468
 8503 02bc 10010000 		.word	whitening_word
 8504 02c0 00000000 		.word	rxbuf1
 8505              	.L409:
2268:bluetooth_rxtx.c **** 
2269:bluetooth_rxtx.c **** 
2270:bluetooth_rxtx.c **** 		if (p[38] == 0x00 && p[39] == 0x3d) // 37
 8506              		.loc 1 2270 0
 8507 02c4 3B6D     		ldr	r3, [r7, #80]
 8508 02c6 2633     		adds	r3, r3, #38
 8509 02c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8510 02ca 002B     		cmp	r3, #0
 8511 02cc 09D1     		bne	.L410
 8512              		.loc 1 2270 0 is_stmt 0 discriminator 1
 8513 02ce 3B6D     		ldr	r3, [r7, #80]
 8514 02d0 2733     		adds	r3, r3, #39
ARM GAS  /tmp/cctJTvh1.s 			page 189


 8515 02d2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8516 02d4 3D2B     		cmp	r3, #61
 8517 02d6 04D1     		bne	.L410
2271:bluetooth_rxtx.c **** 		enqueue_legacy (BR_PACKET, (uint8_t*)packet);
 8518              		.loc 1 2271 0 is_stmt 1
 8519 02d8 3B1D     		adds	r3, r7, #4
 8520 02da 0020     		movs	r0, #0
 8521 02dc 1946     		mov	r1, r3
 8522 02de FFF7FEFF 		bl	enqueue_legacy
 8523              	.L410:
2272:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
2273:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8524              		.loc 1 2273 0
 8525 02e2 294B     		ldr	r3, .L419
 8526 02e4 1B68     		ldr	r3, [r3]
 8527 02e6 1846     		mov	r0, r3
 8528 02e8 FFF7FEFF 		bl	handle_usb
2274:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
2275:bluetooth_rxtx.c **** //		handle_usb(clkn);
2276:bluetooth_rxtx.c **** 		RXLED_CLR;
 8529              		.loc 1 2276 0
 8530 02ec 274B     		ldr	r3, .L419+4
 8531 02ee 1022     		movs	r2, #16
 8532 02f0 1A60     		str	r2, [r3]
 8533              	.L408:
2277:bluetooth_rxtx.c **** 	       
2278:bluetooth_rxtx.c **** 	rx_flush:
2279:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 8534              		.loc 1 2279 0
 8535 02f2 6420     		movs	r0, #100
 8536 02f4 FFF7FEFF 		bl	cc2400_strobe
2280:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 8537              		.loc 1 2280 0
 8538 02f8 00BF     		nop
 8539              	.L411:
 8540              		.loc 1 2280 0 is_stmt 0 discriminator 1
 8541 02fa FFF7FEFF 		bl	cc2400_status
 8542 02fe 0346     		mov	r3, r0
 8543 0300 03F00403 		and	r3, r3, #4
 8544 0304 002B     		cmp	r3, #0
 8545 0306 F8D1     		bne	.L411
2281:bluetooth_rxtx.c **** 
2282:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 8546              		.loc 1 2282 0 is_stmt 1
 8547 0308 00BF     		nop
 8548              	.L412:
 8549              		.loc 1 2282 0 is_stmt 0 discriminator 1
 8550 030a FFF7FEFF 		bl	cc2400_status
 8551 030e 0346     		mov	r3, r0
 8552 0310 03F04003 		and	r3, r3, #64
 8553 0314 002B     		cmp	r3, #0
 8554 0316 F8D0     		beq	.L412
2283:bluetooth_rxtx.c **** 
2284:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 8555              		.loc 1 2284 0 is_stmt 1
 8556 0318 6120     		movs	r0, #97
 8557 031a FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/cctJTvh1.s 			page 190


2285:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 8558              		.loc 1 2285 0
 8559 031e 00BF     		nop
 8560              	.L413:
 8561              		.loc 1 2285 0 is_stmt 0 discriminator 1
 8562 0320 FFF7FEFF 		bl	cc2400_status
 8563 0324 0346     		mov	r3, r0
 8564 0326 03F00403 		and	r3, r3, #4
 8565 032a 002B     		cmp	r3, #0
 8566 032c F8D0     		beq	.L413
2286:bluetooth_rxtx.c **** 
2287:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8567              		.loc 1 2287 0 is_stmt 1
 8568 032e 184A     		ldr	r2, .L419+8
 8569 0330 174B     		ldr	r3, .L419+8
 8570 0332 1B68     		ldr	r3, [r3]
 8571 0334 23F00103 		bic	r3, r3, #1
 8572 0338 1360     		str	r3, [r2]
2288:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8573              		.loc 1 2288 0
 8574 033a 03E0     		b	.L414
 8575              	.L415:
 8576              	.LBB12:
2289:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 8577              		.loc 1 2289 0
 8578 033c 154B     		ldr	r3, .L419+12
 8579 033e 1B68     		ldr	r3, [r3]
 8580 0340 87F83B30 		strb	r3, [r7, #59]
 8581              	.L414:
 8582              	.LBE12:
2288:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8583              		.loc 1 2288 0
 8584 0344 144B     		ldr	r3, .L419+16
 8585 0346 1B68     		ldr	r3, [r3]
 8586 0348 03F00403 		and	r3, r3, #4
 8587 034c 002B     		cmp	r3, #0
 8588 034e F5D1     		bne	.L415
2290:bluetooth_rxtx.c ****                 }
2291:bluetooth_rxtx.c **** 		dma_init_le();
 8589              		.loc 1 2291 0
 8590 0350 FFF7FEFF 		bl	dma_init_le
2292:bluetooth_rxtx.c **** 		dio_ssp_start();
 8591              		.loc 1 2292 0
 8592 0354 FFF7FEFF 		bl	dio_ssp_start
2293:bluetooth_rxtx.c **** 		
2294:bluetooth_rxtx.c **** //              msleep(500);    
2295:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 8593              		.loc 1 2295 0
 8594 0358 6220     		movs	r0, #98
 8595 035a FFF7FEFF 		bl	cc2400_strobe
2296:bluetooth_rxtx.c **** 		rx_tc = 0;
 8596              		.loc 1 2296 0
 8597 035e 0F4B     		ldr	r3, .L419+20
 8598 0360 0022     		movs	r2, #0
 8599 0362 1A60     		str	r2, [r3]
2297:bluetooth_rxtx.c **** 		rx_err = 0;	
 8600              		.loc 1 2297 0
ARM GAS  /tmp/cctJTvh1.s 			page 191


 8601 0364 0E4B     		ldr	r3, .L419+24
 8602 0366 0022     		movs	r2, #0
 8603 0368 1A60     		str	r2, [r3]
 8604              	.L394:
 8605              	.LBE10:
2203:bluetooth_rxtx.c **** 		
 8606              		.loc 1 2203 0
 8607 036a 0E4B     		ldr	r3, .L419+28
 8608 036c 1B78     		ldrb	r3, [r3]
 8609 036e DBB2     		uxtb	r3, r3
 8610 0370 012B     		cmp	r3, #1
 8611 0372 3FF4A9AE 		beq	.L416
2298:bluetooth_rxtx.c **** 	}
2299:bluetooth_rxtx.c **** 
2300:bluetooth_rxtx.c **** 	cc2400_idle();
 8612              		.loc 1 2300 0
 8613 0376 FFF7FEFF 		bl	cc2400_idle
2301:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 8614              		.loc 1 2301 0
 8615 037a FFF7FEFF 		bl	dio_ssp_stop
2302:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 8616              		.loc 1 2302 0
 8617 037e FFF7FEFF 		bl	cs_trigger_disable
2303:bluetooth_rxtx.c **** }
 8618              		.loc 1 2303 0
 8619 0382 5C37     		adds	r7, r7, #92
 8620              		.cfi_def_cfa_offset 12
 8621 0384 BD46     		mov	sp, r7
 8622              		.cfi_def_cfa_register 13
 8623              		@ sp needed
 8624 0386 90BD     		pop	{r4, r7, pc}
 8625              	.L420:
 8626              		.align	2
 8627              	.L419:
 8628 0388 00000000 		.word	clkn
 8629 038c 3CC00920 		.word	537509948
 8630 0390 24000340 		.word	1073938468
 8631 0394 08000340 		.word	1073938440
 8632 0398 0C000340 		.word	1073938444
 8633 039c 00000000 		.word	rx_tc
 8634 03a0 00000000 		.word	rx_err
 8635 03a4 00000000 		.word	requested_mode
 8636              		.cfi_endproc
 8637              	.LFE36:
 8639              		.section	.text.bt_stream_sniff,"ax",%progbits
 8640              		.align	2
 8641              		.global	bt_stream_sniff
 8642              		.thumb
 8643              		.thumb_func
 8645              	bt_stream_sniff:
 8646              	.LFB37:
2304:bluetooth_rxtx.c **** 
2305:bluetooth_rxtx.c **** 
2306:bluetooth_rxtx.c **** // wpson sniff mode
2307:bluetooth_rxtx.c **** void bt_stream_sniff()
2308:bluetooth_rxtx.c **** {
 8647              		.loc 1 2308 0
ARM GAS  /tmp/cctJTvh1.s 			page 192


 8648              		.cfi_startproc
 8649              		@ args = 0, pretend = 0, frame = 88
 8650              		@ frame_needed = 1, uses_anonymous_args = 0
 8651 0000 90B5     		push	{r4, r7, lr}
 8652              		.cfi_def_cfa_offset 12
 8653              		.cfi_offset 4, -12
 8654              		.cfi_offset 7, -8
 8655              		.cfi_offset 14, -4
 8656 0002 97B0     		sub	sp, sp, #92
 8657              		.cfi_def_cfa_offset 104
 8658 0004 00AF     		add	r7, sp, #0
 8659              		.cfi_def_cfa_register 7
2309:bluetooth_rxtx.c **** //	TXLED_SET;
2310:bluetooth_rxtx.c **** 	RXLED_CLR;
 8660              		.loc 1 2310 0
 8661 0006 B74B     		ldr	r3, .L447
 8662 0008 1022     		movs	r2, #16
 8663 000a 1A60     		str	r2, [r3]
2311:bluetooth_rxtx.c **** 	int i;
2312:bluetooth_rxtx.c **** 	
2313:bluetooth_rxtx.c **** 	queue_init();
 8664              		.loc 1 2313 0
 8665 000c FFF7FEFF 		bl	queue_init
2314:bluetooth_rxtx.c **** 	dio_ssp_init();
 8666              		.loc 1 2314 0
 8667 0010 FFF7FEFF 		bl	dio_ssp_init
2315:bluetooth_rxtx.c **** 	dma_init_le();
 8668              		.loc 1 2315 0
 8669 0014 FFF7FEFF 		bl	dma_init_le
2316:bluetooth_rxtx.c **** 	dio_ssp_start();
 8670              		.loc 1 2316 0
 8671 0018 FFF7FEFF 		bl	dio_ssp_start
2317:bluetooth_rxtx.c **** 	
2318:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 8672              		.loc 1 2318 0
 8673 001c 0D20     		movs	r0, #13
 8674 001e 47F6FF71 		movw	r1, #32767
 8675 0022 FFF7FEFF 		bl	cc2400_set
2319:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 8676              		.loc 1 2319 0
 8677 0026 1220     		movs	r0, #18
 8678 0028 42F62231 		movw	r1, #11042
 8679 002c FFF7FEFF 		bl	cc2400_set
2320:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 8680              		.loc 1 2320 0
 8681 0030 1420     		movs	r0, #20
 8682 0032 41F24B21 		movw	r1, #4683
 8683 0036 FFF7FEFF 		bl	cc2400_set
2321:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 8684              		.loc 1 2321 0
 8685 003a 2020     		movs	r0, #32
 8686 003c 40F26151 		movw	r1, #1377
 8687 0040 FFF7FEFF 		bl	cc2400_set
2322:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 8688              		.loc 1 2322 0
 8689 0044 0320     		movs	r0, #3
 8690 0046 4021     		movs	r1, #64
ARM GAS  /tmp/cctJTvh1.s 			page 193


 8691 0048 FFF7FEFF 		bl	cc2400_set
2323:bluetooth_rxtx.c **** 
2324:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2325:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2326:bluetooth_rxtx.c **** 	
2327:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 8692              		.loc 1 2327 0
 8693 004c A648     		ldr	r0, .L447+4
 8694 004e FFF7FEFF 		bl	rbit
 8695 0052 0346     		mov	r3, r0
 8696 0054 9BB2     		uxth	r3, r3
 8697 0056 2C20     		movs	r0, #44
 8698 0058 1946     		mov	r1, r3
 8699 005a FFF7FEFF 		bl	cc2400_set
2328:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 8700              		.loc 1 2328 0
 8701 005e A248     		ldr	r0, .L447+4
 8702 0060 FFF7FEFF 		bl	rbit
 8703 0064 0346     		mov	r3, r0
 8704 0066 1B0C     		lsrs	r3, r3, #16
 8705 0068 9BB2     		uxth	r3, r3
 8706 006a 2D20     		movs	r0, #45
 8707 006c 1946     		mov	r1, r3
 8708 006e FFF7FEFF 		bl	cc2400_set
2329:bluetooth_rxtx.c **** 	
2330:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2331:bluetooth_rxtx.c **** 	PAEN_SET;
 8709              		.loc 1 2331 0
 8710 0072 9E4B     		ldr	r3, .L447+8
 8711 0074 8022     		movs	r2, #128
 8712 0076 1A60     		str	r2, [r3]
2332:bluetooth_rxtx.c **** //	HGM_SET;
2333:bluetooth_rxtx.c **** #endif
2334:bluetooth_rxtx.c **** 
2335:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8713              		.loc 1 2335 0
 8714 0078 00BF     		nop
 8715              	.L422:
 8716              		.loc 1 2335 0 is_stmt 0 discriminator 1
 8717 007a FFF7FEFF 		bl	cc2400_status
 8718 007e 0346     		mov	r3, r0
 8719 0080 03F04003 		and	r3, r3, #64
 8720 0084 002B     		cmp	r3, #0
 8721 0086 F8D0     		beq	.L422
2336:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8722              		.loc 1 2336 0 is_stmt 1
 8723 0088 00BF     		nop
 8724              	.L423:
 8725              		.loc 1 2336 0 is_stmt 0 discriminator 1
 8726 008a FFF7FEFF 		bl	cc2400_status
 8727 008e 0346     		mov	r3, r0
 8728 0090 03F00403 		and	r3, r3, #4
 8729 0094 002B     		cmp	r3, #0
 8730 0096 F8D1     		bne	.L423
2337:bluetooth_rxtx.c **** 
2338:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 8731              		.loc 1 2338 0 is_stmt 1
ARM GAS  /tmp/cctJTvh1.s 			page 194


 8732 0098 954B     		ldr	r3, .L447+12
 8733 009a 1B88     		ldrh	r3, [r3]	@ movhi
 8734 009c 9BB2     		uxth	r3, r3
 8735 009e 013B     		subs	r3, r3, #1
 8736 00a0 9BB2     		uxth	r3, r3
 8737 00a2 0220     		movs	r0, #2
 8738 00a4 1946     		mov	r1, r3
 8739 00a6 FFF7FEFF 		bl	cc2400_set
2339:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 8740              		.loc 1 2339 0
 8741 00aa 6120     		movs	r0, #97
 8742 00ac FFF7FEFF 		bl	cc2400_strobe
2340:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 8743              		.loc 1 2340 0
 8744 00b0 00BF     		nop
 8745              	.L424:
 8746              		.loc 1 2340 0 is_stmt 0 discriminator 1
 8747 00b2 FFF7FEFF 		bl	cc2400_status
 8748 00b6 0346     		mov	r3, r0
 8749 00b8 03F00403 		and	r3, r3, #4
 8750 00bc 002B     		cmp	r3, #0
 8751 00be F8D0     		beq	.L424
2341:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 8752              		.loc 1 2341 0 is_stmt 1
 8753 00c0 6220     		movs	r0, #98
 8754 00c2 FFF7FEFF 		bl	cc2400_strobe
2342:bluetooth_rxtx.c **** 	
2343:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SNIFF) {
 8755              		.loc 1 2343 0
 8756 00c6 46E1     		b	.L425
 8757              	.L446:
 8758              	.LBB13:
2344:bluetooth_rxtx.c **** 		
2345:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 8759              		.loc 1 2345 0
 8760 00c8 00BF     		nop
 8761              	.L426:
 8762              		.loc 1 2345 0 is_stmt 0 discriminator 1
 8763 00ca FFF7FEFF 		bl	cc2400_status
 8764 00ce 0346     		mov	r3, r0
 8765 00d0 03F01003 		and	r3, r3, #16
 8766 00d4 002B     		cmp	r3, #0
 8767 00d6 F8D0     		beq	.L426
2346:bluetooth_rxtx.c **** /*		int out;
2347:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
2348:bluetooth_rxtx.c ****                 if (rssi >= 128)
2349:bluetooth_rxtx.c ****                         out = rssi - 256;
2350:bluetooth_rxtx.c ****                 else
2351:bluetooth_rxtx.c ****                         out = rssi;
2352:bluetooth_rxtx.c ****                 if (out < 0)
2353:bluetooth_rxtx.c **** 		  goto rx_flush;
2354:bluetooth_rxtx.c **** */
2355:bluetooth_rxtx.c **** 		rssi_sum = 0;
 8768              		.loc 1 2355 0 is_stmt 1
 8769 00d8 864B     		ldr	r3, .L447+16
 8770 00da 0022     		movs	r2, #0
 8771 00dc 1A60     		str	r2, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 195


2356:bluetooth_rxtx.c **** 		rssi_count = 5;
 8772              		.loc 1 2356 0
 8773 00de 864B     		ldr	r3, .L447+20
 8774 00e0 0522     		movs	r2, #5
 8775 00e2 1A70     		strb	r2, [r3]
2357:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8776              		.loc 1 2357 0
 8777 00e4 0023     		movs	r3, #0
 8778 00e6 7B65     		str	r3, [r7, #84]
 8779 00e8 0DE0     		b	.L427
 8780              	.L428:
2358:bluetooth_rxtx.c **** 		{
2359:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)cc2400_get_rev(RSSI);
 8781              		.loc 1 2359 0 discriminator 3
 8782 00ea 0620     		movs	r0, #6
 8783 00ec FFF7FEFF 		bl	cc2400_get_rev
 8784 00f0 0346     		mov	r3, r0
 8785 00f2 DBB2     		uxtb	r3, r3
 8786 00f4 5AB2     		sxtb	r2, r3
 8787 00f6 7F4B     		ldr	r3, .L447+16
 8788 00f8 1B68     		ldr	r3, [r3]
 8789 00fa 1344     		add	r3, r3, r2
 8790 00fc 7D4A     		ldr	r2, .L447+16
 8791 00fe 1360     		str	r3, [r2]
2357:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8792              		.loc 1 2357 0 discriminator 3
 8793 0100 7B6D     		ldr	r3, [r7, #84]
 8794 0102 0133     		adds	r3, r3, #1
 8795 0104 7B65     		str	r3, [r7, #84]
 8796              	.L427:
2357:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8797              		.loc 1 2357 0 is_stmt 0 discriminator 1
 8798 0106 7C4B     		ldr	r3, .L447+20
 8799 0108 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8800 010a 1A46     		mov	r2, r3
 8801 010c 7B6D     		ldr	r3, [r7, #84]
 8802 010e 9A42     		cmp	r2, r3
 8803 0110 EBDC     		bgt	.L428
2360:bluetooth_rxtx.c **** 		}
2361:bluetooth_rxtx.c **** 	
2362:bluetooth_rxtx.c **** 		clkn_legacy = clkn;
 8804              		.loc 1 2362 0 is_stmt 1
 8805 0112 7A4B     		ldr	r3, .L447+24
 8806 0114 1B68     		ldr	r3, [r3]
 8807 0116 7A4A     		ldr	r2, .L447+28
 8808 0118 1360     		str	r3, [r2]
2363:bluetooth_rxtx.c **** 		while (!rx_tc);
 8809              		.loc 1 2363 0
 8810 011a 00BF     		nop
 8811              	.L429:
 8812              		.loc 1 2363 0 is_stmt 0 discriminator 1
 8813 011c 794B     		ldr	r3, .L447+32
 8814 011e 1B68     		ldr	r3, [r3]
 8815 0120 002B     		cmp	r3, #0
 8816 0122 FBD0     		beq	.L429
2364:bluetooth_rxtx.c **** 	
2365:bluetooth_rxtx.c **** 		RXLED_SET;
ARM GAS  /tmp/cctJTvh1.s 			page 196


 8817              		.loc 1 2365 0 is_stmt 1
 8818 0124 784B     		ldr	r3, .L447+36
 8819 0126 1022     		movs	r2, #16
 8820 0128 1A60     		str	r2, [r3]
2366:bluetooth_rxtx.c **** 		if (rx_err) {
 8821              		.loc 1 2366 0
 8822 012a 784B     		ldr	r3, .L447+40
 8823 012c 1B68     		ldr	r3, [r3]
 8824 012e 002B     		cmp	r3, #0
 8825 0130 07D0     		beq	.L430
2367:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 8826              		.loc 1 2367 0
 8827 0132 774B     		ldr	r3, .L447+44
 8828 0134 1B78     		ldrb	r3, [r3]
 8829 0136 DBB2     		uxtb	r3, r3
 8830 0138 43F00203 		orr	r3, r3, #2
 8831 013c DAB2     		uxtb	r2, r3
 8832 013e 744B     		ldr	r3, .L447+44
 8833 0140 1A70     		strb	r2, [r3]
 8834              	.L430:
2368:bluetooth_rxtx.c **** 		}	
2369:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 8835              		.loc 1 2369 0
 8836 0142 704B     		ldr	r3, .L447+32
 8837 0144 1B68     		ldr	r3, [r3]
 8838 0146 012B     		cmp	r3, #1
 8839 0148 07D9     		bls	.L431
2370:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 8840              		.loc 1 2370 0
 8841 014a 714B     		ldr	r3, .L447+44
 8842 014c 1B78     		ldrb	r3, [r3]
 8843 014e DBB2     		uxtb	r3, r3
 8844 0150 43F00103 		orr	r3, r3, #1
 8845 0154 DAB2     		uxtb	r2, r3
 8846 0156 6E4B     		ldr	r3, .L447+44
 8847 0158 1A70     		strb	r2, [r3]
 8848              	.L431:
2371:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2372:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 8849              		.loc 1 2372 0
 8850 015a 3B1D     		adds	r3, r7, #4
 8851 015c 3B65     		str	r3, [r7, #80]
2373:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 8852              		.loc 1 2373 0
 8853 015e 6D4B     		ldr	r3, .L447+48
 8854 0160 1B68     		ldr	r3, [r3]
 8855 0162 7B60     		str	r3, [r7, #4]
2374:bluetooth_rxtx.c **** 
2375:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 8856              		.loc 1 2375 0
 8857 0164 00BF     		nop
 8858              	.L433:
 8859              		.loc 1 2375 0 is_stmt 0 discriminator 2
 8860 0166 6C4B     		ldr	r3, .L447+52
 8861 0168 1B68     		ldr	r3, [r3]
 8862 016a 03F00103 		and	r3, r3, #1
 8863 016e 002B     		cmp	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 197


 8864 0170 03D0     		beq	.L432
 8865              		.loc 1 2375 0 discriminator 1
 8866 0172 664B     		ldr	r3, .L447+40
 8867 0174 1B68     		ldr	r3, [r3]
 8868 0176 002B     		cmp	r3, #0
 8869 0178 F5D0     		beq	.L433
 8870              	.L432:
2376:bluetooth_rxtx.c ****                 
2377:bluetooth_rxtx.c **** 			
2378:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8871              		.loc 1 2378 0 is_stmt 1
 8872 017a 684A     		ldr	r2, .L447+56
 8873 017c 674B     		ldr	r3, .L447+56
 8874 017e 1B68     		ldr	r3, [r3]
 8875 0180 23F00103 		bic	r3, r3, #1
 8876 0184 1360     		str	r3, [r2]
2379:bluetooth_rxtx.c **** 	
2380:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 8877              		.loc 1 2380 0
 8878 0186 5A4B     		ldr	r3, .L447+12
 8879 0188 1B88     		ldrh	r3, [r3]	@ movhi
 8880 018a 9BB2     		uxth	r3, r3
 8881 018c DBB2     		uxtb	r3, r3
 8882 018e 623B     		subs	r3, r3, #98
 8883 0190 DBB2     		uxtb	r3, r3
 8884 0192 1846     		mov	r0, r3
 8885 0194 FFF7FEFF 		bl	btle_channel_index
 8886 0198 0346     		mov	r3, r0
 8887 019a 1A46     		mov	r2, r3
 8888 019c 1346     		mov	r3, r2
 8889 019e 5B00     		lsls	r3, r3, #1
 8890 01a0 1344     		add	r3, r3, r2
 8891 01a2 1B01     		lsls	r3, r3, #4
 8892 01a4 5E4A     		ldr	r2, .L447+60
 8893 01a6 1344     		add	r3, r3, r2
 8894 01a8 FB64     		str	r3, [r7, #76]
2381:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 8895              		.loc 1 2381 0
 8896 01aa 0023     		movs	r3, #0
 8897 01ac 7B65     		str	r3, [r7, #84]
 8898 01ae 34E0     		b	.L434
 8899              	.L437:
 8900              	.LBB14:
2382:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8901              		.loc 1 2382 0 discriminator 3
 8902 01b0 5C4A     		ldr	r2, .L447+64
 8903 01b2 7B6D     		ldr	r3, [r7, #84]
 8904 01b4 1344     		add	r3, r3, r2
 8905 01b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8906 01b8 1A06     		lsls	r2, r3, #24
2383:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8907              		.loc 1 2383 0 discriminator 3
 8908 01ba 7B6D     		ldr	r3, [r7, #84]
 8909 01bc 0133     		adds	r3, r3, #1
 8910 01be 5949     		ldr	r1, .L447+64
 8911 01c0 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8912 01c2 1B04     		lsls	r3, r3, #16
ARM GAS  /tmp/cctJTvh1.s 			page 198


 8913 01c4 1A43     		orrs	r2, r2, r3
2384:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 8914              		.loc 1 2384 0 discriminator 3
 8915 01c6 7B6D     		ldr	r3, [r7, #84]
 8916 01c8 0233     		adds	r3, r3, #2
 8917 01ca 5649     		ldr	r1, .L447+64
 8918 01cc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8919 01ce 1B02     		lsls	r3, r3, #8
 8920 01d0 1343     		orrs	r3, r3, r2
2385:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 8921              		.loc 1 2385 0 discriminator 3
 8922 01d2 7A6D     		ldr	r2, [r7, #84]
 8923 01d4 0332     		adds	r2, r2, #3
 8924 01d6 5349     		ldr	r1, .L447+64
 8925 01d8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 8926 01da 1343     		orrs	r3, r3, r2
2382:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8927              		.loc 1 2382 0 discriminator 3
 8928 01dc BB64     		str	r3, [r7, #72]
2386:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 8929              		.loc 1 2386 0 discriminator 3
 8930 01de 7B6D     		ldr	r3, [r7, #84]
 8931 01e0 002B     		cmp	r3, #0
 8932 01e2 00DA     		bge	.L435
 8933 01e4 0333     		adds	r3, r3, #3
 8934              	.L435:
 8935 01e6 9B10     		asrs	r3, r3, #2
 8936 01e8 5C1C     		adds	r4, r3, #1
 8937 01ea B86C     		ldr	r0, [r7, #72]
 8938 01ec FFF7FEFF 		bl	rbit
 8939 01f0 0146     		mov	r1, r0
 8940 01f2 7B6D     		ldr	r3, [r7, #84]
 8941 01f4 002B     		cmp	r3, #0
 8942 01f6 00DA     		bge	.L436
 8943 01f8 0333     		adds	r3, r3, #3
 8944              	.L436:
 8945 01fa 9B10     		asrs	r3, r3, #2
 8946 01fc 9B00     		lsls	r3, r3, #2
 8947 01fe FA6C     		ldr	r2, [r7, #76]
 8948 0200 1344     		add	r3, r3, r2
 8949 0202 1B68     		ldr	r3, [r3]
 8950 0204 81EA0302 		eor	r2, r1, r3
 8951 0208 A300     		lsls	r3, r4, #2
 8952 020a 07F15801 		add	r1, r7, #88
 8953 020e 0B44     		add	r3, r3, r1
 8954 0210 43F8542C 		str	r2, [r3, #-84]
 8955              	.LBE14:
2381:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8956              		.loc 1 2381 0 discriminator 3
 8957 0214 7B6D     		ldr	r3, [r7, #84]
 8958 0216 0433     		adds	r3, r3, #4
 8959 0218 7B65     		str	r3, [r7, #84]
 8960              	.L434:
2381:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8961              		.loc 1 2381 0 is_stmt 0 discriminator 1
 8962 021a 7B6D     		ldr	r3, [r7, #84]
 8963 021c 2B2B     		cmp	r3, #43
ARM GAS  /tmp/cctJTvh1.s 			page 199


 8964 021e C7DD     		ble	.L437
2387:bluetooth_rxtx.c **** 		}
2388:bluetooth_rxtx.c **** 
2389:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2390:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2391:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2392:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2393:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2394:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2395:bluetooth_rxtx.c **** 		}
2396:bluetooth_rxtx.c **** */
2397:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 8965              		.loc 1 2397 0 is_stmt 1
 8966 0220 3B6D     		ldr	r3, [r7, #80]
 8967 0222 0533     		adds	r3, r3, #5
 8968 0224 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8969 0226 03F03F03 		and	r3, r3, #63
 8970 022a 0233     		adds	r3, r3, #2
 8971 022c 7B64     		str	r3, [r7, #68]
2398:bluetooth_rxtx.c **** 		
2399:bluetooth_rxtx.c **** 		if (len > 39)
 8972              		.loc 1 2399 0
 8973 022e 7B6C     		ldr	r3, [r7, #68]
 8974 0230 272B     		cmp	r3, #39
 8975 0232 00D9     		bls	.L438
2400:bluetooth_rxtx.c **** 			goto rx_flush;
 8976              		.loc 1 2400 0
 8977 0234 30E0     		b	.L439
 8978              	.L438:
2401:bluetooth_rxtx.c **** 
2402:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 8979              		.loc 1 2402 0
 8980 0236 374B     		ldr	r3, .L447+48
 8981 0238 D968     		ldr	r1, [r3, #12]
 8982 023a 3B6D     		ldr	r3, [r7, #80]
 8983 023c 1A1D     		adds	r2, r3, #4
 8984 023e 7B6C     		ldr	r3, [r7, #68]
 8985 0240 0846     		mov	r0, r1
 8986 0242 1146     		mov	r1, r2
 8987 0244 1A46     		mov	r2, r3
 8988 0246 FFF7FEFF 		bl	btle_crcgen_lut
 8989 024a 3864     		str	r0, [r7, #64]
2403:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 8990              		.loc 1 2403 0
 8991 024c 7B6C     		ldr	r3, [r7, #68]
 8992 024e 0633     		adds	r3, r3, #6
 8993 0250 3A6D     		ldr	r2, [r7, #80]
 8994 0252 1344     		add	r3, r3, r2
 8995 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8996 0256 1A04     		lsls	r2, r3, #16
2404:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 8997              		.loc 1 2404 0
 8998 0258 7B6C     		ldr	r3, [r7, #68]
 8999 025a 0533     		adds	r3, r3, #5
 9000 025c 396D     		ldr	r1, [r7, #80]
 9001 025e 0B44     		add	r3, r3, r1
 9002 0260 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cctJTvh1.s 			page 200


 9003 0262 1B02     		lsls	r3, r3, #8
 9004 0264 1343     		orrs	r3, r3, r2
2405:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 9005              		.loc 1 2405 0
 9006 0266 7A6C     		ldr	r2, [r7, #68]
 9007 0268 0432     		adds	r2, r2, #4
 9008 026a 396D     		ldr	r1, [r7, #80]
 9009 026c 0A44     		add	r2, r2, r1
 9010 026e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9011 0270 1343     		orrs	r3, r3, r2
2403:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 9012              		.loc 1 2403 0
 9013 0272 FB63     		str	r3, [r7, #60]
2406:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 9014              		.loc 1 2406 0
 9015 0274 3A6C     		ldr	r2, [r7, #64]
 9016 0276 FB6B     		ldr	r3, [r7, #60]
 9017 0278 9A42     		cmp	r2, r3
 9018 027a 00D0     		beq	.L440
2407:bluetooth_rxtx.c ****                         goto rx_flush;
 9019              		.loc 1 2407 0
 9020 027c 0CE0     		b	.L439
 9021              	.L440:
2408:bluetooth_rxtx.c **** 
2409:bluetooth_rxtx.c **** 
2410:bluetooth_rxtx.c **** 		enqueue_legacy (BR_PACKET, (uint8_t*)packet);
 9022              		.loc 1 2410 0
 9023 027e 3B1D     		adds	r3, r7, #4
 9024 0280 0020     		movs	r0, #0
 9025 0282 1946     		mov	r1, r3
 9026 0284 FFF7FEFF 		bl	enqueue_legacy
2411:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
2412:bluetooth_rxtx.c **** 		handle_usb(clkn);
 9027              		.loc 1 2412 0
 9028 0288 1C4B     		ldr	r3, .L447+24
 9029 028a 1B68     		ldr	r3, [r3]
 9030 028c 1846     		mov	r0, r3
 9031 028e FFF7FEFF 		bl	handle_usb
2413:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
2414:bluetooth_rxtx.c **** //		handle_usb(clkn);
2415:bluetooth_rxtx.c **** 		RXLED_CLR;
 9032              		.loc 1 2415 0
 9033 0292 144B     		ldr	r3, .L447
 9034 0294 1022     		movs	r2, #16
 9035 0296 1A60     		str	r2, [r3]
 9036              	.L439:
2416:bluetooth_rxtx.c **** 	       
2417:bluetooth_rxtx.c **** 	rx_flush:
2418:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 9037              		.loc 1 2418 0
 9038 0298 6420     		movs	r0, #100
 9039 029a FFF7FEFF 		bl	cc2400_strobe
2419:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 9040              		.loc 1 2419 0
 9041 029e 00BF     		nop
 9042              	.L441:
 9043              		.loc 1 2419 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cctJTvh1.s 			page 201


 9044 02a0 FFF7FEFF 		bl	cc2400_status
 9045 02a4 0346     		mov	r3, r0
 9046 02a6 03F00403 		and	r3, r3, #4
 9047 02aa 002B     		cmp	r3, #0
 9048 02ac F8D1     		bne	.L441
2420:bluetooth_rxtx.c **** 
2421:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 9049              		.loc 1 2421 0 is_stmt 1
 9050 02ae 00BF     		nop
 9051              	.L442:
 9052              		.loc 1 2421 0 is_stmt 0 discriminator 1
 9053 02b0 FFF7FEFF 		bl	cc2400_status
 9054 02b4 0346     		mov	r3, r0
 9055 02b6 03F04003 		and	r3, r3, #64
 9056 02ba 002B     		cmp	r3, #0
 9057 02bc F8D0     		beq	.L442
2422:bluetooth_rxtx.c **** 
2423:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 9058              		.loc 1 2423 0 is_stmt 1
 9059 02be 6120     		movs	r0, #97
 9060 02c0 FFF7FEFF 		bl	cc2400_strobe
2424:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 9061              		.loc 1 2424 0
 9062 02c4 00BF     		nop
 9063              	.L443:
 9064              		.loc 1 2424 0 is_stmt 0 discriminator 1
 9065 02c6 FFF7FEFF 		bl	cc2400_status
 9066 02ca 0346     		mov	r3, r0
 9067 02cc 03F00403 		and	r3, r3, #4
 9068 02d0 002B     		cmp	r3, #0
 9069 02d2 F8D0     		beq	.L443
2425:bluetooth_rxtx.c **** 
2426:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 9070              		.loc 1 2426 0 is_stmt 1
 9071 02d4 114A     		ldr	r2, .L447+56
 9072 02d6 114B     		ldr	r3, .L447+56
 9073 02d8 1B68     		ldr	r3, [r3]
 9074 02da 23F00103 		bic	r3, r3, #1
 9075 02de 1360     		str	r3, [r2]
2427:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 9076              		.loc 1 2427 0
 9077 02e0 26E0     		b	.L444
 9078              	.L448:
 9079 02e2 00BF     		.align	2
 9080              	.L447:
 9081 02e4 3CC00920 		.word	537509948
 9082 02e8 D6BE898E 		.word	-1903575338
 9083 02ec 58C00920 		.word	537509976
 9084 02f0 00000000 		.word	channel
 9085 02f4 00000000 		.word	rssi_sum
 9086 02f8 00000000 		.word	rssi_count
 9087 02fc 00000000 		.word	clkn
 9088 0300 00000000 		.word	clkn_legacy
 9089 0304 00000000 		.word	rx_tc
 9090 0308 38C00920 		.word	537509944
 9091 030c 00000000 		.word	rx_err
 9092 0310 00000000 		.word	status
ARM GAS  /tmp/cctJTvh1.s 			page 202


 9093 0314 00000000 		.word	le
 9094 0318 10410050 		.word	1342193936
 9095 031c 24000340 		.word	1073938468
 9096 0320 10010000 		.word	whitening_word
 9097 0324 00000000 		.word	rxbuf1
 9098              	.L445:
 9099              	.LBB15:
2428:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 9100              		.loc 1 2428 0
 9101 0328 124B     		ldr	r3, .L449
 9102 032a 1B68     		ldr	r3, [r3]
 9103 032c 87F83B30 		strb	r3, [r7, #59]
 9104              	.L444:
 9105              	.LBE15:
2427:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 9106              		.loc 1 2427 0
 9107 0330 114B     		ldr	r3, .L449+4
 9108 0332 1B68     		ldr	r3, [r3]
 9109 0334 03F00403 		and	r3, r3, #4
 9110 0338 002B     		cmp	r3, #0
 9111 033a F5D1     		bne	.L445
2429:bluetooth_rxtx.c ****                 }
2430:bluetooth_rxtx.c **** 		dma_init_le();
 9112              		.loc 1 2430 0
 9113 033c FFF7FEFF 		bl	dma_init_le
2431:bluetooth_rxtx.c **** 		dio_ssp_start();
 9114              		.loc 1 2431 0
 9115 0340 FFF7FEFF 		bl	dio_ssp_start
2432:bluetooth_rxtx.c **** 		
2433:bluetooth_rxtx.c **** //              msleep(500);    
2434:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 9116              		.loc 1 2434 0
 9117 0344 6220     		movs	r0, #98
 9118 0346 FFF7FEFF 		bl	cc2400_strobe
2435:bluetooth_rxtx.c **** 		rx_tc = 0;
 9119              		.loc 1 2435 0
 9120 034a 0C4B     		ldr	r3, .L449+8
 9121 034c 0022     		movs	r2, #0
 9122 034e 1A60     		str	r2, [r3]
2436:bluetooth_rxtx.c **** 		rx_err = 0;	
 9123              		.loc 1 2436 0
 9124 0350 0B4B     		ldr	r3, .L449+12
 9125 0352 0022     		movs	r2, #0
 9126 0354 1A60     		str	r2, [r3]
 9127              	.L425:
 9128              	.LBE13:
2343:bluetooth_rxtx.c **** 		
 9129              		.loc 1 2343 0
 9130 0356 0B4B     		ldr	r3, .L449+16
 9131 0358 1B78     		ldrb	r3, [r3]
 9132 035a DBB2     		uxtb	r3, r3
 9133 035c 132B     		cmp	r3, #19
 9134 035e 3FF4B3AE 		beq	.L446
2437:bluetooth_rxtx.c **** 	}
2438:bluetooth_rxtx.c **** 
2439:bluetooth_rxtx.c **** 	cc2400_idle();
 9135              		.loc 1 2439 0
ARM GAS  /tmp/cctJTvh1.s 			page 203


 9136 0362 FFF7FEFF 		bl	cc2400_idle
2440:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 9137              		.loc 1 2440 0
 9138 0366 FFF7FEFF 		bl	dio_ssp_stop
2441:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 9139              		.loc 1 2441 0
 9140 036a FFF7FEFF 		bl	cs_trigger_disable
2442:bluetooth_rxtx.c **** }
 9141              		.loc 1 2442 0
 9142 036e 5C37     		adds	r7, r7, #92
 9143              		.cfi_def_cfa_offset 12
 9144 0370 BD46     		mov	sp, r7
 9145              		.cfi_def_cfa_register 13
 9146              		@ sp needed
 9147 0372 90BD     		pop	{r4, r7, pc}
 9148              	.L450:
 9149              		.align	2
 9150              	.L449:
 9151 0374 08000340 		.word	1073938440
 9152 0378 0C000340 		.word	1073938444
 9153 037c 00000000 		.word	rx_tc
 9154 0380 00000000 		.word	rx_err
 9155 0384 00000000 		.word	requested_mode
 9156              		.cfi_endproc
 9157              	.LFE37:
 9159              		.section	.text.bt_stream_cfo,"ax",%progbits
 9160              		.align	2
 9161              		.global	bt_stream_cfo
 9162              		.thumb
 9163              		.thumb_func
 9165              	bt_stream_cfo:
 9166              	.LFB38:
2443:bluetooth_rxtx.c **** 
2444:bluetooth_rxtx.c **** 
2445:bluetooth_rxtx.c **** // wpson cfo mode -F: raw cfo samples transfer to host
2446:bluetooth_rxtx.c **** void bt_stream_cfo()
2447:bluetooth_rxtx.c **** {
 9167              		.loc 1 2447 0
 9168              		.cfi_startproc
 9169              		@ args = 0, pretend = 0, frame = 64
 9170              		@ frame_needed = 1, uses_anonymous_args = 0
 9171 0000 80B5     		push	{r7, lr}
 9172              		.cfi_def_cfa_offset 8
 9173              		.cfi_offset 7, -8
 9174              		.cfi_offset 14, -4
 9175 0002 90B0     		sub	sp, sp, #64
 9176              		.cfi_def_cfa_offset 72
 9177 0004 00AF     		add	r7, sp, #0
 9178              		.cfi_def_cfa_register 7
2448:bluetooth_rxtx.c **** //	TXLED_SET;
2449:bluetooth_rxtx.c **** 	RXLED_CLR;
 9179              		.loc 1 2449 0
 9180 0006 5F4B     		ldr	r3, .L464
 9181 0008 1022     		movs	r2, #16
 9182 000a 1A60     		str	r2, [r3]
2450:bluetooth_rxtx.c **** 	int i;
2451:bluetooth_rxtx.c **** 	
ARM GAS  /tmp/cctJTvh1.s 			page 204


2452:bluetooth_rxtx.c **** 	u8 cfo_buf[DMA_SIZE];
2453:bluetooth_rxtx.c **** 	queue_init();
 9183              		.loc 1 2453 0
 9184 000c FFF7FEFF 		bl	queue_init
2454:bluetooth_rxtx.c **** 	
2455:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 9185              		.loc 1 2455 0
 9186 0010 0D20     		movs	r0, #13
 9187 0012 47F6FF71 		movw	r1, #32767
 9188 0016 FFF7FEFF 		bl	cc2400_set
2456:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9189              		.loc 1 2456 0
 9190 001a 1220     		movs	r0, #18
 9191 001c 42F62231 		movw	r1, #11042
 9192 0020 FFF7FEFF 		bl	cc2400_set
2457:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x104b); // without PRNG
 9193              		.loc 1 2457 0
 9194 0024 1420     		movs	r0, #20
 9195 0026 41F24B01 		movw	r1, #4171
 9196 002a FFF7FEFF 		bl	cc2400_set
2458:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 9197              		.loc 1 2458 0
 9198 002e 2020     		movs	r0, #32
 9199 0030 40F26151 		movw	r1, #1377
 9200 0034 FFF7FEFF 		bl	cc2400_set
2459:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 9201              		.loc 1 2459 0
 9202 0038 0320     		movs	r0, #3
 9203 003a 4021     		movs	r1, #64
 9204 003c FFF7FEFF 		bl	cc2400_set
2460:bluetooth_rxtx.c **** 
2461:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2462:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2463:bluetooth_rxtx.c **** 	
2464:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff); // BLE sync
 9205              		.loc 1 2464 0
 9206 0040 5148     		ldr	r0, .L464+4
 9207 0042 FFF7FEFF 		bl	rbit
 9208 0046 0346     		mov	r3, r0
 9209 0048 9BB2     		uxth	r3, r3
 9210 004a 2C20     		movs	r0, #44
 9211 004c 1946     		mov	r1, r3
 9212 004e FFF7FEFF 		bl	cc2400_set
2465:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff); // BLE sync
 9213              		.loc 1 2465 0
 9214 0052 4D48     		ldr	r0, .L464+4
 9215 0054 FFF7FEFF 		bl	rbit
 9216 0058 0346     		mov	r3, r0
 9217 005a 1B0C     		lsrs	r3, r3, #16
 9218 005c 9BB2     		uxth	r3, r3
 9219 005e 2D20     		movs	r0, #45
 9220 0060 1946     		mov	r1, r3
 9221 0062 FFF7FEFF 		bl	cc2400_set
2466:bluetooth_rxtx.c **** 	
2467:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2468:bluetooth_rxtx.c **** 	PAEN_SET;
 9222              		.loc 1 2468 0
ARM GAS  /tmp/cctJTvh1.s 			page 205


 9223 0066 494B     		ldr	r3, .L464+8
 9224 0068 8022     		movs	r2, #128
 9225 006a 1A60     		str	r2, [r3]
2469:bluetooth_rxtx.c **** //	HGM_SET;
2470:bluetooth_rxtx.c **** #endif
2471:bluetooth_rxtx.c **** 
2472:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9226              		.loc 1 2472 0
 9227 006c 00BF     		nop
 9228              	.L452:
 9229              		.loc 1 2472 0 is_stmt 0 discriminator 1
 9230 006e FFF7FEFF 		bl	cc2400_status
 9231 0072 0346     		mov	r3, r0
 9232 0074 03F04003 		and	r3, r3, #64
 9233 0078 002B     		cmp	r3, #0
 9234 007a F8D0     		beq	.L452
2473:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9235              		.loc 1 2473 0 is_stmt 1
 9236 007c 00BF     		nop
 9237              	.L453:
 9238              		.loc 1 2473 0 is_stmt 0 discriminator 1
 9239 007e FFF7FEFF 		bl	cc2400_status
 9240 0082 0346     		mov	r3, r0
 9241 0084 03F00403 		and	r3, r3, #4
 9242 0088 002B     		cmp	r3, #0
 9243 008a F8D1     		bne	.L453
2474:bluetooth_rxtx.c **** 
2475:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 9244              		.loc 1 2475 0 is_stmt 1
 9245 008c 404B     		ldr	r3, .L464+12
 9246 008e 1B88     		ldrh	r3, [r3]	@ movhi
 9247 0090 9BB2     		uxth	r3, r3
 9248 0092 013B     		subs	r3, r3, #1
 9249 0094 9BB2     		uxth	r3, r3
 9250 0096 0220     		movs	r0, #2
 9251 0098 1946     		mov	r1, r3
 9252 009a FFF7FEFF 		bl	cc2400_set
2476:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 9253              		.loc 1 2476 0
 9254 009e 6120     		movs	r0, #97
 9255 00a0 FFF7FEFF 		bl	cc2400_strobe
2477:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 9256              		.loc 1 2477 0
 9257 00a4 00BF     		nop
 9258              	.L454:
 9259              		.loc 1 2477 0 is_stmt 0 discriminator 1
 9260 00a6 FFF7FEFF 		bl	cc2400_status
 9261 00aa 0346     		mov	r3, r0
 9262 00ac 03F00403 		and	r3, r3, #4
 9263 00b0 002B     		cmp	r3, #0
 9264 00b2 F8D0     		beq	.L454
2478:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 9265              		.loc 1 2478 0 is_stmt 1
 9266 00b4 6220     		movs	r0, #98
 9267 00b6 FFF7FEFF 		bl	cc2400_strobe
2479:bluetooth_rxtx.c **** 	
2480:bluetooth_rxtx.c **** 	int out = -100;
ARM GAS  /tmp/cctJTvh1.s 			page 206


 9268              		.loc 1 2480 0
 9269 00ba 6FF06303 		mvn	r3, #99
 9270 00be 7B63     		str	r3, [r7, #52]
2481:bluetooth_rxtx.c **** 	u8 rssi;
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_CFO) {
 9271              		.loc 1 2483 0
 9272 00c0 54E0     		b	.L455
 9273              	.L463:
 9274              	.LBB16:
2484:bluetooth_rxtx.c **** 		
2485:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 9275              		.loc 1 2485 0
 9276 00c2 00BF     		nop
 9277              	.L456:
 9278              		.loc 1 2485 0 is_stmt 0 discriminator 1
 9279 00c4 FFF7FEFF 		bl	cc2400_status
 9280 00c8 0346     		mov	r3, r0
 9281 00ca 03F01003 		and	r3, r3, #16
 9282 00ce 002B     		cmp	r3, #0
 9283 00d0 F8D0     		beq	.L456
2486:bluetooth_rxtx.c **** /*
2487:bluetooth_rxtx.c **** 		out = -100;
2488:bluetooth_rxtx.c **** 
2489:bluetooth_rxtx.c **** 		while (out < 0)
2490:bluetooth_rxtx.c **** 		{
2491:bluetooth_rxtx.c **** 			rssi = (int8_t)cc2400_get_rev(RSSI);
2492:bluetooth_rxtx.c **** 			if (rssi >= 128)
2493:bluetooth_rxtx.c **** 				out = rssi - 256;
2494:bluetooth_rxtx.c **** 			else
2495:bluetooth_rxtx.c **** 				out = rssi;
2496:bluetooth_rxtx.c **** 		}
2497:bluetooth_rxtx.c **** */		
2498:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; i++)
 9284              		.loc 1 2498 0 is_stmt 1
 9285 00d2 0023     		movs	r3, #0
 9286 00d4 FB63     		str	r3, [r7, #60]
 9287 00d6 0CE0     		b	.L457
 9288              	.L458:
2499:bluetooth_rxtx.c **** 		{
2500:bluetooth_rxtx.c **** 			cfo_buf[i] = cc2400_get_rev(FREQEST);
 9289              		.loc 1 2500 0 discriminator 3
 9290 00d8 0720     		movs	r0, #7
 9291 00da FFF7FEFF 		bl	cc2400_get_rev
 9292 00de 0346     		mov	r3, r0
 9293 00e0 1946     		mov	r1, r3
 9294 00e2 3A46     		mov	r2, r7
 9295 00e4 FB6B     		ldr	r3, [r7, #60]
 9296 00e6 1344     		add	r3, r3, r2
 9297 00e8 0A46     		mov	r2, r1
 9298 00ea 1A70     		strb	r2, [r3]
2498:bluetooth_rxtx.c **** 		{
 9299              		.loc 1 2498 0 discriminator 3
 9300 00ec FB6B     		ldr	r3, [r7, #60]
 9301 00ee 0133     		adds	r3, r3, #1
 9302 00f0 FB63     		str	r3, [r7, #60]
 9303              	.L457:
ARM GAS  /tmp/cctJTvh1.s 			page 207


2498:bluetooth_rxtx.c **** 		{
 9304              		.loc 1 2498 0 is_stmt 0 discriminator 1
 9305 00f2 FB6B     		ldr	r3, [r7, #60]
 9306 00f4 312B     		cmp	r3, #49
 9307 00f6 EFDD     		ble	.L458
2501:bluetooth_rxtx.c **** 		}
2502:bluetooth_rxtx.c **** 	
2503:bluetooth_rxtx.c **** /*		rssi = (int8_t)cc2400_get_rev(RSSI);
2504:bluetooth_rxtx.c **** 			
2505:bluetooth_rxtx.c **** 		if (rssi >= 128)
2506:bluetooth_rxtx.c ****                         out = rssi - 256;
2507:bluetooth_rxtx.c ****                 else
2508:bluetooth_rxtx.c ****                         out = rssi;
2509:bluetooth_rxtx.c **** 
2510:bluetooth_rxtx.c **** 		if (out >= 0)
2511:bluetooth_rxtx.c **** */
2512:bluetooth_rxtx.c **** 		{
2513:bluetooth_rxtx.c **** 			RXLED_SET;
 9308              		.loc 1 2513 0 is_stmt 1
 9309 00f8 264B     		ldr	r3, .L464+16
 9310 00fa 1022     		movs	r2, #16
 9311 00fc 1A60     		str	r2, [r3]
2514:bluetooth_rxtx.c **** 
2515:bluetooth_rxtx.c **** 			
2516:bluetooth_rxtx.c **** 			enqueue (MESSAGE, cfo_buf);
 9312              		.loc 1 2516 0
 9313 00fe 3B46     		mov	r3, r7
 9314 0100 0220     		movs	r0, #2
 9315 0102 1946     		mov	r1, r3
 9316 0104 FFF7FEFF 		bl	enqueue
2517:bluetooth_rxtx.c **** 			handle_usb(clkn);
 9317              		.loc 1 2517 0
 9318 0108 234B     		ldr	r3, .L464+20
 9319 010a 1B68     		ldr	r3, [r3]
 9320 010c 1846     		mov	r0, r3
 9321 010e FFF7FEFF 		bl	handle_usb
2518:bluetooth_rxtx.c **** 			RXLED_CLR;
 9322              		.loc 1 2518 0
 9323 0112 1C4B     		ldr	r3, .L464
 9324 0114 1022     		movs	r2, #16
 9325 0116 1A60     		str	r2, [r3]
2519:bluetooth_rxtx.c **** 		}
2520:bluetooth_rxtx.c **** 
2521:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 9326              		.loc 1 2521 0
 9327 0118 6420     		movs	r0, #100
 9328 011a FFF7FEFF 		bl	cc2400_strobe
2522:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 9329              		.loc 1 2522 0
 9330 011e 00BF     		nop
 9331              	.L459:
 9332              		.loc 1 2522 0 is_stmt 0 discriminator 1
 9333 0120 FFF7FEFF 		bl	cc2400_status
 9334 0124 0346     		mov	r3, r0
 9335 0126 03F00403 		and	r3, r3, #4
 9336 012a 002B     		cmp	r3, #0
 9337 012c F8D1     		bne	.L459
ARM GAS  /tmp/cctJTvh1.s 			page 208


2523:bluetooth_rxtx.c **** 
2524:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 9338              		.loc 1 2524 0 is_stmt 1
 9339 012e 00BF     		nop
 9340              	.L460:
 9341              		.loc 1 2524 0 is_stmt 0 discriminator 1
 9342 0130 FFF7FEFF 		bl	cc2400_status
 9343 0134 0346     		mov	r3, r0
 9344 0136 03F04003 		and	r3, r3, #64
 9345 013a 002B     		cmp	r3, #0
 9346 013c F8D0     		beq	.L460
2525:bluetooth_rxtx.c **** 
2526:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 9347              		.loc 1 2526 0 is_stmt 1
 9348 013e 6120     		movs	r0, #97
 9349 0140 FFF7FEFF 		bl	cc2400_strobe
2527:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 9350              		.loc 1 2527 0
 9351 0144 00BF     		nop
 9352              	.L461:
 9353              		.loc 1 2527 0 is_stmt 0 discriminator 1
 9354 0146 FFF7FEFF 		bl	cc2400_status
 9355 014a 0346     		mov	r3, r0
 9356 014c 03F00403 		and	r3, r3, #4
 9357 0150 002B     		cmp	r3, #0
 9358 0152 F8D0     		beq	.L461
2528:bluetooth_rxtx.c **** 
2529:bluetooth_rxtx.c **** 		int k = 1000; while (--k);	
 9359              		.loc 1 2529 0 is_stmt 1
 9360 0154 4FF47A73 		mov	r3, #1000
 9361 0158 BB63     		str	r3, [r7, #56]
 9362              	.L462:
 9363              		.loc 1 2529 0 is_stmt 0 discriminator 2
 9364 015a BB6B     		ldr	r3, [r7, #56]
 9365 015c 013B     		subs	r3, r3, #1
 9366 015e BB63     		str	r3, [r7, #56]
 9367 0160 BB6B     		ldr	r3, [r7, #56]
 9368 0162 002B     		cmp	r3, #0
 9369 0164 F9D1     		bne	.L462
2530:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 9370              		.loc 1 2530 0 is_stmt 1
 9371 0166 6220     		movs	r0, #98
 9372 0168 FFF7FEFF 		bl	cc2400_strobe
 9373              	.L455:
 9374              	.LBE16:
2483:bluetooth_rxtx.c **** 		
 9375              		.loc 1 2483 0
 9376 016c 0B4B     		ldr	r3, .L464+24
 9377 016e 1B78     		ldrb	r3, [r3]
 9378 0170 DBB2     		uxtb	r3, r3
 9379 0172 122B     		cmp	r3, #18
 9380 0174 A5D0     		beq	.L463
2531:bluetooth_rxtx.c **** 
2532:bluetooth_rxtx.c **** 	}
2533:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 9381              		.loc 1 2533 0
 9382 0176 FFF7FEFF 		bl	dio_ssp_stop
ARM GAS  /tmp/cctJTvh1.s 			page 209


2534:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 9383              		.loc 1 2534 0
 9384 017a FFF7FEFF 		bl	cs_trigger_disable
2535:bluetooth_rxtx.c **** }
 9385              		.loc 1 2535 0
 9386 017e 4037     		adds	r7, r7, #64
 9387              		.cfi_def_cfa_offset 8
 9388 0180 BD46     		mov	sp, r7
 9389              		.cfi_def_cfa_register 13
 9390              		@ sp needed
 9391 0182 80BD     		pop	{r7, pc}
 9392              	.L465:
 9393              		.align	2
 9394              	.L464:
 9395 0184 3CC00920 		.word	537509948
 9396 0188 D6BE898E 		.word	-1903575338
 9397 018c 58C00920 		.word	537509976
 9398 0190 00000000 		.word	channel
 9399 0194 38C00920 		.word	537509944
 9400 0198 00000000 		.word	clkn
 9401 019c 00000000 		.word	requested_mode
 9402              		.cfi_endproc
 9403              	.LFE38:
 9405              		.section	.text.bt_stream_rssi,"ax",%progbits
 9406              		.align	2
 9407              		.global	bt_stream_rssi
 9408              		.thumb
 9409              		.thumb_func
 9411              	bt_stream_rssi:
 9412              	.LFB39:
2536:bluetooth_rxtx.c **** 
2537:bluetooth_rxtx.c **** 
2538:bluetooth_rxtx.c **** // wpson -R: rssi mode, transfer rssi samples to host 
2539:bluetooth_rxtx.c **** void bt_stream_rssi()
2540:bluetooth_rxtx.c **** {
 9413              		.loc 1 2540 0
 9414              		.cfi_startproc
 9415              		@ args = 0, pretend = 0, frame = 64
 9416              		@ frame_needed = 1, uses_anonymous_args = 0
 9417 0000 80B5     		push	{r7, lr}
 9418              		.cfi_def_cfa_offset 8
 9419              		.cfi_offset 7, -8
 9420              		.cfi_offset 14, -4
 9421 0002 90B0     		sub	sp, sp, #64
 9422              		.cfi_def_cfa_offset 72
 9423 0004 00AF     		add	r7, sp, #0
 9424              		.cfi_def_cfa_register 7
2541:bluetooth_rxtx.c **** //	TXLED_SET;
2542:bluetooth_rxtx.c **** 	RXLED_CLR;
 9425              		.loc 1 2542 0
 9426 0006 574B     		ldr	r3, .L479
 9427 0008 1022     		movs	r2, #16
 9428 000a 1A60     		str	r2, [r3]
2543:bluetooth_rxtx.c **** 	int i = 0;
 9429              		.loc 1 2543 0
 9430 000c 0023     		movs	r3, #0
 9431 000e FB63     		str	r3, [r7, #60]
ARM GAS  /tmp/cctJTvh1.s 			page 210


2544:bluetooth_rxtx.c **** 
2545:bluetooth_rxtx.c **** 	u8 rssi_buf[DMA_SIZE];
2546:bluetooth_rxtx.c **** 	queue_init();
 9432              		.loc 1 2546 0
 9433 0010 FFF7FEFF 		bl	queue_init
2547:bluetooth_rxtx.c **** 	
2548:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 9434              		.loc 1 2548 0
 9435 0014 0D20     		movs	r0, #13
 9436 0016 47F6FF71 		movw	r1, #32767
 9437 001a FFF7FEFF 		bl	cc2400_set
2549:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9438              		.loc 1 2549 0
 9439 001e 1220     		movs	r0, #18
 9440 0020 42F62231 		movw	r1, #11042
 9441 0024 FFF7FEFF 		bl	cc2400_set
2550:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 9442              		.loc 1 2550 0
 9443 0028 1420     		movs	r0, #20
 9444 002a 41F24B21 		movw	r1, #4683
 9445 002e FFF7FEFF 		bl	cc2400_set
2551:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 9446              		.loc 1 2551 0
 9447 0032 2020     		movs	r0, #32
 9448 0034 40F26151 		movw	r1, #1377
 9449 0038 FFF7FEFF 		bl	cc2400_set
2552:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 9450              		.loc 1 2552 0
 9451 003c 0320     		movs	r0, #3
 9452 003e 4021     		movs	r1, #64
 9453 0040 FFF7FEFF 		bl	cc2400_set
2553:bluetooth_rxtx.c **** 
2554:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2555:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2556:bluetooth_rxtx.c **** 	
2557:bluetooth_rxtx.c **** //	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff); // BLE
2558:bluetooth_rxtx.c **** //	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff); // BLE
2559:bluetooth_rxtx.c **** 	
2560:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2561:bluetooth_rxtx.c **** 	PAEN_SET;
 9454              		.loc 1 2561 0
 9455 0044 484B     		ldr	r3, .L479+4
 9456 0046 8022     		movs	r2, #128
 9457 0048 1A60     		str	r2, [r3]
2562:bluetooth_rxtx.c **** //	HGM_SET;
2563:bluetooth_rxtx.c **** #endif
2564:bluetooth_rxtx.c **** 
2565:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9458              		.loc 1 2565 0
 9459 004a 00BF     		nop
 9460              	.L467:
 9461              		.loc 1 2565 0 is_stmt 0 discriminator 1
 9462 004c FFF7FEFF 		bl	cc2400_status
 9463 0050 0346     		mov	r3, r0
 9464 0052 03F04003 		and	r3, r3, #64
 9465 0056 002B     		cmp	r3, #0
 9466 0058 F8D0     		beq	.L467
ARM GAS  /tmp/cctJTvh1.s 			page 211


2566:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9467              		.loc 1 2566 0 is_stmt 1
 9468 005a 00BF     		nop
 9469              	.L468:
 9470              		.loc 1 2566 0 is_stmt 0 discriminator 1
 9471 005c FFF7FEFF 		bl	cc2400_status
 9472 0060 0346     		mov	r3, r0
 9473 0062 03F00403 		and	r3, r3, #4
 9474 0066 002B     		cmp	r3, #0
 9475 0068 F8D1     		bne	.L468
2567:bluetooth_rxtx.c **** 
2568:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 9476              		.loc 1 2568 0 is_stmt 1
 9477 006a 404B     		ldr	r3, .L479+8
 9478 006c 1B88     		ldrh	r3, [r3]	@ movhi
 9479 006e 9BB2     		uxth	r3, r3
 9480 0070 013B     		subs	r3, r3, #1
 9481 0072 9BB2     		uxth	r3, r3
 9482 0074 0220     		movs	r0, #2
 9483 0076 1946     		mov	r1, r3
 9484 0078 FFF7FEFF 		bl	cc2400_set
2569:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 9485              		.loc 1 2569 0
 9486 007c 6120     		movs	r0, #97
 9487 007e FFF7FEFF 		bl	cc2400_strobe
2570:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 9488              		.loc 1 2570 0
 9489 0082 00BF     		nop
 9490              	.L469:
 9491              		.loc 1 2570 0 is_stmt 0 discriminator 1
 9492 0084 FFF7FEFF 		bl	cc2400_status
 9493 0088 0346     		mov	r3, r0
 9494 008a 03F00403 		and	r3, r3, #4
 9495 008e 002B     		cmp	r3, #0
 9496 0090 F8D0     		beq	.L469
2571:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 9497              		.loc 1 2571 0 is_stmt 1
 9498 0092 6220     		movs	r0, #98
 9499 0094 FFF7FEFF 		bl	cc2400_strobe
2572:bluetooth_rxtx.c **** 	u8 rssi;
2573:bluetooth_rxtx.c **** 	int out = -100;
 9500              		.loc 1 2573 0
 9501 0098 6FF06303 		mvn	r3, #99
 9502 009c BB63     		str	r3, [r7, #56]
2574:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_RSSI) {
 9503              		.loc 1 2574 0
 9504 009e 54E0     		b	.L470
 9505              	.L478:
2575:bluetooth_rxtx.c **** 		
2576:bluetooth_rxtx.c **** 		out = -100;
 9506              		.loc 1 2576 0
 9507 00a0 6FF06303 		mvn	r3, #99
 9508 00a4 BB63     		str	r3, [r7, #56]
2577:bluetooth_rxtx.c **** 		while (out < 0)
 9509              		.loc 1 2577 0
 9510 00a6 13E0     		b	.L471
 9511              	.L473:
ARM GAS  /tmp/cctJTvh1.s 			page 212


2578:bluetooth_rxtx.c **** 		{
2579:bluetooth_rxtx.c **** 			rssi = (int8_t)cc2400_get_rev(RSSI);
 9512              		.loc 1 2579 0
 9513 00a8 0620     		movs	r0, #6
 9514 00aa FFF7FEFF 		bl	cc2400_get_rev
 9515 00ae 0346     		mov	r3, r0
 9516 00b0 87F83730 		strb	r3, [r7, #55]
2580:bluetooth_rxtx.c **** 			
2581:bluetooth_rxtx.c **** 			if (rssi >= 128)
 9517              		.loc 1 2581 0
 9518 00b4 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 9519 00b8 5BB2     		sxtb	r3, r3
 9520 00ba 002B     		cmp	r3, #0
 9521 00bc 05DA     		bge	.L472
2582:bluetooth_rxtx.c ****                         	out = rssi - 256;
 9522              		.loc 1 2582 0
 9523 00be 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 9524 00c2 A3F58073 		sub	r3, r3, #256
 9525 00c6 BB63     		str	r3, [r7, #56]
 9526 00c8 02E0     		b	.L471
 9527              	.L472:
2583:bluetooth_rxtx.c ****                 	else
2584:bluetooth_rxtx.c ****                         	out = rssi;
 9528              		.loc 1 2584 0
 9529 00ca 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 9530 00ce BB63     		str	r3, [r7, #56]
 9531              	.L471:
2577:bluetooth_rxtx.c **** 		{
 9532              		.loc 1 2577 0
 9533 00d0 BB6B     		ldr	r3, [r7, #56]
 9534 00d2 002B     		cmp	r3, #0
 9535 00d4 E8DB     		blt	.L473
2585:bluetooth_rxtx.c **** 		}
2586:bluetooth_rxtx.c **** 	
2587:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; i++)
 9536              		.loc 1 2587 0
 9537 00d6 0023     		movs	r3, #0
 9538 00d8 FB63     		str	r3, [r7, #60]
 9539 00da 0CE0     		b	.L474
 9540              	.L475:
2588:bluetooth_rxtx.c **** 		{
2589:bluetooth_rxtx.c **** 			rssi_buf[i] = cc2400_get_rev(RSSI);
 9541              		.loc 1 2589 0 discriminator 3
 9542 00dc 0620     		movs	r0, #6
 9543 00de FFF7FEFF 		bl	cc2400_get_rev
 9544 00e2 0346     		mov	r3, r0
 9545 00e4 1946     		mov	r1, r3
 9546 00e6 3A1D     		adds	r2, r7, #4
 9547 00e8 FB6B     		ldr	r3, [r7, #60]
 9548 00ea 1344     		add	r3, r3, r2
 9549 00ec 0A46     		mov	r2, r1
 9550 00ee 1A70     		strb	r2, [r3]
2587:bluetooth_rxtx.c **** 		{
 9551              		.loc 1 2587 0 discriminator 3
 9552 00f0 FB6B     		ldr	r3, [r7, #60]
 9553 00f2 0133     		adds	r3, r3, #1
 9554 00f4 FB63     		str	r3, [r7, #60]
ARM GAS  /tmp/cctJTvh1.s 			page 213


 9555              	.L474:
2587:bluetooth_rxtx.c **** 		{
 9556              		.loc 1 2587 0 is_stmt 0 discriminator 1
 9557 00f6 FB6B     		ldr	r3, [r7, #60]
 9558 00f8 312B     		cmp	r3, #49
 9559 00fa EFDD     		ble	.L475
2590:bluetooth_rxtx.c **** 		}
2591:bluetooth_rxtx.c **** 
2592:bluetooth_rxtx.c **** //		i = 0;
2593:bluetooth_rxtx.c **** 		rssi = (int8_t)cc2400_get_rev(RSSI);
 9560              		.loc 1 2593 0 is_stmt 1
 9561 00fc 0620     		movs	r0, #6
 9562 00fe FFF7FEFF 		bl	cc2400_get_rev
 9563 0102 0346     		mov	r3, r0
 9564 0104 87F83730 		strb	r3, [r7, #55]
2594:bluetooth_rxtx.c **** 			
2595:bluetooth_rxtx.c **** 		if (rssi >= 128)
 9565              		.loc 1 2595 0
 9566 0108 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 9567 010c 5BB2     		sxtb	r3, r3
 9568 010e 002B     		cmp	r3, #0
 9569 0110 05DA     		bge	.L476
2596:bluetooth_rxtx.c ****                         out = rssi - 256;
 9570              		.loc 1 2596 0
 9571 0112 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 9572 0116 A3F58073 		sub	r3, r3, #256
 9573 011a BB63     		str	r3, [r7, #56]
 9574 011c 02E0     		b	.L477
 9575              	.L476:
2597:bluetooth_rxtx.c ****                 else
2598:bluetooth_rxtx.c ****                         out = rssi;
 9576              		.loc 1 2598 0
 9577 011e 97F83730 		ldrb	r3, [r7, #55]	@ zero_extendqisi2
 9578 0122 BB63     		str	r3, [r7, #56]
 9579              	.L477:
2599:bluetooth_rxtx.c **** 
2600:bluetooth_rxtx.c **** 		if (out >= 0)
 9580              		.loc 1 2600 0
 9581 0124 BB6B     		ldr	r3, [r7, #56]
 9582 0126 002B     		cmp	r3, #0
 9583 0128 0FDB     		blt	.L470
2601:bluetooth_rxtx.c **** 		{
2602:bluetooth_rxtx.c **** 			RXLED_SET;
 9584              		.loc 1 2602 0
 9585 012a 114B     		ldr	r3, .L479+12
 9586 012c 1022     		movs	r2, #16
 9587 012e 1A60     		str	r2, [r3]
2603:bluetooth_rxtx.c **** 
2604:bluetooth_rxtx.c **** 			
2605:bluetooth_rxtx.c **** 			enqueue (MESSAGE, rssi_buf);
 9588              		.loc 1 2605 0
 9589 0130 3B1D     		adds	r3, r7, #4
 9590 0132 0220     		movs	r0, #2
 9591 0134 1946     		mov	r1, r3
 9592 0136 FFF7FEFF 		bl	enqueue
2606:bluetooth_rxtx.c **** 			handle_usb(clkn);
 9593              		.loc 1 2606 0
ARM GAS  /tmp/cctJTvh1.s 			page 214


 9594 013a 0E4B     		ldr	r3, .L479+16
 9595 013c 1B68     		ldr	r3, [r3]
 9596 013e 1846     		mov	r0, r3
 9597 0140 FFF7FEFF 		bl	handle_usb
2607:bluetooth_rxtx.c **** 			RXLED_CLR;
 9598              		.loc 1 2607 0
 9599 0144 074B     		ldr	r3, .L479
 9600 0146 1022     		movs	r2, #16
 9601 0148 1A60     		str	r2, [r3]
 9602              	.L470:
2574:bluetooth_rxtx.c **** 		
 9603              		.loc 1 2574 0
 9604 014a 0B4B     		ldr	r3, .L479+20
 9605 014c 1B78     		ldrb	r3, [r3]
 9606 014e DBB2     		uxtb	r3, r3
 9607 0150 112B     		cmp	r3, #17
 9608 0152 A5D0     		beq	.L478
2608:bluetooth_rxtx.c **** 		}
2609:bluetooth_rxtx.c **** 	}
2610:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 9609              		.loc 1 2610 0
 9610 0154 FFF7FEFF 		bl	dio_ssp_stop
2611:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 9611              		.loc 1 2611 0
 9612 0158 FFF7FEFF 		bl	cs_trigger_disable
2612:bluetooth_rxtx.c **** 
2613:bluetooth_rxtx.c **** }
 9613              		.loc 1 2613 0
 9614 015c 4037     		adds	r7, r7, #64
 9615              		.cfi_def_cfa_offset 8
 9616 015e BD46     		mov	sp, r7
 9617              		.cfi_def_cfa_register 13
 9618              		@ sp needed
 9619 0160 80BD     		pop	{r7, pc}
 9620              	.L480:
 9621 0162 00BF     		.align	2
 9622              	.L479:
 9623 0164 3CC00920 		.word	537509948
 9624 0168 58C00920 		.word	537509976
 9625 016c 00000000 		.word	channel
 9626 0170 38C00920 		.word	537509944
 9627 0174 00000000 		.word	clkn
 9628 0178 00000000 		.word	requested_mode
 9629              		.cfi_endproc
 9630              	.LFE39:
 9632              		.section	.text.bt_stream_rx,"ax",%progbits
 9633              		.align	2
 9634              		.global	bt_stream_rx
 9635              		.thumb
 9636              		.thumb_func
 9638              	bt_stream_rx:
 9639              	.LFB40:
2614:bluetooth_rxtx.c **** 
2615:bluetooth_rxtx.c **** void bt_stream_rx()
2616:bluetooth_rxtx.c **** {
 9640              		.loc 1 2616 0
 9641              		.cfi_startproc
ARM GAS  /tmp/cctJTvh1.s 			page 215


 9642              		@ args = 0, pretend = 0, frame = 88
 9643              		@ frame_needed = 1, uses_anonymous_args = 0
 9644 0000 90B5     		push	{r4, r7, lr}
 9645              		.cfi_def_cfa_offset 12
 9646              		.cfi_offset 4, -12
 9647              		.cfi_offset 7, -8
 9648              		.cfi_offset 14, -4
 9649 0002 97B0     		sub	sp, sp, #92
 9650              		.cfi_def_cfa_offset 104
 9651 0004 00AF     		add	r7, sp, #0
 9652              		.cfi_def_cfa_register 7
2617:bluetooth_rxtx.c **** 	RXLED_CLR;
 9653              		.loc 1 2617 0
 9654 0006 AA4B     		ldr	r3, .L506
 9655 0008 1022     		movs	r2, #16
 9656 000a 1A60     		str	r2, [r3]
2618:bluetooth_rxtx.c **** 	int i;
2619:bluetooth_rxtx.c **** 
2620:bluetooth_rxtx.c **** 	queue_init();
 9657              		.loc 1 2620 0
 9658 000c FFF7FEFF 		bl	queue_init
2621:bluetooth_rxtx.c **** 	dio_ssp_init();
 9659              		.loc 1 2621 0
 9660 0010 FFF7FEFF 		bl	dio_ssp_init
2622:bluetooth_rxtx.c **** 	dma_init_le();
 9661              		.loc 1 2622 0
 9662 0014 FFF7FEFF 		bl	dma_init_le
2623:bluetooth_rxtx.c **** 	dio_ssp_start();
 9663              		.loc 1 2623 0
 9664 0018 FFF7FEFF 		bl	dio_ssp_start
2624:bluetooth_rxtx.c **** 	
2625:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 9665              		.loc 1 2625 0
 9666 001c 0D20     		movs	r0, #13
 9667 001e 47F6FF71 		movw	r1, #32767
 9668 0022 FFF7FEFF 		bl	cc2400_set
2626:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9669              		.loc 1 2626 0
 9670 0026 1220     		movs	r0, #18
 9671 0028 42F62231 		movw	r1, #11042
 9672 002c FFF7FEFF 		bl	cc2400_set
2627:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 9673              		.loc 1 2627 0
 9674 0030 1420     		movs	r0, #20
 9675 0032 41F24B21 		movw	r1, #4683
 9676 0036 FFF7FEFF 		bl	cc2400_set
2628:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 9677              		.loc 1 2628 0
 9678 003a 2020     		movs	r0, #32
 9679 003c 40F26151 		movw	r1, #1377
 9680 0040 FFF7FEFF 		bl	cc2400_set
2629:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 9681              		.loc 1 2629 0
 9682 0044 0320     		movs	r0, #3
 9683 0046 4021     		movs	r1, #64
 9684 0048 FFF7FEFF 		bl	cc2400_set
2630:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 216


2631:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2632:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2633:bluetooth_rxtx.c **** 	
2634:bluetooth_rxtx.c **** //	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
2635:bluetooth_rxtx.c **** //	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
2636:bluetooth_rxtx.c **** 	
2637:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2638:bluetooth_rxtx.c **** 	PAEN_SET;
 9685              		.loc 1 2638 0
 9686 004c 994B     		ldr	r3, .L506+4
 9687 004e 8022     		movs	r2, #128
 9688 0050 1A60     		str	r2, [r3]
2639:bluetooth_rxtx.c **** //	HGM_SET;
2640:bluetooth_rxtx.c **** #endif
2641:bluetooth_rxtx.c **** 
2642:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9689              		.loc 1 2642 0
 9690 0052 00BF     		nop
 9691              	.L482:
 9692              		.loc 1 2642 0 is_stmt 0 discriminator 1
 9693 0054 FFF7FEFF 		bl	cc2400_status
 9694 0058 0346     		mov	r3, r0
 9695 005a 03F04003 		and	r3, r3, #64
 9696 005e 002B     		cmp	r3, #0
 9697 0060 F8D0     		beq	.L482
2643:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9698              		.loc 1 2643 0 is_stmt 1
 9699 0062 00BF     		nop
 9700              	.L483:
 9701              		.loc 1 2643 0 is_stmt 0 discriminator 1
 9702 0064 FFF7FEFF 		bl	cc2400_status
 9703 0068 0346     		mov	r3, r0
 9704 006a 03F00403 		and	r3, r3, #4
 9705 006e 002B     		cmp	r3, #0
 9706 0070 F8D1     		bne	.L483
2644:bluetooth_rxtx.c **** 
2645:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 9707              		.loc 1 2645 0 is_stmt 1
 9708 0072 914B     		ldr	r3, .L506+8
 9709 0074 1B88     		ldrh	r3, [r3]	@ movhi
 9710 0076 9BB2     		uxth	r3, r3
 9711 0078 013B     		subs	r3, r3, #1
 9712 007a 9BB2     		uxth	r3, r3
 9713 007c 0220     		movs	r0, #2
 9714 007e 1946     		mov	r1, r3
 9715 0080 FFF7FEFF 		bl	cc2400_set
2646:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 9716              		.loc 1 2646 0
 9717 0084 6120     		movs	r0, #97
 9718 0086 FFF7FEFF 		bl	cc2400_strobe
2647:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 9719              		.loc 1 2647 0
 9720 008a 00BF     		nop
 9721              	.L484:
 9722              		.loc 1 2647 0 is_stmt 0 discriminator 1
 9723 008c FFF7FEFF 		bl	cc2400_status
 9724 0090 0346     		mov	r3, r0
ARM GAS  /tmp/cctJTvh1.s 			page 217


 9725 0092 03F00403 		and	r3, r3, #4
 9726 0096 002B     		cmp	r3, #0
 9727 0098 F8D0     		beq	.L484
2648:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 9728              		.loc 1 2648 0 is_stmt 1
 9729 009a 6220     		movs	r0, #98
 9730 009c FFF7FEFF 		bl	cc2400_strobe
2649:bluetooth_rxtx.c **** 	
2650:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 9731              		.loc 1 2650 0
 9732 00a0 3BE1     		b	.L485
 9733              	.L505:
 9734              	.LBB17:
2651:bluetooth_rxtx.c **** 		
2652:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 9735              		.loc 1 2652 0
 9736 00a2 00BF     		nop
 9737              	.L486:
 9738              		.loc 1 2652 0 is_stmt 0 discriminator 1
 9739 00a4 FFF7FEFF 		bl	cc2400_status
 9740 00a8 0346     		mov	r3, r0
 9741 00aa 03F01003 		and	r3, r3, #16
 9742 00ae 002B     		cmp	r3, #0
 9743 00b0 F8D0     		beq	.L486
2653:bluetooth_rxtx.c **** /*		int out;
2654:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
2655:bluetooth_rxtx.c ****                 if (rssi >= 128)
2656:bluetooth_rxtx.c ****                         out = rssi - 256;
2657:bluetooth_rxtx.c ****                 else
2658:bluetooth_rxtx.c ****                         out = rssi;
2659:bluetooth_rxtx.c ****                 if (out < 0)
2660:bluetooth_rxtx.c **** 		  goto rx_flush;
2661:bluetooth_rxtx.c **** */
2662:bluetooth_rxtx.c **** 		rssi_sum = 0;
 9744              		.loc 1 2662 0 is_stmt 1
 9745 00b2 824B     		ldr	r3, .L506+12
 9746 00b4 0022     		movs	r2, #0
 9747 00b6 1A60     		str	r2, [r3]
2663:bluetooth_rxtx.c **** 		rssi_count = 5;
 9748              		.loc 1 2663 0
 9749 00b8 814B     		ldr	r3, .L506+16
 9750 00ba 0522     		movs	r2, #5
 9751 00bc 1A70     		strb	r2, [r3]
2664:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 9752              		.loc 1 2664 0
 9753 00be 0023     		movs	r3, #0
 9754 00c0 7B65     		str	r3, [r7, #84]
 9755 00c2 0FE0     		b	.L487
 9756              	.L488:
2665:bluetooth_rxtx.c **** 		{
2666:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 9757              		.loc 1 2666 0 discriminator 3
 9758 00c4 0620     		movs	r0, #6
 9759 00c6 FFF7FEFF 		bl	cc2400_get
 9760 00ca 0346     		mov	r3, r0
 9761 00cc 1B0A     		lsrs	r3, r3, #8
 9762 00ce 9BB2     		uxth	r3, r3
ARM GAS  /tmp/cctJTvh1.s 			page 218


 9763 00d0 DBB2     		uxtb	r3, r3
 9764 00d2 5AB2     		sxtb	r2, r3
 9765 00d4 794B     		ldr	r3, .L506+12
 9766 00d6 1B68     		ldr	r3, [r3]
 9767 00d8 1344     		add	r3, r3, r2
 9768 00da 784A     		ldr	r2, .L506+12
 9769 00dc 1360     		str	r3, [r2]
2664:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 9770              		.loc 1 2664 0 discriminator 3
 9771 00de 7B6D     		ldr	r3, [r7, #84]
 9772 00e0 0133     		adds	r3, r3, #1
 9773 00e2 7B65     		str	r3, [r7, #84]
 9774              	.L487:
2664:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 9775              		.loc 1 2664 0 is_stmt 0 discriminator 1
 9776 00e4 764B     		ldr	r3, .L506+16
 9777 00e6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9778 00e8 1A46     		mov	r2, r3
 9779 00ea 7B6D     		ldr	r3, [r7, #84]
 9780 00ec 9A42     		cmp	r2, r3
 9781 00ee E9DC     		bgt	.L488
2667:bluetooth_rxtx.c **** 		}
2668:bluetooth_rxtx.c **** 	
2669:bluetooth_rxtx.c **** 		while (!rx_tc);
 9782              		.loc 1 2669 0 is_stmt 1
 9783 00f0 00BF     		nop
 9784              	.L489:
 9785              		.loc 1 2669 0 is_stmt 0 discriminator 1
 9786 00f2 744B     		ldr	r3, .L506+20
 9787 00f4 1B68     		ldr	r3, [r3]
 9788 00f6 002B     		cmp	r3, #0
 9789 00f8 FBD0     		beq	.L489
2670:bluetooth_rxtx.c **** 	
2671:bluetooth_rxtx.c **** 		RXLED_SET;
 9790              		.loc 1 2671 0 is_stmt 1
 9791 00fa 734B     		ldr	r3, .L506+24
 9792 00fc 1022     		movs	r2, #16
 9793 00fe 1A60     		str	r2, [r3]
2672:bluetooth_rxtx.c **** 		if (rx_err) {
 9794              		.loc 1 2672 0
 9795 0100 724B     		ldr	r3, .L506+28
 9796 0102 1B68     		ldr	r3, [r3]
 9797 0104 002B     		cmp	r3, #0
 9798 0106 07D0     		beq	.L490
2673:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 9799              		.loc 1 2673 0
 9800 0108 714B     		ldr	r3, .L506+32
 9801 010a 1B78     		ldrb	r3, [r3]
 9802 010c DBB2     		uxtb	r3, r3
 9803 010e 43F00203 		orr	r3, r3, #2
 9804 0112 DAB2     		uxtb	r2, r3
 9805 0114 6E4B     		ldr	r3, .L506+32
 9806 0116 1A70     		strb	r2, [r3]
 9807              	.L490:
2674:bluetooth_rxtx.c **** 		}	
2675:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 9808              		.loc 1 2675 0
ARM GAS  /tmp/cctJTvh1.s 			page 219


 9809 0118 6A4B     		ldr	r3, .L506+20
 9810 011a 1B68     		ldr	r3, [r3]
 9811 011c 012B     		cmp	r3, #1
 9812 011e 07D9     		bls	.L491
2676:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 9813              		.loc 1 2676 0
 9814 0120 6B4B     		ldr	r3, .L506+32
 9815 0122 1B78     		ldrb	r3, [r3]
 9816 0124 DBB2     		uxtb	r3, r3
 9817 0126 43F00103 		orr	r3, r3, #1
 9818 012a DAB2     		uxtb	r2, r3
 9819 012c 684B     		ldr	r3, .L506+32
 9820 012e 1A70     		strb	r2, [r3]
 9821              	.L491:
2677:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2678:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 9822              		.loc 1 2678 0
 9823 0130 3B1D     		adds	r3, r7, #4
 9824 0132 3B65     		str	r3, [r7, #80]
2679:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 9825              		.loc 1 2679 0
 9826 0134 674B     		ldr	r3, .L506+36
 9827 0136 1B68     		ldr	r3, [r3]
 9828 0138 7B60     		str	r3, [r7, #4]
2680:bluetooth_rxtx.c **** 
2681:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 9829              		.loc 1 2681 0
 9830 013a 00BF     		nop
 9831              	.L493:
 9832              		.loc 1 2681 0 is_stmt 0 discriminator 2
 9833 013c 664B     		ldr	r3, .L506+40
 9834 013e 1B68     		ldr	r3, [r3]
 9835 0140 03F00103 		and	r3, r3, #1
 9836 0144 002B     		cmp	r3, #0
 9837 0146 03D0     		beq	.L492
 9838              		.loc 1 2681 0 discriminator 1
 9839 0148 604B     		ldr	r3, .L506+28
 9840 014a 1B68     		ldr	r3, [r3]
 9841 014c 002B     		cmp	r3, #0
 9842 014e F5D0     		beq	.L493
 9843              	.L492:
2682:bluetooth_rxtx.c ****                 
2683:bluetooth_rxtx.c **** 			
2684:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 9844              		.loc 1 2684 0 is_stmt 1
 9845 0150 624A     		ldr	r2, .L506+44
 9846 0152 624B     		ldr	r3, .L506+44
 9847 0154 1B68     		ldr	r3, [r3]
 9848 0156 23F00103 		bic	r3, r3, #1
 9849 015a 1360     		str	r3, [r2]
2685:bluetooth_rxtx.c **** 	
2686:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 9850              		.loc 1 2686 0
 9851 015c 564B     		ldr	r3, .L506+8
 9852 015e 1B88     		ldrh	r3, [r3]	@ movhi
 9853 0160 9BB2     		uxth	r3, r3
 9854 0162 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/cctJTvh1.s 			page 220


 9855 0164 623B     		subs	r3, r3, #98
 9856 0166 DBB2     		uxtb	r3, r3
 9857 0168 1846     		mov	r0, r3
 9858 016a FFF7FEFF 		bl	btle_channel_index
 9859 016e 0346     		mov	r3, r0
 9860 0170 1A46     		mov	r2, r3
 9861 0172 1346     		mov	r3, r2
 9862 0174 5B00     		lsls	r3, r3, #1
 9863 0176 1344     		add	r3, r3, r2
 9864 0178 1B01     		lsls	r3, r3, #4
 9865 017a 594A     		ldr	r2, .L506+48
 9866 017c 1344     		add	r3, r3, r2
 9867 017e FB64     		str	r3, [r7, #76]
2687:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 9868              		.loc 1 2687 0
 9869 0180 0023     		movs	r3, #0
 9870 0182 7B65     		str	r3, [r7, #84]
 9871 0184 34E0     		b	.L494
 9872              	.L497:
 9873              	.LBB18:
2688:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9874              		.loc 1 2688 0 discriminator 3
 9875 0186 574A     		ldr	r2, .L506+52
 9876 0188 7B6D     		ldr	r3, [r7, #84]
 9877 018a 1344     		add	r3, r3, r2
 9878 018c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9879 018e 1A06     		lsls	r2, r3, #24
2689:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 9880              		.loc 1 2689 0 discriminator 3
 9881 0190 7B6D     		ldr	r3, [r7, #84]
 9882 0192 0133     		adds	r3, r3, #1
 9883 0194 5349     		ldr	r1, .L506+52
 9884 0196 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9885 0198 1B04     		lsls	r3, r3, #16
 9886 019a 1A43     		orrs	r2, r2, r3
2690:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 9887              		.loc 1 2690 0 discriminator 3
 9888 019c 7B6D     		ldr	r3, [r7, #84]
 9889 019e 0233     		adds	r3, r3, #2
 9890 01a0 5049     		ldr	r1, .L506+52
 9891 01a2 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9892 01a4 1B02     		lsls	r3, r3, #8
 9893 01a6 1343     		orrs	r3, r3, r2
2691:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 9894              		.loc 1 2691 0 discriminator 3
 9895 01a8 7A6D     		ldr	r2, [r7, #84]
 9896 01aa 0332     		adds	r2, r2, #3
 9897 01ac 4D49     		ldr	r1, .L506+52
 9898 01ae 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9899 01b0 1343     		orrs	r3, r3, r2
2688:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 9900              		.loc 1 2688 0 discriminator 3
 9901 01b2 BB64     		str	r3, [r7, #72]
2692:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 9902              		.loc 1 2692 0 discriminator 3
 9903 01b4 7B6D     		ldr	r3, [r7, #84]
 9904 01b6 002B     		cmp	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 221


 9905 01b8 00DA     		bge	.L495
 9906 01ba 0333     		adds	r3, r3, #3
 9907              	.L495:
 9908 01bc 9B10     		asrs	r3, r3, #2
 9909 01be 5C1C     		adds	r4, r3, #1
 9910 01c0 B86C     		ldr	r0, [r7, #72]
 9911 01c2 FFF7FEFF 		bl	rbit
 9912 01c6 0146     		mov	r1, r0
 9913 01c8 7B6D     		ldr	r3, [r7, #84]
 9914 01ca 002B     		cmp	r3, #0
 9915 01cc 00DA     		bge	.L496
 9916 01ce 0333     		adds	r3, r3, #3
 9917              	.L496:
 9918 01d0 9B10     		asrs	r3, r3, #2
 9919 01d2 9B00     		lsls	r3, r3, #2
 9920 01d4 FA6C     		ldr	r2, [r7, #76]
 9921 01d6 1344     		add	r3, r3, r2
 9922 01d8 1B68     		ldr	r3, [r3]
 9923 01da 81EA0302 		eor	r2, r1, r3
 9924 01de A300     		lsls	r3, r4, #2
 9925 01e0 07F15801 		add	r1, r7, #88
 9926 01e4 0B44     		add	r3, r3, r1
 9927 01e6 43F8542C 		str	r2, [r3, #-84]
 9928              	.LBE18:
2687:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9929              		.loc 1 2687 0 discriminator 3
 9930 01ea 7B6D     		ldr	r3, [r7, #84]
 9931 01ec 0433     		adds	r3, r3, #4
 9932 01ee 7B65     		str	r3, [r7, #84]
 9933              	.L494:
2687:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9934              		.loc 1 2687 0 is_stmt 0 discriminator 1
 9935 01f0 7B6D     		ldr	r3, [r7, #84]
 9936 01f2 2B2B     		cmp	r3, #43
 9937 01f4 C7DD     		ble	.L497
2693:bluetooth_rxtx.c **** 		}
2694:bluetooth_rxtx.c **** 
2695:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2696:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2697:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2698:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2699:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2700:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2701:bluetooth_rxtx.c **** 		}
2702:bluetooth_rxtx.c **** */
2703:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 9938              		.loc 1 2703 0 is_stmt 1
 9939 01f6 3B6D     		ldr	r3, [r7, #80]
 9940 01f8 0533     		adds	r3, r3, #5
 9941 01fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9942 01fc 03F03F03 		and	r3, r3, #63
 9943 0200 0233     		adds	r3, r3, #2
 9944 0202 7B64     		str	r3, [r7, #68]
2704:bluetooth_rxtx.c **** 		
2705:bluetooth_rxtx.c **** 		if (len > 39)
 9945              		.loc 1 2705 0
 9946 0204 7B6C     		ldr	r3, [r7, #68]
ARM GAS  /tmp/cctJTvh1.s 			page 222


 9947 0206 272B     		cmp	r3, #39
 9948 0208 00D9     		bls	.L498
2706:bluetooth_rxtx.c **** 			goto rx_flush;
 9949              		.loc 1 2706 0
 9950 020a 2BE0     		b	.L499
 9951              	.L498:
2707:bluetooth_rxtx.c **** 
2708:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 9952              		.loc 1 2708 0
 9953 020c 314B     		ldr	r3, .L506+36
 9954 020e D968     		ldr	r1, [r3, #12]
 9955 0210 3B6D     		ldr	r3, [r7, #80]
 9956 0212 1A1D     		adds	r2, r3, #4
 9957 0214 7B6C     		ldr	r3, [r7, #68]
 9958 0216 0846     		mov	r0, r1
 9959 0218 1146     		mov	r1, r2
 9960 021a 1A46     		mov	r2, r3
 9961 021c FFF7FEFF 		bl	btle_crcgen_lut
 9962 0220 3864     		str	r0, [r7, #64]
2709:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 9963              		.loc 1 2709 0
 9964 0222 7B6C     		ldr	r3, [r7, #68]
 9965 0224 0633     		adds	r3, r3, #6
 9966 0226 3A6D     		ldr	r2, [r7, #80]
 9967 0228 1344     		add	r3, r3, r2
 9968 022a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9969 022c 1A04     		lsls	r2, r3, #16
2710:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 9970              		.loc 1 2710 0
 9971 022e 7B6C     		ldr	r3, [r7, #68]
 9972 0230 0533     		adds	r3, r3, #5
 9973 0232 396D     		ldr	r1, [r7, #80]
 9974 0234 0B44     		add	r3, r3, r1
 9975 0236 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9976 0238 1B02     		lsls	r3, r3, #8
 9977 023a 1343     		orrs	r3, r3, r2
2711:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 9978              		.loc 1 2711 0
 9979 023c 7A6C     		ldr	r2, [r7, #68]
 9980 023e 0432     		adds	r2, r2, #4
 9981 0240 396D     		ldr	r1, [r7, #80]
 9982 0242 0A44     		add	r2, r2, r1
 9983 0244 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9984 0246 1343     		orrs	r3, r3, r2
2709:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 9985              		.loc 1 2709 0
 9986 0248 FB63     		str	r3, [r7, #60]
2712:bluetooth_rxtx.c **** //                if (calc_crc != wire_crc) // skip packets with a bad CRC
2713:bluetooth_rxtx.c **** //                        goto rx_flush;
2714:bluetooth_rxtx.c **** 
2715:bluetooth_rxtx.c **** 
2716:bluetooth_rxtx.c **** 		enqueue (BR_PACKET, (uint8_t*)packet);
 9987              		.loc 1 2716 0
 9988 024a 3B1D     		adds	r3, r7, #4
 9989 024c 0020     		movs	r0, #0
 9990 024e 1946     		mov	r1, r3
 9991 0250 FFF7FEFF 		bl	enqueue
ARM GAS  /tmp/cctJTvh1.s 			page 223


2717:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
2718:bluetooth_rxtx.c **** 		handle_usb(clkn);
 9992              		.loc 1 2718 0
 9993 0254 244B     		ldr	r3, .L506+56
 9994 0256 1B68     		ldr	r3, [r3]
 9995 0258 1846     		mov	r0, r3
 9996 025a FFF7FEFF 		bl	handle_usb
2719:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
2720:bluetooth_rxtx.c **** //		handle_usb(clkn);
2721:bluetooth_rxtx.c **** 		RXLED_CLR;
 9997              		.loc 1 2721 0
 9998 025e 144B     		ldr	r3, .L506
 9999 0260 1022     		movs	r2, #16
 10000 0262 1A60     		str	r2, [r3]
 10001              	.L499:
2722:bluetooth_rxtx.c **** 	       
2723:bluetooth_rxtx.c **** 	rx_flush:
2724:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 10002              		.loc 1 2724 0
 10003 0264 6420     		movs	r0, #100
 10004 0266 FFF7FEFF 		bl	cc2400_strobe
2725:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 10005              		.loc 1 2725 0
 10006 026a 00BF     		nop
 10007              	.L500:
 10008              		.loc 1 2725 0 is_stmt 0 discriminator 1
 10009 026c FFF7FEFF 		bl	cc2400_status
 10010 0270 0346     		mov	r3, r0
 10011 0272 03F00403 		and	r3, r3, #4
 10012 0276 002B     		cmp	r3, #0
 10013 0278 F8D1     		bne	.L500
2726:bluetooth_rxtx.c **** 
2727:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 10014              		.loc 1 2727 0 is_stmt 1
 10015 027a 00BF     		nop
 10016              	.L501:
 10017              		.loc 1 2727 0 is_stmt 0 discriminator 1
 10018 027c FFF7FEFF 		bl	cc2400_status
 10019 0280 0346     		mov	r3, r0
 10020 0282 03F04003 		and	r3, r3, #64
 10021 0286 002B     		cmp	r3, #0
 10022 0288 F8D0     		beq	.L501
2728:bluetooth_rxtx.c **** 
2729:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 10023              		.loc 1 2729 0 is_stmt 1
 10024 028a 6120     		movs	r0, #97
 10025 028c FFF7FEFF 		bl	cc2400_strobe
2730:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 10026              		.loc 1 2730 0
 10027 0290 00BF     		nop
 10028              	.L502:
 10029              		.loc 1 2730 0 is_stmt 0 discriminator 1
 10030 0292 FFF7FEFF 		bl	cc2400_status
 10031 0296 0346     		mov	r3, r0
 10032 0298 03F00403 		and	r3, r3, #4
 10033 029c 002B     		cmp	r3, #0
 10034 029e F8D0     		beq	.L502
ARM GAS  /tmp/cctJTvh1.s 			page 224


2731:bluetooth_rxtx.c **** 
2732:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 10035              		.loc 1 2732 0 is_stmt 1
 10036 02a0 0E4A     		ldr	r2, .L506+44
 10037 02a2 0E4B     		ldr	r3, .L506+44
 10038 02a4 1B68     		ldr	r3, [r3]
 10039 02a6 23F00103 		bic	r3, r3, #1
 10040 02aa 1360     		str	r3, [r2]
2733:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 10041              		.loc 1 2733 0
 10042 02ac 22E0     		b	.L503
 10043              	.L507:
 10044 02ae 00BF     		.align	2
 10045              	.L506:
 10046 02b0 3CC00920 		.word	537509948
 10047 02b4 58C00920 		.word	537509976
 10048 02b8 00000000 		.word	channel
 10049 02bc 00000000 		.word	rssi_sum
 10050 02c0 00000000 		.word	rssi_count
 10051 02c4 00000000 		.word	rx_tc
 10052 02c8 38C00920 		.word	537509944
 10053 02cc 00000000 		.word	rx_err
 10054 02d0 00000000 		.word	status
 10055 02d4 00000000 		.word	le
 10056 02d8 10410050 		.word	1342193936
 10057 02dc 24000340 		.word	1073938468
 10058 02e0 10010000 		.word	whitening_word
 10059 02e4 00000000 		.word	rxbuf1
 10060 02e8 00000000 		.word	clkn
 10061              	.L504:
 10062              	.LBB19:
2734:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 10063              		.loc 1 2734 0
 10064 02ec 114B     		ldr	r3, .L508
 10065 02ee 1B68     		ldr	r3, [r3]
 10066 02f0 87F83B30 		strb	r3, [r7, #59]
 10067              	.L503:
 10068              	.LBE19:
2733:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 10069              		.loc 1 2733 0
 10070 02f4 104B     		ldr	r3, .L508+4
 10071 02f6 1B68     		ldr	r3, [r3]
 10072 02f8 03F00403 		and	r3, r3, #4
 10073 02fc 002B     		cmp	r3, #0
 10074 02fe F5D1     		bne	.L504
2735:bluetooth_rxtx.c ****                 }
2736:bluetooth_rxtx.c **** 		dma_init_le();
 10075              		.loc 1 2736 0
 10076 0300 FFF7FEFF 		bl	dma_init_le
2737:bluetooth_rxtx.c **** 		dio_ssp_start();
 10077              		.loc 1 2737 0
 10078 0304 FFF7FEFF 		bl	dio_ssp_start
2738:bluetooth_rxtx.c **** 		
2739:bluetooth_rxtx.c **** //              msleep(500);    
2740:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 10079              		.loc 1 2740 0
 10080 0308 6220     		movs	r0, #98
ARM GAS  /tmp/cctJTvh1.s 			page 225


 10081 030a FFF7FEFF 		bl	cc2400_strobe
2741:bluetooth_rxtx.c **** 		rx_tc = 0;
 10082              		.loc 1 2741 0
 10083 030e 0B4B     		ldr	r3, .L508+8
 10084 0310 0022     		movs	r2, #0
 10085 0312 1A60     		str	r2, [r3]
2742:bluetooth_rxtx.c **** 		rx_err = 0;
 10086              		.loc 1 2742 0
 10087 0314 0A4B     		ldr	r3, .L508+12
 10088 0316 0022     		movs	r2, #0
 10089 0318 1A60     		str	r2, [r3]
 10090              	.L485:
 10091              	.LBE17:
2650:bluetooth_rxtx.c **** 		
 10092              		.loc 1 2650 0
 10093 031a 0A4B     		ldr	r3, .L508+16
 10094 031c 1B78     		ldrb	r3, [r3]
 10095 031e DBB2     		uxtb	r3, r3
 10096 0320 012B     		cmp	r3, #1
 10097 0322 3FF4BEAE 		beq	.L505
2743:bluetooth_rxtx.c **** 	 
2744:bluetooth_rxtx.c **** 	
2745:bluetooth_rxtx.c **** 	}
2746:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 10098              		.loc 1 2746 0
 10099 0326 FFF7FEFF 		bl	dio_ssp_stop
2747:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 10100              		.loc 1 2747 0
 10101 032a FFF7FEFF 		bl	cs_trigger_disable
2748:bluetooth_rxtx.c **** }
 10102              		.loc 1 2748 0
 10103 032e 5C37     		adds	r7, r7, #92
 10104              		.cfi_def_cfa_offset 12
 10105 0330 BD46     		mov	sp, r7
 10106              		.cfi_def_cfa_register 13
 10107              		@ sp needed
 10108 0332 90BD     		pop	{r4, r7, pc}
 10109              	.L509:
 10110              		.align	2
 10111              	.L508:
 10112 0334 08000340 		.word	1073938440
 10113 0338 0C000340 		.word	1073938444
 10114 033c 00000000 		.word	rx_tc
 10115 0340 00000000 		.word	rx_err
 10116 0344 00000000 		.word	requested_mode
 10117              		.cfi_endproc
 10118              	.LFE40:
 10120              		.section	.text.le_set_access_address,"ax",%progbits
 10121              		.align	2
 10122              		.thumb
 10123              		.thumb_func
 10125              	le_set_access_address:
 10126              	.LFB41:
2749:bluetooth_rxtx.c **** 
2750:bluetooth_rxtx.c **** 
2751:bluetooth_rxtx.c **** 
2752:bluetooth_rxtx.c **** /* set LE access address */
ARM GAS  /tmp/cctJTvh1.s 			page 226


2753:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 10127              		.loc 1 2753 0
 10128              		.cfi_startproc
 10129              		@ args = 0, pretend = 0, frame = 16
 10130              		@ frame_needed = 1, uses_anonymous_args = 0
 10131 0000 80B5     		push	{r7, lr}
 10132              		.cfi_def_cfa_offset 8
 10133              		.cfi_offset 7, -8
 10134              		.cfi_offset 14, -4
 10135 0002 84B0     		sub	sp, sp, #16
 10136              		.cfi_def_cfa_offset 24
 10137 0004 00AF     		add	r7, sp, #0
 10138              		.cfi_def_cfa_register 7
 10139 0006 7860     		str	r0, [r7, #4]
2754:bluetooth_rxtx.c **** 	u32 aa_rev;
2755:bluetooth_rxtx.c **** 
2756:bluetooth_rxtx.c **** 	le.access_address = aa;
 10140              		.loc 1 2756 0
 10141 0008 094A     		ldr	r2, .L511
 10142 000a 7B68     		ldr	r3, [r7, #4]
 10143 000c 1360     		str	r3, [r2]
2757:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 10144              		.loc 1 2757 0
 10145 000e 7868     		ldr	r0, [r7, #4]
 10146 0010 FFF7FEFF 		bl	rbit
 10147 0014 F860     		str	r0, [r7, #12]
2758:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 10148              		.loc 1 2758 0
 10149 0016 FB68     		ldr	r3, [r7, #12]
 10150 0018 9AB2     		uxth	r2, r3
 10151 001a 054B     		ldr	r3, .L511
 10152 001c DA80     		strh	r2, [r3, #6]	@ movhi
2759:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 10153              		.loc 1 2759 0
 10154 001e FB68     		ldr	r3, [r7, #12]
 10155 0020 1B0C     		lsrs	r3, r3, #16
 10156 0022 9AB2     		uxth	r2, r3
 10157 0024 024B     		ldr	r3, .L511
 10158 0026 9A80     		strh	r2, [r3, #4]	@ movhi
2760:bluetooth_rxtx.c **** }
 10159              		.loc 1 2760 0
 10160 0028 1037     		adds	r7, r7, #16
 10161              		.cfi_def_cfa_offset 8
 10162 002a BD46     		mov	sp, r7
 10163              		.cfi_def_cfa_register 13
 10164              		@ sp needed
 10165 002c 80BD     		pop	{r7, pc}
 10166              	.L512:
 10167 002e 00BF     		.align	2
 10168              	.L511:
 10169 0030 00000000 		.word	le
 10170              		.cfi_endproc
 10171              	.LFE41:
 10173              		.section	.text.reset_le,"ax",%progbits
 10174              		.align	2
 10175              		.global	reset_le
 10176              		.thumb
ARM GAS  /tmp/cctJTvh1.s 			page 227


 10177              		.thumb_func
 10179              	reset_le:
 10180              	.LFB42:
2761:bluetooth_rxtx.c **** 
2762:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
2763:bluetooth_rxtx.c **** void reset_le() {
 10181              		.loc 1 2763 0
 10182              		.cfi_startproc
 10183              		@ args = 0, pretend = 0, frame = 0
 10184              		@ frame_needed = 1, uses_anonymous_args = 0
 10185 0000 80B5     		push	{r7, lr}
 10186              		.cfi_def_cfa_offset 8
 10187              		.cfi_offset 7, -8
 10188              		.cfi_offset 14, -4
 10189 0002 00AF     		add	r7, sp, #0
 10190              		.cfi_def_cfa_register 7
2764:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 10191              		.loc 1 2764 0
 10192 0004 1F48     		ldr	r0, .L514
 10193 0006 FFF7FEFF 		bl	le_set_access_address
2765:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 10194              		.loc 1 2765 0
 10195 000a 1F4B     		ldr	r3, .L514+4
 10196 000c 1F4A     		ldr	r2, .L514+8
 10197 000e 9A60     		str	r2, [r3, #8]
2766:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 10198              		.loc 1 2766 0
 10199 0010 1D4B     		ldr	r3, .L514+4
 10200 0012 1F4A     		ldr	r2, .L514+12
 10201 0014 DA60     		str	r2, [r3, #12]
2767:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 10202              		.loc 1 2767 0
 10203 0016 1C4B     		ldr	r3, .L514+4
 10204 0018 0122     		movs	r2, #1
 10205 001a 1A61     		str	r2, [r3, #16]
2768:bluetooth_rxtx.c **** 	le.last_packet = 0;
 10206              		.loc 1 2768 0
 10207 001c 1A4B     		ldr	r3, .L514+4
 10208 001e 0022     		movs	r2, #0
 10209 0020 1A64     		str	r2, [r3, #64]
2769:bluetooth_rxtx.c **** 
2770:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 10210              		.loc 1 2770 0
 10211 0022 194B     		ldr	r3, .L514+4
 10212 0024 0022     		movs	r2, #0
 10213 0026 1A75     		strb	r2, [r3, #20]
2771:bluetooth_rxtx.c **** 
2772:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 10214              		.loc 1 2772 0
 10215 0028 174B     		ldr	r3, .L514+4
 10216 002a 0022     		movs	r2, #0
 10217 002c 5A75     		strb	r2, [r3, #21]
2773:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 10218              		.loc 1 2773 0
 10219 002e 164B     		ldr	r3, .L514+4
 10220 0030 0022     		movs	r2, #0
 10221 0032 9A75     		strb	r2, [r3, #22]
ARM GAS  /tmp/cctJTvh1.s 			page 228


2774:bluetooth_rxtx.c **** 
2775:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 10222              		.loc 1 2775 0
 10223 0034 144B     		ldr	r3, .L514+4
 10224 0036 0022     		movs	r2, #0
 10225 0038 9A61     		str	r2, [r3, #24]
2776:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 10226              		.loc 1 2776 0
 10227 003a 134B     		ldr	r3, .L514+4
 10228 003c 0022     		movs	r2, #0
 10229 003e 9A83     		strh	r2, [r3, #28]	@ movhi
2777:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 10230              		.loc 1 2777 0
 10231 0040 114B     		ldr	r3, .L514+4
 10232 0042 0022     		movs	r2, #0
 10233 0044 DA83     		strh	r2, [r3, #30]	@ movhi
2778:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 10234              		.loc 1 2778 0
 10235 0046 104B     		ldr	r3, .L514+4
 10236 0048 0022     		movs	r2, #0
 10237 004a DA83     		strh	r2, [r3, #30]	@ movhi
2779:bluetooth_rxtx.c **** 	le.conn_count = 0;
 10238              		.loc 1 2779 0
 10239 004c 0E4B     		ldr	r3, .L514+4
 10240 004e 0022     		movs	r2, #0
 10241 0050 1A84     		strh	r2, [r3, #32]	@ movhi
2780:bluetooth_rxtx.c **** 
2781:bluetooth_rxtx.c **** 	le.win_size = 0;
 10242              		.loc 1 2781 0
 10243 0052 0D4B     		ldr	r3, .L514+4
 10244 0054 0022     		movs	r2, #0
 10245 0056 83F82220 		strb	r2, [r3, #34]
2782:bluetooth_rxtx.c **** 	le.win_offset = 0;
 10246              		.loc 1 2782 0
 10247 005a 0B4B     		ldr	r3, .L514+4
 10248 005c 0022     		movs	r2, #0
 10249 005e 9A84     		strh	r2, [r3, #36]	@ movhi
2783:bluetooth_rxtx.c **** 
2784:bluetooth_rxtx.c **** 	le.update_pending = 0;
 10250              		.loc 1 2784 0
 10251 0060 094B     		ldr	r3, .L514+4
 10252 0062 0022     		movs	r2, #0
 10253 0064 9A62     		str	r2, [r3, #40]
2785:bluetooth_rxtx.c **** 	le.update_instant = 0;
 10254              		.loc 1 2785 0
 10255 0066 084B     		ldr	r3, .L514+4
 10256 0068 0022     		movs	r2, #0
 10257 006a 9A85     		strh	r2, [r3, #44]	@ movhi
2786:bluetooth_rxtx.c **** 	le.interval_update = 0;
 10258              		.loc 1 2786 0
 10259 006c 064B     		ldr	r3, .L514+4
 10260 006e 0022     		movs	r2, #0
 10261 0070 DA85     		strh	r2, [r3, #46]	@ movhi
2787:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 10262              		.loc 1 2787 0
 10263 0072 054B     		ldr	r3, .L514+4
 10264 0074 0022     		movs	r2, #0
ARM GAS  /tmp/cctJTvh1.s 			page 229


 10265 0076 83F83020 		strb	r2, [r3, #48]
2788:bluetooth_rxtx.c **** 	le.win_offset_update;
2789:bluetooth_rxtx.c **** 
2790:bluetooth_rxtx.c **** 	do_hop = 0;
 10266              		.loc 1 2790 0
 10267 007a 064B     		ldr	r3, .L514+16
 10268 007c 0022     		movs	r2, #0
 10269 007e 1A70     		strb	r2, [r3]
2791:bluetooth_rxtx.c **** }
 10270              		.loc 1 2791 0
 10271 0080 80BD     		pop	{r7, pc}
 10272              	.L515:
 10273 0082 00BF     		.align	2
 10274              	.L514:
 10275 0084 D6BE898E 		.word	-1903575338
 10276 0088 00000000 		.word	le
 10277 008c 55555500 		.word	5592405
 10278 0090 AAAAAA00 		.word	11184810
 10279 0094 00000000 		.word	do_hop
 10280              		.cfi_endproc
 10281              	.LFE42:
 10283              		.section	.text.reset_le_promisc,"ax",%progbits
 10284              		.align	2
 10285              		.global	reset_le_promisc
 10286              		.thumb
 10287              		.thumb_func
 10289              	reset_le_promisc:
 10290              	.LFB43:
2792:bluetooth_rxtx.c **** 
2793:bluetooth_rxtx.c **** // reset LE Promisc state
2794:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 10291              		.loc 1 2794 0
 10292              		.cfi_startproc
 10293              		@ args = 0, pretend = 0, frame = 0
 10294              		@ frame_needed = 1, uses_anonymous_args = 0
 10295 0000 80B5     		push	{r7, lr}
 10296              		.cfi_def_cfa_offset 8
 10297              		.cfi_offset 7, -8
 10298              		.cfi_offset 14, -4
 10299 0002 00AF     		add	r7, sp, #0
 10300              		.cfi_def_cfa_register 7
2795:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 10301              		.loc 1 2795 0
 10302 0004 0548     		ldr	r0, .L517
 10303 0006 0021     		movs	r1, #0
 10304 0008 4FF48472 		mov	r2, #264
 10305 000c FFF7FEFF 		bl	memset
2796:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 10306              		.loc 1 2796 0
 10307 0010 024B     		ldr	r3, .L517
 10308 0012 4FF0FF32 		mov	r2, #-1
 10309 0016 C3F80021 		str	r2, [r3, #256]
2797:bluetooth_rxtx.c **** }
 10310              		.loc 1 2797 0
 10311 001a 80BD     		pop	{r7, pc}
 10312              	.L518:
 10313              		.align	2
ARM GAS  /tmp/cctJTvh1.s 			page 230


 10314              	.L517:
 10315 001c 00000000 		.word	le_promisc
 10316              		.cfi_endproc
 10317              	.LFE43:
 10319              		.section	.text.bt_generic_le,"ax",%progbits
 10320              		.align	2
 10321              		.global	bt_generic_le
 10322              		.thumb
 10323              		.thumb_func
 10325              	bt_generic_le:
 10326              	.LFB44:
2798:bluetooth_rxtx.c **** 
2799:bluetooth_rxtx.c **** /* generic le mode */
2800:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
2801:bluetooth_rxtx.c **** {
 10327              		.loc 1 2801 0
 10328              		.cfi_startproc
 10329              		@ args = 0, pretend = 0, frame = 32
 10330              		@ frame_needed = 1, uses_anonymous_args = 0
 10331 0000 80B5     		push	{r7, lr}
 10332              		.cfi_def_cfa_offset 8
 10333              		.cfi_offset 7, -8
 10334              		.cfi_offset 14, -4
 10335 0002 88B0     		sub	sp, sp, #32
 10336              		.cfi_def_cfa_offset 40
 10337 0004 00AF     		add	r7, sp, #0
 10338              		.cfi_def_cfa_register 7
 10339 0006 0346     		mov	r3, r0
 10340 0008 FB71     		strb	r3, [r7, #7]
2802:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 10341              		.loc 1 2802 0
 10342 000a 0023     		movs	r3, #0
 10343 000c FB60     		str	r3, [r7, #12]
2803:bluetooth_rxtx.c **** 	u8 hold;
2804:bluetooth_rxtx.c **** 	int i, j;
2805:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
2806:bluetooth_rxtx.c **** 
2807:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 10344              		.loc 1 2807 0
 10345 000e A44B     		ldr	r3, .L547
 10346 0010 0122     		movs	r2, #1
 10347 0012 1A70     		strb	r2, [r3]
2808:bluetooth_rxtx.c **** 	mode = active_mode;
 10348              		.loc 1 2808 0
 10349 0014 A34A     		ldr	r2, .L547+4
 10350 0016 FB79     		ldrb	r3, [r7, #7]
 10351 0018 1370     		strb	r3, [r2]
2809:bluetooth_rxtx.c **** 
2810:bluetooth_rxtx.c **** 	reset_le();
 10352              		.loc 1 2810 0
 10353 001a FFF7FEFF 		bl	reset_le
2811:bluetooth_rxtx.c **** 
2812:bluetooth_rxtx.c **** 	// enable USB interrupts
2813:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 10354              		.loc 1 2813 0
 10355 001e A24B     		ldr	r3, .L547+8
 10356 0020 4FF08072 		mov	r2, #16777216
ARM GAS  /tmp/cctJTvh1.s 			page 231


 10357 0024 1A60     		str	r2, [r3]
2814:bluetooth_rxtx.c **** 
2815:bluetooth_rxtx.c **** 	RXLED_CLR;
 10358              		.loc 1 2815 0
 10359 0026 A14B     		ldr	r3, .L547+12
 10360 0028 1022     		movs	r2, #16
 10361 002a 1A60     		str	r2, [r3]
2816:bluetooth_rxtx.c **** 
2817:bluetooth_rxtx.c **** 	queue_init();
 10362              		.loc 1 2817 0
 10363 002c FFF7FEFF 		bl	queue_init
2818:bluetooth_rxtx.c **** 	dio_ssp_init();
 10364              		.loc 1 2818 0
 10365 0030 FFF7FEFF 		bl	dio_ssp_init
2819:bluetooth_rxtx.c **** 	dma_init();
 10366              		.loc 1 2819 0
 10367 0034 FFF7FEFF 		bl	dma_init
2820:bluetooth_rxtx.c **** 	dio_ssp_start();
 10368              		.loc 1 2820 0
 10369 0038 FFF7FEFF 		bl	dio_ssp_start
2821:bluetooth_rxtx.c **** 	cc2400_rx();
 10370              		.loc 1 2821 0
 10371 003c FFF7FEFF 		bl	cc2400_rx
2822:bluetooth_rxtx.c **** 
2823:bluetooth_rxtx.c **** 	cs_trigger_enable();
 10372              		.loc 1 2823 0
 10373 0040 FFF7FEFF 		bl	cs_trigger_enable
2824:bluetooth_rxtx.c **** 
2825:bluetooth_rxtx.c **** 	hold = 0;
 10374              		.loc 1 2825 0
 10375 0044 0023     		movs	r3, #0
 10376 0046 FB77     		strb	r3, [r7, #31]
2826:bluetooth_rxtx.c **** 
2827:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 10377              		.loc 1 2827 0
 10378 0048 15E1     		b	.L520
 10379              	.L546:
 10380              	.LBB20:
2828:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 10381              		.loc 1 2828 0
 10382 004a 994B     		ldr	r3, .L547+16
 10383 004c 1B88     		ldrh	r3, [r3]	@ movhi
 10384 004e 9BB2     		uxth	r3, r3
 10385 0050 002B     		cmp	r3, #0
 10386 0052 24D0     		beq	.L521
2829:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 10387              		.loc 1 2829 0
 10388 0054 6420     		movs	r0, #100
 10389 0056 FFF7FEFF 		bl	cc2400_strobe
2830:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 10390              		.loc 1 2830 0
 10391 005a 00BF     		nop
 10392              	.L522:
 10393              		.loc 1 2830 0 is_stmt 0 discriminator 1
 10394 005c FFF7FEFF 		bl	cc2400_status
 10395 0060 0346     		mov	r3, r0
 10396 0062 03F00403 		and	r3, r3, #4
ARM GAS  /tmp/cctJTvh1.s 			page 232


 10397 0066 002B     		cmp	r3, #0
 10398 0068 F8D1     		bne	.L522
2831:bluetooth_rxtx.c **** 
2832:bluetooth_rxtx.c **** 			/* Retune */
2833:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 10399              		.loc 1 2833 0 is_stmt 1
 10400 006a 924B     		ldr	r3, .L547+20
 10401 006c 1B88     		ldrh	r3, [r3]	@ movhi
 10402 006e 9BB2     		uxth	r3, r3
 10403 0070 013B     		subs	r3, r3, #1
 10404 0072 9BB2     		uxth	r3, r3
 10405 0074 0220     		movs	r0, #2
 10406 0076 1946     		mov	r1, r3
 10407 0078 FFF7FEFF 		bl	cc2400_set
2834:bluetooth_rxtx.c **** 
2835:bluetooth_rxtx.c **** 			/* Wait for lock */
2836:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 10408              		.loc 1 2836 0
 10409 007c 6120     		movs	r0, #97
 10410 007e FFF7FEFF 		bl	cc2400_strobe
2837:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 10411              		.loc 1 2837 0
 10412 0082 00BF     		nop
 10413              	.L523:
 10414              		.loc 1 2837 0 is_stmt 0 discriminator 1
 10415 0084 FFF7FEFF 		bl	cc2400_status
 10416 0088 0346     		mov	r3, r0
 10417 008a 03F00403 		and	r3, r3, #4
 10418 008e 002B     		cmp	r3, #0
 10419 0090 F8D0     		beq	.L523
2838:bluetooth_rxtx.c **** 
2839:bluetooth_rxtx.c **** 			/* RX mode */
2840:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 10420              		.loc 1 2840 0 is_stmt 1
 10421 0092 6220     		movs	r0, #98
 10422 0094 FFF7FEFF 		bl	cc2400_strobe
2841:bluetooth_rxtx.c **** 
2842:bluetooth_rxtx.c **** 			requested_channel = 0;
 10423              		.loc 1 2842 0
 10424 0098 854B     		ldr	r3, .L547+16
 10425 009a 0022     		movs	r2, #0
 10426 009c 1A80     		strh	r2, [r3]	@ movhi
 10427              	.L521:
2843:bluetooth_rxtx.c **** 		}
2844:bluetooth_rxtx.c **** 
2845:bluetooth_rxtx.c **** 		if (do_hop) {
 10428              		.loc 1 2845 0
 10429 009e 864B     		ldr	r3, .L547+24
 10430 00a0 1B78     		ldrb	r3, [r3]
 10431 00a2 DBB2     		uxtb	r3, r3
 10432 00a4 002B     		cmp	r3, #0
 10433 00a6 02D0     		beq	.L524
2846:bluetooth_rxtx.c **** 			hop();
 10434              		.loc 1 2846 0
 10435 00a8 FFF7FEFF 		bl	hop
 10436 00ac 03E0     		b	.L525
 10437              	.L524:
ARM GAS  /tmp/cctJTvh1.s 			page 233


2847:bluetooth_rxtx.c **** 		} else {
2848:bluetooth_rxtx.c **** 			TXLED_CLR;
 10438              		.loc 1 2848 0
 10439 00ae 7F4B     		ldr	r3, .L547+12
 10440 00b0 4FF48072 		mov	r2, #256
 10441 00b4 1A60     		str	r2, [r3]
 10442              	.L525:
2849:bluetooth_rxtx.c **** 		}
2850:bluetooth_rxtx.c **** 
2851:bluetooth_rxtx.c **** 		RXLED_CLR;
 10443              		.loc 1 2851 0
 10444 00b6 7D4B     		ldr	r3, .L547+12
 10445 00b8 1022     		movs	r2, #16
 10446 00ba 1A60     		str	r2, [r3]
2852:bluetooth_rxtx.c **** 
2853:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2854:bluetooth_rxtx.c **** 		rssi_reset();
 10447              		.loc 1 2854 0
 10448 00bc FFF7FEFF 		bl	rssi_reset
2855:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 10449              		.loc 1 2855 0
 10450 00c0 8023     		movs	r3, #128
 10451 00c2 BB74     		strb	r3, [r7, #18]
2856:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 10452              		.loc 1 2856 0
 10453 00c4 22E0     		b	.L526
 10454              	.L529:
2857:bluetooth_rxtx.c **** 		{
2858:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 10455              		.loc 1 2858 0
 10456 00c6 0620     		movs	r0, #6
 10457 00c8 FFF7FEFF 		bl	cc2400_get
 10458 00cc 0346     		mov	r3, r0
 10459 00ce 1B0A     		lsrs	r3, r3, #8
 10460 00d0 9BB2     		uxth	r3, r3
 10461 00d2 FB74     		strb	r3, [r7, #19]
2859:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 10462              		.loc 1 2859 0
 10463 00d4 794B     		ldr	r3, .L547+28
 10464 00d6 1B78     		ldrb	r3, [r3]
 10465 00d8 DBB2     		uxtb	r3, r3
 10466 00da 002B     		cmp	r3, #0
 10467 00dc 11D0     		beq	.L527
 10468              		.loc 1 2859 0 is_stmt 0 discriminator 1
 10469 00de 97F91230 		ldrsb	r3, [r7, #18]
 10470 00e2 13F1800F 		cmn	r3, #128
 10471 00e6 0CD1     		bne	.L527
2860:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 10472              		.loc 1 2860 0 is_stmt 1
 10473 00e8 754B     		ldr	r3, .L547+32
 10474 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10475 00ec 5BB2     		sxtb	r3, r3
 10476 00ee 03F13602 		add	r2, r3, #54
 10477 00f2 97F91330 		ldrsb	r3, [r7, #19]
 10478 00f6 9342     		cmp	r3, r2
 10479 00f8 B8BF     		it	lt
 10480 00fa 1346     		movlt	r3, r2
ARM GAS  /tmp/cctJTvh1.s 			page 234


 10481 00fc FB74     		strb	r3, [r7, #19]
2861:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 10482              		.loc 1 2861 0
 10483 00fe FB7C     		ldrb	r3, [r7, #19]
 10484 0100 BB74     		strb	r3, [r7, #18]
 10485              	.L527:
2862:bluetooth_rxtx.c **** 			}
2863:bluetooth_rxtx.c **** 			rssi_add(rssi);
 10486              		.loc 1 2863 0
 10487 0102 97F91330 		ldrsb	r3, [r7, #19]
 10488 0106 1846     		mov	r0, r3
 10489 0108 FFF7FEFF 		bl	rssi_add
 10490              	.L526:
2856:bluetooth_rxtx.c **** 		{
 10491              		.loc 1 2856 0
 10492 010c 6D4B     		ldr	r3, .L547+36
 10493 010e 1B68     		ldr	r3, [r3]
 10494 0110 002B     		cmp	r3, #0
 10495 0112 03D1     		bne	.L528
2856:bluetooth_rxtx.c **** 		{
 10496              		.loc 1 2856 0 is_stmt 0 discriminator 1
 10497 0114 6C4B     		ldr	r3, .L547+40
 10498 0116 1B68     		ldr	r3, [r3]
 10499 0118 002B     		cmp	r3, #0
 10500 011a D4D0     		beq	.L529
 10501              	.L528:
2864:bluetooth_rxtx.c **** 		}
2865:bluetooth_rxtx.c **** 
2866:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
2867:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 10502              		.loc 1 2867 0 is_stmt 1
 10503 011c 694B     		ldr	r3, .L547+36
 10504 011e 1B68     		ldr	r3, [r3]
 10505 0120 03F00103 		and	r3, r3, #1
 10506 0124 002B     		cmp	r3, #0
 10507 0126 09D0     		beq	.L530
2868:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 10508              		.loc 1 2868 0
 10509 0128 684B     		ldr	r3, .L547+44
 10510 012a 1B68     		ldr	r3, [r3]
 10511 012c FB60     		str	r3, [r7, #12]
2869:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 10512              		.loc 1 2869 0
 10513 012e 684B     		ldr	r3, .L547+48
 10514 0130 1B68     		ldr	r3, [r3]
 10515 0132 664A     		ldr	r2, .L547+44
 10516 0134 1360     		str	r3, [r2]
2870:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 10517              		.loc 1 2870 0
 10518 0136 664A     		ldr	r2, .L547+48
 10519 0138 FB68     		ldr	r3, [r7, #12]
 10520 013a 1360     		str	r3, [r2]
 10521              	.L530:
2871:bluetooth_rxtx.c **** 		}
2872:bluetooth_rxtx.c **** 
2873:bluetooth_rxtx.c **** 		if (rx_err) {
 10522              		.loc 1 2873 0
ARM GAS  /tmp/cctJTvh1.s 			page 235


 10523 013c 624B     		ldr	r3, .L547+40
 10524 013e 1B68     		ldr	r3, [r3]
 10525 0140 002B     		cmp	r3, #0
 10526 0142 07D0     		beq	.L531
2874:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 10527              		.loc 1 2874 0
 10528 0144 634B     		ldr	r3, .L547+52
 10529 0146 1B78     		ldrb	r3, [r3]
 10530 0148 DBB2     		uxtb	r3, r3
 10531 014a 43F00203 		orr	r3, r3, #2
 10532 014e DAB2     		uxtb	r2, r3
 10533 0150 604B     		ldr	r3, .L547+52
 10534 0152 1A70     		strb	r2, [r3]
 10535              	.L531:
2875:bluetooth_rxtx.c **** 		}
2876:bluetooth_rxtx.c **** 
2877:bluetooth_rxtx.c **** 		/* No DMA transfer? */
2878:bluetooth_rxtx.c **** 		if (!rx_tc)
 10536              		.loc 1 2878 0
 10537 0154 5B4B     		ldr	r3, .L547+36
 10538 0156 1B68     		ldr	r3, [r3]
 10539 0158 002B     		cmp	r3, #0
 10540 015a 00D1     		bne	.L532
2879:bluetooth_rxtx.c **** 			goto rx_continue;
 10541              		.loc 1 2879 0
 10542 015c 85E0     		b	.L533
 10543              	.L532:
2880:bluetooth_rxtx.c **** 
2881:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
2882:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 10544              		.loc 1 2882 0
 10545 015e 594B     		ldr	r3, .L547+36
 10546 0160 1B68     		ldr	r3, [r3]
 10547 0162 012B     		cmp	r3, #1
 10548 0164 07D9     		bls	.L534
2883:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 10549              		.loc 1 2883 0
 10550 0166 5B4B     		ldr	r3, .L547+52
 10551 0168 1B78     		ldrb	r3, [r3]
 10552 016a DBB2     		uxtb	r3, r3
 10553 016c 43F00103 		orr	r3, r3, #1
 10554 0170 DAB2     		uxtb	r2, r3
 10555 0172 584B     		ldr	r3, .L547+52
 10556 0174 1A70     		strb	r2, [r3]
 10557              	.L534:
2884:bluetooth_rxtx.c **** 
2885:bluetooth_rxtx.c **** 		rssi_iir_update();
 10558              		.loc 1 2885 0
 10559 0176 FFF7FEFF 		bl	rssi_iir_update
2886:bluetooth_rxtx.c **** 
2887:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
2888:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
2889:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
2890:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
2891:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 10560              		.loc 1 2891 0
 10561 017a 504B     		ldr	r3, .L547+28
ARM GAS  /tmp/cctJTvh1.s 			page 236


 10562 017c 1B78     		ldrb	r3, [r3]
 10563 017e DBB2     		uxtb	r3, r3
 10564 0180 002B     		cmp	r3, #0
 10565 0182 03D1     		bne	.L535
 10566              		.loc 1 2891 0 is_stmt 0 discriminator 1
 10567 0184 544B     		ldr	r3, .L547+56
 10568 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10569 0188 002B     		cmp	r3, #0
 10570 018a 0CD0     		beq	.L536
 10571              	.L535:
2892:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 10572              		.loc 1 2892 0 is_stmt 1
 10573 018c 514B     		ldr	r3, .L547+52
 10574 018e 1B78     		ldrb	r3, [r3]
 10575 0190 DBB2     		uxtb	r3, r3
 10576 0192 43F00803 		orr	r3, r3, #8
 10577 0196 DAB2     		uxtb	r2, r3
 10578 0198 4E4B     		ldr	r3, .L547+52
 10579 019a 1A70     		strb	r2, [r3]
2893:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 10580              		.loc 1 2893 0
 10581 019c 0223     		movs	r3, #2
 10582 019e FB77     		strb	r3, [r7, #31]
2894:bluetooth_rxtx.c **** 			cs_trigger = 0;
 10583              		.loc 1 2894 0
 10584 01a0 464B     		ldr	r3, .L547+28
 10585 01a2 0022     		movs	r2, #0
 10586 01a4 1A70     		strb	r2, [r3]
 10587              	.L536:
2895:bluetooth_rxtx.c **** 		}
2896:bluetooth_rxtx.c **** 
2897:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 10588              		.loc 1 2897 0
 10589 01a6 4D4B     		ldr	r3, .L547+60
 10590 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10591 01aa 5AB2     		sxtb	r2, r3
 10592 01ac 444B     		ldr	r3, .L547+32
 10593 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10594 01b0 5BB2     		sxtb	r3, r3
 10595 01b2 3633     		adds	r3, r3, #54
 10596 01b4 9A42     		cmp	r2, r3
 10597 01b6 09DB     		blt	.L537
2898:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 10598              		.loc 1 2898 0
 10599 01b8 464B     		ldr	r3, .L547+52
 10600 01ba 1B78     		ldrb	r3, [r3]
 10601 01bc DBB2     		uxtb	r3, r3
 10602 01be 43F01003 		orr	r3, r3, #16
 10603 01c2 DAB2     		uxtb	r2, r3
 10604 01c4 434B     		ldr	r3, .L547+52
 10605 01c6 1A70     		strb	r2, [r3]
2899:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 10606              		.loc 1 2899 0
 10607 01c8 0223     		movs	r3, #2
 10608 01ca FB77     		strb	r3, [r7, #31]
 10609              	.L537:
2900:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/cctJTvh1.s 			page 237


2901:bluetooth_rxtx.c **** 
2902:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
2903:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
2904:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 10610              		.loc 1 2904 0
 10611 01cc 444B     		ldr	r3, .L547+64
 10612 01ce 1B78     		ldrb	r3, [r3]
 10613 01d0 DBB2     		uxtb	r3, r3
 10614 01d2 002B     		cmp	r3, #0
 10615 01d4 07D0     		beq	.L538
2905:bluetooth_rxtx.c **** 			if (hold == 0)
 10616              		.loc 1 2905 0
 10617 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 10618 01d8 002B     		cmp	r3, #0
 10619 01da 01D1     		bne	.L539
2906:bluetooth_rxtx.c **** 				hold = 1;
 10620              		.loc 1 2906 0
 10621 01dc 0123     		movs	r3, #1
 10622 01de FB77     		strb	r3, [r7, #31]
 10623              	.L539:
2907:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 10624              		.loc 1 2907 0
 10625 01e0 3F4B     		ldr	r3, .L547+64
 10626 01e2 0022     		movs	r2, #0
 10627 01e4 1A70     		strb	r2, [r3]
 10628              	.L538:
2908:bluetooth_rxtx.c **** 		}
2909:bluetooth_rxtx.c **** 
2910:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
2911:bluetooth_rxtx.c **** 		if (hold == 0) {
 10629              		.loc 1 2911 0
 10630 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 10631 01e8 002B     		cmp	r3, #0
 10632 01ea 00D1     		bne	.L540
2912:bluetooth_rxtx.c **** 			goto rx_continue;
 10633              		.loc 1 2912 0
 10634 01ec 3DE0     		b	.L533
 10635              	.L540:
2913:bluetooth_rxtx.c **** 		}
2914:bluetooth_rxtx.c **** 		hold--;
 10636              		.loc 1 2914 0
 10637 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 10638 01f0 013B     		subs	r3, r3, #1
 10639 01f2 FB77     		strb	r3, [r7, #31]
2915:bluetooth_rxtx.c **** 
2916:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
2917:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 10640              		.loc 1 2917 0
 10641 01f4 3B48     		ldr	r0, .L547+68
 10642 01f6 3C49     		ldr	r1, .L547+72
 10643 01f8 4FF4C872 		mov	r2, #400
 10644 01fc FFF7FEFF 		bl	memcpy
2918:bluetooth_rxtx.c **** 
2919:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
2920:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 10645              		.loc 1 2920 0
 10646 0200 0023     		movs	r3, #0
ARM GAS  /tmp/cctJTvh1.s 			page 238


 10647 0202 BB61     		str	r3, [r7, #24]
 10648 0204 25E0     		b	.L541
 10649              	.L544:
2921:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
2922:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 10650              		.loc 1 2922 0
 10651 0206 0023     		movs	r3, #0
 10652 0208 7B61     		str	r3, [r7, #20]
 10653 020a 1CE0     		b	.L542
 10654              	.L543:
2923:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 10655              		.loc 1 2923 0 discriminator 3
 10656 020c BB69     		ldr	r3, [r7, #24]
 10657 020e 3233     		adds	r3, r3, #50
 10658 0210 DA00     		lsls	r2, r3, #3
 10659 0212 7B69     		ldr	r3, [r7, #20]
 10660 0214 1344     		add	r3, r3, r2
 10661 0216 2E4A     		ldr	r2, .L547+48
 10662 0218 1168     		ldr	r1, [r2]
 10663 021a BA69     		ldr	r2, [r7, #24]
 10664 021c 0A44     		add	r2, r2, r1
 10665 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 10666 0220 D209     		lsrs	r2, r2, #7
 10667 0222 D1B2     		uxtb	r1, r2
 10668 0224 2F4A     		ldr	r2, .L547+68
 10669 0226 D154     		strb	r1, [r2, r3]
2924:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 10670              		.loc 1 2924 0 discriminator 3
 10671 0228 294B     		ldr	r3, .L547+48
 10672 022a 1A68     		ldr	r2, [r3]
 10673 022c BB69     		ldr	r3, [r7, #24]
 10674 022e 1344     		add	r3, r3, r2
 10675 0230 274A     		ldr	r2, .L547+48
 10676 0232 1168     		ldr	r1, [r2]
 10677 0234 BA69     		ldr	r2, [r7, #24]
 10678 0236 0A44     		add	r2, r2, r1
 10679 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 10680 023a 5200     		lsls	r2, r2, #1
 10681 023c D2B2     		uxtb	r2, r2
 10682 023e 1A70     		strb	r2, [r3]
2922:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 10683              		.loc 1 2922 0 discriminator 3
 10684 0240 7B69     		ldr	r3, [r7, #20]
 10685 0242 0133     		adds	r3, r3, #1
 10686 0244 7B61     		str	r3, [r7, #20]
 10687              	.L542:
2922:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 10688              		.loc 1 2922 0 is_stmt 0 discriminator 1
 10689 0246 7B69     		ldr	r3, [r7, #20]
 10690 0248 072B     		cmp	r3, #7
 10691 024a DFDD     		ble	.L543
2920:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 10692              		.loc 1 2920 0 is_stmt 1 discriminator 2
 10693 024c BB69     		ldr	r3, [r7, #24]
 10694 024e 0133     		adds	r3, r3, #1
 10695 0250 BB61     		str	r3, [r7, #24]
 10696              	.L541:
ARM GAS  /tmp/cctJTvh1.s 			page 239


2920:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 10697              		.loc 1 2920 0 is_stmt 0 discriminator 1
 10698 0252 BB69     		ldr	r3, [r7, #24]
 10699 0254 312B     		cmp	r3, #49
 10700 0256 D6DD     		ble	.L544
2925:bluetooth_rxtx.c **** 			}
2926:bluetooth_rxtx.c **** 		}
2927:bluetooth_rxtx.c **** 
2928:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 10701              		.loc 1 2928 0 is_stmt 1
 10702 0258 244B     		ldr	r3, .L547+76
 10703 025a 1B68     		ldr	r3, [r3]
 10704 025c 2148     		ldr	r0, .L547+68
 10705 025e 9847     		blx	r3
 10706 0260 B860     		str	r0, [r7, #8]
2929:bluetooth_rxtx.c **** 		if (!ret) break;
 10707              		.loc 1 2929 0
 10708 0262 BB68     		ldr	r3, [r7, #8]
 10709 0264 002B     		cmp	r3, #0
 10710 0266 00D1     		bne	.L533
 10711 0268 0CE0     		b	.L545
 10712              	.L533:
2930:bluetooth_rxtx.c **** 
2931:bluetooth_rxtx.c **** 	rx_continue:
2932:bluetooth_rxtx.c **** 		rx_tc = 0;
 10713              		.loc 1 2932 0
 10714 026a 164B     		ldr	r3, .L547+36
 10715 026c 0022     		movs	r2, #0
 10716 026e 1A60     		str	r2, [r3]
2933:bluetooth_rxtx.c **** 		rx_err = 0;
 10717              		.loc 1 2933 0
 10718 0270 154B     		ldr	r3, .L547+40
 10719 0272 0022     		movs	r2, #0
 10720 0274 1A60     		str	r2, [r3]
 10721              	.L520:
 10722              	.LBE20:
2827:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 10723              		.loc 1 2827 0
 10724 0276 1E4B     		ldr	r3, .L547+80
 10725 0278 1B78     		ldrb	r3, [r3]
 10726 027a DBB2     		uxtb	r3, r3
 10727 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 10728 027e 9A42     		cmp	r2, r3
 10729 0280 3FF4E3AE 		beq	.L546
 10730              	.L545:
2934:bluetooth_rxtx.c **** 	}
2935:bluetooth_rxtx.c **** 
2936:bluetooth_rxtx.c **** 	// disable USB interrupts
2937:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 10731              		.loc 1 2937 0
 10732 0284 1B4B     		ldr	r3, .L547+84
 10733 0286 4FF08072 		mov	r2, #16777216
 10734 028a 1A60     		str	r2, [r3]
2938:bluetooth_rxtx.c **** 
2939:bluetooth_rxtx.c **** 	// reset the radio completely
2940:bluetooth_rxtx.c **** 	cc2400_idle();
 10735              		.loc 1 2940 0
ARM GAS  /tmp/cctJTvh1.s 			page 240


 10736 028c FFF7FEFF 		bl	cc2400_idle
2941:bluetooth_rxtx.c **** 	dio_ssp_stop();
 10737              		.loc 1 2941 0
 10738 0290 FFF7FEFF 		bl	dio_ssp_stop
2942:bluetooth_rxtx.c **** 	cs_trigger_disable();
 10739              		.loc 1 2942 0
 10740 0294 FFF7FEFF 		bl	cs_trigger_disable
2943:bluetooth_rxtx.c **** }
 10741              		.loc 1 2943 0
 10742 0298 2037     		adds	r7, r7, #32
 10743              		.cfi_def_cfa_offset 8
 10744 029a BD46     		mov	sp, r7
 10745              		.cfi_def_cfa_register 13
 10746              		@ sp needed
 10747 029c 80BD     		pop	{r7, pc}
 10748              	.L548:
 10749 029e 00BF     		.align	2
 10750              	.L547:
 10751 02a0 00000000 		.word	modulation
 10752 02a4 00000000 		.word	mode
 10753 02a8 00E100E0 		.word	-536813312
 10754 02ac 3CC00920 		.word	537509948
 10755 02b0 00000000 		.word	requested_channel
 10756 02b4 00000000 		.word	channel
 10757 02b8 00000000 		.word	do_hop
 10758 02bc 00000000 		.word	cs_trigger
 10759 02c0 00000000 		.word	cs_threshold_cur
 10760 02c4 00000000 		.word	rx_tc
 10761 02c8 00000000 		.word	rx_err
 10762 02cc 00000000 		.word	active_rxbuf
 10763 02d0 00000000 		.word	idle_rxbuf
 10764 02d4 00000000 		.word	status
 10765 02d8 00000000 		.word	cs_no_squelch
 10766 02dc 00000000 		.word	rssi_max
 10767 02e0 00000000 		.word	keepalive_trigger
 10768 02e4 00000000 		.word	unpacked
 10769 02e8 90010000 		.word	unpacked+400
 10770 02ec 00000000 		.word	data_cb
 10771 02f0 00000000 		.word	requested_mode
 10772 02f4 80E100E0 		.word	-536813184
 10773              		.cfi_endproc
 10774              	.LFE44:
 10776              		.section	.text.bt_le_sync,"ax",%progbits
 10777              		.align	2
 10778              		.global	bt_le_sync
 10779              		.thumb
 10780              		.thumb_func
 10782              	bt_le_sync:
 10783              	.LFB45:
2944:bluetooth_rxtx.c **** 
2945:bluetooth_rxtx.c **** 
2946:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
2947:bluetooth_rxtx.c **** {
 10784              		.loc 1 2947 0
 10785              		.cfi_startproc
 10786              		@ args = 0, pretend = 0, frame = 104
 10787              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cctJTvh1.s 			page 241


 10788 0000 90B5     		push	{r4, r7, lr}
 10789              		.cfi_def_cfa_offset 12
 10790              		.cfi_offset 4, -12
 10791              		.cfi_offset 7, -8
 10792              		.cfi_offset 14, -4
 10793 0002 9BB0     		sub	sp, sp, #108
 10794              		.cfi_def_cfa_offset 120
 10795 0004 00AF     		add	r7, sp, #0
 10796              		.cfi_def_cfa_register 7
 10797 0006 0346     		mov	r3, r0
 10798 0008 FB71     		strb	r3, [r7, #7]
2948:bluetooth_rxtx.c **** 	int i;
2949:bluetooth_rxtx.c **** 	int8_t rssi;
2950:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
2951:bluetooth_rxtx.c **** 
2952:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 10799              		.loc 1 2952 0
 10800 000a 874B     		ldr	r3, .L595
 10801 000c 0122     		movs	r2, #1
 10802 000e 1A70     		strb	r2, [r3]
2953:bluetooth_rxtx.c **** 	mode = active_mode;
 10803              		.loc 1 2953 0
 10804 0010 864A     		ldr	r2, .L595+4
 10805 0012 FB79     		ldrb	r3, [r7, #7]
 10806 0014 1370     		strb	r3, [r2]
2954:bluetooth_rxtx.c **** 
2955:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 10807              		.loc 1 2955 0
 10808 0016 864B     		ldr	r3, .L595+8
 10809 0018 0122     		movs	r2, #1
 10810 001a 1A75     		strb	r2, [r3, #20]
2956:bluetooth_rxtx.c **** 
2957:bluetooth_rxtx.c **** 	// enable USB interrupts
2958:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 10811              		.loc 1 2958 0
 10812 001c 854B     		ldr	r3, .L595+12
 10813 001e 4FF08072 		mov	r2, #16777216
 10814 0022 1A60     		str	r2, [r3]
2959:bluetooth_rxtx.c **** 
2960:bluetooth_rxtx.c **** 	RXLED_CLR;
 10815              		.loc 1 2960 0
 10816 0024 844B     		ldr	r3, .L595+16
 10817 0026 1022     		movs	r2, #16
 10818 0028 1A60     		str	r2, [r3]
2961:bluetooth_rxtx.c **** 
2962:bluetooth_rxtx.c **** 	queue_init();
 10819              		.loc 1 2962 0
 10820 002a FFF7FEFF 		bl	queue_init
2963:bluetooth_rxtx.c **** 	dio_ssp_init();
 10821              		.loc 1 2963 0
 10822 002e FFF7FEFF 		bl	dio_ssp_init
2964:bluetooth_rxtx.c **** 	dma_init_le();
 10823              		.loc 1 2964 0
 10824 0032 FFF7FEFF 		bl	dma_init_le
2965:bluetooth_rxtx.c **** 	dio_ssp_start();
 10825              		.loc 1 2965 0
 10826 0036 FFF7FEFF 		bl	dio_ssp_start
ARM GAS  /tmp/cctJTvh1.s 			page 242


2966:bluetooth_rxtx.c **** 
2967:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 10827              		.loc 1 2967 0
 10828 003a 7D4B     		ldr	r3, .L595+8
 10829 003c 1B68     		ldr	r3, [r3]
 10830 003e 1846     		mov	r0, r3
 10831 0040 FFF7FEFF 		bl	rbit
 10832 0044 0346     		mov	r3, r0
 10833 0046 1846     		mov	r0, r3
 10834 0048 FFF7FEFF 		bl	cc2400_rx_sync
2968:bluetooth_rxtx.c **** 
2969:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 10835              		.loc 1 2969 0
 10836 004c 47E2     		b	.L550
 10837              	.L594:
 10838              	.LBB21:
2970:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 10839              		.loc 1 2970 0
 10840 004e 7B4B     		ldr	r3, .L595+20
 10841 0050 1B88     		ldrh	r3, [r3]	@ movhi
 10842 0052 9BB2     		uxth	r3, r3
 10843 0054 002B     		cmp	r3, #0
 10844 0056 29D0     		beq	.L551
2971:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 10845              		.loc 1 2971 0
 10846 0058 6420     		movs	r0, #100
 10847 005a FFF7FEFF 		bl	cc2400_strobe
2972:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 10848              		.loc 1 2972 0
 10849 005e 00BF     		nop
 10850              	.L552:
 10851              		.loc 1 2972 0 is_stmt 0 discriminator 1
 10852 0060 FFF7FEFF 		bl	cc2400_status
 10853 0064 0346     		mov	r3, r0
 10854 0066 03F00403 		and	r3, r3, #4
 10855 006a 002B     		cmp	r3, #0
 10856 006c F8D1     		bne	.L552
2973:bluetooth_rxtx.c **** 
2974:bluetooth_rxtx.c **** 			/* Retune */
2975:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 10857              		.loc 1 2975 0 is_stmt 1
 10858 006e 744B     		ldr	r3, .L595+24
 10859 0070 1B88     		ldrh	r3, [r3]	@ movhi
 10860 0072 9BB2     		uxth	r3, r3
 10861 0074 013B     		subs	r3, r3, #1
 10862 0076 9BB2     		uxth	r3, r3
 10863 0078 0220     		movs	r0, #2
 10864 007a 1946     		mov	r1, r3
 10865 007c FFF7FEFF 		bl	cc2400_set
2976:bluetooth_rxtx.c **** 
2977:bluetooth_rxtx.c **** 			/* Wait for lock */
2978:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 10866              		.loc 1 2978 0
 10867 0080 6120     		movs	r0, #97
 10868 0082 FFF7FEFF 		bl	cc2400_strobe
2979:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 10869              		.loc 1 2979 0
ARM GAS  /tmp/cctJTvh1.s 			page 243


 10870 0086 00BF     		nop
 10871              	.L553:
 10872              		.loc 1 2979 0 is_stmt 0 discriminator 1
 10873 0088 FFF7FEFF 		bl	cc2400_status
 10874 008c 0346     		mov	r3, r0
 10875 008e 03F00403 		and	r3, r3, #4
 10876 0092 002B     		cmp	r3, #0
 10877 0094 F8D0     		beq	.L553
2980:bluetooth_rxtx.c **** 
2981:bluetooth_rxtx.c **** 			/* RX mode */
2982:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 10878              		.loc 1 2982 0 is_stmt 1
 10879 0096 6220     		movs	r0, #98
 10880 0098 FFF7FEFF 		bl	cc2400_strobe
2983:bluetooth_rxtx.c **** 
2984:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 10881              		.loc 1 2984 0
 10882 009c 674B     		ldr	r3, .L595+20
 10883 009e 1B88     		ldrh	r3, [r3]	@ movhi
 10884 00a0 9AB2     		uxth	r2, r3
 10885 00a2 684B     		ldr	r3, .L595+28
 10886 00a4 1A80     		strh	r2, [r3]	@ movhi
2985:bluetooth_rxtx.c **** 			requested_channel = 0;
 10887              		.loc 1 2985 0
 10888 00a6 654B     		ldr	r3, .L595+20
 10889 00a8 0022     		movs	r2, #0
 10890 00aa 1A80     		strh	r2, [r3]	@ movhi
 10891              	.L551:
2986:bluetooth_rxtx.c **** 		}
2987:bluetooth_rxtx.c **** 
2988:bluetooth_rxtx.c **** 		RXLED_CLR;
 10892              		.loc 1 2988 0
 10893 00ac 624B     		ldr	r3, .L595+16
 10894 00ae 1022     		movs	r2, #16
 10895 00b0 1A60     		str	r2, [r3]
2989:bluetooth_rxtx.c **** 
2990:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2991:bluetooth_rxtx.c **** 		rssi_reset();
 10896              		.loc 1 2991 0
 10897 00b2 FFF7FEFF 		bl	rssi_reset
2992:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 10898              		.loc 1 2992 0
 10899 00b6 00BF     		nop
 10900              	.L555:
 10901              		.loc 1 2992 0 is_stmt 0 discriminator 4
 10902 00b8 634B     		ldr	r3, .L595+32
 10903 00ba 1B68     		ldr	r3, [r3]
 10904 00bc 002B     		cmp	r3, #0
 10905 00be 0ED1     		bne	.L554
 10906              		.loc 1 2992 0 discriminator 1
 10907 00c0 624B     		ldr	r3, .L595+36
 10908 00c2 1B68     		ldr	r3, [r3]
 10909 00c4 002B     		cmp	r3, #0
 10910 00c6 0AD1     		bne	.L554
 10911              		.loc 1 2992 0 discriminator 2
 10912 00c8 614B     		ldr	r3, .L595+40
 10913 00ca 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 244


 10914 00cc DBB2     		uxtb	r3, r3
 10915 00ce 002B     		cmp	r3, #0
 10916 00d0 05D1     		bne	.L554
 10917              		.loc 1 2992 0 discriminator 3
 10918 00d2 604B     		ldr	r3, .L595+44
 10919 00d4 1B78     		ldrb	r3, [r3]
 10920 00d6 DBB2     		uxtb	r3, r3
 10921 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 10922 00da 9A42     		cmp	r2, r3
 10923 00dc ECD0     		beq	.L555
 10924              	.L554:
2993:bluetooth_rxtx.c **** 			;
2994:bluetooth_rxtx.c **** 
2995:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 10925              		.loc 1 2995 0 is_stmt 1
 10926 00de 5D4B     		ldr	r3, .L595+44
 10927 00e0 1B78     		ldrb	r3, [r3]
 10928 00e2 DBB2     		uxtb	r3, r3
 10929 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 10930 00e6 9A42     		cmp	r2, r3
 10931 00e8 00D0     		beq	.L556
2996:bluetooth_rxtx.c **** 			goto cleanup;
 10932              		.loc 1 2996 0
 10933 00ea FFE1     		b	.L593
 10934              	.L556:
2997:bluetooth_rxtx.c **** 		}
2998:bluetooth_rxtx.c **** 
2999:bluetooth_rxtx.c **** 		if (rx_err) {
 10935              		.loc 1 2999 0
 10936 00ec 574B     		ldr	r3, .L595+36
 10937 00ee 1B68     		ldr	r3, [r3]
 10938 00f0 002B     		cmp	r3, #0
 10939 00f2 07D0     		beq	.L558
3000:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 10940              		.loc 1 3000 0
 10941 00f4 584B     		ldr	r3, .L595+48
 10942 00f6 1B78     		ldrb	r3, [r3]
 10943 00f8 DBB2     		uxtb	r3, r3
 10944 00fa 43F00203 		orr	r3, r3, #2
 10945 00fe DAB2     		uxtb	r2, r3
 10946 0100 554B     		ldr	r3, .L595+48
 10947 0102 1A70     		strb	r2, [r3]
 10948              	.L558:
3001:bluetooth_rxtx.c **** 		}
3002:bluetooth_rxtx.c **** 
3003:bluetooth_rxtx.c **** 		if (do_hop)
 10949              		.loc 1 3003 0
 10950 0104 524B     		ldr	r3, .L595+40
 10951 0106 1B78     		ldrb	r3, [r3]
 10952 0108 DBB2     		uxtb	r3, r3
 10953 010a 002B     		cmp	r3, #0
 10954 010c 00D0     		beq	.L559
3004:bluetooth_rxtx.c **** 			goto rx_flush;
 10955              		.loc 1 3004 0
 10956 010e 2BE1     		b	.L560
 10957              	.L559:
3005:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 245


3006:bluetooth_rxtx.c **** 		/* No DMA transfer? */
3007:bluetooth_rxtx.c **** 		if (!rx_tc)
 10958              		.loc 1 3007 0
 10959 0110 4D4B     		ldr	r3, .L595+32
 10960 0112 1B68     		ldr	r3, [r3]
 10961 0114 002B     		cmp	r3, #0
 10962 0116 00D1     		bne	.L561
 10963 0118 E1E1     		b	.L550
 10964              	.L561:
3008:bluetooth_rxtx.c **** 			continue;
3009:bluetooth_rxtx.c **** 
3010:bluetooth_rxtx.c **** 		/////////////////////
3011:bluetooth_rxtx.c **** 		// process the packet
3012:bluetooth_rxtx.c **** 
3013:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
3014:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 10965              		.loc 1 3014 0
 10966 011a 07F10803 		add	r3, r7, #8
 10967 011e FB65     		str	r3, [r7, #92]
3015:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 10968              		.loc 1 3015 0
 10969 0120 434B     		ldr	r3, .L595+8
 10970 0122 1B68     		ldr	r3, [r3]
 10971 0124 BB60     		str	r3, [r7, #8]
3016:bluetooth_rxtx.c **** 
3017:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 10972              		.loc 1 3017 0
 10973 0126 464B     		ldr	r3, .L595+24
 10974 0128 1B88     		ldrh	r3, [r3]	@ movhi
 10975 012a 9BB2     		uxth	r3, r3
 10976 012c DBB2     		uxtb	r3, r3
 10977 012e 623B     		subs	r3, r3, #98
 10978 0130 DBB2     		uxtb	r3, r3
 10979 0132 1846     		mov	r0, r3
 10980 0134 FFF7FEFF 		bl	btle_channel_index
 10981 0138 0346     		mov	r3, r0
 10982 013a 1A46     		mov	r2, r3
 10983 013c 1346     		mov	r3, r2
 10984 013e 5B00     		lsls	r3, r3, #1
 10985 0140 1344     		add	r3, r3, r2
 10986 0142 1B01     		lsls	r3, r3, #4
 10987 0144 454A     		ldr	r2, .L595+52
 10988 0146 1344     		add	r3, r3, r2
 10989 0148 BB65     		str	r3, [r7, #88]
3018:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 10990              		.loc 1 3018 0
 10991 014a 0023     		movs	r3, #0
 10992 014c 7B66     		str	r3, [r7, #100]
 10993 014e 34E0     		b	.L562
 10994              	.L565:
 10995              	.LBB22:
3019:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 10996              		.loc 1 3019 0 discriminator 3
 10997 0150 434A     		ldr	r2, .L595+56
 10998 0152 7B6E     		ldr	r3, [r7, #100]
 10999 0154 1344     		add	r3, r3, r2
 11000 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cctJTvh1.s 			page 246


 11001 0158 1A06     		lsls	r2, r3, #24
3020:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 11002              		.loc 1 3020 0 discriminator 3
 11003 015a 7B6E     		ldr	r3, [r7, #100]
 11004 015c 0133     		adds	r3, r3, #1
 11005 015e 4049     		ldr	r1, .L595+56
 11006 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 11007 0162 1B04     		lsls	r3, r3, #16
 11008 0164 1A43     		orrs	r2, r2, r3
3021:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 11009              		.loc 1 3021 0 discriminator 3
 11010 0166 7B6E     		ldr	r3, [r7, #100]
 11011 0168 0233     		adds	r3, r3, #2
 11012 016a 3D49     		ldr	r1, .L595+56
 11013 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 11014 016e 1B02     		lsls	r3, r3, #8
 11015 0170 1343     		orrs	r3, r3, r2
3022:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 11016              		.loc 1 3022 0 discriminator 3
 11017 0172 7A6E     		ldr	r2, [r7, #100]
 11018 0174 0332     		adds	r2, r2, #3
 11019 0176 3A49     		ldr	r1, .L595+56
 11020 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 11021 017a 1343     		orrs	r3, r3, r2
3019:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 11022              		.loc 1 3019 0 discriminator 3
 11023 017c 7B65     		str	r3, [r7, #84]
3023:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 11024              		.loc 1 3023 0 discriminator 3
 11025 017e 7B6E     		ldr	r3, [r7, #100]
 11026 0180 002B     		cmp	r3, #0
 11027 0182 00DA     		bge	.L563
 11028 0184 0333     		adds	r3, r3, #3
 11029              	.L563:
 11030 0186 9B10     		asrs	r3, r3, #2
 11031 0188 5C1C     		adds	r4, r3, #1
 11032 018a 786D     		ldr	r0, [r7, #84]
 11033 018c FFF7FEFF 		bl	rbit
 11034 0190 0146     		mov	r1, r0
 11035 0192 7B6E     		ldr	r3, [r7, #100]
 11036 0194 002B     		cmp	r3, #0
 11037 0196 00DA     		bge	.L564
 11038 0198 0333     		adds	r3, r3, #3
 11039              	.L564:
 11040 019a 9B10     		asrs	r3, r3, #2
 11041 019c 9B00     		lsls	r3, r3, #2
 11042 019e BA6D     		ldr	r2, [r7, #88]
 11043 01a0 1344     		add	r3, r3, r2
 11044 01a2 1B68     		ldr	r3, [r3]
 11045 01a4 81EA0302 		eor	r2, r1, r3
 11046 01a8 A300     		lsls	r3, r4, #2
 11047 01aa 07F16801 		add	r1, r7, #104
 11048 01ae 0B44     		add	r3, r3, r1
 11049 01b0 43F8602C 		str	r2, [r3, #-96]
 11050              	.LBE22:
3018:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 11051              		.loc 1 3018 0 discriminator 3
ARM GAS  /tmp/cctJTvh1.s 			page 247


 11052 01b4 7B6E     		ldr	r3, [r7, #100]
 11053 01b6 0433     		adds	r3, r3, #4
 11054 01b8 7B66     		str	r3, [r7, #100]
 11055              	.L562:
3018:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 11056              		.loc 1 3018 0 is_stmt 0 discriminator 1
 11057 01ba 7B6E     		ldr	r3, [r7, #100]
 11058 01bc 032B     		cmp	r3, #3
 11059 01be C7DD     		ble	.L565
3024:bluetooth_rxtx.c **** 		}
3025:bluetooth_rxtx.c **** 
3026:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 11060              		.loc 1 3026 0 is_stmt 1
 11061 01c0 FB6D     		ldr	r3, [r7, #92]
 11062 01c2 0533     		adds	r3, r3, #5
 11063 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11064 01c6 03F03F03 		and	r3, r3, #63
 11065 01ca 0233     		adds	r3, r3, #2
 11066 01cc 3B65     		str	r3, [r7, #80]
3027:bluetooth_rxtx.c **** 		if (len > 39)
 11067              		.loc 1 3027 0
 11068 01ce 3B6D     		ldr	r3, [r7, #80]
 11069 01d0 272B     		cmp	r3, #39
 11070 01d2 00D9     		bls	.L566
3028:bluetooth_rxtx.c **** 			goto rx_flush;
 11071              		.loc 1 3028 0
 11072 01d4 C8E0     		b	.L560
 11073              	.L566:
3029:bluetooth_rxtx.c **** 
3030:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
3031:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
3032:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 11074              		.loc 1 3032 0
 11075 01d6 3B6D     		ldr	r3, [r7, #80]
 11076 01d8 0633     		adds	r3, r3, #6
 11077 01da 9B08     		lsrs	r3, r3, #2
 11078 01dc FB64     		str	r3, [r7, #76]
3033:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 11079              		.loc 1 3033 0
 11080 01de FB6C     		ldr	r3, [r7, #76]
 11081 01e0 0A2B     		cmp	r3, #10
 11082 01e2 0DD8     		bhi	.L567
3034:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 11083              		.loc 1 3034 0
 11084 01e4 00BF     		nop
 11085              	.L569:
 11086              		.loc 1 3034 0 is_stmt 0 discriminator 2
 11087 01e6 1F4B     		ldr	r3, .L595+60
 11088 01e8 1A68     		ldr	r2, [r3]
 11089 01ea FB6C     		ldr	r3, [r7, #76]
 11090 01ec 9B00     		lsls	r3, r3, #2
 11091 01ee 1C49     		ldr	r1, .L595+56
 11092 01f0 0B44     		add	r3, r3, r1
 11093 01f2 9A42     		cmp	r2, r3
 11094 01f4 0FD2     		bcs	.L568
 11095              		.loc 1 3034 0 discriminator 1
 11096 01f6 154B     		ldr	r3, .L595+36
ARM GAS  /tmp/cctJTvh1.s 			page 248


 11097 01f8 1B68     		ldr	r3, [r3]
 11098 01fa 002B     		cmp	r3, #0
 11099 01fc F3D0     		beq	.L569
 11100 01fe 0AE0     		b	.L568
 11101              	.L567:
3035:bluetooth_rxtx.c **** 				;
3036:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
3037:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 11102              		.loc 1 3037 0 is_stmt 1
 11103 0200 00BF     		nop
 11104              	.L570:
 11105              		.loc 1 3037 0 is_stmt 0 discriminator 2
 11106 0202 194B     		ldr	r3, .L595+64
 11107 0204 1B68     		ldr	r3, [r3]
 11108 0206 03F00103 		and	r3, r3, #1
 11109 020a 002B     		cmp	r3, #0
 11110 020c 03D0     		beq	.L568
 11111              		.loc 1 3037 0 discriminator 1
 11112 020e 0F4B     		ldr	r3, .L595+36
 11113 0210 1B68     		ldr	r3, [r3]
 11114 0212 002B     		cmp	r3, #0
 11115 0214 F5D0     		beq	.L570
 11116              	.L568:
3038:bluetooth_rxtx.c **** 				;
3039:bluetooth_rxtx.c **** 		}
3040:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 11117              		.loc 1 3040 0 is_stmt 1
 11118 0216 154A     		ldr	r2, .L595+68
 11119 0218 144B     		ldr	r3, .L595+68
 11120 021a 1B68     		ldr	r3, [r3]
 11121 021c 23F00103 		bic	r3, r3, #1
 11122 0220 1360     		str	r3, [r2]
3041:bluetooth_rxtx.c **** 
3042:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
3043:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 11123              		.loc 1 3043 0
 11124 0222 0423     		movs	r3, #4
 11125 0224 7B66     		str	r3, [r7, #100]
 11126 0226 58E0     		b	.L571
 11127              	.L596:
 11128              		.align	2
 11129              	.L595:
 11130 0228 00000000 		.word	modulation
 11131 022c 00000000 		.word	mode
 11132 0230 00000000 		.word	le
 11133 0234 00E100E0 		.word	-536813312
 11134 0238 3CC00920 		.word	537509948
 11135 023c 00000000 		.word	requested_channel
 11136 0240 00000000 		.word	channel
 11137 0244 00000000 		.word	saved_request
 11138 0248 00000000 		.word	rx_tc
 11139 024c 00000000 		.word	rx_err
 11140 0250 00000000 		.word	do_hop
 11141 0254 00000000 		.word	requested_mode
 11142 0258 00000000 		.word	status
 11143 025c 10010000 		.word	whitening_word
 11144 0260 00000000 		.word	rxbuf1
ARM GAS  /tmp/cctJTvh1.s 			page 249


 11145 0264 04410050 		.word	1342193924
 11146 0268 10410050 		.word	1342193936
 11147 026c 24000340 		.word	1073938468
 11148              	.L574:
 11149              	.LBB23:
3044:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 11150              		.loc 1 3044 0 discriminator 3
 11151 0270 A54A     		ldr	r2, .L597
 11152 0272 7B6E     		ldr	r3, [r7, #100]
 11153 0274 1344     		add	r3, r3, r2
 11154 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11155 0278 1A06     		lsls	r2, r3, #24
3045:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 11156              		.loc 1 3045 0 discriminator 3
 11157 027a 7B6E     		ldr	r3, [r7, #100]
 11158 027c 0133     		adds	r3, r3, #1
 11159 027e A249     		ldr	r1, .L597
 11160 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 11161 0282 1B04     		lsls	r3, r3, #16
 11162 0284 1A43     		orrs	r2, r2, r3
3046:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 11163              		.loc 1 3046 0 discriminator 3
 11164 0286 7B6E     		ldr	r3, [r7, #100]
 11165 0288 0233     		adds	r3, r3, #2
 11166 028a 9F49     		ldr	r1, .L597
 11167 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 11168 028e 1B02     		lsls	r3, r3, #8
 11169 0290 1343     		orrs	r3, r3, r2
3047:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 11170              		.loc 1 3047 0 discriminator 3
 11171 0292 7A6E     		ldr	r2, [r7, #100]
 11172 0294 0332     		adds	r2, r2, #3
 11173 0296 9C49     		ldr	r1, .L597
 11174 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 11175 029a 1343     		orrs	r3, r3, r2
3044:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 11176              		.loc 1 3044 0 discriminator 3
 11177 029c BB64     		str	r3, [r7, #72]
3048:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 11178              		.loc 1 3048 0 discriminator 3
 11179 029e 7B6E     		ldr	r3, [r7, #100]
 11180 02a0 002B     		cmp	r3, #0
 11181 02a2 00DA     		bge	.L572
 11182 02a4 0333     		adds	r3, r3, #3
 11183              	.L572:
 11184 02a6 9B10     		asrs	r3, r3, #2
 11185 02a8 5C1C     		adds	r4, r3, #1
 11186 02aa B86C     		ldr	r0, [r7, #72]
 11187 02ac FFF7FEFF 		bl	rbit
 11188 02b0 0146     		mov	r1, r0
 11189 02b2 7B6E     		ldr	r3, [r7, #100]
 11190 02b4 002B     		cmp	r3, #0
 11191 02b6 00DA     		bge	.L573
 11192 02b8 0333     		adds	r3, r3, #3
 11193              	.L573:
 11194 02ba 9B10     		asrs	r3, r3, #2
 11195 02bc 9B00     		lsls	r3, r3, #2
ARM GAS  /tmp/cctJTvh1.s 			page 250


 11196 02be BA6D     		ldr	r2, [r7, #88]
 11197 02c0 1344     		add	r3, r3, r2
 11198 02c2 1B68     		ldr	r3, [r3]
 11199 02c4 81EA0302 		eor	r2, r1, r3
 11200 02c8 A300     		lsls	r3, r4, #2
 11201 02ca 07F16801 		add	r1, r7, #104
 11202 02ce 0B44     		add	r3, r3, r1
 11203 02d0 43F8602C 		str	r2, [r3, #-96]
 11204              	.LBE23:
3043:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 11205              		.loc 1 3043 0 discriminator 3
 11206 02d4 7B6E     		ldr	r3, [r7, #100]
 11207 02d6 0433     		adds	r3, r3, #4
 11208 02d8 7B66     		str	r3, [r7, #100]
 11209              	.L571:
3043:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 11210              		.loc 1 3043 0 is_stmt 0 discriminator 1
 11211 02da 7B6E     		ldr	r3, [r7, #100]
 11212 02dc 2B2B     		cmp	r3, #43
 11213 02de C7DD     		ble	.L574
3049:bluetooth_rxtx.c **** 		}
3050:bluetooth_rxtx.c **** 
3051:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 11214              		.loc 1 3051 0 is_stmt 1
 11215 02e0 8A4B     		ldr	r3, .L597+4
 11216 02e2 1B69     		ldr	r3, [r3, #16]
 11217 02e4 002B     		cmp	r3, #0
 11218 02e6 23D0     		beq	.L575
 11219              	.LBB24:
3052:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 11220              		.loc 1 3052 0
 11221 02e8 884B     		ldr	r3, .L597+4
 11222 02ea D968     		ldr	r1, [r3, #12]
 11223 02ec FB6D     		ldr	r3, [r7, #92]
 11224 02ee 1A1D     		adds	r2, r3, #4
 11225 02f0 3B6D     		ldr	r3, [r7, #80]
 11226 02f2 0846     		mov	r0, r1
 11227 02f4 1146     		mov	r1, r2
 11228 02f6 1A46     		mov	r2, r3
 11229 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 11230 02fc 7864     		str	r0, [r7, #68]
3053:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 11231              		.loc 1 3053 0
 11232 02fe 3B6D     		ldr	r3, [r7, #80]
 11233 0300 0633     		adds	r3, r3, #6
 11234 0302 FA6D     		ldr	r2, [r7, #92]
 11235 0304 1344     		add	r3, r3, r2
 11236 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11237 0308 1A04     		lsls	r2, r3, #16
3054:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 11238              		.loc 1 3054 0
 11239 030a 3B6D     		ldr	r3, [r7, #80]
 11240 030c 0533     		adds	r3, r3, #5
 11241 030e F96D     		ldr	r1, [r7, #92]
 11242 0310 0B44     		add	r3, r3, r1
 11243 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11244 0314 1B02     		lsls	r3, r3, #8
ARM GAS  /tmp/cctJTvh1.s 			page 251


 11245 0316 1343     		orrs	r3, r3, r2
3055:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 11246              		.loc 1 3055 0
 11247 0318 3A6D     		ldr	r2, [r7, #80]
 11248 031a 0432     		adds	r2, r2, #4
 11249 031c F96D     		ldr	r1, [r7, #92]
 11250 031e 0A44     		add	r2, r2, r1
 11251 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 11252 0322 1343     		orrs	r3, r3, r2
3053:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 11253              		.loc 1 3053 0
 11254 0324 3B64     		str	r3, [r7, #64]
3056:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 11255              		.loc 1 3056 0
 11256 0326 7A6C     		ldr	r2, [r7, #68]
 11257 0328 3B6C     		ldr	r3, [r7, #64]
 11258 032a 9A42     		cmp	r2, r3
 11259 032c 00D0     		beq	.L575
3057:bluetooth_rxtx.c **** 				goto rx_flush;
 11260              		.loc 1 3057 0
 11261 032e 1BE0     		b	.L560
 11262              	.L575:
 11263              	.LBE24:
3058:bluetooth_rxtx.c **** 		}
3059:bluetooth_rxtx.c **** 
3060:bluetooth_rxtx.c **** 
3061:bluetooth_rxtx.c **** 		RXLED_SET;
 11264              		.loc 1 3061 0
 11265 0330 774B     		ldr	r3, .L597+8
 11266 0332 1022     		movs	r2, #16
 11267 0334 1A60     		str	r2, [r3]
3062:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 11268              		.loc 1 3062 0
 11269 0336 774B     		ldr	r3, .L597+12
 11270 0338 1B68     		ldr	r3, [r3]
 11271 033a 07F10802 		add	r2, r7, #8
 11272 033e 1046     		mov	r0, r2
 11273 0340 9847     		blx	r3
3063:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 11274              		.loc 1 3063 0
 11275 0342 07F10803 		add	r3, r7, #8
 11276 0346 0120     		movs	r0, #1
 11277 0348 1946     		mov	r1, r3
 11278 034a FFF7FEFF 		bl	enqueue
3064:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 11279              		.loc 1 3064 0
 11280 034e 724B     		ldr	r3, .L597+16
 11281 0350 1B68     		ldr	r3, [r3]
 11282 0352 C3F31303 		ubfx	r3, r3, #0, #20
 11283 0356 40F63542 		movw	r2, #3125
 11284 035a 02FB03F2 		mul	r2, r2, r3
 11285 035e 6F4B     		ldr	r3, .L597+20
 11286 0360 1B68     		ldr	r3, [r3]
 11287 0362 1344     		add	r3, r3, r2
 11288 0364 694A     		ldr	r2, .L597+4
 11289 0366 1364     		str	r3, [r2, #64]
 11290              	.L560:
ARM GAS  /tmp/cctJTvh1.s 			page 252


3065:bluetooth_rxtx.c **** 
3066:bluetooth_rxtx.c **** 	rx_flush:
3067:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 11291              		.loc 1 3067 0
 11292 0368 6120     		movs	r0, #97
 11293 036a FFF7FEFF 		bl	cc2400_strobe
3068:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 11294              		.loc 1 3068 0
 11295 036e 00BF     		nop
 11296              	.L576:
 11297              		.loc 1 3068 0 is_stmt 0 discriminator 1
 11298 0370 FFF7FEFF 		bl	cc2400_status
 11299 0374 0346     		mov	r3, r0
 11300 0376 03F00403 		and	r3, r3, #4
 11301 037a 002B     		cmp	r3, #0
 11302 037c F8D0     		beq	.L576
3069:bluetooth_rxtx.c **** 
3070:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
3071:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 11303              		.loc 1 3071 0 is_stmt 1
 11304 037e 684A     		ldr	r2, .L597+24
 11305 0380 674B     		ldr	r3, .L597+24
 11306 0382 1B68     		ldr	r3, [r3]
 11307 0384 23F00103 		bic	r3, r3, #1
 11308 0388 1360     		str	r3, [r2]
3072:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 11309              		.loc 1 3072 0
 11310 038a 03E0     		b	.L577
 11311              	.L578:
 11312              	.LBB25:
3073:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 11313              		.loc 1 3073 0
 11314 038c 654B     		ldr	r3, .L597+28
 11315 038e 1B68     		ldr	r3, [r3]
 11316 0390 87F83F30 		strb	r3, [r7, #63]
 11317              	.L577:
 11318              	.LBE25:
3072:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 11319              		.loc 1 3072 0
 11320 0394 644B     		ldr	r3, .L597+32
 11321 0396 1B68     		ldr	r3, [r3]
 11322 0398 03F00403 		and	r3, r3, #4
 11323 039c 002B     		cmp	r3, #0
 11324 039e F5D1     		bne	.L578
3074:bluetooth_rxtx.c **** 		}
3075:bluetooth_rxtx.c **** 
3076:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
3077:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 11325              		.loc 1 3077 0
 11326 03a0 5D4B     		ldr	r3, .L597+16
 11327 03a2 1B68     		ldr	r3, [r3]
 11328 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 11329 03a8 40F63542 		movw	r2, #3125
 11330 03ac 02FB03F2 		mul	r2, r2, r3
 11331 03b0 5A4B     		ldr	r3, .L597+20
 11332 03b2 1B68     		ldr	r3, [r3]
 11333 03b4 1344     		add	r3, r3, r2
ARM GAS  /tmp/cctJTvh1.s 			page 253


 11334 03b6 3B66     		str	r3, [r7, #96]
3078:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 11335              		.loc 1 3078 0
 11336 03b8 544B     		ldr	r3, .L597+4
 11337 03ba 1A6C     		ldr	r2, [r3, #64]
 11338 03bc 3B6E     		ldr	r3, [r7, #96]
 11339 03be 9A42     		cmp	r2, r3
 11340 03c0 05D9     		bls	.L579
3079:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 11341              		.loc 1 3079 0
 11342 03c2 3B6E     		ldr	r3, [r7, #96]
 11343 03c4 03F14343 		add	r3, r3, #-1023410176
 11344 03c8 03F5A003 		add	r3, r3, #5242880
 11345 03cc 3B66     		str	r3, [r7, #96]
 11346              	.L579:
3080:bluetooth_rxtx.c **** 		if  ( // timeout
3081:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 11347              		.loc 1 3081 0
 11348 03ce 4F4B     		ldr	r3, .L597+4
 11349 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
3080:bluetooth_rxtx.c **** 		if  ( // timeout
 11350              		.loc 1 3080 0
 11351 03d2 032B     		cmp	r3, #3
 11352 03d4 03D0     		beq	.L580
 11353              		.loc 1 3081 0
 11354 03d6 4D4B     		ldr	r3, .L597+4
 11355 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 11356 03da 022B     		cmp	r3, #2
 11357 03dc 06D1     		bne	.L581
 11358              	.L580:
3082:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 11359              		.loc 1 3082 0
 11360 03de 4B4B     		ldr	r3, .L597+4
 11361 03e0 1B6C     		ldr	r3, [r3, #64]
 11362 03e2 3A6E     		ldr	r2, [r7, #96]
 11363 03e4 D31A     		subs	r3, r2, r3
 11364 03e6 514A     		ldr	r2, .L597+36
 11365 03e8 9342     		cmp	r3, r2
 11366 03ea 03D8     		bhi	.L582
 11367              	.L581:
3083:bluetooth_rxtx.c **** 			// jam finished
3084:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 11368              		.loc 1 3084 0
 11369 03ec 504B     		ldr	r3, .L597+40
 11370 03ee 1B68     		ldr	r3, [r3]
 11371 03f0 012B     		cmp	r3, #1
 11372 03f2 37D1     		bne	.L583
 11373              	.L582:
3085:bluetooth_rxtx.c **** 			)
3086:bluetooth_rxtx.c **** 		{
3087:bluetooth_rxtx.c **** 			reset_le();
 11374              		.loc 1 3087 0
 11375 03f4 FFF7FEFF 		bl	reset_le
3088:bluetooth_rxtx.c **** 			le_jam_count = 0;
 11376              		.loc 1 3088 0
 11377 03f8 4D4B     		ldr	r3, .L597+40
 11378 03fa 0022     		movs	r2, #0
ARM GAS  /tmp/cctJTvh1.s 			page 254


 11379 03fc 1A60     		str	r2, [r3]
3089:bluetooth_rxtx.c **** 			TXLED_CLR;
 11380              		.loc 1 3089 0
 11381 03fe 4D4B     		ldr	r3, .L597+44
 11382 0400 4FF48072 		mov	r2, #256
 11383 0404 1A60     		str	r2, [r3]
3090:bluetooth_rxtx.c **** 
3091:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 11384              		.loc 1 3091 0
 11385 0406 4C4B     		ldr	r3, .L597+48
 11386 0408 1B78     		ldrb	r3, [r3]
 11387 040a DBB2     		uxtb	r3, r3
 11388 040c 012B     		cmp	r3, #1
 11389 040e 06D1     		bne	.L584
3092:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 11390              		.loc 1 3092 0
 11391 0410 494B     		ldr	r3, .L597+48
 11392 0412 0022     		movs	r2, #0
 11393 0414 1A70     		strb	r2, [r3]
3093:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 11394              		.loc 1 3093 0
 11395 0416 494B     		ldr	r3, .L597+52
 11396 0418 0022     		movs	r2, #0
 11397 041a 1A70     		strb	r2, [r3]
3094:bluetooth_rxtx.c **** 				goto cleanup;
 11398              		.loc 1 3094 0
 11399 041c 66E0     		b	.L593
 11400              	.L584:
3095:bluetooth_rxtx.c **** 			}
3096:bluetooth_rxtx.c **** 
3097:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
3098:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 11401              		.loc 1 3098 0
 11402 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 11403 0420 0A2B     		cmp	r3, #10
 11404 0422 01D1     		bne	.L585
3099:bluetooth_rxtx.c **** 				goto cleanup;
 11405              		.loc 1 3099 0
 11406 0424 00BF     		nop
 11407 0426 61E0     		b	.L593
 11408              	.L585:
3100:bluetooth_rxtx.c **** 
3101:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 11409              		.loc 1 3101 0
 11410 0428 384B     		ldr	r3, .L597+4
 11411 042a 0122     		movs	r2, #1
 11412 042c 1A75     		strb	r2, [r3, #20]
3102:bluetooth_rxtx.c **** 
3103:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 11413              		.loc 1 3103 0
 11414 042e 6420     		movs	r0, #100
 11415 0430 FFF7FEFF 		bl	cc2400_strobe
3104:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 11416              		.loc 1 3104 0
 11417 0434 00BF     		nop
 11418              	.L586:
 11419              		.loc 1 3104 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cctJTvh1.s 			page 255


 11420 0436 FFF7FEFF 		bl	cc2400_status
 11421 043a 0346     		mov	r3, r0
 11422 043c 03F00403 		and	r3, r3, #4
 11423 0440 002B     		cmp	r3, #0
 11424 0442 F8D1     		bne	.L586
3105:bluetooth_rxtx.c **** 
3106:bluetooth_rxtx.c **** 			/* Retune */
3107:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 11425              		.loc 1 3107 0 is_stmt 1
 11426 0444 3E4B     		ldr	r3, .L597+56
 11427 0446 1B88     		ldrh	r3, [r3]	@ movhi
 11428 0448 9BB2     		uxth	r3, r3
 11429 044a 002B     		cmp	r3, #0
 11430 044c 03D0     		beq	.L587
 11431              		.loc 1 3107 0 is_stmt 0 discriminator 1
 11432 044e 3C4B     		ldr	r3, .L597+56
 11433 0450 1B88     		ldrh	r3, [r3]	@ movhi
 11434 0452 9BB2     		uxth	r3, r3
 11435 0454 01E0     		b	.L588
 11436              	.L587:
 11437              		.loc 1 3107 0 discriminator 2
 11438 0456 40F66213 		movw	r3, #2402
 11439              	.L588:
 11440              		.loc 1 3107 0 discriminator 4
 11441 045a 3A4A     		ldr	r2, .L597+60
 11442 045c 1380     		strh	r3, [r2]	@ movhi
3108:bluetooth_rxtx.c **** 			restart_jamming = 1;
 11443              		.loc 1 3108 0 is_stmt 1 discriminator 4
 11444 045e 3A4B     		ldr	r3, .L597+64
 11445 0460 0122     		movs	r2, #1
 11446 0462 1A60     		str	r2, [r3]
 11447              	.L583:
3109:bluetooth_rxtx.c **** 		}
3110:bluetooth_rxtx.c **** 
3111:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 11448              		.loc 1 3111 0
 11449 0464 294B     		ldr	r3, .L597+4
 11450 0466 DB88     		ldrh	r3, [r3, #6]
 11451 0468 2C20     		movs	r0, #44
 11452 046a 1946     		mov	r1, r3
 11453 046c FFF7FEFF 		bl	cc2400_set
3112:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 11454              		.loc 1 3112 0
 11455 0470 264B     		ldr	r3, .L597+4
 11456 0472 9B88     		ldrh	r3, [r3, #4]
 11457 0474 2D20     		movs	r0, #45
 11458 0476 1946     		mov	r1, r3
 11459 0478 FFF7FEFF 		bl	cc2400_set
3113:bluetooth_rxtx.c **** 
3114:bluetooth_rxtx.c **** 		if (do_hop)
 11460              		.loc 1 3114 0
 11461 047c 334B     		ldr	r3, .L597+68
 11462 047e 1B78     		ldrb	r3, [r3]
 11463 0480 DBB2     		uxtb	r3, r3
 11464 0482 002B     		cmp	r3, #0
 11465 0484 01D0     		beq	.L589
3115:bluetooth_rxtx.c **** 			hop();
ARM GAS  /tmp/cctJTvh1.s 			page 256


 11466              		.loc 1 3115 0
 11467 0486 FFF7FEFF 		bl	hop
 11468              	.L589:
3116:bluetooth_rxtx.c **** 
3117:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
3118:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 11469              		.loc 1 3118 0
 11470 048a 294B     		ldr	r3, .L597+40
 11471 048c 1B68     		ldr	r3, [r3]
 11472 048e 002B     		cmp	r3, #0
 11473 0490 07DD     		ble	.L590
3119:bluetooth_rxtx.c **** 			le_jam();
 11474              		.loc 1 3119 0
 11475 0492 FFF7FEFF 		bl	le_jam
3120:bluetooth_rxtx.c **** 			--le_jam_count;
 11476              		.loc 1 3120 0
 11477 0496 264B     		ldr	r3, .L597+40
 11478 0498 1B68     		ldr	r3, [r3]
 11479 049a 013B     		subs	r3, r3, #1
 11480 049c 244A     		ldr	r2, .L597+40
 11481 049e 1360     		str	r3, [r2]
 11482 04a0 17E0     		b	.L591
 11483              	.L590:
3121:bluetooth_rxtx.c **** 		} else {
3122:bluetooth_rxtx.c **** 			/* RX mode */
3123:bluetooth_rxtx.c **** 			dma_init_le();
 11484              		.loc 1 3123 0
 11485 04a2 FFF7FEFF 		bl	dma_init_le
3124:bluetooth_rxtx.c **** 			dio_ssp_start();
 11486              		.loc 1 3124 0
 11487 04a6 FFF7FEFF 		bl	dio_ssp_start
3125:bluetooth_rxtx.c **** 
3126:bluetooth_rxtx.c **** 			if (restart_jamming) {
 11488              		.loc 1 3126 0
 11489 04aa 274B     		ldr	r3, .L597+64
 11490 04ac 1B68     		ldr	r3, [r3]
 11491 04ae 002B     		cmp	r3, #0
 11492 04b0 0CD0     		beq	.L592
3127:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 11493              		.loc 1 3127 0
 11494 04b2 164B     		ldr	r3, .L597+4
 11495 04b4 1B68     		ldr	r3, [r3]
 11496 04b6 1846     		mov	r0, r3
 11497 04b8 FFF7FEFF 		bl	rbit
 11498 04bc 0346     		mov	r3, r0
 11499 04be 1846     		mov	r0, r3
 11500 04c0 FFF7FEFF 		bl	cc2400_rx_sync
3128:bluetooth_rxtx.c **** 				restart_jamming = 0;
 11501              		.loc 1 3128 0
 11502 04c4 204B     		ldr	r3, .L597+64
 11503 04c6 0022     		movs	r2, #0
 11504 04c8 1A60     		str	r2, [r3]
 11505 04ca 02E0     		b	.L591
 11506              	.L592:
3129:bluetooth_rxtx.c **** 			} else {
3130:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 11507              		.loc 1 3130 0
ARM GAS  /tmp/cctJTvh1.s 			page 257


 11508 04cc 6220     		movs	r0, #98
 11509 04ce FFF7FEFF 		bl	cc2400_strobe
 11510              	.L591:
3131:bluetooth_rxtx.c **** 			}
3132:bluetooth_rxtx.c **** 		}
3133:bluetooth_rxtx.c **** 
3134:bluetooth_rxtx.c **** 		rx_tc = 0;
 11511              		.loc 1 3134 0
 11512 04d2 1F4B     		ldr	r3, .L597+72
 11513 04d4 0022     		movs	r2, #0
 11514 04d6 1A60     		str	r2, [r3]
3135:bluetooth_rxtx.c **** 		rx_err = 0;
 11515              		.loc 1 3135 0
 11516 04d8 1E4B     		ldr	r3, .L597+76
 11517 04da 0022     		movs	r2, #0
 11518 04dc 1A60     		str	r2, [r3]
 11519              	.L550:
 11520              	.LBE21:
2969:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 11521              		.loc 1 2969 0
 11522 04de 174B     		ldr	r3, .L597+52
 11523 04e0 1B78     		ldrb	r3, [r3]
 11524 04e2 DBB2     		uxtb	r3, r3
 11525 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 11526 04e6 9A42     		cmp	r2, r3
 11527 04e8 3FF4B1AD 		beq	.L594
 11528              	.L593:
3136:bluetooth_rxtx.c **** 	}
3137:bluetooth_rxtx.c **** 
3138:bluetooth_rxtx.c **** cleanup:
3139:bluetooth_rxtx.c **** 
3140:bluetooth_rxtx.c **** 	// disable USB interrupts
3141:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 11529              		.loc 1 3141 0
 11530 04ec 1A4B     		ldr	r3, .L597+80
 11531 04ee 4FF08072 		mov	r2, #16777216
 11532 04f2 1A60     		str	r2, [r3]
3142:bluetooth_rxtx.c **** 
3143:bluetooth_rxtx.c **** 	// reset the radio completely
3144:bluetooth_rxtx.c **** 	cc2400_idle();
 11533              		.loc 1 3144 0
 11534 04f4 FFF7FEFF 		bl	cc2400_idle
3145:bluetooth_rxtx.c **** 	dio_ssp_stop();
 11535              		.loc 1 3145 0
 11536 04f8 FFF7FEFF 		bl	dio_ssp_stop
3146:bluetooth_rxtx.c **** 	cs_trigger_disable();
 11537              		.loc 1 3146 0
 11538 04fc FFF7FEFF 		bl	cs_trigger_disable
3147:bluetooth_rxtx.c **** }
 11539              		.loc 1 3147 0
 11540 0500 6C37     		adds	r7, r7, #108
 11541              		.cfi_def_cfa_offset 12
 11542 0502 BD46     		mov	sp, r7
 11543              		.cfi_def_cfa_register 13
 11544              		@ sp needed
 11545 0504 90BD     		pop	{r4, r7, pc}
 11546              	.L598:
ARM GAS  /tmp/cctJTvh1.s 			page 258


 11547 0506 00BF     		.align	2
 11548              	.L597:
 11549 0508 00000000 		.word	rxbuf1
 11550 050c 00000000 		.word	le
 11551 0510 38C00920 		.word	537509944
 11552 0514 00000000 		.word	packet_cb
 11553 0518 00000000 		.word	clkn
 11554 051c 08400040 		.word	1073758216
 11555 0520 24000340 		.word	1073938468
 11556 0524 08000340 		.word	1073938440
 11557 0528 0C000340 		.word	1073938444
 11558 052c 80F0FA02 		.word	50000000
 11559 0530 00000000 		.word	le_jam_count
 11560 0534 3CC00920 		.word	537509948
 11561 0538 00000000 		.word	jam_mode
 11562 053c 00000000 		.word	requested_mode
 11563 0540 00000000 		.word	saved_request
 11564 0544 00000000 		.word	channel
 11565 0548 D4000000 		.word	restart_jamming.5084
 11566 054c 00000000 		.word	do_hop
 11567 0550 00000000 		.word	rx_tc
 11568 0554 00000000 		.word	rx_err
 11569 0558 80E100E0 		.word	-536813184
 11570              		.cfi_endproc
 11571              	.LFE45:
 11573              		.section	.text.cb_follow_le,"ax",%progbits
 11574              		.align	2
 11575              		.global	cb_follow_le
 11576              		.thumb
 11577              		.thumb_func
 11579              	cb_follow_le:
 11580              	.LFB46:
3148:bluetooth_rxtx.c **** 
3149:bluetooth_rxtx.c **** 
3150:bluetooth_rxtx.c **** 
3151:bluetooth_rxtx.c **** /* low energy connection following
3152:bluetooth_rxtx.c ****  * follows a known AA around */
3153:bluetooth_rxtx.c **** int cb_follow_le() {
 11581              		.loc 1 3153 0
 11582              		.cfi_startproc
 11583              		@ args = 0, pretend = 0, frame = 48
 11584              		@ frame_needed = 1, uses_anonymous_args = 0
 11585 0000 80B5     		push	{r7, lr}
 11586              		.cfi_def_cfa_offset 8
 11587              		.cfi_offset 7, -8
 11588              		.cfi_offset 14, -4
 11589 0002 8CB0     		sub	sp, sp, #48
 11590              		.cfi_def_cfa_offset 56
 11591 0004 00AF     		add	r7, sp, #0
 11592              		.cfi_def_cfa_register 7
3154:bluetooth_rxtx.c **** 	int i, j, k;
3155:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 11593              		.loc 1 3155 0
 11594 0006 6C4B     		ldr	r3, .L615
 11595 0008 1B88     		ldrh	r3, [r3]	@ movhi
 11596 000a 9BB2     		uxth	r3, r3
 11597 000c DBB2     		uxtb	r3, r3
ARM GAS  /tmp/cctJTvh1.s 			page 259


 11598 000e 623B     		subs	r3, r3, #98
 11599 0010 DBB2     		uxtb	r3, r3
 11600 0012 1846     		mov	r0, r3
 11601 0014 FFF7FEFF 		bl	btle_channel_index
 11602 0018 0346     		mov	r3, r0
 11603 001a 1A46     		mov	r2, r3
 11604 001c 674B     		ldr	r3, .L615+4
 11605 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 11606 0020 3B62     		str	r3, [r7, #32]
3156:bluetooth_rxtx.c **** 
3157:bluetooth_rxtx.c **** 	u32 access_address = 0;
 11607              		.loc 1 3157 0
 11608 0022 0023     		movs	r3, #0
 11609 0024 FB61     		str	r3, [r7, #28]
3158:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 11610              		.loc 1 3158 0
 11611 0026 0023     		movs	r3, #0
 11612 0028 FB62     		str	r3, [r7, #44]
 11613 002a 0EE0     		b	.L600
 11614              	.L601:
3159:bluetooth_rxtx.c **** 		access_address >>= 1;
 11615              		.loc 1 3159 0 discriminator 3
 11616 002c FB69     		ldr	r3, [r7, #28]
 11617 002e 5B08     		lsrs	r3, r3, #1
 11618 0030 FB61     		str	r3, [r7, #28]
3160:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 11619              		.loc 1 3160 0 discriminator 3
 11620 0032 634A     		ldr	r2, .L615+8
 11621 0034 FB6A     		ldr	r3, [r7, #44]
 11622 0036 1344     		add	r3, r3, r2
 11623 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11624 003a DB07     		lsls	r3, r3, #31
 11625 003c 1A46     		mov	r2, r3
 11626 003e FB69     		ldr	r3, [r7, #28]
 11627 0040 1343     		orrs	r3, r3, r2
 11628 0042 FB61     		str	r3, [r7, #28]
3158:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 11629              		.loc 1 3158 0 discriminator 3
 11630 0044 FB6A     		ldr	r3, [r7, #44]
 11631 0046 0133     		adds	r3, r3, #1
 11632 0048 FB62     		str	r3, [r7, #44]
 11633              	.L600:
3158:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 11634              		.loc 1 3158 0 is_stmt 0 discriminator 1
 11635 004a FB6A     		ldr	r3, [r7, #44]
 11636 004c 1E2B     		cmp	r3, #30
 11637 004e EDDD     		ble	.L601
3161:bluetooth_rxtx.c **** 	}
3162:bluetooth_rxtx.c **** 
3163:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 11638              		.loc 1 3163 0 is_stmt 1
 11639 0050 1F23     		movs	r3, #31
 11640 0052 FB62     		str	r3, [r7, #44]
 11641 0054 A6E0     		b	.L602
 11642              	.L613:
3164:bluetooth_rxtx.c **** 		access_address >>= 1;
 11643              		.loc 1 3164 0
ARM GAS  /tmp/cctJTvh1.s 			page 260


 11644 0056 FB69     		ldr	r3, [r7, #28]
 11645 0058 5B08     		lsrs	r3, r3, #1
 11646 005a FB61     		str	r3, [r7, #28]
3165:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 11647              		.loc 1 3165 0
 11648 005c 584A     		ldr	r2, .L615+8
 11649 005e FB6A     		ldr	r3, [r7, #44]
 11650 0060 1344     		add	r3, r3, r2
 11651 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11652 0064 DB07     		lsls	r3, r3, #31
 11653 0066 1A46     		mov	r2, r3
 11654 0068 FB69     		ldr	r3, [r7, #28]
 11655 006a 1343     		orrs	r3, r3, r2
 11656 006c FB61     		str	r3, [r7, #28]
3166:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 11657              		.loc 1 3166 0
 11658 006e 554B     		ldr	r3, .L615+12
 11659 0070 1A68     		ldr	r2, [r3]
 11660 0072 FB69     		ldr	r3, [r7, #28]
 11661 0074 9A42     		cmp	r2, r3
 11662 0076 40F09280 		bne	.L603
3167:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 11663              		.loc 1 3167 0
 11664 007a 0023     		movs	r3, #0
 11665 007c BB62     		str	r3, [r7, #40]
 11666 007e 48E0     		b	.L604
 11667              	.L610:
 11668              	.LBB26:
3168:bluetooth_rxtx.c **** 				u8 byte = 0;
 11669              		.loc 1 3168 0
 11670 0080 0023     		movs	r3, #0
 11671 0082 FB76     		strb	r3, [r7, #27]
3169:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 11672              		.loc 1 3169 0
 11673 0084 0023     		movs	r3, #0
 11674 0086 7B62     		str	r3, [r7, #36]
 11675 0088 37E0     		b	.L605
 11676              	.L609:
 11677              	.LBB27:
3170:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 11678              		.loc 1 3170 0
 11679 008a BB6A     		ldr	r3, [r7, #40]
 11680 008c DA00     		lsls	r2, r3, #3
 11681 008e 7B6A     		ldr	r3, [r7, #36]
 11682 0090 1A44     		add	r2, r2, r3
 11683 0092 FB6A     		ldr	r3, [r7, #44]
 11684 0094 1344     		add	r3, r3, r2
 11685 0096 1F3B     		subs	r3, r3, #31
 11686 0098 3B61     		str	r3, [r7, #16]
3171:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 11687              		.loc 1 3171 0
 11688 009a 3B69     		ldr	r3, [r7, #16]
 11689 009c B3F5487F 		cmp	r3, #800
 11690 00a0 00DB     		blt	.L606
 11691 00a2 2DE0     		b	.L607
 11692              	.L606:
3172:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
ARM GAS  /tmp/cctJTvh1.s 			page 261


 11693              		.loc 1 3172 0
 11694 00a4 464A     		ldr	r2, .L615+8
 11695 00a6 3B69     		ldr	r3, [r7, #16]
 11696 00a8 1344     		add	r3, r3, r2
 11697 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11698 00ac 7B61     		str	r3, [r7, #20]
3173:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 11699              		.loc 1 3173 0
 11700 00ae BB6A     		ldr	r3, [r7, #40]
 11701 00b0 032B     		cmp	r3, #3
 11702 00b2 16DD     		ble	.L608
3174:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 11703              		.loc 1 3174 0
 11704 00b4 444A     		ldr	r2, .L615+16
 11705 00b6 3B6A     		ldr	r3, [r7, #32]
 11706 00b8 1344     		add	r3, r3, r2
 11707 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11708 00bc 1A46     		mov	r2, r3
 11709 00be 7B69     		ldr	r3, [r7, #20]
 11710 00c0 5340     		eors	r3, r3, r2
 11711 00c2 7B61     		str	r3, [r7, #20]
3175:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 11712              		.loc 1 3175 0
 11713 00c4 3B6A     		ldr	r3, [r7, #32]
 11714 00c6 0133     		adds	r3, r3, #1
 11715 00c8 1946     		mov	r1, r3
 11716 00ca 404B     		ldr	r3, .L615+20
 11717 00cc A1FB0323 		umull	r2, r3, r1, r3
 11718 00d0 C81A     		subs	r0, r1, r3
 11719 00d2 4008     		lsrs	r0, r0, #1
 11720 00d4 0344     		add	r3, r3, r0
 11721 00d6 9A09     		lsrs	r2, r3, #6
 11722 00d8 1346     		mov	r3, r2
 11723 00da DB01     		lsls	r3, r3, #7
 11724 00dc 9B1A     		subs	r3, r3, r2
 11725 00de CA1A     		subs	r2, r1, r3
 11726 00e0 3A62     		str	r2, [r7, #32]
 11727              	.L608:
3176:bluetooth_rxtx.c **** 					}
3177:bluetooth_rxtx.c **** 					byte |= bit << k;
 11728              		.loc 1 3177 0 discriminator 2
 11729 00e2 7A69     		ldr	r2, [r7, #20]
 11730 00e4 7B6A     		ldr	r3, [r7, #36]
 11731 00e6 02FA03F3 		lsl	r3, r2, r3
 11732 00ea DAB2     		uxtb	r2, r3
 11733 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 11734 00ee 1343     		orrs	r3, r3, r2
 11735 00f0 DBB2     		uxtb	r3, r3
 11736 00f2 FB76     		strb	r3, [r7, #27]
 11737              	.LBE27:
3169:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 11738              		.loc 1 3169 0 discriminator 2
 11739 00f4 7B6A     		ldr	r3, [r7, #36]
 11740 00f6 0133     		adds	r3, r3, #1
 11741 00f8 7B62     		str	r3, [r7, #36]
 11742              	.L605:
3169:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
ARM GAS  /tmp/cctJTvh1.s 			page 262


 11743              		.loc 1 3169 0 is_stmt 0 discriminator 1
 11744 00fa 7B6A     		ldr	r3, [r7, #36]
 11745 00fc 072B     		cmp	r3, #7
 11746 00fe C4DD     		ble	.L609
 11747              	.L607:
3178:bluetooth_rxtx.c **** 				}
3179:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 11748              		.loc 1 3179 0 is_stmt 1 discriminator 2
 11749 0100 334B     		ldr	r3, .L615+24
 11750 0102 1A68     		ldr	r2, [r3]
 11751 0104 BB6A     		ldr	r3, [r7, #40]
 11752 0106 1344     		add	r3, r3, r2
 11753 0108 FA7E     		ldrb	r2, [r7, #27]
 11754 010a 1A70     		strb	r2, [r3]
 11755              	.LBE26:
3167:bluetooth_rxtx.c **** 				u8 byte = 0;
 11756              		.loc 1 3167 0 discriminator 2
 11757 010c BB6A     		ldr	r3, [r7, #40]
 11758 010e 0133     		adds	r3, r3, #1
 11759 0110 BB62     		str	r3, [r7, #40]
 11760              	.L604:
3167:bluetooth_rxtx.c **** 				u8 byte = 0;
 11761              		.loc 1 3167 0 is_stmt 0 discriminator 1
 11762 0112 BB6A     		ldr	r3, [r7, #40]
 11763 0114 2D2B     		cmp	r3, #45
 11764 0116 B3DD     		ble	.L610
3180:bluetooth_rxtx.c **** 			}
3181:bluetooth_rxtx.c **** 
3182:bluetooth_rxtx.c **** 			// verify CRC
3183:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 11765              		.loc 1 3183 0 is_stmt 1
 11766 0118 2A4B     		ldr	r3, .L615+12
 11767 011a 1B69     		ldr	r3, [r3, #16]
 11768 011c 002B     		cmp	r3, #0
 11769 011e 2ED0     		beq	.L611
 11770              	.LBB28:
3184:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 11771              		.loc 1 3184 0
 11772 0120 2B4B     		ldr	r3, .L615+24
 11773 0122 1B68     		ldr	r3, [r3]
 11774 0124 0533     		adds	r3, r3, #5
 11775 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11776 0128 03F03F03 		and	r3, r3, #63
 11777 012c 0233     		adds	r3, r3, #2
 11778 012e FB60     		str	r3, [r7, #12]
3185:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 11779              		.loc 1 3185 0
 11780 0130 244B     		ldr	r3, .L615+12
 11781 0132 DA68     		ldr	r2, [r3, #12]
 11782 0134 264B     		ldr	r3, .L615+24
 11783 0136 1B68     		ldr	r3, [r3]
 11784 0138 0433     		adds	r3, r3, #4
 11785 013a 1046     		mov	r0, r2
 11786 013c 1946     		mov	r1, r3
 11787 013e FA68     		ldr	r2, [r7, #12]
 11788 0140 FFF7FEFF 		bl	btle_crcgen_lut
 11789 0144 B860     		str	r0, [r7, #8]
ARM GAS  /tmp/cctJTvh1.s 			page 263


3186:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 11790              		.loc 1 3186 0
 11791 0146 224B     		ldr	r3, .L615+24
 11792 0148 1A68     		ldr	r2, [r3]
 11793 014a FB68     		ldr	r3, [r7, #12]
 11794 014c 0633     		adds	r3, r3, #6
 11795 014e 1344     		add	r3, r3, r2
 11796 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11797 0152 1A04     		lsls	r2, r3, #16
3187:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 11798              		.loc 1 3187 0
 11799 0154 1E4B     		ldr	r3, .L615+24
 11800 0156 1968     		ldr	r1, [r3]
 11801 0158 FB68     		ldr	r3, [r7, #12]
 11802 015a 0533     		adds	r3, r3, #5
 11803 015c 0B44     		add	r3, r3, r1
 11804 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11805 0160 1B02     		lsls	r3, r3, #8
 11806 0162 1343     		orrs	r3, r3, r2
3188:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 11807              		.loc 1 3188 0
 11808 0164 1A4A     		ldr	r2, .L615+24
 11809 0166 1268     		ldr	r2, [r2]
 11810 0168 F968     		ldr	r1, [r7, #12]
 11811 016a 0431     		adds	r1, r1, #4
 11812 016c 0A44     		add	r2, r2, r1
 11813 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 11814 0170 1343     		orrs	r3, r3, r2
3186:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 11815              		.loc 1 3186 0
 11816 0172 7B60     		str	r3, [r7, #4]
3189:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 11817              		.loc 1 3189 0
 11818 0174 BA68     		ldr	r2, [r7, #8]
 11819 0176 7B68     		ldr	r3, [r7, #4]
 11820 0178 9A42     		cmp	r2, r3
 11821 017a 00D0     		beq	.L611
3190:bluetooth_rxtx.c **** 					break;
 11822              		.loc 1 3190 0
 11823 017c 17E0     		b	.L612
 11824              	.L611:
 11825              	.LBE28:
3191:bluetooth_rxtx.c **** 			}
3192:bluetooth_rxtx.c **** 
3193:bluetooth_rxtx.c **** 			// send to PC
3194:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 11826              		.loc 1 3194 0
 11827 017e 144B     		ldr	r3, .L615+24
 11828 0180 1B68     		ldr	r3, [r3]
 11829 0182 0120     		movs	r0, #1
 11830 0184 1946     		mov	r1, r3
 11831 0186 FFF7FEFF 		bl	enqueue
3195:bluetooth_rxtx.c **** 			RXLED_SET;
 11832              		.loc 1 3195 0
 11833 018a 124B     		ldr	r3, .L615+28
 11834 018c 1022     		movs	r2, #16
 11835 018e 1A60     		str	r2, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 264


3196:bluetooth_rxtx.c **** 
3197:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 11836              		.loc 1 3197 0
 11837 0190 114B     		ldr	r3, .L615+32
 11838 0192 1B68     		ldr	r3, [r3]
 11839 0194 0E4A     		ldr	r2, .L615+24
 11840 0196 1268     		ldr	r2, [r2]
 11841 0198 1046     		mov	r0, r2
 11842 019a 9847     		blx	r3
3198:bluetooth_rxtx.c **** 
3199:bluetooth_rxtx.c **** 			break;
 11843              		.loc 1 3199 0
 11844 019c 07E0     		b	.L612
 11845              	.L603:
3163:bluetooth_rxtx.c **** 		access_address >>= 1;
 11846              		.loc 1 3163 0 discriminator 2
 11847 019e FB6A     		ldr	r3, [r7, #44]
 11848 01a0 0133     		adds	r3, r3, #1
 11849 01a2 FB62     		str	r3, [r7, #44]
 11850              	.L602:
3163:bluetooth_rxtx.c **** 		access_address >>= 1;
 11851              		.loc 1 3163 0 is_stmt 0 discriminator 1
 11852 01a4 FB6A     		ldr	r3, [r7, #44]
 11853 01a6 B3F5D87F 		cmp	r3, #432
 11854 01aa FFF654AF 		blt	.L613
 11855              	.L612:
3200:bluetooth_rxtx.c **** 		}
3201:bluetooth_rxtx.c **** 	}
3202:bluetooth_rxtx.c **** 
3203:bluetooth_rxtx.c **** 	return 1;
 11856              		.loc 1 3203 0 is_stmt 1
 11857 01ae 0123     		movs	r3, #1
3204:bluetooth_rxtx.c **** }
 11858              		.loc 1 3204 0
 11859 01b0 1846     		mov	r0, r3
 11860 01b2 3037     		adds	r7, r7, #48
 11861              		.cfi_def_cfa_offset 8
 11862 01b4 BD46     		mov	sp, r7
 11863              		.cfi_def_cfa_register 13
 11864              		@ sp needed
 11865 01b6 80BD     		pop	{r7, pc}
 11866              	.L616:
 11867              		.align	2
 11868              	.L615:
 11869 01b8 00000000 		.word	channel
 11870 01bc C0000000 		.word	whitening_index
 11871 01c0 00000000 		.word	unpacked
 11872 01c4 00000000 		.word	le
 11873 01c8 40000000 		.word	whitening
 11874 01cc 11080402 		.word	33818641
 11875 01d0 00000000 		.word	idle_rxbuf
 11876 01d4 38C00920 		.word	537509944
 11877 01d8 00000000 		.word	packet_cb
 11878              		.cfi_endproc
 11879              	.LFE46:
 11881              		.section	.text.connection_follow_cb,"ax",%progbits
 11882              		.align	2
ARM GAS  /tmp/cctJTvh1.s 			page 265


 11883              		.global	connection_follow_cb
 11884              		.thumb
 11885              		.thumb_func
 11887              	connection_follow_cb:
 11888              	.LFB47:
3205:bluetooth_rxtx.c **** 
3206:bluetooth_rxtx.c **** /**
3207:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
3208:bluetooth_rxtx.c ****  */
3209:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 11889              		.loc 1 3209 0
 11890              		.cfi_startproc
 11891              		@ args = 0, pretend = 0, frame = 40
 11892              		@ frame_needed = 1, uses_anonymous_args = 0
 11893 0000 80B5     		push	{r7, lr}
 11894              		.cfi_def_cfa_offset 8
 11895              		.cfi_offset 7, -8
 11896              		.cfi_offset 14, -4
 11897 0002 8AB0     		sub	sp, sp, #40
 11898              		.cfi_def_cfa_offset 48
 11899 0004 00AF     		add	r7, sp, #0
 11900              		.cfi_def_cfa_register 7
 11901 0006 7860     		str	r0, [r7, #4]
3210:bluetooth_rxtx.c **** 	int i;
3211:bluetooth_rxtx.c **** 	u32 aa = 0;
 11902              		.loc 1 3211 0
 11903 0008 0023     		movs	r3, #0
 11904 000a 3B62     		str	r3, [r7, #32]
3212:bluetooth_rxtx.c **** 
3213:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
3214:bluetooth_rxtx.c **** #define HEADER_IDX 4
3215:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
3216:bluetooth_rxtx.c **** #define DATA_START_IDX 6
3217:bluetooth_rxtx.c **** 
3218:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 11905              		.loc 1 3218 0
 11906 000c 7B68     		ldr	r3, [r7, #4]
 11907 000e FB61     		str	r3, [r7, #28]
3219:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 11908              		.loc 1 3219 0
 11909 0010 7B68     		ldr	r3, [r7, #4]
 11910 0012 1B79     		ldrb	r3, [r3, #4]
 11911 0014 FB76     		strb	r3, [r7, #27]
3220:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 11912              		.loc 1 3220 0
 11913 0016 7B68     		ldr	r3, [r7, #4]
 11914 0018 0533     		adds	r3, r3, #5
 11915 001a 7B61     		str	r3, [r7, #20]
3221:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 11916              		.loc 1 3221 0
 11917 001c 7B68     		ldr	r3, [r7, #4]
 11918 001e 0633     		adds	r3, r3, #6
 11919 0020 3B61     		str	r3, [r7, #16]
3222:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 11920              		.loc 1 3222 0
 11921 0022 7B69     		ldr	r3, [r7, #20]
 11922 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cctJTvh1.s 			page 266


 11923 0026 0633     		adds	r3, r3, #6
 11924 0028 1A46     		mov	r2, r3
 11925 002a 7B68     		ldr	r3, [r7, #4]
 11926 002c 1344     		add	r3, r3, r2
 11927 002e FB60     		str	r3, [r7, #12]
3223:bluetooth_rxtx.c **** 
3224:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 11928              		.loc 1 3224 0
 11929 0030 8B4B     		ldr	r3, .L627
 11930 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 11931 0034 022B     		cmp	r3, #2
 11932 0036 1CD1     		bne	.L618
3225:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
3226:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 11933              		.loc 1 3226 0
 11934 0038 894B     		ldr	r3, .L627
 11935 003a 0322     		movs	r2, #3
 11936 003c 1A75     		strb	r2, [r3, #20]
3227:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 11937              		.loc 1 3227 0
 11938 003e 894B     		ldr	r3, .L627+4
 11939 0040 1B68     		ldr	r3, [r3]
 11940 0042 874A     		ldr	r2, .L627
 11941 0044 9361     		str	r3, [r2, #24]
3228:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 11942              		.loc 1 3228 0
 11943 0046 864B     		ldr	r3, .L627
 11944 0048 DB8B     		ldrh	r3, [r3, #30]
 11945 004a 013B     		subs	r3, r3, #1
 11946 004c 9AB2     		uxth	r2, r3
 11947 004e 844B     		ldr	r3, .L627
 11948 0050 9A83     		strh	r2, [r3, #28]	@ movhi
3229:bluetooth_rxtx.c **** 		le.conn_count = 0;
 11949              		.loc 1 3229 0
 11950 0052 834B     		ldr	r3, .L627
 11951 0054 0022     		movs	r2, #0
 11952 0056 1A84     		strh	r2, [r3, #32]	@ movhi
3230:bluetooth_rxtx.c **** 		le.update_pending = 0;
 11953              		.loc 1 3230 0
 11954 0058 814B     		ldr	r3, .L627
 11955 005a 0022     		movs	r2, #0
 11956 005c 9A62     		str	r2, [r3, #40]
3231:bluetooth_rxtx.c **** 
3232:bluetooth_rxtx.c **** 		// hue hue hue
3233:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 11957              		.loc 1 3233 0
 11958 005e 824B     		ldr	r3, .L627+8
 11959 0060 1B78     		ldrb	r3, [r3]
 11960 0062 DBB2     		uxtb	r3, r3
 11961 0064 002B     		cmp	r3, #0
 11962 0066 00F0F780 		beq	.L617
3234:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 11963              		.loc 1 3234 0
 11964 006a 804B     		ldr	r3, .L627+12
 11965 006c 2822     		movs	r2, #40
 11966 006e 1A60     		str	r2, [r3]
 11967 0070 F2E0     		b	.L617
ARM GAS  /tmp/cctJTvh1.s 			page 267


 11968              	.L618:
3235:bluetooth_rxtx.c **** 
3236:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 11969              		.loc 1 3236 0
 11970 0072 7B4B     		ldr	r3, .L627
 11971 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 11972 0076 032B     		cmp	r3, #3
 11973 0078 6FD1     		bne	.L621
 11974              	.LBB29:
3237:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 11975              		.loc 1 3237 0
 11976 007a FB7E     		ldrb	r3, [r7, #27]
 11977 007c 03F00303 		and	r3, r3, #3
 11978 0080 FB72     		strb	r3, [r7, #11]
3238:bluetooth_rxtx.c **** 
3239:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
3240:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 11979              		.loc 1 3240 0
 11980 0082 774B     		ldr	r3, .L627
 11981 0084 9B6A     		ldr	r3, [r3, #40]
 11982 0086 002B     		cmp	r3, #0
 11983 0088 21D0     		beq	.L622
 11984              		.loc 1 3240 0 is_stmt 0 discriminator 1
 11985 008a 754B     		ldr	r3, .L627
 11986 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 11987 008e 9AB2     		uxth	r2, r3
 11988 0090 734B     		ldr	r3, .L627
 11989 0092 9B8D     		ldrh	r3, [r3, #44]
 11990 0094 9A42     		cmp	r2, r3
 11991 0096 1AD1     		bne	.L622
3241:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
3242:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 11992              		.loc 1 3242 0 is_stmt 1
 11993 0098 724B     		ldr	r3, .L627+4
 11994 009a 1B68     		ldr	r3, [r3]
 11995 009c 704A     		ldr	r2, .L627
 11996 009e 9361     		str	r3, [r2, #24]
3243:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 11997              		.loc 1 3243 0
 11998 00a0 6F4B     		ldr	r3, .L627
 11999 00a2 DA8D     		ldrh	r2, [r3, #46]
 12000 00a4 6E4B     		ldr	r3, .L627
 12001 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
3244:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 12002              		.loc 1 3244 0
 12003 00a8 6D4B     		ldr	r3, .L627
 12004 00aa DB8D     		ldrh	r3, [r3, #46]
 12005 00ac 013B     		subs	r3, r3, #1
 12006 00ae 9AB2     		uxth	r2, r3
 12007 00b0 6B4B     		ldr	r3, .L627
 12008 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
3245:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 12009              		.loc 1 3245 0
 12010 00b4 6A4B     		ldr	r3, .L627
 12011 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 12012 00ba 694B     		ldr	r3, .L627
 12013 00bc 83F82220 		strb	r2, [r3, #34]
ARM GAS  /tmp/cctJTvh1.s 			page 268


3246:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 12014              		.loc 1 3246 0
 12015 00c0 674B     		ldr	r3, .L627
 12016 00c2 5A8E     		ldrh	r2, [r3, #50]
 12017 00c4 664B     		ldr	r3, .L627
 12018 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
3247:bluetooth_rxtx.c **** 			le.update_pending = 0;
 12019              		.loc 1 3247 0
 12020 00c8 654B     		ldr	r3, .L627
 12021 00ca 0022     		movs	r2, #0
 12022 00cc 9A62     		str	r2, [r3, #40]
 12023              	.L622:
3248:bluetooth_rxtx.c **** 		}
3249:bluetooth_rxtx.c **** 
3250:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 12024              		.loc 1 3250 0
 12025 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 12026 00d0 032B     		cmp	r3, #3
 12027 00d2 41D1     		bne	.L623
 12028              		.loc 1 3250 0 is_stmt 0 discriminator 1
 12029 00d4 3B69     		ldr	r3, [r7, #16]
 12030 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12031 00d8 002B     		cmp	r3, #0
 12032 00da 3DD1     		bne	.L623
3251:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
3252:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
3253:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 12033              		.loc 1 3253 0 is_stmt 1
 12034 00dc 7B68     		ldr	r3, [r7, #4]
 12035 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 12036 00e0 5F4B     		ldr	r3, .L627
 12037 00e2 83F83020 		strb	r2, [r3, #48]
3254:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 12038              		.loc 1 3254 0
 12039 00e6 7B68     		ldr	r3, [r7, #4]
 12040 00e8 0833     		adds	r3, r3, #8
 12041 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12042 00ec 9AB2     		uxth	r2, r3
 12043 00ee 7B68     		ldr	r3, [r7, #4]
 12044 00f0 0933     		adds	r3, r3, #9
 12045 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12046 00f4 9BB2     		uxth	r3, r3
 12047 00f6 1B02     		lsls	r3, r3, #8
 12048 00f8 9BB2     		uxth	r3, r3
 12049 00fa 1344     		add	r3, r3, r2
 12050 00fc 9AB2     		uxth	r2, r3
 12051 00fe 584B     		ldr	r3, .L627
 12052 0100 5A86     		strh	r2, [r3, #50]	@ movhi
3255:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 12053              		.loc 1 3255 0
 12054 0102 7B68     		ldr	r3, [r7, #4]
 12055 0104 0A33     		adds	r3, r3, #10
 12056 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12057 0108 9AB2     		uxth	r2, r3
 12058 010a 7B68     		ldr	r3, [r7, #4]
 12059 010c 0B33     		adds	r3, r3, #11
 12060 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cctJTvh1.s 			page 269


 12061 0110 9BB2     		uxth	r3, r3
 12062 0112 1B02     		lsls	r3, r3, #8
 12063 0114 9BB2     		uxth	r3, r3
 12064 0116 1344     		add	r3, r3, r2
 12065 0118 9AB2     		uxth	r2, r3
 12066 011a 514B     		ldr	r3, .L627
 12067 011c DA85     		strh	r2, [r3, #46]	@ movhi
3256:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 12068              		.loc 1 3256 0
 12069 011e 7B68     		ldr	r3, [r7, #4]
 12070 0120 1033     		adds	r3, r3, #16
 12071 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12072 0124 9AB2     		uxth	r2, r3
 12073 0126 7B68     		ldr	r3, [r7, #4]
 12074 0128 1133     		adds	r3, r3, #17
 12075 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12076 012c 9BB2     		uxth	r3, r3
 12077 012e 1B02     		lsls	r3, r3, #8
 12078 0130 9BB2     		uxth	r3, r3
 12079 0132 1344     		add	r3, r3, r2
 12080 0134 9AB2     		uxth	r2, r3
 12081 0136 4A4B     		ldr	r3, .L627
 12082 0138 9A85     		strh	r2, [r3, #44]	@ movhi
3257:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 12083              		.loc 1 3257 0
 12084 013a 494B     		ldr	r3, .L627
 12085 013c 9B8D     		ldrh	r3, [r3, #44]
 12086 013e 1A46     		mov	r2, r3
 12087 0140 474B     		ldr	r3, .L627
 12088 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 12089 0144 9BB2     		uxth	r3, r3
 12090 0146 D31A     		subs	r3, r2, r3
 12091 0148 47F6FE72 		movw	r2, #32766
 12092 014c 9342     		cmp	r3, r2
 12093 014e 03DC     		bgt	.L623
3258:bluetooth_rxtx.c **** 				le.update_pending = 1;
 12094              		.loc 1 3258 0
 12095 0150 434B     		ldr	r3, .L627
 12096 0152 0122     		movs	r2, #1
 12097 0154 9A62     		str	r2, [r3, #40]
 12098              	.LBE29:
 12099 0156 7FE0     		b	.L617
 12100              	.L623:
 12101 0158 7EE0     		b	.L617
 12102              	.L621:
3259:bluetooth_rxtx.c **** 		}
3260:bluetooth_rxtx.c **** 
3261:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 12103              		.loc 1 3261 0
 12104 015a 414B     		ldr	r3, .L627
 12105 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 12106 015e 012B     		cmp	r3, #1
 12107 0160 7AD1     		bne	.L617
 12108              	.LBB30:
3262:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 12109              		.loc 1 3262 0
 12110 0162 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cctJTvh1.s 			page 270


 12111 0164 0433     		adds	r3, r3, #4
 12112 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12113 0168 03F00F03 		and	r3, r3, #15
 12114 016c BB72     		strb	r3, [r7, #10]
3263:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 12115              		.loc 1 3263 0
 12116 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 12117 0170 052B     		cmp	r3, #5
 12118 0172 71D1     		bne	.L617
3264:bluetooth_rxtx.c **** 			// This is a connect packet
3265:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
3266:bluetooth_rxtx.c **** 			if (le.target_set &&
 12119              		.loc 1 3266 0
 12120 0174 3A4B     		ldr	r3, .L627
 12121 0176 DB6B     		ldr	r3, [r3, #60]
 12122 0178 002B     		cmp	r3, #0
 12123 017a 14D0     		beq	.L624
3267:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 12124              		.loc 1 3267 0 discriminator 1
 12125 017c 7B68     		ldr	r3, [r7, #4]
 12126 017e 0633     		adds	r3, r3, #6
 12127 0180 3B48     		ldr	r0, .L627+16
 12128 0182 1946     		mov	r1, r3
 12129 0184 0622     		movs	r2, #6
 12130 0186 FFF7FEFF 		bl	memcmp
 12131 018a 0346     		mov	r3, r0
3266:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 12132              		.loc 1 3266 0 discriminator 1
 12133 018c 002B     		cmp	r3, #0
 12134 018e 0AD0     		beq	.L624
3268:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 12135              		.loc 1 3268 0
 12136 0190 7B68     		ldr	r3, [r7, #4]
 12137 0192 0C33     		adds	r3, r3, #12
 12138 0194 3648     		ldr	r0, .L627+16
 12139 0196 1946     		mov	r1, r3
 12140 0198 0622     		movs	r2, #6
 12141 019a FFF7FEFF 		bl	memcmp
 12142 019e 0346     		mov	r3, r0
3267:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 12143              		.loc 1 3267 0
 12144 01a0 002B     		cmp	r3, #0
 12145 01a2 00D0     		beq	.L624
3269:bluetooth_rxtx.c **** 				return;
 12146              		.loc 1 3269 0
 12147 01a4 58E0     		b	.L617
 12148              	.L624:
3270:bluetooth_rxtx.c **** 			}
3271:bluetooth_rxtx.c **** 
3272:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 12149              		.loc 1 3272 0
 12150 01a6 2E4B     		ldr	r3, .L627
 12151 01a8 0222     		movs	r2, #2
 12152 01aa 1A75     		strb	r2, [r3, #20]
3273:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 12153              		.loc 1 3273 0
 12154 01ac 2C4B     		ldr	r3, .L627
ARM GAS  /tmp/cctJTvh1.s 			page 271


 12155 01ae 0022     		movs	r2, #0
 12156 01b0 1A61     		str	r2, [r3, #16]
3274:bluetooth_rxtx.c **** 
3275:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 12157              		.loc 1 3275 0
 12158 01b2 0023     		movs	r3, #0
 12159 01b4 7B62     		str	r3, [r7, #36]
 12160 01b6 11E0     		b	.L625
 12161              	.L626:
3276:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 12162              		.loc 1 3276 0 discriminator 3
 12163 01b8 7B6A     		ldr	r3, [r7, #36]
 12164 01ba 1233     		adds	r3, r3, #18
 12165 01bc 1A46     		mov	r2, r3
 12166 01be 7B68     		ldr	r3, [r7, #4]
 12167 01c0 1344     		add	r3, r3, r2
 12168 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12169 01c4 1A46     		mov	r2, r3
 12170 01c6 7B6A     		ldr	r3, [r7, #36]
 12171 01c8 DB00     		lsls	r3, r3, #3
 12172 01ca 02FA03F3 		lsl	r3, r2, r3
 12173 01ce 1A46     		mov	r2, r3
 12174 01d0 3B6A     		ldr	r3, [r7, #32]
 12175 01d2 1343     		orrs	r3, r3, r2
 12176 01d4 3B62     		str	r3, [r7, #32]
3275:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 12177              		.loc 1 3275 0 discriminator 3
 12178 01d6 7B6A     		ldr	r3, [r7, #36]
 12179 01d8 0133     		adds	r3, r3, #1
 12180 01da 7B62     		str	r3, [r7, #36]
 12181              	.L625:
3275:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 12182              		.loc 1 3275 0 is_stmt 0 discriminator 1
 12183 01dc 7B6A     		ldr	r3, [r7, #36]
 12184 01de 032B     		cmp	r3, #3
 12185 01e0 EADD     		ble	.L626
3277:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 12186              		.loc 1 3277 0 is_stmt 1
 12187 01e2 386A     		ldr	r0, [r7, #32]
 12188 01e4 FFF7FEFF 		bl	le_set_access_address
3278:bluetooth_rxtx.c **** 
3279:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
3280:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 12189              		.loc 1 3280 0
 12190 01e8 7B68     		ldr	r3, [r7, #4]
 12191 01ea 1833     		adds	r3, r3, #24
 12192 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12193 01ee 1A04     		lsls	r2, r3, #16
3281:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 12194              		.loc 1 3281 0
 12195 01f0 7B68     		ldr	r3, [r7, #4]
 12196 01f2 1733     		adds	r3, r3, #23
 12197 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12198 01f6 1B02     		lsls	r3, r3, #8
 12199 01f8 1343     		orrs	r3, r3, r2
3282:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 12200              		.loc 1 3282 0
ARM GAS  /tmp/cctJTvh1.s 			page 272


 12201 01fa 7A68     		ldr	r2, [r7, #4]
 12202 01fc 1632     		adds	r2, r2, #22
 12203 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 12204 0200 1343     		orrs	r3, r3, r2
3280:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 12205              		.loc 1 3280 0
 12206 0202 1A46     		mov	r2, r3
 12207 0204 164B     		ldr	r3, .L627
 12208 0206 9A60     		str	r2, [r3, #8]
3283:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 12209              		.loc 1 3283 0
 12210 0208 154B     		ldr	r3, .L627
 12211 020a 9B68     		ldr	r3, [r3, #8]
 12212 020c 1846     		mov	r0, r3
 12213 020e FFF7FEFF 		bl	rbit
 12214 0212 0246     		mov	r2, r0
 12215 0214 124B     		ldr	r3, .L627
 12216 0216 DA60     		str	r2, [r3, #12]
3284:bluetooth_rxtx.c **** 
3285:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
3286:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 12217              		.loc 1 3286 0
 12218 0218 7B68     		ldr	r3, [r7, #4]
 12219 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 12220 021c 104B     		ldr	r3, .L627
 12221 021e 83F82220 		strb	r2, [r3, #34]
3287:bluetooth_rxtx.c **** 
3288:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
3289:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 12222              		.loc 1 3289 0
 12223 0222 7B68     		ldr	r3, [r7, #4]
 12224 0224 1A33     		adds	r3, r3, #26
 12225 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12226 0228 9AB2     		uxth	r2, r3
 12227 022a 0D4B     		ldr	r3, .L627
 12228 022c 9A84     		strh	r2, [r3, #36]	@ movhi
3290:bluetooth_rxtx.c **** 
3291:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
3292:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 12229              		.loc 1 3292 0
 12230 022e 7B68     		ldr	r3, [r7, #4]
 12231 0230 1C33     		adds	r3, r3, #28
 12232 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12233 0234 9AB2     		uxth	r2, r3
 12234 0236 0A4B     		ldr	r3, .L627
 12235 0238 DA83     		strh	r2, [r3, #30]	@ movhi
3293:bluetooth_rxtx.c **** 
3294:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
3295:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 12236              		.loc 1 3295 0
 12237 023a 7B68     		ldr	r3, [r7, #4]
 12238 023c 2733     		adds	r3, r3, #39
 12239 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12240 0240 03F01F03 		and	r3, r3, #31
 12241 0244 DAB2     		uxtb	r2, r3
 12242 0246 064B     		ldr	r3, .L627
 12243 0248 9A75     		strb	r2, [r3, #22]
ARM GAS  /tmp/cctJTvh1.s 			page 273


3296:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 12244              		.loc 1 3296 0
 12245 024a 054B     		ldr	r3, .L627
 12246 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 12247 024e 044B     		ldr	r3, .L627
 12248 0250 5A75     		strb	r2, [r3, #21]
3297:bluetooth_rxtx.c **** 
3298:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
3299:bluetooth_rxtx.c **** 			do_hop = 1;
 12249              		.loc 1 3299 0
 12250 0252 084B     		ldr	r3, .L627+20
 12251 0254 0122     		movs	r2, #1
 12252 0256 1A70     		strb	r2, [r3]
 12253              	.L617:
 12254              	.LBE30:
3300:bluetooth_rxtx.c **** 		}
3301:bluetooth_rxtx.c **** 	}
3302:bluetooth_rxtx.c **** }
 12255              		.loc 1 3302 0
 12256 0258 2837     		adds	r7, r7, #40
 12257              		.cfi_def_cfa_offset 8
 12258 025a BD46     		mov	sp, r7
 12259              		.cfi_def_cfa_register 13
 12260              		@ sp needed
 12261 025c 80BD     		pop	{r7, pc}
 12262              	.L628:
 12263 025e 00BF     		.align	2
 12264              	.L627:
 12265 0260 00000000 		.word	le
 12266 0264 00000000 		.word	clkn
 12267 0268 00000000 		.word	jam_mode
 12268 026c 00000000 		.word	le_jam_count
 12269 0270 34000000 		.word	le+52
 12270 0274 00000000 		.word	do_hop
 12271              		.cfi_endproc
 12272              	.LFE47:
 12274              		.section	.text.bt_follow_le,"ax",%progbits
 12275              		.align	2
 12276              		.global	bt_follow_le
 12277              		.thumb
 12278              		.thumb_func
 12280              	bt_follow_le:
 12281              	.LFB48:
3303:bluetooth_rxtx.c **** 
3304:bluetooth_rxtx.c **** void bt_follow_le() {
 12282              		.loc 1 3304 0
 12283              		.cfi_startproc
 12284              		@ args = 0, pretend = 0, frame = 0
 12285              		@ frame_needed = 1, uses_anonymous_args = 0
 12286 0000 80B5     		push	{r7, lr}
 12287              		.cfi_def_cfa_offset 8
 12288              		.cfi_offset 7, -8
 12289              		.cfi_offset 14, -4
 12290 0002 00AF     		add	r7, sp, #0
 12291              		.cfi_def_cfa_register 7
3305:bluetooth_rxtx.c **** 	reset_le();
 12292              		.loc 1 3305 0
ARM GAS  /tmp/cctJTvh1.s 			page 274


 12293 0004 FFF7FEFF 		bl	reset_le
3306:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 12294              		.loc 1 3306 0
 12295 0008 044B     		ldr	r3, .L630
 12296 000a 054A     		ldr	r2, .L630+4
 12297 000c 1A60     		str	r2, [r3]
3307:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 12298              		.loc 1 3307 0
 12299 000e 0920     		movs	r0, #9
 12300 0010 FFF7FEFF 		bl	bt_le_sync
3308:bluetooth_rxtx.c **** 
3309:bluetooth_rxtx.c **** 	/* old non-sync mode
3310:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
3311:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
3312:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
3313:bluetooth_rxtx.c **** 	*/
3314:bluetooth_rxtx.c **** 
3315:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 12301              		.loc 1 3315 0
 12302 0014 034B     		ldr	r3, .L630+8
 12303 0016 0022     		movs	r2, #0
 12304 0018 1A70     		strb	r2, [r3]
3316:bluetooth_rxtx.c **** }
 12305              		.loc 1 3316 0
 12306 001a 80BD     		pop	{r7, pc}
 12307              	.L631:
 12308              		.align	2
 12309              	.L630:
 12310 001c 00000000 		.word	packet_cb
 12311 0020 00000000 		.word	connection_follow_cb
 12312 0024 00000000 		.word	mode
 12313              		.cfi_endproc
 12314              	.LFE48:
 12316              		.section	.text.le_promisc_state,"ax",%progbits
 12317              		.align	2
 12318              		.global	le_promisc_state
 12319              		.thumb
 12320              		.thumb_func
 12322              	le_promisc_state:
 12323              	.LFB49:
3317:bluetooth_rxtx.c **** 
3318:bluetooth_rxtx.c **** // issue state change message
3319:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 12324              		.loc 1 3319 0
 12325              		.cfi_startproc
 12326              		@ args = 0, pretend = 0, frame = 72
 12327              		@ frame_needed = 1, uses_anonymous_args = 0
 12328 0000 80B5     		push	{r7, lr}
 12329              		.cfi_def_cfa_offset 8
 12330              		.cfi_offset 7, -8
 12331              		.cfi_offset 14, -4
 12332 0002 92B0     		sub	sp, sp, #72
 12333              		.cfi_def_cfa_offset 80
 12334 0004 00AF     		add	r7, sp, #0
 12335              		.cfi_def_cfa_register 7
 12336 0006 0346     		mov	r3, r0
 12337 0008 B960     		str	r1, [r7, #8]
ARM GAS  /tmp/cctJTvh1.s 			page 275


 12338 000a 7A60     		str	r2, [r7, #4]
 12339 000c FB73     		strb	r3, [r7, #15]
3320:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 12340              		.loc 1 3320 0
 12341 000e 07F11403 		add	r3, r7, #20
 12342 0012 0022     		movs	r2, #0
 12343 0014 1A60     		str	r2, [r3]
 12344 0016 0433     		adds	r3, r3, #4
 12345 0018 0022     		movs	r2, #0
 12346 001a 1A60     		str	r2, [r3]
 12347 001c 0433     		adds	r3, r3, #4
 12348 001e 0022     		movs	r2, #0
 12349 0020 1A60     		str	r2, [r3]
 12350 0022 0433     		adds	r3, r3, #4
 12351 0024 0022     		movs	r2, #0
 12352 0026 1A60     		str	r2, [r3]
 12353 0028 0433     		adds	r3, r3, #4
 12354 002a 0022     		movs	r2, #0
 12355 002c 1A60     		str	r2, [r3]
 12356 002e 0433     		adds	r3, r3, #4
 12357 0030 0022     		movs	r2, #0
 12358 0032 1A60     		str	r2, [r3]
 12359 0034 0433     		adds	r3, r3, #4
 12360 0036 0022     		movs	r2, #0
 12361 0038 1A60     		str	r2, [r3]
 12362 003a 0433     		adds	r3, r3, #4
 12363 003c 0022     		movs	r2, #0
 12364 003e 1A60     		str	r2, [r3]
 12365 0040 0433     		adds	r3, r3, #4
 12366 0042 0022     		movs	r2, #0
 12367 0044 1A60     		str	r2, [r3]
 12368 0046 0433     		adds	r3, r3, #4
 12369 0048 0022     		movs	r2, #0
 12370 004a 1A60     		str	r2, [r3]
 12371 004c 0433     		adds	r3, r3, #4
 12372 004e 0022     		movs	r2, #0
 12373 0050 1A60     		str	r2, [r3]
 12374 0052 0433     		adds	r3, r3, #4
 12375 0054 0022     		movs	r2, #0
 12376 0056 1A60     		str	r2, [r3]
 12377 0058 0433     		adds	r3, r3, #4
 12378 005a 0022     		movs	r2, #0
 12379 005c 1A80     		strh	r2, [r3]	@ movhi
 12380 005e 0233     		adds	r3, r3, #2
3321:bluetooth_rxtx.c **** 	if (len > 49)
 12381              		.loc 1 3321 0
 12382 0060 7B68     		ldr	r3, [r7, #4]
 12383 0062 312B     		cmp	r3, #49
 12384 0064 01D9     		bls	.L633
3322:bluetooth_rxtx.c **** 		len = 49;
 12385              		.loc 1 3322 0
 12386 0066 3123     		movs	r3, #49
 12387 0068 7B60     		str	r3, [r7, #4]
 12388              	.L633:
3323:bluetooth_rxtx.c **** 
3324:bluetooth_rxtx.c **** 	buf[0] = type;
 12389              		.loc 1 3324 0
ARM GAS  /tmp/cctJTvh1.s 			page 276


 12390 006a FB7B     		ldrb	r3, [r7, #15]
 12391 006c 3B75     		strb	r3, [r7, #20]
3325:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 12392              		.loc 1 3325 0
 12393 006e 07F11403 		add	r3, r7, #20
 12394 0072 0133     		adds	r3, r3, #1
 12395 0074 1846     		mov	r0, r3
 12396 0076 B968     		ldr	r1, [r7, #8]
 12397 0078 7A68     		ldr	r2, [r7, #4]
 12398 007a FFF7FEFF 		bl	memcpy
3326:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 12399              		.loc 1 3326 0
 12400 007e 07F11403 		add	r3, r7, #20
 12401 0082 0520     		movs	r0, #5
 12402 0084 1946     		mov	r1, r3
 12403 0086 FFF7FEFF 		bl	enqueue
3327:bluetooth_rxtx.c **** }
 12404              		.loc 1 3327 0
 12405 008a 4837     		adds	r7, r7, #72
 12406              		.cfi_def_cfa_offset 8
 12407 008c BD46     		mov	sp, r7
 12408              		.cfi_def_cfa_register 13
 12409              		@ sp needed
 12410 008e 80BD     		pop	{r7, pc}
 12411              		.cfi_endproc
 12412              	.LFE49:
 12414              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 12415              		.align	2
 12416              		.global	promisc_recover_hop_increment
 12417              		.thumb
 12418              		.thumb_func
 12420              	promisc_recover_hop_increment:
 12421              	.LFB50:
3328:bluetooth_rxtx.c **** 
3329:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
3330:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
3331:bluetooth_rxtx.c **** 
3332:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 12422              		.loc 1 3332 0
 12423              		.cfi_startproc
 12424              		@ args = 0, pretend = 0, frame = 16
 12425              		@ frame_needed = 1, uses_anonymous_args = 0
 12426 0000 80B5     		push	{r7, lr}
 12427              		.cfi_def_cfa_offset 8
 12428              		.cfi_offset 7, -8
 12429              		.cfi_offset 14, -4
 12430 0002 84B0     		sub	sp, sp, #16
 12431              		.cfi_def_cfa_offset 24
 12432 0004 00AF     		add	r7, sp, #0
 12433              		.cfi_def_cfa_register 7
 12434 0006 7860     		str	r0, [r7, #4]
3333:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
3334:bluetooth_rxtx.c **** 	if (channel == 2404) {
 12435              		.loc 1 3334 0
 12436 0008 554B     		ldr	r3, .L641
 12437 000a 1B88     		ldrh	r3, [r3]	@ movhi
 12438 000c 9BB2     		uxth	r3, r3
ARM GAS  /tmp/cctJTvh1.s 			page 277


 12439 000e 40F66412 		movw	r2, #2404
 12440 0012 9342     		cmp	r3, r2
 12441 0014 14D1     		bne	.L635
3335:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 12442              		.loc 1 3335 0
 12443 0016 534B     		ldr	r3, .L641+4
 12444 0018 1B68     		ldr	r3, [r3]
 12445 001a C3F31303 		ubfx	r3, r3, #0, #20
 12446 001e 40F63542 		movw	r2, #3125
 12447 0022 02FB03F2 		mul	r2, r2, r3
 12448 0026 504B     		ldr	r3, .L641+8
 12449 0028 1B68     		ldr	r3, [r3]
 12450 002a 1344     		add	r3, r3, r2
 12451 002c 4F4A     		ldr	r2, .L641+12
 12452 002e 1360     		str	r3, [r2]
3336:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 12453              		.loc 1 3336 0
 12454 0030 4F4B     		ldr	r3, .L641+16
 12455 0032 40F66612 		movw	r2, #2406
 12456 0036 1A80     		strh	r2, [r3]	@ movhi
3337:bluetooth_rxtx.c **** 		do_hop = 1;
 12457              		.loc 1 3337 0
 12458 0038 4E4B     		ldr	r3, .L641+20
 12459 003a 0122     		movs	r2, #1
 12460 003c 1A70     		strb	r2, [r3]
 12461 003e 8BE0     		b	.L634
 12462              	.L635:
3338:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 12463              		.loc 1 3338 0
 12464 0040 474B     		ldr	r3, .L641
 12465 0042 1B88     		ldrh	r3, [r3]	@ movhi
 12466 0044 9BB2     		uxth	r3, r3
 12467 0046 40F66612 		movw	r2, #2406
 12468 004a 9342     		cmp	r3, r2
 12469 004c 7DD1     		bne	.L637
 12470              	.LBB31:
3339:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 12471              		.loc 1 3339 0
 12472 004e 454B     		ldr	r3, .L641+4
 12473 0050 1B68     		ldr	r3, [r3]
 12474 0052 C3F31303 		ubfx	r3, r3, #0, #20
 12475 0056 40F63542 		movw	r2, #3125
 12476 005a 02FB03F2 		mul	r2, r2, r3
 12477 005e 424B     		ldr	r3, .L641+8
 12478 0060 1B68     		ldr	r3, [r3]
 12479 0062 1344     		add	r3, r3, r2
 12480 0064 FB60     		str	r3, [r7, #12]
3340:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 12481              		.loc 1 3340 0
 12482 0066 414B     		ldr	r3, .L641+12
 12483 0068 1B68     		ldr	r3, [r3]
 12484 006a FA68     		ldr	r2, [r7, #12]
 12485 006c 9A42     		cmp	r2, r3
 12486 006e 05D2     		bcs	.L638
3341:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 12487              		.loc 1 3341 0
 12488 0070 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cctJTvh1.s 			page 278


 12489 0072 03F14343 		add	r3, r3, #-1023410176
 12490 0076 03F5A003 		add	r3, r3, #5242880
 12491 007a FB60     		str	r3, [r7, #12]
 12492              	.L638:
3342:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
3343:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 12493              		.loc 1 3343 0
 12494 007c 3B4B     		ldr	r3, .L641+12
 12495 007e 1B68     		ldr	r3, [r3]
 12496 0080 FA68     		ldr	r2, [r7, #12]
 12497 0082 D21A     		subs	r2, r2, r3
 12498 0084 3C4B     		ldr	r3, .L641+24
 12499 0086 DB8B     		ldrh	r3, [r3, #30]
 12500 0088 1946     		mov	r1, r3
 12501 008a 43F2D403 		movw	r3, #12500
 12502 008e 03FB01F3 		mul	r3, r3, r1
 12503 0092 D90F     		lsrs	r1, r3, #31
 12504 0094 0B44     		add	r3, r3, r1
 12505 0096 5B10     		asrs	r3, r3, #1
 12506 0098 1344     		add	r3, r3, r2
 12507 009a 374A     		ldr	r2, .L641+24
 12508 009c D28B     		ldrh	r2, [r2, #30]
 12509 009e 1146     		mov	r1, r2
 12510 00a0 43F2D402 		movw	r2, #12500
 12511 00a4 02FB01F2 		mul	r2, r2, r1
 12512 00a8 B3FBF2F3 		udiv	r3, r3, r2
 12513 00ac BB60     		str	r3, [r7, #8]
3344:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
3345:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 12514              		.loc 1 3345 0
 12515 00ae BB68     		ldr	r3, [r7, #8]
 12516 00b0 242B     		cmp	r3, #36
 12517 00b2 42D8     		bhi	.L639
3346:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
3347:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 12518              		.loc 1 3347 0
 12519 00b4 314A     		ldr	r2, .L641+28
 12520 00b6 BB68     		ldr	r3, [r7, #8]
 12521 00b8 1344     		add	r3, r3, r2
 12522 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 12523 00bc 2E4B     		ldr	r3, .L641+24
 12524 00be 9A75     		strb	r2, [r3, #22]
3348:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 12525              		.loc 1 3348 0
 12526 00c0 2D4B     		ldr	r3, .L641+24
 12527 00c2 DB8B     		ldrh	r3, [r3, #30]
 12528 00c4 5B08     		lsrs	r3, r3, #1
 12529 00c6 9AB2     		uxth	r2, r3
 12530 00c8 2B4B     		ldr	r3, .L641+24
 12531 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
3349:bluetooth_rxtx.c **** 			le.conn_count = 0;
 12532              		.loc 1 3349 0
 12533 00cc 2A4B     		ldr	r3, .L641+24
 12534 00ce 0022     		movs	r2, #0
 12535 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
3350:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 12536              		.loc 1 3350 0
ARM GAS  /tmp/cctJTvh1.s 			page 279


 12537 00d2 294B     		ldr	r3, .L641+24
 12538 00d4 0022     		movs	r2, #0
 12539 00d6 9A61     		str	r2, [r3, #24]
3351:bluetooth_rxtx.c **** 			do_hop = 0;
 12540              		.loc 1 3351 0
 12541 00d8 264B     		ldr	r3, .L641+20
 12542 00da 0022     		movs	r2, #0
 12543 00dc 1A70     		strb	r2, [r3]
3352:bluetooth_rxtx.c **** 			// Move on to regular connection following.
3353:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 12544              		.loc 1 3353 0
 12545 00de 264B     		ldr	r3, .L641+24
 12546 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 12547 00e2 5A1C     		adds	r2, r3, #1
 12548 00e4 264B     		ldr	r3, .L641+32
 12549 00e6 82FB0301 		smull	r0, r1, r2, r3
 12550 00ea 5318     		adds	r3, r2, r1
 12551 00ec 5911     		asrs	r1, r3, #5
 12552 00ee D317     		asrs	r3, r2, #31
 12553 00f0 C91A     		subs	r1, r1, r3
 12554 00f2 0B46     		mov	r3, r1
 12555 00f4 DB00     		lsls	r3, r3, #3
 12556 00f6 0B44     		add	r3, r3, r1
 12557 00f8 9B00     		lsls	r3, r3, #2
 12558 00fa 0B44     		add	r3, r3, r1
 12559 00fc D11A     		subs	r1, r2, r3
 12560 00fe CAB2     		uxtb	r2, r1
 12561 0100 1D4B     		ldr	r3, .L641+24
 12562 0102 5A75     		strb	r2, [r3, #21]
3354:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 12563              		.loc 1 3354 0
 12564 0104 1C4B     		ldr	r3, .L641+24
 12565 0106 0322     		movs	r2, #3
 12566 0108 1A75     		strb	r2, [r3, #20]
3355:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 12567              		.loc 1 3355 0
 12568 010a 1B4B     		ldr	r3, .L641+24
 12569 010c 0022     		movs	r2, #0
 12570 010e 1A61     		str	r2, [r3, #16]
3356:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 12571              		.loc 1 3356 0
 12572 0110 1C4B     		ldr	r3, .L641+36
 12573 0112 0322     		movs	r2, #3
 12574 0114 1A70     		strb	r2, [r3]
3357:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 12575              		.loc 1 3357 0
 12576 0116 1C4B     		ldr	r3, .L641+40
 12577 0118 1C4A     		ldr	r2, .L641+44
 12578 011a 1A60     		str	r2, [r3]
3358:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 12579              		.loc 1 3358 0
 12580 011c 0320     		movs	r0, #3
 12581 011e 1C49     		ldr	r1, .L641+48
 12582 0120 0122     		movs	r2, #1
 12583 0122 FFF7FEFF 		bl	le_promisc_state
3359:bluetooth_rxtx.c **** 
3360:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
ARM GAS  /tmp/cctJTvh1.s 			page 280


 12584              		.loc 1 3360 0
 12585 0126 1B4B     		ldr	r3, .L641+52
 12586 0128 1B78     		ldrb	r3, [r3]
 12587 012a DBB2     		uxtb	r3, r3
 12588 012c 002B     		cmp	r3, #0
 12589 012e 03D0     		beq	.L640
3361:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 12590              		.loc 1 3361 0
 12591 0130 194B     		ldr	r3, .L641+56
 12592 0132 2822     		movs	r2, #40
 12593 0134 1A60     		str	r2, [r3]
3362:bluetooth_rxtx.c **** 
3363:bluetooth_rxtx.c **** 			return;
 12594              		.loc 1 3363 0
 12595 0136 0FE0     		b	.L634
 12596              	.L640:
 12597 0138 0EE0     		b	.L634
 12598              	.L639:
3364:bluetooth_rxtx.c **** 		}
3365:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 12599              		.loc 1 3365 0
 12600 013a 0D4B     		ldr	r3, .L641+16
 12601 013c 40F66412 		movw	r2, #2404
 12602 0140 1A80     		strh	r2, [r3]	@ movhi
3366:bluetooth_rxtx.c **** 		do_hop = 1;
 12603              		.loc 1 3366 0
 12604 0142 0C4B     		ldr	r3, .L641+20
 12605 0144 0122     		movs	r2, #1
 12606 0146 1A70     		strb	r2, [r3]
 12607              	.LBE31:
 12608 0148 06E0     		b	.L634
 12609              	.L637:
3367:bluetooth_rxtx.c **** 	}
3368:bluetooth_rxtx.c **** 	else {
3369:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 12610              		.loc 1 3369 0
 12611 014a 094B     		ldr	r3, .L641+16
 12612 014c 40F66412 		movw	r2, #2404
 12613 0150 1A80     		strh	r2, [r3]	@ movhi
3370:bluetooth_rxtx.c **** 		do_hop = 1;
 12614              		.loc 1 3370 0
 12615 0152 084B     		ldr	r3, .L641+20
 12616 0154 0122     		movs	r2, #1
 12617 0156 1A70     		strb	r2, [r3]
 12618              	.L634:
3371:bluetooth_rxtx.c **** 	}
3372:bluetooth_rxtx.c **** }
 12619              		.loc 1 3372 0
 12620 0158 1037     		adds	r7, r7, #16
 12621              		.cfi_def_cfa_offset 8
 12622 015a BD46     		mov	sp, r7
 12623              		.cfi_def_cfa_register 13
 12624              		@ sp needed
 12625 015c 80BD     		pop	{r7, pc}
 12626              	.L642:
 12627 015e 00BF     		.align	2
 12628              	.L641:
ARM GAS  /tmp/cctJTvh1.s 			page 281


 12629 0160 00000000 		.word	channel
 12630 0164 00000000 		.word	clkn
 12631 0168 08400040 		.word	1073758216
 12632 016c D8000000 		.word	first_ts.5182
 12633 0170 00000000 		.word	hop_direct_channel
 12634 0174 00000000 		.word	do_hop
 12635 0178 00000000 		.word	le
 12636 017c E8000000 		.word	hop_interval_lut
 12637 0180 A7C867DD 		.word	-580400985
 12638 0184 00000000 		.word	hop_mode
 12639 0188 00000000 		.word	packet_cb
 12640 018c 00000000 		.word	connection_follow_cb
 12641 0190 16000000 		.word	le+22
 12642 0194 00000000 		.word	jam_mode
 12643 0198 00000000 		.word	le_jam_count
 12644              		.cfi_endproc
 12645              	.LFE50:
 12647              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 12648              		.align	2
 12649              		.global	promisc_recover_hop_interval
 12650              		.thumb
 12651              		.thumb_func
 12653              	promisc_recover_hop_interval:
 12654              	.LFB51:
3373:bluetooth_rxtx.c **** 
3374:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 12655              		.loc 1 3374 0
 12656              		.cfi_startproc
 12657              		@ args = 0, pretend = 0, frame = 24
 12658              		@ frame_needed = 1, uses_anonymous_args = 0
 12659 0000 80B5     		push	{r7, lr}
 12660              		.cfi_def_cfa_offset 8
 12661              		.cfi_offset 7, -8
 12662              		.cfi_offset 14, -4
 12663 0002 86B0     		sub	sp, sp, #24
 12664              		.cfi_def_cfa_offset 32
 12665 0004 00AF     		add	r7, sp, #0
 12666              		.cfi_def_cfa_register 7
 12667 0006 7860     		str	r0, [r7, #4]
3375:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
3376:bluetooth_rxtx.c **** 
3377:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 12668              		.loc 1 3377 0
 12669 0008 334B     		ldr	r3, .L651
 12670 000a 1B68     		ldr	r3, [r3]
 12671 000c C3F31303 		ubfx	r3, r3, #0, #20
 12672 0010 40F63542 		movw	r2, #3125
 12673 0014 02FB03F2 		mul	r2, r2, r3
 12674 0018 304B     		ldr	r3, .L651+4
 12675 001a 1B68     		ldr	r3, [r3]
 12676 001c 1344     		add	r3, r3, r2
 12677 001e 7B61     		str	r3, [r7, #20]
3378:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 12678              		.loc 1 3378 0
 12679 0020 2F4B     		ldr	r3, .L651+8
 12680 0022 1B68     		ldr	r3, [r3]
 12681 0024 7A69     		ldr	r2, [r7, #20]
ARM GAS  /tmp/cctJTvh1.s 			page 282


 12682 0026 9A42     		cmp	r2, r3
 12683 0028 03D2     		bcs	.L644
3379:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 12684              		.loc 1 3379 0
 12685 002a 7A69     		ldr	r2, [r7, #20]
 12686 002c 2D4B     		ldr	r3, .L651+12
 12687 002e 1344     		add	r3, r3, r2
 12688 0030 7B61     		str	r3, [r7, #20]
 12689              	.L644:
3380:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 12690              		.loc 1 3380 0
 12691 0032 2B4B     		ldr	r3, .L651+8
 12692 0034 1B68     		ldr	r3, [r3]
 12693 0036 7A69     		ldr	r2, [r7, #20]
 12694 0038 D31A     		subs	r3, r2, r3
 12695 003a 3B61     		str	r3, [r7, #16]
3381:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
3382:bluetooth_rxtx.c **** 
3383:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
3384:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 12696              		.loc 1 3384 0
 12697 003c 3B69     		ldr	r3, [r7, #16]
 12698 003e 46F2A712 		movw	r2, #24999
 12699 0042 9342     		cmp	r3, r2
 12700 0044 00D8     		bhi	.L645
3385:bluetooth_rxtx.c **** 		return;
 12701              		.loc 1 3385 0
 12702 0046 43E0     		b	.L643
 12703              	.L645:
3386:bluetooth_rxtx.c **** 
3387:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 12704              		.loc 1 3387 0
 12705 0048 274B     		ldr	r3, .L651+16
 12706 004a D3F80021 		ldr	r2, [r3, #256]
 12707 004e 3B69     		ldr	r3, [r7, #16]
 12708 0050 9A42     		cmp	r2, r3
 12709 0052 03D9     		bls	.L647
3388:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 12710              		.loc 1 3388 0
 12711 0054 244A     		ldr	r2, .L651+16
 12712 0056 3B69     		ldr	r3, [r7, #16]
 12713 0058 C2F80031 		str	r3, [r2, #256]
 12714              	.L647:
3389:bluetooth_rxtx.c **** 
3390:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 12715              		.loc 1 3390 0
 12716 005c 224B     		ldr	r3, .L651+16
 12717 005e D3F80031 		ldr	r3, [r3, #256]
 12718 0062 03F56133 		add	r3, r3, #230400
 12719 0066 03F25233 		addw	r3, r3, #850
 12720 006a 204A     		ldr	r2, .L651+20
 12721 006c A2FB0323 		umull	r2, r3, r2, r3
 12722 0070 9B0C     		lsrs	r3, r3, #18
 12723 0072 FB81     		strh	r3, [r7, #14]	@ movhi
3391:bluetooth_rxtx.c **** 
3392:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 12724              		.loc 1 3392 0
ARM GAS  /tmp/cctJTvh1.s 			page 283


 12725 0074 1E4B     		ldr	r3, .L651+24
 12726 0076 DB8B     		ldrh	r3, [r3, #30]
 12727 0078 FA89     		ldrh	r2, [r7, #14]
 12728 007a 9A42     		cmp	r2, r3
 12729 007c 1ED1     		bne	.L648
3393:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
3394:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 12730              		.loc 1 3394 0
 12731 007e 1A4B     		ldr	r3, .L651+16
 12732 0080 D3F80431 		ldr	r3, [r3, #260]
 12733 0084 0133     		adds	r3, r3, #1
 12734 0086 184A     		ldr	r2, .L651+16
 12735 0088 C2F80431 		str	r3, [r2, #260]
3395:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 12736              		.loc 1 3395 0
 12737 008c 164B     		ldr	r3, .L651+16
 12738 008e D3F80431 		ldr	r3, [r3, #260]
 12739 0092 052B     		cmp	r3, #5
 12740 0094 19D1     		bne	.L650
3396:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 12741              		.loc 1 3396 0
 12742 0096 174B     		ldr	r3, .L651+28
 12743 0098 174A     		ldr	r2, .L651+32
 12744 009a 1A60     		str	r2, [r3]
3397:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 12745              		.loc 1 3397 0
 12746 009c 174B     		ldr	r3, .L651+36
 12747 009e 40F66412 		movw	r2, #2404
 12748 00a2 1A80     		strh	r2, [r3]	@ movhi
3398:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 12749              		.loc 1 3398 0
 12750 00a4 164B     		ldr	r3, .L651+40
 12751 00a6 0422     		movs	r2, #4
 12752 00a8 1A70     		strb	r2, [r3]
3399:bluetooth_rxtx.c **** 			do_hop = 1;
 12753              		.loc 1 3399 0
 12754 00aa 164B     		ldr	r3, .L651+44
 12755 00ac 0122     		movs	r2, #1
 12756 00ae 1A70     		strb	r2, [r3]
3400:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 12757              		.loc 1 3400 0
 12758 00b0 0220     		movs	r0, #2
 12759 00b2 1549     		ldr	r1, .L651+48
 12760 00b4 0222     		movs	r2, #2
 12761 00b6 FFF7FEFF 		bl	le_promisc_state
 12762 00ba 06E0     		b	.L650
 12763              	.L648:
3401:bluetooth_rxtx.c **** 		}
3402:bluetooth_rxtx.c **** 	} else {
3403:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 12764              		.loc 1 3403 0
 12765 00bc 0C4A     		ldr	r2, .L651+24
 12766 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 12767 00c0 D383     		strh	r3, [r2, #30]	@ movhi
3404:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 12768              		.loc 1 3404 0
 12769 00c2 094B     		ldr	r3, .L651+16
ARM GAS  /tmp/cctJTvh1.s 			page 284


 12770 00c4 0022     		movs	r2, #0
 12771 00c6 C3F80421 		str	r2, [r3, #260]
 12772              	.L650:
3405:bluetooth_rxtx.c **** 	}
3406:bluetooth_rxtx.c **** 
3407:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 12773              		.loc 1 3407 0
 12774 00ca 054A     		ldr	r2, .L651+8
 12775 00cc 7B69     		ldr	r3, [r7, #20]
 12776 00ce 1360     		str	r3, [r2]
 12777              	.L643:
3408:bluetooth_rxtx.c **** }
 12778              		.loc 1 3408 0
 12779 00d0 1837     		adds	r7, r7, #24
 12780              		.cfi_def_cfa_offset 8
 12781 00d2 BD46     		mov	sp, r7
 12782              		.cfi_def_cfa_register 13
 12783              		@ sp needed
 12784 00d4 80BD     		pop	{r7, pc}
 12785              	.L652:
 12786 00d6 00BF     		.align	2
 12787              	.L651:
 12788 00d8 00000000 		.word	clkn
 12789 00dc 08400040 		.word	1073758216
 12790 00e0 DC000000 		.word	prev_clk.5188
 12791 00e4 C0ABC6C2 		.word	-1027167296
 12792 00e8 00000000 		.word	le_promisc
 12793 00ec C1A91991 		.word	-1860589119
 12794 00f0 00000000 		.word	le
 12795 00f4 00000000 		.word	packet_cb
 12796 00f8 00000000 		.word	promisc_recover_hop_increment
 12797 00fc 00000000 		.word	hop_direct_channel
 12798 0100 00000000 		.word	hop_mode
 12799 0104 00000000 		.word	do_hop
 12800 0108 1E000000 		.word	le+30
 12801              		.cfi_endproc
 12802              	.LFE51:
 12804              		.section	.text.promisc_follow_cb,"ax",%progbits
 12805              		.align	2
 12806              		.global	promisc_follow_cb
 12807              		.thumb
 12808              		.thumb_func
 12810              	promisc_follow_cb:
 12811              	.LFB52:
3409:bluetooth_rxtx.c **** 
3410:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 12812              		.loc 1 3410 0
 12813              		.cfi_startproc
 12814              		@ args = 0, pretend = 0, frame = 16
 12815              		@ frame_needed = 1, uses_anonymous_args = 0
 12816 0000 80B5     		push	{r7, lr}
 12817              		.cfi_def_cfa_offset 8
 12818              		.cfi_offset 7, -8
 12819              		.cfi_offset 14, -4
 12820 0002 84B0     		sub	sp, sp, #16
 12821              		.cfi_def_cfa_offset 24
 12822 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/cctJTvh1.s 			page 285


 12823              		.cfi_def_cfa_register 7
 12824 0006 7860     		str	r0, [r7, #4]
3411:bluetooth_rxtx.c **** 	int i;
3412:bluetooth_rxtx.c **** 
3413:bluetooth_rxtx.c **** 	// get the CRCInit
3414:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 12825              		.loc 1 3414 0
 12826 0008 284B     		ldr	r3, .L657
 12827 000a 1B69     		ldr	r3, [r3, #16]
 12828 000c 002B     		cmp	r3, #0
 12829 000e 49D1     		bne	.L653
 12830              		.loc 1 3414 0 is_stmt 0 discriminator 1
 12831 0010 7B68     		ldr	r3, [r7, #4]
 12832 0012 0433     		adds	r3, r3, #4
 12833 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12834 0016 012B     		cmp	r3, #1
 12835 0018 44D1     		bne	.L653
 12836              		.loc 1 3414 0 discriminator 2
 12837 001a 7B68     		ldr	r3, [r7, #4]
 12838 001c 0533     		adds	r3, r3, #5
 12839 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12840 0020 002B     		cmp	r3, #0
 12841 0022 3FD1     		bne	.L653
 12842              	.LBB32:
3415:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 12843              		.loc 1 3415 0 is_stmt 1
 12844 0024 7B68     		ldr	r3, [r7, #4]
 12845 0026 0833     		adds	r3, r3, #8
 12846 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12847 002a 1A04     		lsls	r2, r3, #16
 12848 002c 7B68     		ldr	r3, [r7, #4]
 12849 002e 0733     		adds	r3, r3, #7
 12850 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 12851 0032 1B02     		lsls	r3, r3, #8
 12852 0034 1343     		orrs	r3, r3, r2
 12853 0036 7A68     		ldr	r2, [r7, #4]
 12854 0038 0632     		adds	r2, r2, #6
 12855 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 12856 003c 1343     		orrs	r3, r3, r2
 12857 003e BB60     		str	r3, [r7, #8]
3416:bluetooth_rxtx.c **** 
3417:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 12858              		.loc 1 3417 0
 12859 0040 7B68     		ldr	r3, [r7, #4]
 12860 0042 0433     		adds	r3, r3, #4
 12861 0044 B868     		ldr	r0, [r7, #8]
 12862 0046 1946     		mov	r1, r3
 12863 0048 0222     		movs	r2, #2
 12864 004a FFF7FEFF 		bl	btle_reverse_crc
 12865 004e 0246     		mov	r2, r0
 12866 0050 164B     		ldr	r3, .L657
 12867 0052 9A60     		str	r2, [r3, #8]
3418:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 12868              		.loc 1 3418 0
 12869 0054 154B     		ldr	r3, .L657
 12870 0056 0022     		movs	r2, #0
 12871 0058 DA60     		str	r2, [r3, #12]
ARM GAS  /tmp/cctJTvh1.s 			page 286


3419:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 12872              		.loc 1 3419 0
 12873 005a 0023     		movs	r3, #0
 12874 005c FB60     		str	r3, [r7, #12]
 12875 005e 13E0     		b	.L655
 12876              	.L656:
3420:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 12877              		.loc 1 3420 0 discriminator 3
 12878 0060 124B     		ldr	r3, .L657
 12879 0062 DA68     		ldr	r2, [r3, #12]
 12880 0064 114B     		ldr	r3, .L657
 12881 0066 9968     		ldr	r1, [r3, #8]
 12882 0068 FB68     		ldr	r3, [r7, #12]
 12883 006a 21FA03F3 		lsr	r3, r1, r3
 12884 006e 03F00101 		and	r1, r3, #1
 12885 0072 FB68     		ldr	r3, [r7, #12]
 12886 0074 C3F11703 		rsb	r3, r3, #23
 12887 0078 01FA03F3 		lsl	r3, r1, r3
 12888 007c 1343     		orrs	r3, r3, r2
 12889 007e 0B4A     		ldr	r2, .L657
 12890 0080 D360     		str	r3, [r2, #12]
3419:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 12891              		.loc 1 3419 0 discriminator 3
 12892 0082 FB68     		ldr	r3, [r7, #12]
 12893 0084 0133     		adds	r3, r3, #1
 12894 0086 FB60     		str	r3, [r7, #12]
 12895              	.L655:
3419:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 12896              		.loc 1 3419 0 is_stmt 0 discriminator 1
 12897 0088 FB68     		ldr	r3, [r7, #12]
 12898 008a 172B     		cmp	r3, #23
 12899 008c E8DD     		ble	.L656
3421:bluetooth_rxtx.c **** 
3422:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 12900              		.loc 1 3422 0 is_stmt 1
 12901 008e 074B     		ldr	r3, .L657
 12902 0090 0122     		movs	r2, #1
 12903 0092 1A61     		str	r2, [r3, #16]
3423:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 12904              		.loc 1 3423 0
 12905 0094 064B     		ldr	r3, .L657+4
 12906 0096 074A     		ldr	r2, .L657+8
 12907 0098 1A60     		str	r2, [r3]
3424:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 12908              		.loc 1 3424 0
 12909 009a 0120     		movs	r0, #1
 12910 009c 0649     		ldr	r1, .L657+12
 12911 009e 0322     		movs	r2, #3
 12912 00a0 FFF7FEFF 		bl	le_promisc_state
 12913              	.L653:
 12914              	.LBE32:
3425:bluetooth_rxtx.c **** 	}
3426:bluetooth_rxtx.c **** }
 12915              		.loc 1 3426 0
 12916 00a4 1037     		adds	r7, r7, #16
 12917              		.cfi_def_cfa_offset 8
 12918 00a6 BD46     		mov	sp, r7
ARM GAS  /tmp/cctJTvh1.s 			page 287


 12919              		.cfi_def_cfa_register 13
 12920              		@ sp needed
 12921 00a8 80BD     		pop	{r7, pc}
 12922              	.L658:
 12923 00aa 00BF     		.align	2
 12924              	.L657:
 12925 00ac 00000000 		.word	le
 12926 00b0 00000000 		.word	packet_cb
 12927 00b4 00000000 		.word	promisc_recover_hop_interval
 12928 00b8 08000000 		.word	le+8
 12929              		.cfi_endproc
 12930              	.LFE52:
 12932              		.section	.text.see_aa,"ax",%progbits
 12933              		.align	2
 12934              		.global	see_aa
 12935              		.thumb
 12936              		.thumb_func
 12938              	see_aa:
 12939              	.LFB53:
3427:bluetooth_rxtx.c **** 
3428:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
3429:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 12940              		.loc 1 3429 0
 12941              		.cfi_startproc
 12942              		@ args = 0, pretend = 0, frame = 24
 12943              		@ frame_needed = 1, uses_anonymous_args = 0
 12944              		@ link register save eliminated.
 12945 0000 80B4     		push	{r7}
 12946              		.cfi_def_cfa_offset 4
 12947              		.cfi_offset 7, -4
 12948 0002 87B0     		sub	sp, sp, #28
 12949              		.cfi_def_cfa_offset 32
 12950 0004 00AF     		add	r7, sp, #0
 12951              		.cfi_def_cfa_register 7
 12952 0006 7860     		str	r0, [r7, #4]
3430:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 12953              		.loc 1 3430 0
 12954 0008 4FF0FF33 		mov	r3, #-1
 12955 000c 3B61     		str	r3, [r7, #16]
 12956 000e 4FF0FF33 		mov	r3, #-1
 12957 0012 FB60     		str	r3, [r7, #12]
3431:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 12958              		.loc 1 3431 0
 12959 0014 0023     		movs	r3, #0
 12960 0016 7B61     		str	r3, [r7, #20]
 12961 0018 15E0     		b	.L660
 12962              	.L663:
3432:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 12963              		.loc 1 3432 0
 12964 001a 224A     		ldr	r2, .L668
 12965 001c 7B69     		ldr	r3, [r7, #20]
 12966 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 12967 0022 7B68     		ldr	r3, [r7, #4]
 12968 0024 9A42     		cmp	r2, r3
 12969 0026 0BD1     		bne	.L661
3433:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 12970              		.loc 1 3433 0
ARM GAS  /tmp/cctJTvh1.s 			page 288


 12971 0028 1E4A     		ldr	r2, .L668
 12972 002a 7B69     		ldr	r3, [r7, #20]
 12973 002c DB00     		lsls	r3, r3, #3
 12974 002e 1344     		add	r3, r3, r2
 12975 0030 5B68     		ldr	r3, [r3, #4]
 12976 0032 5A1C     		adds	r2, r3, #1
 12977 0034 1B49     		ldr	r1, .L668
 12978 0036 7B69     		ldr	r3, [r7, #20]
 12979 0038 DB00     		lsls	r3, r3, #3
 12980 003a 0B44     		add	r3, r3, r1
 12981 003c 5A60     		str	r2, [r3, #4]
3434:bluetooth_rxtx.c **** 			return;
 12982              		.loc 1 3434 0
 12983 003e 2CE0     		b	.L659
 12984              	.L661:
3431:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 12985              		.loc 1 3431 0 discriminator 2
 12986 0040 7B69     		ldr	r3, [r7, #20]
 12987 0042 0133     		adds	r3, r3, #1
 12988 0044 7B61     		str	r3, [r7, #20]
 12989              	.L660:
3431:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 12990              		.loc 1 3431 0 is_stmt 0 discriminator 1
 12991 0046 7B69     		ldr	r3, [r7, #20]
 12992 0048 1F2B     		cmp	r3, #31
 12993 004a E6DD     		ble	.L663
3435:bluetooth_rxtx.c **** 		}
3436:bluetooth_rxtx.c **** 
3437:bluetooth_rxtx.c **** 	// evict someone
3438:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 12994              		.loc 1 3438 0 is_stmt 1
 12995 004c 0023     		movs	r3, #0
 12996 004e 7B61     		str	r3, [r7, #20]
 12997 0050 15E0     		b	.L664
 12998              	.L667:
3439:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 12999              		.loc 1 3439 0
 13000 0052 144A     		ldr	r2, .L668
 13001 0054 7B69     		ldr	r3, [r7, #20]
 13002 0056 DB00     		lsls	r3, r3, #3
 13003 0058 1344     		add	r3, r3, r2
 13004 005a 5A68     		ldr	r2, [r3, #4]
 13005 005c 3B69     		ldr	r3, [r7, #16]
 13006 005e 9A42     		cmp	r2, r3
 13007 0060 02DB     		blt	.L665
 13008              		.loc 1 3439 0 is_stmt 0 discriminator 1
 13009 0062 3B69     		ldr	r3, [r7, #16]
 13010 0064 002B     		cmp	r3, #0
 13011 0066 07DA     		bge	.L666
 13012              	.L665:
3440:bluetooth_rxtx.c **** 			killme = i;
 13013              		.loc 1 3440 0 is_stmt 1
 13014 0068 7B69     		ldr	r3, [r7, #20]
 13015 006a FB60     		str	r3, [r7, #12]
3441:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 13016              		.loc 1 3441 0
 13017 006c 0D4A     		ldr	r2, .L668
ARM GAS  /tmp/cctJTvh1.s 			page 289


 13018 006e 7B69     		ldr	r3, [r7, #20]
 13019 0070 DB00     		lsls	r3, r3, #3
 13020 0072 1344     		add	r3, r3, r2
 13021 0074 5B68     		ldr	r3, [r3, #4]
 13022 0076 3B61     		str	r3, [r7, #16]
 13023              	.L666:
3438:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 13024              		.loc 1 3438 0 discriminator 2
 13025 0078 7B69     		ldr	r3, [r7, #20]
 13026 007a 0133     		adds	r3, r3, #1
 13027 007c 7B61     		str	r3, [r7, #20]
 13028              	.L664:
3438:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 13029              		.loc 1 3438 0 is_stmt 0 discriminator 1
 13030 007e 7B69     		ldr	r3, [r7, #20]
 13031 0080 1F2B     		cmp	r3, #31
 13032 0082 E6DD     		ble	.L667
3442:bluetooth_rxtx.c **** 		}
3443:bluetooth_rxtx.c **** 
3444:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 13033              		.loc 1 3444 0 is_stmt 1
 13034 0084 0749     		ldr	r1, .L668
 13035 0086 FB68     		ldr	r3, [r7, #12]
 13036 0088 7A68     		ldr	r2, [r7, #4]
 13037 008a 41F83320 		str	r2, [r1, r3, lsl #3]
3445:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 13038              		.loc 1 3445 0
 13039 008e 054A     		ldr	r2, .L668
 13040 0090 FB68     		ldr	r3, [r7, #12]
 13041 0092 DB00     		lsls	r3, r3, #3
 13042 0094 1344     		add	r3, r3, r2
 13043 0096 0122     		movs	r2, #1
 13044 0098 5A60     		str	r2, [r3, #4]
 13045              	.L659:
3446:bluetooth_rxtx.c **** }
 13046              		.loc 1 3446 0
 13047 009a 1C37     		adds	r7, r7, #28
 13048              		.cfi_def_cfa_offset 4
 13049 009c BD46     		mov	sp, r7
 13050              		.cfi_def_cfa_register 13
 13051              		@ sp needed
 13052 009e 5DF8047B 		ldr	r7, [sp], #4
 13053              		.cfi_restore 7
 13054              		.cfi_def_cfa_offset 0
 13055 00a2 7047     		bx	lr
 13056              	.L669:
 13057              		.align	2
 13058              	.L668:
 13059 00a4 00000000 		.word	le_promisc
 13060              		.cfi_endproc
 13061              	.LFE53:
 13063              		.section	.rodata
 13064 08df 00       		.align	2
 13065              	.LC0:
 13066 08e0 01000000 		.word	1
 13067 08e4 01000000 		.word	1
 13068 08e8 01000000 		.word	1
ARM GAS  /tmp/cctJTvh1.s 			page 290


 13069 08ec 01000000 		.word	1
 13070              		.section	.text.cb_le_promisc,"ax",%progbits
 13071              		.align	2
 13072              		.global	cb_le_promisc
 13073              		.thumb
 13074              		.thumb_func
 13076              	cb_le_promisc:
 13077              	.LFB54:
3447:bluetooth_rxtx.c **** 
3448:bluetooth_rxtx.c **** /* le promiscuous mode */
3449:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 13078              		.loc 1 3449 0
 13079              		.cfi_startproc
 13080              		@ args = 0, pretend = 0, frame = 128
 13081              		@ frame_needed = 1, uses_anonymous_args = 0
 13082 0000 90B5     		push	{r4, r7, lr}
 13083              		.cfi_def_cfa_offset 12
 13084              		.cfi_offset 4, -12
 13085              		.cfi_offset 7, -8
 13086              		.cfi_offset 14, -4
 13087 0002 A1B0     		sub	sp, sp, #132
 13088              		.cfi_def_cfa_offset 144
 13089 0004 00AF     		add	r7, sp, #0
 13090              		.cfi_def_cfa_register 7
 13091 0006 7860     		str	r0, [r7, #4]
3450:bluetooth_rxtx.c **** 	int i, j, k;
3451:bluetooth_rxtx.c **** 	int idx;
3452:bluetooth_rxtx.c **** 
3453:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
3454:bluetooth_rxtx.c **** 	char desired[4][16] = {
 13092              		.loc 1 3454 0
 13093 0008 07F11C03 		add	r3, r7, #28
 13094 000c 4022     		movs	r2, #64
 13095 000e 1846     		mov	r0, r3
 13096 0010 0021     		movs	r1, #0
 13097 0012 FFF7FEFF 		bl	memset
 13098 0016 0123     		movs	r3, #1
 13099 0018 3B77     		strb	r3, [r7, #28]
 13100 001a 0123     		movs	r3, #1
 13101 001c 87F82C30 		strb	r3, [r7, #44]
 13102 0020 0123     		movs	r3, #1
 13103 0022 87F82F30 		strb	r3, [r7, #47]
 13104 0026 0123     		movs	r3, #1
 13105 0028 87F83C30 		strb	r3, [r7, #60]
 13106 002c 0123     		movs	r3, #1
 13107 002e 87F83E30 		strb	r3, [r7, #62]
 13108 0032 0123     		movs	r3, #1
 13109 0034 87F84C30 		strb	r3, [r7, #76]
 13110 0038 0123     		movs	r3, #1
 13111 003a 87F84E30 		strb	r3, [r7, #78]
 13112 003e 0123     		movs	r3, #1
 13113 0040 87F84F30 		strb	r3, [r7, #79]
3455:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
3456:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
3457:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
3458:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
3459:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
ARM GAS  /tmp/cctJTvh1.s 			page 291


3460:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
3461:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
3462:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
3463:bluetooth_rxtx.c **** 	};
3464:bluetooth_rxtx.c **** 
3465:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 13114              		.loc 1 3465 0
 13115 0044 0023     		movs	r3, #0
 13116 0046 FB67     		str	r3, [r7, #124]
 13117 0048 41E0     		b	.L671
 13118              	.L674:
3466:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 13119              		.loc 1 3466 0
 13120 004a A54B     		ldr	r3, .L701
 13121 004c 1B88     		ldrh	r3, [r3]	@ movhi
 13122 004e 9BB2     		uxth	r3, r3
 13123 0050 DBB2     		uxtb	r3, r3
 13124 0052 623B     		subs	r3, r3, #98
 13125 0054 DBB2     		uxtb	r3, r3
 13126 0056 1846     		mov	r0, r3
 13127 0058 FFF7FEFF 		bl	btle_channel_index
 13128 005c 0346     		mov	r3, r0
 13129 005e 1A46     		mov	r2, r3
 13130 0060 A04B     		ldr	r3, .L701+4
 13131 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 13132 0064 3B67     		str	r3, [r7, #112]
3467:bluetooth_rxtx.c **** 
3468:bluetooth_rxtx.c **** 		// whiten the desired data
3469:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 13133              		.loc 1 3469 0
 13134 0066 0023     		movs	r3, #0
 13135 0068 BB67     		str	r3, [r7, #120]
 13136 006a 2AE0     		b	.L672
 13137              	.L673:
3470:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 13138              		.loc 1 3470 0 discriminator 3
 13139 006c FB6F     		ldr	r3, [r7, #124]
 13140 006e 1B01     		lsls	r3, r3, #4
 13141 0070 07F18002 		add	r2, r7, #128
 13142 0074 1A44     		add	r2, r2, r3
 13143 0076 BB6F     		ldr	r3, [r7, #120]
 13144 0078 1344     		add	r3, r3, r2
 13145 007a 643B     		subs	r3, r3, #100
 13146 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 13147 007e 9A49     		ldr	r1, .L701+8
 13148 0080 3B6F     		ldr	r3, [r7, #112]
 13149 0082 0B44     		add	r3, r3, r1
 13150 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13151 0086 5340     		eors	r3, r3, r2
 13152 0088 D9B2     		uxtb	r1, r3
 13153 008a FB6F     		ldr	r3, [r7, #124]
 13154 008c 1B01     		lsls	r3, r3, #4
 13155 008e 07F18002 		add	r2, r7, #128
 13156 0092 1A44     		add	r2, r2, r3
 13157 0094 BB6F     		ldr	r3, [r7, #120]
 13158 0096 1344     		add	r3, r3, r2
 13159 0098 643B     		subs	r3, r3, #100
ARM GAS  /tmp/cctJTvh1.s 			page 292


 13160 009a 0A46     		mov	r2, r1
 13161 009c 1A70     		strb	r2, [r3]
3471:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 13162              		.loc 1 3471 0 discriminator 3
 13163 009e 3B6F     		ldr	r3, [r7, #112]
 13164 00a0 0133     		adds	r3, r3, #1
 13165 00a2 1946     		mov	r1, r3
 13166 00a4 914B     		ldr	r3, .L701+12
 13167 00a6 A1FB0323 		umull	r2, r3, r1, r3
 13168 00aa C81A     		subs	r0, r1, r3
 13169 00ac 4008     		lsrs	r0, r0, #1
 13170 00ae 0344     		add	r3, r3, r0
 13171 00b0 9A09     		lsrs	r2, r3, #6
 13172 00b2 1346     		mov	r3, r2
 13173 00b4 DB01     		lsls	r3, r3, #7
 13174 00b6 9B1A     		subs	r3, r3, r2
 13175 00b8 CA1A     		subs	r2, r1, r3
 13176 00ba 3A67     		str	r2, [r7, #112]
3469:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 13177              		.loc 1 3469 0 discriminator 3
 13178 00bc BB6F     		ldr	r3, [r7, #120]
 13179 00be 0133     		adds	r3, r3, #1
 13180 00c0 BB67     		str	r3, [r7, #120]
 13181              	.L672:
3469:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 13182              		.loc 1 3469 0 is_stmt 0 discriminator 1
 13183 00c2 BB6F     		ldr	r3, [r7, #120]
 13184 00c4 0F2B     		cmp	r3, #15
 13185 00c6 D1DD     		ble	.L673
3465:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 13186              		.loc 1 3465 0 is_stmt 1 discriminator 2
 13187 00c8 FB6F     		ldr	r3, [r7, #124]
 13188 00ca 0133     		adds	r3, r3, #1
 13189 00cc FB67     		str	r3, [r7, #124]
 13190              	.L671:
3465:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 13191              		.loc 1 3465 0 is_stmt 0 discriminator 1
 13192 00ce FB6F     		ldr	r3, [r7, #124]
 13193 00d0 032B     		cmp	r3, #3
 13194 00d2 BADD     		ble	.L674
3472:bluetooth_rxtx.c **** 		}
3473:bluetooth_rxtx.c **** 	}
3474:bluetooth_rxtx.c **** 
3475:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
3476:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 13195              		.loc 1 3476 0 is_stmt 1
 13196 00d4 2023     		movs	r3, #32
 13197 00d6 FB67     		str	r3, [r7, #124]
 13198 00d8 D0E0     		b	.L675
 13199              	.L695:
 13200              	.LBB33:
3477:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 13201              		.loc 1 3477 0
 13202 00da 854B     		ldr	r3, .L701+16
 13203 00dc 07F10C04 		add	r4, r7, #12
 13204 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 13205 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
ARM GAS  /tmp/cctJTvh1.s 			page 293


3478:bluetooth_rxtx.c **** 		int matching = -1;
 13206              		.loc 1 3478 0
 13207 00e6 4FF0FF33 		mov	r3, #-1
 13208 00ea FB66     		str	r3, [r7, #108]
3479:bluetooth_rxtx.c **** 
3480:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 13209              		.loc 1 3480 0
 13210 00ec 0023     		movs	r3, #0
 13211 00ee BB67     		str	r3, [r7, #120]
 13212 00f0 26E0     		b	.L676
 13213              	.L681:
3481:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 13214              		.loc 1 3481 0
 13215 00f2 0023     		movs	r3, #0
 13216 00f4 7B67     		str	r3, [r7, #116]
 13217 00f6 1DE0     		b	.L677
 13218              	.L680:
3482:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 13219              		.loc 1 3482 0
 13220 00f8 FA6F     		ldr	r2, [r7, #124]
 13221 00fa 7B6F     		ldr	r3, [r7, #116]
 13222 00fc 1344     		add	r3, r3, r2
 13223 00fe 1A46     		mov	r2, r3
 13224 0100 7B68     		ldr	r3, [r7, #4]
 13225 0102 1344     		add	r3, r3, r2
 13226 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 13227 0106 BB6F     		ldr	r3, [r7, #120]
 13228 0108 1B01     		lsls	r3, r3, #4
 13229 010a 07F18001 		add	r1, r7, #128
 13230 010e 1944     		add	r1, r1, r3
 13231 0110 7B6F     		ldr	r3, [r7, #116]
 13232 0112 0B44     		add	r3, r3, r1
 13233 0114 643B     		subs	r3, r3, #100
 13234 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13235 0118 9A42     		cmp	r2, r3
 13236 011a 08D0     		beq	.L678
3483:bluetooth_rxtx.c **** 					ok[j] = 0;
 13237              		.loc 1 3483 0
 13238 011c BB6F     		ldr	r3, [r7, #120]
 13239 011e 9B00     		lsls	r3, r3, #2
 13240 0120 07F18002 		add	r2, r7, #128
 13241 0124 1344     		add	r3, r3, r2
 13242 0126 0022     		movs	r2, #0
 13243 0128 43F8742C 		str	r2, [r3, #-116]
3484:bluetooth_rxtx.c **** 					break;
 13244              		.loc 1 3484 0
 13245 012c 05E0     		b	.L679
 13246              	.L678:
3481:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 13247              		.loc 1 3481 0 discriminator 2
 13248 012e 7B6F     		ldr	r3, [r7, #116]
 13249 0130 0133     		adds	r3, r3, #1
 13250 0132 7B67     		str	r3, [r7, #116]
 13251              	.L677:
3481:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 13252              		.loc 1 3481 0 is_stmt 0 discriminator 1
 13253 0134 7B6F     		ldr	r3, [r7, #116]
ARM GAS  /tmp/cctJTvh1.s 			page 294


 13254 0136 0F2B     		cmp	r3, #15
 13255 0138 DEDD     		ble	.L680
 13256              	.L679:
3480:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 13257              		.loc 1 3480 0 is_stmt 1 discriminator 2
 13258 013a BB6F     		ldr	r3, [r7, #120]
 13259 013c 0133     		adds	r3, r3, #1
 13260 013e BB67     		str	r3, [r7, #120]
 13261              	.L676:
3480:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 13262              		.loc 1 3480 0 is_stmt 0 discriminator 1
 13263 0140 BB6F     		ldr	r3, [r7, #120]
 13264 0142 032B     		cmp	r3, #3
 13265 0144 D5DD     		ble	.L681
3485:bluetooth_rxtx.c **** 				}
3486:bluetooth_rxtx.c **** 			}
3487:bluetooth_rxtx.c **** 		}
3488:bluetooth_rxtx.c **** 
3489:bluetooth_rxtx.c **** 		// see if any match
3490:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 13266              		.loc 1 3490 0 is_stmt 1
 13267 0146 0023     		movs	r3, #0
 13268 0148 BB67     		str	r3, [r7, #120]
 13269 014a 0EE0     		b	.L682
 13270              	.L685:
3491:bluetooth_rxtx.c **** 			if (ok[j]) {
 13271              		.loc 1 3491 0
 13272 014c BB6F     		ldr	r3, [r7, #120]
 13273 014e 9B00     		lsls	r3, r3, #2
 13274 0150 07F18002 		add	r2, r7, #128
 13275 0154 1344     		add	r3, r3, r2
 13276 0156 53F8743C 		ldr	r3, [r3, #-116]
 13277 015a 002B     		cmp	r3, #0
 13278 015c 02D0     		beq	.L683
3492:bluetooth_rxtx.c **** 				matching = j;
 13279              		.loc 1 3492 0
 13280 015e BB6F     		ldr	r3, [r7, #120]
 13281 0160 FB66     		str	r3, [r7, #108]
3493:bluetooth_rxtx.c **** 				break;
 13282              		.loc 1 3493 0
 13283 0162 05E0     		b	.L684
 13284              	.L683:
3490:bluetooth_rxtx.c **** 			if (ok[j]) {
 13285              		.loc 1 3490 0 discriminator 2
 13286 0164 BB6F     		ldr	r3, [r7, #120]
 13287 0166 0133     		adds	r3, r3, #1
 13288 0168 BB67     		str	r3, [r7, #120]
 13289              	.L682:
3490:bluetooth_rxtx.c **** 			if (ok[j]) {
 13290              		.loc 1 3490 0 is_stmt 0 discriminator 1
 13291 016a BB6F     		ldr	r3, [r7, #120]
 13292 016c 032B     		cmp	r3, #3
 13293 016e EDDD     		ble	.L685
 13294              	.L684:
3494:bluetooth_rxtx.c **** 			}
3495:bluetooth_rxtx.c **** 		}
3496:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 295


3497:bluetooth_rxtx.c **** 		// skip if no match
3498:bluetooth_rxtx.c **** 		if (matching < 0)
 13295              		.loc 1 3498 0 is_stmt 1
 13296 0170 FB6E     		ldr	r3, [r7, #108]
 13297 0172 002B     		cmp	r3, #0
 13298 0174 7FDB     		blt	.L687
3499:bluetooth_rxtx.c **** 			continue;
3500:bluetooth_rxtx.c **** 
3501:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
3502:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 13299              		.loc 1 3502 0
 13300 0176 5A4B     		ldr	r3, .L701
 13301 0178 1B88     		ldrh	r3, [r3]	@ movhi
 13302 017a 9BB2     		uxth	r3, r3
 13303 017c DBB2     		uxtb	r3, r3
 13304 017e 623B     		subs	r3, r3, #98
 13305 0180 DBB2     		uxtb	r3, r3
 13306 0182 1846     		mov	r0, r3
 13307 0184 FFF7FEFF 		bl	btle_channel_index
 13308 0188 0346     		mov	r3, r0
 13309 018a 1A46     		mov	r2, r3
 13310 018c 554B     		ldr	r3, .L701+4
 13311 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 13312 0190 3B67     		str	r3, [r7, #112]
3503:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 13313              		.loc 1 3503 0
 13314 0192 0023     		movs	r3, #0
 13315 0194 BB67     		str	r3, [r7, #120]
 13316 0196 4CE0     		b	.L688
 13317              	.L694:
 13318              	.LBB34:
3504:bluetooth_rxtx.c **** 			u8 byte = 0;
 13319              		.loc 1 3504 0
 13320 0198 0023     		movs	r3, #0
 13321 019a 87F86B30 		strb	r3, [r7, #107]
3505:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 13322              		.loc 1 3505 0
 13323 019e 0023     		movs	r3, #0
 13324 01a0 7B67     		str	r3, [r7, #116]
 13325 01a2 39E0     		b	.L689
 13326              	.L693:
 13327              	.LBB35:
3506:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 13328              		.loc 1 3506 0
 13329 01a4 BB6F     		ldr	r3, [r7, #120]
 13330 01a6 DA00     		lsls	r2, r3, #3
 13331 01a8 7B6F     		ldr	r3, [r7, #116]
 13332 01aa 1A44     		add	r2, r2, r3
 13333 01ac FB6F     		ldr	r3, [r7, #124]
 13334 01ae 1344     		add	r3, r3, r2
 13335 01b0 203B     		subs	r3, r3, #32
 13336 01b2 3B66     		str	r3, [r7, #96]
3507:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 13337              		.loc 1 3507 0
 13338 01b4 3B6E     		ldr	r3, [r7, #96]
 13339 01b6 B3F5487F 		cmp	r3, #800
 13340 01ba 00DB     		blt	.L690
ARM GAS  /tmp/cctJTvh1.s 			page 296


 13341 01bc 2FE0     		b	.L691
 13342              	.L690:
3508:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 13343              		.loc 1 3508 0
 13344 01be 3B6E     		ldr	r3, [r7, #96]
 13345 01c0 7A68     		ldr	r2, [r7, #4]
 13346 01c2 1344     		add	r3, r3, r2
 13347 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13348 01c6 7B66     		str	r3, [r7, #100]
3509:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 13349              		.loc 1 3509 0
 13350 01c8 BB6F     		ldr	r3, [r7, #120]
 13351 01ca 032B     		cmp	r3, #3
 13352 01cc 16DD     		ble	.L692
3510:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 13353              		.loc 1 3510 0
 13354 01ce 464A     		ldr	r2, .L701+8
 13355 01d0 3B6F     		ldr	r3, [r7, #112]
 13356 01d2 1344     		add	r3, r3, r2
 13357 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13358 01d6 1A46     		mov	r2, r3
 13359 01d8 7B6E     		ldr	r3, [r7, #100]
 13360 01da 5340     		eors	r3, r3, r2
 13361 01dc 7B66     		str	r3, [r7, #100]
3511:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 13362              		.loc 1 3511 0
 13363 01de 3B6F     		ldr	r3, [r7, #112]
 13364 01e0 0133     		adds	r3, r3, #1
 13365 01e2 1946     		mov	r1, r3
 13366 01e4 414B     		ldr	r3, .L701+12
 13367 01e6 A1FB0323 		umull	r2, r3, r1, r3
 13368 01ea C81A     		subs	r0, r1, r3
 13369 01ec 4008     		lsrs	r0, r0, #1
 13370 01ee 0344     		add	r3, r3, r0
 13371 01f0 9A09     		lsrs	r2, r3, #6
 13372 01f2 1346     		mov	r3, r2
 13373 01f4 DB01     		lsls	r3, r3, #7
 13374 01f6 9B1A     		subs	r3, r3, r2
 13375 01f8 CA1A     		subs	r2, r1, r3
 13376 01fa 3A67     		str	r2, [r7, #112]
 13377              	.L692:
3512:bluetooth_rxtx.c **** 				}
3513:bluetooth_rxtx.c **** 				byte |= bit << k;
 13378              		.loc 1 3513 0 discriminator 2
 13379 01fc 7A6E     		ldr	r2, [r7, #100]
 13380 01fe 7B6F     		ldr	r3, [r7, #116]
 13381 0200 02FA03F3 		lsl	r3, r2, r3
 13382 0204 DAB2     		uxtb	r2, r3
 13383 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 13384 020a 1343     		orrs	r3, r3, r2
 13385 020c DBB2     		uxtb	r3, r3
 13386 020e 87F86B30 		strb	r3, [r7, #107]
 13387              	.LBE35:
3505:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 13388              		.loc 1 3505 0 discriminator 2
 13389 0212 7B6F     		ldr	r3, [r7, #116]
 13390 0214 0133     		adds	r3, r3, #1
ARM GAS  /tmp/cctJTvh1.s 			page 297


 13391 0216 7B67     		str	r3, [r7, #116]
 13392              	.L689:
3505:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 13393              		.loc 1 3505 0 is_stmt 0 discriminator 1
 13394 0218 7B6F     		ldr	r3, [r7, #116]
 13395 021a 072B     		cmp	r3, #7
 13396 021c C2DD     		ble	.L693
 13397              	.L691:
3514:bluetooth_rxtx.c **** 			}
3515:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 13398              		.loc 1 3515 0 is_stmt 1 discriminator 2
 13399 021e 354B     		ldr	r3, .L701+20
 13400 0220 1A68     		ldr	r2, [r3]
 13401 0222 BB6F     		ldr	r3, [r7, #120]
 13402 0224 1344     		add	r3, r3, r2
 13403 0226 97F86B20 		ldrb	r2, [r7, #107]
 13404 022a 1A70     		strb	r2, [r3]
 13405              	.LBE34:
3503:bluetooth_rxtx.c **** 			u8 byte = 0;
 13406              		.loc 1 3503 0 discriminator 2
 13407 022c BB6F     		ldr	r3, [r7, #120]
 13408 022e 0133     		adds	r3, r3, #1
 13409 0230 BB67     		str	r3, [r7, #120]
 13410              	.L688:
3503:bluetooth_rxtx.c **** 			u8 byte = 0;
 13411              		.loc 1 3503 0 is_stmt 0 discriminator 1
 13412 0232 BB6F     		ldr	r3, [r7, #120]
 13413 0234 092B     		cmp	r3, #9
 13414 0236 AFDD     		ble	.L694
3516:bluetooth_rxtx.c **** 		}
3517:bluetooth_rxtx.c **** 
3518:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 13415              		.loc 1 3518 0 is_stmt 1
 13416 0238 2E4B     		ldr	r3, .L701+20
 13417 023a 1B68     		ldr	r3, [r3]
 13418 023c 0333     		adds	r3, r3, #3
 13419 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13420 0240 1A06     		lsls	r2, r3, #24
3519:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 13421              		.loc 1 3519 0
 13422 0242 2C4B     		ldr	r3, .L701+20
 13423 0244 1B68     		ldr	r3, [r3]
 13424 0246 0233     		adds	r3, r3, #2
 13425 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13426 024a 1B04     		lsls	r3, r3, #16
3518:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 13427              		.loc 1 3518 0
 13428 024c 1A43     		orrs	r2, r2, r3
3520:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 13429              		.loc 1 3520 0
 13430 024e 294B     		ldr	r3, .L701+20
 13431 0250 1B68     		ldr	r3, [r3]
 13432 0252 0133     		adds	r3, r3, #1
 13433 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 13434 0256 1B02     		lsls	r3, r3, #8
3519:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 13435              		.loc 1 3519 0
ARM GAS  /tmp/cctJTvh1.s 			page 298


 13436 0258 1343     		orrs	r3, r3, r2
3521:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 13437              		.loc 1 3521 0
 13438 025a 264A     		ldr	r2, .L701+20
 13439 025c 1268     		ldr	r2, [r2]
 13440 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
3520:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 13441              		.loc 1 3520 0
 13442 0260 1343     		orrs	r3, r3, r2
3518:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 13443              		.loc 1 3518 0
 13444 0262 FB65     		str	r3, [r7, #92]
3522:bluetooth_rxtx.c **** 		see_aa(aa);
 13445              		.loc 1 3522 0
 13446 0264 F86D     		ldr	r0, [r7, #92]
 13447 0266 FFF7FEFF 		bl	see_aa
3523:bluetooth_rxtx.c **** 
3524:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 13448              		.loc 1 3524 0
 13449 026a 224B     		ldr	r3, .L701+20
 13450 026c 1B68     		ldr	r3, [r3]
 13451 026e 0120     		movs	r0, #1
 13452 0270 1946     		mov	r1, r3
 13453 0272 FFF7FEFF 		bl	enqueue
 13454              	.L687:
 13455              	.LBE33:
3476:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 13456              		.loc 1 3476 0 discriminator 2
 13457 0276 FB6F     		ldr	r3, [r7, #124]
 13458 0278 0133     		adds	r3, r3, #1
 13459 027a FB67     		str	r3, [r7, #124]
 13460              	.L675:
3476:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 13461              		.loc 1 3476 0 is_stmt 0 discriminator 1
 13462 027c FB6F     		ldr	r3, [r7, #124]
 13463 027e B3F53C7F 		cmp	r3, #752
 13464 0282 FFF62AAF 		blt	.L695
3525:bluetooth_rxtx.c **** 
3526:bluetooth_rxtx.c **** 	}
3527:bluetooth_rxtx.c **** 
3528:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
3529:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 13465              		.loc 1 3529 0 is_stmt 1
 13466 0286 0023     		movs	r3, #0
 13467 0288 FB67     		str	r3, [r7, #124]
 13468 028a 20E0     		b	.L696
 13469              	.L699:
3530:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 13470              		.loc 1 3530 0
 13471 028c 1A4A     		ldr	r2, .L701+24
 13472 028e FB6F     		ldr	r3, [r7, #124]
 13473 0290 DB00     		lsls	r3, r3, #3
 13474 0292 1344     		add	r3, r3, r2
 13475 0294 5B68     		ldr	r3, [r3, #4]
 13476 0296 032B     		cmp	r3, #3
 13477 0298 16DD     		ble	.L697
3531:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
ARM GAS  /tmp/cctJTvh1.s 			page 299


 13478              		.loc 1 3531 0
 13479 029a 174A     		ldr	r2, .L701+24
 13480 029c FB6F     		ldr	r3, [r7, #124]
 13481 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 13482 02a2 1846     		mov	r0, r3
 13483 02a4 FFF7FEFF 		bl	le_set_access_address
3532:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 13484              		.loc 1 3532 0
 13485 02a8 144B     		ldr	r3, .L701+28
 13486 02aa 154A     		ldr	r2, .L701+32
 13487 02ac 1A60     		str	r2, [r3]
3533:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 13488              		.loc 1 3533 0
 13489 02ae 154B     		ldr	r3, .L701+36
 13490 02b0 154A     		ldr	r2, .L701+40
 13491 02b2 1A60     		str	r2, [r3]
3534:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 13492              		.loc 1 3534 0
 13493 02b4 154B     		ldr	r3, .L701+44
 13494 02b6 0022     		movs	r2, #0
 13495 02b8 1A61     		str	r2, [r3, #16]
3535:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 13496              		.loc 1 3535 0
 13497 02ba 0020     		movs	r0, #0
 13498 02bc 1349     		ldr	r1, .L701+44
 13499 02be 0422     		movs	r2, #4
 13500 02c0 FFF7FEFF 		bl	le_promisc_state
3536:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
3537:bluetooth_rxtx.c **** 			return 0;
 13501              		.loc 1 3537 0
 13502 02c4 0023     		movs	r3, #0
 13503 02c6 06E0     		b	.L700
 13504              	.L697:
3529:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 13505              		.loc 1 3529 0 discriminator 2
 13506 02c8 FB6F     		ldr	r3, [r7, #124]
 13507 02ca 0133     		adds	r3, r3, #1
 13508 02cc FB67     		str	r3, [r7, #124]
 13509              	.L696:
3529:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 13510              		.loc 1 3529 0 is_stmt 0 discriminator 1
 13511 02ce FB6F     		ldr	r3, [r7, #124]
 13512 02d0 1F2B     		cmp	r3, #31
 13513 02d2 DBDD     		ble	.L699
3538:bluetooth_rxtx.c **** 		}
3539:bluetooth_rxtx.c **** 	}
3540:bluetooth_rxtx.c **** 
3541:bluetooth_rxtx.c **** 	return 1;
 13514              		.loc 1 3541 0 is_stmt 1
 13515 02d4 0123     		movs	r3, #1
 13516              	.L700:
3542:bluetooth_rxtx.c **** }
 13517              		.loc 1 3542 0 discriminator 1
 13518 02d6 1846     		mov	r0, r3
 13519 02d8 8437     		adds	r7, r7, #132
 13520              		.cfi_def_cfa_offset 12
 13521 02da BD46     		mov	sp, r7
ARM GAS  /tmp/cctJTvh1.s 			page 300


 13522              		.cfi_def_cfa_register 13
 13523              		@ sp needed
 13524 02dc 90BD     		pop	{r4, r7, pc}
 13525              	.L702:
 13526 02de 00BF     		.align	2
 13527              	.L701:
 13528 02e0 00000000 		.word	channel
 13529 02e4 C0000000 		.word	whitening_index
 13530 02e8 40000000 		.word	whitening
 13531 02ec 11080402 		.word	33818641
 13532 02f0 E0080000 		.word	.LC0
 13533 02f4 00000000 		.word	idle_rxbuf
 13534 02f8 00000000 		.word	le_promisc
 13535 02fc 00000000 		.word	data_cb
 13536 0300 00000000 		.word	cb_follow_le
 13537 0304 00000000 		.word	packet_cb
 13538 0308 00000000 		.word	promisc_follow_cb
 13539 030c 00000000 		.word	le
 13540              		.cfi_endproc
 13541              	.LFE54:
 13543              		.section	.text.bt_promisc_le,"ax",%progbits
 13544              		.align	2
 13545              		.global	bt_promisc_le
 13546              		.thumb
 13547              		.thumb_func
 13549              	bt_promisc_le:
 13550              	.LFB55:
3543:bluetooth_rxtx.c **** 
3544:bluetooth_rxtx.c **** void bt_promisc_le() {
 13551              		.loc 1 3544 0
 13552              		.cfi_startproc
 13553              		@ args = 0, pretend = 0, frame = 0
 13554              		@ frame_needed = 1, uses_anonymous_args = 0
 13555 0000 80B5     		push	{r7, lr}
 13556              		.cfi_def_cfa_offset 8
 13557              		.cfi_offset 7, -8
 13558              		.cfi_offset 14, -4
 13559 0002 00AF     		add	r7, sp, #0
 13560              		.cfi_def_cfa_register 7
3545:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 13561              		.loc 1 3545 0
 13562 0004 2CE0     		b	.L704
 13563              	.L709:
3546:bluetooth_rxtx.c **** 		reset_le_promisc();
 13564              		.loc 1 3546 0
 13565 0006 FFF7FEFF 		bl	reset_le_promisc
3547:bluetooth_rxtx.c **** 
3548:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
3549:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 13566              		.loc 1 3549 0
 13567 000a 184B     		ldr	r3, .L710
 13568 000c 1B88     		ldrh	r3, [r3]	@ movhi
 13569 000e 9BB2     		uxth	r3, r3
 13570 0010 03F00103 		and	r3, r3, #1
 13571 0014 002B     		cmp	r3, #0
 13572 0016 03D0     		beq	.L705
3550:bluetooth_rxtx.c **** 			channel = 2440;
ARM GAS  /tmp/cctJTvh1.s 			page 301


 13573              		.loc 1 3550 0
 13574 0018 144B     		ldr	r3, .L710
 13575 001a 40F68812 		movw	r2, #2440
 13576 001e 1A80     		strh	r2, [r3]	@ movhi
 13577              	.L705:
3551:bluetooth_rxtx.c **** 
3552:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
3553:bluetooth_rxtx.c **** 		if (!le.target_set) {
 13578              		.loc 1 3553 0
 13579 0020 134B     		ldr	r3, .L710+4
 13580 0022 DB6B     		ldr	r3, [r3, #60]
 13581 0024 002B     		cmp	r3, #0
 13582 0026 07D1     		bne	.L706
3554:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
3555:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 13583              		.loc 1 3555 0
 13584 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
3556:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 13585              		.loc 1 3556 0
 13586 002c 114B     		ldr	r3, .L710+8
 13587 002e 124A     		ldr	r2, .L710+12
 13588 0030 1A60     		str	r2, [r3]
3557:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 13589              		.loc 1 3557 0
 13590 0032 0A20     		movs	r0, #10
 13591 0034 FFF7FEFF 		bl	bt_generic_le
 13592              	.L706:
3558:bluetooth_rxtx.c **** 		}
3559:bluetooth_rxtx.c **** 
3560:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
3561:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 13593              		.loc 1 3561 0
 13594 0038 104B     		ldr	r3, .L710+16
 13595 003a 1B78     		ldrb	r3, [r3]
 13596 003c DBB2     		uxtb	r3, r3
 13597 003e 0A2B     		cmp	r3, #10
 13598 0040 00D0     		beq	.L707
3562:bluetooth_rxtx.c **** 			break;
 13599              		.loc 1 3562 0
 13600 0042 12E0     		b	.L703
 13601              	.L707:
3563:bluetooth_rxtx.c **** 
3564:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 13602              		.loc 1 3564 0
 13603 0044 0020     		movs	r0, #0
 13604 0046 0A49     		ldr	r1, .L710+4
 13605 0048 0422     		movs	r2, #4
 13606 004a FFF7FEFF 		bl	le_promisc_state
3565:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 13607              		.loc 1 3565 0
 13608 004e 0C4B     		ldr	r3, .L710+20
 13609 0050 0C4A     		ldr	r2, .L710+24
 13610 0052 1A60     		str	r2, [r3]
3566:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 13611              		.loc 1 3566 0
 13612 0054 064B     		ldr	r3, .L710+4
 13613 0056 0022     		movs	r2, #0
ARM GAS  /tmp/cctJTvh1.s 			page 302


 13614 0058 1A61     		str	r2, [r3, #16]
3567:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 13615              		.loc 1 3567 0
 13616 005a 0A20     		movs	r0, #10
 13617 005c FFF7FEFF 		bl	bt_le_sync
 13618              	.L704:
3545:bluetooth_rxtx.c **** 		reset_le_promisc();
 13619              		.loc 1 3545 0
 13620 0060 064B     		ldr	r3, .L710+16
 13621 0062 1B78     		ldrb	r3, [r3]
 13622 0064 DBB2     		uxtb	r3, r3
 13623 0066 0A2B     		cmp	r3, #10
 13624 0068 CDD0     		beq	.L709
 13625              	.L703:
3568:bluetooth_rxtx.c **** 	}
3569:bluetooth_rxtx.c **** }
 13626              		.loc 1 3569 0
 13627 006a 80BD     		pop	{r7, pc}
 13628              	.L711:
 13629              		.align	2
 13630              	.L710:
 13631 006c 00000000 		.word	channel
 13632 0070 00000000 		.word	le
 13633 0074 00000000 		.word	data_cb
 13634 0078 00000000 		.word	cb_le_promisc
 13635 007c 00000000 		.word	requested_mode
 13636 0080 00000000 		.word	packet_cb
 13637 0084 00000000 		.word	promisc_follow_cb
 13638              		.cfi_endproc
 13639              	.LFE55:
 13641              		.section	.rodata
 13642              		.align	2
 13643              	.LC1:
 13644 08f0 00       		.byte	0
 13645 08f1 09       		.byte	9
 13646 08f2 FF       		.byte	-1
 13647 08f3 FF       		.byte	-1
 13648 08f4 FF       		.byte	-1
 13649 08f5 FF       		.byte	-1
 13650 08f6 FF       		.byte	-1
 13651 08f7 FF       		.byte	-1
 13652 08f8 02       		.byte	2
 13653 08f9 01       		.byte	1
 13654 08fa 05       		.byte	5
 13655 08fb FF       		.byte	-1
 13656 08fc FF       		.byte	-1
 13657 08fd FF       		.byte	-1
 13658              		.section	.text.bt_slave_le,"ax",%progbits
 13659              		.align	2
 13660              		.global	bt_slave_le
 13661              		.thumb
 13662              		.thumb_func
 13664              	bt_slave_le:
 13665              	.LFB56:
3570:bluetooth_rxtx.c **** 
3571:bluetooth_rxtx.c **** void bt_slave_le() {
 13666              		.loc 1 3571 0
ARM GAS  /tmp/cctJTvh1.s 			page 303


 13667              		.cfi_startproc
 13668              		@ args = 0, pretend = 0, frame = 32
 13669              		@ frame_needed = 1, uses_anonymous_args = 0
 13670 0000 90B5     		push	{r4, r7, lr}
 13671              		.cfi_def_cfa_offset 12
 13672              		.cfi_offset 4, -12
 13673              		.cfi_offset 7, -8
 13674              		.cfi_offset 14, -4
 13675 0002 89B0     		sub	sp, sp, #36
 13676              		.cfi_def_cfa_offset 48
 13677 0004 00AF     		add	r7, sp, #0
 13678              		.cfi_def_cfa_register 7
3572:bluetooth_rxtx.c **** 	u32 calc_crc;
3573:bluetooth_rxtx.c **** 	int i;
3574:bluetooth_rxtx.c **** 
3575:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 13679              		.loc 1 3575 0
 13680 0006 354A     		ldr	r2, .L717
 13681 0008 3B1D     		adds	r3, r7, #4
 13682 000a 1446     		mov	r4, r2
 13683 000c 2068     		ldr	r0, [r4]	@ unaligned
 13684 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 13685 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 13686 0012 07C3     		stmia	r3!, {r0, r1, r2}
 13687 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 13688 0016 1A80     		strh	r2, [r3]	@ unaligned
3576:bluetooth_rxtx.c **** 		// LL header
3577:bluetooth_rxtx.c **** 		0x00, 0x09,
3578:bluetooth_rxtx.c **** 
3579:bluetooth_rxtx.c **** 		// advertising address
3580:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
3581:bluetooth_rxtx.c **** 
3582:bluetooth_rxtx.c **** 		// advertising data
3583:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
3584:bluetooth_rxtx.c **** 
3585:bluetooth_rxtx.c **** 		// CRC (calc)
3586:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
3587:bluetooth_rxtx.c **** 	};
3588:bluetooth_rxtx.c **** 
3589:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 13689              		.loc 1 3589 0
 13690 0018 0B23     		movs	r3, #11
 13691 001a FB76     		strb	r3, [r7, #27]
3590:bluetooth_rxtx.c **** 
3591:bluetooth_rxtx.c **** 	// copy the user-specified mac address
3592:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 13692              		.loc 1 3592 0
 13693 001c 0023     		movs	r3, #0
 13694 001e FB61     		str	r3, [r7, #28]
 13695 0020 0EE0     		b	.L713
 13696              	.L714:
3593:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 13697              		.loc 1 3593 0 discriminator 3
 13698 0022 FB69     		ldr	r3, [r7, #28]
 13699 0024 0233     		adds	r3, r3, #2
 13700 0026 FA69     		ldr	r2, [r7, #28]
 13701 0028 C2F10502 		rsb	r2, r2, #5
ARM GAS  /tmp/cctJTvh1.s 			page 304


 13702 002c 2C49     		ldr	r1, .L717+4
 13703 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 13704 0030 07F12001 		add	r1, r7, #32
 13705 0034 0B44     		add	r3, r3, r1
 13706 0036 03F81C2C 		strb	r2, [r3, #-28]
3592:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 13707              		.loc 1 3592 0 discriminator 3
 13708 003a FB69     		ldr	r3, [r7, #28]
 13709 003c 0133     		adds	r3, r3, #1
 13710 003e FB61     		str	r3, [r7, #28]
 13711              	.L713:
3592:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 13712              		.loc 1 3592 0 is_stmt 0 discriminator 1
 13713 0040 FB69     		ldr	r3, [r7, #28]
 13714 0042 052B     		cmp	r3, #5
 13715 0044 EDDD     		ble	.L714
3594:bluetooth_rxtx.c **** 
3595:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 13716              		.loc 1 3595 0 is_stmt 1
 13717 0046 274B     		ldr	r3, .L717+8
 13718 0048 D968     		ldr	r1, [r3, #12]
 13719 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 13720 004c 3A1D     		adds	r2, r7, #4
 13721 004e 0846     		mov	r0, r1
 13722 0050 1146     		mov	r1, r2
 13723 0052 1A46     		mov	r2, r3
 13724 0054 FFF7FEFF 		bl	btle_calc_crc
 13725 0058 7861     		str	r0, [r7, #20]
3596:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 13726              		.loc 1 3596 0
 13727 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 13728 005c 7A69     		ldr	r2, [r7, #20]
 13729 005e D2B2     		uxtb	r2, r2
 13730 0060 07F12001 		add	r1, r7, #32
 13731 0064 0B44     		add	r3, r3, r1
 13732 0066 03F81C2C 		strb	r2, [r3, #-28]
3597:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 13733              		.loc 1 3597 0
 13734 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 13735 006c 0133     		adds	r3, r3, #1
 13736 006e 7A69     		ldr	r2, [r7, #20]
 13737 0070 120A     		lsrs	r2, r2, #8
 13738 0072 D2B2     		uxtb	r2, r2
 13739 0074 07F12001 		add	r1, r7, #32
 13740 0078 0B44     		add	r3, r3, r1
 13741 007a 03F81C2C 		strb	r2, [r3, #-28]
3598:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 13742              		.loc 1 3598 0
 13743 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 13744 0080 0233     		adds	r3, r3, #2
 13745 0082 7A69     		ldr	r2, [r7, #20]
 13746 0084 120C     		lsrs	r2, r2, #16
 13747 0086 D2B2     		uxtb	r2, r2
 13748 0088 07F12001 		add	r1, r7, #32
 13749 008c 0B44     		add	r3, r3, r1
 13750 008e 03F81C2C 		strb	r2, [r3, #-28]
3599:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 305


3600:bluetooth_rxtx.c **** 	// spam advertising packets
3601:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 13751              		.loc 1 3601 0
 13752 0092 1BE0     		b	.L715
 13753              	.L716:
3602:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 13754              		.loc 1 3602 0
 13755 0094 144B     		ldr	r3, .L717+12
 13756 0096 4FF08072 		mov	r2, #16777216
 13757 009a 1A60     		str	r2, [r3]
3603:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 13758              		.loc 1 3603 0
 13759 009c 124B     		ldr	r3, .L717+12
 13760 009e 4FF08062 		mov	r2, #67108864
 13761 00a2 1A60     		str	r2, [r3]
3604:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 13762              		.loc 1 3604 0
 13763 00a4 FB7E     		ldrb	r3, [r7, #27]
 13764 00a6 0333     		adds	r3, r3, #3
 13765 00a8 DAB2     		uxtb	r2, r3
 13766 00aa 3B1D     		adds	r3, r7, #4
 13767 00ac 0F48     		ldr	r0, .L717+16
 13768 00ae 1146     		mov	r1, r2
 13769 00b0 1A46     		mov	r2, r3
 13770 00b2 FFF7FEFF 		bl	le_transmit
3605:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 13771              		.loc 1 3605 0
 13772 00b6 0E4B     		ldr	r3, .L717+20
 13773 00b8 4FF08072 		mov	r2, #16777216
 13774 00bc 1A60     		str	r2, [r3]
3606:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 13775              		.loc 1 3606 0
 13776 00be 0C4B     		ldr	r3, .L717+20
 13777 00c0 4FF08062 		mov	r2, #67108864
 13778 00c4 1A60     		str	r2, [r3]
3607:bluetooth_rxtx.c **** 		msleep(100);
 13779              		.loc 1 3607 0
 13780 00c6 6420     		movs	r0, #100
 13781 00c8 FFF7FEFF 		bl	msleep
 13782              	.L715:
3601:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 13783              		.loc 1 3601 0
 13784 00cc 094B     		ldr	r3, .L717+24
 13785 00ce 1B78     		ldrb	r3, [r3]
 13786 00d0 DBB2     		uxtb	r3, r3
 13787 00d2 0C2B     		cmp	r3, #12
 13788 00d4 DED0     		beq	.L716
3608:bluetooth_rxtx.c **** 	}
3609:bluetooth_rxtx.c **** }
 13789              		.loc 1 3609 0
 13790 00d6 2437     		adds	r7, r7, #36
 13791              		.cfi_def_cfa_offset 12
 13792 00d8 BD46     		mov	sp, r7
 13793              		.cfi_def_cfa_register 13
 13794              		@ sp needed
 13795 00da 90BD     		pop	{r4, r7, pc}
 13796              	.L718:
ARM GAS  /tmp/cctJTvh1.s 			page 306


 13797              		.align	2
 13798              	.L717:
 13799 00dc F0080000 		.word	.LC1
 13800 00e0 00000000 		.word	slave_mac_address
 13801 00e4 00000000 		.word	le
 13802 00e8 80E100E0 		.word	-536813184
 13803 00ec D6BE898E 		.word	-1903575338
 13804 00f0 00E100E0 		.word	-536813312
 13805 00f4 00000000 		.word	requested_mode
 13806              		.cfi_endproc
 13807              	.LFE56:
 13809              		.section	.text.specan,"ax",%progbits
 13810              		.align	2
 13811              		.global	specan
 13812              		.thumb
 13813              		.thumb_func
 13815              	specan:
 13816              	.LFB57:
3610:bluetooth_rxtx.c **** 
3611:bluetooth_rxtx.c **** /* spectrum analysis */
3612:bluetooth_rxtx.c **** void specan()
3613:bluetooth_rxtx.c **** {
 13817              		.loc 1 3613 0
 13818              		.cfi_startproc
 13819              		@ args = 0, pretend = 0, frame = 64
 13820              		@ frame_needed = 1, uses_anonymous_args = 0
 13821 0000 90B5     		push	{r4, r7, lr}
 13822              		.cfi_def_cfa_offset 12
 13823              		.cfi_offset 4, -12
 13824              		.cfi_offset 7, -8
 13825              		.cfi_offset 14, -4
 13826 0002 91B0     		sub	sp, sp, #68
 13827              		.cfi_def_cfa_offset 80
 13828 0004 00AF     		add	r7, sp, #0
 13829              		.cfi_def_cfa_register 7
3614:bluetooth_rxtx.c **** 	u8 epstat;
3615:bluetooth_rxtx.c **** 	u16 f;
3616:bluetooth_rxtx.c **** 	u8 i = 0;
 13830              		.loc 1 3616 0
 13831 0006 0023     		movs	r3, #0
 13832 0008 87F83D30 		strb	r3, [r7, #61]
3617:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
3618:bluetooth_rxtx.c **** 
3619:bluetooth_rxtx.c **** 	RXLED_SET;
 13833              		.loc 1 3619 0
 13834 000c 5A4B     		ldr	r3, .L730
 13835 000e 1022     		movs	r2, #16
 13836 0010 1A60     		str	r2, [r3]
3620:bluetooth_rxtx.c **** 
3621:bluetooth_rxtx.c **** 	queue_init();
 13837              		.loc 1 3621 0
 13838 0012 FFF7FEFF 		bl	queue_init
3622:bluetooth_rxtx.c **** 
3623:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
3624:bluetooth_rxtx.c **** 	PAEN_SET;
 13839              		.loc 1 3624 0
 13840 0016 594B     		ldr	r3, .L730+4
ARM GAS  /tmp/cctJTvh1.s 			page 307


 13841 0018 8022     		movs	r2, #128
 13842 001a 1A60     		str	r2, [r3]
3625:bluetooth_rxtx.c **** 	//HGM_SET;
3626:bluetooth_rxtx.c **** #endif
3627:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 13843              		.loc 1 3627 0
 13844 001c 1220     		movs	r0, #18
 13845 001e 42F62231 		movw	r1, #11042
 13846 0022 FFF7FEFF 		bl	cc2400_set
3628:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 13847              		.loc 1 3628 0
 13848 0026 1420     		movs	r0, #20
 13849 0028 41F24B31 		movw	r1, #4939
 13850 002c FFF7FEFF 		bl	cc2400_set
3629:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 13851              		.loc 1 3629 0
 13852 0030 2020     		movs	r0, #32
 13853 0032 40F20111 		movw	r1, #257
 13854 0036 FFF7FEFF 		bl	cc2400_set
3630:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 13855              		.loc 1 3630 0
 13856 003a 0320     		movs	r0, #3
 13857 003c 2921     		movs	r1, #41
 13858 003e FFF7FEFF 		bl	cc2400_set
3631:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
3632:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 13859              		.loc 1 3632 0
 13860 0042 00BF     		nop
 13861              	.L720:
 13862              		.loc 1 3632 0 is_stmt 0 discriminator 1
 13863 0044 FFF7FEFF 		bl	cc2400_status
 13864 0048 0346     		mov	r3, r0
 13865 004a 03F04003 		and	r3, r3, #64
 13866 004e 002B     		cmp	r3, #0
 13867 0050 F8D0     		beq	.L720
3633:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 13868              		.loc 1 3633 0 is_stmt 1
 13869 0052 00BF     		nop
 13870              	.L721:
 13871              		.loc 1 3633 0 is_stmt 0 discriminator 1
 13872 0054 FFF7FEFF 		bl	cc2400_status
 13873 0058 0346     		mov	r3, r0
 13874 005a 03F00403 		and	r3, r3, #4
 13875 005e 002B     		cmp	r3, #0
 13876 0060 F8D1     		bne	.L721
3634:bluetooth_rxtx.c **** 
3635:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 13877              		.loc 1 3635 0 is_stmt 1
 13878 0062 7AE0     		b	.L722
 13879              	.L729:
3636:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 13880              		.loc 1 3636 0
 13881 0064 464B     		ldr	r3, .L730+8
 13882 0066 1B88     		ldrh	r3, [r3]	@ movhi
 13883 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 13884 006a 6FE0     		b	.L723
 13885              	.L728:
ARM GAS  /tmp/cctJTvh1.s 			page 308


 13886              	.LBB36:
3637:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 13887              		.loc 1 3637 0
 13888 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 13889 006e 013B     		subs	r3, r3, #1
 13890 0070 9BB2     		uxth	r3, r3
 13891 0072 0220     		movs	r0, #2
 13892 0074 1946     		mov	r1, r3
 13893 0076 FFF7FEFF 		bl	cc2400_set
3638:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 13894              		.loc 1 3638 0
 13895 007a 6120     		movs	r0, #97
 13896 007c FFF7FEFF 		bl	cc2400_strobe
3639:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 13897              		.loc 1 3639 0
 13898 0080 00BF     		nop
 13899              	.L724:
 13900              		.loc 1 3639 0 is_stmt 0 discriminator 1
 13901 0082 FFF7FEFF 		bl	cc2400_status
 13902 0086 0346     		mov	r3, r0
 13903 0088 03F00403 		and	r3, r3, #4
 13904 008c 002B     		cmp	r3, #0
 13905 008e F8D0     		beq	.L724
3640:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 13906              		.loc 1 3640 0 is_stmt 1
 13907 0090 6220     		movs	r0, #98
 13908 0092 FFF7FEFF 		bl	cc2400_strobe
3641:bluetooth_rxtx.c **** 
3642:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
3643:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 13909              		.loc 1 3643 0
 13910 0096 4FF4FA73 		mov	r3, #500
 13911 009a 7B60     		str	r3, [r7, #4]
 13912 009c 00BF     		nop
 13913              	.L725:
 13914              		.loc 1 3643 0 is_stmt 0 discriminator 2
 13915 009e 7B68     		ldr	r3, [r7, #4]
 13916 00a0 013B     		subs	r3, r3, #1
 13917 00a2 7B60     		str	r3, [r7, #4]
 13918 00a4 002B     		cmp	r3, #0
 13919 00a6 FAD1     		bne	.L725
3644:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 13920              		.loc 1 3644 0 is_stmt 1
 13921 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 13922 00ac 1346     		mov	r3, r2
 13923 00ae 5B00     		lsls	r3, r3, #1
 13924 00b0 1344     		add	r3, r3, r2
 13925 00b2 FA8F     		ldrh	r2, [r7, #62]
 13926 00b4 120A     		lsrs	r2, r2, #8
 13927 00b6 92B2     		uxth	r2, r2
 13928 00b8 D2B2     		uxtb	r2, r2
 13929 00ba 07F14001 		add	r1, r7, #64
 13930 00be 0B44     		add	r3, r3, r1
 13931 00c0 03F8382C 		strb	r2, [r3, #-56]
3645:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 13932              		.loc 1 3645 0
 13933 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
ARM GAS  /tmp/cctJTvh1.s 			page 309


 13934 00c8 1346     		mov	r3, r2
 13935 00ca 5B00     		lsls	r3, r3, #1
 13936 00cc 1344     		add	r3, r3, r2
 13937 00ce 0133     		adds	r3, r3, #1
 13938 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 13939 00d2 D2B2     		uxtb	r2, r2
 13940 00d4 07F14001 		add	r1, r7, #64
 13941 00d8 0B44     		add	r3, r3, r1
 13942 00da 03F8382C 		strb	r2, [r3, #-56]
3646:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 13943              		.loc 1 3646 0
 13944 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 13945 00e2 1346     		mov	r3, r2
 13946 00e4 5B00     		lsls	r3, r3, #1
 13947 00e6 1344     		add	r3, r3, r2
 13948 00e8 9C1C     		adds	r4, r3, #2
 13949 00ea 0620     		movs	r0, #6
 13950 00ec FFF7FEFF 		bl	cc2400_get
 13951 00f0 0346     		mov	r3, r0
 13952 00f2 1B0A     		lsrs	r3, r3, #8
 13953 00f4 9BB2     		uxth	r3, r3
 13954 00f6 DAB2     		uxtb	r2, r3
 13955 00f8 07F14003 		add	r3, r7, #64
 13956 00fc 2344     		add	r3, r3, r4
 13957 00fe 03F8382C 		strb	r2, [r3, #-56]
3647:bluetooth_rxtx.c **** 			i++;
 13958              		.loc 1 3647 0
 13959 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 13960 0106 0133     		adds	r3, r3, #1
 13961 0108 87F83D30 		strb	r3, [r7, #61]
3648:bluetooth_rxtx.c **** 			if (i == 16) {
 13962              		.loc 1 3648 0
 13963 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 13964 0110 102B     		cmp	r3, #16
 13965 0112 0DD1     		bne	.L726
3649:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 13966              		.loc 1 3649 0
 13967 0114 07F10803 		add	r3, r7, #8
 13968 0118 0420     		movs	r0, #4
 13969 011a 1946     		mov	r1, r3
 13970 011c FFF7FEFF 		bl	enqueue
3650:bluetooth_rxtx.c **** 				i = 0;
 13971              		.loc 1 3650 0
 13972 0120 0023     		movs	r3, #0
 13973 0122 87F83D30 		strb	r3, [r7, #61]
3651:bluetooth_rxtx.c **** 
3652:bluetooth_rxtx.c **** 				handle_usb(clkn);
 13974              		.loc 1 3652 0
 13975 0126 174B     		ldr	r3, .L730+12
 13976 0128 1B68     		ldr	r3, [r3]
 13977 012a 1846     		mov	r0, r3
 13978 012c FFF7FEFF 		bl	handle_usb
 13979              	.L726:
3653:bluetooth_rxtx.c **** 			}
3654:bluetooth_rxtx.c **** 
3655:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 13980              		.loc 1 3655 0
ARM GAS  /tmp/cctJTvh1.s 			page 310


 13981 0130 6420     		movs	r0, #100
 13982 0132 FFF7FEFF 		bl	cc2400_strobe
3656:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 13983              		.loc 1 3656 0
 13984 0136 00BF     		nop
 13985              	.L727:
 13986              		.loc 1 3656 0 is_stmt 0 discriminator 1
 13987 0138 FFF7FEFF 		bl	cc2400_status
 13988 013c 0346     		mov	r3, r0
 13989 013e 03F00403 		and	r3, r3, #4
 13990 0142 002B     		cmp	r3, #0
 13991 0144 F8D1     		bne	.L727
 13992              	.LBE36:
3636:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 13993              		.loc 1 3636 0 is_stmt 1 discriminator 2
 13994 0146 FB8F     		ldrh	r3, [r7, #62]
 13995 0148 0133     		adds	r3, r3, #1
 13996 014a FB87     		strh	r3, [r7, #62]	@ movhi
 13997              	.L723:
3636:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 13998              		.loc 1 3636 0 is_stmt 0 discriminator 1
 13999 014c FA8F     		ldrh	r2, [r7, #62]
 14000 014e 0E4B     		ldr	r3, .L730+16
 14001 0150 1B88     		ldrh	r3, [r3]	@ movhi
 14002 0152 9BB2     		uxth	r3, r3
 14003 0154 0133     		adds	r3, r3, #1
 14004 0156 9A42     		cmp	r2, r3
 14005 0158 88DB     		blt	.L728
 14006              	.L722:
3635:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 14007              		.loc 1 3635 0 is_stmt 1
 14008 015a 0C4B     		ldr	r3, .L730+20
 14009 015c 1B78     		ldrb	r3, [r3]
 14010 015e DBB2     		uxtb	r3, r3
 14011 0160 042B     		cmp	r3, #4
 14012 0162 3FF47FAF 		beq	.L729
3657:bluetooth_rxtx.c **** 		}
3658:bluetooth_rxtx.c **** 	}
3659:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 14013              		.loc 1 3659 0
 14014 0166 0A4B     		ldr	r3, .L730+24
 14015 0168 0022     		movs	r2, #0
 14016 016a 1A70     		strb	r2, [r3]
3660:bluetooth_rxtx.c **** 	RXLED_CLR;
 14017              		.loc 1 3660 0
 14018 016c 094B     		ldr	r3, .L730+28
 14019 016e 1022     		movs	r2, #16
 14020 0170 1A60     		str	r2, [r3]
3661:bluetooth_rxtx.c **** }
 14021              		.loc 1 3661 0
 14022 0172 4437     		adds	r7, r7, #68
 14023              		.cfi_def_cfa_offset 12
 14024 0174 BD46     		mov	sp, r7
 14025              		.cfi_def_cfa_register 13
 14026              		@ sp needed
 14027 0176 90BD     		pop	{r4, r7, pc}
 14028              	.L731:
ARM GAS  /tmp/cctJTvh1.s 			page 311


 14029              		.align	2
 14030              	.L730:
 14031 0178 38C00920 		.word	537509944
 14032 017c 58C00920 		.word	537509976
 14033 0180 00000000 		.word	low_freq
 14034 0184 00000000 		.word	clkn
 14035 0188 00000000 		.word	high_freq
 14036 018c 00000000 		.word	requested_mode
 14037 0190 00000000 		.word	mode
 14038 0194 3CC00920 		.word	537509948
 14039              		.cfi_endproc
 14040              	.LFE57:
 14042              		.section	.rodata
 14043 08fe 0000     		.align	2
 14044              	.LC2:
 14045 0900 6C09     		.short	2412
 14046 0902 8509     		.short	2437
 14047 0904 9E09     		.short	2462
 14048              		.section	.text.led_specan,"ax",%progbits
 14049              		.align	2
 14050              		.global	led_specan
 14051              		.thumb
 14052              		.thumb_func
 14054              	led_specan:
 14055              	.LFB58:
3662:bluetooth_rxtx.c **** 
3663:bluetooth_rxtx.c **** /* LED based spectrum analysis */
3664:bluetooth_rxtx.c **** void led_specan()
3665:bluetooth_rxtx.c **** {
 14056              		.loc 1 3665 0
 14057              		.cfi_startproc
 14058              		@ args = 0, pretend = 0, frame = 16
 14059              		@ frame_needed = 1, uses_anonymous_args = 0
 14060 0000 80B5     		push	{r7, lr}
 14061              		.cfi_def_cfa_offset 8
 14062              		.cfi_offset 7, -8
 14063              		.cfi_offset 14, -4
 14064 0002 84B0     		sub	sp, sp, #16
 14065              		.cfi_def_cfa_offset 24
 14066 0004 00AF     		add	r7, sp, #0
 14067              		.cfi_def_cfa_register 7
3666:bluetooth_rxtx.c **** 	int8_t lvl;
3667:bluetooth_rxtx.c **** 	u8 i = 0;
 14068              		.loc 1 3667 0
 14069 0006 0023     		movs	r3, #0
 14070 0008 FB73     		strb	r3, [r7, #15]
3668:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 14071              		.loc 1 3668 0
 14072 000a 5B4A     		ldr	r2, .L749
 14073 000c 07F10803 		add	r3, r7, #8
 14074 0010 1068     		ldr	r0, [r2]	@ unaligned
 14075 0012 1860     		str	r0, [r3]	@ unaligned
 14076 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 14077 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
3669:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
3670:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
3671:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 312


3672:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
3673:bluetooth_rxtx.c **** 	PAEN_SET;
 14078              		.loc 1 3673 0
 14079 0018 584B     		ldr	r3, .L749+4
 14080 001a 8022     		movs	r2, #128
 14081 001c 1A60     		str	r2, [r3]
3674:bluetooth_rxtx.c **** 	//HGM_SET;
3675:bluetooth_rxtx.c **** #endif
3676:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 14082              		.loc 1 3676 0
 14083 001e 1220     		movs	r0, #18
 14084 0020 42F62231 		movw	r1, #11042
 14085 0024 FFF7FEFF 		bl	cc2400_set
3677:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 14086              		.loc 1 3677 0
 14087 0028 1420     		movs	r0, #20
 14088 002a 41F24B31 		movw	r1, #4939
 14089 002e FFF7FEFF 		bl	cc2400_set
3678:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 14090              		.loc 1 3678 0
 14091 0032 2020     		movs	r0, #32
 14092 0034 40F20111 		movw	r1, #257
 14093 0038 FFF7FEFF 		bl	cc2400_set
3679:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 14094              		.loc 1 3679 0
 14095 003c 0320     		movs	r0, #3
 14096 003e 2921     		movs	r1, #41
 14097 0040 FFF7FEFF 		bl	cc2400_set
3680:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 14098              		.loc 1 3680 0
 14099 0044 0620     		movs	r0, #6
 14100 0046 F121     		movs	r1, #241
 14101 0048 FFF7FEFF 		bl	cc2400_set
3681:bluetooth_rxtx.c **** 
3682:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 14102              		.loc 1 3682 0
 14103 004c 00BF     		nop
 14104              	.L733:
 14105              		.loc 1 3682 0 is_stmt 0 discriminator 1
 14106 004e FFF7FEFF 		bl	cc2400_status
 14107 0052 0346     		mov	r3, r0
 14108 0054 03F04003 		and	r3, r3, #64
 14109 0058 002B     		cmp	r3, #0
 14110 005a F8D0     		beq	.L733
3683:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 14111              		.loc 1 3683 0 is_stmt 1
 14112 005c 00BF     		nop
 14113              	.L734:
 14114              		.loc 1 3683 0 is_stmt 0 discriminator 1
 14115 005e FFF7FEFF 		bl	cc2400_status
 14116 0062 0346     		mov	r3, r0
 14117 0064 03F00403 		and	r3, r3, #4
 14118 0068 002B     		cmp	r3, #0
 14119 006a F8D1     		bne	.L734
3684:bluetooth_rxtx.c **** 
3685:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 14120              		.loc 1 3685 0 is_stmt 1
ARM GAS  /tmp/cctJTvh1.s 			page 313


 14121 006c 79E0     		b	.L735
 14122              	.L748:
 14123              	.LBB37:
3686:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 14124              		.loc 1 3686 0
 14125 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 14126 0070 5B00     		lsls	r3, r3, #1
 14127 0072 07F11002 		add	r2, r7, #16
 14128 0076 1344     		add	r3, r3, r2
 14129 0078 33F8083C 		ldrh	r3, [r3, #-8]
 14130 007c 013B     		subs	r3, r3, #1
 14131 007e 9BB2     		uxth	r3, r3
 14132 0080 0220     		movs	r0, #2
 14133 0082 1946     		mov	r1, r3
 14134 0084 FFF7FEFF 		bl	cc2400_set
3687:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 14135              		.loc 1 3687 0
 14136 0088 6120     		movs	r0, #97
 14137 008a FFF7FEFF 		bl	cc2400_strobe
3688:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 14138              		.loc 1 3688 0
 14139 008e 00BF     		nop
 14140              	.L736:
 14141              		.loc 1 3688 0 is_stmt 0 discriminator 1
 14142 0090 FFF7FEFF 		bl	cc2400_status
 14143 0094 0346     		mov	r3, r0
 14144 0096 03F00403 		and	r3, r3, #4
 14145 009a 002B     		cmp	r3, #0
 14146 009c F8D0     		beq	.L736
3689:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 14147              		.loc 1 3689 0 is_stmt 1
 14148 009e 6220     		movs	r0, #98
 14149 00a0 FFF7FEFF 		bl	cc2400_strobe
3690:bluetooth_rxtx.c **** 
3691:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
3692:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 14150              		.loc 1 3692 0
 14151 00a4 4FF4FA73 		mov	r3, #500
 14152 00a8 7B60     		str	r3, [r7, #4]
 14153 00aa 00BF     		nop
 14154              	.L737:
 14155              		.loc 1 3692 0 is_stmt 0 discriminator 2
 14156 00ac 7B68     		ldr	r3, [r7, #4]
 14157 00ae 013B     		subs	r3, r3, #1
 14158 00b0 7B60     		str	r3, [r7, #4]
 14159 00b2 002B     		cmp	r3, #0
 14160 00b4 FAD1     		bne	.L737
3693:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 14161              		.loc 1 3693 0 is_stmt 1
 14162 00b6 0620     		movs	r0, #6
 14163 00b8 FFF7FEFF 		bl	cc2400_get
 14164 00bc 0346     		mov	r3, r0
 14165 00be 1B0A     		lsrs	r3, r3, #8
 14166 00c0 9BB2     		uxth	r3, r3
 14167 00c2 BB73     		strb	r3, [r7, #14]
3694:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 14168              		.loc 1 3694 0
ARM GAS  /tmp/cctJTvh1.s 			page 314


 14169 00c4 2E4B     		ldr	r3, .L749+8
 14170 00c6 1B78     		ldrb	r3, [r3]
 14171 00c8 DBB2     		uxtb	r3, r3
 14172 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 14173 00ce 5BB2     		sxtb	r3, r3
 14174 00d0 9A42     		cmp	r2, r3
 14175 00d2 15DD     		ble	.L738
3695:bluetooth_rxtx.c ****             switch (i) {
 14176              		.loc 1 3695 0
 14177 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 14178 00d6 012B     		cmp	r3, #1
 14179 00d8 09D0     		beq	.L740
 14180 00da 022B     		cmp	r3, #2
 14181 00dc 0BD0     		beq	.L741
 14182 00de 002B     		cmp	r3, #0
 14183 00e0 00D0     		beq	.L742
 14184 00e2 21E0     		b	.L743
 14185              	.L742:
3696:bluetooth_rxtx.c ****                 case 0:
3697:bluetooth_rxtx.c ****                     TXLED_SET;
 14186              		.loc 1 3697 0
 14187 00e4 274B     		ldr	r3, .L749+12
 14188 00e6 4FF48072 		mov	r2, #256
 14189 00ea 1A60     		str	r2, [r3]
3698:bluetooth_rxtx.c ****                     break;
 14190              		.loc 1 3698 0
 14191 00ec 07E0     		b	.L739
 14192              	.L740:
3699:bluetooth_rxtx.c ****                 case 1:
3700:bluetooth_rxtx.c ****                     RXLED_SET;
 14193              		.loc 1 3700 0
 14194 00ee 254B     		ldr	r3, .L749+12
 14195 00f0 1022     		movs	r2, #16
 14196 00f2 1A60     		str	r2, [r3]
3701:bluetooth_rxtx.c ****                     break;
 14197              		.loc 1 3701 0
 14198 00f4 03E0     		b	.L739
 14199              	.L741:
3702:bluetooth_rxtx.c ****                 case 2:
3703:bluetooth_rxtx.c ****                     USRLED_SET;
 14200              		.loc 1 3703 0
 14201 00f6 234B     		ldr	r3, .L749+12
 14202 00f8 0222     		movs	r2, #2
 14203 00fa 1A60     		str	r2, [r3]
3704:bluetooth_rxtx.c ****                     break;
 14204              		.loc 1 3704 0
 14205 00fc 00BF     		nop
 14206              	.L739:
 14207 00fe 13E0     		b	.L743
 14208              	.L738:
3705:bluetooth_rxtx.c ****             }
3706:bluetooth_rxtx.c ****         }
3707:bluetooth_rxtx.c ****         else {
3708:bluetooth_rxtx.c ****             switch (i) {
 14209              		.loc 1 3708 0
 14210 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 14211 0102 012B     		cmp	r3, #1
ARM GAS  /tmp/cctJTvh1.s 			page 315


 14212 0104 08D0     		beq	.L744
 14213 0106 022B     		cmp	r3, #2
 14214 0108 0AD0     		beq	.L745
 14215 010a 002B     		cmp	r3, #0
 14216 010c 0CD1     		bne	.L743
3709:bluetooth_rxtx.c ****                 case 0:
3710:bluetooth_rxtx.c ****                     TXLED_CLR;
 14217              		.loc 1 3710 0
 14218 010e 1E4B     		ldr	r3, .L749+16
 14219 0110 4FF48072 		mov	r2, #256
 14220 0114 1A60     		str	r2, [r3]
3711:bluetooth_rxtx.c ****                     break;
 14221              		.loc 1 3711 0
 14222 0116 07E0     		b	.L743
 14223              	.L744:
3712:bluetooth_rxtx.c ****                 case 1:
3713:bluetooth_rxtx.c ****                     RXLED_CLR;
 14224              		.loc 1 3713 0
 14225 0118 1B4B     		ldr	r3, .L749+16
 14226 011a 1022     		movs	r2, #16
 14227 011c 1A60     		str	r2, [r3]
3714:bluetooth_rxtx.c ****                     break;
 14228              		.loc 1 3714 0
 14229 011e 03E0     		b	.L743
 14230              	.L745:
3715:bluetooth_rxtx.c ****                 case 2:
3716:bluetooth_rxtx.c ****                     USRLED_CLR;
 14231              		.loc 1 3716 0
 14232 0120 194B     		ldr	r3, .L749+16
 14233 0122 0222     		movs	r2, #2
 14234 0124 1A60     		str	r2, [r3]
3717:bluetooth_rxtx.c ****                     break;
 14235              		.loc 1 3717 0
 14236 0126 00BF     		nop
 14237              	.L743:
3718:bluetooth_rxtx.c ****             }
3719:bluetooth_rxtx.c ****         }
3720:bluetooth_rxtx.c **** 
3721:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 14238              		.loc 1 3721 0
 14239 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 14240 012a 5A1C     		adds	r2, r3, #1
 14241 012c 174B     		ldr	r3, .L749+20
 14242 012e 83FB0231 		smull	r3, r1, r3, r2
 14243 0132 D317     		asrs	r3, r2, #31
 14244 0134 C91A     		subs	r1, r1, r3
 14245 0136 0B46     		mov	r3, r1
 14246 0138 5B00     		lsls	r3, r3, #1
 14247 013a 0B44     		add	r3, r3, r1
 14248 013c D11A     		subs	r1, r2, r3
 14249 013e 0B46     		mov	r3, r1
 14250 0140 FB73     		strb	r3, [r7, #15]
3722:bluetooth_rxtx.c **** 
3723:bluetooth_rxtx.c **** 		handle_usb(clkn);
 14251              		.loc 1 3723 0
 14252 0142 134B     		ldr	r3, .L749+24
 14253 0144 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cctJTvh1.s 			page 316


 14254 0146 1846     		mov	r0, r3
 14255 0148 FFF7FEFF 		bl	handle_usb
3724:bluetooth_rxtx.c ****         //wait(1);
3725:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 14256              		.loc 1 3725 0
 14257 014c 6420     		movs	r0, #100
 14258 014e FFF7FEFF 		bl	cc2400_strobe
3726:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 14259              		.loc 1 3726 0
 14260 0152 00BF     		nop
 14261              	.L747:
 14262              		.loc 1 3726 0 is_stmt 0 discriminator 1
 14263 0154 FFF7FEFF 		bl	cc2400_status
 14264 0158 0346     		mov	r3, r0
 14265 015a 03F00403 		and	r3, r3, #4
 14266 015e 002B     		cmp	r3, #0
 14267 0160 F8D1     		bne	.L747
 14268              	.L735:
 14269              	.LBE37:
3685:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 14270              		.loc 1 3685 0 is_stmt 1
 14271 0162 0C4B     		ldr	r3, .L749+28
 14272 0164 1B78     		ldrb	r3, [r3]
 14273 0166 DBB2     		uxtb	r3, r3
 14274 0168 072B     		cmp	r3, #7
 14275 016a 80D0     		beq	.L748
3727:bluetooth_rxtx.c **** 	}
3728:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 14276              		.loc 1 3728 0
 14277 016c 0A4B     		ldr	r3, .L749+32
 14278 016e 0022     		movs	r2, #0
 14279 0170 1A70     		strb	r2, [r3]
3729:bluetooth_rxtx.c **** }
 14280              		.loc 1 3729 0
 14281 0172 1037     		adds	r7, r7, #16
 14282              		.cfi_def_cfa_offset 8
 14283 0174 BD46     		mov	sp, r7
 14284              		.cfi_def_cfa_register 13
 14285              		@ sp needed
 14286 0176 80BD     		pop	{r7, pc}
 14287              	.L750:
 14288              		.align	2
 14289              	.L749:
 14290 0178 00090000 		.word	.LC2
 14291 017c 58C00920 		.word	537509976
 14292 0180 00000000 		.word	rssi_threshold
 14293 0184 38C00920 		.word	537509944
 14294 0188 3CC00920 		.word	537509948
 14295 018c 56555555 		.word	1431655766
 14296 0190 00000000 		.word	clkn
 14297 0194 00000000 		.word	requested_mode
 14298 0198 00000000 		.word	mode
 14299              		.cfi_endproc
 14300              	.LFE58:
 14302              		.section	.rodata
 14303 0906 0000     		.align	2
 14304              	.LC3:
ARM GAS  /tmp/cctJTvh1.s 			page 317


 14305 0908 B3       		.byte	-77
 14306 0909 6F       		.byte	111
 14307 090a 00       		.byte	0
 14308 090b 4B       		.byte	75
 14309 090c 85       		.byte	-123
 14310 090d E4       		.byte	-28
 14311 090e 10       		.byte	16
 14312 090f 72       		.byte	114
 14313 0910 EE       		.byte	-18
 14314 0911 0C       		.byte	12
 14315 0912 E8       		.byte	-24
 14316 0913 4A       		.byte	74
 14317 0914 96       		.byte	-106
 14318 0915 DC       		.byte	-36
 14319 0916 1F       		.byte	31
 14320 0917 87       		.byte	-121
 14321 0918 CA       		.byte	-54
 14322 0919 AA       		.byte	-86
 14323 091a AA       		.byte	-86
 14324 091b AA       		.byte	-86
 14325 091c AA       		.byte	-86
 14326 091d AA       		.byte	-86
 14327 091e AA       		.byte	-86
 14328 091f AA       		.byte	-86
 14329 0920 AA       		.byte	-86
 14330 0921 AA       		.byte	-86
 14331 0922 AA       		.byte	-86
 14332 0923 AA       		.byte	-86
 14333 0924 AA       		.byte	-86
 14334 0925 AA       		.byte	-86
 14335 0926 AA       		.byte	-86
 14336 0927 AA       		.byte	-86
 14337 0928 AA       		.byte	-86
 14338 0929 AA       		.byte	-86
 14339 092a AA       		.byte	-86
 14340 092b AA       		.byte	-86
 14341 092c F3       		.byte	-13
 14342 092d B6       		.byte	-74
 14343 092e 51       		.byte	81
 14344 092f 30       		.byte	48
 14345 0930 E0       		.byte	-32
 14346              		.section	.text.cc2400_txtest,"ax",%progbits
 14347              		.align	2
 14348              		.global	cc2400_txtest
 14349              		.thumb
 14350              		.thumb_func
 14352              	cc2400_txtest:
 14353              	.LFB59:
3730:bluetooth_rxtx.c **** 
3731:bluetooth_rxtx.c **** void cc2400_txtest(volatile u8 *mod_ptr)
3732:bluetooth_rxtx.c **** {
 14354              		.loc 1 3732 0
 14355              		.cfi_startproc
 14356              		@ args = 0, pretend = 0, frame = 136
 14357              		@ frame_needed = 1, uses_anonymous_args = 0
 14358 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 14359              		.cfi_def_cfa_offset 20
ARM GAS  /tmp/cctJTvh1.s 			page 318


 14360              		.cfi_offset 4, -20
 14361              		.cfi_offset 5, -16
 14362              		.cfi_offset 6, -12
 14363              		.cfi_offset 7, -8
 14364              		.cfi_offset 14, -4
 14365 0002 A3B0     		sub	sp, sp, #140
 14366              		.cfi_def_cfa_offset 160
 14367 0004 00AF     		add	r7, sp, #0
 14368              		.cfi_def_cfa_register 7
 14369 0006 7860     		str	r0, [r7, #4]
3733:bluetooth_rxtx.c ****   unsigned i, j;
3734:bluetooth_rxtx.c ****   int numPkt = 10;
 14370              		.loc 1 3734 0
 14371 0008 0A23     		movs	r3, #10
 14372 000a BB67     		str	r3, [r7, #120]
3735:bluetooth_rxtx.c ****   u8 payload[41] = {0xb3, 0x6f, 0x00, 0x4b,
 14373              		.loc 1 3735 0
 14374 000c 714B     		ldr	r3, .L765
 14375 000e 1C46     		mov	r4, r3
 14376 0010 07F14806 		add	r6, r7, #72
 14377 0014 04F1200E 		add	lr, r4, #32
 14378              	.L752:
 14379 0018 3546     		mov	r5, r6
 14380 001a 2346     		mov	r3, r4
 14381 001c 1868     		ldr	r0, [r3]	@ unaligned
 14382 001e 5968     		ldr	r1, [r3, #4]	@ unaligned
 14383 0020 9A68     		ldr	r2, [r3, #8]	@ unaligned
 14384 0022 DB68     		ldr	r3, [r3, #12]	@ unaligned
 14385 0024 0FC5     		stmia	r5!, {r0, r1, r2, r3}
 14386 0026 1034     		adds	r4, r4, #16
 14387 0028 1036     		adds	r6, r6, #16
 14388 002a 7445     		cmp	r4, lr
 14389 002c F4D1     		bne	.L752
 14390 002e 3346     		mov	r3, r6
 14391 0030 2246     		mov	r2, r4
 14392 0032 1068     		ldr	r0, [r2]	@ unaligned
 14393 0034 5168     		ldr	r1, [r2, #4]	@ unaligned
 14394 0036 03C3     		stmia	r3!, {r0, r1}
 14395 0038 127A     		ldrb	r2, [r2, #8]
 14396 003a 1A70     		strb	r2, [r3]
3736:bluetooth_rxtx.c **** 	 	0x85, 0xe4, 0x10, 0x72,
3737:bluetooth_rxtx.c **** 		0xee, 0x0c, 0xe8, 0x4a,
3738:bluetooth_rxtx.c **** 		0x96, 0xdc, 0x1f, 0x87,
3739:bluetooth_rxtx.c **** 		0xca, 0xaa, 0xaa, 0xaa,
3740:bluetooth_rxtx.c **** 		0xaa, 0xaa, 0xaa, 0xaa,
3741:bluetooth_rxtx.c **** 		0xaa, 0xaa, 0xaa, 0xaa,
3742:bluetooth_rxtx.c **** 		0xaa, 0xaa, 0xaa, 0xaa,
3743:bluetooth_rxtx.c **** 		0xaa, 0xaa, 0xaa, 0xaa, 
3744:bluetooth_rxtx.c **** 		0xf3, 0xb6, 0x51, 0x30, 
3745:bluetooth_rxtx.c **** 		0xe0};
3746:bluetooth_rxtx.c ****   u8 txbuf[64];
3747:bluetooth_rxtx.c ****   u8 tx_len;
3748:bluetooth_rxtx.c ****   u16 gio_save;
3749:bluetooth_rxtx.c ****   u8 len = 41;
 14397              		.loc 1 3749 0
 14398 003c 2923     		movs	r3, #41
 14399 003e 87F87730 		strb	r3, [r7, #119]
ARM GAS  /tmp/cctJTvh1.s 			page 319


3750:bluetooth_rxtx.c ****   u8 byte;
3751:bluetooth_rxtx.c **** 
3752:bluetooth_rxtx.c **** /*
3753:bluetooth_rxtx.c ****   for (i = 0; i < len; ++i)
3754:bluetooth_rxtx.c ****   {
3755:bluetooth_rxtx.c **** 	byte = payload[i];
3756:bluetooth_rxtx.c **** 	txbuf[i] = 0;
3757:bluetooth_rxtx.c **** 	for (j = 0; j < 8; ++j)
3758:bluetooth_rxtx.c **** 	{	
3759:bluetooth_rxtx.c **** 		txbuf[i] |= (byte & 1) << (7 - j);
3760:bluetooth_rxtx.c **** 		byte >>= 1; 
3761:bluetooth_rxtx.c **** 	}
3762:bluetooth_rxtx.c ****  	
3763:bluetooth_rxtx.c ****   }
3764:bluetooth_rxtx.c **** */
3765:bluetooth_rxtx.c ****   cc2400_set(MANAND, 0x7fff);
 14400              		.loc 1 3765 0
 14401 0042 0D20     		movs	r0, #13
 14402 0044 47F6FF71 		movw	r1, #32767
 14403 0048 FFF7FEFF 		bl	cc2400_set
3766:bluetooth_rxtx.c ****   cc2400_set(LMTST, 0x2b22);  
 14404              		.loc 1 3766 0
 14405 004c 1220     		movs	r0, #18
 14406 004e 42F62231 		movw	r1, #11042
 14407 0052 FFF7FEFF 		bl	cc2400_set
3767:bluetooth_rxtx.c ****   cc2400_set(MDMTST0, 0x124b);  
 14408              		.loc 1 3767 0
 14409 0056 1420     		movs	r0, #20
 14410 0058 41F24B21 		movw	r1, #4683
 14411 005c FFF7FEFF 		bl	cc2400_set
3768:bluetooth_rxtx.c ****   cc2400_set(GRMDM, 0x0d61);  
 14412              		.loc 1 3768 0
 14413 0060 2020     		movs	r0, #32
 14414 0062 40F66151 		movw	r1, #3425
 14415 0066 FFF7FEFF 		bl	cc2400_set
3769:bluetooth_rxtx.c ****   cc2400_set(FSDIV, channel);  
 14416              		.loc 1 3769 0
 14417 006a 5B4B     		ldr	r3, .L765+4
 14418 006c 1B88     		ldrh	r3, [r3]	@ movhi
 14419 006e 9BB2     		uxth	r3, r3
 14420 0070 0220     		movs	r0, #2
 14421 0072 1946     		mov	r1, r3
 14422 0074 FFF7FEFF 		bl	cc2400_set
3770:bluetooth_rxtx.c ****   cc2400_set(FREND, 8 | 0);  
 14423              		.loc 1 3770 0
 14424 0078 0520     		movs	r0, #5
 14425 007a 0821     		movs	r1, #8
 14426 007c FFF7FEFF 		bl	cc2400_set
3771:bluetooth_rxtx.c ****   cc2400_set(MDMCTRL, 0x0040);  
 14427              		.loc 1 3771 0
 14428 0080 0320     		movs	r0, #3
 14429 0082 4021     		movs	r1, #64
 14430 0084 FFF7FEFF 		bl	cc2400_set
3772:bluetooth_rxtx.c **** //  cc2400_set(INT, 0x0010); // FIFO_Threshold: 16 bytes
3773:bluetooth_rxtx.c ****   cc2400_set(INT, 0x0014); // FIFO_Threshold: 20 bytes
 14431              		.loc 1 3773 0
 14432 0088 2320     		movs	r0, #35
ARM GAS  /tmp/cctJTvh1.s 			page 320


 14433 008a 1421     		movs	r1, #20
 14434 008c FFF7FEFF 		bl	cc2400_set
3774:bluetooth_rxtx.c **** //  cc2400_set(INT, 0x000c); // FIFO_Threshold: 12 bytes
3775:bluetooth_rxtx.c ****   
3776:bluetooth_rxtx.c ****   gio_save = cc2400_get(IOCFG);
 14435              		.loc 1 3776 0
 14436 0090 0820     		movs	r0, #8
 14437 0092 FFF7FEFF 		bl	cc2400_get
 14438 0096 0346     		mov	r3, r0
 14439 0098 A7F87430 		strh	r3, [r7, #116]	@ movhi
3777:bluetooth_rxtx.c ****   cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));  
 14440              		.loc 1 3777 0
 14441 009c B7F87430 		ldrh	r3, [r7, #116]
 14442 00a0 C3F30803 		ubfx	r3, r3, #0, #9
 14443 00a4 9BB2     		uxth	r3, r3
 14444 00a6 43F49C43 		orr	r3, r3, #19968
 14445 00aa 9BB2     		uxth	r3, r3
 14446 00ac 9BB2     		uxth	r3, r3
 14447 00ae 0820     		movs	r0, #8
 14448 00b0 1946     		mov	r1, r3
 14449 00b2 FFF7FEFF 		bl	cc2400_set
3778:bluetooth_rxtx.c **** 
3779:bluetooth_rxtx.c ****   while (!(cc2400_status() & XOSC16M_STABLE));
 14450              		.loc 1 3779 0
 14451 00b6 00BF     		nop
 14452              	.L753:
 14453              		.loc 1 3779 0 is_stmt 0 discriminator 1
 14454 00b8 FFF7FEFF 		bl	cc2400_status
 14455 00bc 0346     		mov	r3, r0
 14456 00be 03F04003 		and	r3, r3, #64
 14457 00c2 002B     		cmp	r3, #0
 14458 00c4 F8D0     		beq	.L753
3780:bluetooth_rxtx.c ****   cc2400_strobe(SFSON);
 14459              		.loc 1 3780 0 is_stmt 1
 14460 00c6 6120     		movs	r0, #97
 14461 00c8 FFF7FEFF 		bl	cc2400_strobe
3781:bluetooth_rxtx.c ****   while (!(cc2400_status() & FS_LOCK));
 14462              		.loc 1 3781 0
 14463 00cc 00BF     		nop
 14464              	.L754:
 14465              		.loc 1 3781 0 is_stmt 0 discriminator 1
 14466 00ce FFF7FEFF 		bl	cc2400_status
 14467 00d2 0346     		mov	r3, r0
 14468 00d4 03F00403 		and	r3, r3, #4
 14469 00d8 002B     		cmp	r3, #0
 14470 00da F8D0     		beq	.L754
3782:bluetooth_rxtx.c ****   TXLED_SET;
 14471              		.loc 1 3782 0 is_stmt 1
 14472 00dc 3F4B     		ldr	r3, .L765+8
 14473 00de 4FF48072 		mov	r2, #256
 14474 00e2 1A60     		str	r2, [r3]
3783:bluetooth_rxtx.c ****   PAEN_SET;
 14475              		.loc 1 3783 0
 14476 00e4 3E4B     		ldr	r3, .L765+12
 14477 00e6 8022     		movs	r2, #128
 14478 00e8 1A60     		str	r2, [r3]
3784:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cctJTvh1.s 			page 321


3785:bluetooth_rxtx.c ****   while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 14479              		.loc 1 3785 0
 14480 00ea 00BF     		nop
 14481              	.L755:
 14482              		.loc 1 3785 0 is_stmt 0 discriminator 1
 14483 00ec 0E20     		movs	r0, #14
 14484 00ee FFF7FEFF 		bl	cc2400_get
 14485 00f2 0346     		mov	r3, r0
 14486 00f4 03F01F03 		and	r3, r3, #31
 14487 00f8 0F2B     		cmp	r3, #15
 14488 00fa F7D1     		bne	.L755
3786:bluetooth_rxtx.c **** 
3787:bluetooth_rxtx.c ****  
3788:bluetooth_rxtx.c ****   for (j = 0; j < numPkt; j++)
 14489              		.loc 1 3788 0 is_stmt 1
 14490 00fc 0023     		movs	r3, #0
 14491 00fe C7F88030 		str	r3, [r7, #128]
 14492 0102 47E0     		b	.L756
 14493              	.L763:
 14494              	.LBB38:
3789:bluetooth_rxtx.c ****   {
3790:bluetooth_rxtx.c ****   	cc2400_strobe(STX);
 14495              		.loc 1 3790 0
 14496 0104 6320     		movs	r0, #99
 14497 0106 FFF7FEFF 		bl	cc2400_strobe
3791:bluetooth_rxtx.c ****   
3792:bluetooth_rxtx.c ****  	for (i = 0; i < len; i += 16)
 14498              		.loc 1 3792 0
 14499 010a 0023     		movs	r3, #0
 14500 010c C7F88430 		str	r3, [r7, #132]
 14501 0110 24E0     		b	.L757
 14502              	.L760:
3793:bluetooth_rxtx.c ****   	{
3794:bluetooth_rxtx.c **** 		while (GIO6);
 14503              		.loc 1 3794 0
 14504 0112 00BF     		nop
 14505              	.L758:
 14506              		.loc 1 3794 0 is_stmt 0 discriminator 1
 14507 0114 334B     		ldr	r3, .L765+16
 14508 0116 1B68     		ldr	r3, [r3]
 14509 0118 03F00403 		and	r3, r3, #4
 14510 011c 002B     		cmp	r3, #0
 14511 011e F9D1     		bne	.L758
3795:bluetooth_rxtx.c **** 		tx_len = len - i;
 14512              		.loc 1 3795 0 is_stmt 1
 14513 0120 D7F88430 		ldr	r3, [r7, #132]
 14514 0124 DBB2     		uxtb	r3, r3
 14515 0126 97F87720 		ldrb	r2, [r7, #119]
 14516 012a D31A     		subs	r3, r2, r3
 14517 012c 87F87330 		strb	r3, [r7, #115]
3796:bluetooth_rxtx.c ****     		if (tx_len > 16)
 14518              		.loc 1 3796 0
 14519 0130 97F87330 		ldrb	r3, [r7, #115]	@ zero_extendqisi2
 14520 0134 102B     		cmp	r3, #16
 14521 0136 02D9     		bls	.L759
3797:bluetooth_rxtx.c **** 			tx_len = 16;
 14522              		.loc 1 3797 0
ARM GAS  /tmp/cctJTvh1.s 			page 322


 14523 0138 1023     		movs	r3, #16
 14524 013a 87F87330 		strb	r3, [r7, #115]
 14525              	.L759:
3798:bluetooth_rxtx.c **** //	cc2400_fifo_write(tx_len, payload + i);
3799:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, 16, payload + i);
 14526              		.loc 1 3799 0 discriminator 2
 14527 013e 07F14802 		add	r2, r7, #72
 14528 0142 D7F88430 		ldr	r3, [r7, #132]
 14529 0146 1344     		add	r3, r3, r2
 14530 0148 7020     		movs	r0, #112
 14531 014a 1021     		movs	r1, #16
 14532 014c 1A46     		mov	r2, r3
 14533 014e FFF7FEFF 		bl	cc2400_spi_buf
3792:bluetooth_rxtx.c ****   	{
 14534              		.loc 1 3792 0 discriminator 2
 14535 0152 D7F88430 		ldr	r3, [r7, #132]
 14536 0156 1033     		adds	r3, r3, #16
 14537 0158 C7F88430 		str	r3, [r7, #132]
 14538              	.L757:
3792:bluetooth_rxtx.c ****   	{
 14539              		.loc 1 3792 0 is_stmt 0 discriminator 1
 14540 015c 97F87720 		ldrb	r2, [r7, #119]	@ zero_extendqisi2
 14541 0160 D7F88430 		ldr	r3, [r7, #132]
 14542 0164 9A42     		cmp	r2, r3
 14543 0166 D4D8     		bhi	.L760
3800:bluetooth_rxtx.c ****  	}
3801:bluetooth_rxtx.c ****   
3802:bluetooth_rxtx.c ****   	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 14544              		.loc 1 3802 0 is_stmt 1
 14545 0168 00BF     		nop
 14546              	.L761:
 14547              		.loc 1 3802 0 is_stmt 0 discriminator 1
 14548 016a 0E20     		movs	r0, #14
 14549 016c FFF7FEFF 		bl	cc2400_get
 14550 0170 0346     		mov	r3, r0
 14551 0172 03F01F03 		and	r3, r3, #31
 14552 0176 0F2B     		cmp	r3, #15
 14553 0178 F7D1     		bne	.L761
3803:bluetooth_rxtx.c **** //	int k = 1428571; while (k--);
3804:bluetooth_rxtx.c **** 	int k = 100000; while (k--);
 14554              		.loc 1 3804 0 is_stmt 1
 14555 017a 1B4B     		ldr	r3, .L765+20
 14556 017c FB67     		str	r3, [r7, #124]
 14557 017e 00BF     		nop
 14558              	.L762:
 14559              		.loc 1 3804 0 is_stmt 0 discriminator 2
 14560 0180 FB6F     		ldr	r3, [r7, #124]
 14561 0182 5A1E     		subs	r2, r3, #1
 14562 0184 FA67     		str	r2, [r7, #124]
 14563 0186 002B     		cmp	r3, #0
 14564 0188 FAD1     		bne	.L762
 14565              	.LBE38:
3788:bluetooth_rxtx.c ****   {
 14566              		.loc 1 3788 0 is_stmt 1 discriminator 2
 14567 018a D7F88030 		ldr	r3, [r7, #128]
 14568 018e 0133     		adds	r3, r3, #1
 14569 0190 C7F88030 		str	r3, [r7, #128]
ARM GAS  /tmp/cctJTvh1.s 			page 323


 14570              	.L756:
3788:bluetooth_rxtx.c ****   {
 14571              		.loc 1 3788 0 is_stmt 0 discriminator 1
 14572 0194 BA6F     		ldr	r2, [r7, #120]
 14573 0196 D7F88030 		ldr	r3, [r7, #128]
 14574 019a 9A42     		cmp	r2, r3
 14575 019c B2D8     		bhi	.L763
3805:bluetooth_rxtx.c ****   }
3806:bluetooth_rxtx.c ****   TXLED_CLR;
 14576              		.loc 1 3806 0 is_stmt 1
 14577 019e 134B     		ldr	r3, .L765+24
 14578 01a0 4FF48072 		mov	r2, #256
 14579 01a4 1A60     		str	r2, [r3]
3807:bluetooth_rxtx.c ****   
3808:bluetooth_rxtx.c ****   cc2400_strobe(SRFOFF);
 14580              		.loc 1 3808 0
 14581 01a6 6420     		movs	r0, #100
 14582 01a8 FFF7FEFF 		bl	cc2400_strobe
3809:bluetooth_rxtx.c ****   while ((cc2400_status() & FS_LOCK));
 14583              		.loc 1 3809 0
 14584 01ac 00BF     		nop
 14585              	.L764:
 14586              		.loc 1 3809 0 is_stmt 0 discriminator 1
 14587 01ae FFF7FEFF 		bl	cc2400_status
 14588 01b2 0346     		mov	r3, r0
 14589 01b4 03F00403 		and	r3, r3, #4
 14590 01b8 002B     		cmp	r3, #0
 14591 01ba F8D1     		bne	.L764
3810:bluetooth_rxtx.c ****   PAEN_CLR;
 14592              		.loc 1 3810 0 is_stmt 1
 14593 01bc 0C4B     		ldr	r3, .L765+28
 14594 01be 8022     		movs	r2, #128
 14595 01c0 1A60     		str	r2, [r3]
3811:bluetooth_rxtx.c ****   cc2400_set(IOCFG, gio_save);
 14596              		.loc 1 3811 0
 14597 01c2 B7F87430 		ldrh	r3, [r7, #116]
 14598 01c6 0820     		movs	r0, #8
 14599 01c8 1946     		mov	r1, r3
 14600 01ca FFF7FEFF 		bl	cc2400_set
3812:bluetooth_rxtx.c **** }
 14601              		.loc 1 3812 0
 14602 01ce 8C37     		adds	r7, r7, #140
 14603              		.cfi_def_cfa_offset 20
 14604 01d0 BD46     		mov	sp, r7
 14605              		.cfi_def_cfa_register 13
 14606              		@ sp needed
 14607 01d2 F0BD     		pop	{r4, r5, r6, r7, pc}
 14608              	.L766:
 14609              		.align	2
 14610              	.L765:
 14611 01d4 08090000 		.word	.LC3
 14612 01d8 00000000 		.word	channel
 14613 01dc 38C00920 		.word	537509944
 14614 01e0 58C00920 		.word	537509976
 14615 01e4 54C00920 		.word	537509972
 14616 01e8 A0860100 		.word	100000
 14617 01ec 3CC00920 		.word	537509948
ARM GAS  /tmp/cctJTvh1.s 			page 324


 14618 01f0 5CC00920 		.word	537509980
 14619              		.cfi_endproc
 14620              	.LFE59:
 14622              		.section	.text.main,"ax",%progbits
 14623              		.align	2
 14624              		.global	main
 14625              		.thumb
 14626              		.thumb_func
 14628              	main:
 14629              	.LFB60:
3813:bluetooth_rxtx.c **** 
3814:bluetooth_rxtx.c **** int main()
3815:bluetooth_rxtx.c **** {
 14630              		.loc 1 3815 0
 14631              		.cfi_startproc
 14632              		@ args = 0, pretend = 0, frame = 0
 14633              		@ frame_needed = 1, uses_anonymous_args = 0
 14634 0000 80B5     		push	{r7, lr}
 14635              		.cfi_def_cfa_offset 8
 14636              		.cfi_offset 7, -8
 14637              		.cfi_offset 14, -4
 14638 0002 00AF     		add	r7, sp, #0
 14639              		.cfi_def_cfa_register 7
3816:bluetooth_rxtx.c **** 	ubertooth_init();
 14640              		.loc 1 3816 0
 14641 0004 FFF7FEFF 		bl	ubertooth_init
3817:bluetooth_rxtx.c **** //	clkn_init();
3818:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 14642              		.loc 1 3818 0
 14643 0008 5C48     		ldr	r0, .L793
 14644 000a FFF7FEFF 		bl	ubertooth_usb_init
 14645              	.L791:
3819:bluetooth_rxtx.c **** 
3820:bluetooth_rxtx.c **** 	while (1) {
3821:bluetooth_rxtx.c **** 		handle_usb(clkn);
 14646              		.loc 1 3821 0
 14647 000e 5C4B     		ldr	r3, .L793+4
 14648 0010 1B68     		ldr	r3, [r3]
 14649 0012 1846     		mov	r0, r3
 14650 0014 FFF7FEFF 		bl	handle_usb
3822:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 14651              		.loc 1 3822 0
 14652 0018 5A4B     		ldr	r3, .L793+8
 14653 001a 1B78     		ldrb	r3, [r3]
 14654 001c DAB2     		uxtb	r2, r3
 14655 001e 5A4B     		ldr	r3, .L793+12
 14656 0020 1B78     		ldrb	r3, [r3]
 14657 0022 DBB2     		uxtb	r3, r3
 14658 0024 9A42     		cmp	r2, r3
 14659 0026 00F0A880 		beq	.L768
3823:bluetooth_rxtx.c **** 			switch (requested_mode) {
 14660              		.loc 1 3823 0
 14661 002a 564B     		ldr	r3, .L793+8
 14662 002c 1B78     		ldrb	r3, [r3]
 14663 002e DBB2     		uxtb	r3, r3
 14664 0030 132B     		cmp	r3, #19
 14665 0032 00F2A180 		bhi	.L792
ARM GAS  /tmp/cctJTvh1.s 			page 325


 14666 0036 01A2     		adr	r2, .L771
 14667 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 14668              		.p2align 2
 14669              	.L771:
 14670 003c 73010000 		.word	.L770+1
 14671 0040 99000000 		.word	.L772+1
 14672 0044 79010000 		.word	.L792+1
 14673 0048 0B010000 		.word	.L773+1
 14674 004c 53010000 		.word	.L774+1
 14675 0050 1F010000 		.word	.L775+1
 14676 0054 45010000 		.word	.L776+1
 14677 0058 59010000 		.word	.L777+1
 14678 005c ED000000 		.word	.L778+1
 14679 0060 F9000000 		.word	.L779+1
 14680 0064 FF000000 		.word	.L780+1
 14681 0068 8D000000 		.word	.L781+1
 14682 006c 05010000 		.word	.L782+1
 14683 0070 5F010000 		.word	.L783+1
 14684 0074 BD000000 		.word	.L784+1
 14685 0078 D5000000 		.word	.L785+1
 14686 007c E1000000 		.word	.L786+1
 14687 0080 B1000000 		.word	.L787+1
 14688 0084 C9000000 		.word	.L788+1
 14689 0088 A5000000 		.word	.L789+1
 14690              		.p2align 1
 14691              	.L781:
3824:bluetooth_rxtx.c **** 				 case MODE_RESET:
3825:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
3826:bluetooth_rxtx.c **** 					wait(1);
 14692              		.loc 1 3826 0
 14693 008c 0120     		movs	r0, #1
 14694 008e FFF7FEFF 		bl	wait
3827:bluetooth_rxtx.c **** 					reset();
 14695              		.loc 1 3827 0
 14696 0092 FFF7FEFF 		bl	reset
3828:bluetooth_rxtx.c **** 					break;
 14697              		.loc 1 3828 0
 14698 0096 70E0     		b	.L768
 14699              	.L772:
3829:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
3830:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 14700              		.loc 1 3830 0
 14701 0098 3B4B     		ldr	r3, .L793+12
 14702 009a 0122     		movs	r2, #1
 14703 009c 1A70     		strb	r2, [r3]
3831:bluetooth_rxtx.c **** 					bt_stream_legacy();
 14704              		.loc 1 3831 0
 14705 009e FFF7FEFF 		bl	bt_stream_legacy
3832:bluetooth_rxtx.c **** 					break;
 14706              		.loc 1 3832 0
 14707 00a2 6AE0     		b	.L768
 14708              	.L789:
3833:bluetooth_rxtx.c **** 				case MODE_RX_SNIFF:
3834:bluetooth_rxtx.c **** 					mode = MODE_RX_SNIFF;
 14709              		.loc 1 3834 0
 14710 00a4 384B     		ldr	r3, .L793+12
 14711 00a6 1322     		movs	r2, #19
ARM GAS  /tmp/cctJTvh1.s 			page 326


 14712 00a8 1A70     		strb	r2, [r3]
3835:bluetooth_rxtx.c **** 					bt_stream_sniff();
 14713              		.loc 1 3835 0
 14714 00aa FFF7FEFF 		bl	bt_stream_sniff
3836:bluetooth_rxtx.c **** 					break;
 14715              		.loc 1 3836 0
 14716 00ae 64E0     		b	.L768
 14717              	.L787:
3837:bluetooth_rxtx.c **** 
3838:bluetooth_rxtx.c **** 				case MODE_RX_RSSI:
3839:bluetooth_rxtx.c **** 					mode = MODE_RX_RSSI;
 14718              		.loc 1 3839 0
 14719 00b0 354B     		ldr	r3, .L793+12
 14720 00b2 1122     		movs	r2, #17
 14721 00b4 1A70     		strb	r2, [r3]
3840:bluetooth_rxtx.c **** 					bt_stream_rssi();
 14722              		.loc 1 3840 0
 14723 00b6 FFF7FEFF 		bl	bt_stream_rssi
3841:bluetooth_rxtx.c **** 					break;
 14724              		.loc 1 3841 0
 14725 00ba 5EE0     		b	.L768
 14726              	.L784:
3842:bluetooth_rxtx.c **** 				case MODE_RX_FREQ:
3843:bluetooth_rxtx.c **** 					mode = MODE_RX_FREQ;
 14727              		.loc 1 3843 0
 14728 00bc 324B     		ldr	r3, .L793+12
 14729 00be 0E22     		movs	r2, #14
 14730 00c0 1A70     		strb	r2, [r3]
3844:bluetooth_rxtx.c **** 					bt_stream_freq();
 14731              		.loc 1 3844 0
 14732 00c2 FFF7FEFF 		bl	bt_stream_freq
3845:bluetooth_rxtx.c **** 					break;
 14733              		.loc 1 3845 0
 14734 00c6 58E0     		b	.L768
 14735              	.L788:
3846:bluetooth_rxtx.c **** 				case MODE_RX_CFO:
3847:bluetooth_rxtx.c **** 					mode = MODE_RX_CFO;
 14736              		.loc 1 3847 0
 14737 00c8 2F4B     		ldr	r3, .L793+12
 14738 00ca 1222     		movs	r2, #18
 14739 00cc 1A70     		strb	r2, [r3]
3848:bluetooth_rxtx.c **** 					bt_stream_cfo();
 14740              		.loc 1 3848 0
 14741 00ce FFF7FEFF 		bl	bt_stream_cfo
3849:bluetooth_rxtx.c **** 					break;
 14742              		.loc 1 3849 0
 14743 00d2 52E0     		b	.L768
 14744              	.L785:
3850:bluetooth_rxtx.c **** 
3851:bluetooth_rxtx.c **** 				case MODE_RX_PROPOSED:
3852:bluetooth_rxtx.c **** 					mode = MODE_RX_PROPOSED;
 14745              		.loc 1 3852 0
 14746 00d4 2C4B     		ldr	r3, .L793+12
 14747 00d6 0F22     		movs	r2, #15
 14748 00d8 1A70     		strb	r2, [r3]
3853:bluetooth_rxtx.c **** 					bt_stream_proposed();
 14749              		.loc 1 3853 0
ARM GAS  /tmp/cctJTvh1.s 			page 327


 14750 00da FFF7FEFF 		bl	bt_stream_proposed
3854:bluetooth_rxtx.c **** 					break;
 14751              		.loc 1 3854 0
 14752 00de 4CE0     		b	.L768
 14753              	.L786:
3855:bluetooth_rxtx.c **** 				case MODE_RX_HOP:
3856:bluetooth_rxtx.c **** 					mode = MODE_RX_HOP;
 14754              		.loc 1 3856 0
 14755 00e0 294B     		ldr	r3, .L793+12
 14756 00e2 1022     		movs	r2, #16
 14757 00e4 1A70     		strb	r2, [r3]
3857:bluetooth_rxtx.c **** 					bt_stream_hop ();
 14758              		.loc 1 3857 0
 14759 00e6 FFF7FEFF 		bl	bt_stream_hop
3858:bluetooth_rxtx.c **** 					break;
 14760              		.loc 1 3858 0
 14761 00ea 46E0     		b	.L768
 14762              	.L778:
3859:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
3860:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 14763              		.loc 1 3860 0
 14764 00ec 264B     		ldr	r3, .L793+12
 14765 00ee 0822     		movs	r2, #8
 14766 00f0 1A70     		strb	r2, [r3]
3861:bluetooth_rxtx.c **** 					bt_stream_rx();
 14767              		.loc 1 3861 0
 14768 00f2 FFF7FEFF 		bl	bt_stream_rx
3862:bluetooth_rxtx.c **** 					break;
 14769              		.loc 1 3862 0
 14770 00f6 40E0     		b	.L768
 14771              	.L779:
3863:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
3864:bluetooth_rxtx.c **** 					bt_follow_le();
 14772              		.loc 1 3864 0
 14773 00f8 FFF7FEFF 		bl	bt_follow_le
3865:bluetooth_rxtx.c **** 					break;
 14774              		.loc 1 3865 0
 14775 00fc 3DE0     		b	.L768
 14776              	.L780:
3866:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
3867:bluetooth_rxtx.c **** 					bt_promisc_le();
 14777              		.loc 1 3867 0
 14778 00fe FFF7FEFF 		bl	bt_promisc_le
3868:bluetooth_rxtx.c **** 					break;
 14779              		.loc 1 3868 0
 14780 0102 3AE0     		b	.L768
 14781              	.L782:
3869:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
3870:bluetooth_rxtx.c **** 					bt_slave_le();
 14782              		.loc 1 3870 0
 14783 0104 FFF7FEFF 		bl	bt_slave_le
3871:bluetooth_rxtx.c **** 					break;
 14784              		.loc 1 3871 0
 14785 0108 37E0     		b	.L768
 14786              	.L773:
3872:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
3873:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
ARM GAS  /tmp/cctJTvh1.s 			page 328


 14787              		.loc 1 3873 0
 14788 010a 1F4B     		ldr	r3, .L793+12
 14789 010c 0322     		movs	r2, #3
 14790 010e 1A70     		strb	r2, [r3]
3874:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation);
 14791              		.loc 1 3874 0
 14792 0110 1E48     		ldr	r0, .L793+16
 14793 0112 FFF7FEFF 		bl	cc2400_txtest
3875:bluetooth_rxtx.c **** 					requested_mode = MODE_IDLE;
 14794              		.loc 1 3875 0
 14795 0116 1B4B     		ldr	r3, .L793+8
 14796 0118 0022     		movs	r2, #0
 14797 011a 1A70     		strb	r2, [r3]
3876:bluetooth_rxtx.c **** 					break;
 14798              		.loc 1 3876 0
 14799 011c 2DE0     		b	.L768
 14800              	.L775:
3877:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
3878:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 14801              		.loc 1 3878 0
 14802 011e 1A4B     		ldr	r3, .L793+12
 14803 0120 0522     		movs	r2, #5
 14804 0122 1A70     		strb	r2, [r3]
3879:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 14805              		.loc 1 3879 0
 14806 0124 1A48     		ldr	r0, .L793+20
 14807 0126 FFF7FEFF 		bl	cc2400_rangetest
3880:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 14808              		.loc 1 3880 0
 14809 012a 174B     		ldr	r3, .L793+12
 14810 012c 0022     		movs	r2, #0
 14811 012e 1A70     		strb	r2, [r3]
3881:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 14812              		.loc 1 3881 0
 14813 0130 144B     		ldr	r3, .L793+8
 14814 0132 1B78     		ldrb	r3, [r3]
 14815 0134 DBB2     		uxtb	r3, r3
 14816 0136 052B     		cmp	r3, #5
 14817 0138 03D1     		bne	.L790
3882:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 14818              		.loc 1 3882 0
 14819 013a 124B     		ldr	r3, .L793+8
 14820 013c 0022     		movs	r2, #0
 14821 013e 1A70     		strb	r2, [r3]
3883:bluetooth_rxtx.c **** 					break;
 14822              		.loc 1 3883 0
 14823 0140 1BE0     		b	.L768
 14824              	.L790:
 14825 0142 1AE0     		b	.L768
 14826              	.L776:
3884:bluetooth_rxtx.c **** 				case MODE_REPEATER:
3885:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 14827              		.loc 1 3885 0
 14828 0144 104B     		ldr	r3, .L793+12
 14829 0146 0622     		movs	r2, #6
 14830 0148 1A70     		strb	r2, [r3]
3886:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
ARM GAS  /tmp/cctJTvh1.s 			page 329


 14831              		.loc 1 3886 0
 14832 014a 1148     		ldr	r0, .L793+20
 14833 014c FFF7FEFF 		bl	cc2400_repeater
3887:bluetooth_rxtx.c **** 					break;
 14834              		.loc 1 3887 0
 14835 0150 13E0     		b	.L768
 14836              	.L774:
3888:bluetooth_rxtx.c **** 				case MODE_SPECAN:
3889:bluetooth_rxtx.c **** 					specan();
 14837              		.loc 1 3889 0
 14838 0152 FFF7FEFF 		bl	specan
3890:bluetooth_rxtx.c **** 					break;
 14839              		.loc 1 3890 0
 14840 0156 10E0     		b	.L768
 14841              	.L777:
3891:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
3892:bluetooth_rxtx.c **** 					led_specan();
 14842              		.loc 1 3892 0
 14843 0158 FFF7FEFF 		bl	led_specan
3893:bluetooth_rxtx.c **** 					break;
 14844              		.loc 1 3893 0
 14845 015c 0DE0     		b	.L768
 14846              	.L783:
3894:bluetooth_rxtx.c **** 				case MODE_EGO:
3895:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 14847              		.loc 1 3895 0
 14848 015e 0A4B     		ldr	r3, .L793+12
 14849 0160 0D22     		movs	r2, #13
 14850 0162 1A70     		strb	r2, [r3]
3896:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 14851              		.loc 1 3896 0
 14852 0164 0B4B     		ldr	r3, .L793+24
 14853 0166 1B78     		ldrb	r3, [r3]
 14854 0168 DBB2     		uxtb	r3, r3
 14855 016a 1846     		mov	r0, r3
 14856 016c FFF7FEFF 		bl	ego_main
3897:bluetooth_rxtx.c **** 					break;
 14857              		.loc 1 3897 0
 14858 0170 03E0     		b	.L768
 14859              	.L770:
3898:bluetooth_rxtx.c **** 				case MODE_IDLE:
3899:bluetooth_rxtx.c **** 					cc2400_idle();
 14860              		.loc 1 3899 0
 14861 0172 FFF7FEFF 		bl	cc2400_idle
3900:bluetooth_rxtx.c **** 					break;
 14862              		.loc 1 3900 0
 14863 0176 00E0     		b	.L768
 14864              	.L792:
3901:bluetooth_rxtx.c **** 				default:
3902:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
3903:bluetooth_rxtx.c **** 					break;
 14865              		.loc 1 3903 0
 14866 0178 00BF     		nop
 14867              	.L768:
3904:bluetooth_rxtx.c **** 			}
3905:bluetooth_rxtx.c **** 	}
 14868              		.loc 1 3905 0 discriminator 1
ARM GAS  /tmp/cctJTvh1.s 			page 330


 14869 017a 48E7     		b	.L791
 14870              	.L794:
 14871              		.align	2
 14872              	.L793:
 14873 017c 00000000 		.word	vendor_request_handler
 14874 0180 00000000 		.word	clkn
 14875 0184 00000000 		.word	requested_mode
 14876 0188 00000000 		.word	mode
 14877 018c 00000000 		.word	modulation
 14878 0190 00000000 		.word	channel
 14879 0194 00000000 		.word	ego_mode
 14880              		.cfi_endproc
 14881              	.LFE60:
 14883              		.bss
 14884              		.align	2
 14885              	restart_jamming.5084:
 14886 00d4 00000000 		.space	4
 14887              		.align	2
 14888              	first_ts.5182:
 14889 00d8 00000000 		.space	4
 14890              		.align	2
 14891              	prev_clk.5188:
 14892 00dc 00000000 		.space	4
 14893              		.text
 14894              	.Letext0:
 14895              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 14896              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 14897              		.file 4 "../common/ubertooth.h"
 14898              		.file 5 "bluetooth_le.h"
 14899              		.file 6 "bluetooth.h"
 14900              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/cctJTvh1.s 			page 331


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/cctJTvh1.s:19     .data:0000000000000000 $d
     /tmp/cctJTvh1.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/cctJTvh1.s:29     .rodata:0000000000000000 $d
     /tmp/cctJTvh1.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/cctJTvh1.s:39     .rodata:0000000000000004 data_channels
     /tmp/cctJTvh1.s:80     .rodata:000000000000002c payload
     /tmp/cctJTvh1.s:104    .rodata:0000000000000040 whitening
     /tmp/cctJTvh1.s:235    .rodata:00000000000000c0 whitening_index
     /tmp/cctJTvh1.s:279    .rodata:00000000000000e8 hop_interval_lut
     /tmp/cctJTvh1.s:320    .rodata:0000000000000110 whitening_word
                            *COM*:0000000000000005 rr
     /tmp/cctJTvh1.s:806    .rodata:0000000000000890 compile_info
                            *COM*:0000000000000001 device_index
                            *COM*:0000000000000004 first_ts
                            *COM*:0000000000000004 second_ts
                            *COM*:0000000000000004 diff_ts
                            *COM*:0000000000000001 rssi_avg
                            *COM*:0000000000000001 freq_avg
                            *COM*:0000000000000004 clkn_freq
                            *COM*:0000000000000004 clkn_legacy
                            *COM*:0000000000000004 clkn_proposed
                            *COM*:0000000000000004 clkn
     /tmp/cctJTvh1.s:823    .bss:0000000000000000 hop_mode
     /tmp/cctJTvh1.s:824    .bss:0000000000000000 $d
     /tmp/cctJTvh1.s:828    .bss:0000000000000001 do_hop
     /tmp/cctJTvh1.s:833    .bss:0000000000000002 cs_no_squelch
     /tmp/cctJTvh1.s:839    .data:0000000000000004 cs_threshold_req
     /tmp/cctJTvh1.s:844    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/cctJTvh1.s:854    .bss:0000000000000004 hop_direct_channel
     /tmp/cctJTvh1.s:860    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/cctJTvh1.s:870    .bss:000000000000000c idle_buf_channel
     /tmp/cctJTvh1.s:876    .bss:000000000000000e active_buf_channel
     /tmp/cctJTvh1.s:882    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/cctJTvh1.s:891    .data:0000000000000008 active_rxbuf
     /tmp/cctJTvh1.s:897    .data:000000000000000c idle_rxbuf
     /tmp/cctJTvh1.s:903    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/cctJTvh1.s:922    .bss:0000000000000018 le_jam_count
     /tmp/cctJTvh1.s:928    .bss:000000000000001c data_cb
     /tmp/cctJTvh1.s:934    .bss:0000000000000020 packet_cb
     /tmp/cctJTvh1.s:940    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
ARM GAS  /tmp/cctJTvh1.s 			page 332


     /tmp/cctJTvh1.s:946    .bss:00000000000000c2 mode
     /tmp/cctJTvh1.s:951    .bss:00000000000000c3 requested_mode
     /tmp/cctJTvh1.s:956    .bss:00000000000000c4 jam_mode
     /tmp/cctJTvh1.s:961    .bss:00000000000000c5 ego_mode
     /tmp/cctJTvh1.s:966    .bss:00000000000000c6 modulation
     /tmp/cctJTvh1.s:973    .data:0000000000000054 channel
     /tmp/cctJTvh1.s:980    .bss:00000000000000c8 requested_channel
     /tmp/cctJTvh1.s:986    .bss:00000000000000ca saved_request
     /tmp/cctJTvh1.s:993    .data:0000000000000056 low_freq
     /tmp/cctJTvh1.s:999    .data:0000000000000058 high_freq
     /tmp/cctJTvh1.s:1004   .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/cctJTvh1.s:1015   .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/cctJTvh1.s:1022   .bss:00000000000000cd rssi_count
     /tmp/cctJTvh1.s:1028   .bss:00000000000000d0 rssi_sum
     /tmp/cctJTvh1.s:1031   .text.rssi_reset:0000000000000000 $t
     /tmp/cctJTvh1.s:1035   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/cctJTvh1.s:1075   .text.rssi_reset:0000000000000024 $d
     /tmp/cctJTvh1.s:1083   .text.rssi_add:0000000000000000 $t
     /tmp/cctJTvh1.s:1087   .text.rssi_add:0000000000000000 rssi_add
     /tmp/cctJTvh1.s:1153   .text.rssi_add:000000000000005c $d
     /tmp/cctJTvh1.s:1161   .text.cc2400_rssi_to_dbm:0000000000000000 $t
     /tmp/cctJTvh1.s:1165   .text.cc2400_rssi_to_dbm:0000000000000000 cc2400_rssi_to_dbm
     /tmp/cctJTvh1.s:1219   .text.rssi_iir_update:0000000000000000 $t
     /tmp/cctJTvh1.s:1223   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/cctJTvh1.s:1317   .text.rssi_iir_update:0000000000000084 $d
     /tmp/cctJTvh1.s:1326   .text.cs_threshold_set:0000000000000000 $t
     /tmp/cctJTvh1.s:1330   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/cctJTvh1.s:1412   .text.cs_threshold_set:0000000000000084 $d
     /tmp/cctJTvh1.s:1418   .text.enqueue:0000000000000000 $t
     /tmp/cctJTvh1.s:1422   .text.enqueue:0000000000000000 enqueue
     /tmp/cctJTvh1.s:1652   .text.enqueue:0000000000000164 $d
     /tmp/cctJTvh1.s:1668   .text.enqueue_legacy:0000000000000000 $t
     /tmp/cctJTvh1.s:1672   .text.enqueue_legacy:0000000000000000 enqueue_legacy
     /tmp/cctJTvh1.s:1854   .text.enqueue_legacy:0000000000000110 $d
     /tmp/cctJTvh1.s:1864   .text.enqueue_freq:0000000000000000 $t
     /tmp/cctJTvh1.s:1868   .text.enqueue_freq:0000000000000000 enqueue_freq
     /tmp/cctJTvh1.s:2052   .text.enqueue_freq:0000000000000110 $d
     /tmp/cctJTvh1.s:2062   .text.enqueue_proposed:0000000000000000 $t
     /tmp/cctJTvh1.s:2066   .text.enqueue_proposed:0000000000000000 enqueue_proposed
     /tmp/cctJTvh1.s:2249   .text.enqueue_proposed:0000000000000110 $d
     /tmp/cctJTvh1.s:2259   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/cctJTvh1.s:2264   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/cctJTvh1.s:2347   .text.enqueue_with_ts:000000000000006c $d
     /tmp/cctJTvh1.s:2355   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/cctJTvh1.s:2359   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/cctJTvh1.s:2434   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/cctJTvh1.s:2442   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/cctJTvh1.s:2446   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/cctJTvh1.s:2487   .text.cs_trigger_enable:000000000000002c $d
     /tmp/cctJTvh1.s:2495   .text.cs_trigger_disable:0000000000000000 $t
ARM GAS  /tmp/cctJTvh1.s 			page 333


     /tmp/cctJTvh1.s:2499   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/cctJTvh1.s:2540   .text.cs_trigger_disable:000000000000002c $d
     /tmp/cctJTvh1.s:2552   .text.vendor_request_handler:0000000000000000 $t
     /tmp/cctJTvh1.s:2556   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/cctJTvh1.s:2593   .text.vendor_request_handler:0000000000000024 $d
     /tmp/cctJTvh1.s:2660   .text.vendor_request_handler:0000000000000130 $t
     /tmp/cctJTvh1.s:2968   .text.vendor_request_handler:0000000000000318 $d
     /tmp/cctJTvh1.s:2977   .text.vendor_request_handler:0000000000000334 $t
     /tmp/cctJTvh1.s:3366   .text.vendor_request_handler:0000000000000594 $d
     /tmp/cctJTvh1.s:3379   .text.vendor_request_handler:00000000000005c0 $t
     /tmp/cctJTvh1.s:3799   .text.vendor_request_handler:0000000000000894 $d
     /tmp/cctJTvh1.s:3813   .text.vendor_request_handler:00000000000008c4 $t
     /tmp/cctJTvh1.s:10125  .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/cctJTvh1.s:4151   .text.vendor_request_handler:0000000000000acc $d
     /tmp/cctJTvh1.s:4162   .text.clkn_init:0000000000000000 $t
     /tmp/cctJTvh1.s:4166   .text.clkn_init:0000000000000000 clkn_init
     /tmp/cctJTvh1.s:4217   .text.clkn_init:0000000000000038 $d
     /tmp/cctJTvh1.s:4227   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/cctJTvh1.s:4232   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/cctJTvh1.s:4401   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/cctJTvh1.s:4413   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/cctJTvh1.s:4418   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/cctJTvh1.s:4460   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/cctJTvh1.s:4474   .text.msleep:0000000000000000 $t
     /tmp/cctJTvh1.s:4478   .text.msleep:0000000000000000 msleep
     /tmp/cctJTvh1.s:4547   .text.msleep:0000000000000070 $d
     /tmp/cctJTvh1.s:4555   .text.dma_init:0000000000000000 $t
     /tmp/cctJTvh1.s:4559   .text.dma_init:0000000000000000 dma_init
     /tmp/cctJTvh1.s:4733   .text.dma_init:0000000000000104 $d
     /tmp/cctJTvh1.s:4768   .text.dma_init_le:0000000000000000 $t
     /tmp/cctJTvh1.s:4772   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/cctJTvh1.s:4977   .text.dma_init_le:0000000000000134 $d
     /tmp/cctJTvh1.s:5009   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/cctJTvh1.s:5014   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/cctJTvh1.s:5117   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/cctJTvh1.s:5137   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/cctJTvh1.s:5142   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/cctJTvh1.s:5165   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/cctJTvh1.s:5184   .text.DMA_IRQHandler:0000000000000064 $t
     /tmp/cctJTvh1.s:5196   .text.DMA_IRQHandler:000000000000006c $d
     /tmp/cctJTvh1.s:5201   .text.dio_ssp_start:0000000000000000 $t
     /tmp/cctJTvh1.s:5205   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/cctJTvh1.s:5258   .text.dio_ssp_start:0000000000000048 $d
     /tmp/cctJTvh1.s:5268   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/cctJTvh1.s:5272   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/cctJTvh1.s:5370   .text.dio_ssp_stop:000000000000008c $d
     /tmp/cctJTvh1.s:5389   .text.cc2400_idle:0000000000000000 $t
     /tmp/cctJTvh1.s:5393   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/cctJTvh1.s:5446   .text.cc2400_idle:0000000000000044 $d
     /tmp/cctJTvh1.s:5453   .text.cc2400_rx:0000000000000000 $t
     /tmp/cctJTvh1.s:5457   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/cctJTvh1.s:5571   .text.cc2400_rx:00000000000000b0 $d
     /tmp/cctJTvh1.s:5578   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/cctJTvh1.s:5582   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/cctJTvh1.s:5717   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/cctJTvh1.s:5724   .text.le_transmit:0000000000000000 $t
     /tmp/cctJTvh1.s:5729   .text.le_transmit:0000000000000000 le_transmit
ARM GAS  /tmp/cctJTvh1.s 			page 334


     /tmp/cctJTvh1.s:6122   .text.le_transmit:00000000000002d4 $d
     /tmp/cctJTvh1.s:6135   .text.le_jam:0000000000000000 $t
     /tmp/cctJTvh1.s:6140   .text.le_jam:0000000000000000 le_jam
     /tmp/cctJTvh1.s:6223   .text.le_jam:000000000000008c $d
     /tmp/cctJTvh1.s:6229   .text.hop:0000000000000000 $t
     /tmp/cctJTvh1.s:6234   .text.hop:0000000000000000 hop
     /tmp/cctJTvh1.s:6401   .text.hop:000000000000010c $d
     /tmp/cctJTvh1.s:6412   .text.cc2400_spi_rev:0000000000000000 $t
     /tmp/cctJTvh1.s:6417   .text.cc2400_spi_rev:0000000000000000 cc2400_spi_rev
     /tmp/cctJTvh1.s:6514   .text.cc2400_spi_rev:000000000000007c $d
     /tmp/cctJTvh1.s:6521   .text.cc2400_get_rev:0000000000000000 $t
     /tmp/cctJTvh1.s:6526   .text.cc2400_get_rev:0000000000000000 cc2400_get_rev
     /tmp/cctJTvh1.s:6629   .text.cc2400_get_rev:0000000000000088 $d
     /tmp/cctJTvh1.s:6636   .text.add:0000000000000000 $t
     /tmp/cctJTvh1.s:6641   .text.add:0000000000000000 add
     /tmp/cctJTvh1.s:6701   .text.bt_stream_hop:0000000000000000 $t
     /tmp/cctJTvh1.s:6706   .text.bt_stream_hop:0000000000000000 bt_stream_hop
     /tmp/cctJTvh1.s:7115   .text.bt_stream_hop:00000000000002b4 $d
     /tmp/cctJTvh1.s:7136   .text.bt_stream_hop:0000000000000300 $t
     /tmp/cctJTvh1.s:7265   .text.bt_stream_hop:00000000000003d4 $d
     /tmp/cctJTvh1.s:7278   .text.bt_stream_proposed:0000000000000000 $t
     /tmp/cctJTvh1.s:7283   .text.bt_stream_proposed:0000000000000000 bt_stream_proposed
     /tmp/cctJTvh1.s:7538   .text.bt_stream_proposed:00000000000001c8 $d
     /tmp/cctJTvh1.s:7548   .text.bt_stream_freq:0000000000000000 $t
     /tmp/cctJTvh1.s:7553   .text.bt_stream_freq:0000000000000000 bt_stream_freq
     /tmp/cctJTvh1.s:7950   .text.bt_stream_freq:00000000000002d4 $d
     /tmp/cctJTvh1.s:7965   .text.bt_stream_freq:0000000000000308 $t
     /tmp/cctJTvh1.s:8091   .text.bt_stream_freq:00000000000003e0 $d
     /tmp/cctJTvh1.s:8104   .text.bt_stream_legacy:0000000000000000 $t
     /tmp/cctJTvh1.s:8109   .text.bt_stream_legacy:0000000000000000 bt_stream_legacy
     /tmp/cctJTvh1.s:8488   .text.bt_stream_legacy:0000000000000280 $d
     /tmp/cctJTvh1.s:8507   .text.bt_stream_legacy:00000000000002c4 $t
     /tmp/cctJTvh1.s:8628   .text.bt_stream_legacy:0000000000000388 $d
     /tmp/cctJTvh1.s:8640   .text.bt_stream_sniff:0000000000000000 $t
     /tmp/cctJTvh1.s:8645   .text.bt_stream_sniff:0000000000000000 bt_stream_sniff
     /tmp/cctJTvh1.s:9081   .text.bt_stream_sniff:00000000000002e4 $d
     /tmp/cctJTvh1.s:9101   .text.bt_stream_sniff:0000000000000328 $t
     /tmp/cctJTvh1.s:9151   .text.bt_stream_sniff:0000000000000374 $d
     /tmp/cctJTvh1.s:9160   .text.bt_stream_cfo:0000000000000000 $t
     /tmp/cctJTvh1.s:9165   .text.bt_stream_cfo:0000000000000000 bt_stream_cfo
     /tmp/cctJTvh1.s:9395   .text.bt_stream_cfo:0000000000000184 $d
     /tmp/cctJTvh1.s:9406   .text.bt_stream_rssi:0000000000000000 $t
     /tmp/cctJTvh1.s:9411   .text.bt_stream_rssi:0000000000000000 bt_stream_rssi
     /tmp/cctJTvh1.s:9623   .text.bt_stream_rssi:0000000000000164 $d
     /tmp/cctJTvh1.s:9633   .text.bt_stream_rx:0000000000000000 $t
     /tmp/cctJTvh1.s:9638   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/cctJTvh1.s:10046  .text.bt_stream_rx:00000000000002b0 $d
     /tmp/cctJTvh1.s:10064  .text.bt_stream_rx:00000000000002ec $t
     /tmp/cctJTvh1.s:10112  .text.bt_stream_rx:0000000000000334 $d
     /tmp/cctJTvh1.s:10121  .text.le_set_access_address:0000000000000000 $t
     /tmp/cctJTvh1.s:10169  .text.le_set_access_address:0000000000000030 $d
     /tmp/cctJTvh1.s:10174  .text.reset_le:0000000000000000 $t
     /tmp/cctJTvh1.s:10179  .text.reset_le:0000000000000000 reset_le
     /tmp/cctJTvh1.s:10275  .text.reset_le:0000000000000084 $d
     /tmp/cctJTvh1.s:10284  .text.reset_le_promisc:0000000000000000 $t
     /tmp/cctJTvh1.s:10289  .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/cctJTvh1.s:10315  .text.reset_le_promisc:000000000000001c $d
ARM GAS  /tmp/cctJTvh1.s 			page 335


     /tmp/cctJTvh1.s:10320  .text.bt_generic_le:0000000000000000 $t
     /tmp/cctJTvh1.s:10325  .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/cctJTvh1.s:10751  .text.bt_generic_le:00000000000002a0 $d
     /tmp/cctJTvh1.s:10777  .text.bt_le_sync:0000000000000000 $t
     /tmp/cctJTvh1.s:10782  .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/cctJTvh1.s:11130  .text.bt_le_sync:0000000000000228 $d
     /tmp/cctJTvh1.s:11151  .text.bt_le_sync:0000000000000270 $t
     /tmp/cctJTvh1.s:11549  .text.bt_le_sync:0000000000000508 $d
     /tmp/cctJTvh1.s:14885  .bss:00000000000000d4 restart_jamming.5084
     /tmp/cctJTvh1.s:11574  .text.cb_follow_le:0000000000000000 $t
     /tmp/cctJTvh1.s:11579  .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/cctJTvh1.s:11869  .text.cb_follow_le:00000000000001b8 $d
     /tmp/cctJTvh1.s:11882  .text.connection_follow_cb:0000000000000000 $t
     /tmp/cctJTvh1.s:11887  .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/cctJTvh1.s:12265  .text.connection_follow_cb:0000000000000260 $d
     /tmp/cctJTvh1.s:12275  .text.bt_follow_le:0000000000000000 $t
     /tmp/cctJTvh1.s:12280  .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/cctJTvh1.s:12310  .text.bt_follow_le:000000000000001c $d
     /tmp/cctJTvh1.s:12317  .text.le_promisc_state:0000000000000000 $t
     /tmp/cctJTvh1.s:12322  .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/cctJTvh1.s:12415  .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/cctJTvh1.s:12420  .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/cctJTvh1.s:12629  .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/cctJTvh1.s:14888  .bss:00000000000000d8 first_ts.5182
     /tmp/cctJTvh1.s:12648  .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/cctJTvh1.s:12653  .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/cctJTvh1.s:12788  .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/cctJTvh1.s:14891  .bss:00000000000000dc prev_clk.5188
     /tmp/cctJTvh1.s:12805  .text.promisc_follow_cb:0000000000000000 $t
     /tmp/cctJTvh1.s:12810  .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/cctJTvh1.s:12925  .text.promisc_follow_cb:00000000000000ac $d
     /tmp/cctJTvh1.s:12933  .text.see_aa:0000000000000000 $t
     /tmp/cctJTvh1.s:12938  .text.see_aa:0000000000000000 see_aa
     /tmp/cctJTvh1.s:13059  .text.see_aa:00000000000000a4 $d
     /tmp/cctJTvh1.s:13071  .text.cb_le_promisc:0000000000000000 $t
     /tmp/cctJTvh1.s:13076  .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/cctJTvh1.s:13528  .text.cb_le_promisc:00000000000002e0 $d
     /tmp/cctJTvh1.s:13544  .text.bt_promisc_le:0000000000000000 $t
     /tmp/cctJTvh1.s:13549  .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/cctJTvh1.s:13631  .text.bt_promisc_le:000000000000006c $d
     /tmp/cctJTvh1.s:13659  .text.bt_slave_le:0000000000000000 $t
     /tmp/cctJTvh1.s:13664  .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/cctJTvh1.s:13799  .text.bt_slave_le:00000000000000dc $d
     /tmp/cctJTvh1.s:13810  .text.specan:0000000000000000 $t
     /tmp/cctJTvh1.s:13815  .text.specan:0000000000000000 specan
     /tmp/cctJTvh1.s:14031  .text.specan:0000000000000178 $d
     /tmp/cctJTvh1.s:14049  .text.led_specan:0000000000000000 $t
     /tmp/cctJTvh1.s:14054  .text.led_specan:0000000000000000 led_specan
     /tmp/cctJTvh1.s:14290  .text.led_specan:0000000000000178 $d
     /tmp/cctJTvh1.s:14347  .text.cc2400_txtest:0000000000000000 $t
     /tmp/cctJTvh1.s:14352  .text.cc2400_txtest:0000000000000000 cc2400_txtest
     /tmp/cctJTvh1.s:14611  .text.cc2400_txtest:00000000000001d4 $d
     /tmp/cctJTvh1.s:14623  .text.main:0000000000000000 $t
     /tmp/cctJTvh1.s:14628  .text.main:0000000000000000 main
     /tmp/cctJTvh1.s:14670  .text.main:000000000000003c $d
     /tmp/cctJTvh1.s:14690  .text.main:000000000000008c $t
     /tmp/cctJTvh1.s:14873  .text.main:000000000000017c $d
ARM GAS  /tmp/cctJTvh1.s 			page 336


                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
dio_ssp_init
rbit
btle_crcgen_lut
handle_usb
memset
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_rangetest
cc2400_repeater
ego_main
