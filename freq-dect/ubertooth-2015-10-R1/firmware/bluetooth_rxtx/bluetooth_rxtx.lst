ARM GAS  /tmp/cc6bdJLE.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/cc6bdJLE.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	payload:
  81 002c CA       		.byte	-54
  82 002d AA       		.byte	-86
  83 002e AA       		.byte	-86
  84 002f AA       		.byte	-86
  85 0030 AA       		.byte	-86
  86 0031 AA       		.byte	-86
  87 0032 AA       		.byte	-86
  88 0033 AA       		.byte	-86
  89 0034 AA       		.byte	-86
  90 0035 AA       		.byte	-86
  91 0036 AA       		.byte	-86
  92 0037 AA       		.byte	-86
  93 0038 AA       		.byte	-86
  94 0039 AA       		.byte	-86
  95 003a AA       		.byte	-86
  96 003b AA       		.byte	-86
  97 003c AA       		.byte	-86
  98 003d AA       		.byte	-86
  99 003e AA       		.byte	-86
 100 003f AA       		.byte	-86
 101              		.align	2
 104              	whitening:
 105 0040 01       		.byte	1
 106 0041 01       		.byte	1
 107 0042 01       		.byte	1
 108 0043 01       		.byte	1
 109 0044 00       		.byte	0
 110 0045 01       		.byte	1
 111 0046 00       		.byte	0
 112 0047 01       		.byte	1
 113 0048 00       		.byte	0
 114 0049 01       		.byte	1
 115 004a 00       		.byte	0
 116 004b 00       		.byte	0
 117 004c 00       		.byte	0
 118 004d 00       		.byte	0
 119 004e 01       		.byte	1
 120 004f 00       		.byte	0
 121 0050 01       		.byte	1
 122 0051 01       		.byte	1
 123 0052 00       		.byte	0
 124 0053 01       		.byte	1
ARM GAS  /tmp/cc6bdJLE.s 			page 3


 125 0054 01       		.byte	1
 126 0055 01       		.byte	1
 127 0056 01       		.byte	1
 128 0057 00       		.byte	0
 129 0058 00       		.byte	0
 130 0059 01       		.byte	1
 131 005a 01       		.byte	1
 132 005b 01       		.byte	1
 133 005c 00       		.byte	0
 134 005d 00       		.byte	0
 135 005e 01       		.byte	1
 136 005f 00       		.byte	0
 137 0060 01       		.byte	1
 138 0061 00       		.byte	0
 139 0062 01       		.byte	1
 140 0063 01       		.byte	1
 141 0064 00       		.byte	0
 142 0065 00       		.byte	0
 143 0066 01       		.byte	1
 144 0067 01       		.byte	1
 145 0068 00       		.byte	0
 146 0069 00       		.byte	0
 147 006a 00       		.byte	0
 148 006b 00       		.byte	0
 149 006c 00       		.byte	0
 150 006d 01       		.byte	1
 151 006e 01       		.byte	1
 152 006f 00       		.byte	0
 153 0070 01       		.byte	1
 154 0071 01       		.byte	1
 155 0072 00       		.byte	0
 156 0073 01       		.byte	1
 157 0074 00       		.byte	0
 158 0075 01       		.byte	1
 159 0076 01       		.byte	1
 160 0077 01       		.byte	1
 161 0078 00       		.byte	0
 162 0079 01       		.byte	1
 163 007a 00       		.byte	0
 164 007b 00       		.byte	0
 165 007c 00       		.byte	0
 166 007d 01       		.byte	1
 167 007e 01       		.byte	1
 168 007f 00       		.byte	0
 169 0080 00       		.byte	0
 170 0081 01       		.byte	1
 171 0082 00       		.byte	0
 172 0083 00       		.byte	0
 173 0084 00       		.byte	0
 174 0085 01       		.byte	1
 175 0086 00       		.byte	0
 176 0087 00       		.byte	0
 177 0088 00       		.byte	0
 178 0089 00       		.byte	0
 179 008a 00       		.byte	0
 180 008b 00       		.byte	0
 181 008c 01       		.byte	1
ARM GAS  /tmp/cc6bdJLE.s 			page 4


 182 008d 00       		.byte	0
 183 008e 00       		.byte	0
 184 008f 01       		.byte	1
 185 0090 00       		.byte	0
 186 0091 00       		.byte	0
 187 0092 01       		.byte	1
 188 0093 01       		.byte	1
 189 0094 00       		.byte	0
 190 0095 01       		.byte	1
 191 0096 00       		.byte	0
 192 0097 00       		.byte	0
 193 0098 01       		.byte	1
 194 0099 01       		.byte	1
 195 009a 01       		.byte	1
 196 009b 01       		.byte	1
 197 009c 00       		.byte	0
 198 009d 01       		.byte	1
 199 009e 01       		.byte	1
 200 009f 01       		.byte	1
 201 00a0 00       		.byte	0
 202 00a1 00       		.byte	0
 203 00a2 00       		.byte	0
 204 00a3 00       		.byte	0
 205 00a4 01       		.byte	1
 206 00a5 01       		.byte	1
 207 00a6 01       		.byte	1
 208 00a7 01       		.byte	1
 209 00a8 01       		.byte	1
 210 00a9 01       		.byte	1
 211 00aa 01       		.byte	1
 212 00ab 00       		.byte	0
 213 00ac 00       		.byte	0
 214 00ad 00       		.byte	0
 215 00ae 01       		.byte	1
 216 00af 01       		.byte	1
 217 00b0 01       		.byte	1
 218 00b1 00       		.byte	0
 219 00b2 01       		.byte	1
 220 00b3 01       		.byte	1
 221 00b4 00       		.byte	0
 222 00b5 00       		.byte	0
 223 00b6 00       		.byte	0
 224 00b7 01       		.byte	1
 225 00b8 00       		.byte	0
 226 00b9 01       		.byte	1
 227 00ba 00       		.byte	0
 228 00bb 00       		.byte	0
 229 00bc 01       		.byte	1
 230 00bd 00       		.byte	0
 231 00be 01       		.byte	1
 232 00bf 00       		.align	2
 235              	whitening_index:
 236 00c0 46       		.byte	70
 237 00c1 3E       		.byte	62
 238 00c2 78       		.byte	120
 239 00c3 6F       		.byte	111
 240 00c4 4D       		.byte	77
ARM GAS  /tmp/cc6bdJLE.s 			page 5


 241 00c5 2E       		.byte	46
 242 00c6 0F       		.byte	15
 243 00c7 65       		.byte	101
 244 00c8 42       		.byte	66
 245 00c9 27       		.byte	39
 246 00ca 1F       		.byte	31
 247 00cb 1A       		.byte	26
 248 00cc 50       		.byte	80
 249 00cd 53       		.byte	83
 250 00ce 7D       		.byte	125
 251 00cf 59       		.byte	89
 252 00d0 0A       		.byte	10
 253 00d1 23       		.byte	35
 254 00d2 08       		.byte	8
 255 00d3 36       		.byte	54
 256 00d4 7A       		.byte	122
 257 00d5 11       		.byte	17
 258 00d6 21       		.byte	33
 259 00d7 00       		.byte	0
 260 00d8 3A       		.byte	58
 261 00d9 73       		.byte	115
 262 00da 06       		.byte	6
 263 00db 5E       		.byte	94
 264 00dc 56       		.byte	86
 265 00dd 31       		.byte	49
 266 00de 34       		.byte	52
 267 00df 14       		.byte	20
 268 00e0 28       		.byte	40
 269 00e1 1B       		.byte	27
 270 00e2 54       		.byte	84
 271 00e3 5A       		.byte	90
 272 00e4 3F       		.byte	63
 273 00e5 70       		.byte	112
 274 00e6 2F       		.byte	47
 275 00e7 66       		.byte	102
 276              		.align	2
 279              	hop_interval_lut:
 280 00e8 00       		.byte	0
 281 00e9 01       		.byte	1
 282 00ea 13       		.byte	19
 283 00eb 19       		.byte	25
 284 00ec 1C       		.byte	28
 285 00ed 0F       		.byte	15
 286 00ee 1F       		.byte	31
 287 00ef 10       		.byte	16
 288 00f0 0E       		.byte	14
 289 00f1 21       		.byte	33
 290 00f2 1A       		.byte	26
 291 00f3 1B       		.byte	27
 292 00f4 22       		.byte	34
 293 00f5 14       		.byte	20
 294 00f6 08       		.byte	8
 295 00f7 05       		.byte	5
 296 00f8 07       		.byte	7
 297 00f9 18       		.byte	24
 298 00fa 23       		.byte	35
 299 00fb 02       		.byte	2
ARM GAS  /tmp/cc6bdJLE.s 			page 6


 300 00fc 0D       		.byte	13
 301 00fd 1E       		.byte	30
 302 00fe 20       		.byte	32
 303 00ff 1D       		.byte	29
 304 0100 11       		.byte	17
 305 0101 03       		.byte	3
 306 0102 0A       		.byte	10
 307 0103 0B       		.byte	11
 308 0104 04       		.byte	4
 309 0105 17       		.byte	23
 310 0106 15       		.byte	21
 311 0107 06       		.byte	6
 312 0108 16       		.byte	22
 313 0109 09       		.byte	9
 314 010a 0C       		.byte	12
 315 010b 12       		.byte	18
 316 010c 24       		.byte	36
 317 010d 000000   		.align	2
 320              	whitening_word:
 321 0110 40B2BCC3 		.word	-1011043776
 322 0114 1F374A5F 		.word	1598699295
 323 0118 85F69C9A 		.word	-1700989307
 324 011c C1D6C544 		.word	1153816257
 325 0120 2059DEE1 		.word	-505521888
 326 0124 8F1BA5AF 		.word	-1348134001
 327 0128 427B4ECD 		.word	-850494654
 328 012c 60EB6222 		.word	576908128
 329 0130 902CEFF0 		.word	-252760944
 330 0134 C78DD257 		.word	1473416647
 331 0138 A13DA766 		.word	1722236321
 332 013c B0753111 		.word	288454064
 333 0140 8940B2BC 		.word	-1129168759
 334 0144 C31F374A 		.word	1245126595
 335 0148 5F85F69C 		.word	-1661565601
 336 014c 9AC1D6C5 		.word	-975781478
 337 0150 442059DE 		.word	-564584380
 338 0154 E18F1BA5 		.word	-1524920351
 339 0158 AF427B4E 		.word	1316700847
 340 015c CD60EB62 		.word	1659592909
 341 0160 22902CEF 		.word	-282292190
 342 0164 F0C78DD2 		.word	-762460176
 343 0168 57A13DA7 		.word	-1489133225
 344 016c 66B07531 		.word	829796454
 345 0170 D257A13D 		.word	1033983954
 346 0174 A766B075 		.word	1974494887
 347 0178 31114896 		.word	-1773661903
 348 017c 77F8E346 		.word	1189345399
 349 0180 E9ABD09E 		.word	-1630491671
 350 0184 5333D8BA 		.word	-1160236205
 351 0188 980824CB 		.word	-886830952
 352 018c 3BFC71A3 		.word	-1552810949
 353 0190 F45568CF 		.word	-815245836
 354 0194 A9196C5D 		.word	1567365545
 355 0198 4C0492E5 		.word	-443415476
 356 019c 1DFEB851 		.word	1371078173
 357 01a0 1BA5AF42 		.word	1118807323
 358 01a4 7B4ECD60 		.word	1624067707
ARM GAS  /tmp/cc6bdJLE.s 			page 7


 359 01a8 EB622290 		.word	-1876794645
 360 01ac 2CEFF0C7 		.word	-940511444
 361 01b0 8DD257A1 		.word	-1588079987
 362 01b4 3DA766B0 		.word	-1335449795
 363 01b8 75311148 		.word	1209086325
 364 01bc 9677F8E3 		.word	-470255722
 365 01c0 46E9ABD0 		.word	-794039994
 366 01c4 9E5333D8 		.word	-667724898
 367 01c8 BA980824 		.word	604543162
 368 01cc CB3BFC71 		.word	1912355787
 369 01d0 6479873F 		.word	1065843044
 370 01d4 6E94BE0A 		.word	180261998
 371 01d8 ED393583 		.word	-2093663763
 372 01dc AD8B8940 		.word	1082756013
 373 01e0 B2BCC31F 		.word	532921522
 374 01e4 374A5F85 		.word	-2057352649
 375 01e8 F69C9AC1 		.word	-1046831882
 376 01ec D6C54420 		.word	541378006
 377 01f0 59DEE18F 		.word	-1881022887
 378 01f4 1BA5AF42 		.word	1118807323
 379 01f8 7B4ECD60 		.word	1624067707
 380 01fc EB622290 		.word	-1876794645
 381 0200 AD8B8940 		.word	1082756013
 382 0204 B2BCC31F 		.word	532921522
 383 0208 374A5F85 		.word	-2057352649
 384 020c F69C9AC1 		.word	-1046831882
 385 0210 D6C54420 		.word	541378006
 386 0214 59DEE18F 		.word	-1881022887
 387 0218 1BA5AF42 		.word	1118807323
 388 021c 7B4ECD60 		.word	1624067707
 389 0220 EB622290 		.word	-1876794645
 390 0224 2CEFF0C7 		.word	-940511444
 391 0228 8DD257A1 		.word	-1588079987
 392 022c 3DA766B0 		.word	-1335449795
 393 0230 F69C9AC1 		.word	-1046831882
 394 0234 D6C54420 		.word	541378006
 395 0238 59DEE18F 		.word	-1881022887
 396 023c 1BA5AF42 		.word	1118807323
 397 0240 7B4ECD60 		.word	1624067707
 398 0244 EB622290 		.word	-1876794645
 399 0248 2CEFF0C7 		.word	-940511444
 400 024c 8DD257A1 		.word	-1588079987
 401 0250 3DA766B0 		.word	-1335449795
 402 0254 75311148 		.word	1209086325
 403 0258 9677F8E3 		.word	-470255722
 404 025c 46E9ABD0 		.word	-794039994
 405 0260 3F6E94BE 		.word	-1097568705
 406 0264 0AED3935 		.word	892988682
 407 0268 83AD8B89 		.word	-1987334781
 408 026c 40B2BCC3 		.word	-1011043776
 409 0270 1F374A5F 		.word	1598699295
 410 0274 85F69C9A 		.word	-1700989307
 411 0278 C1D6C544 		.word	1153816257
 412 027c 2059DEE1 		.word	-505521888
 413 0280 8F1BA5AF 		.word	-1348134001
 414 0284 427B4ECD 		.word	-850494654
 415 0288 60EB6222 		.word	576908128
ARM GAS  /tmp/cc6bdJLE.s 			page 8


 416 028c 902CEFF0 		.word	-252760944
 417 0290 0824CB3B 		.word	1003168776
 418 0294 FC71A3F4 		.word	-190615044
 419 0298 5568CFA9 		.word	-1446025131
 420 029c 196C5D4C 		.word	1281190937
 421 02a0 0492E51D 		.word	501584388
 422 02a4 FEB851FA 		.word	-95307522
 423 02a8 2AB4E7D4 		.word	-723012566
 424 02ac 0CB62E26 		.word	640595468
 425 02b0 02C9F20E 		.word	250792194
 426 02b4 7FDC287D 		.word	2099829887
 427 02b8 15DA736A 		.word	1785977365
 428 02bc 065B1713 		.word	320297734
 429 02c0 C1D6C544 		.word	1153816257
 430 02c4 2059DEE1 		.word	-505521888
 431 02c8 8F1BA5AF 		.word	-1348134001
 432 02cc 427B4ECD 		.word	-850494654
 433 02d0 60EB6222 		.word	576908128
 434 02d4 902CEFF0 		.word	-252760944
 435 02d8 C78DD257 		.word	1473416647
 436 02dc A13DA766 		.word	1722236321
 437 02e0 B0753111 		.word	288454064
 438 02e4 489677F8 		.word	-126380472
 439 02e8 E346E9AB 		.word	-1410775325
 440 02ec D09E5333 		.word	861118160
 441 02f0 9AC1D6C5 		.word	-975781478
 442 02f4 442059DE 		.word	-564584380
 443 02f8 E18F1BA5 		.word	-1524920351
 444 02fc AF427B4E 		.word	1316700847
 445 0300 CD60EB62 		.word	1659592909
 446 0304 22902CEF 		.word	-282292190
 447 0308 F0C78DD2 		.word	-762460176
 448 030c 57A13DA7 		.word	-1489133225
 449 0310 66B07531 		.word	829796454
 450 0314 11489677 		.word	2006337553
 451 0318 F8E346E9 		.word	-381230088
 452 031c ABD09E53 		.word	1402917035
 453 0320 5333D8BA 		.word	-1160236205
 454 0324 980824CB 		.word	-886830952
 455 0328 3BFC71A3 		.word	-1552810949
 456 032c F45568CF 		.word	-815245836
 457 0330 A9196C5D 		.word	1567365545
 458 0334 4C0492E5 		.word	-443415476
 459 0338 1DFEB851 		.word	1371078173
 460 033c FA2AB4E7 		.word	-407622918
 461 0340 D40CB62E 		.word	783682772
 462 0344 2602C9F2 		.word	-221707738
 463 0348 0E7FDC28 		.word	685539086
 464 034c 7D15DA73 		.word	1943672189
 465 0350 2CEFF0C7 		.word	-940511444
 466 0354 8DD257A1 		.word	-1588079987
 467 0358 3DA766B0 		.word	-1335449795
 468 035c 75311148 		.word	1209086325
 469 0360 9677F8E3 		.word	-470255722
 470 0364 46E9ABD0 		.word	-794039994
 471 0368 9E5333D8 		.word	-667724898
 472 036c BA980824 		.word	604543162
ARM GAS  /tmp/cc6bdJLE.s 			page 9


 473 0370 CB3BFC71 		.word	1912355787
 474 0374 A3F45568 		.word	1750463651
 475 0378 CFA9196C 		.word	1813621199
 476 037c 5D4C0492 		.word	-1845212067
 477 0380 E51DFEB8 		.word	-1191305755
 478 0384 51FA2AB4 		.word	-1272251823
 479 0388 E7D40CB6 		.word	-1240673049
 480 038c 2E2602C9 		.word	-922606034
 481 0390 F20E7FDC 		.word	-595652878
 482 0394 287D15DA 		.word	-636125912
 483 0398 736A065B 		.word	1527147123
 484 039c 17138164 		.word	1686180631
 485 03a0 79873F6E 		.word	1849657209
 486 03a4 94BE0AED 		.word	-318062956
 487 03a8 393583AD 		.word	-1383910087
 488 03ac 8B8940B2 		.word	-1304393333
 489 03b0 BE0AED39 		.word	971836094
 490 03b4 3583AD8B 		.word	-1951562955
 491 03b8 8940B2BC 		.word	-1129168759
 492 03bc C31F374A 		.word	1245126595
 493 03c0 5F85F69C 		.word	-1661565601
 494 03c4 9AC1D6C5 		.word	-975781478
 495 03c8 442059DE 		.word	-564584380
 496 03cc E18F1BA5 		.word	-1524920351
 497 03d0 AF427B4E 		.word	1316700847
 498 03d4 CD60EB62 		.word	1659592909
 499 03d8 22902CEF 		.word	-282292190
 500 03dc F0C78DD2 		.word	-762460176
 501 03e0 77F8E346 		.word	1189345399
 502 03e4 E9ABD09E 		.word	-1630491671
 503 03e8 5333D8BA 		.word	-1160236205
 504 03ec 980824CB 		.word	-886830952
 505 03f0 3BFC71A3 		.word	-1552810949
 506 03f4 F45568CF 		.word	-815245836
 507 03f8 A9196C5D 		.word	1567365545
 508 03fc 4C0492E5 		.word	-443415476
 509 0400 1DFEB851 		.word	1371078173
 510 0404 FA2AB4E7 		.word	-407622918
 511 0408 D40CB62E 		.word	783682772
 512 040c 2602C9F2 		.word	-221707738
 513 0410 D09E5333 		.word	861118160
 514 0414 D8BA9808 		.word	144227032
 515 0418 24CB3BFC 		.word	-63190236
 516 041c 71A3F455 		.word	1442095985
 517 0420 68CFA919 		.word	430559080
 518 0424 6C5D4C04 		.word	72113516
 519 0428 92E51DFE 		.word	-31595118
 520 042c B851FA2A 		.word	721047992
 521 0430 B4E7D40C 		.word	215279540
 522 0434 B62E2602 		.word	36056758
 523 0438 C9F20E7F 		.word	2131686089
 524 043c DC287D15 		.word	360523996
 525 0440 196C5D4C 		.word	1281190937
 526 0444 0492E51D 		.word	501584388
 527 0448 FEB851FA 		.word	-95307522
 528 044c 2AB4E7D4 		.word	-723012566
 529 0450 0CB62E26 		.word	640595468
ARM GAS  /tmp/cc6bdJLE.s 			page 10


 530 0454 02C9F20E 		.word	250792194
 531 0458 7FDC287D 		.word	2099829887
 532 045c 15DA736A 		.word	1785977365
 533 0460 065B1713 		.word	320297734
 534 0464 81647987 		.word	-2022087551
 535 0468 3F6E94BE 		.word	-1097568705
 536 046c 0AED3935 		.word	892988682
 537 0470 427B4ECD 		.word	-850494654
 538 0474 60EB6222 		.word	576908128
 539 0478 902CEFF0 		.word	-252760944
 540 047c C78DD257 		.word	1473416647
 541 0480 A13DA766 		.word	1722236321
 542 0484 B0753111 		.word	288454064
 543 0488 489677F8 		.word	-126380472
 544 048c E346E9AB 		.word	-1410775325
 545 0490 D09E5333 		.word	861118160
 546 0494 D8BA9808 		.word	144227032
 547 0498 24CB3BFC 		.word	-63190236
 548 049c 71A3F455 		.word	1442095985
 549 04a0 8B8940B2 		.word	-1304393333
 550 04a4 BCC31F37 		.word	924828604
 551 04a8 4A5F85F6 		.word	-159031478
 552 04ac 9C9AC1D6 		.word	-691955044
 553 04b0 C5442059 		.word	1495286981
 554 04b4 DEE18F1B 		.word	462414302
 555 04b8 A5AF427B 		.word	2067967909
 556 04bc 4ECD60EB 		.word	-345977522
 557 04c0 6222902C 		.word	747643490
 558 04c4 EFF0C78D 		.word	-1916276497
 559 04c8 D257A13D 		.word	1033983954
 560 04cc A766B075 		.word	1974494887
 561 04d0 F45568CF 		.word	-815245836
 562 04d4 A9196C5D 		.word	1567365545
 563 04d8 4C0492E5 		.word	-443415476
 564 04dc 1DFEB851 		.word	1371078173
 565 04e0 FA2AB4E7 		.word	-407622918
 566 04e4 D40CB62E 		.word	783682772
 567 04e8 2602C9F2 		.word	-221707738
 568 04ec 0E7FDC28 		.word	685539086
 569 04f0 7D15DA73 		.word	1943672189
 570 04f4 6A065B17 		.word	391841386
 571 04f8 13816479 		.word	2036629779
 572 04fc 873F6E94 		.word	-1804714105
 573 0500 3DA766B0 		.word	-1335449795
 574 0504 75311148 		.word	1209086325
 575 0508 9677F8E3 		.word	-470255722
 576 050c 46E9ABD0 		.word	-794039994
 577 0510 9E5333D8 		.word	-667724898
 578 0514 BA980824 		.word	604543162
 579 0518 CB3BFC71 		.word	1912355787
 580 051c A3F45568 		.word	1750463651
 581 0520 CFA9196C 		.word	1813621199
 582 0524 5D4C0492 		.word	-1845212067
 583 0528 E51DFEB8 		.word	-1191305755
 584 052c 51FA2AB4 		.word	-1272251823
 585 0530 66B07531 		.word	829796454
 586 0534 11489677 		.word	2006337553
ARM GAS  /tmp/cc6bdJLE.s 			page 11


 587 0538 F8E346E9 		.word	-381230088
 588 053c ABD09E53 		.word	1402917035
 589 0540 33D8BA98 		.word	-1732585421
 590 0544 0824CB3B 		.word	1003168776
 591 0548 FC71A3F4 		.word	-190615044
 592 054c 5568CFA9 		.word	-1446025131
 593 0550 196C5D4C 		.word	1281190937
 594 0554 0492E51D 		.word	501584388
 595 0558 FEB851FA 		.word	-95307522
 596 055c 2AB4E7D4 		.word	-723012566
 597 0560 AF427B4E 		.word	1316700847
 598 0564 CD60EB62 		.word	1659592909
 599 0568 22902CEF 		.word	-282292190
 600 056c F0C78DD2 		.word	-762460176
 601 0570 57A13DA7 		.word	-1489133225
 602 0574 66B07531 		.word	829796454
 603 0578 11489677 		.word	2006337553
 604 057c F8E346E9 		.word	-381230088
 605 0580 ABD09E53 		.word	1402917035
 606 0584 33D8BA98 		.word	-1732585421
 607 0588 0824CB3B 		.word	1003168776
 608 058c FC71A3F4 		.word	-190615044
 609 0590 980824CB 		.word	-886830952
 610 0594 3BFC71A3 		.word	-1552810949
 611 0598 F45568CF 		.word	-815245836
 612 059c A9196C5D 		.word	1567365545
 613 05a0 4C0492E5 		.word	-443415476
 614 05a4 1DFEB851 		.word	1371078173
 615 05a8 FA2AB4E7 		.word	-407622918
 616 05ac D40CB62E 		.word	783682772
 617 05b0 2602C9F2 		.word	-221707738
 618 05b4 0E7FDC28 		.word	685539086
 619 05b8 7D15DA73 		.word	1943672189
 620 05bc 6A065B17 		.word	391841386
 621 05c0 51FA2AB4 		.word	-1272251823
 622 05c4 E7D40CB6 		.word	-1240673049
 623 05c8 2E2602C9 		.word	-922606034
 624 05cc F20E7FDC 		.word	-595652878
 625 05d0 287D15DA 		.word	-636125912
 626 05d4 736A065B 		.word	1527147123
 627 05d8 17138164 		.word	1686180631
 628 05dc 79873F6E 		.word	1849657209
 629 05e0 94BE0AED 		.word	-318062956
 630 05e4 393583AD 		.word	-1383910087
 631 05e8 8B8940B2 		.word	-1304393333
 632 05ec BCC31F37 		.word	924828604
 633 05f0 0AED3935 		.word	892988682
 634 05f4 83AD8B89 		.word	-1987334781
 635 05f8 40B2BCC3 		.word	-1011043776
 636 05fc 1F374A5F 		.word	1598699295
 637 0600 85F69C9A 		.word	-1700989307
 638 0604 C1D6C544 		.word	1153816257
 639 0608 2059DEE1 		.word	-505521888
 640 060c 8F1BA5AF 		.word	-1348134001
 641 0610 427B4ECD 		.word	-850494654
 642 0614 60EB6222 		.word	576908128
 643 0618 902CEFF0 		.word	-252760944
ARM GAS  /tmp/cc6bdJLE.s 			page 12


 644 061c C78DD257 		.word	1473416647
 645 0620 C31F374A 		.word	1245126595
 646 0624 5F85F69C 		.word	-1661565601
 647 0628 9AC1D6C5 		.word	-975781478
 648 062c 442059DE 		.word	-564584380
 649 0630 E18F1BA5 		.word	-1524920351
 650 0634 AF427B4E 		.word	1316700847
 651 0638 CD60EB62 		.word	1659592909
 652 063c 22902CEF 		.word	-282292190
 653 0640 F0C78DD2 		.word	-762460176
 654 0644 57A13DA7 		.word	-1489133225
 655 0648 66B07531 		.word	829796454
 656 064c 11489677 		.word	2006337553
 657 0650 BCC31F37 		.word	924828604
 658 0654 4A5F85F6 		.word	-159031478
 659 0658 9C9AC1D6 		.word	-691955044
 660 065c C5442059 		.word	1495286981
 661 0660 DEE18F1B 		.word	462414302
 662 0664 A5AF427B 		.word	2067967909
 663 0668 4ECD60EB 		.word	-345977522
 664 066c 6222902C 		.word	747643490
 665 0670 EFF0C78D 		.word	-1916276497
 666 0674 D257A13D 		.word	1033983954
 667 0678 A766B075 		.word	1974494887
 668 067c 31114896 		.word	-1773661903
 669 0680 75311148 		.word	1209086325
 670 0684 9677F8E3 		.word	-470255722
 671 0688 46E9ABD0 		.word	-794039994
 672 068c 9E5333D8 		.word	-667724898
 673 0690 BA980824 		.word	604543162
 674 0694 CB3BFC71 		.word	1912355787
 675 0698 A3F45568 		.word	1750463651
 676 069c CFA9196C 		.word	1813621199
 677 06a0 5D4C0492 		.word	-1845212067
 678 06a4 E51DFEB8 		.word	-1191305755
 679 06a8 51FA2AB4 		.word	-1272251823
 680 06ac E7D40CB6 		.word	-1240673049
 681 06b0 2E2602C9 		.word	-922606034
 682 06b4 F20E7FDC 		.word	-595652878
 683 06b8 287D15DA 		.word	-636125912
 684 06bc 736A065B 		.word	1527147123
 685 06c0 17138164 		.word	1686180631
 686 06c4 79873F6E 		.word	1849657209
 687 06c8 94BE0AED 		.word	-318062956
 688 06cc 393583AD 		.word	-1383910087
 689 06d0 8B8940B2 		.word	-1304393333
 690 06d4 BCC31F37 		.word	924828604
 691 06d8 4A5F85F6 		.word	-159031478
 692 06dc 9C9AC1D6 		.word	-691955044
 693 06e0 E7D40CB6 		.word	-1240673049
 694 06e4 2E2602C9 		.word	-922606034
 695 06e8 F20E7FDC 		.word	-595652878
 696 06ec 287D15DA 		.word	-636125912
 697 06f0 736A065B 		.word	1527147123
 698 06f4 17138164 		.word	1686180631
 699 06f8 79873F6E 		.word	1849657209
 700 06fc 94BE0AED 		.word	-318062956
ARM GAS  /tmp/cc6bdJLE.s 			page 13


 701 0700 393583AD 		.word	-1383910087
 702 0704 8B8940B2 		.word	-1304393333
 703 0708 BCC31F37 		.word	924828604
 704 070c 4A5F85F6 		.word	-159031478
 705 0710 60EB6222 		.word	576908128
 706 0714 902CEFF0 		.word	-252760944
 707 0718 C78DD257 		.word	1473416647
 708 071c A13DA766 		.word	1722236321
 709 0720 B0753111 		.word	288454064
 710 0724 489677F8 		.word	-126380472
 711 0728 E346E9AB 		.word	-1410775325
 712 072c D09E5333 		.word	861118160
 713 0730 D8BA9808 		.word	144227032
 714 0734 24CB3BFC 		.word	-63190236
 715 0738 71A3F455 		.word	1442095985
 716 073c 68CFA919 		.word	430559080
 717 0740 A9196C5D 		.word	1567365545
 718 0744 4C0492E5 		.word	-443415476
 719 0748 1DFEB851 		.word	1371078173
 720 074c FA2AB4E7 		.word	-407622918
 721 0750 D40CB62E 		.word	783682772
 722 0754 2602C9F2 		.word	-221707738
 723 0758 0E7FDC28 		.word	685539086
 724 075c 7D15DA73 		.word	1943672189
 725 0760 6A065B17 		.word	391841386
 726 0764 13816479 		.word	2036629779
 727 0768 873F6E94 		.word	-1804714105
 728 076c BE0AED39 		.word	971836094
 729 0770 F20E7FDC 		.word	-595652878
 730 0774 287D15DA 		.word	-636125912
 731 0778 736A065B 		.word	1527147123
 732 077c 17138164 		.word	1686180631
 733 0780 79873F6E 		.word	1849657209
 734 0784 94BE0AED 		.word	-318062956
 735 0788 393583AD 		.word	-1383910087
 736 078c 8B8940B2 		.word	-1304393333
 737 0790 BCC31F37 		.word	924828604
 738 0794 4A5F85F6 		.word	-159031478
 739 0798 9C9AC1D6 		.word	-691955044
 740 079c C5442059 		.word	1495286981
 741 07a0 3BFC71A3 		.word	-1552810949
 742 07a4 F45568CF 		.word	-815245836
 743 07a8 A9196C5D 		.word	1567365545
 744 07ac 4C0492E5 		.word	-443415476
 745 07b0 1DFEB851 		.word	1371078173
 746 07b4 FA2AB4E7 		.word	-407622918
 747 07b8 D40CB62E 		.word	783682772
 748 07bc 2602C9F2 		.word	-221707738
 749 07c0 0E7FDC28 		.word	685539086
 750 07c4 7D15DA73 		.word	1943672189
 751 07c8 6A065B17 		.word	391841386
 752 07cc 13816479 		.word	2036629779
 753 07d0 442059DE 		.word	-564584380
 754 07d4 E18F1BA5 		.word	-1524920351
 755 07d8 AF427B4E 		.word	1316700847
 756 07dc CD60EB62 		.word	1659592909
 757 07e0 22902CEF 		.word	-282292190
ARM GAS  /tmp/cc6bdJLE.s 			page 14


 758 07e4 F0C78DD2 		.word	-762460176
 759 07e8 57A13DA7 		.word	-1489133225
 760 07ec 66B07531 		.word	829796454
 761 07f0 11489677 		.word	2006337553
 762 07f4 F8E346E9 		.word	-381230088
 763 07f8 ABD09E53 		.word	1402917035
 764 07fc 33D8BA98 		.word	-1732585421
 765 0800 8DD257A1 		.word	-1588079987
 766 0804 3DA766B0 		.word	-1335449795
 767 0808 75311148 		.word	1209086325
 768 080c 9677F8E3 		.word	-470255722
 769 0810 46E9ABD0 		.word	-794039994
 770 0814 9E5333D8 		.word	-667724898
 771 0818 BA980824 		.word	604543162
 772 081c CB3BFC71 		.word	1912355787
 773 0820 A3F45568 		.word	1750463651
 774 0824 CFA9196C 		.word	1813621199
 775 0828 5D4C0492 		.word	-1845212067
 776 082c E51DFEB8 		.word	-1191305755
 777 0830 D6C54420 		.word	541378006
 778 0834 59DEE18F 		.word	-1881022887
 779 0838 1BA5AF42 		.word	1118807323
 780 083c 7B4ECD60 		.word	1624067707
 781 0840 EB622290 		.word	-1876794645
 782 0844 2CEFF0C7 		.word	-940511444
 783 0848 8DD257A1 		.word	-1588079987
 784 084c 3DA766B0 		.word	-1335449795
 785 0850 75311148 		.word	1209086325
 786 0854 9677F8E3 		.word	-470255722
 787 0858 46E9ABD0 		.word	-794039994
 788 085c 9E5333D8 		.word	-667724898
 789 0860 1F374A5F 		.word	1598699295
 790 0864 85F69C9A 		.word	-1700989307
 791 0868 C1D6C544 		.word	1153816257
 792 086c 2059DEE1 		.word	-505521888
 793 0870 8F1BA5AF 		.word	-1348134001
 794 0874 427B4ECD 		.word	-850494654
 795 0878 60EB6222 		.word	576908128
 796 087c 902CEFF0 		.word	-252760944
 797 0880 C78DD257 		.word	1473416647
 798 0884 A13DA766 		.word	1722236321
 799 0888 B0753111 		.word	288454064
 800 088c 489677F8 		.word	-126380472
 801              		.comm	rr,5,4
 802              		.global	compile_info
 803              		.align	2
 806              	compile_info:
 807 0890 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Mon Nov  7 01:5"
 807      746F6F74 
 807      68203230 
 807      31352D31 
 807      302D5231 
 808 08c3 323A3438 		.ascii	"2:48 KST 2016\000"
 808      204B5354 
 808      20323031 
 808      3600
 809              		.comm	device_index,1,1
ARM GAS  /tmp/cc6bdJLE.s 			page 15


 810              		.comm	first_ts,4,4
 811              		.comm	second_ts,4,4
 812              		.comm	diff_ts,4,4
 813              		.comm	rssi_avg,1,1
 814              		.comm	freq_avg,1,1
 815              		.comm	clkn,4,4
 816              		.global	hop_mode
 817              		.bss
 820              	hop_mode:
 821 0000 00       		.space	1
 822              		.global	do_hop
 825              	do_hop:
 826 0001 00       		.space	1
 827              		.global	cs_no_squelch
 830              	cs_no_squelch:
 831 0002 00       		.space	1
 832              		.global	cs_threshold_req
 833              		.data
 836              	cs_threshold_req:
 837 0004 88       		.byte	-120
 838              		.global	cs_threshold_cur
 841              	cs_threshold_cur:
 842 0005 88       		.byte	-120
 843              		.comm	cs_trigger,1,1
 844              		.comm	keepalive_trigger,1,1
 845              		.comm	cs_timestamp,4,4
 846              		.global	hop_direct_channel
 847              		.bss
 848 0003 00       		.align	1
 851              	hop_direct_channel:
 852 0004 0000     		.space	2
 853              		.global	clock_trim
 854 0006 0000     		.align	2
 857              	clock_trim:
 858 0008 00000000 		.space	4
 859              		.comm	idle_buf_clkn_high,4,4
 860              		.comm	active_buf_clkn_high,4,4
 861              		.comm	idle_buf_clk100ns,4,4
 862              		.comm	active_buf_clk100ns,4,4
 863              		.global	idle_buf_channel
 864              		.align	1
 867              	idle_buf_channel:
 868 000c 0000     		.space	2
 869              		.global	active_buf_channel
 870              		.align	1
 873              	active_buf_channel:
 874 000e 0000     		.space	2
 875              		.global	slave_mac_address
 876              		.align	2
 879              	slave_mac_address:
 880 0010 00000000 		.space	6
 880      0000
 881              		.comm	rxbuf1,50,4
 882              		.comm	rxbuf2,50,4
 883              		.global	active_rxbuf
 884              		.data
 885 0006 0000     		.align	2
ARM GAS  /tmp/cc6bdJLE.s 			page 16


 888              	active_rxbuf:
 889 0008 00000000 		.word	rxbuf1
 890              		.global	idle_rxbuf
 891              		.align	2
 894              	idle_rxbuf:
 895 000c 00000000 		.word	rxbuf2
 896              		.global	le
 897              		.align	2
 900              	le:
 901 0010 D6BE898E 		.word	-1903575338
 902 0014 7D6B     		.short	27517
 903 0016 7191     		.short	-28303
 904 0018 55555500 		.word	5592405
 905 001c AAAAAA00 		.word	11184810
 906 0020 01000000 		.word	1
 907 0024 00       		.byte	0
 908 0025 000000   		.space	3
 909 0028 00000000 		.word	0
 910 002c 00000000 		.space	32
 910      00000000 
 910      00000000 
 910      00000000 
 910      00000000 
 911 004c 00000000 		.word	0
 912 0050 00000000 		.word	0
 913              		.comm	le_promisc,264,4
 914              		.global	le_jam_count
 915              		.bss
 916 0016 0000     		.align	2
 919              	le_jam_count:
 920 0018 00000000 		.space	4
 921              		.global	data_cb
 922              		.align	2
 925              	data_cb:
 926 001c 00000000 		.space	4
 927              		.global	packet_cb
 928              		.align	2
 931              	packet_cb:
 932 0020 00000000 		.space	4
 933              		.global	rssi_iir
 934              		.align	2
 937              	rssi_iir:
 938 0024 00000000 		.space	158
 938      00000000 
 938      00000000 
 938      00000000 
 938      00000000 
 939              		.comm	unpacked,800,4
 940              		.global	mode
 943              	mode:
 944 00c2 00       		.space	1
 945              		.global	requested_mode
 948              	requested_mode:
 949 00c3 00       		.space	1
 950              		.global	jam_mode
 953              	jam_mode:
 954 00c4 00       		.space	1
ARM GAS  /tmp/cc6bdJLE.s 			page 17


 955              		.global	ego_mode
 958              	ego_mode:
 959 00c5 00       		.space	1
 960              		.global	modulation
 963              	modulation:
 964 00c6 00       		.space	1
 965              		.global	channel
 966              		.data
 967              		.align	1
 970              	channel:
 971 0054 6209     		.short	2402
 972              		.global	requested_channel
 973              		.bss
 974 00c7 00       		.align	1
 977              	requested_channel:
 978 00c8 0000     		.space	2
 979              		.global	saved_request
 980              		.align	1
 983              	saved_request:
 984 00ca 0000     		.space	2
 985              		.global	low_freq
 986              		.data
 987              		.align	1
 990              	low_freq:
 991 0056 6009     		.short	2400
 992              		.global	high_freq
 993              		.align	1
 996              	high_freq:
 997 0058 B309     		.short	2483
 998              		.global	rssi_threshold
 1001              	rssi_threshold:
 1002 005a E2       		.byte	-30
 1003              		.comm	rx_dma_lli1,16,4
 1004              		.comm	rx_dma_lli2,16,4
 1005              		.comm	le_dma_lli,176,4
 1006              		.comm	rx_tc,4,4
 1007              		.comm	rx_err,4,4
 1008              		.global	status
 1009              		.bss
 1012              	status:
 1013 00cc 00       		.space	1
 1014              		.comm	rssi_max,1,1
 1015              		.comm	rssi_min,1,1
 1016              		.global	rssi_count
 1019              	rssi_count:
 1020 00cd 00       		.space	1
 1021              		.global	rssi_sum
 1022 00ce 0000     		.align	2
 1025              	rssi_sum:
 1026 00d0 00000000 		.space	4
 1027              		.section	.text.rssi_reset,"ax",%progbits
 1028              		.align	2
 1029              		.thumb
 1030              		.thumb_func
 1032              	rssi_reset:
 1033              	.LFB0:
 1034              		.file 1 "bluetooth_rxtx.c"
ARM GAS  /tmp/cc6bdJLE.s 			page 18


   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** u8 device_index;
  50:bluetooth_rxtx.c **** u32 first_ts, second_ts, diff_ts;
  51:bluetooth_rxtx.c **** uint8_t rssi_avg;
  52:bluetooth_rxtx.c **** uint8_t freq_avg;
  53:bluetooth_rxtx.c **** 
  54:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  55:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  56:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  57:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 19


  58:bluetooth_rxtx.c **** #define HOP_NONE      0
  59:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  60:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  61:bluetooth_rxtx.c **** #define HOP_BTLE      3
  62:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  63:bluetooth_rxtx.c **** 
  64:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  65:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  66:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  67:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  68:bluetooth_rxtx.c **** 
  69:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  70:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  71:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  72:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  73:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  74:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  75:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  76:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  77:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  78:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  79:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  80:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  81:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  82:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  83:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  84:bluetooth_rxtx.c **** 
  85:bluetooth_rxtx.c **** /* DMA buffers */
  86:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  87:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  88:bluetooth_rxtx.c **** 
  89:bluetooth_rxtx.c **** /*
  90:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  91:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  92:bluetooth_rxtx.c ****  */
  93:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  94:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  95:bluetooth_rxtx.c **** 
  96:bluetooth_rxtx.c **** le_state_t le = {
  97:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  98:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  99:bluetooth_rxtx.c **** 	.syncl = 0x9171,
 100:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
 101:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
 102:bluetooth_rxtx.c **** 	.crc_verify = 1,
 103:bluetooth_rxtx.c **** 
 104:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 105:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 106:bluetooth_rxtx.c **** 	.target_set = 0,
 107:bluetooth_rxtx.c **** 	.last_packet = 0,
 108:bluetooth_rxtx.c **** };
 109:bluetooth_rxtx.c **** 
 110:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 111:bluetooth_rxtx.c **** 	u32 aa;
 112:bluetooth_rxtx.c **** 	int count;
 113:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 114:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 20


 115:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 116:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 117:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 118:bluetooth_rxtx.c **** 
 119:bluetooth_rxtx.c **** 	// recovering hop interval
 120:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 121:bluetooth_rxtx.c **** 	int consec_intervals;
 122:bluetooth_rxtx.c **** } le_promisc_state_t;
 123:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 124:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 125:bluetooth_rxtx.c **** 
 126:bluetooth_rxtx.c **** /* LE jamming */
 127:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 128:bluetooth_rxtx.c **** int le_jam_count = 0;
 129:bluetooth_rxtx.c **** 
 130:bluetooth_rxtx.c **** /* set LE access address */
 131:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 132:bluetooth_rxtx.c **** 
 133:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 134:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 135:bluetooth_rxtx.c **** 
 136:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 137:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 138:bluetooth_rxtx.c **** 
 139:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 140:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 141:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 142:bluetooth_rxtx.c **** 
 143:bluetooth_rxtx.c **** /*
 144:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 145:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 146:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 147:bluetooth_rxtx.c **** */
 148:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 149:bluetooth_rxtx.c **** 
 150:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 151:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 152:bluetooth_rxtx.c **** 
 153:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 154:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 155:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 156:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 157:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 158:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 159:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 160:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 161:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 162:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 163:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 164:bluetooth_rxtx.c **** 
 165:bluetooth_rxtx.c **** /* DMA linked list items */
 166:bluetooth_rxtx.c **** typedef struct {
 167:bluetooth_rxtx.c **** 	u32 src;
 168:bluetooth_rxtx.c **** 	u32 dest;
 169:bluetooth_rxtx.c **** 	u32 next_lli;
 170:bluetooth_rxtx.c **** 	u32 control;
 171:bluetooth_rxtx.c **** } dma_lli;
ARM GAS  /tmp/cc6bdJLE.s 			page 21


 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 174:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 175:bluetooth_rxtx.c **** 
 176:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 177:bluetooth_rxtx.c **** 
 178:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 179:bluetooth_rxtx.c **** volatile u32 rx_tc;
 180:bluetooth_rxtx.c **** volatile u32 rx_err;
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** /* status information byte */
 183:bluetooth_rxtx.c **** volatile u8 status = 0;
 184:bluetooth_rxtx.c **** 
 185:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 186:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 187:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 188:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 189:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 190:bluetooth_rxtx.c **** 
 191:bluetooth_rxtx.c **** /*
 192:bluetooth_rxtx.c ****  * RSSI
 193:bluetooth_rxtx.c ****  */
 194:bluetooth_rxtx.c **** int8_t rssi_max;
 195:bluetooth_rxtx.c **** int8_t rssi_min;
 196:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 197:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 198:bluetooth_rxtx.c **** 
 199:bluetooth_rxtx.c **** static void rssi_reset(void)
 200:bluetooth_rxtx.c **** {
 1035              		.loc 1 200 0
 1036              		.cfi_startproc
 1037              		@ args = 0, pretend = 0, frame = 0
 1038              		@ frame_needed = 1, uses_anonymous_args = 0
 1039              		@ link register save eliminated.
 1040 0000 80B4     		push	{r7}
 1041              		.cfi_def_cfa_offset 4
 1042              		.cfi_offset 7, -4
 1043 0002 00AF     		add	r7, sp, #0
 1044              		.cfi_def_cfa_register 7
 201:bluetooth_rxtx.c **** 	rssi_count = 0;
 1045              		.loc 1 201 0
 1046 0004 074B     		ldr	r3, .L2
 1047 0006 0022     		movs	r2, #0
 1048 0008 1A70     		strb	r2, [r3]
 202:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1049              		.loc 1 202 0
 1050 000a 074B     		ldr	r3, .L2+4
 1051 000c 0022     		movs	r2, #0
 1052 000e 1A60     		str	r2, [r3]
 203:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1053              		.loc 1 203 0
 1054 0010 064B     		ldr	r3, .L2+8
 1055 0012 8022     		movs	r2, #128
 1056 0014 1A70     		strb	r2, [r3]
 204:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1057              		.loc 1 204 0
 1058 0016 064B     		ldr	r3, .L2+12
ARM GAS  /tmp/cc6bdJLE.s 			page 22


 1059 0018 7F22     		movs	r2, #127
 1060 001a 1A70     		strb	r2, [r3]
 205:bluetooth_rxtx.c **** }
 1061              		.loc 1 205 0
 1062 001c BD46     		mov	sp, r7
 1063              		.cfi_def_cfa_register 13
 1064              		@ sp needed
 1065 001e 5DF8047B 		ldr	r7, [sp], #4
 1066              		.cfi_restore 7
 1067              		.cfi_def_cfa_offset 0
 1068 0022 7047     		bx	lr
 1069              	.L3:
 1070              		.align	2
 1071              	.L2:
 1072 0024 00000000 		.word	rssi_count
 1073 0028 00000000 		.word	rssi_sum
 1074 002c 00000000 		.word	rssi_max
 1075 0030 00000000 		.word	rssi_min
 1076              		.cfi_endproc
 1077              	.LFE0:
 1079              		.section	.text.rssi_add,"ax",%progbits
 1080              		.align	2
 1081              		.thumb
 1082              		.thumb_func
 1084              	rssi_add:
 1085              	.LFB1:
 206:bluetooth_rxtx.c **** 
 207:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 208:bluetooth_rxtx.c **** {
 1086              		.loc 1 208 0
 1087              		.cfi_startproc
 1088              		@ args = 0, pretend = 0, frame = 8
 1089              		@ frame_needed = 1, uses_anonymous_args = 0
 1090              		@ link register save eliminated.
 1091 0000 80B4     		push	{r7}
 1092              		.cfi_def_cfa_offset 4
 1093              		.cfi_offset 7, -4
 1094 0002 83B0     		sub	sp, sp, #12
 1095              		.cfi_def_cfa_offset 16
 1096 0004 00AF     		add	r7, sp, #0
 1097              		.cfi_def_cfa_register 7
 1098 0006 0346     		mov	r3, r0
 1099 0008 FB71     		strb	r3, [r7, #7]
 209:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1100              		.loc 1 209 0
 1101 000a 144B     		ldr	r3, .L5
 1102 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1103 000e 5AB2     		sxtb	r2, r3
 1104 0010 97F90730 		ldrsb	r3, [r7, #7]
 1105 0014 9342     		cmp	r3, r2
 1106 0016 B8BF     		it	lt
 1107 0018 1346     		movlt	r3, r2
 1108 001a DAB2     		uxtb	r2, r3
 1109 001c 0F4B     		ldr	r3, .L5
 1110 001e 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1111              		.loc 1 210 0
ARM GAS  /tmp/cc6bdJLE.s 			page 23


 1112 0020 0F4B     		ldr	r3, .L5+4
 1113 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1114 0024 5AB2     		sxtb	r2, r3
 1115 0026 97F90730 		ldrsb	r3, [r7, #7]
 1116 002a 9342     		cmp	r3, r2
 1117 002c A8BF     		it	ge
 1118 002e 1346     		movge	r3, r2
 1119 0030 DAB2     		uxtb	r2, r3
 1120 0032 0B4B     		ldr	r3, .L5+4
 1121 0034 1A70     		strb	r2, [r3]
 211:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1122              		.loc 1 211 0
 1123 0036 97F90730 		ldrsb	r3, [r7, #7]
 1124 003a 1A02     		lsls	r2, r3, #8
 1125 003c 094B     		ldr	r3, .L5+8
 1126 003e 1B68     		ldr	r3, [r3]
 1127 0040 1344     		add	r3, r3, r2
 1128 0042 084A     		ldr	r2, .L5+8
 1129 0044 1360     		str	r3, [r2]
 212:bluetooth_rxtx.c **** 	rssi_count += 1;
 1130              		.loc 1 212 0
 1131 0046 084B     		ldr	r3, .L5+12
 1132 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1133 004a 0133     		adds	r3, r3, #1
 1134 004c DAB2     		uxtb	r2, r3
 1135 004e 064B     		ldr	r3, .L5+12
 1136 0050 1A70     		strb	r2, [r3]
 213:bluetooth_rxtx.c **** }
 1137              		.loc 1 213 0
 1138 0052 0C37     		adds	r7, r7, #12
 1139              		.cfi_def_cfa_offset 4
 1140 0054 BD46     		mov	sp, r7
 1141              		.cfi_def_cfa_register 13
 1142              		@ sp needed
 1143 0056 5DF8047B 		ldr	r7, [sp], #4
 1144              		.cfi_restore 7
 1145              		.cfi_def_cfa_offset 0
 1146 005a 7047     		bx	lr
 1147              	.L6:
 1148              		.align	2
 1149              	.L5:
 1150 005c 00000000 		.word	rssi_max
 1151 0060 00000000 		.word	rssi_min
 1152 0064 00000000 		.word	rssi_sum
 1153 0068 00000000 		.word	rssi_count
 1154              		.cfi_endproc
 1155              	.LFE1:
 1157              		.section	.text.rssi_iir_update,"ax",%progbits
 1158              		.align	2
 1159              		.thumb
 1160              		.thumb_func
 1162              	rssi_iir_update:
 1163              	.LFB2:
 214:bluetooth_rxtx.c **** 
 215:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 216:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 217:bluetooth_rxtx.c **** {
ARM GAS  /tmp/cc6bdJLE.s 			page 24


 1164              		.loc 1 217 0
 1165              		.cfi_startproc
 1166              		@ args = 0, pretend = 0, frame = 16
 1167              		@ frame_needed = 1, uses_anonymous_args = 0
 1168              		@ link register save eliminated.
 1169 0000 80B4     		push	{r7}
 1170              		.cfi_def_cfa_offset 4
 1171              		.cfi_offset 7, -4
 1172 0002 85B0     		sub	sp, sp, #20
 1173              		.cfi_def_cfa_offset 24
 1174 0004 00AF     		add	r7, sp, #0
 1175              		.cfi_def_cfa_register 7
 218:bluetooth_rxtx.c **** 	int i;
 219:bluetooth_rxtx.c **** 	int32_t avg;
 220:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 221:bluetooth_rxtx.c **** 
 222:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 223:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 224:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1176              		.loc 1 224 0
 1177 0006 1F4B     		ldr	r3, .L13
 1178 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1179 000a 002B     		cmp	r3, #0
 1180 000c 06D0     		beq	.L8
 225:bluetooth_rxtx.c **** 		i = channel - 2402;
 1181              		.loc 1 225 0
 1182 000e 1E4B     		ldr	r3, .L13+4
 1183 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1184 0012 9BB2     		uxth	r3, r3
 1185 0014 A3F66213 		subw	r3, r3, #2402
 1186 0018 FB60     		str	r3, [r7, #12]
 1187 001a 01E0     		b	.L9
 1188              	.L8:
 226:bluetooth_rxtx.c **** 	else
 227:bluetooth_rxtx.c **** 		i = 0;
 1189              		.loc 1 227 0
 1190 001c 0023     		movs	r3, #0
 1191 001e FB60     		str	r3, [r7, #12]
 1192              	.L9:
 228:bluetooth_rxtx.c **** 
 229:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 230:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1193              		.loc 1 230 0
 1194 0020 1A4B     		ldr	r3, .L13+8
 1195 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1196 0024 002B     		cmp	r3, #0
 1197 0026 08D0     		beq	.L10
 231:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1198              		.loc 1 231 0
 1199 0028 194B     		ldr	r3, .L13+12
 1200 002a 1B68     		ldr	r3, [r3]
 1201 002c 8033     		adds	r3, r3, #128
 1202 002e 174A     		ldr	r2, .L13+8
 1203 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1204 0032 93FBF2F3 		sdiv	r3, r3, r2
 1205 0036 BB60     		str	r3, [r7, #8]
 1206 0038 01E0     		b	.L11
ARM GAS  /tmp/cc6bdJLE.s 			page 25


 1207              	.L10:
 232:bluetooth_rxtx.c **** 	else
 233:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1208              		.loc 1 233 0
 1209 003a 0023     		movs	r3, #0
 1210 003c BB60     		str	r3, [r7, #8]
 1211              	.L11:
 234:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1212              		.loc 1 234 0
 1213 003e 154A     		ldr	r2, .L13+16
 1214 0040 FB68     		ldr	r3, [r7, #12]
 1215 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1216 0046 1AB2     		sxth	r2, r3
 1217 0048 1346     		mov	r3, r2
 1218 004a 9B01     		lsls	r3, r3, #6
 1219 004c 9B1A     		subs	r3, r3, r2
 1220 004e 9B00     		lsls	r3, r3, #2
 1221 0050 1344     		add	r3, r3, r2
 1222 0052 7B60     		str	r3, [r7, #4]
 235:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1223              		.loc 1 235 0
 1224 0054 BA68     		ldr	r2, [r7, #8]
 1225 0056 1346     		mov	r3, r2
 1226 0058 5B00     		lsls	r3, r3, #1
 1227 005a 1344     		add	r3, r3, r2
 1228 005c 7A68     		ldr	r2, [r7, #4]
 1229 005e 1344     		add	r3, r3, r2
 1230 0060 7B60     		str	r3, [r7, #4]
 236:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1231              		.loc 1 236 0
 1232 0062 7B68     		ldr	r3, [r7, #4]
 1233 0064 8033     		adds	r3, r3, #128
 1234 0066 002B     		cmp	r3, #0
 1235 0068 00DA     		bge	.L12
 1236 006a FF33     		adds	r3, r3, #255
 1237              	.L12:
 1238 006c 1B12     		asrs	r3, r3, #8
 1239 006e 99B2     		uxth	r1, r3
 1240 0070 084A     		ldr	r2, .L13+16
 1241 0072 FB68     		ldr	r3, [r7, #12]
 1242 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 237:bluetooth_rxtx.c **** }
 1243              		.loc 1 237 0
 1244 0078 1437     		adds	r7, r7, #20
 1245              		.cfi_def_cfa_offset 4
 1246 007a BD46     		mov	sp, r7
 1247              		.cfi_def_cfa_register 13
 1248              		@ sp needed
 1249 007c 5DF8047B 		ldr	r7, [sp], #4
 1250              		.cfi_restore 7
 1251              		.cfi_def_cfa_offset 0
 1252 0080 7047     		bx	lr
 1253              	.L14:
 1254 0082 00BF     		.align	2
 1255              	.L13:
 1256 0084 00000000 		.word	hop_mode
 1257 0088 00000000 		.word	channel
ARM GAS  /tmp/cc6bdJLE.s 			page 26


 1258 008c 00000000 		.word	rssi_count
 1259 0090 00000000 		.word	rssi_sum
 1260 0094 00000000 		.word	rssi_iir
 1261              		.cfi_endproc
 1262              	.LFE2:
 1264              		.section	.text.cs_threshold_set,"ax",%progbits
 1265              		.align	2
 1266              		.thumb
 1267              		.thumb_func
 1269              	cs_threshold_set:
 1270              	.LFB3:
 238:bluetooth_rxtx.c **** 
 239:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 240:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 241:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 242:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 243:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 244:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 245:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 246:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 247:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 248:bluetooth_rxtx.c **** {
 1271              		.loc 1 248 0
 1272              		.cfi_startproc
 1273              		@ args = 0, pretend = 0, frame = 8
 1274              		@ frame_needed = 1, uses_anonymous_args = 0
 1275 0000 80B5     		push	{r7, lr}
 1276              		.cfi_def_cfa_offset 8
 1277              		.cfi_offset 7, -8
 1278              		.cfi_offset 14, -4
 1279 0002 82B0     		sub	sp, sp, #8
 1280              		.cfi_def_cfa_offset 16
 1281 0004 00AF     		add	r7, sp, #0
 1282              		.cfi_def_cfa_register 7
 1283 0006 0346     		mov	r3, r0
 1284 0008 0A46     		mov	r2, r1
 1285 000a FB71     		strb	r3, [r7, #7]
 1286 000c 1346     		mov	r3, r2
 1287 000e BB71     		strb	r3, [r7, #6]
 249:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1288              		.loc 1 249 0
 1289 0010 97F90730 		ldrsb	r3, [r7, #7]
 1290 0014 13F1140F 		cmn	r3, #20
 1291 0018 0DD0     		beq	.L16
 1292              		.loc 1 249 0 is_stmt 0 discriminator 1
 1293 001a 97F90730 		ldrsb	r3, [r7, #7]
 1294 001e 13F1130F 		cmn	r3, #19
 1295 0022 08DA     		bge	.L16
 1296              		.loc 1 249 0 discriminator 3
 1297 0024 97F90730 		ldrsb	r3, [r7, #7]
 1298 0028 6FF07702 		mvn	r2, #119
 1299 002c 9342     		cmp	r3, r2
 1300 002e B8BF     		it	lt
 1301 0030 1346     		movlt	r3, r2
 1302 0032 DBB2     		uxtb	r3, r3
 1303 0034 00E0     		b	.L17
 1304              	.L16:
ARM GAS  /tmp/cc6bdJLE.s 			page 27


 1305              		.loc 1 249 0 discriminator 4
 1306 0036 EC23     		movs	r3, #236
 1307              	.L17:
 1308              		.loc 1 249 0 discriminator 6
 1309 0038 FB71     		strb	r3, [r7, #7]
 250:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1310              		.loc 1 250 0 is_stmt 1 discriminator 6
 1311 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1312 003c 3833     		adds	r3, r3, #56
 1313 003e DBB2     		uxtb	r3, r3
 1314 0040 9BB2     		uxth	r3, r3
 1315 0042 03F0FC03 		and	r3, r3, #252
 1316 0046 9AB2     		uxth	r2, r3
 1317 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1318 004a 9BB2     		uxth	r3, r3
 1319 004c 03F00303 		and	r3, r3, #3
 1320 0050 9BB2     		uxth	r3, r3
 1321 0052 1343     		orrs	r3, r3, r2
 1322 0054 9BB2     		uxth	r3, r3
 1323 0056 9BB2     		uxth	r3, r3
 1324 0058 0620     		movs	r0, #6
 1325 005a 1946     		mov	r1, r3
 1326 005c FFF7FEFF 		bl	cc2400_set
 251:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1327              		.loc 1 251 0 discriminator 6
 1328 0060 084A     		ldr	r2, .L18
 1329 0062 FB79     		ldrb	r3, [r7, #7]
 1330 0064 1370     		strb	r3, [r2]
 252:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1331              		.loc 1 252 0 discriminator 6
 1332 0066 97F90730 		ldrsb	r3, [r7, #7]
 1333 006a 13F1770F 		cmn	r3, #119
 1334 006e B4BF     		ite	lt
 1335 0070 0123     		movlt	r3, #1
 1336 0072 0023     		movge	r3, #0
 1337 0074 DBB2     		uxtb	r3, r3
 1338 0076 1A46     		mov	r2, r3
 1339 0078 034B     		ldr	r3, .L18+4
 1340 007a 1A70     		strb	r2, [r3]
 253:bluetooth_rxtx.c **** }
 1341              		.loc 1 253 0 discriminator 6
 1342 007c 0837     		adds	r7, r7, #8
 1343              		.cfi_def_cfa_offset 8
 1344 007e BD46     		mov	sp, r7
 1345              		.cfi_def_cfa_register 13
 1346              		@ sp needed
 1347 0080 80BD     		pop	{r7, pc}
 1348              	.L19:
 1349 0082 00BF     		.align	2
 1350              	.L18:
 1351 0084 00000000 		.word	cs_threshold_cur
 1352 0088 00000000 		.word	cs_no_squelch
 1353              		.cfi_endproc
 1354              	.LFE3:
 1356              		.section	.text.enqueue,"ax",%progbits
 1357              		.align	2
 1358              		.thumb
ARM GAS  /tmp/cc6bdJLE.s 			page 28


 1359              		.thumb_func
 1361              	enqueue:
 1362              	.LFB4:
 254:bluetooth_rxtx.c **** 
 255:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 256:bluetooth_rxtx.c **** {
 1363              		.loc 1 256 0
 1364              		.cfi_startproc
 1365              		@ args = 0, pretend = 0, frame = 32
 1366              		@ frame_needed = 1, uses_anonymous_args = 0
 1367 0000 80B5     		push	{r7, lr}
 1368              		.cfi_def_cfa_offset 8
 1369              		.cfi_offset 7, -8
 1370              		.cfi_offset 14, -4
 1371 0002 88B0     		sub	sp, sp, #32
 1372              		.cfi_def_cfa_offset 40
 1373 0004 00AF     		add	r7, sp, #0
 1374              		.cfi_def_cfa_register 7
 1375 0006 0346     		mov	r3, r0
 1376 0008 3960     		str	r1, [r7]
 1377 000a FB71     		strb	r3, [r7, #7]
 257:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1378              		.loc 1 257 0
 1379 000c FFF7FEFF 		bl	usb_enqueue
 1380 0010 F861     		str	r0, [r7, #28]
 258:bluetooth_rxtx.c **** 
 259:bluetooth_rxtx.c **** 	/* fail if queue is full */
 260:bluetooth_rxtx.c **** 	if (f == NULL) {
 1381              		.loc 1 260 0
 1382 0012 FB69     		ldr	r3, [r7, #28]
 1383 0014 002B     		cmp	r3, #0
 1384 0016 09D1     		bne	.L21
 261:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1385              		.loc 1 261 0
 1386 0018 4E4B     		ldr	r3, .L25
 1387 001a 1B78     		ldrb	r3, [r3]
 1388 001c DBB2     		uxtb	r3, r3
 1389 001e 43F00403 		orr	r3, r3, #4
 1390 0022 DAB2     		uxtb	r2, r3
 1391 0024 4B4B     		ldr	r3, .L25
 1392 0026 1A70     		strb	r2, [r3]
 262:bluetooth_rxtx.c **** 		return 0;
 1393              		.loc 1 262 0
 1394 0028 0023     		movs	r3, #0
 1395 002a 8EE0     		b	.L22
 1396              	.L21:
 263:bluetooth_rxtx.c **** 	}
 264:bluetooth_rxtx.c **** 
 265:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1397              		.loc 1 265 0
 1398 002c FB69     		ldr	r3, [r7, #28]
 1399 002e FA79     		ldrb	r2, [r7, #7]
 1400 0030 1A70     		strb	r2, [r3]
 266:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1401              		.loc 1 266 0
 1402 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1403 0034 042B     		cmp	r3, #4
ARM GAS  /tmp/cc6bdJLE.s 			page 29


 1404 0036 13D1     		bne	.L23
 267:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1405              		.loc 1 267 0
 1406 0038 474B     		ldr	r3, .L25+4
 1407 003a 1B68     		ldr	r3, [r3]
 1408 003c 1B0D     		lsrs	r3, r3, #20
 1409 003e DAB2     		uxtb	r2, r3
 1410 0040 FB69     		ldr	r3, [r7, #28]
 1411 0042 DA70     		strb	r2, [r3, #3]
 268:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1412              		.loc 1 268 0
 1413 0044 444B     		ldr	r3, .L25+4
 1414 0046 1B68     		ldr	r3, [r3]
 1415 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1416 004c 40F63542 		movw	r2, #3125
 1417 0050 02FB03F2 		mul	r2, r2, r3
 1418 0054 414B     		ldr	r3, .L25+8
 1419 0056 1B68     		ldr	r3, [r3]
 1420 0058 1A44     		add	r2, r2, r3
 1421 005a FB69     		ldr	r3, [r7, #28]
 1422 005c 5A60     		str	r2, [r3, #4]
 1423 005e 08E0     		b	.L24
 1424              	.L23:
 269:bluetooth_rxtx.c **** 	} else {
 270:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1425              		.loc 1 270 0
 1426 0060 3F4B     		ldr	r3, .L25+12
 1427 0062 1B68     		ldr	r3, [r3]
 1428 0064 DAB2     		uxtb	r2, r3
 1429 0066 FB69     		ldr	r3, [r7, #28]
 1430 0068 DA70     		strb	r2, [r3, #3]
 271:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1431              		.loc 1 271 0
 1432 006a 3E4B     		ldr	r3, .L25+16
 1433 006c 1A68     		ldr	r2, [r3]
 1434 006e FB69     		ldr	r3, [r7, #28]
 1435 0070 5A60     		str	r2, [r3, #4]
 1436              	.L24:
 272:bluetooth_rxtx.c **** 	}
 273:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1437              		.loc 1 273 0
 1438 0072 3D4B     		ldr	r3, .L25+20
 1439 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1440 0076 9BB2     		uxth	r3, r3
 1441 0078 DBB2     		uxtb	r3, r3
 1442 007a 623B     		subs	r3, r3, #98
 1443 007c DAB2     		uxtb	r2, r3
 1444 007e FB69     		ldr	r3, [r7, #28]
 1445 0080 9A70     		strb	r2, [r3, #2]
 274:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1446              		.loc 1 274 0
 1447 0082 3A4B     		ldr	r3, .L25+24
 1448 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1449 0086 DAB2     		uxtb	r2, r3
 1450 0088 FB69     		ldr	r3, [r7, #28]
 1451 008a 5A72     		strb	r2, [r3, #9]
 275:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
ARM GAS  /tmp/cc6bdJLE.s 			page 30


 1452              		.loc 1 275 0
 1453 008c 384B     		ldr	r3, .L25+28
 1454 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1455 0090 DAB2     		uxtb	r2, r3
 1456 0092 FB69     		ldr	r3, [r7, #28]
 1457 0094 1A72     		strb	r2, [r3, #8]
 276:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
 1458              		.loc 1 276 0
 1459 0096 374B     		ldr	r3, .L25+32
 1460 0098 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1461 009a FB69     		ldr	r3, [r7, #28]
 1462 009c 1A73     		strb	r2, [r3, #12]
 277:bluetooth_rxtx.c **** //	f->rssi_avg = device_index;
 278:bluetooth_rxtx.c **** 	
 279:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 280:bluetooth_rxtx.c **** 
 281:bluetooth_rxtx.c **** 	USRLED_SET;
 1463              		.loc 1 281 0
 1464 009e 364B     		ldr	r3, .L25+36
 1465 00a0 0222     		movs	r2, #2
 1466 00a2 1A60     		str	r2, [r3]
 282:bluetooth_rxtx.c **** 
 283:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 284:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1467              		.loc 1 284 0
 1468 00a4 FB69     		ldr	r3, [r7, #28]
 1469 00a6 0E33     		adds	r3, r3, #14
 1470 00a8 BB61     		str	r3, [r7, #24]
 285:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1471              		.loc 1 285 0
 1472 00aa 3B68     		ldr	r3, [r7]
 1473 00ac 7B61     		str	r3, [r7, #20]
 286:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1474              		.loc 1 286 0
 1475 00ae 7B69     		ldr	r3, [r7, #20]
 1476 00b0 1A68     		ldr	r2, [r3]
 1477 00b2 BB69     		ldr	r3, [r7, #24]
 1478 00b4 1A60     		str	r2, [r3]
 287:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1479              		.loc 1 287 0
 1480 00b6 BB69     		ldr	r3, [r7, #24]
 1481 00b8 0433     		adds	r3, r3, #4
 1482 00ba 7A69     		ldr	r2, [r7, #20]
 1483 00bc 5268     		ldr	r2, [r2, #4]
 1484 00be 1A60     		str	r2, [r3]
 288:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1485              		.loc 1 288 0
 1486 00c0 BB69     		ldr	r3, [r7, #24]
 1487 00c2 0833     		adds	r3, r3, #8
 1488 00c4 7A69     		ldr	r2, [r7, #20]
 1489 00c6 9268     		ldr	r2, [r2, #8]
 1490 00c8 1A60     		str	r2, [r3]
 289:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1491              		.loc 1 289 0
 1492 00ca BB69     		ldr	r3, [r7, #24]
 1493 00cc 0C33     		adds	r3, r3, #12
 1494 00ce 7A69     		ldr	r2, [r7, #20]
ARM GAS  /tmp/cc6bdJLE.s 			page 31


 1495 00d0 D268     		ldr	r2, [r2, #12]
 1496 00d2 1A60     		str	r2, [r3]
 290:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1497              		.loc 1 290 0
 1498 00d4 BB69     		ldr	r3, [r7, #24]
 1499 00d6 1033     		adds	r3, r3, #16
 1500 00d8 7A69     		ldr	r2, [r7, #20]
 1501 00da 1269     		ldr	r2, [r2, #16]
 1502 00dc 1A60     		str	r2, [r3]
 291:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1503              		.loc 1 291 0
 1504 00de BB69     		ldr	r3, [r7, #24]
 1505 00e0 1433     		adds	r3, r3, #20
 1506 00e2 7A69     		ldr	r2, [r7, #20]
 1507 00e4 5269     		ldr	r2, [r2, #20]
 1508 00e6 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1509              		.loc 1 292 0
 1510 00e8 BB69     		ldr	r3, [r7, #24]
 1511 00ea 1833     		adds	r3, r3, #24
 1512 00ec 7A69     		ldr	r2, [r7, #20]
 1513 00ee 9269     		ldr	r2, [r2, #24]
 1514 00f0 1A60     		str	r2, [r3]
 293:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1515              		.loc 1 293 0
 1516 00f2 BB69     		ldr	r3, [r7, #24]
 1517 00f4 1C33     		adds	r3, r3, #28
 1518 00f6 7A69     		ldr	r2, [r7, #20]
 1519 00f8 D269     		ldr	r2, [r2, #28]
 1520 00fa 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1521              		.loc 1 294 0
 1522 00fc BB69     		ldr	r3, [r7, #24]
 1523 00fe 2033     		adds	r3, r3, #32
 1524 0100 7A69     		ldr	r2, [r7, #20]
 1525 0102 126A     		ldr	r2, [r2, #32]
 1526 0104 1A60     		str	r2, [r3]
 295:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1527              		.loc 1 295 0
 1528 0106 BB69     		ldr	r3, [r7, #24]
 1529 0108 2433     		adds	r3, r3, #36
 1530 010a 7A69     		ldr	r2, [r7, #20]
 1531 010c 526A     		ldr	r2, [r2, #36]
 1532 010e 1A60     		str	r2, [r3]
 296:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1533              		.loc 1 296 0
 1534 0110 BB69     		ldr	r3, [r7, #24]
 1535 0112 2833     		adds	r3, r3, #40
 1536 0114 7A69     		ldr	r2, [r7, #20]
 1537 0116 926A     		ldr	r2, [r2, #40]
 1538 0118 1A60     		str	r2, [r3]
 297:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1539              		.loc 1 297 0
 1540 011a BB69     		ldr	r3, [r7, #24]
 1541 011c 2C33     		adds	r3, r3, #44
 1542 011e 7A69     		ldr	r2, [r7, #20]
 1543 0120 D26A     		ldr	r2, [r2, #44]
ARM GAS  /tmp/cc6bdJLE.s 			page 32


 1544 0122 1A60     		str	r2, [r3]
 298:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 299:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1545              		.loc 1 299 0
 1546 0124 FB69     		ldr	r3, [r7, #28]
 1547 0126 0E33     		adds	r3, r3, #14
 1548 0128 3B61     		str	r3, [r7, #16]
 300:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1549              		.loc 1 300 0
 1550 012a 3B68     		ldr	r3, [r7]
 1551 012c FB60     		str	r3, [r7, #12]
 301:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1552              		.loc 1 301 0
 1553 012e 3B69     		ldr	r3, [r7, #16]
 1554 0130 3033     		adds	r3, r3, #48
 1555 0132 FA68     		ldr	r2, [r7, #12]
 1556 0134 128E     		ldrh	r2, [r2, #48]
 1557 0136 1A80     		strh	r2, [r3]	@ movhi
 302:bluetooth_rxtx.c **** 
 303:bluetooth_rxtx.c **** 	f->status = status;
 1558              		.loc 1 303 0
 1559 0138 064B     		ldr	r3, .L25
 1560 013a 1B78     		ldrb	r3, [r3]
 1561 013c DAB2     		uxtb	r2, r3
 1562 013e FB69     		ldr	r3, [r7, #28]
 1563 0140 5A70     		strb	r2, [r3, #1]
 304:bluetooth_rxtx.c **** 	status = 0;
 1564              		.loc 1 304 0
 1565 0142 044B     		ldr	r3, .L25
 1566 0144 0022     		movs	r2, #0
 1567 0146 1A70     		strb	r2, [r3]
 305:bluetooth_rxtx.c **** 
 306:bluetooth_rxtx.c **** 	return 1;
 1568              		.loc 1 306 0
 1569 0148 0123     		movs	r3, #1
 1570              	.L22:
 307:bluetooth_rxtx.c **** }
 1571              		.loc 1 307 0
 1572 014a 1846     		mov	r0, r3
 1573 014c 2037     		adds	r7, r7, #32
 1574              		.cfi_def_cfa_offset 8
 1575 014e BD46     		mov	sp, r7
 1576              		.cfi_def_cfa_register 13
 1577              		@ sp needed
 1578 0150 80BD     		pop	{r7, pc}
 1579              	.L26:
 1580 0152 00BF     		.align	2
 1581              	.L25:
 1582 0154 00000000 		.word	status
 1583 0158 00000000 		.word	clkn
 1584 015c 08400040 		.word	1073758216
 1585 0160 00000000 		.word	idle_buf_clkn_high
 1586 0164 00000000 		.word	idle_buf_clk100ns
 1587 0168 00000000 		.word	idle_buf_channel
 1588 016c 00000000 		.word	rssi_min
 1589 0170 00000000 		.word	rssi_max
 1590 0174 00000000 		.word	device_index
ARM GAS  /tmp/cc6bdJLE.s 			page 33


 1591 0178 38C00920 		.word	537509944
 1592              		.cfi_endproc
 1593              	.LFE4:
 1595              		.section	.text.enqueue_with_ts,"ax",%progbits
 1596              		.align	2
 1597              		.global	enqueue_with_ts
 1598              		.thumb
 1599              		.thumb_func
 1601              	enqueue_with_ts:
 1602              	.LFB5:
 308:bluetooth_rxtx.c **** 
 309:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 310:bluetooth_rxtx.c **** {
 1603              		.loc 1 310 0
 1604              		.cfi_startproc
 1605              		@ args = 0, pretend = 0, frame = 24
 1606              		@ frame_needed = 1, uses_anonymous_args = 0
 1607 0000 80B5     		push	{r7, lr}
 1608              		.cfi_def_cfa_offset 8
 1609              		.cfi_offset 7, -8
 1610              		.cfi_offset 14, -4
 1611 0002 86B0     		sub	sp, sp, #24
 1612              		.cfi_def_cfa_offset 32
 1613 0004 00AF     		add	r7, sp, #0
 1614              		.cfi_def_cfa_register 7
 1615 0006 0346     		mov	r3, r0
 1616 0008 B960     		str	r1, [r7, #8]
 1617 000a 7A60     		str	r2, [r7, #4]
 1618 000c FB73     		strb	r3, [r7, #15]
 311:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1619              		.loc 1 311 0
 1620 000e FFF7FEFF 		bl	usb_enqueue
 1621 0012 7861     		str	r0, [r7, #20]
 312:bluetooth_rxtx.c **** 
 313:bluetooth_rxtx.c **** 	/* fail if queue is full */
 314:bluetooth_rxtx.c **** 	if (f == NULL) {
 1622              		.loc 1 314 0
 1623 0014 7B69     		ldr	r3, [r7, #20]
 1624 0016 002B     		cmp	r3, #0
 1625 0018 09D1     		bne	.L28
 315:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1626              		.loc 1 315 0
 1627 001a 144B     		ldr	r3, .L30
 1628 001c 1B78     		ldrb	r3, [r3]
 1629 001e DBB2     		uxtb	r3, r3
 1630 0020 43F00403 		orr	r3, r3, #4
 1631 0024 DAB2     		uxtb	r2, r3
 1632 0026 114B     		ldr	r3, .L30
 1633 0028 1A70     		strb	r2, [r3]
 316:bluetooth_rxtx.c **** 		return 0;
 1634              		.loc 1 316 0
 1635 002a 0023     		movs	r3, #0
 1636 002c 19E0     		b	.L29
 1637              	.L28:
 317:bluetooth_rxtx.c **** 	}
 318:bluetooth_rxtx.c **** 
 319:bluetooth_rxtx.c **** 	f->pkt_type = type;
ARM GAS  /tmp/cc6bdJLE.s 			page 34


 1638              		.loc 1 319 0
 1639 002e 7B69     		ldr	r3, [r7, #20]
 1640 0030 FA7B     		ldrb	r2, [r7, #15]
 1641 0032 1A70     		strb	r2, [r3]
 320:bluetooth_rxtx.c **** //	f->clkn_high = 0;
 321:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1642              		.loc 1 321 0
 1643 0034 7B69     		ldr	r3, [r7, #20]
 1644 0036 7A68     		ldr	r2, [r7, #4]
 1645 0038 5A60     		str	r2, [r3, #4]
 322:bluetooth_rxtx.c **** 
 323:bluetooth_rxtx.c **** //	f->channel = channel - 2402;
 324:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 1646              		.loc 1 324 0
 1647 003a 0D4B     		ldr	r3, .L30+4
 1648 003c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1649 003e 7B69     		ldr	r3, [r7, #20]
 1650 0040 9A72     		strb	r2, [r3, #10]
 325:bluetooth_rxtx.c **** 	f->rssi_count = freq_avg;
 1651              		.loc 1 325 0
 1652 0042 0C4B     		ldr	r3, .L30+8
 1653 0044 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1654 0046 7B69     		ldr	r3, [r7, #20]
 1655 0048 DA72     		strb	r2, [r3, #11]
 326:bluetooth_rxtx.c **** 
 327:bluetooth_rxtx.c **** 	USRLED_SET;
 1656              		.loc 1 327 0
 1657 004a 0B4B     		ldr	r3, .L30+12
 1658 004c 0222     		movs	r2, #2
 1659 004e 1A60     		str	r2, [r3]
 328:bluetooth_rxtx.c **** 
 329:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 330:bluetooth_rxtx.c **** /*	u32 *p1 = (u32 *)f->data;
 331:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 332:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 333:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 334:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 335:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 336:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 337:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 338:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 339:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 340:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 341:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 342:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 343:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 344:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 345:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 346:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 347:bluetooth_rxtx.c **** */
 348:bluetooth_rxtx.c **** 	f->status = status;
 1660              		.loc 1 348 0
 1661 0050 064B     		ldr	r3, .L30
 1662 0052 1B78     		ldrb	r3, [r3]
 1663 0054 DAB2     		uxtb	r2, r3
 1664 0056 7B69     		ldr	r3, [r7, #20]
 1665 0058 5A70     		strb	r2, [r3, #1]
ARM GAS  /tmp/cc6bdJLE.s 			page 35


 349:bluetooth_rxtx.c **** 	status = 0;
 1666              		.loc 1 349 0
 1667 005a 044B     		ldr	r3, .L30
 1668 005c 0022     		movs	r2, #0
 1669 005e 1A70     		strb	r2, [r3]
 350:bluetooth_rxtx.c **** 
 351:bluetooth_rxtx.c **** 	return 1;
 1670              		.loc 1 351 0
 1671 0060 0123     		movs	r3, #1
 1672              	.L29:
 352:bluetooth_rxtx.c **** }
 1673              		.loc 1 352 0
 1674 0062 1846     		mov	r0, r3
 1675 0064 1837     		adds	r7, r7, #24
 1676              		.cfi_def_cfa_offset 8
 1677 0066 BD46     		mov	sp, r7
 1678              		.cfi_def_cfa_register 13
 1679              		@ sp needed
 1680 0068 80BD     		pop	{r7, pc}
 1681              	.L31:
 1682 006a 00BF     		.align	2
 1683              	.L30:
 1684 006c 00000000 		.word	status
 1685 0070 00000000 		.word	rssi_avg
 1686 0074 00000000 		.word	freq_avg
 1687 0078 38C00920 		.word	537509944
 1688              		.cfi_endproc
 1689              	.LFE5:
 1691              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 1692              		.align	2
 1693              		.thumb
 1694              		.thumb_func
 1696              	cs_threshold_calc_and_set:
 1697              	.LFB6:
 353:bluetooth_rxtx.c **** 
 354:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 355:bluetooth_rxtx.c **** {
 1698              		.loc 1 355 0
 1699              		.cfi_startproc
 1700              		@ args = 0, pretend = 0, frame = 8
 1701              		@ frame_needed = 1, uses_anonymous_args = 0
 1702 0000 80B5     		push	{r7, lr}
 1703              		.cfi_def_cfa_offset 8
 1704              		.cfi_offset 7, -8
 1705              		.cfi_offset 14, -4
 1706 0002 82B0     		sub	sp, sp, #8
 1707              		.cfi_def_cfa_offset 16
 1708 0004 00AF     		add	r7, sp, #0
 1709              		.cfi_def_cfa_register 7
 356:bluetooth_rxtx.c **** 	int8_t level;
 357:bluetooth_rxtx.c **** 
 358:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 359:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 360:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 361:bluetooth_rxtx.c **** 	 * value for it. */
 362:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 1710              		.loc 1 362 0
ARM GAS  /tmp/cc6bdJLE.s 			page 36


 1711 0006 174B     		ldr	r3, .L36
 1712 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1713 000a 002B     		cmp	r3, #0
 1714 000c 1DD0     		beq	.L33
 1715              		.loc 1 362 0 is_stmt 0 discriminator 1
 1716 000e 164B     		ldr	r3, .L36+4
 1717 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1718 0012 5BB2     		sxtb	r3, r3
 1719 0014 002B     		cmp	r3, #0
 1720 0016 18DD     		ble	.L33
 1721              	.LBB2:
 363:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1722              		.loc 1 363 0 is_stmt 1
 1723 0018 144B     		ldr	r3, .L36+8
 1724 001a 1B88     		ldrh	r3, [r3]	@ movhi
 1725 001c 9BB2     		uxth	r3, r3
 1726 001e A3F66213 		subw	r3, r3, #2402
 1727 0022 134A     		ldr	r2, .L36+12
 1728 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1729 0028 1BB2     		sxth	r3, r3
 1730 002a 8033     		adds	r3, r3, #128
 1731 002c 002B     		cmp	r3, #0
 1732 002e 00DA     		bge	.L34
 1733 0030 FF33     		adds	r3, r3, #255
 1734              	.L34:
 1735 0032 1B12     		asrs	r3, r3, #8
 1736 0034 BB71     		strb	r3, [r7, #6]
 364:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 1737              		.loc 1 364 0
 1738 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1739 0038 0B4B     		ldr	r3, .L36+4
 1740 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1741 003c DBB2     		uxtb	r3, r3
 1742 003e 1344     		add	r3, r3, r2
 1743 0040 DBB2     		uxtb	r3, r3
 1744 0042 363B     		subs	r3, r3, #54
 1745 0044 DBB2     		uxtb	r3, r3
 1746 0046 FB71     		strb	r3, [r7, #7]
 1747              	.LBE2:
 362:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1748              		.loc 1 362 0
 1749 0048 02E0     		b	.L35
 1750              	.L33:
 365:bluetooth_rxtx.c **** 	}
 366:bluetooth_rxtx.c **** 	else {
 367:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 1751              		.loc 1 367 0
 1752 004a 074B     		ldr	r3, .L36+4
 1753 004c 1B78     		ldrb	r3, [r3]
 1754 004e FB71     		strb	r3, [r7, #7]
 1755              	.L35:
 368:bluetooth_rxtx.c **** 	}
 369:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 1756              		.loc 1 369 0
 1757 0050 97F90730 		ldrsb	r3, [r7, #7]
 1758 0054 1846     		mov	r0, r3
 1759 0056 0321     		movs	r1, #3
ARM GAS  /tmp/cc6bdJLE.s 			page 37


 1760 0058 FFF7FEFF 		bl	cs_threshold_set
 370:bluetooth_rxtx.c **** }
 1761              		.loc 1 370 0
 1762 005c 0837     		adds	r7, r7, #8
 1763              		.cfi_def_cfa_offset 8
 1764 005e BD46     		mov	sp, r7
 1765              		.cfi_def_cfa_register 13
 1766              		@ sp needed
 1767 0060 80BD     		pop	{r7, pc}
 1768              	.L37:
 1769 0062 00BF     		.align	2
 1770              	.L36:
 1771 0064 00000000 		.word	hop_mode
 1772 0068 00000000 		.word	cs_threshold_req
 1773 006c 00000000 		.word	channel
 1774 0070 00000000 		.word	rssi_iir
 1775              		.cfi_endproc
 1776              	.LFE6:
 1778              		.section	.text.cs_trigger_enable,"ax",%progbits
 1779              		.align	2
 1780              		.thumb
 1781              		.thumb_func
 1783              	cs_trigger_enable:
 1784              	.LFB7:
 371:bluetooth_rxtx.c **** 
 372:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 373:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 374:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 375:bluetooth_rxtx.c ****  * and off here. */
 376:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 377:bluetooth_rxtx.c **** {
 1785              		.loc 1 377 0
 1786              		.cfi_startproc
 1787              		@ args = 0, pretend = 0, frame = 0
 1788              		@ frame_needed = 1, uses_anonymous_args = 0
 1789              		@ link register save eliminated.
 1790 0000 80B4     		push	{r7}
 1791              		.cfi_def_cfa_offset 4
 1792              		.cfi_offset 7, -4
 1793 0002 00AF     		add	r7, sp, #0
 1794              		.cfi_def_cfa_register 7
 378:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1795              		.loc 1 378 0
 1796 0004 094B     		ldr	r3, .L39
 1797 0006 0022     		movs	r2, #0
 1798 0008 1A70     		strb	r2, [r3]
 379:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 1799              		.loc 1 379 0
 1800 000a 094B     		ldr	r3, .L39+4
 1801 000c 4FF40012 		mov	r2, #2097152
 1802 0010 1A60     		str	r2, [r3]
 380:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1803              		.loc 1 380 0
 1804 0012 084B     		ldr	r3, .L39+8
 1805 0014 0422     		movs	r2, #4
 1806 0016 1A60     		str	r2, [r3]
 381:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
ARM GAS  /tmp/cc6bdJLE.s 			page 38


 1807              		.loc 1 381 0
 1808 0018 074A     		ldr	r2, .L39+12
 1809 001a 074B     		ldr	r3, .L39+12
 1810 001c 1B68     		ldr	r3, [r3]
 1811 001e 43F00403 		orr	r3, r3, #4
 1812 0022 1360     		str	r3, [r2]
 382:bluetooth_rxtx.c **** }
 1813              		.loc 1 382 0
 1814 0024 BD46     		mov	sp, r7
 1815              		.cfi_def_cfa_register 13
 1816              		@ sp needed
 1817 0026 5DF8047B 		ldr	r7, [sp], #4
 1818              		.cfi_restore 7
 1819              		.cfi_def_cfa_offset 0
 1820 002a 7047     		bx	lr
 1821              	.L40:
 1822              		.align	2
 1823              	.L39:
 1824 002c 00000000 		.word	cs_trigger
 1825 0030 00E100E0 		.word	-536813312
 1826 0034 AC800240 		.word	1073905836
 1827 0038 B4800240 		.word	1073905844
 1828              		.cfi_endproc
 1829              	.LFE7:
 1831              		.section	.text.cs_trigger_disable,"ax",%progbits
 1832              		.align	2
 1833              		.thumb
 1834              		.thumb_func
 1836              	cs_trigger_disable:
 1837              	.LFB8:
 383:bluetooth_rxtx.c **** 
 384:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 385:bluetooth_rxtx.c **** {
 1838              		.loc 1 385 0
 1839              		.cfi_startproc
 1840              		@ args = 0, pretend = 0, frame = 0
 1841              		@ frame_needed = 1, uses_anonymous_args = 0
 1842              		@ link register save eliminated.
 1843 0000 80B4     		push	{r7}
 1844              		.cfi_def_cfa_offset 4
 1845              		.cfi_offset 7, -4
 1846 0002 00AF     		add	r7, sp, #0
 1847              		.cfi_def_cfa_register 7
 386:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 1848              		.loc 1 386 0
 1849 0004 094A     		ldr	r2, .L42
 1850 0006 094B     		ldr	r3, .L42
 1851 0008 1B68     		ldr	r3, [r3]
 1852 000a 23F00403 		bic	r3, r3, #4
 1853 000e 1360     		str	r3, [r2]
 387:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1854              		.loc 1 387 0
 1855 0010 074B     		ldr	r3, .L42+4
 1856 0012 0422     		movs	r2, #4
 1857 0014 1A60     		str	r2, [r3]
 388:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 1858              		.loc 1 388 0
ARM GAS  /tmp/cc6bdJLE.s 			page 39


 1859 0016 074B     		ldr	r3, .L42+8
 1860 0018 4FF40012 		mov	r2, #2097152
 1861 001c 1A60     		str	r2, [r3]
 389:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1862              		.loc 1 389 0
 1863 001e 064B     		ldr	r3, .L42+12
 1864 0020 0022     		movs	r2, #0
 1865 0022 1A70     		strb	r2, [r3]
 390:bluetooth_rxtx.c **** }
 1866              		.loc 1 390 0
 1867 0024 BD46     		mov	sp, r7
 1868              		.cfi_def_cfa_register 13
 1869              		@ sp needed
 1870 0026 5DF8047B 		ldr	r7, [sp], #4
 1871              		.cfi_restore 7
 1872              		.cfi_def_cfa_offset 0
 1873 002a 7047     		bx	lr
 1874              	.L43:
 1875              		.align	2
 1876              	.L42:
 1877 002c B4800240 		.word	1073905844
 1878 0030 AC800240 		.word	1073905836
 1879 0034 80E100E0 		.word	-536813184
 1880 0038 00000000 		.word	cs_trigger
 1881              		.cfi_endproc
 1882              	.LFE8:
 1884              		.section	.rodata
 1885 08d1 000000   		.align	2
 1886              	.LC3:
 1887 08d4 32303135 		.ascii	"2015-10-R1\000"
 1887      2D31302D 
 1887      523100
 1888              		.section	.text.vendor_request_handler,"ax",%progbits
 1889              		.align	2
 1890              		.thumb
 1891              		.thumb_func
 1893              	vendor_request_handler:
 1894              	.LFB9:
 391:bluetooth_rxtx.c **** 
 392:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 393:bluetooth_rxtx.c **** {
 1895              		.loc 1 393 0
 1896              		.cfi_startproc
 1897              		@ args = 0, pretend = 0, frame = 80
 1898              		@ frame_needed = 1, uses_anonymous_args = 0
 1899 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1900              		.cfi_def_cfa_offset 36
 1901              		.cfi_offset 4, -36
 1902              		.cfi_offset 5, -32
 1903              		.cfi_offset 6, -28
 1904              		.cfi_offset 7, -24
 1905              		.cfi_offset 8, -20
 1906              		.cfi_offset 9, -16
 1907              		.cfi_offset 10, -12
 1908              		.cfi_offset 11, -8
 1909              		.cfi_offset 14, -4
 1910 0004 95B0     		sub	sp, sp, #84
ARM GAS  /tmp/cc6bdJLE.s 			page 40


 1911              		.cfi_def_cfa_offset 120
 1912 0006 00AF     		add	r7, sp, #0
 1913              		.cfi_def_cfa_register 7
 1914 0008 B960     		str	r1, [r7, #8]
 1915 000a 7A60     		str	r2, [r7, #4]
 1916 000c 3B60     		str	r3, [r7]
 1917 000e 0346     		mov	r3, r0
 1918 0010 FB73     		strb	r3, [r7, #15]
 394:bluetooth_rxtx.c **** 	u32 command[5];
 395:bluetooth_rxtx.c **** 	u32 result[5];
 396:bluetooth_rxtx.c **** 	u64 ac_copy;
 397:bluetooth_rxtx.c **** 	int i; // loop counter
 398:bluetooth_rxtx.c **** 	u32 clock;
 399:bluetooth_rxtx.c **** 	int clock_offset;
 400:bluetooth_rxtx.c **** 	u8 length; // string length
 401:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 1919              		.loc 1 401 0
 1920 0012 0023     		movs	r3, #0
 1921 0014 7B64     		str	r3, [r7, #68]
 402:bluetooth_rxtx.c **** 	u16 reg_val;
 403:bluetooth_rxtx.c **** 
 404:bluetooth_rxtx.c **** 	switch (request) {
 1922              		.loc 1 404 0
 1923 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1924 0018 3E2B     		cmp	r3, #62
 1925 001a 00F26385 		bhi	.L45
 1926 001e 01A2     		adr	r2, .L47
 1927 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1928              		.p2align 2
 1929              	.L47:
 1930 0024 21010000 		.word	.L46+1
 1931 0028 2B010000 		.word	.L48+1
 1932 002c E50A0000 		.word	.L45+1
 1933 0030 5B010000 		.word	.L49+1
 1934 0034 7D010000 		.word	.L50+1
 1935 0038 99010000 		.word	.L51+1
 1936 003c BB010000 		.word	.L52+1
 1937 0040 D7010000 		.word	.L53+1
 1938 0044 F9010000 		.word	.L54+1
 1939 0048 19020000 		.word	.L55+1
 1940 004c 3B020000 		.word	.L56+1
 1941 0050 DB040000 		.word	.L57+1
 1942 0054 01050000 		.word	.L58+1
 1943 0058 B1020000 		.word	.L59+1
 1944 005c BB020000 		.word	.L60+1
 1945 0060 5B020000 		.word	.L61+1
 1946 0064 99030000 		.word	.L62+1
 1947 0068 B9030000 		.word	.L63+1
 1948 006c ED030000 		.word	.L64+1
 1949 0070 0D040000 		.word	.L65+1
 1950 0074 29040000 		.word	.L66+1
 1951 0078 B5040000 		.word	.L67+1
 1952 007c BD040000 		.word	.L68+1
 1953 0080 CF040000 		.word	.L69+1
 1954 0084 8B050000 		.word	.L70+1
 1955 0088 A9050000 		.word	.L71+1
 1956 008c E50A0000 		.word	.L45+1
ARM GAS  /tmp/cc6bdJLE.s 			page 41


 1957 0090 B5050000 		.word	.L72+1
 1958 0094 31040000 		.word	.L73+1
 1959 0098 4D040000 		.word	.L74+1
 1960 009c 75040000 		.word	.L75+1
 1961 00a0 6D040000 		.word	.L76+1
 1962 00a4 7D040000 		.word	.L77+1
 1963 00a8 79060000 		.word	.L78+1
 1964 00ac 11060000 		.word	.L79+1
 1965 00b0 ED060000 		.word	.L80+1
 1966 00b4 FB060000 		.word	.L81+1
 1967 00b8 0B070000 		.word	.L82+1
 1968 00bc 1D070000 		.word	.L83+1
 1969 00c0 E9070000 		.word	.L84+1
 1970 00c4 2F080000 		.word	.L85+1
 1971 00c8 BD080000 		.word	.L86+1
 1972 00cc F1080000 		.word	.L87+1
 1973 00d0 13090000 		.word	.L88+1
 1974 00d4 6B090000 		.word	.L89+1
 1975 00d8 E90A0000 		.word	.L150+1
 1976 00dc 9D090000 		.word	.L91+1
 1977 00e0 B3090000 		.word	.L92+1
 1978 00e4 CF090000 		.word	.L93+1
 1979 00e8 E5090000 		.word	.L94+1
 1980 00ec 110A0000 		.word	.L95+1
 1981 00f0 61080000 		.word	.L96+1
 1982 00f4 93080000 		.word	.L97+1
 1983 00f8 2D0A0000 		.word	.L98+1
 1984 00fc 710A0000 		.word	.L99+1
 1985 0100 BB060000 		.word	.L100+1
 1986 0104 830A0000 		.word	.L101+1
 1987 0108 E50A0000 		.word	.L45+1
 1988 010c 5B0A0000 		.word	.L102+1
 1989 0110 C70A0000 		.word	.L103+1
 1990 0114 D30A0000 		.word	.L104+1
 1991 0118 3B010000 		.word	.L105+1
 1992 011c 4B010000 		.word	.L106+1
 1993              		.p2align 1
 1994              	.L46:
 405:bluetooth_rxtx.c **** 
 406:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 407:bluetooth_rxtx.c **** 		*data_len = 0;
 1995              		.loc 1 407 0
 1996 0120 3B68     		ldr	r3, [r7]
 1997 0122 0022     		movs	r2, #0
 1998 0124 1A60     		str	r2, [r3]
 408:bluetooth_rxtx.c **** 		break;
 1999              		.loc 1 408 0
 2000 0126 00F0E0BC 		b	.L107
 2001              	.L48:
 409:bluetooth_rxtx.c **** 
 410:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 411:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2002              		.loc 1 411 0
 2003 012a A74B     		ldr	r3, .L151
 2004 012c 0122     		movs	r2, #1
 2005 012e 1A70     		strb	r2, [r3]
 412:bluetooth_rxtx.c **** 		*data_len = 0;
ARM GAS  /tmp/cc6bdJLE.s 			page 42


 2006              		.loc 1 412 0
 2007 0130 3B68     		ldr	r3, [r7]
 2008 0132 0022     		movs	r2, #0
 2009 0134 1A60     		str	r2, [r3]
 413:bluetooth_rxtx.c **** 		break;
 2010              		.loc 1 413 0
 2011 0136 00F0D8BC 		b	.L107
 2012              	.L105:
 414:bluetooth_rxtx.c **** 	
 415:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_FREQ:
 416:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_FREQ;
 2013              		.loc 1 416 0
 2014 013a A34B     		ldr	r3, .L151
 2015 013c 0E22     		movs	r2, #14
 2016 013e 1A70     		strb	r2, [r3]
 417:bluetooth_rxtx.c **** 		*data_len = 0;
 2017              		.loc 1 417 0
 2018 0140 3B68     		ldr	r3, [r7]
 2019 0142 0022     		movs	r2, #0
 2020 0144 1A60     		str	r2, [r3]
 418:bluetooth_rxtx.c **** 		break;
 2021              		.loc 1 418 0
 2022 0146 00F0D0BC 		b	.L107
 2023              	.L106:
 419:bluetooth_rxtx.c **** 	
 420:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_PROPOSED:
 421:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_PROPOSED;
 2024              		.loc 1 421 0
 2025 014a 9F4B     		ldr	r3, .L151
 2026 014c 0F22     		movs	r2, #15
 2027 014e 1A70     		strb	r2, [r3]
 422:bluetooth_rxtx.c **** 		*data_len = 0;
 2028              		.loc 1 422 0
 2029 0150 3B68     		ldr	r3, [r7]
 2030 0152 0022     		movs	r2, #0
 2031 0154 1A60     		str	r2, [r3]
 423:bluetooth_rxtx.c **** 		break;
 2032              		.loc 1 423 0
 2033 0156 00F0C8BC 		b	.L107
 2034              	.L49:
 424:bluetooth_rxtx.c **** 
 425:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 426:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 2035              		.loc 1 426 0
 2036 015a 9C4B     		ldr	r3, .L151+4
 2037 015c 1B68     		ldr	r3, [r3]
 2038 015e 03F00203 		and	r3, r3, #2
 2039 0162 002B     		cmp	r3, #0
 2040 0164 14BF     		ite	ne
 2041 0166 0123     		movne	r3, #1
 2042 0168 0023     		moveq	r3, #0
 2043 016a DBB2     		uxtb	r3, r3
 2044 016c 1A46     		mov	r2, r3
 2045 016e 7B68     		ldr	r3, [r7, #4]
 2046 0170 1A70     		strb	r2, [r3]
 427:bluetooth_rxtx.c **** 		*data_len = 1;
 2047              		.loc 1 427 0
ARM GAS  /tmp/cc6bdJLE.s 			page 43


 2048 0172 3B68     		ldr	r3, [r7]
 2049 0174 0122     		movs	r2, #1
 2050 0176 1A60     		str	r2, [r3]
 428:bluetooth_rxtx.c **** 		break;
 2051              		.loc 1 428 0
 2052 0178 00F0B7BC 		b	.L107
 2053              	.L50:
 429:bluetooth_rxtx.c **** 
 430:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 431:bluetooth_rxtx.c **** 		if (request_params[0])
 2054              		.loc 1 431 0
 2055 017c BB68     		ldr	r3, [r7, #8]
 2056 017e 1B88     		ldrh	r3, [r3]
 2057 0180 002B     		cmp	r3, #0
 2058 0182 04D0     		beq	.L108
 432:bluetooth_rxtx.c **** 			USRLED_SET;
 2059              		.loc 1 432 0
 2060 0184 924B     		ldr	r3, .L151+8
 2061 0186 0222     		movs	r2, #2
 2062 0188 1A60     		str	r2, [r3]
 433:bluetooth_rxtx.c **** 		else
 434:bluetooth_rxtx.c **** 			USRLED_CLR;
 435:bluetooth_rxtx.c **** 		break;
 2063              		.loc 1 435 0
 2064 018a 00F0AEBC 		b	.L107
 2065              	.L108:
 434:bluetooth_rxtx.c **** 		break;
 2066              		.loc 1 434 0
 2067 018e 914B     		ldr	r3, .L151+12
 2068 0190 0222     		movs	r2, #2
 2069 0192 1A60     		str	r2, [r3]
 2070              		.loc 1 435 0
 2071 0194 00F0A9BC 		b	.L107
 2072              	.L51:
 436:bluetooth_rxtx.c **** 
 437:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 438:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2073              		.loc 1 438 0
 2074 0198 8C4B     		ldr	r3, .L151+4
 2075 019a 1B68     		ldr	r3, [r3]
 2076 019c 03F01003 		and	r3, r3, #16
 2077 01a0 002B     		cmp	r3, #0
 2078 01a2 14BF     		ite	ne
 2079 01a4 0123     		movne	r3, #1
 2080 01a6 0023     		moveq	r3, #0
 2081 01a8 DBB2     		uxtb	r3, r3
 2082 01aa 1A46     		mov	r2, r3
 2083 01ac 7B68     		ldr	r3, [r7, #4]
 2084 01ae 1A70     		strb	r2, [r3]
 439:bluetooth_rxtx.c **** 		*data_len = 1;
 2085              		.loc 1 439 0
 2086 01b0 3B68     		ldr	r3, [r7]
 2087 01b2 0122     		movs	r2, #1
 2088 01b4 1A60     		str	r2, [r3]
 440:bluetooth_rxtx.c **** 		break;
 2089              		.loc 1 440 0
 2090 01b6 00F098BC 		b	.L107
ARM GAS  /tmp/cc6bdJLE.s 			page 44


 2091              	.L52:
 441:bluetooth_rxtx.c **** 
 442:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 443:bluetooth_rxtx.c **** 		if (request_params[0])
 2092              		.loc 1 443 0
 2093 01ba BB68     		ldr	r3, [r7, #8]
 2094 01bc 1B88     		ldrh	r3, [r3]
 2095 01be 002B     		cmp	r3, #0
 2096 01c0 04D0     		beq	.L110
 444:bluetooth_rxtx.c **** 			RXLED_SET;
 2097              		.loc 1 444 0
 2098 01c2 834B     		ldr	r3, .L151+8
 2099 01c4 1022     		movs	r2, #16
 2100 01c6 1A60     		str	r2, [r3]
 445:bluetooth_rxtx.c **** 		else
 446:bluetooth_rxtx.c **** 			RXLED_CLR;
 447:bluetooth_rxtx.c **** 		break;
 2101              		.loc 1 447 0
 2102 01c8 00F08FBC 		b	.L107
 2103              	.L110:
 446:bluetooth_rxtx.c **** 		break;
 2104              		.loc 1 446 0
 2105 01cc 814B     		ldr	r3, .L151+12
 2106 01ce 1022     		movs	r2, #16
 2107 01d0 1A60     		str	r2, [r3]
 2108              		.loc 1 447 0
 2109 01d2 00F08ABC 		b	.L107
 2110              	.L53:
 448:bluetooth_rxtx.c **** 
 449:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 450:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2111              		.loc 1 450 0
 2112 01d6 7D4B     		ldr	r3, .L151+4
 2113 01d8 1B68     		ldr	r3, [r3]
 2114 01da 03F48073 		and	r3, r3, #256
 2115 01de 002B     		cmp	r3, #0
 2116 01e0 14BF     		ite	ne
 2117 01e2 0123     		movne	r3, #1
 2118 01e4 0023     		moveq	r3, #0
 2119 01e6 DBB2     		uxtb	r3, r3
 2120 01e8 1A46     		mov	r2, r3
 2121 01ea 7B68     		ldr	r3, [r7, #4]
 2122 01ec 1A70     		strb	r2, [r3]
 451:bluetooth_rxtx.c **** 		*data_len = 1;
 2123              		.loc 1 451 0
 2124 01ee 3B68     		ldr	r3, [r7]
 2125 01f0 0122     		movs	r2, #1
 2126 01f2 1A60     		str	r2, [r3]
 452:bluetooth_rxtx.c **** 		break;
 2127              		.loc 1 452 0
 2128 01f4 00F079BC 		b	.L107
 2129              	.L54:
 453:bluetooth_rxtx.c **** 
 454:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 455:bluetooth_rxtx.c **** 		if (request_params[0])
 2130              		.loc 1 455 0
 2131 01f8 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/cc6bdJLE.s 			page 45


 2132 01fa 1B88     		ldrh	r3, [r3]
 2133 01fc 002B     		cmp	r3, #0
 2134 01fe 05D0     		beq	.L112
 456:bluetooth_rxtx.c **** 			TXLED_SET;
 2135              		.loc 1 456 0
 2136 0200 734B     		ldr	r3, .L151+8
 2137 0202 4FF48072 		mov	r2, #256
 2138 0206 1A60     		str	r2, [r3]
 457:bluetooth_rxtx.c **** 		else
 458:bluetooth_rxtx.c **** 			TXLED_CLR;
 459:bluetooth_rxtx.c **** 		break;
 2139              		.loc 1 459 0
 2140 0208 00F06FBC 		b	.L107
 2141              	.L112:
 458:bluetooth_rxtx.c **** 		break;
 2142              		.loc 1 458 0
 2143 020c 714B     		ldr	r3, .L151+12
 2144 020e 4FF48072 		mov	r2, #256
 2145 0212 1A60     		str	r2, [r3]
 2146              		.loc 1 459 0
 2147 0214 00F069BC 		b	.L107
 2148              	.L55:
 460:bluetooth_rxtx.c **** 
 461:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 462:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2149              		.loc 1 462 0
 2150 0218 6C4B     		ldr	r3, .L151+4
 2151 021a 1B68     		ldr	r3, [r3]
 2152 021c 03F40073 		and	r3, r3, #512
 2153 0220 002B     		cmp	r3, #0
 2154 0222 14BF     		ite	ne
 2155 0224 0123     		movne	r3, #1
 2156 0226 0023     		moveq	r3, #0
 2157 0228 DBB2     		uxtb	r3, r3
 2158 022a 1A46     		mov	r2, r3
 2159 022c 7B68     		ldr	r3, [r7, #4]
 2160 022e 1A70     		strb	r2, [r3]
 463:bluetooth_rxtx.c **** 		*data_len = 1;
 2161              		.loc 1 463 0
 2162 0230 3B68     		ldr	r3, [r7]
 2163 0232 0122     		movs	r2, #1
 2164 0234 1A60     		str	r2, [r3]
 464:bluetooth_rxtx.c **** 		break;
 2165              		.loc 1 464 0
 2166 0236 00F058BC 		b	.L107
 2167              	.L56:
 465:bluetooth_rxtx.c **** 
 466:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 467:bluetooth_rxtx.c **** 		if (request_params[0])
 2168              		.loc 1 467 0
 2169 023a BB68     		ldr	r3, [r7, #8]
 2170 023c 1B88     		ldrh	r3, [r3]
 2171 023e 002B     		cmp	r3, #0
 2172 0240 05D0     		beq	.L114
 468:bluetooth_rxtx.c **** 			CC1V8_SET;
 2173              		.loc 1 468 0
 2174 0242 634B     		ldr	r3, .L151+8
ARM GAS  /tmp/cc6bdJLE.s 			page 46


 2175 0244 4FF40072 		mov	r2, #512
 2176 0248 1A60     		str	r2, [r3]
 469:bluetooth_rxtx.c **** 		else
 470:bluetooth_rxtx.c **** 			CC1V8_CLR;
 471:bluetooth_rxtx.c **** 		break;
 2177              		.loc 1 471 0
 2178 024a 00F04EBC 		b	.L107
 2179              	.L114:
 470:bluetooth_rxtx.c **** 		break;
 2180              		.loc 1 470 0
 2181 024e 614B     		ldr	r3, .L151+12
 2182 0250 4FF40072 		mov	r2, #512
 2183 0254 1A60     		str	r2, [r3]
 2184              		.loc 1 471 0
 2185 0256 00F048BC 		b	.L107
 2186              	.L61:
 472:bluetooth_rxtx.c **** 
 473:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 474:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2187              		.loc 1 474 0
 2188 025a 3623     		movs	r3, #54
 2189 025c 7B62     		str	r3, [r7, #36]
 475:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2190              		.loc 1 475 0
 2191 025e 5E4B     		ldr	r3, .L151+16
 2192 0260 1B68     		ldr	r3, [r3]
 2193 0262 07F12401 		add	r1, r7, #36
 2194 0266 07F11002 		add	r2, r7, #16
 2195 026a 0846     		mov	r0, r1
 2196 026c 1146     		mov	r1, r2
 2197 026e 9847     		blx	r3
 476:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2198              		.loc 1 476 0
 2199 0270 3B69     		ldr	r3, [r7, #16]
 2200 0272 DAB2     		uxtb	r2, r3
 2201 0274 7B68     		ldr	r3, [r7, #4]
 2202 0276 1A70     		strb	r2, [r3]
 477:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2203              		.loc 1 477 0
 2204 0278 7B68     		ldr	r3, [r7, #4]
 2205 027a 0133     		adds	r3, r3, #1
 2206 027c 7A69     		ldr	r2, [r7, #20]
 2207 027e D2B2     		uxtb	r2, r2
 2208 0280 1A70     		strb	r2, [r3]
 478:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2209              		.loc 1 478 0
 2210 0282 7B68     		ldr	r3, [r7, #4]
 2211 0284 0233     		adds	r3, r3, #2
 2212 0286 7A69     		ldr	r2, [r7, #20]
 2213 0288 120A     		lsrs	r2, r2, #8
 2214 028a D2B2     		uxtb	r2, r2
 2215 028c 1A70     		strb	r2, [r3]
 479:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2216              		.loc 1 479 0
 2217 028e 7B68     		ldr	r3, [r7, #4]
 2218 0290 0333     		adds	r3, r3, #3
 2219 0292 7A69     		ldr	r2, [r7, #20]
ARM GAS  /tmp/cc6bdJLE.s 			page 47


 2220 0294 120C     		lsrs	r2, r2, #16
 2221 0296 D2B2     		uxtb	r2, r2
 2222 0298 1A70     		strb	r2, [r3]
 480:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2223              		.loc 1 480 0
 2224 029a 7B68     		ldr	r3, [r7, #4]
 2225 029c 0433     		adds	r3, r3, #4
 2226 029e 7A69     		ldr	r2, [r7, #20]
 2227 02a0 120E     		lsrs	r2, r2, #24
 2228 02a2 D2B2     		uxtb	r2, r2
 2229 02a4 1A70     		strb	r2, [r3]
 481:bluetooth_rxtx.c **** 		*data_len = 5;
 2230              		.loc 1 481 0
 2231 02a6 3B68     		ldr	r3, [r7]
 2232 02a8 0522     		movs	r2, #5
 2233 02aa 1A60     		str	r2, [r3]
 482:bluetooth_rxtx.c **** 		break;
 2234              		.loc 1 482 0
 2235 02ac 00F01DBC 		b	.L107
 2236              	.L59:
 483:bluetooth_rxtx.c **** 
 484:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 485:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2237              		.loc 1 485 0
 2238 02b0 454B     		ldr	r3, .L151
 2239 02b2 0B22     		movs	r2, #11
 2240 02b4 1A70     		strb	r2, [r3]
 486:bluetooth_rxtx.c **** 		break;
 2241              		.loc 1 486 0
 2242 02b6 00F018BC 		b	.L107
 2243              	.L60:
 487:bluetooth_rxtx.c **** 
 488:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 489:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2244              		.loc 1 489 0
 2245 02ba 3A23     		movs	r3, #58
 2246 02bc 7B62     		str	r3, [r7, #36]
 490:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2247              		.loc 1 490 0
 2248 02be 464B     		ldr	r3, .L151+16
 2249 02c0 1B68     		ldr	r3, [r3]
 2250 02c2 07F12401 		add	r1, r7, #36
 2251 02c6 07F11002 		add	r2, r7, #16
 2252 02ca 0846     		mov	r0, r1
 2253 02cc 1146     		mov	r1, r2
 2254 02ce 9847     		blx	r3
 491:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2255              		.loc 1 491 0
 2256 02d0 3B69     		ldr	r3, [r7, #16]
 2257 02d2 DAB2     		uxtb	r2, r3
 2258 02d4 7B68     		ldr	r3, [r7, #4]
 2259 02d6 1A70     		strb	r2, [r3]
 492:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2260              		.loc 1 492 0
 2261 02d8 7B68     		ldr	r3, [r7, #4]
 2262 02da 0133     		adds	r3, r3, #1
 2263 02dc 7A69     		ldr	r2, [r7, #20]
ARM GAS  /tmp/cc6bdJLE.s 			page 48


 2264 02de D2B2     		uxtb	r2, r2
 2265 02e0 1A70     		strb	r2, [r3]
 493:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2266              		.loc 1 493 0
 2267 02e2 7B68     		ldr	r3, [r7, #4]
 2268 02e4 0233     		adds	r3, r3, #2
 2269 02e6 7A69     		ldr	r2, [r7, #20]
 2270 02e8 120A     		lsrs	r2, r2, #8
 2271 02ea D2B2     		uxtb	r2, r2
 2272 02ec 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2273              		.loc 1 494 0
 2274 02ee 7B68     		ldr	r3, [r7, #4]
 2275 02f0 0333     		adds	r3, r3, #3
 2276 02f2 7A69     		ldr	r2, [r7, #20]
 2277 02f4 120C     		lsrs	r2, r2, #16
 2278 02f6 D2B2     		uxtb	r2, r2
 2279 02f8 1A70     		strb	r2, [r3]
 495:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2280              		.loc 1 495 0
 2281 02fa 7B68     		ldr	r3, [r7, #4]
 2282 02fc 0433     		adds	r3, r3, #4
 2283 02fe 7A69     		ldr	r2, [r7, #20]
 2284 0300 120E     		lsrs	r2, r2, #24
 2285 0302 D2B2     		uxtb	r2, r2
 2286 0304 1A70     		strb	r2, [r3]
 496:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2287              		.loc 1 496 0
 2288 0306 7B68     		ldr	r3, [r7, #4]
 2289 0308 0533     		adds	r3, r3, #5
 2290 030a BA69     		ldr	r2, [r7, #24]
 2291 030c D2B2     		uxtb	r2, r2
 2292 030e 1A70     		strb	r2, [r3]
 497:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2293              		.loc 1 497 0
 2294 0310 7B68     		ldr	r3, [r7, #4]
 2295 0312 0633     		adds	r3, r3, #6
 2296 0314 BA69     		ldr	r2, [r7, #24]
 2297 0316 120A     		lsrs	r2, r2, #8
 2298 0318 D2B2     		uxtb	r2, r2
 2299 031a 1A70     		strb	r2, [r3]
 498:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2300              		.loc 1 498 0
 2301 031c 7B68     		ldr	r3, [r7, #4]
 2302 031e 0733     		adds	r3, r3, #7
 2303 0320 BA69     		ldr	r2, [r7, #24]
 2304 0322 120C     		lsrs	r2, r2, #16
 2305 0324 D2B2     		uxtb	r2, r2
 2306 0326 1A70     		strb	r2, [r3]
 499:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2307              		.loc 1 499 0
 2308 0328 7B68     		ldr	r3, [r7, #4]
 2309 032a 0833     		adds	r3, r3, #8
 2310 032c BA69     		ldr	r2, [r7, #24]
 2311 032e 120E     		lsrs	r2, r2, #24
 2312 0330 D2B2     		uxtb	r2, r2
 2313 0332 1A70     		strb	r2, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 49


 500:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2314              		.loc 1 500 0
 2315 0334 7B68     		ldr	r3, [r7, #4]
 2316 0336 0933     		adds	r3, r3, #9
 2317 0338 FA69     		ldr	r2, [r7, #28]
 2318 033a D2B2     		uxtb	r2, r2
 2319 033c 1A70     		strb	r2, [r3]
 501:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2320              		.loc 1 501 0
 2321 033e 7B68     		ldr	r3, [r7, #4]
 2322 0340 0A33     		adds	r3, r3, #10
 2323 0342 FA69     		ldr	r2, [r7, #28]
 2324 0344 120A     		lsrs	r2, r2, #8
 2325 0346 D2B2     		uxtb	r2, r2
 2326 0348 1A70     		strb	r2, [r3]
 502:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2327              		.loc 1 502 0
 2328 034a 7B68     		ldr	r3, [r7, #4]
 2329 034c 0B33     		adds	r3, r3, #11
 2330 034e FA69     		ldr	r2, [r7, #28]
 2331 0350 120C     		lsrs	r2, r2, #16
 2332 0352 D2B2     		uxtb	r2, r2
 2333 0354 1A70     		strb	r2, [r3]
 503:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2334              		.loc 1 503 0
 2335 0356 7B68     		ldr	r3, [r7, #4]
 2336 0358 0C33     		adds	r3, r3, #12
 2337 035a FA69     		ldr	r2, [r7, #28]
 2338 035c 120E     		lsrs	r2, r2, #24
 2339 035e D2B2     		uxtb	r2, r2
 2340 0360 1A70     		strb	r2, [r3]
 504:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2341              		.loc 1 504 0
 2342 0362 7B68     		ldr	r3, [r7, #4]
 2343 0364 0D33     		adds	r3, r3, #13
 2344 0366 3A6A     		ldr	r2, [r7, #32]
 2345 0368 D2B2     		uxtb	r2, r2
 2346 036a 1A70     		strb	r2, [r3]
 505:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2347              		.loc 1 505 0
 2348 036c 7B68     		ldr	r3, [r7, #4]
 2349 036e 0E33     		adds	r3, r3, #14
 2350 0370 3A6A     		ldr	r2, [r7, #32]
 2351 0372 120A     		lsrs	r2, r2, #8
 2352 0374 D2B2     		uxtb	r2, r2
 2353 0376 1A70     		strb	r2, [r3]
 506:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2354              		.loc 1 506 0
 2355 0378 7B68     		ldr	r3, [r7, #4]
 2356 037a 0F33     		adds	r3, r3, #15
 2357 037c 3A6A     		ldr	r2, [r7, #32]
 2358 037e 120C     		lsrs	r2, r2, #16
 2359 0380 D2B2     		uxtb	r2, r2
 2360 0382 1A70     		strb	r2, [r3]
 507:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2361              		.loc 1 507 0
 2362 0384 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc6bdJLE.s 			page 50


 2363 0386 1033     		adds	r3, r3, #16
 2364 0388 3A6A     		ldr	r2, [r7, #32]
 2365 038a 120E     		lsrs	r2, r2, #24
 2366 038c D2B2     		uxtb	r2, r2
 2367 038e 1A70     		strb	r2, [r3]
 508:bluetooth_rxtx.c **** 		*data_len = 17;
 2368              		.loc 1 508 0
 2369 0390 3B68     		ldr	r3, [r7]
 2370 0392 1122     		movs	r2, #17
 2371 0394 1A60     		str	r2, [r3]
 509:bluetooth_rxtx.c **** 		break;
 2372              		.loc 1 509 0
 2373 0396 A8E3     		b	.L107
 2374              	.L62:
 510:bluetooth_rxtx.c **** 
 511:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 512:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 513:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2375              		.loc 1 513 0
 2376 0398 104B     		ldr	r3, .L151+20
 2377 039a 1B68     		ldr	r3, [r3]
 2378 039c 03F08003 		and	r3, r3, #128
 2379 03a0 002B     		cmp	r3, #0
 2380 03a2 14BF     		ite	ne
 2381 03a4 0123     		movne	r3, #1
 2382 03a6 0023     		moveq	r3, #0
 2383 03a8 DBB2     		uxtb	r3, r3
 2384 03aa 1A46     		mov	r2, r3
 2385 03ac 7B68     		ldr	r3, [r7, #4]
 2386 03ae 1A70     		strb	r2, [r3]
 514:bluetooth_rxtx.c **** 		*data_len = 1;
 2387              		.loc 1 514 0
 2388 03b0 3B68     		ldr	r3, [r7]
 2389 03b2 0122     		movs	r2, #1
 2390 03b4 1A60     		str	r2, [r3]
 515:bluetooth_rxtx.c **** 		break;
 2391              		.loc 1 515 0
 2392 03b6 98E3     		b	.L107
 2393              	.L63:
 516:bluetooth_rxtx.c **** 
 517:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 518:bluetooth_rxtx.c **** 		if (request_params[0])
 2394              		.loc 1 518 0
 2395 03b8 BB68     		ldr	r3, [r7, #8]
 2396 03ba 1B88     		ldrh	r3, [r3]
 2397 03bc 002B     		cmp	r3, #0
 2398 03be 11D0     		beq	.L116
 519:bluetooth_rxtx.c **** 			PAEN_SET;
 2399              		.loc 1 519 0
 2400 03c0 074B     		ldr	r3, .L151+24
 2401 03c2 8022     		movs	r2, #128
 2402 03c4 1A60     		str	r2, [r3]
 520:bluetooth_rxtx.c **** 		else
 521:bluetooth_rxtx.c **** 			PAEN_CLR;
 522:bluetooth_rxtx.c **** 		break;
 2403              		.loc 1 522 0
 2404 03c6 90E3     		b	.L107
ARM GAS  /tmp/cc6bdJLE.s 			page 51


 2405              	.L152:
 2406              		.align	2
 2407              	.L151:
 2408 03c8 00000000 		.word	requested_mode
 2409 03cc 34C00920 		.word	537509940
 2410 03d0 38C00920 		.word	537509944
 2411 03d4 3CC00920 		.word	537509948
 2412 03d8 00000000 		.word	iap_entry
 2413 03dc 54C00920 		.word	537509972
 2414 03e0 58C00920 		.word	537509976
 2415              	.L116:
 521:bluetooth_rxtx.c **** 		break;
 2416              		.loc 1 521 0
 2417 03e4 944B     		ldr	r3, .L153
 2418 03e6 8022     		movs	r2, #128
 2419 03e8 1A60     		str	r2, [r3]
 2420              		.loc 1 522 0
 2421 03ea 7EE3     		b	.L107
 2422              	.L64:
 523:bluetooth_rxtx.c **** 
 524:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 525:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2423              		.loc 1 525 0
 2424 03ec 934B     		ldr	r3, .L153+4
 2425 03ee 1B68     		ldr	r3, [r3]
 2426 03f0 03F48073 		and	r3, r3, #256
 2427 03f4 002B     		cmp	r3, #0
 2428 03f6 14BF     		ite	ne
 2429 03f8 0123     		movne	r3, #1
 2430 03fa 0023     		moveq	r3, #0
 2431 03fc DBB2     		uxtb	r3, r3
 2432 03fe 1A46     		mov	r2, r3
 2433 0400 7B68     		ldr	r3, [r7, #4]
 2434 0402 1A70     		strb	r2, [r3]
 526:bluetooth_rxtx.c **** 		*data_len = 1;
 2435              		.loc 1 526 0
 2436 0404 3B68     		ldr	r3, [r7]
 2437 0406 0122     		movs	r2, #1
 2438 0408 1A60     		str	r2, [r3]
 527:bluetooth_rxtx.c **** 		break;
 2439              		.loc 1 527 0
 2440 040a 6EE3     		b	.L107
 2441              	.L65:
 528:bluetooth_rxtx.c **** 
 529:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 530:bluetooth_rxtx.c **** 		if (request_params[0])
 2442              		.loc 1 530 0
 2443 040c BB68     		ldr	r3, [r7, #8]
 2444 040e 1B88     		ldrh	r3, [r3]
 2445 0410 002B     		cmp	r3, #0
 2446 0412 04D0     		beq	.L118
 531:bluetooth_rxtx.c **** 			HGM_SET;
 2447              		.loc 1 531 0
 2448 0414 8A4B     		ldr	r3, .L153+8
 2449 0416 4FF48072 		mov	r2, #256
 2450 041a 1A60     		str	r2, [r3]
 532:bluetooth_rxtx.c **** 		else
ARM GAS  /tmp/cc6bdJLE.s 			page 52


 533:bluetooth_rxtx.c **** 			HGM_CLR;
 534:bluetooth_rxtx.c **** 		break;
 2451              		.loc 1 534 0
 2452 041c 65E3     		b	.L107
 2453              	.L118:
 533:bluetooth_rxtx.c **** 		break;
 2454              		.loc 1 533 0
 2455 041e 864B     		ldr	r3, .L153
 2456 0420 4FF48072 		mov	r2, #256
 2457 0424 1A60     		str	r2, [r3]
 2458              		.loc 1 534 0
 2459 0426 60E3     		b	.L107
 2460              	.L66:
 535:bluetooth_rxtx.c **** #endif
 536:bluetooth_rxtx.c **** 
 537:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 538:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 539:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2461              		.loc 1 539 0
 2462 0428 864B     		ldr	r3, .L153+12
 2463 042a 0322     		movs	r2, #3
 2464 042c 1A70     		strb	r2, [r3]
 540:bluetooth_rxtx.c **** 		break;
 2465              		.loc 1 540 0
 2466 042e 5CE3     		b	.L107
 2467              	.L73:
 541:bluetooth_rxtx.c **** 
 542:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 543:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2468              		.loc 1 543 0
 2469 0430 0520     		movs	r0, #5
 2470 0432 FFF7FEFF 		bl	cc2400_get
 2471 0436 0346     		mov	r3, r0
 2472 0438 DBB2     		uxtb	r3, r3
 2473 043a 03F00703 		and	r3, r3, #7
 2474 043e DAB2     		uxtb	r2, r3
 2475 0440 7B68     		ldr	r3, [r7, #4]
 2476 0442 1A70     		strb	r2, [r3]
 544:bluetooth_rxtx.c **** 		*data_len = 1;
 2477              		.loc 1 544 0
 2478 0444 3B68     		ldr	r3, [r7]
 2479 0446 0122     		movs	r2, #1
 2480 0448 1A60     		str	r2, [r3]
 545:bluetooth_rxtx.c **** 		break;
 2481              		.loc 1 545 0
 2482 044a 4EE3     		b	.L107
 2483              	.L74:
 546:bluetooth_rxtx.c **** 
 547:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 548:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2484              		.loc 1 548 0
 2485 044c BB68     		ldr	r3, [r7, #8]
 2486 044e 1B88     		ldrh	r3, [r3]
 2487 0450 072B     		cmp	r3, #7
 2488 0452 09D8     		bhi	.L120
 549:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2489              		.loc 1 549 0
ARM GAS  /tmp/cc6bdJLE.s 			page 53


 2490 0454 BB68     		ldr	r3, [r7, #8]
 2491 0456 1B88     		ldrh	r3, [r3]
 2492 0458 43F00803 		orr	r3, r3, #8
 2493 045c 9BB2     		uxth	r3, r3
 2494 045e 0520     		movs	r0, #5
 2495 0460 1946     		mov	r1, r3
 2496 0462 FFF7FEFF 		bl	cc2400_set
 550:bluetooth_rxtx.c **** 		} else {
 551:bluetooth_rxtx.c **** 			return 0;
 552:bluetooth_rxtx.c **** 		}
 553:bluetooth_rxtx.c **** 		break;
 2497              		.loc 1 553 0
 2498 0466 40E3     		b	.L107
 2499              	.L120:
 551:bluetooth_rxtx.c **** 		}
 2500              		.loc 1 551 0
 2501 0468 0023     		movs	r3, #0
 2502 046a 3FE3     		b	.L149
 2503              	.L76:
 554:bluetooth_rxtx.c **** 
 555:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 556:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2504              		.loc 1 556 0
 2505 046c 754B     		ldr	r3, .L153+12
 2506 046e 0522     		movs	r2, #5
 2507 0470 1A70     		strb	r2, [r3]
 557:bluetooth_rxtx.c **** 		break;
 2508              		.loc 1 557 0
 2509 0472 3AE3     		b	.L107
 2510              	.L75:
 558:bluetooth_rxtx.c **** 
 559:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 560:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2511              		.loc 1 560 0
 2512 0474 734B     		ldr	r3, .L153+12
 2513 0476 0622     		movs	r2, #6
 2514 0478 1A70     		strb	r2, [r3]
 561:bluetooth_rxtx.c **** 		break;
 2515              		.loc 1 561 0
 2516 047a 36E3     		b	.L107
 2517              	.L77:
 562:bluetooth_rxtx.c **** #endif
 563:bluetooth_rxtx.c **** 
 564:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 565:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2518              		.loc 1 565 0
 2519 047c 724B     		ldr	r3, .L153+16
 2520 047e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2521 0480 7B68     		ldr	r3, [r7, #4]
 2522 0482 1A70     		strb	r2, [r3]
 566:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2523              		.loc 1 566 0
 2524 0484 7B68     		ldr	r3, [r7, #4]
 2525 0486 0133     		adds	r3, r3, #1
 2526 0488 6F4A     		ldr	r2, .L153+16
 2527 048a 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2528 048c 1A70     		strb	r2, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 54


 567:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2529              		.loc 1 567 0
 2530 048e 7B68     		ldr	r3, [r7, #4]
 2531 0490 0233     		adds	r3, r3, #2
 2532 0492 6D4A     		ldr	r2, .L153+16
 2533 0494 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2534 0496 1A70     		strb	r2, [r3]
 568:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2535              		.loc 1 568 0
 2536 0498 7B68     		ldr	r3, [r7, #4]
 2537 049a 0333     		adds	r3, r3, #3
 2538 049c 6A4A     		ldr	r2, .L153+16
 2539 049e D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2540 04a0 1A70     		strb	r2, [r3]
 569:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2541              		.loc 1 569 0
 2542 04a2 7B68     		ldr	r3, [r7, #4]
 2543 04a4 0433     		adds	r3, r3, #4
 2544 04a6 684A     		ldr	r2, .L153+16
 2545 04a8 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2546 04aa 1A70     		strb	r2, [r3]
 570:bluetooth_rxtx.c **** 		*data_len = 5;
 2547              		.loc 1 570 0
 2548 04ac 3B68     		ldr	r3, [r7]
 2549 04ae 0522     		movs	r2, #5
 2550 04b0 1A60     		str	r2, [r3]
 571:bluetooth_rxtx.c **** 		break;
 2551              		.loc 1 571 0
 2552 04b2 1AE3     		b	.L107
 2553              	.L67:
 572:bluetooth_rxtx.c **** 
 573:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 574:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2554              		.loc 1 574 0
 2555 04b4 634B     		ldr	r3, .L153+12
 2556 04b6 0022     		movs	r2, #0
 2557 04b8 1A70     		strb	r2, [r3]
 575:bluetooth_rxtx.c **** 		break;
 2558              		.loc 1 575 0
 2559 04ba 16E3     		b	.L107
 2560              	.L68:
 576:bluetooth_rxtx.c **** 
 577:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 578:bluetooth_rxtx.c **** 		data[0] = modulation;
 2561              		.loc 1 578 0
 2562 04bc 634B     		ldr	r3, .L153+20
 2563 04be 1B78     		ldrb	r3, [r3]
 2564 04c0 DAB2     		uxtb	r2, r3
 2565 04c2 7B68     		ldr	r3, [r7, #4]
 2566 04c4 1A70     		strb	r2, [r3]
 579:bluetooth_rxtx.c **** 		*data_len = 1;
 2567              		.loc 1 579 0
 2568 04c6 3B68     		ldr	r3, [r7]
 2569 04c8 0122     		movs	r2, #1
 2570 04ca 1A60     		str	r2, [r3]
 580:bluetooth_rxtx.c **** 		break;
 2571              		.loc 1 580 0
ARM GAS  /tmp/cc6bdJLE.s 			page 55


 2572 04cc 0DE3     		b	.L107
 2573              	.L69:
 581:bluetooth_rxtx.c **** 
 582:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 583:bluetooth_rxtx.c **** 		modulation = request_params[0];
 2574              		.loc 1 583 0
 2575 04ce BB68     		ldr	r3, [r7, #8]
 2576 04d0 1B88     		ldrh	r3, [r3]
 2577 04d2 DAB2     		uxtb	r2, r3
 2578 04d4 5D4B     		ldr	r3, .L153+20
 2579 04d6 1A70     		strb	r2, [r3]
 584:bluetooth_rxtx.c **** 		break;
 2580              		.loc 1 584 0
 2581 04d8 07E3     		b	.L107
 2582              	.L57:
 585:bluetooth_rxtx.c **** 
 586:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 587:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 2583              		.loc 1 587 0
 2584 04da 5D4B     		ldr	r3, .L153+24
 2585 04dc 1B88     		ldrh	r3, [r3]	@ movhi
 2586 04de 9BB2     		uxth	r3, r3
 2587 04e0 DAB2     		uxtb	r2, r3
 2588 04e2 7B68     		ldr	r3, [r7, #4]
 2589 04e4 1A70     		strb	r2, [r3]
 588:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 2590              		.loc 1 588 0
 2591 04e6 7B68     		ldr	r3, [r7, #4]
 2592 04e8 0133     		adds	r3, r3, #1
 2593 04ea 594A     		ldr	r2, .L153+24
 2594 04ec 1288     		ldrh	r2, [r2]	@ movhi
 2595 04ee 92B2     		uxth	r2, r2
 2596 04f0 120A     		lsrs	r2, r2, #8
 2597 04f2 92B2     		uxth	r2, r2
 2598 04f4 D2B2     		uxtb	r2, r2
 2599 04f6 1A70     		strb	r2, [r3]
 589:bluetooth_rxtx.c **** 		*data_len = 2;
 2600              		.loc 1 589 0
 2601 04f8 3B68     		ldr	r3, [r7]
 2602 04fa 0222     		movs	r2, #2
 2603 04fc 1A60     		str	r2, [r3]
 590:bluetooth_rxtx.c **** 		break;
 2604              		.loc 1 590 0
 2605 04fe F4E2     		b	.L107
 2606              	.L58:
 591:bluetooth_rxtx.c **** 
 592:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 593:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2607              		.loc 1 593 0
 2608 0500 BB68     		ldr	r3, [r7, #8]
 2609 0502 1A88     		ldrh	r2, [r3]
 2610 0504 534B     		ldr	r3, .L153+28
 2611 0506 1A80     		strh	r2, [r3]	@ movhi
 594:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 595:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 2612              		.loc 1 595 0
 2613 0508 524B     		ldr	r3, .L153+28
ARM GAS  /tmp/cc6bdJLE.s 			page 56


 2614 050a 1B88     		ldrh	r3, [r3]	@ movhi
 2615 050c 9BB2     		uxth	r3, r3
 2616 050e 40F6EA22 		movw	r2, #2794
 2617 0512 9342     		cmp	r3, r2
 2618 0514 07D9     		bls	.L123
 596:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 2619              		.loc 1 596 0
 2620 0516 504B     		ldr	r3, .L153+32
 2621 0518 0122     		movs	r2, #1
 2622 051a 1A70     		strb	r2, [r3]
 597:bluetooth_rxtx.c **** 			requested_channel = 2402;
 2623              		.loc 1 597 0
 2624 051c 4D4B     		ldr	r3, .L153+28
 2625 051e 40F66212 		movw	r2, #2402
 2626 0522 1A80     		strh	r2, [r3]	@ movhi
 2627 0524 20E0     		b	.L124
 2628              	.L123:
 598:bluetooth_rxtx.c **** 		}
 599:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 600:bluetooth_rxtx.c **** 		else {
 601:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 2629              		.loc 1 601 0
 2630 0526 4C4B     		ldr	r3, .L153+32
 2631 0528 0022     		movs	r2, #0
 2632 052a 1A70     		strb	r2, [r3]
 602:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 2633              		.loc 1 602 0
 2634 052c 494B     		ldr	r3, .L153+28
 2635 052e 1B88     		ldrh	r3, [r3]	@ movhi
 2636 0530 9BB2     		uxth	r3, r3
 2637 0532 40F6DC02 		movw	r2, #2268
 2638 0536 9342     		cmp	r3, r2
 2639 0538 03D9     		bls	.L125
 2640              		.loc 1 602 0 is_stmt 0 discriminator 1
 2641 053a 464B     		ldr	r3, .L153+28
 2642 053c 1B88     		ldrh	r3, [r3]	@ movhi
 2643 053e 9BB2     		uxth	r3, r3
 2644 0540 01E0     		b	.L126
 2645              	.L125:
 2646              		.loc 1 602 0 discriminator 2
 2647 0542 40F6DC03 		movw	r3, #2268
 2648              	.L126:
 2649              		.loc 1 602 0 discriminator 4
 2650 0546 434A     		ldr	r2, .L153+28
 2651 0548 1380     		strh	r3, [r2]	@ movhi
 603:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 2652              		.loc 1 603 0 is_stmt 1 discriminator 4
 2653 054a 424B     		ldr	r3, .L153+28
 2654 054c 1B88     		ldrh	r3, [r3]	@ movhi
 2655 054e 9BB2     		uxth	r3, r3
 2656 0550 40F6E922 		movw	r2, #2793
 2657 0554 9342     		cmp	r3, r2
 2658 0556 03D8     		bhi	.L127
 2659              		.loc 1 603 0 is_stmt 0 discriminator 1
 2660 0558 3E4B     		ldr	r3, .L153+28
 2661 055a 1B88     		ldrh	r3, [r3]	@ movhi
 2662 055c 9BB2     		uxth	r3, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 57


 2663 055e 01E0     		b	.L128
 2664              	.L127:
 2665              		.loc 1 603 0 discriminator 2
 2666 0560 40F6EA23 		movw	r3, #2794
 2667              	.L128:
 2668              		.loc 1 603 0 discriminator 4
 2669 0564 3B4A     		ldr	r2, .L153+28
 2670 0566 1380     		strh	r3, [r2]	@ movhi
 2671              	.L124:
 604:bluetooth_rxtx.c **** 		}
 605:bluetooth_rxtx.c **** 
 606:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 2672              		.loc 1 606 0 is_stmt 1
 2673 0568 3C4B     		ldr	r3, .L153+36
 2674 056a 1B78     		ldrb	r3, [r3]
 2675 056c DBB2     		uxtb	r3, r3
 2676 056e 092B     		cmp	r3, #9
 2677 0570 0AD0     		beq	.L129
 607:bluetooth_rxtx.c **** 			channel = requested_channel;
 2678              		.loc 1 607 0
 2679 0572 384B     		ldr	r3, .L153+28
 2680 0574 1B88     		ldrh	r3, [r3]	@ movhi
 2681 0576 9AB2     		uxth	r2, r3
 2682 0578 354B     		ldr	r3, .L153+24
 2683 057a 1A80     		strh	r2, [r3]	@ movhi
 608:bluetooth_rxtx.c **** 			requested_channel = 0;
 2684              		.loc 1 608 0
 2685 057c 354B     		ldr	r3, .L153+28
 2686 057e 0022     		movs	r2, #0
 2687 0580 1A80     		strh	r2, [r3]	@ movhi
 609:bluetooth_rxtx.c **** 
 610:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 611:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 612:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 2688              		.loc 1 612 0
 2689 0582 FFF7FEFF 		bl	cs_threshold_calc_and_set
 613:bluetooth_rxtx.c **** 		}
 614:bluetooth_rxtx.c **** 		break;
 2690              		.loc 1 614 0
 2691 0586 B0E2     		b	.L107
 2692              	.L129:
 2693 0588 AFE2     		b	.L107
 2694              	.L70:
 615:bluetooth_rxtx.c **** 
 616:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 617:bluetooth_rxtx.c **** 		command[0] = 57;
 2695              		.loc 1 617 0
 2696 058a 3923     		movs	r3, #57
 2697 058c 7B62     		str	r3, [r7, #36]
 618:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2698              		.loc 1 618 0
 2699 058e 344B     		ldr	r3, .L153+40
 2700 0590 1B68     		ldr	r3, [r3]
 2701 0592 07F12401 		add	r1, r7, #36
 2702 0596 07F11002 		add	r2, r7, #16
 2703 059a 0846     		mov	r0, r1
 2704 059c 1146     		mov	r1, r2
ARM GAS  /tmp/cc6bdJLE.s 			page 58


 2705 059e 9847     		blx	r3
 619:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 2706              		.loc 1 619 0
 2707 05a0 3B68     		ldr	r3, [r7]
 2708 05a2 0022     		movs	r2, #0
 2709 05a4 1A60     		str	r2, [r3]
 620:bluetooth_rxtx.c **** 		break;
 2710              		.loc 1 620 0
 2711 05a6 A0E2     		b	.L107
 2712              	.L71:
 621:bluetooth_rxtx.c **** 
 622:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 623:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 2713              		.loc 1 623 0
 2714 05a8 2E4B     		ldr	r3, .L153+44
 2715 05aa 2F4A     		ldr	r2, .L153+48
 2716 05ac 1A60     		str	r2, [r3]
 624:bluetooth_rxtx.c **** 		reset();
 2717              		.loc 1 624 0
 2718 05ae FFF7FEFF 		bl	reset
 625:bluetooth_rxtx.c **** 		break;
 2719              		.loc 1 625 0
 2720 05b2 9AE2     		b	.L107
 2721              	.L72:
 626:bluetooth_rxtx.c **** 
 627:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 628:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 2722              		.loc 1 628 0
 2723 05b4 BB68     		ldr	r3, [r7, #8]
 2724 05b6 1B88     		ldrh	r3, [r3]
 2725 05b8 B3F5006F 		cmp	r3, #2048
 2726 05bc 17D9     		bls	.L130
 2727              		.loc 1 628 0 is_stmt 0 discriminator 1
 2728 05be BB68     		ldr	r3, [r7, #8]
 2729 05c0 1B88     		ldrh	r3, [r3]
 2730 05c2 B3F5406F 		cmp	r3, #3072
 2731 05c6 12D8     		bhi	.L130
 629:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2732              		.loc 1 629 0 is_stmt 1 discriminator 2
 2733 05c8 BB68     		ldr	r3, [r7, #8]
 2734 05ca 0233     		adds	r3, r3, #2
 2735 05cc 1B88     		ldrh	r3, [r3]
 628:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2736              		.loc 1 628 0 discriminator 2
 2737 05ce B3F5006F 		cmp	r3, #2048
 2738 05d2 0CD9     		bls	.L130
 2739              		.loc 1 629 0
 2740 05d4 BB68     		ldr	r3, [r7, #8]
 2741 05d6 0233     		adds	r3, r3, #2
 2742 05d8 1B88     		ldrh	r3, [r3]
 2743 05da B3F5406F 		cmp	r3, #3072
 2744 05de 06D8     		bhi	.L130
 630:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 2745              		.loc 1 630 0 discriminator 1
 2746 05e0 BB68     		ldr	r3, [r7, #8]
 2747 05e2 0233     		adds	r3, r3, #2
 2748 05e4 1A88     		ldrh	r2, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 59


 2749 05e6 BB68     		ldr	r3, [r7, #8]
 2750 05e8 1B88     		ldrh	r3, [r3]
 629:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2751              		.loc 1 629 0 discriminator 1
 2752 05ea 9A42     		cmp	r2, r3
 2753 05ec 01D2     		bcs	.L131
 2754              	.L130:
 631:bluetooth_rxtx.c **** 			return 0;
 2755              		.loc 1 631 0
 2756 05ee 0023     		movs	r3, #0
 2757 05f0 7CE2     		b	.L149
 2758              	.L131:
 632:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 2759              		.loc 1 632 0
 2760 05f2 BB68     		ldr	r3, [r7, #8]
 2761 05f4 1A88     		ldrh	r2, [r3]
 2762 05f6 1D4B     		ldr	r3, .L153+52
 2763 05f8 1A80     		strh	r2, [r3]	@ movhi
 633:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2764              		.loc 1 633 0
 2765 05fa BB68     		ldr	r3, [r7, #8]
 2766 05fc 5A88     		ldrh	r2, [r3, #2]
 2767 05fe 1C4B     		ldr	r3, .L153+56
 2768 0600 1A80     		strh	r2, [r3]	@ movhi
 634:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2769              		.loc 1 634 0
 2770 0602 104B     		ldr	r3, .L153+12
 2771 0604 0422     		movs	r2, #4
 2772 0606 1A70     		strb	r2, [r3]
 635:bluetooth_rxtx.c **** 		*data_len = 0;
 2773              		.loc 1 635 0
 2774 0608 3B68     		ldr	r3, [r7]
 2775 060a 0022     		movs	r2, #0
 2776 060c 1A60     		str	r2, [r3]
 636:bluetooth_rxtx.c **** 		break;
 2777              		.loc 1 636 0
 2778 060e 6CE2     		b	.L107
 2779              	.L79:
 637:bluetooth_rxtx.c **** 
 638:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 639:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 2780              		.loc 1 639 0
 2781 0610 BB68     		ldr	r3, [r7, #8]
 2782 0612 1B88     		ldrh	r3, [r3]
 2783 0614 B3F5807F 		cmp	r3, #256
 2784 0618 01D9     		bls	.L132
 640:bluetooth_rxtx.c **** 			return 0;
 2785              		.loc 1 640 0
 2786 061a 0023     		movs	r3, #0
 2787 061c 66E2     		b	.L149
 2788              	.L132:
 641:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 2789              		.loc 1 641 0
 2790 061e BB68     		ldr	r3, [r7, #8]
 2791 0620 1B88     		ldrh	r3, [r3]
 2792 0622 DAB2     		uxtb	r2, r3
 2793 0624 134B     		ldr	r3, .L153+60
ARM GAS  /tmp/cc6bdJLE.s 			page 60


 2794 0626 1A70     		strb	r2, [r3]
 642:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2795              		.loc 1 642 0
 2796 0628 064B     		ldr	r3, .L153+12
 2797 062a 0722     		movs	r2, #7
 2798 062c 1A70     		strb	r2, [r3]
 643:bluetooth_rxtx.c **** 		*data_len = 0;
 2799              		.loc 1 643 0
 2800 062e 3B68     		ldr	r3, [r7]
 2801 0630 0022     		movs	r2, #0
 2802 0632 1A60     		str	r2, [r3]
 644:bluetooth_rxtx.c **** 		break;
 2803              		.loc 1 644 0
 2804 0634 59E2     		b	.L107
 2805              	.L154:
 2806 0636 00BF     		.align	2
 2807              	.L153:
 2808 0638 5CC00920 		.word	537509980
 2809 063c 54C00920 		.word	537509972
 2810 0640 58C00920 		.word	537509976
 2811 0644 00000000 		.word	requested_mode
 2812 0648 00000000 		.word	rr
 2813 064c 00000000 		.word	modulation
 2814 0650 00000000 		.word	channel
 2815 0654 00000000 		.word	requested_channel
 2816 0658 00000000 		.word	hop_mode
 2817 065c 00000000 		.word	mode
 2818 0660 00000000 		.word	iap_entry
 2819 0664 00000000 		.word	bootloader_ctrl
 2820 0668 21BB0543 		.word	1124449057
 2821 066c 00000000 		.word	low_freq
 2822 0670 00000000 		.word	high_freq
 2823 0674 00000000 		.word	rssi_threshold
 2824              	.L78:
 645:bluetooth_rxtx.c **** 
 646:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 647:bluetooth_rxtx.c **** 		data[0] = 0x00;
 2825              		.loc 1 647 0
 2826 0678 7B68     		ldr	r3, [r7, #4]
 2827 067a 0022     		movs	r2, #0
 2828 067c 1A70     		strb	r2, [r3]
 648:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2829              		.loc 1 648 0
 2830 067e 7B68     		ldr	r3, [r7, #4]
 2831 0680 0133     		adds	r3, r3, #1
 2832 0682 0022     		movs	r2, #0
 2833 0684 1A70     		strb	r2, [r3]
 649:bluetooth_rxtx.c **** 
 650:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 2834              		.loc 1 650 0
 2835 0686 A448     		ldr	r0, .L155
 2836 0688 FFF7FEFF 		bl	strlen
 2837 068c 0346     		mov	r3, r0
 2838 068e 87F84330 		strb	r3, [r7, #67]
 651:bluetooth_rxtx.c **** 		data[2] = length;
 2839              		.loc 1 651 0
 2840 0692 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc6bdJLE.s 			page 61


 2841 0694 0233     		adds	r3, r3, #2
 2842 0696 97F84320 		ldrb	r2, [r7, #67]
 2843 069a 1A70     		strb	r2, [r3]
 652:bluetooth_rxtx.c **** 
 653:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 2844              		.loc 1 653 0
 2845 069c 7B68     		ldr	r3, [r7, #4]
 2846 069e DA1C     		adds	r2, r3, #3
 2847 06a0 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2848 06a4 1046     		mov	r0, r2
 2849 06a6 9C49     		ldr	r1, .L155
 2850 06a8 1A46     		mov	r2, r3
 2851 06aa FFF7FEFF 		bl	memcpy
 654:bluetooth_rxtx.c **** 
 655:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 2852              		.loc 1 655 0
 2853 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2854 06b2 DA1C     		adds	r2, r3, #3
 2855 06b4 3B68     		ldr	r3, [r7]
 2856 06b6 1A60     		str	r2, [r3]
 656:bluetooth_rxtx.c **** 		break;
 2857              		.loc 1 656 0
 2858 06b8 17E2     		b	.L107
 2859              	.L100:
 657:bluetooth_rxtx.c **** 
 658:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 659:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 2860              		.loc 1 659 0
 2861 06ba 9848     		ldr	r0, .L155+4
 2862 06bc FFF7FEFF 		bl	strlen
 2863 06c0 0346     		mov	r3, r0
 2864 06c2 87F84330 		strb	r3, [r7, #67]
 660:bluetooth_rxtx.c **** 		data[0] = length;
 2865              		.loc 1 660 0
 2866 06c6 7B68     		ldr	r3, [r7, #4]
 2867 06c8 97F84320 		ldrb	r2, [r7, #67]
 2868 06cc 1A70     		strb	r2, [r3]
 661:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 2869              		.loc 1 661 0
 2870 06ce 7B68     		ldr	r3, [r7, #4]
 2871 06d0 5A1C     		adds	r2, r3, #1
 2872 06d2 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2873 06d6 1046     		mov	r0, r2
 2874 06d8 9049     		ldr	r1, .L155+4
 2875 06da 1A46     		mov	r2, r3
 2876 06dc FFF7FEFF 		bl	memcpy
 662:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 2877              		.loc 1 662 0
 2878 06e0 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2879 06e4 5A1C     		adds	r2, r3, #1
 2880 06e6 3B68     		ldr	r3, [r7]
 2881 06e8 1A60     		str	r2, [r3]
 663:bluetooth_rxtx.c **** 		break;
 2882              		.loc 1 663 0
 2883 06ea FEE1     		b	.L107
 2884              	.L80:
 664:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 62


 665:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 666:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 2885              		.loc 1 666 0
 2886 06ec 7B68     		ldr	r3, [r7, #4]
 2887 06ee 0122     		movs	r2, #1
 2888 06f0 1A70     		strb	r2, [r3]
 667:bluetooth_rxtx.c **** 		*data_len = 1;
 2889              		.loc 1 667 0
 2890 06f2 3B68     		ldr	r3, [r7]
 2891 06f4 0122     		movs	r2, #1
 2892 06f6 1A60     		str	r2, [r3]
 668:bluetooth_rxtx.c **** 		break;
 2893              		.loc 1 668 0
 2894 06f8 F7E1     		b	.L107
 2895              	.L81:
 669:bluetooth_rxtx.c **** 
 670:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 671:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 2896              		.loc 1 671 0
 2897 06fa BB68     		ldr	r3, [r7, #8]
 2898 06fc 1B88     		ldrh	r3, [r3]
 2899 06fe DAB2     		uxtb	r2, r3
 2900 0700 874B     		ldr	r3, .L155+8
 2901 0702 1A70     		strb	r2, [r3]
 672:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 2902              		.loc 1 672 0
 2903 0704 FFF7FEFF 		bl	cs_threshold_calc_and_set
 673:bluetooth_rxtx.c **** 		break;
 2904              		.loc 1 673 0
 2905 0708 EFE1     		b	.L107
 2906              	.L82:
 674:bluetooth_rxtx.c **** 
 675:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 676:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 2907              		.loc 1 676 0
 2908 070a 854B     		ldr	r3, .L155+8
 2909 070c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2910 070e DAB2     		uxtb	r2, r3
 2911 0710 7B68     		ldr	r3, [r7, #4]
 2912 0712 1A70     		strb	r2, [r3]
 677:bluetooth_rxtx.c **** 		*data_len = 1;
 2913              		.loc 1 677 0
 2914 0714 3B68     		ldr	r3, [r7]
 2915 0716 0122     		movs	r2, #1
 2916 0718 1A60     		str	r2, [r3]
 678:bluetooth_rxtx.c **** 		break;
 2917              		.loc 1 678 0
 2918 071a E6E1     		b	.L107
 2919              	.L83:
 679:bluetooth_rxtx.c **** 
 680:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 681:bluetooth_rxtx.c **** 		target.address = 0;
 2920              		.loc 1 681 0
 2921 071c 8149     		ldr	r1, .L155+12
 2922 071e 4FF00002 		mov	r2, #0
 2923 0722 4FF00003 		mov	r3, #0
 2924 0726 C1E90023 		strd	r2, [r1]
ARM GAS  /tmp/cc6bdJLE.s 			page 63


 682:bluetooth_rxtx.c **** 		target.access_code = 0;
 2925              		.loc 1 682 0
 2926 072a 7E49     		ldr	r1, .L155+12
 2927 072c 4FF00002 		mov	r2, #0
 2928 0730 4FF00003 		mov	r3, #0
 2929 0734 C1E90223 		strd	r2, [r1, #8]
 683:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2930              		.loc 1 683 0
 2931 0738 0023     		movs	r3, #0
 2932 073a FB64     		str	r3, [r7, #76]
 2933 073c 25E0     		b	.L133
 2934              	.L134:
 684:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2935              		.loc 1 684 0 discriminator 3
 2936 073e 794B     		ldr	r3, .L155+12
 2937 0740 D3E900AB 		ldrd	r10, [r3]
 2938 0744 FB6C     		ldr	r3, [r7, #76]
 2939 0746 7A68     		ldr	r2, [r7, #4]
 2940 0748 1344     		add	r3, r3, r2
 2941 074a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2942 074c DAB2     		uxtb	r2, r3
 2943 074e 4FF00003 		mov	r3, #0
 2944 0752 F96C     		ldr	r1, [r7, #76]
 2945 0754 C900     		lsls	r1, r1, #3
 2946 0756 A1F12006 		sub	r6, r1, #32
 2947 075a C1F12000 		rsb	r0, r1, #32
 2948 075e 03FA01F9 		lsl	r9, r3, r1
 2949 0762 02FA06F6 		lsl	r6, r2, r6
 2950 0766 49EA0609 		orr	r9, r9, r6
 2951 076a 22FA00F0 		lsr	r0, r2, r0
 2952 076e 49EA0009 		orr	r9, r9, r0
 2953 0772 02FA01F8 		lsl	r8, r2, r1
 2954 0776 4AEA0802 		orr	r2, r10, r8
 2955 077a 4BEA0903 		orr	r3, fp, r9
 2956 077e 6949     		ldr	r1, .L155+12
 2957 0780 C1E90023 		strd	r2, [r1]
 683:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2958              		.loc 1 683 0 discriminator 3
 2959 0784 FB6C     		ldr	r3, [r7, #76]
 2960 0786 0133     		adds	r3, r3, #1
 2961 0788 FB64     		str	r3, [r7, #76]
 2962              	.L133:
 683:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2963              		.loc 1 683 0 is_stmt 0 discriminator 1
 2964 078a FB6C     		ldr	r3, [r7, #76]
 2965 078c 072B     		cmp	r3, #7
 2966 078e D6DD     		ble	.L134
 685:bluetooth_rxtx.c **** 		}
 686:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2967              		.loc 1 686 0 is_stmt 1
 2968 0790 0023     		movs	r3, #0
 2969 0792 FB64     		str	r3, [r7, #76]
 2970 0794 24E0     		b	.L135
 2971              	.L136:
 687:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2972              		.loc 1 687 0 discriminator 3
 2973 0796 634B     		ldr	r3, .L155+12
ARM GAS  /tmp/cc6bdJLE.s 			page 64


 2974 0798 D3E90289 		ldrd	r8, [r3, #8]
 2975 079c FB6C     		ldr	r3, [r7, #76]
 2976 079e 0833     		adds	r3, r3, #8
 2977 07a0 7A68     		ldr	r2, [r7, #4]
 2978 07a2 1344     		add	r3, r3, r2
 2979 07a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2980 07a6 DAB2     		uxtb	r2, r3
 2981 07a8 4FF00003 		mov	r3, #0
 2982 07ac F96C     		ldr	r1, [r7, #76]
 2983 07ae C900     		lsls	r1, r1, #3
 2984 07b0 A1F12006 		sub	r6, r1, #32
 2985 07b4 C1F12000 		rsb	r0, r1, #32
 2986 07b8 03FA01F5 		lsl	r5, r3, r1
 2987 07bc 02FA06F6 		lsl	r6, r2, r6
 2988 07c0 3543     		orrs	r5, r5, r6
 2989 07c2 22FA00F0 		lsr	r0, r2, r0
 2990 07c6 0543     		orrs	r5, r5, r0
 2991 07c8 02FA01F4 		lsl	r4, r2, r1
 2992 07cc 48EA0402 		orr	r2, r8, r4
 2993 07d0 49EA0503 		orr	r3, r9, r5
 2994 07d4 5349     		ldr	r1, .L155+12
 2995 07d6 C1E90223 		strd	r2, [r1, #8]
 686:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2996              		.loc 1 686 0 discriminator 3
 2997 07da FB6C     		ldr	r3, [r7, #76]
 2998 07dc 0133     		adds	r3, r3, #1
 2999 07de FB64     		str	r3, [r7, #76]
 3000              	.L135:
 686:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3001              		.loc 1 686 0 is_stmt 0 discriminator 1
 3002 07e0 FB6C     		ldr	r3, [r7, #76]
 3003 07e2 072B     		cmp	r3, #7
 3004 07e4 D7DD     		ble	.L136
 688:bluetooth_rxtx.c **** 		}
 689:bluetooth_rxtx.c **** 		break;
 3005              		.loc 1 689 0 is_stmt 1
 3006 07e6 80E1     		b	.L107
 3007              	.L84:
 690:bluetooth_rxtx.c **** 
 691:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 692:bluetooth_rxtx.c **** 		clock_offset = 0;
 3008              		.loc 1 692 0
 3009 07e8 0023     		movs	r3, #0
 3010 07ea BB64     		str	r3, [r7, #72]
 693:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3011              		.loc 1 693 0
 3012 07ec 0023     		movs	r3, #0
 3013 07ee FB64     		str	r3, [r7, #76]
 3014 07f0 0DE0     		b	.L137
 3015              	.L138:
 694:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3016              		.loc 1 694 0 discriminator 3
 3017 07f2 BB6C     		ldr	r3, [r7, #72]
 3018 07f4 1B02     		lsls	r3, r3, #8
 3019 07f6 BB64     		str	r3, [r7, #72]
 695:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3020              		.loc 1 695 0 discriminator 3
ARM GAS  /tmp/cc6bdJLE.s 			page 65


 3021 07f8 FB6C     		ldr	r3, [r7, #76]
 3022 07fa 7A68     		ldr	r2, [r7, #4]
 3023 07fc 1344     		add	r3, r3, r2
 3024 07fe 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3025 0800 1A46     		mov	r2, r3
 3026 0802 BB6C     		ldr	r3, [r7, #72]
 3027 0804 1343     		orrs	r3, r3, r2
 3028 0806 BB64     		str	r3, [r7, #72]
 693:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3029              		.loc 1 693 0 discriminator 3
 3030 0808 FB6C     		ldr	r3, [r7, #76]
 3031 080a 0133     		adds	r3, r3, #1
 3032 080c FB64     		str	r3, [r7, #76]
 3033              	.L137:
 693:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3034              		.loc 1 693 0 is_stmt 0 discriminator 1
 3035 080e FB6C     		ldr	r3, [r7, #76]
 3036 0810 032B     		cmp	r3, #3
 3037 0812 EEDD     		ble	.L138
 696:bluetooth_rxtx.c **** 		}
 697:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3038              		.loc 1 697 0 is_stmt 1
 3039 0814 444B     		ldr	r3, .L155+16
 3040 0816 1A68     		ldr	r2, [r3]
 3041 0818 BB6C     		ldr	r3, [r7, #72]
 3042 081a 1344     		add	r3, r3, r2
 3043 081c 424A     		ldr	r2, .L155+16
 3044 081e 1360     		str	r3, [r2]
 698:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3045              		.loc 1 698 0
 3046 0820 424B     		ldr	r3, .L155+20
 3047 0822 0222     		movs	r2, #2
 3048 0824 1A70     		strb	r2, [r3]
 699:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3049              		.loc 1 699 0
 3050 0826 424B     		ldr	r3, .L155+24
 3051 0828 0822     		movs	r2, #8
 3052 082a 1A70     		strb	r2, [r3]
 700:bluetooth_rxtx.c **** 		break;
 3053              		.loc 1 700 0
 3054 082c 5DE1     		b	.L107
 3055              	.L85:
 701:bluetooth_rxtx.c **** 
 702:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 703:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3056              		.loc 1 703 0
 3057 082e 7B68     		ldr	r3, [r7, #4]
 3058 0830 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3059 0832 1A46     		mov	r2, r3
 3060 0834 7B68     		ldr	r3, [r7, #4]
 3061 0836 0133     		adds	r3, r3, #1
 3062 0838 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3063 083a 1B02     		lsls	r3, r3, #8
 3064 083c 1A43     		orrs	r2, r2, r3
 3065 083e 7B68     		ldr	r3, [r7, #4]
 3066 0840 0233     		adds	r3, r3, #2
 3067 0842 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cc6bdJLE.s 			page 66


 3068 0844 1B04     		lsls	r3, r3, #16
 3069 0846 1A43     		orrs	r2, r2, r3
 3070 0848 7B68     		ldr	r3, [r7, #4]
 3071 084a 0333     		adds	r3, r3, #3
 3072 084c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3073 084e 1B06     		lsls	r3, r3, #24
 3074 0850 1343     		orrs	r3, r3, r2
 3075 0852 FB63     		str	r3, [r7, #60]
 704:bluetooth_rxtx.c **** 		clkn = clock;
 3076              		.loc 1 704 0
 3077 0854 344A     		ldr	r2, .L155+16
 3078 0856 FB6B     		ldr	r3, [r7, #60]
 3079 0858 1360     		str	r3, [r2]
 705:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3080              		.loc 1 705 0
 3081 085a FFF7FEFF 		bl	cs_threshold_calc_and_set
 706:bluetooth_rxtx.c **** 		break;
 3082              		.loc 1 706 0
 3083 085e 44E1     		b	.L107
 3084              	.L96:
 707:bluetooth_rxtx.c **** 
 708:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 709:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3085              		.loc 1 709 0
 3086 0860 0023     		movs	r3, #0
 3087 0862 FB64     		str	r3, [r7, #76]
 3088 0864 0BE0     		b	.L139
 3089              	.L140:
 710:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3090              		.loc 1 710 0 discriminator 3
 3091 0866 FB6C     		ldr	r3, [r7, #76]
 3092 0868 7A68     		ldr	r2, [r7, #4]
 3093 086a 1344     		add	r3, r3, r2
 3094 086c 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3095 086e 314A     		ldr	r2, .L155+28
 3096 0870 FB6C     		ldr	r3, [r7, #76]
 3097 0872 1344     		add	r3, r3, r2
 3098 0874 0A46     		mov	r2, r1
 3099 0876 1A70     		strb	r2, [r3]
 709:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3100              		.loc 1 709 0 discriminator 3
 3101 0878 FB6C     		ldr	r3, [r7, #76]
 3102 087a 0133     		adds	r3, r3, #1
 3103 087c FB64     		str	r3, [r7, #76]
 3104              	.L139:
 709:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3105              		.loc 1 709 0 is_stmt 0 discriminator 1
 3106 087e FB6C     		ldr	r3, [r7, #76]
 3107 0880 092B     		cmp	r3, #9
 3108 0882 F0DD     		ble	.L140
 711:bluetooth_rxtx.c **** 		}
 712:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3109              		.loc 1 712 0 is_stmt 1
 3110 0884 2C4B     		ldr	r3, .L155+32
 3111 0886 0122     		movs	r2, #1
 3112 0888 1A70     		strb	r2, [r3]
 713:bluetooth_rxtx.c **** 		*data_len = 10;
ARM GAS  /tmp/cc6bdJLE.s 			page 67


 3113              		.loc 1 713 0
 3114 088a 3B68     		ldr	r3, [r7]
 3115 088c 0A22     		movs	r2, #10
 3116 088e 1A60     		str	r2, [r3]
 714:bluetooth_rxtx.c **** 		break;
 3117              		.loc 1 714 0
 3118 0890 2BE1     		b	.L107
 3119              	.L97:
 715:bluetooth_rxtx.c **** 
 716:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 717:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3120              		.loc 1 717 0
 3121 0892 0023     		movs	r3, #0
 3122 0894 FB64     		str	r3, [r7, #76]
 3123 0896 07E0     		b	.L141
 3124              	.L142:
 718:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3125              		.loc 1 718 0 discriminator 3
 3126 0898 264A     		ldr	r2, .L155+28
 3127 089a FB6C     		ldr	r3, [r7, #76]
 3128 089c 1344     		add	r3, r3, r2
 3129 089e 0022     		movs	r2, #0
 3130 08a0 1A70     		strb	r2, [r3]
 717:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3131              		.loc 1 717 0 discriminator 3
 3132 08a2 FB6C     		ldr	r3, [r7, #76]
 3133 08a4 0133     		adds	r3, r3, #1
 3134 08a6 FB64     		str	r3, [r7, #76]
 3135              	.L141:
 717:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3136              		.loc 1 717 0 is_stmt 0 discriminator 1
 3137 08a8 FB6C     		ldr	r3, [r7, #76]
 3138 08aa 092B     		cmp	r3, #9
 3139 08ac F4DD     		ble	.L142
 719:bluetooth_rxtx.c **** 		}
 720:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3140              		.loc 1 720 0 is_stmt 1
 3141 08ae 224B     		ldr	r3, .L155+32
 3142 08b0 0022     		movs	r2, #0
 3143 08b2 1A70     		strb	r2, [r3]
 721:bluetooth_rxtx.c **** 		*data_len = 10;
 3144              		.loc 1 721 0
 3145 08b4 3B68     		ldr	r3, [r7]
 3146 08b6 0A22     		movs	r2, #10
 3147 08b8 1A60     		str	r2, [r3]
 722:bluetooth_rxtx.c **** 		break;
 3148              		.loc 1 722 0
 3149 08ba 16E1     		b	.L107
 3150              	.L86:
 723:bluetooth_rxtx.c **** 
 724:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 725:bluetooth_rxtx.c **** 		clock = clkn;
 3151              		.loc 1 725 0
 3152 08bc 1A4B     		ldr	r3, .L155+16
 3153 08be 1B68     		ldr	r3, [r3]
 3154 08c0 FB63     		str	r3, [r7, #60]
 726:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
ARM GAS  /tmp/cc6bdJLE.s 			page 68


 3155              		.loc 1 726 0
 3156 08c2 0023     		movs	r3, #0
 3157 08c4 FB64     		str	r3, [r7, #76]
 3158 08c6 0CE0     		b	.L143
 3159              	.L144:
 727:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3160              		.loc 1 727 0 discriminator 3
 3161 08c8 FB6C     		ldr	r3, [r7, #76]
 3162 08ca 7A68     		ldr	r2, [r7, #4]
 3163 08cc 1344     		add	r3, r3, r2
 3164 08ce FA6C     		ldr	r2, [r7, #76]
 3165 08d0 D200     		lsls	r2, r2, #3
 3166 08d2 F96B     		ldr	r1, [r7, #60]
 3167 08d4 21FA02F2 		lsr	r2, r1, r2
 3168 08d8 D2B2     		uxtb	r2, r2
 3169 08da 1A70     		strb	r2, [r3]
 726:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3170              		.loc 1 726 0 discriminator 3
 3171 08dc FB6C     		ldr	r3, [r7, #76]
 3172 08de 0133     		adds	r3, r3, #1
 3173 08e0 FB64     		str	r3, [r7, #76]
 3174              	.L143:
 726:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3175              		.loc 1 726 0 is_stmt 0 discriminator 1
 3176 08e2 FB6C     		ldr	r3, [r7, #76]
 3177 08e4 032B     		cmp	r3, #3
 3178 08e6 EFDD     		ble	.L144
 728:bluetooth_rxtx.c **** 		}
 729:bluetooth_rxtx.c **** 		*data_len = 4;
 3179              		.loc 1 729 0 is_stmt 1
 3180 08e8 3B68     		ldr	r3, [r7]
 3181 08ea 0422     		movs	r2, #4
 3182 08ec 1A60     		str	r2, [r3]
 730:bluetooth_rxtx.c **** 		break;
 3183              		.loc 1 730 0
 3184 08ee FCE0     		b	.L107
 3185              	.L87:
 731:bluetooth_rxtx.c **** 
 732:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 733:bluetooth_rxtx.c **** 		*data_len = 0;
 3186              		.loc 1 733 0
 3187 08f0 3B68     		ldr	r3, [r7]
 3188 08f2 0022     		movs	r2, #0
 3189 08f4 1A60     		str	r2, [r3]
 734:bluetooth_rxtx.c **** 
 735:bluetooth_rxtx.c **** 		do_hop = 0;
 3190              		.loc 1 735 0
 3191 08f6 114B     		ldr	r3, .L155+36
 3192 08f8 0022     		movs	r2, #0
 3193 08fa 1A70     		strb	r2, [r3]
 736:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3194              		.loc 1 736 0
 3195 08fc 0B4B     		ldr	r3, .L155+20
 3196 08fe 0322     		movs	r2, #3
 3197 0900 1A70     		strb	r2, [r3]
 737:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3198              		.loc 1 737 0
ARM GAS  /tmp/cc6bdJLE.s 			page 69


 3199 0902 0B4B     		ldr	r3, .L155+24
 3200 0904 0922     		movs	r2, #9
 3201 0906 1A70     		strb	r2, [r3]
 738:bluetooth_rxtx.c **** 
 739:bluetooth_rxtx.c **** 		queue_init();
 3202              		.loc 1 739 0
 3203 0908 FFF7FEFF 		bl	queue_init
 740:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3204              		.loc 1 740 0
 3205 090c FFF7FEFF 		bl	cs_threshold_calc_and_set
 741:bluetooth_rxtx.c **** 		break;
 3206              		.loc 1 741 0
 3207 0910 EBE0     		b	.L107
 3208              	.L88:
 742:bluetooth_rxtx.c **** 
 743:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 744:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3209              		.loc 1 744 0
 3210 0912 0023     		movs	r3, #0
 3211 0914 FB64     		str	r3, [r7, #76]
 3212 0916 21E0     		b	.L145
 3213              	.L156:
 3214              		.align	2
 3215              	.L155:
 3216 0918 D4080000 		.word	.LC3
 3217 091c 00000000 		.word	compile_info
 3218 0920 00000000 		.word	cs_threshold_req
 3219 0924 00000000 		.word	target
 3220 0928 00000000 		.word	clkn
 3221 092c 00000000 		.word	hop_mode
 3222 0930 00000000 		.word	requested_mode
 3223 0934 00000000 		.word	afh_map
 3224 0938 00000000 		.word	afh_enabled
 3225 093c 00000000 		.word	do_hop
 3226              	.L146:
 745:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3227              		.loc 1 745 0 discriminator 3
 3228 0940 FB6C     		ldr	r3, [r7, #76]
 3229 0942 7A68     		ldr	r2, [r7, #4]
 3230 0944 1344     		add	r3, r3, r2
 3231 0946 6C4A     		ldr	r2, .L157
 3232 0948 1168     		ldr	r1, [r2]
 3233 094a FA6C     		ldr	r2, [r7, #76]
 3234 094c D200     		lsls	r2, r2, #3
 3235 094e 21FA02F2 		lsr	r2, r1, r2
 3236 0952 D2B2     		uxtb	r2, r2
 3237 0954 1A70     		strb	r2, [r3]
 744:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3238              		.loc 1 744 0 discriminator 3
 3239 0956 FB6C     		ldr	r3, [r7, #76]
 3240 0958 0133     		adds	r3, r3, #1
 3241 095a FB64     		str	r3, [r7, #76]
 3242              	.L145:
 744:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3243              		.loc 1 744 0 is_stmt 0 discriminator 1
 3244 095c FB6C     		ldr	r3, [r7, #76]
 3245 095e 032B     		cmp	r3, #3
ARM GAS  /tmp/cc6bdJLE.s 			page 70


 3246 0960 EEDD     		ble	.L146
 746:bluetooth_rxtx.c **** 		}
 747:bluetooth_rxtx.c **** 		*data_len = 4;
 3247              		.loc 1 747 0 is_stmt 1
 3248 0962 3B68     		ldr	r3, [r7]
 3249 0964 0422     		movs	r2, #4
 3250 0966 1A60     		str	r2, [r3]
 748:bluetooth_rxtx.c **** 		break;
 3251              		.loc 1 748 0
 3252 0968 BFE0     		b	.L107
 3253              	.L89:
 749:bluetooth_rxtx.c **** 
 750:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 751:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3254              		.loc 1 751 0
 3255 096a 7B68     		ldr	r3, [r7, #4]
 3256 096c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3257 096e 1A46     		mov	r2, r3
 3258 0970 7B68     		ldr	r3, [r7, #4]
 3259 0972 0133     		adds	r3, r3, #1
 3260 0974 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3261 0976 1B02     		lsls	r3, r3, #8
 3262 0978 1A43     		orrs	r2, r2, r3
 3263 097a 7B68     		ldr	r3, [r7, #4]
 3264 097c 0233     		adds	r3, r3, #2
 3265 097e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3266 0980 1B04     		lsls	r3, r3, #16
 3267 0982 1A43     		orrs	r2, r2, r3
 3268 0984 7B68     		ldr	r3, [r7, #4]
 3269 0986 0333     		adds	r3, r3, #3
 3270 0988 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3271 098a 1B06     		lsls	r3, r3, #24
 3272 098c 1343     		orrs	r3, r3, r2
 3273 098e 1846     		mov	r0, r3
 3274 0990 FFF7FEFF 		bl	le_set_access_address
 752:bluetooth_rxtx.c **** 		le.target_set = 1;
 3275              		.loc 1 752 0
 3276 0994 584B     		ldr	r3, .L157
 3277 0996 0122     		movs	r2, #1
 3278 0998 DA63     		str	r2, [r3, #60]
 753:bluetooth_rxtx.c **** 		break;
 3279              		.loc 1 753 0
 3280 099a A6E0     		b	.L107
 3281              	.L91:
 754:bluetooth_rxtx.c **** 
 755:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 756:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 757:bluetooth_rxtx.c **** 		break;
 758:bluetooth_rxtx.c **** 
 759:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 760:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 761:bluetooth_rxtx.c **** 		// don't commit here please
 762:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3282              		.loc 1 762 0
 3283 099c 7B68     		ldr	r3, [r7, #4]
 3284 099e 1322     		movs	r2, #19
 3285 09a0 1A70     		strb	r2, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 71


 763:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3286              		.loc 1 763 0
 3287 09a2 7B68     		ldr	r3, [r7, #4]
 3288 09a4 0133     		adds	r3, r3, #1
 3289 09a6 3722     		movs	r2, #55
 3290 09a8 1A70     		strb	r2, [r3]
 764:bluetooth_rxtx.c **** 		*data_len = 2;
 3291              		.loc 1 764 0
 3292 09aa 3B68     		ldr	r3, [r7]
 3293 09ac 0222     		movs	r2, #2
 3294 09ae 1A60     		str	r2, [r3]
 765:bluetooth_rxtx.c **** 		break;
 3295              		.loc 1 765 0
 3296 09b0 9BE0     		b	.L107
 3297              	.L92:
 766:bluetooth_rxtx.c **** 
 767:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 768:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3298              		.loc 1 768 0
 3299 09b2 514B     		ldr	r3, .L157
 3300 09b4 1B69     		ldr	r3, [r3, #16]
 3301 09b6 002B     		cmp	r3, #0
 3302 09b8 14BF     		ite	ne
 3303 09ba 0123     		movne	r3, #1
 3304 09bc 0023     		moveq	r3, #0
 3305 09be DBB2     		uxtb	r3, r3
 3306 09c0 1A46     		mov	r2, r3
 3307 09c2 7B68     		ldr	r3, [r7, #4]
 3308 09c4 1A70     		strb	r2, [r3]
 769:bluetooth_rxtx.c **** 		*data_len = 1;
 3309              		.loc 1 769 0
 3310 09c6 3B68     		ldr	r3, [r7]
 3311 09c8 0122     		movs	r2, #1
 3312 09ca 1A60     		str	r2, [r3]
 770:bluetooth_rxtx.c **** 		break;
 3313              		.loc 1 770 0
 3314 09cc 8DE0     		b	.L107
 3315              	.L93:
 771:bluetooth_rxtx.c **** 
 772:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 773:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3316              		.loc 1 773 0
 3317 09ce BB68     		ldr	r3, [r7, #8]
 3318 09d0 1B88     		ldrh	r3, [r3]
 3319 09d2 002B     		cmp	r3, #0
 3320 09d4 14BF     		ite	ne
 3321 09d6 0123     		movne	r3, #1
 3322 09d8 0023     		moveq	r3, #0
 3323 09da DBB2     		uxtb	r3, r3
 3324 09dc 1A46     		mov	r2, r3
 3325 09de 464B     		ldr	r3, .L157
 3326 09e0 1A61     		str	r2, [r3, #16]
 774:bluetooth_rxtx.c **** 		break;
 3327              		.loc 1 774 0
 3328 09e2 82E0     		b	.L107
 3329              	.L94:
 775:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 72


 776:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 777:bluetooth_rxtx.c **** 		p = dequeue();
 3330              		.loc 1 777 0
 3331 09e4 FFF7FEFF 		bl	dequeue
 3332 09e8 7864     		str	r0, [r7, #68]
 778:bluetooth_rxtx.c **** 		if (p != NULL) {
 3333              		.loc 1 778 0
 3334 09ea 7B6C     		ldr	r3, [r7, #68]
 3335 09ec 002B     		cmp	r3, #0
 3336 09ee 08D0     		beq	.L147
 779:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3337              		.loc 1 779 0
 3338 09f0 7868     		ldr	r0, [r7, #4]
 3339 09f2 796C     		ldr	r1, [r7, #68]
 3340 09f4 4022     		movs	r2, #64
 3341 09f6 FFF7FEFF 		bl	memcpy
 780:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3342              		.loc 1 780 0
 3343 09fa 3B68     		ldr	r3, [r7]
 3344 09fc 4022     		movs	r2, #64
 3345 09fe 1A60     		str	r2, [r3]
 781:bluetooth_rxtx.c **** 		} else {
 782:bluetooth_rxtx.c **** 			data[0] = 0;
 783:bluetooth_rxtx.c **** 			*data_len = 1;
 784:bluetooth_rxtx.c **** 		}
 785:bluetooth_rxtx.c **** 		break;
 3346              		.loc 1 785 0
 3347 0a00 73E0     		b	.L107
 3348              	.L147:
 782:bluetooth_rxtx.c **** 			*data_len = 1;
 3349              		.loc 1 782 0
 3350 0a02 7B68     		ldr	r3, [r7, #4]
 3351 0a04 0022     		movs	r2, #0
 3352 0a06 1A70     		strb	r2, [r3]
 783:bluetooth_rxtx.c **** 		}
 3353              		.loc 1 783 0
 3354 0a08 3B68     		ldr	r3, [r7]
 3355 0a0a 0122     		movs	r2, #1
 3356 0a0c 1A60     		str	r2, [r3]
 3357              		.loc 1 785 0
 3358 0a0e 6CE0     		b	.L107
 3359              	.L95:
 786:bluetooth_rxtx.c **** 
 787:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 788:bluetooth_rxtx.c **** 		*data_len = 0;
 3360              		.loc 1 788 0
 3361 0a10 3B68     		ldr	r3, [r7]
 3362 0a12 0022     		movs	r2, #0
 3363 0a14 1A60     		str	r2, [r3]
 789:bluetooth_rxtx.c **** 
 790:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3364              		.loc 1 790 0
 3365 0a16 394B     		ldr	r3, .L157+4
 3366 0a18 0022     		movs	r2, #0
 3367 0a1a 1A70     		strb	r2, [r3]
 791:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3368              		.loc 1 791 0
ARM GAS  /tmp/cc6bdJLE.s 			page 73


 3369 0a1c 384B     		ldr	r3, .L157+8
 3370 0a1e 0A22     		movs	r2, #10
 3371 0a20 1A70     		strb	r2, [r3]
 792:bluetooth_rxtx.c **** 
 793:bluetooth_rxtx.c **** 		queue_init();
 3372              		.loc 1 793 0
 3373 0a22 FFF7FEFF 		bl	queue_init
 794:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3374              		.loc 1 794 0
 3375 0a26 FFF7FEFF 		bl	cs_threshold_calc_and_set
 795:bluetooth_rxtx.c **** 		break;
 3376              		.loc 1 795 0
 3377 0a2a 5EE0     		b	.L107
 3378              	.L98:
 796:bluetooth_rxtx.c **** 
 797:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 798:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3379              		.loc 1 798 0
 3380 0a2c BB68     		ldr	r3, [r7, #8]
 3381 0a2e 1B88     		ldrh	r3, [r3]
 3382 0a30 DBB2     		uxtb	r3, r3
 3383 0a32 1846     		mov	r0, r3
 3384 0a34 FFF7FEFF 		bl	cc2400_get
 3385 0a38 0346     		mov	r3, r0
 3386 0a3a 7B87     		strh	r3, [r7, #58]	@ movhi
 799:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3387              		.loc 1 799 0
 3388 0a3c 7B8F     		ldrh	r3, [r7, #58]
 3389 0a3e 1B0A     		lsrs	r3, r3, #8
 3390 0a40 9BB2     		uxth	r3, r3
 3391 0a42 DAB2     		uxtb	r2, r3
 3392 0a44 7B68     		ldr	r3, [r7, #4]
 3393 0a46 1A70     		strb	r2, [r3]
 800:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3394              		.loc 1 800 0
 3395 0a48 7B68     		ldr	r3, [r7, #4]
 3396 0a4a 0133     		adds	r3, r3, #1
 3397 0a4c 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3398 0a4e D2B2     		uxtb	r2, r2
 3399 0a50 1A70     		strb	r2, [r3]
 801:bluetooth_rxtx.c **** 		*data_len = 2;
 3400              		.loc 1 801 0
 3401 0a52 3B68     		ldr	r3, [r7]
 3402 0a54 0222     		movs	r2, #2
 3403 0a56 1A60     		str	r2, [r3]
 802:bluetooth_rxtx.c **** 		break;
 3404              		.loc 1 802 0
 3405 0a58 47E0     		b	.L107
 3406              	.L102:
 803:bluetooth_rxtx.c **** 
 804:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 805:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3407              		.loc 1 805 0
 3408 0a5a BB68     		ldr	r3, [r7, #8]
 3409 0a5c 1B88     		ldrh	r3, [r3]
 3410 0a5e DAB2     		uxtb	r2, r3
 3411 0a60 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/cc6bdJLE.s 			page 74


 3412 0a62 0233     		adds	r3, r3, #2
 3413 0a64 1B88     		ldrh	r3, [r3]
 3414 0a66 1046     		mov	r0, r2
 3415 0a68 1946     		mov	r1, r3
 3416 0a6a FFF7FEFF 		bl	cc2400_set
 806:bluetooth_rxtx.c **** 		break;
 3417              		.loc 1 806 0
 3418 0a6e 3CE0     		b	.L107
 3419              	.L99:
 807:bluetooth_rxtx.c **** 
 808:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 809:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3420              		.loc 1 809 0
 3421 0a70 2448     		ldr	r0, .L157+12
 3422 0a72 7968     		ldr	r1, [r7, #4]
 3423 0a74 0622     		movs	r2, #6
 3424 0a76 FFF7FEFF 		bl	memcpy
 810:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3425              		.loc 1 810 0
 3426 0a7a 214B     		ldr	r3, .L157+8
 3427 0a7c 0C22     		movs	r2, #12
 3428 0a7e 1A70     		strb	r2, [r3]
 811:bluetooth_rxtx.c **** 		break;
 3429              		.loc 1 811 0
 3430 0a80 33E0     		b	.L107
 3431              	.L101:
 812:bluetooth_rxtx.c **** 
 813:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 814:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 815:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 816:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3432              		.loc 1 816 0
 3433 0a82 7B68     		ldr	r3, [r7, #4]
 3434 0a84 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3435 0a86 1C4B     		ldr	r3, .L157
 3436 0a88 83F83420 		strb	r2, [r3, #52]
 817:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3437              		.loc 1 817 0
 3438 0a8c 7B68     		ldr	r3, [r7, #4]
 3439 0a8e 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3440 0a90 194B     		ldr	r3, .L157
 3441 0a92 83F83520 		strb	r2, [r3, #53]
 818:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3442              		.loc 1 818 0
 3443 0a96 7B68     		ldr	r3, [r7, #4]
 3444 0a98 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3445 0a9a 174B     		ldr	r3, .L157
 3446 0a9c 83F83620 		strb	r2, [r3, #54]
 819:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3447              		.loc 1 819 0
 3448 0aa0 7B68     		ldr	r3, [r7, #4]
 3449 0aa2 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3450 0aa4 144B     		ldr	r3, .L157
 3451 0aa6 83F83720 		strb	r2, [r3, #55]
 820:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3452              		.loc 1 820 0
 3453 0aaa 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/cc6bdJLE.s 			page 75


 3454 0aac 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3455 0aae 124B     		ldr	r3, .L157
 3456 0ab0 83F83820 		strb	r2, [r3, #56]
 821:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3457              		.loc 1 821 0
 3458 0ab4 7B68     		ldr	r3, [r7, #4]
 3459 0ab6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3460 0ab8 0F4B     		ldr	r3, .L157
 3461 0aba 83F83920 		strb	r2, [r3, #57]
 822:bluetooth_rxtx.c **** 		le.target_set = 1;
 3462              		.loc 1 822 0
 3463 0abe 0E4B     		ldr	r3, .L157
 3464 0ac0 0122     		movs	r2, #1
 3465 0ac2 DA63     		str	r2, [r3, #60]
 823:bluetooth_rxtx.c **** 		break;
 3466              		.loc 1 823 0
 3467 0ac4 11E0     		b	.L107
 3468              	.L103:
 824:bluetooth_rxtx.c **** 
 825:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 826:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 827:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3469              		.loc 1 827 0
 3470 0ac6 BB68     		ldr	r3, [r7, #8]
 3471 0ac8 1B88     		ldrh	r3, [r3]
 3472 0aca DAB2     		uxtb	r2, r3
 3473 0acc 0E4B     		ldr	r3, .L157+16
 3474 0ace 1A70     		strb	r2, [r3]
 828:bluetooth_rxtx.c **** 		break;
 3475              		.loc 1 828 0
 3476 0ad0 0BE0     		b	.L107
 3477              	.L104:
 829:bluetooth_rxtx.c **** #endif
 830:bluetooth_rxtx.c **** 
 831:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 832:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 833:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 834:bluetooth_rxtx.c **** 			return 0;
 835:bluetooth_rxtx.c **** #endif
 836:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3478              		.loc 1 836 0
 3479 0ad2 0B4B     		ldr	r3, .L157+8
 3480 0ad4 0D22     		movs	r2, #13
 3481 0ad6 1A70     		strb	r2, [r3]
 837:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3482              		.loc 1 837 0
 3483 0ad8 BB68     		ldr	r3, [r7, #8]
 3484 0ada 1B88     		ldrh	r3, [r3]
 3485 0adc DAB2     		uxtb	r2, r3
 3486 0ade 0B4B     		ldr	r3, .L157+20
 3487 0ae0 1A70     		strb	r2, [r3]
 838:bluetooth_rxtx.c **** 		break;
 3488              		.loc 1 838 0
 3489 0ae2 02E0     		b	.L107
 3490              	.L45:
 839:bluetooth_rxtx.c **** 
 840:bluetooth_rxtx.c **** 	default:
ARM GAS  /tmp/cc6bdJLE.s 			page 76


 841:bluetooth_rxtx.c **** 		return 0;
 3491              		.loc 1 841 0
 3492 0ae4 0023     		movs	r3, #0
 3493 0ae6 01E0     		b	.L149
 3494              	.L150:
 757:bluetooth_rxtx.c **** 
 3495              		.loc 1 757 0
 3496 0ae8 00BF     		nop
 3497              	.L107:
 842:bluetooth_rxtx.c **** 	}
 843:bluetooth_rxtx.c **** 	return 1;
 3498              		.loc 1 843 0
 3499 0aea 0123     		movs	r3, #1
 3500              	.L149:
 844:bluetooth_rxtx.c **** }
 3501              		.loc 1 844 0 discriminator 1
 3502 0aec 1846     		mov	r0, r3
 3503 0aee 5437     		adds	r7, r7, #84
 3504              		.cfi_def_cfa_offset 36
 3505 0af0 BD46     		mov	sp, r7
 3506              		.cfi_def_cfa_register 13
 3507              		@ sp needed
 3508 0af2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3509              	.L158:
 3510 0af6 00BF     		.align	2
 3511              	.L157:
 3512 0af8 00000000 		.word	le
 3513 0afc 00000000 		.word	hop_mode
 3514 0b00 00000000 		.word	requested_mode
 3515 0b04 00000000 		.word	slave_mac_address
 3516 0b08 00000000 		.word	jam_mode
 3517 0b0c 00000000 		.word	ego_mode
 3518              		.cfi_endproc
 3519              	.LFE9:
 3521              		.section	.text.clkn_init,"ax",%progbits
 3522              		.align	2
 3523              		.thumb
 3524              		.thumb_func
 3526              	clkn_init:
 3527              	.LFB10:
 845:bluetooth_rxtx.c **** 
 846:bluetooth_rxtx.c **** static void clkn_init()
 847:bluetooth_rxtx.c **** {
 3528              		.loc 1 847 0
 3529              		.cfi_startproc
 3530              		@ args = 0, pretend = 0, frame = 0
 3531              		@ frame_needed = 1, uses_anonymous_args = 0
 3532              		@ link register save eliminated.
 3533 0000 80B4     		push	{r7}
 3534              		.cfi_def_cfa_offset 4
 3535              		.cfi_offset 7, -4
 3536 0002 00AF     		add	r7, sp, #0
 3537              		.cfi_def_cfa_register 7
 848:bluetooth_rxtx.c **** 	/*
 849:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 850:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 851:bluetooth_rxtx.c **** 	 * clock_start().
ARM GAS  /tmp/cc6bdJLE.s 			page 77


 852:bluetooth_rxtx.c **** 	 */
 853:bluetooth_rxtx.c **** 
 854:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 855:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3538              		.loc 1 855 0
 3539 0004 0C4B     		ldr	r3, .L160
 3540 0006 0222     		movs	r2, #2
 3541 0008 1A60     		str	r2, [r3]
 856:bluetooth_rxtx.c **** 	clkn = 0;
 3542              		.loc 1 856 0
 3543 000a 0C4B     		ldr	r3, .L160+4
 3544 000c 0022     		movs	r2, #0
 3545 000e 1A60     		str	r2, [r3]
 857:bluetooth_rxtx.c **** 
 858:bluetooth_rxtx.c **** #ifdef TC13BADGE
 859:bluetooth_rxtx.c **** 	/*
 860:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 861:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 862:bluetooth_rxtx.c **** 	 */
 863:bluetooth_rxtx.c **** 	T0PR = 2;
 864:bluetooth_rxtx.c **** #else
 865:bluetooth_rxtx.c **** 	/*
 866:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 867:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 868:bluetooth_rxtx.c **** 	 */
 869:bluetooth_rxtx.c **** 	T0PR = 4;
 3546              		.loc 1 869 0
 3547 0010 0B4B     		ldr	r3, .L160+8
 3548 0012 0422     		movs	r2, #4
 3549 0014 1A60     		str	r2, [r3]
 870:bluetooth_rxtx.c **** #endif
 871:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 872:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3550              		.loc 1 872 0
 3551 0016 0B4B     		ldr	r3, .L160+12
 3552 0018 40F63442 		movw	r2, #3124
 3553 001c 1A60     		str	r2, [r3]
 873:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3554              		.loc 1 873 0
 3555 001e 0A4B     		ldr	r3, .L160+16
 3556 0020 0322     		movs	r2, #3
 3557 0022 1A60     		str	r2, [r3]
 874:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3558              		.loc 1 874 0
 3559 0024 094B     		ldr	r3, .L160+20
 3560 0026 0222     		movs	r2, #2
 3561 0028 1A60     		str	r2, [r3]
 875:bluetooth_rxtx.c **** 
 876:bluetooth_rxtx.c **** 	/* start timer */
 877:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3562              		.loc 1 877 0
 3563 002a 034B     		ldr	r3, .L160
 3564 002c 0122     		movs	r2, #1
 3565 002e 1A60     		str	r2, [r3]
 878:bluetooth_rxtx.c **** }
 3566              		.loc 1 878 0
 3567 0030 BD46     		mov	sp, r7
ARM GAS  /tmp/cc6bdJLE.s 			page 78


 3568              		.cfi_def_cfa_register 13
 3569              		@ sp needed
 3570 0032 5DF8047B 		ldr	r7, [sp], #4
 3571              		.cfi_restore 7
 3572              		.cfi_def_cfa_offset 0
 3573 0036 7047     		bx	lr
 3574              	.L161:
 3575              		.align	2
 3576              	.L160:
 3577 0038 04400040 		.word	1073758212
 3578 003c 00000000 		.word	clkn
 3579 0040 0C400040 		.word	1073758220
 3580 0044 18400040 		.word	1073758232
 3581 0048 14400040 		.word	1073758228
 3582 004c 00E100E0 		.word	-536813312
 3583              		.cfi_endproc
 3584              	.LFE10:
 3586              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3587              		.align	2
 3588              		.global	TIMER0_IRQHandler
 3589              		.thumb
 3590              		.thumb_func
 3592              	TIMER0_IRQHandler:
 3593              	.LFB11:
 879:bluetooth_rxtx.c **** 
 880:bluetooth_rxtx.c **** /* Update CLKN. */
 881:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 882:bluetooth_rxtx.c **** {
 3594              		.loc 1 882 0
 3595              		.cfi_startproc
 3596              		@ args = 0, pretend = 0, frame = 8
 3597              		@ frame_needed = 1, uses_anonymous_args = 0
 3598              		@ link register save eliminated.
 3599 0000 80B4     		push	{r7}
 3600              		.cfi_def_cfa_offset 4
 3601              		.cfi_offset 7, -4
 3602 0002 83B0     		sub	sp, sp, #12
 3603              		.cfi_def_cfa_offset 16
 3604 0004 00AF     		add	r7, sp, #0
 3605              		.cfi_def_cfa_register 7
 883:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
 884:bluetooth_rxtx.c **** 	u32 next;
 885:bluetooth_rxtx.c **** 	u32 le_clk;
 886:bluetooth_rxtx.c **** 
 887:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3606              		.loc 1 887 0
 3607 0006 4FF04023 		mov	r3, #1073758208
 3608 000a 1B68     		ldr	r3, [r3]
 3609 000c 03F00103 		and	r3, r3, #1
 3610 0010 002B     		cmp	r3, #0
 3611 0012 6DD0     		beq	.L162
 888:bluetooth_rxtx.c **** 
 889:bluetooth_rxtx.c **** 		clkn++;
 3612              		.loc 1 889 0
 3613 0014 394B     		ldr	r3, .L172
 3614 0016 1B68     		ldr	r3, [r3]
 3615 0018 0133     		adds	r3, r3, #1
ARM GAS  /tmp/cc6bdJLE.s 			page 79


 3616 001a 384A     		ldr	r2, .L172
 3617 001c 1360     		str	r3, [r2]
 890:bluetooth_rxtx.c **** 		next = clkn;
 3618              		.loc 1 890 0
 3619 001e 374B     		ldr	r3, .L172
 3620 0020 1B68     		ldr	r3, [r3]
 3621 0022 7B60     		str	r3, [r7, #4]
 891:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 3622              		.loc 1 891 0
 3623 0024 364B     		ldr	r3, .L172+4
 3624 0026 9B69     		ldr	r3, [r3, #24]
 3625 0028 7A68     		ldr	r2, [r7, #4]
 3626 002a D31A     		subs	r3, r2, r3
 3627 002c 03F00303 		and	r3, r3, #3
 3628 0030 3B60     		str	r3, [r7]
 892:bluetooth_rxtx.c **** 
 893:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 894:bluetooth_rxtx.c **** 
 895:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 896:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 3629              		.loc 1 896 0
 3630 0032 344B     		ldr	r3, .L172+8
 3631 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3632 0036 002B     		cmp	r3, #0
 3633 0038 03D0     		beq	.L164
 3634              		.loc 1 896 0 is_stmt 0 discriminator 1
 3635 003a 324B     		ldr	r3, .L172+8
 3636 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3637 003e 012B     		cmp	r3, #1
 3638 0040 09D1     		bne	.L165
 3639              	.L164:
 897:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3640              		.loc 1 897 0 is_stmt 1
 3641 0042 7B68     		ldr	r3, [r7, #4]
 3642 0044 03F07F03 		and	r3, r3, #127
 3643 0048 002B     		cmp	r3, #0
 3644 004a 03D1     		bne	.L166
 898:bluetooth_rxtx.c **** 				do_hop = 1;
 3645              		.loc 1 898 0
 3646 004c 2E4B     		ldr	r3, .L172+12
 3647 004e 0122     		movs	r2, #1
 3648 0050 1A70     		strb	r2, [r3]
 897:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3649              		.loc 1 897 0
 3650 0052 37E0     		b	.L167
 3651              	.L166:
 3652 0054 36E0     		b	.L167
 3653              	.L165:
 899:bluetooth_rxtx.c **** 		}
 900:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 901:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 3654              		.loc 1 901 0
 3655 0056 2B4B     		ldr	r3, .L172+8
 3656 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3657 005a 022B     		cmp	r3, #2
 3658 005c 08D1     		bne	.L168
 902:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
ARM GAS  /tmp/cc6bdJLE.s 			page 80


 3659              		.loc 1 902 0
 3660 005e 7B68     		ldr	r3, [r7, #4]
 3661 0060 03F00103 		and	r3, r3, #1
 3662 0064 002B     		cmp	r3, #0
 3663 0066 2DD1     		bne	.L167
 903:bluetooth_rxtx.c **** 				do_hop = 1;
 3664              		.loc 1 903 0
 3665 0068 274B     		ldr	r3, .L172+12
 3666 006a 0122     		movs	r2, #1
 3667 006c 1A70     		strb	r2, [r3]
 3668 006e 29E0     		b	.L167
 3669              	.L168:
 904:bluetooth_rxtx.c **** 		}
 905:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 906:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 3670              		.loc 1 906 0
 3671 0070 244B     		ldr	r3, .L172+8
 3672 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3673 0074 032B     		cmp	r3, #3
 3674 0076 25D1     		bne	.L167
 907:bluetooth_rxtx.c **** 			// Only hop if connected
 908:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 3675              		.loc 1 908 0
 3676 0078 214B     		ldr	r3, .L172+4
 3677 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3678 007c 032B     		cmp	r3, #3
 3679 007e 21D1     		bne	.L167
 3680              		.loc 1 908 0 is_stmt 0 discriminator 1
 3681 0080 3B68     		ldr	r3, [r7]
 3682 0082 002B     		cmp	r3, #0
 3683 0084 1ED1     		bne	.L167
 909:bluetooth_rxtx.c **** 				--le.interval_timer;
 3684              		.loc 1 909 0 is_stmt 1
 3685 0086 1E4B     		ldr	r3, .L172+4
 3686 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3687 008a 9BB2     		uxth	r3, r3
 3688 008c 013B     		subs	r3, r3, #1
 3689 008e 9AB2     		uxth	r2, r3
 3690 0090 1B4B     		ldr	r3, .L172+4
 3691 0092 9A83     		strh	r2, [r3, #28]	@ movhi
 910:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3692              		.loc 1 910 0
 3693 0094 1A4B     		ldr	r3, .L172+4
 3694 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3695 0098 9BB2     		uxth	r3, r3
 3696 009a 002B     		cmp	r3, #0
 3697 009c 0ED1     		bne	.L170
 911:bluetooth_rxtx.c **** 					do_hop = 1;
 3698              		.loc 1 911 0
 3699 009e 1A4B     		ldr	r3, .L172+12
 3700 00a0 0122     		movs	r2, #1
 3701 00a2 1A70     		strb	r2, [r3]
 912:bluetooth_rxtx.c **** 					++le.conn_count;
 3702              		.loc 1 912 0
 3703 00a4 164B     		ldr	r3, .L172+4
 3704 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 3705 00a8 9BB2     		uxth	r3, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 81


 3706 00aa 0133     		adds	r3, r3, #1
 3707 00ac 9AB2     		uxth	r2, r3
 3708 00ae 144B     		ldr	r3, .L172+4
 3709 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
 913:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3710              		.loc 1 913 0
 3711 00b2 134B     		ldr	r3, .L172+4
 3712 00b4 DA8B     		ldrh	r2, [r3, #30]
 3713 00b6 124B     		ldr	r3, .L172+4
 3714 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 3715 00ba 03E0     		b	.L167
 3716              	.L170:
 914:bluetooth_rxtx.c **** 				} else {
 915:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 3717              		.loc 1 915 0
 3718 00bc 134B     		ldr	r3, .L172+16
 3719 00be 4FF48072 		mov	r2, #256
 3720 00c2 1A60     		str	r2, [r3]
 3721              	.L167:
 916:bluetooth_rxtx.c **** 				}
 917:bluetooth_rxtx.c **** 			}
 918:bluetooth_rxtx.c **** 		}
 919:bluetooth_rxtx.c **** 
 920:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
 921:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 3722              		.loc 1 921 0
 3723 00c4 7B68     		ldr	r3, [r7, #4]
 3724 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 3725 00ca 002B     		cmp	r3, #0
 3726 00cc 02D1     		bne	.L171
 922:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 3727              		.loc 1 922 0
 3728 00ce 104B     		ldr	r3, .L172+20
 3729 00d0 0122     		movs	r2, #1
 3730 00d2 1A70     		strb	r2, [r3]
 3731              	.L171:
 923:bluetooth_rxtx.c **** 
 924:bluetooth_rxtx.c **** 		/* Ack interrupt */
 925:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 3732              		.loc 1 925 0
 3733 00d4 0F4A     		ldr	r2, .L172+24
 3734 00d6 104B     		ldr	r3, .L172+28
 3735 00d8 1B68     		ldr	r3, [r3]
 3736 00da C3F54363 		rsb	r3, r3, #3120
 3737 00de 0433     		adds	r3, r3, #4
 3738 00e0 1360     		str	r3, [r2]
 926:bluetooth_rxtx.c **** 		clock_trim = 0;
 3739              		.loc 1 926 0
 3740 00e2 0D4B     		ldr	r3, .L172+28
 3741 00e4 0022     		movs	r2, #0
 3742 00e6 1A60     		str	r2, [r3]
 927:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 3743              		.loc 1 927 0
 3744 00e8 4FF04023 		mov	r3, #1073758208
 3745 00ec 0122     		movs	r2, #1
 3746 00ee 1A60     		str	r2, [r3]
 3747              	.L162:
ARM GAS  /tmp/cc6bdJLE.s 			page 82


 928:bluetooth_rxtx.c **** 	}
 929:bluetooth_rxtx.c **** }
 3748              		.loc 1 929 0
 3749 00f0 0C37     		adds	r7, r7, #12
 3750              		.cfi_def_cfa_offset 4
 3751 00f2 BD46     		mov	sp, r7
 3752              		.cfi_def_cfa_register 13
 3753              		@ sp needed
 3754 00f4 5DF8047B 		ldr	r7, [sp], #4
 3755              		.cfi_restore 7
 3756              		.cfi_def_cfa_offset 0
 3757 00f8 7047     		bx	lr
 3758              	.L173:
 3759 00fa 00BF     		.align	2
 3760              	.L172:
 3761 00fc 00000000 		.word	clkn
 3762 0100 00000000 		.word	le
 3763 0104 00000000 		.word	hop_mode
 3764 0108 00000000 		.word	do_hop
 3765 010c 3CC00920 		.word	537509948
 3766 0110 00000000 		.word	keepalive_trigger
 3767 0114 18400040 		.word	1073758232
 3768 0118 00000000 		.word	clock_trim
 3769              		.cfi_endproc
 3770              	.LFE11:
 3772              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3773              		.align	2
 3774              		.global	EINT3_IRQHandler
 3775              		.thumb
 3776              		.thumb_func
 3778              	EINT3_IRQHandler:
 3779              	.LFB12:
 930:bluetooth_rxtx.c **** 
 931:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 932:bluetooth_rxtx.c **** #ifndef TC13BADGE
 933:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 934:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 935:bluetooth_rxtx.c **** {
 3780              		.loc 1 935 0
 3781              		.cfi_startproc
 3782              		@ args = 0, pretend = 0, frame = 0
 3783              		@ frame_needed = 1, uses_anonymous_args = 0
 3784              		@ link register save eliminated.
 3785 0000 80B4     		push	{r7}
 3786              		.cfi_def_cfa_offset 4
 3787              		.cfi_offset 7, -4
 3788 0002 00AF     		add	r7, sp, #0
 3789              		.cfi_def_cfa_register 7
 936:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 937:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 3790              		.loc 1 937 0
 3791 0004 0B4B     		ldr	r3, .L175
 3792 0006 0422     		movs	r2, #4
 3793 0008 1A60     		str	r2, [r3]
 938:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 3794              		.loc 1 938 0
 3795 000a 0B4B     		ldr	r3, .L175+4
ARM GAS  /tmp/cc6bdJLE.s 			page 83


 3796 000c 0122     		movs	r2, #1
 3797 000e 1A70     		strb	r2, [r3]
 939:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 3798              		.loc 1 939 0
 3799 0010 0A4B     		ldr	r3, .L175+8
 3800 0012 1B68     		ldr	r3, [r3]
 3801 0014 C3F31303 		ubfx	r3, r3, #0, #20
 3802 0018 40F63542 		movw	r2, #3125
 3803 001c 02FB03F2 		mul	r2, r2, r3
 3804 0020 074B     		ldr	r3, .L175+12
 3805 0022 1B68     		ldr	r3, [r3]
 3806 0024 1344     		add	r3, r3, r2
 3807 0026 074A     		ldr	r2, .L175+16
 3808 0028 1360     		str	r3, [r2]
 940:bluetooth_rxtx.c **** }
 3809              		.loc 1 940 0
 3810 002a BD46     		mov	sp, r7
 3811              		.cfi_def_cfa_register 13
 3812              		@ sp needed
 3813 002c 5DF8047B 		ldr	r7, [sp], #4
 3814              		.cfi_restore 7
 3815              		.cfi_def_cfa_offset 0
 3816 0030 7047     		bx	lr
 3817              	.L176:
 3818 0032 00BF     		.align	2
 3819              	.L175:
 3820 0034 AC800240 		.word	1073905836
 3821 0038 00000000 		.word	cs_trigger
 3822 003c 00000000 		.word	clkn
 3823 0040 08400040 		.word	1073758216
 3824 0044 00000000 		.word	cs_timestamp
 3825              		.cfi_endproc
 3826              	.LFE12:
 3828              		.global	__aeabi_ui2d
 3829              		.global	__aeabi_dmul
 3830              		.global	__aeabi_ddiv
 3831              		.global	__aeabi_dadd
 3832              		.global	__aeabi_d2uiz
 3833              		.section	.text.msleep,"ax",%progbits
 3834              		.align	2
 3835              		.thumb
 3836              		.thumb_func
 3838              	msleep:
 3839              	.LFB13:
 941:bluetooth_rxtx.c **** #endif // TC13BADGE
 942:bluetooth_rxtx.c **** 
 943:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
 944:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 945:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 946:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 947:bluetooth_rxtx.c **** {
 3840              		.loc 1 947 0
 3841              		.cfi_startproc
 3842              		@ args = 0, pretend = 0, frame = 16
 3843              		@ frame_needed = 1, uses_anonymous_args = 0
 3844 0000 B0B5     		push	{r4, r5, r7, lr}
 3845              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/cc6bdJLE.s 			page 84


 3846              		.cfi_offset 4, -16
 3847              		.cfi_offset 5, -12
 3848              		.cfi_offset 7, -8
 3849              		.cfi_offset 14, -4
 3850 0002 84B0     		sub	sp, sp, #16
 3851              		.cfi_def_cfa_offset 32
 3852 0004 00AF     		add	r7, sp, #0
 3853              		.cfi_def_cfa_register 7
 3854 0006 7860     		str	r0, [r7, #4]
 948:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 3855              		.loc 1 948 0
 3856 0008 1B4B     		ldr	r3, .L179+8
 3857 000a 1B68     		ldr	r3, [r3]
 3858 000c 1846     		mov	r0, r3
 3859 000e FFF7FEFF 		bl	__aeabi_ui2d
 3860 0012 0446     		mov	r4, r0
 3861 0014 0D46     		mov	r5, r1
 3862 0016 7868     		ldr	r0, [r7, #4]
 3863 0018 FFF7FEFF 		bl	__aeabi_ui2d
 3864 001c 0246     		mov	r2, r0
 3865 001e 0B46     		mov	r3, r1
 3866 0020 1046     		mov	r0, r2
 3867 0022 1946     		mov	r1, r3
 3868 0024 12A3     		adr	r3, .L179
 3869 0026 D3E90023 		ldrd	r2, [r3]
 3870 002a FFF7FEFF 		bl	__aeabi_dmul
 3871 002e 0246     		mov	r2, r0
 3872 0030 0B46     		mov	r3, r1
 3873 0032 1046     		mov	r0, r2
 3874 0034 1946     		mov	r1, r3
 3875 0036 4FF00002 		mov	r2, #0
 3876 003a 104B     		ldr	r3, .L179+12
 3877 003c FFF7FEFF 		bl	__aeabi_ddiv
 3878 0040 0246     		mov	r2, r0
 3879 0042 0B46     		mov	r3, r1
 3880 0044 2046     		mov	r0, r4
 3881 0046 2946     		mov	r1, r5
 3882 0048 FFF7FEFF 		bl	__aeabi_dadd
 3883 004c 0246     		mov	r2, r0
 3884 004e 0B46     		mov	r3, r1
 3885 0050 1046     		mov	r0, r2
 3886 0052 1946     		mov	r1, r3
 3887 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 3888 0058 0346     		mov	r3, r0
 3889 005a FB60     		str	r3, [r7, #12]
 3890              	.L178:
 949:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 3891              		.loc 1 949 0 discriminator 1
 3892 005c 064B     		ldr	r3, .L179+8
 3893 005e 1A68     		ldr	r2, [r3]
 3894 0060 FB68     		ldr	r3, [r7, #12]
 3895 0062 9A42     		cmp	r2, r3
 3896 0064 FAD3     		bcc	.L178
 950:bluetooth_rxtx.c **** }
 3897              		.loc 1 950 0
 3898 0066 1037     		adds	r7, r7, #16
 3899              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/cc6bdJLE.s 			page 85


 3900 0068 BD46     		mov	sp, r7
 3901              		.cfi_def_cfa_register 13
 3902              		@ sp needed
 3903 006a B0BD     		pop	{r4, r5, r7, pc}
 3904              	.L180:
 3905 006c AFF30080 		.align	3
 3906              	.L179:
 3907 0070 00000000 		.word	0
 3908 0074 00887340 		.word	1081313280
 3909 0078 00000000 		.word	clkn
 3910 007c 00408F40 		.word	1083129856
 3911              		.cfi_endproc
 3912              	.LFE13:
 3914              		.section	.text.dma_init,"ax",%progbits
 3915              		.align	2
 3916              		.thumb
 3917              		.thumb_func
 3919              	dma_init:
 3920              	.LFB14:
 951:bluetooth_rxtx.c **** 
 952:bluetooth_rxtx.c **** static void dma_init()
 953:bluetooth_rxtx.c **** {
 3921              		.loc 1 953 0
 3922              		.cfi_startproc
 3923              		@ args = 0, pretend = 0, frame = 0
 3924              		@ frame_needed = 1, uses_anonymous_args = 0
 3925              		@ link register save eliminated.
 3926 0000 80B4     		push	{r7}
 3927              		.cfi_def_cfa_offset 4
 3928              		.cfi_offset 7, -4
 3929 0002 00AF     		add	r7, sp, #0
 3930              		.cfi_def_cfa_register 7
 954:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 955:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 3931              		.loc 1 955 0
 3932 0004 3F4A     		ldr	r2, .L183
 3933 0006 3F4B     		ldr	r3, .L183
 3934 0008 1B68     		ldr	r3, [r3]
 3935 000a 43F00053 		orr	r3, r3, #536870912
 3936 000e 1360     		str	r3, [r2]
 956:bluetooth_rxtx.c **** 
 957:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
 958:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 3937              		.loc 1 958 0
 3938 0010 3D4B     		ldr	r3, .L183+4
 3939 0012 0022     		movs	r2, #0
 3940 0014 1A60     		str	r2, [r3]
 959:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 3941              		.loc 1 959 0
 3942 0016 3D4B     		ldr	r3, .L183+8
 3943 0018 0022     		movs	r2, #0
 3944 001a 1A60     		str	r2, [r3]
 960:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 3945              		.loc 1 960 0
 3946 001c 3C4B     		ldr	r3, .L183+12
 3947 001e 0022     		movs	r2, #0
 3948 0020 1A60     		str	r2, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 86


 961:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 3949              		.loc 1 961 0
 3950 0022 3C4B     		ldr	r3, .L183+16
 3951 0024 0022     		movs	r2, #0
 3952 0026 1A60     		str	r2, [r3]
 962:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 3953              		.loc 1 962 0
 3954 0028 3B4B     		ldr	r3, .L183+20
 3955 002a 0022     		movs	r2, #0
 3956 002c 1A60     		str	r2, [r3]
 963:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 3957              		.loc 1 963 0
 3958 002e 3B4B     		ldr	r3, .L183+24
 3959 0030 0022     		movs	r2, #0
 3960 0032 1A60     		str	r2, [r3]
 964:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 3961              		.loc 1 964 0
 3962 0034 3A4B     		ldr	r3, .L183+28
 3963 0036 0022     		movs	r2, #0
 3964 0038 1A60     		str	r2, [r3]
 965:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 3965              		.loc 1 965 0
 3966 003a 3A4B     		ldr	r3, .L183+32
 3967 003c 0022     		movs	r2, #0
 3968 003e 1A60     		str	r2, [r3]
 966:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 3969              		.loc 1 966 0
 3970 0040 394B     		ldr	r3, .L183+36
 3971 0042 FF22     		movs	r2, #255
 3972 0044 1A60     		str	r2, [r3]
 967:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 3973              		.loc 1 967 0
 3974 0046 394B     		ldr	r3, .L183+40
 3975 0048 FF22     		movs	r2, #255
 3976 004a 1A60     		str	r2, [r3]
 968:bluetooth_rxtx.c **** 
 969:bluetooth_rxtx.c **** 	/* DMA linked lists */
 970:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 3977              		.loc 1 970 0
 3978 004c 384B     		ldr	r3, .L183+44
 3979 004e 394A     		ldr	r2, .L183+48
 3980 0050 1A60     		str	r2, [r3]
 971:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 3981              		.loc 1 971 0
 3982 0052 394A     		ldr	r2, .L183+52
 3983 0054 364B     		ldr	r3, .L183+44
 3984 0056 5A60     		str	r2, [r3, #4]
 972:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 3985              		.loc 1 972 0
 3986 0058 384A     		ldr	r2, .L183+56
 3987 005a 354B     		ldr	r3, .L183+44
 3988 005c 9A60     		str	r2, [r3, #8]
 973:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 3989              		.loc 1 973 0
 3990 005e 344B     		ldr	r3, .L183+44
 3991 0060 374A     		ldr	r2, .L183+60
 3992 0062 DA60     		str	r2, [r3, #12]
ARM GAS  /tmp/cc6bdJLE.s 			page 87


 974:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 975:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 976:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 977:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 978:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 979:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 980:bluetooth_rxtx.c **** 
 981:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 3993              		.loc 1 981 0
 3994 0064 354B     		ldr	r3, .L183+56
 3995 0066 334A     		ldr	r2, .L183+48
 3996 0068 1A60     		str	r2, [r3]
 982:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 3997              		.loc 1 982 0
 3998 006a 364A     		ldr	r2, .L183+64
 3999 006c 334B     		ldr	r3, .L183+56
 4000 006e 5A60     		str	r2, [r3, #4]
 983:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4001              		.loc 1 983 0
 4002 0070 2F4A     		ldr	r2, .L183+44
 4003 0072 324B     		ldr	r3, .L183+56
 4004 0074 9A60     		str	r2, [r3, #8]
 984:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4005              		.loc 1 984 0
 4006 0076 314B     		ldr	r3, .L183+56
 4007 0078 314A     		ldr	r2, .L183+60
 4008 007a DA60     		str	r2, [r3, #12]
 985:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 986:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 987:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 988:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 989:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 990:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 991:bluetooth_rxtx.c **** 
 992:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
 993:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4009              		.loc 1 993 0
 4010 007c 324B     		ldr	r3, .L183+68
 4011 007e 4FF08062 		mov	r2, #67108864
 4012 0082 1A60     		str	r2, [r3]
 994:bluetooth_rxtx.c **** 
 995:bluetooth_rxtx.c **** 	/* enable DMA globally */
 996:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4013              		.loc 1 996 0
 4014 0084 314B     		ldr	r3, .L183+72
 4015 0086 0122     		movs	r2, #1
 4016 0088 1A60     		str	r2, [r3]
 997:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4017              		.loc 1 997 0
 4018 008a 00BF     		nop
 4019              	.L182:
 4020              		.loc 1 997 0 is_stmt 0 discriminator 1
 4021 008c 2F4B     		ldr	r3, .L183+72
 4022 008e 1B68     		ldr	r3, [r3]
 4023 0090 03F00103 		and	r3, r3, #1
 4024 0094 002B     		cmp	r3, #0
 4025 0096 F9D0     		beq	.L182
ARM GAS  /tmp/cc6bdJLE.s 			page 88


 998:bluetooth_rxtx.c **** 
 999:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
1000:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4026              		.loc 1 1000 0 is_stmt 1
 4027 0098 2D4A     		ldr	r2, .L183+76
 4028 009a 254B     		ldr	r3, .L183+44
 4029 009c 1B68     		ldr	r3, [r3]
 4030 009e 1360     		str	r3, [r2]
1001:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4031              		.loc 1 1001 0
 4032 00a0 2C4A     		ldr	r2, .L183+80
 4033 00a2 234B     		ldr	r3, .L183+44
 4034 00a4 5B68     		ldr	r3, [r3, #4]
 4035 00a6 1360     		str	r3, [r2]
1002:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4036              		.loc 1 1002 0
 4037 00a8 2B4A     		ldr	r2, .L183+84
 4038 00aa 214B     		ldr	r3, .L183+44
 4039 00ac 9B68     		ldr	r3, [r3, #8]
 4040 00ae 1360     		str	r3, [r2]
1003:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4041              		.loc 1 1003 0
 4042 00b0 2A4A     		ldr	r2, .L183+88
 4043 00b2 1F4B     		ldr	r3, .L183+44
 4044 00b4 DB68     		ldr	r3, [r3, #12]
 4045 00b6 1360     		str	r3, [r2]
1004:bluetooth_rxtx.c **** 	DMACC0Config =
 4046              		.loc 1 1004 0
 4047 00b8 134B     		ldr	r3, .L183+4
 4048 00ba 4DF20602 		movw	r2, #53254
 4049 00be 1A60     		str	r2, [r3]
1005:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1006:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1007:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1008:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1009:bluetooth_rxtx.c **** 
1010:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4050              		.loc 1 1010 0
 4051 00c0 274B     		ldr	r3, .L183+92
 4052 00c2 1B68     		ldr	r3, [r3]
 4053 00c4 1B0D     		lsrs	r3, r3, #20
 4054 00c6 DBB2     		uxtb	r3, r3
 4055 00c8 264A     		ldr	r2, .L183+96
 4056 00ca 1360     		str	r3, [r2]
1011:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4057              		.loc 1 1011 0
 4058 00cc 244B     		ldr	r3, .L183+92
 4059 00ce 1B68     		ldr	r3, [r3]
 4060 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4061 00d4 40F63542 		movw	r2, #3125
 4062 00d8 02FB03F2 		mul	r2, r2, r3
 4063 00dc 224B     		ldr	r3, .L183+100
 4064 00de 1B68     		ldr	r3, [r3]
 4065 00e0 1344     		add	r3, r3, r2
 4066 00e2 224A     		ldr	r2, .L183+104
 4067 00e4 1360     		str	r3, [r2]
1012:bluetooth_rxtx.c **** 	active_buf_channel = channel;
ARM GAS  /tmp/cc6bdJLE.s 			page 89


 4068              		.loc 1 1012 0
 4069 00e6 224B     		ldr	r3, .L183+108
 4070 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4071 00ea 9AB2     		uxth	r2, r3
 4072 00ec 214B     		ldr	r3, .L183+112
 4073 00ee 1A80     		strh	r2, [r3]	@ movhi
1013:bluetooth_rxtx.c **** 
1014:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1015:bluetooth_rxtx.c **** 	rx_tc = 0;
 4074              		.loc 1 1015 0
 4075 00f0 214B     		ldr	r3, .L183+116
 4076 00f2 0022     		movs	r2, #0
 4077 00f4 1A60     		str	r2, [r3]
1016:bluetooth_rxtx.c **** 	rx_err = 0;
 4078              		.loc 1 1016 0
 4079 00f6 214B     		ldr	r3, .L183+120
 4080 00f8 0022     		movs	r2, #0
 4081 00fa 1A60     		str	r2, [r3]
1017:bluetooth_rxtx.c **** }
 4082              		.loc 1 1017 0
 4083 00fc BD46     		mov	sp, r7
 4084              		.cfi_def_cfa_register 13
 4085              		@ sp needed
 4086 00fe 5DF8047B 		ldr	r7, [sp], #4
 4087              		.cfi_restore 7
 4088              		.cfi_def_cfa_offset 0
 4089 0102 7047     		bx	lr
 4090              	.L184:
 4091              		.align	2
 4092              	.L183:
 4093 0104 C4C00F40 		.word	1074774212
 4094 0108 10410050 		.word	1342193936
 4095 010c 30410050 		.word	1342193968
 4096 0110 50410050 		.word	1342194000
 4097 0114 70410050 		.word	1342194032
 4098 0118 90410050 		.word	1342194064
 4099 011c B0410050 		.word	1342194096
 4100 0120 D0410050 		.word	1342194128
 4101 0124 F0410050 		.word	1342194160
 4102 0128 08400050 		.word	1342193672
 4103 012c 10400050 		.word	1342193680
 4104 0130 00000000 		.word	rx_dma_lli1
 4105 0134 08000340 		.word	1073938440
 4106 0138 00000000 		.word	rxbuf1
 4107 013c 00000000 		.word	rx_dma_lli2
 4108 0140 32900088 		.word	-2013229006
 4109 0144 00000000 		.word	rxbuf2
 4110 0148 80E100E0 		.word	-536813184
 4111 014c 30400050 		.word	1342193712
 4112 0150 00410050 		.word	1342193920
 4113 0154 04410050 		.word	1342193924
 4114 0158 08410050 		.word	1342193928
 4115 015c 0C410050 		.word	1342193932
 4116 0160 00000000 		.word	clkn
 4117 0164 00000000 		.word	active_buf_clkn_high
 4118 0168 08400040 		.word	1073758216
 4119 016c 00000000 		.word	active_buf_clk100ns
ARM GAS  /tmp/cc6bdJLE.s 			page 90


 4120 0170 00000000 		.word	channel
 4121 0174 00000000 		.word	active_buf_channel
 4122 0178 00000000 		.word	rx_tc
 4123 017c 00000000 		.word	rx_err
 4124              		.cfi_endproc
 4125              	.LFE14:
 4127              		.section	.text.dma_init_le,"ax",%progbits
 4128              		.align	2
 4129              		.thumb
 4130              		.thumb_func
 4132              	dma_init_le:
 4133              	.LFB15:
1018:bluetooth_rxtx.c **** 
1019:bluetooth_rxtx.c **** static void dma_init_le()
1020:bluetooth_rxtx.c **** {
 4134              		.loc 1 1020 0
 4135              		.cfi_startproc
 4136              		@ args = 0, pretend = 0, frame = 8
 4137              		@ frame_needed = 1, uses_anonymous_args = 0
 4138              		@ link register save eliminated.
 4139 0000 80B4     		push	{r7}
 4140              		.cfi_def_cfa_offset 4
 4141              		.cfi_offset 7, -4
 4142 0002 83B0     		sub	sp, sp, #12
 4143              		.cfi_def_cfa_offset 16
 4144 0004 00AF     		add	r7, sp, #0
 4145              		.cfi_def_cfa_register 7
1021:bluetooth_rxtx.c **** 	int i;
1022:bluetooth_rxtx.c **** 
1023:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1024:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4146              		.loc 1 1024 0
 4147 0006 4B4A     		ldr	r2, .L191
 4148 0008 4A4B     		ldr	r3, .L191
 4149 000a 1B68     		ldr	r3, [r3]
 4150 000c 43F00053 		orr	r3, r3, #536870912
 4151 0010 1360     		str	r3, [r2]
1025:bluetooth_rxtx.c **** 
1026:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1027:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4152              		.loc 1 1027 0
 4153 0012 494B     		ldr	r3, .L191+4
 4154 0014 0022     		movs	r2, #0
 4155 0016 1A60     		str	r2, [r3]
1028:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4156              		.loc 1 1028 0
 4157 0018 484B     		ldr	r3, .L191+8
 4158 001a 0022     		movs	r2, #0
 4159 001c 1A60     		str	r2, [r3]
1029:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4160              		.loc 1 1029 0
 4161 001e 484B     		ldr	r3, .L191+12
 4162 0020 0022     		movs	r2, #0
 4163 0022 1A60     		str	r2, [r3]
1030:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4164              		.loc 1 1030 0
 4165 0024 474B     		ldr	r3, .L191+16
ARM GAS  /tmp/cc6bdJLE.s 			page 91


 4166 0026 0022     		movs	r2, #0
 4167 0028 1A60     		str	r2, [r3]
1031:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4168              		.loc 1 1031 0
 4169 002a 474B     		ldr	r3, .L191+20
 4170 002c 0022     		movs	r2, #0
 4171 002e 1A60     		str	r2, [r3]
1032:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4172              		.loc 1 1032 0
 4173 0030 464B     		ldr	r3, .L191+24
 4174 0032 0022     		movs	r2, #0
 4175 0034 1A60     		str	r2, [r3]
1033:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4176              		.loc 1 1033 0
 4177 0036 464B     		ldr	r3, .L191+28
 4178 0038 0022     		movs	r2, #0
 4179 003a 1A60     		str	r2, [r3]
1034:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4180              		.loc 1 1034 0
 4181 003c 454B     		ldr	r3, .L191+32
 4182 003e 0022     		movs	r2, #0
 4183 0040 1A60     		str	r2, [r3]
1035:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4184              		.loc 1 1035 0
 4185 0042 454B     		ldr	r3, .L191+36
 4186 0044 FF22     		movs	r2, #255
 4187 0046 1A60     		str	r2, [r3]
1036:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4188              		.loc 1 1036 0
 4189 0048 444B     		ldr	r3, .L191+40
 4190 004a FF22     		movs	r2, #255
 4191 004c 1A60     		str	r2, [r3]
1037:bluetooth_rxtx.c **** 
1038:bluetooth_rxtx.c **** 	/* enable DMA globally */
1039:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4192              		.loc 1 1039 0
 4193 004e 444B     		ldr	r3, .L191+44
 4194 0050 0122     		movs	r2, #1
 4195 0052 1A60     		str	r2, [r3]
1040:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4196              		.loc 1 1040 0
 4197 0054 00BF     		nop
 4198              	.L186:
 4199              		.loc 1 1040 0 is_stmt 0 discriminator 1
 4200 0056 424B     		ldr	r3, .L191+44
 4201 0058 1B68     		ldr	r3, [r3]
 4202 005a 03F00103 		and	r3, r3, #1
 4203 005e 002B     		cmp	r3, #0
 4204 0060 F9D0     		beq	.L186
1041:bluetooth_rxtx.c **** 
1042:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4205              		.loc 1 1042 0 is_stmt 1
 4206 0062 0023     		movs	r3, #0
 4207 0064 7B60     		str	r3, [r7, #4]
 4208 0066 2AE0     		b	.L187
 4209              	.L190:
1043:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
ARM GAS  /tmp/cc6bdJLE.s 			page 92


 4210              		.loc 1 1043 0
 4211 0068 3E4A     		ldr	r2, .L191+48
 4212 006a 7B68     		ldr	r3, [r7, #4]
 4213 006c 1B01     		lsls	r3, r3, #4
 4214 006e 1344     		add	r3, r3, r2
 4215 0070 3D4A     		ldr	r2, .L191+52
 4216 0072 1A60     		str	r2, [r3]
1044:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4217              		.loc 1 1044 0
 4218 0074 7B68     		ldr	r3, [r7, #4]
 4219 0076 9B00     		lsls	r3, r3, #2
 4220 0078 3C4A     		ldr	r2, .L191+56
 4221 007a 1344     		add	r3, r3, r2
 4222 007c 1946     		mov	r1, r3
 4223 007e 394A     		ldr	r2, .L191+48
 4224 0080 7B68     		ldr	r3, [r7, #4]
 4225 0082 1B01     		lsls	r3, r3, #4
 4226 0084 1344     		add	r3, r3, r2
 4227 0086 5960     		str	r1, [r3, #4]
1045:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4228              		.loc 1 1045 0
 4229 0088 7B68     		ldr	r3, [r7, #4]
 4230 008a 092B     		cmp	r3, #9
 4231 008c 06DC     		bgt	.L188
 4232              		.loc 1 1045 0 is_stmt 0 discriminator 1
 4233 008e 7B68     		ldr	r3, [r7, #4]
 4234 0090 0133     		adds	r3, r3, #1
 4235 0092 1B01     		lsls	r3, r3, #4
 4236 0094 334A     		ldr	r2, .L191+48
 4237 0096 1344     		add	r3, r3, r2
 4238 0098 1A46     		mov	r2, r3
 4239 009a 00E0     		b	.L189
 4240              	.L188:
 4241              		.loc 1 1045 0 discriminator 2
 4242 009c 0022     		movs	r2, #0
 4243              	.L189:
 4244              		.loc 1 1045 0 discriminator 4
 4245 009e 3149     		ldr	r1, .L191+48
 4246 00a0 7B68     		ldr	r3, [r7, #4]
 4247 00a2 1B01     		lsls	r3, r3, #4
 4248 00a4 0B44     		add	r3, r3, r1
 4249 00a6 0833     		adds	r3, r3, #8
 4250 00a8 1A60     		str	r2, [r3]
1046:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4251              		.loc 1 1046 0 is_stmt 1 discriminator 4
 4252 00aa 2E4A     		ldr	r2, .L191+48
 4253 00ac 7B68     		ldr	r3, [r7, #4]
 4254 00ae 1B01     		lsls	r3, r3, #4
 4255 00b0 1344     		add	r3, r3, r2
 4256 00b2 0833     		adds	r3, r3, #8
 4257 00b4 2E4A     		ldr	r2, .L191+60
 4258 00b6 5A60     		str	r2, [r3, #4]
1042:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4259              		.loc 1 1042 0 discriminator 4
 4260 00b8 7B68     		ldr	r3, [r7, #4]
 4261 00ba 0133     		adds	r3, r3, #1
 4262 00bc 7B60     		str	r3, [r7, #4]
ARM GAS  /tmp/cc6bdJLE.s 			page 93


 4263              	.L187:
1042:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4264              		.loc 1 1042 0 is_stmt 0 discriminator 2
 4265 00be 7B68     		ldr	r3, [r7, #4]
 4266 00c0 0A2B     		cmp	r3, #10
 4267 00c2 D1DD     		ble	.L190
1047:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1048:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1049:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1050:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1051:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1052:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1053:bluetooth_rxtx.c **** 	}
1054:bluetooth_rxtx.c **** 
1055:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1056:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4268              		.loc 1 1056 0 is_stmt 1
 4269 00c4 2B4A     		ldr	r2, .L191+64
 4270 00c6 274B     		ldr	r3, .L191+48
 4271 00c8 1B68     		ldr	r3, [r3]
 4272 00ca 1360     		str	r3, [r2]
1057:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4273              		.loc 1 1057 0
 4274 00cc 2A4A     		ldr	r2, .L191+68
 4275 00ce 254B     		ldr	r3, .L191+48
 4276 00d0 5B68     		ldr	r3, [r3, #4]
 4277 00d2 1360     		str	r3, [r2]
1058:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4278              		.loc 1 1058 0
 4279 00d4 294A     		ldr	r2, .L191+72
 4280 00d6 234B     		ldr	r3, .L191+48
 4281 00d8 9B68     		ldr	r3, [r3, #8]
 4282 00da 1360     		str	r3, [r2]
1059:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4283              		.loc 1 1059 0
 4284 00dc 284A     		ldr	r2, .L191+76
 4285 00de 214B     		ldr	r3, .L191+48
 4286 00e0 DB68     		ldr	r3, [r3, #12]
 4287 00e2 1360     		str	r3, [r2]
1060:bluetooth_rxtx.c **** 	DMACC0Config =
 4288              		.loc 1 1060 0
 4289 00e4 144B     		ldr	r3, .L191+4
 4290 00e6 4DF20602 		movw	r2, #53254
 4291 00ea 1A60     		str	r2, [r3]
1061:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1062:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1063:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1064:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1065:bluetooth_rxtx.c **** 
1066:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4292              		.loc 1 1066 0
 4293 00ec 254B     		ldr	r3, .L191+80
 4294 00ee 1B68     		ldr	r3, [r3]
 4295 00f0 1B0D     		lsrs	r3, r3, #20
 4296 00f2 DBB2     		uxtb	r3, r3
 4297 00f4 244A     		ldr	r2, .L191+84
 4298 00f6 1360     		str	r3, [r2]
ARM GAS  /tmp/cc6bdJLE.s 			page 94


1067:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4299              		.loc 1 1067 0
 4300 00f8 224B     		ldr	r3, .L191+80
 4301 00fa 1B68     		ldr	r3, [r3]
 4302 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4303 0100 40F63542 		movw	r2, #3125
 4304 0104 02FB03F2 		mul	r2, r2, r3
 4305 0108 204B     		ldr	r3, .L191+88
 4306 010a 1B68     		ldr	r3, [r3]
 4307 010c 1344     		add	r3, r3, r2
 4308 010e 204A     		ldr	r2, .L191+92
 4309 0110 1360     		str	r3, [r2]
1068:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4310              		.loc 1 1068 0
 4311 0112 204B     		ldr	r3, .L191+96
 4312 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4313 0116 9AB2     		uxth	r2, r3
 4314 0118 1F4B     		ldr	r3, .L191+100
 4315 011a 1A80     		strh	r2, [r3]	@ movhi
1069:bluetooth_rxtx.c **** 
1070:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1071:bluetooth_rxtx.c **** 	rx_tc = 0;
 4316              		.loc 1 1071 0
 4317 011c 1F4B     		ldr	r3, .L191+104
 4318 011e 0022     		movs	r2, #0
 4319 0120 1A60     		str	r2, [r3]
1072:bluetooth_rxtx.c **** 	rx_err = 0;
 4320              		.loc 1 1072 0
 4321 0122 1F4B     		ldr	r3, .L191+108
 4322 0124 0022     		movs	r2, #0
 4323 0126 1A60     		str	r2, [r3]
1073:bluetooth_rxtx.c **** }
 4324              		.loc 1 1073 0
 4325 0128 0C37     		adds	r7, r7, #12
 4326              		.cfi_def_cfa_offset 4
 4327 012a BD46     		mov	sp, r7
 4328              		.cfi_def_cfa_register 13
 4329              		@ sp needed
 4330 012c 5DF8047B 		ldr	r7, [sp], #4
 4331              		.cfi_restore 7
 4332              		.cfi_def_cfa_offset 0
 4333 0130 7047     		bx	lr
 4334              	.L192:
 4335 0132 00BF     		.align	2
 4336              	.L191:
 4337 0134 C4C00F40 		.word	1074774212
 4338 0138 10410050 		.word	1342193936
 4339 013c 30410050 		.word	1342193968
 4340 0140 50410050 		.word	1342194000
 4341 0144 70410050 		.word	1342194032
 4342 0148 90410050 		.word	1342194064
 4343 014c B0410050 		.word	1342194096
 4344 0150 D0410050 		.word	1342194128
 4345 0154 F0410050 		.word	1342194160
 4346 0158 08400050 		.word	1342193672
 4347 015c 10400050 		.word	1342193680
 4348 0160 30400050 		.word	1342193712
ARM GAS  /tmp/cc6bdJLE.s 			page 95


 4349 0164 00000000 		.word	le_dma_lli
 4350 0168 08000340 		.word	1073938440
 4351 016c 00000000 		.word	rxbuf1
 4352 0170 04100088 		.word	-2013261820
 4353 0174 00410050 		.word	1342193920
 4354 0178 04410050 		.word	1342193924
 4355 017c 08410050 		.word	1342193928
 4356 0180 0C410050 		.word	1342193932
 4357 0184 00000000 		.word	clkn
 4358 0188 00000000 		.word	active_buf_clkn_high
 4359 018c 08400040 		.word	1073758216
 4360 0190 00000000 		.word	active_buf_clk100ns
 4361 0194 00000000 		.word	channel
 4362 0198 00000000 		.word	active_buf_channel
 4363 019c 00000000 		.word	rx_tc
 4364 01a0 00000000 		.word	rx_err
 4365              		.cfi_endproc
 4366              	.LFE15:
 4368              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4369              		.align	2
 4370              		.global	bt_stream_dma_handler
 4371              		.thumb
 4372              		.thumb_func
 4374              	bt_stream_dma_handler:
 4375              	.LFB16:
1074:bluetooth_rxtx.c **** 
1075:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4376              		.loc 1 1075 0
 4377              		.cfi_startproc
 4378              		@ args = 0, pretend = 0, frame = 0
 4379              		@ frame_needed = 1, uses_anonymous_args = 0
 4380              		@ link register save eliminated.
 4381 0000 80B4     		push	{r7}
 4382              		.cfi_def_cfa_offset 4
 4383              		.cfi_offset 7, -4
 4384 0002 00AF     		add	r7, sp, #0
 4385              		.cfi_def_cfa_register 7
1076:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4386              		.loc 1 1076 0
 4387 0004 254B     		ldr	r3, .L196
 4388 0006 1B68     		ldr	r3, [r3]
 4389 0008 254A     		ldr	r2, .L196+4
 4390 000a 1360     		str	r3, [r2]
1077:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4391              		.loc 1 1077 0
 4392 000c 254B     		ldr	r3, .L196+8
 4393 000e 1B68     		ldr	r3, [r3]
 4394 0010 1B0D     		lsrs	r3, r3, #20
 4395 0012 DBB2     		uxtb	r3, r3
 4396 0014 214A     		ldr	r2, .L196
 4397 0016 1360     		str	r3, [r2]
1078:bluetooth_rxtx.c **** 
1079:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4398              		.loc 1 1079 0
 4399 0018 234B     		ldr	r3, .L196+12
 4400 001a 1B68     		ldr	r3, [r3]
 4401 001c 234A     		ldr	r2, .L196+16
ARM GAS  /tmp/cc6bdJLE.s 			page 96


 4402 001e 1360     		str	r3, [r2]
1080:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4403              		.loc 1 1080 0
 4404 0020 204B     		ldr	r3, .L196+8
 4405 0022 1B68     		ldr	r3, [r3]
 4406 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4407 0028 40F63542 		movw	r2, #3125
 4408 002c 02FB03F2 		mul	r2, r2, r3
 4409 0030 1F4B     		ldr	r3, .L196+20
 4410 0032 1B68     		ldr	r3, [r3]
 4411 0034 1344     		add	r3, r3, r2
 4412 0036 1C4A     		ldr	r2, .L196+12
 4413 0038 1360     		str	r3, [r2]
1081:bluetooth_rxtx.c **** 
1082:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4414              		.loc 1 1082 0
 4415 003a 1E4B     		ldr	r3, .L196+24
 4416 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4417 003e 9AB2     		uxth	r2, r3
 4418 0040 1D4B     		ldr	r3, .L196+28
 4419 0042 1A80     		strh	r2, [r3]	@ movhi
1083:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4420              		.loc 1 1083 0
 4421 0044 1D4B     		ldr	r3, .L196+32
 4422 0046 1B88     		ldrh	r3, [r3]	@ movhi
 4423 0048 9AB2     		uxth	r2, r3
 4424 004a 1A4B     		ldr	r3, .L196+24
 4425 004c 1A80     		strh	r2, [r3]	@ movhi
1084:bluetooth_rxtx.c **** 
1085:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1086:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4426              		.loc 1 1086 0
 4427 004e 1C4B     		ldr	r3, .L196+36
 4428 0050 1B68     		ldr	r3, [r3]
 4429 0052 03F00103 		and	r3, r3, #1
 4430 0056 002B     		cmp	r3, #0
 4431 0058 1BD0     		beq	.L193
1087:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4432              		.loc 1 1087 0
 4433 005a 1A4B     		ldr	r3, .L196+40
 4434 005c 1B68     		ldr	r3, [r3]
 4435 005e 03F00103 		and	r3, r3, #1
 4436 0062 002B     		cmp	r3, #0
 4437 0064 07D0     		beq	.L195
1088:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4438              		.loc 1 1088 0
 4439 0066 184B     		ldr	r3, .L196+44
 4440 0068 0122     		movs	r2, #1
 4441 006a 1A60     		str	r2, [r3]
1089:bluetooth_rxtx.c **** 			++rx_tc;
 4442              		.loc 1 1089 0
 4443 006c 174B     		ldr	r3, .L196+48
 4444 006e 1B68     		ldr	r3, [r3]
 4445 0070 0133     		adds	r3, r3, #1
 4446 0072 164A     		ldr	r2, .L196+48
 4447 0074 1360     		str	r3, [r2]
 4448              	.L195:
ARM GAS  /tmp/cc6bdJLE.s 			page 97


1090:bluetooth_rxtx.c **** 		}
1091:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4449              		.loc 1 1091 0
 4450 0076 164B     		ldr	r3, .L196+52
 4451 0078 1B68     		ldr	r3, [r3]
 4452 007a 03F00103 		and	r3, r3, #1
 4453 007e 002B     		cmp	r3, #0
 4454 0080 07D0     		beq	.L193
1092:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4455              		.loc 1 1092 0
 4456 0082 144B     		ldr	r3, .L196+56
 4457 0084 0122     		movs	r2, #1
 4458 0086 1A60     		str	r2, [r3]
1093:bluetooth_rxtx.c **** 			++rx_err;
 4459              		.loc 1 1093 0
 4460 0088 134B     		ldr	r3, .L196+60
 4461 008a 1B68     		ldr	r3, [r3]
 4462 008c 0133     		adds	r3, r3, #1
 4463 008e 124A     		ldr	r2, .L196+60
 4464 0090 1360     		str	r3, [r2]
 4465              	.L193:
1094:bluetooth_rxtx.c **** 		}
1095:bluetooth_rxtx.c **** 	}
1096:bluetooth_rxtx.c **** }
 4466              		.loc 1 1096 0
 4467 0092 BD46     		mov	sp, r7
 4468              		.cfi_def_cfa_register 13
 4469              		@ sp needed
 4470 0094 5DF8047B 		ldr	r7, [sp], #4
 4471              		.cfi_restore 7
 4472              		.cfi_def_cfa_offset 0
 4473 0098 7047     		bx	lr
 4474              	.L197:
 4475 009a 00BF     		.align	2
 4476              	.L196:
 4477 009c 00000000 		.word	active_buf_clkn_high
 4478 00a0 00000000 		.word	idle_buf_clkn_high
 4479 00a4 00000000 		.word	clkn
 4480 00a8 00000000 		.word	active_buf_clk100ns
 4481 00ac 00000000 		.word	idle_buf_clk100ns
 4482 00b0 08400040 		.word	1073758216
 4483 00b4 00000000 		.word	active_buf_channel
 4484 00b8 00000000 		.word	idle_buf_channel
 4485 00bc 00000000 		.word	channel
 4486 00c0 00400050 		.word	1342193664
 4487 00c4 04400050 		.word	1342193668
 4488 00c8 08400050 		.word	1342193672
 4489 00cc 00000000 		.word	rx_tc
 4490 00d0 0C400050 		.word	1342193676
 4491 00d4 10400050 		.word	1342193680
 4492 00d8 00000000 		.word	rx_err
 4493              		.cfi_endproc
 4494              	.LFE16:
 4496              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4497              		.align	2
 4498              		.global	DMA_IRQHandler
 4499              		.thumb
ARM GAS  /tmp/cc6bdJLE.s 			page 98


 4500              		.thumb_func
 4502              	DMA_IRQHandler:
 4503              	.LFB17:
1097:bluetooth_rxtx.c **** 
1098:bluetooth_rxtx.c **** void DMA_IRQHandler()
1099:bluetooth_rxtx.c **** {
 4504              		.loc 1 1099 0
 4505              		.cfi_startproc
 4506              		@ args = 0, pretend = 0, frame = 0
 4507              		@ frame_needed = 1, uses_anonymous_args = 0
 4508 0000 80B5     		push	{r7, lr}
 4509              		.cfi_def_cfa_offset 8
 4510              		.cfi_offset 7, -8
 4511              		.cfi_offset 14, -4
 4512 0002 00AF     		add	r7, sp, #0
 4513              		.cfi_def_cfa_register 7
1100:bluetooth_rxtx.c **** 	switch (mode) {
 4514              		.loc 1 1100 0
 4515 0004 154B     		ldr	r3, .L202
 4516 0006 1B78     		ldrb	r3, [r3]
 4517 0008 DBB2     		uxtb	r3, r3
 4518 000a 013B     		subs	r3, r3, #1
 4519 000c 0E2B     		cmp	r3, #14
 4520 000e 24D8     		bhi	.L198
 4521 0010 01A2     		adr	r2, .L201
 4522 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4523 0016 00BF     		.p2align 2
 4524              	.L201:
 4525 0018 55000000 		.word	.L200+1
 4526 001c 5B000000 		.word	.L198+1
 4527 0020 5B000000 		.word	.L198+1
 4528 0024 55000000 		.word	.L200+1
 4529 0028 5B000000 		.word	.L198+1
 4530 002c 5B000000 		.word	.L198+1
 4531 0030 5B000000 		.word	.L198+1
 4532 0034 55000000 		.word	.L200+1
 4533 0038 55000000 		.word	.L200+1
 4534 003c 55000000 		.word	.L200+1
 4535 0040 5B000000 		.word	.L198+1
 4536 0044 55000000 		.word	.L200+1
 4537 0048 5B000000 		.word	.L198+1
 4538 004c 55000000 		.word	.L200+1
 4539 0050 55000000 		.word	.L200+1
 4540              		.p2align 1
 4541              	.L200:
1101:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1102:bluetooth_rxtx.c **** 		case MODE_RX_FREQ:
1103:bluetooth_rxtx.c **** 		case MODE_RX_PROPOSED:
1104:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1105:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1106:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1107:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1108:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1109:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4542              		.loc 1 1109 0
 4543 0054 FFF7FEFF 		bl	bt_stream_dma_handler
1110:bluetooth_rxtx.c **** 			break;
ARM GAS  /tmp/cc6bdJLE.s 			page 99


 4544              		.loc 1 1110 0
 4545 0058 00BF     		nop
 4546              	.L198:
1111:bluetooth_rxtx.c **** 	}
1112:bluetooth_rxtx.c **** }
 4547              		.loc 1 1112 0
 4548 005a 80BD     		pop	{r7, pc}
 4549              	.L203:
 4550              		.align	2
 4551              	.L202:
 4552 005c 00000000 		.word	mode
 4553              		.cfi_endproc
 4554              	.LFE17:
 4556              		.section	.text.dio_ssp_start,"ax",%progbits
 4557              		.align	2
 4558              		.thumb
 4559              		.thumb_func
 4561              	dio_ssp_start:
 4562              	.LFB18:
1113:bluetooth_rxtx.c **** 
1114:bluetooth_rxtx.c **** static void dio_ssp_start()
1115:bluetooth_rxtx.c **** {
 4563              		.loc 1 1115 0
 4564              		.cfi_startproc
 4565              		@ args = 0, pretend = 0, frame = 0
 4566              		@ frame_needed = 1, uses_anonymous_args = 0
 4567              		@ link register save eliminated.
 4568 0000 80B4     		push	{r7}
 4569              		.cfi_def_cfa_offset 4
 4570              		.cfi_offset 7, -4
 4571 0002 00AF     		add	r7, sp, #0
 4572              		.cfi_def_cfa_register 7
1116:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1117:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4573              		.loc 1 1117 0
 4574 0004 104B     		ldr	r3, .L205
 4575 0006 4FF08052 		mov	r2, #268435456
 4576 000a 1A60     		str	r2, [r3]
1118:bluetooth_rxtx.c **** 
1119:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1120:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4577              		.loc 1 1120 0
 4578 000c 0F4A     		ldr	r2, .L205+4
 4579 000e 0F4B     		ldr	r3, .L205+4
 4580 0010 1B68     		ldr	r3, [r3]
 4581 0012 43F00103 		orr	r3, r3, #1
 4582 0016 1360     		str	r3, [r2]
1121:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4583              		.loc 1 1121 0
 4584 0018 0D4A     		ldr	r2, .L205+8
 4585 001a 0D4B     		ldr	r3, .L205+8
 4586 001c 1B68     		ldr	r3, [r3]
 4587 001e 43F00203 		orr	r3, r3, #2
 4588 0022 1360     		str	r3, [r2]
1122:bluetooth_rxtx.c **** 	
1123:bluetooth_rxtx.c **** 	/* enable DMA */
1124:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
ARM GAS  /tmp/cc6bdJLE.s 			page 100


 4589              		.loc 1 1124 0
 4590 0024 0B4A     		ldr	r2, .L205+12
 4591 0026 0B4B     		ldr	r3, .L205+12
 4592 0028 1B68     		ldr	r3, [r3]
 4593 002a 43F00103 		orr	r3, r3, #1
 4594 002e 1360     		str	r3, [r2]
1125:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4595              		.loc 1 1125 0
 4596 0030 094B     		ldr	r3, .L205+16
 4597 0032 4FF08062 		mov	r2, #67108864
 4598 0036 1A60     		str	r2, [r3]
1126:bluetooth_rxtx.c **** 
1127:bluetooth_rxtx.c **** 	/* activate slave select pin */
1128:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4599              		.loc 1 1128 0
 4600 0038 084B     		ldr	r3, .L205+20
 4601 003a 4FF08052 		mov	r2, #268435456
 4602 003e 1A60     		str	r2, [r3]
1129:bluetooth_rxtx.c **** }
 4603              		.loc 1 1129 0
 4604 0040 BD46     		mov	sp, r7
 4605              		.cfi_def_cfa_register 13
 4606              		@ sp needed
 4607 0042 5DF8047B 		ldr	r7, [sp], #4
 4608              		.cfi_restore 7
 4609              		.cfi_def_cfa_offset 0
 4610 0046 7047     		bx	lr
 4611              	.L206:
 4612              		.align	2
 4613              	.L205:
 4614 0048 98C00920 		.word	537510040
 4615 004c 24000340 		.word	1073938468
 4616 0050 04000340 		.word	1073938436
 4617 0054 10410050 		.word	1342193936
 4618 0058 00E100E0 		.word	-536813312
 4619 005c 9CC00920 		.word	537510044
 4620              		.cfi_endproc
 4621              	.LFE18:
 4623              		.section	.text.dio_ssp_stop,"ax",%progbits
 4624              		.align	2
 4625              		.thumb
 4626              		.thumb_func
 4628              	dio_ssp_stop:
 4629              	.LFB19:
1130:bluetooth_rxtx.c **** 
1131:bluetooth_rxtx.c **** static void dio_ssp_stop()
1132:bluetooth_rxtx.c **** {
 4630              		.loc 1 1132 0
 4631              		.cfi_startproc
 4632              		@ args = 0, pretend = 0, frame = 0
 4633              		@ frame_needed = 1, uses_anonymous_args = 0
 4634              		@ link register save eliminated.
 4635 0000 80B4     		push	{r7}
 4636              		.cfi_def_cfa_offset 4
 4637              		.cfi_offset 7, -4
 4638 0002 00AF     		add	r7, sp, #0
 4639              		.cfi_def_cfa_register 7
ARM GAS  /tmp/cc6bdJLE.s 			page 101


1133:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1134:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4640              		.loc 1 1134 0
 4641 0004 214B     		ldr	r3, .L209
 4642 0006 4FF08052 		mov	r2, #268435456
 4643 000a 1A60     		str	r2, [r3]
1135:bluetooth_rxtx.c **** 
1136:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1137:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 4644              		.loc 1 1137 0
 4645 000c 204A     		ldr	r2, .L209+4
 4646 000e 204B     		ldr	r3, .L209+4
 4647 0010 1B68     		ldr	r3, [r3]
 4648 0012 23F00103 		bic	r3, r3, #1
 4649 0016 1360     		str	r3, [r2]
1138:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 4650              		.loc 1 1138 0
 4651 0018 1E4A     		ldr	r2, .L209+8
 4652 001a 1E4B     		ldr	r3, .L209+8
 4653 001c 1B68     		ldr	r3, [r3]
 4654 001e 23F00203 		bic	r3, r3, #2
 4655 0022 1360     		str	r3, [r2]
1139:bluetooth_rxtx.c **** 
1140:bluetooth_rxtx.c **** 
1141:bluetooth_rxtx.c **** 	// disable DMA engine:
1142:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1143:bluetooth_rxtx.c **** 
1144:bluetooth_rxtx.c **** 	// disable DMA interrupts
1145:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4656              		.loc 1 1145 0
 4657 0024 1C4B     		ldr	r3, .L209+12
 4658 0026 4FF08062 		mov	r2, #67108864
 4659 002a 1A60     		str	r2, [r3]
1146:bluetooth_rxtx.c **** 
1147:bluetooth_rxtx.c **** 	// disable active channels
1148:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4660              		.loc 1 1148 0
 4661 002c 1B4B     		ldr	r3, .L209+16
 4662 002e 0022     		movs	r2, #0
 4663 0030 1A60     		str	r2, [r3]
1149:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4664              		.loc 1 1149 0
 4665 0032 1B4B     		ldr	r3, .L209+20
 4666 0034 0022     		movs	r2, #0
 4667 0036 1A60     		str	r2, [r3]
1150:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4668              		.loc 1 1150 0
 4669 0038 1A4B     		ldr	r3, .L209+24
 4670 003a 0022     		movs	r2, #0
 4671 003c 1A60     		str	r2, [r3]
1151:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4672              		.loc 1 1151 0
 4673 003e 1A4B     		ldr	r3, .L209+28
 4674 0040 0022     		movs	r2, #0
 4675 0042 1A60     		str	r2, [r3]
1152:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4676              		.loc 1 1152 0
ARM GAS  /tmp/cc6bdJLE.s 			page 102


 4677 0044 194B     		ldr	r3, .L209+32
 4678 0046 0022     		movs	r2, #0
 4679 0048 1A60     		str	r2, [r3]
1153:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4680              		.loc 1 1153 0
 4681 004a 194B     		ldr	r3, .L209+36
 4682 004c 0022     		movs	r2, #0
 4683 004e 1A60     		str	r2, [r3]
1154:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4684              		.loc 1 1154 0
 4685 0050 184B     		ldr	r3, .L209+40
 4686 0052 0022     		movs	r2, #0
 4687 0054 1A60     		str	r2, [r3]
1155:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4688              		.loc 1 1155 0
 4689 0056 184B     		ldr	r3, .L209+44
 4690 0058 0022     		movs	r2, #0
 4691 005a 1A60     		str	r2, [r3]
1156:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4692              		.loc 1 1156 0
 4693 005c 174B     		ldr	r3, .L209+48
 4694 005e FF22     		movs	r2, #255
 4695 0060 1A60     		str	r2, [r3]
1157:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4696              		.loc 1 1157 0
 4697 0062 174B     		ldr	r3, .L209+52
 4698 0064 FF22     		movs	r2, #255
 4699 0066 1A60     		str	r2, [r3]
1158:bluetooth_rxtx.c **** 
1159:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1160:bluetooth_rxtx.c **** 	// register.
1161:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 4700              		.loc 1 1161 0
 4701 0068 164A     		ldr	r2, .L209+56
 4702 006a 164B     		ldr	r3, .L209+56
 4703 006c 1B68     		ldr	r3, [r3]
 4704 006e 23F00103 		bic	r3, r3, #1
 4705 0072 1360     		str	r3, [r2]
1162:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 4706              		.loc 1 1162 0
 4707 0074 00BF     		nop
 4708              	.L208:
 4709              		.loc 1 1162 0 is_stmt 0 discriminator 1
 4710 0076 134B     		ldr	r3, .L209+56
 4711 0078 1B68     		ldr	r3, [r3]
 4712 007a 03F00103 		and	r3, r3, #1
 4713 007e 002B     		cmp	r3, #0
 4714 0080 F9D1     		bne	.L208
1163:bluetooth_rxtx.c **** }
 4715              		.loc 1 1163 0 is_stmt 1
 4716 0082 BD46     		mov	sp, r7
 4717              		.cfi_def_cfa_register 13
 4718              		@ sp needed
 4719 0084 5DF8047B 		ldr	r7, [sp], #4
 4720              		.cfi_restore 7
 4721              		.cfi_def_cfa_offset 0
 4722 0088 7047     		bx	lr
ARM GAS  /tmp/cc6bdJLE.s 			page 103


 4723              	.L210:
 4724 008a 00BF     		.align	2
 4725              	.L209:
 4726 008c 98C00920 		.word	537510040
 4727 0090 24000340 		.word	1073938468
 4728 0094 04000340 		.word	1073938436
 4729 0098 80E100E0 		.word	-536813184
 4730 009c 10410050 		.word	1342193936
 4731 00a0 30410050 		.word	1342193968
 4732 00a4 50410050 		.word	1342194000
 4733 00a8 70410050 		.word	1342194032
 4734 00ac 90410050 		.word	1342194064
 4735 00b0 B0410050 		.word	1342194096
 4736 00b4 D0410050 		.word	1342194128
 4737 00b8 F0410050 		.word	1342194160
 4738 00bc 08400050 		.word	1342193672
 4739 00c0 10400050 		.word	1342193680
 4740 00c4 30400050 		.word	1342193712
 4741              		.cfi_endproc
 4742              	.LFE19:
 4744              		.section	.text.cc2400_idle,"ax",%progbits
 4745              		.align	2
 4746              		.thumb
 4747              		.thumb_func
 4749              	cc2400_idle:
 4750              	.LFB20:
1164:bluetooth_rxtx.c **** 
1165:bluetooth_rxtx.c **** static void cc2400_idle()
1166:bluetooth_rxtx.c **** {
 4751              		.loc 1 1166 0
 4752              		.cfi_startproc
 4753              		@ args = 0, pretend = 0, frame = 0
 4754              		@ frame_needed = 1, uses_anonymous_args = 0
 4755 0000 80B5     		push	{r7, lr}
 4756              		.cfi_def_cfa_offset 8
 4757              		.cfi_offset 7, -8
 4758              		.cfi_offset 14, -4
 4759 0002 00AF     		add	r7, sp, #0
 4760              		.cfi_def_cfa_register 7
1167:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 4761              		.loc 1 1167 0
 4762 0004 6420     		movs	r0, #100
 4763 0006 FFF7FEFF 		bl	cc2400_strobe
1168:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4764              		.loc 1 1168 0
 4765 000a 00BF     		nop
 4766              	.L212:
 4767              		.loc 1 1168 0 is_stmt 0 discriminator 1
 4768 000c FFF7FEFF 		bl	cc2400_status
 4769 0010 0346     		mov	r3, r0
 4770 0012 03F00403 		and	r3, r3, #4
 4771 0016 002B     		cmp	r3, #0
 4772 0018 F8D1     		bne	.L212
1169:bluetooth_rxtx.c **** 
1170:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1171:bluetooth_rxtx.c **** 	PAEN_CLR;
 4773              		.loc 1 1171 0 is_stmt 1
ARM GAS  /tmp/cc6bdJLE.s 			page 104


 4774 001a 0A4B     		ldr	r3, .L213
 4775 001c 8022     		movs	r2, #128
 4776 001e 1A60     		str	r2, [r3]
1172:bluetooth_rxtx.c **** 	HGM_CLR;
 4777              		.loc 1 1172 0
 4778 0020 084B     		ldr	r3, .L213
 4779 0022 4FF48072 		mov	r2, #256
 4780 0026 1A60     		str	r2, [r3]
1173:bluetooth_rxtx.c **** #endif
1174:bluetooth_rxtx.c **** 
1175:bluetooth_rxtx.c **** 	RXLED_CLR;
 4781              		.loc 1 1175 0
 4782 0028 074B     		ldr	r3, .L213+4
 4783 002a 1022     		movs	r2, #16
 4784 002c 1A60     		str	r2, [r3]
1176:bluetooth_rxtx.c **** 	TXLED_CLR;
 4785              		.loc 1 1176 0
 4786 002e 064B     		ldr	r3, .L213+4
 4787 0030 4FF48072 		mov	r2, #256
 4788 0034 1A60     		str	r2, [r3]
1177:bluetooth_rxtx.c **** 	USRLED_CLR;
 4789              		.loc 1 1177 0
 4790 0036 044B     		ldr	r3, .L213+4
 4791 0038 0222     		movs	r2, #2
 4792 003a 1A60     		str	r2, [r3]
1178:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 4793              		.loc 1 1178 0
 4794 003c 034B     		ldr	r3, .L213+8
 4795 003e 0022     		movs	r2, #0
 4796 0040 1A70     		strb	r2, [r3]
1179:bluetooth_rxtx.c **** }
 4797              		.loc 1 1179 0
 4798 0042 80BD     		pop	{r7, pc}
 4799              	.L214:
 4800              		.align	2
 4801              	.L213:
 4802 0044 5CC00920 		.word	537509980
 4803 0048 3CC00920 		.word	537509948
 4804 004c 00000000 		.word	mode
 4805              		.cfi_endproc
 4806              	.LFE20:
 4808              		.section	.text.cc2400_rx,"ax",%progbits
 4809              		.align	2
 4810              		.thumb
 4811              		.thumb_func
 4813              	cc2400_rx:
 4814              	.LFB21:
1180:bluetooth_rxtx.c **** 
1181:bluetooth_rxtx.c **** /* start un-buffered rx */
1182:bluetooth_rxtx.c **** static void cc2400_rx()
1183:bluetooth_rxtx.c **** {
 4815              		.loc 1 1183 0
 4816              		.cfi_startproc
 4817              		@ args = 0, pretend = 0, frame = 8
 4818              		@ frame_needed = 1, uses_anonymous_args = 0
 4819 0000 80B5     		push	{r7, lr}
 4820              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cc6bdJLE.s 			page 105


 4821              		.cfi_offset 7, -8
 4822              		.cfi_offset 14, -4
 4823 0002 82B0     		sub	sp, sp, #8
 4824              		.cfi_def_cfa_offset 16
 4825 0004 00AF     		add	r7, sp, #0
 4826              		.cfi_def_cfa_register 7
1184:bluetooth_rxtx.c **** 	u16 mdmctrl;
1185:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4827              		.loc 1 1185 0
 4828 0006 2A4B     		ldr	r3, .L222
 4829 0008 1B78     		ldrb	r3, [r3]
 4830 000a DBB2     		uxtb	r3, r3
 4831 000c 002B     		cmp	r3, #0
 4832 000e 02D1     		bne	.L216
1186:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4833              		.loc 1 1186 0
 4834 0010 2923     		movs	r3, #41
 4835 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 4836 0014 08E0     		b	.L217
 4837              	.L216:
1187:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4838              		.loc 1 1187 0
 4839 0016 264B     		ldr	r3, .L222
 4840 0018 1B78     		ldrb	r3, [r3]
 4841 001a DBB2     		uxtb	r3, r3
 4842 001c 012B     		cmp	r3, #1
 4843 001e 02D1     		bne	.L218
1188:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4844              		.loc 1 1188 0
 4845 0020 4023     		movs	r3, #64
 4846 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 4847 0024 00E0     		b	.L217
 4848              	.L218:
1189:bluetooth_rxtx.c **** 	} else {
1190:bluetooth_rxtx.c **** 		/* oops */
1191:bluetooth_rxtx.c **** 		return;
 4849              		.loc 1 1191 0
 4850 0026 40E0     		b	.L215
 4851              	.L217:
1192:bluetooth_rxtx.c **** 	}
1193:bluetooth_rxtx.c **** 
1194:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4852              		.loc 1 1194 0
 4853 0028 0D20     		movs	r0, #13
 4854 002a 47F6FF71 		movw	r1, #32767
 4855 002e FFF7FEFF 		bl	cc2400_set
1195:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4856              		.loc 1 1195 0
 4857 0032 1220     		movs	r0, #18
 4858 0034 42F62231 		movw	r1, #11042
 4859 0038 FFF7FEFF 		bl	cc2400_set
1196:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 4860              		.loc 1 1196 0
 4861 003c 1420     		movs	r0, #20
 4862 003e 41F24B31 		movw	r1, #4939
 4863 0042 FFF7FEFF 		bl	cc2400_set
1197:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
ARM GAS  /tmp/cc6bdJLE.s 			page 106


 4864              		.loc 1 1197 0
 4865 0046 2020     		movs	r0, #32
 4866 0048 40F20111 		movw	r1, #257
 4867 004c FFF7FEFF 		bl	cc2400_set
1198:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1199:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1200:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1201:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1202:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1203:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1204:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 4868              		.loc 1 1204 0
 4869 0050 184B     		ldr	r3, .L222+4
 4870 0052 1B88     		ldrh	r3, [r3]	@ movhi
 4871 0054 9BB2     		uxth	r3, r3
 4872 0056 013B     		subs	r3, r3, #1
 4873 0058 9BB2     		uxth	r3, r3
 4874 005a 0220     		movs	r0, #2
 4875 005c 1946     		mov	r1, r3
 4876 005e FFF7FEFF 		bl	cc2400_set
1205:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 4877              		.loc 1 1205 0
 4878 0062 FB88     		ldrh	r3, [r7, #6]
 4879 0064 0320     		movs	r0, #3
 4880 0066 1946     		mov	r1, r3
 4881 0068 FFF7FEFF 		bl	cc2400_set
1206:bluetooth_rxtx.c **** 
1207:bluetooth_rxtx.c **** 	// Set up CS register
1208:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4882              		.loc 1 1208 0
 4883 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1209:bluetooth_rxtx.c **** 
1210:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4884              		.loc 1 1210 0
 4885 0070 00BF     		nop
 4886              	.L220:
 4887              		.loc 1 1210 0 is_stmt 0 discriminator 1
 4888 0072 FFF7FEFF 		bl	cc2400_status
 4889 0076 0346     		mov	r3, r0
 4890 0078 03F04003 		and	r3, r3, #64
 4891 007c 002B     		cmp	r3, #0
 4892 007e F8D0     		beq	.L220
1211:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4893              		.loc 1 1211 0 is_stmt 1
 4894 0080 6120     		movs	r0, #97
 4895 0082 FFF7FEFF 		bl	cc2400_strobe
1212:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4896              		.loc 1 1212 0
 4897 0086 00BF     		nop
 4898              	.L221:
 4899              		.loc 1 1212 0 is_stmt 0 discriminator 1
 4900 0088 FFF7FEFF 		bl	cc2400_status
 4901 008c 0346     		mov	r3, r0
 4902 008e 03F00403 		and	r3, r3, #4
 4903 0092 002B     		cmp	r3, #0
 4904 0094 F8D0     		beq	.L221
1213:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
ARM GAS  /tmp/cc6bdJLE.s 			page 107


 4905              		.loc 1 1213 0 is_stmt 1
 4906 0096 6220     		movs	r0, #98
 4907 0098 FFF7FEFF 		bl	cc2400_strobe
1214:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1215:bluetooth_rxtx.c **** 	PAEN_SET;
 4908              		.loc 1 1215 0
 4909 009c 064B     		ldr	r3, .L222+8
 4910 009e 8022     		movs	r2, #128
 4911 00a0 1A60     		str	r2, [r3]
1216:bluetooth_rxtx.c **** 	HGM_SET;
 4912              		.loc 1 1216 0
 4913 00a2 054B     		ldr	r3, .L222+8
 4914 00a4 4FF48072 		mov	r2, #256
 4915 00a8 1A60     		str	r2, [r3]
 4916              	.L215:
1217:bluetooth_rxtx.c **** #endif
1218:bluetooth_rxtx.c **** }
 4917              		.loc 1 1218 0
 4918 00aa 0837     		adds	r7, r7, #8
 4919              		.cfi_def_cfa_offset 8
 4920 00ac BD46     		mov	sp, r7
 4921              		.cfi_def_cfa_register 13
 4922              		@ sp needed
 4923 00ae 80BD     		pop	{r7, pc}
 4924              	.L223:
 4925              		.align	2
 4926              	.L222:
 4927 00b0 00000000 		.word	modulation
 4928 00b4 00000000 		.word	channel
 4929 00b8 58C00920 		.word	537509976
 4930              		.cfi_endproc
 4931              	.LFE21:
 4933              		.section	.text.cc2400_rx_sync,"ax",%progbits
 4934              		.align	2
 4935              		.thumb
 4936              		.thumb_func
 4938              	cc2400_rx_sync:
 4939              	.LFB22:
1219:bluetooth_rxtx.c **** 
1220:bluetooth_rxtx.c **** /* start un-buffered rx */
1221:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1222:bluetooth_rxtx.c **** {
 4940              		.loc 1 1222 0
 4941              		.cfi_startproc
 4942              		@ args = 0, pretend = 0, frame = 16
 4943              		@ frame_needed = 1, uses_anonymous_args = 0
 4944 0000 80B5     		push	{r7, lr}
 4945              		.cfi_def_cfa_offset 8
 4946              		.cfi_offset 7, -8
 4947              		.cfi_offset 14, -4
 4948 0002 84B0     		sub	sp, sp, #16
 4949              		.cfi_def_cfa_offset 24
 4950 0004 00AF     		add	r7, sp, #0
 4951              		.cfi_def_cfa_register 7
 4952 0006 7860     		str	r0, [r7, #4]
1223:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1224:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 108


1225:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4953              		.loc 1 1225 0
 4954 0008 334B     		ldr	r3, .L231
 4955 000a 1B78     		ldrb	r3, [r3]
 4956 000c DBB2     		uxtb	r3, r3
 4957 000e 002B     		cmp	r3, #0
 4958 0010 05D1     		bne	.L225
1226:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4959              		.loc 1 1226 0
 4960 0012 2923     		movs	r3, #41
 4961 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1227:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 4962              		.loc 1 1227 0
 4963 0016 40F26143 		movw	r3, #1121
 4964 001a FB81     		strh	r3, [r7, #14]	@ movhi
 4965 001c 0BE0     		b	.L226
 4966              	.L225:
1228:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1229:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1230:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1231:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1232:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1233:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1234:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1235:bluetooth_rxtx.c **** 
1236:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4967              		.loc 1 1236 0
 4968 001e 2E4B     		ldr	r3, .L231
 4969 0020 1B78     		ldrb	r3, [r3]
 4970 0022 DBB2     		uxtb	r3, r3
 4971 0024 012B     		cmp	r3, #1
 4972 0026 05D1     		bne	.L227
1237:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4973              		.loc 1 1237 0
 4974 0028 4023     		movs	r3, #64
 4975 002a BB81     		strh	r3, [r7, #12]	@ movhi
1238:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 4976              		.loc 1 1238 0
 4977 002c 40F26153 		movw	r3, #1377
 4978 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 4979 0032 00E0     		b	.L226
 4980              	.L227:
1239:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1240:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1241:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1242:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1243:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1244:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1245:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1246:bluetooth_rxtx.c **** 
1247:bluetooth_rxtx.c **** 	} else {
1248:bluetooth_rxtx.c **** 		/* oops */
1249:bluetooth_rxtx.c **** 		return;
 4981              		.loc 1 1249 0
 4982 0034 4DE0     		b	.L224
 4983              	.L226:
1250:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/cc6bdJLE.s 			page 109


1251:bluetooth_rxtx.c **** 
1252:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4984              		.loc 1 1252 0
 4985 0036 0D20     		movs	r0, #13
 4986 0038 47F6FF71 		movw	r1, #32767
 4987 003c FFF7FEFF 		bl	cc2400_set
1253:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4988              		.loc 1 1253 0
 4989 0040 1220     		movs	r0, #18
 4990 0042 42F62231 		movw	r1, #11042
 4991 0046 FFF7FEFF 		bl	cc2400_set
1254:bluetooth_rxtx.c **** 
1255:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 4992              		.loc 1 1255 0
 4993 004a 1420     		movs	r0, #20
 4994 004c 41F24B21 		movw	r1, #4683
 4995 0050 FFF7FEFF 		bl	cc2400_set
1256:bluetooth_rxtx.c **** 	// 1      2      4b
1257:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1258:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1259:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1260:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1261:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1262:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1263:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1264:bluetooth_rxtx.c **** 	//
1265:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1266:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1267:bluetooth_rxtx.c **** 
1268:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 4996              		.loc 1 1268 0
 4997 0054 FB89     		ldrh	r3, [r7, #14]
 4998 0056 2020     		movs	r0, #32
 4999 0058 1946     		mov	r1, r3
 5000 005a FFF7FEFF 		bl	cc2400_set
1269:bluetooth_rxtx.c **** 
1270:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5001              		.loc 1 1270 0
 5002 005e 7B68     		ldr	r3, [r7, #4]
 5003 0060 9BB2     		uxth	r3, r3
 5004 0062 2C20     		movs	r0, #44
 5005 0064 1946     		mov	r1, r3
 5006 0066 FFF7FEFF 		bl	cc2400_set
1271:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5007              		.loc 1 1271 0
 5008 006a 7B68     		ldr	r3, [r7, #4]
 5009 006c 1B0C     		lsrs	r3, r3, #16
 5010 006e 9BB2     		uxth	r3, r3
 5011 0070 2D20     		movs	r0, #45
 5012 0072 1946     		mov	r1, r3
 5013 0074 FFF7FEFF 		bl	cc2400_set
1272:bluetooth_rxtx.c **** 	
1273:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5014              		.loc 1 1273 0
 5015 0078 184B     		ldr	r3, .L231+4
 5016 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5017 007c 9BB2     		uxth	r3, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 110


 5018 007e 013B     		subs	r3, r3, #1
 5019 0080 9BB2     		uxth	r3, r3
 5020 0082 0220     		movs	r0, #2
 5021 0084 1946     		mov	r1, r3
 5022 0086 FFF7FEFF 		bl	cc2400_set
1274:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5023              		.loc 1 1274 0
 5024 008a BB89     		ldrh	r3, [r7, #12]
 5025 008c 0320     		movs	r0, #3
 5026 008e 1946     		mov	r1, r3
 5027 0090 FFF7FEFF 		bl	cc2400_set
1275:bluetooth_rxtx.c **** 
1276:bluetooth_rxtx.c **** 	// Set up CS register
1277:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5028              		.loc 1 1277 0
 5029 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1278:bluetooth_rxtx.c **** 
1279:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5030              		.loc 1 1279 0
 5031 0098 00BF     		nop
 5032              	.L229:
 5033              		.loc 1 1279 0 is_stmt 0 discriminator 1
 5034 009a FFF7FEFF 		bl	cc2400_status
 5035 009e 0346     		mov	r3, r0
 5036 00a0 03F04003 		and	r3, r3, #64
 5037 00a4 002B     		cmp	r3, #0
 5038 00a6 F8D0     		beq	.L229
1280:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5039              		.loc 1 1280 0 is_stmt 1
 5040 00a8 6120     		movs	r0, #97
 5041 00aa FFF7FEFF 		bl	cc2400_strobe
1281:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5042              		.loc 1 1281 0
 5043 00ae 00BF     		nop
 5044              	.L230:
 5045              		.loc 1 1281 0 is_stmt 0 discriminator 1
 5046 00b0 FFF7FEFF 		bl	cc2400_status
 5047 00b4 0346     		mov	r3, r0
 5048 00b6 03F00403 		and	r3, r3, #4
 5049 00ba 002B     		cmp	r3, #0
 5050 00bc F8D0     		beq	.L230
1282:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5051              		.loc 1 1282 0 is_stmt 1
 5052 00be 6220     		movs	r0, #98
 5053 00c0 FFF7FEFF 		bl	cc2400_strobe
1283:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1284:bluetooth_rxtx.c **** 	PAEN_SET;
 5054              		.loc 1 1284 0
 5055 00c4 064B     		ldr	r3, .L231+8
 5056 00c6 8022     		movs	r2, #128
 5057 00c8 1A60     		str	r2, [r3]
1285:bluetooth_rxtx.c **** 	HGM_SET;
 5058              		.loc 1 1285 0
 5059 00ca 054B     		ldr	r3, .L231+8
 5060 00cc 4FF48072 		mov	r2, #256
 5061 00d0 1A60     		str	r2, [r3]
 5062              	.L224:
ARM GAS  /tmp/cc6bdJLE.s 			page 111


1286:bluetooth_rxtx.c **** #endif
1287:bluetooth_rxtx.c **** }
 5063              		.loc 1 1287 0
 5064 00d2 1037     		adds	r7, r7, #16
 5065              		.cfi_def_cfa_offset 8
 5066 00d4 BD46     		mov	sp, r7
 5067              		.cfi_def_cfa_register 13
 5068              		@ sp needed
 5069 00d6 80BD     		pop	{r7, pc}
 5070              	.L232:
 5071              		.align	2
 5072              	.L231:
 5073 00d8 00000000 		.word	modulation
 5074 00dc 00000000 		.word	channel
 5075 00e0 58C00920 		.word	537509976
 5076              		.cfi_endproc
 5077              	.LFE22:
 5079              		.section	.text.le_transmit,"ax",%progbits
 5080              		.align	2
 5081              		.global	le_transmit
 5082              		.thumb
 5083              		.thumb_func
 5085              	le_transmit:
 5086              	.LFB23:
1288:bluetooth_rxtx.c **** 
1289:bluetooth_rxtx.c **** /*
1290:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1291:bluetooth_rxtx.c ****  *
1292:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1293:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1294:bluetooth_rxtx.c ****  * included in the data length.
1295:bluetooth_rxtx.c ****  */
1296:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1297:bluetooth_rxtx.c **** {
 5087              		.loc 1 1297 0
 5088              		.cfi_startproc
 5089              		@ args = 0, pretend = 0, frame = 104
 5090              		@ frame_needed = 1, uses_anonymous_args = 0
 5091 0000 80B5     		push	{r7, lr}
 5092              		.cfi_def_cfa_offset 8
 5093              		.cfi_offset 7, -8
 5094              		.cfi_offset 14, -4
 5095 0002 9AB0     		sub	sp, sp, #104
 5096              		.cfi_def_cfa_offset 112
 5097 0004 00AF     		add	r7, sp, #0
 5098              		.cfi_def_cfa_register 7
 5099 0006 F860     		str	r0, [r7, #12]
 5100 0008 0B46     		mov	r3, r1
 5101 000a 7A60     		str	r2, [r7, #4]
 5102 000c FB72     		strb	r3, [r7, #11]
1298:bluetooth_rxtx.c **** 	unsigned i, j;
1299:bluetooth_rxtx.c **** 	int bit;
1300:bluetooth_rxtx.c **** 	u8 txbuf[64];
1301:bluetooth_rxtx.c **** 	u8 tx_len;
1302:bluetooth_rxtx.c **** 	u8 byte;
1303:bluetooth_rxtx.c **** 	u16 gio_save;
1304:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 112


1305:bluetooth_rxtx.c **** 	// first four bytes: AA
1306:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5103              		.loc 1 1306 0
 5104 000e 0023     		movs	r3, #0
 5105 0010 7B66     		str	r3, [r7, #100]
 5106 0012 35E0     		b	.L234
 5107              	.L237:
1307:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5108              		.loc 1 1307 0
 5109 0014 FB68     		ldr	r3, [r7, #12]
 5110 0016 87F85E30 		strb	r3, [r7, #94]
1308:bluetooth_rxtx.c **** 		aa >>= 8;
 5111              		.loc 1 1308 0
 5112 001a FB68     		ldr	r3, [r7, #12]
 5113 001c 1B0A     		lsrs	r3, r3, #8
 5114 001e FB60     		str	r3, [r7, #12]
1309:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5115              		.loc 1 1309 0
 5116 0020 07F11002 		add	r2, r7, #16
 5117 0024 7B6E     		ldr	r3, [r7, #100]
 5118 0026 1344     		add	r3, r3, r2
 5119 0028 0022     		movs	r2, #0
 5120 002a 1A70     		strb	r2, [r3]
1310:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5121              		.loc 1 1310 0
 5122 002c 0023     		movs	r3, #0
 5123 002e 3B66     		str	r3, [r7, #96]
 5124 0030 20E0     		b	.L235
 5125              	.L236:
1311:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5126              		.loc 1 1311 0 discriminator 3
 5127 0032 07F11002 		add	r2, r7, #16
 5128 0036 7B6E     		ldr	r3, [r7, #100]
 5129 0038 1344     		add	r3, r3, r2
 5130 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5131 003c D9B2     		uxtb	r1, r3
 5132 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5133 0042 03F00103 		and	r3, r3, #1
 5134 0046 3A6E     		ldr	r2, [r7, #96]
 5135 0048 C2F10702 		rsb	r2, r2, #7
 5136 004c 9340     		lsls	r3, r3, r2
 5137 004e DBB2     		uxtb	r3, r3
 5138 0050 0A46     		mov	r2, r1
 5139 0052 1343     		orrs	r3, r3, r2
 5140 0054 DBB2     		uxtb	r3, r3
 5141 0056 D9B2     		uxtb	r1, r3
 5142 0058 07F11002 		add	r2, r7, #16
 5143 005c 7B6E     		ldr	r3, [r7, #100]
 5144 005e 1344     		add	r3, r3, r2
 5145 0060 0A46     		mov	r2, r1
 5146 0062 1A70     		strb	r2, [r3]
1312:bluetooth_rxtx.c **** 			byte >>= 1;
 5147              		.loc 1 1312 0 discriminator 3
 5148 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5149 0068 5B08     		lsrs	r3, r3, #1
 5150 006a 87F85E30 		strb	r3, [r7, #94]
1310:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
ARM GAS  /tmp/cc6bdJLE.s 			page 113


 5151              		.loc 1 1310 0 discriminator 3
 5152 006e 3B6E     		ldr	r3, [r7, #96]
 5153 0070 0133     		adds	r3, r3, #1
 5154 0072 3B66     		str	r3, [r7, #96]
 5155              	.L235:
1310:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5156              		.loc 1 1310 0 is_stmt 0 discriminator 1
 5157 0074 3B6E     		ldr	r3, [r7, #96]
 5158 0076 072B     		cmp	r3, #7
 5159 0078 DBD9     		bls	.L236
1306:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5160              		.loc 1 1306 0 is_stmt 1 discriminator 2
 5161 007a 7B6E     		ldr	r3, [r7, #100]
 5162 007c 0133     		adds	r3, r3, #1
 5163 007e 7B66     		str	r3, [r7, #100]
 5164              	.L234:
1306:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5165              		.loc 1 1306 0 is_stmt 0 discriminator 1
 5166 0080 7B6E     		ldr	r3, [r7, #100]
 5167 0082 032B     		cmp	r3, #3
 5168 0084 C6D9     		bls	.L237
1313:bluetooth_rxtx.c **** 		}
1314:bluetooth_rxtx.c **** 	}
1315:bluetooth_rxtx.c **** 
1316:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1317:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5169              		.loc 1 1317 0 is_stmt 1
 5170 0086 934B     		ldr	r3, .L253
 5171 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5172 008a 9BB2     		uxth	r3, r3
 5173 008c DBB2     		uxtb	r3, r3
 5174 008e 623B     		subs	r3, r3, #98
 5175 0090 DBB2     		uxtb	r3, r3
 5176 0092 1846     		mov	r0, r3
 5177 0094 FFF7FEFF 		bl	btle_channel_index
 5178 0098 0346     		mov	r3, r0
 5179 009a 1A46     		mov	r2, r3
 5180 009c 8E4B     		ldr	r3, .L253+4
 5181 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5182 00a0 BB65     		str	r3, [r7, #88]
1318:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5183              		.loc 1 1318 0
 5184 00a2 0023     		movs	r3, #0
 5185 00a4 7B66     		str	r3, [r7, #100]
 5186 00a6 50E0     		b	.L238
 5187              	.L241:
1319:bluetooth_rxtx.c **** 		byte = data[i];
 5188              		.loc 1 1319 0
 5189 00a8 7A68     		ldr	r2, [r7, #4]
 5190 00aa 7B6E     		ldr	r3, [r7, #100]
 5191 00ac 1344     		add	r3, r3, r2
 5192 00ae 1B78     		ldrb	r3, [r3]
 5193 00b0 87F85E30 		strb	r3, [r7, #94]
1320:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5194              		.loc 1 1320 0
 5195 00b4 7B6E     		ldr	r3, [r7, #100]
 5196 00b6 0433     		adds	r3, r3, #4
ARM GAS  /tmp/cc6bdJLE.s 			page 114


 5197 00b8 07F16802 		add	r2, r7, #104
 5198 00bc 1344     		add	r3, r3, r2
 5199 00be 0022     		movs	r2, #0
 5200 00c0 03F8582C 		strb	r2, [r3, #-88]
1321:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5201              		.loc 1 1321 0
 5202 00c4 0023     		movs	r3, #0
 5203 00c6 3B66     		str	r3, [r7, #96]
 5204 00c8 39E0     		b	.L239
 5205              	.L240:
1322:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5206              		.loc 1 1322 0 discriminator 3
 5207 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5208 00ce 03F00103 		and	r3, r3, #1
 5209 00d2 8249     		ldr	r1, .L253+8
 5210 00d4 BA6D     		ldr	r2, [r7, #88]
 5211 00d6 0A44     		add	r2, r2, r1
 5212 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5213 00da 5340     		eors	r3, r3, r2
 5214 00dc 7B65     		str	r3, [r7, #84]
1323:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5215              		.loc 1 1323 0 discriminator 3
 5216 00de BB6D     		ldr	r3, [r7, #88]
 5217 00e0 0133     		adds	r3, r3, #1
 5218 00e2 1946     		mov	r1, r3
 5219 00e4 7E4B     		ldr	r3, .L253+12
 5220 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5221 00ea C81A     		subs	r0, r1, r3
 5222 00ec 4008     		lsrs	r0, r0, #1
 5223 00ee 0344     		add	r3, r3, r0
 5224 00f0 9A09     		lsrs	r2, r3, #6
 5225 00f2 1346     		mov	r3, r2
 5226 00f4 DB01     		lsls	r3, r3, #7
 5227 00f6 9B1A     		subs	r3, r3, r2
 5228 00f8 CA1A     		subs	r2, r1, r3
 5229 00fa BA65     		str	r2, [r7, #88]
1324:bluetooth_rxtx.c **** 			byte >>= 1;
 5230              		.loc 1 1324 0 discriminator 3
 5231 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5232 0100 5B08     		lsrs	r3, r3, #1
 5233 0102 87F85E30 		strb	r3, [r7, #94]
1325:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5234              		.loc 1 1325 0 discriminator 3
 5235 0106 7B6E     		ldr	r3, [r7, #100]
 5236 0108 0433     		adds	r3, r3, #4
 5237 010a 7A6E     		ldr	r2, [r7, #100]
 5238 010c 0432     		adds	r2, r2, #4
 5239 010e 07F16801 		add	r1, r7, #104
 5240 0112 0A44     		add	r2, r2, r1
 5241 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5242 0118 D1B2     		uxtb	r1, r2
 5243 011a 3A6E     		ldr	r2, [r7, #96]
 5244 011c C2F10702 		rsb	r2, r2, #7
 5245 0120 1046     		mov	r0, r2
 5246 0122 7A6D     		ldr	r2, [r7, #84]
 5247 0124 8240     		lsls	r2, r2, r0
 5248 0126 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/cc6bdJLE.s 			page 115


 5249 0128 0A43     		orrs	r2, r2, r1
 5250 012a D2B2     		uxtb	r2, r2
 5251 012c D2B2     		uxtb	r2, r2
 5252 012e 07F16801 		add	r1, r7, #104
 5253 0132 0B44     		add	r3, r3, r1
 5254 0134 03F8582C 		strb	r2, [r3, #-88]
1321:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5255              		.loc 1 1321 0 discriminator 3
 5256 0138 3B6E     		ldr	r3, [r7, #96]
 5257 013a 0133     		adds	r3, r3, #1
 5258 013c 3B66     		str	r3, [r7, #96]
 5259              	.L239:
1321:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5260              		.loc 1 1321 0 is_stmt 0 discriminator 1
 5261 013e 3B6E     		ldr	r3, [r7, #96]
 5262 0140 072B     		cmp	r3, #7
 5263 0142 C2D9     		bls	.L240
1318:bluetooth_rxtx.c **** 		byte = data[i];
 5264              		.loc 1 1318 0 is_stmt 1 discriminator 2
 5265 0144 7B6E     		ldr	r3, [r7, #100]
 5266 0146 0133     		adds	r3, r3, #1
 5267 0148 7B66     		str	r3, [r7, #100]
 5268              	.L238:
1318:bluetooth_rxtx.c **** 		byte = data[i];
 5269              		.loc 1 1318 0 is_stmt 0 discriminator 1
 5270 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5271 014c 7B6E     		ldr	r3, [r7, #100]
 5272 014e 9A42     		cmp	r2, r3
 5273 0150 AAD8     		bhi	.L241
1326:bluetooth_rxtx.c **** 		}
1327:bluetooth_rxtx.c **** 	}
1328:bluetooth_rxtx.c **** 
1329:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5274              		.loc 1 1329 0 is_stmt 1
 5275 0152 FB7A     		ldrb	r3, [r7, #11]
 5276 0154 0433     		adds	r3, r3, #4
 5277 0156 FB72     		strb	r3, [r7, #11]
1330:bluetooth_rxtx.c **** 
1331:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1332:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5278              		.loc 1 1332 0
 5279 0158 0D20     		movs	r0, #13
 5280 015a 47F6FF71 		movw	r1, #32767
 5281 015e FFF7FEFF 		bl	cc2400_set
1333:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5282              		.loc 1 1333 0
 5283 0162 1220     		movs	r0, #18
 5284 0164 42F62231 		movw	r1, #11042
 5285 0168 FFF7FEFF 		bl	cc2400_set
1334:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5286              		.loc 1 1334 0
 5287 016c 1420     		movs	r0, #20
 5288 016e 41F24B31 		movw	r1, #4939
 5289 0172 FFF7FEFF 		bl	cc2400_set
1335:bluetooth_rxtx.c **** 
1336:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5290              		.loc 1 1336 0
ARM GAS  /tmp/cc6bdJLE.s 			page 116


 5291 0176 2020     		movs	r0, #32
 5292 0178 40F60141 		movw	r1, #3073
 5293 017c FFF7FEFF 		bl	cc2400_set
1337:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1338:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1339:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1340:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1341:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1342:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1343:bluetooth_rxtx.c **** 
1344:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5294              		.loc 1 1344 0
 5295 0180 544B     		ldr	r3, .L253
 5296 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5297 0184 9BB2     		uxth	r3, r3
 5298 0186 0220     		movs	r0, #2
 5299 0188 1946     		mov	r1, r3
 5300 018a FFF7FEFF 		bl	cc2400_set
1345:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5301              		.loc 1 1345 0
 5302 018e 0520     		movs	r0, #5
 5303 0190 0B21     		movs	r1, #11
 5304 0192 FFF7FEFF 		bl	cc2400_set
1346:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5305              		.loc 1 1346 0
 5306 0196 0320     		movs	r0, #3
 5307 0198 4021     		movs	r1, #64
 5308 019a FFF7FEFF 		bl	cc2400_set
1347:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5309              		.loc 1 1347 0
 5310 019e 2320     		movs	r0, #35
 5311 01a0 1421     		movs	r1, #20
 5312 01a2 FFF7FEFF 		bl	cc2400_set
1348:bluetooth_rxtx.c **** 
1349:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1350:bluetooth_rxtx.c **** 	if (aa & 1)
 5313              		.loc 1 1350 0
 5314 01a6 FB68     		ldr	r3, [r7, #12]
 5315 01a8 03F00103 		and	r3, r3, #1
 5316 01ac 002B     		cmp	r3, #0
 5317 01ae 05D0     		beq	.L242
1351:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5318              		.loc 1 1351 0
 5319 01b0 2D20     		movs	r0, #45
 5320 01b2 4AF6AA21 		movw	r1, #43690
 5321 01b6 FFF7FEFF 		bl	cc2400_set
 5322 01ba 04E0     		b	.L243
 5323              	.L242:
1352:bluetooth_rxtx.c **** 	else
1353:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5324              		.loc 1 1353 0
 5325 01bc 2D20     		movs	r0, #45
 5326 01be 45F25551 		movw	r1, #21845
 5327 01c2 FFF7FEFF 		bl	cc2400_set
 5328              	.L243:
1354:bluetooth_rxtx.c **** 
1355:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
ARM GAS  /tmp/cc6bdJLE.s 			page 117


1356:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5329              		.loc 1 1356 0
 5330 01c6 0820     		movs	r0, #8
 5331 01c8 FFF7FEFF 		bl	cc2400_get
 5332 01cc 0346     		mov	r3, r0
 5333 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1357:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5334              		.loc 1 1357 0
 5335 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5336 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5337 01da 9BB2     		uxth	r3, r3
 5338 01dc 43F49C43 		orr	r3, r3, #19968
 5339 01e0 9BB2     		uxth	r3, r3
 5340 01e2 9BB2     		uxth	r3, r3
 5341 01e4 0820     		movs	r0, #8
 5342 01e6 1946     		mov	r1, r3
 5343 01e8 FFF7FEFF 		bl	cc2400_set
1358:bluetooth_rxtx.c **** 
1359:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5344              		.loc 1 1359 0
 5345 01ec 00BF     		nop
 5346              	.L244:
 5347              		.loc 1 1359 0 is_stmt 0 discriminator 1
 5348 01ee FFF7FEFF 		bl	cc2400_status
 5349 01f2 0346     		mov	r3, r0
 5350 01f4 03F04003 		and	r3, r3, #64
 5351 01f8 002B     		cmp	r3, #0
 5352 01fa F8D0     		beq	.L244
1360:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5353              		.loc 1 1360 0 is_stmt 1
 5354 01fc 6120     		movs	r0, #97
 5355 01fe FFF7FEFF 		bl	cc2400_strobe
1361:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5356              		.loc 1 1361 0
 5357 0202 00BF     		nop
 5358              	.L245:
 5359              		.loc 1 1361 0 is_stmt 0 discriminator 1
 5360 0204 FFF7FEFF 		bl	cc2400_status
 5361 0208 0346     		mov	r3, r0
 5362 020a 03F00403 		and	r3, r3, #4
 5363 020e 002B     		cmp	r3, #0
 5364 0210 F8D0     		beq	.L245
1362:bluetooth_rxtx.c **** 	TXLED_SET;
 5365              		.loc 1 1362 0 is_stmt 1
 5366 0212 344B     		ldr	r3, .L253+16
 5367 0214 4FF48072 		mov	r2, #256
 5368 0218 1A60     		str	r2, [r3]
1363:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1364:bluetooth_rxtx.c **** 	PAEN_SET;
 5369              		.loc 1 1364 0
 5370 021a 334B     		ldr	r3, .L253+20
 5371 021c 8022     		movs	r2, #128
 5372 021e 1A60     		str	r2, [r3]
1365:bluetooth_rxtx.c **** #endif
1366:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5373              		.loc 1 1366 0
 5374 0220 00BF     		nop
ARM GAS  /tmp/cc6bdJLE.s 			page 118


 5375              	.L246:
 5376              		.loc 1 1366 0 is_stmt 0 discriminator 1
 5377 0222 0E20     		movs	r0, #14
 5378 0224 FFF7FEFF 		bl	cc2400_get
 5379 0228 0346     		mov	r3, r0
 5380 022a 03F01F03 		and	r3, r3, #31
 5381 022e 0F2B     		cmp	r3, #15
 5382 0230 F7D1     		bne	.L246
1367:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5383              		.loc 1 1367 0 is_stmt 1
 5384 0232 6320     		movs	r0, #99
 5385 0234 FFF7FEFF 		bl	cc2400_strobe
1368:bluetooth_rxtx.c **** 
1369:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1370:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5386              		.loc 1 1370 0
 5387 0238 0023     		movs	r3, #0
 5388 023a 7B66     		str	r3, [r7, #100]
 5389 023c 21E0     		b	.L247
 5390              	.L250:
1371:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5391              		.loc 1 1371 0
 5392 023e 00BF     		nop
 5393              	.L248:
 5394              		.loc 1 1371 0 is_stmt 0 discriminator 1
 5395 0240 2A4B     		ldr	r3, .L253+24
 5396 0242 1B68     		ldr	r3, [r3]
 5397 0244 03F00403 		and	r3, r3, #4
 5398 0248 002B     		cmp	r3, #0
 5399 024a F9D1     		bne	.L248
1372:bluetooth_rxtx.c **** 		tx_len = len - i;
 5400              		.loc 1 1372 0 is_stmt 1
 5401 024c 7B6E     		ldr	r3, [r7, #100]
 5402 024e DBB2     		uxtb	r3, r3
 5403 0250 FA7A     		ldrb	r2, [r7, #11]
 5404 0252 D31A     		subs	r3, r2, r3
 5405 0254 87F85F30 		strb	r3, [r7, #95]
1373:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5406              		.loc 1 1373 0
 5407 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5408 025c 102B     		cmp	r3, #16
 5409 025e 02D9     		bls	.L249
1374:bluetooth_rxtx.c **** 			tx_len = 16;
 5410              		.loc 1 1374 0
 5411 0260 1023     		movs	r3, #16
 5412 0262 87F85F30 		strb	r3, [r7, #95]
 5413              	.L249:
1375:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5414              		.loc 1 1375 0 discriminator 2
 5415 0266 07F11002 		add	r2, r7, #16
 5416 026a 7B6E     		ldr	r3, [r7, #100]
 5417 026c 1344     		add	r3, r3, r2
 5418 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5419 0272 7020     		movs	r0, #112
 5420 0274 1146     		mov	r1, r2
 5421 0276 1A46     		mov	r2, r3
 5422 0278 FFF7FEFF 		bl	cc2400_spi_buf
ARM GAS  /tmp/cc6bdJLE.s 			page 119


1370:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5423              		.loc 1 1370 0 discriminator 2
 5424 027c 7B6E     		ldr	r3, [r7, #100]
 5425 027e 1033     		adds	r3, r3, #16
 5426 0280 7B66     		str	r3, [r7, #100]
 5427              	.L247:
1370:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5428              		.loc 1 1370 0 is_stmt 0 discriminator 1
 5429 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5430 0284 7B6E     		ldr	r3, [r7, #100]
 5431 0286 9A42     		cmp	r2, r3
 5432 0288 D9D8     		bhi	.L250
1376:bluetooth_rxtx.c **** 	}
1377:bluetooth_rxtx.c **** 
1378:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5433              		.loc 1 1378 0 is_stmt 1
 5434 028a 00BF     		nop
 5435              	.L251:
 5436              		.loc 1 1378 0 is_stmt 0 discriminator 1
 5437 028c 0E20     		movs	r0, #14
 5438 028e FFF7FEFF 		bl	cc2400_get
 5439 0292 0346     		mov	r3, r0
 5440 0294 03F01F03 		and	r3, r3, #31
 5441 0298 0F2B     		cmp	r3, #15
 5442 029a F7D1     		bne	.L251
1379:bluetooth_rxtx.c **** 	TXLED_CLR;
 5443              		.loc 1 1379 0 is_stmt 1
 5444 029c 144B     		ldr	r3, .L253+28
 5445 029e 4FF48072 		mov	r2, #256
 5446 02a2 1A60     		str	r2, [r3]
1380:bluetooth_rxtx.c **** 
1381:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5447              		.loc 1 1381 0
 5448 02a4 6420     		movs	r0, #100
 5449 02a6 FFF7FEFF 		bl	cc2400_strobe
1382:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5450              		.loc 1 1382 0
 5451 02aa 00BF     		nop
 5452              	.L252:
 5453              		.loc 1 1382 0 is_stmt 0 discriminator 1
 5454 02ac FFF7FEFF 		bl	cc2400_status
 5455 02b0 0346     		mov	r3, r0
 5456 02b2 03F00403 		and	r3, r3, #4
 5457 02b6 002B     		cmp	r3, #0
 5458 02b8 F8D1     		bne	.L252
1383:bluetooth_rxtx.c **** 
1384:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1385:bluetooth_rxtx.c **** 	PAEN_CLR;
 5459              		.loc 1 1385 0 is_stmt 1
 5460 02ba 0E4B     		ldr	r3, .L253+32
 5461 02bc 8022     		movs	r2, #128
 5462 02be 1A60     		str	r2, [r3]
1386:bluetooth_rxtx.c **** #endif
1387:bluetooth_rxtx.c **** 
1388:bluetooth_rxtx.c **** 	// reset GIO
1389:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5463              		.loc 1 1389 0
ARM GAS  /tmp/cc6bdJLE.s 			page 120


 5464 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5465 02c4 0820     		movs	r0, #8
 5466 02c6 1946     		mov	r1, r3
 5467 02c8 FFF7FEFF 		bl	cc2400_set
1390:bluetooth_rxtx.c **** }
 5468              		.loc 1 1390 0
 5469 02cc 6837     		adds	r7, r7, #104
 5470              		.cfi_def_cfa_offset 8
 5471 02ce BD46     		mov	sp, r7
 5472              		.cfi_def_cfa_register 13
 5473              		@ sp needed
 5474 02d0 80BD     		pop	{r7, pc}
 5475              	.L254:
 5476 02d2 00BF     		.align	2
 5477              	.L253:
 5478 02d4 00000000 		.word	channel
 5479 02d8 C0000000 		.word	whitening_index
 5480 02dc 40000000 		.word	whitening
 5481 02e0 11080402 		.word	33818641
 5482 02e4 38C00920 		.word	537509944
 5483 02e8 58C00920 		.word	537509976
 5484 02ec 54C00920 		.word	537509972
 5485 02f0 3CC00920 		.word	537509948
 5486 02f4 5CC00920 		.word	537509980
 5487              		.cfi_endproc
 5488              	.LFE23:
 5490              		.section	.text.le_jam,"ax",%progbits
 5491              		.align	2
 5492              		.global	le_jam
 5493              		.thumb
 5494              		.thumb_func
 5496              	le_jam:
 5497              	.LFB24:
1391:bluetooth_rxtx.c **** 
1392:bluetooth_rxtx.c **** void le_jam(void) {
 5498              		.loc 1 1392 0
 5499              		.cfi_startproc
 5500              		@ args = 0, pretend = 0, frame = 0
 5501              		@ frame_needed = 1, uses_anonymous_args = 0
 5502 0000 80B5     		push	{r7, lr}
 5503              		.cfi_def_cfa_offset 8
 5504              		.cfi_offset 7, -8
 5505              		.cfi_offset 14, -4
 5506 0002 00AF     		add	r7, sp, #0
 5507              		.cfi_def_cfa_register 7
1393:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1394:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5508              		.loc 1 1394 0
 5509 0004 0D20     		movs	r0, #13
 5510 0006 47F6FF71 		movw	r1, #32767
 5511 000a FFF7FEFF 		bl	cc2400_set
1395:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5512              		.loc 1 1395 0
 5513 000e 1220     		movs	r0, #18
 5514 0010 42F62231 		movw	r1, #11042
 5515 0014 FFF7FEFF 		bl	cc2400_set
1396:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
ARM GAS  /tmp/cc6bdJLE.s 			page 121


 5516              		.loc 1 1396 0
 5517 0018 1420     		movs	r0, #20
 5518 001a 42F24B31 		movw	r1, #9035
 5519 001e FFF7FEFF 		bl	cc2400_set
1397:bluetooth_rxtx.c **** 
1398:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5520              		.loc 1 1398 0
 5521 0022 2020     		movs	r0, #32
 5522 0024 40F60141 		movw	r1, #3073
 5523 0028 FFF7FEFF 		bl	cc2400_set
1399:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1400:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1401:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1402:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1403:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1404:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1405:bluetooth_rxtx.c **** 
1406:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1407:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5524              		.loc 1 1407 0
 5525 002c 0520     		movs	r0, #5
 5526 002e 0B21     		movs	r1, #11
 5527 0030 FFF7FEFF 		bl	cc2400_set
1408:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5528              		.loc 1 1408 0
 5529 0034 0320     		movs	r0, #3
 5530 0036 4021     		movs	r1, #64
 5531 0038 FFF7FEFF 		bl	cc2400_set
1409:bluetooth_rxtx.c **** 
1410:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5532              		.loc 1 1410 0
 5533 003c 00BF     		nop
 5534              	.L256:
 5535              		.loc 1 1410 0 is_stmt 0 discriminator 1
 5536 003e FFF7FEFF 		bl	cc2400_status
 5537 0042 0346     		mov	r3, r0
 5538 0044 03F04003 		and	r3, r3, #64
 5539 0048 002B     		cmp	r3, #0
 5540 004a F8D0     		beq	.L256
1411:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5541              		.loc 1 1411 0 is_stmt 1
 5542 004c 6120     		movs	r0, #97
 5543 004e FFF7FEFF 		bl	cc2400_strobe
1412:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5544              		.loc 1 1412 0
 5545 0052 00BF     		nop
 5546              	.L257:
 5547              		.loc 1 1412 0 is_stmt 0 discriminator 1
 5548 0054 FFF7FEFF 		bl	cc2400_status
 5549 0058 0346     		mov	r3, r0
 5550 005a 03F00403 		and	r3, r3, #4
 5551 005e 002B     		cmp	r3, #0
 5552 0060 F8D0     		beq	.L257
1413:bluetooth_rxtx.c **** 	TXLED_SET;
 5553              		.loc 1 1413 0 is_stmt 1
 5554 0062 0A4B     		ldr	r3, .L259
 5555 0064 4FF48072 		mov	r2, #256
ARM GAS  /tmp/cc6bdJLE.s 			page 122


 5556 0068 1A60     		str	r2, [r3]
1414:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1415:bluetooth_rxtx.c **** 	PAEN_SET;
 5557              		.loc 1 1415 0
 5558 006a 094B     		ldr	r3, .L259+4
 5559 006c 8022     		movs	r2, #128
 5560 006e 1A60     		str	r2, [r3]
1416:bluetooth_rxtx.c **** #endif
1417:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5561              		.loc 1 1417 0
 5562 0070 00BF     		nop
 5563              	.L258:
 5564              		.loc 1 1417 0 is_stmt 0 discriminator 1
 5565 0072 0E20     		movs	r0, #14
 5566 0074 FFF7FEFF 		bl	cc2400_get
 5567 0078 0346     		mov	r3, r0
 5568 007a 03F01F03 		and	r3, r3, #31
 5569 007e 0F2B     		cmp	r3, #15
 5570 0080 F7D1     		bne	.L258
1418:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5571              		.loc 1 1418 0 is_stmt 1
 5572 0082 6320     		movs	r0, #99
 5573 0084 FFF7FEFF 		bl	cc2400_strobe
1419:bluetooth_rxtx.c **** #endif
1420:bluetooth_rxtx.c **** }
 5574              		.loc 1 1420 0
 5575 0088 80BD     		pop	{r7, pc}
 5576              	.L260:
 5577 008a 00BF     		.align	2
 5578              	.L259:
 5579 008c 38C00920 		.word	537509944
 5580 0090 58C00920 		.word	537509976
 5581              		.cfi_endproc
 5582              	.LFE24:
 5584              		.section	.text.hop,"ax",%progbits
 5585              		.align	2
 5586              		.global	hop
 5587              		.thumb
 5588              		.thumb_func
 5590              	hop:
 5591              	.LFB25:
1421:bluetooth_rxtx.c **** 
1422:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1423:bluetooth_rxtx.c ****  * track of this? */
1424:bluetooth_rxtx.c **** void hop(void)
1425:bluetooth_rxtx.c **** {
 5592              		.loc 1 1425 0
 5593              		.cfi_startproc
 5594              		@ args = 0, pretend = 0, frame = 0
 5595              		@ frame_needed = 1, uses_anonymous_args = 0
 5596 0000 80B5     		push	{r7, lr}
 5597              		.cfi_def_cfa_offset 8
 5598              		.cfi_offset 7, -8
 5599              		.cfi_offset 14, -4
 5600 0002 00AF     		add	r7, sp, #0
 5601              		.cfi_def_cfa_register 7
1426:bluetooth_rxtx.c **** 	do_hop = 0;
ARM GAS  /tmp/cc6bdJLE.s 			page 123


 5602              		.loc 1 1426 0
 5603 0004 414B     		ldr	r3, .L272
 5604 0006 0022     		movs	r2, #0
 5605 0008 1A70     		strb	r2, [r3]
1427:bluetooth_rxtx.c **** 
1428:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1429:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5606              		.loc 1 1429 0
 5607 000a 414B     		ldr	r3, .L272+4
 5608 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5609 000e 002B     		cmp	r3, #0
 5610 0010 0BD1     		bne	.L262
1430:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 5611              		.loc 1 1430 0
 5612 0012 0220     		movs	r0, #2
 5613 0014 FFF7FEFF 		bl	cc2400_get
 5614 0018 0346     		mov	r3, r0
 5615 001a 1A46     		mov	r2, r3
 5616 001c 3D4B     		ldr	r3, .L272+8
 5617 001e 1B88     		ldrh	r3, [r3]	@ movhi
 5618 0020 9BB2     		uxth	r3, r3
 5619 0022 013B     		subs	r3, r3, #1
 5620 0024 9A42     		cmp	r2, r3
 5621 0026 47D1     		bne	.L263
1431:bluetooth_rxtx.c **** 			return;
 5622              		.loc 1 1431 0
 5623 0028 6EE0     		b	.L261
 5624              	.L262:
1432:bluetooth_rxtx.c **** 	}
1433:bluetooth_rxtx.c **** 
1434:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1435:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 5625              		.loc 1 1435 0
 5626 002a 394B     		ldr	r3, .L272+4
 5627 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5628 002e 012B     		cmp	r3, #1
 5629 0030 14D1     		bne	.L265
1436:bluetooth_rxtx.c **** 		channel += 32;
 5630              		.loc 1 1436 0
 5631 0032 384B     		ldr	r3, .L272+8
 5632 0034 1B88     		ldrh	r3, [r3]	@ movhi
 5633 0036 9BB2     		uxth	r3, r3
 5634 0038 2033     		adds	r3, r3, #32
 5635 003a 9AB2     		uxth	r2, r3
 5636 003c 354B     		ldr	r3, .L272+8
 5637 003e 1A80     		strh	r2, [r3]	@ movhi
1437:bluetooth_rxtx.c **** 		if (channel > 2480)
 5638              		.loc 1 1437 0
 5639 0040 344B     		ldr	r3, .L272+8
 5640 0042 1B88     		ldrh	r3, [r3]	@ movhi
 5641 0044 9BB2     		uxth	r3, r3
 5642 0046 B3F51B6F 		cmp	r3, #2480
 5643 004a 35D9     		bls	.L263
1438:bluetooth_rxtx.c **** 			channel -= 79;
 5644              		.loc 1 1438 0
 5645 004c 314B     		ldr	r3, .L272+8
 5646 004e 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/cc6bdJLE.s 			page 124


 5647 0050 9BB2     		uxth	r3, r3
 5648 0052 4F3B     		subs	r3, r3, #79
 5649 0054 9AB2     		uxth	r2, r3
 5650 0056 2F4B     		ldr	r3, .L272+8
 5651 0058 1A80     		strh	r2, [r3]	@ movhi
 5652 005a 2DE0     		b	.L263
 5653              	.L265:
1439:bluetooth_rxtx.c **** 	}
1440:bluetooth_rxtx.c **** 
1441:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 5654              		.loc 1 1441 0
 5655 005c 2C4B     		ldr	r3, .L272+4
 5656 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5657 0060 022B     		cmp	r3, #2
 5658 0062 0DD1     		bne	.L267
1442:bluetooth_rxtx.c **** 		TXLED_SET;
 5659              		.loc 1 1442 0
 5660 0064 2C4B     		ldr	r3, .L272+12
 5661 0066 4FF48072 		mov	r2, #256
 5662 006a 1A60     		str	r2, [r3]
1443:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 5663              		.loc 1 1443 0
 5664 006c 2B4B     		ldr	r3, .L272+16
 5665 006e 1B68     		ldr	r3, [r3]
 5666 0070 1846     		mov	r0, r3
 5667 0072 FFF7FEFF 		bl	next_hop
 5668 0076 0346     		mov	r3, r0
 5669 0078 1A46     		mov	r2, r3
 5670 007a 264B     		ldr	r3, .L272+8
 5671 007c 1A80     		strh	r2, [r3]	@ movhi
 5672 007e 1BE0     		b	.L263
 5673              	.L267:
1444:bluetooth_rxtx.c **** 	}
1445:bluetooth_rxtx.c **** 
1446:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 5674              		.loc 1 1446 0
 5675 0080 234B     		ldr	r3, .L272+4
 5676 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5677 0084 032B     		cmp	r3, #3
 5678 0086 0BD1     		bne	.L268
1447:bluetooth_rxtx.c **** 		TXLED_SET;
 5679              		.loc 1 1447 0
 5680 0088 234B     		ldr	r3, .L272+12
 5681 008a 4FF48072 		mov	r2, #256
 5682 008e 1A60     		str	r2, [r3]
1448:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 5683              		.loc 1 1448 0
 5684 0090 2348     		ldr	r0, .L272+20
 5685 0092 FFF7FEFF 		bl	btle_next_hop
 5686 0096 0346     		mov	r3, r0
 5687 0098 1A46     		mov	r2, r3
 5688 009a 1E4B     		ldr	r3, .L272+8
 5689 009c 1A80     		strh	r2, [r3]	@ movhi
 5690 009e 0BE0     		b	.L263
 5691              	.L268:
1449:bluetooth_rxtx.c **** 	}
1450:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 125


1451:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 5692              		.loc 1 1451 0
 5693 00a0 1B4B     		ldr	r3, .L272+4
 5694 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5695 00a4 042B     		cmp	r3, #4
 5696 00a6 07D1     		bne	.L263
1452:bluetooth_rxtx.c **** 		TXLED_SET;
 5697              		.loc 1 1452 0
 5698 00a8 1B4B     		ldr	r3, .L272+12
 5699 00aa 4FF48072 		mov	r2, #256
 5700 00ae 1A60     		str	r2, [r3]
1453:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 5701              		.loc 1 1453 0
 5702 00b0 1C4B     		ldr	r3, .L272+24
 5703 00b2 1A88     		ldrh	r2, [r3]
 5704 00b4 174B     		ldr	r3, .L272+8
 5705 00b6 1A80     		strh	r2, [r3]	@ movhi
 5706              	.L263:
1454:bluetooth_rxtx.c **** 	}
1455:bluetooth_rxtx.c **** 
1456:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1457:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5707              		.loc 1 1457 0
 5708 00b8 6420     		movs	r0, #100
 5709 00ba FFF7FEFF 		bl	cc2400_strobe
1458:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5710              		.loc 1 1458 0
 5711 00be 00BF     		nop
 5712              	.L269:
 5713              		.loc 1 1458 0 is_stmt 0 discriminator 1
 5714 00c0 FFF7FEFF 		bl	cc2400_status
 5715 00c4 0346     		mov	r3, r0
 5716 00c6 03F00403 		and	r3, r3, #4
 5717 00ca 002B     		cmp	r3, #0
 5718 00cc F8D1     		bne	.L269
1459:bluetooth_rxtx.c **** 
1460:bluetooth_rxtx.c **** 	/* Retune */
1461:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5719              		.loc 1 1461 0 is_stmt 1
 5720 00ce 114B     		ldr	r3, .L272+8
 5721 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 5722 00d2 9BB2     		uxth	r3, r3
 5723 00d4 013B     		subs	r3, r3, #1
 5724 00d6 9BB2     		uxth	r3, r3
 5725 00d8 0220     		movs	r0, #2
 5726 00da 1946     		mov	r1, r3
 5727 00dc FFF7FEFF 		bl	cc2400_set
1462:bluetooth_rxtx.c **** 	
1463:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1464:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 5728              		.loc 1 1464 0
 5729 00e0 0B4B     		ldr	r3, .L272+4
 5730 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5731 00e4 002B     		cmp	r3, #0
 5732 00e6 01D0     		beq	.L270
1465:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 5733              		.loc 1 1465 0
ARM GAS  /tmp/cc6bdJLE.s 			page 126


 5734 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 5735              	.L270:
1466:bluetooth_rxtx.c **** 	}
1467:bluetooth_rxtx.c **** 
1468:bluetooth_rxtx.c **** 	/* Wait for lock */
1469:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5736              		.loc 1 1469 0
 5737 00ec 6120     		movs	r0, #97
 5738 00ee FFF7FEFF 		bl	cc2400_strobe
1470:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5739              		.loc 1 1470 0
 5740 00f2 00BF     		nop
 5741              	.L271:
 5742              		.loc 1 1470 0 is_stmt 0 discriminator 1
 5743 00f4 FFF7FEFF 		bl	cc2400_status
 5744 00f8 0346     		mov	r3, r0
 5745 00fa 03F00403 		and	r3, r3, #4
 5746 00fe 002B     		cmp	r3, #0
 5747 0100 F8D0     		beq	.L271
1471:bluetooth_rxtx.c **** 	
1472:bluetooth_rxtx.c **** 	/* RX mode */
1473:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5748              		.loc 1 1473 0 is_stmt 1
 5749 0102 6220     		movs	r0, #98
 5750 0104 FFF7FEFF 		bl	cc2400_strobe
 5751              	.L261:
1474:bluetooth_rxtx.c **** 
1475:bluetooth_rxtx.c **** }
 5752              		.loc 1 1475 0
 5753 0108 80BD     		pop	{r7, pc}
 5754              	.L273:
 5755 010a 00BF     		.align	2
 5756              	.L272:
 5757 010c 00000000 		.word	do_hop
 5758 0110 00000000 		.word	hop_mode
 5759 0114 00000000 		.word	channel
 5760 0118 38C00920 		.word	537509944
 5761 011c 00000000 		.word	clkn
 5762 0120 00000000 		.word	le
 5763 0124 00000000 		.word	hop_direct_channel
 5764              		.cfi_endproc
 5765              	.LFE25:
 5767              		.section	.text.cc2400_spi_rev,"ax",%progbits
 5768              		.align	2
 5769              		.global	cc2400_spi_rev
 5770              		.thumb
 5771              		.thumb_func
 5773              	cc2400_spi_rev:
 5774              	.LFB26:
1476:bluetooth_rxtx.c **** 
1477:bluetooth_rxtx.c **** 
1478:bluetooth_rxtx.c **** u32 cc2400_spi_rev(u8 len, u32 data)
1479:bluetooth_rxtx.c **** {
 5775              		.loc 1 1479 0
 5776              		.cfi_startproc
 5777              		@ args = 0, pretend = 0, frame = 16
 5778              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cc6bdJLE.s 			page 127


 5779              		@ link register save eliminated.
 5780 0000 80B4     		push	{r7}
 5781              		.cfi_def_cfa_offset 4
 5782              		.cfi_offset 7, -4
 5783 0002 85B0     		sub	sp, sp, #20
 5784              		.cfi_def_cfa_offset 24
 5785 0004 00AF     		add	r7, sp, #0
 5786              		.cfi_def_cfa_register 7
 5787 0006 0346     		mov	r3, r0
 5788 0008 3960     		str	r1, [r7]
 5789 000a FB71     		strb	r3, [r7, #7]
1480:bluetooth_rxtx.c ****     //    u32 first_ts, second_ts, diff;
1481:bluetooth_rxtx.c **** 
1482:bluetooth_rxtx.c **** 
1483:bluetooth_rxtx.c ****         u32 msb = 1 << (len - 1);
 5790              		.loc 1 1483 0
 5791 000c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5792 000e 013B     		subs	r3, r3, #1
 5793 0010 0122     		movs	r2, #1
 5794 0012 02FA03F3 		lsl	r3, r2, r3
 5795 0016 FB60     		str	r3, [r7, #12]
1484:bluetooth_rxtx.c **** 
1485:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1486:bluetooth_rxtx.c ****         CSN_CLR;
 5796              		.loc 1 1486 0
 5797 0018 184B     		ldr	r3, .L281
 5798 001a 2022     		movs	r2, #32
 5799 001c 1A60     		str	r2, [r3]
1487:bluetooth_rxtx.c **** 
1488:bluetooth_rxtx.c **** //      first_ts = CLK100NS;
1489:bluetooth_rxtx.c ****         while (len--) {
 5800              		.loc 1 1489 0
 5801 001e 1EE0     		b	.L275
 5802              	.L279:
1490:bluetooth_rxtx.c ****                 if (data & msb)
 5803              		.loc 1 1490 0
 5804 0020 3A68     		ldr	r2, [r7]
 5805 0022 FB68     		ldr	r3, [r7, #12]
 5806 0024 1340     		ands	r3, r3, r2
 5807 0026 002B     		cmp	r3, #0
 5808 0028 03D0     		beq	.L276
1491:bluetooth_rxtx.c ****                         MOSI_SET;
 5809              		.loc 1 1491 0
 5810 002a 154B     		ldr	r3, .L281+4
 5811 002c 0122     		movs	r2, #1
 5812 002e 1A60     		str	r2, [r3]
 5813 0030 02E0     		b	.L277
 5814              	.L276:
1492:bluetooth_rxtx.c ****                 else
1493:bluetooth_rxtx.c ****                         MOSI_CLR;
 5815              		.loc 1 1493 0
 5816 0032 124B     		ldr	r3, .L281
 5817 0034 0122     		movs	r2, #1
 5818 0036 1A60     		str	r2, [r3]
 5819              	.L277:
1494:bluetooth_rxtx.c ****                 data <<= 1;
 5820              		.loc 1 1494 0
ARM GAS  /tmp/cc6bdJLE.s 			page 128


 5821 0038 3B68     		ldr	r3, [r7]
 5822 003a 5B00     		lsls	r3, r3, #1
 5823 003c 3B60     		str	r3, [r7]
1495:bluetooth_rxtx.c **** 
1496:bluetooth_rxtx.c ****                 SCLK_SET;
 5824              		.loc 1 1496 0
 5825 003e 104B     		ldr	r3, .L281+4
 5826 0040 1022     		movs	r2, #16
 5827 0042 1A60     		str	r2, [r3]
1497:bluetooth_rxtx.c ****                 if (MISO)
 5828              		.loc 1 1497 0
 5829 0044 0F4B     		ldr	r3, .L281+8
 5830 0046 1B68     		ldr	r3, [r3]
 5831 0048 03F00203 		and	r3, r3, #2
 5832 004c 002B     		cmp	r3, #0
 5833 004e 03D0     		beq	.L278
1498:bluetooth_rxtx.c ****                         data |= 1;
 5834              		.loc 1 1498 0
 5835 0050 3B68     		ldr	r3, [r7]
 5836 0052 43F00103 		orr	r3, r3, #1
 5837 0056 3B60     		str	r3, [r7]
 5838              	.L278:
1499:bluetooth_rxtx.c **** 
1500:bluetooth_rxtx.c ****                 SCLK_CLR;
 5839              		.loc 1 1500 0
 5840 0058 084B     		ldr	r3, .L281
 5841 005a 1022     		movs	r2, #16
 5842 005c 1A60     		str	r2, [r3]
 5843              	.L275:
1489:bluetooth_rxtx.c ****                 if (data & msb)
 5844              		.loc 1 1489 0
 5845 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5846 0060 5A1E     		subs	r2, r3, #1
 5847 0062 FA71     		strb	r2, [r7, #7]
 5848 0064 002B     		cmp	r3, #0
 5849 0066 DBD1     		bne	.L279
1501:bluetooth_rxtx.c ****         }
1502:bluetooth_rxtx.c **** //      second_ts = CLK100NS;
1503:bluetooth_rxtx.c **** //      diff_ts = second_ts - first_ts;
1504:bluetooth_rxtx.c **** 
1505:bluetooth_rxtx.c ****         CSN_SET;
 5850              		.loc 1 1505 0
 5851 0068 054B     		ldr	r3, .L281+4
 5852 006a 2022     		movs	r2, #32
 5853 006c 1A60     		str	r2, [r3]
1506:bluetooth_rxtx.c ****         return data;
 5854              		.loc 1 1506 0
 5855 006e 3B68     		ldr	r3, [r7]
1507:bluetooth_rxtx.c **** }
 5856              		.loc 1 1507 0
 5857 0070 1846     		mov	r0, r3
 5858 0072 1437     		adds	r7, r7, #20
 5859              		.cfi_def_cfa_offset 4
 5860 0074 BD46     		mov	sp, r7
 5861              		.cfi_def_cfa_register 13
 5862              		@ sp needed
 5863 0076 5DF8047B 		ldr	r7, [sp], #4
ARM GAS  /tmp/cc6bdJLE.s 			page 129


 5864              		.cfi_restore 7
 5865              		.cfi_def_cfa_offset 0
 5866 007a 7047     		bx	lr
 5867              	.L282:
 5868              		.align	2
 5869              	.L281:
 5870 007c 5CC00920 		.word	537509980
 5871 0080 58C00920 		.word	537509976
 5872 0084 54C00920 		.word	537509972
 5873              		.cfi_endproc
 5874              	.LFE26:
 5876              		.section	.text.cc2400_get_rev,"ax",%progbits
 5877              		.align	2
 5878              		.global	cc2400_get_rev
 5879              		.thumb
 5880              		.thumb_func
 5882              	cc2400_get_rev:
 5883              	.LFB27:
1508:bluetooth_rxtx.c **** 
1509:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1510:bluetooth_rxtx.c **** {
 5884              		.loc 1 1510 0
 5885              		.cfi_startproc
 5886              		@ args = 0, pretend = 0, frame = 16
 5887              		@ frame_needed = 1, uses_anonymous_args = 0
 5888 0000 80B5     		push	{r7, lr}
 5889              		.cfi_def_cfa_offset 8
 5890              		.cfi_offset 7, -8
 5891              		.cfi_offset 14, -4
 5892 0002 84B0     		sub	sp, sp, #16
 5893              		.cfi_def_cfa_offset 24
 5894 0004 00AF     		add	r7, sp, #0
 5895              		.cfi_def_cfa_register 7
 5896 0006 0346     		mov	r3, r0
 5897 0008 FB71     		strb	r3, [r7, #7]
1511:bluetooth_rxtx.c ****         u32 in;
1512:bluetooth_rxtx.c **** 
1513:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
 5898              		.loc 1 1513 0
 5899 000a FB79     		ldrb	r3, [r7, #7]
 5900 000c 63F07F03 		orn	r3, r3, #127
 5901 0010 DBB2     		uxtb	r3, r3
 5902 0012 1B02     		lsls	r3, r3, #8
 5903 0014 FB60     		str	r3, [r7, #12]
1514:bluetooth_rxtx.c ****         in = cc2400_spi_rev(16, out);
 5904              		.loc 1 1514 0
 5905 0016 1020     		movs	r0, #16
 5906 0018 F968     		ldr	r1, [r7, #12]
 5907 001a FFF7FEFF 		bl	cc2400_spi_rev
 5908 001e B860     		str	r0, [r7, #8]
1515:bluetooth_rxtx.c ****         return in & 0xFF;
 5909              		.loc 1 1515 0
 5910 0020 BB68     		ldr	r3, [r7, #8]
 5911 0022 DBB2     		uxtb	r3, r3
1516:bluetooth_rxtx.c **** }
 5912              		.loc 1 1516 0
 5913 0024 1846     		mov	r0, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 130


 5914 0026 1037     		adds	r7, r7, #16
 5915              		.cfi_def_cfa_offset 8
 5916 0028 BD46     		mov	sp, r7
 5917              		.cfi_def_cfa_register 13
 5918              		@ sp needed
 5919 002a 80BD     		pop	{r7, pc}
 5920              		.cfi_endproc
 5921              	.LFE27:
 5923              		.section	.text.add,"ax",%progbits
 5924              		.align	2
 5925              		.global	add
 5926              		.thumb
 5927              		.thumb_func
 5929              	add:
 5930              	.LFB28:
1517:bluetooth_rxtx.c **** 
1518:bluetooth_rxtx.c **** u8 add (u8 x, u8 y)
1519:bluetooth_rxtx.c **** {
 5931              		.loc 1 1519 0
 5932              		.cfi_startproc
 5933              		@ args = 0, pretend = 0, frame = 16
 5934              		@ frame_needed = 1, uses_anonymous_args = 0
 5935              		@ link register save eliminated.
 5936 0000 80B4     		push	{r7}
 5937              		.cfi_def_cfa_offset 4
 5938              		.cfi_offset 7, -4
 5939 0002 85B0     		sub	sp, sp, #20
 5940              		.cfi_def_cfa_offset 24
 5941 0004 00AF     		add	r7, sp, #0
 5942              		.cfi_def_cfa_register 7
 5943 0006 0346     		mov	r3, r0
 5944 0008 0A46     		mov	r2, r1
 5945 000a FB71     		strb	r3, [r7, #7]
 5946 000c 1346     		mov	r3, r2
 5947 000e BB71     		strb	r3, [r7, #6]
1520:bluetooth_rxtx.c ****   while (y)
 5948              		.loc 1 1520 0
 5949 0010 0AE0     		b	.L286
 5950              	.L287:
 5951              	.LBB3:
1521:bluetooth_rxtx.c ****   {
1522:bluetooth_rxtx.c ****     u8 carry = x & y;
 5952              		.loc 1 1522 0
 5953 0012 FA79     		ldrb	r2, [r7, #7]
 5954 0014 BB79     		ldrb	r3, [r7, #6]
 5955 0016 1340     		ands	r3, r3, r2
 5956 0018 FB73     		strb	r3, [r7, #15]
1523:bluetooth_rxtx.c ****     x = x ^ y;
 5957              		.loc 1 1523 0
 5958 001a FA79     		ldrb	r2, [r7, #7]
 5959 001c BB79     		ldrb	r3, [r7, #6]
 5960 001e 5340     		eors	r3, r3, r2
 5961 0020 FB71     		strb	r3, [r7, #7]
1524:bluetooth_rxtx.c ****     y = carry << 1;
 5962              		.loc 1 1524 0
 5963 0022 FB7B     		ldrb	r3, [r7, #15]
 5964 0024 5B00     		lsls	r3, r3, #1
ARM GAS  /tmp/cc6bdJLE.s 			page 131


 5965 0026 BB71     		strb	r3, [r7, #6]
 5966              	.L286:
 5967              	.LBE3:
1520:bluetooth_rxtx.c ****   {
 5968              		.loc 1 1520 0
 5969 0028 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 5970 002a 002B     		cmp	r3, #0
 5971 002c F1D1     		bne	.L287
1525:bluetooth_rxtx.c ****   }
1526:bluetooth_rxtx.c ****   return x;
 5972              		.loc 1 1526 0
 5973 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
1527:bluetooth_rxtx.c **** }
 5974              		.loc 1 1527 0
 5975 0030 1846     		mov	r0, r3
 5976 0032 1437     		adds	r7, r7, #20
 5977              		.cfi_def_cfa_offset 4
 5978 0034 BD46     		mov	sp, r7
 5979              		.cfi_def_cfa_register 13
 5980              		@ sp needed
 5981 0036 5DF8047B 		ldr	r7, [sp], #4
 5982              		.cfi_restore 7
 5983              		.cfi_def_cfa_offset 0
 5984 003a 7047     		bx	lr
 5985              		.cfi_endproc
 5986              	.LFE28:
 5988              		.section	.text.bt_stream_proposed,"ax",%progbits
 5989              		.align	2
 5990              		.global	bt_stream_proposed
 5991              		.thumb
 5992              		.thumb_func
 5994              	bt_stream_proposed:
 5995              	.LFB29:
1528:bluetooth_rxtx.c **** 
1529:bluetooth_rxtx.c **** // wpson
1530:bluetooth_rxtx.c **** void bt_stream_proposed()
1531:bluetooth_rxtx.c **** {
 5996              		.loc 1 1531 0
 5997              		.cfi_startproc
 5998              		@ args = 0, pretend = 0, frame = 64
 5999              		@ frame_needed = 1, uses_anonymous_args = 0
 6000 0000 90B5     		push	{r4, r7, lr}
 6001              		.cfi_def_cfa_offset 12
 6002              		.cfi_offset 4, -12
 6003              		.cfi_offset 7, -8
 6004              		.cfi_offset 14, -4
 6005 0002 91B0     		sub	sp, sp, #68
 6006              		.cfi_def_cfa_offset 80
 6007 0004 00AF     		add	r7, sp, #0
 6008              		.cfi_def_cfa_register 7
1532:bluetooth_rxtx.c **** 
1533:bluetooth_rxtx.c **** 	u8 epstat;
1534:bluetooth_rxtx.c **** //	u16 f;
1535:bluetooth_rxtx.c **** //	u8 buf[DMA_SIZE];
1536:bluetooth_rxtx.c **** 	u8 rssi[50];
1537:bluetooth_rxtx.c **** 	int i = 0;
 6009              		.loc 1 1537 0
ARM GAS  /tmp/cc6bdJLE.s 			page 132


 6010 0006 0023     		movs	r3, #0
 6011 0008 FB63     		str	r3, [r7, #60]
1538:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6012              		.loc 1 1538 0
 6013 000a 0023     		movs	r3, #0
 6014 000c FB63     		str	r3, [r7, #60]
 6015 000e 07E0     		b	.L290
 6016              	.L291:
1539:bluetooth_rxtx.c **** 		rssi[i] = 0;
 6017              		.loc 1 1539 0 discriminator 3
 6018 0010 3A46     		mov	r2, r7
 6019 0012 FB6B     		ldr	r3, [r7, #60]
 6020 0014 1344     		add	r3, r3, r2
 6021 0016 0022     		movs	r2, #0
 6022 0018 1A70     		strb	r2, [r3]
1538:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6023              		.loc 1 1538 0 discriminator 3
 6024 001a FB6B     		ldr	r3, [r7, #60]
 6025 001c 0133     		adds	r3, r3, #1
 6026 001e FB63     		str	r3, [r7, #60]
 6027              	.L290:
1538:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6028              		.loc 1 1538 0 is_stmt 0 discriminator 1
 6029 0020 FB6B     		ldr	r3, [r7, #60]
 6030 0022 312B     		cmp	r3, #49
 6031 0024 F4DD     		ble	.L291
1540:bluetooth_rxtx.c **** //	u8 length = 50;
1541:bluetooth_rxtx.c **** 	int window = 0;
 6032              		.loc 1 1541 0 is_stmt 1
 6033 0026 0023     		movs	r3, #0
 6034 0028 BB63     		str	r3, [r7, #56]
1542:bluetooth_rxtx.c **** //	u8 index = 0;
1543:bluetooth_rxtx.c **** 	u8 old = 0;
 6035              		.loc 1 1543 0
 6036 002a 0023     		movs	r3, #0
 6037 002c 87F83730 		strb	r3, [r7, #55]
1544:bluetooth_rxtx.c **** 	u8 now = 0;
 6038              		.loc 1 1544 0
 6039 0030 0023     		movs	r3, #0
 6040 0032 87F83630 		strb	r3, [r7, #54]
1545:bluetooth_rxtx.c **** 	u8 diff = 0;
 6041              		.loc 1 1545 0
 6042 0036 0023     		movs	r3, #0
 6043 0038 87F83530 		strb	r3, [r7, #53]
1546:bluetooth_rxtx.c **** 	u8 k = 0;
 6044              		.loc 1 1546 0
 6045 003c 0023     		movs	r3, #0
 6046 003e 87F83330 		strb	r3, [r7, #51]
1547:bluetooth_rxtx.c **** 	u8 temp = 0;
 6047              		.loc 1 1547 0
 6048 0042 0023     		movs	r3, #0
 6049 0044 87F83230 		strb	r3, [r7, #50]
1548:bluetooth_rxtx.c **** 	u8 outage = 0;
 6050              		.loc 1 1548 0
 6051 0048 0023     		movs	r3, #0
 6052 004a 87F83430 		strb	r3, [r7, #52]
1549:bluetooth_rxtx.c **** //	TXLED_SET;
ARM GAS  /tmp/cc6bdJLE.s 			page 133


1550:bluetooth_rxtx.c **** 	queue_init();
 6053              		.loc 1 1550 0
 6054 004e FFF7FEFF 		bl	queue_init
1551:bluetooth_rxtx.c **** 
1552:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1553:bluetooth_rxtx.c **** 	PAEN_SET;
 6055              		.loc 1 1553 0
 6056 0052 754B     		ldr	r3, .L302
 6057 0054 8022     		movs	r2, #128
 6058 0056 1A60     		str	r2, [r3]
1554:bluetooth_rxtx.c **** //	HGM_SET;
1555:bluetooth_rxtx.c **** #endif
1556:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6059              		.loc 1 1556 0
 6060 0058 0D20     		movs	r0, #13
 6061 005a 47F6FF71 		movw	r1, #32767
 6062 005e FFF7FEFF 		bl	cc2400_set
1557:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6063              		.loc 1 1557 0
 6064 0062 1220     		movs	r0, #18
 6065 0064 42F62231 		movw	r1, #11042
 6066 0068 FFF7FEFF 		bl	cc2400_set
1558:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6067              		.loc 1 1558 0
 6068 006c 1420     		movs	r0, #20
 6069 006e 41F24B21 		movw	r1, #4683
 6070 0072 FFF7FEFF 		bl	cc2400_set
1559:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6071              		.loc 1 1559 0
 6072 0076 2020     		movs	r0, #32
 6073 0078 40F26151 		movw	r1, #1377
 6074 007c FFF7FEFF 		bl	cc2400_set
1560:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6075              		.loc 1 1560 0
 6076 0080 0320     		movs	r0, #3
 6077 0082 4021     		movs	r1, #64
 6078 0084 FFF7FEFF 		bl	cc2400_set
1561:bluetooth_rxtx.c **** 
1562:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1563:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1564:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0x00ff);
1565:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x00ff);
1566:bluetooth_rxtx.c **** 	
1567:bluetooth_rxtx.c **** //	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
1568:bluetooth_rxtx.c **** //	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
1569:bluetooth_rxtx.c **** 	
1570:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6079              		.loc 1 1570 0
 6080 0088 00BF     		nop
 6081              	.L292:
 6082              		.loc 1 1570 0 is_stmt 0 discriminator 1
 6083 008a FFF7FEFF 		bl	cc2400_status
 6084 008e 0346     		mov	r3, r0
 6085 0090 03F04003 		and	r3, r3, #64
 6086 0094 002B     		cmp	r3, #0
 6087 0096 F8D0     		beq	.L292
1571:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
ARM GAS  /tmp/cc6bdJLE.s 			page 134


 6088              		.loc 1 1571 0 is_stmt 1
 6089 0098 00BF     		nop
 6090              	.L293:
 6091              		.loc 1 1571 0 is_stmt 0 discriminator 1
 6092 009a FFF7FEFF 		bl	cc2400_status
 6093 009e 0346     		mov	r3, r0
 6094 00a0 03F00403 		and	r3, r3, #4
 6095 00a4 002B     		cmp	r3, #0
 6096 00a6 F8D1     		bne	.L293
1572:bluetooth_rxtx.c **** 
1573:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6097              		.loc 1 1573 0 is_stmt 1
 6098 00a8 604B     		ldr	r3, .L302+4
 6099 00aa 1B88     		ldrh	r3, [r3]	@ movhi
 6100 00ac 9BB2     		uxth	r3, r3
 6101 00ae 013B     		subs	r3, r3, #1
 6102 00b0 9BB2     		uxth	r3, r3
 6103 00b2 0220     		movs	r0, #2
 6104 00b4 1946     		mov	r1, r3
 6105 00b6 FFF7FEFF 		bl	cc2400_set
1574:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6106              		.loc 1 1574 0
 6107 00ba 6120     		movs	r0, #97
 6108 00bc FFF7FEFF 		bl	cc2400_strobe
1575:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6109              		.loc 1 1575 0
 6110 00c0 00BF     		nop
 6111              	.L294:
 6112              		.loc 1 1575 0 is_stmt 0 discriminator 1
 6113 00c2 FFF7FEFF 		bl	cc2400_status
 6114 00c6 0346     		mov	r3, r0
 6115 00c8 03F00403 		and	r3, r3, #4
 6116 00cc 002B     		cmp	r3, #0
 6117 00ce F8D0     		beq	.L294
1576:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6118              		.loc 1 1576 0 is_stmt 1
 6119 00d0 6220     		movs	r0, #98
 6120 00d2 FFF7FEFF 		bl	cc2400_strobe
1577:bluetooth_rxtx.c **** 	
1578:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_PROPOSED)
 6121              		.loc 1 1578 0
 6122 00d6 9AE0     		b	.L295
 6123              	.L301:
1579:bluetooth_rxtx.c **** 	{
1580:bluetooth_rxtx.c **** 
1581:bluetooth_rxtx.c **** 			
1582:bluetooth_rxtx.c **** //		while (!(cc2400_status () & SYNC_RECEIVED));	
1583:bluetooth_rxtx.c **** 		window = 0;
 6124              		.loc 1 1583 0
 6125 00d8 0023     		movs	r3, #0
 6126 00da BB63     		str	r3, [r7, #56]
1584:bluetooth_rxtx.c **** 		old = 0;
 6127              		.loc 1 1584 0
 6128 00dc 0023     		movs	r3, #0
 6129 00de 87F83730 		strb	r3, [r7, #55]
1585:bluetooth_rxtx.c **** 		now = 0;
 6130              		.loc 1 1585 0
ARM GAS  /tmp/cc6bdJLE.s 			page 135


 6131 00e2 0023     		movs	r3, #0
 6132 00e4 87F83630 		strb	r3, [r7, #54]
1586:bluetooth_rxtx.c **** 		diff = 0;
 6133              		.loc 1 1586 0
 6134 00e8 0023     		movs	r3, #0
 6135 00ea 87F83530 		strb	r3, [r7, #53]
1587:bluetooth_rxtx.c **** 		
1588:bluetooth_rxtx.c **** 
1589:bluetooth_rxtx.c **** //		diff_ts = CLK100NS - first_ts;
1590:bluetooth_rxtx.c **** //wpson
1591:bluetooth_rxtx.c **** 		while (window < 8)
 6136              		.loc 1 1591 0
 6137 00ee 60E0     		b	.L296
 6138              	.L300:
1592:bluetooth_rxtx.c **** 		{	
1593:bluetooth_rxtx.c **** 			first_ts = CLK100NS;
 6139              		.loc 1 1593 0
 6140 00f0 4F4B     		ldr	r3, .L302+8
 6141 00f2 1B68     		ldr	r3, [r3]
 6142 00f4 C3F31303 		ubfx	r3, r3, #0, #20
 6143 00f8 40F63542 		movw	r2, #3125
 6144 00fc 02FB03F2 		mul	r2, r2, r3
 6145 0100 4C4B     		ldr	r3, .L302+12
 6146 0102 1B68     		ldr	r3, [r3]
 6147 0104 1344     		add	r3, r3, r2
 6148 0106 4C4A     		ldr	r2, .L302+16
 6149 0108 1360     		str	r3, [r2]
1594:bluetooth_rxtx.c **** 			now = cc2400_get_rev(FREQEST);	 
 6150              		.loc 1 1594 0
 6151 010a 0720     		movs	r0, #7
 6152 010c FFF7FEFF 		bl	cc2400_get_rev
 6153 0110 0346     		mov	r3, r0
 6154 0112 87F83630 		strb	r3, [r7, #54]
1595:bluetooth_rxtx.c **** 			diff = add (now, add (~old, 1)); // 5->8
 6155              		.loc 1 1595 0
 6156 0116 97F83730 		ldrb	r3, [r7, #55]
 6157 011a DB43     		mvns	r3, r3
 6158 011c DBB2     		uxtb	r3, r3
 6159 011e 1846     		mov	r0, r3
 6160 0120 0121     		movs	r1, #1
 6161 0122 FFF7FEFF 		bl	add
 6162 0126 0346     		mov	r3, r0
 6163 0128 1A46     		mov	r2, r3
 6164 012a 97F83630 		ldrb	r3, [r7, #54]	@ zero_extendqisi2
 6165 012e 1846     		mov	r0, r3
 6166 0130 1146     		mov	r1, r2
 6167 0132 FFF7FEFF 		bl	add
 6168 0136 0346     		mov	r3, r0
 6169 0138 87F83530 		strb	r3, [r7, #53]
1596:bluetooth_rxtx.c **** 			if (diff & 0x80) 
 6170              		.loc 1 1596 0
 6171 013c 97F83530 		ldrb	r3, [r7, #53]	@ zero_extendqisi2
 6172 0140 5BB2     		sxtb	r3, r3
 6173 0142 002B     		cmp	r3, #0
 6174 0144 0ADA     		bge	.L297
1597:bluetooth_rxtx.c **** 				diff = add (~diff, 1);	
 6175              		.loc 1 1597 0
ARM GAS  /tmp/cc6bdJLE.s 			page 136


 6176 0146 97F83530 		ldrb	r3, [r7, #53]
 6177 014a DB43     		mvns	r3, r3
 6178 014c DBB2     		uxtb	r3, r3
 6179 014e 1846     		mov	r0, r3
 6180 0150 0121     		movs	r1, #1
 6181 0152 FFF7FEFF 		bl	add
 6182 0156 0346     		mov	r3, r0
 6183 0158 87F83530 		strb	r3, [r7, #53]
 6184              	.L297:
1598:bluetooth_rxtx.c **** 
1599:bluetooth_rxtx.c **** 			if (diff < 0x03)
 6185              		.loc 1 1599 0
 6186 015c 97F83530 		ldrb	r3, [r7, #53]	@ zero_extendqisi2
 6187 0160 022B     		cmp	r3, #2
 6188 0162 03D8     		bhi	.L298
1600:bluetooth_rxtx.c **** 				window++;
 6189              		.loc 1 1600 0
 6190 0164 BB6B     		ldr	r3, [r7, #56]
 6191 0166 0133     		adds	r3, r3, #1
 6192 0168 BB63     		str	r3, [r7, #56]
 6193 016a 11E0     		b	.L299
 6194              	.L298:
1601:bluetooth_rxtx.c **** 			else
1602:bluetooth_rxtx.c **** 			{
1603:bluetooth_rxtx.c **** 				outage = add (outage, 1);
 6195              		.loc 1 1603 0
 6196 016c 97F83430 		ldrb	r3, [r7, #52]	@ zero_extendqisi2
 6197 0170 1846     		mov	r0, r3
 6198 0172 0121     		movs	r1, #1
 6199 0174 FFF7FEFF 		bl	add
 6200 0178 0346     		mov	r3, r0
 6201 017a 87F83430 		strb	r3, [r7, #52]
1604:bluetooth_rxtx.c **** 				if (outage > 1)
 6202              		.loc 1 1604 0
 6203 017e 97F83430 		ldrb	r3, [r7, #52]	@ zero_extendqisi2
 6204 0182 012B     		cmp	r3, #1
 6205 0184 04D9     		bls	.L299
1605:bluetooth_rxtx.c **** 				{
1606:bluetooth_rxtx.c **** 					outage = 0;
 6206              		.loc 1 1606 0
 6207 0186 0023     		movs	r3, #0
 6208 0188 87F83430 		strb	r3, [r7, #52]
1607:bluetooth_rxtx.c **** 					window = 0;
 6209              		.loc 1 1607 0
 6210 018c 0023     		movs	r3, #0
 6211 018e BB63     		str	r3, [r7, #56]
 6212              	.L299:
1608:bluetooth_rxtx.c **** 				}
1609:bluetooth_rxtx.c **** 			}
1610:bluetooth_rxtx.c **** 			old = now;
 6213              		.loc 1 1610 0
 6214 0190 97F83630 		ldrb	r3, [r7, #54]
 6215 0194 87F83730 		strb	r3, [r7, #55]
1611:bluetooth_rxtx.c **** 			second_ts = CLK100NS;
 6216              		.loc 1 1611 0
 6217 0198 254B     		ldr	r3, .L302+8
 6218 019a 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 137


 6219 019c C3F31303 		ubfx	r3, r3, #0, #20
 6220 01a0 40F63542 		movw	r2, #3125
 6221 01a4 02FB03F2 		mul	r2, r2, r3
 6222 01a8 224B     		ldr	r3, .L302+12
 6223 01aa 1B68     		ldr	r3, [r3]
 6224 01ac 1344     		add	r3, r3, r2
 6225 01ae 234A     		ldr	r2, .L302+20
 6226 01b0 1360     		str	r3, [r2]
 6227              	.L296:
1591:bluetooth_rxtx.c **** 		{	
 6228              		.loc 1 1591 0
 6229 01b2 BB6B     		ldr	r3, [r7, #56]
 6230 01b4 072B     		cmp	r3, #7
 6231 01b6 9BDD     		ble	.L300
1612:bluetooth_rxtx.c **** 		}
1613:bluetooth_rxtx.c **** 	
1614:bluetooth_rxtx.c **** 		rssi_avg = ((int8_t)cc2400_get_rev(RSSI) + (int8_t)cc2400_get_rev(RSSI))/2;
 6232              		.loc 1 1614 0
 6233 01b8 0620     		movs	r0, #6
 6234 01ba FFF7FEFF 		bl	cc2400_get_rev
 6235 01be 0346     		mov	r3, r0
 6236 01c0 DBB2     		uxtb	r3, r3
 6237 01c2 5CB2     		sxtb	r4, r3
 6238 01c4 0620     		movs	r0, #6
 6239 01c6 FFF7FEFF 		bl	cc2400_get_rev
 6240 01ca 0346     		mov	r3, r0
 6241 01cc DBB2     		uxtb	r3, r3
 6242 01ce 5BB2     		sxtb	r3, r3
 6243 01d0 2344     		add	r3, r3, r4
 6244 01d2 DA0F     		lsrs	r2, r3, #31
 6245 01d4 1344     		add	r3, r3, r2
 6246 01d6 5B10     		asrs	r3, r3, #1
 6247 01d8 DAB2     		uxtb	r2, r3
 6248 01da 194B     		ldr	r3, .L302+24
 6249 01dc 1A70     		strb	r2, [r3]
1615:bluetooth_rxtx.c **** 		freq_avg = now;
 6250              		.loc 1 1615 0
 6251 01de 194A     		ldr	r2, .L302+28
 6252 01e0 97F83630 		ldrb	r3, [r7, #54]
 6253 01e4 1370     		strb	r3, [r2]
1616:bluetooth_rxtx.c **** 	
1617:bluetooth_rxtx.c **** 		diff_ts = second_ts - first_ts;
 6254              		.loc 1 1617 0
 6255 01e6 154B     		ldr	r3, .L302+20
 6256 01e8 1A68     		ldr	r2, [r3]
 6257 01ea 134B     		ldr	r3, .L302+16
 6258 01ec 1B68     		ldr	r3, [r3]
 6259 01ee D31A     		subs	r3, r2, r3
 6260 01f0 154A     		ldr	r2, .L302+32
 6261 01f2 1360     		str	r3, [r2]
1618:bluetooth_rxtx.c **** 		enqueue_with_ts(FREQ_PACKET, rssi, diff_ts);
 6262              		.loc 1 1618 0
 6263 01f4 144B     		ldr	r3, .L302+32
 6264 01f6 1B68     		ldr	r3, [r3]
 6265 01f8 3A46     		mov	r2, r7
 6266 01fa 0720     		movs	r0, #7
 6267 01fc 1146     		mov	r1, r2
ARM GAS  /tmp/cc6bdJLE.s 			page 138


 6268 01fe 1A46     		mov	r2, r3
 6269 0200 FFF7FEFF 		bl	enqueue_with_ts
1619:bluetooth_rxtx.c **** //		enqueue(FREQ_PACKET, rssi);
1620:bluetooth_rxtx.c **** 		handle_usb(clkn);
 6270              		.loc 1 1620 0
 6271 0204 0A4B     		ldr	r3, .L302+8
 6272 0206 1B68     		ldr	r3, [r3]
 6273 0208 1846     		mov	r0, r3
 6274 020a FFF7FEFF 		bl	handle_usb
 6275              	.L295:
1578:bluetooth_rxtx.c **** 	{
 6276              		.loc 1 1578 0
 6277 020e 0F4B     		ldr	r3, .L302+36
 6278 0210 1B78     		ldrb	r3, [r3]
 6279 0212 DBB2     		uxtb	r3, r3
 6280 0214 0F2B     		cmp	r3, #15
 6281 0216 3FF45FAF 		beq	.L301
1621:bluetooth_rxtx.c **** 
1622:bluetooth_rxtx.c **** //		first_ts = CLK100NS;
1623:bluetooth_rxtx.c **** //		while ((CLK100NS-first_ts)<3000)
1624:bluetooth_rxtx.c **** //		{};
1625:bluetooth_rxtx.c **** /*		cc2400_strobe (SRFOFF);
1626:bluetooth_rxtx.c **** 		while ((cc2400_status () & FS_LOCK));
1627:bluetooth_rxtx.c **** 
1628:bluetooth_rxtx.c **** 		while (!(cc2400_status () & XOSC16M_STABLE));
1629:bluetooth_rxtx.c **** 		
1630:bluetooth_rxtx.c **** 		cc2400_strobe (SFSON);
1631:bluetooth_rxtx.c **** 		while (!(cc2400_status () & FS_LOCK));
1632:bluetooth_rxtx.c **** 
1633:bluetooth_rxtx.c **** 	
1634:bluetooth_rxtx.c **** //		msleep(500);	
1635:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
1636:bluetooth_rxtx.c **** */
1637:bluetooth_rxtx.c **** 	}
1638:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 6282              		.loc 1 1638 0
 6283 021a 0D4B     		ldr	r3, .L302+40
 6284 021c 0022     		movs	r2, #0
 6285 021e 1A70     		strb	r2, [r3]
1639:bluetooth_rxtx.c **** //	dio_ssp_stop ();
1640:bluetooth_rxtx.c **** //	cs_trigger_disable ();
1641:bluetooth_rxtx.c **** }
 6286              		.loc 1 1641 0
 6287 0220 4437     		adds	r7, r7, #68
 6288              		.cfi_def_cfa_offset 12
 6289 0222 BD46     		mov	sp, r7
 6290              		.cfi_def_cfa_register 13
 6291              		@ sp needed
 6292 0224 90BD     		pop	{r4, r7, pc}
 6293              	.L303:
 6294 0226 00BF     		.align	2
 6295              	.L302:
 6296 0228 58C00920 		.word	537509976
 6297 022c 00000000 		.word	channel
 6298 0230 00000000 		.word	clkn
 6299 0234 08400040 		.word	1073758216
 6300 0238 00000000 		.word	first_ts
ARM GAS  /tmp/cc6bdJLE.s 			page 139


 6301 023c 00000000 		.word	second_ts
 6302 0240 00000000 		.word	rssi_avg
 6303 0244 00000000 		.word	freq_avg
 6304 0248 00000000 		.word	diff_ts
 6305 024c 00000000 		.word	requested_mode
 6306 0250 00000000 		.word	mode
 6307              		.cfi_endproc
 6308              	.LFE29:
 6310              		.section	.text.bt_stream_freq,"ax",%progbits
 6311              		.align	2
 6312              		.global	bt_stream_freq
 6313              		.thumb
 6314              		.thumb_func
 6316              	bt_stream_freq:
 6317              	.LFB30:
1642:bluetooth_rxtx.c **** 
1643:bluetooth_rxtx.c **** 
1644:bluetooth_rxtx.c **** 
1645:bluetooth_rxtx.c **** // wpson
1646:bluetooth_rxtx.c **** void bt_stream_freq()
1647:bluetooth_rxtx.c **** {
 6318              		.loc 1 1647 0
 6319              		.cfi_startproc
 6320              		@ args = 0, pretend = 0, frame = 128
 6321              		@ frame_needed = 1, uses_anonymous_args = 0
 6322 0000 90B5     		push	{r4, r7, lr}
 6323              		.cfi_def_cfa_offset 12
 6324              		.cfi_offset 4, -12
 6325              		.cfi_offset 7, -8
 6326              		.cfi_offset 14, -4
 6327 0002 A1B0     		sub	sp, sp, #132
 6328              		.cfi_def_cfa_offset 144
 6329 0004 00AF     		add	r7, sp, #0
 6330              		.cfi_def_cfa_register 7
1648:bluetooth_rxtx.c **** //	TXLED_SET;
1649:bluetooth_rxtx.c **** 	RXLED_CLR;
 6331              		.loc 1 1649 0
 6332 0006 B84B     		ldr	r3, .L331
 6333 0008 1022     		movs	r2, #16
 6334 000a 1A60     		str	r2, [r3]
1650:bluetooth_rxtx.c **** 	int i;
1651:bluetooth_rxtx.c **** 	
1652:bluetooth_rxtx.c **** 	u8 freq_buf[45];
1653:bluetooth_rxtx.c **** 	queue_init();
 6335              		.loc 1 1653 0
 6336 000c FFF7FEFF 		bl	queue_init
1654:bluetooth_rxtx.c **** 	dio_ssp_init();
 6337              		.loc 1 1654 0
 6338 0010 FFF7FEFF 		bl	dio_ssp_init
1655:bluetooth_rxtx.c **** 	dma_init_le();
 6339              		.loc 1 1655 0
 6340 0014 FFF7FEFF 		bl	dma_init_le
1656:bluetooth_rxtx.c **** 	dio_ssp_start();
 6341              		.loc 1 1656 0
 6342 0018 FFF7FEFF 		bl	dio_ssp_start
1657:bluetooth_rxtx.c **** 	
1658:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
ARM GAS  /tmp/cc6bdJLE.s 			page 140


 6343              		.loc 1 1658 0
 6344 001c 0D20     		movs	r0, #13
 6345 001e 47F6FF71 		movw	r1, #32767
 6346 0022 FFF7FEFF 		bl	cc2400_set
1659:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6347              		.loc 1 1659 0
 6348 0026 1220     		movs	r0, #18
 6349 0028 42F62231 		movw	r1, #11042
 6350 002c FFF7FEFF 		bl	cc2400_set
1660:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6351              		.loc 1 1660 0
 6352 0030 1420     		movs	r0, #20
 6353 0032 41F24B21 		movw	r1, #4683
 6354 0036 FFF7FEFF 		bl	cc2400_set
1661:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6355              		.loc 1 1661 0
 6356 003a 2020     		movs	r0, #32
 6357 003c 40F26151 		movw	r1, #1377
 6358 0040 FFF7FEFF 		bl	cc2400_set
1662:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6359              		.loc 1 1662 0
 6360 0044 0320     		movs	r0, #3
 6361 0046 4021     		movs	r1, #64
 6362 0048 FFF7FEFF 		bl	cc2400_set
1663:bluetooth_rxtx.c **** 
1664:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1665:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1666:bluetooth_rxtx.c **** 	
1667:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 6363              		.loc 1 1667 0
 6364 004c A748     		ldr	r0, .L331+4
 6365 004e FFF7FEFF 		bl	rbit
 6366 0052 0346     		mov	r3, r0
 6367 0054 9BB2     		uxth	r3, r3
 6368 0056 2C20     		movs	r0, #44
 6369 0058 1946     		mov	r1, r3
 6370 005a FFF7FEFF 		bl	cc2400_set
1668:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 6371              		.loc 1 1668 0
 6372 005e A348     		ldr	r0, .L331+4
 6373 0060 FFF7FEFF 		bl	rbit
 6374 0064 0346     		mov	r3, r0
 6375 0066 1B0C     		lsrs	r3, r3, #16
 6376 0068 9BB2     		uxth	r3, r3
 6377 006a 2D20     		movs	r0, #45
 6378 006c 1946     		mov	r1, r3
 6379 006e FFF7FEFF 		bl	cc2400_set
1669:bluetooth_rxtx.c **** 	
1670:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1671:bluetooth_rxtx.c **** 	PAEN_SET;
 6380              		.loc 1 1671 0
 6381 0072 9F4B     		ldr	r3, .L331+8
 6382 0074 8022     		movs	r2, #128
 6383 0076 1A60     		str	r2, [r3]
1672:bluetooth_rxtx.c **** //	HGM_SET;
1673:bluetooth_rxtx.c **** #endif
1674:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 141


1675:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6384              		.loc 1 1675 0
 6385 0078 00BF     		nop
 6386              	.L305:
 6387              		.loc 1 1675 0 is_stmt 0 discriminator 1
 6388 007a FFF7FEFF 		bl	cc2400_status
 6389 007e 0346     		mov	r3, r0
 6390 0080 03F04003 		and	r3, r3, #64
 6391 0084 002B     		cmp	r3, #0
 6392 0086 F8D0     		beq	.L305
1676:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6393              		.loc 1 1676 0 is_stmt 1
 6394 0088 00BF     		nop
 6395              	.L306:
 6396              		.loc 1 1676 0 is_stmt 0 discriminator 1
 6397 008a FFF7FEFF 		bl	cc2400_status
 6398 008e 0346     		mov	r3, r0
 6399 0090 03F00403 		and	r3, r3, #4
 6400 0094 002B     		cmp	r3, #0
 6401 0096 F8D1     		bne	.L306
1677:bluetooth_rxtx.c **** 
1678:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6402              		.loc 1 1678 0 is_stmt 1
 6403 0098 964B     		ldr	r3, .L331+12
 6404 009a 1B88     		ldrh	r3, [r3]	@ movhi
 6405 009c 9BB2     		uxth	r3, r3
 6406 009e 013B     		subs	r3, r3, #1
 6407 00a0 9BB2     		uxth	r3, r3
 6408 00a2 0220     		movs	r0, #2
 6409 00a4 1946     		mov	r1, r3
 6410 00a6 FFF7FEFF 		bl	cc2400_set
1679:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6411              		.loc 1 1679 0
 6412 00aa 6120     		movs	r0, #97
 6413 00ac FFF7FEFF 		bl	cc2400_strobe
1680:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6414              		.loc 1 1680 0
 6415 00b0 00BF     		nop
 6416              	.L307:
 6417              		.loc 1 1680 0 is_stmt 0 discriminator 1
 6418 00b2 FFF7FEFF 		bl	cc2400_status
 6419 00b6 0346     		mov	r3, r0
 6420 00b8 03F00403 		and	r3, r3, #4
 6421 00bc 002B     		cmp	r3, #0
 6422 00be F8D0     		beq	.L307
1681:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6423              		.loc 1 1681 0 is_stmt 1
 6424 00c0 6220     		movs	r0, #98
 6425 00c2 FFF7FEFF 		bl	cc2400_strobe
1682:bluetooth_rxtx.c **** 	
1683:bluetooth_rxtx.c **** //	cc2400_rx();
1684:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_FREQ) {
 6426              		.loc 1 1684 0
 6427 00c6 44E1     		b	.L308
 6428              	.L330:
 6429              	.LBB4:
1685:bluetooth_rxtx.c **** 		
ARM GAS  /tmp/cc6bdJLE.s 			page 142


1686:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 6430              		.loc 1 1686 0
 6431 00c8 00BF     		nop
 6432              	.L309:
 6433              		.loc 1 1686 0 is_stmt 0 discriminator 1
 6434 00ca FFF7FEFF 		bl	cc2400_status
 6435 00ce 0346     		mov	r3, r0
 6436 00d0 03F01003 		and	r3, r3, #16
 6437 00d4 002B     		cmp	r3, #0
 6438 00d6 F8D0     		beq	.L309
1687:bluetooth_rxtx.c **** 
1688:bluetooth_rxtx.c **** 
1689:bluetooth_rxtx.c **** /*		int out;
1690:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1691:bluetooth_rxtx.c ****                 if (rssi >= 128)
1692:bluetooth_rxtx.c ****                         out = rssi - 256;
1693:bluetooth_rxtx.c ****                 else
1694:bluetooth_rxtx.c ****                         out = rssi;
1695:bluetooth_rxtx.c ****                 if (out < 0)
1696:bluetooth_rxtx.c **** 		  goto rx_flush;
1697:bluetooth_rxtx.c **** */
1698:bluetooth_rxtx.c **** 
1699:bluetooth_rxtx.c **** 		for (i = 0; i < 45; i++)
 6439              		.loc 1 1699 0 is_stmt 1
 6440 00d8 0023     		movs	r3, #0
 6441 00da FB67     		str	r3, [r7, #124]
 6442 00dc 0DE0     		b	.L310
 6443              	.L311:
1700:bluetooth_rxtx.c **** 		{
1701:bluetooth_rxtx.c **** 			freq_buf[i] = cc2400_get_rev(FREQEST);	
 6444              		.loc 1 1701 0 discriminator 3
 6445 00de 0720     		movs	r0, #7
 6446 00e0 FFF7FEFF 		bl	cc2400_get_rev
 6447 00e4 0346     		mov	r3, r0
 6448 00e6 1946     		mov	r1, r3
 6449 00e8 07F13402 		add	r2, r7, #52
 6450 00ec FB6F     		ldr	r3, [r7, #124]
 6451 00ee 1344     		add	r3, r3, r2
 6452 00f0 0A46     		mov	r2, r1
 6453 00f2 1A70     		strb	r2, [r3]
1699:bluetooth_rxtx.c **** 		{
 6454              		.loc 1 1699 0 discriminator 3
 6455 00f4 FB6F     		ldr	r3, [r7, #124]
 6456 00f6 0133     		adds	r3, r3, #1
 6457 00f8 FB67     		str	r3, [r7, #124]
 6458              	.L310:
1699:bluetooth_rxtx.c **** 		{
 6459              		.loc 1 1699 0 is_stmt 0 discriminator 1
 6460 00fa FB6F     		ldr	r3, [r7, #124]
 6461 00fc 2C2B     		cmp	r3, #44
 6462 00fe EEDD     		ble	.L311
1702:bluetooth_rxtx.c **** 		}
1703:bluetooth_rxtx.c **** 
1704:bluetooth_rxtx.c **** 
1705:bluetooth_rxtx.c **** 		while (!rx_tc);
 6463              		.loc 1 1705 0 is_stmt 1
 6464 0100 00BF     		nop
ARM GAS  /tmp/cc6bdJLE.s 			page 143


 6465              	.L312:
 6466              		.loc 1 1705 0 is_stmt 0 discriminator 1
 6467 0102 7D4B     		ldr	r3, .L331+16
 6468 0104 1B68     		ldr	r3, [r3]
 6469 0106 002B     		cmp	r3, #0
 6470 0108 FBD0     		beq	.L312
1706:bluetooth_rxtx.c **** 	
1707:bluetooth_rxtx.c **** 		RXLED_SET;
 6471              		.loc 1 1707 0 is_stmt 1
 6472 010a 7C4B     		ldr	r3, .L331+20
 6473 010c 1022     		movs	r2, #16
 6474 010e 1A60     		str	r2, [r3]
1708:bluetooth_rxtx.c **** 		if (rx_err) {
 6475              		.loc 1 1708 0
 6476 0110 7B4B     		ldr	r3, .L331+24
 6477 0112 1B68     		ldr	r3, [r3]
 6478 0114 002B     		cmp	r3, #0
 6479 0116 07D0     		beq	.L313
1709:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 6480              		.loc 1 1709 0
 6481 0118 7A4B     		ldr	r3, .L331+28
 6482 011a 1B78     		ldrb	r3, [r3]
 6483 011c DBB2     		uxtb	r3, r3
 6484 011e 43F00203 		orr	r3, r3, #2
 6485 0122 DAB2     		uxtb	r2, r3
 6486 0124 774B     		ldr	r3, .L331+28
 6487 0126 1A70     		strb	r2, [r3]
 6488              	.L313:
1710:bluetooth_rxtx.c **** 		}	
1711:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6489              		.loc 1 1711 0
 6490 0128 734B     		ldr	r3, .L331+16
 6491 012a 1B68     		ldr	r3, [r3]
 6492 012c 012B     		cmp	r3, #1
 6493 012e 07D9     		bls	.L314
1712:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6494              		.loc 1 1712 0
 6495 0130 744B     		ldr	r3, .L331+28
 6496 0132 1B78     		ldrb	r3, [r3]
 6497 0134 DBB2     		uxtb	r3, r3
 6498 0136 43F00103 		orr	r3, r3, #1
 6499 013a DAB2     		uxtb	r2, r3
 6500 013c 714B     		ldr	r3, .L331+28
 6501 013e 1A70     		strb	r2, [r3]
 6502              	.L314:
1713:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1714:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6503              		.loc 1 1714 0
 6504 0140 3B46     		mov	r3, r7
 6505 0142 BB67     		str	r3, [r7, #120]
1715:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 6506              		.loc 1 1715 0
 6507 0144 704B     		ldr	r3, .L331+32
 6508 0146 1B68     		ldr	r3, [r3]
 6509 0148 3B60     		str	r3, [r7]
1716:bluetooth_rxtx.c **** 
1717:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
ARM GAS  /tmp/cc6bdJLE.s 			page 144


 6510              		.loc 1 1717 0
 6511 014a 00BF     		nop
 6512              	.L316:
 6513              		.loc 1 1717 0 is_stmt 0 discriminator 2
 6514 014c 6F4B     		ldr	r3, .L331+36
 6515 014e 1B68     		ldr	r3, [r3]
 6516 0150 03F00103 		and	r3, r3, #1
 6517 0154 002B     		cmp	r3, #0
 6518 0156 03D0     		beq	.L315
 6519              		.loc 1 1717 0 discriminator 1
 6520 0158 694B     		ldr	r3, .L331+24
 6521 015a 1B68     		ldr	r3, [r3]
 6522 015c 002B     		cmp	r3, #0
 6523 015e F5D0     		beq	.L316
 6524              	.L315:
1718:bluetooth_rxtx.c ****                 
1719:bluetooth_rxtx.c **** 			
1720:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6525              		.loc 1 1720 0 is_stmt 1
 6526 0160 6B4A     		ldr	r2, .L331+40
 6527 0162 6B4B     		ldr	r3, .L331+40
 6528 0164 1B68     		ldr	r3, [r3]
 6529 0166 23F00103 		bic	r3, r3, #1
 6530 016a 1360     		str	r3, [r2]
1721:bluetooth_rxtx.c **** 	
1722:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 6531              		.loc 1 1722 0
 6532 016c 614B     		ldr	r3, .L331+12
 6533 016e 1B88     		ldrh	r3, [r3]	@ movhi
 6534 0170 9BB2     		uxth	r3, r3
 6535 0172 DBB2     		uxtb	r3, r3
 6536 0174 623B     		subs	r3, r3, #98
 6537 0176 DBB2     		uxtb	r3, r3
 6538 0178 1846     		mov	r0, r3
 6539 017a FFF7FEFF 		bl	btle_channel_index
 6540 017e 0346     		mov	r3, r0
 6541 0180 1A46     		mov	r2, r3
 6542 0182 1346     		mov	r3, r2
 6543 0184 5B00     		lsls	r3, r3, #1
 6544 0186 1344     		add	r3, r3, r2
 6545 0188 1B01     		lsls	r3, r3, #4
 6546 018a 624A     		ldr	r2, .L331+44
 6547 018c 1344     		add	r3, r3, r2
 6548 018e 7B67     		str	r3, [r7, #116]
1723:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 6549              		.loc 1 1723 0
 6550 0190 0023     		movs	r3, #0
 6551 0192 FB67     		str	r3, [r7, #124]
 6552 0194 34E0     		b	.L317
 6553              	.L320:
 6554              	.LBB5:
1724:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6555              		.loc 1 1724 0 discriminator 3
 6556 0196 604A     		ldr	r2, .L331+48
 6557 0198 FB6F     		ldr	r3, [r7, #124]
 6558 019a 1344     		add	r3, r3, r2
 6559 019c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cc6bdJLE.s 			page 145


 6560 019e 1A06     		lsls	r2, r3, #24
1725:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 6561              		.loc 1 1725 0 discriminator 3
 6562 01a0 FB6F     		ldr	r3, [r7, #124]
 6563 01a2 0133     		adds	r3, r3, #1
 6564 01a4 5C49     		ldr	r1, .L331+48
 6565 01a6 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6566 01a8 1B04     		lsls	r3, r3, #16
 6567 01aa 1A43     		orrs	r2, r2, r3
1726:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 6568              		.loc 1 1726 0 discriminator 3
 6569 01ac FB6F     		ldr	r3, [r7, #124]
 6570 01ae 0233     		adds	r3, r3, #2
 6571 01b0 5949     		ldr	r1, .L331+48
 6572 01b2 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6573 01b4 1B02     		lsls	r3, r3, #8
 6574 01b6 1343     		orrs	r3, r3, r2
1727:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 6575              		.loc 1 1727 0 discriminator 3
 6576 01b8 FA6F     		ldr	r2, [r7, #124]
 6577 01ba 0332     		adds	r2, r2, #3
 6578 01bc 5649     		ldr	r1, .L331+48
 6579 01be 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 6580 01c0 1343     		orrs	r3, r3, r2
1724:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 6581              		.loc 1 1724 0 discriminator 3
 6582 01c2 3B67     		str	r3, [r7, #112]
1728:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 6583              		.loc 1 1728 0 discriminator 3
 6584 01c4 FB6F     		ldr	r3, [r7, #124]
 6585 01c6 002B     		cmp	r3, #0
 6586 01c8 00DA     		bge	.L318
 6587 01ca 0333     		adds	r3, r3, #3
 6588              	.L318:
 6589 01cc 9B10     		asrs	r3, r3, #2
 6590 01ce 5C1C     		adds	r4, r3, #1
 6591 01d0 386F     		ldr	r0, [r7, #112]
 6592 01d2 FFF7FEFF 		bl	rbit
 6593 01d6 0146     		mov	r1, r0
 6594 01d8 FB6F     		ldr	r3, [r7, #124]
 6595 01da 002B     		cmp	r3, #0
 6596 01dc 00DA     		bge	.L319
 6597 01de 0333     		adds	r3, r3, #3
 6598              	.L319:
 6599 01e0 9B10     		asrs	r3, r3, #2
 6600 01e2 9B00     		lsls	r3, r3, #2
 6601 01e4 7A6F     		ldr	r2, [r7, #116]
 6602 01e6 1344     		add	r3, r3, r2
 6603 01e8 1B68     		ldr	r3, [r3]
 6604 01ea 81EA0302 		eor	r2, r1, r3
 6605 01ee A300     		lsls	r3, r4, #2
 6606 01f0 07F18001 		add	r1, r7, #128
 6607 01f4 0B44     		add	r3, r3, r1
 6608 01f6 43F8802C 		str	r2, [r3, #-128]
 6609              	.LBE5:
1723:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6610              		.loc 1 1723 0 discriminator 3
ARM GAS  /tmp/cc6bdJLE.s 			page 146


 6611 01fa FB6F     		ldr	r3, [r7, #124]
 6612 01fc 0433     		adds	r3, r3, #4
 6613 01fe FB67     		str	r3, [r7, #124]
 6614              	.L317:
1723:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6615              		.loc 1 1723 0 is_stmt 0 discriminator 1
 6616 0200 FB6F     		ldr	r3, [r7, #124]
 6617 0202 2B2B     		cmp	r3, #43
 6618 0204 C7DD     		ble	.L320
1729:bluetooth_rxtx.c **** 		}
1730:bluetooth_rxtx.c **** 
1731:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
1732:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
1733:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
1734:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
1735:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
1736:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1737:bluetooth_rxtx.c **** 		}
1738:bluetooth_rxtx.c **** */
1739:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 6619              		.loc 1 1739 0 is_stmt 1
 6620 0206 BB6F     		ldr	r3, [r7, #120]
 6621 0208 0533     		adds	r3, r3, #5
 6622 020a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6623 020c 03F03F03 		and	r3, r3, #63
 6624 0210 0233     		adds	r3, r3, #2
 6625 0212 FB66     		str	r3, [r7, #108]
1740:bluetooth_rxtx.c **** 		
1741:bluetooth_rxtx.c **** 		if (len > 39)
 6626              		.loc 1 1741 0
 6627 0214 FB6E     		ldr	r3, [r7, #108]
 6628 0216 272B     		cmp	r3, #39
 6629 0218 00D9     		bls	.L321
1742:bluetooth_rxtx.c **** 			goto rx_flush;
 6630              		.loc 1 1742 0
 6631 021a 40E0     		b	.L322
 6632              	.L321:
1743:bluetooth_rxtx.c **** 
1744:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 6633              		.loc 1 1744 0
 6634 021c 3A4B     		ldr	r3, .L331+32
 6635 021e D968     		ldr	r1, [r3, #12]
 6636 0220 BB6F     		ldr	r3, [r7, #120]
 6637 0222 1A1D     		adds	r2, r3, #4
 6638 0224 FB6E     		ldr	r3, [r7, #108]
 6639 0226 0846     		mov	r0, r1
 6640 0228 1146     		mov	r1, r2
 6641 022a 1A46     		mov	r2, r3
 6642 022c FFF7FEFF 		bl	btle_crcgen_lut
 6643 0230 B866     		str	r0, [r7, #104]
1745:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 6644              		.loc 1 1745 0
 6645 0232 FB6E     		ldr	r3, [r7, #108]
 6646 0234 0633     		adds	r3, r3, #6
 6647 0236 BA6F     		ldr	r2, [r7, #120]
 6648 0238 1344     		add	r3, r3, r2
 6649 023a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/cc6bdJLE.s 			page 147


 6650 023c 1A04     		lsls	r2, r3, #16
1746:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 6651              		.loc 1 1746 0
 6652 023e FB6E     		ldr	r3, [r7, #108]
 6653 0240 0533     		adds	r3, r3, #5
 6654 0242 B96F     		ldr	r1, [r7, #120]
 6655 0244 0B44     		add	r3, r3, r1
 6656 0246 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6657 0248 1B02     		lsls	r3, r3, #8
 6658 024a 1343     		orrs	r3, r3, r2
1747:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 6659              		.loc 1 1747 0
 6660 024c FA6E     		ldr	r2, [r7, #108]
 6661 024e 0432     		adds	r2, r2, #4
 6662 0250 B96F     		ldr	r1, [r7, #120]
 6663 0252 0A44     		add	r2, r2, r1
 6664 0254 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6665 0256 1343     		orrs	r3, r3, r2
1745:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 6666              		.loc 1 1745 0
 6667 0258 7B66     		str	r3, [r7, #100]
1748:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 6668              		.loc 1 1748 0
 6669 025a BA6E     		ldr	r2, [r7, #104]
 6670 025c 7B6E     		ldr	r3, [r7, #100]
 6671 025e 9A42     		cmp	r2, r3
 6672 0260 00D0     		beq	.L323
1749:bluetooth_rxtx.c ****                         goto rx_flush;
 6673              		.loc 1 1749 0
 6674 0262 1CE0     		b	.L322
 6675              	.L323:
1750:bluetooth_rxtx.c **** 
1751:bluetooth_rxtx.c **** 		
1752:bluetooth_rxtx.c **** 		if (p[38] == 0x00 && p[39] == 0x3d)
 6676              		.loc 1 1752 0
 6677 0264 BB6F     		ldr	r3, [r7, #120]
 6678 0266 2633     		adds	r3, r3, #38
 6679 0268 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6680 026a 002B     		cmp	r3, #0
 6681 026c 14D1     		bne	.L324
 6682              		.loc 1 1752 0 is_stmt 0 discriminator 1
 6683 026e BB6F     		ldr	r3, [r7, #120]
 6684 0270 2733     		adds	r3, r3, #39
 6685 0272 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6686 0274 3D2B     		cmp	r3, #61
 6687 0276 0FD1     		bne	.L324
1753:bluetooth_rxtx.c **** 		{
1754:bluetooth_rxtx.c **** 			device_index = p[40];
 6688              		.loc 1 1754 0 is_stmt 1
 6689 0278 BB6F     		ldr	r3, [r7, #120]
 6690 027a 93F82820 		ldrb	r2, [r3, #40]	@ zero_extendqisi2
 6691 027e 274B     		ldr	r3, .L331+52
 6692 0280 1A70     		strb	r2, [r3]
1755:bluetooth_rxtx.c **** 			enqueue (MESSAGE, freq_buf);
 6693              		.loc 1 1755 0
 6694 0282 07F13403 		add	r3, r7, #52
 6695 0286 0220     		movs	r0, #2
ARM GAS  /tmp/cc6bdJLE.s 			page 148


 6696 0288 1946     		mov	r1, r3
 6697 028a FFF7FEFF 		bl	enqueue
1756:bluetooth_rxtx.c **** 			handle_usb(clkn);
 6698              		.loc 1 1756 0
 6699 028e 244B     		ldr	r3, .L331+56
 6700 0290 1B68     		ldr	r3, [r3]
 6701 0292 1846     		mov	r0, r3
 6702 0294 FFF7FEFF 		bl	handle_usb
 6703              	.L324:
1757:bluetooth_rxtx.c **** 		}
1758:bluetooth_rxtx.c **** 		RXLED_CLR;
 6704              		.loc 1 1758 0
 6705 0298 134B     		ldr	r3, .L331
 6706 029a 1022     		movs	r2, #16
 6707 029c 1A60     		str	r2, [r3]
 6708              	.L322:
1759:bluetooth_rxtx.c **** 	       
1760:bluetooth_rxtx.c **** 	rx_flush:
1761:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 6709              		.loc 1 1761 0
 6710 029e 6420     		movs	r0, #100
 6711 02a0 FFF7FEFF 		bl	cc2400_strobe
1762:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 6712              		.loc 1 1762 0
 6713 02a4 00BF     		nop
 6714              	.L325:
 6715              		.loc 1 1762 0 is_stmt 0 discriminator 1
 6716 02a6 FFF7FEFF 		bl	cc2400_status
 6717 02aa 0346     		mov	r3, r0
 6718 02ac 03F00403 		and	r3, r3, #4
 6719 02b0 002B     		cmp	r3, #0
 6720 02b2 F8D1     		bne	.L325
1763:bluetooth_rxtx.c **** 
1764:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 6721              		.loc 1 1764 0 is_stmt 1
 6722 02b4 00BF     		nop
 6723              	.L326:
 6724              		.loc 1 1764 0 is_stmt 0 discriminator 1
 6725 02b6 FFF7FEFF 		bl	cc2400_status
 6726 02ba 0346     		mov	r3, r0
 6727 02bc 03F04003 		and	r3, r3, #64
 6728 02c0 002B     		cmp	r3, #0
 6729 02c2 F8D0     		beq	.L326
1765:bluetooth_rxtx.c **** 
1766:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 6730              		.loc 1 1766 0 is_stmt 1
 6731 02c4 6120     		movs	r0, #97
 6732 02c6 FFF7FEFF 		bl	cc2400_strobe
1767:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 6733              		.loc 1 1767 0
 6734 02ca 00BF     		nop
 6735              	.L327:
 6736              		.loc 1 1767 0 is_stmt 0 discriminator 1
 6737 02cc FFF7FEFF 		bl	cc2400_status
 6738 02d0 0346     		mov	r3, r0
 6739 02d2 03F00403 		and	r3, r3, #4
 6740 02d6 002B     		cmp	r3, #0
ARM GAS  /tmp/cc6bdJLE.s 			page 149


 6741 02d8 F8D0     		beq	.L327
1768:bluetooth_rxtx.c **** 
1769:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6742              		.loc 1 1769 0 is_stmt 1
 6743 02da 0D4A     		ldr	r2, .L331+40
 6744 02dc 0C4B     		ldr	r3, .L331+40
 6745 02de 1B68     		ldr	r3, [r3]
 6746 02e0 23F00103 		bic	r3, r3, #1
 6747 02e4 1360     		str	r3, [r2]
1770:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6748              		.loc 1 1770 0
 6749 02e6 21E0     		b	.L328
 6750              	.L332:
 6751              		.align	2
 6752              	.L331:
 6753 02e8 3CC00920 		.word	537509948
 6754 02ec D6BE898E 		.word	-1903575338
 6755 02f0 58C00920 		.word	537509976
 6756 02f4 00000000 		.word	channel
 6757 02f8 00000000 		.word	rx_tc
 6758 02fc 38C00920 		.word	537509944
 6759 0300 00000000 		.word	rx_err
 6760 0304 00000000 		.word	status
 6761 0308 00000000 		.word	le
 6762 030c 10410050 		.word	1342193936
 6763 0310 24000340 		.word	1073938468
 6764 0314 10010000 		.word	whitening_word
 6765 0318 00000000 		.word	rxbuf1
 6766 031c 00000000 		.word	device_index
 6767 0320 00000000 		.word	clkn
 6768              	.L329:
 6769              	.LBB6:
1771:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 6770              		.loc 1 1771 0
 6771 0324 0F4B     		ldr	r3, .L333
 6772 0326 1B68     		ldr	r3, [r3]
 6773 0328 87F86330 		strb	r3, [r7, #99]
 6774              	.L328:
 6775              	.LBE6:
1770:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6776              		.loc 1 1770 0
 6777 032c 0E4B     		ldr	r3, .L333+4
 6778 032e 1B68     		ldr	r3, [r3]
 6779 0330 03F00403 		and	r3, r3, #4
 6780 0334 002B     		cmp	r3, #0
 6781 0336 F5D1     		bne	.L329
1772:bluetooth_rxtx.c ****                 }
1773:bluetooth_rxtx.c **** 		dma_init_le();
 6782              		.loc 1 1773 0
 6783 0338 FFF7FEFF 		bl	dma_init_le
1774:bluetooth_rxtx.c **** 		dio_ssp_start();
 6784              		.loc 1 1774 0
 6785 033c FFF7FEFF 		bl	dio_ssp_start
1775:bluetooth_rxtx.c **** 		
1776:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 6786              		.loc 1 1776 0
 6787 0340 6220     		movs	r0, #98
ARM GAS  /tmp/cc6bdJLE.s 			page 150


 6788 0342 FFF7FEFF 		bl	cc2400_strobe
1777:bluetooth_rxtx.c **** 		rx_tc = 0;
 6789              		.loc 1 1777 0
 6790 0346 094B     		ldr	r3, .L333+8
 6791 0348 0022     		movs	r2, #0
 6792 034a 1A60     		str	r2, [r3]
1778:bluetooth_rxtx.c **** 		rx_err = 0;
 6793              		.loc 1 1778 0
 6794 034c 084B     		ldr	r3, .L333+12
 6795 034e 0022     		movs	r2, #0
 6796 0350 1A60     		str	r2, [r3]
 6797              	.L308:
 6798              	.LBE4:
1684:bluetooth_rxtx.c **** 		
 6799              		.loc 1 1684 0
 6800 0352 084B     		ldr	r3, .L333+16
 6801 0354 1B78     		ldrb	r3, [r3]
 6802 0356 DBB2     		uxtb	r3, r3
 6803 0358 0E2B     		cmp	r3, #14
 6804 035a 3FF4B5AE 		beq	.L330
1779:bluetooth_rxtx.c **** 	 
1780:bluetooth_rxtx.c **** 	
1781:bluetooth_rxtx.c **** 	}
1782:bluetooth_rxtx.c **** //	dio_ssp_stop ();
1783:bluetooth_rxtx.c **** //	cs_trigger_disable ();
1784:bluetooth_rxtx.c **** }
 6805              		.loc 1 1784 0
 6806 035e 8437     		adds	r7, r7, #132
 6807              		.cfi_def_cfa_offset 12
 6808 0360 BD46     		mov	sp, r7
 6809              		.cfi_def_cfa_register 13
 6810              		@ sp needed
 6811 0362 90BD     		pop	{r4, r7, pc}
 6812              	.L334:
 6813              		.align	2
 6814              	.L333:
 6815 0364 08000340 		.word	1073938440
 6816 0368 0C000340 		.word	1073938444
 6817 036c 00000000 		.word	rx_tc
 6818 0370 00000000 		.word	rx_err
 6819 0374 00000000 		.word	requested_mode
 6820              		.cfi_endproc
 6821              	.LFE30:
 6823              		.section	.text.bt_stream_rx,"ax",%progbits
 6824              		.align	2
 6825              		.global	bt_stream_rx
 6826              		.thumb
 6827              		.thumb_func
 6829              	bt_stream_rx:
 6830              	.LFB31:
1785:bluetooth_rxtx.c **** 
1786:bluetooth_rxtx.c **** // wpson
1787:bluetooth_rxtx.c **** void bt_stream_rx()
1788:bluetooth_rxtx.c **** {
 6831              		.loc 1 1788 0
 6832              		.cfi_startproc
 6833              		@ args = 0, pretend = 0, frame = 136
ARM GAS  /tmp/cc6bdJLE.s 			page 151


 6834              		@ frame_needed = 1, uses_anonymous_args = 0
 6835 0000 90B5     		push	{r4, r7, lr}
 6836              		.cfi_def_cfa_offset 12
 6837              		.cfi_offset 4, -12
 6838              		.cfi_offset 7, -8
 6839              		.cfi_offset 14, -4
 6840 0002 A3B0     		sub	sp, sp, #140
 6841              		.cfi_def_cfa_offset 152
 6842 0004 00AF     		add	r7, sp, #0
 6843              		.cfi_def_cfa_register 7
1789:bluetooth_rxtx.c **** //	TXLED_SET;
1790:bluetooth_rxtx.c **** 	RXLED_CLR;
 6844              		.loc 1 1790 0
 6845 0006 C04B     		ldr	r3, .L361
 6846 0008 1022     		movs	r2, #16
 6847 000a 1A60     		str	r2, [r3]
1791:bluetooth_rxtx.c **** 	int i;
1792:bluetooth_rxtx.c **** 	
1793:bluetooth_rxtx.c **** 	u8 rssi_buf[DMA_SIZE];
1794:bluetooth_rxtx.c **** 	queue_init();
 6848              		.loc 1 1794 0
 6849 000c FFF7FEFF 		bl	queue_init
1795:bluetooth_rxtx.c **** 	dio_ssp_init();
 6850              		.loc 1 1795 0
 6851 0010 FFF7FEFF 		bl	dio_ssp_init
1796:bluetooth_rxtx.c **** 	dma_init_le();
 6852              		.loc 1 1796 0
 6853 0014 FFF7FEFF 		bl	dma_init_le
1797:bluetooth_rxtx.c **** 	dio_ssp_start();
 6854              		.loc 1 1797 0
 6855 0018 FFF7FEFF 		bl	dio_ssp_start
1798:bluetooth_rxtx.c **** 	
1799:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6856              		.loc 1 1799 0
 6857 001c 0D20     		movs	r0, #13
 6858 001e 47F6FF71 		movw	r1, #32767
 6859 0022 FFF7FEFF 		bl	cc2400_set
1800:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6860              		.loc 1 1800 0
 6861 0026 1220     		movs	r0, #18
 6862 0028 42F62231 		movw	r1, #11042
 6863 002c FFF7FEFF 		bl	cc2400_set
1801:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6864              		.loc 1 1801 0
 6865 0030 1420     		movs	r0, #20
 6866 0032 41F24B21 		movw	r1, #4683
 6867 0036 FFF7FEFF 		bl	cc2400_set
1802:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6868              		.loc 1 1802 0
 6869 003a 2020     		movs	r0, #32
 6870 003c 40F26151 		movw	r1, #1377
 6871 0040 FFF7FEFF 		bl	cc2400_set
1803:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6872              		.loc 1 1803 0
 6873 0044 0320     		movs	r0, #3
 6874 0046 4021     		movs	r1, #64
 6875 0048 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/cc6bdJLE.s 			page 152


1804:bluetooth_rxtx.c **** 
1805:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1806:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1807:bluetooth_rxtx.c **** 	
1808:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 6876              		.loc 1 1808 0
 6877 004c AF48     		ldr	r0, .L361+4
 6878 004e FFF7FEFF 		bl	rbit
 6879 0052 0346     		mov	r3, r0
 6880 0054 9BB2     		uxth	r3, r3
 6881 0056 2C20     		movs	r0, #44
 6882 0058 1946     		mov	r1, r3
 6883 005a FFF7FEFF 		bl	cc2400_set
1809:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 6884              		.loc 1 1809 0
 6885 005e AB48     		ldr	r0, .L361+4
 6886 0060 FFF7FEFF 		bl	rbit
 6887 0064 0346     		mov	r3, r0
 6888 0066 1B0C     		lsrs	r3, r3, #16
 6889 0068 9BB2     		uxth	r3, r3
 6890 006a 2D20     		movs	r0, #45
 6891 006c 1946     		mov	r1, r3
 6892 006e FFF7FEFF 		bl	cc2400_set
1810:bluetooth_rxtx.c **** 	
1811:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1812:bluetooth_rxtx.c **** 	PAEN_SET;
 6893              		.loc 1 1812 0
 6894 0072 A74B     		ldr	r3, .L361+8
 6895 0074 8022     		movs	r2, #128
 6896 0076 1A60     		str	r2, [r3]
1813:bluetooth_rxtx.c **** //	HGM_SET;
1814:bluetooth_rxtx.c **** #endif
1815:bluetooth_rxtx.c **** 
1816:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6897              		.loc 1 1816 0
 6898 0078 00BF     		nop
 6899              	.L336:
 6900              		.loc 1 1816 0 is_stmt 0 discriminator 1
 6901 007a FFF7FEFF 		bl	cc2400_status
 6902 007e 0346     		mov	r3, r0
 6903 0080 03F04003 		and	r3, r3, #64
 6904 0084 002B     		cmp	r3, #0
 6905 0086 F8D0     		beq	.L336
1817:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6906              		.loc 1 1817 0 is_stmt 1
 6907 0088 00BF     		nop
 6908              	.L337:
 6909              		.loc 1 1817 0 is_stmt 0 discriminator 1
 6910 008a FFF7FEFF 		bl	cc2400_status
 6911 008e 0346     		mov	r3, r0
 6912 0090 03F00403 		and	r3, r3, #4
 6913 0094 002B     		cmp	r3, #0
 6914 0096 F8D1     		bne	.L337
1818:bluetooth_rxtx.c **** 
1819:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6915              		.loc 1 1819 0 is_stmt 1
 6916 0098 9E4B     		ldr	r3, .L361+12
ARM GAS  /tmp/cc6bdJLE.s 			page 153


 6917 009a 1B88     		ldrh	r3, [r3]	@ movhi
 6918 009c 9BB2     		uxth	r3, r3
 6919 009e 013B     		subs	r3, r3, #1
 6920 00a0 9BB2     		uxth	r3, r3
 6921 00a2 0220     		movs	r0, #2
 6922 00a4 1946     		mov	r1, r3
 6923 00a6 FFF7FEFF 		bl	cc2400_set
1820:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6924              		.loc 1 1820 0
 6925 00aa 6120     		movs	r0, #97
 6926 00ac FFF7FEFF 		bl	cc2400_strobe
1821:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6927              		.loc 1 1821 0
 6928 00b0 00BF     		nop
 6929              	.L338:
 6930              		.loc 1 1821 0 is_stmt 0 discriminator 1
 6931 00b2 FFF7FEFF 		bl	cc2400_status
 6932 00b6 0346     		mov	r3, r0
 6933 00b8 03F00403 		and	r3, r3, #4
 6934 00bc 002B     		cmp	r3, #0
 6935 00be F8D0     		beq	.L338
1822:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6936              		.loc 1 1822 0 is_stmt 1
 6937 00c0 6220     		movs	r0, #98
 6938 00c2 FFF7FEFF 		bl	cc2400_strobe
1823:bluetooth_rxtx.c **** 	
1824:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 6939              		.loc 1 1824 0
 6940 00c6 56E1     		b	.L339
 6941              	.L360:
 6942              	.LBB7:
1825:bluetooth_rxtx.c **** 		
1826:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 6943              		.loc 1 1826 0
 6944 00c8 00BF     		nop
 6945              	.L340:
 6946              		.loc 1 1826 0 is_stmt 0 discriminator 1
 6947 00ca FFF7FEFF 		bl	cc2400_status
 6948 00ce 0346     		mov	r3, r0
 6949 00d0 03F01003 		and	r3, r3, #16
 6950 00d4 002B     		cmp	r3, #0
 6951 00d6 F8D0     		beq	.L340
1827:bluetooth_rxtx.c **** /*		int out;
1828:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1829:bluetooth_rxtx.c ****                 if (rssi >= 128)
1830:bluetooth_rxtx.c ****                         out = rssi - 256;
1831:bluetooth_rxtx.c ****                 else
1832:bluetooth_rxtx.c ****                         out = rssi;
1833:bluetooth_rxtx.c ****                 if (out < 0)
1834:bluetooth_rxtx.c **** 		  goto rx_flush;
1835:bluetooth_rxtx.c **** */
1836:bluetooth_rxtx.c **** 		rssi_sum = 0;
 6952              		.loc 1 1836 0 is_stmt 1
 6953 00d8 8F4B     		ldr	r3, .L361+16
 6954 00da 0022     		movs	r2, #0
 6955 00dc 1A60     		str	r2, [r3]
1837:bluetooth_rxtx.c **** 		rssi_count = 5;
ARM GAS  /tmp/cc6bdJLE.s 			page 154


 6956              		.loc 1 1837 0
 6957 00de 8F4B     		ldr	r3, .L361+20
 6958 00e0 0522     		movs	r2, #5
 6959 00e2 1A70     		strb	r2, [r3]
1838:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6960              		.loc 1 1838 0
 6961 00e4 0023     		movs	r3, #0
 6962 00e6 C7F88430 		str	r3, [r7, #132]
 6963 00ea 11E0     		b	.L341
 6964              	.L342:
1839:bluetooth_rxtx.c **** 		{
1840:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 6965              		.loc 1 1840 0 discriminator 3
 6966 00ec 0620     		movs	r0, #6
 6967 00ee FFF7FEFF 		bl	cc2400_get
 6968 00f2 0346     		mov	r3, r0
 6969 00f4 1B0A     		lsrs	r3, r3, #8
 6970 00f6 9BB2     		uxth	r3, r3
 6971 00f8 DBB2     		uxtb	r3, r3
 6972 00fa 5AB2     		sxtb	r2, r3
 6973 00fc 864B     		ldr	r3, .L361+16
 6974 00fe 1B68     		ldr	r3, [r3]
 6975 0100 1344     		add	r3, r3, r2
 6976 0102 854A     		ldr	r2, .L361+16
 6977 0104 1360     		str	r3, [r2]
1838:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6978              		.loc 1 1838 0 discriminator 3
 6979 0106 D7F88430 		ldr	r3, [r7, #132]
 6980 010a 0133     		adds	r3, r3, #1
 6981 010c C7F88430 		str	r3, [r7, #132]
 6982              	.L341:
1838:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 6983              		.loc 1 1838 0 is_stmt 0 discriminator 1
 6984 0110 824B     		ldr	r3, .L361+20
 6985 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6986 0114 1A46     		mov	r2, r3
 6987 0116 D7F88430 		ldr	r3, [r7, #132]
 6988 011a 9A42     		cmp	r2, r3
 6989 011c E6DC     		bgt	.L342
1841:bluetooth_rxtx.c **** 		}
1842:bluetooth_rxtx.c **** 	
1843:bluetooth_rxtx.c **** 		while (!rx_tc);
 6990              		.loc 1 1843 0 is_stmt 1
 6991 011e 00BF     		nop
 6992              	.L343:
 6993              		.loc 1 1843 0 is_stmt 0 discriminator 1
 6994 0120 7F4B     		ldr	r3, .L361+24
 6995 0122 1B68     		ldr	r3, [r3]
 6996 0124 002B     		cmp	r3, #0
 6997 0126 FBD0     		beq	.L343
1844:bluetooth_rxtx.c **** 	
1845:bluetooth_rxtx.c **** 		RXLED_SET;
 6998              		.loc 1 1845 0 is_stmt 1
 6999 0128 7E4B     		ldr	r3, .L361+28
 7000 012a 1022     		movs	r2, #16
 7001 012c 1A60     		str	r2, [r3]
1846:bluetooth_rxtx.c **** 		if (rx_err) {
ARM GAS  /tmp/cc6bdJLE.s 			page 155


 7002              		.loc 1 1846 0
 7003 012e 7E4B     		ldr	r3, .L361+32
 7004 0130 1B68     		ldr	r3, [r3]
 7005 0132 002B     		cmp	r3, #0
 7006 0134 07D0     		beq	.L344
1847:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 7007              		.loc 1 1847 0
 7008 0136 7D4B     		ldr	r3, .L361+36
 7009 0138 1B78     		ldrb	r3, [r3]
 7010 013a DBB2     		uxtb	r3, r3
 7011 013c 43F00203 		orr	r3, r3, #2
 7012 0140 DAB2     		uxtb	r2, r3
 7013 0142 7A4B     		ldr	r3, .L361+36
 7014 0144 1A70     		strb	r2, [r3]
 7015              	.L344:
1848:bluetooth_rxtx.c **** 		}	
1849:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 7016              		.loc 1 1849 0
 7017 0146 764B     		ldr	r3, .L361+24
 7018 0148 1B68     		ldr	r3, [r3]
 7019 014a 012B     		cmp	r3, #1
 7020 014c 07D9     		bls	.L345
1850:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 7021              		.loc 1 1850 0
 7022 014e 774B     		ldr	r3, .L361+36
 7023 0150 1B78     		ldrb	r3, [r3]
 7024 0152 DBB2     		uxtb	r3, r3
 7025 0154 43F00103 		orr	r3, r3, #1
 7026 0158 DAB2     		uxtb	r2, r3
 7027 015a 744B     		ldr	r3, .L361+36
 7028 015c 1A70     		strb	r2, [r3]
 7029              	.L345:
1851:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1852:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7030              		.loc 1 1852 0
 7031 015e 3B1D     		adds	r3, r7, #4
 7032 0160 C7F88030 		str	r3, [r7, #128]
1853:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7033              		.loc 1 1853 0
 7034 0164 724B     		ldr	r3, .L361+40
 7035 0166 1B68     		ldr	r3, [r3]
 7036 0168 7B60     		str	r3, [r7, #4]
1854:bluetooth_rxtx.c **** 
1855:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 7037              		.loc 1 1855 0
 7038 016a 00BF     		nop
 7039              	.L347:
 7040              		.loc 1 1855 0 is_stmt 0 discriminator 2
 7041 016c 714B     		ldr	r3, .L361+44
 7042 016e 1B68     		ldr	r3, [r3]
 7043 0170 03F00103 		and	r3, r3, #1
 7044 0174 002B     		cmp	r3, #0
 7045 0176 03D0     		beq	.L346
 7046              		.loc 1 1855 0 discriminator 1
 7047 0178 6B4B     		ldr	r3, .L361+32
 7048 017a 1B68     		ldr	r3, [r3]
 7049 017c 002B     		cmp	r3, #0
ARM GAS  /tmp/cc6bdJLE.s 			page 156


 7050 017e F5D0     		beq	.L347
 7051              	.L346:
1856:bluetooth_rxtx.c ****                 
1857:bluetooth_rxtx.c **** 			
1858:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7052              		.loc 1 1858 0 is_stmt 1
 7053 0180 6D4A     		ldr	r2, .L361+48
 7054 0182 6D4B     		ldr	r3, .L361+48
 7055 0184 1B68     		ldr	r3, [r3]
 7056 0186 23F00103 		bic	r3, r3, #1
 7057 018a 1360     		str	r3, [r2]
1859:bluetooth_rxtx.c **** 	
1860:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7058              		.loc 1 1860 0
 7059 018c 614B     		ldr	r3, .L361+12
 7060 018e 1B88     		ldrh	r3, [r3]	@ movhi
 7061 0190 9BB2     		uxth	r3, r3
 7062 0192 DBB2     		uxtb	r3, r3
 7063 0194 623B     		subs	r3, r3, #98
 7064 0196 DBB2     		uxtb	r3, r3
 7065 0198 1846     		mov	r0, r3
 7066 019a FFF7FEFF 		bl	btle_channel_index
 7067 019e 0346     		mov	r3, r0
 7068 01a0 1A46     		mov	r2, r3
 7069 01a2 1346     		mov	r3, r2
 7070 01a4 5B00     		lsls	r3, r3, #1
 7071 01a6 1344     		add	r3, r3, r2
 7072 01a8 1B01     		lsls	r3, r3, #4
 7073 01aa 644A     		ldr	r2, .L361+52
 7074 01ac 1344     		add	r3, r3, r2
 7075 01ae FB67     		str	r3, [r7, #124]
1861:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 7076              		.loc 1 1861 0
 7077 01b0 0023     		movs	r3, #0
 7078 01b2 C7F88430 		str	r3, [r7, #132]
 7079 01b6 3CE0     		b	.L348
 7080              	.L351:
 7081              	.LBB8:
1862:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7082              		.loc 1 1862 0 discriminator 3
 7083 01b8 614A     		ldr	r2, .L361+56
 7084 01ba D7F88430 		ldr	r3, [r7, #132]
 7085 01be 1344     		add	r3, r3, r2
 7086 01c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7087 01c2 1A06     		lsls	r2, r3, #24
1863:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7088              		.loc 1 1863 0 discriminator 3
 7089 01c4 D7F88430 		ldr	r3, [r7, #132]
 7090 01c8 0133     		adds	r3, r3, #1
 7091 01ca 5D49     		ldr	r1, .L361+56
 7092 01cc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7093 01ce 1B04     		lsls	r3, r3, #16
 7094 01d0 1A43     		orrs	r2, r2, r3
1864:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 7095              		.loc 1 1864 0 discriminator 3
 7096 01d2 D7F88430 		ldr	r3, [r7, #132]
 7097 01d6 0233     		adds	r3, r3, #2
ARM GAS  /tmp/cc6bdJLE.s 			page 157


 7098 01d8 5949     		ldr	r1, .L361+56
 7099 01da CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7100 01dc 1B02     		lsls	r3, r3, #8
 7101 01de 1343     		orrs	r3, r3, r2
1865:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 7102              		.loc 1 1865 0 discriminator 3
 7103 01e0 D7F88420 		ldr	r2, [r7, #132]
 7104 01e4 0332     		adds	r2, r2, #3
 7105 01e6 5649     		ldr	r1, .L361+56
 7106 01e8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7107 01ea 1343     		orrs	r3, r3, r2
1862:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7108              		.loc 1 1862 0 discriminator 3
 7109 01ec BB67     		str	r3, [r7, #120]
1866:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 7110              		.loc 1 1866 0 discriminator 3
 7111 01ee D7F88430 		ldr	r3, [r7, #132]
 7112 01f2 002B     		cmp	r3, #0
 7113 01f4 00DA     		bge	.L349
 7114 01f6 0333     		adds	r3, r3, #3
 7115              	.L349:
 7116 01f8 9B10     		asrs	r3, r3, #2
 7117 01fa 5C1C     		adds	r4, r3, #1
 7118 01fc B86F     		ldr	r0, [r7, #120]
 7119 01fe FFF7FEFF 		bl	rbit
 7120 0202 0146     		mov	r1, r0
 7121 0204 D7F88430 		ldr	r3, [r7, #132]
 7122 0208 002B     		cmp	r3, #0
 7123 020a 00DA     		bge	.L350
 7124 020c 0333     		adds	r3, r3, #3
 7125              	.L350:
 7126 020e 9B10     		asrs	r3, r3, #2
 7127 0210 9B00     		lsls	r3, r3, #2
 7128 0212 FA6F     		ldr	r2, [r7, #124]
 7129 0214 1344     		add	r3, r3, r2
 7130 0216 1B68     		ldr	r3, [r3]
 7131 0218 81EA0302 		eor	r2, r1, r3
 7132 021c A300     		lsls	r3, r4, #2
 7133 021e 07F18801 		add	r1, r7, #136
 7134 0222 0B44     		add	r3, r3, r1
 7135 0224 43F8842C 		str	r2, [r3, #-132]
 7136              	.LBE8:
1861:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7137              		.loc 1 1861 0 discriminator 3
 7138 0228 D7F88430 		ldr	r3, [r7, #132]
 7139 022c 0433     		adds	r3, r3, #4
 7140 022e C7F88430 		str	r3, [r7, #132]
 7141              	.L348:
1861:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7142              		.loc 1 1861 0 is_stmt 0 discriminator 1
 7143 0232 D7F88430 		ldr	r3, [r7, #132]
 7144 0236 2B2B     		cmp	r3, #43
 7145 0238 BEDD     		ble	.L351
1867:bluetooth_rxtx.c **** 		}
1868:bluetooth_rxtx.c **** 
1869:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
1870:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
ARM GAS  /tmp/cc6bdJLE.s 			page 158


1871:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
1872:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
1873:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
1874:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1875:bluetooth_rxtx.c **** 		}
1876:bluetooth_rxtx.c **** */
1877:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7146              		.loc 1 1877 0 is_stmt 1
 7147 023a D7F88030 		ldr	r3, [r7, #128]
 7148 023e 0533     		adds	r3, r3, #5
 7149 0240 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7150 0242 03F03F03 		and	r3, r3, #63
 7151 0246 0233     		adds	r3, r3, #2
 7152 0248 7B67     		str	r3, [r7, #116]
1878:bluetooth_rxtx.c **** 		
1879:bluetooth_rxtx.c **** 		if (len > 39)
 7153              		.loc 1 1879 0
 7154 024a 7B6F     		ldr	r3, [r7, #116]
 7155 024c 272B     		cmp	r3, #39
 7156 024e 00D9     		bls	.L352
1880:bluetooth_rxtx.c **** 			goto rx_flush;
 7157              		.loc 1 1880 0
 7158 0250 34E0     		b	.L353
 7159              	.L352:
1881:bluetooth_rxtx.c **** 
1882:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7160              		.loc 1 1882 0
 7161 0252 374B     		ldr	r3, .L361+40
 7162 0254 D968     		ldr	r1, [r3, #12]
 7163 0256 D7F88030 		ldr	r3, [r7, #128]
 7164 025a 1A1D     		adds	r2, r3, #4
 7165 025c 7B6F     		ldr	r3, [r7, #116]
 7166 025e 0846     		mov	r0, r1
 7167 0260 1146     		mov	r1, r2
 7168 0262 1A46     		mov	r2, r3
 7169 0264 FFF7FEFF 		bl	btle_crcgen_lut
 7170 0268 3867     		str	r0, [r7, #112]
1883:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7171              		.loc 1 1883 0
 7172 026a 7B6F     		ldr	r3, [r7, #116]
 7173 026c 0633     		adds	r3, r3, #6
 7174 026e D7F88020 		ldr	r2, [r7, #128]
 7175 0272 1344     		add	r3, r3, r2
 7176 0274 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7177 0276 1A04     		lsls	r2, r3, #16
1884:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 7178              		.loc 1 1884 0
 7179 0278 7B6F     		ldr	r3, [r7, #116]
 7180 027a 0533     		adds	r3, r3, #5
 7181 027c D7F88010 		ldr	r1, [r7, #128]
 7182 0280 0B44     		add	r3, r3, r1
 7183 0282 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7184 0284 1B02     		lsls	r3, r3, #8
 7185 0286 1343     		orrs	r3, r3, r2
1885:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 7186              		.loc 1 1885 0
 7187 0288 7A6F     		ldr	r2, [r7, #116]
ARM GAS  /tmp/cc6bdJLE.s 			page 159


 7188 028a 0432     		adds	r2, r2, #4
 7189 028c D7F88010 		ldr	r1, [r7, #128]
 7190 0290 0A44     		add	r2, r2, r1
 7191 0292 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7192 0294 1343     		orrs	r3, r3, r2
1883:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7193              		.loc 1 1883 0
 7194 0296 FB66     		str	r3, [r7, #108]
1886:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 7195              		.loc 1 1886 0
 7196 0298 3A6F     		ldr	r2, [r7, #112]
 7197 029a FB6E     		ldr	r3, [r7, #108]
 7198 029c 9A42     		cmp	r2, r3
 7199 029e 00D0     		beq	.L354
1887:bluetooth_rxtx.c ****                         goto rx_flush;
 7200              		.loc 1 1887 0
 7201 02a0 0CE0     		b	.L353
 7202              	.L354:
1888:bluetooth_rxtx.c **** 
1889:bluetooth_rxtx.c **** 
1890:bluetooth_rxtx.c **** 		enqueue (BR_PACKET, (uint8_t*)packet);
 7203              		.loc 1 1890 0
 7204 02a2 3B1D     		adds	r3, r7, #4
 7205 02a4 0020     		movs	r0, #0
 7206 02a6 1946     		mov	r1, r3
 7207 02a8 FFF7FEFF 		bl	enqueue
1891:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
1892:bluetooth_rxtx.c **** 		handle_usb(clkn);
 7208              		.loc 1 1892 0
 7209 02ac 254B     		ldr	r3, .L361+60
 7210 02ae 1B68     		ldr	r3, [r3]
 7211 02b0 1846     		mov	r0, r3
 7212 02b2 FFF7FEFF 		bl	handle_usb
1893:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
1894:bluetooth_rxtx.c **** //		handle_usb(clkn);
1895:bluetooth_rxtx.c **** 		RXLED_CLR;
 7213              		.loc 1 1895 0
 7214 02b6 144B     		ldr	r3, .L361
 7215 02b8 1022     		movs	r2, #16
 7216 02ba 1A60     		str	r2, [r3]
 7217              	.L353:
1896:bluetooth_rxtx.c **** 	       
1897:bluetooth_rxtx.c **** 	rx_flush:
1898:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 7218              		.loc 1 1898 0
 7219 02bc 6420     		movs	r0, #100
 7220 02be FFF7FEFF 		bl	cc2400_strobe
1899:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 7221              		.loc 1 1899 0
 7222 02c2 00BF     		nop
 7223              	.L355:
 7224              		.loc 1 1899 0 is_stmt 0 discriminator 1
 7225 02c4 FFF7FEFF 		bl	cc2400_status
 7226 02c8 0346     		mov	r3, r0
 7227 02ca 03F00403 		and	r3, r3, #4
 7228 02ce 002B     		cmp	r3, #0
 7229 02d0 F8D1     		bne	.L355
ARM GAS  /tmp/cc6bdJLE.s 			page 160


1900:bluetooth_rxtx.c **** 
1901:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 7230              		.loc 1 1901 0 is_stmt 1
 7231 02d2 00BF     		nop
 7232              	.L356:
 7233              		.loc 1 1901 0 is_stmt 0 discriminator 1
 7234 02d4 FFF7FEFF 		bl	cc2400_status
 7235 02d8 0346     		mov	r3, r0
 7236 02da 03F04003 		and	r3, r3, #64
 7237 02de 002B     		cmp	r3, #0
 7238 02e0 F8D0     		beq	.L356
1902:bluetooth_rxtx.c **** 
1903:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 7239              		.loc 1 1903 0 is_stmt 1
 7240 02e2 6120     		movs	r0, #97
 7241 02e4 FFF7FEFF 		bl	cc2400_strobe
1904:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 7242              		.loc 1 1904 0
 7243 02e8 00BF     		nop
 7244              	.L357:
 7245              		.loc 1 1904 0 is_stmt 0 discriminator 1
 7246 02ea FFF7FEFF 		bl	cc2400_status
 7247 02ee 0346     		mov	r3, r0
 7248 02f0 03F00403 		and	r3, r3, #4
 7249 02f4 002B     		cmp	r3, #0
 7250 02f6 F8D0     		beq	.L357
1905:bluetooth_rxtx.c **** 
1906:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7251              		.loc 1 1906 0 is_stmt 1
 7252 02f8 0F4A     		ldr	r2, .L361+48
 7253 02fa 0F4B     		ldr	r3, .L361+48
 7254 02fc 1B68     		ldr	r3, [r3]
 7255 02fe 23F00103 		bic	r3, r3, #1
 7256 0302 1360     		str	r3, [r2]
1907:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7257              		.loc 1 1907 0
 7258 0304 24E0     		b	.L358
 7259              	.L362:
 7260 0306 00BF     		.align	2
 7261              	.L361:
 7262 0308 3CC00920 		.word	537509948
 7263 030c D6BE898E 		.word	-1903575338
 7264 0310 58C00920 		.word	537509976
 7265 0314 00000000 		.word	channel
 7266 0318 00000000 		.word	rssi_sum
 7267 031c 00000000 		.word	rssi_count
 7268 0320 00000000 		.word	rx_tc
 7269 0324 38C00920 		.word	537509944
 7270 0328 00000000 		.word	rx_err
 7271 032c 00000000 		.word	status
 7272 0330 00000000 		.word	le
 7273 0334 10410050 		.word	1342193936
 7274 0338 24000340 		.word	1073938468
 7275 033c 10010000 		.word	whitening_word
 7276 0340 00000000 		.word	rxbuf1
 7277 0344 00000000 		.word	clkn
 7278              	.L359:
ARM GAS  /tmp/cc6bdJLE.s 			page 161


 7279              	.LBB9:
1908:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 7280              		.loc 1 1908 0
 7281 0348 114B     		ldr	r3, .L363
 7282 034a 1B68     		ldr	r3, [r3]
 7283 034c 87F86B30 		strb	r3, [r7, #107]
 7284              	.L358:
 7285              	.LBE9:
1907:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7286              		.loc 1 1907 0
 7287 0350 104B     		ldr	r3, .L363+4
 7288 0352 1B68     		ldr	r3, [r3]
 7289 0354 03F00403 		and	r3, r3, #4
 7290 0358 002B     		cmp	r3, #0
 7291 035a F5D1     		bne	.L359
1909:bluetooth_rxtx.c ****                 }
1910:bluetooth_rxtx.c **** 		dma_init_le();
 7292              		.loc 1 1910 0
 7293 035c FFF7FEFF 		bl	dma_init_le
1911:bluetooth_rxtx.c **** 		dio_ssp_start();
 7294              		.loc 1 1911 0
 7295 0360 FFF7FEFF 		bl	dio_ssp_start
1912:bluetooth_rxtx.c **** 		
1913:bluetooth_rxtx.c **** //              msleep(500);    
1914:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 7296              		.loc 1 1914 0
 7297 0364 6220     		movs	r0, #98
 7298 0366 FFF7FEFF 		bl	cc2400_strobe
1915:bluetooth_rxtx.c **** 		rx_tc = 0;
 7299              		.loc 1 1915 0
 7300 036a 0B4B     		ldr	r3, .L363+8
 7301 036c 0022     		movs	r2, #0
 7302 036e 1A60     		str	r2, [r3]
1916:bluetooth_rxtx.c **** 		rx_err = 0;
 7303              		.loc 1 1916 0
 7304 0370 0A4B     		ldr	r3, .L363+12
 7305 0372 0022     		movs	r2, #0
 7306 0374 1A60     		str	r2, [r3]
 7307              	.L339:
 7308              	.LBE7:
1824:bluetooth_rxtx.c **** 		
 7309              		.loc 1 1824 0
 7310 0376 0A4B     		ldr	r3, .L363+16
 7311 0378 1B78     		ldrb	r3, [r3]
 7312 037a DBB2     		uxtb	r3, r3
 7313 037c 012B     		cmp	r3, #1
 7314 037e 3FF4A3AE 		beq	.L360
1917:bluetooth_rxtx.c **** 	 
1918:bluetooth_rxtx.c **** 	
1919:bluetooth_rxtx.c **** 	}
1920:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 7315              		.loc 1 1920 0
 7316 0382 FFF7FEFF 		bl	dio_ssp_stop
1921:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 7317              		.loc 1 1921 0
 7318 0386 FFF7FEFF 		bl	cs_trigger_disable
1922:bluetooth_rxtx.c **** }
ARM GAS  /tmp/cc6bdJLE.s 			page 162


 7319              		.loc 1 1922 0
 7320 038a 8C37     		adds	r7, r7, #140
 7321              		.cfi_def_cfa_offset 12
 7322 038c BD46     		mov	sp, r7
 7323              		.cfi_def_cfa_register 13
 7324              		@ sp needed
 7325 038e 90BD     		pop	{r4, r7, pc}
 7326              	.L364:
 7327              		.align	2
 7328              	.L363:
 7329 0390 08000340 		.word	1073938440
 7330 0394 0C000340 		.word	1073938444
 7331 0398 00000000 		.word	rx_tc
 7332 039c 00000000 		.word	rx_err
 7333 03a0 00000000 		.word	requested_mode
 7334              		.cfi_endproc
 7335              	.LFE31:
 7337              		.section	.text.le_set_access_address,"ax",%progbits
 7338              		.align	2
 7339              		.thumb
 7340              		.thumb_func
 7342              	le_set_access_address:
 7343              	.LFB32:
1923:bluetooth_rxtx.c **** 
1924:bluetooth_rxtx.c **** 
1925:bluetooth_rxtx.c **** 
1926:bluetooth_rxtx.c **** /* set LE access address */
1927:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 7344              		.loc 1 1927 0
 7345              		.cfi_startproc
 7346              		@ args = 0, pretend = 0, frame = 16
 7347              		@ frame_needed = 1, uses_anonymous_args = 0
 7348 0000 80B5     		push	{r7, lr}
 7349              		.cfi_def_cfa_offset 8
 7350              		.cfi_offset 7, -8
 7351              		.cfi_offset 14, -4
 7352 0002 84B0     		sub	sp, sp, #16
 7353              		.cfi_def_cfa_offset 24
 7354 0004 00AF     		add	r7, sp, #0
 7355              		.cfi_def_cfa_register 7
 7356 0006 7860     		str	r0, [r7, #4]
1928:bluetooth_rxtx.c **** 	u32 aa_rev;
1929:bluetooth_rxtx.c **** 
1930:bluetooth_rxtx.c **** 	le.access_address = aa;
 7357              		.loc 1 1930 0
 7358 0008 094A     		ldr	r2, .L366
 7359 000a 7B68     		ldr	r3, [r7, #4]
 7360 000c 1360     		str	r3, [r2]
1931:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 7361              		.loc 1 1931 0
 7362 000e 7868     		ldr	r0, [r7, #4]
 7363 0010 FFF7FEFF 		bl	rbit
 7364 0014 F860     		str	r0, [r7, #12]
1932:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 7365              		.loc 1 1932 0
 7366 0016 FB68     		ldr	r3, [r7, #12]
 7367 0018 9AB2     		uxth	r2, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 163


 7368 001a 054B     		ldr	r3, .L366
 7369 001c DA80     		strh	r2, [r3, #6]	@ movhi
1933:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 7370              		.loc 1 1933 0
 7371 001e FB68     		ldr	r3, [r7, #12]
 7372 0020 1B0C     		lsrs	r3, r3, #16
 7373 0022 9AB2     		uxth	r2, r3
 7374 0024 024B     		ldr	r3, .L366
 7375 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1934:bluetooth_rxtx.c **** }
 7376              		.loc 1 1934 0
 7377 0028 1037     		adds	r7, r7, #16
 7378              		.cfi_def_cfa_offset 8
 7379 002a BD46     		mov	sp, r7
 7380              		.cfi_def_cfa_register 13
 7381              		@ sp needed
 7382 002c 80BD     		pop	{r7, pc}
 7383              	.L367:
 7384 002e 00BF     		.align	2
 7385              	.L366:
 7386 0030 00000000 		.word	le
 7387              		.cfi_endproc
 7388              	.LFE32:
 7390              		.section	.text.reset_le,"ax",%progbits
 7391              		.align	2
 7392              		.global	reset_le
 7393              		.thumb
 7394              		.thumb_func
 7396              	reset_le:
 7397              	.LFB33:
1935:bluetooth_rxtx.c **** 
1936:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1937:bluetooth_rxtx.c **** void reset_le() {
 7398              		.loc 1 1937 0
 7399              		.cfi_startproc
 7400              		@ args = 0, pretend = 0, frame = 0
 7401              		@ frame_needed = 1, uses_anonymous_args = 0
 7402 0000 80B5     		push	{r7, lr}
 7403              		.cfi_def_cfa_offset 8
 7404              		.cfi_offset 7, -8
 7405              		.cfi_offset 14, -4
 7406 0002 00AF     		add	r7, sp, #0
 7407              		.cfi_def_cfa_register 7
1938:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 7408              		.loc 1 1938 0
 7409 0004 1F48     		ldr	r0, .L369
 7410 0006 FFF7FEFF 		bl	le_set_access_address
1939:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 7411              		.loc 1 1939 0
 7412 000a 1F4B     		ldr	r3, .L369+4
 7413 000c 1F4A     		ldr	r2, .L369+8
 7414 000e 9A60     		str	r2, [r3, #8]
1940:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 7415              		.loc 1 1940 0
 7416 0010 1D4B     		ldr	r3, .L369+4
 7417 0012 1F4A     		ldr	r2, .L369+12
 7418 0014 DA60     		str	r2, [r3, #12]
ARM GAS  /tmp/cc6bdJLE.s 			page 164


1941:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 7419              		.loc 1 1941 0
 7420 0016 1C4B     		ldr	r3, .L369+4
 7421 0018 0122     		movs	r2, #1
 7422 001a 1A61     		str	r2, [r3, #16]
1942:bluetooth_rxtx.c **** 	le.last_packet = 0;
 7423              		.loc 1 1942 0
 7424 001c 1A4B     		ldr	r3, .L369+4
 7425 001e 0022     		movs	r2, #0
 7426 0020 1A64     		str	r2, [r3, #64]
1943:bluetooth_rxtx.c **** 
1944:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 7427              		.loc 1 1944 0
 7428 0022 194B     		ldr	r3, .L369+4
 7429 0024 0022     		movs	r2, #0
 7430 0026 1A75     		strb	r2, [r3, #20]
1945:bluetooth_rxtx.c **** 
1946:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 7431              		.loc 1 1946 0
 7432 0028 174B     		ldr	r3, .L369+4
 7433 002a 0022     		movs	r2, #0
 7434 002c 5A75     		strb	r2, [r3, #21]
1947:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 7435              		.loc 1 1947 0
 7436 002e 164B     		ldr	r3, .L369+4
 7437 0030 0022     		movs	r2, #0
 7438 0032 9A75     		strb	r2, [r3, #22]
1948:bluetooth_rxtx.c **** 
1949:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 7439              		.loc 1 1949 0
 7440 0034 144B     		ldr	r3, .L369+4
 7441 0036 0022     		movs	r2, #0
 7442 0038 9A61     		str	r2, [r3, #24]
1950:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 7443              		.loc 1 1950 0
 7444 003a 134B     		ldr	r3, .L369+4
 7445 003c 0022     		movs	r2, #0
 7446 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1951:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 7447              		.loc 1 1951 0
 7448 0040 114B     		ldr	r3, .L369+4
 7449 0042 0022     		movs	r2, #0
 7450 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1952:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 7451              		.loc 1 1952 0
 7452 0046 104B     		ldr	r3, .L369+4
 7453 0048 0022     		movs	r2, #0
 7454 004a DA83     		strh	r2, [r3, #30]	@ movhi
1953:bluetooth_rxtx.c **** 	le.conn_count = 0;
 7455              		.loc 1 1953 0
 7456 004c 0E4B     		ldr	r3, .L369+4
 7457 004e 0022     		movs	r2, #0
 7458 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1954:bluetooth_rxtx.c **** 
1955:bluetooth_rxtx.c **** 	le.win_size = 0;
 7459              		.loc 1 1955 0
 7460 0052 0D4B     		ldr	r3, .L369+4
ARM GAS  /tmp/cc6bdJLE.s 			page 165


 7461 0054 0022     		movs	r2, #0
 7462 0056 83F82220 		strb	r2, [r3, #34]
1956:bluetooth_rxtx.c **** 	le.win_offset = 0;
 7463              		.loc 1 1956 0
 7464 005a 0B4B     		ldr	r3, .L369+4
 7465 005c 0022     		movs	r2, #0
 7466 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1957:bluetooth_rxtx.c **** 
1958:bluetooth_rxtx.c **** 	le.update_pending = 0;
 7467              		.loc 1 1958 0
 7468 0060 094B     		ldr	r3, .L369+4
 7469 0062 0022     		movs	r2, #0
 7470 0064 9A62     		str	r2, [r3, #40]
1959:bluetooth_rxtx.c **** 	le.update_instant = 0;
 7471              		.loc 1 1959 0
 7472 0066 084B     		ldr	r3, .L369+4
 7473 0068 0022     		movs	r2, #0
 7474 006a 9A85     		strh	r2, [r3, #44]	@ movhi
1960:bluetooth_rxtx.c **** 	le.interval_update = 0;
 7475              		.loc 1 1960 0
 7476 006c 064B     		ldr	r3, .L369+4
 7477 006e 0022     		movs	r2, #0
 7478 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1961:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 7479              		.loc 1 1961 0
 7480 0072 054B     		ldr	r3, .L369+4
 7481 0074 0022     		movs	r2, #0
 7482 0076 83F83020 		strb	r2, [r3, #48]
1962:bluetooth_rxtx.c **** 	le.win_offset_update;
1963:bluetooth_rxtx.c **** 
1964:bluetooth_rxtx.c **** 	do_hop = 0;
 7483              		.loc 1 1964 0
 7484 007a 064B     		ldr	r3, .L369+16
 7485 007c 0022     		movs	r2, #0
 7486 007e 1A70     		strb	r2, [r3]
1965:bluetooth_rxtx.c **** }
 7487              		.loc 1 1965 0
 7488 0080 80BD     		pop	{r7, pc}
 7489              	.L370:
 7490 0082 00BF     		.align	2
 7491              	.L369:
 7492 0084 D6BE898E 		.word	-1903575338
 7493 0088 00000000 		.word	le
 7494 008c 55555500 		.word	5592405
 7495 0090 AAAAAA00 		.word	11184810
 7496 0094 00000000 		.word	do_hop
 7497              		.cfi_endproc
 7498              	.LFE33:
 7500              		.section	.text.reset_le_promisc,"ax",%progbits
 7501              		.align	2
 7502              		.global	reset_le_promisc
 7503              		.thumb
 7504              		.thumb_func
 7506              	reset_le_promisc:
 7507              	.LFB34:
1966:bluetooth_rxtx.c **** 
1967:bluetooth_rxtx.c **** // reset LE Promisc state
ARM GAS  /tmp/cc6bdJLE.s 			page 166


1968:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 7508              		.loc 1 1968 0
 7509              		.cfi_startproc
 7510              		@ args = 0, pretend = 0, frame = 0
 7511              		@ frame_needed = 1, uses_anonymous_args = 0
 7512 0000 80B5     		push	{r7, lr}
 7513              		.cfi_def_cfa_offset 8
 7514              		.cfi_offset 7, -8
 7515              		.cfi_offset 14, -4
 7516 0002 00AF     		add	r7, sp, #0
 7517              		.cfi_def_cfa_register 7
1969:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 7518              		.loc 1 1969 0
 7519 0004 0548     		ldr	r0, .L372
 7520 0006 0021     		movs	r1, #0
 7521 0008 4FF48472 		mov	r2, #264
 7522 000c FFF7FEFF 		bl	memset
1970:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 7523              		.loc 1 1970 0
 7524 0010 024B     		ldr	r3, .L372
 7525 0012 4FF0FF32 		mov	r2, #-1
 7526 0016 C3F80021 		str	r2, [r3, #256]
1971:bluetooth_rxtx.c **** }
 7527              		.loc 1 1971 0
 7528 001a 80BD     		pop	{r7, pc}
 7529              	.L373:
 7530              		.align	2
 7531              	.L372:
 7532 001c 00000000 		.word	le_promisc
 7533              		.cfi_endproc
 7534              	.LFE34:
 7536              		.section	.text.bt_generic_le,"ax",%progbits
 7537              		.align	2
 7538              		.global	bt_generic_le
 7539              		.thumb
 7540              		.thumb_func
 7542              	bt_generic_le:
 7543              	.LFB35:
1972:bluetooth_rxtx.c **** 
1973:bluetooth_rxtx.c **** /* generic le mode */
1974:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1975:bluetooth_rxtx.c **** {
 7544              		.loc 1 1975 0
 7545              		.cfi_startproc
 7546              		@ args = 0, pretend = 0, frame = 32
 7547              		@ frame_needed = 1, uses_anonymous_args = 0
 7548 0000 80B5     		push	{r7, lr}
 7549              		.cfi_def_cfa_offset 8
 7550              		.cfi_offset 7, -8
 7551              		.cfi_offset 14, -4
 7552 0002 88B0     		sub	sp, sp, #32
 7553              		.cfi_def_cfa_offset 40
 7554 0004 00AF     		add	r7, sp, #0
 7555              		.cfi_def_cfa_register 7
 7556 0006 0346     		mov	r3, r0
 7557 0008 FB71     		strb	r3, [r7, #7]
1976:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
ARM GAS  /tmp/cc6bdJLE.s 			page 167


 7558              		.loc 1 1976 0
 7559 000a 0023     		movs	r3, #0
 7560 000c FB60     		str	r3, [r7, #12]
1977:bluetooth_rxtx.c **** 	u8 hold;
1978:bluetooth_rxtx.c **** 	int i, j;
1979:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1980:bluetooth_rxtx.c **** 
1981:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 7561              		.loc 1 1981 0
 7562 000e A44B     		ldr	r3, .L402
 7563 0010 0122     		movs	r2, #1
 7564 0012 1A70     		strb	r2, [r3]
1982:bluetooth_rxtx.c **** 	mode = active_mode;
 7565              		.loc 1 1982 0
 7566 0014 A34A     		ldr	r2, .L402+4
 7567 0016 FB79     		ldrb	r3, [r7, #7]
 7568 0018 1370     		strb	r3, [r2]
1983:bluetooth_rxtx.c **** 
1984:bluetooth_rxtx.c **** 	reset_le();
 7569              		.loc 1 1984 0
 7570 001a FFF7FEFF 		bl	reset_le
1985:bluetooth_rxtx.c **** 
1986:bluetooth_rxtx.c **** 	// enable USB interrupts
1987:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 7571              		.loc 1 1987 0
 7572 001e A24B     		ldr	r3, .L402+8
 7573 0020 4FF08072 		mov	r2, #16777216
 7574 0024 1A60     		str	r2, [r3]
1988:bluetooth_rxtx.c **** 
1989:bluetooth_rxtx.c **** 	RXLED_CLR;
 7575              		.loc 1 1989 0
 7576 0026 A14B     		ldr	r3, .L402+12
 7577 0028 1022     		movs	r2, #16
 7578 002a 1A60     		str	r2, [r3]
1990:bluetooth_rxtx.c **** 
1991:bluetooth_rxtx.c **** 	queue_init();
 7579              		.loc 1 1991 0
 7580 002c FFF7FEFF 		bl	queue_init
1992:bluetooth_rxtx.c **** 	dio_ssp_init();
 7581              		.loc 1 1992 0
 7582 0030 FFF7FEFF 		bl	dio_ssp_init
1993:bluetooth_rxtx.c **** 	dma_init();
 7583              		.loc 1 1993 0
 7584 0034 FFF7FEFF 		bl	dma_init
1994:bluetooth_rxtx.c **** 	dio_ssp_start();
 7585              		.loc 1 1994 0
 7586 0038 FFF7FEFF 		bl	dio_ssp_start
1995:bluetooth_rxtx.c **** 	cc2400_rx();
 7587              		.loc 1 1995 0
 7588 003c FFF7FEFF 		bl	cc2400_rx
1996:bluetooth_rxtx.c **** 
1997:bluetooth_rxtx.c **** 	cs_trigger_enable();
 7589              		.loc 1 1997 0
 7590 0040 FFF7FEFF 		bl	cs_trigger_enable
1998:bluetooth_rxtx.c **** 
1999:bluetooth_rxtx.c **** 	hold = 0;
 7591              		.loc 1 1999 0
ARM GAS  /tmp/cc6bdJLE.s 			page 168


 7592 0044 0023     		movs	r3, #0
 7593 0046 FB77     		strb	r3, [r7, #31]
2000:bluetooth_rxtx.c **** 
2001:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 7594              		.loc 1 2001 0
 7595 0048 15E1     		b	.L375
 7596              	.L401:
 7597              	.LBB10:
2002:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7598              		.loc 1 2002 0
 7599 004a 994B     		ldr	r3, .L402+16
 7600 004c 1B88     		ldrh	r3, [r3]	@ movhi
 7601 004e 9BB2     		uxth	r3, r3
 7602 0050 002B     		cmp	r3, #0
 7603 0052 24D0     		beq	.L376
2003:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7604              		.loc 1 2003 0
 7605 0054 6420     		movs	r0, #100
 7606 0056 FFF7FEFF 		bl	cc2400_strobe
2004:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 7607              		.loc 1 2004 0
 7608 005a 00BF     		nop
 7609              	.L377:
 7610              		.loc 1 2004 0 is_stmt 0 discriminator 1
 7611 005c FFF7FEFF 		bl	cc2400_status
 7612 0060 0346     		mov	r3, r0
 7613 0062 03F00403 		and	r3, r3, #4
 7614 0066 002B     		cmp	r3, #0
 7615 0068 F8D1     		bne	.L377
2005:bluetooth_rxtx.c **** 
2006:bluetooth_rxtx.c **** 			/* Retune */
2007:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 7616              		.loc 1 2007 0 is_stmt 1
 7617 006a 924B     		ldr	r3, .L402+20
 7618 006c 1B88     		ldrh	r3, [r3]	@ movhi
 7619 006e 9BB2     		uxth	r3, r3
 7620 0070 013B     		subs	r3, r3, #1
 7621 0072 9BB2     		uxth	r3, r3
 7622 0074 0220     		movs	r0, #2
 7623 0076 1946     		mov	r1, r3
 7624 0078 FFF7FEFF 		bl	cc2400_set
2008:bluetooth_rxtx.c **** 
2009:bluetooth_rxtx.c **** 			/* Wait for lock */
2010:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 7625              		.loc 1 2010 0
 7626 007c 6120     		movs	r0, #97
 7627 007e FFF7FEFF 		bl	cc2400_strobe
2011:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 7628              		.loc 1 2011 0
 7629 0082 00BF     		nop
 7630              	.L378:
 7631              		.loc 1 2011 0 is_stmt 0 discriminator 1
 7632 0084 FFF7FEFF 		bl	cc2400_status
 7633 0088 0346     		mov	r3, r0
 7634 008a 03F00403 		and	r3, r3, #4
 7635 008e 002B     		cmp	r3, #0
 7636 0090 F8D0     		beq	.L378
ARM GAS  /tmp/cc6bdJLE.s 			page 169


2012:bluetooth_rxtx.c **** 
2013:bluetooth_rxtx.c **** 			/* RX mode */
2014:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 7637              		.loc 1 2014 0 is_stmt 1
 7638 0092 6220     		movs	r0, #98
 7639 0094 FFF7FEFF 		bl	cc2400_strobe
2015:bluetooth_rxtx.c **** 
2016:bluetooth_rxtx.c **** 			requested_channel = 0;
 7640              		.loc 1 2016 0
 7641 0098 854B     		ldr	r3, .L402+16
 7642 009a 0022     		movs	r2, #0
 7643 009c 1A80     		strh	r2, [r3]	@ movhi
 7644              	.L376:
2017:bluetooth_rxtx.c **** 		}
2018:bluetooth_rxtx.c **** 
2019:bluetooth_rxtx.c **** 		if (do_hop) {
 7645              		.loc 1 2019 0
 7646 009e 864B     		ldr	r3, .L402+24
 7647 00a0 1B78     		ldrb	r3, [r3]
 7648 00a2 DBB2     		uxtb	r3, r3
 7649 00a4 002B     		cmp	r3, #0
 7650 00a6 02D0     		beq	.L379
2020:bluetooth_rxtx.c **** 			hop();
 7651              		.loc 1 2020 0
 7652 00a8 FFF7FEFF 		bl	hop
 7653 00ac 03E0     		b	.L380
 7654              	.L379:
2021:bluetooth_rxtx.c **** 		} else {
2022:bluetooth_rxtx.c **** 			TXLED_CLR;
 7655              		.loc 1 2022 0
 7656 00ae 7F4B     		ldr	r3, .L402+12
 7657 00b0 4FF48072 		mov	r2, #256
 7658 00b4 1A60     		str	r2, [r3]
 7659              	.L380:
2023:bluetooth_rxtx.c **** 		}
2024:bluetooth_rxtx.c **** 
2025:bluetooth_rxtx.c **** 		RXLED_CLR;
 7660              		.loc 1 2025 0
 7661 00b6 7D4B     		ldr	r3, .L402+12
 7662 00b8 1022     		movs	r2, #16
 7663 00ba 1A60     		str	r2, [r3]
2026:bluetooth_rxtx.c **** 
2027:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2028:bluetooth_rxtx.c **** 		rssi_reset();
 7664              		.loc 1 2028 0
 7665 00bc FFF7FEFF 		bl	rssi_reset
2029:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 7666              		.loc 1 2029 0
 7667 00c0 8023     		movs	r3, #128
 7668 00c2 BB74     		strb	r3, [r7, #18]
2030:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 7669              		.loc 1 2030 0
 7670 00c4 22E0     		b	.L381
 7671              	.L384:
2031:bluetooth_rxtx.c **** 		{
2032:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 7672              		.loc 1 2032 0
ARM GAS  /tmp/cc6bdJLE.s 			page 170


 7673 00c6 0620     		movs	r0, #6
 7674 00c8 FFF7FEFF 		bl	cc2400_get
 7675 00cc 0346     		mov	r3, r0
 7676 00ce 1B0A     		lsrs	r3, r3, #8
 7677 00d0 9BB2     		uxth	r3, r3
 7678 00d2 FB74     		strb	r3, [r7, #19]
2033:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 7679              		.loc 1 2033 0
 7680 00d4 794B     		ldr	r3, .L402+28
 7681 00d6 1B78     		ldrb	r3, [r3]
 7682 00d8 DBB2     		uxtb	r3, r3
 7683 00da 002B     		cmp	r3, #0
 7684 00dc 11D0     		beq	.L382
 7685              		.loc 1 2033 0 is_stmt 0 discriminator 1
 7686 00de 97F91230 		ldrsb	r3, [r7, #18]
 7687 00e2 13F1800F 		cmn	r3, #128
 7688 00e6 0CD1     		bne	.L382
2034:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 7689              		.loc 1 2034 0 is_stmt 1
 7690 00e8 754B     		ldr	r3, .L402+32
 7691 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7692 00ec 5BB2     		sxtb	r3, r3
 7693 00ee 03F13602 		add	r2, r3, #54
 7694 00f2 97F91330 		ldrsb	r3, [r7, #19]
 7695 00f6 9342     		cmp	r3, r2
 7696 00f8 B8BF     		it	lt
 7697 00fa 1346     		movlt	r3, r2
 7698 00fc FB74     		strb	r3, [r7, #19]
2035:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 7699              		.loc 1 2035 0
 7700 00fe FB7C     		ldrb	r3, [r7, #19]
 7701 0100 BB74     		strb	r3, [r7, #18]
 7702              	.L382:
2036:bluetooth_rxtx.c **** 			}
2037:bluetooth_rxtx.c **** 			rssi_add(rssi);
 7703              		.loc 1 2037 0
 7704 0102 97F91330 		ldrsb	r3, [r7, #19]
 7705 0106 1846     		mov	r0, r3
 7706 0108 FFF7FEFF 		bl	rssi_add
 7707              	.L381:
2030:bluetooth_rxtx.c **** 		{
 7708              		.loc 1 2030 0
 7709 010c 6D4B     		ldr	r3, .L402+36
 7710 010e 1B68     		ldr	r3, [r3]
 7711 0110 002B     		cmp	r3, #0
 7712 0112 03D1     		bne	.L383
2030:bluetooth_rxtx.c **** 		{
 7713              		.loc 1 2030 0 is_stmt 0 discriminator 1
 7714 0114 6C4B     		ldr	r3, .L402+40
 7715 0116 1B68     		ldr	r3, [r3]
 7716 0118 002B     		cmp	r3, #0
 7717 011a D4D0     		beq	.L384
 7718              	.L383:
2038:bluetooth_rxtx.c **** 		}
2039:bluetooth_rxtx.c **** 
2040:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
2041:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
ARM GAS  /tmp/cc6bdJLE.s 			page 171


 7719              		.loc 1 2041 0 is_stmt 1
 7720 011c 694B     		ldr	r3, .L402+36
 7721 011e 1B68     		ldr	r3, [r3]
 7722 0120 03F00103 		and	r3, r3, #1
 7723 0124 002B     		cmp	r3, #0
 7724 0126 09D0     		beq	.L385
2042:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 7725              		.loc 1 2042 0
 7726 0128 684B     		ldr	r3, .L402+44
 7727 012a 1B68     		ldr	r3, [r3]
 7728 012c FB60     		str	r3, [r7, #12]
2043:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 7729              		.loc 1 2043 0
 7730 012e 684B     		ldr	r3, .L402+48
 7731 0130 1B68     		ldr	r3, [r3]
 7732 0132 664A     		ldr	r2, .L402+44
 7733 0134 1360     		str	r3, [r2]
2044:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 7734              		.loc 1 2044 0
 7735 0136 664A     		ldr	r2, .L402+48
 7736 0138 FB68     		ldr	r3, [r7, #12]
 7737 013a 1360     		str	r3, [r2]
 7738              	.L385:
2045:bluetooth_rxtx.c **** 		}
2046:bluetooth_rxtx.c **** 
2047:bluetooth_rxtx.c **** 		if (rx_err) {
 7739              		.loc 1 2047 0
 7740 013c 624B     		ldr	r3, .L402+40
 7741 013e 1B68     		ldr	r3, [r3]
 7742 0140 002B     		cmp	r3, #0
 7743 0142 07D0     		beq	.L386
2048:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 7744              		.loc 1 2048 0
 7745 0144 634B     		ldr	r3, .L402+52
 7746 0146 1B78     		ldrb	r3, [r3]
 7747 0148 DBB2     		uxtb	r3, r3
 7748 014a 43F00203 		orr	r3, r3, #2
 7749 014e DAB2     		uxtb	r2, r3
 7750 0150 604B     		ldr	r3, .L402+52
 7751 0152 1A70     		strb	r2, [r3]
 7752              	.L386:
2049:bluetooth_rxtx.c **** 		}
2050:bluetooth_rxtx.c **** 
2051:bluetooth_rxtx.c **** 		/* No DMA transfer? */
2052:bluetooth_rxtx.c **** 		if (!rx_tc)
 7753              		.loc 1 2052 0
 7754 0154 5B4B     		ldr	r3, .L402+36
 7755 0156 1B68     		ldr	r3, [r3]
 7756 0158 002B     		cmp	r3, #0
 7757 015a 00D1     		bne	.L387
2053:bluetooth_rxtx.c **** 			goto rx_continue;
 7758              		.loc 1 2053 0
 7759 015c 85E0     		b	.L388
 7760              	.L387:
2054:bluetooth_rxtx.c **** 
2055:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
2056:bluetooth_rxtx.c **** 		if (rx_tc > 1)
ARM GAS  /tmp/cc6bdJLE.s 			page 172


 7761              		.loc 1 2056 0
 7762 015e 594B     		ldr	r3, .L402+36
 7763 0160 1B68     		ldr	r3, [r3]
 7764 0162 012B     		cmp	r3, #1
 7765 0164 07D9     		bls	.L389
2057:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 7766              		.loc 1 2057 0
 7767 0166 5B4B     		ldr	r3, .L402+52
 7768 0168 1B78     		ldrb	r3, [r3]
 7769 016a DBB2     		uxtb	r3, r3
 7770 016c 43F00103 		orr	r3, r3, #1
 7771 0170 DAB2     		uxtb	r2, r3
 7772 0172 584B     		ldr	r3, .L402+52
 7773 0174 1A70     		strb	r2, [r3]
 7774              	.L389:
2058:bluetooth_rxtx.c **** 
2059:bluetooth_rxtx.c **** 		rssi_iir_update();
 7775              		.loc 1 2059 0
 7776 0176 FFF7FEFF 		bl	rssi_iir_update
2060:bluetooth_rxtx.c **** 
2061:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
2062:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
2063:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
2064:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
2065:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 7777              		.loc 1 2065 0
 7778 017a 504B     		ldr	r3, .L402+28
 7779 017c 1B78     		ldrb	r3, [r3]
 7780 017e DBB2     		uxtb	r3, r3
 7781 0180 002B     		cmp	r3, #0
 7782 0182 03D1     		bne	.L390
 7783              		.loc 1 2065 0 is_stmt 0 discriminator 1
 7784 0184 544B     		ldr	r3, .L402+56
 7785 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7786 0188 002B     		cmp	r3, #0
 7787 018a 0CD0     		beq	.L391
 7788              	.L390:
2066:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 7789              		.loc 1 2066 0 is_stmt 1
 7790 018c 514B     		ldr	r3, .L402+52
 7791 018e 1B78     		ldrb	r3, [r3]
 7792 0190 DBB2     		uxtb	r3, r3
 7793 0192 43F00803 		orr	r3, r3, #8
 7794 0196 DAB2     		uxtb	r2, r3
 7795 0198 4E4B     		ldr	r3, .L402+52
 7796 019a 1A70     		strb	r2, [r3]
2067:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 7797              		.loc 1 2067 0
 7798 019c 0223     		movs	r3, #2
 7799 019e FB77     		strb	r3, [r7, #31]
2068:bluetooth_rxtx.c **** 			cs_trigger = 0;
 7800              		.loc 1 2068 0
 7801 01a0 464B     		ldr	r3, .L402+28
 7802 01a2 0022     		movs	r2, #0
 7803 01a4 1A70     		strb	r2, [r3]
 7804              	.L391:
2069:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/cc6bdJLE.s 			page 173


2070:bluetooth_rxtx.c **** 
2071:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 7805              		.loc 1 2071 0
 7806 01a6 4D4B     		ldr	r3, .L402+60
 7807 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7808 01aa 5AB2     		sxtb	r2, r3
 7809 01ac 444B     		ldr	r3, .L402+32
 7810 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7811 01b0 5BB2     		sxtb	r3, r3
 7812 01b2 3633     		adds	r3, r3, #54
 7813 01b4 9A42     		cmp	r2, r3
 7814 01b6 09DB     		blt	.L392
2072:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 7815              		.loc 1 2072 0
 7816 01b8 464B     		ldr	r3, .L402+52
 7817 01ba 1B78     		ldrb	r3, [r3]
 7818 01bc DBB2     		uxtb	r3, r3
 7819 01be 43F01003 		orr	r3, r3, #16
 7820 01c2 DAB2     		uxtb	r2, r3
 7821 01c4 434B     		ldr	r3, .L402+52
 7822 01c6 1A70     		strb	r2, [r3]
2073:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 7823              		.loc 1 2073 0
 7824 01c8 0223     		movs	r3, #2
 7825 01ca FB77     		strb	r3, [r7, #31]
 7826              	.L392:
2074:bluetooth_rxtx.c **** 		}
2075:bluetooth_rxtx.c **** 
2076:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
2077:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
2078:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 7827              		.loc 1 2078 0
 7828 01cc 444B     		ldr	r3, .L402+64
 7829 01ce 1B78     		ldrb	r3, [r3]
 7830 01d0 DBB2     		uxtb	r3, r3
 7831 01d2 002B     		cmp	r3, #0
 7832 01d4 07D0     		beq	.L393
2079:bluetooth_rxtx.c **** 			if (hold == 0)
 7833              		.loc 1 2079 0
 7834 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 7835 01d8 002B     		cmp	r3, #0
 7836 01da 01D1     		bne	.L394
2080:bluetooth_rxtx.c **** 				hold = 1;
 7837              		.loc 1 2080 0
 7838 01dc 0123     		movs	r3, #1
 7839 01de FB77     		strb	r3, [r7, #31]
 7840              	.L394:
2081:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 7841              		.loc 1 2081 0
 7842 01e0 3F4B     		ldr	r3, .L402+64
 7843 01e2 0022     		movs	r2, #0
 7844 01e4 1A70     		strb	r2, [r3]
 7845              	.L393:
2082:bluetooth_rxtx.c **** 		}
2083:bluetooth_rxtx.c **** 
2084:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
2085:bluetooth_rxtx.c **** 		if (hold == 0) {
ARM GAS  /tmp/cc6bdJLE.s 			page 174


 7846              		.loc 1 2085 0
 7847 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 7848 01e8 002B     		cmp	r3, #0
 7849 01ea 00D1     		bne	.L395
2086:bluetooth_rxtx.c **** 			goto rx_continue;
 7850              		.loc 1 2086 0
 7851 01ec 3DE0     		b	.L388
 7852              	.L395:
2087:bluetooth_rxtx.c **** 		}
2088:bluetooth_rxtx.c **** 		hold--;
 7853              		.loc 1 2088 0
 7854 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 7855 01f0 013B     		subs	r3, r3, #1
 7856 01f2 FB77     		strb	r3, [r7, #31]
2089:bluetooth_rxtx.c **** 
2090:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
2091:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 7857              		.loc 1 2091 0
 7858 01f4 3B48     		ldr	r0, .L402+68
 7859 01f6 3C49     		ldr	r1, .L402+72
 7860 01f8 4FF4C872 		mov	r2, #400
 7861 01fc FFF7FEFF 		bl	memcpy
2092:bluetooth_rxtx.c **** 
2093:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
2094:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 7862              		.loc 1 2094 0
 7863 0200 0023     		movs	r3, #0
 7864 0202 BB61     		str	r3, [r7, #24]
 7865 0204 25E0     		b	.L396
 7866              	.L399:
2095:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
2096:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 7867              		.loc 1 2096 0
 7868 0206 0023     		movs	r3, #0
 7869 0208 7B61     		str	r3, [r7, #20]
 7870 020a 1CE0     		b	.L397
 7871              	.L398:
2097:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7872              		.loc 1 2097 0 discriminator 3
 7873 020c BB69     		ldr	r3, [r7, #24]
 7874 020e 3233     		adds	r3, r3, #50
 7875 0210 DA00     		lsls	r2, r3, #3
 7876 0212 7B69     		ldr	r3, [r7, #20]
 7877 0214 1344     		add	r3, r3, r2
 7878 0216 2E4A     		ldr	r2, .L402+48
 7879 0218 1168     		ldr	r1, [r2]
 7880 021a BA69     		ldr	r2, [r7, #24]
 7881 021c 0A44     		add	r2, r2, r1
 7882 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7883 0220 D209     		lsrs	r2, r2, #7
 7884 0222 D1B2     		uxtb	r1, r2
 7885 0224 2F4A     		ldr	r2, .L402+68
 7886 0226 D154     		strb	r1, [r2, r3]
2098:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 7887              		.loc 1 2098 0 discriminator 3
 7888 0228 294B     		ldr	r3, .L402+48
 7889 022a 1A68     		ldr	r2, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 175


 7890 022c BB69     		ldr	r3, [r7, #24]
 7891 022e 1344     		add	r3, r3, r2
 7892 0230 274A     		ldr	r2, .L402+48
 7893 0232 1168     		ldr	r1, [r2]
 7894 0234 BA69     		ldr	r2, [r7, #24]
 7895 0236 0A44     		add	r2, r2, r1
 7896 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7897 023a 5200     		lsls	r2, r2, #1
 7898 023c D2B2     		uxtb	r2, r2
 7899 023e 1A70     		strb	r2, [r3]
2096:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7900              		.loc 1 2096 0 discriminator 3
 7901 0240 7B69     		ldr	r3, [r7, #20]
 7902 0242 0133     		adds	r3, r3, #1
 7903 0244 7B61     		str	r3, [r7, #20]
 7904              	.L397:
2096:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7905              		.loc 1 2096 0 is_stmt 0 discriminator 1
 7906 0246 7B69     		ldr	r3, [r7, #20]
 7907 0248 072B     		cmp	r3, #7
 7908 024a DFDD     		ble	.L398
2094:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 7909              		.loc 1 2094 0 is_stmt 1 discriminator 2
 7910 024c BB69     		ldr	r3, [r7, #24]
 7911 024e 0133     		adds	r3, r3, #1
 7912 0250 BB61     		str	r3, [r7, #24]
 7913              	.L396:
2094:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 7914              		.loc 1 2094 0 is_stmt 0 discriminator 1
 7915 0252 BB69     		ldr	r3, [r7, #24]
 7916 0254 312B     		cmp	r3, #49
 7917 0256 D6DD     		ble	.L399
2099:bluetooth_rxtx.c **** 			}
2100:bluetooth_rxtx.c **** 		}
2101:bluetooth_rxtx.c **** 
2102:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 7918              		.loc 1 2102 0 is_stmt 1
 7919 0258 244B     		ldr	r3, .L402+76
 7920 025a 1B68     		ldr	r3, [r3]
 7921 025c 2148     		ldr	r0, .L402+68
 7922 025e 9847     		blx	r3
 7923 0260 B860     		str	r0, [r7, #8]
2103:bluetooth_rxtx.c **** 		if (!ret) break;
 7924              		.loc 1 2103 0
 7925 0262 BB68     		ldr	r3, [r7, #8]
 7926 0264 002B     		cmp	r3, #0
 7927 0266 00D1     		bne	.L388
 7928 0268 0CE0     		b	.L400
 7929              	.L388:
2104:bluetooth_rxtx.c **** 
2105:bluetooth_rxtx.c **** 	rx_continue:
2106:bluetooth_rxtx.c **** 		rx_tc = 0;
 7930              		.loc 1 2106 0
 7931 026a 164B     		ldr	r3, .L402+36
 7932 026c 0022     		movs	r2, #0
 7933 026e 1A60     		str	r2, [r3]
2107:bluetooth_rxtx.c **** 		rx_err = 0;
ARM GAS  /tmp/cc6bdJLE.s 			page 176


 7934              		.loc 1 2107 0
 7935 0270 154B     		ldr	r3, .L402+40
 7936 0272 0022     		movs	r2, #0
 7937 0274 1A60     		str	r2, [r3]
 7938              	.L375:
 7939              	.LBE10:
2001:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7940              		.loc 1 2001 0
 7941 0276 1E4B     		ldr	r3, .L402+80
 7942 0278 1B78     		ldrb	r3, [r3]
 7943 027a DBB2     		uxtb	r3, r3
 7944 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7945 027e 9A42     		cmp	r2, r3
 7946 0280 3FF4E3AE 		beq	.L401
 7947              	.L400:
2108:bluetooth_rxtx.c **** 	}
2109:bluetooth_rxtx.c **** 
2110:bluetooth_rxtx.c **** 	// disable USB interrupts
2111:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7948              		.loc 1 2111 0
 7949 0284 1B4B     		ldr	r3, .L402+84
 7950 0286 4FF08072 		mov	r2, #16777216
 7951 028a 1A60     		str	r2, [r3]
2112:bluetooth_rxtx.c **** 
2113:bluetooth_rxtx.c **** 	// reset the radio completely
2114:bluetooth_rxtx.c **** 	cc2400_idle();
 7952              		.loc 1 2114 0
 7953 028c FFF7FEFF 		bl	cc2400_idle
2115:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7954              		.loc 1 2115 0
 7955 0290 FFF7FEFF 		bl	dio_ssp_stop
2116:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7956              		.loc 1 2116 0
 7957 0294 FFF7FEFF 		bl	cs_trigger_disable
2117:bluetooth_rxtx.c **** }
 7958              		.loc 1 2117 0
 7959 0298 2037     		adds	r7, r7, #32
 7960              		.cfi_def_cfa_offset 8
 7961 029a BD46     		mov	sp, r7
 7962              		.cfi_def_cfa_register 13
 7963              		@ sp needed
 7964 029c 80BD     		pop	{r7, pc}
 7965              	.L403:
 7966 029e 00BF     		.align	2
 7967              	.L402:
 7968 02a0 00000000 		.word	modulation
 7969 02a4 00000000 		.word	mode
 7970 02a8 00E100E0 		.word	-536813312
 7971 02ac 3CC00920 		.word	537509948
 7972 02b0 00000000 		.word	requested_channel
 7973 02b4 00000000 		.word	channel
 7974 02b8 00000000 		.word	do_hop
 7975 02bc 00000000 		.word	cs_trigger
 7976 02c0 00000000 		.word	cs_threshold_cur
 7977 02c4 00000000 		.word	rx_tc
 7978 02c8 00000000 		.word	rx_err
 7979 02cc 00000000 		.word	active_rxbuf
ARM GAS  /tmp/cc6bdJLE.s 			page 177


 7980 02d0 00000000 		.word	idle_rxbuf
 7981 02d4 00000000 		.word	status
 7982 02d8 00000000 		.word	cs_no_squelch
 7983 02dc 00000000 		.word	rssi_max
 7984 02e0 00000000 		.word	keepalive_trigger
 7985 02e4 00000000 		.word	unpacked
 7986 02e8 90010000 		.word	unpacked+400
 7987 02ec 00000000 		.word	data_cb
 7988 02f0 00000000 		.word	requested_mode
 7989 02f4 80E100E0 		.word	-536813184
 7990              		.cfi_endproc
 7991              	.LFE35:
 7993              		.section	.text.bt_le_sync,"ax",%progbits
 7994              		.align	2
 7995              		.global	bt_le_sync
 7996              		.thumb
 7997              		.thumb_func
 7999              	bt_le_sync:
 8000              	.LFB36:
2118:bluetooth_rxtx.c **** 
2119:bluetooth_rxtx.c **** 
2120:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
2121:bluetooth_rxtx.c **** {
 8001              		.loc 1 2121 0
 8002              		.cfi_startproc
 8003              		@ args = 0, pretend = 0, frame = 104
 8004              		@ frame_needed = 1, uses_anonymous_args = 0
 8005 0000 90B5     		push	{r4, r7, lr}
 8006              		.cfi_def_cfa_offset 12
 8007              		.cfi_offset 4, -12
 8008              		.cfi_offset 7, -8
 8009              		.cfi_offset 14, -4
 8010 0002 9BB0     		sub	sp, sp, #108
 8011              		.cfi_def_cfa_offset 120
 8012 0004 00AF     		add	r7, sp, #0
 8013              		.cfi_def_cfa_register 7
 8014 0006 0346     		mov	r3, r0
 8015 0008 FB71     		strb	r3, [r7, #7]
2122:bluetooth_rxtx.c **** 	int i;
2123:bluetooth_rxtx.c **** 	int8_t rssi;
2124:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
2125:bluetooth_rxtx.c **** 
2126:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 8016              		.loc 1 2126 0
 8017 000a 874B     		ldr	r3, .L450
 8018 000c 0122     		movs	r2, #1
 8019 000e 1A70     		strb	r2, [r3]
2127:bluetooth_rxtx.c **** 	mode = active_mode;
 8020              		.loc 1 2127 0
 8021 0010 864A     		ldr	r2, .L450+4
 8022 0012 FB79     		ldrb	r3, [r7, #7]
 8023 0014 1370     		strb	r3, [r2]
2128:bluetooth_rxtx.c **** 
2129:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 8024              		.loc 1 2129 0
 8025 0016 864B     		ldr	r3, .L450+8
 8026 0018 0122     		movs	r2, #1
ARM GAS  /tmp/cc6bdJLE.s 			page 178


 8027 001a 1A75     		strb	r2, [r3, #20]
2130:bluetooth_rxtx.c **** 
2131:bluetooth_rxtx.c **** 	// enable USB interrupts
2132:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 8028              		.loc 1 2132 0
 8029 001c 854B     		ldr	r3, .L450+12
 8030 001e 4FF08072 		mov	r2, #16777216
 8031 0022 1A60     		str	r2, [r3]
2133:bluetooth_rxtx.c **** 
2134:bluetooth_rxtx.c **** 	RXLED_CLR;
 8032              		.loc 1 2134 0
 8033 0024 844B     		ldr	r3, .L450+16
 8034 0026 1022     		movs	r2, #16
 8035 0028 1A60     		str	r2, [r3]
2135:bluetooth_rxtx.c **** 
2136:bluetooth_rxtx.c **** 	queue_init();
 8036              		.loc 1 2136 0
 8037 002a FFF7FEFF 		bl	queue_init
2137:bluetooth_rxtx.c **** 	dio_ssp_init();
 8038              		.loc 1 2137 0
 8039 002e FFF7FEFF 		bl	dio_ssp_init
2138:bluetooth_rxtx.c **** 	dma_init_le();
 8040              		.loc 1 2138 0
 8041 0032 FFF7FEFF 		bl	dma_init_le
2139:bluetooth_rxtx.c **** 	dio_ssp_start();
 8042              		.loc 1 2139 0
 8043 0036 FFF7FEFF 		bl	dio_ssp_start
2140:bluetooth_rxtx.c **** 
2141:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 8044              		.loc 1 2141 0
 8045 003a 7D4B     		ldr	r3, .L450+8
 8046 003c 1B68     		ldr	r3, [r3]
 8047 003e 1846     		mov	r0, r3
 8048 0040 FFF7FEFF 		bl	rbit
 8049 0044 0346     		mov	r3, r0
 8050 0046 1846     		mov	r0, r3
 8051 0048 FFF7FEFF 		bl	cc2400_rx_sync
2142:bluetooth_rxtx.c **** 
2143:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 8052              		.loc 1 2143 0
 8053 004c 47E2     		b	.L405
 8054              	.L449:
 8055              	.LBB11:
2144:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 8056              		.loc 1 2144 0
 8057 004e 7B4B     		ldr	r3, .L450+20
 8058 0050 1B88     		ldrh	r3, [r3]	@ movhi
 8059 0052 9BB2     		uxth	r3, r3
 8060 0054 002B     		cmp	r3, #0
 8061 0056 29D0     		beq	.L406
2145:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 8062              		.loc 1 2145 0
 8063 0058 6420     		movs	r0, #100
 8064 005a FFF7FEFF 		bl	cc2400_strobe
2146:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 8065              		.loc 1 2146 0
 8066 005e 00BF     		nop
ARM GAS  /tmp/cc6bdJLE.s 			page 179


 8067              	.L407:
 8068              		.loc 1 2146 0 is_stmt 0 discriminator 1
 8069 0060 FFF7FEFF 		bl	cc2400_status
 8070 0064 0346     		mov	r3, r0
 8071 0066 03F00403 		and	r3, r3, #4
 8072 006a 002B     		cmp	r3, #0
 8073 006c F8D1     		bne	.L407
2147:bluetooth_rxtx.c **** 
2148:bluetooth_rxtx.c **** 			/* Retune */
2149:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 8074              		.loc 1 2149 0 is_stmt 1
 8075 006e 744B     		ldr	r3, .L450+24
 8076 0070 1B88     		ldrh	r3, [r3]	@ movhi
 8077 0072 9BB2     		uxth	r3, r3
 8078 0074 013B     		subs	r3, r3, #1
 8079 0076 9BB2     		uxth	r3, r3
 8080 0078 0220     		movs	r0, #2
 8081 007a 1946     		mov	r1, r3
 8082 007c FFF7FEFF 		bl	cc2400_set
2150:bluetooth_rxtx.c **** 
2151:bluetooth_rxtx.c **** 			/* Wait for lock */
2152:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 8083              		.loc 1 2152 0
 8084 0080 6120     		movs	r0, #97
 8085 0082 FFF7FEFF 		bl	cc2400_strobe
2153:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 8086              		.loc 1 2153 0
 8087 0086 00BF     		nop
 8088              	.L408:
 8089              		.loc 1 2153 0 is_stmt 0 discriminator 1
 8090 0088 FFF7FEFF 		bl	cc2400_status
 8091 008c 0346     		mov	r3, r0
 8092 008e 03F00403 		and	r3, r3, #4
 8093 0092 002B     		cmp	r3, #0
 8094 0094 F8D0     		beq	.L408
2154:bluetooth_rxtx.c **** 
2155:bluetooth_rxtx.c **** 			/* RX mode */
2156:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 8095              		.loc 1 2156 0 is_stmt 1
 8096 0096 6220     		movs	r0, #98
 8097 0098 FFF7FEFF 		bl	cc2400_strobe
2157:bluetooth_rxtx.c **** 
2158:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 8098              		.loc 1 2158 0
 8099 009c 674B     		ldr	r3, .L450+20
 8100 009e 1B88     		ldrh	r3, [r3]	@ movhi
 8101 00a0 9AB2     		uxth	r2, r3
 8102 00a2 684B     		ldr	r3, .L450+28
 8103 00a4 1A80     		strh	r2, [r3]	@ movhi
2159:bluetooth_rxtx.c **** 			requested_channel = 0;
 8104              		.loc 1 2159 0
 8105 00a6 654B     		ldr	r3, .L450+20
 8106 00a8 0022     		movs	r2, #0
 8107 00aa 1A80     		strh	r2, [r3]	@ movhi
 8108              	.L406:
2160:bluetooth_rxtx.c **** 		}
2161:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 180


2162:bluetooth_rxtx.c **** 		RXLED_CLR;
 8109              		.loc 1 2162 0
 8110 00ac 624B     		ldr	r3, .L450+16
 8111 00ae 1022     		movs	r2, #16
 8112 00b0 1A60     		str	r2, [r3]
2163:bluetooth_rxtx.c **** 
2164:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2165:bluetooth_rxtx.c **** 		rssi_reset();
 8113              		.loc 1 2165 0
 8114 00b2 FFF7FEFF 		bl	rssi_reset
2166:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 8115              		.loc 1 2166 0
 8116 00b6 00BF     		nop
 8117              	.L410:
 8118              		.loc 1 2166 0 is_stmt 0 discriminator 4
 8119 00b8 634B     		ldr	r3, .L450+32
 8120 00ba 1B68     		ldr	r3, [r3]
 8121 00bc 002B     		cmp	r3, #0
 8122 00be 0ED1     		bne	.L409
 8123              		.loc 1 2166 0 discriminator 1
 8124 00c0 624B     		ldr	r3, .L450+36
 8125 00c2 1B68     		ldr	r3, [r3]
 8126 00c4 002B     		cmp	r3, #0
 8127 00c6 0AD1     		bne	.L409
 8128              		.loc 1 2166 0 discriminator 2
 8129 00c8 614B     		ldr	r3, .L450+40
 8130 00ca 1B78     		ldrb	r3, [r3]
 8131 00cc DBB2     		uxtb	r3, r3
 8132 00ce 002B     		cmp	r3, #0
 8133 00d0 05D1     		bne	.L409
 8134              		.loc 1 2166 0 discriminator 3
 8135 00d2 604B     		ldr	r3, .L450+44
 8136 00d4 1B78     		ldrb	r3, [r3]
 8137 00d6 DBB2     		uxtb	r3, r3
 8138 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 8139 00da 9A42     		cmp	r2, r3
 8140 00dc ECD0     		beq	.L410
 8141              	.L409:
2167:bluetooth_rxtx.c **** 			;
2168:bluetooth_rxtx.c **** 
2169:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 8142              		.loc 1 2169 0 is_stmt 1
 8143 00de 5D4B     		ldr	r3, .L450+44
 8144 00e0 1B78     		ldrb	r3, [r3]
 8145 00e2 DBB2     		uxtb	r3, r3
 8146 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 8147 00e6 9A42     		cmp	r2, r3
 8148 00e8 00D0     		beq	.L411
2170:bluetooth_rxtx.c **** 			goto cleanup;
 8149              		.loc 1 2170 0
 8150 00ea FFE1     		b	.L448
 8151              	.L411:
2171:bluetooth_rxtx.c **** 		}
2172:bluetooth_rxtx.c **** 
2173:bluetooth_rxtx.c **** 		if (rx_err) {
 8152              		.loc 1 2173 0
 8153 00ec 574B     		ldr	r3, .L450+36
ARM GAS  /tmp/cc6bdJLE.s 			page 181


 8154 00ee 1B68     		ldr	r3, [r3]
 8155 00f0 002B     		cmp	r3, #0
 8156 00f2 07D0     		beq	.L413
2174:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 8157              		.loc 1 2174 0
 8158 00f4 584B     		ldr	r3, .L450+48
 8159 00f6 1B78     		ldrb	r3, [r3]
 8160 00f8 DBB2     		uxtb	r3, r3
 8161 00fa 43F00203 		orr	r3, r3, #2
 8162 00fe DAB2     		uxtb	r2, r3
 8163 0100 554B     		ldr	r3, .L450+48
 8164 0102 1A70     		strb	r2, [r3]
 8165              	.L413:
2175:bluetooth_rxtx.c **** 		}
2176:bluetooth_rxtx.c **** 
2177:bluetooth_rxtx.c **** 		if (do_hop)
 8166              		.loc 1 2177 0
 8167 0104 524B     		ldr	r3, .L450+40
 8168 0106 1B78     		ldrb	r3, [r3]
 8169 0108 DBB2     		uxtb	r3, r3
 8170 010a 002B     		cmp	r3, #0
 8171 010c 00D0     		beq	.L414
2178:bluetooth_rxtx.c **** 			goto rx_flush;
 8172              		.loc 1 2178 0
 8173 010e 2BE1     		b	.L415
 8174              	.L414:
2179:bluetooth_rxtx.c **** 
2180:bluetooth_rxtx.c **** 		/* No DMA transfer? */
2181:bluetooth_rxtx.c **** 		if (!rx_tc)
 8175              		.loc 1 2181 0
 8176 0110 4D4B     		ldr	r3, .L450+32
 8177 0112 1B68     		ldr	r3, [r3]
 8178 0114 002B     		cmp	r3, #0
 8179 0116 00D1     		bne	.L416
 8180 0118 E1E1     		b	.L405
 8181              	.L416:
2182:bluetooth_rxtx.c **** 			continue;
2183:bluetooth_rxtx.c **** 
2184:bluetooth_rxtx.c **** 		/////////////////////
2185:bluetooth_rxtx.c **** 		// process the packet
2186:bluetooth_rxtx.c **** 
2187:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2188:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 8182              		.loc 1 2188 0
 8183 011a 07F10803 		add	r3, r7, #8
 8184 011e FB65     		str	r3, [r7, #92]
2189:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 8185              		.loc 1 2189 0
 8186 0120 434B     		ldr	r3, .L450+8
 8187 0122 1B68     		ldr	r3, [r3]
 8188 0124 BB60     		str	r3, [r7, #8]
2190:bluetooth_rxtx.c **** 
2191:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 8189              		.loc 1 2191 0
 8190 0126 464B     		ldr	r3, .L450+24
 8191 0128 1B88     		ldrh	r3, [r3]	@ movhi
 8192 012a 9BB2     		uxth	r3, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 182


 8193 012c DBB2     		uxtb	r3, r3
 8194 012e 623B     		subs	r3, r3, #98
 8195 0130 DBB2     		uxtb	r3, r3
 8196 0132 1846     		mov	r0, r3
 8197 0134 FFF7FEFF 		bl	btle_channel_index
 8198 0138 0346     		mov	r3, r0
 8199 013a 1A46     		mov	r2, r3
 8200 013c 1346     		mov	r3, r2
 8201 013e 5B00     		lsls	r3, r3, #1
 8202 0140 1344     		add	r3, r3, r2
 8203 0142 1B01     		lsls	r3, r3, #4
 8204 0144 454A     		ldr	r2, .L450+52
 8205 0146 1344     		add	r3, r3, r2
 8206 0148 BB65     		str	r3, [r7, #88]
2192:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 8207              		.loc 1 2192 0
 8208 014a 0023     		movs	r3, #0
 8209 014c 7B66     		str	r3, [r7, #100]
 8210 014e 34E0     		b	.L417
 8211              	.L420:
 8212              	.LBB12:
2193:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8213              		.loc 1 2193 0 discriminator 3
 8214 0150 434A     		ldr	r2, .L450+56
 8215 0152 7B6E     		ldr	r3, [r7, #100]
 8216 0154 1344     		add	r3, r3, r2
 8217 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8218 0158 1A06     		lsls	r2, r3, #24
2194:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 8219              		.loc 1 2194 0 discriminator 3
 8220 015a 7B6E     		ldr	r3, [r7, #100]
 8221 015c 0133     		adds	r3, r3, #1
 8222 015e 4049     		ldr	r1, .L450+56
 8223 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8224 0162 1B04     		lsls	r3, r3, #16
 8225 0164 1A43     		orrs	r2, r2, r3
2195:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 8226              		.loc 1 2195 0 discriminator 3
 8227 0166 7B6E     		ldr	r3, [r7, #100]
 8228 0168 0233     		adds	r3, r3, #2
 8229 016a 3D49     		ldr	r1, .L450+56
 8230 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8231 016e 1B02     		lsls	r3, r3, #8
 8232 0170 1343     		orrs	r3, r3, r2
2196:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 8233              		.loc 1 2196 0 discriminator 3
 8234 0172 7A6E     		ldr	r2, [r7, #100]
 8235 0174 0332     		adds	r2, r2, #3
 8236 0176 3A49     		ldr	r1, .L450+56
 8237 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 8238 017a 1343     		orrs	r3, r3, r2
2193:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 8239              		.loc 1 2193 0 discriminator 3
 8240 017c 7B65     		str	r3, [r7, #84]
2197:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 8241              		.loc 1 2197 0 discriminator 3
 8242 017e 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/cc6bdJLE.s 			page 183


 8243 0180 002B     		cmp	r3, #0
 8244 0182 00DA     		bge	.L418
 8245 0184 0333     		adds	r3, r3, #3
 8246              	.L418:
 8247 0186 9B10     		asrs	r3, r3, #2
 8248 0188 5C1C     		adds	r4, r3, #1
 8249 018a 786D     		ldr	r0, [r7, #84]
 8250 018c FFF7FEFF 		bl	rbit
 8251 0190 0146     		mov	r1, r0
 8252 0192 7B6E     		ldr	r3, [r7, #100]
 8253 0194 002B     		cmp	r3, #0
 8254 0196 00DA     		bge	.L419
 8255 0198 0333     		adds	r3, r3, #3
 8256              	.L419:
 8257 019a 9B10     		asrs	r3, r3, #2
 8258 019c 9B00     		lsls	r3, r3, #2
 8259 019e BA6D     		ldr	r2, [r7, #88]
 8260 01a0 1344     		add	r3, r3, r2
 8261 01a2 1B68     		ldr	r3, [r3]
 8262 01a4 81EA0302 		eor	r2, r1, r3
 8263 01a8 A300     		lsls	r3, r4, #2
 8264 01aa 07F16801 		add	r1, r7, #104
 8265 01ae 0B44     		add	r3, r3, r1
 8266 01b0 43F8602C 		str	r2, [r3, #-96]
 8267              	.LBE12:
2192:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8268              		.loc 1 2192 0 discriminator 3
 8269 01b4 7B6E     		ldr	r3, [r7, #100]
 8270 01b6 0433     		adds	r3, r3, #4
 8271 01b8 7B66     		str	r3, [r7, #100]
 8272              	.L417:
2192:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8273              		.loc 1 2192 0 is_stmt 0 discriminator 1
 8274 01ba 7B6E     		ldr	r3, [r7, #100]
 8275 01bc 032B     		cmp	r3, #3
 8276 01be C7DD     		ble	.L420
2198:bluetooth_rxtx.c **** 		}
2199:bluetooth_rxtx.c **** 
2200:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 8277              		.loc 1 2200 0 is_stmt 1
 8278 01c0 FB6D     		ldr	r3, [r7, #92]
 8279 01c2 0533     		adds	r3, r3, #5
 8280 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8281 01c6 03F03F03 		and	r3, r3, #63
 8282 01ca 0233     		adds	r3, r3, #2
 8283 01cc 3B65     		str	r3, [r7, #80]
2201:bluetooth_rxtx.c **** 		if (len > 39)
 8284              		.loc 1 2201 0
 8285 01ce 3B6D     		ldr	r3, [r7, #80]
 8286 01d0 272B     		cmp	r3, #39
 8287 01d2 00D9     		bls	.L421
2202:bluetooth_rxtx.c **** 			goto rx_flush;
 8288              		.loc 1 2202 0
 8289 01d4 C8E0     		b	.L415
 8290              	.L421:
2203:bluetooth_rxtx.c **** 
2204:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
ARM GAS  /tmp/cc6bdJLE.s 			page 184


2205:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
2206:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 8291              		.loc 1 2206 0
 8292 01d6 3B6D     		ldr	r3, [r7, #80]
 8293 01d8 0633     		adds	r3, r3, #6
 8294 01da 9B08     		lsrs	r3, r3, #2
 8295 01dc FB64     		str	r3, [r7, #76]
2207:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 8296              		.loc 1 2207 0
 8297 01de FB6C     		ldr	r3, [r7, #76]
 8298 01e0 0A2B     		cmp	r3, #10
 8299 01e2 0DD8     		bhi	.L422
2208:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 8300              		.loc 1 2208 0
 8301 01e4 00BF     		nop
 8302              	.L424:
 8303              		.loc 1 2208 0 is_stmt 0 discriminator 2
 8304 01e6 1F4B     		ldr	r3, .L450+60
 8305 01e8 1A68     		ldr	r2, [r3]
 8306 01ea FB6C     		ldr	r3, [r7, #76]
 8307 01ec 9B00     		lsls	r3, r3, #2
 8308 01ee 1C49     		ldr	r1, .L450+56
 8309 01f0 0B44     		add	r3, r3, r1
 8310 01f2 9A42     		cmp	r2, r3
 8311 01f4 0FD2     		bcs	.L423
 8312              		.loc 1 2208 0 discriminator 1
 8313 01f6 154B     		ldr	r3, .L450+36
 8314 01f8 1B68     		ldr	r3, [r3]
 8315 01fa 002B     		cmp	r3, #0
 8316 01fc F3D0     		beq	.L424
 8317 01fe 0AE0     		b	.L423
 8318              	.L422:
2209:bluetooth_rxtx.c **** 				;
2210:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
2211:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 8319              		.loc 1 2211 0 is_stmt 1
 8320 0200 00BF     		nop
 8321              	.L425:
 8322              		.loc 1 2211 0 is_stmt 0 discriminator 2
 8323 0202 194B     		ldr	r3, .L450+64
 8324 0204 1B68     		ldr	r3, [r3]
 8325 0206 03F00103 		and	r3, r3, #1
 8326 020a 002B     		cmp	r3, #0
 8327 020c 03D0     		beq	.L423
 8328              		.loc 1 2211 0 discriminator 1
 8329 020e 0F4B     		ldr	r3, .L450+36
 8330 0210 1B68     		ldr	r3, [r3]
 8331 0212 002B     		cmp	r3, #0
 8332 0214 F5D0     		beq	.L425
 8333              	.L423:
2212:bluetooth_rxtx.c **** 				;
2213:bluetooth_rxtx.c **** 		}
2214:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8334              		.loc 1 2214 0 is_stmt 1
 8335 0216 154A     		ldr	r2, .L450+68
 8336 0218 144B     		ldr	r3, .L450+68
 8337 021a 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 185


 8338 021c 23F00103 		bic	r3, r3, #1
 8339 0220 1360     		str	r3, [r2]
2215:bluetooth_rxtx.c **** 
2216:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
2217:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 8340              		.loc 1 2217 0
 8341 0222 0423     		movs	r3, #4
 8342 0224 7B66     		str	r3, [r7, #100]
 8343 0226 58E0     		b	.L426
 8344              	.L451:
 8345              		.align	2
 8346              	.L450:
 8347 0228 00000000 		.word	modulation
 8348 022c 00000000 		.word	mode
 8349 0230 00000000 		.word	le
 8350 0234 00E100E0 		.word	-536813312
 8351 0238 3CC00920 		.word	537509948
 8352 023c 00000000 		.word	requested_channel
 8353 0240 00000000 		.word	channel
 8354 0244 00000000 		.word	saved_request
 8355 0248 00000000 		.word	rx_tc
 8356 024c 00000000 		.word	rx_err
 8357 0250 00000000 		.word	do_hop
 8358 0254 00000000 		.word	requested_mode
 8359 0258 00000000 		.word	status
 8360 025c 10010000 		.word	whitening_word
 8361 0260 00000000 		.word	rxbuf1
 8362 0264 04410050 		.word	1342193924
 8363 0268 10410050 		.word	1342193936
 8364 026c 24000340 		.word	1073938468
 8365              	.L429:
 8366              	.LBB13:
2218:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8367              		.loc 1 2218 0 discriminator 3
 8368 0270 A54A     		ldr	r2, .L452
 8369 0272 7B6E     		ldr	r3, [r7, #100]
 8370 0274 1344     		add	r3, r3, r2
 8371 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8372 0278 1A06     		lsls	r2, r3, #24
2219:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 8373              		.loc 1 2219 0 discriminator 3
 8374 027a 7B6E     		ldr	r3, [r7, #100]
 8375 027c 0133     		adds	r3, r3, #1
 8376 027e A249     		ldr	r1, .L452
 8377 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8378 0282 1B04     		lsls	r3, r3, #16
 8379 0284 1A43     		orrs	r2, r2, r3
2220:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 8380              		.loc 1 2220 0 discriminator 3
 8381 0286 7B6E     		ldr	r3, [r7, #100]
 8382 0288 0233     		adds	r3, r3, #2
 8383 028a 9F49     		ldr	r1, .L452
 8384 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8385 028e 1B02     		lsls	r3, r3, #8
 8386 0290 1343     		orrs	r3, r3, r2
2221:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 8387              		.loc 1 2221 0 discriminator 3
ARM GAS  /tmp/cc6bdJLE.s 			page 186


 8388 0292 7A6E     		ldr	r2, [r7, #100]
 8389 0294 0332     		adds	r2, r2, #3
 8390 0296 9C49     		ldr	r1, .L452
 8391 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 8392 029a 1343     		orrs	r3, r3, r2
2218:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 8393              		.loc 1 2218 0 discriminator 3
 8394 029c BB64     		str	r3, [r7, #72]
2222:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 8395              		.loc 1 2222 0 discriminator 3
 8396 029e 7B6E     		ldr	r3, [r7, #100]
 8397 02a0 002B     		cmp	r3, #0
 8398 02a2 00DA     		bge	.L427
 8399 02a4 0333     		adds	r3, r3, #3
 8400              	.L427:
 8401 02a6 9B10     		asrs	r3, r3, #2
 8402 02a8 5C1C     		adds	r4, r3, #1
 8403 02aa B86C     		ldr	r0, [r7, #72]
 8404 02ac FFF7FEFF 		bl	rbit
 8405 02b0 0146     		mov	r1, r0
 8406 02b2 7B6E     		ldr	r3, [r7, #100]
 8407 02b4 002B     		cmp	r3, #0
 8408 02b6 00DA     		bge	.L428
 8409 02b8 0333     		adds	r3, r3, #3
 8410              	.L428:
 8411 02ba 9B10     		asrs	r3, r3, #2
 8412 02bc 9B00     		lsls	r3, r3, #2
 8413 02be BA6D     		ldr	r2, [r7, #88]
 8414 02c0 1344     		add	r3, r3, r2
 8415 02c2 1B68     		ldr	r3, [r3]
 8416 02c4 81EA0302 		eor	r2, r1, r3
 8417 02c8 A300     		lsls	r3, r4, #2
 8418 02ca 07F16801 		add	r1, r7, #104
 8419 02ce 0B44     		add	r3, r3, r1
 8420 02d0 43F8602C 		str	r2, [r3, #-96]
 8421              	.LBE13:
2217:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8422              		.loc 1 2217 0 discriminator 3
 8423 02d4 7B6E     		ldr	r3, [r7, #100]
 8424 02d6 0433     		adds	r3, r3, #4
 8425 02d8 7B66     		str	r3, [r7, #100]
 8426              	.L426:
2217:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8427              		.loc 1 2217 0 is_stmt 0 discriminator 1
 8428 02da 7B6E     		ldr	r3, [r7, #100]
 8429 02dc 2B2B     		cmp	r3, #43
 8430 02de C7DD     		ble	.L429
2223:bluetooth_rxtx.c **** 		}
2224:bluetooth_rxtx.c **** 
2225:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 8431              		.loc 1 2225 0 is_stmt 1
 8432 02e0 8A4B     		ldr	r3, .L452+4
 8433 02e2 1B69     		ldr	r3, [r3, #16]
 8434 02e4 002B     		cmp	r3, #0
 8435 02e6 23D0     		beq	.L430
 8436              	.LBB14:
2226:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
ARM GAS  /tmp/cc6bdJLE.s 			page 187


 8437              		.loc 1 2226 0
 8438 02e8 884B     		ldr	r3, .L452+4
 8439 02ea D968     		ldr	r1, [r3, #12]
 8440 02ec FB6D     		ldr	r3, [r7, #92]
 8441 02ee 1A1D     		adds	r2, r3, #4
 8442 02f0 3B6D     		ldr	r3, [r7, #80]
 8443 02f2 0846     		mov	r0, r1
 8444 02f4 1146     		mov	r1, r2
 8445 02f6 1A46     		mov	r2, r3
 8446 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 8447 02fc 7864     		str	r0, [r7, #68]
2227:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 8448              		.loc 1 2227 0
 8449 02fe 3B6D     		ldr	r3, [r7, #80]
 8450 0300 0633     		adds	r3, r3, #6
 8451 0302 FA6D     		ldr	r2, [r7, #92]
 8452 0304 1344     		add	r3, r3, r2
 8453 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8454 0308 1A04     		lsls	r2, r3, #16
2228:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 8455              		.loc 1 2228 0
 8456 030a 3B6D     		ldr	r3, [r7, #80]
 8457 030c 0533     		adds	r3, r3, #5
 8458 030e F96D     		ldr	r1, [r7, #92]
 8459 0310 0B44     		add	r3, r3, r1
 8460 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8461 0314 1B02     		lsls	r3, r3, #8
 8462 0316 1343     		orrs	r3, r3, r2
2229:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 8463              		.loc 1 2229 0
 8464 0318 3A6D     		ldr	r2, [r7, #80]
 8465 031a 0432     		adds	r2, r2, #4
 8466 031c F96D     		ldr	r1, [r7, #92]
 8467 031e 0A44     		add	r2, r2, r1
 8468 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8469 0322 1343     		orrs	r3, r3, r2
2227:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 8470              		.loc 1 2227 0
 8471 0324 3B64     		str	r3, [r7, #64]
2230:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 8472              		.loc 1 2230 0
 8473 0326 7A6C     		ldr	r2, [r7, #68]
 8474 0328 3B6C     		ldr	r3, [r7, #64]
 8475 032a 9A42     		cmp	r2, r3
 8476 032c 00D0     		beq	.L430
2231:bluetooth_rxtx.c **** 				goto rx_flush;
 8477              		.loc 1 2231 0
 8478 032e 1BE0     		b	.L415
 8479              	.L430:
 8480              	.LBE14:
2232:bluetooth_rxtx.c **** 		}
2233:bluetooth_rxtx.c **** 
2234:bluetooth_rxtx.c **** 
2235:bluetooth_rxtx.c **** 		RXLED_SET;
 8481              		.loc 1 2235 0
 8482 0330 774B     		ldr	r3, .L452+8
 8483 0332 1022     		movs	r2, #16
ARM GAS  /tmp/cc6bdJLE.s 			page 188


 8484 0334 1A60     		str	r2, [r3]
2236:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 8485              		.loc 1 2236 0
 8486 0336 774B     		ldr	r3, .L452+12
 8487 0338 1B68     		ldr	r3, [r3]
 8488 033a 07F10802 		add	r2, r7, #8
 8489 033e 1046     		mov	r0, r2
 8490 0340 9847     		blx	r3
2237:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 8491              		.loc 1 2237 0
 8492 0342 07F10803 		add	r3, r7, #8
 8493 0346 0120     		movs	r0, #1
 8494 0348 1946     		mov	r1, r3
 8495 034a FFF7FEFF 		bl	enqueue
2238:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 8496              		.loc 1 2238 0
 8497 034e 724B     		ldr	r3, .L452+16
 8498 0350 1B68     		ldr	r3, [r3]
 8499 0352 C3F31303 		ubfx	r3, r3, #0, #20
 8500 0356 40F63542 		movw	r2, #3125
 8501 035a 02FB03F2 		mul	r2, r2, r3
 8502 035e 6F4B     		ldr	r3, .L452+20
 8503 0360 1B68     		ldr	r3, [r3]
 8504 0362 1344     		add	r3, r3, r2
 8505 0364 694A     		ldr	r2, .L452+4
 8506 0366 1364     		str	r3, [r2, #64]
 8507              	.L415:
2239:bluetooth_rxtx.c **** 
2240:bluetooth_rxtx.c **** 	rx_flush:
2241:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 8508              		.loc 1 2241 0
 8509 0368 6120     		movs	r0, #97
 8510 036a FFF7FEFF 		bl	cc2400_strobe
2242:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 8511              		.loc 1 2242 0
 8512 036e 00BF     		nop
 8513              	.L431:
 8514              		.loc 1 2242 0 is_stmt 0 discriminator 1
 8515 0370 FFF7FEFF 		bl	cc2400_status
 8516 0374 0346     		mov	r3, r0
 8517 0376 03F00403 		and	r3, r3, #4
 8518 037a 002B     		cmp	r3, #0
 8519 037c F8D0     		beq	.L431
2243:bluetooth_rxtx.c **** 
2244:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
2245:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8520              		.loc 1 2245 0 is_stmt 1
 8521 037e 684A     		ldr	r2, .L452+24
 8522 0380 674B     		ldr	r3, .L452+24
 8523 0382 1B68     		ldr	r3, [r3]
 8524 0384 23F00103 		bic	r3, r3, #1
 8525 0388 1360     		str	r3, [r2]
2246:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8526              		.loc 1 2246 0
 8527 038a 03E0     		b	.L432
 8528              	.L433:
 8529              	.LBB15:
ARM GAS  /tmp/cc6bdJLE.s 			page 189


2247:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 8530              		.loc 1 2247 0
 8531 038c 654B     		ldr	r3, .L452+28
 8532 038e 1B68     		ldr	r3, [r3]
 8533 0390 87F83F30 		strb	r3, [r7, #63]
 8534              	.L432:
 8535              	.LBE15:
2246:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8536              		.loc 1 2246 0
 8537 0394 644B     		ldr	r3, .L452+32
 8538 0396 1B68     		ldr	r3, [r3]
 8539 0398 03F00403 		and	r3, r3, #4
 8540 039c 002B     		cmp	r3, #0
 8541 039e F5D1     		bne	.L433
2248:bluetooth_rxtx.c **** 		}
2249:bluetooth_rxtx.c **** 
2250:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2251:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 8542              		.loc 1 2251 0
 8543 03a0 5D4B     		ldr	r3, .L452+16
 8544 03a2 1B68     		ldr	r3, [r3]
 8545 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 8546 03a8 40F63542 		movw	r2, #3125
 8547 03ac 02FB03F2 		mul	r2, r2, r3
 8548 03b0 5A4B     		ldr	r3, .L452+20
 8549 03b2 1B68     		ldr	r3, [r3]
 8550 03b4 1344     		add	r3, r3, r2
 8551 03b6 3B66     		str	r3, [r7, #96]
2252:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 8552              		.loc 1 2252 0
 8553 03b8 544B     		ldr	r3, .L452+4
 8554 03ba 1A6C     		ldr	r2, [r3, #64]
 8555 03bc 3B6E     		ldr	r3, [r7, #96]
 8556 03be 9A42     		cmp	r2, r3
 8557 03c0 05D9     		bls	.L434
2253:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 8558              		.loc 1 2253 0
 8559 03c2 3B6E     		ldr	r3, [r7, #96]
 8560 03c4 03F14343 		add	r3, r3, #-1023410176
 8561 03c8 03F5A003 		add	r3, r3, #5242880
 8562 03cc 3B66     		str	r3, [r7, #96]
 8563              	.L434:
2254:bluetooth_rxtx.c **** 		if  ( // timeout
2255:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 8564              		.loc 1 2255 0
 8565 03ce 4F4B     		ldr	r3, .L452+4
 8566 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
2254:bluetooth_rxtx.c **** 		if  ( // timeout
 8567              		.loc 1 2254 0
 8568 03d2 032B     		cmp	r3, #3
 8569 03d4 03D0     		beq	.L435
 8570              		.loc 1 2255 0
 8571 03d6 4D4B     		ldr	r3, .L452+4
 8572 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8573 03da 022B     		cmp	r3, #2
 8574 03dc 06D1     		bne	.L436
 8575              	.L435:
ARM GAS  /tmp/cc6bdJLE.s 			page 190


2256:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 8576              		.loc 1 2256 0
 8577 03de 4B4B     		ldr	r3, .L452+4
 8578 03e0 1B6C     		ldr	r3, [r3, #64]
 8579 03e2 3A6E     		ldr	r2, [r7, #96]
 8580 03e4 D31A     		subs	r3, r2, r3
 8581 03e6 514A     		ldr	r2, .L452+36
 8582 03e8 9342     		cmp	r3, r2
 8583 03ea 03D8     		bhi	.L437
 8584              	.L436:
2257:bluetooth_rxtx.c **** 			// jam finished
2258:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 8585              		.loc 1 2258 0
 8586 03ec 504B     		ldr	r3, .L452+40
 8587 03ee 1B68     		ldr	r3, [r3]
 8588 03f0 012B     		cmp	r3, #1
 8589 03f2 37D1     		bne	.L438
 8590              	.L437:
2259:bluetooth_rxtx.c **** 			)
2260:bluetooth_rxtx.c **** 		{
2261:bluetooth_rxtx.c **** 			reset_le();
 8591              		.loc 1 2261 0
 8592 03f4 FFF7FEFF 		bl	reset_le
2262:bluetooth_rxtx.c **** 			le_jam_count = 0;
 8593              		.loc 1 2262 0
 8594 03f8 4D4B     		ldr	r3, .L452+40
 8595 03fa 0022     		movs	r2, #0
 8596 03fc 1A60     		str	r2, [r3]
2263:bluetooth_rxtx.c **** 			TXLED_CLR;
 8597              		.loc 1 2263 0
 8598 03fe 4D4B     		ldr	r3, .L452+44
 8599 0400 4FF48072 		mov	r2, #256
 8600 0404 1A60     		str	r2, [r3]
2264:bluetooth_rxtx.c **** 
2265:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 8601              		.loc 1 2265 0
 8602 0406 4C4B     		ldr	r3, .L452+48
 8603 0408 1B78     		ldrb	r3, [r3]
 8604 040a DBB2     		uxtb	r3, r3
 8605 040c 012B     		cmp	r3, #1
 8606 040e 06D1     		bne	.L439
2266:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 8607              		.loc 1 2266 0
 8608 0410 494B     		ldr	r3, .L452+48
 8609 0412 0022     		movs	r2, #0
 8610 0414 1A70     		strb	r2, [r3]
2267:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 8611              		.loc 1 2267 0
 8612 0416 494B     		ldr	r3, .L452+52
 8613 0418 0022     		movs	r2, #0
 8614 041a 1A70     		strb	r2, [r3]
2268:bluetooth_rxtx.c **** 				goto cleanup;
 8615              		.loc 1 2268 0
 8616 041c 66E0     		b	.L448
 8617              	.L439:
2269:bluetooth_rxtx.c **** 			}
2270:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 191


2271:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2272:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 8618              		.loc 1 2272 0
 8619 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 8620 0420 0A2B     		cmp	r3, #10
 8621 0422 01D1     		bne	.L440
2273:bluetooth_rxtx.c **** 				goto cleanup;
 8622              		.loc 1 2273 0
 8623 0424 00BF     		nop
 8624 0426 61E0     		b	.L448
 8625              	.L440:
2274:bluetooth_rxtx.c **** 
2275:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 8626              		.loc 1 2275 0
 8627 0428 384B     		ldr	r3, .L452+4
 8628 042a 0122     		movs	r2, #1
 8629 042c 1A75     		strb	r2, [r3, #20]
2276:bluetooth_rxtx.c **** 
2277:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 8630              		.loc 1 2277 0
 8631 042e 6420     		movs	r0, #100
 8632 0430 FFF7FEFF 		bl	cc2400_strobe
2278:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 8633              		.loc 1 2278 0
 8634 0434 00BF     		nop
 8635              	.L441:
 8636              		.loc 1 2278 0 is_stmt 0 discriminator 1
 8637 0436 FFF7FEFF 		bl	cc2400_status
 8638 043a 0346     		mov	r3, r0
 8639 043c 03F00403 		and	r3, r3, #4
 8640 0440 002B     		cmp	r3, #0
 8641 0442 F8D1     		bne	.L441
2279:bluetooth_rxtx.c **** 
2280:bluetooth_rxtx.c **** 			/* Retune */
2281:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 8642              		.loc 1 2281 0 is_stmt 1
 8643 0444 3E4B     		ldr	r3, .L452+56
 8644 0446 1B88     		ldrh	r3, [r3]	@ movhi
 8645 0448 9BB2     		uxth	r3, r3
 8646 044a 002B     		cmp	r3, #0
 8647 044c 03D0     		beq	.L442
 8648              		.loc 1 2281 0 is_stmt 0 discriminator 1
 8649 044e 3C4B     		ldr	r3, .L452+56
 8650 0450 1B88     		ldrh	r3, [r3]	@ movhi
 8651 0452 9BB2     		uxth	r3, r3
 8652 0454 01E0     		b	.L443
 8653              	.L442:
 8654              		.loc 1 2281 0 discriminator 2
 8655 0456 40F66213 		movw	r3, #2402
 8656              	.L443:
 8657              		.loc 1 2281 0 discriminator 4
 8658 045a 3A4A     		ldr	r2, .L452+60
 8659 045c 1380     		strh	r3, [r2]	@ movhi
2282:bluetooth_rxtx.c **** 			restart_jamming = 1;
 8660              		.loc 1 2282 0 is_stmt 1 discriminator 4
 8661 045e 3A4B     		ldr	r3, .L452+64
 8662 0460 0122     		movs	r2, #1
ARM GAS  /tmp/cc6bdJLE.s 			page 192


 8663 0462 1A60     		str	r2, [r3]
 8664              	.L438:
2283:bluetooth_rxtx.c **** 		}
2284:bluetooth_rxtx.c **** 
2285:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 8665              		.loc 1 2285 0
 8666 0464 294B     		ldr	r3, .L452+4
 8667 0466 DB88     		ldrh	r3, [r3, #6]
 8668 0468 2C20     		movs	r0, #44
 8669 046a 1946     		mov	r1, r3
 8670 046c FFF7FEFF 		bl	cc2400_set
2286:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 8671              		.loc 1 2286 0
 8672 0470 264B     		ldr	r3, .L452+4
 8673 0472 9B88     		ldrh	r3, [r3, #4]
 8674 0474 2D20     		movs	r0, #45
 8675 0476 1946     		mov	r1, r3
 8676 0478 FFF7FEFF 		bl	cc2400_set
2287:bluetooth_rxtx.c **** 
2288:bluetooth_rxtx.c **** 		if (do_hop)
 8677              		.loc 1 2288 0
 8678 047c 334B     		ldr	r3, .L452+68
 8679 047e 1B78     		ldrb	r3, [r3]
 8680 0480 DBB2     		uxtb	r3, r3
 8681 0482 002B     		cmp	r3, #0
 8682 0484 01D0     		beq	.L444
2289:bluetooth_rxtx.c **** 			hop();
 8683              		.loc 1 2289 0
 8684 0486 FFF7FEFF 		bl	hop
 8685              	.L444:
2290:bluetooth_rxtx.c **** 
2291:bluetooth_rxtx.c **** 		//  you can jam but you keep turning off the light 
2292:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 8686              		.loc 1 2292 0
 8687 048a 294B     		ldr	r3, .L452+40
 8688 048c 1B68     		ldr	r3, [r3]
 8689 048e 002B     		cmp	r3, #0
 8690 0490 07DD     		ble	.L445
2293:bluetooth_rxtx.c **** 			le_jam();
 8691              		.loc 1 2293 0
 8692 0492 FFF7FEFF 		bl	le_jam
2294:bluetooth_rxtx.c **** 			--le_jam_count;
 8693              		.loc 1 2294 0
 8694 0496 264B     		ldr	r3, .L452+40
 8695 0498 1B68     		ldr	r3, [r3]
 8696 049a 013B     		subs	r3, r3, #1
 8697 049c 244A     		ldr	r2, .L452+40
 8698 049e 1360     		str	r3, [r2]
 8699 04a0 17E0     		b	.L446
 8700              	.L445:
2295:bluetooth_rxtx.c **** 		} else {
2296:bluetooth_rxtx.c **** 			/* RX mode */
2297:bluetooth_rxtx.c **** 			dma_init_le();
 8701              		.loc 1 2297 0
 8702 04a2 FFF7FEFF 		bl	dma_init_le
2298:bluetooth_rxtx.c **** 			dio_ssp_start();
 8703              		.loc 1 2298 0
ARM GAS  /tmp/cc6bdJLE.s 			page 193


 8704 04a6 FFF7FEFF 		bl	dio_ssp_start
2299:bluetooth_rxtx.c **** 
2300:bluetooth_rxtx.c **** 			if (restart_jamming) {
 8705              		.loc 1 2300 0
 8706 04aa 274B     		ldr	r3, .L452+64
 8707 04ac 1B68     		ldr	r3, [r3]
 8708 04ae 002B     		cmp	r3, #0
 8709 04b0 0CD0     		beq	.L447
2301:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 8710              		.loc 1 2301 0
 8711 04b2 164B     		ldr	r3, .L452+4
 8712 04b4 1B68     		ldr	r3, [r3]
 8713 04b6 1846     		mov	r0, r3
 8714 04b8 FFF7FEFF 		bl	rbit
 8715 04bc 0346     		mov	r3, r0
 8716 04be 1846     		mov	r0, r3
 8717 04c0 FFF7FEFF 		bl	cc2400_rx_sync
2302:bluetooth_rxtx.c **** 				restart_jamming = 0;
 8718              		.loc 1 2302 0
 8719 04c4 204B     		ldr	r3, .L452+64
 8720 04c6 0022     		movs	r2, #0
 8721 04c8 1A60     		str	r2, [r3]
 8722 04ca 02E0     		b	.L446
 8723              	.L447:
2303:bluetooth_rxtx.c **** 			} else {
2304:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 8724              		.loc 1 2304 0
 8725 04cc 6220     		movs	r0, #98
 8726 04ce FFF7FEFF 		bl	cc2400_strobe
 8727              	.L446:
2305:bluetooth_rxtx.c **** 			}
2306:bluetooth_rxtx.c **** 		}
2307:bluetooth_rxtx.c **** 
2308:bluetooth_rxtx.c **** 		rx_tc = 0;
 8728              		.loc 1 2308 0
 8729 04d2 1F4B     		ldr	r3, .L452+72
 8730 04d4 0022     		movs	r2, #0
 8731 04d6 1A60     		str	r2, [r3]
2309:bluetooth_rxtx.c **** 		rx_err = 0;
 8732              		.loc 1 2309 0
 8733 04d8 1E4B     		ldr	r3, .L452+76
 8734 04da 0022     		movs	r2, #0
 8735 04dc 1A60     		str	r2, [r3]
 8736              	.L405:
 8737              	.LBE11:
2143:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 8738              		.loc 1 2143 0
 8739 04de 174B     		ldr	r3, .L452+52
 8740 04e0 1B78     		ldrb	r3, [r3]
 8741 04e2 DBB2     		uxtb	r3, r3
 8742 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 8743 04e6 9A42     		cmp	r2, r3
 8744 04e8 3FF4B1AD 		beq	.L449
 8745              	.L448:
2310:bluetooth_rxtx.c **** 	}
2311:bluetooth_rxtx.c **** 
2312:bluetooth_rxtx.c **** cleanup:
ARM GAS  /tmp/cc6bdJLE.s 			page 194


2313:bluetooth_rxtx.c **** 
2314:bluetooth_rxtx.c **** 	// disable USB interrupts
2315:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 8746              		.loc 1 2315 0
 8747 04ec 1A4B     		ldr	r3, .L452+80
 8748 04ee 4FF08072 		mov	r2, #16777216
 8749 04f2 1A60     		str	r2, [r3]
2316:bluetooth_rxtx.c **** 
2317:bluetooth_rxtx.c **** 	// reset the radio completely
2318:bluetooth_rxtx.c **** 	cc2400_idle();
 8750              		.loc 1 2318 0
 8751 04f4 FFF7FEFF 		bl	cc2400_idle
2319:bluetooth_rxtx.c **** 	dio_ssp_stop();
 8752              		.loc 1 2319 0
 8753 04f8 FFF7FEFF 		bl	dio_ssp_stop
2320:bluetooth_rxtx.c **** 	cs_trigger_disable();
 8754              		.loc 1 2320 0
 8755 04fc FFF7FEFF 		bl	cs_trigger_disable
2321:bluetooth_rxtx.c **** }
 8756              		.loc 1 2321 0
 8757 0500 6C37     		adds	r7, r7, #108
 8758              		.cfi_def_cfa_offset 12
 8759 0502 BD46     		mov	sp, r7
 8760              		.cfi_def_cfa_register 13
 8761              		@ sp needed
 8762 0504 90BD     		pop	{r4, r7, pc}
 8763              	.L453:
 8764 0506 00BF     		.align	2
 8765              	.L452:
 8766 0508 00000000 		.word	rxbuf1
 8767 050c 00000000 		.word	le
 8768 0510 38C00920 		.word	537509944
 8769 0514 00000000 		.word	packet_cb
 8770 0518 00000000 		.word	clkn
 8771 051c 08400040 		.word	1073758216
 8772 0520 24000340 		.word	1073938468
 8773 0524 08000340 		.word	1073938440
 8774 0528 0C000340 		.word	1073938444
 8775 052c 80F0FA02 		.word	50000000
 8776 0530 00000000 		.word	le_jam_count
 8777 0534 3CC00920 		.word	537509948
 8778 0538 00000000 		.word	jam_mode
 8779 053c 00000000 		.word	requested_mode
 8780 0540 00000000 		.word	saved_request
 8781 0544 00000000 		.word	channel
 8782 0548 D4000000 		.word	restart_jamming.4824
 8783 054c 00000000 		.word	do_hop
 8784 0550 00000000 		.word	rx_tc
 8785 0554 00000000 		.word	rx_err
 8786 0558 80E100E0 		.word	-536813184
 8787              		.cfi_endproc
 8788              	.LFE36:
 8790              		.section	.text.cb_follow_le,"ax",%progbits
 8791              		.align	2
 8792              		.global	cb_follow_le
 8793              		.thumb
 8794              		.thumb_func
ARM GAS  /tmp/cc6bdJLE.s 			page 195


 8796              	cb_follow_le:
 8797              	.LFB37:
2322:bluetooth_rxtx.c **** 
2323:bluetooth_rxtx.c **** 
2324:bluetooth_rxtx.c **** 
2325:bluetooth_rxtx.c **** /* low energy connection following
2326:bluetooth_rxtx.c ****  * follows a known AA around */
2327:bluetooth_rxtx.c **** int cb_follow_le() {
 8798              		.loc 1 2327 0
 8799              		.cfi_startproc
 8800              		@ args = 0, pretend = 0, frame = 48
 8801              		@ frame_needed = 1, uses_anonymous_args = 0
 8802 0000 80B5     		push	{r7, lr}
 8803              		.cfi_def_cfa_offset 8
 8804              		.cfi_offset 7, -8
 8805              		.cfi_offset 14, -4
 8806 0002 8CB0     		sub	sp, sp, #48
 8807              		.cfi_def_cfa_offset 56
 8808 0004 00AF     		add	r7, sp, #0
 8809              		.cfi_def_cfa_register 7
2328:bluetooth_rxtx.c **** 	int i, j, k;
2329:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 8810              		.loc 1 2329 0
 8811 0006 6C4B     		ldr	r3, .L470
 8812 0008 1B88     		ldrh	r3, [r3]	@ movhi
 8813 000a 9BB2     		uxth	r3, r3
 8814 000c DBB2     		uxtb	r3, r3
 8815 000e 623B     		subs	r3, r3, #98
 8816 0010 DBB2     		uxtb	r3, r3
 8817 0012 1846     		mov	r0, r3
 8818 0014 FFF7FEFF 		bl	btle_channel_index
 8819 0018 0346     		mov	r3, r0
 8820 001a 1A46     		mov	r2, r3
 8821 001c 674B     		ldr	r3, .L470+4
 8822 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 8823 0020 3B62     		str	r3, [r7, #32]
2330:bluetooth_rxtx.c **** 
2331:bluetooth_rxtx.c **** 	u32 access_address = 0;
 8824              		.loc 1 2331 0
 8825 0022 0023     		movs	r3, #0
 8826 0024 FB61     		str	r3, [r7, #28]
2332:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8827              		.loc 1 2332 0
 8828 0026 0023     		movs	r3, #0
 8829 0028 FB62     		str	r3, [r7, #44]
 8830 002a 0EE0     		b	.L455
 8831              	.L456:
2333:bluetooth_rxtx.c **** 		access_address >>= 1;
 8832              		.loc 1 2333 0 discriminator 3
 8833 002c FB69     		ldr	r3, [r7, #28]
 8834 002e 5B08     		lsrs	r3, r3, #1
 8835 0030 FB61     		str	r3, [r7, #28]
2334:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 8836              		.loc 1 2334 0 discriminator 3
 8837 0032 634A     		ldr	r2, .L470+8
 8838 0034 FB6A     		ldr	r3, [r7, #44]
 8839 0036 1344     		add	r3, r3, r2
ARM GAS  /tmp/cc6bdJLE.s 			page 196


 8840 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8841 003a DB07     		lsls	r3, r3, #31
 8842 003c 1A46     		mov	r2, r3
 8843 003e FB69     		ldr	r3, [r7, #28]
 8844 0040 1343     		orrs	r3, r3, r2
 8845 0042 FB61     		str	r3, [r7, #28]
2332:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8846              		.loc 1 2332 0 discriminator 3
 8847 0044 FB6A     		ldr	r3, [r7, #44]
 8848 0046 0133     		adds	r3, r3, #1
 8849 0048 FB62     		str	r3, [r7, #44]
 8850              	.L455:
2332:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8851              		.loc 1 2332 0 is_stmt 0 discriminator 1
 8852 004a FB6A     		ldr	r3, [r7, #44]
 8853 004c 1E2B     		cmp	r3, #30
 8854 004e EDDD     		ble	.L456
2335:bluetooth_rxtx.c **** 	}
2336:bluetooth_rxtx.c **** 
2337:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 8855              		.loc 1 2337 0 is_stmt 1
 8856 0050 1F23     		movs	r3, #31
 8857 0052 FB62     		str	r3, [r7, #44]
 8858 0054 A6E0     		b	.L457
 8859              	.L468:
2338:bluetooth_rxtx.c **** 		access_address >>= 1;
 8860              		.loc 1 2338 0
 8861 0056 FB69     		ldr	r3, [r7, #28]
 8862 0058 5B08     		lsrs	r3, r3, #1
 8863 005a FB61     		str	r3, [r7, #28]
2339:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 8864              		.loc 1 2339 0
 8865 005c 584A     		ldr	r2, .L470+8
 8866 005e FB6A     		ldr	r3, [r7, #44]
 8867 0060 1344     		add	r3, r3, r2
 8868 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8869 0064 DB07     		lsls	r3, r3, #31
 8870 0066 1A46     		mov	r2, r3
 8871 0068 FB69     		ldr	r3, [r7, #28]
 8872 006a 1343     		orrs	r3, r3, r2
 8873 006c FB61     		str	r3, [r7, #28]
2340:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 8874              		.loc 1 2340 0
 8875 006e 554B     		ldr	r3, .L470+12
 8876 0070 1A68     		ldr	r2, [r3]
 8877 0072 FB69     		ldr	r3, [r7, #28]
 8878 0074 9A42     		cmp	r2, r3
 8879 0076 40F09280 		bne	.L458
2341:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 8880              		.loc 1 2341 0
 8881 007a 0023     		movs	r3, #0
 8882 007c BB62     		str	r3, [r7, #40]
 8883 007e 48E0     		b	.L459
 8884              	.L465:
 8885              	.LBB16:
2342:bluetooth_rxtx.c **** 				u8 byte = 0;
 8886              		.loc 1 2342 0
ARM GAS  /tmp/cc6bdJLE.s 			page 197


 8887 0080 0023     		movs	r3, #0
 8888 0082 FB76     		strb	r3, [r7, #27]
2343:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 8889              		.loc 1 2343 0
 8890 0084 0023     		movs	r3, #0
 8891 0086 7B62     		str	r3, [r7, #36]
 8892 0088 37E0     		b	.L460
 8893              	.L464:
 8894              	.LBB17:
2344:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8895              		.loc 1 2344 0
 8896 008a BB6A     		ldr	r3, [r7, #40]
 8897 008c DA00     		lsls	r2, r3, #3
 8898 008e 7B6A     		ldr	r3, [r7, #36]
 8899 0090 1A44     		add	r2, r2, r3
 8900 0092 FB6A     		ldr	r3, [r7, #44]
 8901 0094 1344     		add	r3, r3, r2
 8902 0096 1F3B     		subs	r3, r3, #31
 8903 0098 3B61     		str	r3, [r7, #16]
2345:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 8904              		.loc 1 2345 0
 8905 009a 3B69     		ldr	r3, [r7, #16]
 8906 009c B3F5487F 		cmp	r3, #800
 8907 00a0 00DB     		blt	.L461
 8908 00a2 2DE0     		b	.L462
 8909              	.L461:
2346:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 8910              		.loc 1 2346 0
 8911 00a4 464A     		ldr	r2, .L470+8
 8912 00a6 3B69     		ldr	r3, [r7, #16]
 8913 00a8 1344     		add	r3, r3, r2
 8914 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8915 00ac 7B61     		str	r3, [r7, #20]
2347:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 8916              		.loc 1 2347 0
 8917 00ae BB6A     		ldr	r3, [r7, #40]
 8918 00b0 032B     		cmp	r3, #3
 8919 00b2 16DD     		ble	.L463
2348:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 8920              		.loc 1 2348 0
 8921 00b4 444A     		ldr	r2, .L470+16
 8922 00b6 3B6A     		ldr	r3, [r7, #32]
 8923 00b8 1344     		add	r3, r3, r2
 8924 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8925 00bc 1A46     		mov	r2, r3
 8926 00be 7B69     		ldr	r3, [r7, #20]
 8927 00c0 5340     		eors	r3, r3, r2
 8928 00c2 7B61     		str	r3, [r7, #20]
2349:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 8929              		.loc 1 2349 0
 8930 00c4 3B6A     		ldr	r3, [r7, #32]
 8931 00c6 0133     		adds	r3, r3, #1
 8932 00c8 1946     		mov	r1, r3
 8933 00ca 404B     		ldr	r3, .L470+20
 8934 00cc A1FB0323 		umull	r2, r3, r1, r3
 8935 00d0 C81A     		subs	r0, r1, r3
 8936 00d2 4008     		lsrs	r0, r0, #1
ARM GAS  /tmp/cc6bdJLE.s 			page 198


 8937 00d4 0344     		add	r3, r3, r0
 8938 00d6 9A09     		lsrs	r2, r3, #6
 8939 00d8 1346     		mov	r3, r2
 8940 00da DB01     		lsls	r3, r3, #7
 8941 00dc 9B1A     		subs	r3, r3, r2
 8942 00de CA1A     		subs	r2, r1, r3
 8943 00e0 3A62     		str	r2, [r7, #32]
 8944              	.L463:
2350:bluetooth_rxtx.c **** 					}
2351:bluetooth_rxtx.c **** 					byte |= bit << k;
 8945              		.loc 1 2351 0 discriminator 2
 8946 00e2 7A69     		ldr	r2, [r7, #20]
 8947 00e4 7B6A     		ldr	r3, [r7, #36]
 8948 00e6 02FA03F3 		lsl	r3, r2, r3
 8949 00ea DAB2     		uxtb	r2, r3
 8950 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 8951 00ee 1343     		orrs	r3, r3, r2
 8952 00f0 DBB2     		uxtb	r3, r3
 8953 00f2 FB76     		strb	r3, [r7, #27]
 8954              	.LBE17:
2343:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8955              		.loc 1 2343 0 discriminator 2
 8956 00f4 7B6A     		ldr	r3, [r7, #36]
 8957 00f6 0133     		adds	r3, r3, #1
 8958 00f8 7B62     		str	r3, [r7, #36]
 8959              	.L460:
2343:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8960              		.loc 1 2343 0 is_stmt 0 discriminator 1
 8961 00fa 7B6A     		ldr	r3, [r7, #36]
 8962 00fc 072B     		cmp	r3, #7
 8963 00fe C4DD     		ble	.L464
 8964              	.L462:
2352:bluetooth_rxtx.c **** 				}
2353:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 8965              		.loc 1 2353 0 is_stmt 1 discriminator 2
 8966 0100 334B     		ldr	r3, .L470+24
 8967 0102 1A68     		ldr	r2, [r3]
 8968 0104 BB6A     		ldr	r3, [r7, #40]
 8969 0106 1344     		add	r3, r3, r2
 8970 0108 FA7E     		ldrb	r2, [r7, #27]
 8971 010a 1A70     		strb	r2, [r3]
 8972              	.LBE16:
2341:bluetooth_rxtx.c **** 				u8 byte = 0;
 8973              		.loc 1 2341 0 discriminator 2
 8974 010c BB6A     		ldr	r3, [r7, #40]
 8975 010e 0133     		adds	r3, r3, #1
 8976 0110 BB62     		str	r3, [r7, #40]
 8977              	.L459:
2341:bluetooth_rxtx.c **** 				u8 byte = 0;
 8978              		.loc 1 2341 0 is_stmt 0 discriminator 1
 8979 0112 BB6A     		ldr	r3, [r7, #40]
 8980 0114 2D2B     		cmp	r3, #45
 8981 0116 B3DD     		ble	.L465
2354:bluetooth_rxtx.c **** 			}
2355:bluetooth_rxtx.c **** 
2356:bluetooth_rxtx.c **** 			// verify CRC
2357:bluetooth_rxtx.c **** 			if (le.crc_verify) {
ARM GAS  /tmp/cc6bdJLE.s 			page 199


 8982              		.loc 1 2357 0 is_stmt 1
 8983 0118 2A4B     		ldr	r3, .L470+12
 8984 011a 1B69     		ldr	r3, [r3, #16]
 8985 011c 002B     		cmp	r3, #0
 8986 011e 2ED0     		beq	.L466
 8987              	.LBB18:
2358:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 8988              		.loc 1 2358 0
 8989 0120 2B4B     		ldr	r3, .L470+24
 8990 0122 1B68     		ldr	r3, [r3]
 8991 0124 0533     		adds	r3, r3, #5
 8992 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8993 0128 03F03F03 		and	r3, r3, #63
 8994 012c 0233     		adds	r3, r3, #2
 8995 012e FB60     		str	r3, [r7, #12]
2359:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 8996              		.loc 1 2359 0
 8997 0130 244B     		ldr	r3, .L470+12
 8998 0132 DA68     		ldr	r2, [r3, #12]
 8999 0134 264B     		ldr	r3, .L470+24
 9000 0136 1B68     		ldr	r3, [r3]
 9001 0138 0433     		adds	r3, r3, #4
 9002 013a 1046     		mov	r0, r2
 9003 013c 1946     		mov	r1, r3
 9004 013e FA68     		ldr	r2, [r7, #12]
 9005 0140 FFF7FEFF 		bl	btle_crcgen_lut
 9006 0144 B860     		str	r0, [r7, #8]
2360:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 9007              		.loc 1 2360 0
 9008 0146 224B     		ldr	r3, .L470+24
 9009 0148 1A68     		ldr	r2, [r3]
 9010 014a FB68     		ldr	r3, [r7, #12]
 9011 014c 0633     		adds	r3, r3, #6
 9012 014e 1344     		add	r3, r3, r2
 9013 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9014 0152 1A04     		lsls	r2, r3, #16
2361:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 9015              		.loc 1 2361 0
 9016 0154 1E4B     		ldr	r3, .L470+24
 9017 0156 1968     		ldr	r1, [r3]
 9018 0158 FB68     		ldr	r3, [r7, #12]
 9019 015a 0533     		adds	r3, r3, #5
 9020 015c 0B44     		add	r3, r3, r1
 9021 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9022 0160 1B02     		lsls	r3, r3, #8
 9023 0162 1343     		orrs	r3, r3, r2
2362:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 9024              		.loc 1 2362 0
 9025 0164 1A4A     		ldr	r2, .L470+24
 9026 0166 1268     		ldr	r2, [r2]
 9027 0168 F968     		ldr	r1, [r7, #12]
 9028 016a 0431     		adds	r1, r1, #4
 9029 016c 0A44     		add	r2, r2, r1
 9030 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9031 0170 1343     		orrs	r3, r3, r2
2360:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 9032              		.loc 1 2360 0
ARM GAS  /tmp/cc6bdJLE.s 			page 200


 9033 0172 7B60     		str	r3, [r7, #4]
2363:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 9034              		.loc 1 2363 0
 9035 0174 BA68     		ldr	r2, [r7, #8]
 9036 0176 7B68     		ldr	r3, [r7, #4]
 9037 0178 9A42     		cmp	r2, r3
 9038 017a 00D0     		beq	.L466
2364:bluetooth_rxtx.c **** 					break;
 9039              		.loc 1 2364 0
 9040 017c 17E0     		b	.L467
 9041              	.L466:
 9042              	.LBE18:
2365:bluetooth_rxtx.c **** 			}
2366:bluetooth_rxtx.c **** 
2367:bluetooth_rxtx.c **** 			// send to PC
2368:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 9043              		.loc 1 2368 0
 9044 017e 144B     		ldr	r3, .L470+24
 9045 0180 1B68     		ldr	r3, [r3]
 9046 0182 0120     		movs	r0, #1
 9047 0184 1946     		mov	r1, r3
 9048 0186 FFF7FEFF 		bl	enqueue
2369:bluetooth_rxtx.c **** 			RXLED_SET;
 9049              		.loc 1 2369 0
 9050 018a 124B     		ldr	r3, .L470+28
 9051 018c 1022     		movs	r2, #16
 9052 018e 1A60     		str	r2, [r3]
2370:bluetooth_rxtx.c **** 
2371:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 9053              		.loc 1 2371 0
 9054 0190 114B     		ldr	r3, .L470+32
 9055 0192 1B68     		ldr	r3, [r3]
 9056 0194 0E4A     		ldr	r2, .L470+24
 9057 0196 1268     		ldr	r2, [r2]
 9058 0198 1046     		mov	r0, r2
 9059 019a 9847     		blx	r3
2372:bluetooth_rxtx.c **** 
2373:bluetooth_rxtx.c **** 			break;
 9060              		.loc 1 2373 0
 9061 019c 07E0     		b	.L467
 9062              	.L458:
2337:bluetooth_rxtx.c **** 		access_address >>= 1;
 9063              		.loc 1 2337 0 discriminator 2
 9064 019e FB6A     		ldr	r3, [r7, #44]
 9065 01a0 0133     		adds	r3, r3, #1
 9066 01a2 FB62     		str	r3, [r7, #44]
 9067              	.L457:
2337:bluetooth_rxtx.c **** 		access_address >>= 1;
 9068              		.loc 1 2337 0 is_stmt 0 discriminator 1
 9069 01a4 FB6A     		ldr	r3, [r7, #44]
 9070 01a6 B3F5D87F 		cmp	r3, #432
 9071 01aa FFF654AF 		blt	.L468
 9072              	.L467:
2374:bluetooth_rxtx.c **** 		}
2375:bluetooth_rxtx.c **** 	}
2376:bluetooth_rxtx.c **** 
2377:bluetooth_rxtx.c **** 	return 1;
ARM GAS  /tmp/cc6bdJLE.s 			page 201


 9073              		.loc 1 2377 0 is_stmt 1
 9074 01ae 0123     		movs	r3, #1
2378:bluetooth_rxtx.c **** }
 9075              		.loc 1 2378 0
 9076 01b0 1846     		mov	r0, r3
 9077 01b2 3037     		adds	r7, r7, #48
 9078              		.cfi_def_cfa_offset 8
 9079 01b4 BD46     		mov	sp, r7
 9080              		.cfi_def_cfa_register 13
 9081              		@ sp needed
 9082 01b6 80BD     		pop	{r7, pc}
 9083              	.L471:
 9084              		.align	2
 9085              	.L470:
 9086 01b8 00000000 		.word	channel
 9087 01bc C0000000 		.word	whitening_index
 9088 01c0 00000000 		.word	unpacked
 9089 01c4 00000000 		.word	le
 9090 01c8 40000000 		.word	whitening
 9091 01cc 11080402 		.word	33818641
 9092 01d0 00000000 		.word	idle_rxbuf
 9093 01d4 38C00920 		.word	537509944
 9094 01d8 00000000 		.word	packet_cb
 9095              		.cfi_endproc
 9096              	.LFE37:
 9098              		.section	.text.connection_follow_cb,"ax",%progbits
 9099              		.align	2
 9100              		.global	connection_follow_cb
 9101              		.thumb
 9102              		.thumb_func
 9104              	connection_follow_cb:
 9105              	.LFB38:
2379:bluetooth_rxtx.c **** 
2380:bluetooth_rxtx.c **** /**
2381:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2382:bluetooth_rxtx.c ****  */
2383:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 9106              		.loc 1 2383 0
 9107              		.cfi_startproc
 9108              		@ args = 0, pretend = 0, frame = 40
 9109              		@ frame_needed = 1, uses_anonymous_args = 0
 9110 0000 80B5     		push	{r7, lr}
 9111              		.cfi_def_cfa_offset 8
 9112              		.cfi_offset 7, -8
 9113              		.cfi_offset 14, -4
 9114 0002 8AB0     		sub	sp, sp, #40
 9115              		.cfi_def_cfa_offset 48
 9116 0004 00AF     		add	r7, sp, #0
 9117              		.cfi_def_cfa_register 7
 9118 0006 7860     		str	r0, [r7, #4]
2384:bluetooth_rxtx.c **** 	int i;
2385:bluetooth_rxtx.c **** 	u32 aa = 0;
 9119              		.loc 1 2385 0
 9120 0008 0023     		movs	r3, #0
 9121 000a 3B62     		str	r3, [r7, #32]
2386:bluetooth_rxtx.c **** 
2387:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
ARM GAS  /tmp/cc6bdJLE.s 			page 202


2388:bluetooth_rxtx.c **** #define HEADER_IDX 4
2389:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2390:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2391:bluetooth_rxtx.c **** 
2392:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 9122              		.loc 1 2392 0
 9123 000c 7B68     		ldr	r3, [r7, #4]
 9124 000e FB61     		str	r3, [r7, #28]
2393:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 9125              		.loc 1 2393 0
 9126 0010 7B68     		ldr	r3, [r7, #4]
 9127 0012 1B79     		ldrb	r3, [r3, #4]
 9128 0014 FB76     		strb	r3, [r7, #27]
2394:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 9129              		.loc 1 2394 0
 9130 0016 7B68     		ldr	r3, [r7, #4]
 9131 0018 0533     		adds	r3, r3, #5
 9132 001a 7B61     		str	r3, [r7, #20]
2395:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 9133              		.loc 1 2395 0
 9134 001c 7B68     		ldr	r3, [r7, #4]
 9135 001e 0633     		adds	r3, r3, #6
 9136 0020 3B61     		str	r3, [r7, #16]
2396:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 9137              		.loc 1 2396 0
 9138 0022 7B69     		ldr	r3, [r7, #20]
 9139 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9140 0026 0633     		adds	r3, r3, #6
 9141 0028 1A46     		mov	r2, r3
 9142 002a 7B68     		ldr	r3, [r7, #4]
 9143 002c 1344     		add	r3, r3, r2
 9144 002e FB60     		str	r3, [r7, #12]
2397:bluetooth_rxtx.c **** 
2398:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 9145              		.loc 1 2398 0
 9146 0030 8B4B     		ldr	r3, .L482
 9147 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 9148 0034 022B     		cmp	r3, #2
 9149 0036 1CD1     		bne	.L473
2399:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2400:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 9150              		.loc 1 2400 0
 9151 0038 894B     		ldr	r3, .L482
 9152 003a 0322     		movs	r2, #3
 9153 003c 1A75     		strb	r2, [r3, #20]
2401:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 9154              		.loc 1 2401 0
 9155 003e 894B     		ldr	r3, .L482+4
 9156 0040 1B68     		ldr	r3, [r3]
 9157 0042 874A     		ldr	r2, .L482
 9158 0044 9361     		str	r3, [r2, #24]
2402:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 9159              		.loc 1 2402 0
 9160 0046 864B     		ldr	r3, .L482
 9161 0048 DB8B     		ldrh	r3, [r3, #30]
 9162 004a 013B     		subs	r3, r3, #1
 9163 004c 9AB2     		uxth	r2, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 203


 9164 004e 844B     		ldr	r3, .L482
 9165 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2403:bluetooth_rxtx.c **** 		le.conn_count = 0;
 9166              		.loc 1 2403 0
 9167 0052 834B     		ldr	r3, .L482
 9168 0054 0022     		movs	r2, #0
 9169 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2404:bluetooth_rxtx.c **** 		le.update_pending = 0;
 9170              		.loc 1 2404 0
 9171 0058 814B     		ldr	r3, .L482
 9172 005a 0022     		movs	r2, #0
 9173 005c 9A62     		str	r2, [r3, #40]
2405:bluetooth_rxtx.c **** 
2406:bluetooth_rxtx.c **** 		// hue hue hue
2407:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 9174              		.loc 1 2407 0
 9175 005e 824B     		ldr	r3, .L482+8
 9176 0060 1B78     		ldrb	r3, [r3]
 9177 0062 DBB2     		uxtb	r3, r3
 9178 0064 002B     		cmp	r3, #0
 9179 0066 00F0F780 		beq	.L472
2408:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 9180              		.loc 1 2408 0
 9181 006a 804B     		ldr	r3, .L482+12
 9182 006c 2822     		movs	r2, #40
 9183 006e 1A60     		str	r2, [r3]
 9184 0070 F2E0     		b	.L472
 9185              	.L473:
2409:bluetooth_rxtx.c **** 
2410:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 9186              		.loc 1 2410 0
 9187 0072 7B4B     		ldr	r3, .L482
 9188 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 9189 0076 032B     		cmp	r3, #3
 9190 0078 6FD1     		bne	.L476
 9191              	.LBB19:
2411:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 9192              		.loc 1 2411 0
 9193 007a FB7E     		ldrb	r3, [r7, #27]
 9194 007c 03F00303 		and	r3, r3, #3
 9195 0080 FB72     		strb	r3, [r7, #11]
2412:bluetooth_rxtx.c **** 
2413:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2414:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 9196              		.loc 1 2414 0
 9197 0082 774B     		ldr	r3, .L482
 9198 0084 9B6A     		ldr	r3, [r3, #40]
 9199 0086 002B     		cmp	r3, #0
 9200 0088 21D0     		beq	.L477
 9201              		.loc 1 2414 0 is_stmt 0 discriminator 1
 9202 008a 754B     		ldr	r3, .L482
 9203 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 9204 008e 9AB2     		uxth	r2, r3
 9205 0090 734B     		ldr	r3, .L482
 9206 0092 9B8D     		ldrh	r3, [r3, #44]
 9207 0094 9A42     		cmp	r2, r3
 9208 0096 1AD1     		bne	.L477
ARM GAS  /tmp/cc6bdJLE.s 			page 204


2415:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2416:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 9209              		.loc 1 2416 0 is_stmt 1
 9210 0098 724B     		ldr	r3, .L482+4
 9211 009a 1B68     		ldr	r3, [r3]
 9212 009c 704A     		ldr	r2, .L482
 9213 009e 9361     		str	r3, [r2, #24]
2417:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 9214              		.loc 1 2417 0
 9215 00a0 6F4B     		ldr	r3, .L482
 9216 00a2 DA8D     		ldrh	r2, [r3, #46]
 9217 00a4 6E4B     		ldr	r3, .L482
 9218 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2418:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 9219              		.loc 1 2418 0
 9220 00a8 6D4B     		ldr	r3, .L482
 9221 00aa DB8D     		ldrh	r3, [r3, #46]
 9222 00ac 013B     		subs	r3, r3, #1
 9223 00ae 9AB2     		uxth	r2, r3
 9224 00b0 6B4B     		ldr	r3, .L482
 9225 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2419:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 9226              		.loc 1 2419 0
 9227 00b4 6A4B     		ldr	r3, .L482
 9228 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 9229 00ba 694B     		ldr	r3, .L482
 9230 00bc 83F82220 		strb	r2, [r3, #34]
2420:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 9231              		.loc 1 2420 0
 9232 00c0 674B     		ldr	r3, .L482
 9233 00c2 5A8E     		ldrh	r2, [r3, #50]
 9234 00c4 664B     		ldr	r3, .L482
 9235 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2421:bluetooth_rxtx.c **** 			le.update_pending = 0;
 9236              		.loc 1 2421 0
 9237 00c8 654B     		ldr	r3, .L482
 9238 00ca 0022     		movs	r2, #0
 9239 00cc 9A62     		str	r2, [r3, #40]
 9240              	.L477:
2422:bluetooth_rxtx.c **** 		}
2423:bluetooth_rxtx.c **** 
2424:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 9241              		.loc 1 2424 0
 9242 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 9243 00d0 032B     		cmp	r3, #3
 9244 00d2 41D1     		bne	.L478
 9245              		.loc 1 2424 0 is_stmt 0 discriminator 1
 9246 00d4 3B69     		ldr	r3, [r7, #16]
 9247 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9248 00d8 002B     		cmp	r3, #0
 9249 00da 3DD1     		bne	.L478
2425:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2426:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2427:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 9250              		.loc 1 2427 0 is_stmt 1
 9251 00dc 7B68     		ldr	r3, [r7, #4]
 9252 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
ARM GAS  /tmp/cc6bdJLE.s 			page 205


 9253 00e0 5F4B     		ldr	r3, .L482
 9254 00e2 83F83020 		strb	r2, [r3, #48]
2428:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 9255              		.loc 1 2428 0
 9256 00e6 7B68     		ldr	r3, [r7, #4]
 9257 00e8 0833     		adds	r3, r3, #8
 9258 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9259 00ec 9AB2     		uxth	r2, r3
 9260 00ee 7B68     		ldr	r3, [r7, #4]
 9261 00f0 0933     		adds	r3, r3, #9
 9262 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9263 00f4 9BB2     		uxth	r3, r3
 9264 00f6 1B02     		lsls	r3, r3, #8
 9265 00f8 9BB2     		uxth	r3, r3
 9266 00fa 1344     		add	r3, r3, r2
 9267 00fc 9AB2     		uxth	r2, r3
 9268 00fe 584B     		ldr	r3, .L482
 9269 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2429:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 9270              		.loc 1 2429 0
 9271 0102 7B68     		ldr	r3, [r7, #4]
 9272 0104 0A33     		adds	r3, r3, #10
 9273 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9274 0108 9AB2     		uxth	r2, r3
 9275 010a 7B68     		ldr	r3, [r7, #4]
 9276 010c 0B33     		adds	r3, r3, #11
 9277 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9278 0110 9BB2     		uxth	r3, r3
 9279 0112 1B02     		lsls	r3, r3, #8
 9280 0114 9BB2     		uxth	r3, r3
 9281 0116 1344     		add	r3, r3, r2
 9282 0118 9AB2     		uxth	r2, r3
 9283 011a 514B     		ldr	r3, .L482
 9284 011c DA85     		strh	r2, [r3, #46]	@ movhi
2430:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 9285              		.loc 1 2430 0
 9286 011e 7B68     		ldr	r3, [r7, #4]
 9287 0120 1033     		adds	r3, r3, #16
 9288 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9289 0124 9AB2     		uxth	r2, r3
 9290 0126 7B68     		ldr	r3, [r7, #4]
 9291 0128 1133     		adds	r3, r3, #17
 9292 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9293 012c 9BB2     		uxth	r3, r3
 9294 012e 1B02     		lsls	r3, r3, #8
 9295 0130 9BB2     		uxth	r3, r3
 9296 0132 1344     		add	r3, r3, r2
 9297 0134 9AB2     		uxth	r2, r3
 9298 0136 4A4B     		ldr	r3, .L482
 9299 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2431:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 9300              		.loc 1 2431 0
 9301 013a 494B     		ldr	r3, .L482
 9302 013c 9B8D     		ldrh	r3, [r3, #44]
 9303 013e 1A46     		mov	r2, r3
 9304 0140 474B     		ldr	r3, .L482
 9305 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
ARM GAS  /tmp/cc6bdJLE.s 			page 206


 9306 0144 9BB2     		uxth	r3, r3
 9307 0146 D31A     		subs	r3, r2, r3
 9308 0148 47F6FE72 		movw	r2, #32766
 9309 014c 9342     		cmp	r3, r2
 9310 014e 03DC     		bgt	.L478
2432:bluetooth_rxtx.c **** 				le.update_pending = 1;
 9311              		.loc 1 2432 0
 9312 0150 434B     		ldr	r3, .L482
 9313 0152 0122     		movs	r2, #1
 9314 0154 9A62     		str	r2, [r3, #40]
 9315              	.LBE19:
 9316 0156 7FE0     		b	.L472
 9317              	.L478:
 9318 0158 7EE0     		b	.L472
 9319              	.L476:
2433:bluetooth_rxtx.c **** 		}
2434:bluetooth_rxtx.c **** 
2435:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 9320              		.loc 1 2435 0
 9321 015a 414B     		ldr	r3, .L482
 9322 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 9323 015e 012B     		cmp	r3, #1
 9324 0160 7AD1     		bne	.L472
 9325              	.LBB20:
2436:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 9326              		.loc 1 2436 0
 9327 0162 7B68     		ldr	r3, [r7, #4]
 9328 0164 0433     		adds	r3, r3, #4
 9329 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9330 0168 03F00F03 		and	r3, r3, #15
 9331 016c BB72     		strb	r3, [r7, #10]
2437:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 9332              		.loc 1 2437 0
 9333 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 9334 0170 052B     		cmp	r3, #5
 9335 0172 71D1     		bne	.L472
2438:bluetooth_rxtx.c **** 			// This is a connect packet
2439:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2440:bluetooth_rxtx.c **** 			if (le.target_set &&
 9336              		.loc 1 2440 0
 9337 0174 3A4B     		ldr	r3, .L482
 9338 0176 DB6B     		ldr	r3, [r3, #60]
 9339 0178 002B     		cmp	r3, #0
 9340 017a 14D0     		beq	.L479
2441:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 9341              		.loc 1 2441 0 discriminator 1
 9342 017c 7B68     		ldr	r3, [r7, #4]
 9343 017e 0633     		adds	r3, r3, #6
 9344 0180 3B48     		ldr	r0, .L482+16
 9345 0182 1946     		mov	r1, r3
 9346 0184 0622     		movs	r2, #6
 9347 0186 FFF7FEFF 		bl	memcmp
 9348 018a 0346     		mov	r3, r0
2440:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 9349              		.loc 1 2440 0 discriminator 1
 9350 018c 002B     		cmp	r3, #0
 9351 018e 0AD0     		beq	.L479
ARM GAS  /tmp/cc6bdJLE.s 			page 207


2442:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 9352              		.loc 1 2442 0
 9353 0190 7B68     		ldr	r3, [r7, #4]
 9354 0192 0C33     		adds	r3, r3, #12
 9355 0194 3648     		ldr	r0, .L482+16
 9356 0196 1946     		mov	r1, r3
 9357 0198 0622     		movs	r2, #6
 9358 019a FFF7FEFF 		bl	memcmp
 9359 019e 0346     		mov	r3, r0
2441:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 9360              		.loc 1 2441 0
 9361 01a0 002B     		cmp	r3, #0
 9362 01a2 00D0     		beq	.L479
2443:bluetooth_rxtx.c **** 				return;
 9363              		.loc 1 2443 0
 9364 01a4 58E0     		b	.L472
 9365              	.L479:
2444:bluetooth_rxtx.c **** 			}
2445:bluetooth_rxtx.c **** 
2446:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 9366              		.loc 1 2446 0
 9367 01a6 2E4B     		ldr	r3, .L482
 9368 01a8 0222     		movs	r2, #2
 9369 01aa 1A75     		strb	r2, [r3, #20]
2447:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 9370              		.loc 1 2447 0
 9371 01ac 2C4B     		ldr	r3, .L482
 9372 01ae 0022     		movs	r2, #0
 9373 01b0 1A61     		str	r2, [r3, #16]
2448:bluetooth_rxtx.c **** 
2449:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 9374              		.loc 1 2449 0
 9375 01b2 0023     		movs	r3, #0
 9376 01b4 7B62     		str	r3, [r7, #36]
 9377 01b6 11E0     		b	.L480
 9378              	.L481:
2450:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 9379              		.loc 1 2450 0 discriminator 3
 9380 01b8 7B6A     		ldr	r3, [r7, #36]
 9381 01ba 1233     		adds	r3, r3, #18
 9382 01bc 1A46     		mov	r2, r3
 9383 01be 7B68     		ldr	r3, [r7, #4]
 9384 01c0 1344     		add	r3, r3, r2
 9385 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9386 01c4 1A46     		mov	r2, r3
 9387 01c6 7B6A     		ldr	r3, [r7, #36]
 9388 01c8 DB00     		lsls	r3, r3, #3
 9389 01ca 02FA03F3 		lsl	r3, r2, r3
 9390 01ce 1A46     		mov	r2, r3
 9391 01d0 3B6A     		ldr	r3, [r7, #32]
 9392 01d2 1343     		orrs	r3, r3, r2
 9393 01d4 3B62     		str	r3, [r7, #32]
2449:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 9394              		.loc 1 2449 0 discriminator 3
 9395 01d6 7B6A     		ldr	r3, [r7, #36]
 9396 01d8 0133     		adds	r3, r3, #1
 9397 01da 7B62     		str	r3, [r7, #36]
ARM GAS  /tmp/cc6bdJLE.s 			page 208


 9398              	.L480:
2449:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 9399              		.loc 1 2449 0 is_stmt 0 discriminator 1
 9400 01dc 7B6A     		ldr	r3, [r7, #36]
 9401 01de 032B     		cmp	r3, #3
 9402 01e0 EADD     		ble	.L481
2451:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 9403              		.loc 1 2451 0 is_stmt 1
 9404 01e2 386A     		ldr	r0, [r7, #32]
 9405 01e4 FFF7FEFF 		bl	le_set_access_address
2452:bluetooth_rxtx.c **** 
2453:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2454:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 9406              		.loc 1 2454 0
 9407 01e8 7B68     		ldr	r3, [r7, #4]
 9408 01ea 1833     		adds	r3, r3, #24
 9409 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9410 01ee 1A04     		lsls	r2, r3, #16
2455:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 9411              		.loc 1 2455 0
 9412 01f0 7B68     		ldr	r3, [r7, #4]
 9413 01f2 1733     		adds	r3, r3, #23
 9414 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9415 01f6 1B02     		lsls	r3, r3, #8
 9416 01f8 1343     		orrs	r3, r3, r2
2456:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 9417              		.loc 1 2456 0
 9418 01fa 7A68     		ldr	r2, [r7, #4]
 9419 01fc 1632     		adds	r2, r2, #22
 9420 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9421 0200 1343     		orrs	r3, r3, r2
2454:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 9422              		.loc 1 2454 0
 9423 0202 1A46     		mov	r2, r3
 9424 0204 164B     		ldr	r3, .L482
 9425 0206 9A60     		str	r2, [r3, #8]
2457:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 9426              		.loc 1 2457 0
 9427 0208 154B     		ldr	r3, .L482
 9428 020a 9B68     		ldr	r3, [r3, #8]
 9429 020c 1846     		mov	r0, r3
 9430 020e FFF7FEFF 		bl	rbit
 9431 0212 0246     		mov	r2, r0
 9432 0214 124B     		ldr	r3, .L482
 9433 0216 DA60     		str	r2, [r3, #12]
2458:bluetooth_rxtx.c **** 
2459:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2460:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 9434              		.loc 1 2460 0
 9435 0218 7B68     		ldr	r3, [r7, #4]
 9436 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 9437 021c 104B     		ldr	r3, .L482
 9438 021e 83F82220 		strb	r2, [r3, #34]
2461:bluetooth_rxtx.c **** 
2462:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2463:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 9439              		.loc 1 2463 0
ARM GAS  /tmp/cc6bdJLE.s 			page 209


 9440 0222 7B68     		ldr	r3, [r7, #4]
 9441 0224 1A33     		adds	r3, r3, #26
 9442 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9443 0228 9AB2     		uxth	r2, r3
 9444 022a 0D4B     		ldr	r3, .L482
 9445 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2464:bluetooth_rxtx.c **** 
2465:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2466:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 9446              		.loc 1 2466 0
 9447 022e 7B68     		ldr	r3, [r7, #4]
 9448 0230 1C33     		adds	r3, r3, #28
 9449 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9450 0234 9AB2     		uxth	r2, r3
 9451 0236 0A4B     		ldr	r3, .L482
 9452 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2467:bluetooth_rxtx.c **** 
2468:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2469:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 9453              		.loc 1 2469 0
 9454 023a 7B68     		ldr	r3, [r7, #4]
 9455 023c 2733     		adds	r3, r3, #39
 9456 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9457 0240 03F01F03 		and	r3, r3, #31
 9458 0244 DAB2     		uxtb	r2, r3
 9459 0246 064B     		ldr	r3, .L482
 9460 0248 9A75     		strb	r2, [r3, #22]
2470:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 9461              		.loc 1 2470 0
 9462 024a 054B     		ldr	r3, .L482
 9463 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 9464 024e 044B     		ldr	r3, .L482
 9465 0250 5A75     		strb	r2, [r3, #21]
2471:bluetooth_rxtx.c **** 
2472:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2473:bluetooth_rxtx.c **** 			do_hop = 1;
 9466              		.loc 1 2473 0
 9467 0252 084B     		ldr	r3, .L482+20
 9468 0254 0122     		movs	r2, #1
 9469 0256 1A70     		strb	r2, [r3]
 9470              	.L472:
 9471              	.LBE20:
2474:bluetooth_rxtx.c **** 		}
2475:bluetooth_rxtx.c **** 	}
2476:bluetooth_rxtx.c **** }
 9472              		.loc 1 2476 0
 9473 0258 2837     		adds	r7, r7, #40
 9474              		.cfi_def_cfa_offset 8
 9475 025a BD46     		mov	sp, r7
 9476              		.cfi_def_cfa_register 13
 9477              		@ sp needed
 9478 025c 80BD     		pop	{r7, pc}
 9479              	.L483:
 9480 025e 00BF     		.align	2
 9481              	.L482:
 9482 0260 00000000 		.word	le
 9483 0264 00000000 		.word	clkn
ARM GAS  /tmp/cc6bdJLE.s 			page 210


 9484 0268 00000000 		.word	jam_mode
 9485 026c 00000000 		.word	le_jam_count
 9486 0270 34000000 		.word	le+52
 9487 0274 00000000 		.word	do_hop
 9488              		.cfi_endproc
 9489              	.LFE38:
 9491              		.section	.text.bt_follow_le,"ax",%progbits
 9492              		.align	2
 9493              		.global	bt_follow_le
 9494              		.thumb
 9495              		.thumb_func
 9497              	bt_follow_le:
 9498              	.LFB39:
2477:bluetooth_rxtx.c **** 
2478:bluetooth_rxtx.c **** void bt_follow_le() {
 9499              		.loc 1 2478 0
 9500              		.cfi_startproc
 9501              		@ args = 0, pretend = 0, frame = 0
 9502              		@ frame_needed = 1, uses_anonymous_args = 0
 9503 0000 80B5     		push	{r7, lr}
 9504              		.cfi_def_cfa_offset 8
 9505              		.cfi_offset 7, -8
 9506              		.cfi_offset 14, -4
 9507 0002 00AF     		add	r7, sp, #0
 9508              		.cfi_def_cfa_register 7
2479:bluetooth_rxtx.c **** 	reset_le();
 9509              		.loc 1 2479 0
 9510 0004 FFF7FEFF 		bl	reset_le
2480:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 9511              		.loc 1 2480 0
 9512 0008 044B     		ldr	r3, .L485
 9513 000a 054A     		ldr	r2, .L485+4
 9514 000c 1A60     		str	r2, [r3]
2481:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 9515              		.loc 1 2481 0
 9516 000e 0920     		movs	r0, #9
 9517 0010 FFF7FEFF 		bl	bt_le_sync
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 	/* old non-sync mode
2484:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2485:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2486:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2487:bluetooth_rxtx.c **** 	*/
2488:bluetooth_rxtx.c **** 
2489:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 9518              		.loc 1 2489 0
 9519 0014 034B     		ldr	r3, .L485+8
 9520 0016 0022     		movs	r2, #0
 9521 0018 1A70     		strb	r2, [r3]
2490:bluetooth_rxtx.c **** }
 9522              		.loc 1 2490 0
 9523 001a 80BD     		pop	{r7, pc}
 9524              	.L486:
 9525              		.align	2
 9526              	.L485:
 9527 001c 00000000 		.word	packet_cb
 9528 0020 00000000 		.word	connection_follow_cb
ARM GAS  /tmp/cc6bdJLE.s 			page 211


 9529 0024 00000000 		.word	mode
 9530              		.cfi_endproc
 9531              	.LFE39:
 9533              		.section	.text.le_promisc_state,"ax",%progbits
 9534              		.align	2
 9535              		.global	le_promisc_state
 9536              		.thumb
 9537              		.thumb_func
 9539              	le_promisc_state:
 9540              	.LFB40:
2491:bluetooth_rxtx.c **** 
2492:bluetooth_rxtx.c **** // issue state change message
2493:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 9541              		.loc 1 2493 0
 9542              		.cfi_startproc
 9543              		@ args = 0, pretend = 0, frame = 72
 9544              		@ frame_needed = 1, uses_anonymous_args = 0
 9545 0000 80B5     		push	{r7, lr}
 9546              		.cfi_def_cfa_offset 8
 9547              		.cfi_offset 7, -8
 9548              		.cfi_offset 14, -4
 9549 0002 92B0     		sub	sp, sp, #72
 9550              		.cfi_def_cfa_offset 80
 9551 0004 00AF     		add	r7, sp, #0
 9552              		.cfi_def_cfa_register 7
 9553 0006 0346     		mov	r3, r0
 9554 0008 B960     		str	r1, [r7, #8]
 9555 000a 7A60     		str	r2, [r7, #4]
 9556 000c FB73     		strb	r3, [r7, #15]
2494:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 9557              		.loc 1 2494 0
 9558 000e 07F11403 		add	r3, r7, #20
 9559 0012 0022     		movs	r2, #0
 9560 0014 1A60     		str	r2, [r3]
 9561 0016 0433     		adds	r3, r3, #4
 9562 0018 0022     		movs	r2, #0
 9563 001a 1A60     		str	r2, [r3]
 9564 001c 0433     		adds	r3, r3, #4
 9565 001e 0022     		movs	r2, #0
 9566 0020 1A60     		str	r2, [r3]
 9567 0022 0433     		adds	r3, r3, #4
 9568 0024 0022     		movs	r2, #0
 9569 0026 1A60     		str	r2, [r3]
 9570 0028 0433     		adds	r3, r3, #4
 9571 002a 0022     		movs	r2, #0
 9572 002c 1A60     		str	r2, [r3]
 9573 002e 0433     		adds	r3, r3, #4
 9574 0030 0022     		movs	r2, #0
 9575 0032 1A60     		str	r2, [r3]
 9576 0034 0433     		adds	r3, r3, #4
 9577 0036 0022     		movs	r2, #0
 9578 0038 1A60     		str	r2, [r3]
 9579 003a 0433     		adds	r3, r3, #4
 9580 003c 0022     		movs	r2, #0
 9581 003e 1A60     		str	r2, [r3]
 9582 0040 0433     		adds	r3, r3, #4
 9583 0042 0022     		movs	r2, #0
ARM GAS  /tmp/cc6bdJLE.s 			page 212


 9584 0044 1A60     		str	r2, [r3]
 9585 0046 0433     		adds	r3, r3, #4
 9586 0048 0022     		movs	r2, #0
 9587 004a 1A60     		str	r2, [r3]
 9588 004c 0433     		adds	r3, r3, #4
 9589 004e 0022     		movs	r2, #0
 9590 0050 1A60     		str	r2, [r3]
 9591 0052 0433     		adds	r3, r3, #4
 9592 0054 0022     		movs	r2, #0
 9593 0056 1A60     		str	r2, [r3]
 9594 0058 0433     		adds	r3, r3, #4
 9595 005a 0022     		movs	r2, #0
 9596 005c 1A80     		strh	r2, [r3]	@ movhi
 9597 005e 0233     		adds	r3, r3, #2
2495:bluetooth_rxtx.c **** 	if (len > 49)
 9598              		.loc 1 2495 0
 9599 0060 7B68     		ldr	r3, [r7, #4]
 9600 0062 312B     		cmp	r3, #49
 9601 0064 01D9     		bls	.L488
2496:bluetooth_rxtx.c **** 		len = 49;
 9602              		.loc 1 2496 0
 9603 0066 3123     		movs	r3, #49
 9604 0068 7B60     		str	r3, [r7, #4]
 9605              	.L488:
2497:bluetooth_rxtx.c **** 
2498:bluetooth_rxtx.c **** 	buf[0] = type;
 9606              		.loc 1 2498 0
 9607 006a FB7B     		ldrb	r3, [r7, #15]
 9608 006c 3B75     		strb	r3, [r7, #20]
2499:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 9609              		.loc 1 2499 0
 9610 006e 07F11403 		add	r3, r7, #20
 9611 0072 0133     		adds	r3, r3, #1
 9612 0074 1846     		mov	r0, r3
 9613 0076 B968     		ldr	r1, [r7, #8]
 9614 0078 7A68     		ldr	r2, [r7, #4]
 9615 007a FFF7FEFF 		bl	memcpy
2500:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 9616              		.loc 1 2500 0
 9617 007e 07F11403 		add	r3, r7, #20
 9618 0082 0520     		movs	r0, #5
 9619 0084 1946     		mov	r1, r3
 9620 0086 FFF7FEFF 		bl	enqueue
2501:bluetooth_rxtx.c **** }
 9621              		.loc 1 2501 0
 9622 008a 4837     		adds	r7, r7, #72
 9623              		.cfi_def_cfa_offset 8
 9624 008c BD46     		mov	sp, r7
 9625              		.cfi_def_cfa_register 13
 9626              		@ sp needed
 9627 008e 80BD     		pop	{r7, pc}
 9628              		.cfi_endproc
 9629              	.LFE40:
 9631              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 9632              		.align	2
 9633              		.global	promisc_recover_hop_increment
 9634              		.thumb
ARM GAS  /tmp/cc6bdJLE.s 			page 213


 9635              		.thumb_func
 9637              	promisc_recover_hop_increment:
 9638              	.LFB41:
2502:bluetooth_rxtx.c **** 
2503:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2504:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2505:bluetooth_rxtx.c **** 
2506:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 9639              		.loc 1 2506 0
 9640              		.cfi_startproc
 9641              		@ args = 0, pretend = 0, frame = 16
 9642              		@ frame_needed = 1, uses_anonymous_args = 0
 9643 0000 80B5     		push	{r7, lr}
 9644              		.cfi_def_cfa_offset 8
 9645              		.cfi_offset 7, -8
 9646              		.cfi_offset 14, -4
 9647 0002 84B0     		sub	sp, sp, #16
 9648              		.cfi_def_cfa_offset 24
 9649 0004 00AF     		add	r7, sp, #0
 9650              		.cfi_def_cfa_register 7
 9651 0006 7860     		str	r0, [r7, #4]
2507:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2508:bluetooth_rxtx.c **** 	if (channel == 2404) {
 9652              		.loc 1 2508 0
 9653 0008 554B     		ldr	r3, .L496
 9654 000a 1B88     		ldrh	r3, [r3]	@ movhi
 9655 000c 9BB2     		uxth	r3, r3
 9656 000e 40F66412 		movw	r2, #2404
 9657 0012 9342     		cmp	r3, r2
 9658 0014 14D1     		bne	.L490
2509:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 9659              		.loc 1 2509 0
 9660 0016 534B     		ldr	r3, .L496+4
 9661 0018 1B68     		ldr	r3, [r3]
 9662 001a C3F31303 		ubfx	r3, r3, #0, #20
 9663 001e 40F63542 		movw	r2, #3125
 9664 0022 02FB03F2 		mul	r2, r2, r3
 9665 0026 504B     		ldr	r3, .L496+8
 9666 0028 1B68     		ldr	r3, [r3]
 9667 002a 1344     		add	r3, r3, r2
 9668 002c 4F4A     		ldr	r2, .L496+12
 9669 002e 1360     		str	r3, [r2]
2510:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 9670              		.loc 1 2510 0
 9671 0030 4F4B     		ldr	r3, .L496+16
 9672 0032 40F66612 		movw	r2, #2406
 9673 0036 1A80     		strh	r2, [r3]	@ movhi
2511:bluetooth_rxtx.c **** 		do_hop = 1;
 9674              		.loc 1 2511 0
 9675 0038 4E4B     		ldr	r3, .L496+20
 9676 003a 0122     		movs	r2, #1
 9677 003c 1A70     		strb	r2, [r3]
 9678 003e 8BE0     		b	.L489
 9679              	.L490:
2512:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 9680              		.loc 1 2512 0
 9681 0040 474B     		ldr	r3, .L496
ARM GAS  /tmp/cc6bdJLE.s 			page 214


 9682 0042 1B88     		ldrh	r3, [r3]	@ movhi
 9683 0044 9BB2     		uxth	r3, r3
 9684 0046 40F66612 		movw	r2, #2406
 9685 004a 9342     		cmp	r3, r2
 9686 004c 7DD1     		bne	.L492
 9687              	.LBB21:
2513:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 9688              		.loc 1 2513 0
 9689 004e 454B     		ldr	r3, .L496+4
 9690 0050 1B68     		ldr	r3, [r3]
 9691 0052 C3F31303 		ubfx	r3, r3, #0, #20
 9692 0056 40F63542 		movw	r2, #3125
 9693 005a 02FB03F2 		mul	r2, r2, r3
 9694 005e 424B     		ldr	r3, .L496+8
 9695 0060 1B68     		ldr	r3, [r3]
 9696 0062 1344     		add	r3, r3, r2
 9697 0064 FB60     		str	r3, [r7, #12]
2514:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 9698              		.loc 1 2514 0
 9699 0066 414B     		ldr	r3, .L496+12
 9700 0068 1B68     		ldr	r3, [r3]
 9701 006a FA68     		ldr	r2, [r7, #12]
 9702 006c 9A42     		cmp	r2, r3
 9703 006e 05D2     		bcs	.L493
2515:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 9704              		.loc 1 2515 0
 9705 0070 FB68     		ldr	r3, [r7, #12]
 9706 0072 03F14343 		add	r3, r3, #-1023410176
 9707 0076 03F5A003 		add	r3, r3, #5242880
 9708 007a FB60     		str	r3, [r7, #12]
 9709              	.L493:
2516:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2517:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 9710              		.loc 1 2517 0
 9711 007c 3B4B     		ldr	r3, .L496+12
 9712 007e 1B68     		ldr	r3, [r3]
 9713 0080 FA68     		ldr	r2, [r7, #12]
 9714 0082 D21A     		subs	r2, r2, r3
 9715 0084 3C4B     		ldr	r3, .L496+24
 9716 0086 DB8B     		ldrh	r3, [r3, #30]
 9717 0088 1946     		mov	r1, r3
 9718 008a 43F2D403 		movw	r3, #12500
 9719 008e 03FB01F3 		mul	r3, r3, r1
 9720 0092 D90F     		lsrs	r1, r3, #31
 9721 0094 0B44     		add	r3, r3, r1
 9722 0096 5B10     		asrs	r3, r3, #1
 9723 0098 1344     		add	r3, r3, r2
 9724 009a 374A     		ldr	r2, .L496+24
 9725 009c D28B     		ldrh	r2, [r2, #30]
 9726 009e 1146     		mov	r1, r2
 9727 00a0 43F2D402 		movw	r2, #12500
 9728 00a4 02FB01F2 		mul	r2, r2, r1
 9729 00a8 B3FBF2F3 		udiv	r3, r3, r2
 9730 00ac BB60     		str	r3, [r7, #8]
2518:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2519:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 9731              		.loc 1 2519 0
ARM GAS  /tmp/cc6bdJLE.s 			page 215


 9732 00ae BB68     		ldr	r3, [r7, #8]
 9733 00b0 242B     		cmp	r3, #36
 9734 00b2 42D8     		bhi	.L494
2520:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2521:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 9735              		.loc 1 2521 0
 9736 00b4 314A     		ldr	r2, .L496+28
 9737 00b6 BB68     		ldr	r3, [r7, #8]
 9738 00b8 1344     		add	r3, r3, r2
 9739 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9740 00bc 2E4B     		ldr	r3, .L496+24
 9741 00be 9A75     		strb	r2, [r3, #22]
2522:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 9742              		.loc 1 2522 0
 9743 00c0 2D4B     		ldr	r3, .L496+24
 9744 00c2 DB8B     		ldrh	r3, [r3, #30]
 9745 00c4 5B08     		lsrs	r3, r3, #1
 9746 00c6 9AB2     		uxth	r2, r3
 9747 00c8 2B4B     		ldr	r3, .L496+24
 9748 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2523:bluetooth_rxtx.c **** 			le.conn_count = 0;
 9749              		.loc 1 2523 0
 9750 00cc 2A4B     		ldr	r3, .L496+24
 9751 00ce 0022     		movs	r2, #0
 9752 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2524:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 9753              		.loc 1 2524 0
 9754 00d2 294B     		ldr	r3, .L496+24
 9755 00d4 0022     		movs	r2, #0
 9756 00d6 9A61     		str	r2, [r3, #24]
2525:bluetooth_rxtx.c **** 			do_hop = 0;
 9757              		.loc 1 2525 0
 9758 00d8 264B     		ldr	r3, .L496+20
 9759 00da 0022     		movs	r2, #0
 9760 00dc 1A70     		strb	r2, [r3]
2526:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2527:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 9761              		.loc 1 2527 0
 9762 00de 264B     		ldr	r3, .L496+24
 9763 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 9764 00e2 5A1C     		adds	r2, r3, #1
 9765 00e4 264B     		ldr	r3, .L496+32
 9766 00e6 82FB0301 		smull	r0, r1, r2, r3
 9767 00ea 5318     		adds	r3, r2, r1
 9768 00ec 5911     		asrs	r1, r3, #5
 9769 00ee D317     		asrs	r3, r2, #31
 9770 00f0 C91A     		subs	r1, r1, r3
 9771 00f2 0B46     		mov	r3, r1
 9772 00f4 DB00     		lsls	r3, r3, #3
 9773 00f6 0B44     		add	r3, r3, r1
 9774 00f8 9B00     		lsls	r3, r3, #2
 9775 00fa 0B44     		add	r3, r3, r1
 9776 00fc D11A     		subs	r1, r2, r3
 9777 00fe CAB2     		uxtb	r2, r1
 9778 0100 1D4B     		ldr	r3, .L496+24
 9779 0102 5A75     		strb	r2, [r3, #21]
2528:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
ARM GAS  /tmp/cc6bdJLE.s 			page 216


 9780              		.loc 1 2528 0
 9781 0104 1C4B     		ldr	r3, .L496+24
 9782 0106 0322     		movs	r2, #3
 9783 0108 1A75     		strb	r2, [r3, #20]
2529:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9784              		.loc 1 2529 0
 9785 010a 1B4B     		ldr	r3, .L496+24
 9786 010c 0022     		movs	r2, #0
 9787 010e 1A61     		str	r2, [r3, #16]
2530:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 9788              		.loc 1 2530 0
 9789 0110 1C4B     		ldr	r3, .L496+36
 9790 0112 0322     		movs	r2, #3
 9791 0114 1A70     		strb	r2, [r3]
2531:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 9792              		.loc 1 2531 0
 9793 0116 1C4B     		ldr	r3, .L496+40
 9794 0118 1C4A     		ldr	r2, .L496+44
 9795 011a 1A60     		str	r2, [r3]
2532:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 9796              		.loc 1 2532 0
 9797 011c 0320     		movs	r0, #3
 9798 011e 1C49     		ldr	r1, .L496+48
 9799 0120 0122     		movs	r2, #1
 9800 0122 FFF7FEFF 		bl	le_promisc_state
2533:bluetooth_rxtx.c **** 
2534:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 9801              		.loc 1 2534 0
 9802 0126 1B4B     		ldr	r3, .L496+52
 9803 0128 1B78     		ldrb	r3, [r3]
 9804 012a DBB2     		uxtb	r3, r3
 9805 012c 002B     		cmp	r3, #0
 9806 012e 03D0     		beq	.L495
2535:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 9807              		.loc 1 2535 0
 9808 0130 194B     		ldr	r3, .L496+56
 9809 0132 2822     		movs	r2, #40
 9810 0134 1A60     		str	r2, [r3]
2536:bluetooth_rxtx.c **** 
2537:bluetooth_rxtx.c **** 			return;
 9811              		.loc 1 2537 0
 9812 0136 0FE0     		b	.L489
 9813              	.L495:
 9814 0138 0EE0     		b	.L489
 9815              	.L494:
2538:bluetooth_rxtx.c **** 		}
2539:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 9816              		.loc 1 2539 0
 9817 013a 0D4B     		ldr	r3, .L496+16
 9818 013c 40F66412 		movw	r2, #2404
 9819 0140 1A80     		strh	r2, [r3]	@ movhi
2540:bluetooth_rxtx.c **** 		do_hop = 1;
 9820              		.loc 1 2540 0
 9821 0142 0C4B     		ldr	r3, .L496+20
 9822 0144 0122     		movs	r2, #1
 9823 0146 1A70     		strb	r2, [r3]
 9824              	.LBE21:
ARM GAS  /tmp/cc6bdJLE.s 			page 217


 9825 0148 06E0     		b	.L489
 9826              	.L492:
2541:bluetooth_rxtx.c **** 	}
2542:bluetooth_rxtx.c **** 	else {
2543:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 9827              		.loc 1 2543 0
 9828 014a 094B     		ldr	r3, .L496+16
 9829 014c 40F66412 		movw	r2, #2404
 9830 0150 1A80     		strh	r2, [r3]	@ movhi
2544:bluetooth_rxtx.c **** 		do_hop = 1;
 9831              		.loc 1 2544 0
 9832 0152 084B     		ldr	r3, .L496+20
 9833 0154 0122     		movs	r2, #1
 9834 0156 1A70     		strb	r2, [r3]
 9835              	.L489:
2545:bluetooth_rxtx.c **** 	}
2546:bluetooth_rxtx.c **** }
 9836              		.loc 1 2546 0
 9837 0158 1037     		adds	r7, r7, #16
 9838              		.cfi_def_cfa_offset 8
 9839 015a BD46     		mov	sp, r7
 9840              		.cfi_def_cfa_register 13
 9841              		@ sp needed
 9842 015c 80BD     		pop	{r7, pc}
 9843              	.L497:
 9844 015e 00BF     		.align	2
 9845              	.L496:
 9846 0160 00000000 		.word	channel
 9847 0164 00000000 		.word	clkn
 9848 0168 08400040 		.word	1073758216
 9849 016c D8000000 		.word	first_ts.4922
 9850 0170 00000000 		.word	hop_direct_channel
 9851 0174 00000000 		.word	do_hop
 9852 0178 00000000 		.word	le
 9853 017c E8000000 		.word	hop_interval_lut
 9854 0180 A7C867DD 		.word	-580400985
 9855 0184 00000000 		.word	hop_mode
 9856 0188 00000000 		.word	packet_cb
 9857 018c 00000000 		.word	connection_follow_cb
 9858 0190 16000000 		.word	le+22
 9859 0194 00000000 		.word	jam_mode
 9860 0198 00000000 		.word	le_jam_count
 9861              		.cfi_endproc
 9862              	.LFE41:
 9864              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 9865              		.align	2
 9866              		.global	promisc_recover_hop_interval
 9867              		.thumb
 9868              		.thumb_func
 9870              	promisc_recover_hop_interval:
 9871              	.LFB42:
2547:bluetooth_rxtx.c **** 
2548:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 9872              		.loc 1 2548 0
 9873              		.cfi_startproc
 9874              		@ args = 0, pretend = 0, frame = 24
 9875              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cc6bdJLE.s 			page 218


 9876 0000 80B5     		push	{r7, lr}
 9877              		.cfi_def_cfa_offset 8
 9878              		.cfi_offset 7, -8
 9879              		.cfi_offset 14, -4
 9880 0002 86B0     		sub	sp, sp, #24
 9881              		.cfi_def_cfa_offset 32
 9882 0004 00AF     		add	r7, sp, #0
 9883              		.cfi_def_cfa_register 7
 9884 0006 7860     		str	r0, [r7, #4]
2549:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2550:bluetooth_rxtx.c **** 
2551:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 9885              		.loc 1 2551 0
 9886 0008 334B     		ldr	r3, .L506
 9887 000a 1B68     		ldr	r3, [r3]
 9888 000c C3F31303 		ubfx	r3, r3, #0, #20
 9889 0010 40F63542 		movw	r2, #3125
 9890 0014 02FB03F2 		mul	r2, r2, r3
 9891 0018 304B     		ldr	r3, .L506+4
 9892 001a 1B68     		ldr	r3, [r3]
 9893 001c 1344     		add	r3, r3, r2
 9894 001e 7B61     		str	r3, [r7, #20]
2552:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 9895              		.loc 1 2552 0
 9896 0020 2F4B     		ldr	r3, .L506+8
 9897 0022 1B68     		ldr	r3, [r3]
 9898 0024 7A69     		ldr	r2, [r7, #20]
 9899 0026 9A42     		cmp	r2, r3
 9900 0028 03D2     		bcs	.L499
2553:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 9901              		.loc 1 2553 0
 9902 002a 7A69     		ldr	r2, [r7, #20]
 9903 002c 2D4B     		ldr	r3, .L506+12
 9904 002e 1344     		add	r3, r3, r2
 9905 0030 7B61     		str	r3, [r7, #20]
 9906              	.L499:
2554:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 9907              		.loc 1 2554 0
 9908 0032 2B4B     		ldr	r3, .L506+8
 9909 0034 1B68     		ldr	r3, [r3]
 9910 0036 7A69     		ldr	r2, [r7, #20]
 9911 0038 D31A     		subs	r3, r2, r3
 9912 003a 3B61     		str	r3, [r7, #16]
2555:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2556:bluetooth_rxtx.c **** 
2557:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2558:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 9913              		.loc 1 2558 0
 9914 003c 3B69     		ldr	r3, [r7, #16]
 9915 003e 46F2A712 		movw	r2, #24999
 9916 0042 9342     		cmp	r3, r2
 9917 0044 00D8     		bhi	.L500
2559:bluetooth_rxtx.c **** 		return;
 9918              		.loc 1 2559 0
 9919 0046 43E0     		b	.L498
 9920              	.L500:
2560:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cc6bdJLE.s 			page 219


2561:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 9921              		.loc 1 2561 0
 9922 0048 274B     		ldr	r3, .L506+16
 9923 004a D3F80021 		ldr	r2, [r3, #256]
 9924 004e 3B69     		ldr	r3, [r7, #16]
 9925 0050 9A42     		cmp	r2, r3
 9926 0052 03D9     		bls	.L502
2562:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 9927              		.loc 1 2562 0
 9928 0054 244A     		ldr	r2, .L506+16
 9929 0056 3B69     		ldr	r3, [r7, #16]
 9930 0058 C2F80031 		str	r3, [r2, #256]
 9931              	.L502:
2563:bluetooth_rxtx.c **** 
2564:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 9932              		.loc 1 2564 0
 9933 005c 224B     		ldr	r3, .L506+16
 9934 005e D3F80031 		ldr	r3, [r3, #256]
 9935 0062 03F56133 		add	r3, r3, #230400
 9936 0066 03F25233 		addw	r3, r3, #850
 9937 006a 204A     		ldr	r2, .L506+20
 9938 006c A2FB0323 		umull	r2, r3, r2, r3
 9939 0070 9B0C     		lsrs	r3, r3, #18
 9940 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2565:bluetooth_rxtx.c **** 
2566:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 9941              		.loc 1 2566 0
 9942 0074 1E4B     		ldr	r3, .L506+24
 9943 0076 DB8B     		ldrh	r3, [r3, #30]
 9944 0078 FA89     		ldrh	r2, [r7, #14]
 9945 007a 9A42     		cmp	r2, r3
 9946 007c 1ED1     		bne	.L503
2567:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2568:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 9947              		.loc 1 2568 0
 9948 007e 1A4B     		ldr	r3, .L506+16
 9949 0080 D3F80431 		ldr	r3, [r3, #260]
 9950 0084 0133     		adds	r3, r3, #1
 9951 0086 184A     		ldr	r2, .L506+16
 9952 0088 C2F80431 		str	r3, [r2, #260]
2569:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 9953              		.loc 1 2569 0
 9954 008c 164B     		ldr	r3, .L506+16
 9955 008e D3F80431 		ldr	r3, [r3, #260]
 9956 0092 052B     		cmp	r3, #5
 9957 0094 19D1     		bne	.L505
2570:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 9958              		.loc 1 2570 0
 9959 0096 174B     		ldr	r3, .L506+28
 9960 0098 174A     		ldr	r2, .L506+32
 9961 009a 1A60     		str	r2, [r3]
2571:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 9962              		.loc 1 2571 0
 9963 009c 174B     		ldr	r3, .L506+36
 9964 009e 40F66412 		movw	r2, #2404
 9965 00a2 1A80     		strh	r2, [r3]	@ movhi
2572:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
ARM GAS  /tmp/cc6bdJLE.s 			page 220


 9966              		.loc 1 2572 0
 9967 00a4 164B     		ldr	r3, .L506+40
 9968 00a6 0422     		movs	r2, #4
 9969 00a8 1A70     		strb	r2, [r3]
2573:bluetooth_rxtx.c **** 			do_hop = 1;
 9970              		.loc 1 2573 0
 9971 00aa 164B     		ldr	r3, .L506+44
 9972 00ac 0122     		movs	r2, #1
 9973 00ae 1A70     		strb	r2, [r3]
2574:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 9974              		.loc 1 2574 0
 9975 00b0 0220     		movs	r0, #2
 9976 00b2 1549     		ldr	r1, .L506+48
 9977 00b4 0222     		movs	r2, #2
 9978 00b6 FFF7FEFF 		bl	le_promisc_state
 9979 00ba 06E0     		b	.L505
 9980              	.L503:
2575:bluetooth_rxtx.c **** 		}
2576:bluetooth_rxtx.c **** 	} else {
2577:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 9981              		.loc 1 2577 0
 9982 00bc 0C4A     		ldr	r2, .L506+24
 9983 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 9984 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2578:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 9985              		.loc 1 2578 0
 9986 00c2 094B     		ldr	r3, .L506+16
 9987 00c4 0022     		movs	r2, #0
 9988 00c6 C3F80421 		str	r2, [r3, #260]
 9989              	.L505:
2579:bluetooth_rxtx.c **** 	}
2580:bluetooth_rxtx.c **** 
2581:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 9990              		.loc 1 2581 0
 9991 00ca 054A     		ldr	r2, .L506+8
 9992 00cc 7B69     		ldr	r3, [r7, #20]
 9993 00ce 1360     		str	r3, [r2]
 9994              	.L498:
2582:bluetooth_rxtx.c **** }
 9995              		.loc 1 2582 0
 9996 00d0 1837     		adds	r7, r7, #24
 9997              		.cfi_def_cfa_offset 8
 9998 00d2 BD46     		mov	sp, r7
 9999              		.cfi_def_cfa_register 13
 10000              		@ sp needed
 10001 00d4 80BD     		pop	{r7, pc}
 10002              	.L507:
 10003 00d6 00BF     		.align	2
 10004              	.L506:
 10005 00d8 00000000 		.word	clkn
 10006 00dc 08400040 		.word	1073758216
 10007 00e0 DC000000 		.word	prev_clk.4928
 10008 00e4 C0ABC6C2 		.word	-1027167296
 10009 00e8 00000000 		.word	le_promisc
 10010 00ec C1A91991 		.word	-1860589119
 10011 00f0 00000000 		.word	le
 10012 00f4 00000000 		.word	packet_cb
ARM GAS  /tmp/cc6bdJLE.s 			page 221


 10013 00f8 00000000 		.word	promisc_recover_hop_increment
 10014 00fc 00000000 		.word	hop_direct_channel
 10015 0100 00000000 		.word	hop_mode
 10016 0104 00000000 		.word	do_hop
 10017 0108 1E000000 		.word	le+30
 10018              		.cfi_endproc
 10019              	.LFE42:
 10021              		.section	.text.promisc_follow_cb,"ax",%progbits
 10022              		.align	2
 10023              		.global	promisc_follow_cb
 10024              		.thumb
 10025              		.thumb_func
 10027              	promisc_follow_cb:
 10028              	.LFB43:
2583:bluetooth_rxtx.c **** 
2584:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 10029              		.loc 1 2584 0
 10030              		.cfi_startproc
 10031              		@ args = 0, pretend = 0, frame = 16
 10032              		@ frame_needed = 1, uses_anonymous_args = 0
 10033 0000 80B5     		push	{r7, lr}
 10034              		.cfi_def_cfa_offset 8
 10035              		.cfi_offset 7, -8
 10036              		.cfi_offset 14, -4
 10037 0002 84B0     		sub	sp, sp, #16
 10038              		.cfi_def_cfa_offset 24
 10039 0004 00AF     		add	r7, sp, #0
 10040              		.cfi_def_cfa_register 7
 10041 0006 7860     		str	r0, [r7, #4]
2585:bluetooth_rxtx.c **** 	int i;
2586:bluetooth_rxtx.c **** 
2587:bluetooth_rxtx.c **** 	// get the CRCInit
2588:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 10042              		.loc 1 2588 0
 10043 0008 284B     		ldr	r3, .L512
 10044 000a 1B69     		ldr	r3, [r3, #16]
 10045 000c 002B     		cmp	r3, #0
 10046 000e 49D1     		bne	.L508
 10047              		.loc 1 2588 0 is_stmt 0 discriminator 1
 10048 0010 7B68     		ldr	r3, [r7, #4]
 10049 0012 0433     		adds	r3, r3, #4
 10050 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10051 0016 012B     		cmp	r3, #1
 10052 0018 44D1     		bne	.L508
 10053              		.loc 1 2588 0 discriminator 2
 10054 001a 7B68     		ldr	r3, [r7, #4]
 10055 001c 0533     		adds	r3, r3, #5
 10056 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10057 0020 002B     		cmp	r3, #0
 10058 0022 3FD1     		bne	.L508
 10059              	.LBB22:
2589:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 10060              		.loc 1 2589 0 is_stmt 1
 10061 0024 7B68     		ldr	r3, [r7, #4]
 10062 0026 0833     		adds	r3, r3, #8
 10063 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10064 002a 1A04     		lsls	r2, r3, #16
ARM GAS  /tmp/cc6bdJLE.s 			page 222


 10065 002c 7B68     		ldr	r3, [r7, #4]
 10066 002e 0733     		adds	r3, r3, #7
 10067 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10068 0032 1B02     		lsls	r3, r3, #8
 10069 0034 1343     		orrs	r3, r3, r2
 10070 0036 7A68     		ldr	r2, [r7, #4]
 10071 0038 0632     		adds	r2, r2, #6
 10072 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 10073 003c 1343     		orrs	r3, r3, r2
 10074 003e BB60     		str	r3, [r7, #8]
2590:bluetooth_rxtx.c **** 
2591:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 10075              		.loc 1 2591 0
 10076 0040 7B68     		ldr	r3, [r7, #4]
 10077 0042 0433     		adds	r3, r3, #4
 10078 0044 B868     		ldr	r0, [r7, #8]
 10079 0046 1946     		mov	r1, r3
 10080 0048 0222     		movs	r2, #2
 10081 004a FFF7FEFF 		bl	btle_reverse_crc
 10082 004e 0246     		mov	r2, r0
 10083 0050 164B     		ldr	r3, .L512
 10084 0052 9A60     		str	r2, [r3, #8]
2592:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 10085              		.loc 1 2592 0
 10086 0054 154B     		ldr	r3, .L512
 10087 0056 0022     		movs	r2, #0
 10088 0058 DA60     		str	r2, [r3, #12]
2593:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 10089              		.loc 1 2593 0
 10090 005a 0023     		movs	r3, #0
 10091 005c FB60     		str	r3, [r7, #12]
 10092 005e 13E0     		b	.L510
 10093              	.L511:
2594:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 10094              		.loc 1 2594 0 discriminator 3
 10095 0060 124B     		ldr	r3, .L512
 10096 0062 DA68     		ldr	r2, [r3, #12]
 10097 0064 114B     		ldr	r3, .L512
 10098 0066 9968     		ldr	r1, [r3, #8]
 10099 0068 FB68     		ldr	r3, [r7, #12]
 10100 006a 21FA03F3 		lsr	r3, r1, r3
 10101 006e 03F00101 		and	r1, r3, #1
 10102 0072 FB68     		ldr	r3, [r7, #12]
 10103 0074 C3F11703 		rsb	r3, r3, #23
 10104 0078 01FA03F3 		lsl	r3, r1, r3
 10105 007c 1343     		orrs	r3, r3, r2
 10106 007e 0B4A     		ldr	r2, .L512
 10107 0080 D360     		str	r3, [r2, #12]
2593:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 10108              		.loc 1 2593 0 discriminator 3
 10109 0082 FB68     		ldr	r3, [r7, #12]
 10110 0084 0133     		adds	r3, r3, #1
 10111 0086 FB60     		str	r3, [r7, #12]
 10112              	.L510:
2593:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 10113              		.loc 1 2593 0 is_stmt 0 discriminator 1
 10114 0088 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/cc6bdJLE.s 			page 223


 10115 008a 172B     		cmp	r3, #23
 10116 008c E8DD     		ble	.L511
2595:bluetooth_rxtx.c **** 
2596:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 10117              		.loc 1 2596 0 is_stmt 1
 10118 008e 074B     		ldr	r3, .L512
 10119 0090 0122     		movs	r2, #1
 10120 0092 1A61     		str	r2, [r3, #16]
2597:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 10121              		.loc 1 2597 0
 10122 0094 064B     		ldr	r3, .L512+4
 10123 0096 074A     		ldr	r2, .L512+8
 10124 0098 1A60     		str	r2, [r3]
2598:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 10125              		.loc 1 2598 0
 10126 009a 0120     		movs	r0, #1
 10127 009c 0649     		ldr	r1, .L512+12
 10128 009e 0322     		movs	r2, #3
 10129 00a0 FFF7FEFF 		bl	le_promisc_state
 10130              	.L508:
 10131              	.LBE22:
2599:bluetooth_rxtx.c **** 	}
2600:bluetooth_rxtx.c **** }
 10132              		.loc 1 2600 0
 10133 00a4 1037     		adds	r7, r7, #16
 10134              		.cfi_def_cfa_offset 8
 10135 00a6 BD46     		mov	sp, r7
 10136              		.cfi_def_cfa_register 13
 10137              		@ sp needed
 10138 00a8 80BD     		pop	{r7, pc}
 10139              	.L513:
 10140 00aa 00BF     		.align	2
 10141              	.L512:
 10142 00ac 00000000 		.word	le
 10143 00b0 00000000 		.word	packet_cb
 10144 00b4 00000000 		.word	promisc_recover_hop_interval
 10145 00b8 08000000 		.word	le+8
 10146              		.cfi_endproc
 10147              	.LFE43:
 10149              		.section	.text.see_aa,"ax",%progbits
 10150              		.align	2
 10151              		.global	see_aa
 10152              		.thumb
 10153              		.thumb_func
 10155              	see_aa:
 10156              	.LFB44:
2601:bluetooth_rxtx.c **** 
2602:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2603:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 10157              		.loc 1 2603 0
 10158              		.cfi_startproc
 10159              		@ args = 0, pretend = 0, frame = 24
 10160              		@ frame_needed = 1, uses_anonymous_args = 0
 10161              		@ link register save eliminated.
 10162 0000 80B4     		push	{r7}
 10163              		.cfi_def_cfa_offset 4
 10164              		.cfi_offset 7, -4
ARM GAS  /tmp/cc6bdJLE.s 			page 224


 10165 0002 87B0     		sub	sp, sp, #28
 10166              		.cfi_def_cfa_offset 32
 10167 0004 00AF     		add	r7, sp, #0
 10168              		.cfi_def_cfa_register 7
 10169 0006 7860     		str	r0, [r7, #4]
2604:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 10170              		.loc 1 2604 0
 10171 0008 4FF0FF33 		mov	r3, #-1
 10172 000c 3B61     		str	r3, [r7, #16]
 10173 000e 4FF0FF33 		mov	r3, #-1
 10174 0012 FB60     		str	r3, [r7, #12]
2605:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 10175              		.loc 1 2605 0
 10176 0014 0023     		movs	r3, #0
 10177 0016 7B61     		str	r3, [r7, #20]
 10178 0018 15E0     		b	.L515
 10179              	.L518:
2606:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 10180              		.loc 1 2606 0
 10181 001a 224A     		ldr	r2, .L523
 10182 001c 7B69     		ldr	r3, [r7, #20]
 10183 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 10184 0022 7B68     		ldr	r3, [r7, #4]
 10185 0024 9A42     		cmp	r2, r3
 10186 0026 0BD1     		bne	.L516
2607:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 10187              		.loc 1 2607 0
 10188 0028 1E4A     		ldr	r2, .L523
 10189 002a 7B69     		ldr	r3, [r7, #20]
 10190 002c DB00     		lsls	r3, r3, #3
 10191 002e 1344     		add	r3, r3, r2
 10192 0030 5B68     		ldr	r3, [r3, #4]
 10193 0032 5A1C     		adds	r2, r3, #1
 10194 0034 1B49     		ldr	r1, .L523
 10195 0036 7B69     		ldr	r3, [r7, #20]
 10196 0038 DB00     		lsls	r3, r3, #3
 10197 003a 0B44     		add	r3, r3, r1
 10198 003c 5A60     		str	r2, [r3, #4]
2608:bluetooth_rxtx.c **** 			return;
 10199              		.loc 1 2608 0
 10200 003e 2CE0     		b	.L514
 10201              	.L516:
2605:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 10202              		.loc 1 2605 0 discriminator 2
 10203 0040 7B69     		ldr	r3, [r7, #20]
 10204 0042 0133     		adds	r3, r3, #1
 10205 0044 7B61     		str	r3, [r7, #20]
 10206              	.L515:
2605:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 10207              		.loc 1 2605 0 is_stmt 0 discriminator 1
 10208 0046 7B69     		ldr	r3, [r7, #20]
 10209 0048 1F2B     		cmp	r3, #31
 10210 004a E6DD     		ble	.L518
2609:bluetooth_rxtx.c **** 		}
2610:bluetooth_rxtx.c **** 
2611:bluetooth_rxtx.c **** 	// evict someone
2612:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
ARM GAS  /tmp/cc6bdJLE.s 			page 225


 10211              		.loc 1 2612 0 is_stmt 1
 10212 004c 0023     		movs	r3, #0
 10213 004e 7B61     		str	r3, [r7, #20]
 10214 0050 15E0     		b	.L519
 10215              	.L522:
2613:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 10216              		.loc 1 2613 0
 10217 0052 144A     		ldr	r2, .L523
 10218 0054 7B69     		ldr	r3, [r7, #20]
 10219 0056 DB00     		lsls	r3, r3, #3
 10220 0058 1344     		add	r3, r3, r2
 10221 005a 5A68     		ldr	r2, [r3, #4]
 10222 005c 3B69     		ldr	r3, [r7, #16]
 10223 005e 9A42     		cmp	r2, r3
 10224 0060 02DB     		blt	.L520
 10225              		.loc 1 2613 0 is_stmt 0 discriminator 1
 10226 0062 3B69     		ldr	r3, [r7, #16]
 10227 0064 002B     		cmp	r3, #0
 10228 0066 07DA     		bge	.L521
 10229              	.L520:
2614:bluetooth_rxtx.c **** 			killme = i;
 10230              		.loc 1 2614 0 is_stmt 1
 10231 0068 7B69     		ldr	r3, [r7, #20]
 10232 006a FB60     		str	r3, [r7, #12]
2615:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 10233              		.loc 1 2615 0
 10234 006c 0D4A     		ldr	r2, .L523
 10235 006e 7B69     		ldr	r3, [r7, #20]
 10236 0070 DB00     		lsls	r3, r3, #3
 10237 0072 1344     		add	r3, r3, r2
 10238 0074 5B68     		ldr	r3, [r3, #4]
 10239 0076 3B61     		str	r3, [r7, #16]
 10240              	.L521:
2612:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 10241              		.loc 1 2612 0 discriminator 2
 10242 0078 7B69     		ldr	r3, [r7, #20]
 10243 007a 0133     		adds	r3, r3, #1
 10244 007c 7B61     		str	r3, [r7, #20]
 10245              	.L519:
2612:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 10246              		.loc 1 2612 0 is_stmt 0 discriminator 1
 10247 007e 7B69     		ldr	r3, [r7, #20]
 10248 0080 1F2B     		cmp	r3, #31
 10249 0082 E6DD     		ble	.L522
2616:bluetooth_rxtx.c **** 		}
2617:bluetooth_rxtx.c **** 
2618:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 10250              		.loc 1 2618 0 is_stmt 1
 10251 0084 0749     		ldr	r1, .L523
 10252 0086 FB68     		ldr	r3, [r7, #12]
 10253 0088 7A68     		ldr	r2, [r7, #4]
 10254 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2619:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 10255              		.loc 1 2619 0
 10256 008e 054A     		ldr	r2, .L523
 10257 0090 FB68     		ldr	r3, [r7, #12]
 10258 0092 DB00     		lsls	r3, r3, #3
ARM GAS  /tmp/cc6bdJLE.s 			page 226


 10259 0094 1344     		add	r3, r3, r2
 10260 0096 0122     		movs	r2, #1
 10261 0098 5A60     		str	r2, [r3, #4]
 10262              	.L514:
2620:bluetooth_rxtx.c **** }
 10263              		.loc 1 2620 0
 10264 009a 1C37     		adds	r7, r7, #28
 10265              		.cfi_def_cfa_offset 4
 10266 009c BD46     		mov	sp, r7
 10267              		.cfi_def_cfa_register 13
 10268              		@ sp needed
 10269 009e 5DF8047B 		ldr	r7, [sp], #4
 10270              		.cfi_restore 7
 10271              		.cfi_def_cfa_offset 0
 10272 00a2 7047     		bx	lr
 10273              	.L524:
 10274              		.align	2
 10275              	.L523:
 10276 00a4 00000000 		.word	le_promisc
 10277              		.cfi_endproc
 10278              	.LFE44:
 10280              		.section	.rodata
 10281 08df 00       		.align	2
 10282              	.LC0:
 10283 08e0 01000000 		.word	1
 10284 08e4 01000000 		.word	1
 10285 08e8 01000000 		.word	1
 10286 08ec 01000000 		.word	1
 10287              		.section	.text.cb_le_promisc,"ax",%progbits
 10288              		.align	2
 10289              		.global	cb_le_promisc
 10290              		.thumb
 10291              		.thumb_func
 10293              	cb_le_promisc:
 10294              	.LFB45:
2621:bluetooth_rxtx.c **** 
2622:bluetooth_rxtx.c **** /* le promiscuous mode */
2623:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 10295              		.loc 1 2623 0
 10296              		.cfi_startproc
 10297              		@ args = 0, pretend = 0, frame = 128
 10298              		@ frame_needed = 1, uses_anonymous_args = 0
 10299 0000 90B5     		push	{r4, r7, lr}
 10300              		.cfi_def_cfa_offset 12
 10301              		.cfi_offset 4, -12
 10302              		.cfi_offset 7, -8
 10303              		.cfi_offset 14, -4
 10304 0002 A1B0     		sub	sp, sp, #132
 10305              		.cfi_def_cfa_offset 144
 10306 0004 00AF     		add	r7, sp, #0
 10307              		.cfi_def_cfa_register 7
 10308 0006 7860     		str	r0, [r7, #4]
2624:bluetooth_rxtx.c **** 	int i, j, k;
2625:bluetooth_rxtx.c **** 	int idx;
2626:bluetooth_rxtx.c **** 
2627:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2628:bluetooth_rxtx.c **** 	char desired[4][16] = {
ARM GAS  /tmp/cc6bdJLE.s 			page 227


 10309              		.loc 1 2628 0
 10310 0008 07F11C03 		add	r3, r7, #28
 10311 000c 4022     		movs	r2, #64
 10312 000e 1846     		mov	r0, r3
 10313 0010 0021     		movs	r1, #0
 10314 0012 FFF7FEFF 		bl	memset
 10315 0016 0123     		movs	r3, #1
 10316 0018 3B77     		strb	r3, [r7, #28]
 10317 001a 0123     		movs	r3, #1
 10318 001c 87F82C30 		strb	r3, [r7, #44]
 10319 0020 0123     		movs	r3, #1
 10320 0022 87F82F30 		strb	r3, [r7, #47]
 10321 0026 0123     		movs	r3, #1
 10322 0028 87F83C30 		strb	r3, [r7, #60]
 10323 002c 0123     		movs	r3, #1
 10324 002e 87F83E30 		strb	r3, [r7, #62]
 10325 0032 0123     		movs	r3, #1
 10326 0034 87F84C30 		strb	r3, [r7, #76]
 10327 0038 0123     		movs	r3, #1
 10328 003a 87F84E30 		strb	r3, [r7, #78]
 10329 003e 0123     		movs	r3, #1
 10330 0040 87F84F30 		strb	r3, [r7, #79]
2629:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2630:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2631:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2632:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2633:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2634:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2635:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2636:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2637:bluetooth_rxtx.c **** 	};
2638:bluetooth_rxtx.c **** 
2639:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 10331              		.loc 1 2639 0
 10332 0044 0023     		movs	r3, #0
 10333 0046 FB67     		str	r3, [r7, #124]
 10334 0048 41E0     		b	.L526
 10335              	.L529:
2640:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 10336              		.loc 1 2640 0
 10337 004a A54B     		ldr	r3, .L556
 10338 004c 1B88     		ldrh	r3, [r3]	@ movhi
 10339 004e 9BB2     		uxth	r3, r3
 10340 0050 DBB2     		uxtb	r3, r3
 10341 0052 623B     		subs	r3, r3, #98
 10342 0054 DBB2     		uxtb	r3, r3
 10343 0056 1846     		mov	r0, r3
 10344 0058 FFF7FEFF 		bl	btle_channel_index
 10345 005c 0346     		mov	r3, r0
 10346 005e 1A46     		mov	r2, r3
 10347 0060 A04B     		ldr	r3, .L556+4
 10348 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 10349 0064 3B67     		str	r3, [r7, #112]
2641:bluetooth_rxtx.c **** 
2642:bluetooth_rxtx.c **** 		// whiten the desired data
2643:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 10350              		.loc 1 2643 0
ARM GAS  /tmp/cc6bdJLE.s 			page 228


 10351 0066 0023     		movs	r3, #0
 10352 0068 BB67     		str	r3, [r7, #120]
 10353 006a 2AE0     		b	.L527
 10354              	.L528:
2644:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 10355              		.loc 1 2644 0 discriminator 3
 10356 006c FB6F     		ldr	r3, [r7, #124]
 10357 006e 1B01     		lsls	r3, r3, #4
 10358 0070 07F18002 		add	r2, r7, #128
 10359 0074 1A44     		add	r2, r2, r3
 10360 0076 BB6F     		ldr	r3, [r7, #120]
 10361 0078 1344     		add	r3, r3, r2
 10362 007a 643B     		subs	r3, r3, #100
 10363 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 10364 007e 9A49     		ldr	r1, .L556+8
 10365 0080 3B6F     		ldr	r3, [r7, #112]
 10366 0082 0B44     		add	r3, r3, r1
 10367 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10368 0086 5340     		eors	r3, r3, r2
 10369 0088 D9B2     		uxtb	r1, r3
 10370 008a FB6F     		ldr	r3, [r7, #124]
 10371 008c 1B01     		lsls	r3, r3, #4
 10372 008e 07F18002 		add	r2, r7, #128
 10373 0092 1A44     		add	r2, r2, r3
 10374 0094 BB6F     		ldr	r3, [r7, #120]
 10375 0096 1344     		add	r3, r3, r2
 10376 0098 643B     		subs	r3, r3, #100
 10377 009a 0A46     		mov	r2, r1
 10378 009c 1A70     		strb	r2, [r3]
2645:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 10379              		.loc 1 2645 0 discriminator 3
 10380 009e 3B6F     		ldr	r3, [r7, #112]
 10381 00a0 0133     		adds	r3, r3, #1
 10382 00a2 1946     		mov	r1, r3
 10383 00a4 914B     		ldr	r3, .L556+12
 10384 00a6 A1FB0323 		umull	r2, r3, r1, r3
 10385 00aa C81A     		subs	r0, r1, r3
 10386 00ac 4008     		lsrs	r0, r0, #1
 10387 00ae 0344     		add	r3, r3, r0
 10388 00b0 9A09     		lsrs	r2, r3, #6
 10389 00b2 1346     		mov	r3, r2
 10390 00b4 DB01     		lsls	r3, r3, #7
 10391 00b6 9B1A     		subs	r3, r3, r2
 10392 00b8 CA1A     		subs	r2, r1, r3
 10393 00ba 3A67     		str	r2, [r7, #112]
2643:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 10394              		.loc 1 2643 0 discriminator 3
 10395 00bc BB6F     		ldr	r3, [r7, #120]
 10396 00be 0133     		adds	r3, r3, #1
 10397 00c0 BB67     		str	r3, [r7, #120]
 10398              	.L527:
2643:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 10399              		.loc 1 2643 0 is_stmt 0 discriminator 1
 10400 00c2 BB6F     		ldr	r3, [r7, #120]
 10401 00c4 0F2B     		cmp	r3, #15
 10402 00c6 D1DD     		ble	.L528
2639:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
ARM GAS  /tmp/cc6bdJLE.s 			page 229


 10403              		.loc 1 2639 0 is_stmt 1 discriminator 2
 10404 00c8 FB6F     		ldr	r3, [r7, #124]
 10405 00ca 0133     		adds	r3, r3, #1
 10406 00cc FB67     		str	r3, [r7, #124]
 10407              	.L526:
2639:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 10408              		.loc 1 2639 0 is_stmt 0 discriminator 1
 10409 00ce FB6F     		ldr	r3, [r7, #124]
 10410 00d0 032B     		cmp	r3, #3
 10411 00d2 BADD     		ble	.L529
2646:bluetooth_rxtx.c **** 		}
2647:bluetooth_rxtx.c **** 	}
2648:bluetooth_rxtx.c **** 
2649:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2650:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 10412              		.loc 1 2650 0 is_stmt 1
 10413 00d4 2023     		movs	r3, #32
 10414 00d6 FB67     		str	r3, [r7, #124]
 10415 00d8 D0E0     		b	.L530
 10416              	.L550:
 10417              	.LBB23:
2651:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 10418              		.loc 1 2651 0
 10419 00da 854B     		ldr	r3, .L556+16
 10420 00dc 07F10C04 		add	r4, r7, #12
 10421 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 10422 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2652:bluetooth_rxtx.c **** 		int matching = -1;
 10423              		.loc 1 2652 0
 10424 00e6 4FF0FF33 		mov	r3, #-1
 10425 00ea FB66     		str	r3, [r7, #108]
2653:bluetooth_rxtx.c **** 
2654:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 10426              		.loc 1 2654 0
 10427 00ec 0023     		movs	r3, #0
 10428 00ee BB67     		str	r3, [r7, #120]
 10429 00f0 26E0     		b	.L531
 10430              	.L536:
2655:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 10431              		.loc 1 2655 0
 10432 00f2 0023     		movs	r3, #0
 10433 00f4 7B67     		str	r3, [r7, #116]
 10434 00f6 1DE0     		b	.L532
 10435              	.L535:
2656:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 10436              		.loc 1 2656 0
 10437 00f8 FA6F     		ldr	r2, [r7, #124]
 10438 00fa 7B6F     		ldr	r3, [r7, #116]
 10439 00fc 1344     		add	r3, r3, r2
 10440 00fe 1A46     		mov	r2, r3
 10441 0100 7B68     		ldr	r3, [r7, #4]
 10442 0102 1344     		add	r3, r3, r2
 10443 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 10444 0106 BB6F     		ldr	r3, [r7, #120]
 10445 0108 1B01     		lsls	r3, r3, #4
 10446 010a 07F18001 		add	r1, r7, #128
 10447 010e 1944     		add	r1, r1, r3
ARM GAS  /tmp/cc6bdJLE.s 			page 230


 10448 0110 7B6F     		ldr	r3, [r7, #116]
 10449 0112 0B44     		add	r3, r3, r1
 10450 0114 643B     		subs	r3, r3, #100
 10451 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10452 0118 9A42     		cmp	r2, r3
 10453 011a 08D0     		beq	.L533
2657:bluetooth_rxtx.c **** 					ok[j] = 0;
 10454              		.loc 1 2657 0
 10455 011c BB6F     		ldr	r3, [r7, #120]
 10456 011e 9B00     		lsls	r3, r3, #2
 10457 0120 07F18002 		add	r2, r7, #128
 10458 0124 1344     		add	r3, r3, r2
 10459 0126 0022     		movs	r2, #0
 10460 0128 43F8742C 		str	r2, [r3, #-116]
2658:bluetooth_rxtx.c **** 					break;
 10461              		.loc 1 2658 0
 10462 012c 05E0     		b	.L534
 10463              	.L533:
2655:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 10464              		.loc 1 2655 0 discriminator 2
 10465 012e 7B6F     		ldr	r3, [r7, #116]
 10466 0130 0133     		adds	r3, r3, #1
 10467 0132 7B67     		str	r3, [r7, #116]
 10468              	.L532:
2655:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 10469              		.loc 1 2655 0 is_stmt 0 discriminator 1
 10470 0134 7B6F     		ldr	r3, [r7, #116]
 10471 0136 0F2B     		cmp	r3, #15
 10472 0138 DEDD     		ble	.L535
 10473              	.L534:
2654:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 10474              		.loc 1 2654 0 is_stmt 1 discriminator 2
 10475 013a BB6F     		ldr	r3, [r7, #120]
 10476 013c 0133     		adds	r3, r3, #1
 10477 013e BB67     		str	r3, [r7, #120]
 10478              	.L531:
2654:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 10479              		.loc 1 2654 0 is_stmt 0 discriminator 1
 10480 0140 BB6F     		ldr	r3, [r7, #120]
 10481 0142 032B     		cmp	r3, #3
 10482 0144 D5DD     		ble	.L536
2659:bluetooth_rxtx.c **** 				}
2660:bluetooth_rxtx.c **** 			}
2661:bluetooth_rxtx.c **** 		}
2662:bluetooth_rxtx.c **** 
2663:bluetooth_rxtx.c **** 		// see if any match
2664:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 10483              		.loc 1 2664 0 is_stmt 1
 10484 0146 0023     		movs	r3, #0
 10485 0148 BB67     		str	r3, [r7, #120]
 10486 014a 0EE0     		b	.L537
 10487              	.L540:
2665:bluetooth_rxtx.c **** 			if (ok[j]) {
 10488              		.loc 1 2665 0
 10489 014c BB6F     		ldr	r3, [r7, #120]
 10490 014e 9B00     		lsls	r3, r3, #2
 10491 0150 07F18002 		add	r2, r7, #128
ARM GAS  /tmp/cc6bdJLE.s 			page 231


 10492 0154 1344     		add	r3, r3, r2
 10493 0156 53F8743C 		ldr	r3, [r3, #-116]
 10494 015a 002B     		cmp	r3, #0
 10495 015c 02D0     		beq	.L538
2666:bluetooth_rxtx.c **** 				matching = j;
 10496              		.loc 1 2666 0
 10497 015e BB6F     		ldr	r3, [r7, #120]
 10498 0160 FB66     		str	r3, [r7, #108]
2667:bluetooth_rxtx.c **** 				break;
 10499              		.loc 1 2667 0
 10500 0162 05E0     		b	.L539
 10501              	.L538:
2664:bluetooth_rxtx.c **** 			if (ok[j]) {
 10502              		.loc 1 2664 0 discriminator 2
 10503 0164 BB6F     		ldr	r3, [r7, #120]
 10504 0166 0133     		adds	r3, r3, #1
 10505 0168 BB67     		str	r3, [r7, #120]
 10506              	.L537:
2664:bluetooth_rxtx.c **** 			if (ok[j]) {
 10507              		.loc 1 2664 0 is_stmt 0 discriminator 1
 10508 016a BB6F     		ldr	r3, [r7, #120]
 10509 016c 032B     		cmp	r3, #3
 10510 016e EDDD     		ble	.L540
 10511              	.L539:
2668:bluetooth_rxtx.c **** 			}
2669:bluetooth_rxtx.c **** 		}
2670:bluetooth_rxtx.c **** 
2671:bluetooth_rxtx.c **** 		// skip if no match
2672:bluetooth_rxtx.c **** 		if (matching < 0)
 10512              		.loc 1 2672 0 is_stmt 1
 10513 0170 FB6E     		ldr	r3, [r7, #108]
 10514 0172 002B     		cmp	r3, #0
 10515 0174 7FDB     		blt	.L542
2673:bluetooth_rxtx.c **** 			continue;
2674:bluetooth_rxtx.c **** 
2675:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2676:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 10516              		.loc 1 2676 0
 10517 0176 5A4B     		ldr	r3, .L556
 10518 0178 1B88     		ldrh	r3, [r3]	@ movhi
 10519 017a 9BB2     		uxth	r3, r3
 10520 017c DBB2     		uxtb	r3, r3
 10521 017e 623B     		subs	r3, r3, #98
 10522 0180 DBB2     		uxtb	r3, r3
 10523 0182 1846     		mov	r0, r3
 10524 0184 FFF7FEFF 		bl	btle_channel_index
 10525 0188 0346     		mov	r3, r0
 10526 018a 1A46     		mov	r2, r3
 10527 018c 554B     		ldr	r3, .L556+4
 10528 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 10529 0190 3B67     		str	r3, [r7, #112]
2677:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 10530              		.loc 1 2677 0
 10531 0192 0023     		movs	r3, #0
 10532 0194 BB67     		str	r3, [r7, #120]
 10533 0196 4CE0     		b	.L543
 10534              	.L549:
ARM GAS  /tmp/cc6bdJLE.s 			page 232


 10535              	.LBB24:
2678:bluetooth_rxtx.c **** 			u8 byte = 0;
 10536              		.loc 1 2678 0
 10537 0198 0023     		movs	r3, #0
 10538 019a 87F86B30 		strb	r3, [r7, #107]
2679:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 10539              		.loc 1 2679 0
 10540 019e 0023     		movs	r3, #0
 10541 01a0 7B67     		str	r3, [r7, #116]
 10542 01a2 39E0     		b	.L544
 10543              	.L548:
 10544              	.LBB25:
2680:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 10545              		.loc 1 2680 0
 10546 01a4 BB6F     		ldr	r3, [r7, #120]
 10547 01a6 DA00     		lsls	r2, r3, #3
 10548 01a8 7B6F     		ldr	r3, [r7, #116]
 10549 01aa 1A44     		add	r2, r2, r3
 10550 01ac FB6F     		ldr	r3, [r7, #124]
 10551 01ae 1344     		add	r3, r3, r2
 10552 01b0 203B     		subs	r3, r3, #32
 10553 01b2 3B66     		str	r3, [r7, #96]
2681:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 10554              		.loc 1 2681 0
 10555 01b4 3B6E     		ldr	r3, [r7, #96]
 10556 01b6 B3F5487F 		cmp	r3, #800
 10557 01ba 00DB     		blt	.L545
 10558 01bc 2FE0     		b	.L546
 10559              	.L545:
2682:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 10560              		.loc 1 2682 0
 10561 01be 3B6E     		ldr	r3, [r7, #96]
 10562 01c0 7A68     		ldr	r2, [r7, #4]
 10563 01c2 1344     		add	r3, r3, r2
 10564 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10565 01c6 7B66     		str	r3, [r7, #100]
2683:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 10566              		.loc 1 2683 0
 10567 01c8 BB6F     		ldr	r3, [r7, #120]
 10568 01ca 032B     		cmp	r3, #3
 10569 01cc 16DD     		ble	.L547
2684:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 10570              		.loc 1 2684 0
 10571 01ce 464A     		ldr	r2, .L556+8
 10572 01d0 3B6F     		ldr	r3, [r7, #112]
 10573 01d2 1344     		add	r3, r3, r2
 10574 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10575 01d6 1A46     		mov	r2, r3
 10576 01d8 7B6E     		ldr	r3, [r7, #100]
 10577 01da 5340     		eors	r3, r3, r2
 10578 01dc 7B66     		str	r3, [r7, #100]
2685:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 10579              		.loc 1 2685 0
 10580 01de 3B6F     		ldr	r3, [r7, #112]
 10581 01e0 0133     		adds	r3, r3, #1
 10582 01e2 1946     		mov	r1, r3
 10583 01e4 414B     		ldr	r3, .L556+12
ARM GAS  /tmp/cc6bdJLE.s 			page 233


 10584 01e6 A1FB0323 		umull	r2, r3, r1, r3
 10585 01ea C81A     		subs	r0, r1, r3
 10586 01ec 4008     		lsrs	r0, r0, #1
 10587 01ee 0344     		add	r3, r3, r0
 10588 01f0 9A09     		lsrs	r2, r3, #6
 10589 01f2 1346     		mov	r3, r2
 10590 01f4 DB01     		lsls	r3, r3, #7
 10591 01f6 9B1A     		subs	r3, r3, r2
 10592 01f8 CA1A     		subs	r2, r1, r3
 10593 01fa 3A67     		str	r2, [r7, #112]
 10594              	.L547:
2686:bluetooth_rxtx.c **** 				}
2687:bluetooth_rxtx.c **** 				byte |= bit << k;
 10595              		.loc 1 2687 0 discriminator 2
 10596 01fc 7A6E     		ldr	r2, [r7, #100]
 10597 01fe 7B6F     		ldr	r3, [r7, #116]
 10598 0200 02FA03F3 		lsl	r3, r2, r3
 10599 0204 DAB2     		uxtb	r2, r3
 10600 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 10601 020a 1343     		orrs	r3, r3, r2
 10602 020c DBB2     		uxtb	r3, r3
 10603 020e 87F86B30 		strb	r3, [r7, #107]
 10604              	.LBE25:
2679:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 10605              		.loc 1 2679 0 discriminator 2
 10606 0212 7B6F     		ldr	r3, [r7, #116]
 10607 0214 0133     		adds	r3, r3, #1
 10608 0216 7B67     		str	r3, [r7, #116]
 10609              	.L544:
2679:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 10610              		.loc 1 2679 0 is_stmt 0 discriminator 1
 10611 0218 7B6F     		ldr	r3, [r7, #116]
 10612 021a 072B     		cmp	r3, #7
 10613 021c C2DD     		ble	.L548
 10614              	.L546:
2688:bluetooth_rxtx.c **** 			}
2689:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 10615              		.loc 1 2689 0 is_stmt 1 discriminator 2
 10616 021e 354B     		ldr	r3, .L556+20
 10617 0220 1A68     		ldr	r2, [r3]
 10618 0222 BB6F     		ldr	r3, [r7, #120]
 10619 0224 1344     		add	r3, r3, r2
 10620 0226 97F86B20 		ldrb	r2, [r7, #107]
 10621 022a 1A70     		strb	r2, [r3]
 10622              	.LBE24:
2677:bluetooth_rxtx.c **** 			u8 byte = 0;
 10623              		.loc 1 2677 0 discriminator 2
 10624 022c BB6F     		ldr	r3, [r7, #120]
 10625 022e 0133     		adds	r3, r3, #1
 10626 0230 BB67     		str	r3, [r7, #120]
 10627              	.L543:
2677:bluetooth_rxtx.c **** 			u8 byte = 0;
 10628              		.loc 1 2677 0 is_stmt 0 discriminator 1
 10629 0232 BB6F     		ldr	r3, [r7, #120]
 10630 0234 092B     		cmp	r3, #9
 10631 0236 AFDD     		ble	.L549
2690:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/cc6bdJLE.s 			page 234


2691:bluetooth_rxtx.c **** 
2692:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 10632              		.loc 1 2692 0 is_stmt 1
 10633 0238 2E4B     		ldr	r3, .L556+20
 10634 023a 1B68     		ldr	r3, [r3]
 10635 023c 0333     		adds	r3, r3, #3
 10636 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10637 0240 1A06     		lsls	r2, r3, #24
2693:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 10638              		.loc 1 2693 0
 10639 0242 2C4B     		ldr	r3, .L556+20
 10640 0244 1B68     		ldr	r3, [r3]
 10641 0246 0233     		adds	r3, r3, #2
 10642 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10643 024a 1B04     		lsls	r3, r3, #16
2692:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 10644              		.loc 1 2692 0
 10645 024c 1A43     		orrs	r2, r2, r3
2694:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 10646              		.loc 1 2694 0
 10647 024e 294B     		ldr	r3, .L556+20
 10648 0250 1B68     		ldr	r3, [r3]
 10649 0252 0133     		adds	r3, r3, #1
 10650 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10651 0256 1B02     		lsls	r3, r3, #8
2693:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 10652              		.loc 1 2693 0
 10653 0258 1343     		orrs	r3, r3, r2
2695:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 10654              		.loc 1 2695 0
 10655 025a 264A     		ldr	r2, .L556+20
 10656 025c 1268     		ldr	r2, [r2]
 10657 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2694:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 10658              		.loc 1 2694 0
 10659 0260 1343     		orrs	r3, r3, r2
2692:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 10660              		.loc 1 2692 0
 10661 0262 FB65     		str	r3, [r7, #92]
2696:bluetooth_rxtx.c **** 		see_aa(aa);
 10662              		.loc 1 2696 0
 10663 0264 F86D     		ldr	r0, [r7, #92]
 10664 0266 FFF7FEFF 		bl	see_aa
2697:bluetooth_rxtx.c **** 
2698:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 10665              		.loc 1 2698 0
 10666 026a 224B     		ldr	r3, .L556+20
 10667 026c 1B68     		ldr	r3, [r3]
 10668 026e 0120     		movs	r0, #1
 10669 0270 1946     		mov	r1, r3
 10670 0272 FFF7FEFF 		bl	enqueue
 10671              	.L542:
 10672              	.LBE23:
2650:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 10673              		.loc 1 2650 0 discriminator 2
 10674 0276 FB6F     		ldr	r3, [r7, #124]
 10675 0278 0133     		adds	r3, r3, #1
ARM GAS  /tmp/cc6bdJLE.s 			page 235


 10676 027a FB67     		str	r3, [r7, #124]
 10677              	.L530:
2650:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 10678              		.loc 1 2650 0 is_stmt 0 discriminator 1
 10679 027c FB6F     		ldr	r3, [r7, #124]
 10680 027e B3F53C7F 		cmp	r3, #752
 10681 0282 FFF62AAF 		blt	.L550
2699:bluetooth_rxtx.c **** 
2700:bluetooth_rxtx.c **** 	}
2701:bluetooth_rxtx.c **** 
2702:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2703:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 10682              		.loc 1 2703 0 is_stmt 1
 10683 0286 0023     		movs	r3, #0
 10684 0288 FB67     		str	r3, [r7, #124]
 10685 028a 20E0     		b	.L551
 10686              	.L554:
2704:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 10687              		.loc 1 2704 0
 10688 028c 1A4A     		ldr	r2, .L556+24
 10689 028e FB6F     		ldr	r3, [r7, #124]
 10690 0290 DB00     		lsls	r3, r3, #3
 10691 0292 1344     		add	r3, r3, r2
 10692 0294 5B68     		ldr	r3, [r3, #4]
 10693 0296 032B     		cmp	r3, #3
 10694 0298 16DD     		ble	.L552
2705:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 10695              		.loc 1 2705 0
 10696 029a 174A     		ldr	r2, .L556+24
 10697 029c FB6F     		ldr	r3, [r7, #124]
 10698 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 10699 02a2 1846     		mov	r0, r3
 10700 02a4 FFF7FEFF 		bl	le_set_access_address
2706:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 10701              		.loc 1 2706 0
 10702 02a8 144B     		ldr	r3, .L556+28
 10703 02aa 154A     		ldr	r2, .L556+32
 10704 02ac 1A60     		str	r2, [r3]
2707:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 10705              		.loc 1 2707 0
 10706 02ae 154B     		ldr	r3, .L556+36
 10707 02b0 154A     		ldr	r2, .L556+40
 10708 02b2 1A60     		str	r2, [r3]
2708:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 10709              		.loc 1 2708 0
 10710 02b4 154B     		ldr	r3, .L556+44
 10711 02b6 0022     		movs	r2, #0
 10712 02b8 1A61     		str	r2, [r3, #16]
2709:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 10713              		.loc 1 2709 0
 10714 02ba 0020     		movs	r0, #0
 10715 02bc 1349     		ldr	r1, .L556+44
 10716 02be 0422     		movs	r2, #4
 10717 02c0 FFF7FEFF 		bl	le_promisc_state
2710:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2711:bluetooth_rxtx.c **** 			return 0;
 10718              		.loc 1 2711 0
ARM GAS  /tmp/cc6bdJLE.s 			page 236


 10719 02c4 0023     		movs	r3, #0
 10720 02c6 06E0     		b	.L555
 10721              	.L552:
2703:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 10722              		.loc 1 2703 0 discriminator 2
 10723 02c8 FB6F     		ldr	r3, [r7, #124]
 10724 02ca 0133     		adds	r3, r3, #1
 10725 02cc FB67     		str	r3, [r7, #124]
 10726              	.L551:
2703:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 10727              		.loc 1 2703 0 is_stmt 0 discriminator 1
 10728 02ce FB6F     		ldr	r3, [r7, #124]
 10729 02d0 1F2B     		cmp	r3, #31
 10730 02d2 DBDD     		ble	.L554
2712:bluetooth_rxtx.c **** 		}
2713:bluetooth_rxtx.c **** 	}
2714:bluetooth_rxtx.c **** 
2715:bluetooth_rxtx.c **** 	return 1;
 10731              		.loc 1 2715 0 is_stmt 1
 10732 02d4 0123     		movs	r3, #1
 10733              	.L555:
2716:bluetooth_rxtx.c **** }
 10734              		.loc 1 2716 0 discriminator 1
 10735 02d6 1846     		mov	r0, r3
 10736 02d8 8437     		adds	r7, r7, #132
 10737              		.cfi_def_cfa_offset 12
 10738 02da BD46     		mov	sp, r7
 10739              		.cfi_def_cfa_register 13
 10740              		@ sp needed
 10741 02dc 90BD     		pop	{r4, r7, pc}
 10742              	.L557:
 10743 02de 00BF     		.align	2
 10744              	.L556:
 10745 02e0 00000000 		.word	channel
 10746 02e4 C0000000 		.word	whitening_index
 10747 02e8 40000000 		.word	whitening
 10748 02ec 11080402 		.word	33818641
 10749 02f0 E0080000 		.word	.LC0
 10750 02f4 00000000 		.word	idle_rxbuf
 10751 02f8 00000000 		.word	le_promisc
 10752 02fc 00000000 		.word	data_cb
 10753 0300 00000000 		.word	cb_follow_le
 10754 0304 00000000 		.word	packet_cb
 10755 0308 00000000 		.word	promisc_follow_cb
 10756 030c 00000000 		.word	le
 10757              		.cfi_endproc
 10758              	.LFE45:
 10760              		.section	.text.bt_promisc_le,"ax",%progbits
 10761              		.align	2
 10762              		.global	bt_promisc_le
 10763              		.thumb
 10764              		.thumb_func
 10766              	bt_promisc_le:
 10767              	.LFB46:
2717:bluetooth_rxtx.c **** 
2718:bluetooth_rxtx.c **** void bt_promisc_le() {
 10768              		.loc 1 2718 0
ARM GAS  /tmp/cc6bdJLE.s 			page 237


 10769              		.cfi_startproc
 10770              		@ args = 0, pretend = 0, frame = 0
 10771              		@ frame_needed = 1, uses_anonymous_args = 0
 10772 0000 80B5     		push	{r7, lr}
 10773              		.cfi_def_cfa_offset 8
 10774              		.cfi_offset 7, -8
 10775              		.cfi_offset 14, -4
 10776 0002 00AF     		add	r7, sp, #0
 10777              		.cfi_def_cfa_register 7
2719:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 10778              		.loc 1 2719 0
 10779 0004 2CE0     		b	.L559
 10780              	.L564:
2720:bluetooth_rxtx.c **** 		reset_le_promisc();
 10781              		.loc 1 2720 0
 10782 0006 FFF7FEFF 		bl	reset_le_promisc
2721:bluetooth_rxtx.c **** 
2722:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2723:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 10783              		.loc 1 2723 0
 10784 000a 184B     		ldr	r3, .L565
 10785 000c 1B88     		ldrh	r3, [r3]	@ movhi
 10786 000e 9BB2     		uxth	r3, r3
 10787 0010 03F00103 		and	r3, r3, #1
 10788 0014 002B     		cmp	r3, #0
 10789 0016 03D0     		beq	.L560
2724:bluetooth_rxtx.c **** 			channel = 2440;
 10790              		.loc 1 2724 0
 10791 0018 144B     		ldr	r3, .L565
 10792 001a 40F68812 		movw	r2, #2440
 10793 001e 1A80     		strh	r2, [r3]	@ movhi
 10794              	.L560:
2725:bluetooth_rxtx.c **** 
2726:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2727:bluetooth_rxtx.c **** 		if (!le.target_set) {
 10795              		.loc 1 2727 0
 10796 0020 134B     		ldr	r3, .L565+4
 10797 0022 DB6B     		ldr	r3, [r3, #60]
 10798 0024 002B     		cmp	r3, #0
 10799 0026 07D1     		bne	.L561
2728:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2729:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 10800              		.loc 1 2729 0
 10801 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2730:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 10802              		.loc 1 2730 0
 10803 002c 114B     		ldr	r3, .L565+8
 10804 002e 124A     		ldr	r2, .L565+12
 10805 0030 1A60     		str	r2, [r3]
2731:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 10806              		.loc 1 2731 0
 10807 0032 0A20     		movs	r0, #10
 10808 0034 FFF7FEFF 		bl	bt_generic_le
 10809              	.L561:
2732:bluetooth_rxtx.c **** 		}
2733:bluetooth_rxtx.c **** 
2734:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
ARM GAS  /tmp/cc6bdJLE.s 			page 238


2735:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 10810              		.loc 1 2735 0
 10811 0038 104B     		ldr	r3, .L565+16
 10812 003a 1B78     		ldrb	r3, [r3]
 10813 003c DBB2     		uxtb	r3, r3
 10814 003e 0A2B     		cmp	r3, #10
 10815 0040 00D0     		beq	.L562
2736:bluetooth_rxtx.c **** 			break;
 10816              		.loc 1 2736 0
 10817 0042 12E0     		b	.L558
 10818              	.L562:
2737:bluetooth_rxtx.c **** 
2738:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 10819              		.loc 1 2738 0
 10820 0044 0020     		movs	r0, #0
 10821 0046 0A49     		ldr	r1, .L565+4
 10822 0048 0422     		movs	r2, #4
 10823 004a FFF7FEFF 		bl	le_promisc_state
2739:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 10824              		.loc 1 2739 0
 10825 004e 0C4B     		ldr	r3, .L565+20
 10826 0050 0C4A     		ldr	r2, .L565+24
 10827 0052 1A60     		str	r2, [r3]
2740:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 10828              		.loc 1 2740 0
 10829 0054 064B     		ldr	r3, .L565+4
 10830 0056 0022     		movs	r2, #0
 10831 0058 1A61     		str	r2, [r3, #16]
2741:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 10832              		.loc 1 2741 0
 10833 005a 0A20     		movs	r0, #10
 10834 005c FFF7FEFF 		bl	bt_le_sync
 10835              	.L559:
2719:bluetooth_rxtx.c **** 		reset_le_promisc();
 10836              		.loc 1 2719 0
 10837 0060 064B     		ldr	r3, .L565+16
 10838 0062 1B78     		ldrb	r3, [r3]
 10839 0064 DBB2     		uxtb	r3, r3
 10840 0066 0A2B     		cmp	r3, #10
 10841 0068 CDD0     		beq	.L564
 10842              	.L558:
2742:bluetooth_rxtx.c **** 	}
2743:bluetooth_rxtx.c **** }
 10843              		.loc 1 2743 0
 10844 006a 80BD     		pop	{r7, pc}
 10845              	.L566:
 10846              		.align	2
 10847              	.L565:
 10848 006c 00000000 		.word	channel
 10849 0070 00000000 		.word	le
 10850 0074 00000000 		.word	data_cb
 10851 0078 00000000 		.word	cb_le_promisc
 10852 007c 00000000 		.word	requested_mode
 10853 0080 00000000 		.word	packet_cb
 10854 0084 00000000 		.word	promisc_follow_cb
 10855              		.cfi_endproc
 10856              	.LFE46:
ARM GAS  /tmp/cc6bdJLE.s 			page 239


 10858              		.section	.rodata
 10859              		.align	2
 10860              	.LC1:
 10861 08f0 00       		.byte	0
 10862 08f1 09       		.byte	9
 10863 08f2 FF       		.byte	-1
 10864 08f3 FF       		.byte	-1
 10865 08f4 FF       		.byte	-1
 10866 08f5 FF       		.byte	-1
 10867 08f6 FF       		.byte	-1
 10868 08f7 FF       		.byte	-1
 10869 08f8 02       		.byte	2
 10870 08f9 01       		.byte	1
 10871 08fa 05       		.byte	5
 10872 08fb FF       		.byte	-1
 10873 08fc FF       		.byte	-1
 10874 08fd FF       		.byte	-1
 10875              		.section	.text.bt_slave_le,"ax",%progbits
 10876              		.align	2
 10877              		.global	bt_slave_le
 10878              		.thumb
 10879              		.thumb_func
 10881              	bt_slave_le:
 10882              	.LFB47:
2744:bluetooth_rxtx.c **** 
2745:bluetooth_rxtx.c **** void bt_slave_le() {
 10883              		.loc 1 2745 0
 10884              		.cfi_startproc
 10885              		@ args = 0, pretend = 0, frame = 32
 10886              		@ frame_needed = 1, uses_anonymous_args = 0
 10887 0000 90B5     		push	{r4, r7, lr}
 10888              		.cfi_def_cfa_offset 12
 10889              		.cfi_offset 4, -12
 10890              		.cfi_offset 7, -8
 10891              		.cfi_offset 14, -4
 10892 0002 89B0     		sub	sp, sp, #36
 10893              		.cfi_def_cfa_offset 48
 10894 0004 00AF     		add	r7, sp, #0
 10895              		.cfi_def_cfa_register 7
2746:bluetooth_rxtx.c **** 	u32 calc_crc;
2747:bluetooth_rxtx.c **** 	int i;
2748:bluetooth_rxtx.c **** 
2749:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 10896              		.loc 1 2749 0
 10897 0006 354A     		ldr	r2, .L572
 10898 0008 3B1D     		adds	r3, r7, #4
 10899 000a 1446     		mov	r4, r2
 10900 000c 2068     		ldr	r0, [r4]	@ unaligned
 10901 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 10902 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 10903 0012 07C3     		stmia	r3!, {r0, r1, r2}
 10904 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 10905 0016 1A80     		strh	r2, [r3]	@ unaligned
2750:bluetooth_rxtx.c **** 		// LL header
2751:bluetooth_rxtx.c **** 		0x00, 0x09,
2752:bluetooth_rxtx.c **** 
2753:bluetooth_rxtx.c **** 		// advertising address
ARM GAS  /tmp/cc6bdJLE.s 			page 240


2754:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2755:bluetooth_rxtx.c **** 
2756:bluetooth_rxtx.c **** 		// advertising data
2757:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2758:bluetooth_rxtx.c **** 
2759:bluetooth_rxtx.c **** 		// CRC (calc)
2760:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2761:bluetooth_rxtx.c **** 	};
2762:bluetooth_rxtx.c **** 
2763:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 10906              		.loc 1 2763 0
 10907 0018 0B23     		movs	r3, #11
 10908 001a FB76     		strb	r3, [r7, #27]
2764:bluetooth_rxtx.c **** 
2765:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2766:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 10909              		.loc 1 2766 0
 10910 001c 0023     		movs	r3, #0
 10911 001e FB61     		str	r3, [r7, #28]
 10912 0020 0EE0     		b	.L568
 10913              	.L569:
2767:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10914              		.loc 1 2767 0 discriminator 3
 10915 0022 FB69     		ldr	r3, [r7, #28]
 10916 0024 0233     		adds	r3, r3, #2
 10917 0026 FA69     		ldr	r2, [r7, #28]
 10918 0028 C2F10502 		rsb	r2, r2, #5
 10919 002c 2C49     		ldr	r1, .L572+4
 10920 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 10921 0030 07F12001 		add	r1, r7, #32
 10922 0034 0B44     		add	r3, r3, r1
 10923 0036 03F81C2C 		strb	r2, [r3, #-28]
2766:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10924              		.loc 1 2766 0 discriminator 3
 10925 003a FB69     		ldr	r3, [r7, #28]
 10926 003c 0133     		adds	r3, r3, #1
 10927 003e FB61     		str	r3, [r7, #28]
 10928              	.L568:
2766:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10929              		.loc 1 2766 0 is_stmt 0 discriminator 1
 10930 0040 FB69     		ldr	r3, [r7, #28]
 10931 0042 052B     		cmp	r3, #5
 10932 0044 EDDD     		ble	.L569
2768:bluetooth_rxtx.c **** 
2769:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 10933              		.loc 1 2769 0 is_stmt 1
 10934 0046 274B     		ldr	r3, .L572+8
 10935 0048 D968     		ldr	r1, [r3, #12]
 10936 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10937 004c 3A1D     		adds	r2, r7, #4
 10938 004e 0846     		mov	r0, r1
 10939 0050 1146     		mov	r1, r2
 10940 0052 1A46     		mov	r2, r3
 10941 0054 FFF7FEFF 		bl	btle_calc_crc
 10942 0058 7861     		str	r0, [r7, #20]
2770:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 10943              		.loc 1 2770 0
ARM GAS  /tmp/cc6bdJLE.s 			page 241


 10944 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10945 005c 7A69     		ldr	r2, [r7, #20]
 10946 005e D2B2     		uxtb	r2, r2
 10947 0060 07F12001 		add	r1, r7, #32
 10948 0064 0B44     		add	r3, r3, r1
 10949 0066 03F81C2C 		strb	r2, [r3, #-28]
2771:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 10950              		.loc 1 2771 0
 10951 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10952 006c 0133     		adds	r3, r3, #1
 10953 006e 7A69     		ldr	r2, [r7, #20]
 10954 0070 120A     		lsrs	r2, r2, #8
 10955 0072 D2B2     		uxtb	r2, r2
 10956 0074 07F12001 		add	r1, r7, #32
 10957 0078 0B44     		add	r3, r3, r1
 10958 007a 03F81C2C 		strb	r2, [r3, #-28]
2772:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 10959              		.loc 1 2772 0
 10960 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10961 0080 0233     		adds	r3, r3, #2
 10962 0082 7A69     		ldr	r2, [r7, #20]
 10963 0084 120C     		lsrs	r2, r2, #16
 10964 0086 D2B2     		uxtb	r2, r2
 10965 0088 07F12001 		add	r1, r7, #32
 10966 008c 0B44     		add	r3, r3, r1
 10967 008e 03F81C2C 		strb	r2, [r3, #-28]
2773:bluetooth_rxtx.c **** 
2774:bluetooth_rxtx.c **** 	// spam advertising packets
2775:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 10968              		.loc 1 2775 0
 10969 0092 1BE0     		b	.L570
 10970              	.L571:
2776:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 10971              		.loc 1 2776 0
 10972 0094 144B     		ldr	r3, .L572+12
 10973 0096 4FF08072 		mov	r2, #16777216
 10974 009a 1A60     		str	r2, [r3]
2777:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 10975              		.loc 1 2777 0
 10976 009c 124B     		ldr	r3, .L572+12
 10977 009e 4FF08062 		mov	r2, #67108864
 10978 00a2 1A60     		str	r2, [r3]
2778:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 10979              		.loc 1 2778 0
 10980 00a4 FB7E     		ldrb	r3, [r7, #27]
 10981 00a6 0333     		adds	r3, r3, #3
 10982 00a8 DAB2     		uxtb	r2, r3
 10983 00aa 3B1D     		adds	r3, r7, #4
 10984 00ac 0F48     		ldr	r0, .L572+16
 10985 00ae 1146     		mov	r1, r2
 10986 00b0 1A46     		mov	r2, r3
 10987 00b2 FFF7FEFF 		bl	le_transmit
2779:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 10988              		.loc 1 2779 0
 10989 00b6 0E4B     		ldr	r3, .L572+20
 10990 00b8 4FF08072 		mov	r2, #16777216
 10991 00bc 1A60     		str	r2, [r3]
ARM GAS  /tmp/cc6bdJLE.s 			page 242


2780:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 10992              		.loc 1 2780 0
 10993 00be 0C4B     		ldr	r3, .L572+20
 10994 00c0 4FF08062 		mov	r2, #67108864
 10995 00c4 1A60     		str	r2, [r3]
2781:bluetooth_rxtx.c **** 		msleep(100);
 10996              		.loc 1 2781 0
 10997 00c6 6420     		movs	r0, #100
 10998 00c8 FFF7FEFF 		bl	msleep
 10999              	.L570:
2775:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 11000              		.loc 1 2775 0
 11001 00cc 094B     		ldr	r3, .L572+24
 11002 00ce 1B78     		ldrb	r3, [r3]
 11003 00d0 DBB2     		uxtb	r3, r3
 11004 00d2 0C2B     		cmp	r3, #12
 11005 00d4 DED0     		beq	.L571
2782:bluetooth_rxtx.c **** 	}
2783:bluetooth_rxtx.c **** }
 11006              		.loc 1 2783 0
 11007 00d6 2437     		adds	r7, r7, #36
 11008              		.cfi_def_cfa_offset 12
 11009 00d8 BD46     		mov	sp, r7
 11010              		.cfi_def_cfa_register 13
 11011              		@ sp needed
 11012 00da 90BD     		pop	{r4, r7, pc}
 11013              	.L573:
 11014              		.align	2
 11015              	.L572:
 11016 00dc F0080000 		.word	.LC1
 11017 00e0 00000000 		.word	slave_mac_address
 11018 00e4 00000000 		.word	le
 11019 00e8 80E100E0 		.word	-536813184
 11020 00ec D6BE898E 		.word	-1903575338
 11021 00f0 00E100E0 		.word	-536813312
 11022 00f4 00000000 		.word	requested_mode
 11023              		.cfi_endproc
 11024              	.LFE47:
 11026              		.section	.text.specan,"ax",%progbits
 11027              		.align	2
 11028              		.global	specan
 11029              		.thumb
 11030              		.thumb_func
 11032              	specan:
 11033              	.LFB48:
2784:bluetooth_rxtx.c **** 
2785:bluetooth_rxtx.c **** /* spectrum analysis */
2786:bluetooth_rxtx.c **** void specan()
2787:bluetooth_rxtx.c **** {
 11034              		.loc 1 2787 0
 11035              		.cfi_startproc
 11036              		@ args = 0, pretend = 0, frame = 64
 11037              		@ frame_needed = 1, uses_anonymous_args = 0
 11038 0000 90B5     		push	{r4, r7, lr}
 11039              		.cfi_def_cfa_offset 12
 11040              		.cfi_offset 4, -12
 11041              		.cfi_offset 7, -8
ARM GAS  /tmp/cc6bdJLE.s 			page 243


 11042              		.cfi_offset 14, -4
 11043 0002 91B0     		sub	sp, sp, #68
 11044              		.cfi_def_cfa_offset 80
 11045 0004 00AF     		add	r7, sp, #0
 11046              		.cfi_def_cfa_register 7
2788:bluetooth_rxtx.c **** 	u8 epstat;
2789:bluetooth_rxtx.c **** 	u16 f;
2790:bluetooth_rxtx.c **** 	u8 i = 0;
 11047              		.loc 1 2790 0
 11048 0006 0023     		movs	r3, #0
 11049 0008 87F83D30 		strb	r3, [r7, #61]
2791:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2792:bluetooth_rxtx.c **** 
2793:bluetooth_rxtx.c **** 	RXLED_SET;
 11050              		.loc 1 2793 0
 11051 000c 5A4B     		ldr	r3, .L585
 11052 000e 1022     		movs	r2, #16
 11053 0010 1A60     		str	r2, [r3]
2794:bluetooth_rxtx.c **** 
2795:bluetooth_rxtx.c **** 	queue_init();
 11054              		.loc 1 2795 0
 11055 0012 FFF7FEFF 		bl	queue_init
2796:bluetooth_rxtx.c **** 
2797:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2798:bluetooth_rxtx.c **** 	PAEN_SET;
 11056              		.loc 1 2798 0
 11057 0016 594B     		ldr	r3, .L585+4
 11058 0018 8022     		movs	r2, #128
 11059 001a 1A60     		str	r2, [r3]
2799:bluetooth_rxtx.c **** 	//HGM_SET;
2800:bluetooth_rxtx.c **** #endif
2801:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 11060              		.loc 1 2801 0
 11061 001c 1220     		movs	r0, #18
 11062 001e 42F62231 		movw	r1, #11042
 11063 0022 FFF7FEFF 		bl	cc2400_set
2802:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 11064              		.loc 1 2802 0
 11065 0026 1420     		movs	r0, #20
 11066 0028 41F24B31 		movw	r1, #4939
 11067 002c FFF7FEFF 		bl	cc2400_set
2803:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 11068              		.loc 1 2803 0
 11069 0030 2020     		movs	r0, #32
 11070 0032 40F20111 		movw	r1, #257
 11071 0036 FFF7FEFF 		bl	cc2400_set
2804:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 11072              		.loc 1 2804 0
 11073 003a 0320     		movs	r0, #3
 11074 003c 2921     		movs	r1, #41
 11075 003e FFF7FEFF 		bl	cc2400_set
2805:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2806:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 11076              		.loc 1 2806 0
 11077 0042 00BF     		nop
 11078              	.L575:
 11079              		.loc 1 2806 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cc6bdJLE.s 			page 244


 11080 0044 FFF7FEFF 		bl	cc2400_status
 11081 0048 0346     		mov	r3, r0
 11082 004a 03F04003 		and	r3, r3, #64
 11083 004e 002B     		cmp	r3, #0
 11084 0050 F8D0     		beq	.L575
2807:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 11085              		.loc 1 2807 0 is_stmt 1
 11086 0052 00BF     		nop
 11087              	.L576:
 11088              		.loc 1 2807 0 is_stmt 0 discriminator 1
 11089 0054 FFF7FEFF 		bl	cc2400_status
 11090 0058 0346     		mov	r3, r0
 11091 005a 03F00403 		and	r3, r3, #4
 11092 005e 002B     		cmp	r3, #0
 11093 0060 F8D1     		bne	.L576
2808:bluetooth_rxtx.c **** 
2809:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 11094              		.loc 1 2809 0 is_stmt 1
 11095 0062 7AE0     		b	.L577
 11096              	.L584:
2810:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 11097              		.loc 1 2810 0
 11098 0064 464B     		ldr	r3, .L585+8
 11099 0066 1B88     		ldrh	r3, [r3]	@ movhi
 11100 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 11101 006a 6FE0     		b	.L578
 11102              	.L583:
 11103              	.LBB26:
2811:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 11104              		.loc 1 2811 0
 11105 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 11106 006e 013B     		subs	r3, r3, #1
 11107 0070 9BB2     		uxth	r3, r3
 11108 0072 0220     		movs	r0, #2
 11109 0074 1946     		mov	r1, r3
 11110 0076 FFF7FEFF 		bl	cc2400_set
2812:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 11111              		.loc 1 2812 0
 11112 007a 6120     		movs	r0, #97
 11113 007c FFF7FEFF 		bl	cc2400_strobe
2813:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 11114              		.loc 1 2813 0
 11115 0080 00BF     		nop
 11116              	.L579:
 11117              		.loc 1 2813 0 is_stmt 0 discriminator 1
 11118 0082 FFF7FEFF 		bl	cc2400_status
 11119 0086 0346     		mov	r3, r0
 11120 0088 03F00403 		and	r3, r3, #4
 11121 008c 002B     		cmp	r3, #0
 11122 008e F8D0     		beq	.L579
2814:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 11123              		.loc 1 2814 0 is_stmt 1
 11124 0090 6220     		movs	r0, #98
 11125 0092 FFF7FEFF 		bl	cc2400_strobe
2815:bluetooth_rxtx.c **** 
2816:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2817:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
ARM GAS  /tmp/cc6bdJLE.s 			page 245


 11126              		.loc 1 2817 0
 11127 0096 4FF4FA73 		mov	r3, #500
 11128 009a 7B60     		str	r3, [r7, #4]
 11129 009c 00BF     		nop
 11130              	.L580:
 11131              		.loc 1 2817 0 is_stmt 0 discriminator 2
 11132 009e 7B68     		ldr	r3, [r7, #4]
 11133 00a0 013B     		subs	r3, r3, #1
 11134 00a2 7B60     		str	r3, [r7, #4]
 11135 00a4 002B     		cmp	r3, #0
 11136 00a6 FAD1     		bne	.L580
2818:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 11137              		.loc 1 2818 0 is_stmt 1
 11138 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 11139 00ac 1346     		mov	r3, r2
 11140 00ae 5B00     		lsls	r3, r3, #1
 11141 00b0 1344     		add	r3, r3, r2
 11142 00b2 FA8F     		ldrh	r2, [r7, #62]
 11143 00b4 120A     		lsrs	r2, r2, #8
 11144 00b6 92B2     		uxth	r2, r2
 11145 00b8 D2B2     		uxtb	r2, r2
 11146 00ba 07F14001 		add	r1, r7, #64
 11147 00be 0B44     		add	r3, r3, r1
 11148 00c0 03F8382C 		strb	r2, [r3, #-56]
2819:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 11149              		.loc 1 2819 0
 11150 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 11151 00c8 1346     		mov	r3, r2
 11152 00ca 5B00     		lsls	r3, r3, #1
 11153 00cc 1344     		add	r3, r3, r2
 11154 00ce 0133     		adds	r3, r3, #1
 11155 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 11156 00d2 D2B2     		uxtb	r2, r2
 11157 00d4 07F14001 		add	r1, r7, #64
 11158 00d8 0B44     		add	r3, r3, r1
 11159 00da 03F8382C 		strb	r2, [r3, #-56]
2820:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 11160              		.loc 1 2820 0
 11161 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 11162 00e2 1346     		mov	r3, r2
 11163 00e4 5B00     		lsls	r3, r3, #1
 11164 00e6 1344     		add	r3, r3, r2
 11165 00e8 9C1C     		adds	r4, r3, #2
 11166 00ea 0620     		movs	r0, #6
 11167 00ec FFF7FEFF 		bl	cc2400_get
 11168 00f0 0346     		mov	r3, r0
 11169 00f2 1B0A     		lsrs	r3, r3, #8
 11170 00f4 9BB2     		uxth	r3, r3
 11171 00f6 DAB2     		uxtb	r2, r3
 11172 00f8 07F14003 		add	r3, r7, #64
 11173 00fc 2344     		add	r3, r3, r4
 11174 00fe 03F8382C 		strb	r2, [r3, #-56]
2821:bluetooth_rxtx.c **** 			i++;
 11175              		.loc 1 2821 0
 11176 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 11177 0106 0133     		adds	r3, r3, #1
 11178 0108 87F83D30 		strb	r3, [r7, #61]
ARM GAS  /tmp/cc6bdJLE.s 			page 246


2822:bluetooth_rxtx.c **** 			if (i == 16) {
 11179              		.loc 1 2822 0
 11180 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 11181 0110 102B     		cmp	r3, #16
 11182 0112 0DD1     		bne	.L581
2823:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 11183              		.loc 1 2823 0
 11184 0114 07F10803 		add	r3, r7, #8
 11185 0118 0420     		movs	r0, #4
 11186 011a 1946     		mov	r1, r3
 11187 011c FFF7FEFF 		bl	enqueue
2824:bluetooth_rxtx.c **** 				i = 0;
 11188              		.loc 1 2824 0
 11189 0120 0023     		movs	r3, #0
 11190 0122 87F83D30 		strb	r3, [r7, #61]
2825:bluetooth_rxtx.c **** 
2826:bluetooth_rxtx.c **** 				handle_usb(clkn);
 11191              		.loc 1 2826 0
 11192 0126 174B     		ldr	r3, .L585+12
 11193 0128 1B68     		ldr	r3, [r3]
 11194 012a 1846     		mov	r0, r3
 11195 012c FFF7FEFF 		bl	handle_usb
 11196              	.L581:
2827:bluetooth_rxtx.c **** 			}
2828:bluetooth_rxtx.c **** 
2829:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 11197              		.loc 1 2829 0
 11198 0130 6420     		movs	r0, #100
 11199 0132 FFF7FEFF 		bl	cc2400_strobe
2830:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 11200              		.loc 1 2830 0
 11201 0136 00BF     		nop
 11202              	.L582:
 11203              		.loc 1 2830 0 is_stmt 0 discriminator 1
 11204 0138 FFF7FEFF 		bl	cc2400_status
 11205 013c 0346     		mov	r3, r0
 11206 013e 03F00403 		and	r3, r3, #4
 11207 0142 002B     		cmp	r3, #0
 11208 0144 F8D1     		bne	.L582
 11209              	.LBE26:
2810:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 11210              		.loc 1 2810 0 is_stmt 1 discriminator 2
 11211 0146 FB8F     		ldrh	r3, [r7, #62]
 11212 0148 0133     		adds	r3, r3, #1
 11213 014a FB87     		strh	r3, [r7, #62]	@ movhi
 11214              	.L578:
2810:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 11215              		.loc 1 2810 0 is_stmt 0 discriminator 1
 11216 014c FA8F     		ldrh	r2, [r7, #62]
 11217 014e 0E4B     		ldr	r3, .L585+16
 11218 0150 1B88     		ldrh	r3, [r3]	@ movhi
 11219 0152 9BB2     		uxth	r3, r3
 11220 0154 0133     		adds	r3, r3, #1
 11221 0156 9A42     		cmp	r2, r3
 11222 0158 88DB     		blt	.L583
 11223              	.L577:
2809:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
ARM GAS  /tmp/cc6bdJLE.s 			page 247


 11224              		.loc 1 2809 0 is_stmt 1
 11225 015a 0C4B     		ldr	r3, .L585+20
 11226 015c 1B78     		ldrb	r3, [r3]
 11227 015e DBB2     		uxtb	r3, r3
 11228 0160 042B     		cmp	r3, #4
 11229 0162 3FF47FAF 		beq	.L584
2831:bluetooth_rxtx.c **** 		}
2832:bluetooth_rxtx.c **** 	}
2833:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 11230              		.loc 1 2833 0
 11231 0166 0A4B     		ldr	r3, .L585+24
 11232 0168 0022     		movs	r2, #0
 11233 016a 1A70     		strb	r2, [r3]
2834:bluetooth_rxtx.c **** 	RXLED_CLR;
 11234              		.loc 1 2834 0
 11235 016c 094B     		ldr	r3, .L585+28
 11236 016e 1022     		movs	r2, #16
 11237 0170 1A60     		str	r2, [r3]
2835:bluetooth_rxtx.c **** }
 11238              		.loc 1 2835 0
 11239 0172 4437     		adds	r7, r7, #68
 11240              		.cfi_def_cfa_offset 12
 11241 0174 BD46     		mov	sp, r7
 11242              		.cfi_def_cfa_register 13
 11243              		@ sp needed
 11244 0176 90BD     		pop	{r4, r7, pc}
 11245              	.L586:
 11246              		.align	2
 11247              	.L585:
 11248 0178 38C00920 		.word	537509944
 11249 017c 58C00920 		.word	537509976
 11250 0180 00000000 		.word	low_freq
 11251 0184 00000000 		.word	clkn
 11252 0188 00000000 		.word	high_freq
 11253 018c 00000000 		.word	requested_mode
 11254 0190 00000000 		.word	mode
 11255 0194 3CC00920 		.word	537509948
 11256              		.cfi_endproc
 11257              	.LFE48:
 11259              		.section	.rodata
 11260 08fe 0000     		.align	2
 11261              	.LC2:
 11262 0900 6C09     		.short	2412
 11263 0902 8509     		.short	2437
 11264 0904 9E09     		.short	2462
 11265              		.section	.text.led_specan,"ax",%progbits
 11266              		.align	2
 11267              		.global	led_specan
 11268              		.thumb
 11269              		.thumb_func
 11271              	led_specan:
 11272              	.LFB49:
2836:bluetooth_rxtx.c **** 
2837:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2838:bluetooth_rxtx.c **** void led_specan()
2839:bluetooth_rxtx.c **** {
 11273              		.loc 1 2839 0
ARM GAS  /tmp/cc6bdJLE.s 			page 248


 11274              		.cfi_startproc
 11275              		@ args = 0, pretend = 0, frame = 16
 11276              		@ frame_needed = 1, uses_anonymous_args = 0
 11277 0000 80B5     		push	{r7, lr}
 11278              		.cfi_def_cfa_offset 8
 11279              		.cfi_offset 7, -8
 11280              		.cfi_offset 14, -4
 11281 0002 84B0     		sub	sp, sp, #16
 11282              		.cfi_def_cfa_offset 24
 11283 0004 00AF     		add	r7, sp, #0
 11284              		.cfi_def_cfa_register 7
2840:bluetooth_rxtx.c **** 	int8_t lvl;
2841:bluetooth_rxtx.c **** 	u8 i = 0;
 11285              		.loc 1 2841 0
 11286 0006 0023     		movs	r3, #0
 11287 0008 FB73     		strb	r3, [r7, #15]
2842:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 11288              		.loc 1 2842 0
 11289 000a 5B4A     		ldr	r2, .L604
 11290 000c 07F10803 		add	r3, r7, #8
 11291 0010 1068     		ldr	r0, [r2]	@ unaligned
 11292 0012 1860     		str	r0, [r3]	@ unaligned
 11293 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 11294 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2843:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2844:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2845:bluetooth_rxtx.c **** 
2846:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2847:bluetooth_rxtx.c **** 	PAEN_SET;
 11295              		.loc 1 2847 0
 11296 0018 584B     		ldr	r3, .L604+4
 11297 001a 8022     		movs	r2, #128
 11298 001c 1A60     		str	r2, [r3]
2848:bluetooth_rxtx.c **** 	//HGM_SET;
2849:bluetooth_rxtx.c **** #endif
2850:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 11299              		.loc 1 2850 0
 11300 001e 1220     		movs	r0, #18
 11301 0020 42F62231 		movw	r1, #11042
 11302 0024 FFF7FEFF 		bl	cc2400_set
2851:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 11303              		.loc 1 2851 0
 11304 0028 1420     		movs	r0, #20
 11305 002a 41F24B31 		movw	r1, #4939
 11306 002e FFF7FEFF 		bl	cc2400_set
2852:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 11307              		.loc 1 2852 0
 11308 0032 2020     		movs	r0, #32
 11309 0034 40F20111 		movw	r1, #257
 11310 0038 FFF7FEFF 		bl	cc2400_set
2853:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 11311              		.loc 1 2853 0
 11312 003c 0320     		movs	r0, #3
 11313 003e 2921     		movs	r1, #41
 11314 0040 FFF7FEFF 		bl	cc2400_set
2854:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 11315              		.loc 1 2854 0
ARM GAS  /tmp/cc6bdJLE.s 			page 249


 11316 0044 0620     		movs	r0, #6
 11317 0046 F121     		movs	r1, #241
 11318 0048 FFF7FEFF 		bl	cc2400_set
2855:bluetooth_rxtx.c **** 
2856:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 11319              		.loc 1 2856 0
 11320 004c 00BF     		nop
 11321              	.L588:
 11322              		.loc 1 2856 0 is_stmt 0 discriminator 1
 11323 004e FFF7FEFF 		bl	cc2400_status
 11324 0052 0346     		mov	r3, r0
 11325 0054 03F04003 		and	r3, r3, #64
 11326 0058 002B     		cmp	r3, #0
 11327 005a F8D0     		beq	.L588
2857:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 11328              		.loc 1 2857 0 is_stmt 1
 11329 005c 00BF     		nop
 11330              	.L589:
 11331              		.loc 1 2857 0 is_stmt 0 discriminator 1
 11332 005e FFF7FEFF 		bl	cc2400_status
 11333 0062 0346     		mov	r3, r0
 11334 0064 03F00403 		and	r3, r3, #4
 11335 0068 002B     		cmp	r3, #0
 11336 006a F8D1     		bne	.L589
2858:bluetooth_rxtx.c **** 
2859:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 11337              		.loc 1 2859 0 is_stmt 1
 11338 006c 79E0     		b	.L590
 11339              	.L603:
 11340              	.LBB27:
2860:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 11341              		.loc 1 2860 0
 11342 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 11343 0070 5B00     		lsls	r3, r3, #1
 11344 0072 07F11002 		add	r2, r7, #16
 11345 0076 1344     		add	r3, r3, r2
 11346 0078 33F8083C 		ldrh	r3, [r3, #-8]
 11347 007c 013B     		subs	r3, r3, #1
 11348 007e 9BB2     		uxth	r3, r3
 11349 0080 0220     		movs	r0, #2
 11350 0082 1946     		mov	r1, r3
 11351 0084 FFF7FEFF 		bl	cc2400_set
2861:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 11352              		.loc 1 2861 0
 11353 0088 6120     		movs	r0, #97
 11354 008a FFF7FEFF 		bl	cc2400_strobe
2862:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 11355              		.loc 1 2862 0
 11356 008e 00BF     		nop
 11357              	.L591:
 11358              		.loc 1 2862 0 is_stmt 0 discriminator 1
 11359 0090 FFF7FEFF 		bl	cc2400_status
 11360 0094 0346     		mov	r3, r0
 11361 0096 03F00403 		and	r3, r3, #4
 11362 009a 002B     		cmp	r3, #0
 11363 009c F8D0     		beq	.L591
2863:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
ARM GAS  /tmp/cc6bdJLE.s 			page 250


 11364              		.loc 1 2863 0 is_stmt 1
 11365 009e 6220     		movs	r0, #98
 11366 00a0 FFF7FEFF 		bl	cc2400_strobe
2864:bluetooth_rxtx.c **** 
2865:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2866:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 11367              		.loc 1 2866 0
 11368 00a4 4FF4FA73 		mov	r3, #500
 11369 00a8 7B60     		str	r3, [r7, #4]
 11370 00aa 00BF     		nop
 11371              	.L592:
 11372              		.loc 1 2866 0 is_stmt 0 discriminator 2
 11373 00ac 7B68     		ldr	r3, [r7, #4]
 11374 00ae 013B     		subs	r3, r3, #1
 11375 00b0 7B60     		str	r3, [r7, #4]
 11376 00b2 002B     		cmp	r3, #0
 11377 00b4 FAD1     		bne	.L592
2867:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 11378              		.loc 1 2867 0 is_stmt 1
 11379 00b6 0620     		movs	r0, #6
 11380 00b8 FFF7FEFF 		bl	cc2400_get
 11381 00bc 0346     		mov	r3, r0
 11382 00be 1B0A     		lsrs	r3, r3, #8
 11383 00c0 9BB2     		uxth	r3, r3
 11384 00c2 BB73     		strb	r3, [r7, #14]
2868:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 11385              		.loc 1 2868 0
 11386 00c4 2E4B     		ldr	r3, .L604+8
 11387 00c6 1B78     		ldrb	r3, [r3]
 11388 00c8 DBB2     		uxtb	r3, r3
 11389 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 11390 00ce 5BB2     		sxtb	r3, r3
 11391 00d0 9A42     		cmp	r2, r3
 11392 00d2 15DD     		ble	.L593
2869:bluetooth_rxtx.c ****             switch (i) {
 11393              		.loc 1 2869 0
 11394 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 11395 00d6 012B     		cmp	r3, #1
 11396 00d8 09D0     		beq	.L595
 11397 00da 022B     		cmp	r3, #2
 11398 00dc 0BD0     		beq	.L596
 11399 00de 002B     		cmp	r3, #0
 11400 00e0 00D0     		beq	.L597
 11401 00e2 21E0     		b	.L598
 11402              	.L597:
2870:bluetooth_rxtx.c ****                 case 0:
2871:bluetooth_rxtx.c ****                     TXLED_SET;
 11403              		.loc 1 2871 0
 11404 00e4 274B     		ldr	r3, .L604+12
 11405 00e6 4FF48072 		mov	r2, #256
 11406 00ea 1A60     		str	r2, [r3]
2872:bluetooth_rxtx.c ****                     break;
 11407              		.loc 1 2872 0
 11408 00ec 07E0     		b	.L594
 11409              	.L595:
2873:bluetooth_rxtx.c ****                 case 1:
2874:bluetooth_rxtx.c ****                     RXLED_SET;
ARM GAS  /tmp/cc6bdJLE.s 			page 251


 11410              		.loc 1 2874 0
 11411 00ee 254B     		ldr	r3, .L604+12
 11412 00f0 1022     		movs	r2, #16
 11413 00f2 1A60     		str	r2, [r3]
2875:bluetooth_rxtx.c ****                     break;
 11414              		.loc 1 2875 0
 11415 00f4 03E0     		b	.L594
 11416              	.L596:
2876:bluetooth_rxtx.c ****                 case 2:
2877:bluetooth_rxtx.c ****                     USRLED_SET;
 11417              		.loc 1 2877 0
 11418 00f6 234B     		ldr	r3, .L604+12
 11419 00f8 0222     		movs	r2, #2
 11420 00fa 1A60     		str	r2, [r3]
2878:bluetooth_rxtx.c ****                     break;
 11421              		.loc 1 2878 0
 11422 00fc 00BF     		nop
 11423              	.L594:
 11424 00fe 13E0     		b	.L598
 11425              	.L593:
2879:bluetooth_rxtx.c ****             }
2880:bluetooth_rxtx.c ****         }
2881:bluetooth_rxtx.c ****         else {
2882:bluetooth_rxtx.c ****             switch (i) {
 11426              		.loc 1 2882 0
 11427 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 11428 0102 012B     		cmp	r3, #1
 11429 0104 08D0     		beq	.L599
 11430 0106 022B     		cmp	r3, #2
 11431 0108 0AD0     		beq	.L600
 11432 010a 002B     		cmp	r3, #0
 11433 010c 0CD1     		bne	.L598
2883:bluetooth_rxtx.c ****                 case 0:
2884:bluetooth_rxtx.c ****                     TXLED_CLR;
 11434              		.loc 1 2884 0
 11435 010e 1E4B     		ldr	r3, .L604+16
 11436 0110 4FF48072 		mov	r2, #256
 11437 0114 1A60     		str	r2, [r3]
2885:bluetooth_rxtx.c ****                     break;
 11438              		.loc 1 2885 0
 11439 0116 07E0     		b	.L598
 11440              	.L599:
2886:bluetooth_rxtx.c ****                 case 1:
2887:bluetooth_rxtx.c ****                     RXLED_CLR;
 11441              		.loc 1 2887 0
 11442 0118 1B4B     		ldr	r3, .L604+16
 11443 011a 1022     		movs	r2, #16
 11444 011c 1A60     		str	r2, [r3]
2888:bluetooth_rxtx.c ****                     break;
 11445              		.loc 1 2888 0
 11446 011e 03E0     		b	.L598
 11447              	.L600:
2889:bluetooth_rxtx.c ****                 case 2:
2890:bluetooth_rxtx.c ****                     USRLED_CLR;
 11448              		.loc 1 2890 0
 11449 0120 194B     		ldr	r3, .L604+16
 11450 0122 0222     		movs	r2, #2
ARM GAS  /tmp/cc6bdJLE.s 			page 252


 11451 0124 1A60     		str	r2, [r3]
2891:bluetooth_rxtx.c ****                     break;
 11452              		.loc 1 2891 0
 11453 0126 00BF     		nop
 11454              	.L598:
2892:bluetooth_rxtx.c ****             }
2893:bluetooth_rxtx.c ****         }
2894:bluetooth_rxtx.c **** 
2895:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 11455              		.loc 1 2895 0
 11456 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 11457 012a 5A1C     		adds	r2, r3, #1
 11458 012c 174B     		ldr	r3, .L604+20
 11459 012e 83FB0231 		smull	r3, r1, r3, r2
 11460 0132 D317     		asrs	r3, r2, #31
 11461 0134 C91A     		subs	r1, r1, r3
 11462 0136 0B46     		mov	r3, r1
 11463 0138 5B00     		lsls	r3, r3, #1
 11464 013a 0B44     		add	r3, r3, r1
 11465 013c D11A     		subs	r1, r2, r3
 11466 013e 0B46     		mov	r3, r1
 11467 0140 FB73     		strb	r3, [r7, #15]
2896:bluetooth_rxtx.c **** 
2897:bluetooth_rxtx.c **** 		handle_usb(clkn);
 11468              		.loc 1 2897 0
 11469 0142 134B     		ldr	r3, .L604+24
 11470 0144 1B68     		ldr	r3, [r3]
 11471 0146 1846     		mov	r0, r3
 11472 0148 FFF7FEFF 		bl	handle_usb
2898:bluetooth_rxtx.c ****         //wait(1);
2899:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 11473              		.loc 1 2899 0
 11474 014c 6420     		movs	r0, #100
 11475 014e FFF7FEFF 		bl	cc2400_strobe
2900:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 11476              		.loc 1 2900 0
 11477 0152 00BF     		nop
 11478              	.L602:
 11479              		.loc 1 2900 0 is_stmt 0 discriminator 1
 11480 0154 FFF7FEFF 		bl	cc2400_status
 11481 0158 0346     		mov	r3, r0
 11482 015a 03F00403 		and	r3, r3, #4
 11483 015e 002B     		cmp	r3, #0
 11484 0160 F8D1     		bne	.L602
 11485              	.L590:
 11486              	.LBE27:
2859:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 11487              		.loc 1 2859 0 is_stmt 1
 11488 0162 0C4B     		ldr	r3, .L604+28
 11489 0164 1B78     		ldrb	r3, [r3]
 11490 0166 DBB2     		uxtb	r3, r3
 11491 0168 072B     		cmp	r3, #7
 11492 016a 80D0     		beq	.L603
2901:bluetooth_rxtx.c **** 	}
2902:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 11493              		.loc 1 2902 0
 11494 016c 0A4B     		ldr	r3, .L604+32
ARM GAS  /tmp/cc6bdJLE.s 			page 253


 11495 016e 0022     		movs	r2, #0
 11496 0170 1A70     		strb	r2, [r3]
2903:bluetooth_rxtx.c **** }
 11497              		.loc 1 2903 0
 11498 0172 1037     		adds	r7, r7, #16
 11499              		.cfi_def_cfa_offset 8
 11500 0174 BD46     		mov	sp, r7
 11501              		.cfi_def_cfa_register 13
 11502              		@ sp needed
 11503 0176 80BD     		pop	{r7, pc}
 11504              	.L605:
 11505              		.align	2
 11506              	.L604:
 11507 0178 00090000 		.word	.LC2
 11508 017c 58C00920 		.word	537509976
 11509 0180 00000000 		.word	rssi_threshold
 11510 0184 38C00920 		.word	537509944
 11511 0188 3CC00920 		.word	537509948
 11512 018c 56555555 		.word	1431655766
 11513 0190 00000000 		.word	clkn
 11514 0194 00000000 		.word	requested_mode
 11515 0198 00000000 		.word	mode
 11516              		.cfi_endproc
 11517              	.LFE49:
 11519              		.section	.text.main,"ax",%progbits
 11520              		.align	2
 11521              		.global	main
 11522              		.thumb
 11523              		.thumb_func
 11525              	main:
 11526              	.LFB50:
2904:bluetooth_rxtx.c **** 
2905:bluetooth_rxtx.c **** int main()
2906:bluetooth_rxtx.c **** {
 11527              		.loc 1 2906 0
 11528              		.cfi_startproc
 11529              		@ args = 0, pretend = 0, frame = 0
 11530              		@ frame_needed = 1, uses_anonymous_args = 0
 11531 0000 80B5     		push	{r7, lr}
 11532              		.cfi_def_cfa_offset 8
 11533              		.cfi_offset 7, -8
 11534              		.cfi_offset 14, -4
 11535 0002 00AF     		add	r7, sp, #0
 11536              		.cfi_def_cfa_register 7
2907:bluetooth_rxtx.c **** 	ubertooth_init();
 11537              		.loc 1 2907 0
 11538 0004 FFF7FEFF 		bl	ubertooth_init
2908:bluetooth_rxtx.c **** 	clkn_init();
 11539              		.loc 1 2908 0
 11540 0008 FFF7FEFF 		bl	clkn_init
2909:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 11541              		.loc 1 2909 0
 11542 000c 4B48     		ldr	r0, .L628
 11543 000e FFF7FEFF 		bl	ubertooth_usb_init
 11544              	.L626:
2910:bluetooth_rxtx.c **** 
2911:bluetooth_rxtx.c **** 	while (1) {
ARM GAS  /tmp/cc6bdJLE.s 			page 254


2912:bluetooth_rxtx.c **** 		handle_usb(clkn);
 11545              		.loc 1 2912 0
 11546 0012 4B4B     		ldr	r3, .L628+4
 11547 0014 1B68     		ldr	r3, [r3]
 11548 0016 1846     		mov	r0, r3
 11549 0018 FFF7FEFF 		bl	handle_usb
2913:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 11550              		.loc 1 2913 0
 11551 001c 494B     		ldr	r3, .L628+8
 11552 001e 1B78     		ldrb	r3, [r3]
 11553 0020 DAB2     		uxtb	r2, r3
 11554 0022 494B     		ldr	r3, .L628+12
 11555 0024 1B78     		ldrb	r3, [r3]
 11556 0026 DBB2     		uxtb	r3, r3
 11557 0028 9A42     		cmp	r2, r3
 11558 002a 00F08680 		beq	.L607
2914:bluetooth_rxtx.c **** 			switch (requested_mode) {
 11559              		.loc 1 2914 0
 11560 002e 454B     		ldr	r3, .L628+8
 11561 0030 1B78     		ldrb	r3, [r3]
 11562 0032 DBB2     		uxtb	r3, r3
 11563 0034 0F2B     		cmp	r3, #15
 11564 0036 7FD8     		bhi	.L627
 11565 0038 01A2     		adr	r2, .L610
 11566 003a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 11567 003e 00BF     		.p2align 2
 11568              	.L610:
 11569 0040 33010000 		.word	.L609+1
 11570 0044 8D000000 		.word	.L611+1
 11571 0048 39010000 		.word	.L627+1
 11572 004c CF000000 		.word	.L612+1
 11573 0050 13010000 		.word	.L613+1
 11574 0054 DF000000 		.word	.L614+1
 11575 0058 05010000 		.word	.L615+1
 11576 005c 19010000 		.word	.L616+1
 11577 0060 B1000000 		.word	.L617+1
 11578 0064 BD000000 		.word	.L618+1
 11579 0068 C3000000 		.word	.L619+1
 11580 006c 81000000 		.word	.L620+1
 11581 0070 C9000000 		.word	.L621+1
 11582 0074 1F010000 		.word	.L622+1
 11583 0078 99000000 		.word	.L623+1
 11584 007c A5000000 		.word	.L624+1
 11585              		.p2align 1
 11586              	.L620:
2915:bluetooth_rxtx.c **** 				 case MODE_RESET:
2916:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2917:bluetooth_rxtx.c **** 					wait(1);
 11587              		.loc 1 2917 0
 11588 0080 0120     		movs	r0, #1
 11589 0082 FFF7FEFF 		bl	wait
2918:bluetooth_rxtx.c **** 					reset();
 11590              		.loc 1 2918 0
 11591 0086 FFF7FEFF 		bl	reset
2919:bluetooth_rxtx.c **** 					break;
 11592              		.loc 1 2919 0
 11593 008a 56E0     		b	.L607
ARM GAS  /tmp/cc6bdJLE.s 			page 255


 11594              	.L611:
2920:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2921:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 11595              		.loc 1 2921 0
 11596 008c 2E4B     		ldr	r3, .L628+12
 11597 008e 0122     		movs	r2, #1
 11598 0090 1A70     		strb	r2, [r3]
2922:bluetooth_rxtx.c **** 					bt_stream_rx();
 11599              		.loc 1 2922 0
 11600 0092 FFF7FEFF 		bl	bt_stream_rx
2923:bluetooth_rxtx.c **** 					break;
 11601              		.loc 1 2923 0
 11602 0096 50E0     		b	.L607
 11603              	.L623:
2924:bluetooth_rxtx.c **** 				case MODE_RX_FREQ:
2925:bluetooth_rxtx.c **** 					mode = MODE_RX_FREQ;
 11604              		.loc 1 2925 0
 11605 0098 2B4B     		ldr	r3, .L628+12
 11606 009a 0E22     		movs	r2, #14
 11607 009c 1A70     		strb	r2, [r3]
2926:bluetooth_rxtx.c **** 					bt_stream_freq();
 11608              		.loc 1 2926 0
 11609 009e FFF7FEFF 		bl	bt_stream_freq
2927:bluetooth_rxtx.c **** 					break;
 11610              		.loc 1 2927 0
 11611 00a2 4AE0     		b	.L607
 11612              	.L624:
2928:bluetooth_rxtx.c **** 				case MODE_RX_PROPOSED:
2929:bluetooth_rxtx.c **** 					mode = MODE_RX_PROPOSED;
 11613              		.loc 1 2929 0
 11614 00a4 284B     		ldr	r3, .L628+12
 11615 00a6 0F22     		movs	r2, #15
 11616 00a8 1A70     		strb	r2, [r3]
2930:bluetooth_rxtx.c **** 					bt_stream_proposed();
 11617              		.loc 1 2930 0
 11618 00aa FFF7FEFF 		bl	bt_stream_proposed
2931:bluetooth_rxtx.c **** 					break;
 11619              		.loc 1 2931 0
 11620 00ae 44E0     		b	.L607
 11621              	.L617:
2932:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2933:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 11622              		.loc 1 2933 0
 11623 00b0 254B     		ldr	r3, .L628+12
 11624 00b2 0822     		movs	r2, #8
 11625 00b4 1A70     		strb	r2, [r3]
2934:bluetooth_rxtx.c **** 					bt_stream_rx();
 11626              		.loc 1 2934 0
 11627 00b6 FFF7FEFF 		bl	bt_stream_rx
2935:bluetooth_rxtx.c **** 					break;
 11628              		.loc 1 2935 0
 11629 00ba 3EE0     		b	.L607
 11630              	.L618:
2936:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2937:bluetooth_rxtx.c **** 					bt_follow_le();
 11631              		.loc 1 2937 0
 11632 00bc FFF7FEFF 		bl	bt_follow_le
ARM GAS  /tmp/cc6bdJLE.s 			page 256


2938:bluetooth_rxtx.c **** 					break;
 11633              		.loc 1 2938 0
 11634 00c0 3BE0     		b	.L607
 11635              	.L619:
2939:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2940:bluetooth_rxtx.c **** 					bt_promisc_le();
 11636              		.loc 1 2940 0
 11637 00c2 FFF7FEFF 		bl	bt_promisc_le
2941:bluetooth_rxtx.c **** 					break;
 11638              		.loc 1 2941 0
 11639 00c6 38E0     		b	.L607
 11640              	.L621:
2942:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2943:bluetooth_rxtx.c **** 					bt_slave_le();
 11641              		.loc 1 2943 0
 11642 00c8 FFF7FEFF 		bl	bt_slave_le
2944:bluetooth_rxtx.c **** 					break;
 11643              		.loc 1 2944 0
 11644 00cc 35E0     		b	.L607
 11645              	.L612:
2945:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2946:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 11646              		.loc 1 2946 0
 11647 00ce 1E4B     		ldr	r3, .L628+12
 11648 00d0 0322     		movs	r2, #3
 11649 00d2 1A70     		strb	r2, [r3]
2947:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 11650              		.loc 1 2947 0
 11651 00d4 1D48     		ldr	r0, .L628+16
 11652 00d6 1E49     		ldr	r1, .L628+20
 11653 00d8 FFF7FEFF 		bl	cc2400_txtest
2948:bluetooth_rxtx.c **** 					break;
 11654              		.loc 1 2948 0
 11655 00dc 2DE0     		b	.L607
 11656              	.L614:
2949:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2950:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 11657              		.loc 1 2950 0
 11658 00de 1A4B     		ldr	r3, .L628+12
 11659 00e0 0522     		movs	r2, #5
 11660 00e2 1A70     		strb	r2, [r3]
2951:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 11661              		.loc 1 2951 0
 11662 00e4 1A48     		ldr	r0, .L628+20
 11663 00e6 FFF7FEFF 		bl	cc2400_rangetest
2952:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 11664              		.loc 1 2952 0
 11665 00ea 174B     		ldr	r3, .L628+12
 11666 00ec 0022     		movs	r2, #0
 11667 00ee 1A70     		strb	r2, [r3]
2953:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 11668              		.loc 1 2953 0
 11669 00f0 144B     		ldr	r3, .L628+8
 11670 00f2 1B78     		ldrb	r3, [r3]
 11671 00f4 DBB2     		uxtb	r3, r3
 11672 00f6 052B     		cmp	r3, #5
 11673 00f8 03D1     		bne	.L625
ARM GAS  /tmp/cc6bdJLE.s 			page 257


2954:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 11674              		.loc 1 2954 0
 11675 00fa 124B     		ldr	r3, .L628+8
 11676 00fc 0022     		movs	r2, #0
 11677 00fe 1A70     		strb	r2, [r3]
2955:bluetooth_rxtx.c **** 					break;
 11678              		.loc 1 2955 0
 11679 0100 1BE0     		b	.L607
 11680              	.L625:
 11681 0102 1AE0     		b	.L607
 11682              	.L615:
2956:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2957:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 11683              		.loc 1 2957 0
 11684 0104 104B     		ldr	r3, .L628+12
 11685 0106 0622     		movs	r2, #6
 11686 0108 1A70     		strb	r2, [r3]
2958:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 11687              		.loc 1 2958 0
 11688 010a 1148     		ldr	r0, .L628+20
 11689 010c FFF7FEFF 		bl	cc2400_repeater
2959:bluetooth_rxtx.c **** 					break;
 11690              		.loc 1 2959 0
 11691 0110 13E0     		b	.L607
 11692              	.L613:
2960:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2961:bluetooth_rxtx.c **** 					specan();
 11693              		.loc 1 2961 0
 11694 0112 FFF7FEFF 		bl	specan
2962:bluetooth_rxtx.c **** 					break;
 11695              		.loc 1 2962 0
 11696 0116 10E0     		b	.L607
 11697              	.L616:
2963:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2964:bluetooth_rxtx.c **** 					led_specan();
 11698              		.loc 1 2964 0
 11699 0118 FFF7FEFF 		bl	led_specan
2965:bluetooth_rxtx.c **** 					break;
 11700              		.loc 1 2965 0
 11701 011c 0DE0     		b	.L607
 11702              	.L622:
2966:bluetooth_rxtx.c **** 				case MODE_EGO:
2967:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 11703              		.loc 1 2967 0
 11704 011e 0A4B     		ldr	r3, .L628+12
 11705 0120 0D22     		movs	r2, #13
 11706 0122 1A70     		strb	r2, [r3]
2968:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 11707              		.loc 1 2968 0
 11708 0124 0B4B     		ldr	r3, .L628+24
 11709 0126 1B78     		ldrb	r3, [r3]
 11710 0128 DBB2     		uxtb	r3, r3
 11711 012a 1846     		mov	r0, r3
 11712 012c FFF7FEFF 		bl	ego_main
2969:bluetooth_rxtx.c **** 					break;
 11713              		.loc 1 2969 0
 11714 0130 03E0     		b	.L607
ARM GAS  /tmp/cc6bdJLE.s 			page 258


 11715              	.L609:
2970:bluetooth_rxtx.c **** 				case MODE_IDLE:
2971:bluetooth_rxtx.c **** 					cc2400_idle();
 11716              		.loc 1 2971 0
 11717 0132 FFF7FEFF 		bl	cc2400_idle
2972:bluetooth_rxtx.c **** 					break;
 11718              		.loc 1 2972 0
 11719 0136 00E0     		b	.L607
 11720              	.L627:
2973:bluetooth_rxtx.c **** 				default:
2974:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2975:bluetooth_rxtx.c **** 					break;
 11721              		.loc 1 2975 0
 11722 0138 00BF     		nop
 11723              	.L607:
2976:bluetooth_rxtx.c **** 			}
2977:bluetooth_rxtx.c **** 	}
 11724              		.loc 1 2977 0 discriminator 1
 11725 013a 6AE7     		b	.L626
 11726              	.L629:
 11727              		.align	2
 11728              	.L628:
 11729 013c 00000000 		.word	vendor_request_handler
 11730 0140 00000000 		.word	clkn
 11731 0144 00000000 		.word	requested_mode
 11732 0148 00000000 		.word	mode
 11733 014c 00000000 		.word	modulation
 11734 0150 00000000 		.word	channel
 11735 0154 00000000 		.word	ego_mode
 11736              		.cfi_endproc
 11737              	.LFE50:
 11739              		.bss
 11740              		.align	2
 11741              	restart_jamming.4824:
 11742 00d4 00000000 		.space	4
 11743              		.align	2
 11744              	first_ts.4922:
 11745 00d8 00000000 		.space	4
 11746              		.align	2
 11747              	prev_clk.4928:
 11748 00dc 00000000 		.space	4
 11749              		.text
 11750              	.Letext0:
 11751              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 11752              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 11753              		.file 4 "../common/ubertooth.h"
 11754              		.file 5 "bluetooth_le.h"
 11755              		.file 6 "bluetooth.h"
 11756              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/cc6bdJLE.s 			page 259


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/cc6bdJLE.s:19     .data:0000000000000000 $d
     /tmp/cc6bdJLE.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/cc6bdJLE.s:29     .rodata:0000000000000000 $d
     /tmp/cc6bdJLE.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/cc6bdJLE.s:39     .rodata:0000000000000004 data_channels
     /tmp/cc6bdJLE.s:80     .rodata:000000000000002c payload
     /tmp/cc6bdJLE.s:104    .rodata:0000000000000040 whitening
     /tmp/cc6bdJLE.s:235    .rodata:00000000000000c0 whitening_index
     /tmp/cc6bdJLE.s:279    .rodata:00000000000000e8 hop_interval_lut
     /tmp/cc6bdJLE.s:320    .rodata:0000000000000110 whitening_word
                            *COM*:0000000000000005 rr
     /tmp/cc6bdJLE.s:806    .rodata:0000000000000890 compile_info
                            *COM*:0000000000000001 device_index
                            *COM*:0000000000000004 first_ts
                            *COM*:0000000000000004 second_ts
                            *COM*:0000000000000004 diff_ts
                            *COM*:0000000000000001 rssi_avg
                            *COM*:0000000000000001 freq_avg
                            *COM*:0000000000000004 clkn
     /tmp/cc6bdJLE.s:820    .bss:0000000000000000 hop_mode
     /tmp/cc6bdJLE.s:821    .bss:0000000000000000 $d
     /tmp/cc6bdJLE.s:825    .bss:0000000000000001 do_hop
     /tmp/cc6bdJLE.s:830    .bss:0000000000000002 cs_no_squelch
     /tmp/cc6bdJLE.s:836    .data:0000000000000004 cs_threshold_req
     /tmp/cc6bdJLE.s:841    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/cc6bdJLE.s:851    .bss:0000000000000004 hop_direct_channel
     /tmp/cc6bdJLE.s:857    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/cc6bdJLE.s:867    .bss:000000000000000c idle_buf_channel
     /tmp/cc6bdJLE.s:873    .bss:000000000000000e active_buf_channel
     /tmp/cc6bdJLE.s:879    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/cc6bdJLE.s:888    .data:0000000000000008 active_rxbuf
     /tmp/cc6bdJLE.s:894    .data:000000000000000c idle_rxbuf
     /tmp/cc6bdJLE.s:900    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/cc6bdJLE.s:919    .bss:0000000000000018 le_jam_count
     /tmp/cc6bdJLE.s:925    .bss:000000000000001c data_cb
     /tmp/cc6bdJLE.s:931    .bss:0000000000000020 packet_cb
     /tmp/cc6bdJLE.s:937    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/cc6bdJLE.s:943    .bss:00000000000000c2 mode
     /tmp/cc6bdJLE.s:948    .bss:00000000000000c3 requested_mode
     /tmp/cc6bdJLE.s:953    .bss:00000000000000c4 jam_mode
ARM GAS  /tmp/cc6bdJLE.s 			page 260


     /tmp/cc6bdJLE.s:958    .bss:00000000000000c5 ego_mode
     /tmp/cc6bdJLE.s:963    .bss:00000000000000c6 modulation
     /tmp/cc6bdJLE.s:970    .data:0000000000000054 channel
     /tmp/cc6bdJLE.s:977    .bss:00000000000000c8 requested_channel
     /tmp/cc6bdJLE.s:983    .bss:00000000000000ca saved_request
     /tmp/cc6bdJLE.s:990    .data:0000000000000056 low_freq
     /tmp/cc6bdJLE.s:996    .data:0000000000000058 high_freq
     /tmp/cc6bdJLE.s:1001   .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/cc6bdJLE.s:1012   .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/cc6bdJLE.s:1019   .bss:00000000000000cd rssi_count
     /tmp/cc6bdJLE.s:1025   .bss:00000000000000d0 rssi_sum
     /tmp/cc6bdJLE.s:1028   .text.rssi_reset:0000000000000000 $t
     /tmp/cc6bdJLE.s:1032   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/cc6bdJLE.s:1072   .text.rssi_reset:0000000000000024 $d
     /tmp/cc6bdJLE.s:1080   .text.rssi_add:0000000000000000 $t
     /tmp/cc6bdJLE.s:1084   .text.rssi_add:0000000000000000 rssi_add
     /tmp/cc6bdJLE.s:1150   .text.rssi_add:000000000000005c $d
     /tmp/cc6bdJLE.s:1158   .text.rssi_iir_update:0000000000000000 $t
     /tmp/cc6bdJLE.s:1162   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/cc6bdJLE.s:1256   .text.rssi_iir_update:0000000000000084 $d
     /tmp/cc6bdJLE.s:1265   .text.cs_threshold_set:0000000000000000 $t
     /tmp/cc6bdJLE.s:1269   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/cc6bdJLE.s:1351   .text.cs_threshold_set:0000000000000084 $d
     /tmp/cc6bdJLE.s:1357   .text.enqueue:0000000000000000 $t
     /tmp/cc6bdJLE.s:1361   .text.enqueue:0000000000000000 enqueue
     /tmp/cc6bdJLE.s:1582   .text.enqueue:0000000000000154 $d
     /tmp/cc6bdJLE.s:1596   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/cc6bdJLE.s:1601   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/cc6bdJLE.s:1684   .text.enqueue_with_ts:000000000000006c $d
     /tmp/cc6bdJLE.s:1692   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/cc6bdJLE.s:1696   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/cc6bdJLE.s:1771   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/cc6bdJLE.s:1779   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/cc6bdJLE.s:1783   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/cc6bdJLE.s:1824   .text.cs_trigger_enable:000000000000002c $d
     /tmp/cc6bdJLE.s:1832   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/cc6bdJLE.s:1836   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/cc6bdJLE.s:1877   .text.cs_trigger_disable:000000000000002c $d
     /tmp/cc6bdJLE.s:1889   .text.vendor_request_handler:0000000000000000 $t
     /tmp/cc6bdJLE.s:1893   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/cc6bdJLE.s:1930   .text.vendor_request_handler:0000000000000024 $d
     /tmp/cc6bdJLE.s:1993   .text.vendor_request_handler:0000000000000120 $t
     /tmp/cc6bdJLE.s:2408   .text.vendor_request_handler:00000000000003c8 $d
     /tmp/cc6bdJLE.s:2417   .text.vendor_request_handler:00000000000003e4 $t
     /tmp/cc6bdJLE.s:2808   .text.vendor_request_handler:0000000000000638 $d
     /tmp/cc6bdJLE.s:2826   .text.vendor_request_handler:0000000000000678 $t
     /tmp/cc6bdJLE.s:3216   .text.vendor_request_handler:0000000000000918 $d
     /tmp/cc6bdJLE.s:3228   .text.vendor_request_handler:0000000000000940 $t
     /tmp/cc6bdJLE.s:7342   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/cc6bdJLE.s:3512   .text.vendor_request_handler:0000000000000af8 $d
ARM GAS  /tmp/cc6bdJLE.s 			page 261


     /tmp/cc6bdJLE.s:3522   .text.clkn_init:0000000000000000 $t
     /tmp/cc6bdJLE.s:3526   .text.clkn_init:0000000000000000 clkn_init
     /tmp/cc6bdJLE.s:3577   .text.clkn_init:0000000000000038 $d
     /tmp/cc6bdJLE.s:3587   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/cc6bdJLE.s:3592   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/cc6bdJLE.s:3761   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/cc6bdJLE.s:3773   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/cc6bdJLE.s:3778   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/cc6bdJLE.s:3820   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/cc6bdJLE.s:3834   .text.msleep:0000000000000000 $t
     /tmp/cc6bdJLE.s:3838   .text.msleep:0000000000000000 msleep
     /tmp/cc6bdJLE.s:3907   .text.msleep:0000000000000070 $d
     /tmp/cc6bdJLE.s:3915   .text.dma_init:0000000000000000 $t
     /tmp/cc6bdJLE.s:3919   .text.dma_init:0000000000000000 dma_init
     /tmp/cc6bdJLE.s:4093   .text.dma_init:0000000000000104 $d
     /tmp/cc6bdJLE.s:4128   .text.dma_init_le:0000000000000000 $t
     /tmp/cc6bdJLE.s:4132   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/cc6bdJLE.s:4337   .text.dma_init_le:0000000000000134 $d
     /tmp/cc6bdJLE.s:4369   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/cc6bdJLE.s:4374   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/cc6bdJLE.s:4477   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/cc6bdJLE.s:4497   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/cc6bdJLE.s:4502   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/cc6bdJLE.s:4525   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/cc6bdJLE.s:4540   .text.DMA_IRQHandler:0000000000000054 $t
     /tmp/cc6bdJLE.s:4552   .text.DMA_IRQHandler:000000000000005c $d
     /tmp/cc6bdJLE.s:4557   .text.dio_ssp_start:0000000000000000 $t
     /tmp/cc6bdJLE.s:4561   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/cc6bdJLE.s:4614   .text.dio_ssp_start:0000000000000048 $d
     /tmp/cc6bdJLE.s:4624   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/cc6bdJLE.s:4628   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/cc6bdJLE.s:4726   .text.dio_ssp_stop:000000000000008c $d
     /tmp/cc6bdJLE.s:4745   .text.cc2400_idle:0000000000000000 $t
     /tmp/cc6bdJLE.s:4749   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/cc6bdJLE.s:4802   .text.cc2400_idle:0000000000000044 $d
     /tmp/cc6bdJLE.s:4809   .text.cc2400_rx:0000000000000000 $t
     /tmp/cc6bdJLE.s:4813   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/cc6bdJLE.s:4927   .text.cc2400_rx:00000000000000b0 $d
     /tmp/cc6bdJLE.s:4934   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/cc6bdJLE.s:4938   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/cc6bdJLE.s:5073   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/cc6bdJLE.s:5080   .text.le_transmit:0000000000000000 $t
     /tmp/cc6bdJLE.s:5085   .text.le_transmit:0000000000000000 le_transmit
     /tmp/cc6bdJLE.s:5478   .text.le_transmit:00000000000002d4 $d
     /tmp/cc6bdJLE.s:5491   .text.le_jam:0000000000000000 $t
     /tmp/cc6bdJLE.s:5496   .text.le_jam:0000000000000000 le_jam
     /tmp/cc6bdJLE.s:5579   .text.le_jam:000000000000008c $d
     /tmp/cc6bdJLE.s:5585   .text.hop:0000000000000000 $t
     /tmp/cc6bdJLE.s:5590   .text.hop:0000000000000000 hop
     /tmp/cc6bdJLE.s:5757   .text.hop:000000000000010c $d
     /tmp/cc6bdJLE.s:5768   .text.cc2400_spi_rev:0000000000000000 $t
     /tmp/cc6bdJLE.s:5773   .text.cc2400_spi_rev:0000000000000000 cc2400_spi_rev
     /tmp/cc6bdJLE.s:5870   .text.cc2400_spi_rev:000000000000007c $d
     /tmp/cc6bdJLE.s:5877   .text.cc2400_get_rev:0000000000000000 $t
     /tmp/cc6bdJLE.s:5882   .text.cc2400_get_rev:0000000000000000 cc2400_get_rev
     /tmp/cc6bdJLE.s:5924   .text.add:0000000000000000 $t
     /tmp/cc6bdJLE.s:5929   .text.add:0000000000000000 add
ARM GAS  /tmp/cc6bdJLE.s 			page 262


     /tmp/cc6bdJLE.s:5989   .text.bt_stream_proposed:0000000000000000 $t
     /tmp/cc6bdJLE.s:5994   .text.bt_stream_proposed:0000000000000000 bt_stream_proposed
     /tmp/cc6bdJLE.s:6296   .text.bt_stream_proposed:0000000000000228 $d
     /tmp/cc6bdJLE.s:6311   .text.bt_stream_freq:0000000000000000 $t
     /tmp/cc6bdJLE.s:6316   .text.bt_stream_freq:0000000000000000 bt_stream_freq
     /tmp/cc6bdJLE.s:6753   .text.bt_stream_freq:00000000000002e8 $d
     /tmp/cc6bdJLE.s:6771   .text.bt_stream_freq:0000000000000324 $t
     /tmp/cc6bdJLE.s:6815   .text.bt_stream_freq:0000000000000364 $d
     /tmp/cc6bdJLE.s:6824   .text.bt_stream_rx:0000000000000000 $t
     /tmp/cc6bdJLE.s:6829   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/cc6bdJLE.s:7262   .text.bt_stream_rx:0000000000000308 $d
     /tmp/cc6bdJLE.s:7281   .text.bt_stream_rx:0000000000000348 $t
     /tmp/cc6bdJLE.s:7329   .text.bt_stream_rx:0000000000000390 $d
     /tmp/cc6bdJLE.s:7338   .text.le_set_access_address:0000000000000000 $t
     /tmp/cc6bdJLE.s:7386   .text.le_set_access_address:0000000000000030 $d
     /tmp/cc6bdJLE.s:7391   .text.reset_le:0000000000000000 $t
     /tmp/cc6bdJLE.s:7396   .text.reset_le:0000000000000000 reset_le
     /tmp/cc6bdJLE.s:7492   .text.reset_le:0000000000000084 $d
     /tmp/cc6bdJLE.s:7501   .text.reset_le_promisc:0000000000000000 $t
     /tmp/cc6bdJLE.s:7506   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/cc6bdJLE.s:7532   .text.reset_le_promisc:000000000000001c $d
     /tmp/cc6bdJLE.s:7537   .text.bt_generic_le:0000000000000000 $t
     /tmp/cc6bdJLE.s:7542   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/cc6bdJLE.s:7968   .text.bt_generic_le:00000000000002a0 $d
     /tmp/cc6bdJLE.s:7994   .text.bt_le_sync:0000000000000000 $t
     /tmp/cc6bdJLE.s:7999   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/cc6bdJLE.s:8347   .text.bt_le_sync:0000000000000228 $d
     /tmp/cc6bdJLE.s:8368   .text.bt_le_sync:0000000000000270 $t
     /tmp/cc6bdJLE.s:8766   .text.bt_le_sync:0000000000000508 $d
     /tmp/cc6bdJLE.s:11741  .bss:00000000000000d4 restart_jamming.4824
     /tmp/cc6bdJLE.s:8791   .text.cb_follow_le:0000000000000000 $t
     /tmp/cc6bdJLE.s:8796   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/cc6bdJLE.s:9086   .text.cb_follow_le:00000000000001b8 $d
     /tmp/cc6bdJLE.s:9099   .text.connection_follow_cb:0000000000000000 $t
     /tmp/cc6bdJLE.s:9104   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/cc6bdJLE.s:9482   .text.connection_follow_cb:0000000000000260 $d
     /tmp/cc6bdJLE.s:9492   .text.bt_follow_le:0000000000000000 $t
     /tmp/cc6bdJLE.s:9497   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/cc6bdJLE.s:9527   .text.bt_follow_le:000000000000001c $d
     /tmp/cc6bdJLE.s:9534   .text.le_promisc_state:0000000000000000 $t
     /tmp/cc6bdJLE.s:9539   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/cc6bdJLE.s:9632   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/cc6bdJLE.s:9637   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/cc6bdJLE.s:9846   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/cc6bdJLE.s:11744  .bss:00000000000000d8 first_ts.4922
     /tmp/cc6bdJLE.s:9865   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/cc6bdJLE.s:9870   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/cc6bdJLE.s:10005  .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/cc6bdJLE.s:11747  .bss:00000000000000dc prev_clk.4928
     /tmp/cc6bdJLE.s:10022  .text.promisc_follow_cb:0000000000000000 $t
     /tmp/cc6bdJLE.s:10027  .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/cc6bdJLE.s:10142  .text.promisc_follow_cb:00000000000000ac $d
     /tmp/cc6bdJLE.s:10150  .text.see_aa:0000000000000000 $t
     /tmp/cc6bdJLE.s:10155  .text.see_aa:0000000000000000 see_aa
     /tmp/cc6bdJLE.s:10276  .text.see_aa:00000000000000a4 $d
     /tmp/cc6bdJLE.s:10288  .text.cb_le_promisc:0000000000000000 $t
     /tmp/cc6bdJLE.s:10293  .text.cb_le_promisc:0000000000000000 cb_le_promisc
ARM GAS  /tmp/cc6bdJLE.s 			page 263


     /tmp/cc6bdJLE.s:10745  .text.cb_le_promisc:00000000000002e0 $d
     /tmp/cc6bdJLE.s:10761  .text.bt_promisc_le:0000000000000000 $t
     /tmp/cc6bdJLE.s:10766  .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/cc6bdJLE.s:10848  .text.bt_promisc_le:000000000000006c $d
     /tmp/cc6bdJLE.s:10876  .text.bt_slave_le:0000000000000000 $t
     /tmp/cc6bdJLE.s:10881  .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/cc6bdJLE.s:11016  .text.bt_slave_le:00000000000000dc $d
     /tmp/cc6bdJLE.s:11027  .text.specan:0000000000000000 $t
     /tmp/cc6bdJLE.s:11032  .text.specan:0000000000000000 specan
     /tmp/cc6bdJLE.s:11248  .text.specan:0000000000000178 $d
     /tmp/cc6bdJLE.s:11266  .text.led_specan:0000000000000000 $t
     /tmp/cc6bdJLE.s:11271  .text.led_specan:0000000000000000 led_specan
     /tmp/cc6bdJLE.s:11507  .text.led_specan:0000000000000178 $d
     /tmp/cc6bdJLE.s:11520  .text.main:0000000000000000 $t
     /tmp/cc6bdJLE.s:11525  .text.main:0000000000000000 main
     /tmp/cc6bdJLE.s:11569  .text.main:0000000000000040 $d
     /tmp/cc6bdJLE.s:11585  .text.main:0000000000000080 $t
     /tmp/cc6bdJLE.s:11729  .text.main:000000000000013c $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
handle_usb
dio_ssp_init
rbit
btle_crcgen_lut
memset
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
