ARM GAS  /tmp/ccxwuSCA.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccxwuSCA.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	payload:
  81 002c CA       		.byte	-54
  82 002d AA       		.byte	-86
  83 002e AA       		.byte	-86
  84 002f AA       		.byte	-86
  85 0030 AA       		.byte	-86
  86 0031 AA       		.byte	-86
  87 0032 AA       		.byte	-86
  88 0033 AA       		.byte	-86
  89 0034 AA       		.byte	-86
  90 0035 AA       		.byte	-86
  91 0036 AA       		.byte	-86
  92 0037 AA       		.byte	-86
  93 0038 AA       		.byte	-86
  94 0039 AA       		.byte	-86
  95 003a AA       		.byte	-86
  96 003b AA       		.byte	-86
  97 003c AA       		.byte	-86
  98 003d AA       		.byte	-86
  99 003e AA       		.byte	-86
 100 003f AA       		.byte	-86
 101              		.align	2
 104              	whitening:
 105 0040 01       		.byte	1
 106 0041 01       		.byte	1
 107 0042 01       		.byte	1
 108 0043 01       		.byte	1
 109 0044 00       		.byte	0
 110 0045 01       		.byte	1
 111 0046 00       		.byte	0
 112 0047 01       		.byte	1
 113 0048 00       		.byte	0
 114 0049 01       		.byte	1
 115 004a 00       		.byte	0
 116 004b 00       		.byte	0
 117 004c 00       		.byte	0
 118 004d 00       		.byte	0
 119 004e 01       		.byte	1
 120 004f 00       		.byte	0
 121 0050 01       		.byte	1
 122 0051 01       		.byte	1
 123 0052 00       		.byte	0
 124 0053 01       		.byte	1
ARM GAS  /tmp/ccxwuSCA.s 			page 3


 125 0054 01       		.byte	1
 126 0055 01       		.byte	1
 127 0056 01       		.byte	1
 128 0057 00       		.byte	0
 129 0058 00       		.byte	0
 130 0059 01       		.byte	1
 131 005a 01       		.byte	1
 132 005b 01       		.byte	1
 133 005c 00       		.byte	0
 134 005d 00       		.byte	0
 135 005e 01       		.byte	1
 136 005f 00       		.byte	0
 137 0060 01       		.byte	1
 138 0061 00       		.byte	0
 139 0062 01       		.byte	1
 140 0063 01       		.byte	1
 141 0064 00       		.byte	0
 142 0065 00       		.byte	0
 143 0066 01       		.byte	1
 144 0067 01       		.byte	1
 145 0068 00       		.byte	0
 146 0069 00       		.byte	0
 147 006a 00       		.byte	0
 148 006b 00       		.byte	0
 149 006c 00       		.byte	0
 150 006d 01       		.byte	1
 151 006e 01       		.byte	1
 152 006f 00       		.byte	0
 153 0070 01       		.byte	1
 154 0071 01       		.byte	1
 155 0072 00       		.byte	0
 156 0073 01       		.byte	1
 157 0074 00       		.byte	0
 158 0075 01       		.byte	1
 159 0076 01       		.byte	1
 160 0077 01       		.byte	1
 161 0078 00       		.byte	0
 162 0079 01       		.byte	1
 163 007a 00       		.byte	0
 164 007b 00       		.byte	0
 165 007c 00       		.byte	0
 166 007d 01       		.byte	1
 167 007e 01       		.byte	1
 168 007f 00       		.byte	0
 169 0080 00       		.byte	0
 170 0081 01       		.byte	1
 171 0082 00       		.byte	0
 172 0083 00       		.byte	0
 173 0084 00       		.byte	0
 174 0085 01       		.byte	1
 175 0086 00       		.byte	0
 176 0087 00       		.byte	0
 177 0088 00       		.byte	0
 178 0089 00       		.byte	0
 179 008a 00       		.byte	0
 180 008b 00       		.byte	0
 181 008c 01       		.byte	1
ARM GAS  /tmp/ccxwuSCA.s 			page 4


 182 008d 00       		.byte	0
 183 008e 00       		.byte	0
 184 008f 01       		.byte	1
 185 0090 00       		.byte	0
 186 0091 00       		.byte	0
 187 0092 01       		.byte	1
 188 0093 01       		.byte	1
 189 0094 00       		.byte	0
 190 0095 01       		.byte	1
 191 0096 00       		.byte	0
 192 0097 00       		.byte	0
 193 0098 01       		.byte	1
 194 0099 01       		.byte	1
 195 009a 01       		.byte	1
 196 009b 01       		.byte	1
 197 009c 00       		.byte	0
 198 009d 01       		.byte	1
 199 009e 01       		.byte	1
 200 009f 01       		.byte	1
 201 00a0 00       		.byte	0
 202 00a1 00       		.byte	0
 203 00a2 00       		.byte	0
 204 00a3 00       		.byte	0
 205 00a4 01       		.byte	1
 206 00a5 01       		.byte	1
 207 00a6 01       		.byte	1
 208 00a7 01       		.byte	1
 209 00a8 01       		.byte	1
 210 00a9 01       		.byte	1
 211 00aa 01       		.byte	1
 212 00ab 00       		.byte	0
 213 00ac 00       		.byte	0
 214 00ad 00       		.byte	0
 215 00ae 01       		.byte	1
 216 00af 01       		.byte	1
 217 00b0 01       		.byte	1
 218 00b1 00       		.byte	0
 219 00b2 01       		.byte	1
 220 00b3 01       		.byte	1
 221 00b4 00       		.byte	0
 222 00b5 00       		.byte	0
 223 00b6 00       		.byte	0
 224 00b7 01       		.byte	1
 225 00b8 00       		.byte	0
 226 00b9 01       		.byte	1
 227 00ba 00       		.byte	0
 228 00bb 00       		.byte	0
 229 00bc 01       		.byte	1
 230 00bd 00       		.byte	0
 231 00be 01       		.byte	1
 232 00bf 00       		.align	2
 235              	whitening_index:
 236 00c0 46       		.byte	70
 237 00c1 3E       		.byte	62
 238 00c2 78       		.byte	120
 239 00c3 6F       		.byte	111
 240 00c4 4D       		.byte	77
ARM GAS  /tmp/ccxwuSCA.s 			page 5


 241 00c5 2E       		.byte	46
 242 00c6 0F       		.byte	15
 243 00c7 65       		.byte	101
 244 00c8 42       		.byte	66
 245 00c9 27       		.byte	39
 246 00ca 1F       		.byte	31
 247 00cb 1A       		.byte	26
 248 00cc 50       		.byte	80
 249 00cd 53       		.byte	83
 250 00ce 7D       		.byte	125
 251 00cf 59       		.byte	89
 252 00d0 0A       		.byte	10
 253 00d1 23       		.byte	35
 254 00d2 08       		.byte	8
 255 00d3 36       		.byte	54
 256 00d4 7A       		.byte	122
 257 00d5 11       		.byte	17
 258 00d6 21       		.byte	33
 259 00d7 00       		.byte	0
 260 00d8 3A       		.byte	58
 261 00d9 73       		.byte	115
 262 00da 06       		.byte	6
 263 00db 5E       		.byte	94
 264 00dc 56       		.byte	86
 265 00dd 31       		.byte	49
 266 00de 34       		.byte	52
 267 00df 14       		.byte	20
 268 00e0 28       		.byte	40
 269 00e1 1B       		.byte	27
 270 00e2 54       		.byte	84
 271 00e3 5A       		.byte	90
 272 00e4 3F       		.byte	63
 273 00e5 70       		.byte	112
 274 00e6 2F       		.byte	47
 275 00e7 66       		.byte	102
 276              		.align	2
 279              	hop_interval_lut:
 280 00e8 00       		.byte	0
 281 00e9 01       		.byte	1
 282 00ea 13       		.byte	19
 283 00eb 19       		.byte	25
 284 00ec 1C       		.byte	28
 285 00ed 0F       		.byte	15
 286 00ee 1F       		.byte	31
 287 00ef 10       		.byte	16
 288 00f0 0E       		.byte	14
 289 00f1 21       		.byte	33
 290 00f2 1A       		.byte	26
 291 00f3 1B       		.byte	27
 292 00f4 22       		.byte	34
 293 00f5 14       		.byte	20
 294 00f6 08       		.byte	8
 295 00f7 05       		.byte	5
 296 00f8 07       		.byte	7
 297 00f9 18       		.byte	24
 298 00fa 23       		.byte	35
 299 00fb 02       		.byte	2
ARM GAS  /tmp/ccxwuSCA.s 			page 6


 300 00fc 0D       		.byte	13
 301 00fd 1E       		.byte	30
 302 00fe 20       		.byte	32
 303 00ff 1D       		.byte	29
 304 0100 11       		.byte	17
 305 0101 03       		.byte	3
 306 0102 0A       		.byte	10
 307 0103 0B       		.byte	11
 308 0104 04       		.byte	4
 309 0105 17       		.byte	23
 310 0106 15       		.byte	21
 311 0107 06       		.byte	6
 312 0108 16       		.byte	22
 313 0109 09       		.byte	9
 314 010a 0C       		.byte	12
 315 010b 12       		.byte	18
 316 010c 24       		.byte	36
 317 010d 000000   		.align	2
 320              	whitening_word:
 321 0110 40B2BCC3 		.word	-1011043776
 322 0114 1F374A5F 		.word	1598699295
 323 0118 85F69C9A 		.word	-1700989307
 324 011c C1D6C544 		.word	1153816257
 325 0120 2059DEE1 		.word	-505521888
 326 0124 8F1BA5AF 		.word	-1348134001
 327 0128 427B4ECD 		.word	-850494654
 328 012c 60EB6222 		.word	576908128
 329 0130 902CEFF0 		.word	-252760944
 330 0134 C78DD257 		.word	1473416647
 331 0138 A13DA766 		.word	1722236321
 332 013c B0753111 		.word	288454064
 333 0140 8940B2BC 		.word	-1129168759
 334 0144 C31F374A 		.word	1245126595
 335 0148 5F85F69C 		.word	-1661565601
 336 014c 9AC1D6C5 		.word	-975781478
 337 0150 442059DE 		.word	-564584380
 338 0154 E18F1BA5 		.word	-1524920351
 339 0158 AF427B4E 		.word	1316700847
 340 015c CD60EB62 		.word	1659592909
 341 0160 22902CEF 		.word	-282292190
 342 0164 F0C78DD2 		.word	-762460176
 343 0168 57A13DA7 		.word	-1489133225
 344 016c 66B07531 		.word	829796454
 345 0170 D257A13D 		.word	1033983954
 346 0174 A766B075 		.word	1974494887
 347 0178 31114896 		.word	-1773661903
 348 017c 77F8E346 		.word	1189345399
 349 0180 E9ABD09E 		.word	-1630491671
 350 0184 5333D8BA 		.word	-1160236205
 351 0188 980824CB 		.word	-886830952
 352 018c 3BFC71A3 		.word	-1552810949
 353 0190 F45568CF 		.word	-815245836
 354 0194 A9196C5D 		.word	1567365545
 355 0198 4C0492E5 		.word	-443415476
 356 019c 1DFEB851 		.word	1371078173
 357 01a0 1BA5AF42 		.word	1118807323
 358 01a4 7B4ECD60 		.word	1624067707
ARM GAS  /tmp/ccxwuSCA.s 			page 7


 359 01a8 EB622290 		.word	-1876794645
 360 01ac 2CEFF0C7 		.word	-940511444
 361 01b0 8DD257A1 		.word	-1588079987
 362 01b4 3DA766B0 		.word	-1335449795
 363 01b8 75311148 		.word	1209086325
 364 01bc 9677F8E3 		.word	-470255722
 365 01c0 46E9ABD0 		.word	-794039994
 366 01c4 9E5333D8 		.word	-667724898
 367 01c8 BA980824 		.word	604543162
 368 01cc CB3BFC71 		.word	1912355787
 369 01d0 6479873F 		.word	1065843044
 370 01d4 6E94BE0A 		.word	180261998
 371 01d8 ED393583 		.word	-2093663763
 372 01dc AD8B8940 		.word	1082756013
 373 01e0 B2BCC31F 		.word	532921522
 374 01e4 374A5F85 		.word	-2057352649
 375 01e8 F69C9AC1 		.word	-1046831882
 376 01ec D6C54420 		.word	541378006
 377 01f0 59DEE18F 		.word	-1881022887
 378 01f4 1BA5AF42 		.word	1118807323
 379 01f8 7B4ECD60 		.word	1624067707
 380 01fc EB622290 		.word	-1876794645
 381 0200 AD8B8940 		.word	1082756013
 382 0204 B2BCC31F 		.word	532921522
 383 0208 374A5F85 		.word	-2057352649
 384 020c F69C9AC1 		.word	-1046831882
 385 0210 D6C54420 		.word	541378006
 386 0214 59DEE18F 		.word	-1881022887
 387 0218 1BA5AF42 		.word	1118807323
 388 021c 7B4ECD60 		.word	1624067707
 389 0220 EB622290 		.word	-1876794645
 390 0224 2CEFF0C7 		.word	-940511444
 391 0228 8DD257A1 		.word	-1588079987
 392 022c 3DA766B0 		.word	-1335449795
 393 0230 F69C9AC1 		.word	-1046831882
 394 0234 D6C54420 		.word	541378006
 395 0238 59DEE18F 		.word	-1881022887
 396 023c 1BA5AF42 		.word	1118807323
 397 0240 7B4ECD60 		.word	1624067707
 398 0244 EB622290 		.word	-1876794645
 399 0248 2CEFF0C7 		.word	-940511444
 400 024c 8DD257A1 		.word	-1588079987
 401 0250 3DA766B0 		.word	-1335449795
 402 0254 75311148 		.word	1209086325
 403 0258 9677F8E3 		.word	-470255722
 404 025c 46E9ABD0 		.word	-794039994
 405 0260 3F6E94BE 		.word	-1097568705
 406 0264 0AED3935 		.word	892988682
 407 0268 83AD8B89 		.word	-1987334781
 408 026c 40B2BCC3 		.word	-1011043776
 409 0270 1F374A5F 		.word	1598699295
 410 0274 85F69C9A 		.word	-1700989307
 411 0278 C1D6C544 		.word	1153816257
 412 027c 2059DEE1 		.word	-505521888
 413 0280 8F1BA5AF 		.word	-1348134001
 414 0284 427B4ECD 		.word	-850494654
 415 0288 60EB6222 		.word	576908128
ARM GAS  /tmp/ccxwuSCA.s 			page 8


 416 028c 902CEFF0 		.word	-252760944
 417 0290 0824CB3B 		.word	1003168776
 418 0294 FC71A3F4 		.word	-190615044
 419 0298 5568CFA9 		.word	-1446025131
 420 029c 196C5D4C 		.word	1281190937
 421 02a0 0492E51D 		.word	501584388
 422 02a4 FEB851FA 		.word	-95307522
 423 02a8 2AB4E7D4 		.word	-723012566
 424 02ac 0CB62E26 		.word	640595468
 425 02b0 02C9F20E 		.word	250792194
 426 02b4 7FDC287D 		.word	2099829887
 427 02b8 15DA736A 		.word	1785977365
 428 02bc 065B1713 		.word	320297734
 429 02c0 C1D6C544 		.word	1153816257
 430 02c4 2059DEE1 		.word	-505521888
 431 02c8 8F1BA5AF 		.word	-1348134001
 432 02cc 427B4ECD 		.word	-850494654
 433 02d0 60EB6222 		.word	576908128
 434 02d4 902CEFF0 		.word	-252760944
 435 02d8 C78DD257 		.word	1473416647
 436 02dc A13DA766 		.word	1722236321
 437 02e0 B0753111 		.word	288454064
 438 02e4 489677F8 		.word	-126380472
 439 02e8 E346E9AB 		.word	-1410775325
 440 02ec D09E5333 		.word	861118160
 441 02f0 9AC1D6C5 		.word	-975781478
 442 02f4 442059DE 		.word	-564584380
 443 02f8 E18F1BA5 		.word	-1524920351
 444 02fc AF427B4E 		.word	1316700847
 445 0300 CD60EB62 		.word	1659592909
 446 0304 22902CEF 		.word	-282292190
 447 0308 F0C78DD2 		.word	-762460176
 448 030c 57A13DA7 		.word	-1489133225
 449 0310 66B07531 		.word	829796454
 450 0314 11489677 		.word	2006337553
 451 0318 F8E346E9 		.word	-381230088
 452 031c ABD09E53 		.word	1402917035
 453 0320 5333D8BA 		.word	-1160236205
 454 0324 980824CB 		.word	-886830952
 455 0328 3BFC71A3 		.word	-1552810949
 456 032c F45568CF 		.word	-815245836
 457 0330 A9196C5D 		.word	1567365545
 458 0334 4C0492E5 		.word	-443415476
 459 0338 1DFEB851 		.word	1371078173
 460 033c FA2AB4E7 		.word	-407622918
 461 0340 D40CB62E 		.word	783682772
 462 0344 2602C9F2 		.word	-221707738
 463 0348 0E7FDC28 		.word	685539086
 464 034c 7D15DA73 		.word	1943672189
 465 0350 2CEFF0C7 		.word	-940511444
 466 0354 8DD257A1 		.word	-1588079987
 467 0358 3DA766B0 		.word	-1335449795
 468 035c 75311148 		.word	1209086325
 469 0360 9677F8E3 		.word	-470255722
 470 0364 46E9ABD0 		.word	-794039994
 471 0368 9E5333D8 		.word	-667724898
 472 036c BA980824 		.word	604543162
ARM GAS  /tmp/ccxwuSCA.s 			page 9


 473 0370 CB3BFC71 		.word	1912355787
 474 0374 A3F45568 		.word	1750463651
 475 0378 CFA9196C 		.word	1813621199
 476 037c 5D4C0492 		.word	-1845212067
 477 0380 E51DFEB8 		.word	-1191305755
 478 0384 51FA2AB4 		.word	-1272251823
 479 0388 E7D40CB6 		.word	-1240673049
 480 038c 2E2602C9 		.word	-922606034
 481 0390 F20E7FDC 		.word	-595652878
 482 0394 287D15DA 		.word	-636125912
 483 0398 736A065B 		.word	1527147123
 484 039c 17138164 		.word	1686180631
 485 03a0 79873F6E 		.word	1849657209
 486 03a4 94BE0AED 		.word	-318062956
 487 03a8 393583AD 		.word	-1383910087
 488 03ac 8B8940B2 		.word	-1304393333
 489 03b0 BE0AED39 		.word	971836094
 490 03b4 3583AD8B 		.word	-1951562955
 491 03b8 8940B2BC 		.word	-1129168759
 492 03bc C31F374A 		.word	1245126595
 493 03c0 5F85F69C 		.word	-1661565601
 494 03c4 9AC1D6C5 		.word	-975781478
 495 03c8 442059DE 		.word	-564584380
 496 03cc E18F1BA5 		.word	-1524920351
 497 03d0 AF427B4E 		.word	1316700847
 498 03d4 CD60EB62 		.word	1659592909
 499 03d8 22902CEF 		.word	-282292190
 500 03dc F0C78DD2 		.word	-762460176
 501 03e0 77F8E346 		.word	1189345399
 502 03e4 E9ABD09E 		.word	-1630491671
 503 03e8 5333D8BA 		.word	-1160236205
 504 03ec 980824CB 		.word	-886830952
 505 03f0 3BFC71A3 		.word	-1552810949
 506 03f4 F45568CF 		.word	-815245836
 507 03f8 A9196C5D 		.word	1567365545
 508 03fc 4C0492E5 		.word	-443415476
 509 0400 1DFEB851 		.word	1371078173
 510 0404 FA2AB4E7 		.word	-407622918
 511 0408 D40CB62E 		.word	783682772
 512 040c 2602C9F2 		.word	-221707738
 513 0410 D09E5333 		.word	861118160
 514 0414 D8BA9808 		.word	144227032
 515 0418 24CB3BFC 		.word	-63190236
 516 041c 71A3F455 		.word	1442095985
 517 0420 68CFA919 		.word	430559080
 518 0424 6C5D4C04 		.word	72113516
 519 0428 92E51DFE 		.word	-31595118
 520 042c B851FA2A 		.word	721047992
 521 0430 B4E7D40C 		.word	215279540
 522 0434 B62E2602 		.word	36056758
 523 0438 C9F20E7F 		.word	2131686089
 524 043c DC287D15 		.word	360523996
 525 0440 196C5D4C 		.word	1281190937
 526 0444 0492E51D 		.word	501584388
 527 0448 FEB851FA 		.word	-95307522
 528 044c 2AB4E7D4 		.word	-723012566
 529 0450 0CB62E26 		.word	640595468
ARM GAS  /tmp/ccxwuSCA.s 			page 10


 530 0454 02C9F20E 		.word	250792194
 531 0458 7FDC287D 		.word	2099829887
 532 045c 15DA736A 		.word	1785977365
 533 0460 065B1713 		.word	320297734
 534 0464 81647987 		.word	-2022087551
 535 0468 3F6E94BE 		.word	-1097568705
 536 046c 0AED3935 		.word	892988682
 537 0470 427B4ECD 		.word	-850494654
 538 0474 60EB6222 		.word	576908128
 539 0478 902CEFF0 		.word	-252760944
 540 047c C78DD257 		.word	1473416647
 541 0480 A13DA766 		.word	1722236321
 542 0484 B0753111 		.word	288454064
 543 0488 489677F8 		.word	-126380472
 544 048c E346E9AB 		.word	-1410775325
 545 0490 D09E5333 		.word	861118160
 546 0494 D8BA9808 		.word	144227032
 547 0498 24CB3BFC 		.word	-63190236
 548 049c 71A3F455 		.word	1442095985
 549 04a0 8B8940B2 		.word	-1304393333
 550 04a4 BCC31F37 		.word	924828604
 551 04a8 4A5F85F6 		.word	-159031478
 552 04ac 9C9AC1D6 		.word	-691955044
 553 04b0 C5442059 		.word	1495286981
 554 04b4 DEE18F1B 		.word	462414302
 555 04b8 A5AF427B 		.word	2067967909
 556 04bc 4ECD60EB 		.word	-345977522
 557 04c0 6222902C 		.word	747643490
 558 04c4 EFF0C78D 		.word	-1916276497
 559 04c8 D257A13D 		.word	1033983954
 560 04cc A766B075 		.word	1974494887
 561 04d0 F45568CF 		.word	-815245836
 562 04d4 A9196C5D 		.word	1567365545
 563 04d8 4C0492E5 		.word	-443415476
 564 04dc 1DFEB851 		.word	1371078173
 565 04e0 FA2AB4E7 		.word	-407622918
 566 04e4 D40CB62E 		.word	783682772
 567 04e8 2602C9F2 		.word	-221707738
 568 04ec 0E7FDC28 		.word	685539086
 569 04f0 7D15DA73 		.word	1943672189
 570 04f4 6A065B17 		.word	391841386
 571 04f8 13816479 		.word	2036629779
 572 04fc 873F6E94 		.word	-1804714105
 573 0500 3DA766B0 		.word	-1335449795
 574 0504 75311148 		.word	1209086325
 575 0508 9677F8E3 		.word	-470255722
 576 050c 46E9ABD0 		.word	-794039994
 577 0510 9E5333D8 		.word	-667724898
 578 0514 BA980824 		.word	604543162
 579 0518 CB3BFC71 		.word	1912355787
 580 051c A3F45568 		.word	1750463651
 581 0520 CFA9196C 		.word	1813621199
 582 0524 5D4C0492 		.word	-1845212067
 583 0528 E51DFEB8 		.word	-1191305755
 584 052c 51FA2AB4 		.word	-1272251823
 585 0530 66B07531 		.word	829796454
 586 0534 11489677 		.word	2006337553
ARM GAS  /tmp/ccxwuSCA.s 			page 11


 587 0538 F8E346E9 		.word	-381230088
 588 053c ABD09E53 		.word	1402917035
 589 0540 33D8BA98 		.word	-1732585421
 590 0544 0824CB3B 		.word	1003168776
 591 0548 FC71A3F4 		.word	-190615044
 592 054c 5568CFA9 		.word	-1446025131
 593 0550 196C5D4C 		.word	1281190937
 594 0554 0492E51D 		.word	501584388
 595 0558 FEB851FA 		.word	-95307522
 596 055c 2AB4E7D4 		.word	-723012566
 597 0560 AF427B4E 		.word	1316700847
 598 0564 CD60EB62 		.word	1659592909
 599 0568 22902CEF 		.word	-282292190
 600 056c F0C78DD2 		.word	-762460176
 601 0570 57A13DA7 		.word	-1489133225
 602 0574 66B07531 		.word	829796454
 603 0578 11489677 		.word	2006337553
 604 057c F8E346E9 		.word	-381230088
 605 0580 ABD09E53 		.word	1402917035
 606 0584 33D8BA98 		.word	-1732585421
 607 0588 0824CB3B 		.word	1003168776
 608 058c FC71A3F4 		.word	-190615044
 609 0590 980824CB 		.word	-886830952
 610 0594 3BFC71A3 		.word	-1552810949
 611 0598 F45568CF 		.word	-815245836
 612 059c A9196C5D 		.word	1567365545
 613 05a0 4C0492E5 		.word	-443415476
 614 05a4 1DFEB851 		.word	1371078173
 615 05a8 FA2AB4E7 		.word	-407622918
 616 05ac D40CB62E 		.word	783682772
 617 05b0 2602C9F2 		.word	-221707738
 618 05b4 0E7FDC28 		.word	685539086
 619 05b8 7D15DA73 		.word	1943672189
 620 05bc 6A065B17 		.word	391841386
 621 05c0 51FA2AB4 		.word	-1272251823
 622 05c4 E7D40CB6 		.word	-1240673049
 623 05c8 2E2602C9 		.word	-922606034
 624 05cc F20E7FDC 		.word	-595652878
 625 05d0 287D15DA 		.word	-636125912
 626 05d4 736A065B 		.word	1527147123
 627 05d8 17138164 		.word	1686180631
 628 05dc 79873F6E 		.word	1849657209
 629 05e0 94BE0AED 		.word	-318062956
 630 05e4 393583AD 		.word	-1383910087
 631 05e8 8B8940B2 		.word	-1304393333
 632 05ec BCC31F37 		.word	924828604
 633 05f0 0AED3935 		.word	892988682
 634 05f4 83AD8B89 		.word	-1987334781
 635 05f8 40B2BCC3 		.word	-1011043776
 636 05fc 1F374A5F 		.word	1598699295
 637 0600 85F69C9A 		.word	-1700989307
 638 0604 C1D6C544 		.word	1153816257
 639 0608 2059DEE1 		.word	-505521888
 640 060c 8F1BA5AF 		.word	-1348134001
 641 0610 427B4ECD 		.word	-850494654
 642 0614 60EB6222 		.word	576908128
 643 0618 902CEFF0 		.word	-252760944
ARM GAS  /tmp/ccxwuSCA.s 			page 12


 644 061c C78DD257 		.word	1473416647
 645 0620 C31F374A 		.word	1245126595
 646 0624 5F85F69C 		.word	-1661565601
 647 0628 9AC1D6C5 		.word	-975781478
 648 062c 442059DE 		.word	-564584380
 649 0630 E18F1BA5 		.word	-1524920351
 650 0634 AF427B4E 		.word	1316700847
 651 0638 CD60EB62 		.word	1659592909
 652 063c 22902CEF 		.word	-282292190
 653 0640 F0C78DD2 		.word	-762460176
 654 0644 57A13DA7 		.word	-1489133225
 655 0648 66B07531 		.word	829796454
 656 064c 11489677 		.word	2006337553
 657 0650 BCC31F37 		.word	924828604
 658 0654 4A5F85F6 		.word	-159031478
 659 0658 9C9AC1D6 		.word	-691955044
 660 065c C5442059 		.word	1495286981
 661 0660 DEE18F1B 		.word	462414302
 662 0664 A5AF427B 		.word	2067967909
 663 0668 4ECD60EB 		.word	-345977522
 664 066c 6222902C 		.word	747643490
 665 0670 EFF0C78D 		.word	-1916276497
 666 0674 D257A13D 		.word	1033983954
 667 0678 A766B075 		.word	1974494887
 668 067c 31114896 		.word	-1773661903
 669 0680 75311148 		.word	1209086325
 670 0684 9677F8E3 		.word	-470255722
 671 0688 46E9ABD0 		.word	-794039994
 672 068c 9E5333D8 		.word	-667724898
 673 0690 BA980824 		.word	604543162
 674 0694 CB3BFC71 		.word	1912355787
 675 0698 A3F45568 		.word	1750463651
 676 069c CFA9196C 		.word	1813621199
 677 06a0 5D4C0492 		.word	-1845212067
 678 06a4 E51DFEB8 		.word	-1191305755
 679 06a8 51FA2AB4 		.word	-1272251823
 680 06ac E7D40CB6 		.word	-1240673049
 681 06b0 2E2602C9 		.word	-922606034
 682 06b4 F20E7FDC 		.word	-595652878
 683 06b8 287D15DA 		.word	-636125912
 684 06bc 736A065B 		.word	1527147123
 685 06c0 17138164 		.word	1686180631
 686 06c4 79873F6E 		.word	1849657209
 687 06c8 94BE0AED 		.word	-318062956
 688 06cc 393583AD 		.word	-1383910087
 689 06d0 8B8940B2 		.word	-1304393333
 690 06d4 BCC31F37 		.word	924828604
 691 06d8 4A5F85F6 		.word	-159031478
 692 06dc 9C9AC1D6 		.word	-691955044
 693 06e0 E7D40CB6 		.word	-1240673049
 694 06e4 2E2602C9 		.word	-922606034
 695 06e8 F20E7FDC 		.word	-595652878
 696 06ec 287D15DA 		.word	-636125912
 697 06f0 736A065B 		.word	1527147123
 698 06f4 17138164 		.word	1686180631
 699 06f8 79873F6E 		.word	1849657209
 700 06fc 94BE0AED 		.word	-318062956
ARM GAS  /tmp/ccxwuSCA.s 			page 13


 701 0700 393583AD 		.word	-1383910087
 702 0704 8B8940B2 		.word	-1304393333
 703 0708 BCC31F37 		.word	924828604
 704 070c 4A5F85F6 		.word	-159031478
 705 0710 60EB6222 		.word	576908128
 706 0714 902CEFF0 		.word	-252760944
 707 0718 C78DD257 		.word	1473416647
 708 071c A13DA766 		.word	1722236321
 709 0720 B0753111 		.word	288454064
 710 0724 489677F8 		.word	-126380472
 711 0728 E346E9AB 		.word	-1410775325
 712 072c D09E5333 		.word	861118160
 713 0730 D8BA9808 		.word	144227032
 714 0734 24CB3BFC 		.word	-63190236
 715 0738 71A3F455 		.word	1442095985
 716 073c 68CFA919 		.word	430559080
 717 0740 A9196C5D 		.word	1567365545
 718 0744 4C0492E5 		.word	-443415476
 719 0748 1DFEB851 		.word	1371078173
 720 074c FA2AB4E7 		.word	-407622918
 721 0750 D40CB62E 		.word	783682772
 722 0754 2602C9F2 		.word	-221707738
 723 0758 0E7FDC28 		.word	685539086
 724 075c 7D15DA73 		.word	1943672189
 725 0760 6A065B17 		.word	391841386
 726 0764 13816479 		.word	2036629779
 727 0768 873F6E94 		.word	-1804714105
 728 076c BE0AED39 		.word	971836094
 729 0770 F20E7FDC 		.word	-595652878
 730 0774 287D15DA 		.word	-636125912
 731 0778 736A065B 		.word	1527147123
 732 077c 17138164 		.word	1686180631
 733 0780 79873F6E 		.word	1849657209
 734 0784 94BE0AED 		.word	-318062956
 735 0788 393583AD 		.word	-1383910087
 736 078c 8B8940B2 		.word	-1304393333
 737 0790 BCC31F37 		.word	924828604
 738 0794 4A5F85F6 		.word	-159031478
 739 0798 9C9AC1D6 		.word	-691955044
 740 079c C5442059 		.word	1495286981
 741 07a0 3BFC71A3 		.word	-1552810949
 742 07a4 F45568CF 		.word	-815245836
 743 07a8 A9196C5D 		.word	1567365545
 744 07ac 4C0492E5 		.word	-443415476
 745 07b0 1DFEB851 		.word	1371078173
 746 07b4 FA2AB4E7 		.word	-407622918
 747 07b8 D40CB62E 		.word	783682772
 748 07bc 2602C9F2 		.word	-221707738
 749 07c0 0E7FDC28 		.word	685539086
 750 07c4 7D15DA73 		.word	1943672189
 751 07c8 6A065B17 		.word	391841386
 752 07cc 13816479 		.word	2036629779
 753 07d0 442059DE 		.word	-564584380
 754 07d4 E18F1BA5 		.word	-1524920351
 755 07d8 AF427B4E 		.word	1316700847
 756 07dc CD60EB62 		.word	1659592909
 757 07e0 22902CEF 		.word	-282292190
ARM GAS  /tmp/ccxwuSCA.s 			page 14


 758 07e4 F0C78DD2 		.word	-762460176
 759 07e8 57A13DA7 		.word	-1489133225
 760 07ec 66B07531 		.word	829796454
 761 07f0 11489677 		.word	2006337553
 762 07f4 F8E346E9 		.word	-381230088
 763 07f8 ABD09E53 		.word	1402917035
 764 07fc 33D8BA98 		.word	-1732585421
 765 0800 8DD257A1 		.word	-1588079987
 766 0804 3DA766B0 		.word	-1335449795
 767 0808 75311148 		.word	1209086325
 768 080c 9677F8E3 		.word	-470255722
 769 0810 46E9ABD0 		.word	-794039994
 770 0814 9E5333D8 		.word	-667724898
 771 0818 BA980824 		.word	604543162
 772 081c CB3BFC71 		.word	1912355787
 773 0820 A3F45568 		.word	1750463651
 774 0824 CFA9196C 		.word	1813621199
 775 0828 5D4C0492 		.word	-1845212067
 776 082c E51DFEB8 		.word	-1191305755
 777 0830 D6C54420 		.word	541378006
 778 0834 59DEE18F 		.word	-1881022887
 779 0838 1BA5AF42 		.word	1118807323
 780 083c 7B4ECD60 		.word	1624067707
 781 0840 EB622290 		.word	-1876794645
 782 0844 2CEFF0C7 		.word	-940511444
 783 0848 8DD257A1 		.word	-1588079987
 784 084c 3DA766B0 		.word	-1335449795
 785 0850 75311148 		.word	1209086325
 786 0854 9677F8E3 		.word	-470255722
 787 0858 46E9ABD0 		.word	-794039994
 788 085c 9E5333D8 		.word	-667724898
 789 0860 1F374A5F 		.word	1598699295
 790 0864 85F69C9A 		.word	-1700989307
 791 0868 C1D6C544 		.word	1153816257
 792 086c 2059DEE1 		.word	-505521888
 793 0870 8F1BA5AF 		.word	-1348134001
 794 0874 427B4ECD 		.word	-850494654
 795 0878 60EB6222 		.word	576908128
 796 087c 902CEFF0 		.word	-252760944
 797 0880 C78DD257 		.word	1473416647
 798 0884 A13DA766 		.word	1722236321
 799 0888 B0753111 		.word	288454064
 800 088c 489677F8 		.word	-126380472
 801              		.comm	rr,5,4
 802              		.global	compile_info
 803              		.align	2
 806              	compile_info:
 807 0890 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Wed Nov  2 20:4"
 807      746F6F74 
 807      68203230 
 807      31352D31 
 807      302D5231 
 808 08c3 373A3238 		.ascii	"7:28 KST 2016\000"
 808      204B5354 
 808      20323031 
 808      3600
 809              		.comm	device_index,1,1
ARM GAS  /tmp/ccxwuSCA.s 			page 15


 810              		.comm	clkn,4,4
 811              		.global	hop_mode
 812              		.bss
 815              	hop_mode:
 816 0000 00       		.space	1
 817              		.global	do_hop
 820              	do_hop:
 821 0001 00       		.space	1
 822              		.global	cs_no_squelch
 825              	cs_no_squelch:
 826 0002 00       		.space	1
 827              		.global	cs_threshold_req
 828              		.data
 831              	cs_threshold_req:
 832 0004 88       		.byte	-120
 833              		.global	cs_threshold_cur
 836              	cs_threshold_cur:
 837 0005 88       		.byte	-120
 838              		.comm	cs_trigger,1,1
 839              		.comm	keepalive_trigger,1,1
 840              		.comm	cs_timestamp,4,4
 841              		.global	hop_direct_channel
 842              		.bss
 843 0003 00       		.align	1
 846              	hop_direct_channel:
 847 0004 0000     		.space	2
 848              		.global	clock_trim
 849 0006 0000     		.align	2
 852              	clock_trim:
 853 0008 00000000 		.space	4
 854              		.comm	idle_buf_clkn_high,4,4
 855              		.comm	active_buf_clkn_high,4,4
 856              		.comm	idle_buf_clk100ns,4,4
 857              		.comm	active_buf_clk100ns,4,4
 858              		.global	idle_buf_channel
 859              		.align	1
 862              	idle_buf_channel:
 863 000c 0000     		.space	2
 864              		.global	active_buf_channel
 865              		.align	1
 868              	active_buf_channel:
 869 000e 0000     		.space	2
 870              		.global	slave_mac_address
 871              		.align	2
 874              	slave_mac_address:
 875 0010 00000000 		.space	6
 875      0000
 876              		.comm	rxbuf1,50,4
 877              		.comm	rxbuf2,50,4
 878              		.global	active_rxbuf
 879              		.data
 880 0006 0000     		.align	2
 883              	active_rxbuf:
 884 0008 00000000 		.word	rxbuf1
 885              		.global	idle_rxbuf
 886              		.align	2
 889              	idle_rxbuf:
ARM GAS  /tmp/ccxwuSCA.s 			page 16


 890 000c 00000000 		.word	rxbuf2
 891              		.global	le
 892              		.align	2
 895              	le:
 896 0010 D6BE898E 		.word	-1903575338
 897 0014 7D6B     		.short	27517
 898 0016 7191     		.short	-28303
 899 0018 55555500 		.word	5592405
 900 001c AAAAAA00 		.word	11184810
 901 0020 01000000 		.word	1
 902 0024 00       		.byte	0
 903 0025 000000   		.space	3
 904 0028 00000000 		.word	0
 905 002c 00000000 		.space	32
 905      00000000 
 905      00000000 
 905      00000000 
 905      00000000 
 906 004c 00000000 		.word	0
 907 0050 00000000 		.word	0
 908              		.comm	le_promisc,264,4
 909              		.global	le_jam_count
 910              		.bss
 911 0016 0000     		.align	2
 914              	le_jam_count:
 915 0018 00000000 		.space	4
 916              		.global	data_cb
 917              		.align	2
 920              	data_cb:
 921 001c 00000000 		.space	4
 922              		.global	packet_cb
 923              		.align	2
 926              	packet_cb:
 927 0020 00000000 		.space	4
 928              		.global	rssi_iir
 929              		.align	2
 932              	rssi_iir:
 933 0024 00000000 		.space	158
 933      00000000 
 933      00000000 
 933      00000000 
 933      00000000 
 934              		.comm	unpacked,800,4
 935              		.global	mode
 938              	mode:
 939 00c2 00       		.space	1
 940              		.global	requested_mode
 943              	requested_mode:
 944 00c3 00       		.space	1
 945              		.global	jam_mode
 948              	jam_mode:
 949 00c4 00       		.space	1
 950              		.global	ego_mode
 953              	ego_mode:
 954 00c5 00       		.space	1
 955              		.global	modulation
 958              	modulation:
ARM GAS  /tmp/ccxwuSCA.s 			page 17


 959 00c6 00       		.space	1
 960              		.global	channel
 961              		.data
 962              		.align	1
 965              	channel:
 966 0054 6209     		.short	2402
 967              		.global	requested_channel
 968              		.bss
 969 00c7 00       		.align	1
 972              	requested_channel:
 973 00c8 0000     		.space	2
 974              		.global	saved_request
 975              		.align	1
 978              	saved_request:
 979 00ca 0000     		.space	2
 980              		.global	low_freq
 981              		.data
 982              		.align	1
 985              	low_freq:
 986 0056 6009     		.short	2400
 987              		.global	high_freq
 988              		.align	1
 991              	high_freq:
 992 0058 B309     		.short	2483
 993              		.global	rssi_threshold
 996              	rssi_threshold:
 997 005a E2       		.byte	-30
 998              		.comm	rx_dma_lli1,16,4
 999              		.comm	rx_dma_lli2,16,4
 1000              		.comm	le_dma_lli,176,4
 1001              		.comm	rx_tc,4,4
 1002              		.comm	rx_err,4,4
 1003              		.global	status
 1004              		.bss
 1007              	status:
 1008 00cc 00       		.space	1
 1009              		.comm	rssi_max,1,1
 1010              		.comm	rssi_min,1,1
 1011              		.global	rssi_count
 1014              	rssi_count:
 1015 00cd 00       		.space	1
 1016              		.global	rssi_sum
 1017 00ce 0000     		.align	2
 1020              	rssi_sum:
 1021 00d0 00000000 		.space	4
 1022              		.section	.text.rssi_reset,"ax",%progbits
 1023              		.align	2
 1024              		.thumb
 1025              		.thumb_func
 1027              	rssi_reset:
 1028              	.LFB0:
 1029              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
ARM GAS  /tmp/ccxwuSCA.s 			page 18


   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** u8 device_index;
  50:bluetooth_rxtx.c **** 
  51:bluetooth_rxtx.c **** 
  52:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  53:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  54:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  55:bluetooth_rxtx.c **** 
  56:bluetooth_rxtx.c **** #define HOP_NONE      0
  57:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  58:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  59:bluetooth_rxtx.c **** #define HOP_BTLE      3
  60:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  61:bluetooth_rxtx.c **** 
  62:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
ARM GAS  /tmp/ccxwuSCA.s 			page 19


  63:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  64:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  65:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  66:bluetooth_rxtx.c **** 
  67:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  68:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  69:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  70:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  71:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  72:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  73:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  74:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  75:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  76:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  77:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  78:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  79:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  80:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  81:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  82:bluetooth_rxtx.c **** 
  83:bluetooth_rxtx.c **** /* DMA buffers */
  84:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  85:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  86:bluetooth_rxtx.c **** 
  87:bluetooth_rxtx.c **** /*
  88:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  89:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  90:bluetooth_rxtx.c ****  */
  91:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  92:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  93:bluetooth_rxtx.c **** 
  94:bluetooth_rxtx.c **** le_state_t le = {
  95:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  96:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  97:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  98:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  99:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
 100:bluetooth_rxtx.c **** 	.crc_verify = 1,
 101:bluetooth_rxtx.c **** 
 102:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 103:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 104:bluetooth_rxtx.c **** 	.target_set = 0,
 105:bluetooth_rxtx.c **** 	.last_packet = 0,
 106:bluetooth_rxtx.c **** };
 107:bluetooth_rxtx.c **** 
 108:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 109:bluetooth_rxtx.c **** 	u32 aa;
 110:bluetooth_rxtx.c **** 	int count;
 111:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 112:bluetooth_rxtx.c **** 
 113:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 114:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 115:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 116:bluetooth_rxtx.c **** 
 117:bluetooth_rxtx.c **** 	// recovering hop interval
 118:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 119:bluetooth_rxtx.c **** 	int consec_intervals;
ARM GAS  /tmp/ccxwuSCA.s 			page 20


 120:bluetooth_rxtx.c **** } le_promisc_state_t;
 121:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 122:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 123:bluetooth_rxtx.c **** 
 124:bluetooth_rxtx.c **** /* LE jamming */
 125:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 126:bluetooth_rxtx.c **** int le_jam_count = 0;
 127:bluetooth_rxtx.c **** 
 128:bluetooth_rxtx.c **** /* set LE access address */
 129:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 130:bluetooth_rxtx.c **** 
 131:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 132:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 133:bluetooth_rxtx.c **** 
 134:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 135:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 136:bluetooth_rxtx.c **** 
 137:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 138:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 139:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 140:bluetooth_rxtx.c **** 
 141:bluetooth_rxtx.c **** /*
 142:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 143:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 144:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 145:bluetooth_rxtx.c **** */
 146:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 147:bluetooth_rxtx.c **** 
 148:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 149:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 150:bluetooth_rxtx.c **** 
 151:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 152:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 153:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 154:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 155:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 156:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 157:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 158:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 159:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 160:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 161:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 162:bluetooth_rxtx.c **** 
 163:bluetooth_rxtx.c **** /* DMA linked list items */
 164:bluetooth_rxtx.c **** typedef struct {
 165:bluetooth_rxtx.c **** 	u32 src;
 166:bluetooth_rxtx.c **** 	u32 dest;
 167:bluetooth_rxtx.c **** 	u32 next_lli;
 168:bluetooth_rxtx.c **** 	u32 control;
 169:bluetooth_rxtx.c **** } dma_lli;
 170:bluetooth_rxtx.c **** 
 171:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 172:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 173:bluetooth_rxtx.c **** 
 174:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 175:bluetooth_rxtx.c **** 
 176:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
ARM GAS  /tmp/ccxwuSCA.s 			page 21


 177:bluetooth_rxtx.c **** volatile u32 rx_tc;
 178:bluetooth_rxtx.c **** volatile u32 rx_err;
 179:bluetooth_rxtx.c **** 
 180:bluetooth_rxtx.c **** /* status information byte */
 181:bluetooth_rxtx.c **** volatile u8 status = 0;
 182:bluetooth_rxtx.c **** 
 183:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 184:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 185:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 186:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 187:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 188:bluetooth_rxtx.c **** 
 189:bluetooth_rxtx.c **** /*
 190:bluetooth_rxtx.c ****  * RSSI
 191:bluetooth_rxtx.c ****  */
 192:bluetooth_rxtx.c **** int8_t rssi_max;
 193:bluetooth_rxtx.c **** int8_t rssi_min;
 194:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 195:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 196:bluetooth_rxtx.c **** 
 197:bluetooth_rxtx.c **** static void rssi_reset(void)
 198:bluetooth_rxtx.c **** {
 1030              		.loc 1 198 0
 1031              		.cfi_startproc
 1032              		@ args = 0, pretend = 0, frame = 0
 1033              		@ frame_needed = 1, uses_anonymous_args = 0
 1034              		@ link register save eliminated.
 1035 0000 80B4     		push	{r7}
 1036              		.cfi_def_cfa_offset 4
 1037              		.cfi_offset 7, -4
 1038 0002 00AF     		add	r7, sp, #0
 1039              		.cfi_def_cfa_register 7
 199:bluetooth_rxtx.c **** 	rssi_count = 0;
 1040              		.loc 1 199 0
 1041 0004 074B     		ldr	r3, .L2
 1042 0006 0022     		movs	r2, #0
 1043 0008 1A70     		strb	r2, [r3]
 200:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1044              		.loc 1 200 0
 1045 000a 074B     		ldr	r3, .L2+4
 1046 000c 0022     		movs	r2, #0
 1047 000e 1A60     		str	r2, [r3]
 201:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1048              		.loc 1 201 0
 1049 0010 064B     		ldr	r3, .L2+8
 1050 0012 8022     		movs	r2, #128
 1051 0014 1A70     		strb	r2, [r3]
 202:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1052              		.loc 1 202 0
 1053 0016 064B     		ldr	r3, .L2+12
 1054 0018 7F22     		movs	r2, #127
 1055 001a 1A70     		strb	r2, [r3]
 203:bluetooth_rxtx.c **** }
 1056              		.loc 1 203 0
 1057 001c BD46     		mov	sp, r7
 1058              		.cfi_def_cfa_register 13
 1059              		@ sp needed
ARM GAS  /tmp/ccxwuSCA.s 			page 22


 1060 001e 5DF8047B 		ldr	r7, [sp], #4
 1061              		.cfi_restore 7
 1062              		.cfi_def_cfa_offset 0
 1063 0022 7047     		bx	lr
 1064              	.L3:
 1065              		.align	2
 1066              	.L2:
 1067 0024 00000000 		.word	rssi_count
 1068 0028 00000000 		.word	rssi_sum
 1069 002c 00000000 		.word	rssi_max
 1070 0030 00000000 		.word	rssi_min
 1071              		.cfi_endproc
 1072              	.LFE0:
 1074              		.section	.text.rssi_add,"ax",%progbits
 1075              		.align	2
 1076              		.thumb
 1077              		.thumb_func
 1079              	rssi_add:
 1080              	.LFB1:
 204:bluetooth_rxtx.c **** 
 205:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 206:bluetooth_rxtx.c **** {
 1081              		.loc 1 206 0
 1082              		.cfi_startproc
 1083              		@ args = 0, pretend = 0, frame = 8
 1084              		@ frame_needed = 1, uses_anonymous_args = 0
 1085              		@ link register save eliminated.
 1086 0000 80B4     		push	{r7}
 1087              		.cfi_def_cfa_offset 4
 1088              		.cfi_offset 7, -4
 1089 0002 83B0     		sub	sp, sp, #12
 1090              		.cfi_def_cfa_offset 16
 1091 0004 00AF     		add	r7, sp, #0
 1092              		.cfi_def_cfa_register 7
 1093 0006 0346     		mov	r3, r0
 1094 0008 FB71     		strb	r3, [r7, #7]
 207:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1095              		.loc 1 207 0
 1096 000a 144B     		ldr	r3, .L5
 1097 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1098 000e 5AB2     		sxtb	r2, r3
 1099 0010 97F90730 		ldrsb	r3, [r7, #7]
 1100 0014 9342     		cmp	r3, r2
 1101 0016 B8BF     		it	lt
 1102 0018 1346     		movlt	r3, r2
 1103 001a DAB2     		uxtb	r2, r3
 1104 001c 0F4B     		ldr	r3, .L5
 1105 001e 1A70     		strb	r2, [r3]
 208:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1106              		.loc 1 208 0
 1107 0020 0F4B     		ldr	r3, .L5+4
 1108 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1109 0024 5AB2     		sxtb	r2, r3
 1110 0026 97F90730 		ldrsb	r3, [r7, #7]
 1111 002a 9342     		cmp	r3, r2
 1112 002c A8BF     		it	ge
 1113 002e 1346     		movge	r3, r2
ARM GAS  /tmp/ccxwuSCA.s 			page 23


 1114 0030 DAB2     		uxtb	r2, r3
 1115 0032 0B4B     		ldr	r3, .L5+4
 1116 0034 1A70     		strb	r2, [r3]
 209:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1117              		.loc 1 209 0
 1118 0036 97F90730 		ldrsb	r3, [r7, #7]
 1119 003a 1A02     		lsls	r2, r3, #8
 1120 003c 094B     		ldr	r3, .L5+8
 1121 003e 1B68     		ldr	r3, [r3]
 1122 0040 1344     		add	r3, r3, r2
 1123 0042 084A     		ldr	r2, .L5+8
 1124 0044 1360     		str	r3, [r2]
 210:bluetooth_rxtx.c **** 	rssi_count += 1;
 1125              		.loc 1 210 0
 1126 0046 084B     		ldr	r3, .L5+12
 1127 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1128 004a 0133     		adds	r3, r3, #1
 1129 004c DAB2     		uxtb	r2, r3
 1130 004e 064B     		ldr	r3, .L5+12
 1131 0050 1A70     		strb	r2, [r3]
 211:bluetooth_rxtx.c **** }
 1132              		.loc 1 211 0
 1133 0052 0C37     		adds	r7, r7, #12
 1134              		.cfi_def_cfa_offset 4
 1135 0054 BD46     		mov	sp, r7
 1136              		.cfi_def_cfa_register 13
 1137              		@ sp needed
 1138 0056 5DF8047B 		ldr	r7, [sp], #4
 1139              		.cfi_restore 7
 1140              		.cfi_def_cfa_offset 0
 1141 005a 7047     		bx	lr
 1142              	.L6:
 1143              		.align	2
 1144              	.L5:
 1145 005c 00000000 		.word	rssi_max
 1146 0060 00000000 		.word	rssi_min
 1147 0064 00000000 		.word	rssi_sum
 1148 0068 00000000 		.word	rssi_count
 1149              		.cfi_endproc
 1150              	.LFE1:
 1152              		.section	.text.rssi_iir_update,"ax",%progbits
 1153              		.align	2
 1154              		.thumb
 1155              		.thumb_func
 1157              	rssi_iir_update:
 1158              	.LFB2:
 212:bluetooth_rxtx.c **** 
 213:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 214:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 215:bluetooth_rxtx.c **** {
 1159              		.loc 1 215 0
 1160              		.cfi_startproc
 1161              		@ args = 0, pretend = 0, frame = 16
 1162              		@ frame_needed = 1, uses_anonymous_args = 0
 1163              		@ link register save eliminated.
 1164 0000 80B4     		push	{r7}
 1165              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccxwuSCA.s 			page 24


 1166              		.cfi_offset 7, -4
 1167 0002 85B0     		sub	sp, sp, #20
 1168              		.cfi_def_cfa_offset 24
 1169 0004 00AF     		add	r7, sp, #0
 1170              		.cfi_def_cfa_register 7
 216:bluetooth_rxtx.c **** 	int i;
 217:bluetooth_rxtx.c **** 	int32_t avg;
 218:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 219:bluetooth_rxtx.c **** 
 220:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 221:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 222:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1171              		.loc 1 222 0
 1172 0006 1F4B     		ldr	r3, .L13
 1173 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1174 000a 002B     		cmp	r3, #0
 1175 000c 06D0     		beq	.L8
 223:bluetooth_rxtx.c **** 		i = channel - 2402;
 1176              		.loc 1 223 0
 1177 000e 1E4B     		ldr	r3, .L13+4
 1178 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1179 0012 9BB2     		uxth	r3, r3
 1180 0014 A3F66213 		subw	r3, r3, #2402
 1181 0018 FB60     		str	r3, [r7, #12]
 1182 001a 01E0     		b	.L9
 1183              	.L8:
 224:bluetooth_rxtx.c **** 	else
 225:bluetooth_rxtx.c **** 		i = 0;
 1184              		.loc 1 225 0
 1185 001c 0023     		movs	r3, #0
 1186 001e FB60     		str	r3, [r7, #12]
 1187              	.L9:
 226:bluetooth_rxtx.c **** 
 227:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 228:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1188              		.loc 1 228 0
 1189 0020 1A4B     		ldr	r3, .L13+8
 1190 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1191 0024 002B     		cmp	r3, #0
 1192 0026 08D0     		beq	.L10
 229:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1193              		.loc 1 229 0
 1194 0028 194B     		ldr	r3, .L13+12
 1195 002a 1B68     		ldr	r3, [r3]
 1196 002c 8033     		adds	r3, r3, #128
 1197 002e 174A     		ldr	r2, .L13+8
 1198 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1199 0032 93FBF2F3 		sdiv	r3, r3, r2
 1200 0036 BB60     		str	r3, [r7, #8]
 1201 0038 01E0     		b	.L11
 1202              	.L10:
 230:bluetooth_rxtx.c **** 	else
 231:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1203              		.loc 1 231 0
 1204 003a 0023     		movs	r3, #0
 1205 003c BB60     		str	r3, [r7, #8]
 1206              	.L11:
ARM GAS  /tmp/ccxwuSCA.s 			page 25


 232:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1207              		.loc 1 232 0
 1208 003e 154A     		ldr	r2, .L13+16
 1209 0040 FB68     		ldr	r3, [r7, #12]
 1210 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1211 0046 1AB2     		sxth	r2, r3
 1212 0048 1346     		mov	r3, r2
 1213 004a 9B01     		lsls	r3, r3, #6
 1214 004c 9B1A     		subs	r3, r3, r2
 1215 004e 9B00     		lsls	r3, r3, #2
 1216 0050 1344     		add	r3, r3, r2
 1217 0052 7B60     		str	r3, [r7, #4]
 233:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1218              		.loc 1 233 0
 1219 0054 BA68     		ldr	r2, [r7, #8]
 1220 0056 1346     		mov	r3, r2
 1221 0058 5B00     		lsls	r3, r3, #1
 1222 005a 1344     		add	r3, r3, r2
 1223 005c 7A68     		ldr	r2, [r7, #4]
 1224 005e 1344     		add	r3, r3, r2
 1225 0060 7B60     		str	r3, [r7, #4]
 234:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1226              		.loc 1 234 0
 1227 0062 7B68     		ldr	r3, [r7, #4]
 1228 0064 8033     		adds	r3, r3, #128
 1229 0066 002B     		cmp	r3, #0
 1230 0068 00DA     		bge	.L12
 1231 006a FF33     		adds	r3, r3, #255
 1232              	.L12:
 1233 006c 1B12     		asrs	r3, r3, #8
 1234 006e 99B2     		uxth	r1, r3
 1235 0070 084A     		ldr	r2, .L13+16
 1236 0072 FB68     		ldr	r3, [r7, #12]
 1237 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 235:bluetooth_rxtx.c **** }
 1238              		.loc 1 235 0
 1239 0078 1437     		adds	r7, r7, #20
 1240              		.cfi_def_cfa_offset 4
 1241 007a BD46     		mov	sp, r7
 1242              		.cfi_def_cfa_register 13
 1243              		@ sp needed
 1244 007c 5DF8047B 		ldr	r7, [sp], #4
 1245              		.cfi_restore 7
 1246              		.cfi_def_cfa_offset 0
 1247 0080 7047     		bx	lr
 1248              	.L14:
 1249 0082 00BF     		.align	2
 1250              	.L13:
 1251 0084 00000000 		.word	hop_mode
 1252 0088 00000000 		.word	channel
 1253 008c 00000000 		.word	rssi_count
 1254 0090 00000000 		.word	rssi_sum
 1255 0094 00000000 		.word	rssi_iir
 1256              		.cfi_endproc
 1257              	.LFE2:
 1259              		.section	.text.cs_threshold_set,"ax",%progbits
 1260              		.align	2
ARM GAS  /tmp/ccxwuSCA.s 			page 26


 1261              		.thumb
 1262              		.thumb_func
 1264              	cs_threshold_set:
 1265              	.LFB3:
 236:bluetooth_rxtx.c **** 
 237:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 238:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 239:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 240:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 241:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 242:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 243:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 244:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 245:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 246:bluetooth_rxtx.c **** {
 1266              		.loc 1 246 0
 1267              		.cfi_startproc
 1268              		@ args = 0, pretend = 0, frame = 8
 1269              		@ frame_needed = 1, uses_anonymous_args = 0
 1270 0000 80B5     		push	{r7, lr}
 1271              		.cfi_def_cfa_offset 8
 1272              		.cfi_offset 7, -8
 1273              		.cfi_offset 14, -4
 1274 0002 82B0     		sub	sp, sp, #8
 1275              		.cfi_def_cfa_offset 16
 1276 0004 00AF     		add	r7, sp, #0
 1277              		.cfi_def_cfa_register 7
 1278 0006 0346     		mov	r3, r0
 1279 0008 0A46     		mov	r2, r1
 1280 000a FB71     		strb	r3, [r7, #7]
 1281 000c 1346     		mov	r3, r2
 1282 000e BB71     		strb	r3, [r7, #6]
 247:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1283              		.loc 1 247 0
 1284 0010 97F90730 		ldrsb	r3, [r7, #7]
 1285 0014 13F1140F 		cmn	r3, #20
 1286 0018 0DD0     		beq	.L16
 1287              		.loc 1 247 0 is_stmt 0 discriminator 1
 1288 001a 97F90730 		ldrsb	r3, [r7, #7]
 1289 001e 13F1130F 		cmn	r3, #19
 1290 0022 08DA     		bge	.L16
 1291              		.loc 1 247 0 discriminator 3
 1292 0024 97F90730 		ldrsb	r3, [r7, #7]
 1293 0028 6FF07702 		mvn	r2, #119
 1294 002c 9342     		cmp	r3, r2
 1295 002e B8BF     		it	lt
 1296 0030 1346     		movlt	r3, r2
 1297 0032 DBB2     		uxtb	r3, r3
 1298 0034 00E0     		b	.L17
 1299              	.L16:
 1300              		.loc 1 247 0 discriminator 4
 1301 0036 EC23     		movs	r3, #236
 1302              	.L17:
 1303              		.loc 1 247 0 discriminator 6
 1304 0038 FB71     		strb	r3, [r7, #7]
 248:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1305              		.loc 1 248 0 is_stmt 1 discriminator 6
ARM GAS  /tmp/ccxwuSCA.s 			page 27


 1306 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1307 003c 3833     		adds	r3, r3, #56
 1308 003e DBB2     		uxtb	r3, r3
 1309 0040 9BB2     		uxth	r3, r3
 1310 0042 03F0FC03 		and	r3, r3, #252
 1311 0046 9AB2     		uxth	r2, r3
 1312 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1313 004a 9BB2     		uxth	r3, r3
 1314 004c 03F00303 		and	r3, r3, #3
 1315 0050 9BB2     		uxth	r3, r3
 1316 0052 1343     		orrs	r3, r3, r2
 1317 0054 9BB2     		uxth	r3, r3
 1318 0056 9BB2     		uxth	r3, r3
 1319 0058 0620     		movs	r0, #6
 1320 005a 1946     		mov	r1, r3
 1321 005c FFF7FEFF 		bl	cc2400_set
 249:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1322              		.loc 1 249 0 discriminator 6
 1323 0060 084A     		ldr	r2, .L18
 1324 0062 FB79     		ldrb	r3, [r7, #7]
 1325 0064 1370     		strb	r3, [r2]
 250:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1326              		.loc 1 250 0 discriminator 6
 1327 0066 97F90730 		ldrsb	r3, [r7, #7]
 1328 006a 13F1770F 		cmn	r3, #119
 1329 006e B4BF     		ite	lt
 1330 0070 0123     		movlt	r3, #1
 1331 0072 0023     		movge	r3, #0
 1332 0074 DBB2     		uxtb	r3, r3
 1333 0076 1A46     		mov	r2, r3
 1334 0078 034B     		ldr	r3, .L18+4
 1335 007a 1A70     		strb	r2, [r3]
 251:bluetooth_rxtx.c **** }
 1336              		.loc 1 251 0 discriminator 6
 1337 007c 0837     		adds	r7, r7, #8
 1338              		.cfi_def_cfa_offset 8
 1339 007e BD46     		mov	sp, r7
 1340              		.cfi_def_cfa_register 13
 1341              		@ sp needed
 1342 0080 80BD     		pop	{r7, pc}
 1343              	.L19:
 1344 0082 00BF     		.align	2
 1345              	.L18:
 1346 0084 00000000 		.word	cs_threshold_cur
 1347 0088 00000000 		.word	cs_no_squelch
 1348              		.cfi_endproc
 1349              	.LFE3:
 1351              		.section	.text.enqueue,"ax",%progbits
 1352              		.align	2
 1353              		.thumb
 1354              		.thumb_func
 1356              	enqueue:
 1357              	.LFB4:
 252:bluetooth_rxtx.c **** 
 253:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 254:bluetooth_rxtx.c **** {
 1358              		.loc 1 254 0
ARM GAS  /tmp/ccxwuSCA.s 			page 28


 1359              		.cfi_startproc
 1360              		@ args = 0, pretend = 0, frame = 32
 1361              		@ frame_needed = 1, uses_anonymous_args = 0
 1362 0000 80B5     		push	{r7, lr}
 1363              		.cfi_def_cfa_offset 8
 1364              		.cfi_offset 7, -8
 1365              		.cfi_offset 14, -4
 1366 0002 88B0     		sub	sp, sp, #32
 1367              		.cfi_def_cfa_offset 40
 1368 0004 00AF     		add	r7, sp, #0
 1369              		.cfi_def_cfa_register 7
 1370 0006 0346     		mov	r3, r0
 1371 0008 3960     		str	r1, [r7]
 1372 000a FB71     		strb	r3, [r7, #7]
 255:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1373              		.loc 1 255 0
 1374 000c FFF7FEFF 		bl	usb_enqueue
 1375 0010 F861     		str	r0, [r7, #28]
 256:bluetooth_rxtx.c **** 
 257:bluetooth_rxtx.c **** 	/* fail if queue is full */
 258:bluetooth_rxtx.c **** 	if (f == NULL) {
 1376              		.loc 1 258 0
 1377 0012 FB69     		ldr	r3, [r7, #28]
 1378 0014 002B     		cmp	r3, #0
 1379 0016 09D1     		bne	.L21
 259:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1380              		.loc 1 259 0
 1381 0018 4E4B     		ldr	r3, .L25
 1382 001a 1B78     		ldrb	r3, [r3]
 1383 001c DBB2     		uxtb	r3, r3
 1384 001e 43F00403 		orr	r3, r3, #4
 1385 0022 DAB2     		uxtb	r2, r3
 1386 0024 4B4B     		ldr	r3, .L25
 1387 0026 1A70     		strb	r2, [r3]
 260:bluetooth_rxtx.c **** 		return 0;
 1388              		.loc 1 260 0
 1389 0028 0023     		movs	r3, #0
 1390 002a 8EE0     		b	.L22
 1391              	.L21:
 261:bluetooth_rxtx.c **** 	}
 262:bluetooth_rxtx.c **** 
 263:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1392              		.loc 1 263 0
 1393 002c FB69     		ldr	r3, [r7, #28]
 1394 002e FA79     		ldrb	r2, [r7, #7]
 1395 0030 1A70     		strb	r2, [r3]
 264:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1396              		.loc 1 264 0
 1397 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1398 0034 042B     		cmp	r3, #4
 1399 0036 13D1     		bne	.L23
 265:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1400              		.loc 1 265 0
 1401 0038 474B     		ldr	r3, .L25+4
 1402 003a 1B68     		ldr	r3, [r3]
 1403 003c 1B0D     		lsrs	r3, r3, #20
 1404 003e DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 29


 1405 0040 FB69     		ldr	r3, [r7, #28]
 1406 0042 DA70     		strb	r2, [r3, #3]
 266:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1407              		.loc 1 266 0
 1408 0044 444B     		ldr	r3, .L25+4
 1409 0046 1B68     		ldr	r3, [r3]
 1410 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1411 004c 40F63542 		movw	r2, #3125
 1412 0050 02FB03F2 		mul	r2, r2, r3
 1413 0054 414B     		ldr	r3, .L25+8
 1414 0056 1B68     		ldr	r3, [r3]
 1415 0058 1A44     		add	r2, r2, r3
 1416 005a FB69     		ldr	r3, [r7, #28]
 1417 005c 5A60     		str	r2, [r3, #4]
 1418 005e 08E0     		b	.L24
 1419              	.L23:
 267:bluetooth_rxtx.c **** 	} else {
 268:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1420              		.loc 1 268 0
 1421 0060 3F4B     		ldr	r3, .L25+12
 1422 0062 1B68     		ldr	r3, [r3]
 1423 0064 DAB2     		uxtb	r2, r3
 1424 0066 FB69     		ldr	r3, [r7, #28]
 1425 0068 DA70     		strb	r2, [r3, #3]
 269:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1426              		.loc 1 269 0
 1427 006a 3E4B     		ldr	r3, .L25+16
 1428 006c 1A68     		ldr	r2, [r3]
 1429 006e FB69     		ldr	r3, [r7, #28]
 1430 0070 5A60     		str	r2, [r3, #4]
 1431              	.L24:
 270:bluetooth_rxtx.c **** 	}
 271:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1432              		.loc 1 271 0
 1433 0072 3D4B     		ldr	r3, .L25+20
 1434 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1435 0076 9BB2     		uxth	r3, r3
 1436 0078 DBB2     		uxtb	r3, r3
 1437 007a 623B     		subs	r3, r3, #98
 1438 007c DAB2     		uxtb	r2, r3
 1439 007e FB69     		ldr	r3, [r7, #28]
 1440 0080 9A70     		strb	r2, [r3, #2]
 272:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1441              		.loc 1 272 0
 1442 0082 3A4B     		ldr	r3, .L25+24
 1443 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1444 0086 DAB2     		uxtb	r2, r3
 1445 0088 FB69     		ldr	r3, [r7, #28]
 1446 008a 5A72     		strb	r2, [r3, #9]
 273:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
 1447              		.loc 1 273 0
 1448 008c 384B     		ldr	r3, .L25+28
 1449 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1450 0090 DAB2     		uxtb	r2, r3
 1451 0092 FB69     		ldr	r3, [r7, #28]
 1452 0094 1A72     		strb	r2, [r3, #8]
 274:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
ARM GAS  /tmp/ccxwuSCA.s 			page 30


 1453              		.loc 1 274 0
 1454 0096 374B     		ldr	r3, .L25+32
 1455 0098 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1456 009a FB69     		ldr	r3, [r7, #28]
 1457 009c 1A73     		strb	r2, [r3, #12]
 275:bluetooth_rxtx.c **** //	f->rssi_avg = device_index;
 276:bluetooth_rxtx.c **** 	
 277:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 278:bluetooth_rxtx.c **** 
 279:bluetooth_rxtx.c **** 	USRLED_SET;
 1458              		.loc 1 279 0
 1459 009e 364B     		ldr	r3, .L25+36
 1460 00a0 0222     		movs	r2, #2
 1461 00a2 1A60     		str	r2, [r3]
 280:bluetooth_rxtx.c **** 
 281:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 282:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1462              		.loc 1 282 0
 1463 00a4 FB69     		ldr	r3, [r7, #28]
 1464 00a6 0E33     		adds	r3, r3, #14
 1465 00a8 BB61     		str	r3, [r7, #24]
 283:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1466              		.loc 1 283 0
 1467 00aa 3B68     		ldr	r3, [r7]
 1468 00ac 7B61     		str	r3, [r7, #20]
 284:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1469              		.loc 1 284 0
 1470 00ae 7B69     		ldr	r3, [r7, #20]
 1471 00b0 1A68     		ldr	r2, [r3]
 1472 00b2 BB69     		ldr	r3, [r7, #24]
 1473 00b4 1A60     		str	r2, [r3]
 285:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1474              		.loc 1 285 0
 1475 00b6 BB69     		ldr	r3, [r7, #24]
 1476 00b8 0433     		adds	r3, r3, #4
 1477 00ba 7A69     		ldr	r2, [r7, #20]
 1478 00bc 5268     		ldr	r2, [r2, #4]
 1479 00be 1A60     		str	r2, [r3]
 286:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1480              		.loc 1 286 0
 1481 00c0 BB69     		ldr	r3, [r7, #24]
 1482 00c2 0833     		adds	r3, r3, #8
 1483 00c4 7A69     		ldr	r2, [r7, #20]
 1484 00c6 9268     		ldr	r2, [r2, #8]
 1485 00c8 1A60     		str	r2, [r3]
 287:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1486              		.loc 1 287 0
 1487 00ca BB69     		ldr	r3, [r7, #24]
 1488 00cc 0C33     		adds	r3, r3, #12
 1489 00ce 7A69     		ldr	r2, [r7, #20]
 1490 00d0 D268     		ldr	r2, [r2, #12]
 1491 00d2 1A60     		str	r2, [r3]
 288:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1492              		.loc 1 288 0
 1493 00d4 BB69     		ldr	r3, [r7, #24]
 1494 00d6 1033     		adds	r3, r3, #16
 1495 00d8 7A69     		ldr	r2, [r7, #20]
ARM GAS  /tmp/ccxwuSCA.s 			page 31


 1496 00da 1269     		ldr	r2, [r2, #16]
 1497 00dc 1A60     		str	r2, [r3]
 289:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1498              		.loc 1 289 0
 1499 00de BB69     		ldr	r3, [r7, #24]
 1500 00e0 1433     		adds	r3, r3, #20
 1501 00e2 7A69     		ldr	r2, [r7, #20]
 1502 00e4 5269     		ldr	r2, [r2, #20]
 1503 00e6 1A60     		str	r2, [r3]
 290:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1504              		.loc 1 290 0
 1505 00e8 BB69     		ldr	r3, [r7, #24]
 1506 00ea 1833     		adds	r3, r3, #24
 1507 00ec 7A69     		ldr	r2, [r7, #20]
 1508 00ee 9269     		ldr	r2, [r2, #24]
 1509 00f0 1A60     		str	r2, [r3]
 291:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1510              		.loc 1 291 0
 1511 00f2 BB69     		ldr	r3, [r7, #24]
 1512 00f4 1C33     		adds	r3, r3, #28
 1513 00f6 7A69     		ldr	r2, [r7, #20]
 1514 00f8 D269     		ldr	r2, [r2, #28]
 1515 00fa 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1516              		.loc 1 292 0
 1517 00fc BB69     		ldr	r3, [r7, #24]
 1518 00fe 2033     		adds	r3, r3, #32
 1519 0100 7A69     		ldr	r2, [r7, #20]
 1520 0102 126A     		ldr	r2, [r2, #32]
 1521 0104 1A60     		str	r2, [r3]
 293:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1522              		.loc 1 293 0
 1523 0106 BB69     		ldr	r3, [r7, #24]
 1524 0108 2433     		adds	r3, r3, #36
 1525 010a 7A69     		ldr	r2, [r7, #20]
 1526 010c 526A     		ldr	r2, [r2, #36]
 1527 010e 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1528              		.loc 1 294 0
 1529 0110 BB69     		ldr	r3, [r7, #24]
 1530 0112 2833     		adds	r3, r3, #40
 1531 0114 7A69     		ldr	r2, [r7, #20]
 1532 0116 926A     		ldr	r2, [r2, #40]
 1533 0118 1A60     		str	r2, [r3]
 295:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1534              		.loc 1 295 0
 1535 011a BB69     		ldr	r3, [r7, #24]
 1536 011c 2C33     		adds	r3, r3, #44
 1537 011e 7A69     		ldr	r2, [r7, #20]
 1538 0120 D26A     		ldr	r2, [r2, #44]
 1539 0122 1A60     		str	r2, [r3]
 296:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 297:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1540              		.loc 1 297 0
 1541 0124 FB69     		ldr	r3, [r7, #28]
 1542 0126 0E33     		adds	r3, r3, #14
 1543 0128 3B61     		str	r3, [r7, #16]
ARM GAS  /tmp/ccxwuSCA.s 			page 32


 298:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1544              		.loc 1 298 0
 1545 012a 3B68     		ldr	r3, [r7]
 1546 012c FB60     		str	r3, [r7, #12]
 299:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1547              		.loc 1 299 0
 1548 012e 3B69     		ldr	r3, [r7, #16]
 1549 0130 3033     		adds	r3, r3, #48
 1550 0132 FA68     		ldr	r2, [r7, #12]
 1551 0134 128E     		ldrh	r2, [r2, #48]
 1552 0136 1A80     		strh	r2, [r3]	@ movhi
 300:bluetooth_rxtx.c **** 
 301:bluetooth_rxtx.c **** 	f->status = status;
 1553              		.loc 1 301 0
 1554 0138 064B     		ldr	r3, .L25
 1555 013a 1B78     		ldrb	r3, [r3]
 1556 013c DAB2     		uxtb	r2, r3
 1557 013e FB69     		ldr	r3, [r7, #28]
 1558 0140 5A70     		strb	r2, [r3, #1]
 302:bluetooth_rxtx.c **** 	status = 0;
 1559              		.loc 1 302 0
 1560 0142 044B     		ldr	r3, .L25
 1561 0144 0022     		movs	r2, #0
 1562 0146 1A70     		strb	r2, [r3]
 303:bluetooth_rxtx.c **** 
 304:bluetooth_rxtx.c **** 	return 1;
 1563              		.loc 1 304 0
 1564 0148 0123     		movs	r3, #1
 1565              	.L22:
 305:bluetooth_rxtx.c **** }
 1566              		.loc 1 305 0
 1567 014a 1846     		mov	r0, r3
 1568 014c 2037     		adds	r7, r7, #32
 1569              		.cfi_def_cfa_offset 8
 1570 014e BD46     		mov	sp, r7
 1571              		.cfi_def_cfa_register 13
 1572              		@ sp needed
 1573 0150 80BD     		pop	{r7, pc}
 1574              	.L26:
 1575 0152 00BF     		.align	2
 1576              	.L25:
 1577 0154 00000000 		.word	status
 1578 0158 00000000 		.word	clkn
 1579 015c 08400040 		.word	1073758216
 1580 0160 00000000 		.word	idle_buf_clkn_high
 1581 0164 00000000 		.word	idle_buf_clk100ns
 1582 0168 00000000 		.word	idle_buf_channel
 1583 016c 00000000 		.word	rssi_min
 1584 0170 00000000 		.word	rssi_max
 1585 0174 00000000 		.word	device_index
 1586 0178 38C00920 		.word	537509944
 1587              		.cfi_endproc
 1588              	.LFE4:
 1590              		.section	.text.enqueue_with_ts,"ax",%progbits
 1591              		.align	2
 1592              		.global	enqueue_with_ts
 1593              		.thumb
ARM GAS  /tmp/ccxwuSCA.s 			page 33


 1594              		.thumb_func
 1596              	enqueue_with_ts:
 1597              	.LFB5:
 306:bluetooth_rxtx.c **** 
 307:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 308:bluetooth_rxtx.c **** {
 1598              		.loc 1 308 0
 1599              		.cfi_startproc
 1600              		@ args = 0, pretend = 0, frame = 40
 1601              		@ frame_needed = 1, uses_anonymous_args = 0
 1602 0000 80B5     		push	{r7, lr}
 1603              		.cfi_def_cfa_offset 8
 1604              		.cfi_offset 7, -8
 1605              		.cfi_offset 14, -4
 1606 0002 8AB0     		sub	sp, sp, #40
 1607              		.cfi_def_cfa_offset 48
 1608 0004 00AF     		add	r7, sp, #0
 1609              		.cfi_def_cfa_register 7
 1610 0006 0346     		mov	r3, r0
 1611 0008 B960     		str	r1, [r7, #8]
 1612 000a 7A60     		str	r2, [r7, #4]
 1613 000c FB73     		strb	r3, [r7, #15]
 309:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1614              		.loc 1 309 0
 1615 000e FFF7FEFF 		bl	usb_enqueue
 1616 0012 7862     		str	r0, [r7, #36]
 310:bluetooth_rxtx.c **** 
 311:bluetooth_rxtx.c **** 	/* fail if queue is full */
 312:bluetooth_rxtx.c **** 	if (f == NULL) {
 1617              		.loc 1 312 0
 1618 0014 7B6A     		ldr	r3, [r7, #36]
 1619 0016 002B     		cmp	r3, #0
 1620 0018 09D1     		bne	.L28
 313:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1621              		.loc 1 313 0
 1622 001a 3C4B     		ldr	r3, .L30
 1623 001c 1B78     		ldrb	r3, [r3]
 1624 001e DBB2     		uxtb	r3, r3
 1625 0020 43F00403 		orr	r3, r3, #4
 1626 0024 DAB2     		uxtb	r2, r3
 1627 0026 394B     		ldr	r3, .L30
 1628 0028 1A70     		strb	r2, [r3]
 314:bluetooth_rxtx.c **** 		return 0;
 1629              		.loc 1 314 0
 1630 002a 0023     		movs	r3, #0
 1631 002c 69E0     		b	.L29
 1632              	.L28:
 315:bluetooth_rxtx.c **** 	}
 316:bluetooth_rxtx.c **** 
 317:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 1633              		.loc 1 317 0
 1634 002e 7B6A     		ldr	r3, [r7, #36]
 1635 0030 0022     		movs	r2, #0
 1636 0032 DA70     		strb	r2, [r3, #3]
 318:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1637              		.loc 1 318 0
 1638 0034 7B6A     		ldr	r3, [r7, #36]
ARM GAS  /tmp/ccxwuSCA.s 			page 34


 1639 0036 7A68     		ldr	r2, [r7, #4]
 1640 0038 5A60     		str	r2, [r3, #4]
 319:bluetooth_rxtx.c **** 
 320:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1641              		.loc 1 320 0
 1642 003a 354B     		ldr	r3, .L30+4
 1643 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1644 003e 9BB2     		uxth	r3, r3
 1645 0040 DBB2     		uxtb	r3, r3
 1646 0042 623B     		subs	r3, r3, #98
 1647 0044 DAB2     		uxtb	r2, r3
 1648 0046 7B6A     		ldr	r3, [r7, #36]
 1649 0048 9A70     		strb	r2, [r3, #2]
 321:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 1650              		.loc 1 321 0
 1651 004a 7B6A     		ldr	r3, [r7, #36]
 1652 004c 0022     		movs	r2, #0
 1653 004e 9A72     		strb	r2, [r3, #10]
 322:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 1654              		.loc 1 322 0
 1655 0050 7B6A     		ldr	r3, [r7, #36]
 1656 0052 0022     		movs	r2, #0
 1657 0054 DA72     		strb	r2, [r3, #11]
 323:bluetooth_rxtx.c **** 
 324:bluetooth_rxtx.c **** 	USRLED_SET;
 1658              		.loc 1 324 0
 1659 0056 2F4B     		ldr	r3, .L30+8
 1660 0058 0222     		movs	r2, #2
 1661 005a 1A60     		str	r2, [r3]
 325:bluetooth_rxtx.c **** 
 326:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 327:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1662              		.loc 1 327 0
 1663 005c 7B6A     		ldr	r3, [r7, #36]
 1664 005e 0E33     		adds	r3, r3, #14
 1665 0060 3B62     		str	r3, [r7, #32]
 328:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1666              		.loc 1 328 0
 1667 0062 BB68     		ldr	r3, [r7, #8]
 1668 0064 FB61     		str	r3, [r7, #28]
 329:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1669              		.loc 1 329 0
 1670 0066 FB69     		ldr	r3, [r7, #28]
 1671 0068 1A68     		ldr	r2, [r3]
 1672 006a 3B6A     		ldr	r3, [r7, #32]
 1673 006c 1A60     		str	r2, [r3]
 330:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1674              		.loc 1 330 0
 1675 006e 3B6A     		ldr	r3, [r7, #32]
 1676 0070 0433     		adds	r3, r3, #4
 1677 0072 FA69     		ldr	r2, [r7, #28]
 1678 0074 5268     		ldr	r2, [r2, #4]
 1679 0076 1A60     		str	r2, [r3]
 331:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1680              		.loc 1 331 0
 1681 0078 3B6A     		ldr	r3, [r7, #32]
 1682 007a 0833     		adds	r3, r3, #8
ARM GAS  /tmp/ccxwuSCA.s 			page 35


 1683 007c FA69     		ldr	r2, [r7, #28]
 1684 007e 9268     		ldr	r2, [r2, #8]
 1685 0080 1A60     		str	r2, [r3]
 332:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1686              		.loc 1 332 0
 1687 0082 3B6A     		ldr	r3, [r7, #32]
 1688 0084 0C33     		adds	r3, r3, #12
 1689 0086 FA69     		ldr	r2, [r7, #28]
 1690 0088 D268     		ldr	r2, [r2, #12]
 1691 008a 1A60     		str	r2, [r3]
 333:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1692              		.loc 1 333 0
 1693 008c 3B6A     		ldr	r3, [r7, #32]
 1694 008e 1033     		adds	r3, r3, #16
 1695 0090 FA69     		ldr	r2, [r7, #28]
 1696 0092 1269     		ldr	r2, [r2, #16]
 1697 0094 1A60     		str	r2, [r3]
 334:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1698              		.loc 1 334 0
 1699 0096 3B6A     		ldr	r3, [r7, #32]
 1700 0098 1433     		adds	r3, r3, #20
 1701 009a FA69     		ldr	r2, [r7, #28]
 1702 009c 5269     		ldr	r2, [r2, #20]
 1703 009e 1A60     		str	r2, [r3]
 335:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1704              		.loc 1 335 0
 1705 00a0 3B6A     		ldr	r3, [r7, #32]
 1706 00a2 1833     		adds	r3, r3, #24
 1707 00a4 FA69     		ldr	r2, [r7, #28]
 1708 00a6 9269     		ldr	r2, [r2, #24]
 1709 00a8 1A60     		str	r2, [r3]
 336:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1710              		.loc 1 336 0
 1711 00aa 3B6A     		ldr	r3, [r7, #32]
 1712 00ac 1C33     		adds	r3, r3, #28
 1713 00ae FA69     		ldr	r2, [r7, #28]
 1714 00b0 D269     		ldr	r2, [r2, #28]
 1715 00b2 1A60     		str	r2, [r3]
 337:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1716              		.loc 1 337 0
 1717 00b4 3B6A     		ldr	r3, [r7, #32]
 1718 00b6 2033     		adds	r3, r3, #32
 1719 00b8 FA69     		ldr	r2, [r7, #28]
 1720 00ba 126A     		ldr	r2, [r2, #32]
 1721 00bc 1A60     		str	r2, [r3]
 338:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1722              		.loc 1 338 0
 1723 00be 3B6A     		ldr	r3, [r7, #32]
 1724 00c0 2433     		adds	r3, r3, #36
 1725 00c2 FA69     		ldr	r2, [r7, #28]
 1726 00c4 526A     		ldr	r2, [r2, #36]
 1727 00c6 1A60     		str	r2, [r3]
 339:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1728              		.loc 1 339 0
 1729 00c8 3B6A     		ldr	r3, [r7, #32]
 1730 00ca 2833     		adds	r3, r3, #40
 1731 00cc FA69     		ldr	r2, [r7, #28]
ARM GAS  /tmp/ccxwuSCA.s 			page 36


 1732 00ce 926A     		ldr	r2, [r2, #40]
 1733 00d0 1A60     		str	r2, [r3]
 340:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1734              		.loc 1 340 0
 1735 00d2 3B6A     		ldr	r3, [r7, #32]
 1736 00d4 2C33     		adds	r3, r3, #44
 1737 00d6 FA69     		ldr	r2, [r7, #28]
 1738 00d8 D26A     		ldr	r2, [r2, #44]
 1739 00da 1A60     		str	r2, [r3]
 341:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 342:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1740              		.loc 1 342 0
 1741 00dc 7B6A     		ldr	r3, [r7, #36]
 1742 00de 0E33     		adds	r3, r3, #14
 1743 00e0 BB61     		str	r3, [r7, #24]
 343:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1744              		.loc 1 343 0
 1745 00e2 BB68     		ldr	r3, [r7, #8]
 1746 00e4 7B61     		str	r3, [r7, #20]
 344:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1747              		.loc 1 344 0
 1748 00e6 BB69     		ldr	r3, [r7, #24]
 1749 00e8 3033     		adds	r3, r3, #48
 1750 00ea 7A69     		ldr	r2, [r7, #20]
 1751 00ec 128E     		ldrh	r2, [r2, #48]
 1752 00ee 1A80     		strh	r2, [r3]	@ movhi
 345:bluetooth_rxtx.c **** 
 346:bluetooth_rxtx.c **** 	f->status = status;
 1753              		.loc 1 346 0
 1754 00f0 064B     		ldr	r3, .L30
 1755 00f2 1B78     		ldrb	r3, [r3]
 1756 00f4 DAB2     		uxtb	r2, r3
 1757 00f6 7B6A     		ldr	r3, [r7, #36]
 1758 00f8 5A70     		strb	r2, [r3, #1]
 347:bluetooth_rxtx.c **** 	status = 0;
 1759              		.loc 1 347 0
 1760 00fa 044B     		ldr	r3, .L30
 1761 00fc 0022     		movs	r2, #0
 1762 00fe 1A70     		strb	r2, [r3]
 348:bluetooth_rxtx.c **** 
 349:bluetooth_rxtx.c **** 	return 1;
 1763              		.loc 1 349 0
 1764 0100 0123     		movs	r3, #1
 1765              	.L29:
 350:bluetooth_rxtx.c **** }
 1766              		.loc 1 350 0
 1767 0102 1846     		mov	r0, r3
 1768 0104 2837     		adds	r7, r7, #40
 1769              		.cfi_def_cfa_offset 8
 1770 0106 BD46     		mov	sp, r7
 1771              		.cfi_def_cfa_register 13
 1772              		@ sp needed
 1773 0108 80BD     		pop	{r7, pc}
 1774              	.L31:
 1775 010a 00BF     		.align	2
 1776              	.L30:
 1777 010c 00000000 		.word	status
ARM GAS  /tmp/ccxwuSCA.s 			page 37


 1778 0110 00000000 		.word	channel
 1779 0114 38C00920 		.word	537509944
 1780              		.cfi_endproc
 1781              	.LFE5:
 1783              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 1784              		.align	2
 1785              		.thumb
 1786              		.thumb_func
 1788              	cs_threshold_calc_and_set:
 1789              	.LFB6:
 351:bluetooth_rxtx.c **** 
 352:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 353:bluetooth_rxtx.c **** {
 1790              		.loc 1 353 0
 1791              		.cfi_startproc
 1792              		@ args = 0, pretend = 0, frame = 8
 1793              		@ frame_needed = 1, uses_anonymous_args = 0
 1794 0000 80B5     		push	{r7, lr}
 1795              		.cfi_def_cfa_offset 8
 1796              		.cfi_offset 7, -8
 1797              		.cfi_offset 14, -4
 1798 0002 82B0     		sub	sp, sp, #8
 1799              		.cfi_def_cfa_offset 16
 1800 0004 00AF     		add	r7, sp, #0
 1801              		.cfi_def_cfa_register 7
 354:bluetooth_rxtx.c **** 	int8_t level;
 355:bluetooth_rxtx.c **** 
 356:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 357:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 358:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 359:bluetooth_rxtx.c **** 	 * value for it. */
 360:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 1802              		.loc 1 360 0
 1803 0006 174B     		ldr	r3, .L36
 1804 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1805 000a 002B     		cmp	r3, #0
 1806 000c 1DD0     		beq	.L33
 1807              		.loc 1 360 0 is_stmt 0 discriminator 1
 1808 000e 164B     		ldr	r3, .L36+4
 1809 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1810 0012 5BB2     		sxtb	r3, r3
 1811 0014 002B     		cmp	r3, #0
 1812 0016 18DD     		ble	.L33
 1813              	.LBB2:
 361:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1814              		.loc 1 361 0 is_stmt 1
 1815 0018 144B     		ldr	r3, .L36+8
 1816 001a 1B88     		ldrh	r3, [r3]	@ movhi
 1817 001c 9BB2     		uxth	r3, r3
 1818 001e A3F66213 		subw	r3, r3, #2402
 1819 0022 134A     		ldr	r2, .L36+12
 1820 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1821 0028 1BB2     		sxth	r3, r3
 1822 002a 8033     		adds	r3, r3, #128
 1823 002c 002B     		cmp	r3, #0
 1824 002e 00DA     		bge	.L34
 1825 0030 FF33     		adds	r3, r3, #255
ARM GAS  /tmp/ccxwuSCA.s 			page 38


 1826              	.L34:
 1827 0032 1B12     		asrs	r3, r3, #8
 1828 0034 BB71     		strb	r3, [r7, #6]
 362:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 1829              		.loc 1 362 0
 1830 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1831 0038 0B4B     		ldr	r3, .L36+4
 1832 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1833 003c DBB2     		uxtb	r3, r3
 1834 003e 1344     		add	r3, r3, r2
 1835 0040 DBB2     		uxtb	r3, r3
 1836 0042 363B     		subs	r3, r3, #54
 1837 0044 DBB2     		uxtb	r3, r3
 1838 0046 FB71     		strb	r3, [r7, #7]
 1839              	.LBE2:
 360:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1840              		.loc 1 360 0
 1841 0048 02E0     		b	.L35
 1842              	.L33:
 363:bluetooth_rxtx.c **** 	}
 364:bluetooth_rxtx.c **** 	else {
 365:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 1843              		.loc 1 365 0
 1844 004a 074B     		ldr	r3, .L36+4
 1845 004c 1B78     		ldrb	r3, [r3]
 1846 004e FB71     		strb	r3, [r7, #7]
 1847              	.L35:
 366:bluetooth_rxtx.c **** 	}
 367:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 1848              		.loc 1 367 0
 1849 0050 97F90730 		ldrsb	r3, [r7, #7]
 1850 0054 1846     		mov	r0, r3
 1851 0056 0321     		movs	r1, #3
 1852 0058 FFF7FEFF 		bl	cs_threshold_set
 368:bluetooth_rxtx.c **** }
 1853              		.loc 1 368 0
 1854 005c 0837     		adds	r7, r7, #8
 1855              		.cfi_def_cfa_offset 8
 1856 005e BD46     		mov	sp, r7
 1857              		.cfi_def_cfa_register 13
 1858              		@ sp needed
 1859 0060 80BD     		pop	{r7, pc}
 1860              	.L37:
 1861 0062 00BF     		.align	2
 1862              	.L36:
 1863 0064 00000000 		.word	hop_mode
 1864 0068 00000000 		.word	cs_threshold_req
 1865 006c 00000000 		.word	channel
 1866 0070 00000000 		.word	rssi_iir
 1867              		.cfi_endproc
 1868              	.LFE6:
 1870              		.section	.text.cs_trigger_enable,"ax",%progbits
 1871              		.align	2
 1872              		.thumb
 1873              		.thumb_func
 1875              	cs_trigger_enable:
 1876              	.LFB7:
ARM GAS  /tmp/ccxwuSCA.s 			page 39


 369:bluetooth_rxtx.c **** 
 370:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 371:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 372:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 373:bluetooth_rxtx.c ****  * and off here. */
 374:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 375:bluetooth_rxtx.c **** {
 1877              		.loc 1 375 0
 1878              		.cfi_startproc
 1879              		@ args = 0, pretend = 0, frame = 0
 1880              		@ frame_needed = 1, uses_anonymous_args = 0
 1881              		@ link register save eliminated.
 1882 0000 80B4     		push	{r7}
 1883              		.cfi_def_cfa_offset 4
 1884              		.cfi_offset 7, -4
 1885 0002 00AF     		add	r7, sp, #0
 1886              		.cfi_def_cfa_register 7
 376:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1887              		.loc 1 376 0
 1888 0004 094B     		ldr	r3, .L39
 1889 0006 0022     		movs	r2, #0
 1890 0008 1A70     		strb	r2, [r3]
 377:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 1891              		.loc 1 377 0
 1892 000a 094B     		ldr	r3, .L39+4
 1893 000c 4FF40012 		mov	r2, #2097152
 1894 0010 1A60     		str	r2, [r3]
 378:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1895              		.loc 1 378 0
 1896 0012 084B     		ldr	r3, .L39+8
 1897 0014 0422     		movs	r2, #4
 1898 0016 1A60     		str	r2, [r3]
 379:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 1899              		.loc 1 379 0
 1900 0018 074A     		ldr	r2, .L39+12
 1901 001a 074B     		ldr	r3, .L39+12
 1902 001c 1B68     		ldr	r3, [r3]
 1903 001e 43F00403 		orr	r3, r3, #4
 1904 0022 1360     		str	r3, [r2]
 380:bluetooth_rxtx.c **** }
 1905              		.loc 1 380 0
 1906 0024 BD46     		mov	sp, r7
 1907              		.cfi_def_cfa_register 13
 1908              		@ sp needed
 1909 0026 5DF8047B 		ldr	r7, [sp], #4
 1910              		.cfi_restore 7
 1911              		.cfi_def_cfa_offset 0
 1912 002a 7047     		bx	lr
 1913              	.L40:
 1914              		.align	2
 1915              	.L39:
 1916 002c 00000000 		.word	cs_trigger
 1917 0030 00E100E0 		.word	-536813312
 1918 0034 AC800240 		.word	1073905836
 1919 0038 B4800240 		.word	1073905844
 1920              		.cfi_endproc
 1921              	.LFE7:
ARM GAS  /tmp/ccxwuSCA.s 			page 40


 1923              		.section	.text.cs_trigger_disable,"ax",%progbits
 1924              		.align	2
 1925              		.thumb
 1926              		.thumb_func
 1928              	cs_trigger_disable:
 1929              	.LFB8:
 381:bluetooth_rxtx.c **** 
 382:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 383:bluetooth_rxtx.c **** {
 1930              		.loc 1 383 0
 1931              		.cfi_startproc
 1932              		@ args = 0, pretend = 0, frame = 0
 1933              		@ frame_needed = 1, uses_anonymous_args = 0
 1934              		@ link register save eliminated.
 1935 0000 80B4     		push	{r7}
 1936              		.cfi_def_cfa_offset 4
 1937              		.cfi_offset 7, -4
 1938 0002 00AF     		add	r7, sp, #0
 1939              		.cfi_def_cfa_register 7
 384:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 1940              		.loc 1 384 0
 1941 0004 094A     		ldr	r2, .L42
 1942 0006 094B     		ldr	r3, .L42
 1943 0008 1B68     		ldr	r3, [r3]
 1944 000a 23F00403 		bic	r3, r3, #4
 1945 000e 1360     		str	r3, [r2]
 385:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1946              		.loc 1 385 0
 1947 0010 074B     		ldr	r3, .L42+4
 1948 0012 0422     		movs	r2, #4
 1949 0014 1A60     		str	r2, [r3]
 386:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 1950              		.loc 1 386 0
 1951 0016 074B     		ldr	r3, .L42+8
 1952 0018 4FF40012 		mov	r2, #2097152
 1953 001c 1A60     		str	r2, [r3]
 387:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1954              		.loc 1 387 0
 1955 001e 064B     		ldr	r3, .L42+12
 1956 0020 0022     		movs	r2, #0
 1957 0022 1A70     		strb	r2, [r3]
 388:bluetooth_rxtx.c **** }
 1958              		.loc 1 388 0
 1959 0024 BD46     		mov	sp, r7
 1960              		.cfi_def_cfa_register 13
 1961              		@ sp needed
 1962 0026 5DF8047B 		ldr	r7, [sp], #4
 1963              		.cfi_restore 7
 1964              		.cfi_def_cfa_offset 0
 1965 002a 7047     		bx	lr
 1966              	.L43:
 1967              		.align	2
 1968              	.L42:
 1969 002c B4800240 		.word	1073905844
 1970 0030 AC800240 		.word	1073905836
 1971 0034 80E100E0 		.word	-536813184
 1972 0038 00000000 		.word	cs_trigger
ARM GAS  /tmp/ccxwuSCA.s 			page 41


 1973              		.cfi_endproc
 1974              	.LFE8:
 1976              		.section	.rodata
 1977 08d1 000000   		.align	2
 1978              	.LC3:
 1979 08d4 32303135 		.ascii	"2015-10-R1\000"
 1979      2D31302D 
 1979      523100
 1980              		.section	.text.vendor_request_handler,"ax",%progbits
 1981              		.align	2
 1982              		.thumb
 1983              		.thumb_func
 1985              	vendor_request_handler:
 1986              	.LFB9:
 389:bluetooth_rxtx.c **** 
 390:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 391:bluetooth_rxtx.c **** {
 1987              		.loc 1 391 0
 1988              		.cfi_startproc
 1989              		@ args = 0, pretend = 0, frame = 80
 1990              		@ frame_needed = 1, uses_anonymous_args = 0
 1991 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1992              		.cfi_def_cfa_offset 36
 1993              		.cfi_offset 4, -36
 1994              		.cfi_offset 5, -32
 1995              		.cfi_offset 6, -28
 1996              		.cfi_offset 7, -24
 1997              		.cfi_offset 8, -20
 1998              		.cfi_offset 9, -16
 1999              		.cfi_offset 10, -12
 2000              		.cfi_offset 11, -8
 2001              		.cfi_offset 14, -4
 2002 0004 95B0     		sub	sp, sp, #84
 2003              		.cfi_def_cfa_offset 120
 2004 0006 00AF     		add	r7, sp, #0
 2005              		.cfi_def_cfa_register 7
 2006 0008 B960     		str	r1, [r7, #8]
 2007 000a 7A60     		str	r2, [r7, #4]
 2008 000c 3B60     		str	r3, [r7]
 2009 000e 0346     		mov	r3, r0
 2010 0010 FB73     		strb	r3, [r7, #15]
 392:bluetooth_rxtx.c **** 	u32 command[5];
 393:bluetooth_rxtx.c **** 	u32 result[5];
 394:bluetooth_rxtx.c **** 	u64 ac_copy;
 395:bluetooth_rxtx.c **** 	int i; // loop counter
 396:bluetooth_rxtx.c **** 	u32 clock;
 397:bluetooth_rxtx.c **** 	int clock_offset;
 398:bluetooth_rxtx.c **** 	u8 length; // string length
 399:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2011              		.loc 1 399 0
 2012 0012 0023     		movs	r3, #0
 2013 0014 7B64     		str	r3, [r7, #68]
 400:bluetooth_rxtx.c **** 	u16 reg_val;
 401:bluetooth_rxtx.c **** 
 402:bluetooth_rxtx.c **** 	switch (request) {
 2014              		.loc 1 402 0
 2015 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
ARM GAS  /tmp/ccxwuSCA.s 			page 42


 2016 0018 3C2B     		cmp	r3, #60
 2017 001a 00F25185 		bhi	.L45
 2018 001e 01A2     		adr	r2, .L47
 2019 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2020              		.p2align 2
 2021              	.L47:
 2022 0024 19010000 		.word	.L46+1
 2023 0028 23010000 		.word	.L48+1
 2024 002c C10A0000 		.word	.L45+1
 2025 0030 33010000 		.word	.L49+1
 2026 0034 55010000 		.word	.L50+1
 2027 0038 71010000 		.word	.L51+1
 2028 003c 93010000 		.word	.L52+1
 2029 0040 AF010000 		.word	.L53+1
 2030 0044 D1010000 		.word	.L54+1
 2031 0048 F1010000 		.word	.L55+1
 2032 004c 13020000 		.word	.L56+1
 2033 0050 B7040000 		.word	.L57+1
 2034 0054 DD040000 		.word	.L58+1
 2035 0058 89020000 		.word	.L59+1
 2036 005c 93020000 		.word	.L60+1
 2037 0060 33020000 		.word	.L61+1
 2038 0064 71030000 		.word	.L62+1
 2039 0068 91030000 		.word	.L63+1
 2040 006c C9030000 		.word	.L64+1
 2041 0070 E9030000 		.word	.L65+1
 2042 0074 05040000 		.word	.L66+1
 2043 0078 91040000 		.word	.L67+1
 2044 007c 99040000 		.word	.L68+1
 2045 0080 AB040000 		.word	.L69+1
 2046 0084 67050000 		.word	.L70+1
 2047 0088 85050000 		.word	.L71+1
 2048 008c C10A0000 		.word	.L45+1
 2049 0090 91050000 		.word	.L72+1
 2050 0094 0D040000 		.word	.L73+1
 2051 0098 29040000 		.word	.L74+1
 2052 009c 51040000 		.word	.L75+1
 2053 00a0 49040000 		.word	.L76+1
 2054 00a4 59040000 		.word	.L77+1
 2055 00a8 55060000 		.word	.L78+1
 2056 00ac ED050000 		.word	.L79+1
 2057 00b0 C9060000 		.word	.L80+1
 2058 00b4 D7060000 		.word	.L81+1
 2059 00b8 E7060000 		.word	.L82+1
 2060 00bc F9060000 		.word	.L83+1
 2061 00c0 C5070000 		.word	.L84+1
 2062 00c4 0B080000 		.word	.L85+1
 2063 00c8 99080000 		.word	.L86+1
 2064 00cc CD080000 		.word	.L87+1
 2065 00d0 EF080000 		.word	.L88+1
 2066 00d4 47090000 		.word	.L89+1
 2067 00d8 C50A0000 		.word	.L148+1
 2068 00dc 79090000 		.word	.L91+1
 2069 00e0 8F090000 		.word	.L92+1
 2070 00e4 AB090000 		.word	.L93+1
 2071 00e8 C1090000 		.word	.L94+1
 2072 00ec ED090000 		.word	.L95+1
ARM GAS  /tmp/ccxwuSCA.s 			page 43


 2073 00f0 3D080000 		.word	.L96+1
 2074 00f4 6F080000 		.word	.L97+1
 2075 00f8 090A0000 		.word	.L98+1
 2076 00fc 4D0A0000 		.word	.L99+1
 2077 0100 97060000 		.word	.L100+1
 2078 0104 5F0A0000 		.word	.L101+1
 2079 0108 C10A0000 		.word	.L45+1
 2080 010c 370A0000 		.word	.L102+1
 2081 0110 A30A0000 		.word	.L103+1
 2082 0114 AF0A0000 		.word	.L104+1
 2083              		.p2align 1
 2084              	.L46:
 403:bluetooth_rxtx.c **** 
 404:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 405:bluetooth_rxtx.c **** 		*data_len = 0;
 2085              		.loc 1 405 0
 2086 0118 3B68     		ldr	r3, [r7]
 2087 011a 0022     		movs	r2, #0
 2088 011c 1A60     		str	r2, [r3]
 406:bluetooth_rxtx.c **** 		break;
 2089              		.loc 1 406 0
 2090 011e 00F0D2BC 		b	.L105
 2091              	.L48:
 407:bluetooth_rxtx.c **** 
 408:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 409:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2092              		.loc 1 409 0
 2093 0122 A14B     		ldr	r3, .L149
 2094 0124 0122     		movs	r2, #1
 2095 0126 1A70     		strb	r2, [r3]
 410:bluetooth_rxtx.c **** 		*data_len = 0;
 2096              		.loc 1 410 0
 2097 0128 3B68     		ldr	r3, [r7]
 2098 012a 0022     		movs	r2, #0
 2099 012c 1A60     		str	r2, [r3]
 411:bluetooth_rxtx.c **** 		break;
 2100              		.loc 1 411 0
 2101 012e 00F0CABC 		b	.L105
 2102              	.L49:
 412:bluetooth_rxtx.c **** 
 413:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 414:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 2103              		.loc 1 414 0
 2104 0132 9E4B     		ldr	r3, .L149+4
 2105 0134 1B68     		ldr	r3, [r3]
 2106 0136 03F00203 		and	r3, r3, #2
 2107 013a 002B     		cmp	r3, #0
 2108 013c 14BF     		ite	ne
 2109 013e 0123     		movne	r3, #1
 2110 0140 0023     		moveq	r3, #0
 2111 0142 DBB2     		uxtb	r3, r3
 2112 0144 1A46     		mov	r2, r3
 2113 0146 7B68     		ldr	r3, [r7, #4]
 2114 0148 1A70     		strb	r2, [r3]
 415:bluetooth_rxtx.c **** 		*data_len = 1;
 2115              		.loc 1 415 0
 2116 014a 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccxwuSCA.s 			page 44


 2117 014c 0122     		movs	r2, #1
 2118 014e 1A60     		str	r2, [r3]
 416:bluetooth_rxtx.c **** 		break;
 2119              		.loc 1 416 0
 2120 0150 00F0B9BC 		b	.L105
 2121              	.L50:
 417:bluetooth_rxtx.c **** 
 418:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 419:bluetooth_rxtx.c **** 		if (request_params[0])
 2122              		.loc 1 419 0
 2123 0154 BB68     		ldr	r3, [r7, #8]
 2124 0156 1B88     		ldrh	r3, [r3]
 2125 0158 002B     		cmp	r3, #0
 2126 015a 04D0     		beq	.L106
 420:bluetooth_rxtx.c **** 			USRLED_SET;
 2127              		.loc 1 420 0
 2128 015c 944B     		ldr	r3, .L149+8
 2129 015e 0222     		movs	r2, #2
 2130 0160 1A60     		str	r2, [r3]
 421:bluetooth_rxtx.c **** 		else
 422:bluetooth_rxtx.c **** 			USRLED_CLR;
 423:bluetooth_rxtx.c **** 		break;
 2131              		.loc 1 423 0
 2132 0162 00F0B0BC 		b	.L105
 2133              	.L106:
 422:bluetooth_rxtx.c **** 		break;
 2134              		.loc 1 422 0
 2135 0166 934B     		ldr	r3, .L149+12
 2136 0168 0222     		movs	r2, #2
 2137 016a 1A60     		str	r2, [r3]
 2138              		.loc 1 423 0
 2139 016c 00F0ABBC 		b	.L105
 2140              	.L51:
 424:bluetooth_rxtx.c **** 
 425:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 426:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2141              		.loc 1 426 0
 2142 0170 8E4B     		ldr	r3, .L149+4
 2143 0172 1B68     		ldr	r3, [r3]
 2144 0174 03F01003 		and	r3, r3, #16
 2145 0178 002B     		cmp	r3, #0
 2146 017a 14BF     		ite	ne
 2147 017c 0123     		movne	r3, #1
 2148 017e 0023     		moveq	r3, #0
 2149 0180 DBB2     		uxtb	r3, r3
 2150 0182 1A46     		mov	r2, r3
 2151 0184 7B68     		ldr	r3, [r7, #4]
 2152 0186 1A70     		strb	r2, [r3]
 427:bluetooth_rxtx.c **** 		*data_len = 1;
 2153              		.loc 1 427 0
 2154 0188 3B68     		ldr	r3, [r7]
 2155 018a 0122     		movs	r2, #1
 2156 018c 1A60     		str	r2, [r3]
 428:bluetooth_rxtx.c **** 		break;
 2157              		.loc 1 428 0
 2158 018e 00F09ABC 		b	.L105
 2159              	.L52:
ARM GAS  /tmp/ccxwuSCA.s 			page 45


 429:bluetooth_rxtx.c **** 
 430:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 431:bluetooth_rxtx.c **** 		if (request_params[0])
 2160              		.loc 1 431 0
 2161 0192 BB68     		ldr	r3, [r7, #8]
 2162 0194 1B88     		ldrh	r3, [r3]
 2163 0196 002B     		cmp	r3, #0
 2164 0198 04D0     		beq	.L108
 432:bluetooth_rxtx.c **** 			RXLED_SET;
 2165              		.loc 1 432 0
 2166 019a 854B     		ldr	r3, .L149+8
 2167 019c 1022     		movs	r2, #16
 2168 019e 1A60     		str	r2, [r3]
 433:bluetooth_rxtx.c **** 		else
 434:bluetooth_rxtx.c **** 			RXLED_CLR;
 435:bluetooth_rxtx.c **** 		break;
 2169              		.loc 1 435 0
 2170 01a0 00F091BC 		b	.L105
 2171              	.L108:
 434:bluetooth_rxtx.c **** 		break;
 2172              		.loc 1 434 0
 2173 01a4 834B     		ldr	r3, .L149+12
 2174 01a6 1022     		movs	r2, #16
 2175 01a8 1A60     		str	r2, [r3]
 2176              		.loc 1 435 0
 2177 01aa 00F08CBC 		b	.L105
 2178              	.L53:
 436:bluetooth_rxtx.c **** 
 437:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 438:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2179              		.loc 1 438 0
 2180 01ae 7F4B     		ldr	r3, .L149+4
 2181 01b0 1B68     		ldr	r3, [r3]
 2182 01b2 03F48073 		and	r3, r3, #256
 2183 01b6 002B     		cmp	r3, #0
 2184 01b8 14BF     		ite	ne
 2185 01ba 0123     		movne	r3, #1
 2186 01bc 0023     		moveq	r3, #0
 2187 01be DBB2     		uxtb	r3, r3
 2188 01c0 1A46     		mov	r2, r3
 2189 01c2 7B68     		ldr	r3, [r7, #4]
 2190 01c4 1A70     		strb	r2, [r3]
 439:bluetooth_rxtx.c **** 		*data_len = 1;
 2191              		.loc 1 439 0
 2192 01c6 3B68     		ldr	r3, [r7]
 2193 01c8 0122     		movs	r2, #1
 2194 01ca 1A60     		str	r2, [r3]
 440:bluetooth_rxtx.c **** 		break;
 2195              		.loc 1 440 0
 2196 01cc 00F07BBC 		b	.L105
 2197              	.L54:
 441:bluetooth_rxtx.c **** 
 442:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 443:bluetooth_rxtx.c **** 		if (request_params[0])
 2198              		.loc 1 443 0
 2199 01d0 BB68     		ldr	r3, [r7, #8]
 2200 01d2 1B88     		ldrh	r3, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 46


 2201 01d4 002B     		cmp	r3, #0
 2202 01d6 05D0     		beq	.L110
 444:bluetooth_rxtx.c **** 			TXLED_SET;
 2203              		.loc 1 444 0
 2204 01d8 754B     		ldr	r3, .L149+8
 2205 01da 4FF48072 		mov	r2, #256
 2206 01de 1A60     		str	r2, [r3]
 445:bluetooth_rxtx.c **** 		else
 446:bluetooth_rxtx.c **** 			TXLED_CLR;
 447:bluetooth_rxtx.c **** 		break;
 2207              		.loc 1 447 0
 2208 01e0 00F071BC 		b	.L105
 2209              	.L110:
 446:bluetooth_rxtx.c **** 		break;
 2210              		.loc 1 446 0
 2211 01e4 734B     		ldr	r3, .L149+12
 2212 01e6 4FF48072 		mov	r2, #256
 2213 01ea 1A60     		str	r2, [r3]
 2214              		.loc 1 447 0
 2215 01ec 00F06BBC 		b	.L105
 2216              	.L55:
 448:bluetooth_rxtx.c **** 
 449:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 450:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2217              		.loc 1 450 0
 2218 01f0 6E4B     		ldr	r3, .L149+4
 2219 01f2 1B68     		ldr	r3, [r3]
 2220 01f4 03F40073 		and	r3, r3, #512
 2221 01f8 002B     		cmp	r3, #0
 2222 01fa 14BF     		ite	ne
 2223 01fc 0123     		movne	r3, #1
 2224 01fe 0023     		moveq	r3, #0
 2225 0200 DBB2     		uxtb	r3, r3
 2226 0202 1A46     		mov	r2, r3
 2227 0204 7B68     		ldr	r3, [r7, #4]
 2228 0206 1A70     		strb	r2, [r3]
 451:bluetooth_rxtx.c **** 		*data_len = 1;
 2229              		.loc 1 451 0
 2230 0208 3B68     		ldr	r3, [r7]
 2231 020a 0122     		movs	r2, #1
 2232 020c 1A60     		str	r2, [r3]
 452:bluetooth_rxtx.c **** 		break;
 2233              		.loc 1 452 0
 2234 020e 00F05ABC 		b	.L105
 2235              	.L56:
 453:bluetooth_rxtx.c **** 
 454:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 455:bluetooth_rxtx.c **** 		if (request_params[0])
 2236              		.loc 1 455 0
 2237 0212 BB68     		ldr	r3, [r7, #8]
 2238 0214 1B88     		ldrh	r3, [r3]
 2239 0216 002B     		cmp	r3, #0
 2240 0218 05D0     		beq	.L112
 456:bluetooth_rxtx.c **** 			CC1V8_SET;
 2241              		.loc 1 456 0
 2242 021a 654B     		ldr	r3, .L149+8
 2243 021c 4FF40072 		mov	r2, #512
ARM GAS  /tmp/ccxwuSCA.s 			page 47


 2244 0220 1A60     		str	r2, [r3]
 457:bluetooth_rxtx.c **** 		else
 458:bluetooth_rxtx.c **** 			CC1V8_CLR;
 459:bluetooth_rxtx.c **** 		break;
 2245              		.loc 1 459 0
 2246 0222 00F050BC 		b	.L105
 2247              	.L112:
 458:bluetooth_rxtx.c **** 		break;
 2248              		.loc 1 458 0
 2249 0226 634B     		ldr	r3, .L149+12
 2250 0228 4FF40072 		mov	r2, #512
 2251 022c 1A60     		str	r2, [r3]
 2252              		.loc 1 459 0
 2253 022e 00F04ABC 		b	.L105
 2254              	.L61:
 460:bluetooth_rxtx.c **** 
 461:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 462:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2255              		.loc 1 462 0
 2256 0232 3623     		movs	r3, #54
 2257 0234 7B62     		str	r3, [r7, #36]
 463:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2258              		.loc 1 463 0
 2259 0236 604B     		ldr	r3, .L149+16
 2260 0238 1B68     		ldr	r3, [r3]
 2261 023a 07F12401 		add	r1, r7, #36
 2262 023e 07F11002 		add	r2, r7, #16
 2263 0242 0846     		mov	r0, r1
 2264 0244 1146     		mov	r1, r2
 2265 0246 9847     		blx	r3
 464:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2266              		.loc 1 464 0
 2267 0248 3B69     		ldr	r3, [r7, #16]
 2268 024a DAB2     		uxtb	r2, r3
 2269 024c 7B68     		ldr	r3, [r7, #4]
 2270 024e 1A70     		strb	r2, [r3]
 465:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2271              		.loc 1 465 0
 2272 0250 7B68     		ldr	r3, [r7, #4]
 2273 0252 0133     		adds	r3, r3, #1
 2274 0254 7A69     		ldr	r2, [r7, #20]
 2275 0256 D2B2     		uxtb	r2, r2
 2276 0258 1A70     		strb	r2, [r3]
 466:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2277              		.loc 1 466 0
 2278 025a 7B68     		ldr	r3, [r7, #4]
 2279 025c 0233     		adds	r3, r3, #2
 2280 025e 7A69     		ldr	r2, [r7, #20]
 2281 0260 120A     		lsrs	r2, r2, #8
 2282 0262 D2B2     		uxtb	r2, r2
 2283 0264 1A70     		strb	r2, [r3]
 467:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2284              		.loc 1 467 0
 2285 0266 7B68     		ldr	r3, [r7, #4]
 2286 0268 0333     		adds	r3, r3, #3
 2287 026a 7A69     		ldr	r2, [r7, #20]
 2288 026c 120C     		lsrs	r2, r2, #16
ARM GAS  /tmp/ccxwuSCA.s 			page 48


 2289 026e D2B2     		uxtb	r2, r2
 2290 0270 1A70     		strb	r2, [r3]
 468:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2291              		.loc 1 468 0
 2292 0272 7B68     		ldr	r3, [r7, #4]
 2293 0274 0433     		adds	r3, r3, #4
 2294 0276 7A69     		ldr	r2, [r7, #20]
 2295 0278 120E     		lsrs	r2, r2, #24
 2296 027a D2B2     		uxtb	r2, r2
 2297 027c 1A70     		strb	r2, [r3]
 469:bluetooth_rxtx.c **** 		*data_len = 5;
 2298              		.loc 1 469 0
 2299 027e 3B68     		ldr	r3, [r7]
 2300 0280 0522     		movs	r2, #5
 2301 0282 1A60     		str	r2, [r3]
 470:bluetooth_rxtx.c **** 		break;
 2302              		.loc 1 470 0
 2303 0284 00F01FBC 		b	.L105
 2304              	.L59:
 471:bluetooth_rxtx.c **** 
 472:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 473:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2305              		.loc 1 473 0
 2306 0288 474B     		ldr	r3, .L149
 2307 028a 0B22     		movs	r2, #11
 2308 028c 1A70     		strb	r2, [r3]
 474:bluetooth_rxtx.c **** 		break;
 2309              		.loc 1 474 0
 2310 028e 00F01ABC 		b	.L105
 2311              	.L60:
 475:bluetooth_rxtx.c **** 
 476:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 477:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2312              		.loc 1 477 0
 2313 0292 3A23     		movs	r3, #58
 2314 0294 7B62     		str	r3, [r7, #36]
 478:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2315              		.loc 1 478 0
 2316 0296 484B     		ldr	r3, .L149+16
 2317 0298 1B68     		ldr	r3, [r3]
 2318 029a 07F12401 		add	r1, r7, #36
 2319 029e 07F11002 		add	r2, r7, #16
 2320 02a2 0846     		mov	r0, r1
 2321 02a4 1146     		mov	r1, r2
 2322 02a6 9847     		blx	r3
 479:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2323              		.loc 1 479 0
 2324 02a8 3B69     		ldr	r3, [r7, #16]
 2325 02aa DAB2     		uxtb	r2, r3
 2326 02ac 7B68     		ldr	r3, [r7, #4]
 2327 02ae 1A70     		strb	r2, [r3]
 480:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2328              		.loc 1 480 0
 2329 02b0 7B68     		ldr	r3, [r7, #4]
 2330 02b2 0133     		adds	r3, r3, #1
 2331 02b4 7A69     		ldr	r2, [r7, #20]
 2332 02b6 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/ccxwuSCA.s 			page 49


 2333 02b8 1A70     		strb	r2, [r3]
 481:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2334              		.loc 1 481 0
 2335 02ba 7B68     		ldr	r3, [r7, #4]
 2336 02bc 0233     		adds	r3, r3, #2
 2337 02be 7A69     		ldr	r2, [r7, #20]
 2338 02c0 120A     		lsrs	r2, r2, #8
 2339 02c2 D2B2     		uxtb	r2, r2
 2340 02c4 1A70     		strb	r2, [r3]
 482:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2341              		.loc 1 482 0
 2342 02c6 7B68     		ldr	r3, [r7, #4]
 2343 02c8 0333     		adds	r3, r3, #3
 2344 02ca 7A69     		ldr	r2, [r7, #20]
 2345 02cc 120C     		lsrs	r2, r2, #16
 2346 02ce D2B2     		uxtb	r2, r2
 2347 02d0 1A70     		strb	r2, [r3]
 483:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2348              		.loc 1 483 0
 2349 02d2 7B68     		ldr	r3, [r7, #4]
 2350 02d4 0433     		adds	r3, r3, #4
 2351 02d6 7A69     		ldr	r2, [r7, #20]
 2352 02d8 120E     		lsrs	r2, r2, #24
 2353 02da D2B2     		uxtb	r2, r2
 2354 02dc 1A70     		strb	r2, [r3]
 484:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2355              		.loc 1 484 0
 2356 02de 7B68     		ldr	r3, [r7, #4]
 2357 02e0 0533     		adds	r3, r3, #5
 2358 02e2 BA69     		ldr	r2, [r7, #24]
 2359 02e4 D2B2     		uxtb	r2, r2
 2360 02e6 1A70     		strb	r2, [r3]
 485:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2361              		.loc 1 485 0
 2362 02e8 7B68     		ldr	r3, [r7, #4]
 2363 02ea 0633     		adds	r3, r3, #6
 2364 02ec BA69     		ldr	r2, [r7, #24]
 2365 02ee 120A     		lsrs	r2, r2, #8
 2366 02f0 D2B2     		uxtb	r2, r2
 2367 02f2 1A70     		strb	r2, [r3]
 486:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2368              		.loc 1 486 0
 2369 02f4 7B68     		ldr	r3, [r7, #4]
 2370 02f6 0733     		adds	r3, r3, #7
 2371 02f8 BA69     		ldr	r2, [r7, #24]
 2372 02fa 120C     		lsrs	r2, r2, #16
 2373 02fc D2B2     		uxtb	r2, r2
 2374 02fe 1A70     		strb	r2, [r3]
 487:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2375              		.loc 1 487 0
 2376 0300 7B68     		ldr	r3, [r7, #4]
 2377 0302 0833     		adds	r3, r3, #8
 2378 0304 BA69     		ldr	r2, [r7, #24]
 2379 0306 120E     		lsrs	r2, r2, #24
 2380 0308 D2B2     		uxtb	r2, r2
 2381 030a 1A70     		strb	r2, [r3]
 488:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
ARM GAS  /tmp/ccxwuSCA.s 			page 50


 2382              		.loc 1 488 0
 2383 030c 7B68     		ldr	r3, [r7, #4]
 2384 030e 0933     		adds	r3, r3, #9
 2385 0310 FA69     		ldr	r2, [r7, #28]
 2386 0312 D2B2     		uxtb	r2, r2
 2387 0314 1A70     		strb	r2, [r3]
 489:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2388              		.loc 1 489 0
 2389 0316 7B68     		ldr	r3, [r7, #4]
 2390 0318 0A33     		adds	r3, r3, #10
 2391 031a FA69     		ldr	r2, [r7, #28]
 2392 031c 120A     		lsrs	r2, r2, #8
 2393 031e D2B2     		uxtb	r2, r2
 2394 0320 1A70     		strb	r2, [r3]
 490:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2395              		.loc 1 490 0
 2396 0322 7B68     		ldr	r3, [r7, #4]
 2397 0324 0B33     		adds	r3, r3, #11
 2398 0326 FA69     		ldr	r2, [r7, #28]
 2399 0328 120C     		lsrs	r2, r2, #16
 2400 032a D2B2     		uxtb	r2, r2
 2401 032c 1A70     		strb	r2, [r3]
 491:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2402              		.loc 1 491 0
 2403 032e 7B68     		ldr	r3, [r7, #4]
 2404 0330 0C33     		adds	r3, r3, #12
 2405 0332 FA69     		ldr	r2, [r7, #28]
 2406 0334 120E     		lsrs	r2, r2, #24
 2407 0336 D2B2     		uxtb	r2, r2
 2408 0338 1A70     		strb	r2, [r3]
 492:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2409              		.loc 1 492 0
 2410 033a 7B68     		ldr	r3, [r7, #4]
 2411 033c 0D33     		adds	r3, r3, #13
 2412 033e 3A6A     		ldr	r2, [r7, #32]
 2413 0340 D2B2     		uxtb	r2, r2
 2414 0342 1A70     		strb	r2, [r3]
 493:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2415              		.loc 1 493 0
 2416 0344 7B68     		ldr	r3, [r7, #4]
 2417 0346 0E33     		adds	r3, r3, #14
 2418 0348 3A6A     		ldr	r2, [r7, #32]
 2419 034a 120A     		lsrs	r2, r2, #8
 2420 034c D2B2     		uxtb	r2, r2
 2421 034e 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2422              		.loc 1 494 0
 2423 0350 7B68     		ldr	r3, [r7, #4]
 2424 0352 0F33     		adds	r3, r3, #15
 2425 0354 3A6A     		ldr	r2, [r7, #32]
 2426 0356 120C     		lsrs	r2, r2, #16
 2427 0358 D2B2     		uxtb	r2, r2
 2428 035a 1A70     		strb	r2, [r3]
 495:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2429              		.loc 1 495 0
 2430 035c 7B68     		ldr	r3, [r7, #4]
 2431 035e 1033     		adds	r3, r3, #16
ARM GAS  /tmp/ccxwuSCA.s 			page 51


 2432 0360 3A6A     		ldr	r2, [r7, #32]
 2433 0362 120E     		lsrs	r2, r2, #24
 2434 0364 D2B2     		uxtb	r2, r2
 2435 0366 1A70     		strb	r2, [r3]
 496:bluetooth_rxtx.c **** 		*data_len = 17;
 2436              		.loc 1 496 0
 2437 0368 3B68     		ldr	r3, [r7]
 2438 036a 1122     		movs	r2, #17
 2439 036c 1A60     		str	r2, [r3]
 497:bluetooth_rxtx.c **** 		break;
 2440              		.loc 1 497 0
 2441 036e AAE3     		b	.L105
 2442              	.L62:
 498:bluetooth_rxtx.c **** 
 499:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 500:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 501:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2443              		.loc 1 501 0
 2444 0370 124B     		ldr	r3, .L149+20
 2445 0372 1B68     		ldr	r3, [r3]
 2446 0374 03F08003 		and	r3, r3, #128
 2447 0378 002B     		cmp	r3, #0
 2448 037a 14BF     		ite	ne
 2449 037c 0123     		movne	r3, #1
 2450 037e 0023     		moveq	r3, #0
 2451 0380 DBB2     		uxtb	r3, r3
 2452 0382 1A46     		mov	r2, r3
 2453 0384 7B68     		ldr	r3, [r7, #4]
 2454 0386 1A70     		strb	r2, [r3]
 502:bluetooth_rxtx.c **** 		*data_len = 1;
 2455              		.loc 1 502 0
 2456 0388 3B68     		ldr	r3, [r7]
 2457 038a 0122     		movs	r2, #1
 2458 038c 1A60     		str	r2, [r3]
 503:bluetooth_rxtx.c **** 		break;
 2459              		.loc 1 503 0
 2460 038e 9AE3     		b	.L105
 2461              	.L63:
 504:bluetooth_rxtx.c **** 
 505:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 506:bluetooth_rxtx.c **** 		if (request_params[0])
 2462              		.loc 1 506 0
 2463 0390 BB68     		ldr	r3, [r7, #8]
 2464 0392 1B88     		ldrh	r3, [r3]
 2465 0394 002B     		cmp	r3, #0
 2466 0396 03D0     		beq	.L114
 507:bluetooth_rxtx.c **** 			PAEN_SET;
 2467              		.loc 1 507 0
 2468 0398 094B     		ldr	r3, .L149+24
 2469 039a 8022     		movs	r2, #128
 2470 039c 1A60     		str	r2, [r3]
 508:bluetooth_rxtx.c **** 		else
 509:bluetooth_rxtx.c **** 			PAEN_CLR;
 510:bluetooth_rxtx.c **** 		break;
 2471              		.loc 1 510 0
 2472 039e 92E3     		b	.L105
 2473              	.L114:
ARM GAS  /tmp/ccxwuSCA.s 			page 52


 509:bluetooth_rxtx.c **** 		break;
 2474              		.loc 1 509 0
 2475 03a0 084B     		ldr	r3, .L149+28
 2476 03a2 8022     		movs	r2, #128
 2477 03a4 1A60     		str	r2, [r3]
 2478              		.loc 1 510 0
 2479 03a6 8EE3     		b	.L105
 2480              	.L150:
 2481              		.align	2
 2482              	.L149:
 2483 03a8 00000000 		.word	requested_mode
 2484 03ac 34C00920 		.word	537509940
 2485 03b0 38C00920 		.word	537509944
 2486 03b4 3CC00920 		.word	537509948
 2487 03b8 00000000 		.word	iap_entry
 2488 03bc 54C00920 		.word	537509972
 2489 03c0 58C00920 		.word	537509976
 2490 03c4 5CC00920 		.word	537509980
 2491              	.L64:
 511:bluetooth_rxtx.c **** 
 512:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 513:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2492              		.loc 1 513 0
 2493 03c8 924B     		ldr	r3, .L151
 2494 03ca 1B68     		ldr	r3, [r3]
 2495 03cc 03F48073 		and	r3, r3, #256
 2496 03d0 002B     		cmp	r3, #0
 2497 03d2 14BF     		ite	ne
 2498 03d4 0123     		movne	r3, #1
 2499 03d6 0023     		moveq	r3, #0
 2500 03d8 DBB2     		uxtb	r3, r3
 2501 03da 1A46     		mov	r2, r3
 2502 03dc 7B68     		ldr	r3, [r7, #4]
 2503 03de 1A70     		strb	r2, [r3]
 514:bluetooth_rxtx.c **** 		*data_len = 1;
 2504              		.loc 1 514 0
 2505 03e0 3B68     		ldr	r3, [r7]
 2506 03e2 0122     		movs	r2, #1
 2507 03e4 1A60     		str	r2, [r3]
 515:bluetooth_rxtx.c **** 		break;
 2508              		.loc 1 515 0
 2509 03e6 6EE3     		b	.L105
 2510              	.L65:
 516:bluetooth_rxtx.c **** 
 517:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 518:bluetooth_rxtx.c **** 		if (request_params[0])
 2511              		.loc 1 518 0
 2512 03e8 BB68     		ldr	r3, [r7, #8]
 2513 03ea 1B88     		ldrh	r3, [r3]
 2514 03ec 002B     		cmp	r3, #0
 2515 03ee 04D0     		beq	.L116
 519:bluetooth_rxtx.c **** 			HGM_SET;
 2516              		.loc 1 519 0
 2517 03f0 894B     		ldr	r3, .L151+4
 2518 03f2 4FF48072 		mov	r2, #256
 2519 03f6 1A60     		str	r2, [r3]
 520:bluetooth_rxtx.c **** 		else
ARM GAS  /tmp/ccxwuSCA.s 			page 53


 521:bluetooth_rxtx.c **** 			HGM_CLR;
 522:bluetooth_rxtx.c **** 		break;
 2520              		.loc 1 522 0
 2521 03f8 65E3     		b	.L105
 2522              	.L116:
 521:bluetooth_rxtx.c **** 		break;
 2523              		.loc 1 521 0
 2524 03fa 884B     		ldr	r3, .L151+8
 2525 03fc 4FF48072 		mov	r2, #256
 2526 0400 1A60     		str	r2, [r3]
 2527              		.loc 1 522 0
 2528 0402 60E3     		b	.L105
 2529              	.L66:
 523:bluetooth_rxtx.c **** #endif
 524:bluetooth_rxtx.c **** 
 525:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 526:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 527:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2530              		.loc 1 527 0
 2531 0404 864B     		ldr	r3, .L151+12
 2532 0406 0322     		movs	r2, #3
 2533 0408 1A70     		strb	r2, [r3]
 528:bluetooth_rxtx.c **** 		break;
 2534              		.loc 1 528 0
 2535 040a 5CE3     		b	.L105
 2536              	.L73:
 529:bluetooth_rxtx.c **** 
 530:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 531:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2537              		.loc 1 531 0
 2538 040c 0520     		movs	r0, #5
 2539 040e FFF7FEFF 		bl	cc2400_get
 2540 0412 0346     		mov	r3, r0
 2541 0414 DBB2     		uxtb	r3, r3
 2542 0416 03F00703 		and	r3, r3, #7
 2543 041a DAB2     		uxtb	r2, r3
 2544 041c 7B68     		ldr	r3, [r7, #4]
 2545 041e 1A70     		strb	r2, [r3]
 532:bluetooth_rxtx.c **** 		*data_len = 1;
 2546              		.loc 1 532 0
 2547 0420 3B68     		ldr	r3, [r7]
 2548 0422 0122     		movs	r2, #1
 2549 0424 1A60     		str	r2, [r3]
 533:bluetooth_rxtx.c **** 		break;
 2550              		.loc 1 533 0
 2551 0426 4EE3     		b	.L105
 2552              	.L74:
 534:bluetooth_rxtx.c **** 
 535:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 536:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2553              		.loc 1 536 0
 2554 0428 BB68     		ldr	r3, [r7, #8]
 2555 042a 1B88     		ldrh	r3, [r3]
 2556 042c 072B     		cmp	r3, #7
 2557 042e 09D8     		bhi	.L118
 537:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2558              		.loc 1 537 0
ARM GAS  /tmp/ccxwuSCA.s 			page 54


 2559 0430 BB68     		ldr	r3, [r7, #8]
 2560 0432 1B88     		ldrh	r3, [r3]
 2561 0434 43F00803 		orr	r3, r3, #8
 2562 0438 9BB2     		uxth	r3, r3
 2563 043a 0520     		movs	r0, #5
 2564 043c 1946     		mov	r1, r3
 2565 043e FFF7FEFF 		bl	cc2400_set
 538:bluetooth_rxtx.c **** 		} else {
 539:bluetooth_rxtx.c **** 			return 0;
 540:bluetooth_rxtx.c **** 		}
 541:bluetooth_rxtx.c **** 		break;
 2566              		.loc 1 541 0
 2567 0442 40E3     		b	.L105
 2568              	.L118:
 539:bluetooth_rxtx.c **** 		}
 2569              		.loc 1 539 0
 2570 0444 0023     		movs	r3, #0
 2571 0446 3FE3     		b	.L147
 2572              	.L76:
 542:bluetooth_rxtx.c **** 
 543:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 544:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2573              		.loc 1 544 0
 2574 0448 754B     		ldr	r3, .L151+12
 2575 044a 0522     		movs	r2, #5
 2576 044c 1A70     		strb	r2, [r3]
 545:bluetooth_rxtx.c **** 		break;
 2577              		.loc 1 545 0
 2578 044e 3AE3     		b	.L105
 2579              	.L75:
 546:bluetooth_rxtx.c **** 
 547:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 548:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2580              		.loc 1 548 0
 2581 0450 734B     		ldr	r3, .L151+12
 2582 0452 0622     		movs	r2, #6
 2583 0454 1A70     		strb	r2, [r3]
 549:bluetooth_rxtx.c **** 		break;
 2584              		.loc 1 549 0
 2585 0456 36E3     		b	.L105
 2586              	.L77:
 550:bluetooth_rxtx.c **** #endif
 551:bluetooth_rxtx.c **** 
 552:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 553:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2587              		.loc 1 553 0
 2588 0458 724B     		ldr	r3, .L151+16
 2589 045a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2590 045c 7B68     		ldr	r3, [r7, #4]
 2591 045e 1A70     		strb	r2, [r3]
 554:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2592              		.loc 1 554 0
 2593 0460 7B68     		ldr	r3, [r7, #4]
 2594 0462 0133     		adds	r3, r3, #1
 2595 0464 6F4A     		ldr	r2, .L151+16
 2596 0466 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2597 0468 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 55


 555:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2598              		.loc 1 555 0
 2599 046a 7B68     		ldr	r3, [r7, #4]
 2600 046c 0233     		adds	r3, r3, #2
 2601 046e 6D4A     		ldr	r2, .L151+16
 2602 0470 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2603 0472 1A70     		strb	r2, [r3]
 556:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2604              		.loc 1 556 0
 2605 0474 7B68     		ldr	r3, [r7, #4]
 2606 0476 0333     		adds	r3, r3, #3
 2607 0478 6A4A     		ldr	r2, .L151+16
 2608 047a D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2609 047c 1A70     		strb	r2, [r3]
 557:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2610              		.loc 1 557 0
 2611 047e 7B68     		ldr	r3, [r7, #4]
 2612 0480 0433     		adds	r3, r3, #4
 2613 0482 684A     		ldr	r2, .L151+16
 2614 0484 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2615 0486 1A70     		strb	r2, [r3]
 558:bluetooth_rxtx.c **** 		*data_len = 5;
 2616              		.loc 1 558 0
 2617 0488 3B68     		ldr	r3, [r7]
 2618 048a 0522     		movs	r2, #5
 2619 048c 1A60     		str	r2, [r3]
 559:bluetooth_rxtx.c **** 		break;
 2620              		.loc 1 559 0
 2621 048e 1AE3     		b	.L105
 2622              	.L67:
 560:bluetooth_rxtx.c **** 
 561:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 562:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2623              		.loc 1 562 0
 2624 0490 634B     		ldr	r3, .L151+12
 2625 0492 0022     		movs	r2, #0
 2626 0494 1A70     		strb	r2, [r3]
 563:bluetooth_rxtx.c **** 		break;
 2627              		.loc 1 563 0
 2628 0496 16E3     		b	.L105
 2629              	.L68:
 564:bluetooth_rxtx.c **** 
 565:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 566:bluetooth_rxtx.c **** 		data[0] = modulation;
 2630              		.loc 1 566 0
 2631 0498 634B     		ldr	r3, .L151+20
 2632 049a 1B78     		ldrb	r3, [r3]
 2633 049c DAB2     		uxtb	r2, r3
 2634 049e 7B68     		ldr	r3, [r7, #4]
 2635 04a0 1A70     		strb	r2, [r3]
 567:bluetooth_rxtx.c **** 		*data_len = 1;
 2636              		.loc 1 567 0
 2637 04a2 3B68     		ldr	r3, [r7]
 2638 04a4 0122     		movs	r2, #1
 2639 04a6 1A60     		str	r2, [r3]
 568:bluetooth_rxtx.c **** 		break;
 2640              		.loc 1 568 0
ARM GAS  /tmp/ccxwuSCA.s 			page 56


 2641 04a8 0DE3     		b	.L105
 2642              	.L69:
 569:bluetooth_rxtx.c **** 
 570:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 571:bluetooth_rxtx.c **** 		modulation = request_params[0];
 2643              		.loc 1 571 0
 2644 04aa BB68     		ldr	r3, [r7, #8]
 2645 04ac 1B88     		ldrh	r3, [r3]
 2646 04ae DAB2     		uxtb	r2, r3
 2647 04b0 5D4B     		ldr	r3, .L151+20
 2648 04b2 1A70     		strb	r2, [r3]
 572:bluetooth_rxtx.c **** 		break;
 2649              		.loc 1 572 0
 2650 04b4 07E3     		b	.L105
 2651              	.L57:
 573:bluetooth_rxtx.c **** 
 574:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 575:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 2652              		.loc 1 575 0
 2653 04b6 5D4B     		ldr	r3, .L151+24
 2654 04b8 1B88     		ldrh	r3, [r3]	@ movhi
 2655 04ba 9BB2     		uxth	r3, r3
 2656 04bc DAB2     		uxtb	r2, r3
 2657 04be 7B68     		ldr	r3, [r7, #4]
 2658 04c0 1A70     		strb	r2, [r3]
 576:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 2659              		.loc 1 576 0
 2660 04c2 7B68     		ldr	r3, [r7, #4]
 2661 04c4 0133     		adds	r3, r3, #1
 2662 04c6 594A     		ldr	r2, .L151+24
 2663 04c8 1288     		ldrh	r2, [r2]	@ movhi
 2664 04ca 92B2     		uxth	r2, r2
 2665 04cc 120A     		lsrs	r2, r2, #8
 2666 04ce 92B2     		uxth	r2, r2
 2667 04d0 D2B2     		uxtb	r2, r2
 2668 04d2 1A70     		strb	r2, [r3]
 577:bluetooth_rxtx.c **** 		*data_len = 2;
 2669              		.loc 1 577 0
 2670 04d4 3B68     		ldr	r3, [r7]
 2671 04d6 0222     		movs	r2, #2
 2672 04d8 1A60     		str	r2, [r3]
 578:bluetooth_rxtx.c **** 		break;
 2673              		.loc 1 578 0
 2674 04da F4E2     		b	.L105
 2675              	.L58:
 579:bluetooth_rxtx.c **** 
 580:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 581:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2676              		.loc 1 581 0
 2677 04dc BB68     		ldr	r3, [r7, #8]
 2678 04de 1A88     		ldrh	r2, [r3]
 2679 04e0 534B     		ldr	r3, .L151+28
 2680 04e2 1A80     		strh	r2, [r3]	@ movhi
 582:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 583:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 2681              		.loc 1 583 0
 2682 04e4 524B     		ldr	r3, .L151+28
ARM GAS  /tmp/ccxwuSCA.s 			page 57


 2683 04e6 1B88     		ldrh	r3, [r3]	@ movhi
 2684 04e8 9BB2     		uxth	r3, r3
 2685 04ea 40F6EA22 		movw	r2, #2794
 2686 04ee 9342     		cmp	r3, r2
 2687 04f0 07D9     		bls	.L121
 584:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 2688              		.loc 1 584 0
 2689 04f2 504B     		ldr	r3, .L151+32
 2690 04f4 0122     		movs	r2, #1
 2691 04f6 1A70     		strb	r2, [r3]
 585:bluetooth_rxtx.c **** 			requested_channel = 2402;
 2692              		.loc 1 585 0
 2693 04f8 4D4B     		ldr	r3, .L151+28
 2694 04fa 40F66212 		movw	r2, #2402
 2695 04fe 1A80     		strh	r2, [r3]	@ movhi
 2696 0500 20E0     		b	.L122
 2697              	.L121:
 586:bluetooth_rxtx.c **** 		}
 587:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 588:bluetooth_rxtx.c **** 		else {
 589:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 2698              		.loc 1 589 0
 2699 0502 4C4B     		ldr	r3, .L151+32
 2700 0504 0022     		movs	r2, #0
 2701 0506 1A70     		strb	r2, [r3]
 590:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 2702              		.loc 1 590 0
 2703 0508 494B     		ldr	r3, .L151+28
 2704 050a 1B88     		ldrh	r3, [r3]	@ movhi
 2705 050c 9BB2     		uxth	r3, r3
 2706 050e 40F6DC02 		movw	r2, #2268
 2707 0512 9342     		cmp	r3, r2
 2708 0514 03D9     		bls	.L123
 2709              		.loc 1 590 0 is_stmt 0 discriminator 1
 2710 0516 464B     		ldr	r3, .L151+28
 2711 0518 1B88     		ldrh	r3, [r3]	@ movhi
 2712 051a 9BB2     		uxth	r3, r3
 2713 051c 01E0     		b	.L124
 2714              	.L123:
 2715              		.loc 1 590 0 discriminator 2
 2716 051e 40F6DC03 		movw	r3, #2268
 2717              	.L124:
 2718              		.loc 1 590 0 discriminator 4
 2719 0522 434A     		ldr	r2, .L151+28
 2720 0524 1380     		strh	r3, [r2]	@ movhi
 591:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 2721              		.loc 1 591 0 is_stmt 1 discriminator 4
 2722 0526 424B     		ldr	r3, .L151+28
 2723 0528 1B88     		ldrh	r3, [r3]	@ movhi
 2724 052a 9BB2     		uxth	r3, r3
 2725 052c 40F6E922 		movw	r2, #2793
 2726 0530 9342     		cmp	r3, r2
 2727 0532 03D8     		bhi	.L125
 2728              		.loc 1 591 0 is_stmt 0 discriminator 1
 2729 0534 3E4B     		ldr	r3, .L151+28
 2730 0536 1B88     		ldrh	r3, [r3]	@ movhi
 2731 0538 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 58


 2732 053a 01E0     		b	.L126
 2733              	.L125:
 2734              		.loc 1 591 0 discriminator 2
 2735 053c 40F6EA23 		movw	r3, #2794
 2736              	.L126:
 2737              		.loc 1 591 0 discriminator 4
 2738 0540 3B4A     		ldr	r2, .L151+28
 2739 0542 1380     		strh	r3, [r2]	@ movhi
 2740              	.L122:
 592:bluetooth_rxtx.c **** 		}
 593:bluetooth_rxtx.c **** 
 594:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 2741              		.loc 1 594 0 is_stmt 1
 2742 0544 3C4B     		ldr	r3, .L151+36
 2743 0546 1B78     		ldrb	r3, [r3]
 2744 0548 DBB2     		uxtb	r3, r3
 2745 054a 092B     		cmp	r3, #9
 2746 054c 0AD0     		beq	.L127
 595:bluetooth_rxtx.c **** 			channel = requested_channel;
 2747              		.loc 1 595 0
 2748 054e 384B     		ldr	r3, .L151+28
 2749 0550 1B88     		ldrh	r3, [r3]	@ movhi
 2750 0552 9AB2     		uxth	r2, r3
 2751 0554 354B     		ldr	r3, .L151+24
 2752 0556 1A80     		strh	r2, [r3]	@ movhi
 596:bluetooth_rxtx.c **** 			requested_channel = 0;
 2753              		.loc 1 596 0
 2754 0558 354B     		ldr	r3, .L151+28
 2755 055a 0022     		movs	r2, #0
 2756 055c 1A80     		strh	r2, [r3]	@ movhi
 597:bluetooth_rxtx.c **** 
 598:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 599:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 600:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 2757              		.loc 1 600 0
 2758 055e FFF7FEFF 		bl	cs_threshold_calc_and_set
 601:bluetooth_rxtx.c **** 		}
 602:bluetooth_rxtx.c **** 		break;
 2759              		.loc 1 602 0
 2760 0562 B0E2     		b	.L105
 2761              	.L127:
 2762 0564 AFE2     		b	.L105
 2763              	.L70:
 603:bluetooth_rxtx.c **** 
 604:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 605:bluetooth_rxtx.c **** 		command[0] = 57;
 2764              		.loc 1 605 0
 2765 0566 3923     		movs	r3, #57
 2766 0568 7B62     		str	r3, [r7, #36]
 606:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2767              		.loc 1 606 0
 2768 056a 344B     		ldr	r3, .L151+40
 2769 056c 1B68     		ldr	r3, [r3]
 2770 056e 07F12401 		add	r1, r7, #36
 2771 0572 07F11002 		add	r2, r7, #16
 2772 0576 0846     		mov	r0, r1
 2773 0578 1146     		mov	r1, r2
ARM GAS  /tmp/ccxwuSCA.s 			page 59


 2774 057a 9847     		blx	r3
 607:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 2775              		.loc 1 607 0
 2776 057c 3B68     		ldr	r3, [r7]
 2777 057e 0022     		movs	r2, #0
 2778 0580 1A60     		str	r2, [r3]
 608:bluetooth_rxtx.c **** 		break;
 2779              		.loc 1 608 0
 2780 0582 A0E2     		b	.L105
 2781              	.L71:
 609:bluetooth_rxtx.c **** 
 610:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 611:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 2782              		.loc 1 611 0
 2783 0584 2E4B     		ldr	r3, .L151+44
 2784 0586 2F4A     		ldr	r2, .L151+48
 2785 0588 1A60     		str	r2, [r3]
 612:bluetooth_rxtx.c **** 		reset();
 2786              		.loc 1 612 0
 2787 058a FFF7FEFF 		bl	reset
 613:bluetooth_rxtx.c **** 		break;
 2788              		.loc 1 613 0
 2789 058e 9AE2     		b	.L105
 2790              	.L72:
 614:bluetooth_rxtx.c **** 
 615:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 616:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 2791              		.loc 1 616 0
 2792 0590 BB68     		ldr	r3, [r7, #8]
 2793 0592 1B88     		ldrh	r3, [r3]
 2794 0594 B3F5006F 		cmp	r3, #2048
 2795 0598 17D9     		bls	.L128
 2796              		.loc 1 616 0 is_stmt 0 discriminator 1
 2797 059a BB68     		ldr	r3, [r7, #8]
 2798 059c 1B88     		ldrh	r3, [r3]
 2799 059e B3F5406F 		cmp	r3, #3072
 2800 05a2 12D8     		bhi	.L128
 617:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2801              		.loc 1 617 0 is_stmt 1 discriminator 2
 2802 05a4 BB68     		ldr	r3, [r7, #8]
 2803 05a6 0233     		adds	r3, r3, #2
 2804 05a8 1B88     		ldrh	r3, [r3]
 616:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2805              		.loc 1 616 0 discriminator 2
 2806 05aa B3F5006F 		cmp	r3, #2048
 2807 05ae 0CD9     		bls	.L128
 2808              		.loc 1 617 0
 2809 05b0 BB68     		ldr	r3, [r7, #8]
 2810 05b2 0233     		adds	r3, r3, #2
 2811 05b4 1B88     		ldrh	r3, [r3]
 2812 05b6 B3F5406F 		cmp	r3, #3072
 2813 05ba 06D8     		bhi	.L128
 618:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 2814              		.loc 1 618 0 discriminator 1
 2815 05bc BB68     		ldr	r3, [r7, #8]
 2816 05be 0233     		adds	r3, r3, #2
 2817 05c0 1A88     		ldrh	r2, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 60


 2818 05c2 BB68     		ldr	r3, [r7, #8]
 2819 05c4 1B88     		ldrh	r3, [r3]
 617:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2820              		.loc 1 617 0 discriminator 1
 2821 05c6 9A42     		cmp	r2, r3
 2822 05c8 01D2     		bcs	.L129
 2823              	.L128:
 619:bluetooth_rxtx.c **** 			return 0;
 2824              		.loc 1 619 0
 2825 05ca 0023     		movs	r3, #0
 2826 05cc 7CE2     		b	.L147
 2827              	.L129:
 620:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 2828              		.loc 1 620 0
 2829 05ce BB68     		ldr	r3, [r7, #8]
 2830 05d0 1A88     		ldrh	r2, [r3]
 2831 05d2 1D4B     		ldr	r3, .L151+52
 2832 05d4 1A80     		strh	r2, [r3]	@ movhi
 621:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2833              		.loc 1 621 0
 2834 05d6 BB68     		ldr	r3, [r7, #8]
 2835 05d8 5A88     		ldrh	r2, [r3, #2]
 2836 05da 1C4B     		ldr	r3, .L151+56
 2837 05dc 1A80     		strh	r2, [r3]	@ movhi
 622:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2838              		.loc 1 622 0
 2839 05de 104B     		ldr	r3, .L151+12
 2840 05e0 0422     		movs	r2, #4
 2841 05e2 1A70     		strb	r2, [r3]
 623:bluetooth_rxtx.c **** 		*data_len = 0;
 2842              		.loc 1 623 0
 2843 05e4 3B68     		ldr	r3, [r7]
 2844 05e6 0022     		movs	r2, #0
 2845 05e8 1A60     		str	r2, [r3]
 624:bluetooth_rxtx.c **** 		break;
 2846              		.loc 1 624 0
 2847 05ea 6CE2     		b	.L105
 2848              	.L79:
 625:bluetooth_rxtx.c **** 
 626:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 627:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 2849              		.loc 1 627 0
 2850 05ec BB68     		ldr	r3, [r7, #8]
 2851 05ee 1B88     		ldrh	r3, [r3]
 2852 05f0 B3F5807F 		cmp	r3, #256
 2853 05f4 01D9     		bls	.L130
 628:bluetooth_rxtx.c **** 			return 0;
 2854              		.loc 1 628 0
 2855 05f6 0023     		movs	r3, #0
 2856 05f8 66E2     		b	.L147
 2857              	.L130:
 629:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 2858              		.loc 1 629 0
 2859 05fa BB68     		ldr	r3, [r7, #8]
 2860 05fc 1B88     		ldrh	r3, [r3]
 2861 05fe DAB2     		uxtb	r2, r3
 2862 0600 134B     		ldr	r3, .L151+60
ARM GAS  /tmp/ccxwuSCA.s 			page 61


 2863 0602 1A70     		strb	r2, [r3]
 630:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2864              		.loc 1 630 0
 2865 0604 064B     		ldr	r3, .L151+12
 2866 0606 0722     		movs	r2, #7
 2867 0608 1A70     		strb	r2, [r3]
 631:bluetooth_rxtx.c **** 		*data_len = 0;
 2868              		.loc 1 631 0
 2869 060a 3B68     		ldr	r3, [r7]
 2870 060c 0022     		movs	r2, #0
 2871 060e 1A60     		str	r2, [r3]
 632:bluetooth_rxtx.c **** 		break;
 2872              		.loc 1 632 0
 2873 0610 59E2     		b	.L105
 2874              	.L152:
 2875 0612 00BF     		.align	2
 2876              	.L151:
 2877 0614 54C00920 		.word	537509972
 2878 0618 58C00920 		.word	537509976
 2879 061c 5CC00920 		.word	537509980
 2880 0620 00000000 		.word	requested_mode
 2881 0624 00000000 		.word	rr
 2882 0628 00000000 		.word	modulation
 2883 062c 00000000 		.word	channel
 2884 0630 00000000 		.word	requested_channel
 2885 0634 00000000 		.word	hop_mode
 2886 0638 00000000 		.word	mode
 2887 063c 00000000 		.word	iap_entry
 2888 0640 00000000 		.word	bootloader_ctrl
 2889 0644 21BB0543 		.word	1124449057
 2890 0648 00000000 		.word	low_freq
 2891 064c 00000000 		.word	high_freq
 2892 0650 00000000 		.word	rssi_threshold
 2893              	.L78:
 633:bluetooth_rxtx.c **** 
 634:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 635:bluetooth_rxtx.c **** 		data[0] = 0x00;
 2894              		.loc 1 635 0
 2895 0654 7B68     		ldr	r3, [r7, #4]
 2896 0656 0022     		movs	r2, #0
 2897 0658 1A70     		strb	r2, [r3]
 636:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2898              		.loc 1 636 0
 2899 065a 7B68     		ldr	r3, [r7, #4]
 2900 065c 0133     		adds	r3, r3, #1
 2901 065e 0022     		movs	r2, #0
 2902 0660 1A70     		strb	r2, [r3]
 637:bluetooth_rxtx.c **** 
 638:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 2903              		.loc 1 638 0
 2904 0662 A448     		ldr	r0, .L153
 2905 0664 FFF7FEFF 		bl	strlen
 2906 0668 0346     		mov	r3, r0
 2907 066a 87F84330 		strb	r3, [r7, #67]
 639:bluetooth_rxtx.c **** 		data[2] = length;
 2908              		.loc 1 639 0
 2909 066e 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccxwuSCA.s 			page 62


 2910 0670 0233     		adds	r3, r3, #2
 2911 0672 97F84320 		ldrb	r2, [r7, #67]
 2912 0676 1A70     		strb	r2, [r3]
 640:bluetooth_rxtx.c **** 
 641:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 2913              		.loc 1 641 0
 2914 0678 7B68     		ldr	r3, [r7, #4]
 2915 067a DA1C     		adds	r2, r3, #3
 2916 067c 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2917 0680 1046     		mov	r0, r2
 2918 0682 9C49     		ldr	r1, .L153
 2919 0684 1A46     		mov	r2, r3
 2920 0686 FFF7FEFF 		bl	memcpy
 642:bluetooth_rxtx.c **** 
 643:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 2921              		.loc 1 643 0
 2922 068a 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2923 068e DA1C     		adds	r2, r3, #3
 2924 0690 3B68     		ldr	r3, [r7]
 2925 0692 1A60     		str	r2, [r3]
 644:bluetooth_rxtx.c **** 		break;
 2926              		.loc 1 644 0
 2927 0694 17E2     		b	.L105
 2928              	.L100:
 645:bluetooth_rxtx.c **** 
 646:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 647:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 2929              		.loc 1 647 0
 2930 0696 9848     		ldr	r0, .L153+4
 2931 0698 FFF7FEFF 		bl	strlen
 2932 069c 0346     		mov	r3, r0
 2933 069e 87F84330 		strb	r3, [r7, #67]
 648:bluetooth_rxtx.c **** 		data[0] = length;
 2934              		.loc 1 648 0
 2935 06a2 7B68     		ldr	r3, [r7, #4]
 2936 06a4 97F84320 		ldrb	r2, [r7, #67]
 2937 06a8 1A70     		strb	r2, [r3]
 649:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 2938              		.loc 1 649 0
 2939 06aa 7B68     		ldr	r3, [r7, #4]
 2940 06ac 5A1C     		adds	r2, r3, #1
 2941 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2942 06b2 1046     		mov	r0, r2
 2943 06b4 9049     		ldr	r1, .L153+4
 2944 06b6 1A46     		mov	r2, r3
 2945 06b8 FFF7FEFF 		bl	memcpy
 650:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 2946              		.loc 1 650 0
 2947 06bc 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2948 06c0 5A1C     		adds	r2, r3, #1
 2949 06c2 3B68     		ldr	r3, [r7]
 2950 06c4 1A60     		str	r2, [r3]
 651:bluetooth_rxtx.c **** 		break;
 2951              		.loc 1 651 0
 2952 06c6 FEE1     		b	.L105
 2953              	.L80:
 652:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccxwuSCA.s 			page 63


 653:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 654:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 2954              		.loc 1 654 0
 2955 06c8 7B68     		ldr	r3, [r7, #4]
 2956 06ca 0122     		movs	r2, #1
 2957 06cc 1A70     		strb	r2, [r3]
 655:bluetooth_rxtx.c **** 		*data_len = 1;
 2958              		.loc 1 655 0
 2959 06ce 3B68     		ldr	r3, [r7]
 2960 06d0 0122     		movs	r2, #1
 2961 06d2 1A60     		str	r2, [r3]
 656:bluetooth_rxtx.c **** 		break;
 2962              		.loc 1 656 0
 2963 06d4 F7E1     		b	.L105
 2964              	.L81:
 657:bluetooth_rxtx.c **** 
 658:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 659:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 2965              		.loc 1 659 0
 2966 06d6 BB68     		ldr	r3, [r7, #8]
 2967 06d8 1B88     		ldrh	r3, [r3]
 2968 06da DAB2     		uxtb	r2, r3
 2969 06dc 874B     		ldr	r3, .L153+8
 2970 06de 1A70     		strb	r2, [r3]
 660:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 2971              		.loc 1 660 0
 2972 06e0 FFF7FEFF 		bl	cs_threshold_calc_and_set
 661:bluetooth_rxtx.c **** 		break;
 2973              		.loc 1 661 0
 2974 06e4 EFE1     		b	.L105
 2975              	.L82:
 662:bluetooth_rxtx.c **** 
 663:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 664:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 2976              		.loc 1 664 0
 2977 06e6 854B     		ldr	r3, .L153+8
 2978 06e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2979 06ea DAB2     		uxtb	r2, r3
 2980 06ec 7B68     		ldr	r3, [r7, #4]
 2981 06ee 1A70     		strb	r2, [r3]
 665:bluetooth_rxtx.c **** 		*data_len = 1;
 2982              		.loc 1 665 0
 2983 06f0 3B68     		ldr	r3, [r7]
 2984 06f2 0122     		movs	r2, #1
 2985 06f4 1A60     		str	r2, [r3]
 666:bluetooth_rxtx.c **** 		break;
 2986              		.loc 1 666 0
 2987 06f6 E6E1     		b	.L105
 2988              	.L83:
 667:bluetooth_rxtx.c **** 
 668:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 669:bluetooth_rxtx.c **** 		target.address = 0;
 2989              		.loc 1 669 0
 2990 06f8 8149     		ldr	r1, .L153+12
 2991 06fa 4FF00002 		mov	r2, #0
 2992 06fe 4FF00003 		mov	r3, #0
 2993 0702 C1E90023 		strd	r2, [r1]
ARM GAS  /tmp/ccxwuSCA.s 			page 64


 670:bluetooth_rxtx.c **** 		target.access_code = 0;
 2994              		.loc 1 670 0
 2995 0706 7E49     		ldr	r1, .L153+12
 2996 0708 4FF00002 		mov	r2, #0
 2997 070c 4FF00003 		mov	r3, #0
 2998 0710 C1E90223 		strd	r2, [r1, #8]
 671:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 2999              		.loc 1 671 0
 3000 0714 0023     		movs	r3, #0
 3001 0716 FB64     		str	r3, [r7, #76]
 3002 0718 25E0     		b	.L131
 3003              	.L132:
 672:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3004              		.loc 1 672 0 discriminator 3
 3005 071a 794B     		ldr	r3, .L153+12
 3006 071c D3E900AB 		ldrd	r10, [r3]
 3007 0720 FB6C     		ldr	r3, [r7, #76]
 3008 0722 7A68     		ldr	r2, [r7, #4]
 3009 0724 1344     		add	r3, r3, r2
 3010 0726 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3011 0728 DAB2     		uxtb	r2, r3
 3012 072a 4FF00003 		mov	r3, #0
 3013 072e F96C     		ldr	r1, [r7, #76]
 3014 0730 C900     		lsls	r1, r1, #3
 3015 0732 A1F12006 		sub	r6, r1, #32
 3016 0736 C1F12000 		rsb	r0, r1, #32
 3017 073a 03FA01F9 		lsl	r9, r3, r1
 3018 073e 02FA06F6 		lsl	r6, r2, r6
 3019 0742 49EA0609 		orr	r9, r9, r6
 3020 0746 22FA00F0 		lsr	r0, r2, r0
 3021 074a 49EA0009 		orr	r9, r9, r0
 3022 074e 02FA01F8 		lsl	r8, r2, r1
 3023 0752 4AEA0802 		orr	r2, r10, r8
 3024 0756 4BEA0903 		orr	r3, fp, r9
 3025 075a 6949     		ldr	r1, .L153+12
 3026 075c C1E90023 		strd	r2, [r1]
 671:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3027              		.loc 1 671 0 discriminator 3
 3028 0760 FB6C     		ldr	r3, [r7, #76]
 3029 0762 0133     		adds	r3, r3, #1
 3030 0764 FB64     		str	r3, [r7, #76]
 3031              	.L131:
 671:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3032              		.loc 1 671 0 is_stmt 0 discriminator 1
 3033 0766 FB6C     		ldr	r3, [r7, #76]
 3034 0768 072B     		cmp	r3, #7
 3035 076a D6DD     		ble	.L132
 673:bluetooth_rxtx.c **** 		}
 674:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3036              		.loc 1 674 0 is_stmt 1
 3037 076c 0023     		movs	r3, #0
 3038 076e FB64     		str	r3, [r7, #76]
 3039 0770 24E0     		b	.L133
 3040              	.L134:
 675:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3041              		.loc 1 675 0 discriminator 3
 3042 0772 634B     		ldr	r3, .L153+12
ARM GAS  /tmp/ccxwuSCA.s 			page 65


 3043 0774 D3E90289 		ldrd	r8, [r3, #8]
 3044 0778 FB6C     		ldr	r3, [r7, #76]
 3045 077a 0833     		adds	r3, r3, #8
 3046 077c 7A68     		ldr	r2, [r7, #4]
 3047 077e 1344     		add	r3, r3, r2
 3048 0780 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3049 0782 DAB2     		uxtb	r2, r3
 3050 0784 4FF00003 		mov	r3, #0
 3051 0788 F96C     		ldr	r1, [r7, #76]
 3052 078a C900     		lsls	r1, r1, #3
 3053 078c A1F12006 		sub	r6, r1, #32
 3054 0790 C1F12000 		rsb	r0, r1, #32
 3055 0794 03FA01F5 		lsl	r5, r3, r1
 3056 0798 02FA06F6 		lsl	r6, r2, r6
 3057 079c 3543     		orrs	r5, r5, r6
 3058 079e 22FA00F0 		lsr	r0, r2, r0
 3059 07a2 0543     		orrs	r5, r5, r0
 3060 07a4 02FA01F4 		lsl	r4, r2, r1
 3061 07a8 48EA0402 		orr	r2, r8, r4
 3062 07ac 49EA0503 		orr	r3, r9, r5
 3063 07b0 5349     		ldr	r1, .L153+12
 3064 07b2 C1E90223 		strd	r2, [r1, #8]
 674:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3065              		.loc 1 674 0 discriminator 3
 3066 07b6 FB6C     		ldr	r3, [r7, #76]
 3067 07b8 0133     		adds	r3, r3, #1
 3068 07ba FB64     		str	r3, [r7, #76]
 3069              	.L133:
 674:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3070              		.loc 1 674 0 is_stmt 0 discriminator 1
 3071 07bc FB6C     		ldr	r3, [r7, #76]
 3072 07be 072B     		cmp	r3, #7
 3073 07c0 D7DD     		ble	.L134
 676:bluetooth_rxtx.c **** 		}
 677:bluetooth_rxtx.c **** 		break;
 3074              		.loc 1 677 0 is_stmt 1
 3075 07c2 80E1     		b	.L105
 3076              	.L84:
 678:bluetooth_rxtx.c **** 
 679:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 680:bluetooth_rxtx.c **** 		clock_offset = 0;
 3077              		.loc 1 680 0
 3078 07c4 0023     		movs	r3, #0
 3079 07c6 BB64     		str	r3, [r7, #72]
 681:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3080              		.loc 1 681 0
 3081 07c8 0023     		movs	r3, #0
 3082 07ca FB64     		str	r3, [r7, #76]
 3083 07cc 0DE0     		b	.L135
 3084              	.L136:
 682:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3085              		.loc 1 682 0 discriminator 3
 3086 07ce BB6C     		ldr	r3, [r7, #72]
 3087 07d0 1B02     		lsls	r3, r3, #8
 3088 07d2 BB64     		str	r3, [r7, #72]
 683:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3089              		.loc 1 683 0 discriminator 3
ARM GAS  /tmp/ccxwuSCA.s 			page 66


 3090 07d4 FB6C     		ldr	r3, [r7, #76]
 3091 07d6 7A68     		ldr	r2, [r7, #4]
 3092 07d8 1344     		add	r3, r3, r2
 3093 07da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3094 07dc 1A46     		mov	r2, r3
 3095 07de BB6C     		ldr	r3, [r7, #72]
 3096 07e0 1343     		orrs	r3, r3, r2
 3097 07e2 BB64     		str	r3, [r7, #72]
 681:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3098              		.loc 1 681 0 discriminator 3
 3099 07e4 FB6C     		ldr	r3, [r7, #76]
 3100 07e6 0133     		adds	r3, r3, #1
 3101 07e8 FB64     		str	r3, [r7, #76]
 3102              	.L135:
 681:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3103              		.loc 1 681 0 is_stmt 0 discriminator 1
 3104 07ea FB6C     		ldr	r3, [r7, #76]
 3105 07ec 032B     		cmp	r3, #3
 3106 07ee EEDD     		ble	.L136
 684:bluetooth_rxtx.c **** 		}
 685:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3107              		.loc 1 685 0 is_stmt 1
 3108 07f0 444B     		ldr	r3, .L153+16
 3109 07f2 1A68     		ldr	r2, [r3]
 3110 07f4 BB6C     		ldr	r3, [r7, #72]
 3111 07f6 1344     		add	r3, r3, r2
 3112 07f8 424A     		ldr	r2, .L153+16
 3113 07fa 1360     		str	r3, [r2]
 686:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3114              		.loc 1 686 0
 3115 07fc 424B     		ldr	r3, .L153+20
 3116 07fe 0222     		movs	r2, #2
 3117 0800 1A70     		strb	r2, [r3]
 687:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3118              		.loc 1 687 0
 3119 0802 424B     		ldr	r3, .L153+24
 3120 0804 0822     		movs	r2, #8
 3121 0806 1A70     		strb	r2, [r3]
 688:bluetooth_rxtx.c **** 		break;
 3122              		.loc 1 688 0
 3123 0808 5DE1     		b	.L105
 3124              	.L85:
 689:bluetooth_rxtx.c **** 
 690:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 691:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3125              		.loc 1 691 0
 3126 080a 7B68     		ldr	r3, [r7, #4]
 3127 080c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3128 080e 1A46     		mov	r2, r3
 3129 0810 7B68     		ldr	r3, [r7, #4]
 3130 0812 0133     		adds	r3, r3, #1
 3131 0814 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3132 0816 1B02     		lsls	r3, r3, #8
 3133 0818 1A43     		orrs	r2, r2, r3
 3134 081a 7B68     		ldr	r3, [r7, #4]
 3135 081c 0233     		adds	r3, r3, #2
 3136 081e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccxwuSCA.s 			page 67


 3137 0820 1B04     		lsls	r3, r3, #16
 3138 0822 1A43     		orrs	r2, r2, r3
 3139 0824 7B68     		ldr	r3, [r7, #4]
 3140 0826 0333     		adds	r3, r3, #3
 3141 0828 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3142 082a 1B06     		lsls	r3, r3, #24
 3143 082c 1343     		orrs	r3, r3, r2
 3144 082e FB63     		str	r3, [r7, #60]
 692:bluetooth_rxtx.c **** 		clkn = clock;
 3145              		.loc 1 692 0
 3146 0830 344A     		ldr	r2, .L153+16
 3147 0832 FB6B     		ldr	r3, [r7, #60]
 3148 0834 1360     		str	r3, [r2]
 693:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3149              		.loc 1 693 0
 3150 0836 FFF7FEFF 		bl	cs_threshold_calc_and_set
 694:bluetooth_rxtx.c **** 		break;
 3151              		.loc 1 694 0
 3152 083a 44E1     		b	.L105
 3153              	.L96:
 695:bluetooth_rxtx.c **** 
 696:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 697:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3154              		.loc 1 697 0
 3155 083c 0023     		movs	r3, #0
 3156 083e FB64     		str	r3, [r7, #76]
 3157 0840 0BE0     		b	.L137
 3158              	.L138:
 698:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3159              		.loc 1 698 0 discriminator 3
 3160 0842 FB6C     		ldr	r3, [r7, #76]
 3161 0844 7A68     		ldr	r2, [r7, #4]
 3162 0846 1344     		add	r3, r3, r2
 3163 0848 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3164 084a 314A     		ldr	r2, .L153+28
 3165 084c FB6C     		ldr	r3, [r7, #76]
 3166 084e 1344     		add	r3, r3, r2
 3167 0850 0A46     		mov	r2, r1
 3168 0852 1A70     		strb	r2, [r3]
 697:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3169              		.loc 1 697 0 discriminator 3
 3170 0854 FB6C     		ldr	r3, [r7, #76]
 3171 0856 0133     		adds	r3, r3, #1
 3172 0858 FB64     		str	r3, [r7, #76]
 3173              	.L137:
 697:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3174              		.loc 1 697 0 is_stmt 0 discriminator 1
 3175 085a FB6C     		ldr	r3, [r7, #76]
 3176 085c 092B     		cmp	r3, #9
 3177 085e F0DD     		ble	.L138
 699:bluetooth_rxtx.c **** 		}
 700:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3178              		.loc 1 700 0 is_stmt 1
 3179 0860 2C4B     		ldr	r3, .L153+32
 3180 0862 0122     		movs	r2, #1
 3181 0864 1A70     		strb	r2, [r3]
 701:bluetooth_rxtx.c **** 		*data_len = 10;
ARM GAS  /tmp/ccxwuSCA.s 			page 68


 3182              		.loc 1 701 0
 3183 0866 3B68     		ldr	r3, [r7]
 3184 0868 0A22     		movs	r2, #10
 3185 086a 1A60     		str	r2, [r3]
 702:bluetooth_rxtx.c **** 		break;
 3186              		.loc 1 702 0
 3187 086c 2BE1     		b	.L105
 3188              	.L97:
 703:bluetooth_rxtx.c **** 
 704:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 705:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3189              		.loc 1 705 0
 3190 086e 0023     		movs	r3, #0
 3191 0870 FB64     		str	r3, [r7, #76]
 3192 0872 07E0     		b	.L139
 3193              	.L140:
 706:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3194              		.loc 1 706 0 discriminator 3
 3195 0874 264A     		ldr	r2, .L153+28
 3196 0876 FB6C     		ldr	r3, [r7, #76]
 3197 0878 1344     		add	r3, r3, r2
 3198 087a 0022     		movs	r2, #0
 3199 087c 1A70     		strb	r2, [r3]
 705:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3200              		.loc 1 705 0 discriminator 3
 3201 087e FB6C     		ldr	r3, [r7, #76]
 3202 0880 0133     		adds	r3, r3, #1
 3203 0882 FB64     		str	r3, [r7, #76]
 3204              	.L139:
 705:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3205              		.loc 1 705 0 is_stmt 0 discriminator 1
 3206 0884 FB6C     		ldr	r3, [r7, #76]
 3207 0886 092B     		cmp	r3, #9
 3208 0888 F4DD     		ble	.L140
 707:bluetooth_rxtx.c **** 		}
 708:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3209              		.loc 1 708 0 is_stmt 1
 3210 088a 224B     		ldr	r3, .L153+32
 3211 088c 0022     		movs	r2, #0
 3212 088e 1A70     		strb	r2, [r3]
 709:bluetooth_rxtx.c **** 		*data_len = 10;
 3213              		.loc 1 709 0
 3214 0890 3B68     		ldr	r3, [r7]
 3215 0892 0A22     		movs	r2, #10
 3216 0894 1A60     		str	r2, [r3]
 710:bluetooth_rxtx.c **** 		break;
 3217              		.loc 1 710 0
 3218 0896 16E1     		b	.L105
 3219              	.L86:
 711:bluetooth_rxtx.c **** 
 712:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 713:bluetooth_rxtx.c **** 		clock = clkn;
 3220              		.loc 1 713 0
 3221 0898 1A4B     		ldr	r3, .L153+16
 3222 089a 1B68     		ldr	r3, [r3]
 3223 089c FB63     		str	r3, [r7, #60]
 714:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
ARM GAS  /tmp/ccxwuSCA.s 			page 69


 3224              		.loc 1 714 0
 3225 089e 0023     		movs	r3, #0
 3226 08a0 FB64     		str	r3, [r7, #76]
 3227 08a2 0CE0     		b	.L141
 3228              	.L142:
 715:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3229              		.loc 1 715 0 discriminator 3
 3230 08a4 FB6C     		ldr	r3, [r7, #76]
 3231 08a6 7A68     		ldr	r2, [r7, #4]
 3232 08a8 1344     		add	r3, r3, r2
 3233 08aa FA6C     		ldr	r2, [r7, #76]
 3234 08ac D200     		lsls	r2, r2, #3
 3235 08ae F96B     		ldr	r1, [r7, #60]
 3236 08b0 21FA02F2 		lsr	r2, r1, r2
 3237 08b4 D2B2     		uxtb	r2, r2
 3238 08b6 1A70     		strb	r2, [r3]
 714:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3239              		.loc 1 714 0 discriminator 3
 3240 08b8 FB6C     		ldr	r3, [r7, #76]
 3241 08ba 0133     		adds	r3, r3, #1
 3242 08bc FB64     		str	r3, [r7, #76]
 3243              	.L141:
 714:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3244              		.loc 1 714 0 is_stmt 0 discriminator 1
 3245 08be FB6C     		ldr	r3, [r7, #76]
 3246 08c0 032B     		cmp	r3, #3
 3247 08c2 EFDD     		ble	.L142
 716:bluetooth_rxtx.c **** 		}
 717:bluetooth_rxtx.c **** 		*data_len = 4;
 3248              		.loc 1 717 0 is_stmt 1
 3249 08c4 3B68     		ldr	r3, [r7]
 3250 08c6 0422     		movs	r2, #4
 3251 08c8 1A60     		str	r2, [r3]
 718:bluetooth_rxtx.c **** 		break;
 3252              		.loc 1 718 0
 3253 08ca FCE0     		b	.L105
 3254              	.L87:
 719:bluetooth_rxtx.c **** 
 720:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 721:bluetooth_rxtx.c **** 		*data_len = 0;
 3255              		.loc 1 721 0
 3256 08cc 3B68     		ldr	r3, [r7]
 3257 08ce 0022     		movs	r2, #0
 3258 08d0 1A60     		str	r2, [r3]
 722:bluetooth_rxtx.c **** 
 723:bluetooth_rxtx.c **** 		do_hop = 0;
 3259              		.loc 1 723 0
 3260 08d2 114B     		ldr	r3, .L153+36
 3261 08d4 0022     		movs	r2, #0
 3262 08d6 1A70     		strb	r2, [r3]
 724:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3263              		.loc 1 724 0
 3264 08d8 0B4B     		ldr	r3, .L153+20
 3265 08da 0322     		movs	r2, #3
 3266 08dc 1A70     		strb	r2, [r3]
 725:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3267              		.loc 1 725 0
ARM GAS  /tmp/ccxwuSCA.s 			page 70


 3268 08de 0B4B     		ldr	r3, .L153+24
 3269 08e0 0922     		movs	r2, #9
 3270 08e2 1A70     		strb	r2, [r3]
 726:bluetooth_rxtx.c **** 
 727:bluetooth_rxtx.c **** 		queue_init();
 3271              		.loc 1 727 0
 3272 08e4 FFF7FEFF 		bl	queue_init
 728:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3273              		.loc 1 728 0
 3274 08e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 729:bluetooth_rxtx.c **** 		break;
 3275              		.loc 1 729 0
 3276 08ec EBE0     		b	.L105
 3277              	.L88:
 730:bluetooth_rxtx.c **** 
 731:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 732:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3278              		.loc 1 732 0
 3279 08ee 0023     		movs	r3, #0
 3280 08f0 FB64     		str	r3, [r7, #76]
 3281 08f2 21E0     		b	.L143
 3282              	.L154:
 3283              		.align	2
 3284              	.L153:
 3285 08f4 D4080000 		.word	.LC3
 3286 08f8 00000000 		.word	compile_info
 3287 08fc 00000000 		.word	cs_threshold_req
 3288 0900 00000000 		.word	target
 3289 0904 00000000 		.word	clkn
 3290 0908 00000000 		.word	hop_mode
 3291 090c 00000000 		.word	requested_mode
 3292 0910 00000000 		.word	afh_map
 3293 0914 00000000 		.word	afh_enabled
 3294 0918 00000000 		.word	do_hop
 3295              	.L144:
 733:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3296              		.loc 1 733 0 discriminator 3
 3297 091c FB6C     		ldr	r3, [r7, #76]
 3298 091e 7A68     		ldr	r2, [r7, #4]
 3299 0920 1344     		add	r3, r3, r2
 3300 0922 6C4A     		ldr	r2, .L155
 3301 0924 1168     		ldr	r1, [r2]
 3302 0926 FA6C     		ldr	r2, [r7, #76]
 3303 0928 D200     		lsls	r2, r2, #3
 3304 092a 21FA02F2 		lsr	r2, r1, r2
 3305 092e D2B2     		uxtb	r2, r2
 3306 0930 1A70     		strb	r2, [r3]
 732:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3307              		.loc 1 732 0 discriminator 3
 3308 0932 FB6C     		ldr	r3, [r7, #76]
 3309 0934 0133     		adds	r3, r3, #1
 3310 0936 FB64     		str	r3, [r7, #76]
 3311              	.L143:
 732:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3312              		.loc 1 732 0 is_stmt 0 discriminator 1
 3313 0938 FB6C     		ldr	r3, [r7, #76]
 3314 093a 032B     		cmp	r3, #3
ARM GAS  /tmp/ccxwuSCA.s 			page 71


 3315 093c EEDD     		ble	.L144
 734:bluetooth_rxtx.c **** 		}
 735:bluetooth_rxtx.c **** 		*data_len = 4;
 3316              		.loc 1 735 0 is_stmt 1
 3317 093e 3B68     		ldr	r3, [r7]
 3318 0940 0422     		movs	r2, #4
 3319 0942 1A60     		str	r2, [r3]
 736:bluetooth_rxtx.c **** 		break;
 3320              		.loc 1 736 0
 3321 0944 BFE0     		b	.L105
 3322              	.L89:
 737:bluetooth_rxtx.c **** 
 738:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 739:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3323              		.loc 1 739 0
 3324 0946 7B68     		ldr	r3, [r7, #4]
 3325 0948 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3326 094a 1A46     		mov	r2, r3
 3327 094c 7B68     		ldr	r3, [r7, #4]
 3328 094e 0133     		adds	r3, r3, #1
 3329 0950 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3330 0952 1B02     		lsls	r3, r3, #8
 3331 0954 1A43     		orrs	r2, r2, r3
 3332 0956 7B68     		ldr	r3, [r7, #4]
 3333 0958 0233     		adds	r3, r3, #2
 3334 095a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3335 095c 1B04     		lsls	r3, r3, #16
 3336 095e 1A43     		orrs	r2, r2, r3
 3337 0960 7B68     		ldr	r3, [r7, #4]
 3338 0962 0333     		adds	r3, r3, #3
 3339 0964 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3340 0966 1B06     		lsls	r3, r3, #24
 3341 0968 1343     		orrs	r3, r3, r2
 3342 096a 1846     		mov	r0, r3
 3343 096c FFF7FEFF 		bl	le_set_access_address
 740:bluetooth_rxtx.c **** 		le.target_set = 1;
 3344              		.loc 1 740 0
 3345 0970 584B     		ldr	r3, .L155
 3346 0972 0122     		movs	r2, #1
 3347 0974 DA63     		str	r2, [r3, #60]
 741:bluetooth_rxtx.c **** 		break;
 3348              		.loc 1 741 0
 3349 0976 A6E0     		b	.L105
 3350              	.L91:
 742:bluetooth_rxtx.c **** 
 743:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 744:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 745:bluetooth_rxtx.c **** 		break;
 746:bluetooth_rxtx.c **** 
 747:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 748:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 749:bluetooth_rxtx.c **** 		// don't commit here please
 750:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3351              		.loc 1 750 0
 3352 0978 7B68     		ldr	r3, [r7, #4]
 3353 097a 1322     		movs	r2, #19
 3354 097c 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 72


 751:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3355              		.loc 1 751 0
 3356 097e 7B68     		ldr	r3, [r7, #4]
 3357 0980 0133     		adds	r3, r3, #1
 3358 0982 3722     		movs	r2, #55
 3359 0984 1A70     		strb	r2, [r3]
 752:bluetooth_rxtx.c **** 		*data_len = 2;
 3360              		.loc 1 752 0
 3361 0986 3B68     		ldr	r3, [r7]
 3362 0988 0222     		movs	r2, #2
 3363 098a 1A60     		str	r2, [r3]
 753:bluetooth_rxtx.c **** 		break;
 3364              		.loc 1 753 0
 3365 098c 9BE0     		b	.L105
 3366              	.L92:
 754:bluetooth_rxtx.c **** 
 755:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 756:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3367              		.loc 1 756 0
 3368 098e 514B     		ldr	r3, .L155
 3369 0990 1B69     		ldr	r3, [r3, #16]
 3370 0992 002B     		cmp	r3, #0
 3371 0994 14BF     		ite	ne
 3372 0996 0123     		movne	r3, #1
 3373 0998 0023     		moveq	r3, #0
 3374 099a DBB2     		uxtb	r3, r3
 3375 099c 1A46     		mov	r2, r3
 3376 099e 7B68     		ldr	r3, [r7, #4]
 3377 09a0 1A70     		strb	r2, [r3]
 757:bluetooth_rxtx.c **** 		*data_len = 1;
 3378              		.loc 1 757 0
 3379 09a2 3B68     		ldr	r3, [r7]
 3380 09a4 0122     		movs	r2, #1
 3381 09a6 1A60     		str	r2, [r3]
 758:bluetooth_rxtx.c **** 		break;
 3382              		.loc 1 758 0
 3383 09a8 8DE0     		b	.L105
 3384              	.L93:
 759:bluetooth_rxtx.c **** 
 760:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 761:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3385              		.loc 1 761 0
 3386 09aa BB68     		ldr	r3, [r7, #8]
 3387 09ac 1B88     		ldrh	r3, [r3]
 3388 09ae 002B     		cmp	r3, #0
 3389 09b0 14BF     		ite	ne
 3390 09b2 0123     		movne	r3, #1
 3391 09b4 0023     		moveq	r3, #0
 3392 09b6 DBB2     		uxtb	r3, r3
 3393 09b8 1A46     		mov	r2, r3
 3394 09ba 464B     		ldr	r3, .L155
 3395 09bc 1A61     		str	r2, [r3, #16]
 762:bluetooth_rxtx.c **** 		break;
 3396              		.loc 1 762 0
 3397 09be 82E0     		b	.L105
 3398              	.L94:
 763:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccxwuSCA.s 			page 73


 764:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 765:bluetooth_rxtx.c **** 		p = dequeue();
 3399              		.loc 1 765 0
 3400 09c0 FFF7FEFF 		bl	dequeue
 3401 09c4 7864     		str	r0, [r7, #68]
 766:bluetooth_rxtx.c **** 		if (p != NULL) {
 3402              		.loc 1 766 0
 3403 09c6 7B6C     		ldr	r3, [r7, #68]
 3404 09c8 002B     		cmp	r3, #0
 3405 09ca 08D0     		beq	.L145
 767:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3406              		.loc 1 767 0
 3407 09cc 7868     		ldr	r0, [r7, #4]
 3408 09ce 796C     		ldr	r1, [r7, #68]
 3409 09d0 4022     		movs	r2, #64
 3410 09d2 FFF7FEFF 		bl	memcpy
 768:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3411              		.loc 1 768 0
 3412 09d6 3B68     		ldr	r3, [r7]
 3413 09d8 4022     		movs	r2, #64
 3414 09da 1A60     		str	r2, [r3]
 769:bluetooth_rxtx.c **** 		} else {
 770:bluetooth_rxtx.c **** 			data[0] = 0;
 771:bluetooth_rxtx.c **** 			*data_len = 1;
 772:bluetooth_rxtx.c **** 		}
 773:bluetooth_rxtx.c **** 		break;
 3415              		.loc 1 773 0
 3416 09dc 73E0     		b	.L105
 3417              	.L145:
 770:bluetooth_rxtx.c **** 			*data_len = 1;
 3418              		.loc 1 770 0
 3419 09de 7B68     		ldr	r3, [r7, #4]
 3420 09e0 0022     		movs	r2, #0
 3421 09e2 1A70     		strb	r2, [r3]
 771:bluetooth_rxtx.c **** 		}
 3422              		.loc 1 771 0
 3423 09e4 3B68     		ldr	r3, [r7]
 3424 09e6 0122     		movs	r2, #1
 3425 09e8 1A60     		str	r2, [r3]
 3426              		.loc 1 773 0
 3427 09ea 6CE0     		b	.L105
 3428              	.L95:
 774:bluetooth_rxtx.c **** 
 775:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 776:bluetooth_rxtx.c **** 		*data_len = 0;
 3429              		.loc 1 776 0
 3430 09ec 3B68     		ldr	r3, [r7]
 3431 09ee 0022     		movs	r2, #0
 3432 09f0 1A60     		str	r2, [r3]
 777:bluetooth_rxtx.c **** 
 778:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3433              		.loc 1 778 0
 3434 09f2 394B     		ldr	r3, .L155+4
 3435 09f4 0022     		movs	r2, #0
 3436 09f6 1A70     		strb	r2, [r3]
 779:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3437              		.loc 1 779 0
ARM GAS  /tmp/ccxwuSCA.s 			page 74


 3438 09f8 384B     		ldr	r3, .L155+8
 3439 09fa 0A22     		movs	r2, #10
 3440 09fc 1A70     		strb	r2, [r3]
 780:bluetooth_rxtx.c **** 
 781:bluetooth_rxtx.c **** 		queue_init();
 3441              		.loc 1 781 0
 3442 09fe FFF7FEFF 		bl	queue_init
 782:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3443              		.loc 1 782 0
 3444 0a02 FFF7FEFF 		bl	cs_threshold_calc_and_set
 783:bluetooth_rxtx.c **** 		break;
 3445              		.loc 1 783 0
 3446 0a06 5EE0     		b	.L105
 3447              	.L98:
 784:bluetooth_rxtx.c **** 
 785:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 786:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3448              		.loc 1 786 0
 3449 0a08 BB68     		ldr	r3, [r7, #8]
 3450 0a0a 1B88     		ldrh	r3, [r3]
 3451 0a0c DBB2     		uxtb	r3, r3
 3452 0a0e 1846     		mov	r0, r3
 3453 0a10 FFF7FEFF 		bl	cc2400_get
 3454 0a14 0346     		mov	r3, r0
 3455 0a16 7B87     		strh	r3, [r7, #58]	@ movhi
 787:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3456              		.loc 1 787 0
 3457 0a18 7B8F     		ldrh	r3, [r7, #58]
 3458 0a1a 1B0A     		lsrs	r3, r3, #8
 3459 0a1c 9BB2     		uxth	r3, r3
 3460 0a1e DAB2     		uxtb	r2, r3
 3461 0a20 7B68     		ldr	r3, [r7, #4]
 3462 0a22 1A70     		strb	r2, [r3]
 788:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3463              		.loc 1 788 0
 3464 0a24 7B68     		ldr	r3, [r7, #4]
 3465 0a26 0133     		adds	r3, r3, #1
 3466 0a28 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3467 0a2a D2B2     		uxtb	r2, r2
 3468 0a2c 1A70     		strb	r2, [r3]
 789:bluetooth_rxtx.c **** 		*data_len = 2;
 3469              		.loc 1 789 0
 3470 0a2e 3B68     		ldr	r3, [r7]
 3471 0a30 0222     		movs	r2, #2
 3472 0a32 1A60     		str	r2, [r3]
 790:bluetooth_rxtx.c **** 		break;
 3473              		.loc 1 790 0
 3474 0a34 47E0     		b	.L105
 3475              	.L102:
 791:bluetooth_rxtx.c **** 
 792:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 793:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3476              		.loc 1 793 0
 3477 0a36 BB68     		ldr	r3, [r7, #8]
 3478 0a38 1B88     		ldrh	r3, [r3]
 3479 0a3a DAB2     		uxtb	r2, r3
 3480 0a3c BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccxwuSCA.s 			page 75


 3481 0a3e 0233     		adds	r3, r3, #2
 3482 0a40 1B88     		ldrh	r3, [r3]
 3483 0a42 1046     		mov	r0, r2
 3484 0a44 1946     		mov	r1, r3
 3485 0a46 FFF7FEFF 		bl	cc2400_set
 794:bluetooth_rxtx.c **** 		break;
 3486              		.loc 1 794 0
 3487 0a4a 3CE0     		b	.L105
 3488              	.L99:
 795:bluetooth_rxtx.c **** 
 796:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 797:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3489              		.loc 1 797 0
 3490 0a4c 2448     		ldr	r0, .L155+12
 3491 0a4e 7968     		ldr	r1, [r7, #4]
 3492 0a50 0622     		movs	r2, #6
 3493 0a52 FFF7FEFF 		bl	memcpy
 798:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3494              		.loc 1 798 0
 3495 0a56 214B     		ldr	r3, .L155+8
 3496 0a58 0C22     		movs	r2, #12
 3497 0a5a 1A70     		strb	r2, [r3]
 799:bluetooth_rxtx.c **** 		break;
 3498              		.loc 1 799 0
 3499 0a5c 33E0     		b	.L105
 3500              	.L101:
 800:bluetooth_rxtx.c **** 
 801:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 802:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 803:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 804:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3501              		.loc 1 804 0
 3502 0a5e 7B68     		ldr	r3, [r7, #4]
 3503 0a60 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3504 0a62 1C4B     		ldr	r3, .L155
 3505 0a64 83F83420 		strb	r2, [r3, #52]
 805:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3506              		.loc 1 805 0
 3507 0a68 7B68     		ldr	r3, [r7, #4]
 3508 0a6a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3509 0a6c 194B     		ldr	r3, .L155
 3510 0a6e 83F83520 		strb	r2, [r3, #53]
 806:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3511              		.loc 1 806 0
 3512 0a72 7B68     		ldr	r3, [r7, #4]
 3513 0a74 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3514 0a76 174B     		ldr	r3, .L155
 3515 0a78 83F83620 		strb	r2, [r3, #54]
 807:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3516              		.loc 1 807 0
 3517 0a7c 7B68     		ldr	r3, [r7, #4]
 3518 0a7e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3519 0a80 144B     		ldr	r3, .L155
 3520 0a82 83F83720 		strb	r2, [r3, #55]
 808:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3521              		.loc 1 808 0
 3522 0a86 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccxwuSCA.s 			page 76


 3523 0a88 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3524 0a8a 124B     		ldr	r3, .L155
 3525 0a8c 83F83820 		strb	r2, [r3, #56]
 809:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3526              		.loc 1 809 0
 3527 0a90 7B68     		ldr	r3, [r7, #4]
 3528 0a92 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3529 0a94 0F4B     		ldr	r3, .L155
 3530 0a96 83F83920 		strb	r2, [r3, #57]
 810:bluetooth_rxtx.c **** 		le.target_set = 1;
 3531              		.loc 1 810 0
 3532 0a9a 0E4B     		ldr	r3, .L155
 3533 0a9c 0122     		movs	r2, #1
 3534 0a9e DA63     		str	r2, [r3, #60]
 811:bluetooth_rxtx.c **** 		break;
 3535              		.loc 1 811 0
 3536 0aa0 11E0     		b	.L105
 3537              	.L103:
 812:bluetooth_rxtx.c **** 
 813:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 814:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 815:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3538              		.loc 1 815 0
 3539 0aa2 BB68     		ldr	r3, [r7, #8]
 3540 0aa4 1B88     		ldrh	r3, [r3]
 3541 0aa6 DAB2     		uxtb	r2, r3
 3542 0aa8 0E4B     		ldr	r3, .L155+16
 3543 0aaa 1A70     		strb	r2, [r3]
 816:bluetooth_rxtx.c **** 		break;
 3544              		.loc 1 816 0
 3545 0aac 0BE0     		b	.L105
 3546              	.L104:
 817:bluetooth_rxtx.c **** #endif
 818:bluetooth_rxtx.c **** 
 819:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 820:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 821:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 822:bluetooth_rxtx.c **** 			return 0;
 823:bluetooth_rxtx.c **** #endif
 824:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3547              		.loc 1 824 0
 3548 0aae 0B4B     		ldr	r3, .L155+8
 3549 0ab0 0D22     		movs	r2, #13
 3550 0ab2 1A70     		strb	r2, [r3]
 825:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3551              		.loc 1 825 0
 3552 0ab4 BB68     		ldr	r3, [r7, #8]
 3553 0ab6 1B88     		ldrh	r3, [r3]
 3554 0ab8 DAB2     		uxtb	r2, r3
 3555 0aba 0B4B     		ldr	r3, .L155+20
 3556 0abc 1A70     		strb	r2, [r3]
 826:bluetooth_rxtx.c **** 		break;
 3557              		.loc 1 826 0
 3558 0abe 02E0     		b	.L105
 3559              	.L45:
 827:bluetooth_rxtx.c **** 
 828:bluetooth_rxtx.c **** 	default:
ARM GAS  /tmp/ccxwuSCA.s 			page 77


 829:bluetooth_rxtx.c **** 		return 0;
 3560              		.loc 1 829 0
 3561 0ac0 0023     		movs	r3, #0
 3562 0ac2 01E0     		b	.L147
 3563              	.L148:
 745:bluetooth_rxtx.c **** 
 3564              		.loc 1 745 0
 3565 0ac4 00BF     		nop
 3566              	.L105:
 830:bluetooth_rxtx.c **** 	}
 831:bluetooth_rxtx.c **** 	return 1;
 3567              		.loc 1 831 0
 3568 0ac6 0123     		movs	r3, #1
 3569              	.L147:
 832:bluetooth_rxtx.c **** }
 3570              		.loc 1 832 0 discriminator 1
 3571 0ac8 1846     		mov	r0, r3
 3572 0aca 5437     		adds	r7, r7, #84
 3573              		.cfi_def_cfa_offset 36
 3574 0acc BD46     		mov	sp, r7
 3575              		.cfi_def_cfa_register 13
 3576              		@ sp needed
 3577 0ace BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3578              	.L156:
 3579 0ad2 00BF     		.align	2
 3580              	.L155:
 3581 0ad4 00000000 		.word	le
 3582 0ad8 00000000 		.word	hop_mode
 3583 0adc 00000000 		.word	requested_mode
 3584 0ae0 00000000 		.word	slave_mac_address
 3585 0ae4 00000000 		.word	jam_mode
 3586 0ae8 00000000 		.word	ego_mode
 3587              		.cfi_endproc
 3588              	.LFE9:
 3590              		.section	.text.clkn_init,"ax",%progbits
 3591              		.align	2
 3592              		.thumb
 3593              		.thumb_func
 3595              	clkn_init:
 3596              	.LFB10:
 833:bluetooth_rxtx.c **** 
 834:bluetooth_rxtx.c **** static void clkn_init()
 835:bluetooth_rxtx.c **** {
 3597              		.loc 1 835 0
 3598              		.cfi_startproc
 3599              		@ args = 0, pretend = 0, frame = 0
 3600              		@ frame_needed = 1, uses_anonymous_args = 0
 3601              		@ link register save eliminated.
 3602 0000 80B4     		push	{r7}
 3603              		.cfi_def_cfa_offset 4
 3604              		.cfi_offset 7, -4
 3605 0002 00AF     		add	r7, sp, #0
 3606              		.cfi_def_cfa_register 7
 836:bluetooth_rxtx.c **** 	/*
 837:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 838:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 839:bluetooth_rxtx.c **** 	 * clock_start().
ARM GAS  /tmp/ccxwuSCA.s 			page 78


 840:bluetooth_rxtx.c **** 	 */
 841:bluetooth_rxtx.c **** 
 842:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 843:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3607              		.loc 1 843 0
 3608 0004 0C4B     		ldr	r3, .L158
 3609 0006 0222     		movs	r2, #2
 3610 0008 1A60     		str	r2, [r3]
 844:bluetooth_rxtx.c **** 	clkn = 0;
 3611              		.loc 1 844 0
 3612 000a 0C4B     		ldr	r3, .L158+4
 3613 000c 0022     		movs	r2, #0
 3614 000e 1A60     		str	r2, [r3]
 845:bluetooth_rxtx.c **** 
 846:bluetooth_rxtx.c **** #ifdef TC13BADGE
 847:bluetooth_rxtx.c **** 	/*
 848:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 849:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 850:bluetooth_rxtx.c **** 	 */
 851:bluetooth_rxtx.c **** 	T0PR = 2;
 852:bluetooth_rxtx.c **** #else
 853:bluetooth_rxtx.c **** 	/*
 854:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 855:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 856:bluetooth_rxtx.c **** 	 */
 857:bluetooth_rxtx.c **** 	T0PR = 4;
 3615              		.loc 1 857 0
 3616 0010 0B4B     		ldr	r3, .L158+8
 3617 0012 0422     		movs	r2, #4
 3618 0014 1A60     		str	r2, [r3]
 858:bluetooth_rxtx.c **** #endif
 859:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 860:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3619              		.loc 1 860 0
 3620 0016 0B4B     		ldr	r3, .L158+12
 3621 0018 40F63442 		movw	r2, #3124
 3622 001c 1A60     		str	r2, [r3]
 861:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3623              		.loc 1 861 0
 3624 001e 0A4B     		ldr	r3, .L158+16
 3625 0020 0322     		movs	r2, #3
 3626 0022 1A60     		str	r2, [r3]
 862:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3627              		.loc 1 862 0
 3628 0024 094B     		ldr	r3, .L158+20
 3629 0026 0222     		movs	r2, #2
 3630 0028 1A60     		str	r2, [r3]
 863:bluetooth_rxtx.c **** 
 864:bluetooth_rxtx.c **** 	/* start timer */
 865:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3631              		.loc 1 865 0
 3632 002a 034B     		ldr	r3, .L158
 3633 002c 0122     		movs	r2, #1
 3634 002e 1A60     		str	r2, [r3]
 866:bluetooth_rxtx.c **** }
 3635              		.loc 1 866 0
 3636 0030 BD46     		mov	sp, r7
ARM GAS  /tmp/ccxwuSCA.s 			page 79


 3637              		.cfi_def_cfa_register 13
 3638              		@ sp needed
 3639 0032 5DF8047B 		ldr	r7, [sp], #4
 3640              		.cfi_restore 7
 3641              		.cfi_def_cfa_offset 0
 3642 0036 7047     		bx	lr
 3643              	.L159:
 3644              		.align	2
 3645              	.L158:
 3646 0038 04400040 		.word	1073758212
 3647 003c 00000000 		.word	clkn
 3648 0040 0C400040 		.word	1073758220
 3649 0044 18400040 		.word	1073758232
 3650 0048 14400040 		.word	1073758228
 3651 004c 00E100E0 		.word	-536813312
 3652              		.cfi_endproc
 3653              	.LFE10:
 3655              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3656              		.align	2
 3657              		.global	TIMER0_IRQHandler
 3658              		.thumb
 3659              		.thumb_func
 3661              	TIMER0_IRQHandler:
 3662              	.LFB11:
 867:bluetooth_rxtx.c **** 
 868:bluetooth_rxtx.c **** /* Update CLKN. */
 869:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 870:bluetooth_rxtx.c **** {
 3663              		.loc 1 870 0
 3664              		.cfi_startproc
 3665              		@ args = 0, pretend = 0, frame = 8
 3666              		@ frame_needed = 1, uses_anonymous_args = 0
 3667              		@ link register save eliminated.
 3668 0000 80B4     		push	{r7}
 3669              		.cfi_def_cfa_offset 4
 3670              		.cfi_offset 7, -4
 3671 0002 83B0     		sub	sp, sp, #12
 3672              		.cfi_def_cfa_offset 16
 3673 0004 00AF     		add	r7, sp, #0
 3674              		.cfi_def_cfa_register 7
 871:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
 872:bluetooth_rxtx.c **** 	u32 next;
 873:bluetooth_rxtx.c **** 	u32 le_clk;
 874:bluetooth_rxtx.c **** 
 875:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3675              		.loc 1 875 0
 3676 0006 4FF04023 		mov	r3, #1073758208
 3677 000a 1B68     		ldr	r3, [r3]
 3678 000c 03F00103 		and	r3, r3, #1
 3679 0010 002B     		cmp	r3, #0
 3680 0012 6DD0     		beq	.L160
 876:bluetooth_rxtx.c **** 
 877:bluetooth_rxtx.c **** 		clkn++;
 3681              		.loc 1 877 0
 3682 0014 394B     		ldr	r3, .L170
 3683 0016 1B68     		ldr	r3, [r3]
 3684 0018 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccxwuSCA.s 			page 80


 3685 001a 384A     		ldr	r2, .L170
 3686 001c 1360     		str	r3, [r2]
 878:bluetooth_rxtx.c **** 		next = clkn;
 3687              		.loc 1 878 0
 3688 001e 374B     		ldr	r3, .L170
 3689 0020 1B68     		ldr	r3, [r3]
 3690 0022 7B60     		str	r3, [r7, #4]
 879:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 3691              		.loc 1 879 0
 3692 0024 364B     		ldr	r3, .L170+4
 3693 0026 9B69     		ldr	r3, [r3, #24]
 3694 0028 7A68     		ldr	r2, [r7, #4]
 3695 002a D31A     		subs	r3, r2, r3
 3696 002c 03F00303 		and	r3, r3, #3
 3697 0030 3B60     		str	r3, [r7]
 880:bluetooth_rxtx.c **** 
 881:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 882:bluetooth_rxtx.c **** 
 883:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 884:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 3698              		.loc 1 884 0
 3699 0032 344B     		ldr	r3, .L170+8
 3700 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3701 0036 002B     		cmp	r3, #0
 3702 0038 03D0     		beq	.L162
 3703              		.loc 1 884 0 is_stmt 0 discriminator 1
 3704 003a 324B     		ldr	r3, .L170+8
 3705 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3706 003e 012B     		cmp	r3, #1
 3707 0040 09D1     		bne	.L163
 3708              	.L162:
 885:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3709              		.loc 1 885 0 is_stmt 1
 3710 0042 7B68     		ldr	r3, [r7, #4]
 3711 0044 03F07F03 		and	r3, r3, #127
 3712 0048 002B     		cmp	r3, #0
 3713 004a 03D1     		bne	.L164
 886:bluetooth_rxtx.c **** 				do_hop = 1;
 3714              		.loc 1 886 0
 3715 004c 2E4B     		ldr	r3, .L170+12
 3716 004e 0122     		movs	r2, #1
 3717 0050 1A70     		strb	r2, [r3]
 885:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3718              		.loc 1 885 0
 3719 0052 37E0     		b	.L165
 3720              	.L164:
 3721 0054 36E0     		b	.L165
 3722              	.L163:
 887:bluetooth_rxtx.c **** 		}
 888:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 889:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 3723              		.loc 1 889 0
 3724 0056 2B4B     		ldr	r3, .L170+8
 3725 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3726 005a 022B     		cmp	r3, #2
 3727 005c 08D1     		bne	.L166
 890:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
ARM GAS  /tmp/ccxwuSCA.s 			page 81


 3728              		.loc 1 890 0
 3729 005e 7B68     		ldr	r3, [r7, #4]
 3730 0060 03F00103 		and	r3, r3, #1
 3731 0064 002B     		cmp	r3, #0
 3732 0066 2DD1     		bne	.L165
 891:bluetooth_rxtx.c **** 				do_hop = 1;
 3733              		.loc 1 891 0
 3734 0068 274B     		ldr	r3, .L170+12
 3735 006a 0122     		movs	r2, #1
 3736 006c 1A70     		strb	r2, [r3]
 3737 006e 29E0     		b	.L165
 3738              	.L166:
 892:bluetooth_rxtx.c **** 		}
 893:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 894:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 3739              		.loc 1 894 0
 3740 0070 244B     		ldr	r3, .L170+8
 3741 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3742 0074 032B     		cmp	r3, #3
 3743 0076 25D1     		bne	.L165
 895:bluetooth_rxtx.c **** 			// Only hop if connected
 896:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 3744              		.loc 1 896 0
 3745 0078 214B     		ldr	r3, .L170+4
 3746 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3747 007c 032B     		cmp	r3, #3
 3748 007e 21D1     		bne	.L165
 3749              		.loc 1 896 0 is_stmt 0 discriminator 1
 3750 0080 3B68     		ldr	r3, [r7]
 3751 0082 002B     		cmp	r3, #0
 3752 0084 1ED1     		bne	.L165
 897:bluetooth_rxtx.c **** 				--le.interval_timer;
 3753              		.loc 1 897 0 is_stmt 1
 3754 0086 1E4B     		ldr	r3, .L170+4
 3755 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3756 008a 9BB2     		uxth	r3, r3
 3757 008c 013B     		subs	r3, r3, #1
 3758 008e 9AB2     		uxth	r2, r3
 3759 0090 1B4B     		ldr	r3, .L170+4
 3760 0092 9A83     		strh	r2, [r3, #28]	@ movhi
 898:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3761              		.loc 1 898 0
 3762 0094 1A4B     		ldr	r3, .L170+4
 3763 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3764 0098 9BB2     		uxth	r3, r3
 3765 009a 002B     		cmp	r3, #0
 3766 009c 0ED1     		bne	.L168
 899:bluetooth_rxtx.c **** 					do_hop = 1;
 3767              		.loc 1 899 0
 3768 009e 1A4B     		ldr	r3, .L170+12
 3769 00a0 0122     		movs	r2, #1
 3770 00a2 1A70     		strb	r2, [r3]
 900:bluetooth_rxtx.c **** 					++le.conn_count;
 3771              		.loc 1 900 0
 3772 00a4 164B     		ldr	r3, .L170+4
 3773 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 3774 00a8 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 82


 3775 00aa 0133     		adds	r3, r3, #1
 3776 00ac 9AB2     		uxth	r2, r3
 3777 00ae 144B     		ldr	r3, .L170+4
 3778 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
 901:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3779              		.loc 1 901 0
 3780 00b2 134B     		ldr	r3, .L170+4
 3781 00b4 DA8B     		ldrh	r2, [r3, #30]
 3782 00b6 124B     		ldr	r3, .L170+4
 3783 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 3784 00ba 03E0     		b	.L165
 3785              	.L168:
 902:bluetooth_rxtx.c **** 				} else {
 903:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 3786              		.loc 1 903 0
 3787 00bc 134B     		ldr	r3, .L170+16
 3788 00be 4FF48072 		mov	r2, #256
 3789 00c2 1A60     		str	r2, [r3]
 3790              	.L165:
 904:bluetooth_rxtx.c **** 				}
 905:bluetooth_rxtx.c **** 			}
 906:bluetooth_rxtx.c **** 		}
 907:bluetooth_rxtx.c **** 
 908:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
 909:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 3791              		.loc 1 909 0
 3792 00c4 7B68     		ldr	r3, [r7, #4]
 3793 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 3794 00ca 002B     		cmp	r3, #0
 3795 00cc 02D1     		bne	.L169
 910:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 3796              		.loc 1 910 0
 3797 00ce 104B     		ldr	r3, .L170+20
 3798 00d0 0122     		movs	r2, #1
 3799 00d2 1A70     		strb	r2, [r3]
 3800              	.L169:
 911:bluetooth_rxtx.c **** 
 912:bluetooth_rxtx.c **** 		/* Ack interrupt */
 913:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 3801              		.loc 1 913 0
 3802 00d4 0F4A     		ldr	r2, .L170+24
 3803 00d6 104B     		ldr	r3, .L170+28
 3804 00d8 1B68     		ldr	r3, [r3]
 3805 00da C3F54363 		rsb	r3, r3, #3120
 3806 00de 0433     		adds	r3, r3, #4
 3807 00e0 1360     		str	r3, [r2]
 914:bluetooth_rxtx.c **** 		clock_trim = 0;
 3808              		.loc 1 914 0
 3809 00e2 0D4B     		ldr	r3, .L170+28
 3810 00e4 0022     		movs	r2, #0
 3811 00e6 1A60     		str	r2, [r3]
 915:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 3812              		.loc 1 915 0
 3813 00e8 4FF04023 		mov	r3, #1073758208
 3814 00ec 0122     		movs	r2, #1
 3815 00ee 1A60     		str	r2, [r3]
 3816              	.L160:
ARM GAS  /tmp/ccxwuSCA.s 			page 83


 916:bluetooth_rxtx.c **** 	}
 917:bluetooth_rxtx.c **** }
 3817              		.loc 1 917 0
 3818 00f0 0C37     		adds	r7, r7, #12
 3819              		.cfi_def_cfa_offset 4
 3820 00f2 BD46     		mov	sp, r7
 3821              		.cfi_def_cfa_register 13
 3822              		@ sp needed
 3823 00f4 5DF8047B 		ldr	r7, [sp], #4
 3824              		.cfi_restore 7
 3825              		.cfi_def_cfa_offset 0
 3826 00f8 7047     		bx	lr
 3827              	.L171:
 3828 00fa 00BF     		.align	2
 3829              	.L170:
 3830 00fc 00000000 		.word	clkn
 3831 0100 00000000 		.word	le
 3832 0104 00000000 		.word	hop_mode
 3833 0108 00000000 		.word	do_hop
 3834 010c 3CC00920 		.word	537509948
 3835 0110 00000000 		.word	keepalive_trigger
 3836 0114 18400040 		.word	1073758232
 3837 0118 00000000 		.word	clock_trim
 3838              		.cfi_endproc
 3839              	.LFE11:
 3841              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3842              		.align	2
 3843              		.global	EINT3_IRQHandler
 3844              		.thumb
 3845              		.thumb_func
 3847              	EINT3_IRQHandler:
 3848              	.LFB12:
 918:bluetooth_rxtx.c **** 
 919:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 920:bluetooth_rxtx.c **** #ifndef TC13BADGE
 921:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 922:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 923:bluetooth_rxtx.c **** {
 3849              		.loc 1 923 0
 3850              		.cfi_startproc
 3851              		@ args = 0, pretend = 0, frame = 0
 3852              		@ frame_needed = 1, uses_anonymous_args = 0
 3853              		@ link register save eliminated.
 3854 0000 80B4     		push	{r7}
 3855              		.cfi_def_cfa_offset 4
 3856              		.cfi_offset 7, -4
 3857 0002 00AF     		add	r7, sp, #0
 3858              		.cfi_def_cfa_register 7
 924:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 925:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 3859              		.loc 1 925 0
 3860 0004 0B4B     		ldr	r3, .L173
 3861 0006 0422     		movs	r2, #4
 3862 0008 1A60     		str	r2, [r3]
 926:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 3863              		.loc 1 926 0
 3864 000a 0B4B     		ldr	r3, .L173+4
ARM GAS  /tmp/ccxwuSCA.s 			page 84


 3865 000c 0122     		movs	r2, #1
 3866 000e 1A70     		strb	r2, [r3]
 927:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 3867              		.loc 1 927 0
 3868 0010 0A4B     		ldr	r3, .L173+8
 3869 0012 1B68     		ldr	r3, [r3]
 3870 0014 C3F31303 		ubfx	r3, r3, #0, #20
 3871 0018 40F63542 		movw	r2, #3125
 3872 001c 02FB03F2 		mul	r2, r2, r3
 3873 0020 074B     		ldr	r3, .L173+12
 3874 0022 1B68     		ldr	r3, [r3]
 3875 0024 1344     		add	r3, r3, r2
 3876 0026 074A     		ldr	r2, .L173+16
 3877 0028 1360     		str	r3, [r2]
 928:bluetooth_rxtx.c **** }
 3878              		.loc 1 928 0
 3879 002a BD46     		mov	sp, r7
 3880              		.cfi_def_cfa_register 13
 3881              		@ sp needed
 3882 002c 5DF8047B 		ldr	r7, [sp], #4
 3883              		.cfi_restore 7
 3884              		.cfi_def_cfa_offset 0
 3885 0030 7047     		bx	lr
 3886              	.L174:
 3887 0032 00BF     		.align	2
 3888              	.L173:
 3889 0034 AC800240 		.word	1073905836
 3890 0038 00000000 		.word	cs_trigger
 3891 003c 00000000 		.word	clkn
 3892 0040 08400040 		.word	1073758216
 3893 0044 00000000 		.word	cs_timestamp
 3894              		.cfi_endproc
 3895              	.LFE12:
 3897              		.global	__aeabi_ui2d
 3898              		.global	__aeabi_dmul
 3899              		.global	__aeabi_ddiv
 3900              		.global	__aeabi_dadd
 3901              		.global	__aeabi_d2uiz
 3902              		.section	.text.msleep,"ax",%progbits
 3903              		.align	2
 3904              		.thumb
 3905              		.thumb_func
 3907              	msleep:
 3908              	.LFB13:
 929:bluetooth_rxtx.c **** #endif // TC13BADGE
 930:bluetooth_rxtx.c **** 
 931:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
 932:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 933:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 934:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 935:bluetooth_rxtx.c **** {
 3909              		.loc 1 935 0
 3910              		.cfi_startproc
 3911              		@ args = 0, pretend = 0, frame = 16
 3912              		@ frame_needed = 1, uses_anonymous_args = 0
 3913 0000 B0B5     		push	{r4, r5, r7, lr}
 3914              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccxwuSCA.s 			page 85


 3915              		.cfi_offset 4, -16
 3916              		.cfi_offset 5, -12
 3917              		.cfi_offset 7, -8
 3918              		.cfi_offset 14, -4
 3919 0002 84B0     		sub	sp, sp, #16
 3920              		.cfi_def_cfa_offset 32
 3921 0004 00AF     		add	r7, sp, #0
 3922              		.cfi_def_cfa_register 7
 3923 0006 7860     		str	r0, [r7, #4]
 936:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 3924              		.loc 1 936 0
 3925 0008 1B4B     		ldr	r3, .L177+8
 3926 000a 1B68     		ldr	r3, [r3]
 3927 000c 1846     		mov	r0, r3
 3928 000e FFF7FEFF 		bl	__aeabi_ui2d
 3929 0012 0446     		mov	r4, r0
 3930 0014 0D46     		mov	r5, r1
 3931 0016 7868     		ldr	r0, [r7, #4]
 3932 0018 FFF7FEFF 		bl	__aeabi_ui2d
 3933 001c 0246     		mov	r2, r0
 3934 001e 0B46     		mov	r3, r1
 3935 0020 1046     		mov	r0, r2
 3936 0022 1946     		mov	r1, r3
 3937 0024 12A3     		adr	r3, .L177
 3938 0026 D3E90023 		ldrd	r2, [r3]
 3939 002a FFF7FEFF 		bl	__aeabi_dmul
 3940 002e 0246     		mov	r2, r0
 3941 0030 0B46     		mov	r3, r1
 3942 0032 1046     		mov	r0, r2
 3943 0034 1946     		mov	r1, r3
 3944 0036 4FF00002 		mov	r2, #0
 3945 003a 104B     		ldr	r3, .L177+12
 3946 003c FFF7FEFF 		bl	__aeabi_ddiv
 3947 0040 0246     		mov	r2, r0
 3948 0042 0B46     		mov	r3, r1
 3949 0044 2046     		mov	r0, r4
 3950 0046 2946     		mov	r1, r5
 3951 0048 FFF7FEFF 		bl	__aeabi_dadd
 3952 004c 0246     		mov	r2, r0
 3953 004e 0B46     		mov	r3, r1
 3954 0050 1046     		mov	r0, r2
 3955 0052 1946     		mov	r1, r3
 3956 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 3957 0058 0346     		mov	r3, r0
 3958 005a FB60     		str	r3, [r7, #12]
 3959              	.L176:
 937:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 3960              		.loc 1 937 0 discriminator 1
 3961 005c 064B     		ldr	r3, .L177+8
 3962 005e 1A68     		ldr	r2, [r3]
 3963 0060 FB68     		ldr	r3, [r7, #12]
 3964 0062 9A42     		cmp	r2, r3
 3965 0064 FAD3     		bcc	.L176
 938:bluetooth_rxtx.c **** }
 3966              		.loc 1 938 0
 3967 0066 1037     		adds	r7, r7, #16
 3968              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccxwuSCA.s 			page 86


 3969 0068 BD46     		mov	sp, r7
 3970              		.cfi_def_cfa_register 13
 3971              		@ sp needed
 3972 006a B0BD     		pop	{r4, r5, r7, pc}
 3973              	.L178:
 3974 006c AFF30080 		.align	3
 3975              	.L177:
 3976 0070 00000000 		.word	0
 3977 0074 00887340 		.word	1081313280
 3978 0078 00000000 		.word	clkn
 3979 007c 00408F40 		.word	1083129856
 3980              		.cfi_endproc
 3981              	.LFE13:
 3983              		.section	.text.dma_init,"ax",%progbits
 3984              		.align	2
 3985              		.thumb
 3986              		.thumb_func
 3988              	dma_init:
 3989              	.LFB14:
 939:bluetooth_rxtx.c **** 
 940:bluetooth_rxtx.c **** static void dma_init()
 941:bluetooth_rxtx.c **** {
 3990              		.loc 1 941 0
 3991              		.cfi_startproc
 3992              		@ args = 0, pretend = 0, frame = 0
 3993              		@ frame_needed = 1, uses_anonymous_args = 0
 3994              		@ link register save eliminated.
 3995 0000 80B4     		push	{r7}
 3996              		.cfi_def_cfa_offset 4
 3997              		.cfi_offset 7, -4
 3998 0002 00AF     		add	r7, sp, #0
 3999              		.cfi_def_cfa_register 7
 942:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 943:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4000              		.loc 1 943 0
 4001 0004 3F4A     		ldr	r2, .L181
 4002 0006 3F4B     		ldr	r3, .L181
 4003 0008 1B68     		ldr	r3, [r3]
 4004 000a 43F00053 		orr	r3, r3, #536870912
 4005 000e 1360     		str	r3, [r2]
 944:bluetooth_rxtx.c **** 
 945:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
 946:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4006              		.loc 1 946 0
 4007 0010 3D4B     		ldr	r3, .L181+4
 4008 0012 0022     		movs	r2, #0
 4009 0014 1A60     		str	r2, [r3]
 947:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4010              		.loc 1 947 0
 4011 0016 3D4B     		ldr	r3, .L181+8
 4012 0018 0022     		movs	r2, #0
 4013 001a 1A60     		str	r2, [r3]
 948:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4014              		.loc 1 948 0
 4015 001c 3C4B     		ldr	r3, .L181+12
 4016 001e 0022     		movs	r2, #0
 4017 0020 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 87


 949:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4018              		.loc 1 949 0
 4019 0022 3C4B     		ldr	r3, .L181+16
 4020 0024 0022     		movs	r2, #0
 4021 0026 1A60     		str	r2, [r3]
 950:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4022              		.loc 1 950 0
 4023 0028 3B4B     		ldr	r3, .L181+20
 4024 002a 0022     		movs	r2, #0
 4025 002c 1A60     		str	r2, [r3]
 951:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4026              		.loc 1 951 0
 4027 002e 3B4B     		ldr	r3, .L181+24
 4028 0030 0022     		movs	r2, #0
 4029 0032 1A60     		str	r2, [r3]
 952:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4030              		.loc 1 952 0
 4031 0034 3A4B     		ldr	r3, .L181+28
 4032 0036 0022     		movs	r2, #0
 4033 0038 1A60     		str	r2, [r3]
 953:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4034              		.loc 1 953 0
 4035 003a 3A4B     		ldr	r3, .L181+32
 4036 003c 0022     		movs	r2, #0
 4037 003e 1A60     		str	r2, [r3]
 954:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4038              		.loc 1 954 0
 4039 0040 394B     		ldr	r3, .L181+36
 4040 0042 FF22     		movs	r2, #255
 4041 0044 1A60     		str	r2, [r3]
 955:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4042              		.loc 1 955 0
 4043 0046 394B     		ldr	r3, .L181+40
 4044 0048 FF22     		movs	r2, #255
 4045 004a 1A60     		str	r2, [r3]
 956:bluetooth_rxtx.c **** 
 957:bluetooth_rxtx.c **** 	/* DMA linked lists */
 958:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4046              		.loc 1 958 0
 4047 004c 384B     		ldr	r3, .L181+44
 4048 004e 394A     		ldr	r2, .L181+48
 4049 0050 1A60     		str	r2, [r3]
 959:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4050              		.loc 1 959 0
 4051 0052 394A     		ldr	r2, .L181+52
 4052 0054 364B     		ldr	r3, .L181+44
 4053 0056 5A60     		str	r2, [r3, #4]
 960:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4054              		.loc 1 960 0
 4055 0058 384A     		ldr	r2, .L181+56
 4056 005a 354B     		ldr	r3, .L181+44
 4057 005c 9A60     		str	r2, [r3, #8]
 961:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4058              		.loc 1 961 0
 4059 005e 344B     		ldr	r3, .L181+44
 4060 0060 374A     		ldr	r2, .L181+60
 4061 0062 DA60     		str	r2, [r3, #12]
ARM GAS  /tmp/ccxwuSCA.s 			page 88


 962:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 963:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 964:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 965:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 966:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 967:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 968:bluetooth_rxtx.c **** 
 969:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4062              		.loc 1 969 0
 4063 0064 354B     		ldr	r3, .L181+56
 4064 0066 334A     		ldr	r2, .L181+48
 4065 0068 1A60     		str	r2, [r3]
 970:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4066              		.loc 1 970 0
 4067 006a 364A     		ldr	r2, .L181+64
 4068 006c 334B     		ldr	r3, .L181+56
 4069 006e 5A60     		str	r2, [r3, #4]
 971:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4070              		.loc 1 971 0
 4071 0070 2F4A     		ldr	r2, .L181+44
 4072 0072 324B     		ldr	r3, .L181+56
 4073 0074 9A60     		str	r2, [r3, #8]
 972:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4074              		.loc 1 972 0
 4075 0076 314B     		ldr	r3, .L181+56
 4076 0078 314A     		ldr	r2, .L181+60
 4077 007a DA60     		str	r2, [r3, #12]
 973:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 974:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 975:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 976:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 977:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 978:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 979:bluetooth_rxtx.c **** 
 980:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
 981:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4078              		.loc 1 981 0
 4079 007c 324B     		ldr	r3, .L181+68
 4080 007e 4FF08062 		mov	r2, #67108864
 4081 0082 1A60     		str	r2, [r3]
 982:bluetooth_rxtx.c **** 
 983:bluetooth_rxtx.c **** 	/* enable DMA globally */
 984:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4082              		.loc 1 984 0
 4083 0084 314B     		ldr	r3, .L181+72
 4084 0086 0122     		movs	r2, #1
 4085 0088 1A60     		str	r2, [r3]
 985:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4086              		.loc 1 985 0
 4087 008a 00BF     		nop
 4088              	.L180:
 4089              		.loc 1 985 0 is_stmt 0 discriminator 1
 4090 008c 2F4B     		ldr	r3, .L181+72
 4091 008e 1B68     		ldr	r3, [r3]
 4092 0090 03F00103 		and	r3, r3, #1
 4093 0094 002B     		cmp	r3, #0
 4094 0096 F9D0     		beq	.L180
ARM GAS  /tmp/ccxwuSCA.s 			page 89


 986:bluetooth_rxtx.c **** 
 987:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
 988:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4095              		.loc 1 988 0 is_stmt 1
 4096 0098 2D4A     		ldr	r2, .L181+76
 4097 009a 254B     		ldr	r3, .L181+44
 4098 009c 1B68     		ldr	r3, [r3]
 4099 009e 1360     		str	r3, [r2]
 989:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4100              		.loc 1 989 0
 4101 00a0 2C4A     		ldr	r2, .L181+80
 4102 00a2 234B     		ldr	r3, .L181+44
 4103 00a4 5B68     		ldr	r3, [r3, #4]
 4104 00a6 1360     		str	r3, [r2]
 990:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4105              		.loc 1 990 0
 4106 00a8 2B4A     		ldr	r2, .L181+84
 4107 00aa 214B     		ldr	r3, .L181+44
 4108 00ac 9B68     		ldr	r3, [r3, #8]
 4109 00ae 1360     		str	r3, [r2]
 991:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4110              		.loc 1 991 0
 4111 00b0 2A4A     		ldr	r2, .L181+88
 4112 00b2 1F4B     		ldr	r3, .L181+44
 4113 00b4 DB68     		ldr	r3, [r3, #12]
 4114 00b6 1360     		str	r3, [r2]
 992:bluetooth_rxtx.c **** 	DMACC0Config =
 4115              		.loc 1 992 0
 4116 00b8 134B     		ldr	r3, .L181+4
 4117 00ba 4DF20602 		movw	r2, #53254
 4118 00be 1A60     		str	r2, [r3]
 993:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
 994:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
 995:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
 996:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
 997:bluetooth_rxtx.c **** 
 998:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4119              		.loc 1 998 0
 4120 00c0 274B     		ldr	r3, .L181+92
 4121 00c2 1B68     		ldr	r3, [r3]
 4122 00c4 1B0D     		lsrs	r3, r3, #20
 4123 00c6 DBB2     		uxtb	r3, r3
 4124 00c8 264A     		ldr	r2, .L181+96
 4125 00ca 1360     		str	r3, [r2]
 999:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4126              		.loc 1 999 0
 4127 00cc 244B     		ldr	r3, .L181+92
 4128 00ce 1B68     		ldr	r3, [r3]
 4129 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4130 00d4 40F63542 		movw	r2, #3125
 4131 00d8 02FB03F2 		mul	r2, r2, r3
 4132 00dc 224B     		ldr	r3, .L181+100
 4133 00de 1B68     		ldr	r3, [r3]
 4134 00e0 1344     		add	r3, r3, r2
 4135 00e2 224A     		ldr	r2, .L181+104
 4136 00e4 1360     		str	r3, [r2]
1000:bluetooth_rxtx.c **** 	active_buf_channel = channel;
ARM GAS  /tmp/ccxwuSCA.s 			page 90


 4137              		.loc 1 1000 0
 4138 00e6 224B     		ldr	r3, .L181+108
 4139 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4140 00ea 9AB2     		uxth	r2, r3
 4141 00ec 214B     		ldr	r3, .L181+112
 4142 00ee 1A80     		strh	r2, [r3]	@ movhi
1001:bluetooth_rxtx.c **** 
1002:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1003:bluetooth_rxtx.c **** 	rx_tc = 0;
 4143              		.loc 1 1003 0
 4144 00f0 214B     		ldr	r3, .L181+116
 4145 00f2 0022     		movs	r2, #0
 4146 00f4 1A60     		str	r2, [r3]
1004:bluetooth_rxtx.c **** 	rx_err = 0;
 4147              		.loc 1 1004 0
 4148 00f6 214B     		ldr	r3, .L181+120
 4149 00f8 0022     		movs	r2, #0
 4150 00fa 1A60     		str	r2, [r3]
1005:bluetooth_rxtx.c **** }
 4151              		.loc 1 1005 0
 4152 00fc BD46     		mov	sp, r7
 4153              		.cfi_def_cfa_register 13
 4154              		@ sp needed
 4155 00fe 5DF8047B 		ldr	r7, [sp], #4
 4156              		.cfi_restore 7
 4157              		.cfi_def_cfa_offset 0
 4158 0102 7047     		bx	lr
 4159              	.L182:
 4160              		.align	2
 4161              	.L181:
 4162 0104 C4C00F40 		.word	1074774212
 4163 0108 10410050 		.word	1342193936
 4164 010c 30410050 		.word	1342193968
 4165 0110 50410050 		.word	1342194000
 4166 0114 70410050 		.word	1342194032
 4167 0118 90410050 		.word	1342194064
 4168 011c B0410050 		.word	1342194096
 4169 0120 D0410050 		.word	1342194128
 4170 0124 F0410050 		.word	1342194160
 4171 0128 08400050 		.word	1342193672
 4172 012c 10400050 		.word	1342193680
 4173 0130 00000000 		.word	rx_dma_lli1
 4174 0134 08000340 		.word	1073938440
 4175 0138 00000000 		.word	rxbuf1
 4176 013c 00000000 		.word	rx_dma_lli2
 4177 0140 32900088 		.word	-2013229006
 4178 0144 00000000 		.word	rxbuf2
 4179 0148 80E100E0 		.word	-536813184
 4180 014c 30400050 		.word	1342193712
 4181 0150 00410050 		.word	1342193920
 4182 0154 04410050 		.word	1342193924
 4183 0158 08410050 		.word	1342193928
 4184 015c 0C410050 		.word	1342193932
 4185 0160 00000000 		.word	clkn
 4186 0164 00000000 		.word	active_buf_clkn_high
 4187 0168 08400040 		.word	1073758216
 4188 016c 00000000 		.word	active_buf_clk100ns
ARM GAS  /tmp/ccxwuSCA.s 			page 91


 4189 0170 00000000 		.word	channel
 4190 0174 00000000 		.word	active_buf_channel
 4191 0178 00000000 		.word	rx_tc
 4192 017c 00000000 		.word	rx_err
 4193              		.cfi_endproc
 4194              	.LFE14:
 4196              		.section	.text.dma_init_le,"ax",%progbits
 4197              		.align	2
 4198              		.thumb
 4199              		.thumb_func
 4201              	dma_init_le:
 4202              	.LFB15:
1006:bluetooth_rxtx.c **** 
1007:bluetooth_rxtx.c **** static void dma_init_le()
1008:bluetooth_rxtx.c **** {
 4203              		.loc 1 1008 0
 4204              		.cfi_startproc
 4205              		@ args = 0, pretend = 0, frame = 8
 4206              		@ frame_needed = 1, uses_anonymous_args = 0
 4207              		@ link register save eliminated.
 4208 0000 80B4     		push	{r7}
 4209              		.cfi_def_cfa_offset 4
 4210              		.cfi_offset 7, -4
 4211 0002 83B0     		sub	sp, sp, #12
 4212              		.cfi_def_cfa_offset 16
 4213 0004 00AF     		add	r7, sp, #0
 4214              		.cfi_def_cfa_register 7
1009:bluetooth_rxtx.c **** 	int i;
1010:bluetooth_rxtx.c **** 
1011:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1012:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4215              		.loc 1 1012 0
 4216 0006 4B4A     		ldr	r2, .L189
 4217 0008 4A4B     		ldr	r3, .L189
 4218 000a 1B68     		ldr	r3, [r3]
 4219 000c 43F00053 		orr	r3, r3, #536870912
 4220 0010 1360     		str	r3, [r2]
1013:bluetooth_rxtx.c **** 
1014:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1015:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4221              		.loc 1 1015 0
 4222 0012 494B     		ldr	r3, .L189+4
 4223 0014 0022     		movs	r2, #0
 4224 0016 1A60     		str	r2, [r3]
1016:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4225              		.loc 1 1016 0
 4226 0018 484B     		ldr	r3, .L189+8
 4227 001a 0022     		movs	r2, #0
 4228 001c 1A60     		str	r2, [r3]
1017:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4229              		.loc 1 1017 0
 4230 001e 484B     		ldr	r3, .L189+12
 4231 0020 0022     		movs	r2, #0
 4232 0022 1A60     		str	r2, [r3]
1018:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4233              		.loc 1 1018 0
 4234 0024 474B     		ldr	r3, .L189+16
ARM GAS  /tmp/ccxwuSCA.s 			page 92


 4235 0026 0022     		movs	r2, #0
 4236 0028 1A60     		str	r2, [r3]
1019:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4237              		.loc 1 1019 0
 4238 002a 474B     		ldr	r3, .L189+20
 4239 002c 0022     		movs	r2, #0
 4240 002e 1A60     		str	r2, [r3]
1020:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4241              		.loc 1 1020 0
 4242 0030 464B     		ldr	r3, .L189+24
 4243 0032 0022     		movs	r2, #0
 4244 0034 1A60     		str	r2, [r3]
1021:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4245              		.loc 1 1021 0
 4246 0036 464B     		ldr	r3, .L189+28
 4247 0038 0022     		movs	r2, #0
 4248 003a 1A60     		str	r2, [r3]
1022:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4249              		.loc 1 1022 0
 4250 003c 454B     		ldr	r3, .L189+32
 4251 003e 0022     		movs	r2, #0
 4252 0040 1A60     		str	r2, [r3]
1023:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4253              		.loc 1 1023 0
 4254 0042 454B     		ldr	r3, .L189+36
 4255 0044 FF22     		movs	r2, #255
 4256 0046 1A60     		str	r2, [r3]
1024:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4257              		.loc 1 1024 0
 4258 0048 444B     		ldr	r3, .L189+40
 4259 004a FF22     		movs	r2, #255
 4260 004c 1A60     		str	r2, [r3]
1025:bluetooth_rxtx.c **** 
1026:bluetooth_rxtx.c **** 	/* enable DMA globally */
1027:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4261              		.loc 1 1027 0
 4262 004e 444B     		ldr	r3, .L189+44
 4263 0050 0122     		movs	r2, #1
 4264 0052 1A60     		str	r2, [r3]
1028:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4265              		.loc 1 1028 0
 4266 0054 00BF     		nop
 4267              	.L184:
 4268              		.loc 1 1028 0 is_stmt 0 discriminator 1
 4269 0056 424B     		ldr	r3, .L189+44
 4270 0058 1B68     		ldr	r3, [r3]
 4271 005a 03F00103 		and	r3, r3, #1
 4272 005e 002B     		cmp	r3, #0
 4273 0060 F9D0     		beq	.L184
1029:bluetooth_rxtx.c **** 
1030:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4274              		.loc 1 1030 0 is_stmt 1
 4275 0062 0023     		movs	r3, #0
 4276 0064 7B60     		str	r3, [r7, #4]
 4277 0066 2AE0     		b	.L185
 4278              	.L188:
1031:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
ARM GAS  /tmp/ccxwuSCA.s 			page 93


 4279              		.loc 1 1031 0
 4280 0068 3E4A     		ldr	r2, .L189+48
 4281 006a 7B68     		ldr	r3, [r7, #4]
 4282 006c 1B01     		lsls	r3, r3, #4
 4283 006e 1344     		add	r3, r3, r2
 4284 0070 3D4A     		ldr	r2, .L189+52
 4285 0072 1A60     		str	r2, [r3]
1032:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4286              		.loc 1 1032 0
 4287 0074 7B68     		ldr	r3, [r7, #4]
 4288 0076 9B00     		lsls	r3, r3, #2
 4289 0078 3C4A     		ldr	r2, .L189+56
 4290 007a 1344     		add	r3, r3, r2
 4291 007c 1946     		mov	r1, r3
 4292 007e 394A     		ldr	r2, .L189+48
 4293 0080 7B68     		ldr	r3, [r7, #4]
 4294 0082 1B01     		lsls	r3, r3, #4
 4295 0084 1344     		add	r3, r3, r2
 4296 0086 5960     		str	r1, [r3, #4]
1033:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4297              		.loc 1 1033 0
 4298 0088 7B68     		ldr	r3, [r7, #4]
 4299 008a 092B     		cmp	r3, #9
 4300 008c 06DC     		bgt	.L186
 4301              		.loc 1 1033 0 is_stmt 0 discriminator 1
 4302 008e 7B68     		ldr	r3, [r7, #4]
 4303 0090 0133     		adds	r3, r3, #1
 4304 0092 1B01     		lsls	r3, r3, #4
 4305 0094 334A     		ldr	r2, .L189+48
 4306 0096 1344     		add	r3, r3, r2
 4307 0098 1A46     		mov	r2, r3
 4308 009a 00E0     		b	.L187
 4309              	.L186:
 4310              		.loc 1 1033 0 discriminator 2
 4311 009c 0022     		movs	r2, #0
 4312              	.L187:
 4313              		.loc 1 1033 0 discriminator 4
 4314 009e 3149     		ldr	r1, .L189+48
 4315 00a0 7B68     		ldr	r3, [r7, #4]
 4316 00a2 1B01     		lsls	r3, r3, #4
 4317 00a4 0B44     		add	r3, r3, r1
 4318 00a6 0833     		adds	r3, r3, #8
 4319 00a8 1A60     		str	r2, [r3]
1034:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4320              		.loc 1 1034 0 is_stmt 1 discriminator 4
 4321 00aa 2E4A     		ldr	r2, .L189+48
 4322 00ac 7B68     		ldr	r3, [r7, #4]
 4323 00ae 1B01     		lsls	r3, r3, #4
 4324 00b0 1344     		add	r3, r3, r2
 4325 00b2 0833     		adds	r3, r3, #8
 4326 00b4 2E4A     		ldr	r2, .L189+60
 4327 00b6 5A60     		str	r2, [r3, #4]
1030:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4328              		.loc 1 1030 0 discriminator 4
 4329 00b8 7B68     		ldr	r3, [r7, #4]
 4330 00ba 0133     		adds	r3, r3, #1
 4331 00bc 7B60     		str	r3, [r7, #4]
ARM GAS  /tmp/ccxwuSCA.s 			page 94


 4332              	.L185:
1030:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4333              		.loc 1 1030 0 is_stmt 0 discriminator 2
 4334 00be 7B68     		ldr	r3, [r7, #4]
 4335 00c0 0A2B     		cmp	r3, #10
 4336 00c2 D1DD     		ble	.L188
1035:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1036:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1037:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1038:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1039:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1040:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1041:bluetooth_rxtx.c **** 	}
1042:bluetooth_rxtx.c **** 
1043:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1044:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4337              		.loc 1 1044 0 is_stmt 1
 4338 00c4 2B4A     		ldr	r2, .L189+64
 4339 00c6 274B     		ldr	r3, .L189+48
 4340 00c8 1B68     		ldr	r3, [r3]
 4341 00ca 1360     		str	r3, [r2]
1045:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4342              		.loc 1 1045 0
 4343 00cc 2A4A     		ldr	r2, .L189+68
 4344 00ce 254B     		ldr	r3, .L189+48
 4345 00d0 5B68     		ldr	r3, [r3, #4]
 4346 00d2 1360     		str	r3, [r2]
1046:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4347              		.loc 1 1046 0
 4348 00d4 294A     		ldr	r2, .L189+72
 4349 00d6 234B     		ldr	r3, .L189+48
 4350 00d8 9B68     		ldr	r3, [r3, #8]
 4351 00da 1360     		str	r3, [r2]
1047:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4352              		.loc 1 1047 0
 4353 00dc 284A     		ldr	r2, .L189+76
 4354 00de 214B     		ldr	r3, .L189+48
 4355 00e0 DB68     		ldr	r3, [r3, #12]
 4356 00e2 1360     		str	r3, [r2]
1048:bluetooth_rxtx.c **** 	DMACC0Config =
 4357              		.loc 1 1048 0
 4358 00e4 144B     		ldr	r3, .L189+4
 4359 00e6 4DF20602 		movw	r2, #53254
 4360 00ea 1A60     		str	r2, [r3]
1049:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1050:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1051:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1052:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1053:bluetooth_rxtx.c **** 
1054:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4361              		.loc 1 1054 0
 4362 00ec 254B     		ldr	r3, .L189+80
 4363 00ee 1B68     		ldr	r3, [r3]
 4364 00f0 1B0D     		lsrs	r3, r3, #20
 4365 00f2 DBB2     		uxtb	r3, r3
 4366 00f4 244A     		ldr	r2, .L189+84
 4367 00f6 1360     		str	r3, [r2]
ARM GAS  /tmp/ccxwuSCA.s 			page 95


1055:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4368              		.loc 1 1055 0
 4369 00f8 224B     		ldr	r3, .L189+80
 4370 00fa 1B68     		ldr	r3, [r3]
 4371 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4372 0100 40F63542 		movw	r2, #3125
 4373 0104 02FB03F2 		mul	r2, r2, r3
 4374 0108 204B     		ldr	r3, .L189+88
 4375 010a 1B68     		ldr	r3, [r3]
 4376 010c 1344     		add	r3, r3, r2
 4377 010e 204A     		ldr	r2, .L189+92
 4378 0110 1360     		str	r3, [r2]
1056:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4379              		.loc 1 1056 0
 4380 0112 204B     		ldr	r3, .L189+96
 4381 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4382 0116 9AB2     		uxth	r2, r3
 4383 0118 1F4B     		ldr	r3, .L189+100
 4384 011a 1A80     		strh	r2, [r3]	@ movhi
1057:bluetooth_rxtx.c **** 
1058:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1059:bluetooth_rxtx.c **** 	rx_tc = 0;
 4385              		.loc 1 1059 0
 4386 011c 1F4B     		ldr	r3, .L189+104
 4387 011e 0022     		movs	r2, #0
 4388 0120 1A60     		str	r2, [r3]
1060:bluetooth_rxtx.c **** 	rx_err = 0;
 4389              		.loc 1 1060 0
 4390 0122 1F4B     		ldr	r3, .L189+108
 4391 0124 0022     		movs	r2, #0
 4392 0126 1A60     		str	r2, [r3]
1061:bluetooth_rxtx.c **** }
 4393              		.loc 1 1061 0
 4394 0128 0C37     		adds	r7, r7, #12
 4395              		.cfi_def_cfa_offset 4
 4396 012a BD46     		mov	sp, r7
 4397              		.cfi_def_cfa_register 13
 4398              		@ sp needed
 4399 012c 5DF8047B 		ldr	r7, [sp], #4
 4400              		.cfi_restore 7
 4401              		.cfi_def_cfa_offset 0
 4402 0130 7047     		bx	lr
 4403              	.L190:
 4404 0132 00BF     		.align	2
 4405              	.L189:
 4406 0134 C4C00F40 		.word	1074774212
 4407 0138 10410050 		.word	1342193936
 4408 013c 30410050 		.word	1342193968
 4409 0140 50410050 		.word	1342194000
 4410 0144 70410050 		.word	1342194032
 4411 0148 90410050 		.word	1342194064
 4412 014c B0410050 		.word	1342194096
 4413 0150 D0410050 		.word	1342194128
 4414 0154 F0410050 		.word	1342194160
 4415 0158 08400050 		.word	1342193672
 4416 015c 10400050 		.word	1342193680
 4417 0160 30400050 		.word	1342193712
ARM GAS  /tmp/ccxwuSCA.s 			page 96


 4418 0164 00000000 		.word	le_dma_lli
 4419 0168 08000340 		.word	1073938440
 4420 016c 00000000 		.word	rxbuf1
 4421 0170 04100088 		.word	-2013261820
 4422 0174 00410050 		.word	1342193920
 4423 0178 04410050 		.word	1342193924
 4424 017c 08410050 		.word	1342193928
 4425 0180 0C410050 		.word	1342193932
 4426 0184 00000000 		.word	clkn
 4427 0188 00000000 		.word	active_buf_clkn_high
 4428 018c 08400040 		.word	1073758216
 4429 0190 00000000 		.word	active_buf_clk100ns
 4430 0194 00000000 		.word	channel
 4431 0198 00000000 		.word	active_buf_channel
 4432 019c 00000000 		.word	rx_tc
 4433 01a0 00000000 		.word	rx_err
 4434              		.cfi_endproc
 4435              	.LFE15:
 4437              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4438              		.align	2
 4439              		.global	bt_stream_dma_handler
 4440              		.thumb
 4441              		.thumb_func
 4443              	bt_stream_dma_handler:
 4444              	.LFB16:
1062:bluetooth_rxtx.c **** 
1063:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4445              		.loc 1 1063 0
 4446              		.cfi_startproc
 4447              		@ args = 0, pretend = 0, frame = 0
 4448              		@ frame_needed = 1, uses_anonymous_args = 0
 4449              		@ link register save eliminated.
 4450 0000 80B4     		push	{r7}
 4451              		.cfi_def_cfa_offset 4
 4452              		.cfi_offset 7, -4
 4453 0002 00AF     		add	r7, sp, #0
 4454              		.cfi_def_cfa_register 7
1064:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4455              		.loc 1 1064 0
 4456 0004 254B     		ldr	r3, .L194
 4457 0006 1B68     		ldr	r3, [r3]
 4458 0008 254A     		ldr	r2, .L194+4
 4459 000a 1360     		str	r3, [r2]
1065:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4460              		.loc 1 1065 0
 4461 000c 254B     		ldr	r3, .L194+8
 4462 000e 1B68     		ldr	r3, [r3]
 4463 0010 1B0D     		lsrs	r3, r3, #20
 4464 0012 DBB2     		uxtb	r3, r3
 4465 0014 214A     		ldr	r2, .L194
 4466 0016 1360     		str	r3, [r2]
1066:bluetooth_rxtx.c **** 
1067:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4467              		.loc 1 1067 0
 4468 0018 234B     		ldr	r3, .L194+12
 4469 001a 1B68     		ldr	r3, [r3]
 4470 001c 234A     		ldr	r2, .L194+16
ARM GAS  /tmp/ccxwuSCA.s 			page 97


 4471 001e 1360     		str	r3, [r2]
1068:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4472              		.loc 1 1068 0
 4473 0020 204B     		ldr	r3, .L194+8
 4474 0022 1B68     		ldr	r3, [r3]
 4475 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4476 0028 40F63542 		movw	r2, #3125
 4477 002c 02FB03F2 		mul	r2, r2, r3
 4478 0030 1F4B     		ldr	r3, .L194+20
 4479 0032 1B68     		ldr	r3, [r3]
 4480 0034 1344     		add	r3, r3, r2
 4481 0036 1C4A     		ldr	r2, .L194+12
 4482 0038 1360     		str	r3, [r2]
1069:bluetooth_rxtx.c **** 
1070:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4483              		.loc 1 1070 0
 4484 003a 1E4B     		ldr	r3, .L194+24
 4485 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4486 003e 9AB2     		uxth	r2, r3
 4487 0040 1D4B     		ldr	r3, .L194+28
 4488 0042 1A80     		strh	r2, [r3]	@ movhi
1071:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4489              		.loc 1 1071 0
 4490 0044 1D4B     		ldr	r3, .L194+32
 4491 0046 1B88     		ldrh	r3, [r3]	@ movhi
 4492 0048 9AB2     		uxth	r2, r3
 4493 004a 1A4B     		ldr	r3, .L194+24
 4494 004c 1A80     		strh	r2, [r3]	@ movhi
1072:bluetooth_rxtx.c **** 
1073:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1074:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4495              		.loc 1 1074 0
 4496 004e 1C4B     		ldr	r3, .L194+36
 4497 0050 1B68     		ldr	r3, [r3]
 4498 0052 03F00103 		and	r3, r3, #1
 4499 0056 002B     		cmp	r3, #0
 4500 0058 1BD0     		beq	.L191
1075:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4501              		.loc 1 1075 0
 4502 005a 1A4B     		ldr	r3, .L194+40
 4503 005c 1B68     		ldr	r3, [r3]
 4504 005e 03F00103 		and	r3, r3, #1
 4505 0062 002B     		cmp	r3, #0
 4506 0064 07D0     		beq	.L193
1076:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4507              		.loc 1 1076 0
 4508 0066 184B     		ldr	r3, .L194+44
 4509 0068 0122     		movs	r2, #1
 4510 006a 1A60     		str	r2, [r3]
1077:bluetooth_rxtx.c **** 			++rx_tc;
 4511              		.loc 1 1077 0
 4512 006c 174B     		ldr	r3, .L194+48
 4513 006e 1B68     		ldr	r3, [r3]
 4514 0070 0133     		adds	r3, r3, #1
 4515 0072 164A     		ldr	r2, .L194+48
 4516 0074 1360     		str	r3, [r2]
 4517              	.L193:
ARM GAS  /tmp/ccxwuSCA.s 			page 98


1078:bluetooth_rxtx.c **** 		}
1079:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4518              		.loc 1 1079 0
 4519 0076 164B     		ldr	r3, .L194+52
 4520 0078 1B68     		ldr	r3, [r3]
 4521 007a 03F00103 		and	r3, r3, #1
 4522 007e 002B     		cmp	r3, #0
 4523 0080 07D0     		beq	.L191
1080:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4524              		.loc 1 1080 0
 4525 0082 144B     		ldr	r3, .L194+56
 4526 0084 0122     		movs	r2, #1
 4527 0086 1A60     		str	r2, [r3]
1081:bluetooth_rxtx.c **** 			++rx_err;
 4528              		.loc 1 1081 0
 4529 0088 134B     		ldr	r3, .L194+60
 4530 008a 1B68     		ldr	r3, [r3]
 4531 008c 0133     		adds	r3, r3, #1
 4532 008e 124A     		ldr	r2, .L194+60
 4533 0090 1360     		str	r3, [r2]
 4534              	.L191:
1082:bluetooth_rxtx.c **** 		}
1083:bluetooth_rxtx.c **** 	}
1084:bluetooth_rxtx.c **** }
 4535              		.loc 1 1084 0
 4536 0092 BD46     		mov	sp, r7
 4537              		.cfi_def_cfa_register 13
 4538              		@ sp needed
 4539 0094 5DF8047B 		ldr	r7, [sp], #4
 4540              		.cfi_restore 7
 4541              		.cfi_def_cfa_offset 0
 4542 0098 7047     		bx	lr
 4543              	.L195:
 4544 009a 00BF     		.align	2
 4545              	.L194:
 4546 009c 00000000 		.word	active_buf_clkn_high
 4547 00a0 00000000 		.word	idle_buf_clkn_high
 4548 00a4 00000000 		.word	clkn
 4549 00a8 00000000 		.word	active_buf_clk100ns
 4550 00ac 00000000 		.word	idle_buf_clk100ns
 4551 00b0 08400040 		.word	1073758216
 4552 00b4 00000000 		.word	active_buf_channel
 4553 00b8 00000000 		.word	idle_buf_channel
 4554 00bc 00000000 		.word	channel
 4555 00c0 00400050 		.word	1342193664
 4556 00c4 04400050 		.word	1342193668
 4557 00c8 08400050 		.word	1342193672
 4558 00cc 00000000 		.word	rx_tc
 4559 00d0 0C400050 		.word	1342193676
 4560 00d4 10400050 		.word	1342193680
 4561 00d8 00000000 		.word	rx_err
 4562              		.cfi_endproc
 4563              	.LFE16:
 4565              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4566              		.align	2
 4567              		.global	DMA_IRQHandler
 4568              		.thumb
ARM GAS  /tmp/ccxwuSCA.s 			page 99


 4569              		.thumb_func
 4571              	DMA_IRQHandler:
 4572              	.LFB17:
1085:bluetooth_rxtx.c **** 
1086:bluetooth_rxtx.c **** void DMA_IRQHandler()
1087:bluetooth_rxtx.c **** {
 4573              		.loc 1 1087 0
 4574              		.cfi_startproc
 4575              		@ args = 0, pretend = 0, frame = 0
 4576              		@ frame_needed = 1, uses_anonymous_args = 0
 4577 0000 80B5     		push	{r7, lr}
 4578              		.cfi_def_cfa_offset 8
 4579              		.cfi_offset 7, -8
 4580              		.cfi_offset 14, -4
 4581 0002 00AF     		add	r7, sp, #0
 4582              		.cfi_def_cfa_register 7
1088:bluetooth_rxtx.c **** 	switch (mode) {
 4583              		.loc 1 1088 0
 4584 0004 124B     		ldr	r3, .L200
 4585 0006 1B78     		ldrb	r3, [r3]
 4586 0008 DBB2     		uxtb	r3, r3
 4587 000a 013B     		subs	r3, r3, #1
 4588 000c 0B2B     		cmp	r3, #11
 4589 000e 1ED8     		bhi	.L196
 4590 0010 01A2     		adr	r2, .L199
 4591 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4592 0016 00BF     		.p2align 2
 4593              	.L199:
 4594 0018 49000000 		.word	.L198+1
 4595 001c 4F000000 		.word	.L196+1
 4596 0020 4F000000 		.word	.L196+1
 4597 0024 49000000 		.word	.L198+1
 4598 0028 4F000000 		.word	.L196+1
 4599 002c 4F000000 		.word	.L196+1
 4600 0030 4F000000 		.word	.L196+1
 4601 0034 49000000 		.word	.L198+1
 4602 0038 49000000 		.word	.L198+1
 4603 003c 49000000 		.word	.L198+1
 4604 0040 4F000000 		.word	.L196+1
 4605 0044 49000000 		.word	.L198+1
 4606              		.p2align 1
 4607              	.L198:
1089:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1090:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1091:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1092:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1093:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1094:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1095:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4608              		.loc 1 1095 0
 4609 0048 FFF7FEFF 		bl	bt_stream_dma_handler
1096:bluetooth_rxtx.c **** 			break;
 4610              		.loc 1 1096 0
 4611 004c 00BF     		nop
 4612              	.L196:
1097:bluetooth_rxtx.c **** 	}
1098:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccxwuSCA.s 			page 100


 4613              		.loc 1 1098 0
 4614 004e 80BD     		pop	{r7, pc}
 4615              	.L201:
 4616              		.align	2
 4617              	.L200:
 4618 0050 00000000 		.word	mode
 4619              		.cfi_endproc
 4620              	.LFE17:
 4622              		.section	.text.dio_ssp_start,"ax",%progbits
 4623              		.align	2
 4624              		.thumb
 4625              		.thumb_func
 4627              	dio_ssp_start:
 4628              	.LFB18:
1099:bluetooth_rxtx.c **** 
1100:bluetooth_rxtx.c **** static void dio_ssp_start()
1101:bluetooth_rxtx.c **** {
 4629              		.loc 1 1101 0
 4630              		.cfi_startproc
 4631              		@ args = 0, pretend = 0, frame = 0
 4632              		@ frame_needed = 1, uses_anonymous_args = 0
 4633              		@ link register save eliminated.
 4634 0000 80B4     		push	{r7}
 4635              		.cfi_def_cfa_offset 4
 4636              		.cfi_offset 7, -4
 4637 0002 00AF     		add	r7, sp, #0
 4638              		.cfi_def_cfa_register 7
1102:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1103:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4639              		.loc 1 1103 0
 4640 0004 104B     		ldr	r3, .L203
 4641 0006 4FF08052 		mov	r2, #268435456
 4642 000a 1A60     		str	r2, [r3]
1104:bluetooth_rxtx.c **** 
1105:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1106:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4643              		.loc 1 1106 0
 4644 000c 0F4A     		ldr	r2, .L203+4
 4645 000e 0F4B     		ldr	r3, .L203+4
 4646 0010 1B68     		ldr	r3, [r3]
 4647 0012 43F00103 		orr	r3, r3, #1
 4648 0016 1360     		str	r3, [r2]
1107:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4649              		.loc 1 1107 0
 4650 0018 0D4A     		ldr	r2, .L203+8
 4651 001a 0D4B     		ldr	r3, .L203+8
 4652 001c 1B68     		ldr	r3, [r3]
 4653 001e 43F00203 		orr	r3, r3, #2
 4654 0022 1360     		str	r3, [r2]
1108:bluetooth_rxtx.c **** 	
1109:bluetooth_rxtx.c **** 	/* enable DMA */
1110:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 4655              		.loc 1 1110 0
 4656 0024 0B4A     		ldr	r2, .L203+12
 4657 0026 0B4B     		ldr	r3, .L203+12
 4658 0028 1B68     		ldr	r3, [r3]
 4659 002a 43F00103 		orr	r3, r3, #1
ARM GAS  /tmp/ccxwuSCA.s 			page 101


 4660 002e 1360     		str	r3, [r2]
1111:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4661              		.loc 1 1111 0
 4662 0030 094B     		ldr	r3, .L203+16
 4663 0032 4FF08062 		mov	r2, #67108864
 4664 0036 1A60     		str	r2, [r3]
1112:bluetooth_rxtx.c **** 
1113:bluetooth_rxtx.c **** 	/* activate slave select pin */
1114:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4665              		.loc 1 1114 0
 4666 0038 084B     		ldr	r3, .L203+20
 4667 003a 4FF08052 		mov	r2, #268435456
 4668 003e 1A60     		str	r2, [r3]
1115:bluetooth_rxtx.c **** }
 4669              		.loc 1 1115 0
 4670 0040 BD46     		mov	sp, r7
 4671              		.cfi_def_cfa_register 13
 4672              		@ sp needed
 4673 0042 5DF8047B 		ldr	r7, [sp], #4
 4674              		.cfi_restore 7
 4675              		.cfi_def_cfa_offset 0
 4676 0046 7047     		bx	lr
 4677              	.L204:
 4678              		.align	2
 4679              	.L203:
 4680 0048 98C00920 		.word	537510040
 4681 004c 24000340 		.word	1073938468
 4682 0050 04000340 		.word	1073938436
 4683 0054 10410050 		.word	1342193936
 4684 0058 00E100E0 		.word	-536813312
 4685 005c 9CC00920 		.word	537510044
 4686              		.cfi_endproc
 4687              	.LFE18:
 4689              		.section	.text.dio_ssp_stop,"ax",%progbits
 4690              		.align	2
 4691              		.thumb
 4692              		.thumb_func
 4694              	dio_ssp_stop:
 4695              	.LFB19:
1116:bluetooth_rxtx.c **** 
1117:bluetooth_rxtx.c **** static void dio_ssp_stop()
1118:bluetooth_rxtx.c **** {
 4696              		.loc 1 1118 0
 4697              		.cfi_startproc
 4698              		@ args = 0, pretend = 0, frame = 0
 4699              		@ frame_needed = 1, uses_anonymous_args = 0
 4700              		@ link register save eliminated.
 4701 0000 80B4     		push	{r7}
 4702              		.cfi_def_cfa_offset 4
 4703              		.cfi_offset 7, -4
 4704 0002 00AF     		add	r7, sp, #0
 4705              		.cfi_def_cfa_register 7
1119:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1120:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4706              		.loc 1 1120 0
 4707 0004 214B     		ldr	r3, .L207
 4708 0006 4FF08052 		mov	r2, #268435456
ARM GAS  /tmp/ccxwuSCA.s 			page 102


 4709 000a 1A60     		str	r2, [r3]
1121:bluetooth_rxtx.c **** 
1122:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1123:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 4710              		.loc 1 1123 0
 4711 000c 204A     		ldr	r2, .L207+4
 4712 000e 204B     		ldr	r3, .L207+4
 4713 0010 1B68     		ldr	r3, [r3]
 4714 0012 23F00103 		bic	r3, r3, #1
 4715 0016 1360     		str	r3, [r2]
1124:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 4716              		.loc 1 1124 0
 4717 0018 1E4A     		ldr	r2, .L207+8
 4718 001a 1E4B     		ldr	r3, .L207+8
 4719 001c 1B68     		ldr	r3, [r3]
 4720 001e 23F00203 		bic	r3, r3, #2
 4721 0022 1360     		str	r3, [r2]
1125:bluetooth_rxtx.c **** 
1126:bluetooth_rxtx.c **** 
1127:bluetooth_rxtx.c **** 	// disable DMA engine:
1128:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1129:bluetooth_rxtx.c **** 
1130:bluetooth_rxtx.c **** 	// disable DMA interrupts
1131:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4722              		.loc 1 1131 0
 4723 0024 1C4B     		ldr	r3, .L207+12
 4724 0026 4FF08062 		mov	r2, #67108864
 4725 002a 1A60     		str	r2, [r3]
1132:bluetooth_rxtx.c **** 
1133:bluetooth_rxtx.c **** 	// disable active channels
1134:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4726              		.loc 1 1134 0
 4727 002c 1B4B     		ldr	r3, .L207+16
 4728 002e 0022     		movs	r2, #0
 4729 0030 1A60     		str	r2, [r3]
1135:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4730              		.loc 1 1135 0
 4731 0032 1B4B     		ldr	r3, .L207+20
 4732 0034 0022     		movs	r2, #0
 4733 0036 1A60     		str	r2, [r3]
1136:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4734              		.loc 1 1136 0
 4735 0038 1A4B     		ldr	r3, .L207+24
 4736 003a 0022     		movs	r2, #0
 4737 003c 1A60     		str	r2, [r3]
1137:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4738              		.loc 1 1137 0
 4739 003e 1A4B     		ldr	r3, .L207+28
 4740 0040 0022     		movs	r2, #0
 4741 0042 1A60     		str	r2, [r3]
1138:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4742              		.loc 1 1138 0
 4743 0044 194B     		ldr	r3, .L207+32
 4744 0046 0022     		movs	r2, #0
 4745 0048 1A60     		str	r2, [r3]
1139:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4746              		.loc 1 1139 0
ARM GAS  /tmp/ccxwuSCA.s 			page 103


 4747 004a 194B     		ldr	r3, .L207+36
 4748 004c 0022     		movs	r2, #0
 4749 004e 1A60     		str	r2, [r3]
1140:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4750              		.loc 1 1140 0
 4751 0050 184B     		ldr	r3, .L207+40
 4752 0052 0022     		movs	r2, #0
 4753 0054 1A60     		str	r2, [r3]
1141:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4754              		.loc 1 1141 0
 4755 0056 184B     		ldr	r3, .L207+44
 4756 0058 0022     		movs	r2, #0
 4757 005a 1A60     		str	r2, [r3]
1142:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4758              		.loc 1 1142 0
 4759 005c 174B     		ldr	r3, .L207+48
 4760 005e FF22     		movs	r2, #255
 4761 0060 1A60     		str	r2, [r3]
1143:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4762              		.loc 1 1143 0
 4763 0062 174B     		ldr	r3, .L207+52
 4764 0064 FF22     		movs	r2, #255
 4765 0066 1A60     		str	r2, [r3]
1144:bluetooth_rxtx.c **** 
1145:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1146:bluetooth_rxtx.c **** 	// register.
1147:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 4766              		.loc 1 1147 0
 4767 0068 164A     		ldr	r2, .L207+56
 4768 006a 164B     		ldr	r3, .L207+56
 4769 006c 1B68     		ldr	r3, [r3]
 4770 006e 23F00103 		bic	r3, r3, #1
 4771 0072 1360     		str	r3, [r2]
1148:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 4772              		.loc 1 1148 0
 4773 0074 00BF     		nop
 4774              	.L206:
 4775              		.loc 1 1148 0 is_stmt 0 discriminator 1
 4776 0076 134B     		ldr	r3, .L207+56
 4777 0078 1B68     		ldr	r3, [r3]
 4778 007a 03F00103 		and	r3, r3, #1
 4779 007e 002B     		cmp	r3, #0
 4780 0080 F9D1     		bne	.L206
1149:bluetooth_rxtx.c **** }
 4781              		.loc 1 1149 0 is_stmt 1
 4782 0082 BD46     		mov	sp, r7
 4783              		.cfi_def_cfa_register 13
 4784              		@ sp needed
 4785 0084 5DF8047B 		ldr	r7, [sp], #4
 4786              		.cfi_restore 7
 4787              		.cfi_def_cfa_offset 0
 4788 0088 7047     		bx	lr
 4789              	.L208:
 4790 008a 00BF     		.align	2
 4791              	.L207:
 4792 008c 98C00920 		.word	537510040
 4793 0090 24000340 		.word	1073938468
ARM GAS  /tmp/ccxwuSCA.s 			page 104


 4794 0094 04000340 		.word	1073938436
 4795 0098 80E100E0 		.word	-536813184
 4796 009c 10410050 		.word	1342193936
 4797 00a0 30410050 		.word	1342193968
 4798 00a4 50410050 		.word	1342194000
 4799 00a8 70410050 		.word	1342194032
 4800 00ac 90410050 		.word	1342194064
 4801 00b0 B0410050 		.word	1342194096
 4802 00b4 D0410050 		.word	1342194128
 4803 00b8 F0410050 		.word	1342194160
 4804 00bc 08400050 		.word	1342193672
 4805 00c0 10400050 		.word	1342193680
 4806 00c4 30400050 		.word	1342193712
 4807              		.cfi_endproc
 4808              	.LFE19:
 4810              		.section	.text.cc2400_idle,"ax",%progbits
 4811              		.align	2
 4812              		.thumb
 4813              		.thumb_func
 4815              	cc2400_idle:
 4816              	.LFB20:
1150:bluetooth_rxtx.c **** 
1151:bluetooth_rxtx.c **** static void cc2400_idle()
1152:bluetooth_rxtx.c **** {
 4817              		.loc 1 1152 0
 4818              		.cfi_startproc
 4819              		@ args = 0, pretend = 0, frame = 0
 4820              		@ frame_needed = 1, uses_anonymous_args = 0
 4821 0000 80B5     		push	{r7, lr}
 4822              		.cfi_def_cfa_offset 8
 4823              		.cfi_offset 7, -8
 4824              		.cfi_offset 14, -4
 4825 0002 00AF     		add	r7, sp, #0
 4826              		.cfi_def_cfa_register 7
1153:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 4827              		.loc 1 1153 0
 4828 0004 6420     		movs	r0, #100
 4829 0006 FFF7FEFF 		bl	cc2400_strobe
1154:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4830              		.loc 1 1154 0
 4831 000a 00BF     		nop
 4832              	.L210:
 4833              		.loc 1 1154 0 is_stmt 0 discriminator 1
 4834 000c FFF7FEFF 		bl	cc2400_status
 4835 0010 0346     		mov	r3, r0
 4836 0012 03F00403 		and	r3, r3, #4
 4837 0016 002B     		cmp	r3, #0
 4838 0018 F8D1     		bne	.L210
1155:bluetooth_rxtx.c **** 
1156:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1157:bluetooth_rxtx.c **** 	PAEN_CLR;
 4839              		.loc 1 1157 0 is_stmt 1
 4840 001a 0A4B     		ldr	r3, .L211
 4841 001c 8022     		movs	r2, #128
 4842 001e 1A60     		str	r2, [r3]
1158:bluetooth_rxtx.c **** 	HGM_CLR;
 4843              		.loc 1 1158 0
ARM GAS  /tmp/ccxwuSCA.s 			page 105


 4844 0020 084B     		ldr	r3, .L211
 4845 0022 4FF48072 		mov	r2, #256
 4846 0026 1A60     		str	r2, [r3]
1159:bluetooth_rxtx.c **** #endif
1160:bluetooth_rxtx.c **** 
1161:bluetooth_rxtx.c **** 	RXLED_CLR;
 4847              		.loc 1 1161 0
 4848 0028 074B     		ldr	r3, .L211+4
 4849 002a 1022     		movs	r2, #16
 4850 002c 1A60     		str	r2, [r3]
1162:bluetooth_rxtx.c **** 	TXLED_CLR;
 4851              		.loc 1 1162 0
 4852 002e 064B     		ldr	r3, .L211+4
 4853 0030 4FF48072 		mov	r2, #256
 4854 0034 1A60     		str	r2, [r3]
1163:bluetooth_rxtx.c **** 	USRLED_CLR;
 4855              		.loc 1 1163 0
 4856 0036 044B     		ldr	r3, .L211+4
 4857 0038 0222     		movs	r2, #2
 4858 003a 1A60     		str	r2, [r3]
1164:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 4859              		.loc 1 1164 0
 4860 003c 034B     		ldr	r3, .L211+8
 4861 003e 0022     		movs	r2, #0
 4862 0040 1A70     		strb	r2, [r3]
1165:bluetooth_rxtx.c **** }
 4863              		.loc 1 1165 0
 4864 0042 80BD     		pop	{r7, pc}
 4865              	.L212:
 4866              		.align	2
 4867              	.L211:
 4868 0044 5CC00920 		.word	537509980
 4869 0048 3CC00920 		.word	537509948
 4870 004c 00000000 		.word	mode
 4871              		.cfi_endproc
 4872              	.LFE20:
 4874              		.section	.text.cc2400_rx,"ax",%progbits
 4875              		.align	2
 4876              		.thumb
 4877              		.thumb_func
 4879              	cc2400_rx:
 4880              	.LFB21:
1166:bluetooth_rxtx.c **** 
1167:bluetooth_rxtx.c **** /* start un-buffered rx */
1168:bluetooth_rxtx.c **** static void cc2400_rx()
1169:bluetooth_rxtx.c **** {
 4881              		.loc 1 1169 0
 4882              		.cfi_startproc
 4883              		@ args = 0, pretend = 0, frame = 8
 4884              		@ frame_needed = 1, uses_anonymous_args = 0
 4885 0000 80B5     		push	{r7, lr}
 4886              		.cfi_def_cfa_offset 8
 4887              		.cfi_offset 7, -8
 4888              		.cfi_offset 14, -4
 4889 0002 82B0     		sub	sp, sp, #8
 4890              		.cfi_def_cfa_offset 16
 4891 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccxwuSCA.s 			page 106


 4892              		.cfi_def_cfa_register 7
1170:bluetooth_rxtx.c **** 	u16 mdmctrl;
1171:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4893              		.loc 1 1171 0
 4894 0006 2A4B     		ldr	r3, .L220
 4895 0008 1B78     		ldrb	r3, [r3]
 4896 000a DBB2     		uxtb	r3, r3
 4897 000c 002B     		cmp	r3, #0
 4898 000e 02D1     		bne	.L214
1172:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4899              		.loc 1 1172 0
 4900 0010 2923     		movs	r3, #41
 4901 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 4902 0014 08E0     		b	.L215
 4903              	.L214:
1173:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4904              		.loc 1 1173 0
 4905 0016 264B     		ldr	r3, .L220
 4906 0018 1B78     		ldrb	r3, [r3]
 4907 001a DBB2     		uxtb	r3, r3
 4908 001c 012B     		cmp	r3, #1
 4909 001e 02D1     		bne	.L216
1174:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4910              		.loc 1 1174 0
 4911 0020 4023     		movs	r3, #64
 4912 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 4913 0024 00E0     		b	.L215
 4914              	.L216:
1175:bluetooth_rxtx.c **** 	} else {
1176:bluetooth_rxtx.c **** 		/* oops */
1177:bluetooth_rxtx.c **** 		return;
 4915              		.loc 1 1177 0
 4916 0026 40E0     		b	.L213
 4917              	.L215:
1178:bluetooth_rxtx.c **** 	}
1179:bluetooth_rxtx.c **** 
1180:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4918              		.loc 1 1180 0
 4919 0028 0D20     		movs	r0, #13
 4920 002a 47F6FF71 		movw	r1, #32767
 4921 002e FFF7FEFF 		bl	cc2400_set
1181:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4922              		.loc 1 1181 0
 4923 0032 1220     		movs	r0, #18
 4924 0034 42F62231 		movw	r1, #11042
 4925 0038 FFF7FEFF 		bl	cc2400_set
1182:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 4926              		.loc 1 1182 0
 4927 003c 1420     		movs	r0, #20
 4928 003e 41F24B31 		movw	r1, #4939
 4929 0042 FFF7FEFF 		bl	cc2400_set
1183:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 4930              		.loc 1 1183 0
 4931 0046 2020     		movs	r0, #32
 4932 0048 40F20111 		movw	r1, #257
 4933 004c FFF7FEFF 		bl	cc2400_set
1184:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
ARM GAS  /tmp/ccxwuSCA.s 			page 107


1185:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1186:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1187:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1188:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1189:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1190:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 4934              		.loc 1 1190 0
 4935 0050 184B     		ldr	r3, .L220+4
 4936 0052 1B88     		ldrh	r3, [r3]	@ movhi
 4937 0054 9BB2     		uxth	r3, r3
 4938 0056 013B     		subs	r3, r3, #1
 4939 0058 9BB2     		uxth	r3, r3
 4940 005a 0220     		movs	r0, #2
 4941 005c 1946     		mov	r1, r3
 4942 005e FFF7FEFF 		bl	cc2400_set
1191:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 4943              		.loc 1 1191 0
 4944 0062 FB88     		ldrh	r3, [r7, #6]
 4945 0064 0320     		movs	r0, #3
 4946 0066 1946     		mov	r1, r3
 4947 0068 FFF7FEFF 		bl	cc2400_set
1192:bluetooth_rxtx.c **** 
1193:bluetooth_rxtx.c **** 	// Set up CS register
1194:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4948              		.loc 1 1194 0
 4949 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1195:bluetooth_rxtx.c **** 
1196:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4950              		.loc 1 1196 0
 4951 0070 00BF     		nop
 4952              	.L218:
 4953              		.loc 1 1196 0 is_stmt 0 discriminator 1
 4954 0072 FFF7FEFF 		bl	cc2400_status
 4955 0076 0346     		mov	r3, r0
 4956 0078 03F04003 		and	r3, r3, #64
 4957 007c 002B     		cmp	r3, #0
 4958 007e F8D0     		beq	.L218
1197:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4959              		.loc 1 1197 0 is_stmt 1
 4960 0080 6120     		movs	r0, #97
 4961 0082 FFF7FEFF 		bl	cc2400_strobe
1198:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4962              		.loc 1 1198 0
 4963 0086 00BF     		nop
 4964              	.L219:
 4965              		.loc 1 1198 0 is_stmt 0 discriminator 1
 4966 0088 FFF7FEFF 		bl	cc2400_status
 4967 008c 0346     		mov	r3, r0
 4968 008e 03F00403 		and	r3, r3, #4
 4969 0092 002B     		cmp	r3, #0
 4970 0094 F8D0     		beq	.L219
1199:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 4971              		.loc 1 1199 0 is_stmt 1
 4972 0096 6220     		movs	r0, #98
 4973 0098 FFF7FEFF 		bl	cc2400_strobe
1200:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1201:bluetooth_rxtx.c **** 	PAEN_SET;
ARM GAS  /tmp/ccxwuSCA.s 			page 108


 4974              		.loc 1 1201 0
 4975 009c 064B     		ldr	r3, .L220+8
 4976 009e 8022     		movs	r2, #128
 4977 00a0 1A60     		str	r2, [r3]
1202:bluetooth_rxtx.c **** 	HGM_SET;
 4978              		.loc 1 1202 0
 4979 00a2 054B     		ldr	r3, .L220+8
 4980 00a4 4FF48072 		mov	r2, #256
 4981 00a8 1A60     		str	r2, [r3]
 4982              	.L213:
1203:bluetooth_rxtx.c **** #endif
1204:bluetooth_rxtx.c **** }
 4983              		.loc 1 1204 0
 4984 00aa 0837     		adds	r7, r7, #8
 4985              		.cfi_def_cfa_offset 8
 4986 00ac BD46     		mov	sp, r7
 4987              		.cfi_def_cfa_register 13
 4988              		@ sp needed
 4989 00ae 80BD     		pop	{r7, pc}
 4990              	.L221:
 4991              		.align	2
 4992              	.L220:
 4993 00b0 00000000 		.word	modulation
 4994 00b4 00000000 		.word	channel
 4995 00b8 58C00920 		.word	537509976
 4996              		.cfi_endproc
 4997              	.LFE21:
 4999              		.section	.text.cc2400_rx_sync,"ax",%progbits
 5000              		.align	2
 5001              		.thumb
 5002              		.thumb_func
 5004              	cc2400_rx_sync:
 5005              	.LFB22:
1205:bluetooth_rxtx.c **** 
1206:bluetooth_rxtx.c **** /* start un-buffered rx */
1207:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1208:bluetooth_rxtx.c **** {
 5006              		.loc 1 1208 0
 5007              		.cfi_startproc
 5008              		@ args = 0, pretend = 0, frame = 16
 5009              		@ frame_needed = 1, uses_anonymous_args = 0
 5010 0000 80B5     		push	{r7, lr}
 5011              		.cfi_def_cfa_offset 8
 5012              		.cfi_offset 7, -8
 5013              		.cfi_offset 14, -4
 5014 0002 84B0     		sub	sp, sp, #16
 5015              		.cfi_def_cfa_offset 24
 5016 0004 00AF     		add	r7, sp, #0
 5017              		.cfi_def_cfa_register 7
 5018 0006 7860     		str	r0, [r7, #4]
1209:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1210:bluetooth_rxtx.c **** 
1211:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5019              		.loc 1 1211 0
 5020 0008 334B     		ldr	r3, .L229
 5021 000a 1B78     		ldrb	r3, [r3]
 5022 000c DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 109


 5023 000e 002B     		cmp	r3, #0
 5024 0010 05D1     		bne	.L223
1212:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5025              		.loc 1 1212 0
 5026 0012 2923     		movs	r3, #41
 5027 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1213:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5028              		.loc 1 1213 0
 5029 0016 40F26143 		movw	r3, #1121
 5030 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5031 001c 0BE0     		b	.L224
 5032              	.L223:
1214:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1215:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1216:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1217:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1218:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1219:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1220:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1221:bluetooth_rxtx.c **** 
1222:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5033              		.loc 1 1222 0
 5034 001e 2E4B     		ldr	r3, .L229
 5035 0020 1B78     		ldrb	r3, [r3]
 5036 0022 DBB2     		uxtb	r3, r3
 5037 0024 012B     		cmp	r3, #1
 5038 0026 05D1     		bne	.L225
1223:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5039              		.loc 1 1223 0
 5040 0028 4023     		movs	r3, #64
 5041 002a BB81     		strh	r3, [r7, #12]	@ movhi
1224:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 5042              		.loc 1 1224 0
 5043 002c 40F26153 		movw	r3, #1377
 5044 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 5045 0032 00E0     		b	.L224
 5046              	.L225:
1225:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1226:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1227:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1228:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1229:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1230:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1231:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1232:bluetooth_rxtx.c **** 
1233:bluetooth_rxtx.c **** 	} else {
1234:bluetooth_rxtx.c **** 		/* oops */
1235:bluetooth_rxtx.c **** 		return;
 5047              		.loc 1 1235 0
 5048 0034 4DE0     		b	.L222
 5049              	.L224:
1236:bluetooth_rxtx.c **** 	}
1237:bluetooth_rxtx.c **** 
1238:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5050              		.loc 1 1238 0
 5051 0036 0D20     		movs	r0, #13
 5052 0038 47F6FF71 		movw	r1, #32767
ARM GAS  /tmp/ccxwuSCA.s 			page 110


 5053 003c FFF7FEFF 		bl	cc2400_set
1239:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5054              		.loc 1 1239 0
 5055 0040 1220     		movs	r0, #18
 5056 0042 42F62231 		movw	r1, #11042
 5057 0046 FFF7FEFF 		bl	cc2400_set
1240:bluetooth_rxtx.c **** 
1241:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 5058              		.loc 1 1241 0
 5059 004a 1420     		movs	r0, #20
 5060 004c 41F24B21 		movw	r1, #4683
 5061 0050 FFF7FEFF 		bl	cc2400_set
1242:bluetooth_rxtx.c **** 	// 1      2      4b
1243:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1244:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1245:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1246:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1247:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1248:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1249:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1250:bluetooth_rxtx.c **** 	//
1251:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1252:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1253:bluetooth_rxtx.c **** 
1254:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5062              		.loc 1 1254 0
 5063 0054 FB89     		ldrh	r3, [r7, #14]
 5064 0056 2020     		movs	r0, #32
 5065 0058 1946     		mov	r1, r3
 5066 005a FFF7FEFF 		bl	cc2400_set
1255:bluetooth_rxtx.c **** 
1256:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5067              		.loc 1 1256 0
 5068 005e 7B68     		ldr	r3, [r7, #4]
 5069 0060 9BB2     		uxth	r3, r3
 5070 0062 2C20     		movs	r0, #44
 5071 0064 1946     		mov	r1, r3
 5072 0066 FFF7FEFF 		bl	cc2400_set
1257:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5073              		.loc 1 1257 0
 5074 006a 7B68     		ldr	r3, [r7, #4]
 5075 006c 1B0C     		lsrs	r3, r3, #16
 5076 006e 9BB2     		uxth	r3, r3
 5077 0070 2D20     		movs	r0, #45
 5078 0072 1946     		mov	r1, r3
 5079 0074 FFF7FEFF 		bl	cc2400_set
1258:bluetooth_rxtx.c **** 	
1259:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5080              		.loc 1 1259 0
 5081 0078 184B     		ldr	r3, .L229+4
 5082 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5083 007c 9BB2     		uxth	r3, r3
 5084 007e 013B     		subs	r3, r3, #1
 5085 0080 9BB2     		uxth	r3, r3
 5086 0082 0220     		movs	r0, #2
 5087 0084 1946     		mov	r1, r3
 5088 0086 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccxwuSCA.s 			page 111


1260:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5089              		.loc 1 1260 0
 5090 008a BB89     		ldrh	r3, [r7, #12]
 5091 008c 0320     		movs	r0, #3
 5092 008e 1946     		mov	r1, r3
 5093 0090 FFF7FEFF 		bl	cc2400_set
1261:bluetooth_rxtx.c **** 
1262:bluetooth_rxtx.c **** 	// Set up CS register
1263:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5094              		.loc 1 1263 0
 5095 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1264:bluetooth_rxtx.c **** 
1265:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5096              		.loc 1 1265 0
 5097 0098 00BF     		nop
 5098              	.L227:
 5099              		.loc 1 1265 0 is_stmt 0 discriminator 1
 5100 009a FFF7FEFF 		bl	cc2400_status
 5101 009e 0346     		mov	r3, r0
 5102 00a0 03F04003 		and	r3, r3, #64
 5103 00a4 002B     		cmp	r3, #0
 5104 00a6 F8D0     		beq	.L227
1266:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5105              		.loc 1 1266 0 is_stmt 1
 5106 00a8 6120     		movs	r0, #97
 5107 00aa FFF7FEFF 		bl	cc2400_strobe
1267:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5108              		.loc 1 1267 0
 5109 00ae 00BF     		nop
 5110              	.L228:
 5111              		.loc 1 1267 0 is_stmt 0 discriminator 1
 5112 00b0 FFF7FEFF 		bl	cc2400_status
 5113 00b4 0346     		mov	r3, r0
 5114 00b6 03F00403 		and	r3, r3, #4
 5115 00ba 002B     		cmp	r3, #0
 5116 00bc F8D0     		beq	.L228
1268:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5117              		.loc 1 1268 0 is_stmt 1
 5118 00be 6220     		movs	r0, #98
 5119 00c0 FFF7FEFF 		bl	cc2400_strobe
1269:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1270:bluetooth_rxtx.c **** 	PAEN_SET;
 5120              		.loc 1 1270 0
 5121 00c4 064B     		ldr	r3, .L229+8
 5122 00c6 8022     		movs	r2, #128
 5123 00c8 1A60     		str	r2, [r3]
1271:bluetooth_rxtx.c **** 	HGM_SET;
 5124              		.loc 1 1271 0
 5125 00ca 054B     		ldr	r3, .L229+8
 5126 00cc 4FF48072 		mov	r2, #256
 5127 00d0 1A60     		str	r2, [r3]
 5128              	.L222:
1272:bluetooth_rxtx.c **** #endif
1273:bluetooth_rxtx.c **** }
 5129              		.loc 1 1273 0
 5130 00d2 1037     		adds	r7, r7, #16
 5131              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccxwuSCA.s 			page 112


 5132 00d4 BD46     		mov	sp, r7
 5133              		.cfi_def_cfa_register 13
 5134              		@ sp needed
 5135 00d6 80BD     		pop	{r7, pc}
 5136              	.L230:
 5137              		.align	2
 5138              	.L229:
 5139 00d8 00000000 		.word	modulation
 5140 00dc 00000000 		.word	channel
 5141 00e0 58C00920 		.word	537509976
 5142              		.cfi_endproc
 5143              	.LFE22:
 5145              		.section	.text.le_transmit,"ax",%progbits
 5146              		.align	2
 5147              		.global	le_transmit
 5148              		.thumb
 5149              		.thumb_func
 5151              	le_transmit:
 5152              	.LFB23:
1274:bluetooth_rxtx.c **** 
1275:bluetooth_rxtx.c **** /*
1276:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1277:bluetooth_rxtx.c ****  *
1278:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1279:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1280:bluetooth_rxtx.c ****  * included in the data length.
1281:bluetooth_rxtx.c ****  */
1282:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1283:bluetooth_rxtx.c **** {
 5153              		.loc 1 1283 0
 5154              		.cfi_startproc
 5155              		@ args = 0, pretend = 0, frame = 104
 5156              		@ frame_needed = 1, uses_anonymous_args = 0
 5157 0000 80B5     		push	{r7, lr}
 5158              		.cfi_def_cfa_offset 8
 5159              		.cfi_offset 7, -8
 5160              		.cfi_offset 14, -4
 5161 0002 9AB0     		sub	sp, sp, #104
 5162              		.cfi_def_cfa_offset 112
 5163 0004 00AF     		add	r7, sp, #0
 5164              		.cfi_def_cfa_register 7
 5165 0006 F860     		str	r0, [r7, #12]
 5166 0008 0B46     		mov	r3, r1
 5167 000a 7A60     		str	r2, [r7, #4]
 5168 000c FB72     		strb	r3, [r7, #11]
1284:bluetooth_rxtx.c **** 	unsigned i, j;
1285:bluetooth_rxtx.c **** 	int bit;
1286:bluetooth_rxtx.c **** 	u8 txbuf[64];
1287:bluetooth_rxtx.c **** 	u8 tx_len;
1288:bluetooth_rxtx.c **** 	u8 byte;
1289:bluetooth_rxtx.c **** 	u16 gio_save;
1290:bluetooth_rxtx.c **** 
1291:bluetooth_rxtx.c **** 	// first four bytes: AA
1292:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5169              		.loc 1 1292 0
 5170 000e 0023     		movs	r3, #0
 5171 0010 7B66     		str	r3, [r7, #100]
ARM GAS  /tmp/ccxwuSCA.s 			page 113


 5172 0012 35E0     		b	.L232
 5173              	.L235:
1293:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5174              		.loc 1 1293 0
 5175 0014 FB68     		ldr	r3, [r7, #12]
 5176 0016 87F85E30 		strb	r3, [r7, #94]
1294:bluetooth_rxtx.c **** 		aa >>= 8;
 5177              		.loc 1 1294 0
 5178 001a FB68     		ldr	r3, [r7, #12]
 5179 001c 1B0A     		lsrs	r3, r3, #8
 5180 001e FB60     		str	r3, [r7, #12]
1295:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5181              		.loc 1 1295 0
 5182 0020 07F11002 		add	r2, r7, #16
 5183 0024 7B6E     		ldr	r3, [r7, #100]
 5184 0026 1344     		add	r3, r3, r2
 5185 0028 0022     		movs	r2, #0
 5186 002a 1A70     		strb	r2, [r3]
1296:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5187              		.loc 1 1296 0
 5188 002c 0023     		movs	r3, #0
 5189 002e 3B66     		str	r3, [r7, #96]
 5190 0030 20E0     		b	.L233
 5191              	.L234:
1297:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5192              		.loc 1 1297 0 discriminator 3
 5193 0032 07F11002 		add	r2, r7, #16
 5194 0036 7B6E     		ldr	r3, [r7, #100]
 5195 0038 1344     		add	r3, r3, r2
 5196 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5197 003c D9B2     		uxtb	r1, r3
 5198 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5199 0042 03F00103 		and	r3, r3, #1
 5200 0046 3A6E     		ldr	r2, [r7, #96]
 5201 0048 C2F10702 		rsb	r2, r2, #7
 5202 004c 9340     		lsls	r3, r3, r2
 5203 004e DBB2     		uxtb	r3, r3
 5204 0050 0A46     		mov	r2, r1
 5205 0052 1343     		orrs	r3, r3, r2
 5206 0054 DBB2     		uxtb	r3, r3
 5207 0056 D9B2     		uxtb	r1, r3
 5208 0058 07F11002 		add	r2, r7, #16
 5209 005c 7B6E     		ldr	r3, [r7, #100]
 5210 005e 1344     		add	r3, r3, r2
 5211 0060 0A46     		mov	r2, r1
 5212 0062 1A70     		strb	r2, [r3]
1298:bluetooth_rxtx.c **** 			byte >>= 1;
 5213              		.loc 1 1298 0 discriminator 3
 5214 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5215 0068 5B08     		lsrs	r3, r3, #1
 5216 006a 87F85E30 		strb	r3, [r7, #94]
1296:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5217              		.loc 1 1296 0 discriminator 3
 5218 006e 3B6E     		ldr	r3, [r7, #96]
 5219 0070 0133     		adds	r3, r3, #1
 5220 0072 3B66     		str	r3, [r7, #96]
 5221              	.L233:
ARM GAS  /tmp/ccxwuSCA.s 			page 114


1296:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5222              		.loc 1 1296 0 is_stmt 0 discriminator 1
 5223 0074 3B6E     		ldr	r3, [r7, #96]
 5224 0076 072B     		cmp	r3, #7
 5225 0078 DBD9     		bls	.L234
1292:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5226              		.loc 1 1292 0 is_stmt 1 discriminator 2
 5227 007a 7B6E     		ldr	r3, [r7, #100]
 5228 007c 0133     		adds	r3, r3, #1
 5229 007e 7B66     		str	r3, [r7, #100]
 5230              	.L232:
1292:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5231              		.loc 1 1292 0 is_stmt 0 discriminator 1
 5232 0080 7B6E     		ldr	r3, [r7, #100]
 5233 0082 032B     		cmp	r3, #3
 5234 0084 C6D9     		bls	.L235
1299:bluetooth_rxtx.c **** 		}
1300:bluetooth_rxtx.c **** 	}
1301:bluetooth_rxtx.c **** 
1302:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1303:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5235              		.loc 1 1303 0 is_stmt 1
 5236 0086 934B     		ldr	r3, .L251
 5237 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5238 008a 9BB2     		uxth	r3, r3
 5239 008c DBB2     		uxtb	r3, r3
 5240 008e 623B     		subs	r3, r3, #98
 5241 0090 DBB2     		uxtb	r3, r3
 5242 0092 1846     		mov	r0, r3
 5243 0094 FFF7FEFF 		bl	btle_channel_index
 5244 0098 0346     		mov	r3, r0
 5245 009a 1A46     		mov	r2, r3
 5246 009c 8E4B     		ldr	r3, .L251+4
 5247 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5248 00a0 BB65     		str	r3, [r7, #88]
1304:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5249              		.loc 1 1304 0
 5250 00a2 0023     		movs	r3, #0
 5251 00a4 7B66     		str	r3, [r7, #100]
 5252 00a6 50E0     		b	.L236
 5253              	.L239:
1305:bluetooth_rxtx.c **** 		byte = data[i];
 5254              		.loc 1 1305 0
 5255 00a8 7A68     		ldr	r2, [r7, #4]
 5256 00aa 7B6E     		ldr	r3, [r7, #100]
 5257 00ac 1344     		add	r3, r3, r2
 5258 00ae 1B78     		ldrb	r3, [r3]
 5259 00b0 87F85E30 		strb	r3, [r7, #94]
1306:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5260              		.loc 1 1306 0
 5261 00b4 7B6E     		ldr	r3, [r7, #100]
 5262 00b6 0433     		adds	r3, r3, #4
 5263 00b8 07F16802 		add	r2, r7, #104
 5264 00bc 1344     		add	r3, r3, r2
 5265 00be 0022     		movs	r2, #0
 5266 00c0 03F8582C 		strb	r2, [r3, #-88]
1307:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
ARM GAS  /tmp/ccxwuSCA.s 			page 115


 5267              		.loc 1 1307 0
 5268 00c4 0023     		movs	r3, #0
 5269 00c6 3B66     		str	r3, [r7, #96]
 5270 00c8 39E0     		b	.L237
 5271              	.L238:
1308:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5272              		.loc 1 1308 0 discriminator 3
 5273 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5274 00ce 03F00103 		and	r3, r3, #1
 5275 00d2 8249     		ldr	r1, .L251+8
 5276 00d4 BA6D     		ldr	r2, [r7, #88]
 5277 00d6 0A44     		add	r2, r2, r1
 5278 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5279 00da 5340     		eors	r3, r3, r2
 5280 00dc 7B65     		str	r3, [r7, #84]
1309:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5281              		.loc 1 1309 0 discriminator 3
 5282 00de BB6D     		ldr	r3, [r7, #88]
 5283 00e0 0133     		adds	r3, r3, #1
 5284 00e2 1946     		mov	r1, r3
 5285 00e4 7E4B     		ldr	r3, .L251+12
 5286 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5287 00ea C81A     		subs	r0, r1, r3
 5288 00ec 4008     		lsrs	r0, r0, #1
 5289 00ee 0344     		add	r3, r3, r0
 5290 00f0 9A09     		lsrs	r2, r3, #6
 5291 00f2 1346     		mov	r3, r2
 5292 00f4 DB01     		lsls	r3, r3, #7
 5293 00f6 9B1A     		subs	r3, r3, r2
 5294 00f8 CA1A     		subs	r2, r1, r3
 5295 00fa BA65     		str	r2, [r7, #88]
1310:bluetooth_rxtx.c **** 			byte >>= 1;
 5296              		.loc 1 1310 0 discriminator 3
 5297 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5298 0100 5B08     		lsrs	r3, r3, #1
 5299 0102 87F85E30 		strb	r3, [r7, #94]
1311:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5300              		.loc 1 1311 0 discriminator 3
 5301 0106 7B6E     		ldr	r3, [r7, #100]
 5302 0108 0433     		adds	r3, r3, #4
 5303 010a 7A6E     		ldr	r2, [r7, #100]
 5304 010c 0432     		adds	r2, r2, #4
 5305 010e 07F16801 		add	r1, r7, #104
 5306 0112 0A44     		add	r2, r2, r1
 5307 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5308 0118 D1B2     		uxtb	r1, r2
 5309 011a 3A6E     		ldr	r2, [r7, #96]
 5310 011c C2F10702 		rsb	r2, r2, #7
 5311 0120 1046     		mov	r0, r2
 5312 0122 7A6D     		ldr	r2, [r7, #84]
 5313 0124 8240     		lsls	r2, r2, r0
 5314 0126 D2B2     		uxtb	r2, r2
 5315 0128 0A43     		orrs	r2, r2, r1
 5316 012a D2B2     		uxtb	r2, r2
 5317 012c D2B2     		uxtb	r2, r2
 5318 012e 07F16801 		add	r1, r7, #104
 5319 0132 0B44     		add	r3, r3, r1
ARM GAS  /tmp/ccxwuSCA.s 			page 116


 5320 0134 03F8582C 		strb	r2, [r3, #-88]
1307:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5321              		.loc 1 1307 0 discriminator 3
 5322 0138 3B6E     		ldr	r3, [r7, #96]
 5323 013a 0133     		adds	r3, r3, #1
 5324 013c 3B66     		str	r3, [r7, #96]
 5325              	.L237:
1307:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5326              		.loc 1 1307 0 is_stmt 0 discriminator 1
 5327 013e 3B6E     		ldr	r3, [r7, #96]
 5328 0140 072B     		cmp	r3, #7
 5329 0142 C2D9     		bls	.L238
1304:bluetooth_rxtx.c **** 		byte = data[i];
 5330              		.loc 1 1304 0 is_stmt 1 discriminator 2
 5331 0144 7B6E     		ldr	r3, [r7, #100]
 5332 0146 0133     		adds	r3, r3, #1
 5333 0148 7B66     		str	r3, [r7, #100]
 5334              	.L236:
1304:bluetooth_rxtx.c **** 		byte = data[i];
 5335              		.loc 1 1304 0 is_stmt 0 discriminator 1
 5336 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5337 014c 7B6E     		ldr	r3, [r7, #100]
 5338 014e 9A42     		cmp	r2, r3
 5339 0150 AAD8     		bhi	.L239
1312:bluetooth_rxtx.c **** 		}
1313:bluetooth_rxtx.c **** 	}
1314:bluetooth_rxtx.c **** 
1315:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5340              		.loc 1 1315 0 is_stmt 1
 5341 0152 FB7A     		ldrb	r3, [r7, #11]
 5342 0154 0433     		adds	r3, r3, #4
 5343 0156 FB72     		strb	r3, [r7, #11]
1316:bluetooth_rxtx.c **** 
1317:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1318:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5344              		.loc 1 1318 0
 5345 0158 0D20     		movs	r0, #13
 5346 015a 47F6FF71 		movw	r1, #32767
 5347 015e FFF7FEFF 		bl	cc2400_set
1319:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5348              		.loc 1 1319 0
 5349 0162 1220     		movs	r0, #18
 5350 0164 42F62231 		movw	r1, #11042
 5351 0168 FFF7FEFF 		bl	cc2400_set
1320:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5352              		.loc 1 1320 0
 5353 016c 1420     		movs	r0, #20
 5354 016e 41F24B31 		movw	r1, #4939
 5355 0172 FFF7FEFF 		bl	cc2400_set
1321:bluetooth_rxtx.c **** 
1322:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5356              		.loc 1 1322 0
 5357 0176 2020     		movs	r0, #32
 5358 0178 40F60141 		movw	r1, #3073
 5359 017c FFF7FEFF 		bl	cc2400_set
1323:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1324:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
ARM GAS  /tmp/ccxwuSCA.s 			page 117


1325:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1326:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1327:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1328:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1329:bluetooth_rxtx.c **** 
1330:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5360              		.loc 1 1330 0
 5361 0180 544B     		ldr	r3, .L251
 5362 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5363 0184 9BB2     		uxth	r3, r3
 5364 0186 0220     		movs	r0, #2
 5365 0188 1946     		mov	r1, r3
 5366 018a FFF7FEFF 		bl	cc2400_set
1331:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5367              		.loc 1 1331 0
 5368 018e 0520     		movs	r0, #5
 5369 0190 0B21     		movs	r1, #11
 5370 0192 FFF7FEFF 		bl	cc2400_set
1332:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5371              		.loc 1 1332 0
 5372 0196 0320     		movs	r0, #3
 5373 0198 4021     		movs	r1, #64
 5374 019a FFF7FEFF 		bl	cc2400_set
1333:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5375              		.loc 1 1333 0
 5376 019e 2320     		movs	r0, #35
 5377 01a0 1421     		movs	r1, #20
 5378 01a2 FFF7FEFF 		bl	cc2400_set
1334:bluetooth_rxtx.c **** 
1335:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1336:bluetooth_rxtx.c **** 	if (aa & 1)
 5379              		.loc 1 1336 0
 5380 01a6 FB68     		ldr	r3, [r7, #12]
 5381 01a8 03F00103 		and	r3, r3, #1
 5382 01ac 002B     		cmp	r3, #0
 5383 01ae 05D0     		beq	.L240
1337:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5384              		.loc 1 1337 0
 5385 01b0 2D20     		movs	r0, #45
 5386 01b2 4AF6AA21 		movw	r1, #43690
 5387 01b6 FFF7FEFF 		bl	cc2400_set
 5388 01ba 04E0     		b	.L241
 5389              	.L240:
1338:bluetooth_rxtx.c **** 	else
1339:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5390              		.loc 1 1339 0
 5391 01bc 2D20     		movs	r0, #45
 5392 01be 45F25551 		movw	r1, #21845
 5393 01c2 FFF7FEFF 		bl	cc2400_set
 5394              	.L241:
1340:bluetooth_rxtx.c **** 
1341:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1342:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5395              		.loc 1 1342 0
 5396 01c6 0820     		movs	r0, #8
 5397 01c8 FFF7FEFF 		bl	cc2400_get
 5398 01cc 0346     		mov	r3, r0
ARM GAS  /tmp/ccxwuSCA.s 			page 118


 5399 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1343:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5400              		.loc 1 1343 0
 5401 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5402 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5403 01da 9BB2     		uxth	r3, r3
 5404 01dc 43F49C43 		orr	r3, r3, #19968
 5405 01e0 9BB2     		uxth	r3, r3
 5406 01e2 9BB2     		uxth	r3, r3
 5407 01e4 0820     		movs	r0, #8
 5408 01e6 1946     		mov	r1, r3
 5409 01e8 FFF7FEFF 		bl	cc2400_set
1344:bluetooth_rxtx.c **** 
1345:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5410              		.loc 1 1345 0
 5411 01ec 00BF     		nop
 5412              	.L242:
 5413              		.loc 1 1345 0 is_stmt 0 discriminator 1
 5414 01ee FFF7FEFF 		bl	cc2400_status
 5415 01f2 0346     		mov	r3, r0
 5416 01f4 03F04003 		and	r3, r3, #64
 5417 01f8 002B     		cmp	r3, #0
 5418 01fa F8D0     		beq	.L242
1346:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5419              		.loc 1 1346 0 is_stmt 1
 5420 01fc 6120     		movs	r0, #97
 5421 01fe FFF7FEFF 		bl	cc2400_strobe
1347:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5422              		.loc 1 1347 0
 5423 0202 00BF     		nop
 5424              	.L243:
 5425              		.loc 1 1347 0 is_stmt 0 discriminator 1
 5426 0204 FFF7FEFF 		bl	cc2400_status
 5427 0208 0346     		mov	r3, r0
 5428 020a 03F00403 		and	r3, r3, #4
 5429 020e 002B     		cmp	r3, #0
 5430 0210 F8D0     		beq	.L243
1348:bluetooth_rxtx.c **** 	TXLED_SET;
 5431              		.loc 1 1348 0 is_stmt 1
 5432 0212 344B     		ldr	r3, .L251+16
 5433 0214 4FF48072 		mov	r2, #256
 5434 0218 1A60     		str	r2, [r3]
1349:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1350:bluetooth_rxtx.c **** 	PAEN_SET;
 5435              		.loc 1 1350 0
 5436 021a 334B     		ldr	r3, .L251+20
 5437 021c 8022     		movs	r2, #128
 5438 021e 1A60     		str	r2, [r3]
1351:bluetooth_rxtx.c **** #endif
1352:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5439              		.loc 1 1352 0
 5440 0220 00BF     		nop
 5441              	.L244:
 5442              		.loc 1 1352 0 is_stmt 0 discriminator 1
 5443 0222 0E20     		movs	r0, #14
 5444 0224 FFF7FEFF 		bl	cc2400_get
 5445 0228 0346     		mov	r3, r0
ARM GAS  /tmp/ccxwuSCA.s 			page 119


 5446 022a 03F01F03 		and	r3, r3, #31
 5447 022e 0F2B     		cmp	r3, #15
 5448 0230 F7D1     		bne	.L244
1353:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5449              		.loc 1 1353 0 is_stmt 1
 5450 0232 6320     		movs	r0, #99
 5451 0234 FFF7FEFF 		bl	cc2400_strobe
1354:bluetooth_rxtx.c **** 
1355:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1356:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5452              		.loc 1 1356 0
 5453 0238 0023     		movs	r3, #0
 5454 023a 7B66     		str	r3, [r7, #100]
 5455 023c 21E0     		b	.L245
 5456              	.L248:
1357:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5457              		.loc 1 1357 0
 5458 023e 00BF     		nop
 5459              	.L246:
 5460              		.loc 1 1357 0 is_stmt 0 discriminator 1
 5461 0240 2A4B     		ldr	r3, .L251+24
 5462 0242 1B68     		ldr	r3, [r3]
 5463 0244 03F00403 		and	r3, r3, #4
 5464 0248 002B     		cmp	r3, #0
 5465 024a F9D1     		bne	.L246
1358:bluetooth_rxtx.c **** 		tx_len = len - i;
 5466              		.loc 1 1358 0 is_stmt 1
 5467 024c 7B6E     		ldr	r3, [r7, #100]
 5468 024e DBB2     		uxtb	r3, r3
 5469 0250 FA7A     		ldrb	r2, [r7, #11]
 5470 0252 D31A     		subs	r3, r2, r3
 5471 0254 87F85F30 		strb	r3, [r7, #95]
1359:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5472              		.loc 1 1359 0
 5473 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5474 025c 102B     		cmp	r3, #16
 5475 025e 02D9     		bls	.L247
1360:bluetooth_rxtx.c **** 			tx_len = 16;
 5476              		.loc 1 1360 0
 5477 0260 1023     		movs	r3, #16
 5478 0262 87F85F30 		strb	r3, [r7, #95]
 5479              	.L247:
1361:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5480              		.loc 1 1361 0 discriminator 2
 5481 0266 07F11002 		add	r2, r7, #16
 5482 026a 7B6E     		ldr	r3, [r7, #100]
 5483 026c 1344     		add	r3, r3, r2
 5484 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5485 0272 7020     		movs	r0, #112
 5486 0274 1146     		mov	r1, r2
 5487 0276 1A46     		mov	r2, r3
 5488 0278 FFF7FEFF 		bl	cc2400_spi_buf
1356:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5489              		.loc 1 1356 0 discriminator 2
 5490 027c 7B6E     		ldr	r3, [r7, #100]
 5491 027e 1033     		adds	r3, r3, #16
 5492 0280 7B66     		str	r3, [r7, #100]
ARM GAS  /tmp/ccxwuSCA.s 			page 120


 5493              	.L245:
1356:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5494              		.loc 1 1356 0 is_stmt 0 discriminator 1
 5495 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5496 0284 7B6E     		ldr	r3, [r7, #100]
 5497 0286 9A42     		cmp	r2, r3
 5498 0288 D9D8     		bhi	.L248
1362:bluetooth_rxtx.c **** 	}
1363:bluetooth_rxtx.c **** 
1364:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5499              		.loc 1 1364 0 is_stmt 1
 5500 028a 00BF     		nop
 5501              	.L249:
 5502              		.loc 1 1364 0 is_stmt 0 discriminator 1
 5503 028c 0E20     		movs	r0, #14
 5504 028e FFF7FEFF 		bl	cc2400_get
 5505 0292 0346     		mov	r3, r0
 5506 0294 03F01F03 		and	r3, r3, #31
 5507 0298 0F2B     		cmp	r3, #15
 5508 029a F7D1     		bne	.L249
1365:bluetooth_rxtx.c **** 	TXLED_CLR;
 5509              		.loc 1 1365 0 is_stmt 1
 5510 029c 144B     		ldr	r3, .L251+28
 5511 029e 4FF48072 		mov	r2, #256
 5512 02a2 1A60     		str	r2, [r3]
1366:bluetooth_rxtx.c **** 
1367:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5513              		.loc 1 1367 0
 5514 02a4 6420     		movs	r0, #100
 5515 02a6 FFF7FEFF 		bl	cc2400_strobe
1368:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5516              		.loc 1 1368 0
 5517 02aa 00BF     		nop
 5518              	.L250:
 5519              		.loc 1 1368 0 is_stmt 0 discriminator 1
 5520 02ac FFF7FEFF 		bl	cc2400_status
 5521 02b0 0346     		mov	r3, r0
 5522 02b2 03F00403 		and	r3, r3, #4
 5523 02b6 002B     		cmp	r3, #0
 5524 02b8 F8D1     		bne	.L250
1369:bluetooth_rxtx.c **** 
1370:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1371:bluetooth_rxtx.c **** 	PAEN_CLR;
 5525              		.loc 1 1371 0 is_stmt 1
 5526 02ba 0E4B     		ldr	r3, .L251+32
 5527 02bc 8022     		movs	r2, #128
 5528 02be 1A60     		str	r2, [r3]
1372:bluetooth_rxtx.c **** #endif
1373:bluetooth_rxtx.c **** 
1374:bluetooth_rxtx.c **** 	// reset GIO
1375:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5529              		.loc 1 1375 0
 5530 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5531 02c4 0820     		movs	r0, #8
 5532 02c6 1946     		mov	r1, r3
 5533 02c8 FFF7FEFF 		bl	cc2400_set
1376:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccxwuSCA.s 			page 121


 5534              		.loc 1 1376 0
 5535 02cc 6837     		adds	r7, r7, #104
 5536              		.cfi_def_cfa_offset 8
 5537 02ce BD46     		mov	sp, r7
 5538              		.cfi_def_cfa_register 13
 5539              		@ sp needed
 5540 02d0 80BD     		pop	{r7, pc}
 5541              	.L252:
 5542 02d2 00BF     		.align	2
 5543              	.L251:
 5544 02d4 00000000 		.word	channel
 5545 02d8 C0000000 		.word	whitening_index
 5546 02dc 40000000 		.word	whitening
 5547 02e0 11080402 		.word	33818641
 5548 02e4 38C00920 		.word	537509944
 5549 02e8 58C00920 		.word	537509976
 5550 02ec 54C00920 		.word	537509972
 5551 02f0 3CC00920 		.word	537509948
 5552 02f4 5CC00920 		.word	537509980
 5553              		.cfi_endproc
 5554              	.LFE23:
 5556              		.section	.text.le_jam,"ax",%progbits
 5557              		.align	2
 5558              		.global	le_jam
 5559              		.thumb
 5560              		.thumb_func
 5562              	le_jam:
 5563              	.LFB24:
1377:bluetooth_rxtx.c **** 
1378:bluetooth_rxtx.c **** void le_jam(void) {
 5564              		.loc 1 1378 0
 5565              		.cfi_startproc
 5566              		@ args = 0, pretend = 0, frame = 0
 5567              		@ frame_needed = 1, uses_anonymous_args = 0
 5568 0000 80B5     		push	{r7, lr}
 5569              		.cfi_def_cfa_offset 8
 5570              		.cfi_offset 7, -8
 5571              		.cfi_offset 14, -4
 5572 0002 00AF     		add	r7, sp, #0
 5573              		.cfi_def_cfa_register 7
1379:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1380:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5574              		.loc 1 1380 0
 5575 0004 0D20     		movs	r0, #13
 5576 0006 47F6FF71 		movw	r1, #32767
 5577 000a FFF7FEFF 		bl	cc2400_set
1381:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5578              		.loc 1 1381 0
 5579 000e 1220     		movs	r0, #18
 5580 0010 42F62231 		movw	r1, #11042
 5581 0014 FFF7FEFF 		bl	cc2400_set
1382:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 5582              		.loc 1 1382 0
 5583 0018 1420     		movs	r0, #20
 5584 001a 42F24B31 		movw	r1, #9035
 5585 001e FFF7FEFF 		bl	cc2400_set
1383:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccxwuSCA.s 			page 122


1384:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5586              		.loc 1 1384 0
 5587 0022 2020     		movs	r0, #32
 5588 0024 40F60141 		movw	r1, #3073
 5589 0028 FFF7FEFF 		bl	cc2400_set
1385:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1386:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1387:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1388:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1389:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1390:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1391:bluetooth_rxtx.c **** 
1392:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1393:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5590              		.loc 1 1393 0
 5591 002c 0520     		movs	r0, #5
 5592 002e 0B21     		movs	r1, #11
 5593 0030 FFF7FEFF 		bl	cc2400_set
1394:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5594              		.loc 1 1394 0
 5595 0034 0320     		movs	r0, #3
 5596 0036 4021     		movs	r1, #64
 5597 0038 FFF7FEFF 		bl	cc2400_set
1395:bluetooth_rxtx.c **** 
1396:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5598              		.loc 1 1396 0
 5599 003c 00BF     		nop
 5600              	.L254:
 5601              		.loc 1 1396 0 is_stmt 0 discriminator 1
 5602 003e FFF7FEFF 		bl	cc2400_status
 5603 0042 0346     		mov	r3, r0
 5604 0044 03F04003 		and	r3, r3, #64
 5605 0048 002B     		cmp	r3, #0
 5606 004a F8D0     		beq	.L254
1397:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5607              		.loc 1 1397 0 is_stmt 1
 5608 004c 6120     		movs	r0, #97
 5609 004e FFF7FEFF 		bl	cc2400_strobe
1398:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5610              		.loc 1 1398 0
 5611 0052 00BF     		nop
 5612              	.L255:
 5613              		.loc 1 1398 0 is_stmt 0 discriminator 1
 5614 0054 FFF7FEFF 		bl	cc2400_status
 5615 0058 0346     		mov	r3, r0
 5616 005a 03F00403 		and	r3, r3, #4
 5617 005e 002B     		cmp	r3, #0
 5618 0060 F8D0     		beq	.L255
1399:bluetooth_rxtx.c **** 	TXLED_SET;
 5619              		.loc 1 1399 0 is_stmt 1
 5620 0062 0A4B     		ldr	r3, .L257
 5621 0064 4FF48072 		mov	r2, #256
 5622 0068 1A60     		str	r2, [r3]
1400:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1401:bluetooth_rxtx.c **** 	PAEN_SET;
 5623              		.loc 1 1401 0
 5624 006a 094B     		ldr	r3, .L257+4
ARM GAS  /tmp/ccxwuSCA.s 			page 123


 5625 006c 8022     		movs	r2, #128
 5626 006e 1A60     		str	r2, [r3]
1402:bluetooth_rxtx.c **** #endif
1403:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5627              		.loc 1 1403 0
 5628 0070 00BF     		nop
 5629              	.L256:
 5630              		.loc 1 1403 0 is_stmt 0 discriminator 1
 5631 0072 0E20     		movs	r0, #14
 5632 0074 FFF7FEFF 		bl	cc2400_get
 5633 0078 0346     		mov	r3, r0
 5634 007a 03F01F03 		and	r3, r3, #31
 5635 007e 0F2B     		cmp	r3, #15
 5636 0080 F7D1     		bne	.L256
1404:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5637              		.loc 1 1404 0 is_stmt 1
 5638 0082 6320     		movs	r0, #99
 5639 0084 FFF7FEFF 		bl	cc2400_strobe
1405:bluetooth_rxtx.c **** #endif
1406:bluetooth_rxtx.c **** }
 5640              		.loc 1 1406 0
 5641 0088 80BD     		pop	{r7, pc}
 5642              	.L258:
 5643 008a 00BF     		.align	2
 5644              	.L257:
 5645 008c 38C00920 		.word	537509944
 5646 0090 58C00920 		.word	537509976
 5647              		.cfi_endproc
 5648              	.LFE24:
 5650              		.section	.text.hop,"ax",%progbits
 5651              		.align	2
 5652              		.global	hop
 5653              		.thumb
 5654              		.thumb_func
 5656              	hop:
 5657              	.LFB25:
1407:bluetooth_rxtx.c **** 
1408:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1409:bluetooth_rxtx.c ****  * track of this? */
1410:bluetooth_rxtx.c **** void hop(void)
1411:bluetooth_rxtx.c **** {
 5658              		.loc 1 1411 0
 5659              		.cfi_startproc
 5660              		@ args = 0, pretend = 0, frame = 0
 5661              		@ frame_needed = 1, uses_anonymous_args = 0
 5662 0000 80B5     		push	{r7, lr}
 5663              		.cfi_def_cfa_offset 8
 5664              		.cfi_offset 7, -8
 5665              		.cfi_offset 14, -4
 5666 0002 00AF     		add	r7, sp, #0
 5667              		.cfi_def_cfa_register 7
1412:bluetooth_rxtx.c **** 	do_hop = 0;
 5668              		.loc 1 1412 0
 5669 0004 414B     		ldr	r3, .L270
 5670 0006 0022     		movs	r2, #0
 5671 0008 1A70     		strb	r2, [r3]
1413:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccxwuSCA.s 			page 124


1414:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1415:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5672              		.loc 1 1415 0
 5673 000a 414B     		ldr	r3, .L270+4
 5674 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5675 000e 002B     		cmp	r3, #0
 5676 0010 0BD1     		bne	.L260
1416:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 5677              		.loc 1 1416 0
 5678 0012 0220     		movs	r0, #2
 5679 0014 FFF7FEFF 		bl	cc2400_get
 5680 0018 0346     		mov	r3, r0
 5681 001a 1A46     		mov	r2, r3
 5682 001c 3D4B     		ldr	r3, .L270+8
 5683 001e 1B88     		ldrh	r3, [r3]	@ movhi
 5684 0020 9BB2     		uxth	r3, r3
 5685 0022 013B     		subs	r3, r3, #1
 5686 0024 9A42     		cmp	r2, r3
 5687 0026 47D1     		bne	.L261
1417:bluetooth_rxtx.c **** 			return;
 5688              		.loc 1 1417 0
 5689 0028 6EE0     		b	.L259
 5690              	.L260:
1418:bluetooth_rxtx.c **** 	}
1419:bluetooth_rxtx.c **** 
1420:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1421:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 5691              		.loc 1 1421 0
 5692 002a 394B     		ldr	r3, .L270+4
 5693 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5694 002e 012B     		cmp	r3, #1
 5695 0030 14D1     		bne	.L263
1422:bluetooth_rxtx.c **** 		channel += 32;
 5696              		.loc 1 1422 0
 5697 0032 384B     		ldr	r3, .L270+8
 5698 0034 1B88     		ldrh	r3, [r3]	@ movhi
 5699 0036 9BB2     		uxth	r3, r3
 5700 0038 2033     		adds	r3, r3, #32
 5701 003a 9AB2     		uxth	r2, r3
 5702 003c 354B     		ldr	r3, .L270+8
 5703 003e 1A80     		strh	r2, [r3]	@ movhi
1423:bluetooth_rxtx.c **** 		if (channel > 2480)
 5704              		.loc 1 1423 0
 5705 0040 344B     		ldr	r3, .L270+8
 5706 0042 1B88     		ldrh	r3, [r3]	@ movhi
 5707 0044 9BB2     		uxth	r3, r3
 5708 0046 B3F51B6F 		cmp	r3, #2480
 5709 004a 35D9     		bls	.L261
1424:bluetooth_rxtx.c **** 			channel -= 79;
 5710              		.loc 1 1424 0
 5711 004c 314B     		ldr	r3, .L270+8
 5712 004e 1B88     		ldrh	r3, [r3]	@ movhi
 5713 0050 9BB2     		uxth	r3, r3
 5714 0052 4F3B     		subs	r3, r3, #79
 5715 0054 9AB2     		uxth	r2, r3
 5716 0056 2F4B     		ldr	r3, .L270+8
 5717 0058 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  /tmp/ccxwuSCA.s 			page 125


 5718 005a 2DE0     		b	.L261
 5719              	.L263:
1425:bluetooth_rxtx.c **** 	}
1426:bluetooth_rxtx.c **** 
1427:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 5720              		.loc 1 1427 0
 5721 005c 2C4B     		ldr	r3, .L270+4
 5722 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5723 0060 022B     		cmp	r3, #2
 5724 0062 0DD1     		bne	.L265
1428:bluetooth_rxtx.c **** 		TXLED_SET;
 5725              		.loc 1 1428 0
 5726 0064 2C4B     		ldr	r3, .L270+12
 5727 0066 4FF48072 		mov	r2, #256
 5728 006a 1A60     		str	r2, [r3]
1429:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 5729              		.loc 1 1429 0
 5730 006c 2B4B     		ldr	r3, .L270+16
 5731 006e 1B68     		ldr	r3, [r3]
 5732 0070 1846     		mov	r0, r3
 5733 0072 FFF7FEFF 		bl	next_hop
 5734 0076 0346     		mov	r3, r0
 5735 0078 1A46     		mov	r2, r3
 5736 007a 264B     		ldr	r3, .L270+8
 5737 007c 1A80     		strh	r2, [r3]	@ movhi
 5738 007e 1BE0     		b	.L261
 5739              	.L265:
1430:bluetooth_rxtx.c **** 	}
1431:bluetooth_rxtx.c **** 
1432:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 5740              		.loc 1 1432 0
 5741 0080 234B     		ldr	r3, .L270+4
 5742 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5743 0084 032B     		cmp	r3, #3
 5744 0086 0BD1     		bne	.L266
1433:bluetooth_rxtx.c **** 		TXLED_SET;
 5745              		.loc 1 1433 0
 5746 0088 234B     		ldr	r3, .L270+12
 5747 008a 4FF48072 		mov	r2, #256
 5748 008e 1A60     		str	r2, [r3]
1434:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 5749              		.loc 1 1434 0
 5750 0090 2348     		ldr	r0, .L270+20
 5751 0092 FFF7FEFF 		bl	btle_next_hop
 5752 0096 0346     		mov	r3, r0
 5753 0098 1A46     		mov	r2, r3
 5754 009a 1E4B     		ldr	r3, .L270+8
 5755 009c 1A80     		strh	r2, [r3]	@ movhi
 5756 009e 0BE0     		b	.L261
 5757              	.L266:
1435:bluetooth_rxtx.c **** 	}
1436:bluetooth_rxtx.c **** 
1437:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 5758              		.loc 1 1437 0
 5759 00a0 1B4B     		ldr	r3, .L270+4
 5760 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5761 00a4 042B     		cmp	r3, #4
ARM GAS  /tmp/ccxwuSCA.s 			page 126


 5762 00a6 07D1     		bne	.L261
1438:bluetooth_rxtx.c **** 		TXLED_SET;
 5763              		.loc 1 1438 0
 5764 00a8 1B4B     		ldr	r3, .L270+12
 5765 00aa 4FF48072 		mov	r2, #256
 5766 00ae 1A60     		str	r2, [r3]
1439:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 5767              		.loc 1 1439 0
 5768 00b0 1C4B     		ldr	r3, .L270+24
 5769 00b2 1A88     		ldrh	r2, [r3]
 5770 00b4 174B     		ldr	r3, .L270+8
 5771 00b6 1A80     		strh	r2, [r3]	@ movhi
 5772              	.L261:
1440:bluetooth_rxtx.c **** 	}
1441:bluetooth_rxtx.c **** 
1442:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1443:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5773              		.loc 1 1443 0
 5774 00b8 6420     		movs	r0, #100
 5775 00ba FFF7FEFF 		bl	cc2400_strobe
1444:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5776              		.loc 1 1444 0
 5777 00be 00BF     		nop
 5778              	.L267:
 5779              		.loc 1 1444 0 is_stmt 0 discriminator 1
 5780 00c0 FFF7FEFF 		bl	cc2400_status
 5781 00c4 0346     		mov	r3, r0
 5782 00c6 03F00403 		and	r3, r3, #4
 5783 00ca 002B     		cmp	r3, #0
 5784 00cc F8D1     		bne	.L267
1445:bluetooth_rxtx.c **** 
1446:bluetooth_rxtx.c **** 	/* Retune */
1447:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5785              		.loc 1 1447 0 is_stmt 1
 5786 00ce 114B     		ldr	r3, .L270+8
 5787 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 5788 00d2 9BB2     		uxth	r3, r3
 5789 00d4 013B     		subs	r3, r3, #1
 5790 00d6 9BB2     		uxth	r3, r3
 5791 00d8 0220     		movs	r0, #2
 5792 00da 1946     		mov	r1, r3
 5793 00dc FFF7FEFF 		bl	cc2400_set
1448:bluetooth_rxtx.c **** 	
1449:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1450:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 5794              		.loc 1 1450 0
 5795 00e0 0B4B     		ldr	r3, .L270+4
 5796 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5797 00e4 002B     		cmp	r3, #0
 5798 00e6 01D0     		beq	.L268
1451:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 5799              		.loc 1 1451 0
 5800 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 5801              	.L268:
1452:bluetooth_rxtx.c **** 	}
1453:bluetooth_rxtx.c **** 
1454:bluetooth_rxtx.c **** 	/* Wait for lock */
ARM GAS  /tmp/ccxwuSCA.s 			page 127


1455:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5802              		.loc 1 1455 0
 5803 00ec 6120     		movs	r0, #97
 5804 00ee FFF7FEFF 		bl	cc2400_strobe
1456:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5805              		.loc 1 1456 0
 5806 00f2 00BF     		nop
 5807              	.L269:
 5808              		.loc 1 1456 0 is_stmt 0 discriminator 1
 5809 00f4 FFF7FEFF 		bl	cc2400_status
 5810 00f8 0346     		mov	r3, r0
 5811 00fa 03F00403 		and	r3, r3, #4
 5812 00fe 002B     		cmp	r3, #0
 5813 0100 F8D0     		beq	.L269
1457:bluetooth_rxtx.c **** 	
1458:bluetooth_rxtx.c **** 	/* RX mode */
1459:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5814              		.loc 1 1459 0 is_stmt 1
 5815 0102 6220     		movs	r0, #98
 5816 0104 FFF7FEFF 		bl	cc2400_strobe
 5817              	.L259:
1460:bluetooth_rxtx.c **** 
1461:bluetooth_rxtx.c **** }
 5818              		.loc 1 1461 0
 5819 0108 80BD     		pop	{r7, pc}
 5820              	.L271:
 5821 010a 00BF     		.align	2
 5822              	.L270:
 5823 010c 00000000 		.word	do_hop
 5824 0110 00000000 		.word	hop_mode
 5825 0114 00000000 		.word	channel
 5826 0118 38C00920 		.word	537509944
 5827 011c 00000000 		.word	clkn
 5828 0120 00000000 		.word	le
 5829 0124 00000000 		.word	hop_direct_channel
 5830              		.cfi_endproc
 5831              	.LFE25:
 5833              		.section	.text.cc2400_spi_rev,"ax",%progbits
 5834              		.align	2
 5835              		.global	cc2400_spi_rev
 5836              		.thumb
 5837              		.thumb_func
 5839              	cc2400_spi_rev:
 5840              	.LFB26:
1462:bluetooth_rxtx.c **** 
1463:bluetooth_rxtx.c **** 
1464:bluetooth_rxtx.c **** u32 cc2400_spi_rev(u8 len, u32 data)
1465:bluetooth_rxtx.c **** {
 5841              		.loc 1 1465 0
 5842              		.cfi_startproc
 5843              		@ args = 0, pretend = 0, frame = 16
 5844              		@ frame_needed = 1, uses_anonymous_args = 0
 5845              		@ link register save eliminated.
 5846 0000 80B4     		push	{r7}
 5847              		.cfi_def_cfa_offset 4
 5848              		.cfi_offset 7, -4
 5849 0002 85B0     		sub	sp, sp, #20
ARM GAS  /tmp/ccxwuSCA.s 			page 128


 5850              		.cfi_def_cfa_offset 24
 5851 0004 00AF     		add	r7, sp, #0
 5852              		.cfi_def_cfa_register 7
 5853 0006 0346     		mov	r3, r0
 5854 0008 3960     		str	r1, [r7]
 5855 000a FB71     		strb	r3, [r7, #7]
1466:bluetooth_rxtx.c ****     //    u32 first_ts, second_ts, diff;
1467:bluetooth_rxtx.c **** 
1468:bluetooth_rxtx.c **** 
1469:bluetooth_rxtx.c ****         u32 msb = 1 << (len - 1);
 5856              		.loc 1 1469 0
 5857 000c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5858 000e 013B     		subs	r3, r3, #1
 5859 0010 0122     		movs	r2, #1
 5860 0012 02FA03F3 		lsl	r3, r2, r3
 5861 0016 FB60     		str	r3, [r7, #12]
1470:bluetooth_rxtx.c **** 
1471:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1472:bluetooth_rxtx.c ****         CSN_CLR;
 5862              		.loc 1 1472 0
 5863 0018 184B     		ldr	r3, .L279
 5864 001a 2022     		movs	r2, #32
 5865 001c 1A60     		str	r2, [r3]
1473:bluetooth_rxtx.c **** 
1474:bluetooth_rxtx.c **** //      first_ts = CLK100NS;
1475:bluetooth_rxtx.c ****         while (len--) {
 5866              		.loc 1 1475 0
 5867 001e 1EE0     		b	.L273
 5868              	.L277:
1476:bluetooth_rxtx.c ****                 if (data & msb)
 5869              		.loc 1 1476 0
 5870 0020 3A68     		ldr	r2, [r7]
 5871 0022 FB68     		ldr	r3, [r7, #12]
 5872 0024 1340     		ands	r3, r3, r2
 5873 0026 002B     		cmp	r3, #0
 5874 0028 03D0     		beq	.L274
1477:bluetooth_rxtx.c ****                         MOSI_SET;
 5875              		.loc 1 1477 0
 5876 002a 154B     		ldr	r3, .L279+4
 5877 002c 0122     		movs	r2, #1
 5878 002e 1A60     		str	r2, [r3]
 5879 0030 02E0     		b	.L275
 5880              	.L274:
1478:bluetooth_rxtx.c ****                 else
1479:bluetooth_rxtx.c ****                         MOSI_CLR;
 5881              		.loc 1 1479 0
 5882 0032 124B     		ldr	r3, .L279
 5883 0034 0122     		movs	r2, #1
 5884 0036 1A60     		str	r2, [r3]
 5885              	.L275:
1480:bluetooth_rxtx.c ****                 data <<= 1;
 5886              		.loc 1 1480 0
 5887 0038 3B68     		ldr	r3, [r7]
 5888 003a 5B00     		lsls	r3, r3, #1
 5889 003c 3B60     		str	r3, [r7]
1481:bluetooth_rxtx.c **** 
1482:bluetooth_rxtx.c ****                 SCLK_SET;
ARM GAS  /tmp/ccxwuSCA.s 			page 129


 5890              		.loc 1 1482 0
 5891 003e 104B     		ldr	r3, .L279+4
 5892 0040 1022     		movs	r2, #16
 5893 0042 1A60     		str	r2, [r3]
1483:bluetooth_rxtx.c ****                 if (MISO)
 5894              		.loc 1 1483 0
 5895 0044 0F4B     		ldr	r3, .L279+8
 5896 0046 1B68     		ldr	r3, [r3]
 5897 0048 03F00203 		and	r3, r3, #2
 5898 004c 002B     		cmp	r3, #0
 5899 004e 03D0     		beq	.L276
1484:bluetooth_rxtx.c ****                         data |= 1;
 5900              		.loc 1 1484 0
 5901 0050 3B68     		ldr	r3, [r7]
 5902 0052 43F00103 		orr	r3, r3, #1
 5903 0056 3B60     		str	r3, [r7]
 5904              	.L276:
1485:bluetooth_rxtx.c **** 
1486:bluetooth_rxtx.c ****                 SCLK_CLR;
 5905              		.loc 1 1486 0
 5906 0058 084B     		ldr	r3, .L279
 5907 005a 1022     		movs	r2, #16
 5908 005c 1A60     		str	r2, [r3]
 5909              	.L273:
1475:bluetooth_rxtx.c ****                 if (data & msb)
 5910              		.loc 1 1475 0
 5911 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5912 0060 5A1E     		subs	r2, r3, #1
 5913 0062 FA71     		strb	r2, [r7, #7]
 5914 0064 002B     		cmp	r3, #0
 5915 0066 DBD1     		bne	.L277
1487:bluetooth_rxtx.c ****         }
1488:bluetooth_rxtx.c **** //      second_ts = CLK100NS;
1489:bluetooth_rxtx.c **** //      diff_ts = second_ts - first_ts;
1490:bluetooth_rxtx.c **** 
1491:bluetooth_rxtx.c ****         CSN_SET;
 5916              		.loc 1 1491 0
 5917 0068 054B     		ldr	r3, .L279+4
 5918 006a 2022     		movs	r2, #32
 5919 006c 1A60     		str	r2, [r3]
1492:bluetooth_rxtx.c ****         return data;
 5920              		.loc 1 1492 0
 5921 006e 3B68     		ldr	r3, [r7]
1493:bluetooth_rxtx.c **** }
 5922              		.loc 1 1493 0
 5923 0070 1846     		mov	r0, r3
 5924 0072 1437     		adds	r7, r7, #20
 5925              		.cfi_def_cfa_offset 4
 5926 0074 BD46     		mov	sp, r7
 5927              		.cfi_def_cfa_register 13
 5928              		@ sp needed
 5929 0076 5DF8047B 		ldr	r7, [sp], #4
 5930              		.cfi_restore 7
 5931              		.cfi_def_cfa_offset 0
 5932 007a 7047     		bx	lr
 5933              	.L280:
 5934              		.align	2
ARM GAS  /tmp/ccxwuSCA.s 			page 130


 5935              	.L279:
 5936 007c 5CC00920 		.word	537509980
 5937 0080 58C00920 		.word	537509976
 5938 0084 54C00920 		.word	537509972
 5939              		.cfi_endproc
 5940              	.LFE26:
 5942              		.section	.text.cc2400_get_rev,"ax",%progbits
 5943              		.align	2
 5944              		.global	cc2400_get_rev
 5945              		.thumb
 5946              		.thumb_func
 5948              	cc2400_get_rev:
 5949              	.LFB27:
1494:bluetooth_rxtx.c **** 
1495:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1496:bluetooth_rxtx.c **** {
 5950              		.loc 1 1496 0
 5951              		.cfi_startproc
 5952              		@ args = 0, pretend = 0, frame = 16
 5953              		@ frame_needed = 1, uses_anonymous_args = 0
 5954 0000 80B5     		push	{r7, lr}
 5955              		.cfi_def_cfa_offset 8
 5956              		.cfi_offset 7, -8
 5957              		.cfi_offset 14, -4
 5958 0002 84B0     		sub	sp, sp, #16
 5959              		.cfi_def_cfa_offset 24
 5960 0004 00AF     		add	r7, sp, #0
 5961              		.cfi_def_cfa_register 7
 5962 0006 0346     		mov	r3, r0
 5963 0008 FB71     		strb	r3, [r7, #7]
1497:bluetooth_rxtx.c ****         u32 in;
1498:bluetooth_rxtx.c **** 
1499:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
 5964              		.loc 1 1499 0
 5965 000a FB79     		ldrb	r3, [r7, #7]
 5966 000c 63F07F03 		orn	r3, r3, #127
 5967 0010 DBB2     		uxtb	r3, r3
 5968 0012 1B02     		lsls	r3, r3, #8
 5969 0014 FB60     		str	r3, [r7, #12]
1500:bluetooth_rxtx.c ****         in = cc2400_spi_rev(16, out);
 5970              		.loc 1 1500 0
 5971 0016 1020     		movs	r0, #16
 5972 0018 F968     		ldr	r1, [r7, #12]
 5973 001a FFF7FEFF 		bl	cc2400_spi_rev
 5974 001e B860     		str	r0, [r7, #8]
1501:bluetooth_rxtx.c ****         return in & 0xFF;
 5975              		.loc 1 1501 0
 5976 0020 BB68     		ldr	r3, [r7, #8]
 5977 0022 DBB2     		uxtb	r3, r3
1502:bluetooth_rxtx.c **** }
 5978              		.loc 1 1502 0
 5979 0024 1846     		mov	r0, r3
 5980 0026 1037     		adds	r7, r7, #16
 5981              		.cfi_def_cfa_offset 8
 5982 0028 BD46     		mov	sp, r7
 5983              		.cfi_def_cfa_register 13
 5984              		@ sp needed
ARM GAS  /tmp/ccxwuSCA.s 			page 131


 5985 002a 80BD     		pop	{r7, pc}
 5986              		.cfi_endproc
 5987              	.LFE27:
 5989              		.section	.text.bt_stream_rx,"ax",%progbits
 5990              		.align	2
 5991              		.global	bt_stream_rx
 5992              		.thumb
 5993              		.thumb_func
 5995              	bt_stream_rx:
 5996              	.LFB28:
1503:bluetooth_rxtx.c **** 
1504:bluetooth_rxtx.c **** 
1505:bluetooth_rxtx.c **** 
1506:bluetooth_rxtx.c **** 
1507:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1508:bluetooth_rxtx.c **** // wpson
1509:bluetooth_rxtx.c **** void bt_stream_rx()
1510:bluetooth_rxtx.c **** {
 5997              		.loc 1 1510 0
 5998              		.cfi_startproc
 5999              		@ args = 0, pretend = 0, frame = 128
 6000              		@ frame_needed = 1, uses_anonymous_args = 0
 6001 0000 90B5     		push	{r4, r7, lr}
 6002              		.cfi_def_cfa_offset 12
 6003              		.cfi_offset 4, -12
 6004              		.cfi_offset 7, -8
 6005              		.cfi_offset 14, -4
 6006 0002 A1B0     		sub	sp, sp, #132
 6007              		.cfi_def_cfa_offset 144
 6008 0004 00AF     		add	r7, sp, #0
 6009              		.cfi_def_cfa_register 7
1511:bluetooth_rxtx.c **** //	TXLED_SET;
1512:bluetooth_rxtx.c **** 	RXLED_CLR;
 6010              		.loc 1 1512 0
 6011 0006 B84B     		ldr	r3, .L310
 6012 0008 1022     		movs	r2, #16
 6013 000a 1A60     		str	r2, [r3]
1513:bluetooth_rxtx.c **** 	int i;
1514:bluetooth_rxtx.c **** 	
1515:bluetooth_rxtx.c **** 	u8 freq_buf[45];
1516:bluetooth_rxtx.c **** 	queue_init();
 6014              		.loc 1 1516 0
 6015 000c FFF7FEFF 		bl	queue_init
1517:bluetooth_rxtx.c **** 	dio_ssp_init();
 6016              		.loc 1 1517 0
 6017 0010 FFF7FEFF 		bl	dio_ssp_init
1518:bluetooth_rxtx.c **** 	dma_init_le();
 6018              		.loc 1 1518 0
 6019 0014 FFF7FEFF 		bl	dma_init_le
1519:bluetooth_rxtx.c **** 	dio_ssp_start();
 6020              		.loc 1 1519 0
 6021 0018 FFF7FEFF 		bl	dio_ssp_start
1520:bluetooth_rxtx.c **** 	
1521:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6022              		.loc 1 1521 0
 6023 001c 0D20     		movs	r0, #13
 6024 001e 47F6FF71 		movw	r1, #32767
ARM GAS  /tmp/ccxwuSCA.s 			page 132


 6025 0022 FFF7FEFF 		bl	cc2400_set
1522:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6026              		.loc 1 1522 0
 6027 0026 1220     		movs	r0, #18
 6028 0028 42F62231 		movw	r1, #11042
 6029 002c FFF7FEFF 		bl	cc2400_set
1523:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6030              		.loc 1 1523 0
 6031 0030 1420     		movs	r0, #20
 6032 0032 41F24B21 		movw	r1, #4683
 6033 0036 FFF7FEFF 		bl	cc2400_set
1524:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6034              		.loc 1 1524 0
 6035 003a 2020     		movs	r0, #32
 6036 003c 40F26151 		movw	r1, #1377
 6037 0040 FFF7FEFF 		bl	cc2400_set
1525:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6038              		.loc 1 1525 0
 6039 0044 0320     		movs	r0, #3
 6040 0046 4021     		movs	r1, #64
 6041 0048 FFF7FEFF 		bl	cc2400_set
1526:bluetooth_rxtx.c **** 
1527:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1528:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1529:bluetooth_rxtx.c **** 	
1530:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 6042              		.loc 1 1530 0
 6043 004c A748     		ldr	r0, .L310+4
 6044 004e FFF7FEFF 		bl	rbit
 6045 0052 0346     		mov	r3, r0
 6046 0054 9BB2     		uxth	r3, r3
 6047 0056 2C20     		movs	r0, #44
 6048 0058 1946     		mov	r1, r3
 6049 005a FFF7FEFF 		bl	cc2400_set
1531:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 6050              		.loc 1 1531 0
 6051 005e A348     		ldr	r0, .L310+4
 6052 0060 FFF7FEFF 		bl	rbit
 6053 0064 0346     		mov	r3, r0
 6054 0066 1B0C     		lsrs	r3, r3, #16
 6055 0068 9BB2     		uxth	r3, r3
 6056 006a 2D20     		movs	r0, #45
 6057 006c 1946     		mov	r1, r3
 6058 006e FFF7FEFF 		bl	cc2400_set
1532:bluetooth_rxtx.c **** 	
1533:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1534:bluetooth_rxtx.c **** 	PAEN_SET;
 6059              		.loc 1 1534 0
 6060 0072 9F4B     		ldr	r3, .L310+8
 6061 0074 8022     		movs	r2, #128
 6062 0076 1A60     		str	r2, [r3]
1535:bluetooth_rxtx.c **** //	HGM_SET;
1536:bluetooth_rxtx.c **** #endif
1537:bluetooth_rxtx.c **** 
1538:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6063              		.loc 1 1538 0
 6064 0078 00BF     		nop
ARM GAS  /tmp/ccxwuSCA.s 			page 133


 6065              	.L284:
 6066              		.loc 1 1538 0 is_stmt 0 discriminator 1
 6067 007a FFF7FEFF 		bl	cc2400_status
 6068 007e 0346     		mov	r3, r0
 6069 0080 03F04003 		and	r3, r3, #64
 6070 0084 002B     		cmp	r3, #0
 6071 0086 F8D0     		beq	.L284
1539:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6072              		.loc 1 1539 0 is_stmt 1
 6073 0088 00BF     		nop
 6074              	.L285:
 6075              		.loc 1 1539 0 is_stmt 0 discriminator 1
 6076 008a FFF7FEFF 		bl	cc2400_status
 6077 008e 0346     		mov	r3, r0
 6078 0090 03F00403 		and	r3, r3, #4
 6079 0094 002B     		cmp	r3, #0
 6080 0096 F8D1     		bne	.L285
1540:bluetooth_rxtx.c **** 
1541:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6081              		.loc 1 1541 0 is_stmt 1
 6082 0098 964B     		ldr	r3, .L310+12
 6083 009a 1B88     		ldrh	r3, [r3]	@ movhi
 6084 009c 9BB2     		uxth	r3, r3
 6085 009e 013B     		subs	r3, r3, #1
 6086 00a0 9BB2     		uxth	r3, r3
 6087 00a2 0220     		movs	r0, #2
 6088 00a4 1946     		mov	r1, r3
 6089 00a6 FFF7FEFF 		bl	cc2400_set
1542:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6090              		.loc 1 1542 0
 6091 00aa 6120     		movs	r0, #97
 6092 00ac FFF7FEFF 		bl	cc2400_strobe
1543:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6093              		.loc 1 1543 0
 6094 00b0 00BF     		nop
 6095              	.L286:
 6096              		.loc 1 1543 0 is_stmt 0 discriminator 1
 6097 00b2 FFF7FEFF 		bl	cc2400_status
 6098 00b6 0346     		mov	r3, r0
 6099 00b8 03F00403 		and	r3, r3, #4
 6100 00bc 002B     		cmp	r3, #0
 6101 00be F8D0     		beq	.L286
1544:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6102              		.loc 1 1544 0 is_stmt 1
 6103 00c0 6220     		movs	r0, #98
 6104 00c2 FFF7FEFF 		bl	cc2400_strobe
1545:bluetooth_rxtx.c **** 	
1546:bluetooth_rxtx.c **** //	cc2400_rx();
1547:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 6105              		.loc 1 1547 0
 6106 00c6 44E1     		b	.L287
 6107              	.L309:
 6108              	.LBB3:
1548:bluetooth_rxtx.c **** 		
1549:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 6109              		.loc 1 1549 0
 6110 00c8 00BF     		nop
ARM GAS  /tmp/ccxwuSCA.s 			page 134


 6111              	.L288:
 6112              		.loc 1 1549 0 is_stmt 0 discriminator 1
 6113 00ca FFF7FEFF 		bl	cc2400_status
 6114 00ce 0346     		mov	r3, r0
 6115 00d0 03F01003 		and	r3, r3, #16
 6116 00d4 002B     		cmp	r3, #0
 6117 00d6 F8D0     		beq	.L288
1550:bluetooth_rxtx.c **** 
1551:bluetooth_rxtx.c **** 
1552:bluetooth_rxtx.c **** /*		int out;
1553:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1554:bluetooth_rxtx.c ****                 if (rssi >= 128)
1555:bluetooth_rxtx.c ****                         out = rssi - 256;
1556:bluetooth_rxtx.c ****                 else
1557:bluetooth_rxtx.c ****                         out = rssi;
1558:bluetooth_rxtx.c ****                 if (out < 0)
1559:bluetooth_rxtx.c **** 		  goto rx_flush;
1560:bluetooth_rxtx.c **** */
1561:bluetooth_rxtx.c **** 
1562:bluetooth_rxtx.c **** 		for (i = 0; i < 45; i++)
 6118              		.loc 1 1562 0 is_stmt 1
 6119 00d8 0023     		movs	r3, #0
 6120 00da FB67     		str	r3, [r7, #124]
 6121 00dc 0DE0     		b	.L289
 6122              	.L290:
1563:bluetooth_rxtx.c **** 		{
1564:bluetooth_rxtx.c **** 			freq_buf[i] = cc2400_get_rev(FREQEST);	
 6123              		.loc 1 1564 0 discriminator 3
 6124 00de 0720     		movs	r0, #7
 6125 00e0 FFF7FEFF 		bl	cc2400_get_rev
 6126 00e4 0346     		mov	r3, r0
 6127 00e6 1946     		mov	r1, r3
 6128 00e8 07F13402 		add	r2, r7, #52
 6129 00ec FB6F     		ldr	r3, [r7, #124]
 6130 00ee 1344     		add	r3, r3, r2
 6131 00f0 0A46     		mov	r2, r1
 6132 00f2 1A70     		strb	r2, [r3]
1562:bluetooth_rxtx.c **** 		{
 6133              		.loc 1 1562 0 discriminator 3
 6134 00f4 FB6F     		ldr	r3, [r7, #124]
 6135 00f6 0133     		adds	r3, r3, #1
 6136 00f8 FB67     		str	r3, [r7, #124]
 6137              	.L289:
1562:bluetooth_rxtx.c **** 		{
 6138              		.loc 1 1562 0 is_stmt 0 discriminator 1
 6139 00fa FB6F     		ldr	r3, [r7, #124]
 6140 00fc 2C2B     		cmp	r3, #44
 6141 00fe EEDD     		ble	.L290
1565:bluetooth_rxtx.c **** 		}
1566:bluetooth_rxtx.c **** 
1567:bluetooth_rxtx.c **** 
1568:bluetooth_rxtx.c **** 		while (!rx_tc);
 6142              		.loc 1 1568 0 is_stmt 1
 6143 0100 00BF     		nop
 6144              	.L291:
 6145              		.loc 1 1568 0 is_stmt 0 discriminator 1
 6146 0102 7D4B     		ldr	r3, .L310+16
ARM GAS  /tmp/ccxwuSCA.s 			page 135


 6147 0104 1B68     		ldr	r3, [r3]
 6148 0106 002B     		cmp	r3, #0
 6149 0108 FBD0     		beq	.L291
1569:bluetooth_rxtx.c **** 	
1570:bluetooth_rxtx.c **** 		RXLED_SET;
 6150              		.loc 1 1570 0 is_stmt 1
 6151 010a 7C4B     		ldr	r3, .L310+20
 6152 010c 1022     		movs	r2, #16
 6153 010e 1A60     		str	r2, [r3]
1571:bluetooth_rxtx.c **** 		if (rx_err) {
 6154              		.loc 1 1571 0
 6155 0110 7B4B     		ldr	r3, .L310+24
 6156 0112 1B68     		ldr	r3, [r3]
 6157 0114 002B     		cmp	r3, #0
 6158 0116 07D0     		beq	.L292
1572:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 6159              		.loc 1 1572 0
 6160 0118 7A4B     		ldr	r3, .L310+28
 6161 011a 1B78     		ldrb	r3, [r3]
 6162 011c DBB2     		uxtb	r3, r3
 6163 011e 43F00203 		orr	r3, r3, #2
 6164 0122 DAB2     		uxtb	r2, r3
 6165 0124 774B     		ldr	r3, .L310+28
 6166 0126 1A70     		strb	r2, [r3]
 6167              	.L292:
1573:bluetooth_rxtx.c **** 		}	
1574:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6168              		.loc 1 1574 0
 6169 0128 734B     		ldr	r3, .L310+16
 6170 012a 1B68     		ldr	r3, [r3]
 6171 012c 012B     		cmp	r3, #1
 6172 012e 07D9     		bls	.L293
1575:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6173              		.loc 1 1575 0
 6174 0130 744B     		ldr	r3, .L310+28
 6175 0132 1B78     		ldrb	r3, [r3]
 6176 0134 DBB2     		uxtb	r3, r3
 6177 0136 43F00103 		orr	r3, r3, #1
 6178 013a DAB2     		uxtb	r2, r3
 6179 013c 714B     		ldr	r3, .L310+28
 6180 013e 1A70     		strb	r2, [r3]
 6181              	.L293:
1576:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1577:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6182              		.loc 1 1577 0
 6183 0140 3B46     		mov	r3, r7
 6184 0142 BB67     		str	r3, [r7, #120]
1578:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 6185              		.loc 1 1578 0
 6186 0144 704B     		ldr	r3, .L310+32
 6187 0146 1B68     		ldr	r3, [r3]
 6188 0148 3B60     		str	r3, [r7]
1579:bluetooth_rxtx.c **** 
1580:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 6189              		.loc 1 1580 0
 6190 014a 00BF     		nop
 6191              	.L295:
ARM GAS  /tmp/ccxwuSCA.s 			page 136


 6192              		.loc 1 1580 0 is_stmt 0 discriminator 2
 6193 014c 6F4B     		ldr	r3, .L310+36
 6194 014e 1B68     		ldr	r3, [r3]
 6195 0150 03F00103 		and	r3, r3, #1
 6196 0154 002B     		cmp	r3, #0
 6197 0156 03D0     		beq	.L294
 6198              		.loc 1 1580 0 discriminator 1
 6199 0158 694B     		ldr	r3, .L310+24
 6200 015a 1B68     		ldr	r3, [r3]
 6201 015c 002B     		cmp	r3, #0
 6202 015e F5D0     		beq	.L295
 6203              	.L294:
1581:bluetooth_rxtx.c ****                 
1582:bluetooth_rxtx.c **** 			
1583:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6204              		.loc 1 1583 0 is_stmt 1
 6205 0160 6B4A     		ldr	r2, .L310+40
 6206 0162 6B4B     		ldr	r3, .L310+40
 6207 0164 1B68     		ldr	r3, [r3]
 6208 0166 23F00103 		bic	r3, r3, #1
 6209 016a 1360     		str	r3, [r2]
1584:bluetooth_rxtx.c **** 	
1585:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 6210              		.loc 1 1585 0
 6211 016c 614B     		ldr	r3, .L310+12
 6212 016e 1B88     		ldrh	r3, [r3]	@ movhi
 6213 0170 9BB2     		uxth	r3, r3
 6214 0172 DBB2     		uxtb	r3, r3
 6215 0174 623B     		subs	r3, r3, #98
 6216 0176 DBB2     		uxtb	r3, r3
 6217 0178 1846     		mov	r0, r3
 6218 017a FFF7FEFF 		bl	btle_channel_index
 6219 017e 0346     		mov	r3, r0
 6220 0180 1A46     		mov	r2, r3
 6221 0182 1346     		mov	r3, r2
 6222 0184 5B00     		lsls	r3, r3, #1
 6223 0186 1344     		add	r3, r3, r2
 6224 0188 1B01     		lsls	r3, r3, #4
 6225 018a 624A     		ldr	r2, .L310+44
 6226 018c 1344     		add	r3, r3, r2
 6227 018e 7B67     		str	r3, [r7, #116]
1586:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 6228              		.loc 1 1586 0
 6229 0190 0023     		movs	r3, #0
 6230 0192 FB67     		str	r3, [r7, #124]
 6231 0194 34E0     		b	.L296
 6232              	.L299:
 6233              	.LBB4:
1587:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6234              		.loc 1 1587 0 discriminator 3
 6235 0196 604A     		ldr	r2, .L310+48
 6236 0198 FB6F     		ldr	r3, [r7, #124]
 6237 019a 1344     		add	r3, r3, r2
 6238 019c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6239 019e 1A06     		lsls	r2, r3, #24
1588:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 6240              		.loc 1 1588 0 discriminator 3
ARM GAS  /tmp/ccxwuSCA.s 			page 137


 6241 01a0 FB6F     		ldr	r3, [r7, #124]
 6242 01a2 0133     		adds	r3, r3, #1
 6243 01a4 5C49     		ldr	r1, .L310+48
 6244 01a6 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6245 01a8 1B04     		lsls	r3, r3, #16
 6246 01aa 1A43     		orrs	r2, r2, r3
1589:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 6247              		.loc 1 1589 0 discriminator 3
 6248 01ac FB6F     		ldr	r3, [r7, #124]
 6249 01ae 0233     		adds	r3, r3, #2
 6250 01b0 5949     		ldr	r1, .L310+48
 6251 01b2 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6252 01b4 1B02     		lsls	r3, r3, #8
 6253 01b6 1343     		orrs	r3, r3, r2
1590:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 6254              		.loc 1 1590 0 discriminator 3
 6255 01b8 FA6F     		ldr	r2, [r7, #124]
 6256 01ba 0332     		adds	r2, r2, #3
 6257 01bc 5649     		ldr	r1, .L310+48
 6258 01be 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 6259 01c0 1343     		orrs	r3, r3, r2
1587:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 6260              		.loc 1 1587 0 discriminator 3
 6261 01c2 3B67     		str	r3, [r7, #112]
1591:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 6262              		.loc 1 1591 0 discriminator 3
 6263 01c4 FB6F     		ldr	r3, [r7, #124]
 6264 01c6 002B     		cmp	r3, #0
 6265 01c8 00DA     		bge	.L297
 6266 01ca 0333     		adds	r3, r3, #3
 6267              	.L297:
 6268 01cc 9B10     		asrs	r3, r3, #2
 6269 01ce 5C1C     		adds	r4, r3, #1
 6270 01d0 386F     		ldr	r0, [r7, #112]
 6271 01d2 FFF7FEFF 		bl	rbit
 6272 01d6 0146     		mov	r1, r0
 6273 01d8 FB6F     		ldr	r3, [r7, #124]
 6274 01da 002B     		cmp	r3, #0
 6275 01dc 00DA     		bge	.L298
 6276 01de 0333     		adds	r3, r3, #3
 6277              	.L298:
 6278 01e0 9B10     		asrs	r3, r3, #2
 6279 01e2 9B00     		lsls	r3, r3, #2
 6280 01e4 7A6F     		ldr	r2, [r7, #116]
 6281 01e6 1344     		add	r3, r3, r2
 6282 01e8 1B68     		ldr	r3, [r3]
 6283 01ea 81EA0302 		eor	r2, r1, r3
 6284 01ee A300     		lsls	r3, r4, #2
 6285 01f0 07F18001 		add	r1, r7, #128
 6286 01f4 0B44     		add	r3, r3, r1
 6287 01f6 43F8802C 		str	r2, [r3, #-128]
 6288              	.LBE4:
1586:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6289              		.loc 1 1586 0 discriminator 3
 6290 01fa FB6F     		ldr	r3, [r7, #124]
 6291 01fc 0433     		adds	r3, r3, #4
 6292 01fe FB67     		str	r3, [r7, #124]
ARM GAS  /tmp/ccxwuSCA.s 			page 138


 6293              	.L296:
1586:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6294              		.loc 1 1586 0 is_stmt 0 discriminator 1
 6295 0200 FB6F     		ldr	r3, [r7, #124]
 6296 0202 2B2B     		cmp	r3, #43
 6297 0204 C7DD     		ble	.L299
1592:bluetooth_rxtx.c **** 		}
1593:bluetooth_rxtx.c **** 
1594:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
1595:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
1596:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
1597:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
1598:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
1599:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1600:bluetooth_rxtx.c **** 		}
1601:bluetooth_rxtx.c **** */
1602:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 6298              		.loc 1 1602 0 is_stmt 1
 6299 0206 BB6F     		ldr	r3, [r7, #120]
 6300 0208 0533     		adds	r3, r3, #5
 6301 020a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6302 020c 03F03F03 		and	r3, r3, #63
 6303 0210 0233     		adds	r3, r3, #2
 6304 0212 FB66     		str	r3, [r7, #108]
1603:bluetooth_rxtx.c **** 		
1604:bluetooth_rxtx.c **** 		if (len > 39)
 6305              		.loc 1 1604 0
 6306 0214 FB6E     		ldr	r3, [r7, #108]
 6307 0216 272B     		cmp	r3, #39
 6308 0218 00D9     		bls	.L300
1605:bluetooth_rxtx.c **** 			goto rx_flush;
 6309              		.loc 1 1605 0
 6310 021a 40E0     		b	.L301
 6311              	.L300:
1606:bluetooth_rxtx.c **** 
1607:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 6312              		.loc 1 1607 0
 6313 021c 3A4B     		ldr	r3, .L310+32
 6314 021e D968     		ldr	r1, [r3, #12]
 6315 0220 BB6F     		ldr	r3, [r7, #120]
 6316 0222 1A1D     		adds	r2, r3, #4
 6317 0224 FB6E     		ldr	r3, [r7, #108]
 6318 0226 0846     		mov	r0, r1
 6319 0228 1146     		mov	r1, r2
 6320 022a 1A46     		mov	r2, r3
 6321 022c FFF7FEFF 		bl	btle_crcgen_lut
 6322 0230 B866     		str	r0, [r7, #104]
1608:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 6323              		.loc 1 1608 0
 6324 0232 FB6E     		ldr	r3, [r7, #108]
 6325 0234 0633     		adds	r3, r3, #6
 6326 0236 BA6F     		ldr	r2, [r7, #120]
 6327 0238 1344     		add	r3, r3, r2
 6328 023a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6329 023c 1A04     		lsls	r2, r3, #16
1609:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 6330              		.loc 1 1609 0
ARM GAS  /tmp/ccxwuSCA.s 			page 139


 6331 023e FB6E     		ldr	r3, [r7, #108]
 6332 0240 0533     		adds	r3, r3, #5
 6333 0242 B96F     		ldr	r1, [r7, #120]
 6334 0244 0B44     		add	r3, r3, r1
 6335 0246 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6336 0248 1B02     		lsls	r3, r3, #8
 6337 024a 1343     		orrs	r3, r3, r2
1610:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 6338              		.loc 1 1610 0
 6339 024c FA6E     		ldr	r2, [r7, #108]
 6340 024e 0432     		adds	r2, r2, #4
 6341 0250 B96F     		ldr	r1, [r7, #120]
 6342 0252 0A44     		add	r2, r2, r1
 6343 0254 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6344 0256 1343     		orrs	r3, r3, r2
1608:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 6345              		.loc 1 1608 0
 6346 0258 7B66     		str	r3, [r7, #100]
1611:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 6347              		.loc 1 1611 0
 6348 025a BA6E     		ldr	r2, [r7, #104]
 6349 025c 7B6E     		ldr	r3, [r7, #100]
 6350 025e 9A42     		cmp	r2, r3
 6351 0260 00D0     		beq	.L302
1612:bluetooth_rxtx.c ****                         goto rx_flush;
 6352              		.loc 1 1612 0
 6353 0262 1CE0     		b	.L301
 6354              	.L302:
1613:bluetooth_rxtx.c **** 
1614:bluetooth_rxtx.c **** 		
1615:bluetooth_rxtx.c **** 		if (p[38] == 0x00 && p[39] == 0x3d)
 6355              		.loc 1 1615 0
 6356 0264 BB6F     		ldr	r3, [r7, #120]
 6357 0266 2633     		adds	r3, r3, #38
 6358 0268 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6359 026a 002B     		cmp	r3, #0
 6360 026c 14D1     		bne	.L303
 6361              		.loc 1 1615 0 is_stmt 0 discriminator 1
 6362 026e BB6F     		ldr	r3, [r7, #120]
 6363 0270 2733     		adds	r3, r3, #39
 6364 0272 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6365 0274 3D2B     		cmp	r3, #61
 6366 0276 0FD1     		bne	.L303
1616:bluetooth_rxtx.c **** 		{
1617:bluetooth_rxtx.c **** 			device_index = p[40];
 6367              		.loc 1 1617 0 is_stmt 1
 6368 0278 BB6F     		ldr	r3, [r7, #120]
 6369 027a 93F82820 		ldrb	r2, [r3, #40]	@ zero_extendqisi2
 6370 027e 274B     		ldr	r3, .L310+52
 6371 0280 1A70     		strb	r2, [r3]
1618:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)packet);
1619:bluetooth_rxtx.c **** 			enqueue (MESSAGE, freq_buf);
 6372              		.loc 1 1619 0
 6373 0282 07F13403 		add	r3, r7, #52
 6374 0286 0220     		movs	r0, #2
 6375 0288 1946     		mov	r1, r3
 6376 028a FFF7FEFF 		bl	enqueue
ARM GAS  /tmp/ccxwuSCA.s 			page 140


1620:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
1621:bluetooth_rxtx.c **** 			handle_usb(clkn);
 6377              		.loc 1 1621 0
 6378 028e 244B     		ldr	r3, .L310+56
 6379 0290 1B68     		ldr	r3, [r3]
 6380 0292 1846     		mov	r0, r3
 6381 0294 FFF7FEFF 		bl	handle_usb
 6382              	.L303:
1622:bluetooth_rxtx.c **** 		}
1623:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
1624:bluetooth_rxtx.c **** //		handle_usb(clkn);
1625:bluetooth_rxtx.c **** 		RXLED_CLR;
 6383              		.loc 1 1625 0
 6384 0298 134B     		ldr	r3, .L310
 6385 029a 1022     		movs	r2, #16
 6386 029c 1A60     		str	r2, [r3]
 6387              	.L301:
1626:bluetooth_rxtx.c **** 	       
1627:bluetooth_rxtx.c **** 	rx_flush:
1628:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 6388              		.loc 1 1628 0
 6389 029e 6420     		movs	r0, #100
 6390 02a0 FFF7FEFF 		bl	cc2400_strobe
1629:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 6391              		.loc 1 1629 0
 6392 02a4 00BF     		nop
 6393              	.L304:
 6394              		.loc 1 1629 0 is_stmt 0 discriminator 1
 6395 02a6 FFF7FEFF 		bl	cc2400_status
 6396 02aa 0346     		mov	r3, r0
 6397 02ac 03F00403 		and	r3, r3, #4
 6398 02b0 002B     		cmp	r3, #0
 6399 02b2 F8D1     		bne	.L304
1630:bluetooth_rxtx.c **** 
1631:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 6400              		.loc 1 1631 0 is_stmt 1
 6401 02b4 00BF     		nop
 6402              	.L305:
 6403              		.loc 1 1631 0 is_stmt 0 discriminator 1
 6404 02b6 FFF7FEFF 		bl	cc2400_status
 6405 02ba 0346     		mov	r3, r0
 6406 02bc 03F04003 		and	r3, r3, #64
 6407 02c0 002B     		cmp	r3, #0
 6408 02c2 F8D0     		beq	.L305
1632:bluetooth_rxtx.c **** 
1633:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 6409              		.loc 1 1633 0 is_stmt 1
 6410 02c4 6120     		movs	r0, #97
 6411 02c6 FFF7FEFF 		bl	cc2400_strobe
1634:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 6412              		.loc 1 1634 0
 6413 02ca 00BF     		nop
 6414              	.L306:
 6415              		.loc 1 1634 0 is_stmt 0 discriminator 1
 6416 02cc FFF7FEFF 		bl	cc2400_status
 6417 02d0 0346     		mov	r3, r0
 6418 02d2 03F00403 		and	r3, r3, #4
ARM GAS  /tmp/ccxwuSCA.s 			page 141


 6419 02d6 002B     		cmp	r3, #0
 6420 02d8 F8D0     		beq	.L306
1635:bluetooth_rxtx.c **** 
1636:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6421              		.loc 1 1636 0 is_stmt 1
 6422 02da 0D4A     		ldr	r2, .L310+40
 6423 02dc 0C4B     		ldr	r3, .L310+40
 6424 02de 1B68     		ldr	r3, [r3]
 6425 02e0 23F00103 		bic	r3, r3, #1
 6426 02e4 1360     		str	r3, [r2]
1637:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6427              		.loc 1 1637 0
 6428 02e6 21E0     		b	.L307
 6429              	.L311:
 6430              		.align	2
 6431              	.L310:
 6432 02e8 3CC00920 		.word	537509948
 6433 02ec D6BE898E 		.word	-1903575338
 6434 02f0 58C00920 		.word	537509976
 6435 02f4 00000000 		.word	channel
 6436 02f8 00000000 		.word	rx_tc
 6437 02fc 38C00920 		.word	537509944
 6438 0300 00000000 		.word	rx_err
 6439 0304 00000000 		.word	status
 6440 0308 00000000 		.word	le
 6441 030c 10410050 		.word	1342193936
 6442 0310 24000340 		.word	1073938468
 6443 0314 10010000 		.word	whitening_word
 6444 0318 00000000 		.word	rxbuf1
 6445 031c 00000000 		.word	device_index
 6446 0320 00000000 		.word	clkn
 6447              	.L308:
 6448              	.LBB5:
1638:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 6449              		.loc 1 1638 0
 6450 0324 114B     		ldr	r3, .L312
 6451 0326 1B68     		ldr	r3, [r3]
 6452 0328 87F86330 		strb	r3, [r7, #99]
 6453              	.L307:
 6454              	.LBE5:
1637:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 6455              		.loc 1 1637 0
 6456 032c 104B     		ldr	r3, .L312+4
 6457 032e 1B68     		ldr	r3, [r3]
 6458 0330 03F00403 		and	r3, r3, #4
 6459 0334 002B     		cmp	r3, #0
 6460 0336 F5D1     		bne	.L308
1639:bluetooth_rxtx.c ****                 }
1640:bluetooth_rxtx.c **** 		dma_init_le();
 6461              		.loc 1 1640 0
 6462 0338 FFF7FEFF 		bl	dma_init_le
1641:bluetooth_rxtx.c **** 		dio_ssp_start();
 6463              		.loc 1 1641 0
 6464 033c FFF7FEFF 		bl	dio_ssp_start
1642:bluetooth_rxtx.c **** 		
1643:bluetooth_rxtx.c **** //              msleep(500);    
1644:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
ARM GAS  /tmp/ccxwuSCA.s 			page 142


 6465              		.loc 1 1644 0
 6466 0340 6220     		movs	r0, #98
 6467 0342 FFF7FEFF 		bl	cc2400_strobe
1645:bluetooth_rxtx.c **** 		rx_tc = 0;
 6468              		.loc 1 1645 0
 6469 0346 0B4B     		ldr	r3, .L312+8
 6470 0348 0022     		movs	r2, #0
 6471 034a 1A60     		str	r2, [r3]
1646:bluetooth_rxtx.c **** 		rx_err = 0;
 6472              		.loc 1 1646 0
 6473 034c 0A4B     		ldr	r3, .L312+12
 6474 034e 0022     		movs	r2, #0
 6475 0350 1A60     		str	r2, [r3]
 6476              	.L287:
 6477              	.LBE3:
1547:bluetooth_rxtx.c **** 		
 6478              		.loc 1 1547 0
 6479 0352 0A4B     		ldr	r3, .L312+16
 6480 0354 1B78     		ldrb	r3, [r3]
 6481 0356 DBB2     		uxtb	r3, r3
 6482 0358 012B     		cmp	r3, #1
 6483 035a 3FF4B5AE 		beq	.L309
1647:bluetooth_rxtx.c **** 	 
1648:bluetooth_rxtx.c **** 	
1649:bluetooth_rxtx.c **** 	}
1650:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 6484              		.loc 1 1650 0
 6485 035e FFF7FEFF 		bl	dio_ssp_stop
1651:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 6486              		.loc 1 1651 0
 6487 0362 FFF7FEFF 		bl	cs_trigger_disable
1652:bluetooth_rxtx.c **** }
 6488              		.loc 1 1652 0
 6489 0366 8437     		adds	r7, r7, #132
 6490              		.cfi_def_cfa_offset 12
 6491 0368 BD46     		mov	sp, r7
 6492              		.cfi_def_cfa_register 13
 6493              		@ sp needed
 6494 036a 90BD     		pop	{r4, r7, pc}
 6495              	.L313:
 6496              		.align	2
 6497              	.L312:
 6498 036c 08000340 		.word	1073938440
 6499 0370 0C000340 		.word	1073938444
 6500 0374 00000000 		.word	rx_tc
 6501 0378 00000000 		.word	rx_err
 6502 037c 00000000 		.word	requested_mode
 6503              		.cfi_endproc
 6504              	.LFE28:
 6506              		.section	.text.le_set_access_address,"ax",%progbits
 6507              		.align	2
 6508              		.thumb
 6509              		.thumb_func
 6511              	le_set_access_address:
 6512              	.LFB29:
1653:bluetooth_rxtx.c **** /*		
1654:bluetooth_rxtx.c **** 		
ARM GAS  /tmp/ccxwuSCA.s 			page 143


1655:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1656:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
1657:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
1658:bluetooth_rxtx.c **** 
1659:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
1660:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
1661:bluetooth_rxtx.c ****                      uint32_t v = rxbuf1[i+0] << 24
1662:bluetooth_rxtx.c ****                                            | rxbuf1[i+1] << 16
1663:bluetooth_rxtx.c ****                                            | rxbuf1[i+2] << 8
1664:bluetooth_rxtx.c ****                                            | rxbuf1[i+3] << 0;
1665:bluetooth_rxtx.c ****                      packet[i/4+1] = rbit(v) ^ whit[i/4];
1666:bluetooth_rxtx.c ****         	}
1667:bluetooth_rxtx.c **** 
1668:bluetooth_rxtx.c ****                 unsigned len = (p[5] & 0x3f) + 2;
1669:bluetooth_rxtx.c **** 		if (len > 39)
1670:bluetooth_rxtx.c **** 			goto rx_flush;
1671:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
1672:bluetooth_rxtx.c **** 		
1673:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
1674:bluetooth_rxtx.c **** 		       while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
1675:bluetooth_rxtx.c ****                                 ;
1676:bluetooth_rxtx.c ****                 } else { // max transfers? just wait till DMA's done
1677:bluetooth_rxtx.c ****                         while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
1678:bluetooth_rxtx.c ****                                 ;
1679:bluetooth_rxtx.c ****                 }
1680:bluetooth_rxtx.c **** 			
1681:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1682:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
1683:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
1684:bluetooth_rxtx.c ****                                            | rxbuf1[i+1] << 16
1685:bluetooth_rxtx.c ****                                        | rxbuf1[i+2] << 8
1686:bluetooth_rxtx.c ****                                            | rxbuf1[i+3] << 0;
1687:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1688:bluetooth_rxtx.c **** 		}
1689:bluetooth_rxtx.c **** 		
1690:bluetooth_rxtx.c **** 		if (le.crc_verify) {
1691:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
1692:bluetooth_rxtx.c **** 			 u32 wire_crc = (p[4+len+2] << 16)
1693:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
1694:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
1695:bluetooth_rxtx.c ****                         if (calc_crc != wire_crc) // skip packets with a bad CRC
1696:bluetooth_rxtx.c ****                                 goto rx_flush;
1697:bluetooth_rxtx.c **** 		}
1698:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, (uint8_t *)packet);
1699:bluetooth_rxtx.c **** 		handle_usb(clkn);
1700:bluetooth_rxtx.c **** 
1701:bluetooth_rxtx.c **** 	rx_flush:
1702:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1703:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
1704:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
1705:bluetooth_rxtx.c ****                 }
1706:bluetooth_rxtx.c **** 
1707:bluetooth_rxtx.c **** 		dma_init_le();
1708:bluetooth_rxtx.c **** 		dio_ssp_start ();
1709:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
1710:bluetooth_rxtx.c **** 		rx_tc = 0;
1711:bluetooth_rxtx.c **** 		rx_err = 0;
ARM GAS  /tmp/ccxwuSCA.s 			page 144


1712:bluetooth_rxtx.c **** 		RXLED_CLR;
1713:bluetooth_rxtx.c **** 
1714:bluetooth_rxtx.c **** 	}
1715:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
1716:bluetooth_rxtx.c **** }
1717:bluetooth_rxtx.c **** */
1718:bluetooth_rxtx.c **** 
1719:bluetooth_rxtx.c **** 
1720:bluetooth_rxtx.c **** /* set LE access address */
1721:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 6513              		.loc 1 1721 0
 6514              		.cfi_startproc
 6515              		@ args = 0, pretend = 0, frame = 16
 6516              		@ frame_needed = 1, uses_anonymous_args = 0
 6517 0000 80B5     		push	{r7, lr}
 6518              		.cfi_def_cfa_offset 8
 6519              		.cfi_offset 7, -8
 6520              		.cfi_offset 14, -4
 6521 0002 84B0     		sub	sp, sp, #16
 6522              		.cfi_def_cfa_offset 24
 6523 0004 00AF     		add	r7, sp, #0
 6524              		.cfi_def_cfa_register 7
 6525 0006 7860     		str	r0, [r7, #4]
1722:bluetooth_rxtx.c **** 	u32 aa_rev;
1723:bluetooth_rxtx.c **** 
1724:bluetooth_rxtx.c **** 	le.access_address = aa;
 6526              		.loc 1 1724 0
 6527 0008 094A     		ldr	r2, .L315
 6528 000a 7B68     		ldr	r3, [r7, #4]
 6529 000c 1360     		str	r3, [r2]
1725:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 6530              		.loc 1 1725 0
 6531 000e 7868     		ldr	r0, [r7, #4]
 6532 0010 FFF7FEFF 		bl	rbit
 6533 0014 F860     		str	r0, [r7, #12]
1726:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 6534              		.loc 1 1726 0
 6535 0016 FB68     		ldr	r3, [r7, #12]
 6536 0018 9AB2     		uxth	r2, r3
 6537 001a 054B     		ldr	r3, .L315
 6538 001c DA80     		strh	r2, [r3, #6]	@ movhi
1727:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 6539              		.loc 1 1727 0
 6540 001e FB68     		ldr	r3, [r7, #12]
 6541 0020 1B0C     		lsrs	r3, r3, #16
 6542 0022 9AB2     		uxth	r2, r3
 6543 0024 024B     		ldr	r3, .L315
 6544 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1728:bluetooth_rxtx.c **** }
 6545              		.loc 1 1728 0
 6546 0028 1037     		adds	r7, r7, #16
 6547              		.cfi_def_cfa_offset 8
 6548 002a BD46     		mov	sp, r7
 6549              		.cfi_def_cfa_register 13
 6550              		@ sp needed
 6551 002c 80BD     		pop	{r7, pc}
 6552              	.L316:
ARM GAS  /tmp/ccxwuSCA.s 			page 145


 6553 002e 00BF     		.align	2
 6554              	.L315:
 6555 0030 00000000 		.word	le
 6556              		.cfi_endproc
 6557              	.LFE29:
 6559              		.section	.text.reset_le,"ax",%progbits
 6560              		.align	2
 6561              		.global	reset_le
 6562              		.thumb
 6563              		.thumb_func
 6565              	reset_le:
 6566              	.LFB30:
1729:bluetooth_rxtx.c **** 
1730:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1731:bluetooth_rxtx.c **** void reset_le() {
 6567              		.loc 1 1731 0
 6568              		.cfi_startproc
 6569              		@ args = 0, pretend = 0, frame = 0
 6570              		@ frame_needed = 1, uses_anonymous_args = 0
 6571 0000 80B5     		push	{r7, lr}
 6572              		.cfi_def_cfa_offset 8
 6573              		.cfi_offset 7, -8
 6574              		.cfi_offset 14, -4
 6575 0002 00AF     		add	r7, sp, #0
 6576              		.cfi_def_cfa_register 7
1732:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 6577              		.loc 1 1732 0
 6578 0004 1F48     		ldr	r0, .L318
 6579 0006 FFF7FEFF 		bl	le_set_access_address
1733:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 6580              		.loc 1 1733 0
 6581 000a 1F4B     		ldr	r3, .L318+4
 6582 000c 1F4A     		ldr	r2, .L318+8
 6583 000e 9A60     		str	r2, [r3, #8]
1734:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 6584              		.loc 1 1734 0
 6585 0010 1D4B     		ldr	r3, .L318+4
 6586 0012 1F4A     		ldr	r2, .L318+12
 6587 0014 DA60     		str	r2, [r3, #12]
1735:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 6588              		.loc 1 1735 0
 6589 0016 1C4B     		ldr	r3, .L318+4
 6590 0018 0122     		movs	r2, #1
 6591 001a 1A61     		str	r2, [r3, #16]
1736:bluetooth_rxtx.c **** 	le.last_packet = 0;
 6592              		.loc 1 1736 0
 6593 001c 1A4B     		ldr	r3, .L318+4
 6594 001e 0022     		movs	r2, #0
 6595 0020 1A64     		str	r2, [r3, #64]
1737:bluetooth_rxtx.c **** 
1738:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 6596              		.loc 1 1738 0
 6597 0022 194B     		ldr	r3, .L318+4
 6598 0024 0022     		movs	r2, #0
 6599 0026 1A75     		strb	r2, [r3, #20]
1739:bluetooth_rxtx.c **** 
1740:bluetooth_rxtx.c **** 	le.channel_idx = 0;
ARM GAS  /tmp/ccxwuSCA.s 			page 146


 6600              		.loc 1 1740 0
 6601 0028 174B     		ldr	r3, .L318+4
 6602 002a 0022     		movs	r2, #0
 6603 002c 5A75     		strb	r2, [r3, #21]
1741:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 6604              		.loc 1 1741 0
 6605 002e 164B     		ldr	r3, .L318+4
 6606 0030 0022     		movs	r2, #0
 6607 0032 9A75     		strb	r2, [r3, #22]
1742:bluetooth_rxtx.c **** 
1743:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 6608              		.loc 1 1743 0
 6609 0034 144B     		ldr	r3, .L318+4
 6610 0036 0022     		movs	r2, #0
 6611 0038 9A61     		str	r2, [r3, #24]
1744:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 6612              		.loc 1 1744 0
 6613 003a 134B     		ldr	r3, .L318+4
 6614 003c 0022     		movs	r2, #0
 6615 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1745:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6616              		.loc 1 1745 0
 6617 0040 114B     		ldr	r3, .L318+4
 6618 0042 0022     		movs	r2, #0
 6619 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1746:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6620              		.loc 1 1746 0
 6621 0046 104B     		ldr	r3, .L318+4
 6622 0048 0022     		movs	r2, #0
 6623 004a DA83     		strh	r2, [r3, #30]	@ movhi
1747:bluetooth_rxtx.c **** 	le.conn_count = 0;
 6624              		.loc 1 1747 0
 6625 004c 0E4B     		ldr	r3, .L318+4
 6626 004e 0022     		movs	r2, #0
 6627 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1748:bluetooth_rxtx.c **** 
1749:bluetooth_rxtx.c **** 	le.win_size = 0;
 6628              		.loc 1 1749 0
 6629 0052 0D4B     		ldr	r3, .L318+4
 6630 0054 0022     		movs	r2, #0
 6631 0056 83F82220 		strb	r2, [r3, #34]
1750:bluetooth_rxtx.c **** 	le.win_offset = 0;
 6632              		.loc 1 1750 0
 6633 005a 0B4B     		ldr	r3, .L318+4
 6634 005c 0022     		movs	r2, #0
 6635 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1751:bluetooth_rxtx.c **** 
1752:bluetooth_rxtx.c **** 	le.update_pending = 0;
 6636              		.loc 1 1752 0
 6637 0060 094B     		ldr	r3, .L318+4
 6638 0062 0022     		movs	r2, #0
 6639 0064 9A62     		str	r2, [r3, #40]
1753:bluetooth_rxtx.c **** 	le.update_instant = 0;
 6640              		.loc 1 1753 0
 6641 0066 084B     		ldr	r3, .L318+4
 6642 0068 0022     		movs	r2, #0
 6643 006a 9A85     		strh	r2, [r3, #44]	@ movhi
ARM GAS  /tmp/ccxwuSCA.s 			page 147


1754:bluetooth_rxtx.c **** 	le.interval_update = 0;
 6644              		.loc 1 1754 0
 6645 006c 064B     		ldr	r3, .L318+4
 6646 006e 0022     		movs	r2, #0
 6647 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1755:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 6648              		.loc 1 1755 0
 6649 0072 054B     		ldr	r3, .L318+4
 6650 0074 0022     		movs	r2, #0
 6651 0076 83F83020 		strb	r2, [r3, #48]
1756:bluetooth_rxtx.c **** 	le.win_offset_update;
1757:bluetooth_rxtx.c **** 
1758:bluetooth_rxtx.c **** 	do_hop = 0;
 6652              		.loc 1 1758 0
 6653 007a 064B     		ldr	r3, .L318+16
 6654 007c 0022     		movs	r2, #0
 6655 007e 1A70     		strb	r2, [r3]
1759:bluetooth_rxtx.c **** }
 6656              		.loc 1 1759 0
 6657 0080 80BD     		pop	{r7, pc}
 6658              	.L319:
 6659 0082 00BF     		.align	2
 6660              	.L318:
 6661 0084 D6BE898E 		.word	-1903575338
 6662 0088 00000000 		.word	le
 6663 008c 55555500 		.word	5592405
 6664 0090 AAAAAA00 		.word	11184810
 6665 0094 00000000 		.word	do_hop
 6666              		.cfi_endproc
 6667              	.LFE30:
 6669              		.section	.text.reset_le_promisc,"ax",%progbits
 6670              		.align	2
 6671              		.global	reset_le_promisc
 6672              		.thumb
 6673              		.thumb_func
 6675              	reset_le_promisc:
 6676              	.LFB31:
1760:bluetooth_rxtx.c **** 
1761:bluetooth_rxtx.c **** // reset LE Promisc state
1762:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 6677              		.loc 1 1762 0
 6678              		.cfi_startproc
 6679              		@ args = 0, pretend = 0, frame = 0
 6680              		@ frame_needed = 1, uses_anonymous_args = 0
 6681 0000 80B5     		push	{r7, lr}
 6682              		.cfi_def_cfa_offset 8
 6683              		.cfi_offset 7, -8
 6684              		.cfi_offset 14, -4
 6685 0002 00AF     		add	r7, sp, #0
 6686              		.cfi_def_cfa_register 7
1763:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 6687              		.loc 1 1763 0
 6688 0004 0548     		ldr	r0, .L321
 6689 0006 0021     		movs	r1, #0
 6690 0008 4FF48472 		mov	r2, #264
 6691 000c FFF7FEFF 		bl	memset
1764:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
ARM GAS  /tmp/ccxwuSCA.s 			page 148


 6692              		.loc 1 1764 0
 6693 0010 024B     		ldr	r3, .L321
 6694 0012 4FF0FF32 		mov	r2, #-1
 6695 0016 C3F80021 		str	r2, [r3, #256]
1765:bluetooth_rxtx.c **** }
 6696              		.loc 1 1765 0
 6697 001a 80BD     		pop	{r7, pc}
 6698              	.L322:
 6699              		.align	2
 6700              	.L321:
 6701 001c 00000000 		.word	le_promisc
 6702              		.cfi_endproc
 6703              	.LFE31:
 6705              		.section	.text.bt_generic_le,"ax",%progbits
 6706              		.align	2
 6707              		.global	bt_generic_le
 6708              		.thumb
 6709              		.thumb_func
 6711              	bt_generic_le:
 6712              	.LFB32:
1766:bluetooth_rxtx.c **** 
1767:bluetooth_rxtx.c **** /* generic le mode */
1768:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1769:bluetooth_rxtx.c **** {
 6713              		.loc 1 1769 0
 6714              		.cfi_startproc
 6715              		@ args = 0, pretend = 0, frame = 32
 6716              		@ frame_needed = 1, uses_anonymous_args = 0
 6717 0000 80B5     		push	{r7, lr}
 6718              		.cfi_def_cfa_offset 8
 6719              		.cfi_offset 7, -8
 6720              		.cfi_offset 14, -4
 6721 0002 88B0     		sub	sp, sp, #32
 6722              		.cfi_def_cfa_offset 40
 6723 0004 00AF     		add	r7, sp, #0
 6724              		.cfi_def_cfa_register 7
 6725 0006 0346     		mov	r3, r0
 6726 0008 FB71     		strb	r3, [r7, #7]
1770:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6727              		.loc 1 1770 0
 6728 000a 0023     		movs	r3, #0
 6729 000c FB60     		str	r3, [r7, #12]
1771:bluetooth_rxtx.c **** 	u8 hold;
1772:bluetooth_rxtx.c **** 	int i, j;
1773:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1774:bluetooth_rxtx.c **** 
1775:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6730              		.loc 1 1775 0
 6731 000e A44B     		ldr	r3, .L351
 6732 0010 0122     		movs	r2, #1
 6733 0012 1A70     		strb	r2, [r3]
1776:bluetooth_rxtx.c **** 	mode = active_mode;
 6734              		.loc 1 1776 0
 6735 0014 A34A     		ldr	r2, .L351+4
 6736 0016 FB79     		ldrb	r3, [r7, #7]
 6737 0018 1370     		strb	r3, [r2]
1777:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccxwuSCA.s 			page 149


1778:bluetooth_rxtx.c **** 	reset_le();
 6738              		.loc 1 1778 0
 6739 001a FFF7FEFF 		bl	reset_le
1779:bluetooth_rxtx.c **** 
1780:bluetooth_rxtx.c **** 	// enable USB interrupts
1781:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6740              		.loc 1 1781 0
 6741 001e A24B     		ldr	r3, .L351+8
 6742 0020 4FF08072 		mov	r2, #16777216
 6743 0024 1A60     		str	r2, [r3]
1782:bluetooth_rxtx.c **** 
1783:bluetooth_rxtx.c **** 	RXLED_CLR;
 6744              		.loc 1 1783 0
 6745 0026 A14B     		ldr	r3, .L351+12
 6746 0028 1022     		movs	r2, #16
 6747 002a 1A60     		str	r2, [r3]
1784:bluetooth_rxtx.c **** 
1785:bluetooth_rxtx.c **** 	queue_init();
 6748              		.loc 1 1785 0
 6749 002c FFF7FEFF 		bl	queue_init
1786:bluetooth_rxtx.c **** 	dio_ssp_init();
 6750              		.loc 1 1786 0
 6751 0030 FFF7FEFF 		bl	dio_ssp_init
1787:bluetooth_rxtx.c **** 	dma_init();
 6752              		.loc 1 1787 0
 6753 0034 FFF7FEFF 		bl	dma_init
1788:bluetooth_rxtx.c **** 	dio_ssp_start();
 6754              		.loc 1 1788 0
 6755 0038 FFF7FEFF 		bl	dio_ssp_start
1789:bluetooth_rxtx.c **** 	cc2400_rx();
 6756              		.loc 1 1789 0
 6757 003c FFF7FEFF 		bl	cc2400_rx
1790:bluetooth_rxtx.c **** 
1791:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6758              		.loc 1 1791 0
 6759 0040 FFF7FEFF 		bl	cs_trigger_enable
1792:bluetooth_rxtx.c **** 
1793:bluetooth_rxtx.c **** 	hold = 0;
 6760              		.loc 1 1793 0
 6761 0044 0023     		movs	r3, #0
 6762 0046 FB77     		strb	r3, [r7, #31]
1794:bluetooth_rxtx.c **** 
1795:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6763              		.loc 1 1795 0
 6764 0048 15E1     		b	.L324
 6765              	.L350:
 6766              	.LBB6:
1796:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6767              		.loc 1 1796 0
 6768 004a 994B     		ldr	r3, .L351+16
 6769 004c 1B88     		ldrh	r3, [r3]	@ movhi
 6770 004e 9BB2     		uxth	r3, r3
 6771 0050 002B     		cmp	r3, #0
 6772 0052 24D0     		beq	.L325
1797:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6773              		.loc 1 1797 0
 6774 0054 6420     		movs	r0, #100
ARM GAS  /tmp/ccxwuSCA.s 			page 150


 6775 0056 FFF7FEFF 		bl	cc2400_strobe
1798:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6776              		.loc 1 1798 0
 6777 005a 00BF     		nop
 6778              	.L326:
 6779              		.loc 1 1798 0 is_stmt 0 discriminator 1
 6780 005c FFF7FEFF 		bl	cc2400_status
 6781 0060 0346     		mov	r3, r0
 6782 0062 03F00403 		and	r3, r3, #4
 6783 0066 002B     		cmp	r3, #0
 6784 0068 F8D1     		bne	.L326
1799:bluetooth_rxtx.c **** 
1800:bluetooth_rxtx.c **** 			/* Retune */
1801:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6785              		.loc 1 1801 0 is_stmt 1
 6786 006a 924B     		ldr	r3, .L351+20
 6787 006c 1B88     		ldrh	r3, [r3]	@ movhi
 6788 006e 9BB2     		uxth	r3, r3
 6789 0070 013B     		subs	r3, r3, #1
 6790 0072 9BB2     		uxth	r3, r3
 6791 0074 0220     		movs	r0, #2
 6792 0076 1946     		mov	r1, r3
 6793 0078 FFF7FEFF 		bl	cc2400_set
1802:bluetooth_rxtx.c **** 
1803:bluetooth_rxtx.c **** 			/* Wait for lock */
1804:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6794              		.loc 1 1804 0
 6795 007c 6120     		movs	r0, #97
 6796 007e FFF7FEFF 		bl	cc2400_strobe
1805:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6797              		.loc 1 1805 0
 6798 0082 00BF     		nop
 6799              	.L327:
 6800              		.loc 1 1805 0 is_stmt 0 discriminator 1
 6801 0084 FFF7FEFF 		bl	cc2400_status
 6802 0088 0346     		mov	r3, r0
 6803 008a 03F00403 		and	r3, r3, #4
 6804 008e 002B     		cmp	r3, #0
 6805 0090 F8D0     		beq	.L327
1806:bluetooth_rxtx.c **** 
1807:bluetooth_rxtx.c **** 			/* RX mode */
1808:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6806              		.loc 1 1808 0 is_stmt 1
 6807 0092 6220     		movs	r0, #98
 6808 0094 FFF7FEFF 		bl	cc2400_strobe
1809:bluetooth_rxtx.c **** 
1810:bluetooth_rxtx.c **** 			requested_channel = 0;
 6809              		.loc 1 1810 0
 6810 0098 854B     		ldr	r3, .L351+16
 6811 009a 0022     		movs	r2, #0
 6812 009c 1A80     		strh	r2, [r3]	@ movhi
 6813              	.L325:
1811:bluetooth_rxtx.c **** 		}
1812:bluetooth_rxtx.c **** 
1813:bluetooth_rxtx.c **** 		if (do_hop) {
 6814              		.loc 1 1813 0
 6815 009e 864B     		ldr	r3, .L351+24
ARM GAS  /tmp/ccxwuSCA.s 			page 151


 6816 00a0 1B78     		ldrb	r3, [r3]
 6817 00a2 DBB2     		uxtb	r3, r3
 6818 00a4 002B     		cmp	r3, #0
 6819 00a6 02D0     		beq	.L328
1814:bluetooth_rxtx.c **** 			hop();
 6820              		.loc 1 1814 0
 6821 00a8 FFF7FEFF 		bl	hop
 6822 00ac 03E0     		b	.L329
 6823              	.L328:
1815:bluetooth_rxtx.c **** 		} else {
1816:bluetooth_rxtx.c **** 			TXLED_CLR;
 6824              		.loc 1 1816 0
 6825 00ae 7F4B     		ldr	r3, .L351+12
 6826 00b0 4FF48072 		mov	r2, #256
 6827 00b4 1A60     		str	r2, [r3]
 6828              	.L329:
1817:bluetooth_rxtx.c **** 		}
1818:bluetooth_rxtx.c **** 
1819:bluetooth_rxtx.c **** 		RXLED_CLR;
 6829              		.loc 1 1819 0
 6830 00b6 7D4B     		ldr	r3, .L351+12
 6831 00b8 1022     		movs	r2, #16
 6832 00ba 1A60     		str	r2, [r3]
1820:bluetooth_rxtx.c **** 
1821:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1822:bluetooth_rxtx.c **** 		rssi_reset();
 6833              		.loc 1 1822 0
 6834 00bc FFF7FEFF 		bl	rssi_reset
1823:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6835              		.loc 1 1823 0
 6836 00c0 8023     		movs	r3, #128
 6837 00c2 BB74     		strb	r3, [r7, #18]
1824:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 6838              		.loc 1 1824 0
 6839 00c4 22E0     		b	.L330
 6840              	.L333:
1825:bluetooth_rxtx.c **** 		{
1826:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6841              		.loc 1 1826 0
 6842 00c6 0620     		movs	r0, #6
 6843 00c8 FFF7FEFF 		bl	cc2400_get
 6844 00cc 0346     		mov	r3, r0
 6845 00ce 1B0A     		lsrs	r3, r3, #8
 6846 00d0 9BB2     		uxth	r3, r3
 6847 00d2 FB74     		strb	r3, [r7, #19]
1827:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6848              		.loc 1 1827 0
 6849 00d4 794B     		ldr	r3, .L351+28
 6850 00d6 1B78     		ldrb	r3, [r3]
 6851 00d8 DBB2     		uxtb	r3, r3
 6852 00da 002B     		cmp	r3, #0
 6853 00dc 11D0     		beq	.L331
 6854              		.loc 1 1827 0 is_stmt 0 discriminator 1
 6855 00de 97F91230 		ldrsb	r3, [r7, #18]
 6856 00e2 13F1800F 		cmn	r3, #128
 6857 00e6 0CD1     		bne	.L331
1828:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
ARM GAS  /tmp/ccxwuSCA.s 			page 152


 6858              		.loc 1 1828 0 is_stmt 1
 6859 00e8 754B     		ldr	r3, .L351+32
 6860 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6861 00ec 5BB2     		sxtb	r3, r3
 6862 00ee 03F13602 		add	r2, r3, #54
 6863 00f2 97F91330 		ldrsb	r3, [r7, #19]
 6864 00f6 9342     		cmp	r3, r2
 6865 00f8 B8BF     		it	lt
 6866 00fa 1346     		movlt	r3, r2
 6867 00fc FB74     		strb	r3, [r7, #19]
1829:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6868              		.loc 1 1829 0
 6869 00fe FB7C     		ldrb	r3, [r7, #19]
 6870 0100 BB74     		strb	r3, [r7, #18]
 6871              	.L331:
1830:bluetooth_rxtx.c **** 			}
1831:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6872              		.loc 1 1831 0
 6873 0102 97F91330 		ldrsb	r3, [r7, #19]
 6874 0106 1846     		mov	r0, r3
 6875 0108 FFF7FEFF 		bl	rssi_add
 6876              	.L330:
1824:bluetooth_rxtx.c **** 		{
 6877              		.loc 1 1824 0
 6878 010c 6D4B     		ldr	r3, .L351+36
 6879 010e 1B68     		ldr	r3, [r3]
 6880 0110 002B     		cmp	r3, #0
 6881 0112 03D1     		bne	.L332
1824:bluetooth_rxtx.c **** 		{
 6882              		.loc 1 1824 0 is_stmt 0 discriminator 1
 6883 0114 6C4B     		ldr	r3, .L351+40
 6884 0116 1B68     		ldr	r3, [r3]
 6885 0118 002B     		cmp	r3, #0
 6886 011a D4D0     		beq	.L333
 6887              	.L332:
1832:bluetooth_rxtx.c **** 		}
1833:bluetooth_rxtx.c **** 
1834:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1835:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 6888              		.loc 1 1835 0 is_stmt 1
 6889 011c 694B     		ldr	r3, .L351+36
 6890 011e 1B68     		ldr	r3, [r3]
 6891 0120 03F00103 		and	r3, r3, #1
 6892 0124 002B     		cmp	r3, #0
 6893 0126 09D0     		beq	.L334
1836:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 6894              		.loc 1 1836 0
 6895 0128 684B     		ldr	r3, .L351+44
 6896 012a 1B68     		ldr	r3, [r3]
 6897 012c FB60     		str	r3, [r7, #12]
1837:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 6898              		.loc 1 1837 0
 6899 012e 684B     		ldr	r3, .L351+48
 6900 0130 1B68     		ldr	r3, [r3]
 6901 0132 664A     		ldr	r2, .L351+44
 6902 0134 1360     		str	r3, [r2]
1838:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
ARM GAS  /tmp/ccxwuSCA.s 			page 153


 6903              		.loc 1 1838 0
 6904 0136 664A     		ldr	r2, .L351+48
 6905 0138 FB68     		ldr	r3, [r7, #12]
 6906 013a 1360     		str	r3, [r2]
 6907              	.L334:
1839:bluetooth_rxtx.c **** 		}
1840:bluetooth_rxtx.c **** 
1841:bluetooth_rxtx.c **** 		if (rx_err) {
 6908              		.loc 1 1841 0
 6909 013c 624B     		ldr	r3, .L351+40
 6910 013e 1B68     		ldr	r3, [r3]
 6911 0140 002B     		cmp	r3, #0
 6912 0142 07D0     		beq	.L335
1842:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6913              		.loc 1 1842 0
 6914 0144 634B     		ldr	r3, .L351+52
 6915 0146 1B78     		ldrb	r3, [r3]
 6916 0148 DBB2     		uxtb	r3, r3
 6917 014a 43F00203 		orr	r3, r3, #2
 6918 014e DAB2     		uxtb	r2, r3
 6919 0150 604B     		ldr	r3, .L351+52
 6920 0152 1A70     		strb	r2, [r3]
 6921              	.L335:
1843:bluetooth_rxtx.c **** 		}
1844:bluetooth_rxtx.c **** 
1845:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1846:bluetooth_rxtx.c **** 		if (!rx_tc)
 6922              		.loc 1 1846 0
 6923 0154 5B4B     		ldr	r3, .L351+36
 6924 0156 1B68     		ldr	r3, [r3]
 6925 0158 002B     		cmp	r3, #0
 6926 015a 00D1     		bne	.L336
1847:bluetooth_rxtx.c **** 			goto rx_continue;
 6927              		.loc 1 1847 0
 6928 015c 85E0     		b	.L337
 6929              	.L336:
1848:bluetooth_rxtx.c **** 
1849:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1850:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6930              		.loc 1 1850 0
 6931 015e 594B     		ldr	r3, .L351+36
 6932 0160 1B68     		ldr	r3, [r3]
 6933 0162 012B     		cmp	r3, #1
 6934 0164 07D9     		bls	.L338
1851:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6935              		.loc 1 1851 0
 6936 0166 5B4B     		ldr	r3, .L351+52
 6937 0168 1B78     		ldrb	r3, [r3]
 6938 016a DBB2     		uxtb	r3, r3
 6939 016c 43F00103 		orr	r3, r3, #1
 6940 0170 DAB2     		uxtb	r2, r3
 6941 0172 584B     		ldr	r3, .L351+52
 6942 0174 1A70     		strb	r2, [r3]
 6943              	.L338:
1852:bluetooth_rxtx.c **** 
1853:bluetooth_rxtx.c **** 		rssi_iir_update();
 6944              		.loc 1 1853 0
ARM GAS  /tmp/ccxwuSCA.s 			page 154


 6945 0176 FFF7FEFF 		bl	rssi_iir_update
1854:bluetooth_rxtx.c **** 
1855:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1856:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1857:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1858:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1859:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6946              		.loc 1 1859 0
 6947 017a 504B     		ldr	r3, .L351+28
 6948 017c 1B78     		ldrb	r3, [r3]
 6949 017e DBB2     		uxtb	r3, r3
 6950 0180 002B     		cmp	r3, #0
 6951 0182 03D1     		bne	.L339
 6952              		.loc 1 1859 0 is_stmt 0 discriminator 1
 6953 0184 544B     		ldr	r3, .L351+56
 6954 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6955 0188 002B     		cmp	r3, #0
 6956 018a 0CD0     		beq	.L340
 6957              	.L339:
1860:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6958              		.loc 1 1860 0 is_stmt 1
 6959 018c 514B     		ldr	r3, .L351+52
 6960 018e 1B78     		ldrb	r3, [r3]
 6961 0190 DBB2     		uxtb	r3, r3
 6962 0192 43F00803 		orr	r3, r3, #8
 6963 0196 DAB2     		uxtb	r2, r3
 6964 0198 4E4B     		ldr	r3, .L351+52
 6965 019a 1A70     		strb	r2, [r3]
1861:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6966              		.loc 1 1861 0
 6967 019c 0223     		movs	r3, #2
 6968 019e FB77     		strb	r3, [r7, #31]
1862:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6969              		.loc 1 1862 0
 6970 01a0 464B     		ldr	r3, .L351+28
 6971 01a2 0022     		movs	r2, #0
 6972 01a4 1A70     		strb	r2, [r3]
 6973              	.L340:
1863:bluetooth_rxtx.c **** 		}
1864:bluetooth_rxtx.c **** 
1865:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6974              		.loc 1 1865 0
 6975 01a6 4D4B     		ldr	r3, .L351+60
 6976 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6977 01aa 5AB2     		sxtb	r2, r3
 6978 01ac 444B     		ldr	r3, .L351+32
 6979 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6980 01b0 5BB2     		sxtb	r3, r3
 6981 01b2 3633     		adds	r3, r3, #54
 6982 01b4 9A42     		cmp	r2, r3
 6983 01b6 09DB     		blt	.L341
1866:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6984              		.loc 1 1866 0
 6985 01b8 464B     		ldr	r3, .L351+52
 6986 01ba 1B78     		ldrb	r3, [r3]
 6987 01bc DBB2     		uxtb	r3, r3
 6988 01be 43F01003 		orr	r3, r3, #16
ARM GAS  /tmp/ccxwuSCA.s 			page 155


 6989 01c2 DAB2     		uxtb	r2, r3
 6990 01c4 434B     		ldr	r3, .L351+52
 6991 01c6 1A70     		strb	r2, [r3]
1867:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6992              		.loc 1 1867 0
 6993 01c8 0223     		movs	r3, #2
 6994 01ca FB77     		strb	r3, [r7, #31]
 6995              	.L341:
1868:bluetooth_rxtx.c **** 		}
1869:bluetooth_rxtx.c **** 
1870:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1871:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1872:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 6996              		.loc 1 1872 0
 6997 01cc 444B     		ldr	r3, .L351+64
 6998 01ce 1B78     		ldrb	r3, [r3]
 6999 01d0 DBB2     		uxtb	r3, r3
 7000 01d2 002B     		cmp	r3, #0
 7001 01d4 07D0     		beq	.L342
1873:bluetooth_rxtx.c **** 			if (hold == 0)
 7002              		.loc 1 1873 0
 7003 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 7004 01d8 002B     		cmp	r3, #0
 7005 01da 01D1     		bne	.L343
1874:bluetooth_rxtx.c **** 				hold = 1;
 7006              		.loc 1 1874 0
 7007 01dc 0123     		movs	r3, #1
 7008 01de FB77     		strb	r3, [r7, #31]
 7009              	.L343:
1875:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 7010              		.loc 1 1875 0
 7011 01e0 3F4B     		ldr	r3, .L351+64
 7012 01e2 0022     		movs	r2, #0
 7013 01e4 1A70     		strb	r2, [r3]
 7014              	.L342:
1876:bluetooth_rxtx.c **** 		}
1877:bluetooth_rxtx.c **** 
1878:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1879:bluetooth_rxtx.c **** 		if (hold == 0) {
 7015              		.loc 1 1879 0
 7016 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 7017 01e8 002B     		cmp	r3, #0
 7018 01ea 00D1     		bne	.L344
1880:bluetooth_rxtx.c **** 			goto rx_continue;
 7019              		.loc 1 1880 0
 7020 01ec 3DE0     		b	.L337
 7021              	.L344:
1881:bluetooth_rxtx.c **** 		}
1882:bluetooth_rxtx.c **** 		hold--;
 7022              		.loc 1 1882 0
 7023 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 7024 01f0 013B     		subs	r3, r3, #1
 7025 01f2 FB77     		strb	r3, [r7, #31]
1883:bluetooth_rxtx.c **** 
1884:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1885:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 7026              		.loc 1 1885 0
ARM GAS  /tmp/ccxwuSCA.s 			page 156


 7027 01f4 3B48     		ldr	r0, .L351+68
 7028 01f6 3C49     		ldr	r1, .L351+72
 7029 01f8 4FF4C872 		mov	r2, #400
 7030 01fc FFF7FEFF 		bl	memcpy
1886:bluetooth_rxtx.c **** 
1887:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1888:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 7031              		.loc 1 1888 0
 7032 0200 0023     		movs	r3, #0
 7033 0202 BB61     		str	r3, [r7, #24]
 7034 0204 25E0     		b	.L345
 7035              	.L348:
1889:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1890:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 7036              		.loc 1 1890 0
 7037 0206 0023     		movs	r3, #0
 7038 0208 7B61     		str	r3, [r7, #20]
 7039 020a 1CE0     		b	.L346
 7040              	.L347:
1891:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7041              		.loc 1 1891 0 discriminator 3
 7042 020c BB69     		ldr	r3, [r7, #24]
 7043 020e 3233     		adds	r3, r3, #50
 7044 0210 DA00     		lsls	r2, r3, #3
 7045 0212 7B69     		ldr	r3, [r7, #20]
 7046 0214 1344     		add	r3, r3, r2
 7047 0216 2E4A     		ldr	r2, .L351+48
 7048 0218 1168     		ldr	r1, [r2]
 7049 021a BA69     		ldr	r2, [r7, #24]
 7050 021c 0A44     		add	r2, r2, r1
 7051 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7052 0220 D209     		lsrs	r2, r2, #7
 7053 0222 D1B2     		uxtb	r1, r2
 7054 0224 2F4A     		ldr	r2, .L351+68
 7055 0226 D154     		strb	r1, [r2, r3]
1892:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 7056              		.loc 1 1892 0 discriminator 3
 7057 0228 294B     		ldr	r3, .L351+48
 7058 022a 1A68     		ldr	r2, [r3]
 7059 022c BB69     		ldr	r3, [r7, #24]
 7060 022e 1344     		add	r3, r3, r2
 7061 0230 274A     		ldr	r2, .L351+48
 7062 0232 1168     		ldr	r1, [r2]
 7063 0234 BA69     		ldr	r2, [r7, #24]
 7064 0236 0A44     		add	r2, r2, r1
 7065 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7066 023a 5200     		lsls	r2, r2, #1
 7067 023c D2B2     		uxtb	r2, r2
 7068 023e 1A70     		strb	r2, [r3]
1890:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7069              		.loc 1 1890 0 discriminator 3
 7070 0240 7B69     		ldr	r3, [r7, #20]
 7071 0242 0133     		adds	r3, r3, #1
 7072 0244 7B61     		str	r3, [r7, #20]
 7073              	.L346:
1890:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 7074              		.loc 1 1890 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccxwuSCA.s 			page 157


 7075 0246 7B69     		ldr	r3, [r7, #20]
 7076 0248 072B     		cmp	r3, #7
 7077 024a DFDD     		ble	.L347
1888:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 7078              		.loc 1 1888 0 is_stmt 1 discriminator 2
 7079 024c BB69     		ldr	r3, [r7, #24]
 7080 024e 0133     		adds	r3, r3, #1
 7081 0250 BB61     		str	r3, [r7, #24]
 7082              	.L345:
1888:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 7083              		.loc 1 1888 0 is_stmt 0 discriminator 1
 7084 0252 BB69     		ldr	r3, [r7, #24]
 7085 0254 312B     		cmp	r3, #49
 7086 0256 D6DD     		ble	.L348
1893:bluetooth_rxtx.c **** 			}
1894:bluetooth_rxtx.c **** 		}
1895:bluetooth_rxtx.c **** 
1896:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 7087              		.loc 1 1896 0 is_stmt 1
 7088 0258 244B     		ldr	r3, .L351+76
 7089 025a 1B68     		ldr	r3, [r3]
 7090 025c 2148     		ldr	r0, .L351+68
 7091 025e 9847     		blx	r3
 7092 0260 B860     		str	r0, [r7, #8]
1897:bluetooth_rxtx.c **** 		if (!ret) break;
 7093              		.loc 1 1897 0
 7094 0262 BB68     		ldr	r3, [r7, #8]
 7095 0264 002B     		cmp	r3, #0
 7096 0266 00D1     		bne	.L337
 7097 0268 0CE0     		b	.L349
 7098              	.L337:
1898:bluetooth_rxtx.c **** 
1899:bluetooth_rxtx.c **** 	rx_continue:
1900:bluetooth_rxtx.c **** 		rx_tc = 0;
 7099              		.loc 1 1900 0
 7100 026a 164B     		ldr	r3, .L351+36
 7101 026c 0022     		movs	r2, #0
 7102 026e 1A60     		str	r2, [r3]
1901:bluetooth_rxtx.c **** 		rx_err = 0;
 7103              		.loc 1 1901 0
 7104 0270 154B     		ldr	r3, .L351+40
 7105 0272 0022     		movs	r2, #0
 7106 0274 1A60     		str	r2, [r3]
 7107              	.L324:
 7108              	.LBE6:
1795:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7109              		.loc 1 1795 0
 7110 0276 1E4B     		ldr	r3, .L351+80
 7111 0278 1B78     		ldrb	r3, [r3]
 7112 027a DBB2     		uxtb	r3, r3
 7113 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7114 027e 9A42     		cmp	r2, r3
 7115 0280 3FF4E3AE 		beq	.L350
 7116              	.L349:
1902:bluetooth_rxtx.c **** 	}
1903:bluetooth_rxtx.c **** 
1904:bluetooth_rxtx.c **** 	// disable USB interrupts
ARM GAS  /tmp/ccxwuSCA.s 			page 158


1905:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7117              		.loc 1 1905 0
 7118 0284 1B4B     		ldr	r3, .L351+84
 7119 0286 4FF08072 		mov	r2, #16777216
 7120 028a 1A60     		str	r2, [r3]
1906:bluetooth_rxtx.c **** 
1907:bluetooth_rxtx.c **** 	// reset the radio completely
1908:bluetooth_rxtx.c **** 	cc2400_idle();
 7121              		.loc 1 1908 0
 7122 028c FFF7FEFF 		bl	cc2400_idle
1909:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7123              		.loc 1 1909 0
 7124 0290 FFF7FEFF 		bl	dio_ssp_stop
1910:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7125              		.loc 1 1910 0
 7126 0294 FFF7FEFF 		bl	cs_trigger_disable
1911:bluetooth_rxtx.c **** }
 7127              		.loc 1 1911 0
 7128 0298 2037     		adds	r7, r7, #32
 7129              		.cfi_def_cfa_offset 8
 7130 029a BD46     		mov	sp, r7
 7131              		.cfi_def_cfa_register 13
 7132              		@ sp needed
 7133 029c 80BD     		pop	{r7, pc}
 7134              	.L352:
 7135 029e 00BF     		.align	2
 7136              	.L351:
 7137 02a0 00000000 		.word	modulation
 7138 02a4 00000000 		.word	mode
 7139 02a8 00E100E0 		.word	-536813312
 7140 02ac 3CC00920 		.word	537509948
 7141 02b0 00000000 		.word	requested_channel
 7142 02b4 00000000 		.word	channel
 7143 02b8 00000000 		.word	do_hop
 7144 02bc 00000000 		.word	cs_trigger
 7145 02c0 00000000 		.word	cs_threshold_cur
 7146 02c4 00000000 		.word	rx_tc
 7147 02c8 00000000 		.word	rx_err
 7148 02cc 00000000 		.word	active_rxbuf
 7149 02d0 00000000 		.word	idle_rxbuf
 7150 02d4 00000000 		.word	status
 7151 02d8 00000000 		.word	cs_no_squelch
 7152 02dc 00000000 		.word	rssi_max
 7153 02e0 00000000 		.word	keepalive_trigger
 7154 02e4 00000000 		.word	unpacked
 7155 02e8 90010000 		.word	unpacked+400
 7156 02ec 00000000 		.word	data_cb
 7157 02f0 00000000 		.word	requested_mode
 7158 02f4 80E100E0 		.word	-536813184
 7159              		.cfi_endproc
 7160              	.LFE32:
 7162              		.section	.text.bt_le_sync,"ax",%progbits
 7163              		.align	2
 7164              		.global	bt_le_sync
 7165              		.thumb
 7166              		.thumb_func
 7168              	bt_le_sync:
ARM GAS  /tmp/ccxwuSCA.s 			page 159


 7169              	.LFB33:
1912:bluetooth_rxtx.c **** 
1913:bluetooth_rxtx.c **** 
1914:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1915:bluetooth_rxtx.c **** {
 7170              		.loc 1 1915 0
 7171              		.cfi_startproc
 7172              		@ args = 0, pretend = 0, frame = 104
 7173              		@ frame_needed = 1, uses_anonymous_args = 0
 7174 0000 90B5     		push	{r4, r7, lr}
 7175              		.cfi_def_cfa_offset 12
 7176              		.cfi_offset 4, -12
 7177              		.cfi_offset 7, -8
 7178              		.cfi_offset 14, -4
 7179 0002 9BB0     		sub	sp, sp, #108
 7180              		.cfi_def_cfa_offset 120
 7181 0004 00AF     		add	r7, sp, #0
 7182              		.cfi_def_cfa_register 7
 7183 0006 0346     		mov	r3, r0
 7184 0008 FB71     		strb	r3, [r7, #7]
1916:bluetooth_rxtx.c **** 	int i;
1917:bluetooth_rxtx.c **** 	int8_t rssi;
1918:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1919:bluetooth_rxtx.c **** 
1920:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 7185              		.loc 1 1920 0
 7186 000a 874B     		ldr	r3, .L399
 7187 000c 0122     		movs	r2, #1
 7188 000e 1A70     		strb	r2, [r3]
1921:bluetooth_rxtx.c **** 	mode = active_mode;
 7189              		.loc 1 1921 0
 7190 0010 864A     		ldr	r2, .L399+4
 7191 0012 FB79     		ldrb	r3, [r7, #7]
 7192 0014 1370     		strb	r3, [r2]
1922:bluetooth_rxtx.c **** 
1923:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 7193              		.loc 1 1923 0
 7194 0016 864B     		ldr	r3, .L399+8
 7195 0018 0122     		movs	r2, #1
 7196 001a 1A75     		strb	r2, [r3, #20]
1924:bluetooth_rxtx.c **** 
1925:bluetooth_rxtx.c **** 	// enable USB interrupts
1926:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 7197              		.loc 1 1926 0
 7198 001c 854B     		ldr	r3, .L399+12
 7199 001e 4FF08072 		mov	r2, #16777216
 7200 0022 1A60     		str	r2, [r3]
1927:bluetooth_rxtx.c **** 
1928:bluetooth_rxtx.c **** 	RXLED_CLR;
 7201              		.loc 1 1928 0
 7202 0024 844B     		ldr	r3, .L399+16
 7203 0026 1022     		movs	r2, #16
 7204 0028 1A60     		str	r2, [r3]
1929:bluetooth_rxtx.c **** 
1930:bluetooth_rxtx.c **** 	queue_init();
 7205              		.loc 1 1930 0
 7206 002a FFF7FEFF 		bl	queue_init
ARM GAS  /tmp/ccxwuSCA.s 			page 160


1931:bluetooth_rxtx.c **** 	dio_ssp_init();
 7207              		.loc 1 1931 0
 7208 002e FFF7FEFF 		bl	dio_ssp_init
1932:bluetooth_rxtx.c **** 	dma_init_le();
 7209              		.loc 1 1932 0
 7210 0032 FFF7FEFF 		bl	dma_init_le
1933:bluetooth_rxtx.c **** 	dio_ssp_start();
 7211              		.loc 1 1933 0
 7212 0036 FFF7FEFF 		bl	dio_ssp_start
1934:bluetooth_rxtx.c **** 
1935:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 7213              		.loc 1 1935 0
 7214 003a 7D4B     		ldr	r3, .L399+8
 7215 003c 1B68     		ldr	r3, [r3]
 7216 003e 1846     		mov	r0, r3
 7217 0040 FFF7FEFF 		bl	rbit
 7218 0044 0346     		mov	r3, r0
 7219 0046 1846     		mov	r0, r3
 7220 0048 FFF7FEFF 		bl	cc2400_rx_sync
1936:bluetooth_rxtx.c **** 
1937:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 7221              		.loc 1 1937 0
 7222 004c 47E2     		b	.L354
 7223              	.L398:
 7224              	.LBB7:
1938:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7225              		.loc 1 1938 0
 7226 004e 7B4B     		ldr	r3, .L399+20
 7227 0050 1B88     		ldrh	r3, [r3]	@ movhi
 7228 0052 9BB2     		uxth	r3, r3
 7229 0054 002B     		cmp	r3, #0
 7230 0056 29D0     		beq	.L355
1939:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7231              		.loc 1 1939 0
 7232 0058 6420     		movs	r0, #100
 7233 005a FFF7FEFF 		bl	cc2400_strobe
1940:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 7234              		.loc 1 1940 0
 7235 005e 00BF     		nop
 7236              	.L356:
 7237              		.loc 1 1940 0 is_stmt 0 discriminator 1
 7238 0060 FFF7FEFF 		bl	cc2400_status
 7239 0064 0346     		mov	r3, r0
 7240 0066 03F00403 		and	r3, r3, #4
 7241 006a 002B     		cmp	r3, #0
 7242 006c F8D1     		bne	.L356
1941:bluetooth_rxtx.c **** 
1942:bluetooth_rxtx.c **** 			/* Retune */
1943:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 7243              		.loc 1 1943 0 is_stmt 1
 7244 006e 744B     		ldr	r3, .L399+24
 7245 0070 1B88     		ldrh	r3, [r3]	@ movhi
 7246 0072 9BB2     		uxth	r3, r3
 7247 0074 013B     		subs	r3, r3, #1
 7248 0076 9BB2     		uxth	r3, r3
 7249 0078 0220     		movs	r0, #2
 7250 007a 1946     		mov	r1, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 161


 7251 007c FFF7FEFF 		bl	cc2400_set
1944:bluetooth_rxtx.c **** 
1945:bluetooth_rxtx.c **** 			/* Wait for lock */
1946:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 7252              		.loc 1 1946 0
 7253 0080 6120     		movs	r0, #97
 7254 0082 FFF7FEFF 		bl	cc2400_strobe
1947:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 7255              		.loc 1 1947 0
 7256 0086 00BF     		nop
 7257              	.L357:
 7258              		.loc 1 1947 0 is_stmt 0 discriminator 1
 7259 0088 FFF7FEFF 		bl	cc2400_status
 7260 008c 0346     		mov	r3, r0
 7261 008e 03F00403 		and	r3, r3, #4
 7262 0092 002B     		cmp	r3, #0
 7263 0094 F8D0     		beq	.L357
1948:bluetooth_rxtx.c **** 
1949:bluetooth_rxtx.c **** 			/* RX mode */
1950:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 7264              		.loc 1 1950 0 is_stmt 1
 7265 0096 6220     		movs	r0, #98
 7266 0098 FFF7FEFF 		bl	cc2400_strobe
1951:bluetooth_rxtx.c **** 
1952:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 7267              		.loc 1 1952 0
 7268 009c 674B     		ldr	r3, .L399+20
 7269 009e 1B88     		ldrh	r3, [r3]	@ movhi
 7270 00a0 9AB2     		uxth	r2, r3
 7271 00a2 684B     		ldr	r3, .L399+28
 7272 00a4 1A80     		strh	r2, [r3]	@ movhi
1953:bluetooth_rxtx.c **** 			requested_channel = 0;
 7273              		.loc 1 1953 0
 7274 00a6 654B     		ldr	r3, .L399+20
 7275 00a8 0022     		movs	r2, #0
 7276 00aa 1A80     		strh	r2, [r3]	@ movhi
 7277              	.L355:
1954:bluetooth_rxtx.c **** 		}
1955:bluetooth_rxtx.c **** 
1956:bluetooth_rxtx.c **** 		RXLED_CLR;
 7278              		.loc 1 1956 0
 7279 00ac 624B     		ldr	r3, .L399+16
 7280 00ae 1022     		movs	r2, #16
 7281 00b0 1A60     		str	r2, [r3]
1957:bluetooth_rxtx.c **** 
1958:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1959:bluetooth_rxtx.c **** 		rssi_reset();
 7282              		.loc 1 1959 0
 7283 00b2 FFF7FEFF 		bl	rssi_reset
1960:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 7284              		.loc 1 1960 0
 7285 00b6 00BF     		nop
 7286              	.L359:
 7287              		.loc 1 1960 0 is_stmt 0 discriminator 4
 7288 00b8 634B     		ldr	r3, .L399+32
 7289 00ba 1B68     		ldr	r3, [r3]
 7290 00bc 002B     		cmp	r3, #0
ARM GAS  /tmp/ccxwuSCA.s 			page 162


 7291 00be 0ED1     		bne	.L358
 7292              		.loc 1 1960 0 discriminator 1
 7293 00c0 624B     		ldr	r3, .L399+36
 7294 00c2 1B68     		ldr	r3, [r3]
 7295 00c4 002B     		cmp	r3, #0
 7296 00c6 0AD1     		bne	.L358
 7297              		.loc 1 1960 0 discriminator 2
 7298 00c8 614B     		ldr	r3, .L399+40
 7299 00ca 1B78     		ldrb	r3, [r3]
 7300 00cc DBB2     		uxtb	r3, r3
 7301 00ce 002B     		cmp	r3, #0
 7302 00d0 05D1     		bne	.L358
 7303              		.loc 1 1960 0 discriminator 3
 7304 00d2 604B     		ldr	r3, .L399+44
 7305 00d4 1B78     		ldrb	r3, [r3]
 7306 00d6 DBB2     		uxtb	r3, r3
 7307 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7308 00da 9A42     		cmp	r2, r3
 7309 00dc ECD0     		beq	.L359
 7310              	.L358:
1961:bluetooth_rxtx.c **** 			;
1962:bluetooth_rxtx.c **** 
1963:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 7311              		.loc 1 1963 0 is_stmt 1
 7312 00de 5D4B     		ldr	r3, .L399+44
 7313 00e0 1B78     		ldrb	r3, [r3]
 7314 00e2 DBB2     		uxtb	r3, r3
 7315 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7316 00e6 9A42     		cmp	r2, r3
 7317 00e8 00D0     		beq	.L360
1964:bluetooth_rxtx.c **** 			goto cleanup;
 7318              		.loc 1 1964 0
 7319 00ea FFE1     		b	.L397
 7320              	.L360:
1965:bluetooth_rxtx.c **** 		}
1966:bluetooth_rxtx.c **** 
1967:bluetooth_rxtx.c **** 		if (rx_err) {
 7321              		.loc 1 1967 0
 7322 00ec 574B     		ldr	r3, .L399+36
 7323 00ee 1B68     		ldr	r3, [r3]
 7324 00f0 002B     		cmp	r3, #0
 7325 00f2 07D0     		beq	.L362
1968:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 7326              		.loc 1 1968 0
 7327 00f4 584B     		ldr	r3, .L399+48
 7328 00f6 1B78     		ldrb	r3, [r3]
 7329 00f8 DBB2     		uxtb	r3, r3
 7330 00fa 43F00203 		orr	r3, r3, #2
 7331 00fe DAB2     		uxtb	r2, r3
 7332 0100 554B     		ldr	r3, .L399+48
 7333 0102 1A70     		strb	r2, [r3]
 7334              	.L362:
1969:bluetooth_rxtx.c **** 		}
1970:bluetooth_rxtx.c **** 
1971:bluetooth_rxtx.c **** 		if (do_hop)
 7335              		.loc 1 1971 0
 7336 0104 524B     		ldr	r3, .L399+40
ARM GAS  /tmp/ccxwuSCA.s 			page 163


 7337 0106 1B78     		ldrb	r3, [r3]
 7338 0108 DBB2     		uxtb	r3, r3
 7339 010a 002B     		cmp	r3, #0
 7340 010c 00D0     		beq	.L363
1972:bluetooth_rxtx.c **** 			goto rx_flush;
 7341              		.loc 1 1972 0
 7342 010e 2BE1     		b	.L364
 7343              	.L363:
1973:bluetooth_rxtx.c **** 
1974:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1975:bluetooth_rxtx.c **** 		if (!rx_tc)
 7344              		.loc 1 1975 0
 7345 0110 4D4B     		ldr	r3, .L399+32
 7346 0112 1B68     		ldr	r3, [r3]
 7347 0114 002B     		cmp	r3, #0
 7348 0116 00D1     		bne	.L365
 7349 0118 E1E1     		b	.L354
 7350              	.L365:
1976:bluetooth_rxtx.c **** 			continue;
1977:bluetooth_rxtx.c **** 
1978:bluetooth_rxtx.c **** 		/////////////////////
1979:bluetooth_rxtx.c **** 		// process the packet
1980:bluetooth_rxtx.c **** 
1981:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1982:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7351              		.loc 1 1982 0
 7352 011a 07F10803 		add	r3, r7, #8
 7353 011e FB65     		str	r3, [r7, #92]
1983:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7354              		.loc 1 1983 0
 7355 0120 434B     		ldr	r3, .L399+8
 7356 0122 1B68     		ldr	r3, [r3]
 7357 0124 BB60     		str	r3, [r7, #8]
1984:bluetooth_rxtx.c **** 
1985:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7358              		.loc 1 1985 0
 7359 0126 464B     		ldr	r3, .L399+24
 7360 0128 1B88     		ldrh	r3, [r3]	@ movhi
 7361 012a 9BB2     		uxth	r3, r3
 7362 012c DBB2     		uxtb	r3, r3
 7363 012e 623B     		subs	r3, r3, #98
 7364 0130 DBB2     		uxtb	r3, r3
 7365 0132 1846     		mov	r0, r3
 7366 0134 FFF7FEFF 		bl	btle_channel_index
 7367 0138 0346     		mov	r3, r0
 7368 013a 1A46     		mov	r2, r3
 7369 013c 1346     		mov	r3, r2
 7370 013e 5B00     		lsls	r3, r3, #1
 7371 0140 1344     		add	r3, r3, r2
 7372 0142 1B01     		lsls	r3, r3, #4
 7373 0144 454A     		ldr	r2, .L399+52
 7374 0146 1344     		add	r3, r3, r2
 7375 0148 BB65     		str	r3, [r7, #88]
1986:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 7376              		.loc 1 1986 0
 7377 014a 0023     		movs	r3, #0
 7378 014c 7B66     		str	r3, [r7, #100]
ARM GAS  /tmp/ccxwuSCA.s 			page 164


 7379 014e 34E0     		b	.L366
 7380              	.L369:
 7381              	.LBB8:
1987:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7382              		.loc 1 1987 0 discriminator 3
 7383 0150 434A     		ldr	r2, .L399+56
 7384 0152 7B6E     		ldr	r3, [r7, #100]
 7385 0154 1344     		add	r3, r3, r2
 7386 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7387 0158 1A06     		lsls	r2, r3, #24
1988:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7388              		.loc 1 1988 0 discriminator 3
 7389 015a 7B6E     		ldr	r3, [r7, #100]
 7390 015c 0133     		adds	r3, r3, #1
 7391 015e 4049     		ldr	r1, .L399+56
 7392 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7393 0162 1B04     		lsls	r3, r3, #16
 7394 0164 1A43     		orrs	r2, r2, r3
1989:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 7395              		.loc 1 1989 0 discriminator 3
 7396 0166 7B6E     		ldr	r3, [r7, #100]
 7397 0168 0233     		adds	r3, r3, #2
 7398 016a 3D49     		ldr	r1, .L399+56
 7399 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7400 016e 1B02     		lsls	r3, r3, #8
 7401 0170 1343     		orrs	r3, r3, r2
1990:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7402              		.loc 1 1990 0 discriminator 3
 7403 0172 7A6E     		ldr	r2, [r7, #100]
 7404 0174 0332     		adds	r2, r2, #3
 7405 0176 3A49     		ldr	r1, .L399+56
 7406 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7407 017a 1343     		orrs	r3, r3, r2
1987:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7408              		.loc 1 1987 0 discriminator 3
 7409 017c 7B65     		str	r3, [r7, #84]
1991:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7410              		.loc 1 1991 0 discriminator 3
 7411 017e 7B6E     		ldr	r3, [r7, #100]
 7412 0180 002B     		cmp	r3, #0
 7413 0182 00DA     		bge	.L367
 7414 0184 0333     		adds	r3, r3, #3
 7415              	.L367:
 7416 0186 9B10     		asrs	r3, r3, #2
 7417 0188 5C1C     		adds	r4, r3, #1
 7418 018a 786D     		ldr	r0, [r7, #84]
 7419 018c FFF7FEFF 		bl	rbit
 7420 0190 0146     		mov	r1, r0
 7421 0192 7B6E     		ldr	r3, [r7, #100]
 7422 0194 002B     		cmp	r3, #0
 7423 0196 00DA     		bge	.L368
 7424 0198 0333     		adds	r3, r3, #3
 7425              	.L368:
 7426 019a 9B10     		asrs	r3, r3, #2
 7427 019c 9B00     		lsls	r3, r3, #2
 7428 019e BA6D     		ldr	r2, [r7, #88]
 7429 01a0 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccxwuSCA.s 			page 165


 7430 01a2 1B68     		ldr	r3, [r3]
 7431 01a4 81EA0302 		eor	r2, r1, r3
 7432 01a8 A300     		lsls	r3, r4, #2
 7433 01aa 07F16801 		add	r1, r7, #104
 7434 01ae 0B44     		add	r3, r3, r1
 7435 01b0 43F8602C 		str	r2, [r3, #-96]
 7436              	.LBE8:
1986:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7437              		.loc 1 1986 0 discriminator 3
 7438 01b4 7B6E     		ldr	r3, [r7, #100]
 7439 01b6 0433     		adds	r3, r3, #4
 7440 01b8 7B66     		str	r3, [r7, #100]
 7441              	.L366:
1986:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7442              		.loc 1 1986 0 is_stmt 0 discriminator 1
 7443 01ba 7B6E     		ldr	r3, [r7, #100]
 7444 01bc 032B     		cmp	r3, #3
 7445 01be C7DD     		ble	.L369
1992:bluetooth_rxtx.c **** 		}
1993:bluetooth_rxtx.c **** 
1994:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7446              		.loc 1 1994 0 is_stmt 1
 7447 01c0 FB6D     		ldr	r3, [r7, #92]
 7448 01c2 0533     		adds	r3, r3, #5
 7449 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7450 01c6 03F03F03 		and	r3, r3, #63
 7451 01ca 0233     		adds	r3, r3, #2
 7452 01cc 3B65     		str	r3, [r7, #80]
1995:bluetooth_rxtx.c **** 		if (len > 39)
 7453              		.loc 1 1995 0
 7454 01ce 3B6D     		ldr	r3, [r7, #80]
 7455 01d0 272B     		cmp	r3, #39
 7456 01d2 00D9     		bls	.L370
1996:bluetooth_rxtx.c **** 			goto rx_flush;
 7457              		.loc 1 1996 0
 7458 01d4 C8E0     		b	.L364
 7459              	.L370:
1997:bluetooth_rxtx.c **** 
1998:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1999:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
2000:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 7460              		.loc 1 2000 0
 7461 01d6 3B6D     		ldr	r3, [r7, #80]
 7462 01d8 0633     		adds	r3, r3, #6
 7463 01da 9B08     		lsrs	r3, r3, #2
 7464 01dc FB64     		str	r3, [r7, #76]
2001:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 7465              		.loc 1 2001 0
 7466 01de FB6C     		ldr	r3, [r7, #76]
 7467 01e0 0A2B     		cmp	r3, #10
 7468 01e2 0DD8     		bhi	.L371
2002:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 7469              		.loc 1 2002 0
 7470 01e4 00BF     		nop
 7471              	.L373:
 7472              		.loc 1 2002 0 is_stmt 0 discriminator 2
 7473 01e6 1F4B     		ldr	r3, .L399+60
ARM GAS  /tmp/ccxwuSCA.s 			page 166


 7474 01e8 1A68     		ldr	r2, [r3]
 7475 01ea FB6C     		ldr	r3, [r7, #76]
 7476 01ec 9B00     		lsls	r3, r3, #2
 7477 01ee 1C49     		ldr	r1, .L399+56
 7478 01f0 0B44     		add	r3, r3, r1
 7479 01f2 9A42     		cmp	r2, r3
 7480 01f4 0FD2     		bcs	.L372
 7481              		.loc 1 2002 0 discriminator 1
 7482 01f6 154B     		ldr	r3, .L399+36
 7483 01f8 1B68     		ldr	r3, [r3]
 7484 01fa 002B     		cmp	r3, #0
 7485 01fc F3D0     		beq	.L373
 7486 01fe 0AE0     		b	.L372
 7487              	.L371:
2003:bluetooth_rxtx.c **** 				;
2004:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
2005:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 7488              		.loc 1 2005 0 is_stmt 1
 7489 0200 00BF     		nop
 7490              	.L374:
 7491              		.loc 1 2005 0 is_stmt 0 discriminator 2
 7492 0202 194B     		ldr	r3, .L399+64
 7493 0204 1B68     		ldr	r3, [r3]
 7494 0206 03F00103 		and	r3, r3, #1
 7495 020a 002B     		cmp	r3, #0
 7496 020c 03D0     		beq	.L372
 7497              		.loc 1 2005 0 discriminator 1
 7498 020e 0F4B     		ldr	r3, .L399+36
 7499 0210 1B68     		ldr	r3, [r3]
 7500 0212 002B     		cmp	r3, #0
 7501 0214 F5D0     		beq	.L374
 7502              	.L372:
2006:bluetooth_rxtx.c **** 				;
2007:bluetooth_rxtx.c **** 		}
2008:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7503              		.loc 1 2008 0 is_stmt 1
 7504 0216 154A     		ldr	r2, .L399+68
 7505 0218 144B     		ldr	r3, .L399+68
 7506 021a 1B68     		ldr	r3, [r3]
 7507 021c 23F00103 		bic	r3, r3, #1
 7508 0220 1360     		str	r3, [r2]
2009:bluetooth_rxtx.c **** 
2010:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
2011:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 7509              		.loc 1 2011 0
 7510 0222 0423     		movs	r3, #4
 7511 0224 7B66     		str	r3, [r7, #100]
 7512 0226 58E0     		b	.L375
 7513              	.L400:
 7514              		.align	2
 7515              	.L399:
 7516 0228 00000000 		.word	modulation
 7517 022c 00000000 		.word	mode
 7518 0230 00000000 		.word	le
 7519 0234 00E100E0 		.word	-536813312
 7520 0238 3CC00920 		.word	537509948
 7521 023c 00000000 		.word	requested_channel
ARM GAS  /tmp/ccxwuSCA.s 			page 167


 7522 0240 00000000 		.word	channel
 7523 0244 00000000 		.word	saved_request
 7524 0248 00000000 		.word	rx_tc
 7525 024c 00000000 		.word	rx_err
 7526 0250 00000000 		.word	do_hop
 7527 0254 00000000 		.word	requested_mode
 7528 0258 00000000 		.word	status
 7529 025c 10010000 		.word	whitening_word
 7530 0260 00000000 		.word	rxbuf1
 7531 0264 04410050 		.word	1342193924
 7532 0268 10410050 		.word	1342193936
 7533 026c 24000340 		.word	1073938468
 7534              	.L378:
 7535              	.LBB9:
2012:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7536              		.loc 1 2012 0 discriminator 3
 7537 0270 A54A     		ldr	r2, .L401
 7538 0272 7B6E     		ldr	r3, [r7, #100]
 7539 0274 1344     		add	r3, r3, r2
 7540 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7541 0278 1A06     		lsls	r2, r3, #24
2013:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7542              		.loc 1 2013 0 discriminator 3
 7543 027a 7B6E     		ldr	r3, [r7, #100]
 7544 027c 0133     		adds	r3, r3, #1
 7545 027e A249     		ldr	r1, .L401
 7546 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7547 0282 1B04     		lsls	r3, r3, #16
 7548 0284 1A43     		orrs	r2, r2, r3
2014:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 7549              		.loc 1 2014 0 discriminator 3
 7550 0286 7B6E     		ldr	r3, [r7, #100]
 7551 0288 0233     		adds	r3, r3, #2
 7552 028a 9F49     		ldr	r1, .L401
 7553 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7554 028e 1B02     		lsls	r3, r3, #8
 7555 0290 1343     		orrs	r3, r3, r2
2015:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7556              		.loc 1 2015 0 discriminator 3
 7557 0292 7A6E     		ldr	r2, [r7, #100]
 7558 0294 0332     		adds	r2, r2, #3
 7559 0296 9C49     		ldr	r1, .L401
 7560 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7561 029a 1343     		orrs	r3, r3, r2
2012:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7562              		.loc 1 2012 0 discriminator 3
 7563 029c BB64     		str	r3, [r7, #72]
2016:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7564              		.loc 1 2016 0 discriminator 3
 7565 029e 7B6E     		ldr	r3, [r7, #100]
 7566 02a0 002B     		cmp	r3, #0
 7567 02a2 00DA     		bge	.L376
 7568 02a4 0333     		adds	r3, r3, #3
 7569              	.L376:
 7570 02a6 9B10     		asrs	r3, r3, #2
 7571 02a8 5C1C     		adds	r4, r3, #1
 7572 02aa B86C     		ldr	r0, [r7, #72]
ARM GAS  /tmp/ccxwuSCA.s 			page 168


 7573 02ac FFF7FEFF 		bl	rbit
 7574 02b0 0146     		mov	r1, r0
 7575 02b2 7B6E     		ldr	r3, [r7, #100]
 7576 02b4 002B     		cmp	r3, #0
 7577 02b6 00DA     		bge	.L377
 7578 02b8 0333     		adds	r3, r3, #3
 7579              	.L377:
 7580 02ba 9B10     		asrs	r3, r3, #2
 7581 02bc 9B00     		lsls	r3, r3, #2
 7582 02be BA6D     		ldr	r2, [r7, #88]
 7583 02c0 1344     		add	r3, r3, r2
 7584 02c2 1B68     		ldr	r3, [r3]
 7585 02c4 81EA0302 		eor	r2, r1, r3
 7586 02c8 A300     		lsls	r3, r4, #2
 7587 02ca 07F16801 		add	r1, r7, #104
 7588 02ce 0B44     		add	r3, r3, r1
 7589 02d0 43F8602C 		str	r2, [r3, #-96]
 7590              	.LBE9:
2011:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7591              		.loc 1 2011 0 discriminator 3
 7592 02d4 7B6E     		ldr	r3, [r7, #100]
 7593 02d6 0433     		adds	r3, r3, #4
 7594 02d8 7B66     		str	r3, [r7, #100]
 7595              	.L375:
2011:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7596              		.loc 1 2011 0 is_stmt 0 discriminator 1
 7597 02da 7B6E     		ldr	r3, [r7, #100]
 7598 02dc 2B2B     		cmp	r3, #43
 7599 02de C7DD     		ble	.L378
2017:bluetooth_rxtx.c **** 		}
2018:bluetooth_rxtx.c **** 
2019:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 7600              		.loc 1 2019 0 is_stmt 1
 7601 02e0 8A4B     		ldr	r3, .L401+4
 7602 02e2 1B69     		ldr	r3, [r3, #16]
 7603 02e4 002B     		cmp	r3, #0
 7604 02e6 23D0     		beq	.L379
 7605              	.LBB10:
2020:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7606              		.loc 1 2020 0
 7607 02e8 884B     		ldr	r3, .L401+4
 7608 02ea D968     		ldr	r1, [r3, #12]
 7609 02ec FB6D     		ldr	r3, [r7, #92]
 7610 02ee 1A1D     		adds	r2, r3, #4
 7611 02f0 3B6D     		ldr	r3, [r7, #80]
 7612 02f2 0846     		mov	r0, r1
 7613 02f4 1146     		mov	r1, r2
 7614 02f6 1A46     		mov	r2, r3
 7615 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 7616 02fc 7864     		str	r0, [r7, #68]
2021:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7617              		.loc 1 2021 0
 7618 02fe 3B6D     		ldr	r3, [r7, #80]
 7619 0300 0633     		adds	r3, r3, #6
 7620 0302 FA6D     		ldr	r2, [r7, #92]
 7621 0304 1344     		add	r3, r3, r2
 7622 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccxwuSCA.s 			page 169


 7623 0308 1A04     		lsls	r2, r3, #16
2022:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 7624              		.loc 1 2022 0
 7625 030a 3B6D     		ldr	r3, [r7, #80]
 7626 030c 0533     		adds	r3, r3, #5
 7627 030e F96D     		ldr	r1, [r7, #92]
 7628 0310 0B44     		add	r3, r3, r1
 7629 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7630 0314 1B02     		lsls	r3, r3, #8
 7631 0316 1343     		orrs	r3, r3, r2
2023:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 7632              		.loc 1 2023 0
 7633 0318 3A6D     		ldr	r2, [r7, #80]
 7634 031a 0432     		adds	r2, r2, #4
 7635 031c F96D     		ldr	r1, [r7, #92]
 7636 031e 0A44     		add	r2, r2, r1
 7637 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7638 0322 1343     		orrs	r3, r3, r2
2021:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7639              		.loc 1 2021 0
 7640 0324 3B64     		str	r3, [r7, #64]
2024:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 7641              		.loc 1 2024 0
 7642 0326 7A6C     		ldr	r2, [r7, #68]
 7643 0328 3B6C     		ldr	r3, [r7, #64]
 7644 032a 9A42     		cmp	r2, r3
 7645 032c 00D0     		beq	.L379
2025:bluetooth_rxtx.c **** 				goto rx_flush;
 7646              		.loc 1 2025 0
 7647 032e 1BE0     		b	.L364
 7648              	.L379:
 7649              	.LBE10:
2026:bluetooth_rxtx.c **** 		}
2027:bluetooth_rxtx.c **** 
2028:bluetooth_rxtx.c **** 
2029:bluetooth_rxtx.c **** 		RXLED_SET;
 7650              		.loc 1 2029 0
 7651 0330 774B     		ldr	r3, .L401+8
 7652 0332 1022     		movs	r2, #16
 7653 0334 1A60     		str	r2, [r3]
2030:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 7654              		.loc 1 2030 0
 7655 0336 774B     		ldr	r3, .L401+12
 7656 0338 1B68     		ldr	r3, [r3]
 7657 033a 07F10802 		add	r2, r7, #8
 7658 033e 1046     		mov	r0, r2
 7659 0340 9847     		blx	r3
2031:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 7660              		.loc 1 2031 0
 7661 0342 07F10803 		add	r3, r7, #8
 7662 0346 0120     		movs	r0, #1
 7663 0348 1946     		mov	r1, r3
 7664 034a FFF7FEFF 		bl	enqueue
2032:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 7665              		.loc 1 2032 0
 7666 034e 724B     		ldr	r3, .L401+16
 7667 0350 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 170


 7668 0352 C3F31303 		ubfx	r3, r3, #0, #20
 7669 0356 40F63542 		movw	r2, #3125
 7670 035a 02FB03F2 		mul	r2, r2, r3
 7671 035e 6F4B     		ldr	r3, .L401+20
 7672 0360 1B68     		ldr	r3, [r3]
 7673 0362 1344     		add	r3, r3, r2
 7674 0364 694A     		ldr	r2, .L401+4
 7675 0366 1364     		str	r3, [r2, #64]
 7676              	.L364:
2033:bluetooth_rxtx.c **** 
2034:bluetooth_rxtx.c **** 	rx_flush:
2035:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 7677              		.loc 1 2035 0
 7678 0368 6120     		movs	r0, #97
 7679 036a FFF7FEFF 		bl	cc2400_strobe
2036:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 7680              		.loc 1 2036 0
 7681 036e 00BF     		nop
 7682              	.L380:
 7683              		.loc 1 2036 0 is_stmt 0 discriminator 1
 7684 0370 FFF7FEFF 		bl	cc2400_status
 7685 0374 0346     		mov	r3, r0
 7686 0376 03F00403 		and	r3, r3, #4
 7687 037a 002B     		cmp	r3, #0
 7688 037c F8D0     		beq	.L380
2037:bluetooth_rxtx.c **** 
2038:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
2039:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7689              		.loc 1 2039 0 is_stmt 1
 7690 037e 684A     		ldr	r2, .L401+24
 7691 0380 674B     		ldr	r3, .L401+24
 7692 0382 1B68     		ldr	r3, [r3]
 7693 0384 23F00103 		bic	r3, r3, #1
 7694 0388 1360     		str	r3, [r2]
2040:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7695              		.loc 1 2040 0
 7696 038a 03E0     		b	.L381
 7697              	.L382:
 7698              	.LBB11:
2041:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 7699              		.loc 1 2041 0
 7700 038c 654B     		ldr	r3, .L401+28
 7701 038e 1B68     		ldr	r3, [r3]
 7702 0390 87F83F30 		strb	r3, [r7, #63]
 7703              	.L381:
 7704              	.LBE11:
2040:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7705              		.loc 1 2040 0
 7706 0394 644B     		ldr	r3, .L401+32
 7707 0396 1B68     		ldr	r3, [r3]
 7708 0398 03F00403 		and	r3, r3, #4
 7709 039c 002B     		cmp	r3, #0
 7710 039e F5D1     		bne	.L382
2042:bluetooth_rxtx.c **** 		}
2043:bluetooth_rxtx.c **** 
2044:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2045:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
ARM GAS  /tmp/ccxwuSCA.s 			page 171


 7711              		.loc 1 2045 0
 7712 03a0 5D4B     		ldr	r3, .L401+16
 7713 03a2 1B68     		ldr	r3, [r3]
 7714 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 7715 03a8 40F63542 		movw	r2, #3125
 7716 03ac 02FB03F2 		mul	r2, r2, r3
 7717 03b0 5A4B     		ldr	r3, .L401+20
 7718 03b2 1B68     		ldr	r3, [r3]
 7719 03b4 1344     		add	r3, r3, r2
 7720 03b6 3B66     		str	r3, [r7, #96]
2046:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 7721              		.loc 1 2046 0
 7722 03b8 544B     		ldr	r3, .L401+4
 7723 03ba 1A6C     		ldr	r2, [r3, #64]
 7724 03bc 3B6E     		ldr	r3, [r7, #96]
 7725 03be 9A42     		cmp	r2, r3
 7726 03c0 05D9     		bls	.L383
2047:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 7727              		.loc 1 2047 0
 7728 03c2 3B6E     		ldr	r3, [r7, #96]
 7729 03c4 03F14343 		add	r3, r3, #-1023410176
 7730 03c8 03F5A003 		add	r3, r3, #5242880
 7731 03cc 3B66     		str	r3, [r7, #96]
 7732              	.L383:
2048:bluetooth_rxtx.c **** 		if  ( // timeout
2049:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 7733              		.loc 1 2049 0
 7734 03ce 4F4B     		ldr	r3, .L401+4
 7735 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
2048:bluetooth_rxtx.c **** 		if  ( // timeout
 7736              		.loc 1 2048 0
 7737 03d2 032B     		cmp	r3, #3
 7738 03d4 03D0     		beq	.L384
 7739              		.loc 1 2049 0
 7740 03d6 4D4B     		ldr	r3, .L401+4
 7741 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7742 03da 022B     		cmp	r3, #2
 7743 03dc 06D1     		bne	.L385
 7744              	.L384:
2050:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 7745              		.loc 1 2050 0
 7746 03de 4B4B     		ldr	r3, .L401+4
 7747 03e0 1B6C     		ldr	r3, [r3, #64]
 7748 03e2 3A6E     		ldr	r2, [r7, #96]
 7749 03e4 D31A     		subs	r3, r2, r3
 7750 03e6 514A     		ldr	r2, .L401+36
 7751 03e8 9342     		cmp	r3, r2
 7752 03ea 03D8     		bhi	.L386
 7753              	.L385:
2051:bluetooth_rxtx.c **** 			// jam finished
2052:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 7754              		.loc 1 2052 0
 7755 03ec 504B     		ldr	r3, .L401+40
 7756 03ee 1B68     		ldr	r3, [r3]
 7757 03f0 012B     		cmp	r3, #1
 7758 03f2 37D1     		bne	.L387
 7759              	.L386:
ARM GAS  /tmp/ccxwuSCA.s 			page 172


2053:bluetooth_rxtx.c **** 			)
2054:bluetooth_rxtx.c **** 		{
2055:bluetooth_rxtx.c **** 			reset_le();
 7760              		.loc 1 2055 0
 7761 03f4 FFF7FEFF 		bl	reset_le
2056:bluetooth_rxtx.c **** 			le_jam_count = 0;
 7762              		.loc 1 2056 0
 7763 03f8 4D4B     		ldr	r3, .L401+40
 7764 03fa 0022     		movs	r2, #0
 7765 03fc 1A60     		str	r2, [r3]
2057:bluetooth_rxtx.c **** 			TXLED_CLR;
 7766              		.loc 1 2057 0
 7767 03fe 4D4B     		ldr	r3, .L401+44
 7768 0400 4FF48072 		mov	r2, #256
 7769 0404 1A60     		str	r2, [r3]
2058:bluetooth_rxtx.c **** 
2059:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 7770              		.loc 1 2059 0
 7771 0406 4C4B     		ldr	r3, .L401+48
 7772 0408 1B78     		ldrb	r3, [r3]
 7773 040a DBB2     		uxtb	r3, r3
 7774 040c 012B     		cmp	r3, #1
 7775 040e 06D1     		bne	.L388
2060:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 7776              		.loc 1 2060 0
 7777 0410 494B     		ldr	r3, .L401+48
 7778 0412 0022     		movs	r2, #0
 7779 0414 1A70     		strb	r2, [r3]
2061:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 7780              		.loc 1 2061 0
 7781 0416 494B     		ldr	r3, .L401+52
 7782 0418 0022     		movs	r2, #0
 7783 041a 1A70     		strb	r2, [r3]
2062:bluetooth_rxtx.c **** 				goto cleanup;
 7784              		.loc 1 2062 0
 7785 041c 66E0     		b	.L397
 7786              	.L388:
2063:bluetooth_rxtx.c **** 			}
2064:bluetooth_rxtx.c **** 
2065:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2066:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 7787              		.loc 1 2066 0
 7788 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7789 0420 0A2B     		cmp	r3, #10
 7790 0422 01D1     		bne	.L389
2067:bluetooth_rxtx.c **** 				goto cleanup;
 7791              		.loc 1 2067 0
 7792 0424 00BF     		nop
 7793 0426 61E0     		b	.L397
 7794              	.L389:
2068:bluetooth_rxtx.c **** 
2069:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 7795              		.loc 1 2069 0
 7796 0428 384B     		ldr	r3, .L401+4
 7797 042a 0122     		movs	r2, #1
 7798 042c 1A75     		strb	r2, [r3, #20]
2070:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccxwuSCA.s 			page 173


2071:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7799              		.loc 1 2071 0
 7800 042e 6420     		movs	r0, #100
 7801 0430 FFF7FEFF 		bl	cc2400_strobe
2072:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7802              		.loc 1 2072 0
 7803 0434 00BF     		nop
 7804              	.L390:
 7805              		.loc 1 2072 0 is_stmt 0 discriminator 1
 7806 0436 FFF7FEFF 		bl	cc2400_status
 7807 043a 0346     		mov	r3, r0
 7808 043c 03F00403 		and	r3, r3, #4
 7809 0440 002B     		cmp	r3, #0
 7810 0442 F8D1     		bne	.L390
2073:bluetooth_rxtx.c **** 
2074:bluetooth_rxtx.c **** 			/* Retune */
2075:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 7811              		.loc 1 2075 0 is_stmt 1
 7812 0444 3E4B     		ldr	r3, .L401+56
 7813 0446 1B88     		ldrh	r3, [r3]	@ movhi
 7814 0448 9BB2     		uxth	r3, r3
 7815 044a 002B     		cmp	r3, #0
 7816 044c 03D0     		beq	.L391
 7817              		.loc 1 2075 0 is_stmt 0 discriminator 1
 7818 044e 3C4B     		ldr	r3, .L401+56
 7819 0450 1B88     		ldrh	r3, [r3]	@ movhi
 7820 0452 9BB2     		uxth	r3, r3
 7821 0454 01E0     		b	.L392
 7822              	.L391:
 7823              		.loc 1 2075 0 discriminator 2
 7824 0456 40F66213 		movw	r3, #2402
 7825              	.L392:
 7826              		.loc 1 2075 0 discriminator 4
 7827 045a 3A4A     		ldr	r2, .L401+60
 7828 045c 1380     		strh	r3, [r2]	@ movhi
2076:bluetooth_rxtx.c **** 			restart_jamming = 1;
 7829              		.loc 1 2076 0 is_stmt 1 discriminator 4
 7830 045e 3A4B     		ldr	r3, .L401+64
 7831 0460 0122     		movs	r2, #1
 7832 0462 1A60     		str	r2, [r3]
 7833              	.L387:
2077:bluetooth_rxtx.c **** 		}
2078:bluetooth_rxtx.c **** 
2079:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 7834              		.loc 1 2079 0
 7835 0464 294B     		ldr	r3, .L401+4
 7836 0466 DB88     		ldrh	r3, [r3, #6]
 7837 0468 2C20     		movs	r0, #44
 7838 046a 1946     		mov	r1, r3
 7839 046c FFF7FEFF 		bl	cc2400_set
2080:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 7840              		.loc 1 2080 0
 7841 0470 264B     		ldr	r3, .L401+4
 7842 0472 9B88     		ldrh	r3, [r3, #4]
 7843 0474 2D20     		movs	r0, #45
 7844 0476 1946     		mov	r1, r3
 7845 0478 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccxwuSCA.s 			page 174


2081:bluetooth_rxtx.c **** 
2082:bluetooth_rxtx.c **** 		if (do_hop)
 7846              		.loc 1 2082 0
 7847 047c 334B     		ldr	r3, .L401+68
 7848 047e 1B78     		ldrb	r3, [r3]
 7849 0480 DBB2     		uxtb	r3, r3
 7850 0482 002B     		cmp	r3, #0
 7851 0484 01D0     		beq	.L393
2083:bluetooth_rxtx.c **** 			hop();
 7852              		.loc 1 2083 0
 7853 0486 FFF7FEFF 		bl	hop
 7854              	.L393:
2084:bluetooth_rxtx.c **** 
2085:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2086:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 7855              		.loc 1 2086 0
 7856 048a 294B     		ldr	r3, .L401+40
 7857 048c 1B68     		ldr	r3, [r3]
 7858 048e 002B     		cmp	r3, #0
 7859 0490 07DD     		ble	.L394
2087:bluetooth_rxtx.c **** 			le_jam();
 7860              		.loc 1 2087 0
 7861 0492 FFF7FEFF 		bl	le_jam
2088:bluetooth_rxtx.c **** 			--le_jam_count;
 7862              		.loc 1 2088 0
 7863 0496 264B     		ldr	r3, .L401+40
 7864 0498 1B68     		ldr	r3, [r3]
 7865 049a 013B     		subs	r3, r3, #1
 7866 049c 244A     		ldr	r2, .L401+40
 7867 049e 1360     		str	r3, [r2]
 7868 04a0 17E0     		b	.L395
 7869              	.L394:
2089:bluetooth_rxtx.c **** 		} else {
2090:bluetooth_rxtx.c **** 			/* RX mode */
2091:bluetooth_rxtx.c **** 			dma_init_le();
 7870              		.loc 1 2091 0
 7871 04a2 FFF7FEFF 		bl	dma_init_le
2092:bluetooth_rxtx.c **** 			dio_ssp_start();
 7872              		.loc 1 2092 0
 7873 04a6 FFF7FEFF 		bl	dio_ssp_start
2093:bluetooth_rxtx.c **** 
2094:bluetooth_rxtx.c **** 			if (restart_jamming) {
 7874              		.loc 1 2094 0
 7875 04aa 274B     		ldr	r3, .L401+64
 7876 04ac 1B68     		ldr	r3, [r3]
 7877 04ae 002B     		cmp	r3, #0
 7878 04b0 0CD0     		beq	.L396
2095:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 7879              		.loc 1 2095 0
 7880 04b2 164B     		ldr	r3, .L401+4
 7881 04b4 1B68     		ldr	r3, [r3]
 7882 04b6 1846     		mov	r0, r3
 7883 04b8 FFF7FEFF 		bl	rbit
 7884 04bc 0346     		mov	r3, r0
 7885 04be 1846     		mov	r0, r3
 7886 04c0 FFF7FEFF 		bl	cc2400_rx_sync
2096:bluetooth_rxtx.c **** 				restart_jamming = 0;
ARM GAS  /tmp/ccxwuSCA.s 			page 175


 7887              		.loc 1 2096 0
 7888 04c4 204B     		ldr	r3, .L401+64
 7889 04c6 0022     		movs	r2, #0
 7890 04c8 1A60     		str	r2, [r3]
 7891 04ca 02E0     		b	.L395
 7892              	.L396:
2097:bluetooth_rxtx.c **** 			} else {
2098:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 7893              		.loc 1 2098 0
 7894 04cc 6220     		movs	r0, #98
 7895 04ce FFF7FEFF 		bl	cc2400_strobe
 7896              	.L395:
2099:bluetooth_rxtx.c **** 			}
2100:bluetooth_rxtx.c **** 		}
2101:bluetooth_rxtx.c **** 
2102:bluetooth_rxtx.c **** 		rx_tc = 0;
 7897              		.loc 1 2102 0
 7898 04d2 1F4B     		ldr	r3, .L401+72
 7899 04d4 0022     		movs	r2, #0
 7900 04d6 1A60     		str	r2, [r3]
2103:bluetooth_rxtx.c **** 		rx_err = 0;
 7901              		.loc 1 2103 0
 7902 04d8 1E4B     		ldr	r3, .L401+76
 7903 04da 0022     		movs	r2, #0
 7904 04dc 1A60     		str	r2, [r3]
 7905              	.L354:
 7906              	.LBE7:
1937:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7907              		.loc 1 1937 0
 7908 04de 174B     		ldr	r3, .L401+52
 7909 04e0 1B78     		ldrb	r3, [r3]
 7910 04e2 DBB2     		uxtb	r3, r3
 7911 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7912 04e6 9A42     		cmp	r2, r3
 7913 04e8 3FF4B1AD 		beq	.L398
 7914              	.L397:
2104:bluetooth_rxtx.c **** 	}
2105:bluetooth_rxtx.c **** 
2106:bluetooth_rxtx.c **** cleanup:
2107:bluetooth_rxtx.c **** 
2108:bluetooth_rxtx.c **** 	// disable USB interrupts
2109:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7915              		.loc 1 2109 0
 7916 04ec 1A4B     		ldr	r3, .L401+80
 7917 04ee 4FF08072 		mov	r2, #16777216
 7918 04f2 1A60     		str	r2, [r3]
2110:bluetooth_rxtx.c **** 
2111:bluetooth_rxtx.c **** 	// reset the radio completely
2112:bluetooth_rxtx.c **** 	cc2400_idle();
 7919              		.loc 1 2112 0
 7920 04f4 FFF7FEFF 		bl	cc2400_idle
2113:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7921              		.loc 1 2113 0
 7922 04f8 FFF7FEFF 		bl	dio_ssp_stop
2114:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7923              		.loc 1 2114 0
 7924 04fc FFF7FEFF 		bl	cs_trigger_disable
ARM GAS  /tmp/ccxwuSCA.s 			page 176


2115:bluetooth_rxtx.c **** }
 7925              		.loc 1 2115 0
 7926 0500 6C37     		adds	r7, r7, #108
 7927              		.cfi_def_cfa_offset 12
 7928 0502 BD46     		mov	sp, r7
 7929              		.cfi_def_cfa_register 13
 7930              		@ sp needed
 7931 0504 90BD     		pop	{r4, r7, pc}
 7932              	.L402:
 7933 0506 00BF     		.align	2
 7934              	.L401:
 7935 0508 00000000 		.word	rxbuf1
 7936 050c 00000000 		.word	le
 7937 0510 38C00920 		.word	537509944
 7938 0514 00000000 		.word	packet_cb
 7939 0518 00000000 		.word	clkn
 7940 051c 08400040 		.word	1073758216
 7941 0520 24000340 		.word	1073938468
 7942 0524 08000340 		.word	1073938440
 7943 0528 0C000340 		.word	1073938444
 7944 052c 80F0FA02 		.word	50000000
 7945 0530 00000000 		.word	le_jam_count
 7946 0534 3CC00920 		.word	537509948
 7947 0538 00000000 		.word	jam_mode
 7948 053c 00000000 		.word	requested_mode
 7949 0540 00000000 		.word	saved_request
 7950 0544 00000000 		.word	channel
 7951 0548 D4000000 		.word	restart_jamming.4723
 7952 054c 00000000 		.word	do_hop
 7953 0550 00000000 		.word	rx_tc
 7954 0554 00000000 		.word	rx_err
 7955 0558 80E100E0 		.word	-536813184
 7956              		.cfi_endproc
 7957              	.LFE33:
 7959              		.section	.text.cb_follow_le,"ax",%progbits
 7960              		.align	2
 7961              		.global	cb_follow_le
 7962              		.thumb
 7963              		.thumb_func
 7965              	cb_follow_le:
 7966              	.LFB34:
2116:bluetooth_rxtx.c **** 
2117:bluetooth_rxtx.c **** 
2118:bluetooth_rxtx.c **** 
2119:bluetooth_rxtx.c **** /* low energy connection following
2120:bluetooth_rxtx.c ****  * follows a known AA around */
2121:bluetooth_rxtx.c **** int cb_follow_le() {
 7967              		.loc 1 2121 0
 7968              		.cfi_startproc
 7969              		@ args = 0, pretend = 0, frame = 48
 7970              		@ frame_needed = 1, uses_anonymous_args = 0
 7971 0000 80B5     		push	{r7, lr}
 7972              		.cfi_def_cfa_offset 8
 7973              		.cfi_offset 7, -8
 7974              		.cfi_offset 14, -4
 7975 0002 8CB0     		sub	sp, sp, #48
 7976              		.cfi_def_cfa_offset 56
ARM GAS  /tmp/ccxwuSCA.s 			page 177


 7977 0004 00AF     		add	r7, sp, #0
 7978              		.cfi_def_cfa_register 7
2122:bluetooth_rxtx.c **** 	int i, j, k;
2123:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 7979              		.loc 1 2123 0
 7980 0006 6C4B     		ldr	r3, .L419
 7981 0008 1B88     		ldrh	r3, [r3]	@ movhi
 7982 000a 9BB2     		uxth	r3, r3
 7983 000c DBB2     		uxtb	r3, r3
 7984 000e 623B     		subs	r3, r3, #98
 7985 0010 DBB2     		uxtb	r3, r3
 7986 0012 1846     		mov	r0, r3
 7987 0014 FFF7FEFF 		bl	btle_channel_index
 7988 0018 0346     		mov	r3, r0
 7989 001a 1A46     		mov	r2, r3
 7990 001c 674B     		ldr	r3, .L419+4
 7991 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7992 0020 3B62     		str	r3, [r7, #32]
2124:bluetooth_rxtx.c **** 
2125:bluetooth_rxtx.c **** 	u32 access_address = 0;
 7993              		.loc 1 2125 0
 7994 0022 0023     		movs	r3, #0
 7995 0024 FB61     		str	r3, [r7, #28]
2126:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7996              		.loc 1 2126 0
 7997 0026 0023     		movs	r3, #0
 7998 0028 FB62     		str	r3, [r7, #44]
 7999 002a 0EE0     		b	.L404
 8000              	.L405:
2127:bluetooth_rxtx.c **** 		access_address >>= 1;
 8001              		.loc 1 2127 0 discriminator 3
 8002 002c FB69     		ldr	r3, [r7, #28]
 8003 002e 5B08     		lsrs	r3, r3, #1
 8004 0030 FB61     		str	r3, [r7, #28]
2128:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 8005              		.loc 1 2128 0 discriminator 3
 8006 0032 634A     		ldr	r2, .L419+8
 8007 0034 FB6A     		ldr	r3, [r7, #44]
 8008 0036 1344     		add	r3, r3, r2
 8009 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8010 003a DB07     		lsls	r3, r3, #31
 8011 003c 1A46     		mov	r2, r3
 8012 003e FB69     		ldr	r3, [r7, #28]
 8013 0040 1343     		orrs	r3, r3, r2
 8014 0042 FB61     		str	r3, [r7, #28]
2126:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8015              		.loc 1 2126 0 discriminator 3
 8016 0044 FB6A     		ldr	r3, [r7, #44]
 8017 0046 0133     		adds	r3, r3, #1
 8018 0048 FB62     		str	r3, [r7, #44]
 8019              	.L404:
2126:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 8020              		.loc 1 2126 0 is_stmt 0 discriminator 1
 8021 004a FB6A     		ldr	r3, [r7, #44]
 8022 004c 1E2B     		cmp	r3, #30
 8023 004e EDDD     		ble	.L405
2129:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccxwuSCA.s 			page 178


2130:bluetooth_rxtx.c **** 
2131:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 8024              		.loc 1 2131 0 is_stmt 1
 8025 0050 1F23     		movs	r3, #31
 8026 0052 FB62     		str	r3, [r7, #44]
 8027 0054 A6E0     		b	.L406
 8028              	.L417:
2132:bluetooth_rxtx.c **** 		access_address >>= 1;
 8029              		.loc 1 2132 0
 8030 0056 FB69     		ldr	r3, [r7, #28]
 8031 0058 5B08     		lsrs	r3, r3, #1
 8032 005a FB61     		str	r3, [r7, #28]
2133:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 8033              		.loc 1 2133 0
 8034 005c 584A     		ldr	r2, .L419+8
 8035 005e FB6A     		ldr	r3, [r7, #44]
 8036 0060 1344     		add	r3, r3, r2
 8037 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8038 0064 DB07     		lsls	r3, r3, #31
 8039 0066 1A46     		mov	r2, r3
 8040 0068 FB69     		ldr	r3, [r7, #28]
 8041 006a 1343     		orrs	r3, r3, r2
 8042 006c FB61     		str	r3, [r7, #28]
2134:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 8043              		.loc 1 2134 0
 8044 006e 554B     		ldr	r3, .L419+12
 8045 0070 1A68     		ldr	r2, [r3]
 8046 0072 FB69     		ldr	r3, [r7, #28]
 8047 0074 9A42     		cmp	r2, r3
 8048 0076 40F09280 		bne	.L407
2135:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 8049              		.loc 1 2135 0
 8050 007a 0023     		movs	r3, #0
 8051 007c BB62     		str	r3, [r7, #40]
 8052 007e 48E0     		b	.L408
 8053              	.L414:
 8054              	.LBB12:
2136:bluetooth_rxtx.c **** 				u8 byte = 0;
 8055              		.loc 1 2136 0
 8056 0080 0023     		movs	r3, #0
 8057 0082 FB76     		strb	r3, [r7, #27]
2137:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 8058              		.loc 1 2137 0
 8059 0084 0023     		movs	r3, #0
 8060 0086 7B62     		str	r3, [r7, #36]
 8061 0088 37E0     		b	.L409
 8062              	.L413:
 8063              	.LBB13:
2138:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8064              		.loc 1 2138 0
 8065 008a BB6A     		ldr	r3, [r7, #40]
 8066 008c DA00     		lsls	r2, r3, #3
 8067 008e 7B6A     		ldr	r3, [r7, #36]
 8068 0090 1A44     		add	r2, r2, r3
 8069 0092 FB6A     		ldr	r3, [r7, #44]
 8070 0094 1344     		add	r3, r3, r2
 8071 0096 1F3B     		subs	r3, r3, #31
ARM GAS  /tmp/ccxwuSCA.s 			page 179


 8072 0098 3B61     		str	r3, [r7, #16]
2139:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 8073              		.loc 1 2139 0
 8074 009a 3B69     		ldr	r3, [r7, #16]
 8075 009c B3F5487F 		cmp	r3, #800
 8076 00a0 00DB     		blt	.L410
 8077 00a2 2DE0     		b	.L411
 8078              	.L410:
2140:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 8079              		.loc 1 2140 0
 8080 00a4 464A     		ldr	r2, .L419+8
 8081 00a6 3B69     		ldr	r3, [r7, #16]
 8082 00a8 1344     		add	r3, r3, r2
 8083 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8084 00ac 7B61     		str	r3, [r7, #20]
2141:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 8085              		.loc 1 2141 0
 8086 00ae BB6A     		ldr	r3, [r7, #40]
 8087 00b0 032B     		cmp	r3, #3
 8088 00b2 16DD     		ble	.L412
2142:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 8089              		.loc 1 2142 0
 8090 00b4 444A     		ldr	r2, .L419+16
 8091 00b6 3B6A     		ldr	r3, [r7, #32]
 8092 00b8 1344     		add	r3, r3, r2
 8093 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8094 00bc 1A46     		mov	r2, r3
 8095 00be 7B69     		ldr	r3, [r7, #20]
 8096 00c0 5340     		eors	r3, r3, r2
 8097 00c2 7B61     		str	r3, [r7, #20]
2143:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 8098              		.loc 1 2143 0
 8099 00c4 3B6A     		ldr	r3, [r7, #32]
 8100 00c6 0133     		adds	r3, r3, #1
 8101 00c8 1946     		mov	r1, r3
 8102 00ca 404B     		ldr	r3, .L419+20
 8103 00cc A1FB0323 		umull	r2, r3, r1, r3
 8104 00d0 C81A     		subs	r0, r1, r3
 8105 00d2 4008     		lsrs	r0, r0, #1
 8106 00d4 0344     		add	r3, r3, r0
 8107 00d6 9A09     		lsrs	r2, r3, #6
 8108 00d8 1346     		mov	r3, r2
 8109 00da DB01     		lsls	r3, r3, #7
 8110 00dc 9B1A     		subs	r3, r3, r2
 8111 00de CA1A     		subs	r2, r1, r3
 8112 00e0 3A62     		str	r2, [r7, #32]
 8113              	.L412:
2144:bluetooth_rxtx.c **** 					}
2145:bluetooth_rxtx.c **** 					byte |= bit << k;
 8114              		.loc 1 2145 0 discriminator 2
 8115 00e2 7A69     		ldr	r2, [r7, #20]
 8116 00e4 7B6A     		ldr	r3, [r7, #36]
 8117 00e6 02FA03F3 		lsl	r3, r2, r3
 8118 00ea DAB2     		uxtb	r2, r3
 8119 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 8120 00ee 1343     		orrs	r3, r3, r2
 8121 00f0 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 180


 8122 00f2 FB76     		strb	r3, [r7, #27]
 8123              	.LBE13:
2137:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8124              		.loc 1 2137 0 discriminator 2
 8125 00f4 7B6A     		ldr	r3, [r7, #36]
 8126 00f6 0133     		adds	r3, r3, #1
 8127 00f8 7B62     		str	r3, [r7, #36]
 8128              	.L409:
2137:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 8129              		.loc 1 2137 0 is_stmt 0 discriminator 1
 8130 00fa 7B6A     		ldr	r3, [r7, #36]
 8131 00fc 072B     		cmp	r3, #7
 8132 00fe C4DD     		ble	.L413
 8133              	.L411:
2146:bluetooth_rxtx.c **** 				}
2147:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 8134              		.loc 1 2147 0 is_stmt 1 discriminator 2
 8135 0100 334B     		ldr	r3, .L419+24
 8136 0102 1A68     		ldr	r2, [r3]
 8137 0104 BB6A     		ldr	r3, [r7, #40]
 8138 0106 1344     		add	r3, r3, r2
 8139 0108 FA7E     		ldrb	r2, [r7, #27]
 8140 010a 1A70     		strb	r2, [r3]
 8141              	.LBE12:
2135:bluetooth_rxtx.c **** 				u8 byte = 0;
 8142              		.loc 1 2135 0 discriminator 2
 8143 010c BB6A     		ldr	r3, [r7, #40]
 8144 010e 0133     		adds	r3, r3, #1
 8145 0110 BB62     		str	r3, [r7, #40]
 8146              	.L408:
2135:bluetooth_rxtx.c **** 				u8 byte = 0;
 8147              		.loc 1 2135 0 is_stmt 0 discriminator 1
 8148 0112 BB6A     		ldr	r3, [r7, #40]
 8149 0114 2D2B     		cmp	r3, #45
 8150 0116 B3DD     		ble	.L414
2148:bluetooth_rxtx.c **** 			}
2149:bluetooth_rxtx.c **** 
2150:bluetooth_rxtx.c **** 			// verify CRC
2151:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 8151              		.loc 1 2151 0 is_stmt 1
 8152 0118 2A4B     		ldr	r3, .L419+12
 8153 011a 1B69     		ldr	r3, [r3, #16]
 8154 011c 002B     		cmp	r3, #0
 8155 011e 2ED0     		beq	.L415
 8156              	.LBB14:
2152:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 8157              		.loc 1 2152 0
 8158 0120 2B4B     		ldr	r3, .L419+24
 8159 0122 1B68     		ldr	r3, [r3]
 8160 0124 0533     		adds	r3, r3, #5
 8161 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8162 0128 03F03F03 		and	r3, r3, #63
 8163 012c 0233     		adds	r3, r3, #2
 8164 012e FB60     		str	r3, [r7, #12]
2153:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 8165              		.loc 1 2153 0
 8166 0130 244B     		ldr	r3, .L419+12
ARM GAS  /tmp/ccxwuSCA.s 			page 181


 8167 0132 DA68     		ldr	r2, [r3, #12]
 8168 0134 264B     		ldr	r3, .L419+24
 8169 0136 1B68     		ldr	r3, [r3]
 8170 0138 0433     		adds	r3, r3, #4
 8171 013a 1046     		mov	r0, r2
 8172 013c 1946     		mov	r1, r3
 8173 013e FA68     		ldr	r2, [r7, #12]
 8174 0140 FFF7FEFF 		bl	btle_crcgen_lut
 8175 0144 B860     		str	r0, [r7, #8]
2154:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 8176              		.loc 1 2154 0
 8177 0146 224B     		ldr	r3, .L419+24
 8178 0148 1A68     		ldr	r2, [r3]
 8179 014a FB68     		ldr	r3, [r7, #12]
 8180 014c 0633     		adds	r3, r3, #6
 8181 014e 1344     		add	r3, r3, r2
 8182 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8183 0152 1A04     		lsls	r2, r3, #16
2155:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 8184              		.loc 1 2155 0
 8185 0154 1E4B     		ldr	r3, .L419+24
 8186 0156 1968     		ldr	r1, [r3]
 8187 0158 FB68     		ldr	r3, [r7, #12]
 8188 015a 0533     		adds	r3, r3, #5
 8189 015c 0B44     		add	r3, r3, r1
 8190 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8191 0160 1B02     		lsls	r3, r3, #8
 8192 0162 1343     		orrs	r3, r3, r2
2156:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 8193              		.loc 1 2156 0
 8194 0164 1A4A     		ldr	r2, .L419+24
 8195 0166 1268     		ldr	r2, [r2]
 8196 0168 F968     		ldr	r1, [r7, #12]
 8197 016a 0431     		adds	r1, r1, #4
 8198 016c 0A44     		add	r2, r2, r1
 8199 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8200 0170 1343     		orrs	r3, r3, r2
2154:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 8201              		.loc 1 2154 0
 8202 0172 7B60     		str	r3, [r7, #4]
2157:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 8203              		.loc 1 2157 0
 8204 0174 BA68     		ldr	r2, [r7, #8]
 8205 0176 7B68     		ldr	r3, [r7, #4]
 8206 0178 9A42     		cmp	r2, r3
 8207 017a 00D0     		beq	.L415
2158:bluetooth_rxtx.c **** 					break;
 8208              		.loc 1 2158 0
 8209 017c 17E0     		b	.L416
 8210              	.L415:
 8211              	.LBE14:
2159:bluetooth_rxtx.c **** 			}
2160:bluetooth_rxtx.c **** 
2161:bluetooth_rxtx.c **** 			// send to PC
2162:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 8212              		.loc 1 2162 0
 8213 017e 144B     		ldr	r3, .L419+24
ARM GAS  /tmp/ccxwuSCA.s 			page 182


 8214 0180 1B68     		ldr	r3, [r3]
 8215 0182 0120     		movs	r0, #1
 8216 0184 1946     		mov	r1, r3
 8217 0186 FFF7FEFF 		bl	enqueue
2163:bluetooth_rxtx.c **** 			RXLED_SET;
 8218              		.loc 1 2163 0
 8219 018a 124B     		ldr	r3, .L419+28
 8220 018c 1022     		movs	r2, #16
 8221 018e 1A60     		str	r2, [r3]
2164:bluetooth_rxtx.c **** 
2165:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 8222              		.loc 1 2165 0
 8223 0190 114B     		ldr	r3, .L419+32
 8224 0192 1B68     		ldr	r3, [r3]
 8225 0194 0E4A     		ldr	r2, .L419+24
 8226 0196 1268     		ldr	r2, [r2]
 8227 0198 1046     		mov	r0, r2
 8228 019a 9847     		blx	r3
2166:bluetooth_rxtx.c **** 
2167:bluetooth_rxtx.c **** 			break;
 8229              		.loc 1 2167 0
 8230 019c 07E0     		b	.L416
 8231              	.L407:
2131:bluetooth_rxtx.c **** 		access_address >>= 1;
 8232              		.loc 1 2131 0 discriminator 2
 8233 019e FB6A     		ldr	r3, [r7, #44]
 8234 01a0 0133     		adds	r3, r3, #1
 8235 01a2 FB62     		str	r3, [r7, #44]
 8236              	.L406:
2131:bluetooth_rxtx.c **** 		access_address >>= 1;
 8237              		.loc 1 2131 0 is_stmt 0 discriminator 1
 8238 01a4 FB6A     		ldr	r3, [r7, #44]
 8239 01a6 B3F5D87F 		cmp	r3, #432
 8240 01aa FFF654AF 		blt	.L417
 8241              	.L416:
2168:bluetooth_rxtx.c **** 		}
2169:bluetooth_rxtx.c **** 	}
2170:bluetooth_rxtx.c **** 
2171:bluetooth_rxtx.c **** 	return 1;
 8242              		.loc 1 2171 0 is_stmt 1
 8243 01ae 0123     		movs	r3, #1
2172:bluetooth_rxtx.c **** }
 8244              		.loc 1 2172 0
 8245 01b0 1846     		mov	r0, r3
 8246 01b2 3037     		adds	r7, r7, #48
 8247              		.cfi_def_cfa_offset 8
 8248 01b4 BD46     		mov	sp, r7
 8249              		.cfi_def_cfa_register 13
 8250              		@ sp needed
 8251 01b6 80BD     		pop	{r7, pc}
 8252              	.L420:
 8253              		.align	2
 8254              	.L419:
 8255 01b8 00000000 		.word	channel
 8256 01bc C0000000 		.word	whitening_index
 8257 01c0 00000000 		.word	unpacked
 8258 01c4 00000000 		.word	le
ARM GAS  /tmp/ccxwuSCA.s 			page 183


 8259 01c8 40000000 		.word	whitening
 8260 01cc 11080402 		.word	33818641
 8261 01d0 00000000 		.word	idle_rxbuf
 8262 01d4 38C00920 		.word	537509944
 8263 01d8 00000000 		.word	packet_cb
 8264              		.cfi_endproc
 8265              	.LFE34:
 8267              		.section	.text.connection_follow_cb,"ax",%progbits
 8268              		.align	2
 8269              		.global	connection_follow_cb
 8270              		.thumb
 8271              		.thumb_func
 8273              	connection_follow_cb:
 8274              	.LFB35:
2173:bluetooth_rxtx.c **** 
2174:bluetooth_rxtx.c **** /**
2175:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2176:bluetooth_rxtx.c ****  */
2177:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 8275              		.loc 1 2177 0
 8276              		.cfi_startproc
 8277              		@ args = 0, pretend = 0, frame = 40
 8278              		@ frame_needed = 1, uses_anonymous_args = 0
 8279 0000 80B5     		push	{r7, lr}
 8280              		.cfi_def_cfa_offset 8
 8281              		.cfi_offset 7, -8
 8282              		.cfi_offset 14, -4
 8283 0002 8AB0     		sub	sp, sp, #40
 8284              		.cfi_def_cfa_offset 48
 8285 0004 00AF     		add	r7, sp, #0
 8286              		.cfi_def_cfa_register 7
 8287 0006 7860     		str	r0, [r7, #4]
2178:bluetooth_rxtx.c **** 	int i;
2179:bluetooth_rxtx.c **** 	u32 aa = 0;
 8288              		.loc 1 2179 0
 8289 0008 0023     		movs	r3, #0
 8290 000a 3B62     		str	r3, [r7, #32]
2180:bluetooth_rxtx.c **** 
2181:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2182:bluetooth_rxtx.c **** #define HEADER_IDX 4
2183:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2184:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2185:bluetooth_rxtx.c **** 
2186:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 8291              		.loc 1 2186 0
 8292 000c 7B68     		ldr	r3, [r7, #4]
 8293 000e FB61     		str	r3, [r7, #28]
2187:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 8294              		.loc 1 2187 0
 8295 0010 7B68     		ldr	r3, [r7, #4]
 8296 0012 1B79     		ldrb	r3, [r3, #4]
 8297 0014 FB76     		strb	r3, [r7, #27]
2188:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 8298              		.loc 1 2188 0
 8299 0016 7B68     		ldr	r3, [r7, #4]
 8300 0018 0533     		adds	r3, r3, #5
 8301 001a 7B61     		str	r3, [r7, #20]
ARM GAS  /tmp/ccxwuSCA.s 			page 184


2189:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 8302              		.loc 1 2189 0
 8303 001c 7B68     		ldr	r3, [r7, #4]
 8304 001e 0633     		adds	r3, r3, #6
 8305 0020 3B61     		str	r3, [r7, #16]
2190:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 8306              		.loc 1 2190 0
 8307 0022 7B69     		ldr	r3, [r7, #20]
 8308 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8309 0026 0633     		adds	r3, r3, #6
 8310 0028 1A46     		mov	r2, r3
 8311 002a 7B68     		ldr	r3, [r7, #4]
 8312 002c 1344     		add	r3, r3, r2
 8313 002e FB60     		str	r3, [r7, #12]
2191:bluetooth_rxtx.c **** 
2192:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 8314              		.loc 1 2192 0
 8315 0030 8B4B     		ldr	r3, .L431
 8316 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8317 0034 022B     		cmp	r3, #2
 8318 0036 1CD1     		bne	.L422
2193:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2194:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 8319              		.loc 1 2194 0
 8320 0038 894B     		ldr	r3, .L431
 8321 003a 0322     		movs	r2, #3
 8322 003c 1A75     		strb	r2, [r3, #20]
2195:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 8323              		.loc 1 2195 0
 8324 003e 894B     		ldr	r3, .L431+4
 8325 0040 1B68     		ldr	r3, [r3]
 8326 0042 874A     		ldr	r2, .L431
 8327 0044 9361     		str	r3, [r2, #24]
2196:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 8328              		.loc 1 2196 0
 8329 0046 864B     		ldr	r3, .L431
 8330 0048 DB8B     		ldrh	r3, [r3, #30]
 8331 004a 013B     		subs	r3, r3, #1
 8332 004c 9AB2     		uxth	r2, r3
 8333 004e 844B     		ldr	r3, .L431
 8334 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2197:bluetooth_rxtx.c **** 		le.conn_count = 0;
 8335              		.loc 1 2197 0
 8336 0052 834B     		ldr	r3, .L431
 8337 0054 0022     		movs	r2, #0
 8338 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2198:bluetooth_rxtx.c **** 		le.update_pending = 0;
 8339              		.loc 1 2198 0
 8340 0058 814B     		ldr	r3, .L431
 8341 005a 0022     		movs	r2, #0
 8342 005c 9A62     		str	r2, [r3, #40]
2199:bluetooth_rxtx.c **** 
2200:bluetooth_rxtx.c **** 		// hue hue hue
2201:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 8343              		.loc 1 2201 0
 8344 005e 824B     		ldr	r3, .L431+8
 8345 0060 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 185


 8346 0062 DBB2     		uxtb	r3, r3
 8347 0064 002B     		cmp	r3, #0
 8348 0066 00F0F780 		beq	.L421
2202:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 8349              		.loc 1 2202 0
 8350 006a 804B     		ldr	r3, .L431+12
 8351 006c 2822     		movs	r2, #40
 8352 006e 1A60     		str	r2, [r3]
 8353 0070 F2E0     		b	.L421
 8354              	.L422:
2203:bluetooth_rxtx.c **** 
2204:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 8355              		.loc 1 2204 0
 8356 0072 7B4B     		ldr	r3, .L431
 8357 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8358 0076 032B     		cmp	r3, #3
 8359 0078 6FD1     		bne	.L425
 8360              	.LBB15:
2205:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 8361              		.loc 1 2205 0
 8362 007a FB7E     		ldrb	r3, [r7, #27]
 8363 007c 03F00303 		and	r3, r3, #3
 8364 0080 FB72     		strb	r3, [r7, #11]
2206:bluetooth_rxtx.c **** 
2207:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2208:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 8365              		.loc 1 2208 0
 8366 0082 774B     		ldr	r3, .L431
 8367 0084 9B6A     		ldr	r3, [r3, #40]
 8368 0086 002B     		cmp	r3, #0
 8369 0088 21D0     		beq	.L426
 8370              		.loc 1 2208 0 is_stmt 0 discriminator 1
 8371 008a 754B     		ldr	r3, .L431
 8372 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8373 008e 9AB2     		uxth	r2, r3
 8374 0090 734B     		ldr	r3, .L431
 8375 0092 9B8D     		ldrh	r3, [r3, #44]
 8376 0094 9A42     		cmp	r2, r3
 8377 0096 1AD1     		bne	.L426
2209:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2210:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 8378              		.loc 1 2210 0 is_stmt 1
 8379 0098 724B     		ldr	r3, .L431+4
 8380 009a 1B68     		ldr	r3, [r3]
 8381 009c 704A     		ldr	r2, .L431
 8382 009e 9361     		str	r3, [r2, #24]
2211:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 8383              		.loc 1 2211 0
 8384 00a0 6F4B     		ldr	r3, .L431
 8385 00a2 DA8D     		ldrh	r2, [r3, #46]
 8386 00a4 6E4B     		ldr	r3, .L431
 8387 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2212:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 8388              		.loc 1 2212 0
 8389 00a8 6D4B     		ldr	r3, .L431
 8390 00aa DB8D     		ldrh	r3, [r3, #46]
 8391 00ac 013B     		subs	r3, r3, #1
ARM GAS  /tmp/ccxwuSCA.s 			page 186


 8392 00ae 9AB2     		uxth	r2, r3
 8393 00b0 6B4B     		ldr	r3, .L431
 8394 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2213:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 8395              		.loc 1 2213 0
 8396 00b4 6A4B     		ldr	r3, .L431
 8397 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 8398 00ba 694B     		ldr	r3, .L431
 8399 00bc 83F82220 		strb	r2, [r3, #34]
2214:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 8400              		.loc 1 2214 0
 8401 00c0 674B     		ldr	r3, .L431
 8402 00c2 5A8E     		ldrh	r2, [r3, #50]
 8403 00c4 664B     		ldr	r3, .L431
 8404 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2215:bluetooth_rxtx.c **** 			le.update_pending = 0;
 8405              		.loc 1 2215 0
 8406 00c8 654B     		ldr	r3, .L431
 8407 00ca 0022     		movs	r2, #0
 8408 00cc 9A62     		str	r2, [r3, #40]
 8409              	.L426:
2216:bluetooth_rxtx.c **** 		}
2217:bluetooth_rxtx.c **** 
2218:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 8410              		.loc 1 2218 0
 8411 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 8412 00d0 032B     		cmp	r3, #3
 8413 00d2 41D1     		bne	.L427
 8414              		.loc 1 2218 0 is_stmt 0 discriminator 1
 8415 00d4 3B69     		ldr	r3, [r7, #16]
 8416 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8417 00d8 002B     		cmp	r3, #0
 8418 00da 3DD1     		bne	.L427
2219:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2220:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2221:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 8419              		.loc 1 2221 0 is_stmt 1
 8420 00dc 7B68     		ldr	r3, [r7, #4]
 8421 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 8422 00e0 5F4B     		ldr	r3, .L431
 8423 00e2 83F83020 		strb	r2, [r3, #48]
2222:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 8424              		.loc 1 2222 0
 8425 00e6 7B68     		ldr	r3, [r7, #4]
 8426 00e8 0833     		adds	r3, r3, #8
 8427 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8428 00ec 9AB2     		uxth	r2, r3
 8429 00ee 7B68     		ldr	r3, [r7, #4]
 8430 00f0 0933     		adds	r3, r3, #9
 8431 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8432 00f4 9BB2     		uxth	r3, r3
 8433 00f6 1B02     		lsls	r3, r3, #8
 8434 00f8 9BB2     		uxth	r3, r3
 8435 00fa 1344     		add	r3, r3, r2
 8436 00fc 9AB2     		uxth	r2, r3
 8437 00fe 584B     		ldr	r3, .L431
 8438 0100 5A86     		strh	r2, [r3, #50]	@ movhi
ARM GAS  /tmp/ccxwuSCA.s 			page 187


2223:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 8439              		.loc 1 2223 0
 8440 0102 7B68     		ldr	r3, [r7, #4]
 8441 0104 0A33     		adds	r3, r3, #10
 8442 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8443 0108 9AB2     		uxth	r2, r3
 8444 010a 7B68     		ldr	r3, [r7, #4]
 8445 010c 0B33     		adds	r3, r3, #11
 8446 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8447 0110 9BB2     		uxth	r3, r3
 8448 0112 1B02     		lsls	r3, r3, #8
 8449 0114 9BB2     		uxth	r3, r3
 8450 0116 1344     		add	r3, r3, r2
 8451 0118 9AB2     		uxth	r2, r3
 8452 011a 514B     		ldr	r3, .L431
 8453 011c DA85     		strh	r2, [r3, #46]	@ movhi
2224:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 8454              		.loc 1 2224 0
 8455 011e 7B68     		ldr	r3, [r7, #4]
 8456 0120 1033     		adds	r3, r3, #16
 8457 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8458 0124 9AB2     		uxth	r2, r3
 8459 0126 7B68     		ldr	r3, [r7, #4]
 8460 0128 1133     		adds	r3, r3, #17
 8461 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8462 012c 9BB2     		uxth	r3, r3
 8463 012e 1B02     		lsls	r3, r3, #8
 8464 0130 9BB2     		uxth	r3, r3
 8465 0132 1344     		add	r3, r3, r2
 8466 0134 9AB2     		uxth	r2, r3
 8467 0136 4A4B     		ldr	r3, .L431
 8468 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2225:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 8469              		.loc 1 2225 0
 8470 013a 494B     		ldr	r3, .L431
 8471 013c 9B8D     		ldrh	r3, [r3, #44]
 8472 013e 1A46     		mov	r2, r3
 8473 0140 474B     		ldr	r3, .L431
 8474 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8475 0144 9BB2     		uxth	r3, r3
 8476 0146 D31A     		subs	r3, r2, r3
 8477 0148 47F6FE72 		movw	r2, #32766
 8478 014c 9342     		cmp	r3, r2
 8479 014e 03DC     		bgt	.L427
2226:bluetooth_rxtx.c **** 				le.update_pending = 1;
 8480              		.loc 1 2226 0
 8481 0150 434B     		ldr	r3, .L431
 8482 0152 0122     		movs	r2, #1
 8483 0154 9A62     		str	r2, [r3, #40]
 8484              	.LBE15:
 8485 0156 7FE0     		b	.L421
 8486              	.L427:
 8487 0158 7EE0     		b	.L421
 8488              	.L425:
2227:bluetooth_rxtx.c **** 		}
2228:bluetooth_rxtx.c **** 
2229:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
ARM GAS  /tmp/ccxwuSCA.s 			page 188


 8489              		.loc 1 2229 0
 8490 015a 414B     		ldr	r3, .L431
 8491 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8492 015e 012B     		cmp	r3, #1
 8493 0160 7AD1     		bne	.L421
 8494              	.LBB16:
2230:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 8495              		.loc 1 2230 0
 8496 0162 7B68     		ldr	r3, [r7, #4]
 8497 0164 0433     		adds	r3, r3, #4
 8498 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8499 0168 03F00F03 		and	r3, r3, #15
 8500 016c BB72     		strb	r3, [r7, #10]
2231:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 8501              		.loc 1 2231 0
 8502 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 8503 0170 052B     		cmp	r3, #5
 8504 0172 71D1     		bne	.L421
2232:bluetooth_rxtx.c **** 			// This is a connect packet
2233:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2234:bluetooth_rxtx.c **** 			if (le.target_set &&
 8505              		.loc 1 2234 0
 8506 0174 3A4B     		ldr	r3, .L431
 8507 0176 DB6B     		ldr	r3, [r3, #60]
 8508 0178 002B     		cmp	r3, #0
 8509 017a 14D0     		beq	.L428
2235:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8510              		.loc 1 2235 0 discriminator 1
 8511 017c 7B68     		ldr	r3, [r7, #4]
 8512 017e 0633     		adds	r3, r3, #6
 8513 0180 3B48     		ldr	r0, .L431+16
 8514 0182 1946     		mov	r1, r3
 8515 0184 0622     		movs	r2, #6
 8516 0186 FFF7FEFF 		bl	memcmp
 8517 018a 0346     		mov	r3, r0
2234:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8518              		.loc 1 2234 0 discriminator 1
 8519 018c 002B     		cmp	r3, #0
 8520 018e 0AD0     		beq	.L428
2236:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 8521              		.loc 1 2236 0
 8522 0190 7B68     		ldr	r3, [r7, #4]
 8523 0192 0C33     		adds	r3, r3, #12
 8524 0194 3648     		ldr	r0, .L431+16
 8525 0196 1946     		mov	r1, r3
 8526 0198 0622     		movs	r2, #6
 8527 019a FFF7FEFF 		bl	memcmp
 8528 019e 0346     		mov	r3, r0
2235:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8529              		.loc 1 2235 0
 8530 01a0 002B     		cmp	r3, #0
 8531 01a2 00D0     		beq	.L428
2237:bluetooth_rxtx.c **** 				return;
 8532              		.loc 1 2237 0
 8533 01a4 58E0     		b	.L421
 8534              	.L428:
2238:bluetooth_rxtx.c **** 			}
ARM GAS  /tmp/ccxwuSCA.s 			page 189


2239:bluetooth_rxtx.c **** 
2240:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 8535              		.loc 1 2240 0
 8536 01a6 2E4B     		ldr	r3, .L431
 8537 01a8 0222     		movs	r2, #2
 8538 01aa 1A75     		strb	r2, [r3, #20]
2241:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 8539              		.loc 1 2241 0
 8540 01ac 2C4B     		ldr	r3, .L431
 8541 01ae 0022     		movs	r2, #0
 8542 01b0 1A61     		str	r2, [r3, #16]
2242:bluetooth_rxtx.c **** 
2243:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 8543              		.loc 1 2243 0
 8544 01b2 0023     		movs	r3, #0
 8545 01b4 7B62     		str	r3, [r7, #36]
 8546 01b6 11E0     		b	.L429
 8547              	.L430:
2244:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8548              		.loc 1 2244 0 discriminator 3
 8549 01b8 7B6A     		ldr	r3, [r7, #36]
 8550 01ba 1233     		adds	r3, r3, #18
 8551 01bc 1A46     		mov	r2, r3
 8552 01be 7B68     		ldr	r3, [r7, #4]
 8553 01c0 1344     		add	r3, r3, r2
 8554 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8555 01c4 1A46     		mov	r2, r3
 8556 01c6 7B6A     		ldr	r3, [r7, #36]
 8557 01c8 DB00     		lsls	r3, r3, #3
 8558 01ca 02FA03F3 		lsl	r3, r2, r3
 8559 01ce 1A46     		mov	r2, r3
 8560 01d0 3B6A     		ldr	r3, [r7, #32]
 8561 01d2 1343     		orrs	r3, r3, r2
 8562 01d4 3B62     		str	r3, [r7, #32]
2243:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8563              		.loc 1 2243 0 discriminator 3
 8564 01d6 7B6A     		ldr	r3, [r7, #36]
 8565 01d8 0133     		adds	r3, r3, #1
 8566 01da 7B62     		str	r3, [r7, #36]
 8567              	.L429:
2243:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8568              		.loc 1 2243 0 is_stmt 0 discriminator 1
 8569 01dc 7B6A     		ldr	r3, [r7, #36]
 8570 01de 032B     		cmp	r3, #3
 8571 01e0 EADD     		ble	.L430
2245:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 8572              		.loc 1 2245 0 is_stmt 1
 8573 01e2 386A     		ldr	r0, [r7, #32]
 8574 01e4 FFF7FEFF 		bl	le_set_access_address
2246:bluetooth_rxtx.c **** 
2247:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2248:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 8575              		.loc 1 2248 0
 8576 01e8 7B68     		ldr	r3, [r7, #4]
 8577 01ea 1833     		adds	r3, r3, #24
 8578 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8579 01ee 1A04     		lsls	r2, r3, #16
ARM GAS  /tmp/ccxwuSCA.s 			page 190


2249:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8580              		.loc 1 2249 0
 8581 01f0 7B68     		ldr	r3, [r7, #4]
 8582 01f2 1733     		adds	r3, r3, #23
 8583 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8584 01f6 1B02     		lsls	r3, r3, #8
 8585 01f8 1343     		orrs	r3, r3, r2
2250:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 8586              		.loc 1 2250 0
 8587 01fa 7A68     		ldr	r2, [r7, #4]
 8588 01fc 1632     		adds	r2, r2, #22
 8589 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8590 0200 1343     		orrs	r3, r3, r2
2248:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8591              		.loc 1 2248 0
 8592 0202 1A46     		mov	r2, r3
 8593 0204 164B     		ldr	r3, .L431
 8594 0206 9A60     		str	r2, [r3, #8]
2251:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 8595              		.loc 1 2251 0
 8596 0208 154B     		ldr	r3, .L431
 8597 020a 9B68     		ldr	r3, [r3, #8]
 8598 020c 1846     		mov	r0, r3
 8599 020e FFF7FEFF 		bl	rbit
 8600 0212 0246     		mov	r2, r0
 8601 0214 124B     		ldr	r3, .L431
 8602 0216 DA60     		str	r2, [r3, #12]
2252:bluetooth_rxtx.c **** 
2253:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2254:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 8603              		.loc 1 2254 0
 8604 0218 7B68     		ldr	r3, [r7, #4]
 8605 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 8606 021c 104B     		ldr	r3, .L431
 8607 021e 83F82220 		strb	r2, [r3, #34]
2255:bluetooth_rxtx.c **** 
2256:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2257:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 8608              		.loc 1 2257 0
 8609 0222 7B68     		ldr	r3, [r7, #4]
 8610 0224 1A33     		adds	r3, r3, #26
 8611 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8612 0228 9AB2     		uxth	r2, r3
 8613 022a 0D4B     		ldr	r3, .L431
 8614 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2258:bluetooth_rxtx.c **** 
2259:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2260:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 8615              		.loc 1 2260 0
 8616 022e 7B68     		ldr	r3, [r7, #4]
 8617 0230 1C33     		adds	r3, r3, #28
 8618 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8619 0234 9AB2     		uxth	r2, r3
 8620 0236 0A4B     		ldr	r3, .L431
 8621 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2261:bluetooth_rxtx.c **** 
2262:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
ARM GAS  /tmp/ccxwuSCA.s 			page 191


2263:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 8622              		.loc 1 2263 0
 8623 023a 7B68     		ldr	r3, [r7, #4]
 8624 023c 2733     		adds	r3, r3, #39
 8625 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8626 0240 03F01F03 		and	r3, r3, #31
 8627 0244 DAB2     		uxtb	r2, r3
 8628 0246 064B     		ldr	r3, .L431
 8629 0248 9A75     		strb	r2, [r3, #22]
2264:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 8630              		.loc 1 2264 0
 8631 024a 054B     		ldr	r3, .L431
 8632 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 8633 024e 044B     		ldr	r3, .L431
 8634 0250 5A75     		strb	r2, [r3, #21]
2265:bluetooth_rxtx.c **** 
2266:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2267:bluetooth_rxtx.c **** 			do_hop = 1;
 8635              		.loc 1 2267 0
 8636 0252 084B     		ldr	r3, .L431+20
 8637 0254 0122     		movs	r2, #1
 8638 0256 1A70     		strb	r2, [r3]
 8639              	.L421:
 8640              	.LBE16:
2268:bluetooth_rxtx.c **** 		}
2269:bluetooth_rxtx.c **** 	}
2270:bluetooth_rxtx.c **** }
 8641              		.loc 1 2270 0
 8642 0258 2837     		adds	r7, r7, #40
 8643              		.cfi_def_cfa_offset 8
 8644 025a BD46     		mov	sp, r7
 8645              		.cfi_def_cfa_register 13
 8646              		@ sp needed
 8647 025c 80BD     		pop	{r7, pc}
 8648              	.L432:
 8649 025e 00BF     		.align	2
 8650              	.L431:
 8651 0260 00000000 		.word	le
 8652 0264 00000000 		.word	clkn
 8653 0268 00000000 		.word	jam_mode
 8654 026c 00000000 		.word	le_jam_count
 8655 0270 34000000 		.word	le+52
 8656 0274 00000000 		.word	do_hop
 8657              		.cfi_endproc
 8658              	.LFE35:
 8660              		.section	.text.bt_follow_le,"ax",%progbits
 8661              		.align	2
 8662              		.global	bt_follow_le
 8663              		.thumb
 8664              		.thumb_func
 8666              	bt_follow_le:
 8667              	.LFB36:
2271:bluetooth_rxtx.c **** 
2272:bluetooth_rxtx.c **** void bt_follow_le() {
 8668              		.loc 1 2272 0
 8669              		.cfi_startproc
 8670              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccxwuSCA.s 			page 192


 8671              		@ frame_needed = 1, uses_anonymous_args = 0
 8672 0000 80B5     		push	{r7, lr}
 8673              		.cfi_def_cfa_offset 8
 8674              		.cfi_offset 7, -8
 8675              		.cfi_offset 14, -4
 8676 0002 00AF     		add	r7, sp, #0
 8677              		.cfi_def_cfa_register 7
2273:bluetooth_rxtx.c **** 	reset_le();
 8678              		.loc 1 2273 0
 8679 0004 FFF7FEFF 		bl	reset_le
2274:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 8680              		.loc 1 2274 0
 8681 0008 044B     		ldr	r3, .L434
 8682 000a 054A     		ldr	r2, .L434+4
 8683 000c 1A60     		str	r2, [r3]
2275:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 8684              		.loc 1 2275 0
 8685 000e 0920     		movs	r0, #9
 8686 0010 FFF7FEFF 		bl	bt_le_sync
2276:bluetooth_rxtx.c **** 
2277:bluetooth_rxtx.c **** 	/* old non-sync mode
2278:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2279:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2280:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2281:bluetooth_rxtx.c **** 	*/
2282:bluetooth_rxtx.c **** 
2283:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 8687              		.loc 1 2283 0
 8688 0014 034B     		ldr	r3, .L434+8
 8689 0016 0022     		movs	r2, #0
 8690 0018 1A70     		strb	r2, [r3]
2284:bluetooth_rxtx.c **** }
 8691              		.loc 1 2284 0
 8692 001a 80BD     		pop	{r7, pc}
 8693              	.L435:
 8694              		.align	2
 8695              	.L434:
 8696 001c 00000000 		.word	packet_cb
 8697 0020 00000000 		.word	connection_follow_cb
 8698 0024 00000000 		.word	mode
 8699              		.cfi_endproc
 8700              	.LFE36:
 8702              		.section	.text.le_promisc_state,"ax",%progbits
 8703              		.align	2
 8704              		.global	le_promisc_state
 8705              		.thumb
 8706              		.thumb_func
 8708              	le_promisc_state:
 8709              	.LFB37:
2285:bluetooth_rxtx.c **** 
2286:bluetooth_rxtx.c **** // issue state change message
2287:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 8710              		.loc 1 2287 0
 8711              		.cfi_startproc
 8712              		@ args = 0, pretend = 0, frame = 72
 8713              		@ frame_needed = 1, uses_anonymous_args = 0
 8714 0000 80B5     		push	{r7, lr}
ARM GAS  /tmp/ccxwuSCA.s 			page 193


 8715              		.cfi_def_cfa_offset 8
 8716              		.cfi_offset 7, -8
 8717              		.cfi_offset 14, -4
 8718 0002 92B0     		sub	sp, sp, #72
 8719              		.cfi_def_cfa_offset 80
 8720 0004 00AF     		add	r7, sp, #0
 8721              		.cfi_def_cfa_register 7
 8722 0006 0346     		mov	r3, r0
 8723 0008 B960     		str	r1, [r7, #8]
 8724 000a 7A60     		str	r2, [r7, #4]
 8725 000c FB73     		strb	r3, [r7, #15]
2288:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 8726              		.loc 1 2288 0
 8727 000e 07F11403 		add	r3, r7, #20
 8728 0012 0022     		movs	r2, #0
 8729 0014 1A60     		str	r2, [r3]
 8730 0016 0433     		adds	r3, r3, #4
 8731 0018 0022     		movs	r2, #0
 8732 001a 1A60     		str	r2, [r3]
 8733 001c 0433     		adds	r3, r3, #4
 8734 001e 0022     		movs	r2, #0
 8735 0020 1A60     		str	r2, [r3]
 8736 0022 0433     		adds	r3, r3, #4
 8737 0024 0022     		movs	r2, #0
 8738 0026 1A60     		str	r2, [r3]
 8739 0028 0433     		adds	r3, r3, #4
 8740 002a 0022     		movs	r2, #0
 8741 002c 1A60     		str	r2, [r3]
 8742 002e 0433     		adds	r3, r3, #4
 8743 0030 0022     		movs	r2, #0
 8744 0032 1A60     		str	r2, [r3]
 8745 0034 0433     		adds	r3, r3, #4
 8746 0036 0022     		movs	r2, #0
 8747 0038 1A60     		str	r2, [r3]
 8748 003a 0433     		adds	r3, r3, #4
 8749 003c 0022     		movs	r2, #0
 8750 003e 1A60     		str	r2, [r3]
 8751 0040 0433     		adds	r3, r3, #4
 8752 0042 0022     		movs	r2, #0
 8753 0044 1A60     		str	r2, [r3]
 8754 0046 0433     		adds	r3, r3, #4
 8755 0048 0022     		movs	r2, #0
 8756 004a 1A60     		str	r2, [r3]
 8757 004c 0433     		adds	r3, r3, #4
 8758 004e 0022     		movs	r2, #0
 8759 0050 1A60     		str	r2, [r3]
 8760 0052 0433     		adds	r3, r3, #4
 8761 0054 0022     		movs	r2, #0
 8762 0056 1A60     		str	r2, [r3]
 8763 0058 0433     		adds	r3, r3, #4
 8764 005a 0022     		movs	r2, #0
 8765 005c 1A80     		strh	r2, [r3]	@ movhi
 8766 005e 0233     		adds	r3, r3, #2
2289:bluetooth_rxtx.c **** 	if (len > 49)
 8767              		.loc 1 2289 0
 8768 0060 7B68     		ldr	r3, [r7, #4]
 8769 0062 312B     		cmp	r3, #49
ARM GAS  /tmp/ccxwuSCA.s 			page 194


 8770 0064 01D9     		bls	.L437
2290:bluetooth_rxtx.c **** 		len = 49;
 8771              		.loc 1 2290 0
 8772 0066 3123     		movs	r3, #49
 8773 0068 7B60     		str	r3, [r7, #4]
 8774              	.L437:
2291:bluetooth_rxtx.c **** 
2292:bluetooth_rxtx.c **** 	buf[0] = type;
 8775              		.loc 1 2292 0
 8776 006a FB7B     		ldrb	r3, [r7, #15]
 8777 006c 3B75     		strb	r3, [r7, #20]
2293:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 8778              		.loc 1 2293 0
 8779 006e 07F11403 		add	r3, r7, #20
 8780 0072 0133     		adds	r3, r3, #1
 8781 0074 1846     		mov	r0, r3
 8782 0076 B968     		ldr	r1, [r7, #8]
 8783 0078 7A68     		ldr	r2, [r7, #4]
 8784 007a FFF7FEFF 		bl	memcpy
2294:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 8785              		.loc 1 2294 0
 8786 007e 07F11403 		add	r3, r7, #20
 8787 0082 0520     		movs	r0, #5
 8788 0084 1946     		mov	r1, r3
 8789 0086 FFF7FEFF 		bl	enqueue
2295:bluetooth_rxtx.c **** }
 8790              		.loc 1 2295 0
 8791 008a 4837     		adds	r7, r7, #72
 8792              		.cfi_def_cfa_offset 8
 8793 008c BD46     		mov	sp, r7
 8794              		.cfi_def_cfa_register 13
 8795              		@ sp needed
 8796 008e 80BD     		pop	{r7, pc}
 8797              		.cfi_endproc
 8798              	.LFE37:
 8800              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 8801              		.align	2
 8802              		.global	promisc_recover_hop_increment
 8803              		.thumb
 8804              		.thumb_func
 8806              	promisc_recover_hop_increment:
 8807              	.LFB38:
2296:bluetooth_rxtx.c **** 
2297:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2298:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2299:bluetooth_rxtx.c **** 
2300:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 8808              		.loc 1 2300 0
 8809              		.cfi_startproc
 8810              		@ args = 0, pretend = 0, frame = 16
 8811              		@ frame_needed = 1, uses_anonymous_args = 0
 8812 0000 80B5     		push	{r7, lr}
 8813              		.cfi_def_cfa_offset 8
 8814              		.cfi_offset 7, -8
 8815              		.cfi_offset 14, -4
 8816 0002 84B0     		sub	sp, sp, #16
 8817              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccxwuSCA.s 			page 195


 8818 0004 00AF     		add	r7, sp, #0
 8819              		.cfi_def_cfa_register 7
 8820 0006 7860     		str	r0, [r7, #4]
2301:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2302:bluetooth_rxtx.c **** 	if (channel == 2404) {
 8821              		.loc 1 2302 0
 8822 0008 554B     		ldr	r3, .L445
 8823 000a 1B88     		ldrh	r3, [r3]	@ movhi
 8824 000c 9BB2     		uxth	r3, r3
 8825 000e 40F66412 		movw	r2, #2404
 8826 0012 9342     		cmp	r3, r2
 8827 0014 14D1     		bne	.L439
2303:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 8828              		.loc 1 2303 0
 8829 0016 534B     		ldr	r3, .L445+4
 8830 0018 1B68     		ldr	r3, [r3]
 8831 001a C3F31303 		ubfx	r3, r3, #0, #20
 8832 001e 40F63542 		movw	r2, #3125
 8833 0022 02FB03F2 		mul	r2, r2, r3
 8834 0026 504B     		ldr	r3, .L445+8
 8835 0028 1B68     		ldr	r3, [r3]
 8836 002a 1344     		add	r3, r3, r2
 8837 002c 4F4A     		ldr	r2, .L445+12
 8838 002e 1360     		str	r3, [r2]
2304:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 8839              		.loc 1 2304 0
 8840 0030 4F4B     		ldr	r3, .L445+16
 8841 0032 40F66612 		movw	r2, #2406
 8842 0036 1A80     		strh	r2, [r3]	@ movhi
2305:bluetooth_rxtx.c **** 		do_hop = 1;
 8843              		.loc 1 2305 0
 8844 0038 4E4B     		ldr	r3, .L445+20
 8845 003a 0122     		movs	r2, #1
 8846 003c 1A70     		strb	r2, [r3]
 8847 003e 8BE0     		b	.L438
 8848              	.L439:
2306:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 8849              		.loc 1 2306 0
 8850 0040 474B     		ldr	r3, .L445
 8851 0042 1B88     		ldrh	r3, [r3]	@ movhi
 8852 0044 9BB2     		uxth	r3, r3
 8853 0046 40F66612 		movw	r2, #2406
 8854 004a 9342     		cmp	r3, r2
 8855 004c 7DD1     		bne	.L441
 8856              	.LBB17:
2307:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 8857              		.loc 1 2307 0
 8858 004e 454B     		ldr	r3, .L445+4
 8859 0050 1B68     		ldr	r3, [r3]
 8860 0052 C3F31303 		ubfx	r3, r3, #0, #20
 8861 0056 40F63542 		movw	r2, #3125
 8862 005a 02FB03F2 		mul	r2, r2, r3
 8863 005e 424B     		ldr	r3, .L445+8
 8864 0060 1B68     		ldr	r3, [r3]
 8865 0062 1344     		add	r3, r3, r2
 8866 0064 FB60     		str	r3, [r7, #12]
2308:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
ARM GAS  /tmp/ccxwuSCA.s 			page 196


 8867              		.loc 1 2308 0
 8868 0066 414B     		ldr	r3, .L445+12
 8869 0068 1B68     		ldr	r3, [r3]
 8870 006a FA68     		ldr	r2, [r7, #12]
 8871 006c 9A42     		cmp	r2, r3
 8872 006e 05D2     		bcs	.L442
2309:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 8873              		.loc 1 2309 0
 8874 0070 FB68     		ldr	r3, [r7, #12]
 8875 0072 03F14343 		add	r3, r3, #-1023410176
 8876 0076 03F5A003 		add	r3, r3, #5242880
 8877 007a FB60     		str	r3, [r7, #12]
 8878              	.L442:
2310:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2311:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 8879              		.loc 1 2311 0
 8880 007c 3B4B     		ldr	r3, .L445+12
 8881 007e 1B68     		ldr	r3, [r3]
 8882 0080 FA68     		ldr	r2, [r7, #12]
 8883 0082 D21A     		subs	r2, r2, r3
 8884 0084 3C4B     		ldr	r3, .L445+24
 8885 0086 DB8B     		ldrh	r3, [r3, #30]
 8886 0088 1946     		mov	r1, r3
 8887 008a 43F2D403 		movw	r3, #12500
 8888 008e 03FB01F3 		mul	r3, r3, r1
 8889 0092 D90F     		lsrs	r1, r3, #31
 8890 0094 0B44     		add	r3, r3, r1
 8891 0096 5B10     		asrs	r3, r3, #1
 8892 0098 1344     		add	r3, r3, r2
 8893 009a 374A     		ldr	r2, .L445+24
 8894 009c D28B     		ldrh	r2, [r2, #30]
 8895 009e 1146     		mov	r1, r2
 8896 00a0 43F2D402 		movw	r2, #12500
 8897 00a4 02FB01F2 		mul	r2, r2, r1
 8898 00a8 B3FBF2F3 		udiv	r3, r3, r2
 8899 00ac BB60     		str	r3, [r7, #8]
2312:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2313:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 8900              		.loc 1 2313 0
 8901 00ae BB68     		ldr	r3, [r7, #8]
 8902 00b0 242B     		cmp	r3, #36
 8903 00b2 42D8     		bhi	.L443
2314:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2315:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 8904              		.loc 1 2315 0
 8905 00b4 314A     		ldr	r2, .L445+28
 8906 00b6 BB68     		ldr	r3, [r7, #8]
 8907 00b8 1344     		add	r3, r3, r2
 8908 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8909 00bc 2E4B     		ldr	r3, .L445+24
 8910 00be 9A75     		strb	r2, [r3, #22]
2316:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 8911              		.loc 1 2316 0
 8912 00c0 2D4B     		ldr	r3, .L445+24
 8913 00c2 DB8B     		ldrh	r3, [r3, #30]
 8914 00c4 5B08     		lsrs	r3, r3, #1
 8915 00c6 9AB2     		uxth	r2, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 197


 8916 00c8 2B4B     		ldr	r3, .L445+24
 8917 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2317:bluetooth_rxtx.c **** 			le.conn_count = 0;
 8918              		.loc 1 2317 0
 8919 00cc 2A4B     		ldr	r3, .L445+24
 8920 00ce 0022     		movs	r2, #0
 8921 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2318:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 8922              		.loc 1 2318 0
 8923 00d2 294B     		ldr	r3, .L445+24
 8924 00d4 0022     		movs	r2, #0
 8925 00d6 9A61     		str	r2, [r3, #24]
2319:bluetooth_rxtx.c **** 			do_hop = 0;
 8926              		.loc 1 2319 0
 8927 00d8 264B     		ldr	r3, .L445+20
 8928 00da 0022     		movs	r2, #0
 8929 00dc 1A70     		strb	r2, [r3]
2320:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2321:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 8930              		.loc 1 2321 0
 8931 00de 264B     		ldr	r3, .L445+24
 8932 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 8933 00e2 5A1C     		adds	r2, r3, #1
 8934 00e4 264B     		ldr	r3, .L445+32
 8935 00e6 82FB0301 		smull	r0, r1, r2, r3
 8936 00ea 5318     		adds	r3, r2, r1
 8937 00ec 5911     		asrs	r1, r3, #5
 8938 00ee D317     		asrs	r3, r2, #31
 8939 00f0 C91A     		subs	r1, r1, r3
 8940 00f2 0B46     		mov	r3, r1
 8941 00f4 DB00     		lsls	r3, r3, #3
 8942 00f6 0B44     		add	r3, r3, r1
 8943 00f8 9B00     		lsls	r3, r3, #2
 8944 00fa 0B44     		add	r3, r3, r1
 8945 00fc D11A     		subs	r1, r2, r3
 8946 00fe CAB2     		uxtb	r2, r1
 8947 0100 1D4B     		ldr	r3, .L445+24
 8948 0102 5A75     		strb	r2, [r3, #21]
2322:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 8949              		.loc 1 2322 0
 8950 0104 1C4B     		ldr	r3, .L445+24
 8951 0106 0322     		movs	r2, #3
 8952 0108 1A75     		strb	r2, [r3, #20]
2323:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 8953              		.loc 1 2323 0
 8954 010a 1B4B     		ldr	r3, .L445+24
 8955 010c 0022     		movs	r2, #0
 8956 010e 1A61     		str	r2, [r3, #16]
2324:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 8957              		.loc 1 2324 0
 8958 0110 1C4B     		ldr	r3, .L445+36
 8959 0112 0322     		movs	r2, #3
 8960 0114 1A70     		strb	r2, [r3]
2325:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 8961              		.loc 1 2325 0
 8962 0116 1C4B     		ldr	r3, .L445+40
 8963 0118 1C4A     		ldr	r2, .L445+44
ARM GAS  /tmp/ccxwuSCA.s 			page 198


 8964 011a 1A60     		str	r2, [r3]
2326:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 8965              		.loc 1 2326 0
 8966 011c 0320     		movs	r0, #3
 8967 011e 1C49     		ldr	r1, .L445+48
 8968 0120 0122     		movs	r2, #1
 8969 0122 FFF7FEFF 		bl	le_promisc_state
2327:bluetooth_rxtx.c **** 
2328:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 8970              		.loc 1 2328 0
 8971 0126 1B4B     		ldr	r3, .L445+52
 8972 0128 1B78     		ldrb	r3, [r3]
 8973 012a DBB2     		uxtb	r3, r3
 8974 012c 002B     		cmp	r3, #0
 8975 012e 03D0     		beq	.L444
2329:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 8976              		.loc 1 2329 0
 8977 0130 194B     		ldr	r3, .L445+56
 8978 0132 2822     		movs	r2, #40
 8979 0134 1A60     		str	r2, [r3]
2330:bluetooth_rxtx.c **** 
2331:bluetooth_rxtx.c **** 			return;
 8980              		.loc 1 2331 0
 8981 0136 0FE0     		b	.L438
 8982              	.L444:
 8983 0138 0EE0     		b	.L438
 8984              	.L443:
2332:bluetooth_rxtx.c **** 		}
2333:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8985              		.loc 1 2333 0
 8986 013a 0D4B     		ldr	r3, .L445+16
 8987 013c 40F66412 		movw	r2, #2404
 8988 0140 1A80     		strh	r2, [r3]	@ movhi
2334:bluetooth_rxtx.c **** 		do_hop = 1;
 8989              		.loc 1 2334 0
 8990 0142 0C4B     		ldr	r3, .L445+20
 8991 0144 0122     		movs	r2, #1
 8992 0146 1A70     		strb	r2, [r3]
 8993              	.LBE17:
 8994 0148 06E0     		b	.L438
 8995              	.L441:
2335:bluetooth_rxtx.c **** 	}
2336:bluetooth_rxtx.c **** 	else {
2337:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8996              		.loc 1 2337 0
 8997 014a 094B     		ldr	r3, .L445+16
 8998 014c 40F66412 		movw	r2, #2404
 8999 0150 1A80     		strh	r2, [r3]	@ movhi
2338:bluetooth_rxtx.c **** 		do_hop = 1;
 9000              		.loc 1 2338 0
 9001 0152 084B     		ldr	r3, .L445+20
 9002 0154 0122     		movs	r2, #1
 9003 0156 1A70     		strb	r2, [r3]
 9004              	.L438:
2339:bluetooth_rxtx.c **** 	}
2340:bluetooth_rxtx.c **** }
 9005              		.loc 1 2340 0
ARM GAS  /tmp/ccxwuSCA.s 			page 199


 9006 0158 1037     		adds	r7, r7, #16
 9007              		.cfi_def_cfa_offset 8
 9008 015a BD46     		mov	sp, r7
 9009              		.cfi_def_cfa_register 13
 9010              		@ sp needed
 9011 015c 80BD     		pop	{r7, pc}
 9012              	.L446:
 9013 015e 00BF     		.align	2
 9014              	.L445:
 9015 0160 00000000 		.word	channel
 9016 0164 00000000 		.word	clkn
 9017 0168 08400040 		.word	1073758216
 9018 016c D8000000 		.word	first_ts.4821
 9019 0170 00000000 		.word	hop_direct_channel
 9020 0174 00000000 		.word	do_hop
 9021 0178 00000000 		.word	le
 9022 017c E8000000 		.word	hop_interval_lut
 9023 0180 A7C867DD 		.word	-580400985
 9024 0184 00000000 		.word	hop_mode
 9025 0188 00000000 		.word	packet_cb
 9026 018c 00000000 		.word	connection_follow_cb
 9027 0190 16000000 		.word	le+22
 9028 0194 00000000 		.word	jam_mode
 9029 0198 00000000 		.word	le_jam_count
 9030              		.cfi_endproc
 9031              	.LFE38:
 9033              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 9034              		.align	2
 9035              		.global	promisc_recover_hop_interval
 9036              		.thumb
 9037              		.thumb_func
 9039              	promisc_recover_hop_interval:
 9040              	.LFB39:
2341:bluetooth_rxtx.c **** 
2342:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 9041              		.loc 1 2342 0
 9042              		.cfi_startproc
 9043              		@ args = 0, pretend = 0, frame = 24
 9044              		@ frame_needed = 1, uses_anonymous_args = 0
 9045 0000 80B5     		push	{r7, lr}
 9046              		.cfi_def_cfa_offset 8
 9047              		.cfi_offset 7, -8
 9048              		.cfi_offset 14, -4
 9049 0002 86B0     		sub	sp, sp, #24
 9050              		.cfi_def_cfa_offset 32
 9051 0004 00AF     		add	r7, sp, #0
 9052              		.cfi_def_cfa_register 7
 9053 0006 7860     		str	r0, [r7, #4]
2343:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2344:bluetooth_rxtx.c **** 
2345:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 9054              		.loc 1 2345 0
 9055 0008 334B     		ldr	r3, .L455
 9056 000a 1B68     		ldr	r3, [r3]
 9057 000c C3F31303 		ubfx	r3, r3, #0, #20
 9058 0010 40F63542 		movw	r2, #3125
 9059 0014 02FB03F2 		mul	r2, r2, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 200


 9060 0018 304B     		ldr	r3, .L455+4
 9061 001a 1B68     		ldr	r3, [r3]
 9062 001c 1344     		add	r3, r3, r2
 9063 001e 7B61     		str	r3, [r7, #20]
2346:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 9064              		.loc 1 2346 0
 9065 0020 2F4B     		ldr	r3, .L455+8
 9066 0022 1B68     		ldr	r3, [r3]
 9067 0024 7A69     		ldr	r2, [r7, #20]
 9068 0026 9A42     		cmp	r2, r3
 9069 0028 03D2     		bcs	.L448
2347:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 9070              		.loc 1 2347 0
 9071 002a 7A69     		ldr	r2, [r7, #20]
 9072 002c 2D4B     		ldr	r3, .L455+12
 9073 002e 1344     		add	r3, r3, r2
 9074 0030 7B61     		str	r3, [r7, #20]
 9075              	.L448:
2348:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 9076              		.loc 1 2348 0
 9077 0032 2B4B     		ldr	r3, .L455+8
 9078 0034 1B68     		ldr	r3, [r3]
 9079 0036 7A69     		ldr	r2, [r7, #20]
 9080 0038 D31A     		subs	r3, r2, r3
 9081 003a 3B61     		str	r3, [r7, #16]
2349:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2350:bluetooth_rxtx.c **** 
2351:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2352:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 9082              		.loc 1 2352 0
 9083 003c 3B69     		ldr	r3, [r7, #16]
 9084 003e 46F2A712 		movw	r2, #24999
 9085 0042 9342     		cmp	r3, r2
 9086 0044 00D8     		bhi	.L449
2353:bluetooth_rxtx.c **** 		return;
 9087              		.loc 1 2353 0
 9088 0046 43E0     		b	.L447
 9089              	.L449:
2354:bluetooth_rxtx.c **** 
2355:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 9090              		.loc 1 2355 0
 9091 0048 274B     		ldr	r3, .L455+16
 9092 004a D3F80021 		ldr	r2, [r3, #256]
 9093 004e 3B69     		ldr	r3, [r7, #16]
 9094 0050 9A42     		cmp	r2, r3
 9095 0052 03D9     		bls	.L451
2356:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 9096              		.loc 1 2356 0
 9097 0054 244A     		ldr	r2, .L455+16
 9098 0056 3B69     		ldr	r3, [r7, #16]
 9099 0058 C2F80031 		str	r3, [r2, #256]
 9100              	.L451:
2357:bluetooth_rxtx.c **** 
2358:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 9101              		.loc 1 2358 0
 9102 005c 224B     		ldr	r3, .L455+16
 9103 005e D3F80031 		ldr	r3, [r3, #256]
ARM GAS  /tmp/ccxwuSCA.s 			page 201


 9104 0062 03F56133 		add	r3, r3, #230400
 9105 0066 03F25233 		addw	r3, r3, #850
 9106 006a 204A     		ldr	r2, .L455+20
 9107 006c A2FB0323 		umull	r2, r3, r2, r3
 9108 0070 9B0C     		lsrs	r3, r3, #18
 9109 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2359:bluetooth_rxtx.c **** 
2360:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 9110              		.loc 1 2360 0
 9111 0074 1E4B     		ldr	r3, .L455+24
 9112 0076 DB8B     		ldrh	r3, [r3, #30]
 9113 0078 FA89     		ldrh	r2, [r7, #14]
 9114 007a 9A42     		cmp	r2, r3
 9115 007c 1ED1     		bne	.L452
2361:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2362:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 9116              		.loc 1 2362 0
 9117 007e 1A4B     		ldr	r3, .L455+16
 9118 0080 D3F80431 		ldr	r3, [r3, #260]
 9119 0084 0133     		adds	r3, r3, #1
 9120 0086 184A     		ldr	r2, .L455+16
 9121 0088 C2F80431 		str	r3, [r2, #260]
2363:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 9122              		.loc 1 2363 0
 9123 008c 164B     		ldr	r3, .L455+16
 9124 008e D3F80431 		ldr	r3, [r3, #260]
 9125 0092 052B     		cmp	r3, #5
 9126 0094 19D1     		bne	.L454
2364:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 9127              		.loc 1 2364 0
 9128 0096 174B     		ldr	r3, .L455+28
 9129 0098 174A     		ldr	r2, .L455+32
 9130 009a 1A60     		str	r2, [r3]
2365:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 9131              		.loc 1 2365 0
 9132 009c 174B     		ldr	r3, .L455+36
 9133 009e 40F66412 		movw	r2, #2404
 9134 00a2 1A80     		strh	r2, [r3]	@ movhi
2366:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 9135              		.loc 1 2366 0
 9136 00a4 164B     		ldr	r3, .L455+40
 9137 00a6 0422     		movs	r2, #4
 9138 00a8 1A70     		strb	r2, [r3]
2367:bluetooth_rxtx.c **** 			do_hop = 1;
 9139              		.loc 1 2367 0
 9140 00aa 164B     		ldr	r3, .L455+44
 9141 00ac 0122     		movs	r2, #1
 9142 00ae 1A70     		strb	r2, [r3]
2368:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 9143              		.loc 1 2368 0
 9144 00b0 0220     		movs	r0, #2
 9145 00b2 1549     		ldr	r1, .L455+48
 9146 00b4 0222     		movs	r2, #2
 9147 00b6 FFF7FEFF 		bl	le_promisc_state
 9148 00ba 06E0     		b	.L454
 9149              	.L452:
2369:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccxwuSCA.s 			page 202


2370:bluetooth_rxtx.c **** 	} else {
2371:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 9150              		.loc 1 2371 0
 9151 00bc 0C4A     		ldr	r2, .L455+24
 9152 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 9153 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2372:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 9154              		.loc 1 2372 0
 9155 00c2 094B     		ldr	r3, .L455+16
 9156 00c4 0022     		movs	r2, #0
 9157 00c6 C3F80421 		str	r2, [r3, #260]
 9158              	.L454:
2373:bluetooth_rxtx.c **** 	}
2374:bluetooth_rxtx.c **** 
2375:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 9159              		.loc 1 2375 0
 9160 00ca 054A     		ldr	r2, .L455+8
 9161 00cc 7B69     		ldr	r3, [r7, #20]
 9162 00ce 1360     		str	r3, [r2]
 9163              	.L447:
2376:bluetooth_rxtx.c **** }
 9164              		.loc 1 2376 0
 9165 00d0 1837     		adds	r7, r7, #24
 9166              		.cfi_def_cfa_offset 8
 9167 00d2 BD46     		mov	sp, r7
 9168              		.cfi_def_cfa_register 13
 9169              		@ sp needed
 9170 00d4 80BD     		pop	{r7, pc}
 9171              	.L456:
 9172 00d6 00BF     		.align	2
 9173              	.L455:
 9174 00d8 00000000 		.word	clkn
 9175 00dc 08400040 		.word	1073758216
 9176 00e0 DC000000 		.word	prev_clk.4827
 9177 00e4 C0ABC6C2 		.word	-1027167296
 9178 00e8 00000000 		.word	le_promisc
 9179 00ec C1A91991 		.word	-1860589119
 9180 00f0 00000000 		.word	le
 9181 00f4 00000000 		.word	packet_cb
 9182 00f8 00000000 		.word	promisc_recover_hop_increment
 9183 00fc 00000000 		.word	hop_direct_channel
 9184 0100 00000000 		.word	hop_mode
 9185 0104 00000000 		.word	do_hop
 9186 0108 1E000000 		.word	le+30
 9187              		.cfi_endproc
 9188              	.LFE39:
 9190              		.section	.text.promisc_follow_cb,"ax",%progbits
 9191              		.align	2
 9192              		.global	promisc_follow_cb
 9193              		.thumb
 9194              		.thumb_func
 9196              	promisc_follow_cb:
 9197              	.LFB40:
2377:bluetooth_rxtx.c **** 
2378:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 9198              		.loc 1 2378 0
 9199              		.cfi_startproc
ARM GAS  /tmp/ccxwuSCA.s 			page 203


 9200              		@ args = 0, pretend = 0, frame = 16
 9201              		@ frame_needed = 1, uses_anonymous_args = 0
 9202 0000 80B5     		push	{r7, lr}
 9203              		.cfi_def_cfa_offset 8
 9204              		.cfi_offset 7, -8
 9205              		.cfi_offset 14, -4
 9206 0002 84B0     		sub	sp, sp, #16
 9207              		.cfi_def_cfa_offset 24
 9208 0004 00AF     		add	r7, sp, #0
 9209              		.cfi_def_cfa_register 7
 9210 0006 7860     		str	r0, [r7, #4]
2379:bluetooth_rxtx.c **** 	int i;
2380:bluetooth_rxtx.c **** 
2381:bluetooth_rxtx.c **** 	// get the CRCInit
2382:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 9211              		.loc 1 2382 0
 9212 0008 284B     		ldr	r3, .L461
 9213 000a 1B69     		ldr	r3, [r3, #16]
 9214 000c 002B     		cmp	r3, #0
 9215 000e 49D1     		bne	.L457
 9216              		.loc 1 2382 0 is_stmt 0 discriminator 1
 9217 0010 7B68     		ldr	r3, [r7, #4]
 9218 0012 0433     		adds	r3, r3, #4
 9219 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9220 0016 012B     		cmp	r3, #1
 9221 0018 44D1     		bne	.L457
 9222              		.loc 1 2382 0 discriminator 2
 9223 001a 7B68     		ldr	r3, [r7, #4]
 9224 001c 0533     		adds	r3, r3, #5
 9225 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9226 0020 002B     		cmp	r3, #0
 9227 0022 3FD1     		bne	.L457
 9228              	.LBB18:
2383:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 9229              		.loc 1 2383 0 is_stmt 1
 9230 0024 7B68     		ldr	r3, [r7, #4]
 9231 0026 0833     		adds	r3, r3, #8
 9232 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9233 002a 1A04     		lsls	r2, r3, #16
 9234 002c 7B68     		ldr	r3, [r7, #4]
 9235 002e 0733     		adds	r3, r3, #7
 9236 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9237 0032 1B02     		lsls	r3, r3, #8
 9238 0034 1343     		orrs	r3, r3, r2
 9239 0036 7A68     		ldr	r2, [r7, #4]
 9240 0038 0632     		adds	r2, r2, #6
 9241 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9242 003c 1343     		orrs	r3, r3, r2
 9243 003e BB60     		str	r3, [r7, #8]
2384:bluetooth_rxtx.c **** 
2385:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 9244              		.loc 1 2385 0
 9245 0040 7B68     		ldr	r3, [r7, #4]
 9246 0042 0433     		adds	r3, r3, #4
 9247 0044 B868     		ldr	r0, [r7, #8]
 9248 0046 1946     		mov	r1, r3
 9249 0048 0222     		movs	r2, #2
ARM GAS  /tmp/ccxwuSCA.s 			page 204


 9250 004a FFF7FEFF 		bl	btle_reverse_crc
 9251 004e 0246     		mov	r2, r0
 9252 0050 164B     		ldr	r3, .L461
 9253 0052 9A60     		str	r2, [r3, #8]
2386:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 9254              		.loc 1 2386 0
 9255 0054 154B     		ldr	r3, .L461
 9256 0056 0022     		movs	r2, #0
 9257 0058 DA60     		str	r2, [r3, #12]
2387:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9258              		.loc 1 2387 0
 9259 005a 0023     		movs	r3, #0
 9260 005c FB60     		str	r3, [r7, #12]
 9261 005e 13E0     		b	.L459
 9262              	.L460:
2388:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 9263              		.loc 1 2388 0 discriminator 3
 9264 0060 124B     		ldr	r3, .L461
 9265 0062 DA68     		ldr	r2, [r3, #12]
 9266 0064 114B     		ldr	r3, .L461
 9267 0066 9968     		ldr	r1, [r3, #8]
 9268 0068 FB68     		ldr	r3, [r7, #12]
 9269 006a 21FA03F3 		lsr	r3, r1, r3
 9270 006e 03F00101 		and	r1, r3, #1
 9271 0072 FB68     		ldr	r3, [r7, #12]
 9272 0074 C3F11703 		rsb	r3, r3, #23
 9273 0078 01FA03F3 		lsl	r3, r1, r3
 9274 007c 1343     		orrs	r3, r3, r2
 9275 007e 0B4A     		ldr	r2, .L461
 9276 0080 D360     		str	r3, [r2, #12]
2387:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9277              		.loc 1 2387 0 discriminator 3
 9278 0082 FB68     		ldr	r3, [r7, #12]
 9279 0084 0133     		adds	r3, r3, #1
 9280 0086 FB60     		str	r3, [r7, #12]
 9281              	.L459:
2387:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9282              		.loc 1 2387 0 is_stmt 0 discriminator 1
 9283 0088 FB68     		ldr	r3, [r7, #12]
 9284 008a 172B     		cmp	r3, #23
 9285 008c E8DD     		ble	.L460
2389:bluetooth_rxtx.c **** 
2390:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 9286              		.loc 1 2390 0 is_stmt 1
 9287 008e 074B     		ldr	r3, .L461
 9288 0090 0122     		movs	r2, #1
 9289 0092 1A61     		str	r2, [r3, #16]
2391:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 9290              		.loc 1 2391 0
 9291 0094 064B     		ldr	r3, .L461+4
 9292 0096 074A     		ldr	r2, .L461+8
 9293 0098 1A60     		str	r2, [r3]
2392:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 9294              		.loc 1 2392 0
 9295 009a 0120     		movs	r0, #1
 9296 009c 0649     		ldr	r1, .L461+12
 9297 009e 0322     		movs	r2, #3
ARM GAS  /tmp/ccxwuSCA.s 			page 205


 9298 00a0 FFF7FEFF 		bl	le_promisc_state
 9299              	.L457:
 9300              	.LBE18:
2393:bluetooth_rxtx.c **** 	}
2394:bluetooth_rxtx.c **** }
 9301              		.loc 1 2394 0
 9302 00a4 1037     		adds	r7, r7, #16
 9303              		.cfi_def_cfa_offset 8
 9304 00a6 BD46     		mov	sp, r7
 9305              		.cfi_def_cfa_register 13
 9306              		@ sp needed
 9307 00a8 80BD     		pop	{r7, pc}
 9308              	.L462:
 9309 00aa 00BF     		.align	2
 9310              	.L461:
 9311 00ac 00000000 		.word	le
 9312 00b0 00000000 		.word	packet_cb
 9313 00b4 00000000 		.word	promisc_recover_hop_interval
 9314 00b8 08000000 		.word	le+8
 9315              		.cfi_endproc
 9316              	.LFE40:
 9318              		.section	.text.see_aa,"ax",%progbits
 9319              		.align	2
 9320              		.global	see_aa
 9321              		.thumb
 9322              		.thumb_func
 9324              	see_aa:
 9325              	.LFB41:
2395:bluetooth_rxtx.c **** 
2396:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2397:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 9326              		.loc 1 2397 0
 9327              		.cfi_startproc
 9328              		@ args = 0, pretend = 0, frame = 24
 9329              		@ frame_needed = 1, uses_anonymous_args = 0
 9330              		@ link register save eliminated.
 9331 0000 80B4     		push	{r7}
 9332              		.cfi_def_cfa_offset 4
 9333              		.cfi_offset 7, -4
 9334 0002 87B0     		sub	sp, sp, #28
 9335              		.cfi_def_cfa_offset 32
 9336 0004 00AF     		add	r7, sp, #0
 9337              		.cfi_def_cfa_register 7
 9338 0006 7860     		str	r0, [r7, #4]
2398:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 9339              		.loc 1 2398 0
 9340 0008 4FF0FF33 		mov	r3, #-1
 9341 000c 3B61     		str	r3, [r7, #16]
 9342 000e 4FF0FF33 		mov	r3, #-1
 9343 0012 FB60     		str	r3, [r7, #12]
2399:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9344              		.loc 1 2399 0
 9345 0014 0023     		movs	r3, #0
 9346 0016 7B61     		str	r3, [r7, #20]
 9347 0018 15E0     		b	.L464
 9348              	.L467:
2400:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
ARM GAS  /tmp/ccxwuSCA.s 			page 206


 9349              		.loc 1 2400 0
 9350 001a 224A     		ldr	r2, .L472
 9351 001c 7B69     		ldr	r3, [r7, #20]
 9352 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 9353 0022 7B68     		ldr	r3, [r7, #4]
 9354 0024 9A42     		cmp	r2, r3
 9355 0026 0BD1     		bne	.L465
2401:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 9356              		.loc 1 2401 0
 9357 0028 1E4A     		ldr	r2, .L472
 9358 002a 7B69     		ldr	r3, [r7, #20]
 9359 002c DB00     		lsls	r3, r3, #3
 9360 002e 1344     		add	r3, r3, r2
 9361 0030 5B68     		ldr	r3, [r3, #4]
 9362 0032 5A1C     		adds	r2, r3, #1
 9363 0034 1B49     		ldr	r1, .L472
 9364 0036 7B69     		ldr	r3, [r7, #20]
 9365 0038 DB00     		lsls	r3, r3, #3
 9366 003a 0B44     		add	r3, r3, r1
 9367 003c 5A60     		str	r2, [r3, #4]
2402:bluetooth_rxtx.c **** 			return;
 9368              		.loc 1 2402 0
 9369 003e 2CE0     		b	.L463
 9370              	.L465:
2399:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9371              		.loc 1 2399 0 discriminator 2
 9372 0040 7B69     		ldr	r3, [r7, #20]
 9373 0042 0133     		adds	r3, r3, #1
 9374 0044 7B61     		str	r3, [r7, #20]
 9375              	.L464:
2399:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9376              		.loc 1 2399 0 is_stmt 0 discriminator 1
 9377 0046 7B69     		ldr	r3, [r7, #20]
 9378 0048 1F2B     		cmp	r3, #31
 9379 004a E6DD     		ble	.L467
2403:bluetooth_rxtx.c **** 		}
2404:bluetooth_rxtx.c **** 
2405:bluetooth_rxtx.c **** 	// evict someone
2406:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9380              		.loc 1 2406 0 is_stmt 1
 9381 004c 0023     		movs	r3, #0
 9382 004e 7B61     		str	r3, [r7, #20]
 9383 0050 15E0     		b	.L468
 9384              	.L471:
2407:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9385              		.loc 1 2407 0
 9386 0052 144A     		ldr	r2, .L472
 9387 0054 7B69     		ldr	r3, [r7, #20]
 9388 0056 DB00     		lsls	r3, r3, #3
 9389 0058 1344     		add	r3, r3, r2
 9390 005a 5A68     		ldr	r2, [r3, #4]
 9391 005c 3B69     		ldr	r3, [r7, #16]
 9392 005e 9A42     		cmp	r2, r3
 9393 0060 02DB     		blt	.L469
 9394              		.loc 1 2407 0 is_stmt 0 discriminator 1
 9395 0062 3B69     		ldr	r3, [r7, #16]
 9396 0064 002B     		cmp	r3, #0
ARM GAS  /tmp/ccxwuSCA.s 			page 207


 9397 0066 07DA     		bge	.L470
 9398              	.L469:
2408:bluetooth_rxtx.c **** 			killme = i;
 9399              		.loc 1 2408 0 is_stmt 1
 9400 0068 7B69     		ldr	r3, [r7, #20]
 9401 006a FB60     		str	r3, [r7, #12]
2409:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 9402              		.loc 1 2409 0
 9403 006c 0D4A     		ldr	r2, .L472
 9404 006e 7B69     		ldr	r3, [r7, #20]
 9405 0070 DB00     		lsls	r3, r3, #3
 9406 0072 1344     		add	r3, r3, r2
 9407 0074 5B68     		ldr	r3, [r3, #4]
 9408 0076 3B61     		str	r3, [r7, #16]
 9409              	.L470:
2406:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9410              		.loc 1 2406 0 discriminator 2
 9411 0078 7B69     		ldr	r3, [r7, #20]
 9412 007a 0133     		adds	r3, r3, #1
 9413 007c 7B61     		str	r3, [r7, #20]
 9414              	.L468:
2406:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9415              		.loc 1 2406 0 is_stmt 0 discriminator 1
 9416 007e 7B69     		ldr	r3, [r7, #20]
 9417 0080 1F2B     		cmp	r3, #31
 9418 0082 E6DD     		ble	.L471
2410:bluetooth_rxtx.c **** 		}
2411:bluetooth_rxtx.c **** 
2412:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 9419              		.loc 1 2412 0 is_stmt 1
 9420 0084 0749     		ldr	r1, .L472
 9421 0086 FB68     		ldr	r3, [r7, #12]
 9422 0088 7A68     		ldr	r2, [r7, #4]
 9423 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2413:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 9424              		.loc 1 2413 0
 9425 008e 054A     		ldr	r2, .L472
 9426 0090 FB68     		ldr	r3, [r7, #12]
 9427 0092 DB00     		lsls	r3, r3, #3
 9428 0094 1344     		add	r3, r3, r2
 9429 0096 0122     		movs	r2, #1
 9430 0098 5A60     		str	r2, [r3, #4]
 9431              	.L463:
2414:bluetooth_rxtx.c **** }
 9432              		.loc 1 2414 0
 9433 009a 1C37     		adds	r7, r7, #28
 9434              		.cfi_def_cfa_offset 4
 9435 009c BD46     		mov	sp, r7
 9436              		.cfi_def_cfa_register 13
 9437              		@ sp needed
 9438 009e 5DF8047B 		ldr	r7, [sp], #4
 9439              		.cfi_restore 7
 9440              		.cfi_def_cfa_offset 0
 9441 00a2 7047     		bx	lr
 9442              	.L473:
 9443              		.align	2
 9444              	.L472:
ARM GAS  /tmp/ccxwuSCA.s 			page 208


 9445 00a4 00000000 		.word	le_promisc
 9446              		.cfi_endproc
 9447              	.LFE41:
 9449              		.section	.rodata
 9450 08df 00       		.align	2
 9451              	.LC0:
 9452 08e0 01000000 		.word	1
 9453 08e4 01000000 		.word	1
 9454 08e8 01000000 		.word	1
 9455 08ec 01000000 		.word	1
 9456              		.section	.text.cb_le_promisc,"ax",%progbits
 9457              		.align	2
 9458              		.global	cb_le_promisc
 9459              		.thumb
 9460              		.thumb_func
 9462              	cb_le_promisc:
 9463              	.LFB42:
2415:bluetooth_rxtx.c **** 
2416:bluetooth_rxtx.c **** /* le promiscuous mode */
2417:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 9464              		.loc 1 2417 0
 9465              		.cfi_startproc
 9466              		@ args = 0, pretend = 0, frame = 128
 9467              		@ frame_needed = 1, uses_anonymous_args = 0
 9468 0000 90B5     		push	{r4, r7, lr}
 9469              		.cfi_def_cfa_offset 12
 9470              		.cfi_offset 4, -12
 9471              		.cfi_offset 7, -8
 9472              		.cfi_offset 14, -4
 9473 0002 A1B0     		sub	sp, sp, #132
 9474              		.cfi_def_cfa_offset 144
 9475 0004 00AF     		add	r7, sp, #0
 9476              		.cfi_def_cfa_register 7
 9477 0006 7860     		str	r0, [r7, #4]
2418:bluetooth_rxtx.c **** 	int i, j, k;
2419:bluetooth_rxtx.c **** 	int idx;
2420:bluetooth_rxtx.c **** 
2421:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2422:bluetooth_rxtx.c **** 	char desired[4][16] = {
 9478              		.loc 1 2422 0
 9479 0008 07F11C03 		add	r3, r7, #28
 9480 000c 4022     		movs	r2, #64
 9481 000e 1846     		mov	r0, r3
 9482 0010 0021     		movs	r1, #0
 9483 0012 FFF7FEFF 		bl	memset
 9484 0016 0123     		movs	r3, #1
 9485 0018 3B77     		strb	r3, [r7, #28]
 9486 001a 0123     		movs	r3, #1
 9487 001c 87F82C30 		strb	r3, [r7, #44]
 9488 0020 0123     		movs	r3, #1
 9489 0022 87F82F30 		strb	r3, [r7, #47]
 9490 0026 0123     		movs	r3, #1
 9491 0028 87F83C30 		strb	r3, [r7, #60]
 9492 002c 0123     		movs	r3, #1
 9493 002e 87F83E30 		strb	r3, [r7, #62]
 9494 0032 0123     		movs	r3, #1
 9495 0034 87F84C30 		strb	r3, [r7, #76]
ARM GAS  /tmp/ccxwuSCA.s 			page 209


 9496 0038 0123     		movs	r3, #1
 9497 003a 87F84E30 		strb	r3, [r7, #78]
 9498 003e 0123     		movs	r3, #1
 9499 0040 87F84F30 		strb	r3, [r7, #79]
2423:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2424:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2425:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2426:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2427:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2428:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2429:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2430:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2431:bluetooth_rxtx.c **** 	};
2432:bluetooth_rxtx.c **** 
2433:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 9500              		.loc 1 2433 0
 9501 0044 0023     		movs	r3, #0
 9502 0046 FB67     		str	r3, [r7, #124]
 9503 0048 41E0     		b	.L475
 9504              	.L478:
2434:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9505              		.loc 1 2434 0
 9506 004a A54B     		ldr	r3, .L505
 9507 004c 1B88     		ldrh	r3, [r3]	@ movhi
 9508 004e 9BB2     		uxth	r3, r3
 9509 0050 DBB2     		uxtb	r3, r3
 9510 0052 623B     		subs	r3, r3, #98
 9511 0054 DBB2     		uxtb	r3, r3
 9512 0056 1846     		mov	r0, r3
 9513 0058 FFF7FEFF 		bl	btle_channel_index
 9514 005c 0346     		mov	r3, r0
 9515 005e 1A46     		mov	r2, r3
 9516 0060 A04B     		ldr	r3, .L505+4
 9517 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9518 0064 3B67     		str	r3, [r7, #112]
2435:bluetooth_rxtx.c **** 
2436:bluetooth_rxtx.c **** 		// whiten the desired data
2437:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 9519              		.loc 1 2437 0
 9520 0066 0023     		movs	r3, #0
 9521 0068 BB67     		str	r3, [r7, #120]
 9522 006a 2AE0     		b	.L476
 9523              	.L477:
2438:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9524              		.loc 1 2438 0 discriminator 3
 9525 006c FB6F     		ldr	r3, [r7, #124]
 9526 006e 1B01     		lsls	r3, r3, #4
 9527 0070 07F18002 		add	r2, r7, #128
 9528 0074 1A44     		add	r2, r2, r3
 9529 0076 BB6F     		ldr	r3, [r7, #120]
 9530 0078 1344     		add	r3, r3, r2
 9531 007a 643B     		subs	r3, r3, #100
 9532 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9533 007e 9A49     		ldr	r1, .L505+8
 9534 0080 3B6F     		ldr	r3, [r7, #112]
 9535 0082 0B44     		add	r3, r3, r1
 9536 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccxwuSCA.s 			page 210


 9537 0086 5340     		eors	r3, r3, r2
 9538 0088 D9B2     		uxtb	r1, r3
 9539 008a FB6F     		ldr	r3, [r7, #124]
 9540 008c 1B01     		lsls	r3, r3, #4
 9541 008e 07F18002 		add	r2, r7, #128
 9542 0092 1A44     		add	r2, r2, r3
 9543 0094 BB6F     		ldr	r3, [r7, #120]
 9544 0096 1344     		add	r3, r3, r2
 9545 0098 643B     		subs	r3, r3, #100
 9546 009a 0A46     		mov	r2, r1
 9547 009c 1A70     		strb	r2, [r3]
2439:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 9548              		.loc 1 2439 0 discriminator 3
 9549 009e 3B6F     		ldr	r3, [r7, #112]
 9550 00a0 0133     		adds	r3, r3, #1
 9551 00a2 1946     		mov	r1, r3
 9552 00a4 914B     		ldr	r3, .L505+12
 9553 00a6 A1FB0323 		umull	r2, r3, r1, r3
 9554 00aa C81A     		subs	r0, r1, r3
 9555 00ac 4008     		lsrs	r0, r0, #1
 9556 00ae 0344     		add	r3, r3, r0
 9557 00b0 9A09     		lsrs	r2, r3, #6
 9558 00b2 1346     		mov	r3, r2
 9559 00b4 DB01     		lsls	r3, r3, #7
 9560 00b6 9B1A     		subs	r3, r3, r2
 9561 00b8 CA1A     		subs	r2, r1, r3
 9562 00ba 3A67     		str	r2, [r7, #112]
2437:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9563              		.loc 1 2437 0 discriminator 3
 9564 00bc BB6F     		ldr	r3, [r7, #120]
 9565 00be 0133     		adds	r3, r3, #1
 9566 00c0 BB67     		str	r3, [r7, #120]
 9567              	.L476:
2437:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9568              		.loc 1 2437 0 is_stmt 0 discriminator 1
 9569 00c2 BB6F     		ldr	r3, [r7, #120]
 9570 00c4 0F2B     		cmp	r3, #15
 9571 00c6 D1DD     		ble	.L477
2433:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9572              		.loc 1 2433 0 is_stmt 1 discriminator 2
 9573 00c8 FB6F     		ldr	r3, [r7, #124]
 9574 00ca 0133     		adds	r3, r3, #1
 9575 00cc FB67     		str	r3, [r7, #124]
 9576              	.L475:
2433:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9577              		.loc 1 2433 0 is_stmt 0 discriminator 1
 9578 00ce FB6F     		ldr	r3, [r7, #124]
 9579 00d0 032B     		cmp	r3, #3
 9580 00d2 BADD     		ble	.L478
2440:bluetooth_rxtx.c **** 		}
2441:bluetooth_rxtx.c **** 	}
2442:bluetooth_rxtx.c **** 
2443:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2444:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 9581              		.loc 1 2444 0 is_stmt 1
 9582 00d4 2023     		movs	r3, #32
 9583 00d6 FB67     		str	r3, [r7, #124]
ARM GAS  /tmp/ccxwuSCA.s 			page 211


 9584 00d8 D0E0     		b	.L479
 9585              	.L499:
 9586              	.LBB19:
2445:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9587              		.loc 1 2445 0
 9588 00da 854B     		ldr	r3, .L505+16
 9589 00dc 07F10C04 		add	r4, r7, #12
 9590 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 9591 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2446:bluetooth_rxtx.c **** 		int matching = -1;
 9592              		.loc 1 2446 0
 9593 00e6 4FF0FF33 		mov	r3, #-1
 9594 00ea FB66     		str	r3, [r7, #108]
2447:bluetooth_rxtx.c **** 
2448:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9595              		.loc 1 2448 0
 9596 00ec 0023     		movs	r3, #0
 9597 00ee BB67     		str	r3, [r7, #120]
 9598 00f0 26E0     		b	.L480
 9599              	.L485:
2449:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9600              		.loc 1 2449 0
 9601 00f2 0023     		movs	r3, #0
 9602 00f4 7B67     		str	r3, [r7, #116]
 9603 00f6 1DE0     		b	.L481
 9604              	.L484:
2450:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9605              		.loc 1 2450 0
 9606 00f8 FA6F     		ldr	r2, [r7, #124]
 9607 00fa 7B6F     		ldr	r3, [r7, #116]
 9608 00fc 1344     		add	r3, r3, r2
 9609 00fe 1A46     		mov	r2, r3
 9610 0100 7B68     		ldr	r3, [r7, #4]
 9611 0102 1344     		add	r3, r3, r2
 9612 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9613 0106 BB6F     		ldr	r3, [r7, #120]
 9614 0108 1B01     		lsls	r3, r3, #4
 9615 010a 07F18001 		add	r1, r7, #128
 9616 010e 1944     		add	r1, r1, r3
 9617 0110 7B6F     		ldr	r3, [r7, #116]
 9618 0112 0B44     		add	r3, r3, r1
 9619 0114 643B     		subs	r3, r3, #100
 9620 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9621 0118 9A42     		cmp	r2, r3
 9622 011a 08D0     		beq	.L482
2451:bluetooth_rxtx.c **** 					ok[j] = 0;
 9623              		.loc 1 2451 0
 9624 011c BB6F     		ldr	r3, [r7, #120]
 9625 011e 9B00     		lsls	r3, r3, #2
 9626 0120 07F18002 		add	r2, r7, #128
 9627 0124 1344     		add	r3, r3, r2
 9628 0126 0022     		movs	r2, #0
 9629 0128 43F8742C 		str	r2, [r3, #-116]
2452:bluetooth_rxtx.c **** 					break;
 9630              		.loc 1 2452 0
 9631 012c 05E0     		b	.L483
 9632              	.L482:
ARM GAS  /tmp/ccxwuSCA.s 			page 212


2449:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9633              		.loc 1 2449 0 discriminator 2
 9634 012e 7B6F     		ldr	r3, [r7, #116]
 9635 0130 0133     		adds	r3, r3, #1
 9636 0132 7B67     		str	r3, [r7, #116]
 9637              	.L481:
2449:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9638              		.loc 1 2449 0 is_stmt 0 discriminator 1
 9639 0134 7B6F     		ldr	r3, [r7, #116]
 9640 0136 0F2B     		cmp	r3, #15
 9641 0138 DEDD     		ble	.L484
 9642              	.L483:
2448:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9643              		.loc 1 2448 0 is_stmt 1 discriminator 2
 9644 013a BB6F     		ldr	r3, [r7, #120]
 9645 013c 0133     		adds	r3, r3, #1
 9646 013e BB67     		str	r3, [r7, #120]
 9647              	.L480:
2448:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9648              		.loc 1 2448 0 is_stmt 0 discriminator 1
 9649 0140 BB6F     		ldr	r3, [r7, #120]
 9650 0142 032B     		cmp	r3, #3
 9651 0144 D5DD     		ble	.L485
2453:bluetooth_rxtx.c **** 				}
2454:bluetooth_rxtx.c **** 			}
2455:bluetooth_rxtx.c **** 		}
2456:bluetooth_rxtx.c **** 
2457:bluetooth_rxtx.c **** 		// see if any match
2458:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9652              		.loc 1 2458 0 is_stmt 1
 9653 0146 0023     		movs	r3, #0
 9654 0148 BB67     		str	r3, [r7, #120]
 9655 014a 0EE0     		b	.L486
 9656              	.L489:
2459:bluetooth_rxtx.c **** 			if (ok[j]) {
 9657              		.loc 1 2459 0
 9658 014c BB6F     		ldr	r3, [r7, #120]
 9659 014e 9B00     		lsls	r3, r3, #2
 9660 0150 07F18002 		add	r2, r7, #128
 9661 0154 1344     		add	r3, r3, r2
 9662 0156 53F8743C 		ldr	r3, [r3, #-116]
 9663 015a 002B     		cmp	r3, #0
 9664 015c 02D0     		beq	.L487
2460:bluetooth_rxtx.c **** 				matching = j;
 9665              		.loc 1 2460 0
 9666 015e BB6F     		ldr	r3, [r7, #120]
 9667 0160 FB66     		str	r3, [r7, #108]
2461:bluetooth_rxtx.c **** 				break;
 9668              		.loc 1 2461 0
 9669 0162 05E0     		b	.L488
 9670              	.L487:
2458:bluetooth_rxtx.c **** 			if (ok[j]) {
 9671              		.loc 1 2458 0 discriminator 2
 9672 0164 BB6F     		ldr	r3, [r7, #120]
 9673 0166 0133     		adds	r3, r3, #1
 9674 0168 BB67     		str	r3, [r7, #120]
 9675              	.L486:
ARM GAS  /tmp/ccxwuSCA.s 			page 213


2458:bluetooth_rxtx.c **** 			if (ok[j]) {
 9676              		.loc 1 2458 0 is_stmt 0 discriminator 1
 9677 016a BB6F     		ldr	r3, [r7, #120]
 9678 016c 032B     		cmp	r3, #3
 9679 016e EDDD     		ble	.L489
 9680              	.L488:
2462:bluetooth_rxtx.c **** 			}
2463:bluetooth_rxtx.c **** 		}
2464:bluetooth_rxtx.c **** 
2465:bluetooth_rxtx.c **** 		// skip if no match
2466:bluetooth_rxtx.c **** 		if (matching < 0)
 9681              		.loc 1 2466 0 is_stmt 1
 9682 0170 FB6E     		ldr	r3, [r7, #108]
 9683 0172 002B     		cmp	r3, #0
 9684 0174 7FDB     		blt	.L491
2467:bluetooth_rxtx.c **** 			continue;
2468:bluetooth_rxtx.c **** 
2469:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2470:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9685              		.loc 1 2470 0
 9686 0176 5A4B     		ldr	r3, .L505
 9687 0178 1B88     		ldrh	r3, [r3]	@ movhi
 9688 017a 9BB2     		uxth	r3, r3
 9689 017c DBB2     		uxtb	r3, r3
 9690 017e 623B     		subs	r3, r3, #98
 9691 0180 DBB2     		uxtb	r3, r3
 9692 0182 1846     		mov	r0, r3
 9693 0184 FFF7FEFF 		bl	btle_channel_index
 9694 0188 0346     		mov	r3, r0
 9695 018a 1A46     		mov	r2, r3
 9696 018c 554B     		ldr	r3, .L505+4
 9697 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9698 0190 3B67     		str	r3, [r7, #112]
2471:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 9699              		.loc 1 2471 0
 9700 0192 0023     		movs	r3, #0
 9701 0194 BB67     		str	r3, [r7, #120]
 9702 0196 4CE0     		b	.L492
 9703              	.L498:
 9704              	.LBB20:
2472:bluetooth_rxtx.c **** 			u8 byte = 0;
 9705              		.loc 1 2472 0
 9706 0198 0023     		movs	r3, #0
 9707 019a 87F86B30 		strb	r3, [r7, #107]
2473:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 9708              		.loc 1 2473 0
 9709 019e 0023     		movs	r3, #0
 9710 01a0 7B67     		str	r3, [r7, #116]
 9711 01a2 39E0     		b	.L493
 9712              	.L497:
 9713              	.LBB21:
2474:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9714              		.loc 1 2474 0
 9715 01a4 BB6F     		ldr	r3, [r7, #120]
 9716 01a6 DA00     		lsls	r2, r3, #3
 9717 01a8 7B6F     		ldr	r3, [r7, #116]
 9718 01aa 1A44     		add	r2, r2, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 214


 9719 01ac FB6F     		ldr	r3, [r7, #124]
 9720 01ae 1344     		add	r3, r3, r2
 9721 01b0 203B     		subs	r3, r3, #32
 9722 01b2 3B66     		str	r3, [r7, #96]
2475:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 9723              		.loc 1 2475 0
 9724 01b4 3B6E     		ldr	r3, [r7, #96]
 9725 01b6 B3F5487F 		cmp	r3, #800
 9726 01ba 00DB     		blt	.L494
 9727 01bc 2FE0     		b	.L495
 9728              	.L494:
2476:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 9729              		.loc 1 2476 0
 9730 01be 3B6E     		ldr	r3, [r7, #96]
 9731 01c0 7A68     		ldr	r2, [r7, #4]
 9732 01c2 1344     		add	r3, r3, r2
 9733 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9734 01c6 7B66     		str	r3, [r7, #100]
2477:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 9735              		.loc 1 2477 0
 9736 01c8 BB6F     		ldr	r3, [r7, #120]
 9737 01ca 032B     		cmp	r3, #3
 9738 01cc 16DD     		ble	.L496
2478:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 9739              		.loc 1 2478 0
 9740 01ce 464A     		ldr	r2, .L505+8
 9741 01d0 3B6F     		ldr	r3, [r7, #112]
 9742 01d2 1344     		add	r3, r3, r2
 9743 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9744 01d6 1A46     		mov	r2, r3
 9745 01d8 7B6E     		ldr	r3, [r7, #100]
 9746 01da 5340     		eors	r3, r3, r2
 9747 01dc 7B66     		str	r3, [r7, #100]
2479:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 9748              		.loc 1 2479 0
 9749 01de 3B6F     		ldr	r3, [r7, #112]
 9750 01e0 0133     		adds	r3, r3, #1
 9751 01e2 1946     		mov	r1, r3
 9752 01e4 414B     		ldr	r3, .L505+12
 9753 01e6 A1FB0323 		umull	r2, r3, r1, r3
 9754 01ea C81A     		subs	r0, r1, r3
 9755 01ec 4008     		lsrs	r0, r0, #1
 9756 01ee 0344     		add	r3, r3, r0
 9757 01f0 9A09     		lsrs	r2, r3, #6
 9758 01f2 1346     		mov	r3, r2
 9759 01f4 DB01     		lsls	r3, r3, #7
 9760 01f6 9B1A     		subs	r3, r3, r2
 9761 01f8 CA1A     		subs	r2, r1, r3
 9762 01fa 3A67     		str	r2, [r7, #112]
 9763              	.L496:
2480:bluetooth_rxtx.c **** 				}
2481:bluetooth_rxtx.c **** 				byte |= bit << k;
 9764              		.loc 1 2481 0 discriminator 2
 9765 01fc 7A6E     		ldr	r2, [r7, #100]
 9766 01fe 7B6F     		ldr	r3, [r7, #116]
 9767 0200 02FA03F3 		lsl	r3, r2, r3
 9768 0204 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 215


 9769 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 9770 020a 1343     		orrs	r3, r3, r2
 9771 020c DBB2     		uxtb	r3, r3
 9772 020e 87F86B30 		strb	r3, [r7, #107]
 9773              	.LBE21:
2473:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9774              		.loc 1 2473 0 discriminator 2
 9775 0212 7B6F     		ldr	r3, [r7, #116]
 9776 0214 0133     		adds	r3, r3, #1
 9777 0216 7B67     		str	r3, [r7, #116]
 9778              	.L493:
2473:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9779              		.loc 1 2473 0 is_stmt 0 discriminator 1
 9780 0218 7B6F     		ldr	r3, [r7, #116]
 9781 021a 072B     		cmp	r3, #7
 9782 021c C2DD     		ble	.L497
 9783              	.L495:
2482:bluetooth_rxtx.c **** 			}
2483:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 9784              		.loc 1 2483 0 is_stmt 1 discriminator 2
 9785 021e 354B     		ldr	r3, .L505+20
 9786 0220 1A68     		ldr	r2, [r3]
 9787 0222 BB6F     		ldr	r3, [r7, #120]
 9788 0224 1344     		add	r3, r3, r2
 9789 0226 97F86B20 		ldrb	r2, [r7, #107]
 9790 022a 1A70     		strb	r2, [r3]
 9791              	.LBE20:
2471:bluetooth_rxtx.c **** 			u8 byte = 0;
 9792              		.loc 1 2471 0 discriminator 2
 9793 022c BB6F     		ldr	r3, [r7, #120]
 9794 022e 0133     		adds	r3, r3, #1
 9795 0230 BB67     		str	r3, [r7, #120]
 9796              	.L492:
2471:bluetooth_rxtx.c **** 			u8 byte = 0;
 9797              		.loc 1 2471 0 is_stmt 0 discriminator 1
 9798 0232 BB6F     		ldr	r3, [r7, #120]
 9799 0234 092B     		cmp	r3, #9
 9800 0236 AFDD     		ble	.L498
2484:bluetooth_rxtx.c **** 		}
2485:bluetooth_rxtx.c **** 
2486:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 9801              		.loc 1 2486 0 is_stmt 1
 9802 0238 2E4B     		ldr	r3, .L505+20
 9803 023a 1B68     		ldr	r3, [r3]
 9804 023c 0333     		adds	r3, r3, #3
 9805 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9806 0240 1A06     		lsls	r2, r3, #24
2487:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9807              		.loc 1 2487 0
 9808 0242 2C4B     		ldr	r3, .L505+20
 9809 0244 1B68     		ldr	r3, [r3]
 9810 0246 0233     		adds	r3, r3, #2
 9811 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9812 024a 1B04     		lsls	r3, r3, #16
2486:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9813              		.loc 1 2486 0
 9814 024c 1A43     		orrs	r2, r2, r3
ARM GAS  /tmp/ccxwuSCA.s 			page 216


2488:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9815              		.loc 1 2488 0
 9816 024e 294B     		ldr	r3, .L505+20
 9817 0250 1B68     		ldr	r3, [r3]
 9818 0252 0133     		adds	r3, r3, #1
 9819 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9820 0256 1B02     		lsls	r3, r3, #8
2487:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9821              		.loc 1 2487 0
 9822 0258 1343     		orrs	r3, r3, r2
2489:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 9823              		.loc 1 2489 0
 9824 025a 264A     		ldr	r2, .L505+20
 9825 025c 1268     		ldr	r2, [r2]
 9826 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2488:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9827              		.loc 1 2488 0
 9828 0260 1343     		orrs	r3, r3, r2
2486:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9829              		.loc 1 2486 0
 9830 0262 FB65     		str	r3, [r7, #92]
2490:bluetooth_rxtx.c **** 		see_aa(aa);
 9831              		.loc 1 2490 0
 9832 0264 F86D     		ldr	r0, [r7, #92]
 9833 0266 FFF7FEFF 		bl	see_aa
2491:bluetooth_rxtx.c **** 
2492:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 9834              		.loc 1 2492 0
 9835 026a 224B     		ldr	r3, .L505+20
 9836 026c 1B68     		ldr	r3, [r3]
 9837 026e 0120     		movs	r0, #1
 9838 0270 1946     		mov	r1, r3
 9839 0272 FFF7FEFF 		bl	enqueue
 9840              	.L491:
 9841              	.LBE19:
2444:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9842              		.loc 1 2444 0 discriminator 2
 9843 0276 FB6F     		ldr	r3, [r7, #124]
 9844 0278 0133     		adds	r3, r3, #1
 9845 027a FB67     		str	r3, [r7, #124]
 9846              	.L479:
2444:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9847              		.loc 1 2444 0 is_stmt 0 discriminator 1
 9848 027c FB6F     		ldr	r3, [r7, #124]
 9849 027e B3F53C7F 		cmp	r3, #752
 9850 0282 FFF62AAF 		blt	.L499
2493:bluetooth_rxtx.c **** 
2494:bluetooth_rxtx.c **** 	}
2495:bluetooth_rxtx.c **** 
2496:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2497:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 9851              		.loc 1 2497 0 is_stmt 1
 9852 0286 0023     		movs	r3, #0
 9853 0288 FB67     		str	r3, [r7, #124]
 9854 028a 20E0     		b	.L500
 9855              	.L503:
2498:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
ARM GAS  /tmp/ccxwuSCA.s 			page 217


 9856              		.loc 1 2498 0
 9857 028c 1A4A     		ldr	r2, .L505+24
 9858 028e FB6F     		ldr	r3, [r7, #124]
 9859 0290 DB00     		lsls	r3, r3, #3
 9860 0292 1344     		add	r3, r3, r2
 9861 0294 5B68     		ldr	r3, [r3, #4]
 9862 0296 032B     		cmp	r3, #3
 9863 0298 16DD     		ble	.L501
2499:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 9864              		.loc 1 2499 0
 9865 029a 174A     		ldr	r2, .L505+24
 9866 029c FB6F     		ldr	r3, [r7, #124]
 9867 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 9868 02a2 1846     		mov	r0, r3
 9869 02a4 FFF7FEFF 		bl	le_set_access_address
2500:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 9870              		.loc 1 2500 0
 9871 02a8 144B     		ldr	r3, .L505+28
 9872 02aa 154A     		ldr	r2, .L505+32
 9873 02ac 1A60     		str	r2, [r3]
2501:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 9874              		.loc 1 2501 0
 9875 02ae 154B     		ldr	r3, .L505+36
 9876 02b0 154A     		ldr	r2, .L505+40
 9877 02b2 1A60     		str	r2, [r3]
2502:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9878              		.loc 1 2502 0
 9879 02b4 154B     		ldr	r3, .L505+44
 9880 02b6 0022     		movs	r2, #0
 9881 02b8 1A61     		str	r2, [r3, #16]
2503:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 9882              		.loc 1 2503 0
 9883 02ba 0020     		movs	r0, #0
 9884 02bc 1349     		ldr	r1, .L505+44
 9885 02be 0422     		movs	r2, #4
 9886 02c0 FFF7FEFF 		bl	le_promisc_state
2504:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2505:bluetooth_rxtx.c **** 			return 0;
 9887              		.loc 1 2505 0
 9888 02c4 0023     		movs	r3, #0
 9889 02c6 06E0     		b	.L504
 9890              	.L501:
2497:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9891              		.loc 1 2497 0 discriminator 2
 9892 02c8 FB6F     		ldr	r3, [r7, #124]
 9893 02ca 0133     		adds	r3, r3, #1
 9894 02cc FB67     		str	r3, [r7, #124]
 9895              	.L500:
2497:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9896              		.loc 1 2497 0 is_stmt 0 discriminator 1
 9897 02ce FB6F     		ldr	r3, [r7, #124]
 9898 02d0 1F2B     		cmp	r3, #31
 9899 02d2 DBDD     		ble	.L503
2506:bluetooth_rxtx.c **** 		}
2507:bluetooth_rxtx.c **** 	}
2508:bluetooth_rxtx.c **** 
2509:bluetooth_rxtx.c **** 	return 1;
ARM GAS  /tmp/ccxwuSCA.s 			page 218


 9900              		.loc 1 2509 0 is_stmt 1
 9901 02d4 0123     		movs	r3, #1
 9902              	.L504:
2510:bluetooth_rxtx.c **** }
 9903              		.loc 1 2510 0 discriminator 1
 9904 02d6 1846     		mov	r0, r3
 9905 02d8 8437     		adds	r7, r7, #132
 9906              		.cfi_def_cfa_offset 12
 9907 02da BD46     		mov	sp, r7
 9908              		.cfi_def_cfa_register 13
 9909              		@ sp needed
 9910 02dc 90BD     		pop	{r4, r7, pc}
 9911              	.L506:
 9912 02de 00BF     		.align	2
 9913              	.L505:
 9914 02e0 00000000 		.word	channel
 9915 02e4 C0000000 		.word	whitening_index
 9916 02e8 40000000 		.word	whitening
 9917 02ec 11080402 		.word	33818641
 9918 02f0 E0080000 		.word	.LC0
 9919 02f4 00000000 		.word	idle_rxbuf
 9920 02f8 00000000 		.word	le_promisc
 9921 02fc 00000000 		.word	data_cb
 9922 0300 00000000 		.word	cb_follow_le
 9923 0304 00000000 		.word	packet_cb
 9924 0308 00000000 		.word	promisc_follow_cb
 9925 030c 00000000 		.word	le
 9926              		.cfi_endproc
 9927              	.LFE42:
 9929              		.section	.text.bt_promisc_le,"ax",%progbits
 9930              		.align	2
 9931              		.global	bt_promisc_le
 9932              		.thumb
 9933              		.thumb_func
 9935              	bt_promisc_le:
 9936              	.LFB43:
2511:bluetooth_rxtx.c **** 
2512:bluetooth_rxtx.c **** void bt_promisc_le() {
 9937              		.loc 1 2512 0
 9938              		.cfi_startproc
 9939              		@ args = 0, pretend = 0, frame = 0
 9940              		@ frame_needed = 1, uses_anonymous_args = 0
 9941 0000 80B5     		push	{r7, lr}
 9942              		.cfi_def_cfa_offset 8
 9943              		.cfi_offset 7, -8
 9944              		.cfi_offset 14, -4
 9945 0002 00AF     		add	r7, sp, #0
 9946              		.cfi_def_cfa_register 7
2513:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 9947              		.loc 1 2513 0
 9948 0004 2CE0     		b	.L508
 9949              	.L513:
2514:bluetooth_rxtx.c **** 		reset_le_promisc();
 9950              		.loc 1 2514 0
 9951 0006 FFF7FEFF 		bl	reset_le_promisc
2515:bluetooth_rxtx.c **** 
2516:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
ARM GAS  /tmp/ccxwuSCA.s 			page 219


2517:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 9952              		.loc 1 2517 0
 9953 000a 184B     		ldr	r3, .L514
 9954 000c 1B88     		ldrh	r3, [r3]	@ movhi
 9955 000e 9BB2     		uxth	r3, r3
 9956 0010 03F00103 		and	r3, r3, #1
 9957 0014 002B     		cmp	r3, #0
 9958 0016 03D0     		beq	.L509
2518:bluetooth_rxtx.c **** 			channel = 2440;
 9959              		.loc 1 2518 0
 9960 0018 144B     		ldr	r3, .L514
 9961 001a 40F68812 		movw	r2, #2440
 9962 001e 1A80     		strh	r2, [r3]	@ movhi
 9963              	.L509:
2519:bluetooth_rxtx.c **** 
2520:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2521:bluetooth_rxtx.c **** 		if (!le.target_set) {
 9964              		.loc 1 2521 0
 9965 0020 134B     		ldr	r3, .L514+4
 9966 0022 DB6B     		ldr	r3, [r3, #60]
 9967 0024 002B     		cmp	r3, #0
 9968 0026 07D1     		bne	.L510
2522:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2523:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 9969              		.loc 1 2523 0
 9970 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2524:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 9971              		.loc 1 2524 0
 9972 002c 114B     		ldr	r3, .L514+8
 9973 002e 124A     		ldr	r2, .L514+12
 9974 0030 1A60     		str	r2, [r3]
2525:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 9975              		.loc 1 2525 0
 9976 0032 0A20     		movs	r0, #10
 9977 0034 FFF7FEFF 		bl	bt_generic_le
 9978              	.L510:
2526:bluetooth_rxtx.c **** 		}
2527:bluetooth_rxtx.c **** 
2528:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2529:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 9979              		.loc 1 2529 0
 9980 0038 104B     		ldr	r3, .L514+16
 9981 003a 1B78     		ldrb	r3, [r3]
 9982 003c DBB2     		uxtb	r3, r3
 9983 003e 0A2B     		cmp	r3, #10
 9984 0040 00D0     		beq	.L511
2530:bluetooth_rxtx.c **** 			break;
 9985              		.loc 1 2530 0
 9986 0042 12E0     		b	.L507
 9987              	.L511:
2531:bluetooth_rxtx.c **** 
2532:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 9988              		.loc 1 2532 0
 9989 0044 0020     		movs	r0, #0
 9990 0046 0A49     		ldr	r1, .L514+4
 9991 0048 0422     		movs	r2, #4
 9992 004a FFF7FEFF 		bl	le_promisc_state
ARM GAS  /tmp/ccxwuSCA.s 			page 220


2533:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 9993              		.loc 1 2533 0
 9994 004e 0C4B     		ldr	r3, .L514+20
 9995 0050 0C4A     		ldr	r2, .L514+24
 9996 0052 1A60     		str	r2, [r3]
2534:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 9997              		.loc 1 2534 0
 9998 0054 064B     		ldr	r3, .L514+4
 9999 0056 0022     		movs	r2, #0
 10000 0058 1A61     		str	r2, [r3, #16]
2535:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 10001              		.loc 1 2535 0
 10002 005a 0A20     		movs	r0, #10
 10003 005c FFF7FEFF 		bl	bt_le_sync
 10004              	.L508:
2513:bluetooth_rxtx.c **** 		reset_le_promisc();
 10005              		.loc 1 2513 0
 10006 0060 064B     		ldr	r3, .L514+16
 10007 0062 1B78     		ldrb	r3, [r3]
 10008 0064 DBB2     		uxtb	r3, r3
 10009 0066 0A2B     		cmp	r3, #10
 10010 0068 CDD0     		beq	.L513
 10011              	.L507:
2536:bluetooth_rxtx.c **** 	}
2537:bluetooth_rxtx.c **** }
 10012              		.loc 1 2537 0
 10013 006a 80BD     		pop	{r7, pc}
 10014              	.L515:
 10015              		.align	2
 10016              	.L514:
 10017 006c 00000000 		.word	channel
 10018 0070 00000000 		.word	le
 10019 0074 00000000 		.word	data_cb
 10020 0078 00000000 		.word	cb_le_promisc
 10021 007c 00000000 		.word	requested_mode
 10022 0080 00000000 		.word	packet_cb
 10023 0084 00000000 		.word	promisc_follow_cb
 10024              		.cfi_endproc
 10025              	.LFE43:
 10027              		.section	.rodata
 10028              		.align	2
 10029              	.LC1:
 10030 08f0 00       		.byte	0
 10031 08f1 09       		.byte	9
 10032 08f2 FF       		.byte	-1
 10033 08f3 FF       		.byte	-1
 10034 08f4 FF       		.byte	-1
 10035 08f5 FF       		.byte	-1
 10036 08f6 FF       		.byte	-1
 10037 08f7 FF       		.byte	-1
 10038 08f8 02       		.byte	2
 10039 08f9 01       		.byte	1
 10040 08fa 05       		.byte	5
 10041 08fb FF       		.byte	-1
 10042 08fc FF       		.byte	-1
 10043 08fd FF       		.byte	-1
 10044              		.section	.text.bt_slave_le,"ax",%progbits
ARM GAS  /tmp/ccxwuSCA.s 			page 221


 10045              		.align	2
 10046              		.global	bt_slave_le
 10047              		.thumb
 10048              		.thumb_func
 10050              	bt_slave_le:
 10051              	.LFB44:
2538:bluetooth_rxtx.c **** 
2539:bluetooth_rxtx.c **** void bt_slave_le() {
 10052              		.loc 1 2539 0
 10053              		.cfi_startproc
 10054              		@ args = 0, pretend = 0, frame = 32
 10055              		@ frame_needed = 1, uses_anonymous_args = 0
 10056 0000 90B5     		push	{r4, r7, lr}
 10057              		.cfi_def_cfa_offset 12
 10058              		.cfi_offset 4, -12
 10059              		.cfi_offset 7, -8
 10060              		.cfi_offset 14, -4
 10061 0002 89B0     		sub	sp, sp, #36
 10062              		.cfi_def_cfa_offset 48
 10063 0004 00AF     		add	r7, sp, #0
 10064              		.cfi_def_cfa_register 7
2540:bluetooth_rxtx.c **** 	u32 calc_crc;
2541:bluetooth_rxtx.c **** 	int i;
2542:bluetooth_rxtx.c **** 
2543:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 10065              		.loc 1 2543 0
 10066 0006 354A     		ldr	r2, .L521
 10067 0008 3B1D     		adds	r3, r7, #4
 10068 000a 1446     		mov	r4, r2
 10069 000c 2068     		ldr	r0, [r4]	@ unaligned
 10070 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 10071 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 10072 0012 07C3     		stmia	r3!, {r0, r1, r2}
 10073 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 10074 0016 1A80     		strh	r2, [r3]	@ unaligned
2544:bluetooth_rxtx.c **** 		// LL header
2545:bluetooth_rxtx.c **** 		0x00, 0x09,
2546:bluetooth_rxtx.c **** 
2547:bluetooth_rxtx.c **** 		// advertising address
2548:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2549:bluetooth_rxtx.c **** 
2550:bluetooth_rxtx.c **** 		// advertising data
2551:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2552:bluetooth_rxtx.c **** 
2553:bluetooth_rxtx.c **** 		// CRC (calc)
2554:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2555:bluetooth_rxtx.c **** 	};
2556:bluetooth_rxtx.c **** 
2557:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 10075              		.loc 1 2557 0
 10076 0018 0B23     		movs	r3, #11
 10077 001a FB76     		strb	r3, [r7, #27]
2558:bluetooth_rxtx.c **** 
2559:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2560:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 10078              		.loc 1 2560 0
 10079 001c 0023     		movs	r3, #0
ARM GAS  /tmp/ccxwuSCA.s 			page 222


 10080 001e FB61     		str	r3, [r7, #28]
 10081 0020 0EE0     		b	.L517
 10082              	.L518:
2561:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10083              		.loc 1 2561 0 discriminator 3
 10084 0022 FB69     		ldr	r3, [r7, #28]
 10085 0024 0233     		adds	r3, r3, #2
 10086 0026 FA69     		ldr	r2, [r7, #28]
 10087 0028 C2F10502 		rsb	r2, r2, #5
 10088 002c 2C49     		ldr	r1, .L521+4
 10089 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 10090 0030 07F12001 		add	r1, r7, #32
 10091 0034 0B44     		add	r3, r3, r1
 10092 0036 03F81C2C 		strb	r2, [r3, #-28]
2560:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10093              		.loc 1 2560 0 discriminator 3
 10094 003a FB69     		ldr	r3, [r7, #28]
 10095 003c 0133     		adds	r3, r3, #1
 10096 003e FB61     		str	r3, [r7, #28]
 10097              	.L517:
2560:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 10098              		.loc 1 2560 0 is_stmt 0 discriminator 1
 10099 0040 FB69     		ldr	r3, [r7, #28]
 10100 0042 052B     		cmp	r3, #5
 10101 0044 EDDD     		ble	.L518
2562:bluetooth_rxtx.c **** 
2563:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 10102              		.loc 1 2563 0 is_stmt 1
 10103 0046 274B     		ldr	r3, .L521+8
 10104 0048 D968     		ldr	r1, [r3, #12]
 10105 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10106 004c 3A1D     		adds	r2, r7, #4
 10107 004e 0846     		mov	r0, r1
 10108 0050 1146     		mov	r1, r2
 10109 0052 1A46     		mov	r2, r3
 10110 0054 FFF7FEFF 		bl	btle_calc_crc
 10111 0058 7861     		str	r0, [r7, #20]
2564:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 10112              		.loc 1 2564 0
 10113 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10114 005c 7A69     		ldr	r2, [r7, #20]
 10115 005e D2B2     		uxtb	r2, r2
 10116 0060 07F12001 		add	r1, r7, #32
 10117 0064 0B44     		add	r3, r3, r1
 10118 0066 03F81C2C 		strb	r2, [r3, #-28]
2565:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 10119              		.loc 1 2565 0
 10120 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10121 006c 0133     		adds	r3, r3, #1
 10122 006e 7A69     		ldr	r2, [r7, #20]
 10123 0070 120A     		lsrs	r2, r2, #8
 10124 0072 D2B2     		uxtb	r2, r2
 10125 0074 07F12001 		add	r1, r7, #32
 10126 0078 0B44     		add	r3, r3, r1
 10127 007a 03F81C2C 		strb	r2, [r3, #-28]
2566:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 10128              		.loc 1 2566 0
ARM GAS  /tmp/ccxwuSCA.s 			page 223


 10129 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10130 0080 0233     		adds	r3, r3, #2
 10131 0082 7A69     		ldr	r2, [r7, #20]
 10132 0084 120C     		lsrs	r2, r2, #16
 10133 0086 D2B2     		uxtb	r2, r2
 10134 0088 07F12001 		add	r1, r7, #32
 10135 008c 0B44     		add	r3, r3, r1
 10136 008e 03F81C2C 		strb	r2, [r3, #-28]
2567:bluetooth_rxtx.c **** 
2568:bluetooth_rxtx.c **** 	// spam advertising packets
2569:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 10137              		.loc 1 2569 0
 10138 0092 1BE0     		b	.L519
 10139              	.L520:
2570:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 10140              		.loc 1 2570 0
 10141 0094 144B     		ldr	r3, .L521+12
 10142 0096 4FF08072 		mov	r2, #16777216
 10143 009a 1A60     		str	r2, [r3]
2571:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 10144              		.loc 1 2571 0
 10145 009c 124B     		ldr	r3, .L521+12
 10146 009e 4FF08062 		mov	r2, #67108864
 10147 00a2 1A60     		str	r2, [r3]
2572:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 10148              		.loc 1 2572 0
 10149 00a4 FB7E     		ldrb	r3, [r7, #27]
 10150 00a6 0333     		adds	r3, r3, #3
 10151 00a8 DAB2     		uxtb	r2, r3
 10152 00aa 3B1D     		adds	r3, r7, #4
 10153 00ac 0F48     		ldr	r0, .L521+16
 10154 00ae 1146     		mov	r1, r2
 10155 00b0 1A46     		mov	r2, r3
 10156 00b2 FFF7FEFF 		bl	le_transmit
2573:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 10157              		.loc 1 2573 0
 10158 00b6 0E4B     		ldr	r3, .L521+20
 10159 00b8 4FF08072 		mov	r2, #16777216
 10160 00bc 1A60     		str	r2, [r3]
2574:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 10161              		.loc 1 2574 0
 10162 00be 0C4B     		ldr	r3, .L521+20
 10163 00c0 4FF08062 		mov	r2, #67108864
 10164 00c4 1A60     		str	r2, [r3]
2575:bluetooth_rxtx.c **** 		msleep(100);
 10165              		.loc 1 2575 0
 10166 00c6 6420     		movs	r0, #100
 10167 00c8 FFF7FEFF 		bl	msleep
 10168              	.L519:
2569:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 10169              		.loc 1 2569 0
 10170 00cc 094B     		ldr	r3, .L521+24
 10171 00ce 1B78     		ldrb	r3, [r3]
 10172 00d0 DBB2     		uxtb	r3, r3
 10173 00d2 0C2B     		cmp	r3, #12
 10174 00d4 DED0     		beq	.L520
2576:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccxwuSCA.s 			page 224


2577:bluetooth_rxtx.c **** }
 10175              		.loc 1 2577 0
 10176 00d6 2437     		adds	r7, r7, #36
 10177              		.cfi_def_cfa_offset 12
 10178 00d8 BD46     		mov	sp, r7
 10179              		.cfi_def_cfa_register 13
 10180              		@ sp needed
 10181 00da 90BD     		pop	{r4, r7, pc}
 10182              	.L522:
 10183              		.align	2
 10184              	.L521:
 10185 00dc F0080000 		.word	.LC1
 10186 00e0 00000000 		.word	slave_mac_address
 10187 00e4 00000000 		.word	le
 10188 00e8 80E100E0 		.word	-536813184
 10189 00ec D6BE898E 		.word	-1903575338
 10190 00f0 00E100E0 		.word	-536813312
 10191 00f4 00000000 		.word	requested_mode
 10192              		.cfi_endproc
 10193              	.LFE44:
 10195              		.section	.text.specan,"ax",%progbits
 10196              		.align	2
 10197              		.global	specan
 10198              		.thumb
 10199              		.thumb_func
 10201              	specan:
 10202              	.LFB45:
2578:bluetooth_rxtx.c **** 
2579:bluetooth_rxtx.c **** /* spectrum analysis */
2580:bluetooth_rxtx.c **** void specan()
2581:bluetooth_rxtx.c **** {
 10203              		.loc 1 2581 0
 10204              		.cfi_startproc
 10205              		@ args = 0, pretend = 0, frame = 64
 10206              		@ frame_needed = 1, uses_anonymous_args = 0
 10207 0000 90B5     		push	{r4, r7, lr}
 10208              		.cfi_def_cfa_offset 12
 10209              		.cfi_offset 4, -12
 10210              		.cfi_offset 7, -8
 10211              		.cfi_offset 14, -4
 10212 0002 91B0     		sub	sp, sp, #68
 10213              		.cfi_def_cfa_offset 80
 10214 0004 00AF     		add	r7, sp, #0
 10215              		.cfi_def_cfa_register 7
2582:bluetooth_rxtx.c **** 	u8 epstat;
2583:bluetooth_rxtx.c **** 	u16 f;
2584:bluetooth_rxtx.c **** 	u8 i = 0;
 10216              		.loc 1 2584 0
 10217 0006 0023     		movs	r3, #0
 10218 0008 87F83D30 		strb	r3, [r7, #61]
2585:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2586:bluetooth_rxtx.c **** 
2587:bluetooth_rxtx.c **** 	RXLED_SET;
 10219              		.loc 1 2587 0
 10220 000c 5A4B     		ldr	r3, .L534
 10221 000e 1022     		movs	r2, #16
 10222 0010 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 225


2588:bluetooth_rxtx.c **** 
2589:bluetooth_rxtx.c **** 	queue_init();
 10223              		.loc 1 2589 0
 10224 0012 FFF7FEFF 		bl	queue_init
2590:bluetooth_rxtx.c **** 
2591:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2592:bluetooth_rxtx.c **** 	PAEN_SET;
 10225              		.loc 1 2592 0
 10226 0016 594B     		ldr	r3, .L534+4
 10227 0018 8022     		movs	r2, #128
 10228 001a 1A60     		str	r2, [r3]
2593:bluetooth_rxtx.c **** 	//HGM_SET;
2594:bluetooth_rxtx.c **** #endif
2595:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10229              		.loc 1 2595 0
 10230 001c 1220     		movs	r0, #18
 10231 001e 42F62231 		movw	r1, #11042
 10232 0022 FFF7FEFF 		bl	cc2400_set
2596:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10233              		.loc 1 2596 0
 10234 0026 1420     		movs	r0, #20
 10235 0028 41F24B31 		movw	r1, #4939
 10236 002c FFF7FEFF 		bl	cc2400_set
2597:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10237              		.loc 1 2597 0
 10238 0030 2020     		movs	r0, #32
 10239 0032 40F20111 		movw	r1, #257
 10240 0036 FFF7FEFF 		bl	cc2400_set
2598:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10241              		.loc 1 2598 0
 10242 003a 0320     		movs	r0, #3
 10243 003c 2921     		movs	r1, #41
 10244 003e FFF7FEFF 		bl	cc2400_set
2599:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2600:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10245              		.loc 1 2600 0
 10246 0042 00BF     		nop
 10247              	.L524:
 10248              		.loc 1 2600 0 is_stmt 0 discriminator 1
 10249 0044 FFF7FEFF 		bl	cc2400_status
 10250 0048 0346     		mov	r3, r0
 10251 004a 03F04003 		and	r3, r3, #64
 10252 004e 002B     		cmp	r3, #0
 10253 0050 F8D0     		beq	.L524
2601:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10254              		.loc 1 2601 0 is_stmt 1
 10255 0052 00BF     		nop
 10256              	.L525:
 10257              		.loc 1 2601 0 is_stmt 0 discriminator 1
 10258 0054 FFF7FEFF 		bl	cc2400_status
 10259 0058 0346     		mov	r3, r0
 10260 005a 03F00403 		and	r3, r3, #4
 10261 005e 002B     		cmp	r3, #0
 10262 0060 F8D1     		bne	.L525
2602:bluetooth_rxtx.c **** 
2603:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 10263              		.loc 1 2603 0 is_stmt 1
ARM GAS  /tmp/ccxwuSCA.s 			page 226


 10264 0062 7AE0     		b	.L526
 10265              	.L533:
2604:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10266              		.loc 1 2604 0
 10267 0064 464B     		ldr	r3, .L534+8
 10268 0066 1B88     		ldrh	r3, [r3]	@ movhi
 10269 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 10270 006a 6FE0     		b	.L527
 10271              	.L532:
 10272              	.LBB22:
2605:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10273              		.loc 1 2605 0
 10274 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 10275 006e 013B     		subs	r3, r3, #1
 10276 0070 9BB2     		uxth	r3, r3
 10277 0072 0220     		movs	r0, #2
 10278 0074 1946     		mov	r1, r3
 10279 0076 FFF7FEFF 		bl	cc2400_set
2606:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 10280              		.loc 1 2606 0
 10281 007a 6120     		movs	r0, #97
 10282 007c FFF7FEFF 		bl	cc2400_strobe
2607:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 10283              		.loc 1 2607 0
 10284 0080 00BF     		nop
 10285              	.L528:
 10286              		.loc 1 2607 0 is_stmt 0 discriminator 1
 10287 0082 FFF7FEFF 		bl	cc2400_status
 10288 0086 0346     		mov	r3, r0
 10289 0088 03F00403 		and	r3, r3, #4
 10290 008c 002B     		cmp	r3, #0
 10291 008e F8D0     		beq	.L528
2608:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 10292              		.loc 1 2608 0 is_stmt 1
 10293 0090 6220     		movs	r0, #98
 10294 0092 FFF7FEFF 		bl	cc2400_strobe
2609:bluetooth_rxtx.c **** 
2610:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2611:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 10295              		.loc 1 2611 0
 10296 0096 4FF4FA73 		mov	r3, #500
 10297 009a 7B60     		str	r3, [r7, #4]
 10298 009c 00BF     		nop
 10299              	.L529:
 10300              		.loc 1 2611 0 is_stmt 0 discriminator 2
 10301 009e 7B68     		ldr	r3, [r7, #4]
 10302 00a0 013B     		subs	r3, r3, #1
 10303 00a2 7B60     		str	r3, [r7, #4]
 10304 00a4 002B     		cmp	r3, #0
 10305 00a6 FAD1     		bne	.L529
2612:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 10306              		.loc 1 2612 0 is_stmt 1
 10307 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10308 00ac 1346     		mov	r3, r2
 10309 00ae 5B00     		lsls	r3, r3, #1
 10310 00b0 1344     		add	r3, r3, r2
 10311 00b2 FA8F     		ldrh	r2, [r7, #62]
ARM GAS  /tmp/ccxwuSCA.s 			page 227


 10312 00b4 120A     		lsrs	r2, r2, #8
 10313 00b6 92B2     		uxth	r2, r2
 10314 00b8 D2B2     		uxtb	r2, r2
 10315 00ba 07F14001 		add	r1, r7, #64
 10316 00be 0B44     		add	r3, r3, r1
 10317 00c0 03F8382C 		strb	r2, [r3, #-56]
2613:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 10318              		.loc 1 2613 0
 10319 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10320 00c8 1346     		mov	r3, r2
 10321 00ca 5B00     		lsls	r3, r3, #1
 10322 00cc 1344     		add	r3, r3, r2
 10323 00ce 0133     		adds	r3, r3, #1
 10324 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 10325 00d2 D2B2     		uxtb	r2, r2
 10326 00d4 07F14001 		add	r1, r7, #64
 10327 00d8 0B44     		add	r3, r3, r1
 10328 00da 03F8382C 		strb	r2, [r3, #-56]
2614:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 10329              		.loc 1 2614 0
 10330 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10331 00e2 1346     		mov	r3, r2
 10332 00e4 5B00     		lsls	r3, r3, #1
 10333 00e6 1344     		add	r3, r3, r2
 10334 00e8 9C1C     		adds	r4, r3, #2
 10335 00ea 0620     		movs	r0, #6
 10336 00ec FFF7FEFF 		bl	cc2400_get
 10337 00f0 0346     		mov	r3, r0
 10338 00f2 1B0A     		lsrs	r3, r3, #8
 10339 00f4 9BB2     		uxth	r3, r3
 10340 00f6 DAB2     		uxtb	r2, r3
 10341 00f8 07F14003 		add	r3, r7, #64
 10342 00fc 2344     		add	r3, r3, r4
 10343 00fe 03F8382C 		strb	r2, [r3, #-56]
2615:bluetooth_rxtx.c **** 			i++;
 10344              		.loc 1 2615 0
 10345 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10346 0106 0133     		adds	r3, r3, #1
 10347 0108 87F83D30 		strb	r3, [r7, #61]
2616:bluetooth_rxtx.c **** 			if (i == 16) {
 10348              		.loc 1 2616 0
 10349 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10350 0110 102B     		cmp	r3, #16
 10351 0112 0DD1     		bne	.L530
2617:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 10352              		.loc 1 2617 0
 10353 0114 07F10803 		add	r3, r7, #8
 10354 0118 0420     		movs	r0, #4
 10355 011a 1946     		mov	r1, r3
 10356 011c FFF7FEFF 		bl	enqueue
2618:bluetooth_rxtx.c **** 				i = 0;
 10357              		.loc 1 2618 0
 10358 0120 0023     		movs	r3, #0
 10359 0122 87F83D30 		strb	r3, [r7, #61]
2619:bluetooth_rxtx.c **** 
2620:bluetooth_rxtx.c **** 				handle_usb(clkn);
 10360              		.loc 1 2620 0
ARM GAS  /tmp/ccxwuSCA.s 			page 228


 10361 0126 174B     		ldr	r3, .L534+12
 10362 0128 1B68     		ldr	r3, [r3]
 10363 012a 1846     		mov	r0, r3
 10364 012c FFF7FEFF 		bl	handle_usb
 10365              	.L530:
2621:bluetooth_rxtx.c **** 			}
2622:bluetooth_rxtx.c **** 
2623:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 10366              		.loc 1 2623 0
 10367 0130 6420     		movs	r0, #100
 10368 0132 FFF7FEFF 		bl	cc2400_strobe
2624:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 10369              		.loc 1 2624 0
 10370 0136 00BF     		nop
 10371              	.L531:
 10372              		.loc 1 2624 0 is_stmt 0 discriminator 1
 10373 0138 FFF7FEFF 		bl	cc2400_status
 10374 013c 0346     		mov	r3, r0
 10375 013e 03F00403 		and	r3, r3, #4
 10376 0142 002B     		cmp	r3, #0
 10377 0144 F8D1     		bne	.L531
 10378              	.LBE22:
2604:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10379              		.loc 1 2604 0 is_stmt 1 discriminator 2
 10380 0146 FB8F     		ldrh	r3, [r7, #62]
 10381 0148 0133     		adds	r3, r3, #1
 10382 014a FB87     		strh	r3, [r7, #62]	@ movhi
 10383              	.L527:
2604:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10384              		.loc 1 2604 0 is_stmt 0 discriminator 1
 10385 014c FA8F     		ldrh	r2, [r7, #62]
 10386 014e 0E4B     		ldr	r3, .L534+16
 10387 0150 1B88     		ldrh	r3, [r3]	@ movhi
 10388 0152 9BB2     		uxth	r3, r3
 10389 0154 0133     		adds	r3, r3, #1
 10390 0156 9A42     		cmp	r2, r3
 10391 0158 88DB     		blt	.L532
 10392              	.L526:
2603:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10393              		.loc 1 2603 0 is_stmt 1
 10394 015a 0C4B     		ldr	r3, .L534+20
 10395 015c 1B78     		ldrb	r3, [r3]
 10396 015e DBB2     		uxtb	r3, r3
 10397 0160 042B     		cmp	r3, #4
 10398 0162 3FF47FAF 		beq	.L533
2625:bluetooth_rxtx.c **** 		}
2626:bluetooth_rxtx.c **** 	}
2627:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10399              		.loc 1 2627 0
 10400 0166 0A4B     		ldr	r3, .L534+24
 10401 0168 0022     		movs	r2, #0
 10402 016a 1A70     		strb	r2, [r3]
2628:bluetooth_rxtx.c **** 	RXLED_CLR;
 10403              		.loc 1 2628 0
 10404 016c 094B     		ldr	r3, .L534+28
 10405 016e 1022     		movs	r2, #16
 10406 0170 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 229


2629:bluetooth_rxtx.c **** }
 10407              		.loc 1 2629 0
 10408 0172 4437     		adds	r7, r7, #68
 10409              		.cfi_def_cfa_offset 12
 10410 0174 BD46     		mov	sp, r7
 10411              		.cfi_def_cfa_register 13
 10412              		@ sp needed
 10413 0176 90BD     		pop	{r4, r7, pc}
 10414              	.L535:
 10415              		.align	2
 10416              	.L534:
 10417 0178 38C00920 		.word	537509944
 10418 017c 58C00920 		.word	537509976
 10419 0180 00000000 		.word	low_freq
 10420 0184 00000000 		.word	clkn
 10421 0188 00000000 		.word	high_freq
 10422 018c 00000000 		.word	requested_mode
 10423 0190 00000000 		.word	mode
 10424 0194 3CC00920 		.word	537509948
 10425              		.cfi_endproc
 10426              	.LFE45:
 10428              		.section	.rodata
 10429 08fe 0000     		.align	2
 10430              	.LC2:
 10431 0900 6C09     		.short	2412
 10432 0902 8509     		.short	2437
 10433 0904 9E09     		.short	2462
 10434              		.section	.text.led_specan,"ax",%progbits
 10435              		.align	2
 10436              		.global	led_specan
 10437              		.thumb
 10438              		.thumb_func
 10440              	led_specan:
 10441              	.LFB46:
2630:bluetooth_rxtx.c **** 
2631:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2632:bluetooth_rxtx.c **** void led_specan()
2633:bluetooth_rxtx.c **** {
 10442              		.loc 1 2633 0
 10443              		.cfi_startproc
 10444              		@ args = 0, pretend = 0, frame = 16
 10445              		@ frame_needed = 1, uses_anonymous_args = 0
 10446 0000 80B5     		push	{r7, lr}
 10447              		.cfi_def_cfa_offset 8
 10448              		.cfi_offset 7, -8
 10449              		.cfi_offset 14, -4
 10450 0002 84B0     		sub	sp, sp, #16
 10451              		.cfi_def_cfa_offset 24
 10452 0004 00AF     		add	r7, sp, #0
 10453              		.cfi_def_cfa_register 7
2634:bluetooth_rxtx.c **** 	int8_t lvl;
2635:bluetooth_rxtx.c **** 	u8 i = 0;
 10454              		.loc 1 2635 0
 10455 0006 0023     		movs	r3, #0
 10456 0008 FB73     		strb	r3, [r7, #15]
2636:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 10457              		.loc 1 2636 0
ARM GAS  /tmp/ccxwuSCA.s 			page 230


 10458 000a 5B4A     		ldr	r2, .L553
 10459 000c 07F10803 		add	r3, r7, #8
 10460 0010 1068     		ldr	r0, [r2]	@ unaligned
 10461 0012 1860     		str	r0, [r3]	@ unaligned
 10462 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 10463 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2637:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2638:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2639:bluetooth_rxtx.c **** 
2640:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2641:bluetooth_rxtx.c **** 	PAEN_SET;
 10464              		.loc 1 2641 0
 10465 0018 584B     		ldr	r3, .L553+4
 10466 001a 8022     		movs	r2, #128
 10467 001c 1A60     		str	r2, [r3]
2642:bluetooth_rxtx.c **** 	//HGM_SET;
2643:bluetooth_rxtx.c **** #endif
2644:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10468              		.loc 1 2644 0
 10469 001e 1220     		movs	r0, #18
 10470 0020 42F62231 		movw	r1, #11042
 10471 0024 FFF7FEFF 		bl	cc2400_set
2645:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10472              		.loc 1 2645 0
 10473 0028 1420     		movs	r0, #20
 10474 002a 41F24B31 		movw	r1, #4939
 10475 002e FFF7FEFF 		bl	cc2400_set
2646:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10476              		.loc 1 2646 0
 10477 0032 2020     		movs	r0, #32
 10478 0034 40F20111 		movw	r1, #257
 10479 0038 FFF7FEFF 		bl	cc2400_set
2647:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10480              		.loc 1 2647 0
 10481 003c 0320     		movs	r0, #3
 10482 003e 2921     		movs	r1, #41
 10483 0040 FFF7FEFF 		bl	cc2400_set
2648:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 10484              		.loc 1 2648 0
 10485 0044 0620     		movs	r0, #6
 10486 0046 F121     		movs	r1, #241
 10487 0048 FFF7FEFF 		bl	cc2400_set
2649:bluetooth_rxtx.c **** 
2650:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10488              		.loc 1 2650 0
 10489 004c 00BF     		nop
 10490              	.L537:
 10491              		.loc 1 2650 0 is_stmt 0 discriminator 1
 10492 004e FFF7FEFF 		bl	cc2400_status
 10493 0052 0346     		mov	r3, r0
 10494 0054 03F04003 		and	r3, r3, #64
 10495 0058 002B     		cmp	r3, #0
 10496 005a F8D0     		beq	.L537
2651:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10497              		.loc 1 2651 0 is_stmt 1
 10498 005c 00BF     		nop
 10499              	.L538:
ARM GAS  /tmp/ccxwuSCA.s 			page 231


 10500              		.loc 1 2651 0 is_stmt 0 discriminator 1
 10501 005e FFF7FEFF 		bl	cc2400_status
 10502 0062 0346     		mov	r3, r0
 10503 0064 03F00403 		and	r3, r3, #4
 10504 0068 002B     		cmp	r3, #0
 10505 006a F8D1     		bne	.L538
2652:bluetooth_rxtx.c **** 
2653:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 10506              		.loc 1 2653 0 is_stmt 1
 10507 006c 79E0     		b	.L539
 10508              	.L552:
 10509              	.LBB23:
2654:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10510              		.loc 1 2654 0
 10511 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10512 0070 5B00     		lsls	r3, r3, #1
 10513 0072 07F11002 		add	r2, r7, #16
 10514 0076 1344     		add	r3, r3, r2
 10515 0078 33F8083C 		ldrh	r3, [r3, #-8]
 10516 007c 013B     		subs	r3, r3, #1
 10517 007e 9BB2     		uxth	r3, r3
 10518 0080 0220     		movs	r0, #2
 10519 0082 1946     		mov	r1, r3
 10520 0084 FFF7FEFF 		bl	cc2400_set
2655:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 10521              		.loc 1 2655 0
 10522 0088 6120     		movs	r0, #97
 10523 008a FFF7FEFF 		bl	cc2400_strobe
2656:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 10524              		.loc 1 2656 0
 10525 008e 00BF     		nop
 10526              	.L540:
 10527              		.loc 1 2656 0 is_stmt 0 discriminator 1
 10528 0090 FFF7FEFF 		bl	cc2400_status
 10529 0094 0346     		mov	r3, r0
 10530 0096 03F00403 		and	r3, r3, #4
 10531 009a 002B     		cmp	r3, #0
 10532 009c F8D0     		beq	.L540
2657:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 10533              		.loc 1 2657 0 is_stmt 1
 10534 009e 6220     		movs	r0, #98
 10535 00a0 FFF7FEFF 		bl	cc2400_strobe
2658:bluetooth_rxtx.c **** 
2659:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2660:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 10536              		.loc 1 2660 0
 10537 00a4 4FF4FA73 		mov	r3, #500
 10538 00a8 7B60     		str	r3, [r7, #4]
 10539 00aa 00BF     		nop
 10540              	.L541:
 10541              		.loc 1 2660 0 is_stmt 0 discriminator 2
 10542 00ac 7B68     		ldr	r3, [r7, #4]
 10543 00ae 013B     		subs	r3, r3, #1
 10544 00b0 7B60     		str	r3, [r7, #4]
 10545 00b2 002B     		cmp	r3, #0
 10546 00b4 FAD1     		bne	.L541
2661:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
ARM GAS  /tmp/ccxwuSCA.s 			page 232


 10547              		.loc 1 2661 0 is_stmt 1
 10548 00b6 0620     		movs	r0, #6
 10549 00b8 FFF7FEFF 		bl	cc2400_get
 10550 00bc 0346     		mov	r3, r0
 10551 00be 1B0A     		lsrs	r3, r3, #8
 10552 00c0 9BB2     		uxth	r3, r3
 10553 00c2 BB73     		strb	r3, [r7, #14]
2662:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 10554              		.loc 1 2662 0
 10555 00c4 2E4B     		ldr	r3, .L553+8
 10556 00c6 1B78     		ldrb	r3, [r3]
 10557 00c8 DBB2     		uxtb	r3, r3
 10558 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 10559 00ce 5BB2     		sxtb	r3, r3
 10560 00d0 9A42     		cmp	r2, r3
 10561 00d2 15DD     		ble	.L542
2663:bluetooth_rxtx.c ****             switch (i) {
 10562              		.loc 1 2663 0
 10563 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10564 00d6 012B     		cmp	r3, #1
 10565 00d8 09D0     		beq	.L544
 10566 00da 022B     		cmp	r3, #2
 10567 00dc 0BD0     		beq	.L545
 10568 00de 002B     		cmp	r3, #0
 10569 00e0 00D0     		beq	.L546
 10570 00e2 21E0     		b	.L547
 10571              	.L546:
2664:bluetooth_rxtx.c ****                 case 0:
2665:bluetooth_rxtx.c ****                     TXLED_SET;
 10572              		.loc 1 2665 0
 10573 00e4 274B     		ldr	r3, .L553+12
 10574 00e6 4FF48072 		mov	r2, #256
 10575 00ea 1A60     		str	r2, [r3]
2666:bluetooth_rxtx.c ****                     break;
 10576              		.loc 1 2666 0
 10577 00ec 07E0     		b	.L543
 10578              	.L544:
2667:bluetooth_rxtx.c ****                 case 1:
2668:bluetooth_rxtx.c ****                     RXLED_SET;
 10579              		.loc 1 2668 0
 10580 00ee 254B     		ldr	r3, .L553+12
 10581 00f0 1022     		movs	r2, #16
 10582 00f2 1A60     		str	r2, [r3]
2669:bluetooth_rxtx.c ****                     break;
 10583              		.loc 1 2669 0
 10584 00f4 03E0     		b	.L543
 10585              	.L545:
2670:bluetooth_rxtx.c ****                 case 2:
2671:bluetooth_rxtx.c ****                     USRLED_SET;
 10586              		.loc 1 2671 0
 10587 00f6 234B     		ldr	r3, .L553+12
 10588 00f8 0222     		movs	r2, #2
 10589 00fa 1A60     		str	r2, [r3]
2672:bluetooth_rxtx.c ****                     break;
 10590              		.loc 1 2672 0
 10591 00fc 00BF     		nop
 10592              	.L543:
ARM GAS  /tmp/ccxwuSCA.s 			page 233


 10593 00fe 13E0     		b	.L547
 10594              	.L542:
2673:bluetooth_rxtx.c ****             }
2674:bluetooth_rxtx.c ****         }
2675:bluetooth_rxtx.c ****         else {
2676:bluetooth_rxtx.c ****             switch (i) {
 10595              		.loc 1 2676 0
 10596 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10597 0102 012B     		cmp	r3, #1
 10598 0104 08D0     		beq	.L548
 10599 0106 022B     		cmp	r3, #2
 10600 0108 0AD0     		beq	.L549
 10601 010a 002B     		cmp	r3, #0
 10602 010c 0CD1     		bne	.L547
2677:bluetooth_rxtx.c ****                 case 0:
2678:bluetooth_rxtx.c ****                     TXLED_CLR;
 10603              		.loc 1 2678 0
 10604 010e 1E4B     		ldr	r3, .L553+16
 10605 0110 4FF48072 		mov	r2, #256
 10606 0114 1A60     		str	r2, [r3]
2679:bluetooth_rxtx.c ****                     break;
 10607              		.loc 1 2679 0
 10608 0116 07E0     		b	.L547
 10609              	.L548:
2680:bluetooth_rxtx.c ****                 case 1:
2681:bluetooth_rxtx.c ****                     RXLED_CLR;
 10610              		.loc 1 2681 0
 10611 0118 1B4B     		ldr	r3, .L553+16
 10612 011a 1022     		movs	r2, #16
 10613 011c 1A60     		str	r2, [r3]
2682:bluetooth_rxtx.c ****                     break;
 10614              		.loc 1 2682 0
 10615 011e 03E0     		b	.L547
 10616              	.L549:
2683:bluetooth_rxtx.c ****                 case 2:
2684:bluetooth_rxtx.c ****                     USRLED_CLR;
 10617              		.loc 1 2684 0
 10618 0120 194B     		ldr	r3, .L553+16
 10619 0122 0222     		movs	r2, #2
 10620 0124 1A60     		str	r2, [r3]
2685:bluetooth_rxtx.c ****                     break;
 10621              		.loc 1 2685 0
 10622 0126 00BF     		nop
 10623              	.L547:
2686:bluetooth_rxtx.c ****             }
2687:bluetooth_rxtx.c ****         }
2688:bluetooth_rxtx.c **** 
2689:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 10624              		.loc 1 2689 0
 10625 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10626 012a 5A1C     		adds	r2, r3, #1
 10627 012c 174B     		ldr	r3, .L553+20
 10628 012e 83FB0231 		smull	r3, r1, r3, r2
 10629 0132 D317     		asrs	r3, r2, #31
 10630 0134 C91A     		subs	r1, r1, r3
 10631 0136 0B46     		mov	r3, r1
 10632 0138 5B00     		lsls	r3, r3, #1
ARM GAS  /tmp/ccxwuSCA.s 			page 234


 10633 013a 0B44     		add	r3, r3, r1
 10634 013c D11A     		subs	r1, r2, r3
 10635 013e 0B46     		mov	r3, r1
 10636 0140 FB73     		strb	r3, [r7, #15]
2690:bluetooth_rxtx.c **** 
2691:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10637              		.loc 1 2691 0
 10638 0142 134B     		ldr	r3, .L553+24
 10639 0144 1B68     		ldr	r3, [r3]
 10640 0146 1846     		mov	r0, r3
 10641 0148 FFF7FEFF 		bl	handle_usb
2692:bluetooth_rxtx.c ****         //wait(1);
2693:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 10642              		.loc 1 2693 0
 10643 014c 6420     		movs	r0, #100
 10644 014e FFF7FEFF 		bl	cc2400_strobe
2694:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 10645              		.loc 1 2694 0
 10646 0152 00BF     		nop
 10647              	.L551:
 10648              		.loc 1 2694 0 is_stmt 0 discriminator 1
 10649 0154 FFF7FEFF 		bl	cc2400_status
 10650 0158 0346     		mov	r3, r0
 10651 015a 03F00403 		and	r3, r3, #4
 10652 015e 002B     		cmp	r3, #0
 10653 0160 F8D1     		bne	.L551
 10654              	.L539:
 10655              	.LBE23:
2653:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10656              		.loc 1 2653 0 is_stmt 1
 10657 0162 0C4B     		ldr	r3, .L553+28
 10658 0164 1B78     		ldrb	r3, [r3]
 10659 0166 DBB2     		uxtb	r3, r3
 10660 0168 072B     		cmp	r3, #7
 10661 016a 80D0     		beq	.L552
2695:bluetooth_rxtx.c **** 	}
2696:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10662              		.loc 1 2696 0
 10663 016c 0A4B     		ldr	r3, .L553+32
 10664 016e 0022     		movs	r2, #0
 10665 0170 1A70     		strb	r2, [r3]
2697:bluetooth_rxtx.c **** }
 10666              		.loc 1 2697 0
 10667 0172 1037     		adds	r7, r7, #16
 10668              		.cfi_def_cfa_offset 8
 10669 0174 BD46     		mov	sp, r7
 10670              		.cfi_def_cfa_register 13
 10671              		@ sp needed
 10672 0176 80BD     		pop	{r7, pc}
 10673              	.L554:
 10674              		.align	2
 10675              	.L553:
 10676 0178 00090000 		.word	.LC2
 10677 017c 58C00920 		.word	537509976
 10678 0180 00000000 		.word	rssi_threshold
 10679 0184 38C00920 		.word	537509944
 10680 0188 3CC00920 		.word	537509948
ARM GAS  /tmp/ccxwuSCA.s 			page 235


 10681 018c 56555555 		.word	1431655766
 10682 0190 00000000 		.word	clkn
 10683 0194 00000000 		.word	requested_mode
 10684 0198 00000000 		.word	mode
 10685              		.cfi_endproc
 10686              	.LFE46:
 10688              		.section	.text.main,"ax",%progbits
 10689              		.align	2
 10690              		.global	main
 10691              		.thumb
 10692              		.thumb_func
 10694              	main:
 10695              	.LFB47:
2698:bluetooth_rxtx.c **** 
2699:bluetooth_rxtx.c **** int main()
2700:bluetooth_rxtx.c **** {
 10696              		.loc 1 2700 0
 10697              		.cfi_startproc
 10698              		@ args = 0, pretend = 0, frame = 0
 10699              		@ frame_needed = 1, uses_anonymous_args = 0
 10700 0000 80B5     		push	{r7, lr}
 10701              		.cfi_def_cfa_offset 8
 10702              		.cfi_offset 7, -8
 10703              		.cfi_offset 14, -4
 10704 0002 00AF     		add	r7, sp, #0
 10705              		.cfi_def_cfa_register 7
2701:bluetooth_rxtx.c **** 	ubertooth_init();
 10706              		.loc 1 2701 0
 10707 0004 FFF7FEFF 		bl	ubertooth_init
2702:bluetooth_rxtx.c **** 	clkn_init();
 10708              		.loc 1 2702 0
 10709 0008 FFF7FEFF 		bl	clkn_init
2703:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 10710              		.loc 1 2703 0
 10711 000c 4248     		ldr	r0, .L575
 10712 000e FFF7FEFF 		bl	ubertooth_usb_init
 10713              	.L573:
2704:bluetooth_rxtx.c **** 
2705:bluetooth_rxtx.c **** 	while (1) {
2706:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10714              		.loc 1 2706 0
 10715 0012 424B     		ldr	r3, .L575+4
 10716 0014 1B68     		ldr	r3, [r3]
 10717 0016 1846     		mov	r0, r3
 10718 0018 FFF7FEFF 		bl	handle_usb
2707:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 10719              		.loc 1 2707 0
 10720 001c 404B     		ldr	r3, .L575+8
 10721 001e 1B78     		ldrb	r3, [r3]
 10722 0020 DAB2     		uxtb	r2, r3
 10723 0022 404B     		ldr	r3, .L575+12
 10724 0024 1B78     		ldrb	r3, [r3]
 10725 0026 DBB2     		uxtb	r3, r3
 10726 0028 9A42     		cmp	r2, r3
 10727 002a 74D0     		beq	.L556
2708:bluetooth_rxtx.c **** 			switch (requested_mode) {
 10728              		.loc 1 2708 0
ARM GAS  /tmp/ccxwuSCA.s 			page 236


 10729 002c 3C4B     		ldr	r3, .L575+8
 10730 002e 1B78     		ldrb	r3, [r3]
 10731 0030 DBB2     		uxtb	r3, r3
 10732 0032 0D2B     		cmp	r3, #13
 10733 0034 6ED8     		bhi	.L574
 10734 0036 01A2     		adr	r2, .L559
 10735 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 10736              		.p2align 2
 10737              	.L559:
 10738 003c 0F010000 		.word	.L558+1
 10739 0040 81000000 		.word	.L560+1
 10740 0044 15010000 		.word	.L574+1
 10741 0048 AB000000 		.word	.L561+1
 10742 004c EF000000 		.word	.L562+1
 10743 0050 BB000000 		.word	.L563+1
 10744 0054 E1000000 		.word	.L564+1
 10745 0058 F5000000 		.word	.L565+1
 10746 005c 8D000000 		.word	.L566+1
 10747 0060 99000000 		.word	.L567+1
 10748 0064 9F000000 		.word	.L568+1
 10749 0068 75000000 		.word	.L569+1
 10750 006c A5000000 		.word	.L570+1
 10751 0070 FB000000 		.word	.L571+1
 10752              		.p2align 1
 10753              	.L569:
2709:bluetooth_rxtx.c **** 				 case MODE_RESET:
2710:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2711:bluetooth_rxtx.c **** 					wait(1);
 10754              		.loc 1 2711 0
 10755 0074 0120     		movs	r0, #1
 10756 0076 FFF7FEFF 		bl	wait
2712:bluetooth_rxtx.c **** 					reset();
 10757              		.loc 1 2712 0
 10758 007a FFF7FEFF 		bl	reset
2713:bluetooth_rxtx.c **** 					break;
 10759              		.loc 1 2713 0
 10760 007e 4AE0     		b	.L556
 10761              	.L560:
2714:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2715:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 10762              		.loc 1 2715 0
 10763 0080 284B     		ldr	r3, .L575+12
 10764 0082 0122     		movs	r2, #1
 10765 0084 1A70     		strb	r2, [r3]
2716:bluetooth_rxtx.c **** 					bt_stream_rx();
 10766              		.loc 1 2716 0
 10767 0086 FFF7FEFF 		bl	bt_stream_rx
2717:bluetooth_rxtx.c **** 					break;
 10768              		.loc 1 2717 0
 10769 008a 44E0     		b	.L556
 10770              	.L566:
2718:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2719:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 10771              		.loc 1 2719 0
 10772 008c 254B     		ldr	r3, .L575+12
 10773 008e 0822     		movs	r2, #8
 10774 0090 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccxwuSCA.s 			page 237


2720:bluetooth_rxtx.c **** 					bt_stream_rx();
 10775              		.loc 1 2720 0
 10776 0092 FFF7FEFF 		bl	bt_stream_rx
2721:bluetooth_rxtx.c **** 					break;
 10777              		.loc 1 2721 0
 10778 0096 3EE0     		b	.L556
 10779              	.L567:
2722:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2723:bluetooth_rxtx.c **** 					bt_follow_le();
 10780              		.loc 1 2723 0
 10781 0098 FFF7FEFF 		bl	bt_follow_le
2724:bluetooth_rxtx.c **** 					break;
 10782              		.loc 1 2724 0
 10783 009c 3BE0     		b	.L556
 10784              	.L568:
2725:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2726:bluetooth_rxtx.c **** 					bt_promisc_le();
 10785              		.loc 1 2726 0
 10786 009e FFF7FEFF 		bl	bt_promisc_le
2727:bluetooth_rxtx.c **** 					break;
 10787              		.loc 1 2727 0
 10788 00a2 38E0     		b	.L556
 10789              	.L570:
2728:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2729:bluetooth_rxtx.c **** 					bt_slave_le();
 10790              		.loc 1 2729 0
 10791 00a4 FFF7FEFF 		bl	bt_slave_le
2730:bluetooth_rxtx.c **** 					break;
 10792              		.loc 1 2730 0
 10793 00a8 35E0     		b	.L556
 10794              	.L561:
2731:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2732:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 10795              		.loc 1 2732 0
 10796 00aa 1E4B     		ldr	r3, .L575+12
 10797 00ac 0322     		movs	r2, #3
 10798 00ae 1A70     		strb	r2, [r3]
2733:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 10799              		.loc 1 2733 0
 10800 00b0 1D48     		ldr	r0, .L575+16
 10801 00b2 1E49     		ldr	r1, .L575+20
 10802 00b4 FFF7FEFF 		bl	cc2400_txtest
2734:bluetooth_rxtx.c **** 					break;
 10803              		.loc 1 2734 0
 10804 00b8 2DE0     		b	.L556
 10805              	.L563:
2735:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2736:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 10806              		.loc 1 2736 0
 10807 00ba 1A4B     		ldr	r3, .L575+12
 10808 00bc 0522     		movs	r2, #5
 10809 00be 1A70     		strb	r2, [r3]
2737:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 10810              		.loc 1 2737 0
 10811 00c0 1A48     		ldr	r0, .L575+20
 10812 00c2 FFF7FEFF 		bl	cc2400_rangetest
2738:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
ARM GAS  /tmp/ccxwuSCA.s 			page 238


 10813              		.loc 1 2738 0
 10814 00c6 174B     		ldr	r3, .L575+12
 10815 00c8 0022     		movs	r2, #0
 10816 00ca 1A70     		strb	r2, [r3]
2739:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 10817              		.loc 1 2739 0
 10818 00cc 144B     		ldr	r3, .L575+8
 10819 00ce 1B78     		ldrb	r3, [r3]
 10820 00d0 DBB2     		uxtb	r3, r3
 10821 00d2 052B     		cmp	r3, #5
 10822 00d4 03D1     		bne	.L572
2740:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 10823              		.loc 1 2740 0
 10824 00d6 124B     		ldr	r3, .L575+8
 10825 00d8 0022     		movs	r2, #0
 10826 00da 1A70     		strb	r2, [r3]
2741:bluetooth_rxtx.c **** 					break;
 10827              		.loc 1 2741 0
 10828 00dc 1BE0     		b	.L556
 10829              	.L572:
 10830 00de 1AE0     		b	.L556
 10831              	.L564:
2742:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2743:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 10832              		.loc 1 2743 0
 10833 00e0 104B     		ldr	r3, .L575+12
 10834 00e2 0622     		movs	r2, #6
 10835 00e4 1A70     		strb	r2, [r3]
2744:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 10836              		.loc 1 2744 0
 10837 00e6 1148     		ldr	r0, .L575+20
 10838 00e8 FFF7FEFF 		bl	cc2400_repeater
2745:bluetooth_rxtx.c **** 					break;
 10839              		.loc 1 2745 0
 10840 00ec 13E0     		b	.L556
 10841              	.L562:
2746:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2747:bluetooth_rxtx.c **** 					specan();
 10842              		.loc 1 2747 0
 10843 00ee FFF7FEFF 		bl	specan
2748:bluetooth_rxtx.c **** 					break;
 10844              		.loc 1 2748 0
 10845 00f2 10E0     		b	.L556
 10846              	.L565:
2749:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2750:bluetooth_rxtx.c **** 					led_specan();
 10847              		.loc 1 2750 0
 10848 00f4 FFF7FEFF 		bl	led_specan
2751:bluetooth_rxtx.c **** 					break;
 10849              		.loc 1 2751 0
 10850 00f8 0DE0     		b	.L556
 10851              	.L571:
2752:bluetooth_rxtx.c **** 				case MODE_EGO:
2753:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 10852              		.loc 1 2753 0
 10853 00fa 0A4B     		ldr	r3, .L575+12
 10854 00fc 0D22     		movs	r2, #13
ARM GAS  /tmp/ccxwuSCA.s 			page 239


 10855 00fe 1A70     		strb	r2, [r3]
2754:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 10856              		.loc 1 2754 0
 10857 0100 0B4B     		ldr	r3, .L575+24
 10858 0102 1B78     		ldrb	r3, [r3]
 10859 0104 DBB2     		uxtb	r3, r3
 10860 0106 1846     		mov	r0, r3
 10861 0108 FFF7FEFF 		bl	ego_main
2755:bluetooth_rxtx.c **** 					break;
 10862              		.loc 1 2755 0
 10863 010c 03E0     		b	.L556
 10864              	.L558:
2756:bluetooth_rxtx.c **** 				case MODE_IDLE:
2757:bluetooth_rxtx.c **** 					cc2400_idle();
 10865              		.loc 1 2757 0
 10866 010e FFF7FEFF 		bl	cc2400_idle
2758:bluetooth_rxtx.c **** 					break;
 10867              		.loc 1 2758 0
 10868 0112 00E0     		b	.L556
 10869              	.L574:
2759:bluetooth_rxtx.c **** 				default:
2760:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2761:bluetooth_rxtx.c **** 					break;
 10870              		.loc 1 2761 0
 10871 0114 00BF     		nop
 10872              	.L556:
2762:bluetooth_rxtx.c **** 			}
2763:bluetooth_rxtx.c **** 	}
 10873              		.loc 1 2763 0 discriminator 1
 10874 0116 7CE7     		b	.L573
 10875              	.L576:
 10876              		.align	2
 10877              	.L575:
 10878 0118 00000000 		.word	vendor_request_handler
 10879 011c 00000000 		.word	clkn
 10880 0120 00000000 		.word	requested_mode
 10881 0124 00000000 		.word	mode
 10882 0128 00000000 		.word	modulation
 10883 012c 00000000 		.word	channel
 10884 0130 00000000 		.word	ego_mode
 10885              		.cfi_endproc
 10886              	.LFE47:
 10888              		.bss
 10889              		.align	2
 10890              	restart_jamming.4723:
 10891 00d4 00000000 		.space	4
 10892              		.align	2
 10893              	first_ts.4821:
 10894 00d8 00000000 		.space	4
 10895              		.align	2
 10896              	prev_clk.4827:
 10897 00dc 00000000 		.space	4
 10898              		.text
 10899              	.Letext0:
 10900              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 10901              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 10902              		.file 4 "../common/ubertooth.h"
ARM GAS  /tmp/ccxwuSCA.s 			page 240


 10903              		.file 5 "bluetooth_le.h"
 10904              		.file 6 "bluetooth.h"
 10905              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccxwuSCA.s 			page 241


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccxwuSCA.s:19     .data:0000000000000000 $d
     /tmp/ccxwuSCA.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccxwuSCA.s:29     .rodata:0000000000000000 $d
     /tmp/ccxwuSCA.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccxwuSCA.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccxwuSCA.s:80     .rodata:000000000000002c payload
     /tmp/ccxwuSCA.s:104    .rodata:0000000000000040 whitening
     /tmp/ccxwuSCA.s:235    .rodata:00000000000000c0 whitening_index
     /tmp/ccxwuSCA.s:279    .rodata:00000000000000e8 hop_interval_lut
     /tmp/ccxwuSCA.s:320    .rodata:0000000000000110 whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccxwuSCA.s:806    .rodata:0000000000000890 compile_info
                            *COM*:0000000000000001 device_index
                            *COM*:0000000000000004 clkn
     /tmp/ccxwuSCA.s:815    .bss:0000000000000000 hop_mode
     /tmp/ccxwuSCA.s:816    .bss:0000000000000000 $d
     /tmp/ccxwuSCA.s:820    .bss:0000000000000001 do_hop
     /tmp/ccxwuSCA.s:825    .bss:0000000000000002 cs_no_squelch
     /tmp/ccxwuSCA.s:831    .data:0000000000000004 cs_threshold_req
     /tmp/ccxwuSCA.s:836    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/ccxwuSCA.s:846    .bss:0000000000000004 hop_direct_channel
     /tmp/ccxwuSCA.s:852    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/ccxwuSCA.s:862    .bss:000000000000000c idle_buf_channel
     /tmp/ccxwuSCA.s:868    .bss:000000000000000e active_buf_channel
     /tmp/ccxwuSCA.s:874    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccxwuSCA.s:883    .data:0000000000000008 active_rxbuf
     /tmp/ccxwuSCA.s:889    .data:000000000000000c idle_rxbuf
     /tmp/ccxwuSCA.s:895    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccxwuSCA.s:914    .bss:0000000000000018 le_jam_count
     /tmp/ccxwuSCA.s:920    .bss:000000000000001c data_cb
     /tmp/ccxwuSCA.s:926    .bss:0000000000000020 packet_cb
     /tmp/ccxwuSCA.s:932    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/ccxwuSCA.s:938    .bss:00000000000000c2 mode
     /tmp/ccxwuSCA.s:943    .bss:00000000000000c3 requested_mode
     /tmp/ccxwuSCA.s:948    .bss:00000000000000c4 jam_mode
     /tmp/ccxwuSCA.s:953    .bss:00000000000000c5 ego_mode
     /tmp/ccxwuSCA.s:958    .bss:00000000000000c6 modulation
     /tmp/ccxwuSCA.s:965    .data:0000000000000054 channel
     /tmp/ccxwuSCA.s:972    .bss:00000000000000c8 requested_channel
     /tmp/ccxwuSCA.s:978    .bss:00000000000000ca saved_request
ARM GAS  /tmp/ccxwuSCA.s 			page 242


     /tmp/ccxwuSCA.s:985    .data:0000000000000056 low_freq
     /tmp/ccxwuSCA.s:991    .data:0000000000000058 high_freq
     /tmp/ccxwuSCA.s:996    .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccxwuSCA.s:1007   .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/ccxwuSCA.s:1014   .bss:00000000000000cd rssi_count
     /tmp/ccxwuSCA.s:1020   .bss:00000000000000d0 rssi_sum
     /tmp/ccxwuSCA.s:1023   .text.rssi_reset:0000000000000000 $t
     /tmp/ccxwuSCA.s:1027   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccxwuSCA.s:1067   .text.rssi_reset:0000000000000024 $d
     /tmp/ccxwuSCA.s:1075   .text.rssi_add:0000000000000000 $t
     /tmp/ccxwuSCA.s:1079   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccxwuSCA.s:1145   .text.rssi_add:000000000000005c $d
     /tmp/ccxwuSCA.s:1153   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccxwuSCA.s:1157   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccxwuSCA.s:1251   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccxwuSCA.s:1260   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccxwuSCA.s:1264   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccxwuSCA.s:1346   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccxwuSCA.s:1352   .text.enqueue:0000000000000000 $t
     /tmp/ccxwuSCA.s:1356   .text.enqueue:0000000000000000 enqueue
     /tmp/ccxwuSCA.s:1577   .text.enqueue:0000000000000154 $d
     /tmp/ccxwuSCA.s:1591   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccxwuSCA.s:1596   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccxwuSCA.s:1777   .text.enqueue_with_ts:000000000000010c $d
     /tmp/ccxwuSCA.s:1784   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccxwuSCA.s:1788   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccxwuSCA.s:1863   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccxwuSCA.s:1871   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccxwuSCA.s:1875   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccxwuSCA.s:1916   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccxwuSCA.s:1924   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccxwuSCA.s:1928   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccxwuSCA.s:1969   .text.cs_trigger_disable:000000000000002c $d
     /tmp/ccxwuSCA.s:1981   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccxwuSCA.s:1985   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccxwuSCA.s:2022   .text.vendor_request_handler:0000000000000024 $d
     /tmp/ccxwuSCA.s:2083   .text.vendor_request_handler:0000000000000118 $t
     /tmp/ccxwuSCA.s:2483   .text.vendor_request_handler:00000000000003a8 $d
     /tmp/ccxwuSCA.s:2493   .text.vendor_request_handler:00000000000003c8 $t
     /tmp/ccxwuSCA.s:2877   .text.vendor_request_handler:0000000000000614 $d
     /tmp/ccxwuSCA.s:2895   .text.vendor_request_handler:0000000000000654 $t
     /tmp/ccxwuSCA.s:3285   .text.vendor_request_handler:00000000000008f4 $d
     /tmp/ccxwuSCA.s:3297   .text.vendor_request_handler:000000000000091c $t
     /tmp/ccxwuSCA.s:6511   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccxwuSCA.s:3581   .text.vendor_request_handler:0000000000000ad4 $d
     /tmp/ccxwuSCA.s:3591   .text.clkn_init:0000000000000000 $t
     /tmp/ccxwuSCA.s:3595   .text.clkn_init:0000000000000000 clkn_init
     /tmp/ccxwuSCA.s:3646   .text.clkn_init:0000000000000038 $d
     /tmp/ccxwuSCA.s:3656   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccxwuSCA.s:3661   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
ARM GAS  /tmp/ccxwuSCA.s 			page 243


     /tmp/ccxwuSCA.s:3830   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/ccxwuSCA.s:3842   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccxwuSCA.s:3847   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccxwuSCA.s:3889   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/ccxwuSCA.s:3903   .text.msleep:0000000000000000 $t
     /tmp/ccxwuSCA.s:3907   .text.msleep:0000000000000000 msleep
     /tmp/ccxwuSCA.s:3976   .text.msleep:0000000000000070 $d
     /tmp/ccxwuSCA.s:3984   .text.dma_init:0000000000000000 $t
     /tmp/ccxwuSCA.s:3988   .text.dma_init:0000000000000000 dma_init
     /tmp/ccxwuSCA.s:4162   .text.dma_init:0000000000000104 $d
     /tmp/ccxwuSCA.s:4197   .text.dma_init_le:0000000000000000 $t
     /tmp/ccxwuSCA.s:4201   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccxwuSCA.s:4406   .text.dma_init_le:0000000000000134 $d
     /tmp/ccxwuSCA.s:4438   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccxwuSCA.s:4443   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccxwuSCA.s:4546   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/ccxwuSCA.s:4566   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccxwuSCA.s:4571   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccxwuSCA.s:4594   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccxwuSCA.s:4606   .text.DMA_IRQHandler:0000000000000048 $t
     /tmp/ccxwuSCA.s:4618   .text.DMA_IRQHandler:0000000000000050 $d
     /tmp/ccxwuSCA.s:4623   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccxwuSCA.s:4627   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccxwuSCA.s:4680   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccxwuSCA.s:4690   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccxwuSCA.s:4694   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccxwuSCA.s:4792   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccxwuSCA.s:4811   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccxwuSCA.s:4815   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccxwuSCA.s:4868   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccxwuSCA.s:4875   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccxwuSCA.s:4879   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccxwuSCA.s:4993   .text.cc2400_rx:00000000000000b0 $d
     /tmp/ccxwuSCA.s:5000   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccxwuSCA.s:5004   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccxwuSCA.s:5139   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccxwuSCA.s:5146   .text.le_transmit:0000000000000000 $t
     /tmp/ccxwuSCA.s:5151   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccxwuSCA.s:5544   .text.le_transmit:00000000000002d4 $d
     /tmp/ccxwuSCA.s:5557   .text.le_jam:0000000000000000 $t
     /tmp/ccxwuSCA.s:5562   .text.le_jam:0000000000000000 le_jam
     /tmp/ccxwuSCA.s:5645   .text.le_jam:000000000000008c $d
     /tmp/ccxwuSCA.s:5651   .text.hop:0000000000000000 $t
     /tmp/ccxwuSCA.s:5656   .text.hop:0000000000000000 hop
     /tmp/ccxwuSCA.s:5823   .text.hop:000000000000010c $d
     /tmp/ccxwuSCA.s:5834   .text.cc2400_spi_rev:0000000000000000 $t
     /tmp/ccxwuSCA.s:5839   .text.cc2400_spi_rev:0000000000000000 cc2400_spi_rev
     /tmp/ccxwuSCA.s:5936   .text.cc2400_spi_rev:000000000000007c $d
     /tmp/ccxwuSCA.s:5943   .text.cc2400_get_rev:0000000000000000 $t
     /tmp/ccxwuSCA.s:5948   .text.cc2400_get_rev:0000000000000000 cc2400_get_rev
     /tmp/ccxwuSCA.s:5990   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccxwuSCA.s:5995   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccxwuSCA.s:6432   .text.bt_stream_rx:00000000000002e8 $d
     /tmp/ccxwuSCA.s:6450   .text.bt_stream_rx:0000000000000324 $t
     /tmp/ccxwuSCA.s:6498   .text.bt_stream_rx:000000000000036c $d
     /tmp/ccxwuSCA.s:6507   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccxwuSCA.s:6555   .text.le_set_access_address:0000000000000030 $d
ARM GAS  /tmp/ccxwuSCA.s 			page 244


     /tmp/ccxwuSCA.s:6560   .text.reset_le:0000000000000000 $t
     /tmp/ccxwuSCA.s:6565   .text.reset_le:0000000000000000 reset_le
     /tmp/ccxwuSCA.s:6661   .text.reset_le:0000000000000084 $d
     /tmp/ccxwuSCA.s:6670   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccxwuSCA.s:6675   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccxwuSCA.s:6701   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccxwuSCA.s:6706   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccxwuSCA.s:6711   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccxwuSCA.s:7137   .text.bt_generic_le:00000000000002a0 $d
     /tmp/ccxwuSCA.s:7163   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccxwuSCA.s:7168   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccxwuSCA.s:7516   .text.bt_le_sync:0000000000000228 $d
     /tmp/ccxwuSCA.s:7537   .text.bt_le_sync:0000000000000270 $t
     /tmp/ccxwuSCA.s:7935   .text.bt_le_sync:0000000000000508 $d
     /tmp/ccxwuSCA.s:10890  .bss:00000000000000d4 restart_jamming.4723
     /tmp/ccxwuSCA.s:7960   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccxwuSCA.s:7965   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccxwuSCA.s:8255   .text.cb_follow_le:00000000000001b8 $d
     /tmp/ccxwuSCA.s:8268   .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccxwuSCA.s:8273   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccxwuSCA.s:8651   .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccxwuSCA.s:8661   .text.bt_follow_le:0000000000000000 $t
     /tmp/ccxwuSCA.s:8666   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccxwuSCA.s:8696   .text.bt_follow_le:000000000000001c $d
     /tmp/ccxwuSCA.s:8703   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccxwuSCA.s:8708   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccxwuSCA.s:8801   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccxwuSCA.s:8806   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccxwuSCA.s:9015   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccxwuSCA.s:10893  .bss:00000000000000d8 first_ts.4821
     /tmp/ccxwuSCA.s:9034   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccxwuSCA.s:9039   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccxwuSCA.s:9174   .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccxwuSCA.s:10896  .bss:00000000000000dc prev_clk.4827
     /tmp/ccxwuSCA.s:9191   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccxwuSCA.s:9196   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccxwuSCA.s:9311   .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccxwuSCA.s:9319   .text.see_aa:0000000000000000 $t
     /tmp/ccxwuSCA.s:9324   .text.see_aa:0000000000000000 see_aa
     /tmp/ccxwuSCA.s:9445   .text.see_aa:00000000000000a4 $d
     /tmp/ccxwuSCA.s:9457   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccxwuSCA.s:9462   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccxwuSCA.s:9914   .text.cb_le_promisc:00000000000002e0 $d
     /tmp/ccxwuSCA.s:9930   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccxwuSCA.s:9935   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccxwuSCA.s:10017  .text.bt_promisc_le:000000000000006c $d
     /tmp/ccxwuSCA.s:10045  .text.bt_slave_le:0000000000000000 $t
     /tmp/ccxwuSCA.s:10050  .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccxwuSCA.s:10185  .text.bt_slave_le:00000000000000dc $d
     /tmp/ccxwuSCA.s:10196  .text.specan:0000000000000000 $t
     /tmp/ccxwuSCA.s:10201  .text.specan:0000000000000000 specan
     /tmp/ccxwuSCA.s:10417  .text.specan:0000000000000178 $d
     /tmp/ccxwuSCA.s:10435  .text.led_specan:0000000000000000 $t
     /tmp/ccxwuSCA.s:10440  .text.led_specan:0000000000000000 led_specan
     /tmp/ccxwuSCA.s:10676  .text.led_specan:0000000000000178 $d
     /tmp/ccxwuSCA.s:10689  .text.main:0000000000000000 $t
     /tmp/ccxwuSCA.s:10694  .text.main:0000000000000000 main
ARM GAS  /tmp/ccxwuSCA.s 			page 245


     /tmp/ccxwuSCA.s:10738  .text.main:000000000000003c $d
     /tmp/ccxwuSCA.s:10752  .text.main:0000000000000074 $t
     /tmp/ccxwuSCA.s:10878  .text.main:0000000000000118 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
dio_ssp_init
rbit
btle_crcgen_lut
handle_usb
memset
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
