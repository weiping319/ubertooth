ARM GAS  /tmp/ccQUMSla.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccQUMSla.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	payload:
  81 002c CA       		.byte	-54
  82 002d AA       		.byte	-86
  83 002e AA       		.byte	-86
  84 002f AA       		.byte	-86
  85 0030 AA       		.byte	-86
  86 0031 AA       		.byte	-86
  87 0032 AA       		.byte	-86
  88 0033 AA       		.byte	-86
  89 0034 AA       		.byte	-86
  90 0035 AA       		.byte	-86
  91 0036 AA       		.byte	-86
  92 0037 AA       		.byte	-86
  93 0038 AA       		.byte	-86
  94 0039 AA       		.byte	-86
  95 003a AA       		.byte	-86
  96 003b AA       		.byte	-86
  97 003c AA       		.byte	-86
  98 003d AA       		.byte	-86
  99 003e AA       		.byte	-86
 100 003f AA       		.byte	-86
 101              		.align	2
 104              	whitening:
 105 0040 01       		.byte	1
 106 0041 01       		.byte	1
 107 0042 01       		.byte	1
 108 0043 01       		.byte	1
 109 0044 00       		.byte	0
 110 0045 01       		.byte	1
 111 0046 00       		.byte	0
 112 0047 01       		.byte	1
 113 0048 00       		.byte	0
 114 0049 01       		.byte	1
 115 004a 00       		.byte	0
 116 004b 00       		.byte	0
 117 004c 00       		.byte	0
 118 004d 00       		.byte	0
 119 004e 01       		.byte	1
 120 004f 00       		.byte	0
 121 0050 01       		.byte	1
 122 0051 01       		.byte	1
 123 0052 00       		.byte	0
 124 0053 01       		.byte	1
ARM GAS  /tmp/ccQUMSla.s 			page 3


 125 0054 01       		.byte	1
 126 0055 01       		.byte	1
 127 0056 01       		.byte	1
 128 0057 00       		.byte	0
 129 0058 00       		.byte	0
 130 0059 01       		.byte	1
 131 005a 01       		.byte	1
 132 005b 01       		.byte	1
 133 005c 00       		.byte	0
 134 005d 00       		.byte	0
 135 005e 01       		.byte	1
 136 005f 00       		.byte	0
 137 0060 01       		.byte	1
 138 0061 00       		.byte	0
 139 0062 01       		.byte	1
 140 0063 01       		.byte	1
 141 0064 00       		.byte	0
 142 0065 00       		.byte	0
 143 0066 01       		.byte	1
 144 0067 01       		.byte	1
 145 0068 00       		.byte	0
 146 0069 00       		.byte	0
 147 006a 00       		.byte	0
 148 006b 00       		.byte	0
 149 006c 00       		.byte	0
 150 006d 01       		.byte	1
 151 006e 01       		.byte	1
 152 006f 00       		.byte	0
 153 0070 01       		.byte	1
 154 0071 01       		.byte	1
 155 0072 00       		.byte	0
 156 0073 01       		.byte	1
 157 0074 00       		.byte	0
 158 0075 01       		.byte	1
 159 0076 01       		.byte	1
 160 0077 01       		.byte	1
 161 0078 00       		.byte	0
 162 0079 01       		.byte	1
 163 007a 00       		.byte	0
 164 007b 00       		.byte	0
 165 007c 00       		.byte	0
 166 007d 01       		.byte	1
 167 007e 01       		.byte	1
 168 007f 00       		.byte	0
 169 0080 00       		.byte	0
 170 0081 01       		.byte	1
 171 0082 00       		.byte	0
 172 0083 00       		.byte	0
 173 0084 00       		.byte	0
 174 0085 01       		.byte	1
 175 0086 00       		.byte	0
 176 0087 00       		.byte	0
 177 0088 00       		.byte	0
 178 0089 00       		.byte	0
 179 008a 00       		.byte	0
 180 008b 00       		.byte	0
 181 008c 01       		.byte	1
ARM GAS  /tmp/ccQUMSla.s 			page 4


 182 008d 00       		.byte	0
 183 008e 00       		.byte	0
 184 008f 01       		.byte	1
 185 0090 00       		.byte	0
 186 0091 00       		.byte	0
 187 0092 01       		.byte	1
 188 0093 01       		.byte	1
 189 0094 00       		.byte	0
 190 0095 01       		.byte	1
 191 0096 00       		.byte	0
 192 0097 00       		.byte	0
 193 0098 01       		.byte	1
 194 0099 01       		.byte	1
 195 009a 01       		.byte	1
 196 009b 01       		.byte	1
 197 009c 00       		.byte	0
 198 009d 01       		.byte	1
 199 009e 01       		.byte	1
 200 009f 01       		.byte	1
 201 00a0 00       		.byte	0
 202 00a1 00       		.byte	0
 203 00a2 00       		.byte	0
 204 00a3 00       		.byte	0
 205 00a4 01       		.byte	1
 206 00a5 01       		.byte	1
 207 00a6 01       		.byte	1
 208 00a7 01       		.byte	1
 209 00a8 01       		.byte	1
 210 00a9 01       		.byte	1
 211 00aa 01       		.byte	1
 212 00ab 00       		.byte	0
 213 00ac 00       		.byte	0
 214 00ad 00       		.byte	0
 215 00ae 01       		.byte	1
 216 00af 01       		.byte	1
 217 00b0 01       		.byte	1
 218 00b1 00       		.byte	0
 219 00b2 01       		.byte	1
 220 00b3 01       		.byte	1
 221 00b4 00       		.byte	0
 222 00b5 00       		.byte	0
 223 00b6 00       		.byte	0
 224 00b7 01       		.byte	1
 225 00b8 00       		.byte	0
 226 00b9 01       		.byte	1
 227 00ba 00       		.byte	0
 228 00bb 00       		.byte	0
 229 00bc 01       		.byte	1
 230 00bd 00       		.byte	0
 231 00be 01       		.byte	1
 232 00bf 00       		.align	2
 235              	whitening_index:
 236 00c0 46       		.byte	70
 237 00c1 3E       		.byte	62
 238 00c2 78       		.byte	120
 239 00c3 6F       		.byte	111
 240 00c4 4D       		.byte	77
ARM GAS  /tmp/ccQUMSla.s 			page 5


 241 00c5 2E       		.byte	46
 242 00c6 0F       		.byte	15
 243 00c7 65       		.byte	101
 244 00c8 42       		.byte	66
 245 00c9 27       		.byte	39
 246 00ca 1F       		.byte	31
 247 00cb 1A       		.byte	26
 248 00cc 50       		.byte	80
 249 00cd 53       		.byte	83
 250 00ce 7D       		.byte	125
 251 00cf 59       		.byte	89
 252 00d0 0A       		.byte	10
 253 00d1 23       		.byte	35
 254 00d2 08       		.byte	8
 255 00d3 36       		.byte	54
 256 00d4 7A       		.byte	122
 257 00d5 11       		.byte	17
 258 00d6 21       		.byte	33
 259 00d7 00       		.byte	0
 260 00d8 3A       		.byte	58
 261 00d9 73       		.byte	115
 262 00da 06       		.byte	6
 263 00db 5E       		.byte	94
 264 00dc 56       		.byte	86
 265 00dd 31       		.byte	49
 266 00de 34       		.byte	52
 267 00df 14       		.byte	20
 268 00e0 28       		.byte	40
 269 00e1 1B       		.byte	27
 270 00e2 54       		.byte	84
 271 00e3 5A       		.byte	90
 272 00e4 3F       		.byte	63
 273 00e5 70       		.byte	112
 274 00e6 2F       		.byte	47
 275 00e7 66       		.byte	102
 276              		.align	2
 279              	hop_interval_lut:
 280 00e8 00       		.byte	0
 281 00e9 01       		.byte	1
 282 00ea 13       		.byte	19
 283 00eb 19       		.byte	25
 284 00ec 1C       		.byte	28
 285 00ed 0F       		.byte	15
 286 00ee 1F       		.byte	31
 287 00ef 10       		.byte	16
 288 00f0 0E       		.byte	14
 289 00f1 21       		.byte	33
 290 00f2 1A       		.byte	26
 291 00f3 1B       		.byte	27
 292 00f4 22       		.byte	34
 293 00f5 14       		.byte	20
 294 00f6 08       		.byte	8
 295 00f7 05       		.byte	5
 296 00f8 07       		.byte	7
 297 00f9 18       		.byte	24
 298 00fa 23       		.byte	35
 299 00fb 02       		.byte	2
ARM GAS  /tmp/ccQUMSla.s 			page 6


 300 00fc 0D       		.byte	13
 301 00fd 1E       		.byte	30
 302 00fe 20       		.byte	32
 303 00ff 1D       		.byte	29
 304 0100 11       		.byte	17
 305 0101 03       		.byte	3
 306 0102 0A       		.byte	10
 307 0103 0B       		.byte	11
 308 0104 04       		.byte	4
 309 0105 17       		.byte	23
 310 0106 15       		.byte	21
 311 0107 06       		.byte	6
 312 0108 16       		.byte	22
 313 0109 09       		.byte	9
 314 010a 0C       		.byte	12
 315 010b 12       		.byte	18
 316 010c 24       		.byte	36
 317 010d 000000   		.align	2
 320              	whitening_word:
 321 0110 40B2BCC3 		.word	-1011043776
 322 0114 1F374A5F 		.word	1598699295
 323 0118 85F69C9A 		.word	-1700989307
 324 011c C1D6C544 		.word	1153816257
 325 0120 2059DEE1 		.word	-505521888
 326 0124 8F1BA5AF 		.word	-1348134001
 327 0128 427B4ECD 		.word	-850494654
 328 012c 60EB6222 		.word	576908128
 329 0130 902CEFF0 		.word	-252760944
 330 0134 C78DD257 		.word	1473416647
 331 0138 A13DA766 		.word	1722236321
 332 013c B0753111 		.word	288454064
 333 0140 8940B2BC 		.word	-1129168759
 334 0144 C31F374A 		.word	1245126595
 335 0148 5F85F69C 		.word	-1661565601
 336 014c 9AC1D6C5 		.word	-975781478
 337 0150 442059DE 		.word	-564584380
 338 0154 E18F1BA5 		.word	-1524920351
 339 0158 AF427B4E 		.word	1316700847
 340 015c CD60EB62 		.word	1659592909
 341 0160 22902CEF 		.word	-282292190
 342 0164 F0C78DD2 		.word	-762460176
 343 0168 57A13DA7 		.word	-1489133225
 344 016c 66B07531 		.word	829796454
 345 0170 D257A13D 		.word	1033983954
 346 0174 A766B075 		.word	1974494887
 347 0178 31114896 		.word	-1773661903
 348 017c 77F8E346 		.word	1189345399
 349 0180 E9ABD09E 		.word	-1630491671
 350 0184 5333D8BA 		.word	-1160236205
 351 0188 980824CB 		.word	-886830952
 352 018c 3BFC71A3 		.word	-1552810949
 353 0190 F45568CF 		.word	-815245836
 354 0194 A9196C5D 		.word	1567365545
 355 0198 4C0492E5 		.word	-443415476
 356 019c 1DFEB851 		.word	1371078173
 357 01a0 1BA5AF42 		.word	1118807323
 358 01a4 7B4ECD60 		.word	1624067707
ARM GAS  /tmp/ccQUMSla.s 			page 7


 359 01a8 EB622290 		.word	-1876794645
 360 01ac 2CEFF0C7 		.word	-940511444
 361 01b0 8DD257A1 		.word	-1588079987
 362 01b4 3DA766B0 		.word	-1335449795
 363 01b8 75311148 		.word	1209086325
 364 01bc 9677F8E3 		.word	-470255722
 365 01c0 46E9ABD0 		.word	-794039994
 366 01c4 9E5333D8 		.word	-667724898
 367 01c8 BA980824 		.word	604543162
 368 01cc CB3BFC71 		.word	1912355787
 369 01d0 6479873F 		.word	1065843044
 370 01d4 6E94BE0A 		.word	180261998
 371 01d8 ED393583 		.word	-2093663763
 372 01dc AD8B8940 		.word	1082756013
 373 01e0 B2BCC31F 		.word	532921522
 374 01e4 374A5F85 		.word	-2057352649
 375 01e8 F69C9AC1 		.word	-1046831882
 376 01ec D6C54420 		.word	541378006
 377 01f0 59DEE18F 		.word	-1881022887
 378 01f4 1BA5AF42 		.word	1118807323
 379 01f8 7B4ECD60 		.word	1624067707
 380 01fc EB622290 		.word	-1876794645
 381 0200 AD8B8940 		.word	1082756013
 382 0204 B2BCC31F 		.word	532921522
 383 0208 374A5F85 		.word	-2057352649
 384 020c F69C9AC1 		.word	-1046831882
 385 0210 D6C54420 		.word	541378006
 386 0214 59DEE18F 		.word	-1881022887
 387 0218 1BA5AF42 		.word	1118807323
 388 021c 7B4ECD60 		.word	1624067707
 389 0220 EB622290 		.word	-1876794645
 390 0224 2CEFF0C7 		.word	-940511444
 391 0228 8DD257A1 		.word	-1588079987
 392 022c 3DA766B0 		.word	-1335449795
 393 0230 F69C9AC1 		.word	-1046831882
 394 0234 D6C54420 		.word	541378006
 395 0238 59DEE18F 		.word	-1881022887
 396 023c 1BA5AF42 		.word	1118807323
 397 0240 7B4ECD60 		.word	1624067707
 398 0244 EB622290 		.word	-1876794645
 399 0248 2CEFF0C7 		.word	-940511444
 400 024c 8DD257A1 		.word	-1588079987
 401 0250 3DA766B0 		.word	-1335449795
 402 0254 75311148 		.word	1209086325
 403 0258 9677F8E3 		.word	-470255722
 404 025c 46E9ABD0 		.word	-794039994
 405 0260 3F6E94BE 		.word	-1097568705
 406 0264 0AED3935 		.word	892988682
 407 0268 83AD8B89 		.word	-1987334781
 408 026c 40B2BCC3 		.word	-1011043776
 409 0270 1F374A5F 		.word	1598699295
 410 0274 85F69C9A 		.word	-1700989307
 411 0278 C1D6C544 		.word	1153816257
 412 027c 2059DEE1 		.word	-505521888
 413 0280 8F1BA5AF 		.word	-1348134001
 414 0284 427B4ECD 		.word	-850494654
 415 0288 60EB6222 		.word	576908128
ARM GAS  /tmp/ccQUMSla.s 			page 8


 416 028c 902CEFF0 		.word	-252760944
 417 0290 0824CB3B 		.word	1003168776
 418 0294 FC71A3F4 		.word	-190615044
 419 0298 5568CFA9 		.word	-1446025131
 420 029c 196C5D4C 		.word	1281190937
 421 02a0 0492E51D 		.word	501584388
 422 02a4 FEB851FA 		.word	-95307522
 423 02a8 2AB4E7D4 		.word	-723012566
 424 02ac 0CB62E26 		.word	640595468
 425 02b0 02C9F20E 		.word	250792194
 426 02b4 7FDC287D 		.word	2099829887
 427 02b8 15DA736A 		.word	1785977365
 428 02bc 065B1713 		.word	320297734
 429 02c0 C1D6C544 		.word	1153816257
 430 02c4 2059DEE1 		.word	-505521888
 431 02c8 8F1BA5AF 		.word	-1348134001
 432 02cc 427B4ECD 		.word	-850494654
 433 02d0 60EB6222 		.word	576908128
 434 02d4 902CEFF0 		.word	-252760944
 435 02d8 C78DD257 		.word	1473416647
 436 02dc A13DA766 		.word	1722236321
 437 02e0 B0753111 		.word	288454064
 438 02e4 489677F8 		.word	-126380472
 439 02e8 E346E9AB 		.word	-1410775325
 440 02ec D09E5333 		.word	861118160
 441 02f0 9AC1D6C5 		.word	-975781478
 442 02f4 442059DE 		.word	-564584380
 443 02f8 E18F1BA5 		.word	-1524920351
 444 02fc AF427B4E 		.word	1316700847
 445 0300 CD60EB62 		.word	1659592909
 446 0304 22902CEF 		.word	-282292190
 447 0308 F0C78DD2 		.word	-762460176
 448 030c 57A13DA7 		.word	-1489133225
 449 0310 66B07531 		.word	829796454
 450 0314 11489677 		.word	2006337553
 451 0318 F8E346E9 		.word	-381230088
 452 031c ABD09E53 		.word	1402917035
 453 0320 5333D8BA 		.word	-1160236205
 454 0324 980824CB 		.word	-886830952
 455 0328 3BFC71A3 		.word	-1552810949
 456 032c F45568CF 		.word	-815245836
 457 0330 A9196C5D 		.word	1567365545
 458 0334 4C0492E5 		.word	-443415476
 459 0338 1DFEB851 		.word	1371078173
 460 033c FA2AB4E7 		.word	-407622918
 461 0340 D40CB62E 		.word	783682772
 462 0344 2602C9F2 		.word	-221707738
 463 0348 0E7FDC28 		.word	685539086
 464 034c 7D15DA73 		.word	1943672189
 465 0350 2CEFF0C7 		.word	-940511444
 466 0354 8DD257A1 		.word	-1588079987
 467 0358 3DA766B0 		.word	-1335449795
 468 035c 75311148 		.word	1209086325
 469 0360 9677F8E3 		.word	-470255722
 470 0364 46E9ABD0 		.word	-794039994
 471 0368 9E5333D8 		.word	-667724898
 472 036c BA980824 		.word	604543162
ARM GAS  /tmp/ccQUMSla.s 			page 9


 473 0370 CB3BFC71 		.word	1912355787
 474 0374 A3F45568 		.word	1750463651
 475 0378 CFA9196C 		.word	1813621199
 476 037c 5D4C0492 		.word	-1845212067
 477 0380 E51DFEB8 		.word	-1191305755
 478 0384 51FA2AB4 		.word	-1272251823
 479 0388 E7D40CB6 		.word	-1240673049
 480 038c 2E2602C9 		.word	-922606034
 481 0390 F20E7FDC 		.word	-595652878
 482 0394 287D15DA 		.word	-636125912
 483 0398 736A065B 		.word	1527147123
 484 039c 17138164 		.word	1686180631
 485 03a0 79873F6E 		.word	1849657209
 486 03a4 94BE0AED 		.word	-318062956
 487 03a8 393583AD 		.word	-1383910087
 488 03ac 8B8940B2 		.word	-1304393333
 489 03b0 BE0AED39 		.word	971836094
 490 03b4 3583AD8B 		.word	-1951562955
 491 03b8 8940B2BC 		.word	-1129168759
 492 03bc C31F374A 		.word	1245126595
 493 03c0 5F85F69C 		.word	-1661565601
 494 03c4 9AC1D6C5 		.word	-975781478
 495 03c8 442059DE 		.word	-564584380
 496 03cc E18F1BA5 		.word	-1524920351
 497 03d0 AF427B4E 		.word	1316700847
 498 03d4 CD60EB62 		.word	1659592909
 499 03d8 22902CEF 		.word	-282292190
 500 03dc F0C78DD2 		.word	-762460176
 501 03e0 77F8E346 		.word	1189345399
 502 03e4 E9ABD09E 		.word	-1630491671
 503 03e8 5333D8BA 		.word	-1160236205
 504 03ec 980824CB 		.word	-886830952
 505 03f0 3BFC71A3 		.word	-1552810949
 506 03f4 F45568CF 		.word	-815245836
 507 03f8 A9196C5D 		.word	1567365545
 508 03fc 4C0492E5 		.word	-443415476
 509 0400 1DFEB851 		.word	1371078173
 510 0404 FA2AB4E7 		.word	-407622918
 511 0408 D40CB62E 		.word	783682772
 512 040c 2602C9F2 		.word	-221707738
 513 0410 D09E5333 		.word	861118160
 514 0414 D8BA9808 		.word	144227032
 515 0418 24CB3BFC 		.word	-63190236
 516 041c 71A3F455 		.word	1442095985
 517 0420 68CFA919 		.word	430559080
 518 0424 6C5D4C04 		.word	72113516
 519 0428 92E51DFE 		.word	-31595118
 520 042c B851FA2A 		.word	721047992
 521 0430 B4E7D40C 		.word	215279540
 522 0434 B62E2602 		.word	36056758
 523 0438 C9F20E7F 		.word	2131686089
 524 043c DC287D15 		.word	360523996
 525 0440 196C5D4C 		.word	1281190937
 526 0444 0492E51D 		.word	501584388
 527 0448 FEB851FA 		.word	-95307522
 528 044c 2AB4E7D4 		.word	-723012566
 529 0450 0CB62E26 		.word	640595468
ARM GAS  /tmp/ccQUMSla.s 			page 10


 530 0454 02C9F20E 		.word	250792194
 531 0458 7FDC287D 		.word	2099829887
 532 045c 15DA736A 		.word	1785977365
 533 0460 065B1713 		.word	320297734
 534 0464 81647987 		.word	-2022087551
 535 0468 3F6E94BE 		.word	-1097568705
 536 046c 0AED3935 		.word	892988682
 537 0470 427B4ECD 		.word	-850494654
 538 0474 60EB6222 		.word	576908128
 539 0478 902CEFF0 		.word	-252760944
 540 047c C78DD257 		.word	1473416647
 541 0480 A13DA766 		.word	1722236321
 542 0484 B0753111 		.word	288454064
 543 0488 489677F8 		.word	-126380472
 544 048c E346E9AB 		.word	-1410775325
 545 0490 D09E5333 		.word	861118160
 546 0494 D8BA9808 		.word	144227032
 547 0498 24CB3BFC 		.word	-63190236
 548 049c 71A3F455 		.word	1442095985
 549 04a0 8B8940B2 		.word	-1304393333
 550 04a4 BCC31F37 		.word	924828604
 551 04a8 4A5F85F6 		.word	-159031478
 552 04ac 9C9AC1D6 		.word	-691955044
 553 04b0 C5442059 		.word	1495286981
 554 04b4 DEE18F1B 		.word	462414302
 555 04b8 A5AF427B 		.word	2067967909
 556 04bc 4ECD60EB 		.word	-345977522
 557 04c0 6222902C 		.word	747643490
 558 04c4 EFF0C78D 		.word	-1916276497
 559 04c8 D257A13D 		.word	1033983954
 560 04cc A766B075 		.word	1974494887
 561 04d0 F45568CF 		.word	-815245836
 562 04d4 A9196C5D 		.word	1567365545
 563 04d8 4C0492E5 		.word	-443415476
 564 04dc 1DFEB851 		.word	1371078173
 565 04e0 FA2AB4E7 		.word	-407622918
 566 04e4 D40CB62E 		.word	783682772
 567 04e8 2602C9F2 		.word	-221707738
 568 04ec 0E7FDC28 		.word	685539086
 569 04f0 7D15DA73 		.word	1943672189
 570 04f4 6A065B17 		.word	391841386
 571 04f8 13816479 		.word	2036629779
 572 04fc 873F6E94 		.word	-1804714105
 573 0500 3DA766B0 		.word	-1335449795
 574 0504 75311148 		.word	1209086325
 575 0508 9677F8E3 		.word	-470255722
 576 050c 46E9ABD0 		.word	-794039994
 577 0510 9E5333D8 		.word	-667724898
 578 0514 BA980824 		.word	604543162
 579 0518 CB3BFC71 		.word	1912355787
 580 051c A3F45568 		.word	1750463651
 581 0520 CFA9196C 		.word	1813621199
 582 0524 5D4C0492 		.word	-1845212067
 583 0528 E51DFEB8 		.word	-1191305755
 584 052c 51FA2AB4 		.word	-1272251823
 585 0530 66B07531 		.word	829796454
 586 0534 11489677 		.word	2006337553
ARM GAS  /tmp/ccQUMSla.s 			page 11


 587 0538 F8E346E9 		.word	-381230088
 588 053c ABD09E53 		.word	1402917035
 589 0540 33D8BA98 		.word	-1732585421
 590 0544 0824CB3B 		.word	1003168776
 591 0548 FC71A3F4 		.word	-190615044
 592 054c 5568CFA9 		.word	-1446025131
 593 0550 196C5D4C 		.word	1281190937
 594 0554 0492E51D 		.word	501584388
 595 0558 FEB851FA 		.word	-95307522
 596 055c 2AB4E7D4 		.word	-723012566
 597 0560 AF427B4E 		.word	1316700847
 598 0564 CD60EB62 		.word	1659592909
 599 0568 22902CEF 		.word	-282292190
 600 056c F0C78DD2 		.word	-762460176
 601 0570 57A13DA7 		.word	-1489133225
 602 0574 66B07531 		.word	829796454
 603 0578 11489677 		.word	2006337553
 604 057c F8E346E9 		.word	-381230088
 605 0580 ABD09E53 		.word	1402917035
 606 0584 33D8BA98 		.word	-1732585421
 607 0588 0824CB3B 		.word	1003168776
 608 058c FC71A3F4 		.word	-190615044
 609 0590 980824CB 		.word	-886830952
 610 0594 3BFC71A3 		.word	-1552810949
 611 0598 F45568CF 		.word	-815245836
 612 059c A9196C5D 		.word	1567365545
 613 05a0 4C0492E5 		.word	-443415476
 614 05a4 1DFEB851 		.word	1371078173
 615 05a8 FA2AB4E7 		.word	-407622918
 616 05ac D40CB62E 		.word	783682772
 617 05b0 2602C9F2 		.word	-221707738
 618 05b4 0E7FDC28 		.word	685539086
 619 05b8 7D15DA73 		.word	1943672189
 620 05bc 6A065B17 		.word	391841386
 621 05c0 51FA2AB4 		.word	-1272251823
 622 05c4 E7D40CB6 		.word	-1240673049
 623 05c8 2E2602C9 		.word	-922606034
 624 05cc F20E7FDC 		.word	-595652878
 625 05d0 287D15DA 		.word	-636125912
 626 05d4 736A065B 		.word	1527147123
 627 05d8 17138164 		.word	1686180631
 628 05dc 79873F6E 		.word	1849657209
 629 05e0 94BE0AED 		.word	-318062956
 630 05e4 393583AD 		.word	-1383910087
 631 05e8 8B8940B2 		.word	-1304393333
 632 05ec BCC31F37 		.word	924828604
 633 05f0 0AED3935 		.word	892988682
 634 05f4 83AD8B89 		.word	-1987334781
 635 05f8 40B2BCC3 		.word	-1011043776
 636 05fc 1F374A5F 		.word	1598699295
 637 0600 85F69C9A 		.word	-1700989307
 638 0604 C1D6C544 		.word	1153816257
 639 0608 2059DEE1 		.word	-505521888
 640 060c 8F1BA5AF 		.word	-1348134001
 641 0610 427B4ECD 		.word	-850494654
 642 0614 60EB6222 		.word	576908128
 643 0618 902CEFF0 		.word	-252760944
ARM GAS  /tmp/ccQUMSla.s 			page 12


 644 061c C78DD257 		.word	1473416647
 645 0620 C31F374A 		.word	1245126595
 646 0624 5F85F69C 		.word	-1661565601
 647 0628 9AC1D6C5 		.word	-975781478
 648 062c 442059DE 		.word	-564584380
 649 0630 E18F1BA5 		.word	-1524920351
 650 0634 AF427B4E 		.word	1316700847
 651 0638 CD60EB62 		.word	1659592909
 652 063c 22902CEF 		.word	-282292190
 653 0640 F0C78DD2 		.word	-762460176
 654 0644 57A13DA7 		.word	-1489133225
 655 0648 66B07531 		.word	829796454
 656 064c 11489677 		.word	2006337553
 657 0650 BCC31F37 		.word	924828604
 658 0654 4A5F85F6 		.word	-159031478
 659 0658 9C9AC1D6 		.word	-691955044
 660 065c C5442059 		.word	1495286981
 661 0660 DEE18F1B 		.word	462414302
 662 0664 A5AF427B 		.word	2067967909
 663 0668 4ECD60EB 		.word	-345977522
 664 066c 6222902C 		.word	747643490
 665 0670 EFF0C78D 		.word	-1916276497
 666 0674 D257A13D 		.word	1033983954
 667 0678 A766B075 		.word	1974494887
 668 067c 31114896 		.word	-1773661903
 669 0680 75311148 		.word	1209086325
 670 0684 9677F8E3 		.word	-470255722
 671 0688 46E9ABD0 		.word	-794039994
 672 068c 9E5333D8 		.word	-667724898
 673 0690 BA980824 		.word	604543162
 674 0694 CB3BFC71 		.word	1912355787
 675 0698 A3F45568 		.word	1750463651
 676 069c CFA9196C 		.word	1813621199
 677 06a0 5D4C0492 		.word	-1845212067
 678 06a4 E51DFEB8 		.word	-1191305755
 679 06a8 51FA2AB4 		.word	-1272251823
 680 06ac E7D40CB6 		.word	-1240673049
 681 06b0 2E2602C9 		.word	-922606034
 682 06b4 F20E7FDC 		.word	-595652878
 683 06b8 287D15DA 		.word	-636125912
 684 06bc 736A065B 		.word	1527147123
 685 06c0 17138164 		.word	1686180631
 686 06c4 79873F6E 		.word	1849657209
 687 06c8 94BE0AED 		.word	-318062956
 688 06cc 393583AD 		.word	-1383910087
 689 06d0 8B8940B2 		.word	-1304393333
 690 06d4 BCC31F37 		.word	924828604
 691 06d8 4A5F85F6 		.word	-159031478
 692 06dc 9C9AC1D6 		.word	-691955044
 693 06e0 E7D40CB6 		.word	-1240673049
 694 06e4 2E2602C9 		.word	-922606034
 695 06e8 F20E7FDC 		.word	-595652878
 696 06ec 287D15DA 		.word	-636125912
 697 06f0 736A065B 		.word	1527147123
 698 06f4 17138164 		.word	1686180631
 699 06f8 79873F6E 		.word	1849657209
 700 06fc 94BE0AED 		.word	-318062956
ARM GAS  /tmp/ccQUMSla.s 			page 13


 701 0700 393583AD 		.word	-1383910087
 702 0704 8B8940B2 		.word	-1304393333
 703 0708 BCC31F37 		.word	924828604
 704 070c 4A5F85F6 		.word	-159031478
 705 0710 60EB6222 		.word	576908128
 706 0714 902CEFF0 		.word	-252760944
 707 0718 C78DD257 		.word	1473416647
 708 071c A13DA766 		.word	1722236321
 709 0720 B0753111 		.word	288454064
 710 0724 489677F8 		.word	-126380472
 711 0728 E346E9AB 		.word	-1410775325
 712 072c D09E5333 		.word	861118160
 713 0730 D8BA9808 		.word	144227032
 714 0734 24CB3BFC 		.word	-63190236
 715 0738 71A3F455 		.word	1442095985
 716 073c 68CFA919 		.word	430559080
 717 0740 A9196C5D 		.word	1567365545
 718 0744 4C0492E5 		.word	-443415476
 719 0748 1DFEB851 		.word	1371078173
 720 074c FA2AB4E7 		.word	-407622918
 721 0750 D40CB62E 		.word	783682772
 722 0754 2602C9F2 		.word	-221707738
 723 0758 0E7FDC28 		.word	685539086
 724 075c 7D15DA73 		.word	1943672189
 725 0760 6A065B17 		.word	391841386
 726 0764 13816479 		.word	2036629779
 727 0768 873F6E94 		.word	-1804714105
 728 076c BE0AED39 		.word	971836094
 729 0770 F20E7FDC 		.word	-595652878
 730 0774 287D15DA 		.word	-636125912
 731 0778 736A065B 		.word	1527147123
 732 077c 17138164 		.word	1686180631
 733 0780 79873F6E 		.word	1849657209
 734 0784 94BE0AED 		.word	-318062956
 735 0788 393583AD 		.word	-1383910087
 736 078c 8B8940B2 		.word	-1304393333
 737 0790 BCC31F37 		.word	924828604
 738 0794 4A5F85F6 		.word	-159031478
 739 0798 9C9AC1D6 		.word	-691955044
 740 079c C5442059 		.word	1495286981
 741 07a0 3BFC71A3 		.word	-1552810949
 742 07a4 F45568CF 		.word	-815245836
 743 07a8 A9196C5D 		.word	1567365545
 744 07ac 4C0492E5 		.word	-443415476
 745 07b0 1DFEB851 		.word	1371078173
 746 07b4 FA2AB4E7 		.word	-407622918
 747 07b8 D40CB62E 		.word	783682772
 748 07bc 2602C9F2 		.word	-221707738
 749 07c0 0E7FDC28 		.word	685539086
 750 07c4 7D15DA73 		.word	1943672189
 751 07c8 6A065B17 		.word	391841386
 752 07cc 13816479 		.word	2036629779
 753 07d0 442059DE 		.word	-564584380
 754 07d4 E18F1BA5 		.word	-1524920351
 755 07d8 AF427B4E 		.word	1316700847
 756 07dc CD60EB62 		.word	1659592909
 757 07e0 22902CEF 		.word	-282292190
ARM GAS  /tmp/ccQUMSla.s 			page 14


 758 07e4 F0C78DD2 		.word	-762460176
 759 07e8 57A13DA7 		.word	-1489133225
 760 07ec 66B07531 		.word	829796454
 761 07f0 11489677 		.word	2006337553
 762 07f4 F8E346E9 		.word	-381230088
 763 07f8 ABD09E53 		.word	1402917035
 764 07fc 33D8BA98 		.word	-1732585421
 765 0800 8DD257A1 		.word	-1588079987
 766 0804 3DA766B0 		.word	-1335449795
 767 0808 75311148 		.word	1209086325
 768 080c 9677F8E3 		.word	-470255722
 769 0810 46E9ABD0 		.word	-794039994
 770 0814 9E5333D8 		.word	-667724898
 771 0818 BA980824 		.word	604543162
 772 081c CB3BFC71 		.word	1912355787
 773 0820 A3F45568 		.word	1750463651
 774 0824 CFA9196C 		.word	1813621199
 775 0828 5D4C0492 		.word	-1845212067
 776 082c E51DFEB8 		.word	-1191305755
 777 0830 D6C54420 		.word	541378006
 778 0834 59DEE18F 		.word	-1881022887
 779 0838 1BA5AF42 		.word	1118807323
 780 083c 7B4ECD60 		.word	1624067707
 781 0840 EB622290 		.word	-1876794645
 782 0844 2CEFF0C7 		.word	-940511444
 783 0848 8DD257A1 		.word	-1588079987
 784 084c 3DA766B0 		.word	-1335449795
 785 0850 75311148 		.word	1209086325
 786 0854 9677F8E3 		.word	-470255722
 787 0858 46E9ABD0 		.word	-794039994
 788 085c 9E5333D8 		.word	-667724898
 789 0860 1F374A5F 		.word	1598699295
 790 0864 85F69C9A 		.word	-1700989307
 791 0868 C1D6C544 		.word	1153816257
 792 086c 2059DEE1 		.word	-505521888
 793 0870 8F1BA5AF 		.word	-1348134001
 794 0874 427B4ECD 		.word	-850494654
 795 0878 60EB6222 		.word	576908128
 796 087c 902CEFF0 		.word	-252760944
 797 0880 C78DD257 		.word	1473416647
 798 0884 A13DA766 		.word	1722236321
 799 0888 B0753111 		.word	288454064
 800 088c 489677F8 		.word	-126380472
 801              		.comm	rr,5,4
 802              		.global	compile_info
 803              		.align	2
 806              	compile_info:
 807 0890 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Mon Nov  7 13:5"
 807      746F6F74 
 807      68203230 
 807      31352D31 
 807      302D5231 
 808 08c3 383A3332 		.ascii	"8:32 KST 2016\000"
 808      204B5354 
 808      20323031 
 808      3600
 809              		.comm	device_index,1,1
ARM GAS  /tmp/ccQUMSla.s 			page 15


 810              		.comm	first_ts,4,4
 811              		.comm	second_ts,4,4
 812              		.comm	diff_ts,4,4
 813              		.comm	rssi_avg,1,1
 814              		.comm	freq_avg,1,1
 815              		.comm	clkn,4,4
 816              		.global	hop_mode
 817              		.bss
 820              	hop_mode:
 821 0000 00       		.space	1
 822              		.global	do_hop
 825              	do_hop:
 826 0001 00       		.space	1
 827              		.global	cs_no_squelch
 830              	cs_no_squelch:
 831 0002 00       		.space	1
 832              		.global	cs_threshold_req
 833              		.data
 836              	cs_threshold_req:
 837 0004 88       		.byte	-120
 838              		.global	cs_threshold_cur
 841              	cs_threshold_cur:
 842 0005 88       		.byte	-120
 843              		.comm	cs_trigger,1,1
 844              		.comm	keepalive_trigger,1,1
 845              		.comm	cs_timestamp,4,4
 846              		.global	hop_direct_channel
 847              		.bss
 848 0003 00       		.align	1
 851              	hop_direct_channel:
 852 0004 0000     		.space	2
 853              		.global	clock_trim
 854 0006 0000     		.align	2
 857              	clock_trim:
 858 0008 00000000 		.space	4
 859              		.comm	idle_buf_clkn_high,4,4
 860              		.comm	active_buf_clkn_high,4,4
 861              		.comm	idle_buf_clk100ns,4,4
 862              		.comm	active_buf_clk100ns,4,4
 863              		.global	idle_buf_channel
 864              		.align	1
 867              	idle_buf_channel:
 868 000c 0000     		.space	2
 869              		.global	active_buf_channel
 870              		.align	1
 873              	active_buf_channel:
 874 000e 0000     		.space	2
 875              		.global	slave_mac_address
 876              		.align	2
 879              	slave_mac_address:
 880 0010 00000000 		.space	6
 880      0000
 881              		.comm	rxbuf1,50,4
 882              		.comm	rxbuf2,50,4
 883              		.global	active_rxbuf
 884              		.data
 885 0006 0000     		.align	2
ARM GAS  /tmp/ccQUMSla.s 			page 16


 888              	active_rxbuf:
 889 0008 00000000 		.word	rxbuf1
 890              		.global	idle_rxbuf
 891              		.align	2
 894              	idle_rxbuf:
 895 000c 00000000 		.word	rxbuf2
 896              		.global	le
 897              		.align	2
 900              	le:
 901 0010 D6BE898E 		.word	-1903575338
 902 0014 7D6B     		.short	27517
 903 0016 7191     		.short	-28303
 904 0018 55555500 		.word	5592405
 905 001c AAAAAA00 		.word	11184810
 906 0020 01000000 		.word	1
 907 0024 00       		.byte	0
 908 0025 000000   		.space	3
 909 0028 00000000 		.word	0
 910 002c 00000000 		.space	32
 910      00000000 
 910      00000000 
 910      00000000 
 910      00000000 
 911 004c 00000000 		.word	0
 912 0050 00000000 		.word	0
 913              		.comm	le_promisc,264,4
 914              		.global	le_jam_count
 915              		.bss
 916 0016 0000     		.align	2
 919              	le_jam_count:
 920 0018 00000000 		.space	4
 921              		.global	data_cb
 922              		.align	2
 925              	data_cb:
 926 001c 00000000 		.space	4
 927              		.global	packet_cb
 928              		.align	2
 931              	packet_cb:
 932 0020 00000000 		.space	4
 933              		.global	rssi_iir
 934              		.align	2
 937              	rssi_iir:
 938 0024 00000000 		.space	158
 938      00000000 
 938      00000000 
 938      00000000 
 938      00000000 
 939              		.comm	unpacked,800,4
 940              		.global	mode
 943              	mode:
 944 00c2 00       		.space	1
 945              		.global	requested_mode
 948              	requested_mode:
 949 00c3 00       		.space	1
 950              		.global	jam_mode
 953              	jam_mode:
 954 00c4 00       		.space	1
ARM GAS  /tmp/ccQUMSla.s 			page 17


 955              		.global	ego_mode
 958              	ego_mode:
 959 00c5 00       		.space	1
 960              		.global	modulation
 963              	modulation:
 964 00c6 00       		.space	1
 965              		.global	channel
 966              		.data
 967              		.align	1
 970              	channel:
 971 0054 6209     		.short	2402
 972              		.global	requested_channel
 973              		.bss
 974 00c7 00       		.align	1
 977              	requested_channel:
 978 00c8 0000     		.space	2
 979              		.global	saved_request
 980              		.align	1
 983              	saved_request:
 984 00ca 0000     		.space	2
 985              		.global	low_freq
 986              		.data
 987              		.align	1
 990              	low_freq:
 991 0056 6009     		.short	2400
 992              		.global	high_freq
 993              		.align	1
 996              	high_freq:
 997 0058 B309     		.short	2483
 998              		.global	rssi_threshold
 1001              	rssi_threshold:
 1002 005a E2       		.byte	-30
 1003              		.comm	rx_dma_lli1,16,4
 1004              		.comm	rx_dma_lli2,16,4
 1005              		.comm	le_dma_lli,176,4
 1006              		.comm	rx_tc,4,4
 1007              		.comm	rx_err,4,4
 1008              		.global	status
 1009              		.bss
 1012              	status:
 1013 00cc 00       		.space	1
 1014              		.comm	rssi_max,1,1
 1015              		.comm	rssi_min,1,1
 1016              		.global	rssi_count
 1019              	rssi_count:
 1020 00cd 00       		.space	1
 1021              		.global	rssi_sum
 1022 00ce 0000     		.align	2
 1025              	rssi_sum:
 1026 00d0 00000000 		.space	4
 1027              		.section	.text.rssi_reset,"ax",%progbits
 1028              		.align	2
 1029              		.thumb
 1030              		.thumb_func
 1032              	rssi_reset:
 1033              	.LFB0:
 1034              		.file 1 "bluetooth_rxtx.c"
ARM GAS  /tmp/ccQUMSla.s 			page 18


   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** u8 device_index;
  50:bluetooth_rxtx.c **** u32 first_ts, second_ts, diff_ts;
  51:bluetooth_rxtx.c **** uint8_t rssi_avg;
  52:bluetooth_rxtx.c **** uint8_t freq_avg;
  53:bluetooth_rxtx.c **** 
  54:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  55:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  56:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  57:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 19


  58:bluetooth_rxtx.c **** #define HOP_NONE      0
  59:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  60:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  61:bluetooth_rxtx.c **** #define HOP_BTLE      3
  62:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  63:bluetooth_rxtx.c **** 
  64:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  65:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  66:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  67:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  68:bluetooth_rxtx.c **** 
  69:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  70:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  71:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  72:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  73:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  74:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  75:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  76:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  77:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  78:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  79:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  80:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  81:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  82:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  83:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  84:bluetooth_rxtx.c **** 
  85:bluetooth_rxtx.c **** /* DMA buffers */
  86:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  87:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  88:bluetooth_rxtx.c **** 
  89:bluetooth_rxtx.c **** /*
  90:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  91:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  92:bluetooth_rxtx.c ****  */
  93:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  94:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  95:bluetooth_rxtx.c **** 
  96:bluetooth_rxtx.c **** le_state_t le = {
  97:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  98:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  99:bluetooth_rxtx.c **** 	.syncl = 0x9171,
 100:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
 101:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
 102:bluetooth_rxtx.c **** 	.crc_verify = 1,
 103:bluetooth_rxtx.c **** 
 104:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 105:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 106:bluetooth_rxtx.c **** 	.target_set = 0,
 107:bluetooth_rxtx.c **** 	.last_packet = 0,
 108:bluetooth_rxtx.c **** };
 109:bluetooth_rxtx.c **** 
 110:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 111:bluetooth_rxtx.c **** 	u32 aa;
 112:bluetooth_rxtx.c **** 	int count;
 113:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 114:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 20


 115:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 116:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 117:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 118:bluetooth_rxtx.c **** 
 119:bluetooth_rxtx.c **** 	// recovering hop interval
 120:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 121:bluetooth_rxtx.c **** 	int consec_intervals;
 122:bluetooth_rxtx.c **** } le_promisc_state_t;
 123:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 124:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 125:bluetooth_rxtx.c **** 
 126:bluetooth_rxtx.c **** /* LE jamming */
 127:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 128:bluetooth_rxtx.c **** int le_jam_count = 0;
 129:bluetooth_rxtx.c **** 
 130:bluetooth_rxtx.c **** /* set LE access address */
 131:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 132:bluetooth_rxtx.c **** 
 133:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 134:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 135:bluetooth_rxtx.c **** 
 136:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 137:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 138:bluetooth_rxtx.c **** 
 139:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 140:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 141:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 142:bluetooth_rxtx.c **** 
 143:bluetooth_rxtx.c **** /*
 144:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 145:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 146:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 147:bluetooth_rxtx.c **** */
 148:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 149:bluetooth_rxtx.c **** 
 150:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 151:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 152:bluetooth_rxtx.c **** 
 153:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 154:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 155:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 156:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 157:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 158:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 159:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 160:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 161:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 162:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 163:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 164:bluetooth_rxtx.c **** 
 165:bluetooth_rxtx.c **** /* DMA linked list items */
 166:bluetooth_rxtx.c **** typedef struct {
 167:bluetooth_rxtx.c **** 	u32 src;
 168:bluetooth_rxtx.c **** 	u32 dest;
 169:bluetooth_rxtx.c **** 	u32 next_lli;
 170:bluetooth_rxtx.c **** 	u32 control;
 171:bluetooth_rxtx.c **** } dma_lli;
ARM GAS  /tmp/ccQUMSla.s 			page 21


 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 174:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 175:bluetooth_rxtx.c **** 
 176:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 177:bluetooth_rxtx.c **** 
 178:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 179:bluetooth_rxtx.c **** volatile u32 rx_tc;
 180:bluetooth_rxtx.c **** volatile u32 rx_err;
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** /* status information byte */
 183:bluetooth_rxtx.c **** volatile u8 status = 0;
 184:bluetooth_rxtx.c **** 
 185:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 186:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 187:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 188:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 189:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 190:bluetooth_rxtx.c **** 
 191:bluetooth_rxtx.c **** /*
 192:bluetooth_rxtx.c ****  * RSSI
 193:bluetooth_rxtx.c ****  */
 194:bluetooth_rxtx.c **** int8_t rssi_max;
 195:bluetooth_rxtx.c **** int8_t rssi_min;
 196:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 197:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 198:bluetooth_rxtx.c **** 
 199:bluetooth_rxtx.c **** static void rssi_reset(void)
 200:bluetooth_rxtx.c **** {
 1035              		.loc 1 200 0
 1036              		.cfi_startproc
 1037              		@ args = 0, pretend = 0, frame = 0
 1038              		@ frame_needed = 1, uses_anonymous_args = 0
 1039              		@ link register save eliminated.
 1040 0000 80B4     		push	{r7}
 1041              		.cfi_def_cfa_offset 4
 1042              		.cfi_offset 7, -4
 1043 0002 00AF     		add	r7, sp, #0
 1044              		.cfi_def_cfa_register 7
 201:bluetooth_rxtx.c **** 	rssi_count = 0;
 1045              		.loc 1 201 0
 1046 0004 074B     		ldr	r3, .L2
 1047 0006 0022     		movs	r2, #0
 1048 0008 1A70     		strb	r2, [r3]
 202:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1049              		.loc 1 202 0
 1050 000a 074B     		ldr	r3, .L2+4
 1051 000c 0022     		movs	r2, #0
 1052 000e 1A60     		str	r2, [r3]
 203:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1053              		.loc 1 203 0
 1054 0010 064B     		ldr	r3, .L2+8
 1055 0012 8022     		movs	r2, #128
 1056 0014 1A70     		strb	r2, [r3]
 204:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1057              		.loc 1 204 0
 1058 0016 064B     		ldr	r3, .L2+12
ARM GAS  /tmp/ccQUMSla.s 			page 22


 1059 0018 7F22     		movs	r2, #127
 1060 001a 1A70     		strb	r2, [r3]
 205:bluetooth_rxtx.c **** }
 1061              		.loc 1 205 0
 1062 001c BD46     		mov	sp, r7
 1063              		.cfi_def_cfa_register 13
 1064              		@ sp needed
 1065 001e 5DF8047B 		ldr	r7, [sp], #4
 1066              		.cfi_restore 7
 1067              		.cfi_def_cfa_offset 0
 1068 0022 7047     		bx	lr
 1069              	.L3:
 1070              		.align	2
 1071              	.L2:
 1072 0024 00000000 		.word	rssi_count
 1073 0028 00000000 		.word	rssi_sum
 1074 002c 00000000 		.word	rssi_max
 1075 0030 00000000 		.word	rssi_min
 1076              		.cfi_endproc
 1077              	.LFE0:
 1079              		.section	.text.rssi_add,"ax",%progbits
 1080              		.align	2
 1081              		.thumb
 1082              		.thumb_func
 1084              	rssi_add:
 1085              	.LFB1:
 206:bluetooth_rxtx.c **** 
 207:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 208:bluetooth_rxtx.c **** {
 1086              		.loc 1 208 0
 1087              		.cfi_startproc
 1088              		@ args = 0, pretend = 0, frame = 8
 1089              		@ frame_needed = 1, uses_anonymous_args = 0
 1090              		@ link register save eliminated.
 1091 0000 80B4     		push	{r7}
 1092              		.cfi_def_cfa_offset 4
 1093              		.cfi_offset 7, -4
 1094 0002 83B0     		sub	sp, sp, #12
 1095              		.cfi_def_cfa_offset 16
 1096 0004 00AF     		add	r7, sp, #0
 1097              		.cfi_def_cfa_register 7
 1098 0006 0346     		mov	r3, r0
 1099 0008 FB71     		strb	r3, [r7, #7]
 209:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1100              		.loc 1 209 0
 1101 000a 144B     		ldr	r3, .L5
 1102 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1103 000e 5AB2     		sxtb	r2, r3
 1104 0010 97F90730 		ldrsb	r3, [r7, #7]
 1105 0014 9342     		cmp	r3, r2
 1106 0016 B8BF     		it	lt
 1107 0018 1346     		movlt	r3, r2
 1108 001a DAB2     		uxtb	r2, r3
 1109 001c 0F4B     		ldr	r3, .L5
 1110 001e 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1111              		.loc 1 210 0
ARM GAS  /tmp/ccQUMSla.s 			page 23


 1112 0020 0F4B     		ldr	r3, .L5+4
 1113 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1114 0024 5AB2     		sxtb	r2, r3
 1115 0026 97F90730 		ldrsb	r3, [r7, #7]
 1116 002a 9342     		cmp	r3, r2
 1117 002c A8BF     		it	ge
 1118 002e 1346     		movge	r3, r2
 1119 0030 DAB2     		uxtb	r2, r3
 1120 0032 0B4B     		ldr	r3, .L5+4
 1121 0034 1A70     		strb	r2, [r3]
 211:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1122              		.loc 1 211 0
 1123 0036 97F90730 		ldrsb	r3, [r7, #7]
 1124 003a 1A02     		lsls	r2, r3, #8
 1125 003c 094B     		ldr	r3, .L5+8
 1126 003e 1B68     		ldr	r3, [r3]
 1127 0040 1344     		add	r3, r3, r2
 1128 0042 084A     		ldr	r2, .L5+8
 1129 0044 1360     		str	r3, [r2]
 212:bluetooth_rxtx.c **** 	rssi_count += 1;
 1130              		.loc 1 212 0
 1131 0046 084B     		ldr	r3, .L5+12
 1132 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1133 004a 0133     		adds	r3, r3, #1
 1134 004c DAB2     		uxtb	r2, r3
 1135 004e 064B     		ldr	r3, .L5+12
 1136 0050 1A70     		strb	r2, [r3]
 213:bluetooth_rxtx.c **** }
 1137              		.loc 1 213 0
 1138 0052 0C37     		adds	r7, r7, #12
 1139              		.cfi_def_cfa_offset 4
 1140 0054 BD46     		mov	sp, r7
 1141              		.cfi_def_cfa_register 13
 1142              		@ sp needed
 1143 0056 5DF8047B 		ldr	r7, [sp], #4
 1144              		.cfi_restore 7
 1145              		.cfi_def_cfa_offset 0
 1146 005a 7047     		bx	lr
 1147              	.L6:
 1148              		.align	2
 1149              	.L5:
 1150 005c 00000000 		.word	rssi_max
 1151 0060 00000000 		.word	rssi_min
 1152 0064 00000000 		.word	rssi_sum
 1153 0068 00000000 		.word	rssi_count
 1154              		.cfi_endproc
 1155              	.LFE1:
 1157              		.section	.text.rssi_iir_update,"ax",%progbits
 1158              		.align	2
 1159              		.thumb
 1160              		.thumb_func
 1162              	rssi_iir_update:
 1163              	.LFB2:
 214:bluetooth_rxtx.c **** 
 215:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 216:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 217:bluetooth_rxtx.c **** {
ARM GAS  /tmp/ccQUMSla.s 			page 24


 1164              		.loc 1 217 0
 1165              		.cfi_startproc
 1166              		@ args = 0, pretend = 0, frame = 16
 1167              		@ frame_needed = 1, uses_anonymous_args = 0
 1168              		@ link register save eliminated.
 1169 0000 80B4     		push	{r7}
 1170              		.cfi_def_cfa_offset 4
 1171              		.cfi_offset 7, -4
 1172 0002 85B0     		sub	sp, sp, #20
 1173              		.cfi_def_cfa_offset 24
 1174 0004 00AF     		add	r7, sp, #0
 1175              		.cfi_def_cfa_register 7
 218:bluetooth_rxtx.c **** 	int i;
 219:bluetooth_rxtx.c **** 	int32_t avg;
 220:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 221:bluetooth_rxtx.c **** 
 222:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 223:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 224:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1176              		.loc 1 224 0
 1177 0006 1F4B     		ldr	r3, .L13
 1178 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1179 000a 002B     		cmp	r3, #0
 1180 000c 06D0     		beq	.L8
 225:bluetooth_rxtx.c **** 		i = channel - 2402;
 1181              		.loc 1 225 0
 1182 000e 1E4B     		ldr	r3, .L13+4
 1183 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1184 0012 9BB2     		uxth	r3, r3
 1185 0014 A3F66213 		subw	r3, r3, #2402
 1186 0018 FB60     		str	r3, [r7, #12]
 1187 001a 01E0     		b	.L9
 1188              	.L8:
 226:bluetooth_rxtx.c **** 	else
 227:bluetooth_rxtx.c **** 		i = 0;
 1189              		.loc 1 227 0
 1190 001c 0023     		movs	r3, #0
 1191 001e FB60     		str	r3, [r7, #12]
 1192              	.L9:
 228:bluetooth_rxtx.c **** 
 229:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 230:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1193              		.loc 1 230 0
 1194 0020 1A4B     		ldr	r3, .L13+8
 1195 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1196 0024 002B     		cmp	r3, #0
 1197 0026 08D0     		beq	.L10
 231:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1198              		.loc 1 231 0
 1199 0028 194B     		ldr	r3, .L13+12
 1200 002a 1B68     		ldr	r3, [r3]
 1201 002c 8033     		adds	r3, r3, #128
 1202 002e 174A     		ldr	r2, .L13+8
 1203 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1204 0032 93FBF2F3 		sdiv	r3, r3, r2
 1205 0036 BB60     		str	r3, [r7, #8]
 1206 0038 01E0     		b	.L11
ARM GAS  /tmp/ccQUMSla.s 			page 25


 1207              	.L10:
 232:bluetooth_rxtx.c **** 	else
 233:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1208              		.loc 1 233 0
 1209 003a 0023     		movs	r3, #0
 1210 003c BB60     		str	r3, [r7, #8]
 1211              	.L11:
 234:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1212              		.loc 1 234 0
 1213 003e 154A     		ldr	r2, .L13+16
 1214 0040 FB68     		ldr	r3, [r7, #12]
 1215 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1216 0046 1AB2     		sxth	r2, r3
 1217 0048 1346     		mov	r3, r2
 1218 004a 9B01     		lsls	r3, r3, #6
 1219 004c 9B1A     		subs	r3, r3, r2
 1220 004e 9B00     		lsls	r3, r3, #2
 1221 0050 1344     		add	r3, r3, r2
 1222 0052 7B60     		str	r3, [r7, #4]
 235:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1223              		.loc 1 235 0
 1224 0054 BA68     		ldr	r2, [r7, #8]
 1225 0056 1346     		mov	r3, r2
 1226 0058 5B00     		lsls	r3, r3, #1
 1227 005a 1344     		add	r3, r3, r2
 1228 005c 7A68     		ldr	r2, [r7, #4]
 1229 005e 1344     		add	r3, r3, r2
 1230 0060 7B60     		str	r3, [r7, #4]
 236:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1231              		.loc 1 236 0
 1232 0062 7B68     		ldr	r3, [r7, #4]
 1233 0064 8033     		adds	r3, r3, #128
 1234 0066 002B     		cmp	r3, #0
 1235 0068 00DA     		bge	.L12
 1236 006a FF33     		adds	r3, r3, #255
 1237              	.L12:
 1238 006c 1B12     		asrs	r3, r3, #8
 1239 006e 99B2     		uxth	r1, r3
 1240 0070 084A     		ldr	r2, .L13+16
 1241 0072 FB68     		ldr	r3, [r7, #12]
 1242 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 237:bluetooth_rxtx.c **** }
 1243              		.loc 1 237 0
 1244 0078 1437     		adds	r7, r7, #20
 1245              		.cfi_def_cfa_offset 4
 1246 007a BD46     		mov	sp, r7
 1247              		.cfi_def_cfa_register 13
 1248              		@ sp needed
 1249 007c 5DF8047B 		ldr	r7, [sp], #4
 1250              		.cfi_restore 7
 1251              		.cfi_def_cfa_offset 0
 1252 0080 7047     		bx	lr
 1253              	.L14:
 1254 0082 00BF     		.align	2
 1255              	.L13:
 1256 0084 00000000 		.word	hop_mode
 1257 0088 00000000 		.word	channel
ARM GAS  /tmp/ccQUMSla.s 			page 26


 1258 008c 00000000 		.word	rssi_count
 1259 0090 00000000 		.word	rssi_sum
 1260 0094 00000000 		.word	rssi_iir
 1261              		.cfi_endproc
 1262              	.LFE2:
 1264              		.section	.text.cs_threshold_set,"ax",%progbits
 1265              		.align	2
 1266              		.thumb
 1267              		.thumb_func
 1269              	cs_threshold_set:
 1270              	.LFB3:
 238:bluetooth_rxtx.c **** 
 239:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 240:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 241:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 242:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 243:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 244:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 245:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 246:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 247:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 248:bluetooth_rxtx.c **** {
 1271              		.loc 1 248 0
 1272              		.cfi_startproc
 1273              		@ args = 0, pretend = 0, frame = 8
 1274              		@ frame_needed = 1, uses_anonymous_args = 0
 1275 0000 80B5     		push	{r7, lr}
 1276              		.cfi_def_cfa_offset 8
 1277              		.cfi_offset 7, -8
 1278              		.cfi_offset 14, -4
 1279 0002 82B0     		sub	sp, sp, #8
 1280              		.cfi_def_cfa_offset 16
 1281 0004 00AF     		add	r7, sp, #0
 1282              		.cfi_def_cfa_register 7
 1283 0006 0346     		mov	r3, r0
 1284 0008 0A46     		mov	r2, r1
 1285 000a FB71     		strb	r3, [r7, #7]
 1286 000c 1346     		mov	r3, r2
 1287 000e BB71     		strb	r3, [r7, #6]
 249:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1288              		.loc 1 249 0
 1289 0010 97F90730 		ldrsb	r3, [r7, #7]
 1290 0014 13F1140F 		cmn	r3, #20
 1291 0018 0DD0     		beq	.L16
 1292              		.loc 1 249 0 is_stmt 0 discriminator 1
 1293 001a 97F90730 		ldrsb	r3, [r7, #7]
 1294 001e 13F1130F 		cmn	r3, #19
 1295 0022 08DA     		bge	.L16
 1296              		.loc 1 249 0 discriminator 3
 1297 0024 97F90730 		ldrsb	r3, [r7, #7]
 1298 0028 6FF07702 		mvn	r2, #119
 1299 002c 9342     		cmp	r3, r2
 1300 002e B8BF     		it	lt
 1301 0030 1346     		movlt	r3, r2
 1302 0032 DBB2     		uxtb	r3, r3
 1303 0034 00E0     		b	.L17
 1304              	.L16:
ARM GAS  /tmp/ccQUMSla.s 			page 27


 1305              		.loc 1 249 0 discriminator 4
 1306 0036 EC23     		movs	r3, #236
 1307              	.L17:
 1308              		.loc 1 249 0 discriminator 6
 1309 0038 FB71     		strb	r3, [r7, #7]
 250:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1310              		.loc 1 250 0 is_stmt 1 discriminator 6
 1311 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1312 003c 3833     		adds	r3, r3, #56
 1313 003e DBB2     		uxtb	r3, r3
 1314 0040 9BB2     		uxth	r3, r3
 1315 0042 03F0FC03 		and	r3, r3, #252
 1316 0046 9AB2     		uxth	r2, r3
 1317 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1318 004a 9BB2     		uxth	r3, r3
 1319 004c 03F00303 		and	r3, r3, #3
 1320 0050 9BB2     		uxth	r3, r3
 1321 0052 1343     		orrs	r3, r3, r2
 1322 0054 9BB2     		uxth	r3, r3
 1323 0056 9BB2     		uxth	r3, r3
 1324 0058 0620     		movs	r0, #6
 1325 005a 1946     		mov	r1, r3
 1326 005c FFF7FEFF 		bl	cc2400_set
 251:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1327              		.loc 1 251 0 discriminator 6
 1328 0060 084A     		ldr	r2, .L18
 1329 0062 FB79     		ldrb	r3, [r7, #7]
 1330 0064 1370     		strb	r3, [r2]
 252:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1331              		.loc 1 252 0 discriminator 6
 1332 0066 97F90730 		ldrsb	r3, [r7, #7]
 1333 006a 13F1770F 		cmn	r3, #119
 1334 006e B4BF     		ite	lt
 1335 0070 0123     		movlt	r3, #1
 1336 0072 0023     		movge	r3, #0
 1337 0074 DBB2     		uxtb	r3, r3
 1338 0076 1A46     		mov	r2, r3
 1339 0078 034B     		ldr	r3, .L18+4
 1340 007a 1A70     		strb	r2, [r3]
 253:bluetooth_rxtx.c **** }
 1341              		.loc 1 253 0 discriminator 6
 1342 007c 0837     		adds	r7, r7, #8
 1343              		.cfi_def_cfa_offset 8
 1344 007e BD46     		mov	sp, r7
 1345              		.cfi_def_cfa_register 13
 1346              		@ sp needed
 1347 0080 80BD     		pop	{r7, pc}
 1348              	.L19:
 1349 0082 00BF     		.align	2
 1350              	.L18:
 1351 0084 00000000 		.word	cs_threshold_cur
 1352 0088 00000000 		.word	cs_no_squelch
 1353              		.cfi_endproc
 1354              	.LFE3:
 1356              		.section	.text.enqueue,"ax",%progbits
 1357              		.align	2
 1358              		.thumb
ARM GAS  /tmp/ccQUMSla.s 			page 28


 1359              		.thumb_func
 1361              	enqueue:
 1362              	.LFB4:
 254:bluetooth_rxtx.c **** 
 255:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 256:bluetooth_rxtx.c **** {
 1363              		.loc 1 256 0
 1364              		.cfi_startproc
 1365              		@ args = 0, pretend = 0, frame = 32
 1366              		@ frame_needed = 1, uses_anonymous_args = 0
 1367 0000 80B5     		push	{r7, lr}
 1368              		.cfi_def_cfa_offset 8
 1369              		.cfi_offset 7, -8
 1370              		.cfi_offset 14, -4
 1371 0002 88B0     		sub	sp, sp, #32
 1372              		.cfi_def_cfa_offset 40
 1373 0004 00AF     		add	r7, sp, #0
 1374              		.cfi_def_cfa_register 7
 1375 0006 0346     		mov	r3, r0
 1376 0008 3960     		str	r1, [r7]
 1377 000a FB71     		strb	r3, [r7, #7]
 257:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1378              		.loc 1 257 0
 1379 000c FFF7FEFF 		bl	usb_enqueue
 1380 0010 F861     		str	r0, [r7, #28]
 258:bluetooth_rxtx.c **** 
 259:bluetooth_rxtx.c **** 	/* fail if queue is full */
 260:bluetooth_rxtx.c **** 	if (f == NULL) {
 1381              		.loc 1 260 0
 1382 0012 FB69     		ldr	r3, [r7, #28]
 1383 0014 002B     		cmp	r3, #0
 1384 0016 09D1     		bne	.L21
 261:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1385              		.loc 1 261 0
 1386 0018 524B     		ldr	r3, .L25
 1387 001a 1B78     		ldrb	r3, [r3]
 1388 001c DBB2     		uxtb	r3, r3
 1389 001e 43F00403 		orr	r3, r3, #4
 1390 0022 DAB2     		uxtb	r2, r3
 1391 0024 4F4B     		ldr	r3, .L25
 1392 0026 1A70     		strb	r2, [r3]
 262:bluetooth_rxtx.c **** 		return 0;
 1393              		.loc 1 262 0
 1394 0028 0023     		movs	r3, #0
 1395 002a 97E0     		b	.L22
 1396              	.L21:
 263:bluetooth_rxtx.c **** 	}
 264:bluetooth_rxtx.c **** 
 265:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1397              		.loc 1 265 0
 1398 002c FB69     		ldr	r3, [r7, #28]
 1399 002e FA79     		ldrb	r2, [r7, #7]
 1400 0030 1A70     		strb	r2, [r3]
 266:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1401              		.loc 1 266 0
 1402 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1403 0034 042B     		cmp	r3, #4
ARM GAS  /tmp/ccQUMSla.s 			page 29


 1404 0036 13D1     		bne	.L23
 267:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1405              		.loc 1 267 0
 1406 0038 4B4B     		ldr	r3, .L25+4
 1407 003a 1B68     		ldr	r3, [r3]
 1408 003c 1B0D     		lsrs	r3, r3, #20
 1409 003e DAB2     		uxtb	r2, r3
 1410 0040 FB69     		ldr	r3, [r7, #28]
 1411 0042 DA70     		strb	r2, [r3, #3]
 268:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1412              		.loc 1 268 0
 1413 0044 484B     		ldr	r3, .L25+4
 1414 0046 1B68     		ldr	r3, [r3]
 1415 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1416 004c 40F63542 		movw	r2, #3125
 1417 0050 02FB03F2 		mul	r2, r2, r3
 1418 0054 454B     		ldr	r3, .L25+8
 1419 0056 1B68     		ldr	r3, [r3]
 1420 0058 1A44     		add	r2, r2, r3
 1421 005a FB69     		ldr	r3, [r7, #28]
 1422 005c 5A60     		str	r2, [r3, #4]
 1423 005e 08E0     		b	.L24
 1424              	.L23:
 269:bluetooth_rxtx.c **** 	} else {
 270:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1425              		.loc 1 270 0
 1426 0060 434B     		ldr	r3, .L25+12
 1427 0062 1B68     		ldr	r3, [r3]
 1428 0064 DAB2     		uxtb	r2, r3
 1429 0066 FB69     		ldr	r3, [r7, #28]
 1430 0068 DA70     		strb	r2, [r3, #3]
 271:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1431              		.loc 1 271 0
 1432 006a 424B     		ldr	r3, .L25+16
 1433 006c 1A68     		ldr	r2, [r3]
 1434 006e FB69     		ldr	r3, [r7, #28]
 1435 0070 5A60     		str	r2, [r3, #4]
 1436              	.L24:
 272:bluetooth_rxtx.c **** 	}
 273:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1437              		.loc 1 273 0
 1438 0072 414B     		ldr	r3, .L25+20
 1439 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1440 0076 9BB2     		uxth	r3, r3
 1441 0078 DBB2     		uxtb	r3, r3
 1442 007a 623B     		subs	r3, r3, #98
 1443 007c DAB2     		uxtb	r2, r3
 1444 007e FB69     		ldr	r3, [r7, #28]
 1445 0080 9A70     		strb	r2, [r3, #2]
 274:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1446              		.loc 1 274 0
 1447 0082 3E4B     		ldr	r3, .L25+24
 1448 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1449 0086 DAB2     		uxtb	r2, r3
 1450 0088 FB69     		ldr	r3, [r7, #28]
 1451 008a 5A72     		strb	r2, [r3, #9]
 275:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
ARM GAS  /tmp/ccQUMSla.s 			page 30


 1452              		.loc 1 275 0
 1453 008c 3C4B     		ldr	r3, .L25+28
 1454 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1455 0090 DAB2     		uxtb	r2, r3
 1456 0092 FB69     		ldr	r3, [r7, #28]
 1457 0094 1A72     		strb	r2, [r3, #8]
 276:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
 1458              		.loc 1 276 0
 1459 0096 3B4B     		ldr	r3, .L25+32
 1460 0098 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1461 009a FB69     		ldr	r3, [r7, #28]
 1462 009c 1A73     		strb	r2, [r3, #12]
 277:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_sum/rssi_count;
 1463              		.loc 1 277 0
 1464 009e 3A4B     		ldr	r3, .L25+36
 1465 00a0 1B68     		ldr	r3, [r3]
 1466 00a2 3A4A     		ldr	r2, .L25+40
 1467 00a4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1468 00a6 93FBF2F3 		sdiv	r3, r3, r2
 1469 00aa DAB2     		uxtb	r2, r3
 1470 00ac FB69     		ldr	r3, [r7, #28]
 1471 00ae 9A72     		strb	r2, [r3, #10]
 278:bluetooth_rxtx.c **** 	
 279:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 280:bluetooth_rxtx.c **** 
 281:bluetooth_rxtx.c **** 	USRLED_SET;
 1472              		.loc 1 281 0
 1473 00b0 374B     		ldr	r3, .L25+44
 1474 00b2 0222     		movs	r2, #2
 1475 00b4 1A60     		str	r2, [r3]
 282:bluetooth_rxtx.c **** 
 283:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 284:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1476              		.loc 1 284 0
 1477 00b6 FB69     		ldr	r3, [r7, #28]
 1478 00b8 0E33     		adds	r3, r3, #14
 1479 00ba BB61     		str	r3, [r7, #24]
 285:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1480              		.loc 1 285 0
 1481 00bc 3B68     		ldr	r3, [r7]
 1482 00be 7B61     		str	r3, [r7, #20]
 286:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1483              		.loc 1 286 0
 1484 00c0 7B69     		ldr	r3, [r7, #20]
 1485 00c2 1A68     		ldr	r2, [r3]
 1486 00c4 BB69     		ldr	r3, [r7, #24]
 1487 00c6 1A60     		str	r2, [r3]
 287:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1488              		.loc 1 287 0
 1489 00c8 BB69     		ldr	r3, [r7, #24]
 1490 00ca 0433     		adds	r3, r3, #4
 1491 00cc 7A69     		ldr	r2, [r7, #20]
 1492 00ce 5268     		ldr	r2, [r2, #4]
 1493 00d0 1A60     		str	r2, [r3]
 288:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1494              		.loc 1 288 0
 1495 00d2 BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/ccQUMSla.s 			page 31


 1496 00d4 0833     		adds	r3, r3, #8
 1497 00d6 7A69     		ldr	r2, [r7, #20]
 1498 00d8 9268     		ldr	r2, [r2, #8]
 1499 00da 1A60     		str	r2, [r3]
 289:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1500              		.loc 1 289 0
 1501 00dc BB69     		ldr	r3, [r7, #24]
 1502 00de 0C33     		adds	r3, r3, #12
 1503 00e0 7A69     		ldr	r2, [r7, #20]
 1504 00e2 D268     		ldr	r2, [r2, #12]
 1505 00e4 1A60     		str	r2, [r3]
 290:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1506              		.loc 1 290 0
 1507 00e6 BB69     		ldr	r3, [r7, #24]
 1508 00e8 1033     		adds	r3, r3, #16
 1509 00ea 7A69     		ldr	r2, [r7, #20]
 1510 00ec 1269     		ldr	r2, [r2, #16]
 1511 00ee 1A60     		str	r2, [r3]
 291:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1512              		.loc 1 291 0
 1513 00f0 BB69     		ldr	r3, [r7, #24]
 1514 00f2 1433     		adds	r3, r3, #20
 1515 00f4 7A69     		ldr	r2, [r7, #20]
 1516 00f6 5269     		ldr	r2, [r2, #20]
 1517 00f8 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1518              		.loc 1 292 0
 1519 00fa BB69     		ldr	r3, [r7, #24]
 1520 00fc 1833     		adds	r3, r3, #24
 1521 00fe 7A69     		ldr	r2, [r7, #20]
 1522 0100 9269     		ldr	r2, [r2, #24]
 1523 0102 1A60     		str	r2, [r3]
 293:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1524              		.loc 1 293 0
 1525 0104 BB69     		ldr	r3, [r7, #24]
 1526 0106 1C33     		adds	r3, r3, #28
 1527 0108 7A69     		ldr	r2, [r7, #20]
 1528 010a D269     		ldr	r2, [r2, #28]
 1529 010c 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1530              		.loc 1 294 0
 1531 010e BB69     		ldr	r3, [r7, #24]
 1532 0110 2033     		adds	r3, r3, #32
 1533 0112 7A69     		ldr	r2, [r7, #20]
 1534 0114 126A     		ldr	r2, [r2, #32]
 1535 0116 1A60     		str	r2, [r3]
 295:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1536              		.loc 1 295 0
 1537 0118 BB69     		ldr	r3, [r7, #24]
 1538 011a 2433     		adds	r3, r3, #36
 1539 011c 7A69     		ldr	r2, [r7, #20]
 1540 011e 526A     		ldr	r2, [r2, #36]
 1541 0120 1A60     		str	r2, [r3]
 296:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1542              		.loc 1 296 0
 1543 0122 BB69     		ldr	r3, [r7, #24]
 1544 0124 2833     		adds	r3, r3, #40
ARM GAS  /tmp/ccQUMSla.s 			page 32


 1545 0126 7A69     		ldr	r2, [r7, #20]
 1546 0128 926A     		ldr	r2, [r2, #40]
 1547 012a 1A60     		str	r2, [r3]
 297:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1548              		.loc 1 297 0
 1549 012c BB69     		ldr	r3, [r7, #24]
 1550 012e 2C33     		adds	r3, r3, #44
 1551 0130 7A69     		ldr	r2, [r7, #20]
 1552 0132 D26A     		ldr	r2, [r2, #44]
 1553 0134 1A60     		str	r2, [r3]
 298:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 299:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1554              		.loc 1 299 0
 1555 0136 FB69     		ldr	r3, [r7, #28]
 1556 0138 0E33     		adds	r3, r3, #14
 1557 013a 3B61     		str	r3, [r7, #16]
 300:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1558              		.loc 1 300 0
 1559 013c 3B68     		ldr	r3, [r7]
 1560 013e FB60     		str	r3, [r7, #12]
 301:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1561              		.loc 1 301 0
 1562 0140 3B69     		ldr	r3, [r7, #16]
 1563 0142 3033     		adds	r3, r3, #48
 1564 0144 FA68     		ldr	r2, [r7, #12]
 1565 0146 128E     		ldrh	r2, [r2, #48]
 1566 0148 1A80     		strh	r2, [r3]	@ movhi
 302:bluetooth_rxtx.c **** 
 303:bluetooth_rxtx.c **** 	f->status = status;
 1567              		.loc 1 303 0
 1568 014a 064B     		ldr	r3, .L25
 1569 014c 1B78     		ldrb	r3, [r3]
 1570 014e DAB2     		uxtb	r2, r3
 1571 0150 FB69     		ldr	r3, [r7, #28]
 1572 0152 5A70     		strb	r2, [r3, #1]
 304:bluetooth_rxtx.c **** 	status = 0;
 1573              		.loc 1 304 0
 1574 0154 034B     		ldr	r3, .L25
 1575 0156 0022     		movs	r2, #0
 1576 0158 1A70     		strb	r2, [r3]
 305:bluetooth_rxtx.c **** 
 306:bluetooth_rxtx.c **** 	return 1;
 1577              		.loc 1 306 0
 1578 015a 0123     		movs	r3, #1
 1579              	.L22:
 307:bluetooth_rxtx.c **** }
 1580              		.loc 1 307 0
 1581 015c 1846     		mov	r0, r3
 1582 015e 2037     		adds	r7, r7, #32
 1583              		.cfi_def_cfa_offset 8
 1584 0160 BD46     		mov	sp, r7
 1585              		.cfi_def_cfa_register 13
 1586              		@ sp needed
 1587 0162 80BD     		pop	{r7, pc}
 1588              	.L26:
 1589              		.align	2
 1590              	.L25:
ARM GAS  /tmp/ccQUMSla.s 			page 33


 1591 0164 00000000 		.word	status
 1592 0168 00000000 		.word	clkn
 1593 016c 08400040 		.word	1073758216
 1594 0170 00000000 		.word	idle_buf_clkn_high
 1595 0174 00000000 		.word	idle_buf_clk100ns
 1596 0178 00000000 		.word	idle_buf_channel
 1597 017c 00000000 		.word	rssi_min
 1598 0180 00000000 		.word	rssi_max
 1599 0184 00000000 		.word	device_index
 1600 0188 00000000 		.word	rssi_sum
 1601 018c 00000000 		.word	rssi_count
 1602 0190 38C00920 		.word	537509944
 1603              		.cfi_endproc
 1604              	.LFE4:
 1606              		.section	.text.enqueue_legacy,"ax",%progbits
 1607              		.align	2
 1608              		.thumb
 1609              		.thumb_func
 1611              	enqueue_legacy:
 1612              	.LFB5:
 308:bluetooth_rxtx.c **** 
 309:bluetooth_rxtx.c **** 
 310:bluetooth_rxtx.c **** static int enqueue_legacy(u8 type, u8 *buf)
 311:bluetooth_rxtx.c **** {
 1613              		.loc 1 311 0
 1614              		.cfi_startproc
 1615              		@ args = 0, pretend = 0, frame = 32
 1616              		@ frame_needed = 1, uses_anonymous_args = 0
 1617 0000 80B5     		push	{r7, lr}
 1618              		.cfi_def_cfa_offset 8
 1619              		.cfi_offset 7, -8
 1620              		.cfi_offset 14, -4
 1621 0002 88B0     		sub	sp, sp, #32
 1622              		.cfi_def_cfa_offset 40
 1623 0004 00AF     		add	r7, sp, #0
 1624              		.cfi_def_cfa_register 7
 1625 0006 0346     		mov	r3, r0
 1626 0008 3960     		str	r1, [r7]
 1627 000a FB71     		strb	r3, [r7, #7]
 312:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1628              		.loc 1 312 0
 1629 000c FFF7FEFF 		bl	usb_enqueue
 1630 0010 F861     		str	r0, [r7, #28]
 313:bluetooth_rxtx.c **** 
 314:bluetooth_rxtx.c **** 	/* fail if queue is full */
 315:bluetooth_rxtx.c **** 	if (f == NULL) {
 1631              		.loc 1 315 0
 1632 0012 FB69     		ldr	r3, [r7, #28]
 1633 0014 002B     		cmp	r3, #0
 1634 0016 09D1     		bne	.L28
 316:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1635              		.loc 1 316 0
 1636 0018 3D4B     		ldr	r3, .L30
 1637 001a 1B78     		ldrb	r3, [r3]
 1638 001c DBB2     		uxtb	r3, r3
 1639 001e 43F00403 		orr	r3, r3, #4
 1640 0022 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccQUMSla.s 			page 34


 1641 0024 3A4B     		ldr	r3, .L30
 1642 0026 1A70     		strb	r2, [r3]
 317:bluetooth_rxtx.c **** 		return 0;
 1643              		.loc 1 317 0
 1644 0028 0023     		movs	r3, #0
 1645 002a 6DE0     		b	.L29
 1646              	.L28:
 318:bluetooth_rxtx.c **** 	}
 319:bluetooth_rxtx.c **** 
 320:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1647              		.loc 1 320 0
 1648 002c FB69     		ldr	r3, [r7, #28]
 1649 002e FA79     		ldrb	r2, [r7, #7]
 1650 0030 1A70     		strb	r2, [r3]
 321:bluetooth_rxtx.c **** //	f->clkn_high = idle_buf_clkn_high;
 322:bluetooth_rxtx.c **** 	f->clk100ns = clkn;
 1651              		.loc 1 322 0
 1652 0032 384B     		ldr	r3, .L30+4
 1653 0034 1A68     		ldr	r2, [r3]
 1654 0036 FB69     		ldr	r3, [r7, #28]
 1655 0038 5A60     		str	r2, [r3, #4]
 323:bluetooth_rxtx.c **** 	
 324:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1656              		.loc 1 324 0
 1657 003a 374B     		ldr	r3, .L30+8
 1658 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1659 003e 9BB2     		uxth	r3, r3
 1660 0040 DBB2     		uxtb	r3, r3
 1661 0042 623B     		subs	r3, r3, #98
 1662 0044 DAB2     		uxtb	r2, r3
 1663 0046 FB69     		ldr	r3, [r7, #28]
 1664 0048 9A70     		strb	r2, [r3, #2]
 325:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 326:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 327:bluetooth_rxtx.c **** //	f->reserved[0] = device_index;
 328:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_sum/rssi_count;
 1665              		.loc 1 328 0
 1666 004a 344B     		ldr	r3, .L30+12
 1667 004c 1B68     		ldr	r3, [r3]
 1668 004e 344A     		ldr	r2, .L30+16
 1669 0050 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1670 0052 93FBF2F3 		sdiv	r3, r3, r2
 1671 0056 DAB2     		uxtb	r2, r3
 1672 0058 FB69     		ldr	r3, [r7, #28]
 1673 005a 9A72     		strb	r2, [r3, #10]
 329:bluetooth_rxtx.c **** 	
 330:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 331:bluetooth_rxtx.c **** 
 332:bluetooth_rxtx.c **** 	USRLED_SET;
 1674              		.loc 1 332 0
 1675 005c 314B     		ldr	r3, .L30+20
 1676 005e 0222     		movs	r2, #2
 1677 0060 1A60     		str	r2, [r3]
 333:bluetooth_rxtx.c **** 
 334:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 335:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1678              		.loc 1 335 0
ARM GAS  /tmp/ccQUMSla.s 			page 35


 1679 0062 FB69     		ldr	r3, [r7, #28]
 1680 0064 0E33     		adds	r3, r3, #14
 1681 0066 BB61     		str	r3, [r7, #24]
 336:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1682              		.loc 1 336 0
 1683 0068 3B68     		ldr	r3, [r7]
 1684 006a 7B61     		str	r3, [r7, #20]
 337:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1685              		.loc 1 337 0
 1686 006c 7B69     		ldr	r3, [r7, #20]
 1687 006e 1A68     		ldr	r2, [r3]
 1688 0070 BB69     		ldr	r3, [r7, #24]
 1689 0072 1A60     		str	r2, [r3]
 338:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1690              		.loc 1 338 0
 1691 0074 BB69     		ldr	r3, [r7, #24]
 1692 0076 0433     		adds	r3, r3, #4
 1693 0078 7A69     		ldr	r2, [r7, #20]
 1694 007a 5268     		ldr	r2, [r2, #4]
 1695 007c 1A60     		str	r2, [r3]
 339:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1696              		.loc 1 339 0
 1697 007e BB69     		ldr	r3, [r7, #24]
 1698 0080 0833     		adds	r3, r3, #8
 1699 0082 7A69     		ldr	r2, [r7, #20]
 1700 0084 9268     		ldr	r2, [r2, #8]
 1701 0086 1A60     		str	r2, [r3]
 340:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1702              		.loc 1 340 0
 1703 0088 BB69     		ldr	r3, [r7, #24]
 1704 008a 0C33     		adds	r3, r3, #12
 1705 008c 7A69     		ldr	r2, [r7, #20]
 1706 008e D268     		ldr	r2, [r2, #12]
 1707 0090 1A60     		str	r2, [r3]
 341:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1708              		.loc 1 341 0
 1709 0092 BB69     		ldr	r3, [r7, #24]
 1710 0094 1033     		adds	r3, r3, #16
 1711 0096 7A69     		ldr	r2, [r7, #20]
 1712 0098 1269     		ldr	r2, [r2, #16]
 1713 009a 1A60     		str	r2, [r3]
 342:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1714              		.loc 1 342 0
 1715 009c BB69     		ldr	r3, [r7, #24]
 1716 009e 1433     		adds	r3, r3, #20
 1717 00a0 7A69     		ldr	r2, [r7, #20]
 1718 00a2 5269     		ldr	r2, [r2, #20]
 1719 00a4 1A60     		str	r2, [r3]
 343:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1720              		.loc 1 343 0
 1721 00a6 BB69     		ldr	r3, [r7, #24]
 1722 00a8 1833     		adds	r3, r3, #24
 1723 00aa 7A69     		ldr	r2, [r7, #20]
 1724 00ac 9269     		ldr	r2, [r2, #24]
 1725 00ae 1A60     		str	r2, [r3]
 344:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1726              		.loc 1 344 0
ARM GAS  /tmp/ccQUMSla.s 			page 36


 1727 00b0 BB69     		ldr	r3, [r7, #24]
 1728 00b2 1C33     		adds	r3, r3, #28
 1729 00b4 7A69     		ldr	r2, [r7, #20]
 1730 00b6 D269     		ldr	r2, [r2, #28]
 1731 00b8 1A60     		str	r2, [r3]
 345:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1732              		.loc 1 345 0
 1733 00ba BB69     		ldr	r3, [r7, #24]
 1734 00bc 2033     		adds	r3, r3, #32
 1735 00be 7A69     		ldr	r2, [r7, #20]
 1736 00c0 126A     		ldr	r2, [r2, #32]
 1737 00c2 1A60     		str	r2, [r3]
 346:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1738              		.loc 1 346 0
 1739 00c4 BB69     		ldr	r3, [r7, #24]
 1740 00c6 2433     		adds	r3, r3, #36
 1741 00c8 7A69     		ldr	r2, [r7, #20]
 1742 00ca 526A     		ldr	r2, [r2, #36]
 1743 00cc 1A60     		str	r2, [r3]
 347:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1744              		.loc 1 347 0
 1745 00ce BB69     		ldr	r3, [r7, #24]
 1746 00d0 2833     		adds	r3, r3, #40
 1747 00d2 7A69     		ldr	r2, [r7, #20]
 1748 00d4 926A     		ldr	r2, [r2, #40]
 1749 00d6 1A60     		str	r2, [r3]
 348:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1750              		.loc 1 348 0
 1751 00d8 BB69     		ldr	r3, [r7, #24]
 1752 00da 2C33     		adds	r3, r3, #44
 1753 00dc 7A69     		ldr	r2, [r7, #20]
 1754 00de D26A     		ldr	r2, [r2, #44]
 1755 00e0 1A60     		str	r2, [r3]
 349:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 350:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1756              		.loc 1 350 0
 1757 00e2 FB69     		ldr	r3, [r7, #28]
 1758 00e4 0E33     		adds	r3, r3, #14
 1759 00e6 3B61     		str	r3, [r7, #16]
 351:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1760              		.loc 1 351 0
 1761 00e8 3B68     		ldr	r3, [r7]
 1762 00ea FB60     		str	r3, [r7, #12]
 352:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1763              		.loc 1 352 0
 1764 00ec 3B69     		ldr	r3, [r7, #16]
 1765 00ee 3033     		adds	r3, r3, #48
 1766 00f0 FA68     		ldr	r2, [r7, #12]
 1767 00f2 128E     		ldrh	r2, [r2, #48]
 1768 00f4 1A80     		strh	r2, [r3]	@ movhi
 353:bluetooth_rxtx.c **** 
 354:bluetooth_rxtx.c **** 	f->status = status;
 1769              		.loc 1 354 0
 1770 00f6 064B     		ldr	r3, .L30
 1771 00f8 1B78     		ldrb	r3, [r3]
 1772 00fa DAB2     		uxtb	r2, r3
 1773 00fc FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/ccQUMSla.s 			page 37


 1774 00fe 5A70     		strb	r2, [r3, #1]
 355:bluetooth_rxtx.c **** 	status = 0;
 1775              		.loc 1 355 0
 1776 0100 034B     		ldr	r3, .L30
 1777 0102 0022     		movs	r2, #0
 1778 0104 1A70     		strb	r2, [r3]
 356:bluetooth_rxtx.c **** 
 357:bluetooth_rxtx.c **** 	return 1;
 1779              		.loc 1 357 0
 1780 0106 0123     		movs	r3, #1
 1781              	.L29:
 358:bluetooth_rxtx.c **** }
 1782              		.loc 1 358 0
 1783 0108 1846     		mov	r0, r3
 1784 010a 2037     		adds	r7, r7, #32
 1785              		.cfi_def_cfa_offset 8
 1786 010c BD46     		mov	sp, r7
 1787              		.cfi_def_cfa_register 13
 1788              		@ sp needed
 1789 010e 80BD     		pop	{r7, pc}
 1790              	.L31:
 1791              		.align	2
 1792              	.L30:
 1793 0110 00000000 		.word	status
 1794 0114 00000000 		.word	clkn
 1795 0118 00000000 		.word	idle_buf_channel
 1796 011c 00000000 		.word	rssi_sum
 1797 0120 00000000 		.word	rssi_count
 1798 0124 38C00920 		.word	537509944
 1799              		.cfi_endproc
 1800              	.LFE5:
 1802              		.section	.text.enqueue_freq,"ax",%progbits
 1803              		.align	2
 1804              		.thumb
 1805              		.thumb_func
 1807              	enqueue_freq:
 1808              	.LFB6:
 359:bluetooth_rxtx.c **** 
 360:bluetooth_rxtx.c **** 
 361:bluetooth_rxtx.c **** 
 362:bluetooth_rxtx.c **** static int enqueue_freq(u8 type, u8 *buf)
 363:bluetooth_rxtx.c **** {
 1809              		.loc 1 363 0
 1810              		.cfi_startproc
 1811              		@ args = 0, pretend = 0, frame = 32
 1812              		@ frame_needed = 1, uses_anonymous_args = 0
 1813 0000 80B5     		push	{r7, lr}
 1814              		.cfi_def_cfa_offset 8
 1815              		.cfi_offset 7, -8
 1816              		.cfi_offset 14, -4
 1817 0002 88B0     		sub	sp, sp, #32
 1818              		.cfi_def_cfa_offset 40
 1819 0004 00AF     		add	r7, sp, #0
 1820              		.cfi_def_cfa_register 7
 1821 0006 0346     		mov	r3, r0
 1822 0008 3960     		str	r1, [r7]
 1823 000a FB71     		strb	r3, [r7, #7]
ARM GAS  /tmp/ccQUMSla.s 			page 38


 364:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1824              		.loc 1 364 0
 1825 000c FFF7FEFF 		bl	usb_enqueue
 1826 0010 F861     		str	r0, [r7, #28]
 365:bluetooth_rxtx.c **** 
 366:bluetooth_rxtx.c **** 	/* fail if queue is full */
 367:bluetooth_rxtx.c **** 	if (f == NULL) {
 1827              		.loc 1 367 0
 1828 0012 FB69     		ldr	r3, [r7, #28]
 1829 0014 002B     		cmp	r3, #0
 1830 0016 09D1     		bne	.L33
 368:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1831              		.loc 1 368 0
 1832 0018 3D4B     		ldr	r3, .L35
 1833 001a 1B78     		ldrb	r3, [r3]
 1834 001c DBB2     		uxtb	r3, r3
 1835 001e 43F00403 		orr	r3, r3, #4
 1836 0022 DAB2     		uxtb	r2, r3
 1837 0024 3A4B     		ldr	r3, .L35
 1838 0026 1A70     		strb	r2, [r3]
 369:bluetooth_rxtx.c **** 		return 0;
 1839              		.loc 1 369 0
 1840 0028 0023     		movs	r3, #0
 1841 002a 6DE0     		b	.L34
 1842              	.L33:
 370:bluetooth_rxtx.c **** 	}
 371:bluetooth_rxtx.c **** 
 372:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1843              		.loc 1 372 0
 1844 002c FB69     		ldr	r3, [r7, #28]
 1845 002e FA79     		ldrb	r2, [r7, #7]
 1846 0030 1A70     		strb	r2, [r3]
 373:bluetooth_rxtx.c **** 	
 374:bluetooth_rxtx.c **** 	f->clkn_high = idle_buf_clkn_high;
 1847              		.loc 1 374 0
 1848 0032 384B     		ldr	r3, .L35+4
 1849 0034 1B68     		ldr	r3, [r3]
 1850 0036 DAB2     		uxtb	r2, r3
 1851 0038 FB69     		ldr	r3, [r7, #28]
 1852 003a DA70     		strb	r2, [r3, #3]
 375:bluetooth_rxtx.c **** 	f->clk100ns = clkn;
 1853              		.loc 1 375 0
 1854 003c 364B     		ldr	r3, .L35+8
 1855 003e 1A68     		ldr	r2, [r3]
 1856 0040 FB69     		ldr	r3, [r7, #28]
 1857 0042 5A60     		str	r2, [r3, #4]
 376:bluetooth_rxtx.c **** 	
 377:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1858              		.loc 1 377 0
 1859 0044 354B     		ldr	r3, .L35+12
 1860 0046 1B88     		ldrh	r3, [r3]	@ movhi
 1861 0048 9BB2     		uxth	r3, r3
 1862 004a DBB2     		uxtb	r3, r3
 1863 004c 623B     		subs	r3, r3, #98
 1864 004e DAB2     		uxtb	r2, r3
 1865 0050 FB69     		ldr	r3, [r7, #28]
 1866 0052 9A70     		strb	r2, [r3, #2]
ARM GAS  /tmp/ccQUMSla.s 			page 39


 378:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 379:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 380:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
 1867              		.loc 1 380 0
 1868 0054 324B     		ldr	r3, .L35+16
 1869 0056 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1870 0058 FB69     		ldr	r3, [r7, #28]
 1871 005a 1A73     		strb	r2, [r3, #12]
 381:bluetooth_rxtx.c **** //	f->rssi_avg = rssi_sum/rssi_count;
 382:bluetooth_rxtx.c **** 
 383:bluetooth_rxtx.c **** 	USRLED_SET;
 1872              		.loc 1 383 0
 1873 005c 314B     		ldr	r3, .L35+20
 1874 005e 0222     		movs	r2, #2
 1875 0060 1A60     		str	r2, [r3]
 384:bluetooth_rxtx.c **** 
 385:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 386:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1876              		.loc 1 386 0
 1877 0062 FB69     		ldr	r3, [r7, #28]
 1878 0064 0E33     		adds	r3, r3, #14
 1879 0066 BB61     		str	r3, [r7, #24]
 387:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1880              		.loc 1 387 0
 1881 0068 3B68     		ldr	r3, [r7]
 1882 006a 7B61     		str	r3, [r7, #20]
 388:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1883              		.loc 1 388 0
 1884 006c 7B69     		ldr	r3, [r7, #20]
 1885 006e 1A68     		ldr	r2, [r3]
 1886 0070 BB69     		ldr	r3, [r7, #24]
 1887 0072 1A60     		str	r2, [r3]
 389:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1888              		.loc 1 389 0
 1889 0074 BB69     		ldr	r3, [r7, #24]
 1890 0076 0433     		adds	r3, r3, #4
 1891 0078 7A69     		ldr	r2, [r7, #20]
 1892 007a 5268     		ldr	r2, [r2, #4]
 1893 007c 1A60     		str	r2, [r3]
 390:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1894              		.loc 1 390 0
 1895 007e BB69     		ldr	r3, [r7, #24]
 1896 0080 0833     		adds	r3, r3, #8
 1897 0082 7A69     		ldr	r2, [r7, #20]
 1898 0084 9268     		ldr	r2, [r2, #8]
 1899 0086 1A60     		str	r2, [r3]
 391:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1900              		.loc 1 391 0
 1901 0088 BB69     		ldr	r3, [r7, #24]
 1902 008a 0C33     		adds	r3, r3, #12
 1903 008c 7A69     		ldr	r2, [r7, #20]
 1904 008e D268     		ldr	r2, [r2, #12]
 1905 0090 1A60     		str	r2, [r3]
 392:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1906              		.loc 1 392 0
 1907 0092 BB69     		ldr	r3, [r7, #24]
 1908 0094 1033     		adds	r3, r3, #16
ARM GAS  /tmp/ccQUMSla.s 			page 40


 1909 0096 7A69     		ldr	r2, [r7, #20]
 1910 0098 1269     		ldr	r2, [r2, #16]
 1911 009a 1A60     		str	r2, [r3]
 393:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1912              		.loc 1 393 0
 1913 009c BB69     		ldr	r3, [r7, #24]
 1914 009e 1433     		adds	r3, r3, #20
 1915 00a0 7A69     		ldr	r2, [r7, #20]
 1916 00a2 5269     		ldr	r2, [r2, #20]
 1917 00a4 1A60     		str	r2, [r3]
 394:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1918              		.loc 1 394 0
 1919 00a6 BB69     		ldr	r3, [r7, #24]
 1920 00a8 1833     		adds	r3, r3, #24
 1921 00aa 7A69     		ldr	r2, [r7, #20]
 1922 00ac 9269     		ldr	r2, [r2, #24]
 1923 00ae 1A60     		str	r2, [r3]
 395:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1924              		.loc 1 395 0
 1925 00b0 BB69     		ldr	r3, [r7, #24]
 1926 00b2 1C33     		adds	r3, r3, #28
 1927 00b4 7A69     		ldr	r2, [r7, #20]
 1928 00b6 D269     		ldr	r2, [r2, #28]
 1929 00b8 1A60     		str	r2, [r3]
 396:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1930              		.loc 1 396 0
 1931 00ba BB69     		ldr	r3, [r7, #24]
 1932 00bc 2033     		adds	r3, r3, #32
 1933 00be 7A69     		ldr	r2, [r7, #20]
 1934 00c0 126A     		ldr	r2, [r2, #32]
 1935 00c2 1A60     		str	r2, [r3]
 397:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1936              		.loc 1 397 0
 1937 00c4 BB69     		ldr	r3, [r7, #24]
 1938 00c6 2433     		adds	r3, r3, #36
 1939 00c8 7A69     		ldr	r2, [r7, #20]
 1940 00ca 526A     		ldr	r2, [r2, #36]
 1941 00cc 1A60     		str	r2, [r3]
 398:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1942              		.loc 1 398 0
 1943 00ce BB69     		ldr	r3, [r7, #24]
 1944 00d0 2833     		adds	r3, r3, #40
 1945 00d2 7A69     		ldr	r2, [r7, #20]
 1946 00d4 926A     		ldr	r2, [r2, #40]
 1947 00d6 1A60     		str	r2, [r3]
 399:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1948              		.loc 1 399 0
 1949 00d8 BB69     		ldr	r3, [r7, #24]
 1950 00da 2C33     		adds	r3, r3, #44
 1951 00dc 7A69     		ldr	r2, [r7, #20]
 1952 00de D26A     		ldr	r2, [r2, #44]
 1953 00e0 1A60     		str	r2, [r3]
 400:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 401:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1954              		.loc 1 401 0
 1955 00e2 FB69     		ldr	r3, [r7, #28]
 1956 00e4 0E33     		adds	r3, r3, #14
ARM GAS  /tmp/ccQUMSla.s 			page 41


 1957 00e6 3B61     		str	r3, [r7, #16]
 402:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1958              		.loc 1 402 0
 1959 00e8 3B68     		ldr	r3, [r7]
 1960 00ea FB60     		str	r3, [r7, #12]
 403:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1961              		.loc 1 403 0
 1962 00ec 3B69     		ldr	r3, [r7, #16]
 1963 00ee 3033     		adds	r3, r3, #48
 1964 00f0 FA68     		ldr	r2, [r7, #12]
 1965 00f2 128E     		ldrh	r2, [r2, #48]
 1966 00f4 1A80     		strh	r2, [r3]	@ movhi
 404:bluetooth_rxtx.c **** 
 405:bluetooth_rxtx.c **** 	f->status = status;
 1967              		.loc 1 405 0
 1968 00f6 064B     		ldr	r3, .L35
 1969 00f8 1B78     		ldrb	r3, [r3]
 1970 00fa DAB2     		uxtb	r2, r3
 1971 00fc FB69     		ldr	r3, [r7, #28]
 1972 00fe 5A70     		strb	r2, [r3, #1]
 406:bluetooth_rxtx.c **** 	status = 0;
 1973              		.loc 1 406 0
 1974 0100 034B     		ldr	r3, .L35
 1975 0102 0022     		movs	r2, #0
 1976 0104 1A70     		strb	r2, [r3]
 407:bluetooth_rxtx.c **** 
 408:bluetooth_rxtx.c **** 	return 1;
 1977              		.loc 1 408 0
 1978 0106 0123     		movs	r3, #1
 1979              	.L34:
 409:bluetooth_rxtx.c **** }
 1980              		.loc 1 409 0
 1981 0108 1846     		mov	r0, r3
 1982 010a 2037     		adds	r7, r7, #32
 1983              		.cfi_def_cfa_offset 8
 1984 010c BD46     		mov	sp, r7
 1985              		.cfi_def_cfa_register 13
 1986              		@ sp needed
 1987 010e 80BD     		pop	{r7, pc}
 1988              	.L36:
 1989              		.align	2
 1990              	.L35:
 1991 0110 00000000 		.word	status
 1992 0114 00000000 		.word	idle_buf_clkn_high
 1993 0118 00000000 		.word	clkn
 1994 011c 00000000 		.word	idle_buf_channel
 1995 0120 00000000 		.word	device_index
 1996 0124 38C00920 		.word	537509944
 1997              		.cfi_endproc
 1998              	.LFE6:
 2000              		.section	.text.enqueue_proposed,"ax",%progbits
 2001              		.align	2
 2002              		.thumb
 2003              		.thumb_func
 2005              	enqueue_proposed:
 2006              	.LFB7:
 410:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 42


 411:bluetooth_rxtx.c **** 
 412:bluetooth_rxtx.c **** 
 413:bluetooth_rxtx.c **** static int enqueue_proposed(u8 type, u8 *buf)
 414:bluetooth_rxtx.c **** {
 2007              		.loc 1 414 0
 2008              		.cfi_startproc
 2009              		@ args = 0, pretend = 0, frame = 16
 2010              		@ frame_needed = 1, uses_anonymous_args = 0
 2011 0000 80B5     		push	{r7, lr}
 2012              		.cfi_def_cfa_offset 8
 2013              		.cfi_offset 7, -8
 2014              		.cfi_offset 14, -4
 2015 0002 84B0     		sub	sp, sp, #16
 2016              		.cfi_def_cfa_offset 24
 2017 0004 00AF     		add	r7, sp, #0
 2018              		.cfi_def_cfa_register 7
 2019 0006 0346     		mov	r3, r0
 2020 0008 3960     		str	r1, [r7]
 2021 000a FB71     		strb	r3, [r7, #7]
 415:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 2022              		.loc 1 415 0
 2023 000c FFF7FEFF 		bl	usb_enqueue
 2024 0010 F860     		str	r0, [r7, #12]
 416:bluetooth_rxtx.c **** 
 417:bluetooth_rxtx.c **** 	/* fail if queue is full */
 418:bluetooth_rxtx.c **** 	if (f == NULL) {
 2025              		.loc 1 418 0
 2026 0012 FB68     		ldr	r3, [r7, #12]
 2027 0014 002B     		cmp	r3, #0
 2028 0016 09D1     		bne	.L38
 419:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 2029              		.loc 1 419 0
 2030 0018 184B     		ldr	r3, .L40
 2031 001a 1B78     		ldrb	r3, [r3]
 2032 001c DBB2     		uxtb	r3, r3
 2033 001e 43F00403 		orr	r3, r3, #4
 2034 0022 DAB2     		uxtb	r2, r3
 2035 0024 154B     		ldr	r3, .L40
 2036 0026 1A70     		strb	r2, [r3]
 420:bluetooth_rxtx.c **** 		return 0;
 2037              		.loc 1 420 0
 2038 0028 0023     		movs	r3, #0
 2039 002a 22E0     		b	.L39
 2040              	.L38:
 421:bluetooth_rxtx.c **** 	}
 422:bluetooth_rxtx.c **** 
 423:bluetooth_rxtx.c **** 	f->pkt_type = type;
 2041              		.loc 1 423 0
 2042 002c FB68     		ldr	r3, [r7, #12]
 2043 002e FA79     		ldrb	r2, [r7, #7]
 2044 0030 1A70     		strb	r2, [r3]
 424:bluetooth_rxtx.c **** //	f->clkn_high = idle_buf_clkn_high;
 425:bluetooth_rxtx.c **** 	f->clk100ns = clkn;
 2045              		.loc 1 425 0
 2046 0032 134B     		ldr	r3, .L40+4
 2047 0034 1A68     		ldr	r2, [r3]
 2048 0036 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccQUMSla.s 			page 43


 2049 0038 5A60     		str	r2, [r3, #4]
 426:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 2050              		.loc 1 426 0
 2051 003a 124B     		ldr	r3, .L40+8
 2052 003c 1B88     		ldrh	r3, [r3]	@ movhi
 2053 003e 9BB2     		uxth	r3, r3
 2054 0040 DBB2     		uxtb	r3, r3
 2055 0042 623B     		subs	r3, r3, #98
 2056 0044 DAB2     		uxtb	r2, r3
 2057 0046 FB68     		ldr	r3, [r7, #12]
 2058 0048 9A70     		strb	r2, [r3, #2]
 427:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 428:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 429:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 2059              		.loc 1 429 0
 2060 004a 0F4B     		ldr	r3, .L40+12
 2061 004c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2062 004e FB68     		ldr	r3, [r7, #12]
 2063 0050 9A72     		strb	r2, [r3, #10]
 430:bluetooth_rxtx.c **** 	
 431:bluetooth_rxtx.c **** 	f->reserved[1] = freq_avg;
 2064              		.loc 1 431 0
 2065 0052 0E4B     		ldr	r3, .L40+16
 2066 0054 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2067 0056 FB68     		ldr	r3, [r7, #12]
 2068 0058 5A73     		strb	r2, [r3, #13]
 432:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 433:bluetooth_rxtx.c **** 
 434:bluetooth_rxtx.c **** 	USRLED_SET;
 2069              		.loc 1 434 0
 2070 005a 0D4B     		ldr	r3, .L40+20
 2071 005c 0222     		movs	r2, #2
 2072 005e 1A60     		str	r2, [r3]
 435:bluetooth_rxtx.c **** 
 436:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 437:bluetooth_rxtx.c **** /*	u32 *p1 = (u32 *)f->data;
 438:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 439:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 440:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 441:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 442:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 443:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 444:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 445:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 446:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 447:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 448:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 449:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 450:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 451:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 452:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 453:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 454:bluetooth_rxtx.c **** */
 455:bluetooth_rxtx.c **** 	f->status = status;
 2073              		.loc 1 455 0
 2074 0060 064B     		ldr	r3, .L40
 2075 0062 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 44


 2076 0064 DAB2     		uxtb	r2, r3
 2077 0066 FB68     		ldr	r3, [r7, #12]
 2078 0068 5A70     		strb	r2, [r3, #1]
 456:bluetooth_rxtx.c **** 	status = 0;
 2079              		.loc 1 456 0
 2080 006a 044B     		ldr	r3, .L40
 2081 006c 0022     		movs	r2, #0
 2082 006e 1A70     		strb	r2, [r3]
 457:bluetooth_rxtx.c **** 
 458:bluetooth_rxtx.c **** 	return 1;
 2083              		.loc 1 458 0
 2084 0070 0123     		movs	r3, #1
 2085              	.L39:
 459:bluetooth_rxtx.c **** }
 2086              		.loc 1 459 0
 2087 0072 1846     		mov	r0, r3
 2088 0074 1037     		adds	r7, r7, #16
 2089              		.cfi_def_cfa_offset 8
 2090 0076 BD46     		mov	sp, r7
 2091              		.cfi_def_cfa_register 13
 2092              		@ sp needed
 2093 0078 80BD     		pop	{r7, pc}
 2094              	.L41:
 2095 007a 00BF     		.align	2
 2096              	.L40:
 2097 007c 00000000 		.word	status
 2098 0080 00000000 		.word	clkn
 2099 0084 00000000 		.word	idle_buf_channel
 2100 0088 00000000 		.word	rssi_avg
 2101 008c 00000000 		.word	freq_avg
 2102 0090 38C00920 		.word	537509944
 2103              		.cfi_endproc
 2104              	.LFE7:
 2106              		.section	.text.enqueue_with_ts,"ax",%progbits
 2107              		.align	2
 2108              		.global	enqueue_with_ts
 2109              		.thumb
 2110              		.thumb_func
 2112              	enqueue_with_ts:
 2113              	.LFB8:
 460:bluetooth_rxtx.c **** 
 461:bluetooth_rxtx.c **** 
 462:bluetooth_rxtx.c **** 
 463:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 464:bluetooth_rxtx.c **** {
 2114              		.loc 1 464 0
 2115              		.cfi_startproc
 2116              		@ args = 0, pretend = 0, frame = 24
 2117              		@ frame_needed = 1, uses_anonymous_args = 0
 2118 0000 80B5     		push	{r7, lr}
 2119              		.cfi_def_cfa_offset 8
 2120              		.cfi_offset 7, -8
 2121              		.cfi_offset 14, -4
 2122 0002 86B0     		sub	sp, sp, #24
 2123              		.cfi_def_cfa_offset 32
 2124 0004 00AF     		add	r7, sp, #0
 2125              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccQUMSla.s 			page 45


 2126 0006 0346     		mov	r3, r0
 2127 0008 B960     		str	r1, [r7, #8]
 2128 000a 7A60     		str	r2, [r7, #4]
 2129 000c FB73     		strb	r3, [r7, #15]
 465:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 2130              		.loc 1 465 0
 2131 000e FFF7FEFF 		bl	usb_enqueue
 2132 0012 7861     		str	r0, [r7, #20]
 466:bluetooth_rxtx.c **** 
 467:bluetooth_rxtx.c **** 	/* fail if queue is full */
 468:bluetooth_rxtx.c **** 	if (f == NULL) {
 2133              		.loc 1 468 0
 2134 0014 7B69     		ldr	r3, [r7, #20]
 2135 0016 002B     		cmp	r3, #0
 2136 0018 09D1     		bne	.L43
 469:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 2137              		.loc 1 469 0
 2138 001a 144B     		ldr	r3, .L45
 2139 001c 1B78     		ldrb	r3, [r3]
 2140 001e DBB2     		uxtb	r3, r3
 2141 0020 43F00403 		orr	r3, r3, #4
 2142 0024 DAB2     		uxtb	r2, r3
 2143 0026 114B     		ldr	r3, .L45
 2144 0028 1A70     		strb	r2, [r3]
 470:bluetooth_rxtx.c **** 		return 0;
 2145              		.loc 1 470 0
 2146 002a 0023     		movs	r3, #0
 2147 002c 19E0     		b	.L44
 2148              	.L43:
 471:bluetooth_rxtx.c **** 	}
 472:bluetooth_rxtx.c **** 
 473:bluetooth_rxtx.c **** 	f->pkt_type = type;
 2149              		.loc 1 473 0
 2150 002e 7B69     		ldr	r3, [r7, #20]
 2151 0030 FA7B     		ldrb	r2, [r7, #15]
 2152 0032 1A70     		strb	r2, [r3]
 474:bluetooth_rxtx.c **** //	f->clkn_high = 0;
 475:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 2153              		.loc 1 475 0
 2154 0034 7B69     		ldr	r3, [r7, #20]
 2155 0036 7A68     		ldr	r2, [r7, #4]
 2156 0038 5A60     		str	r2, [r3, #4]
 476:bluetooth_rxtx.c **** 
 477:bluetooth_rxtx.c **** //	f->channel = channel - 2402;
 478:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 2157              		.loc 1 478 0
 2158 003a 0D4B     		ldr	r3, .L45+4
 2159 003c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2160 003e 7B69     		ldr	r3, [r7, #20]
 2161 0040 9A72     		strb	r2, [r3, #10]
 479:bluetooth_rxtx.c **** 	f->rssi_count = freq_avg;
 2162              		.loc 1 479 0
 2163 0042 0C4B     		ldr	r3, .L45+8
 2164 0044 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2165 0046 7B69     		ldr	r3, [r7, #20]
 2166 0048 DA72     		strb	r2, [r3, #11]
 480:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 46


 481:bluetooth_rxtx.c **** 	USRLED_SET;
 2167              		.loc 1 481 0
 2168 004a 0B4B     		ldr	r3, .L45+12
 2169 004c 0222     		movs	r2, #2
 2170 004e 1A60     		str	r2, [r3]
 482:bluetooth_rxtx.c **** 
 483:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 484:bluetooth_rxtx.c **** /*	u32 *p1 = (u32 *)f->data;
 485:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 486:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 487:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 488:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 489:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 490:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 491:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 492:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 493:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 494:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 495:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 496:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 497:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 498:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 499:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 500:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 501:bluetooth_rxtx.c **** */
 502:bluetooth_rxtx.c **** 	f->status = status;
 2171              		.loc 1 502 0
 2172 0050 064B     		ldr	r3, .L45
 2173 0052 1B78     		ldrb	r3, [r3]
 2174 0054 DAB2     		uxtb	r2, r3
 2175 0056 7B69     		ldr	r3, [r7, #20]
 2176 0058 5A70     		strb	r2, [r3, #1]
 503:bluetooth_rxtx.c **** 	status = 0;
 2177              		.loc 1 503 0
 2178 005a 044B     		ldr	r3, .L45
 2179 005c 0022     		movs	r2, #0
 2180 005e 1A70     		strb	r2, [r3]
 504:bluetooth_rxtx.c **** 
 505:bluetooth_rxtx.c **** 	return 1;
 2181              		.loc 1 505 0
 2182 0060 0123     		movs	r3, #1
 2183              	.L44:
 506:bluetooth_rxtx.c **** }
 2184              		.loc 1 506 0
 2185 0062 1846     		mov	r0, r3
 2186 0064 1837     		adds	r7, r7, #24
 2187              		.cfi_def_cfa_offset 8
 2188 0066 BD46     		mov	sp, r7
 2189              		.cfi_def_cfa_register 13
 2190              		@ sp needed
 2191 0068 80BD     		pop	{r7, pc}
 2192              	.L46:
 2193 006a 00BF     		.align	2
 2194              	.L45:
 2195 006c 00000000 		.word	status
 2196 0070 00000000 		.word	rssi_avg
 2197 0074 00000000 		.word	freq_avg
ARM GAS  /tmp/ccQUMSla.s 			page 47


 2198 0078 38C00920 		.word	537509944
 2199              		.cfi_endproc
 2200              	.LFE8:
 2202              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 2203              		.align	2
 2204              		.thumb
 2205              		.thumb_func
 2207              	cs_threshold_calc_and_set:
 2208              	.LFB9:
 507:bluetooth_rxtx.c **** 
 508:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 509:bluetooth_rxtx.c **** {
 2209              		.loc 1 509 0
 2210              		.cfi_startproc
 2211              		@ args = 0, pretend = 0, frame = 8
 2212              		@ frame_needed = 1, uses_anonymous_args = 0
 2213 0000 80B5     		push	{r7, lr}
 2214              		.cfi_def_cfa_offset 8
 2215              		.cfi_offset 7, -8
 2216              		.cfi_offset 14, -4
 2217 0002 82B0     		sub	sp, sp, #8
 2218              		.cfi_def_cfa_offset 16
 2219 0004 00AF     		add	r7, sp, #0
 2220              		.cfi_def_cfa_register 7
 510:bluetooth_rxtx.c **** 	int8_t level;
 511:bluetooth_rxtx.c **** 
 512:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 513:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 514:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 515:bluetooth_rxtx.c **** 	 * value for it. */
 516:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 2221              		.loc 1 516 0
 2222 0006 174B     		ldr	r3, .L51
 2223 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2224 000a 002B     		cmp	r3, #0
 2225 000c 1DD0     		beq	.L48
 2226              		.loc 1 516 0 is_stmt 0 discriminator 1
 2227 000e 164B     		ldr	r3, .L51+4
 2228 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2229 0012 5BB2     		sxtb	r3, r3
 2230 0014 002B     		cmp	r3, #0
 2231 0016 18DD     		ble	.L48
 2232              	.LBB2:
 517:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 2233              		.loc 1 517 0 is_stmt 1
 2234 0018 144B     		ldr	r3, .L51+8
 2235 001a 1B88     		ldrh	r3, [r3]	@ movhi
 2236 001c 9BB2     		uxth	r3, r3
 2237 001e A3F66213 		subw	r3, r3, #2402
 2238 0022 134A     		ldr	r2, .L51+12
 2239 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 2240 0028 1BB2     		sxth	r3, r3
 2241 002a 8033     		adds	r3, r3, #128
 2242 002c 002B     		cmp	r3, #0
 2243 002e 00DA     		bge	.L49
 2244 0030 FF33     		adds	r3, r3, #255
 2245              	.L49:
ARM GAS  /tmp/ccQUMSla.s 			page 48


 2246 0032 1B12     		asrs	r3, r3, #8
 2247 0034 BB71     		strb	r3, [r7, #6]
 518:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 2248              		.loc 1 518 0
 2249 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 2250 0038 0B4B     		ldr	r3, .L51+4
 2251 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2252 003c DBB2     		uxtb	r3, r3
 2253 003e 1344     		add	r3, r3, r2
 2254 0040 DBB2     		uxtb	r3, r3
 2255 0042 363B     		subs	r3, r3, #54
 2256 0044 DBB2     		uxtb	r3, r3
 2257 0046 FB71     		strb	r3, [r7, #7]
 2258              	.LBE2:
 516:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 2259              		.loc 1 516 0
 2260 0048 02E0     		b	.L50
 2261              	.L48:
 519:bluetooth_rxtx.c **** 	}
 520:bluetooth_rxtx.c **** 	else {
 521:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 2262              		.loc 1 521 0
 2263 004a 074B     		ldr	r3, .L51+4
 2264 004c 1B78     		ldrb	r3, [r3]
 2265 004e FB71     		strb	r3, [r7, #7]
 2266              	.L50:
 522:bluetooth_rxtx.c **** 	}
 523:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 2267              		.loc 1 523 0
 2268 0050 97F90730 		ldrsb	r3, [r7, #7]
 2269 0054 1846     		mov	r0, r3
 2270 0056 0321     		movs	r1, #3
 2271 0058 FFF7FEFF 		bl	cs_threshold_set
 524:bluetooth_rxtx.c **** }
 2272              		.loc 1 524 0
 2273 005c 0837     		adds	r7, r7, #8
 2274              		.cfi_def_cfa_offset 8
 2275 005e BD46     		mov	sp, r7
 2276              		.cfi_def_cfa_register 13
 2277              		@ sp needed
 2278 0060 80BD     		pop	{r7, pc}
 2279              	.L52:
 2280 0062 00BF     		.align	2
 2281              	.L51:
 2282 0064 00000000 		.word	hop_mode
 2283 0068 00000000 		.word	cs_threshold_req
 2284 006c 00000000 		.word	channel
 2285 0070 00000000 		.word	rssi_iir
 2286              		.cfi_endproc
 2287              	.LFE9:
 2289              		.section	.text.cs_trigger_enable,"ax",%progbits
 2290              		.align	2
 2291              		.thumb
 2292              		.thumb_func
 2294              	cs_trigger_enable:
 2295              	.LFB10:
 525:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 49


 526:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 527:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 528:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 529:bluetooth_rxtx.c ****  * and off here. */
 530:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 531:bluetooth_rxtx.c **** {
 2296              		.loc 1 531 0
 2297              		.cfi_startproc
 2298              		@ args = 0, pretend = 0, frame = 0
 2299              		@ frame_needed = 1, uses_anonymous_args = 0
 2300              		@ link register save eliminated.
 2301 0000 80B4     		push	{r7}
 2302              		.cfi_def_cfa_offset 4
 2303              		.cfi_offset 7, -4
 2304 0002 00AF     		add	r7, sp, #0
 2305              		.cfi_def_cfa_register 7
 532:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2306              		.loc 1 532 0
 2307 0004 094B     		ldr	r3, .L54
 2308 0006 0022     		movs	r2, #0
 2309 0008 1A70     		strb	r2, [r3]
 533:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 2310              		.loc 1 533 0
 2311 000a 094B     		ldr	r3, .L54+4
 2312 000c 4FF40012 		mov	r2, #2097152
 2313 0010 1A60     		str	r2, [r3]
 534:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2314              		.loc 1 534 0
 2315 0012 084B     		ldr	r3, .L54+8
 2316 0014 0422     		movs	r2, #4
 2317 0016 1A60     		str	r2, [r3]
 535:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 2318              		.loc 1 535 0
 2319 0018 074A     		ldr	r2, .L54+12
 2320 001a 074B     		ldr	r3, .L54+12
 2321 001c 1B68     		ldr	r3, [r3]
 2322 001e 43F00403 		orr	r3, r3, #4
 2323 0022 1360     		str	r3, [r2]
 536:bluetooth_rxtx.c **** }
 2324              		.loc 1 536 0
 2325 0024 BD46     		mov	sp, r7
 2326              		.cfi_def_cfa_register 13
 2327              		@ sp needed
 2328 0026 5DF8047B 		ldr	r7, [sp], #4
 2329              		.cfi_restore 7
 2330              		.cfi_def_cfa_offset 0
 2331 002a 7047     		bx	lr
 2332              	.L55:
 2333              		.align	2
 2334              	.L54:
 2335 002c 00000000 		.word	cs_trigger
 2336 0030 00E100E0 		.word	-536813312
 2337 0034 AC800240 		.word	1073905836
 2338 0038 B4800240 		.word	1073905844
 2339              		.cfi_endproc
 2340              	.LFE10:
 2342              		.section	.text.cs_trigger_disable,"ax",%progbits
ARM GAS  /tmp/ccQUMSla.s 			page 50


 2343              		.align	2
 2344              		.thumb
 2345              		.thumb_func
 2347              	cs_trigger_disable:
 2348              	.LFB11:
 537:bluetooth_rxtx.c **** 
 538:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 539:bluetooth_rxtx.c **** {
 2349              		.loc 1 539 0
 2350              		.cfi_startproc
 2351              		@ args = 0, pretend = 0, frame = 0
 2352              		@ frame_needed = 1, uses_anonymous_args = 0
 2353              		@ link register save eliminated.
 2354 0000 80B4     		push	{r7}
 2355              		.cfi_def_cfa_offset 4
 2356              		.cfi_offset 7, -4
 2357 0002 00AF     		add	r7, sp, #0
 2358              		.cfi_def_cfa_register 7
 540:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 2359              		.loc 1 540 0
 2360 0004 094A     		ldr	r2, .L57
 2361 0006 094B     		ldr	r3, .L57
 2362 0008 1B68     		ldr	r3, [r3]
 2363 000a 23F00403 		bic	r3, r3, #4
 2364 000e 1360     		str	r3, [r2]
 541:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2365              		.loc 1 541 0
 2366 0010 074B     		ldr	r3, .L57+4
 2367 0012 0422     		movs	r2, #4
 2368 0014 1A60     		str	r2, [r3]
 542:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 2369              		.loc 1 542 0
 2370 0016 074B     		ldr	r3, .L57+8
 2371 0018 4FF40012 		mov	r2, #2097152
 2372 001c 1A60     		str	r2, [r3]
 543:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2373              		.loc 1 543 0
 2374 001e 064B     		ldr	r3, .L57+12
 2375 0020 0022     		movs	r2, #0
 2376 0022 1A70     		strb	r2, [r3]
 544:bluetooth_rxtx.c **** }
 2377              		.loc 1 544 0
 2378 0024 BD46     		mov	sp, r7
 2379              		.cfi_def_cfa_register 13
 2380              		@ sp needed
 2381 0026 5DF8047B 		ldr	r7, [sp], #4
 2382              		.cfi_restore 7
 2383              		.cfi_def_cfa_offset 0
 2384 002a 7047     		bx	lr
 2385              	.L58:
 2386              		.align	2
 2387              	.L57:
 2388 002c B4800240 		.word	1073905844
 2389 0030 AC800240 		.word	1073905836
 2390 0034 80E100E0 		.word	-536813184
 2391 0038 00000000 		.word	cs_trigger
 2392              		.cfi_endproc
ARM GAS  /tmp/ccQUMSla.s 			page 51


 2393              	.LFE11:
 2395              		.section	.rodata
 2396 08d1 000000   		.align	2
 2397              	.LC3:
 2398 08d4 32303135 		.ascii	"2015-10-R1\000"
 2398      2D31302D 
 2398      523100
 2399              		.section	.text.vendor_request_handler,"ax",%progbits
 2400              		.align	2
 2401              		.thumb
 2402              		.thumb_func
 2404              	vendor_request_handler:
 2405              	.LFB12:
 545:bluetooth_rxtx.c **** 
 546:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 547:bluetooth_rxtx.c **** {
 2406              		.loc 1 547 0
 2407              		.cfi_startproc
 2408              		@ args = 0, pretend = 0, frame = 80
 2409              		@ frame_needed = 1, uses_anonymous_args = 0
 2410 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2411              		.cfi_def_cfa_offset 36
 2412              		.cfi_offset 4, -36
 2413              		.cfi_offset 5, -32
 2414              		.cfi_offset 6, -28
 2415              		.cfi_offset 7, -24
 2416              		.cfi_offset 8, -20
 2417              		.cfi_offset 9, -16
 2418              		.cfi_offset 10, -12
 2419              		.cfi_offset 11, -8
 2420              		.cfi_offset 14, -4
 2421 0004 95B0     		sub	sp, sp, #84
 2422              		.cfi_def_cfa_offset 120
 2423 0006 00AF     		add	r7, sp, #0
 2424              		.cfi_def_cfa_register 7
 2425 0008 B960     		str	r1, [r7, #8]
 2426 000a 7A60     		str	r2, [r7, #4]
 2427 000c 3B60     		str	r3, [r7]
 2428 000e 0346     		mov	r3, r0
 2429 0010 FB73     		strb	r3, [r7, #15]
 548:bluetooth_rxtx.c **** 	u32 command[5];
 549:bluetooth_rxtx.c **** 	u32 result[5];
 550:bluetooth_rxtx.c **** 	u64 ac_copy;
 551:bluetooth_rxtx.c **** 	int i; // loop counter
 552:bluetooth_rxtx.c **** 	u32 clock;
 553:bluetooth_rxtx.c **** 	int clock_offset;
 554:bluetooth_rxtx.c **** 	u8 length; // string length
 555:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2430              		.loc 1 555 0
 2431 0012 0023     		movs	r3, #0
 2432 0014 7B64     		str	r3, [r7, #68]
 556:bluetooth_rxtx.c **** 	u16 reg_val;
 557:bluetooth_rxtx.c **** 
 558:bluetooth_rxtx.c **** 	switch (request) {
 2433              		.loc 1 558 0
 2434 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2435 0018 3E2B     		cmp	r3, #62
ARM GAS  /tmp/ccQUMSla.s 			page 52


 2436 001a 00F26385 		bhi	.L60
 2437 001e 01A2     		adr	r2, .L62
 2438 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2439              		.p2align 2
 2440              	.L62:
 2441 0024 21010000 		.word	.L61+1
 2442 0028 2B010000 		.word	.L63+1
 2443 002c E50A0000 		.word	.L60+1
 2444 0030 5B010000 		.word	.L64+1
 2445 0034 7D010000 		.word	.L65+1
 2446 0038 99010000 		.word	.L66+1
 2447 003c BB010000 		.word	.L67+1
 2448 0040 D7010000 		.word	.L68+1
 2449 0044 F9010000 		.word	.L69+1
 2450 0048 19020000 		.word	.L70+1
 2451 004c 3B020000 		.word	.L71+1
 2452 0050 DB040000 		.word	.L72+1
 2453 0054 01050000 		.word	.L73+1
 2454 0058 B1020000 		.word	.L74+1
 2455 005c BB020000 		.word	.L75+1
 2456 0060 5B020000 		.word	.L76+1
 2457 0064 99030000 		.word	.L77+1
 2458 0068 B9030000 		.word	.L78+1
 2459 006c ED030000 		.word	.L79+1
 2460 0070 0D040000 		.word	.L80+1
 2461 0074 29040000 		.word	.L81+1
 2462 0078 B5040000 		.word	.L82+1
 2463 007c BD040000 		.word	.L83+1
 2464 0080 CF040000 		.word	.L84+1
 2465 0084 8B050000 		.word	.L85+1
 2466 0088 A9050000 		.word	.L86+1
 2467 008c E50A0000 		.word	.L60+1
 2468 0090 B5050000 		.word	.L87+1
 2469 0094 31040000 		.word	.L88+1
 2470 0098 4D040000 		.word	.L89+1
 2471 009c 75040000 		.word	.L90+1
 2472 00a0 6D040000 		.word	.L91+1
 2473 00a4 7D040000 		.word	.L92+1
 2474 00a8 79060000 		.word	.L93+1
 2475 00ac 11060000 		.word	.L94+1
 2476 00b0 ED060000 		.word	.L95+1
 2477 00b4 FB060000 		.word	.L96+1
 2478 00b8 0B070000 		.word	.L97+1
 2479 00bc 1D070000 		.word	.L98+1
 2480 00c0 E9070000 		.word	.L99+1
 2481 00c4 2F080000 		.word	.L100+1
 2482 00c8 BD080000 		.word	.L101+1
 2483 00cc F1080000 		.word	.L102+1
 2484 00d0 13090000 		.word	.L103+1
 2485 00d4 6B090000 		.word	.L104+1
 2486 00d8 E90A0000 		.word	.L165+1
 2487 00dc 9D090000 		.word	.L106+1
 2488 00e0 B3090000 		.word	.L107+1
 2489 00e4 CF090000 		.word	.L108+1
 2490 00e8 E5090000 		.word	.L109+1
 2491 00ec 110A0000 		.word	.L110+1
 2492 00f0 61080000 		.word	.L111+1
ARM GAS  /tmp/ccQUMSla.s 			page 53


 2493 00f4 93080000 		.word	.L112+1
 2494 00f8 2D0A0000 		.word	.L113+1
 2495 00fc 710A0000 		.word	.L114+1
 2496 0100 BB060000 		.word	.L115+1
 2497 0104 830A0000 		.word	.L116+1
 2498 0108 E50A0000 		.word	.L60+1
 2499 010c 5B0A0000 		.word	.L117+1
 2500 0110 C70A0000 		.word	.L118+1
 2501 0114 D30A0000 		.word	.L119+1
 2502 0118 3B010000 		.word	.L120+1
 2503 011c 4B010000 		.word	.L121+1
 2504              		.p2align 1
 2505              	.L61:
 559:bluetooth_rxtx.c **** 
 560:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 561:bluetooth_rxtx.c **** 		*data_len = 0;
 2506              		.loc 1 561 0
 2507 0120 3B68     		ldr	r3, [r7]
 2508 0122 0022     		movs	r2, #0
 2509 0124 1A60     		str	r2, [r3]
 562:bluetooth_rxtx.c **** 		break;
 2510              		.loc 1 562 0
 2511 0126 00F0E0BC 		b	.L122
 2512              	.L63:
 563:bluetooth_rxtx.c **** 
 564:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 565:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2513              		.loc 1 565 0
 2514 012a A74B     		ldr	r3, .L166
 2515 012c 0122     		movs	r2, #1
 2516 012e 1A70     		strb	r2, [r3]
 566:bluetooth_rxtx.c **** 		*data_len = 0;
 2517              		.loc 1 566 0
 2518 0130 3B68     		ldr	r3, [r7]
 2519 0132 0022     		movs	r2, #0
 2520 0134 1A60     		str	r2, [r3]
 567:bluetooth_rxtx.c **** 		break;
 2521              		.loc 1 567 0
 2522 0136 00F0D8BC 		b	.L122
 2523              	.L120:
 568:bluetooth_rxtx.c **** 	
 569:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_FREQ:
 570:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_FREQ;
 2524              		.loc 1 570 0
 2525 013a A34B     		ldr	r3, .L166
 2526 013c 0E22     		movs	r2, #14
 2527 013e 1A70     		strb	r2, [r3]
 571:bluetooth_rxtx.c **** 		*data_len = 0;
 2528              		.loc 1 571 0
 2529 0140 3B68     		ldr	r3, [r7]
 2530 0142 0022     		movs	r2, #0
 2531 0144 1A60     		str	r2, [r3]
 572:bluetooth_rxtx.c **** 		break;
 2532              		.loc 1 572 0
 2533 0146 00F0D0BC 		b	.L122
 2534              	.L121:
 573:bluetooth_rxtx.c **** 	
ARM GAS  /tmp/ccQUMSla.s 			page 54


 574:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_PROPOSED:
 575:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_PROPOSED;
 2535              		.loc 1 575 0
 2536 014a 9F4B     		ldr	r3, .L166
 2537 014c 0F22     		movs	r2, #15
 2538 014e 1A70     		strb	r2, [r3]
 576:bluetooth_rxtx.c **** 		*data_len = 0;
 2539              		.loc 1 576 0
 2540 0150 3B68     		ldr	r3, [r7]
 2541 0152 0022     		movs	r2, #0
 2542 0154 1A60     		str	r2, [r3]
 577:bluetooth_rxtx.c **** 		break;
 2543              		.loc 1 577 0
 2544 0156 00F0C8BC 		b	.L122
 2545              	.L64:
 578:bluetooth_rxtx.c **** 
 579:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 580:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 2546              		.loc 1 580 0
 2547 015a 9C4B     		ldr	r3, .L166+4
 2548 015c 1B68     		ldr	r3, [r3]
 2549 015e 03F00203 		and	r3, r3, #2
 2550 0162 002B     		cmp	r3, #0
 2551 0164 14BF     		ite	ne
 2552 0166 0123     		movne	r3, #1
 2553 0168 0023     		moveq	r3, #0
 2554 016a DBB2     		uxtb	r3, r3
 2555 016c 1A46     		mov	r2, r3
 2556 016e 7B68     		ldr	r3, [r7, #4]
 2557 0170 1A70     		strb	r2, [r3]
 581:bluetooth_rxtx.c **** 		*data_len = 1;
 2558              		.loc 1 581 0
 2559 0172 3B68     		ldr	r3, [r7]
 2560 0174 0122     		movs	r2, #1
 2561 0176 1A60     		str	r2, [r3]
 582:bluetooth_rxtx.c **** 		break;
 2562              		.loc 1 582 0
 2563 0178 00F0B7BC 		b	.L122
 2564              	.L65:
 583:bluetooth_rxtx.c **** 
 584:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 585:bluetooth_rxtx.c **** 		if (request_params[0])
 2565              		.loc 1 585 0
 2566 017c BB68     		ldr	r3, [r7, #8]
 2567 017e 1B88     		ldrh	r3, [r3]
 2568 0180 002B     		cmp	r3, #0
 2569 0182 04D0     		beq	.L123
 586:bluetooth_rxtx.c **** 			USRLED_SET;
 2570              		.loc 1 586 0
 2571 0184 924B     		ldr	r3, .L166+8
 2572 0186 0222     		movs	r2, #2
 2573 0188 1A60     		str	r2, [r3]
 587:bluetooth_rxtx.c **** 		else
 588:bluetooth_rxtx.c **** 			USRLED_CLR;
 589:bluetooth_rxtx.c **** 		break;
 2574              		.loc 1 589 0
 2575 018a 00F0AEBC 		b	.L122
ARM GAS  /tmp/ccQUMSla.s 			page 55


 2576              	.L123:
 588:bluetooth_rxtx.c **** 		break;
 2577              		.loc 1 588 0
 2578 018e 914B     		ldr	r3, .L166+12
 2579 0190 0222     		movs	r2, #2
 2580 0192 1A60     		str	r2, [r3]
 2581              		.loc 1 589 0
 2582 0194 00F0A9BC 		b	.L122
 2583              	.L66:
 590:bluetooth_rxtx.c **** 
 591:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 592:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2584              		.loc 1 592 0
 2585 0198 8C4B     		ldr	r3, .L166+4
 2586 019a 1B68     		ldr	r3, [r3]
 2587 019c 03F01003 		and	r3, r3, #16
 2588 01a0 002B     		cmp	r3, #0
 2589 01a2 14BF     		ite	ne
 2590 01a4 0123     		movne	r3, #1
 2591 01a6 0023     		moveq	r3, #0
 2592 01a8 DBB2     		uxtb	r3, r3
 2593 01aa 1A46     		mov	r2, r3
 2594 01ac 7B68     		ldr	r3, [r7, #4]
 2595 01ae 1A70     		strb	r2, [r3]
 593:bluetooth_rxtx.c **** 		*data_len = 1;
 2596              		.loc 1 593 0
 2597 01b0 3B68     		ldr	r3, [r7]
 2598 01b2 0122     		movs	r2, #1
 2599 01b4 1A60     		str	r2, [r3]
 594:bluetooth_rxtx.c **** 		break;
 2600              		.loc 1 594 0
 2601 01b6 00F098BC 		b	.L122
 2602              	.L67:
 595:bluetooth_rxtx.c **** 
 596:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 597:bluetooth_rxtx.c **** 		if (request_params[0])
 2603              		.loc 1 597 0
 2604 01ba BB68     		ldr	r3, [r7, #8]
 2605 01bc 1B88     		ldrh	r3, [r3]
 2606 01be 002B     		cmp	r3, #0
 2607 01c0 04D0     		beq	.L125
 598:bluetooth_rxtx.c **** 			RXLED_SET;
 2608              		.loc 1 598 0
 2609 01c2 834B     		ldr	r3, .L166+8
 2610 01c4 1022     		movs	r2, #16
 2611 01c6 1A60     		str	r2, [r3]
 599:bluetooth_rxtx.c **** 		else
 600:bluetooth_rxtx.c **** 			RXLED_CLR;
 601:bluetooth_rxtx.c **** 		break;
 2612              		.loc 1 601 0
 2613 01c8 00F08FBC 		b	.L122
 2614              	.L125:
 600:bluetooth_rxtx.c **** 		break;
 2615              		.loc 1 600 0
 2616 01cc 814B     		ldr	r3, .L166+12
 2617 01ce 1022     		movs	r2, #16
 2618 01d0 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 56


 2619              		.loc 1 601 0
 2620 01d2 00F08ABC 		b	.L122
 2621              	.L68:
 602:bluetooth_rxtx.c **** 
 603:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 604:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2622              		.loc 1 604 0
 2623 01d6 7D4B     		ldr	r3, .L166+4
 2624 01d8 1B68     		ldr	r3, [r3]
 2625 01da 03F48073 		and	r3, r3, #256
 2626 01de 002B     		cmp	r3, #0
 2627 01e0 14BF     		ite	ne
 2628 01e2 0123     		movne	r3, #1
 2629 01e4 0023     		moveq	r3, #0
 2630 01e6 DBB2     		uxtb	r3, r3
 2631 01e8 1A46     		mov	r2, r3
 2632 01ea 7B68     		ldr	r3, [r7, #4]
 2633 01ec 1A70     		strb	r2, [r3]
 605:bluetooth_rxtx.c **** 		*data_len = 1;
 2634              		.loc 1 605 0
 2635 01ee 3B68     		ldr	r3, [r7]
 2636 01f0 0122     		movs	r2, #1
 2637 01f2 1A60     		str	r2, [r3]
 606:bluetooth_rxtx.c **** 		break;
 2638              		.loc 1 606 0
 2639 01f4 00F079BC 		b	.L122
 2640              	.L69:
 607:bluetooth_rxtx.c **** 
 608:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 609:bluetooth_rxtx.c **** 		if (request_params[0])
 2641              		.loc 1 609 0
 2642 01f8 BB68     		ldr	r3, [r7, #8]
 2643 01fa 1B88     		ldrh	r3, [r3]
 2644 01fc 002B     		cmp	r3, #0
 2645 01fe 05D0     		beq	.L127
 610:bluetooth_rxtx.c **** 			TXLED_SET;
 2646              		.loc 1 610 0
 2647 0200 734B     		ldr	r3, .L166+8
 2648 0202 4FF48072 		mov	r2, #256
 2649 0206 1A60     		str	r2, [r3]
 611:bluetooth_rxtx.c **** 		else
 612:bluetooth_rxtx.c **** 			TXLED_CLR;
 613:bluetooth_rxtx.c **** 		break;
 2650              		.loc 1 613 0
 2651 0208 00F06FBC 		b	.L122
 2652              	.L127:
 612:bluetooth_rxtx.c **** 		break;
 2653              		.loc 1 612 0
 2654 020c 714B     		ldr	r3, .L166+12
 2655 020e 4FF48072 		mov	r2, #256
 2656 0212 1A60     		str	r2, [r3]
 2657              		.loc 1 613 0
 2658 0214 00F069BC 		b	.L122
 2659              	.L70:
 614:bluetooth_rxtx.c **** 
 615:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 616:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
ARM GAS  /tmp/ccQUMSla.s 			page 57


 2660              		.loc 1 616 0
 2661 0218 6C4B     		ldr	r3, .L166+4
 2662 021a 1B68     		ldr	r3, [r3]
 2663 021c 03F40073 		and	r3, r3, #512
 2664 0220 002B     		cmp	r3, #0
 2665 0222 14BF     		ite	ne
 2666 0224 0123     		movne	r3, #1
 2667 0226 0023     		moveq	r3, #0
 2668 0228 DBB2     		uxtb	r3, r3
 2669 022a 1A46     		mov	r2, r3
 2670 022c 7B68     		ldr	r3, [r7, #4]
 2671 022e 1A70     		strb	r2, [r3]
 617:bluetooth_rxtx.c **** 		*data_len = 1;
 2672              		.loc 1 617 0
 2673 0230 3B68     		ldr	r3, [r7]
 2674 0232 0122     		movs	r2, #1
 2675 0234 1A60     		str	r2, [r3]
 618:bluetooth_rxtx.c **** 		break;
 2676              		.loc 1 618 0
 2677 0236 00F058BC 		b	.L122
 2678              	.L71:
 619:bluetooth_rxtx.c **** 
 620:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 621:bluetooth_rxtx.c **** 		if (request_params[0])
 2679              		.loc 1 621 0
 2680 023a BB68     		ldr	r3, [r7, #8]
 2681 023c 1B88     		ldrh	r3, [r3]
 2682 023e 002B     		cmp	r3, #0
 2683 0240 05D0     		beq	.L129
 622:bluetooth_rxtx.c **** 			CC1V8_SET;
 2684              		.loc 1 622 0
 2685 0242 634B     		ldr	r3, .L166+8
 2686 0244 4FF40072 		mov	r2, #512
 2687 0248 1A60     		str	r2, [r3]
 623:bluetooth_rxtx.c **** 		else
 624:bluetooth_rxtx.c **** 			CC1V8_CLR;
 625:bluetooth_rxtx.c **** 		break;
 2688              		.loc 1 625 0
 2689 024a 00F04EBC 		b	.L122
 2690              	.L129:
 624:bluetooth_rxtx.c **** 		break;
 2691              		.loc 1 624 0
 2692 024e 614B     		ldr	r3, .L166+12
 2693 0250 4FF40072 		mov	r2, #512
 2694 0254 1A60     		str	r2, [r3]
 2695              		.loc 1 625 0
 2696 0256 00F048BC 		b	.L122
 2697              	.L76:
 626:bluetooth_rxtx.c **** 
 627:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 628:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2698              		.loc 1 628 0
 2699 025a 3623     		movs	r3, #54
 2700 025c 7B62     		str	r3, [r7, #36]
 629:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2701              		.loc 1 629 0
 2702 025e 5E4B     		ldr	r3, .L166+16
ARM GAS  /tmp/ccQUMSla.s 			page 58


 2703 0260 1B68     		ldr	r3, [r3]
 2704 0262 07F12401 		add	r1, r7, #36
 2705 0266 07F11002 		add	r2, r7, #16
 2706 026a 0846     		mov	r0, r1
 2707 026c 1146     		mov	r1, r2
 2708 026e 9847     		blx	r3
 630:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2709              		.loc 1 630 0
 2710 0270 3B69     		ldr	r3, [r7, #16]
 2711 0272 DAB2     		uxtb	r2, r3
 2712 0274 7B68     		ldr	r3, [r7, #4]
 2713 0276 1A70     		strb	r2, [r3]
 631:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2714              		.loc 1 631 0
 2715 0278 7B68     		ldr	r3, [r7, #4]
 2716 027a 0133     		adds	r3, r3, #1
 2717 027c 7A69     		ldr	r2, [r7, #20]
 2718 027e D2B2     		uxtb	r2, r2
 2719 0280 1A70     		strb	r2, [r3]
 632:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2720              		.loc 1 632 0
 2721 0282 7B68     		ldr	r3, [r7, #4]
 2722 0284 0233     		adds	r3, r3, #2
 2723 0286 7A69     		ldr	r2, [r7, #20]
 2724 0288 120A     		lsrs	r2, r2, #8
 2725 028a D2B2     		uxtb	r2, r2
 2726 028c 1A70     		strb	r2, [r3]
 633:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2727              		.loc 1 633 0
 2728 028e 7B68     		ldr	r3, [r7, #4]
 2729 0290 0333     		adds	r3, r3, #3
 2730 0292 7A69     		ldr	r2, [r7, #20]
 2731 0294 120C     		lsrs	r2, r2, #16
 2732 0296 D2B2     		uxtb	r2, r2
 2733 0298 1A70     		strb	r2, [r3]
 634:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2734              		.loc 1 634 0
 2735 029a 7B68     		ldr	r3, [r7, #4]
 2736 029c 0433     		adds	r3, r3, #4
 2737 029e 7A69     		ldr	r2, [r7, #20]
 2738 02a0 120E     		lsrs	r2, r2, #24
 2739 02a2 D2B2     		uxtb	r2, r2
 2740 02a4 1A70     		strb	r2, [r3]
 635:bluetooth_rxtx.c **** 		*data_len = 5;
 2741              		.loc 1 635 0
 2742 02a6 3B68     		ldr	r3, [r7]
 2743 02a8 0522     		movs	r2, #5
 2744 02aa 1A60     		str	r2, [r3]
 636:bluetooth_rxtx.c **** 		break;
 2745              		.loc 1 636 0
 2746 02ac 00F01DBC 		b	.L122
 2747              	.L74:
 637:bluetooth_rxtx.c **** 
 638:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 639:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2748              		.loc 1 639 0
 2749 02b0 454B     		ldr	r3, .L166
ARM GAS  /tmp/ccQUMSla.s 			page 59


 2750 02b2 0B22     		movs	r2, #11
 2751 02b4 1A70     		strb	r2, [r3]
 640:bluetooth_rxtx.c **** 		break;
 2752              		.loc 1 640 0
 2753 02b6 00F018BC 		b	.L122
 2754              	.L75:
 641:bluetooth_rxtx.c **** 
 642:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 643:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2755              		.loc 1 643 0
 2756 02ba 3A23     		movs	r3, #58
 2757 02bc 7B62     		str	r3, [r7, #36]
 644:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2758              		.loc 1 644 0
 2759 02be 464B     		ldr	r3, .L166+16
 2760 02c0 1B68     		ldr	r3, [r3]
 2761 02c2 07F12401 		add	r1, r7, #36
 2762 02c6 07F11002 		add	r2, r7, #16
 2763 02ca 0846     		mov	r0, r1
 2764 02cc 1146     		mov	r1, r2
 2765 02ce 9847     		blx	r3
 645:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2766              		.loc 1 645 0
 2767 02d0 3B69     		ldr	r3, [r7, #16]
 2768 02d2 DAB2     		uxtb	r2, r3
 2769 02d4 7B68     		ldr	r3, [r7, #4]
 2770 02d6 1A70     		strb	r2, [r3]
 646:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2771              		.loc 1 646 0
 2772 02d8 7B68     		ldr	r3, [r7, #4]
 2773 02da 0133     		adds	r3, r3, #1
 2774 02dc 7A69     		ldr	r2, [r7, #20]
 2775 02de D2B2     		uxtb	r2, r2
 2776 02e0 1A70     		strb	r2, [r3]
 647:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2777              		.loc 1 647 0
 2778 02e2 7B68     		ldr	r3, [r7, #4]
 2779 02e4 0233     		adds	r3, r3, #2
 2780 02e6 7A69     		ldr	r2, [r7, #20]
 2781 02e8 120A     		lsrs	r2, r2, #8
 2782 02ea D2B2     		uxtb	r2, r2
 2783 02ec 1A70     		strb	r2, [r3]
 648:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2784              		.loc 1 648 0
 2785 02ee 7B68     		ldr	r3, [r7, #4]
 2786 02f0 0333     		adds	r3, r3, #3
 2787 02f2 7A69     		ldr	r2, [r7, #20]
 2788 02f4 120C     		lsrs	r2, r2, #16
 2789 02f6 D2B2     		uxtb	r2, r2
 2790 02f8 1A70     		strb	r2, [r3]
 649:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2791              		.loc 1 649 0
 2792 02fa 7B68     		ldr	r3, [r7, #4]
 2793 02fc 0433     		adds	r3, r3, #4
 2794 02fe 7A69     		ldr	r2, [r7, #20]
 2795 0300 120E     		lsrs	r2, r2, #24
 2796 0302 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/ccQUMSla.s 			page 60


 2797 0304 1A70     		strb	r2, [r3]
 650:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2798              		.loc 1 650 0
 2799 0306 7B68     		ldr	r3, [r7, #4]
 2800 0308 0533     		adds	r3, r3, #5
 2801 030a BA69     		ldr	r2, [r7, #24]
 2802 030c D2B2     		uxtb	r2, r2
 2803 030e 1A70     		strb	r2, [r3]
 651:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2804              		.loc 1 651 0
 2805 0310 7B68     		ldr	r3, [r7, #4]
 2806 0312 0633     		adds	r3, r3, #6
 2807 0314 BA69     		ldr	r2, [r7, #24]
 2808 0316 120A     		lsrs	r2, r2, #8
 2809 0318 D2B2     		uxtb	r2, r2
 2810 031a 1A70     		strb	r2, [r3]
 652:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2811              		.loc 1 652 0
 2812 031c 7B68     		ldr	r3, [r7, #4]
 2813 031e 0733     		adds	r3, r3, #7
 2814 0320 BA69     		ldr	r2, [r7, #24]
 2815 0322 120C     		lsrs	r2, r2, #16
 2816 0324 D2B2     		uxtb	r2, r2
 2817 0326 1A70     		strb	r2, [r3]
 653:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2818              		.loc 1 653 0
 2819 0328 7B68     		ldr	r3, [r7, #4]
 2820 032a 0833     		adds	r3, r3, #8
 2821 032c BA69     		ldr	r2, [r7, #24]
 2822 032e 120E     		lsrs	r2, r2, #24
 2823 0330 D2B2     		uxtb	r2, r2
 2824 0332 1A70     		strb	r2, [r3]
 654:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2825              		.loc 1 654 0
 2826 0334 7B68     		ldr	r3, [r7, #4]
 2827 0336 0933     		adds	r3, r3, #9
 2828 0338 FA69     		ldr	r2, [r7, #28]
 2829 033a D2B2     		uxtb	r2, r2
 2830 033c 1A70     		strb	r2, [r3]
 655:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2831              		.loc 1 655 0
 2832 033e 7B68     		ldr	r3, [r7, #4]
 2833 0340 0A33     		adds	r3, r3, #10
 2834 0342 FA69     		ldr	r2, [r7, #28]
 2835 0344 120A     		lsrs	r2, r2, #8
 2836 0346 D2B2     		uxtb	r2, r2
 2837 0348 1A70     		strb	r2, [r3]
 656:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2838              		.loc 1 656 0
 2839 034a 7B68     		ldr	r3, [r7, #4]
 2840 034c 0B33     		adds	r3, r3, #11
 2841 034e FA69     		ldr	r2, [r7, #28]
 2842 0350 120C     		lsrs	r2, r2, #16
 2843 0352 D2B2     		uxtb	r2, r2
 2844 0354 1A70     		strb	r2, [r3]
 657:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2845              		.loc 1 657 0
ARM GAS  /tmp/ccQUMSla.s 			page 61


 2846 0356 7B68     		ldr	r3, [r7, #4]
 2847 0358 0C33     		adds	r3, r3, #12
 2848 035a FA69     		ldr	r2, [r7, #28]
 2849 035c 120E     		lsrs	r2, r2, #24
 2850 035e D2B2     		uxtb	r2, r2
 2851 0360 1A70     		strb	r2, [r3]
 658:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2852              		.loc 1 658 0
 2853 0362 7B68     		ldr	r3, [r7, #4]
 2854 0364 0D33     		adds	r3, r3, #13
 2855 0366 3A6A     		ldr	r2, [r7, #32]
 2856 0368 D2B2     		uxtb	r2, r2
 2857 036a 1A70     		strb	r2, [r3]
 659:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2858              		.loc 1 659 0
 2859 036c 7B68     		ldr	r3, [r7, #4]
 2860 036e 0E33     		adds	r3, r3, #14
 2861 0370 3A6A     		ldr	r2, [r7, #32]
 2862 0372 120A     		lsrs	r2, r2, #8
 2863 0374 D2B2     		uxtb	r2, r2
 2864 0376 1A70     		strb	r2, [r3]
 660:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2865              		.loc 1 660 0
 2866 0378 7B68     		ldr	r3, [r7, #4]
 2867 037a 0F33     		adds	r3, r3, #15
 2868 037c 3A6A     		ldr	r2, [r7, #32]
 2869 037e 120C     		lsrs	r2, r2, #16
 2870 0380 D2B2     		uxtb	r2, r2
 2871 0382 1A70     		strb	r2, [r3]
 661:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2872              		.loc 1 661 0
 2873 0384 7B68     		ldr	r3, [r7, #4]
 2874 0386 1033     		adds	r3, r3, #16
 2875 0388 3A6A     		ldr	r2, [r7, #32]
 2876 038a 120E     		lsrs	r2, r2, #24
 2877 038c D2B2     		uxtb	r2, r2
 2878 038e 1A70     		strb	r2, [r3]
 662:bluetooth_rxtx.c **** 		*data_len = 17;
 2879              		.loc 1 662 0
 2880 0390 3B68     		ldr	r3, [r7]
 2881 0392 1122     		movs	r2, #17
 2882 0394 1A60     		str	r2, [r3]
 663:bluetooth_rxtx.c **** 		break;
 2883              		.loc 1 663 0
 2884 0396 A8E3     		b	.L122
 2885              	.L77:
 664:bluetooth_rxtx.c **** 
 665:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 666:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 667:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2886              		.loc 1 667 0
 2887 0398 104B     		ldr	r3, .L166+20
 2888 039a 1B68     		ldr	r3, [r3]
 2889 039c 03F08003 		and	r3, r3, #128
 2890 03a0 002B     		cmp	r3, #0
 2891 03a2 14BF     		ite	ne
 2892 03a4 0123     		movne	r3, #1
ARM GAS  /tmp/ccQUMSla.s 			page 62


 2893 03a6 0023     		moveq	r3, #0
 2894 03a8 DBB2     		uxtb	r3, r3
 2895 03aa 1A46     		mov	r2, r3
 2896 03ac 7B68     		ldr	r3, [r7, #4]
 2897 03ae 1A70     		strb	r2, [r3]
 668:bluetooth_rxtx.c **** 		*data_len = 1;
 2898              		.loc 1 668 0
 2899 03b0 3B68     		ldr	r3, [r7]
 2900 03b2 0122     		movs	r2, #1
 2901 03b4 1A60     		str	r2, [r3]
 669:bluetooth_rxtx.c **** 		break;
 2902              		.loc 1 669 0
 2903 03b6 98E3     		b	.L122
 2904              	.L78:
 670:bluetooth_rxtx.c **** 
 671:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 672:bluetooth_rxtx.c **** 		if (request_params[0])
 2905              		.loc 1 672 0
 2906 03b8 BB68     		ldr	r3, [r7, #8]
 2907 03ba 1B88     		ldrh	r3, [r3]
 2908 03bc 002B     		cmp	r3, #0
 2909 03be 11D0     		beq	.L131
 673:bluetooth_rxtx.c **** 			PAEN_SET;
 2910              		.loc 1 673 0
 2911 03c0 074B     		ldr	r3, .L166+24
 2912 03c2 8022     		movs	r2, #128
 2913 03c4 1A60     		str	r2, [r3]
 674:bluetooth_rxtx.c **** 		else
 675:bluetooth_rxtx.c **** 			PAEN_CLR;
 676:bluetooth_rxtx.c **** 		break;
 2914              		.loc 1 676 0
 2915 03c6 90E3     		b	.L122
 2916              	.L167:
 2917              		.align	2
 2918              	.L166:
 2919 03c8 00000000 		.word	requested_mode
 2920 03cc 34C00920 		.word	537509940
 2921 03d0 38C00920 		.word	537509944
 2922 03d4 3CC00920 		.word	537509948
 2923 03d8 00000000 		.word	iap_entry
 2924 03dc 54C00920 		.word	537509972
 2925 03e0 58C00920 		.word	537509976
 2926              	.L131:
 675:bluetooth_rxtx.c **** 		break;
 2927              		.loc 1 675 0
 2928 03e4 944B     		ldr	r3, .L168
 2929 03e6 8022     		movs	r2, #128
 2930 03e8 1A60     		str	r2, [r3]
 2931              		.loc 1 676 0
 2932 03ea 7EE3     		b	.L122
 2933              	.L79:
 677:bluetooth_rxtx.c **** 
 678:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 679:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2934              		.loc 1 679 0
 2935 03ec 934B     		ldr	r3, .L168+4
 2936 03ee 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 63


 2937 03f0 03F48073 		and	r3, r3, #256
 2938 03f4 002B     		cmp	r3, #0
 2939 03f6 14BF     		ite	ne
 2940 03f8 0123     		movne	r3, #1
 2941 03fa 0023     		moveq	r3, #0
 2942 03fc DBB2     		uxtb	r3, r3
 2943 03fe 1A46     		mov	r2, r3
 2944 0400 7B68     		ldr	r3, [r7, #4]
 2945 0402 1A70     		strb	r2, [r3]
 680:bluetooth_rxtx.c **** 		*data_len = 1;
 2946              		.loc 1 680 0
 2947 0404 3B68     		ldr	r3, [r7]
 2948 0406 0122     		movs	r2, #1
 2949 0408 1A60     		str	r2, [r3]
 681:bluetooth_rxtx.c **** 		break;
 2950              		.loc 1 681 0
 2951 040a 6EE3     		b	.L122
 2952              	.L80:
 682:bluetooth_rxtx.c **** 
 683:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 684:bluetooth_rxtx.c **** 		if (request_params[0])
 2953              		.loc 1 684 0
 2954 040c BB68     		ldr	r3, [r7, #8]
 2955 040e 1B88     		ldrh	r3, [r3]
 2956 0410 002B     		cmp	r3, #0
 2957 0412 04D0     		beq	.L133
 685:bluetooth_rxtx.c **** 			HGM_SET;
 2958              		.loc 1 685 0
 2959 0414 8A4B     		ldr	r3, .L168+8
 2960 0416 4FF48072 		mov	r2, #256
 2961 041a 1A60     		str	r2, [r3]
 686:bluetooth_rxtx.c **** 		else
 687:bluetooth_rxtx.c **** 			HGM_CLR;
 688:bluetooth_rxtx.c **** 		break;
 2962              		.loc 1 688 0
 2963 041c 65E3     		b	.L122
 2964              	.L133:
 687:bluetooth_rxtx.c **** 		break;
 2965              		.loc 1 687 0
 2966 041e 864B     		ldr	r3, .L168
 2967 0420 4FF48072 		mov	r2, #256
 2968 0424 1A60     		str	r2, [r3]
 2969              		.loc 1 688 0
 2970 0426 60E3     		b	.L122
 2971              	.L81:
 689:bluetooth_rxtx.c **** #endif
 690:bluetooth_rxtx.c **** 
 691:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 692:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 693:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2972              		.loc 1 693 0
 2973 0428 864B     		ldr	r3, .L168+12
 2974 042a 0322     		movs	r2, #3
 2975 042c 1A70     		strb	r2, [r3]
 694:bluetooth_rxtx.c **** 		break;
 2976              		.loc 1 694 0
 2977 042e 5CE3     		b	.L122
ARM GAS  /tmp/ccQUMSla.s 			page 64


 2978              	.L88:
 695:bluetooth_rxtx.c **** 
 696:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 697:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2979              		.loc 1 697 0
 2980 0430 0520     		movs	r0, #5
 2981 0432 FFF7FEFF 		bl	cc2400_get
 2982 0436 0346     		mov	r3, r0
 2983 0438 DBB2     		uxtb	r3, r3
 2984 043a 03F00703 		and	r3, r3, #7
 2985 043e DAB2     		uxtb	r2, r3
 2986 0440 7B68     		ldr	r3, [r7, #4]
 2987 0442 1A70     		strb	r2, [r3]
 698:bluetooth_rxtx.c **** 		*data_len = 1;
 2988              		.loc 1 698 0
 2989 0444 3B68     		ldr	r3, [r7]
 2990 0446 0122     		movs	r2, #1
 2991 0448 1A60     		str	r2, [r3]
 699:bluetooth_rxtx.c **** 		break;
 2992              		.loc 1 699 0
 2993 044a 4EE3     		b	.L122
 2994              	.L89:
 700:bluetooth_rxtx.c **** 
 701:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 702:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2995              		.loc 1 702 0
 2996 044c BB68     		ldr	r3, [r7, #8]
 2997 044e 1B88     		ldrh	r3, [r3]
 2998 0450 072B     		cmp	r3, #7
 2999 0452 09D8     		bhi	.L135
 703:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 3000              		.loc 1 703 0
 3001 0454 BB68     		ldr	r3, [r7, #8]
 3002 0456 1B88     		ldrh	r3, [r3]
 3003 0458 43F00803 		orr	r3, r3, #8
 3004 045c 9BB2     		uxth	r3, r3
 3005 045e 0520     		movs	r0, #5
 3006 0460 1946     		mov	r1, r3
 3007 0462 FFF7FEFF 		bl	cc2400_set
 704:bluetooth_rxtx.c **** 		} else {
 705:bluetooth_rxtx.c **** 			return 0;
 706:bluetooth_rxtx.c **** 		}
 707:bluetooth_rxtx.c **** 		break;
 3008              		.loc 1 707 0
 3009 0466 40E3     		b	.L122
 3010              	.L135:
 705:bluetooth_rxtx.c **** 		}
 3011              		.loc 1 705 0
 3012 0468 0023     		movs	r3, #0
 3013 046a 3FE3     		b	.L164
 3014              	.L91:
 708:bluetooth_rxtx.c **** 
 709:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 710:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 3015              		.loc 1 710 0
 3016 046c 754B     		ldr	r3, .L168+12
 3017 046e 0522     		movs	r2, #5
ARM GAS  /tmp/ccQUMSla.s 			page 65


 3018 0470 1A70     		strb	r2, [r3]
 711:bluetooth_rxtx.c **** 		break;
 3019              		.loc 1 711 0
 3020 0472 3AE3     		b	.L122
 3021              	.L90:
 712:bluetooth_rxtx.c **** 
 713:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 714:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 3022              		.loc 1 714 0
 3023 0474 734B     		ldr	r3, .L168+12
 3024 0476 0622     		movs	r2, #6
 3025 0478 1A70     		strb	r2, [r3]
 715:bluetooth_rxtx.c **** 		break;
 3026              		.loc 1 715 0
 3027 047a 36E3     		b	.L122
 3028              	.L92:
 716:bluetooth_rxtx.c **** #endif
 717:bluetooth_rxtx.c **** 
 718:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 719:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 3029              		.loc 1 719 0
 3030 047c 724B     		ldr	r3, .L168+16
 3031 047e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3032 0480 7B68     		ldr	r3, [r7, #4]
 3033 0482 1A70     		strb	r2, [r3]
 720:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 3034              		.loc 1 720 0
 3035 0484 7B68     		ldr	r3, [r7, #4]
 3036 0486 0133     		adds	r3, r3, #1
 3037 0488 6F4A     		ldr	r2, .L168+16
 3038 048a 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 3039 048c 1A70     		strb	r2, [r3]
 721:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 3040              		.loc 1 721 0
 3041 048e 7B68     		ldr	r3, [r7, #4]
 3042 0490 0233     		adds	r3, r3, #2
 3043 0492 6D4A     		ldr	r2, .L168+16
 3044 0494 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 3045 0496 1A70     		strb	r2, [r3]
 722:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 3046              		.loc 1 722 0
 3047 0498 7B68     		ldr	r3, [r7, #4]
 3048 049a 0333     		adds	r3, r3, #3
 3049 049c 6A4A     		ldr	r2, .L168+16
 3050 049e D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 3051 04a0 1A70     		strb	r2, [r3]
 723:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 3052              		.loc 1 723 0
 3053 04a2 7B68     		ldr	r3, [r7, #4]
 3054 04a4 0433     		adds	r3, r3, #4
 3055 04a6 684A     		ldr	r2, .L168+16
 3056 04a8 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 3057 04aa 1A70     		strb	r2, [r3]
 724:bluetooth_rxtx.c **** 		*data_len = 5;
 3058              		.loc 1 724 0
 3059 04ac 3B68     		ldr	r3, [r7]
 3060 04ae 0522     		movs	r2, #5
ARM GAS  /tmp/ccQUMSla.s 			page 66


 3061 04b0 1A60     		str	r2, [r3]
 725:bluetooth_rxtx.c **** 		break;
 3062              		.loc 1 725 0
 3063 04b2 1AE3     		b	.L122
 3064              	.L82:
 726:bluetooth_rxtx.c **** 
 727:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 728:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 3065              		.loc 1 728 0
 3066 04b4 634B     		ldr	r3, .L168+12
 3067 04b6 0022     		movs	r2, #0
 3068 04b8 1A70     		strb	r2, [r3]
 729:bluetooth_rxtx.c **** 		break;
 3069              		.loc 1 729 0
 3070 04ba 16E3     		b	.L122
 3071              	.L83:
 730:bluetooth_rxtx.c **** 
 731:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 732:bluetooth_rxtx.c **** 		data[0] = modulation;
 3072              		.loc 1 732 0
 3073 04bc 634B     		ldr	r3, .L168+20
 3074 04be 1B78     		ldrb	r3, [r3]
 3075 04c0 DAB2     		uxtb	r2, r3
 3076 04c2 7B68     		ldr	r3, [r7, #4]
 3077 04c4 1A70     		strb	r2, [r3]
 733:bluetooth_rxtx.c **** 		*data_len = 1;
 3078              		.loc 1 733 0
 3079 04c6 3B68     		ldr	r3, [r7]
 3080 04c8 0122     		movs	r2, #1
 3081 04ca 1A60     		str	r2, [r3]
 734:bluetooth_rxtx.c **** 		break;
 3082              		.loc 1 734 0
 3083 04cc 0DE3     		b	.L122
 3084              	.L84:
 735:bluetooth_rxtx.c **** 
 736:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 737:bluetooth_rxtx.c **** 		modulation = request_params[0];
 3085              		.loc 1 737 0
 3086 04ce BB68     		ldr	r3, [r7, #8]
 3087 04d0 1B88     		ldrh	r3, [r3]
 3088 04d2 DAB2     		uxtb	r2, r3
 3089 04d4 5D4B     		ldr	r3, .L168+20
 3090 04d6 1A70     		strb	r2, [r3]
 738:bluetooth_rxtx.c **** 		break;
 3091              		.loc 1 738 0
 3092 04d8 07E3     		b	.L122
 3093              	.L72:
 739:bluetooth_rxtx.c **** 
 740:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 741:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 3094              		.loc 1 741 0
 3095 04da 5D4B     		ldr	r3, .L168+24
 3096 04dc 1B88     		ldrh	r3, [r3]	@ movhi
 3097 04de 9BB2     		uxth	r3, r3
 3098 04e0 DAB2     		uxtb	r2, r3
 3099 04e2 7B68     		ldr	r3, [r7, #4]
 3100 04e4 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 67


 742:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 3101              		.loc 1 742 0
 3102 04e6 7B68     		ldr	r3, [r7, #4]
 3103 04e8 0133     		adds	r3, r3, #1
 3104 04ea 594A     		ldr	r2, .L168+24
 3105 04ec 1288     		ldrh	r2, [r2]	@ movhi
 3106 04ee 92B2     		uxth	r2, r2
 3107 04f0 120A     		lsrs	r2, r2, #8
 3108 04f2 92B2     		uxth	r2, r2
 3109 04f4 D2B2     		uxtb	r2, r2
 3110 04f6 1A70     		strb	r2, [r3]
 743:bluetooth_rxtx.c **** 		*data_len = 2;
 3111              		.loc 1 743 0
 3112 04f8 3B68     		ldr	r3, [r7]
 3113 04fa 0222     		movs	r2, #2
 3114 04fc 1A60     		str	r2, [r3]
 744:bluetooth_rxtx.c **** 		break;
 3115              		.loc 1 744 0
 3116 04fe F4E2     		b	.L122
 3117              	.L73:
 745:bluetooth_rxtx.c **** 
 746:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 747:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 3118              		.loc 1 747 0
 3119 0500 BB68     		ldr	r3, [r7, #8]
 3120 0502 1A88     		ldrh	r2, [r3]
 3121 0504 534B     		ldr	r3, .L168+28
 3122 0506 1A80     		strh	r2, [r3]	@ movhi
 748:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 749:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 3123              		.loc 1 749 0
 3124 0508 524B     		ldr	r3, .L168+28
 3125 050a 1B88     		ldrh	r3, [r3]	@ movhi
 3126 050c 9BB2     		uxth	r3, r3
 3127 050e 40F6EA22 		movw	r2, #2794
 3128 0512 9342     		cmp	r3, r2
 3129 0514 07D9     		bls	.L138
 750:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 3130              		.loc 1 750 0
 3131 0516 504B     		ldr	r3, .L168+32
 3132 0518 0122     		movs	r2, #1
 3133 051a 1A70     		strb	r2, [r3]
 751:bluetooth_rxtx.c **** 			requested_channel = 2402;
 3134              		.loc 1 751 0
 3135 051c 4D4B     		ldr	r3, .L168+28
 3136 051e 40F66212 		movw	r2, #2402
 3137 0522 1A80     		strh	r2, [r3]	@ movhi
 3138 0524 20E0     		b	.L139
 3139              	.L138:
 752:bluetooth_rxtx.c **** 		}
 753:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 754:bluetooth_rxtx.c **** 		else {
 755:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 3140              		.loc 1 755 0
 3141 0526 4C4B     		ldr	r3, .L168+32
 3142 0528 0022     		movs	r2, #0
 3143 052a 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 68


 756:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 3144              		.loc 1 756 0
 3145 052c 494B     		ldr	r3, .L168+28
 3146 052e 1B88     		ldrh	r3, [r3]	@ movhi
 3147 0530 9BB2     		uxth	r3, r3
 3148 0532 40F6DC02 		movw	r2, #2268
 3149 0536 9342     		cmp	r3, r2
 3150 0538 03D9     		bls	.L140
 3151              		.loc 1 756 0 is_stmt 0 discriminator 1
 3152 053a 464B     		ldr	r3, .L168+28
 3153 053c 1B88     		ldrh	r3, [r3]	@ movhi
 3154 053e 9BB2     		uxth	r3, r3
 3155 0540 01E0     		b	.L141
 3156              	.L140:
 3157              		.loc 1 756 0 discriminator 2
 3158 0542 40F6DC03 		movw	r3, #2268
 3159              	.L141:
 3160              		.loc 1 756 0 discriminator 4
 3161 0546 434A     		ldr	r2, .L168+28
 3162 0548 1380     		strh	r3, [r2]	@ movhi
 757:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 3163              		.loc 1 757 0 is_stmt 1 discriminator 4
 3164 054a 424B     		ldr	r3, .L168+28
 3165 054c 1B88     		ldrh	r3, [r3]	@ movhi
 3166 054e 9BB2     		uxth	r3, r3
 3167 0550 40F6E922 		movw	r2, #2793
 3168 0554 9342     		cmp	r3, r2
 3169 0556 03D8     		bhi	.L142
 3170              		.loc 1 757 0 is_stmt 0 discriminator 1
 3171 0558 3E4B     		ldr	r3, .L168+28
 3172 055a 1B88     		ldrh	r3, [r3]	@ movhi
 3173 055c 9BB2     		uxth	r3, r3
 3174 055e 01E0     		b	.L143
 3175              	.L142:
 3176              		.loc 1 757 0 discriminator 2
 3177 0560 40F6EA23 		movw	r3, #2794
 3178              	.L143:
 3179              		.loc 1 757 0 discriminator 4
 3180 0564 3B4A     		ldr	r2, .L168+28
 3181 0566 1380     		strh	r3, [r2]	@ movhi
 3182              	.L139:
 758:bluetooth_rxtx.c **** 		}
 759:bluetooth_rxtx.c **** 
 760:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 3183              		.loc 1 760 0 is_stmt 1
 3184 0568 3C4B     		ldr	r3, .L168+36
 3185 056a 1B78     		ldrb	r3, [r3]
 3186 056c DBB2     		uxtb	r3, r3
 3187 056e 092B     		cmp	r3, #9
 3188 0570 0AD0     		beq	.L144
 761:bluetooth_rxtx.c **** 			channel = requested_channel;
 3189              		.loc 1 761 0
 3190 0572 384B     		ldr	r3, .L168+28
 3191 0574 1B88     		ldrh	r3, [r3]	@ movhi
 3192 0576 9AB2     		uxth	r2, r3
 3193 0578 354B     		ldr	r3, .L168+24
 3194 057a 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  /tmp/ccQUMSla.s 			page 69


 762:bluetooth_rxtx.c **** 			requested_channel = 0;
 3195              		.loc 1 762 0
 3196 057c 354B     		ldr	r3, .L168+28
 3197 057e 0022     		movs	r2, #0
 3198 0580 1A80     		strh	r2, [r3]	@ movhi
 763:bluetooth_rxtx.c **** 
 764:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 765:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 766:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 3199              		.loc 1 766 0
 3200 0582 FFF7FEFF 		bl	cs_threshold_calc_and_set
 767:bluetooth_rxtx.c **** 		}
 768:bluetooth_rxtx.c **** 		break;
 3201              		.loc 1 768 0
 3202 0586 B0E2     		b	.L122
 3203              	.L144:
 3204 0588 AFE2     		b	.L122
 3205              	.L85:
 769:bluetooth_rxtx.c **** 
 770:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 771:bluetooth_rxtx.c **** 		command[0] = 57;
 3206              		.loc 1 771 0
 3207 058a 3923     		movs	r3, #57
 3208 058c 7B62     		str	r3, [r7, #36]
 772:bluetooth_rxtx.c **** 		iap_entry(command, result);
 3209              		.loc 1 772 0
 3210 058e 344B     		ldr	r3, .L168+40
 3211 0590 1B68     		ldr	r3, [r3]
 3212 0592 07F12401 		add	r1, r7, #36
 3213 0596 07F11002 		add	r2, r7, #16
 3214 059a 0846     		mov	r0, r1
 3215 059c 1146     		mov	r1, r2
 3216 059e 9847     		blx	r3
 773:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 3217              		.loc 1 773 0
 3218 05a0 3B68     		ldr	r3, [r7]
 3219 05a2 0022     		movs	r2, #0
 3220 05a4 1A60     		str	r2, [r3]
 774:bluetooth_rxtx.c **** 		break;
 3221              		.loc 1 774 0
 3222 05a6 A0E2     		b	.L122
 3223              	.L86:
 775:bluetooth_rxtx.c **** 
 776:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 777:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 3224              		.loc 1 777 0
 3225 05a8 2E4B     		ldr	r3, .L168+44
 3226 05aa 2F4A     		ldr	r2, .L168+48
 3227 05ac 1A60     		str	r2, [r3]
 778:bluetooth_rxtx.c **** 		reset();
 3228              		.loc 1 778 0
 3229 05ae FFF7FEFF 		bl	reset
 779:bluetooth_rxtx.c **** 		break;
 3230              		.loc 1 779 0
 3231 05b2 9AE2     		b	.L122
 3232              	.L87:
 780:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 70


 781:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 782:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 3233              		.loc 1 782 0
 3234 05b4 BB68     		ldr	r3, [r7, #8]
 3235 05b6 1B88     		ldrh	r3, [r3]
 3236 05b8 B3F5006F 		cmp	r3, #2048
 3237 05bc 17D9     		bls	.L145
 3238              		.loc 1 782 0 is_stmt 0 discriminator 1
 3239 05be BB68     		ldr	r3, [r7, #8]
 3240 05c0 1B88     		ldrh	r3, [r3]
 3241 05c2 B3F5406F 		cmp	r3, #3072
 3242 05c6 12D8     		bhi	.L145
 783:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3243              		.loc 1 783 0 is_stmt 1 discriminator 2
 3244 05c8 BB68     		ldr	r3, [r7, #8]
 3245 05ca 0233     		adds	r3, r3, #2
 3246 05cc 1B88     		ldrh	r3, [r3]
 782:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3247              		.loc 1 782 0 discriminator 2
 3248 05ce B3F5006F 		cmp	r3, #2048
 3249 05d2 0CD9     		bls	.L145
 3250              		.loc 1 783 0
 3251 05d4 BB68     		ldr	r3, [r7, #8]
 3252 05d6 0233     		adds	r3, r3, #2
 3253 05d8 1B88     		ldrh	r3, [r3]
 3254 05da B3F5406F 		cmp	r3, #3072
 3255 05de 06D8     		bhi	.L145
 784:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 3256              		.loc 1 784 0 discriminator 1
 3257 05e0 BB68     		ldr	r3, [r7, #8]
 3258 05e2 0233     		adds	r3, r3, #2
 3259 05e4 1A88     		ldrh	r2, [r3]
 3260 05e6 BB68     		ldr	r3, [r7, #8]
 3261 05e8 1B88     		ldrh	r3, [r3]
 783:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3262              		.loc 1 783 0 discriminator 1
 3263 05ea 9A42     		cmp	r2, r3
 3264 05ec 01D2     		bcs	.L146
 3265              	.L145:
 785:bluetooth_rxtx.c **** 			return 0;
 3266              		.loc 1 785 0
 3267 05ee 0023     		movs	r3, #0
 3268 05f0 7CE2     		b	.L164
 3269              	.L146:
 786:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 3270              		.loc 1 786 0
 3271 05f2 BB68     		ldr	r3, [r7, #8]
 3272 05f4 1A88     		ldrh	r2, [r3]
 3273 05f6 1D4B     		ldr	r3, .L168+52
 3274 05f8 1A80     		strh	r2, [r3]	@ movhi
 787:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 3275              		.loc 1 787 0
 3276 05fa BB68     		ldr	r3, [r7, #8]
 3277 05fc 5A88     		ldrh	r2, [r3, #2]
 3278 05fe 1C4B     		ldr	r3, .L168+56
 3279 0600 1A80     		strh	r2, [r3]	@ movhi
 788:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
ARM GAS  /tmp/ccQUMSla.s 			page 71


 3280              		.loc 1 788 0
 3281 0602 104B     		ldr	r3, .L168+12
 3282 0604 0422     		movs	r2, #4
 3283 0606 1A70     		strb	r2, [r3]
 789:bluetooth_rxtx.c **** 		*data_len = 0;
 3284              		.loc 1 789 0
 3285 0608 3B68     		ldr	r3, [r7]
 3286 060a 0022     		movs	r2, #0
 3287 060c 1A60     		str	r2, [r3]
 790:bluetooth_rxtx.c **** 		break;
 3288              		.loc 1 790 0
 3289 060e 6CE2     		b	.L122
 3290              	.L94:
 791:bluetooth_rxtx.c **** 
 792:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 793:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 3291              		.loc 1 793 0
 3292 0610 BB68     		ldr	r3, [r7, #8]
 3293 0612 1B88     		ldrh	r3, [r3]
 3294 0614 B3F5807F 		cmp	r3, #256
 3295 0618 01D9     		bls	.L147
 794:bluetooth_rxtx.c **** 			return 0;
 3296              		.loc 1 794 0
 3297 061a 0023     		movs	r3, #0
 3298 061c 66E2     		b	.L164
 3299              	.L147:
 795:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 3300              		.loc 1 795 0
 3301 061e BB68     		ldr	r3, [r7, #8]
 3302 0620 1B88     		ldrh	r3, [r3]
 3303 0622 DAB2     		uxtb	r2, r3
 3304 0624 134B     		ldr	r3, .L168+60
 3305 0626 1A70     		strb	r2, [r3]
 796:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 3306              		.loc 1 796 0
 3307 0628 064B     		ldr	r3, .L168+12
 3308 062a 0722     		movs	r2, #7
 3309 062c 1A70     		strb	r2, [r3]
 797:bluetooth_rxtx.c **** 		*data_len = 0;
 3310              		.loc 1 797 0
 3311 062e 3B68     		ldr	r3, [r7]
 3312 0630 0022     		movs	r2, #0
 3313 0632 1A60     		str	r2, [r3]
 798:bluetooth_rxtx.c **** 		break;
 3314              		.loc 1 798 0
 3315 0634 59E2     		b	.L122
 3316              	.L169:
 3317 0636 00BF     		.align	2
 3318              	.L168:
 3319 0638 5CC00920 		.word	537509980
 3320 063c 54C00920 		.word	537509972
 3321 0640 58C00920 		.word	537509976
 3322 0644 00000000 		.word	requested_mode
 3323 0648 00000000 		.word	rr
 3324 064c 00000000 		.word	modulation
 3325 0650 00000000 		.word	channel
 3326 0654 00000000 		.word	requested_channel
ARM GAS  /tmp/ccQUMSla.s 			page 72


 3327 0658 00000000 		.word	hop_mode
 3328 065c 00000000 		.word	mode
 3329 0660 00000000 		.word	iap_entry
 3330 0664 00000000 		.word	bootloader_ctrl
 3331 0668 21BB0543 		.word	1124449057
 3332 066c 00000000 		.word	low_freq
 3333 0670 00000000 		.word	high_freq
 3334 0674 00000000 		.word	rssi_threshold
 3335              	.L93:
 799:bluetooth_rxtx.c **** 
 800:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 801:bluetooth_rxtx.c **** 		data[0] = 0x00;
 3336              		.loc 1 801 0
 3337 0678 7B68     		ldr	r3, [r7, #4]
 3338 067a 0022     		movs	r2, #0
 3339 067c 1A70     		strb	r2, [r3]
 802:bluetooth_rxtx.c **** 		data[1] = 0x00;
 3340              		.loc 1 802 0
 3341 067e 7B68     		ldr	r3, [r7, #4]
 3342 0680 0133     		adds	r3, r3, #1
 3343 0682 0022     		movs	r2, #0
 3344 0684 1A70     		strb	r2, [r3]
 803:bluetooth_rxtx.c **** 
 804:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 3345              		.loc 1 804 0
 3346 0686 A448     		ldr	r0, .L170
 3347 0688 FFF7FEFF 		bl	strlen
 3348 068c 0346     		mov	r3, r0
 3349 068e 87F84330 		strb	r3, [r7, #67]
 805:bluetooth_rxtx.c **** 		data[2] = length;
 3350              		.loc 1 805 0
 3351 0692 7B68     		ldr	r3, [r7, #4]
 3352 0694 0233     		adds	r3, r3, #2
 3353 0696 97F84320 		ldrb	r2, [r7, #67]
 3354 069a 1A70     		strb	r2, [r3]
 806:bluetooth_rxtx.c **** 
 807:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 3355              		.loc 1 807 0
 3356 069c 7B68     		ldr	r3, [r7, #4]
 3357 069e DA1C     		adds	r2, r3, #3
 3358 06a0 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3359 06a4 1046     		mov	r0, r2
 3360 06a6 9C49     		ldr	r1, .L170
 3361 06a8 1A46     		mov	r2, r3
 3362 06aa FFF7FEFF 		bl	memcpy
 808:bluetooth_rxtx.c **** 
 809:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 3363              		.loc 1 809 0
 3364 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3365 06b2 DA1C     		adds	r2, r3, #3
 3366 06b4 3B68     		ldr	r3, [r7]
 3367 06b6 1A60     		str	r2, [r3]
 810:bluetooth_rxtx.c **** 		break;
 3368              		.loc 1 810 0
 3369 06b8 17E2     		b	.L122
 3370              	.L115:
 811:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 73


 812:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 813:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 3371              		.loc 1 813 0
 3372 06ba 9848     		ldr	r0, .L170+4
 3373 06bc FFF7FEFF 		bl	strlen
 3374 06c0 0346     		mov	r3, r0
 3375 06c2 87F84330 		strb	r3, [r7, #67]
 814:bluetooth_rxtx.c **** 		data[0] = length;
 3376              		.loc 1 814 0
 3377 06c6 7B68     		ldr	r3, [r7, #4]
 3378 06c8 97F84320 		ldrb	r2, [r7, #67]
 3379 06cc 1A70     		strb	r2, [r3]
 815:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 3380              		.loc 1 815 0
 3381 06ce 7B68     		ldr	r3, [r7, #4]
 3382 06d0 5A1C     		adds	r2, r3, #1
 3383 06d2 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3384 06d6 1046     		mov	r0, r2
 3385 06d8 9049     		ldr	r1, .L170+4
 3386 06da 1A46     		mov	r2, r3
 3387 06dc FFF7FEFF 		bl	memcpy
 816:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 3388              		.loc 1 816 0
 3389 06e0 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3390 06e4 5A1C     		adds	r2, r3, #1
 3391 06e6 3B68     		ldr	r3, [r7]
 3392 06e8 1A60     		str	r2, [r3]
 817:bluetooth_rxtx.c **** 		break;
 3393              		.loc 1 817 0
 3394 06ea FEE1     		b	.L122
 3395              	.L95:
 818:bluetooth_rxtx.c **** 
 819:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 820:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 3396              		.loc 1 820 0
 3397 06ec 7B68     		ldr	r3, [r7, #4]
 3398 06ee 0122     		movs	r2, #1
 3399 06f0 1A70     		strb	r2, [r3]
 821:bluetooth_rxtx.c **** 		*data_len = 1;
 3400              		.loc 1 821 0
 3401 06f2 3B68     		ldr	r3, [r7]
 3402 06f4 0122     		movs	r2, #1
 3403 06f6 1A60     		str	r2, [r3]
 822:bluetooth_rxtx.c **** 		break;
 3404              		.loc 1 822 0
 3405 06f8 F7E1     		b	.L122
 3406              	.L96:
 823:bluetooth_rxtx.c **** 
 824:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 825:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 3407              		.loc 1 825 0
 3408 06fa BB68     		ldr	r3, [r7, #8]
 3409 06fc 1B88     		ldrh	r3, [r3]
 3410 06fe DAB2     		uxtb	r2, r3
 3411 0700 874B     		ldr	r3, .L170+8
 3412 0702 1A70     		strb	r2, [r3]
 826:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
ARM GAS  /tmp/ccQUMSla.s 			page 74


 3413              		.loc 1 826 0
 3414 0704 FFF7FEFF 		bl	cs_threshold_calc_and_set
 827:bluetooth_rxtx.c **** 		break;
 3415              		.loc 1 827 0
 3416 0708 EFE1     		b	.L122
 3417              	.L97:
 828:bluetooth_rxtx.c **** 
 829:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 830:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 3418              		.loc 1 830 0
 3419 070a 854B     		ldr	r3, .L170+8
 3420 070c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3421 070e DAB2     		uxtb	r2, r3
 3422 0710 7B68     		ldr	r3, [r7, #4]
 3423 0712 1A70     		strb	r2, [r3]
 831:bluetooth_rxtx.c **** 		*data_len = 1;
 3424              		.loc 1 831 0
 3425 0714 3B68     		ldr	r3, [r7]
 3426 0716 0122     		movs	r2, #1
 3427 0718 1A60     		str	r2, [r3]
 832:bluetooth_rxtx.c **** 		break;
 3428              		.loc 1 832 0
 3429 071a E6E1     		b	.L122
 3430              	.L98:
 833:bluetooth_rxtx.c **** 
 834:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 835:bluetooth_rxtx.c **** 		target.address = 0;
 3431              		.loc 1 835 0
 3432 071c 8149     		ldr	r1, .L170+12
 3433 071e 4FF00002 		mov	r2, #0
 3434 0722 4FF00003 		mov	r3, #0
 3435 0726 C1E90023 		strd	r2, [r1]
 836:bluetooth_rxtx.c **** 		target.access_code = 0;
 3436              		.loc 1 836 0
 3437 072a 7E49     		ldr	r1, .L170+12
 3438 072c 4FF00002 		mov	r2, #0
 3439 0730 4FF00003 		mov	r3, #0
 3440 0734 C1E90223 		strd	r2, [r1, #8]
 837:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3441              		.loc 1 837 0
 3442 0738 0023     		movs	r3, #0
 3443 073a FB64     		str	r3, [r7, #76]
 3444 073c 25E0     		b	.L148
 3445              	.L149:
 838:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3446              		.loc 1 838 0 discriminator 3
 3447 073e 794B     		ldr	r3, .L170+12
 3448 0740 D3E900AB 		ldrd	r10, [r3]
 3449 0744 FB6C     		ldr	r3, [r7, #76]
 3450 0746 7A68     		ldr	r2, [r7, #4]
 3451 0748 1344     		add	r3, r3, r2
 3452 074a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3453 074c DAB2     		uxtb	r2, r3
 3454 074e 4FF00003 		mov	r3, #0
 3455 0752 F96C     		ldr	r1, [r7, #76]
 3456 0754 C900     		lsls	r1, r1, #3
 3457 0756 A1F12006 		sub	r6, r1, #32
ARM GAS  /tmp/ccQUMSla.s 			page 75


 3458 075a C1F12000 		rsb	r0, r1, #32
 3459 075e 03FA01F9 		lsl	r9, r3, r1
 3460 0762 02FA06F6 		lsl	r6, r2, r6
 3461 0766 49EA0609 		orr	r9, r9, r6
 3462 076a 22FA00F0 		lsr	r0, r2, r0
 3463 076e 49EA0009 		orr	r9, r9, r0
 3464 0772 02FA01F8 		lsl	r8, r2, r1
 3465 0776 4AEA0802 		orr	r2, r10, r8
 3466 077a 4BEA0903 		orr	r3, fp, r9
 3467 077e 6949     		ldr	r1, .L170+12
 3468 0780 C1E90023 		strd	r2, [r1]
 837:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3469              		.loc 1 837 0 discriminator 3
 3470 0784 FB6C     		ldr	r3, [r7, #76]
 3471 0786 0133     		adds	r3, r3, #1
 3472 0788 FB64     		str	r3, [r7, #76]
 3473              	.L148:
 837:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3474              		.loc 1 837 0 is_stmt 0 discriminator 1
 3475 078a FB6C     		ldr	r3, [r7, #76]
 3476 078c 072B     		cmp	r3, #7
 3477 078e D6DD     		ble	.L149
 839:bluetooth_rxtx.c **** 		}
 840:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3478              		.loc 1 840 0 is_stmt 1
 3479 0790 0023     		movs	r3, #0
 3480 0792 FB64     		str	r3, [r7, #76]
 3481 0794 24E0     		b	.L150
 3482              	.L151:
 841:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3483              		.loc 1 841 0 discriminator 3
 3484 0796 634B     		ldr	r3, .L170+12
 3485 0798 D3E90289 		ldrd	r8, [r3, #8]
 3486 079c FB6C     		ldr	r3, [r7, #76]
 3487 079e 0833     		adds	r3, r3, #8
 3488 07a0 7A68     		ldr	r2, [r7, #4]
 3489 07a2 1344     		add	r3, r3, r2
 3490 07a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3491 07a6 DAB2     		uxtb	r2, r3
 3492 07a8 4FF00003 		mov	r3, #0
 3493 07ac F96C     		ldr	r1, [r7, #76]
 3494 07ae C900     		lsls	r1, r1, #3
 3495 07b0 A1F12006 		sub	r6, r1, #32
 3496 07b4 C1F12000 		rsb	r0, r1, #32
 3497 07b8 03FA01F5 		lsl	r5, r3, r1
 3498 07bc 02FA06F6 		lsl	r6, r2, r6
 3499 07c0 3543     		orrs	r5, r5, r6
 3500 07c2 22FA00F0 		lsr	r0, r2, r0
 3501 07c6 0543     		orrs	r5, r5, r0
 3502 07c8 02FA01F4 		lsl	r4, r2, r1
 3503 07cc 48EA0402 		orr	r2, r8, r4
 3504 07d0 49EA0503 		orr	r3, r9, r5
 3505 07d4 5349     		ldr	r1, .L170+12
 3506 07d6 C1E90223 		strd	r2, [r1, #8]
 840:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3507              		.loc 1 840 0 discriminator 3
 3508 07da FB6C     		ldr	r3, [r7, #76]
ARM GAS  /tmp/ccQUMSla.s 			page 76


 3509 07dc 0133     		adds	r3, r3, #1
 3510 07de FB64     		str	r3, [r7, #76]
 3511              	.L150:
 840:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3512              		.loc 1 840 0 is_stmt 0 discriminator 1
 3513 07e0 FB6C     		ldr	r3, [r7, #76]
 3514 07e2 072B     		cmp	r3, #7
 3515 07e4 D7DD     		ble	.L151
 842:bluetooth_rxtx.c **** 		}
 843:bluetooth_rxtx.c **** 		break;
 3516              		.loc 1 843 0 is_stmt 1
 3517 07e6 80E1     		b	.L122
 3518              	.L99:
 844:bluetooth_rxtx.c **** 
 845:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 846:bluetooth_rxtx.c **** 		clock_offset = 0;
 3519              		.loc 1 846 0
 3520 07e8 0023     		movs	r3, #0
 3521 07ea BB64     		str	r3, [r7, #72]
 847:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3522              		.loc 1 847 0
 3523 07ec 0023     		movs	r3, #0
 3524 07ee FB64     		str	r3, [r7, #76]
 3525 07f0 0DE0     		b	.L152
 3526              	.L153:
 848:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3527              		.loc 1 848 0 discriminator 3
 3528 07f2 BB6C     		ldr	r3, [r7, #72]
 3529 07f4 1B02     		lsls	r3, r3, #8
 3530 07f6 BB64     		str	r3, [r7, #72]
 849:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3531              		.loc 1 849 0 discriminator 3
 3532 07f8 FB6C     		ldr	r3, [r7, #76]
 3533 07fa 7A68     		ldr	r2, [r7, #4]
 3534 07fc 1344     		add	r3, r3, r2
 3535 07fe 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3536 0800 1A46     		mov	r2, r3
 3537 0802 BB6C     		ldr	r3, [r7, #72]
 3538 0804 1343     		orrs	r3, r3, r2
 3539 0806 BB64     		str	r3, [r7, #72]
 847:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3540              		.loc 1 847 0 discriminator 3
 3541 0808 FB6C     		ldr	r3, [r7, #76]
 3542 080a 0133     		adds	r3, r3, #1
 3543 080c FB64     		str	r3, [r7, #76]
 3544              	.L152:
 847:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3545              		.loc 1 847 0 is_stmt 0 discriminator 1
 3546 080e FB6C     		ldr	r3, [r7, #76]
 3547 0810 032B     		cmp	r3, #3
 3548 0812 EEDD     		ble	.L153
 850:bluetooth_rxtx.c **** 		}
 851:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3549              		.loc 1 851 0 is_stmt 1
 3550 0814 444B     		ldr	r3, .L170+16
 3551 0816 1A68     		ldr	r2, [r3]
 3552 0818 BB6C     		ldr	r3, [r7, #72]
ARM GAS  /tmp/ccQUMSla.s 			page 77


 3553 081a 1344     		add	r3, r3, r2
 3554 081c 424A     		ldr	r2, .L170+16
 3555 081e 1360     		str	r3, [r2]
 852:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3556              		.loc 1 852 0
 3557 0820 424B     		ldr	r3, .L170+20
 3558 0822 0222     		movs	r2, #2
 3559 0824 1A70     		strb	r2, [r3]
 853:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3560              		.loc 1 853 0
 3561 0826 424B     		ldr	r3, .L170+24
 3562 0828 0822     		movs	r2, #8
 3563 082a 1A70     		strb	r2, [r3]
 854:bluetooth_rxtx.c **** 		break;
 3564              		.loc 1 854 0
 3565 082c 5DE1     		b	.L122
 3566              	.L100:
 855:bluetooth_rxtx.c **** 
 856:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 857:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3567              		.loc 1 857 0
 3568 082e 7B68     		ldr	r3, [r7, #4]
 3569 0830 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3570 0832 1A46     		mov	r2, r3
 3571 0834 7B68     		ldr	r3, [r7, #4]
 3572 0836 0133     		adds	r3, r3, #1
 3573 0838 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3574 083a 1B02     		lsls	r3, r3, #8
 3575 083c 1A43     		orrs	r2, r2, r3
 3576 083e 7B68     		ldr	r3, [r7, #4]
 3577 0840 0233     		adds	r3, r3, #2
 3578 0842 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3579 0844 1B04     		lsls	r3, r3, #16
 3580 0846 1A43     		orrs	r2, r2, r3
 3581 0848 7B68     		ldr	r3, [r7, #4]
 3582 084a 0333     		adds	r3, r3, #3
 3583 084c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3584 084e 1B06     		lsls	r3, r3, #24
 3585 0850 1343     		orrs	r3, r3, r2
 3586 0852 FB63     		str	r3, [r7, #60]
 858:bluetooth_rxtx.c **** 		clkn = clock;
 3587              		.loc 1 858 0
 3588 0854 344A     		ldr	r2, .L170+16
 3589 0856 FB6B     		ldr	r3, [r7, #60]
 3590 0858 1360     		str	r3, [r2]
 859:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3591              		.loc 1 859 0
 3592 085a FFF7FEFF 		bl	cs_threshold_calc_and_set
 860:bluetooth_rxtx.c **** 		break;
 3593              		.loc 1 860 0
 3594 085e 44E1     		b	.L122
 3595              	.L111:
 861:bluetooth_rxtx.c **** 
 862:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 863:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3596              		.loc 1 863 0
 3597 0860 0023     		movs	r3, #0
ARM GAS  /tmp/ccQUMSla.s 			page 78


 3598 0862 FB64     		str	r3, [r7, #76]
 3599 0864 0BE0     		b	.L154
 3600              	.L155:
 864:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3601              		.loc 1 864 0 discriminator 3
 3602 0866 FB6C     		ldr	r3, [r7, #76]
 3603 0868 7A68     		ldr	r2, [r7, #4]
 3604 086a 1344     		add	r3, r3, r2
 3605 086c 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3606 086e 314A     		ldr	r2, .L170+28
 3607 0870 FB6C     		ldr	r3, [r7, #76]
 3608 0872 1344     		add	r3, r3, r2
 3609 0874 0A46     		mov	r2, r1
 3610 0876 1A70     		strb	r2, [r3]
 863:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3611              		.loc 1 863 0 discriminator 3
 3612 0878 FB6C     		ldr	r3, [r7, #76]
 3613 087a 0133     		adds	r3, r3, #1
 3614 087c FB64     		str	r3, [r7, #76]
 3615              	.L154:
 863:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3616              		.loc 1 863 0 is_stmt 0 discriminator 1
 3617 087e FB6C     		ldr	r3, [r7, #76]
 3618 0880 092B     		cmp	r3, #9
 3619 0882 F0DD     		ble	.L155
 865:bluetooth_rxtx.c **** 		}
 866:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3620              		.loc 1 866 0 is_stmt 1
 3621 0884 2C4B     		ldr	r3, .L170+32
 3622 0886 0122     		movs	r2, #1
 3623 0888 1A70     		strb	r2, [r3]
 867:bluetooth_rxtx.c **** 		*data_len = 10;
 3624              		.loc 1 867 0
 3625 088a 3B68     		ldr	r3, [r7]
 3626 088c 0A22     		movs	r2, #10
 3627 088e 1A60     		str	r2, [r3]
 868:bluetooth_rxtx.c **** 		break;
 3628              		.loc 1 868 0
 3629 0890 2BE1     		b	.L122
 3630              	.L112:
 869:bluetooth_rxtx.c **** 
 870:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 871:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3631              		.loc 1 871 0
 3632 0892 0023     		movs	r3, #0
 3633 0894 FB64     		str	r3, [r7, #76]
 3634 0896 07E0     		b	.L156
 3635              	.L157:
 872:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3636              		.loc 1 872 0 discriminator 3
 3637 0898 264A     		ldr	r2, .L170+28
 3638 089a FB6C     		ldr	r3, [r7, #76]
 3639 089c 1344     		add	r3, r3, r2
 3640 089e 0022     		movs	r2, #0
 3641 08a0 1A70     		strb	r2, [r3]
 871:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3642              		.loc 1 871 0 discriminator 3
ARM GAS  /tmp/ccQUMSla.s 			page 79


 3643 08a2 FB6C     		ldr	r3, [r7, #76]
 3644 08a4 0133     		adds	r3, r3, #1
 3645 08a6 FB64     		str	r3, [r7, #76]
 3646              	.L156:
 871:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3647              		.loc 1 871 0 is_stmt 0 discriminator 1
 3648 08a8 FB6C     		ldr	r3, [r7, #76]
 3649 08aa 092B     		cmp	r3, #9
 3650 08ac F4DD     		ble	.L157
 873:bluetooth_rxtx.c **** 		}
 874:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3651              		.loc 1 874 0 is_stmt 1
 3652 08ae 224B     		ldr	r3, .L170+32
 3653 08b0 0022     		movs	r2, #0
 3654 08b2 1A70     		strb	r2, [r3]
 875:bluetooth_rxtx.c **** 		*data_len = 10;
 3655              		.loc 1 875 0
 3656 08b4 3B68     		ldr	r3, [r7]
 3657 08b6 0A22     		movs	r2, #10
 3658 08b8 1A60     		str	r2, [r3]
 876:bluetooth_rxtx.c **** 		break;
 3659              		.loc 1 876 0
 3660 08ba 16E1     		b	.L122
 3661              	.L101:
 877:bluetooth_rxtx.c **** 
 878:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 879:bluetooth_rxtx.c **** 		clock = clkn;
 3662              		.loc 1 879 0
 3663 08bc 1A4B     		ldr	r3, .L170+16
 3664 08be 1B68     		ldr	r3, [r3]
 3665 08c0 FB63     		str	r3, [r7, #60]
 880:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3666              		.loc 1 880 0
 3667 08c2 0023     		movs	r3, #0
 3668 08c4 FB64     		str	r3, [r7, #76]
 3669 08c6 0CE0     		b	.L158
 3670              	.L159:
 881:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3671              		.loc 1 881 0 discriminator 3
 3672 08c8 FB6C     		ldr	r3, [r7, #76]
 3673 08ca 7A68     		ldr	r2, [r7, #4]
 3674 08cc 1344     		add	r3, r3, r2
 3675 08ce FA6C     		ldr	r2, [r7, #76]
 3676 08d0 D200     		lsls	r2, r2, #3
 3677 08d2 F96B     		ldr	r1, [r7, #60]
 3678 08d4 21FA02F2 		lsr	r2, r1, r2
 3679 08d8 D2B2     		uxtb	r2, r2
 3680 08da 1A70     		strb	r2, [r3]
 880:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3681              		.loc 1 880 0 discriminator 3
 3682 08dc FB6C     		ldr	r3, [r7, #76]
 3683 08de 0133     		adds	r3, r3, #1
 3684 08e0 FB64     		str	r3, [r7, #76]
 3685              	.L158:
 880:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3686              		.loc 1 880 0 is_stmt 0 discriminator 1
 3687 08e2 FB6C     		ldr	r3, [r7, #76]
ARM GAS  /tmp/ccQUMSla.s 			page 80


 3688 08e4 032B     		cmp	r3, #3
 3689 08e6 EFDD     		ble	.L159
 882:bluetooth_rxtx.c **** 		}
 883:bluetooth_rxtx.c **** 		*data_len = 4;
 3690              		.loc 1 883 0 is_stmt 1
 3691 08e8 3B68     		ldr	r3, [r7]
 3692 08ea 0422     		movs	r2, #4
 3693 08ec 1A60     		str	r2, [r3]
 884:bluetooth_rxtx.c **** 		break;
 3694              		.loc 1 884 0
 3695 08ee FCE0     		b	.L122
 3696              	.L102:
 885:bluetooth_rxtx.c **** 
 886:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 887:bluetooth_rxtx.c **** 		*data_len = 0;
 3697              		.loc 1 887 0
 3698 08f0 3B68     		ldr	r3, [r7]
 3699 08f2 0022     		movs	r2, #0
 3700 08f4 1A60     		str	r2, [r3]
 888:bluetooth_rxtx.c **** 
 889:bluetooth_rxtx.c **** 		do_hop = 0;
 3701              		.loc 1 889 0
 3702 08f6 114B     		ldr	r3, .L170+36
 3703 08f8 0022     		movs	r2, #0
 3704 08fa 1A70     		strb	r2, [r3]
 890:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3705              		.loc 1 890 0
 3706 08fc 0B4B     		ldr	r3, .L170+20
 3707 08fe 0322     		movs	r2, #3
 3708 0900 1A70     		strb	r2, [r3]
 891:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3709              		.loc 1 891 0
 3710 0902 0B4B     		ldr	r3, .L170+24
 3711 0904 0922     		movs	r2, #9
 3712 0906 1A70     		strb	r2, [r3]
 892:bluetooth_rxtx.c **** 
 893:bluetooth_rxtx.c **** 		queue_init();
 3713              		.loc 1 893 0
 3714 0908 FFF7FEFF 		bl	queue_init
 894:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3715              		.loc 1 894 0
 3716 090c FFF7FEFF 		bl	cs_threshold_calc_and_set
 895:bluetooth_rxtx.c **** 		break;
 3717              		.loc 1 895 0
 3718 0910 EBE0     		b	.L122
 3719              	.L103:
 896:bluetooth_rxtx.c **** 
 897:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 898:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3720              		.loc 1 898 0
 3721 0912 0023     		movs	r3, #0
 3722 0914 FB64     		str	r3, [r7, #76]
 3723 0916 21E0     		b	.L160
 3724              	.L171:
 3725              		.align	2
 3726              	.L170:
 3727 0918 D4080000 		.word	.LC3
ARM GAS  /tmp/ccQUMSla.s 			page 81


 3728 091c 00000000 		.word	compile_info
 3729 0920 00000000 		.word	cs_threshold_req
 3730 0924 00000000 		.word	target
 3731 0928 00000000 		.word	clkn
 3732 092c 00000000 		.word	hop_mode
 3733 0930 00000000 		.word	requested_mode
 3734 0934 00000000 		.word	afh_map
 3735 0938 00000000 		.word	afh_enabled
 3736 093c 00000000 		.word	do_hop
 3737              	.L161:
 899:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3738              		.loc 1 899 0 discriminator 3
 3739 0940 FB6C     		ldr	r3, [r7, #76]
 3740 0942 7A68     		ldr	r2, [r7, #4]
 3741 0944 1344     		add	r3, r3, r2
 3742 0946 6C4A     		ldr	r2, .L172
 3743 0948 1168     		ldr	r1, [r2]
 3744 094a FA6C     		ldr	r2, [r7, #76]
 3745 094c D200     		lsls	r2, r2, #3
 3746 094e 21FA02F2 		lsr	r2, r1, r2
 3747 0952 D2B2     		uxtb	r2, r2
 3748 0954 1A70     		strb	r2, [r3]
 898:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3749              		.loc 1 898 0 discriminator 3
 3750 0956 FB6C     		ldr	r3, [r7, #76]
 3751 0958 0133     		adds	r3, r3, #1
 3752 095a FB64     		str	r3, [r7, #76]
 3753              	.L160:
 898:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3754              		.loc 1 898 0 is_stmt 0 discriminator 1
 3755 095c FB6C     		ldr	r3, [r7, #76]
 3756 095e 032B     		cmp	r3, #3
 3757 0960 EEDD     		ble	.L161
 900:bluetooth_rxtx.c **** 		}
 901:bluetooth_rxtx.c **** 		*data_len = 4;
 3758              		.loc 1 901 0 is_stmt 1
 3759 0962 3B68     		ldr	r3, [r7]
 3760 0964 0422     		movs	r2, #4
 3761 0966 1A60     		str	r2, [r3]
 902:bluetooth_rxtx.c **** 		break;
 3762              		.loc 1 902 0
 3763 0968 BFE0     		b	.L122
 3764              	.L104:
 903:bluetooth_rxtx.c **** 
 904:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 905:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3765              		.loc 1 905 0
 3766 096a 7B68     		ldr	r3, [r7, #4]
 3767 096c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3768 096e 1A46     		mov	r2, r3
 3769 0970 7B68     		ldr	r3, [r7, #4]
 3770 0972 0133     		adds	r3, r3, #1
 3771 0974 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3772 0976 1B02     		lsls	r3, r3, #8
 3773 0978 1A43     		orrs	r2, r2, r3
 3774 097a 7B68     		ldr	r3, [r7, #4]
 3775 097c 0233     		adds	r3, r3, #2
ARM GAS  /tmp/ccQUMSla.s 			page 82


 3776 097e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3777 0980 1B04     		lsls	r3, r3, #16
 3778 0982 1A43     		orrs	r2, r2, r3
 3779 0984 7B68     		ldr	r3, [r7, #4]
 3780 0986 0333     		adds	r3, r3, #3
 3781 0988 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3782 098a 1B06     		lsls	r3, r3, #24
 3783 098c 1343     		orrs	r3, r3, r2
 3784 098e 1846     		mov	r0, r3
 3785 0990 FFF7FEFF 		bl	le_set_access_address
 906:bluetooth_rxtx.c **** 		le.target_set = 1;
 3786              		.loc 1 906 0
 3787 0994 584B     		ldr	r3, .L172
 3788 0996 0122     		movs	r2, #1
 3789 0998 DA63     		str	r2, [r3, #60]
 907:bluetooth_rxtx.c **** 		break;
 3790              		.loc 1 907 0
 3791 099a A6E0     		b	.L122
 3792              	.L106:
 908:bluetooth_rxtx.c **** 
 909:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 910:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 911:bluetooth_rxtx.c **** 		break;
 912:bluetooth_rxtx.c **** 
 913:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 914:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 915:bluetooth_rxtx.c **** 		// don't commit here please
 916:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3793              		.loc 1 916 0
 3794 099c 7B68     		ldr	r3, [r7, #4]
 3795 099e 1322     		movs	r2, #19
 3796 09a0 1A70     		strb	r2, [r3]
 917:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3797              		.loc 1 917 0
 3798 09a2 7B68     		ldr	r3, [r7, #4]
 3799 09a4 0133     		adds	r3, r3, #1
 3800 09a6 3722     		movs	r2, #55
 3801 09a8 1A70     		strb	r2, [r3]
 918:bluetooth_rxtx.c **** 		*data_len = 2;
 3802              		.loc 1 918 0
 3803 09aa 3B68     		ldr	r3, [r7]
 3804 09ac 0222     		movs	r2, #2
 3805 09ae 1A60     		str	r2, [r3]
 919:bluetooth_rxtx.c **** 		break;
 3806              		.loc 1 919 0
 3807 09b0 9BE0     		b	.L122
 3808              	.L107:
 920:bluetooth_rxtx.c **** 
 921:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 922:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3809              		.loc 1 922 0
 3810 09b2 514B     		ldr	r3, .L172
 3811 09b4 1B69     		ldr	r3, [r3, #16]
 3812 09b6 002B     		cmp	r3, #0
 3813 09b8 14BF     		ite	ne
 3814 09ba 0123     		movne	r3, #1
 3815 09bc 0023     		moveq	r3, #0
ARM GAS  /tmp/ccQUMSla.s 			page 83


 3816 09be DBB2     		uxtb	r3, r3
 3817 09c0 1A46     		mov	r2, r3
 3818 09c2 7B68     		ldr	r3, [r7, #4]
 3819 09c4 1A70     		strb	r2, [r3]
 923:bluetooth_rxtx.c **** 		*data_len = 1;
 3820              		.loc 1 923 0
 3821 09c6 3B68     		ldr	r3, [r7]
 3822 09c8 0122     		movs	r2, #1
 3823 09ca 1A60     		str	r2, [r3]
 924:bluetooth_rxtx.c **** 		break;
 3824              		.loc 1 924 0
 3825 09cc 8DE0     		b	.L122
 3826              	.L108:
 925:bluetooth_rxtx.c **** 
 926:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 927:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3827              		.loc 1 927 0
 3828 09ce BB68     		ldr	r3, [r7, #8]
 3829 09d0 1B88     		ldrh	r3, [r3]
 3830 09d2 002B     		cmp	r3, #0
 3831 09d4 14BF     		ite	ne
 3832 09d6 0123     		movne	r3, #1
 3833 09d8 0023     		moveq	r3, #0
 3834 09da DBB2     		uxtb	r3, r3
 3835 09dc 1A46     		mov	r2, r3
 3836 09de 464B     		ldr	r3, .L172
 3837 09e0 1A61     		str	r2, [r3, #16]
 928:bluetooth_rxtx.c **** 		break;
 3838              		.loc 1 928 0
 3839 09e2 82E0     		b	.L122
 3840              	.L109:
 929:bluetooth_rxtx.c **** 
 930:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 931:bluetooth_rxtx.c **** 		p = dequeue();
 3841              		.loc 1 931 0
 3842 09e4 FFF7FEFF 		bl	dequeue
 3843 09e8 7864     		str	r0, [r7, #68]
 932:bluetooth_rxtx.c **** 		if (p != NULL) {
 3844              		.loc 1 932 0
 3845 09ea 7B6C     		ldr	r3, [r7, #68]
 3846 09ec 002B     		cmp	r3, #0
 3847 09ee 08D0     		beq	.L162
 933:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3848              		.loc 1 933 0
 3849 09f0 7868     		ldr	r0, [r7, #4]
 3850 09f2 796C     		ldr	r1, [r7, #68]
 3851 09f4 4022     		movs	r2, #64
 3852 09f6 FFF7FEFF 		bl	memcpy
 934:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3853              		.loc 1 934 0
 3854 09fa 3B68     		ldr	r3, [r7]
 3855 09fc 4022     		movs	r2, #64
 3856 09fe 1A60     		str	r2, [r3]
 935:bluetooth_rxtx.c **** 		} else {
 936:bluetooth_rxtx.c **** 			data[0] = 0;
 937:bluetooth_rxtx.c **** 			*data_len = 1;
 938:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccQUMSla.s 			page 84


 939:bluetooth_rxtx.c **** 		break;
 3857              		.loc 1 939 0
 3858 0a00 73E0     		b	.L122
 3859              	.L162:
 936:bluetooth_rxtx.c **** 			*data_len = 1;
 3860              		.loc 1 936 0
 3861 0a02 7B68     		ldr	r3, [r7, #4]
 3862 0a04 0022     		movs	r2, #0
 3863 0a06 1A70     		strb	r2, [r3]
 937:bluetooth_rxtx.c **** 		}
 3864              		.loc 1 937 0
 3865 0a08 3B68     		ldr	r3, [r7]
 3866 0a0a 0122     		movs	r2, #1
 3867 0a0c 1A60     		str	r2, [r3]
 3868              		.loc 1 939 0
 3869 0a0e 6CE0     		b	.L122
 3870              	.L110:
 940:bluetooth_rxtx.c **** 
 941:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 942:bluetooth_rxtx.c **** 		*data_len = 0;
 3871              		.loc 1 942 0
 3872 0a10 3B68     		ldr	r3, [r7]
 3873 0a12 0022     		movs	r2, #0
 3874 0a14 1A60     		str	r2, [r3]
 943:bluetooth_rxtx.c **** 
 944:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3875              		.loc 1 944 0
 3876 0a16 394B     		ldr	r3, .L172+4
 3877 0a18 0022     		movs	r2, #0
 3878 0a1a 1A70     		strb	r2, [r3]
 945:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3879              		.loc 1 945 0
 3880 0a1c 384B     		ldr	r3, .L172+8
 3881 0a1e 0A22     		movs	r2, #10
 3882 0a20 1A70     		strb	r2, [r3]
 946:bluetooth_rxtx.c **** 
 947:bluetooth_rxtx.c **** 		queue_init();
 3883              		.loc 1 947 0
 3884 0a22 FFF7FEFF 		bl	queue_init
 948:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3885              		.loc 1 948 0
 3886 0a26 FFF7FEFF 		bl	cs_threshold_calc_and_set
 949:bluetooth_rxtx.c **** 		break;
 3887              		.loc 1 949 0
 3888 0a2a 5EE0     		b	.L122
 3889              	.L113:
 950:bluetooth_rxtx.c **** 
 951:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 952:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3890              		.loc 1 952 0
 3891 0a2c BB68     		ldr	r3, [r7, #8]
 3892 0a2e 1B88     		ldrh	r3, [r3]
 3893 0a30 DBB2     		uxtb	r3, r3
 3894 0a32 1846     		mov	r0, r3
 3895 0a34 FFF7FEFF 		bl	cc2400_get
 3896 0a38 0346     		mov	r3, r0
 3897 0a3a 7B87     		strh	r3, [r7, #58]	@ movhi
ARM GAS  /tmp/ccQUMSla.s 			page 85


 953:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3898              		.loc 1 953 0
 3899 0a3c 7B8F     		ldrh	r3, [r7, #58]
 3900 0a3e 1B0A     		lsrs	r3, r3, #8
 3901 0a40 9BB2     		uxth	r3, r3
 3902 0a42 DAB2     		uxtb	r2, r3
 3903 0a44 7B68     		ldr	r3, [r7, #4]
 3904 0a46 1A70     		strb	r2, [r3]
 954:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3905              		.loc 1 954 0
 3906 0a48 7B68     		ldr	r3, [r7, #4]
 3907 0a4a 0133     		adds	r3, r3, #1
 3908 0a4c 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3909 0a4e D2B2     		uxtb	r2, r2
 3910 0a50 1A70     		strb	r2, [r3]
 955:bluetooth_rxtx.c **** 		*data_len = 2;
 3911              		.loc 1 955 0
 3912 0a52 3B68     		ldr	r3, [r7]
 3913 0a54 0222     		movs	r2, #2
 3914 0a56 1A60     		str	r2, [r3]
 956:bluetooth_rxtx.c **** 		break;
 3915              		.loc 1 956 0
 3916 0a58 47E0     		b	.L122
 3917              	.L117:
 957:bluetooth_rxtx.c **** 
 958:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 959:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3918              		.loc 1 959 0
 3919 0a5a BB68     		ldr	r3, [r7, #8]
 3920 0a5c 1B88     		ldrh	r3, [r3]
 3921 0a5e DAB2     		uxtb	r2, r3
 3922 0a60 BB68     		ldr	r3, [r7, #8]
 3923 0a62 0233     		adds	r3, r3, #2
 3924 0a64 1B88     		ldrh	r3, [r3]
 3925 0a66 1046     		mov	r0, r2
 3926 0a68 1946     		mov	r1, r3
 3927 0a6a FFF7FEFF 		bl	cc2400_set
 960:bluetooth_rxtx.c **** 		break;
 3928              		.loc 1 960 0
 3929 0a6e 3CE0     		b	.L122
 3930              	.L114:
 961:bluetooth_rxtx.c **** 
 962:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 963:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3931              		.loc 1 963 0
 3932 0a70 2448     		ldr	r0, .L172+12
 3933 0a72 7968     		ldr	r1, [r7, #4]
 3934 0a74 0622     		movs	r2, #6
 3935 0a76 FFF7FEFF 		bl	memcpy
 964:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3936              		.loc 1 964 0
 3937 0a7a 214B     		ldr	r3, .L172+8
 3938 0a7c 0C22     		movs	r2, #12
 3939 0a7e 1A70     		strb	r2, [r3]
 965:bluetooth_rxtx.c **** 		break;
 3940              		.loc 1 965 0
 3941 0a80 33E0     		b	.L122
ARM GAS  /tmp/ccQUMSla.s 			page 86


 3942              	.L116:
 966:bluetooth_rxtx.c **** 
 967:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 968:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 969:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 970:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3943              		.loc 1 970 0
 3944 0a82 7B68     		ldr	r3, [r7, #4]
 3945 0a84 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3946 0a86 1C4B     		ldr	r3, .L172
 3947 0a88 83F83420 		strb	r2, [r3, #52]
 971:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3948              		.loc 1 971 0
 3949 0a8c 7B68     		ldr	r3, [r7, #4]
 3950 0a8e 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3951 0a90 194B     		ldr	r3, .L172
 3952 0a92 83F83520 		strb	r2, [r3, #53]
 972:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3953              		.loc 1 972 0
 3954 0a96 7B68     		ldr	r3, [r7, #4]
 3955 0a98 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3956 0a9a 174B     		ldr	r3, .L172
 3957 0a9c 83F83620 		strb	r2, [r3, #54]
 973:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3958              		.loc 1 973 0
 3959 0aa0 7B68     		ldr	r3, [r7, #4]
 3960 0aa2 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3961 0aa4 144B     		ldr	r3, .L172
 3962 0aa6 83F83720 		strb	r2, [r3, #55]
 974:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3963              		.loc 1 974 0
 3964 0aaa 7B68     		ldr	r3, [r7, #4]
 3965 0aac 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3966 0aae 124B     		ldr	r3, .L172
 3967 0ab0 83F83820 		strb	r2, [r3, #56]
 975:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3968              		.loc 1 975 0
 3969 0ab4 7B68     		ldr	r3, [r7, #4]
 3970 0ab6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3971 0ab8 0F4B     		ldr	r3, .L172
 3972 0aba 83F83920 		strb	r2, [r3, #57]
 976:bluetooth_rxtx.c **** 		le.target_set = 1;
 3973              		.loc 1 976 0
 3974 0abe 0E4B     		ldr	r3, .L172
 3975 0ac0 0122     		movs	r2, #1
 3976 0ac2 DA63     		str	r2, [r3, #60]
 977:bluetooth_rxtx.c **** 		break;
 3977              		.loc 1 977 0
 3978 0ac4 11E0     		b	.L122
 3979              	.L118:
 978:bluetooth_rxtx.c **** 
 979:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 980:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 981:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3980              		.loc 1 981 0
 3981 0ac6 BB68     		ldr	r3, [r7, #8]
 3982 0ac8 1B88     		ldrh	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 87


 3983 0aca DAB2     		uxtb	r2, r3
 3984 0acc 0E4B     		ldr	r3, .L172+16
 3985 0ace 1A70     		strb	r2, [r3]
 982:bluetooth_rxtx.c **** 		break;
 3986              		.loc 1 982 0
 3987 0ad0 0BE0     		b	.L122
 3988              	.L119:
 983:bluetooth_rxtx.c **** #endif
 984:bluetooth_rxtx.c **** 
 985:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 986:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 987:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 988:bluetooth_rxtx.c **** 			return 0;
 989:bluetooth_rxtx.c **** #endif
 990:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3989              		.loc 1 990 0
 3990 0ad2 0B4B     		ldr	r3, .L172+8
 3991 0ad4 0D22     		movs	r2, #13
 3992 0ad6 1A70     		strb	r2, [r3]
 991:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3993              		.loc 1 991 0
 3994 0ad8 BB68     		ldr	r3, [r7, #8]
 3995 0ada 1B88     		ldrh	r3, [r3]
 3996 0adc DAB2     		uxtb	r2, r3
 3997 0ade 0B4B     		ldr	r3, .L172+20
 3998 0ae0 1A70     		strb	r2, [r3]
 992:bluetooth_rxtx.c **** 		break;
 3999              		.loc 1 992 0
 4000 0ae2 02E0     		b	.L122
 4001              	.L60:
 993:bluetooth_rxtx.c **** 
 994:bluetooth_rxtx.c **** 	default:
 995:bluetooth_rxtx.c **** 		return 0;
 4002              		.loc 1 995 0
 4003 0ae4 0023     		movs	r3, #0
 4004 0ae6 01E0     		b	.L164
 4005              	.L165:
 911:bluetooth_rxtx.c **** 
 4006              		.loc 1 911 0
 4007 0ae8 00BF     		nop
 4008              	.L122:
 996:bluetooth_rxtx.c **** 	}
 997:bluetooth_rxtx.c **** 	return 1;
 4009              		.loc 1 997 0
 4010 0aea 0123     		movs	r3, #1
 4011              	.L164:
 998:bluetooth_rxtx.c **** }
 4012              		.loc 1 998 0 discriminator 1
 4013 0aec 1846     		mov	r0, r3
 4014 0aee 5437     		adds	r7, r7, #84
 4015              		.cfi_def_cfa_offset 36
 4016 0af0 BD46     		mov	sp, r7
 4017              		.cfi_def_cfa_register 13
 4018              		@ sp needed
 4019 0af2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4020              	.L173:
 4021 0af6 00BF     		.align	2
ARM GAS  /tmp/ccQUMSla.s 			page 88


 4022              	.L172:
 4023 0af8 00000000 		.word	le
 4024 0afc 00000000 		.word	hop_mode
 4025 0b00 00000000 		.word	requested_mode
 4026 0b04 00000000 		.word	slave_mac_address
 4027 0b08 00000000 		.word	jam_mode
 4028 0b0c 00000000 		.word	ego_mode
 4029              		.cfi_endproc
 4030              	.LFE12:
 4032              		.section	.text.clkn_init,"ax",%progbits
 4033              		.align	2
 4034              		.thumb
 4035              		.thumb_func
 4037              	clkn_init:
 4038              	.LFB13:
 999:bluetooth_rxtx.c **** 
1000:bluetooth_rxtx.c **** static void clkn_init()
1001:bluetooth_rxtx.c **** {
 4039              		.loc 1 1001 0
 4040              		.cfi_startproc
 4041              		@ args = 0, pretend = 0, frame = 0
 4042              		@ frame_needed = 1, uses_anonymous_args = 0
 4043              		@ link register save eliminated.
 4044 0000 80B4     		push	{r7}
 4045              		.cfi_def_cfa_offset 4
 4046              		.cfi_offset 7, -4
 4047 0002 00AF     		add	r7, sp, #0
 4048              		.cfi_def_cfa_register 7
1002:bluetooth_rxtx.c **** 	/*
1003:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
1004:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
1005:bluetooth_rxtx.c **** 	 * clock_start().
1006:bluetooth_rxtx.c **** 	 */
1007:bluetooth_rxtx.c **** 
1008:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
1009:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 4049              		.loc 1 1009 0
 4050 0004 0C4B     		ldr	r3, .L175
 4051 0006 0222     		movs	r2, #2
 4052 0008 1A60     		str	r2, [r3]
1010:bluetooth_rxtx.c **** 	clkn = 0;
 4053              		.loc 1 1010 0
 4054 000a 0C4B     		ldr	r3, .L175+4
 4055 000c 0022     		movs	r2, #0
 4056 000e 1A60     		str	r2, [r3]
1011:bluetooth_rxtx.c **** 
1012:bluetooth_rxtx.c **** #ifdef TC13BADGE
1013:bluetooth_rxtx.c **** 	/*
1014:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
1015:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
1016:bluetooth_rxtx.c **** 	 */
1017:bluetooth_rxtx.c **** 	T0PR = 2;
1018:bluetooth_rxtx.c **** #else
1019:bluetooth_rxtx.c **** 	/*
1020:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
1021:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
1022:bluetooth_rxtx.c **** 	 */
ARM GAS  /tmp/ccQUMSla.s 			page 89


1023:bluetooth_rxtx.c **** 	T0PR = 4;
 4057              		.loc 1 1023 0
 4058 0010 0B4B     		ldr	r3, .L175+8
 4059 0012 0422     		movs	r2, #4
 4060 0014 1A60     		str	r2, [r3]
1024:bluetooth_rxtx.c **** #endif
1025:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
1026:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 4061              		.loc 1 1026 0
 4062 0016 0B4B     		ldr	r3, .L175+12
 4063 0018 40F63442 		movw	r2, #3124
 4064 001c 1A60     		str	r2, [r3]
1027:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 4065              		.loc 1 1027 0
 4066 001e 0A4B     		ldr	r3, .L175+16
 4067 0020 0322     		movs	r2, #3
 4068 0022 1A60     		str	r2, [r3]
1028:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 4069              		.loc 1 1028 0
 4070 0024 094B     		ldr	r3, .L175+20
 4071 0026 0222     		movs	r2, #2
 4072 0028 1A60     		str	r2, [r3]
1029:bluetooth_rxtx.c **** 
1030:bluetooth_rxtx.c **** 	/* start timer */
1031:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 4073              		.loc 1 1031 0
 4074 002a 034B     		ldr	r3, .L175
 4075 002c 0122     		movs	r2, #1
 4076 002e 1A60     		str	r2, [r3]
1032:bluetooth_rxtx.c **** }
 4077              		.loc 1 1032 0
 4078 0030 BD46     		mov	sp, r7
 4079              		.cfi_def_cfa_register 13
 4080              		@ sp needed
 4081 0032 5DF8047B 		ldr	r7, [sp], #4
 4082              		.cfi_restore 7
 4083              		.cfi_def_cfa_offset 0
 4084 0036 7047     		bx	lr
 4085              	.L176:
 4086              		.align	2
 4087              	.L175:
 4088 0038 04400040 		.word	1073758212
 4089 003c 00000000 		.word	clkn
 4090 0040 0C400040 		.word	1073758220
 4091 0044 18400040 		.word	1073758232
 4092 0048 14400040 		.word	1073758228
 4093 004c 00E100E0 		.word	-536813312
 4094              		.cfi_endproc
 4095              	.LFE13:
 4097              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 4098              		.align	2
 4099              		.global	TIMER0_IRQHandler
 4100              		.thumb
 4101              		.thumb_func
 4103              	TIMER0_IRQHandler:
 4104              	.LFB14:
1033:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 90


1034:bluetooth_rxtx.c **** /* Update CLKN. */
1035:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
1036:bluetooth_rxtx.c **** {
 4105              		.loc 1 1036 0
 4106              		.cfi_startproc
 4107              		@ args = 0, pretend = 0, frame = 8
 4108              		@ frame_needed = 1, uses_anonymous_args = 0
 4109              		@ link register save eliminated.
 4110 0000 80B4     		push	{r7}
 4111              		.cfi_def_cfa_offset 4
 4112              		.cfi_offset 7, -4
 4113 0002 83B0     		sub	sp, sp, #12
 4114              		.cfi_def_cfa_offset 16
 4115 0004 00AF     		add	r7, sp, #0
 4116              		.cfi_def_cfa_register 7
1037:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
1038:bluetooth_rxtx.c **** 	u32 next;
1039:bluetooth_rxtx.c **** 	u32 le_clk;
1040:bluetooth_rxtx.c **** 
1041:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 4117              		.loc 1 1041 0
 4118 0006 4FF04023 		mov	r3, #1073758208
 4119 000a 1B68     		ldr	r3, [r3]
 4120 000c 03F00103 		and	r3, r3, #1
 4121 0010 002B     		cmp	r3, #0
 4122 0012 6DD0     		beq	.L177
1042:bluetooth_rxtx.c **** 
1043:bluetooth_rxtx.c **** 		clkn++;
 4123              		.loc 1 1043 0
 4124 0014 394B     		ldr	r3, .L187
 4125 0016 1B68     		ldr	r3, [r3]
 4126 0018 0133     		adds	r3, r3, #1
 4127 001a 384A     		ldr	r2, .L187
 4128 001c 1360     		str	r3, [r2]
1044:bluetooth_rxtx.c **** 		next = clkn;
 4129              		.loc 1 1044 0
 4130 001e 374B     		ldr	r3, .L187
 4131 0020 1B68     		ldr	r3, [r3]
 4132 0022 7B60     		str	r3, [r7, #4]
1045:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 4133              		.loc 1 1045 0
 4134 0024 364B     		ldr	r3, .L187+4
 4135 0026 9B69     		ldr	r3, [r3, #24]
 4136 0028 7A68     		ldr	r2, [r7, #4]
 4137 002a D31A     		subs	r3, r2, r3
 4138 002c 03F00303 		and	r3, r3, #3
 4139 0030 3B60     		str	r3, [r7]
1046:bluetooth_rxtx.c **** 
1047:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
1048:bluetooth_rxtx.c **** 
1049:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
1050:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 4140              		.loc 1 1050 0
 4141 0032 344B     		ldr	r3, .L187+8
 4142 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4143 0036 002B     		cmp	r3, #0
 4144 0038 03D0     		beq	.L179
ARM GAS  /tmp/ccQUMSla.s 			page 91


 4145              		.loc 1 1050 0 is_stmt 0 discriminator 1
 4146 003a 324B     		ldr	r3, .L187+8
 4147 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4148 003e 012B     		cmp	r3, #1
 4149 0040 09D1     		bne	.L180
 4150              	.L179:
1051:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4151              		.loc 1 1051 0 is_stmt 1
 4152 0042 7B68     		ldr	r3, [r7, #4]
 4153 0044 03F07F03 		and	r3, r3, #127
 4154 0048 002B     		cmp	r3, #0
 4155 004a 03D1     		bne	.L181
1052:bluetooth_rxtx.c **** 				do_hop = 1;
 4156              		.loc 1 1052 0
 4157 004c 2E4B     		ldr	r3, .L187+12
 4158 004e 0122     		movs	r2, #1
 4159 0050 1A70     		strb	r2, [r3]
1051:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4160              		.loc 1 1051 0
 4161 0052 37E0     		b	.L182
 4162              	.L181:
 4163 0054 36E0     		b	.L182
 4164              	.L180:
1053:bluetooth_rxtx.c **** 		}
1054:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
1055:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 4165              		.loc 1 1055 0
 4166 0056 2B4B     		ldr	r3, .L187+8
 4167 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4168 005a 022B     		cmp	r3, #2
 4169 005c 08D1     		bne	.L183
1056:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 4170              		.loc 1 1056 0
 4171 005e 7B68     		ldr	r3, [r7, #4]
 4172 0060 03F00103 		and	r3, r3, #1
 4173 0064 002B     		cmp	r3, #0
 4174 0066 2DD1     		bne	.L182
1057:bluetooth_rxtx.c **** 				do_hop = 1;
 4175              		.loc 1 1057 0
 4176 0068 274B     		ldr	r3, .L187+12
 4177 006a 0122     		movs	r2, #1
 4178 006c 1A70     		strb	r2, [r3]
 4179 006e 29E0     		b	.L182
 4180              	.L183:
1058:bluetooth_rxtx.c **** 		}
1059:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
1060:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 4181              		.loc 1 1060 0
 4182 0070 244B     		ldr	r3, .L187+8
 4183 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4184 0074 032B     		cmp	r3, #3
 4185 0076 25D1     		bne	.L182
1061:bluetooth_rxtx.c **** 			// Only hop if connected
1062:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 4186              		.loc 1 1062 0
 4187 0078 214B     		ldr	r3, .L187+4
 4188 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
ARM GAS  /tmp/ccQUMSla.s 			page 92


 4189 007c 032B     		cmp	r3, #3
 4190 007e 21D1     		bne	.L182
 4191              		.loc 1 1062 0 is_stmt 0 discriminator 1
 4192 0080 3B68     		ldr	r3, [r7]
 4193 0082 002B     		cmp	r3, #0
 4194 0084 1ED1     		bne	.L182
1063:bluetooth_rxtx.c **** 				--le.interval_timer;
 4195              		.loc 1 1063 0 is_stmt 1
 4196 0086 1E4B     		ldr	r3, .L187+4
 4197 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4198 008a 9BB2     		uxth	r3, r3
 4199 008c 013B     		subs	r3, r3, #1
 4200 008e 9AB2     		uxth	r2, r3
 4201 0090 1B4B     		ldr	r3, .L187+4
 4202 0092 9A83     		strh	r2, [r3, #28]	@ movhi
1064:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 4203              		.loc 1 1064 0
 4204 0094 1A4B     		ldr	r3, .L187+4
 4205 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4206 0098 9BB2     		uxth	r3, r3
 4207 009a 002B     		cmp	r3, #0
 4208 009c 0ED1     		bne	.L185
1065:bluetooth_rxtx.c **** 					do_hop = 1;
 4209              		.loc 1 1065 0
 4210 009e 1A4B     		ldr	r3, .L187+12
 4211 00a0 0122     		movs	r2, #1
 4212 00a2 1A70     		strb	r2, [r3]
1066:bluetooth_rxtx.c **** 					++le.conn_count;
 4213              		.loc 1 1066 0
 4214 00a4 164B     		ldr	r3, .L187+4
 4215 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 4216 00a8 9BB2     		uxth	r3, r3
 4217 00aa 0133     		adds	r3, r3, #1
 4218 00ac 9AB2     		uxth	r2, r3
 4219 00ae 144B     		ldr	r3, .L187+4
 4220 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
1067:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 4221              		.loc 1 1067 0
 4222 00b2 134B     		ldr	r3, .L187+4
 4223 00b4 DA8B     		ldrh	r2, [r3, #30]
 4224 00b6 124B     		ldr	r3, .L187+4
 4225 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 4226 00ba 03E0     		b	.L182
 4227              	.L185:
1068:bluetooth_rxtx.c **** 				} else {
1069:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 4228              		.loc 1 1069 0
 4229 00bc 134B     		ldr	r3, .L187+16
 4230 00be 4FF48072 		mov	r2, #256
 4231 00c2 1A60     		str	r2, [r3]
 4232              	.L182:
1070:bluetooth_rxtx.c **** 				}
1071:bluetooth_rxtx.c **** 			}
1072:bluetooth_rxtx.c **** 		}
1073:bluetooth_rxtx.c **** 
1074:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
1075:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
ARM GAS  /tmp/ccQUMSla.s 			page 93


 4233              		.loc 1 1075 0
 4234 00c4 7B68     		ldr	r3, [r7, #4]
 4235 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 4236 00ca 002B     		cmp	r3, #0
 4237 00cc 02D1     		bne	.L186
1076:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 4238              		.loc 1 1076 0
 4239 00ce 104B     		ldr	r3, .L187+20
 4240 00d0 0122     		movs	r2, #1
 4241 00d2 1A70     		strb	r2, [r3]
 4242              	.L186:
1077:bluetooth_rxtx.c **** 
1078:bluetooth_rxtx.c **** 		/* Ack interrupt */
1079:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 4243              		.loc 1 1079 0
 4244 00d4 0F4A     		ldr	r2, .L187+24
 4245 00d6 104B     		ldr	r3, .L187+28
 4246 00d8 1B68     		ldr	r3, [r3]
 4247 00da C3F54363 		rsb	r3, r3, #3120
 4248 00de 0433     		adds	r3, r3, #4
 4249 00e0 1360     		str	r3, [r2]
1080:bluetooth_rxtx.c **** 		clock_trim = 0;
 4250              		.loc 1 1080 0
 4251 00e2 0D4B     		ldr	r3, .L187+28
 4252 00e4 0022     		movs	r2, #0
 4253 00e6 1A60     		str	r2, [r3]
1081:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 4254              		.loc 1 1081 0
 4255 00e8 4FF04023 		mov	r3, #1073758208
 4256 00ec 0122     		movs	r2, #1
 4257 00ee 1A60     		str	r2, [r3]
 4258              	.L177:
1082:bluetooth_rxtx.c **** 	}
1083:bluetooth_rxtx.c **** }
 4259              		.loc 1 1083 0
 4260 00f0 0C37     		adds	r7, r7, #12
 4261              		.cfi_def_cfa_offset 4
 4262 00f2 BD46     		mov	sp, r7
 4263              		.cfi_def_cfa_register 13
 4264              		@ sp needed
 4265 00f4 5DF8047B 		ldr	r7, [sp], #4
 4266              		.cfi_restore 7
 4267              		.cfi_def_cfa_offset 0
 4268 00f8 7047     		bx	lr
 4269              	.L188:
 4270 00fa 00BF     		.align	2
 4271              	.L187:
 4272 00fc 00000000 		.word	clkn
 4273 0100 00000000 		.word	le
 4274 0104 00000000 		.word	hop_mode
 4275 0108 00000000 		.word	do_hop
 4276 010c 3CC00920 		.word	537509948
 4277 0110 00000000 		.word	keepalive_trigger
 4278 0114 18400040 		.word	1073758232
 4279 0118 00000000 		.word	clock_trim
 4280              		.cfi_endproc
 4281              	.LFE14:
ARM GAS  /tmp/ccQUMSla.s 			page 94


 4283              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 4284              		.align	2
 4285              		.global	EINT3_IRQHandler
 4286              		.thumb
 4287              		.thumb_func
 4289              	EINT3_IRQHandler:
 4290              	.LFB15:
1084:bluetooth_rxtx.c **** 
1085:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
1086:bluetooth_rxtx.c **** #ifndef TC13BADGE
1087:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
1088:bluetooth_rxtx.c **** void EINT3_IRQHandler()
1089:bluetooth_rxtx.c **** {
 4291              		.loc 1 1089 0
 4292              		.cfi_startproc
 4293              		@ args = 0, pretend = 0, frame = 0
 4294              		@ frame_needed = 1, uses_anonymous_args = 0
 4295              		@ link register save eliminated.
 4296 0000 80B4     		push	{r7}
 4297              		.cfi_def_cfa_offset 4
 4298              		.cfi_offset 7, -4
 4299 0002 00AF     		add	r7, sp, #0
 4300              		.cfi_def_cfa_register 7
1090:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
1091:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 4301              		.loc 1 1091 0
 4302 0004 0B4B     		ldr	r3, .L190
 4303 0006 0422     		movs	r2, #4
 4304 0008 1A60     		str	r2, [r3]
1092:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 4305              		.loc 1 1092 0
 4306 000a 0B4B     		ldr	r3, .L190+4
 4307 000c 0122     		movs	r2, #1
 4308 000e 1A70     		strb	r2, [r3]
1093:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 4309              		.loc 1 1093 0
 4310 0010 0A4B     		ldr	r3, .L190+8
 4311 0012 1B68     		ldr	r3, [r3]
 4312 0014 C3F31303 		ubfx	r3, r3, #0, #20
 4313 0018 40F63542 		movw	r2, #3125
 4314 001c 02FB03F2 		mul	r2, r2, r3
 4315 0020 074B     		ldr	r3, .L190+12
 4316 0022 1B68     		ldr	r3, [r3]
 4317 0024 1344     		add	r3, r3, r2
 4318 0026 074A     		ldr	r2, .L190+16
 4319 0028 1360     		str	r3, [r2]
1094:bluetooth_rxtx.c **** }
 4320              		.loc 1 1094 0
 4321 002a BD46     		mov	sp, r7
 4322              		.cfi_def_cfa_register 13
 4323              		@ sp needed
 4324 002c 5DF8047B 		ldr	r7, [sp], #4
 4325              		.cfi_restore 7
 4326              		.cfi_def_cfa_offset 0
 4327 0030 7047     		bx	lr
 4328              	.L191:
 4329 0032 00BF     		.align	2
ARM GAS  /tmp/ccQUMSla.s 			page 95


 4330              	.L190:
 4331 0034 AC800240 		.word	1073905836
 4332 0038 00000000 		.word	cs_trigger
 4333 003c 00000000 		.word	clkn
 4334 0040 08400040 		.word	1073758216
 4335 0044 00000000 		.word	cs_timestamp
 4336              		.cfi_endproc
 4337              	.LFE15:
 4339              		.global	__aeabi_ui2d
 4340              		.global	__aeabi_dmul
 4341              		.global	__aeabi_ddiv
 4342              		.global	__aeabi_dadd
 4343              		.global	__aeabi_d2uiz
 4344              		.section	.text.msleep,"ax",%progbits
 4345              		.align	2
 4346              		.thumb
 4347              		.thumb_func
 4349              	msleep:
 4350              	.LFB16:
1095:bluetooth_rxtx.c **** #endif // TC13BADGE
1096:bluetooth_rxtx.c **** 
1097:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
1098:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
1099:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
1100:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
1101:bluetooth_rxtx.c **** {
 4351              		.loc 1 1101 0
 4352              		.cfi_startproc
 4353              		@ args = 0, pretend = 0, frame = 16
 4354              		@ frame_needed = 1, uses_anonymous_args = 0
 4355 0000 B0B5     		push	{r4, r5, r7, lr}
 4356              		.cfi_def_cfa_offset 16
 4357              		.cfi_offset 4, -16
 4358              		.cfi_offset 5, -12
 4359              		.cfi_offset 7, -8
 4360              		.cfi_offset 14, -4
 4361 0002 84B0     		sub	sp, sp, #16
 4362              		.cfi_def_cfa_offset 32
 4363 0004 00AF     		add	r7, sp, #0
 4364              		.cfi_def_cfa_register 7
 4365 0006 7860     		str	r0, [r7, #4]
1102:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 4366              		.loc 1 1102 0
 4367 0008 1B4B     		ldr	r3, .L194+8
 4368 000a 1B68     		ldr	r3, [r3]
 4369 000c 1846     		mov	r0, r3
 4370 000e FFF7FEFF 		bl	__aeabi_ui2d
 4371 0012 0446     		mov	r4, r0
 4372 0014 0D46     		mov	r5, r1
 4373 0016 7868     		ldr	r0, [r7, #4]
 4374 0018 FFF7FEFF 		bl	__aeabi_ui2d
 4375 001c 0246     		mov	r2, r0
 4376 001e 0B46     		mov	r3, r1
 4377 0020 1046     		mov	r0, r2
 4378 0022 1946     		mov	r1, r3
 4379 0024 12A3     		adr	r3, .L194
 4380 0026 D3E90023 		ldrd	r2, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 96


 4381 002a FFF7FEFF 		bl	__aeabi_dmul
 4382 002e 0246     		mov	r2, r0
 4383 0030 0B46     		mov	r3, r1
 4384 0032 1046     		mov	r0, r2
 4385 0034 1946     		mov	r1, r3
 4386 0036 4FF00002 		mov	r2, #0
 4387 003a 104B     		ldr	r3, .L194+12
 4388 003c FFF7FEFF 		bl	__aeabi_ddiv
 4389 0040 0246     		mov	r2, r0
 4390 0042 0B46     		mov	r3, r1
 4391 0044 2046     		mov	r0, r4
 4392 0046 2946     		mov	r1, r5
 4393 0048 FFF7FEFF 		bl	__aeabi_dadd
 4394 004c 0246     		mov	r2, r0
 4395 004e 0B46     		mov	r3, r1
 4396 0050 1046     		mov	r0, r2
 4397 0052 1946     		mov	r1, r3
 4398 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 4399 0058 0346     		mov	r3, r0
 4400 005a FB60     		str	r3, [r7, #12]
 4401              	.L193:
1103:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 4402              		.loc 1 1103 0 discriminator 1
 4403 005c 064B     		ldr	r3, .L194+8
 4404 005e 1A68     		ldr	r2, [r3]
 4405 0060 FB68     		ldr	r3, [r7, #12]
 4406 0062 9A42     		cmp	r2, r3
 4407 0064 FAD3     		bcc	.L193
1104:bluetooth_rxtx.c **** }
 4408              		.loc 1 1104 0
 4409 0066 1037     		adds	r7, r7, #16
 4410              		.cfi_def_cfa_offset 16
 4411 0068 BD46     		mov	sp, r7
 4412              		.cfi_def_cfa_register 13
 4413              		@ sp needed
 4414 006a B0BD     		pop	{r4, r5, r7, pc}
 4415              	.L195:
 4416 006c AFF30080 		.align	3
 4417              	.L194:
 4418 0070 00000000 		.word	0
 4419 0074 00887340 		.word	1081313280
 4420 0078 00000000 		.word	clkn
 4421 007c 00408F40 		.word	1083129856
 4422              		.cfi_endproc
 4423              	.LFE16:
 4425              		.section	.text.dma_init,"ax",%progbits
 4426              		.align	2
 4427              		.thumb
 4428              		.thumb_func
 4430              	dma_init:
 4431              	.LFB17:
1105:bluetooth_rxtx.c **** 
1106:bluetooth_rxtx.c **** static void dma_init()
1107:bluetooth_rxtx.c **** {
 4432              		.loc 1 1107 0
 4433              		.cfi_startproc
 4434              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccQUMSla.s 			page 97


 4435              		@ frame_needed = 1, uses_anonymous_args = 0
 4436              		@ link register save eliminated.
 4437 0000 80B4     		push	{r7}
 4438              		.cfi_def_cfa_offset 4
 4439              		.cfi_offset 7, -4
 4440 0002 00AF     		add	r7, sp, #0
 4441              		.cfi_def_cfa_register 7
1108:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1109:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4442              		.loc 1 1109 0
 4443 0004 3F4A     		ldr	r2, .L198
 4444 0006 3F4B     		ldr	r3, .L198
 4445 0008 1B68     		ldr	r3, [r3]
 4446 000a 43F00053 		orr	r3, r3, #536870912
 4447 000e 1360     		str	r3, [r2]
1110:bluetooth_rxtx.c **** 
1111:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1112:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4448              		.loc 1 1112 0
 4449 0010 3D4B     		ldr	r3, .L198+4
 4450 0012 0022     		movs	r2, #0
 4451 0014 1A60     		str	r2, [r3]
1113:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4452              		.loc 1 1113 0
 4453 0016 3D4B     		ldr	r3, .L198+8
 4454 0018 0022     		movs	r2, #0
 4455 001a 1A60     		str	r2, [r3]
1114:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4456              		.loc 1 1114 0
 4457 001c 3C4B     		ldr	r3, .L198+12
 4458 001e 0022     		movs	r2, #0
 4459 0020 1A60     		str	r2, [r3]
1115:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4460              		.loc 1 1115 0
 4461 0022 3C4B     		ldr	r3, .L198+16
 4462 0024 0022     		movs	r2, #0
 4463 0026 1A60     		str	r2, [r3]
1116:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4464              		.loc 1 1116 0
 4465 0028 3B4B     		ldr	r3, .L198+20
 4466 002a 0022     		movs	r2, #0
 4467 002c 1A60     		str	r2, [r3]
1117:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4468              		.loc 1 1117 0
 4469 002e 3B4B     		ldr	r3, .L198+24
 4470 0030 0022     		movs	r2, #0
 4471 0032 1A60     		str	r2, [r3]
1118:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4472              		.loc 1 1118 0
 4473 0034 3A4B     		ldr	r3, .L198+28
 4474 0036 0022     		movs	r2, #0
 4475 0038 1A60     		str	r2, [r3]
1119:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4476              		.loc 1 1119 0
 4477 003a 3A4B     		ldr	r3, .L198+32
 4478 003c 0022     		movs	r2, #0
 4479 003e 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 98


1120:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4480              		.loc 1 1120 0
 4481 0040 394B     		ldr	r3, .L198+36
 4482 0042 FF22     		movs	r2, #255
 4483 0044 1A60     		str	r2, [r3]
1121:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4484              		.loc 1 1121 0
 4485 0046 394B     		ldr	r3, .L198+40
 4486 0048 FF22     		movs	r2, #255
 4487 004a 1A60     		str	r2, [r3]
1122:bluetooth_rxtx.c **** 
1123:bluetooth_rxtx.c **** 	/* DMA linked lists */
1124:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4488              		.loc 1 1124 0
 4489 004c 384B     		ldr	r3, .L198+44
 4490 004e 394A     		ldr	r2, .L198+48
 4491 0050 1A60     		str	r2, [r3]
1125:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4492              		.loc 1 1125 0
 4493 0052 394A     		ldr	r2, .L198+52
 4494 0054 364B     		ldr	r3, .L198+44
 4495 0056 5A60     		str	r2, [r3, #4]
1126:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4496              		.loc 1 1126 0
 4497 0058 384A     		ldr	r2, .L198+56
 4498 005a 354B     		ldr	r3, .L198+44
 4499 005c 9A60     		str	r2, [r3, #8]
1127:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4500              		.loc 1 1127 0
 4501 005e 344B     		ldr	r3, .L198+44
 4502 0060 374A     		ldr	r2, .L198+60
 4503 0062 DA60     		str	r2, [r3, #12]
1128:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1129:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1130:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1131:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1132:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1133:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1134:bluetooth_rxtx.c **** 
1135:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4504              		.loc 1 1135 0
 4505 0064 354B     		ldr	r3, .L198+56
 4506 0066 334A     		ldr	r2, .L198+48
 4507 0068 1A60     		str	r2, [r3]
1136:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4508              		.loc 1 1136 0
 4509 006a 364A     		ldr	r2, .L198+64
 4510 006c 334B     		ldr	r3, .L198+56
 4511 006e 5A60     		str	r2, [r3, #4]
1137:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4512              		.loc 1 1137 0
 4513 0070 2F4A     		ldr	r2, .L198+44
 4514 0072 324B     		ldr	r3, .L198+56
 4515 0074 9A60     		str	r2, [r3, #8]
1138:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4516              		.loc 1 1138 0
 4517 0076 314B     		ldr	r3, .L198+56
ARM GAS  /tmp/ccQUMSla.s 			page 99


 4518 0078 314A     		ldr	r2, .L198+60
 4519 007a DA60     		str	r2, [r3, #12]
1139:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1140:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1141:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1142:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1143:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1144:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1145:bluetooth_rxtx.c **** 
1146:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
1147:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4520              		.loc 1 1147 0
 4521 007c 324B     		ldr	r3, .L198+68
 4522 007e 4FF08062 		mov	r2, #67108864
 4523 0082 1A60     		str	r2, [r3]
1148:bluetooth_rxtx.c **** 
1149:bluetooth_rxtx.c **** 	/* enable DMA globally */
1150:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4524              		.loc 1 1150 0
 4525 0084 314B     		ldr	r3, .L198+72
 4526 0086 0122     		movs	r2, #1
 4527 0088 1A60     		str	r2, [r3]
1151:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4528              		.loc 1 1151 0
 4529 008a 00BF     		nop
 4530              	.L197:
 4531              		.loc 1 1151 0 is_stmt 0 discriminator 1
 4532 008c 2F4B     		ldr	r3, .L198+72
 4533 008e 1B68     		ldr	r3, [r3]
 4534 0090 03F00103 		and	r3, r3, #1
 4535 0094 002B     		cmp	r3, #0
 4536 0096 F9D0     		beq	.L197
1152:bluetooth_rxtx.c **** 
1153:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
1154:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4537              		.loc 1 1154 0 is_stmt 1
 4538 0098 2D4A     		ldr	r2, .L198+76
 4539 009a 254B     		ldr	r3, .L198+44
 4540 009c 1B68     		ldr	r3, [r3]
 4541 009e 1360     		str	r3, [r2]
1155:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4542              		.loc 1 1155 0
 4543 00a0 2C4A     		ldr	r2, .L198+80
 4544 00a2 234B     		ldr	r3, .L198+44
 4545 00a4 5B68     		ldr	r3, [r3, #4]
 4546 00a6 1360     		str	r3, [r2]
1156:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4547              		.loc 1 1156 0
 4548 00a8 2B4A     		ldr	r2, .L198+84
 4549 00aa 214B     		ldr	r3, .L198+44
 4550 00ac 9B68     		ldr	r3, [r3, #8]
 4551 00ae 1360     		str	r3, [r2]
1157:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4552              		.loc 1 1157 0
 4553 00b0 2A4A     		ldr	r2, .L198+88
 4554 00b2 1F4B     		ldr	r3, .L198+44
 4555 00b4 DB68     		ldr	r3, [r3, #12]
ARM GAS  /tmp/ccQUMSla.s 			page 100


 4556 00b6 1360     		str	r3, [r2]
1158:bluetooth_rxtx.c **** 	DMACC0Config =
 4557              		.loc 1 1158 0
 4558 00b8 134B     		ldr	r3, .L198+4
 4559 00ba 4DF20602 		movw	r2, #53254
 4560 00be 1A60     		str	r2, [r3]
1159:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1160:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1161:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1162:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1163:bluetooth_rxtx.c **** 
1164:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4561              		.loc 1 1164 0
 4562 00c0 274B     		ldr	r3, .L198+92
 4563 00c2 1B68     		ldr	r3, [r3]
 4564 00c4 1B0D     		lsrs	r3, r3, #20
 4565 00c6 DBB2     		uxtb	r3, r3
 4566 00c8 264A     		ldr	r2, .L198+96
 4567 00ca 1360     		str	r3, [r2]
1165:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4568              		.loc 1 1165 0
 4569 00cc 244B     		ldr	r3, .L198+92
 4570 00ce 1B68     		ldr	r3, [r3]
 4571 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4572 00d4 40F63542 		movw	r2, #3125
 4573 00d8 02FB03F2 		mul	r2, r2, r3
 4574 00dc 224B     		ldr	r3, .L198+100
 4575 00de 1B68     		ldr	r3, [r3]
 4576 00e0 1344     		add	r3, r3, r2
 4577 00e2 224A     		ldr	r2, .L198+104
 4578 00e4 1360     		str	r3, [r2]
1166:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4579              		.loc 1 1166 0
 4580 00e6 224B     		ldr	r3, .L198+108
 4581 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4582 00ea 9AB2     		uxth	r2, r3
 4583 00ec 214B     		ldr	r3, .L198+112
 4584 00ee 1A80     		strh	r2, [r3]	@ movhi
1167:bluetooth_rxtx.c **** 
1168:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1169:bluetooth_rxtx.c **** 	rx_tc = 0;
 4585              		.loc 1 1169 0
 4586 00f0 214B     		ldr	r3, .L198+116
 4587 00f2 0022     		movs	r2, #0
 4588 00f4 1A60     		str	r2, [r3]
1170:bluetooth_rxtx.c **** 	rx_err = 0;
 4589              		.loc 1 1170 0
 4590 00f6 214B     		ldr	r3, .L198+120
 4591 00f8 0022     		movs	r2, #0
 4592 00fa 1A60     		str	r2, [r3]
1171:bluetooth_rxtx.c **** }
 4593              		.loc 1 1171 0
 4594 00fc BD46     		mov	sp, r7
 4595              		.cfi_def_cfa_register 13
 4596              		@ sp needed
 4597 00fe 5DF8047B 		ldr	r7, [sp], #4
 4598              		.cfi_restore 7
ARM GAS  /tmp/ccQUMSla.s 			page 101


 4599              		.cfi_def_cfa_offset 0
 4600 0102 7047     		bx	lr
 4601              	.L199:
 4602              		.align	2
 4603              	.L198:
 4604 0104 C4C00F40 		.word	1074774212
 4605 0108 10410050 		.word	1342193936
 4606 010c 30410050 		.word	1342193968
 4607 0110 50410050 		.word	1342194000
 4608 0114 70410050 		.word	1342194032
 4609 0118 90410050 		.word	1342194064
 4610 011c B0410050 		.word	1342194096
 4611 0120 D0410050 		.word	1342194128
 4612 0124 F0410050 		.word	1342194160
 4613 0128 08400050 		.word	1342193672
 4614 012c 10400050 		.word	1342193680
 4615 0130 00000000 		.word	rx_dma_lli1
 4616 0134 08000340 		.word	1073938440
 4617 0138 00000000 		.word	rxbuf1
 4618 013c 00000000 		.word	rx_dma_lli2
 4619 0140 32900088 		.word	-2013229006
 4620 0144 00000000 		.word	rxbuf2
 4621 0148 80E100E0 		.word	-536813184
 4622 014c 30400050 		.word	1342193712
 4623 0150 00410050 		.word	1342193920
 4624 0154 04410050 		.word	1342193924
 4625 0158 08410050 		.word	1342193928
 4626 015c 0C410050 		.word	1342193932
 4627 0160 00000000 		.word	clkn
 4628 0164 00000000 		.word	active_buf_clkn_high
 4629 0168 08400040 		.word	1073758216
 4630 016c 00000000 		.word	active_buf_clk100ns
 4631 0170 00000000 		.word	channel
 4632 0174 00000000 		.word	active_buf_channel
 4633 0178 00000000 		.word	rx_tc
 4634 017c 00000000 		.word	rx_err
 4635              		.cfi_endproc
 4636              	.LFE17:
 4638              		.section	.text.dma_init_le,"ax",%progbits
 4639              		.align	2
 4640              		.thumb
 4641              		.thumb_func
 4643              	dma_init_le:
 4644              	.LFB18:
1172:bluetooth_rxtx.c **** 
1173:bluetooth_rxtx.c **** static void dma_init_le()
1174:bluetooth_rxtx.c **** {
 4645              		.loc 1 1174 0
 4646              		.cfi_startproc
 4647              		@ args = 0, pretend = 0, frame = 8
 4648              		@ frame_needed = 1, uses_anonymous_args = 0
 4649              		@ link register save eliminated.
 4650 0000 80B4     		push	{r7}
 4651              		.cfi_def_cfa_offset 4
 4652              		.cfi_offset 7, -4
 4653 0002 83B0     		sub	sp, sp, #12
 4654              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccQUMSla.s 			page 102


 4655 0004 00AF     		add	r7, sp, #0
 4656              		.cfi_def_cfa_register 7
1175:bluetooth_rxtx.c **** 	int i;
1176:bluetooth_rxtx.c **** 
1177:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1178:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4657              		.loc 1 1178 0
 4658 0006 4B4A     		ldr	r2, .L206
 4659 0008 4A4B     		ldr	r3, .L206
 4660 000a 1B68     		ldr	r3, [r3]
 4661 000c 43F00053 		orr	r3, r3, #536870912
 4662 0010 1360     		str	r3, [r2]
1179:bluetooth_rxtx.c **** 
1180:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1181:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4663              		.loc 1 1181 0
 4664 0012 494B     		ldr	r3, .L206+4
 4665 0014 0022     		movs	r2, #0
 4666 0016 1A60     		str	r2, [r3]
1182:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4667              		.loc 1 1182 0
 4668 0018 484B     		ldr	r3, .L206+8
 4669 001a 0022     		movs	r2, #0
 4670 001c 1A60     		str	r2, [r3]
1183:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4671              		.loc 1 1183 0
 4672 001e 484B     		ldr	r3, .L206+12
 4673 0020 0022     		movs	r2, #0
 4674 0022 1A60     		str	r2, [r3]
1184:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4675              		.loc 1 1184 0
 4676 0024 474B     		ldr	r3, .L206+16
 4677 0026 0022     		movs	r2, #0
 4678 0028 1A60     		str	r2, [r3]
1185:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4679              		.loc 1 1185 0
 4680 002a 474B     		ldr	r3, .L206+20
 4681 002c 0022     		movs	r2, #0
 4682 002e 1A60     		str	r2, [r3]
1186:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4683              		.loc 1 1186 0
 4684 0030 464B     		ldr	r3, .L206+24
 4685 0032 0022     		movs	r2, #0
 4686 0034 1A60     		str	r2, [r3]
1187:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4687              		.loc 1 1187 0
 4688 0036 464B     		ldr	r3, .L206+28
 4689 0038 0022     		movs	r2, #0
 4690 003a 1A60     		str	r2, [r3]
1188:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4691              		.loc 1 1188 0
 4692 003c 454B     		ldr	r3, .L206+32
 4693 003e 0022     		movs	r2, #0
 4694 0040 1A60     		str	r2, [r3]
1189:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4695              		.loc 1 1189 0
 4696 0042 454B     		ldr	r3, .L206+36
ARM GAS  /tmp/ccQUMSla.s 			page 103


 4697 0044 FF22     		movs	r2, #255
 4698 0046 1A60     		str	r2, [r3]
1190:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4699              		.loc 1 1190 0
 4700 0048 444B     		ldr	r3, .L206+40
 4701 004a FF22     		movs	r2, #255
 4702 004c 1A60     		str	r2, [r3]
1191:bluetooth_rxtx.c **** 
1192:bluetooth_rxtx.c **** 	/* enable DMA globally */
1193:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4703              		.loc 1 1193 0
 4704 004e 444B     		ldr	r3, .L206+44
 4705 0050 0122     		movs	r2, #1
 4706 0052 1A60     		str	r2, [r3]
1194:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4707              		.loc 1 1194 0
 4708 0054 00BF     		nop
 4709              	.L201:
 4710              		.loc 1 1194 0 is_stmt 0 discriminator 1
 4711 0056 424B     		ldr	r3, .L206+44
 4712 0058 1B68     		ldr	r3, [r3]
 4713 005a 03F00103 		and	r3, r3, #1
 4714 005e 002B     		cmp	r3, #0
 4715 0060 F9D0     		beq	.L201
1195:bluetooth_rxtx.c **** 
1196:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4716              		.loc 1 1196 0 is_stmt 1
 4717 0062 0023     		movs	r3, #0
 4718 0064 7B60     		str	r3, [r7, #4]
 4719 0066 2AE0     		b	.L202
 4720              	.L205:
1197:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4721              		.loc 1 1197 0
 4722 0068 3E4A     		ldr	r2, .L206+48
 4723 006a 7B68     		ldr	r3, [r7, #4]
 4724 006c 1B01     		lsls	r3, r3, #4
 4725 006e 1344     		add	r3, r3, r2
 4726 0070 3D4A     		ldr	r2, .L206+52
 4727 0072 1A60     		str	r2, [r3]
1198:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4728              		.loc 1 1198 0
 4729 0074 7B68     		ldr	r3, [r7, #4]
 4730 0076 9B00     		lsls	r3, r3, #2
 4731 0078 3C4A     		ldr	r2, .L206+56
 4732 007a 1344     		add	r3, r3, r2
 4733 007c 1946     		mov	r1, r3
 4734 007e 394A     		ldr	r2, .L206+48
 4735 0080 7B68     		ldr	r3, [r7, #4]
 4736 0082 1B01     		lsls	r3, r3, #4
 4737 0084 1344     		add	r3, r3, r2
 4738 0086 5960     		str	r1, [r3, #4]
1199:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4739              		.loc 1 1199 0
 4740 0088 7B68     		ldr	r3, [r7, #4]
 4741 008a 092B     		cmp	r3, #9
 4742 008c 06DC     		bgt	.L203
 4743              		.loc 1 1199 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccQUMSla.s 			page 104


 4744 008e 7B68     		ldr	r3, [r7, #4]
 4745 0090 0133     		adds	r3, r3, #1
 4746 0092 1B01     		lsls	r3, r3, #4
 4747 0094 334A     		ldr	r2, .L206+48
 4748 0096 1344     		add	r3, r3, r2
 4749 0098 1A46     		mov	r2, r3
 4750 009a 00E0     		b	.L204
 4751              	.L203:
 4752              		.loc 1 1199 0 discriminator 2
 4753 009c 0022     		movs	r2, #0
 4754              	.L204:
 4755              		.loc 1 1199 0 discriminator 4
 4756 009e 3149     		ldr	r1, .L206+48
 4757 00a0 7B68     		ldr	r3, [r7, #4]
 4758 00a2 1B01     		lsls	r3, r3, #4
 4759 00a4 0B44     		add	r3, r3, r1
 4760 00a6 0833     		adds	r3, r3, #8
 4761 00a8 1A60     		str	r2, [r3]
1200:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4762              		.loc 1 1200 0 is_stmt 1 discriminator 4
 4763 00aa 2E4A     		ldr	r2, .L206+48
 4764 00ac 7B68     		ldr	r3, [r7, #4]
 4765 00ae 1B01     		lsls	r3, r3, #4
 4766 00b0 1344     		add	r3, r3, r2
 4767 00b2 0833     		adds	r3, r3, #8
 4768 00b4 2E4A     		ldr	r2, .L206+60
 4769 00b6 5A60     		str	r2, [r3, #4]
1196:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4770              		.loc 1 1196 0 discriminator 4
 4771 00b8 7B68     		ldr	r3, [r7, #4]
 4772 00ba 0133     		adds	r3, r3, #1
 4773 00bc 7B60     		str	r3, [r7, #4]
 4774              	.L202:
1196:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4775              		.loc 1 1196 0 is_stmt 0 discriminator 2
 4776 00be 7B68     		ldr	r3, [r7, #4]
 4777 00c0 0A2B     		cmp	r3, #10
 4778 00c2 D1DD     		ble	.L205
1201:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1202:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1203:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1204:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1205:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1206:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1207:bluetooth_rxtx.c **** 	}
1208:bluetooth_rxtx.c **** 
1209:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1210:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4779              		.loc 1 1210 0 is_stmt 1
 4780 00c4 2B4A     		ldr	r2, .L206+64
 4781 00c6 274B     		ldr	r3, .L206+48
 4782 00c8 1B68     		ldr	r3, [r3]
 4783 00ca 1360     		str	r3, [r2]
1211:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4784              		.loc 1 1211 0
 4785 00cc 2A4A     		ldr	r2, .L206+68
 4786 00ce 254B     		ldr	r3, .L206+48
ARM GAS  /tmp/ccQUMSla.s 			page 105


 4787 00d0 5B68     		ldr	r3, [r3, #4]
 4788 00d2 1360     		str	r3, [r2]
1212:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4789              		.loc 1 1212 0
 4790 00d4 294A     		ldr	r2, .L206+72
 4791 00d6 234B     		ldr	r3, .L206+48
 4792 00d8 9B68     		ldr	r3, [r3, #8]
 4793 00da 1360     		str	r3, [r2]
1213:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4794              		.loc 1 1213 0
 4795 00dc 284A     		ldr	r2, .L206+76
 4796 00de 214B     		ldr	r3, .L206+48
 4797 00e0 DB68     		ldr	r3, [r3, #12]
 4798 00e2 1360     		str	r3, [r2]
1214:bluetooth_rxtx.c **** 	DMACC0Config =
 4799              		.loc 1 1214 0
 4800 00e4 144B     		ldr	r3, .L206+4
 4801 00e6 4DF20602 		movw	r2, #53254
 4802 00ea 1A60     		str	r2, [r3]
1215:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1216:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1217:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1218:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1219:bluetooth_rxtx.c **** 
1220:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4803              		.loc 1 1220 0
 4804 00ec 254B     		ldr	r3, .L206+80
 4805 00ee 1B68     		ldr	r3, [r3]
 4806 00f0 1B0D     		lsrs	r3, r3, #20
 4807 00f2 DBB2     		uxtb	r3, r3
 4808 00f4 244A     		ldr	r2, .L206+84
 4809 00f6 1360     		str	r3, [r2]
1221:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4810              		.loc 1 1221 0
 4811 00f8 224B     		ldr	r3, .L206+80
 4812 00fa 1B68     		ldr	r3, [r3]
 4813 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4814 0100 40F63542 		movw	r2, #3125
 4815 0104 02FB03F2 		mul	r2, r2, r3
 4816 0108 204B     		ldr	r3, .L206+88
 4817 010a 1B68     		ldr	r3, [r3]
 4818 010c 1344     		add	r3, r3, r2
 4819 010e 204A     		ldr	r2, .L206+92
 4820 0110 1360     		str	r3, [r2]
1222:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4821              		.loc 1 1222 0
 4822 0112 204B     		ldr	r3, .L206+96
 4823 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4824 0116 9AB2     		uxth	r2, r3
 4825 0118 1F4B     		ldr	r3, .L206+100
 4826 011a 1A80     		strh	r2, [r3]	@ movhi
1223:bluetooth_rxtx.c **** 
1224:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1225:bluetooth_rxtx.c **** 	rx_tc = 0;
 4827              		.loc 1 1225 0
 4828 011c 1F4B     		ldr	r3, .L206+104
 4829 011e 0022     		movs	r2, #0
ARM GAS  /tmp/ccQUMSla.s 			page 106


 4830 0120 1A60     		str	r2, [r3]
1226:bluetooth_rxtx.c **** 	rx_err = 0;
 4831              		.loc 1 1226 0
 4832 0122 1F4B     		ldr	r3, .L206+108
 4833 0124 0022     		movs	r2, #0
 4834 0126 1A60     		str	r2, [r3]
1227:bluetooth_rxtx.c **** }
 4835              		.loc 1 1227 0
 4836 0128 0C37     		adds	r7, r7, #12
 4837              		.cfi_def_cfa_offset 4
 4838 012a BD46     		mov	sp, r7
 4839              		.cfi_def_cfa_register 13
 4840              		@ sp needed
 4841 012c 5DF8047B 		ldr	r7, [sp], #4
 4842              		.cfi_restore 7
 4843              		.cfi_def_cfa_offset 0
 4844 0130 7047     		bx	lr
 4845              	.L207:
 4846 0132 00BF     		.align	2
 4847              	.L206:
 4848 0134 C4C00F40 		.word	1074774212
 4849 0138 10410050 		.word	1342193936
 4850 013c 30410050 		.word	1342193968
 4851 0140 50410050 		.word	1342194000
 4852 0144 70410050 		.word	1342194032
 4853 0148 90410050 		.word	1342194064
 4854 014c B0410050 		.word	1342194096
 4855 0150 D0410050 		.word	1342194128
 4856 0154 F0410050 		.word	1342194160
 4857 0158 08400050 		.word	1342193672
 4858 015c 10400050 		.word	1342193680
 4859 0160 30400050 		.word	1342193712
 4860 0164 00000000 		.word	le_dma_lli
 4861 0168 08000340 		.word	1073938440
 4862 016c 00000000 		.word	rxbuf1
 4863 0170 04100088 		.word	-2013261820
 4864 0174 00410050 		.word	1342193920
 4865 0178 04410050 		.word	1342193924
 4866 017c 08410050 		.word	1342193928
 4867 0180 0C410050 		.word	1342193932
 4868 0184 00000000 		.word	clkn
 4869 0188 00000000 		.word	active_buf_clkn_high
 4870 018c 08400040 		.word	1073758216
 4871 0190 00000000 		.word	active_buf_clk100ns
 4872 0194 00000000 		.word	channel
 4873 0198 00000000 		.word	active_buf_channel
 4874 019c 00000000 		.word	rx_tc
 4875 01a0 00000000 		.word	rx_err
 4876              		.cfi_endproc
 4877              	.LFE18:
 4879              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4880              		.align	2
 4881              		.global	bt_stream_dma_handler
 4882              		.thumb
 4883              		.thumb_func
 4885              	bt_stream_dma_handler:
 4886              	.LFB19:
ARM GAS  /tmp/ccQUMSla.s 			page 107


1228:bluetooth_rxtx.c **** 
1229:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4887              		.loc 1 1229 0
 4888              		.cfi_startproc
 4889              		@ args = 0, pretend = 0, frame = 0
 4890              		@ frame_needed = 1, uses_anonymous_args = 0
 4891              		@ link register save eliminated.
 4892 0000 80B4     		push	{r7}
 4893              		.cfi_def_cfa_offset 4
 4894              		.cfi_offset 7, -4
 4895 0002 00AF     		add	r7, sp, #0
 4896              		.cfi_def_cfa_register 7
1230:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4897              		.loc 1 1230 0
 4898 0004 254B     		ldr	r3, .L211
 4899 0006 1B68     		ldr	r3, [r3]
 4900 0008 254A     		ldr	r2, .L211+4
 4901 000a 1360     		str	r3, [r2]
1231:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4902              		.loc 1 1231 0
 4903 000c 254B     		ldr	r3, .L211+8
 4904 000e 1B68     		ldr	r3, [r3]
 4905 0010 1B0D     		lsrs	r3, r3, #20
 4906 0012 DBB2     		uxtb	r3, r3
 4907 0014 214A     		ldr	r2, .L211
 4908 0016 1360     		str	r3, [r2]
1232:bluetooth_rxtx.c **** 
1233:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4909              		.loc 1 1233 0
 4910 0018 234B     		ldr	r3, .L211+12
 4911 001a 1B68     		ldr	r3, [r3]
 4912 001c 234A     		ldr	r2, .L211+16
 4913 001e 1360     		str	r3, [r2]
1234:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4914              		.loc 1 1234 0
 4915 0020 204B     		ldr	r3, .L211+8
 4916 0022 1B68     		ldr	r3, [r3]
 4917 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4918 0028 40F63542 		movw	r2, #3125
 4919 002c 02FB03F2 		mul	r2, r2, r3
 4920 0030 1F4B     		ldr	r3, .L211+20
 4921 0032 1B68     		ldr	r3, [r3]
 4922 0034 1344     		add	r3, r3, r2
 4923 0036 1C4A     		ldr	r2, .L211+12
 4924 0038 1360     		str	r3, [r2]
1235:bluetooth_rxtx.c **** 
1236:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4925              		.loc 1 1236 0
 4926 003a 1E4B     		ldr	r3, .L211+24
 4927 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4928 003e 9AB2     		uxth	r2, r3
 4929 0040 1D4B     		ldr	r3, .L211+28
 4930 0042 1A80     		strh	r2, [r3]	@ movhi
1237:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4931              		.loc 1 1237 0
 4932 0044 1D4B     		ldr	r3, .L211+32
 4933 0046 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccQUMSla.s 			page 108


 4934 0048 9AB2     		uxth	r2, r3
 4935 004a 1A4B     		ldr	r3, .L211+24
 4936 004c 1A80     		strh	r2, [r3]	@ movhi
1238:bluetooth_rxtx.c **** 
1239:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1240:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4937              		.loc 1 1240 0
 4938 004e 1C4B     		ldr	r3, .L211+36
 4939 0050 1B68     		ldr	r3, [r3]
 4940 0052 03F00103 		and	r3, r3, #1
 4941 0056 002B     		cmp	r3, #0
 4942 0058 1BD0     		beq	.L208
1241:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4943              		.loc 1 1241 0
 4944 005a 1A4B     		ldr	r3, .L211+40
 4945 005c 1B68     		ldr	r3, [r3]
 4946 005e 03F00103 		and	r3, r3, #1
 4947 0062 002B     		cmp	r3, #0
 4948 0064 07D0     		beq	.L210
1242:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4949              		.loc 1 1242 0
 4950 0066 184B     		ldr	r3, .L211+44
 4951 0068 0122     		movs	r2, #1
 4952 006a 1A60     		str	r2, [r3]
1243:bluetooth_rxtx.c **** 			++rx_tc;
 4953              		.loc 1 1243 0
 4954 006c 174B     		ldr	r3, .L211+48
 4955 006e 1B68     		ldr	r3, [r3]
 4956 0070 0133     		adds	r3, r3, #1
 4957 0072 164A     		ldr	r2, .L211+48
 4958 0074 1360     		str	r3, [r2]
 4959              	.L210:
1244:bluetooth_rxtx.c **** 		}
1245:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4960              		.loc 1 1245 0
 4961 0076 164B     		ldr	r3, .L211+52
 4962 0078 1B68     		ldr	r3, [r3]
 4963 007a 03F00103 		and	r3, r3, #1
 4964 007e 002B     		cmp	r3, #0
 4965 0080 07D0     		beq	.L208
1246:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4966              		.loc 1 1246 0
 4967 0082 144B     		ldr	r3, .L211+56
 4968 0084 0122     		movs	r2, #1
 4969 0086 1A60     		str	r2, [r3]
1247:bluetooth_rxtx.c **** 			++rx_err;
 4970              		.loc 1 1247 0
 4971 0088 134B     		ldr	r3, .L211+60
 4972 008a 1B68     		ldr	r3, [r3]
 4973 008c 0133     		adds	r3, r3, #1
 4974 008e 124A     		ldr	r2, .L211+60
 4975 0090 1360     		str	r3, [r2]
 4976              	.L208:
1248:bluetooth_rxtx.c **** 		}
1249:bluetooth_rxtx.c **** 	}
1250:bluetooth_rxtx.c **** }
 4977              		.loc 1 1250 0
ARM GAS  /tmp/ccQUMSla.s 			page 109


 4978 0092 BD46     		mov	sp, r7
 4979              		.cfi_def_cfa_register 13
 4980              		@ sp needed
 4981 0094 5DF8047B 		ldr	r7, [sp], #4
 4982              		.cfi_restore 7
 4983              		.cfi_def_cfa_offset 0
 4984 0098 7047     		bx	lr
 4985              	.L212:
 4986 009a 00BF     		.align	2
 4987              	.L211:
 4988 009c 00000000 		.word	active_buf_clkn_high
 4989 00a0 00000000 		.word	idle_buf_clkn_high
 4990 00a4 00000000 		.word	clkn
 4991 00a8 00000000 		.word	active_buf_clk100ns
 4992 00ac 00000000 		.word	idle_buf_clk100ns
 4993 00b0 08400040 		.word	1073758216
 4994 00b4 00000000 		.word	active_buf_channel
 4995 00b8 00000000 		.word	idle_buf_channel
 4996 00bc 00000000 		.word	channel
 4997 00c0 00400050 		.word	1342193664
 4998 00c4 04400050 		.word	1342193668
 4999 00c8 08400050 		.word	1342193672
 5000 00cc 00000000 		.word	rx_tc
 5001 00d0 0C400050 		.word	1342193676
 5002 00d4 10400050 		.word	1342193680
 5003 00d8 00000000 		.word	rx_err
 5004              		.cfi_endproc
 5005              	.LFE19:
 5007              		.section	.text.DMA_IRQHandler,"ax",%progbits
 5008              		.align	2
 5009              		.global	DMA_IRQHandler
 5010              		.thumb
 5011              		.thumb_func
 5013              	DMA_IRQHandler:
 5014              	.LFB20:
1251:bluetooth_rxtx.c **** 
1252:bluetooth_rxtx.c **** void DMA_IRQHandler()
1253:bluetooth_rxtx.c **** {
 5015              		.loc 1 1253 0
 5016              		.cfi_startproc
 5017              		@ args = 0, pretend = 0, frame = 0
 5018              		@ frame_needed = 1, uses_anonymous_args = 0
 5019 0000 80B5     		push	{r7, lr}
 5020              		.cfi_def_cfa_offset 8
 5021              		.cfi_offset 7, -8
 5022              		.cfi_offset 14, -4
 5023 0002 00AF     		add	r7, sp, #0
 5024              		.cfi_def_cfa_register 7
1254:bluetooth_rxtx.c **** 	switch (mode) {
 5025              		.loc 1 1254 0
 5026 0004 154B     		ldr	r3, .L217
 5027 0006 1B78     		ldrb	r3, [r3]
 5028 0008 DBB2     		uxtb	r3, r3
 5029 000a 013B     		subs	r3, r3, #1
 5030 000c 0E2B     		cmp	r3, #14
 5031 000e 24D8     		bhi	.L213
 5032 0010 01A2     		adr	r2, .L216
ARM GAS  /tmp/ccQUMSla.s 			page 110


 5033 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 5034 0016 00BF     		.p2align 2
 5035              	.L216:
 5036 0018 55000000 		.word	.L215+1
 5037 001c 5B000000 		.word	.L213+1
 5038 0020 5B000000 		.word	.L213+1
 5039 0024 55000000 		.word	.L215+1
 5040 0028 5B000000 		.word	.L213+1
 5041 002c 5B000000 		.word	.L213+1
 5042 0030 5B000000 		.word	.L213+1
 5043 0034 55000000 		.word	.L215+1
 5044 0038 55000000 		.word	.L215+1
 5045 003c 55000000 		.word	.L215+1
 5046 0040 5B000000 		.word	.L213+1
 5047 0044 55000000 		.word	.L215+1
 5048 0048 5B000000 		.word	.L213+1
 5049 004c 55000000 		.word	.L215+1
 5050 0050 55000000 		.word	.L215+1
 5051              		.p2align 1
 5052              	.L215:
1255:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1256:bluetooth_rxtx.c **** 		case MODE_RX_FREQ:
1257:bluetooth_rxtx.c **** 		case MODE_RX_PROPOSED:
1258:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1259:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1260:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1261:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1262:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1263:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 5053              		.loc 1 1263 0
 5054 0054 FFF7FEFF 		bl	bt_stream_dma_handler
1264:bluetooth_rxtx.c **** 			break;
 5055              		.loc 1 1264 0
 5056 0058 00BF     		nop
 5057              	.L213:
1265:bluetooth_rxtx.c **** 	}
1266:bluetooth_rxtx.c **** }
 5058              		.loc 1 1266 0
 5059 005a 80BD     		pop	{r7, pc}
 5060              	.L218:
 5061              		.align	2
 5062              	.L217:
 5063 005c 00000000 		.word	mode
 5064              		.cfi_endproc
 5065              	.LFE20:
 5067              		.section	.text.dio_ssp_start,"ax",%progbits
 5068              		.align	2
 5069              		.thumb
 5070              		.thumb_func
 5072              	dio_ssp_start:
 5073              	.LFB21:
1267:bluetooth_rxtx.c **** 
1268:bluetooth_rxtx.c **** static void dio_ssp_start()
1269:bluetooth_rxtx.c **** {
 5074              		.loc 1 1269 0
 5075              		.cfi_startproc
 5076              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccQUMSla.s 			page 111


 5077              		@ frame_needed = 1, uses_anonymous_args = 0
 5078              		@ link register save eliminated.
 5079 0000 80B4     		push	{r7}
 5080              		.cfi_def_cfa_offset 4
 5081              		.cfi_offset 7, -4
 5082 0002 00AF     		add	r7, sp, #0
 5083              		.cfi_def_cfa_register 7
1270:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1271:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 5084              		.loc 1 1271 0
 5085 0004 104B     		ldr	r3, .L220
 5086 0006 4FF08052 		mov	r2, #268435456
 5087 000a 1A60     		str	r2, [r3]
1272:bluetooth_rxtx.c **** 
1273:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1274:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 5088              		.loc 1 1274 0
 5089 000c 0F4A     		ldr	r2, .L220+4
 5090 000e 0F4B     		ldr	r3, .L220+4
 5091 0010 1B68     		ldr	r3, [r3]
 5092 0012 43F00103 		orr	r3, r3, #1
 5093 0016 1360     		str	r3, [r2]
1275:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 5094              		.loc 1 1275 0
 5095 0018 0D4A     		ldr	r2, .L220+8
 5096 001a 0D4B     		ldr	r3, .L220+8
 5097 001c 1B68     		ldr	r3, [r3]
 5098 001e 43F00203 		orr	r3, r3, #2
 5099 0022 1360     		str	r3, [r2]
1276:bluetooth_rxtx.c **** 	
1277:bluetooth_rxtx.c **** 	/* enable DMA */
1278:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 5100              		.loc 1 1278 0
 5101 0024 0B4A     		ldr	r2, .L220+12
 5102 0026 0B4B     		ldr	r3, .L220+12
 5103 0028 1B68     		ldr	r3, [r3]
 5104 002a 43F00103 		orr	r3, r3, #1
 5105 002e 1360     		str	r3, [r2]
1279:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 5106              		.loc 1 1279 0
 5107 0030 094B     		ldr	r3, .L220+16
 5108 0032 4FF08062 		mov	r2, #67108864
 5109 0036 1A60     		str	r2, [r3]
1280:bluetooth_rxtx.c **** 
1281:bluetooth_rxtx.c **** 	/* activate slave select pin */
1282:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 5110              		.loc 1 1282 0
 5111 0038 084B     		ldr	r3, .L220+20
 5112 003a 4FF08052 		mov	r2, #268435456
 5113 003e 1A60     		str	r2, [r3]
1283:bluetooth_rxtx.c **** }
 5114              		.loc 1 1283 0
 5115 0040 BD46     		mov	sp, r7
 5116              		.cfi_def_cfa_register 13
 5117              		@ sp needed
 5118 0042 5DF8047B 		ldr	r7, [sp], #4
 5119              		.cfi_restore 7
ARM GAS  /tmp/ccQUMSla.s 			page 112


 5120              		.cfi_def_cfa_offset 0
 5121 0046 7047     		bx	lr
 5122              	.L221:
 5123              		.align	2
 5124              	.L220:
 5125 0048 98C00920 		.word	537510040
 5126 004c 24000340 		.word	1073938468
 5127 0050 04000340 		.word	1073938436
 5128 0054 10410050 		.word	1342193936
 5129 0058 00E100E0 		.word	-536813312
 5130 005c 9CC00920 		.word	537510044
 5131              		.cfi_endproc
 5132              	.LFE21:
 5134              		.section	.text.dio_ssp_stop,"ax",%progbits
 5135              		.align	2
 5136              		.thumb
 5137              		.thumb_func
 5139              	dio_ssp_stop:
 5140              	.LFB22:
1284:bluetooth_rxtx.c **** 
1285:bluetooth_rxtx.c **** static void dio_ssp_stop()
1286:bluetooth_rxtx.c **** {
 5141              		.loc 1 1286 0
 5142              		.cfi_startproc
 5143              		@ args = 0, pretend = 0, frame = 0
 5144              		@ frame_needed = 1, uses_anonymous_args = 0
 5145              		@ link register save eliminated.
 5146 0000 80B4     		push	{r7}
 5147              		.cfi_def_cfa_offset 4
 5148              		.cfi_offset 7, -4
 5149 0002 00AF     		add	r7, sp, #0
 5150              		.cfi_def_cfa_register 7
1287:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1288:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 5151              		.loc 1 1288 0
 5152 0004 214B     		ldr	r3, .L224
 5153 0006 4FF08052 		mov	r2, #268435456
 5154 000a 1A60     		str	r2, [r3]
1289:bluetooth_rxtx.c **** 
1290:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1291:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 5155              		.loc 1 1291 0
 5156 000c 204A     		ldr	r2, .L224+4
 5157 000e 204B     		ldr	r3, .L224+4
 5158 0010 1B68     		ldr	r3, [r3]
 5159 0012 23F00103 		bic	r3, r3, #1
 5160 0016 1360     		str	r3, [r2]
1292:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 5161              		.loc 1 1292 0
 5162 0018 1E4A     		ldr	r2, .L224+8
 5163 001a 1E4B     		ldr	r3, .L224+8
 5164 001c 1B68     		ldr	r3, [r3]
 5165 001e 23F00203 		bic	r3, r3, #2
 5166 0022 1360     		str	r3, [r2]
1293:bluetooth_rxtx.c **** 
1294:bluetooth_rxtx.c **** 
1295:bluetooth_rxtx.c **** 	// disable DMA engine:
ARM GAS  /tmp/ccQUMSla.s 			page 113


1296:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1297:bluetooth_rxtx.c **** 
1298:bluetooth_rxtx.c **** 	// disable DMA interrupts
1299:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 5167              		.loc 1 1299 0
 5168 0024 1C4B     		ldr	r3, .L224+12
 5169 0026 4FF08062 		mov	r2, #67108864
 5170 002a 1A60     		str	r2, [r3]
1300:bluetooth_rxtx.c **** 
1301:bluetooth_rxtx.c **** 	// disable active channels
1302:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 5171              		.loc 1 1302 0
 5172 002c 1B4B     		ldr	r3, .L224+16
 5173 002e 0022     		movs	r2, #0
 5174 0030 1A60     		str	r2, [r3]
1303:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 5175              		.loc 1 1303 0
 5176 0032 1B4B     		ldr	r3, .L224+20
 5177 0034 0022     		movs	r2, #0
 5178 0036 1A60     		str	r2, [r3]
1304:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 5179              		.loc 1 1304 0
 5180 0038 1A4B     		ldr	r3, .L224+24
 5181 003a 0022     		movs	r2, #0
 5182 003c 1A60     		str	r2, [r3]
1305:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 5183              		.loc 1 1305 0
 5184 003e 1A4B     		ldr	r3, .L224+28
 5185 0040 0022     		movs	r2, #0
 5186 0042 1A60     		str	r2, [r3]
1306:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 5187              		.loc 1 1306 0
 5188 0044 194B     		ldr	r3, .L224+32
 5189 0046 0022     		movs	r2, #0
 5190 0048 1A60     		str	r2, [r3]
1307:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 5191              		.loc 1 1307 0
 5192 004a 194B     		ldr	r3, .L224+36
 5193 004c 0022     		movs	r2, #0
 5194 004e 1A60     		str	r2, [r3]
1308:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 5195              		.loc 1 1308 0
 5196 0050 184B     		ldr	r3, .L224+40
 5197 0052 0022     		movs	r2, #0
 5198 0054 1A60     		str	r2, [r3]
1309:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 5199              		.loc 1 1309 0
 5200 0056 184B     		ldr	r3, .L224+44
 5201 0058 0022     		movs	r2, #0
 5202 005a 1A60     		str	r2, [r3]
1310:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 5203              		.loc 1 1310 0
 5204 005c 174B     		ldr	r3, .L224+48
 5205 005e FF22     		movs	r2, #255
 5206 0060 1A60     		str	r2, [r3]
1311:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 5207              		.loc 1 1311 0
ARM GAS  /tmp/ccQUMSla.s 			page 114


 5208 0062 174B     		ldr	r3, .L224+52
 5209 0064 FF22     		movs	r2, #255
 5210 0066 1A60     		str	r2, [r3]
1312:bluetooth_rxtx.c **** 
1313:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1314:bluetooth_rxtx.c **** 	// register.
1315:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 5211              		.loc 1 1315 0
 5212 0068 164A     		ldr	r2, .L224+56
 5213 006a 164B     		ldr	r3, .L224+56
 5214 006c 1B68     		ldr	r3, [r3]
 5215 006e 23F00103 		bic	r3, r3, #1
 5216 0072 1360     		str	r3, [r2]
1316:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 5217              		.loc 1 1316 0
 5218 0074 00BF     		nop
 5219              	.L223:
 5220              		.loc 1 1316 0 is_stmt 0 discriminator 1
 5221 0076 134B     		ldr	r3, .L224+56
 5222 0078 1B68     		ldr	r3, [r3]
 5223 007a 03F00103 		and	r3, r3, #1
 5224 007e 002B     		cmp	r3, #0
 5225 0080 F9D1     		bne	.L223
1317:bluetooth_rxtx.c **** }
 5226              		.loc 1 1317 0 is_stmt 1
 5227 0082 BD46     		mov	sp, r7
 5228              		.cfi_def_cfa_register 13
 5229              		@ sp needed
 5230 0084 5DF8047B 		ldr	r7, [sp], #4
 5231              		.cfi_restore 7
 5232              		.cfi_def_cfa_offset 0
 5233 0088 7047     		bx	lr
 5234              	.L225:
 5235 008a 00BF     		.align	2
 5236              	.L224:
 5237 008c 98C00920 		.word	537510040
 5238 0090 24000340 		.word	1073938468
 5239 0094 04000340 		.word	1073938436
 5240 0098 80E100E0 		.word	-536813184
 5241 009c 10410050 		.word	1342193936
 5242 00a0 30410050 		.word	1342193968
 5243 00a4 50410050 		.word	1342194000
 5244 00a8 70410050 		.word	1342194032
 5245 00ac 90410050 		.word	1342194064
 5246 00b0 B0410050 		.word	1342194096
 5247 00b4 D0410050 		.word	1342194128
 5248 00b8 F0410050 		.word	1342194160
 5249 00bc 08400050 		.word	1342193672
 5250 00c0 10400050 		.word	1342193680
 5251 00c4 30400050 		.word	1342193712
 5252              		.cfi_endproc
 5253              	.LFE22:
 5255              		.section	.text.cc2400_idle,"ax",%progbits
 5256              		.align	2
 5257              		.thumb
 5258              		.thumb_func
 5260              	cc2400_idle:
ARM GAS  /tmp/ccQUMSla.s 			page 115


 5261              	.LFB23:
1318:bluetooth_rxtx.c **** 
1319:bluetooth_rxtx.c **** static void cc2400_idle()
1320:bluetooth_rxtx.c **** {
 5262              		.loc 1 1320 0
 5263              		.cfi_startproc
 5264              		@ args = 0, pretend = 0, frame = 0
 5265              		@ frame_needed = 1, uses_anonymous_args = 0
 5266 0000 80B5     		push	{r7, lr}
 5267              		.cfi_def_cfa_offset 8
 5268              		.cfi_offset 7, -8
 5269              		.cfi_offset 14, -4
 5270 0002 00AF     		add	r7, sp, #0
 5271              		.cfi_def_cfa_register 7
1321:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5272              		.loc 1 1321 0
 5273 0004 6420     		movs	r0, #100
 5274 0006 FFF7FEFF 		bl	cc2400_strobe
1322:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5275              		.loc 1 1322 0
 5276 000a 00BF     		nop
 5277              	.L227:
 5278              		.loc 1 1322 0 is_stmt 0 discriminator 1
 5279 000c FFF7FEFF 		bl	cc2400_status
 5280 0010 0346     		mov	r3, r0
 5281 0012 03F00403 		and	r3, r3, #4
 5282 0016 002B     		cmp	r3, #0
 5283 0018 F8D1     		bne	.L227
1323:bluetooth_rxtx.c **** 
1324:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1325:bluetooth_rxtx.c **** 	PAEN_CLR;
 5284              		.loc 1 1325 0 is_stmt 1
 5285 001a 0A4B     		ldr	r3, .L228
 5286 001c 8022     		movs	r2, #128
 5287 001e 1A60     		str	r2, [r3]
1326:bluetooth_rxtx.c **** 	HGM_CLR;
 5288              		.loc 1 1326 0
 5289 0020 084B     		ldr	r3, .L228
 5290 0022 4FF48072 		mov	r2, #256
 5291 0026 1A60     		str	r2, [r3]
1327:bluetooth_rxtx.c **** #endif
1328:bluetooth_rxtx.c **** 
1329:bluetooth_rxtx.c **** 	RXLED_CLR;
 5292              		.loc 1 1329 0
 5293 0028 074B     		ldr	r3, .L228+4
 5294 002a 1022     		movs	r2, #16
 5295 002c 1A60     		str	r2, [r3]
1330:bluetooth_rxtx.c **** 	TXLED_CLR;
 5296              		.loc 1 1330 0
 5297 002e 064B     		ldr	r3, .L228+4
 5298 0030 4FF48072 		mov	r2, #256
 5299 0034 1A60     		str	r2, [r3]
1331:bluetooth_rxtx.c **** 	USRLED_CLR;
 5300              		.loc 1 1331 0
 5301 0036 044B     		ldr	r3, .L228+4
 5302 0038 0222     		movs	r2, #2
 5303 003a 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 116


1332:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 5304              		.loc 1 1332 0
 5305 003c 034B     		ldr	r3, .L228+8
 5306 003e 0022     		movs	r2, #0
 5307 0040 1A70     		strb	r2, [r3]
1333:bluetooth_rxtx.c **** }
 5308              		.loc 1 1333 0
 5309 0042 80BD     		pop	{r7, pc}
 5310              	.L229:
 5311              		.align	2
 5312              	.L228:
 5313 0044 5CC00920 		.word	537509980
 5314 0048 3CC00920 		.word	537509948
 5315 004c 00000000 		.word	mode
 5316              		.cfi_endproc
 5317              	.LFE23:
 5319              		.section	.text.cc2400_rx,"ax",%progbits
 5320              		.align	2
 5321              		.thumb
 5322              		.thumb_func
 5324              	cc2400_rx:
 5325              	.LFB24:
1334:bluetooth_rxtx.c **** 
1335:bluetooth_rxtx.c **** /* start un-buffered rx */
1336:bluetooth_rxtx.c **** static void cc2400_rx()
1337:bluetooth_rxtx.c **** {
 5326              		.loc 1 1337 0
 5327              		.cfi_startproc
 5328              		@ args = 0, pretend = 0, frame = 8
 5329              		@ frame_needed = 1, uses_anonymous_args = 0
 5330 0000 80B5     		push	{r7, lr}
 5331              		.cfi_def_cfa_offset 8
 5332              		.cfi_offset 7, -8
 5333              		.cfi_offset 14, -4
 5334 0002 82B0     		sub	sp, sp, #8
 5335              		.cfi_def_cfa_offset 16
 5336 0004 00AF     		add	r7, sp, #0
 5337              		.cfi_def_cfa_register 7
1338:bluetooth_rxtx.c **** 	u16 mdmctrl;
1339:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5338              		.loc 1 1339 0
 5339 0006 2A4B     		ldr	r3, .L237
 5340 0008 1B78     		ldrb	r3, [r3]
 5341 000a DBB2     		uxtb	r3, r3
 5342 000c 002B     		cmp	r3, #0
 5343 000e 02D1     		bne	.L231
1340:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5344              		.loc 1 1340 0
 5345 0010 2923     		movs	r3, #41
 5346 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 5347 0014 08E0     		b	.L232
 5348              	.L231:
1341:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5349              		.loc 1 1341 0
 5350 0016 264B     		ldr	r3, .L237
 5351 0018 1B78     		ldrb	r3, [r3]
 5352 001a DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccQUMSla.s 			page 117


 5353 001c 012B     		cmp	r3, #1
 5354 001e 02D1     		bne	.L233
1342:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5355              		.loc 1 1342 0
 5356 0020 4023     		movs	r3, #64
 5357 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 5358 0024 00E0     		b	.L232
 5359              	.L233:
1343:bluetooth_rxtx.c **** 	} else {
1344:bluetooth_rxtx.c **** 		/* oops */
1345:bluetooth_rxtx.c **** 		return;
 5360              		.loc 1 1345 0
 5361 0026 40E0     		b	.L230
 5362              	.L232:
1346:bluetooth_rxtx.c **** 	}
1347:bluetooth_rxtx.c **** 
1348:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5363              		.loc 1 1348 0
 5364 0028 0D20     		movs	r0, #13
 5365 002a 47F6FF71 		movw	r1, #32767
 5366 002e FFF7FEFF 		bl	cc2400_set
1349:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5367              		.loc 1 1349 0
 5368 0032 1220     		movs	r0, #18
 5369 0034 42F62231 		movw	r1, #11042
 5370 0038 FFF7FEFF 		bl	cc2400_set
1350:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 5371              		.loc 1 1350 0
 5372 003c 1420     		movs	r0, #20
 5373 003e 41F24B31 		movw	r1, #4939
 5374 0042 FFF7FEFF 		bl	cc2400_set
1351:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 5375              		.loc 1 1351 0
 5376 0046 2020     		movs	r0, #32
 5377 0048 40F20111 		movw	r1, #257
 5378 004c FFF7FEFF 		bl	cc2400_set
1352:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1353:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1354:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1355:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1356:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1357:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1358:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5379              		.loc 1 1358 0
 5380 0050 184B     		ldr	r3, .L237+4
 5381 0052 1B88     		ldrh	r3, [r3]	@ movhi
 5382 0054 9BB2     		uxth	r3, r3
 5383 0056 013B     		subs	r3, r3, #1
 5384 0058 9BB2     		uxth	r3, r3
 5385 005a 0220     		movs	r0, #2
 5386 005c 1946     		mov	r1, r3
 5387 005e FFF7FEFF 		bl	cc2400_set
1359:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5388              		.loc 1 1359 0
 5389 0062 FB88     		ldrh	r3, [r7, #6]
 5390 0064 0320     		movs	r0, #3
 5391 0066 1946     		mov	r1, r3
ARM GAS  /tmp/ccQUMSla.s 			page 118


 5392 0068 FFF7FEFF 		bl	cc2400_set
1360:bluetooth_rxtx.c **** 
1361:bluetooth_rxtx.c **** 	// Set up CS register
1362:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5393              		.loc 1 1362 0
 5394 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1363:bluetooth_rxtx.c **** 
1364:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5395              		.loc 1 1364 0
 5396 0070 00BF     		nop
 5397              	.L235:
 5398              		.loc 1 1364 0 is_stmt 0 discriminator 1
 5399 0072 FFF7FEFF 		bl	cc2400_status
 5400 0076 0346     		mov	r3, r0
 5401 0078 03F04003 		and	r3, r3, #64
 5402 007c 002B     		cmp	r3, #0
 5403 007e F8D0     		beq	.L235
1365:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5404              		.loc 1 1365 0 is_stmt 1
 5405 0080 6120     		movs	r0, #97
 5406 0082 FFF7FEFF 		bl	cc2400_strobe
1366:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5407              		.loc 1 1366 0
 5408 0086 00BF     		nop
 5409              	.L236:
 5410              		.loc 1 1366 0 is_stmt 0 discriminator 1
 5411 0088 FFF7FEFF 		bl	cc2400_status
 5412 008c 0346     		mov	r3, r0
 5413 008e 03F00403 		and	r3, r3, #4
 5414 0092 002B     		cmp	r3, #0
 5415 0094 F8D0     		beq	.L236
1367:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5416              		.loc 1 1367 0 is_stmt 1
 5417 0096 6220     		movs	r0, #98
 5418 0098 FFF7FEFF 		bl	cc2400_strobe
1368:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1369:bluetooth_rxtx.c **** 	PAEN_SET;
 5419              		.loc 1 1369 0
 5420 009c 064B     		ldr	r3, .L237+8
 5421 009e 8022     		movs	r2, #128
 5422 00a0 1A60     		str	r2, [r3]
1370:bluetooth_rxtx.c **** 	HGM_SET;
 5423              		.loc 1 1370 0
 5424 00a2 054B     		ldr	r3, .L237+8
 5425 00a4 4FF48072 		mov	r2, #256
 5426 00a8 1A60     		str	r2, [r3]
 5427              	.L230:
1371:bluetooth_rxtx.c **** #endif
1372:bluetooth_rxtx.c **** }
 5428              		.loc 1 1372 0
 5429 00aa 0837     		adds	r7, r7, #8
 5430              		.cfi_def_cfa_offset 8
 5431 00ac BD46     		mov	sp, r7
 5432              		.cfi_def_cfa_register 13
 5433              		@ sp needed
 5434 00ae 80BD     		pop	{r7, pc}
 5435              	.L238:
ARM GAS  /tmp/ccQUMSla.s 			page 119


 5436              		.align	2
 5437              	.L237:
 5438 00b0 00000000 		.word	modulation
 5439 00b4 00000000 		.word	channel
 5440 00b8 58C00920 		.word	537509976
 5441              		.cfi_endproc
 5442              	.LFE24:
 5444              		.section	.text.cc2400_rx_sync,"ax",%progbits
 5445              		.align	2
 5446              		.thumb
 5447              		.thumb_func
 5449              	cc2400_rx_sync:
 5450              	.LFB25:
1373:bluetooth_rxtx.c **** 
1374:bluetooth_rxtx.c **** /* start un-buffered rx */
1375:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1376:bluetooth_rxtx.c **** {
 5451              		.loc 1 1376 0
 5452              		.cfi_startproc
 5453              		@ args = 0, pretend = 0, frame = 16
 5454              		@ frame_needed = 1, uses_anonymous_args = 0
 5455 0000 80B5     		push	{r7, lr}
 5456              		.cfi_def_cfa_offset 8
 5457              		.cfi_offset 7, -8
 5458              		.cfi_offset 14, -4
 5459 0002 84B0     		sub	sp, sp, #16
 5460              		.cfi_def_cfa_offset 24
 5461 0004 00AF     		add	r7, sp, #0
 5462              		.cfi_def_cfa_register 7
 5463 0006 7860     		str	r0, [r7, #4]
1377:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1378:bluetooth_rxtx.c **** 
1379:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5464              		.loc 1 1379 0
 5465 0008 334B     		ldr	r3, .L246
 5466 000a 1B78     		ldrb	r3, [r3]
 5467 000c DBB2     		uxtb	r3, r3
 5468 000e 002B     		cmp	r3, #0
 5469 0010 05D1     		bne	.L240
1380:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5470              		.loc 1 1380 0
 5471 0012 2923     		movs	r3, #41
 5472 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1381:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5473              		.loc 1 1381 0
 5474 0016 40F26143 		movw	r3, #1121
 5475 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5476 001c 0BE0     		b	.L241
 5477              	.L240:
1382:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1383:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1384:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1385:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1386:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1387:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1388:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1389:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 120


1390:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5478              		.loc 1 1390 0
 5479 001e 2E4B     		ldr	r3, .L246
 5480 0020 1B78     		ldrb	r3, [r3]
 5481 0022 DBB2     		uxtb	r3, r3
 5482 0024 012B     		cmp	r3, #1
 5483 0026 05D1     		bne	.L242
1391:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5484              		.loc 1 1391 0
 5485 0028 4023     		movs	r3, #64
 5486 002a BB81     		strh	r3, [r7, #12]	@ movhi
1392:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 5487              		.loc 1 1392 0
 5488 002c 40F26153 		movw	r3, #1377
 5489 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 5490 0032 00E0     		b	.L241
 5491              	.L242:
1393:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1394:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1395:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1396:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1397:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1398:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1399:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1400:bluetooth_rxtx.c **** 
1401:bluetooth_rxtx.c **** 	} else {
1402:bluetooth_rxtx.c **** 		/* oops */
1403:bluetooth_rxtx.c **** 		return;
 5492              		.loc 1 1403 0
 5493 0034 4DE0     		b	.L239
 5494              	.L241:
1404:bluetooth_rxtx.c **** 	}
1405:bluetooth_rxtx.c **** 
1406:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5495              		.loc 1 1406 0
 5496 0036 0D20     		movs	r0, #13
 5497 0038 47F6FF71 		movw	r1, #32767
 5498 003c FFF7FEFF 		bl	cc2400_set
1407:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5499              		.loc 1 1407 0
 5500 0040 1220     		movs	r0, #18
 5501 0042 42F62231 		movw	r1, #11042
 5502 0046 FFF7FEFF 		bl	cc2400_set
1408:bluetooth_rxtx.c **** 
1409:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 5503              		.loc 1 1409 0
 5504 004a 1420     		movs	r0, #20
 5505 004c 41F24B21 		movw	r1, #4683
 5506 0050 FFF7FEFF 		bl	cc2400_set
1410:bluetooth_rxtx.c **** 	// 1      2      4b
1411:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1412:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1413:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1414:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1415:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1416:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1417:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
ARM GAS  /tmp/ccQUMSla.s 			page 121


1418:bluetooth_rxtx.c **** 	//
1419:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1420:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1421:bluetooth_rxtx.c **** 
1422:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5507              		.loc 1 1422 0
 5508 0054 FB89     		ldrh	r3, [r7, #14]
 5509 0056 2020     		movs	r0, #32
 5510 0058 1946     		mov	r1, r3
 5511 005a FFF7FEFF 		bl	cc2400_set
1423:bluetooth_rxtx.c **** 
1424:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5512              		.loc 1 1424 0
 5513 005e 7B68     		ldr	r3, [r7, #4]
 5514 0060 9BB2     		uxth	r3, r3
 5515 0062 2C20     		movs	r0, #44
 5516 0064 1946     		mov	r1, r3
 5517 0066 FFF7FEFF 		bl	cc2400_set
1425:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5518              		.loc 1 1425 0
 5519 006a 7B68     		ldr	r3, [r7, #4]
 5520 006c 1B0C     		lsrs	r3, r3, #16
 5521 006e 9BB2     		uxth	r3, r3
 5522 0070 2D20     		movs	r0, #45
 5523 0072 1946     		mov	r1, r3
 5524 0074 FFF7FEFF 		bl	cc2400_set
1426:bluetooth_rxtx.c **** 	
1427:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5525              		.loc 1 1427 0
 5526 0078 184B     		ldr	r3, .L246+4
 5527 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5528 007c 9BB2     		uxth	r3, r3
 5529 007e 013B     		subs	r3, r3, #1
 5530 0080 9BB2     		uxth	r3, r3
 5531 0082 0220     		movs	r0, #2
 5532 0084 1946     		mov	r1, r3
 5533 0086 FFF7FEFF 		bl	cc2400_set
1428:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5534              		.loc 1 1428 0
 5535 008a BB89     		ldrh	r3, [r7, #12]
 5536 008c 0320     		movs	r0, #3
 5537 008e 1946     		mov	r1, r3
 5538 0090 FFF7FEFF 		bl	cc2400_set
1429:bluetooth_rxtx.c **** 
1430:bluetooth_rxtx.c **** 	// Set up CS register
1431:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5539              		.loc 1 1431 0
 5540 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1432:bluetooth_rxtx.c **** 
1433:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5541              		.loc 1 1433 0
 5542 0098 00BF     		nop
 5543              	.L244:
 5544              		.loc 1 1433 0 is_stmt 0 discriminator 1
 5545 009a FFF7FEFF 		bl	cc2400_status
 5546 009e 0346     		mov	r3, r0
 5547 00a0 03F04003 		and	r3, r3, #64
ARM GAS  /tmp/ccQUMSla.s 			page 122


 5548 00a4 002B     		cmp	r3, #0
 5549 00a6 F8D0     		beq	.L244
1434:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5550              		.loc 1 1434 0 is_stmt 1
 5551 00a8 6120     		movs	r0, #97
 5552 00aa FFF7FEFF 		bl	cc2400_strobe
1435:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5553              		.loc 1 1435 0
 5554 00ae 00BF     		nop
 5555              	.L245:
 5556              		.loc 1 1435 0 is_stmt 0 discriminator 1
 5557 00b0 FFF7FEFF 		bl	cc2400_status
 5558 00b4 0346     		mov	r3, r0
 5559 00b6 03F00403 		and	r3, r3, #4
 5560 00ba 002B     		cmp	r3, #0
 5561 00bc F8D0     		beq	.L245
1436:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5562              		.loc 1 1436 0 is_stmt 1
 5563 00be 6220     		movs	r0, #98
 5564 00c0 FFF7FEFF 		bl	cc2400_strobe
1437:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1438:bluetooth_rxtx.c **** 	PAEN_SET;
 5565              		.loc 1 1438 0
 5566 00c4 064B     		ldr	r3, .L246+8
 5567 00c6 8022     		movs	r2, #128
 5568 00c8 1A60     		str	r2, [r3]
1439:bluetooth_rxtx.c **** 	HGM_SET;
 5569              		.loc 1 1439 0
 5570 00ca 054B     		ldr	r3, .L246+8
 5571 00cc 4FF48072 		mov	r2, #256
 5572 00d0 1A60     		str	r2, [r3]
 5573              	.L239:
1440:bluetooth_rxtx.c **** #endif
1441:bluetooth_rxtx.c **** }
 5574              		.loc 1 1441 0
 5575 00d2 1037     		adds	r7, r7, #16
 5576              		.cfi_def_cfa_offset 8
 5577 00d4 BD46     		mov	sp, r7
 5578              		.cfi_def_cfa_register 13
 5579              		@ sp needed
 5580 00d6 80BD     		pop	{r7, pc}
 5581              	.L247:
 5582              		.align	2
 5583              	.L246:
 5584 00d8 00000000 		.word	modulation
 5585 00dc 00000000 		.word	channel
 5586 00e0 58C00920 		.word	537509976
 5587              		.cfi_endproc
 5588              	.LFE25:
 5590              		.section	.text.le_transmit,"ax",%progbits
 5591              		.align	2
 5592              		.global	le_transmit
 5593              		.thumb
 5594              		.thumb_func
 5596              	le_transmit:
 5597              	.LFB26:
1442:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 123


1443:bluetooth_rxtx.c **** /*
1444:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1445:bluetooth_rxtx.c ****  *
1446:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1447:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1448:bluetooth_rxtx.c ****  * included in the data length.
1449:bluetooth_rxtx.c ****  */
1450:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1451:bluetooth_rxtx.c **** {
 5598              		.loc 1 1451 0
 5599              		.cfi_startproc
 5600              		@ args = 0, pretend = 0, frame = 104
 5601              		@ frame_needed = 1, uses_anonymous_args = 0
 5602 0000 80B5     		push	{r7, lr}
 5603              		.cfi_def_cfa_offset 8
 5604              		.cfi_offset 7, -8
 5605              		.cfi_offset 14, -4
 5606 0002 9AB0     		sub	sp, sp, #104
 5607              		.cfi_def_cfa_offset 112
 5608 0004 00AF     		add	r7, sp, #0
 5609              		.cfi_def_cfa_register 7
 5610 0006 F860     		str	r0, [r7, #12]
 5611 0008 0B46     		mov	r3, r1
 5612 000a 7A60     		str	r2, [r7, #4]
 5613 000c FB72     		strb	r3, [r7, #11]
1452:bluetooth_rxtx.c **** 	unsigned i, j;
1453:bluetooth_rxtx.c **** 	int bit;
1454:bluetooth_rxtx.c **** 	u8 txbuf[64];
1455:bluetooth_rxtx.c **** 	u8 tx_len;
1456:bluetooth_rxtx.c **** 	u8 byte;
1457:bluetooth_rxtx.c **** 	u16 gio_save;
1458:bluetooth_rxtx.c **** 
1459:bluetooth_rxtx.c **** 	// first four bytes: AA
1460:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5614              		.loc 1 1460 0
 5615 000e 0023     		movs	r3, #0
 5616 0010 7B66     		str	r3, [r7, #100]
 5617 0012 35E0     		b	.L249
 5618              	.L252:
1461:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5619              		.loc 1 1461 0
 5620 0014 FB68     		ldr	r3, [r7, #12]
 5621 0016 87F85E30 		strb	r3, [r7, #94]
1462:bluetooth_rxtx.c **** 		aa >>= 8;
 5622              		.loc 1 1462 0
 5623 001a FB68     		ldr	r3, [r7, #12]
 5624 001c 1B0A     		lsrs	r3, r3, #8
 5625 001e FB60     		str	r3, [r7, #12]
1463:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5626              		.loc 1 1463 0
 5627 0020 07F11002 		add	r2, r7, #16
 5628 0024 7B6E     		ldr	r3, [r7, #100]
 5629 0026 1344     		add	r3, r3, r2
 5630 0028 0022     		movs	r2, #0
 5631 002a 1A70     		strb	r2, [r3]
1464:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5632              		.loc 1 1464 0
ARM GAS  /tmp/ccQUMSla.s 			page 124


 5633 002c 0023     		movs	r3, #0
 5634 002e 3B66     		str	r3, [r7, #96]
 5635 0030 20E0     		b	.L250
 5636              	.L251:
1465:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5637              		.loc 1 1465 0 discriminator 3
 5638 0032 07F11002 		add	r2, r7, #16
 5639 0036 7B6E     		ldr	r3, [r7, #100]
 5640 0038 1344     		add	r3, r3, r2
 5641 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5642 003c D9B2     		uxtb	r1, r3
 5643 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5644 0042 03F00103 		and	r3, r3, #1
 5645 0046 3A6E     		ldr	r2, [r7, #96]
 5646 0048 C2F10702 		rsb	r2, r2, #7
 5647 004c 9340     		lsls	r3, r3, r2
 5648 004e DBB2     		uxtb	r3, r3
 5649 0050 0A46     		mov	r2, r1
 5650 0052 1343     		orrs	r3, r3, r2
 5651 0054 DBB2     		uxtb	r3, r3
 5652 0056 D9B2     		uxtb	r1, r3
 5653 0058 07F11002 		add	r2, r7, #16
 5654 005c 7B6E     		ldr	r3, [r7, #100]
 5655 005e 1344     		add	r3, r3, r2
 5656 0060 0A46     		mov	r2, r1
 5657 0062 1A70     		strb	r2, [r3]
1466:bluetooth_rxtx.c **** 			byte >>= 1;
 5658              		.loc 1 1466 0 discriminator 3
 5659 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5660 0068 5B08     		lsrs	r3, r3, #1
 5661 006a 87F85E30 		strb	r3, [r7, #94]
1464:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5662              		.loc 1 1464 0 discriminator 3
 5663 006e 3B6E     		ldr	r3, [r7, #96]
 5664 0070 0133     		adds	r3, r3, #1
 5665 0072 3B66     		str	r3, [r7, #96]
 5666              	.L250:
1464:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5667              		.loc 1 1464 0 is_stmt 0 discriminator 1
 5668 0074 3B6E     		ldr	r3, [r7, #96]
 5669 0076 072B     		cmp	r3, #7
 5670 0078 DBD9     		bls	.L251
1460:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5671              		.loc 1 1460 0 is_stmt 1 discriminator 2
 5672 007a 7B6E     		ldr	r3, [r7, #100]
 5673 007c 0133     		adds	r3, r3, #1
 5674 007e 7B66     		str	r3, [r7, #100]
 5675              	.L249:
1460:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5676              		.loc 1 1460 0 is_stmt 0 discriminator 1
 5677 0080 7B6E     		ldr	r3, [r7, #100]
 5678 0082 032B     		cmp	r3, #3
 5679 0084 C6D9     		bls	.L252
1467:bluetooth_rxtx.c **** 		}
1468:bluetooth_rxtx.c **** 	}
1469:bluetooth_rxtx.c **** 
1470:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
ARM GAS  /tmp/ccQUMSla.s 			page 125


1471:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5680              		.loc 1 1471 0 is_stmt 1
 5681 0086 934B     		ldr	r3, .L268
 5682 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5683 008a 9BB2     		uxth	r3, r3
 5684 008c DBB2     		uxtb	r3, r3
 5685 008e 623B     		subs	r3, r3, #98
 5686 0090 DBB2     		uxtb	r3, r3
 5687 0092 1846     		mov	r0, r3
 5688 0094 FFF7FEFF 		bl	btle_channel_index
 5689 0098 0346     		mov	r3, r0
 5690 009a 1A46     		mov	r2, r3
 5691 009c 8E4B     		ldr	r3, .L268+4
 5692 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5693 00a0 BB65     		str	r3, [r7, #88]
1472:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5694              		.loc 1 1472 0
 5695 00a2 0023     		movs	r3, #0
 5696 00a4 7B66     		str	r3, [r7, #100]
 5697 00a6 50E0     		b	.L253
 5698              	.L256:
1473:bluetooth_rxtx.c **** 		byte = data[i];
 5699              		.loc 1 1473 0
 5700 00a8 7A68     		ldr	r2, [r7, #4]
 5701 00aa 7B6E     		ldr	r3, [r7, #100]
 5702 00ac 1344     		add	r3, r3, r2
 5703 00ae 1B78     		ldrb	r3, [r3]
 5704 00b0 87F85E30 		strb	r3, [r7, #94]
1474:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5705              		.loc 1 1474 0
 5706 00b4 7B6E     		ldr	r3, [r7, #100]
 5707 00b6 0433     		adds	r3, r3, #4
 5708 00b8 07F16802 		add	r2, r7, #104
 5709 00bc 1344     		add	r3, r3, r2
 5710 00be 0022     		movs	r2, #0
 5711 00c0 03F8582C 		strb	r2, [r3, #-88]
1475:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5712              		.loc 1 1475 0
 5713 00c4 0023     		movs	r3, #0
 5714 00c6 3B66     		str	r3, [r7, #96]
 5715 00c8 39E0     		b	.L254
 5716              	.L255:
1476:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5717              		.loc 1 1476 0 discriminator 3
 5718 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5719 00ce 03F00103 		and	r3, r3, #1
 5720 00d2 8249     		ldr	r1, .L268+8
 5721 00d4 BA6D     		ldr	r2, [r7, #88]
 5722 00d6 0A44     		add	r2, r2, r1
 5723 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5724 00da 5340     		eors	r3, r3, r2
 5725 00dc 7B65     		str	r3, [r7, #84]
1477:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5726              		.loc 1 1477 0 discriminator 3
 5727 00de BB6D     		ldr	r3, [r7, #88]
 5728 00e0 0133     		adds	r3, r3, #1
 5729 00e2 1946     		mov	r1, r3
ARM GAS  /tmp/ccQUMSla.s 			page 126


 5730 00e4 7E4B     		ldr	r3, .L268+12
 5731 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5732 00ea C81A     		subs	r0, r1, r3
 5733 00ec 4008     		lsrs	r0, r0, #1
 5734 00ee 0344     		add	r3, r3, r0
 5735 00f0 9A09     		lsrs	r2, r3, #6
 5736 00f2 1346     		mov	r3, r2
 5737 00f4 DB01     		lsls	r3, r3, #7
 5738 00f6 9B1A     		subs	r3, r3, r2
 5739 00f8 CA1A     		subs	r2, r1, r3
 5740 00fa BA65     		str	r2, [r7, #88]
1478:bluetooth_rxtx.c **** 			byte >>= 1;
 5741              		.loc 1 1478 0 discriminator 3
 5742 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5743 0100 5B08     		lsrs	r3, r3, #1
 5744 0102 87F85E30 		strb	r3, [r7, #94]
1479:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5745              		.loc 1 1479 0 discriminator 3
 5746 0106 7B6E     		ldr	r3, [r7, #100]
 5747 0108 0433     		adds	r3, r3, #4
 5748 010a 7A6E     		ldr	r2, [r7, #100]
 5749 010c 0432     		adds	r2, r2, #4
 5750 010e 07F16801 		add	r1, r7, #104
 5751 0112 0A44     		add	r2, r2, r1
 5752 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5753 0118 D1B2     		uxtb	r1, r2
 5754 011a 3A6E     		ldr	r2, [r7, #96]
 5755 011c C2F10702 		rsb	r2, r2, #7
 5756 0120 1046     		mov	r0, r2
 5757 0122 7A6D     		ldr	r2, [r7, #84]
 5758 0124 8240     		lsls	r2, r2, r0
 5759 0126 D2B2     		uxtb	r2, r2
 5760 0128 0A43     		orrs	r2, r2, r1
 5761 012a D2B2     		uxtb	r2, r2
 5762 012c D2B2     		uxtb	r2, r2
 5763 012e 07F16801 		add	r1, r7, #104
 5764 0132 0B44     		add	r3, r3, r1
 5765 0134 03F8582C 		strb	r2, [r3, #-88]
1475:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5766              		.loc 1 1475 0 discriminator 3
 5767 0138 3B6E     		ldr	r3, [r7, #96]
 5768 013a 0133     		adds	r3, r3, #1
 5769 013c 3B66     		str	r3, [r7, #96]
 5770              	.L254:
1475:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5771              		.loc 1 1475 0 is_stmt 0 discriminator 1
 5772 013e 3B6E     		ldr	r3, [r7, #96]
 5773 0140 072B     		cmp	r3, #7
 5774 0142 C2D9     		bls	.L255
1472:bluetooth_rxtx.c **** 		byte = data[i];
 5775              		.loc 1 1472 0 is_stmt 1 discriminator 2
 5776 0144 7B6E     		ldr	r3, [r7, #100]
 5777 0146 0133     		adds	r3, r3, #1
 5778 0148 7B66     		str	r3, [r7, #100]
 5779              	.L253:
1472:bluetooth_rxtx.c **** 		byte = data[i];
 5780              		.loc 1 1472 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccQUMSla.s 			page 127


 5781 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5782 014c 7B6E     		ldr	r3, [r7, #100]
 5783 014e 9A42     		cmp	r2, r3
 5784 0150 AAD8     		bhi	.L256
1480:bluetooth_rxtx.c **** 		}
1481:bluetooth_rxtx.c **** 	}
1482:bluetooth_rxtx.c **** 
1483:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5785              		.loc 1 1483 0 is_stmt 1
 5786 0152 FB7A     		ldrb	r3, [r7, #11]
 5787 0154 0433     		adds	r3, r3, #4
 5788 0156 FB72     		strb	r3, [r7, #11]
1484:bluetooth_rxtx.c **** 
1485:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1486:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5789              		.loc 1 1486 0
 5790 0158 0D20     		movs	r0, #13
 5791 015a 47F6FF71 		movw	r1, #32767
 5792 015e FFF7FEFF 		bl	cc2400_set
1487:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5793              		.loc 1 1487 0
 5794 0162 1220     		movs	r0, #18
 5795 0164 42F62231 		movw	r1, #11042
 5796 0168 FFF7FEFF 		bl	cc2400_set
1488:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5797              		.loc 1 1488 0
 5798 016c 1420     		movs	r0, #20
 5799 016e 41F24B31 		movw	r1, #4939
 5800 0172 FFF7FEFF 		bl	cc2400_set
1489:bluetooth_rxtx.c **** 
1490:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5801              		.loc 1 1490 0
 5802 0176 2020     		movs	r0, #32
 5803 0178 40F60141 		movw	r1, #3073
 5804 017c FFF7FEFF 		bl	cc2400_set
1491:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1492:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1493:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1494:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1495:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1496:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1497:bluetooth_rxtx.c **** 
1498:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5805              		.loc 1 1498 0
 5806 0180 544B     		ldr	r3, .L268
 5807 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5808 0184 9BB2     		uxth	r3, r3
 5809 0186 0220     		movs	r0, #2
 5810 0188 1946     		mov	r1, r3
 5811 018a FFF7FEFF 		bl	cc2400_set
1499:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5812              		.loc 1 1499 0
 5813 018e 0520     		movs	r0, #5
 5814 0190 0B21     		movs	r1, #11
 5815 0192 FFF7FEFF 		bl	cc2400_set
1500:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5816              		.loc 1 1500 0
ARM GAS  /tmp/ccQUMSla.s 			page 128


 5817 0196 0320     		movs	r0, #3
 5818 0198 4021     		movs	r1, #64
 5819 019a FFF7FEFF 		bl	cc2400_set
1501:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5820              		.loc 1 1501 0
 5821 019e 2320     		movs	r0, #35
 5822 01a0 1421     		movs	r1, #20
 5823 01a2 FFF7FEFF 		bl	cc2400_set
1502:bluetooth_rxtx.c **** 
1503:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1504:bluetooth_rxtx.c **** 	if (aa & 1)
 5824              		.loc 1 1504 0
 5825 01a6 FB68     		ldr	r3, [r7, #12]
 5826 01a8 03F00103 		and	r3, r3, #1
 5827 01ac 002B     		cmp	r3, #0
 5828 01ae 05D0     		beq	.L257
1505:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5829              		.loc 1 1505 0
 5830 01b0 2D20     		movs	r0, #45
 5831 01b2 4AF6AA21 		movw	r1, #43690
 5832 01b6 FFF7FEFF 		bl	cc2400_set
 5833 01ba 04E0     		b	.L258
 5834              	.L257:
1506:bluetooth_rxtx.c **** 	else
1507:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5835              		.loc 1 1507 0
 5836 01bc 2D20     		movs	r0, #45
 5837 01be 45F25551 		movw	r1, #21845
 5838 01c2 FFF7FEFF 		bl	cc2400_set
 5839              	.L258:
1508:bluetooth_rxtx.c **** 
1509:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1510:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5840              		.loc 1 1510 0
 5841 01c6 0820     		movs	r0, #8
 5842 01c8 FFF7FEFF 		bl	cc2400_get
 5843 01cc 0346     		mov	r3, r0
 5844 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1511:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5845              		.loc 1 1511 0
 5846 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5847 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5848 01da 9BB2     		uxth	r3, r3
 5849 01dc 43F49C43 		orr	r3, r3, #19968
 5850 01e0 9BB2     		uxth	r3, r3
 5851 01e2 9BB2     		uxth	r3, r3
 5852 01e4 0820     		movs	r0, #8
 5853 01e6 1946     		mov	r1, r3
 5854 01e8 FFF7FEFF 		bl	cc2400_set
1512:bluetooth_rxtx.c **** 
1513:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5855              		.loc 1 1513 0
 5856 01ec 00BF     		nop
 5857              	.L259:
 5858              		.loc 1 1513 0 is_stmt 0 discriminator 1
 5859 01ee FFF7FEFF 		bl	cc2400_status
 5860 01f2 0346     		mov	r3, r0
ARM GAS  /tmp/ccQUMSla.s 			page 129


 5861 01f4 03F04003 		and	r3, r3, #64
 5862 01f8 002B     		cmp	r3, #0
 5863 01fa F8D0     		beq	.L259
1514:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5864              		.loc 1 1514 0 is_stmt 1
 5865 01fc 6120     		movs	r0, #97
 5866 01fe FFF7FEFF 		bl	cc2400_strobe
1515:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5867              		.loc 1 1515 0
 5868 0202 00BF     		nop
 5869              	.L260:
 5870              		.loc 1 1515 0 is_stmt 0 discriminator 1
 5871 0204 FFF7FEFF 		bl	cc2400_status
 5872 0208 0346     		mov	r3, r0
 5873 020a 03F00403 		and	r3, r3, #4
 5874 020e 002B     		cmp	r3, #0
 5875 0210 F8D0     		beq	.L260
1516:bluetooth_rxtx.c **** 	TXLED_SET;
 5876              		.loc 1 1516 0 is_stmt 1
 5877 0212 344B     		ldr	r3, .L268+16
 5878 0214 4FF48072 		mov	r2, #256
 5879 0218 1A60     		str	r2, [r3]
1517:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1518:bluetooth_rxtx.c **** 	PAEN_SET;
 5880              		.loc 1 1518 0
 5881 021a 334B     		ldr	r3, .L268+20
 5882 021c 8022     		movs	r2, #128
 5883 021e 1A60     		str	r2, [r3]
1519:bluetooth_rxtx.c **** #endif
1520:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5884              		.loc 1 1520 0
 5885 0220 00BF     		nop
 5886              	.L261:
 5887              		.loc 1 1520 0 is_stmt 0 discriminator 1
 5888 0222 0E20     		movs	r0, #14
 5889 0224 FFF7FEFF 		bl	cc2400_get
 5890 0228 0346     		mov	r3, r0
 5891 022a 03F01F03 		and	r3, r3, #31
 5892 022e 0F2B     		cmp	r3, #15
 5893 0230 F7D1     		bne	.L261
1521:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5894              		.loc 1 1521 0 is_stmt 1
 5895 0232 6320     		movs	r0, #99
 5896 0234 FFF7FEFF 		bl	cc2400_strobe
1522:bluetooth_rxtx.c **** 
1523:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1524:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5897              		.loc 1 1524 0
 5898 0238 0023     		movs	r3, #0
 5899 023a 7B66     		str	r3, [r7, #100]
 5900 023c 21E0     		b	.L262
 5901              	.L265:
1525:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5902              		.loc 1 1525 0
 5903 023e 00BF     		nop
 5904              	.L263:
 5905              		.loc 1 1525 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccQUMSla.s 			page 130


 5906 0240 2A4B     		ldr	r3, .L268+24
 5907 0242 1B68     		ldr	r3, [r3]
 5908 0244 03F00403 		and	r3, r3, #4
 5909 0248 002B     		cmp	r3, #0
 5910 024a F9D1     		bne	.L263
1526:bluetooth_rxtx.c **** 		tx_len = len - i;
 5911              		.loc 1 1526 0 is_stmt 1
 5912 024c 7B6E     		ldr	r3, [r7, #100]
 5913 024e DBB2     		uxtb	r3, r3
 5914 0250 FA7A     		ldrb	r2, [r7, #11]
 5915 0252 D31A     		subs	r3, r2, r3
 5916 0254 87F85F30 		strb	r3, [r7, #95]
1527:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5917              		.loc 1 1527 0
 5918 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5919 025c 102B     		cmp	r3, #16
 5920 025e 02D9     		bls	.L264
1528:bluetooth_rxtx.c **** 			tx_len = 16;
 5921              		.loc 1 1528 0
 5922 0260 1023     		movs	r3, #16
 5923 0262 87F85F30 		strb	r3, [r7, #95]
 5924              	.L264:
1529:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5925              		.loc 1 1529 0 discriminator 2
 5926 0266 07F11002 		add	r2, r7, #16
 5927 026a 7B6E     		ldr	r3, [r7, #100]
 5928 026c 1344     		add	r3, r3, r2
 5929 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5930 0272 7020     		movs	r0, #112
 5931 0274 1146     		mov	r1, r2
 5932 0276 1A46     		mov	r2, r3
 5933 0278 FFF7FEFF 		bl	cc2400_spi_buf
1524:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5934              		.loc 1 1524 0 discriminator 2
 5935 027c 7B6E     		ldr	r3, [r7, #100]
 5936 027e 1033     		adds	r3, r3, #16
 5937 0280 7B66     		str	r3, [r7, #100]
 5938              	.L262:
1524:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5939              		.loc 1 1524 0 is_stmt 0 discriminator 1
 5940 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5941 0284 7B6E     		ldr	r3, [r7, #100]
 5942 0286 9A42     		cmp	r2, r3
 5943 0288 D9D8     		bhi	.L265
1530:bluetooth_rxtx.c **** 	}
1531:bluetooth_rxtx.c **** 
1532:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5944              		.loc 1 1532 0 is_stmt 1
 5945 028a 00BF     		nop
 5946              	.L266:
 5947              		.loc 1 1532 0 is_stmt 0 discriminator 1
 5948 028c 0E20     		movs	r0, #14
 5949 028e FFF7FEFF 		bl	cc2400_get
 5950 0292 0346     		mov	r3, r0
 5951 0294 03F01F03 		and	r3, r3, #31
 5952 0298 0F2B     		cmp	r3, #15
 5953 029a F7D1     		bne	.L266
ARM GAS  /tmp/ccQUMSla.s 			page 131


1533:bluetooth_rxtx.c **** 	TXLED_CLR;
 5954              		.loc 1 1533 0 is_stmt 1
 5955 029c 144B     		ldr	r3, .L268+28
 5956 029e 4FF48072 		mov	r2, #256
 5957 02a2 1A60     		str	r2, [r3]
1534:bluetooth_rxtx.c **** 
1535:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5958              		.loc 1 1535 0
 5959 02a4 6420     		movs	r0, #100
 5960 02a6 FFF7FEFF 		bl	cc2400_strobe
1536:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5961              		.loc 1 1536 0
 5962 02aa 00BF     		nop
 5963              	.L267:
 5964              		.loc 1 1536 0 is_stmt 0 discriminator 1
 5965 02ac FFF7FEFF 		bl	cc2400_status
 5966 02b0 0346     		mov	r3, r0
 5967 02b2 03F00403 		and	r3, r3, #4
 5968 02b6 002B     		cmp	r3, #0
 5969 02b8 F8D1     		bne	.L267
1537:bluetooth_rxtx.c **** 
1538:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1539:bluetooth_rxtx.c **** 	PAEN_CLR;
 5970              		.loc 1 1539 0 is_stmt 1
 5971 02ba 0E4B     		ldr	r3, .L268+32
 5972 02bc 8022     		movs	r2, #128
 5973 02be 1A60     		str	r2, [r3]
1540:bluetooth_rxtx.c **** #endif
1541:bluetooth_rxtx.c **** 
1542:bluetooth_rxtx.c **** 	// reset GIO
1543:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5974              		.loc 1 1543 0
 5975 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5976 02c4 0820     		movs	r0, #8
 5977 02c6 1946     		mov	r1, r3
 5978 02c8 FFF7FEFF 		bl	cc2400_set
1544:bluetooth_rxtx.c **** }
 5979              		.loc 1 1544 0
 5980 02cc 6837     		adds	r7, r7, #104
 5981              		.cfi_def_cfa_offset 8
 5982 02ce BD46     		mov	sp, r7
 5983              		.cfi_def_cfa_register 13
 5984              		@ sp needed
 5985 02d0 80BD     		pop	{r7, pc}
 5986              	.L269:
 5987 02d2 00BF     		.align	2
 5988              	.L268:
 5989 02d4 00000000 		.word	channel
 5990 02d8 C0000000 		.word	whitening_index
 5991 02dc 40000000 		.word	whitening
 5992 02e0 11080402 		.word	33818641
 5993 02e4 38C00920 		.word	537509944
 5994 02e8 58C00920 		.word	537509976
 5995 02ec 54C00920 		.word	537509972
 5996 02f0 3CC00920 		.word	537509948
 5997 02f4 5CC00920 		.word	537509980
 5998              		.cfi_endproc
ARM GAS  /tmp/ccQUMSla.s 			page 132


 5999              	.LFE26:
 6001              		.section	.text.le_jam,"ax",%progbits
 6002              		.align	2
 6003              		.global	le_jam
 6004              		.thumb
 6005              		.thumb_func
 6007              	le_jam:
 6008              	.LFB27:
1545:bluetooth_rxtx.c **** 
1546:bluetooth_rxtx.c **** void le_jam(void) {
 6009              		.loc 1 1546 0
 6010              		.cfi_startproc
 6011              		@ args = 0, pretend = 0, frame = 0
 6012              		@ frame_needed = 1, uses_anonymous_args = 0
 6013 0000 80B5     		push	{r7, lr}
 6014              		.cfi_def_cfa_offset 8
 6015              		.cfi_offset 7, -8
 6016              		.cfi_offset 14, -4
 6017 0002 00AF     		add	r7, sp, #0
 6018              		.cfi_def_cfa_register 7
1547:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1548:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 6019              		.loc 1 1548 0
 6020 0004 0D20     		movs	r0, #13
 6021 0006 47F6FF71 		movw	r1, #32767
 6022 000a FFF7FEFF 		bl	cc2400_set
1549:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 6023              		.loc 1 1549 0
 6024 000e 1220     		movs	r0, #18
 6025 0010 42F62231 		movw	r1, #11042
 6026 0014 FFF7FEFF 		bl	cc2400_set
1550:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 6027              		.loc 1 1550 0
 6028 0018 1420     		movs	r0, #20
 6029 001a 42F24B31 		movw	r1, #9035
 6030 001e FFF7FEFF 		bl	cc2400_set
1551:bluetooth_rxtx.c **** 
1552:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 6031              		.loc 1 1552 0
 6032 0022 2020     		movs	r0, #32
 6033 0024 40F60141 		movw	r1, #3073
 6034 0028 FFF7FEFF 		bl	cc2400_set
1553:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1554:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1555:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1556:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1557:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1558:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1559:bluetooth_rxtx.c **** 
1560:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1561:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 6035              		.loc 1 1561 0
 6036 002c 0520     		movs	r0, #5
 6037 002e 0B21     		movs	r1, #11
 6038 0030 FFF7FEFF 		bl	cc2400_set
1562:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 6039              		.loc 1 1562 0
ARM GAS  /tmp/ccQUMSla.s 			page 133


 6040 0034 0320     		movs	r0, #3
 6041 0036 4021     		movs	r1, #64
 6042 0038 FFF7FEFF 		bl	cc2400_set
1563:bluetooth_rxtx.c **** 
1564:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6043              		.loc 1 1564 0
 6044 003c 00BF     		nop
 6045              	.L271:
 6046              		.loc 1 1564 0 is_stmt 0 discriminator 1
 6047 003e FFF7FEFF 		bl	cc2400_status
 6048 0042 0346     		mov	r3, r0
 6049 0044 03F04003 		and	r3, r3, #64
 6050 0048 002B     		cmp	r3, #0
 6051 004a F8D0     		beq	.L271
1565:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6052              		.loc 1 1565 0 is_stmt 1
 6053 004c 6120     		movs	r0, #97
 6054 004e FFF7FEFF 		bl	cc2400_strobe
1566:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6055              		.loc 1 1566 0
 6056 0052 00BF     		nop
 6057              	.L272:
 6058              		.loc 1 1566 0 is_stmt 0 discriminator 1
 6059 0054 FFF7FEFF 		bl	cc2400_status
 6060 0058 0346     		mov	r3, r0
 6061 005a 03F00403 		and	r3, r3, #4
 6062 005e 002B     		cmp	r3, #0
 6063 0060 F8D0     		beq	.L272
1567:bluetooth_rxtx.c **** 	TXLED_SET;
 6064              		.loc 1 1567 0 is_stmt 1
 6065 0062 0A4B     		ldr	r3, .L274
 6066 0064 4FF48072 		mov	r2, #256
 6067 0068 1A60     		str	r2, [r3]
1568:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1569:bluetooth_rxtx.c **** 	PAEN_SET;
 6068              		.loc 1 1569 0
 6069 006a 094B     		ldr	r3, .L274+4
 6070 006c 8022     		movs	r2, #128
 6071 006e 1A60     		str	r2, [r3]
1570:bluetooth_rxtx.c **** #endif
1571:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 6072              		.loc 1 1571 0
 6073 0070 00BF     		nop
 6074              	.L273:
 6075              		.loc 1 1571 0 is_stmt 0 discriminator 1
 6076 0072 0E20     		movs	r0, #14
 6077 0074 FFF7FEFF 		bl	cc2400_get
 6078 0078 0346     		mov	r3, r0
 6079 007a 03F01F03 		and	r3, r3, #31
 6080 007e 0F2B     		cmp	r3, #15
 6081 0080 F7D1     		bne	.L273
1572:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 6082              		.loc 1 1572 0 is_stmt 1
 6083 0082 6320     		movs	r0, #99
 6084 0084 FFF7FEFF 		bl	cc2400_strobe
1573:bluetooth_rxtx.c **** #endif
1574:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccQUMSla.s 			page 134


 6085              		.loc 1 1574 0
 6086 0088 80BD     		pop	{r7, pc}
 6087              	.L275:
 6088 008a 00BF     		.align	2
 6089              	.L274:
 6090 008c 38C00920 		.word	537509944
 6091 0090 58C00920 		.word	537509976
 6092              		.cfi_endproc
 6093              	.LFE27:
 6095              		.section	.text.hop,"ax",%progbits
 6096              		.align	2
 6097              		.global	hop
 6098              		.thumb
 6099              		.thumb_func
 6101              	hop:
 6102              	.LFB28:
1575:bluetooth_rxtx.c **** 
1576:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1577:bluetooth_rxtx.c ****  * track of this? */
1578:bluetooth_rxtx.c **** void hop(void)
1579:bluetooth_rxtx.c **** {
 6103              		.loc 1 1579 0
 6104              		.cfi_startproc
 6105              		@ args = 0, pretend = 0, frame = 0
 6106              		@ frame_needed = 1, uses_anonymous_args = 0
 6107 0000 80B5     		push	{r7, lr}
 6108              		.cfi_def_cfa_offset 8
 6109              		.cfi_offset 7, -8
 6110              		.cfi_offset 14, -4
 6111 0002 00AF     		add	r7, sp, #0
 6112              		.cfi_def_cfa_register 7
1580:bluetooth_rxtx.c **** 	do_hop = 0;
 6113              		.loc 1 1580 0
 6114 0004 414B     		ldr	r3, .L287
 6115 0006 0022     		movs	r2, #0
 6116 0008 1A70     		strb	r2, [r3]
1581:bluetooth_rxtx.c **** 
1582:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1583:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 6117              		.loc 1 1583 0
 6118 000a 414B     		ldr	r3, .L287+4
 6119 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6120 000e 002B     		cmp	r3, #0
 6121 0010 0BD1     		bne	.L277
1584:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 6122              		.loc 1 1584 0
 6123 0012 0220     		movs	r0, #2
 6124 0014 FFF7FEFF 		bl	cc2400_get
 6125 0018 0346     		mov	r3, r0
 6126 001a 1A46     		mov	r2, r3
 6127 001c 3D4B     		ldr	r3, .L287+8
 6128 001e 1B88     		ldrh	r3, [r3]	@ movhi
 6129 0020 9BB2     		uxth	r3, r3
 6130 0022 013B     		subs	r3, r3, #1
 6131 0024 9A42     		cmp	r2, r3
 6132 0026 47D1     		bne	.L278
1585:bluetooth_rxtx.c **** 			return;
ARM GAS  /tmp/ccQUMSla.s 			page 135


 6133              		.loc 1 1585 0
 6134 0028 6EE0     		b	.L276
 6135              	.L277:
1586:bluetooth_rxtx.c **** 	}
1587:bluetooth_rxtx.c **** 
1588:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1589:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 6136              		.loc 1 1589 0
 6137 002a 394B     		ldr	r3, .L287+4
 6138 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6139 002e 012B     		cmp	r3, #1
 6140 0030 14D1     		bne	.L280
1590:bluetooth_rxtx.c **** 		channel += 32;
 6141              		.loc 1 1590 0
 6142 0032 384B     		ldr	r3, .L287+8
 6143 0034 1B88     		ldrh	r3, [r3]	@ movhi
 6144 0036 9BB2     		uxth	r3, r3
 6145 0038 2033     		adds	r3, r3, #32
 6146 003a 9AB2     		uxth	r2, r3
 6147 003c 354B     		ldr	r3, .L287+8
 6148 003e 1A80     		strh	r2, [r3]	@ movhi
1591:bluetooth_rxtx.c **** 		if (channel > 2480)
 6149              		.loc 1 1591 0
 6150 0040 344B     		ldr	r3, .L287+8
 6151 0042 1B88     		ldrh	r3, [r3]	@ movhi
 6152 0044 9BB2     		uxth	r3, r3
 6153 0046 B3F51B6F 		cmp	r3, #2480
 6154 004a 35D9     		bls	.L278
1592:bluetooth_rxtx.c **** 			channel -= 79;
 6155              		.loc 1 1592 0
 6156 004c 314B     		ldr	r3, .L287+8
 6157 004e 1B88     		ldrh	r3, [r3]	@ movhi
 6158 0050 9BB2     		uxth	r3, r3
 6159 0052 4F3B     		subs	r3, r3, #79
 6160 0054 9AB2     		uxth	r2, r3
 6161 0056 2F4B     		ldr	r3, .L287+8
 6162 0058 1A80     		strh	r2, [r3]	@ movhi
 6163 005a 2DE0     		b	.L278
 6164              	.L280:
1593:bluetooth_rxtx.c **** 	}
1594:bluetooth_rxtx.c **** 
1595:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 6165              		.loc 1 1595 0
 6166 005c 2C4B     		ldr	r3, .L287+4
 6167 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6168 0060 022B     		cmp	r3, #2
 6169 0062 0DD1     		bne	.L282
1596:bluetooth_rxtx.c **** 		TXLED_SET;
 6170              		.loc 1 1596 0
 6171 0064 2C4B     		ldr	r3, .L287+12
 6172 0066 4FF48072 		mov	r2, #256
 6173 006a 1A60     		str	r2, [r3]
1597:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 6174              		.loc 1 1597 0
 6175 006c 2B4B     		ldr	r3, .L287+16
 6176 006e 1B68     		ldr	r3, [r3]
 6177 0070 1846     		mov	r0, r3
ARM GAS  /tmp/ccQUMSla.s 			page 136


 6178 0072 FFF7FEFF 		bl	next_hop
 6179 0076 0346     		mov	r3, r0
 6180 0078 1A46     		mov	r2, r3
 6181 007a 264B     		ldr	r3, .L287+8
 6182 007c 1A80     		strh	r2, [r3]	@ movhi
 6183 007e 1BE0     		b	.L278
 6184              	.L282:
1598:bluetooth_rxtx.c **** 	}
1599:bluetooth_rxtx.c **** 
1600:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 6185              		.loc 1 1600 0
 6186 0080 234B     		ldr	r3, .L287+4
 6187 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6188 0084 032B     		cmp	r3, #3
 6189 0086 0BD1     		bne	.L283
1601:bluetooth_rxtx.c **** 		TXLED_SET;
 6190              		.loc 1 1601 0
 6191 0088 234B     		ldr	r3, .L287+12
 6192 008a 4FF48072 		mov	r2, #256
 6193 008e 1A60     		str	r2, [r3]
1602:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 6194              		.loc 1 1602 0
 6195 0090 2348     		ldr	r0, .L287+20
 6196 0092 FFF7FEFF 		bl	btle_next_hop
 6197 0096 0346     		mov	r3, r0
 6198 0098 1A46     		mov	r2, r3
 6199 009a 1E4B     		ldr	r3, .L287+8
 6200 009c 1A80     		strh	r2, [r3]	@ movhi
 6201 009e 0BE0     		b	.L278
 6202              	.L283:
1603:bluetooth_rxtx.c **** 	}
1604:bluetooth_rxtx.c **** 
1605:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 6203              		.loc 1 1605 0
 6204 00a0 1B4B     		ldr	r3, .L287+4
 6205 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6206 00a4 042B     		cmp	r3, #4
 6207 00a6 07D1     		bne	.L278
1606:bluetooth_rxtx.c **** 		TXLED_SET;
 6208              		.loc 1 1606 0
 6209 00a8 1B4B     		ldr	r3, .L287+12
 6210 00aa 4FF48072 		mov	r2, #256
 6211 00ae 1A60     		str	r2, [r3]
1607:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 6212              		.loc 1 1607 0
 6213 00b0 1C4B     		ldr	r3, .L287+24
 6214 00b2 1A88     		ldrh	r2, [r3]
 6215 00b4 174B     		ldr	r3, .L287+8
 6216 00b6 1A80     		strh	r2, [r3]	@ movhi
 6217              	.L278:
1608:bluetooth_rxtx.c **** 	}
1609:bluetooth_rxtx.c **** 
1610:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1611:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 6218              		.loc 1 1611 0
 6219 00b8 6420     		movs	r0, #100
 6220 00ba FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/ccQUMSla.s 			page 137


1612:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6221              		.loc 1 1612 0
 6222 00be 00BF     		nop
 6223              	.L284:
 6224              		.loc 1 1612 0 is_stmt 0 discriminator 1
 6225 00c0 FFF7FEFF 		bl	cc2400_status
 6226 00c4 0346     		mov	r3, r0
 6227 00c6 03F00403 		and	r3, r3, #4
 6228 00ca 002B     		cmp	r3, #0
 6229 00cc F8D1     		bne	.L284
1613:bluetooth_rxtx.c **** 
1614:bluetooth_rxtx.c **** 	/* Retune */
1615:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6230              		.loc 1 1615 0 is_stmt 1
 6231 00ce 114B     		ldr	r3, .L287+8
 6232 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 6233 00d2 9BB2     		uxth	r3, r3
 6234 00d4 013B     		subs	r3, r3, #1
 6235 00d6 9BB2     		uxth	r3, r3
 6236 00d8 0220     		movs	r0, #2
 6237 00da 1946     		mov	r1, r3
 6238 00dc FFF7FEFF 		bl	cc2400_set
1616:bluetooth_rxtx.c **** 	
1617:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1618:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 6239              		.loc 1 1618 0
 6240 00e0 0B4B     		ldr	r3, .L287+4
 6241 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6242 00e4 002B     		cmp	r3, #0
 6243 00e6 01D0     		beq	.L285
1619:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 6244              		.loc 1 1619 0
 6245 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 6246              	.L285:
1620:bluetooth_rxtx.c **** 	}
1621:bluetooth_rxtx.c **** 
1622:bluetooth_rxtx.c **** 	/* Wait for lock */
1623:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6247              		.loc 1 1623 0
 6248 00ec 6120     		movs	r0, #97
 6249 00ee FFF7FEFF 		bl	cc2400_strobe
1624:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6250              		.loc 1 1624 0
 6251 00f2 00BF     		nop
 6252              	.L286:
 6253              		.loc 1 1624 0 is_stmt 0 discriminator 1
 6254 00f4 FFF7FEFF 		bl	cc2400_status
 6255 00f8 0346     		mov	r3, r0
 6256 00fa 03F00403 		and	r3, r3, #4
 6257 00fe 002B     		cmp	r3, #0
 6258 0100 F8D0     		beq	.L286
1625:bluetooth_rxtx.c **** 	
1626:bluetooth_rxtx.c **** 	/* RX mode */
1627:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6259              		.loc 1 1627 0 is_stmt 1
 6260 0102 6220     		movs	r0, #98
 6261 0104 FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/ccQUMSla.s 			page 138


 6262              	.L276:
1628:bluetooth_rxtx.c **** 
1629:bluetooth_rxtx.c **** }
 6263              		.loc 1 1629 0
 6264 0108 80BD     		pop	{r7, pc}
 6265              	.L288:
 6266 010a 00BF     		.align	2
 6267              	.L287:
 6268 010c 00000000 		.word	do_hop
 6269 0110 00000000 		.word	hop_mode
 6270 0114 00000000 		.word	channel
 6271 0118 38C00920 		.word	537509944
 6272 011c 00000000 		.word	clkn
 6273 0120 00000000 		.word	le
 6274 0124 00000000 		.word	hop_direct_channel
 6275              		.cfi_endproc
 6276              	.LFE28:
 6278              		.section	.text.cc2400_spi_rev,"ax",%progbits
 6279              		.align	2
 6280              		.global	cc2400_spi_rev
 6281              		.thumb
 6282              		.thumb_func
 6284              	cc2400_spi_rev:
 6285              	.LFB29:
1630:bluetooth_rxtx.c **** 
1631:bluetooth_rxtx.c **** 
1632:bluetooth_rxtx.c **** u32 cc2400_spi_rev(u8 len, u32 data)
1633:bluetooth_rxtx.c **** {
 6286              		.loc 1 1633 0
 6287              		.cfi_startproc
 6288              		@ args = 0, pretend = 0, frame = 16
 6289              		@ frame_needed = 1, uses_anonymous_args = 0
 6290              		@ link register save eliminated.
 6291 0000 80B4     		push	{r7}
 6292              		.cfi_def_cfa_offset 4
 6293              		.cfi_offset 7, -4
 6294 0002 85B0     		sub	sp, sp, #20
 6295              		.cfi_def_cfa_offset 24
 6296 0004 00AF     		add	r7, sp, #0
 6297              		.cfi_def_cfa_register 7
 6298 0006 0346     		mov	r3, r0
 6299 0008 3960     		str	r1, [r7]
 6300 000a FB71     		strb	r3, [r7, #7]
1634:bluetooth_rxtx.c ****     //    u32 first_ts, second_ts, diff;
1635:bluetooth_rxtx.c **** 
1636:bluetooth_rxtx.c **** 
1637:bluetooth_rxtx.c ****         u32 msb = 1 << (len - 1);
 6301              		.loc 1 1637 0
 6302 000c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6303 000e 013B     		subs	r3, r3, #1
 6304 0010 0122     		movs	r2, #1
 6305 0012 02FA03F3 		lsl	r3, r2, r3
 6306 0016 FB60     		str	r3, [r7, #12]
1638:bluetooth_rxtx.c **** 
1639:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1640:bluetooth_rxtx.c ****         CSN_CLR;
 6307              		.loc 1 1640 0
ARM GAS  /tmp/ccQUMSla.s 			page 139


 6308 0018 184B     		ldr	r3, .L296
 6309 001a 2022     		movs	r2, #32
 6310 001c 1A60     		str	r2, [r3]
1641:bluetooth_rxtx.c **** 
1642:bluetooth_rxtx.c **** //      first_ts = CLK100NS;
1643:bluetooth_rxtx.c ****         while (len--) {
 6311              		.loc 1 1643 0
 6312 001e 1EE0     		b	.L290
 6313              	.L294:
1644:bluetooth_rxtx.c ****                 if (data & msb)
 6314              		.loc 1 1644 0
 6315 0020 3A68     		ldr	r2, [r7]
 6316 0022 FB68     		ldr	r3, [r7, #12]
 6317 0024 1340     		ands	r3, r3, r2
 6318 0026 002B     		cmp	r3, #0
 6319 0028 03D0     		beq	.L291
1645:bluetooth_rxtx.c ****                         MOSI_SET;
 6320              		.loc 1 1645 0
 6321 002a 154B     		ldr	r3, .L296+4
 6322 002c 0122     		movs	r2, #1
 6323 002e 1A60     		str	r2, [r3]
 6324 0030 02E0     		b	.L292
 6325              	.L291:
1646:bluetooth_rxtx.c ****                 else
1647:bluetooth_rxtx.c ****                         MOSI_CLR;
 6326              		.loc 1 1647 0
 6327 0032 124B     		ldr	r3, .L296
 6328 0034 0122     		movs	r2, #1
 6329 0036 1A60     		str	r2, [r3]
 6330              	.L292:
1648:bluetooth_rxtx.c ****                 data <<= 1;
 6331              		.loc 1 1648 0
 6332 0038 3B68     		ldr	r3, [r7]
 6333 003a 5B00     		lsls	r3, r3, #1
 6334 003c 3B60     		str	r3, [r7]
1649:bluetooth_rxtx.c **** 
1650:bluetooth_rxtx.c ****                 SCLK_SET;
 6335              		.loc 1 1650 0
 6336 003e 104B     		ldr	r3, .L296+4
 6337 0040 1022     		movs	r2, #16
 6338 0042 1A60     		str	r2, [r3]
1651:bluetooth_rxtx.c ****                 if (MISO)
 6339              		.loc 1 1651 0
 6340 0044 0F4B     		ldr	r3, .L296+8
 6341 0046 1B68     		ldr	r3, [r3]
 6342 0048 03F00203 		and	r3, r3, #2
 6343 004c 002B     		cmp	r3, #0
 6344 004e 03D0     		beq	.L293
1652:bluetooth_rxtx.c ****                         data |= 1;
 6345              		.loc 1 1652 0
 6346 0050 3B68     		ldr	r3, [r7]
 6347 0052 43F00103 		orr	r3, r3, #1
 6348 0056 3B60     		str	r3, [r7]
 6349              	.L293:
1653:bluetooth_rxtx.c **** 
1654:bluetooth_rxtx.c ****                 SCLK_CLR;
 6350              		.loc 1 1654 0
ARM GAS  /tmp/ccQUMSla.s 			page 140


 6351 0058 084B     		ldr	r3, .L296
 6352 005a 1022     		movs	r2, #16
 6353 005c 1A60     		str	r2, [r3]
 6354              	.L290:
1643:bluetooth_rxtx.c ****                 if (data & msb)
 6355              		.loc 1 1643 0
 6356 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6357 0060 5A1E     		subs	r2, r3, #1
 6358 0062 FA71     		strb	r2, [r7, #7]
 6359 0064 002B     		cmp	r3, #0
 6360 0066 DBD1     		bne	.L294
1655:bluetooth_rxtx.c ****         }
1656:bluetooth_rxtx.c **** //      second_ts = CLK100NS;
1657:bluetooth_rxtx.c **** //      diff_ts = second_ts - first_ts;
1658:bluetooth_rxtx.c **** 
1659:bluetooth_rxtx.c ****         CSN_SET;
 6361              		.loc 1 1659 0
 6362 0068 054B     		ldr	r3, .L296+4
 6363 006a 2022     		movs	r2, #32
 6364 006c 1A60     		str	r2, [r3]
1660:bluetooth_rxtx.c ****         return data;
 6365              		.loc 1 1660 0
 6366 006e 3B68     		ldr	r3, [r7]
1661:bluetooth_rxtx.c **** }
 6367              		.loc 1 1661 0
 6368 0070 1846     		mov	r0, r3
 6369 0072 1437     		adds	r7, r7, #20
 6370              		.cfi_def_cfa_offset 4
 6371 0074 BD46     		mov	sp, r7
 6372              		.cfi_def_cfa_register 13
 6373              		@ sp needed
 6374 0076 5DF8047B 		ldr	r7, [sp], #4
 6375              		.cfi_restore 7
 6376              		.cfi_def_cfa_offset 0
 6377 007a 7047     		bx	lr
 6378              	.L297:
 6379              		.align	2
 6380              	.L296:
 6381 007c 5CC00920 		.word	537509980
 6382 0080 58C00920 		.word	537509976
 6383 0084 54C00920 		.word	537509972
 6384              		.cfi_endproc
 6385              	.LFE29:
 6387              		.section	.text.cc2400_get_rev,"ax",%progbits
 6388              		.align	2
 6389              		.global	cc2400_get_rev
 6390              		.thumb
 6391              		.thumb_func
 6393              	cc2400_get_rev:
 6394              	.LFB30:
1662:bluetooth_rxtx.c **** 
1663:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1664:bluetooth_rxtx.c **** {
 6395              		.loc 1 1664 0
 6396              		.cfi_startproc
 6397              		@ args = 0, pretend = 0, frame = 16
 6398              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccQUMSla.s 			page 141


 6399 0000 80B5     		push	{r7, lr}
 6400              		.cfi_def_cfa_offset 8
 6401              		.cfi_offset 7, -8
 6402              		.cfi_offset 14, -4
 6403 0002 84B0     		sub	sp, sp, #16
 6404              		.cfi_def_cfa_offset 24
 6405 0004 00AF     		add	r7, sp, #0
 6406              		.cfi_def_cfa_register 7
 6407 0006 0346     		mov	r3, r0
 6408 0008 FB71     		strb	r3, [r7, #7]
1665:bluetooth_rxtx.c ****         u32 in;
1666:bluetooth_rxtx.c **** 
1667:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
 6409              		.loc 1 1667 0
 6410 000a FB79     		ldrb	r3, [r7, #7]
 6411 000c 63F07F03 		orn	r3, r3, #127
 6412 0010 DBB2     		uxtb	r3, r3
 6413 0012 1B02     		lsls	r3, r3, #8
 6414 0014 FB60     		str	r3, [r7, #12]
1668:bluetooth_rxtx.c ****         in = cc2400_spi_rev(16, out);
 6415              		.loc 1 1668 0
 6416 0016 1020     		movs	r0, #16
 6417 0018 F968     		ldr	r1, [r7, #12]
 6418 001a FFF7FEFF 		bl	cc2400_spi_rev
 6419 001e B860     		str	r0, [r7, #8]
1669:bluetooth_rxtx.c ****         return in & 0xFF;
 6420              		.loc 1 1669 0
 6421 0020 BB68     		ldr	r3, [r7, #8]
 6422 0022 DBB2     		uxtb	r3, r3
1670:bluetooth_rxtx.c **** }
 6423              		.loc 1 1670 0
 6424 0024 1846     		mov	r0, r3
 6425 0026 1037     		adds	r7, r7, #16
 6426              		.cfi_def_cfa_offset 8
 6427 0028 BD46     		mov	sp, r7
 6428              		.cfi_def_cfa_register 13
 6429              		@ sp needed
 6430 002a 80BD     		pop	{r7, pc}
 6431              		.cfi_endproc
 6432              	.LFE30:
 6434              		.section	.text.add,"ax",%progbits
 6435              		.align	2
 6436              		.global	add
 6437              		.thumb
 6438              		.thumb_func
 6440              	add:
 6441              	.LFB31:
1671:bluetooth_rxtx.c **** 
1672:bluetooth_rxtx.c **** u8 add (u8 x, u8 y)
1673:bluetooth_rxtx.c **** {
 6442              		.loc 1 1673 0
 6443              		.cfi_startproc
 6444              		@ args = 0, pretend = 0, frame = 16
 6445              		@ frame_needed = 1, uses_anonymous_args = 0
 6446              		@ link register save eliminated.
 6447 0000 80B4     		push	{r7}
 6448              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccQUMSla.s 			page 142


 6449              		.cfi_offset 7, -4
 6450 0002 85B0     		sub	sp, sp, #20
 6451              		.cfi_def_cfa_offset 24
 6452 0004 00AF     		add	r7, sp, #0
 6453              		.cfi_def_cfa_register 7
 6454 0006 0346     		mov	r3, r0
 6455 0008 0A46     		mov	r2, r1
 6456 000a FB71     		strb	r3, [r7, #7]
 6457 000c 1346     		mov	r3, r2
 6458 000e BB71     		strb	r3, [r7, #6]
1674:bluetooth_rxtx.c ****   while (y)
 6459              		.loc 1 1674 0
 6460 0010 0AE0     		b	.L301
 6461              	.L302:
 6462              	.LBB3:
1675:bluetooth_rxtx.c ****   {
1676:bluetooth_rxtx.c ****     u8 carry = x & y;
 6463              		.loc 1 1676 0
 6464 0012 FA79     		ldrb	r2, [r7, #7]
 6465 0014 BB79     		ldrb	r3, [r7, #6]
 6466 0016 1340     		ands	r3, r3, r2
 6467 0018 FB73     		strb	r3, [r7, #15]
1677:bluetooth_rxtx.c ****     x = x ^ y;
 6468              		.loc 1 1677 0
 6469 001a FA79     		ldrb	r2, [r7, #7]
 6470 001c BB79     		ldrb	r3, [r7, #6]
 6471 001e 5340     		eors	r3, r3, r2
 6472 0020 FB71     		strb	r3, [r7, #7]
1678:bluetooth_rxtx.c ****     y = carry << 1;
 6473              		.loc 1 1678 0
 6474 0022 FB7B     		ldrb	r3, [r7, #15]
 6475 0024 5B00     		lsls	r3, r3, #1
 6476 0026 BB71     		strb	r3, [r7, #6]
 6477              	.L301:
 6478              	.LBE3:
1674:bluetooth_rxtx.c ****   {
 6479              		.loc 1 1674 0
 6480 0028 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 6481 002a 002B     		cmp	r3, #0
 6482 002c F1D1     		bne	.L302
1679:bluetooth_rxtx.c ****   }
1680:bluetooth_rxtx.c ****   return x;
 6483              		.loc 1 1680 0
 6484 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
1681:bluetooth_rxtx.c **** }
 6485              		.loc 1 1681 0
 6486 0030 1846     		mov	r0, r3
 6487 0032 1437     		adds	r7, r7, #20
 6488              		.cfi_def_cfa_offset 4
 6489 0034 BD46     		mov	sp, r7
 6490              		.cfi_def_cfa_register 13
 6491              		@ sp needed
 6492 0036 5DF8047B 		ldr	r7, [sp], #4
 6493              		.cfi_restore 7
 6494              		.cfi_def_cfa_offset 0
 6495 003a 7047     		bx	lr
 6496              		.cfi_endproc
ARM GAS  /tmp/ccQUMSla.s 			page 143


 6497              	.LFE31:
 6499              		.section	.text.bt_stream_proposed,"ax",%progbits
 6500              		.align	2
 6501              		.global	bt_stream_proposed
 6502              		.thumb
 6503              		.thumb_func
 6505              	bt_stream_proposed:
 6506              	.LFB32:
1682:bluetooth_rxtx.c **** 
1683:bluetooth_rxtx.c **** // wpson
1684:bluetooth_rxtx.c **** void bt_stream_proposed()
1685:bluetooth_rxtx.c **** {
 6507              		.loc 1 1685 0
 6508              		.cfi_startproc
 6509              		@ args = 0, pretend = 0, frame = 64
 6510              		@ frame_needed = 1, uses_anonymous_args = 0
 6511 0000 90B5     		push	{r4, r7, lr}
 6512              		.cfi_def_cfa_offset 12
 6513              		.cfi_offset 4, -12
 6514              		.cfi_offset 7, -8
 6515              		.cfi_offset 14, -4
 6516 0002 91B0     		sub	sp, sp, #68
 6517              		.cfi_def_cfa_offset 80
 6518 0004 00AF     		add	r7, sp, #0
 6519              		.cfi_def_cfa_register 7
1686:bluetooth_rxtx.c **** 
1687:bluetooth_rxtx.c **** 	u8 epstat;
1688:bluetooth_rxtx.c **** //	u16 f;
1689:bluetooth_rxtx.c **** //	u8 buf[DMA_SIZE];
1690:bluetooth_rxtx.c **** 	u8 rssi[50];
1691:bluetooth_rxtx.c **** 	int i = 0;
 6520              		.loc 1 1691 0
 6521 0006 0023     		movs	r3, #0
 6522 0008 FB63     		str	r3, [r7, #60]
1692:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6523              		.loc 1 1692 0
 6524 000a 0023     		movs	r3, #0
 6525 000c FB63     		str	r3, [r7, #60]
 6526 000e 07E0     		b	.L305
 6527              	.L306:
1693:bluetooth_rxtx.c **** 		rssi[i] = 0;
 6528              		.loc 1 1693 0 discriminator 3
 6529 0010 3A46     		mov	r2, r7
 6530 0012 FB6B     		ldr	r3, [r7, #60]
 6531 0014 1344     		add	r3, r3, r2
 6532 0016 0022     		movs	r2, #0
 6533 0018 1A70     		strb	r2, [r3]
1692:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6534              		.loc 1 1692 0 discriminator 3
 6535 001a FB6B     		ldr	r3, [r7, #60]
 6536 001c 0133     		adds	r3, r3, #1
 6537 001e FB63     		str	r3, [r7, #60]
 6538              	.L305:
1692:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6539              		.loc 1 1692 0 is_stmt 0 discriminator 1
 6540 0020 FB6B     		ldr	r3, [r7, #60]
 6541 0022 312B     		cmp	r3, #49
ARM GAS  /tmp/ccQUMSla.s 			page 144


 6542 0024 F4DD     		ble	.L306
1694:bluetooth_rxtx.c **** //	u8 length = 50;
1695:bluetooth_rxtx.c **** 	int window = 0;
 6543              		.loc 1 1695 0 is_stmt 1
 6544 0026 0023     		movs	r3, #0
 6545 0028 BB63     		str	r3, [r7, #56]
1696:bluetooth_rxtx.c **** //	u8 index = 0;
1697:bluetooth_rxtx.c **** 	u8 old = 0;
 6546              		.loc 1 1697 0
 6547 002a 0023     		movs	r3, #0
 6548 002c 87F83730 		strb	r3, [r7, #55]
1698:bluetooth_rxtx.c **** 	u8 now = 0;
 6549              		.loc 1 1698 0
 6550 0030 0023     		movs	r3, #0
 6551 0032 87F83630 		strb	r3, [r7, #54]
1699:bluetooth_rxtx.c **** 	u8 diff = 0;
 6552              		.loc 1 1699 0
 6553 0036 0023     		movs	r3, #0
 6554 0038 87F83530 		strb	r3, [r7, #53]
1700:bluetooth_rxtx.c **** 	u8 k = 0;
 6555              		.loc 1 1700 0
 6556 003c 0023     		movs	r3, #0
 6557 003e 87F83330 		strb	r3, [r7, #51]
1701:bluetooth_rxtx.c **** 	u8 temp = 0;
 6558              		.loc 1 1701 0
 6559 0042 0023     		movs	r3, #0
 6560 0044 87F83230 		strb	r3, [r7, #50]
1702:bluetooth_rxtx.c **** 	u8 outage = 0;
 6561              		.loc 1 1702 0
 6562 0048 0023     		movs	r3, #0
 6563 004a 87F83430 		strb	r3, [r7, #52]
1703:bluetooth_rxtx.c **** //	TXLED_SET;
1704:bluetooth_rxtx.c **** 	queue_init();
 6564              		.loc 1 1704 0
 6565 004e FFF7FEFF 		bl	queue_init
1705:bluetooth_rxtx.c **** 
1706:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1707:bluetooth_rxtx.c **** 	PAEN_SET;
 6566              		.loc 1 1707 0
 6567 0052 734B     		ldr	r3, .L317
 6568 0054 8022     		movs	r2, #128
 6569 0056 1A60     		str	r2, [r3]
1708:bluetooth_rxtx.c **** //	HGM_SET;
1709:bluetooth_rxtx.c **** #endif
1710:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6570              		.loc 1 1710 0
 6571 0058 0D20     		movs	r0, #13
 6572 005a 47F6FF71 		movw	r1, #32767
 6573 005e FFF7FEFF 		bl	cc2400_set
1711:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6574              		.loc 1 1711 0
 6575 0062 1220     		movs	r0, #18
 6576 0064 42F62231 		movw	r1, #11042
 6577 0068 FFF7FEFF 		bl	cc2400_set
1712:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6578              		.loc 1 1712 0
 6579 006c 1420     		movs	r0, #20
ARM GAS  /tmp/ccQUMSla.s 			page 145


 6580 006e 41F24B21 		movw	r1, #4683
 6581 0072 FFF7FEFF 		bl	cc2400_set
1713:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6582              		.loc 1 1713 0
 6583 0076 2020     		movs	r0, #32
 6584 0078 40F26151 		movw	r1, #1377
 6585 007c FFF7FEFF 		bl	cc2400_set
1714:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6586              		.loc 1 1714 0
 6587 0080 0320     		movs	r0, #3
 6588 0082 4021     		movs	r1, #64
 6589 0084 FFF7FEFF 		bl	cc2400_set
1715:bluetooth_rxtx.c **** 
1716:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1717:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1718:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0x00ff);
1719:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x00ff);
1720:bluetooth_rxtx.c **** 	
1721:bluetooth_rxtx.c **** //	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
1722:bluetooth_rxtx.c **** //	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
1723:bluetooth_rxtx.c **** 	
1724:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6590              		.loc 1 1724 0
 6591 0088 00BF     		nop
 6592              	.L307:
 6593              		.loc 1 1724 0 is_stmt 0 discriminator 1
 6594 008a FFF7FEFF 		bl	cc2400_status
 6595 008e 0346     		mov	r3, r0
 6596 0090 03F04003 		and	r3, r3, #64
 6597 0094 002B     		cmp	r3, #0
 6598 0096 F8D0     		beq	.L307
1725:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6599              		.loc 1 1725 0 is_stmt 1
 6600 0098 00BF     		nop
 6601              	.L308:
 6602              		.loc 1 1725 0 is_stmt 0 discriminator 1
 6603 009a FFF7FEFF 		bl	cc2400_status
 6604 009e 0346     		mov	r3, r0
 6605 00a0 03F00403 		and	r3, r3, #4
 6606 00a4 002B     		cmp	r3, #0
 6607 00a6 F8D1     		bne	.L308
1726:bluetooth_rxtx.c **** 
1727:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6608              		.loc 1 1727 0 is_stmt 1
 6609 00a8 5E4B     		ldr	r3, .L317+4
 6610 00aa 1B88     		ldrh	r3, [r3]	@ movhi
 6611 00ac 9BB2     		uxth	r3, r3
 6612 00ae 013B     		subs	r3, r3, #1
 6613 00b0 9BB2     		uxth	r3, r3
 6614 00b2 0220     		movs	r0, #2
 6615 00b4 1946     		mov	r1, r3
 6616 00b6 FFF7FEFF 		bl	cc2400_set
1728:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6617              		.loc 1 1728 0
 6618 00ba 6120     		movs	r0, #97
 6619 00bc FFF7FEFF 		bl	cc2400_strobe
1729:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
ARM GAS  /tmp/ccQUMSla.s 			page 146


 6620              		.loc 1 1729 0
 6621 00c0 00BF     		nop
 6622              	.L309:
 6623              		.loc 1 1729 0 is_stmt 0 discriminator 1
 6624 00c2 FFF7FEFF 		bl	cc2400_status
 6625 00c6 0346     		mov	r3, r0
 6626 00c8 03F00403 		and	r3, r3, #4
 6627 00cc 002B     		cmp	r3, #0
 6628 00ce F8D0     		beq	.L309
1730:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6629              		.loc 1 1730 0 is_stmt 1
 6630 00d0 6220     		movs	r0, #98
 6631 00d2 FFF7FEFF 		bl	cc2400_strobe
1731:bluetooth_rxtx.c **** 	
1732:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_PROPOSED)
 6632              		.loc 1 1732 0
 6633 00d6 97E0     		b	.L310
 6634              	.L316:
1733:bluetooth_rxtx.c **** 	{
1734:bluetooth_rxtx.c **** 
1735:bluetooth_rxtx.c **** 			
1736:bluetooth_rxtx.c **** //		while (!(cc2400_status () & SYNC_RECEIVED));	
1737:bluetooth_rxtx.c **** 		window = 0;
 6635              		.loc 1 1737 0
 6636 00d8 0023     		movs	r3, #0
 6637 00da BB63     		str	r3, [r7, #56]
1738:bluetooth_rxtx.c **** 		old = 0;
 6638              		.loc 1 1738 0
 6639 00dc 0023     		movs	r3, #0
 6640 00de 87F83730 		strb	r3, [r7, #55]
1739:bluetooth_rxtx.c **** 		now = 0;
 6641              		.loc 1 1739 0
 6642 00e2 0023     		movs	r3, #0
 6643 00e4 87F83630 		strb	r3, [r7, #54]
1740:bluetooth_rxtx.c **** 		diff = 0;
 6644              		.loc 1 1740 0
 6645 00e8 0023     		movs	r3, #0
 6646 00ea 87F83530 		strb	r3, [r7, #53]
1741:bluetooth_rxtx.c **** 		
1742:bluetooth_rxtx.c **** 
1743:bluetooth_rxtx.c **** //		diff_ts = CLK100NS - first_ts;
1744:bluetooth_rxtx.c **** //wpson
1745:bluetooth_rxtx.c **** 		while (window < 8)
 6647              		.loc 1 1745 0
 6648 00ee 60E0     		b	.L311
 6649              	.L315:
1746:bluetooth_rxtx.c **** 		{	
1747:bluetooth_rxtx.c **** 			first_ts = CLK100NS;
 6650              		.loc 1 1747 0
 6651 00f0 4D4B     		ldr	r3, .L317+8
 6652 00f2 1B68     		ldr	r3, [r3]
 6653 00f4 C3F31303 		ubfx	r3, r3, #0, #20
 6654 00f8 40F63542 		movw	r2, #3125
 6655 00fc 02FB03F2 		mul	r2, r2, r3
 6656 0100 4A4B     		ldr	r3, .L317+12
 6657 0102 1B68     		ldr	r3, [r3]
 6658 0104 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccQUMSla.s 			page 147


 6659 0106 4A4A     		ldr	r2, .L317+16
 6660 0108 1360     		str	r3, [r2]
1748:bluetooth_rxtx.c **** 			now = cc2400_get_rev(FREQEST);	 
 6661              		.loc 1 1748 0
 6662 010a 0720     		movs	r0, #7
 6663 010c FFF7FEFF 		bl	cc2400_get_rev
 6664 0110 0346     		mov	r3, r0
 6665 0112 87F83630 		strb	r3, [r7, #54]
1749:bluetooth_rxtx.c **** 			diff = add (now, add (~old, 1)); // 5->8
 6666              		.loc 1 1749 0
 6667 0116 97F83730 		ldrb	r3, [r7, #55]
 6668 011a DB43     		mvns	r3, r3
 6669 011c DBB2     		uxtb	r3, r3
 6670 011e 1846     		mov	r0, r3
 6671 0120 0121     		movs	r1, #1
 6672 0122 FFF7FEFF 		bl	add
 6673 0126 0346     		mov	r3, r0
 6674 0128 1A46     		mov	r2, r3
 6675 012a 97F83630 		ldrb	r3, [r7, #54]	@ zero_extendqisi2
 6676 012e 1846     		mov	r0, r3
 6677 0130 1146     		mov	r1, r2
 6678 0132 FFF7FEFF 		bl	add
 6679 0136 0346     		mov	r3, r0
 6680 0138 87F83530 		strb	r3, [r7, #53]
1750:bluetooth_rxtx.c **** 			if (diff & 0x80) 
 6681              		.loc 1 1750 0
 6682 013c 97F83530 		ldrb	r3, [r7, #53]	@ zero_extendqisi2
 6683 0140 5BB2     		sxtb	r3, r3
 6684 0142 002B     		cmp	r3, #0
 6685 0144 0ADA     		bge	.L312
1751:bluetooth_rxtx.c **** 				diff = add (~diff, 1);	
 6686              		.loc 1 1751 0
 6687 0146 97F83530 		ldrb	r3, [r7, #53]
 6688 014a DB43     		mvns	r3, r3
 6689 014c DBB2     		uxtb	r3, r3
 6690 014e 1846     		mov	r0, r3
 6691 0150 0121     		movs	r1, #1
 6692 0152 FFF7FEFF 		bl	add
 6693 0156 0346     		mov	r3, r0
 6694 0158 87F83530 		strb	r3, [r7, #53]
 6695              	.L312:
1752:bluetooth_rxtx.c **** 
1753:bluetooth_rxtx.c **** 			if (diff < 0x03)
 6696              		.loc 1 1753 0
 6697 015c 97F83530 		ldrb	r3, [r7, #53]	@ zero_extendqisi2
 6698 0160 022B     		cmp	r3, #2
 6699 0162 03D8     		bhi	.L313
1754:bluetooth_rxtx.c **** 				window++;
 6700              		.loc 1 1754 0
 6701 0164 BB6B     		ldr	r3, [r7, #56]
 6702 0166 0133     		adds	r3, r3, #1
 6703 0168 BB63     		str	r3, [r7, #56]
 6704 016a 11E0     		b	.L314
 6705              	.L313:
1755:bluetooth_rxtx.c **** 			else
1756:bluetooth_rxtx.c **** 			{
1757:bluetooth_rxtx.c **** 				outage = add (outage, 1);
ARM GAS  /tmp/ccQUMSla.s 			page 148


 6706              		.loc 1 1757 0
 6707 016c 97F83430 		ldrb	r3, [r7, #52]	@ zero_extendqisi2
 6708 0170 1846     		mov	r0, r3
 6709 0172 0121     		movs	r1, #1
 6710 0174 FFF7FEFF 		bl	add
 6711 0178 0346     		mov	r3, r0
 6712 017a 87F83430 		strb	r3, [r7, #52]
1758:bluetooth_rxtx.c **** 				if (outage > 1)
 6713              		.loc 1 1758 0
 6714 017e 97F83430 		ldrb	r3, [r7, #52]	@ zero_extendqisi2
 6715 0182 012B     		cmp	r3, #1
 6716 0184 04D9     		bls	.L314
1759:bluetooth_rxtx.c **** 				{
1760:bluetooth_rxtx.c **** 					outage = 0;
 6717              		.loc 1 1760 0
 6718 0186 0023     		movs	r3, #0
 6719 0188 87F83430 		strb	r3, [r7, #52]
1761:bluetooth_rxtx.c **** 					window = 0;
 6720              		.loc 1 1761 0
 6721 018c 0023     		movs	r3, #0
 6722 018e BB63     		str	r3, [r7, #56]
 6723              	.L314:
1762:bluetooth_rxtx.c **** 				}
1763:bluetooth_rxtx.c **** 			}
1764:bluetooth_rxtx.c **** 			old = now;
 6724              		.loc 1 1764 0
 6725 0190 97F83630 		ldrb	r3, [r7, #54]
 6726 0194 87F83730 		strb	r3, [r7, #55]
1765:bluetooth_rxtx.c **** 			second_ts = CLK100NS;
 6727              		.loc 1 1765 0
 6728 0198 234B     		ldr	r3, .L317+8
 6729 019a 1B68     		ldr	r3, [r3]
 6730 019c C3F31303 		ubfx	r3, r3, #0, #20
 6731 01a0 40F63542 		movw	r2, #3125
 6732 01a4 02FB03F2 		mul	r2, r2, r3
 6733 01a8 204B     		ldr	r3, .L317+12
 6734 01aa 1B68     		ldr	r3, [r3]
 6735 01ac 1344     		add	r3, r3, r2
 6736 01ae 214A     		ldr	r2, .L317+20
 6737 01b0 1360     		str	r3, [r2]
 6738              	.L311:
1745:bluetooth_rxtx.c **** 		{	
 6739              		.loc 1 1745 0
 6740 01b2 BB6B     		ldr	r3, [r7, #56]
 6741 01b4 072B     		cmp	r3, #7
 6742 01b6 9BDD     		ble	.L315
1766:bluetooth_rxtx.c **** 		}
1767:bluetooth_rxtx.c **** 	
1768:bluetooth_rxtx.c **** 		rssi_avg = ((int8_t)cc2400_get_rev(RSSI) + (int8_t)cc2400_get_rev(RSSI))/2;
 6743              		.loc 1 1768 0
 6744 01b8 0620     		movs	r0, #6
 6745 01ba FFF7FEFF 		bl	cc2400_get_rev
 6746 01be 0346     		mov	r3, r0
 6747 01c0 DBB2     		uxtb	r3, r3
 6748 01c2 5CB2     		sxtb	r4, r3
 6749 01c4 0620     		movs	r0, #6
 6750 01c6 FFF7FEFF 		bl	cc2400_get_rev
ARM GAS  /tmp/ccQUMSla.s 			page 149


 6751 01ca 0346     		mov	r3, r0
 6752 01cc DBB2     		uxtb	r3, r3
 6753 01ce 5BB2     		sxtb	r3, r3
 6754 01d0 2344     		add	r3, r3, r4
 6755 01d2 DA0F     		lsrs	r2, r3, #31
 6756 01d4 1344     		add	r3, r3, r2
 6757 01d6 5B10     		asrs	r3, r3, #1
 6758 01d8 DAB2     		uxtb	r2, r3
 6759 01da 174B     		ldr	r3, .L317+24
 6760 01dc 1A70     		strb	r2, [r3]
1769:bluetooth_rxtx.c **** 		freq_avg = now;
 6761              		.loc 1 1769 0
 6762 01de 174A     		ldr	r2, .L317+28
 6763 01e0 97F83630 		ldrb	r3, [r7, #54]
 6764 01e4 1370     		strb	r3, [r2]
1770:bluetooth_rxtx.c **** 	
1771:bluetooth_rxtx.c **** 		diff_ts = second_ts - first_ts;
 6765              		.loc 1 1771 0
 6766 01e6 134B     		ldr	r3, .L317+20
 6767 01e8 1A68     		ldr	r2, [r3]
 6768 01ea 114B     		ldr	r3, .L317+16
 6769 01ec 1B68     		ldr	r3, [r3]
 6770 01ee D31A     		subs	r3, r2, r3
 6771 01f0 134A     		ldr	r2, .L317+32
 6772 01f2 1360     		str	r3, [r2]
1772:bluetooth_rxtx.c **** 		enqueue_proposed(FREQ_PACKET, rssi);
 6773              		.loc 1 1772 0
 6774 01f4 3B46     		mov	r3, r7
 6775 01f6 0720     		movs	r0, #7
 6776 01f8 1946     		mov	r1, r3
 6777 01fa FFF7FEFF 		bl	enqueue_proposed
1773:bluetooth_rxtx.c **** //		enqueue(FREQ_PACKET, rssi);
1774:bluetooth_rxtx.c **** 		handle_usb(clkn);
 6778              		.loc 1 1774 0
 6779 01fe 0A4B     		ldr	r3, .L317+8
 6780 0200 1B68     		ldr	r3, [r3]
 6781 0202 1846     		mov	r0, r3
 6782 0204 FFF7FEFF 		bl	handle_usb
 6783              	.L310:
1732:bluetooth_rxtx.c **** 	{
 6784              		.loc 1 1732 0
 6785 0208 0E4B     		ldr	r3, .L317+36
 6786 020a 1B78     		ldrb	r3, [r3]
 6787 020c DBB2     		uxtb	r3, r3
 6788 020e 0F2B     		cmp	r3, #15
 6789 0210 3FF462AF 		beq	.L316
1775:bluetooth_rxtx.c **** 
1776:bluetooth_rxtx.c **** //		first_ts = CLK100NS;
1777:bluetooth_rxtx.c **** //		while ((CLK100NS-first_ts)<3000)
1778:bluetooth_rxtx.c **** //		{};
1779:bluetooth_rxtx.c **** /*		cc2400_strobe (SRFOFF);
1780:bluetooth_rxtx.c **** 		while ((cc2400_status () & FS_LOCK));
1781:bluetooth_rxtx.c **** 
1782:bluetooth_rxtx.c **** 		while (!(cc2400_status () & XOSC16M_STABLE));
1783:bluetooth_rxtx.c **** 		
1784:bluetooth_rxtx.c **** 		cc2400_strobe (SFSON);
1785:bluetooth_rxtx.c **** 		while (!(cc2400_status () & FS_LOCK));
ARM GAS  /tmp/ccQUMSla.s 			page 150


1786:bluetooth_rxtx.c **** 
1787:bluetooth_rxtx.c **** 	
1788:bluetooth_rxtx.c **** //		msleep(500);	
1789:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
1790:bluetooth_rxtx.c **** */
1791:bluetooth_rxtx.c **** 	}
1792:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 6790              		.loc 1 1792 0
 6791 0214 0C4B     		ldr	r3, .L317+40
 6792 0216 0022     		movs	r2, #0
 6793 0218 1A70     		strb	r2, [r3]
1793:bluetooth_rxtx.c **** //	dio_ssp_stop ();
1794:bluetooth_rxtx.c **** //	cs_trigger_disable ();
1795:bluetooth_rxtx.c **** }
 6794              		.loc 1 1795 0
 6795 021a 4437     		adds	r7, r7, #68
 6796              		.cfi_def_cfa_offset 12
 6797 021c BD46     		mov	sp, r7
 6798              		.cfi_def_cfa_register 13
 6799              		@ sp needed
 6800 021e 90BD     		pop	{r4, r7, pc}
 6801              	.L318:
 6802              		.align	2
 6803              	.L317:
 6804 0220 58C00920 		.word	537509976
 6805 0224 00000000 		.word	channel
 6806 0228 00000000 		.word	clkn
 6807 022c 08400040 		.word	1073758216
 6808 0230 00000000 		.word	first_ts
 6809 0234 00000000 		.word	second_ts
 6810 0238 00000000 		.word	rssi_avg
 6811 023c 00000000 		.word	freq_avg
 6812 0240 00000000 		.word	diff_ts
 6813 0244 00000000 		.word	requested_mode
 6814 0248 00000000 		.word	mode
 6815              		.cfi_endproc
 6816              	.LFE32:
 6818              		.section	.text.bt_stream_freq,"ax",%progbits
 6819              		.align	2
 6820              		.global	bt_stream_freq
 6821              		.thumb
 6822              		.thumb_func
 6824              	bt_stream_freq:
 6825              	.LFB33:
1796:bluetooth_rxtx.c **** 
1797:bluetooth_rxtx.c **** 
1798:bluetooth_rxtx.c **** 
1799:bluetooth_rxtx.c **** // wpson
1800:bluetooth_rxtx.c **** void bt_stream_freq()
1801:bluetooth_rxtx.c **** {
 6826              		.loc 1 1801 0
 6827              		.cfi_startproc
 6828              		@ args = 0, pretend = 0, frame = 128
 6829              		@ frame_needed = 1, uses_anonymous_args = 0
 6830 0000 90B5     		push	{r4, r7, lr}
 6831              		.cfi_def_cfa_offset 12
 6832              		.cfi_offset 4, -12
ARM GAS  /tmp/ccQUMSla.s 			page 151


 6833              		.cfi_offset 7, -8
 6834              		.cfi_offset 14, -4
 6835 0002 A1B0     		sub	sp, sp, #132
 6836              		.cfi_def_cfa_offset 144
 6837 0004 00AF     		add	r7, sp, #0
 6838              		.cfi_def_cfa_register 7
1802:bluetooth_rxtx.c **** //	TXLED_SET;
1803:bluetooth_rxtx.c **** 	RXLED_CLR;
 6839              		.loc 1 1803 0
 6840 0006 B84B     		ldr	r3, .L346
 6841 0008 1022     		movs	r2, #16
 6842 000a 1A60     		str	r2, [r3]
1804:bluetooth_rxtx.c **** 	int i;
1805:bluetooth_rxtx.c **** 	
1806:bluetooth_rxtx.c **** 	u8 freq_buf[45];
1807:bluetooth_rxtx.c **** 	queue_init();
 6843              		.loc 1 1807 0
 6844 000c FFF7FEFF 		bl	queue_init
1808:bluetooth_rxtx.c **** 	dio_ssp_init();
 6845              		.loc 1 1808 0
 6846 0010 FFF7FEFF 		bl	dio_ssp_init
1809:bluetooth_rxtx.c **** 	dma_init_le();
 6847              		.loc 1 1809 0
 6848 0014 FFF7FEFF 		bl	dma_init_le
1810:bluetooth_rxtx.c **** 	dio_ssp_start();
 6849              		.loc 1 1810 0
 6850 0018 FFF7FEFF 		bl	dio_ssp_start
1811:bluetooth_rxtx.c **** 	
1812:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6851              		.loc 1 1812 0
 6852 001c 0D20     		movs	r0, #13
 6853 001e 47F6FF71 		movw	r1, #32767
 6854 0022 FFF7FEFF 		bl	cc2400_set
1813:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6855              		.loc 1 1813 0
 6856 0026 1220     		movs	r0, #18
 6857 0028 42F62231 		movw	r1, #11042
 6858 002c FFF7FEFF 		bl	cc2400_set
1814:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6859              		.loc 1 1814 0
 6860 0030 1420     		movs	r0, #20
 6861 0032 41F24B21 		movw	r1, #4683
 6862 0036 FFF7FEFF 		bl	cc2400_set
1815:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6863              		.loc 1 1815 0
 6864 003a 2020     		movs	r0, #32
 6865 003c 40F26151 		movw	r1, #1377
 6866 0040 FFF7FEFF 		bl	cc2400_set
1816:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6867              		.loc 1 1816 0
 6868 0044 0320     		movs	r0, #3
 6869 0046 4021     		movs	r1, #64
 6870 0048 FFF7FEFF 		bl	cc2400_set
1817:bluetooth_rxtx.c **** 
1818:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1819:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1820:bluetooth_rxtx.c **** 	
ARM GAS  /tmp/ccQUMSla.s 			page 152


1821:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 6871              		.loc 1 1821 0
 6872 004c A748     		ldr	r0, .L346+4
 6873 004e FFF7FEFF 		bl	rbit
 6874 0052 0346     		mov	r3, r0
 6875 0054 9BB2     		uxth	r3, r3
 6876 0056 2C20     		movs	r0, #44
 6877 0058 1946     		mov	r1, r3
 6878 005a FFF7FEFF 		bl	cc2400_set
1822:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 6879              		.loc 1 1822 0
 6880 005e A348     		ldr	r0, .L346+4
 6881 0060 FFF7FEFF 		bl	rbit
 6882 0064 0346     		mov	r3, r0
 6883 0066 1B0C     		lsrs	r3, r3, #16
 6884 0068 9BB2     		uxth	r3, r3
 6885 006a 2D20     		movs	r0, #45
 6886 006c 1946     		mov	r1, r3
 6887 006e FFF7FEFF 		bl	cc2400_set
1823:bluetooth_rxtx.c **** 	
1824:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1825:bluetooth_rxtx.c **** 	PAEN_SET;
 6888              		.loc 1 1825 0
 6889 0072 9F4B     		ldr	r3, .L346+8
 6890 0074 8022     		movs	r2, #128
 6891 0076 1A60     		str	r2, [r3]
1826:bluetooth_rxtx.c **** //	HGM_SET;
1827:bluetooth_rxtx.c **** #endif
1828:bluetooth_rxtx.c **** 
1829:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6892              		.loc 1 1829 0
 6893 0078 00BF     		nop
 6894              	.L320:
 6895              		.loc 1 1829 0 is_stmt 0 discriminator 1
 6896 007a FFF7FEFF 		bl	cc2400_status
 6897 007e 0346     		mov	r3, r0
 6898 0080 03F04003 		and	r3, r3, #64
 6899 0084 002B     		cmp	r3, #0
 6900 0086 F8D0     		beq	.L320
1830:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6901              		.loc 1 1830 0 is_stmt 1
 6902 0088 00BF     		nop
 6903              	.L321:
 6904              		.loc 1 1830 0 is_stmt 0 discriminator 1
 6905 008a FFF7FEFF 		bl	cc2400_status
 6906 008e 0346     		mov	r3, r0
 6907 0090 03F00403 		and	r3, r3, #4
 6908 0094 002B     		cmp	r3, #0
 6909 0096 F8D1     		bne	.L321
1831:bluetooth_rxtx.c **** 
1832:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6910              		.loc 1 1832 0 is_stmt 1
 6911 0098 964B     		ldr	r3, .L346+12
 6912 009a 1B88     		ldrh	r3, [r3]	@ movhi
 6913 009c 9BB2     		uxth	r3, r3
 6914 009e 013B     		subs	r3, r3, #1
 6915 00a0 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccQUMSla.s 			page 153


 6916 00a2 0220     		movs	r0, #2
 6917 00a4 1946     		mov	r1, r3
 6918 00a6 FFF7FEFF 		bl	cc2400_set
1833:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6919              		.loc 1 1833 0
 6920 00aa 6120     		movs	r0, #97
 6921 00ac FFF7FEFF 		bl	cc2400_strobe
1834:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6922              		.loc 1 1834 0
 6923 00b0 00BF     		nop
 6924              	.L322:
 6925              		.loc 1 1834 0 is_stmt 0 discriminator 1
 6926 00b2 FFF7FEFF 		bl	cc2400_status
 6927 00b6 0346     		mov	r3, r0
 6928 00b8 03F00403 		and	r3, r3, #4
 6929 00bc 002B     		cmp	r3, #0
 6930 00be F8D0     		beq	.L322
1835:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6931              		.loc 1 1835 0 is_stmt 1
 6932 00c0 6220     		movs	r0, #98
 6933 00c2 FFF7FEFF 		bl	cc2400_strobe
1836:bluetooth_rxtx.c **** 	
1837:bluetooth_rxtx.c **** //	cc2400_rx();
1838:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_FREQ) {
 6934              		.loc 1 1838 0
 6935 00c6 44E1     		b	.L323
 6936              	.L345:
 6937              	.LBB4:
1839:bluetooth_rxtx.c **** 		
1840:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 6938              		.loc 1 1840 0
 6939 00c8 00BF     		nop
 6940              	.L324:
 6941              		.loc 1 1840 0 is_stmt 0 discriminator 1
 6942 00ca FFF7FEFF 		bl	cc2400_status
 6943 00ce 0346     		mov	r3, r0
 6944 00d0 03F01003 		and	r3, r3, #16
 6945 00d4 002B     		cmp	r3, #0
 6946 00d6 F8D0     		beq	.L324
1841:bluetooth_rxtx.c **** 
1842:bluetooth_rxtx.c **** 
1843:bluetooth_rxtx.c **** /*		int out;
1844:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1845:bluetooth_rxtx.c ****                 if (rssi >= 128)
1846:bluetooth_rxtx.c ****                         out = rssi - 256;
1847:bluetooth_rxtx.c ****                 else
1848:bluetooth_rxtx.c ****                         out = rssi;
1849:bluetooth_rxtx.c ****                 if (out < 0)
1850:bluetooth_rxtx.c **** 		  goto rx_flush;
1851:bluetooth_rxtx.c **** */
1852:bluetooth_rxtx.c **** 
1853:bluetooth_rxtx.c **** 		for (i = 0; i < 45; i++)
 6947              		.loc 1 1853 0 is_stmt 1
 6948 00d8 0023     		movs	r3, #0
 6949 00da FB67     		str	r3, [r7, #124]
 6950 00dc 0DE0     		b	.L325
 6951              	.L326:
ARM GAS  /tmp/ccQUMSla.s 			page 154


1854:bluetooth_rxtx.c **** 		{
1855:bluetooth_rxtx.c **** 			freq_buf[i] = cc2400_get_rev(FREQEST);	
 6952              		.loc 1 1855 0 discriminator 3
 6953 00de 0720     		movs	r0, #7
 6954 00e0 FFF7FEFF 		bl	cc2400_get_rev
 6955 00e4 0346     		mov	r3, r0
 6956 00e6 1946     		mov	r1, r3
 6957 00e8 07F13402 		add	r2, r7, #52
 6958 00ec FB6F     		ldr	r3, [r7, #124]
 6959 00ee 1344     		add	r3, r3, r2
 6960 00f0 0A46     		mov	r2, r1
 6961 00f2 1A70     		strb	r2, [r3]
1853:bluetooth_rxtx.c **** 		{
 6962              		.loc 1 1853 0 discriminator 3
 6963 00f4 FB6F     		ldr	r3, [r7, #124]
 6964 00f6 0133     		adds	r3, r3, #1
 6965 00f8 FB67     		str	r3, [r7, #124]
 6966              	.L325:
1853:bluetooth_rxtx.c **** 		{
 6967              		.loc 1 1853 0 is_stmt 0 discriminator 1
 6968 00fa FB6F     		ldr	r3, [r7, #124]
 6969 00fc 2C2B     		cmp	r3, #44
 6970 00fe EEDD     		ble	.L326
1856:bluetooth_rxtx.c **** 		}
1857:bluetooth_rxtx.c **** 
1858:bluetooth_rxtx.c **** 
1859:bluetooth_rxtx.c **** 		while (!rx_tc);
 6971              		.loc 1 1859 0 is_stmt 1
 6972 0100 00BF     		nop
 6973              	.L327:
 6974              		.loc 1 1859 0 is_stmt 0 discriminator 1
 6975 0102 7D4B     		ldr	r3, .L346+16
 6976 0104 1B68     		ldr	r3, [r3]
 6977 0106 002B     		cmp	r3, #0
 6978 0108 FBD0     		beq	.L327
1860:bluetooth_rxtx.c **** 	
1861:bluetooth_rxtx.c **** 		RXLED_SET;
 6979              		.loc 1 1861 0 is_stmt 1
 6980 010a 7C4B     		ldr	r3, .L346+20
 6981 010c 1022     		movs	r2, #16
 6982 010e 1A60     		str	r2, [r3]
1862:bluetooth_rxtx.c **** 		if (rx_err) {
 6983              		.loc 1 1862 0
 6984 0110 7B4B     		ldr	r3, .L346+24
 6985 0112 1B68     		ldr	r3, [r3]
 6986 0114 002B     		cmp	r3, #0
 6987 0116 07D0     		beq	.L328
1863:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 6988              		.loc 1 1863 0
 6989 0118 7A4B     		ldr	r3, .L346+28
 6990 011a 1B78     		ldrb	r3, [r3]
 6991 011c DBB2     		uxtb	r3, r3
 6992 011e 43F00203 		orr	r3, r3, #2
 6993 0122 DAB2     		uxtb	r2, r3
 6994 0124 774B     		ldr	r3, .L346+28
 6995 0126 1A70     		strb	r2, [r3]
 6996              	.L328:
ARM GAS  /tmp/ccQUMSla.s 			page 155


1864:bluetooth_rxtx.c **** 		}	
1865:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6997              		.loc 1 1865 0
 6998 0128 734B     		ldr	r3, .L346+16
 6999 012a 1B68     		ldr	r3, [r3]
 7000 012c 012B     		cmp	r3, #1
 7001 012e 07D9     		bls	.L329
1866:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 7002              		.loc 1 1866 0
 7003 0130 744B     		ldr	r3, .L346+28
 7004 0132 1B78     		ldrb	r3, [r3]
 7005 0134 DBB2     		uxtb	r3, r3
 7006 0136 43F00103 		orr	r3, r3, #1
 7007 013a DAB2     		uxtb	r2, r3
 7008 013c 714B     		ldr	r3, .L346+28
 7009 013e 1A70     		strb	r2, [r3]
 7010              	.L329:
1867:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1868:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7011              		.loc 1 1868 0
 7012 0140 3B46     		mov	r3, r7
 7013 0142 BB67     		str	r3, [r7, #120]
1869:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7014              		.loc 1 1869 0
 7015 0144 704B     		ldr	r3, .L346+32
 7016 0146 1B68     		ldr	r3, [r3]
 7017 0148 3B60     		str	r3, [r7]
1870:bluetooth_rxtx.c **** 
1871:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 7018              		.loc 1 1871 0
 7019 014a 00BF     		nop
 7020              	.L331:
 7021              		.loc 1 1871 0 is_stmt 0 discriminator 2
 7022 014c 6F4B     		ldr	r3, .L346+36
 7023 014e 1B68     		ldr	r3, [r3]
 7024 0150 03F00103 		and	r3, r3, #1
 7025 0154 002B     		cmp	r3, #0
 7026 0156 03D0     		beq	.L330
 7027              		.loc 1 1871 0 discriminator 1
 7028 0158 694B     		ldr	r3, .L346+24
 7029 015a 1B68     		ldr	r3, [r3]
 7030 015c 002B     		cmp	r3, #0
 7031 015e F5D0     		beq	.L331
 7032              	.L330:
1872:bluetooth_rxtx.c ****                 
1873:bluetooth_rxtx.c **** 			
1874:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7033              		.loc 1 1874 0 is_stmt 1
 7034 0160 6B4A     		ldr	r2, .L346+40
 7035 0162 6B4B     		ldr	r3, .L346+40
 7036 0164 1B68     		ldr	r3, [r3]
 7037 0166 23F00103 		bic	r3, r3, #1
 7038 016a 1360     		str	r3, [r2]
1875:bluetooth_rxtx.c **** 	
1876:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7039              		.loc 1 1876 0
 7040 016c 614B     		ldr	r3, .L346+12
ARM GAS  /tmp/ccQUMSla.s 			page 156


 7041 016e 1B88     		ldrh	r3, [r3]	@ movhi
 7042 0170 9BB2     		uxth	r3, r3
 7043 0172 DBB2     		uxtb	r3, r3
 7044 0174 623B     		subs	r3, r3, #98
 7045 0176 DBB2     		uxtb	r3, r3
 7046 0178 1846     		mov	r0, r3
 7047 017a FFF7FEFF 		bl	btle_channel_index
 7048 017e 0346     		mov	r3, r0
 7049 0180 1A46     		mov	r2, r3
 7050 0182 1346     		mov	r3, r2
 7051 0184 5B00     		lsls	r3, r3, #1
 7052 0186 1344     		add	r3, r3, r2
 7053 0188 1B01     		lsls	r3, r3, #4
 7054 018a 624A     		ldr	r2, .L346+44
 7055 018c 1344     		add	r3, r3, r2
 7056 018e 7B67     		str	r3, [r7, #116]
1877:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 7057              		.loc 1 1877 0
 7058 0190 0023     		movs	r3, #0
 7059 0192 FB67     		str	r3, [r7, #124]
 7060 0194 34E0     		b	.L332
 7061              	.L335:
 7062              	.LBB5:
1878:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7063              		.loc 1 1878 0 discriminator 3
 7064 0196 604A     		ldr	r2, .L346+48
 7065 0198 FB6F     		ldr	r3, [r7, #124]
 7066 019a 1344     		add	r3, r3, r2
 7067 019c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7068 019e 1A06     		lsls	r2, r3, #24
1879:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7069              		.loc 1 1879 0 discriminator 3
 7070 01a0 FB6F     		ldr	r3, [r7, #124]
 7071 01a2 0133     		adds	r3, r3, #1
 7072 01a4 5C49     		ldr	r1, .L346+48
 7073 01a6 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7074 01a8 1B04     		lsls	r3, r3, #16
 7075 01aa 1A43     		orrs	r2, r2, r3
1880:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 7076              		.loc 1 1880 0 discriminator 3
 7077 01ac FB6F     		ldr	r3, [r7, #124]
 7078 01ae 0233     		adds	r3, r3, #2
 7079 01b0 5949     		ldr	r1, .L346+48
 7080 01b2 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7081 01b4 1B02     		lsls	r3, r3, #8
 7082 01b6 1343     		orrs	r3, r3, r2
1881:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 7083              		.loc 1 1881 0 discriminator 3
 7084 01b8 FA6F     		ldr	r2, [r7, #124]
 7085 01ba 0332     		adds	r2, r2, #3
 7086 01bc 5649     		ldr	r1, .L346+48
 7087 01be 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7088 01c0 1343     		orrs	r3, r3, r2
1878:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7089              		.loc 1 1878 0 discriminator 3
 7090 01c2 3B67     		str	r3, [r7, #112]
1882:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
ARM GAS  /tmp/ccQUMSla.s 			page 157


 7091              		.loc 1 1882 0 discriminator 3
 7092 01c4 FB6F     		ldr	r3, [r7, #124]
 7093 01c6 002B     		cmp	r3, #0
 7094 01c8 00DA     		bge	.L333
 7095 01ca 0333     		adds	r3, r3, #3
 7096              	.L333:
 7097 01cc 9B10     		asrs	r3, r3, #2
 7098 01ce 5C1C     		adds	r4, r3, #1
 7099 01d0 386F     		ldr	r0, [r7, #112]
 7100 01d2 FFF7FEFF 		bl	rbit
 7101 01d6 0146     		mov	r1, r0
 7102 01d8 FB6F     		ldr	r3, [r7, #124]
 7103 01da 002B     		cmp	r3, #0
 7104 01dc 00DA     		bge	.L334
 7105 01de 0333     		adds	r3, r3, #3
 7106              	.L334:
 7107 01e0 9B10     		asrs	r3, r3, #2
 7108 01e2 9B00     		lsls	r3, r3, #2
 7109 01e4 7A6F     		ldr	r2, [r7, #116]
 7110 01e6 1344     		add	r3, r3, r2
 7111 01e8 1B68     		ldr	r3, [r3]
 7112 01ea 81EA0302 		eor	r2, r1, r3
 7113 01ee A300     		lsls	r3, r4, #2
 7114 01f0 07F18001 		add	r1, r7, #128
 7115 01f4 0B44     		add	r3, r3, r1
 7116 01f6 43F8802C 		str	r2, [r3, #-128]
 7117              	.LBE5:
1877:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7118              		.loc 1 1877 0 discriminator 3
 7119 01fa FB6F     		ldr	r3, [r7, #124]
 7120 01fc 0433     		adds	r3, r3, #4
 7121 01fe FB67     		str	r3, [r7, #124]
 7122              	.L332:
1877:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7123              		.loc 1 1877 0 is_stmt 0 discriminator 1
 7124 0200 FB6F     		ldr	r3, [r7, #124]
 7125 0202 2B2B     		cmp	r3, #43
 7126 0204 C7DD     		ble	.L335
1883:bluetooth_rxtx.c **** 		}
1884:bluetooth_rxtx.c **** 
1885:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
1886:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
1887:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
1888:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
1889:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
1890:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1891:bluetooth_rxtx.c **** 		}
1892:bluetooth_rxtx.c **** */
1893:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7127              		.loc 1 1893 0 is_stmt 1
 7128 0206 BB6F     		ldr	r3, [r7, #120]
 7129 0208 0533     		adds	r3, r3, #5
 7130 020a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7131 020c 03F03F03 		and	r3, r3, #63
 7132 0210 0233     		adds	r3, r3, #2
 7133 0212 FB66     		str	r3, [r7, #108]
1894:bluetooth_rxtx.c **** 		
ARM GAS  /tmp/ccQUMSla.s 			page 158


1895:bluetooth_rxtx.c **** 		if (len > 39)
 7134              		.loc 1 1895 0
 7135 0214 FB6E     		ldr	r3, [r7, #108]
 7136 0216 272B     		cmp	r3, #39
 7137 0218 00D9     		bls	.L336
1896:bluetooth_rxtx.c **** 			goto rx_flush;
 7138              		.loc 1 1896 0
 7139 021a 40E0     		b	.L337
 7140              	.L336:
1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7141              		.loc 1 1898 0
 7142 021c 3A4B     		ldr	r3, .L346+32
 7143 021e D968     		ldr	r1, [r3, #12]
 7144 0220 BB6F     		ldr	r3, [r7, #120]
 7145 0222 1A1D     		adds	r2, r3, #4
 7146 0224 FB6E     		ldr	r3, [r7, #108]
 7147 0226 0846     		mov	r0, r1
 7148 0228 1146     		mov	r1, r2
 7149 022a 1A46     		mov	r2, r3
 7150 022c FFF7FEFF 		bl	btle_crcgen_lut
 7151 0230 B866     		str	r0, [r7, #104]
1899:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7152              		.loc 1 1899 0
 7153 0232 FB6E     		ldr	r3, [r7, #108]
 7154 0234 0633     		adds	r3, r3, #6
 7155 0236 BA6F     		ldr	r2, [r7, #120]
 7156 0238 1344     		add	r3, r3, r2
 7157 023a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7158 023c 1A04     		lsls	r2, r3, #16
1900:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 7159              		.loc 1 1900 0
 7160 023e FB6E     		ldr	r3, [r7, #108]
 7161 0240 0533     		adds	r3, r3, #5
 7162 0242 B96F     		ldr	r1, [r7, #120]
 7163 0244 0B44     		add	r3, r3, r1
 7164 0246 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7165 0248 1B02     		lsls	r3, r3, #8
 7166 024a 1343     		orrs	r3, r3, r2
1901:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 7167              		.loc 1 1901 0
 7168 024c FA6E     		ldr	r2, [r7, #108]
 7169 024e 0432     		adds	r2, r2, #4
 7170 0250 B96F     		ldr	r1, [r7, #120]
 7171 0252 0A44     		add	r2, r2, r1
 7172 0254 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7173 0256 1343     		orrs	r3, r3, r2
1899:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7174              		.loc 1 1899 0
 7175 0258 7B66     		str	r3, [r7, #100]
1902:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 7176              		.loc 1 1902 0
 7177 025a BA6E     		ldr	r2, [r7, #104]
 7178 025c 7B6E     		ldr	r3, [r7, #100]
 7179 025e 9A42     		cmp	r2, r3
 7180 0260 00D0     		beq	.L338
1903:bluetooth_rxtx.c ****                         goto rx_flush;
ARM GAS  /tmp/ccQUMSla.s 			page 159


 7181              		.loc 1 1903 0
 7182 0262 1CE0     		b	.L337
 7183              	.L338:
1904:bluetooth_rxtx.c **** 
1905:bluetooth_rxtx.c **** 		
1906:bluetooth_rxtx.c **** 		if (p[38] == 0x00 && p[39] == 0x3d)
 7184              		.loc 1 1906 0
 7185 0264 BB6F     		ldr	r3, [r7, #120]
 7186 0266 2633     		adds	r3, r3, #38
 7187 0268 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7188 026a 002B     		cmp	r3, #0
 7189 026c 14D1     		bne	.L339
 7190              		.loc 1 1906 0 is_stmt 0 discriminator 1
 7191 026e BB6F     		ldr	r3, [r7, #120]
 7192 0270 2733     		adds	r3, r3, #39
 7193 0272 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7194 0274 3D2B     		cmp	r3, #61
 7195 0276 0FD1     		bne	.L339
1907:bluetooth_rxtx.c **** 		{
1908:bluetooth_rxtx.c **** 			device_index = p[40];
 7196              		.loc 1 1908 0 is_stmt 1
 7197 0278 BB6F     		ldr	r3, [r7, #120]
 7198 027a 93F82820 		ldrb	r2, [r3, #40]	@ zero_extendqisi2
 7199 027e 274B     		ldr	r3, .L346+52
 7200 0280 1A70     		strb	r2, [r3]
1909:bluetooth_rxtx.c **** 			enqueue_freq (MESSAGE, freq_buf);
 7201              		.loc 1 1909 0
 7202 0282 07F13403 		add	r3, r7, #52
 7203 0286 0220     		movs	r0, #2
 7204 0288 1946     		mov	r1, r3
 7205 028a FFF7FEFF 		bl	enqueue_freq
1910:bluetooth_rxtx.c **** 			handle_usb(clkn);
 7206              		.loc 1 1910 0
 7207 028e 244B     		ldr	r3, .L346+56
 7208 0290 1B68     		ldr	r3, [r3]
 7209 0292 1846     		mov	r0, r3
 7210 0294 FFF7FEFF 		bl	handle_usb
 7211              	.L339:
1911:bluetooth_rxtx.c **** 		}
1912:bluetooth_rxtx.c **** 		RXLED_CLR;
 7212              		.loc 1 1912 0
 7213 0298 134B     		ldr	r3, .L346
 7214 029a 1022     		movs	r2, #16
 7215 029c 1A60     		str	r2, [r3]
 7216              	.L337:
1913:bluetooth_rxtx.c **** 	       
1914:bluetooth_rxtx.c **** 	rx_flush:
1915:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 7217              		.loc 1 1915 0
 7218 029e 6420     		movs	r0, #100
 7219 02a0 FFF7FEFF 		bl	cc2400_strobe
1916:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 7220              		.loc 1 1916 0
 7221 02a4 00BF     		nop
 7222              	.L340:
 7223              		.loc 1 1916 0 is_stmt 0 discriminator 1
 7224 02a6 FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/ccQUMSla.s 			page 160


 7225 02aa 0346     		mov	r3, r0
 7226 02ac 03F00403 		and	r3, r3, #4
 7227 02b0 002B     		cmp	r3, #0
 7228 02b2 F8D1     		bne	.L340
1917:bluetooth_rxtx.c **** 
1918:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 7229              		.loc 1 1918 0 is_stmt 1
 7230 02b4 00BF     		nop
 7231              	.L341:
 7232              		.loc 1 1918 0 is_stmt 0 discriminator 1
 7233 02b6 FFF7FEFF 		bl	cc2400_status
 7234 02ba 0346     		mov	r3, r0
 7235 02bc 03F04003 		and	r3, r3, #64
 7236 02c0 002B     		cmp	r3, #0
 7237 02c2 F8D0     		beq	.L341
1919:bluetooth_rxtx.c **** 
1920:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 7238              		.loc 1 1920 0 is_stmt 1
 7239 02c4 6120     		movs	r0, #97
 7240 02c6 FFF7FEFF 		bl	cc2400_strobe
1921:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 7241              		.loc 1 1921 0
 7242 02ca 00BF     		nop
 7243              	.L342:
 7244              		.loc 1 1921 0 is_stmt 0 discriminator 1
 7245 02cc FFF7FEFF 		bl	cc2400_status
 7246 02d0 0346     		mov	r3, r0
 7247 02d2 03F00403 		and	r3, r3, #4
 7248 02d6 002B     		cmp	r3, #0
 7249 02d8 F8D0     		beq	.L342
1922:bluetooth_rxtx.c **** 
1923:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7250              		.loc 1 1923 0 is_stmt 1
 7251 02da 0D4A     		ldr	r2, .L346+40
 7252 02dc 0C4B     		ldr	r3, .L346+40
 7253 02de 1B68     		ldr	r3, [r3]
 7254 02e0 23F00103 		bic	r3, r3, #1
 7255 02e4 1360     		str	r3, [r2]
1924:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7256              		.loc 1 1924 0
 7257 02e6 21E0     		b	.L343
 7258              	.L347:
 7259              		.align	2
 7260              	.L346:
 7261 02e8 3CC00920 		.word	537509948
 7262 02ec D6BE898E 		.word	-1903575338
 7263 02f0 58C00920 		.word	537509976
 7264 02f4 00000000 		.word	channel
 7265 02f8 00000000 		.word	rx_tc
 7266 02fc 38C00920 		.word	537509944
 7267 0300 00000000 		.word	rx_err
 7268 0304 00000000 		.word	status
 7269 0308 00000000 		.word	le
 7270 030c 10410050 		.word	1342193936
 7271 0310 24000340 		.word	1073938468
 7272 0314 10010000 		.word	whitening_word
 7273 0318 00000000 		.word	rxbuf1
ARM GAS  /tmp/ccQUMSla.s 			page 161


 7274 031c 00000000 		.word	device_index
 7275 0320 00000000 		.word	clkn
 7276              	.L344:
 7277              	.LBB6:
1925:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 7278              		.loc 1 1925 0
 7279 0324 0F4B     		ldr	r3, .L348
 7280 0326 1B68     		ldr	r3, [r3]
 7281 0328 87F86330 		strb	r3, [r7, #99]
 7282              	.L343:
 7283              	.LBE6:
1924:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7284              		.loc 1 1924 0
 7285 032c 0E4B     		ldr	r3, .L348+4
 7286 032e 1B68     		ldr	r3, [r3]
 7287 0330 03F00403 		and	r3, r3, #4
 7288 0334 002B     		cmp	r3, #0
 7289 0336 F5D1     		bne	.L344
1926:bluetooth_rxtx.c ****                 }
1927:bluetooth_rxtx.c **** 		dma_init_le();
 7290              		.loc 1 1927 0
 7291 0338 FFF7FEFF 		bl	dma_init_le
1928:bluetooth_rxtx.c **** 		dio_ssp_start();
 7292              		.loc 1 1928 0
 7293 033c FFF7FEFF 		bl	dio_ssp_start
1929:bluetooth_rxtx.c **** 		
1930:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 7294              		.loc 1 1930 0
 7295 0340 6220     		movs	r0, #98
 7296 0342 FFF7FEFF 		bl	cc2400_strobe
1931:bluetooth_rxtx.c **** 		rx_tc = 0;
 7297              		.loc 1 1931 0
 7298 0346 094B     		ldr	r3, .L348+8
 7299 0348 0022     		movs	r2, #0
 7300 034a 1A60     		str	r2, [r3]
1932:bluetooth_rxtx.c **** 		rx_err = 0;
 7301              		.loc 1 1932 0
 7302 034c 084B     		ldr	r3, .L348+12
 7303 034e 0022     		movs	r2, #0
 7304 0350 1A60     		str	r2, [r3]
 7305              	.L323:
 7306              	.LBE4:
1838:bluetooth_rxtx.c **** 		
 7307              		.loc 1 1838 0
 7308 0352 084B     		ldr	r3, .L348+16
 7309 0354 1B78     		ldrb	r3, [r3]
 7310 0356 DBB2     		uxtb	r3, r3
 7311 0358 0E2B     		cmp	r3, #14
 7312 035a 3FF4B5AE 		beq	.L345
1933:bluetooth_rxtx.c **** 	 
1934:bluetooth_rxtx.c **** 	
1935:bluetooth_rxtx.c **** 	}
1936:bluetooth_rxtx.c **** //	dio_ssp_stop ();
1937:bluetooth_rxtx.c **** //	cs_trigger_disable ();
1938:bluetooth_rxtx.c **** }
 7313              		.loc 1 1938 0
 7314 035e 8437     		adds	r7, r7, #132
ARM GAS  /tmp/ccQUMSla.s 			page 162


 7315              		.cfi_def_cfa_offset 12
 7316 0360 BD46     		mov	sp, r7
 7317              		.cfi_def_cfa_register 13
 7318              		@ sp needed
 7319 0362 90BD     		pop	{r4, r7, pc}
 7320              	.L349:
 7321              		.align	2
 7322              	.L348:
 7323 0364 08000340 		.word	1073938440
 7324 0368 0C000340 		.word	1073938444
 7325 036c 00000000 		.word	rx_tc
 7326 0370 00000000 		.word	rx_err
 7327 0374 00000000 		.word	requested_mode
 7328              		.cfi_endproc
 7329              	.LFE33:
 7331              		.section	.text.bt_stream_legacy,"ax",%progbits
 7332              		.align	2
 7333              		.global	bt_stream_legacy
 7334              		.thumb
 7335              		.thumb_func
 7337              	bt_stream_legacy:
 7338              	.LFB34:
1939:bluetooth_rxtx.c **** 
1940:bluetooth_rxtx.c **** 
1941:bluetooth_rxtx.c **** // wpson
1942:bluetooth_rxtx.c **** void bt_stream_legacy()
1943:bluetooth_rxtx.c **** {
 7339              		.loc 1 1943 0
 7340              		.cfi_startproc
 7341              		@ args = 0, pretend = 0, frame = 136
 7342              		@ frame_needed = 1, uses_anonymous_args = 0
 7343 0000 90B5     		push	{r4, r7, lr}
 7344              		.cfi_def_cfa_offset 12
 7345              		.cfi_offset 4, -12
 7346              		.cfi_offset 7, -8
 7347              		.cfi_offset 14, -4
 7348 0002 A3B0     		sub	sp, sp, #140
 7349              		.cfi_def_cfa_offset 152
 7350 0004 00AF     		add	r7, sp, #0
 7351              		.cfi_def_cfa_register 7
1944:bluetooth_rxtx.c **** //	TXLED_SET;
1945:bluetooth_rxtx.c **** 	RXLED_CLR;
 7352              		.loc 1 1945 0
 7353 0006 C04B     		ldr	r3, .L376
 7354 0008 1022     		movs	r2, #16
 7355 000a 1A60     		str	r2, [r3]
1946:bluetooth_rxtx.c **** 	int i;
1947:bluetooth_rxtx.c **** 	
1948:bluetooth_rxtx.c **** 	u8 rssi_buf[DMA_SIZE];
1949:bluetooth_rxtx.c **** 	queue_init();
 7356              		.loc 1 1949 0
 7357 000c FFF7FEFF 		bl	queue_init
1950:bluetooth_rxtx.c **** 	dio_ssp_init();
 7358              		.loc 1 1950 0
 7359 0010 FFF7FEFF 		bl	dio_ssp_init
1951:bluetooth_rxtx.c **** 	dma_init_le();
 7360              		.loc 1 1951 0
ARM GAS  /tmp/ccQUMSla.s 			page 163


 7361 0014 FFF7FEFF 		bl	dma_init_le
1952:bluetooth_rxtx.c **** 	dio_ssp_start();
 7362              		.loc 1 1952 0
 7363 0018 FFF7FEFF 		bl	dio_ssp_start
1953:bluetooth_rxtx.c **** 	
1954:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 7364              		.loc 1 1954 0
 7365 001c 0D20     		movs	r0, #13
 7366 001e 47F6FF71 		movw	r1, #32767
 7367 0022 FFF7FEFF 		bl	cc2400_set
1955:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 7368              		.loc 1 1955 0
 7369 0026 1220     		movs	r0, #18
 7370 0028 42F62231 		movw	r1, #11042
 7371 002c FFF7FEFF 		bl	cc2400_set
1956:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 7372              		.loc 1 1956 0
 7373 0030 1420     		movs	r0, #20
 7374 0032 41F24B21 		movw	r1, #4683
 7375 0036 FFF7FEFF 		bl	cc2400_set
1957:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 7376              		.loc 1 1957 0
 7377 003a 2020     		movs	r0, #32
 7378 003c 40F26151 		movw	r1, #1377
 7379 0040 FFF7FEFF 		bl	cc2400_set
1958:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 7380              		.loc 1 1958 0
 7381 0044 0320     		movs	r0, #3
 7382 0046 4021     		movs	r1, #64
 7383 0048 FFF7FEFF 		bl	cc2400_set
1959:bluetooth_rxtx.c **** 
1960:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1961:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1962:bluetooth_rxtx.c **** 	
1963:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 7384              		.loc 1 1963 0
 7385 004c AF48     		ldr	r0, .L376+4
 7386 004e FFF7FEFF 		bl	rbit
 7387 0052 0346     		mov	r3, r0
 7388 0054 9BB2     		uxth	r3, r3
 7389 0056 2C20     		movs	r0, #44
 7390 0058 1946     		mov	r1, r3
 7391 005a FFF7FEFF 		bl	cc2400_set
1964:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 7392              		.loc 1 1964 0
 7393 005e AB48     		ldr	r0, .L376+4
 7394 0060 FFF7FEFF 		bl	rbit
 7395 0064 0346     		mov	r3, r0
 7396 0066 1B0C     		lsrs	r3, r3, #16
 7397 0068 9BB2     		uxth	r3, r3
 7398 006a 2D20     		movs	r0, #45
 7399 006c 1946     		mov	r1, r3
 7400 006e FFF7FEFF 		bl	cc2400_set
1965:bluetooth_rxtx.c **** 	
1966:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1967:bluetooth_rxtx.c **** 	PAEN_SET;
 7401              		.loc 1 1967 0
ARM GAS  /tmp/ccQUMSla.s 			page 164


 7402 0072 A74B     		ldr	r3, .L376+8
 7403 0074 8022     		movs	r2, #128
 7404 0076 1A60     		str	r2, [r3]
1968:bluetooth_rxtx.c **** //	HGM_SET;
1969:bluetooth_rxtx.c **** #endif
1970:bluetooth_rxtx.c **** 
1971:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 7405              		.loc 1 1971 0
 7406 0078 00BF     		nop
 7407              	.L351:
 7408              		.loc 1 1971 0 is_stmt 0 discriminator 1
 7409 007a FFF7FEFF 		bl	cc2400_status
 7410 007e 0346     		mov	r3, r0
 7411 0080 03F04003 		and	r3, r3, #64
 7412 0084 002B     		cmp	r3, #0
 7413 0086 F8D0     		beq	.L351
1972:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 7414              		.loc 1 1972 0 is_stmt 1
 7415 0088 00BF     		nop
 7416              	.L352:
 7417              		.loc 1 1972 0 is_stmt 0 discriminator 1
 7418 008a FFF7FEFF 		bl	cc2400_status
 7419 008e 0346     		mov	r3, r0
 7420 0090 03F00403 		and	r3, r3, #4
 7421 0094 002B     		cmp	r3, #0
 7422 0096 F8D1     		bne	.L352
1973:bluetooth_rxtx.c **** 
1974:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 7423              		.loc 1 1974 0 is_stmt 1
 7424 0098 9E4B     		ldr	r3, .L376+12
 7425 009a 1B88     		ldrh	r3, [r3]	@ movhi
 7426 009c 9BB2     		uxth	r3, r3
 7427 009e 013B     		subs	r3, r3, #1
 7428 00a0 9BB2     		uxth	r3, r3
 7429 00a2 0220     		movs	r0, #2
 7430 00a4 1946     		mov	r1, r3
 7431 00a6 FFF7FEFF 		bl	cc2400_set
1975:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7432              		.loc 1 1975 0
 7433 00aa 6120     		movs	r0, #97
 7434 00ac FFF7FEFF 		bl	cc2400_strobe
1976:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7435              		.loc 1 1976 0
 7436 00b0 00BF     		nop
 7437              	.L353:
 7438              		.loc 1 1976 0 is_stmt 0 discriminator 1
 7439 00b2 FFF7FEFF 		bl	cc2400_status
 7440 00b6 0346     		mov	r3, r0
 7441 00b8 03F00403 		and	r3, r3, #4
 7442 00bc 002B     		cmp	r3, #0
 7443 00be F8D0     		beq	.L353
1977:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 7444              		.loc 1 1977 0 is_stmt 1
 7445 00c0 6220     		movs	r0, #98
 7446 00c2 FFF7FEFF 		bl	cc2400_strobe
1978:bluetooth_rxtx.c **** 	
1979:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
ARM GAS  /tmp/ccQUMSla.s 			page 165


 7447              		.loc 1 1979 0
 7448 00c6 56E1     		b	.L354
 7449              	.L375:
 7450              	.LBB7:
1980:bluetooth_rxtx.c **** 		
1981:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 7451              		.loc 1 1981 0
 7452 00c8 00BF     		nop
 7453              	.L355:
 7454              		.loc 1 1981 0 is_stmt 0 discriminator 1
 7455 00ca FFF7FEFF 		bl	cc2400_status
 7456 00ce 0346     		mov	r3, r0
 7457 00d0 03F01003 		and	r3, r3, #16
 7458 00d4 002B     		cmp	r3, #0
 7459 00d6 F8D0     		beq	.L355
1982:bluetooth_rxtx.c **** /*		int out;
1983:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1984:bluetooth_rxtx.c ****                 if (rssi >= 128)
1985:bluetooth_rxtx.c ****                         out = rssi - 256;
1986:bluetooth_rxtx.c ****                 else
1987:bluetooth_rxtx.c ****                         out = rssi;
1988:bluetooth_rxtx.c ****                 if (out < 0)
1989:bluetooth_rxtx.c **** 		  goto rx_flush;
1990:bluetooth_rxtx.c **** */
1991:bluetooth_rxtx.c **** 		rssi_sum = 0;
 7460              		.loc 1 1991 0 is_stmt 1
 7461 00d8 8F4B     		ldr	r3, .L376+16
 7462 00da 0022     		movs	r2, #0
 7463 00dc 1A60     		str	r2, [r3]
1992:bluetooth_rxtx.c **** 		rssi_count = 5;
 7464              		.loc 1 1992 0
 7465 00de 8F4B     		ldr	r3, .L376+20
 7466 00e0 0522     		movs	r2, #5
 7467 00e2 1A70     		strb	r2, [r3]
1993:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 7468              		.loc 1 1993 0
 7469 00e4 0023     		movs	r3, #0
 7470 00e6 C7F88430 		str	r3, [r7, #132]
 7471 00ea 11E0     		b	.L356
 7472              	.L357:
1994:bluetooth_rxtx.c **** 		{
1995:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 7473              		.loc 1 1995 0 discriminator 3
 7474 00ec 0620     		movs	r0, #6
 7475 00ee FFF7FEFF 		bl	cc2400_get
 7476 00f2 0346     		mov	r3, r0
 7477 00f4 1B0A     		lsrs	r3, r3, #8
 7478 00f6 9BB2     		uxth	r3, r3
 7479 00f8 DBB2     		uxtb	r3, r3
 7480 00fa 5AB2     		sxtb	r2, r3
 7481 00fc 864B     		ldr	r3, .L376+16
 7482 00fe 1B68     		ldr	r3, [r3]
 7483 0100 1344     		add	r3, r3, r2
 7484 0102 854A     		ldr	r2, .L376+16
 7485 0104 1360     		str	r3, [r2]
1993:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 7486              		.loc 1 1993 0 discriminator 3
ARM GAS  /tmp/ccQUMSla.s 			page 166


 7487 0106 D7F88430 		ldr	r3, [r7, #132]
 7488 010a 0133     		adds	r3, r3, #1
 7489 010c C7F88430 		str	r3, [r7, #132]
 7490              	.L356:
1993:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 7491              		.loc 1 1993 0 is_stmt 0 discriminator 1
 7492 0110 824B     		ldr	r3, .L376+20
 7493 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7494 0114 1A46     		mov	r2, r3
 7495 0116 D7F88430 		ldr	r3, [r7, #132]
 7496 011a 9A42     		cmp	r2, r3
 7497 011c E6DC     		bgt	.L357
1996:bluetooth_rxtx.c **** 		}
1997:bluetooth_rxtx.c **** 	
1998:bluetooth_rxtx.c **** 		while (!rx_tc);
 7498              		.loc 1 1998 0 is_stmt 1
 7499 011e 00BF     		nop
 7500              	.L358:
 7501              		.loc 1 1998 0 is_stmt 0 discriminator 1
 7502 0120 7F4B     		ldr	r3, .L376+24
 7503 0122 1B68     		ldr	r3, [r3]
 7504 0124 002B     		cmp	r3, #0
 7505 0126 FBD0     		beq	.L358
1999:bluetooth_rxtx.c **** 	
2000:bluetooth_rxtx.c **** 		RXLED_SET;
 7506              		.loc 1 2000 0 is_stmt 1
 7507 0128 7E4B     		ldr	r3, .L376+28
 7508 012a 1022     		movs	r2, #16
 7509 012c 1A60     		str	r2, [r3]
2001:bluetooth_rxtx.c **** 		if (rx_err) {
 7510              		.loc 1 2001 0
 7511 012e 7E4B     		ldr	r3, .L376+32
 7512 0130 1B68     		ldr	r3, [r3]
 7513 0132 002B     		cmp	r3, #0
 7514 0134 07D0     		beq	.L359
2002:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 7515              		.loc 1 2002 0
 7516 0136 7D4B     		ldr	r3, .L376+36
 7517 0138 1B78     		ldrb	r3, [r3]
 7518 013a DBB2     		uxtb	r3, r3
 7519 013c 43F00203 		orr	r3, r3, #2
 7520 0140 DAB2     		uxtb	r2, r3
 7521 0142 7A4B     		ldr	r3, .L376+36
 7522 0144 1A70     		strb	r2, [r3]
 7523              	.L359:
2003:bluetooth_rxtx.c **** 		}	
2004:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 7524              		.loc 1 2004 0
 7525 0146 764B     		ldr	r3, .L376+24
 7526 0148 1B68     		ldr	r3, [r3]
 7527 014a 012B     		cmp	r3, #1
 7528 014c 07D9     		bls	.L360
2005:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 7529              		.loc 1 2005 0
 7530 014e 774B     		ldr	r3, .L376+36
 7531 0150 1B78     		ldrb	r3, [r3]
 7532 0152 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccQUMSla.s 			page 167


 7533 0154 43F00103 		orr	r3, r3, #1
 7534 0158 DAB2     		uxtb	r2, r3
 7535 015a 744B     		ldr	r3, .L376+36
 7536 015c 1A70     		strb	r2, [r3]
 7537              	.L360:
2006:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2007:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7538              		.loc 1 2007 0
 7539 015e 3B1D     		adds	r3, r7, #4
 7540 0160 C7F88030 		str	r3, [r7, #128]
2008:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7541              		.loc 1 2008 0
 7542 0164 724B     		ldr	r3, .L376+40
 7543 0166 1B68     		ldr	r3, [r3]
 7544 0168 7B60     		str	r3, [r7, #4]
2009:bluetooth_rxtx.c **** 
2010:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 7545              		.loc 1 2010 0
 7546 016a 00BF     		nop
 7547              	.L362:
 7548              		.loc 1 2010 0 is_stmt 0 discriminator 2
 7549 016c 714B     		ldr	r3, .L376+44
 7550 016e 1B68     		ldr	r3, [r3]
 7551 0170 03F00103 		and	r3, r3, #1
 7552 0174 002B     		cmp	r3, #0
 7553 0176 03D0     		beq	.L361
 7554              		.loc 1 2010 0 discriminator 1
 7555 0178 6B4B     		ldr	r3, .L376+32
 7556 017a 1B68     		ldr	r3, [r3]
 7557 017c 002B     		cmp	r3, #0
 7558 017e F5D0     		beq	.L362
 7559              	.L361:
2011:bluetooth_rxtx.c ****                 
2012:bluetooth_rxtx.c **** 			
2013:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7560              		.loc 1 2013 0 is_stmt 1
 7561 0180 6D4A     		ldr	r2, .L376+48
 7562 0182 6D4B     		ldr	r3, .L376+48
 7563 0184 1B68     		ldr	r3, [r3]
 7564 0186 23F00103 		bic	r3, r3, #1
 7565 018a 1360     		str	r3, [r2]
2014:bluetooth_rxtx.c **** 	
2015:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7566              		.loc 1 2015 0
 7567 018c 614B     		ldr	r3, .L376+12
 7568 018e 1B88     		ldrh	r3, [r3]	@ movhi
 7569 0190 9BB2     		uxth	r3, r3
 7570 0192 DBB2     		uxtb	r3, r3
 7571 0194 623B     		subs	r3, r3, #98
 7572 0196 DBB2     		uxtb	r3, r3
 7573 0198 1846     		mov	r0, r3
 7574 019a FFF7FEFF 		bl	btle_channel_index
 7575 019e 0346     		mov	r3, r0
 7576 01a0 1A46     		mov	r2, r3
 7577 01a2 1346     		mov	r3, r2
 7578 01a4 5B00     		lsls	r3, r3, #1
 7579 01a6 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccQUMSla.s 			page 168


 7580 01a8 1B01     		lsls	r3, r3, #4
 7581 01aa 644A     		ldr	r2, .L376+52
 7582 01ac 1344     		add	r3, r3, r2
 7583 01ae FB67     		str	r3, [r7, #124]
2016:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 7584              		.loc 1 2016 0
 7585 01b0 0023     		movs	r3, #0
 7586 01b2 C7F88430 		str	r3, [r7, #132]
 7587 01b6 3CE0     		b	.L363
 7588              	.L366:
 7589              	.LBB8:
2017:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7590              		.loc 1 2017 0 discriminator 3
 7591 01b8 614A     		ldr	r2, .L376+56
 7592 01ba D7F88430 		ldr	r3, [r7, #132]
 7593 01be 1344     		add	r3, r3, r2
 7594 01c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7595 01c2 1A06     		lsls	r2, r3, #24
2018:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7596              		.loc 1 2018 0 discriminator 3
 7597 01c4 D7F88430 		ldr	r3, [r7, #132]
 7598 01c8 0133     		adds	r3, r3, #1
 7599 01ca 5D49     		ldr	r1, .L376+56
 7600 01cc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7601 01ce 1B04     		lsls	r3, r3, #16
 7602 01d0 1A43     		orrs	r2, r2, r3
2019:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 7603              		.loc 1 2019 0 discriminator 3
 7604 01d2 D7F88430 		ldr	r3, [r7, #132]
 7605 01d6 0233     		adds	r3, r3, #2
 7606 01d8 5949     		ldr	r1, .L376+56
 7607 01da CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7608 01dc 1B02     		lsls	r3, r3, #8
 7609 01de 1343     		orrs	r3, r3, r2
2020:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 7610              		.loc 1 2020 0 discriminator 3
 7611 01e0 D7F88420 		ldr	r2, [r7, #132]
 7612 01e4 0332     		adds	r2, r2, #3
 7613 01e6 5649     		ldr	r1, .L376+56
 7614 01e8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7615 01ea 1343     		orrs	r3, r3, r2
2017:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7616              		.loc 1 2017 0 discriminator 3
 7617 01ec BB67     		str	r3, [r7, #120]
2021:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 7618              		.loc 1 2021 0 discriminator 3
 7619 01ee D7F88430 		ldr	r3, [r7, #132]
 7620 01f2 002B     		cmp	r3, #0
 7621 01f4 00DA     		bge	.L364
 7622 01f6 0333     		adds	r3, r3, #3
 7623              	.L364:
 7624 01f8 9B10     		asrs	r3, r3, #2
 7625 01fa 5C1C     		adds	r4, r3, #1
 7626 01fc B86F     		ldr	r0, [r7, #120]
 7627 01fe FFF7FEFF 		bl	rbit
 7628 0202 0146     		mov	r1, r0
 7629 0204 D7F88430 		ldr	r3, [r7, #132]
ARM GAS  /tmp/ccQUMSla.s 			page 169


 7630 0208 002B     		cmp	r3, #0
 7631 020a 00DA     		bge	.L365
 7632 020c 0333     		adds	r3, r3, #3
 7633              	.L365:
 7634 020e 9B10     		asrs	r3, r3, #2
 7635 0210 9B00     		lsls	r3, r3, #2
 7636 0212 FA6F     		ldr	r2, [r7, #124]
 7637 0214 1344     		add	r3, r3, r2
 7638 0216 1B68     		ldr	r3, [r3]
 7639 0218 81EA0302 		eor	r2, r1, r3
 7640 021c A300     		lsls	r3, r4, #2
 7641 021e 07F18801 		add	r1, r7, #136
 7642 0222 0B44     		add	r3, r3, r1
 7643 0224 43F8842C 		str	r2, [r3, #-132]
 7644              	.LBE8:
2016:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7645              		.loc 1 2016 0 discriminator 3
 7646 0228 D7F88430 		ldr	r3, [r7, #132]
 7647 022c 0433     		adds	r3, r3, #4
 7648 022e C7F88430 		str	r3, [r7, #132]
 7649              	.L363:
2016:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7650              		.loc 1 2016 0 is_stmt 0 discriminator 1
 7651 0232 D7F88430 		ldr	r3, [r7, #132]
 7652 0236 2B2B     		cmp	r3, #43
 7653 0238 BEDD     		ble	.L366
2022:bluetooth_rxtx.c **** 		}
2023:bluetooth_rxtx.c **** 
2024:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2025:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2026:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2027:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2028:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2029:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2030:bluetooth_rxtx.c **** 		}
2031:bluetooth_rxtx.c **** */
2032:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7654              		.loc 1 2032 0 is_stmt 1
 7655 023a D7F88030 		ldr	r3, [r7, #128]
 7656 023e 0533     		adds	r3, r3, #5
 7657 0240 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7658 0242 03F03F03 		and	r3, r3, #63
 7659 0246 0233     		adds	r3, r3, #2
 7660 0248 7B67     		str	r3, [r7, #116]
2033:bluetooth_rxtx.c **** 		
2034:bluetooth_rxtx.c **** 		if (len > 39)
 7661              		.loc 1 2034 0
 7662 024a 7B6F     		ldr	r3, [r7, #116]
 7663 024c 272B     		cmp	r3, #39
 7664 024e 00D9     		bls	.L367
2035:bluetooth_rxtx.c **** 			goto rx_flush;
 7665              		.loc 1 2035 0
 7666 0250 34E0     		b	.L368
 7667              	.L367:
2036:bluetooth_rxtx.c **** 
2037:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7668              		.loc 1 2037 0
ARM GAS  /tmp/ccQUMSla.s 			page 170


 7669 0252 374B     		ldr	r3, .L376+40
 7670 0254 D968     		ldr	r1, [r3, #12]
 7671 0256 D7F88030 		ldr	r3, [r7, #128]
 7672 025a 1A1D     		adds	r2, r3, #4
 7673 025c 7B6F     		ldr	r3, [r7, #116]
 7674 025e 0846     		mov	r0, r1
 7675 0260 1146     		mov	r1, r2
 7676 0262 1A46     		mov	r2, r3
 7677 0264 FFF7FEFF 		bl	btle_crcgen_lut
 7678 0268 3867     		str	r0, [r7, #112]
2038:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7679              		.loc 1 2038 0
 7680 026a 7B6F     		ldr	r3, [r7, #116]
 7681 026c 0633     		adds	r3, r3, #6
 7682 026e D7F88020 		ldr	r2, [r7, #128]
 7683 0272 1344     		add	r3, r3, r2
 7684 0274 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7685 0276 1A04     		lsls	r2, r3, #16
2039:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 7686              		.loc 1 2039 0
 7687 0278 7B6F     		ldr	r3, [r7, #116]
 7688 027a 0533     		adds	r3, r3, #5
 7689 027c D7F88010 		ldr	r1, [r7, #128]
 7690 0280 0B44     		add	r3, r3, r1
 7691 0282 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7692 0284 1B02     		lsls	r3, r3, #8
 7693 0286 1343     		orrs	r3, r3, r2
2040:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 7694              		.loc 1 2040 0
 7695 0288 7A6F     		ldr	r2, [r7, #116]
 7696 028a 0432     		adds	r2, r2, #4
 7697 028c D7F88010 		ldr	r1, [r7, #128]
 7698 0290 0A44     		add	r2, r2, r1
 7699 0292 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7700 0294 1343     		orrs	r3, r3, r2
2038:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7701              		.loc 1 2038 0
 7702 0296 FB66     		str	r3, [r7, #108]
2041:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 7703              		.loc 1 2041 0
 7704 0298 3A6F     		ldr	r2, [r7, #112]
 7705 029a FB6E     		ldr	r3, [r7, #108]
 7706 029c 9A42     		cmp	r2, r3
 7707 029e 00D0     		beq	.L369
2042:bluetooth_rxtx.c ****                         goto rx_flush;
 7708              		.loc 1 2042 0
 7709 02a0 0CE0     		b	.L368
 7710              	.L369:
2043:bluetooth_rxtx.c **** 
2044:bluetooth_rxtx.c **** 
2045:bluetooth_rxtx.c **** 		enqueue_legacy (BR_PACKET, (uint8_t*)packet);
 7711              		.loc 1 2045 0
 7712 02a2 3B1D     		adds	r3, r7, #4
 7713 02a4 0020     		movs	r0, #0
 7714 02a6 1946     		mov	r1, r3
 7715 02a8 FFF7FEFF 		bl	enqueue_legacy
2046:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
ARM GAS  /tmp/ccQUMSla.s 			page 171


2047:bluetooth_rxtx.c **** 		handle_usb(clkn);
 7716              		.loc 1 2047 0
 7717 02ac 254B     		ldr	r3, .L376+60
 7718 02ae 1B68     		ldr	r3, [r3]
 7719 02b0 1846     		mov	r0, r3
 7720 02b2 FFF7FEFF 		bl	handle_usb
2048:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
2049:bluetooth_rxtx.c **** //		handle_usb(clkn);
2050:bluetooth_rxtx.c **** 		RXLED_CLR;
 7721              		.loc 1 2050 0
 7722 02b6 144B     		ldr	r3, .L376
 7723 02b8 1022     		movs	r2, #16
 7724 02ba 1A60     		str	r2, [r3]
 7725              	.L368:
2051:bluetooth_rxtx.c **** 	       
2052:bluetooth_rxtx.c **** 	rx_flush:
2053:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 7726              		.loc 1 2053 0
 7727 02bc 6420     		movs	r0, #100
 7728 02be FFF7FEFF 		bl	cc2400_strobe
2054:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 7729              		.loc 1 2054 0
 7730 02c2 00BF     		nop
 7731              	.L370:
 7732              		.loc 1 2054 0 is_stmt 0 discriminator 1
 7733 02c4 FFF7FEFF 		bl	cc2400_status
 7734 02c8 0346     		mov	r3, r0
 7735 02ca 03F00403 		and	r3, r3, #4
 7736 02ce 002B     		cmp	r3, #0
 7737 02d0 F8D1     		bne	.L370
2055:bluetooth_rxtx.c **** 
2056:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 7738              		.loc 1 2056 0 is_stmt 1
 7739 02d2 00BF     		nop
 7740              	.L371:
 7741              		.loc 1 2056 0 is_stmt 0 discriminator 1
 7742 02d4 FFF7FEFF 		bl	cc2400_status
 7743 02d8 0346     		mov	r3, r0
 7744 02da 03F04003 		and	r3, r3, #64
 7745 02de 002B     		cmp	r3, #0
 7746 02e0 F8D0     		beq	.L371
2057:bluetooth_rxtx.c **** 
2058:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 7747              		.loc 1 2058 0 is_stmt 1
 7748 02e2 6120     		movs	r0, #97
 7749 02e4 FFF7FEFF 		bl	cc2400_strobe
2059:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 7750              		.loc 1 2059 0
 7751 02e8 00BF     		nop
 7752              	.L372:
 7753              		.loc 1 2059 0 is_stmt 0 discriminator 1
 7754 02ea FFF7FEFF 		bl	cc2400_status
 7755 02ee 0346     		mov	r3, r0
 7756 02f0 03F00403 		and	r3, r3, #4
 7757 02f4 002B     		cmp	r3, #0
 7758 02f6 F8D0     		beq	.L372
2060:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 172


2061:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7759              		.loc 1 2061 0 is_stmt 1
 7760 02f8 0F4A     		ldr	r2, .L376+48
 7761 02fa 0F4B     		ldr	r3, .L376+48
 7762 02fc 1B68     		ldr	r3, [r3]
 7763 02fe 23F00103 		bic	r3, r3, #1
 7764 0302 1360     		str	r3, [r2]
2062:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7765              		.loc 1 2062 0
 7766 0304 24E0     		b	.L373
 7767              	.L377:
 7768 0306 00BF     		.align	2
 7769              	.L376:
 7770 0308 3CC00920 		.word	537509948
 7771 030c D6BE898E 		.word	-1903575338
 7772 0310 58C00920 		.word	537509976
 7773 0314 00000000 		.word	channel
 7774 0318 00000000 		.word	rssi_sum
 7775 031c 00000000 		.word	rssi_count
 7776 0320 00000000 		.word	rx_tc
 7777 0324 38C00920 		.word	537509944
 7778 0328 00000000 		.word	rx_err
 7779 032c 00000000 		.word	status
 7780 0330 00000000 		.word	le
 7781 0334 10410050 		.word	1342193936
 7782 0338 24000340 		.word	1073938468
 7783 033c 10010000 		.word	whitening_word
 7784 0340 00000000 		.word	rxbuf1
 7785 0344 00000000 		.word	clkn
 7786              	.L374:
 7787              	.LBB9:
2063:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 7788              		.loc 1 2063 0
 7789 0348 114B     		ldr	r3, .L378
 7790 034a 1B68     		ldr	r3, [r3]
 7791 034c 87F86B30 		strb	r3, [r7, #107]
 7792              	.L373:
 7793              	.LBE9:
2062:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7794              		.loc 1 2062 0
 7795 0350 104B     		ldr	r3, .L378+4
 7796 0352 1B68     		ldr	r3, [r3]
 7797 0354 03F00403 		and	r3, r3, #4
 7798 0358 002B     		cmp	r3, #0
 7799 035a F5D1     		bne	.L374
2064:bluetooth_rxtx.c ****                 }
2065:bluetooth_rxtx.c **** 		dma_init_le();
 7800              		.loc 1 2065 0
 7801 035c FFF7FEFF 		bl	dma_init_le
2066:bluetooth_rxtx.c **** 		dio_ssp_start();
 7802              		.loc 1 2066 0
 7803 0360 FFF7FEFF 		bl	dio_ssp_start
2067:bluetooth_rxtx.c **** 		
2068:bluetooth_rxtx.c **** //              msleep(500);    
2069:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 7804              		.loc 1 2069 0
 7805 0364 6220     		movs	r0, #98
ARM GAS  /tmp/ccQUMSla.s 			page 173


 7806 0366 FFF7FEFF 		bl	cc2400_strobe
2070:bluetooth_rxtx.c **** 		rx_tc = 0;
 7807              		.loc 1 2070 0
 7808 036a 0B4B     		ldr	r3, .L378+8
 7809 036c 0022     		movs	r2, #0
 7810 036e 1A60     		str	r2, [r3]
2071:bluetooth_rxtx.c **** 		rx_err = 0;
 7811              		.loc 1 2071 0
 7812 0370 0A4B     		ldr	r3, .L378+12
 7813 0372 0022     		movs	r2, #0
 7814 0374 1A60     		str	r2, [r3]
 7815              	.L354:
 7816              	.LBE7:
1979:bluetooth_rxtx.c **** 		
 7817              		.loc 1 1979 0
 7818 0376 0A4B     		ldr	r3, .L378+16
 7819 0378 1B78     		ldrb	r3, [r3]
 7820 037a DBB2     		uxtb	r3, r3
 7821 037c 012B     		cmp	r3, #1
 7822 037e 3FF4A3AE 		beq	.L375
2072:bluetooth_rxtx.c **** 	 
2073:bluetooth_rxtx.c **** 	
2074:bluetooth_rxtx.c **** 	}
2075:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 7823              		.loc 1 2075 0
 7824 0382 FFF7FEFF 		bl	dio_ssp_stop
2076:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 7825              		.loc 1 2076 0
 7826 0386 FFF7FEFF 		bl	cs_trigger_disable
2077:bluetooth_rxtx.c **** }
 7827              		.loc 1 2077 0
 7828 038a 8C37     		adds	r7, r7, #140
 7829              		.cfi_def_cfa_offset 12
 7830 038c BD46     		mov	sp, r7
 7831              		.cfi_def_cfa_register 13
 7832              		@ sp needed
 7833 038e 90BD     		pop	{r4, r7, pc}
 7834              	.L379:
 7835              		.align	2
 7836              	.L378:
 7837 0390 08000340 		.word	1073938440
 7838 0394 0C000340 		.word	1073938444
 7839 0398 00000000 		.word	rx_tc
 7840 039c 00000000 		.word	rx_err
 7841 03a0 00000000 		.word	requested_mode
 7842              		.cfi_endproc
 7843              	.LFE34:
 7845              		.section	.text.bt_stream_rx,"ax",%progbits
 7846              		.align	2
 7847              		.global	bt_stream_rx
 7848              		.thumb
 7849              		.thumb_func
 7851              	bt_stream_rx:
 7852              	.LFB35:
2078:bluetooth_rxtx.c **** 
2079:bluetooth_rxtx.c **** 
2080:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 174


2081:bluetooth_rxtx.c **** 
2082:bluetooth_rxtx.c **** // wpson
2083:bluetooth_rxtx.c **** void bt_stream_rx()
2084:bluetooth_rxtx.c **** {
 7853              		.loc 1 2084 0
 7854              		.cfi_startproc
 7855              		@ args = 0, pretend = 0, frame = 136
 7856              		@ frame_needed = 1, uses_anonymous_args = 0
 7857 0000 90B5     		push	{r4, r7, lr}
 7858              		.cfi_def_cfa_offset 12
 7859              		.cfi_offset 4, -12
 7860              		.cfi_offset 7, -8
 7861              		.cfi_offset 14, -4
 7862 0002 A3B0     		sub	sp, sp, #140
 7863              		.cfi_def_cfa_offset 152
 7864 0004 00AF     		add	r7, sp, #0
 7865              		.cfi_def_cfa_register 7
2085:bluetooth_rxtx.c **** //	TXLED_SET;
2086:bluetooth_rxtx.c **** 	RXLED_CLR;
 7866              		.loc 1 2086 0
 7867 0006 C04B     		ldr	r3, .L406
 7868 0008 1022     		movs	r2, #16
 7869 000a 1A60     		str	r2, [r3]
2087:bluetooth_rxtx.c **** 	int i;
2088:bluetooth_rxtx.c **** 	
2089:bluetooth_rxtx.c **** 	u8 rssi_buf[DMA_SIZE];
2090:bluetooth_rxtx.c **** 	queue_init();
 7870              		.loc 1 2090 0
 7871 000c FFF7FEFF 		bl	queue_init
2091:bluetooth_rxtx.c **** 	dio_ssp_init();
 7872              		.loc 1 2091 0
 7873 0010 FFF7FEFF 		bl	dio_ssp_init
2092:bluetooth_rxtx.c **** 	dma_init_le();
 7874              		.loc 1 2092 0
 7875 0014 FFF7FEFF 		bl	dma_init_le
2093:bluetooth_rxtx.c **** 	dio_ssp_start();
 7876              		.loc 1 2093 0
 7877 0018 FFF7FEFF 		bl	dio_ssp_start
2094:bluetooth_rxtx.c **** 	
2095:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 7878              		.loc 1 2095 0
 7879 001c 0D20     		movs	r0, #13
 7880 001e 47F6FF71 		movw	r1, #32767
 7881 0022 FFF7FEFF 		bl	cc2400_set
2096:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 7882              		.loc 1 2096 0
 7883 0026 1220     		movs	r0, #18
 7884 0028 42F62231 		movw	r1, #11042
 7885 002c FFF7FEFF 		bl	cc2400_set
2097:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 7886              		.loc 1 2097 0
 7887 0030 1420     		movs	r0, #20
 7888 0032 41F24B21 		movw	r1, #4683
 7889 0036 FFF7FEFF 		bl	cc2400_set
2098:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 7890              		.loc 1 2098 0
 7891 003a 2020     		movs	r0, #32
ARM GAS  /tmp/ccQUMSla.s 			page 175


 7892 003c 40F26151 		movw	r1, #1377
 7893 0040 FFF7FEFF 		bl	cc2400_set
2099:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 7894              		.loc 1 2099 0
 7895 0044 0320     		movs	r0, #3
 7896 0046 4021     		movs	r1, #64
 7897 0048 FFF7FEFF 		bl	cc2400_set
2100:bluetooth_rxtx.c **** 
2101:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2102:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2103:bluetooth_rxtx.c **** 	
2104:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 7898              		.loc 1 2104 0
 7899 004c AF48     		ldr	r0, .L406+4
 7900 004e FFF7FEFF 		bl	rbit
 7901 0052 0346     		mov	r3, r0
 7902 0054 9BB2     		uxth	r3, r3
 7903 0056 2C20     		movs	r0, #44
 7904 0058 1946     		mov	r1, r3
 7905 005a FFF7FEFF 		bl	cc2400_set
2105:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 7906              		.loc 1 2105 0
 7907 005e AB48     		ldr	r0, .L406+4
 7908 0060 FFF7FEFF 		bl	rbit
 7909 0064 0346     		mov	r3, r0
 7910 0066 1B0C     		lsrs	r3, r3, #16
 7911 0068 9BB2     		uxth	r3, r3
 7912 006a 2D20     		movs	r0, #45
 7913 006c 1946     		mov	r1, r3
 7914 006e FFF7FEFF 		bl	cc2400_set
2106:bluetooth_rxtx.c **** 	
2107:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2108:bluetooth_rxtx.c **** 	PAEN_SET;
 7915              		.loc 1 2108 0
 7916 0072 A74B     		ldr	r3, .L406+8
 7917 0074 8022     		movs	r2, #128
 7918 0076 1A60     		str	r2, [r3]
2109:bluetooth_rxtx.c **** //	HGM_SET;
2110:bluetooth_rxtx.c **** #endif
2111:bluetooth_rxtx.c **** 
2112:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 7919              		.loc 1 2112 0
 7920 0078 00BF     		nop
 7921              	.L381:
 7922              		.loc 1 2112 0 is_stmt 0 discriminator 1
 7923 007a FFF7FEFF 		bl	cc2400_status
 7924 007e 0346     		mov	r3, r0
 7925 0080 03F04003 		and	r3, r3, #64
 7926 0084 002B     		cmp	r3, #0
 7927 0086 F8D0     		beq	.L381
2113:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 7928              		.loc 1 2113 0 is_stmt 1
 7929 0088 00BF     		nop
 7930              	.L382:
 7931              		.loc 1 2113 0 is_stmt 0 discriminator 1
 7932 008a FFF7FEFF 		bl	cc2400_status
 7933 008e 0346     		mov	r3, r0
ARM GAS  /tmp/ccQUMSla.s 			page 176


 7934 0090 03F00403 		and	r3, r3, #4
 7935 0094 002B     		cmp	r3, #0
 7936 0096 F8D1     		bne	.L382
2114:bluetooth_rxtx.c **** 
2115:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 7937              		.loc 1 2115 0 is_stmt 1
 7938 0098 9E4B     		ldr	r3, .L406+12
 7939 009a 1B88     		ldrh	r3, [r3]	@ movhi
 7940 009c 9BB2     		uxth	r3, r3
 7941 009e 013B     		subs	r3, r3, #1
 7942 00a0 9BB2     		uxth	r3, r3
 7943 00a2 0220     		movs	r0, #2
 7944 00a4 1946     		mov	r1, r3
 7945 00a6 FFF7FEFF 		bl	cc2400_set
2116:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7946              		.loc 1 2116 0
 7947 00aa 6120     		movs	r0, #97
 7948 00ac FFF7FEFF 		bl	cc2400_strobe
2117:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7949              		.loc 1 2117 0
 7950 00b0 00BF     		nop
 7951              	.L383:
 7952              		.loc 1 2117 0 is_stmt 0 discriminator 1
 7953 00b2 FFF7FEFF 		bl	cc2400_status
 7954 00b6 0346     		mov	r3, r0
 7955 00b8 03F00403 		and	r3, r3, #4
 7956 00bc 002B     		cmp	r3, #0
 7957 00be F8D0     		beq	.L383
2118:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 7958              		.loc 1 2118 0 is_stmt 1
 7959 00c0 6220     		movs	r0, #98
 7960 00c2 FFF7FEFF 		bl	cc2400_strobe
2119:bluetooth_rxtx.c **** 	
2120:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 7961              		.loc 1 2120 0
 7962 00c6 56E1     		b	.L384
 7963              	.L405:
 7964              	.LBB10:
2121:bluetooth_rxtx.c **** 		
2122:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 7965              		.loc 1 2122 0
 7966 00c8 00BF     		nop
 7967              	.L385:
 7968              		.loc 1 2122 0 is_stmt 0 discriminator 1
 7969 00ca FFF7FEFF 		bl	cc2400_status
 7970 00ce 0346     		mov	r3, r0
 7971 00d0 03F01003 		and	r3, r3, #16
 7972 00d4 002B     		cmp	r3, #0
 7973 00d6 F8D0     		beq	.L385
2123:bluetooth_rxtx.c **** /*		int out;
2124:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
2125:bluetooth_rxtx.c ****                 if (rssi >= 128)
2126:bluetooth_rxtx.c ****                         out = rssi - 256;
2127:bluetooth_rxtx.c ****                 else
2128:bluetooth_rxtx.c ****                         out = rssi;
2129:bluetooth_rxtx.c ****                 if (out < 0)
2130:bluetooth_rxtx.c **** 		  goto rx_flush;
ARM GAS  /tmp/ccQUMSla.s 			page 177


2131:bluetooth_rxtx.c **** */
2132:bluetooth_rxtx.c **** 		rssi_sum = 0;
 7974              		.loc 1 2132 0 is_stmt 1
 7975 00d8 8F4B     		ldr	r3, .L406+16
 7976 00da 0022     		movs	r2, #0
 7977 00dc 1A60     		str	r2, [r3]
2133:bluetooth_rxtx.c **** 		rssi_count = 5;
 7978              		.loc 1 2133 0
 7979 00de 8F4B     		ldr	r3, .L406+20
 7980 00e0 0522     		movs	r2, #5
 7981 00e2 1A70     		strb	r2, [r3]
2134:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 7982              		.loc 1 2134 0
 7983 00e4 0023     		movs	r3, #0
 7984 00e6 C7F88430 		str	r3, [r7, #132]
 7985 00ea 11E0     		b	.L386
 7986              	.L387:
2135:bluetooth_rxtx.c **** 		{
2136:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 7987              		.loc 1 2136 0 discriminator 3
 7988 00ec 0620     		movs	r0, #6
 7989 00ee FFF7FEFF 		bl	cc2400_get
 7990 00f2 0346     		mov	r3, r0
 7991 00f4 1B0A     		lsrs	r3, r3, #8
 7992 00f6 9BB2     		uxth	r3, r3
 7993 00f8 DBB2     		uxtb	r3, r3
 7994 00fa 5AB2     		sxtb	r2, r3
 7995 00fc 864B     		ldr	r3, .L406+16
 7996 00fe 1B68     		ldr	r3, [r3]
 7997 0100 1344     		add	r3, r3, r2
 7998 0102 854A     		ldr	r2, .L406+16
 7999 0104 1360     		str	r3, [r2]
2134:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8000              		.loc 1 2134 0 discriminator 3
 8001 0106 D7F88430 		ldr	r3, [r7, #132]
 8002 010a 0133     		adds	r3, r3, #1
 8003 010c C7F88430 		str	r3, [r7, #132]
 8004              	.L386:
2134:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8005              		.loc 1 2134 0 is_stmt 0 discriminator 1
 8006 0110 824B     		ldr	r3, .L406+20
 8007 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8008 0114 1A46     		mov	r2, r3
 8009 0116 D7F88430 		ldr	r3, [r7, #132]
 8010 011a 9A42     		cmp	r2, r3
 8011 011c E6DC     		bgt	.L387
2137:bluetooth_rxtx.c **** 		}
2138:bluetooth_rxtx.c **** 	
2139:bluetooth_rxtx.c **** 		while (!rx_tc);
 8012              		.loc 1 2139 0 is_stmt 1
 8013 011e 00BF     		nop
 8014              	.L388:
 8015              		.loc 1 2139 0 is_stmt 0 discriminator 1
 8016 0120 7F4B     		ldr	r3, .L406+24
 8017 0122 1B68     		ldr	r3, [r3]
 8018 0124 002B     		cmp	r3, #0
 8019 0126 FBD0     		beq	.L388
ARM GAS  /tmp/ccQUMSla.s 			page 178


2140:bluetooth_rxtx.c **** 	
2141:bluetooth_rxtx.c **** 		RXLED_SET;
 8020              		.loc 1 2141 0 is_stmt 1
 8021 0128 7E4B     		ldr	r3, .L406+28
 8022 012a 1022     		movs	r2, #16
 8023 012c 1A60     		str	r2, [r3]
2142:bluetooth_rxtx.c **** 		if (rx_err) {
 8024              		.loc 1 2142 0
 8025 012e 7E4B     		ldr	r3, .L406+32
 8026 0130 1B68     		ldr	r3, [r3]
 8027 0132 002B     		cmp	r3, #0
 8028 0134 07D0     		beq	.L389
2143:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 8029              		.loc 1 2143 0
 8030 0136 7D4B     		ldr	r3, .L406+36
 8031 0138 1B78     		ldrb	r3, [r3]
 8032 013a DBB2     		uxtb	r3, r3
 8033 013c 43F00203 		orr	r3, r3, #2
 8034 0140 DAB2     		uxtb	r2, r3
 8035 0142 7A4B     		ldr	r3, .L406+36
 8036 0144 1A70     		strb	r2, [r3]
 8037              	.L389:
2144:bluetooth_rxtx.c **** 		}	
2145:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 8038              		.loc 1 2145 0
 8039 0146 764B     		ldr	r3, .L406+24
 8040 0148 1B68     		ldr	r3, [r3]
 8041 014a 012B     		cmp	r3, #1
 8042 014c 07D9     		bls	.L390
2146:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 8043              		.loc 1 2146 0
 8044 014e 774B     		ldr	r3, .L406+36
 8045 0150 1B78     		ldrb	r3, [r3]
 8046 0152 DBB2     		uxtb	r3, r3
 8047 0154 43F00103 		orr	r3, r3, #1
 8048 0158 DAB2     		uxtb	r2, r3
 8049 015a 744B     		ldr	r3, .L406+36
 8050 015c 1A70     		strb	r2, [r3]
 8051              	.L390:
2147:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2148:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 8052              		.loc 1 2148 0
 8053 015e 3B1D     		adds	r3, r7, #4
 8054 0160 C7F88030 		str	r3, [r7, #128]
2149:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 8055              		.loc 1 2149 0
 8056 0164 724B     		ldr	r3, .L406+40
 8057 0166 1B68     		ldr	r3, [r3]
 8058 0168 7B60     		str	r3, [r7, #4]
2150:bluetooth_rxtx.c **** 
2151:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 8059              		.loc 1 2151 0
 8060 016a 00BF     		nop
 8061              	.L392:
 8062              		.loc 1 2151 0 is_stmt 0 discriminator 2
 8063 016c 714B     		ldr	r3, .L406+44
 8064 016e 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 179


 8065 0170 03F00103 		and	r3, r3, #1
 8066 0174 002B     		cmp	r3, #0
 8067 0176 03D0     		beq	.L391
 8068              		.loc 1 2151 0 discriminator 1
 8069 0178 6B4B     		ldr	r3, .L406+32
 8070 017a 1B68     		ldr	r3, [r3]
 8071 017c 002B     		cmp	r3, #0
 8072 017e F5D0     		beq	.L392
 8073              	.L391:
2152:bluetooth_rxtx.c ****                 
2153:bluetooth_rxtx.c **** 			
2154:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8074              		.loc 1 2154 0 is_stmt 1
 8075 0180 6D4A     		ldr	r2, .L406+48
 8076 0182 6D4B     		ldr	r3, .L406+48
 8077 0184 1B68     		ldr	r3, [r3]
 8078 0186 23F00103 		bic	r3, r3, #1
 8079 018a 1360     		str	r3, [r2]
2155:bluetooth_rxtx.c **** 	
2156:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 8080              		.loc 1 2156 0
 8081 018c 614B     		ldr	r3, .L406+12
 8082 018e 1B88     		ldrh	r3, [r3]	@ movhi
 8083 0190 9BB2     		uxth	r3, r3
 8084 0192 DBB2     		uxtb	r3, r3
 8085 0194 623B     		subs	r3, r3, #98
 8086 0196 DBB2     		uxtb	r3, r3
 8087 0198 1846     		mov	r0, r3
 8088 019a FFF7FEFF 		bl	btle_channel_index
 8089 019e 0346     		mov	r3, r0
 8090 01a0 1A46     		mov	r2, r3
 8091 01a2 1346     		mov	r3, r2
 8092 01a4 5B00     		lsls	r3, r3, #1
 8093 01a6 1344     		add	r3, r3, r2
 8094 01a8 1B01     		lsls	r3, r3, #4
 8095 01aa 644A     		ldr	r2, .L406+52
 8096 01ac 1344     		add	r3, r3, r2
 8097 01ae FB67     		str	r3, [r7, #124]
2157:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 8098              		.loc 1 2157 0
 8099 01b0 0023     		movs	r3, #0
 8100 01b2 C7F88430 		str	r3, [r7, #132]
 8101 01b6 3CE0     		b	.L393
 8102              	.L396:
 8103              	.LBB11:
2158:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8104              		.loc 1 2158 0 discriminator 3
 8105 01b8 614A     		ldr	r2, .L406+56
 8106 01ba D7F88430 		ldr	r3, [r7, #132]
 8107 01be 1344     		add	r3, r3, r2
 8108 01c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8109 01c2 1A06     		lsls	r2, r3, #24
2159:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8110              		.loc 1 2159 0 discriminator 3
 8111 01c4 D7F88430 		ldr	r3, [r7, #132]
 8112 01c8 0133     		adds	r3, r3, #1
 8113 01ca 5D49     		ldr	r1, .L406+56
ARM GAS  /tmp/ccQUMSla.s 			page 180


 8114 01cc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8115 01ce 1B04     		lsls	r3, r3, #16
 8116 01d0 1A43     		orrs	r2, r2, r3
2160:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 8117              		.loc 1 2160 0 discriminator 3
 8118 01d2 D7F88430 		ldr	r3, [r7, #132]
 8119 01d6 0233     		adds	r3, r3, #2
 8120 01d8 5949     		ldr	r1, .L406+56
 8121 01da CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8122 01dc 1B02     		lsls	r3, r3, #8
 8123 01de 1343     		orrs	r3, r3, r2
2161:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 8124              		.loc 1 2161 0 discriminator 3
 8125 01e0 D7F88420 		ldr	r2, [r7, #132]
 8126 01e4 0332     		adds	r2, r2, #3
 8127 01e6 5649     		ldr	r1, .L406+56
 8128 01e8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 8129 01ea 1343     		orrs	r3, r3, r2
2158:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8130              		.loc 1 2158 0 discriminator 3
 8131 01ec BB67     		str	r3, [r7, #120]
2162:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 8132              		.loc 1 2162 0 discriminator 3
 8133 01ee D7F88430 		ldr	r3, [r7, #132]
 8134 01f2 002B     		cmp	r3, #0
 8135 01f4 00DA     		bge	.L394
 8136 01f6 0333     		adds	r3, r3, #3
 8137              	.L394:
 8138 01f8 9B10     		asrs	r3, r3, #2
 8139 01fa 5C1C     		adds	r4, r3, #1
 8140 01fc B86F     		ldr	r0, [r7, #120]
 8141 01fe FFF7FEFF 		bl	rbit
 8142 0202 0146     		mov	r1, r0
 8143 0204 D7F88430 		ldr	r3, [r7, #132]
 8144 0208 002B     		cmp	r3, #0
 8145 020a 00DA     		bge	.L395
 8146 020c 0333     		adds	r3, r3, #3
 8147              	.L395:
 8148 020e 9B10     		asrs	r3, r3, #2
 8149 0210 9B00     		lsls	r3, r3, #2
 8150 0212 FA6F     		ldr	r2, [r7, #124]
 8151 0214 1344     		add	r3, r3, r2
 8152 0216 1B68     		ldr	r3, [r3]
 8153 0218 81EA0302 		eor	r2, r1, r3
 8154 021c A300     		lsls	r3, r4, #2
 8155 021e 07F18801 		add	r1, r7, #136
 8156 0222 0B44     		add	r3, r3, r1
 8157 0224 43F8842C 		str	r2, [r3, #-132]
 8158              	.LBE11:
2157:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8159              		.loc 1 2157 0 discriminator 3
 8160 0228 D7F88430 		ldr	r3, [r7, #132]
 8161 022c 0433     		adds	r3, r3, #4
 8162 022e C7F88430 		str	r3, [r7, #132]
 8163              	.L393:
2157:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8164              		.loc 1 2157 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccQUMSla.s 			page 181


 8165 0232 D7F88430 		ldr	r3, [r7, #132]
 8166 0236 2B2B     		cmp	r3, #43
 8167 0238 BEDD     		ble	.L396
2163:bluetooth_rxtx.c **** 		}
2164:bluetooth_rxtx.c **** 
2165:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2166:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2167:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2168:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2169:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2170:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2171:bluetooth_rxtx.c **** 		}
2172:bluetooth_rxtx.c **** */
2173:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 8168              		.loc 1 2173 0 is_stmt 1
 8169 023a D7F88030 		ldr	r3, [r7, #128]
 8170 023e 0533     		adds	r3, r3, #5
 8171 0240 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8172 0242 03F03F03 		and	r3, r3, #63
 8173 0246 0233     		adds	r3, r3, #2
 8174 0248 7B67     		str	r3, [r7, #116]
2174:bluetooth_rxtx.c **** 		
2175:bluetooth_rxtx.c **** 		if (len > 39)
 8175              		.loc 1 2175 0
 8176 024a 7B6F     		ldr	r3, [r7, #116]
 8177 024c 272B     		cmp	r3, #39
 8178 024e 00D9     		bls	.L397
2176:bluetooth_rxtx.c **** 			goto rx_flush;
 8179              		.loc 1 2176 0
 8180 0250 34E0     		b	.L398
 8181              	.L397:
2177:bluetooth_rxtx.c **** 
2178:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 8182              		.loc 1 2178 0
 8183 0252 374B     		ldr	r3, .L406+40
 8184 0254 D968     		ldr	r1, [r3, #12]
 8185 0256 D7F88030 		ldr	r3, [r7, #128]
 8186 025a 1A1D     		adds	r2, r3, #4
 8187 025c 7B6F     		ldr	r3, [r7, #116]
 8188 025e 0846     		mov	r0, r1
 8189 0260 1146     		mov	r1, r2
 8190 0262 1A46     		mov	r2, r3
 8191 0264 FFF7FEFF 		bl	btle_crcgen_lut
 8192 0268 3867     		str	r0, [r7, #112]
2179:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 8193              		.loc 1 2179 0
 8194 026a 7B6F     		ldr	r3, [r7, #116]
 8195 026c 0633     		adds	r3, r3, #6
 8196 026e D7F88020 		ldr	r2, [r7, #128]
 8197 0272 1344     		add	r3, r3, r2
 8198 0274 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8199 0276 1A04     		lsls	r2, r3, #16
2180:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 8200              		.loc 1 2180 0
 8201 0278 7B6F     		ldr	r3, [r7, #116]
 8202 027a 0533     		adds	r3, r3, #5
 8203 027c D7F88010 		ldr	r1, [r7, #128]
ARM GAS  /tmp/ccQUMSla.s 			page 182


 8204 0280 0B44     		add	r3, r3, r1
 8205 0282 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8206 0284 1B02     		lsls	r3, r3, #8
 8207 0286 1343     		orrs	r3, r3, r2
2181:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 8208              		.loc 1 2181 0
 8209 0288 7A6F     		ldr	r2, [r7, #116]
 8210 028a 0432     		adds	r2, r2, #4
 8211 028c D7F88010 		ldr	r1, [r7, #128]
 8212 0290 0A44     		add	r2, r2, r1
 8213 0292 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8214 0294 1343     		orrs	r3, r3, r2
2179:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 8215              		.loc 1 2179 0
 8216 0296 FB66     		str	r3, [r7, #108]
2182:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 8217              		.loc 1 2182 0
 8218 0298 3A6F     		ldr	r2, [r7, #112]
 8219 029a FB6E     		ldr	r3, [r7, #108]
 8220 029c 9A42     		cmp	r2, r3
 8221 029e 00D0     		beq	.L399
2183:bluetooth_rxtx.c ****                         goto rx_flush;
 8222              		.loc 1 2183 0
 8223 02a0 0CE0     		b	.L398
 8224              	.L399:
2184:bluetooth_rxtx.c **** 
2185:bluetooth_rxtx.c **** 
2186:bluetooth_rxtx.c **** 		enqueue (BR_PACKET, (uint8_t*)packet);
 8225              		.loc 1 2186 0
 8226 02a2 3B1D     		adds	r3, r7, #4
 8227 02a4 0020     		movs	r0, #0
 8228 02a6 1946     		mov	r1, r3
 8229 02a8 FFF7FEFF 		bl	enqueue
2187:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
2188:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8230              		.loc 1 2188 0
 8231 02ac 254B     		ldr	r3, .L406+60
 8232 02ae 1B68     		ldr	r3, [r3]
 8233 02b0 1846     		mov	r0, r3
 8234 02b2 FFF7FEFF 		bl	handle_usb
2189:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
2190:bluetooth_rxtx.c **** //		handle_usb(clkn);
2191:bluetooth_rxtx.c **** 		RXLED_CLR;
 8235              		.loc 1 2191 0
 8236 02b6 144B     		ldr	r3, .L406
 8237 02b8 1022     		movs	r2, #16
 8238 02ba 1A60     		str	r2, [r3]
 8239              	.L398:
2192:bluetooth_rxtx.c **** 	       
2193:bluetooth_rxtx.c **** 	rx_flush:
2194:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 8240              		.loc 1 2194 0
 8241 02bc 6420     		movs	r0, #100
 8242 02be FFF7FEFF 		bl	cc2400_strobe
2195:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 8243              		.loc 1 2195 0
 8244 02c2 00BF     		nop
ARM GAS  /tmp/ccQUMSla.s 			page 183


 8245              	.L400:
 8246              		.loc 1 2195 0 is_stmt 0 discriminator 1
 8247 02c4 FFF7FEFF 		bl	cc2400_status
 8248 02c8 0346     		mov	r3, r0
 8249 02ca 03F00403 		and	r3, r3, #4
 8250 02ce 002B     		cmp	r3, #0
 8251 02d0 F8D1     		bne	.L400
2196:bluetooth_rxtx.c **** 
2197:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 8252              		.loc 1 2197 0 is_stmt 1
 8253 02d2 00BF     		nop
 8254              	.L401:
 8255              		.loc 1 2197 0 is_stmt 0 discriminator 1
 8256 02d4 FFF7FEFF 		bl	cc2400_status
 8257 02d8 0346     		mov	r3, r0
 8258 02da 03F04003 		and	r3, r3, #64
 8259 02de 002B     		cmp	r3, #0
 8260 02e0 F8D0     		beq	.L401
2198:bluetooth_rxtx.c **** 
2199:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 8261              		.loc 1 2199 0 is_stmt 1
 8262 02e2 6120     		movs	r0, #97
 8263 02e4 FFF7FEFF 		bl	cc2400_strobe
2200:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 8264              		.loc 1 2200 0
 8265 02e8 00BF     		nop
 8266              	.L402:
 8267              		.loc 1 2200 0 is_stmt 0 discriminator 1
 8268 02ea FFF7FEFF 		bl	cc2400_status
 8269 02ee 0346     		mov	r3, r0
 8270 02f0 03F00403 		and	r3, r3, #4
 8271 02f4 002B     		cmp	r3, #0
 8272 02f6 F8D0     		beq	.L402
2201:bluetooth_rxtx.c **** 
2202:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8273              		.loc 1 2202 0 is_stmt 1
 8274 02f8 0F4A     		ldr	r2, .L406+48
 8275 02fa 0F4B     		ldr	r3, .L406+48
 8276 02fc 1B68     		ldr	r3, [r3]
 8277 02fe 23F00103 		bic	r3, r3, #1
 8278 0302 1360     		str	r3, [r2]
2203:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8279              		.loc 1 2203 0
 8280 0304 24E0     		b	.L403
 8281              	.L407:
 8282 0306 00BF     		.align	2
 8283              	.L406:
 8284 0308 3CC00920 		.word	537509948
 8285 030c D6BE898E 		.word	-1903575338
 8286 0310 58C00920 		.word	537509976
 8287 0314 00000000 		.word	channel
 8288 0318 00000000 		.word	rssi_sum
 8289 031c 00000000 		.word	rssi_count
 8290 0320 00000000 		.word	rx_tc
 8291 0324 38C00920 		.word	537509944
 8292 0328 00000000 		.word	rx_err
 8293 032c 00000000 		.word	status
ARM GAS  /tmp/ccQUMSla.s 			page 184


 8294 0330 00000000 		.word	le
 8295 0334 10410050 		.word	1342193936
 8296 0338 24000340 		.word	1073938468
 8297 033c 10010000 		.word	whitening_word
 8298 0340 00000000 		.word	rxbuf1
 8299 0344 00000000 		.word	clkn
 8300              	.L404:
 8301              	.LBB12:
2204:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 8302              		.loc 1 2204 0
 8303 0348 114B     		ldr	r3, .L408
 8304 034a 1B68     		ldr	r3, [r3]
 8305 034c 87F86B30 		strb	r3, [r7, #107]
 8306              	.L403:
 8307              	.LBE12:
2203:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8308              		.loc 1 2203 0
 8309 0350 104B     		ldr	r3, .L408+4
 8310 0352 1B68     		ldr	r3, [r3]
 8311 0354 03F00403 		and	r3, r3, #4
 8312 0358 002B     		cmp	r3, #0
 8313 035a F5D1     		bne	.L404
2205:bluetooth_rxtx.c ****                 }
2206:bluetooth_rxtx.c **** 		dma_init_le();
 8314              		.loc 1 2206 0
 8315 035c FFF7FEFF 		bl	dma_init_le
2207:bluetooth_rxtx.c **** 		dio_ssp_start();
 8316              		.loc 1 2207 0
 8317 0360 FFF7FEFF 		bl	dio_ssp_start
2208:bluetooth_rxtx.c **** 		
2209:bluetooth_rxtx.c **** //              msleep(500);    
2210:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 8318              		.loc 1 2210 0
 8319 0364 6220     		movs	r0, #98
 8320 0366 FFF7FEFF 		bl	cc2400_strobe
2211:bluetooth_rxtx.c **** 		rx_tc = 0;
 8321              		.loc 1 2211 0
 8322 036a 0B4B     		ldr	r3, .L408+8
 8323 036c 0022     		movs	r2, #0
 8324 036e 1A60     		str	r2, [r3]
2212:bluetooth_rxtx.c **** 		rx_err = 0;
 8325              		.loc 1 2212 0
 8326 0370 0A4B     		ldr	r3, .L408+12
 8327 0372 0022     		movs	r2, #0
 8328 0374 1A60     		str	r2, [r3]
 8329              	.L384:
 8330              	.LBE10:
2120:bluetooth_rxtx.c **** 		
 8331              		.loc 1 2120 0
 8332 0376 0A4B     		ldr	r3, .L408+16
 8333 0378 1B78     		ldrb	r3, [r3]
 8334 037a DBB2     		uxtb	r3, r3
 8335 037c 012B     		cmp	r3, #1
 8336 037e 3FF4A3AE 		beq	.L405
2213:bluetooth_rxtx.c **** 	 
2214:bluetooth_rxtx.c **** 	
2215:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccQUMSla.s 			page 185


2216:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 8337              		.loc 1 2216 0
 8338 0382 FFF7FEFF 		bl	dio_ssp_stop
2217:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 8339              		.loc 1 2217 0
 8340 0386 FFF7FEFF 		bl	cs_trigger_disable
2218:bluetooth_rxtx.c **** }
 8341              		.loc 1 2218 0
 8342 038a 8C37     		adds	r7, r7, #140
 8343              		.cfi_def_cfa_offset 12
 8344 038c BD46     		mov	sp, r7
 8345              		.cfi_def_cfa_register 13
 8346              		@ sp needed
 8347 038e 90BD     		pop	{r4, r7, pc}
 8348              	.L409:
 8349              		.align	2
 8350              	.L408:
 8351 0390 08000340 		.word	1073938440
 8352 0394 0C000340 		.word	1073938444
 8353 0398 00000000 		.word	rx_tc
 8354 039c 00000000 		.word	rx_err
 8355 03a0 00000000 		.word	requested_mode
 8356              		.cfi_endproc
 8357              	.LFE35:
 8359              		.section	.text.le_set_access_address,"ax",%progbits
 8360              		.align	2
 8361              		.thumb
 8362              		.thumb_func
 8364              	le_set_access_address:
 8365              	.LFB36:
2219:bluetooth_rxtx.c **** 
2220:bluetooth_rxtx.c **** 
2221:bluetooth_rxtx.c **** 
2222:bluetooth_rxtx.c **** /* set LE access address */
2223:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 8366              		.loc 1 2223 0
 8367              		.cfi_startproc
 8368              		@ args = 0, pretend = 0, frame = 16
 8369              		@ frame_needed = 1, uses_anonymous_args = 0
 8370 0000 80B5     		push	{r7, lr}
 8371              		.cfi_def_cfa_offset 8
 8372              		.cfi_offset 7, -8
 8373              		.cfi_offset 14, -4
 8374 0002 84B0     		sub	sp, sp, #16
 8375              		.cfi_def_cfa_offset 24
 8376 0004 00AF     		add	r7, sp, #0
 8377              		.cfi_def_cfa_register 7
 8378 0006 7860     		str	r0, [r7, #4]
2224:bluetooth_rxtx.c **** 	u32 aa_rev;
2225:bluetooth_rxtx.c **** 
2226:bluetooth_rxtx.c **** 	le.access_address = aa;
 8379              		.loc 1 2226 0
 8380 0008 094A     		ldr	r2, .L411
 8381 000a 7B68     		ldr	r3, [r7, #4]
 8382 000c 1360     		str	r3, [r2]
2227:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 8383              		.loc 1 2227 0
ARM GAS  /tmp/ccQUMSla.s 			page 186


 8384 000e 7868     		ldr	r0, [r7, #4]
 8385 0010 FFF7FEFF 		bl	rbit
 8386 0014 F860     		str	r0, [r7, #12]
2228:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 8387              		.loc 1 2228 0
 8388 0016 FB68     		ldr	r3, [r7, #12]
 8389 0018 9AB2     		uxth	r2, r3
 8390 001a 054B     		ldr	r3, .L411
 8391 001c DA80     		strh	r2, [r3, #6]	@ movhi
2229:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 8392              		.loc 1 2229 0
 8393 001e FB68     		ldr	r3, [r7, #12]
 8394 0020 1B0C     		lsrs	r3, r3, #16
 8395 0022 9AB2     		uxth	r2, r3
 8396 0024 024B     		ldr	r3, .L411
 8397 0026 9A80     		strh	r2, [r3, #4]	@ movhi
2230:bluetooth_rxtx.c **** }
 8398              		.loc 1 2230 0
 8399 0028 1037     		adds	r7, r7, #16
 8400              		.cfi_def_cfa_offset 8
 8401 002a BD46     		mov	sp, r7
 8402              		.cfi_def_cfa_register 13
 8403              		@ sp needed
 8404 002c 80BD     		pop	{r7, pc}
 8405              	.L412:
 8406 002e 00BF     		.align	2
 8407              	.L411:
 8408 0030 00000000 		.word	le
 8409              		.cfi_endproc
 8410              	.LFE36:
 8412              		.section	.text.reset_le,"ax",%progbits
 8413              		.align	2
 8414              		.global	reset_le
 8415              		.thumb
 8416              		.thumb_func
 8418              	reset_le:
 8419              	.LFB37:
2231:bluetooth_rxtx.c **** 
2232:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
2233:bluetooth_rxtx.c **** void reset_le() {
 8420              		.loc 1 2233 0
 8421              		.cfi_startproc
 8422              		@ args = 0, pretend = 0, frame = 0
 8423              		@ frame_needed = 1, uses_anonymous_args = 0
 8424 0000 80B5     		push	{r7, lr}
 8425              		.cfi_def_cfa_offset 8
 8426              		.cfi_offset 7, -8
 8427              		.cfi_offset 14, -4
 8428 0002 00AF     		add	r7, sp, #0
 8429              		.cfi_def_cfa_register 7
2234:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 8430              		.loc 1 2234 0
 8431 0004 1F48     		ldr	r0, .L414
 8432 0006 FFF7FEFF 		bl	le_set_access_address
2235:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 8433              		.loc 1 2235 0
 8434 000a 1F4B     		ldr	r3, .L414+4
ARM GAS  /tmp/ccQUMSla.s 			page 187


 8435 000c 1F4A     		ldr	r2, .L414+8
 8436 000e 9A60     		str	r2, [r3, #8]
2236:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 8437              		.loc 1 2236 0
 8438 0010 1D4B     		ldr	r3, .L414+4
 8439 0012 1F4A     		ldr	r2, .L414+12
 8440 0014 DA60     		str	r2, [r3, #12]
2237:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 8441              		.loc 1 2237 0
 8442 0016 1C4B     		ldr	r3, .L414+4
 8443 0018 0122     		movs	r2, #1
 8444 001a 1A61     		str	r2, [r3, #16]
2238:bluetooth_rxtx.c **** 	le.last_packet = 0;
 8445              		.loc 1 2238 0
 8446 001c 1A4B     		ldr	r3, .L414+4
 8447 001e 0022     		movs	r2, #0
 8448 0020 1A64     		str	r2, [r3, #64]
2239:bluetooth_rxtx.c **** 
2240:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 8449              		.loc 1 2240 0
 8450 0022 194B     		ldr	r3, .L414+4
 8451 0024 0022     		movs	r2, #0
 8452 0026 1A75     		strb	r2, [r3, #20]
2241:bluetooth_rxtx.c **** 
2242:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 8453              		.loc 1 2242 0
 8454 0028 174B     		ldr	r3, .L414+4
 8455 002a 0022     		movs	r2, #0
 8456 002c 5A75     		strb	r2, [r3, #21]
2243:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 8457              		.loc 1 2243 0
 8458 002e 164B     		ldr	r3, .L414+4
 8459 0030 0022     		movs	r2, #0
 8460 0032 9A75     		strb	r2, [r3, #22]
2244:bluetooth_rxtx.c **** 
2245:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 8461              		.loc 1 2245 0
 8462 0034 144B     		ldr	r3, .L414+4
 8463 0036 0022     		movs	r2, #0
 8464 0038 9A61     		str	r2, [r3, #24]
2246:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 8465              		.loc 1 2246 0
 8466 003a 134B     		ldr	r3, .L414+4
 8467 003c 0022     		movs	r2, #0
 8468 003e 9A83     		strh	r2, [r3, #28]	@ movhi
2247:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 8469              		.loc 1 2247 0
 8470 0040 114B     		ldr	r3, .L414+4
 8471 0042 0022     		movs	r2, #0
 8472 0044 DA83     		strh	r2, [r3, #30]	@ movhi
2248:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 8473              		.loc 1 2248 0
 8474 0046 104B     		ldr	r3, .L414+4
 8475 0048 0022     		movs	r2, #0
 8476 004a DA83     		strh	r2, [r3, #30]	@ movhi
2249:bluetooth_rxtx.c **** 	le.conn_count = 0;
 8477              		.loc 1 2249 0
ARM GAS  /tmp/ccQUMSla.s 			page 188


 8478 004c 0E4B     		ldr	r3, .L414+4
 8479 004e 0022     		movs	r2, #0
 8480 0050 1A84     		strh	r2, [r3, #32]	@ movhi
2250:bluetooth_rxtx.c **** 
2251:bluetooth_rxtx.c **** 	le.win_size = 0;
 8481              		.loc 1 2251 0
 8482 0052 0D4B     		ldr	r3, .L414+4
 8483 0054 0022     		movs	r2, #0
 8484 0056 83F82220 		strb	r2, [r3, #34]
2252:bluetooth_rxtx.c **** 	le.win_offset = 0;
 8485              		.loc 1 2252 0
 8486 005a 0B4B     		ldr	r3, .L414+4
 8487 005c 0022     		movs	r2, #0
 8488 005e 9A84     		strh	r2, [r3, #36]	@ movhi
2253:bluetooth_rxtx.c **** 
2254:bluetooth_rxtx.c **** 	le.update_pending = 0;
 8489              		.loc 1 2254 0
 8490 0060 094B     		ldr	r3, .L414+4
 8491 0062 0022     		movs	r2, #0
 8492 0064 9A62     		str	r2, [r3, #40]
2255:bluetooth_rxtx.c **** 	le.update_instant = 0;
 8493              		.loc 1 2255 0
 8494 0066 084B     		ldr	r3, .L414+4
 8495 0068 0022     		movs	r2, #0
 8496 006a 9A85     		strh	r2, [r3, #44]	@ movhi
2256:bluetooth_rxtx.c **** 	le.interval_update = 0;
 8497              		.loc 1 2256 0
 8498 006c 064B     		ldr	r3, .L414+4
 8499 006e 0022     		movs	r2, #0
 8500 0070 DA85     		strh	r2, [r3, #46]	@ movhi
2257:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 8501              		.loc 1 2257 0
 8502 0072 054B     		ldr	r3, .L414+4
 8503 0074 0022     		movs	r2, #0
 8504 0076 83F83020 		strb	r2, [r3, #48]
2258:bluetooth_rxtx.c **** 	le.win_offset_update;
2259:bluetooth_rxtx.c **** 
2260:bluetooth_rxtx.c **** 	do_hop = 0;
 8505              		.loc 1 2260 0
 8506 007a 064B     		ldr	r3, .L414+16
 8507 007c 0022     		movs	r2, #0
 8508 007e 1A70     		strb	r2, [r3]
2261:bluetooth_rxtx.c **** }
 8509              		.loc 1 2261 0
 8510 0080 80BD     		pop	{r7, pc}
 8511              	.L415:
 8512 0082 00BF     		.align	2
 8513              	.L414:
 8514 0084 D6BE898E 		.word	-1903575338
 8515 0088 00000000 		.word	le
 8516 008c 55555500 		.word	5592405
 8517 0090 AAAAAA00 		.word	11184810
 8518 0094 00000000 		.word	do_hop
 8519              		.cfi_endproc
 8520              	.LFE37:
 8522              		.section	.text.reset_le_promisc,"ax",%progbits
 8523              		.align	2
ARM GAS  /tmp/ccQUMSla.s 			page 189


 8524              		.global	reset_le_promisc
 8525              		.thumb
 8526              		.thumb_func
 8528              	reset_le_promisc:
 8529              	.LFB38:
2262:bluetooth_rxtx.c **** 
2263:bluetooth_rxtx.c **** // reset LE Promisc state
2264:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 8530              		.loc 1 2264 0
 8531              		.cfi_startproc
 8532              		@ args = 0, pretend = 0, frame = 0
 8533              		@ frame_needed = 1, uses_anonymous_args = 0
 8534 0000 80B5     		push	{r7, lr}
 8535              		.cfi_def_cfa_offset 8
 8536              		.cfi_offset 7, -8
 8537              		.cfi_offset 14, -4
 8538 0002 00AF     		add	r7, sp, #0
 8539              		.cfi_def_cfa_register 7
2265:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 8540              		.loc 1 2265 0
 8541 0004 0548     		ldr	r0, .L417
 8542 0006 0021     		movs	r1, #0
 8543 0008 4FF48472 		mov	r2, #264
 8544 000c FFF7FEFF 		bl	memset
2266:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 8545              		.loc 1 2266 0
 8546 0010 024B     		ldr	r3, .L417
 8547 0012 4FF0FF32 		mov	r2, #-1
 8548 0016 C3F80021 		str	r2, [r3, #256]
2267:bluetooth_rxtx.c **** }
 8549              		.loc 1 2267 0
 8550 001a 80BD     		pop	{r7, pc}
 8551              	.L418:
 8552              		.align	2
 8553              	.L417:
 8554 001c 00000000 		.word	le_promisc
 8555              		.cfi_endproc
 8556              	.LFE38:
 8558              		.section	.text.bt_generic_le,"ax",%progbits
 8559              		.align	2
 8560              		.global	bt_generic_le
 8561              		.thumb
 8562              		.thumb_func
 8564              	bt_generic_le:
 8565              	.LFB39:
2268:bluetooth_rxtx.c **** 
2269:bluetooth_rxtx.c **** /* generic le mode */
2270:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
2271:bluetooth_rxtx.c **** {
 8566              		.loc 1 2271 0
 8567              		.cfi_startproc
 8568              		@ args = 0, pretend = 0, frame = 32
 8569              		@ frame_needed = 1, uses_anonymous_args = 0
 8570 0000 80B5     		push	{r7, lr}
 8571              		.cfi_def_cfa_offset 8
 8572              		.cfi_offset 7, -8
 8573              		.cfi_offset 14, -4
ARM GAS  /tmp/ccQUMSla.s 			page 190


 8574 0002 88B0     		sub	sp, sp, #32
 8575              		.cfi_def_cfa_offset 40
 8576 0004 00AF     		add	r7, sp, #0
 8577              		.cfi_def_cfa_register 7
 8578 0006 0346     		mov	r3, r0
 8579 0008 FB71     		strb	r3, [r7, #7]
2272:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 8580              		.loc 1 2272 0
 8581 000a 0023     		movs	r3, #0
 8582 000c FB60     		str	r3, [r7, #12]
2273:bluetooth_rxtx.c **** 	u8 hold;
2274:bluetooth_rxtx.c **** 	int i, j;
2275:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
2276:bluetooth_rxtx.c **** 
2277:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 8583              		.loc 1 2277 0
 8584 000e A44B     		ldr	r3, .L447
 8585 0010 0122     		movs	r2, #1
 8586 0012 1A70     		strb	r2, [r3]
2278:bluetooth_rxtx.c **** 	mode = active_mode;
 8587              		.loc 1 2278 0
 8588 0014 A34A     		ldr	r2, .L447+4
 8589 0016 FB79     		ldrb	r3, [r7, #7]
 8590 0018 1370     		strb	r3, [r2]
2279:bluetooth_rxtx.c **** 
2280:bluetooth_rxtx.c **** 	reset_le();
 8591              		.loc 1 2280 0
 8592 001a FFF7FEFF 		bl	reset_le
2281:bluetooth_rxtx.c **** 
2282:bluetooth_rxtx.c **** 	// enable USB interrupts
2283:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 8593              		.loc 1 2283 0
 8594 001e A24B     		ldr	r3, .L447+8
 8595 0020 4FF08072 		mov	r2, #16777216
 8596 0024 1A60     		str	r2, [r3]
2284:bluetooth_rxtx.c **** 
2285:bluetooth_rxtx.c **** 	RXLED_CLR;
 8597              		.loc 1 2285 0
 8598 0026 A14B     		ldr	r3, .L447+12
 8599 0028 1022     		movs	r2, #16
 8600 002a 1A60     		str	r2, [r3]
2286:bluetooth_rxtx.c **** 
2287:bluetooth_rxtx.c **** 	queue_init();
 8601              		.loc 1 2287 0
 8602 002c FFF7FEFF 		bl	queue_init
2288:bluetooth_rxtx.c **** 	dio_ssp_init();
 8603              		.loc 1 2288 0
 8604 0030 FFF7FEFF 		bl	dio_ssp_init
2289:bluetooth_rxtx.c **** 	dma_init();
 8605              		.loc 1 2289 0
 8606 0034 FFF7FEFF 		bl	dma_init
2290:bluetooth_rxtx.c **** 	dio_ssp_start();
 8607              		.loc 1 2290 0
 8608 0038 FFF7FEFF 		bl	dio_ssp_start
2291:bluetooth_rxtx.c **** 	cc2400_rx();
 8609              		.loc 1 2291 0
 8610 003c FFF7FEFF 		bl	cc2400_rx
ARM GAS  /tmp/ccQUMSla.s 			page 191


2292:bluetooth_rxtx.c **** 
2293:bluetooth_rxtx.c **** 	cs_trigger_enable();
 8611              		.loc 1 2293 0
 8612 0040 FFF7FEFF 		bl	cs_trigger_enable
2294:bluetooth_rxtx.c **** 
2295:bluetooth_rxtx.c **** 	hold = 0;
 8613              		.loc 1 2295 0
 8614 0044 0023     		movs	r3, #0
 8615 0046 FB77     		strb	r3, [r7, #31]
2296:bluetooth_rxtx.c **** 
2297:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 8616              		.loc 1 2297 0
 8617 0048 15E1     		b	.L420
 8618              	.L446:
 8619              	.LBB13:
2298:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 8620              		.loc 1 2298 0
 8621 004a 994B     		ldr	r3, .L447+16
 8622 004c 1B88     		ldrh	r3, [r3]	@ movhi
 8623 004e 9BB2     		uxth	r3, r3
 8624 0050 002B     		cmp	r3, #0
 8625 0052 24D0     		beq	.L421
2299:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 8626              		.loc 1 2299 0
 8627 0054 6420     		movs	r0, #100
 8628 0056 FFF7FEFF 		bl	cc2400_strobe
2300:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 8629              		.loc 1 2300 0
 8630 005a 00BF     		nop
 8631              	.L422:
 8632              		.loc 1 2300 0 is_stmt 0 discriminator 1
 8633 005c FFF7FEFF 		bl	cc2400_status
 8634 0060 0346     		mov	r3, r0
 8635 0062 03F00403 		and	r3, r3, #4
 8636 0066 002B     		cmp	r3, #0
 8637 0068 F8D1     		bne	.L422
2301:bluetooth_rxtx.c **** 
2302:bluetooth_rxtx.c **** 			/* Retune */
2303:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 8638              		.loc 1 2303 0 is_stmt 1
 8639 006a 924B     		ldr	r3, .L447+20
 8640 006c 1B88     		ldrh	r3, [r3]	@ movhi
 8641 006e 9BB2     		uxth	r3, r3
 8642 0070 013B     		subs	r3, r3, #1
 8643 0072 9BB2     		uxth	r3, r3
 8644 0074 0220     		movs	r0, #2
 8645 0076 1946     		mov	r1, r3
 8646 0078 FFF7FEFF 		bl	cc2400_set
2304:bluetooth_rxtx.c **** 
2305:bluetooth_rxtx.c **** 			/* Wait for lock */
2306:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 8647              		.loc 1 2306 0
 8648 007c 6120     		movs	r0, #97
 8649 007e FFF7FEFF 		bl	cc2400_strobe
2307:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 8650              		.loc 1 2307 0
 8651 0082 00BF     		nop
ARM GAS  /tmp/ccQUMSla.s 			page 192


 8652              	.L423:
 8653              		.loc 1 2307 0 is_stmt 0 discriminator 1
 8654 0084 FFF7FEFF 		bl	cc2400_status
 8655 0088 0346     		mov	r3, r0
 8656 008a 03F00403 		and	r3, r3, #4
 8657 008e 002B     		cmp	r3, #0
 8658 0090 F8D0     		beq	.L423
2308:bluetooth_rxtx.c **** 
2309:bluetooth_rxtx.c **** 			/* RX mode */
2310:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 8659              		.loc 1 2310 0 is_stmt 1
 8660 0092 6220     		movs	r0, #98
 8661 0094 FFF7FEFF 		bl	cc2400_strobe
2311:bluetooth_rxtx.c **** 
2312:bluetooth_rxtx.c **** 			requested_channel = 0;
 8662              		.loc 1 2312 0
 8663 0098 854B     		ldr	r3, .L447+16
 8664 009a 0022     		movs	r2, #0
 8665 009c 1A80     		strh	r2, [r3]	@ movhi
 8666              	.L421:
2313:bluetooth_rxtx.c **** 		}
2314:bluetooth_rxtx.c **** 
2315:bluetooth_rxtx.c **** 		if (do_hop) {
 8667              		.loc 1 2315 0
 8668 009e 864B     		ldr	r3, .L447+24
 8669 00a0 1B78     		ldrb	r3, [r3]
 8670 00a2 DBB2     		uxtb	r3, r3
 8671 00a4 002B     		cmp	r3, #0
 8672 00a6 02D0     		beq	.L424
2316:bluetooth_rxtx.c **** 			hop();
 8673              		.loc 1 2316 0
 8674 00a8 FFF7FEFF 		bl	hop
 8675 00ac 03E0     		b	.L425
 8676              	.L424:
2317:bluetooth_rxtx.c **** 		} else {
2318:bluetooth_rxtx.c **** 			TXLED_CLR;
 8677              		.loc 1 2318 0
 8678 00ae 7F4B     		ldr	r3, .L447+12
 8679 00b0 4FF48072 		mov	r2, #256
 8680 00b4 1A60     		str	r2, [r3]
 8681              	.L425:
2319:bluetooth_rxtx.c **** 		}
2320:bluetooth_rxtx.c **** 
2321:bluetooth_rxtx.c **** 		RXLED_CLR;
 8682              		.loc 1 2321 0
 8683 00b6 7D4B     		ldr	r3, .L447+12
 8684 00b8 1022     		movs	r2, #16
 8685 00ba 1A60     		str	r2, [r3]
2322:bluetooth_rxtx.c **** 
2323:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2324:bluetooth_rxtx.c **** 		rssi_reset();
 8686              		.loc 1 2324 0
 8687 00bc FFF7FEFF 		bl	rssi_reset
2325:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 8688              		.loc 1 2325 0
 8689 00c0 8023     		movs	r3, #128
 8690 00c2 BB74     		strb	r3, [r7, #18]
ARM GAS  /tmp/ccQUMSla.s 			page 193


2326:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 8691              		.loc 1 2326 0
 8692 00c4 22E0     		b	.L426
 8693              	.L429:
2327:bluetooth_rxtx.c **** 		{
2328:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 8694              		.loc 1 2328 0
 8695 00c6 0620     		movs	r0, #6
 8696 00c8 FFF7FEFF 		bl	cc2400_get
 8697 00cc 0346     		mov	r3, r0
 8698 00ce 1B0A     		lsrs	r3, r3, #8
 8699 00d0 9BB2     		uxth	r3, r3
 8700 00d2 FB74     		strb	r3, [r7, #19]
2329:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 8701              		.loc 1 2329 0
 8702 00d4 794B     		ldr	r3, .L447+28
 8703 00d6 1B78     		ldrb	r3, [r3]
 8704 00d8 DBB2     		uxtb	r3, r3
 8705 00da 002B     		cmp	r3, #0
 8706 00dc 11D0     		beq	.L427
 8707              		.loc 1 2329 0 is_stmt 0 discriminator 1
 8708 00de 97F91230 		ldrsb	r3, [r7, #18]
 8709 00e2 13F1800F 		cmn	r3, #128
 8710 00e6 0CD1     		bne	.L427
2330:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 8711              		.loc 1 2330 0 is_stmt 1
 8712 00e8 754B     		ldr	r3, .L447+32
 8713 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8714 00ec 5BB2     		sxtb	r3, r3
 8715 00ee 03F13602 		add	r2, r3, #54
 8716 00f2 97F91330 		ldrsb	r3, [r7, #19]
 8717 00f6 9342     		cmp	r3, r2
 8718 00f8 B8BF     		it	lt
 8719 00fa 1346     		movlt	r3, r2
 8720 00fc FB74     		strb	r3, [r7, #19]
2331:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 8721              		.loc 1 2331 0
 8722 00fe FB7C     		ldrb	r3, [r7, #19]
 8723 0100 BB74     		strb	r3, [r7, #18]
 8724              	.L427:
2332:bluetooth_rxtx.c **** 			}
2333:bluetooth_rxtx.c **** 			rssi_add(rssi);
 8725              		.loc 1 2333 0
 8726 0102 97F91330 		ldrsb	r3, [r7, #19]
 8727 0106 1846     		mov	r0, r3
 8728 0108 FFF7FEFF 		bl	rssi_add
 8729              	.L426:
2326:bluetooth_rxtx.c **** 		{
 8730              		.loc 1 2326 0
 8731 010c 6D4B     		ldr	r3, .L447+36
 8732 010e 1B68     		ldr	r3, [r3]
 8733 0110 002B     		cmp	r3, #0
 8734 0112 03D1     		bne	.L428
2326:bluetooth_rxtx.c **** 		{
 8735              		.loc 1 2326 0 is_stmt 0 discriminator 1
 8736 0114 6C4B     		ldr	r3, .L447+40
 8737 0116 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 194


 8738 0118 002B     		cmp	r3, #0
 8739 011a D4D0     		beq	.L429
 8740              	.L428:
2334:bluetooth_rxtx.c **** 		}
2335:bluetooth_rxtx.c **** 
2336:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
2337:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 8741              		.loc 1 2337 0 is_stmt 1
 8742 011c 694B     		ldr	r3, .L447+36
 8743 011e 1B68     		ldr	r3, [r3]
 8744 0120 03F00103 		and	r3, r3, #1
 8745 0124 002B     		cmp	r3, #0
 8746 0126 09D0     		beq	.L430
2338:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 8747              		.loc 1 2338 0
 8748 0128 684B     		ldr	r3, .L447+44
 8749 012a 1B68     		ldr	r3, [r3]
 8750 012c FB60     		str	r3, [r7, #12]
2339:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 8751              		.loc 1 2339 0
 8752 012e 684B     		ldr	r3, .L447+48
 8753 0130 1B68     		ldr	r3, [r3]
 8754 0132 664A     		ldr	r2, .L447+44
 8755 0134 1360     		str	r3, [r2]
2340:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 8756              		.loc 1 2340 0
 8757 0136 664A     		ldr	r2, .L447+48
 8758 0138 FB68     		ldr	r3, [r7, #12]
 8759 013a 1360     		str	r3, [r2]
 8760              	.L430:
2341:bluetooth_rxtx.c **** 		}
2342:bluetooth_rxtx.c **** 
2343:bluetooth_rxtx.c **** 		if (rx_err) {
 8761              		.loc 1 2343 0
 8762 013c 624B     		ldr	r3, .L447+40
 8763 013e 1B68     		ldr	r3, [r3]
 8764 0140 002B     		cmp	r3, #0
 8765 0142 07D0     		beq	.L431
2344:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 8766              		.loc 1 2344 0
 8767 0144 634B     		ldr	r3, .L447+52
 8768 0146 1B78     		ldrb	r3, [r3]
 8769 0148 DBB2     		uxtb	r3, r3
 8770 014a 43F00203 		orr	r3, r3, #2
 8771 014e DAB2     		uxtb	r2, r3
 8772 0150 604B     		ldr	r3, .L447+52
 8773 0152 1A70     		strb	r2, [r3]
 8774              	.L431:
2345:bluetooth_rxtx.c **** 		}
2346:bluetooth_rxtx.c **** 
2347:bluetooth_rxtx.c **** 		/* No DMA transfer? */
2348:bluetooth_rxtx.c **** 		if (!rx_tc)
 8775              		.loc 1 2348 0
 8776 0154 5B4B     		ldr	r3, .L447+36
 8777 0156 1B68     		ldr	r3, [r3]
 8778 0158 002B     		cmp	r3, #0
 8779 015a 00D1     		bne	.L432
ARM GAS  /tmp/ccQUMSla.s 			page 195


2349:bluetooth_rxtx.c **** 			goto rx_continue;
 8780              		.loc 1 2349 0
 8781 015c 85E0     		b	.L433
 8782              	.L432:
2350:bluetooth_rxtx.c **** 
2351:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
2352:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 8783              		.loc 1 2352 0
 8784 015e 594B     		ldr	r3, .L447+36
 8785 0160 1B68     		ldr	r3, [r3]
 8786 0162 012B     		cmp	r3, #1
 8787 0164 07D9     		bls	.L434
2353:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 8788              		.loc 1 2353 0
 8789 0166 5B4B     		ldr	r3, .L447+52
 8790 0168 1B78     		ldrb	r3, [r3]
 8791 016a DBB2     		uxtb	r3, r3
 8792 016c 43F00103 		orr	r3, r3, #1
 8793 0170 DAB2     		uxtb	r2, r3
 8794 0172 584B     		ldr	r3, .L447+52
 8795 0174 1A70     		strb	r2, [r3]
 8796              	.L434:
2354:bluetooth_rxtx.c **** 
2355:bluetooth_rxtx.c **** 		rssi_iir_update();
 8797              		.loc 1 2355 0
 8798 0176 FFF7FEFF 		bl	rssi_iir_update
2356:bluetooth_rxtx.c **** 
2357:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
2358:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
2359:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
2360:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
2361:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 8799              		.loc 1 2361 0
 8800 017a 504B     		ldr	r3, .L447+28
 8801 017c 1B78     		ldrb	r3, [r3]
 8802 017e DBB2     		uxtb	r3, r3
 8803 0180 002B     		cmp	r3, #0
 8804 0182 03D1     		bne	.L435
 8805              		.loc 1 2361 0 is_stmt 0 discriminator 1
 8806 0184 544B     		ldr	r3, .L447+56
 8807 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8808 0188 002B     		cmp	r3, #0
 8809 018a 0CD0     		beq	.L436
 8810              	.L435:
2362:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 8811              		.loc 1 2362 0 is_stmt 1
 8812 018c 514B     		ldr	r3, .L447+52
 8813 018e 1B78     		ldrb	r3, [r3]
 8814 0190 DBB2     		uxtb	r3, r3
 8815 0192 43F00803 		orr	r3, r3, #8
 8816 0196 DAB2     		uxtb	r2, r3
 8817 0198 4E4B     		ldr	r3, .L447+52
 8818 019a 1A70     		strb	r2, [r3]
2363:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 8819              		.loc 1 2363 0
 8820 019c 0223     		movs	r3, #2
 8821 019e FB77     		strb	r3, [r7, #31]
ARM GAS  /tmp/ccQUMSla.s 			page 196


2364:bluetooth_rxtx.c **** 			cs_trigger = 0;
 8822              		.loc 1 2364 0
 8823 01a0 464B     		ldr	r3, .L447+28
 8824 01a2 0022     		movs	r2, #0
 8825 01a4 1A70     		strb	r2, [r3]
 8826              	.L436:
2365:bluetooth_rxtx.c **** 		}
2366:bluetooth_rxtx.c **** 
2367:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 8827              		.loc 1 2367 0
 8828 01a6 4D4B     		ldr	r3, .L447+60
 8829 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8830 01aa 5AB2     		sxtb	r2, r3
 8831 01ac 444B     		ldr	r3, .L447+32
 8832 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8833 01b0 5BB2     		sxtb	r3, r3
 8834 01b2 3633     		adds	r3, r3, #54
 8835 01b4 9A42     		cmp	r2, r3
 8836 01b6 09DB     		blt	.L437
2368:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 8837              		.loc 1 2368 0
 8838 01b8 464B     		ldr	r3, .L447+52
 8839 01ba 1B78     		ldrb	r3, [r3]
 8840 01bc DBB2     		uxtb	r3, r3
 8841 01be 43F01003 		orr	r3, r3, #16
 8842 01c2 DAB2     		uxtb	r2, r3
 8843 01c4 434B     		ldr	r3, .L447+52
 8844 01c6 1A70     		strb	r2, [r3]
2369:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 8845              		.loc 1 2369 0
 8846 01c8 0223     		movs	r3, #2
 8847 01ca FB77     		strb	r3, [r7, #31]
 8848              	.L437:
2370:bluetooth_rxtx.c **** 		}
2371:bluetooth_rxtx.c **** 
2372:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
2373:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
2374:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 8849              		.loc 1 2374 0
 8850 01cc 444B     		ldr	r3, .L447+64
 8851 01ce 1B78     		ldrb	r3, [r3]
 8852 01d0 DBB2     		uxtb	r3, r3
 8853 01d2 002B     		cmp	r3, #0
 8854 01d4 07D0     		beq	.L438
2375:bluetooth_rxtx.c **** 			if (hold == 0)
 8855              		.loc 1 2375 0
 8856 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 8857 01d8 002B     		cmp	r3, #0
 8858 01da 01D1     		bne	.L439
2376:bluetooth_rxtx.c **** 				hold = 1;
 8859              		.loc 1 2376 0
 8860 01dc 0123     		movs	r3, #1
 8861 01de FB77     		strb	r3, [r7, #31]
 8862              	.L439:
2377:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 8863              		.loc 1 2377 0
 8864 01e0 3F4B     		ldr	r3, .L447+64
ARM GAS  /tmp/ccQUMSla.s 			page 197


 8865 01e2 0022     		movs	r2, #0
 8866 01e4 1A70     		strb	r2, [r3]
 8867              	.L438:
2378:bluetooth_rxtx.c **** 		}
2379:bluetooth_rxtx.c **** 
2380:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
2381:bluetooth_rxtx.c **** 		if (hold == 0) {
 8868              		.loc 1 2381 0
 8869 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 8870 01e8 002B     		cmp	r3, #0
 8871 01ea 00D1     		bne	.L440
2382:bluetooth_rxtx.c **** 			goto rx_continue;
 8872              		.loc 1 2382 0
 8873 01ec 3DE0     		b	.L433
 8874              	.L440:
2383:bluetooth_rxtx.c **** 		}
2384:bluetooth_rxtx.c **** 		hold--;
 8875              		.loc 1 2384 0
 8876 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 8877 01f0 013B     		subs	r3, r3, #1
 8878 01f2 FB77     		strb	r3, [r7, #31]
2385:bluetooth_rxtx.c **** 
2386:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
2387:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 8879              		.loc 1 2387 0
 8880 01f4 3B48     		ldr	r0, .L447+68
 8881 01f6 3C49     		ldr	r1, .L447+72
 8882 01f8 4FF4C872 		mov	r2, #400
 8883 01fc FFF7FEFF 		bl	memcpy
2388:bluetooth_rxtx.c **** 
2389:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
2390:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 8884              		.loc 1 2390 0
 8885 0200 0023     		movs	r3, #0
 8886 0202 BB61     		str	r3, [r7, #24]
 8887 0204 25E0     		b	.L441
 8888              	.L444:
2391:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
2392:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 8889              		.loc 1 2392 0
 8890 0206 0023     		movs	r3, #0
 8891 0208 7B61     		str	r3, [r7, #20]
 8892 020a 1CE0     		b	.L442
 8893              	.L443:
2393:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 8894              		.loc 1 2393 0 discriminator 3
 8895 020c BB69     		ldr	r3, [r7, #24]
 8896 020e 3233     		adds	r3, r3, #50
 8897 0210 DA00     		lsls	r2, r3, #3
 8898 0212 7B69     		ldr	r3, [r7, #20]
 8899 0214 1344     		add	r3, r3, r2
 8900 0216 2E4A     		ldr	r2, .L447+48
 8901 0218 1168     		ldr	r1, [r2]
 8902 021a BA69     		ldr	r2, [r7, #24]
 8903 021c 0A44     		add	r2, r2, r1
 8904 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8905 0220 D209     		lsrs	r2, r2, #7
ARM GAS  /tmp/ccQUMSla.s 			page 198


 8906 0222 D1B2     		uxtb	r1, r2
 8907 0224 2F4A     		ldr	r2, .L447+68
 8908 0226 D154     		strb	r1, [r2, r3]
2394:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 8909              		.loc 1 2394 0 discriminator 3
 8910 0228 294B     		ldr	r3, .L447+48
 8911 022a 1A68     		ldr	r2, [r3]
 8912 022c BB69     		ldr	r3, [r7, #24]
 8913 022e 1344     		add	r3, r3, r2
 8914 0230 274A     		ldr	r2, .L447+48
 8915 0232 1168     		ldr	r1, [r2]
 8916 0234 BA69     		ldr	r2, [r7, #24]
 8917 0236 0A44     		add	r2, r2, r1
 8918 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8919 023a 5200     		lsls	r2, r2, #1
 8920 023c D2B2     		uxtb	r2, r2
 8921 023e 1A70     		strb	r2, [r3]
2392:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 8922              		.loc 1 2392 0 discriminator 3
 8923 0240 7B69     		ldr	r3, [r7, #20]
 8924 0242 0133     		adds	r3, r3, #1
 8925 0244 7B61     		str	r3, [r7, #20]
 8926              	.L442:
2392:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 8927              		.loc 1 2392 0 is_stmt 0 discriminator 1
 8928 0246 7B69     		ldr	r3, [r7, #20]
 8929 0248 072B     		cmp	r3, #7
 8930 024a DFDD     		ble	.L443
2390:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 8931              		.loc 1 2390 0 is_stmt 1 discriminator 2
 8932 024c BB69     		ldr	r3, [r7, #24]
 8933 024e 0133     		adds	r3, r3, #1
 8934 0250 BB61     		str	r3, [r7, #24]
 8935              	.L441:
2390:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 8936              		.loc 1 2390 0 is_stmt 0 discriminator 1
 8937 0252 BB69     		ldr	r3, [r7, #24]
 8938 0254 312B     		cmp	r3, #49
 8939 0256 D6DD     		ble	.L444
2395:bluetooth_rxtx.c **** 			}
2396:bluetooth_rxtx.c **** 		}
2397:bluetooth_rxtx.c **** 
2398:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 8940              		.loc 1 2398 0 is_stmt 1
 8941 0258 244B     		ldr	r3, .L447+76
 8942 025a 1B68     		ldr	r3, [r3]
 8943 025c 2148     		ldr	r0, .L447+68
 8944 025e 9847     		blx	r3
 8945 0260 B860     		str	r0, [r7, #8]
2399:bluetooth_rxtx.c **** 		if (!ret) break;
 8946              		.loc 1 2399 0
 8947 0262 BB68     		ldr	r3, [r7, #8]
 8948 0264 002B     		cmp	r3, #0
 8949 0266 00D1     		bne	.L433
 8950 0268 0CE0     		b	.L445
 8951              	.L433:
2400:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccQUMSla.s 			page 199


2401:bluetooth_rxtx.c **** 	rx_continue:
2402:bluetooth_rxtx.c **** 		rx_tc = 0;
 8952              		.loc 1 2402 0
 8953 026a 164B     		ldr	r3, .L447+36
 8954 026c 0022     		movs	r2, #0
 8955 026e 1A60     		str	r2, [r3]
2403:bluetooth_rxtx.c **** 		rx_err = 0;
 8956              		.loc 1 2403 0
 8957 0270 154B     		ldr	r3, .L447+40
 8958 0272 0022     		movs	r2, #0
 8959 0274 1A60     		str	r2, [r3]
 8960              	.L420:
 8961              	.LBE13:
2297:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 8962              		.loc 1 2297 0
 8963 0276 1E4B     		ldr	r3, .L447+80
 8964 0278 1B78     		ldrb	r3, [r3]
 8965 027a DBB2     		uxtb	r3, r3
 8966 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 8967 027e 9A42     		cmp	r2, r3
 8968 0280 3FF4E3AE 		beq	.L446
 8969              	.L445:
2404:bluetooth_rxtx.c **** 	}
2405:bluetooth_rxtx.c **** 
2406:bluetooth_rxtx.c **** 	// disable USB interrupts
2407:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 8970              		.loc 1 2407 0
 8971 0284 1B4B     		ldr	r3, .L447+84
 8972 0286 4FF08072 		mov	r2, #16777216
 8973 028a 1A60     		str	r2, [r3]
2408:bluetooth_rxtx.c **** 
2409:bluetooth_rxtx.c **** 	// reset the radio completely
2410:bluetooth_rxtx.c **** 	cc2400_idle();
 8974              		.loc 1 2410 0
 8975 028c FFF7FEFF 		bl	cc2400_idle
2411:bluetooth_rxtx.c **** 	dio_ssp_stop();
 8976              		.loc 1 2411 0
 8977 0290 FFF7FEFF 		bl	dio_ssp_stop
2412:bluetooth_rxtx.c **** 	cs_trigger_disable();
 8978              		.loc 1 2412 0
 8979 0294 FFF7FEFF 		bl	cs_trigger_disable
2413:bluetooth_rxtx.c **** }
 8980              		.loc 1 2413 0
 8981 0298 2037     		adds	r7, r7, #32
 8982              		.cfi_def_cfa_offset 8
 8983 029a BD46     		mov	sp, r7
 8984              		.cfi_def_cfa_register 13
 8985              		@ sp needed
 8986 029c 80BD     		pop	{r7, pc}
 8987              	.L448:
 8988 029e 00BF     		.align	2
 8989              	.L447:
 8990 02a0 00000000 		.word	modulation
 8991 02a4 00000000 		.word	mode
 8992 02a8 00E100E0 		.word	-536813312
 8993 02ac 3CC00920 		.word	537509948
 8994 02b0 00000000 		.word	requested_channel
ARM GAS  /tmp/ccQUMSla.s 			page 200


 8995 02b4 00000000 		.word	channel
 8996 02b8 00000000 		.word	do_hop
 8997 02bc 00000000 		.word	cs_trigger
 8998 02c0 00000000 		.word	cs_threshold_cur
 8999 02c4 00000000 		.word	rx_tc
 9000 02c8 00000000 		.word	rx_err
 9001 02cc 00000000 		.word	active_rxbuf
 9002 02d0 00000000 		.word	idle_rxbuf
 9003 02d4 00000000 		.word	status
 9004 02d8 00000000 		.word	cs_no_squelch
 9005 02dc 00000000 		.word	rssi_max
 9006 02e0 00000000 		.word	keepalive_trigger
 9007 02e4 00000000 		.word	unpacked
 9008 02e8 90010000 		.word	unpacked+400
 9009 02ec 00000000 		.word	data_cb
 9010 02f0 00000000 		.word	requested_mode
 9011 02f4 80E100E0 		.word	-536813184
 9012              		.cfi_endproc
 9013              	.LFE39:
 9015              		.section	.text.bt_le_sync,"ax",%progbits
 9016              		.align	2
 9017              		.global	bt_le_sync
 9018              		.thumb
 9019              		.thumb_func
 9021              	bt_le_sync:
 9022              	.LFB40:
2414:bluetooth_rxtx.c **** 
2415:bluetooth_rxtx.c **** 
2416:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
2417:bluetooth_rxtx.c **** {
 9023              		.loc 1 2417 0
 9024              		.cfi_startproc
 9025              		@ args = 0, pretend = 0, frame = 104
 9026              		@ frame_needed = 1, uses_anonymous_args = 0
 9027 0000 90B5     		push	{r4, r7, lr}
 9028              		.cfi_def_cfa_offset 12
 9029              		.cfi_offset 4, -12
 9030              		.cfi_offset 7, -8
 9031              		.cfi_offset 14, -4
 9032 0002 9BB0     		sub	sp, sp, #108
 9033              		.cfi_def_cfa_offset 120
 9034 0004 00AF     		add	r7, sp, #0
 9035              		.cfi_def_cfa_register 7
 9036 0006 0346     		mov	r3, r0
 9037 0008 FB71     		strb	r3, [r7, #7]
2418:bluetooth_rxtx.c **** 	int i;
2419:bluetooth_rxtx.c **** 	int8_t rssi;
2420:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
2421:bluetooth_rxtx.c **** 
2422:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 9038              		.loc 1 2422 0
 9039 000a 874B     		ldr	r3, .L495
 9040 000c 0122     		movs	r2, #1
 9041 000e 1A70     		strb	r2, [r3]
2423:bluetooth_rxtx.c **** 	mode = active_mode;
 9042              		.loc 1 2423 0
 9043 0010 864A     		ldr	r2, .L495+4
ARM GAS  /tmp/ccQUMSla.s 			page 201


 9044 0012 FB79     		ldrb	r3, [r7, #7]
 9045 0014 1370     		strb	r3, [r2]
2424:bluetooth_rxtx.c **** 
2425:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 9046              		.loc 1 2425 0
 9047 0016 864B     		ldr	r3, .L495+8
 9048 0018 0122     		movs	r2, #1
 9049 001a 1A75     		strb	r2, [r3, #20]
2426:bluetooth_rxtx.c **** 
2427:bluetooth_rxtx.c **** 	// enable USB interrupts
2428:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 9050              		.loc 1 2428 0
 9051 001c 854B     		ldr	r3, .L495+12
 9052 001e 4FF08072 		mov	r2, #16777216
 9053 0022 1A60     		str	r2, [r3]
2429:bluetooth_rxtx.c **** 
2430:bluetooth_rxtx.c **** 	RXLED_CLR;
 9054              		.loc 1 2430 0
 9055 0024 844B     		ldr	r3, .L495+16
 9056 0026 1022     		movs	r2, #16
 9057 0028 1A60     		str	r2, [r3]
2431:bluetooth_rxtx.c **** 
2432:bluetooth_rxtx.c **** 	queue_init();
 9058              		.loc 1 2432 0
 9059 002a FFF7FEFF 		bl	queue_init
2433:bluetooth_rxtx.c **** 	dio_ssp_init();
 9060              		.loc 1 2433 0
 9061 002e FFF7FEFF 		bl	dio_ssp_init
2434:bluetooth_rxtx.c **** 	dma_init_le();
 9062              		.loc 1 2434 0
 9063 0032 FFF7FEFF 		bl	dma_init_le
2435:bluetooth_rxtx.c **** 	dio_ssp_start();
 9064              		.loc 1 2435 0
 9065 0036 FFF7FEFF 		bl	dio_ssp_start
2436:bluetooth_rxtx.c **** 
2437:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 9066              		.loc 1 2437 0
 9067 003a 7D4B     		ldr	r3, .L495+8
 9068 003c 1B68     		ldr	r3, [r3]
 9069 003e 1846     		mov	r0, r3
 9070 0040 FFF7FEFF 		bl	rbit
 9071 0044 0346     		mov	r3, r0
 9072 0046 1846     		mov	r0, r3
 9073 0048 FFF7FEFF 		bl	cc2400_rx_sync
2438:bluetooth_rxtx.c **** 
2439:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 9074              		.loc 1 2439 0
 9075 004c 47E2     		b	.L450
 9076              	.L494:
 9077              	.LBB14:
2440:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 9078              		.loc 1 2440 0
 9079 004e 7B4B     		ldr	r3, .L495+20
 9080 0050 1B88     		ldrh	r3, [r3]	@ movhi
 9081 0052 9BB2     		uxth	r3, r3
 9082 0054 002B     		cmp	r3, #0
 9083 0056 29D0     		beq	.L451
ARM GAS  /tmp/ccQUMSla.s 			page 202


2441:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 9084              		.loc 1 2441 0
 9085 0058 6420     		movs	r0, #100
 9086 005a FFF7FEFF 		bl	cc2400_strobe
2442:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 9087              		.loc 1 2442 0
 9088 005e 00BF     		nop
 9089              	.L452:
 9090              		.loc 1 2442 0 is_stmt 0 discriminator 1
 9091 0060 FFF7FEFF 		bl	cc2400_status
 9092 0064 0346     		mov	r3, r0
 9093 0066 03F00403 		and	r3, r3, #4
 9094 006a 002B     		cmp	r3, #0
 9095 006c F8D1     		bne	.L452
2443:bluetooth_rxtx.c **** 
2444:bluetooth_rxtx.c **** 			/* Retune */
2445:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 9096              		.loc 1 2445 0 is_stmt 1
 9097 006e 744B     		ldr	r3, .L495+24
 9098 0070 1B88     		ldrh	r3, [r3]	@ movhi
 9099 0072 9BB2     		uxth	r3, r3
 9100 0074 013B     		subs	r3, r3, #1
 9101 0076 9BB2     		uxth	r3, r3
 9102 0078 0220     		movs	r0, #2
 9103 007a 1946     		mov	r1, r3
 9104 007c FFF7FEFF 		bl	cc2400_set
2446:bluetooth_rxtx.c **** 
2447:bluetooth_rxtx.c **** 			/* Wait for lock */
2448:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 9105              		.loc 1 2448 0
 9106 0080 6120     		movs	r0, #97
 9107 0082 FFF7FEFF 		bl	cc2400_strobe
2449:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 9108              		.loc 1 2449 0
 9109 0086 00BF     		nop
 9110              	.L453:
 9111              		.loc 1 2449 0 is_stmt 0 discriminator 1
 9112 0088 FFF7FEFF 		bl	cc2400_status
 9113 008c 0346     		mov	r3, r0
 9114 008e 03F00403 		and	r3, r3, #4
 9115 0092 002B     		cmp	r3, #0
 9116 0094 F8D0     		beq	.L453
2450:bluetooth_rxtx.c **** 
2451:bluetooth_rxtx.c **** 			/* RX mode */
2452:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9117              		.loc 1 2452 0 is_stmt 1
 9118 0096 6220     		movs	r0, #98
 9119 0098 FFF7FEFF 		bl	cc2400_strobe
2453:bluetooth_rxtx.c **** 
2454:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 9120              		.loc 1 2454 0
 9121 009c 674B     		ldr	r3, .L495+20
 9122 009e 1B88     		ldrh	r3, [r3]	@ movhi
 9123 00a0 9AB2     		uxth	r2, r3
 9124 00a2 684B     		ldr	r3, .L495+28
 9125 00a4 1A80     		strh	r2, [r3]	@ movhi
2455:bluetooth_rxtx.c **** 			requested_channel = 0;
ARM GAS  /tmp/ccQUMSla.s 			page 203


 9126              		.loc 1 2455 0
 9127 00a6 654B     		ldr	r3, .L495+20
 9128 00a8 0022     		movs	r2, #0
 9129 00aa 1A80     		strh	r2, [r3]	@ movhi
 9130              	.L451:
2456:bluetooth_rxtx.c **** 		}
2457:bluetooth_rxtx.c **** 
2458:bluetooth_rxtx.c **** 		RXLED_CLR;
 9131              		.loc 1 2458 0
 9132 00ac 624B     		ldr	r3, .L495+16
 9133 00ae 1022     		movs	r2, #16
 9134 00b0 1A60     		str	r2, [r3]
2459:bluetooth_rxtx.c **** 
2460:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2461:bluetooth_rxtx.c **** 		rssi_reset();
 9135              		.loc 1 2461 0
 9136 00b2 FFF7FEFF 		bl	rssi_reset
2462:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 9137              		.loc 1 2462 0
 9138 00b6 00BF     		nop
 9139              	.L455:
 9140              		.loc 1 2462 0 is_stmt 0 discriminator 4
 9141 00b8 634B     		ldr	r3, .L495+32
 9142 00ba 1B68     		ldr	r3, [r3]
 9143 00bc 002B     		cmp	r3, #0
 9144 00be 0ED1     		bne	.L454
 9145              		.loc 1 2462 0 discriminator 1
 9146 00c0 624B     		ldr	r3, .L495+36
 9147 00c2 1B68     		ldr	r3, [r3]
 9148 00c4 002B     		cmp	r3, #0
 9149 00c6 0AD1     		bne	.L454
 9150              		.loc 1 2462 0 discriminator 2
 9151 00c8 614B     		ldr	r3, .L495+40
 9152 00ca 1B78     		ldrb	r3, [r3]
 9153 00cc DBB2     		uxtb	r3, r3
 9154 00ce 002B     		cmp	r3, #0
 9155 00d0 05D1     		bne	.L454
 9156              		.loc 1 2462 0 discriminator 3
 9157 00d2 604B     		ldr	r3, .L495+44
 9158 00d4 1B78     		ldrb	r3, [r3]
 9159 00d6 DBB2     		uxtb	r3, r3
 9160 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 9161 00da 9A42     		cmp	r2, r3
 9162 00dc ECD0     		beq	.L455
 9163              	.L454:
2463:bluetooth_rxtx.c **** 			;
2464:bluetooth_rxtx.c **** 
2465:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 9164              		.loc 1 2465 0 is_stmt 1
 9165 00de 5D4B     		ldr	r3, .L495+44
 9166 00e0 1B78     		ldrb	r3, [r3]
 9167 00e2 DBB2     		uxtb	r3, r3
 9168 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 9169 00e6 9A42     		cmp	r2, r3
 9170 00e8 00D0     		beq	.L456
2466:bluetooth_rxtx.c **** 			goto cleanup;
 9171              		.loc 1 2466 0
ARM GAS  /tmp/ccQUMSla.s 			page 204


 9172 00ea FFE1     		b	.L493
 9173              	.L456:
2467:bluetooth_rxtx.c **** 		}
2468:bluetooth_rxtx.c **** 
2469:bluetooth_rxtx.c **** 		if (rx_err) {
 9174              		.loc 1 2469 0
 9175 00ec 574B     		ldr	r3, .L495+36
 9176 00ee 1B68     		ldr	r3, [r3]
 9177 00f0 002B     		cmp	r3, #0
 9178 00f2 07D0     		beq	.L458
2470:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 9179              		.loc 1 2470 0
 9180 00f4 584B     		ldr	r3, .L495+48
 9181 00f6 1B78     		ldrb	r3, [r3]
 9182 00f8 DBB2     		uxtb	r3, r3
 9183 00fa 43F00203 		orr	r3, r3, #2
 9184 00fe DAB2     		uxtb	r2, r3
 9185 0100 554B     		ldr	r3, .L495+48
 9186 0102 1A70     		strb	r2, [r3]
 9187              	.L458:
2471:bluetooth_rxtx.c **** 		}
2472:bluetooth_rxtx.c **** 
2473:bluetooth_rxtx.c **** 		if (do_hop)
 9188              		.loc 1 2473 0
 9189 0104 524B     		ldr	r3, .L495+40
 9190 0106 1B78     		ldrb	r3, [r3]
 9191 0108 DBB2     		uxtb	r3, r3
 9192 010a 002B     		cmp	r3, #0
 9193 010c 00D0     		beq	.L459
2474:bluetooth_rxtx.c **** 			goto rx_flush;
 9194              		.loc 1 2474 0
 9195 010e 2BE1     		b	.L460
 9196              	.L459:
2475:bluetooth_rxtx.c **** 
2476:bluetooth_rxtx.c **** 		/* No DMA transfer? */
2477:bluetooth_rxtx.c **** 		if (!rx_tc)
 9197              		.loc 1 2477 0
 9198 0110 4D4B     		ldr	r3, .L495+32
 9199 0112 1B68     		ldr	r3, [r3]
 9200 0114 002B     		cmp	r3, #0
 9201 0116 00D1     		bne	.L461
 9202 0118 E1E1     		b	.L450
 9203              	.L461:
2478:bluetooth_rxtx.c **** 			continue;
2479:bluetooth_rxtx.c **** 
2480:bluetooth_rxtx.c **** 		/////////////////////
2481:bluetooth_rxtx.c **** 		// process the packet
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2484:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 9204              		.loc 1 2484 0
 9205 011a 07F10803 		add	r3, r7, #8
 9206 011e FB65     		str	r3, [r7, #92]
2485:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 9207              		.loc 1 2485 0
 9208 0120 434B     		ldr	r3, .L495+8
 9209 0122 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 205


 9210 0124 BB60     		str	r3, [r7, #8]
2486:bluetooth_rxtx.c **** 
2487:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 9211              		.loc 1 2487 0
 9212 0126 464B     		ldr	r3, .L495+24
 9213 0128 1B88     		ldrh	r3, [r3]	@ movhi
 9214 012a 9BB2     		uxth	r3, r3
 9215 012c DBB2     		uxtb	r3, r3
 9216 012e 623B     		subs	r3, r3, #98
 9217 0130 DBB2     		uxtb	r3, r3
 9218 0132 1846     		mov	r0, r3
 9219 0134 FFF7FEFF 		bl	btle_channel_index
 9220 0138 0346     		mov	r3, r0
 9221 013a 1A46     		mov	r2, r3
 9222 013c 1346     		mov	r3, r2
 9223 013e 5B00     		lsls	r3, r3, #1
 9224 0140 1344     		add	r3, r3, r2
 9225 0142 1B01     		lsls	r3, r3, #4
 9226 0144 454A     		ldr	r2, .L495+52
 9227 0146 1344     		add	r3, r3, r2
 9228 0148 BB65     		str	r3, [r7, #88]
2488:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 9229              		.loc 1 2488 0
 9230 014a 0023     		movs	r3, #0
 9231 014c 7B66     		str	r3, [r7, #100]
 9232 014e 34E0     		b	.L462
 9233              	.L465:
 9234              	.LBB15:
2489:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9235              		.loc 1 2489 0 discriminator 3
 9236 0150 434A     		ldr	r2, .L495+56
 9237 0152 7B6E     		ldr	r3, [r7, #100]
 9238 0154 1344     		add	r3, r3, r2
 9239 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9240 0158 1A06     		lsls	r2, r3, #24
2490:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9241              		.loc 1 2490 0 discriminator 3
 9242 015a 7B6E     		ldr	r3, [r7, #100]
 9243 015c 0133     		adds	r3, r3, #1
 9244 015e 4049     		ldr	r1, .L495+56
 9245 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9246 0162 1B04     		lsls	r3, r3, #16
 9247 0164 1A43     		orrs	r2, r2, r3
2491:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 9248              		.loc 1 2491 0 discriminator 3
 9249 0166 7B6E     		ldr	r3, [r7, #100]
 9250 0168 0233     		adds	r3, r3, #2
 9251 016a 3D49     		ldr	r1, .L495+56
 9252 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9253 016e 1B02     		lsls	r3, r3, #8
 9254 0170 1343     		orrs	r3, r3, r2
2492:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 9255              		.loc 1 2492 0 discriminator 3
 9256 0172 7A6E     		ldr	r2, [r7, #100]
 9257 0174 0332     		adds	r2, r2, #3
 9258 0176 3A49     		ldr	r1, .L495+56
 9259 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
ARM GAS  /tmp/ccQUMSla.s 			page 206


 9260 017a 1343     		orrs	r3, r3, r2
2489:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9261              		.loc 1 2489 0 discriminator 3
 9262 017c 7B65     		str	r3, [r7, #84]
2493:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 9263              		.loc 1 2493 0 discriminator 3
 9264 017e 7B6E     		ldr	r3, [r7, #100]
 9265 0180 002B     		cmp	r3, #0
 9266 0182 00DA     		bge	.L463
 9267 0184 0333     		adds	r3, r3, #3
 9268              	.L463:
 9269 0186 9B10     		asrs	r3, r3, #2
 9270 0188 5C1C     		adds	r4, r3, #1
 9271 018a 786D     		ldr	r0, [r7, #84]
 9272 018c FFF7FEFF 		bl	rbit
 9273 0190 0146     		mov	r1, r0
 9274 0192 7B6E     		ldr	r3, [r7, #100]
 9275 0194 002B     		cmp	r3, #0
 9276 0196 00DA     		bge	.L464
 9277 0198 0333     		adds	r3, r3, #3
 9278              	.L464:
 9279 019a 9B10     		asrs	r3, r3, #2
 9280 019c 9B00     		lsls	r3, r3, #2
 9281 019e BA6D     		ldr	r2, [r7, #88]
 9282 01a0 1344     		add	r3, r3, r2
 9283 01a2 1B68     		ldr	r3, [r3]
 9284 01a4 81EA0302 		eor	r2, r1, r3
 9285 01a8 A300     		lsls	r3, r4, #2
 9286 01aa 07F16801 		add	r1, r7, #104
 9287 01ae 0B44     		add	r3, r3, r1
 9288 01b0 43F8602C 		str	r2, [r3, #-96]
 9289              	.LBE15:
2488:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9290              		.loc 1 2488 0 discriminator 3
 9291 01b4 7B6E     		ldr	r3, [r7, #100]
 9292 01b6 0433     		adds	r3, r3, #4
 9293 01b8 7B66     		str	r3, [r7, #100]
 9294              	.L462:
2488:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9295              		.loc 1 2488 0 is_stmt 0 discriminator 1
 9296 01ba 7B6E     		ldr	r3, [r7, #100]
 9297 01bc 032B     		cmp	r3, #3
 9298 01be C7DD     		ble	.L465
2494:bluetooth_rxtx.c **** 		}
2495:bluetooth_rxtx.c **** 
2496:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 9299              		.loc 1 2496 0 is_stmt 1
 9300 01c0 FB6D     		ldr	r3, [r7, #92]
 9301 01c2 0533     		adds	r3, r3, #5
 9302 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9303 01c6 03F03F03 		and	r3, r3, #63
 9304 01ca 0233     		adds	r3, r3, #2
 9305 01cc 3B65     		str	r3, [r7, #80]
2497:bluetooth_rxtx.c **** 		if (len > 39)
 9306              		.loc 1 2497 0
 9307 01ce 3B6D     		ldr	r3, [r7, #80]
 9308 01d0 272B     		cmp	r3, #39
ARM GAS  /tmp/ccQUMSla.s 			page 207


 9309 01d2 00D9     		bls	.L466
2498:bluetooth_rxtx.c **** 			goto rx_flush;
 9310              		.loc 1 2498 0
 9311 01d4 C8E0     		b	.L460
 9312              	.L466:
2499:bluetooth_rxtx.c **** 
2500:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
2501:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
2502:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 9313              		.loc 1 2502 0
 9314 01d6 3B6D     		ldr	r3, [r7, #80]
 9315 01d8 0633     		adds	r3, r3, #6
 9316 01da 9B08     		lsrs	r3, r3, #2
 9317 01dc FB64     		str	r3, [r7, #76]
2503:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 9318              		.loc 1 2503 0
 9319 01de FB6C     		ldr	r3, [r7, #76]
 9320 01e0 0A2B     		cmp	r3, #10
 9321 01e2 0DD8     		bhi	.L467
2504:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 9322              		.loc 1 2504 0
 9323 01e4 00BF     		nop
 9324              	.L469:
 9325              		.loc 1 2504 0 is_stmt 0 discriminator 2
 9326 01e6 1F4B     		ldr	r3, .L495+60
 9327 01e8 1A68     		ldr	r2, [r3]
 9328 01ea FB6C     		ldr	r3, [r7, #76]
 9329 01ec 9B00     		lsls	r3, r3, #2
 9330 01ee 1C49     		ldr	r1, .L495+56
 9331 01f0 0B44     		add	r3, r3, r1
 9332 01f2 9A42     		cmp	r2, r3
 9333 01f4 0FD2     		bcs	.L468
 9334              		.loc 1 2504 0 discriminator 1
 9335 01f6 154B     		ldr	r3, .L495+36
 9336 01f8 1B68     		ldr	r3, [r3]
 9337 01fa 002B     		cmp	r3, #0
 9338 01fc F3D0     		beq	.L469
 9339 01fe 0AE0     		b	.L468
 9340              	.L467:
2505:bluetooth_rxtx.c **** 				;
2506:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
2507:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 9341              		.loc 1 2507 0 is_stmt 1
 9342 0200 00BF     		nop
 9343              	.L470:
 9344              		.loc 1 2507 0 is_stmt 0 discriminator 2
 9345 0202 194B     		ldr	r3, .L495+64
 9346 0204 1B68     		ldr	r3, [r3]
 9347 0206 03F00103 		and	r3, r3, #1
 9348 020a 002B     		cmp	r3, #0
 9349 020c 03D0     		beq	.L468
 9350              		.loc 1 2507 0 discriminator 1
 9351 020e 0F4B     		ldr	r3, .L495+36
 9352 0210 1B68     		ldr	r3, [r3]
 9353 0212 002B     		cmp	r3, #0
 9354 0214 F5D0     		beq	.L470
 9355              	.L468:
ARM GAS  /tmp/ccQUMSla.s 			page 208


2508:bluetooth_rxtx.c **** 				;
2509:bluetooth_rxtx.c **** 		}
2510:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 9356              		.loc 1 2510 0 is_stmt 1
 9357 0216 154A     		ldr	r2, .L495+68
 9358 0218 144B     		ldr	r3, .L495+68
 9359 021a 1B68     		ldr	r3, [r3]
 9360 021c 23F00103 		bic	r3, r3, #1
 9361 0220 1360     		str	r3, [r2]
2511:bluetooth_rxtx.c **** 
2512:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
2513:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 9362              		.loc 1 2513 0
 9363 0222 0423     		movs	r3, #4
 9364 0224 7B66     		str	r3, [r7, #100]
 9365 0226 58E0     		b	.L471
 9366              	.L496:
 9367              		.align	2
 9368              	.L495:
 9369 0228 00000000 		.word	modulation
 9370 022c 00000000 		.word	mode
 9371 0230 00000000 		.word	le
 9372 0234 00E100E0 		.word	-536813312
 9373 0238 3CC00920 		.word	537509948
 9374 023c 00000000 		.word	requested_channel
 9375 0240 00000000 		.word	channel
 9376 0244 00000000 		.word	saved_request
 9377 0248 00000000 		.word	rx_tc
 9378 024c 00000000 		.word	rx_err
 9379 0250 00000000 		.word	do_hop
 9380 0254 00000000 		.word	requested_mode
 9381 0258 00000000 		.word	status
 9382 025c 10010000 		.word	whitening_word
 9383 0260 00000000 		.word	rxbuf1
 9384 0264 04410050 		.word	1342193924
 9385 0268 10410050 		.word	1342193936
 9386 026c 24000340 		.word	1073938468
 9387              	.L474:
 9388              	.LBB16:
2514:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9389              		.loc 1 2514 0 discriminator 3
 9390 0270 A54A     		ldr	r2, .L497
 9391 0272 7B6E     		ldr	r3, [r7, #100]
 9392 0274 1344     		add	r3, r3, r2
 9393 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9394 0278 1A06     		lsls	r2, r3, #24
2515:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9395              		.loc 1 2515 0 discriminator 3
 9396 027a 7B6E     		ldr	r3, [r7, #100]
 9397 027c 0133     		adds	r3, r3, #1
 9398 027e A249     		ldr	r1, .L497
 9399 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9400 0282 1B04     		lsls	r3, r3, #16
 9401 0284 1A43     		orrs	r2, r2, r3
2516:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 9402              		.loc 1 2516 0 discriminator 3
 9403 0286 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/ccQUMSla.s 			page 209


 9404 0288 0233     		adds	r3, r3, #2
 9405 028a 9F49     		ldr	r1, .L497
 9406 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9407 028e 1B02     		lsls	r3, r3, #8
 9408 0290 1343     		orrs	r3, r3, r2
2517:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 9409              		.loc 1 2517 0 discriminator 3
 9410 0292 7A6E     		ldr	r2, [r7, #100]
 9411 0294 0332     		adds	r2, r2, #3
 9412 0296 9C49     		ldr	r1, .L497
 9413 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9414 029a 1343     		orrs	r3, r3, r2
2514:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9415              		.loc 1 2514 0 discriminator 3
 9416 029c BB64     		str	r3, [r7, #72]
2518:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 9417              		.loc 1 2518 0 discriminator 3
 9418 029e 7B6E     		ldr	r3, [r7, #100]
 9419 02a0 002B     		cmp	r3, #0
 9420 02a2 00DA     		bge	.L472
 9421 02a4 0333     		adds	r3, r3, #3
 9422              	.L472:
 9423 02a6 9B10     		asrs	r3, r3, #2
 9424 02a8 5C1C     		adds	r4, r3, #1
 9425 02aa B86C     		ldr	r0, [r7, #72]
 9426 02ac FFF7FEFF 		bl	rbit
 9427 02b0 0146     		mov	r1, r0
 9428 02b2 7B6E     		ldr	r3, [r7, #100]
 9429 02b4 002B     		cmp	r3, #0
 9430 02b6 00DA     		bge	.L473
 9431 02b8 0333     		adds	r3, r3, #3
 9432              	.L473:
 9433 02ba 9B10     		asrs	r3, r3, #2
 9434 02bc 9B00     		lsls	r3, r3, #2
 9435 02be BA6D     		ldr	r2, [r7, #88]
 9436 02c0 1344     		add	r3, r3, r2
 9437 02c2 1B68     		ldr	r3, [r3]
 9438 02c4 81EA0302 		eor	r2, r1, r3
 9439 02c8 A300     		lsls	r3, r4, #2
 9440 02ca 07F16801 		add	r1, r7, #104
 9441 02ce 0B44     		add	r3, r3, r1
 9442 02d0 43F8602C 		str	r2, [r3, #-96]
 9443              	.LBE16:
2513:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9444              		.loc 1 2513 0 discriminator 3
 9445 02d4 7B6E     		ldr	r3, [r7, #100]
 9446 02d6 0433     		adds	r3, r3, #4
 9447 02d8 7B66     		str	r3, [r7, #100]
 9448              	.L471:
2513:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9449              		.loc 1 2513 0 is_stmt 0 discriminator 1
 9450 02da 7B6E     		ldr	r3, [r7, #100]
 9451 02dc 2B2B     		cmp	r3, #43
 9452 02de C7DD     		ble	.L474
2519:bluetooth_rxtx.c **** 		}
2520:bluetooth_rxtx.c **** 
2521:bluetooth_rxtx.c **** 		if (le.crc_verify) {
ARM GAS  /tmp/ccQUMSla.s 			page 210


 9453              		.loc 1 2521 0 is_stmt 1
 9454 02e0 8A4B     		ldr	r3, .L497+4
 9455 02e2 1B69     		ldr	r3, [r3, #16]
 9456 02e4 002B     		cmp	r3, #0
 9457 02e6 23D0     		beq	.L475
 9458              	.LBB17:
2522:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 9459              		.loc 1 2522 0
 9460 02e8 884B     		ldr	r3, .L497+4
 9461 02ea D968     		ldr	r1, [r3, #12]
 9462 02ec FB6D     		ldr	r3, [r7, #92]
 9463 02ee 1A1D     		adds	r2, r3, #4
 9464 02f0 3B6D     		ldr	r3, [r7, #80]
 9465 02f2 0846     		mov	r0, r1
 9466 02f4 1146     		mov	r1, r2
 9467 02f6 1A46     		mov	r2, r3
 9468 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 9469 02fc 7864     		str	r0, [r7, #68]
2523:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 9470              		.loc 1 2523 0
 9471 02fe 3B6D     		ldr	r3, [r7, #80]
 9472 0300 0633     		adds	r3, r3, #6
 9473 0302 FA6D     		ldr	r2, [r7, #92]
 9474 0304 1344     		add	r3, r3, r2
 9475 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9476 0308 1A04     		lsls	r2, r3, #16
2524:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 9477              		.loc 1 2524 0
 9478 030a 3B6D     		ldr	r3, [r7, #80]
 9479 030c 0533     		adds	r3, r3, #5
 9480 030e F96D     		ldr	r1, [r7, #92]
 9481 0310 0B44     		add	r3, r3, r1
 9482 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9483 0314 1B02     		lsls	r3, r3, #8
 9484 0316 1343     		orrs	r3, r3, r2
2525:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 9485              		.loc 1 2525 0
 9486 0318 3A6D     		ldr	r2, [r7, #80]
 9487 031a 0432     		adds	r2, r2, #4
 9488 031c F96D     		ldr	r1, [r7, #92]
 9489 031e 0A44     		add	r2, r2, r1
 9490 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9491 0322 1343     		orrs	r3, r3, r2
2523:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 9492              		.loc 1 2523 0
 9493 0324 3B64     		str	r3, [r7, #64]
2526:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 9494              		.loc 1 2526 0
 9495 0326 7A6C     		ldr	r2, [r7, #68]
 9496 0328 3B6C     		ldr	r3, [r7, #64]
 9497 032a 9A42     		cmp	r2, r3
 9498 032c 00D0     		beq	.L475
2527:bluetooth_rxtx.c **** 				goto rx_flush;
 9499              		.loc 1 2527 0
 9500 032e 1BE0     		b	.L460
 9501              	.L475:
 9502              	.LBE17:
ARM GAS  /tmp/ccQUMSla.s 			page 211


2528:bluetooth_rxtx.c **** 		}
2529:bluetooth_rxtx.c **** 
2530:bluetooth_rxtx.c **** 
2531:bluetooth_rxtx.c **** 		RXLED_SET;
 9503              		.loc 1 2531 0
 9504 0330 774B     		ldr	r3, .L497+8
 9505 0332 1022     		movs	r2, #16
 9506 0334 1A60     		str	r2, [r3]
2532:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 9507              		.loc 1 2532 0
 9508 0336 774B     		ldr	r3, .L497+12
 9509 0338 1B68     		ldr	r3, [r3]
 9510 033a 07F10802 		add	r2, r7, #8
 9511 033e 1046     		mov	r0, r2
 9512 0340 9847     		blx	r3
2533:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 9513              		.loc 1 2533 0
 9514 0342 07F10803 		add	r3, r7, #8
 9515 0346 0120     		movs	r0, #1
 9516 0348 1946     		mov	r1, r3
 9517 034a FFF7FEFF 		bl	enqueue
2534:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 9518              		.loc 1 2534 0
 9519 034e 724B     		ldr	r3, .L497+16
 9520 0350 1B68     		ldr	r3, [r3]
 9521 0352 C3F31303 		ubfx	r3, r3, #0, #20
 9522 0356 40F63542 		movw	r2, #3125
 9523 035a 02FB03F2 		mul	r2, r2, r3
 9524 035e 6F4B     		ldr	r3, .L497+20
 9525 0360 1B68     		ldr	r3, [r3]
 9526 0362 1344     		add	r3, r3, r2
 9527 0364 694A     		ldr	r2, .L497+4
 9528 0366 1364     		str	r3, [r2, #64]
 9529              	.L460:
2535:bluetooth_rxtx.c **** 
2536:bluetooth_rxtx.c **** 	rx_flush:
2537:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 9530              		.loc 1 2537 0
 9531 0368 6120     		movs	r0, #97
 9532 036a FFF7FEFF 		bl	cc2400_strobe
2538:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 9533              		.loc 1 2538 0
 9534 036e 00BF     		nop
 9535              	.L476:
 9536              		.loc 1 2538 0 is_stmt 0 discriminator 1
 9537 0370 FFF7FEFF 		bl	cc2400_status
 9538 0374 0346     		mov	r3, r0
 9539 0376 03F00403 		and	r3, r3, #4
 9540 037a 002B     		cmp	r3, #0
 9541 037c F8D0     		beq	.L476
2539:bluetooth_rxtx.c **** 
2540:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
2541:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 9542              		.loc 1 2541 0 is_stmt 1
 9543 037e 684A     		ldr	r2, .L497+24
 9544 0380 674B     		ldr	r3, .L497+24
 9545 0382 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 212


 9546 0384 23F00103 		bic	r3, r3, #1
 9547 0388 1360     		str	r3, [r2]
2542:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 9548              		.loc 1 2542 0
 9549 038a 03E0     		b	.L477
 9550              	.L478:
 9551              	.LBB18:
2543:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 9552              		.loc 1 2543 0
 9553 038c 654B     		ldr	r3, .L497+28
 9554 038e 1B68     		ldr	r3, [r3]
 9555 0390 87F83F30 		strb	r3, [r7, #63]
 9556              	.L477:
 9557              	.LBE18:
2542:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 9558              		.loc 1 2542 0
 9559 0394 644B     		ldr	r3, .L497+32
 9560 0396 1B68     		ldr	r3, [r3]
 9561 0398 03F00403 		and	r3, r3, #4
 9562 039c 002B     		cmp	r3, #0
 9563 039e F5D1     		bne	.L478
2544:bluetooth_rxtx.c **** 		}
2545:bluetooth_rxtx.c **** 
2546:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2547:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 9564              		.loc 1 2547 0
 9565 03a0 5D4B     		ldr	r3, .L497+16
 9566 03a2 1B68     		ldr	r3, [r3]
 9567 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 9568 03a8 40F63542 		movw	r2, #3125
 9569 03ac 02FB03F2 		mul	r2, r2, r3
 9570 03b0 5A4B     		ldr	r3, .L497+20
 9571 03b2 1B68     		ldr	r3, [r3]
 9572 03b4 1344     		add	r3, r3, r2
 9573 03b6 3B66     		str	r3, [r7, #96]
2548:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 9574              		.loc 1 2548 0
 9575 03b8 544B     		ldr	r3, .L497+4
 9576 03ba 1A6C     		ldr	r2, [r3, #64]
 9577 03bc 3B6E     		ldr	r3, [r7, #96]
 9578 03be 9A42     		cmp	r2, r3
 9579 03c0 05D9     		bls	.L479
2549:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 9580              		.loc 1 2549 0
 9581 03c2 3B6E     		ldr	r3, [r7, #96]
 9582 03c4 03F14343 		add	r3, r3, #-1023410176
 9583 03c8 03F5A003 		add	r3, r3, #5242880
 9584 03cc 3B66     		str	r3, [r7, #96]
 9585              	.L479:
2550:bluetooth_rxtx.c **** 		if  ( // timeout
2551:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 9586              		.loc 1 2551 0
 9587 03ce 4F4B     		ldr	r3, .L497+4
 9588 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
2550:bluetooth_rxtx.c **** 		if  ( // timeout
 9589              		.loc 1 2550 0
 9590 03d2 032B     		cmp	r3, #3
ARM GAS  /tmp/ccQUMSla.s 			page 213


 9591 03d4 03D0     		beq	.L480
 9592              		.loc 1 2551 0
 9593 03d6 4D4B     		ldr	r3, .L497+4
 9594 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 9595 03da 022B     		cmp	r3, #2
 9596 03dc 06D1     		bne	.L481
 9597              	.L480:
2552:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 9598              		.loc 1 2552 0
 9599 03de 4B4B     		ldr	r3, .L497+4
 9600 03e0 1B6C     		ldr	r3, [r3, #64]
 9601 03e2 3A6E     		ldr	r2, [r7, #96]
 9602 03e4 D31A     		subs	r3, r2, r3
 9603 03e6 514A     		ldr	r2, .L497+36
 9604 03e8 9342     		cmp	r3, r2
 9605 03ea 03D8     		bhi	.L482
 9606              	.L481:
2553:bluetooth_rxtx.c **** 			// jam finished
2554:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 9607              		.loc 1 2554 0
 9608 03ec 504B     		ldr	r3, .L497+40
 9609 03ee 1B68     		ldr	r3, [r3]
 9610 03f0 012B     		cmp	r3, #1
 9611 03f2 37D1     		bne	.L483
 9612              	.L482:
2555:bluetooth_rxtx.c **** 			)
2556:bluetooth_rxtx.c **** 		{
2557:bluetooth_rxtx.c **** 			reset_le();
 9613              		.loc 1 2557 0
 9614 03f4 FFF7FEFF 		bl	reset_le
2558:bluetooth_rxtx.c **** 			le_jam_count = 0;
 9615              		.loc 1 2558 0
 9616 03f8 4D4B     		ldr	r3, .L497+40
 9617 03fa 0022     		movs	r2, #0
 9618 03fc 1A60     		str	r2, [r3]
2559:bluetooth_rxtx.c **** 			TXLED_CLR;
 9619              		.loc 1 2559 0
 9620 03fe 4D4B     		ldr	r3, .L497+44
 9621 0400 4FF48072 		mov	r2, #256
 9622 0404 1A60     		str	r2, [r3]
2560:bluetooth_rxtx.c **** 
2561:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 9623              		.loc 1 2561 0
 9624 0406 4C4B     		ldr	r3, .L497+48
 9625 0408 1B78     		ldrb	r3, [r3]
 9626 040a DBB2     		uxtb	r3, r3
 9627 040c 012B     		cmp	r3, #1
 9628 040e 06D1     		bne	.L484
2562:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 9629              		.loc 1 2562 0
 9630 0410 494B     		ldr	r3, .L497+48
 9631 0412 0022     		movs	r2, #0
 9632 0414 1A70     		strb	r2, [r3]
2563:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 9633              		.loc 1 2563 0
 9634 0416 494B     		ldr	r3, .L497+52
 9635 0418 0022     		movs	r2, #0
ARM GAS  /tmp/ccQUMSla.s 			page 214


 9636 041a 1A70     		strb	r2, [r3]
2564:bluetooth_rxtx.c **** 				goto cleanup;
 9637              		.loc 1 2564 0
 9638 041c 66E0     		b	.L493
 9639              	.L484:
2565:bluetooth_rxtx.c **** 			}
2566:bluetooth_rxtx.c **** 
2567:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2568:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 9640              		.loc 1 2568 0
 9641 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 9642 0420 0A2B     		cmp	r3, #10
 9643 0422 01D1     		bne	.L485
2569:bluetooth_rxtx.c **** 				goto cleanup;
 9644              		.loc 1 2569 0
 9645 0424 00BF     		nop
 9646 0426 61E0     		b	.L493
 9647              	.L485:
2570:bluetooth_rxtx.c **** 
2571:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 9648              		.loc 1 2571 0
 9649 0428 384B     		ldr	r3, .L497+4
 9650 042a 0122     		movs	r2, #1
 9651 042c 1A75     		strb	r2, [r3, #20]
2572:bluetooth_rxtx.c **** 
2573:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 9652              		.loc 1 2573 0
 9653 042e 6420     		movs	r0, #100
 9654 0430 FFF7FEFF 		bl	cc2400_strobe
2574:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 9655              		.loc 1 2574 0
 9656 0434 00BF     		nop
 9657              	.L486:
 9658              		.loc 1 2574 0 is_stmt 0 discriminator 1
 9659 0436 FFF7FEFF 		bl	cc2400_status
 9660 043a 0346     		mov	r3, r0
 9661 043c 03F00403 		and	r3, r3, #4
 9662 0440 002B     		cmp	r3, #0
 9663 0442 F8D1     		bne	.L486
2575:bluetooth_rxtx.c **** 
2576:bluetooth_rxtx.c **** 			/* Retune */
2577:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 9664              		.loc 1 2577 0 is_stmt 1
 9665 0444 3E4B     		ldr	r3, .L497+56
 9666 0446 1B88     		ldrh	r3, [r3]	@ movhi
 9667 0448 9BB2     		uxth	r3, r3
 9668 044a 002B     		cmp	r3, #0
 9669 044c 03D0     		beq	.L487
 9670              		.loc 1 2577 0 is_stmt 0 discriminator 1
 9671 044e 3C4B     		ldr	r3, .L497+56
 9672 0450 1B88     		ldrh	r3, [r3]	@ movhi
 9673 0452 9BB2     		uxth	r3, r3
 9674 0454 01E0     		b	.L488
 9675              	.L487:
 9676              		.loc 1 2577 0 discriminator 2
 9677 0456 40F66213 		movw	r3, #2402
 9678              	.L488:
ARM GAS  /tmp/ccQUMSla.s 			page 215


 9679              		.loc 1 2577 0 discriminator 4
 9680 045a 3A4A     		ldr	r2, .L497+60
 9681 045c 1380     		strh	r3, [r2]	@ movhi
2578:bluetooth_rxtx.c **** 			restart_jamming = 1;
 9682              		.loc 1 2578 0 is_stmt 1 discriminator 4
 9683 045e 3A4B     		ldr	r3, .L497+64
 9684 0460 0122     		movs	r2, #1
 9685 0462 1A60     		str	r2, [r3]
 9686              	.L483:
2579:bluetooth_rxtx.c **** 		}
2580:bluetooth_rxtx.c **** 
2581:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 9687              		.loc 1 2581 0
 9688 0464 294B     		ldr	r3, .L497+4
 9689 0466 DB88     		ldrh	r3, [r3, #6]
 9690 0468 2C20     		movs	r0, #44
 9691 046a 1946     		mov	r1, r3
 9692 046c FFF7FEFF 		bl	cc2400_set
2582:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 9693              		.loc 1 2582 0
 9694 0470 264B     		ldr	r3, .L497+4
 9695 0472 9B88     		ldrh	r3, [r3, #4]
 9696 0474 2D20     		movs	r0, #45
 9697 0476 1946     		mov	r1, r3
 9698 0478 FFF7FEFF 		bl	cc2400_set
2583:bluetooth_rxtx.c **** 
2584:bluetooth_rxtx.c **** 		if (do_hop)
 9699              		.loc 1 2584 0
 9700 047c 334B     		ldr	r3, .L497+68
 9701 047e 1B78     		ldrb	r3, [r3]
 9702 0480 DBB2     		uxtb	r3, r3
 9703 0482 002B     		cmp	r3, #0
 9704 0484 01D0     		beq	.L489
2585:bluetooth_rxtx.c **** 			hop();
 9705              		.loc 1 2585 0
 9706 0486 FFF7FEFF 		bl	hop
 9707              	.L489:
2586:bluetooth_rxtx.c **** 
2587:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2588:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 9708              		.loc 1 2588 0
 9709 048a 294B     		ldr	r3, .L497+40
 9710 048c 1B68     		ldr	r3, [r3]
 9711 048e 002B     		cmp	r3, #0
 9712 0490 07DD     		ble	.L490
2589:bluetooth_rxtx.c **** 			le_jam();
 9713              		.loc 1 2589 0
 9714 0492 FFF7FEFF 		bl	le_jam
2590:bluetooth_rxtx.c **** 			--le_jam_count;
 9715              		.loc 1 2590 0
 9716 0496 264B     		ldr	r3, .L497+40
 9717 0498 1B68     		ldr	r3, [r3]
 9718 049a 013B     		subs	r3, r3, #1
 9719 049c 244A     		ldr	r2, .L497+40
 9720 049e 1360     		str	r3, [r2]
 9721 04a0 17E0     		b	.L491
 9722              	.L490:
ARM GAS  /tmp/ccQUMSla.s 			page 216


2591:bluetooth_rxtx.c **** 		} else {
2592:bluetooth_rxtx.c **** 			/* RX mode */
2593:bluetooth_rxtx.c **** 			dma_init_le();
 9723              		.loc 1 2593 0
 9724 04a2 FFF7FEFF 		bl	dma_init_le
2594:bluetooth_rxtx.c **** 			dio_ssp_start();
 9725              		.loc 1 2594 0
 9726 04a6 FFF7FEFF 		bl	dio_ssp_start
2595:bluetooth_rxtx.c **** 
2596:bluetooth_rxtx.c **** 			if (restart_jamming) {
 9727              		.loc 1 2596 0
 9728 04aa 274B     		ldr	r3, .L497+64
 9729 04ac 1B68     		ldr	r3, [r3]
 9730 04ae 002B     		cmp	r3, #0
 9731 04b0 0CD0     		beq	.L492
2597:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 9732              		.loc 1 2597 0
 9733 04b2 164B     		ldr	r3, .L497+4
 9734 04b4 1B68     		ldr	r3, [r3]
 9735 04b6 1846     		mov	r0, r3
 9736 04b8 FFF7FEFF 		bl	rbit
 9737 04bc 0346     		mov	r3, r0
 9738 04be 1846     		mov	r0, r3
 9739 04c0 FFF7FEFF 		bl	cc2400_rx_sync
2598:bluetooth_rxtx.c **** 				restart_jamming = 0;
 9740              		.loc 1 2598 0
 9741 04c4 204B     		ldr	r3, .L497+64
 9742 04c6 0022     		movs	r2, #0
 9743 04c8 1A60     		str	r2, [r3]
 9744 04ca 02E0     		b	.L491
 9745              	.L492:
2599:bluetooth_rxtx.c **** 			} else {
2600:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 9746              		.loc 1 2600 0
 9747 04cc 6220     		movs	r0, #98
 9748 04ce FFF7FEFF 		bl	cc2400_strobe
 9749              	.L491:
2601:bluetooth_rxtx.c **** 			}
2602:bluetooth_rxtx.c **** 		}
2603:bluetooth_rxtx.c **** 
2604:bluetooth_rxtx.c **** 		rx_tc = 0;
 9750              		.loc 1 2604 0
 9751 04d2 1F4B     		ldr	r3, .L497+72
 9752 04d4 0022     		movs	r2, #0
 9753 04d6 1A60     		str	r2, [r3]
2605:bluetooth_rxtx.c **** 		rx_err = 0;
 9754              		.loc 1 2605 0
 9755 04d8 1E4B     		ldr	r3, .L497+76
 9756 04da 0022     		movs	r2, #0
 9757 04dc 1A60     		str	r2, [r3]
 9758              	.L450:
 9759              	.LBE14:
2439:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 9760              		.loc 1 2439 0
 9761 04de 174B     		ldr	r3, .L497+52
 9762 04e0 1B78     		ldrb	r3, [r3]
 9763 04e2 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccQUMSla.s 			page 217


 9764 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 9765 04e6 9A42     		cmp	r2, r3
 9766 04e8 3FF4B1AD 		beq	.L494
 9767              	.L493:
2606:bluetooth_rxtx.c **** 	}
2607:bluetooth_rxtx.c **** 
2608:bluetooth_rxtx.c **** cleanup:
2609:bluetooth_rxtx.c **** 
2610:bluetooth_rxtx.c **** 	// disable USB interrupts
2611:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 9768              		.loc 1 2611 0
 9769 04ec 1A4B     		ldr	r3, .L497+80
 9770 04ee 4FF08072 		mov	r2, #16777216
 9771 04f2 1A60     		str	r2, [r3]
2612:bluetooth_rxtx.c **** 
2613:bluetooth_rxtx.c **** 	// reset the radio completely
2614:bluetooth_rxtx.c **** 	cc2400_idle();
 9772              		.loc 1 2614 0
 9773 04f4 FFF7FEFF 		bl	cc2400_idle
2615:bluetooth_rxtx.c **** 	dio_ssp_stop();
 9774              		.loc 1 2615 0
 9775 04f8 FFF7FEFF 		bl	dio_ssp_stop
2616:bluetooth_rxtx.c **** 	cs_trigger_disable();
 9776              		.loc 1 2616 0
 9777 04fc FFF7FEFF 		bl	cs_trigger_disable
2617:bluetooth_rxtx.c **** }
 9778              		.loc 1 2617 0
 9779 0500 6C37     		adds	r7, r7, #108
 9780              		.cfi_def_cfa_offset 12
 9781 0502 BD46     		mov	sp, r7
 9782              		.cfi_def_cfa_register 13
 9783              		@ sp needed
 9784 0504 90BD     		pop	{r4, r7, pc}
 9785              	.L498:
 9786 0506 00BF     		.align	2
 9787              	.L497:
 9788 0508 00000000 		.word	rxbuf1
 9789 050c 00000000 		.word	le
 9790 0510 38C00920 		.word	537509944
 9791 0514 00000000 		.word	packet_cb
 9792 0518 00000000 		.word	clkn
 9793 051c 08400040 		.word	1073758216
 9794 0520 24000340 		.word	1073938468
 9795 0524 08000340 		.word	1073938440
 9796 0528 0C000340 		.word	1073938444
 9797 052c 80F0FA02 		.word	50000000
 9798 0530 00000000 		.word	le_jam_count
 9799 0534 3CC00920 		.word	537509948
 9800 0538 00000000 		.word	jam_mode
 9801 053c 00000000 		.word	requested_mode
 9802 0540 00000000 		.word	saved_request
 9803 0544 00000000 		.word	channel
 9804 0548 D4000000 		.word	restart_jamming.4899
 9805 054c 00000000 		.word	do_hop
 9806 0550 00000000 		.word	rx_tc
 9807 0554 00000000 		.word	rx_err
 9808 0558 80E100E0 		.word	-536813184
ARM GAS  /tmp/ccQUMSla.s 			page 218


 9809              		.cfi_endproc
 9810              	.LFE40:
 9812              		.section	.text.cb_follow_le,"ax",%progbits
 9813              		.align	2
 9814              		.global	cb_follow_le
 9815              		.thumb
 9816              		.thumb_func
 9818              	cb_follow_le:
 9819              	.LFB41:
2618:bluetooth_rxtx.c **** 
2619:bluetooth_rxtx.c **** 
2620:bluetooth_rxtx.c **** 
2621:bluetooth_rxtx.c **** /* low energy connection following
2622:bluetooth_rxtx.c ****  * follows a known AA around */
2623:bluetooth_rxtx.c **** int cb_follow_le() {
 9820              		.loc 1 2623 0
 9821              		.cfi_startproc
 9822              		@ args = 0, pretend = 0, frame = 48
 9823              		@ frame_needed = 1, uses_anonymous_args = 0
 9824 0000 80B5     		push	{r7, lr}
 9825              		.cfi_def_cfa_offset 8
 9826              		.cfi_offset 7, -8
 9827              		.cfi_offset 14, -4
 9828 0002 8CB0     		sub	sp, sp, #48
 9829              		.cfi_def_cfa_offset 56
 9830 0004 00AF     		add	r7, sp, #0
 9831              		.cfi_def_cfa_register 7
2624:bluetooth_rxtx.c **** 	int i, j, k;
2625:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 9832              		.loc 1 2625 0
 9833 0006 6C4B     		ldr	r3, .L515
 9834 0008 1B88     		ldrh	r3, [r3]	@ movhi
 9835 000a 9BB2     		uxth	r3, r3
 9836 000c DBB2     		uxtb	r3, r3
 9837 000e 623B     		subs	r3, r3, #98
 9838 0010 DBB2     		uxtb	r3, r3
 9839 0012 1846     		mov	r0, r3
 9840 0014 FFF7FEFF 		bl	btle_channel_index
 9841 0018 0346     		mov	r3, r0
 9842 001a 1A46     		mov	r2, r3
 9843 001c 674B     		ldr	r3, .L515+4
 9844 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9845 0020 3B62     		str	r3, [r7, #32]
2626:bluetooth_rxtx.c **** 
2627:bluetooth_rxtx.c **** 	u32 access_address = 0;
 9846              		.loc 1 2627 0
 9847 0022 0023     		movs	r3, #0
 9848 0024 FB61     		str	r3, [r7, #28]
2628:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 9849              		.loc 1 2628 0
 9850 0026 0023     		movs	r3, #0
 9851 0028 FB62     		str	r3, [r7, #44]
 9852 002a 0EE0     		b	.L500
 9853              	.L501:
2629:bluetooth_rxtx.c **** 		access_address >>= 1;
 9854              		.loc 1 2629 0 discriminator 3
 9855 002c FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/ccQUMSla.s 			page 219


 9856 002e 5B08     		lsrs	r3, r3, #1
 9857 0030 FB61     		str	r3, [r7, #28]
2630:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 9858              		.loc 1 2630 0 discriminator 3
 9859 0032 634A     		ldr	r2, .L515+8
 9860 0034 FB6A     		ldr	r3, [r7, #44]
 9861 0036 1344     		add	r3, r3, r2
 9862 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9863 003a DB07     		lsls	r3, r3, #31
 9864 003c 1A46     		mov	r2, r3
 9865 003e FB69     		ldr	r3, [r7, #28]
 9866 0040 1343     		orrs	r3, r3, r2
 9867 0042 FB61     		str	r3, [r7, #28]
2628:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 9868              		.loc 1 2628 0 discriminator 3
 9869 0044 FB6A     		ldr	r3, [r7, #44]
 9870 0046 0133     		adds	r3, r3, #1
 9871 0048 FB62     		str	r3, [r7, #44]
 9872              	.L500:
2628:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 9873              		.loc 1 2628 0 is_stmt 0 discriminator 1
 9874 004a FB6A     		ldr	r3, [r7, #44]
 9875 004c 1E2B     		cmp	r3, #30
 9876 004e EDDD     		ble	.L501
2631:bluetooth_rxtx.c **** 	}
2632:bluetooth_rxtx.c **** 
2633:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 9877              		.loc 1 2633 0 is_stmt 1
 9878 0050 1F23     		movs	r3, #31
 9879 0052 FB62     		str	r3, [r7, #44]
 9880 0054 A6E0     		b	.L502
 9881              	.L513:
2634:bluetooth_rxtx.c **** 		access_address >>= 1;
 9882              		.loc 1 2634 0
 9883 0056 FB69     		ldr	r3, [r7, #28]
 9884 0058 5B08     		lsrs	r3, r3, #1
 9885 005a FB61     		str	r3, [r7, #28]
2635:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 9886              		.loc 1 2635 0
 9887 005c 584A     		ldr	r2, .L515+8
 9888 005e FB6A     		ldr	r3, [r7, #44]
 9889 0060 1344     		add	r3, r3, r2
 9890 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9891 0064 DB07     		lsls	r3, r3, #31
 9892 0066 1A46     		mov	r2, r3
 9893 0068 FB69     		ldr	r3, [r7, #28]
 9894 006a 1343     		orrs	r3, r3, r2
 9895 006c FB61     		str	r3, [r7, #28]
2636:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 9896              		.loc 1 2636 0
 9897 006e 554B     		ldr	r3, .L515+12
 9898 0070 1A68     		ldr	r2, [r3]
 9899 0072 FB69     		ldr	r3, [r7, #28]
 9900 0074 9A42     		cmp	r2, r3
 9901 0076 40F09280 		bne	.L503
2637:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 9902              		.loc 1 2637 0
ARM GAS  /tmp/ccQUMSla.s 			page 220


 9903 007a 0023     		movs	r3, #0
 9904 007c BB62     		str	r3, [r7, #40]
 9905 007e 48E0     		b	.L504
 9906              	.L510:
 9907              	.LBB19:
2638:bluetooth_rxtx.c **** 				u8 byte = 0;
 9908              		.loc 1 2638 0
 9909 0080 0023     		movs	r3, #0
 9910 0082 FB76     		strb	r3, [r7, #27]
2639:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 9911              		.loc 1 2639 0
 9912 0084 0023     		movs	r3, #0
 9913 0086 7B62     		str	r3, [r7, #36]
 9914 0088 37E0     		b	.L505
 9915              	.L509:
 9916              	.LBB20:
2640:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 9917              		.loc 1 2640 0
 9918 008a BB6A     		ldr	r3, [r7, #40]
 9919 008c DA00     		lsls	r2, r3, #3
 9920 008e 7B6A     		ldr	r3, [r7, #36]
 9921 0090 1A44     		add	r2, r2, r3
 9922 0092 FB6A     		ldr	r3, [r7, #44]
 9923 0094 1344     		add	r3, r3, r2
 9924 0096 1F3B     		subs	r3, r3, #31
 9925 0098 3B61     		str	r3, [r7, #16]
2641:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 9926              		.loc 1 2641 0
 9927 009a 3B69     		ldr	r3, [r7, #16]
 9928 009c B3F5487F 		cmp	r3, #800
 9929 00a0 00DB     		blt	.L506
 9930 00a2 2DE0     		b	.L507
 9931              	.L506:
2642:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 9932              		.loc 1 2642 0
 9933 00a4 464A     		ldr	r2, .L515+8
 9934 00a6 3B69     		ldr	r3, [r7, #16]
 9935 00a8 1344     		add	r3, r3, r2
 9936 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9937 00ac 7B61     		str	r3, [r7, #20]
2643:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 9938              		.loc 1 2643 0
 9939 00ae BB6A     		ldr	r3, [r7, #40]
 9940 00b0 032B     		cmp	r3, #3
 9941 00b2 16DD     		ble	.L508
2644:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 9942              		.loc 1 2644 0
 9943 00b4 444A     		ldr	r2, .L515+16
 9944 00b6 3B6A     		ldr	r3, [r7, #32]
 9945 00b8 1344     		add	r3, r3, r2
 9946 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9947 00bc 1A46     		mov	r2, r3
 9948 00be 7B69     		ldr	r3, [r7, #20]
 9949 00c0 5340     		eors	r3, r3, r2
 9950 00c2 7B61     		str	r3, [r7, #20]
2645:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 9951              		.loc 1 2645 0
ARM GAS  /tmp/ccQUMSla.s 			page 221


 9952 00c4 3B6A     		ldr	r3, [r7, #32]
 9953 00c6 0133     		adds	r3, r3, #1
 9954 00c8 1946     		mov	r1, r3
 9955 00ca 404B     		ldr	r3, .L515+20
 9956 00cc A1FB0323 		umull	r2, r3, r1, r3
 9957 00d0 C81A     		subs	r0, r1, r3
 9958 00d2 4008     		lsrs	r0, r0, #1
 9959 00d4 0344     		add	r3, r3, r0
 9960 00d6 9A09     		lsrs	r2, r3, #6
 9961 00d8 1346     		mov	r3, r2
 9962 00da DB01     		lsls	r3, r3, #7
 9963 00dc 9B1A     		subs	r3, r3, r2
 9964 00de CA1A     		subs	r2, r1, r3
 9965 00e0 3A62     		str	r2, [r7, #32]
 9966              	.L508:
2646:bluetooth_rxtx.c **** 					}
2647:bluetooth_rxtx.c **** 					byte |= bit << k;
 9967              		.loc 1 2647 0 discriminator 2
 9968 00e2 7A69     		ldr	r2, [r7, #20]
 9969 00e4 7B6A     		ldr	r3, [r7, #36]
 9970 00e6 02FA03F3 		lsl	r3, r2, r3
 9971 00ea DAB2     		uxtb	r2, r3
 9972 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9973 00ee 1343     		orrs	r3, r3, r2
 9974 00f0 DBB2     		uxtb	r3, r3
 9975 00f2 FB76     		strb	r3, [r7, #27]
 9976              	.LBE20:
2639:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 9977              		.loc 1 2639 0 discriminator 2
 9978 00f4 7B6A     		ldr	r3, [r7, #36]
 9979 00f6 0133     		adds	r3, r3, #1
 9980 00f8 7B62     		str	r3, [r7, #36]
 9981              	.L505:
2639:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 9982              		.loc 1 2639 0 is_stmt 0 discriminator 1
 9983 00fa 7B6A     		ldr	r3, [r7, #36]
 9984 00fc 072B     		cmp	r3, #7
 9985 00fe C4DD     		ble	.L509
 9986              	.L507:
2648:bluetooth_rxtx.c **** 				}
2649:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 9987              		.loc 1 2649 0 is_stmt 1 discriminator 2
 9988 0100 334B     		ldr	r3, .L515+24
 9989 0102 1A68     		ldr	r2, [r3]
 9990 0104 BB6A     		ldr	r3, [r7, #40]
 9991 0106 1344     		add	r3, r3, r2
 9992 0108 FA7E     		ldrb	r2, [r7, #27]
 9993 010a 1A70     		strb	r2, [r3]
 9994              	.LBE19:
2637:bluetooth_rxtx.c **** 				u8 byte = 0;
 9995              		.loc 1 2637 0 discriminator 2
 9996 010c BB6A     		ldr	r3, [r7, #40]
 9997 010e 0133     		adds	r3, r3, #1
 9998 0110 BB62     		str	r3, [r7, #40]
 9999              	.L504:
2637:bluetooth_rxtx.c **** 				u8 byte = 0;
 10000              		.loc 1 2637 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccQUMSla.s 			page 222


 10001 0112 BB6A     		ldr	r3, [r7, #40]
 10002 0114 2D2B     		cmp	r3, #45
 10003 0116 B3DD     		ble	.L510
2650:bluetooth_rxtx.c **** 			}
2651:bluetooth_rxtx.c **** 
2652:bluetooth_rxtx.c **** 			// verify CRC
2653:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 10004              		.loc 1 2653 0 is_stmt 1
 10005 0118 2A4B     		ldr	r3, .L515+12
 10006 011a 1B69     		ldr	r3, [r3, #16]
 10007 011c 002B     		cmp	r3, #0
 10008 011e 2ED0     		beq	.L511
 10009              	.LBB21:
2654:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 10010              		.loc 1 2654 0
 10011 0120 2B4B     		ldr	r3, .L515+24
 10012 0122 1B68     		ldr	r3, [r3]
 10013 0124 0533     		adds	r3, r3, #5
 10014 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10015 0128 03F03F03 		and	r3, r3, #63
 10016 012c 0233     		adds	r3, r3, #2
 10017 012e FB60     		str	r3, [r7, #12]
2655:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 10018              		.loc 1 2655 0
 10019 0130 244B     		ldr	r3, .L515+12
 10020 0132 DA68     		ldr	r2, [r3, #12]
 10021 0134 264B     		ldr	r3, .L515+24
 10022 0136 1B68     		ldr	r3, [r3]
 10023 0138 0433     		adds	r3, r3, #4
 10024 013a 1046     		mov	r0, r2
 10025 013c 1946     		mov	r1, r3
 10026 013e FA68     		ldr	r2, [r7, #12]
 10027 0140 FFF7FEFF 		bl	btle_crcgen_lut
 10028 0144 B860     		str	r0, [r7, #8]
2656:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 10029              		.loc 1 2656 0
 10030 0146 224B     		ldr	r3, .L515+24
 10031 0148 1A68     		ldr	r2, [r3]
 10032 014a FB68     		ldr	r3, [r7, #12]
 10033 014c 0633     		adds	r3, r3, #6
 10034 014e 1344     		add	r3, r3, r2
 10035 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10036 0152 1A04     		lsls	r2, r3, #16
2657:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 10037              		.loc 1 2657 0
 10038 0154 1E4B     		ldr	r3, .L515+24
 10039 0156 1968     		ldr	r1, [r3]
 10040 0158 FB68     		ldr	r3, [r7, #12]
 10041 015a 0533     		adds	r3, r3, #5
 10042 015c 0B44     		add	r3, r3, r1
 10043 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10044 0160 1B02     		lsls	r3, r3, #8
 10045 0162 1343     		orrs	r3, r3, r2
2658:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 10046              		.loc 1 2658 0
 10047 0164 1A4A     		ldr	r2, .L515+24
 10048 0166 1268     		ldr	r2, [r2]
ARM GAS  /tmp/ccQUMSla.s 			page 223


 10049 0168 F968     		ldr	r1, [r7, #12]
 10050 016a 0431     		adds	r1, r1, #4
 10051 016c 0A44     		add	r2, r2, r1
 10052 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 10053 0170 1343     		orrs	r3, r3, r2
2656:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 10054              		.loc 1 2656 0
 10055 0172 7B60     		str	r3, [r7, #4]
2659:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 10056              		.loc 1 2659 0
 10057 0174 BA68     		ldr	r2, [r7, #8]
 10058 0176 7B68     		ldr	r3, [r7, #4]
 10059 0178 9A42     		cmp	r2, r3
 10060 017a 00D0     		beq	.L511
2660:bluetooth_rxtx.c **** 					break;
 10061              		.loc 1 2660 0
 10062 017c 17E0     		b	.L512
 10063              	.L511:
 10064              	.LBE21:
2661:bluetooth_rxtx.c **** 			}
2662:bluetooth_rxtx.c **** 
2663:bluetooth_rxtx.c **** 			// send to PC
2664:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 10065              		.loc 1 2664 0
 10066 017e 144B     		ldr	r3, .L515+24
 10067 0180 1B68     		ldr	r3, [r3]
 10068 0182 0120     		movs	r0, #1
 10069 0184 1946     		mov	r1, r3
 10070 0186 FFF7FEFF 		bl	enqueue
2665:bluetooth_rxtx.c **** 			RXLED_SET;
 10071              		.loc 1 2665 0
 10072 018a 124B     		ldr	r3, .L515+28
 10073 018c 1022     		movs	r2, #16
 10074 018e 1A60     		str	r2, [r3]
2666:bluetooth_rxtx.c **** 
2667:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 10075              		.loc 1 2667 0
 10076 0190 114B     		ldr	r3, .L515+32
 10077 0192 1B68     		ldr	r3, [r3]
 10078 0194 0E4A     		ldr	r2, .L515+24
 10079 0196 1268     		ldr	r2, [r2]
 10080 0198 1046     		mov	r0, r2
 10081 019a 9847     		blx	r3
2668:bluetooth_rxtx.c **** 
2669:bluetooth_rxtx.c **** 			break;
 10082              		.loc 1 2669 0
 10083 019c 07E0     		b	.L512
 10084              	.L503:
2633:bluetooth_rxtx.c **** 		access_address >>= 1;
 10085              		.loc 1 2633 0 discriminator 2
 10086 019e FB6A     		ldr	r3, [r7, #44]
 10087 01a0 0133     		adds	r3, r3, #1
 10088 01a2 FB62     		str	r3, [r7, #44]
 10089              	.L502:
2633:bluetooth_rxtx.c **** 		access_address >>= 1;
 10090              		.loc 1 2633 0 is_stmt 0 discriminator 1
 10091 01a4 FB6A     		ldr	r3, [r7, #44]
ARM GAS  /tmp/ccQUMSla.s 			page 224


 10092 01a6 B3F5D87F 		cmp	r3, #432
 10093 01aa FFF654AF 		blt	.L513
 10094              	.L512:
2670:bluetooth_rxtx.c **** 		}
2671:bluetooth_rxtx.c **** 	}
2672:bluetooth_rxtx.c **** 
2673:bluetooth_rxtx.c **** 	return 1;
 10095              		.loc 1 2673 0 is_stmt 1
 10096 01ae 0123     		movs	r3, #1
2674:bluetooth_rxtx.c **** }
 10097              		.loc 1 2674 0
 10098 01b0 1846     		mov	r0, r3
 10099 01b2 3037     		adds	r7, r7, #48
 10100              		.cfi_def_cfa_offset 8
 10101 01b4 BD46     		mov	sp, r7
 10102              		.cfi_def_cfa_register 13
 10103              		@ sp needed
 10104 01b6 80BD     		pop	{r7, pc}
 10105              	.L516:
 10106              		.align	2
 10107              	.L515:
 10108 01b8 00000000 		.word	channel
 10109 01bc C0000000 		.word	whitening_index
 10110 01c0 00000000 		.word	unpacked
 10111 01c4 00000000 		.word	le
 10112 01c8 40000000 		.word	whitening
 10113 01cc 11080402 		.word	33818641
 10114 01d0 00000000 		.word	idle_rxbuf
 10115 01d4 38C00920 		.word	537509944
 10116 01d8 00000000 		.word	packet_cb
 10117              		.cfi_endproc
 10118              	.LFE41:
 10120              		.section	.text.connection_follow_cb,"ax",%progbits
 10121              		.align	2
 10122              		.global	connection_follow_cb
 10123              		.thumb
 10124              		.thumb_func
 10126              	connection_follow_cb:
 10127              	.LFB42:
2675:bluetooth_rxtx.c **** 
2676:bluetooth_rxtx.c **** /**
2677:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2678:bluetooth_rxtx.c ****  */
2679:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 10128              		.loc 1 2679 0
 10129              		.cfi_startproc
 10130              		@ args = 0, pretend = 0, frame = 40
 10131              		@ frame_needed = 1, uses_anonymous_args = 0
 10132 0000 80B5     		push	{r7, lr}
 10133              		.cfi_def_cfa_offset 8
 10134              		.cfi_offset 7, -8
 10135              		.cfi_offset 14, -4
 10136 0002 8AB0     		sub	sp, sp, #40
 10137              		.cfi_def_cfa_offset 48
 10138 0004 00AF     		add	r7, sp, #0
 10139              		.cfi_def_cfa_register 7
 10140 0006 7860     		str	r0, [r7, #4]
ARM GAS  /tmp/ccQUMSla.s 			page 225


2680:bluetooth_rxtx.c **** 	int i;
2681:bluetooth_rxtx.c **** 	u32 aa = 0;
 10141              		.loc 1 2681 0
 10142 0008 0023     		movs	r3, #0
 10143 000a 3B62     		str	r3, [r7, #32]
2682:bluetooth_rxtx.c **** 
2683:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2684:bluetooth_rxtx.c **** #define HEADER_IDX 4
2685:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2686:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2687:bluetooth_rxtx.c **** 
2688:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 10144              		.loc 1 2688 0
 10145 000c 7B68     		ldr	r3, [r7, #4]
 10146 000e FB61     		str	r3, [r7, #28]
2689:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 10147              		.loc 1 2689 0
 10148 0010 7B68     		ldr	r3, [r7, #4]
 10149 0012 1B79     		ldrb	r3, [r3, #4]
 10150 0014 FB76     		strb	r3, [r7, #27]
2690:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 10151              		.loc 1 2690 0
 10152 0016 7B68     		ldr	r3, [r7, #4]
 10153 0018 0533     		adds	r3, r3, #5
 10154 001a 7B61     		str	r3, [r7, #20]
2691:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 10155              		.loc 1 2691 0
 10156 001c 7B68     		ldr	r3, [r7, #4]
 10157 001e 0633     		adds	r3, r3, #6
 10158 0020 3B61     		str	r3, [r7, #16]
2692:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 10159              		.loc 1 2692 0
 10160 0022 7B69     		ldr	r3, [r7, #20]
 10161 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10162 0026 0633     		adds	r3, r3, #6
 10163 0028 1A46     		mov	r2, r3
 10164 002a 7B68     		ldr	r3, [r7, #4]
 10165 002c 1344     		add	r3, r3, r2
 10166 002e FB60     		str	r3, [r7, #12]
2693:bluetooth_rxtx.c **** 
2694:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 10167              		.loc 1 2694 0
 10168 0030 8B4B     		ldr	r3, .L527
 10169 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 10170 0034 022B     		cmp	r3, #2
 10171 0036 1CD1     		bne	.L518
2695:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2696:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 10172              		.loc 1 2696 0
 10173 0038 894B     		ldr	r3, .L527
 10174 003a 0322     		movs	r2, #3
 10175 003c 1A75     		strb	r2, [r3, #20]
2697:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 10176              		.loc 1 2697 0
 10177 003e 894B     		ldr	r3, .L527+4
 10178 0040 1B68     		ldr	r3, [r3]
 10179 0042 874A     		ldr	r2, .L527
ARM GAS  /tmp/ccQUMSla.s 			page 226


 10180 0044 9361     		str	r3, [r2, #24]
2698:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 10181              		.loc 1 2698 0
 10182 0046 864B     		ldr	r3, .L527
 10183 0048 DB8B     		ldrh	r3, [r3, #30]
 10184 004a 013B     		subs	r3, r3, #1
 10185 004c 9AB2     		uxth	r2, r3
 10186 004e 844B     		ldr	r3, .L527
 10187 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2699:bluetooth_rxtx.c **** 		le.conn_count = 0;
 10188              		.loc 1 2699 0
 10189 0052 834B     		ldr	r3, .L527
 10190 0054 0022     		movs	r2, #0
 10191 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2700:bluetooth_rxtx.c **** 		le.update_pending = 0;
 10192              		.loc 1 2700 0
 10193 0058 814B     		ldr	r3, .L527
 10194 005a 0022     		movs	r2, #0
 10195 005c 9A62     		str	r2, [r3, #40]
2701:bluetooth_rxtx.c **** 
2702:bluetooth_rxtx.c **** 		// hue hue hue
2703:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 10196              		.loc 1 2703 0
 10197 005e 824B     		ldr	r3, .L527+8
 10198 0060 1B78     		ldrb	r3, [r3]
 10199 0062 DBB2     		uxtb	r3, r3
 10200 0064 002B     		cmp	r3, #0
 10201 0066 00F0F780 		beq	.L517
2704:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 10202              		.loc 1 2704 0
 10203 006a 804B     		ldr	r3, .L527+12
 10204 006c 2822     		movs	r2, #40
 10205 006e 1A60     		str	r2, [r3]
 10206 0070 F2E0     		b	.L517
 10207              	.L518:
2705:bluetooth_rxtx.c **** 
2706:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 10208              		.loc 1 2706 0
 10209 0072 7B4B     		ldr	r3, .L527
 10210 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 10211 0076 032B     		cmp	r3, #3
 10212 0078 6FD1     		bne	.L521
 10213              	.LBB22:
2707:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 10214              		.loc 1 2707 0
 10215 007a FB7E     		ldrb	r3, [r7, #27]
 10216 007c 03F00303 		and	r3, r3, #3
 10217 0080 FB72     		strb	r3, [r7, #11]
2708:bluetooth_rxtx.c **** 
2709:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2710:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 10218              		.loc 1 2710 0
 10219 0082 774B     		ldr	r3, .L527
 10220 0084 9B6A     		ldr	r3, [r3, #40]
 10221 0086 002B     		cmp	r3, #0
 10222 0088 21D0     		beq	.L522
 10223              		.loc 1 2710 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccQUMSla.s 			page 227


 10224 008a 754B     		ldr	r3, .L527
 10225 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 10226 008e 9AB2     		uxth	r2, r3
 10227 0090 734B     		ldr	r3, .L527
 10228 0092 9B8D     		ldrh	r3, [r3, #44]
 10229 0094 9A42     		cmp	r2, r3
 10230 0096 1AD1     		bne	.L522
2711:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2712:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 10231              		.loc 1 2712 0 is_stmt 1
 10232 0098 724B     		ldr	r3, .L527+4
 10233 009a 1B68     		ldr	r3, [r3]
 10234 009c 704A     		ldr	r2, .L527
 10235 009e 9361     		str	r3, [r2, #24]
2713:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 10236              		.loc 1 2713 0
 10237 00a0 6F4B     		ldr	r3, .L527
 10238 00a2 DA8D     		ldrh	r2, [r3, #46]
 10239 00a4 6E4B     		ldr	r3, .L527
 10240 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2714:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 10241              		.loc 1 2714 0
 10242 00a8 6D4B     		ldr	r3, .L527
 10243 00aa DB8D     		ldrh	r3, [r3, #46]
 10244 00ac 013B     		subs	r3, r3, #1
 10245 00ae 9AB2     		uxth	r2, r3
 10246 00b0 6B4B     		ldr	r3, .L527
 10247 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2715:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 10248              		.loc 1 2715 0
 10249 00b4 6A4B     		ldr	r3, .L527
 10250 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 10251 00ba 694B     		ldr	r3, .L527
 10252 00bc 83F82220 		strb	r2, [r3, #34]
2716:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 10253              		.loc 1 2716 0
 10254 00c0 674B     		ldr	r3, .L527
 10255 00c2 5A8E     		ldrh	r2, [r3, #50]
 10256 00c4 664B     		ldr	r3, .L527
 10257 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2717:bluetooth_rxtx.c **** 			le.update_pending = 0;
 10258              		.loc 1 2717 0
 10259 00c8 654B     		ldr	r3, .L527
 10260 00ca 0022     		movs	r2, #0
 10261 00cc 9A62     		str	r2, [r3, #40]
 10262              	.L522:
2718:bluetooth_rxtx.c **** 		}
2719:bluetooth_rxtx.c **** 
2720:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 10263              		.loc 1 2720 0
 10264 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 10265 00d0 032B     		cmp	r3, #3
 10266 00d2 41D1     		bne	.L523
 10267              		.loc 1 2720 0 is_stmt 0 discriminator 1
 10268 00d4 3B69     		ldr	r3, [r7, #16]
 10269 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10270 00d8 002B     		cmp	r3, #0
ARM GAS  /tmp/ccQUMSla.s 			page 228


 10271 00da 3DD1     		bne	.L523
2721:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2722:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2723:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 10272              		.loc 1 2723 0 is_stmt 1
 10273 00dc 7B68     		ldr	r3, [r7, #4]
 10274 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 10275 00e0 5F4B     		ldr	r3, .L527
 10276 00e2 83F83020 		strb	r2, [r3, #48]
2724:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 10277              		.loc 1 2724 0
 10278 00e6 7B68     		ldr	r3, [r7, #4]
 10279 00e8 0833     		adds	r3, r3, #8
 10280 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10281 00ec 9AB2     		uxth	r2, r3
 10282 00ee 7B68     		ldr	r3, [r7, #4]
 10283 00f0 0933     		adds	r3, r3, #9
 10284 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10285 00f4 9BB2     		uxth	r3, r3
 10286 00f6 1B02     		lsls	r3, r3, #8
 10287 00f8 9BB2     		uxth	r3, r3
 10288 00fa 1344     		add	r3, r3, r2
 10289 00fc 9AB2     		uxth	r2, r3
 10290 00fe 584B     		ldr	r3, .L527
 10291 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2725:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 10292              		.loc 1 2725 0
 10293 0102 7B68     		ldr	r3, [r7, #4]
 10294 0104 0A33     		adds	r3, r3, #10
 10295 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10296 0108 9AB2     		uxth	r2, r3
 10297 010a 7B68     		ldr	r3, [r7, #4]
 10298 010c 0B33     		adds	r3, r3, #11
 10299 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10300 0110 9BB2     		uxth	r3, r3
 10301 0112 1B02     		lsls	r3, r3, #8
 10302 0114 9BB2     		uxth	r3, r3
 10303 0116 1344     		add	r3, r3, r2
 10304 0118 9AB2     		uxth	r2, r3
 10305 011a 514B     		ldr	r3, .L527
 10306 011c DA85     		strh	r2, [r3, #46]	@ movhi
2726:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 10307              		.loc 1 2726 0
 10308 011e 7B68     		ldr	r3, [r7, #4]
 10309 0120 1033     		adds	r3, r3, #16
 10310 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10311 0124 9AB2     		uxth	r2, r3
 10312 0126 7B68     		ldr	r3, [r7, #4]
 10313 0128 1133     		adds	r3, r3, #17
 10314 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10315 012c 9BB2     		uxth	r3, r3
 10316 012e 1B02     		lsls	r3, r3, #8
 10317 0130 9BB2     		uxth	r3, r3
 10318 0132 1344     		add	r3, r3, r2
 10319 0134 9AB2     		uxth	r2, r3
 10320 0136 4A4B     		ldr	r3, .L527
 10321 0138 9A85     		strh	r2, [r3, #44]	@ movhi
ARM GAS  /tmp/ccQUMSla.s 			page 229


2727:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 10322              		.loc 1 2727 0
 10323 013a 494B     		ldr	r3, .L527
 10324 013c 9B8D     		ldrh	r3, [r3, #44]
 10325 013e 1A46     		mov	r2, r3
 10326 0140 474B     		ldr	r3, .L527
 10327 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 10328 0144 9BB2     		uxth	r3, r3
 10329 0146 D31A     		subs	r3, r2, r3
 10330 0148 47F6FE72 		movw	r2, #32766
 10331 014c 9342     		cmp	r3, r2
 10332 014e 03DC     		bgt	.L523
2728:bluetooth_rxtx.c **** 				le.update_pending = 1;
 10333              		.loc 1 2728 0
 10334 0150 434B     		ldr	r3, .L527
 10335 0152 0122     		movs	r2, #1
 10336 0154 9A62     		str	r2, [r3, #40]
 10337              	.LBE22:
 10338 0156 7FE0     		b	.L517
 10339              	.L523:
 10340 0158 7EE0     		b	.L517
 10341              	.L521:
2729:bluetooth_rxtx.c **** 		}
2730:bluetooth_rxtx.c **** 
2731:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 10342              		.loc 1 2731 0
 10343 015a 414B     		ldr	r3, .L527
 10344 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 10345 015e 012B     		cmp	r3, #1
 10346 0160 7AD1     		bne	.L517
 10347              	.LBB23:
2732:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 10348              		.loc 1 2732 0
 10349 0162 7B68     		ldr	r3, [r7, #4]
 10350 0164 0433     		adds	r3, r3, #4
 10351 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10352 0168 03F00F03 		and	r3, r3, #15
 10353 016c BB72     		strb	r3, [r7, #10]
2733:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 10354              		.loc 1 2733 0
 10355 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 10356 0170 052B     		cmp	r3, #5
 10357 0172 71D1     		bne	.L517
2734:bluetooth_rxtx.c **** 			// This is a connect packet
2735:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2736:bluetooth_rxtx.c **** 			if (le.target_set &&
 10358              		.loc 1 2736 0
 10359 0174 3A4B     		ldr	r3, .L527
 10360 0176 DB6B     		ldr	r3, [r3, #60]
 10361 0178 002B     		cmp	r3, #0
 10362 017a 14D0     		beq	.L524
2737:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 10363              		.loc 1 2737 0 discriminator 1
 10364 017c 7B68     		ldr	r3, [r7, #4]
 10365 017e 0633     		adds	r3, r3, #6
 10366 0180 3B48     		ldr	r0, .L527+16
 10367 0182 1946     		mov	r1, r3
ARM GAS  /tmp/ccQUMSla.s 			page 230


 10368 0184 0622     		movs	r2, #6
 10369 0186 FFF7FEFF 		bl	memcmp
 10370 018a 0346     		mov	r3, r0
2736:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 10371              		.loc 1 2736 0 discriminator 1
 10372 018c 002B     		cmp	r3, #0
 10373 018e 0AD0     		beq	.L524
2738:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 10374              		.loc 1 2738 0
 10375 0190 7B68     		ldr	r3, [r7, #4]
 10376 0192 0C33     		adds	r3, r3, #12
 10377 0194 3648     		ldr	r0, .L527+16
 10378 0196 1946     		mov	r1, r3
 10379 0198 0622     		movs	r2, #6
 10380 019a FFF7FEFF 		bl	memcmp
 10381 019e 0346     		mov	r3, r0
2737:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 10382              		.loc 1 2737 0
 10383 01a0 002B     		cmp	r3, #0
 10384 01a2 00D0     		beq	.L524
2739:bluetooth_rxtx.c **** 				return;
 10385              		.loc 1 2739 0
 10386 01a4 58E0     		b	.L517
 10387              	.L524:
2740:bluetooth_rxtx.c **** 			}
2741:bluetooth_rxtx.c **** 
2742:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 10388              		.loc 1 2742 0
 10389 01a6 2E4B     		ldr	r3, .L527
 10390 01a8 0222     		movs	r2, #2
 10391 01aa 1A75     		strb	r2, [r3, #20]
2743:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 10392              		.loc 1 2743 0
 10393 01ac 2C4B     		ldr	r3, .L527
 10394 01ae 0022     		movs	r2, #0
 10395 01b0 1A61     		str	r2, [r3, #16]
2744:bluetooth_rxtx.c **** 
2745:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 10396              		.loc 1 2745 0
 10397 01b2 0023     		movs	r3, #0
 10398 01b4 7B62     		str	r3, [r7, #36]
 10399 01b6 11E0     		b	.L525
 10400              	.L526:
2746:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 10401              		.loc 1 2746 0 discriminator 3
 10402 01b8 7B6A     		ldr	r3, [r7, #36]
 10403 01ba 1233     		adds	r3, r3, #18
 10404 01bc 1A46     		mov	r2, r3
 10405 01be 7B68     		ldr	r3, [r7, #4]
 10406 01c0 1344     		add	r3, r3, r2
 10407 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10408 01c4 1A46     		mov	r2, r3
 10409 01c6 7B6A     		ldr	r3, [r7, #36]
 10410 01c8 DB00     		lsls	r3, r3, #3
 10411 01ca 02FA03F3 		lsl	r3, r2, r3
 10412 01ce 1A46     		mov	r2, r3
 10413 01d0 3B6A     		ldr	r3, [r7, #32]
ARM GAS  /tmp/ccQUMSla.s 			page 231


 10414 01d2 1343     		orrs	r3, r3, r2
 10415 01d4 3B62     		str	r3, [r7, #32]
2745:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 10416              		.loc 1 2745 0 discriminator 3
 10417 01d6 7B6A     		ldr	r3, [r7, #36]
 10418 01d8 0133     		adds	r3, r3, #1
 10419 01da 7B62     		str	r3, [r7, #36]
 10420              	.L525:
2745:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 10421              		.loc 1 2745 0 is_stmt 0 discriminator 1
 10422 01dc 7B6A     		ldr	r3, [r7, #36]
 10423 01de 032B     		cmp	r3, #3
 10424 01e0 EADD     		ble	.L526
2747:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 10425              		.loc 1 2747 0 is_stmt 1
 10426 01e2 386A     		ldr	r0, [r7, #32]
 10427 01e4 FFF7FEFF 		bl	le_set_access_address
2748:bluetooth_rxtx.c **** 
2749:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2750:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 10428              		.loc 1 2750 0
 10429 01e8 7B68     		ldr	r3, [r7, #4]
 10430 01ea 1833     		adds	r3, r3, #24
 10431 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10432 01ee 1A04     		lsls	r2, r3, #16
2751:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 10433              		.loc 1 2751 0
 10434 01f0 7B68     		ldr	r3, [r7, #4]
 10435 01f2 1733     		adds	r3, r3, #23
 10436 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10437 01f6 1B02     		lsls	r3, r3, #8
 10438 01f8 1343     		orrs	r3, r3, r2
2752:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 10439              		.loc 1 2752 0
 10440 01fa 7A68     		ldr	r2, [r7, #4]
 10441 01fc 1632     		adds	r2, r2, #22
 10442 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 10443 0200 1343     		orrs	r3, r3, r2
2750:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 10444              		.loc 1 2750 0
 10445 0202 1A46     		mov	r2, r3
 10446 0204 164B     		ldr	r3, .L527
 10447 0206 9A60     		str	r2, [r3, #8]
2753:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 10448              		.loc 1 2753 0
 10449 0208 154B     		ldr	r3, .L527
 10450 020a 9B68     		ldr	r3, [r3, #8]
 10451 020c 1846     		mov	r0, r3
 10452 020e FFF7FEFF 		bl	rbit
 10453 0212 0246     		mov	r2, r0
 10454 0214 124B     		ldr	r3, .L527
 10455 0216 DA60     		str	r2, [r3, #12]
2754:bluetooth_rxtx.c **** 
2755:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2756:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 10456              		.loc 1 2756 0
 10457 0218 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccQUMSla.s 			page 232


 10458 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 10459 021c 104B     		ldr	r3, .L527
 10460 021e 83F82220 		strb	r2, [r3, #34]
2757:bluetooth_rxtx.c **** 
2758:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2759:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 10461              		.loc 1 2759 0
 10462 0222 7B68     		ldr	r3, [r7, #4]
 10463 0224 1A33     		adds	r3, r3, #26
 10464 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10465 0228 9AB2     		uxth	r2, r3
 10466 022a 0D4B     		ldr	r3, .L527
 10467 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2760:bluetooth_rxtx.c **** 
2761:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2762:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 10468              		.loc 1 2762 0
 10469 022e 7B68     		ldr	r3, [r7, #4]
 10470 0230 1C33     		adds	r3, r3, #28
 10471 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10472 0234 9AB2     		uxth	r2, r3
 10473 0236 0A4B     		ldr	r3, .L527
 10474 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2763:bluetooth_rxtx.c **** 
2764:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2765:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 10475              		.loc 1 2765 0
 10476 023a 7B68     		ldr	r3, [r7, #4]
 10477 023c 2733     		adds	r3, r3, #39
 10478 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10479 0240 03F01F03 		and	r3, r3, #31
 10480 0244 DAB2     		uxtb	r2, r3
 10481 0246 064B     		ldr	r3, .L527
 10482 0248 9A75     		strb	r2, [r3, #22]
2766:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 10483              		.loc 1 2766 0
 10484 024a 054B     		ldr	r3, .L527
 10485 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 10486 024e 044B     		ldr	r3, .L527
 10487 0250 5A75     		strb	r2, [r3, #21]
2767:bluetooth_rxtx.c **** 
2768:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2769:bluetooth_rxtx.c **** 			do_hop = 1;
 10488              		.loc 1 2769 0
 10489 0252 084B     		ldr	r3, .L527+20
 10490 0254 0122     		movs	r2, #1
 10491 0256 1A70     		strb	r2, [r3]
 10492              	.L517:
 10493              	.LBE23:
2770:bluetooth_rxtx.c **** 		}
2771:bluetooth_rxtx.c **** 	}
2772:bluetooth_rxtx.c **** }
 10494              		.loc 1 2772 0
 10495 0258 2837     		adds	r7, r7, #40
 10496              		.cfi_def_cfa_offset 8
 10497 025a BD46     		mov	sp, r7
 10498              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccQUMSla.s 			page 233


 10499              		@ sp needed
 10500 025c 80BD     		pop	{r7, pc}
 10501              	.L528:
 10502 025e 00BF     		.align	2
 10503              	.L527:
 10504 0260 00000000 		.word	le
 10505 0264 00000000 		.word	clkn
 10506 0268 00000000 		.word	jam_mode
 10507 026c 00000000 		.word	le_jam_count
 10508 0270 34000000 		.word	le+52
 10509 0274 00000000 		.word	do_hop
 10510              		.cfi_endproc
 10511              	.LFE42:
 10513              		.section	.text.bt_follow_le,"ax",%progbits
 10514              		.align	2
 10515              		.global	bt_follow_le
 10516              		.thumb
 10517              		.thumb_func
 10519              	bt_follow_le:
 10520              	.LFB43:
2773:bluetooth_rxtx.c **** 
2774:bluetooth_rxtx.c **** void bt_follow_le() {
 10521              		.loc 1 2774 0
 10522              		.cfi_startproc
 10523              		@ args = 0, pretend = 0, frame = 0
 10524              		@ frame_needed = 1, uses_anonymous_args = 0
 10525 0000 80B5     		push	{r7, lr}
 10526              		.cfi_def_cfa_offset 8
 10527              		.cfi_offset 7, -8
 10528              		.cfi_offset 14, -4
 10529 0002 00AF     		add	r7, sp, #0
 10530              		.cfi_def_cfa_register 7
2775:bluetooth_rxtx.c **** 	reset_le();
 10531              		.loc 1 2775 0
 10532 0004 FFF7FEFF 		bl	reset_le
2776:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 10533              		.loc 1 2776 0
 10534 0008 044B     		ldr	r3, .L530
 10535 000a 054A     		ldr	r2, .L530+4
 10536 000c 1A60     		str	r2, [r3]
2777:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 10537              		.loc 1 2777 0
 10538 000e 0920     		movs	r0, #9
 10539 0010 FFF7FEFF 		bl	bt_le_sync
2778:bluetooth_rxtx.c **** 
2779:bluetooth_rxtx.c **** 	/* old non-sync mode
2780:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2781:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2782:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2783:bluetooth_rxtx.c **** 	*/
2784:bluetooth_rxtx.c **** 
2785:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10540              		.loc 1 2785 0
 10541 0014 034B     		ldr	r3, .L530+8
 10542 0016 0022     		movs	r2, #0
 10543 0018 1A70     		strb	r2, [r3]
2786:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccQUMSla.s 			page 234


 10544              		.loc 1 2786 0
 10545 001a 80BD     		pop	{r7, pc}
 10546              	.L531:
 10547              		.align	2
 10548              	.L530:
 10549 001c 00000000 		.word	packet_cb
 10550 0020 00000000 		.word	connection_follow_cb
 10551 0024 00000000 		.word	mode
 10552              		.cfi_endproc
 10553              	.LFE43:
 10555              		.section	.text.le_promisc_state,"ax",%progbits
 10556              		.align	2
 10557              		.global	le_promisc_state
 10558              		.thumb
 10559              		.thumb_func
 10561              	le_promisc_state:
 10562              	.LFB44:
2787:bluetooth_rxtx.c **** 
2788:bluetooth_rxtx.c **** // issue state change message
2789:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 10563              		.loc 1 2789 0
 10564              		.cfi_startproc
 10565              		@ args = 0, pretend = 0, frame = 72
 10566              		@ frame_needed = 1, uses_anonymous_args = 0
 10567 0000 80B5     		push	{r7, lr}
 10568              		.cfi_def_cfa_offset 8
 10569              		.cfi_offset 7, -8
 10570              		.cfi_offset 14, -4
 10571 0002 92B0     		sub	sp, sp, #72
 10572              		.cfi_def_cfa_offset 80
 10573 0004 00AF     		add	r7, sp, #0
 10574              		.cfi_def_cfa_register 7
 10575 0006 0346     		mov	r3, r0
 10576 0008 B960     		str	r1, [r7, #8]
 10577 000a 7A60     		str	r2, [r7, #4]
 10578 000c FB73     		strb	r3, [r7, #15]
2790:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 10579              		.loc 1 2790 0
 10580 000e 07F11403 		add	r3, r7, #20
 10581 0012 0022     		movs	r2, #0
 10582 0014 1A60     		str	r2, [r3]
 10583 0016 0433     		adds	r3, r3, #4
 10584 0018 0022     		movs	r2, #0
 10585 001a 1A60     		str	r2, [r3]
 10586 001c 0433     		adds	r3, r3, #4
 10587 001e 0022     		movs	r2, #0
 10588 0020 1A60     		str	r2, [r3]
 10589 0022 0433     		adds	r3, r3, #4
 10590 0024 0022     		movs	r2, #0
 10591 0026 1A60     		str	r2, [r3]
 10592 0028 0433     		adds	r3, r3, #4
 10593 002a 0022     		movs	r2, #0
 10594 002c 1A60     		str	r2, [r3]
 10595 002e 0433     		adds	r3, r3, #4
 10596 0030 0022     		movs	r2, #0
 10597 0032 1A60     		str	r2, [r3]
 10598 0034 0433     		adds	r3, r3, #4
ARM GAS  /tmp/ccQUMSla.s 			page 235


 10599 0036 0022     		movs	r2, #0
 10600 0038 1A60     		str	r2, [r3]
 10601 003a 0433     		adds	r3, r3, #4
 10602 003c 0022     		movs	r2, #0
 10603 003e 1A60     		str	r2, [r3]
 10604 0040 0433     		adds	r3, r3, #4
 10605 0042 0022     		movs	r2, #0
 10606 0044 1A60     		str	r2, [r3]
 10607 0046 0433     		adds	r3, r3, #4
 10608 0048 0022     		movs	r2, #0
 10609 004a 1A60     		str	r2, [r3]
 10610 004c 0433     		adds	r3, r3, #4
 10611 004e 0022     		movs	r2, #0
 10612 0050 1A60     		str	r2, [r3]
 10613 0052 0433     		adds	r3, r3, #4
 10614 0054 0022     		movs	r2, #0
 10615 0056 1A60     		str	r2, [r3]
 10616 0058 0433     		adds	r3, r3, #4
 10617 005a 0022     		movs	r2, #0
 10618 005c 1A80     		strh	r2, [r3]	@ movhi
 10619 005e 0233     		adds	r3, r3, #2
2791:bluetooth_rxtx.c **** 	if (len > 49)
 10620              		.loc 1 2791 0
 10621 0060 7B68     		ldr	r3, [r7, #4]
 10622 0062 312B     		cmp	r3, #49
 10623 0064 01D9     		bls	.L533
2792:bluetooth_rxtx.c **** 		len = 49;
 10624              		.loc 1 2792 0
 10625 0066 3123     		movs	r3, #49
 10626 0068 7B60     		str	r3, [r7, #4]
 10627              	.L533:
2793:bluetooth_rxtx.c **** 
2794:bluetooth_rxtx.c **** 	buf[0] = type;
 10628              		.loc 1 2794 0
 10629 006a FB7B     		ldrb	r3, [r7, #15]
 10630 006c 3B75     		strb	r3, [r7, #20]
2795:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 10631              		.loc 1 2795 0
 10632 006e 07F11403 		add	r3, r7, #20
 10633 0072 0133     		adds	r3, r3, #1
 10634 0074 1846     		mov	r0, r3
 10635 0076 B968     		ldr	r1, [r7, #8]
 10636 0078 7A68     		ldr	r2, [r7, #4]
 10637 007a FFF7FEFF 		bl	memcpy
2796:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 10638              		.loc 1 2796 0
 10639 007e 07F11403 		add	r3, r7, #20
 10640 0082 0520     		movs	r0, #5
 10641 0084 1946     		mov	r1, r3
 10642 0086 FFF7FEFF 		bl	enqueue
2797:bluetooth_rxtx.c **** }
 10643              		.loc 1 2797 0
 10644 008a 4837     		adds	r7, r7, #72
 10645              		.cfi_def_cfa_offset 8
 10646 008c BD46     		mov	sp, r7
 10647              		.cfi_def_cfa_register 13
 10648              		@ sp needed
ARM GAS  /tmp/ccQUMSla.s 			page 236


 10649 008e 80BD     		pop	{r7, pc}
 10650              		.cfi_endproc
 10651              	.LFE44:
 10653              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 10654              		.align	2
 10655              		.global	promisc_recover_hop_increment
 10656              		.thumb
 10657              		.thumb_func
 10659              	promisc_recover_hop_increment:
 10660              	.LFB45:
2798:bluetooth_rxtx.c **** 
2799:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2800:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2801:bluetooth_rxtx.c **** 
2802:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 10661              		.loc 1 2802 0
 10662              		.cfi_startproc
 10663              		@ args = 0, pretend = 0, frame = 16
 10664              		@ frame_needed = 1, uses_anonymous_args = 0
 10665 0000 80B5     		push	{r7, lr}
 10666              		.cfi_def_cfa_offset 8
 10667              		.cfi_offset 7, -8
 10668              		.cfi_offset 14, -4
 10669 0002 84B0     		sub	sp, sp, #16
 10670              		.cfi_def_cfa_offset 24
 10671 0004 00AF     		add	r7, sp, #0
 10672              		.cfi_def_cfa_register 7
 10673 0006 7860     		str	r0, [r7, #4]
2803:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2804:bluetooth_rxtx.c **** 	if (channel == 2404) {
 10674              		.loc 1 2804 0
 10675 0008 554B     		ldr	r3, .L541
 10676 000a 1B88     		ldrh	r3, [r3]	@ movhi
 10677 000c 9BB2     		uxth	r3, r3
 10678 000e 40F66412 		movw	r2, #2404
 10679 0012 9342     		cmp	r3, r2
 10680 0014 14D1     		bne	.L535
2805:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 10681              		.loc 1 2805 0
 10682 0016 534B     		ldr	r3, .L541+4
 10683 0018 1B68     		ldr	r3, [r3]
 10684 001a C3F31303 		ubfx	r3, r3, #0, #20
 10685 001e 40F63542 		movw	r2, #3125
 10686 0022 02FB03F2 		mul	r2, r2, r3
 10687 0026 504B     		ldr	r3, .L541+8
 10688 0028 1B68     		ldr	r3, [r3]
 10689 002a 1344     		add	r3, r3, r2
 10690 002c 4F4A     		ldr	r2, .L541+12
 10691 002e 1360     		str	r3, [r2]
2806:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 10692              		.loc 1 2806 0
 10693 0030 4F4B     		ldr	r3, .L541+16
 10694 0032 40F66612 		movw	r2, #2406
 10695 0036 1A80     		strh	r2, [r3]	@ movhi
2807:bluetooth_rxtx.c **** 		do_hop = 1;
 10696              		.loc 1 2807 0
 10697 0038 4E4B     		ldr	r3, .L541+20
ARM GAS  /tmp/ccQUMSla.s 			page 237


 10698 003a 0122     		movs	r2, #1
 10699 003c 1A70     		strb	r2, [r3]
 10700 003e 8BE0     		b	.L534
 10701              	.L535:
2808:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 10702              		.loc 1 2808 0
 10703 0040 474B     		ldr	r3, .L541
 10704 0042 1B88     		ldrh	r3, [r3]	@ movhi
 10705 0044 9BB2     		uxth	r3, r3
 10706 0046 40F66612 		movw	r2, #2406
 10707 004a 9342     		cmp	r3, r2
 10708 004c 7DD1     		bne	.L537
 10709              	.LBB24:
2809:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 10710              		.loc 1 2809 0
 10711 004e 454B     		ldr	r3, .L541+4
 10712 0050 1B68     		ldr	r3, [r3]
 10713 0052 C3F31303 		ubfx	r3, r3, #0, #20
 10714 0056 40F63542 		movw	r2, #3125
 10715 005a 02FB03F2 		mul	r2, r2, r3
 10716 005e 424B     		ldr	r3, .L541+8
 10717 0060 1B68     		ldr	r3, [r3]
 10718 0062 1344     		add	r3, r3, r2
 10719 0064 FB60     		str	r3, [r7, #12]
2810:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 10720              		.loc 1 2810 0
 10721 0066 414B     		ldr	r3, .L541+12
 10722 0068 1B68     		ldr	r3, [r3]
 10723 006a FA68     		ldr	r2, [r7, #12]
 10724 006c 9A42     		cmp	r2, r3
 10725 006e 05D2     		bcs	.L538
2811:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 10726              		.loc 1 2811 0
 10727 0070 FB68     		ldr	r3, [r7, #12]
 10728 0072 03F14343 		add	r3, r3, #-1023410176
 10729 0076 03F5A003 		add	r3, r3, #5242880
 10730 007a FB60     		str	r3, [r7, #12]
 10731              	.L538:
2812:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2813:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 10732              		.loc 1 2813 0
 10733 007c 3B4B     		ldr	r3, .L541+12
 10734 007e 1B68     		ldr	r3, [r3]
 10735 0080 FA68     		ldr	r2, [r7, #12]
 10736 0082 D21A     		subs	r2, r2, r3
 10737 0084 3C4B     		ldr	r3, .L541+24
 10738 0086 DB8B     		ldrh	r3, [r3, #30]
 10739 0088 1946     		mov	r1, r3
 10740 008a 43F2D403 		movw	r3, #12500
 10741 008e 03FB01F3 		mul	r3, r3, r1
 10742 0092 D90F     		lsrs	r1, r3, #31
 10743 0094 0B44     		add	r3, r3, r1
 10744 0096 5B10     		asrs	r3, r3, #1
 10745 0098 1344     		add	r3, r3, r2
 10746 009a 374A     		ldr	r2, .L541+24
 10747 009c D28B     		ldrh	r2, [r2, #30]
 10748 009e 1146     		mov	r1, r2
ARM GAS  /tmp/ccQUMSla.s 			page 238


 10749 00a0 43F2D402 		movw	r2, #12500
 10750 00a4 02FB01F2 		mul	r2, r2, r1
 10751 00a8 B3FBF2F3 		udiv	r3, r3, r2
 10752 00ac BB60     		str	r3, [r7, #8]
2814:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2815:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 10753              		.loc 1 2815 0
 10754 00ae BB68     		ldr	r3, [r7, #8]
 10755 00b0 242B     		cmp	r3, #36
 10756 00b2 42D8     		bhi	.L539
2816:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2817:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 10757              		.loc 1 2817 0
 10758 00b4 314A     		ldr	r2, .L541+28
 10759 00b6 BB68     		ldr	r3, [r7, #8]
 10760 00b8 1344     		add	r3, r3, r2
 10761 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 10762 00bc 2E4B     		ldr	r3, .L541+24
 10763 00be 9A75     		strb	r2, [r3, #22]
2818:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 10764              		.loc 1 2818 0
 10765 00c0 2D4B     		ldr	r3, .L541+24
 10766 00c2 DB8B     		ldrh	r3, [r3, #30]
 10767 00c4 5B08     		lsrs	r3, r3, #1
 10768 00c6 9AB2     		uxth	r2, r3
 10769 00c8 2B4B     		ldr	r3, .L541+24
 10770 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2819:bluetooth_rxtx.c **** 			le.conn_count = 0;
 10771              		.loc 1 2819 0
 10772 00cc 2A4B     		ldr	r3, .L541+24
 10773 00ce 0022     		movs	r2, #0
 10774 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2820:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 10775              		.loc 1 2820 0
 10776 00d2 294B     		ldr	r3, .L541+24
 10777 00d4 0022     		movs	r2, #0
 10778 00d6 9A61     		str	r2, [r3, #24]
2821:bluetooth_rxtx.c **** 			do_hop = 0;
 10779              		.loc 1 2821 0
 10780 00d8 264B     		ldr	r3, .L541+20
 10781 00da 0022     		movs	r2, #0
 10782 00dc 1A70     		strb	r2, [r3]
2822:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2823:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 10783              		.loc 1 2823 0
 10784 00de 264B     		ldr	r3, .L541+24
 10785 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 10786 00e2 5A1C     		adds	r2, r3, #1
 10787 00e4 264B     		ldr	r3, .L541+32
 10788 00e6 82FB0301 		smull	r0, r1, r2, r3
 10789 00ea 5318     		adds	r3, r2, r1
 10790 00ec 5911     		asrs	r1, r3, #5
 10791 00ee D317     		asrs	r3, r2, #31
 10792 00f0 C91A     		subs	r1, r1, r3
 10793 00f2 0B46     		mov	r3, r1
 10794 00f4 DB00     		lsls	r3, r3, #3
 10795 00f6 0B44     		add	r3, r3, r1
ARM GAS  /tmp/ccQUMSla.s 			page 239


 10796 00f8 9B00     		lsls	r3, r3, #2
 10797 00fa 0B44     		add	r3, r3, r1
 10798 00fc D11A     		subs	r1, r2, r3
 10799 00fe CAB2     		uxtb	r2, r1
 10800 0100 1D4B     		ldr	r3, .L541+24
 10801 0102 5A75     		strb	r2, [r3, #21]
2824:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 10802              		.loc 1 2824 0
 10803 0104 1C4B     		ldr	r3, .L541+24
 10804 0106 0322     		movs	r2, #3
 10805 0108 1A75     		strb	r2, [r3, #20]
2825:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 10806              		.loc 1 2825 0
 10807 010a 1B4B     		ldr	r3, .L541+24
 10808 010c 0022     		movs	r2, #0
 10809 010e 1A61     		str	r2, [r3, #16]
2826:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 10810              		.loc 1 2826 0
 10811 0110 1C4B     		ldr	r3, .L541+36
 10812 0112 0322     		movs	r2, #3
 10813 0114 1A70     		strb	r2, [r3]
2827:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 10814              		.loc 1 2827 0
 10815 0116 1C4B     		ldr	r3, .L541+40
 10816 0118 1C4A     		ldr	r2, .L541+44
 10817 011a 1A60     		str	r2, [r3]
2828:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 10818              		.loc 1 2828 0
 10819 011c 0320     		movs	r0, #3
 10820 011e 1C49     		ldr	r1, .L541+48
 10821 0120 0122     		movs	r2, #1
 10822 0122 FFF7FEFF 		bl	le_promisc_state
2829:bluetooth_rxtx.c **** 
2830:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 10823              		.loc 1 2830 0
 10824 0126 1B4B     		ldr	r3, .L541+52
 10825 0128 1B78     		ldrb	r3, [r3]
 10826 012a DBB2     		uxtb	r3, r3
 10827 012c 002B     		cmp	r3, #0
 10828 012e 03D0     		beq	.L540
2831:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 10829              		.loc 1 2831 0
 10830 0130 194B     		ldr	r3, .L541+56
 10831 0132 2822     		movs	r2, #40
 10832 0134 1A60     		str	r2, [r3]
2832:bluetooth_rxtx.c **** 
2833:bluetooth_rxtx.c **** 			return;
 10833              		.loc 1 2833 0
 10834 0136 0FE0     		b	.L534
 10835              	.L540:
 10836 0138 0EE0     		b	.L534
 10837              	.L539:
2834:bluetooth_rxtx.c **** 		}
2835:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 10838              		.loc 1 2835 0
 10839 013a 0D4B     		ldr	r3, .L541+16
 10840 013c 40F66412 		movw	r2, #2404
ARM GAS  /tmp/ccQUMSla.s 			page 240


 10841 0140 1A80     		strh	r2, [r3]	@ movhi
2836:bluetooth_rxtx.c **** 		do_hop = 1;
 10842              		.loc 1 2836 0
 10843 0142 0C4B     		ldr	r3, .L541+20
 10844 0144 0122     		movs	r2, #1
 10845 0146 1A70     		strb	r2, [r3]
 10846              	.LBE24:
 10847 0148 06E0     		b	.L534
 10848              	.L537:
2837:bluetooth_rxtx.c **** 	}
2838:bluetooth_rxtx.c **** 	else {
2839:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 10849              		.loc 1 2839 0
 10850 014a 094B     		ldr	r3, .L541+16
 10851 014c 40F66412 		movw	r2, #2404
 10852 0150 1A80     		strh	r2, [r3]	@ movhi
2840:bluetooth_rxtx.c **** 		do_hop = 1;
 10853              		.loc 1 2840 0
 10854 0152 084B     		ldr	r3, .L541+20
 10855 0154 0122     		movs	r2, #1
 10856 0156 1A70     		strb	r2, [r3]
 10857              	.L534:
2841:bluetooth_rxtx.c **** 	}
2842:bluetooth_rxtx.c **** }
 10858              		.loc 1 2842 0
 10859 0158 1037     		adds	r7, r7, #16
 10860              		.cfi_def_cfa_offset 8
 10861 015a BD46     		mov	sp, r7
 10862              		.cfi_def_cfa_register 13
 10863              		@ sp needed
 10864 015c 80BD     		pop	{r7, pc}
 10865              	.L542:
 10866 015e 00BF     		.align	2
 10867              	.L541:
 10868 0160 00000000 		.word	channel
 10869 0164 00000000 		.word	clkn
 10870 0168 08400040 		.word	1073758216
 10871 016c D8000000 		.word	first_ts.4997
 10872 0170 00000000 		.word	hop_direct_channel
 10873 0174 00000000 		.word	do_hop
 10874 0178 00000000 		.word	le
 10875 017c E8000000 		.word	hop_interval_lut
 10876 0180 A7C867DD 		.word	-580400985
 10877 0184 00000000 		.word	hop_mode
 10878 0188 00000000 		.word	packet_cb
 10879 018c 00000000 		.word	connection_follow_cb
 10880 0190 16000000 		.word	le+22
 10881 0194 00000000 		.word	jam_mode
 10882 0198 00000000 		.word	le_jam_count
 10883              		.cfi_endproc
 10884              	.LFE45:
 10886              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 10887              		.align	2
 10888              		.global	promisc_recover_hop_interval
 10889              		.thumb
 10890              		.thumb_func
 10892              	promisc_recover_hop_interval:
ARM GAS  /tmp/ccQUMSla.s 			page 241


 10893              	.LFB46:
2843:bluetooth_rxtx.c **** 
2844:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 10894              		.loc 1 2844 0
 10895              		.cfi_startproc
 10896              		@ args = 0, pretend = 0, frame = 24
 10897              		@ frame_needed = 1, uses_anonymous_args = 0
 10898 0000 80B5     		push	{r7, lr}
 10899              		.cfi_def_cfa_offset 8
 10900              		.cfi_offset 7, -8
 10901              		.cfi_offset 14, -4
 10902 0002 86B0     		sub	sp, sp, #24
 10903              		.cfi_def_cfa_offset 32
 10904 0004 00AF     		add	r7, sp, #0
 10905              		.cfi_def_cfa_register 7
 10906 0006 7860     		str	r0, [r7, #4]
2845:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2846:bluetooth_rxtx.c **** 
2847:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 10907              		.loc 1 2847 0
 10908 0008 334B     		ldr	r3, .L551
 10909 000a 1B68     		ldr	r3, [r3]
 10910 000c C3F31303 		ubfx	r3, r3, #0, #20
 10911 0010 40F63542 		movw	r2, #3125
 10912 0014 02FB03F2 		mul	r2, r2, r3
 10913 0018 304B     		ldr	r3, .L551+4
 10914 001a 1B68     		ldr	r3, [r3]
 10915 001c 1344     		add	r3, r3, r2
 10916 001e 7B61     		str	r3, [r7, #20]
2848:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 10917              		.loc 1 2848 0
 10918 0020 2F4B     		ldr	r3, .L551+8
 10919 0022 1B68     		ldr	r3, [r3]
 10920 0024 7A69     		ldr	r2, [r7, #20]
 10921 0026 9A42     		cmp	r2, r3
 10922 0028 03D2     		bcs	.L544
2849:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 10923              		.loc 1 2849 0
 10924 002a 7A69     		ldr	r2, [r7, #20]
 10925 002c 2D4B     		ldr	r3, .L551+12
 10926 002e 1344     		add	r3, r3, r2
 10927 0030 7B61     		str	r3, [r7, #20]
 10928              	.L544:
2850:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 10929              		.loc 1 2850 0
 10930 0032 2B4B     		ldr	r3, .L551+8
 10931 0034 1B68     		ldr	r3, [r3]
 10932 0036 7A69     		ldr	r2, [r7, #20]
 10933 0038 D31A     		subs	r3, r2, r3
 10934 003a 3B61     		str	r3, [r7, #16]
2851:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2852:bluetooth_rxtx.c **** 
2853:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2854:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 10935              		.loc 1 2854 0
 10936 003c 3B69     		ldr	r3, [r7, #16]
 10937 003e 46F2A712 		movw	r2, #24999
ARM GAS  /tmp/ccQUMSla.s 			page 242


 10938 0042 9342     		cmp	r3, r2
 10939 0044 00D8     		bhi	.L545
2855:bluetooth_rxtx.c **** 		return;
 10940              		.loc 1 2855 0
 10941 0046 43E0     		b	.L543
 10942              	.L545:
2856:bluetooth_rxtx.c **** 
2857:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 10943              		.loc 1 2857 0
 10944 0048 274B     		ldr	r3, .L551+16
 10945 004a D3F80021 		ldr	r2, [r3, #256]
 10946 004e 3B69     		ldr	r3, [r7, #16]
 10947 0050 9A42     		cmp	r2, r3
 10948 0052 03D9     		bls	.L547
2858:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 10949              		.loc 1 2858 0
 10950 0054 244A     		ldr	r2, .L551+16
 10951 0056 3B69     		ldr	r3, [r7, #16]
 10952 0058 C2F80031 		str	r3, [r2, #256]
 10953              	.L547:
2859:bluetooth_rxtx.c **** 
2860:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 10954              		.loc 1 2860 0
 10955 005c 224B     		ldr	r3, .L551+16
 10956 005e D3F80031 		ldr	r3, [r3, #256]
 10957 0062 03F56133 		add	r3, r3, #230400
 10958 0066 03F25233 		addw	r3, r3, #850
 10959 006a 204A     		ldr	r2, .L551+20
 10960 006c A2FB0323 		umull	r2, r3, r2, r3
 10961 0070 9B0C     		lsrs	r3, r3, #18
 10962 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2861:bluetooth_rxtx.c **** 
2862:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 10963              		.loc 1 2862 0
 10964 0074 1E4B     		ldr	r3, .L551+24
 10965 0076 DB8B     		ldrh	r3, [r3, #30]
 10966 0078 FA89     		ldrh	r2, [r7, #14]
 10967 007a 9A42     		cmp	r2, r3
 10968 007c 1ED1     		bne	.L548
2863:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2864:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 10969              		.loc 1 2864 0
 10970 007e 1A4B     		ldr	r3, .L551+16
 10971 0080 D3F80431 		ldr	r3, [r3, #260]
 10972 0084 0133     		adds	r3, r3, #1
 10973 0086 184A     		ldr	r2, .L551+16
 10974 0088 C2F80431 		str	r3, [r2, #260]
2865:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 10975              		.loc 1 2865 0
 10976 008c 164B     		ldr	r3, .L551+16
 10977 008e D3F80431 		ldr	r3, [r3, #260]
 10978 0092 052B     		cmp	r3, #5
 10979 0094 19D1     		bne	.L550
2866:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 10980              		.loc 1 2866 0
 10981 0096 174B     		ldr	r3, .L551+28
 10982 0098 174A     		ldr	r2, .L551+32
ARM GAS  /tmp/ccQUMSla.s 			page 243


 10983 009a 1A60     		str	r2, [r3]
2867:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 10984              		.loc 1 2867 0
 10985 009c 174B     		ldr	r3, .L551+36
 10986 009e 40F66412 		movw	r2, #2404
 10987 00a2 1A80     		strh	r2, [r3]	@ movhi
2868:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 10988              		.loc 1 2868 0
 10989 00a4 164B     		ldr	r3, .L551+40
 10990 00a6 0422     		movs	r2, #4
 10991 00a8 1A70     		strb	r2, [r3]
2869:bluetooth_rxtx.c **** 			do_hop = 1;
 10992              		.loc 1 2869 0
 10993 00aa 164B     		ldr	r3, .L551+44
 10994 00ac 0122     		movs	r2, #1
 10995 00ae 1A70     		strb	r2, [r3]
2870:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 10996              		.loc 1 2870 0
 10997 00b0 0220     		movs	r0, #2
 10998 00b2 1549     		ldr	r1, .L551+48
 10999 00b4 0222     		movs	r2, #2
 11000 00b6 FFF7FEFF 		bl	le_promisc_state
 11001 00ba 06E0     		b	.L550
 11002              	.L548:
2871:bluetooth_rxtx.c **** 		}
2872:bluetooth_rxtx.c **** 	} else {
2873:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 11003              		.loc 1 2873 0
 11004 00bc 0C4A     		ldr	r2, .L551+24
 11005 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 11006 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2874:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 11007              		.loc 1 2874 0
 11008 00c2 094B     		ldr	r3, .L551+16
 11009 00c4 0022     		movs	r2, #0
 11010 00c6 C3F80421 		str	r2, [r3, #260]
 11011              	.L550:
2875:bluetooth_rxtx.c **** 	}
2876:bluetooth_rxtx.c **** 
2877:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 11012              		.loc 1 2877 0
 11013 00ca 054A     		ldr	r2, .L551+8
 11014 00cc 7B69     		ldr	r3, [r7, #20]
 11015 00ce 1360     		str	r3, [r2]
 11016              	.L543:
2878:bluetooth_rxtx.c **** }
 11017              		.loc 1 2878 0
 11018 00d0 1837     		adds	r7, r7, #24
 11019              		.cfi_def_cfa_offset 8
 11020 00d2 BD46     		mov	sp, r7
 11021              		.cfi_def_cfa_register 13
 11022              		@ sp needed
 11023 00d4 80BD     		pop	{r7, pc}
 11024              	.L552:
 11025 00d6 00BF     		.align	2
 11026              	.L551:
 11027 00d8 00000000 		.word	clkn
ARM GAS  /tmp/ccQUMSla.s 			page 244


 11028 00dc 08400040 		.word	1073758216
 11029 00e0 DC000000 		.word	prev_clk.5003
 11030 00e4 C0ABC6C2 		.word	-1027167296
 11031 00e8 00000000 		.word	le_promisc
 11032 00ec C1A91991 		.word	-1860589119
 11033 00f0 00000000 		.word	le
 11034 00f4 00000000 		.word	packet_cb
 11035 00f8 00000000 		.word	promisc_recover_hop_increment
 11036 00fc 00000000 		.word	hop_direct_channel
 11037 0100 00000000 		.word	hop_mode
 11038 0104 00000000 		.word	do_hop
 11039 0108 1E000000 		.word	le+30
 11040              		.cfi_endproc
 11041              	.LFE46:
 11043              		.section	.text.promisc_follow_cb,"ax",%progbits
 11044              		.align	2
 11045              		.global	promisc_follow_cb
 11046              		.thumb
 11047              		.thumb_func
 11049              	promisc_follow_cb:
 11050              	.LFB47:
2879:bluetooth_rxtx.c **** 
2880:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 11051              		.loc 1 2880 0
 11052              		.cfi_startproc
 11053              		@ args = 0, pretend = 0, frame = 16
 11054              		@ frame_needed = 1, uses_anonymous_args = 0
 11055 0000 80B5     		push	{r7, lr}
 11056              		.cfi_def_cfa_offset 8
 11057              		.cfi_offset 7, -8
 11058              		.cfi_offset 14, -4
 11059 0002 84B0     		sub	sp, sp, #16
 11060              		.cfi_def_cfa_offset 24
 11061 0004 00AF     		add	r7, sp, #0
 11062              		.cfi_def_cfa_register 7
 11063 0006 7860     		str	r0, [r7, #4]
2881:bluetooth_rxtx.c **** 	int i;
2882:bluetooth_rxtx.c **** 
2883:bluetooth_rxtx.c **** 	// get the CRCInit
2884:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 11064              		.loc 1 2884 0
 11065 0008 284B     		ldr	r3, .L557
 11066 000a 1B69     		ldr	r3, [r3, #16]
 11067 000c 002B     		cmp	r3, #0
 11068 000e 49D1     		bne	.L553
 11069              		.loc 1 2884 0 is_stmt 0 discriminator 1
 11070 0010 7B68     		ldr	r3, [r7, #4]
 11071 0012 0433     		adds	r3, r3, #4
 11072 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11073 0016 012B     		cmp	r3, #1
 11074 0018 44D1     		bne	.L553
 11075              		.loc 1 2884 0 discriminator 2
 11076 001a 7B68     		ldr	r3, [r7, #4]
 11077 001c 0533     		adds	r3, r3, #5
 11078 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11079 0020 002B     		cmp	r3, #0
 11080 0022 3FD1     		bne	.L553
ARM GAS  /tmp/ccQUMSla.s 			page 245


 11081              	.LBB25:
2885:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 11082              		.loc 1 2885 0 is_stmt 1
 11083 0024 7B68     		ldr	r3, [r7, #4]
 11084 0026 0833     		adds	r3, r3, #8
 11085 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11086 002a 1A04     		lsls	r2, r3, #16
 11087 002c 7B68     		ldr	r3, [r7, #4]
 11088 002e 0733     		adds	r3, r3, #7
 11089 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11090 0032 1B02     		lsls	r3, r3, #8
 11091 0034 1343     		orrs	r3, r3, r2
 11092 0036 7A68     		ldr	r2, [r7, #4]
 11093 0038 0632     		adds	r2, r2, #6
 11094 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 11095 003c 1343     		orrs	r3, r3, r2
 11096 003e BB60     		str	r3, [r7, #8]
2886:bluetooth_rxtx.c **** 
2887:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 11097              		.loc 1 2887 0
 11098 0040 7B68     		ldr	r3, [r7, #4]
 11099 0042 0433     		adds	r3, r3, #4
 11100 0044 B868     		ldr	r0, [r7, #8]
 11101 0046 1946     		mov	r1, r3
 11102 0048 0222     		movs	r2, #2
 11103 004a FFF7FEFF 		bl	btle_reverse_crc
 11104 004e 0246     		mov	r2, r0
 11105 0050 164B     		ldr	r3, .L557
 11106 0052 9A60     		str	r2, [r3, #8]
2888:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 11107              		.loc 1 2888 0
 11108 0054 154B     		ldr	r3, .L557
 11109 0056 0022     		movs	r2, #0
 11110 0058 DA60     		str	r2, [r3, #12]
2889:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 11111              		.loc 1 2889 0
 11112 005a 0023     		movs	r3, #0
 11113 005c FB60     		str	r3, [r7, #12]
 11114 005e 13E0     		b	.L555
 11115              	.L556:
2890:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 11116              		.loc 1 2890 0 discriminator 3
 11117 0060 124B     		ldr	r3, .L557
 11118 0062 DA68     		ldr	r2, [r3, #12]
 11119 0064 114B     		ldr	r3, .L557
 11120 0066 9968     		ldr	r1, [r3, #8]
 11121 0068 FB68     		ldr	r3, [r7, #12]
 11122 006a 21FA03F3 		lsr	r3, r1, r3
 11123 006e 03F00101 		and	r1, r3, #1
 11124 0072 FB68     		ldr	r3, [r7, #12]
 11125 0074 C3F11703 		rsb	r3, r3, #23
 11126 0078 01FA03F3 		lsl	r3, r1, r3
 11127 007c 1343     		orrs	r3, r3, r2
 11128 007e 0B4A     		ldr	r2, .L557
 11129 0080 D360     		str	r3, [r2, #12]
2889:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 11130              		.loc 1 2889 0 discriminator 3
ARM GAS  /tmp/ccQUMSla.s 			page 246


 11131 0082 FB68     		ldr	r3, [r7, #12]
 11132 0084 0133     		adds	r3, r3, #1
 11133 0086 FB60     		str	r3, [r7, #12]
 11134              	.L555:
2889:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 11135              		.loc 1 2889 0 is_stmt 0 discriminator 1
 11136 0088 FB68     		ldr	r3, [r7, #12]
 11137 008a 172B     		cmp	r3, #23
 11138 008c E8DD     		ble	.L556
2891:bluetooth_rxtx.c **** 
2892:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 11139              		.loc 1 2892 0 is_stmt 1
 11140 008e 074B     		ldr	r3, .L557
 11141 0090 0122     		movs	r2, #1
 11142 0092 1A61     		str	r2, [r3, #16]
2893:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 11143              		.loc 1 2893 0
 11144 0094 064B     		ldr	r3, .L557+4
 11145 0096 074A     		ldr	r2, .L557+8
 11146 0098 1A60     		str	r2, [r3]
2894:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 11147              		.loc 1 2894 0
 11148 009a 0120     		movs	r0, #1
 11149 009c 0649     		ldr	r1, .L557+12
 11150 009e 0322     		movs	r2, #3
 11151 00a0 FFF7FEFF 		bl	le_promisc_state
 11152              	.L553:
 11153              	.LBE25:
2895:bluetooth_rxtx.c **** 	}
2896:bluetooth_rxtx.c **** }
 11154              		.loc 1 2896 0
 11155 00a4 1037     		adds	r7, r7, #16
 11156              		.cfi_def_cfa_offset 8
 11157 00a6 BD46     		mov	sp, r7
 11158              		.cfi_def_cfa_register 13
 11159              		@ sp needed
 11160 00a8 80BD     		pop	{r7, pc}
 11161              	.L558:
 11162 00aa 00BF     		.align	2
 11163              	.L557:
 11164 00ac 00000000 		.word	le
 11165 00b0 00000000 		.word	packet_cb
 11166 00b4 00000000 		.word	promisc_recover_hop_interval
 11167 00b8 08000000 		.word	le+8
 11168              		.cfi_endproc
 11169              	.LFE47:
 11171              		.section	.text.see_aa,"ax",%progbits
 11172              		.align	2
 11173              		.global	see_aa
 11174              		.thumb
 11175              		.thumb_func
 11177              	see_aa:
 11178              	.LFB48:
2897:bluetooth_rxtx.c **** 
2898:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2899:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 11179              		.loc 1 2899 0
ARM GAS  /tmp/ccQUMSla.s 			page 247


 11180              		.cfi_startproc
 11181              		@ args = 0, pretend = 0, frame = 24
 11182              		@ frame_needed = 1, uses_anonymous_args = 0
 11183              		@ link register save eliminated.
 11184 0000 80B4     		push	{r7}
 11185              		.cfi_def_cfa_offset 4
 11186              		.cfi_offset 7, -4
 11187 0002 87B0     		sub	sp, sp, #28
 11188              		.cfi_def_cfa_offset 32
 11189 0004 00AF     		add	r7, sp, #0
 11190              		.cfi_def_cfa_register 7
 11191 0006 7860     		str	r0, [r7, #4]
2900:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 11192              		.loc 1 2900 0
 11193 0008 4FF0FF33 		mov	r3, #-1
 11194 000c 3B61     		str	r3, [r7, #16]
 11195 000e 4FF0FF33 		mov	r3, #-1
 11196 0012 FB60     		str	r3, [r7, #12]
2901:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 11197              		.loc 1 2901 0
 11198 0014 0023     		movs	r3, #0
 11199 0016 7B61     		str	r3, [r7, #20]
 11200 0018 15E0     		b	.L560
 11201              	.L563:
2902:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 11202              		.loc 1 2902 0
 11203 001a 224A     		ldr	r2, .L568
 11204 001c 7B69     		ldr	r3, [r7, #20]
 11205 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 11206 0022 7B68     		ldr	r3, [r7, #4]
 11207 0024 9A42     		cmp	r2, r3
 11208 0026 0BD1     		bne	.L561
2903:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 11209              		.loc 1 2903 0
 11210 0028 1E4A     		ldr	r2, .L568
 11211 002a 7B69     		ldr	r3, [r7, #20]
 11212 002c DB00     		lsls	r3, r3, #3
 11213 002e 1344     		add	r3, r3, r2
 11214 0030 5B68     		ldr	r3, [r3, #4]
 11215 0032 5A1C     		adds	r2, r3, #1
 11216 0034 1B49     		ldr	r1, .L568
 11217 0036 7B69     		ldr	r3, [r7, #20]
 11218 0038 DB00     		lsls	r3, r3, #3
 11219 003a 0B44     		add	r3, r3, r1
 11220 003c 5A60     		str	r2, [r3, #4]
2904:bluetooth_rxtx.c **** 			return;
 11221              		.loc 1 2904 0
 11222 003e 2CE0     		b	.L559
 11223              	.L561:
2901:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 11224              		.loc 1 2901 0 discriminator 2
 11225 0040 7B69     		ldr	r3, [r7, #20]
 11226 0042 0133     		adds	r3, r3, #1
 11227 0044 7B61     		str	r3, [r7, #20]
 11228              	.L560:
2901:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 11229              		.loc 1 2901 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccQUMSla.s 			page 248


 11230 0046 7B69     		ldr	r3, [r7, #20]
 11231 0048 1F2B     		cmp	r3, #31
 11232 004a E6DD     		ble	.L563
2905:bluetooth_rxtx.c **** 		}
2906:bluetooth_rxtx.c **** 
2907:bluetooth_rxtx.c **** 	// evict someone
2908:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 11233              		.loc 1 2908 0 is_stmt 1
 11234 004c 0023     		movs	r3, #0
 11235 004e 7B61     		str	r3, [r7, #20]
 11236 0050 15E0     		b	.L564
 11237              	.L567:
2909:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 11238              		.loc 1 2909 0
 11239 0052 144A     		ldr	r2, .L568
 11240 0054 7B69     		ldr	r3, [r7, #20]
 11241 0056 DB00     		lsls	r3, r3, #3
 11242 0058 1344     		add	r3, r3, r2
 11243 005a 5A68     		ldr	r2, [r3, #4]
 11244 005c 3B69     		ldr	r3, [r7, #16]
 11245 005e 9A42     		cmp	r2, r3
 11246 0060 02DB     		blt	.L565
 11247              		.loc 1 2909 0 is_stmt 0 discriminator 1
 11248 0062 3B69     		ldr	r3, [r7, #16]
 11249 0064 002B     		cmp	r3, #0
 11250 0066 07DA     		bge	.L566
 11251              	.L565:
2910:bluetooth_rxtx.c **** 			killme = i;
 11252              		.loc 1 2910 0 is_stmt 1
 11253 0068 7B69     		ldr	r3, [r7, #20]
 11254 006a FB60     		str	r3, [r7, #12]
2911:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 11255              		.loc 1 2911 0
 11256 006c 0D4A     		ldr	r2, .L568
 11257 006e 7B69     		ldr	r3, [r7, #20]
 11258 0070 DB00     		lsls	r3, r3, #3
 11259 0072 1344     		add	r3, r3, r2
 11260 0074 5B68     		ldr	r3, [r3, #4]
 11261 0076 3B61     		str	r3, [r7, #16]
 11262              	.L566:
2908:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 11263              		.loc 1 2908 0 discriminator 2
 11264 0078 7B69     		ldr	r3, [r7, #20]
 11265 007a 0133     		adds	r3, r3, #1
 11266 007c 7B61     		str	r3, [r7, #20]
 11267              	.L564:
2908:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 11268              		.loc 1 2908 0 is_stmt 0 discriminator 1
 11269 007e 7B69     		ldr	r3, [r7, #20]
 11270 0080 1F2B     		cmp	r3, #31
 11271 0082 E6DD     		ble	.L567
2912:bluetooth_rxtx.c **** 		}
2913:bluetooth_rxtx.c **** 
2914:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 11272              		.loc 1 2914 0 is_stmt 1
 11273 0084 0749     		ldr	r1, .L568
 11274 0086 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccQUMSla.s 			page 249


 11275 0088 7A68     		ldr	r2, [r7, #4]
 11276 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2915:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 11277              		.loc 1 2915 0
 11278 008e 054A     		ldr	r2, .L568
 11279 0090 FB68     		ldr	r3, [r7, #12]
 11280 0092 DB00     		lsls	r3, r3, #3
 11281 0094 1344     		add	r3, r3, r2
 11282 0096 0122     		movs	r2, #1
 11283 0098 5A60     		str	r2, [r3, #4]
 11284              	.L559:
2916:bluetooth_rxtx.c **** }
 11285              		.loc 1 2916 0
 11286 009a 1C37     		adds	r7, r7, #28
 11287              		.cfi_def_cfa_offset 4
 11288 009c BD46     		mov	sp, r7
 11289              		.cfi_def_cfa_register 13
 11290              		@ sp needed
 11291 009e 5DF8047B 		ldr	r7, [sp], #4
 11292              		.cfi_restore 7
 11293              		.cfi_def_cfa_offset 0
 11294 00a2 7047     		bx	lr
 11295              	.L569:
 11296              		.align	2
 11297              	.L568:
 11298 00a4 00000000 		.word	le_promisc
 11299              		.cfi_endproc
 11300              	.LFE48:
 11302              		.section	.rodata
 11303 08df 00       		.align	2
 11304              	.LC0:
 11305 08e0 01000000 		.word	1
 11306 08e4 01000000 		.word	1
 11307 08e8 01000000 		.word	1
 11308 08ec 01000000 		.word	1
 11309              		.section	.text.cb_le_promisc,"ax",%progbits
 11310              		.align	2
 11311              		.global	cb_le_promisc
 11312              		.thumb
 11313              		.thumb_func
 11315              	cb_le_promisc:
 11316              	.LFB49:
2917:bluetooth_rxtx.c **** 
2918:bluetooth_rxtx.c **** /* le promiscuous mode */
2919:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 11317              		.loc 1 2919 0
 11318              		.cfi_startproc
 11319              		@ args = 0, pretend = 0, frame = 128
 11320              		@ frame_needed = 1, uses_anonymous_args = 0
 11321 0000 90B5     		push	{r4, r7, lr}
 11322              		.cfi_def_cfa_offset 12
 11323              		.cfi_offset 4, -12
 11324              		.cfi_offset 7, -8
 11325              		.cfi_offset 14, -4
 11326 0002 A1B0     		sub	sp, sp, #132
 11327              		.cfi_def_cfa_offset 144
 11328 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccQUMSla.s 			page 250


 11329              		.cfi_def_cfa_register 7
 11330 0006 7860     		str	r0, [r7, #4]
2920:bluetooth_rxtx.c **** 	int i, j, k;
2921:bluetooth_rxtx.c **** 	int idx;
2922:bluetooth_rxtx.c **** 
2923:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2924:bluetooth_rxtx.c **** 	char desired[4][16] = {
 11331              		.loc 1 2924 0
 11332 0008 07F11C03 		add	r3, r7, #28
 11333 000c 4022     		movs	r2, #64
 11334 000e 1846     		mov	r0, r3
 11335 0010 0021     		movs	r1, #0
 11336 0012 FFF7FEFF 		bl	memset
 11337 0016 0123     		movs	r3, #1
 11338 0018 3B77     		strb	r3, [r7, #28]
 11339 001a 0123     		movs	r3, #1
 11340 001c 87F82C30 		strb	r3, [r7, #44]
 11341 0020 0123     		movs	r3, #1
 11342 0022 87F82F30 		strb	r3, [r7, #47]
 11343 0026 0123     		movs	r3, #1
 11344 0028 87F83C30 		strb	r3, [r7, #60]
 11345 002c 0123     		movs	r3, #1
 11346 002e 87F83E30 		strb	r3, [r7, #62]
 11347 0032 0123     		movs	r3, #1
 11348 0034 87F84C30 		strb	r3, [r7, #76]
 11349 0038 0123     		movs	r3, #1
 11350 003a 87F84E30 		strb	r3, [r7, #78]
 11351 003e 0123     		movs	r3, #1
 11352 0040 87F84F30 		strb	r3, [r7, #79]
2925:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2926:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2927:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2928:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2929:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2930:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2931:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2932:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2933:bluetooth_rxtx.c **** 	};
2934:bluetooth_rxtx.c **** 
2935:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 11353              		.loc 1 2935 0
 11354 0044 0023     		movs	r3, #0
 11355 0046 FB67     		str	r3, [r7, #124]
 11356 0048 41E0     		b	.L571
 11357              	.L574:
2936:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11358              		.loc 1 2936 0
 11359 004a A54B     		ldr	r3, .L601
 11360 004c 1B88     		ldrh	r3, [r3]	@ movhi
 11361 004e 9BB2     		uxth	r3, r3
 11362 0050 DBB2     		uxtb	r3, r3
 11363 0052 623B     		subs	r3, r3, #98
 11364 0054 DBB2     		uxtb	r3, r3
 11365 0056 1846     		mov	r0, r3
 11366 0058 FFF7FEFF 		bl	btle_channel_index
 11367 005c 0346     		mov	r3, r0
 11368 005e 1A46     		mov	r2, r3
ARM GAS  /tmp/ccQUMSla.s 			page 251


 11369 0060 A04B     		ldr	r3, .L601+4
 11370 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 11371 0064 3B67     		str	r3, [r7, #112]
2937:bluetooth_rxtx.c **** 
2938:bluetooth_rxtx.c **** 		// whiten the desired data
2939:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 11372              		.loc 1 2939 0
 11373 0066 0023     		movs	r3, #0
 11374 0068 BB67     		str	r3, [r7, #120]
 11375 006a 2AE0     		b	.L572
 11376              	.L573:
2940:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 11377              		.loc 1 2940 0 discriminator 3
 11378 006c FB6F     		ldr	r3, [r7, #124]
 11379 006e 1B01     		lsls	r3, r3, #4
 11380 0070 07F18002 		add	r2, r7, #128
 11381 0074 1A44     		add	r2, r2, r3
 11382 0076 BB6F     		ldr	r3, [r7, #120]
 11383 0078 1344     		add	r3, r3, r2
 11384 007a 643B     		subs	r3, r3, #100
 11385 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 11386 007e 9A49     		ldr	r1, .L601+8
 11387 0080 3B6F     		ldr	r3, [r7, #112]
 11388 0082 0B44     		add	r3, r3, r1
 11389 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11390 0086 5340     		eors	r3, r3, r2
 11391 0088 D9B2     		uxtb	r1, r3
 11392 008a FB6F     		ldr	r3, [r7, #124]
 11393 008c 1B01     		lsls	r3, r3, #4
 11394 008e 07F18002 		add	r2, r7, #128
 11395 0092 1A44     		add	r2, r2, r3
 11396 0094 BB6F     		ldr	r3, [r7, #120]
 11397 0096 1344     		add	r3, r3, r2
 11398 0098 643B     		subs	r3, r3, #100
 11399 009a 0A46     		mov	r2, r1
 11400 009c 1A70     		strb	r2, [r3]
2941:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 11401              		.loc 1 2941 0 discriminator 3
 11402 009e 3B6F     		ldr	r3, [r7, #112]
 11403 00a0 0133     		adds	r3, r3, #1
 11404 00a2 1946     		mov	r1, r3
 11405 00a4 914B     		ldr	r3, .L601+12
 11406 00a6 A1FB0323 		umull	r2, r3, r1, r3
 11407 00aa C81A     		subs	r0, r1, r3
 11408 00ac 4008     		lsrs	r0, r0, #1
 11409 00ae 0344     		add	r3, r3, r0
 11410 00b0 9A09     		lsrs	r2, r3, #6
 11411 00b2 1346     		mov	r3, r2
 11412 00b4 DB01     		lsls	r3, r3, #7
 11413 00b6 9B1A     		subs	r3, r3, r2
 11414 00b8 CA1A     		subs	r2, r1, r3
 11415 00ba 3A67     		str	r2, [r7, #112]
2939:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 11416              		.loc 1 2939 0 discriminator 3
 11417 00bc BB6F     		ldr	r3, [r7, #120]
 11418 00be 0133     		adds	r3, r3, #1
 11419 00c0 BB67     		str	r3, [r7, #120]
ARM GAS  /tmp/ccQUMSla.s 			page 252


 11420              	.L572:
2939:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 11421              		.loc 1 2939 0 is_stmt 0 discriminator 1
 11422 00c2 BB6F     		ldr	r3, [r7, #120]
 11423 00c4 0F2B     		cmp	r3, #15
 11424 00c6 D1DD     		ble	.L573
2935:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11425              		.loc 1 2935 0 is_stmt 1 discriminator 2
 11426 00c8 FB6F     		ldr	r3, [r7, #124]
 11427 00ca 0133     		adds	r3, r3, #1
 11428 00cc FB67     		str	r3, [r7, #124]
 11429              	.L571:
2935:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11430              		.loc 1 2935 0 is_stmt 0 discriminator 1
 11431 00ce FB6F     		ldr	r3, [r7, #124]
 11432 00d0 032B     		cmp	r3, #3
 11433 00d2 BADD     		ble	.L574
2942:bluetooth_rxtx.c **** 		}
2943:bluetooth_rxtx.c **** 	}
2944:bluetooth_rxtx.c **** 
2945:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2946:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 11434              		.loc 1 2946 0 is_stmt 1
 11435 00d4 2023     		movs	r3, #32
 11436 00d6 FB67     		str	r3, [r7, #124]
 11437 00d8 D0E0     		b	.L575
 11438              	.L595:
 11439              	.LBB26:
2947:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 11440              		.loc 1 2947 0
 11441 00da 854B     		ldr	r3, .L601+16
 11442 00dc 07F10C04 		add	r4, r7, #12
 11443 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 11444 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2948:bluetooth_rxtx.c **** 		int matching = -1;
 11445              		.loc 1 2948 0
 11446 00e6 4FF0FF33 		mov	r3, #-1
 11447 00ea FB66     		str	r3, [r7, #108]
2949:bluetooth_rxtx.c **** 
2950:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 11448              		.loc 1 2950 0
 11449 00ec 0023     		movs	r3, #0
 11450 00ee BB67     		str	r3, [r7, #120]
 11451 00f0 26E0     		b	.L576
 11452              	.L581:
2951:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 11453              		.loc 1 2951 0
 11454 00f2 0023     		movs	r3, #0
 11455 00f4 7B67     		str	r3, [r7, #116]
 11456 00f6 1DE0     		b	.L577
 11457              	.L580:
2952:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 11458              		.loc 1 2952 0
 11459 00f8 FA6F     		ldr	r2, [r7, #124]
 11460 00fa 7B6F     		ldr	r3, [r7, #116]
 11461 00fc 1344     		add	r3, r3, r2
 11462 00fe 1A46     		mov	r2, r3
ARM GAS  /tmp/ccQUMSla.s 			page 253


 11463 0100 7B68     		ldr	r3, [r7, #4]
 11464 0102 1344     		add	r3, r3, r2
 11465 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 11466 0106 BB6F     		ldr	r3, [r7, #120]
 11467 0108 1B01     		lsls	r3, r3, #4
 11468 010a 07F18001 		add	r1, r7, #128
 11469 010e 1944     		add	r1, r1, r3
 11470 0110 7B6F     		ldr	r3, [r7, #116]
 11471 0112 0B44     		add	r3, r3, r1
 11472 0114 643B     		subs	r3, r3, #100
 11473 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11474 0118 9A42     		cmp	r2, r3
 11475 011a 08D0     		beq	.L578
2953:bluetooth_rxtx.c **** 					ok[j] = 0;
 11476              		.loc 1 2953 0
 11477 011c BB6F     		ldr	r3, [r7, #120]
 11478 011e 9B00     		lsls	r3, r3, #2
 11479 0120 07F18002 		add	r2, r7, #128
 11480 0124 1344     		add	r3, r3, r2
 11481 0126 0022     		movs	r2, #0
 11482 0128 43F8742C 		str	r2, [r3, #-116]
2954:bluetooth_rxtx.c **** 					break;
 11483              		.loc 1 2954 0
 11484 012c 05E0     		b	.L579
 11485              	.L578:
2951:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 11486              		.loc 1 2951 0 discriminator 2
 11487 012e 7B6F     		ldr	r3, [r7, #116]
 11488 0130 0133     		adds	r3, r3, #1
 11489 0132 7B67     		str	r3, [r7, #116]
 11490              	.L577:
2951:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 11491              		.loc 1 2951 0 is_stmt 0 discriminator 1
 11492 0134 7B6F     		ldr	r3, [r7, #116]
 11493 0136 0F2B     		cmp	r3, #15
 11494 0138 DEDD     		ble	.L580
 11495              	.L579:
2950:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 11496              		.loc 1 2950 0 is_stmt 1 discriminator 2
 11497 013a BB6F     		ldr	r3, [r7, #120]
 11498 013c 0133     		adds	r3, r3, #1
 11499 013e BB67     		str	r3, [r7, #120]
 11500              	.L576:
2950:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 11501              		.loc 1 2950 0 is_stmt 0 discriminator 1
 11502 0140 BB6F     		ldr	r3, [r7, #120]
 11503 0142 032B     		cmp	r3, #3
 11504 0144 D5DD     		ble	.L581
2955:bluetooth_rxtx.c **** 				}
2956:bluetooth_rxtx.c **** 			}
2957:bluetooth_rxtx.c **** 		}
2958:bluetooth_rxtx.c **** 
2959:bluetooth_rxtx.c **** 		// see if any match
2960:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 11505              		.loc 1 2960 0 is_stmt 1
 11506 0146 0023     		movs	r3, #0
 11507 0148 BB67     		str	r3, [r7, #120]
ARM GAS  /tmp/ccQUMSla.s 			page 254


 11508 014a 0EE0     		b	.L582
 11509              	.L585:
2961:bluetooth_rxtx.c **** 			if (ok[j]) {
 11510              		.loc 1 2961 0
 11511 014c BB6F     		ldr	r3, [r7, #120]
 11512 014e 9B00     		lsls	r3, r3, #2
 11513 0150 07F18002 		add	r2, r7, #128
 11514 0154 1344     		add	r3, r3, r2
 11515 0156 53F8743C 		ldr	r3, [r3, #-116]
 11516 015a 002B     		cmp	r3, #0
 11517 015c 02D0     		beq	.L583
2962:bluetooth_rxtx.c **** 				matching = j;
 11518              		.loc 1 2962 0
 11519 015e BB6F     		ldr	r3, [r7, #120]
 11520 0160 FB66     		str	r3, [r7, #108]
2963:bluetooth_rxtx.c **** 				break;
 11521              		.loc 1 2963 0
 11522 0162 05E0     		b	.L584
 11523              	.L583:
2960:bluetooth_rxtx.c **** 			if (ok[j]) {
 11524              		.loc 1 2960 0 discriminator 2
 11525 0164 BB6F     		ldr	r3, [r7, #120]
 11526 0166 0133     		adds	r3, r3, #1
 11527 0168 BB67     		str	r3, [r7, #120]
 11528              	.L582:
2960:bluetooth_rxtx.c **** 			if (ok[j]) {
 11529              		.loc 1 2960 0 is_stmt 0 discriminator 1
 11530 016a BB6F     		ldr	r3, [r7, #120]
 11531 016c 032B     		cmp	r3, #3
 11532 016e EDDD     		ble	.L585
 11533              	.L584:
2964:bluetooth_rxtx.c **** 			}
2965:bluetooth_rxtx.c **** 		}
2966:bluetooth_rxtx.c **** 
2967:bluetooth_rxtx.c **** 		// skip if no match
2968:bluetooth_rxtx.c **** 		if (matching < 0)
 11534              		.loc 1 2968 0 is_stmt 1
 11535 0170 FB6E     		ldr	r3, [r7, #108]
 11536 0172 002B     		cmp	r3, #0
 11537 0174 7FDB     		blt	.L587
2969:bluetooth_rxtx.c **** 			continue;
2970:bluetooth_rxtx.c **** 
2971:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2972:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11538              		.loc 1 2972 0
 11539 0176 5A4B     		ldr	r3, .L601
 11540 0178 1B88     		ldrh	r3, [r3]	@ movhi
 11541 017a 9BB2     		uxth	r3, r3
 11542 017c DBB2     		uxtb	r3, r3
 11543 017e 623B     		subs	r3, r3, #98
 11544 0180 DBB2     		uxtb	r3, r3
 11545 0182 1846     		mov	r0, r3
 11546 0184 FFF7FEFF 		bl	btle_channel_index
 11547 0188 0346     		mov	r3, r0
 11548 018a 1A46     		mov	r2, r3
 11549 018c 554B     		ldr	r3, .L601+4
 11550 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
ARM GAS  /tmp/ccQUMSla.s 			page 255


 11551 0190 3B67     		str	r3, [r7, #112]
2973:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 11552              		.loc 1 2973 0
 11553 0192 0023     		movs	r3, #0
 11554 0194 BB67     		str	r3, [r7, #120]
 11555 0196 4CE0     		b	.L588
 11556              	.L594:
 11557              	.LBB27:
2974:bluetooth_rxtx.c **** 			u8 byte = 0;
 11558              		.loc 1 2974 0
 11559 0198 0023     		movs	r3, #0
 11560 019a 87F86B30 		strb	r3, [r7, #107]
2975:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 11561              		.loc 1 2975 0
 11562 019e 0023     		movs	r3, #0
 11563 01a0 7B67     		str	r3, [r7, #116]
 11564 01a2 39E0     		b	.L589
 11565              	.L593:
 11566              	.LBB28:
2976:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 11567              		.loc 1 2976 0
 11568 01a4 BB6F     		ldr	r3, [r7, #120]
 11569 01a6 DA00     		lsls	r2, r3, #3
 11570 01a8 7B6F     		ldr	r3, [r7, #116]
 11571 01aa 1A44     		add	r2, r2, r3
 11572 01ac FB6F     		ldr	r3, [r7, #124]
 11573 01ae 1344     		add	r3, r3, r2
 11574 01b0 203B     		subs	r3, r3, #32
 11575 01b2 3B66     		str	r3, [r7, #96]
2977:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 11576              		.loc 1 2977 0
 11577 01b4 3B6E     		ldr	r3, [r7, #96]
 11578 01b6 B3F5487F 		cmp	r3, #800
 11579 01ba 00DB     		blt	.L590
 11580 01bc 2FE0     		b	.L591
 11581              	.L590:
2978:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 11582              		.loc 1 2978 0
 11583 01be 3B6E     		ldr	r3, [r7, #96]
 11584 01c0 7A68     		ldr	r2, [r7, #4]
 11585 01c2 1344     		add	r3, r3, r2
 11586 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11587 01c6 7B66     		str	r3, [r7, #100]
2979:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 11588              		.loc 1 2979 0
 11589 01c8 BB6F     		ldr	r3, [r7, #120]
 11590 01ca 032B     		cmp	r3, #3
 11591 01cc 16DD     		ble	.L592
2980:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 11592              		.loc 1 2980 0
 11593 01ce 464A     		ldr	r2, .L601+8
 11594 01d0 3B6F     		ldr	r3, [r7, #112]
 11595 01d2 1344     		add	r3, r3, r2
 11596 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11597 01d6 1A46     		mov	r2, r3
 11598 01d8 7B6E     		ldr	r3, [r7, #100]
 11599 01da 5340     		eors	r3, r3, r2
ARM GAS  /tmp/ccQUMSla.s 			page 256


 11600 01dc 7B66     		str	r3, [r7, #100]
2981:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 11601              		.loc 1 2981 0
 11602 01de 3B6F     		ldr	r3, [r7, #112]
 11603 01e0 0133     		adds	r3, r3, #1
 11604 01e2 1946     		mov	r1, r3
 11605 01e4 414B     		ldr	r3, .L601+12
 11606 01e6 A1FB0323 		umull	r2, r3, r1, r3
 11607 01ea C81A     		subs	r0, r1, r3
 11608 01ec 4008     		lsrs	r0, r0, #1
 11609 01ee 0344     		add	r3, r3, r0
 11610 01f0 9A09     		lsrs	r2, r3, #6
 11611 01f2 1346     		mov	r3, r2
 11612 01f4 DB01     		lsls	r3, r3, #7
 11613 01f6 9B1A     		subs	r3, r3, r2
 11614 01f8 CA1A     		subs	r2, r1, r3
 11615 01fa 3A67     		str	r2, [r7, #112]
 11616              	.L592:
2982:bluetooth_rxtx.c **** 				}
2983:bluetooth_rxtx.c **** 				byte |= bit << k;
 11617              		.loc 1 2983 0 discriminator 2
 11618 01fc 7A6E     		ldr	r2, [r7, #100]
 11619 01fe 7B6F     		ldr	r3, [r7, #116]
 11620 0200 02FA03F3 		lsl	r3, r2, r3
 11621 0204 DAB2     		uxtb	r2, r3
 11622 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 11623 020a 1343     		orrs	r3, r3, r2
 11624 020c DBB2     		uxtb	r3, r3
 11625 020e 87F86B30 		strb	r3, [r7, #107]
 11626              	.LBE28:
2975:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 11627              		.loc 1 2975 0 discriminator 2
 11628 0212 7B6F     		ldr	r3, [r7, #116]
 11629 0214 0133     		adds	r3, r3, #1
 11630 0216 7B67     		str	r3, [r7, #116]
 11631              	.L589:
2975:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 11632              		.loc 1 2975 0 is_stmt 0 discriminator 1
 11633 0218 7B6F     		ldr	r3, [r7, #116]
 11634 021a 072B     		cmp	r3, #7
 11635 021c C2DD     		ble	.L593
 11636              	.L591:
2984:bluetooth_rxtx.c **** 			}
2985:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 11637              		.loc 1 2985 0 is_stmt 1 discriminator 2
 11638 021e 354B     		ldr	r3, .L601+20
 11639 0220 1A68     		ldr	r2, [r3]
 11640 0222 BB6F     		ldr	r3, [r7, #120]
 11641 0224 1344     		add	r3, r3, r2
 11642 0226 97F86B20 		ldrb	r2, [r7, #107]
 11643 022a 1A70     		strb	r2, [r3]
 11644              	.LBE27:
2973:bluetooth_rxtx.c **** 			u8 byte = 0;
 11645              		.loc 1 2973 0 discriminator 2
 11646 022c BB6F     		ldr	r3, [r7, #120]
 11647 022e 0133     		adds	r3, r3, #1
 11648 0230 BB67     		str	r3, [r7, #120]
ARM GAS  /tmp/ccQUMSla.s 			page 257


 11649              	.L588:
2973:bluetooth_rxtx.c **** 			u8 byte = 0;
 11650              		.loc 1 2973 0 is_stmt 0 discriminator 1
 11651 0232 BB6F     		ldr	r3, [r7, #120]
 11652 0234 092B     		cmp	r3, #9
 11653 0236 AFDD     		ble	.L594
2986:bluetooth_rxtx.c **** 		}
2987:bluetooth_rxtx.c **** 
2988:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 11654              		.loc 1 2988 0 is_stmt 1
 11655 0238 2E4B     		ldr	r3, .L601+20
 11656 023a 1B68     		ldr	r3, [r3]
 11657 023c 0333     		adds	r3, r3, #3
 11658 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11659 0240 1A06     		lsls	r2, r3, #24
2989:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11660              		.loc 1 2989 0
 11661 0242 2C4B     		ldr	r3, .L601+20
 11662 0244 1B68     		ldr	r3, [r3]
 11663 0246 0233     		adds	r3, r3, #2
 11664 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11665 024a 1B04     		lsls	r3, r3, #16
2988:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11666              		.loc 1 2988 0
 11667 024c 1A43     		orrs	r2, r2, r3
2990:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 11668              		.loc 1 2990 0
 11669 024e 294B     		ldr	r3, .L601+20
 11670 0250 1B68     		ldr	r3, [r3]
 11671 0252 0133     		adds	r3, r3, #1
 11672 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11673 0256 1B02     		lsls	r3, r3, #8
2989:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11674              		.loc 1 2989 0
 11675 0258 1343     		orrs	r3, r3, r2
2991:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 11676              		.loc 1 2991 0
 11677 025a 264A     		ldr	r2, .L601+20
 11678 025c 1268     		ldr	r2, [r2]
 11679 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2990:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 11680              		.loc 1 2990 0
 11681 0260 1343     		orrs	r3, r3, r2
2988:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11682              		.loc 1 2988 0
 11683 0262 FB65     		str	r3, [r7, #92]
2992:bluetooth_rxtx.c **** 		see_aa(aa);
 11684              		.loc 1 2992 0
 11685 0264 F86D     		ldr	r0, [r7, #92]
 11686 0266 FFF7FEFF 		bl	see_aa
2993:bluetooth_rxtx.c **** 
2994:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 11687              		.loc 1 2994 0
 11688 026a 224B     		ldr	r3, .L601+20
 11689 026c 1B68     		ldr	r3, [r3]
 11690 026e 0120     		movs	r0, #1
 11691 0270 1946     		mov	r1, r3
ARM GAS  /tmp/ccQUMSla.s 			page 258


 11692 0272 FFF7FEFF 		bl	enqueue
 11693              	.L587:
 11694              	.LBE26:
2946:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 11695              		.loc 1 2946 0 discriminator 2
 11696 0276 FB6F     		ldr	r3, [r7, #124]
 11697 0278 0133     		adds	r3, r3, #1
 11698 027a FB67     		str	r3, [r7, #124]
 11699              	.L575:
2946:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 11700              		.loc 1 2946 0 is_stmt 0 discriminator 1
 11701 027c FB6F     		ldr	r3, [r7, #124]
 11702 027e B3F53C7F 		cmp	r3, #752
 11703 0282 FFF62AAF 		blt	.L595
2995:bluetooth_rxtx.c **** 
2996:bluetooth_rxtx.c **** 	}
2997:bluetooth_rxtx.c **** 
2998:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2999:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 11704              		.loc 1 2999 0 is_stmt 1
 11705 0286 0023     		movs	r3, #0
 11706 0288 FB67     		str	r3, [r7, #124]
 11707 028a 20E0     		b	.L596
 11708              	.L599:
3000:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 11709              		.loc 1 3000 0
 11710 028c 1A4A     		ldr	r2, .L601+24
 11711 028e FB6F     		ldr	r3, [r7, #124]
 11712 0290 DB00     		lsls	r3, r3, #3
 11713 0292 1344     		add	r3, r3, r2
 11714 0294 5B68     		ldr	r3, [r3, #4]
 11715 0296 032B     		cmp	r3, #3
 11716 0298 16DD     		ble	.L597
3001:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 11717              		.loc 1 3001 0
 11718 029a 174A     		ldr	r2, .L601+24
 11719 029c FB6F     		ldr	r3, [r7, #124]
 11720 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 11721 02a2 1846     		mov	r0, r3
 11722 02a4 FFF7FEFF 		bl	le_set_access_address
3002:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 11723              		.loc 1 3002 0
 11724 02a8 144B     		ldr	r3, .L601+28
 11725 02aa 154A     		ldr	r2, .L601+32
 11726 02ac 1A60     		str	r2, [r3]
3003:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 11727              		.loc 1 3003 0
 11728 02ae 154B     		ldr	r3, .L601+36
 11729 02b0 154A     		ldr	r2, .L601+40
 11730 02b2 1A60     		str	r2, [r3]
3004:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 11731              		.loc 1 3004 0
 11732 02b4 154B     		ldr	r3, .L601+44
 11733 02b6 0022     		movs	r2, #0
 11734 02b8 1A61     		str	r2, [r3, #16]
3005:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 11735              		.loc 1 3005 0
ARM GAS  /tmp/ccQUMSla.s 			page 259


 11736 02ba 0020     		movs	r0, #0
 11737 02bc 1349     		ldr	r1, .L601+44
 11738 02be 0422     		movs	r2, #4
 11739 02c0 FFF7FEFF 		bl	le_promisc_state
3006:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
3007:bluetooth_rxtx.c **** 			return 0;
 11740              		.loc 1 3007 0
 11741 02c4 0023     		movs	r3, #0
 11742 02c6 06E0     		b	.L600
 11743              	.L597:
2999:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 11744              		.loc 1 2999 0 discriminator 2
 11745 02c8 FB6F     		ldr	r3, [r7, #124]
 11746 02ca 0133     		adds	r3, r3, #1
 11747 02cc FB67     		str	r3, [r7, #124]
 11748              	.L596:
2999:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 11749              		.loc 1 2999 0 is_stmt 0 discriminator 1
 11750 02ce FB6F     		ldr	r3, [r7, #124]
 11751 02d0 1F2B     		cmp	r3, #31
 11752 02d2 DBDD     		ble	.L599
3008:bluetooth_rxtx.c **** 		}
3009:bluetooth_rxtx.c **** 	}
3010:bluetooth_rxtx.c **** 
3011:bluetooth_rxtx.c **** 	return 1;
 11753              		.loc 1 3011 0 is_stmt 1
 11754 02d4 0123     		movs	r3, #1
 11755              	.L600:
3012:bluetooth_rxtx.c **** }
 11756              		.loc 1 3012 0 discriminator 1
 11757 02d6 1846     		mov	r0, r3
 11758 02d8 8437     		adds	r7, r7, #132
 11759              		.cfi_def_cfa_offset 12
 11760 02da BD46     		mov	sp, r7
 11761              		.cfi_def_cfa_register 13
 11762              		@ sp needed
 11763 02dc 90BD     		pop	{r4, r7, pc}
 11764              	.L602:
 11765 02de 00BF     		.align	2
 11766              	.L601:
 11767 02e0 00000000 		.word	channel
 11768 02e4 C0000000 		.word	whitening_index
 11769 02e8 40000000 		.word	whitening
 11770 02ec 11080402 		.word	33818641
 11771 02f0 E0080000 		.word	.LC0
 11772 02f4 00000000 		.word	idle_rxbuf
 11773 02f8 00000000 		.word	le_promisc
 11774 02fc 00000000 		.word	data_cb
 11775 0300 00000000 		.word	cb_follow_le
 11776 0304 00000000 		.word	packet_cb
 11777 0308 00000000 		.word	promisc_follow_cb
 11778 030c 00000000 		.word	le
 11779              		.cfi_endproc
 11780              	.LFE49:
 11782              		.section	.text.bt_promisc_le,"ax",%progbits
 11783              		.align	2
 11784              		.global	bt_promisc_le
ARM GAS  /tmp/ccQUMSla.s 			page 260


 11785              		.thumb
 11786              		.thumb_func
 11788              	bt_promisc_le:
 11789              	.LFB50:
3013:bluetooth_rxtx.c **** 
3014:bluetooth_rxtx.c **** void bt_promisc_le() {
 11790              		.loc 1 3014 0
 11791              		.cfi_startproc
 11792              		@ args = 0, pretend = 0, frame = 0
 11793              		@ frame_needed = 1, uses_anonymous_args = 0
 11794 0000 80B5     		push	{r7, lr}
 11795              		.cfi_def_cfa_offset 8
 11796              		.cfi_offset 7, -8
 11797              		.cfi_offset 14, -4
 11798 0002 00AF     		add	r7, sp, #0
 11799              		.cfi_def_cfa_register 7
3015:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 11800              		.loc 1 3015 0
 11801 0004 2CE0     		b	.L604
 11802              	.L609:
3016:bluetooth_rxtx.c **** 		reset_le_promisc();
 11803              		.loc 1 3016 0
 11804 0006 FFF7FEFF 		bl	reset_le_promisc
3017:bluetooth_rxtx.c **** 
3018:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
3019:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 11805              		.loc 1 3019 0
 11806 000a 184B     		ldr	r3, .L610
 11807 000c 1B88     		ldrh	r3, [r3]	@ movhi
 11808 000e 9BB2     		uxth	r3, r3
 11809 0010 03F00103 		and	r3, r3, #1
 11810 0014 002B     		cmp	r3, #0
 11811 0016 03D0     		beq	.L605
3020:bluetooth_rxtx.c **** 			channel = 2440;
 11812              		.loc 1 3020 0
 11813 0018 144B     		ldr	r3, .L610
 11814 001a 40F68812 		movw	r2, #2440
 11815 001e 1A80     		strh	r2, [r3]	@ movhi
 11816              	.L605:
3021:bluetooth_rxtx.c **** 
3022:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
3023:bluetooth_rxtx.c **** 		if (!le.target_set) {
 11817              		.loc 1 3023 0
 11818 0020 134B     		ldr	r3, .L610+4
 11819 0022 DB6B     		ldr	r3, [r3, #60]
 11820 0024 002B     		cmp	r3, #0
 11821 0026 07D1     		bne	.L606
3024:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
3025:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 11822              		.loc 1 3025 0
 11823 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
3026:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 11824              		.loc 1 3026 0
 11825 002c 114B     		ldr	r3, .L610+8
 11826 002e 124A     		ldr	r2, .L610+12
 11827 0030 1A60     		str	r2, [r3]
3027:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
ARM GAS  /tmp/ccQUMSla.s 			page 261


 11828              		.loc 1 3027 0
 11829 0032 0A20     		movs	r0, #10
 11830 0034 FFF7FEFF 		bl	bt_generic_le
 11831              	.L606:
3028:bluetooth_rxtx.c **** 		}
3029:bluetooth_rxtx.c **** 
3030:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
3031:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 11832              		.loc 1 3031 0
 11833 0038 104B     		ldr	r3, .L610+16
 11834 003a 1B78     		ldrb	r3, [r3]
 11835 003c DBB2     		uxtb	r3, r3
 11836 003e 0A2B     		cmp	r3, #10
 11837 0040 00D0     		beq	.L607
3032:bluetooth_rxtx.c **** 			break;
 11838              		.loc 1 3032 0
 11839 0042 12E0     		b	.L603
 11840              	.L607:
3033:bluetooth_rxtx.c **** 
3034:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 11841              		.loc 1 3034 0
 11842 0044 0020     		movs	r0, #0
 11843 0046 0A49     		ldr	r1, .L610+4
 11844 0048 0422     		movs	r2, #4
 11845 004a FFF7FEFF 		bl	le_promisc_state
3035:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 11846              		.loc 1 3035 0
 11847 004e 0C4B     		ldr	r3, .L610+20
 11848 0050 0C4A     		ldr	r2, .L610+24
 11849 0052 1A60     		str	r2, [r3]
3036:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 11850              		.loc 1 3036 0
 11851 0054 064B     		ldr	r3, .L610+4
 11852 0056 0022     		movs	r2, #0
 11853 0058 1A61     		str	r2, [r3, #16]
3037:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 11854              		.loc 1 3037 0
 11855 005a 0A20     		movs	r0, #10
 11856 005c FFF7FEFF 		bl	bt_le_sync
 11857              	.L604:
3015:bluetooth_rxtx.c **** 		reset_le_promisc();
 11858              		.loc 1 3015 0
 11859 0060 064B     		ldr	r3, .L610+16
 11860 0062 1B78     		ldrb	r3, [r3]
 11861 0064 DBB2     		uxtb	r3, r3
 11862 0066 0A2B     		cmp	r3, #10
 11863 0068 CDD0     		beq	.L609
 11864              	.L603:
3038:bluetooth_rxtx.c **** 	}
3039:bluetooth_rxtx.c **** }
 11865              		.loc 1 3039 0
 11866 006a 80BD     		pop	{r7, pc}
 11867              	.L611:
 11868              		.align	2
 11869              	.L610:
 11870 006c 00000000 		.word	channel
 11871 0070 00000000 		.word	le
ARM GAS  /tmp/ccQUMSla.s 			page 262


 11872 0074 00000000 		.word	data_cb
 11873 0078 00000000 		.word	cb_le_promisc
 11874 007c 00000000 		.word	requested_mode
 11875 0080 00000000 		.word	packet_cb
 11876 0084 00000000 		.word	promisc_follow_cb
 11877              		.cfi_endproc
 11878              	.LFE50:
 11880              		.section	.rodata
 11881              		.align	2
 11882              	.LC1:
 11883 08f0 00       		.byte	0
 11884 08f1 09       		.byte	9
 11885 08f2 FF       		.byte	-1
 11886 08f3 FF       		.byte	-1
 11887 08f4 FF       		.byte	-1
 11888 08f5 FF       		.byte	-1
 11889 08f6 FF       		.byte	-1
 11890 08f7 FF       		.byte	-1
 11891 08f8 02       		.byte	2
 11892 08f9 01       		.byte	1
 11893 08fa 05       		.byte	5
 11894 08fb FF       		.byte	-1
 11895 08fc FF       		.byte	-1
 11896 08fd FF       		.byte	-1
 11897              		.section	.text.bt_slave_le,"ax",%progbits
 11898              		.align	2
 11899              		.global	bt_slave_le
 11900              		.thumb
 11901              		.thumb_func
 11903              	bt_slave_le:
 11904              	.LFB51:
3040:bluetooth_rxtx.c **** 
3041:bluetooth_rxtx.c **** void bt_slave_le() {
 11905              		.loc 1 3041 0
 11906              		.cfi_startproc
 11907              		@ args = 0, pretend = 0, frame = 32
 11908              		@ frame_needed = 1, uses_anonymous_args = 0
 11909 0000 90B5     		push	{r4, r7, lr}
 11910              		.cfi_def_cfa_offset 12
 11911              		.cfi_offset 4, -12
 11912              		.cfi_offset 7, -8
 11913              		.cfi_offset 14, -4
 11914 0002 89B0     		sub	sp, sp, #36
 11915              		.cfi_def_cfa_offset 48
 11916 0004 00AF     		add	r7, sp, #0
 11917              		.cfi_def_cfa_register 7
3042:bluetooth_rxtx.c **** 	u32 calc_crc;
3043:bluetooth_rxtx.c **** 	int i;
3044:bluetooth_rxtx.c **** 
3045:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 11918              		.loc 1 3045 0
 11919 0006 354A     		ldr	r2, .L617
 11920 0008 3B1D     		adds	r3, r7, #4
 11921 000a 1446     		mov	r4, r2
 11922 000c 2068     		ldr	r0, [r4]	@ unaligned
 11923 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 11924 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
ARM GAS  /tmp/ccQUMSla.s 			page 263


 11925 0012 07C3     		stmia	r3!, {r0, r1, r2}
 11926 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 11927 0016 1A80     		strh	r2, [r3]	@ unaligned
3046:bluetooth_rxtx.c **** 		// LL header
3047:bluetooth_rxtx.c **** 		0x00, 0x09,
3048:bluetooth_rxtx.c **** 
3049:bluetooth_rxtx.c **** 		// advertising address
3050:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
3051:bluetooth_rxtx.c **** 
3052:bluetooth_rxtx.c **** 		// advertising data
3053:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
3054:bluetooth_rxtx.c **** 
3055:bluetooth_rxtx.c **** 		// CRC (calc)
3056:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
3057:bluetooth_rxtx.c **** 	};
3058:bluetooth_rxtx.c **** 
3059:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 11928              		.loc 1 3059 0
 11929 0018 0B23     		movs	r3, #11
 11930 001a FB76     		strb	r3, [r7, #27]
3060:bluetooth_rxtx.c **** 
3061:bluetooth_rxtx.c **** 	// copy the user-specified mac address
3062:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 11931              		.loc 1 3062 0
 11932 001c 0023     		movs	r3, #0
 11933 001e FB61     		str	r3, [r7, #28]
 11934 0020 0EE0     		b	.L613
 11935              	.L614:
3063:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 11936              		.loc 1 3063 0 discriminator 3
 11937 0022 FB69     		ldr	r3, [r7, #28]
 11938 0024 0233     		adds	r3, r3, #2
 11939 0026 FA69     		ldr	r2, [r7, #28]
 11940 0028 C2F10502 		rsb	r2, r2, #5
 11941 002c 2C49     		ldr	r1, .L617+4
 11942 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 11943 0030 07F12001 		add	r1, r7, #32
 11944 0034 0B44     		add	r3, r3, r1
 11945 0036 03F81C2C 		strb	r2, [r3, #-28]
3062:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 11946              		.loc 1 3062 0 discriminator 3
 11947 003a FB69     		ldr	r3, [r7, #28]
 11948 003c 0133     		adds	r3, r3, #1
 11949 003e FB61     		str	r3, [r7, #28]
 11950              	.L613:
3062:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 11951              		.loc 1 3062 0 is_stmt 0 discriminator 1
 11952 0040 FB69     		ldr	r3, [r7, #28]
 11953 0042 052B     		cmp	r3, #5
 11954 0044 EDDD     		ble	.L614
3064:bluetooth_rxtx.c **** 
3065:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 11955              		.loc 1 3065 0 is_stmt 1
 11956 0046 274B     		ldr	r3, .L617+8
 11957 0048 D968     		ldr	r1, [r3, #12]
 11958 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 11959 004c 3A1D     		adds	r2, r7, #4
ARM GAS  /tmp/ccQUMSla.s 			page 264


 11960 004e 0846     		mov	r0, r1
 11961 0050 1146     		mov	r1, r2
 11962 0052 1A46     		mov	r2, r3
 11963 0054 FFF7FEFF 		bl	btle_calc_crc
 11964 0058 7861     		str	r0, [r7, #20]
3066:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 11965              		.loc 1 3066 0
 11966 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 11967 005c 7A69     		ldr	r2, [r7, #20]
 11968 005e D2B2     		uxtb	r2, r2
 11969 0060 07F12001 		add	r1, r7, #32
 11970 0064 0B44     		add	r3, r3, r1
 11971 0066 03F81C2C 		strb	r2, [r3, #-28]
3067:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 11972              		.loc 1 3067 0
 11973 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 11974 006c 0133     		adds	r3, r3, #1
 11975 006e 7A69     		ldr	r2, [r7, #20]
 11976 0070 120A     		lsrs	r2, r2, #8
 11977 0072 D2B2     		uxtb	r2, r2
 11978 0074 07F12001 		add	r1, r7, #32
 11979 0078 0B44     		add	r3, r3, r1
 11980 007a 03F81C2C 		strb	r2, [r3, #-28]
3068:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 11981              		.loc 1 3068 0
 11982 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 11983 0080 0233     		adds	r3, r3, #2
 11984 0082 7A69     		ldr	r2, [r7, #20]
 11985 0084 120C     		lsrs	r2, r2, #16
 11986 0086 D2B2     		uxtb	r2, r2
 11987 0088 07F12001 		add	r1, r7, #32
 11988 008c 0B44     		add	r3, r3, r1
 11989 008e 03F81C2C 		strb	r2, [r3, #-28]
3069:bluetooth_rxtx.c **** 
3070:bluetooth_rxtx.c **** 	// spam advertising packets
3071:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 11990              		.loc 1 3071 0
 11991 0092 1BE0     		b	.L615
 11992              	.L616:
3072:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 11993              		.loc 1 3072 0
 11994 0094 144B     		ldr	r3, .L617+12
 11995 0096 4FF08072 		mov	r2, #16777216
 11996 009a 1A60     		str	r2, [r3]
3073:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 11997              		.loc 1 3073 0
 11998 009c 124B     		ldr	r3, .L617+12
 11999 009e 4FF08062 		mov	r2, #67108864
 12000 00a2 1A60     		str	r2, [r3]
3074:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 12001              		.loc 1 3074 0
 12002 00a4 FB7E     		ldrb	r3, [r7, #27]
 12003 00a6 0333     		adds	r3, r3, #3
 12004 00a8 DAB2     		uxtb	r2, r3
 12005 00aa 3B1D     		adds	r3, r7, #4
 12006 00ac 0F48     		ldr	r0, .L617+16
 12007 00ae 1146     		mov	r1, r2
ARM GAS  /tmp/ccQUMSla.s 			page 265


 12008 00b0 1A46     		mov	r2, r3
 12009 00b2 FFF7FEFF 		bl	le_transmit
3075:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 12010              		.loc 1 3075 0
 12011 00b6 0E4B     		ldr	r3, .L617+20
 12012 00b8 4FF08072 		mov	r2, #16777216
 12013 00bc 1A60     		str	r2, [r3]
3076:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 12014              		.loc 1 3076 0
 12015 00be 0C4B     		ldr	r3, .L617+20
 12016 00c0 4FF08062 		mov	r2, #67108864
 12017 00c4 1A60     		str	r2, [r3]
3077:bluetooth_rxtx.c **** 		msleep(100);
 12018              		.loc 1 3077 0
 12019 00c6 6420     		movs	r0, #100
 12020 00c8 FFF7FEFF 		bl	msleep
 12021              	.L615:
3071:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 12022              		.loc 1 3071 0
 12023 00cc 094B     		ldr	r3, .L617+24
 12024 00ce 1B78     		ldrb	r3, [r3]
 12025 00d0 DBB2     		uxtb	r3, r3
 12026 00d2 0C2B     		cmp	r3, #12
 12027 00d4 DED0     		beq	.L616
3078:bluetooth_rxtx.c **** 	}
3079:bluetooth_rxtx.c **** }
 12028              		.loc 1 3079 0
 12029 00d6 2437     		adds	r7, r7, #36
 12030              		.cfi_def_cfa_offset 12
 12031 00d8 BD46     		mov	sp, r7
 12032              		.cfi_def_cfa_register 13
 12033              		@ sp needed
 12034 00da 90BD     		pop	{r4, r7, pc}
 12035              	.L618:
 12036              		.align	2
 12037              	.L617:
 12038 00dc F0080000 		.word	.LC1
 12039 00e0 00000000 		.word	slave_mac_address
 12040 00e4 00000000 		.word	le
 12041 00e8 80E100E0 		.word	-536813184
 12042 00ec D6BE898E 		.word	-1903575338
 12043 00f0 00E100E0 		.word	-536813312
 12044 00f4 00000000 		.word	requested_mode
 12045              		.cfi_endproc
 12046              	.LFE51:
 12048              		.section	.text.specan,"ax",%progbits
 12049              		.align	2
 12050              		.global	specan
 12051              		.thumb
 12052              		.thumb_func
 12054              	specan:
 12055              	.LFB52:
3080:bluetooth_rxtx.c **** 
3081:bluetooth_rxtx.c **** /* spectrum analysis */
3082:bluetooth_rxtx.c **** void specan()
3083:bluetooth_rxtx.c **** {
 12056              		.loc 1 3083 0
ARM GAS  /tmp/ccQUMSla.s 			page 266


 12057              		.cfi_startproc
 12058              		@ args = 0, pretend = 0, frame = 64
 12059              		@ frame_needed = 1, uses_anonymous_args = 0
 12060 0000 90B5     		push	{r4, r7, lr}
 12061              		.cfi_def_cfa_offset 12
 12062              		.cfi_offset 4, -12
 12063              		.cfi_offset 7, -8
 12064              		.cfi_offset 14, -4
 12065 0002 91B0     		sub	sp, sp, #68
 12066              		.cfi_def_cfa_offset 80
 12067 0004 00AF     		add	r7, sp, #0
 12068              		.cfi_def_cfa_register 7
3084:bluetooth_rxtx.c **** 	u8 epstat;
3085:bluetooth_rxtx.c **** 	u16 f;
3086:bluetooth_rxtx.c **** 	u8 i = 0;
 12069              		.loc 1 3086 0
 12070 0006 0023     		movs	r3, #0
 12071 0008 87F83D30 		strb	r3, [r7, #61]
3087:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
3088:bluetooth_rxtx.c **** 
3089:bluetooth_rxtx.c **** 	RXLED_SET;
 12072              		.loc 1 3089 0
 12073 000c 5A4B     		ldr	r3, .L630
 12074 000e 1022     		movs	r2, #16
 12075 0010 1A60     		str	r2, [r3]
3090:bluetooth_rxtx.c **** 
3091:bluetooth_rxtx.c **** 	queue_init();
 12076              		.loc 1 3091 0
 12077 0012 FFF7FEFF 		bl	queue_init
3092:bluetooth_rxtx.c **** 
3093:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
3094:bluetooth_rxtx.c **** 	PAEN_SET;
 12078              		.loc 1 3094 0
 12079 0016 594B     		ldr	r3, .L630+4
 12080 0018 8022     		movs	r2, #128
 12081 001a 1A60     		str	r2, [r3]
3095:bluetooth_rxtx.c **** 	//HGM_SET;
3096:bluetooth_rxtx.c **** #endif
3097:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 12082              		.loc 1 3097 0
 12083 001c 1220     		movs	r0, #18
 12084 001e 42F62231 		movw	r1, #11042
 12085 0022 FFF7FEFF 		bl	cc2400_set
3098:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 12086              		.loc 1 3098 0
 12087 0026 1420     		movs	r0, #20
 12088 0028 41F24B31 		movw	r1, #4939
 12089 002c FFF7FEFF 		bl	cc2400_set
3099:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 12090              		.loc 1 3099 0
 12091 0030 2020     		movs	r0, #32
 12092 0032 40F20111 		movw	r1, #257
 12093 0036 FFF7FEFF 		bl	cc2400_set
3100:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 12094              		.loc 1 3100 0
 12095 003a 0320     		movs	r0, #3
 12096 003c 2921     		movs	r1, #41
ARM GAS  /tmp/ccQUMSla.s 			page 267


 12097 003e FFF7FEFF 		bl	cc2400_set
3101:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
3102:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 12098              		.loc 1 3102 0
 12099 0042 00BF     		nop
 12100              	.L620:
 12101              		.loc 1 3102 0 is_stmt 0 discriminator 1
 12102 0044 FFF7FEFF 		bl	cc2400_status
 12103 0048 0346     		mov	r3, r0
 12104 004a 03F04003 		and	r3, r3, #64
 12105 004e 002B     		cmp	r3, #0
 12106 0050 F8D0     		beq	.L620
3103:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 12107              		.loc 1 3103 0 is_stmt 1
 12108 0052 00BF     		nop
 12109              	.L621:
 12110              		.loc 1 3103 0 is_stmt 0 discriminator 1
 12111 0054 FFF7FEFF 		bl	cc2400_status
 12112 0058 0346     		mov	r3, r0
 12113 005a 03F00403 		and	r3, r3, #4
 12114 005e 002B     		cmp	r3, #0
 12115 0060 F8D1     		bne	.L621
3104:bluetooth_rxtx.c **** 
3105:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 12116              		.loc 1 3105 0 is_stmt 1
 12117 0062 7AE0     		b	.L622
 12118              	.L629:
3106:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 12119              		.loc 1 3106 0
 12120 0064 464B     		ldr	r3, .L630+8
 12121 0066 1B88     		ldrh	r3, [r3]	@ movhi
 12122 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 12123 006a 6FE0     		b	.L623
 12124              	.L628:
 12125              	.LBB29:
3107:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 12126              		.loc 1 3107 0
 12127 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 12128 006e 013B     		subs	r3, r3, #1
 12129 0070 9BB2     		uxth	r3, r3
 12130 0072 0220     		movs	r0, #2
 12131 0074 1946     		mov	r1, r3
 12132 0076 FFF7FEFF 		bl	cc2400_set
3108:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 12133              		.loc 1 3108 0
 12134 007a 6120     		movs	r0, #97
 12135 007c FFF7FEFF 		bl	cc2400_strobe
3109:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 12136              		.loc 1 3109 0
 12137 0080 00BF     		nop
 12138              	.L624:
 12139              		.loc 1 3109 0 is_stmt 0 discriminator 1
 12140 0082 FFF7FEFF 		bl	cc2400_status
 12141 0086 0346     		mov	r3, r0
 12142 0088 03F00403 		and	r3, r3, #4
 12143 008c 002B     		cmp	r3, #0
 12144 008e F8D0     		beq	.L624
ARM GAS  /tmp/ccQUMSla.s 			page 268


3110:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 12145              		.loc 1 3110 0 is_stmt 1
 12146 0090 6220     		movs	r0, #98
 12147 0092 FFF7FEFF 		bl	cc2400_strobe
3111:bluetooth_rxtx.c **** 
3112:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
3113:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 12148              		.loc 1 3113 0
 12149 0096 4FF4FA73 		mov	r3, #500
 12150 009a 7B60     		str	r3, [r7, #4]
 12151 009c 00BF     		nop
 12152              	.L625:
 12153              		.loc 1 3113 0 is_stmt 0 discriminator 2
 12154 009e 7B68     		ldr	r3, [r7, #4]
 12155 00a0 013B     		subs	r3, r3, #1
 12156 00a2 7B60     		str	r3, [r7, #4]
 12157 00a4 002B     		cmp	r3, #0
 12158 00a6 FAD1     		bne	.L625
3114:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 12159              		.loc 1 3114 0 is_stmt 1
 12160 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 12161 00ac 1346     		mov	r3, r2
 12162 00ae 5B00     		lsls	r3, r3, #1
 12163 00b0 1344     		add	r3, r3, r2
 12164 00b2 FA8F     		ldrh	r2, [r7, #62]
 12165 00b4 120A     		lsrs	r2, r2, #8
 12166 00b6 92B2     		uxth	r2, r2
 12167 00b8 D2B2     		uxtb	r2, r2
 12168 00ba 07F14001 		add	r1, r7, #64
 12169 00be 0B44     		add	r3, r3, r1
 12170 00c0 03F8382C 		strb	r2, [r3, #-56]
3115:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 12171              		.loc 1 3115 0
 12172 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 12173 00c8 1346     		mov	r3, r2
 12174 00ca 5B00     		lsls	r3, r3, #1
 12175 00cc 1344     		add	r3, r3, r2
 12176 00ce 0133     		adds	r3, r3, #1
 12177 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 12178 00d2 D2B2     		uxtb	r2, r2
 12179 00d4 07F14001 		add	r1, r7, #64
 12180 00d8 0B44     		add	r3, r3, r1
 12181 00da 03F8382C 		strb	r2, [r3, #-56]
3116:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 12182              		.loc 1 3116 0
 12183 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 12184 00e2 1346     		mov	r3, r2
 12185 00e4 5B00     		lsls	r3, r3, #1
 12186 00e6 1344     		add	r3, r3, r2
 12187 00e8 9C1C     		adds	r4, r3, #2
 12188 00ea 0620     		movs	r0, #6
 12189 00ec FFF7FEFF 		bl	cc2400_get
 12190 00f0 0346     		mov	r3, r0
 12191 00f2 1B0A     		lsrs	r3, r3, #8
 12192 00f4 9BB2     		uxth	r3, r3
 12193 00f6 DAB2     		uxtb	r2, r3
 12194 00f8 07F14003 		add	r3, r7, #64
ARM GAS  /tmp/ccQUMSla.s 			page 269


 12195 00fc 2344     		add	r3, r3, r4
 12196 00fe 03F8382C 		strb	r2, [r3, #-56]
3117:bluetooth_rxtx.c **** 			i++;
 12197              		.loc 1 3117 0
 12198 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 12199 0106 0133     		adds	r3, r3, #1
 12200 0108 87F83D30 		strb	r3, [r7, #61]
3118:bluetooth_rxtx.c **** 			if (i == 16) {
 12201              		.loc 1 3118 0
 12202 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 12203 0110 102B     		cmp	r3, #16
 12204 0112 0DD1     		bne	.L626
3119:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 12205              		.loc 1 3119 0
 12206 0114 07F10803 		add	r3, r7, #8
 12207 0118 0420     		movs	r0, #4
 12208 011a 1946     		mov	r1, r3
 12209 011c FFF7FEFF 		bl	enqueue
3120:bluetooth_rxtx.c **** 				i = 0;
 12210              		.loc 1 3120 0
 12211 0120 0023     		movs	r3, #0
 12212 0122 87F83D30 		strb	r3, [r7, #61]
3121:bluetooth_rxtx.c **** 
3122:bluetooth_rxtx.c **** 				handle_usb(clkn);
 12213              		.loc 1 3122 0
 12214 0126 174B     		ldr	r3, .L630+12
 12215 0128 1B68     		ldr	r3, [r3]
 12216 012a 1846     		mov	r0, r3
 12217 012c FFF7FEFF 		bl	handle_usb
 12218              	.L626:
3123:bluetooth_rxtx.c **** 			}
3124:bluetooth_rxtx.c **** 
3125:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 12219              		.loc 1 3125 0
 12220 0130 6420     		movs	r0, #100
 12221 0132 FFF7FEFF 		bl	cc2400_strobe
3126:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 12222              		.loc 1 3126 0
 12223 0136 00BF     		nop
 12224              	.L627:
 12225              		.loc 1 3126 0 is_stmt 0 discriminator 1
 12226 0138 FFF7FEFF 		bl	cc2400_status
 12227 013c 0346     		mov	r3, r0
 12228 013e 03F00403 		and	r3, r3, #4
 12229 0142 002B     		cmp	r3, #0
 12230 0144 F8D1     		bne	.L627
 12231              	.LBE29:
3106:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 12232              		.loc 1 3106 0 is_stmt 1 discriminator 2
 12233 0146 FB8F     		ldrh	r3, [r7, #62]
 12234 0148 0133     		adds	r3, r3, #1
 12235 014a FB87     		strh	r3, [r7, #62]	@ movhi
 12236              	.L623:
3106:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 12237              		.loc 1 3106 0 is_stmt 0 discriminator 1
 12238 014c FA8F     		ldrh	r2, [r7, #62]
 12239 014e 0E4B     		ldr	r3, .L630+16
ARM GAS  /tmp/ccQUMSla.s 			page 270


 12240 0150 1B88     		ldrh	r3, [r3]	@ movhi
 12241 0152 9BB2     		uxth	r3, r3
 12242 0154 0133     		adds	r3, r3, #1
 12243 0156 9A42     		cmp	r2, r3
 12244 0158 88DB     		blt	.L628
 12245              	.L622:
3105:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 12246              		.loc 1 3105 0 is_stmt 1
 12247 015a 0C4B     		ldr	r3, .L630+20
 12248 015c 1B78     		ldrb	r3, [r3]
 12249 015e DBB2     		uxtb	r3, r3
 12250 0160 042B     		cmp	r3, #4
 12251 0162 3FF47FAF 		beq	.L629
3127:bluetooth_rxtx.c **** 		}
3128:bluetooth_rxtx.c **** 	}
3129:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 12252              		.loc 1 3129 0
 12253 0166 0A4B     		ldr	r3, .L630+24
 12254 0168 0022     		movs	r2, #0
 12255 016a 1A70     		strb	r2, [r3]
3130:bluetooth_rxtx.c **** 	RXLED_CLR;
 12256              		.loc 1 3130 0
 12257 016c 094B     		ldr	r3, .L630+28
 12258 016e 1022     		movs	r2, #16
 12259 0170 1A60     		str	r2, [r3]
3131:bluetooth_rxtx.c **** }
 12260              		.loc 1 3131 0
 12261 0172 4437     		adds	r7, r7, #68
 12262              		.cfi_def_cfa_offset 12
 12263 0174 BD46     		mov	sp, r7
 12264              		.cfi_def_cfa_register 13
 12265              		@ sp needed
 12266 0176 90BD     		pop	{r4, r7, pc}
 12267              	.L631:
 12268              		.align	2
 12269              	.L630:
 12270 0178 38C00920 		.word	537509944
 12271 017c 58C00920 		.word	537509976
 12272 0180 00000000 		.word	low_freq
 12273 0184 00000000 		.word	clkn
 12274 0188 00000000 		.word	high_freq
 12275 018c 00000000 		.word	requested_mode
 12276 0190 00000000 		.word	mode
 12277 0194 3CC00920 		.word	537509948
 12278              		.cfi_endproc
 12279              	.LFE52:
 12281              		.section	.rodata
 12282 08fe 0000     		.align	2
 12283              	.LC2:
 12284 0900 6C09     		.short	2412
 12285 0902 8509     		.short	2437
 12286 0904 9E09     		.short	2462
 12287              		.section	.text.led_specan,"ax",%progbits
 12288              		.align	2
 12289              		.global	led_specan
 12290              		.thumb
 12291              		.thumb_func
ARM GAS  /tmp/ccQUMSla.s 			page 271


 12293              	led_specan:
 12294              	.LFB53:
3132:bluetooth_rxtx.c **** 
3133:bluetooth_rxtx.c **** /* LED based spectrum analysis */
3134:bluetooth_rxtx.c **** void led_specan()
3135:bluetooth_rxtx.c **** {
 12295              		.loc 1 3135 0
 12296              		.cfi_startproc
 12297              		@ args = 0, pretend = 0, frame = 16
 12298              		@ frame_needed = 1, uses_anonymous_args = 0
 12299 0000 80B5     		push	{r7, lr}
 12300              		.cfi_def_cfa_offset 8
 12301              		.cfi_offset 7, -8
 12302              		.cfi_offset 14, -4
 12303 0002 84B0     		sub	sp, sp, #16
 12304              		.cfi_def_cfa_offset 24
 12305 0004 00AF     		add	r7, sp, #0
 12306              		.cfi_def_cfa_register 7
3136:bluetooth_rxtx.c **** 	int8_t lvl;
3137:bluetooth_rxtx.c **** 	u8 i = 0;
 12307              		.loc 1 3137 0
 12308 0006 0023     		movs	r3, #0
 12309 0008 FB73     		strb	r3, [r7, #15]
3138:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 12310              		.loc 1 3138 0
 12311 000a 5B4A     		ldr	r2, .L649
 12312 000c 07F10803 		add	r3, r7, #8
 12313 0010 1068     		ldr	r0, [r2]	@ unaligned
 12314 0012 1860     		str	r0, [r3]	@ unaligned
 12315 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 12316 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
3139:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
3140:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
3141:bluetooth_rxtx.c **** 
3142:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
3143:bluetooth_rxtx.c **** 	PAEN_SET;
 12317              		.loc 1 3143 0
 12318 0018 584B     		ldr	r3, .L649+4
 12319 001a 8022     		movs	r2, #128
 12320 001c 1A60     		str	r2, [r3]
3144:bluetooth_rxtx.c **** 	//HGM_SET;
3145:bluetooth_rxtx.c **** #endif
3146:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 12321              		.loc 1 3146 0
 12322 001e 1220     		movs	r0, #18
 12323 0020 42F62231 		movw	r1, #11042
 12324 0024 FFF7FEFF 		bl	cc2400_set
3147:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 12325              		.loc 1 3147 0
 12326 0028 1420     		movs	r0, #20
 12327 002a 41F24B31 		movw	r1, #4939
 12328 002e FFF7FEFF 		bl	cc2400_set
3148:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 12329              		.loc 1 3148 0
 12330 0032 2020     		movs	r0, #32
 12331 0034 40F20111 		movw	r1, #257
 12332 0038 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccQUMSla.s 			page 272


3149:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 12333              		.loc 1 3149 0
 12334 003c 0320     		movs	r0, #3
 12335 003e 2921     		movs	r1, #41
 12336 0040 FFF7FEFF 		bl	cc2400_set
3150:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 12337              		.loc 1 3150 0
 12338 0044 0620     		movs	r0, #6
 12339 0046 F121     		movs	r1, #241
 12340 0048 FFF7FEFF 		bl	cc2400_set
3151:bluetooth_rxtx.c **** 
3152:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 12341              		.loc 1 3152 0
 12342 004c 00BF     		nop
 12343              	.L633:
 12344              		.loc 1 3152 0 is_stmt 0 discriminator 1
 12345 004e FFF7FEFF 		bl	cc2400_status
 12346 0052 0346     		mov	r3, r0
 12347 0054 03F04003 		and	r3, r3, #64
 12348 0058 002B     		cmp	r3, #0
 12349 005a F8D0     		beq	.L633
3153:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 12350              		.loc 1 3153 0 is_stmt 1
 12351 005c 00BF     		nop
 12352              	.L634:
 12353              		.loc 1 3153 0 is_stmt 0 discriminator 1
 12354 005e FFF7FEFF 		bl	cc2400_status
 12355 0062 0346     		mov	r3, r0
 12356 0064 03F00403 		and	r3, r3, #4
 12357 0068 002B     		cmp	r3, #0
 12358 006a F8D1     		bne	.L634
3154:bluetooth_rxtx.c **** 
3155:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 12359              		.loc 1 3155 0 is_stmt 1
 12360 006c 79E0     		b	.L635
 12361              	.L648:
 12362              	.LBB30:
3156:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 12363              		.loc 1 3156 0
 12364 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12365 0070 5B00     		lsls	r3, r3, #1
 12366 0072 07F11002 		add	r2, r7, #16
 12367 0076 1344     		add	r3, r3, r2
 12368 0078 33F8083C 		ldrh	r3, [r3, #-8]
 12369 007c 013B     		subs	r3, r3, #1
 12370 007e 9BB2     		uxth	r3, r3
 12371 0080 0220     		movs	r0, #2
 12372 0082 1946     		mov	r1, r3
 12373 0084 FFF7FEFF 		bl	cc2400_set
3157:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 12374              		.loc 1 3157 0
 12375 0088 6120     		movs	r0, #97
 12376 008a FFF7FEFF 		bl	cc2400_strobe
3158:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 12377              		.loc 1 3158 0
 12378 008e 00BF     		nop
 12379              	.L636:
ARM GAS  /tmp/ccQUMSla.s 			page 273


 12380              		.loc 1 3158 0 is_stmt 0 discriminator 1
 12381 0090 FFF7FEFF 		bl	cc2400_status
 12382 0094 0346     		mov	r3, r0
 12383 0096 03F00403 		and	r3, r3, #4
 12384 009a 002B     		cmp	r3, #0
 12385 009c F8D0     		beq	.L636
3159:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 12386              		.loc 1 3159 0 is_stmt 1
 12387 009e 6220     		movs	r0, #98
 12388 00a0 FFF7FEFF 		bl	cc2400_strobe
3160:bluetooth_rxtx.c **** 
3161:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
3162:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 12389              		.loc 1 3162 0
 12390 00a4 4FF4FA73 		mov	r3, #500
 12391 00a8 7B60     		str	r3, [r7, #4]
 12392 00aa 00BF     		nop
 12393              	.L637:
 12394              		.loc 1 3162 0 is_stmt 0 discriminator 2
 12395 00ac 7B68     		ldr	r3, [r7, #4]
 12396 00ae 013B     		subs	r3, r3, #1
 12397 00b0 7B60     		str	r3, [r7, #4]
 12398 00b2 002B     		cmp	r3, #0
 12399 00b4 FAD1     		bne	.L637
3163:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 12400              		.loc 1 3163 0 is_stmt 1
 12401 00b6 0620     		movs	r0, #6
 12402 00b8 FFF7FEFF 		bl	cc2400_get
 12403 00bc 0346     		mov	r3, r0
 12404 00be 1B0A     		lsrs	r3, r3, #8
 12405 00c0 9BB2     		uxth	r3, r3
 12406 00c2 BB73     		strb	r3, [r7, #14]
3164:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 12407              		.loc 1 3164 0
 12408 00c4 2E4B     		ldr	r3, .L649+8
 12409 00c6 1B78     		ldrb	r3, [r3]
 12410 00c8 DBB2     		uxtb	r3, r3
 12411 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 12412 00ce 5BB2     		sxtb	r3, r3
 12413 00d0 9A42     		cmp	r2, r3
 12414 00d2 15DD     		ble	.L638
3165:bluetooth_rxtx.c ****             switch (i) {
 12415              		.loc 1 3165 0
 12416 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12417 00d6 012B     		cmp	r3, #1
 12418 00d8 09D0     		beq	.L640
 12419 00da 022B     		cmp	r3, #2
 12420 00dc 0BD0     		beq	.L641
 12421 00de 002B     		cmp	r3, #0
 12422 00e0 00D0     		beq	.L642
 12423 00e2 21E0     		b	.L643
 12424              	.L642:
3166:bluetooth_rxtx.c ****                 case 0:
3167:bluetooth_rxtx.c ****                     TXLED_SET;
 12425              		.loc 1 3167 0
 12426 00e4 274B     		ldr	r3, .L649+12
 12427 00e6 4FF48072 		mov	r2, #256
ARM GAS  /tmp/ccQUMSla.s 			page 274


 12428 00ea 1A60     		str	r2, [r3]
3168:bluetooth_rxtx.c ****                     break;
 12429              		.loc 1 3168 0
 12430 00ec 07E0     		b	.L639
 12431              	.L640:
3169:bluetooth_rxtx.c ****                 case 1:
3170:bluetooth_rxtx.c ****                     RXLED_SET;
 12432              		.loc 1 3170 0
 12433 00ee 254B     		ldr	r3, .L649+12
 12434 00f0 1022     		movs	r2, #16
 12435 00f2 1A60     		str	r2, [r3]
3171:bluetooth_rxtx.c ****                     break;
 12436              		.loc 1 3171 0
 12437 00f4 03E0     		b	.L639
 12438              	.L641:
3172:bluetooth_rxtx.c ****                 case 2:
3173:bluetooth_rxtx.c ****                     USRLED_SET;
 12439              		.loc 1 3173 0
 12440 00f6 234B     		ldr	r3, .L649+12
 12441 00f8 0222     		movs	r2, #2
 12442 00fa 1A60     		str	r2, [r3]
3174:bluetooth_rxtx.c ****                     break;
 12443              		.loc 1 3174 0
 12444 00fc 00BF     		nop
 12445              	.L639:
 12446 00fe 13E0     		b	.L643
 12447              	.L638:
3175:bluetooth_rxtx.c ****             }
3176:bluetooth_rxtx.c ****         }
3177:bluetooth_rxtx.c ****         else {
3178:bluetooth_rxtx.c ****             switch (i) {
 12448              		.loc 1 3178 0
 12449 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12450 0102 012B     		cmp	r3, #1
 12451 0104 08D0     		beq	.L644
 12452 0106 022B     		cmp	r3, #2
 12453 0108 0AD0     		beq	.L645
 12454 010a 002B     		cmp	r3, #0
 12455 010c 0CD1     		bne	.L643
3179:bluetooth_rxtx.c ****                 case 0:
3180:bluetooth_rxtx.c ****                     TXLED_CLR;
 12456              		.loc 1 3180 0
 12457 010e 1E4B     		ldr	r3, .L649+16
 12458 0110 4FF48072 		mov	r2, #256
 12459 0114 1A60     		str	r2, [r3]
3181:bluetooth_rxtx.c ****                     break;
 12460              		.loc 1 3181 0
 12461 0116 07E0     		b	.L643
 12462              	.L644:
3182:bluetooth_rxtx.c ****                 case 1:
3183:bluetooth_rxtx.c ****                     RXLED_CLR;
 12463              		.loc 1 3183 0
 12464 0118 1B4B     		ldr	r3, .L649+16
 12465 011a 1022     		movs	r2, #16
 12466 011c 1A60     		str	r2, [r3]
3184:bluetooth_rxtx.c ****                     break;
 12467              		.loc 1 3184 0
ARM GAS  /tmp/ccQUMSla.s 			page 275


 12468 011e 03E0     		b	.L643
 12469              	.L645:
3185:bluetooth_rxtx.c ****                 case 2:
3186:bluetooth_rxtx.c ****                     USRLED_CLR;
 12470              		.loc 1 3186 0
 12471 0120 194B     		ldr	r3, .L649+16
 12472 0122 0222     		movs	r2, #2
 12473 0124 1A60     		str	r2, [r3]
3187:bluetooth_rxtx.c ****                     break;
 12474              		.loc 1 3187 0
 12475 0126 00BF     		nop
 12476              	.L643:
3188:bluetooth_rxtx.c ****             }
3189:bluetooth_rxtx.c ****         }
3190:bluetooth_rxtx.c **** 
3191:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 12477              		.loc 1 3191 0
 12478 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12479 012a 5A1C     		adds	r2, r3, #1
 12480 012c 174B     		ldr	r3, .L649+20
 12481 012e 83FB0231 		smull	r3, r1, r3, r2
 12482 0132 D317     		asrs	r3, r2, #31
 12483 0134 C91A     		subs	r1, r1, r3
 12484 0136 0B46     		mov	r3, r1
 12485 0138 5B00     		lsls	r3, r3, #1
 12486 013a 0B44     		add	r3, r3, r1
 12487 013c D11A     		subs	r1, r2, r3
 12488 013e 0B46     		mov	r3, r1
 12489 0140 FB73     		strb	r3, [r7, #15]
3192:bluetooth_rxtx.c **** 
3193:bluetooth_rxtx.c **** 		handle_usb(clkn);
 12490              		.loc 1 3193 0
 12491 0142 134B     		ldr	r3, .L649+24
 12492 0144 1B68     		ldr	r3, [r3]
 12493 0146 1846     		mov	r0, r3
 12494 0148 FFF7FEFF 		bl	handle_usb
3194:bluetooth_rxtx.c ****         //wait(1);
3195:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 12495              		.loc 1 3195 0
 12496 014c 6420     		movs	r0, #100
 12497 014e FFF7FEFF 		bl	cc2400_strobe
3196:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 12498              		.loc 1 3196 0
 12499 0152 00BF     		nop
 12500              	.L647:
 12501              		.loc 1 3196 0 is_stmt 0 discriminator 1
 12502 0154 FFF7FEFF 		bl	cc2400_status
 12503 0158 0346     		mov	r3, r0
 12504 015a 03F00403 		and	r3, r3, #4
 12505 015e 002B     		cmp	r3, #0
 12506 0160 F8D1     		bne	.L647
 12507              	.L635:
 12508              	.LBE30:
3155:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 12509              		.loc 1 3155 0 is_stmt 1
 12510 0162 0C4B     		ldr	r3, .L649+28
 12511 0164 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 276


 12512 0166 DBB2     		uxtb	r3, r3
 12513 0168 072B     		cmp	r3, #7
 12514 016a 80D0     		beq	.L648
3197:bluetooth_rxtx.c **** 	}
3198:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 12515              		.loc 1 3198 0
 12516 016c 0A4B     		ldr	r3, .L649+32
 12517 016e 0022     		movs	r2, #0
 12518 0170 1A70     		strb	r2, [r3]
3199:bluetooth_rxtx.c **** }
 12519              		.loc 1 3199 0
 12520 0172 1037     		adds	r7, r7, #16
 12521              		.cfi_def_cfa_offset 8
 12522 0174 BD46     		mov	sp, r7
 12523              		.cfi_def_cfa_register 13
 12524              		@ sp needed
 12525 0176 80BD     		pop	{r7, pc}
 12526              	.L650:
 12527              		.align	2
 12528              	.L649:
 12529 0178 00090000 		.word	.LC2
 12530 017c 58C00920 		.word	537509976
 12531 0180 00000000 		.word	rssi_threshold
 12532 0184 38C00920 		.word	537509944
 12533 0188 3CC00920 		.word	537509948
 12534 018c 56555555 		.word	1431655766
 12535 0190 00000000 		.word	clkn
 12536 0194 00000000 		.word	requested_mode
 12537 0198 00000000 		.word	mode
 12538              		.cfi_endproc
 12539              	.LFE53:
 12541              		.section	.text.main,"ax",%progbits
 12542              		.align	2
 12543              		.global	main
 12544              		.thumb
 12545              		.thumb_func
 12547              	main:
 12548              	.LFB54:
3200:bluetooth_rxtx.c **** 
3201:bluetooth_rxtx.c **** int main()
3202:bluetooth_rxtx.c **** {
 12549              		.loc 1 3202 0
 12550              		.cfi_startproc
 12551              		@ args = 0, pretend = 0, frame = 0
 12552              		@ frame_needed = 1, uses_anonymous_args = 0
 12553 0000 80B5     		push	{r7, lr}
 12554              		.cfi_def_cfa_offset 8
 12555              		.cfi_offset 7, -8
 12556              		.cfi_offset 14, -4
 12557 0002 00AF     		add	r7, sp, #0
 12558              		.cfi_def_cfa_register 7
3203:bluetooth_rxtx.c **** 	ubertooth_init();
 12559              		.loc 1 3203 0
 12560 0004 FFF7FEFF 		bl	ubertooth_init
3204:bluetooth_rxtx.c **** 	clkn_init();
 12561              		.loc 1 3204 0
 12562 0008 FFF7FEFF 		bl	clkn_init
ARM GAS  /tmp/ccQUMSla.s 			page 277


3205:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 12563              		.loc 1 3205 0
 12564 000c 4B48     		ldr	r0, .L673
 12565 000e FFF7FEFF 		bl	ubertooth_usb_init
 12566              	.L671:
3206:bluetooth_rxtx.c **** 
3207:bluetooth_rxtx.c **** 	while (1) {
3208:bluetooth_rxtx.c **** 		handle_usb(clkn);
 12567              		.loc 1 3208 0
 12568 0012 4B4B     		ldr	r3, .L673+4
 12569 0014 1B68     		ldr	r3, [r3]
 12570 0016 1846     		mov	r0, r3
 12571 0018 FFF7FEFF 		bl	handle_usb
3209:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 12572              		.loc 1 3209 0
 12573 001c 494B     		ldr	r3, .L673+8
 12574 001e 1B78     		ldrb	r3, [r3]
 12575 0020 DAB2     		uxtb	r2, r3
 12576 0022 494B     		ldr	r3, .L673+12
 12577 0024 1B78     		ldrb	r3, [r3]
 12578 0026 DBB2     		uxtb	r3, r3
 12579 0028 9A42     		cmp	r2, r3
 12580 002a 00F08680 		beq	.L652
3210:bluetooth_rxtx.c **** 			switch (requested_mode) {
 12581              		.loc 1 3210 0
 12582 002e 454B     		ldr	r3, .L673+8
 12583 0030 1B78     		ldrb	r3, [r3]
 12584 0032 DBB2     		uxtb	r3, r3
 12585 0034 0F2B     		cmp	r3, #15
 12586 0036 7FD8     		bhi	.L672
 12587 0038 01A2     		adr	r2, .L655
 12588 003a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 12589 003e 00BF     		.p2align 2
 12590              	.L655:
 12591 0040 33010000 		.word	.L654+1
 12592 0044 8D000000 		.word	.L656+1
 12593 0048 39010000 		.word	.L672+1
 12594 004c CF000000 		.word	.L657+1
 12595 0050 13010000 		.word	.L658+1
 12596 0054 DF000000 		.word	.L659+1
 12597 0058 05010000 		.word	.L660+1
 12598 005c 19010000 		.word	.L661+1
 12599 0060 B1000000 		.word	.L662+1
 12600 0064 BD000000 		.word	.L663+1
 12601 0068 C3000000 		.word	.L664+1
 12602 006c 81000000 		.word	.L665+1
 12603 0070 C9000000 		.word	.L666+1
 12604 0074 1F010000 		.word	.L667+1
 12605 0078 99000000 		.word	.L668+1
 12606 007c A5000000 		.word	.L669+1
 12607              		.p2align 1
 12608              	.L665:
3211:bluetooth_rxtx.c **** 				 case MODE_RESET:
3212:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
3213:bluetooth_rxtx.c **** 					wait(1);
 12609              		.loc 1 3213 0
 12610 0080 0120     		movs	r0, #1
ARM GAS  /tmp/ccQUMSla.s 			page 278


 12611 0082 FFF7FEFF 		bl	wait
3214:bluetooth_rxtx.c **** 					reset();
 12612              		.loc 1 3214 0
 12613 0086 FFF7FEFF 		bl	reset
3215:bluetooth_rxtx.c **** 					break;
 12614              		.loc 1 3215 0
 12615 008a 56E0     		b	.L652
 12616              	.L656:
3216:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
3217:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 12617              		.loc 1 3217 0
 12618 008c 2E4B     		ldr	r3, .L673+12
 12619 008e 0122     		movs	r2, #1
 12620 0090 1A70     		strb	r2, [r3]
3218:bluetooth_rxtx.c **** 					bt_stream_legacy();
 12621              		.loc 1 3218 0
 12622 0092 FFF7FEFF 		bl	bt_stream_legacy
3219:bluetooth_rxtx.c **** 					break;
 12623              		.loc 1 3219 0
 12624 0096 50E0     		b	.L652
 12625              	.L668:
3220:bluetooth_rxtx.c **** 				case MODE_RX_FREQ:
3221:bluetooth_rxtx.c **** 					mode = MODE_RX_FREQ;
 12626              		.loc 1 3221 0
 12627 0098 2B4B     		ldr	r3, .L673+12
 12628 009a 0E22     		movs	r2, #14
 12629 009c 1A70     		strb	r2, [r3]
3222:bluetooth_rxtx.c **** 					bt_stream_freq();
 12630              		.loc 1 3222 0
 12631 009e FFF7FEFF 		bl	bt_stream_freq
3223:bluetooth_rxtx.c **** 					break;
 12632              		.loc 1 3223 0
 12633 00a2 4AE0     		b	.L652
 12634              	.L669:
3224:bluetooth_rxtx.c **** 				case MODE_RX_PROPOSED:
3225:bluetooth_rxtx.c **** 					mode = MODE_RX_PROPOSED;
 12635              		.loc 1 3225 0
 12636 00a4 284B     		ldr	r3, .L673+12
 12637 00a6 0F22     		movs	r2, #15
 12638 00a8 1A70     		strb	r2, [r3]
3226:bluetooth_rxtx.c **** 					bt_stream_proposed();
 12639              		.loc 1 3226 0
 12640 00aa FFF7FEFF 		bl	bt_stream_proposed
3227:bluetooth_rxtx.c **** 					break;
 12641              		.loc 1 3227 0
 12642 00ae 44E0     		b	.L652
 12643              	.L662:
3228:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
3229:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 12644              		.loc 1 3229 0
 12645 00b0 254B     		ldr	r3, .L673+12
 12646 00b2 0822     		movs	r2, #8
 12647 00b4 1A70     		strb	r2, [r3]
3230:bluetooth_rxtx.c **** 					bt_stream_rx();
 12648              		.loc 1 3230 0
 12649 00b6 FFF7FEFF 		bl	bt_stream_rx
3231:bluetooth_rxtx.c **** 					break;
ARM GAS  /tmp/ccQUMSla.s 			page 279


 12650              		.loc 1 3231 0
 12651 00ba 3EE0     		b	.L652
 12652              	.L663:
3232:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
3233:bluetooth_rxtx.c **** 					bt_follow_le();
 12653              		.loc 1 3233 0
 12654 00bc FFF7FEFF 		bl	bt_follow_le
3234:bluetooth_rxtx.c **** 					break;
 12655              		.loc 1 3234 0
 12656 00c0 3BE0     		b	.L652
 12657              	.L664:
3235:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
3236:bluetooth_rxtx.c **** 					bt_promisc_le();
 12658              		.loc 1 3236 0
 12659 00c2 FFF7FEFF 		bl	bt_promisc_le
3237:bluetooth_rxtx.c **** 					break;
 12660              		.loc 1 3237 0
 12661 00c6 38E0     		b	.L652
 12662              	.L666:
3238:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
3239:bluetooth_rxtx.c **** 					bt_slave_le();
 12663              		.loc 1 3239 0
 12664 00c8 FFF7FEFF 		bl	bt_slave_le
3240:bluetooth_rxtx.c **** 					break;
 12665              		.loc 1 3240 0
 12666 00cc 35E0     		b	.L652
 12667              	.L657:
3241:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
3242:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 12668              		.loc 1 3242 0
 12669 00ce 1E4B     		ldr	r3, .L673+12
 12670 00d0 0322     		movs	r2, #3
 12671 00d2 1A70     		strb	r2, [r3]
3243:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 12672              		.loc 1 3243 0
 12673 00d4 1D48     		ldr	r0, .L673+16
 12674 00d6 1E49     		ldr	r1, .L673+20
 12675 00d8 FFF7FEFF 		bl	cc2400_txtest
3244:bluetooth_rxtx.c **** 					break;
 12676              		.loc 1 3244 0
 12677 00dc 2DE0     		b	.L652
 12678              	.L659:
3245:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
3246:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 12679              		.loc 1 3246 0
 12680 00de 1A4B     		ldr	r3, .L673+12
 12681 00e0 0522     		movs	r2, #5
 12682 00e2 1A70     		strb	r2, [r3]
3247:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 12683              		.loc 1 3247 0
 12684 00e4 1A48     		ldr	r0, .L673+20
 12685 00e6 FFF7FEFF 		bl	cc2400_rangetest
3248:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 12686              		.loc 1 3248 0
 12687 00ea 174B     		ldr	r3, .L673+12
 12688 00ec 0022     		movs	r2, #0
 12689 00ee 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccQUMSla.s 			page 280


3249:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 12690              		.loc 1 3249 0
 12691 00f0 144B     		ldr	r3, .L673+8
 12692 00f2 1B78     		ldrb	r3, [r3]
 12693 00f4 DBB2     		uxtb	r3, r3
 12694 00f6 052B     		cmp	r3, #5
 12695 00f8 03D1     		bne	.L670
3250:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 12696              		.loc 1 3250 0
 12697 00fa 124B     		ldr	r3, .L673+8
 12698 00fc 0022     		movs	r2, #0
 12699 00fe 1A70     		strb	r2, [r3]
3251:bluetooth_rxtx.c **** 					break;
 12700              		.loc 1 3251 0
 12701 0100 1BE0     		b	.L652
 12702              	.L670:
 12703 0102 1AE0     		b	.L652
 12704              	.L660:
3252:bluetooth_rxtx.c **** 				case MODE_REPEATER:
3253:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 12705              		.loc 1 3253 0
 12706 0104 104B     		ldr	r3, .L673+12
 12707 0106 0622     		movs	r2, #6
 12708 0108 1A70     		strb	r2, [r3]
3254:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 12709              		.loc 1 3254 0
 12710 010a 1148     		ldr	r0, .L673+20
 12711 010c FFF7FEFF 		bl	cc2400_repeater
3255:bluetooth_rxtx.c **** 					break;
 12712              		.loc 1 3255 0
 12713 0110 13E0     		b	.L652
 12714              	.L658:
3256:bluetooth_rxtx.c **** 				case MODE_SPECAN:
3257:bluetooth_rxtx.c **** 					specan();
 12715              		.loc 1 3257 0
 12716 0112 FFF7FEFF 		bl	specan
3258:bluetooth_rxtx.c **** 					break;
 12717              		.loc 1 3258 0
 12718 0116 10E0     		b	.L652
 12719              	.L661:
3259:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
3260:bluetooth_rxtx.c **** 					led_specan();
 12720              		.loc 1 3260 0
 12721 0118 FFF7FEFF 		bl	led_specan
3261:bluetooth_rxtx.c **** 					break;
 12722              		.loc 1 3261 0
 12723 011c 0DE0     		b	.L652
 12724              	.L667:
3262:bluetooth_rxtx.c **** 				case MODE_EGO:
3263:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 12725              		.loc 1 3263 0
 12726 011e 0A4B     		ldr	r3, .L673+12
 12727 0120 0D22     		movs	r2, #13
 12728 0122 1A70     		strb	r2, [r3]
3264:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 12729              		.loc 1 3264 0
 12730 0124 0B4B     		ldr	r3, .L673+24
ARM GAS  /tmp/ccQUMSla.s 			page 281


 12731 0126 1B78     		ldrb	r3, [r3]
 12732 0128 DBB2     		uxtb	r3, r3
 12733 012a 1846     		mov	r0, r3
 12734 012c FFF7FEFF 		bl	ego_main
3265:bluetooth_rxtx.c **** 					break;
 12735              		.loc 1 3265 0
 12736 0130 03E0     		b	.L652
 12737              	.L654:
3266:bluetooth_rxtx.c **** 				case MODE_IDLE:
3267:bluetooth_rxtx.c **** 					cc2400_idle();
 12738              		.loc 1 3267 0
 12739 0132 FFF7FEFF 		bl	cc2400_idle
3268:bluetooth_rxtx.c **** 					break;
 12740              		.loc 1 3268 0
 12741 0136 00E0     		b	.L652
 12742              	.L672:
3269:bluetooth_rxtx.c **** 				default:
3270:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
3271:bluetooth_rxtx.c **** 					break;
 12743              		.loc 1 3271 0
 12744 0138 00BF     		nop
 12745              	.L652:
3272:bluetooth_rxtx.c **** 			}
3273:bluetooth_rxtx.c **** 	}
 12746              		.loc 1 3273 0 discriminator 1
 12747 013a 6AE7     		b	.L671
 12748              	.L674:
 12749              		.align	2
 12750              	.L673:
 12751 013c 00000000 		.word	vendor_request_handler
 12752 0140 00000000 		.word	clkn
 12753 0144 00000000 		.word	requested_mode
 12754 0148 00000000 		.word	mode
 12755 014c 00000000 		.word	modulation
 12756 0150 00000000 		.word	channel
 12757 0154 00000000 		.word	ego_mode
 12758              		.cfi_endproc
 12759              	.LFE54:
 12761              		.bss
 12762              		.align	2
 12763              	restart_jamming.4899:
 12764 00d4 00000000 		.space	4
 12765              		.align	2
 12766              	first_ts.4997:
 12767 00d8 00000000 		.space	4
 12768              		.align	2
 12769              	prev_clk.5003:
 12770 00dc 00000000 		.space	4
 12771              		.text
 12772              	.Letext0:
 12773              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 12774              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 12775              		.file 4 "../common/ubertooth.h"
 12776              		.file 5 "bluetooth_le.h"
 12777              		.file 6 "bluetooth.h"
 12778              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccQUMSla.s 			page 282


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccQUMSla.s:19     .data:0000000000000000 $d
     /tmp/ccQUMSla.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccQUMSla.s:29     .rodata:0000000000000000 $d
     /tmp/ccQUMSla.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccQUMSla.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccQUMSla.s:80     .rodata:000000000000002c payload
     /tmp/ccQUMSla.s:104    .rodata:0000000000000040 whitening
     /tmp/ccQUMSla.s:235    .rodata:00000000000000c0 whitening_index
     /tmp/ccQUMSla.s:279    .rodata:00000000000000e8 hop_interval_lut
     /tmp/ccQUMSla.s:320    .rodata:0000000000000110 whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccQUMSla.s:806    .rodata:0000000000000890 compile_info
                            *COM*:0000000000000001 device_index
                            *COM*:0000000000000004 first_ts
                            *COM*:0000000000000004 second_ts
                            *COM*:0000000000000004 diff_ts
                            *COM*:0000000000000001 rssi_avg
                            *COM*:0000000000000001 freq_avg
                            *COM*:0000000000000004 clkn
     /tmp/ccQUMSla.s:820    .bss:0000000000000000 hop_mode
     /tmp/ccQUMSla.s:821    .bss:0000000000000000 $d
     /tmp/ccQUMSla.s:825    .bss:0000000000000001 do_hop
     /tmp/ccQUMSla.s:830    .bss:0000000000000002 cs_no_squelch
     /tmp/ccQUMSla.s:836    .data:0000000000000004 cs_threshold_req
     /tmp/ccQUMSla.s:841    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/ccQUMSla.s:851    .bss:0000000000000004 hop_direct_channel
     /tmp/ccQUMSla.s:857    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/ccQUMSla.s:867    .bss:000000000000000c idle_buf_channel
     /tmp/ccQUMSla.s:873    .bss:000000000000000e active_buf_channel
     /tmp/ccQUMSla.s:879    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccQUMSla.s:888    .data:0000000000000008 active_rxbuf
     /tmp/ccQUMSla.s:894    .data:000000000000000c idle_rxbuf
     /tmp/ccQUMSla.s:900    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccQUMSla.s:919    .bss:0000000000000018 le_jam_count
     /tmp/ccQUMSla.s:925    .bss:000000000000001c data_cb
     /tmp/ccQUMSla.s:931    .bss:0000000000000020 packet_cb
     /tmp/ccQUMSla.s:937    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/ccQUMSla.s:943    .bss:00000000000000c2 mode
     /tmp/ccQUMSla.s:948    .bss:00000000000000c3 requested_mode
     /tmp/ccQUMSla.s:953    .bss:00000000000000c4 jam_mode
ARM GAS  /tmp/ccQUMSla.s 			page 283


     /tmp/ccQUMSla.s:958    .bss:00000000000000c5 ego_mode
     /tmp/ccQUMSla.s:963    .bss:00000000000000c6 modulation
     /tmp/ccQUMSla.s:970    .data:0000000000000054 channel
     /tmp/ccQUMSla.s:977    .bss:00000000000000c8 requested_channel
     /tmp/ccQUMSla.s:983    .bss:00000000000000ca saved_request
     /tmp/ccQUMSla.s:990    .data:0000000000000056 low_freq
     /tmp/ccQUMSla.s:996    .data:0000000000000058 high_freq
     /tmp/ccQUMSla.s:1001   .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccQUMSla.s:1012   .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/ccQUMSla.s:1019   .bss:00000000000000cd rssi_count
     /tmp/ccQUMSla.s:1025   .bss:00000000000000d0 rssi_sum
     /tmp/ccQUMSla.s:1028   .text.rssi_reset:0000000000000000 $t
     /tmp/ccQUMSla.s:1032   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccQUMSla.s:1072   .text.rssi_reset:0000000000000024 $d
     /tmp/ccQUMSla.s:1080   .text.rssi_add:0000000000000000 $t
     /tmp/ccQUMSla.s:1084   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccQUMSla.s:1150   .text.rssi_add:000000000000005c $d
     /tmp/ccQUMSla.s:1158   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccQUMSla.s:1162   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccQUMSla.s:1256   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccQUMSla.s:1265   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccQUMSla.s:1269   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccQUMSla.s:1351   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccQUMSla.s:1357   .text.enqueue:0000000000000000 $t
     /tmp/ccQUMSla.s:1361   .text.enqueue:0000000000000000 enqueue
     /tmp/ccQUMSla.s:1591   .text.enqueue:0000000000000164 $d
     /tmp/ccQUMSla.s:1607   .text.enqueue_legacy:0000000000000000 $t
     /tmp/ccQUMSla.s:1611   .text.enqueue_legacy:0000000000000000 enqueue_legacy
     /tmp/ccQUMSla.s:1793   .text.enqueue_legacy:0000000000000110 $d
     /tmp/ccQUMSla.s:1803   .text.enqueue_freq:0000000000000000 $t
     /tmp/ccQUMSla.s:1807   .text.enqueue_freq:0000000000000000 enqueue_freq
     /tmp/ccQUMSla.s:1991   .text.enqueue_freq:0000000000000110 $d
     /tmp/ccQUMSla.s:2001   .text.enqueue_proposed:0000000000000000 $t
     /tmp/ccQUMSla.s:2005   .text.enqueue_proposed:0000000000000000 enqueue_proposed
     /tmp/ccQUMSla.s:2097   .text.enqueue_proposed:000000000000007c $d
     /tmp/ccQUMSla.s:2107   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccQUMSla.s:2112   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccQUMSla.s:2195   .text.enqueue_with_ts:000000000000006c $d
     /tmp/ccQUMSla.s:2203   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccQUMSla.s:2207   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccQUMSla.s:2282   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccQUMSla.s:2290   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccQUMSla.s:2294   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccQUMSla.s:2335   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccQUMSla.s:2343   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccQUMSla.s:2347   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccQUMSla.s:2388   .text.cs_trigger_disable:000000000000002c $d
     /tmp/ccQUMSla.s:2400   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccQUMSla.s:2404   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccQUMSla.s:2441   .text.vendor_request_handler:0000000000000024 $d
ARM GAS  /tmp/ccQUMSla.s 			page 284


     /tmp/ccQUMSla.s:2504   .text.vendor_request_handler:0000000000000120 $t
     /tmp/ccQUMSla.s:2919   .text.vendor_request_handler:00000000000003c8 $d
     /tmp/ccQUMSla.s:2928   .text.vendor_request_handler:00000000000003e4 $t
     /tmp/ccQUMSla.s:3319   .text.vendor_request_handler:0000000000000638 $d
     /tmp/ccQUMSla.s:3337   .text.vendor_request_handler:0000000000000678 $t
     /tmp/ccQUMSla.s:3727   .text.vendor_request_handler:0000000000000918 $d
     /tmp/ccQUMSla.s:3739   .text.vendor_request_handler:0000000000000940 $t
     /tmp/ccQUMSla.s:8364   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccQUMSla.s:4023   .text.vendor_request_handler:0000000000000af8 $d
     /tmp/ccQUMSla.s:4033   .text.clkn_init:0000000000000000 $t
     /tmp/ccQUMSla.s:4037   .text.clkn_init:0000000000000000 clkn_init
     /tmp/ccQUMSla.s:4088   .text.clkn_init:0000000000000038 $d
     /tmp/ccQUMSla.s:4098   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccQUMSla.s:4103   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/ccQUMSla.s:4272   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/ccQUMSla.s:4284   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccQUMSla.s:4289   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccQUMSla.s:4331   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/ccQUMSla.s:4345   .text.msleep:0000000000000000 $t
     /tmp/ccQUMSla.s:4349   .text.msleep:0000000000000000 msleep
     /tmp/ccQUMSla.s:4418   .text.msleep:0000000000000070 $d
     /tmp/ccQUMSla.s:4426   .text.dma_init:0000000000000000 $t
     /tmp/ccQUMSla.s:4430   .text.dma_init:0000000000000000 dma_init
     /tmp/ccQUMSla.s:4604   .text.dma_init:0000000000000104 $d
     /tmp/ccQUMSla.s:4639   .text.dma_init_le:0000000000000000 $t
     /tmp/ccQUMSla.s:4643   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccQUMSla.s:4848   .text.dma_init_le:0000000000000134 $d
     /tmp/ccQUMSla.s:4880   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccQUMSla.s:4885   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccQUMSla.s:4988   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/ccQUMSla.s:5008   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccQUMSla.s:5013   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccQUMSla.s:5036   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccQUMSla.s:5051   .text.DMA_IRQHandler:0000000000000054 $t
     /tmp/ccQUMSla.s:5063   .text.DMA_IRQHandler:000000000000005c $d
     /tmp/ccQUMSla.s:5068   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccQUMSla.s:5072   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccQUMSla.s:5125   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccQUMSla.s:5135   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccQUMSla.s:5139   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccQUMSla.s:5237   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccQUMSla.s:5256   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccQUMSla.s:5260   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccQUMSla.s:5313   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccQUMSla.s:5320   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccQUMSla.s:5324   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccQUMSla.s:5438   .text.cc2400_rx:00000000000000b0 $d
     /tmp/ccQUMSla.s:5445   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccQUMSla.s:5449   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccQUMSla.s:5584   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccQUMSla.s:5591   .text.le_transmit:0000000000000000 $t
     /tmp/ccQUMSla.s:5596   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccQUMSla.s:5989   .text.le_transmit:00000000000002d4 $d
     /tmp/ccQUMSla.s:6002   .text.le_jam:0000000000000000 $t
     /tmp/ccQUMSla.s:6007   .text.le_jam:0000000000000000 le_jam
     /tmp/ccQUMSla.s:6090   .text.le_jam:000000000000008c $d
     /tmp/ccQUMSla.s:6096   .text.hop:0000000000000000 $t
ARM GAS  /tmp/ccQUMSla.s 			page 285


     /tmp/ccQUMSla.s:6101   .text.hop:0000000000000000 hop
     /tmp/ccQUMSla.s:6268   .text.hop:000000000000010c $d
     /tmp/ccQUMSla.s:6279   .text.cc2400_spi_rev:0000000000000000 $t
     /tmp/ccQUMSla.s:6284   .text.cc2400_spi_rev:0000000000000000 cc2400_spi_rev
     /tmp/ccQUMSla.s:6381   .text.cc2400_spi_rev:000000000000007c $d
     /tmp/ccQUMSla.s:6388   .text.cc2400_get_rev:0000000000000000 $t
     /tmp/ccQUMSla.s:6393   .text.cc2400_get_rev:0000000000000000 cc2400_get_rev
     /tmp/ccQUMSla.s:6435   .text.add:0000000000000000 $t
     /tmp/ccQUMSla.s:6440   .text.add:0000000000000000 add
     /tmp/ccQUMSla.s:6500   .text.bt_stream_proposed:0000000000000000 $t
     /tmp/ccQUMSla.s:6505   .text.bt_stream_proposed:0000000000000000 bt_stream_proposed
     /tmp/ccQUMSla.s:6804   .text.bt_stream_proposed:0000000000000220 $d
     /tmp/ccQUMSla.s:6819   .text.bt_stream_freq:0000000000000000 $t
     /tmp/ccQUMSla.s:6824   .text.bt_stream_freq:0000000000000000 bt_stream_freq
     /tmp/ccQUMSla.s:7261   .text.bt_stream_freq:00000000000002e8 $d
     /tmp/ccQUMSla.s:7279   .text.bt_stream_freq:0000000000000324 $t
     /tmp/ccQUMSla.s:7323   .text.bt_stream_freq:0000000000000364 $d
     /tmp/ccQUMSla.s:7332   .text.bt_stream_legacy:0000000000000000 $t
     /tmp/ccQUMSla.s:7337   .text.bt_stream_legacy:0000000000000000 bt_stream_legacy
     /tmp/ccQUMSla.s:7770   .text.bt_stream_legacy:0000000000000308 $d
     /tmp/ccQUMSla.s:7789   .text.bt_stream_legacy:0000000000000348 $t
     /tmp/ccQUMSla.s:7837   .text.bt_stream_legacy:0000000000000390 $d
     /tmp/ccQUMSla.s:7846   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccQUMSla.s:7851   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccQUMSla.s:8284   .text.bt_stream_rx:0000000000000308 $d
     /tmp/ccQUMSla.s:8303   .text.bt_stream_rx:0000000000000348 $t
     /tmp/ccQUMSla.s:8351   .text.bt_stream_rx:0000000000000390 $d
     /tmp/ccQUMSla.s:8360   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccQUMSla.s:8408   .text.le_set_access_address:0000000000000030 $d
     /tmp/ccQUMSla.s:8413   .text.reset_le:0000000000000000 $t
     /tmp/ccQUMSla.s:8418   .text.reset_le:0000000000000000 reset_le
     /tmp/ccQUMSla.s:8514   .text.reset_le:0000000000000084 $d
     /tmp/ccQUMSla.s:8523   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccQUMSla.s:8528   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccQUMSla.s:8554   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccQUMSla.s:8559   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccQUMSla.s:8564   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccQUMSla.s:8990   .text.bt_generic_le:00000000000002a0 $d
     /tmp/ccQUMSla.s:9016   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccQUMSla.s:9021   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccQUMSla.s:9369   .text.bt_le_sync:0000000000000228 $d
     /tmp/ccQUMSla.s:9390   .text.bt_le_sync:0000000000000270 $t
     /tmp/ccQUMSla.s:9788   .text.bt_le_sync:0000000000000508 $d
     /tmp/ccQUMSla.s:12763  .bss:00000000000000d4 restart_jamming.4899
     /tmp/ccQUMSla.s:9813   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccQUMSla.s:9818   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccQUMSla.s:10108  .text.cb_follow_le:00000000000001b8 $d
     /tmp/ccQUMSla.s:10121  .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccQUMSla.s:10126  .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccQUMSla.s:10504  .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccQUMSla.s:10514  .text.bt_follow_le:0000000000000000 $t
     /tmp/ccQUMSla.s:10519  .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccQUMSla.s:10549  .text.bt_follow_le:000000000000001c $d
     /tmp/ccQUMSla.s:10556  .text.le_promisc_state:0000000000000000 $t
     /tmp/ccQUMSla.s:10561  .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccQUMSla.s:10654  .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccQUMSla.s:10659  .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
ARM GAS  /tmp/ccQUMSla.s 			page 286


     /tmp/ccQUMSla.s:10868  .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccQUMSla.s:12766  .bss:00000000000000d8 first_ts.4997
     /tmp/ccQUMSla.s:10887  .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccQUMSla.s:10892  .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccQUMSla.s:11027  .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccQUMSla.s:12769  .bss:00000000000000dc prev_clk.5003
     /tmp/ccQUMSla.s:11044  .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccQUMSla.s:11049  .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccQUMSla.s:11164  .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccQUMSla.s:11172  .text.see_aa:0000000000000000 $t
     /tmp/ccQUMSla.s:11177  .text.see_aa:0000000000000000 see_aa
     /tmp/ccQUMSla.s:11298  .text.see_aa:00000000000000a4 $d
     /tmp/ccQUMSla.s:11310  .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccQUMSla.s:11315  .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccQUMSla.s:11767  .text.cb_le_promisc:00000000000002e0 $d
     /tmp/ccQUMSla.s:11783  .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccQUMSla.s:11788  .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccQUMSla.s:11870  .text.bt_promisc_le:000000000000006c $d
     /tmp/ccQUMSla.s:11898  .text.bt_slave_le:0000000000000000 $t
     /tmp/ccQUMSla.s:11903  .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccQUMSla.s:12038  .text.bt_slave_le:00000000000000dc $d
     /tmp/ccQUMSla.s:12049  .text.specan:0000000000000000 $t
     /tmp/ccQUMSla.s:12054  .text.specan:0000000000000000 specan
     /tmp/ccQUMSla.s:12270  .text.specan:0000000000000178 $d
     /tmp/ccQUMSla.s:12288  .text.led_specan:0000000000000000 $t
     /tmp/ccQUMSla.s:12293  .text.led_specan:0000000000000000 led_specan
     /tmp/ccQUMSla.s:12529  .text.led_specan:0000000000000178 $d
     /tmp/ccQUMSla.s:12542  .text.main:0000000000000000 $t
     /tmp/ccQUMSla.s:12547  .text.main:0000000000000000 main
     /tmp/ccQUMSla.s:12591  .text.main:0000000000000040 $d
     /tmp/ccQUMSla.s:12607  .text.main:0000000000000080 $t
     /tmp/ccQUMSla.s:12751  .text.main:000000000000013c $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
handle_usb
dio_ssp_init
ARM GAS  /tmp/ccQUMSla.s 			page 287


rbit
btle_crcgen_lut
memset
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
