ARM GAS  /tmp/ccfQkuUX.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccfQkuUX.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	payload:
  81 002c CA       		.byte	-54
  82 002d AA       		.byte	-86
  83 002e AA       		.byte	-86
  84 002f AA       		.byte	-86
  85 0030 AA       		.byte	-86
  86 0031 AA       		.byte	-86
  87 0032 AA       		.byte	-86
  88 0033 AA       		.byte	-86
  89 0034 AA       		.byte	-86
  90 0035 AA       		.byte	-86
  91 0036 AA       		.byte	-86
  92 0037 AA       		.byte	-86
  93 0038 AA       		.byte	-86
  94 0039 AA       		.byte	-86
  95 003a AA       		.byte	-86
  96 003b AA       		.byte	-86
  97 003c AA       		.byte	-86
  98 003d AA       		.byte	-86
  99 003e AA       		.byte	-86
 100 003f AA       		.byte	-86
 101              		.align	2
 104              	whitening:
 105 0040 01       		.byte	1
 106 0041 01       		.byte	1
 107 0042 01       		.byte	1
 108 0043 01       		.byte	1
 109 0044 00       		.byte	0
 110 0045 01       		.byte	1
 111 0046 00       		.byte	0
 112 0047 01       		.byte	1
 113 0048 00       		.byte	0
 114 0049 01       		.byte	1
 115 004a 00       		.byte	0
 116 004b 00       		.byte	0
 117 004c 00       		.byte	0
 118 004d 00       		.byte	0
 119 004e 01       		.byte	1
 120 004f 00       		.byte	0
 121 0050 01       		.byte	1
 122 0051 01       		.byte	1
 123 0052 00       		.byte	0
 124 0053 01       		.byte	1
ARM GAS  /tmp/ccfQkuUX.s 			page 3


 125 0054 01       		.byte	1
 126 0055 01       		.byte	1
 127 0056 01       		.byte	1
 128 0057 00       		.byte	0
 129 0058 00       		.byte	0
 130 0059 01       		.byte	1
 131 005a 01       		.byte	1
 132 005b 01       		.byte	1
 133 005c 00       		.byte	0
 134 005d 00       		.byte	0
 135 005e 01       		.byte	1
 136 005f 00       		.byte	0
 137 0060 01       		.byte	1
 138 0061 00       		.byte	0
 139 0062 01       		.byte	1
 140 0063 01       		.byte	1
 141 0064 00       		.byte	0
 142 0065 00       		.byte	0
 143 0066 01       		.byte	1
 144 0067 01       		.byte	1
 145 0068 00       		.byte	0
 146 0069 00       		.byte	0
 147 006a 00       		.byte	0
 148 006b 00       		.byte	0
 149 006c 00       		.byte	0
 150 006d 01       		.byte	1
 151 006e 01       		.byte	1
 152 006f 00       		.byte	0
 153 0070 01       		.byte	1
 154 0071 01       		.byte	1
 155 0072 00       		.byte	0
 156 0073 01       		.byte	1
 157 0074 00       		.byte	0
 158 0075 01       		.byte	1
 159 0076 01       		.byte	1
 160 0077 01       		.byte	1
 161 0078 00       		.byte	0
 162 0079 01       		.byte	1
 163 007a 00       		.byte	0
 164 007b 00       		.byte	0
 165 007c 00       		.byte	0
 166 007d 01       		.byte	1
 167 007e 01       		.byte	1
 168 007f 00       		.byte	0
 169 0080 00       		.byte	0
 170 0081 01       		.byte	1
 171 0082 00       		.byte	0
 172 0083 00       		.byte	0
 173 0084 00       		.byte	0
 174 0085 01       		.byte	1
 175 0086 00       		.byte	0
 176 0087 00       		.byte	0
 177 0088 00       		.byte	0
 178 0089 00       		.byte	0
 179 008a 00       		.byte	0
 180 008b 00       		.byte	0
 181 008c 01       		.byte	1
ARM GAS  /tmp/ccfQkuUX.s 			page 4


 182 008d 00       		.byte	0
 183 008e 00       		.byte	0
 184 008f 01       		.byte	1
 185 0090 00       		.byte	0
 186 0091 00       		.byte	0
 187 0092 01       		.byte	1
 188 0093 01       		.byte	1
 189 0094 00       		.byte	0
 190 0095 01       		.byte	1
 191 0096 00       		.byte	0
 192 0097 00       		.byte	0
 193 0098 01       		.byte	1
 194 0099 01       		.byte	1
 195 009a 01       		.byte	1
 196 009b 01       		.byte	1
 197 009c 00       		.byte	0
 198 009d 01       		.byte	1
 199 009e 01       		.byte	1
 200 009f 01       		.byte	1
 201 00a0 00       		.byte	0
 202 00a1 00       		.byte	0
 203 00a2 00       		.byte	0
 204 00a3 00       		.byte	0
 205 00a4 01       		.byte	1
 206 00a5 01       		.byte	1
 207 00a6 01       		.byte	1
 208 00a7 01       		.byte	1
 209 00a8 01       		.byte	1
 210 00a9 01       		.byte	1
 211 00aa 01       		.byte	1
 212 00ab 00       		.byte	0
 213 00ac 00       		.byte	0
 214 00ad 00       		.byte	0
 215 00ae 01       		.byte	1
 216 00af 01       		.byte	1
 217 00b0 01       		.byte	1
 218 00b1 00       		.byte	0
 219 00b2 01       		.byte	1
 220 00b3 01       		.byte	1
 221 00b4 00       		.byte	0
 222 00b5 00       		.byte	0
 223 00b6 00       		.byte	0
 224 00b7 01       		.byte	1
 225 00b8 00       		.byte	0
 226 00b9 01       		.byte	1
 227 00ba 00       		.byte	0
 228 00bb 00       		.byte	0
 229 00bc 01       		.byte	1
 230 00bd 00       		.byte	0
 231 00be 01       		.byte	1
 232 00bf 00       		.align	2
 235              	whitening_index:
 236 00c0 46       		.byte	70
 237 00c1 3E       		.byte	62
 238 00c2 78       		.byte	120
 239 00c3 6F       		.byte	111
 240 00c4 4D       		.byte	77
ARM GAS  /tmp/ccfQkuUX.s 			page 5


 241 00c5 2E       		.byte	46
 242 00c6 0F       		.byte	15
 243 00c7 65       		.byte	101
 244 00c8 42       		.byte	66
 245 00c9 27       		.byte	39
 246 00ca 1F       		.byte	31
 247 00cb 1A       		.byte	26
 248 00cc 50       		.byte	80
 249 00cd 53       		.byte	83
 250 00ce 7D       		.byte	125
 251 00cf 59       		.byte	89
 252 00d0 0A       		.byte	10
 253 00d1 23       		.byte	35
 254 00d2 08       		.byte	8
 255 00d3 36       		.byte	54
 256 00d4 7A       		.byte	122
 257 00d5 11       		.byte	17
 258 00d6 21       		.byte	33
 259 00d7 00       		.byte	0
 260 00d8 3A       		.byte	58
 261 00d9 73       		.byte	115
 262 00da 06       		.byte	6
 263 00db 5E       		.byte	94
 264 00dc 56       		.byte	86
 265 00dd 31       		.byte	49
 266 00de 34       		.byte	52
 267 00df 14       		.byte	20
 268 00e0 28       		.byte	40
 269 00e1 1B       		.byte	27
 270 00e2 54       		.byte	84
 271 00e3 5A       		.byte	90
 272 00e4 3F       		.byte	63
 273 00e5 70       		.byte	112
 274 00e6 2F       		.byte	47
 275 00e7 66       		.byte	102
 276              		.align	2
 279              	hop_interval_lut:
 280 00e8 00       		.byte	0
 281 00e9 01       		.byte	1
 282 00ea 13       		.byte	19
 283 00eb 19       		.byte	25
 284 00ec 1C       		.byte	28
 285 00ed 0F       		.byte	15
 286 00ee 1F       		.byte	31
 287 00ef 10       		.byte	16
 288 00f0 0E       		.byte	14
 289 00f1 21       		.byte	33
 290 00f2 1A       		.byte	26
 291 00f3 1B       		.byte	27
 292 00f4 22       		.byte	34
 293 00f5 14       		.byte	20
 294 00f6 08       		.byte	8
 295 00f7 05       		.byte	5
 296 00f8 07       		.byte	7
 297 00f9 18       		.byte	24
 298 00fa 23       		.byte	35
 299 00fb 02       		.byte	2
ARM GAS  /tmp/ccfQkuUX.s 			page 6


 300 00fc 0D       		.byte	13
 301 00fd 1E       		.byte	30
 302 00fe 20       		.byte	32
 303 00ff 1D       		.byte	29
 304 0100 11       		.byte	17
 305 0101 03       		.byte	3
 306 0102 0A       		.byte	10
 307 0103 0B       		.byte	11
 308 0104 04       		.byte	4
 309 0105 17       		.byte	23
 310 0106 15       		.byte	21
 311 0107 06       		.byte	6
 312 0108 16       		.byte	22
 313 0109 09       		.byte	9
 314 010a 0C       		.byte	12
 315 010b 12       		.byte	18
 316 010c 24       		.byte	36
 317 010d 000000   		.align	2
 320              	whitening_word:
 321 0110 40B2BCC3 		.word	-1011043776
 322 0114 1F374A5F 		.word	1598699295
 323 0118 85F69C9A 		.word	-1700989307
 324 011c C1D6C544 		.word	1153816257
 325 0120 2059DEE1 		.word	-505521888
 326 0124 8F1BA5AF 		.word	-1348134001
 327 0128 427B4ECD 		.word	-850494654
 328 012c 60EB6222 		.word	576908128
 329 0130 902CEFF0 		.word	-252760944
 330 0134 C78DD257 		.word	1473416647
 331 0138 A13DA766 		.word	1722236321
 332 013c B0753111 		.word	288454064
 333 0140 8940B2BC 		.word	-1129168759
 334 0144 C31F374A 		.word	1245126595
 335 0148 5F85F69C 		.word	-1661565601
 336 014c 9AC1D6C5 		.word	-975781478
 337 0150 442059DE 		.word	-564584380
 338 0154 E18F1BA5 		.word	-1524920351
 339 0158 AF427B4E 		.word	1316700847
 340 015c CD60EB62 		.word	1659592909
 341 0160 22902CEF 		.word	-282292190
 342 0164 F0C78DD2 		.word	-762460176
 343 0168 57A13DA7 		.word	-1489133225
 344 016c 66B07531 		.word	829796454
 345 0170 D257A13D 		.word	1033983954
 346 0174 A766B075 		.word	1974494887
 347 0178 31114896 		.word	-1773661903
 348 017c 77F8E346 		.word	1189345399
 349 0180 E9ABD09E 		.word	-1630491671
 350 0184 5333D8BA 		.word	-1160236205
 351 0188 980824CB 		.word	-886830952
 352 018c 3BFC71A3 		.word	-1552810949
 353 0190 F45568CF 		.word	-815245836
 354 0194 A9196C5D 		.word	1567365545
 355 0198 4C0492E5 		.word	-443415476
 356 019c 1DFEB851 		.word	1371078173
 357 01a0 1BA5AF42 		.word	1118807323
 358 01a4 7B4ECD60 		.word	1624067707
ARM GAS  /tmp/ccfQkuUX.s 			page 7


 359 01a8 EB622290 		.word	-1876794645
 360 01ac 2CEFF0C7 		.word	-940511444
 361 01b0 8DD257A1 		.word	-1588079987
 362 01b4 3DA766B0 		.word	-1335449795
 363 01b8 75311148 		.word	1209086325
 364 01bc 9677F8E3 		.word	-470255722
 365 01c0 46E9ABD0 		.word	-794039994
 366 01c4 9E5333D8 		.word	-667724898
 367 01c8 BA980824 		.word	604543162
 368 01cc CB3BFC71 		.word	1912355787
 369 01d0 6479873F 		.word	1065843044
 370 01d4 6E94BE0A 		.word	180261998
 371 01d8 ED393583 		.word	-2093663763
 372 01dc AD8B8940 		.word	1082756013
 373 01e0 B2BCC31F 		.word	532921522
 374 01e4 374A5F85 		.word	-2057352649
 375 01e8 F69C9AC1 		.word	-1046831882
 376 01ec D6C54420 		.word	541378006
 377 01f0 59DEE18F 		.word	-1881022887
 378 01f4 1BA5AF42 		.word	1118807323
 379 01f8 7B4ECD60 		.word	1624067707
 380 01fc EB622290 		.word	-1876794645
 381 0200 AD8B8940 		.word	1082756013
 382 0204 B2BCC31F 		.word	532921522
 383 0208 374A5F85 		.word	-2057352649
 384 020c F69C9AC1 		.word	-1046831882
 385 0210 D6C54420 		.word	541378006
 386 0214 59DEE18F 		.word	-1881022887
 387 0218 1BA5AF42 		.word	1118807323
 388 021c 7B4ECD60 		.word	1624067707
 389 0220 EB622290 		.word	-1876794645
 390 0224 2CEFF0C7 		.word	-940511444
 391 0228 8DD257A1 		.word	-1588079987
 392 022c 3DA766B0 		.word	-1335449795
 393 0230 F69C9AC1 		.word	-1046831882
 394 0234 D6C54420 		.word	541378006
 395 0238 59DEE18F 		.word	-1881022887
 396 023c 1BA5AF42 		.word	1118807323
 397 0240 7B4ECD60 		.word	1624067707
 398 0244 EB622290 		.word	-1876794645
 399 0248 2CEFF0C7 		.word	-940511444
 400 024c 8DD257A1 		.word	-1588079987
 401 0250 3DA766B0 		.word	-1335449795
 402 0254 75311148 		.word	1209086325
 403 0258 9677F8E3 		.word	-470255722
 404 025c 46E9ABD0 		.word	-794039994
 405 0260 3F6E94BE 		.word	-1097568705
 406 0264 0AED3935 		.word	892988682
 407 0268 83AD8B89 		.word	-1987334781
 408 026c 40B2BCC3 		.word	-1011043776
 409 0270 1F374A5F 		.word	1598699295
 410 0274 85F69C9A 		.word	-1700989307
 411 0278 C1D6C544 		.word	1153816257
 412 027c 2059DEE1 		.word	-505521888
 413 0280 8F1BA5AF 		.word	-1348134001
 414 0284 427B4ECD 		.word	-850494654
 415 0288 60EB6222 		.word	576908128
ARM GAS  /tmp/ccfQkuUX.s 			page 8


 416 028c 902CEFF0 		.word	-252760944
 417 0290 0824CB3B 		.word	1003168776
 418 0294 FC71A3F4 		.word	-190615044
 419 0298 5568CFA9 		.word	-1446025131
 420 029c 196C5D4C 		.word	1281190937
 421 02a0 0492E51D 		.word	501584388
 422 02a4 FEB851FA 		.word	-95307522
 423 02a8 2AB4E7D4 		.word	-723012566
 424 02ac 0CB62E26 		.word	640595468
 425 02b0 02C9F20E 		.word	250792194
 426 02b4 7FDC287D 		.word	2099829887
 427 02b8 15DA736A 		.word	1785977365
 428 02bc 065B1713 		.word	320297734
 429 02c0 C1D6C544 		.word	1153816257
 430 02c4 2059DEE1 		.word	-505521888
 431 02c8 8F1BA5AF 		.word	-1348134001
 432 02cc 427B4ECD 		.word	-850494654
 433 02d0 60EB6222 		.word	576908128
 434 02d4 902CEFF0 		.word	-252760944
 435 02d8 C78DD257 		.word	1473416647
 436 02dc A13DA766 		.word	1722236321
 437 02e0 B0753111 		.word	288454064
 438 02e4 489677F8 		.word	-126380472
 439 02e8 E346E9AB 		.word	-1410775325
 440 02ec D09E5333 		.word	861118160
 441 02f0 9AC1D6C5 		.word	-975781478
 442 02f4 442059DE 		.word	-564584380
 443 02f8 E18F1BA5 		.word	-1524920351
 444 02fc AF427B4E 		.word	1316700847
 445 0300 CD60EB62 		.word	1659592909
 446 0304 22902CEF 		.word	-282292190
 447 0308 F0C78DD2 		.word	-762460176
 448 030c 57A13DA7 		.word	-1489133225
 449 0310 66B07531 		.word	829796454
 450 0314 11489677 		.word	2006337553
 451 0318 F8E346E9 		.word	-381230088
 452 031c ABD09E53 		.word	1402917035
 453 0320 5333D8BA 		.word	-1160236205
 454 0324 980824CB 		.word	-886830952
 455 0328 3BFC71A3 		.word	-1552810949
 456 032c F45568CF 		.word	-815245836
 457 0330 A9196C5D 		.word	1567365545
 458 0334 4C0492E5 		.word	-443415476
 459 0338 1DFEB851 		.word	1371078173
 460 033c FA2AB4E7 		.word	-407622918
 461 0340 D40CB62E 		.word	783682772
 462 0344 2602C9F2 		.word	-221707738
 463 0348 0E7FDC28 		.word	685539086
 464 034c 7D15DA73 		.word	1943672189
 465 0350 2CEFF0C7 		.word	-940511444
 466 0354 8DD257A1 		.word	-1588079987
 467 0358 3DA766B0 		.word	-1335449795
 468 035c 75311148 		.word	1209086325
 469 0360 9677F8E3 		.word	-470255722
 470 0364 46E9ABD0 		.word	-794039994
 471 0368 9E5333D8 		.word	-667724898
 472 036c BA980824 		.word	604543162
ARM GAS  /tmp/ccfQkuUX.s 			page 9


 473 0370 CB3BFC71 		.word	1912355787
 474 0374 A3F45568 		.word	1750463651
 475 0378 CFA9196C 		.word	1813621199
 476 037c 5D4C0492 		.word	-1845212067
 477 0380 E51DFEB8 		.word	-1191305755
 478 0384 51FA2AB4 		.word	-1272251823
 479 0388 E7D40CB6 		.word	-1240673049
 480 038c 2E2602C9 		.word	-922606034
 481 0390 F20E7FDC 		.word	-595652878
 482 0394 287D15DA 		.word	-636125912
 483 0398 736A065B 		.word	1527147123
 484 039c 17138164 		.word	1686180631
 485 03a0 79873F6E 		.word	1849657209
 486 03a4 94BE0AED 		.word	-318062956
 487 03a8 393583AD 		.word	-1383910087
 488 03ac 8B8940B2 		.word	-1304393333
 489 03b0 BE0AED39 		.word	971836094
 490 03b4 3583AD8B 		.word	-1951562955
 491 03b8 8940B2BC 		.word	-1129168759
 492 03bc C31F374A 		.word	1245126595
 493 03c0 5F85F69C 		.word	-1661565601
 494 03c4 9AC1D6C5 		.word	-975781478
 495 03c8 442059DE 		.word	-564584380
 496 03cc E18F1BA5 		.word	-1524920351
 497 03d0 AF427B4E 		.word	1316700847
 498 03d4 CD60EB62 		.word	1659592909
 499 03d8 22902CEF 		.word	-282292190
 500 03dc F0C78DD2 		.word	-762460176
 501 03e0 77F8E346 		.word	1189345399
 502 03e4 E9ABD09E 		.word	-1630491671
 503 03e8 5333D8BA 		.word	-1160236205
 504 03ec 980824CB 		.word	-886830952
 505 03f0 3BFC71A3 		.word	-1552810949
 506 03f4 F45568CF 		.word	-815245836
 507 03f8 A9196C5D 		.word	1567365545
 508 03fc 4C0492E5 		.word	-443415476
 509 0400 1DFEB851 		.word	1371078173
 510 0404 FA2AB4E7 		.word	-407622918
 511 0408 D40CB62E 		.word	783682772
 512 040c 2602C9F2 		.word	-221707738
 513 0410 D09E5333 		.word	861118160
 514 0414 D8BA9808 		.word	144227032
 515 0418 24CB3BFC 		.word	-63190236
 516 041c 71A3F455 		.word	1442095985
 517 0420 68CFA919 		.word	430559080
 518 0424 6C5D4C04 		.word	72113516
 519 0428 92E51DFE 		.word	-31595118
 520 042c B851FA2A 		.word	721047992
 521 0430 B4E7D40C 		.word	215279540
 522 0434 B62E2602 		.word	36056758
 523 0438 C9F20E7F 		.word	2131686089
 524 043c DC287D15 		.word	360523996
 525 0440 196C5D4C 		.word	1281190937
 526 0444 0492E51D 		.word	501584388
 527 0448 FEB851FA 		.word	-95307522
 528 044c 2AB4E7D4 		.word	-723012566
 529 0450 0CB62E26 		.word	640595468
ARM GAS  /tmp/ccfQkuUX.s 			page 10


 530 0454 02C9F20E 		.word	250792194
 531 0458 7FDC287D 		.word	2099829887
 532 045c 15DA736A 		.word	1785977365
 533 0460 065B1713 		.word	320297734
 534 0464 81647987 		.word	-2022087551
 535 0468 3F6E94BE 		.word	-1097568705
 536 046c 0AED3935 		.word	892988682
 537 0470 427B4ECD 		.word	-850494654
 538 0474 60EB6222 		.word	576908128
 539 0478 902CEFF0 		.word	-252760944
 540 047c C78DD257 		.word	1473416647
 541 0480 A13DA766 		.word	1722236321
 542 0484 B0753111 		.word	288454064
 543 0488 489677F8 		.word	-126380472
 544 048c E346E9AB 		.word	-1410775325
 545 0490 D09E5333 		.word	861118160
 546 0494 D8BA9808 		.word	144227032
 547 0498 24CB3BFC 		.word	-63190236
 548 049c 71A3F455 		.word	1442095985
 549 04a0 8B8940B2 		.word	-1304393333
 550 04a4 BCC31F37 		.word	924828604
 551 04a8 4A5F85F6 		.word	-159031478
 552 04ac 9C9AC1D6 		.word	-691955044
 553 04b0 C5442059 		.word	1495286981
 554 04b4 DEE18F1B 		.word	462414302
 555 04b8 A5AF427B 		.word	2067967909
 556 04bc 4ECD60EB 		.word	-345977522
 557 04c0 6222902C 		.word	747643490
 558 04c4 EFF0C78D 		.word	-1916276497
 559 04c8 D257A13D 		.word	1033983954
 560 04cc A766B075 		.word	1974494887
 561 04d0 F45568CF 		.word	-815245836
 562 04d4 A9196C5D 		.word	1567365545
 563 04d8 4C0492E5 		.word	-443415476
 564 04dc 1DFEB851 		.word	1371078173
 565 04e0 FA2AB4E7 		.word	-407622918
 566 04e4 D40CB62E 		.word	783682772
 567 04e8 2602C9F2 		.word	-221707738
 568 04ec 0E7FDC28 		.word	685539086
 569 04f0 7D15DA73 		.word	1943672189
 570 04f4 6A065B17 		.word	391841386
 571 04f8 13816479 		.word	2036629779
 572 04fc 873F6E94 		.word	-1804714105
 573 0500 3DA766B0 		.word	-1335449795
 574 0504 75311148 		.word	1209086325
 575 0508 9677F8E3 		.word	-470255722
 576 050c 46E9ABD0 		.word	-794039994
 577 0510 9E5333D8 		.word	-667724898
 578 0514 BA980824 		.word	604543162
 579 0518 CB3BFC71 		.word	1912355787
 580 051c A3F45568 		.word	1750463651
 581 0520 CFA9196C 		.word	1813621199
 582 0524 5D4C0492 		.word	-1845212067
 583 0528 E51DFEB8 		.word	-1191305755
 584 052c 51FA2AB4 		.word	-1272251823
 585 0530 66B07531 		.word	829796454
 586 0534 11489677 		.word	2006337553
ARM GAS  /tmp/ccfQkuUX.s 			page 11


 587 0538 F8E346E9 		.word	-381230088
 588 053c ABD09E53 		.word	1402917035
 589 0540 33D8BA98 		.word	-1732585421
 590 0544 0824CB3B 		.word	1003168776
 591 0548 FC71A3F4 		.word	-190615044
 592 054c 5568CFA9 		.word	-1446025131
 593 0550 196C5D4C 		.word	1281190937
 594 0554 0492E51D 		.word	501584388
 595 0558 FEB851FA 		.word	-95307522
 596 055c 2AB4E7D4 		.word	-723012566
 597 0560 AF427B4E 		.word	1316700847
 598 0564 CD60EB62 		.word	1659592909
 599 0568 22902CEF 		.word	-282292190
 600 056c F0C78DD2 		.word	-762460176
 601 0570 57A13DA7 		.word	-1489133225
 602 0574 66B07531 		.word	829796454
 603 0578 11489677 		.word	2006337553
 604 057c F8E346E9 		.word	-381230088
 605 0580 ABD09E53 		.word	1402917035
 606 0584 33D8BA98 		.word	-1732585421
 607 0588 0824CB3B 		.word	1003168776
 608 058c FC71A3F4 		.word	-190615044
 609 0590 980824CB 		.word	-886830952
 610 0594 3BFC71A3 		.word	-1552810949
 611 0598 F45568CF 		.word	-815245836
 612 059c A9196C5D 		.word	1567365545
 613 05a0 4C0492E5 		.word	-443415476
 614 05a4 1DFEB851 		.word	1371078173
 615 05a8 FA2AB4E7 		.word	-407622918
 616 05ac D40CB62E 		.word	783682772
 617 05b0 2602C9F2 		.word	-221707738
 618 05b4 0E7FDC28 		.word	685539086
 619 05b8 7D15DA73 		.word	1943672189
 620 05bc 6A065B17 		.word	391841386
 621 05c0 51FA2AB4 		.word	-1272251823
 622 05c4 E7D40CB6 		.word	-1240673049
 623 05c8 2E2602C9 		.word	-922606034
 624 05cc F20E7FDC 		.word	-595652878
 625 05d0 287D15DA 		.word	-636125912
 626 05d4 736A065B 		.word	1527147123
 627 05d8 17138164 		.word	1686180631
 628 05dc 79873F6E 		.word	1849657209
 629 05e0 94BE0AED 		.word	-318062956
 630 05e4 393583AD 		.word	-1383910087
 631 05e8 8B8940B2 		.word	-1304393333
 632 05ec BCC31F37 		.word	924828604
 633 05f0 0AED3935 		.word	892988682
 634 05f4 83AD8B89 		.word	-1987334781
 635 05f8 40B2BCC3 		.word	-1011043776
 636 05fc 1F374A5F 		.word	1598699295
 637 0600 85F69C9A 		.word	-1700989307
 638 0604 C1D6C544 		.word	1153816257
 639 0608 2059DEE1 		.word	-505521888
 640 060c 8F1BA5AF 		.word	-1348134001
 641 0610 427B4ECD 		.word	-850494654
 642 0614 60EB6222 		.word	576908128
 643 0618 902CEFF0 		.word	-252760944
ARM GAS  /tmp/ccfQkuUX.s 			page 12


 644 061c C78DD257 		.word	1473416647
 645 0620 C31F374A 		.word	1245126595
 646 0624 5F85F69C 		.word	-1661565601
 647 0628 9AC1D6C5 		.word	-975781478
 648 062c 442059DE 		.word	-564584380
 649 0630 E18F1BA5 		.word	-1524920351
 650 0634 AF427B4E 		.word	1316700847
 651 0638 CD60EB62 		.word	1659592909
 652 063c 22902CEF 		.word	-282292190
 653 0640 F0C78DD2 		.word	-762460176
 654 0644 57A13DA7 		.word	-1489133225
 655 0648 66B07531 		.word	829796454
 656 064c 11489677 		.word	2006337553
 657 0650 BCC31F37 		.word	924828604
 658 0654 4A5F85F6 		.word	-159031478
 659 0658 9C9AC1D6 		.word	-691955044
 660 065c C5442059 		.word	1495286981
 661 0660 DEE18F1B 		.word	462414302
 662 0664 A5AF427B 		.word	2067967909
 663 0668 4ECD60EB 		.word	-345977522
 664 066c 6222902C 		.word	747643490
 665 0670 EFF0C78D 		.word	-1916276497
 666 0674 D257A13D 		.word	1033983954
 667 0678 A766B075 		.word	1974494887
 668 067c 31114896 		.word	-1773661903
 669 0680 75311148 		.word	1209086325
 670 0684 9677F8E3 		.word	-470255722
 671 0688 46E9ABD0 		.word	-794039994
 672 068c 9E5333D8 		.word	-667724898
 673 0690 BA980824 		.word	604543162
 674 0694 CB3BFC71 		.word	1912355787
 675 0698 A3F45568 		.word	1750463651
 676 069c CFA9196C 		.word	1813621199
 677 06a0 5D4C0492 		.word	-1845212067
 678 06a4 E51DFEB8 		.word	-1191305755
 679 06a8 51FA2AB4 		.word	-1272251823
 680 06ac E7D40CB6 		.word	-1240673049
 681 06b0 2E2602C9 		.word	-922606034
 682 06b4 F20E7FDC 		.word	-595652878
 683 06b8 287D15DA 		.word	-636125912
 684 06bc 736A065B 		.word	1527147123
 685 06c0 17138164 		.word	1686180631
 686 06c4 79873F6E 		.word	1849657209
 687 06c8 94BE0AED 		.word	-318062956
 688 06cc 393583AD 		.word	-1383910087
 689 06d0 8B8940B2 		.word	-1304393333
 690 06d4 BCC31F37 		.word	924828604
 691 06d8 4A5F85F6 		.word	-159031478
 692 06dc 9C9AC1D6 		.word	-691955044
 693 06e0 E7D40CB6 		.word	-1240673049
 694 06e4 2E2602C9 		.word	-922606034
 695 06e8 F20E7FDC 		.word	-595652878
 696 06ec 287D15DA 		.word	-636125912
 697 06f0 736A065B 		.word	1527147123
 698 06f4 17138164 		.word	1686180631
 699 06f8 79873F6E 		.word	1849657209
 700 06fc 94BE0AED 		.word	-318062956
ARM GAS  /tmp/ccfQkuUX.s 			page 13


 701 0700 393583AD 		.word	-1383910087
 702 0704 8B8940B2 		.word	-1304393333
 703 0708 BCC31F37 		.word	924828604
 704 070c 4A5F85F6 		.word	-159031478
 705 0710 60EB6222 		.word	576908128
 706 0714 902CEFF0 		.word	-252760944
 707 0718 C78DD257 		.word	1473416647
 708 071c A13DA766 		.word	1722236321
 709 0720 B0753111 		.word	288454064
 710 0724 489677F8 		.word	-126380472
 711 0728 E346E9AB 		.word	-1410775325
 712 072c D09E5333 		.word	861118160
 713 0730 D8BA9808 		.word	144227032
 714 0734 24CB3BFC 		.word	-63190236
 715 0738 71A3F455 		.word	1442095985
 716 073c 68CFA919 		.word	430559080
 717 0740 A9196C5D 		.word	1567365545
 718 0744 4C0492E5 		.word	-443415476
 719 0748 1DFEB851 		.word	1371078173
 720 074c FA2AB4E7 		.word	-407622918
 721 0750 D40CB62E 		.word	783682772
 722 0754 2602C9F2 		.word	-221707738
 723 0758 0E7FDC28 		.word	685539086
 724 075c 7D15DA73 		.word	1943672189
 725 0760 6A065B17 		.word	391841386
 726 0764 13816479 		.word	2036629779
 727 0768 873F6E94 		.word	-1804714105
 728 076c BE0AED39 		.word	971836094
 729 0770 F20E7FDC 		.word	-595652878
 730 0774 287D15DA 		.word	-636125912
 731 0778 736A065B 		.word	1527147123
 732 077c 17138164 		.word	1686180631
 733 0780 79873F6E 		.word	1849657209
 734 0784 94BE0AED 		.word	-318062956
 735 0788 393583AD 		.word	-1383910087
 736 078c 8B8940B2 		.word	-1304393333
 737 0790 BCC31F37 		.word	924828604
 738 0794 4A5F85F6 		.word	-159031478
 739 0798 9C9AC1D6 		.word	-691955044
 740 079c C5442059 		.word	1495286981
 741 07a0 3BFC71A3 		.word	-1552810949
 742 07a4 F45568CF 		.word	-815245836
 743 07a8 A9196C5D 		.word	1567365545
 744 07ac 4C0492E5 		.word	-443415476
 745 07b0 1DFEB851 		.word	1371078173
 746 07b4 FA2AB4E7 		.word	-407622918
 747 07b8 D40CB62E 		.word	783682772
 748 07bc 2602C9F2 		.word	-221707738
 749 07c0 0E7FDC28 		.word	685539086
 750 07c4 7D15DA73 		.word	1943672189
 751 07c8 6A065B17 		.word	391841386
 752 07cc 13816479 		.word	2036629779
 753 07d0 442059DE 		.word	-564584380
 754 07d4 E18F1BA5 		.word	-1524920351
 755 07d8 AF427B4E 		.word	1316700847
 756 07dc CD60EB62 		.word	1659592909
 757 07e0 22902CEF 		.word	-282292190
ARM GAS  /tmp/ccfQkuUX.s 			page 14


 758 07e4 F0C78DD2 		.word	-762460176
 759 07e8 57A13DA7 		.word	-1489133225
 760 07ec 66B07531 		.word	829796454
 761 07f0 11489677 		.word	2006337553
 762 07f4 F8E346E9 		.word	-381230088
 763 07f8 ABD09E53 		.word	1402917035
 764 07fc 33D8BA98 		.word	-1732585421
 765 0800 8DD257A1 		.word	-1588079987
 766 0804 3DA766B0 		.word	-1335449795
 767 0808 75311148 		.word	1209086325
 768 080c 9677F8E3 		.word	-470255722
 769 0810 46E9ABD0 		.word	-794039994
 770 0814 9E5333D8 		.word	-667724898
 771 0818 BA980824 		.word	604543162
 772 081c CB3BFC71 		.word	1912355787
 773 0820 A3F45568 		.word	1750463651
 774 0824 CFA9196C 		.word	1813621199
 775 0828 5D4C0492 		.word	-1845212067
 776 082c E51DFEB8 		.word	-1191305755
 777 0830 D6C54420 		.word	541378006
 778 0834 59DEE18F 		.word	-1881022887
 779 0838 1BA5AF42 		.word	1118807323
 780 083c 7B4ECD60 		.word	1624067707
 781 0840 EB622290 		.word	-1876794645
 782 0844 2CEFF0C7 		.word	-940511444
 783 0848 8DD257A1 		.word	-1588079987
 784 084c 3DA766B0 		.word	-1335449795
 785 0850 75311148 		.word	1209086325
 786 0854 9677F8E3 		.word	-470255722
 787 0858 46E9ABD0 		.word	-794039994
 788 085c 9E5333D8 		.word	-667724898
 789 0860 1F374A5F 		.word	1598699295
 790 0864 85F69C9A 		.word	-1700989307
 791 0868 C1D6C544 		.word	1153816257
 792 086c 2059DEE1 		.word	-505521888
 793 0870 8F1BA5AF 		.word	-1348134001
 794 0874 427B4ECD 		.word	-850494654
 795 0878 60EB6222 		.word	576908128
 796 087c 902CEFF0 		.word	-252760944
 797 0880 C78DD257 		.word	1473416647
 798 0884 A13DA766 		.word	1722236321
 799 0888 B0753111 		.word	288454064
 800 088c 489677F8 		.word	-126380472
 801              		.comm	rr,5,4
 802              		.global	compile_info
 803              		.align	2
 806              	compile_info:
 807 0890 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Tue Nov  8 14:5"
 807      746F6F74 
 807      68203230 
 807      31352D31 
 807      302D5231 
 808 08c3 383A3437 		.ascii	"8:47 KST 2016\000"
 808      204B5354 
 808      20323031 
 808      3600
 809              		.comm	device_index,1,1
ARM GAS  /tmp/ccfQkuUX.s 			page 15


 810              		.comm	first_ts,4,4
 811              		.comm	second_ts,4,4
 812              		.comm	diff_ts,4,4
 813              		.comm	rssi_avg,1,1
 814              		.comm	freq_avg,1,1
 815              		.comm	clkn_freq,4,4
 816              		.comm	clkn_legacy,4,4
 817              		.comm	clkn_proposed,4,4
 818              		.comm	clkn,4,4
 819              		.global	hop_mode
 820              		.bss
 823              	hop_mode:
 824 0000 00       		.space	1
 825              		.global	do_hop
 828              	do_hop:
 829 0001 00       		.space	1
 830              		.global	cs_no_squelch
 833              	cs_no_squelch:
 834 0002 00       		.space	1
 835              		.global	cs_threshold_req
 836              		.data
 839              	cs_threshold_req:
 840 0004 88       		.byte	-120
 841              		.global	cs_threshold_cur
 844              	cs_threshold_cur:
 845 0005 88       		.byte	-120
 846              		.comm	cs_trigger,1,1
 847              		.comm	keepalive_trigger,1,1
 848              		.comm	cs_timestamp,4,4
 849              		.global	hop_direct_channel
 850              		.bss
 851 0003 00       		.align	1
 854              	hop_direct_channel:
 855 0004 0000     		.space	2
 856              		.global	clock_trim
 857 0006 0000     		.align	2
 860              	clock_trim:
 861 0008 00000000 		.space	4
 862              		.comm	idle_buf_clkn_high,4,4
 863              		.comm	active_buf_clkn_high,4,4
 864              		.comm	idle_buf_clk100ns,4,4
 865              		.comm	active_buf_clk100ns,4,4
 866              		.global	idle_buf_channel
 867              		.align	1
 870              	idle_buf_channel:
 871 000c 0000     		.space	2
 872              		.global	active_buf_channel
 873              		.align	1
 876              	active_buf_channel:
 877 000e 0000     		.space	2
 878              		.global	slave_mac_address
 879              		.align	2
 882              	slave_mac_address:
 883 0010 00000000 		.space	6
 883      0000
 884              		.comm	rxbuf1,50,4
 885              		.comm	rxbuf2,50,4
ARM GAS  /tmp/ccfQkuUX.s 			page 16


 886              		.global	active_rxbuf
 887              		.data
 888 0006 0000     		.align	2
 891              	active_rxbuf:
 892 0008 00000000 		.word	rxbuf1
 893              		.global	idle_rxbuf
 894              		.align	2
 897              	idle_rxbuf:
 898 000c 00000000 		.word	rxbuf2
 899              		.global	le
 900              		.align	2
 903              	le:
 904 0010 D6BE898E 		.word	-1903575338
 905 0014 7D6B     		.short	27517
 906 0016 7191     		.short	-28303
 907 0018 55555500 		.word	5592405
 908 001c AAAAAA00 		.word	11184810
 909 0020 01000000 		.word	1
 910 0024 00       		.byte	0
 911 0025 000000   		.space	3
 912 0028 00000000 		.word	0
 913 002c 00000000 		.space	32
 913      00000000 
 913      00000000 
 913      00000000 
 913      00000000 
 914 004c 00000000 		.word	0
 915 0050 00000000 		.word	0
 916              		.comm	le_promisc,264,4
 917              		.global	le_jam_count
 918              		.bss
 919 0016 0000     		.align	2
 922              	le_jam_count:
 923 0018 00000000 		.space	4
 924              		.global	data_cb
 925              		.align	2
 928              	data_cb:
 929 001c 00000000 		.space	4
 930              		.global	packet_cb
 931              		.align	2
 934              	packet_cb:
 935 0020 00000000 		.space	4
 936              		.global	rssi_iir
 937              		.align	2
 940              	rssi_iir:
 941 0024 00000000 		.space	158
 941      00000000 
 941      00000000 
 941      00000000 
 941      00000000 
 942              		.comm	unpacked,800,4
 943              		.global	mode
 946              	mode:
 947 00c2 00       		.space	1
 948              		.global	requested_mode
 951              	requested_mode:
 952 00c3 00       		.space	1
ARM GAS  /tmp/ccfQkuUX.s 			page 17


 953              		.global	jam_mode
 956              	jam_mode:
 957 00c4 00       		.space	1
 958              		.global	ego_mode
 961              	ego_mode:
 962 00c5 00       		.space	1
 963              		.global	modulation
 966              	modulation:
 967 00c6 00       		.space	1
 968              		.global	channel
 969              		.data
 970              		.align	1
 973              	channel:
 974 0054 6209     		.short	2402
 975              		.global	requested_channel
 976              		.bss
 977 00c7 00       		.align	1
 980              	requested_channel:
 981 00c8 0000     		.space	2
 982              		.global	saved_request
 983              		.align	1
 986              	saved_request:
 987 00ca 0000     		.space	2
 988              		.global	low_freq
 989              		.data
 990              		.align	1
 993              	low_freq:
 994 0056 6009     		.short	2400
 995              		.global	high_freq
 996              		.align	1
 999              	high_freq:
 1000 0058 B309     		.short	2483
 1001              		.global	rssi_threshold
 1004              	rssi_threshold:
 1005 005a E2       		.byte	-30
 1006              		.comm	rx_dma_lli1,16,4
 1007              		.comm	rx_dma_lli2,16,4
 1008              		.comm	le_dma_lli,176,4
 1009              		.comm	rx_tc,4,4
 1010              		.comm	rx_err,4,4
 1011              		.global	status
 1012              		.bss
 1015              	status:
 1016 00cc 00       		.space	1
 1017              		.comm	rssi_max,1,1
 1018              		.comm	rssi_min,1,1
 1019              		.global	rssi_count
 1022              	rssi_count:
 1023 00cd 00       		.space	1
 1024              		.global	rssi_sum
 1025 00ce 0000     		.align	2
 1028              	rssi_sum:
 1029 00d0 00000000 		.space	4
 1030              		.section	.text.rssi_reset,"ax",%progbits
 1031              		.align	2
 1032              		.thumb
 1033              		.thumb_func
ARM GAS  /tmp/ccfQkuUX.s 			page 18


 1035              	rssi_reset:
 1036              	.LFB0:
 1037              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** 
   2:bluetooth_rxtx.c **** /*
   3:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   4:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   5:bluetooth_rxtx.c ****  *
   6:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   7:bluetooth_rxtx.c ****  *
   8:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   9:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
  10:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  11:bluetooth_rxtx.c ****  * any later version.
  12:bluetooth_rxtx.c ****  *
  13:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  14:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  15:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  16:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  17:bluetooth_rxtx.c ****  *
  18:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  19:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  20:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  21:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  22:bluetooth_rxtx.c ****  */
  23:bluetooth_rxtx.c **** 
  24:bluetooth_rxtx.c **** #include <string.h>
  25:bluetooth_rxtx.c **** 
  26:bluetooth_rxtx.c **** #include "ubertooth.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  28:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  29:bluetooth_rxtx.c **** #include "bluetooth.h"
  30:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  31:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  32:bluetooth_rxtx.c **** #include "ego.h"
  33:bluetooth_rxtx.c **** 
  34:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  35:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  36:bluetooth_rxtx.c **** 
  37:bluetooth_rxtx.c **** /* build info */
  38:bluetooth_rxtx.c **** const char compile_info[] =
  39:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  40:bluetooth_rxtx.c **** 
  41:bluetooth_rxtx.c **** /*
  42:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  43:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  44:bluetooth_rxtx.c ****  *
  45:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  46:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  47:bluetooth_rxtx.c ****  * slot.
  48:bluetooth_rxtx.c ****  */
  49:bluetooth_rxtx.c **** 
  50:bluetooth_rxtx.c **** u8 device_index;
  51:bluetooth_rxtx.c **** u32 first_ts, second_ts, diff_ts;
  52:bluetooth_rxtx.c **** uint8_t rssi_avg;
  53:bluetooth_rxtx.c **** uint8_t freq_avg;
  54:bluetooth_rxtx.c **** uint32_t clkn_freq;
ARM GAS  /tmp/ccfQkuUX.s 			page 19


  55:bluetooth_rxtx.c **** uint32_t clkn_legacy;
  56:bluetooth_rxtx.c **** uint32_t clkn_proposed;
  57:bluetooth_rxtx.c **** 
  58:bluetooth_rxtx.c **** 
  59:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  60:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  61:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  62:bluetooth_rxtx.c **** 
  63:bluetooth_rxtx.c **** #define HOP_NONE      0
  64:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  65:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  66:bluetooth_rxtx.c **** #define HOP_BTLE      3
  67:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  68:bluetooth_rxtx.c **** 
  69:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  70:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  71:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  72:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  73:bluetooth_rxtx.c **** 
  74:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  75:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  76:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  77:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  78:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  79:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  80:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  81:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  82:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  83:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  84:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  85:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  86:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  87:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  88:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  89:bluetooth_rxtx.c **** 
  90:bluetooth_rxtx.c **** /* DMA buffers */
  91:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  92:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  93:bluetooth_rxtx.c **** 
  94:bluetooth_rxtx.c **** /*
  95:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  96:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  97:bluetooth_rxtx.c ****  */
  98:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  99:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
 100:bluetooth_rxtx.c **** 
 101:bluetooth_rxtx.c **** le_state_t le = {
 102:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
 103:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
 104:bluetooth_rxtx.c **** 	.syncl = 0x9171,
 105:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
 106:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
 107:bluetooth_rxtx.c **** 	.crc_verify = 1,
 108:bluetooth_rxtx.c **** 
 109:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 110:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 111:bluetooth_rxtx.c **** 	.target_set = 0,
ARM GAS  /tmp/ccfQkuUX.s 			page 20


 112:bluetooth_rxtx.c **** 	.last_packet = 0,
 113:bluetooth_rxtx.c **** };
 114:bluetooth_rxtx.c **** 
 115:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 116:bluetooth_rxtx.c **** 	u32 aa;
 117:bluetooth_rxtx.c **** 	int count;
 118:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 119:bluetooth_rxtx.c **** 
 120:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 121:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 122:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 123:bluetooth_rxtx.c **** 
 124:bluetooth_rxtx.c **** 	// recovering hop interval
 125:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 126:bluetooth_rxtx.c **** 	int consec_intervals;
 127:bluetooth_rxtx.c **** } le_promisc_state_t;
 128:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 129:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 130:bluetooth_rxtx.c **** 
 131:bluetooth_rxtx.c **** /* LE jamming */
 132:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 133:bluetooth_rxtx.c **** int le_jam_count = 0;
 134:bluetooth_rxtx.c **** 
 135:bluetooth_rxtx.c **** /* set LE access address */
 136:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 137:bluetooth_rxtx.c **** 
 138:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 139:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 140:bluetooth_rxtx.c **** 
 141:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 142:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 143:bluetooth_rxtx.c **** 
 144:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 145:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 146:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 147:bluetooth_rxtx.c **** 
 148:bluetooth_rxtx.c **** /*
 149:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 150:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 151:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 152:bluetooth_rxtx.c **** */
 153:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 154:bluetooth_rxtx.c **** 
 155:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 156:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 157:bluetooth_rxtx.c **** 
 158:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 159:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 160:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 161:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 162:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 163:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 164:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 165:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 166:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 167:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 168:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
ARM GAS  /tmp/ccfQkuUX.s 			page 21


 169:bluetooth_rxtx.c **** 
 170:bluetooth_rxtx.c **** /* DMA linked list items */
 171:bluetooth_rxtx.c **** typedef struct {
 172:bluetooth_rxtx.c **** 	u32 src;
 173:bluetooth_rxtx.c **** 	u32 dest;
 174:bluetooth_rxtx.c **** 	u32 next_lli;
 175:bluetooth_rxtx.c **** 	u32 control;
 176:bluetooth_rxtx.c **** } dma_lli;
 177:bluetooth_rxtx.c **** 
 178:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 179:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 180:bluetooth_rxtx.c **** 
 181:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 182:bluetooth_rxtx.c **** 
 183:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 184:bluetooth_rxtx.c **** volatile u32 rx_tc;
 185:bluetooth_rxtx.c **** volatile u32 rx_err;
 186:bluetooth_rxtx.c **** 
 187:bluetooth_rxtx.c **** /* status information byte */
 188:bluetooth_rxtx.c **** volatile u8 status = 0;
 189:bluetooth_rxtx.c **** 
 190:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 191:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 192:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 193:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 194:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 195:bluetooth_rxtx.c **** 
 196:bluetooth_rxtx.c **** /*
 197:bluetooth_rxtx.c ****  * RSSI
 198:bluetooth_rxtx.c ****  */
 199:bluetooth_rxtx.c **** int8_t rssi_max;
 200:bluetooth_rxtx.c **** int8_t rssi_min;
 201:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 202:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 203:bluetooth_rxtx.c **** 
 204:bluetooth_rxtx.c **** static void rssi_reset(void)
 205:bluetooth_rxtx.c **** {
 1038              		.loc 1 205 0
 1039              		.cfi_startproc
 1040              		@ args = 0, pretend = 0, frame = 0
 1041              		@ frame_needed = 1, uses_anonymous_args = 0
 1042              		@ link register save eliminated.
 1043 0000 80B4     		push	{r7}
 1044              		.cfi_def_cfa_offset 4
 1045              		.cfi_offset 7, -4
 1046 0002 00AF     		add	r7, sp, #0
 1047              		.cfi_def_cfa_register 7
 206:bluetooth_rxtx.c **** 	rssi_count = 0;
 1048              		.loc 1 206 0
 1049 0004 074B     		ldr	r3, .L2
 1050 0006 0022     		movs	r2, #0
 1051 0008 1A70     		strb	r2, [r3]
 207:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1052              		.loc 1 207 0
 1053 000a 074B     		ldr	r3, .L2+4
 1054 000c 0022     		movs	r2, #0
 1055 000e 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 22


 208:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1056              		.loc 1 208 0
 1057 0010 064B     		ldr	r3, .L2+8
 1058 0012 8022     		movs	r2, #128
 1059 0014 1A70     		strb	r2, [r3]
 209:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1060              		.loc 1 209 0
 1061 0016 064B     		ldr	r3, .L2+12
 1062 0018 7F22     		movs	r2, #127
 1063 001a 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** }
 1064              		.loc 1 210 0
 1065 001c BD46     		mov	sp, r7
 1066              		.cfi_def_cfa_register 13
 1067              		@ sp needed
 1068 001e 5DF8047B 		ldr	r7, [sp], #4
 1069              		.cfi_restore 7
 1070              		.cfi_def_cfa_offset 0
 1071 0022 7047     		bx	lr
 1072              	.L3:
 1073              		.align	2
 1074              	.L2:
 1075 0024 00000000 		.word	rssi_count
 1076 0028 00000000 		.word	rssi_sum
 1077 002c 00000000 		.word	rssi_max
 1078 0030 00000000 		.word	rssi_min
 1079              		.cfi_endproc
 1080              	.LFE0:
 1082              		.section	.text.rssi_add,"ax",%progbits
 1083              		.align	2
 1084              		.thumb
 1085              		.thumb_func
 1087              	rssi_add:
 1088              	.LFB1:
 211:bluetooth_rxtx.c **** 
 212:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 213:bluetooth_rxtx.c **** {
 1089              		.loc 1 213 0
 1090              		.cfi_startproc
 1091              		@ args = 0, pretend = 0, frame = 8
 1092              		@ frame_needed = 1, uses_anonymous_args = 0
 1093              		@ link register save eliminated.
 1094 0000 80B4     		push	{r7}
 1095              		.cfi_def_cfa_offset 4
 1096              		.cfi_offset 7, -4
 1097 0002 83B0     		sub	sp, sp, #12
 1098              		.cfi_def_cfa_offset 16
 1099 0004 00AF     		add	r7, sp, #0
 1100              		.cfi_def_cfa_register 7
 1101 0006 0346     		mov	r3, r0
 1102 0008 FB71     		strb	r3, [r7, #7]
 214:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1103              		.loc 1 214 0
 1104 000a 144B     		ldr	r3, .L5
 1105 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1106 000e 5AB2     		sxtb	r2, r3
 1107 0010 97F90730 		ldrsb	r3, [r7, #7]
ARM GAS  /tmp/ccfQkuUX.s 			page 23


 1108 0014 9342     		cmp	r3, r2
 1109 0016 B8BF     		it	lt
 1110 0018 1346     		movlt	r3, r2
 1111 001a DAB2     		uxtb	r2, r3
 1112 001c 0F4B     		ldr	r3, .L5
 1113 001e 1A70     		strb	r2, [r3]
 215:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1114              		.loc 1 215 0
 1115 0020 0F4B     		ldr	r3, .L5+4
 1116 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1117 0024 5AB2     		sxtb	r2, r3
 1118 0026 97F90730 		ldrsb	r3, [r7, #7]
 1119 002a 9342     		cmp	r3, r2
 1120 002c A8BF     		it	ge
 1121 002e 1346     		movge	r3, r2
 1122 0030 DAB2     		uxtb	r2, r3
 1123 0032 0B4B     		ldr	r3, .L5+4
 1124 0034 1A70     		strb	r2, [r3]
 216:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1125              		.loc 1 216 0
 1126 0036 97F90730 		ldrsb	r3, [r7, #7]
 1127 003a 1A02     		lsls	r2, r3, #8
 1128 003c 094B     		ldr	r3, .L5+8
 1129 003e 1B68     		ldr	r3, [r3]
 1130 0040 1344     		add	r3, r3, r2
 1131 0042 084A     		ldr	r2, .L5+8
 1132 0044 1360     		str	r3, [r2]
 217:bluetooth_rxtx.c **** 	rssi_count += 1;
 1133              		.loc 1 217 0
 1134 0046 084B     		ldr	r3, .L5+12
 1135 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1136 004a 0133     		adds	r3, r3, #1
 1137 004c DAB2     		uxtb	r2, r3
 1138 004e 064B     		ldr	r3, .L5+12
 1139 0050 1A70     		strb	r2, [r3]
 218:bluetooth_rxtx.c **** }
 1140              		.loc 1 218 0
 1141 0052 0C37     		adds	r7, r7, #12
 1142              		.cfi_def_cfa_offset 4
 1143 0054 BD46     		mov	sp, r7
 1144              		.cfi_def_cfa_register 13
 1145              		@ sp needed
 1146 0056 5DF8047B 		ldr	r7, [sp], #4
 1147              		.cfi_restore 7
 1148              		.cfi_def_cfa_offset 0
 1149 005a 7047     		bx	lr
 1150              	.L6:
 1151              		.align	2
 1152              	.L5:
 1153 005c 00000000 		.word	rssi_max
 1154 0060 00000000 		.word	rssi_min
 1155 0064 00000000 		.word	rssi_sum
 1156 0068 00000000 		.word	rssi_count
 1157              		.cfi_endproc
 1158              	.LFE1:
 1160              		.section	.text.rssi_iir_update,"ax",%progbits
 1161              		.align	2
ARM GAS  /tmp/ccfQkuUX.s 			page 24


 1162              		.thumb
 1163              		.thumb_func
 1165              	rssi_iir_update:
 1166              	.LFB2:
 219:bluetooth_rxtx.c **** 
 220:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 221:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 222:bluetooth_rxtx.c **** {
 1167              		.loc 1 222 0
 1168              		.cfi_startproc
 1169              		@ args = 0, pretend = 0, frame = 16
 1170              		@ frame_needed = 1, uses_anonymous_args = 0
 1171              		@ link register save eliminated.
 1172 0000 80B4     		push	{r7}
 1173              		.cfi_def_cfa_offset 4
 1174              		.cfi_offset 7, -4
 1175 0002 85B0     		sub	sp, sp, #20
 1176              		.cfi_def_cfa_offset 24
 1177 0004 00AF     		add	r7, sp, #0
 1178              		.cfi_def_cfa_register 7
 223:bluetooth_rxtx.c **** 	int i;
 224:bluetooth_rxtx.c **** 	int32_t avg;
 225:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 226:bluetooth_rxtx.c **** 
 227:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 228:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 229:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1179              		.loc 1 229 0
 1180 0006 1F4B     		ldr	r3, .L13
 1181 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1182 000a 002B     		cmp	r3, #0
 1183 000c 06D0     		beq	.L8
 230:bluetooth_rxtx.c **** 		i = channel - 2402;
 1184              		.loc 1 230 0
 1185 000e 1E4B     		ldr	r3, .L13+4
 1186 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1187 0012 9BB2     		uxth	r3, r3
 1188 0014 A3F66213 		subw	r3, r3, #2402
 1189 0018 FB60     		str	r3, [r7, #12]
 1190 001a 01E0     		b	.L9
 1191              	.L8:
 231:bluetooth_rxtx.c **** 	else
 232:bluetooth_rxtx.c **** 		i = 0;
 1192              		.loc 1 232 0
 1193 001c 0023     		movs	r3, #0
 1194 001e FB60     		str	r3, [r7, #12]
 1195              	.L9:
 233:bluetooth_rxtx.c **** 
 234:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 235:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1196              		.loc 1 235 0
 1197 0020 1A4B     		ldr	r3, .L13+8
 1198 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1199 0024 002B     		cmp	r3, #0
 1200 0026 08D0     		beq	.L10
 236:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1201              		.loc 1 236 0
ARM GAS  /tmp/ccfQkuUX.s 			page 25


 1202 0028 194B     		ldr	r3, .L13+12
 1203 002a 1B68     		ldr	r3, [r3]
 1204 002c 8033     		adds	r3, r3, #128
 1205 002e 174A     		ldr	r2, .L13+8
 1206 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1207 0032 93FBF2F3 		sdiv	r3, r3, r2
 1208 0036 BB60     		str	r3, [r7, #8]
 1209 0038 01E0     		b	.L11
 1210              	.L10:
 237:bluetooth_rxtx.c **** 	else
 238:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1211              		.loc 1 238 0
 1212 003a 0023     		movs	r3, #0
 1213 003c BB60     		str	r3, [r7, #8]
 1214              	.L11:
 239:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1215              		.loc 1 239 0
 1216 003e 154A     		ldr	r2, .L13+16
 1217 0040 FB68     		ldr	r3, [r7, #12]
 1218 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1219 0046 1AB2     		sxth	r2, r3
 1220 0048 1346     		mov	r3, r2
 1221 004a 9B01     		lsls	r3, r3, #6
 1222 004c 9B1A     		subs	r3, r3, r2
 1223 004e 9B00     		lsls	r3, r3, #2
 1224 0050 1344     		add	r3, r3, r2
 1225 0052 7B60     		str	r3, [r7, #4]
 240:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1226              		.loc 1 240 0
 1227 0054 BA68     		ldr	r2, [r7, #8]
 1228 0056 1346     		mov	r3, r2
 1229 0058 5B00     		lsls	r3, r3, #1
 1230 005a 1344     		add	r3, r3, r2
 1231 005c 7A68     		ldr	r2, [r7, #4]
 1232 005e 1344     		add	r3, r3, r2
 1233 0060 7B60     		str	r3, [r7, #4]
 241:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1234              		.loc 1 241 0
 1235 0062 7B68     		ldr	r3, [r7, #4]
 1236 0064 8033     		adds	r3, r3, #128
 1237 0066 002B     		cmp	r3, #0
 1238 0068 00DA     		bge	.L12
 1239 006a FF33     		adds	r3, r3, #255
 1240              	.L12:
 1241 006c 1B12     		asrs	r3, r3, #8
 1242 006e 99B2     		uxth	r1, r3
 1243 0070 084A     		ldr	r2, .L13+16
 1244 0072 FB68     		ldr	r3, [r7, #12]
 1245 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 242:bluetooth_rxtx.c **** }
 1246              		.loc 1 242 0
 1247 0078 1437     		adds	r7, r7, #20
 1248              		.cfi_def_cfa_offset 4
 1249 007a BD46     		mov	sp, r7
 1250              		.cfi_def_cfa_register 13
 1251              		@ sp needed
 1252 007c 5DF8047B 		ldr	r7, [sp], #4
ARM GAS  /tmp/ccfQkuUX.s 			page 26


 1253              		.cfi_restore 7
 1254              		.cfi_def_cfa_offset 0
 1255 0080 7047     		bx	lr
 1256              	.L14:
 1257 0082 00BF     		.align	2
 1258              	.L13:
 1259 0084 00000000 		.word	hop_mode
 1260 0088 00000000 		.word	channel
 1261 008c 00000000 		.word	rssi_count
 1262 0090 00000000 		.word	rssi_sum
 1263 0094 00000000 		.word	rssi_iir
 1264              		.cfi_endproc
 1265              	.LFE2:
 1267              		.section	.text.cs_threshold_set,"ax",%progbits
 1268              		.align	2
 1269              		.thumb
 1270              		.thumb_func
 1272              	cs_threshold_set:
 1273              	.LFB3:
 243:bluetooth_rxtx.c **** 
 244:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 245:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 246:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 247:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 248:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 249:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 250:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 251:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 252:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 253:bluetooth_rxtx.c **** {
 1274              		.loc 1 253 0
 1275              		.cfi_startproc
 1276              		@ args = 0, pretend = 0, frame = 8
 1277              		@ frame_needed = 1, uses_anonymous_args = 0
 1278 0000 80B5     		push	{r7, lr}
 1279              		.cfi_def_cfa_offset 8
 1280              		.cfi_offset 7, -8
 1281              		.cfi_offset 14, -4
 1282 0002 82B0     		sub	sp, sp, #8
 1283              		.cfi_def_cfa_offset 16
 1284 0004 00AF     		add	r7, sp, #0
 1285              		.cfi_def_cfa_register 7
 1286 0006 0346     		mov	r3, r0
 1287 0008 0A46     		mov	r2, r1
 1288 000a FB71     		strb	r3, [r7, #7]
 1289 000c 1346     		mov	r3, r2
 1290 000e BB71     		strb	r3, [r7, #6]
 254:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1291              		.loc 1 254 0
 1292 0010 97F90730 		ldrsb	r3, [r7, #7]
 1293 0014 13F1140F 		cmn	r3, #20
 1294 0018 0DD0     		beq	.L16
 1295              		.loc 1 254 0 is_stmt 0 discriminator 1
 1296 001a 97F90730 		ldrsb	r3, [r7, #7]
 1297 001e 13F1130F 		cmn	r3, #19
 1298 0022 08DA     		bge	.L16
 1299              		.loc 1 254 0 discriminator 3
ARM GAS  /tmp/ccfQkuUX.s 			page 27


 1300 0024 97F90730 		ldrsb	r3, [r7, #7]
 1301 0028 6FF07702 		mvn	r2, #119
 1302 002c 9342     		cmp	r3, r2
 1303 002e B8BF     		it	lt
 1304 0030 1346     		movlt	r3, r2
 1305 0032 DBB2     		uxtb	r3, r3
 1306 0034 00E0     		b	.L17
 1307              	.L16:
 1308              		.loc 1 254 0 discriminator 4
 1309 0036 EC23     		movs	r3, #236
 1310              	.L17:
 1311              		.loc 1 254 0 discriminator 6
 1312 0038 FB71     		strb	r3, [r7, #7]
 255:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1313              		.loc 1 255 0 is_stmt 1 discriminator 6
 1314 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1315 003c 3833     		adds	r3, r3, #56
 1316 003e DBB2     		uxtb	r3, r3
 1317 0040 9BB2     		uxth	r3, r3
 1318 0042 03F0FC03 		and	r3, r3, #252
 1319 0046 9AB2     		uxth	r2, r3
 1320 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1321 004a 9BB2     		uxth	r3, r3
 1322 004c 03F00303 		and	r3, r3, #3
 1323 0050 9BB2     		uxth	r3, r3
 1324 0052 1343     		orrs	r3, r3, r2
 1325 0054 9BB2     		uxth	r3, r3
 1326 0056 9BB2     		uxth	r3, r3
 1327 0058 0620     		movs	r0, #6
 1328 005a 1946     		mov	r1, r3
 1329 005c FFF7FEFF 		bl	cc2400_set
 256:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1330              		.loc 1 256 0 discriminator 6
 1331 0060 084A     		ldr	r2, .L18
 1332 0062 FB79     		ldrb	r3, [r7, #7]
 1333 0064 1370     		strb	r3, [r2]
 257:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1334              		.loc 1 257 0 discriminator 6
 1335 0066 97F90730 		ldrsb	r3, [r7, #7]
 1336 006a 13F1770F 		cmn	r3, #119
 1337 006e B4BF     		ite	lt
 1338 0070 0123     		movlt	r3, #1
 1339 0072 0023     		movge	r3, #0
 1340 0074 DBB2     		uxtb	r3, r3
 1341 0076 1A46     		mov	r2, r3
 1342 0078 034B     		ldr	r3, .L18+4
 1343 007a 1A70     		strb	r2, [r3]
 258:bluetooth_rxtx.c **** }
 1344              		.loc 1 258 0 discriminator 6
 1345 007c 0837     		adds	r7, r7, #8
 1346              		.cfi_def_cfa_offset 8
 1347 007e BD46     		mov	sp, r7
 1348              		.cfi_def_cfa_register 13
 1349              		@ sp needed
 1350 0080 80BD     		pop	{r7, pc}
 1351              	.L19:
 1352 0082 00BF     		.align	2
ARM GAS  /tmp/ccfQkuUX.s 			page 28


 1353              	.L18:
 1354 0084 00000000 		.word	cs_threshold_cur
 1355 0088 00000000 		.word	cs_no_squelch
 1356              		.cfi_endproc
 1357              	.LFE3:
 1359              		.section	.text.enqueue,"ax",%progbits
 1360              		.align	2
 1361              		.thumb
 1362              		.thumb_func
 1364              	enqueue:
 1365              	.LFB4:
 259:bluetooth_rxtx.c **** 
 260:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 261:bluetooth_rxtx.c **** {
 1366              		.loc 1 261 0
 1367              		.cfi_startproc
 1368              		@ args = 0, pretend = 0, frame = 32
 1369              		@ frame_needed = 1, uses_anonymous_args = 0
 1370 0000 80B5     		push	{r7, lr}
 1371              		.cfi_def_cfa_offset 8
 1372              		.cfi_offset 7, -8
 1373              		.cfi_offset 14, -4
 1374 0002 88B0     		sub	sp, sp, #32
 1375              		.cfi_def_cfa_offset 40
 1376 0004 00AF     		add	r7, sp, #0
 1377              		.cfi_def_cfa_register 7
 1378 0006 0346     		mov	r3, r0
 1379 0008 3960     		str	r1, [r7]
 1380 000a FB71     		strb	r3, [r7, #7]
 262:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1381              		.loc 1 262 0
 1382 000c FFF7FEFF 		bl	usb_enqueue
 1383 0010 F861     		str	r0, [r7, #28]
 263:bluetooth_rxtx.c **** 
 264:bluetooth_rxtx.c **** 	/* fail if queue is full */
 265:bluetooth_rxtx.c **** 	if (f == NULL) {
 1384              		.loc 1 265 0
 1385 0012 FB69     		ldr	r3, [r7, #28]
 1386 0014 002B     		cmp	r3, #0
 1387 0016 09D1     		bne	.L21
 266:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1388              		.loc 1 266 0
 1389 0018 524B     		ldr	r3, .L25
 1390 001a 1B78     		ldrb	r3, [r3]
 1391 001c DBB2     		uxtb	r3, r3
 1392 001e 43F00403 		orr	r3, r3, #4
 1393 0022 DAB2     		uxtb	r2, r3
 1394 0024 4F4B     		ldr	r3, .L25
 1395 0026 1A70     		strb	r2, [r3]
 267:bluetooth_rxtx.c **** 		return 0;
 1396              		.loc 1 267 0
 1397 0028 0023     		movs	r3, #0
 1398 002a 97E0     		b	.L22
 1399              	.L21:
 268:bluetooth_rxtx.c **** 	}
 269:bluetooth_rxtx.c **** 
 270:bluetooth_rxtx.c **** 	f->pkt_type = type;
ARM GAS  /tmp/ccfQkuUX.s 			page 29


 1400              		.loc 1 270 0
 1401 002c FB69     		ldr	r3, [r7, #28]
 1402 002e FA79     		ldrb	r2, [r7, #7]
 1403 0030 1A70     		strb	r2, [r3]
 271:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1404              		.loc 1 271 0
 1405 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1406 0034 042B     		cmp	r3, #4
 1407 0036 13D1     		bne	.L23
 272:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1408              		.loc 1 272 0
 1409 0038 4B4B     		ldr	r3, .L25+4
 1410 003a 1B68     		ldr	r3, [r3]
 1411 003c 1B0D     		lsrs	r3, r3, #20
 1412 003e DAB2     		uxtb	r2, r3
 1413 0040 FB69     		ldr	r3, [r7, #28]
 1414 0042 DA70     		strb	r2, [r3, #3]
 273:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1415              		.loc 1 273 0
 1416 0044 484B     		ldr	r3, .L25+4
 1417 0046 1B68     		ldr	r3, [r3]
 1418 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1419 004c 40F63542 		movw	r2, #3125
 1420 0050 02FB03F2 		mul	r2, r2, r3
 1421 0054 454B     		ldr	r3, .L25+8
 1422 0056 1B68     		ldr	r3, [r3]
 1423 0058 1A44     		add	r2, r2, r3
 1424 005a FB69     		ldr	r3, [r7, #28]
 1425 005c 5A60     		str	r2, [r3, #4]
 1426 005e 08E0     		b	.L24
 1427              	.L23:
 274:bluetooth_rxtx.c **** 	} else {
 275:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1428              		.loc 1 275 0
 1429 0060 434B     		ldr	r3, .L25+12
 1430 0062 1B68     		ldr	r3, [r3]
 1431 0064 DAB2     		uxtb	r2, r3
 1432 0066 FB69     		ldr	r3, [r7, #28]
 1433 0068 DA70     		strb	r2, [r3, #3]
 276:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1434              		.loc 1 276 0
 1435 006a 424B     		ldr	r3, .L25+16
 1436 006c 1A68     		ldr	r2, [r3]
 1437 006e FB69     		ldr	r3, [r7, #28]
 1438 0070 5A60     		str	r2, [r3, #4]
 1439              	.L24:
 277:bluetooth_rxtx.c **** 	}
 278:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1440              		.loc 1 278 0
 1441 0072 414B     		ldr	r3, .L25+20
 1442 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1443 0076 9BB2     		uxth	r3, r3
 1444 0078 DBB2     		uxtb	r3, r3
 1445 007a 623B     		subs	r3, r3, #98
 1446 007c DAB2     		uxtb	r2, r3
 1447 007e FB69     		ldr	r3, [r7, #28]
 1448 0080 9A70     		strb	r2, [r3, #2]
ARM GAS  /tmp/ccfQkuUX.s 			page 30


 279:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1449              		.loc 1 279 0
 1450 0082 3E4B     		ldr	r3, .L25+24
 1451 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1452 0086 DAB2     		uxtb	r2, r3
 1453 0088 FB69     		ldr	r3, [r7, #28]
 1454 008a 5A72     		strb	r2, [r3, #9]
 280:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
 1455              		.loc 1 280 0
 1456 008c 3C4B     		ldr	r3, .L25+28
 1457 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1458 0090 DAB2     		uxtb	r2, r3
 1459 0092 FB69     		ldr	r3, [r7, #28]
 1460 0094 1A72     		strb	r2, [r3, #8]
 281:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
 1461              		.loc 1 281 0
 1462 0096 3B4B     		ldr	r3, .L25+32
 1463 0098 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1464 009a FB69     		ldr	r3, [r7, #28]
 1465 009c 1A73     		strb	r2, [r3, #12]
 282:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_sum/rssi_count;
 1466              		.loc 1 282 0
 1467 009e 3A4B     		ldr	r3, .L25+36
 1468 00a0 1B68     		ldr	r3, [r3]
 1469 00a2 3A4A     		ldr	r2, .L25+40
 1470 00a4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1471 00a6 93FBF2F3 		sdiv	r3, r3, r2
 1472 00aa DAB2     		uxtb	r2, r3
 1473 00ac FB69     		ldr	r3, [r7, #28]
 1474 00ae 9A72     		strb	r2, [r3, #10]
 283:bluetooth_rxtx.c **** 	
 284:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 285:bluetooth_rxtx.c **** 
 286:bluetooth_rxtx.c **** 	USRLED_SET;
 1475              		.loc 1 286 0
 1476 00b0 374B     		ldr	r3, .L25+44
 1477 00b2 0222     		movs	r2, #2
 1478 00b4 1A60     		str	r2, [r3]
 287:bluetooth_rxtx.c **** 
 288:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 289:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1479              		.loc 1 289 0
 1480 00b6 FB69     		ldr	r3, [r7, #28]
 1481 00b8 0E33     		adds	r3, r3, #14
 1482 00ba BB61     		str	r3, [r7, #24]
 290:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1483              		.loc 1 290 0
 1484 00bc 3B68     		ldr	r3, [r7]
 1485 00be 7B61     		str	r3, [r7, #20]
 291:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1486              		.loc 1 291 0
 1487 00c0 7B69     		ldr	r3, [r7, #20]
 1488 00c2 1A68     		ldr	r2, [r3]
 1489 00c4 BB69     		ldr	r3, [r7, #24]
 1490 00c6 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1491              		.loc 1 292 0
ARM GAS  /tmp/ccfQkuUX.s 			page 31


 1492 00c8 BB69     		ldr	r3, [r7, #24]
 1493 00ca 0433     		adds	r3, r3, #4
 1494 00cc 7A69     		ldr	r2, [r7, #20]
 1495 00ce 5268     		ldr	r2, [r2, #4]
 1496 00d0 1A60     		str	r2, [r3]
 293:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1497              		.loc 1 293 0
 1498 00d2 BB69     		ldr	r3, [r7, #24]
 1499 00d4 0833     		adds	r3, r3, #8
 1500 00d6 7A69     		ldr	r2, [r7, #20]
 1501 00d8 9268     		ldr	r2, [r2, #8]
 1502 00da 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1503              		.loc 1 294 0
 1504 00dc BB69     		ldr	r3, [r7, #24]
 1505 00de 0C33     		adds	r3, r3, #12
 1506 00e0 7A69     		ldr	r2, [r7, #20]
 1507 00e2 D268     		ldr	r2, [r2, #12]
 1508 00e4 1A60     		str	r2, [r3]
 295:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1509              		.loc 1 295 0
 1510 00e6 BB69     		ldr	r3, [r7, #24]
 1511 00e8 1033     		adds	r3, r3, #16
 1512 00ea 7A69     		ldr	r2, [r7, #20]
 1513 00ec 1269     		ldr	r2, [r2, #16]
 1514 00ee 1A60     		str	r2, [r3]
 296:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1515              		.loc 1 296 0
 1516 00f0 BB69     		ldr	r3, [r7, #24]
 1517 00f2 1433     		adds	r3, r3, #20
 1518 00f4 7A69     		ldr	r2, [r7, #20]
 1519 00f6 5269     		ldr	r2, [r2, #20]
 1520 00f8 1A60     		str	r2, [r3]
 297:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1521              		.loc 1 297 0
 1522 00fa BB69     		ldr	r3, [r7, #24]
 1523 00fc 1833     		adds	r3, r3, #24
 1524 00fe 7A69     		ldr	r2, [r7, #20]
 1525 0100 9269     		ldr	r2, [r2, #24]
 1526 0102 1A60     		str	r2, [r3]
 298:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1527              		.loc 1 298 0
 1528 0104 BB69     		ldr	r3, [r7, #24]
 1529 0106 1C33     		adds	r3, r3, #28
 1530 0108 7A69     		ldr	r2, [r7, #20]
 1531 010a D269     		ldr	r2, [r2, #28]
 1532 010c 1A60     		str	r2, [r3]
 299:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1533              		.loc 1 299 0
 1534 010e BB69     		ldr	r3, [r7, #24]
 1535 0110 2033     		adds	r3, r3, #32
 1536 0112 7A69     		ldr	r2, [r7, #20]
 1537 0114 126A     		ldr	r2, [r2, #32]
 1538 0116 1A60     		str	r2, [r3]
 300:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1539              		.loc 1 300 0
 1540 0118 BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/ccfQkuUX.s 			page 32


 1541 011a 2433     		adds	r3, r3, #36
 1542 011c 7A69     		ldr	r2, [r7, #20]
 1543 011e 526A     		ldr	r2, [r2, #36]
 1544 0120 1A60     		str	r2, [r3]
 301:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1545              		.loc 1 301 0
 1546 0122 BB69     		ldr	r3, [r7, #24]
 1547 0124 2833     		adds	r3, r3, #40
 1548 0126 7A69     		ldr	r2, [r7, #20]
 1549 0128 926A     		ldr	r2, [r2, #40]
 1550 012a 1A60     		str	r2, [r3]
 302:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1551              		.loc 1 302 0
 1552 012c BB69     		ldr	r3, [r7, #24]
 1553 012e 2C33     		adds	r3, r3, #44
 1554 0130 7A69     		ldr	r2, [r7, #20]
 1555 0132 D26A     		ldr	r2, [r2, #44]
 1556 0134 1A60     		str	r2, [r3]
 303:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 304:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1557              		.loc 1 304 0
 1558 0136 FB69     		ldr	r3, [r7, #28]
 1559 0138 0E33     		adds	r3, r3, #14
 1560 013a 3B61     		str	r3, [r7, #16]
 305:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1561              		.loc 1 305 0
 1562 013c 3B68     		ldr	r3, [r7]
 1563 013e FB60     		str	r3, [r7, #12]
 306:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1564              		.loc 1 306 0
 1565 0140 3B69     		ldr	r3, [r7, #16]
 1566 0142 3033     		adds	r3, r3, #48
 1567 0144 FA68     		ldr	r2, [r7, #12]
 1568 0146 128E     		ldrh	r2, [r2, #48]
 1569 0148 1A80     		strh	r2, [r3]	@ movhi
 307:bluetooth_rxtx.c **** 
 308:bluetooth_rxtx.c **** 	f->status = status;
 1570              		.loc 1 308 0
 1571 014a 064B     		ldr	r3, .L25
 1572 014c 1B78     		ldrb	r3, [r3]
 1573 014e DAB2     		uxtb	r2, r3
 1574 0150 FB69     		ldr	r3, [r7, #28]
 1575 0152 5A70     		strb	r2, [r3, #1]
 309:bluetooth_rxtx.c **** 	status = 0;
 1576              		.loc 1 309 0
 1577 0154 034B     		ldr	r3, .L25
 1578 0156 0022     		movs	r2, #0
 1579 0158 1A70     		strb	r2, [r3]
 310:bluetooth_rxtx.c **** 
 311:bluetooth_rxtx.c **** 	return 1;
 1580              		.loc 1 311 0
 1581 015a 0123     		movs	r3, #1
 1582              	.L22:
 312:bluetooth_rxtx.c **** }
 1583              		.loc 1 312 0
 1584 015c 1846     		mov	r0, r3
 1585 015e 2037     		adds	r7, r7, #32
ARM GAS  /tmp/ccfQkuUX.s 			page 33


 1586              		.cfi_def_cfa_offset 8
 1587 0160 BD46     		mov	sp, r7
 1588              		.cfi_def_cfa_register 13
 1589              		@ sp needed
 1590 0162 80BD     		pop	{r7, pc}
 1591              	.L26:
 1592              		.align	2
 1593              	.L25:
 1594 0164 00000000 		.word	status
 1595 0168 00000000 		.word	clkn
 1596 016c 08400040 		.word	1073758216
 1597 0170 00000000 		.word	idle_buf_clkn_high
 1598 0174 00000000 		.word	idle_buf_clk100ns
 1599 0178 00000000 		.word	idle_buf_channel
 1600 017c 00000000 		.word	rssi_min
 1601 0180 00000000 		.word	rssi_max
 1602 0184 00000000 		.word	device_index
 1603 0188 00000000 		.word	rssi_sum
 1604 018c 00000000 		.word	rssi_count
 1605 0190 38C00920 		.word	537509944
 1606              		.cfi_endproc
 1607              	.LFE4:
 1609              		.section	.text.enqueue_legacy,"ax",%progbits
 1610              		.align	2
 1611              		.thumb
 1612              		.thumb_func
 1614              	enqueue_legacy:
 1615              	.LFB5:
 313:bluetooth_rxtx.c **** 
 314:bluetooth_rxtx.c **** 
 315:bluetooth_rxtx.c **** static int enqueue_legacy(u8 type, u8 *buf)
 316:bluetooth_rxtx.c **** {
 1616              		.loc 1 316 0
 1617              		.cfi_startproc
 1618              		@ args = 0, pretend = 0, frame = 32
 1619              		@ frame_needed = 1, uses_anonymous_args = 0
 1620 0000 80B5     		push	{r7, lr}
 1621              		.cfi_def_cfa_offset 8
 1622              		.cfi_offset 7, -8
 1623              		.cfi_offset 14, -4
 1624 0002 88B0     		sub	sp, sp, #32
 1625              		.cfi_def_cfa_offset 40
 1626 0004 00AF     		add	r7, sp, #0
 1627              		.cfi_def_cfa_register 7
 1628 0006 0346     		mov	r3, r0
 1629 0008 3960     		str	r1, [r7]
 1630 000a FB71     		strb	r3, [r7, #7]
 317:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1631              		.loc 1 317 0
 1632 000c FFF7FEFF 		bl	usb_enqueue
 1633 0010 F861     		str	r0, [r7, #28]
 318:bluetooth_rxtx.c **** 
 319:bluetooth_rxtx.c **** 	/* fail if queue is full */
 320:bluetooth_rxtx.c **** 	if (f == NULL) {
 1634              		.loc 1 320 0
 1635 0012 FB69     		ldr	r3, [r7, #28]
 1636 0014 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 34


 1637 0016 09D1     		bne	.L28
 321:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1638              		.loc 1 321 0
 1639 0018 3D4B     		ldr	r3, .L30
 1640 001a 1B78     		ldrb	r3, [r3]
 1641 001c DBB2     		uxtb	r3, r3
 1642 001e 43F00403 		orr	r3, r3, #4
 1643 0022 DAB2     		uxtb	r2, r3
 1644 0024 3A4B     		ldr	r3, .L30
 1645 0026 1A70     		strb	r2, [r3]
 322:bluetooth_rxtx.c **** 		return 0;
 1646              		.loc 1 322 0
 1647 0028 0023     		movs	r3, #0
 1648 002a 6DE0     		b	.L29
 1649              	.L28:
 323:bluetooth_rxtx.c **** 	}
 324:bluetooth_rxtx.c **** 
 325:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1650              		.loc 1 325 0
 1651 002c FB69     		ldr	r3, [r7, #28]
 1652 002e FA79     		ldrb	r2, [r7, #7]
 1653 0030 1A70     		strb	r2, [r3]
 326:bluetooth_rxtx.c **** //	f->clkn_high = idle_buf_clkn_high;
 327:bluetooth_rxtx.c **** 	f->clk100ns = clkn_legacy;
 1654              		.loc 1 327 0
 1655 0032 384B     		ldr	r3, .L30+4
 1656 0034 1A68     		ldr	r2, [r3]
 1657 0036 FB69     		ldr	r3, [r7, #28]
 1658 0038 5A60     		str	r2, [r3, #4]
 328:bluetooth_rxtx.c **** 	
 329:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1659              		.loc 1 329 0
 1660 003a 374B     		ldr	r3, .L30+8
 1661 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1662 003e 9BB2     		uxth	r3, r3
 1663 0040 DBB2     		uxtb	r3, r3
 1664 0042 623B     		subs	r3, r3, #98
 1665 0044 DAB2     		uxtb	r2, r3
 1666 0046 FB69     		ldr	r3, [r7, #28]
 1667 0048 9A70     		strb	r2, [r3, #2]
 330:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 331:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 332:bluetooth_rxtx.c **** //	f->reserved[0] = device_index;
 333:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_sum/rssi_count;
 1668              		.loc 1 333 0
 1669 004a 344B     		ldr	r3, .L30+12
 1670 004c 1B68     		ldr	r3, [r3]
 1671 004e 344A     		ldr	r2, .L30+16
 1672 0050 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1673 0052 93FBF2F3 		sdiv	r3, r3, r2
 1674 0056 DAB2     		uxtb	r2, r3
 1675 0058 FB69     		ldr	r3, [r7, #28]
 1676 005a 9A72     		strb	r2, [r3, #10]
 334:bluetooth_rxtx.c **** 	
 335:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 336:bluetooth_rxtx.c **** 
 337:bluetooth_rxtx.c **** 	USRLED_SET;
ARM GAS  /tmp/ccfQkuUX.s 			page 35


 1677              		.loc 1 337 0
 1678 005c 314B     		ldr	r3, .L30+20
 1679 005e 0222     		movs	r2, #2
 1680 0060 1A60     		str	r2, [r3]
 338:bluetooth_rxtx.c **** 
 339:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 340:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1681              		.loc 1 340 0
 1682 0062 FB69     		ldr	r3, [r7, #28]
 1683 0064 0E33     		adds	r3, r3, #14
 1684 0066 BB61     		str	r3, [r7, #24]
 341:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1685              		.loc 1 341 0
 1686 0068 3B68     		ldr	r3, [r7]
 1687 006a 7B61     		str	r3, [r7, #20]
 342:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1688              		.loc 1 342 0
 1689 006c 7B69     		ldr	r3, [r7, #20]
 1690 006e 1A68     		ldr	r2, [r3]
 1691 0070 BB69     		ldr	r3, [r7, #24]
 1692 0072 1A60     		str	r2, [r3]
 343:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1693              		.loc 1 343 0
 1694 0074 BB69     		ldr	r3, [r7, #24]
 1695 0076 0433     		adds	r3, r3, #4
 1696 0078 7A69     		ldr	r2, [r7, #20]
 1697 007a 5268     		ldr	r2, [r2, #4]
 1698 007c 1A60     		str	r2, [r3]
 344:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1699              		.loc 1 344 0
 1700 007e BB69     		ldr	r3, [r7, #24]
 1701 0080 0833     		adds	r3, r3, #8
 1702 0082 7A69     		ldr	r2, [r7, #20]
 1703 0084 9268     		ldr	r2, [r2, #8]
 1704 0086 1A60     		str	r2, [r3]
 345:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1705              		.loc 1 345 0
 1706 0088 BB69     		ldr	r3, [r7, #24]
 1707 008a 0C33     		adds	r3, r3, #12
 1708 008c 7A69     		ldr	r2, [r7, #20]
 1709 008e D268     		ldr	r2, [r2, #12]
 1710 0090 1A60     		str	r2, [r3]
 346:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1711              		.loc 1 346 0
 1712 0092 BB69     		ldr	r3, [r7, #24]
 1713 0094 1033     		adds	r3, r3, #16
 1714 0096 7A69     		ldr	r2, [r7, #20]
 1715 0098 1269     		ldr	r2, [r2, #16]
 1716 009a 1A60     		str	r2, [r3]
 347:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1717              		.loc 1 347 0
 1718 009c BB69     		ldr	r3, [r7, #24]
 1719 009e 1433     		adds	r3, r3, #20
 1720 00a0 7A69     		ldr	r2, [r7, #20]
 1721 00a2 5269     		ldr	r2, [r2, #20]
 1722 00a4 1A60     		str	r2, [r3]
 348:bluetooth_rxtx.c **** 	p1[6] = p2[6];
ARM GAS  /tmp/ccfQkuUX.s 			page 36


 1723              		.loc 1 348 0
 1724 00a6 BB69     		ldr	r3, [r7, #24]
 1725 00a8 1833     		adds	r3, r3, #24
 1726 00aa 7A69     		ldr	r2, [r7, #20]
 1727 00ac 9269     		ldr	r2, [r2, #24]
 1728 00ae 1A60     		str	r2, [r3]
 349:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1729              		.loc 1 349 0
 1730 00b0 BB69     		ldr	r3, [r7, #24]
 1731 00b2 1C33     		adds	r3, r3, #28
 1732 00b4 7A69     		ldr	r2, [r7, #20]
 1733 00b6 D269     		ldr	r2, [r2, #28]
 1734 00b8 1A60     		str	r2, [r3]
 350:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1735              		.loc 1 350 0
 1736 00ba BB69     		ldr	r3, [r7, #24]
 1737 00bc 2033     		adds	r3, r3, #32
 1738 00be 7A69     		ldr	r2, [r7, #20]
 1739 00c0 126A     		ldr	r2, [r2, #32]
 1740 00c2 1A60     		str	r2, [r3]
 351:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1741              		.loc 1 351 0
 1742 00c4 BB69     		ldr	r3, [r7, #24]
 1743 00c6 2433     		adds	r3, r3, #36
 1744 00c8 7A69     		ldr	r2, [r7, #20]
 1745 00ca 526A     		ldr	r2, [r2, #36]
 1746 00cc 1A60     		str	r2, [r3]
 352:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1747              		.loc 1 352 0
 1748 00ce BB69     		ldr	r3, [r7, #24]
 1749 00d0 2833     		adds	r3, r3, #40
 1750 00d2 7A69     		ldr	r2, [r7, #20]
 1751 00d4 926A     		ldr	r2, [r2, #40]
 1752 00d6 1A60     		str	r2, [r3]
 353:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1753              		.loc 1 353 0
 1754 00d8 BB69     		ldr	r3, [r7, #24]
 1755 00da 2C33     		adds	r3, r3, #44
 1756 00dc 7A69     		ldr	r2, [r7, #20]
 1757 00de D26A     		ldr	r2, [r2, #44]
 1758 00e0 1A60     		str	r2, [r3]
 354:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 355:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1759              		.loc 1 355 0
 1760 00e2 FB69     		ldr	r3, [r7, #28]
 1761 00e4 0E33     		adds	r3, r3, #14
 1762 00e6 3B61     		str	r3, [r7, #16]
 356:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1763              		.loc 1 356 0
 1764 00e8 3B68     		ldr	r3, [r7]
 1765 00ea FB60     		str	r3, [r7, #12]
 357:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1766              		.loc 1 357 0
 1767 00ec 3B69     		ldr	r3, [r7, #16]
 1768 00ee 3033     		adds	r3, r3, #48
 1769 00f0 FA68     		ldr	r2, [r7, #12]
 1770 00f2 128E     		ldrh	r2, [r2, #48]
ARM GAS  /tmp/ccfQkuUX.s 			page 37


 1771 00f4 1A80     		strh	r2, [r3]	@ movhi
 358:bluetooth_rxtx.c **** 
 359:bluetooth_rxtx.c **** 	f->status = status;
 1772              		.loc 1 359 0
 1773 00f6 064B     		ldr	r3, .L30
 1774 00f8 1B78     		ldrb	r3, [r3]
 1775 00fa DAB2     		uxtb	r2, r3
 1776 00fc FB69     		ldr	r3, [r7, #28]
 1777 00fe 5A70     		strb	r2, [r3, #1]
 360:bluetooth_rxtx.c **** 	status = 0;
 1778              		.loc 1 360 0
 1779 0100 034B     		ldr	r3, .L30
 1780 0102 0022     		movs	r2, #0
 1781 0104 1A70     		strb	r2, [r3]
 361:bluetooth_rxtx.c **** 
 362:bluetooth_rxtx.c **** 	return 1;
 1782              		.loc 1 362 0
 1783 0106 0123     		movs	r3, #1
 1784              	.L29:
 363:bluetooth_rxtx.c **** }
 1785              		.loc 1 363 0
 1786 0108 1846     		mov	r0, r3
 1787 010a 2037     		adds	r7, r7, #32
 1788              		.cfi_def_cfa_offset 8
 1789 010c BD46     		mov	sp, r7
 1790              		.cfi_def_cfa_register 13
 1791              		@ sp needed
 1792 010e 80BD     		pop	{r7, pc}
 1793              	.L31:
 1794              		.align	2
 1795              	.L30:
 1796 0110 00000000 		.word	status
 1797 0114 00000000 		.word	clkn_legacy
 1798 0118 00000000 		.word	idle_buf_channel
 1799 011c 00000000 		.word	rssi_sum
 1800 0120 00000000 		.word	rssi_count
 1801 0124 38C00920 		.word	537509944
 1802              		.cfi_endproc
 1803              	.LFE5:
 1805              		.section	.text.enqueue_freq,"ax",%progbits
 1806              		.align	2
 1807              		.thumb
 1808              		.thumb_func
 1810              	enqueue_freq:
 1811              	.LFB6:
 364:bluetooth_rxtx.c **** 
 365:bluetooth_rxtx.c **** 
 366:bluetooth_rxtx.c **** 
 367:bluetooth_rxtx.c **** static int enqueue_freq(u8 type, u8 *buf)
 368:bluetooth_rxtx.c **** {
 1812              		.loc 1 368 0
 1813              		.cfi_startproc
 1814              		@ args = 0, pretend = 0, frame = 32
 1815              		@ frame_needed = 1, uses_anonymous_args = 0
 1816 0000 80B5     		push	{r7, lr}
 1817              		.cfi_def_cfa_offset 8
 1818              		.cfi_offset 7, -8
ARM GAS  /tmp/ccfQkuUX.s 			page 38


 1819              		.cfi_offset 14, -4
 1820 0002 88B0     		sub	sp, sp, #32
 1821              		.cfi_def_cfa_offset 40
 1822 0004 00AF     		add	r7, sp, #0
 1823              		.cfi_def_cfa_register 7
 1824 0006 0346     		mov	r3, r0
 1825 0008 3960     		str	r1, [r7]
 1826 000a FB71     		strb	r3, [r7, #7]
 369:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1827              		.loc 1 369 0
 1828 000c FFF7FEFF 		bl	usb_enqueue
 1829 0010 F861     		str	r0, [r7, #28]
 370:bluetooth_rxtx.c **** 
 371:bluetooth_rxtx.c **** 	/* fail if queue is full */
 372:bluetooth_rxtx.c **** 	if (f == NULL) {
 1830              		.loc 1 372 0
 1831 0012 FB69     		ldr	r3, [r7, #28]
 1832 0014 002B     		cmp	r3, #0
 1833 0016 09D1     		bne	.L33
 373:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1834              		.loc 1 373 0
 1835 0018 3D4B     		ldr	r3, .L35
 1836 001a 1B78     		ldrb	r3, [r3]
 1837 001c DBB2     		uxtb	r3, r3
 1838 001e 43F00403 		orr	r3, r3, #4
 1839 0022 DAB2     		uxtb	r2, r3
 1840 0024 3A4B     		ldr	r3, .L35
 1841 0026 1A70     		strb	r2, [r3]
 374:bluetooth_rxtx.c **** 		return 0;
 1842              		.loc 1 374 0
 1843 0028 0023     		movs	r3, #0
 1844 002a 6DE0     		b	.L34
 1845              	.L33:
 375:bluetooth_rxtx.c **** 	}
 376:bluetooth_rxtx.c **** 
 377:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1846              		.loc 1 377 0
 1847 002c FB69     		ldr	r3, [r7, #28]
 1848 002e FA79     		ldrb	r2, [r7, #7]
 1849 0030 1A70     		strb	r2, [r3]
 378:bluetooth_rxtx.c **** 	
 379:bluetooth_rxtx.c **** 	f->clkn_high = idle_buf_clkn_high;
 1850              		.loc 1 379 0
 1851 0032 384B     		ldr	r3, .L35+4
 1852 0034 1B68     		ldr	r3, [r3]
 1853 0036 DAB2     		uxtb	r2, r3
 1854 0038 FB69     		ldr	r3, [r7, #28]
 1855 003a DA70     		strb	r2, [r3, #3]
 380:bluetooth_rxtx.c **** 	f->clk100ns = clkn_freq;
 1856              		.loc 1 380 0
 1857 003c 364B     		ldr	r3, .L35+8
 1858 003e 1A68     		ldr	r2, [r3]
 1859 0040 FB69     		ldr	r3, [r7, #28]
 1860 0042 5A60     		str	r2, [r3, #4]
 381:bluetooth_rxtx.c **** 	
 382:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1861              		.loc 1 382 0
ARM GAS  /tmp/ccfQkuUX.s 			page 39


 1862 0044 354B     		ldr	r3, .L35+12
 1863 0046 1B88     		ldrh	r3, [r3]	@ movhi
 1864 0048 9BB2     		uxth	r3, r3
 1865 004a DBB2     		uxtb	r3, r3
 1866 004c 623B     		subs	r3, r3, #98
 1867 004e DAB2     		uxtb	r2, r3
 1868 0050 FB69     		ldr	r3, [r7, #28]
 1869 0052 9A70     		strb	r2, [r3, #2]
 383:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 384:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 385:bluetooth_rxtx.c **** 	f->reserved[0] = device_index;
 1870              		.loc 1 385 0
 1871 0054 324B     		ldr	r3, .L35+16
 1872 0056 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1873 0058 FB69     		ldr	r3, [r7, #28]
 1874 005a 1A73     		strb	r2, [r3, #12]
 386:bluetooth_rxtx.c **** //	f->rssi_avg = rssi_sum/rssi_count;
 387:bluetooth_rxtx.c **** 
 388:bluetooth_rxtx.c **** 	USRLED_SET;
 1875              		.loc 1 388 0
 1876 005c 314B     		ldr	r3, .L35+20
 1877 005e 0222     		movs	r2, #2
 1878 0060 1A60     		str	r2, [r3]
 389:bluetooth_rxtx.c **** 
 390:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 391:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1879              		.loc 1 391 0
 1880 0062 FB69     		ldr	r3, [r7, #28]
 1881 0064 0E33     		adds	r3, r3, #14
 1882 0066 BB61     		str	r3, [r7, #24]
 392:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1883              		.loc 1 392 0
 1884 0068 3B68     		ldr	r3, [r7]
 1885 006a 7B61     		str	r3, [r7, #20]
 393:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1886              		.loc 1 393 0
 1887 006c 7B69     		ldr	r3, [r7, #20]
 1888 006e 1A68     		ldr	r2, [r3]
 1889 0070 BB69     		ldr	r3, [r7, #24]
 1890 0072 1A60     		str	r2, [r3]
 394:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1891              		.loc 1 394 0
 1892 0074 BB69     		ldr	r3, [r7, #24]
 1893 0076 0433     		adds	r3, r3, #4
 1894 0078 7A69     		ldr	r2, [r7, #20]
 1895 007a 5268     		ldr	r2, [r2, #4]
 1896 007c 1A60     		str	r2, [r3]
 395:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1897              		.loc 1 395 0
 1898 007e BB69     		ldr	r3, [r7, #24]
 1899 0080 0833     		adds	r3, r3, #8
 1900 0082 7A69     		ldr	r2, [r7, #20]
 1901 0084 9268     		ldr	r2, [r2, #8]
 1902 0086 1A60     		str	r2, [r3]
 396:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1903              		.loc 1 396 0
 1904 0088 BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/ccfQkuUX.s 			page 40


 1905 008a 0C33     		adds	r3, r3, #12
 1906 008c 7A69     		ldr	r2, [r7, #20]
 1907 008e D268     		ldr	r2, [r2, #12]
 1908 0090 1A60     		str	r2, [r3]
 397:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1909              		.loc 1 397 0
 1910 0092 BB69     		ldr	r3, [r7, #24]
 1911 0094 1033     		adds	r3, r3, #16
 1912 0096 7A69     		ldr	r2, [r7, #20]
 1913 0098 1269     		ldr	r2, [r2, #16]
 1914 009a 1A60     		str	r2, [r3]
 398:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1915              		.loc 1 398 0
 1916 009c BB69     		ldr	r3, [r7, #24]
 1917 009e 1433     		adds	r3, r3, #20
 1918 00a0 7A69     		ldr	r2, [r7, #20]
 1919 00a2 5269     		ldr	r2, [r2, #20]
 1920 00a4 1A60     		str	r2, [r3]
 399:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1921              		.loc 1 399 0
 1922 00a6 BB69     		ldr	r3, [r7, #24]
 1923 00a8 1833     		adds	r3, r3, #24
 1924 00aa 7A69     		ldr	r2, [r7, #20]
 1925 00ac 9269     		ldr	r2, [r2, #24]
 1926 00ae 1A60     		str	r2, [r3]
 400:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1927              		.loc 1 400 0
 1928 00b0 BB69     		ldr	r3, [r7, #24]
 1929 00b2 1C33     		adds	r3, r3, #28
 1930 00b4 7A69     		ldr	r2, [r7, #20]
 1931 00b6 D269     		ldr	r2, [r2, #28]
 1932 00b8 1A60     		str	r2, [r3]
 401:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1933              		.loc 1 401 0
 1934 00ba BB69     		ldr	r3, [r7, #24]
 1935 00bc 2033     		adds	r3, r3, #32
 1936 00be 7A69     		ldr	r2, [r7, #20]
 1937 00c0 126A     		ldr	r2, [r2, #32]
 1938 00c2 1A60     		str	r2, [r3]
 402:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1939              		.loc 1 402 0
 1940 00c4 BB69     		ldr	r3, [r7, #24]
 1941 00c6 2433     		adds	r3, r3, #36
 1942 00c8 7A69     		ldr	r2, [r7, #20]
 1943 00ca 526A     		ldr	r2, [r2, #36]
 1944 00cc 1A60     		str	r2, [r3]
 403:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1945              		.loc 1 403 0
 1946 00ce BB69     		ldr	r3, [r7, #24]
 1947 00d0 2833     		adds	r3, r3, #40
 1948 00d2 7A69     		ldr	r2, [r7, #20]
 1949 00d4 926A     		ldr	r2, [r2, #40]
 1950 00d6 1A60     		str	r2, [r3]
 404:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1951              		.loc 1 404 0
 1952 00d8 BB69     		ldr	r3, [r7, #24]
 1953 00da 2C33     		adds	r3, r3, #44
ARM GAS  /tmp/ccfQkuUX.s 			page 41


 1954 00dc 7A69     		ldr	r2, [r7, #20]
 1955 00de D26A     		ldr	r2, [r2, #44]
 1956 00e0 1A60     		str	r2, [r3]
 405:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 406:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1957              		.loc 1 406 0
 1958 00e2 FB69     		ldr	r3, [r7, #28]
 1959 00e4 0E33     		adds	r3, r3, #14
 1960 00e6 3B61     		str	r3, [r7, #16]
 407:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1961              		.loc 1 407 0
 1962 00e8 3B68     		ldr	r3, [r7]
 1963 00ea FB60     		str	r3, [r7, #12]
 408:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1964              		.loc 1 408 0
 1965 00ec 3B69     		ldr	r3, [r7, #16]
 1966 00ee 3033     		adds	r3, r3, #48
 1967 00f0 FA68     		ldr	r2, [r7, #12]
 1968 00f2 128E     		ldrh	r2, [r2, #48]
 1969 00f4 1A80     		strh	r2, [r3]	@ movhi
 409:bluetooth_rxtx.c **** 
 410:bluetooth_rxtx.c **** 	f->status = status;
 1970              		.loc 1 410 0
 1971 00f6 064B     		ldr	r3, .L35
 1972 00f8 1B78     		ldrb	r3, [r3]
 1973 00fa DAB2     		uxtb	r2, r3
 1974 00fc FB69     		ldr	r3, [r7, #28]
 1975 00fe 5A70     		strb	r2, [r3, #1]
 411:bluetooth_rxtx.c **** 	status = 0;
 1976              		.loc 1 411 0
 1977 0100 034B     		ldr	r3, .L35
 1978 0102 0022     		movs	r2, #0
 1979 0104 1A70     		strb	r2, [r3]
 412:bluetooth_rxtx.c **** 
 413:bluetooth_rxtx.c **** 	return 1;
 1980              		.loc 1 413 0
 1981 0106 0123     		movs	r3, #1
 1982              	.L34:
 414:bluetooth_rxtx.c **** }
 1983              		.loc 1 414 0
 1984 0108 1846     		mov	r0, r3
 1985 010a 2037     		adds	r7, r7, #32
 1986              		.cfi_def_cfa_offset 8
 1987 010c BD46     		mov	sp, r7
 1988              		.cfi_def_cfa_register 13
 1989              		@ sp needed
 1990 010e 80BD     		pop	{r7, pc}
 1991              	.L36:
 1992              		.align	2
 1993              	.L35:
 1994 0110 00000000 		.word	status
 1995 0114 00000000 		.word	idle_buf_clkn_high
 1996 0118 00000000 		.word	clkn_freq
 1997 011c 00000000 		.word	idle_buf_channel
 1998 0120 00000000 		.word	device_index
 1999 0124 38C00920 		.word	537509944
 2000              		.cfi_endproc
ARM GAS  /tmp/ccfQkuUX.s 			page 42


 2001              	.LFE6:
 2003              		.section	.text.enqueue_proposed,"ax",%progbits
 2004              		.align	2
 2005              		.thumb
 2006              		.thumb_func
 2008              	enqueue_proposed:
 2009              	.LFB7:
 415:bluetooth_rxtx.c **** 
 416:bluetooth_rxtx.c **** 
 417:bluetooth_rxtx.c **** 
 418:bluetooth_rxtx.c **** static int enqueue_proposed(u8 type, u8 *buf)
 419:bluetooth_rxtx.c **** {
 2010              		.loc 1 419 0
 2011              		.cfi_startproc
 2012              		@ args = 0, pretend = 0, frame = 32
 2013              		@ frame_needed = 1, uses_anonymous_args = 0
 2014 0000 80B5     		push	{r7, lr}
 2015              		.cfi_def_cfa_offset 8
 2016              		.cfi_offset 7, -8
 2017              		.cfi_offset 14, -4
 2018 0002 88B0     		sub	sp, sp, #32
 2019              		.cfi_def_cfa_offset 40
 2020 0004 00AF     		add	r7, sp, #0
 2021              		.cfi_def_cfa_register 7
 2022 0006 0346     		mov	r3, r0
 2023 0008 3960     		str	r1, [r7]
 2024 000a FB71     		strb	r3, [r7, #7]
 420:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 2025              		.loc 1 420 0
 2026 000c FFF7FEFF 		bl	usb_enqueue
 2027 0010 F861     		str	r0, [r7, #28]
 421:bluetooth_rxtx.c **** 
 422:bluetooth_rxtx.c **** 	/* fail if queue is full */
 423:bluetooth_rxtx.c **** 	if (f == NULL) {
 2028              		.loc 1 423 0
 2029 0012 FB69     		ldr	r3, [r7, #28]
 2030 0014 002B     		cmp	r3, #0
 2031 0016 09D1     		bne	.L38
 424:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 2032              		.loc 1 424 0
 2033 0018 3D4B     		ldr	r3, .L40
 2034 001a 1B78     		ldrb	r3, [r3]
 2035 001c DBB2     		uxtb	r3, r3
 2036 001e 43F00403 		orr	r3, r3, #4
 2037 0022 DAB2     		uxtb	r2, r3
 2038 0024 3A4B     		ldr	r3, .L40
 2039 0026 1A70     		strb	r2, [r3]
 425:bluetooth_rxtx.c **** 		return 0;
 2040              		.loc 1 425 0
 2041 0028 0023     		movs	r3, #0
 2042 002a 6CE0     		b	.L39
 2043              	.L38:
 426:bluetooth_rxtx.c **** 	}
 427:bluetooth_rxtx.c **** 
 428:bluetooth_rxtx.c **** 	f->pkt_type = type;
 2044              		.loc 1 428 0
 2045 002c FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/ccfQkuUX.s 			page 43


 2046 002e FA79     		ldrb	r2, [r7, #7]
 2047 0030 1A70     		strb	r2, [r3]
 429:bluetooth_rxtx.c **** //	f->clkn_high = idle_buf_clkn_high;
 430:bluetooth_rxtx.c **** 	f->clk100ns = clkn_proposed;
 2048              		.loc 1 430 0
 2049 0032 384B     		ldr	r3, .L40+4
 2050 0034 1A68     		ldr	r2, [r3]
 2051 0036 FB69     		ldr	r3, [r7, #28]
 2052 0038 5A60     		str	r2, [r3, #4]
 431:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 2053              		.loc 1 431 0
 2054 003a 374B     		ldr	r3, .L40+8
 2055 003c 1B88     		ldrh	r3, [r3]	@ movhi
 2056 003e 9BB2     		uxth	r3, r3
 2057 0040 DBB2     		uxtb	r3, r3
 2058 0042 623B     		subs	r3, r3, #98
 2059 0044 DAB2     		uxtb	r2, r3
 2060 0046 FB69     		ldr	r3, [r7, #28]
 2061 0048 9A70     		strb	r2, [r3, #2]
 432:bluetooth_rxtx.c **** //	f->rssi_min = rssi_min;
 433:bluetooth_rxtx.c **** //	f->rssi_max = rssi_max;
 434:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 2062              		.loc 1 434 0
 2063 004a 344B     		ldr	r3, .L40+12
 2064 004c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2065 004e FB69     		ldr	r3, [r7, #28]
 2066 0050 9A72     		strb	r2, [r3, #10]
 435:bluetooth_rxtx.c **** 	
 436:bluetooth_rxtx.c **** 	f->reserved[1] = freq_avg;
 2067              		.loc 1 436 0
 2068 0052 334B     		ldr	r3, .L40+16
 2069 0054 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2070 0056 FB69     		ldr	r3, [r7, #28]
 2071 0058 5A73     		strb	r2, [r3, #13]
 437:bluetooth_rxtx.c **** //	f->rssi_count = device_index;
 438:bluetooth_rxtx.c **** 
 439:bluetooth_rxtx.c **** 	USRLED_SET;
 2072              		.loc 1 439 0
 2073 005a 324B     		ldr	r3, .L40+20
 2074 005c 0222     		movs	r2, #2
 2075 005e 1A60     		str	r2, [r3]
 440:bluetooth_rxtx.c **** 
 441:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 442:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 2076              		.loc 1 442 0
 2077 0060 FB69     		ldr	r3, [r7, #28]
 2078 0062 0E33     		adds	r3, r3, #14
 2079 0064 BB61     		str	r3, [r7, #24]
 443:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 2080              		.loc 1 443 0
 2081 0066 3B68     		ldr	r3, [r7]
 2082 0068 7B61     		str	r3, [r7, #20]
 444:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 2083              		.loc 1 444 0
 2084 006a 7B69     		ldr	r3, [r7, #20]
 2085 006c 1A68     		ldr	r2, [r3]
 2086 006e BB69     		ldr	r3, [r7, #24]
ARM GAS  /tmp/ccfQkuUX.s 			page 44


 2087 0070 1A60     		str	r2, [r3]
 445:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 2088              		.loc 1 445 0
 2089 0072 BB69     		ldr	r3, [r7, #24]
 2090 0074 0433     		adds	r3, r3, #4
 2091 0076 7A69     		ldr	r2, [r7, #20]
 2092 0078 5268     		ldr	r2, [r2, #4]
 2093 007a 1A60     		str	r2, [r3]
 446:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 2094              		.loc 1 446 0
 2095 007c BB69     		ldr	r3, [r7, #24]
 2096 007e 0833     		adds	r3, r3, #8
 2097 0080 7A69     		ldr	r2, [r7, #20]
 2098 0082 9268     		ldr	r2, [r2, #8]
 2099 0084 1A60     		str	r2, [r3]
 447:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 2100              		.loc 1 447 0
 2101 0086 BB69     		ldr	r3, [r7, #24]
 2102 0088 0C33     		adds	r3, r3, #12
 2103 008a 7A69     		ldr	r2, [r7, #20]
 2104 008c D268     		ldr	r2, [r2, #12]
 2105 008e 1A60     		str	r2, [r3]
 448:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 2106              		.loc 1 448 0
 2107 0090 BB69     		ldr	r3, [r7, #24]
 2108 0092 1033     		adds	r3, r3, #16
 2109 0094 7A69     		ldr	r2, [r7, #20]
 2110 0096 1269     		ldr	r2, [r2, #16]
 2111 0098 1A60     		str	r2, [r3]
 449:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 2112              		.loc 1 449 0
 2113 009a BB69     		ldr	r3, [r7, #24]
 2114 009c 1433     		adds	r3, r3, #20
 2115 009e 7A69     		ldr	r2, [r7, #20]
 2116 00a0 5269     		ldr	r2, [r2, #20]
 2117 00a2 1A60     		str	r2, [r3]
 450:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 2118              		.loc 1 450 0
 2119 00a4 BB69     		ldr	r3, [r7, #24]
 2120 00a6 1833     		adds	r3, r3, #24
 2121 00a8 7A69     		ldr	r2, [r7, #20]
 2122 00aa 9269     		ldr	r2, [r2, #24]
 2123 00ac 1A60     		str	r2, [r3]
 451:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 2124              		.loc 1 451 0
 2125 00ae BB69     		ldr	r3, [r7, #24]
 2126 00b0 1C33     		adds	r3, r3, #28
 2127 00b2 7A69     		ldr	r2, [r7, #20]
 2128 00b4 D269     		ldr	r2, [r2, #28]
 2129 00b6 1A60     		str	r2, [r3]
 452:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 2130              		.loc 1 452 0
 2131 00b8 BB69     		ldr	r3, [r7, #24]
 2132 00ba 2033     		adds	r3, r3, #32
 2133 00bc 7A69     		ldr	r2, [r7, #20]
 2134 00be 126A     		ldr	r2, [r2, #32]
 2135 00c0 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 45


 453:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 2136              		.loc 1 453 0
 2137 00c2 BB69     		ldr	r3, [r7, #24]
 2138 00c4 2433     		adds	r3, r3, #36
 2139 00c6 7A69     		ldr	r2, [r7, #20]
 2140 00c8 526A     		ldr	r2, [r2, #36]
 2141 00ca 1A60     		str	r2, [r3]
 454:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 2142              		.loc 1 454 0
 2143 00cc BB69     		ldr	r3, [r7, #24]
 2144 00ce 2833     		adds	r3, r3, #40
 2145 00d0 7A69     		ldr	r2, [r7, #20]
 2146 00d2 926A     		ldr	r2, [r2, #40]
 2147 00d4 1A60     		str	r2, [r3]
 455:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 2148              		.loc 1 455 0
 2149 00d6 BB69     		ldr	r3, [r7, #24]
 2150 00d8 2C33     		adds	r3, r3, #44
 2151 00da 7A69     		ldr	r2, [r7, #20]
 2152 00dc D26A     		ldr	r2, [r2, #44]
 2153 00de 1A60     		str	r2, [r3]
 456:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 2154              		.loc 1 456 0
 2155 00e0 FB69     		ldr	r3, [r7, #28]
 2156 00e2 0E33     		adds	r3, r3, #14
 2157 00e4 3B61     		str	r3, [r7, #16]
 457:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 2158              		.loc 1 457 0
 2159 00e6 3B68     		ldr	r3, [r7]
 2160 00e8 FB60     		str	r3, [r7, #12]
 458:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 2161              		.loc 1 458 0
 2162 00ea 3B69     		ldr	r3, [r7, #16]
 2163 00ec 3033     		adds	r3, r3, #48
 2164 00ee FA68     		ldr	r2, [r7, #12]
 2165 00f0 128E     		ldrh	r2, [r2, #48]
 2166 00f2 1A80     		strh	r2, [r3]	@ movhi
 459:bluetooth_rxtx.c **** 
 460:bluetooth_rxtx.c **** 	f->status = status;
 2167              		.loc 1 460 0
 2168 00f4 064B     		ldr	r3, .L40
 2169 00f6 1B78     		ldrb	r3, [r3]
 2170 00f8 DAB2     		uxtb	r2, r3
 2171 00fa FB69     		ldr	r3, [r7, #28]
 2172 00fc 5A70     		strb	r2, [r3, #1]
 461:bluetooth_rxtx.c **** 	status = 0;
 2173              		.loc 1 461 0
 2174 00fe 044B     		ldr	r3, .L40
 2175 0100 0022     		movs	r2, #0
 2176 0102 1A70     		strb	r2, [r3]
 462:bluetooth_rxtx.c **** 
 463:bluetooth_rxtx.c **** 	return 1;
 2177              		.loc 1 463 0
 2178 0104 0123     		movs	r3, #1
 2179              	.L39:
 464:bluetooth_rxtx.c **** }
 2180              		.loc 1 464 0
ARM GAS  /tmp/ccfQkuUX.s 			page 46


 2181 0106 1846     		mov	r0, r3
 2182 0108 2037     		adds	r7, r7, #32
 2183              		.cfi_def_cfa_offset 8
 2184 010a BD46     		mov	sp, r7
 2185              		.cfi_def_cfa_register 13
 2186              		@ sp needed
 2187 010c 80BD     		pop	{r7, pc}
 2188              	.L41:
 2189 010e 00BF     		.align	2
 2190              	.L40:
 2191 0110 00000000 		.word	status
 2192 0114 00000000 		.word	clkn_proposed
 2193 0118 00000000 		.word	idle_buf_channel
 2194 011c 00000000 		.word	rssi_avg
 2195 0120 00000000 		.word	freq_avg
 2196 0124 38C00920 		.word	537509944
 2197              		.cfi_endproc
 2198              	.LFE7:
 2200              		.section	.text.enqueue_with_ts,"ax",%progbits
 2201              		.align	2
 2202              		.global	enqueue_with_ts
 2203              		.thumb
 2204              		.thumb_func
 2206              	enqueue_with_ts:
 2207              	.LFB8:
 465:bluetooth_rxtx.c **** 
 466:bluetooth_rxtx.c **** 
 467:bluetooth_rxtx.c **** 
 468:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 469:bluetooth_rxtx.c **** {
 2208              		.loc 1 469 0
 2209              		.cfi_startproc
 2210              		@ args = 0, pretend = 0, frame = 24
 2211              		@ frame_needed = 1, uses_anonymous_args = 0
 2212 0000 80B5     		push	{r7, lr}
 2213              		.cfi_def_cfa_offset 8
 2214              		.cfi_offset 7, -8
 2215              		.cfi_offset 14, -4
 2216 0002 86B0     		sub	sp, sp, #24
 2217              		.cfi_def_cfa_offset 32
 2218 0004 00AF     		add	r7, sp, #0
 2219              		.cfi_def_cfa_register 7
 2220 0006 0346     		mov	r3, r0
 2221 0008 B960     		str	r1, [r7, #8]
 2222 000a 7A60     		str	r2, [r7, #4]
 2223 000c FB73     		strb	r3, [r7, #15]
 470:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 2224              		.loc 1 470 0
 2225 000e FFF7FEFF 		bl	usb_enqueue
 2226 0012 7861     		str	r0, [r7, #20]
 471:bluetooth_rxtx.c **** 
 472:bluetooth_rxtx.c **** 	/* fail if queue is full */
 473:bluetooth_rxtx.c **** 	if (f == NULL) {
 2227              		.loc 1 473 0
 2228 0014 7B69     		ldr	r3, [r7, #20]
 2229 0016 002B     		cmp	r3, #0
 2230 0018 09D1     		bne	.L43
ARM GAS  /tmp/ccfQkuUX.s 			page 47


 474:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 2231              		.loc 1 474 0
 2232 001a 144B     		ldr	r3, .L45
 2233 001c 1B78     		ldrb	r3, [r3]
 2234 001e DBB2     		uxtb	r3, r3
 2235 0020 43F00403 		orr	r3, r3, #4
 2236 0024 DAB2     		uxtb	r2, r3
 2237 0026 114B     		ldr	r3, .L45
 2238 0028 1A70     		strb	r2, [r3]
 475:bluetooth_rxtx.c **** 		return 0;
 2239              		.loc 1 475 0
 2240 002a 0023     		movs	r3, #0
 2241 002c 19E0     		b	.L44
 2242              	.L43:
 476:bluetooth_rxtx.c **** 	}
 477:bluetooth_rxtx.c **** 
 478:bluetooth_rxtx.c **** 	f->pkt_type = type;
 2243              		.loc 1 478 0
 2244 002e 7B69     		ldr	r3, [r7, #20]
 2245 0030 FA7B     		ldrb	r2, [r7, #15]
 2246 0032 1A70     		strb	r2, [r3]
 479:bluetooth_rxtx.c **** //	f->clkn_high = 0;
 480:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 2247              		.loc 1 480 0
 2248 0034 7B69     		ldr	r3, [r7, #20]
 2249 0036 7A68     		ldr	r2, [r7, #4]
 2250 0038 5A60     		str	r2, [r3, #4]
 481:bluetooth_rxtx.c **** 
 482:bluetooth_rxtx.c **** //	f->channel = channel - 2402;
 483:bluetooth_rxtx.c **** 	f->rssi_avg = rssi_avg;
 2251              		.loc 1 483 0
 2252 003a 0D4B     		ldr	r3, .L45+4
 2253 003c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2254 003e 7B69     		ldr	r3, [r7, #20]
 2255 0040 9A72     		strb	r2, [r3, #10]
 484:bluetooth_rxtx.c **** 	f->rssi_count = freq_avg;
 2256              		.loc 1 484 0
 2257 0042 0C4B     		ldr	r3, .L45+8
 2258 0044 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2259 0046 7B69     		ldr	r3, [r7, #20]
 2260 0048 DA72     		strb	r2, [r3, #11]
 485:bluetooth_rxtx.c **** 
 486:bluetooth_rxtx.c **** 	USRLED_SET;
 2261              		.loc 1 486 0
 2262 004a 0B4B     		ldr	r3, .L45+12
 2263 004c 0222     		movs	r2, #2
 2264 004e 1A60     		str	r2, [r3]
 487:bluetooth_rxtx.c **** 
 488:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 489:bluetooth_rxtx.c **** /*	u32 *p1 = (u32 *)f->data;
 490:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 491:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 492:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 493:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 494:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 495:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 496:bluetooth_rxtx.c **** 	p1[5] = p2[5];
ARM GAS  /tmp/ccfQkuUX.s 			page 48


 497:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 498:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 499:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 500:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 501:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 502:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 503:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 504:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 505:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 506:bluetooth_rxtx.c **** */
 507:bluetooth_rxtx.c **** 	f->status = status;
 2265              		.loc 1 507 0
 2266 0050 064B     		ldr	r3, .L45
 2267 0052 1B78     		ldrb	r3, [r3]
 2268 0054 DAB2     		uxtb	r2, r3
 2269 0056 7B69     		ldr	r3, [r7, #20]
 2270 0058 5A70     		strb	r2, [r3, #1]
 508:bluetooth_rxtx.c **** 	status = 0;
 2271              		.loc 1 508 0
 2272 005a 044B     		ldr	r3, .L45
 2273 005c 0022     		movs	r2, #0
 2274 005e 1A70     		strb	r2, [r3]
 509:bluetooth_rxtx.c **** 
 510:bluetooth_rxtx.c **** 	return 1;
 2275              		.loc 1 510 0
 2276 0060 0123     		movs	r3, #1
 2277              	.L44:
 511:bluetooth_rxtx.c **** }
 2278              		.loc 1 511 0
 2279 0062 1846     		mov	r0, r3
 2280 0064 1837     		adds	r7, r7, #24
 2281              		.cfi_def_cfa_offset 8
 2282 0066 BD46     		mov	sp, r7
 2283              		.cfi_def_cfa_register 13
 2284              		@ sp needed
 2285 0068 80BD     		pop	{r7, pc}
 2286              	.L46:
 2287 006a 00BF     		.align	2
 2288              	.L45:
 2289 006c 00000000 		.word	status
 2290 0070 00000000 		.word	rssi_avg
 2291 0074 00000000 		.word	freq_avg
 2292 0078 38C00920 		.word	537509944
 2293              		.cfi_endproc
 2294              	.LFE8:
 2296              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 2297              		.align	2
 2298              		.thumb
 2299              		.thumb_func
 2301              	cs_threshold_calc_and_set:
 2302              	.LFB9:
 512:bluetooth_rxtx.c **** 
 513:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 514:bluetooth_rxtx.c **** {
 2303              		.loc 1 514 0
 2304              		.cfi_startproc
 2305              		@ args = 0, pretend = 0, frame = 8
ARM GAS  /tmp/ccfQkuUX.s 			page 49


 2306              		@ frame_needed = 1, uses_anonymous_args = 0
 2307 0000 80B5     		push	{r7, lr}
 2308              		.cfi_def_cfa_offset 8
 2309              		.cfi_offset 7, -8
 2310              		.cfi_offset 14, -4
 2311 0002 82B0     		sub	sp, sp, #8
 2312              		.cfi_def_cfa_offset 16
 2313 0004 00AF     		add	r7, sp, #0
 2314              		.cfi_def_cfa_register 7
 515:bluetooth_rxtx.c **** 	int8_t level;
 516:bluetooth_rxtx.c **** 
 517:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 518:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 519:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 520:bluetooth_rxtx.c **** 	 * value for it. */
 521:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 2315              		.loc 1 521 0
 2316 0006 174B     		ldr	r3, .L51
 2317 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2318 000a 002B     		cmp	r3, #0
 2319 000c 1DD0     		beq	.L48
 2320              		.loc 1 521 0 is_stmt 0 discriminator 1
 2321 000e 164B     		ldr	r3, .L51+4
 2322 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2323 0012 5BB2     		sxtb	r3, r3
 2324 0014 002B     		cmp	r3, #0
 2325 0016 18DD     		ble	.L48
 2326              	.LBB2:
 522:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 2327              		.loc 1 522 0 is_stmt 1
 2328 0018 144B     		ldr	r3, .L51+8
 2329 001a 1B88     		ldrh	r3, [r3]	@ movhi
 2330 001c 9BB2     		uxth	r3, r3
 2331 001e A3F66213 		subw	r3, r3, #2402
 2332 0022 134A     		ldr	r2, .L51+12
 2333 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 2334 0028 1BB2     		sxth	r3, r3
 2335 002a 8033     		adds	r3, r3, #128
 2336 002c 002B     		cmp	r3, #0
 2337 002e 00DA     		bge	.L49
 2338 0030 FF33     		adds	r3, r3, #255
 2339              	.L49:
 2340 0032 1B12     		asrs	r3, r3, #8
 2341 0034 BB71     		strb	r3, [r7, #6]
 523:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 2342              		.loc 1 523 0
 2343 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 2344 0038 0B4B     		ldr	r3, .L51+4
 2345 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2346 003c DBB2     		uxtb	r3, r3
 2347 003e 1344     		add	r3, r3, r2
 2348 0040 DBB2     		uxtb	r3, r3
 2349 0042 363B     		subs	r3, r3, #54
 2350 0044 DBB2     		uxtb	r3, r3
 2351 0046 FB71     		strb	r3, [r7, #7]
 2352              	.LBE2:
 521:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
ARM GAS  /tmp/ccfQkuUX.s 			page 50


 2353              		.loc 1 521 0
 2354 0048 02E0     		b	.L50
 2355              	.L48:
 524:bluetooth_rxtx.c **** 	}
 525:bluetooth_rxtx.c **** 	else {
 526:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 2356              		.loc 1 526 0
 2357 004a 074B     		ldr	r3, .L51+4
 2358 004c 1B78     		ldrb	r3, [r3]
 2359 004e FB71     		strb	r3, [r7, #7]
 2360              	.L50:
 527:bluetooth_rxtx.c **** 	}
 528:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 2361              		.loc 1 528 0
 2362 0050 97F90730 		ldrsb	r3, [r7, #7]
 2363 0054 1846     		mov	r0, r3
 2364 0056 0321     		movs	r1, #3
 2365 0058 FFF7FEFF 		bl	cs_threshold_set
 529:bluetooth_rxtx.c **** }
 2366              		.loc 1 529 0
 2367 005c 0837     		adds	r7, r7, #8
 2368              		.cfi_def_cfa_offset 8
 2369 005e BD46     		mov	sp, r7
 2370              		.cfi_def_cfa_register 13
 2371              		@ sp needed
 2372 0060 80BD     		pop	{r7, pc}
 2373              	.L52:
 2374 0062 00BF     		.align	2
 2375              	.L51:
 2376 0064 00000000 		.word	hop_mode
 2377 0068 00000000 		.word	cs_threshold_req
 2378 006c 00000000 		.word	channel
 2379 0070 00000000 		.word	rssi_iir
 2380              		.cfi_endproc
 2381              	.LFE9:
 2383              		.section	.text.cs_trigger_enable,"ax",%progbits
 2384              		.align	2
 2385              		.thumb
 2386              		.thumb_func
 2388              	cs_trigger_enable:
 2389              	.LFB10:
 530:bluetooth_rxtx.c **** 
 531:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 532:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 533:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 534:bluetooth_rxtx.c ****  * and off here. */
 535:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 536:bluetooth_rxtx.c **** {
 2390              		.loc 1 536 0
 2391              		.cfi_startproc
 2392              		@ args = 0, pretend = 0, frame = 0
 2393              		@ frame_needed = 1, uses_anonymous_args = 0
 2394              		@ link register save eliminated.
 2395 0000 80B4     		push	{r7}
 2396              		.cfi_def_cfa_offset 4
 2397              		.cfi_offset 7, -4
 2398 0002 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 51


 2399              		.cfi_def_cfa_register 7
 537:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2400              		.loc 1 537 0
 2401 0004 094B     		ldr	r3, .L54
 2402 0006 0022     		movs	r2, #0
 2403 0008 1A70     		strb	r2, [r3]
 538:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 2404              		.loc 1 538 0
 2405 000a 094B     		ldr	r3, .L54+4
 2406 000c 4FF40012 		mov	r2, #2097152
 2407 0010 1A60     		str	r2, [r3]
 539:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2408              		.loc 1 539 0
 2409 0012 084B     		ldr	r3, .L54+8
 2410 0014 0422     		movs	r2, #4
 2411 0016 1A60     		str	r2, [r3]
 540:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 2412              		.loc 1 540 0
 2413 0018 074A     		ldr	r2, .L54+12
 2414 001a 074B     		ldr	r3, .L54+12
 2415 001c 1B68     		ldr	r3, [r3]
 2416 001e 43F00403 		orr	r3, r3, #4
 2417 0022 1360     		str	r3, [r2]
 541:bluetooth_rxtx.c **** }
 2418              		.loc 1 541 0
 2419 0024 BD46     		mov	sp, r7
 2420              		.cfi_def_cfa_register 13
 2421              		@ sp needed
 2422 0026 5DF8047B 		ldr	r7, [sp], #4
 2423              		.cfi_restore 7
 2424              		.cfi_def_cfa_offset 0
 2425 002a 7047     		bx	lr
 2426              	.L55:
 2427              		.align	2
 2428              	.L54:
 2429 002c 00000000 		.word	cs_trigger
 2430 0030 00E100E0 		.word	-536813312
 2431 0034 AC800240 		.word	1073905836
 2432 0038 B4800240 		.word	1073905844
 2433              		.cfi_endproc
 2434              	.LFE10:
 2436              		.section	.text.cs_trigger_disable,"ax",%progbits
 2437              		.align	2
 2438              		.thumb
 2439              		.thumb_func
 2441              	cs_trigger_disable:
 2442              	.LFB11:
 542:bluetooth_rxtx.c **** 
 543:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 544:bluetooth_rxtx.c **** {
 2443              		.loc 1 544 0
 2444              		.cfi_startproc
 2445              		@ args = 0, pretend = 0, frame = 0
 2446              		@ frame_needed = 1, uses_anonymous_args = 0
 2447              		@ link register save eliminated.
 2448 0000 80B4     		push	{r7}
 2449              		.cfi_def_cfa_offset 4
ARM GAS  /tmp/ccfQkuUX.s 			page 52


 2450              		.cfi_offset 7, -4
 2451 0002 00AF     		add	r7, sp, #0
 2452              		.cfi_def_cfa_register 7
 545:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 2453              		.loc 1 545 0
 2454 0004 094A     		ldr	r2, .L57
 2455 0006 094B     		ldr	r3, .L57
 2456 0008 1B68     		ldr	r3, [r3]
 2457 000a 23F00403 		bic	r3, r3, #4
 2458 000e 1360     		str	r3, [r2]
 546:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 2459              		.loc 1 546 0
 2460 0010 074B     		ldr	r3, .L57+4
 2461 0012 0422     		movs	r2, #4
 2462 0014 1A60     		str	r2, [r3]
 547:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 2463              		.loc 1 547 0
 2464 0016 074B     		ldr	r3, .L57+8
 2465 0018 4FF40012 		mov	r2, #2097152
 2466 001c 1A60     		str	r2, [r3]
 548:bluetooth_rxtx.c **** 	cs_trigger = 0;
 2467              		.loc 1 548 0
 2468 001e 064B     		ldr	r3, .L57+12
 2469 0020 0022     		movs	r2, #0
 2470 0022 1A70     		strb	r2, [r3]
 549:bluetooth_rxtx.c **** }
 2471              		.loc 1 549 0
 2472 0024 BD46     		mov	sp, r7
 2473              		.cfi_def_cfa_register 13
 2474              		@ sp needed
 2475 0026 5DF8047B 		ldr	r7, [sp], #4
 2476              		.cfi_restore 7
 2477              		.cfi_def_cfa_offset 0
 2478 002a 7047     		bx	lr
 2479              	.L58:
 2480              		.align	2
 2481              	.L57:
 2482 002c B4800240 		.word	1073905844
 2483 0030 AC800240 		.word	1073905836
 2484 0034 80E100E0 		.word	-536813184
 2485 0038 00000000 		.word	cs_trigger
 2486              		.cfi_endproc
 2487              	.LFE11:
 2489              		.section	.rodata
 2490 08d1 000000   		.align	2
 2491              	.LC3:
 2492 08d4 32303135 		.ascii	"2015-10-R1\000"
 2492      2D31302D 
 2492      523100
 2493              		.section	.text.vendor_request_handler,"ax",%progbits
 2494              		.align	2
 2495              		.thumb
 2496              		.thumb_func
 2498              	vendor_request_handler:
 2499              	.LFB12:
 550:bluetooth_rxtx.c **** 
 551:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
ARM GAS  /tmp/ccfQkuUX.s 			page 53


 552:bluetooth_rxtx.c **** {
 2500              		.loc 1 552 0
 2501              		.cfi_startproc
 2502              		@ args = 0, pretend = 0, frame = 80
 2503              		@ frame_needed = 1, uses_anonymous_args = 0
 2504 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2505              		.cfi_def_cfa_offset 36
 2506              		.cfi_offset 4, -36
 2507              		.cfi_offset 5, -32
 2508              		.cfi_offset 6, -28
 2509              		.cfi_offset 7, -24
 2510              		.cfi_offset 8, -20
 2511              		.cfi_offset 9, -16
 2512              		.cfi_offset 10, -12
 2513              		.cfi_offset 11, -8
 2514              		.cfi_offset 14, -4
 2515 0004 95B0     		sub	sp, sp, #84
 2516              		.cfi_def_cfa_offset 120
 2517 0006 00AF     		add	r7, sp, #0
 2518              		.cfi_def_cfa_register 7
 2519 0008 B960     		str	r1, [r7, #8]
 2520 000a 7A60     		str	r2, [r7, #4]
 2521 000c 3B60     		str	r3, [r7]
 2522 000e 0346     		mov	r3, r0
 2523 0010 FB73     		strb	r3, [r7, #15]
 553:bluetooth_rxtx.c **** 	u32 command[5];
 554:bluetooth_rxtx.c **** 	u32 result[5];
 555:bluetooth_rxtx.c **** 	u64 ac_copy;
 556:bluetooth_rxtx.c **** 	int i; // loop counter
 557:bluetooth_rxtx.c **** 	u32 clock;
 558:bluetooth_rxtx.c **** 	int clock_offset;
 559:bluetooth_rxtx.c **** 	u8 length; // string length
 560:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2524              		.loc 1 560 0
 2525 0012 0023     		movs	r3, #0
 2526 0014 7B64     		str	r3, [r7, #68]
 561:bluetooth_rxtx.c **** 	u16 reg_val;
 562:bluetooth_rxtx.c **** 
 563:bluetooth_rxtx.c **** 	switch (request) {
 2527              		.loc 1 563 0
 2528 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2529 0018 3E2B     		cmp	r3, #62
 2530 001a 00F26385 		bhi	.L60
 2531 001e 01A2     		adr	r2, .L62
 2532 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2533              		.p2align 2
 2534              	.L62:
 2535 0024 21010000 		.word	.L61+1
 2536 0028 2B010000 		.word	.L63+1
 2537 002c E50A0000 		.word	.L60+1
 2538 0030 5B010000 		.word	.L64+1
 2539 0034 7D010000 		.word	.L65+1
 2540 0038 99010000 		.word	.L66+1
 2541 003c BB010000 		.word	.L67+1
 2542 0040 D7010000 		.word	.L68+1
 2543 0044 F9010000 		.word	.L69+1
 2544 0048 19020000 		.word	.L70+1
ARM GAS  /tmp/ccfQkuUX.s 			page 54


 2545 004c 3B020000 		.word	.L71+1
 2546 0050 DB040000 		.word	.L72+1
 2547 0054 01050000 		.word	.L73+1
 2548 0058 B1020000 		.word	.L74+1
 2549 005c BB020000 		.word	.L75+1
 2550 0060 5B020000 		.word	.L76+1
 2551 0064 99030000 		.word	.L77+1
 2552 0068 B9030000 		.word	.L78+1
 2553 006c ED030000 		.word	.L79+1
 2554 0070 0D040000 		.word	.L80+1
 2555 0074 29040000 		.word	.L81+1
 2556 0078 B5040000 		.word	.L82+1
 2557 007c BD040000 		.word	.L83+1
 2558 0080 CF040000 		.word	.L84+1
 2559 0084 8B050000 		.word	.L85+1
 2560 0088 A9050000 		.word	.L86+1
 2561 008c E50A0000 		.word	.L60+1
 2562 0090 B5050000 		.word	.L87+1
 2563 0094 31040000 		.word	.L88+1
 2564 0098 4D040000 		.word	.L89+1
 2565 009c 75040000 		.word	.L90+1
 2566 00a0 6D040000 		.word	.L91+1
 2567 00a4 7D040000 		.word	.L92+1
 2568 00a8 79060000 		.word	.L93+1
 2569 00ac 11060000 		.word	.L94+1
 2570 00b0 ED060000 		.word	.L95+1
 2571 00b4 FB060000 		.word	.L96+1
 2572 00b8 0B070000 		.word	.L97+1
 2573 00bc 1D070000 		.word	.L98+1
 2574 00c0 E9070000 		.word	.L99+1
 2575 00c4 2F080000 		.word	.L100+1
 2576 00c8 BD080000 		.word	.L101+1
 2577 00cc F1080000 		.word	.L102+1
 2578 00d0 13090000 		.word	.L103+1
 2579 00d4 6B090000 		.word	.L104+1
 2580 00d8 E90A0000 		.word	.L165+1
 2581 00dc 9D090000 		.word	.L106+1
 2582 00e0 B3090000 		.word	.L107+1
 2583 00e4 CF090000 		.word	.L108+1
 2584 00e8 E5090000 		.word	.L109+1
 2585 00ec 110A0000 		.word	.L110+1
 2586 00f0 61080000 		.word	.L111+1
 2587 00f4 93080000 		.word	.L112+1
 2588 00f8 2D0A0000 		.word	.L113+1
 2589 00fc 710A0000 		.word	.L114+1
 2590 0100 BB060000 		.word	.L115+1
 2591 0104 830A0000 		.word	.L116+1
 2592 0108 E50A0000 		.word	.L60+1
 2593 010c 5B0A0000 		.word	.L117+1
 2594 0110 C70A0000 		.word	.L118+1
 2595 0114 D30A0000 		.word	.L119+1
 2596 0118 3B010000 		.word	.L120+1
 2597 011c 4B010000 		.word	.L121+1
 2598              		.p2align 1
 2599              	.L61:
 564:bluetooth_rxtx.c **** 
 565:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
ARM GAS  /tmp/ccfQkuUX.s 			page 55


 566:bluetooth_rxtx.c **** 		*data_len = 0;
 2600              		.loc 1 566 0
 2601 0120 3B68     		ldr	r3, [r7]
 2602 0122 0022     		movs	r2, #0
 2603 0124 1A60     		str	r2, [r3]
 567:bluetooth_rxtx.c **** 		break;
 2604              		.loc 1 567 0
 2605 0126 00F0E0BC 		b	.L122
 2606              	.L63:
 568:bluetooth_rxtx.c **** 
 569:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 570:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2607              		.loc 1 570 0
 2608 012a A74B     		ldr	r3, .L166
 2609 012c 0122     		movs	r2, #1
 2610 012e 1A70     		strb	r2, [r3]
 571:bluetooth_rxtx.c **** 		*data_len = 0;
 2611              		.loc 1 571 0
 2612 0130 3B68     		ldr	r3, [r7]
 2613 0132 0022     		movs	r2, #0
 2614 0134 1A60     		str	r2, [r3]
 572:bluetooth_rxtx.c **** 		break;
 2615              		.loc 1 572 0
 2616 0136 00F0D8BC 		b	.L122
 2617              	.L120:
 573:bluetooth_rxtx.c **** 	
 574:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_FREQ:
 575:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_FREQ;
 2618              		.loc 1 575 0
 2619 013a A34B     		ldr	r3, .L166
 2620 013c 0E22     		movs	r2, #14
 2621 013e 1A70     		strb	r2, [r3]
 576:bluetooth_rxtx.c **** 		*data_len = 0;
 2622              		.loc 1 576 0
 2623 0140 3B68     		ldr	r3, [r7]
 2624 0142 0022     		movs	r2, #0
 2625 0144 1A60     		str	r2, [r3]
 577:bluetooth_rxtx.c **** 		break;
 2626              		.loc 1 577 0
 2627 0146 00F0D0BC 		b	.L122
 2628              	.L121:
 578:bluetooth_rxtx.c **** 	
 579:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_PROPOSED:
 580:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_PROPOSED;
 2629              		.loc 1 580 0
 2630 014a 9F4B     		ldr	r3, .L166
 2631 014c 0F22     		movs	r2, #15
 2632 014e 1A70     		strb	r2, [r3]
 581:bluetooth_rxtx.c **** 		*data_len = 0;
 2633              		.loc 1 581 0
 2634 0150 3B68     		ldr	r3, [r7]
 2635 0152 0022     		movs	r2, #0
 2636 0154 1A60     		str	r2, [r3]
 582:bluetooth_rxtx.c **** 		break;
 2637              		.loc 1 582 0
 2638 0156 00F0C8BC 		b	.L122
 2639              	.L64:
ARM GAS  /tmp/ccfQkuUX.s 			page 56


 583:bluetooth_rxtx.c **** 
 584:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 585:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 2640              		.loc 1 585 0
 2641 015a 9C4B     		ldr	r3, .L166+4
 2642 015c 1B68     		ldr	r3, [r3]
 2643 015e 03F00203 		and	r3, r3, #2
 2644 0162 002B     		cmp	r3, #0
 2645 0164 14BF     		ite	ne
 2646 0166 0123     		movne	r3, #1
 2647 0168 0023     		moveq	r3, #0
 2648 016a DBB2     		uxtb	r3, r3
 2649 016c 1A46     		mov	r2, r3
 2650 016e 7B68     		ldr	r3, [r7, #4]
 2651 0170 1A70     		strb	r2, [r3]
 586:bluetooth_rxtx.c **** 		*data_len = 1;
 2652              		.loc 1 586 0
 2653 0172 3B68     		ldr	r3, [r7]
 2654 0174 0122     		movs	r2, #1
 2655 0176 1A60     		str	r2, [r3]
 587:bluetooth_rxtx.c **** 		break;
 2656              		.loc 1 587 0
 2657 0178 00F0B7BC 		b	.L122
 2658              	.L65:
 588:bluetooth_rxtx.c **** 
 589:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 590:bluetooth_rxtx.c **** 		if (request_params[0])
 2659              		.loc 1 590 0
 2660 017c BB68     		ldr	r3, [r7, #8]
 2661 017e 1B88     		ldrh	r3, [r3]
 2662 0180 002B     		cmp	r3, #0
 2663 0182 04D0     		beq	.L123
 591:bluetooth_rxtx.c **** 			USRLED_SET;
 2664              		.loc 1 591 0
 2665 0184 924B     		ldr	r3, .L166+8
 2666 0186 0222     		movs	r2, #2
 2667 0188 1A60     		str	r2, [r3]
 592:bluetooth_rxtx.c **** 		else
 593:bluetooth_rxtx.c **** 			USRLED_CLR;
 594:bluetooth_rxtx.c **** 		break;
 2668              		.loc 1 594 0
 2669 018a 00F0AEBC 		b	.L122
 2670              	.L123:
 593:bluetooth_rxtx.c **** 		break;
 2671              		.loc 1 593 0
 2672 018e 914B     		ldr	r3, .L166+12
 2673 0190 0222     		movs	r2, #2
 2674 0192 1A60     		str	r2, [r3]
 2675              		.loc 1 594 0
 2676 0194 00F0A9BC 		b	.L122
 2677              	.L66:
 595:bluetooth_rxtx.c **** 
 596:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 597:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2678              		.loc 1 597 0
 2679 0198 8C4B     		ldr	r3, .L166+4
 2680 019a 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 57


 2681 019c 03F01003 		and	r3, r3, #16
 2682 01a0 002B     		cmp	r3, #0
 2683 01a2 14BF     		ite	ne
 2684 01a4 0123     		movne	r3, #1
 2685 01a6 0023     		moveq	r3, #0
 2686 01a8 DBB2     		uxtb	r3, r3
 2687 01aa 1A46     		mov	r2, r3
 2688 01ac 7B68     		ldr	r3, [r7, #4]
 2689 01ae 1A70     		strb	r2, [r3]
 598:bluetooth_rxtx.c **** 		*data_len = 1;
 2690              		.loc 1 598 0
 2691 01b0 3B68     		ldr	r3, [r7]
 2692 01b2 0122     		movs	r2, #1
 2693 01b4 1A60     		str	r2, [r3]
 599:bluetooth_rxtx.c **** 		break;
 2694              		.loc 1 599 0
 2695 01b6 00F098BC 		b	.L122
 2696              	.L67:
 600:bluetooth_rxtx.c **** 
 601:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 602:bluetooth_rxtx.c **** 		if (request_params[0])
 2697              		.loc 1 602 0
 2698 01ba BB68     		ldr	r3, [r7, #8]
 2699 01bc 1B88     		ldrh	r3, [r3]
 2700 01be 002B     		cmp	r3, #0
 2701 01c0 04D0     		beq	.L125
 603:bluetooth_rxtx.c **** 			RXLED_SET;
 2702              		.loc 1 603 0
 2703 01c2 834B     		ldr	r3, .L166+8
 2704 01c4 1022     		movs	r2, #16
 2705 01c6 1A60     		str	r2, [r3]
 604:bluetooth_rxtx.c **** 		else
 605:bluetooth_rxtx.c **** 			RXLED_CLR;
 606:bluetooth_rxtx.c **** 		break;
 2706              		.loc 1 606 0
 2707 01c8 00F08FBC 		b	.L122
 2708              	.L125:
 605:bluetooth_rxtx.c **** 		break;
 2709              		.loc 1 605 0
 2710 01cc 814B     		ldr	r3, .L166+12
 2711 01ce 1022     		movs	r2, #16
 2712 01d0 1A60     		str	r2, [r3]
 2713              		.loc 1 606 0
 2714 01d2 00F08ABC 		b	.L122
 2715              	.L68:
 607:bluetooth_rxtx.c **** 
 608:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 609:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2716              		.loc 1 609 0
 2717 01d6 7D4B     		ldr	r3, .L166+4
 2718 01d8 1B68     		ldr	r3, [r3]
 2719 01da 03F48073 		and	r3, r3, #256
 2720 01de 002B     		cmp	r3, #0
 2721 01e0 14BF     		ite	ne
 2722 01e2 0123     		movne	r3, #1
 2723 01e4 0023     		moveq	r3, #0
 2724 01e6 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccfQkuUX.s 			page 58


 2725 01e8 1A46     		mov	r2, r3
 2726 01ea 7B68     		ldr	r3, [r7, #4]
 2727 01ec 1A70     		strb	r2, [r3]
 610:bluetooth_rxtx.c **** 		*data_len = 1;
 2728              		.loc 1 610 0
 2729 01ee 3B68     		ldr	r3, [r7]
 2730 01f0 0122     		movs	r2, #1
 2731 01f2 1A60     		str	r2, [r3]
 611:bluetooth_rxtx.c **** 		break;
 2732              		.loc 1 611 0
 2733 01f4 00F079BC 		b	.L122
 2734              	.L69:
 612:bluetooth_rxtx.c **** 
 613:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 614:bluetooth_rxtx.c **** 		if (request_params[0])
 2735              		.loc 1 614 0
 2736 01f8 BB68     		ldr	r3, [r7, #8]
 2737 01fa 1B88     		ldrh	r3, [r3]
 2738 01fc 002B     		cmp	r3, #0
 2739 01fe 05D0     		beq	.L127
 615:bluetooth_rxtx.c **** 			TXLED_SET;
 2740              		.loc 1 615 0
 2741 0200 734B     		ldr	r3, .L166+8
 2742 0202 4FF48072 		mov	r2, #256
 2743 0206 1A60     		str	r2, [r3]
 616:bluetooth_rxtx.c **** 		else
 617:bluetooth_rxtx.c **** 			TXLED_CLR;
 618:bluetooth_rxtx.c **** 		break;
 2744              		.loc 1 618 0
 2745 0208 00F06FBC 		b	.L122
 2746              	.L127:
 617:bluetooth_rxtx.c **** 		break;
 2747              		.loc 1 617 0
 2748 020c 714B     		ldr	r3, .L166+12
 2749 020e 4FF48072 		mov	r2, #256
 2750 0212 1A60     		str	r2, [r3]
 2751              		.loc 1 618 0
 2752 0214 00F069BC 		b	.L122
 2753              	.L70:
 619:bluetooth_rxtx.c **** 
 620:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 621:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2754              		.loc 1 621 0
 2755 0218 6C4B     		ldr	r3, .L166+4
 2756 021a 1B68     		ldr	r3, [r3]
 2757 021c 03F40073 		and	r3, r3, #512
 2758 0220 002B     		cmp	r3, #0
 2759 0222 14BF     		ite	ne
 2760 0224 0123     		movne	r3, #1
 2761 0226 0023     		moveq	r3, #0
 2762 0228 DBB2     		uxtb	r3, r3
 2763 022a 1A46     		mov	r2, r3
 2764 022c 7B68     		ldr	r3, [r7, #4]
 2765 022e 1A70     		strb	r2, [r3]
 622:bluetooth_rxtx.c **** 		*data_len = 1;
 2766              		.loc 1 622 0
 2767 0230 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccfQkuUX.s 			page 59


 2768 0232 0122     		movs	r2, #1
 2769 0234 1A60     		str	r2, [r3]
 623:bluetooth_rxtx.c **** 		break;
 2770              		.loc 1 623 0
 2771 0236 00F058BC 		b	.L122
 2772              	.L71:
 624:bluetooth_rxtx.c **** 
 625:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 626:bluetooth_rxtx.c **** 		if (request_params[0])
 2773              		.loc 1 626 0
 2774 023a BB68     		ldr	r3, [r7, #8]
 2775 023c 1B88     		ldrh	r3, [r3]
 2776 023e 002B     		cmp	r3, #0
 2777 0240 05D0     		beq	.L129
 627:bluetooth_rxtx.c **** 			CC1V8_SET;
 2778              		.loc 1 627 0
 2779 0242 634B     		ldr	r3, .L166+8
 2780 0244 4FF40072 		mov	r2, #512
 2781 0248 1A60     		str	r2, [r3]
 628:bluetooth_rxtx.c **** 		else
 629:bluetooth_rxtx.c **** 			CC1V8_CLR;
 630:bluetooth_rxtx.c **** 		break;
 2782              		.loc 1 630 0
 2783 024a 00F04EBC 		b	.L122
 2784              	.L129:
 629:bluetooth_rxtx.c **** 		break;
 2785              		.loc 1 629 0
 2786 024e 614B     		ldr	r3, .L166+12
 2787 0250 4FF40072 		mov	r2, #512
 2788 0254 1A60     		str	r2, [r3]
 2789              		.loc 1 630 0
 2790 0256 00F048BC 		b	.L122
 2791              	.L76:
 631:bluetooth_rxtx.c **** 
 632:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 633:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2792              		.loc 1 633 0
 2793 025a 3623     		movs	r3, #54
 2794 025c 7B62     		str	r3, [r7, #36]
 634:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2795              		.loc 1 634 0
 2796 025e 5E4B     		ldr	r3, .L166+16
 2797 0260 1B68     		ldr	r3, [r3]
 2798 0262 07F12401 		add	r1, r7, #36
 2799 0266 07F11002 		add	r2, r7, #16
 2800 026a 0846     		mov	r0, r1
 2801 026c 1146     		mov	r1, r2
 2802 026e 9847     		blx	r3
 635:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2803              		.loc 1 635 0
 2804 0270 3B69     		ldr	r3, [r7, #16]
 2805 0272 DAB2     		uxtb	r2, r3
 2806 0274 7B68     		ldr	r3, [r7, #4]
 2807 0276 1A70     		strb	r2, [r3]
 636:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2808              		.loc 1 636 0
 2809 0278 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccfQkuUX.s 			page 60


 2810 027a 0133     		adds	r3, r3, #1
 2811 027c 7A69     		ldr	r2, [r7, #20]
 2812 027e D2B2     		uxtb	r2, r2
 2813 0280 1A70     		strb	r2, [r3]
 637:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2814              		.loc 1 637 0
 2815 0282 7B68     		ldr	r3, [r7, #4]
 2816 0284 0233     		adds	r3, r3, #2
 2817 0286 7A69     		ldr	r2, [r7, #20]
 2818 0288 120A     		lsrs	r2, r2, #8
 2819 028a D2B2     		uxtb	r2, r2
 2820 028c 1A70     		strb	r2, [r3]
 638:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2821              		.loc 1 638 0
 2822 028e 7B68     		ldr	r3, [r7, #4]
 2823 0290 0333     		adds	r3, r3, #3
 2824 0292 7A69     		ldr	r2, [r7, #20]
 2825 0294 120C     		lsrs	r2, r2, #16
 2826 0296 D2B2     		uxtb	r2, r2
 2827 0298 1A70     		strb	r2, [r3]
 639:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2828              		.loc 1 639 0
 2829 029a 7B68     		ldr	r3, [r7, #4]
 2830 029c 0433     		adds	r3, r3, #4
 2831 029e 7A69     		ldr	r2, [r7, #20]
 2832 02a0 120E     		lsrs	r2, r2, #24
 2833 02a2 D2B2     		uxtb	r2, r2
 2834 02a4 1A70     		strb	r2, [r3]
 640:bluetooth_rxtx.c **** 		*data_len = 5;
 2835              		.loc 1 640 0
 2836 02a6 3B68     		ldr	r3, [r7]
 2837 02a8 0522     		movs	r2, #5
 2838 02aa 1A60     		str	r2, [r3]
 641:bluetooth_rxtx.c **** 		break;
 2839              		.loc 1 641 0
 2840 02ac 00F01DBC 		b	.L122
 2841              	.L74:
 642:bluetooth_rxtx.c **** 
 643:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 644:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2842              		.loc 1 644 0
 2843 02b0 454B     		ldr	r3, .L166
 2844 02b2 0B22     		movs	r2, #11
 2845 02b4 1A70     		strb	r2, [r3]
 645:bluetooth_rxtx.c **** 		break;
 2846              		.loc 1 645 0
 2847 02b6 00F018BC 		b	.L122
 2848              	.L75:
 646:bluetooth_rxtx.c **** 
 647:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 648:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2849              		.loc 1 648 0
 2850 02ba 3A23     		movs	r3, #58
 2851 02bc 7B62     		str	r3, [r7, #36]
 649:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2852              		.loc 1 649 0
 2853 02be 464B     		ldr	r3, .L166+16
ARM GAS  /tmp/ccfQkuUX.s 			page 61


 2854 02c0 1B68     		ldr	r3, [r3]
 2855 02c2 07F12401 		add	r1, r7, #36
 2856 02c6 07F11002 		add	r2, r7, #16
 2857 02ca 0846     		mov	r0, r1
 2858 02cc 1146     		mov	r1, r2
 2859 02ce 9847     		blx	r3
 650:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2860              		.loc 1 650 0
 2861 02d0 3B69     		ldr	r3, [r7, #16]
 2862 02d2 DAB2     		uxtb	r2, r3
 2863 02d4 7B68     		ldr	r3, [r7, #4]
 2864 02d6 1A70     		strb	r2, [r3]
 651:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2865              		.loc 1 651 0
 2866 02d8 7B68     		ldr	r3, [r7, #4]
 2867 02da 0133     		adds	r3, r3, #1
 2868 02dc 7A69     		ldr	r2, [r7, #20]
 2869 02de D2B2     		uxtb	r2, r2
 2870 02e0 1A70     		strb	r2, [r3]
 652:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2871              		.loc 1 652 0
 2872 02e2 7B68     		ldr	r3, [r7, #4]
 2873 02e4 0233     		adds	r3, r3, #2
 2874 02e6 7A69     		ldr	r2, [r7, #20]
 2875 02e8 120A     		lsrs	r2, r2, #8
 2876 02ea D2B2     		uxtb	r2, r2
 2877 02ec 1A70     		strb	r2, [r3]
 653:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2878              		.loc 1 653 0
 2879 02ee 7B68     		ldr	r3, [r7, #4]
 2880 02f0 0333     		adds	r3, r3, #3
 2881 02f2 7A69     		ldr	r2, [r7, #20]
 2882 02f4 120C     		lsrs	r2, r2, #16
 2883 02f6 D2B2     		uxtb	r2, r2
 2884 02f8 1A70     		strb	r2, [r3]
 654:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2885              		.loc 1 654 0
 2886 02fa 7B68     		ldr	r3, [r7, #4]
 2887 02fc 0433     		adds	r3, r3, #4
 2888 02fe 7A69     		ldr	r2, [r7, #20]
 2889 0300 120E     		lsrs	r2, r2, #24
 2890 0302 D2B2     		uxtb	r2, r2
 2891 0304 1A70     		strb	r2, [r3]
 655:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2892              		.loc 1 655 0
 2893 0306 7B68     		ldr	r3, [r7, #4]
 2894 0308 0533     		adds	r3, r3, #5
 2895 030a BA69     		ldr	r2, [r7, #24]
 2896 030c D2B2     		uxtb	r2, r2
 2897 030e 1A70     		strb	r2, [r3]
 656:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2898              		.loc 1 656 0
 2899 0310 7B68     		ldr	r3, [r7, #4]
 2900 0312 0633     		adds	r3, r3, #6
 2901 0314 BA69     		ldr	r2, [r7, #24]
 2902 0316 120A     		lsrs	r2, r2, #8
 2903 0318 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/ccfQkuUX.s 			page 62


 2904 031a 1A70     		strb	r2, [r3]
 657:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2905              		.loc 1 657 0
 2906 031c 7B68     		ldr	r3, [r7, #4]
 2907 031e 0733     		adds	r3, r3, #7
 2908 0320 BA69     		ldr	r2, [r7, #24]
 2909 0322 120C     		lsrs	r2, r2, #16
 2910 0324 D2B2     		uxtb	r2, r2
 2911 0326 1A70     		strb	r2, [r3]
 658:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2912              		.loc 1 658 0
 2913 0328 7B68     		ldr	r3, [r7, #4]
 2914 032a 0833     		adds	r3, r3, #8
 2915 032c BA69     		ldr	r2, [r7, #24]
 2916 032e 120E     		lsrs	r2, r2, #24
 2917 0330 D2B2     		uxtb	r2, r2
 2918 0332 1A70     		strb	r2, [r3]
 659:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2919              		.loc 1 659 0
 2920 0334 7B68     		ldr	r3, [r7, #4]
 2921 0336 0933     		adds	r3, r3, #9
 2922 0338 FA69     		ldr	r2, [r7, #28]
 2923 033a D2B2     		uxtb	r2, r2
 2924 033c 1A70     		strb	r2, [r3]
 660:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2925              		.loc 1 660 0
 2926 033e 7B68     		ldr	r3, [r7, #4]
 2927 0340 0A33     		adds	r3, r3, #10
 2928 0342 FA69     		ldr	r2, [r7, #28]
 2929 0344 120A     		lsrs	r2, r2, #8
 2930 0346 D2B2     		uxtb	r2, r2
 2931 0348 1A70     		strb	r2, [r3]
 661:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2932              		.loc 1 661 0
 2933 034a 7B68     		ldr	r3, [r7, #4]
 2934 034c 0B33     		adds	r3, r3, #11
 2935 034e FA69     		ldr	r2, [r7, #28]
 2936 0350 120C     		lsrs	r2, r2, #16
 2937 0352 D2B2     		uxtb	r2, r2
 2938 0354 1A70     		strb	r2, [r3]
 662:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2939              		.loc 1 662 0
 2940 0356 7B68     		ldr	r3, [r7, #4]
 2941 0358 0C33     		adds	r3, r3, #12
 2942 035a FA69     		ldr	r2, [r7, #28]
 2943 035c 120E     		lsrs	r2, r2, #24
 2944 035e D2B2     		uxtb	r2, r2
 2945 0360 1A70     		strb	r2, [r3]
 663:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2946              		.loc 1 663 0
 2947 0362 7B68     		ldr	r3, [r7, #4]
 2948 0364 0D33     		adds	r3, r3, #13
 2949 0366 3A6A     		ldr	r2, [r7, #32]
 2950 0368 D2B2     		uxtb	r2, r2
 2951 036a 1A70     		strb	r2, [r3]
 664:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2952              		.loc 1 664 0
ARM GAS  /tmp/ccfQkuUX.s 			page 63


 2953 036c 7B68     		ldr	r3, [r7, #4]
 2954 036e 0E33     		adds	r3, r3, #14
 2955 0370 3A6A     		ldr	r2, [r7, #32]
 2956 0372 120A     		lsrs	r2, r2, #8
 2957 0374 D2B2     		uxtb	r2, r2
 2958 0376 1A70     		strb	r2, [r3]
 665:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2959              		.loc 1 665 0
 2960 0378 7B68     		ldr	r3, [r7, #4]
 2961 037a 0F33     		adds	r3, r3, #15
 2962 037c 3A6A     		ldr	r2, [r7, #32]
 2963 037e 120C     		lsrs	r2, r2, #16
 2964 0380 D2B2     		uxtb	r2, r2
 2965 0382 1A70     		strb	r2, [r3]
 666:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2966              		.loc 1 666 0
 2967 0384 7B68     		ldr	r3, [r7, #4]
 2968 0386 1033     		adds	r3, r3, #16
 2969 0388 3A6A     		ldr	r2, [r7, #32]
 2970 038a 120E     		lsrs	r2, r2, #24
 2971 038c D2B2     		uxtb	r2, r2
 2972 038e 1A70     		strb	r2, [r3]
 667:bluetooth_rxtx.c **** 		*data_len = 17;
 2973              		.loc 1 667 0
 2974 0390 3B68     		ldr	r3, [r7]
 2975 0392 1122     		movs	r2, #17
 2976 0394 1A60     		str	r2, [r3]
 668:bluetooth_rxtx.c **** 		break;
 2977              		.loc 1 668 0
 2978 0396 A8E3     		b	.L122
 2979              	.L77:
 669:bluetooth_rxtx.c **** 
 670:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 671:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 672:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2980              		.loc 1 672 0
 2981 0398 104B     		ldr	r3, .L166+20
 2982 039a 1B68     		ldr	r3, [r3]
 2983 039c 03F08003 		and	r3, r3, #128
 2984 03a0 002B     		cmp	r3, #0
 2985 03a2 14BF     		ite	ne
 2986 03a4 0123     		movne	r3, #1
 2987 03a6 0023     		moveq	r3, #0
 2988 03a8 DBB2     		uxtb	r3, r3
 2989 03aa 1A46     		mov	r2, r3
 2990 03ac 7B68     		ldr	r3, [r7, #4]
 2991 03ae 1A70     		strb	r2, [r3]
 673:bluetooth_rxtx.c **** 		*data_len = 1;
 2992              		.loc 1 673 0
 2993 03b0 3B68     		ldr	r3, [r7]
 2994 03b2 0122     		movs	r2, #1
 2995 03b4 1A60     		str	r2, [r3]
 674:bluetooth_rxtx.c **** 		break;
 2996              		.loc 1 674 0
 2997 03b6 98E3     		b	.L122
 2998              	.L78:
 675:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccfQkuUX.s 			page 64


 676:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 677:bluetooth_rxtx.c **** 		if (request_params[0])
 2999              		.loc 1 677 0
 3000 03b8 BB68     		ldr	r3, [r7, #8]
 3001 03ba 1B88     		ldrh	r3, [r3]
 3002 03bc 002B     		cmp	r3, #0
 3003 03be 11D0     		beq	.L131
 678:bluetooth_rxtx.c **** 			PAEN_SET;
 3004              		.loc 1 678 0
 3005 03c0 074B     		ldr	r3, .L166+24
 3006 03c2 8022     		movs	r2, #128
 3007 03c4 1A60     		str	r2, [r3]
 679:bluetooth_rxtx.c **** 		else
 680:bluetooth_rxtx.c **** 			PAEN_CLR;
 681:bluetooth_rxtx.c **** 		break;
 3008              		.loc 1 681 0
 3009 03c6 90E3     		b	.L122
 3010              	.L167:
 3011              		.align	2
 3012              	.L166:
 3013 03c8 00000000 		.word	requested_mode
 3014 03cc 34C00920 		.word	537509940
 3015 03d0 38C00920 		.word	537509944
 3016 03d4 3CC00920 		.word	537509948
 3017 03d8 00000000 		.word	iap_entry
 3018 03dc 54C00920 		.word	537509972
 3019 03e0 58C00920 		.word	537509976
 3020              	.L131:
 680:bluetooth_rxtx.c **** 		break;
 3021              		.loc 1 680 0
 3022 03e4 944B     		ldr	r3, .L168
 3023 03e6 8022     		movs	r2, #128
 3024 03e8 1A60     		str	r2, [r3]
 3025              		.loc 1 681 0
 3026 03ea 7EE3     		b	.L122
 3027              	.L79:
 682:bluetooth_rxtx.c **** 
 683:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 684:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 3028              		.loc 1 684 0
 3029 03ec 934B     		ldr	r3, .L168+4
 3030 03ee 1B68     		ldr	r3, [r3]
 3031 03f0 03F48073 		and	r3, r3, #256
 3032 03f4 002B     		cmp	r3, #0
 3033 03f6 14BF     		ite	ne
 3034 03f8 0123     		movne	r3, #1
 3035 03fa 0023     		moveq	r3, #0
 3036 03fc DBB2     		uxtb	r3, r3
 3037 03fe 1A46     		mov	r2, r3
 3038 0400 7B68     		ldr	r3, [r7, #4]
 3039 0402 1A70     		strb	r2, [r3]
 685:bluetooth_rxtx.c **** 		*data_len = 1;
 3040              		.loc 1 685 0
 3041 0404 3B68     		ldr	r3, [r7]
 3042 0406 0122     		movs	r2, #1
 3043 0408 1A60     		str	r2, [r3]
 686:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/ccfQkuUX.s 			page 65


 3044              		.loc 1 686 0
 3045 040a 6EE3     		b	.L122
 3046              	.L80:
 687:bluetooth_rxtx.c **** 
 688:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 689:bluetooth_rxtx.c **** 		if (request_params[0])
 3047              		.loc 1 689 0
 3048 040c BB68     		ldr	r3, [r7, #8]
 3049 040e 1B88     		ldrh	r3, [r3]
 3050 0410 002B     		cmp	r3, #0
 3051 0412 04D0     		beq	.L133
 690:bluetooth_rxtx.c **** 			HGM_SET;
 3052              		.loc 1 690 0
 3053 0414 8A4B     		ldr	r3, .L168+8
 3054 0416 4FF48072 		mov	r2, #256
 3055 041a 1A60     		str	r2, [r3]
 691:bluetooth_rxtx.c **** 		else
 692:bluetooth_rxtx.c **** 			HGM_CLR;
 693:bluetooth_rxtx.c **** 		break;
 3056              		.loc 1 693 0
 3057 041c 65E3     		b	.L122
 3058              	.L133:
 692:bluetooth_rxtx.c **** 		break;
 3059              		.loc 1 692 0
 3060 041e 864B     		ldr	r3, .L168
 3061 0420 4FF48072 		mov	r2, #256
 3062 0424 1A60     		str	r2, [r3]
 3063              		.loc 1 693 0
 3064 0426 60E3     		b	.L122
 3065              	.L81:
 694:bluetooth_rxtx.c **** #endif
 695:bluetooth_rxtx.c **** 
 696:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 697:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 698:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 3066              		.loc 1 698 0
 3067 0428 864B     		ldr	r3, .L168+12
 3068 042a 0322     		movs	r2, #3
 3069 042c 1A70     		strb	r2, [r3]
 699:bluetooth_rxtx.c **** 		break;
 3070              		.loc 1 699 0
 3071 042e 5CE3     		b	.L122
 3072              	.L88:
 700:bluetooth_rxtx.c **** 
 701:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 702:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 3073              		.loc 1 702 0
 3074 0430 0520     		movs	r0, #5
 3075 0432 FFF7FEFF 		bl	cc2400_get
 3076 0436 0346     		mov	r3, r0
 3077 0438 DBB2     		uxtb	r3, r3
 3078 043a 03F00703 		and	r3, r3, #7
 3079 043e DAB2     		uxtb	r2, r3
 3080 0440 7B68     		ldr	r3, [r7, #4]
 3081 0442 1A70     		strb	r2, [r3]
 703:bluetooth_rxtx.c **** 		*data_len = 1;
 3082              		.loc 1 703 0
ARM GAS  /tmp/ccfQkuUX.s 			page 66


 3083 0444 3B68     		ldr	r3, [r7]
 3084 0446 0122     		movs	r2, #1
 3085 0448 1A60     		str	r2, [r3]
 704:bluetooth_rxtx.c **** 		break;
 3086              		.loc 1 704 0
 3087 044a 4EE3     		b	.L122
 3088              	.L89:
 705:bluetooth_rxtx.c **** 
 706:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 707:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 3089              		.loc 1 707 0
 3090 044c BB68     		ldr	r3, [r7, #8]
 3091 044e 1B88     		ldrh	r3, [r3]
 3092 0450 072B     		cmp	r3, #7
 3093 0452 09D8     		bhi	.L135
 708:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 3094              		.loc 1 708 0
 3095 0454 BB68     		ldr	r3, [r7, #8]
 3096 0456 1B88     		ldrh	r3, [r3]
 3097 0458 43F00803 		orr	r3, r3, #8
 3098 045c 9BB2     		uxth	r3, r3
 3099 045e 0520     		movs	r0, #5
 3100 0460 1946     		mov	r1, r3
 3101 0462 FFF7FEFF 		bl	cc2400_set
 709:bluetooth_rxtx.c **** 		} else {
 710:bluetooth_rxtx.c **** 			return 0;
 711:bluetooth_rxtx.c **** 		}
 712:bluetooth_rxtx.c **** 		break;
 3102              		.loc 1 712 0
 3103 0466 40E3     		b	.L122
 3104              	.L135:
 710:bluetooth_rxtx.c **** 		}
 3105              		.loc 1 710 0
 3106 0468 0023     		movs	r3, #0
 3107 046a 3FE3     		b	.L164
 3108              	.L91:
 713:bluetooth_rxtx.c **** 
 714:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 715:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 3109              		.loc 1 715 0
 3110 046c 754B     		ldr	r3, .L168+12
 3111 046e 0522     		movs	r2, #5
 3112 0470 1A70     		strb	r2, [r3]
 716:bluetooth_rxtx.c **** 		break;
 3113              		.loc 1 716 0
 3114 0472 3AE3     		b	.L122
 3115              	.L90:
 717:bluetooth_rxtx.c **** 
 718:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 719:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 3116              		.loc 1 719 0
 3117 0474 734B     		ldr	r3, .L168+12
 3118 0476 0622     		movs	r2, #6
 3119 0478 1A70     		strb	r2, [r3]
 720:bluetooth_rxtx.c **** 		break;
 3120              		.loc 1 720 0
 3121 047a 36E3     		b	.L122
ARM GAS  /tmp/ccfQkuUX.s 			page 67


 3122              	.L92:
 721:bluetooth_rxtx.c **** #endif
 722:bluetooth_rxtx.c **** 
 723:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 724:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 3123              		.loc 1 724 0
 3124 047c 724B     		ldr	r3, .L168+16
 3125 047e 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3126 0480 7B68     		ldr	r3, [r7, #4]
 3127 0482 1A70     		strb	r2, [r3]
 725:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 3128              		.loc 1 725 0
 3129 0484 7B68     		ldr	r3, [r7, #4]
 3130 0486 0133     		adds	r3, r3, #1
 3131 0488 6F4A     		ldr	r2, .L168+16
 3132 048a 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 3133 048c 1A70     		strb	r2, [r3]
 726:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 3134              		.loc 1 726 0
 3135 048e 7B68     		ldr	r3, [r7, #4]
 3136 0490 0233     		adds	r3, r3, #2
 3137 0492 6D4A     		ldr	r2, .L168+16
 3138 0494 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 3139 0496 1A70     		strb	r2, [r3]
 727:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 3140              		.loc 1 727 0
 3141 0498 7B68     		ldr	r3, [r7, #4]
 3142 049a 0333     		adds	r3, r3, #3
 3143 049c 6A4A     		ldr	r2, .L168+16
 3144 049e D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 3145 04a0 1A70     		strb	r2, [r3]
 728:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 3146              		.loc 1 728 0
 3147 04a2 7B68     		ldr	r3, [r7, #4]
 3148 04a4 0433     		adds	r3, r3, #4
 3149 04a6 684A     		ldr	r2, .L168+16
 3150 04a8 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 3151 04aa 1A70     		strb	r2, [r3]
 729:bluetooth_rxtx.c **** 		*data_len = 5;
 3152              		.loc 1 729 0
 3153 04ac 3B68     		ldr	r3, [r7]
 3154 04ae 0522     		movs	r2, #5
 3155 04b0 1A60     		str	r2, [r3]
 730:bluetooth_rxtx.c **** 		break;
 3156              		.loc 1 730 0
 3157 04b2 1AE3     		b	.L122
 3158              	.L82:
 731:bluetooth_rxtx.c **** 
 732:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 733:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 3159              		.loc 1 733 0
 3160 04b4 634B     		ldr	r3, .L168+12
 3161 04b6 0022     		movs	r2, #0
 3162 04b8 1A70     		strb	r2, [r3]
 734:bluetooth_rxtx.c **** 		break;
 3163              		.loc 1 734 0
 3164 04ba 16E3     		b	.L122
ARM GAS  /tmp/ccfQkuUX.s 			page 68


 3165              	.L83:
 735:bluetooth_rxtx.c **** 
 736:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 737:bluetooth_rxtx.c **** 		data[0] = modulation;
 3166              		.loc 1 737 0
 3167 04bc 634B     		ldr	r3, .L168+20
 3168 04be 1B78     		ldrb	r3, [r3]
 3169 04c0 DAB2     		uxtb	r2, r3
 3170 04c2 7B68     		ldr	r3, [r7, #4]
 3171 04c4 1A70     		strb	r2, [r3]
 738:bluetooth_rxtx.c **** 		*data_len = 1;
 3172              		.loc 1 738 0
 3173 04c6 3B68     		ldr	r3, [r7]
 3174 04c8 0122     		movs	r2, #1
 3175 04ca 1A60     		str	r2, [r3]
 739:bluetooth_rxtx.c **** 		break;
 3176              		.loc 1 739 0
 3177 04cc 0DE3     		b	.L122
 3178              	.L84:
 740:bluetooth_rxtx.c **** 
 741:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 742:bluetooth_rxtx.c **** 		modulation = request_params[0];
 3179              		.loc 1 742 0
 3180 04ce BB68     		ldr	r3, [r7, #8]
 3181 04d0 1B88     		ldrh	r3, [r3]
 3182 04d2 DAB2     		uxtb	r2, r3
 3183 04d4 5D4B     		ldr	r3, .L168+20
 3184 04d6 1A70     		strb	r2, [r3]
 743:bluetooth_rxtx.c **** 		break;
 3185              		.loc 1 743 0
 3186 04d8 07E3     		b	.L122
 3187              	.L72:
 744:bluetooth_rxtx.c **** 
 745:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 746:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 3188              		.loc 1 746 0
 3189 04da 5D4B     		ldr	r3, .L168+24
 3190 04dc 1B88     		ldrh	r3, [r3]	@ movhi
 3191 04de 9BB2     		uxth	r3, r3
 3192 04e0 DAB2     		uxtb	r2, r3
 3193 04e2 7B68     		ldr	r3, [r7, #4]
 3194 04e4 1A70     		strb	r2, [r3]
 747:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 3195              		.loc 1 747 0
 3196 04e6 7B68     		ldr	r3, [r7, #4]
 3197 04e8 0133     		adds	r3, r3, #1
 3198 04ea 594A     		ldr	r2, .L168+24
 3199 04ec 1288     		ldrh	r2, [r2]	@ movhi
 3200 04ee 92B2     		uxth	r2, r2
 3201 04f0 120A     		lsrs	r2, r2, #8
 3202 04f2 92B2     		uxth	r2, r2
 3203 04f4 D2B2     		uxtb	r2, r2
 3204 04f6 1A70     		strb	r2, [r3]
 748:bluetooth_rxtx.c **** 		*data_len = 2;
 3205              		.loc 1 748 0
 3206 04f8 3B68     		ldr	r3, [r7]
 3207 04fa 0222     		movs	r2, #2
ARM GAS  /tmp/ccfQkuUX.s 			page 69


 3208 04fc 1A60     		str	r2, [r3]
 749:bluetooth_rxtx.c **** 		break;
 3209              		.loc 1 749 0
 3210 04fe F4E2     		b	.L122
 3211              	.L73:
 750:bluetooth_rxtx.c **** 
 751:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 752:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 3212              		.loc 1 752 0
 3213 0500 BB68     		ldr	r3, [r7, #8]
 3214 0502 1A88     		ldrh	r2, [r3]
 3215 0504 534B     		ldr	r3, .L168+28
 3216 0506 1A80     		strh	r2, [r3]	@ movhi
 753:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 754:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 3217              		.loc 1 754 0
 3218 0508 524B     		ldr	r3, .L168+28
 3219 050a 1B88     		ldrh	r3, [r3]	@ movhi
 3220 050c 9BB2     		uxth	r3, r3
 3221 050e 40F6EA22 		movw	r2, #2794
 3222 0512 9342     		cmp	r3, r2
 3223 0514 07D9     		bls	.L138
 755:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 3224              		.loc 1 755 0
 3225 0516 504B     		ldr	r3, .L168+32
 3226 0518 0122     		movs	r2, #1
 3227 051a 1A70     		strb	r2, [r3]
 756:bluetooth_rxtx.c **** 			requested_channel = 2402;
 3228              		.loc 1 756 0
 3229 051c 4D4B     		ldr	r3, .L168+28
 3230 051e 40F66212 		movw	r2, #2402
 3231 0522 1A80     		strh	r2, [r3]	@ movhi
 3232 0524 20E0     		b	.L139
 3233              	.L138:
 757:bluetooth_rxtx.c **** 		}
 758:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 759:bluetooth_rxtx.c **** 		else {
 760:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 3234              		.loc 1 760 0
 3235 0526 4C4B     		ldr	r3, .L168+32
 3236 0528 0022     		movs	r2, #0
 3237 052a 1A70     		strb	r2, [r3]
 761:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 3238              		.loc 1 761 0
 3239 052c 494B     		ldr	r3, .L168+28
 3240 052e 1B88     		ldrh	r3, [r3]	@ movhi
 3241 0530 9BB2     		uxth	r3, r3
 3242 0532 40F6DC02 		movw	r2, #2268
 3243 0536 9342     		cmp	r3, r2
 3244 0538 03D9     		bls	.L140
 3245              		.loc 1 761 0 is_stmt 0 discriminator 1
 3246 053a 464B     		ldr	r3, .L168+28
 3247 053c 1B88     		ldrh	r3, [r3]	@ movhi
 3248 053e 9BB2     		uxth	r3, r3
 3249 0540 01E0     		b	.L141
 3250              	.L140:
 3251              		.loc 1 761 0 discriminator 2
ARM GAS  /tmp/ccfQkuUX.s 			page 70


 3252 0542 40F6DC03 		movw	r3, #2268
 3253              	.L141:
 3254              		.loc 1 761 0 discriminator 4
 3255 0546 434A     		ldr	r2, .L168+28
 3256 0548 1380     		strh	r3, [r2]	@ movhi
 762:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 3257              		.loc 1 762 0 is_stmt 1 discriminator 4
 3258 054a 424B     		ldr	r3, .L168+28
 3259 054c 1B88     		ldrh	r3, [r3]	@ movhi
 3260 054e 9BB2     		uxth	r3, r3
 3261 0550 40F6E922 		movw	r2, #2793
 3262 0554 9342     		cmp	r3, r2
 3263 0556 03D8     		bhi	.L142
 3264              		.loc 1 762 0 is_stmt 0 discriminator 1
 3265 0558 3E4B     		ldr	r3, .L168+28
 3266 055a 1B88     		ldrh	r3, [r3]	@ movhi
 3267 055c 9BB2     		uxth	r3, r3
 3268 055e 01E0     		b	.L143
 3269              	.L142:
 3270              		.loc 1 762 0 discriminator 2
 3271 0560 40F6EA23 		movw	r3, #2794
 3272              	.L143:
 3273              		.loc 1 762 0 discriminator 4
 3274 0564 3B4A     		ldr	r2, .L168+28
 3275 0566 1380     		strh	r3, [r2]	@ movhi
 3276              	.L139:
 763:bluetooth_rxtx.c **** 		}
 764:bluetooth_rxtx.c **** 
 765:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 3277              		.loc 1 765 0 is_stmt 1
 3278 0568 3C4B     		ldr	r3, .L168+36
 3279 056a 1B78     		ldrb	r3, [r3]
 3280 056c DBB2     		uxtb	r3, r3
 3281 056e 092B     		cmp	r3, #9
 3282 0570 0AD0     		beq	.L144
 766:bluetooth_rxtx.c **** 			channel = requested_channel;
 3283              		.loc 1 766 0
 3284 0572 384B     		ldr	r3, .L168+28
 3285 0574 1B88     		ldrh	r3, [r3]	@ movhi
 3286 0576 9AB2     		uxth	r2, r3
 3287 0578 354B     		ldr	r3, .L168+24
 3288 057a 1A80     		strh	r2, [r3]	@ movhi
 767:bluetooth_rxtx.c **** 			requested_channel = 0;
 3289              		.loc 1 767 0
 3290 057c 354B     		ldr	r3, .L168+28
 3291 057e 0022     		movs	r2, #0
 3292 0580 1A80     		strh	r2, [r3]	@ movhi
 768:bluetooth_rxtx.c **** 
 769:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 770:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 771:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 3293              		.loc 1 771 0
 3294 0582 FFF7FEFF 		bl	cs_threshold_calc_and_set
 772:bluetooth_rxtx.c **** 		}
 773:bluetooth_rxtx.c **** 		break;
 3295              		.loc 1 773 0
 3296 0586 B0E2     		b	.L122
ARM GAS  /tmp/ccfQkuUX.s 			page 71


 3297              	.L144:
 3298 0588 AFE2     		b	.L122
 3299              	.L85:
 774:bluetooth_rxtx.c **** 
 775:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 776:bluetooth_rxtx.c **** 		command[0] = 57;
 3300              		.loc 1 776 0
 3301 058a 3923     		movs	r3, #57
 3302 058c 7B62     		str	r3, [r7, #36]
 777:bluetooth_rxtx.c **** 		iap_entry(command, result);
 3303              		.loc 1 777 0
 3304 058e 344B     		ldr	r3, .L168+40
 3305 0590 1B68     		ldr	r3, [r3]
 3306 0592 07F12401 		add	r1, r7, #36
 3307 0596 07F11002 		add	r2, r7, #16
 3308 059a 0846     		mov	r0, r1
 3309 059c 1146     		mov	r1, r2
 3310 059e 9847     		blx	r3
 778:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 3311              		.loc 1 778 0
 3312 05a0 3B68     		ldr	r3, [r7]
 3313 05a2 0022     		movs	r2, #0
 3314 05a4 1A60     		str	r2, [r3]
 779:bluetooth_rxtx.c **** 		break;
 3315              		.loc 1 779 0
 3316 05a6 A0E2     		b	.L122
 3317              	.L86:
 780:bluetooth_rxtx.c **** 
 781:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 782:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 3318              		.loc 1 782 0
 3319 05a8 2E4B     		ldr	r3, .L168+44
 3320 05aa 2F4A     		ldr	r2, .L168+48
 3321 05ac 1A60     		str	r2, [r3]
 783:bluetooth_rxtx.c **** 		reset();
 3322              		.loc 1 783 0
 3323 05ae FFF7FEFF 		bl	reset
 784:bluetooth_rxtx.c **** 		break;
 3324              		.loc 1 784 0
 3325 05b2 9AE2     		b	.L122
 3326              	.L87:
 785:bluetooth_rxtx.c **** 
 786:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 787:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 3327              		.loc 1 787 0
 3328 05b4 BB68     		ldr	r3, [r7, #8]
 3329 05b6 1B88     		ldrh	r3, [r3]
 3330 05b8 B3F5006F 		cmp	r3, #2048
 3331 05bc 17D9     		bls	.L145
 3332              		.loc 1 787 0 is_stmt 0 discriminator 1
 3333 05be BB68     		ldr	r3, [r7, #8]
 3334 05c0 1B88     		ldrh	r3, [r3]
 3335 05c2 B3F5406F 		cmp	r3, #3072
 3336 05c6 12D8     		bhi	.L145
 788:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3337              		.loc 1 788 0 is_stmt 1 discriminator 2
 3338 05c8 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccfQkuUX.s 			page 72


 3339 05ca 0233     		adds	r3, r3, #2
 3340 05cc 1B88     		ldrh	r3, [r3]
 787:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3341              		.loc 1 787 0 discriminator 2
 3342 05ce B3F5006F 		cmp	r3, #2048
 3343 05d2 0CD9     		bls	.L145
 3344              		.loc 1 788 0
 3345 05d4 BB68     		ldr	r3, [r7, #8]
 3346 05d6 0233     		adds	r3, r3, #2
 3347 05d8 1B88     		ldrh	r3, [r3]
 3348 05da B3F5406F 		cmp	r3, #3072
 3349 05de 06D8     		bhi	.L145
 789:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 3350              		.loc 1 789 0 discriminator 1
 3351 05e0 BB68     		ldr	r3, [r7, #8]
 3352 05e2 0233     		adds	r3, r3, #2
 3353 05e4 1A88     		ldrh	r2, [r3]
 3354 05e6 BB68     		ldr	r3, [r7, #8]
 3355 05e8 1B88     		ldrh	r3, [r3]
 788:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 3356              		.loc 1 788 0 discriminator 1
 3357 05ea 9A42     		cmp	r2, r3
 3358 05ec 01D2     		bcs	.L146
 3359              	.L145:
 790:bluetooth_rxtx.c **** 			return 0;
 3360              		.loc 1 790 0
 3361 05ee 0023     		movs	r3, #0
 3362 05f0 7CE2     		b	.L164
 3363              	.L146:
 791:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 3364              		.loc 1 791 0
 3365 05f2 BB68     		ldr	r3, [r7, #8]
 3366 05f4 1A88     		ldrh	r2, [r3]
 3367 05f6 1D4B     		ldr	r3, .L168+52
 3368 05f8 1A80     		strh	r2, [r3]	@ movhi
 792:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 3369              		.loc 1 792 0
 3370 05fa BB68     		ldr	r3, [r7, #8]
 3371 05fc 5A88     		ldrh	r2, [r3, #2]
 3372 05fe 1C4B     		ldr	r3, .L168+56
 3373 0600 1A80     		strh	r2, [r3]	@ movhi
 793:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 3374              		.loc 1 793 0
 3375 0602 104B     		ldr	r3, .L168+12
 3376 0604 0422     		movs	r2, #4
 3377 0606 1A70     		strb	r2, [r3]
 794:bluetooth_rxtx.c **** 		*data_len = 0;
 3378              		.loc 1 794 0
 3379 0608 3B68     		ldr	r3, [r7]
 3380 060a 0022     		movs	r2, #0
 3381 060c 1A60     		str	r2, [r3]
 795:bluetooth_rxtx.c **** 		break;
 3382              		.loc 1 795 0
 3383 060e 6CE2     		b	.L122
 3384              	.L94:
 796:bluetooth_rxtx.c **** 
 797:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
ARM GAS  /tmp/ccfQkuUX.s 			page 73


 798:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 3385              		.loc 1 798 0
 3386 0610 BB68     		ldr	r3, [r7, #8]
 3387 0612 1B88     		ldrh	r3, [r3]
 3388 0614 B3F5807F 		cmp	r3, #256
 3389 0618 01D9     		bls	.L147
 799:bluetooth_rxtx.c **** 			return 0;
 3390              		.loc 1 799 0
 3391 061a 0023     		movs	r3, #0
 3392 061c 66E2     		b	.L164
 3393              	.L147:
 800:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 3394              		.loc 1 800 0
 3395 061e BB68     		ldr	r3, [r7, #8]
 3396 0620 1B88     		ldrh	r3, [r3]
 3397 0622 DAB2     		uxtb	r2, r3
 3398 0624 134B     		ldr	r3, .L168+60
 3399 0626 1A70     		strb	r2, [r3]
 801:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 3400              		.loc 1 801 0
 3401 0628 064B     		ldr	r3, .L168+12
 3402 062a 0722     		movs	r2, #7
 3403 062c 1A70     		strb	r2, [r3]
 802:bluetooth_rxtx.c **** 		*data_len = 0;
 3404              		.loc 1 802 0
 3405 062e 3B68     		ldr	r3, [r7]
 3406 0630 0022     		movs	r2, #0
 3407 0632 1A60     		str	r2, [r3]
 803:bluetooth_rxtx.c **** 		break;
 3408              		.loc 1 803 0
 3409 0634 59E2     		b	.L122
 3410              	.L169:
 3411 0636 00BF     		.align	2
 3412              	.L168:
 3413 0638 5CC00920 		.word	537509980
 3414 063c 54C00920 		.word	537509972
 3415 0640 58C00920 		.word	537509976
 3416 0644 00000000 		.word	requested_mode
 3417 0648 00000000 		.word	rr
 3418 064c 00000000 		.word	modulation
 3419 0650 00000000 		.word	channel
 3420 0654 00000000 		.word	requested_channel
 3421 0658 00000000 		.word	hop_mode
 3422 065c 00000000 		.word	mode
 3423 0660 00000000 		.word	iap_entry
 3424 0664 00000000 		.word	bootloader_ctrl
 3425 0668 21BB0543 		.word	1124449057
 3426 066c 00000000 		.word	low_freq
 3427 0670 00000000 		.word	high_freq
 3428 0674 00000000 		.word	rssi_threshold
 3429              	.L93:
 804:bluetooth_rxtx.c **** 
 805:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 806:bluetooth_rxtx.c **** 		data[0] = 0x00;
 3430              		.loc 1 806 0
 3431 0678 7B68     		ldr	r3, [r7, #4]
 3432 067a 0022     		movs	r2, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 74


 3433 067c 1A70     		strb	r2, [r3]
 807:bluetooth_rxtx.c **** 		data[1] = 0x00;
 3434              		.loc 1 807 0
 3435 067e 7B68     		ldr	r3, [r7, #4]
 3436 0680 0133     		adds	r3, r3, #1
 3437 0682 0022     		movs	r2, #0
 3438 0684 1A70     		strb	r2, [r3]
 808:bluetooth_rxtx.c **** 
 809:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 3439              		.loc 1 809 0
 3440 0686 A448     		ldr	r0, .L170
 3441 0688 FFF7FEFF 		bl	strlen
 3442 068c 0346     		mov	r3, r0
 3443 068e 87F84330 		strb	r3, [r7, #67]
 810:bluetooth_rxtx.c **** 		data[2] = length;
 3444              		.loc 1 810 0
 3445 0692 7B68     		ldr	r3, [r7, #4]
 3446 0694 0233     		adds	r3, r3, #2
 3447 0696 97F84320 		ldrb	r2, [r7, #67]
 3448 069a 1A70     		strb	r2, [r3]
 811:bluetooth_rxtx.c **** 
 812:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 3449              		.loc 1 812 0
 3450 069c 7B68     		ldr	r3, [r7, #4]
 3451 069e DA1C     		adds	r2, r3, #3
 3452 06a0 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3453 06a4 1046     		mov	r0, r2
 3454 06a6 9C49     		ldr	r1, .L170
 3455 06a8 1A46     		mov	r2, r3
 3456 06aa FFF7FEFF 		bl	memcpy
 813:bluetooth_rxtx.c **** 
 814:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 3457              		.loc 1 814 0
 3458 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3459 06b2 DA1C     		adds	r2, r3, #3
 3460 06b4 3B68     		ldr	r3, [r7]
 3461 06b6 1A60     		str	r2, [r3]
 815:bluetooth_rxtx.c **** 		break;
 3462              		.loc 1 815 0
 3463 06b8 17E2     		b	.L122
 3464              	.L115:
 816:bluetooth_rxtx.c **** 
 817:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 818:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 3465              		.loc 1 818 0
 3466 06ba 9848     		ldr	r0, .L170+4
 3467 06bc FFF7FEFF 		bl	strlen
 3468 06c0 0346     		mov	r3, r0
 3469 06c2 87F84330 		strb	r3, [r7, #67]
 819:bluetooth_rxtx.c **** 		data[0] = length;
 3470              		.loc 1 819 0
 3471 06c6 7B68     		ldr	r3, [r7, #4]
 3472 06c8 97F84320 		ldrb	r2, [r7, #67]
 3473 06cc 1A70     		strb	r2, [r3]
 820:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 3474              		.loc 1 820 0
 3475 06ce 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccfQkuUX.s 			page 75


 3476 06d0 5A1C     		adds	r2, r3, #1
 3477 06d2 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3478 06d6 1046     		mov	r0, r2
 3479 06d8 9049     		ldr	r1, .L170+4
 3480 06da 1A46     		mov	r2, r3
 3481 06dc FFF7FEFF 		bl	memcpy
 821:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 3482              		.loc 1 821 0
 3483 06e0 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 3484 06e4 5A1C     		adds	r2, r3, #1
 3485 06e6 3B68     		ldr	r3, [r7]
 3486 06e8 1A60     		str	r2, [r3]
 822:bluetooth_rxtx.c **** 		break;
 3487              		.loc 1 822 0
 3488 06ea FEE1     		b	.L122
 3489              	.L95:
 823:bluetooth_rxtx.c **** 
 824:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 825:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 3490              		.loc 1 825 0
 3491 06ec 7B68     		ldr	r3, [r7, #4]
 3492 06ee 0122     		movs	r2, #1
 3493 06f0 1A70     		strb	r2, [r3]
 826:bluetooth_rxtx.c **** 		*data_len = 1;
 3494              		.loc 1 826 0
 3495 06f2 3B68     		ldr	r3, [r7]
 3496 06f4 0122     		movs	r2, #1
 3497 06f6 1A60     		str	r2, [r3]
 827:bluetooth_rxtx.c **** 		break;
 3498              		.loc 1 827 0
 3499 06f8 F7E1     		b	.L122
 3500              	.L96:
 828:bluetooth_rxtx.c **** 
 829:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 830:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 3501              		.loc 1 830 0
 3502 06fa BB68     		ldr	r3, [r7, #8]
 3503 06fc 1B88     		ldrh	r3, [r3]
 3504 06fe DAB2     		uxtb	r2, r3
 3505 0700 874B     		ldr	r3, .L170+8
 3506 0702 1A70     		strb	r2, [r3]
 831:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3507              		.loc 1 831 0
 3508 0704 FFF7FEFF 		bl	cs_threshold_calc_and_set
 832:bluetooth_rxtx.c **** 		break;
 3509              		.loc 1 832 0
 3510 0708 EFE1     		b	.L122
 3511              	.L97:
 833:bluetooth_rxtx.c **** 
 834:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 835:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 3512              		.loc 1 835 0
 3513 070a 854B     		ldr	r3, .L170+8
 3514 070c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3515 070e DAB2     		uxtb	r2, r3
 3516 0710 7B68     		ldr	r3, [r7, #4]
 3517 0712 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 76


 836:bluetooth_rxtx.c **** 		*data_len = 1;
 3518              		.loc 1 836 0
 3519 0714 3B68     		ldr	r3, [r7]
 3520 0716 0122     		movs	r2, #1
 3521 0718 1A60     		str	r2, [r3]
 837:bluetooth_rxtx.c **** 		break;
 3522              		.loc 1 837 0
 3523 071a E6E1     		b	.L122
 3524              	.L98:
 838:bluetooth_rxtx.c **** 
 839:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 840:bluetooth_rxtx.c **** 		target.address = 0;
 3525              		.loc 1 840 0
 3526 071c 8149     		ldr	r1, .L170+12
 3527 071e 4FF00002 		mov	r2, #0
 3528 0722 4FF00003 		mov	r3, #0
 3529 0726 C1E90023 		strd	r2, [r1]
 841:bluetooth_rxtx.c **** 		target.access_code = 0;
 3530              		.loc 1 841 0
 3531 072a 7E49     		ldr	r1, .L170+12
 3532 072c 4FF00002 		mov	r2, #0
 3533 0730 4FF00003 		mov	r3, #0
 3534 0734 C1E90223 		strd	r2, [r1, #8]
 842:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3535              		.loc 1 842 0
 3536 0738 0023     		movs	r3, #0
 3537 073a FB64     		str	r3, [r7, #76]
 3538 073c 25E0     		b	.L148
 3539              	.L149:
 843:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3540              		.loc 1 843 0 discriminator 3
 3541 073e 794B     		ldr	r3, .L170+12
 3542 0740 D3E900AB 		ldrd	r10, [r3]
 3543 0744 FB6C     		ldr	r3, [r7, #76]
 3544 0746 7A68     		ldr	r2, [r7, #4]
 3545 0748 1344     		add	r3, r3, r2
 3546 074a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3547 074c DAB2     		uxtb	r2, r3
 3548 074e 4FF00003 		mov	r3, #0
 3549 0752 F96C     		ldr	r1, [r7, #76]
 3550 0754 C900     		lsls	r1, r1, #3
 3551 0756 A1F12006 		sub	r6, r1, #32
 3552 075a C1F12000 		rsb	r0, r1, #32
 3553 075e 03FA01F9 		lsl	r9, r3, r1
 3554 0762 02FA06F6 		lsl	r6, r2, r6
 3555 0766 49EA0609 		orr	r9, r9, r6
 3556 076a 22FA00F0 		lsr	r0, r2, r0
 3557 076e 49EA0009 		orr	r9, r9, r0
 3558 0772 02FA01F8 		lsl	r8, r2, r1
 3559 0776 4AEA0802 		orr	r2, r10, r8
 3560 077a 4BEA0903 		orr	r3, fp, r9
 3561 077e 6949     		ldr	r1, .L170+12
 3562 0780 C1E90023 		strd	r2, [r1]
 842:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3563              		.loc 1 842 0 discriminator 3
 3564 0784 FB6C     		ldr	r3, [r7, #76]
 3565 0786 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccfQkuUX.s 			page 77


 3566 0788 FB64     		str	r3, [r7, #76]
 3567              	.L148:
 842:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3568              		.loc 1 842 0 is_stmt 0 discriminator 1
 3569 078a FB6C     		ldr	r3, [r7, #76]
 3570 078c 072B     		cmp	r3, #7
 3571 078e D6DD     		ble	.L149
 844:bluetooth_rxtx.c **** 		}
 845:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3572              		.loc 1 845 0 is_stmt 1
 3573 0790 0023     		movs	r3, #0
 3574 0792 FB64     		str	r3, [r7, #76]
 3575 0794 24E0     		b	.L150
 3576              	.L151:
 846:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3577              		.loc 1 846 0 discriminator 3
 3578 0796 634B     		ldr	r3, .L170+12
 3579 0798 D3E90289 		ldrd	r8, [r3, #8]
 3580 079c FB6C     		ldr	r3, [r7, #76]
 3581 079e 0833     		adds	r3, r3, #8
 3582 07a0 7A68     		ldr	r2, [r7, #4]
 3583 07a2 1344     		add	r3, r3, r2
 3584 07a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3585 07a6 DAB2     		uxtb	r2, r3
 3586 07a8 4FF00003 		mov	r3, #0
 3587 07ac F96C     		ldr	r1, [r7, #76]
 3588 07ae C900     		lsls	r1, r1, #3
 3589 07b0 A1F12006 		sub	r6, r1, #32
 3590 07b4 C1F12000 		rsb	r0, r1, #32
 3591 07b8 03FA01F5 		lsl	r5, r3, r1
 3592 07bc 02FA06F6 		lsl	r6, r2, r6
 3593 07c0 3543     		orrs	r5, r5, r6
 3594 07c2 22FA00F0 		lsr	r0, r2, r0
 3595 07c6 0543     		orrs	r5, r5, r0
 3596 07c8 02FA01F4 		lsl	r4, r2, r1
 3597 07cc 48EA0402 		orr	r2, r8, r4
 3598 07d0 49EA0503 		orr	r3, r9, r5
 3599 07d4 5349     		ldr	r1, .L170+12
 3600 07d6 C1E90223 		strd	r2, [r1, #8]
 845:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3601              		.loc 1 845 0 discriminator 3
 3602 07da FB6C     		ldr	r3, [r7, #76]
 3603 07dc 0133     		adds	r3, r3, #1
 3604 07de FB64     		str	r3, [r7, #76]
 3605              	.L150:
 845:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3606              		.loc 1 845 0 is_stmt 0 discriminator 1
 3607 07e0 FB6C     		ldr	r3, [r7, #76]
 3608 07e2 072B     		cmp	r3, #7
 3609 07e4 D7DD     		ble	.L151
 847:bluetooth_rxtx.c **** 		}
 848:bluetooth_rxtx.c **** 		break;
 3610              		.loc 1 848 0 is_stmt 1
 3611 07e6 80E1     		b	.L122
 3612              	.L99:
 849:bluetooth_rxtx.c **** 
 850:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
ARM GAS  /tmp/ccfQkuUX.s 			page 78


 851:bluetooth_rxtx.c **** 		clock_offset = 0;
 3613              		.loc 1 851 0
 3614 07e8 0023     		movs	r3, #0
 3615 07ea BB64     		str	r3, [r7, #72]
 852:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3616              		.loc 1 852 0
 3617 07ec 0023     		movs	r3, #0
 3618 07ee FB64     		str	r3, [r7, #76]
 3619 07f0 0DE0     		b	.L152
 3620              	.L153:
 853:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3621              		.loc 1 853 0 discriminator 3
 3622 07f2 BB6C     		ldr	r3, [r7, #72]
 3623 07f4 1B02     		lsls	r3, r3, #8
 3624 07f6 BB64     		str	r3, [r7, #72]
 854:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3625              		.loc 1 854 0 discriminator 3
 3626 07f8 FB6C     		ldr	r3, [r7, #76]
 3627 07fa 7A68     		ldr	r2, [r7, #4]
 3628 07fc 1344     		add	r3, r3, r2
 3629 07fe 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3630 0800 1A46     		mov	r2, r3
 3631 0802 BB6C     		ldr	r3, [r7, #72]
 3632 0804 1343     		orrs	r3, r3, r2
 3633 0806 BB64     		str	r3, [r7, #72]
 852:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3634              		.loc 1 852 0 discriminator 3
 3635 0808 FB6C     		ldr	r3, [r7, #76]
 3636 080a 0133     		adds	r3, r3, #1
 3637 080c FB64     		str	r3, [r7, #76]
 3638              	.L152:
 852:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3639              		.loc 1 852 0 is_stmt 0 discriminator 1
 3640 080e FB6C     		ldr	r3, [r7, #76]
 3641 0810 032B     		cmp	r3, #3
 3642 0812 EEDD     		ble	.L153
 855:bluetooth_rxtx.c **** 		}
 856:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3643              		.loc 1 856 0 is_stmt 1
 3644 0814 444B     		ldr	r3, .L170+16
 3645 0816 1A68     		ldr	r2, [r3]
 3646 0818 BB6C     		ldr	r3, [r7, #72]
 3647 081a 1344     		add	r3, r3, r2
 3648 081c 424A     		ldr	r2, .L170+16
 3649 081e 1360     		str	r3, [r2]
 857:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3650              		.loc 1 857 0
 3651 0820 424B     		ldr	r3, .L170+20
 3652 0822 0222     		movs	r2, #2
 3653 0824 1A70     		strb	r2, [r3]
 858:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3654              		.loc 1 858 0
 3655 0826 424B     		ldr	r3, .L170+24
 3656 0828 0822     		movs	r2, #8
 3657 082a 1A70     		strb	r2, [r3]
 859:bluetooth_rxtx.c **** 		break;
 3658              		.loc 1 859 0
ARM GAS  /tmp/ccfQkuUX.s 			page 79


 3659 082c 5DE1     		b	.L122
 3660              	.L100:
 860:bluetooth_rxtx.c **** 
 861:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 862:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3661              		.loc 1 862 0
 3662 082e 7B68     		ldr	r3, [r7, #4]
 3663 0830 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3664 0832 1A46     		mov	r2, r3
 3665 0834 7B68     		ldr	r3, [r7, #4]
 3666 0836 0133     		adds	r3, r3, #1
 3667 0838 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3668 083a 1B02     		lsls	r3, r3, #8
 3669 083c 1A43     		orrs	r2, r2, r3
 3670 083e 7B68     		ldr	r3, [r7, #4]
 3671 0840 0233     		adds	r3, r3, #2
 3672 0842 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3673 0844 1B04     		lsls	r3, r3, #16
 3674 0846 1A43     		orrs	r2, r2, r3
 3675 0848 7B68     		ldr	r3, [r7, #4]
 3676 084a 0333     		adds	r3, r3, #3
 3677 084c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3678 084e 1B06     		lsls	r3, r3, #24
 3679 0850 1343     		orrs	r3, r3, r2
 3680 0852 FB63     		str	r3, [r7, #60]
 863:bluetooth_rxtx.c **** 		clkn = clock;
 3681              		.loc 1 863 0
 3682 0854 344A     		ldr	r2, .L170+16
 3683 0856 FB6B     		ldr	r3, [r7, #60]
 3684 0858 1360     		str	r3, [r2]
 864:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3685              		.loc 1 864 0
 3686 085a FFF7FEFF 		bl	cs_threshold_calc_and_set
 865:bluetooth_rxtx.c **** 		break;
 3687              		.loc 1 865 0
 3688 085e 44E1     		b	.L122
 3689              	.L111:
 866:bluetooth_rxtx.c **** 
 867:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 868:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3690              		.loc 1 868 0
 3691 0860 0023     		movs	r3, #0
 3692 0862 FB64     		str	r3, [r7, #76]
 3693 0864 0BE0     		b	.L154
 3694              	.L155:
 869:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3695              		.loc 1 869 0 discriminator 3
 3696 0866 FB6C     		ldr	r3, [r7, #76]
 3697 0868 7A68     		ldr	r2, [r7, #4]
 3698 086a 1344     		add	r3, r3, r2
 3699 086c 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3700 086e 314A     		ldr	r2, .L170+28
 3701 0870 FB6C     		ldr	r3, [r7, #76]
 3702 0872 1344     		add	r3, r3, r2
 3703 0874 0A46     		mov	r2, r1
 3704 0876 1A70     		strb	r2, [r3]
 868:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
ARM GAS  /tmp/ccfQkuUX.s 			page 80


 3705              		.loc 1 868 0 discriminator 3
 3706 0878 FB6C     		ldr	r3, [r7, #76]
 3707 087a 0133     		adds	r3, r3, #1
 3708 087c FB64     		str	r3, [r7, #76]
 3709              	.L154:
 868:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3710              		.loc 1 868 0 is_stmt 0 discriminator 1
 3711 087e FB6C     		ldr	r3, [r7, #76]
 3712 0880 092B     		cmp	r3, #9
 3713 0882 F0DD     		ble	.L155
 870:bluetooth_rxtx.c **** 		}
 871:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3714              		.loc 1 871 0 is_stmt 1
 3715 0884 2C4B     		ldr	r3, .L170+32
 3716 0886 0122     		movs	r2, #1
 3717 0888 1A70     		strb	r2, [r3]
 872:bluetooth_rxtx.c **** 		*data_len = 10;
 3718              		.loc 1 872 0
 3719 088a 3B68     		ldr	r3, [r7]
 3720 088c 0A22     		movs	r2, #10
 3721 088e 1A60     		str	r2, [r3]
 873:bluetooth_rxtx.c **** 		break;
 3722              		.loc 1 873 0
 3723 0890 2BE1     		b	.L122
 3724              	.L112:
 874:bluetooth_rxtx.c **** 
 875:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 876:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3725              		.loc 1 876 0
 3726 0892 0023     		movs	r3, #0
 3727 0894 FB64     		str	r3, [r7, #76]
 3728 0896 07E0     		b	.L156
 3729              	.L157:
 877:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3730              		.loc 1 877 0 discriminator 3
 3731 0898 264A     		ldr	r2, .L170+28
 3732 089a FB6C     		ldr	r3, [r7, #76]
 3733 089c 1344     		add	r3, r3, r2
 3734 089e 0022     		movs	r2, #0
 3735 08a0 1A70     		strb	r2, [r3]
 876:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3736              		.loc 1 876 0 discriminator 3
 3737 08a2 FB6C     		ldr	r3, [r7, #76]
 3738 08a4 0133     		adds	r3, r3, #1
 3739 08a6 FB64     		str	r3, [r7, #76]
 3740              	.L156:
 876:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3741              		.loc 1 876 0 is_stmt 0 discriminator 1
 3742 08a8 FB6C     		ldr	r3, [r7, #76]
 3743 08aa 092B     		cmp	r3, #9
 3744 08ac F4DD     		ble	.L157
 878:bluetooth_rxtx.c **** 		}
 879:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3745              		.loc 1 879 0 is_stmt 1
 3746 08ae 224B     		ldr	r3, .L170+32
 3747 08b0 0022     		movs	r2, #0
 3748 08b2 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 81


 880:bluetooth_rxtx.c **** 		*data_len = 10;
 3749              		.loc 1 880 0
 3750 08b4 3B68     		ldr	r3, [r7]
 3751 08b6 0A22     		movs	r2, #10
 3752 08b8 1A60     		str	r2, [r3]
 881:bluetooth_rxtx.c **** 		break;
 3753              		.loc 1 881 0
 3754 08ba 16E1     		b	.L122
 3755              	.L101:
 882:bluetooth_rxtx.c **** 
 883:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 884:bluetooth_rxtx.c **** 		clock = clkn;
 3756              		.loc 1 884 0
 3757 08bc 1A4B     		ldr	r3, .L170+16
 3758 08be 1B68     		ldr	r3, [r3]
 3759 08c0 FB63     		str	r3, [r7, #60]
 885:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3760              		.loc 1 885 0
 3761 08c2 0023     		movs	r3, #0
 3762 08c4 FB64     		str	r3, [r7, #76]
 3763 08c6 0CE0     		b	.L158
 3764              	.L159:
 886:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3765              		.loc 1 886 0 discriminator 3
 3766 08c8 FB6C     		ldr	r3, [r7, #76]
 3767 08ca 7A68     		ldr	r2, [r7, #4]
 3768 08cc 1344     		add	r3, r3, r2
 3769 08ce FA6C     		ldr	r2, [r7, #76]
 3770 08d0 D200     		lsls	r2, r2, #3
 3771 08d2 F96B     		ldr	r1, [r7, #60]
 3772 08d4 21FA02F2 		lsr	r2, r1, r2
 3773 08d8 D2B2     		uxtb	r2, r2
 3774 08da 1A70     		strb	r2, [r3]
 885:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3775              		.loc 1 885 0 discriminator 3
 3776 08dc FB6C     		ldr	r3, [r7, #76]
 3777 08de 0133     		adds	r3, r3, #1
 3778 08e0 FB64     		str	r3, [r7, #76]
 3779              	.L158:
 885:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3780              		.loc 1 885 0 is_stmt 0 discriminator 1
 3781 08e2 FB6C     		ldr	r3, [r7, #76]
 3782 08e4 032B     		cmp	r3, #3
 3783 08e6 EFDD     		ble	.L159
 887:bluetooth_rxtx.c **** 		}
 888:bluetooth_rxtx.c **** 		*data_len = 4;
 3784              		.loc 1 888 0 is_stmt 1
 3785 08e8 3B68     		ldr	r3, [r7]
 3786 08ea 0422     		movs	r2, #4
 3787 08ec 1A60     		str	r2, [r3]
 889:bluetooth_rxtx.c **** 		break;
 3788              		.loc 1 889 0
 3789 08ee FCE0     		b	.L122
 3790              	.L102:
 890:bluetooth_rxtx.c **** 
 891:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 892:bluetooth_rxtx.c **** 		*data_len = 0;
ARM GAS  /tmp/ccfQkuUX.s 			page 82


 3791              		.loc 1 892 0
 3792 08f0 3B68     		ldr	r3, [r7]
 3793 08f2 0022     		movs	r2, #0
 3794 08f4 1A60     		str	r2, [r3]
 893:bluetooth_rxtx.c **** 
 894:bluetooth_rxtx.c **** 		do_hop = 0;
 3795              		.loc 1 894 0
 3796 08f6 114B     		ldr	r3, .L170+36
 3797 08f8 0022     		movs	r2, #0
 3798 08fa 1A70     		strb	r2, [r3]
 895:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3799              		.loc 1 895 0
 3800 08fc 0B4B     		ldr	r3, .L170+20
 3801 08fe 0322     		movs	r2, #3
 3802 0900 1A70     		strb	r2, [r3]
 896:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3803              		.loc 1 896 0
 3804 0902 0B4B     		ldr	r3, .L170+24
 3805 0904 0922     		movs	r2, #9
 3806 0906 1A70     		strb	r2, [r3]
 897:bluetooth_rxtx.c **** 
 898:bluetooth_rxtx.c **** 		queue_init();
 3807              		.loc 1 898 0
 3808 0908 FFF7FEFF 		bl	queue_init
 899:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3809              		.loc 1 899 0
 3810 090c FFF7FEFF 		bl	cs_threshold_calc_and_set
 900:bluetooth_rxtx.c **** 		break;
 3811              		.loc 1 900 0
 3812 0910 EBE0     		b	.L122
 3813              	.L103:
 901:bluetooth_rxtx.c **** 
 902:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 903:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3814              		.loc 1 903 0
 3815 0912 0023     		movs	r3, #0
 3816 0914 FB64     		str	r3, [r7, #76]
 3817 0916 21E0     		b	.L160
 3818              	.L171:
 3819              		.align	2
 3820              	.L170:
 3821 0918 D4080000 		.word	.LC3
 3822 091c 00000000 		.word	compile_info
 3823 0920 00000000 		.word	cs_threshold_req
 3824 0924 00000000 		.word	target
 3825 0928 00000000 		.word	clkn
 3826 092c 00000000 		.word	hop_mode
 3827 0930 00000000 		.word	requested_mode
 3828 0934 00000000 		.word	afh_map
 3829 0938 00000000 		.word	afh_enabled
 3830 093c 00000000 		.word	do_hop
 3831              	.L161:
 904:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3832              		.loc 1 904 0 discriminator 3
 3833 0940 FB6C     		ldr	r3, [r7, #76]
 3834 0942 7A68     		ldr	r2, [r7, #4]
 3835 0944 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccfQkuUX.s 			page 83


 3836 0946 6C4A     		ldr	r2, .L172
 3837 0948 1168     		ldr	r1, [r2]
 3838 094a FA6C     		ldr	r2, [r7, #76]
 3839 094c D200     		lsls	r2, r2, #3
 3840 094e 21FA02F2 		lsr	r2, r1, r2
 3841 0952 D2B2     		uxtb	r2, r2
 3842 0954 1A70     		strb	r2, [r3]
 903:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3843              		.loc 1 903 0 discriminator 3
 3844 0956 FB6C     		ldr	r3, [r7, #76]
 3845 0958 0133     		adds	r3, r3, #1
 3846 095a FB64     		str	r3, [r7, #76]
 3847              	.L160:
 903:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3848              		.loc 1 903 0 is_stmt 0 discriminator 1
 3849 095c FB6C     		ldr	r3, [r7, #76]
 3850 095e 032B     		cmp	r3, #3
 3851 0960 EEDD     		ble	.L161
 905:bluetooth_rxtx.c **** 		}
 906:bluetooth_rxtx.c **** 		*data_len = 4;
 3852              		.loc 1 906 0 is_stmt 1
 3853 0962 3B68     		ldr	r3, [r7]
 3854 0964 0422     		movs	r2, #4
 3855 0966 1A60     		str	r2, [r3]
 907:bluetooth_rxtx.c **** 		break;
 3856              		.loc 1 907 0
 3857 0968 BFE0     		b	.L122
 3858              	.L104:
 908:bluetooth_rxtx.c **** 
 909:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 910:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3859              		.loc 1 910 0
 3860 096a 7B68     		ldr	r3, [r7, #4]
 3861 096c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3862 096e 1A46     		mov	r2, r3
 3863 0970 7B68     		ldr	r3, [r7, #4]
 3864 0972 0133     		adds	r3, r3, #1
 3865 0974 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3866 0976 1B02     		lsls	r3, r3, #8
 3867 0978 1A43     		orrs	r2, r2, r3
 3868 097a 7B68     		ldr	r3, [r7, #4]
 3869 097c 0233     		adds	r3, r3, #2
 3870 097e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3871 0980 1B04     		lsls	r3, r3, #16
 3872 0982 1A43     		orrs	r2, r2, r3
 3873 0984 7B68     		ldr	r3, [r7, #4]
 3874 0986 0333     		adds	r3, r3, #3
 3875 0988 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3876 098a 1B06     		lsls	r3, r3, #24
 3877 098c 1343     		orrs	r3, r3, r2
 3878 098e 1846     		mov	r0, r3
 3879 0990 FFF7FEFF 		bl	le_set_access_address
 911:bluetooth_rxtx.c **** 		le.target_set = 1;
 3880              		.loc 1 911 0
 3881 0994 584B     		ldr	r3, .L172
 3882 0996 0122     		movs	r2, #1
 3883 0998 DA63     		str	r2, [r3, #60]
ARM GAS  /tmp/ccfQkuUX.s 			page 84


 912:bluetooth_rxtx.c **** 		break;
 3884              		.loc 1 912 0
 3885 099a A6E0     		b	.L122
 3886              	.L106:
 913:bluetooth_rxtx.c **** 
 914:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 915:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 916:bluetooth_rxtx.c **** 		break;
 917:bluetooth_rxtx.c **** 
 918:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 919:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 920:bluetooth_rxtx.c **** 		// don't commit here please
 921:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3887              		.loc 1 921 0
 3888 099c 7B68     		ldr	r3, [r7, #4]
 3889 099e 1322     		movs	r2, #19
 3890 09a0 1A70     		strb	r2, [r3]
 922:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3891              		.loc 1 922 0
 3892 09a2 7B68     		ldr	r3, [r7, #4]
 3893 09a4 0133     		adds	r3, r3, #1
 3894 09a6 3722     		movs	r2, #55
 3895 09a8 1A70     		strb	r2, [r3]
 923:bluetooth_rxtx.c **** 		*data_len = 2;
 3896              		.loc 1 923 0
 3897 09aa 3B68     		ldr	r3, [r7]
 3898 09ac 0222     		movs	r2, #2
 3899 09ae 1A60     		str	r2, [r3]
 924:bluetooth_rxtx.c **** 		break;
 3900              		.loc 1 924 0
 3901 09b0 9BE0     		b	.L122
 3902              	.L107:
 925:bluetooth_rxtx.c **** 
 926:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 927:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3903              		.loc 1 927 0
 3904 09b2 514B     		ldr	r3, .L172
 3905 09b4 1B69     		ldr	r3, [r3, #16]
 3906 09b6 002B     		cmp	r3, #0
 3907 09b8 14BF     		ite	ne
 3908 09ba 0123     		movne	r3, #1
 3909 09bc 0023     		moveq	r3, #0
 3910 09be DBB2     		uxtb	r3, r3
 3911 09c0 1A46     		mov	r2, r3
 3912 09c2 7B68     		ldr	r3, [r7, #4]
 3913 09c4 1A70     		strb	r2, [r3]
 928:bluetooth_rxtx.c **** 		*data_len = 1;
 3914              		.loc 1 928 0
 3915 09c6 3B68     		ldr	r3, [r7]
 3916 09c8 0122     		movs	r2, #1
 3917 09ca 1A60     		str	r2, [r3]
 929:bluetooth_rxtx.c **** 		break;
 3918              		.loc 1 929 0
 3919 09cc 8DE0     		b	.L122
 3920              	.L108:
 930:bluetooth_rxtx.c **** 
 931:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
ARM GAS  /tmp/ccfQkuUX.s 			page 85


 932:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3921              		.loc 1 932 0
 3922 09ce BB68     		ldr	r3, [r7, #8]
 3923 09d0 1B88     		ldrh	r3, [r3]
 3924 09d2 002B     		cmp	r3, #0
 3925 09d4 14BF     		ite	ne
 3926 09d6 0123     		movne	r3, #1
 3927 09d8 0023     		moveq	r3, #0
 3928 09da DBB2     		uxtb	r3, r3
 3929 09dc 1A46     		mov	r2, r3
 3930 09de 464B     		ldr	r3, .L172
 3931 09e0 1A61     		str	r2, [r3, #16]
 933:bluetooth_rxtx.c **** 		break;
 3932              		.loc 1 933 0
 3933 09e2 82E0     		b	.L122
 3934              	.L109:
 934:bluetooth_rxtx.c **** 
 935:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 936:bluetooth_rxtx.c **** 		p = dequeue();
 3935              		.loc 1 936 0
 3936 09e4 FFF7FEFF 		bl	dequeue
 3937 09e8 7864     		str	r0, [r7, #68]
 937:bluetooth_rxtx.c **** 		if (p != NULL) {
 3938              		.loc 1 937 0
 3939 09ea 7B6C     		ldr	r3, [r7, #68]
 3940 09ec 002B     		cmp	r3, #0
 3941 09ee 08D0     		beq	.L162
 938:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3942              		.loc 1 938 0
 3943 09f0 7868     		ldr	r0, [r7, #4]
 3944 09f2 796C     		ldr	r1, [r7, #68]
 3945 09f4 4022     		movs	r2, #64
 3946 09f6 FFF7FEFF 		bl	memcpy
 939:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3947              		.loc 1 939 0
 3948 09fa 3B68     		ldr	r3, [r7]
 3949 09fc 4022     		movs	r2, #64
 3950 09fe 1A60     		str	r2, [r3]
 940:bluetooth_rxtx.c **** 		} else {
 941:bluetooth_rxtx.c **** 			data[0] = 0;
 942:bluetooth_rxtx.c **** 			*data_len = 1;
 943:bluetooth_rxtx.c **** 		}
 944:bluetooth_rxtx.c **** 		break;
 3951              		.loc 1 944 0
 3952 0a00 73E0     		b	.L122
 3953              	.L162:
 941:bluetooth_rxtx.c **** 			*data_len = 1;
 3954              		.loc 1 941 0
 3955 0a02 7B68     		ldr	r3, [r7, #4]
 3956 0a04 0022     		movs	r2, #0
 3957 0a06 1A70     		strb	r2, [r3]
 942:bluetooth_rxtx.c **** 		}
 3958              		.loc 1 942 0
 3959 0a08 3B68     		ldr	r3, [r7]
 3960 0a0a 0122     		movs	r2, #1
 3961 0a0c 1A60     		str	r2, [r3]
 3962              		.loc 1 944 0
ARM GAS  /tmp/ccfQkuUX.s 			page 86


 3963 0a0e 6CE0     		b	.L122
 3964              	.L110:
 945:bluetooth_rxtx.c **** 
 946:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 947:bluetooth_rxtx.c **** 		*data_len = 0;
 3965              		.loc 1 947 0
 3966 0a10 3B68     		ldr	r3, [r7]
 3967 0a12 0022     		movs	r2, #0
 3968 0a14 1A60     		str	r2, [r3]
 948:bluetooth_rxtx.c **** 
 949:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3969              		.loc 1 949 0
 3970 0a16 394B     		ldr	r3, .L172+4
 3971 0a18 0022     		movs	r2, #0
 3972 0a1a 1A70     		strb	r2, [r3]
 950:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3973              		.loc 1 950 0
 3974 0a1c 384B     		ldr	r3, .L172+8
 3975 0a1e 0A22     		movs	r2, #10
 3976 0a20 1A70     		strb	r2, [r3]
 951:bluetooth_rxtx.c **** 
 952:bluetooth_rxtx.c **** 		queue_init();
 3977              		.loc 1 952 0
 3978 0a22 FFF7FEFF 		bl	queue_init
 953:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3979              		.loc 1 953 0
 3980 0a26 FFF7FEFF 		bl	cs_threshold_calc_and_set
 954:bluetooth_rxtx.c **** 		break;
 3981              		.loc 1 954 0
 3982 0a2a 5EE0     		b	.L122
 3983              	.L113:
 955:bluetooth_rxtx.c **** 
 956:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 957:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3984              		.loc 1 957 0
 3985 0a2c BB68     		ldr	r3, [r7, #8]
 3986 0a2e 1B88     		ldrh	r3, [r3]
 3987 0a30 DBB2     		uxtb	r3, r3
 3988 0a32 1846     		mov	r0, r3
 3989 0a34 FFF7FEFF 		bl	cc2400_get
 3990 0a38 0346     		mov	r3, r0
 3991 0a3a 7B87     		strh	r3, [r7, #58]	@ movhi
 958:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3992              		.loc 1 958 0
 3993 0a3c 7B8F     		ldrh	r3, [r7, #58]
 3994 0a3e 1B0A     		lsrs	r3, r3, #8
 3995 0a40 9BB2     		uxth	r3, r3
 3996 0a42 DAB2     		uxtb	r2, r3
 3997 0a44 7B68     		ldr	r3, [r7, #4]
 3998 0a46 1A70     		strb	r2, [r3]
 959:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3999              		.loc 1 959 0
 4000 0a48 7B68     		ldr	r3, [r7, #4]
 4001 0a4a 0133     		adds	r3, r3, #1
 4002 0a4c 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 4003 0a4e D2B2     		uxtb	r2, r2
 4004 0a50 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 87


 960:bluetooth_rxtx.c **** 		*data_len = 2;
 4005              		.loc 1 960 0
 4006 0a52 3B68     		ldr	r3, [r7]
 4007 0a54 0222     		movs	r2, #2
 4008 0a56 1A60     		str	r2, [r3]
 961:bluetooth_rxtx.c **** 		break;
 4009              		.loc 1 961 0
 4010 0a58 47E0     		b	.L122
 4011              	.L117:
 962:bluetooth_rxtx.c **** 
 963:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 964:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 4012              		.loc 1 964 0
 4013 0a5a BB68     		ldr	r3, [r7, #8]
 4014 0a5c 1B88     		ldrh	r3, [r3]
 4015 0a5e DAB2     		uxtb	r2, r3
 4016 0a60 BB68     		ldr	r3, [r7, #8]
 4017 0a62 0233     		adds	r3, r3, #2
 4018 0a64 1B88     		ldrh	r3, [r3]
 4019 0a66 1046     		mov	r0, r2
 4020 0a68 1946     		mov	r1, r3
 4021 0a6a FFF7FEFF 		bl	cc2400_set
 965:bluetooth_rxtx.c **** 		break;
 4022              		.loc 1 965 0
 4023 0a6e 3CE0     		b	.L122
 4024              	.L114:
 966:bluetooth_rxtx.c **** 
 967:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 968:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 4025              		.loc 1 968 0
 4026 0a70 2448     		ldr	r0, .L172+12
 4027 0a72 7968     		ldr	r1, [r7, #4]
 4028 0a74 0622     		movs	r2, #6
 4029 0a76 FFF7FEFF 		bl	memcpy
 969:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 4030              		.loc 1 969 0
 4031 0a7a 214B     		ldr	r3, .L172+8
 4032 0a7c 0C22     		movs	r2, #12
 4033 0a7e 1A70     		strb	r2, [r3]
 970:bluetooth_rxtx.c **** 		break;
 4034              		.loc 1 970 0
 4035 0a80 33E0     		b	.L122
 4036              	.L116:
 971:bluetooth_rxtx.c **** 
 972:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 973:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 974:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 975:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 4037              		.loc 1 975 0
 4038 0a82 7B68     		ldr	r3, [r7, #4]
 4039 0a84 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 4040 0a86 1C4B     		ldr	r3, .L172
 4041 0a88 83F83420 		strb	r2, [r3, #52]
 976:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 4042              		.loc 1 976 0
 4043 0a8c 7B68     		ldr	r3, [r7, #4]
 4044 0a8e 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
ARM GAS  /tmp/ccfQkuUX.s 			page 88


 4045 0a90 194B     		ldr	r3, .L172
 4046 0a92 83F83520 		strb	r2, [r3, #53]
 977:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 4047              		.loc 1 977 0
 4048 0a96 7B68     		ldr	r3, [r7, #4]
 4049 0a98 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 4050 0a9a 174B     		ldr	r3, .L172
 4051 0a9c 83F83620 		strb	r2, [r3, #54]
 978:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 4052              		.loc 1 978 0
 4053 0aa0 7B68     		ldr	r3, [r7, #4]
 4054 0aa2 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 4055 0aa4 144B     		ldr	r3, .L172
 4056 0aa6 83F83720 		strb	r2, [r3, #55]
 979:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 4057              		.loc 1 979 0
 4058 0aaa 7B68     		ldr	r3, [r7, #4]
 4059 0aac 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 4060 0aae 124B     		ldr	r3, .L172
 4061 0ab0 83F83820 		strb	r2, [r3, #56]
 980:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 4062              		.loc 1 980 0
 4063 0ab4 7B68     		ldr	r3, [r7, #4]
 4064 0ab6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 4065 0ab8 0F4B     		ldr	r3, .L172
 4066 0aba 83F83920 		strb	r2, [r3, #57]
 981:bluetooth_rxtx.c **** 		le.target_set = 1;
 4067              		.loc 1 981 0
 4068 0abe 0E4B     		ldr	r3, .L172
 4069 0ac0 0122     		movs	r2, #1
 4070 0ac2 DA63     		str	r2, [r3, #60]
 982:bluetooth_rxtx.c **** 		break;
 4071              		.loc 1 982 0
 4072 0ac4 11E0     		b	.L122
 4073              	.L118:
 983:bluetooth_rxtx.c **** 
 984:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 985:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 986:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 4074              		.loc 1 986 0
 4075 0ac6 BB68     		ldr	r3, [r7, #8]
 4076 0ac8 1B88     		ldrh	r3, [r3]
 4077 0aca DAB2     		uxtb	r2, r3
 4078 0acc 0E4B     		ldr	r3, .L172+16
 4079 0ace 1A70     		strb	r2, [r3]
 987:bluetooth_rxtx.c **** 		break;
 4080              		.loc 1 987 0
 4081 0ad0 0BE0     		b	.L122
 4082              	.L119:
 988:bluetooth_rxtx.c **** #endif
 989:bluetooth_rxtx.c **** 
 990:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 991:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 992:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 993:bluetooth_rxtx.c **** 			return 0;
 994:bluetooth_rxtx.c **** #endif
 995:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
ARM GAS  /tmp/ccfQkuUX.s 			page 89


 4083              		.loc 1 995 0
 4084 0ad2 0B4B     		ldr	r3, .L172+8
 4085 0ad4 0D22     		movs	r2, #13
 4086 0ad6 1A70     		strb	r2, [r3]
 996:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 4087              		.loc 1 996 0
 4088 0ad8 BB68     		ldr	r3, [r7, #8]
 4089 0ada 1B88     		ldrh	r3, [r3]
 4090 0adc DAB2     		uxtb	r2, r3
 4091 0ade 0B4B     		ldr	r3, .L172+20
 4092 0ae0 1A70     		strb	r2, [r3]
 997:bluetooth_rxtx.c **** 		break;
 4093              		.loc 1 997 0
 4094 0ae2 02E0     		b	.L122
 4095              	.L60:
 998:bluetooth_rxtx.c **** 
 999:bluetooth_rxtx.c **** 	default:
1000:bluetooth_rxtx.c **** 		return 0;
 4096              		.loc 1 1000 0
 4097 0ae4 0023     		movs	r3, #0
 4098 0ae6 01E0     		b	.L164
 4099              	.L165:
 916:bluetooth_rxtx.c **** 
 4100              		.loc 1 916 0
 4101 0ae8 00BF     		nop
 4102              	.L122:
1001:bluetooth_rxtx.c **** 	}
1002:bluetooth_rxtx.c **** 	return 1;
 4103              		.loc 1 1002 0
 4104 0aea 0123     		movs	r3, #1
 4105              	.L164:
1003:bluetooth_rxtx.c **** }
 4106              		.loc 1 1003 0 discriminator 1
 4107 0aec 1846     		mov	r0, r3
 4108 0aee 5437     		adds	r7, r7, #84
 4109              		.cfi_def_cfa_offset 36
 4110 0af0 BD46     		mov	sp, r7
 4111              		.cfi_def_cfa_register 13
 4112              		@ sp needed
 4113 0af2 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 4114              	.L173:
 4115 0af6 00BF     		.align	2
 4116              	.L172:
 4117 0af8 00000000 		.word	le
 4118 0afc 00000000 		.word	hop_mode
 4119 0b00 00000000 		.word	requested_mode
 4120 0b04 00000000 		.word	slave_mac_address
 4121 0b08 00000000 		.word	jam_mode
 4122 0b0c 00000000 		.word	ego_mode
 4123              		.cfi_endproc
 4124              	.LFE12:
 4126              		.section	.text.clkn_init,"ax",%progbits
 4127              		.align	2
 4128              		.thumb
 4129              		.thumb_func
 4131              	clkn_init:
 4132              	.LFB13:
ARM GAS  /tmp/ccfQkuUX.s 			page 90


1004:bluetooth_rxtx.c **** 
1005:bluetooth_rxtx.c **** static void clkn_init()
1006:bluetooth_rxtx.c **** {
 4133              		.loc 1 1006 0
 4134              		.cfi_startproc
 4135              		@ args = 0, pretend = 0, frame = 0
 4136              		@ frame_needed = 1, uses_anonymous_args = 0
 4137              		@ link register save eliminated.
 4138 0000 80B4     		push	{r7}
 4139              		.cfi_def_cfa_offset 4
 4140              		.cfi_offset 7, -4
 4141 0002 00AF     		add	r7, sp, #0
 4142              		.cfi_def_cfa_register 7
1007:bluetooth_rxtx.c **** 	/*
1008:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
1009:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
1010:bluetooth_rxtx.c **** 	 * clock_start().
1011:bluetooth_rxtx.c **** 	 */
1012:bluetooth_rxtx.c **** 
1013:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
1014:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 4143              		.loc 1 1014 0
 4144 0004 0C4B     		ldr	r3, .L175
 4145 0006 0222     		movs	r2, #2
 4146 0008 1A60     		str	r2, [r3]
1015:bluetooth_rxtx.c **** 	clkn = 0;
 4147              		.loc 1 1015 0
 4148 000a 0C4B     		ldr	r3, .L175+4
 4149 000c 0022     		movs	r2, #0
 4150 000e 1A60     		str	r2, [r3]
1016:bluetooth_rxtx.c **** 
1017:bluetooth_rxtx.c **** #ifdef TC13BADGE
1018:bluetooth_rxtx.c **** 	/*
1019:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
1020:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
1021:bluetooth_rxtx.c **** 	 */
1022:bluetooth_rxtx.c **** 	T0PR = 2;
1023:bluetooth_rxtx.c **** #else
1024:bluetooth_rxtx.c **** 	/*
1025:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
1026:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
1027:bluetooth_rxtx.c **** 	 */
1028:bluetooth_rxtx.c **** 	T0PR = 4;
 4151              		.loc 1 1028 0
 4152 0010 0B4B     		ldr	r3, .L175+8
 4153 0012 0422     		movs	r2, #4
 4154 0014 1A60     		str	r2, [r3]
1029:bluetooth_rxtx.c **** #endif
1030:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
1031:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 4155              		.loc 1 1031 0
 4156 0016 0B4B     		ldr	r3, .L175+12
 4157 0018 40F63442 		movw	r2, #3124
 4158 001c 1A60     		str	r2, [r3]
1032:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 4159              		.loc 1 1032 0
 4160 001e 0A4B     		ldr	r3, .L175+16
ARM GAS  /tmp/ccfQkuUX.s 			page 91


 4161 0020 0322     		movs	r2, #3
 4162 0022 1A60     		str	r2, [r3]
1033:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 4163              		.loc 1 1033 0
 4164 0024 094B     		ldr	r3, .L175+20
 4165 0026 0222     		movs	r2, #2
 4166 0028 1A60     		str	r2, [r3]
1034:bluetooth_rxtx.c **** 
1035:bluetooth_rxtx.c **** 	/* start timer */
1036:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 4167              		.loc 1 1036 0
 4168 002a 034B     		ldr	r3, .L175
 4169 002c 0122     		movs	r2, #1
 4170 002e 1A60     		str	r2, [r3]
1037:bluetooth_rxtx.c **** }
 4171              		.loc 1 1037 0
 4172 0030 BD46     		mov	sp, r7
 4173              		.cfi_def_cfa_register 13
 4174              		@ sp needed
 4175 0032 5DF8047B 		ldr	r7, [sp], #4
 4176              		.cfi_restore 7
 4177              		.cfi_def_cfa_offset 0
 4178 0036 7047     		bx	lr
 4179              	.L176:
 4180              		.align	2
 4181              	.L175:
 4182 0038 04400040 		.word	1073758212
 4183 003c 00000000 		.word	clkn
 4184 0040 0C400040 		.word	1073758220
 4185 0044 18400040 		.word	1073758232
 4186 0048 14400040 		.word	1073758228
 4187 004c 00E100E0 		.word	-536813312
 4188              		.cfi_endproc
 4189              	.LFE13:
 4191              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 4192              		.align	2
 4193              		.global	TIMER0_IRQHandler
 4194              		.thumb
 4195              		.thumb_func
 4197              	TIMER0_IRQHandler:
 4198              	.LFB14:
1038:bluetooth_rxtx.c **** 
1039:bluetooth_rxtx.c **** /* Update CLKN. */
1040:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
1041:bluetooth_rxtx.c **** {
 4199              		.loc 1 1041 0
 4200              		.cfi_startproc
 4201              		@ args = 0, pretend = 0, frame = 8
 4202              		@ frame_needed = 1, uses_anonymous_args = 0
 4203              		@ link register save eliminated.
 4204 0000 80B4     		push	{r7}
 4205              		.cfi_def_cfa_offset 4
 4206              		.cfi_offset 7, -4
 4207 0002 83B0     		sub	sp, sp, #12
 4208              		.cfi_def_cfa_offset 16
 4209 0004 00AF     		add	r7, sp, #0
 4210              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccfQkuUX.s 			page 92


1042:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
1043:bluetooth_rxtx.c **** 	u32 next;
1044:bluetooth_rxtx.c **** 	u32 le_clk;
1045:bluetooth_rxtx.c **** 
1046:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 4211              		.loc 1 1046 0
 4212 0006 4FF04023 		mov	r3, #1073758208
 4213 000a 1B68     		ldr	r3, [r3]
 4214 000c 03F00103 		and	r3, r3, #1
 4215 0010 002B     		cmp	r3, #0
 4216 0012 6DD0     		beq	.L177
1047:bluetooth_rxtx.c **** 
1048:bluetooth_rxtx.c **** 		clkn++;
 4217              		.loc 1 1048 0
 4218 0014 394B     		ldr	r3, .L187
 4219 0016 1B68     		ldr	r3, [r3]
 4220 0018 0133     		adds	r3, r3, #1
 4221 001a 384A     		ldr	r2, .L187
 4222 001c 1360     		str	r3, [r2]
1049:bluetooth_rxtx.c **** 		next = clkn;
 4223              		.loc 1 1049 0
 4224 001e 374B     		ldr	r3, .L187
 4225 0020 1B68     		ldr	r3, [r3]
 4226 0022 7B60     		str	r3, [r7, #4]
1050:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 4227              		.loc 1 1050 0
 4228 0024 364B     		ldr	r3, .L187+4
 4229 0026 9B69     		ldr	r3, [r3, #24]
 4230 0028 7A68     		ldr	r2, [r7, #4]
 4231 002a D31A     		subs	r3, r2, r3
 4232 002c 03F00303 		and	r3, r3, #3
 4233 0030 3B60     		str	r3, [r7]
1051:bluetooth_rxtx.c **** 
1052:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
1053:bluetooth_rxtx.c **** 
1054:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
1055:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 4234              		.loc 1 1055 0
 4235 0032 344B     		ldr	r3, .L187+8
 4236 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4237 0036 002B     		cmp	r3, #0
 4238 0038 03D0     		beq	.L179
 4239              		.loc 1 1055 0 is_stmt 0 discriminator 1
 4240 003a 324B     		ldr	r3, .L187+8
 4241 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4242 003e 012B     		cmp	r3, #1
 4243 0040 09D1     		bne	.L180
 4244              	.L179:
1056:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4245              		.loc 1 1056 0 is_stmt 1
 4246 0042 7B68     		ldr	r3, [r7, #4]
 4247 0044 03F07F03 		and	r3, r3, #127
 4248 0048 002B     		cmp	r3, #0
 4249 004a 03D1     		bne	.L181
1057:bluetooth_rxtx.c **** 				do_hop = 1;
 4250              		.loc 1 1057 0
 4251 004c 2E4B     		ldr	r3, .L187+12
ARM GAS  /tmp/ccfQkuUX.s 			page 93


 4252 004e 0122     		movs	r2, #1
 4253 0050 1A70     		strb	r2, [r3]
1056:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 4254              		.loc 1 1056 0
 4255 0052 37E0     		b	.L182
 4256              	.L181:
 4257 0054 36E0     		b	.L182
 4258              	.L180:
1058:bluetooth_rxtx.c **** 		}
1059:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
1060:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 4259              		.loc 1 1060 0
 4260 0056 2B4B     		ldr	r3, .L187+8
 4261 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4262 005a 022B     		cmp	r3, #2
 4263 005c 08D1     		bne	.L183
1061:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 4264              		.loc 1 1061 0
 4265 005e 7B68     		ldr	r3, [r7, #4]
 4266 0060 03F00103 		and	r3, r3, #1
 4267 0064 002B     		cmp	r3, #0
 4268 0066 2DD1     		bne	.L182
1062:bluetooth_rxtx.c **** 				do_hop = 1;
 4269              		.loc 1 1062 0
 4270 0068 274B     		ldr	r3, .L187+12
 4271 006a 0122     		movs	r2, #1
 4272 006c 1A70     		strb	r2, [r3]
 4273 006e 29E0     		b	.L182
 4274              	.L183:
1063:bluetooth_rxtx.c **** 		}
1064:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
1065:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 4275              		.loc 1 1065 0
 4276 0070 244B     		ldr	r3, .L187+8
 4277 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 4278 0074 032B     		cmp	r3, #3
 4279 0076 25D1     		bne	.L182
1066:bluetooth_rxtx.c **** 			// Only hop if connected
1067:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 4280              		.loc 1 1067 0
 4281 0078 214B     		ldr	r3, .L187+4
 4282 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 4283 007c 032B     		cmp	r3, #3
 4284 007e 21D1     		bne	.L182
 4285              		.loc 1 1067 0 is_stmt 0 discriminator 1
 4286 0080 3B68     		ldr	r3, [r7]
 4287 0082 002B     		cmp	r3, #0
 4288 0084 1ED1     		bne	.L182
1068:bluetooth_rxtx.c **** 				--le.interval_timer;
 4289              		.loc 1 1068 0 is_stmt 1
 4290 0086 1E4B     		ldr	r3, .L187+4
 4291 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4292 008a 9BB2     		uxth	r3, r3
 4293 008c 013B     		subs	r3, r3, #1
 4294 008e 9AB2     		uxth	r2, r3
 4295 0090 1B4B     		ldr	r3, .L187+4
 4296 0092 9A83     		strh	r2, [r3, #28]	@ movhi
ARM GAS  /tmp/ccfQkuUX.s 			page 94


1069:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 4297              		.loc 1 1069 0
 4298 0094 1A4B     		ldr	r3, .L187+4
 4299 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 4300 0098 9BB2     		uxth	r3, r3
 4301 009a 002B     		cmp	r3, #0
 4302 009c 0ED1     		bne	.L185
1070:bluetooth_rxtx.c **** 					do_hop = 1;
 4303              		.loc 1 1070 0
 4304 009e 1A4B     		ldr	r3, .L187+12
 4305 00a0 0122     		movs	r2, #1
 4306 00a2 1A70     		strb	r2, [r3]
1071:bluetooth_rxtx.c **** 					++le.conn_count;
 4307              		.loc 1 1071 0
 4308 00a4 164B     		ldr	r3, .L187+4
 4309 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 4310 00a8 9BB2     		uxth	r3, r3
 4311 00aa 0133     		adds	r3, r3, #1
 4312 00ac 9AB2     		uxth	r2, r3
 4313 00ae 144B     		ldr	r3, .L187+4
 4314 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
1072:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 4315              		.loc 1 1072 0
 4316 00b2 134B     		ldr	r3, .L187+4
 4317 00b4 DA8B     		ldrh	r2, [r3, #30]
 4318 00b6 124B     		ldr	r3, .L187+4
 4319 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 4320 00ba 03E0     		b	.L182
 4321              	.L185:
1073:bluetooth_rxtx.c **** 				} else {
1074:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 4322              		.loc 1 1074 0
 4323 00bc 134B     		ldr	r3, .L187+16
 4324 00be 4FF48072 		mov	r2, #256
 4325 00c2 1A60     		str	r2, [r3]
 4326              	.L182:
1075:bluetooth_rxtx.c **** 				}
1076:bluetooth_rxtx.c **** 			}
1077:bluetooth_rxtx.c **** 		}
1078:bluetooth_rxtx.c **** 
1079:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
1080:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 4327              		.loc 1 1080 0
 4328 00c4 7B68     		ldr	r3, [r7, #4]
 4329 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 4330 00ca 002B     		cmp	r3, #0
 4331 00cc 02D1     		bne	.L186
1081:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 4332              		.loc 1 1081 0
 4333 00ce 104B     		ldr	r3, .L187+20
 4334 00d0 0122     		movs	r2, #1
 4335 00d2 1A70     		strb	r2, [r3]
 4336              	.L186:
1082:bluetooth_rxtx.c **** 
1083:bluetooth_rxtx.c **** 		/* Ack interrupt */
1084:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 4337              		.loc 1 1084 0
ARM GAS  /tmp/ccfQkuUX.s 			page 95


 4338 00d4 0F4A     		ldr	r2, .L187+24
 4339 00d6 104B     		ldr	r3, .L187+28
 4340 00d8 1B68     		ldr	r3, [r3]
 4341 00da C3F54363 		rsb	r3, r3, #3120
 4342 00de 0433     		adds	r3, r3, #4
 4343 00e0 1360     		str	r3, [r2]
1085:bluetooth_rxtx.c **** 		clock_trim = 0;
 4344              		.loc 1 1085 0
 4345 00e2 0D4B     		ldr	r3, .L187+28
 4346 00e4 0022     		movs	r2, #0
 4347 00e6 1A60     		str	r2, [r3]
1086:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 4348              		.loc 1 1086 0
 4349 00e8 4FF04023 		mov	r3, #1073758208
 4350 00ec 0122     		movs	r2, #1
 4351 00ee 1A60     		str	r2, [r3]
 4352              	.L177:
1087:bluetooth_rxtx.c **** 	}
1088:bluetooth_rxtx.c **** }
 4353              		.loc 1 1088 0
 4354 00f0 0C37     		adds	r7, r7, #12
 4355              		.cfi_def_cfa_offset 4
 4356 00f2 BD46     		mov	sp, r7
 4357              		.cfi_def_cfa_register 13
 4358              		@ sp needed
 4359 00f4 5DF8047B 		ldr	r7, [sp], #4
 4360              		.cfi_restore 7
 4361              		.cfi_def_cfa_offset 0
 4362 00f8 7047     		bx	lr
 4363              	.L188:
 4364 00fa 00BF     		.align	2
 4365              	.L187:
 4366 00fc 00000000 		.word	clkn
 4367 0100 00000000 		.word	le
 4368 0104 00000000 		.word	hop_mode
 4369 0108 00000000 		.word	do_hop
 4370 010c 3CC00920 		.word	537509948
 4371 0110 00000000 		.word	keepalive_trigger
 4372 0114 18400040 		.word	1073758232
 4373 0118 00000000 		.word	clock_trim
 4374              		.cfi_endproc
 4375              	.LFE14:
 4377              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 4378              		.align	2
 4379              		.global	EINT3_IRQHandler
 4380              		.thumb
 4381              		.thumb_func
 4383              	EINT3_IRQHandler:
 4384              	.LFB15:
1089:bluetooth_rxtx.c **** 
1090:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
1091:bluetooth_rxtx.c **** #ifndef TC13BADGE
1092:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
1093:bluetooth_rxtx.c **** void EINT3_IRQHandler()
1094:bluetooth_rxtx.c **** {
 4385              		.loc 1 1094 0
 4386              		.cfi_startproc
ARM GAS  /tmp/ccfQkuUX.s 			page 96


 4387              		@ args = 0, pretend = 0, frame = 0
 4388              		@ frame_needed = 1, uses_anonymous_args = 0
 4389              		@ link register save eliminated.
 4390 0000 80B4     		push	{r7}
 4391              		.cfi_def_cfa_offset 4
 4392              		.cfi_offset 7, -4
 4393 0002 00AF     		add	r7, sp, #0
 4394              		.cfi_def_cfa_register 7
1095:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
1096:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 4395              		.loc 1 1096 0
 4396 0004 0B4B     		ldr	r3, .L190
 4397 0006 0422     		movs	r2, #4
 4398 0008 1A60     		str	r2, [r3]
1097:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 4399              		.loc 1 1097 0
 4400 000a 0B4B     		ldr	r3, .L190+4
 4401 000c 0122     		movs	r2, #1
 4402 000e 1A70     		strb	r2, [r3]
1098:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 4403              		.loc 1 1098 0
 4404 0010 0A4B     		ldr	r3, .L190+8
 4405 0012 1B68     		ldr	r3, [r3]
 4406 0014 C3F31303 		ubfx	r3, r3, #0, #20
 4407 0018 40F63542 		movw	r2, #3125
 4408 001c 02FB03F2 		mul	r2, r2, r3
 4409 0020 074B     		ldr	r3, .L190+12
 4410 0022 1B68     		ldr	r3, [r3]
 4411 0024 1344     		add	r3, r3, r2
 4412 0026 074A     		ldr	r2, .L190+16
 4413 0028 1360     		str	r3, [r2]
1099:bluetooth_rxtx.c **** }
 4414              		.loc 1 1099 0
 4415 002a BD46     		mov	sp, r7
 4416              		.cfi_def_cfa_register 13
 4417              		@ sp needed
 4418 002c 5DF8047B 		ldr	r7, [sp], #4
 4419              		.cfi_restore 7
 4420              		.cfi_def_cfa_offset 0
 4421 0030 7047     		bx	lr
 4422              	.L191:
 4423 0032 00BF     		.align	2
 4424              	.L190:
 4425 0034 AC800240 		.word	1073905836
 4426 0038 00000000 		.word	cs_trigger
 4427 003c 00000000 		.word	clkn
 4428 0040 08400040 		.word	1073758216
 4429 0044 00000000 		.word	cs_timestamp
 4430              		.cfi_endproc
 4431              	.LFE15:
 4433              		.global	__aeabi_ui2d
 4434              		.global	__aeabi_dmul
 4435              		.global	__aeabi_ddiv
 4436              		.global	__aeabi_dadd
 4437              		.global	__aeabi_d2uiz
 4438              		.section	.text.msleep,"ax",%progbits
 4439              		.align	2
ARM GAS  /tmp/ccfQkuUX.s 			page 97


 4440              		.thumb
 4441              		.thumb_func
 4443              	msleep:
 4444              	.LFB16:
1100:bluetooth_rxtx.c **** #endif // TC13BADGE
1101:bluetooth_rxtx.c **** 
1102:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
1103:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
1104:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
1105:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
1106:bluetooth_rxtx.c **** {
 4445              		.loc 1 1106 0
 4446              		.cfi_startproc
 4447              		@ args = 0, pretend = 0, frame = 16
 4448              		@ frame_needed = 1, uses_anonymous_args = 0
 4449 0000 B0B5     		push	{r4, r5, r7, lr}
 4450              		.cfi_def_cfa_offset 16
 4451              		.cfi_offset 4, -16
 4452              		.cfi_offset 5, -12
 4453              		.cfi_offset 7, -8
 4454              		.cfi_offset 14, -4
 4455 0002 84B0     		sub	sp, sp, #16
 4456              		.cfi_def_cfa_offset 32
 4457 0004 00AF     		add	r7, sp, #0
 4458              		.cfi_def_cfa_register 7
 4459 0006 7860     		str	r0, [r7, #4]
1107:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 4460              		.loc 1 1107 0
 4461 0008 1B4B     		ldr	r3, .L194+8
 4462 000a 1B68     		ldr	r3, [r3]
 4463 000c 1846     		mov	r0, r3
 4464 000e FFF7FEFF 		bl	__aeabi_ui2d
 4465 0012 0446     		mov	r4, r0
 4466 0014 0D46     		mov	r5, r1
 4467 0016 7868     		ldr	r0, [r7, #4]
 4468 0018 FFF7FEFF 		bl	__aeabi_ui2d
 4469 001c 0246     		mov	r2, r0
 4470 001e 0B46     		mov	r3, r1
 4471 0020 1046     		mov	r0, r2
 4472 0022 1946     		mov	r1, r3
 4473 0024 12A3     		adr	r3, .L194
 4474 0026 D3E90023 		ldrd	r2, [r3]
 4475 002a FFF7FEFF 		bl	__aeabi_dmul
 4476 002e 0246     		mov	r2, r0
 4477 0030 0B46     		mov	r3, r1
 4478 0032 1046     		mov	r0, r2
 4479 0034 1946     		mov	r1, r3
 4480 0036 4FF00002 		mov	r2, #0
 4481 003a 104B     		ldr	r3, .L194+12
 4482 003c FFF7FEFF 		bl	__aeabi_ddiv
 4483 0040 0246     		mov	r2, r0
 4484 0042 0B46     		mov	r3, r1
 4485 0044 2046     		mov	r0, r4
 4486 0046 2946     		mov	r1, r5
 4487 0048 FFF7FEFF 		bl	__aeabi_dadd
 4488 004c 0246     		mov	r2, r0
 4489 004e 0B46     		mov	r3, r1
ARM GAS  /tmp/ccfQkuUX.s 			page 98


 4490 0050 1046     		mov	r0, r2
 4491 0052 1946     		mov	r1, r3
 4492 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 4493 0058 0346     		mov	r3, r0
 4494 005a FB60     		str	r3, [r7, #12]
 4495              	.L193:
1108:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 4496              		.loc 1 1108 0 discriminator 1
 4497 005c 064B     		ldr	r3, .L194+8
 4498 005e 1A68     		ldr	r2, [r3]
 4499 0060 FB68     		ldr	r3, [r7, #12]
 4500 0062 9A42     		cmp	r2, r3
 4501 0064 FAD3     		bcc	.L193
1109:bluetooth_rxtx.c **** }
 4502              		.loc 1 1109 0
 4503 0066 1037     		adds	r7, r7, #16
 4504              		.cfi_def_cfa_offset 16
 4505 0068 BD46     		mov	sp, r7
 4506              		.cfi_def_cfa_register 13
 4507              		@ sp needed
 4508 006a B0BD     		pop	{r4, r5, r7, pc}
 4509              	.L195:
 4510 006c AFF30080 		.align	3
 4511              	.L194:
 4512 0070 00000000 		.word	0
 4513 0074 00887340 		.word	1081313280
 4514 0078 00000000 		.word	clkn
 4515 007c 00408F40 		.word	1083129856
 4516              		.cfi_endproc
 4517              	.LFE16:
 4519              		.section	.text.dma_init,"ax",%progbits
 4520              		.align	2
 4521              		.thumb
 4522              		.thumb_func
 4524              	dma_init:
 4525              	.LFB17:
1110:bluetooth_rxtx.c **** 
1111:bluetooth_rxtx.c **** static void dma_init()
1112:bluetooth_rxtx.c **** {
 4526              		.loc 1 1112 0
 4527              		.cfi_startproc
 4528              		@ args = 0, pretend = 0, frame = 0
 4529              		@ frame_needed = 1, uses_anonymous_args = 0
 4530              		@ link register save eliminated.
 4531 0000 80B4     		push	{r7}
 4532              		.cfi_def_cfa_offset 4
 4533              		.cfi_offset 7, -4
 4534 0002 00AF     		add	r7, sp, #0
 4535              		.cfi_def_cfa_register 7
1113:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1114:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4536              		.loc 1 1114 0
 4537 0004 3F4A     		ldr	r2, .L198
 4538 0006 3F4B     		ldr	r3, .L198
 4539 0008 1B68     		ldr	r3, [r3]
 4540 000a 43F00053 		orr	r3, r3, #536870912
 4541 000e 1360     		str	r3, [r2]
ARM GAS  /tmp/ccfQkuUX.s 			page 99


1115:bluetooth_rxtx.c **** 
1116:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1117:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4542              		.loc 1 1117 0
 4543 0010 3D4B     		ldr	r3, .L198+4
 4544 0012 0022     		movs	r2, #0
 4545 0014 1A60     		str	r2, [r3]
1118:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4546              		.loc 1 1118 0
 4547 0016 3D4B     		ldr	r3, .L198+8
 4548 0018 0022     		movs	r2, #0
 4549 001a 1A60     		str	r2, [r3]
1119:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4550              		.loc 1 1119 0
 4551 001c 3C4B     		ldr	r3, .L198+12
 4552 001e 0022     		movs	r2, #0
 4553 0020 1A60     		str	r2, [r3]
1120:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4554              		.loc 1 1120 0
 4555 0022 3C4B     		ldr	r3, .L198+16
 4556 0024 0022     		movs	r2, #0
 4557 0026 1A60     		str	r2, [r3]
1121:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4558              		.loc 1 1121 0
 4559 0028 3B4B     		ldr	r3, .L198+20
 4560 002a 0022     		movs	r2, #0
 4561 002c 1A60     		str	r2, [r3]
1122:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4562              		.loc 1 1122 0
 4563 002e 3B4B     		ldr	r3, .L198+24
 4564 0030 0022     		movs	r2, #0
 4565 0032 1A60     		str	r2, [r3]
1123:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4566              		.loc 1 1123 0
 4567 0034 3A4B     		ldr	r3, .L198+28
 4568 0036 0022     		movs	r2, #0
 4569 0038 1A60     		str	r2, [r3]
1124:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4570              		.loc 1 1124 0
 4571 003a 3A4B     		ldr	r3, .L198+32
 4572 003c 0022     		movs	r2, #0
 4573 003e 1A60     		str	r2, [r3]
1125:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4574              		.loc 1 1125 0
 4575 0040 394B     		ldr	r3, .L198+36
 4576 0042 FF22     		movs	r2, #255
 4577 0044 1A60     		str	r2, [r3]
1126:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4578              		.loc 1 1126 0
 4579 0046 394B     		ldr	r3, .L198+40
 4580 0048 FF22     		movs	r2, #255
 4581 004a 1A60     		str	r2, [r3]
1127:bluetooth_rxtx.c **** 
1128:bluetooth_rxtx.c **** 	/* DMA linked lists */
1129:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4582              		.loc 1 1129 0
 4583 004c 384B     		ldr	r3, .L198+44
ARM GAS  /tmp/ccfQkuUX.s 			page 100


 4584 004e 394A     		ldr	r2, .L198+48
 4585 0050 1A60     		str	r2, [r3]
1130:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4586              		.loc 1 1130 0
 4587 0052 394A     		ldr	r2, .L198+52
 4588 0054 364B     		ldr	r3, .L198+44
 4589 0056 5A60     		str	r2, [r3, #4]
1131:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4590              		.loc 1 1131 0
 4591 0058 384A     		ldr	r2, .L198+56
 4592 005a 354B     		ldr	r3, .L198+44
 4593 005c 9A60     		str	r2, [r3, #8]
1132:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4594              		.loc 1 1132 0
 4595 005e 344B     		ldr	r3, .L198+44
 4596 0060 374A     		ldr	r2, .L198+60
 4597 0062 DA60     		str	r2, [r3, #12]
1133:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1134:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1135:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1136:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1137:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1138:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1139:bluetooth_rxtx.c **** 
1140:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4598              		.loc 1 1140 0
 4599 0064 354B     		ldr	r3, .L198+56
 4600 0066 334A     		ldr	r2, .L198+48
 4601 0068 1A60     		str	r2, [r3]
1141:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4602              		.loc 1 1141 0
 4603 006a 364A     		ldr	r2, .L198+64
 4604 006c 334B     		ldr	r3, .L198+56
 4605 006e 5A60     		str	r2, [r3, #4]
1142:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4606              		.loc 1 1142 0
 4607 0070 2F4A     		ldr	r2, .L198+44
 4608 0072 324B     		ldr	r3, .L198+56
 4609 0074 9A60     		str	r2, [r3, #8]
1143:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4610              		.loc 1 1143 0
 4611 0076 314B     		ldr	r3, .L198+56
 4612 0078 314A     		ldr	r2, .L198+60
 4613 007a DA60     		str	r2, [r3, #12]
1144:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
1145:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
1146:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
1147:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
1148:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
1149:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
1150:bluetooth_rxtx.c **** 
1151:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
1152:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4614              		.loc 1 1152 0
 4615 007c 324B     		ldr	r3, .L198+68
 4616 007e 4FF08062 		mov	r2, #67108864
 4617 0082 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 101


1153:bluetooth_rxtx.c **** 
1154:bluetooth_rxtx.c **** 	/* enable DMA globally */
1155:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4618              		.loc 1 1155 0
 4619 0084 314B     		ldr	r3, .L198+72
 4620 0086 0122     		movs	r2, #1
 4621 0088 1A60     		str	r2, [r3]
1156:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4622              		.loc 1 1156 0
 4623 008a 00BF     		nop
 4624              	.L197:
 4625              		.loc 1 1156 0 is_stmt 0 discriminator 1
 4626 008c 2F4B     		ldr	r3, .L198+72
 4627 008e 1B68     		ldr	r3, [r3]
 4628 0090 03F00103 		and	r3, r3, #1
 4629 0094 002B     		cmp	r3, #0
 4630 0096 F9D0     		beq	.L197
1157:bluetooth_rxtx.c **** 
1158:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
1159:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4631              		.loc 1 1159 0 is_stmt 1
 4632 0098 2D4A     		ldr	r2, .L198+76
 4633 009a 254B     		ldr	r3, .L198+44
 4634 009c 1B68     		ldr	r3, [r3]
 4635 009e 1360     		str	r3, [r2]
1160:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4636              		.loc 1 1160 0
 4637 00a0 2C4A     		ldr	r2, .L198+80
 4638 00a2 234B     		ldr	r3, .L198+44
 4639 00a4 5B68     		ldr	r3, [r3, #4]
 4640 00a6 1360     		str	r3, [r2]
1161:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4641              		.loc 1 1161 0
 4642 00a8 2B4A     		ldr	r2, .L198+84
 4643 00aa 214B     		ldr	r3, .L198+44
 4644 00ac 9B68     		ldr	r3, [r3, #8]
 4645 00ae 1360     		str	r3, [r2]
1162:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4646              		.loc 1 1162 0
 4647 00b0 2A4A     		ldr	r2, .L198+88
 4648 00b2 1F4B     		ldr	r3, .L198+44
 4649 00b4 DB68     		ldr	r3, [r3, #12]
 4650 00b6 1360     		str	r3, [r2]
1163:bluetooth_rxtx.c **** 	DMACC0Config =
 4651              		.loc 1 1163 0
 4652 00b8 134B     		ldr	r3, .L198+4
 4653 00ba 4DF20602 		movw	r2, #53254
 4654 00be 1A60     		str	r2, [r3]
1164:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1165:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1166:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1167:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1168:bluetooth_rxtx.c **** 
1169:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4655              		.loc 1 1169 0
 4656 00c0 274B     		ldr	r3, .L198+92
 4657 00c2 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 102


 4658 00c4 1B0D     		lsrs	r3, r3, #20
 4659 00c6 DBB2     		uxtb	r3, r3
 4660 00c8 264A     		ldr	r2, .L198+96
 4661 00ca 1360     		str	r3, [r2]
1170:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4662              		.loc 1 1170 0
 4663 00cc 244B     		ldr	r3, .L198+92
 4664 00ce 1B68     		ldr	r3, [r3]
 4665 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4666 00d4 40F63542 		movw	r2, #3125
 4667 00d8 02FB03F2 		mul	r2, r2, r3
 4668 00dc 224B     		ldr	r3, .L198+100
 4669 00de 1B68     		ldr	r3, [r3]
 4670 00e0 1344     		add	r3, r3, r2
 4671 00e2 224A     		ldr	r2, .L198+104
 4672 00e4 1360     		str	r3, [r2]
1171:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4673              		.loc 1 1171 0
 4674 00e6 224B     		ldr	r3, .L198+108
 4675 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4676 00ea 9AB2     		uxth	r2, r3
 4677 00ec 214B     		ldr	r3, .L198+112
 4678 00ee 1A80     		strh	r2, [r3]	@ movhi
1172:bluetooth_rxtx.c **** 
1173:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1174:bluetooth_rxtx.c **** 	rx_tc = 0;
 4679              		.loc 1 1174 0
 4680 00f0 214B     		ldr	r3, .L198+116
 4681 00f2 0022     		movs	r2, #0
 4682 00f4 1A60     		str	r2, [r3]
1175:bluetooth_rxtx.c **** 	rx_err = 0;
 4683              		.loc 1 1175 0
 4684 00f6 214B     		ldr	r3, .L198+120
 4685 00f8 0022     		movs	r2, #0
 4686 00fa 1A60     		str	r2, [r3]
1176:bluetooth_rxtx.c **** }
 4687              		.loc 1 1176 0
 4688 00fc BD46     		mov	sp, r7
 4689              		.cfi_def_cfa_register 13
 4690              		@ sp needed
 4691 00fe 5DF8047B 		ldr	r7, [sp], #4
 4692              		.cfi_restore 7
 4693              		.cfi_def_cfa_offset 0
 4694 0102 7047     		bx	lr
 4695              	.L199:
 4696              		.align	2
 4697              	.L198:
 4698 0104 C4C00F40 		.word	1074774212
 4699 0108 10410050 		.word	1342193936
 4700 010c 30410050 		.word	1342193968
 4701 0110 50410050 		.word	1342194000
 4702 0114 70410050 		.word	1342194032
 4703 0118 90410050 		.word	1342194064
 4704 011c B0410050 		.word	1342194096
 4705 0120 D0410050 		.word	1342194128
 4706 0124 F0410050 		.word	1342194160
 4707 0128 08400050 		.word	1342193672
ARM GAS  /tmp/ccfQkuUX.s 			page 103


 4708 012c 10400050 		.word	1342193680
 4709 0130 00000000 		.word	rx_dma_lli1
 4710 0134 08000340 		.word	1073938440
 4711 0138 00000000 		.word	rxbuf1
 4712 013c 00000000 		.word	rx_dma_lli2
 4713 0140 32900088 		.word	-2013229006
 4714 0144 00000000 		.word	rxbuf2
 4715 0148 80E100E0 		.word	-536813184
 4716 014c 30400050 		.word	1342193712
 4717 0150 00410050 		.word	1342193920
 4718 0154 04410050 		.word	1342193924
 4719 0158 08410050 		.word	1342193928
 4720 015c 0C410050 		.word	1342193932
 4721 0160 00000000 		.word	clkn
 4722 0164 00000000 		.word	active_buf_clkn_high
 4723 0168 08400040 		.word	1073758216
 4724 016c 00000000 		.word	active_buf_clk100ns
 4725 0170 00000000 		.word	channel
 4726 0174 00000000 		.word	active_buf_channel
 4727 0178 00000000 		.word	rx_tc
 4728 017c 00000000 		.word	rx_err
 4729              		.cfi_endproc
 4730              	.LFE17:
 4732              		.section	.text.dma_init_le,"ax",%progbits
 4733              		.align	2
 4734              		.thumb
 4735              		.thumb_func
 4737              	dma_init_le:
 4738              	.LFB18:
1177:bluetooth_rxtx.c **** 
1178:bluetooth_rxtx.c **** static void dma_init_le()
1179:bluetooth_rxtx.c **** {
 4739              		.loc 1 1179 0
 4740              		.cfi_startproc
 4741              		@ args = 0, pretend = 0, frame = 8
 4742              		@ frame_needed = 1, uses_anonymous_args = 0
 4743              		@ link register save eliminated.
 4744 0000 80B4     		push	{r7}
 4745              		.cfi_def_cfa_offset 4
 4746              		.cfi_offset 7, -4
 4747 0002 83B0     		sub	sp, sp, #12
 4748              		.cfi_def_cfa_offset 16
 4749 0004 00AF     		add	r7, sp, #0
 4750              		.cfi_def_cfa_register 7
1180:bluetooth_rxtx.c **** 	int i;
1181:bluetooth_rxtx.c **** 
1182:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1183:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4751              		.loc 1 1183 0
 4752 0006 4B4A     		ldr	r2, .L206
 4753 0008 4A4B     		ldr	r3, .L206
 4754 000a 1B68     		ldr	r3, [r3]
 4755 000c 43F00053 		orr	r3, r3, #536870912
 4756 0010 1360     		str	r3, [r2]
1184:bluetooth_rxtx.c **** 
1185:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1186:bluetooth_rxtx.c **** 	DMACC0Config = 0;
ARM GAS  /tmp/ccfQkuUX.s 			page 104


 4757              		.loc 1 1186 0
 4758 0012 494B     		ldr	r3, .L206+4
 4759 0014 0022     		movs	r2, #0
 4760 0016 1A60     		str	r2, [r3]
1187:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4761              		.loc 1 1187 0
 4762 0018 484B     		ldr	r3, .L206+8
 4763 001a 0022     		movs	r2, #0
 4764 001c 1A60     		str	r2, [r3]
1188:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4765              		.loc 1 1188 0
 4766 001e 484B     		ldr	r3, .L206+12
 4767 0020 0022     		movs	r2, #0
 4768 0022 1A60     		str	r2, [r3]
1189:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4769              		.loc 1 1189 0
 4770 0024 474B     		ldr	r3, .L206+16
 4771 0026 0022     		movs	r2, #0
 4772 0028 1A60     		str	r2, [r3]
1190:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4773              		.loc 1 1190 0
 4774 002a 474B     		ldr	r3, .L206+20
 4775 002c 0022     		movs	r2, #0
 4776 002e 1A60     		str	r2, [r3]
1191:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4777              		.loc 1 1191 0
 4778 0030 464B     		ldr	r3, .L206+24
 4779 0032 0022     		movs	r2, #0
 4780 0034 1A60     		str	r2, [r3]
1192:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4781              		.loc 1 1192 0
 4782 0036 464B     		ldr	r3, .L206+28
 4783 0038 0022     		movs	r2, #0
 4784 003a 1A60     		str	r2, [r3]
1193:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4785              		.loc 1 1193 0
 4786 003c 454B     		ldr	r3, .L206+32
 4787 003e 0022     		movs	r2, #0
 4788 0040 1A60     		str	r2, [r3]
1194:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4789              		.loc 1 1194 0
 4790 0042 454B     		ldr	r3, .L206+36
 4791 0044 FF22     		movs	r2, #255
 4792 0046 1A60     		str	r2, [r3]
1195:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4793              		.loc 1 1195 0
 4794 0048 444B     		ldr	r3, .L206+40
 4795 004a FF22     		movs	r2, #255
 4796 004c 1A60     		str	r2, [r3]
1196:bluetooth_rxtx.c **** 
1197:bluetooth_rxtx.c **** 	/* enable DMA globally */
1198:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4797              		.loc 1 1198 0
 4798 004e 444B     		ldr	r3, .L206+44
 4799 0050 0122     		movs	r2, #1
 4800 0052 1A60     		str	r2, [r3]
1199:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
ARM GAS  /tmp/ccfQkuUX.s 			page 105


 4801              		.loc 1 1199 0
 4802 0054 00BF     		nop
 4803              	.L201:
 4804              		.loc 1 1199 0 is_stmt 0 discriminator 1
 4805 0056 424B     		ldr	r3, .L206+44
 4806 0058 1B68     		ldr	r3, [r3]
 4807 005a 03F00103 		and	r3, r3, #1
 4808 005e 002B     		cmp	r3, #0
 4809 0060 F9D0     		beq	.L201
1200:bluetooth_rxtx.c **** 
1201:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4810              		.loc 1 1201 0 is_stmt 1
 4811 0062 0023     		movs	r3, #0
 4812 0064 7B60     		str	r3, [r7, #4]
 4813 0066 2AE0     		b	.L202
 4814              	.L205:
1202:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4815              		.loc 1 1202 0
 4816 0068 3E4A     		ldr	r2, .L206+48
 4817 006a 7B68     		ldr	r3, [r7, #4]
 4818 006c 1B01     		lsls	r3, r3, #4
 4819 006e 1344     		add	r3, r3, r2
 4820 0070 3D4A     		ldr	r2, .L206+52
 4821 0072 1A60     		str	r2, [r3]
1203:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4822              		.loc 1 1203 0
 4823 0074 7B68     		ldr	r3, [r7, #4]
 4824 0076 9B00     		lsls	r3, r3, #2
 4825 0078 3C4A     		ldr	r2, .L206+56
 4826 007a 1344     		add	r3, r3, r2
 4827 007c 1946     		mov	r1, r3
 4828 007e 394A     		ldr	r2, .L206+48
 4829 0080 7B68     		ldr	r3, [r7, #4]
 4830 0082 1B01     		lsls	r3, r3, #4
 4831 0084 1344     		add	r3, r3, r2
 4832 0086 5960     		str	r1, [r3, #4]
1204:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4833              		.loc 1 1204 0
 4834 0088 7B68     		ldr	r3, [r7, #4]
 4835 008a 092B     		cmp	r3, #9
 4836 008c 06DC     		bgt	.L203
 4837              		.loc 1 1204 0 is_stmt 0 discriminator 1
 4838 008e 7B68     		ldr	r3, [r7, #4]
 4839 0090 0133     		adds	r3, r3, #1
 4840 0092 1B01     		lsls	r3, r3, #4
 4841 0094 334A     		ldr	r2, .L206+48
 4842 0096 1344     		add	r3, r3, r2
 4843 0098 1A46     		mov	r2, r3
 4844 009a 00E0     		b	.L204
 4845              	.L203:
 4846              		.loc 1 1204 0 discriminator 2
 4847 009c 0022     		movs	r2, #0
 4848              	.L204:
 4849              		.loc 1 1204 0 discriminator 4
 4850 009e 3149     		ldr	r1, .L206+48
 4851 00a0 7B68     		ldr	r3, [r7, #4]
 4852 00a2 1B01     		lsls	r3, r3, #4
ARM GAS  /tmp/ccfQkuUX.s 			page 106


 4853 00a4 0B44     		add	r3, r3, r1
 4854 00a6 0833     		adds	r3, r3, #8
 4855 00a8 1A60     		str	r2, [r3]
1205:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4856              		.loc 1 1205 0 is_stmt 1 discriminator 4
 4857 00aa 2E4A     		ldr	r2, .L206+48
 4858 00ac 7B68     		ldr	r3, [r7, #4]
 4859 00ae 1B01     		lsls	r3, r3, #4
 4860 00b0 1344     		add	r3, r3, r2
 4861 00b2 0833     		adds	r3, r3, #8
 4862 00b4 2E4A     		ldr	r2, .L206+60
 4863 00b6 5A60     		str	r2, [r3, #4]
1201:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4864              		.loc 1 1201 0 discriminator 4
 4865 00b8 7B68     		ldr	r3, [r7, #4]
 4866 00ba 0133     		adds	r3, r3, #1
 4867 00bc 7B60     		str	r3, [r7, #4]
 4868              	.L202:
1201:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4869              		.loc 1 1201 0 is_stmt 0 discriminator 2
 4870 00be 7B68     		ldr	r3, [r7, #4]
 4871 00c0 0A2B     		cmp	r3, #10
 4872 00c2 D1DD     		ble	.L205
1206:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1207:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1208:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1209:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1210:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1211:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1212:bluetooth_rxtx.c **** 	}
1213:bluetooth_rxtx.c **** 
1214:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1215:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4873              		.loc 1 1215 0 is_stmt 1
 4874 00c4 2B4A     		ldr	r2, .L206+64
 4875 00c6 274B     		ldr	r3, .L206+48
 4876 00c8 1B68     		ldr	r3, [r3]
 4877 00ca 1360     		str	r3, [r2]
1216:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4878              		.loc 1 1216 0
 4879 00cc 2A4A     		ldr	r2, .L206+68
 4880 00ce 254B     		ldr	r3, .L206+48
 4881 00d0 5B68     		ldr	r3, [r3, #4]
 4882 00d2 1360     		str	r3, [r2]
1217:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4883              		.loc 1 1217 0
 4884 00d4 294A     		ldr	r2, .L206+72
 4885 00d6 234B     		ldr	r3, .L206+48
 4886 00d8 9B68     		ldr	r3, [r3, #8]
 4887 00da 1360     		str	r3, [r2]
1218:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4888              		.loc 1 1218 0
 4889 00dc 284A     		ldr	r2, .L206+76
 4890 00de 214B     		ldr	r3, .L206+48
 4891 00e0 DB68     		ldr	r3, [r3, #12]
 4892 00e2 1360     		str	r3, [r2]
1219:bluetooth_rxtx.c **** 	DMACC0Config =
ARM GAS  /tmp/ccfQkuUX.s 			page 107


 4893              		.loc 1 1219 0
 4894 00e4 144B     		ldr	r3, .L206+4
 4895 00e6 4DF20602 		movw	r2, #53254
 4896 00ea 1A60     		str	r2, [r3]
1220:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1221:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1222:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1223:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1224:bluetooth_rxtx.c **** 
1225:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4897              		.loc 1 1225 0
 4898 00ec 254B     		ldr	r3, .L206+80
 4899 00ee 1B68     		ldr	r3, [r3]
 4900 00f0 1B0D     		lsrs	r3, r3, #20
 4901 00f2 DBB2     		uxtb	r3, r3
 4902 00f4 244A     		ldr	r2, .L206+84
 4903 00f6 1360     		str	r3, [r2]
1226:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4904              		.loc 1 1226 0
 4905 00f8 224B     		ldr	r3, .L206+80
 4906 00fa 1B68     		ldr	r3, [r3]
 4907 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4908 0100 40F63542 		movw	r2, #3125
 4909 0104 02FB03F2 		mul	r2, r2, r3
 4910 0108 204B     		ldr	r3, .L206+88
 4911 010a 1B68     		ldr	r3, [r3]
 4912 010c 1344     		add	r3, r3, r2
 4913 010e 204A     		ldr	r2, .L206+92
 4914 0110 1360     		str	r3, [r2]
1227:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4915              		.loc 1 1227 0
 4916 0112 204B     		ldr	r3, .L206+96
 4917 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4918 0116 9AB2     		uxth	r2, r3
 4919 0118 1F4B     		ldr	r3, .L206+100
 4920 011a 1A80     		strh	r2, [r3]	@ movhi
1228:bluetooth_rxtx.c **** 
1229:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1230:bluetooth_rxtx.c **** 	rx_tc = 0;
 4921              		.loc 1 1230 0
 4922 011c 1F4B     		ldr	r3, .L206+104
 4923 011e 0022     		movs	r2, #0
 4924 0120 1A60     		str	r2, [r3]
1231:bluetooth_rxtx.c **** 	rx_err = 0;
 4925              		.loc 1 1231 0
 4926 0122 1F4B     		ldr	r3, .L206+108
 4927 0124 0022     		movs	r2, #0
 4928 0126 1A60     		str	r2, [r3]
1232:bluetooth_rxtx.c **** }
 4929              		.loc 1 1232 0
 4930 0128 0C37     		adds	r7, r7, #12
 4931              		.cfi_def_cfa_offset 4
 4932 012a BD46     		mov	sp, r7
 4933              		.cfi_def_cfa_register 13
 4934              		@ sp needed
 4935 012c 5DF8047B 		ldr	r7, [sp], #4
 4936              		.cfi_restore 7
ARM GAS  /tmp/ccfQkuUX.s 			page 108


 4937              		.cfi_def_cfa_offset 0
 4938 0130 7047     		bx	lr
 4939              	.L207:
 4940 0132 00BF     		.align	2
 4941              	.L206:
 4942 0134 C4C00F40 		.word	1074774212
 4943 0138 10410050 		.word	1342193936
 4944 013c 30410050 		.word	1342193968
 4945 0140 50410050 		.word	1342194000
 4946 0144 70410050 		.word	1342194032
 4947 0148 90410050 		.word	1342194064
 4948 014c B0410050 		.word	1342194096
 4949 0150 D0410050 		.word	1342194128
 4950 0154 F0410050 		.word	1342194160
 4951 0158 08400050 		.word	1342193672
 4952 015c 10400050 		.word	1342193680
 4953 0160 30400050 		.word	1342193712
 4954 0164 00000000 		.word	le_dma_lli
 4955 0168 08000340 		.word	1073938440
 4956 016c 00000000 		.word	rxbuf1
 4957 0170 04100088 		.word	-2013261820
 4958 0174 00410050 		.word	1342193920
 4959 0178 04410050 		.word	1342193924
 4960 017c 08410050 		.word	1342193928
 4961 0180 0C410050 		.word	1342193932
 4962 0184 00000000 		.word	clkn
 4963 0188 00000000 		.word	active_buf_clkn_high
 4964 018c 08400040 		.word	1073758216
 4965 0190 00000000 		.word	active_buf_clk100ns
 4966 0194 00000000 		.word	channel
 4967 0198 00000000 		.word	active_buf_channel
 4968 019c 00000000 		.word	rx_tc
 4969 01a0 00000000 		.word	rx_err
 4970              		.cfi_endproc
 4971              	.LFE18:
 4973              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4974              		.align	2
 4975              		.global	bt_stream_dma_handler
 4976              		.thumb
 4977              		.thumb_func
 4979              	bt_stream_dma_handler:
 4980              	.LFB19:
1233:bluetooth_rxtx.c **** 
1234:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4981              		.loc 1 1234 0
 4982              		.cfi_startproc
 4983              		@ args = 0, pretend = 0, frame = 0
 4984              		@ frame_needed = 1, uses_anonymous_args = 0
 4985              		@ link register save eliminated.
 4986 0000 80B4     		push	{r7}
 4987              		.cfi_def_cfa_offset 4
 4988              		.cfi_offset 7, -4
 4989 0002 00AF     		add	r7, sp, #0
 4990              		.cfi_def_cfa_register 7
1235:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4991              		.loc 1 1235 0
 4992 0004 254B     		ldr	r3, .L211
ARM GAS  /tmp/ccfQkuUX.s 			page 109


 4993 0006 1B68     		ldr	r3, [r3]
 4994 0008 254A     		ldr	r2, .L211+4
 4995 000a 1360     		str	r3, [r2]
1236:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4996              		.loc 1 1236 0
 4997 000c 254B     		ldr	r3, .L211+8
 4998 000e 1B68     		ldr	r3, [r3]
 4999 0010 1B0D     		lsrs	r3, r3, #20
 5000 0012 DBB2     		uxtb	r3, r3
 5001 0014 214A     		ldr	r2, .L211
 5002 0016 1360     		str	r3, [r2]
1237:bluetooth_rxtx.c **** 
1238:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 5003              		.loc 1 1238 0
 5004 0018 234B     		ldr	r3, .L211+12
 5005 001a 1B68     		ldr	r3, [r3]
 5006 001c 234A     		ldr	r2, .L211+16
 5007 001e 1360     		str	r3, [r2]
1239:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 5008              		.loc 1 1239 0
 5009 0020 204B     		ldr	r3, .L211+8
 5010 0022 1B68     		ldr	r3, [r3]
 5011 0024 C3F31303 		ubfx	r3, r3, #0, #20
 5012 0028 40F63542 		movw	r2, #3125
 5013 002c 02FB03F2 		mul	r2, r2, r3
 5014 0030 1F4B     		ldr	r3, .L211+20
 5015 0032 1B68     		ldr	r3, [r3]
 5016 0034 1344     		add	r3, r3, r2
 5017 0036 1C4A     		ldr	r2, .L211+12
 5018 0038 1360     		str	r3, [r2]
1240:bluetooth_rxtx.c **** 
1241:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 5019              		.loc 1 1241 0
 5020 003a 1E4B     		ldr	r3, .L211+24
 5021 003c 1B88     		ldrh	r3, [r3]	@ movhi
 5022 003e 9AB2     		uxth	r2, r3
 5023 0040 1D4B     		ldr	r3, .L211+28
 5024 0042 1A80     		strh	r2, [r3]	@ movhi
1242:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 5025              		.loc 1 1242 0
 5026 0044 1D4B     		ldr	r3, .L211+32
 5027 0046 1B88     		ldrh	r3, [r3]	@ movhi
 5028 0048 9AB2     		uxth	r2, r3
 5029 004a 1A4B     		ldr	r3, .L211+24
 5030 004c 1A80     		strh	r2, [r3]	@ movhi
1243:bluetooth_rxtx.c **** 
1244:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1245:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 5031              		.loc 1 1245 0
 5032 004e 1C4B     		ldr	r3, .L211+36
 5033 0050 1B68     		ldr	r3, [r3]
 5034 0052 03F00103 		and	r3, r3, #1
 5035 0056 002B     		cmp	r3, #0
 5036 0058 1BD0     		beq	.L208
1246:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 5037              		.loc 1 1246 0
 5038 005a 1A4B     		ldr	r3, .L211+40
ARM GAS  /tmp/ccfQkuUX.s 			page 110


 5039 005c 1B68     		ldr	r3, [r3]
 5040 005e 03F00103 		and	r3, r3, #1
 5041 0062 002B     		cmp	r3, #0
 5042 0064 07D0     		beq	.L210
1247:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 5043              		.loc 1 1247 0
 5044 0066 184B     		ldr	r3, .L211+44
 5045 0068 0122     		movs	r2, #1
 5046 006a 1A60     		str	r2, [r3]
1248:bluetooth_rxtx.c **** 			++rx_tc;
 5047              		.loc 1 1248 0
 5048 006c 174B     		ldr	r3, .L211+48
 5049 006e 1B68     		ldr	r3, [r3]
 5050 0070 0133     		adds	r3, r3, #1
 5051 0072 164A     		ldr	r2, .L211+48
 5052 0074 1360     		str	r3, [r2]
 5053              	.L210:
1249:bluetooth_rxtx.c **** 		}
1250:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 5054              		.loc 1 1250 0
 5055 0076 164B     		ldr	r3, .L211+52
 5056 0078 1B68     		ldr	r3, [r3]
 5057 007a 03F00103 		and	r3, r3, #1
 5058 007e 002B     		cmp	r3, #0
 5059 0080 07D0     		beq	.L208
1251:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 5060              		.loc 1 1251 0
 5061 0082 144B     		ldr	r3, .L211+56
 5062 0084 0122     		movs	r2, #1
 5063 0086 1A60     		str	r2, [r3]
1252:bluetooth_rxtx.c **** 			++rx_err;
 5064              		.loc 1 1252 0
 5065 0088 134B     		ldr	r3, .L211+60
 5066 008a 1B68     		ldr	r3, [r3]
 5067 008c 0133     		adds	r3, r3, #1
 5068 008e 124A     		ldr	r2, .L211+60
 5069 0090 1360     		str	r3, [r2]
 5070              	.L208:
1253:bluetooth_rxtx.c **** 		}
1254:bluetooth_rxtx.c **** 	}
1255:bluetooth_rxtx.c **** }
 5071              		.loc 1 1255 0
 5072 0092 BD46     		mov	sp, r7
 5073              		.cfi_def_cfa_register 13
 5074              		@ sp needed
 5075 0094 5DF8047B 		ldr	r7, [sp], #4
 5076              		.cfi_restore 7
 5077              		.cfi_def_cfa_offset 0
 5078 0098 7047     		bx	lr
 5079              	.L212:
 5080 009a 00BF     		.align	2
 5081              	.L211:
 5082 009c 00000000 		.word	active_buf_clkn_high
 5083 00a0 00000000 		.word	idle_buf_clkn_high
 5084 00a4 00000000 		.word	clkn
 5085 00a8 00000000 		.word	active_buf_clk100ns
 5086 00ac 00000000 		.word	idle_buf_clk100ns
ARM GAS  /tmp/ccfQkuUX.s 			page 111


 5087 00b0 08400040 		.word	1073758216
 5088 00b4 00000000 		.word	active_buf_channel
 5089 00b8 00000000 		.word	idle_buf_channel
 5090 00bc 00000000 		.word	channel
 5091 00c0 00400050 		.word	1342193664
 5092 00c4 04400050 		.word	1342193668
 5093 00c8 08400050 		.word	1342193672
 5094 00cc 00000000 		.word	rx_tc
 5095 00d0 0C400050 		.word	1342193676
 5096 00d4 10400050 		.word	1342193680
 5097 00d8 00000000 		.word	rx_err
 5098              		.cfi_endproc
 5099              	.LFE19:
 5101              		.section	.text.DMA_IRQHandler,"ax",%progbits
 5102              		.align	2
 5103              		.global	DMA_IRQHandler
 5104              		.thumb
 5105              		.thumb_func
 5107              	DMA_IRQHandler:
 5108              	.LFB20:
1256:bluetooth_rxtx.c **** 
1257:bluetooth_rxtx.c **** void DMA_IRQHandler()
1258:bluetooth_rxtx.c **** {
 5109              		.loc 1 1258 0
 5110              		.cfi_startproc
 5111              		@ args = 0, pretend = 0, frame = 0
 5112              		@ frame_needed = 1, uses_anonymous_args = 0
 5113 0000 80B5     		push	{r7, lr}
 5114              		.cfi_def_cfa_offset 8
 5115              		.cfi_offset 7, -8
 5116              		.cfi_offset 14, -4
 5117 0002 00AF     		add	r7, sp, #0
 5118              		.cfi_def_cfa_register 7
1259:bluetooth_rxtx.c **** 	switch (mode) {
 5119              		.loc 1 1259 0
 5120 0004 154B     		ldr	r3, .L217
 5121 0006 1B78     		ldrb	r3, [r3]
 5122 0008 DBB2     		uxtb	r3, r3
 5123 000a 013B     		subs	r3, r3, #1
 5124 000c 0E2B     		cmp	r3, #14
 5125 000e 24D8     		bhi	.L213
 5126 0010 01A2     		adr	r2, .L216
 5127 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 5128 0016 00BF     		.p2align 2
 5129              	.L216:
 5130 0018 55000000 		.word	.L215+1
 5131 001c 5B000000 		.word	.L213+1
 5132 0020 5B000000 		.word	.L213+1
 5133 0024 55000000 		.word	.L215+1
 5134 0028 5B000000 		.word	.L213+1
 5135 002c 5B000000 		.word	.L213+1
 5136 0030 5B000000 		.word	.L213+1
 5137 0034 55000000 		.word	.L215+1
 5138 0038 55000000 		.word	.L215+1
 5139 003c 55000000 		.word	.L215+1
 5140 0040 5B000000 		.word	.L213+1
 5141 0044 55000000 		.word	.L215+1
ARM GAS  /tmp/ccfQkuUX.s 			page 112


 5142 0048 5B000000 		.word	.L213+1
 5143 004c 55000000 		.word	.L215+1
 5144 0050 55000000 		.word	.L215+1
 5145              		.p2align 1
 5146              	.L215:
1260:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1261:bluetooth_rxtx.c **** 		case MODE_RX_FREQ:
1262:bluetooth_rxtx.c **** 		case MODE_RX_PROPOSED:
1263:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1264:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1265:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1266:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1267:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1268:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 5147              		.loc 1 1268 0
 5148 0054 FFF7FEFF 		bl	bt_stream_dma_handler
1269:bluetooth_rxtx.c **** 			break;
 5149              		.loc 1 1269 0
 5150 0058 00BF     		nop
 5151              	.L213:
1270:bluetooth_rxtx.c **** 	}
1271:bluetooth_rxtx.c **** }
 5152              		.loc 1 1271 0
 5153 005a 80BD     		pop	{r7, pc}
 5154              	.L218:
 5155              		.align	2
 5156              	.L217:
 5157 005c 00000000 		.word	mode
 5158              		.cfi_endproc
 5159              	.LFE20:
 5161              		.section	.text.dio_ssp_start,"ax",%progbits
 5162              		.align	2
 5163              		.thumb
 5164              		.thumb_func
 5166              	dio_ssp_start:
 5167              	.LFB21:
1272:bluetooth_rxtx.c **** 
1273:bluetooth_rxtx.c **** static void dio_ssp_start()
1274:bluetooth_rxtx.c **** {
 5168              		.loc 1 1274 0
 5169              		.cfi_startproc
 5170              		@ args = 0, pretend = 0, frame = 0
 5171              		@ frame_needed = 1, uses_anonymous_args = 0
 5172              		@ link register save eliminated.
 5173 0000 80B4     		push	{r7}
 5174              		.cfi_def_cfa_offset 4
 5175              		.cfi_offset 7, -4
 5176 0002 00AF     		add	r7, sp, #0
 5177              		.cfi_def_cfa_register 7
1275:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1276:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 5178              		.loc 1 1276 0
 5179 0004 104B     		ldr	r3, .L220
 5180 0006 4FF08052 		mov	r2, #268435456
 5181 000a 1A60     		str	r2, [r3]
1277:bluetooth_rxtx.c **** 
1278:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
ARM GAS  /tmp/ccfQkuUX.s 			page 113


1279:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 5182              		.loc 1 1279 0
 5183 000c 0F4A     		ldr	r2, .L220+4
 5184 000e 0F4B     		ldr	r3, .L220+4
 5185 0010 1B68     		ldr	r3, [r3]
 5186 0012 43F00103 		orr	r3, r3, #1
 5187 0016 1360     		str	r3, [r2]
1280:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 5188              		.loc 1 1280 0
 5189 0018 0D4A     		ldr	r2, .L220+8
 5190 001a 0D4B     		ldr	r3, .L220+8
 5191 001c 1B68     		ldr	r3, [r3]
 5192 001e 43F00203 		orr	r3, r3, #2
 5193 0022 1360     		str	r3, [r2]
1281:bluetooth_rxtx.c **** 	
1282:bluetooth_rxtx.c **** 	/* enable DMA */
1283:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 5194              		.loc 1 1283 0
 5195 0024 0B4A     		ldr	r2, .L220+12
 5196 0026 0B4B     		ldr	r3, .L220+12
 5197 0028 1B68     		ldr	r3, [r3]
 5198 002a 43F00103 		orr	r3, r3, #1
 5199 002e 1360     		str	r3, [r2]
1284:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 5200              		.loc 1 1284 0
 5201 0030 094B     		ldr	r3, .L220+16
 5202 0032 4FF08062 		mov	r2, #67108864
 5203 0036 1A60     		str	r2, [r3]
1285:bluetooth_rxtx.c **** 
1286:bluetooth_rxtx.c **** 	/* activate slave select pin */
1287:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 5204              		.loc 1 1287 0
 5205 0038 084B     		ldr	r3, .L220+20
 5206 003a 4FF08052 		mov	r2, #268435456
 5207 003e 1A60     		str	r2, [r3]
1288:bluetooth_rxtx.c **** }
 5208              		.loc 1 1288 0
 5209 0040 BD46     		mov	sp, r7
 5210              		.cfi_def_cfa_register 13
 5211              		@ sp needed
 5212 0042 5DF8047B 		ldr	r7, [sp], #4
 5213              		.cfi_restore 7
 5214              		.cfi_def_cfa_offset 0
 5215 0046 7047     		bx	lr
 5216              	.L221:
 5217              		.align	2
 5218              	.L220:
 5219 0048 98C00920 		.word	537510040
 5220 004c 24000340 		.word	1073938468
 5221 0050 04000340 		.word	1073938436
 5222 0054 10410050 		.word	1342193936
 5223 0058 00E100E0 		.word	-536813312
 5224 005c 9CC00920 		.word	537510044
 5225              		.cfi_endproc
 5226              	.LFE21:
 5228              		.section	.text.dio_ssp_stop,"ax",%progbits
 5229              		.align	2
ARM GAS  /tmp/ccfQkuUX.s 			page 114


 5230              		.thumb
 5231              		.thumb_func
 5233              	dio_ssp_stop:
 5234              	.LFB22:
1289:bluetooth_rxtx.c **** 
1290:bluetooth_rxtx.c **** static void dio_ssp_stop()
1291:bluetooth_rxtx.c **** {
 5235              		.loc 1 1291 0
 5236              		.cfi_startproc
 5237              		@ args = 0, pretend = 0, frame = 0
 5238              		@ frame_needed = 1, uses_anonymous_args = 0
 5239              		@ link register save eliminated.
 5240 0000 80B4     		push	{r7}
 5241              		.cfi_def_cfa_offset 4
 5242              		.cfi_offset 7, -4
 5243 0002 00AF     		add	r7, sp, #0
 5244              		.cfi_def_cfa_register 7
1292:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1293:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 5245              		.loc 1 1293 0
 5246 0004 214B     		ldr	r3, .L224
 5247 0006 4FF08052 		mov	r2, #268435456
 5248 000a 1A60     		str	r2, [r3]
1294:bluetooth_rxtx.c **** 
1295:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1296:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 5249              		.loc 1 1296 0
 5250 000c 204A     		ldr	r2, .L224+4
 5251 000e 204B     		ldr	r3, .L224+4
 5252 0010 1B68     		ldr	r3, [r3]
 5253 0012 23F00103 		bic	r3, r3, #1
 5254 0016 1360     		str	r3, [r2]
1297:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 5255              		.loc 1 1297 0
 5256 0018 1E4A     		ldr	r2, .L224+8
 5257 001a 1E4B     		ldr	r3, .L224+8
 5258 001c 1B68     		ldr	r3, [r3]
 5259 001e 23F00203 		bic	r3, r3, #2
 5260 0022 1360     		str	r3, [r2]
1298:bluetooth_rxtx.c **** 
1299:bluetooth_rxtx.c **** 
1300:bluetooth_rxtx.c **** 	// disable DMA engine:
1301:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1302:bluetooth_rxtx.c **** 
1303:bluetooth_rxtx.c **** 	// disable DMA interrupts
1304:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 5261              		.loc 1 1304 0
 5262 0024 1C4B     		ldr	r3, .L224+12
 5263 0026 4FF08062 		mov	r2, #67108864
 5264 002a 1A60     		str	r2, [r3]
1305:bluetooth_rxtx.c **** 
1306:bluetooth_rxtx.c **** 	// disable active channels
1307:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 5265              		.loc 1 1307 0
 5266 002c 1B4B     		ldr	r3, .L224+16
 5267 002e 0022     		movs	r2, #0
 5268 0030 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 115


1308:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 5269              		.loc 1 1308 0
 5270 0032 1B4B     		ldr	r3, .L224+20
 5271 0034 0022     		movs	r2, #0
 5272 0036 1A60     		str	r2, [r3]
1309:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 5273              		.loc 1 1309 0
 5274 0038 1A4B     		ldr	r3, .L224+24
 5275 003a 0022     		movs	r2, #0
 5276 003c 1A60     		str	r2, [r3]
1310:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 5277              		.loc 1 1310 0
 5278 003e 1A4B     		ldr	r3, .L224+28
 5279 0040 0022     		movs	r2, #0
 5280 0042 1A60     		str	r2, [r3]
1311:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 5281              		.loc 1 1311 0
 5282 0044 194B     		ldr	r3, .L224+32
 5283 0046 0022     		movs	r2, #0
 5284 0048 1A60     		str	r2, [r3]
1312:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 5285              		.loc 1 1312 0
 5286 004a 194B     		ldr	r3, .L224+36
 5287 004c 0022     		movs	r2, #0
 5288 004e 1A60     		str	r2, [r3]
1313:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 5289              		.loc 1 1313 0
 5290 0050 184B     		ldr	r3, .L224+40
 5291 0052 0022     		movs	r2, #0
 5292 0054 1A60     		str	r2, [r3]
1314:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 5293              		.loc 1 1314 0
 5294 0056 184B     		ldr	r3, .L224+44
 5295 0058 0022     		movs	r2, #0
 5296 005a 1A60     		str	r2, [r3]
1315:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 5297              		.loc 1 1315 0
 5298 005c 174B     		ldr	r3, .L224+48
 5299 005e FF22     		movs	r2, #255
 5300 0060 1A60     		str	r2, [r3]
1316:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 5301              		.loc 1 1316 0
 5302 0062 174B     		ldr	r3, .L224+52
 5303 0064 FF22     		movs	r2, #255
 5304 0066 1A60     		str	r2, [r3]
1317:bluetooth_rxtx.c **** 
1318:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1319:bluetooth_rxtx.c **** 	// register.
1320:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 5305              		.loc 1 1320 0
 5306 0068 164A     		ldr	r2, .L224+56
 5307 006a 164B     		ldr	r3, .L224+56
 5308 006c 1B68     		ldr	r3, [r3]
 5309 006e 23F00103 		bic	r3, r3, #1
 5310 0072 1360     		str	r3, [r2]
1321:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 5311              		.loc 1 1321 0
ARM GAS  /tmp/ccfQkuUX.s 			page 116


 5312 0074 00BF     		nop
 5313              	.L223:
 5314              		.loc 1 1321 0 is_stmt 0 discriminator 1
 5315 0076 134B     		ldr	r3, .L224+56
 5316 0078 1B68     		ldr	r3, [r3]
 5317 007a 03F00103 		and	r3, r3, #1
 5318 007e 002B     		cmp	r3, #0
 5319 0080 F9D1     		bne	.L223
1322:bluetooth_rxtx.c **** }
 5320              		.loc 1 1322 0 is_stmt 1
 5321 0082 BD46     		mov	sp, r7
 5322              		.cfi_def_cfa_register 13
 5323              		@ sp needed
 5324 0084 5DF8047B 		ldr	r7, [sp], #4
 5325              		.cfi_restore 7
 5326              		.cfi_def_cfa_offset 0
 5327 0088 7047     		bx	lr
 5328              	.L225:
 5329 008a 00BF     		.align	2
 5330              	.L224:
 5331 008c 98C00920 		.word	537510040
 5332 0090 24000340 		.word	1073938468
 5333 0094 04000340 		.word	1073938436
 5334 0098 80E100E0 		.word	-536813184
 5335 009c 10410050 		.word	1342193936
 5336 00a0 30410050 		.word	1342193968
 5337 00a4 50410050 		.word	1342194000
 5338 00a8 70410050 		.word	1342194032
 5339 00ac 90410050 		.word	1342194064
 5340 00b0 B0410050 		.word	1342194096
 5341 00b4 D0410050 		.word	1342194128
 5342 00b8 F0410050 		.word	1342194160
 5343 00bc 08400050 		.word	1342193672
 5344 00c0 10400050 		.word	1342193680
 5345 00c4 30400050 		.word	1342193712
 5346              		.cfi_endproc
 5347              	.LFE22:
 5349              		.section	.text.cc2400_idle,"ax",%progbits
 5350              		.align	2
 5351              		.thumb
 5352              		.thumb_func
 5354              	cc2400_idle:
 5355              	.LFB23:
1323:bluetooth_rxtx.c **** 
1324:bluetooth_rxtx.c **** static void cc2400_idle()
1325:bluetooth_rxtx.c **** {
 5356              		.loc 1 1325 0
 5357              		.cfi_startproc
 5358              		@ args = 0, pretend = 0, frame = 0
 5359              		@ frame_needed = 1, uses_anonymous_args = 0
 5360 0000 80B5     		push	{r7, lr}
 5361              		.cfi_def_cfa_offset 8
 5362              		.cfi_offset 7, -8
 5363              		.cfi_offset 14, -4
 5364 0002 00AF     		add	r7, sp, #0
 5365              		.cfi_def_cfa_register 7
1326:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
ARM GAS  /tmp/ccfQkuUX.s 			page 117


 5366              		.loc 1 1326 0
 5367 0004 6420     		movs	r0, #100
 5368 0006 FFF7FEFF 		bl	cc2400_strobe
1327:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5369              		.loc 1 1327 0
 5370 000a 00BF     		nop
 5371              	.L227:
 5372              		.loc 1 1327 0 is_stmt 0 discriminator 1
 5373 000c FFF7FEFF 		bl	cc2400_status
 5374 0010 0346     		mov	r3, r0
 5375 0012 03F00403 		and	r3, r3, #4
 5376 0016 002B     		cmp	r3, #0
 5377 0018 F8D1     		bne	.L227
1328:bluetooth_rxtx.c **** 
1329:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1330:bluetooth_rxtx.c **** 	PAEN_CLR;
 5378              		.loc 1 1330 0 is_stmt 1
 5379 001a 0A4B     		ldr	r3, .L228
 5380 001c 8022     		movs	r2, #128
 5381 001e 1A60     		str	r2, [r3]
1331:bluetooth_rxtx.c **** 	HGM_CLR;
 5382              		.loc 1 1331 0
 5383 0020 084B     		ldr	r3, .L228
 5384 0022 4FF48072 		mov	r2, #256
 5385 0026 1A60     		str	r2, [r3]
1332:bluetooth_rxtx.c **** #endif
1333:bluetooth_rxtx.c **** 
1334:bluetooth_rxtx.c **** 	RXLED_CLR;
 5386              		.loc 1 1334 0
 5387 0028 074B     		ldr	r3, .L228+4
 5388 002a 1022     		movs	r2, #16
 5389 002c 1A60     		str	r2, [r3]
1335:bluetooth_rxtx.c **** 	TXLED_CLR;
 5390              		.loc 1 1335 0
 5391 002e 064B     		ldr	r3, .L228+4
 5392 0030 4FF48072 		mov	r2, #256
 5393 0034 1A60     		str	r2, [r3]
1336:bluetooth_rxtx.c **** 	USRLED_CLR;
 5394              		.loc 1 1336 0
 5395 0036 044B     		ldr	r3, .L228+4
 5396 0038 0222     		movs	r2, #2
 5397 003a 1A60     		str	r2, [r3]
1337:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 5398              		.loc 1 1337 0
 5399 003c 034B     		ldr	r3, .L228+8
 5400 003e 0022     		movs	r2, #0
 5401 0040 1A70     		strb	r2, [r3]
1338:bluetooth_rxtx.c **** }
 5402              		.loc 1 1338 0
 5403 0042 80BD     		pop	{r7, pc}
 5404              	.L229:
 5405              		.align	2
 5406              	.L228:
 5407 0044 5CC00920 		.word	537509980
 5408 0048 3CC00920 		.word	537509948
 5409 004c 00000000 		.word	mode
 5410              		.cfi_endproc
ARM GAS  /tmp/ccfQkuUX.s 			page 118


 5411              	.LFE23:
 5413              		.section	.text.cc2400_rx,"ax",%progbits
 5414              		.align	2
 5415              		.thumb
 5416              		.thumb_func
 5418              	cc2400_rx:
 5419              	.LFB24:
1339:bluetooth_rxtx.c **** 
1340:bluetooth_rxtx.c **** /* start un-buffered rx */
1341:bluetooth_rxtx.c **** static void cc2400_rx()
1342:bluetooth_rxtx.c **** {
 5420              		.loc 1 1342 0
 5421              		.cfi_startproc
 5422              		@ args = 0, pretend = 0, frame = 8
 5423              		@ frame_needed = 1, uses_anonymous_args = 0
 5424 0000 80B5     		push	{r7, lr}
 5425              		.cfi_def_cfa_offset 8
 5426              		.cfi_offset 7, -8
 5427              		.cfi_offset 14, -4
 5428 0002 82B0     		sub	sp, sp, #8
 5429              		.cfi_def_cfa_offset 16
 5430 0004 00AF     		add	r7, sp, #0
 5431              		.cfi_def_cfa_register 7
1343:bluetooth_rxtx.c **** 	u16 mdmctrl;
1344:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5432              		.loc 1 1344 0
 5433 0006 2A4B     		ldr	r3, .L237
 5434 0008 1B78     		ldrb	r3, [r3]
 5435 000a DBB2     		uxtb	r3, r3
 5436 000c 002B     		cmp	r3, #0
 5437 000e 02D1     		bne	.L231
1345:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5438              		.loc 1 1345 0
 5439 0010 2923     		movs	r3, #41
 5440 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 5441 0014 08E0     		b	.L232
 5442              	.L231:
1346:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5443              		.loc 1 1346 0
 5444 0016 264B     		ldr	r3, .L237
 5445 0018 1B78     		ldrb	r3, [r3]
 5446 001a DBB2     		uxtb	r3, r3
 5447 001c 012B     		cmp	r3, #1
 5448 001e 02D1     		bne	.L233
1347:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5449              		.loc 1 1347 0
 5450 0020 4023     		movs	r3, #64
 5451 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 5452 0024 00E0     		b	.L232
 5453              	.L233:
1348:bluetooth_rxtx.c **** 	} else {
1349:bluetooth_rxtx.c **** 		/* oops */
1350:bluetooth_rxtx.c **** 		return;
 5454              		.loc 1 1350 0
 5455 0026 40E0     		b	.L230
 5456              	.L232:
1351:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccfQkuUX.s 			page 119


1352:bluetooth_rxtx.c **** 
1353:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5457              		.loc 1 1353 0
 5458 0028 0D20     		movs	r0, #13
 5459 002a 47F6FF71 		movw	r1, #32767
 5460 002e FFF7FEFF 		bl	cc2400_set
1354:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5461              		.loc 1 1354 0
 5462 0032 1220     		movs	r0, #18
 5463 0034 42F62231 		movw	r1, #11042
 5464 0038 FFF7FEFF 		bl	cc2400_set
1355:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 5465              		.loc 1 1355 0
 5466 003c 1420     		movs	r0, #20
 5467 003e 41F24B31 		movw	r1, #4939
 5468 0042 FFF7FEFF 		bl	cc2400_set
1356:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 5469              		.loc 1 1356 0
 5470 0046 2020     		movs	r0, #32
 5471 0048 40F20111 		movw	r1, #257
 5472 004c FFF7FEFF 		bl	cc2400_set
1357:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1358:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1359:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1360:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1361:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1362:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1363:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5473              		.loc 1 1363 0
 5474 0050 184B     		ldr	r3, .L237+4
 5475 0052 1B88     		ldrh	r3, [r3]	@ movhi
 5476 0054 9BB2     		uxth	r3, r3
 5477 0056 013B     		subs	r3, r3, #1
 5478 0058 9BB2     		uxth	r3, r3
 5479 005a 0220     		movs	r0, #2
 5480 005c 1946     		mov	r1, r3
 5481 005e FFF7FEFF 		bl	cc2400_set
1364:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5482              		.loc 1 1364 0
 5483 0062 FB88     		ldrh	r3, [r7, #6]
 5484 0064 0320     		movs	r0, #3
 5485 0066 1946     		mov	r1, r3
 5486 0068 FFF7FEFF 		bl	cc2400_set
1365:bluetooth_rxtx.c **** 
1366:bluetooth_rxtx.c **** 	// Set up CS register
1367:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5487              		.loc 1 1367 0
 5488 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1368:bluetooth_rxtx.c **** 
1369:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5489              		.loc 1 1369 0
 5490 0070 00BF     		nop
 5491              	.L235:
 5492              		.loc 1 1369 0 is_stmt 0 discriminator 1
 5493 0072 FFF7FEFF 		bl	cc2400_status
 5494 0076 0346     		mov	r3, r0
 5495 0078 03F04003 		and	r3, r3, #64
ARM GAS  /tmp/ccfQkuUX.s 			page 120


 5496 007c 002B     		cmp	r3, #0
 5497 007e F8D0     		beq	.L235
1370:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5498              		.loc 1 1370 0 is_stmt 1
 5499 0080 6120     		movs	r0, #97
 5500 0082 FFF7FEFF 		bl	cc2400_strobe
1371:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5501              		.loc 1 1371 0
 5502 0086 00BF     		nop
 5503              	.L236:
 5504              		.loc 1 1371 0 is_stmt 0 discriminator 1
 5505 0088 FFF7FEFF 		bl	cc2400_status
 5506 008c 0346     		mov	r3, r0
 5507 008e 03F00403 		and	r3, r3, #4
 5508 0092 002B     		cmp	r3, #0
 5509 0094 F8D0     		beq	.L236
1372:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5510              		.loc 1 1372 0 is_stmt 1
 5511 0096 6220     		movs	r0, #98
 5512 0098 FFF7FEFF 		bl	cc2400_strobe
1373:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1374:bluetooth_rxtx.c **** 	PAEN_SET;
 5513              		.loc 1 1374 0
 5514 009c 064B     		ldr	r3, .L237+8
 5515 009e 8022     		movs	r2, #128
 5516 00a0 1A60     		str	r2, [r3]
1375:bluetooth_rxtx.c **** 	HGM_SET;
 5517              		.loc 1 1375 0
 5518 00a2 054B     		ldr	r3, .L237+8
 5519 00a4 4FF48072 		mov	r2, #256
 5520 00a8 1A60     		str	r2, [r3]
 5521              	.L230:
1376:bluetooth_rxtx.c **** #endif
1377:bluetooth_rxtx.c **** }
 5522              		.loc 1 1377 0
 5523 00aa 0837     		adds	r7, r7, #8
 5524              		.cfi_def_cfa_offset 8
 5525 00ac BD46     		mov	sp, r7
 5526              		.cfi_def_cfa_register 13
 5527              		@ sp needed
 5528 00ae 80BD     		pop	{r7, pc}
 5529              	.L238:
 5530              		.align	2
 5531              	.L237:
 5532 00b0 00000000 		.word	modulation
 5533 00b4 00000000 		.word	channel
 5534 00b8 58C00920 		.word	537509976
 5535              		.cfi_endproc
 5536              	.LFE24:
 5538              		.section	.text.cc2400_rx_sync,"ax",%progbits
 5539              		.align	2
 5540              		.thumb
 5541              		.thumb_func
 5543              	cc2400_rx_sync:
 5544              	.LFB25:
1378:bluetooth_rxtx.c **** 
1379:bluetooth_rxtx.c **** /* start un-buffered rx */
ARM GAS  /tmp/ccfQkuUX.s 			page 121


1380:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1381:bluetooth_rxtx.c **** {
 5545              		.loc 1 1381 0
 5546              		.cfi_startproc
 5547              		@ args = 0, pretend = 0, frame = 16
 5548              		@ frame_needed = 1, uses_anonymous_args = 0
 5549 0000 80B5     		push	{r7, lr}
 5550              		.cfi_def_cfa_offset 8
 5551              		.cfi_offset 7, -8
 5552              		.cfi_offset 14, -4
 5553 0002 84B0     		sub	sp, sp, #16
 5554              		.cfi_def_cfa_offset 24
 5555 0004 00AF     		add	r7, sp, #0
 5556              		.cfi_def_cfa_register 7
 5557 0006 7860     		str	r0, [r7, #4]
1382:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1383:bluetooth_rxtx.c **** 
1384:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5558              		.loc 1 1384 0
 5559 0008 334B     		ldr	r3, .L246
 5560 000a 1B78     		ldrb	r3, [r3]
 5561 000c DBB2     		uxtb	r3, r3
 5562 000e 002B     		cmp	r3, #0
 5563 0010 05D1     		bne	.L240
1385:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5564              		.loc 1 1385 0
 5565 0012 2923     		movs	r3, #41
 5566 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1386:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5567              		.loc 1 1386 0
 5568 0016 40F26143 		movw	r3, #1121
 5569 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5570 001c 0BE0     		b	.L241
 5571              	.L240:
1387:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1388:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1389:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1390:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1391:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1392:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1393:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1394:bluetooth_rxtx.c **** 
1395:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5572              		.loc 1 1395 0
 5573 001e 2E4B     		ldr	r3, .L246
 5574 0020 1B78     		ldrb	r3, [r3]
 5575 0022 DBB2     		uxtb	r3, r3
 5576 0024 012B     		cmp	r3, #1
 5577 0026 05D1     		bne	.L242
1396:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5578              		.loc 1 1396 0
 5579 0028 4023     		movs	r3, #64
 5580 002a BB81     		strh	r3, [r7, #12]	@ movhi
1397:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 5581              		.loc 1 1397 0
 5582 002c 40F26153 		movw	r3, #1377
 5583 0030 FB81     		strh	r3, [r7, #14]	@ movhi
ARM GAS  /tmp/ccfQkuUX.s 			page 122


 5584 0032 00E0     		b	.L241
 5585              	.L242:
1398:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1399:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1400:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1401:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1402:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1403:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1404:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1405:bluetooth_rxtx.c **** 
1406:bluetooth_rxtx.c **** 	} else {
1407:bluetooth_rxtx.c **** 		/* oops */
1408:bluetooth_rxtx.c **** 		return;
 5586              		.loc 1 1408 0
 5587 0034 4DE0     		b	.L239
 5588              	.L241:
1409:bluetooth_rxtx.c **** 	}
1410:bluetooth_rxtx.c **** 
1411:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5589              		.loc 1 1411 0
 5590 0036 0D20     		movs	r0, #13
 5591 0038 47F6FF71 		movw	r1, #32767
 5592 003c FFF7FEFF 		bl	cc2400_set
1412:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5593              		.loc 1 1412 0
 5594 0040 1220     		movs	r0, #18
 5595 0042 42F62231 		movw	r1, #11042
 5596 0046 FFF7FEFF 		bl	cc2400_set
1413:bluetooth_rxtx.c **** 
1414:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 5597              		.loc 1 1414 0
 5598 004a 1420     		movs	r0, #20
 5599 004c 41F24B21 		movw	r1, #4683
 5600 0050 FFF7FEFF 		bl	cc2400_set
1415:bluetooth_rxtx.c **** 	// 1      2      4b
1416:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1417:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1418:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1419:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1420:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1421:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1422:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1423:bluetooth_rxtx.c **** 	//
1424:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1425:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1426:bluetooth_rxtx.c **** 
1427:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5601              		.loc 1 1427 0
 5602 0054 FB89     		ldrh	r3, [r7, #14]
 5603 0056 2020     		movs	r0, #32
 5604 0058 1946     		mov	r1, r3
 5605 005a FFF7FEFF 		bl	cc2400_set
1428:bluetooth_rxtx.c **** 
1429:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5606              		.loc 1 1429 0
 5607 005e 7B68     		ldr	r3, [r7, #4]
 5608 0060 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccfQkuUX.s 			page 123


 5609 0062 2C20     		movs	r0, #44
 5610 0064 1946     		mov	r1, r3
 5611 0066 FFF7FEFF 		bl	cc2400_set
1430:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5612              		.loc 1 1430 0
 5613 006a 7B68     		ldr	r3, [r7, #4]
 5614 006c 1B0C     		lsrs	r3, r3, #16
 5615 006e 9BB2     		uxth	r3, r3
 5616 0070 2D20     		movs	r0, #45
 5617 0072 1946     		mov	r1, r3
 5618 0074 FFF7FEFF 		bl	cc2400_set
1431:bluetooth_rxtx.c **** 	
1432:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5619              		.loc 1 1432 0
 5620 0078 184B     		ldr	r3, .L246+4
 5621 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5622 007c 9BB2     		uxth	r3, r3
 5623 007e 013B     		subs	r3, r3, #1
 5624 0080 9BB2     		uxth	r3, r3
 5625 0082 0220     		movs	r0, #2
 5626 0084 1946     		mov	r1, r3
 5627 0086 FFF7FEFF 		bl	cc2400_set
1433:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5628              		.loc 1 1433 0
 5629 008a BB89     		ldrh	r3, [r7, #12]
 5630 008c 0320     		movs	r0, #3
 5631 008e 1946     		mov	r1, r3
 5632 0090 FFF7FEFF 		bl	cc2400_set
1434:bluetooth_rxtx.c **** 
1435:bluetooth_rxtx.c **** 	// Set up CS register
1436:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5633              		.loc 1 1436 0
 5634 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1437:bluetooth_rxtx.c **** 
1438:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5635              		.loc 1 1438 0
 5636 0098 00BF     		nop
 5637              	.L244:
 5638              		.loc 1 1438 0 is_stmt 0 discriminator 1
 5639 009a FFF7FEFF 		bl	cc2400_status
 5640 009e 0346     		mov	r3, r0
 5641 00a0 03F04003 		and	r3, r3, #64
 5642 00a4 002B     		cmp	r3, #0
 5643 00a6 F8D0     		beq	.L244
1439:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5644              		.loc 1 1439 0 is_stmt 1
 5645 00a8 6120     		movs	r0, #97
 5646 00aa FFF7FEFF 		bl	cc2400_strobe
1440:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5647              		.loc 1 1440 0
 5648 00ae 00BF     		nop
 5649              	.L245:
 5650              		.loc 1 1440 0 is_stmt 0 discriminator 1
 5651 00b0 FFF7FEFF 		bl	cc2400_status
 5652 00b4 0346     		mov	r3, r0
 5653 00b6 03F00403 		and	r3, r3, #4
 5654 00ba 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 124


 5655 00bc F8D0     		beq	.L245
1441:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5656              		.loc 1 1441 0 is_stmt 1
 5657 00be 6220     		movs	r0, #98
 5658 00c0 FFF7FEFF 		bl	cc2400_strobe
1442:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1443:bluetooth_rxtx.c **** 	PAEN_SET;
 5659              		.loc 1 1443 0
 5660 00c4 064B     		ldr	r3, .L246+8
 5661 00c6 8022     		movs	r2, #128
 5662 00c8 1A60     		str	r2, [r3]
1444:bluetooth_rxtx.c **** 	HGM_SET;
 5663              		.loc 1 1444 0
 5664 00ca 054B     		ldr	r3, .L246+8
 5665 00cc 4FF48072 		mov	r2, #256
 5666 00d0 1A60     		str	r2, [r3]
 5667              	.L239:
1445:bluetooth_rxtx.c **** #endif
1446:bluetooth_rxtx.c **** }
 5668              		.loc 1 1446 0
 5669 00d2 1037     		adds	r7, r7, #16
 5670              		.cfi_def_cfa_offset 8
 5671 00d4 BD46     		mov	sp, r7
 5672              		.cfi_def_cfa_register 13
 5673              		@ sp needed
 5674 00d6 80BD     		pop	{r7, pc}
 5675              	.L247:
 5676              		.align	2
 5677              	.L246:
 5678 00d8 00000000 		.word	modulation
 5679 00dc 00000000 		.word	channel
 5680 00e0 58C00920 		.word	537509976
 5681              		.cfi_endproc
 5682              	.LFE25:
 5684              		.section	.text.le_transmit,"ax",%progbits
 5685              		.align	2
 5686              		.global	le_transmit
 5687              		.thumb
 5688              		.thumb_func
 5690              	le_transmit:
 5691              	.LFB26:
1447:bluetooth_rxtx.c **** 
1448:bluetooth_rxtx.c **** /*
1449:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1450:bluetooth_rxtx.c ****  *
1451:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1452:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1453:bluetooth_rxtx.c ****  * included in the data length.
1454:bluetooth_rxtx.c ****  */
1455:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1456:bluetooth_rxtx.c **** {
 5692              		.loc 1 1456 0
 5693              		.cfi_startproc
 5694              		@ args = 0, pretend = 0, frame = 104
 5695              		@ frame_needed = 1, uses_anonymous_args = 0
 5696 0000 80B5     		push	{r7, lr}
 5697              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccfQkuUX.s 			page 125


 5698              		.cfi_offset 7, -8
 5699              		.cfi_offset 14, -4
 5700 0002 9AB0     		sub	sp, sp, #104
 5701              		.cfi_def_cfa_offset 112
 5702 0004 00AF     		add	r7, sp, #0
 5703              		.cfi_def_cfa_register 7
 5704 0006 F860     		str	r0, [r7, #12]
 5705 0008 0B46     		mov	r3, r1
 5706 000a 7A60     		str	r2, [r7, #4]
 5707 000c FB72     		strb	r3, [r7, #11]
1457:bluetooth_rxtx.c **** 	unsigned i, j;
1458:bluetooth_rxtx.c **** 	int bit;
1459:bluetooth_rxtx.c **** 	u8 txbuf[64];
1460:bluetooth_rxtx.c **** 	u8 tx_len;
1461:bluetooth_rxtx.c **** 	u8 byte;
1462:bluetooth_rxtx.c **** 	u16 gio_save;
1463:bluetooth_rxtx.c **** 
1464:bluetooth_rxtx.c **** 	// first four bytes: AA
1465:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5708              		.loc 1 1465 0
 5709 000e 0023     		movs	r3, #0
 5710 0010 7B66     		str	r3, [r7, #100]
 5711 0012 35E0     		b	.L249
 5712              	.L252:
1466:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5713              		.loc 1 1466 0
 5714 0014 FB68     		ldr	r3, [r7, #12]
 5715 0016 87F85E30 		strb	r3, [r7, #94]
1467:bluetooth_rxtx.c **** 		aa >>= 8;
 5716              		.loc 1 1467 0
 5717 001a FB68     		ldr	r3, [r7, #12]
 5718 001c 1B0A     		lsrs	r3, r3, #8
 5719 001e FB60     		str	r3, [r7, #12]
1468:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5720              		.loc 1 1468 0
 5721 0020 07F11002 		add	r2, r7, #16
 5722 0024 7B6E     		ldr	r3, [r7, #100]
 5723 0026 1344     		add	r3, r3, r2
 5724 0028 0022     		movs	r2, #0
 5725 002a 1A70     		strb	r2, [r3]
1469:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5726              		.loc 1 1469 0
 5727 002c 0023     		movs	r3, #0
 5728 002e 3B66     		str	r3, [r7, #96]
 5729 0030 20E0     		b	.L250
 5730              	.L251:
1470:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5731              		.loc 1 1470 0 discriminator 3
 5732 0032 07F11002 		add	r2, r7, #16
 5733 0036 7B6E     		ldr	r3, [r7, #100]
 5734 0038 1344     		add	r3, r3, r2
 5735 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5736 003c D9B2     		uxtb	r1, r3
 5737 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5738 0042 03F00103 		and	r3, r3, #1
 5739 0046 3A6E     		ldr	r2, [r7, #96]
 5740 0048 C2F10702 		rsb	r2, r2, #7
ARM GAS  /tmp/ccfQkuUX.s 			page 126


 5741 004c 9340     		lsls	r3, r3, r2
 5742 004e DBB2     		uxtb	r3, r3
 5743 0050 0A46     		mov	r2, r1
 5744 0052 1343     		orrs	r3, r3, r2
 5745 0054 DBB2     		uxtb	r3, r3
 5746 0056 D9B2     		uxtb	r1, r3
 5747 0058 07F11002 		add	r2, r7, #16
 5748 005c 7B6E     		ldr	r3, [r7, #100]
 5749 005e 1344     		add	r3, r3, r2
 5750 0060 0A46     		mov	r2, r1
 5751 0062 1A70     		strb	r2, [r3]
1471:bluetooth_rxtx.c **** 			byte >>= 1;
 5752              		.loc 1 1471 0 discriminator 3
 5753 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5754 0068 5B08     		lsrs	r3, r3, #1
 5755 006a 87F85E30 		strb	r3, [r7, #94]
1469:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5756              		.loc 1 1469 0 discriminator 3
 5757 006e 3B6E     		ldr	r3, [r7, #96]
 5758 0070 0133     		adds	r3, r3, #1
 5759 0072 3B66     		str	r3, [r7, #96]
 5760              	.L250:
1469:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5761              		.loc 1 1469 0 is_stmt 0 discriminator 1
 5762 0074 3B6E     		ldr	r3, [r7, #96]
 5763 0076 072B     		cmp	r3, #7
 5764 0078 DBD9     		bls	.L251
1465:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5765              		.loc 1 1465 0 is_stmt 1 discriminator 2
 5766 007a 7B6E     		ldr	r3, [r7, #100]
 5767 007c 0133     		adds	r3, r3, #1
 5768 007e 7B66     		str	r3, [r7, #100]
 5769              	.L249:
1465:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5770              		.loc 1 1465 0 is_stmt 0 discriminator 1
 5771 0080 7B6E     		ldr	r3, [r7, #100]
 5772 0082 032B     		cmp	r3, #3
 5773 0084 C6D9     		bls	.L252
1472:bluetooth_rxtx.c **** 		}
1473:bluetooth_rxtx.c **** 	}
1474:bluetooth_rxtx.c **** 
1475:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1476:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5774              		.loc 1 1476 0 is_stmt 1
 5775 0086 934B     		ldr	r3, .L268
 5776 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5777 008a 9BB2     		uxth	r3, r3
 5778 008c DBB2     		uxtb	r3, r3
 5779 008e 623B     		subs	r3, r3, #98
 5780 0090 DBB2     		uxtb	r3, r3
 5781 0092 1846     		mov	r0, r3
 5782 0094 FFF7FEFF 		bl	btle_channel_index
 5783 0098 0346     		mov	r3, r0
 5784 009a 1A46     		mov	r2, r3
 5785 009c 8E4B     		ldr	r3, .L268+4
 5786 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5787 00a0 BB65     		str	r3, [r7, #88]
ARM GAS  /tmp/ccfQkuUX.s 			page 127


1477:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5788              		.loc 1 1477 0
 5789 00a2 0023     		movs	r3, #0
 5790 00a4 7B66     		str	r3, [r7, #100]
 5791 00a6 50E0     		b	.L253
 5792              	.L256:
1478:bluetooth_rxtx.c **** 		byte = data[i];
 5793              		.loc 1 1478 0
 5794 00a8 7A68     		ldr	r2, [r7, #4]
 5795 00aa 7B6E     		ldr	r3, [r7, #100]
 5796 00ac 1344     		add	r3, r3, r2
 5797 00ae 1B78     		ldrb	r3, [r3]
 5798 00b0 87F85E30 		strb	r3, [r7, #94]
1479:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5799              		.loc 1 1479 0
 5800 00b4 7B6E     		ldr	r3, [r7, #100]
 5801 00b6 0433     		adds	r3, r3, #4
 5802 00b8 07F16802 		add	r2, r7, #104
 5803 00bc 1344     		add	r3, r3, r2
 5804 00be 0022     		movs	r2, #0
 5805 00c0 03F8582C 		strb	r2, [r3, #-88]
1480:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5806              		.loc 1 1480 0
 5807 00c4 0023     		movs	r3, #0
 5808 00c6 3B66     		str	r3, [r7, #96]
 5809 00c8 39E0     		b	.L254
 5810              	.L255:
1481:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5811              		.loc 1 1481 0 discriminator 3
 5812 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5813 00ce 03F00103 		and	r3, r3, #1
 5814 00d2 8249     		ldr	r1, .L268+8
 5815 00d4 BA6D     		ldr	r2, [r7, #88]
 5816 00d6 0A44     		add	r2, r2, r1
 5817 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5818 00da 5340     		eors	r3, r3, r2
 5819 00dc 7B65     		str	r3, [r7, #84]
1482:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5820              		.loc 1 1482 0 discriminator 3
 5821 00de BB6D     		ldr	r3, [r7, #88]
 5822 00e0 0133     		adds	r3, r3, #1
 5823 00e2 1946     		mov	r1, r3
 5824 00e4 7E4B     		ldr	r3, .L268+12
 5825 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5826 00ea C81A     		subs	r0, r1, r3
 5827 00ec 4008     		lsrs	r0, r0, #1
 5828 00ee 0344     		add	r3, r3, r0
 5829 00f0 9A09     		lsrs	r2, r3, #6
 5830 00f2 1346     		mov	r3, r2
 5831 00f4 DB01     		lsls	r3, r3, #7
 5832 00f6 9B1A     		subs	r3, r3, r2
 5833 00f8 CA1A     		subs	r2, r1, r3
 5834 00fa BA65     		str	r2, [r7, #88]
1483:bluetooth_rxtx.c **** 			byte >>= 1;
 5835              		.loc 1 1483 0 discriminator 3
 5836 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5837 0100 5B08     		lsrs	r3, r3, #1
ARM GAS  /tmp/ccfQkuUX.s 			page 128


 5838 0102 87F85E30 		strb	r3, [r7, #94]
1484:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5839              		.loc 1 1484 0 discriminator 3
 5840 0106 7B6E     		ldr	r3, [r7, #100]
 5841 0108 0433     		adds	r3, r3, #4
 5842 010a 7A6E     		ldr	r2, [r7, #100]
 5843 010c 0432     		adds	r2, r2, #4
 5844 010e 07F16801 		add	r1, r7, #104
 5845 0112 0A44     		add	r2, r2, r1
 5846 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5847 0118 D1B2     		uxtb	r1, r2
 5848 011a 3A6E     		ldr	r2, [r7, #96]
 5849 011c C2F10702 		rsb	r2, r2, #7
 5850 0120 1046     		mov	r0, r2
 5851 0122 7A6D     		ldr	r2, [r7, #84]
 5852 0124 8240     		lsls	r2, r2, r0
 5853 0126 D2B2     		uxtb	r2, r2
 5854 0128 0A43     		orrs	r2, r2, r1
 5855 012a D2B2     		uxtb	r2, r2
 5856 012c D2B2     		uxtb	r2, r2
 5857 012e 07F16801 		add	r1, r7, #104
 5858 0132 0B44     		add	r3, r3, r1
 5859 0134 03F8582C 		strb	r2, [r3, #-88]
1480:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5860              		.loc 1 1480 0 discriminator 3
 5861 0138 3B6E     		ldr	r3, [r7, #96]
 5862 013a 0133     		adds	r3, r3, #1
 5863 013c 3B66     		str	r3, [r7, #96]
 5864              	.L254:
1480:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5865              		.loc 1 1480 0 is_stmt 0 discriminator 1
 5866 013e 3B6E     		ldr	r3, [r7, #96]
 5867 0140 072B     		cmp	r3, #7
 5868 0142 C2D9     		bls	.L255
1477:bluetooth_rxtx.c **** 		byte = data[i];
 5869              		.loc 1 1477 0 is_stmt 1 discriminator 2
 5870 0144 7B6E     		ldr	r3, [r7, #100]
 5871 0146 0133     		adds	r3, r3, #1
 5872 0148 7B66     		str	r3, [r7, #100]
 5873              	.L253:
1477:bluetooth_rxtx.c **** 		byte = data[i];
 5874              		.loc 1 1477 0 is_stmt 0 discriminator 1
 5875 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5876 014c 7B6E     		ldr	r3, [r7, #100]
 5877 014e 9A42     		cmp	r2, r3
 5878 0150 AAD8     		bhi	.L256
1485:bluetooth_rxtx.c **** 		}
1486:bluetooth_rxtx.c **** 	}
1487:bluetooth_rxtx.c **** 
1488:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5879              		.loc 1 1488 0 is_stmt 1
 5880 0152 FB7A     		ldrb	r3, [r7, #11]
 5881 0154 0433     		adds	r3, r3, #4
 5882 0156 FB72     		strb	r3, [r7, #11]
1489:bluetooth_rxtx.c **** 
1490:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1491:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
ARM GAS  /tmp/ccfQkuUX.s 			page 129


 5883              		.loc 1 1491 0
 5884 0158 0D20     		movs	r0, #13
 5885 015a 47F6FF71 		movw	r1, #32767
 5886 015e FFF7FEFF 		bl	cc2400_set
1492:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5887              		.loc 1 1492 0
 5888 0162 1220     		movs	r0, #18
 5889 0164 42F62231 		movw	r1, #11042
 5890 0168 FFF7FEFF 		bl	cc2400_set
1493:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5891              		.loc 1 1493 0
 5892 016c 1420     		movs	r0, #20
 5893 016e 41F24B31 		movw	r1, #4939
 5894 0172 FFF7FEFF 		bl	cc2400_set
1494:bluetooth_rxtx.c **** 
1495:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5895              		.loc 1 1495 0
 5896 0176 2020     		movs	r0, #32
 5897 0178 40F60141 		movw	r1, #3073
 5898 017c FFF7FEFF 		bl	cc2400_set
1496:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1497:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1498:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1499:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1500:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1501:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1502:bluetooth_rxtx.c **** 
1503:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5899              		.loc 1 1503 0
 5900 0180 544B     		ldr	r3, .L268
 5901 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5902 0184 9BB2     		uxth	r3, r3
 5903 0186 0220     		movs	r0, #2
 5904 0188 1946     		mov	r1, r3
 5905 018a FFF7FEFF 		bl	cc2400_set
1504:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5906              		.loc 1 1504 0
 5907 018e 0520     		movs	r0, #5
 5908 0190 0B21     		movs	r1, #11
 5909 0192 FFF7FEFF 		bl	cc2400_set
1505:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5910              		.loc 1 1505 0
 5911 0196 0320     		movs	r0, #3
 5912 0198 4021     		movs	r1, #64
 5913 019a FFF7FEFF 		bl	cc2400_set
1506:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5914              		.loc 1 1506 0
 5915 019e 2320     		movs	r0, #35
 5916 01a0 1421     		movs	r1, #20
 5917 01a2 FFF7FEFF 		bl	cc2400_set
1507:bluetooth_rxtx.c **** 
1508:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1509:bluetooth_rxtx.c **** 	if (aa & 1)
 5918              		.loc 1 1509 0
 5919 01a6 FB68     		ldr	r3, [r7, #12]
 5920 01a8 03F00103 		and	r3, r3, #1
 5921 01ac 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 130


 5922 01ae 05D0     		beq	.L257
1510:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5923              		.loc 1 1510 0
 5924 01b0 2D20     		movs	r0, #45
 5925 01b2 4AF6AA21 		movw	r1, #43690
 5926 01b6 FFF7FEFF 		bl	cc2400_set
 5927 01ba 04E0     		b	.L258
 5928              	.L257:
1511:bluetooth_rxtx.c **** 	else
1512:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5929              		.loc 1 1512 0
 5930 01bc 2D20     		movs	r0, #45
 5931 01be 45F25551 		movw	r1, #21845
 5932 01c2 FFF7FEFF 		bl	cc2400_set
 5933              	.L258:
1513:bluetooth_rxtx.c **** 
1514:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1515:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5934              		.loc 1 1515 0
 5935 01c6 0820     		movs	r0, #8
 5936 01c8 FFF7FEFF 		bl	cc2400_get
 5937 01cc 0346     		mov	r3, r0
 5938 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1516:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5939              		.loc 1 1516 0
 5940 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5941 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5942 01da 9BB2     		uxth	r3, r3
 5943 01dc 43F49C43 		orr	r3, r3, #19968
 5944 01e0 9BB2     		uxth	r3, r3
 5945 01e2 9BB2     		uxth	r3, r3
 5946 01e4 0820     		movs	r0, #8
 5947 01e6 1946     		mov	r1, r3
 5948 01e8 FFF7FEFF 		bl	cc2400_set
1517:bluetooth_rxtx.c **** 
1518:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5949              		.loc 1 1518 0
 5950 01ec 00BF     		nop
 5951              	.L259:
 5952              		.loc 1 1518 0 is_stmt 0 discriminator 1
 5953 01ee FFF7FEFF 		bl	cc2400_status
 5954 01f2 0346     		mov	r3, r0
 5955 01f4 03F04003 		and	r3, r3, #64
 5956 01f8 002B     		cmp	r3, #0
 5957 01fa F8D0     		beq	.L259
1519:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5958              		.loc 1 1519 0 is_stmt 1
 5959 01fc 6120     		movs	r0, #97
 5960 01fe FFF7FEFF 		bl	cc2400_strobe
1520:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5961              		.loc 1 1520 0
 5962 0202 00BF     		nop
 5963              	.L260:
 5964              		.loc 1 1520 0 is_stmt 0 discriminator 1
 5965 0204 FFF7FEFF 		bl	cc2400_status
 5966 0208 0346     		mov	r3, r0
 5967 020a 03F00403 		and	r3, r3, #4
ARM GAS  /tmp/ccfQkuUX.s 			page 131


 5968 020e 002B     		cmp	r3, #0
 5969 0210 F8D0     		beq	.L260
1521:bluetooth_rxtx.c **** 	TXLED_SET;
 5970              		.loc 1 1521 0 is_stmt 1
 5971 0212 344B     		ldr	r3, .L268+16
 5972 0214 4FF48072 		mov	r2, #256
 5973 0218 1A60     		str	r2, [r3]
1522:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1523:bluetooth_rxtx.c **** 	PAEN_SET;
 5974              		.loc 1 1523 0
 5975 021a 334B     		ldr	r3, .L268+20
 5976 021c 8022     		movs	r2, #128
 5977 021e 1A60     		str	r2, [r3]
1524:bluetooth_rxtx.c **** #endif
1525:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5978              		.loc 1 1525 0
 5979 0220 00BF     		nop
 5980              	.L261:
 5981              		.loc 1 1525 0 is_stmt 0 discriminator 1
 5982 0222 0E20     		movs	r0, #14
 5983 0224 FFF7FEFF 		bl	cc2400_get
 5984 0228 0346     		mov	r3, r0
 5985 022a 03F01F03 		and	r3, r3, #31
 5986 022e 0F2B     		cmp	r3, #15
 5987 0230 F7D1     		bne	.L261
1526:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5988              		.loc 1 1526 0 is_stmt 1
 5989 0232 6320     		movs	r0, #99
 5990 0234 FFF7FEFF 		bl	cc2400_strobe
1527:bluetooth_rxtx.c **** 
1528:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1529:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5991              		.loc 1 1529 0
 5992 0238 0023     		movs	r3, #0
 5993 023a 7B66     		str	r3, [r7, #100]
 5994 023c 21E0     		b	.L262
 5995              	.L265:
1530:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5996              		.loc 1 1530 0
 5997 023e 00BF     		nop
 5998              	.L263:
 5999              		.loc 1 1530 0 is_stmt 0 discriminator 1
 6000 0240 2A4B     		ldr	r3, .L268+24
 6001 0242 1B68     		ldr	r3, [r3]
 6002 0244 03F00403 		and	r3, r3, #4
 6003 0248 002B     		cmp	r3, #0
 6004 024a F9D1     		bne	.L263
1531:bluetooth_rxtx.c **** 		tx_len = len - i;
 6005              		.loc 1 1531 0 is_stmt 1
 6006 024c 7B6E     		ldr	r3, [r7, #100]
 6007 024e DBB2     		uxtb	r3, r3
 6008 0250 FA7A     		ldrb	r2, [r7, #11]
 6009 0252 D31A     		subs	r3, r2, r3
 6010 0254 87F85F30 		strb	r3, [r7, #95]
1532:bluetooth_rxtx.c **** 		if (tx_len > 16)
 6011              		.loc 1 1532 0
 6012 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
ARM GAS  /tmp/ccfQkuUX.s 			page 132


 6013 025c 102B     		cmp	r3, #16
 6014 025e 02D9     		bls	.L264
1533:bluetooth_rxtx.c **** 			tx_len = 16;
 6015              		.loc 1 1533 0
 6016 0260 1023     		movs	r3, #16
 6017 0262 87F85F30 		strb	r3, [r7, #95]
 6018              	.L264:
1534:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 6019              		.loc 1 1534 0 discriminator 2
 6020 0266 07F11002 		add	r2, r7, #16
 6021 026a 7B6E     		ldr	r3, [r7, #100]
 6022 026c 1344     		add	r3, r3, r2
 6023 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 6024 0272 7020     		movs	r0, #112
 6025 0274 1146     		mov	r1, r2
 6026 0276 1A46     		mov	r2, r3
 6027 0278 FFF7FEFF 		bl	cc2400_spi_buf
1529:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 6028              		.loc 1 1529 0 discriminator 2
 6029 027c 7B6E     		ldr	r3, [r7, #100]
 6030 027e 1033     		adds	r3, r3, #16
 6031 0280 7B66     		str	r3, [r7, #100]
 6032              	.L262:
1529:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 6033              		.loc 1 1529 0 is_stmt 0 discriminator 1
 6034 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 6035 0284 7B6E     		ldr	r3, [r7, #100]
 6036 0286 9A42     		cmp	r2, r3
 6037 0288 D9D8     		bhi	.L265
1535:bluetooth_rxtx.c **** 	}
1536:bluetooth_rxtx.c **** 
1537:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 6038              		.loc 1 1537 0 is_stmt 1
 6039 028a 00BF     		nop
 6040              	.L266:
 6041              		.loc 1 1537 0 is_stmt 0 discriminator 1
 6042 028c 0E20     		movs	r0, #14
 6043 028e FFF7FEFF 		bl	cc2400_get
 6044 0292 0346     		mov	r3, r0
 6045 0294 03F01F03 		and	r3, r3, #31
 6046 0298 0F2B     		cmp	r3, #15
 6047 029a F7D1     		bne	.L266
1538:bluetooth_rxtx.c **** 	TXLED_CLR;
 6048              		.loc 1 1538 0 is_stmt 1
 6049 029c 144B     		ldr	r3, .L268+28
 6050 029e 4FF48072 		mov	r2, #256
 6051 02a2 1A60     		str	r2, [r3]
1539:bluetooth_rxtx.c **** 
1540:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 6052              		.loc 1 1540 0
 6053 02a4 6420     		movs	r0, #100
 6054 02a6 FFF7FEFF 		bl	cc2400_strobe
1541:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6055              		.loc 1 1541 0
 6056 02aa 00BF     		nop
 6057              	.L267:
 6058              		.loc 1 1541 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccfQkuUX.s 			page 133


 6059 02ac FFF7FEFF 		bl	cc2400_status
 6060 02b0 0346     		mov	r3, r0
 6061 02b2 03F00403 		and	r3, r3, #4
 6062 02b6 002B     		cmp	r3, #0
 6063 02b8 F8D1     		bne	.L267
1542:bluetooth_rxtx.c **** 
1543:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1544:bluetooth_rxtx.c **** 	PAEN_CLR;
 6064              		.loc 1 1544 0 is_stmt 1
 6065 02ba 0E4B     		ldr	r3, .L268+32
 6066 02bc 8022     		movs	r2, #128
 6067 02be 1A60     		str	r2, [r3]
1545:bluetooth_rxtx.c **** #endif
1546:bluetooth_rxtx.c **** 
1547:bluetooth_rxtx.c **** 	// reset GIO
1548:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 6068              		.loc 1 1548 0
 6069 02c0 B7F85230 		ldrh	r3, [r7, #82]
 6070 02c4 0820     		movs	r0, #8
 6071 02c6 1946     		mov	r1, r3
 6072 02c8 FFF7FEFF 		bl	cc2400_set
1549:bluetooth_rxtx.c **** }
 6073              		.loc 1 1549 0
 6074 02cc 6837     		adds	r7, r7, #104
 6075              		.cfi_def_cfa_offset 8
 6076 02ce BD46     		mov	sp, r7
 6077              		.cfi_def_cfa_register 13
 6078              		@ sp needed
 6079 02d0 80BD     		pop	{r7, pc}
 6080              	.L269:
 6081 02d2 00BF     		.align	2
 6082              	.L268:
 6083 02d4 00000000 		.word	channel
 6084 02d8 C0000000 		.word	whitening_index
 6085 02dc 40000000 		.word	whitening
 6086 02e0 11080402 		.word	33818641
 6087 02e4 38C00920 		.word	537509944
 6088 02e8 58C00920 		.word	537509976
 6089 02ec 54C00920 		.word	537509972
 6090 02f0 3CC00920 		.word	537509948
 6091 02f4 5CC00920 		.word	537509980
 6092              		.cfi_endproc
 6093              	.LFE26:
 6095              		.section	.text.le_jam,"ax",%progbits
 6096              		.align	2
 6097              		.global	le_jam
 6098              		.thumb
 6099              		.thumb_func
 6101              	le_jam:
 6102              	.LFB27:
1550:bluetooth_rxtx.c **** 
1551:bluetooth_rxtx.c **** void le_jam(void) {
 6103              		.loc 1 1551 0
 6104              		.cfi_startproc
 6105              		@ args = 0, pretend = 0, frame = 0
 6106              		@ frame_needed = 1, uses_anonymous_args = 0
 6107 0000 80B5     		push	{r7, lr}
ARM GAS  /tmp/ccfQkuUX.s 			page 134


 6108              		.cfi_def_cfa_offset 8
 6109              		.cfi_offset 7, -8
 6110              		.cfi_offset 14, -4
 6111 0002 00AF     		add	r7, sp, #0
 6112              		.cfi_def_cfa_register 7
1552:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1553:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 6113              		.loc 1 1553 0
 6114 0004 0D20     		movs	r0, #13
 6115 0006 47F6FF71 		movw	r1, #32767
 6116 000a FFF7FEFF 		bl	cc2400_set
1554:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 6117              		.loc 1 1554 0
 6118 000e 1220     		movs	r0, #18
 6119 0010 42F62231 		movw	r1, #11042
 6120 0014 FFF7FEFF 		bl	cc2400_set
1555:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 6121              		.loc 1 1555 0
 6122 0018 1420     		movs	r0, #20
 6123 001a 42F24B31 		movw	r1, #9035
 6124 001e FFF7FEFF 		bl	cc2400_set
1556:bluetooth_rxtx.c **** 
1557:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 6125              		.loc 1 1557 0
 6126 0022 2020     		movs	r0, #32
 6127 0024 40F60141 		movw	r1, #3073
 6128 0028 FFF7FEFF 		bl	cc2400_set
1558:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1559:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1560:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1561:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1562:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1563:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1564:bluetooth_rxtx.c **** 
1565:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1566:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 6129              		.loc 1 1566 0
 6130 002c 0520     		movs	r0, #5
 6131 002e 0B21     		movs	r1, #11
 6132 0030 FFF7FEFF 		bl	cc2400_set
1567:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 6133              		.loc 1 1567 0
 6134 0034 0320     		movs	r0, #3
 6135 0036 4021     		movs	r1, #64
 6136 0038 FFF7FEFF 		bl	cc2400_set
1568:bluetooth_rxtx.c **** 
1569:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6137              		.loc 1 1569 0
 6138 003c 00BF     		nop
 6139              	.L271:
 6140              		.loc 1 1569 0 is_stmt 0 discriminator 1
 6141 003e FFF7FEFF 		bl	cc2400_status
 6142 0042 0346     		mov	r3, r0
 6143 0044 03F04003 		and	r3, r3, #64
 6144 0048 002B     		cmp	r3, #0
 6145 004a F8D0     		beq	.L271
1570:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
ARM GAS  /tmp/ccfQkuUX.s 			page 135


 6146              		.loc 1 1570 0 is_stmt 1
 6147 004c 6120     		movs	r0, #97
 6148 004e FFF7FEFF 		bl	cc2400_strobe
1571:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6149              		.loc 1 1571 0
 6150 0052 00BF     		nop
 6151              	.L272:
 6152              		.loc 1 1571 0 is_stmt 0 discriminator 1
 6153 0054 FFF7FEFF 		bl	cc2400_status
 6154 0058 0346     		mov	r3, r0
 6155 005a 03F00403 		and	r3, r3, #4
 6156 005e 002B     		cmp	r3, #0
 6157 0060 F8D0     		beq	.L272
1572:bluetooth_rxtx.c **** 	TXLED_SET;
 6158              		.loc 1 1572 0 is_stmt 1
 6159 0062 0A4B     		ldr	r3, .L274
 6160 0064 4FF48072 		mov	r2, #256
 6161 0068 1A60     		str	r2, [r3]
1573:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1574:bluetooth_rxtx.c **** 	PAEN_SET;
 6162              		.loc 1 1574 0
 6163 006a 094B     		ldr	r3, .L274+4
 6164 006c 8022     		movs	r2, #128
 6165 006e 1A60     		str	r2, [r3]
1575:bluetooth_rxtx.c **** #endif
1576:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 6166              		.loc 1 1576 0
 6167 0070 00BF     		nop
 6168              	.L273:
 6169              		.loc 1 1576 0 is_stmt 0 discriminator 1
 6170 0072 0E20     		movs	r0, #14
 6171 0074 FFF7FEFF 		bl	cc2400_get
 6172 0078 0346     		mov	r3, r0
 6173 007a 03F01F03 		and	r3, r3, #31
 6174 007e 0F2B     		cmp	r3, #15
 6175 0080 F7D1     		bne	.L273
1577:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 6176              		.loc 1 1577 0 is_stmt 1
 6177 0082 6320     		movs	r0, #99
 6178 0084 FFF7FEFF 		bl	cc2400_strobe
1578:bluetooth_rxtx.c **** #endif
1579:bluetooth_rxtx.c **** }
 6179              		.loc 1 1579 0
 6180 0088 80BD     		pop	{r7, pc}
 6181              	.L275:
 6182 008a 00BF     		.align	2
 6183              	.L274:
 6184 008c 38C00920 		.word	537509944
 6185 0090 58C00920 		.word	537509976
 6186              		.cfi_endproc
 6187              	.LFE27:
 6189              		.section	.text.hop,"ax",%progbits
 6190              		.align	2
 6191              		.global	hop
 6192              		.thumb
 6193              		.thumb_func
 6195              	hop:
ARM GAS  /tmp/ccfQkuUX.s 			page 136


 6196              	.LFB28:
1580:bluetooth_rxtx.c **** 
1581:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1582:bluetooth_rxtx.c ****  * track of this? */
1583:bluetooth_rxtx.c **** void hop(void)
1584:bluetooth_rxtx.c **** {
 6197              		.loc 1 1584 0
 6198              		.cfi_startproc
 6199              		@ args = 0, pretend = 0, frame = 0
 6200              		@ frame_needed = 1, uses_anonymous_args = 0
 6201 0000 80B5     		push	{r7, lr}
 6202              		.cfi_def_cfa_offset 8
 6203              		.cfi_offset 7, -8
 6204              		.cfi_offset 14, -4
 6205 0002 00AF     		add	r7, sp, #0
 6206              		.cfi_def_cfa_register 7
1585:bluetooth_rxtx.c **** 	do_hop = 0;
 6207              		.loc 1 1585 0
 6208 0004 414B     		ldr	r3, .L287
 6209 0006 0022     		movs	r2, #0
 6210 0008 1A70     		strb	r2, [r3]
1586:bluetooth_rxtx.c **** 
1587:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1588:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 6211              		.loc 1 1588 0
 6212 000a 414B     		ldr	r3, .L287+4
 6213 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6214 000e 002B     		cmp	r3, #0
 6215 0010 0BD1     		bne	.L277
1589:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 6216              		.loc 1 1589 0
 6217 0012 0220     		movs	r0, #2
 6218 0014 FFF7FEFF 		bl	cc2400_get
 6219 0018 0346     		mov	r3, r0
 6220 001a 1A46     		mov	r2, r3
 6221 001c 3D4B     		ldr	r3, .L287+8
 6222 001e 1B88     		ldrh	r3, [r3]	@ movhi
 6223 0020 9BB2     		uxth	r3, r3
 6224 0022 013B     		subs	r3, r3, #1
 6225 0024 9A42     		cmp	r2, r3
 6226 0026 47D1     		bne	.L278
1590:bluetooth_rxtx.c **** 			return;
 6227              		.loc 1 1590 0
 6228 0028 6EE0     		b	.L276
 6229              	.L277:
1591:bluetooth_rxtx.c **** 	}
1592:bluetooth_rxtx.c **** 
1593:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1594:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 6230              		.loc 1 1594 0
 6231 002a 394B     		ldr	r3, .L287+4
 6232 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6233 002e 012B     		cmp	r3, #1
 6234 0030 14D1     		bne	.L280
1595:bluetooth_rxtx.c **** 		channel += 32;
 6235              		.loc 1 1595 0
 6236 0032 384B     		ldr	r3, .L287+8
ARM GAS  /tmp/ccfQkuUX.s 			page 137


 6237 0034 1B88     		ldrh	r3, [r3]	@ movhi
 6238 0036 9BB2     		uxth	r3, r3
 6239 0038 2033     		adds	r3, r3, #32
 6240 003a 9AB2     		uxth	r2, r3
 6241 003c 354B     		ldr	r3, .L287+8
 6242 003e 1A80     		strh	r2, [r3]	@ movhi
1596:bluetooth_rxtx.c **** 		if (channel > 2480)
 6243              		.loc 1 1596 0
 6244 0040 344B     		ldr	r3, .L287+8
 6245 0042 1B88     		ldrh	r3, [r3]	@ movhi
 6246 0044 9BB2     		uxth	r3, r3
 6247 0046 B3F51B6F 		cmp	r3, #2480
 6248 004a 35D9     		bls	.L278
1597:bluetooth_rxtx.c **** 			channel -= 79;
 6249              		.loc 1 1597 0
 6250 004c 314B     		ldr	r3, .L287+8
 6251 004e 1B88     		ldrh	r3, [r3]	@ movhi
 6252 0050 9BB2     		uxth	r3, r3
 6253 0052 4F3B     		subs	r3, r3, #79
 6254 0054 9AB2     		uxth	r2, r3
 6255 0056 2F4B     		ldr	r3, .L287+8
 6256 0058 1A80     		strh	r2, [r3]	@ movhi
 6257 005a 2DE0     		b	.L278
 6258              	.L280:
1598:bluetooth_rxtx.c **** 	}
1599:bluetooth_rxtx.c **** 
1600:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 6259              		.loc 1 1600 0
 6260 005c 2C4B     		ldr	r3, .L287+4
 6261 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6262 0060 022B     		cmp	r3, #2
 6263 0062 0DD1     		bne	.L282
1601:bluetooth_rxtx.c **** 		TXLED_SET;
 6264              		.loc 1 1601 0
 6265 0064 2C4B     		ldr	r3, .L287+12
 6266 0066 4FF48072 		mov	r2, #256
 6267 006a 1A60     		str	r2, [r3]
1602:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 6268              		.loc 1 1602 0
 6269 006c 2B4B     		ldr	r3, .L287+16
 6270 006e 1B68     		ldr	r3, [r3]
 6271 0070 1846     		mov	r0, r3
 6272 0072 FFF7FEFF 		bl	next_hop
 6273 0076 0346     		mov	r3, r0
 6274 0078 1A46     		mov	r2, r3
 6275 007a 264B     		ldr	r3, .L287+8
 6276 007c 1A80     		strh	r2, [r3]	@ movhi
 6277 007e 1BE0     		b	.L278
 6278              	.L282:
1603:bluetooth_rxtx.c **** 	}
1604:bluetooth_rxtx.c **** 
1605:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 6279              		.loc 1 1605 0
 6280 0080 234B     		ldr	r3, .L287+4
 6281 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6282 0084 032B     		cmp	r3, #3
 6283 0086 0BD1     		bne	.L283
ARM GAS  /tmp/ccfQkuUX.s 			page 138


1606:bluetooth_rxtx.c **** 		TXLED_SET;
 6284              		.loc 1 1606 0
 6285 0088 234B     		ldr	r3, .L287+12
 6286 008a 4FF48072 		mov	r2, #256
 6287 008e 1A60     		str	r2, [r3]
1607:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 6288              		.loc 1 1607 0
 6289 0090 2348     		ldr	r0, .L287+20
 6290 0092 FFF7FEFF 		bl	btle_next_hop
 6291 0096 0346     		mov	r3, r0
 6292 0098 1A46     		mov	r2, r3
 6293 009a 1E4B     		ldr	r3, .L287+8
 6294 009c 1A80     		strh	r2, [r3]	@ movhi
 6295 009e 0BE0     		b	.L278
 6296              	.L283:
1608:bluetooth_rxtx.c **** 	}
1609:bluetooth_rxtx.c **** 
1610:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 6297              		.loc 1 1610 0
 6298 00a0 1B4B     		ldr	r3, .L287+4
 6299 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6300 00a4 042B     		cmp	r3, #4
 6301 00a6 07D1     		bne	.L278
1611:bluetooth_rxtx.c **** 		TXLED_SET;
 6302              		.loc 1 1611 0
 6303 00a8 1B4B     		ldr	r3, .L287+12
 6304 00aa 4FF48072 		mov	r2, #256
 6305 00ae 1A60     		str	r2, [r3]
1612:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 6306              		.loc 1 1612 0
 6307 00b0 1C4B     		ldr	r3, .L287+24
 6308 00b2 1A88     		ldrh	r2, [r3]
 6309 00b4 174B     		ldr	r3, .L287+8
 6310 00b6 1A80     		strh	r2, [r3]	@ movhi
 6311              	.L278:
1613:bluetooth_rxtx.c **** 	}
1614:bluetooth_rxtx.c **** 
1615:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1616:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 6312              		.loc 1 1616 0
 6313 00b8 6420     		movs	r0, #100
 6314 00ba FFF7FEFF 		bl	cc2400_strobe
1617:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6315              		.loc 1 1617 0
 6316 00be 00BF     		nop
 6317              	.L284:
 6318              		.loc 1 1617 0 is_stmt 0 discriminator 1
 6319 00c0 FFF7FEFF 		bl	cc2400_status
 6320 00c4 0346     		mov	r3, r0
 6321 00c6 03F00403 		and	r3, r3, #4
 6322 00ca 002B     		cmp	r3, #0
 6323 00cc F8D1     		bne	.L284
1618:bluetooth_rxtx.c **** 
1619:bluetooth_rxtx.c **** 	/* Retune */
1620:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6324              		.loc 1 1620 0 is_stmt 1
 6325 00ce 114B     		ldr	r3, .L287+8
ARM GAS  /tmp/ccfQkuUX.s 			page 139


 6326 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 6327 00d2 9BB2     		uxth	r3, r3
 6328 00d4 013B     		subs	r3, r3, #1
 6329 00d6 9BB2     		uxth	r3, r3
 6330 00d8 0220     		movs	r0, #2
 6331 00da 1946     		mov	r1, r3
 6332 00dc FFF7FEFF 		bl	cc2400_set
1621:bluetooth_rxtx.c **** 	
1622:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1623:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 6333              		.loc 1 1623 0
 6334 00e0 0B4B     		ldr	r3, .L287+4
 6335 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6336 00e4 002B     		cmp	r3, #0
 6337 00e6 01D0     		beq	.L285
1624:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 6338              		.loc 1 1624 0
 6339 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 6340              	.L285:
1625:bluetooth_rxtx.c **** 	}
1626:bluetooth_rxtx.c **** 
1627:bluetooth_rxtx.c **** 	/* Wait for lock */
1628:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6341              		.loc 1 1628 0
 6342 00ec 6120     		movs	r0, #97
 6343 00ee FFF7FEFF 		bl	cc2400_strobe
1629:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6344              		.loc 1 1629 0
 6345 00f2 00BF     		nop
 6346              	.L286:
 6347              		.loc 1 1629 0 is_stmt 0 discriminator 1
 6348 00f4 FFF7FEFF 		bl	cc2400_status
 6349 00f8 0346     		mov	r3, r0
 6350 00fa 03F00403 		and	r3, r3, #4
 6351 00fe 002B     		cmp	r3, #0
 6352 0100 F8D0     		beq	.L286
1630:bluetooth_rxtx.c **** 	
1631:bluetooth_rxtx.c **** 	/* RX mode */
1632:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6353              		.loc 1 1632 0 is_stmt 1
 6354 0102 6220     		movs	r0, #98
 6355 0104 FFF7FEFF 		bl	cc2400_strobe
 6356              	.L276:
1633:bluetooth_rxtx.c **** 
1634:bluetooth_rxtx.c **** }
 6357              		.loc 1 1634 0
 6358 0108 80BD     		pop	{r7, pc}
 6359              	.L288:
 6360 010a 00BF     		.align	2
 6361              	.L287:
 6362 010c 00000000 		.word	do_hop
 6363 0110 00000000 		.word	hop_mode
 6364 0114 00000000 		.word	channel
 6365 0118 38C00920 		.word	537509944
 6366 011c 00000000 		.word	clkn
 6367 0120 00000000 		.word	le
 6368 0124 00000000 		.word	hop_direct_channel
ARM GAS  /tmp/ccfQkuUX.s 			page 140


 6369              		.cfi_endproc
 6370              	.LFE28:
 6372              		.section	.text.cc2400_spi_rev,"ax",%progbits
 6373              		.align	2
 6374              		.global	cc2400_spi_rev
 6375              		.thumb
 6376              		.thumb_func
 6378              	cc2400_spi_rev:
 6379              	.LFB29:
1635:bluetooth_rxtx.c **** 
1636:bluetooth_rxtx.c **** 
1637:bluetooth_rxtx.c **** u32 cc2400_spi_rev(u8 len, u32 data)
1638:bluetooth_rxtx.c **** {
 6380              		.loc 1 1638 0
 6381              		.cfi_startproc
 6382              		@ args = 0, pretend = 0, frame = 16
 6383              		@ frame_needed = 1, uses_anonymous_args = 0
 6384              		@ link register save eliminated.
 6385 0000 80B4     		push	{r7}
 6386              		.cfi_def_cfa_offset 4
 6387              		.cfi_offset 7, -4
 6388 0002 85B0     		sub	sp, sp, #20
 6389              		.cfi_def_cfa_offset 24
 6390 0004 00AF     		add	r7, sp, #0
 6391              		.cfi_def_cfa_register 7
 6392 0006 0346     		mov	r3, r0
 6393 0008 3960     		str	r1, [r7]
 6394 000a FB71     		strb	r3, [r7, #7]
1639:bluetooth_rxtx.c ****     //    u32 first_ts, second_ts, diff;
1640:bluetooth_rxtx.c **** 
1641:bluetooth_rxtx.c **** 
1642:bluetooth_rxtx.c ****         u32 msb = 1 << (len - 1);
 6395              		.loc 1 1642 0
 6396 000c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6397 000e 013B     		subs	r3, r3, #1
 6398 0010 0122     		movs	r2, #1
 6399 0012 02FA03F3 		lsl	r3, r2, r3
 6400 0016 FB60     		str	r3, [r7, #12]
1643:bluetooth_rxtx.c **** 
1644:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1645:bluetooth_rxtx.c ****         CSN_CLR;
 6401              		.loc 1 1645 0
 6402 0018 184B     		ldr	r3, .L296
 6403 001a 2022     		movs	r2, #32
 6404 001c 1A60     		str	r2, [r3]
1646:bluetooth_rxtx.c **** 
1647:bluetooth_rxtx.c **** //      first_ts = CLK100NS;
1648:bluetooth_rxtx.c ****         while (len--) {
 6405              		.loc 1 1648 0
 6406 001e 1EE0     		b	.L290
 6407              	.L294:
1649:bluetooth_rxtx.c ****                 if (data & msb)
 6408              		.loc 1 1649 0
 6409 0020 3A68     		ldr	r2, [r7]
 6410 0022 FB68     		ldr	r3, [r7, #12]
 6411 0024 1340     		ands	r3, r3, r2
 6412 0026 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 141


 6413 0028 03D0     		beq	.L291
1650:bluetooth_rxtx.c ****                         MOSI_SET;
 6414              		.loc 1 1650 0
 6415 002a 154B     		ldr	r3, .L296+4
 6416 002c 0122     		movs	r2, #1
 6417 002e 1A60     		str	r2, [r3]
 6418 0030 02E0     		b	.L292
 6419              	.L291:
1651:bluetooth_rxtx.c ****                 else
1652:bluetooth_rxtx.c ****                         MOSI_CLR;
 6420              		.loc 1 1652 0
 6421 0032 124B     		ldr	r3, .L296
 6422 0034 0122     		movs	r2, #1
 6423 0036 1A60     		str	r2, [r3]
 6424              	.L292:
1653:bluetooth_rxtx.c ****                 data <<= 1;
 6425              		.loc 1 1653 0
 6426 0038 3B68     		ldr	r3, [r7]
 6427 003a 5B00     		lsls	r3, r3, #1
 6428 003c 3B60     		str	r3, [r7]
1654:bluetooth_rxtx.c **** 
1655:bluetooth_rxtx.c ****                 SCLK_SET;
 6429              		.loc 1 1655 0
 6430 003e 104B     		ldr	r3, .L296+4
 6431 0040 1022     		movs	r2, #16
 6432 0042 1A60     		str	r2, [r3]
1656:bluetooth_rxtx.c ****                 if (MISO)
 6433              		.loc 1 1656 0
 6434 0044 0F4B     		ldr	r3, .L296+8
 6435 0046 1B68     		ldr	r3, [r3]
 6436 0048 03F00203 		and	r3, r3, #2
 6437 004c 002B     		cmp	r3, #0
 6438 004e 03D0     		beq	.L293
1657:bluetooth_rxtx.c ****                         data |= 1;
 6439              		.loc 1 1657 0
 6440 0050 3B68     		ldr	r3, [r7]
 6441 0052 43F00103 		orr	r3, r3, #1
 6442 0056 3B60     		str	r3, [r7]
 6443              	.L293:
1658:bluetooth_rxtx.c **** 
1659:bluetooth_rxtx.c ****                 SCLK_CLR;
 6444              		.loc 1 1659 0
 6445 0058 084B     		ldr	r3, .L296
 6446 005a 1022     		movs	r2, #16
 6447 005c 1A60     		str	r2, [r3]
 6448              	.L290:
1648:bluetooth_rxtx.c ****                 if (data & msb)
 6449              		.loc 1 1648 0
 6450 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 6451 0060 5A1E     		subs	r2, r3, #1
 6452 0062 FA71     		strb	r2, [r7, #7]
 6453 0064 002B     		cmp	r3, #0
 6454 0066 DBD1     		bne	.L294
1660:bluetooth_rxtx.c ****         }
1661:bluetooth_rxtx.c **** //      second_ts = CLK100NS;
1662:bluetooth_rxtx.c **** //      diff_ts = second_ts - first_ts;
1663:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccfQkuUX.s 			page 142


1664:bluetooth_rxtx.c ****         CSN_SET;
 6455              		.loc 1 1664 0
 6456 0068 054B     		ldr	r3, .L296+4
 6457 006a 2022     		movs	r2, #32
 6458 006c 1A60     		str	r2, [r3]
1665:bluetooth_rxtx.c ****         return data;
 6459              		.loc 1 1665 0
 6460 006e 3B68     		ldr	r3, [r7]
1666:bluetooth_rxtx.c **** }
 6461              		.loc 1 1666 0
 6462 0070 1846     		mov	r0, r3
 6463 0072 1437     		adds	r7, r7, #20
 6464              		.cfi_def_cfa_offset 4
 6465 0074 BD46     		mov	sp, r7
 6466              		.cfi_def_cfa_register 13
 6467              		@ sp needed
 6468 0076 5DF8047B 		ldr	r7, [sp], #4
 6469              		.cfi_restore 7
 6470              		.cfi_def_cfa_offset 0
 6471 007a 7047     		bx	lr
 6472              	.L297:
 6473              		.align	2
 6474              	.L296:
 6475 007c 5CC00920 		.word	537509980
 6476 0080 58C00920 		.word	537509976
 6477 0084 54C00920 		.word	537509972
 6478              		.cfi_endproc
 6479              	.LFE29:
 6481              		.section	.text.cc2400_get_rev,"ax",%progbits
 6482              		.align	2
 6483              		.global	cc2400_get_rev
 6484              		.thumb
 6485              		.thumb_func
 6487              	cc2400_get_rev:
 6488              	.LFB30:
1667:bluetooth_rxtx.c **** 
1668:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1669:bluetooth_rxtx.c **** {
 6489              		.loc 1 1669 0
 6490              		.cfi_startproc
 6491              		@ args = 0, pretend = 0, frame = 16
 6492              		@ frame_needed = 1, uses_anonymous_args = 0
 6493 0000 80B5     		push	{r7, lr}
 6494              		.cfi_def_cfa_offset 8
 6495              		.cfi_offset 7, -8
 6496              		.cfi_offset 14, -4
 6497 0002 84B0     		sub	sp, sp, #16
 6498              		.cfi_def_cfa_offset 24
 6499 0004 00AF     		add	r7, sp, #0
 6500              		.cfi_def_cfa_register 7
 6501 0006 0346     		mov	r3, r0
 6502 0008 FB71     		strb	r3, [r7, #7]
1670:bluetooth_rxtx.c ****         u32 in;
1671:bluetooth_rxtx.c **** 
1672:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
 6503              		.loc 1 1672 0
 6504 000a FB79     		ldrb	r3, [r7, #7]
ARM GAS  /tmp/ccfQkuUX.s 			page 143


 6505 000c 63F07F03 		orn	r3, r3, #127
 6506 0010 DBB2     		uxtb	r3, r3
 6507 0012 1B02     		lsls	r3, r3, #8
 6508 0014 FB60     		str	r3, [r7, #12]
1673:bluetooth_rxtx.c ****         in = cc2400_spi_rev(16, out);
 6509              		.loc 1 1673 0
 6510 0016 1020     		movs	r0, #16
 6511 0018 F968     		ldr	r1, [r7, #12]
 6512 001a FFF7FEFF 		bl	cc2400_spi_rev
 6513 001e B860     		str	r0, [r7, #8]
1674:bluetooth_rxtx.c ****         return in & 0xFF;
 6514              		.loc 1 1674 0
 6515 0020 BB68     		ldr	r3, [r7, #8]
 6516 0022 DBB2     		uxtb	r3, r3
1675:bluetooth_rxtx.c **** }
 6517              		.loc 1 1675 0
 6518 0024 1846     		mov	r0, r3
 6519 0026 1037     		adds	r7, r7, #16
 6520              		.cfi_def_cfa_offset 8
 6521 0028 BD46     		mov	sp, r7
 6522              		.cfi_def_cfa_register 13
 6523              		@ sp needed
 6524 002a 80BD     		pop	{r7, pc}
 6525              		.cfi_endproc
 6526              	.LFE30:
 6528              		.section	.text.add,"ax",%progbits
 6529              		.align	2
 6530              		.global	add
 6531              		.thumb
 6532              		.thumb_func
 6534              	add:
 6535              	.LFB31:
1676:bluetooth_rxtx.c **** 
1677:bluetooth_rxtx.c **** u8 add (u8 x, u8 y)
1678:bluetooth_rxtx.c **** {
 6536              		.loc 1 1678 0
 6537              		.cfi_startproc
 6538              		@ args = 0, pretend = 0, frame = 16
 6539              		@ frame_needed = 1, uses_anonymous_args = 0
 6540              		@ link register save eliminated.
 6541 0000 80B4     		push	{r7}
 6542              		.cfi_def_cfa_offset 4
 6543              		.cfi_offset 7, -4
 6544 0002 85B0     		sub	sp, sp, #20
 6545              		.cfi_def_cfa_offset 24
 6546 0004 00AF     		add	r7, sp, #0
 6547              		.cfi_def_cfa_register 7
 6548 0006 0346     		mov	r3, r0
 6549 0008 0A46     		mov	r2, r1
 6550 000a FB71     		strb	r3, [r7, #7]
 6551 000c 1346     		mov	r3, r2
 6552 000e BB71     		strb	r3, [r7, #6]
1679:bluetooth_rxtx.c ****   while (y)
 6553              		.loc 1 1679 0
 6554 0010 0AE0     		b	.L301
 6555              	.L302:
 6556              	.LBB3:
ARM GAS  /tmp/ccfQkuUX.s 			page 144


1680:bluetooth_rxtx.c ****   {
1681:bluetooth_rxtx.c ****     u8 carry = x & y;
 6557              		.loc 1 1681 0
 6558 0012 FA79     		ldrb	r2, [r7, #7]
 6559 0014 BB79     		ldrb	r3, [r7, #6]
 6560 0016 1340     		ands	r3, r3, r2
 6561 0018 FB73     		strb	r3, [r7, #15]
1682:bluetooth_rxtx.c ****     x = x ^ y;
 6562              		.loc 1 1682 0
 6563 001a FA79     		ldrb	r2, [r7, #7]
 6564 001c BB79     		ldrb	r3, [r7, #6]
 6565 001e 5340     		eors	r3, r3, r2
 6566 0020 FB71     		strb	r3, [r7, #7]
1683:bluetooth_rxtx.c ****     y = carry << 1;
 6567              		.loc 1 1683 0
 6568 0022 FB7B     		ldrb	r3, [r7, #15]
 6569 0024 5B00     		lsls	r3, r3, #1
 6570 0026 BB71     		strb	r3, [r7, #6]
 6571              	.L301:
 6572              	.LBE3:
1679:bluetooth_rxtx.c ****   {
 6573              		.loc 1 1679 0
 6574 0028 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 6575 002a 002B     		cmp	r3, #0
 6576 002c F1D1     		bne	.L302
1684:bluetooth_rxtx.c ****   }
1685:bluetooth_rxtx.c ****   return x;
 6577              		.loc 1 1685 0
 6578 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
1686:bluetooth_rxtx.c **** }
 6579              		.loc 1 1686 0
 6580 0030 1846     		mov	r0, r3
 6581 0032 1437     		adds	r7, r7, #20
 6582              		.cfi_def_cfa_offset 4
 6583 0034 BD46     		mov	sp, r7
 6584              		.cfi_def_cfa_register 13
 6585              		@ sp needed
 6586 0036 5DF8047B 		ldr	r7, [sp], #4
 6587              		.cfi_restore 7
 6588              		.cfi_def_cfa_offset 0
 6589 003a 7047     		bx	lr
 6590              		.cfi_endproc
 6591              	.LFE31:
 6593              		.section	.text.bt_stream_proposed,"ax",%progbits
 6594              		.align	2
 6595              		.global	bt_stream_proposed
 6596              		.thumb
 6597              		.thumb_func
 6599              	bt_stream_proposed:
 6600              	.LFB32:
1687:bluetooth_rxtx.c **** 
1688:bluetooth_rxtx.c **** // wpson proposed
1689:bluetooth_rxtx.c **** void bt_stream_proposed()
1690:bluetooth_rxtx.c **** {
 6601              		.loc 1 1690 0
 6602              		.cfi_startproc
 6603              		@ args = 0, pretend = 0, frame = 64
ARM GAS  /tmp/ccfQkuUX.s 			page 145


 6604              		@ frame_needed = 1, uses_anonymous_args = 0
 6605 0000 90B5     		push	{r4, r7, lr}
 6606              		.cfi_def_cfa_offset 12
 6607              		.cfi_offset 4, -12
 6608              		.cfi_offset 7, -8
 6609              		.cfi_offset 14, -4
 6610 0002 91B0     		sub	sp, sp, #68
 6611              		.cfi_def_cfa_offset 80
 6612 0004 00AF     		add	r7, sp, #0
 6613              		.cfi_def_cfa_register 7
1691:bluetooth_rxtx.c **** 
1692:bluetooth_rxtx.c **** 	u8 epstat;
1693:bluetooth_rxtx.c **** //	u16 f;
1694:bluetooth_rxtx.c **** //	u8 buf[DMA_SIZE];
1695:bluetooth_rxtx.c **** 	u8 rssi[50];
1696:bluetooth_rxtx.c **** 	int i = 0;
 6614              		.loc 1 1696 0
 6615 0006 0023     		movs	r3, #0
 6616 0008 FB63     		str	r3, [r7, #60]
1697:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6617              		.loc 1 1697 0
 6618 000a 0023     		movs	r3, #0
 6619 000c FB63     		str	r3, [r7, #60]
 6620 000e 07E0     		b	.L305
 6621              	.L306:
1698:bluetooth_rxtx.c **** 		rssi[i] = 0;
 6622              		.loc 1 1698 0 discriminator 3
 6623 0010 3A46     		mov	r2, r7
 6624 0012 FB6B     		ldr	r3, [r7, #60]
 6625 0014 1344     		add	r3, r3, r2
 6626 0016 0022     		movs	r2, #0
 6627 0018 1A70     		strb	r2, [r3]
1697:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6628              		.loc 1 1697 0 discriminator 3
 6629 001a FB6B     		ldr	r3, [r7, #60]
 6630 001c 0133     		adds	r3, r3, #1
 6631 001e FB63     		str	r3, [r7, #60]
 6632              	.L305:
1697:bluetooth_rxtx.c **** 	for (i = 0; i < 50; i++)
 6633              		.loc 1 1697 0 is_stmt 0 discriminator 1
 6634 0020 FB6B     		ldr	r3, [r7, #60]
 6635 0022 312B     		cmp	r3, #49
 6636 0024 F4DD     		ble	.L306
1699:bluetooth_rxtx.c **** //	u8 length = 50;
1700:bluetooth_rxtx.c **** 	int window = 0;
 6637              		.loc 1 1700 0 is_stmt 1
 6638 0026 0023     		movs	r3, #0
 6639 0028 BB63     		str	r3, [r7, #56]
1701:bluetooth_rxtx.c **** //	u8 index = 0;
1702:bluetooth_rxtx.c **** 	u8 old = 0;
 6640              		.loc 1 1702 0
 6641 002a 0023     		movs	r3, #0
 6642 002c 87F83730 		strb	r3, [r7, #55]
1703:bluetooth_rxtx.c **** 	u8 now = 0;
 6643              		.loc 1 1703 0
 6644 0030 0023     		movs	r3, #0
 6645 0032 87F83630 		strb	r3, [r7, #54]
ARM GAS  /tmp/ccfQkuUX.s 			page 146


1704:bluetooth_rxtx.c **** 	u8 diff = 0;
 6646              		.loc 1 1704 0
 6647 0036 0023     		movs	r3, #0
 6648 0038 87F83530 		strb	r3, [r7, #53]
1705:bluetooth_rxtx.c **** 	u8 k = 0;
 6649              		.loc 1 1705 0
 6650 003c 0023     		movs	r3, #0
 6651 003e 87F83430 		strb	r3, [r7, #52]
1706:bluetooth_rxtx.c **** 	u8 temp = 0;
 6652              		.loc 1 1706 0
 6653 0042 0023     		movs	r3, #0
 6654 0044 87F83330 		strb	r3, [r7, #51]
1707:bluetooth_rxtx.c **** 	u8 outage = 0;
 6655              		.loc 1 1707 0
 6656 0048 0023     		movs	r3, #0
 6657 004a 87F83230 		strb	r3, [r7, #50]
1708:bluetooth_rxtx.c **** //	TXLED_SET;
1709:bluetooth_rxtx.c **** 	queue_init();
 6658              		.loc 1 1709 0
 6659 004e FFF7FEFF 		bl	queue_init
1710:bluetooth_rxtx.c **** 
1711:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1712:bluetooth_rxtx.c **** 	PAEN_SET;
 6660              		.loc 1 1712 0
 6661 0052 6E4B     		ldr	r3, .L318
 6662 0054 8022     		movs	r2, #128
 6663 0056 1A60     		str	r2, [r3]
1713:bluetooth_rxtx.c **** //	HGM_SET;
1714:bluetooth_rxtx.c **** #endif
1715:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6664              		.loc 1 1715 0
 6665 0058 0D20     		movs	r0, #13
 6666 005a 47F6FF71 		movw	r1, #32767
 6667 005e FFF7FEFF 		bl	cc2400_set
1716:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6668              		.loc 1 1716 0
 6669 0062 1220     		movs	r0, #18
 6670 0064 42F62231 		movw	r1, #11042
 6671 0068 FFF7FEFF 		bl	cc2400_set
1717:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6672              		.loc 1 1717 0
 6673 006c 1420     		movs	r0, #20
 6674 006e 41F24B21 		movw	r1, #4683
 6675 0072 FFF7FEFF 		bl	cc2400_set
1718:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6676              		.loc 1 1718 0
 6677 0076 2020     		movs	r0, #32
 6678 0078 40F26151 		movw	r1, #1377
 6679 007c FFF7FEFF 		bl	cc2400_set
1719:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6680              		.loc 1 1719 0
 6681 0080 0320     		movs	r0, #3
 6682 0082 4021     		movs	r1, #64
 6683 0084 FFF7FEFF 		bl	cc2400_set
1720:bluetooth_rxtx.c **** 
1721:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1722:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
ARM GAS  /tmp/ccfQkuUX.s 			page 147


1723:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0x00ff);
1724:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x00ff);
1725:bluetooth_rxtx.c **** 	
1726:bluetooth_rxtx.c **** //	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
1727:bluetooth_rxtx.c **** //	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
1728:bluetooth_rxtx.c **** 	
1729:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6684              		.loc 1 1729 0
 6685 0088 00BF     		nop
 6686              	.L307:
 6687              		.loc 1 1729 0 is_stmt 0 discriminator 1
 6688 008a FFF7FEFF 		bl	cc2400_status
 6689 008e 0346     		mov	r3, r0
 6690 0090 03F04003 		and	r3, r3, #64
 6691 0094 002B     		cmp	r3, #0
 6692 0096 F8D0     		beq	.L307
1730:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6693              		.loc 1 1730 0 is_stmt 1
 6694 0098 00BF     		nop
 6695              	.L308:
 6696              		.loc 1 1730 0 is_stmt 0 discriminator 1
 6697 009a FFF7FEFF 		bl	cc2400_status
 6698 009e 0346     		mov	r3, r0
 6699 00a0 03F00403 		and	r3, r3, #4
 6700 00a4 002B     		cmp	r3, #0
 6701 00a6 F8D1     		bne	.L308
1731:bluetooth_rxtx.c **** 
1732:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6702              		.loc 1 1732 0 is_stmt 1
 6703 00a8 594B     		ldr	r3, .L318+4
 6704 00aa 1B88     		ldrh	r3, [r3]	@ movhi
 6705 00ac 9BB2     		uxth	r3, r3
 6706 00ae 013B     		subs	r3, r3, #1
 6707 00b0 9BB2     		uxth	r3, r3
 6708 00b2 0220     		movs	r0, #2
 6709 00b4 1946     		mov	r1, r3
 6710 00b6 FFF7FEFF 		bl	cc2400_set
1733:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6711              		.loc 1 1733 0
 6712 00ba 6120     		movs	r0, #97
 6713 00bc FFF7FEFF 		bl	cc2400_strobe
1734:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6714              		.loc 1 1734 0
 6715 00c0 00BF     		nop
 6716              	.L309:
 6717              		.loc 1 1734 0 is_stmt 0 discriminator 1
 6718 00c2 FFF7FEFF 		bl	cc2400_status
 6719 00c6 0346     		mov	r3, r0
 6720 00c8 03F00403 		and	r3, r3, #4
 6721 00cc 002B     		cmp	r3, #0
 6722 00ce F8D0     		beq	.L309
1735:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6723              		.loc 1 1735 0 is_stmt 1
 6724 00d0 6220     		movs	r0, #98
 6725 00d2 FFF7FEFF 		bl	cc2400_strobe
1736:bluetooth_rxtx.c **** 	
1737:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_PROPOSED)
ARM GAS  /tmp/ccfQkuUX.s 			page 148


 6726              		.loc 1 1737 0
 6727 00d6 89E0     		b	.L310
 6728              	.L317:
1738:bluetooth_rxtx.c **** 	{
1739:bluetooth_rxtx.c **** 
1740:bluetooth_rxtx.c **** 			
1741:bluetooth_rxtx.c **** 	//	while (!(cc2400_status () & SYNC_RECEIVED));	
1742:bluetooth_rxtx.c **** 		window = 0;
 6729              		.loc 1 1742 0
 6730 00d8 0023     		movs	r3, #0
 6731 00da BB63     		str	r3, [r7, #56]
1743:bluetooth_rxtx.c **** 		old = 0;
 6732              		.loc 1 1743 0
 6733 00dc 0023     		movs	r3, #0
 6734 00de 87F83730 		strb	r3, [r7, #55]
1744:bluetooth_rxtx.c **** 		now = 0;
 6735              		.loc 1 1744 0
 6736 00e2 0023     		movs	r3, #0
 6737 00e4 87F83630 		strb	r3, [r7, #54]
1745:bluetooth_rxtx.c **** 		diff = 0;
 6738              		.loc 1 1745 0
 6739 00e8 0023     		movs	r3, #0
 6740 00ea 87F83530 		strb	r3, [r7, #53]
1746:bluetooth_rxtx.c **** 		
1747:bluetooth_rxtx.c **** 
1748:bluetooth_rxtx.c **** //		diff_ts = CLK100NS - first_ts;
1749:bluetooth_rxtx.c **** //wpson
1750:bluetooth_rxtx.c **** 		while ( window < 5)
 6741              		.loc 1 1750 0
 6742 00ee 36E0     		b	.L311
 6743              	.L315:
1751:bluetooth_rxtx.c **** 		{	
1752:bluetooth_rxtx.c **** //			first_ts = CLK100NS;
1753:bluetooth_rxtx.c **** 			now = cc2400_get_rev(FREQEST);	 
 6744              		.loc 1 1753 0
 6745 00f0 0720     		movs	r0, #7
 6746 00f2 FFF7FEFF 		bl	cc2400_get_rev
 6747 00f6 0346     		mov	r3, r0
 6748 00f8 87F83630 		strb	r3, [r7, #54]
1754:bluetooth_rxtx.c **** 			diff = add (now, add (~old, 1)); // 5->8
 6749              		.loc 1 1754 0
 6750 00fc 97F83730 		ldrb	r3, [r7, #55]
 6751 0100 DB43     		mvns	r3, r3
 6752 0102 DBB2     		uxtb	r3, r3
 6753 0104 1846     		mov	r0, r3
 6754 0106 0121     		movs	r1, #1
 6755 0108 FFF7FEFF 		bl	add
 6756 010c 0346     		mov	r3, r0
 6757 010e 1A46     		mov	r2, r3
 6758 0110 97F83630 		ldrb	r3, [r7, #54]	@ zero_extendqisi2
 6759 0114 1846     		mov	r0, r3
 6760 0116 1146     		mov	r1, r2
 6761 0118 FFF7FEFF 		bl	add
 6762 011c 0346     		mov	r3, r0
 6763 011e 87F83530 		strb	r3, [r7, #53]
1755:bluetooth_rxtx.c **** 			if (diff & 0x80) 
 6764              		.loc 1 1755 0
ARM GAS  /tmp/ccfQkuUX.s 			page 149


 6765 0122 97F83530 		ldrb	r3, [r7, #53]	@ zero_extendqisi2
 6766 0126 5BB2     		sxtb	r3, r3
 6767 0128 002B     		cmp	r3, #0
 6768 012a 0ADA     		bge	.L312
1756:bluetooth_rxtx.c **** 				diff = add (~diff, 1);	
 6769              		.loc 1 1756 0
 6770 012c 97F83530 		ldrb	r3, [r7, #53]
 6771 0130 DB43     		mvns	r3, r3
 6772 0132 DBB2     		uxtb	r3, r3
 6773 0134 1846     		mov	r0, r3
 6774 0136 0121     		movs	r1, #1
 6775 0138 FFF7FEFF 		bl	add
 6776 013c 0346     		mov	r3, r0
 6777 013e 87F83530 		strb	r3, [r7, #53]
 6778              	.L312:
1757:bluetooth_rxtx.c **** 
1758:bluetooth_rxtx.c **** 			if (diff < 0x05)
 6779              		.loc 1 1758 0
 6780 0142 97F83530 		ldrb	r3, [r7, #53]	@ zero_extendqisi2
 6781 0146 042B     		cmp	r3, #4
 6782 0148 03D8     		bhi	.L313
1759:bluetooth_rxtx.c **** 				window++;
 6783              		.loc 1 1759 0
 6784 014a BB6B     		ldr	r3, [r7, #56]
 6785 014c 0133     		adds	r3, r3, #1
 6786 014e BB63     		str	r3, [r7, #56]
 6787 0150 01E0     		b	.L314
 6788              	.L313:
1760:bluetooth_rxtx.c **** 			else
1761:bluetooth_rxtx.c **** 			{
1762:bluetooth_rxtx.c **** 			//	outage = add (outage, 1);
1763:bluetooth_rxtx.c **** 			//	if (outage > 1)
1764:bluetooth_rxtx.c **** 		//		{
1765:bluetooth_rxtx.c **** 			//		outage = 0;
1766:bluetooth_rxtx.c **** 					window = 0;
 6789              		.loc 1 1766 0
 6790 0152 0023     		movs	r3, #0
 6791 0154 BB63     		str	r3, [r7, #56]
 6792              	.L314:
1767:bluetooth_rxtx.c **** 		//		}
1768:bluetooth_rxtx.c **** 			}
1769:bluetooth_rxtx.c **** 			old = now;
 6793              		.loc 1 1769 0
 6794 0156 97F83630 		ldrb	r3, [r7, #54]
 6795 015a 87F83730 		strb	r3, [r7, #55]
 6796              	.L311:
1750:bluetooth_rxtx.c **** 		{	
 6797              		.loc 1 1750 0
 6798 015e BB6B     		ldr	r3, [r7, #56]
 6799 0160 042B     		cmp	r3, #4
 6800 0162 C5DD     		ble	.L315
1770:bluetooth_rxtx.c **** //			second_ts = CLK100NS;
1771:bluetooth_rxtx.c **** 		}
1772:bluetooth_rxtx.c **** 
1773:bluetooth_rxtx.c **** 		rssi_avg = ((int8_t)cc2400_get_rev(RSSI) + (int8_t)cc2400_get_rev(RSSI))/2;
 6801              		.loc 1 1773 0
 6802 0164 0620     		movs	r0, #6
ARM GAS  /tmp/ccfQkuUX.s 			page 150


 6803 0166 FFF7FEFF 		bl	cc2400_get_rev
 6804 016a 0346     		mov	r3, r0
 6805 016c DBB2     		uxtb	r3, r3
 6806 016e 5CB2     		sxtb	r4, r3
 6807 0170 0620     		movs	r0, #6
 6808 0172 FFF7FEFF 		bl	cc2400_get_rev
 6809 0176 0346     		mov	r3, r0
 6810 0178 DBB2     		uxtb	r3, r3
 6811 017a 5BB2     		sxtb	r3, r3
 6812 017c 2344     		add	r3, r3, r4
 6813 017e DA0F     		lsrs	r2, r3, #31
 6814 0180 1344     		add	r3, r3, r2
 6815 0182 5B10     		asrs	r3, r3, #1
 6816 0184 DAB2     		uxtb	r2, r3
 6817 0186 234B     		ldr	r3, .L318+8
 6818 0188 1A70     		strb	r2, [r3]
1774:bluetooth_rxtx.c **** 		freq_avg = now;
 6819              		.loc 1 1774 0
 6820 018a 234A     		ldr	r2, .L318+12
 6821 018c 97F83630 		ldrb	r3, [r7, #54]
 6822 0190 1370     		strb	r3, [r2]
1775:bluetooth_rxtx.c **** 	
1776:bluetooth_rxtx.c **** 		clkn_proposed = clkn;
 6823              		.loc 1 1776 0
 6824 0192 224B     		ldr	r3, .L318+16
 6825 0194 1B68     		ldr	r3, [r3]
 6826 0196 224A     		ldr	r2, .L318+20
 6827 0198 1360     		str	r3, [r2]
1777:bluetooth_rxtx.c **** //		diff_ts = second_ts - first_ts;
1778:bluetooth_rxtx.c **** 		enqueue_proposed(FREQ_PACKET, rssi);
 6828              		.loc 1 1778 0
 6829 019a 3B46     		mov	r3, r7
 6830 019c 0720     		movs	r0, #7
 6831 019e 1946     		mov	r1, r3
 6832 01a0 FFF7FEFF 		bl	enqueue_proposed
1779:bluetooth_rxtx.c **** //		enqueue(FREQ_PACKET, rssi);
1780:bluetooth_rxtx.c **** 		handle_usb(clkn);
 6833              		.loc 1 1780 0
 6834 01a4 1D4B     		ldr	r3, .L318+16
 6835 01a6 1B68     		ldr	r3, [r3]
 6836 01a8 1846     		mov	r0, r3
 6837 01aa FFF7FEFF 		bl	handle_usb
1781:bluetooth_rxtx.c **** 
1782:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 6838              		.loc 1 1782 0
 6839 01ae 1B4B     		ldr	r3, .L318+16
 6840 01b0 1B68     		ldr	r3, [r3]
 6841 01b2 C3F31303 		ubfx	r3, r3, #0, #20
 6842 01b6 40F63542 		movw	r2, #3125
 6843 01ba 02FB03F2 		mul	r2, r2, r3
 6844 01be 194B     		ldr	r3, .L318+24
 6845 01c0 1B68     		ldr	r3, [r3]
 6846 01c2 1344     		add	r3, r3, r2
 6847 01c4 184A     		ldr	r2, .L318+28
 6848 01c6 1360     		str	r3, [r2]
1783:bluetooth_rxtx.c **** 		while ((CLK100NS-first_ts)<500)
 6849              		.loc 1 1783 0
ARM GAS  /tmp/ccfQkuUX.s 			page 151


 6850 01c8 00BF     		nop
 6851              	.L316:
 6852              		.loc 1 1783 0 is_stmt 0 discriminator 1
 6853 01ca 144B     		ldr	r3, .L318+16
 6854 01cc 1B68     		ldr	r3, [r3]
 6855 01ce C3F31303 		ubfx	r3, r3, #0, #20
 6856 01d2 40F63542 		movw	r2, #3125
 6857 01d6 02FB03F2 		mul	r2, r2, r3
 6858 01da 124B     		ldr	r3, .L318+24
 6859 01dc 1B68     		ldr	r3, [r3]
 6860 01de 1A44     		add	r2, r2, r3
 6861 01e0 114B     		ldr	r3, .L318+28
 6862 01e2 1B68     		ldr	r3, [r3]
 6863 01e4 D31A     		subs	r3, r2, r3
 6864 01e6 B3F5FA7F 		cmp	r3, #500
 6865 01ea EED3     		bcc	.L316
 6866              	.L310:
1737:bluetooth_rxtx.c **** 	{
 6867              		.loc 1 1737 0 is_stmt 1
 6868 01ec 0F4B     		ldr	r3, .L318+32
 6869 01ee 1B78     		ldrb	r3, [r3]
 6870 01f0 DBB2     		uxtb	r3, r3
 6871 01f2 0F2B     		cmp	r3, #15
 6872 01f4 3FF470AF 		beq	.L317
1784:bluetooth_rxtx.c **** 		{};
1785:bluetooth_rxtx.c **** /*		cc2400_strobe (SRFOFF);
1786:bluetooth_rxtx.c **** 		while ((cc2400_status () & FS_LOCK));
1787:bluetooth_rxtx.c **** 
1788:bluetooth_rxtx.c **** 		while (!(cc2400_status () & XOSC16M_STABLE));
1789:bluetooth_rxtx.c **** 		
1790:bluetooth_rxtx.c **** 		cc2400_strobe (SFSON);
1791:bluetooth_rxtx.c **** 		while (!(cc2400_status () & FS_LOCK));
1792:bluetooth_rxtx.c **** 
1793:bluetooth_rxtx.c **** 	
1794:bluetooth_rxtx.c **** //		msleep(500);	
1795:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
1796:bluetooth_rxtx.c **** */
1797:bluetooth_rxtx.c **** 	}
1798:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 6873              		.loc 1 1798 0
 6874 01f8 0D4B     		ldr	r3, .L318+36
 6875 01fa 0022     		movs	r2, #0
 6876 01fc 1A70     		strb	r2, [r3]
1799:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 6877              		.loc 1 1799 0
 6878 01fe FFF7FEFF 		bl	dio_ssp_stop
1800:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 6879              		.loc 1 1800 0
 6880 0202 FFF7FEFF 		bl	cs_trigger_disable
1801:bluetooth_rxtx.c **** }
 6881              		.loc 1 1801 0
 6882 0206 4437     		adds	r7, r7, #68
 6883              		.cfi_def_cfa_offset 12
 6884 0208 BD46     		mov	sp, r7
 6885              		.cfi_def_cfa_register 13
 6886              		@ sp needed
 6887 020a 90BD     		pop	{r4, r7, pc}
ARM GAS  /tmp/ccfQkuUX.s 			page 152


 6888              	.L319:
 6889              		.align	2
 6890              	.L318:
 6891 020c 58C00920 		.word	537509976
 6892 0210 00000000 		.word	channel
 6893 0214 00000000 		.word	rssi_avg
 6894 0218 00000000 		.word	freq_avg
 6895 021c 00000000 		.word	clkn
 6896 0220 00000000 		.word	clkn_proposed
 6897 0224 08400040 		.word	1073758216
 6898 0228 00000000 		.word	first_ts
 6899 022c 00000000 		.word	requested_mode
 6900 0230 00000000 		.word	mode
 6901              		.cfi_endproc
 6902              	.LFE32:
 6904              		.section	.text.bt_stream_freq,"ax",%progbits
 6905              		.align	2
 6906              		.global	bt_stream_freq
 6907              		.thumb
 6908              		.thumb_func
 6910              	bt_stream_freq:
 6911              	.LFB33:
1802:bluetooth_rxtx.c **** 
1803:bluetooth_rxtx.c **** 
1804:bluetooth_rxtx.c **** 
1805:bluetooth_rxtx.c **** // wpson
1806:bluetooth_rxtx.c **** void bt_stream_freq()
1807:bluetooth_rxtx.c **** {
 6912              		.loc 1 1807 0
 6913              		.cfi_startproc
 6914              		@ args = 0, pretend = 0, frame = 128
 6915              		@ frame_needed = 1, uses_anonymous_args = 0
 6916 0000 90B5     		push	{r4, r7, lr}
 6917              		.cfi_def_cfa_offset 12
 6918              		.cfi_offset 4, -12
 6919              		.cfi_offset 7, -8
 6920              		.cfi_offset 14, -4
 6921 0002 A1B0     		sub	sp, sp, #132
 6922              		.cfi_def_cfa_offset 144
 6923 0004 00AF     		add	r7, sp, #0
 6924              		.cfi_def_cfa_register 7
1808:bluetooth_rxtx.c **** //	TXLED_SET;
1809:bluetooth_rxtx.c **** 	RXLED_CLR;
 6925              		.loc 1 1809 0
 6926 0006 994B     		ldr	r3, .L347
 6927 0008 1022     		movs	r2, #16
 6928 000a 1A60     		str	r2, [r3]
1810:bluetooth_rxtx.c **** 	int i;
1811:bluetooth_rxtx.c **** 	
1812:bluetooth_rxtx.c **** 	u8 freq_buf[45];
1813:bluetooth_rxtx.c **** 	queue_init();
 6929              		.loc 1 1813 0
 6930 000c FFF7FEFF 		bl	queue_init
1814:bluetooth_rxtx.c **** 	dio_ssp_init();
 6931              		.loc 1 1814 0
 6932 0010 FFF7FEFF 		bl	dio_ssp_init
1815:bluetooth_rxtx.c **** 	dma_init_le();
ARM GAS  /tmp/ccfQkuUX.s 			page 153


 6933              		.loc 1 1815 0
 6934 0014 FFF7FEFF 		bl	dma_init_le
1816:bluetooth_rxtx.c **** 	dio_ssp_start();
 6935              		.loc 1 1816 0
 6936 0018 FFF7FEFF 		bl	dio_ssp_start
1817:bluetooth_rxtx.c **** 	
1818:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6937              		.loc 1 1818 0
 6938 001c 0D20     		movs	r0, #13
 6939 001e 47F6FF71 		movw	r1, #32767
 6940 0022 FFF7FEFF 		bl	cc2400_set
1819:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6941              		.loc 1 1819 0
 6942 0026 1220     		movs	r0, #18
 6943 0028 42F62231 		movw	r1, #11042
 6944 002c FFF7FEFF 		bl	cc2400_set
1820:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6945              		.loc 1 1820 0
 6946 0030 1420     		movs	r0, #20
 6947 0032 41F24B21 		movw	r1, #4683
 6948 0036 FFF7FEFF 		bl	cc2400_set
1821:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6949              		.loc 1 1821 0
 6950 003a 2020     		movs	r0, #32
 6951 003c 40F26151 		movw	r1, #1377
 6952 0040 FFF7FEFF 		bl	cc2400_set
1822:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6953              		.loc 1 1822 0
 6954 0044 0320     		movs	r0, #3
 6955 0046 4021     		movs	r1, #64
 6956 0048 FFF7FEFF 		bl	cc2400_set
1823:bluetooth_rxtx.c **** 
1824:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1825:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1826:bluetooth_rxtx.c **** 	
1827:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 6957              		.loc 1 1827 0
 6958 004c 8848     		ldr	r0, .L347+4
 6959 004e FFF7FEFF 		bl	rbit
 6960 0052 0346     		mov	r3, r0
 6961 0054 9BB2     		uxth	r3, r3
 6962 0056 2C20     		movs	r0, #44
 6963 0058 1946     		mov	r1, r3
 6964 005a FFF7FEFF 		bl	cc2400_set
1828:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 6965              		.loc 1 1828 0
 6966 005e 8448     		ldr	r0, .L347+4
 6967 0060 FFF7FEFF 		bl	rbit
 6968 0064 0346     		mov	r3, r0
 6969 0066 1B0C     		lsrs	r3, r3, #16
 6970 0068 9BB2     		uxth	r3, r3
 6971 006a 2D20     		movs	r0, #45
 6972 006c 1946     		mov	r1, r3
 6973 006e FFF7FEFF 		bl	cc2400_set
1829:bluetooth_rxtx.c **** 	
1830:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1831:bluetooth_rxtx.c **** 	PAEN_SET;
ARM GAS  /tmp/ccfQkuUX.s 			page 154


 6974              		.loc 1 1831 0
 6975 0072 804B     		ldr	r3, .L347+8
 6976 0074 8022     		movs	r2, #128
 6977 0076 1A60     		str	r2, [r3]
1832:bluetooth_rxtx.c **** //	HGM_SET;
1833:bluetooth_rxtx.c **** #endif
1834:bluetooth_rxtx.c **** 
1835:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6978              		.loc 1 1835 0
 6979 0078 00BF     		nop
 6980              	.L321:
 6981              		.loc 1 1835 0 is_stmt 0 discriminator 1
 6982 007a FFF7FEFF 		bl	cc2400_status
 6983 007e 0346     		mov	r3, r0
 6984 0080 03F04003 		and	r3, r3, #64
 6985 0084 002B     		cmp	r3, #0
 6986 0086 F8D0     		beq	.L321
1836:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6987              		.loc 1 1836 0 is_stmt 1
 6988 0088 00BF     		nop
 6989              	.L322:
 6990              		.loc 1 1836 0 is_stmt 0 discriminator 1
 6991 008a FFF7FEFF 		bl	cc2400_status
 6992 008e 0346     		mov	r3, r0
 6993 0090 03F00403 		and	r3, r3, #4
 6994 0094 002B     		cmp	r3, #0
 6995 0096 F8D1     		bne	.L322
1837:bluetooth_rxtx.c **** 
1838:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6996              		.loc 1 1838 0 is_stmt 1
 6997 0098 774B     		ldr	r3, .L347+12
 6998 009a 1B88     		ldrh	r3, [r3]	@ movhi
 6999 009c 9BB2     		uxth	r3, r3
 7000 009e 013B     		subs	r3, r3, #1
 7001 00a0 9BB2     		uxth	r3, r3
 7002 00a2 0220     		movs	r0, #2
 7003 00a4 1946     		mov	r1, r3
 7004 00a6 FFF7FEFF 		bl	cc2400_set
1839:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7005              		.loc 1 1839 0
 7006 00aa 6120     		movs	r0, #97
 7007 00ac FFF7FEFF 		bl	cc2400_strobe
1840:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7008              		.loc 1 1840 0
 7009 00b0 00BF     		nop
 7010              	.L323:
 7011              		.loc 1 1840 0 is_stmt 0 discriminator 1
 7012 00b2 FFF7FEFF 		bl	cc2400_status
 7013 00b6 0346     		mov	r3, r0
 7014 00b8 03F00403 		and	r3, r3, #4
 7015 00bc 002B     		cmp	r3, #0
 7016 00be F8D0     		beq	.L323
1841:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 7017              		.loc 1 1841 0 is_stmt 1
 7018 00c0 6220     		movs	r0, #98
 7019 00c2 FFF7FEFF 		bl	cc2400_strobe
1842:bluetooth_rxtx.c **** 	
ARM GAS  /tmp/ccfQkuUX.s 			page 155


1843:bluetooth_rxtx.c **** //	cc2400_rx();
1844:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_FREQ) {
 7020              		.loc 1 1844 0
 7021 00c6 48E1     		b	.L324
 7022              	.L346:
 7023              	.LBB4:
1845:bluetooth_rxtx.c **** 		
1846:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 7024              		.loc 1 1846 0
 7025 00c8 00BF     		nop
 7026              	.L325:
 7027              		.loc 1 1846 0 is_stmt 0 discriminator 1
 7028 00ca FFF7FEFF 		bl	cc2400_status
 7029 00ce 0346     		mov	r3, r0
 7030 00d0 03F01003 		and	r3, r3, #16
 7031 00d4 002B     		cmp	r3, #0
 7032 00d6 F8D0     		beq	.L325
1847:bluetooth_rxtx.c **** 
1848:bluetooth_rxtx.c **** 
1849:bluetooth_rxtx.c **** /*		int out;
1850:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1851:bluetooth_rxtx.c ****                 if (rssi >= 128)
1852:bluetooth_rxtx.c ****                         out = rssi - 256;
1853:bluetooth_rxtx.c ****                 else
1854:bluetooth_rxtx.c ****                         out = rssi;
1855:bluetooth_rxtx.c ****                 if (out < 0)
1856:bluetooth_rxtx.c **** 		  goto rx_flush;
1857:bluetooth_rxtx.c **** */
1858:bluetooth_rxtx.c **** 
1859:bluetooth_rxtx.c **** 		for (i = 0; i < 45; i++)
 7033              		.loc 1 1859 0 is_stmt 1
 7034 00d8 0023     		movs	r3, #0
 7035 00da FB67     		str	r3, [r7, #124]
 7036 00dc 0DE0     		b	.L326
 7037              	.L327:
1860:bluetooth_rxtx.c **** 		{
1861:bluetooth_rxtx.c **** 			freq_buf[i] = cc2400_get_rev(FREQEST);	
 7038              		.loc 1 1861 0 discriminator 3
 7039 00de 0720     		movs	r0, #7
 7040 00e0 FFF7FEFF 		bl	cc2400_get_rev
 7041 00e4 0346     		mov	r3, r0
 7042 00e6 1946     		mov	r1, r3
 7043 00e8 07F13402 		add	r2, r7, #52
 7044 00ec FB6F     		ldr	r3, [r7, #124]
 7045 00ee 1344     		add	r3, r3, r2
 7046 00f0 0A46     		mov	r2, r1
 7047 00f2 1A70     		strb	r2, [r3]
1859:bluetooth_rxtx.c **** 		{
 7048              		.loc 1 1859 0 discriminator 3
 7049 00f4 FB6F     		ldr	r3, [r7, #124]
 7050 00f6 0133     		adds	r3, r3, #1
 7051 00f8 FB67     		str	r3, [r7, #124]
 7052              	.L326:
1859:bluetooth_rxtx.c **** 		{
 7053              		.loc 1 1859 0 is_stmt 0 discriminator 1
 7054 00fa FB6F     		ldr	r3, [r7, #124]
 7055 00fc 2C2B     		cmp	r3, #44
ARM GAS  /tmp/ccfQkuUX.s 			page 156


 7056 00fe EEDD     		ble	.L327
1862:bluetooth_rxtx.c **** 		}
1863:bluetooth_rxtx.c **** 		clkn_freq = clkn;
 7057              		.loc 1 1863 0 is_stmt 1
 7058 0100 5E4B     		ldr	r3, .L347+16
 7059 0102 1B68     		ldr	r3, [r3]
 7060 0104 5E4A     		ldr	r2, .L347+20
 7061 0106 1360     		str	r3, [r2]
1864:bluetooth_rxtx.c **** 		
1865:bluetooth_rxtx.c **** 		while (!rx_tc);
 7062              		.loc 1 1865 0
 7063 0108 00BF     		nop
 7064              	.L328:
 7065              		.loc 1 1865 0 is_stmt 0 discriminator 1
 7066 010a 5E4B     		ldr	r3, .L347+24
 7067 010c 1B68     		ldr	r3, [r3]
 7068 010e 002B     		cmp	r3, #0
 7069 0110 FBD0     		beq	.L328
1866:bluetooth_rxtx.c **** 	
1867:bluetooth_rxtx.c **** 		RXLED_SET;
 7070              		.loc 1 1867 0 is_stmt 1
 7071 0112 5D4B     		ldr	r3, .L347+28
 7072 0114 1022     		movs	r2, #16
 7073 0116 1A60     		str	r2, [r3]
1868:bluetooth_rxtx.c **** 		if (rx_err) {
 7074              		.loc 1 1868 0
 7075 0118 5C4B     		ldr	r3, .L347+32
 7076 011a 1B68     		ldr	r3, [r3]
 7077 011c 002B     		cmp	r3, #0
 7078 011e 07D0     		beq	.L329
1869:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 7079              		.loc 1 1869 0
 7080 0120 5B4B     		ldr	r3, .L347+36
 7081 0122 1B78     		ldrb	r3, [r3]
 7082 0124 DBB2     		uxtb	r3, r3
 7083 0126 43F00203 		orr	r3, r3, #2
 7084 012a DAB2     		uxtb	r2, r3
 7085 012c 584B     		ldr	r3, .L347+36
 7086 012e 1A70     		strb	r2, [r3]
 7087              	.L329:
1870:bluetooth_rxtx.c **** 		}	
1871:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 7088              		.loc 1 1871 0
 7089 0130 544B     		ldr	r3, .L347+24
 7090 0132 1B68     		ldr	r3, [r3]
 7091 0134 012B     		cmp	r3, #1
 7092 0136 07D9     		bls	.L330
1872:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 7093              		.loc 1 1872 0
 7094 0138 554B     		ldr	r3, .L347+36
 7095 013a 1B78     		ldrb	r3, [r3]
 7096 013c DBB2     		uxtb	r3, r3
 7097 013e 43F00103 		orr	r3, r3, #1
 7098 0142 DAB2     		uxtb	r2, r3
 7099 0144 524B     		ldr	r3, .L347+36
 7100 0146 1A70     		strb	r2, [r3]
 7101              	.L330:
ARM GAS  /tmp/ccfQkuUX.s 			page 157


1873:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1874:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7102              		.loc 1 1874 0
 7103 0148 3B46     		mov	r3, r7
 7104 014a BB67     		str	r3, [r7, #120]
1875:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7105              		.loc 1 1875 0
 7106 014c 514B     		ldr	r3, .L347+40
 7107 014e 1B68     		ldr	r3, [r3]
 7108 0150 3B60     		str	r3, [r7]
1876:bluetooth_rxtx.c **** 
1877:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 7109              		.loc 1 1877 0
 7110 0152 00BF     		nop
 7111              	.L332:
 7112              		.loc 1 1877 0 is_stmt 0 discriminator 2
 7113 0154 504B     		ldr	r3, .L347+44
 7114 0156 1B68     		ldr	r3, [r3]
 7115 0158 03F00103 		and	r3, r3, #1
 7116 015c 002B     		cmp	r3, #0
 7117 015e 03D0     		beq	.L331
 7118              		.loc 1 1877 0 discriminator 1
 7119 0160 4A4B     		ldr	r3, .L347+32
 7120 0162 1B68     		ldr	r3, [r3]
 7121 0164 002B     		cmp	r3, #0
 7122 0166 F5D0     		beq	.L332
 7123              	.L331:
1878:bluetooth_rxtx.c ****                 
1879:bluetooth_rxtx.c **** 			
1880:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7124              		.loc 1 1880 0 is_stmt 1
 7125 0168 4C4A     		ldr	r2, .L347+48
 7126 016a 4C4B     		ldr	r3, .L347+48
 7127 016c 1B68     		ldr	r3, [r3]
 7128 016e 23F00103 		bic	r3, r3, #1
 7129 0172 1360     		str	r3, [r2]
1881:bluetooth_rxtx.c **** 	
1882:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7130              		.loc 1 1882 0
 7131 0174 404B     		ldr	r3, .L347+12
 7132 0176 1B88     		ldrh	r3, [r3]	@ movhi
 7133 0178 9BB2     		uxth	r3, r3
 7134 017a DBB2     		uxtb	r3, r3
 7135 017c 623B     		subs	r3, r3, #98
 7136 017e DBB2     		uxtb	r3, r3
 7137 0180 1846     		mov	r0, r3
 7138 0182 FFF7FEFF 		bl	btle_channel_index
 7139 0186 0346     		mov	r3, r0
 7140 0188 1A46     		mov	r2, r3
 7141 018a 1346     		mov	r3, r2
 7142 018c 5B00     		lsls	r3, r3, #1
 7143 018e 1344     		add	r3, r3, r2
 7144 0190 1B01     		lsls	r3, r3, #4
 7145 0192 434A     		ldr	r2, .L347+52
 7146 0194 1344     		add	r3, r3, r2
 7147 0196 7B67     		str	r3, [r7, #116]
1883:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
ARM GAS  /tmp/ccfQkuUX.s 			page 158


 7148              		.loc 1 1883 0
 7149 0198 0023     		movs	r3, #0
 7150 019a FB67     		str	r3, [r7, #124]
 7151 019c 34E0     		b	.L333
 7152              	.L336:
 7153              	.LBB5:
1884:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7154              		.loc 1 1884 0 discriminator 3
 7155 019e 414A     		ldr	r2, .L347+56
 7156 01a0 FB6F     		ldr	r3, [r7, #124]
 7157 01a2 1344     		add	r3, r3, r2
 7158 01a4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7159 01a6 1A06     		lsls	r2, r3, #24
1885:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7160              		.loc 1 1885 0 discriminator 3
 7161 01a8 FB6F     		ldr	r3, [r7, #124]
 7162 01aa 0133     		adds	r3, r3, #1
 7163 01ac 3D49     		ldr	r1, .L347+56
 7164 01ae CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7165 01b0 1B04     		lsls	r3, r3, #16
 7166 01b2 1A43     		orrs	r2, r2, r3
1886:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 7167              		.loc 1 1886 0 discriminator 3
 7168 01b4 FB6F     		ldr	r3, [r7, #124]
 7169 01b6 0233     		adds	r3, r3, #2
 7170 01b8 3A49     		ldr	r1, .L347+56
 7171 01ba CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7172 01bc 1B02     		lsls	r3, r3, #8
 7173 01be 1343     		orrs	r3, r3, r2
1887:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 7174              		.loc 1 1887 0 discriminator 3
 7175 01c0 FA6F     		ldr	r2, [r7, #124]
 7176 01c2 0332     		adds	r2, r2, #3
 7177 01c4 3749     		ldr	r1, .L347+56
 7178 01c6 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7179 01c8 1343     		orrs	r3, r3, r2
1884:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7180              		.loc 1 1884 0 discriminator 3
 7181 01ca 3B67     		str	r3, [r7, #112]
1888:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 7182              		.loc 1 1888 0 discriminator 3
 7183 01cc FB6F     		ldr	r3, [r7, #124]
 7184 01ce 002B     		cmp	r3, #0
 7185 01d0 00DA     		bge	.L334
 7186 01d2 0333     		adds	r3, r3, #3
 7187              	.L334:
 7188 01d4 9B10     		asrs	r3, r3, #2
 7189 01d6 5C1C     		adds	r4, r3, #1
 7190 01d8 386F     		ldr	r0, [r7, #112]
 7191 01da FFF7FEFF 		bl	rbit
 7192 01de 0146     		mov	r1, r0
 7193 01e0 FB6F     		ldr	r3, [r7, #124]
 7194 01e2 002B     		cmp	r3, #0
 7195 01e4 00DA     		bge	.L335
 7196 01e6 0333     		adds	r3, r3, #3
 7197              	.L335:
 7198 01e8 9B10     		asrs	r3, r3, #2
ARM GAS  /tmp/ccfQkuUX.s 			page 159


 7199 01ea 9B00     		lsls	r3, r3, #2
 7200 01ec 7A6F     		ldr	r2, [r7, #116]
 7201 01ee 1344     		add	r3, r3, r2
 7202 01f0 1B68     		ldr	r3, [r3]
 7203 01f2 81EA0302 		eor	r2, r1, r3
 7204 01f6 A300     		lsls	r3, r4, #2
 7205 01f8 07F18001 		add	r1, r7, #128
 7206 01fc 0B44     		add	r3, r3, r1
 7207 01fe 43F8802C 		str	r2, [r3, #-128]
 7208              	.LBE5:
1883:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7209              		.loc 1 1883 0 discriminator 3
 7210 0202 FB6F     		ldr	r3, [r7, #124]
 7211 0204 0433     		adds	r3, r3, #4
 7212 0206 FB67     		str	r3, [r7, #124]
 7213              	.L333:
1883:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7214              		.loc 1 1883 0 is_stmt 0 discriminator 1
 7215 0208 FB6F     		ldr	r3, [r7, #124]
 7216 020a 2B2B     		cmp	r3, #43
 7217 020c C7DD     		ble	.L336
1889:bluetooth_rxtx.c **** 		}
1890:bluetooth_rxtx.c **** 
1891:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
1892:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
1893:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
1894:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
1895:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
1896:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1897:bluetooth_rxtx.c **** 		}
1898:bluetooth_rxtx.c **** */
1899:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7218              		.loc 1 1899 0 is_stmt 1
 7219 020e BB6F     		ldr	r3, [r7, #120]
 7220 0210 0533     		adds	r3, r3, #5
 7221 0212 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7222 0214 03F03F03 		and	r3, r3, #63
 7223 0218 0233     		adds	r3, r3, #2
 7224 021a FB66     		str	r3, [r7, #108]
1900:bluetooth_rxtx.c **** 		
1901:bluetooth_rxtx.c **** 		if (len > 39)
 7225              		.loc 1 1901 0
 7226 021c FB6E     		ldr	r3, [r7, #108]
 7227 021e 272B     		cmp	r3, #39
 7228 0220 00D9     		bls	.L337
1902:bluetooth_rxtx.c **** 			goto rx_flush;
 7229              		.loc 1 1902 0
 7230 0222 5EE0     		b	.L338
 7231              	.L337:
1903:bluetooth_rxtx.c **** 
1904:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7232              		.loc 1 1904 0
 7233 0224 1B4B     		ldr	r3, .L347+40
 7234 0226 D968     		ldr	r1, [r3, #12]
 7235 0228 BB6F     		ldr	r3, [r7, #120]
 7236 022a 1A1D     		adds	r2, r3, #4
 7237 022c FB6E     		ldr	r3, [r7, #108]
ARM GAS  /tmp/ccfQkuUX.s 			page 160


 7238 022e 0846     		mov	r0, r1
 7239 0230 1146     		mov	r1, r2
 7240 0232 1A46     		mov	r2, r3
 7241 0234 FFF7FEFF 		bl	btle_crcgen_lut
 7242 0238 B866     		str	r0, [r7, #104]
1905:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7243              		.loc 1 1905 0
 7244 023a FB6E     		ldr	r3, [r7, #108]
 7245 023c 0633     		adds	r3, r3, #6
 7246 023e BA6F     		ldr	r2, [r7, #120]
 7247 0240 1344     		add	r3, r3, r2
 7248 0242 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7249 0244 1A04     		lsls	r2, r3, #16
1906:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 7250              		.loc 1 1906 0
 7251 0246 FB6E     		ldr	r3, [r7, #108]
 7252 0248 0533     		adds	r3, r3, #5
 7253 024a B96F     		ldr	r1, [r7, #120]
 7254 024c 0B44     		add	r3, r3, r1
 7255 024e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7256 0250 1B02     		lsls	r3, r3, #8
 7257 0252 1343     		orrs	r3, r3, r2
1907:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 7258              		.loc 1 1907 0
 7259 0254 FA6E     		ldr	r2, [r7, #108]
 7260 0256 0432     		adds	r2, r2, #4
 7261 0258 B96F     		ldr	r1, [r7, #120]
 7262 025a 0A44     		add	r2, r2, r1
 7263 025c 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7264 025e 1343     		orrs	r3, r3, r2
1905:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7265              		.loc 1 1905 0
 7266 0260 7B66     		str	r3, [r7, #100]
1908:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 7267              		.loc 1 1908 0
 7268 0262 BA6E     		ldr	r2, [r7, #104]
 7269 0264 7B6E     		ldr	r3, [r7, #100]
 7270 0266 9A42     		cmp	r2, r3
 7271 0268 1ED0     		beq	.L339
1909:bluetooth_rxtx.c ****                         goto rx_flush;
 7272              		.loc 1 1909 0
 7273 026a 3AE0     		b	.L338
 7274              	.L348:
 7275              		.align	2
 7276              	.L347:
 7277 026c 3CC00920 		.word	537509948
 7278 0270 D6BE898E 		.word	-1903575338
 7279 0274 58C00920 		.word	537509976
 7280 0278 00000000 		.word	channel
 7281 027c 00000000 		.word	clkn
 7282 0280 00000000 		.word	clkn_freq
 7283 0284 00000000 		.word	rx_tc
 7284 0288 38C00920 		.word	537509944
 7285 028c 00000000 		.word	rx_err
 7286 0290 00000000 		.word	status
 7287 0294 00000000 		.word	le
 7288 0298 10410050 		.word	1342193936
ARM GAS  /tmp/ccfQkuUX.s 			page 161


 7289 029c 24000340 		.word	1073938468
 7290 02a0 10010000 		.word	whitening_word
 7291 02a4 00000000 		.word	rxbuf1
 7292              	.L339:
1910:bluetooth_rxtx.c **** 
1911:bluetooth_rxtx.c **** 		
1912:bluetooth_rxtx.c **** 		if (p[38] == 0x00 && p[39] == 0x3d)
 7293              		.loc 1 1912 0
 7294 02a8 BB6F     		ldr	r3, [r7, #120]
 7295 02aa 2633     		adds	r3, r3, #38
 7296 02ac 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7297 02ae 002B     		cmp	r3, #0
 7298 02b0 14D1     		bne	.L340
 7299              		.loc 1 1912 0 is_stmt 0 discriminator 1
 7300 02b2 BB6F     		ldr	r3, [r7, #120]
 7301 02b4 2733     		adds	r3, r3, #39
 7302 02b6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7303 02b8 3D2B     		cmp	r3, #61
 7304 02ba 0FD1     		bne	.L340
1913:bluetooth_rxtx.c **** 		{
1914:bluetooth_rxtx.c **** 			device_index = p[40];
 7305              		.loc 1 1914 0 is_stmt 1
 7306 02bc BB6F     		ldr	r3, [r7, #120]
 7307 02be 93F82820 		ldrb	r2, [r3, #40]	@ zero_extendqisi2
 7308 02c2 2C4B     		ldr	r3, .L349
 7309 02c4 1A70     		strb	r2, [r3]
1915:bluetooth_rxtx.c **** 			enqueue_freq (MESSAGE, freq_buf);
 7310              		.loc 1 1915 0
 7311 02c6 07F13403 		add	r3, r7, #52
 7312 02ca 0220     		movs	r0, #2
 7313 02cc 1946     		mov	r1, r3
 7314 02ce FFF7FEFF 		bl	enqueue_freq
1916:bluetooth_rxtx.c **** 			handle_usb(clkn);
 7315              		.loc 1 1916 0
 7316 02d2 294B     		ldr	r3, .L349+4
 7317 02d4 1B68     		ldr	r3, [r3]
 7318 02d6 1846     		mov	r0, r3
 7319 02d8 FFF7FEFF 		bl	handle_usb
 7320              	.L340:
1917:bluetooth_rxtx.c **** 		}
1918:bluetooth_rxtx.c **** 		RXLED_CLR;
 7321              		.loc 1 1918 0
 7322 02dc 274B     		ldr	r3, .L349+8
 7323 02de 1022     		movs	r2, #16
 7324 02e0 1A60     		str	r2, [r3]
 7325              	.L338:
1919:bluetooth_rxtx.c **** 	       
1920:bluetooth_rxtx.c **** 	rx_flush:
1921:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 7326              		.loc 1 1921 0
 7327 02e2 6420     		movs	r0, #100
 7328 02e4 FFF7FEFF 		bl	cc2400_strobe
1922:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 7329              		.loc 1 1922 0
 7330 02e8 00BF     		nop
 7331              	.L341:
 7332              		.loc 1 1922 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccfQkuUX.s 			page 162


 7333 02ea FFF7FEFF 		bl	cc2400_status
 7334 02ee 0346     		mov	r3, r0
 7335 02f0 03F00403 		and	r3, r3, #4
 7336 02f4 002B     		cmp	r3, #0
 7337 02f6 F8D1     		bne	.L341
1923:bluetooth_rxtx.c **** 
1924:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 7338              		.loc 1 1924 0 is_stmt 1
 7339 02f8 00BF     		nop
 7340              	.L342:
 7341              		.loc 1 1924 0 is_stmt 0 discriminator 1
 7342 02fa FFF7FEFF 		bl	cc2400_status
 7343 02fe 0346     		mov	r3, r0
 7344 0300 03F04003 		and	r3, r3, #64
 7345 0304 002B     		cmp	r3, #0
 7346 0306 F8D0     		beq	.L342
1925:bluetooth_rxtx.c **** 
1926:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 7347              		.loc 1 1926 0 is_stmt 1
 7348 0308 6120     		movs	r0, #97
 7349 030a FFF7FEFF 		bl	cc2400_strobe
1927:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 7350              		.loc 1 1927 0
 7351 030e 00BF     		nop
 7352              	.L343:
 7353              		.loc 1 1927 0 is_stmt 0 discriminator 1
 7354 0310 FFF7FEFF 		bl	cc2400_status
 7355 0314 0346     		mov	r3, r0
 7356 0316 03F00403 		and	r3, r3, #4
 7357 031a 002B     		cmp	r3, #0
 7358 031c F8D0     		beq	.L343
1928:bluetooth_rxtx.c **** 
1929:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7359              		.loc 1 1929 0 is_stmt 1
 7360 031e 184A     		ldr	r2, .L349+12
 7361 0320 174B     		ldr	r3, .L349+12
 7362 0322 1B68     		ldr	r3, [r3]
 7363 0324 23F00103 		bic	r3, r3, #1
 7364 0328 1360     		str	r3, [r2]
1930:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7365              		.loc 1 1930 0
 7366 032a 03E0     		b	.L344
 7367              	.L345:
 7368              	.LBB6:
1931:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 7369              		.loc 1 1931 0
 7370 032c 154B     		ldr	r3, .L349+16
 7371 032e 1B68     		ldr	r3, [r3]
 7372 0330 87F86330 		strb	r3, [r7, #99]
 7373              	.L344:
 7374              	.LBE6:
1930:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7375              		.loc 1 1930 0
 7376 0334 144B     		ldr	r3, .L349+20
 7377 0336 1B68     		ldr	r3, [r3]
 7378 0338 03F00403 		and	r3, r3, #4
 7379 033c 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 163


 7380 033e F5D1     		bne	.L345
1932:bluetooth_rxtx.c ****                 }
1933:bluetooth_rxtx.c **** 		dma_init_le();
 7381              		.loc 1 1933 0
 7382 0340 FFF7FEFF 		bl	dma_init_le
1934:bluetooth_rxtx.c **** 		dio_ssp_start();
 7383              		.loc 1 1934 0
 7384 0344 FFF7FEFF 		bl	dio_ssp_start
1935:bluetooth_rxtx.c **** 		
1936:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 7385              		.loc 1 1936 0
 7386 0348 6220     		movs	r0, #98
 7387 034a FFF7FEFF 		bl	cc2400_strobe
1937:bluetooth_rxtx.c **** 		rx_tc = 0;
 7388              		.loc 1 1937 0
 7389 034e 0F4B     		ldr	r3, .L349+24
 7390 0350 0022     		movs	r2, #0
 7391 0352 1A60     		str	r2, [r3]
1938:bluetooth_rxtx.c **** 		rx_err = 0;
 7392              		.loc 1 1938 0
 7393 0354 0E4B     		ldr	r3, .L349+28
 7394 0356 0022     		movs	r2, #0
 7395 0358 1A60     		str	r2, [r3]
 7396              	.L324:
 7397              	.LBE4:
1844:bluetooth_rxtx.c **** 		
 7398              		.loc 1 1844 0
 7399 035a 0E4B     		ldr	r3, .L349+32
 7400 035c 1B78     		ldrb	r3, [r3]
 7401 035e DBB2     		uxtb	r3, r3
 7402 0360 0E2B     		cmp	r3, #14
 7403 0362 3FF4B1AE 		beq	.L346
1939:bluetooth_rxtx.c **** 	 
1940:bluetooth_rxtx.c **** 	
1941:bluetooth_rxtx.c **** 	}
1942:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 7404              		.loc 1 1942 0
 7405 0366 FFF7FEFF 		bl	dio_ssp_stop
1943:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 7406              		.loc 1 1943 0
 7407 036a FFF7FEFF 		bl	cs_trigger_disable
1944:bluetooth_rxtx.c **** }
 7408              		.loc 1 1944 0
 7409 036e 8437     		adds	r7, r7, #132
 7410              		.cfi_def_cfa_offset 12
 7411 0370 BD46     		mov	sp, r7
 7412              		.cfi_def_cfa_register 13
 7413              		@ sp needed
 7414 0372 90BD     		pop	{r4, r7, pc}
 7415              	.L350:
 7416              		.align	2
 7417              	.L349:
 7418 0374 00000000 		.word	device_index
 7419 0378 00000000 		.word	clkn
 7420 037c 3CC00920 		.word	537509948
 7421 0380 24000340 		.word	1073938468
 7422 0384 08000340 		.word	1073938440
ARM GAS  /tmp/ccfQkuUX.s 			page 164


 7423 0388 0C000340 		.word	1073938444
 7424 038c 00000000 		.word	rx_tc
 7425 0390 00000000 		.word	rx_err
 7426 0394 00000000 		.word	requested_mode
 7427              		.cfi_endproc
 7428              	.LFE33:
 7430              		.section	.text.bt_stream_legacy,"ax",%progbits
 7431              		.align	2
 7432              		.global	bt_stream_legacy
 7433              		.thumb
 7434              		.thumb_func
 7436              	bt_stream_legacy:
 7437              	.LFB34:
1945:bluetooth_rxtx.c **** 
1946:bluetooth_rxtx.c **** 
1947:bluetooth_rxtx.c **** // wpson
1948:bluetooth_rxtx.c **** void bt_stream_legacy()
1949:bluetooth_rxtx.c **** {
 7438              		.loc 1 1949 0
 7439              		.cfi_startproc
 7440              		@ args = 0, pretend = 0, frame = 136
 7441              		@ frame_needed = 1, uses_anonymous_args = 0
 7442 0000 90B5     		push	{r4, r7, lr}
 7443              		.cfi_def_cfa_offset 12
 7444              		.cfi_offset 4, -12
 7445              		.cfi_offset 7, -8
 7446              		.cfi_offset 14, -4
 7447 0002 A3B0     		sub	sp, sp, #140
 7448              		.cfi_def_cfa_offset 152
 7449 0004 00AF     		add	r7, sp, #0
 7450              		.cfi_def_cfa_register 7
1950:bluetooth_rxtx.c **** //	TXLED_SET;
1951:bluetooth_rxtx.c **** 	RXLED_CLR;
 7451              		.loc 1 1951 0
 7452 0006 A94B     		ldr	r3, .L377
 7453 0008 1022     		movs	r2, #16
 7454 000a 1A60     		str	r2, [r3]
1952:bluetooth_rxtx.c **** 	int i;
1953:bluetooth_rxtx.c **** 	
1954:bluetooth_rxtx.c **** 	u8 rssi_buf[DMA_SIZE];
1955:bluetooth_rxtx.c **** 	queue_init();
 7455              		.loc 1 1955 0
 7456 000c FFF7FEFF 		bl	queue_init
1956:bluetooth_rxtx.c **** 	dio_ssp_init();
 7457              		.loc 1 1956 0
 7458 0010 FFF7FEFF 		bl	dio_ssp_init
1957:bluetooth_rxtx.c **** 	dma_init_le();
 7459              		.loc 1 1957 0
 7460 0014 FFF7FEFF 		bl	dma_init_le
1958:bluetooth_rxtx.c **** 	dio_ssp_start();
 7461              		.loc 1 1958 0
 7462 0018 FFF7FEFF 		bl	dio_ssp_start
1959:bluetooth_rxtx.c **** 	
1960:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 7463              		.loc 1 1960 0
 7464 001c 0D20     		movs	r0, #13
 7465 001e 47F6FF71 		movw	r1, #32767
ARM GAS  /tmp/ccfQkuUX.s 			page 165


 7466 0022 FFF7FEFF 		bl	cc2400_set
1961:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 7467              		.loc 1 1961 0
 7468 0026 1220     		movs	r0, #18
 7469 0028 42F62231 		movw	r1, #11042
 7470 002c FFF7FEFF 		bl	cc2400_set
1962:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 7471              		.loc 1 1962 0
 7472 0030 1420     		movs	r0, #20
 7473 0032 41F24B21 		movw	r1, #4683
 7474 0036 FFF7FEFF 		bl	cc2400_set
1963:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 7475              		.loc 1 1963 0
 7476 003a 2020     		movs	r0, #32
 7477 003c 40F26151 		movw	r1, #1377
 7478 0040 FFF7FEFF 		bl	cc2400_set
1964:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 7479              		.loc 1 1964 0
 7480 0044 0320     		movs	r0, #3
 7481 0046 4021     		movs	r1, #64
 7482 0048 FFF7FEFF 		bl	cc2400_set
1965:bluetooth_rxtx.c **** 
1966:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1967:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1968:bluetooth_rxtx.c **** 	
1969:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 7483              		.loc 1 1969 0
 7484 004c 9848     		ldr	r0, .L377+4
 7485 004e FFF7FEFF 		bl	rbit
 7486 0052 0346     		mov	r3, r0
 7487 0054 9BB2     		uxth	r3, r3
 7488 0056 2C20     		movs	r0, #44
 7489 0058 1946     		mov	r1, r3
 7490 005a FFF7FEFF 		bl	cc2400_set
1970:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 7491              		.loc 1 1970 0
 7492 005e 9448     		ldr	r0, .L377+4
 7493 0060 FFF7FEFF 		bl	rbit
 7494 0064 0346     		mov	r3, r0
 7495 0066 1B0C     		lsrs	r3, r3, #16
 7496 0068 9BB2     		uxth	r3, r3
 7497 006a 2D20     		movs	r0, #45
 7498 006c 1946     		mov	r1, r3
 7499 006e FFF7FEFF 		bl	cc2400_set
1971:bluetooth_rxtx.c **** 	
1972:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1973:bluetooth_rxtx.c **** 	PAEN_SET;
 7500              		.loc 1 1973 0
 7501 0072 904B     		ldr	r3, .L377+8
 7502 0074 8022     		movs	r2, #128
 7503 0076 1A60     		str	r2, [r3]
1974:bluetooth_rxtx.c **** //	HGM_SET;
1975:bluetooth_rxtx.c **** #endif
1976:bluetooth_rxtx.c **** 
1977:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 7504              		.loc 1 1977 0
 7505 0078 00BF     		nop
ARM GAS  /tmp/ccfQkuUX.s 			page 166


 7506              	.L352:
 7507              		.loc 1 1977 0 is_stmt 0 discriminator 1
 7508 007a FFF7FEFF 		bl	cc2400_status
 7509 007e 0346     		mov	r3, r0
 7510 0080 03F04003 		and	r3, r3, #64
 7511 0084 002B     		cmp	r3, #0
 7512 0086 F8D0     		beq	.L352
1978:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 7513              		.loc 1 1978 0 is_stmt 1
 7514 0088 00BF     		nop
 7515              	.L353:
 7516              		.loc 1 1978 0 is_stmt 0 discriminator 1
 7517 008a FFF7FEFF 		bl	cc2400_status
 7518 008e 0346     		mov	r3, r0
 7519 0090 03F00403 		and	r3, r3, #4
 7520 0094 002B     		cmp	r3, #0
 7521 0096 F8D1     		bne	.L353
1979:bluetooth_rxtx.c **** 
1980:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 7522              		.loc 1 1980 0 is_stmt 1
 7523 0098 874B     		ldr	r3, .L377+12
 7524 009a 1B88     		ldrh	r3, [r3]	@ movhi
 7525 009c 9BB2     		uxth	r3, r3
 7526 009e 013B     		subs	r3, r3, #1
 7527 00a0 9BB2     		uxth	r3, r3
 7528 00a2 0220     		movs	r0, #2
 7529 00a4 1946     		mov	r1, r3
 7530 00a6 FFF7FEFF 		bl	cc2400_set
1981:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 7531              		.loc 1 1981 0
 7532 00aa 6120     		movs	r0, #97
 7533 00ac FFF7FEFF 		bl	cc2400_strobe
1982:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 7534              		.loc 1 1982 0
 7535 00b0 00BF     		nop
 7536              	.L354:
 7537              		.loc 1 1982 0 is_stmt 0 discriminator 1
 7538 00b2 FFF7FEFF 		bl	cc2400_status
 7539 00b6 0346     		mov	r3, r0
 7540 00b8 03F00403 		and	r3, r3, #4
 7541 00bc 002B     		cmp	r3, #0
 7542 00be F8D0     		beq	.L354
1983:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 7543              		.loc 1 1983 0 is_stmt 1
 7544 00c0 6220     		movs	r0, #98
 7545 00c2 FFF7FEFF 		bl	cc2400_strobe
1984:bluetooth_rxtx.c **** 	
1985:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 7546              		.loc 1 1985 0
 7547 00c6 5CE1     		b	.L355
 7548              	.L376:
 7549              	.LBB7:
1986:bluetooth_rxtx.c **** 		
1987:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 7550              		.loc 1 1987 0
 7551 00c8 00BF     		nop
 7552              	.L356:
ARM GAS  /tmp/ccfQkuUX.s 			page 167


 7553              		.loc 1 1987 0 is_stmt 0 discriminator 1
 7554 00ca FFF7FEFF 		bl	cc2400_status
 7555 00ce 0346     		mov	r3, r0
 7556 00d0 03F01003 		and	r3, r3, #16
 7557 00d4 002B     		cmp	r3, #0
 7558 00d6 F8D0     		beq	.L356
1988:bluetooth_rxtx.c **** /*		int out;
1989:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
1990:bluetooth_rxtx.c ****                 if (rssi >= 128)
1991:bluetooth_rxtx.c ****                         out = rssi - 256;
1992:bluetooth_rxtx.c ****                 else
1993:bluetooth_rxtx.c ****                         out = rssi;
1994:bluetooth_rxtx.c ****                 if (out < 0)
1995:bluetooth_rxtx.c **** 		  goto rx_flush;
1996:bluetooth_rxtx.c **** */
1997:bluetooth_rxtx.c **** 		rssi_sum = 0;
 7559              		.loc 1 1997 0 is_stmt 1
 7560 00d8 784B     		ldr	r3, .L377+16
 7561 00da 0022     		movs	r2, #0
 7562 00dc 1A60     		str	r2, [r3]
1998:bluetooth_rxtx.c **** 		rssi_count = 5;
 7563              		.loc 1 1998 0
 7564 00de 784B     		ldr	r3, .L377+20
 7565 00e0 0522     		movs	r2, #5
 7566 00e2 1A70     		strb	r2, [r3]
1999:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 7567              		.loc 1 1999 0
 7568 00e4 0023     		movs	r3, #0
 7569 00e6 C7F88430 		str	r3, [r7, #132]
 7570 00ea 11E0     		b	.L357
 7571              	.L358:
2000:bluetooth_rxtx.c **** 		{
2001:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 7572              		.loc 1 2001 0 discriminator 3
 7573 00ec 0620     		movs	r0, #6
 7574 00ee FFF7FEFF 		bl	cc2400_get
 7575 00f2 0346     		mov	r3, r0
 7576 00f4 1B0A     		lsrs	r3, r3, #8
 7577 00f6 9BB2     		uxth	r3, r3
 7578 00f8 DBB2     		uxtb	r3, r3
 7579 00fa 5AB2     		sxtb	r2, r3
 7580 00fc 6F4B     		ldr	r3, .L377+16
 7581 00fe 1B68     		ldr	r3, [r3]
 7582 0100 1344     		add	r3, r3, r2
 7583 0102 6E4A     		ldr	r2, .L377+16
 7584 0104 1360     		str	r3, [r2]
1999:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 7585              		.loc 1 1999 0 discriminator 3
 7586 0106 D7F88430 		ldr	r3, [r7, #132]
 7587 010a 0133     		adds	r3, r3, #1
 7588 010c C7F88430 		str	r3, [r7, #132]
 7589              	.L357:
1999:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 7590              		.loc 1 1999 0 is_stmt 0 discriminator 1
 7591 0110 6B4B     		ldr	r3, .L377+20
 7592 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7593 0114 1A46     		mov	r2, r3
ARM GAS  /tmp/ccfQkuUX.s 			page 168


 7594 0116 D7F88430 		ldr	r3, [r7, #132]
 7595 011a 9A42     		cmp	r2, r3
 7596 011c E6DC     		bgt	.L358
2002:bluetooth_rxtx.c **** 		}
2003:bluetooth_rxtx.c **** 	
2004:bluetooth_rxtx.c **** 		clkn_legacy = clkn;
 7597              		.loc 1 2004 0 is_stmt 1
 7598 011e 694B     		ldr	r3, .L377+24
 7599 0120 1B68     		ldr	r3, [r3]
 7600 0122 694A     		ldr	r2, .L377+28
 7601 0124 1360     		str	r3, [r2]
2005:bluetooth_rxtx.c **** 		while (!rx_tc);
 7602              		.loc 1 2005 0
 7603 0126 00BF     		nop
 7604              	.L359:
 7605              		.loc 1 2005 0 is_stmt 0 discriminator 1
 7606 0128 684B     		ldr	r3, .L377+32
 7607 012a 1B68     		ldr	r3, [r3]
 7608 012c 002B     		cmp	r3, #0
 7609 012e FBD0     		beq	.L359
2006:bluetooth_rxtx.c **** 	
2007:bluetooth_rxtx.c **** 		RXLED_SET;
 7610              		.loc 1 2007 0 is_stmt 1
 7611 0130 674B     		ldr	r3, .L377+36
 7612 0132 1022     		movs	r2, #16
 7613 0134 1A60     		str	r2, [r3]
2008:bluetooth_rxtx.c **** 		if (rx_err) {
 7614              		.loc 1 2008 0
 7615 0136 674B     		ldr	r3, .L377+40
 7616 0138 1B68     		ldr	r3, [r3]
 7617 013a 002B     		cmp	r3, #0
 7618 013c 07D0     		beq	.L360
2009:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 7619              		.loc 1 2009 0
 7620 013e 664B     		ldr	r3, .L377+44
 7621 0140 1B78     		ldrb	r3, [r3]
 7622 0142 DBB2     		uxtb	r3, r3
 7623 0144 43F00203 		orr	r3, r3, #2
 7624 0148 DAB2     		uxtb	r2, r3
 7625 014a 634B     		ldr	r3, .L377+44
 7626 014c 1A70     		strb	r2, [r3]
 7627              	.L360:
2010:bluetooth_rxtx.c **** 		}	
2011:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 7628              		.loc 1 2011 0
 7629 014e 5F4B     		ldr	r3, .L377+32
 7630 0150 1B68     		ldr	r3, [r3]
 7631 0152 012B     		cmp	r3, #1
 7632 0154 07D9     		bls	.L361
2012:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 7633              		.loc 1 2012 0
 7634 0156 604B     		ldr	r3, .L377+44
 7635 0158 1B78     		ldrb	r3, [r3]
 7636 015a DBB2     		uxtb	r3, r3
 7637 015c 43F00103 		orr	r3, r3, #1
 7638 0160 DAB2     		uxtb	r2, r3
 7639 0162 5D4B     		ldr	r3, .L377+44
ARM GAS  /tmp/ccfQkuUX.s 			page 169


 7640 0164 1A70     		strb	r2, [r3]
 7641              	.L361:
2013:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2014:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7642              		.loc 1 2014 0
 7643 0166 3B1D     		adds	r3, r7, #4
 7644 0168 C7F88030 		str	r3, [r7, #128]
2015:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7645              		.loc 1 2015 0
 7646 016c 5B4B     		ldr	r3, .L377+48
 7647 016e 1B68     		ldr	r3, [r3]
 7648 0170 7B60     		str	r3, [r7, #4]
2016:bluetooth_rxtx.c **** 
2017:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 7649              		.loc 1 2017 0
 7650 0172 00BF     		nop
 7651              	.L363:
 7652              		.loc 1 2017 0 is_stmt 0 discriminator 2
 7653 0174 5A4B     		ldr	r3, .L377+52
 7654 0176 1B68     		ldr	r3, [r3]
 7655 0178 03F00103 		and	r3, r3, #1
 7656 017c 002B     		cmp	r3, #0
 7657 017e 03D0     		beq	.L362
 7658              		.loc 1 2017 0 discriminator 1
 7659 0180 544B     		ldr	r3, .L377+40
 7660 0182 1B68     		ldr	r3, [r3]
 7661 0184 002B     		cmp	r3, #0
 7662 0186 F5D0     		beq	.L363
 7663              	.L362:
2018:bluetooth_rxtx.c ****                 
2019:bluetooth_rxtx.c **** 			
2020:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7664              		.loc 1 2020 0 is_stmt 1
 7665 0188 564A     		ldr	r2, .L377+56
 7666 018a 564B     		ldr	r3, .L377+56
 7667 018c 1B68     		ldr	r3, [r3]
 7668 018e 23F00103 		bic	r3, r3, #1
 7669 0192 1360     		str	r3, [r2]
2021:bluetooth_rxtx.c **** 	
2022:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7670              		.loc 1 2022 0
 7671 0194 484B     		ldr	r3, .L377+12
 7672 0196 1B88     		ldrh	r3, [r3]	@ movhi
 7673 0198 9BB2     		uxth	r3, r3
 7674 019a DBB2     		uxtb	r3, r3
 7675 019c 623B     		subs	r3, r3, #98
 7676 019e DBB2     		uxtb	r3, r3
 7677 01a0 1846     		mov	r0, r3
 7678 01a2 FFF7FEFF 		bl	btle_channel_index
 7679 01a6 0346     		mov	r3, r0
 7680 01a8 1A46     		mov	r2, r3
 7681 01aa 1346     		mov	r3, r2
 7682 01ac 5B00     		lsls	r3, r3, #1
 7683 01ae 1344     		add	r3, r3, r2
 7684 01b0 1B01     		lsls	r3, r3, #4
 7685 01b2 4D4A     		ldr	r2, .L377+60
 7686 01b4 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccfQkuUX.s 			page 170


 7687 01b6 FB67     		str	r3, [r7, #124]
2023:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 7688              		.loc 1 2023 0
 7689 01b8 0023     		movs	r3, #0
 7690 01ba C7F88430 		str	r3, [r7, #132]
 7691 01be 3CE0     		b	.L364
 7692              	.L367:
 7693              	.LBB8:
2024:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7694              		.loc 1 2024 0 discriminator 3
 7695 01c0 4A4A     		ldr	r2, .L377+64
 7696 01c2 D7F88430 		ldr	r3, [r7, #132]
 7697 01c6 1344     		add	r3, r3, r2
 7698 01c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7699 01ca 1A06     		lsls	r2, r3, #24
2025:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7700              		.loc 1 2025 0 discriminator 3
 7701 01cc D7F88430 		ldr	r3, [r7, #132]
 7702 01d0 0133     		adds	r3, r3, #1
 7703 01d2 4649     		ldr	r1, .L377+64
 7704 01d4 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7705 01d6 1B04     		lsls	r3, r3, #16
 7706 01d8 1A43     		orrs	r2, r2, r3
2026:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 7707              		.loc 1 2026 0 discriminator 3
 7708 01da D7F88430 		ldr	r3, [r7, #132]
 7709 01de 0233     		adds	r3, r3, #2
 7710 01e0 4249     		ldr	r1, .L377+64
 7711 01e2 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7712 01e4 1B02     		lsls	r3, r3, #8
 7713 01e6 1343     		orrs	r3, r3, r2
2027:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 7714              		.loc 1 2027 0 discriminator 3
 7715 01e8 D7F88420 		ldr	r2, [r7, #132]
 7716 01ec 0332     		adds	r2, r2, #3
 7717 01ee 3F49     		ldr	r1, .L377+64
 7718 01f0 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7719 01f2 1343     		orrs	r3, r3, r2
2024:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 7720              		.loc 1 2024 0 discriminator 3
 7721 01f4 BB67     		str	r3, [r7, #120]
2028:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 7722              		.loc 1 2028 0 discriminator 3
 7723 01f6 D7F88430 		ldr	r3, [r7, #132]
 7724 01fa 002B     		cmp	r3, #0
 7725 01fc 00DA     		bge	.L365
 7726 01fe 0333     		adds	r3, r3, #3
 7727              	.L365:
 7728 0200 9B10     		asrs	r3, r3, #2
 7729 0202 5C1C     		adds	r4, r3, #1
 7730 0204 B86F     		ldr	r0, [r7, #120]
 7731 0206 FFF7FEFF 		bl	rbit
 7732 020a 0146     		mov	r1, r0
 7733 020c D7F88430 		ldr	r3, [r7, #132]
 7734 0210 002B     		cmp	r3, #0
 7735 0212 00DA     		bge	.L366
 7736 0214 0333     		adds	r3, r3, #3
ARM GAS  /tmp/ccfQkuUX.s 			page 171


 7737              	.L366:
 7738 0216 9B10     		asrs	r3, r3, #2
 7739 0218 9B00     		lsls	r3, r3, #2
 7740 021a FA6F     		ldr	r2, [r7, #124]
 7741 021c 1344     		add	r3, r3, r2
 7742 021e 1B68     		ldr	r3, [r3]
 7743 0220 81EA0302 		eor	r2, r1, r3
 7744 0224 A300     		lsls	r3, r4, #2
 7745 0226 07F18801 		add	r1, r7, #136
 7746 022a 0B44     		add	r3, r3, r1
 7747 022c 43F8842C 		str	r2, [r3, #-132]
 7748              	.LBE8:
2023:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7749              		.loc 1 2023 0 discriminator 3
 7750 0230 D7F88430 		ldr	r3, [r7, #132]
 7751 0234 0433     		adds	r3, r3, #4
 7752 0236 C7F88430 		str	r3, [r7, #132]
 7753              	.L364:
2023:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7754              		.loc 1 2023 0 is_stmt 0 discriminator 1
 7755 023a D7F88430 		ldr	r3, [r7, #132]
 7756 023e 2B2B     		cmp	r3, #43
 7757 0240 BEDD     		ble	.L367
2029:bluetooth_rxtx.c **** 		}
2030:bluetooth_rxtx.c **** 
2031:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2032:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2033:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2034:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2035:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2036:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2037:bluetooth_rxtx.c **** 		}
2038:bluetooth_rxtx.c **** */
2039:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7758              		.loc 1 2039 0 is_stmt 1
 7759 0242 D7F88030 		ldr	r3, [r7, #128]
 7760 0246 0533     		adds	r3, r3, #5
 7761 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7762 024a 03F03F03 		and	r3, r3, #63
 7763 024e 0233     		adds	r3, r3, #2
 7764 0250 7B67     		str	r3, [r7, #116]
2040:bluetooth_rxtx.c **** 		
2041:bluetooth_rxtx.c **** 		if (len > 39)
 7765              		.loc 1 2041 0
 7766 0252 7B6F     		ldr	r3, [r7, #116]
 7767 0254 272B     		cmp	r3, #39
 7768 0256 00D9     		bls	.L368
2042:bluetooth_rxtx.c **** 			goto rx_flush;
 7769              		.loc 1 2042 0
 7770 0258 57E0     		b	.L369
 7771              	.L368:
2043:bluetooth_rxtx.c **** 
2044:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7772              		.loc 1 2044 0
 7773 025a 204B     		ldr	r3, .L377+48
 7774 025c D968     		ldr	r1, [r3, #12]
 7775 025e D7F88030 		ldr	r3, [r7, #128]
ARM GAS  /tmp/ccfQkuUX.s 			page 172


 7776 0262 1A1D     		adds	r2, r3, #4
 7777 0264 7B6F     		ldr	r3, [r7, #116]
 7778 0266 0846     		mov	r0, r1
 7779 0268 1146     		mov	r1, r2
 7780 026a 1A46     		mov	r2, r3
 7781 026c FFF7FEFF 		bl	btle_crcgen_lut
 7782 0270 3867     		str	r0, [r7, #112]
2045:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7783              		.loc 1 2045 0
 7784 0272 7B6F     		ldr	r3, [r7, #116]
 7785 0274 0633     		adds	r3, r3, #6
 7786 0276 D7F88020 		ldr	r2, [r7, #128]
 7787 027a 1344     		add	r3, r3, r2
 7788 027c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7789 027e 1A04     		lsls	r2, r3, #16
2046:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 7790              		.loc 1 2046 0
 7791 0280 7B6F     		ldr	r3, [r7, #116]
 7792 0282 0533     		adds	r3, r3, #5
 7793 0284 D7F88010 		ldr	r1, [r7, #128]
 7794 0288 0B44     		add	r3, r3, r1
 7795 028a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7796 028c 1B02     		lsls	r3, r3, #8
 7797 028e 1343     		orrs	r3, r3, r2
2047:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 7798              		.loc 1 2047 0
 7799 0290 7A6F     		ldr	r2, [r7, #116]
 7800 0292 0432     		adds	r2, r2, #4
 7801 0294 D7F88010 		ldr	r1, [r7, #128]
 7802 0298 0A44     		add	r2, r2, r1
 7803 029a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7804 029c 1343     		orrs	r3, r3, r2
2045:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 7805              		.loc 1 2045 0
 7806 029e FB66     		str	r3, [r7, #108]
2048:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 7807              		.loc 1 2048 0
 7808 02a0 3A6F     		ldr	r2, [r7, #112]
 7809 02a2 FB6E     		ldr	r3, [r7, #108]
 7810 02a4 9A42     		cmp	r2, r3
 7811 02a6 23D0     		beq	.L370
2049:bluetooth_rxtx.c ****                         goto rx_flush;
 7812              		.loc 1 2049 0
 7813 02a8 2FE0     		b	.L369
 7814              	.L378:
 7815 02aa 00BF     		.align	2
 7816              	.L377:
 7817 02ac 3CC00920 		.word	537509948
 7818 02b0 D6BE898E 		.word	-1903575338
 7819 02b4 58C00920 		.word	537509976
 7820 02b8 00000000 		.word	channel
 7821 02bc 00000000 		.word	rssi_sum
 7822 02c0 00000000 		.word	rssi_count
 7823 02c4 00000000 		.word	clkn
 7824 02c8 00000000 		.word	clkn_legacy
 7825 02cc 00000000 		.word	rx_tc
 7826 02d0 38C00920 		.word	537509944
ARM GAS  /tmp/ccfQkuUX.s 			page 173


 7827 02d4 00000000 		.word	rx_err
 7828 02d8 00000000 		.word	status
 7829 02dc 00000000 		.word	le
 7830 02e0 10410050 		.word	1342193936
 7831 02e4 24000340 		.word	1073938468
 7832 02e8 10010000 		.word	whitening_word
 7833 02ec 00000000 		.word	rxbuf1
 7834              	.L370:
2050:bluetooth_rxtx.c **** 
2051:bluetooth_rxtx.c **** 
2052:bluetooth_rxtx.c **** 		enqueue_legacy (BR_PACKET, (uint8_t*)packet);
 7835              		.loc 1 2052 0
 7836 02f0 3B1D     		adds	r3, r7, #4
 7837 02f2 0020     		movs	r0, #0
 7838 02f4 1946     		mov	r1, r3
 7839 02f6 FFF7FEFF 		bl	enqueue_legacy
2053:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
2054:bluetooth_rxtx.c **** 		handle_usb(clkn);
 7840              		.loc 1 2054 0
 7841 02fa 284B     		ldr	r3, .L379
 7842 02fc 1B68     		ldr	r3, [r3]
 7843 02fe 1846     		mov	r0, r3
 7844 0300 FFF7FEFF 		bl	handle_usb
2055:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
2056:bluetooth_rxtx.c **** //		handle_usb(clkn);
2057:bluetooth_rxtx.c **** 		RXLED_CLR;
 7845              		.loc 1 2057 0
 7846 0304 264B     		ldr	r3, .L379+4
 7847 0306 1022     		movs	r2, #16
 7848 0308 1A60     		str	r2, [r3]
 7849              	.L369:
2058:bluetooth_rxtx.c **** 	       
2059:bluetooth_rxtx.c **** 	rx_flush:
2060:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 7850              		.loc 1 2060 0
 7851 030a 6420     		movs	r0, #100
 7852 030c FFF7FEFF 		bl	cc2400_strobe
2061:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 7853              		.loc 1 2061 0
 7854 0310 00BF     		nop
 7855              	.L371:
 7856              		.loc 1 2061 0 is_stmt 0 discriminator 1
 7857 0312 FFF7FEFF 		bl	cc2400_status
 7858 0316 0346     		mov	r3, r0
 7859 0318 03F00403 		and	r3, r3, #4
 7860 031c 002B     		cmp	r3, #0
 7861 031e F8D1     		bne	.L371
2062:bluetooth_rxtx.c **** 
2063:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 7862              		.loc 1 2063 0 is_stmt 1
 7863 0320 00BF     		nop
 7864              	.L372:
 7865              		.loc 1 2063 0 is_stmt 0 discriminator 1
 7866 0322 FFF7FEFF 		bl	cc2400_status
 7867 0326 0346     		mov	r3, r0
 7868 0328 03F04003 		and	r3, r3, #64
 7869 032c 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 174


 7870 032e F8D0     		beq	.L372
2064:bluetooth_rxtx.c **** 
2065:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 7871              		.loc 1 2065 0 is_stmt 1
 7872 0330 6120     		movs	r0, #97
 7873 0332 FFF7FEFF 		bl	cc2400_strobe
2066:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 7874              		.loc 1 2066 0
 7875 0336 00BF     		nop
 7876              	.L373:
 7877              		.loc 1 2066 0 is_stmt 0 discriminator 1
 7878 0338 FFF7FEFF 		bl	cc2400_status
 7879 033c 0346     		mov	r3, r0
 7880 033e 03F00403 		and	r3, r3, #4
 7881 0342 002B     		cmp	r3, #0
 7882 0344 F8D0     		beq	.L373
2067:bluetooth_rxtx.c **** 
2068:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7883              		.loc 1 2068 0 is_stmt 1
 7884 0346 174A     		ldr	r2, .L379+8
 7885 0348 164B     		ldr	r3, .L379+8
 7886 034a 1B68     		ldr	r3, [r3]
 7887 034c 23F00103 		bic	r3, r3, #1
 7888 0350 1360     		str	r3, [r2]
2069:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7889              		.loc 1 2069 0
 7890 0352 03E0     		b	.L374
 7891              	.L375:
 7892              	.LBB9:
2070:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 7893              		.loc 1 2070 0
 7894 0354 144B     		ldr	r3, .L379+12
 7895 0356 1B68     		ldr	r3, [r3]
 7896 0358 87F86B30 		strb	r3, [r7, #107]
 7897              	.L374:
 7898              	.LBE9:
2069:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7899              		.loc 1 2069 0
 7900 035c 134B     		ldr	r3, .L379+16
 7901 035e 1B68     		ldr	r3, [r3]
 7902 0360 03F00403 		and	r3, r3, #4
 7903 0364 002B     		cmp	r3, #0
 7904 0366 F5D1     		bne	.L375
2071:bluetooth_rxtx.c ****                 }
2072:bluetooth_rxtx.c **** 		dma_init_le();
 7905              		.loc 1 2072 0
 7906 0368 FFF7FEFF 		bl	dma_init_le
2073:bluetooth_rxtx.c **** 		dio_ssp_start();
 7907              		.loc 1 2073 0
 7908 036c FFF7FEFF 		bl	dio_ssp_start
2074:bluetooth_rxtx.c **** 		
2075:bluetooth_rxtx.c **** //              msleep(500);    
2076:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 7909              		.loc 1 2076 0
 7910 0370 6220     		movs	r0, #98
 7911 0372 FFF7FEFF 		bl	cc2400_strobe
2077:bluetooth_rxtx.c **** 		rx_tc = 0;
ARM GAS  /tmp/ccfQkuUX.s 			page 175


 7912              		.loc 1 2077 0
 7913 0376 0E4B     		ldr	r3, .L379+20
 7914 0378 0022     		movs	r2, #0
 7915 037a 1A60     		str	r2, [r3]
2078:bluetooth_rxtx.c **** 		rx_err = 0;
 7916              		.loc 1 2078 0
 7917 037c 0D4B     		ldr	r3, .L379+24
 7918 037e 0022     		movs	r2, #0
 7919 0380 1A60     		str	r2, [r3]
 7920              	.L355:
 7921              	.LBE7:
1985:bluetooth_rxtx.c **** 		
 7922              		.loc 1 1985 0
 7923 0382 0D4B     		ldr	r3, .L379+28
 7924 0384 1B78     		ldrb	r3, [r3]
 7925 0386 DBB2     		uxtb	r3, r3
 7926 0388 012B     		cmp	r3, #1
 7927 038a 3FF49DAE 		beq	.L376
2079:bluetooth_rxtx.c **** 	 
2080:bluetooth_rxtx.c **** 	
2081:bluetooth_rxtx.c **** 	}
2082:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 7928              		.loc 1 2082 0
 7929 038e FFF7FEFF 		bl	dio_ssp_stop
2083:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 7930              		.loc 1 2083 0
 7931 0392 FFF7FEFF 		bl	cs_trigger_disable
2084:bluetooth_rxtx.c **** }
 7932              		.loc 1 2084 0
 7933 0396 8C37     		adds	r7, r7, #140
 7934              		.cfi_def_cfa_offset 12
 7935 0398 BD46     		mov	sp, r7
 7936              		.cfi_def_cfa_register 13
 7937              		@ sp needed
 7938 039a 90BD     		pop	{r4, r7, pc}
 7939              	.L380:
 7940              		.align	2
 7941              	.L379:
 7942 039c 00000000 		.word	clkn
 7943 03a0 3CC00920 		.word	537509948
 7944 03a4 24000340 		.word	1073938468
 7945 03a8 08000340 		.word	1073938440
 7946 03ac 0C000340 		.word	1073938444
 7947 03b0 00000000 		.word	rx_tc
 7948 03b4 00000000 		.word	rx_err
 7949 03b8 00000000 		.word	requested_mode
 7950              		.cfi_endproc
 7951              	.LFE34:
 7953              		.section	.text.bt_stream_rx,"ax",%progbits
 7954              		.align	2
 7955              		.global	bt_stream_rx
 7956              		.thumb
 7957              		.thumb_func
 7959              	bt_stream_rx:
 7960              	.LFB35:
2085:bluetooth_rxtx.c **** 
2086:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccfQkuUX.s 			page 176


2087:bluetooth_rxtx.c **** 
2088:bluetooth_rxtx.c **** 
2089:bluetooth_rxtx.c **** // wpson
2090:bluetooth_rxtx.c **** void bt_stream_rx()
2091:bluetooth_rxtx.c **** {
 7961              		.loc 1 2091 0
 7962              		.cfi_startproc
 7963              		@ args = 0, pretend = 0, frame = 136
 7964              		@ frame_needed = 1, uses_anonymous_args = 0
 7965 0000 90B5     		push	{r4, r7, lr}
 7966              		.cfi_def_cfa_offset 12
 7967              		.cfi_offset 4, -12
 7968              		.cfi_offset 7, -8
 7969              		.cfi_offset 14, -4
 7970 0002 A3B0     		sub	sp, sp, #140
 7971              		.cfi_def_cfa_offset 152
 7972 0004 00AF     		add	r7, sp, #0
 7973              		.cfi_def_cfa_register 7
2092:bluetooth_rxtx.c **** //	TXLED_SET;
2093:bluetooth_rxtx.c **** 	RXLED_CLR;
 7974              		.loc 1 2093 0
 7975 0006 C04B     		ldr	r3, .L407
 7976 0008 1022     		movs	r2, #16
 7977 000a 1A60     		str	r2, [r3]
2094:bluetooth_rxtx.c **** 	int i;
2095:bluetooth_rxtx.c **** 	
2096:bluetooth_rxtx.c **** 	u8 rssi_buf[DMA_SIZE];
2097:bluetooth_rxtx.c **** 	queue_init();
 7978              		.loc 1 2097 0
 7979 000c FFF7FEFF 		bl	queue_init
2098:bluetooth_rxtx.c **** 	dio_ssp_init();
 7980              		.loc 1 2098 0
 7981 0010 FFF7FEFF 		bl	dio_ssp_init
2099:bluetooth_rxtx.c **** 	dma_init_le();
 7982              		.loc 1 2099 0
 7983 0014 FFF7FEFF 		bl	dma_init_le
2100:bluetooth_rxtx.c **** 	dio_ssp_start();
 7984              		.loc 1 2100 0
 7985 0018 FFF7FEFF 		bl	dio_ssp_start
2101:bluetooth_rxtx.c **** 	
2102:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 7986              		.loc 1 2102 0
 7987 001c 0D20     		movs	r0, #13
 7988 001e 47F6FF71 		movw	r1, #32767
 7989 0022 FFF7FEFF 		bl	cc2400_set
2103:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 7990              		.loc 1 2103 0
 7991 0026 1220     		movs	r0, #18
 7992 0028 42F62231 		movw	r1, #11042
 7993 002c FFF7FEFF 		bl	cc2400_set
2104:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 7994              		.loc 1 2104 0
 7995 0030 1420     		movs	r0, #20
 7996 0032 41F24B21 		movw	r1, #4683
 7997 0036 FFF7FEFF 		bl	cc2400_set
2105:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 7998              		.loc 1 2105 0
ARM GAS  /tmp/ccfQkuUX.s 			page 177


 7999 003a 2020     		movs	r0, #32
 8000 003c 40F26151 		movw	r1, #1377
 8001 0040 FFF7FEFF 		bl	cc2400_set
2106:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 8002              		.loc 1 2106 0
 8003 0044 0320     		movs	r0, #3
 8004 0046 4021     		movs	r1, #64
 8005 0048 FFF7FEFF 		bl	cc2400_set
2107:bluetooth_rxtx.c **** 
2108:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
2109:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
2110:bluetooth_rxtx.c **** 	
2111:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 8006              		.loc 1 2111 0
 8007 004c AF48     		ldr	r0, .L407+4
 8008 004e FFF7FEFF 		bl	rbit
 8009 0052 0346     		mov	r3, r0
 8010 0054 9BB2     		uxth	r3, r3
 8011 0056 2C20     		movs	r0, #44
 8012 0058 1946     		mov	r1, r3
 8013 005a FFF7FEFF 		bl	cc2400_set
2112:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 8014              		.loc 1 2112 0
 8015 005e AB48     		ldr	r0, .L407+4
 8016 0060 FFF7FEFF 		bl	rbit
 8017 0064 0346     		mov	r3, r0
 8018 0066 1B0C     		lsrs	r3, r3, #16
 8019 0068 9BB2     		uxth	r3, r3
 8020 006a 2D20     		movs	r0, #45
 8021 006c 1946     		mov	r1, r3
 8022 006e FFF7FEFF 		bl	cc2400_set
2113:bluetooth_rxtx.c **** 	
2114:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2115:bluetooth_rxtx.c **** 	PAEN_SET;
 8023              		.loc 1 2115 0
 8024 0072 A74B     		ldr	r3, .L407+8
 8025 0074 8022     		movs	r2, #128
 8026 0076 1A60     		str	r2, [r3]
2116:bluetooth_rxtx.c **** //	HGM_SET;
2117:bluetooth_rxtx.c **** #endif
2118:bluetooth_rxtx.c **** 
2119:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 8027              		.loc 1 2119 0
 8028 0078 00BF     		nop
 8029              	.L382:
 8030              		.loc 1 2119 0 is_stmt 0 discriminator 1
 8031 007a FFF7FEFF 		bl	cc2400_status
 8032 007e 0346     		mov	r3, r0
 8033 0080 03F04003 		and	r3, r3, #64
 8034 0084 002B     		cmp	r3, #0
 8035 0086 F8D0     		beq	.L382
2120:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 8036              		.loc 1 2120 0 is_stmt 1
 8037 0088 00BF     		nop
 8038              	.L383:
 8039              		.loc 1 2120 0 is_stmt 0 discriminator 1
 8040 008a FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/ccfQkuUX.s 			page 178


 8041 008e 0346     		mov	r3, r0
 8042 0090 03F00403 		and	r3, r3, #4
 8043 0094 002B     		cmp	r3, #0
 8044 0096 F8D1     		bne	.L383
2121:bluetooth_rxtx.c **** 
2122:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 8045              		.loc 1 2122 0 is_stmt 1
 8046 0098 9E4B     		ldr	r3, .L407+12
 8047 009a 1B88     		ldrh	r3, [r3]	@ movhi
 8048 009c 9BB2     		uxth	r3, r3
 8049 009e 013B     		subs	r3, r3, #1
 8050 00a0 9BB2     		uxth	r3, r3
 8051 00a2 0220     		movs	r0, #2
 8052 00a4 1946     		mov	r1, r3
 8053 00a6 FFF7FEFF 		bl	cc2400_set
2123:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 8054              		.loc 1 2123 0
 8055 00aa 6120     		movs	r0, #97
 8056 00ac FFF7FEFF 		bl	cc2400_strobe
2124:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 8057              		.loc 1 2124 0
 8058 00b0 00BF     		nop
 8059              	.L384:
 8060              		.loc 1 2124 0 is_stmt 0 discriminator 1
 8061 00b2 FFF7FEFF 		bl	cc2400_status
 8062 00b6 0346     		mov	r3, r0
 8063 00b8 03F00403 		and	r3, r3, #4
 8064 00bc 002B     		cmp	r3, #0
 8065 00be F8D0     		beq	.L384
2125:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 8066              		.loc 1 2125 0 is_stmt 1
 8067 00c0 6220     		movs	r0, #98
 8068 00c2 FFF7FEFF 		bl	cc2400_strobe
2126:bluetooth_rxtx.c **** 	
2127:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 8069              		.loc 1 2127 0
 8070 00c6 56E1     		b	.L385
 8071              	.L406:
 8072              	.LBB10:
2128:bluetooth_rxtx.c **** 		
2129:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));
 8073              		.loc 1 2129 0
 8074 00c8 00BF     		nop
 8075              	.L386:
 8076              		.loc 1 2129 0 is_stmt 0 discriminator 1
 8077 00ca FFF7FEFF 		bl	cc2400_status
 8078 00ce 0346     		mov	r3, r0
 8079 00d0 03F01003 		and	r3, r3, #16
 8080 00d4 002B     		cmp	r3, #0
 8081 00d6 F8D0     		beq	.L386
2130:bluetooth_rxtx.c **** /*		int out;
2131:bluetooth_rxtx.c ****                 u8 rssi = cc2400_get(RSSI) >> 8;
2132:bluetooth_rxtx.c ****                 if (rssi >= 128)
2133:bluetooth_rxtx.c ****                         out = rssi - 256;
2134:bluetooth_rxtx.c ****                 else
2135:bluetooth_rxtx.c ****                         out = rssi;
2136:bluetooth_rxtx.c ****                 if (out < 0)
ARM GAS  /tmp/ccfQkuUX.s 			page 179


2137:bluetooth_rxtx.c **** 		  goto rx_flush;
2138:bluetooth_rxtx.c **** */
2139:bluetooth_rxtx.c **** 		rssi_sum = 0;
 8082              		.loc 1 2139 0 is_stmt 1
 8083 00d8 8F4B     		ldr	r3, .L407+16
 8084 00da 0022     		movs	r2, #0
 8085 00dc 1A60     		str	r2, [r3]
2140:bluetooth_rxtx.c **** 		rssi_count = 5;
 8086              		.loc 1 2140 0
 8087 00de 8F4B     		ldr	r3, .L407+20
 8088 00e0 0522     		movs	r2, #5
 8089 00e2 1A70     		strb	r2, [r3]
2141:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8090              		.loc 1 2141 0
 8091 00e4 0023     		movs	r3, #0
 8092 00e6 C7F88430 		str	r3, [r7, #132]
 8093 00ea 11E0     		b	.L387
 8094              	.L388:
2142:bluetooth_rxtx.c **** 		{
2143:bluetooth_rxtx.c **** 			rssi_sum += (int8_t)(cc2400_get(RSSI) >> 8);
 8095              		.loc 1 2143 0 discriminator 3
 8096 00ec 0620     		movs	r0, #6
 8097 00ee FFF7FEFF 		bl	cc2400_get
 8098 00f2 0346     		mov	r3, r0
 8099 00f4 1B0A     		lsrs	r3, r3, #8
 8100 00f6 9BB2     		uxth	r3, r3
 8101 00f8 DBB2     		uxtb	r3, r3
 8102 00fa 5AB2     		sxtb	r2, r3
 8103 00fc 864B     		ldr	r3, .L407+16
 8104 00fe 1B68     		ldr	r3, [r3]
 8105 0100 1344     		add	r3, r3, r2
 8106 0102 854A     		ldr	r2, .L407+16
 8107 0104 1360     		str	r3, [r2]
2141:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8108              		.loc 1 2141 0 discriminator 3
 8109 0106 D7F88430 		ldr	r3, [r7, #132]
 8110 010a 0133     		adds	r3, r3, #1
 8111 010c C7F88430 		str	r3, [r7, #132]
 8112              	.L387:
2141:bluetooth_rxtx.c **** 		for (i = 0; i < rssi_count; i++)
 8113              		.loc 1 2141 0 is_stmt 0 discriminator 1
 8114 0110 824B     		ldr	r3, .L407+20
 8115 0112 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8116 0114 1A46     		mov	r2, r3
 8117 0116 D7F88430 		ldr	r3, [r7, #132]
 8118 011a 9A42     		cmp	r2, r3
 8119 011c E6DC     		bgt	.L388
2144:bluetooth_rxtx.c **** 		}
2145:bluetooth_rxtx.c **** 	
2146:bluetooth_rxtx.c **** 		while (!rx_tc);
 8120              		.loc 1 2146 0 is_stmt 1
 8121 011e 00BF     		nop
 8122              	.L389:
 8123              		.loc 1 2146 0 is_stmt 0 discriminator 1
 8124 0120 7F4B     		ldr	r3, .L407+24
 8125 0122 1B68     		ldr	r3, [r3]
 8126 0124 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 180


 8127 0126 FBD0     		beq	.L389
2147:bluetooth_rxtx.c **** 	
2148:bluetooth_rxtx.c **** 		RXLED_SET;
 8128              		.loc 1 2148 0 is_stmt 1
 8129 0128 7E4B     		ldr	r3, .L407+28
 8130 012a 1022     		movs	r2, #16
 8131 012c 1A60     		str	r2, [r3]
2149:bluetooth_rxtx.c **** 		if (rx_err) {
 8132              		.loc 1 2149 0
 8133 012e 7E4B     		ldr	r3, .L407+32
 8134 0130 1B68     		ldr	r3, [r3]
 8135 0132 002B     		cmp	r3, #0
 8136 0134 07D0     		beq	.L390
2150:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
 8137              		.loc 1 2150 0
 8138 0136 7D4B     		ldr	r3, .L407+36
 8139 0138 1B78     		ldrb	r3, [r3]
 8140 013a DBB2     		uxtb	r3, r3
 8141 013c 43F00203 		orr	r3, r3, #2
 8142 0140 DAB2     		uxtb	r2, r3
 8143 0142 7A4B     		ldr	r3, .L407+36
 8144 0144 1A70     		strb	r2, [r3]
 8145              	.L390:
2151:bluetooth_rxtx.c **** 		}	
2152:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 8146              		.loc 1 2152 0
 8147 0146 764B     		ldr	r3, .L407+24
 8148 0148 1B68     		ldr	r3, [r3]
 8149 014a 012B     		cmp	r3, #1
 8150 014c 07D9     		bls	.L391
2153:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 8151              		.loc 1 2153 0
 8152 014e 774B     		ldr	r3, .L407+36
 8153 0150 1B78     		ldrb	r3, [r3]
 8154 0152 DBB2     		uxtb	r3, r3
 8155 0154 43F00103 		orr	r3, r3, #1
 8156 0158 DAB2     		uxtb	r2, r3
 8157 015a 744B     		ldr	r3, .L407+36
 8158 015c 1A70     		strb	r2, [r3]
 8159              	.L391:
2154:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2155:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 8160              		.loc 1 2155 0
 8161 015e 3B1D     		adds	r3, r7, #4
 8162 0160 C7F88030 		str	r3, [r7, #128]
2156:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 8163              		.loc 1 2156 0
 8164 0164 724B     		ldr	r3, .L407+40
 8165 0166 1B68     		ldr	r3, [r3]
 8166 0168 7B60     		str	r3, [r7, #4]
2157:bluetooth_rxtx.c **** 
2158:bluetooth_rxtx.c ****                 while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
 8167              		.loc 1 2158 0
 8168 016a 00BF     		nop
 8169              	.L393:
 8170              		.loc 1 2158 0 is_stmt 0 discriminator 2
 8171 016c 714B     		ldr	r3, .L407+44
ARM GAS  /tmp/ccfQkuUX.s 			page 181


 8172 016e 1B68     		ldr	r3, [r3]
 8173 0170 03F00103 		and	r3, r3, #1
 8174 0174 002B     		cmp	r3, #0
 8175 0176 03D0     		beq	.L392
 8176              		.loc 1 2158 0 discriminator 1
 8177 0178 6B4B     		ldr	r3, .L407+32
 8178 017a 1B68     		ldr	r3, [r3]
 8179 017c 002B     		cmp	r3, #0
 8180 017e F5D0     		beq	.L393
 8181              	.L392:
2159:bluetooth_rxtx.c ****                 
2160:bluetooth_rxtx.c **** 			
2161:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8182              		.loc 1 2161 0 is_stmt 1
 8183 0180 6D4A     		ldr	r2, .L407+48
 8184 0182 6D4B     		ldr	r3, .L407+48
 8185 0184 1B68     		ldr	r3, [r3]
 8186 0186 23F00103 		bic	r3, r3, #1
 8187 018a 1360     		str	r3, [r2]
2162:bluetooth_rxtx.c **** 	
2163:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 8188              		.loc 1 2163 0
 8189 018c 614B     		ldr	r3, .L407+12
 8190 018e 1B88     		ldrh	r3, [r3]	@ movhi
 8191 0190 9BB2     		uxth	r3, r3
 8192 0192 DBB2     		uxtb	r3, r3
 8193 0194 623B     		subs	r3, r3, #98
 8194 0196 DBB2     		uxtb	r3, r3
 8195 0198 1846     		mov	r0, r3
 8196 019a FFF7FEFF 		bl	btle_channel_index
 8197 019e 0346     		mov	r3, r0
 8198 01a0 1A46     		mov	r2, r3
 8199 01a2 1346     		mov	r3, r2
 8200 01a4 5B00     		lsls	r3, r3, #1
 8201 01a6 1344     		add	r3, r3, r2
 8202 01a8 1B01     		lsls	r3, r3, #4
 8203 01aa 644A     		ldr	r2, .L407+52
 8204 01ac 1344     		add	r3, r3, r2
 8205 01ae FB67     		str	r3, [r7, #124]
2164:bluetooth_rxtx.c **** 		for (i = 0; i < 44; i += 4) {
 8206              		.loc 1 2164 0
 8207 01b0 0023     		movs	r3, #0
 8208 01b2 C7F88430 		str	r3, [r7, #132]
 8209 01b6 3CE0     		b	.L394
 8210              	.L397:
 8211              	.LBB11:
2165:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8212              		.loc 1 2165 0 discriminator 3
 8213 01b8 614A     		ldr	r2, .L407+56
 8214 01ba D7F88430 		ldr	r3, [r7, #132]
 8215 01be 1344     		add	r3, r3, r2
 8216 01c0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8217 01c2 1A06     		lsls	r2, r3, #24
2166:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8218              		.loc 1 2166 0 discriminator 3
 8219 01c4 D7F88430 		ldr	r3, [r7, #132]
 8220 01c8 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccfQkuUX.s 			page 182


 8221 01ca 5D49     		ldr	r1, .L407+56
 8222 01cc CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8223 01ce 1B04     		lsls	r3, r3, #16
 8224 01d0 1A43     		orrs	r2, r2, r3
2167:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
 8225              		.loc 1 2167 0 discriminator 3
 8226 01d2 D7F88430 		ldr	r3, [r7, #132]
 8227 01d6 0233     		adds	r3, r3, #2
 8228 01d8 5949     		ldr	r1, .L407+56
 8229 01da CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 8230 01dc 1B02     		lsls	r3, r3, #8
 8231 01de 1343     		orrs	r3, r3, r2
2168:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
 8232              		.loc 1 2168 0 discriminator 3
 8233 01e0 D7F88420 		ldr	r2, [r7, #132]
 8234 01e4 0332     		adds	r2, r2, #3
 8235 01e6 5649     		ldr	r1, .L407+56
 8236 01e8 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 8237 01ea 1343     		orrs	r3, r3, r2
2165:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
 8238              		.loc 1 2165 0 discriminator 3
 8239 01ec BB67     		str	r3, [r7, #120]
2169:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
 8240              		.loc 1 2169 0 discriminator 3
 8241 01ee D7F88430 		ldr	r3, [r7, #132]
 8242 01f2 002B     		cmp	r3, #0
 8243 01f4 00DA     		bge	.L395
 8244 01f6 0333     		adds	r3, r3, #3
 8245              	.L395:
 8246 01f8 9B10     		asrs	r3, r3, #2
 8247 01fa 5C1C     		adds	r4, r3, #1
 8248 01fc B86F     		ldr	r0, [r7, #120]
 8249 01fe FFF7FEFF 		bl	rbit
 8250 0202 0146     		mov	r1, r0
 8251 0204 D7F88430 		ldr	r3, [r7, #132]
 8252 0208 002B     		cmp	r3, #0
 8253 020a 00DA     		bge	.L396
 8254 020c 0333     		adds	r3, r3, #3
 8255              	.L396:
 8256 020e 9B10     		asrs	r3, r3, #2
 8257 0210 9B00     		lsls	r3, r3, #2
 8258 0212 FA6F     		ldr	r2, [r7, #124]
 8259 0214 1344     		add	r3, r3, r2
 8260 0216 1B68     		ldr	r3, [r3]
 8261 0218 81EA0302 		eor	r2, r1, r3
 8262 021c A300     		lsls	r3, r4, #2
 8263 021e 07F18801 		add	r1, r7, #136
 8264 0222 0B44     		add	r3, r3, r1
 8265 0224 43F8842C 		str	r2, [r3, #-132]
 8266              	.LBE11:
2164:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 8267              		.loc 1 2164 0 discriminator 3
 8268 0228 D7F88430 		ldr	r3, [r7, #132]
 8269 022c 0433     		adds	r3, r3, #4
 8270 022e C7F88430 		str	r3, [r7, #132]
 8271              	.L394:
2164:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
ARM GAS  /tmp/ccfQkuUX.s 			page 183


 8272              		.loc 1 2164 0 is_stmt 0 discriminator 1
 8273 0232 D7F88430 		ldr	r3, [r7, #132]
 8274 0236 2B2B     		cmp	r3, #43
 8275 0238 BEDD     		ble	.L397
2170:bluetooth_rxtx.c **** 		}
2171:bluetooth_rxtx.c **** 
2172:bluetooth_rxtx.c **** /*		for (i = 0; i < 36; i += 4) {
2173:bluetooth_rxtx.c **** 			uint32_t v = eddystone[i+0] << 24
2174:bluetooth_rxtx.c ****                                           | eddystone[i+1] << 16
2175:bluetooth_rxtx.c ****                                       | eddystone[i+2] << 8
2176:bluetooth_rxtx.c ****                                           | eddystone[i+3] << 0;
2177:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
2178:bluetooth_rxtx.c **** 		}
2179:bluetooth_rxtx.c **** */
2180:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 8276              		.loc 1 2180 0 is_stmt 1
 8277 023a D7F88030 		ldr	r3, [r7, #128]
 8278 023e 0533     		adds	r3, r3, #5
 8279 0240 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8280 0242 03F03F03 		and	r3, r3, #63
 8281 0246 0233     		adds	r3, r3, #2
 8282 0248 7B67     		str	r3, [r7, #116]
2181:bluetooth_rxtx.c **** 		
2182:bluetooth_rxtx.c **** 		if (len > 39)
 8283              		.loc 1 2182 0
 8284 024a 7B6F     		ldr	r3, [r7, #116]
 8285 024c 272B     		cmp	r3, #39
 8286 024e 00D9     		bls	.L398
2183:bluetooth_rxtx.c **** 			goto rx_flush;
 8287              		.loc 1 2183 0
 8288 0250 34E0     		b	.L399
 8289              	.L398:
2184:bluetooth_rxtx.c **** 
2185:bluetooth_rxtx.c **** 		u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 8290              		.loc 1 2185 0
 8291 0252 374B     		ldr	r3, .L407+40
 8292 0254 D968     		ldr	r1, [r3, #12]
 8293 0256 D7F88030 		ldr	r3, [r7, #128]
 8294 025a 1A1D     		adds	r2, r3, #4
 8295 025c 7B6F     		ldr	r3, [r7, #116]
 8296 025e 0846     		mov	r0, r1
 8297 0260 1146     		mov	r1, r2
 8298 0262 1A46     		mov	r2, r3
 8299 0264 FFF7FEFF 		bl	btle_crcgen_lut
 8300 0268 3867     		str	r0, [r7, #112]
2186:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 8301              		.loc 1 2186 0
 8302 026a 7B6F     		ldr	r3, [r7, #116]
 8303 026c 0633     		adds	r3, r3, #6
 8304 026e D7F88020 		ldr	r2, [r7, #128]
 8305 0272 1344     		add	r3, r3, r2
 8306 0274 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8307 0276 1A04     		lsls	r2, r3, #16
2187:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
 8308              		.loc 1 2187 0
 8309 0278 7B6F     		ldr	r3, [r7, #116]
 8310 027a 0533     		adds	r3, r3, #5
ARM GAS  /tmp/ccfQkuUX.s 			page 184


 8311 027c D7F88010 		ldr	r1, [r7, #128]
 8312 0280 0B44     		add	r3, r3, r1
 8313 0282 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8314 0284 1B02     		lsls	r3, r3, #8
 8315 0286 1343     		orrs	r3, r3, r2
2188:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
 8316              		.loc 1 2188 0
 8317 0288 7A6F     		ldr	r2, [r7, #116]
 8318 028a 0432     		adds	r2, r2, #4
 8319 028c D7F88010 		ldr	r1, [r7, #128]
 8320 0290 0A44     		add	r2, r2, r1
 8321 0292 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8322 0294 1343     		orrs	r3, r3, r2
2186:bluetooth_rxtx.c **** 		u32 wire_crc = (p[4+len+2] << 16)
 8323              		.loc 1 2186 0
 8324 0296 FB66     		str	r3, [r7, #108]
2189:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
 8325              		.loc 1 2189 0
 8326 0298 3A6F     		ldr	r2, [r7, #112]
 8327 029a FB6E     		ldr	r3, [r7, #108]
 8328 029c 9A42     		cmp	r2, r3
 8329 029e 00D0     		beq	.L400
2190:bluetooth_rxtx.c ****                         goto rx_flush;
 8330              		.loc 1 2190 0
 8331 02a0 0CE0     		b	.L399
 8332              	.L400:
2191:bluetooth_rxtx.c **** 
2192:bluetooth_rxtx.c **** 
2193:bluetooth_rxtx.c **** 		enqueue (BR_PACKET, (uint8_t*)packet);
 8333              		.loc 1 2193 0
 8334 02a2 3B1D     		adds	r3, r7, #4
 8335 02a4 0020     		movs	r0, #0
 8336 02a6 1946     		mov	r1, r3
 8337 02a8 FFF7FEFF 		bl	enqueue
2194:bluetooth_rxtx.c **** //		enqueue (BR_PACKET, (uint8_t*)rxbuf1);
2195:bluetooth_rxtx.c **** 		handle_usb(clkn);
 8338              		.loc 1 2195 0
 8339 02ac 254B     		ldr	r3, .L407+60
 8340 02ae 1B68     		ldr	r3, [r3]
 8341 02b0 1846     		mov	r0, r3
 8342 02b2 FFF7FEFF 		bl	handle_usb
2196:bluetooth_rxtx.c **** //		enqueue (MESSAGE, rssi_buf);
2197:bluetooth_rxtx.c **** //		handle_usb(clkn);
2198:bluetooth_rxtx.c **** 		RXLED_CLR;
 8343              		.loc 1 2198 0
 8344 02b6 144B     		ldr	r3, .L407
 8345 02b8 1022     		movs	r2, #16
 8346 02ba 1A60     		str	r2, [r3]
 8347              	.L399:
2199:bluetooth_rxtx.c **** 	       
2200:bluetooth_rxtx.c **** 	rx_flush:
2201:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 8348              		.loc 1 2201 0
 8349 02bc 6420     		movs	r0, #100
 8350 02be FFF7FEFF 		bl	cc2400_strobe
2202:bluetooth_rxtx.c ****                 while ((cc2400_status () & FS_LOCK));
 8351              		.loc 1 2202 0
ARM GAS  /tmp/ccfQkuUX.s 			page 185


 8352 02c2 00BF     		nop
 8353              	.L401:
 8354              		.loc 1 2202 0 is_stmt 0 discriminator 1
 8355 02c4 FFF7FEFF 		bl	cc2400_status
 8356 02c8 0346     		mov	r3, r0
 8357 02ca 03F00403 		and	r3, r3, #4
 8358 02ce 002B     		cmp	r3, #0
 8359 02d0 F8D1     		bne	.L401
2203:bluetooth_rxtx.c **** 
2204:bluetooth_rxtx.c ****                 while (!(cc2400_status () & XOSC16M_STABLE));
 8360              		.loc 1 2204 0 is_stmt 1
 8361 02d2 00BF     		nop
 8362              	.L402:
 8363              		.loc 1 2204 0 is_stmt 0 discriminator 1
 8364 02d4 FFF7FEFF 		bl	cc2400_status
 8365 02d8 0346     		mov	r3, r0
 8366 02da 03F04003 		and	r3, r3, #64
 8367 02de 002B     		cmp	r3, #0
 8368 02e0 F8D0     		beq	.L402
2205:bluetooth_rxtx.c **** 
2206:bluetooth_rxtx.c ****                 cc2400_strobe (SFSON);
 8369              		.loc 1 2206 0 is_stmt 1
 8370 02e2 6120     		movs	r0, #97
 8371 02e4 FFF7FEFF 		bl	cc2400_strobe
2207:bluetooth_rxtx.c ****                 while (!(cc2400_status () & FS_LOCK));
 8372              		.loc 1 2207 0
 8373 02e8 00BF     		nop
 8374              	.L403:
 8375              		.loc 1 2207 0 is_stmt 0 discriminator 1
 8376 02ea FFF7FEFF 		bl	cc2400_status
 8377 02ee 0346     		mov	r3, r0
 8378 02f0 03F00403 		and	r3, r3, #4
 8379 02f4 002B     		cmp	r3, #0
 8380 02f6 F8D0     		beq	.L403
2208:bluetooth_rxtx.c **** 
2209:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 8381              		.loc 1 2209 0 is_stmt 1
 8382 02f8 0F4A     		ldr	r2, .L407+48
 8383 02fa 0F4B     		ldr	r3, .L407+48
 8384 02fc 1B68     		ldr	r3, [r3]
 8385 02fe 23F00103 		bic	r3, r3, #1
 8386 0302 1360     		str	r3, [r2]
2210:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8387              		.loc 1 2210 0
 8388 0304 24E0     		b	.L404
 8389              	.L408:
 8390 0306 00BF     		.align	2
 8391              	.L407:
 8392 0308 3CC00920 		.word	537509948
 8393 030c D6BE898E 		.word	-1903575338
 8394 0310 58C00920 		.word	537509976
 8395 0314 00000000 		.word	channel
 8396 0318 00000000 		.word	rssi_sum
 8397 031c 00000000 		.word	rssi_count
 8398 0320 00000000 		.word	rx_tc
 8399 0324 38C00920 		.word	537509944
 8400 0328 00000000 		.word	rx_err
ARM GAS  /tmp/ccfQkuUX.s 			page 186


 8401 032c 00000000 		.word	status
 8402 0330 00000000 		.word	le
 8403 0334 10410050 		.word	1342193936
 8404 0338 24000340 		.word	1073938468
 8405 033c 10010000 		.word	whitening_word
 8406 0340 00000000 		.word	rxbuf1
 8407 0344 00000000 		.word	clkn
 8408              	.L405:
 8409              	.LBB12:
2211:bluetooth_rxtx.c ****                         u8 tmp = (u8)DIO_SSP_DR;
 8410              		.loc 1 2211 0
 8411 0348 114B     		ldr	r3, .L409
 8412 034a 1B68     		ldr	r3, [r3]
 8413 034c 87F86B30 		strb	r3, [r7, #107]
 8414              	.L404:
 8415              	.LBE12:
2210:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 8416              		.loc 1 2210 0
 8417 0350 104B     		ldr	r3, .L409+4
 8418 0352 1B68     		ldr	r3, [r3]
 8419 0354 03F00403 		and	r3, r3, #4
 8420 0358 002B     		cmp	r3, #0
 8421 035a F5D1     		bne	.L405
2212:bluetooth_rxtx.c ****                 }
2213:bluetooth_rxtx.c **** 		dma_init_le();
 8422              		.loc 1 2213 0
 8423 035c FFF7FEFF 		bl	dma_init_le
2214:bluetooth_rxtx.c **** 		dio_ssp_start();
 8424              		.loc 1 2214 0
 8425 0360 FFF7FEFF 		bl	dio_ssp_start
2215:bluetooth_rxtx.c **** 		
2216:bluetooth_rxtx.c **** //              msleep(500);    
2217:bluetooth_rxtx.c ****                 cc2400_strobe (SRX);
 8426              		.loc 1 2217 0
 8427 0364 6220     		movs	r0, #98
 8428 0366 FFF7FEFF 		bl	cc2400_strobe
2218:bluetooth_rxtx.c **** 		rx_tc = 0;
 8429              		.loc 1 2218 0
 8430 036a 0B4B     		ldr	r3, .L409+8
 8431 036c 0022     		movs	r2, #0
 8432 036e 1A60     		str	r2, [r3]
2219:bluetooth_rxtx.c **** 		rx_err = 0;
 8433              		.loc 1 2219 0
 8434 0370 0A4B     		ldr	r3, .L409+12
 8435 0372 0022     		movs	r2, #0
 8436 0374 1A60     		str	r2, [r3]
 8437              	.L385:
 8438              	.LBE10:
2127:bluetooth_rxtx.c **** 		
 8439              		.loc 1 2127 0
 8440 0376 0A4B     		ldr	r3, .L409+16
 8441 0378 1B78     		ldrb	r3, [r3]
 8442 037a DBB2     		uxtb	r3, r3
 8443 037c 012B     		cmp	r3, #1
 8444 037e 3FF4A3AE 		beq	.L406
2220:bluetooth_rxtx.c **** 	 
2221:bluetooth_rxtx.c **** 	
ARM GAS  /tmp/ccfQkuUX.s 			page 187


2222:bluetooth_rxtx.c **** 	}
2223:bluetooth_rxtx.c **** 	dio_ssp_stop ();
 8445              		.loc 1 2223 0
 8446 0382 FFF7FEFF 		bl	dio_ssp_stop
2224:bluetooth_rxtx.c **** 	cs_trigger_disable ();
 8447              		.loc 1 2224 0
 8448 0386 FFF7FEFF 		bl	cs_trigger_disable
2225:bluetooth_rxtx.c **** }
 8449              		.loc 1 2225 0
 8450 038a 8C37     		adds	r7, r7, #140
 8451              		.cfi_def_cfa_offset 12
 8452 038c BD46     		mov	sp, r7
 8453              		.cfi_def_cfa_register 13
 8454              		@ sp needed
 8455 038e 90BD     		pop	{r4, r7, pc}
 8456              	.L410:
 8457              		.align	2
 8458              	.L409:
 8459 0390 08000340 		.word	1073938440
 8460 0394 0C000340 		.word	1073938444
 8461 0398 00000000 		.word	rx_tc
 8462 039c 00000000 		.word	rx_err
 8463 03a0 00000000 		.word	requested_mode
 8464              		.cfi_endproc
 8465              	.LFE35:
 8467              		.section	.text.le_set_access_address,"ax",%progbits
 8468              		.align	2
 8469              		.thumb
 8470              		.thumb_func
 8472              	le_set_access_address:
 8473              	.LFB36:
2226:bluetooth_rxtx.c **** 
2227:bluetooth_rxtx.c **** 
2228:bluetooth_rxtx.c **** 
2229:bluetooth_rxtx.c **** /* set LE access address */
2230:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 8474              		.loc 1 2230 0
 8475              		.cfi_startproc
 8476              		@ args = 0, pretend = 0, frame = 16
 8477              		@ frame_needed = 1, uses_anonymous_args = 0
 8478 0000 80B5     		push	{r7, lr}
 8479              		.cfi_def_cfa_offset 8
 8480              		.cfi_offset 7, -8
 8481              		.cfi_offset 14, -4
 8482 0002 84B0     		sub	sp, sp, #16
 8483              		.cfi_def_cfa_offset 24
 8484 0004 00AF     		add	r7, sp, #0
 8485              		.cfi_def_cfa_register 7
 8486 0006 7860     		str	r0, [r7, #4]
2231:bluetooth_rxtx.c **** 	u32 aa_rev;
2232:bluetooth_rxtx.c **** 
2233:bluetooth_rxtx.c **** 	le.access_address = aa;
 8487              		.loc 1 2233 0
 8488 0008 094A     		ldr	r2, .L412
 8489 000a 7B68     		ldr	r3, [r7, #4]
 8490 000c 1360     		str	r3, [r2]
2234:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
ARM GAS  /tmp/ccfQkuUX.s 			page 188


 8491              		.loc 1 2234 0
 8492 000e 7868     		ldr	r0, [r7, #4]
 8493 0010 FFF7FEFF 		bl	rbit
 8494 0014 F860     		str	r0, [r7, #12]
2235:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 8495              		.loc 1 2235 0
 8496 0016 FB68     		ldr	r3, [r7, #12]
 8497 0018 9AB2     		uxth	r2, r3
 8498 001a 054B     		ldr	r3, .L412
 8499 001c DA80     		strh	r2, [r3, #6]	@ movhi
2236:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 8500              		.loc 1 2236 0
 8501 001e FB68     		ldr	r3, [r7, #12]
 8502 0020 1B0C     		lsrs	r3, r3, #16
 8503 0022 9AB2     		uxth	r2, r3
 8504 0024 024B     		ldr	r3, .L412
 8505 0026 9A80     		strh	r2, [r3, #4]	@ movhi
2237:bluetooth_rxtx.c **** }
 8506              		.loc 1 2237 0
 8507 0028 1037     		adds	r7, r7, #16
 8508              		.cfi_def_cfa_offset 8
 8509 002a BD46     		mov	sp, r7
 8510              		.cfi_def_cfa_register 13
 8511              		@ sp needed
 8512 002c 80BD     		pop	{r7, pc}
 8513              	.L413:
 8514 002e 00BF     		.align	2
 8515              	.L412:
 8516 0030 00000000 		.word	le
 8517              		.cfi_endproc
 8518              	.LFE36:
 8520              		.section	.text.reset_le,"ax",%progbits
 8521              		.align	2
 8522              		.global	reset_le
 8523              		.thumb
 8524              		.thumb_func
 8526              	reset_le:
 8527              	.LFB37:
2238:bluetooth_rxtx.c **** 
2239:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
2240:bluetooth_rxtx.c **** void reset_le() {
 8528              		.loc 1 2240 0
 8529              		.cfi_startproc
 8530              		@ args = 0, pretend = 0, frame = 0
 8531              		@ frame_needed = 1, uses_anonymous_args = 0
 8532 0000 80B5     		push	{r7, lr}
 8533              		.cfi_def_cfa_offset 8
 8534              		.cfi_offset 7, -8
 8535              		.cfi_offset 14, -4
 8536 0002 00AF     		add	r7, sp, #0
 8537              		.cfi_def_cfa_register 7
2241:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 8538              		.loc 1 2241 0
 8539 0004 1F48     		ldr	r0, .L415
 8540 0006 FFF7FEFF 		bl	le_set_access_address
2242:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 8541              		.loc 1 2242 0
ARM GAS  /tmp/ccfQkuUX.s 			page 189


 8542 000a 1F4B     		ldr	r3, .L415+4
 8543 000c 1F4A     		ldr	r2, .L415+8
 8544 000e 9A60     		str	r2, [r3, #8]
2243:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 8545              		.loc 1 2243 0
 8546 0010 1D4B     		ldr	r3, .L415+4
 8547 0012 1F4A     		ldr	r2, .L415+12
 8548 0014 DA60     		str	r2, [r3, #12]
2244:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 8549              		.loc 1 2244 0
 8550 0016 1C4B     		ldr	r3, .L415+4
 8551 0018 0122     		movs	r2, #1
 8552 001a 1A61     		str	r2, [r3, #16]
2245:bluetooth_rxtx.c **** 	le.last_packet = 0;
 8553              		.loc 1 2245 0
 8554 001c 1A4B     		ldr	r3, .L415+4
 8555 001e 0022     		movs	r2, #0
 8556 0020 1A64     		str	r2, [r3, #64]
2246:bluetooth_rxtx.c **** 
2247:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 8557              		.loc 1 2247 0
 8558 0022 194B     		ldr	r3, .L415+4
 8559 0024 0022     		movs	r2, #0
 8560 0026 1A75     		strb	r2, [r3, #20]
2248:bluetooth_rxtx.c **** 
2249:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 8561              		.loc 1 2249 0
 8562 0028 174B     		ldr	r3, .L415+4
 8563 002a 0022     		movs	r2, #0
 8564 002c 5A75     		strb	r2, [r3, #21]
2250:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 8565              		.loc 1 2250 0
 8566 002e 164B     		ldr	r3, .L415+4
 8567 0030 0022     		movs	r2, #0
 8568 0032 9A75     		strb	r2, [r3, #22]
2251:bluetooth_rxtx.c **** 
2252:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 8569              		.loc 1 2252 0
 8570 0034 144B     		ldr	r3, .L415+4
 8571 0036 0022     		movs	r2, #0
 8572 0038 9A61     		str	r2, [r3, #24]
2253:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 8573              		.loc 1 2253 0
 8574 003a 134B     		ldr	r3, .L415+4
 8575 003c 0022     		movs	r2, #0
 8576 003e 9A83     		strh	r2, [r3, #28]	@ movhi
2254:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 8577              		.loc 1 2254 0
 8578 0040 114B     		ldr	r3, .L415+4
 8579 0042 0022     		movs	r2, #0
 8580 0044 DA83     		strh	r2, [r3, #30]	@ movhi
2255:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 8581              		.loc 1 2255 0
 8582 0046 104B     		ldr	r3, .L415+4
 8583 0048 0022     		movs	r2, #0
 8584 004a DA83     		strh	r2, [r3, #30]	@ movhi
2256:bluetooth_rxtx.c **** 	le.conn_count = 0;
ARM GAS  /tmp/ccfQkuUX.s 			page 190


 8585              		.loc 1 2256 0
 8586 004c 0E4B     		ldr	r3, .L415+4
 8587 004e 0022     		movs	r2, #0
 8588 0050 1A84     		strh	r2, [r3, #32]	@ movhi
2257:bluetooth_rxtx.c **** 
2258:bluetooth_rxtx.c **** 	le.win_size = 0;
 8589              		.loc 1 2258 0
 8590 0052 0D4B     		ldr	r3, .L415+4
 8591 0054 0022     		movs	r2, #0
 8592 0056 83F82220 		strb	r2, [r3, #34]
2259:bluetooth_rxtx.c **** 	le.win_offset = 0;
 8593              		.loc 1 2259 0
 8594 005a 0B4B     		ldr	r3, .L415+4
 8595 005c 0022     		movs	r2, #0
 8596 005e 9A84     		strh	r2, [r3, #36]	@ movhi
2260:bluetooth_rxtx.c **** 
2261:bluetooth_rxtx.c **** 	le.update_pending = 0;
 8597              		.loc 1 2261 0
 8598 0060 094B     		ldr	r3, .L415+4
 8599 0062 0022     		movs	r2, #0
 8600 0064 9A62     		str	r2, [r3, #40]
2262:bluetooth_rxtx.c **** 	le.update_instant = 0;
 8601              		.loc 1 2262 0
 8602 0066 084B     		ldr	r3, .L415+4
 8603 0068 0022     		movs	r2, #0
 8604 006a 9A85     		strh	r2, [r3, #44]	@ movhi
2263:bluetooth_rxtx.c **** 	le.interval_update = 0;
 8605              		.loc 1 2263 0
 8606 006c 064B     		ldr	r3, .L415+4
 8607 006e 0022     		movs	r2, #0
 8608 0070 DA85     		strh	r2, [r3, #46]	@ movhi
2264:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 8609              		.loc 1 2264 0
 8610 0072 054B     		ldr	r3, .L415+4
 8611 0074 0022     		movs	r2, #0
 8612 0076 83F83020 		strb	r2, [r3, #48]
2265:bluetooth_rxtx.c **** 	le.win_offset_update;
2266:bluetooth_rxtx.c **** 
2267:bluetooth_rxtx.c **** 	do_hop = 0;
 8613              		.loc 1 2267 0
 8614 007a 064B     		ldr	r3, .L415+16
 8615 007c 0022     		movs	r2, #0
 8616 007e 1A70     		strb	r2, [r3]
2268:bluetooth_rxtx.c **** }
 8617              		.loc 1 2268 0
 8618 0080 80BD     		pop	{r7, pc}
 8619              	.L416:
 8620 0082 00BF     		.align	2
 8621              	.L415:
 8622 0084 D6BE898E 		.word	-1903575338
 8623 0088 00000000 		.word	le
 8624 008c 55555500 		.word	5592405
 8625 0090 AAAAAA00 		.word	11184810
 8626 0094 00000000 		.word	do_hop
 8627              		.cfi_endproc
 8628              	.LFE37:
 8630              		.section	.text.reset_le_promisc,"ax",%progbits
ARM GAS  /tmp/ccfQkuUX.s 			page 191


 8631              		.align	2
 8632              		.global	reset_le_promisc
 8633              		.thumb
 8634              		.thumb_func
 8636              	reset_le_promisc:
 8637              	.LFB38:
2269:bluetooth_rxtx.c **** 
2270:bluetooth_rxtx.c **** // reset LE Promisc state
2271:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 8638              		.loc 1 2271 0
 8639              		.cfi_startproc
 8640              		@ args = 0, pretend = 0, frame = 0
 8641              		@ frame_needed = 1, uses_anonymous_args = 0
 8642 0000 80B5     		push	{r7, lr}
 8643              		.cfi_def_cfa_offset 8
 8644              		.cfi_offset 7, -8
 8645              		.cfi_offset 14, -4
 8646 0002 00AF     		add	r7, sp, #0
 8647              		.cfi_def_cfa_register 7
2272:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 8648              		.loc 1 2272 0
 8649 0004 0548     		ldr	r0, .L418
 8650 0006 0021     		movs	r1, #0
 8651 0008 4FF48472 		mov	r2, #264
 8652 000c FFF7FEFF 		bl	memset
2273:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 8653              		.loc 1 2273 0
 8654 0010 024B     		ldr	r3, .L418
 8655 0012 4FF0FF32 		mov	r2, #-1
 8656 0016 C3F80021 		str	r2, [r3, #256]
2274:bluetooth_rxtx.c **** }
 8657              		.loc 1 2274 0
 8658 001a 80BD     		pop	{r7, pc}
 8659              	.L419:
 8660              		.align	2
 8661              	.L418:
 8662 001c 00000000 		.word	le_promisc
 8663              		.cfi_endproc
 8664              	.LFE38:
 8666              		.section	.text.bt_generic_le,"ax",%progbits
 8667              		.align	2
 8668              		.global	bt_generic_le
 8669              		.thumb
 8670              		.thumb_func
 8672              	bt_generic_le:
 8673              	.LFB39:
2275:bluetooth_rxtx.c **** 
2276:bluetooth_rxtx.c **** /* generic le mode */
2277:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
2278:bluetooth_rxtx.c **** {
 8674              		.loc 1 2278 0
 8675              		.cfi_startproc
 8676              		@ args = 0, pretend = 0, frame = 32
 8677              		@ frame_needed = 1, uses_anonymous_args = 0
 8678 0000 80B5     		push	{r7, lr}
 8679              		.cfi_def_cfa_offset 8
 8680              		.cfi_offset 7, -8
ARM GAS  /tmp/ccfQkuUX.s 			page 192


 8681              		.cfi_offset 14, -4
 8682 0002 88B0     		sub	sp, sp, #32
 8683              		.cfi_def_cfa_offset 40
 8684 0004 00AF     		add	r7, sp, #0
 8685              		.cfi_def_cfa_register 7
 8686 0006 0346     		mov	r3, r0
 8687 0008 FB71     		strb	r3, [r7, #7]
2279:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 8688              		.loc 1 2279 0
 8689 000a 0023     		movs	r3, #0
 8690 000c FB60     		str	r3, [r7, #12]
2280:bluetooth_rxtx.c **** 	u8 hold;
2281:bluetooth_rxtx.c **** 	int i, j;
2282:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
2283:bluetooth_rxtx.c **** 
2284:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 8691              		.loc 1 2284 0
 8692 000e A44B     		ldr	r3, .L448
 8693 0010 0122     		movs	r2, #1
 8694 0012 1A70     		strb	r2, [r3]
2285:bluetooth_rxtx.c **** 	mode = active_mode;
 8695              		.loc 1 2285 0
 8696 0014 A34A     		ldr	r2, .L448+4
 8697 0016 FB79     		ldrb	r3, [r7, #7]
 8698 0018 1370     		strb	r3, [r2]
2286:bluetooth_rxtx.c **** 
2287:bluetooth_rxtx.c **** 	reset_le();
 8699              		.loc 1 2287 0
 8700 001a FFF7FEFF 		bl	reset_le
2288:bluetooth_rxtx.c **** 
2289:bluetooth_rxtx.c **** 	// enable USB interrupts
2290:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 8701              		.loc 1 2290 0
 8702 001e A24B     		ldr	r3, .L448+8
 8703 0020 4FF08072 		mov	r2, #16777216
 8704 0024 1A60     		str	r2, [r3]
2291:bluetooth_rxtx.c **** 
2292:bluetooth_rxtx.c **** 	RXLED_CLR;
 8705              		.loc 1 2292 0
 8706 0026 A14B     		ldr	r3, .L448+12
 8707 0028 1022     		movs	r2, #16
 8708 002a 1A60     		str	r2, [r3]
2293:bluetooth_rxtx.c **** 
2294:bluetooth_rxtx.c **** 	queue_init();
 8709              		.loc 1 2294 0
 8710 002c FFF7FEFF 		bl	queue_init
2295:bluetooth_rxtx.c **** 	dio_ssp_init();
 8711              		.loc 1 2295 0
 8712 0030 FFF7FEFF 		bl	dio_ssp_init
2296:bluetooth_rxtx.c **** 	dma_init();
 8713              		.loc 1 2296 0
 8714 0034 FFF7FEFF 		bl	dma_init
2297:bluetooth_rxtx.c **** 	dio_ssp_start();
 8715              		.loc 1 2297 0
 8716 0038 FFF7FEFF 		bl	dio_ssp_start
2298:bluetooth_rxtx.c **** 	cc2400_rx();
 8717              		.loc 1 2298 0
ARM GAS  /tmp/ccfQkuUX.s 			page 193


 8718 003c FFF7FEFF 		bl	cc2400_rx
2299:bluetooth_rxtx.c **** 
2300:bluetooth_rxtx.c **** 	cs_trigger_enable();
 8719              		.loc 1 2300 0
 8720 0040 FFF7FEFF 		bl	cs_trigger_enable
2301:bluetooth_rxtx.c **** 
2302:bluetooth_rxtx.c **** 	hold = 0;
 8721              		.loc 1 2302 0
 8722 0044 0023     		movs	r3, #0
 8723 0046 FB77     		strb	r3, [r7, #31]
2303:bluetooth_rxtx.c **** 
2304:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 8724              		.loc 1 2304 0
 8725 0048 15E1     		b	.L421
 8726              	.L447:
 8727              	.LBB13:
2305:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 8728              		.loc 1 2305 0
 8729 004a 994B     		ldr	r3, .L448+16
 8730 004c 1B88     		ldrh	r3, [r3]	@ movhi
 8731 004e 9BB2     		uxth	r3, r3
 8732 0050 002B     		cmp	r3, #0
 8733 0052 24D0     		beq	.L422
2306:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 8734              		.loc 1 2306 0
 8735 0054 6420     		movs	r0, #100
 8736 0056 FFF7FEFF 		bl	cc2400_strobe
2307:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 8737              		.loc 1 2307 0
 8738 005a 00BF     		nop
 8739              	.L423:
 8740              		.loc 1 2307 0 is_stmt 0 discriminator 1
 8741 005c FFF7FEFF 		bl	cc2400_status
 8742 0060 0346     		mov	r3, r0
 8743 0062 03F00403 		and	r3, r3, #4
 8744 0066 002B     		cmp	r3, #0
 8745 0068 F8D1     		bne	.L423
2308:bluetooth_rxtx.c **** 
2309:bluetooth_rxtx.c **** 			/* Retune */
2310:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 8746              		.loc 1 2310 0 is_stmt 1
 8747 006a 924B     		ldr	r3, .L448+20
 8748 006c 1B88     		ldrh	r3, [r3]	@ movhi
 8749 006e 9BB2     		uxth	r3, r3
 8750 0070 013B     		subs	r3, r3, #1
 8751 0072 9BB2     		uxth	r3, r3
 8752 0074 0220     		movs	r0, #2
 8753 0076 1946     		mov	r1, r3
 8754 0078 FFF7FEFF 		bl	cc2400_set
2311:bluetooth_rxtx.c **** 
2312:bluetooth_rxtx.c **** 			/* Wait for lock */
2313:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 8755              		.loc 1 2313 0
 8756 007c 6120     		movs	r0, #97
 8757 007e FFF7FEFF 		bl	cc2400_strobe
2314:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 8758              		.loc 1 2314 0
ARM GAS  /tmp/ccfQkuUX.s 			page 194


 8759 0082 00BF     		nop
 8760              	.L424:
 8761              		.loc 1 2314 0 is_stmt 0 discriminator 1
 8762 0084 FFF7FEFF 		bl	cc2400_status
 8763 0088 0346     		mov	r3, r0
 8764 008a 03F00403 		and	r3, r3, #4
 8765 008e 002B     		cmp	r3, #0
 8766 0090 F8D0     		beq	.L424
2315:bluetooth_rxtx.c **** 
2316:bluetooth_rxtx.c **** 			/* RX mode */
2317:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 8767              		.loc 1 2317 0 is_stmt 1
 8768 0092 6220     		movs	r0, #98
 8769 0094 FFF7FEFF 		bl	cc2400_strobe
2318:bluetooth_rxtx.c **** 
2319:bluetooth_rxtx.c **** 			requested_channel = 0;
 8770              		.loc 1 2319 0
 8771 0098 854B     		ldr	r3, .L448+16
 8772 009a 0022     		movs	r2, #0
 8773 009c 1A80     		strh	r2, [r3]	@ movhi
 8774              	.L422:
2320:bluetooth_rxtx.c **** 		}
2321:bluetooth_rxtx.c **** 
2322:bluetooth_rxtx.c **** 		if (do_hop) {
 8775              		.loc 1 2322 0
 8776 009e 864B     		ldr	r3, .L448+24
 8777 00a0 1B78     		ldrb	r3, [r3]
 8778 00a2 DBB2     		uxtb	r3, r3
 8779 00a4 002B     		cmp	r3, #0
 8780 00a6 02D0     		beq	.L425
2323:bluetooth_rxtx.c **** 			hop();
 8781              		.loc 1 2323 0
 8782 00a8 FFF7FEFF 		bl	hop
 8783 00ac 03E0     		b	.L426
 8784              	.L425:
2324:bluetooth_rxtx.c **** 		} else {
2325:bluetooth_rxtx.c **** 			TXLED_CLR;
 8785              		.loc 1 2325 0
 8786 00ae 7F4B     		ldr	r3, .L448+12
 8787 00b0 4FF48072 		mov	r2, #256
 8788 00b4 1A60     		str	r2, [r3]
 8789              	.L426:
2326:bluetooth_rxtx.c **** 		}
2327:bluetooth_rxtx.c **** 
2328:bluetooth_rxtx.c **** 		RXLED_CLR;
 8790              		.loc 1 2328 0
 8791 00b6 7D4B     		ldr	r3, .L448+12
 8792 00b8 1022     		movs	r2, #16
 8793 00ba 1A60     		str	r2, [r3]
2329:bluetooth_rxtx.c **** 
2330:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2331:bluetooth_rxtx.c **** 		rssi_reset();
 8794              		.loc 1 2331 0
 8795 00bc FFF7FEFF 		bl	rssi_reset
2332:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 8796              		.loc 1 2332 0
 8797 00c0 8023     		movs	r3, #128
ARM GAS  /tmp/ccfQkuUX.s 			page 195


 8798 00c2 BB74     		strb	r3, [r7, #18]
2333:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 8799              		.loc 1 2333 0
 8800 00c4 22E0     		b	.L427
 8801              	.L430:
2334:bluetooth_rxtx.c **** 		{
2335:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 8802              		.loc 1 2335 0
 8803 00c6 0620     		movs	r0, #6
 8804 00c8 FFF7FEFF 		bl	cc2400_get
 8805 00cc 0346     		mov	r3, r0
 8806 00ce 1B0A     		lsrs	r3, r3, #8
 8807 00d0 9BB2     		uxth	r3, r3
 8808 00d2 FB74     		strb	r3, [r7, #19]
2336:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 8809              		.loc 1 2336 0
 8810 00d4 794B     		ldr	r3, .L448+28
 8811 00d6 1B78     		ldrb	r3, [r3]
 8812 00d8 DBB2     		uxtb	r3, r3
 8813 00da 002B     		cmp	r3, #0
 8814 00dc 11D0     		beq	.L428
 8815              		.loc 1 2336 0 is_stmt 0 discriminator 1
 8816 00de 97F91230 		ldrsb	r3, [r7, #18]
 8817 00e2 13F1800F 		cmn	r3, #128
 8818 00e6 0CD1     		bne	.L428
2337:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 8819              		.loc 1 2337 0 is_stmt 1
 8820 00e8 754B     		ldr	r3, .L448+32
 8821 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8822 00ec 5BB2     		sxtb	r3, r3
 8823 00ee 03F13602 		add	r2, r3, #54
 8824 00f2 97F91330 		ldrsb	r3, [r7, #19]
 8825 00f6 9342     		cmp	r3, r2
 8826 00f8 B8BF     		it	lt
 8827 00fa 1346     		movlt	r3, r2
 8828 00fc FB74     		strb	r3, [r7, #19]
2338:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 8829              		.loc 1 2338 0
 8830 00fe FB7C     		ldrb	r3, [r7, #19]
 8831 0100 BB74     		strb	r3, [r7, #18]
 8832              	.L428:
2339:bluetooth_rxtx.c **** 			}
2340:bluetooth_rxtx.c **** 			rssi_add(rssi);
 8833              		.loc 1 2340 0
 8834 0102 97F91330 		ldrsb	r3, [r7, #19]
 8835 0106 1846     		mov	r0, r3
 8836 0108 FFF7FEFF 		bl	rssi_add
 8837              	.L427:
2333:bluetooth_rxtx.c **** 		{
 8838              		.loc 1 2333 0
 8839 010c 6D4B     		ldr	r3, .L448+36
 8840 010e 1B68     		ldr	r3, [r3]
 8841 0110 002B     		cmp	r3, #0
 8842 0112 03D1     		bne	.L429
2333:bluetooth_rxtx.c **** 		{
 8843              		.loc 1 2333 0 is_stmt 0 discriminator 1
 8844 0114 6C4B     		ldr	r3, .L448+40
ARM GAS  /tmp/ccfQkuUX.s 			page 196


 8845 0116 1B68     		ldr	r3, [r3]
 8846 0118 002B     		cmp	r3, #0
 8847 011a D4D0     		beq	.L430
 8848              	.L429:
2341:bluetooth_rxtx.c **** 		}
2342:bluetooth_rxtx.c **** 
2343:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
2344:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 8849              		.loc 1 2344 0 is_stmt 1
 8850 011c 694B     		ldr	r3, .L448+36
 8851 011e 1B68     		ldr	r3, [r3]
 8852 0120 03F00103 		and	r3, r3, #1
 8853 0124 002B     		cmp	r3, #0
 8854 0126 09D0     		beq	.L431
2345:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 8855              		.loc 1 2345 0
 8856 0128 684B     		ldr	r3, .L448+44
 8857 012a 1B68     		ldr	r3, [r3]
 8858 012c FB60     		str	r3, [r7, #12]
2346:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 8859              		.loc 1 2346 0
 8860 012e 684B     		ldr	r3, .L448+48
 8861 0130 1B68     		ldr	r3, [r3]
 8862 0132 664A     		ldr	r2, .L448+44
 8863 0134 1360     		str	r3, [r2]
2347:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 8864              		.loc 1 2347 0
 8865 0136 664A     		ldr	r2, .L448+48
 8866 0138 FB68     		ldr	r3, [r7, #12]
 8867 013a 1360     		str	r3, [r2]
 8868              	.L431:
2348:bluetooth_rxtx.c **** 		}
2349:bluetooth_rxtx.c **** 
2350:bluetooth_rxtx.c **** 		if (rx_err) {
 8869              		.loc 1 2350 0
 8870 013c 624B     		ldr	r3, .L448+40
 8871 013e 1B68     		ldr	r3, [r3]
 8872 0140 002B     		cmp	r3, #0
 8873 0142 07D0     		beq	.L432
2351:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 8874              		.loc 1 2351 0
 8875 0144 634B     		ldr	r3, .L448+52
 8876 0146 1B78     		ldrb	r3, [r3]
 8877 0148 DBB2     		uxtb	r3, r3
 8878 014a 43F00203 		orr	r3, r3, #2
 8879 014e DAB2     		uxtb	r2, r3
 8880 0150 604B     		ldr	r3, .L448+52
 8881 0152 1A70     		strb	r2, [r3]
 8882              	.L432:
2352:bluetooth_rxtx.c **** 		}
2353:bluetooth_rxtx.c **** 
2354:bluetooth_rxtx.c **** 		/* No DMA transfer? */
2355:bluetooth_rxtx.c **** 		if (!rx_tc)
 8883              		.loc 1 2355 0
 8884 0154 5B4B     		ldr	r3, .L448+36
 8885 0156 1B68     		ldr	r3, [r3]
 8886 0158 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 197


 8887 015a 00D1     		bne	.L433
2356:bluetooth_rxtx.c **** 			goto rx_continue;
 8888              		.loc 1 2356 0
 8889 015c 85E0     		b	.L434
 8890              	.L433:
2357:bluetooth_rxtx.c **** 
2358:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
2359:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 8891              		.loc 1 2359 0
 8892 015e 594B     		ldr	r3, .L448+36
 8893 0160 1B68     		ldr	r3, [r3]
 8894 0162 012B     		cmp	r3, #1
 8895 0164 07D9     		bls	.L435
2360:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 8896              		.loc 1 2360 0
 8897 0166 5B4B     		ldr	r3, .L448+52
 8898 0168 1B78     		ldrb	r3, [r3]
 8899 016a DBB2     		uxtb	r3, r3
 8900 016c 43F00103 		orr	r3, r3, #1
 8901 0170 DAB2     		uxtb	r2, r3
 8902 0172 584B     		ldr	r3, .L448+52
 8903 0174 1A70     		strb	r2, [r3]
 8904              	.L435:
2361:bluetooth_rxtx.c **** 
2362:bluetooth_rxtx.c **** 		rssi_iir_update();
 8905              		.loc 1 2362 0
 8906 0176 FFF7FEFF 		bl	rssi_iir_update
2363:bluetooth_rxtx.c **** 
2364:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
2365:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
2366:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
2367:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
2368:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 8907              		.loc 1 2368 0
 8908 017a 504B     		ldr	r3, .L448+28
 8909 017c 1B78     		ldrb	r3, [r3]
 8910 017e DBB2     		uxtb	r3, r3
 8911 0180 002B     		cmp	r3, #0
 8912 0182 03D1     		bne	.L436
 8913              		.loc 1 2368 0 is_stmt 0 discriminator 1
 8914 0184 544B     		ldr	r3, .L448+56
 8915 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8916 0188 002B     		cmp	r3, #0
 8917 018a 0CD0     		beq	.L437
 8918              	.L436:
2369:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 8919              		.loc 1 2369 0 is_stmt 1
 8920 018c 514B     		ldr	r3, .L448+52
 8921 018e 1B78     		ldrb	r3, [r3]
 8922 0190 DBB2     		uxtb	r3, r3
 8923 0192 43F00803 		orr	r3, r3, #8
 8924 0196 DAB2     		uxtb	r2, r3
 8925 0198 4E4B     		ldr	r3, .L448+52
 8926 019a 1A70     		strb	r2, [r3]
2370:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 8927              		.loc 1 2370 0
 8928 019c 0223     		movs	r3, #2
ARM GAS  /tmp/ccfQkuUX.s 			page 198


 8929 019e FB77     		strb	r3, [r7, #31]
2371:bluetooth_rxtx.c **** 			cs_trigger = 0;
 8930              		.loc 1 2371 0
 8931 01a0 464B     		ldr	r3, .L448+28
 8932 01a2 0022     		movs	r2, #0
 8933 01a4 1A70     		strb	r2, [r3]
 8934              	.L437:
2372:bluetooth_rxtx.c **** 		}
2373:bluetooth_rxtx.c **** 
2374:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 8935              		.loc 1 2374 0
 8936 01a6 4D4B     		ldr	r3, .L448+60
 8937 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8938 01aa 5AB2     		sxtb	r2, r3
 8939 01ac 444B     		ldr	r3, .L448+32
 8940 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8941 01b0 5BB2     		sxtb	r3, r3
 8942 01b2 3633     		adds	r3, r3, #54
 8943 01b4 9A42     		cmp	r2, r3
 8944 01b6 09DB     		blt	.L438
2375:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 8945              		.loc 1 2375 0
 8946 01b8 464B     		ldr	r3, .L448+52
 8947 01ba 1B78     		ldrb	r3, [r3]
 8948 01bc DBB2     		uxtb	r3, r3
 8949 01be 43F01003 		orr	r3, r3, #16
 8950 01c2 DAB2     		uxtb	r2, r3
 8951 01c4 434B     		ldr	r3, .L448+52
 8952 01c6 1A70     		strb	r2, [r3]
2376:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 8953              		.loc 1 2376 0
 8954 01c8 0223     		movs	r3, #2
 8955 01ca FB77     		strb	r3, [r7, #31]
 8956              	.L438:
2377:bluetooth_rxtx.c **** 		}
2378:bluetooth_rxtx.c **** 
2379:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
2380:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
2381:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 8957              		.loc 1 2381 0
 8958 01cc 444B     		ldr	r3, .L448+64
 8959 01ce 1B78     		ldrb	r3, [r3]
 8960 01d0 DBB2     		uxtb	r3, r3
 8961 01d2 002B     		cmp	r3, #0
 8962 01d4 07D0     		beq	.L439
2382:bluetooth_rxtx.c **** 			if (hold == 0)
 8963              		.loc 1 2382 0
 8964 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 8965 01d8 002B     		cmp	r3, #0
 8966 01da 01D1     		bne	.L440
2383:bluetooth_rxtx.c **** 				hold = 1;
 8967              		.loc 1 2383 0
 8968 01dc 0123     		movs	r3, #1
 8969 01de FB77     		strb	r3, [r7, #31]
 8970              	.L440:
2384:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 8971              		.loc 1 2384 0
ARM GAS  /tmp/ccfQkuUX.s 			page 199


 8972 01e0 3F4B     		ldr	r3, .L448+64
 8973 01e2 0022     		movs	r2, #0
 8974 01e4 1A70     		strb	r2, [r3]
 8975              	.L439:
2385:bluetooth_rxtx.c **** 		}
2386:bluetooth_rxtx.c **** 
2387:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
2388:bluetooth_rxtx.c **** 		if (hold == 0) {
 8976              		.loc 1 2388 0
 8977 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 8978 01e8 002B     		cmp	r3, #0
 8979 01ea 00D1     		bne	.L441
2389:bluetooth_rxtx.c **** 			goto rx_continue;
 8980              		.loc 1 2389 0
 8981 01ec 3DE0     		b	.L434
 8982              	.L441:
2390:bluetooth_rxtx.c **** 		}
2391:bluetooth_rxtx.c **** 		hold--;
 8983              		.loc 1 2391 0
 8984 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 8985 01f0 013B     		subs	r3, r3, #1
 8986 01f2 FB77     		strb	r3, [r7, #31]
2392:bluetooth_rxtx.c **** 
2393:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
2394:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 8987              		.loc 1 2394 0
 8988 01f4 3B48     		ldr	r0, .L448+68
 8989 01f6 3C49     		ldr	r1, .L448+72
 8990 01f8 4FF4C872 		mov	r2, #400
 8991 01fc FFF7FEFF 		bl	memcpy
2395:bluetooth_rxtx.c **** 
2396:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
2397:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 8992              		.loc 1 2397 0
 8993 0200 0023     		movs	r3, #0
 8994 0202 BB61     		str	r3, [r7, #24]
 8995 0204 25E0     		b	.L442
 8996              	.L445:
2398:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
2399:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 8997              		.loc 1 2399 0
 8998 0206 0023     		movs	r3, #0
 8999 0208 7B61     		str	r3, [r7, #20]
 9000 020a 1CE0     		b	.L443
 9001              	.L444:
2400:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 9002              		.loc 1 2400 0 discriminator 3
 9003 020c BB69     		ldr	r3, [r7, #24]
 9004 020e 3233     		adds	r3, r3, #50
 9005 0210 DA00     		lsls	r2, r3, #3
 9006 0212 7B69     		ldr	r3, [r7, #20]
 9007 0214 1344     		add	r3, r3, r2
 9008 0216 2E4A     		ldr	r2, .L448+48
 9009 0218 1168     		ldr	r1, [r2]
 9010 021a BA69     		ldr	r2, [r7, #24]
 9011 021c 0A44     		add	r2, r2, r1
 9012 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
ARM GAS  /tmp/ccfQkuUX.s 			page 200


 9013 0220 D209     		lsrs	r2, r2, #7
 9014 0222 D1B2     		uxtb	r1, r2
 9015 0224 2F4A     		ldr	r2, .L448+68
 9016 0226 D154     		strb	r1, [r2, r3]
2401:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 9017              		.loc 1 2401 0 discriminator 3
 9018 0228 294B     		ldr	r3, .L448+48
 9019 022a 1A68     		ldr	r2, [r3]
 9020 022c BB69     		ldr	r3, [r7, #24]
 9021 022e 1344     		add	r3, r3, r2
 9022 0230 274A     		ldr	r2, .L448+48
 9023 0232 1168     		ldr	r1, [r2]
 9024 0234 BA69     		ldr	r2, [r7, #24]
 9025 0236 0A44     		add	r2, r2, r1
 9026 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9027 023a 5200     		lsls	r2, r2, #1
 9028 023c D2B2     		uxtb	r2, r2
 9029 023e 1A70     		strb	r2, [r3]
2399:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 9030              		.loc 1 2399 0 discriminator 3
 9031 0240 7B69     		ldr	r3, [r7, #20]
 9032 0242 0133     		adds	r3, r3, #1
 9033 0244 7B61     		str	r3, [r7, #20]
 9034              	.L443:
2399:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 9035              		.loc 1 2399 0 is_stmt 0 discriminator 1
 9036 0246 7B69     		ldr	r3, [r7, #20]
 9037 0248 072B     		cmp	r3, #7
 9038 024a DFDD     		ble	.L444
2397:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 9039              		.loc 1 2397 0 is_stmt 1 discriminator 2
 9040 024c BB69     		ldr	r3, [r7, #24]
 9041 024e 0133     		adds	r3, r3, #1
 9042 0250 BB61     		str	r3, [r7, #24]
 9043              	.L442:
2397:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 9044              		.loc 1 2397 0 is_stmt 0 discriminator 1
 9045 0252 BB69     		ldr	r3, [r7, #24]
 9046 0254 312B     		cmp	r3, #49
 9047 0256 D6DD     		ble	.L445
2402:bluetooth_rxtx.c **** 			}
2403:bluetooth_rxtx.c **** 		}
2404:bluetooth_rxtx.c **** 
2405:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 9048              		.loc 1 2405 0 is_stmt 1
 9049 0258 244B     		ldr	r3, .L448+76
 9050 025a 1B68     		ldr	r3, [r3]
 9051 025c 2148     		ldr	r0, .L448+68
 9052 025e 9847     		blx	r3
 9053 0260 B860     		str	r0, [r7, #8]
2406:bluetooth_rxtx.c **** 		if (!ret) break;
 9054              		.loc 1 2406 0
 9055 0262 BB68     		ldr	r3, [r7, #8]
 9056 0264 002B     		cmp	r3, #0
 9057 0266 00D1     		bne	.L434
 9058 0268 0CE0     		b	.L446
 9059              	.L434:
ARM GAS  /tmp/ccfQkuUX.s 			page 201


2407:bluetooth_rxtx.c **** 
2408:bluetooth_rxtx.c **** 	rx_continue:
2409:bluetooth_rxtx.c **** 		rx_tc = 0;
 9060              		.loc 1 2409 0
 9061 026a 164B     		ldr	r3, .L448+36
 9062 026c 0022     		movs	r2, #0
 9063 026e 1A60     		str	r2, [r3]
2410:bluetooth_rxtx.c **** 		rx_err = 0;
 9064              		.loc 1 2410 0
 9065 0270 154B     		ldr	r3, .L448+40
 9066 0272 0022     		movs	r2, #0
 9067 0274 1A60     		str	r2, [r3]
 9068              	.L421:
 9069              	.LBE13:
2304:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 9070              		.loc 1 2304 0
 9071 0276 1E4B     		ldr	r3, .L448+80
 9072 0278 1B78     		ldrb	r3, [r3]
 9073 027a DBB2     		uxtb	r3, r3
 9074 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 9075 027e 9A42     		cmp	r2, r3
 9076 0280 3FF4E3AE 		beq	.L447
 9077              	.L446:
2411:bluetooth_rxtx.c **** 	}
2412:bluetooth_rxtx.c **** 
2413:bluetooth_rxtx.c **** 	// disable USB interrupts
2414:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 9078              		.loc 1 2414 0
 9079 0284 1B4B     		ldr	r3, .L448+84
 9080 0286 4FF08072 		mov	r2, #16777216
 9081 028a 1A60     		str	r2, [r3]
2415:bluetooth_rxtx.c **** 
2416:bluetooth_rxtx.c **** 	// reset the radio completely
2417:bluetooth_rxtx.c **** 	cc2400_idle();
 9082              		.loc 1 2417 0
 9083 028c FFF7FEFF 		bl	cc2400_idle
2418:bluetooth_rxtx.c **** 	dio_ssp_stop();
 9084              		.loc 1 2418 0
 9085 0290 FFF7FEFF 		bl	dio_ssp_stop
2419:bluetooth_rxtx.c **** 	cs_trigger_disable();
 9086              		.loc 1 2419 0
 9087 0294 FFF7FEFF 		bl	cs_trigger_disable
2420:bluetooth_rxtx.c **** }
 9088              		.loc 1 2420 0
 9089 0298 2037     		adds	r7, r7, #32
 9090              		.cfi_def_cfa_offset 8
 9091 029a BD46     		mov	sp, r7
 9092              		.cfi_def_cfa_register 13
 9093              		@ sp needed
 9094 029c 80BD     		pop	{r7, pc}
 9095              	.L449:
 9096 029e 00BF     		.align	2
 9097              	.L448:
 9098 02a0 00000000 		.word	modulation
 9099 02a4 00000000 		.word	mode
 9100 02a8 00E100E0 		.word	-536813312
 9101 02ac 3CC00920 		.word	537509948
ARM GAS  /tmp/ccfQkuUX.s 			page 202


 9102 02b0 00000000 		.word	requested_channel
 9103 02b4 00000000 		.word	channel
 9104 02b8 00000000 		.word	do_hop
 9105 02bc 00000000 		.word	cs_trigger
 9106 02c0 00000000 		.word	cs_threshold_cur
 9107 02c4 00000000 		.word	rx_tc
 9108 02c8 00000000 		.word	rx_err
 9109 02cc 00000000 		.word	active_rxbuf
 9110 02d0 00000000 		.word	idle_rxbuf
 9111 02d4 00000000 		.word	status
 9112 02d8 00000000 		.word	cs_no_squelch
 9113 02dc 00000000 		.word	rssi_max
 9114 02e0 00000000 		.word	keepalive_trigger
 9115 02e4 00000000 		.word	unpacked
 9116 02e8 90010000 		.word	unpacked+400
 9117 02ec 00000000 		.word	data_cb
 9118 02f0 00000000 		.word	requested_mode
 9119 02f4 80E100E0 		.word	-536813184
 9120              		.cfi_endproc
 9121              	.LFE39:
 9123              		.section	.text.bt_le_sync,"ax",%progbits
 9124              		.align	2
 9125              		.global	bt_le_sync
 9126              		.thumb
 9127              		.thumb_func
 9129              	bt_le_sync:
 9130              	.LFB40:
2421:bluetooth_rxtx.c **** 
2422:bluetooth_rxtx.c **** 
2423:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
2424:bluetooth_rxtx.c **** {
 9131              		.loc 1 2424 0
 9132              		.cfi_startproc
 9133              		@ args = 0, pretend = 0, frame = 104
 9134              		@ frame_needed = 1, uses_anonymous_args = 0
 9135 0000 90B5     		push	{r4, r7, lr}
 9136              		.cfi_def_cfa_offset 12
 9137              		.cfi_offset 4, -12
 9138              		.cfi_offset 7, -8
 9139              		.cfi_offset 14, -4
 9140 0002 9BB0     		sub	sp, sp, #108
 9141              		.cfi_def_cfa_offset 120
 9142 0004 00AF     		add	r7, sp, #0
 9143              		.cfi_def_cfa_register 7
 9144 0006 0346     		mov	r3, r0
 9145 0008 FB71     		strb	r3, [r7, #7]
2425:bluetooth_rxtx.c **** 	int i;
2426:bluetooth_rxtx.c **** 	int8_t rssi;
2427:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
2428:bluetooth_rxtx.c **** 
2429:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 9146              		.loc 1 2429 0
 9147 000a 874B     		ldr	r3, .L496
 9148 000c 0122     		movs	r2, #1
 9149 000e 1A70     		strb	r2, [r3]
2430:bluetooth_rxtx.c **** 	mode = active_mode;
 9150              		.loc 1 2430 0
ARM GAS  /tmp/ccfQkuUX.s 			page 203


 9151 0010 864A     		ldr	r2, .L496+4
 9152 0012 FB79     		ldrb	r3, [r7, #7]
 9153 0014 1370     		strb	r3, [r2]
2431:bluetooth_rxtx.c **** 
2432:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 9154              		.loc 1 2432 0
 9155 0016 864B     		ldr	r3, .L496+8
 9156 0018 0122     		movs	r2, #1
 9157 001a 1A75     		strb	r2, [r3, #20]
2433:bluetooth_rxtx.c **** 
2434:bluetooth_rxtx.c **** 	// enable USB interrupts
2435:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 9158              		.loc 1 2435 0
 9159 001c 854B     		ldr	r3, .L496+12
 9160 001e 4FF08072 		mov	r2, #16777216
 9161 0022 1A60     		str	r2, [r3]
2436:bluetooth_rxtx.c **** 
2437:bluetooth_rxtx.c **** 	RXLED_CLR;
 9162              		.loc 1 2437 0
 9163 0024 844B     		ldr	r3, .L496+16
 9164 0026 1022     		movs	r2, #16
 9165 0028 1A60     		str	r2, [r3]
2438:bluetooth_rxtx.c **** 
2439:bluetooth_rxtx.c **** 	queue_init();
 9166              		.loc 1 2439 0
 9167 002a FFF7FEFF 		bl	queue_init
2440:bluetooth_rxtx.c **** 	dio_ssp_init();
 9168              		.loc 1 2440 0
 9169 002e FFF7FEFF 		bl	dio_ssp_init
2441:bluetooth_rxtx.c **** 	dma_init_le();
 9170              		.loc 1 2441 0
 9171 0032 FFF7FEFF 		bl	dma_init_le
2442:bluetooth_rxtx.c **** 	dio_ssp_start();
 9172              		.loc 1 2442 0
 9173 0036 FFF7FEFF 		bl	dio_ssp_start
2443:bluetooth_rxtx.c **** 
2444:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 9174              		.loc 1 2444 0
 9175 003a 7D4B     		ldr	r3, .L496+8
 9176 003c 1B68     		ldr	r3, [r3]
 9177 003e 1846     		mov	r0, r3
 9178 0040 FFF7FEFF 		bl	rbit
 9179 0044 0346     		mov	r3, r0
 9180 0046 1846     		mov	r0, r3
 9181 0048 FFF7FEFF 		bl	cc2400_rx_sync
2445:bluetooth_rxtx.c **** 
2446:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 9182              		.loc 1 2446 0
 9183 004c 47E2     		b	.L451
 9184              	.L495:
 9185              	.LBB14:
2447:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 9186              		.loc 1 2447 0
 9187 004e 7B4B     		ldr	r3, .L496+20
 9188 0050 1B88     		ldrh	r3, [r3]	@ movhi
 9189 0052 9BB2     		uxth	r3, r3
 9190 0054 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 204


 9191 0056 29D0     		beq	.L452
2448:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 9192              		.loc 1 2448 0
 9193 0058 6420     		movs	r0, #100
 9194 005a FFF7FEFF 		bl	cc2400_strobe
2449:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 9195              		.loc 1 2449 0
 9196 005e 00BF     		nop
 9197              	.L453:
 9198              		.loc 1 2449 0 is_stmt 0 discriminator 1
 9199 0060 FFF7FEFF 		bl	cc2400_status
 9200 0064 0346     		mov	r3, r0
 9201 0066 03F00403 		and	r3, r3, #4
 9202 006a 002B     		cmp	r3, #0
 9203 006c F8D1     		bne	.L453
2450:bluetooth_rxtx.c **** 
2451:bluetooth_rxtx.c **** 			/* Retune */
2452:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 9204              		.loc 1 2452 0 is_stmt 1
 9205 006e 744B     		ldr	r3, .L496+24
 9206 0070 1B88     		ldrh	r3, [r3]	@ movhi
 9207 0072 9BB2     		uxth	r3, r3
 9208 0074 013B     		subs	r3, r3, #1
 9209 0076 9BB2     		uxth	r3, r3
 9210 0078 0220     		movs	r0, #2
 9211 007a 1946     		mov	r1, r3
 9212 007c FFF7FEFF 		bl	cc2400_set
2453:bluetooth_rxtx.c **** 
2454:bluetooth_rxtx.c **** 			/* Wait for lock */
2455:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 9213              		.loc 1 2455 0
 9214 0080 6120     		movs	r0, #97
 9215 0082 FFF7FEFF 		bl	cc2400_strobe
2456:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 9216              		.loc 1 2456 0
 9217 0086 00BF     		nop
 9218              	.L454:
 9219              		.loc 1 2456 0 is_stmt 0 discriminator 1
 9220 0088 FFF7FEFF 		bl	cc2400_status
 9221 008c 0346     		mov	r3, r0
 9222 008e 03F00403 		and	r3, r3, #4
 9223 0092 002B     		cmp	r3, #0
 9224 0094 F8D0     		beq	.L454
2457:bluetooth_rxtx.c **** 
2458:bluetooth_rxtx.c **** 			/* RX mode */
2459:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9225              		.loc 1 2459 0 is_stmt 1
 9226 0096 6220     		movs	r0, #98
 9227 0098 FFF7FEFF 		bl	cc2400_strobe
2460:bluetooth_rxtx.c **** 
2461:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 9228              		.loc 1 2461 0
 9229 009c 674B     		ldr	r3, .L496+20
 9230 009e 1B88     		ldrh	r3, [r3]	@ movhi
 9231 00a0 9AB2     		uxth	r2, r3
 9232 00a2 684B     		ldr	r3, .L496+28
 9233 00a4 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  /tmp/ccfQkuUX.s 			page 205


2462:bluetooth_rxtx.c **** 			requested_channel = 0;
 9234              		.loc 1 2462 0
 9235 00a6 654B     		ldr	r3, .L496+20
 9236 00a8 0022     		movs	r2, #0
 9237 00aa 1A80     		strh	r2, [r3]	@ movhi
 9238              	.L452:
2463:bluetooth_rxtx.c **** 		}
2464:bluetooth_rxtx.c **** 
2465:bluetooth_rxtx.c **** 		RXLED_CLR;
 9239              		.loc 1 2465 0
 9240 00ac 624B     		ldr	r3, .L496+16
 9241 00ae 1022     		movs	r2, #16
 9242 00b0 1A60     		str	r2, [r3]
2466:bluetooth_rxtx.c **** 
2467:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
2468:bluetooth_rxtx.c **** 		rssi_reset();
 9243              		.loc 1 2468 0
 9244 00b2 FFF7FEFF 		bl	rssi_reset
2469:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 9245              		.loc 1 2469 0
 9246 00b6 00BF     		nop
 9247              	.L456:
 9248              		.loc 1 2469 0 is_stmt 0 discriminator 4
 9249 00b8 634B     		ldr	r3, .L496+32
 9250 00ba 1B68     		ldr	r3, [r3]
 9251 00bc 002B     		cmp	r3, #0
 9252 00be 0ED1     		bne	.L455
 9253              		.loc 1 2469 0 discriminator 1
 9254 00c0 624B     		ldr	r3, .L496+36
 9255 00c2 1B68     		ldr	r3, [r3]
 9256 00c4 002B     		cmp	r3, #0
 9257 00c6 0AD1     		bne	.L455
 9258              		.loc 1 2469 0 discriminator 2
 9259 00c8 614B     		ldr	r3, .L496+40
 9260 00ca 1B78     		ldrb	r3, [r3]
 9261 00cc DBB2     		uxtb	r3, r3
 9262 00ce 002B     		cmp	r3, #0
 9263 00d0 05D1     		bne	.L455
 9264              		.loc 1 2469 0 discriminator 3
 9265 00d2 604B     		ldr	r3, .L496+44
 9266 00d4 1B78     		ldrb	r3, [r3]
 9267 00d6 DBB2     		uxtb	r3, r3
 9268 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 9269 00da 9A42     		cmp	r2, r3
 9270 00dc ECD0     		beq	.L456
 9271              	.L455:
2470:bluetooth_rxtx.c **** 			;
2471:bluetooth_rxtx.c **** 
2472:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 9272              		.loc 1 2472 0 is_stmt 1
 9273 00de 5D4B     		ldr	r3, .L496+44
 9274 00e0 1B78     		ldrb	r3, [r3]
 9275 00e2 DBB2     		uxtb	r3, r3
 9276 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 9277 00e6 9A42     		cmp	r2, r3
 9278 00e8 00D0     		beq	.L457
2473:bluetooth_rxtx.c **** 			goto cleanup;
ARM GAS  /tmp/ccfQkuUX.s 			page 206


 9279              		.loc 1 2473 0
 9280 00ea FFE1     		b	.L494
 9281              	.L457:
2474:bluetooth_rxtx.c **** 		}
2475:bluetooth_rxtx.c **** 
2476:bluetooth_rxtx.c **** 		if (rx_err) {
 9282              		.loc 1 2476 0
 9283 00ec 574B     		ldr	r3, .L496+36
 9284 00ee 1B68     		ldr	r3, [r3]
 9285 00f0 002B     		cmp	r3, #0
 9286 00f2 07D0     		beq	.L459
2477:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 9287              		.loc 1 2477 0
 9288 00f4 584B     		ldr	r3, .L496+48
 9289 00f6 1B78     		ldrb	r3, [r3]
 9290 00f8 DBB2     		uxtb	r3, r3
 9291 00fa 43F00203 		orr	r3, r3, #2
 9292 00fe DAB2     		uxtb	r2, r3
 9293 0100 554B     		ldr	r3, .L496+48
 9294 0102 1A70     		strb	r2, [r3]
 9295              	.L459:
2478:bluetooth_rxtx.c **** 		}
2479:bluetooth_rxtx.c **** 
2480:bluetooth_rxtx.c **** 		if (do_hop)
 9296              		.loc 1 2480 0
 9297 0104 524B     		ldr	r3, .L496+40
 9298 0106 1B78     		ldrb	r3, [r3]
 9299 0108 DBB2     		uxtb	r3, r3
 9300 010a 002B     		cmp	r3, #0
 9301 010c 00D0     		beq	.L460
2481:bluetooth_rxtx.c **** 			goto rx_flush;
 9302              		.loc 1 2481 0
 9303 010e 2BE1     		b	.L461
 9304              	.L460:
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 		/* No DMA transfer? */
2484:bluetooth_rxtx.c **** 		if (!rx_tc)
 9305              		.loc 1 2484 0
 9306 0110 4D4B     		ldr	r3, .L496+32
 9307 0112 1B68     		ldr	r3, [r3]
 9308 0114 002B     		cmp	r3, #0
 9309 0116 00D1     		bne	.L462
 9310 0118 E1E1     		b	.L451
 9311              	.L462:
2485:bluetooth_rxtx.c **** 			continue;
2486:bluetooth_rxtx.c **** 
2487:bluetooth_rxtx.c **** 		/////////////////////
2488:bluetooth_rxtx.c **** 		// process the packet
2489:bluetooth_rxtx.c **** 
2490:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
2491:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 9312              		.loc 1 2491 0
 9313 011a 07F10803 		add	r3, r7, #8
 9314 011e FB65     		str	r3, [r7, #92]
2492:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 9315              		.loc 1 2492 0
 9316 0120 434B     		ldr	r3, .L496+8
ARM GAS  /tmp/ccfQkuUX.s 			page 207


 9317 0122 1B68     		ldr	r3, [r3]
 9318 0124 BB60     		str	r3, [r7, #8]
2493:bluetooth_rxtx.c **** 
2494:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 9319              		.loc 1 2494 0
 9320 0126 464B     		ldr	r3, .L496+24
 9321 0128 1B88     		ldrh	r3, [r3]	@ movhi
 9322 012a 9BB2     		uxth	r3, r3
 9323 012c DBB2     		uxtb	r3, r3
 9324 012e 623B     		subs	r3, r3, #98
 9325 0130 DBB2     		uxtb	r3, r3
 9326 0132 1846     		mov	r0, r3
 9327 0134 FFF7FEFF 		bl	btle_channel_index
 9328 0138 0346     		mov	r3, r0
 9329 013a 1A46     		mov	r2, r3
 9330 013c 1346     		mov	r3, r2
 9331 013e 5B00     		lsls	r3, r3, #1
 9332 0140 1344     		add	r3, r3, r2
 9333 0142 1B01     		lsls	r3, r3, #4
 9334 0144 454A     		ldr	r2, .L496+52
 9335 0146 1344     		add	r3, r3, r2
 9336 0148 BB65     		str	r3, [r7, #88]
2495:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 9337              		.loc 1 2495 0
 9338 014a 0023     		movs	r3, #0
 9339 014c 7B66     		str	r3, [r7, #100]
 9340 014e 34E0     		b	.L463
 9341              	.L466:
 9342              	.LBB15:
2496:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9343              		.loc 1 2496 0 discriminator 3
 9344 0150 434A     		ldr	r2, .L496+56
 9345 0152 7B6E     		ldr	r3, [r7, #100]
 9346 0154 1344     		add	r3, r3, r2
 9347 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9348 0158 1A06     		lsls	r2, r3, #24
2497:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9349              		.loc 1 2497 0 discriminator 3
 9350 015a 7B6E     		ldr	r3, [r7, #100]
 9351 015c 0133     		adds	r3, r3, #1
 9352 015e 4049     		ldr	r1, .L496+56
 9353 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9354 0162 1B04     		lsls	r3, r3, #16
 9355 0164 1A43     		orrs	r2, r2, r3
2498:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 9356              		.loc 1 2498 0 discriminator 3
 9357 0166 7B6E     		ldr	r3, [r7, #100]
 9358 0168 0233     		adds	r3, r3, #2
 9359 016a 3D49     		ldr	r1, .L496+56
 9360 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9361 016e 1B02     		lsls	r3, r3, #8
 9362 0170 1343     		orrs	r3, r3, r2
2499:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 9363              		.loc 1 2499 0 discriminator 3
 9364 0172 7A6E     		ldr	r2, [r7, #100]
 9365 0174 0332     		adds	r2, r2, #3
 9366 0176 3A49     		ldr	r1, .L496+56
ARM GAS  /tmp/ccfQkuUX.s 			page 208


 9367 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9368 017a 1343     		orrs	r3, r3, r2
2496:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9369              		.loc 1 2496 0 discriminator 3
 9370 017c 7B65     		str	r3, [r7, #84]
2500:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 9371              		.loc 1 2500 0 discriminator 3
 9372 017e 7B6E     		ldr	r3, [r7, #100]
 9373 0180 002B     		cmp	r3, #0
 9374 0182 00DA     		bge	.L464
 9375 0184 0333     		adds	r3, r3, #3
 9376              	.L464:
 9377 0186 9B10     		asrs	r3, r3, #2
 9378 0188 5C1C     		adds	r4, r3, #1
 9379 018a 786D     		ldr	r0, [r7, #84]
 9380 018c FFF7FEFF 		bl	rbit
 9381 0190 0146     		mov	r1, r0
 9382 0192 7B6E     		ldr	r3, [r7, #100]
 9383 0194 002B     		cmp	r3, #0
 9384 0196 00DA     		bge	.L465
 9385 0198 0333     		adds	r3, r3, #3
 9386              	.L465:
 9387 019a 9B10     		asrs	r3, r3, #2
 9388 019c 9B00     		lsls	r3, r3, #2
 9389 019e BA6D     		ldr	r2, [r7, #88]
 9390 01a0 1344     		add	r3, r3, r2
 9391 01a2 1B68     		ldr	r3, [r3]
 9392 01a4 81EA0302 		eor	r2, r1, r3
 9393 01a8 A300     		lsls	r3, r4, #2
 9394 01aa 07F16801 		add	r1, r7, #104
 9395 01ae 0B44     		add	r3, r3, r1
 9396 01b0 43F8602C 		str	r2, [r3, #-96]
 9397              	.LBE15:
2495:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9398              		.loc 1 2495 0 discriminator 3
 9399 01b4 7B6E     		ldr	r3, [r7, #100]
 9400 01b6 0433     		adds	r3, r3, #4
 9401 01b8 7B66     		str	r3, [r7, #100]
 9402              	.L463:
2495:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9403              		.loc 1 2495 0 is_stmt 0 discriminator 1
 9404 01ba 7B6E     		ldr	r3, [r7, #100]
 9405 01bc 032B     		cmp	r3, #3
 9406 01be C7DD     		ble	.L466
2501:bluetooth_rxtx.c **** 		}
2502:bluetooth_rxtx.c **** 
2503:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 9407              		.loc 1 2503 0 is_stmt 1
 9408 01c0 FB6D     		ldr	r3, [r7, #92]
 9409 01c2 0533     		adds	r3, r3, #5
 9410 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9411 01c6 03F03F03 		and	r3, r3, #63
 9412 01ca 0233     		adds	r3, r3, #2
 9413 01cc 3B65     		str	r3, [r7, #80]
2504:bluetooth_rxtx.c **** 		if (len > 39)
 9414              		.loc 1 2504 0
 9415 01ce 3B6D     		ldr	r3, [r7, #80]
ARM GAS  /tmp/ccfQkuUX.s 			page 209


 9416 01d0 272B     		cmp	r3, #39
 9417 01d2 00D9     		bls	.L467
2505:bluetooth_rxtx.c **** 			goto rx_flush;
 9418              		.loc 1 2505 0
 9419 01d4 C8E0     		b	.L461
 9420              	.L467:
2506:bluetooth_rxtx.c **** 
2507:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
2508:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
2509:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 9421              		.loc 1 2509 0
 9422 01d6 3B6D     		ldr	r3, [r7, #80]
 9423 01d8 0633     		adds	r3, r3, #6
 9424 01da 9B08     		lsrs	r3, r3, #2
 9425 01dc FB64     		str	r3, [r7, #76]
2510:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 9426              		.loc 1 2510 0
 9427 01de FB6C     		ldr	r3, [r7, #76]
 9428 01e0 0A2B     		cmp	r3, #10
 9429 01e2 0DD8     		bhi	.L468
2511:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 9430              		.loc 1 2511 0
 9431 01e4 00BF     		nop
 9432              	.L470:
 9433              		.loc 1 2511 0 is_stmt 0 discriminator 2
 9434 01e6 1F4B     		ldr	r3, .L496+60
 9435 01e8 1A68     		ldr	r2, [r3]
 9436 01ea FB6C     		ldr	r3, [r7, #76]
 9437 01ec 9B00     		lsls	r3, r3, #2
 9438 01ee 1C49     		ldr	r1, .L496+56
 9439 01f0 0B44     		add	r3, r3, r1
 9440 01f2 9A42     		cmp	r2, r3
 9441 01f4 0FD2     		bcs	.L469
 9442              		.loc 1 2511 0 discriminator 1
 9443 01f6 154B     		ldr	r3, .L496+36
 9444 01f8 1B68     		ldr	r3, [r3]
 9445 01fa 002B     		cmp	r3, #0
 9446 01fc F3D0     		beq	.L470
 9447 01fe 0AE0     		b	.L469
 9448              	.L468:
2512:bluetooth_rxtx.c **** 				;
2513:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
2514:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 9449              		.loc 1 2514 0 is_stmt 1
 9450 0200 00BF     		nop
 9451              	.L471:
 9452              		.loc 1 2514 0 is_stmt 0 discriminator 2
 9453 0202 194B     		ldr	r3, .L496+64
 9454 0204 1B68     		ldr	r3, [r3]
 9455 0206 03F00103 		and	r3, r3, #1
 9456 020a 002B     		cmp	r3, #0
 9457 020c 03D0     		beq	.L469
 9458              		.loc 1 2514 0 discriminator 1
 9459 020e 0F4B     		ldr	r3, .L496+36
 9460 0210 1B68     		ldr	r3, [r3]
 9461 0212 002B     		cmp	r3, #0
 9462 0214 F5D0     		beq	.L471
ARM GAS  /tmp/ccfQkuUX.s 			page 210


 9463              	.L469:
2515:bluetooth_rxtx.c **** 				;
2516:bluetooth_rxtx.c **** 		}
2517:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 9464              		.loc 1 2517 0 is_stmt 1
 9465 0216 154A     		ldr	r2, .L496+68
 9466 0218 144B     		ldr	r3, .L496+68
 9467 021a 1B68     		ldr	r3, [r3]
 9468 021c 23F00103 		bic	r3, r3, #1
 9469 0220 1360     		str	r3, [r2]
2518:bluetooth_rxtx.c **** 
2519:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
2520:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 9470              		.loc 1 2520 0
 9471 0222 0423     		movs	r3, #4
 9472 0224 7B66     		str	r3, [r7, #100]
 9473 0226 58E0     		b	.L472
 9474              	.L497:
 9475              		.align	2
 9476              	.L496:
 9477 0228 00000000 		.word	modulation
 9478 022c 00000000 		.word	mode
 9479 0230 00000000 		.word	le
 9480 0234 00E100E0 		.word	-536813312
 9481 0238 3CC00920 		.word	537509948
 9482 023c 00000000 		.word	requested_channel
 9483 0240 00000000 		.word	channel
 9484 0244 00000000 		.word	saved_request
 9485 0248 00000000 		.word	rx_tc
 9486 024c 00000000 		.word	rx_err
 9487 0250 00000000 		.word	do_hop
 9488 0254 00000000 		.word	requested_mode
 9489 0258 00000000 		.word	status
 9490 025c 10010000 		.word	whitening_word
 9491 0260 00000000 		.word	rxbuf1
 9492 0264 04410050 		.word	1342193924
 9493 0268 10410050 		.word	1342193936
 9494 026c 24000340 		.word	1073938468
 9495              	.L475:
 9496              	.LBB16:
2521:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9497              		.loc 1 2521 0 discriminator 3
 9498 0270 A54A     		ldr	r2, .L498
 9499 0272 7B6E     		ldr	r3, [r7, #100]
 9500 0274 1344     		add	r3, r3, r2
 9501 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9502 0278 1A06     		lsls	r2, r3, #24
2522:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9503              		.loc 1 2522 0 discriminator 3
 9504 027a 7B6E     		ldr	r3, [r7, #100]
 9505 027c 0133     		adds	r3, r3, #1
 9506 027e A249     		ldr	r1, .L498
 9507 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9508 0282 1B04     		lsls	r3, r3, #16
 9509 0284 1A43     		orrs	r2, r2, r3
2523:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 9510              		.loc 1 2523 0 discriminator 3
ARM GAS  /tmp/ccfQkuUX.s 			page 211


 9511 0286 7B6E     		ldr	r3, [r7, #100]
 9512 0288 0233     		adds	r3, r3, #2
 9513 028a 9F49     		ldr	r1, .L498
 9514 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 9515 028e 1B02     		lsls	r3, r3, #8
 9516 0290 1343     		orrs	r3, r3, r2
2524:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 9517              		.loc 1 2524 0 discriminator 3
 9518 0292 7A6E     		ldr	r2, [r7, #100]
 9519 0294 0332     		adds	r2, r2, #3
 9520 0296 9C49     		ldr	r1, .L498
 9521 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9522 029a 1343     		orrs	r3, r3, r2
2521:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 9523              		.loc 1 2521 0 discriminator 3
 9524 029c BB64     		str	r3, [r7, #72]
2525:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 9525              		.loc 1 2525 0 discriminator 3
 9526 029e 7B6E     		ldr	r3, [r7, #100]
 9527 02a0 002B     		cmp	r3, #0
 9528 02a2 00DA     		bge	.L473
 9529 02a4 0333     		adds	r3, r3, #3
 9530              	.L473:
 9531 02a6 9B10     		asrs	r3, r3, #2
 9532 02a8 5C1C     		adds	r4, r3, #1
 9533 02aa B86C     		ldr	r0, [r7, #72]
 9534 02ac FFF7FEFF 		bl	rbit
 9535 02b0 0146     		mov	r1, r0
 9536 02b2 7B6E     		ldr	r3, [r7, #100]
 9537 02b4 002B     		cmp	r3, #0
 9538 02b6 00DA     		bge	.L474
 9539 02b8 0333     		adds	r3, r3, #3
 9540              	.L474:
 9541 02ba 9B10     		asrs	r3, r3, #2
 9542 02bc 9B00     		lsls	r3, r3, #2
 9543 02be BA6D     		ldr	r2, [r7, #88]
 9544 02c0 1344     		add	r3, r3, r2
 9545 02c2 1B68     		ldr	r3, [r3]
 9546 02c4 81EA0302 		eor	r2, r1, r3
 9547 02c8 A300     		lsls	r3, r4, #2
 9548 02ca 07F16801 		add	r1, r7, #104
 9549 02ce 0B44     		add	r3, r3, r1
 9550 02d0 43F8602C 		str	r2, [r3, #-96]
 9551              	.LBE16:
2520:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9552              		.loc 1 2520 0 discriminator 3
 9553 02d4 7B6E     		ldr	r3, [r7, #100]
 9554 02d6 0433     		adds	r3, r3, #4
 9555 02d8 7B66     		str	r3, [r7, #100]
 9556              	.L472:
2520:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 9557              		.loc 1 2520 0 is_stmt 0 discriminator 1
 9558 02da 7B6E     		ldr	r3, [r7, #100]
 9559 02dc 2B2B     		cmp	r3, #43
 9560 02de C7DD     		ble	.L475
2526:bluetooth_rxtx.c **** 		}
2527:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccfQkuUX.s 			page 212


2528:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 9561              		.loc 1 2528 0 is_stmt 1
 9562 02e0 8A4B     		ldr	r3, .L498+4
 9563 02e2 1B69     		ldr	r3, [r3, #16]
 9564 02e4 002B     		cmp	r3, #0
 9565 02e6 23D0     		beq	.L476
 9566              	.LBB17:
2529:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 9567              		.loc 1 2529 0
 9568 02e8 884B     		ldr	r3, .L498+4
 9569 02ea D968     		ldr	r1, [r3, #12]
 9570 02ec FB6D     		ldr	r3, [r7, #92]
 9571 02ee 1A1D     		adds	r2, r3, #4
 9572 02f0 3B6D     		ldr	r3, [r7, #80]
 9573 02f2 0846     		mov	r0, r1
 9574 02f4 1146     		mov	r1, r2
 9575 02f6 1A46     		mov	r2, r3
 9576 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 9577 02fc 7864     		str	r0, [r7, #68]
2530:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 9578              		.loc 1 2530 0
 9579 02fe 3B6D     		ldr	r3, [r7, #80]
 9580 0300 0633     		adds	r3, r3, #6
 9581 0302 FA6D     		ldr	r2, [r7, #92]
 9582 0304 1344     		add	r3, r3, r2
 9583 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9584 0308 1A04     		lsls	r2, r3, #16
2531:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 9585              		.loc 1 2531 0
 9586 030a 3B6D     		ldr	r3, [r7, #80]
 9587 030c 0533     		adds	r3, r3, #5
 9588 030e F96D     		ldr	r1, [r7, #92]
 9589 0310 0B44     		add	r3, r3, r1
 9590 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9591 0314 1B02     		lsls	r3, r3, #8
 9592 0316 1343     		orrs	r3, r3, r2
2532:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 9593              		.loc 1 2532 0
 9594 0318 3A6D     		ldr	r2, [r7, #80]
 9595 031a 0432     		adds	r2, r2, #4
 9596 031c F96D     		ldr	r1, [r7, #92]
 9597 031e 0A44     		add	r2, r2, r1
 9598 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 9599 0322 1343     		orrs	r3, r3, r2
2530:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 9600              		.loc 1 2530 0
 9601 0324 3B64     		str	r3, [r7, #64]
2533:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 9602              		.loc 1 2533 0
 9603 0326 7A6C     		ldr	r2, [r7, #68]
 9604 0328 3B6C     		ldr	r3, [r7, #64]
 9605 032a 9A42     		cmp	r2, r3
 9606 032c 00D0     		beq	.L476
2534:bluetooth_rxtx.c **** 				goto rx_flush;
 9607              		.loc 1 2534 0
 9608 032e 1BE0     		b	.L461
 9609              	.L476:
ARM GAS  /tmp/ccfQkuUX.s 			page 213


 9610              	.LBE17:
2535:bluetooth_rxtx.c **** 		}
2536:bluetooth_rxtx.c **** 
2537:bluetooth_rxtx.c **** 
2538:bluetooth_rxtx.c **** 		RXLED_SET;
 9611              		.loc 1 2538 0
 9612 0330 774B     		ldr	r3, .L498+8
 9613 0332 1022     		movs	r2, #16
 9614 0334 1A60     		str	r2, [r3]
2539:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 9615              		.loc 1 2539 0
 9616 0336 774B     		ldr	r3, .L498+12
 9617 0338 1B68     		ldr	r3, [r3]
 9618 033a 07F10802 		add	r2, r7, #8
 9619 033e 1046     		mov	r0, r2
 9620 0340 9847     		blx	r3
2540:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 9621              		.loc 1 2540 0
 9622 0342 07F10803 		add	r3, r7, #8
 9623 0346 0120     		movs	r0, #1
 9624 0348 1946     		mov	r1, r3
 9625 034a FFF7FEFF 		bl	enqueue
2541:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 9626              		.loc 1 2541 0
 9627 034e 724B     		ldr	r3, .L498+16
 9628 0350 1B68     		ldr	r3, [r3]
 9629 0352 C3F31303 		ubfx	r3, r3, #0, #20
 9630 0356 40F63542 		movw	r2, #3125
 9631 035a 02FB03F2 		mul	r2, r2, r3
 9632 035e 6F4B     		ldr	r3, .L498+20
 9633 0360 1B68     		ldr	r3, [r3]
 9634 0362 1344     		add	r3, r3, r2
 9635 0364 694A     		ldr	r2, .L498+4
 9636 0366 1364     		str	r3, [r2, #64]
 9637              	.L461:
2542:bluetooth_rxtx.c **** 
2543:bluetooth_rxtx.c **** 	rx_flush:
2544:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 9638              		.loc 1 2544 0
 9639 0368 6120     		movs	r0, #97
 9640 036a FFF7FEFF 		bl	cc2400_strobe
2545:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 9641              		.loc 1 2545 0
 9642 036e 00BF     		nop
 9643              	.L477:
 9644              		.loc 1 2545 0 is_stmt 0 discriminator 1
 9645 0370 FFF7FEFF 		bl	cc2400_status
 9646 0374 0346     		mov	r3, r0
 9647 0376 03F00403 		and	r3, r3, #4
 9648 037a 002B     		cmp	r3, #0
 9649 037c F8D0     		beq	.L477
2546:bluetooth_rxtx.c **** 
2547:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
2548:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 9650              		.loc 1 2548 0 is_stmt 1
 9651 037e 684A     		ldr	r2, .L498+24
 9652 0380 674B     		ldr	r3, .L498+24
ARM GAS  /tmp/ccfQkuUX.s 			page 214


 9653 0382 1B68     		ldr	r3, [r3]
 9654 0384 23F00103 		bic	r3, r3, #1
 9655 0388 1360     		str	r3, [r2]
2549:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 9656              		.loc 1 2549 0
 9657 038a 03E0     		b	.L478
 9658              	.L479:
 9659              	.LBB18:
2550:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 9660              		.loc 1 2550 0
 9661 038c 654B     		ldr	r3, .L498+28
 9662 038e 1B68     		ldr	r3, [r3]
 9663 0390 87F83F30 		strb	r3, [r7, #63]
 9664              	.L478:
 9665              	.LBE18:
2549:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 9666              		.loc 1 2549 0
 9667 0394 644B     		ldr	r3, .L498+32
 9668 0396 1B68     		ldr	r3, [r3]
 9669 0398 03F00403 		and	r3, r3, #4
 9670 039c 002B     		cmp	r3, #0
 9671 039e F5D1     		bne	.L479
2551:bluetooth_rxtx.c **** 		}
2552:bluetooth_rxtx.c **** 
2553:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
2554:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 9672              		.loc 1 2554 0
 9673 03a0 5D4B     		ldr	r3, .L498+16
 9674 03a2 1B68     		ldr	r3, [r3]
 9675 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 9676 03a8 40F63542 		movw	r2, #3125
 9677 03ac 02FB03F2 		mul	r2, r2, r3
 9678 03b0 5A4B     		ldr	r3, .L498+20
 9679 03b2 1B68     		ldr	r3, [r3]
 9680 03b4 1344     		add	r3, r3, r2
 9681 03b6 3B66     		str	r3, [r7, #96]
2555:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 9682              		.loc 1 2555 0
 9683 03b8 544B     		ldr	r3, .L498+4
 9684 03ba 1A6C     		ldr	r2, [r3, #64]
 9685 03bc 3B6E     		ldr	r3, [r7, #96]
 9686 03be 9A42     		cmp	r2, r3
 9687 03c0 05D9     		bls	.L480
2556:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 9688              		.loc 1 2556 0
 9689 03c2 3B6E     		ldr	r3, [r7, #96]
 9690 03c4 03F14343 		add	r3, r3, #-1023410176
 9691 03c8 03F5A003 		add	r3, r3, #5242880
 9692 03cc 3B66     		str	r3, [r7, #96]
 9693              	.L480:
2557:bluetooth_rxtx.c **** 		if  ( // timeout
2558:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 9694              		.loc 1 2558 0
 9695 03ce 4F4B     		ldr	r3, .L498+4
 9696 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
2557:bluetooth_rxtx.c **** 		if  ( // timeout
 9697              		.loc 1 2557 0
ARM GAS  /tmp/ccfQkuUX.s 			page 215


 9698 03d2 032B     		cmp	r3, #3
 9699 03d4 03D0     		beq	.L481
 9700              		.loc 1 2558 0
 9701 03d6 4D4B     		ldr	r3, .L498+4
 9702 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 9703 03da 022B     		cmp	r3, #2
 9704 03dc 06D1     		bne	.L482
 9705              	.L481:
2559:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 9706              		.loc 1 2559 0
 9707 03de 4B4B     		ldr	r3, .L498+4
 9708 03e0 1B6C     		ldr	r3, [r3, #64]
 9709 03e2 3A6E     		ldr	r2, [r7, #96]
 9710 03e4 D31A     		subs	r3, r2, r3
 9711 03e6 514A     		ldr	r2, .L498+36
 9712 03e8 9342     		cmp	r3, r2
 9713 03ea 03D8     		bhi	.L483
 9714              	.L482:
2560:bluetooth_rxtx.c **** 			// jam finished
2561:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 9715              		.loc 1 2561 0
 9716 03ec 504B     		ldr	r3, .L498+40
 9717 03ee 1B68     		ldr	r3, [r3]
 9718 03f0 012B     		cmp	r3, #1
 9719 03f2 37D1     		bne	.L484
 9720              	.L483:
2562:bluetooth_rxtx.c **** 			)
2563:bluetooth_rxtx.c **** 		{
2564:bluetooth_rxtx.c **** 			reset_le();
 9721              		.loc 1 2564 0
 9722 03f4 FFF7FEFF 		bl	reset_le
2565:bluetooth_rxtx.c **** 			le_jam_count = 0;
 9723              		.loc 1 2565 0
 9724 03f8 4D4B     		ldr	r3, .L498+40
 9725 03fa 0022     		movs	r2, #0
 9726 03fc 1A60     		str	r2, [r3]
2566:bluetooth_rxtx.c **** 			TXLED_CLR;
 9727              		.loc 1 2566 0
 9728 03fe 4D4B     		ldr	r3, .L498+44
 9729 0400 4FF48072 		mov	r2, #256
 9730 0404 1A60     		str	r2, [r3]
2567:bluetooth_rxtx.c **** 
2568:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 9731              		.loc 1 2568 0
 9732 0406 4C4B     		ldr	r3, .L498+48
 9733 0408 1B78     		ldrb	r3, [r3]
 9734 040a DBB2     		uxtb	r3, r3
 9735 040c 012B     		cmp	r3, #1
 9736 040e 06D1     		bne	.L485
2569:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 9737              		.loc 1 2569 0
 9738 0410 494B     		ldr	r3, .L498+48
 9739 0412 0022     		movs	r2, #0
 9740 0414 1A70     		strb	r2, [r3]
2570:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 9741              		.loc 1 2570 0
 9742 0416 494B     		ldr	r3, .L498+52
ARM GAS  /tmp/ccfQkuUX.s 			page 216


 9743 0418 0022     		movs	r2, #0
 9744 041a 1A70     		strb	r2, [r3]
2571:bluetooth_rxtx.c **** 				goto cleanup;
 9745              		.loc 1 2571 0
 9746 041c 66E0     		b	.L494
 9747              	.L485:
2572:bluetooth_rxtx.c **** 			}
2573:bluetooth_rxtx.c **** 
2574:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2575:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 9748              		.loc 1 2575 0
 9749 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 9750 0420 0A2B     		cmp	r3, #10
 9751 0422 01D1     		bne	.L486
2576:bluetooth_rxtx.c **** 				goto cleanup;
 9752              		.loc 1 2576 0
 9753 0424 00BF     		nop
 9754 0426 61E0     		b	.L494
 9755              	.L486:
2577:bluetooth_rxtx.c **** 
2578:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 9756              		.loc 1 2578 0
 9757 0428 384B     		ldr	r3, .L498+4
 9758 042a 0122     		movs	r2, #1
 9759 042c 1A75     		strb	r2, [r3, #20]
2579:bluetooth_rxtx.c **** 
2580:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 9760              		.loc 1 2580 0
 9761 042e 6420     		movs	r0, #100
 9762 0430 FFF7FEFF 		bl	cc2400_strobe
2581:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 9763              		.loc 1 2581 0
 9764 0434 00BF     		nop
 9765              	.L487:
 9766              		.loc 1 2581 0 is_stmt 0 discriminator 1
 9767 0436 FFF7FEFF 		bl	cc2400_status
 9768 043a 0346     		mov	r3, r0
 9769 043c 03F00403 		and	r3, r3, #4
 9770 0440 002B     		cmp	r3, #0
 9771 0442 F8D1     		bne	.L487
2582:bluetooth_rxtx.c **** 
2583:bluetooth_rxtx.c **** 			/* Retune */
2584:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 9772              		.loc 1 2584 0 is_stmt 1
 9773 0444 3E4B     		ldr	r3, .L498+56
 9774 0446 1B88     		ldrh	r3, [r3]	@ movhi
 9775 0448 9BB2     		uxth	r3, r3
 9776 044a 002B     		cmp	r3, #0
 9777 044c 03D0     		beq	.L488
 9778              		.loc 1 2584 0 is_stmt 0 discriminator 1
 9779 044e 3C4B     		ldr	r3, .L498+56
 9780 0450 1B88     		ldrh	r3, [r3]	@ movhi
 9781 0452 9BB2     		uxth	r3, r3
 9782 0454 01E0     		b	.L489
 9783              	.L488:
 9784              		.loc 1 2584 0 discriminator 2
 9785 0456 40F66213 		movw	r3, #2402
ARM GAS  /tmp/ccfQkuUX.s 			page 217


 9786              	.L489:
 9787              		.loc 1 2584 0 discriminator 4
 9788 045a 3A4A     		ldr	r2, .L498+60
 9789 045c 1380     		strh	r3, [r2]	@ movhi
2585:bluetooth_rxtx.c **** 			restart_jamming = 1;
 9790              		.loc 1 2585 0 is_stmt 1 discriminator 4
 9791 045e 3A4B     		ldr	r3, .L498+64
 9792 0460 0122     		movs	r2, #1
 9793 0462 1A60     		str	r2, [r3]
 9794              	.L484:
2586:bluetooth_rxtx.c **** 		}
2587:bluetooth_rxtx.c **** 
2588:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 9795              		.loc 1 2588 0
 9796 0464 294B     		ldr	r3, .L498+4
 9797 0466 DB88     		ldrh	r3, [r3, #6]
 9798 0468 2C20     		movs	r0, #44
 9799 046a 1946     		mov	r1, r3
 9800 046c FFF7FEFF 		bl	cc2400_set
2589:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 9801              		.loc 1 2589 0
 9802 0470 264B     		ldr	r3, .L498+4
 9803 0472 9B88     		ldrh	r3, [r3, #4]
 9804 0474 2D20     		movs	r0, #45
 9805 0476 1946     		mov	r1, r3
 9806 0478 FFF7FEFF 		bl	cc2400_set
2590:bluetooth_rxtx.c **** 
2591:bluetooth_rxtx.c **** 		if (do_hop)
 9807              		.loc 1 2591 0
 9808 047c 334B     		ldr	r3, .L498+68
 9809 047e 1B78     		ldrb	r3, [r3]
 9810 0480 DBB2     		uxtb	r3, r3
 9811 0482 002B     		cmp	r3, #0
 9812 0484 01D0     		beq	.L490
2592:bluetooth_rxtx.c **** 			hop();
 9813              		.loc 1 2592 0
 9814 0486 FFF7FEFF 		bl	hop
 9815              	.L490:
2593:bluetooth_rxtx.c **** 
2594:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2595:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 9816              		.loc 1 2595 0
 9817 048a 294B     		ldr	r3, .L498+40
 9818 048c 1B68     		ldr	r3, [r3]
 9819 048e 002B     		cmp	r3, #0
 9820 0490 07DD     		ble	.L491
2596:bluetooth_rxtx.c **** 			le_jam();
 9821              		.loc 1 2596 0
 9822 0492 FFF7FEFF 		bl	le_jam
2597:bluetooth_rxtx.c **** 			--le_jam_count;
 9823              		.loc 1 2597 0
 9824 0496 264B     		ldr	r3, .L498+40
 9825 0498 1B68     		ldr	r3, [r3]
 9826 049a 013B     		subs	r3, r3, #1
 9827 049c 244A     		ldr	r2, .L498+40
 9828 049e 1360     		str	r3, [r2]
 9829 04a0 17E0     		b	.L492
ARM GAS  /tmp/ccfQkuUX.s 			page 218


 9830              	.L491:
2598:bluetooth_rxtx.c **** 		} else {
2599:bluetooth_rxtx.c **** 			/* RX mode */
2600:bluetooth_rxtx.c **** 			dma_init_le();
 9831              		.loc 1 2600 0
 9832 04a2 FFF7FEFF 		bl	dma_init_le
2601:bluetooth_rxtx.c **** 			dio_ssp_start();
 9833              		.loc 1 2601 0
 9834 04a6 FFF7FEFF 		bl	dio_ssp_start
2602:bluetooth_rxtx.c **** 
2603:bluetooth_rxtx.c **** 			if (restart_jamming) {
 9835              		.loc 1 2603 0
 9836 04aa 274B     		ldr	r3, .L498+64
 9837 04ac 1B68     		ldr	r3, [r3]
 9838 04ae 002B     		cmp	r3, #0
 9839 04b0 0CD0     		beq	.L493
2604:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 9840              		.loc 1 2604 0
 9841 04b2 164B     		ldr	r3, .L498+4
 9842 04b4 1B68     		ldr	r3, [r3]
 9843 04b6 1846     		mov	r0, r3
 9844 04b8 FFF7FEFF 		bl	rbit
 9845 04bc 0346     		mov	r3, r0
 9846 04be 1846     		mov	r0, r3
 9847 04c0 FFF7FEFF 		bl	cc2400_rx_sync
2605:bluetooth_rxtx.c **** 				restart_jamming = 0;
 9848              		.loc 1 2605 0
 9849 04c4 204B     		ldr	r3, .L498+64
 9850 04c6 0022     		movs	r2, #0
 9851 04c8 1A60     		str	r2, [r3]
 9852 04ca 02E0     		b	.L492
 9853              	.L493:
2606:bluetooth_rxtx.c **** 			} else {
2607:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 9854              		.loc 1 2607 0
 9855 04cc 6220     		movs	r0, #98
 9856 04ce FFF7FEFF 		bl	cc2400_strobe
 9857              	.L492:
2608:bluetooth_rxtx.c **** 			}
2609:bluetooth_rxtx.c **** 		}
2610:bluetooth_rxtx.c **** 
2611:bluetooth_rxtx.c **** 		rx_tc = 0;
 9858              		.loc 1 2611 0
 9859 04d2 1F4B     		ldr	r3, .L498+72
 9860 04d4 0022     		movs	r2, #0
 9861 04d6 1A60     		str	r2, [r3]
2612:bluetooth_rxtx.c **** 		rx_err = 0;
 9862              		.loc 1 2612 0
 9863 04d8 1E4B     		ldr	r3, .L498+76
 9864 04da 0022     		movs	r2, #0
 9865 04dc 1A60     		str	r2, [r3]
 9866              	.L451:
 9867              	.LBE14:
2446:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 9868              		.loc 1 2446 0
 9869 04de 174B     		ldr	r3, .L498+52
 9870 04e0 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 219


 9871 04e2 DBB2     		uxtb	r3, r3
 9872 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 9873 04e6 9A42     		cmp	r2, r3
 9874 04e8 3FF4B1AD 		beq	.L495
 9875              	.L494:
2613:bluetooth_rxtx.c **** 	}
2614:bluetooth_rxtx.c **** 
2615:bluetooth_rxtx.c **** cleanup:
2616:bluetooth_rxtx.c **** 
2617:bluetooth_rxtx.c **** 	// disable USB interrupts
2618:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 9876              		.loc 1 2618 0
 9877 04ec 1A4B     		ldr	r3, .L498+80
 9878 04ee 4FF08072 		mov	r2, #16777216
 9879 04f2 1A60     		str	r2, [r3]
2619:bluetooth_rxtx.c **** 
2620:bluetooth_rxtx.c **** 	// reset the radio completely
2621:bluetooth_rxtx.c **** 	cc2400_idle();
 9880              		.loc 1 2621 0
 9881 04f4 FFF7FEFF 		bl	cc2400_idle
2622:bluetooth_rxtx.c **** 	dio_ssp_stop();
 9882              		.loc 1 2622 0
 9883 04f8 FFF7FEFF 		bl	dio_ssp_stop
2623:bluetooth_rxtx.c **** 	cs_trigger_disable();
 9884              		.loc 1 2623 0
 9885 04fc FFF7FEFF 		bl	cs_trigger_disable
2624:bluetooth_rxtx.c **** }
 9886              		.loc 1 2624 0
 9887 0500 6C37     		adds	r7, r7, #108
 9888              		.cfi_def_cfa_offset 12
 9889 0502 BD46     		mov	sp, r7
 9890              		.cfi_def_cfa_register 13
 9891              		@ sp needed
 9892 0504 90BD     		pop	{r4, r7, pc}
 9893              	.L499:
 9894 0506 00BF     		.align	2
 9895              	.L498:
 9896 0508 00000000 		.word	rxbuf1
 9897 050c 00000000 		.word	le
 9898 0510 38C00920 		.word	537509944
 9899 0514 00000000 		.word	packet_cb
 9900 0518 00000000 		.word	clkn
 9901 051c 08400040 		.word	1073758216
 9902 0520 24000340 		.word	1073938468
 9903 0524 08000340 		.word	1073938440
 9904 0528 0C000340 		.word	1073938444
 9905 052c 80F0FA02 		.word	50000000
 9906 0530 00000000 		.word	le_jam_count
 9907 0534 3CC00920 		.word	537509948
 9908 0538 00000000 		.word	jam_mode
 9909 053c 00000000 		.word	requested_mode
 9910 0540 00000000 		.word	saved_request
 9911 0544 00000000 		.word	channel
 9912 0548 D4000000 		.word	restart_jamming.4909
 9913 054c 00000000 		.word	do_hop
 9914 0550 00000000 		.word	rx_tc
 9915 0554 00000000 		.word	rx_err
ARM GAS  /tmp/ccfQkuUX.s 			page 220


 9916 0558 80E100E0 		.word	-536813184
 9917              		.cfi_endproc
 9918              	.LFE40:
 9920              		.section	.text.cb_follow_le,"ax",%progbits
 9921              		.align	2
 9922              		.global	cb_follow_le
 9923              		.thumb
 9924              		.thumb_func
 9926              	cb_follow_le:
 9927              	.LFB41:
2625:bluetooth_rxtx.c **** 
2626:bluetooth_rxtx.c **** 
2627:bluetooth_rxtx.c **** 
2628:bluetooth_rxtx.c **** /* low energy connection following
2629:bluetooth_rxtx.c ****  * follows a known AA around */
2630:bluetooth_rxtx.c **** int cb_follow_le() {
 9928              		.loc 1 2630 0
 9929              		.cfi_startproc
 9930              		@ args = 0, pretend = 0, frame = 48
 9931              		@ frame_needed = 1, uses_anonymous_args = 0
 9932 0000 80B5     		push	{r7, lr}
 9933              		.cfi_def_cfa_offset 8
 9934              		.cfi_offset 7, -8
 9935              		.cfi_offset 14, -4
 9936 0002 8CB0     		sub	sp, sp, #48
 9937              		.cfi_def_cfa_offset 56
 9938 0004 00AF     		add	r7, sp, #0
 9939              		.cfi_def_cfa_register 7
2631:bluetooth_rxtx.c **** 	int i, j, k;
2632:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 9940              		.loc 1 2632 0
 9941 0006 6C4B     		ldr	r3, .L516
 9942 0008 1B88     		ldrh	r3, [r3]	@ movhi
 9943 000a 9BB2     		uxth	r3, r3
 9944 000c DBB2     		uxtb	r3, r3
 9945 000e 623B     		subs	r3, r3, #98
 9946 0010 DBB2     		uxtb	r3, r3
 9947 0012 1846     		mov	r0, r3
 9948 0014 FFF7FEFF 		bl	btle_channel_index
 9949 0018 0346     		mov	r3, r0
 9950 001a 1A46     		mov	r2, r3
 9951 001c 674B     		ldr	r3, .L516+4
 9952 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9953 0020 3B62     		str	r3, [r7, #32]
2633:bluetooth_rxtx.c **** 
2634:bluetooth_rxtx.c **** 	u32 access_address = 0;
 9954              		.loc 1 2634 0
 9955 0022 0023     		movs	r3, #0
 9956 0024 FB61     		str	r3, [r7, #28]
2635:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 9957              		.loc 1 2635 0
 9958 0026 0023     		movs	r3, #0
 9959 0028 FB62     		str	r3, [r7, #44]
 9960 002a 0EE0     		b	.L501
 9961              	.L502:
2636:bluetooth_rxtx.c **** 		access_address >>= 1;
 9962              		.loc 1 2636 0 discriminator 3
ARM GAS  /tmp/ccfQkuUX.s 			page 221


 9963 002c FB69     		ldr	r3, [r7, #28]
 9964 002e 5B08     		lsrs	r3, r3, #1
 9965 0030 FB61     		str	r3, [r7, #28]
2637:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 9966              		.loc 1 2637 0 discriminator 3
 9967 0032 634A     		ldr	r2, .L516+8
 9968 0034 FB6A     		ldr	r3, [r7, #44]
 9969 0036 1344     		add	r3, r3, r2
 9970 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9971 003a DB07     		lsls	r3, r3, #31
 9972 003c 1A46     		mov	r2, r3
 9973 003e FB69     		ldr	r3, [r7, #28]
 9974 0040 1343     		orrs	r3, r3, r2
 9975 0042 FB61     		str	r3, [r7, #28]
2635:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 9976              		.loc 1 2635 0 discriminator 3
 9977 0044 FB6A     		ldr	r3, [r7, #44]
 9978 0046 0133     		adds	r3, r3, #1
 9979 0048 FB62     		str	r3, [r7, #44]
 9980              	.L501:
2635:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 9981              		.loc 1 2635 0 is_stmt 0 discriminator 1
 9982 004a FB6A     		ldr	r3, [r7, #44]
 9983 004c 1E2B     		cmp	r3, #30
 9984 004e EDDD     		ble	.L502
2638:bluetooth_rxtx.c **** 	}
2639:bluetooth_rxtx.c **** 
2640:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 9985              		.loc 1 2640 0 is_stmt 1
 9986 0050 1F23     		movs	r3, #31
 9987 0052 FB62     		str	r3, [r7, #44]
 9988 0054 A6E0     		b	.L503
 9989              	.L514:
2641:bluetooth_rxtx.c **** 		access_address >>= 1;
 9990              		.loc 1 2641 0
 9991 0056 FB69     		ldr	r3, [r7, #28]
 9992 0058 5B08     		lsrs	r3, r3, #1
 9993 005a FB61     		str	r3, [r7, #28]
2642:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 9994              		.loc 1 2642 0
 9995 005c 584A     		ldr	r2, .L516+8
 9996 005e FB6A     		ldr	r3, [r7, #44]
 9997 0060 1344     		add	r3, r3, r2
 9998 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9999 0064 DB07     		lsls	r3, r3, #31
 10000 0066 1A46     		mov	r2, r3
 10001 0068 FB69     		ldr	r3, [r7, #28]
 10002 006a 1343     		orrs	r3, r3, r2
 10003 006c FB61     		str	r3, [r7, #28]
2643:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 10004              		.loc 1 2643 0
 10005 006e 554B     		ldr	r3, .L516+12
 10006 0070 1A68     		ldr	r2, [r3]
 10007 0072 FB69     		ldr	r3, [r7, #28]
 10008 0074 9A42     		cmp	r2, r3
 10009 0076 40F09280 		bne	.L504
2644:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
ARM GAS  /tmp/ccfQkuUX.s 			page 222


 10010              		.loc 1 2644 0
 10011 007a 0023     		movs	r3, #0
 10012 007c BB62     		str	r3, [r7, #40]
 10013 007e 48E0     		b	.L505
 10014              	.L511:
 10015              	.LBB19:
2645:bluetooth_rxtx.c **** 				u8 byte = 0;
 10016              		.loc 1 2645 0
 10017 0080 0023     		movs	r3, #0
 10018 0082 FB76     		strb	r3, [r7, #27]
2646:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 10019              		.loc 1 2646 0
 10020 0084 0023     		movs	r3, #0
 10021 0086 7B62     		str	r3, [r7, #36]
 10022 0088 37E0     		b	.L506
 10023              	.L510:
 10024              	.LBB20:
2647:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 10025              		.loc 1 2647 0
 10026 008a BB6A     		ldr	r3, [r7, #40]
 10027 008c DA00     		lsls	r2, r3, #3
 10028 008e 7B6A     		ldr	r3, [r7, #36]
 10029 0090 1A44     		add	r2, r2, r3
 10030 0092 FB6A     		ldr	r3, [r7, #44]
 10031 0094 1344     		add	r3, r3, r2
 10032 0096 1F3B     		subs	r3, r3, #31
 10033 0098 3B61     		str	r3, [r7, #16]
2648:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 10034              		.loc 1 2648 0
 10035 009a 3B69     		ldr	r3, [r7, #16]
 10036 009c B3F5487F 		cmp	r3, #800
 10037 00a0 00DB     		blt	.L507
 10038 00a2 2DE0     		b	.L508
 10039              	.L507:
2649:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 10040              		.loc 1 2649 0
 10041 00a4 464A     		ldr	r2, .L516+8
 10042 00a6 3B69     		ldr	r3, [r7, #16]
 10043 00a8 1344     		add	r3, r3, r2
 10044 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10045 00ac 7B61     		str	r3, [r7, #20]
2650:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 10046              		.loc 1 2650 0
 10047 00ae BB6A     		ldr	r3, [r7, #40]
 10048 00b0 032B     		cmp	r3, #3
 10049 00b2 16DD     		ble	.L509
2651:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 10050              		.loc 1 2651 0
 10051 00b4 444A     		ldr	r2, .L516+16
 10052 00b6 3B6A     		ldr	r3, [r7, #32]
 10053 00b8 1344     		add	r3, r3, r2
 10054 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10055 00bc 1A46     		mov	r2, r3
 10056 00be 7B69     		ldr	r3, [r7, #20]
 10057 00c0 5340     		eors	r3, r3, r2
 10058 00c2 7B61     		str	r3, [r7, #20]
2652:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
ARM GAS  /tmp/ccfQkuUX.s 			page 223


 10059              		.loc 1 2652 0
 10060 00c4 3B6A     		ldr	r3, [r7, #32]
 10061 00c6 0133     		adds	r3, r3, #1
 10062 00c8 1946     		mov	r1, r3
 10063 00ca 404B     		ldr	r3, .L516+20
 10064 00cc A1FB0323 		umull	r2, r3, r1, r3
 10065 00d0 C81A     		subs	r0, r1, r3
 10066 00d2 4008     		lsrs	r0, r0, #1
 10067 00d4 0344     		add	r3, r3, r0
 10068 00d6 9A09     		lsrs	r2, r3, #6
 10069 00d8 1346     		mov	r3, r2
 10070 00da DB01     		lsls	r3, r3, #7
 10071 00dc 9B1A     		subs	r3, r3, r2
 10072 00de CA1A     		subs	r2, r1, r3
 10073 00e0 3A62     		str	r2, [r7, #32]
 10074              	.L509:
2653:bluetooth_rxtx.c **** 					}
2654:bluetooth_rxtx.c **** 					byte |= bit << k;
 10075              		.loc 1 2654 0 discriminator 2
 10076 00e2 7A69     		ldr	r2, [r7, #20]
 10077 00e4 7B6A     		ldr	r3, [r7, #36]
 10078 00e6 02FA03F3 		lsl	r3, r2, r3
 10079 00ea DAB2     		uxtb	r2, r3
 10080 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 10081 00ee 1343     		orrs	r3, r3, r2
 10082 00f0 DBB2     		uxtb	r3, r3
 10083 00f2 FB76     		strb	r3, [r7, #27]
 10084              	.LBE20:
2646:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 10085              		.loc 1 2646 0 discriminator 2
 10086 00f4 7B6A     		ldr	r3, [r7, #36]
 10087 00f6 0133     		adds	r3, r3, #1
 10088 00f8 7B62     		str	r3, [r7, #36]
 10089              	.L506:
2646:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 10090              		.loc 1 2646 0 is_stmt 0 discriminator 1
 10091 00fa 7B6A     		ldr	r3, [r7, #36]
 10092 00fc 072B     		cmp	r3, #7
 10093 00fe C4DD     		ble	.L510
 10094              	.L508:
2655:bluetooth_rxtx.c **** 				}
2656:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 10095              		.loc 1 2656 0 is_stmt 1 discriminator 2
 10096 0100 334B     		ldr	r3, .L516+24
 10097 0102 1A68     		ldr	r2, [r3]
 10098 0104 BB6A     		ldr	r3, [r7, #40]
 10099 0106 1344     		add	r3, r3, r2
 10100 0108 FA7E     		ldrb	r2, [r7, #27]
 10101 010a 1A70     		strb	r2, [r3]
 10102              	.LBE19:
2644:bluetooth_rxtx.c **** 				u8 byte = 0;
 10103              		.loc 1 2644 0 discriminator 2
 10104 010c BB6A     		ldr	r3, [r7, #40]
 10105 010e 0133     		adds	r3, r3, #1
 10106 0110 BB62     		str	r3, [r7, #40]
 10107              	.L505:
2644:bluetooth_rxtx.c **** 				u8 byte = 0;
ARM GAS  /tmp/ccfQkuUX.s 			page 224


 10108              		.loc 1 2644 0 is_stmt 0 discriminator 1
 10109 0112 BB6A     		ldr	r3, [r7, #40]
 10110 0114 2D2B     		cmp	r3, #45
 10111 0116 B3DD     		ble	.L511
2657:bluetooth_rxtx.c **** 			}
2658:bluetooth_rxtx.c **** 
2659:bluetooth_rxtx.c **** 			// verify CRC
2660:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 10112              		.loc 1 2660 0 is_stmt 1
 10113 0118 2A4B     		ldr	r3, .L516+12
 10114 011a 1B69     		ldr	r3, [r3, #16]
 10115 011c 002B     		cmp	r3, #0
 10116 011e 2ED0     		beq	.L512
 10117              	.LBB21:
2661:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 10118              		.loc 1 2661 0
 10119 0120 2B4B     		ldr	r3, .L516+24
 10120 0122 1B68     		ldr	r3, [r3]
 10121 0124 0533     		adds	r3, r3, #5
 10122 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10123 0128 03F03F03 		and	r3, r3, #63
 10124 012c 0233     		adds	r3, r3, #2
 10125 012e FB60     		str	r3, [r7, #12]
2662:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 10126              		.loc 1 2662 0
 10127 0130 244B     		ldr	r3, .L516+12
 10128 0132 DA68     		ldr	r2, [r3, #12]
 10129 0134 264B     		ldr	r3, .L516+24
 10130 0136 1B68     		ldr	r3, [r3]
 10131 0138 0433     		adds	r3, r3, #4
 10132 013a 1046     		mov	r0, r2
 10133 013c 1946     		mov	r1, r3
 10134 013e FA68     		ldr	r2, [r7, #12]
 10135 0140 FFF7FEFF 		bl	btle_crcgen_lut
 10136 0144 B860     		str	r0, [r7, #8]
2663:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 10137              		.loc 1 2663 0
 10138 0146 224B     		ldr	r3, .L516+24
 10139 0148 1A68     		ldr	r2, [r3]
 10140 014a FB68     		ldr	r3, [r7, #12]
 10141 014c 0633     		adds	r3, r3, #6
 10142 014e 1344     		add	r3, r3, r2
 10143 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10144 0152 1A04     		lsls	r2, r3, #16
2664:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 10145              		.loc 1 2664 0
 10146 0154 1E4B     		ldr	r3, .L516+24
 10147 0156 1968     		ldr	r1, [r3]
 10148 0158 FB68     		ldr	r3, [r7, #12]
 10149 015a 0533     		adds	r3, r3, #5
 10150 015c 0B44     		add	r3, r3, r1
 10151 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10152 0160 1B02     		lsls	r3, r3, #8
 10153 0162 1343     		orrs	r3, r3, r2
2665:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 10154              		.loc 1 2665 0
 10155 0164 1A4A     		ldr	r2, .L516+24
ARM GAS  /tmp/ccfQkuUX.s 			page 225


 10156 0166 1268     		ldr	r2, [r2]
 10157 0168 F968     		ldr	r1, [r7, #12]
 10158 016a 0431     		adds	r1, r1, #4
 10159 016c 0A44     		add	r2, r2, r1
 10160 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 10161 0170 1343     		orrs	r3, r3, r2
2663:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 10162              		.loc 1 2663 0
 10163 0172 7B60     		str	r3, [r7, #4]
2666:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 10164              		.loc 1 2666 0
 10165 0174 BA68     		ldr	r2, [r7, #8]
 10166 0176 7B68     		ldr	r3, [r7, #4]
 10167 0178 9A42     		cmp	r2, r3
 10168 017a 00D0     		beq	.L512
2667:bluetooth_rxtx.c **** 					break;
 10169              		.loc 1 2667 0
 10170 017c 17E0     		b	.L513
 10171              	.L512:
 10172              	.LBE21:
2668:bluetooth_rxtx.c **** 			}
2669:bluetooth_rxtx.c **** 
2670:bluetooth_rxtx.c **** 			// send to PC
2671:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 10173              		.loc 1 2671 0
 10174 017e 144B     		ldr	r3, .L516+24
 10175 0180 1B68     		ldr	r3, [r3]
 10176 0182 0120     		movs	r0, #1
 10177 0184 1946     		mov	r1, r3
 10178 0186 FFF7FEFF 		bl	enqueue
2672:bluetooth_rxtx.c **** 			RXLED_SET;
 10179              		.loc 1 2672 0
 10180 018a 124B     		ldr	r3, .L516+28
 10181 018c 1022     		movs	r2, #16
 10182 018e 1A60     		str	r2, [r3]
2673:bluetooth_rxtx.c **** 
2674:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 10183              		.loc 1 2674 0
 10184 0190 114B     		ldr	r3, .L516+32
 10185 0192 1B68     		ldr	r3, [r3]
 10186 0194 0E4A     		ldr	r2, .L516+24
 10187 0196 1268     		ldr	r2, [r2]
 10188 0198 1046     		mov	r0, r2
 10189 019a 9847     		blx	r3
2675:bluetooth_rxtx.c **** 
2676:bluetooth_rxtx.c **** 			break;
 10190              		.loc 1 2676 0
 10191 019c 07E0     		b	.L513
 10192              	.L504:
2640:bluetooth_rxtx.c **** 		access_address >>= 1;
 10193              		.loc 1 2640 0 discriminator 2
 10194 019e FB6A     		ldr	r3, [r7, #44]
 10195 01a0 0133     		adds	r3, r3, #1
 10196 01a2 FB62     		str	r3, [r7, #44]
 10197              	.L503:
2640:bluetooth_rxtx.c **** 		access_address >>= 1;
 10198              		.loc 1 2640 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccfQkuUX.s 			page 226


 10199 01a4 FB6A     		ldr	r3, [r7, #44]
 10200 01a6 B3F5D87F 		cmp	r3, #432
 10201 01aa FFF654AF 		blt	.L514
 10202              	.L513:
2677:bluetooth_rxtx.c **** 		}
2678:bluetooth_rxtx.c **** 	}
2679:bluetooth_rxtx.c **** 
2680:bluetooth_rxtx.c **** 	return 1;
 10203              		.loc 1 2680 0 is_stmt 1
 10204 01ae 0123     		movs	r3, #1
2681:bluetooth_rxtx.c **** }
 10205              		.loc 1 2681 0
 10206 01b0 1846     		mov	r0, r3
 10207 01b2 3037     		adds	r7, r7, #48
 10208              		.cfi_def_cfa_offset 8
 10209 01b4 BD46     		mov	sp, r7
 10210              		.cfi_def_cfa_register 13
 10211              		@ sp needed
 10212 01b6 80BD     		pop	{r7, pc}
 10213              	.L517:
 10214              		.align	2
 10215              	.L516:
 10216 01b8 00000000 		.word	channel
 10217 01bc C0000000 		.word	whitening_index
 10218 01c0 00000000 		.word	unpacked
 10219 01c4 00000000 		.word	le
 10220 01c8 40000000 		.word	whitening
 10221 01cc 11080402 		.word	33818641
 10222 01d0 00000000 		.word	idle_rxbuf
 10223 01d4 38C00920 		.word	537509944
 10224 01d8 00000000 		.word	packet_cb
 10225              		.cfi_endproc
 10226              	.LFE41:
 10228              		.section	.text.connection_follow_cb,"ax",%progbits
 10229              		.align	2
 10230              		.global	connection_follow_cb
 10231              		.thumb
 10232              		.thumb_func
 10234              	connection_follow_cb:
 10235              	.LFB42:
2682:bluetooth_rxtx.c **** 
2683:bluetooth_rxtx.c **** /**
2684:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2685:bluetooth_rxtx.c ****  */
2686:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 10236              		.loc 1 2686 0
 10237              		.cfi_startproc
 10238              		@ args = 0, pretend = 0, frame = 40
 10239              		@ frame_needed = 1, uses_anonymous_args = 0
 10240 0000 80B5     		push	{r7, lr}
 10241              		.cfi_def_cfa_offset 8
 10242              		.cfi_offset 7, -8
 10243              		.cfi_offset 14, -4
 10244 0002 8AB0     		sub	sp, sp, #40
 10245              		.cfi_def_cfa_offset 48
 10246 0004 00AF     		add	r7, sp, #0
 10247              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccfQkuUX.s 			page 227


 10248 0006 7860     		str	r0, [r7, #4]
2687:bluetooth_rxtx.c **** 	int i;
2688:bluetooth_rxtx.c **** 	u32 aa = 0;
 10249              		.loc 1 2688 0
 10250 0008 0023     		movs	r3, #0
 10251 000a 3B62     		str	r3, [r7, #32]
2689:bluetooth_rxtx.c **** 
2690:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2691:bluetooth_rxtx.c **** #define HEADER_IDX 4
2692:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2693:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2694:bluetooth_rxtx.c **** 
2695:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 10252              		.loc 1 2695 0
 10253 000c 7B68     		ldr	r3, [r7, #4]
 10254 000e FB61     		str	r3, [r7, #28]
2696:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 10255              		.loc 1 2696 0
 10256 0010 7B68     		ldr	r3, [r7, #4]
 10257 0012 1B79     		ldrb	r3, [r3, #4]
 10258 0014 FB76     		strb	r3, [r7, #27]
2697:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 10259              		.loc 1 2697 0
 10260 0016 7B68     		ldr	r3, [r7, #4]
 10261 0018 0533     		adds	r3, r3, #5
 10262 001a 7B61     		str	r3, [r7, #20]
2698:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 10263              		.loc 1 2698 0
 10264 001c 7B68     		ldr	r3, [r7, #4]
 10265 001e 0633     		adds	r3, r3, #6
 10266 0020 3B61     		str	r3, [r7, #16]
2699:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 10267              		.loc 1 2699 0
 10268 0022 7B69     		ldr	r3, [r7, #20]
 10269 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10270 0026 0633     		adds	r3, r3, #6
 10271 0028 1A46     		mov	r2, r3
 10272 002a 7B68     		ldr	r3, [r7, #4]
 10273 002c 1344     		add	r3, r3, r2
 10274 002e FB60     		str	r3, [r7, #12]
2700:bluetooth_rxtx.c **** 
2701:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 10275              		.loc 1 2701 0
 10276 0030 8B4B     		ldr	r3, .L528
 10277 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 10278 0034 022B     		cmp	r3, #2
 10279 0036 1CD1     		bne	.L519
2702:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2703:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 10280              		.loc 1 2703 0
 10281 0038 894B     		ldr	r3, .L528
 10282 003a 0322     		movs	r2, #3
 10283 003c 1A75     		strb	r2, [r3, #20]
2704:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 10284              		.loc 1 2704 0
 10285 003e 894B     		ldr	r3, .L528+4
 10286 0040 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 228


 10287 0042 874A     		ldr	r2, .L528
 10288 0044 9361     		str	r3, [r2, #24]
2705:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 10289              		.loc 1 2705 0
 10290 0046 864B     		ldr	r3, .L528
 10291 0048 DB8B     		ldrh	r3, [r3, #30]
 10292 004a 013B     		subs	r3, r3, #1
 10293 004c 9AB2     		uxth	r2, r3
 10294 004e 844B     		ldr	r3, .L528
 10295 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2706:bluetooth_rxtx.c **** 		le.conn_count = 0;
 10296              		.loc 1 2706 0
 10297 0052 834B     		ldr	r3, .L528
 10298 0054 0022     		movs	r2, #0
 10299 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2707:bluetooth_rxtx.c **** 		le.update_pending = 0;
 10300              		.loc 1 2707 0
 10301 0058 814B     		ldr	r3, .L528
 10302 005a 0022     		movs	r2, #0
 10303 005c 9A62     		str	r2, [r3, #40]
2708:bluetooth_rxtx.c **** 
2709:bluetooth_rxtx.c **** 		// hue hue hue
2710:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 10304              		.loc 1 2710 0
 10305 005e 824B     		ldr	r3, .L528+8
 10306 0060 1B78     		ldrb	r3, [r3]
 10307 0062 DBB2     		uxtb	r3, r3
 10308 0064 002B     		cmp	r3, #0
 10309 0066 00F0F780 		beq	.L518
2711:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 10310              		.loc 1 2711 0
 10311 006a 804B     		ldr	r3, .L528+12
 10312 006c 2822     		movs	r2, #40
 10313 006e 1A60     		str	r2, [r3]
 10314 0070 F2E0     		b	.L518
 10315              	.L519:
2712:bluetooth_rxtx.c **** 
2713:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 10316              		.loc 1 2713 0
 10317 0072 7B4B     		ldr	r3, .L528
 10318 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 10319 0076 032B     		cmp	r3, #3
 10320 0078 6FD1     		bne	.L522
 10321              	.LBB22:
2714:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 10322              		.loc 1 2714 0
 10323 007a FB7E     		ldrb	r3, [r7, #27]
 10324 007c 03F00303 		and	r3, r3, #3
 10325 0080 FB72     		strb	r3, [r7, #11]
2715:bluetooth_rxtx.c **** 
2716:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2717:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 10326              		.loc 1 2717 0
 10327 0082 774B     		ldr	r3, .L528
 10328 0084 9B6A     		ldr	r3, [r3, #40]
 10329 0086 002B     		cmp	r3, #0
 10330 0088 21D0     		beq	.L523
ARM GAS  /tmp/ccfQkuUX.s 			page 229


 10331              		.loc 1 2717 0 is_stmt 0 discriminator 1
 10332 008a 754B     		ldr	r3, .L528
 10333 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 10334 008e 9AB2     		uxth	r2, r3
 10335 0090 734B     		ldr	r3, .L528
 10336 0092 9B8D     		ldrh	r3, [r3, #44]
 10337 0094 9A42     		cmp	r2, r3
 10338 0096 1AD1     		bne	.L523
2718:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2719:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 10339              		.loc 1 2719 0 is_stmt 1
 10340 0098 724B     		ldr	r3, .L528+4
 10341 009a 1B68     		ldr	r3, [r3]
 10342 009c 704A     		ldr	r2, .L528
 10343 009e 9361     		str	r3, [r2, #24]
2720:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 10344              		.loc 1 2720 0
 10345 00a0 6F4B     		ldr	r3, .L528
 10346 00a2 DA8D     		ldrh	r2, [r3, #46]
 10347 00a4 6E4B     		ldr	r3, .L528
 10348 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2721:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 10349              		.loc 1 2721 0
 10350 00a8 6D4B     		ldr	r3, .L528
 10351 00aa DB8D     		ldrh	r3, [r3, #46]
 10352 00ac 013B     		subs	r3, r3, #1
 10353 00ae 9AB2     		uxth	r2, r3
 10354 00b0 6B4B     		ldr	r3, .L528
 10355 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2722:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 10356              		.loc 1 2722 0
 10357 00b4 6A4B     		ldr	r3, .L528
 10358 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 10359 00ba 694B     		ldr	r3, .L528
 10360 00bc 83F82220 		strb	r2, [r3, #34]
2723:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 10361              		.loc 1 2723 0
 10362 00c0 674B     		ldr	r3, .L528
 10363 00c2 5A8E     		ldrh	r2, [r3, #50]
 10364 00c4 664B     		ldr	r3, .L528
 10365 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2724:bluetooth_rxtx.c **** 			le.update_pending = 0;
 10366              		.loc 1 2724 0
 10367 00c8 654B     		ldr	r3, .L528
 10368 00ca 0022     		movs	r2, #0
 10369 00cc 9A62     		str	r2, [r3, #40]
 10370              	.L523:
2725:bluetooth_rxtx.c **** 		}
2726:bluetooth_rxtx.c **** 
2727:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 10371              		.loc 1 2727 0
 10372 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 10373 00d0 032B     		cmp	r3, #3
 10374 00d2 41D1     		bne	.L524
 10375              		.loc 1 2727 0 is_stmt 0 discriminator 1
 10376 00d4 3B69     		ldr	r3, [r7, #16]
 10377 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccfQkuUX.s 			page 230


 10378 00d8 002B     		cmp	r3, #0
 10379 00da 3DD1     		bne	.L524
2728:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2729:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2730:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 10380              		.loc 1 2730 0 is_stmt 1
 10381 00dc 7B68     		ldr	r3, [r7, #4]
 10382 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 10383 00e0 5F4B     		ldr	r3, .L528
 10384 00e2 83F83020 		strb	r2, [r3, #48]
2731:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 10385              		.loc 1 2731 0
 10386 00e6 7B68     		ldr	r3, [r7, #4]
 10387 00e8 0833     		adds	r3, r3, #8
 10388 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10389 00ec 9AB2     		uxth	r2, r3
 10390 00ee 7B68     		ldr	r3, [r7, #4]
 10391 00f0 0933     		adds	r3, r3, #9
 10392 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10393 00f4 9BB2     		uxth	r3, r3
 10394 00f6 1B02     		lsls	r3, r3, #8
 10395 00f8 9BB2     		uxth	r3, r3
 10396 00fa 1344     		add	r3, r3, r2
 10397 00fc 9AB2     		uxth	r2, r3
 10398 00fe 584B     		ldr	r3, .L528
 10399 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2732:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 10400              		.loc 1 2732 0
 10401 0102 7B68     		ldr	r3, [r7, #4]
 10402 0104 0A33     		adds	r3, r3, #10
 10403 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10404 0108 9AB2     		uxth	r2, r3
 10405 010a 7B68     		ldr	r3, [r7, #4]
 10406 010c 0B33     		adds	r3, r3, #11
 10407 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10408 0110 9BB2     		uxth	r3, r3
 10409 0112 1B02     		lsls	r3, r3, #8
 10410 0114 9BB2     		uxth	r3, r3
 10411 0116 1344     		add	r3, r3, r2
 10412 0118 9AB2     		uxth	r2, r3
 10413 011a 514B     		ldr	r3, .L528
 10414 011c DA85     		strh	r2, [r3, #46]	@ movhi
2733:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 10415              		.loc 1 2733 0
 10416 011e 7B68     		ldr	r3, [r7, #4]
 10417 0120 1033     		adds	r3, r3, #16
 10418 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10419 0124 9AB2     		uxth	r2, r3
 10420 0126 7B68     		ldr	r3, [r7, #4]
 10421 0128 1133     		adds	r3, r3, #17
 10422 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10423 012c 9BB2     		uxth	r3, r3
 10424 012e 1B02     		lsls	r3, r3, #8
 10425 0130 9BB2     		uxth	r3, r3
 10426 0132 1344     		add	r3, r3, r2
 10427 0134 9AB2     		uxth	r2, r3
 10428 0136 4A4B     		ldr	r3, .L528
ARM GAS  /tmp/ccfQkuUX.s 			page 231


 10429 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2734:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 10430              		.loc 1 2734 0
 10431 013a 494B     		ldr	r3, .L528
 10432 013c 9B8D     		ldrh	r3, [r3, #44]
 10433 013e 1A46     		mov	r2, r3
 10434 0140 474B     		ldr	r3, .L528
 10435 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 10436 0144 9BB2     		uxth	r3, r3
 10437 0146 D31A     		subs	r3, r2, r3
 10438 0148 47F6FE72 		movw	r2, #32766
 10439 014c 9342     		cmp	r3, r2
 10440 014e 03DC     		bgt	.L524
2735:bluetooth_rxtx.c **** 				le.update_pending = 1;
 10441              		.loc 1 2735 0
 10442 0150 434B     		ldr	r3, .L528
 10443 0152 0122     		movs	r2, #1
 10444 0154 9A62     		str	r2, [r3, #40]
 10445              	.LBE22:
 10446 0156 7FE0     		b	.L518
 10447              	.L524:
 10448 0158 7EE0     		b	.L518
 10449              	.L522:
2736:bluetooth_rxtx.c **** 		}
2737:bluetooth_rxtx.c **** 
2738:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 10450              		.loc 1 2738 0
 10451 015a 414B     		ldr	r3, .L528
 10452 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 10453 015e 012B     		cmp	r3, #1
 10454 0160 7AD1     		bne	.L518
 10455              	.LBB23:
2739:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 10456              		.loc 1 2739 0
 10457 0162 7B68     		ldr	r3, [r7, #4]
 10458 0164 0433     		adds	r3, r3, #4
 10459 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10460 0168 03F00F03 		and	r3, r3, #15
 10461 016c BB72     		strb	r3, [r7, #10]
2740:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 10462              		.loc 1 2740 0
 10463 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 10464 0170 052B     		cmp	r3, #5
 10465 0172 71D1     		bne	.L518
2741:bluetooth_rxtx.c **** 			// This is a connect packet
2742:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2743:bluetooth_rxtx.c **** 			if (le.target_set &&
 10466              		.loc 1 2743 0
 10467 0174 3A4B     		ldr	r3, .L528
 10468 0176 DB6B     		ldr	r3, [r3, #60]
 10469 0178 002B     		cmp	r3, #0
 10470 017a 14D0     		beq	.L525
2744:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 10471              		.loc 1 2744 0 discriminator 1
 10472 017c 7B68     		ldr	r3, [r7, #4]
 10473 017e 0633     		adds	r3, r3, #6
 10474 0180 3B48     		ldr	r0, .L528+16
ARM GAS  /tmp/ccfQkuUX.s 			page 232


 10475 0182 1946     		mov	r1, r3
 10476 0184 0622     		movs	r2, #6
 10477 0186 FFF7FEFF 		bl	memcmp
 10478 018a 0346     		mov	r3, r0
2743:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 10479              		.loc 1 2743 0 discriminator 1
 10480 018c 002B     		cmp	r3, #0
 10481 018e 0AD0     		beq	.L525
2745:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 10482              		.loc 1 2745 0
 10483 0190 7B68     		ldr	r3, [r7, #4]
 10484 0192 0C33     		adds	r3, r3, #12
 10485 0194 3648     		ldr	r0, .L528+16
 10486 0196 1946     		mov	r1, r3
 10487 0198 0622     		movs	r2, #6
 10488 019a FFF7FEFF 		bl	memcmp
 10489 019e 0346     		mov	r3, r0
2744:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 10490              		.loc 1 2744 0
 10491 01a0 002B     		cmp	r3, #0
 10492 01a2 00D0     		beq	.L525
2746:bluetooth_rxtx.c **** 				return;
 10493              		.loc 1 2746 0
 10494 01a4 58E0     		b	.L518
 10495              	.L525:
2747:bluetooth_rxtx.c **** 			}
2748:bluetooth_rxtx.c **** 
2749:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 10496              		.loc 1 2749 0
 10497 01a6 2E4B     		ldr	r3, .L528
 10498 01a8 0222     		movs	r2, #2
 10499 01aa 1A75     		strb	r2, [r3, #20]
2750:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 10500              		.loc 1 2750 0
 10501 01ac 2C4B     		ldr	r3, .L528
 10502 01ae 0022     		movs	r2, #0
 10503 01b0 1A61     		str	r2, [r3, #16]
2751:bluetooth_rxtx.c **** 
2752:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 10504              		.loc 1 2752 0
 10505 01b2 0023     		movs	r3, #0
 10506 01b4 7B62     		str	r3, [r7, #36]
 10507 01b6 11E0     		b	.L526
 10508              	.L527:
2753:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 10509              		.loc 1 2753 0 discriminator 3
 10510 01b8 7B6A     		ldr	r3, [r7, #36]
 10511 01ba 1233     		adds	r3, r3, #18
 10512 01bc 1A46     		mov	r2, r3
 10513 01be 7B68     		ldr	r3, [r7, #4]
 10514 01c0 1344     		add	r3, r3, r2
 10515 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10516 01c4 1A46     		mov	r2, r3
 10517 01c6 7B6A     		ldr	r3, [r7, #36]
 10518 01c8 DB00     		lsls	r3, r3, #3
 10519 01ca 02FA03F3 		lsl	r3, r2, r3
 10520 01ce 1A46     		mov	r2, r3
ARM GAS  /tmp/ccfQkuUX.s 			page 233


 10521 01d0 3B6A     		ldr	r3, [r7, #32]
 10522 01d2 1343     		orrs	r3, r3, r2
 10523 01d4 3B62     		str	r3, [r7, #32]
2752:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 10524              		.loc 1 2752 0 discriminator 3
 10525 01d6 7B6A     		ldr	r3, [r7, #36]
 10526 01d8 0133     		adds	r3, r3, #1
 10527 01da 7B62     		str	r3, [r7, #36]
 10528              	.L526:
2752:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 10529              		.loc 1 2752 0 is_stmt 0 discriminator 1
 10530 01dc 7B6A     		ldr	r3, [r7, #36]
 10531 01de 032B     		cmp	r3, #3
 10532 01e0 EADD     		ble	.L527
2754:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 10533              		.loc 1 2754 0 is_stmt 1
 10534 01e2 386A     		ldr	r0, [r7, #32]
 10535 01e4 FFF7FEFF 		bl	le_set_access_address
2755:bluetooth_rxtx.c **** 
2756:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2757:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 10536              		.loc 1 2757 0
 10537 01e8 7B68     		ldr	r3, [r7, #4]
 10538 01ea 1833     		adds	r3, r3, #24
 10539 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10540 01ee 1A04     		lsls	r2, r3, #16
2758:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 10541              		.loc 1 2758 0
 10542 01f0 7B68     		ldr	r3, [r7, #4]
 10543 01f2 1733     		adds	r3, r3, #23
 10544 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10545 01f6 1B02     		lsls	r3, r3, #8
 10546 01f8 1343     		orrs	r3, r3, r2
2759:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 10547              		.loc 1 2759 0
 10548 01fa 7A68     		ldr	r2, [r7, #4]
 10549 01fc 1632     		adds	r2, r2, #22
 10550 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 10551 0200 1343     		orrs	r3, r3, r2
2757:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 10552              		.loc 1 2757 0
 10553 0202 1A46     		mov	r2, r3
 10554 0204 164B     		ldr	r3, .L528
 10555 0206 9A60     		str	r2, [r3, #8]
2760:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 10556              		.loc 1 2760 0
 10557 0208 154B     		ldr	r3, .L528
 10558 020a 9B68     		ldr	r3, [r3, #8]
 10559 020c 1846     		mov	r0, r3
 10560 020e FFF7FEFF 		bl	rbit
 10561 0212 0246     		mov	r2, r0
 10562 0214 124B     		ldr	r3, .L528
 10563 0216 DA60     		str	r2, [r3, #12]
2761:bluetooth_rxtx.c **** 
2762:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2763:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 10564              		.loc 1 2763 0
ARM GAS  /tmp/ccfQkuUX.s 			page 234


 10565 0218 7B68     		ldr	r3, [r7, #4]
 10566 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 10567 021c 104B     		ldr	r3, .L528
 10568 021e 83F82220 		strb	r2, [r3, #34]
2764:bluetooth_rxtx.c **** 
2765:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2766:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 10569              		.loc 1 2766 0
 10570 0222 7B68     		ldr	r3, [r7, #4]
 10571 0224 1A33     		adds	r3, r3, #26
 10572 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10573 0228 9AB2     		uxth	r2, r3
 10574 022a 0D4B     		ldr	r3, .L528
 10575 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2767:bluetooth_rxtx.c **** 
2768:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2769:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 10576              		.loc 1 2769 0
 10577 022e 7B68     		ldr	r3, [r7, #4]
 10578 0230 1C33     		adds	r3, r3, #28
 10579 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10580 0234 9AB2     		uxth	r2, r3
 10581 0236 0A4B     		ldr	r3, .L528
 10582 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2770:bluetooth_rxtx.c **** 
2771:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2772:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 10583              		.loc 1 2772 0
 10584 023a 7B68     		ldr	r3, [r7, #4]
 10585 023c 2733     		adds	r3, r3, #39
 10586 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 10587 0240 03F01F03 		and	r3, r3, #31
 10588 0244 DAB2     		uxtb	r2, r3
 10589 0246 064B     		ldr	r3, .L528
 10590 0248 9A75     		strb	r2, [r3, #22]
2773:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 10591              		.loc 1 2773 0
 10592 024a 054B     		ldr	r3, .L528
 10593 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 10594 024e 044B     		ldr	r3, .L528
 10595 0250 5A75     		strb	r2, [r3, #21]
2774:bluetooth_rxtx.c **** 
2775:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2776:bluetooth_rxtx.c **** 			do_hop = 1;
 10596              		.loc 1 2776 0
 10597 0252 084B     		ldr	r3, .L528+20
 10598 0254 0122     		movs	r2, #1
 10599 0256 1A70     		strb	r2, [r3]
 10600              	.L518:
 10601              	.LBE23:
2777:bluetooth_rxtx.c **** 		}
2778:bluetooth_rxtx.c **** 	}
2779:bluetooth_rxtx.c **** }
 10602              		.loc 1 2779 0
 10603 0258 2837     		adds	r7, r7, #40
 10604              		.cfi_def_cfa_offset 8
 10605 025a BD46     		mov	sp, r7
ARM GAS  /tmp/ccfQkuUX.s 			page 235


 10606              		.cfi_def_cfa_register 13
 10607              		@ sp needed
 10608 025c 80BD     		pop	{r7, pc}
 10609              	.L529:
 10610 025e 00BF     		.align	2
 10611              	.L528:
 10612 0260 00000000 		.word	le
 10613 0264 00000000 		.word	clkn
 10614 0268 00000000 		.word	jam_mode
 10615 026c 00000000 		.word	le_jam_count
 10616 0270 34000000 		.word	le+52
 10617 0274 00000000 		.word	do_hop
 10618              		.cfi_endproc
 10619              	.LFE42:
 10621              		.section	.text.bt_follow_le,"ax",%progbits
 10622              		.align	2
 10623              		.global	bt_follow_le
 10624              		.thumb
 10625              		.thumb_func
 10627              	bt_follow_le:
 10628              	.LFB43:
2780:bluetooth_rxtx.c **** 
2781:bluetooth_rxtx.c **** void bt_follow_le() {
 10629              		.loc 1 2781 0
 10630              		.cfi_startproc
 10631              		@ args = 0, pretend = 0, frame = 0
 10632              		@ frame_needed = 1, uses_anonymous_args = 0
 10633 0000 80B5     		push	{r7, lr}
 10634              		.cfi_def_cfa_offset 8
 10635              		.cfi_offset 7, -8
 10636              		.cfi_offset 14, -4
 10637 0002 00AF     		add	r7, sp, #0
 10638              		.cfi_def_cfa_register 7
2782:bluetooth_rxtx.c **** 	reset_le();
 10639              		.loc 1 2782 0
 10640 0004 FFF7FEFF 		bl	reset_le
2783:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 10641              		.loc 1 2783 0
 10642 0008 044B     		ldr	r3, .L531
 10643 000a 054A     		ldr	r2, .L531+4
 10644 000c 1A60     		str	r2, [r3]
2784:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 10645              		.loc 1 2784 0
 10646 000e 0920     		movs	r0, #9
 10647 0010 FFF7FEFF 		bl	bt_le_sync
2785:bluetooth_rxtx.c **** 
2786:bluetooth_rxtx.c **** 	/* old non-sync mode
2787:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2788:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2789:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2790:bluetooth_rxtx.c **** 	*/
2791:bluetooth_rxtx.c **** 
2792:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10648              		.loc 1 2792 0
 10649 0014 034B     		ldr	r3, .L531+8
 10650 0016 0022     		movs	r2, #0
 10651 0018 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 236


2793:bluetooth_rxtx.c **** }
 10652              		.loc 1 2793 0
 10653 001a 80BD     		pop	{r7, pc}
 10654              	.L532:
 10655              		.align	2
 10656              	.L531:
 10657 001c 00000000 		.word	packet_cb
 10658 0020 00000000 		.word	connection_follow_cb
 10659 0024 00000000 		.word	mode
 10660              		.cfi_endproc
 10661              	.LFE43:
 10663              		.section	.text.le_promisc_state,"ax",%progbits
 10664              		.align	2
 10665              		.global	le_promisc_state
 10666              		.thumb
 10667              		.thumb_func
 10669              	le_promisc_state:
 10670              	.LFB44:
2794:bluetooth_rxtx.c **** 
2795:bluetooth_rxtx.c **** // issue state change message
2796:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 10671              		.loc 1 2796 0
 10672              		.cfi_startproc
 10673              		@ args = 0, pretend = 0, frame = 72
 10674              		@ frame_needed = 1, uses_anonymous_args = 0
 10675 0000 80B5     		push	{r7, lr}
 10676              		.cfi_def_cfa_offset 8
 10677              		.cfi_offset 7, -8
 10678              		.cfi_offset 14, -4
 10679 0002 92B0     		sub	sp, sp, #72
 10680              		.cfi_def_cfa_offset 80
 10681 0004 00AF     		add	r7, sp, #0
 10682              		.cfi_def_cfa_register 7
 10683 0006 0346     		mov	r3, r0
 10684 0008 B960     		str	r1, [r7, #8]
 10685 000a 7A60     		str	r2, [r7, #4]
 10686 000c FB73     		strb	r3, [r7, #15]
2797:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 10687              		.loc 1 2797 0
 10688 000e 07F11403 		add	r3, r7, #20
 10689 0012 0022     		movs	r2, #0
 10690 0014 1A60     		str	r2, [r3]
 10691 0016 0433     		adds	r3, r3, #4
 10692 0018 0022     		movs	r2, #0
 10693 001a 1A60     		str	r2, [r3]
 10694 001c 0433     		adds	r3, r3, #4
 10695 001e 0022     		movs	r2, #0
 10696 0020 1A60     		str	r2, [r3]
 10697 0022 0433     		adds	r3, r3, #4
 10698 0024 0022     		movs	r2, #0
 10699 0026 1A60     		str	r2, [r3]
 10700 0028 0433     		adds	r3, r3, #4
 10701 002a 0022     		movs	r2, #0
 10702 002c 1A60     		str	r2, [r3]
 10703 002e 0433     		adds	r3, r3, #4
 10704 0030 0022     		movs	r2, #0
 10705 0032 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 237


 10706 0034 0433     		adds	r3, r3, #4
 10707 0036 0022     		movs	r2, #0
 10708 0038 1A60     		str	r2, [r3]
 10709 003a 0433     		adds	r3, r3, #4
 10710 003c 0022     		movs	r2, #0
 10711 003e 1A60     		str	r2, [r3]
 10712 0040 0433     		adds	r3, r3, #4
 10713 0042 0022     		movs	r2, #0
 10714 0044 1A60     		str	r2, [r3]
 10715 0046 0433     		adds	r3, r3, #4
 10716 0048 0022     		movs	r2, #0
 10717 004a 1A60     		str	r2, [r3]
 10718 004c 0433     		adds	r3, r3, #4
 10719 004e 0022     		movs	r2, #0
 10720 0050 1A60     		str	r2, [r3]
 10721 0052 0433     		adds	r3, r3, #4
 10722 0054 0022     		movs	r2, #0
 10723 0056 1A60     		str	r2, [r3]
 10724 0058 0433     		adds	r3, r3, #4
 10725 005a 0022     		movs	r2, #0
 10726 005c 1A80     		strh	r2, [r3]	@ movhi
 10727 005e 0233     		adds	r3, r3, #2
2798:bluetooth_rxtx.c **** 	if (len > 49)
 10728              		.loc 1 2798 0
 10729 0060 7B68     		ldr	r3, [r7, #4]
 10730 0062 312B     		cmp	r3, #49
 10731 0064 01D9     		bls	.L534
2799:bluetooth_rxtx.c **** 		len = 49;
 10732              		.loc 1 2799 0
 10733 0066 3123     		movs	r3, #49
 10734 0068 7B60     		str	r3, [r7, #4]
 10735              	.L534:
2800:bluetooth_rxtx.c **** 
2801:bluetooth_rxtx.c **** 	buf[0] = type;
 10736              		.loc 1 2801 0
 10737 006a FB7B     		ldrb	r3, [r7, #15]
 10738 006c 3B75     		strb	r3, [r7, #20]
2802:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 10739              		.loc 1 2802 0
 10740 006e 07F11403 		add	r3, r7, #20
 10741 0072 0133     		adds	r3, r3, #1
 10742 0074 1846     		mov	r0, r3
 10743 0076 B968     		ldr	r1, [r7, #8]
 10744 0078 7A68     		ldr	r2, [r7, #4]
 10745 007a FFF7FEFF 		bl	memcpy
2803:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 10746              		.loc 1 2803 0
 10747 007e 07F11403 		add	r3, r7, #20
 10748 0082 0520     		movs	r0, #5
 10749 0084 1946     		mov	r1, r3
 10750 0086 FFF7FEFF 		bl	enqueue
2804:bluetooth_rxtx.c **** }
 10751              		.loc 1 2804 0
 10752 008a 4837     		adds	r7, r7, #72
 10753              		.cfi_def_cfa_offset 8
 10754 008c BD46     		mov	sp, r7
 10755              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccfQkuUX.s 			page 238


 10756              		@ sp needed
 10757 008e 80BD     		pop	{r7, pc}
 10758              		.cfi_endproc
 10759              	.LFE44:
 10761              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 10762              		.align	2
 10763              		.global	promisc_recover_hop_increment
 10764              		.thumb
 10765              		.thumb_func
 10767              	promisc_recover_hop_increment:
 10768              	.LFB45:
2805:bluetooth_rxtx.c **** 
2806:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2807:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2808:bluetooth_rxtx.c **** 
2809:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 10769              		.loc 1 2809 0
 10770              		.cfi_startproc
 10771              		@ args = 0, pretend = 0, frame = 16
 10772              		@ frame_needed = 1, uses_anonymous_args = 0
 10773 0000 80B5     		push	{r7, lr}
 10774              		.cfi_def_cfa_offset 8
 10775              		.cfi_offset 7, -8
 10776              		.cfi_offset 14, -4
 10777 0002 84B0     		sub	sp, sp, #16
 10778              		.cfi_def_cfa_offset 24
 10779 0004 00AF     		add	r7, sp, #0
 10780              		.cfi_def_cfa_register 7
 10781 0006 7860     		str	r0, [r7, #4]
2810:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2811:bluetooth_rxtx.c **** 	if (channel == 2404) {
 10782              		.loc 1 2811 0
 10783 0008 554B     		ldr	r3, .L542
 10784 000a 1B88     		ldrh	r3, [r3]	@ movhi
 10785 000c 9BB2     		uxth	r3, r3
 10786 000e 40F66412 		movw	r2, #2404
 10787 0012 9342     		cmp	r3, r2
 10788 0014 14D1     		bne	.L536
2812:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 10789              		.loc 1 2812 0
 10790 0016 534B     		ldr	r3, .L542+4
 10791 0018 1B68     		ldr	r3, [r3]
 10792 001a C3F31303 		ubfx	r3, r3, #0, #20
 10793 001e 40F63542 		movw	r2, #3125
 10794 0022 02FB03F2 		mul	r2, r2, r3
 10795 0026 504B     		ldr	r3, .L542+8
 10796 0028 1B68     		ldr	r3, [r3]
 10797 002a 1344     		add	r3, r3, r2
 10798 002c 4F4A     		ldr	r2, .L542+12
 10799 002e 1360     		str	r3, [r2]
2813:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 10800              		.loc 1 2813 0
 10801 0030 4F4B     		ldr	r3, .L542+16
 10802 0032 40F66612 		movw	r2, #2406
 10803 0036 1A80     		strh	r2, [r3]	@ movhi
2814:bluetooth_rxtx.c **** 		do_hop = 1;
 10804              		.loc 1 2814 0
ARM GAS  /tmp/ccfQkuUX.s 			page 239


 10805 0038 4E4B     		ldr	r3, .L542+20
 10806 003a 0122     		movs	r2, #1
 10807 003c 1A70     		strb	r2, [r3]
 10808 003e 8BE0     		b	.L535
 10809              	.L536:
2815:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 10810              		.loc 1 2815 0
 10811 0040 474B     		ldr	r3, .L542
 10812 0042 1B88     		ldrh	r3, [r3]	@ movhi
 10813 0044 9BB2     		uxth	r3, r3
 10814 0046 40F66612 		movw	r2, #2406
 10815 004a 9342     		cmp	r3, r2
 10816 004c 7DD1     		bne	.L538
 10817              	.LBB24:
2816:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 10818              		.loc 1 2816 0
 10819 004e 454B     		ldr	r3, .L542+4
 10820 0050 1B68     		ldr	r3, [r3]
 10821 0052 C3F31303 		ubfx	r3, r3, #0, #20
 10822 0056 40F63542 		movw	r2, #3125
 10823 005a 02FB03F2 		mul	r2, r2, r3
 10824 005e 424B     		ldr	r3, .L542+8
 10825 0060 1B68     		ldr	r3, [r3]
 10826 0062 1344     		add	r3, r3, r2
 10827 0064 FB60     		str	r3, [r7, #12]
2817:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 10828              		.loc 1 2817 0
 10829 0066 414B     		ldr	r3, .L542+12
 10830 0068 1B68     		ldr	r3, [r3]
 10831 006a FA68     		ldr	r2, [r7, #12]
 10832 006c 9A42     		cmp	r2, r3
 10833 006e 05D2     		bcs	.L539
2818:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 10834              		.loc 1 2818 0
 10835 0070 FB68     		ldr	r3, [r7, #12]
 10836 0072 03F14343 		add	r3, r3, #-1023410176
 10837 0076 03F5A003 		add	r3, r3, #5242880
 10838 007a FB60     		str	r3, [r7, #12]
 10839              	.L539:
2819:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2820:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 10840              		.loc 1 2820 0
 10841 007c 3B4B     		ldr	r3, .L542+12
 10842 007e 1B68     		ldr	r3, [r3]
 10843 0080 FA68     		ldr	r2, [r7, #12]
 10844 0082 D21A     		subs	r2, r2, r3
 10845 0084 3C4B     		ldr	r3, .L542+24
 10846 0086 DB8B     		ldrh	r3, [r3, #30]
 10847 0088 1946     		mov	r1, r3
 10848 008a 43F2D403 		movw	r3, #12500
 10849 008e 03FB01F3 		mul	r3, r3, r1
 10850 0092 D90F     		lsrs	r1, r3, #31
 10851 0094 0B44     		add	r3, r3, r1
 10852 0096 5B10     		asrs	r3, r3, #1
 10853 0098 1344     		add	r3, r3, r2
 10854 009a 374A     		ldr	r2, .L542+24
 10855 009c D28B     		ldrh	r2, [r2, #30]
ARM GAS  /tmp/ccfQkuUX.s 			page 240


 10856 009e 1146     		mov	r1, r2
 10857 00a0 43F2D402 		movw	r2, #12500
 10858 00a4 02FB01F2 		mul	r2, r2, r1
 10859 00a8 B3FBF2F3 		udiv	r3, r3, r2
 10860 00ac BB60     		str	r3, [r7, #8]
2821:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2822:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 10861              		.loc 1 2822 0
 10862 00ae BB68     		ldr	r3, [r7, #8]
 10863 00b0 242B     		cmp	r3, #36
 10864 00b2 42D8     		bhi	.L540
2823:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2824:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 10865              		.loc 1 2824 0
 10866 00b4 314A     		ldr	r2, .L542+28
 10867 00b6 BB68     		ldr	r3, [r7, #8]
 10868 00b8 1344     		add	r3, r3, r2
 10869 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 10870 00bc 2E4B     		ldr	r3, .L542+24
 10871 00be 9A75     		strb	r2, [r3, #22]
2825:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 10872              		.loc 1 2825 0
 10873 00c0 2D4B     		ldr	r3, .L542+24
 10874 00c2 DB8B     		ldrh	r3, [r3, #30]
 10875 00c4 5B08     		lsrs	r3, r3, #1
 10876 00c6 9AB2     		uxth	r2, r3
 10877 00c8 2B4B     		ldr	r3, .L542+24
 10878 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2826:bluetooth_rxtx.c **** 			le.conn_count = 0;
 10879              		.loc 1 2826 0
 10880 00cc 2A4B     		ldr	r3, .L542+24
 10881 00ce 0022     		movs	r2, #0
 10882 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2827:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 10883              		.loc 1 2827 0
 10884 00d2 294B     		ldr	r3, .L542+24
 10885 00d4 0022     		movs	r2, #0
 10886 00d6 9A61     		str	r2, [r3, #24]
2828:bluetooth_rxtx.c **** 			do_hop = 0;
 10887              		.loc 1 2828 0
 10888 00d8 264B     		ldr	r3, .L542+20
 10889 00da 0022     		movs	r2, #0
 10890 00dc 1A70     		strb	r2, [r3]
2829:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2830:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 10891              		.loc 1 2830 0
 10892 00de 264B     		ldr	r3, .L542+24
 10893 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 10894 00e2 5A1C     		adds	r2, r3, #1
 10895 00e4 264B     		ldr	r3, .L542+32
 10896 00e6 82FB0301 		smull	r0, r1, r2, r3
 10897 00ea 5318     		adds	r3, r2, r1
 10898 00ec 5911     		asrs	r1, r3, #5
 10899 00ee D317     		asrs	r3, r2, #31
 10900 00f0 C91A     		subs	r1, r1, r3
 10901 00f2 0B46     		mov	r3, r1
 10902 00f4 DB00     		lsls	r3, r3, #3
ARM GAS  /tmp/ccfQkuUX.s 			page 241


 10903 00f6 0B44     		add	r3, r3, r1
 10904 00f8 9B00     		lsls	r3, r3, #2
 10905 00fa 0B44     		add	r3, r3, r1
 10906 00fc D11A     		subs	r1, r2, r3
 10907 00fe CAB2     		uxtb	r2, r1
 10908 0100 1D4B     		ldr	r3, .L542+24
 10909 0102 5A75     		strb	r2, [r3, #21]
2831:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 10910              		.loc 1 2831 0
 10911 0104 1C4B     		ldr	r3, .L542+24
 10912 0106 0322     		movs	r2, #3
 10913 0108 1A75     		strb	r2, [r3, #20]
2832:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 10914              		.loc 1 2832 0
 10915 010a 1B4B     		ldr	r3, .L542+24
 10916 010c 0022     		movs	r2, #0
 10917 010e 1A61     		str	r2, [r3, #16]
2833:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 10918              		.loc 1 2833 0
 10919 0110 1C4B     		ldr	r3, .L542+36
 10920 0112 0322     		movs	r2, #3
 10921 0114 1A70     		strb	r2, [r3]
2834:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 10922              		.loc 1 2834 0
 10923 0116 1C4B     		ldr	r3, .L542+40
 10924 0118 1C4A     		ldr	r2, .L542+44
 10925 011a 1A60     		str	r2, [r3]
2835:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 10926              		.loc 1 2835 0
 10927 011c 0320     		movs	r0, #3
 10928 011e 1C49     		ldr	r1, .L542+48
 10929 0120 0122     		movs	r2, #1
 10930 0122 FFF7FEFF 		bl	le_promisc_state
2836:bluetooth_rxtx.c **** 
2837:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 10931              		.loc 1 2837 0
 10932 0126 1B4B     		ldr	r3, .L542+52
 10933 0128 1B78     		ldrb	r3, [r3]
 10934 012a DBB2     		uxtb	r3, r3
 10935 012c 002B     		cmp	r3, #0
 10936 012e 03D0     		beq	.L541
2838:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 10937              		.loc 1 2838 0
 10938 0130 194B     		ldr	r3, .L542+56
 10939 0132 2822     		movs	r2, #40
 10940 0134 1A60     		str	r2, [r3]
2839:bluetooth_rxtx.c **** 
2840:bluetooth_rxtx.c **** 			return;
 10941              		.loc 1 2840 0
 10942 0136 0FE0     		b	.L535
 10943              	.L541:
 10944 0138 0EE0     		b	.L535
 10945              	.L540:
2841:bluetooth_rxtx.c **** 		}
2842:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 10946              		.loc 1 2842 0
 10947 013a 0D4B     		ldr	r3, .L542+16
ARM GAS  /tmp/ccfQkuUX.s 			page 242


 10948 013c 40F66412 		movw	r2, #2404
 10949 0140 1A80     		strh	r2, [r3]	@ movhi
2843:bluetooth_rxtx.c **** 		do_hop = 1;
 10950              		.loc 1 2843 0
 10951 0142 0C4B     		ldr	r3, .L542+20
 10952 0144 0122     		movs	r2, #1
 10953 0146 1A70     		strb	r2, [r3]
 10954              	.LBE24:
 10955 0148 06E0     		b	.L535
 10956              	.L538:
2844:bluetooth_rxtx.c **** 	}
2845:bluetooth_rxtx.c **** 	else {
2846:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 10957              		.loc 1 2846 0
 10958 014a 094B     		ldr	r3, .L542+16
 10959 014c 40F66412 		movw	r2, #2404
 10960 0150 1A80     		strh	r2, [r3]	@ movhi
2847:bluetooth_rxtx.c **** 		do_hop = 1;
 10961              		.loc 1 2847 0
 10962 0152 084B     		ldr	r3, .L542+20
 10963 0154 0122     		movs	r2, #1
 10964 0156 1A70     		strb	r2, [r3]
 10965              	.L535:
2848:bluetooth_rxtx.c **** 	}
2849:bluetooth_rxtx.c **** }
 10966              		.loc 1 2849 0
 10967 0158 1037     		adds	r7, r7, #16
 10968              		.cfi_def_cfa_offset 8
 10969 015a BD46     		mov	sp, r7
 10970              		.cfi_def_cfa_register 13
 10971              		@ sp needed
 10972 015c 80BD     		pop	{r7, pc}
 10973              	.L543:
 10974 015e 00BF     		.align	2
 10975              	.L542:
 10976 0160 00000000 		.word	channel
 10977 0164 00000000 		.word	clkn
 10978 0168 08400040 		.word	1073758216
 10979 016c D8000000 		.word	first_ts.5007
 10980 0170 00000000 		.word	hop_direct_channel
 10981 0174 00000000 		.word	do_hop
 10982 0178 00000000 		.word	le
 10983 017c E8000000 		.word	hop_interval_lut
 10984 0180 A7C867DD 		.word	-580400985
 10985 0184 00000000 		.word	hop_mode
 10986 0188 00000000 		.word	packet_cb
 10987 018c 00000000 		.word	connection_follow_cb
 10988 0190 16000000 		.word	le+22
 10989 0194 00000000 		.word	jam_mode
 10990 0198 00000000 		.word	le_jam_count
 10991              		.cfi_endproc
 10992              	.LFE45:
 10994              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 10995              		.align	2
 10996              		.global	promisc_recover_hop_interval
 10997              		.thumb
 10998              		.thumb_func
ARM GAS  /tmp/ccfQkuUX.s 			page 243


 11000              	promisc_recover_hop_interval:
 11001              	.LFB46:
2850:bluetooth_rxtx.c **** 
2851:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 11002              		.loc 1 2851 0
 11003              		.cfi_startproc
 11004              		@ args = 0, pretend = 0, frame = 24
 11005              		@ frame_needed = 1, uses_anonymous_args = 0
 11006 0000 80B5     		push	{r7, lr}
 11007              		.cfi_def_cfa_offset 8
 11008              		.cfi_offset 7, -8
 11009              		.cfi_offset 14, -4
 11010 0002 86B0     		sub	sp, sp, #24
 11011              		.cfi_def_cfa_offset 32
 11012 0004 00AF     		add	r7, sp, #0
 11013              		.cfi_def_cfa_register 7
 11014 0006 7860     		str	r0, [r7, #4]
2852:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2853:bluetooth_rxtx.c **** 
2854:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 11015              		.loc 1 2854 0
 11016 0008 334B     		ldr	r3, .L552
 11017 000a 1B68     		ldr	r3, [r3]
 11018 000c C3F31303 		ubfx	r3, r3, #0, #20
 11019 0010 40F63542 		movw	r2, #3125
 11020 0014 02FB03F2 		mul	r2, r2, r3
 11021 0018 304B     		ldr	r3, .L552+4
 11022 001a 1B68     		ldr	r3, [r3]
 11023 001c 1344     		add	r3, r3, r2
 11024 001e 7B61     		str	r3, [r7, #20]
2855:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 11025              		.loc 1 2855 0
 11026 0020 2F4B     		ldr	r3, .L552+8
 11027 0022 1B68     		ldr	r3, [r3]
 11028 0024 7A69     		ldr	r2, [r7, #20]
 11029 0026 9A42     		cmp	r2, r3
 11030 0028 03D2     		bcs	.L545
2856:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 11031              		.loc 1 2856 0
 11032 002a 7A69     		ldr	r2, [r7, #20]
 11033 002c 2D4B     		ldr	r3, .L552+12
 11034 002e 1344     		add	r3, r3, r2
 11035 0030 7B61     		str	r3, [r7, #20]
 11036              	.L545:
2857:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 11037              		.loc 1 2857 0
 11038 0032 2B4B     		ldr	r3, .L552+8
 11039 0034 1B68     		ldr	r3, [r3]
 11040 0036 7A69     		ldr	r2, [r7, #20]
 11041 0038 D31A     		subs	r3, r2, r3
 11042 003a 3B61     		str	r3, [r7, #16]
2858:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2859:bluetooth_rxtx.c **** 
2860:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2861:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 11043              		.loc 1 2861 0
 11044 003c 3B69     		ldr	r3, [r7, #16]
ARM GAS  /tmp/ccfQkuUX.s 			page 244


 11045 003e 46F2A712 		movw	r2, #24999
 11046 0042 9342     		cmp	r3, r2
 11047 0044 00D8     		bhi	.L546
2862:bluetooth_rxtx.c **** 		return;
 11048              		.loc 1 2862 0
 11049 0046 43E0     		b	.L544
 11050              	.L546:
2863:bluetooth_rxtx.c **** 
2864:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 11051              		.loc 1 2864 0
 11052 0048 274B     		ldr	r3, .L552+16
 11053 004a D3F80021 		ldr	r2, [r3, #256]
 11054 004e 3B69     		ldr	r3, [r7, #16]
 11055 0050 9A42     		cmp	r2, r3
 11056 0052 03D9     		bls	.L548
2865:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 11057              		.loc 1 2865 0
 11058 0054 244A     		ldr	r2, .L552+16
 11059 0056 3B69     		ldr	r3, [r7, #16]
 11060 0058 C2F80031 		str	r3, [r2, #256]
 11061              	.L548:
2866:bluetooth_rxtx.c **** 
2867:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 11062              		.loc 1 2867 0
 11063 005c 224B     		ldr	r3, .L552+16
 11064 005e D3F80031 		ldr	r3, [r3, #256]
 11065 0062 03F56133 		add	r3, r3, #230400
 11066 0066 03F25233 		addw	r3, r3, #850
 11067 006a 204A     		ldr	r2, .L552+20
 11068 006c A2FB0323 		umull	r2, r3, r2, r3
 11069 0070 9B0C     		lsrs	r3, r3, #18
 11070 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2868:bluetooth_rxtx.c **** 
2869:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 11071              		.loc 1 2869 0
 11072 0074 1E4B     		ldr	r3, .L552+24
 11073 0076 DB8B     		ldrh	r3, [r3, #30]
 11074 0078 FA89     		ldrh	r2, [r7, #14]
 11075 007a 9A42     		cmp	r2, r3
 11076 007c 1ED1     		bne	.L549
2870:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2871:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 11077              		.loc 1 2871 0
 11078 007e 1A4B     		ldr	r3, .L552+16
 11079 0080 D3F80431 		ldr	r3, [r3, #260]
 11080 0084 0133     		adds	r3, r3, #1
 11081 0086 184A     		ldr	r2, .L552+16
 11082 0088 C2F80431 		str	r3, [r2, #260]
2872:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 11083              		.loc 1 2872 0
 11084 008c 164B     		ldr	r3, .L552+16
 11085 008e D3F80431 		ldr	r3, [r3, #260]
 11086 0092 052B     		cmp	r3, #5
 11087 0094 19D1     		bne	.L551
2873:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 11088              		.loc 1 2873 0
 11089 0096 174B     		ldr	r3, .L552+28
ARM GAS  /tmp/ccfQkuUX.s 			page 245


 11090 0098 174A     		ldr	r2, .L552+32
 11091 009a 1A60     		str	r2, [r3]
2874:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 11092              		.loc 1 2874 0
 11093 009c 174B     		ldr	r3, .L552+36
 11094 009e 40F66412 		movw	r2, #2404
 11095 00a2 1A80     		strh	r2, [r3]	@ movhi
2875:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 11096              		.loc 1 2875 0
 11097 00a4 164B     		ldr	r3, .L552+40
 11098 00a6 0422     		movs	r2, #4
 11099 00a8 1A70     		strb	r2, [r3]
2876:bluetooth_rxtx.c **** 			do_hop = 1;
 11100              		.loc 1 2876 0
 11101 00aa 164B     		ldr	r3, .L552+44
 11102 00ac 0122     		movs	r2, #1
 11103 00ae 1A70     		strb	r2, [r3]
2877:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 11104              		.loc 1 2877 0
 11105 00b0 0220     		movs	r0, #2
 11106 00b2 1549     		ldr	r1, .L552+48
 11107 00b4 0222     		movs	r2, #2
 11108 00b6 FFF7FEFF 		bl	le_promisc_state
 11109 00ba 06E0     		b	.L551
 11110              	.L549:
2878:bluetooth_rxtx.c **** 		}
2879:bluetooth_rxtx.c **** 	} else {
2880:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 11111              		.loc 1 2880 0
 11112 00bc 0C4A     		ldr	r2, .L552+24
 11113 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 11114 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2881:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 11115              		.loc 1 2881 0
 11116 00c2 094B     		ldr	r3, .L552+16
 11117 00c4 0022     		movs	r2, #0
 11118 00c6 C3F80421 		str	r2, [r3, #260]
 11119              	.L551:
2882:bluetooth_rxtx.c **** 	}
2883:bluetooth_rxtx.c **** 
2884:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 11120              		.loc 1 2884 0
 11121 00ca 054A     		ldr	r2, .L552+8
 11122 00cc 7B69     		ldr	r3, [r7, #20]
 11123 00ce 1360     		str	r3, [r2]
 11124              	.L544:
2885:bluetooth_rxtx.c **** }
 11125              		.loc 1 2885 0
 11126 00d0 1837     		adds	r7, r7, #24
 11127              		.cfi_def_cfa_offset 8
 11128 00d2 BD46     		mov	sp, r7
 11129              		.cfi_def_cfa_register 13
 11130              		@ sp needed
 11131 00d4 80BD     		pop	{r7, pc}
 11132              	.L553:
 11133 00d6 00BF     		.align	2
 11134              	.L552:
ARM GAS  /tmp/ccfQkuUX.s 			page 246


 11135 00d8 00000000 		.word	clkn
 11136 00dc 08400040 		.word	1073758216
 11137 00e0 DC000000 		.word	prev_clk.5013
 11138 00e4 C0ABC6C2 		.word	-1027167296
 11139 00e8 00000000 		.word	le_promisc
 11140 00ec C1A91991 		.word	-1860589119
 11141 00f0 00000000 		.word	le
 11142 00f4 00000000 		.word	packet_cb
 11143 00f8 00000000 		.word	promisc_recover_hop_increment
 11144 00fc 00000000 		.word	hop_direct_channel
 11145 0100 00000000 		.word	hop_mode
 11146 0104 00000000 		.word	do_hop
 11147 0108 1E000000 		.word	le+30
 11148              		.cfi_endproc
 11149              	.LFE46:
 11151              		.section	.text.promisc_follow_cb,"ax",%progbits
 11152              		.align	2
 11153              		.global	promisc_follow_cb
 11154              		.thumb
 11155              		.thumb_func
 11157              	promisc_follow_cb:
 11158              	.LFB47:
2886:bluetooth_rxtx.c **** 
2887:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 11159              		.loc 1 2887 0
 11160              		.cfi_startproc
 11161              		@ args = 0, pretend = 0, frame = 16
 11162              		@ frame_needed = 1, uses_anonymous_args = 0
 11163 0000 80B5     		push	{r7, lr}
 11164              		.cfi_def_cfa_offset 8
 11165              		.cfi_offset 7, -8
 11166              		.cfi_offset 14, -4
 11167 0002 84B0     		sub	sp, sp, #16
 11168              		.cfi_def_cfa_offset 24
 11169 0004 00AF     		add	r7, sp, #0
 11170              		.cfi_def_cfa_register 7
 11171 0006 7860     		str	r0, [r7, #4]
2888:bluetooth_rxtx.c **** 	int i;
2889:bluetooth_rxtx.c **** 
2890:bluetooth_rxtx.c **** 	// get the CRCInit
2891:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 11172              		.loc 1 2891 0
 11173 0008 284B     		ldr	r3, .L558
 11174 000a 1B69     		ldr	r3, [r3, #16]
 11175 000c 002B     		cmp	r3, #0
 11176 000e 49D1     		bne	.L554
 11177              		.loc 1 2891 0 is_stmt 0 discriminator 1
 11178 0010 7B68     		ldr	r3, [r7, #4]
 11179 0012 0433     		adds	r3, r3, #4
 11180 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11181 0016 012B     		cmp	r3, #1
 11182 0018 44D1     		bne	.L554
 11183              		.loc 1 2891 0 discriminator 2
 11184 001a 7B68     		ldr	r3, [r7, #4]
 11185 001c 0533     		adds	r3, r3, #5
 11186 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11187 0020 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 247


 11188 0022 3FD1     		bne	.L554
 11189              	.LBB25:
2892:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 11190              		.loc 1 2892 0 is_stmt 1
 11191 0024 7B68     		ldr	r3, [r7, #4]
 11192 0026 0833     		adds	r3, r3, #8
 11193 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11194 002a 1A04     		lsls	r2, r3, #16
 11195 002c 7B68     		ldr	r3, [r7, #4]
 11196 002e 0733     		adds	r3, r3, #7
 11197 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11198 0032 1B02     		lsls	r3, r3, #8
 11199 0034 1343     		orrs	r3, r3, r2
 11200 0036 7A68     		ldr	r2, [r7, #4]
 11201 0038 0632     		adds	r2, r2, #6
 11202 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 11203 003c 1343     		orrs	r3, r3, r2
 11204 003e BB60     		str	r3, [r7, #8]
2893:bluetooth_rxtx.c **** 
2894:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 11205              		.loc 1 2894 0
 11206 0040 7B68     		ldr	r3, [r7, #4]
 11207 0042 0433     		adds	r3, r3, #4
 11208 0044 B868     		ldr	r0, [r7, #8]
 11209 0046 1946     		mov	r1, r3
 11210 0048 0222     		movs	r2, #2
 11211 004a FFF7FEFF 		bl	btle_reverse_crc
 11212 004e 0246     		mov	r2, r0
 11213 0050 164B     		ldr	r3, .L558
 11214 0052 9A60     		str	r2, [r3, #8]
2895:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 11215              		.loc 1 2895 0
 11216 0054 154B     		ldr	r3, .L558
 11217 0056 0022     		movs	r2, #0
 11218 0058 DA60     		str	r2, [r3, #12]
2896:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 11219              		.loc 1 2896 0
 11220 005a 0023     		movs	r3, #0
 11221 005c FB60     		str	r3, [r7, #12]
 11222 005e 13E0     		b	.L556
 11223              	.L557:
2897:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 11224              		.loc 1 2897 0 discriminator 3
 11225 0060 124B     		ldr	r3, .L558
 11226 0062 DA68     		ldr	r2, [r3, #12]
 11227 0064 114B     		ldr	r3, .L558
 11228 0066 9968     		ldr	r1, [r3, #8]
 11229 0068 FB68     		ldr	r3, [r7, #12]
 11230 006a 21FA03F3 		lsr	r3, r1, r3
 11231 006e 03F00101 		and	r1, r3, #1
 11232 0072 FB68     		ldr	r3, [r7, #12]
 11233 0074 C3F11703 		rsb	r3, r3, #23
 11234 0078 01FA03F3 		lsl	r3, r1, r3
 11235 007c 1343     		orrs	r3, r3, r2
 11236 007e 0B4A     		ldr	r2, .L558
 11237 0080 D360     		str	r3, [r2, #12]
2896:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
ARM GAS  /tmp/ccfQkuUX.s 			page 248


 11238              		.loc 1 2896 0 discriminator 3
 11239 0082 FB68     		ldr	r3, [r7, #12]
 11240 0084 0133     		adds	r3, r3, #1
 11241 0086 FB60     		str	r3, [r7, #12]
 11242              	.L556:
2896:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 11243              		.loc 1 2896 0 is_stmt 0 discriminator 1
 11244 0088 FB68     		ldr	r3, [r7, #12]
 11245 008a 172B     		cmp	r3, #23
 11246 008c E8DD     		ble	.L557
2898:bluetooth_rxtx.c **** 
2899:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 11247              		.loc 1 2899 0 is_stmt 1
 11248 008e 074B     		ldr	r3, .L558
 11249 0090 0122     		movs	r2, #1
 11250 0092 1A61     		str	r2, [r3, #16]
2900:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 11251              		.loc 1 2900 0
 11252 0094 064B     		ldr	r3, .L558+4
 11253 0096 074A     		ldr	r2, .L558+8
 11254 0098 1A60     		str	r2, [r3]
2901:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 11255              		.loc 1 2901 0
 11256 009a 0120     		movs	r0, #1
 11257 009c 0649     		ldr	r1, .L558+12
 11258 009e 0322     		movs	r2, #3
 11259 00a0 FFF7FEFF 		bl	le_promisc_state
 11260              	.L554:
 11261              	.LBE25:
2902:bluetooth_rxtx.c **** 	}
2903:bluetooth_rxtx.c **** }
 11262              		.loc 1 2903 0
 11263 00a4 1037     		adds	r7, r7, #16
 11264              		.cfi_def_cfa_offset 8
 11265 00a6 BD46     		mov	sp, r7
 11266              		.cfi_def_cfa_register 13
 11267              		@ sp needed
 11268 00a8 80BD     		pop	{r7, pc}
 11269              	.L559:
 11270 00aa 00BF     		.align	2
 11271              	.L558:
 11272 00ac 00000000 		.word	le
 11273 00b0 00000000 		.word	packet_cb
 11274 00b4 00000000 		.word	promisc_recover_hop_interval
 11275 00b8 08000000 		.word	le+8
 11276              		.cfi_endproc
 11277              	.LFE47:
 11279              		.section	.text.see_aa,"ax",%progbits
 11280              		.align	2
 11281              		.global	see_aa
 11282              		.thumb
 11283              		.thumb_func
 11285              	see_aa:
 11286              	.LFB48:
2904:bluetooth_rxtx.c **** 
2905:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2906:bluetooth_rxtx.c **** void see_aa(u32 aa) {
ARM GAS  /tmp/ccfQkuUX.s 			page 249


 11287              		.loc 1 2906 0
 11288              		.cfi_startproc
 11289              		@ args = 0, pretend = 0, frame = 24
 11290              		@ frame_needed = 1, uses_anonymous_args = 0
 11291              		@ link register save eliminated.
 11292 0000 80B4     		push	{r7}
 11293              		.cfi_def_cfa_offset 4
 11294              		.cfi_offset 7, -4
 11295 0002 87B0     		sub	sp, sp, #28
 11296              		.cfi_def_cfa_offset 32
 11297 0004 00AF     		add	r7, sp, #0
 11298              		.cfi_def_cfa_register 7
 11299 0006 7860     		str	r0, [r7, #4]
2907:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 11300              		.loc 1 2907 0
 11301 0008 4FF0FF33 		mov	r3, #-1
 11302 000c 3B61     		str	r3, [r7, #16]
 11303 000e 4FF0FF33 		mov	r3, #-1
 11304 0012 FB60     		str	r3, [r7, #12]
2908:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 11305              		.loc 1 2908 0
 11306 0014 0023     		movs	r3, #0
 11307 0016 7B61     		str	r3, [r7, #20]
 11308 0018 15E0     		b	.L561
 11309              	.L564:
2909:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 11310              		.loc 1 2909 0
 11311 001a 224A     		ldr	r2, .L569
 11312 001c 7B69     		ldr	r3, [r7, #20]
 11313 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 11314 0022 7B68     		ldr	r3, [r7, #4]
 11315 0024 9A42     		cmp	r2, r3
 11316 0026 0BD1     		bne	.L562
2910:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 11317              		.loc 1 2910 0
 11318 0028 1E4A     		ldr	r2, .L569
 11319 002a 7B69     		ldr	r3, [r7, #20]
 11320 002c DB00     		lsls	r3, r3, #3
 11321 002e 1344     		add	r3, r3, r2
 11322 0030 5B68     		ldr	r3, [r3, #4]
 11323 0032 5A1C     		adds	r2, r3, #1
 11324 0034 1B49     		ldr	r1, .L569
 11325 0036 7B69     		ldr	r3, [r7, #20]
 11326 0038 DB00     		lsls	r3, r3, #3
 11327 003a 0B44     		add	r3, r3, r1
 11328 003c 5A60     		str	r2, [r3, #4]
2911:bluetooth_rxtx.c **** 			return;
 11329              		.loc 1 2911 0
 11330 003e 2CE0     		b	.L560
 11331              	.L562:
2908:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 11332              		.loc 1 2908 0 discriminator 2
 11333 0040 7B69     		ldr	r3, [r7, #20]
 11334 0042 0133     		adds	r3, r3, #1
 11335 0044 7B61     		str	r3, [r7, #20]
 11336              	.L561:
2908:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
ARM GAS  /tmp/ccfQkuUX.s 			page 250


 11337              		.loc 1 2908 0 is_stmt 0 discriminator 1
 11338 0046 7B69     		ldr	r3, [r7, #20]
 11339 0048 1F2B     		cmp	r3, #31
 11340 004a E6DD     		ble	.L564
2912:bluetooth_rxtx.c **** 		}
2913:bluetooth_rxtx.c **** 
2914:bluetooth_rxtx.c **** 	// evict someone
2915:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 11341              		.loc 1 2915 0 is_stmt 1
 11342 004c 0023     		movs	r3, #0
 11343 004e 7B61     		str	r3, [r7, #20]
 11344 0050 15E0     		b	.L565
 11345              	.L568:
2916:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 11346              		.loc 1 2916 0
 11347 0052 144A     		ldr	r2, .L569
 11348 0054 7B69     		ldr	r3, [r7, #20]
 11349 0056 DB00     		lsls	r3, r3, #3
 11350 0058 1344     		add	r3, r3, r2
 11351 005a 5A68     		ldr	r2, [r3, #4]
 11352 005c 3B69     		ldr	r3, [r7, #16]
 11353 005e 9A42     		cmp	r2, r3
 11354 0060 02DB     		blt	.L566
 11355              		.loc 1 2916 0 is_stmt 0 discriminator 1
 11356 0062 3B69     		ldr	r3, [r7, #16]
 11357 0064 002B     		cmp	r3, #0
 11358 0066 07DA     		bge	.L567
 11359              	.L566:
2917:bluetooth_rxtx.c **** 			killme = i;
 11360              		.loc 1 2917 0 is_stmt 1
 11361 0068 7B69     		ldr	r3, [r7, #20]
 11362 006a FB60     		str	r3, [r7, #12]
2918:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 11363              		.loc 1 2918 0
 11364 006c 0D4A     		ldr	r2, .L569
 11365 006e 7B69     		ldr	r3, [r7, #20]
 11366 0070 DB00     		lsls	r3, r3, #3
 11367 0072 1344     		add	r3, r3, r2
 11368 0074 5B68     		ldr	r3, [r3, #4]
 11369 0076 3B61     		str	r3, [r7, #16]
 11370              	.L567:
2915:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 11371              		.loc 1 2915 0 discriminator 2
 11372 0078 7B69     		ldr	r3, [r7, #20]
 11373 007a 0133     		adds	r3, r3, #1
 11374 007c 7B61     		str	r3, [r7, #20]
 11375              	.L565:
2915:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 11376              		.loc 1 2915 0 is_stmt 0 discriminator 1
 11377 007e 7B69     		ldr	r3, [r7, #20]
 11378 0080 1F2B     		cmp	r3, #31
 11379 0082 E6DD     		ble	.L568
2919:bluetooth_rxtx.c **** 		}
2920:bluetooth_rxtx.c **** 
2921:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 11380              		.loc 1 2921 0 is_stmt 1
 11381 0084 0749     		ldr	r1, .L569
ARM GAS  /tmp/ccfQkuUX.s 			page 251


 11382 0086 FB68     		ldr	r3, [r7, #12]
 11383 0088 7A68     		ldr	r2, [r7, #4]
 11384 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2922:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 11385              		.loc 1 2922 0
 11386 008e 054A     		ldr	r2, .L569
 11387 0090 FB68     		ldr	r3, [r7, #12]
 11388 0092 DB00     		lsls	r3, r3, #3
 11389 0094 1344     		add	r3, r3, r2
 11390 0096 0122     		movs	r2, #1
 11391 0098 5A60     		str	r2, [r3, #4]
 11392              	.L560:
2923:bluetooth_rxtx.c **** }
 11393              		.loc 1 2923 0
 11394 009a 1C37     		adds	r7, r7, #28
 11395              		.cfi_def_cfa_offset 4
 11396 009c BD46     		mov	sp, r7
 11397              		.cfi_def_cfa_register 13
 11398              		@ sp needed
 11399 009e 5DF8047B 		ldr	r7, [sp], #4
 11400              		.cfi_restore 7
 11401              		.cfi_def_cfa_offset 0
 11402 00a2 7047     		bx	lr
 11403              	.L570:
 11404              		.align	2
 11405              	.L569:
 11406 00a4 00000000 		.word	le_promisc
 11407              		.cfi_endproc
 11408              	.LFE48:
 11410              		.section	.rodata
 11411 08df 00       		.align	2
 11412              	.LC0:
 11413 08e0 01000000 		.word	1
 11414 08e4 01000000 		.word	1
 11415 08e8 01000000 		.word	1
 11416 08ec 01000000 		.word	1
 11417              		.section	.text.cb_le_promisc,"ax",%progbits
 11418              		.align	2
 11419              		.global	cb_le_promisc
 11420              		.thumb
 11421              		.thumb_func
 11423              	cb_le_promisc:
 11424              	.LFB49:
2924:bluetooth_rxtx.c **** 
2925:bluetooth_rxtx.c **** /* le promiscuous mode */
2926:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 11425              		.loc 1 2926 0
 11426              		.cfi_startproc
 11427              		@ args = 0, pretend = 0, frame = 128
 11428              		@ frame_needed = 1, uses_anonymous_args = 0
 11429 0000 90B5     		push	{r4, r7, lr}
 11430              		.cfi_def_cfa_offset 12
 11431              		.cfi_offset 4, -12
 11432              		.cfi_offset 7, -8
 11433              		.cfi_offset 14, -4
 11434 0002 A1B0     		sub	sp, sp, #132
 11435              		.cfi_def_cfa_offset 144
ARM GAS  /tmp/ccfQkuUX.s 			page 252


 11436 0004 00AF     		add	r7, sp, #0
 11437              		.cfi_def_cfa_register 7
 11438 0006 7860     		str	r0, [r7, #4]
2927:bluetooth_rxtx.c **** 	int i, j, k;
2928:bluetooth_rxtx.c **** 	int idx;
2929:bluetooth_rxtx.c **** 
2930:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2931:bluetooth_rxtx.c **** 	char desired[4][16] = {
 11439              		.loc 1 2931 0
 11440 0008 07F11C03 		add	r3, r7, #28
 11441 000c 4022     		movs	r2, #64
 11442 000e 1846     		mov	r0, r3
 11443 0010 0021     		movs	r1, #0
 11444 0012 FFF7FEFF 		bl	memset
 11445 0016 0123     		movs	r3, #1
 11446 0018 3B77     		strb	r3, [r7, #28]
 11447 001a 0123     		movs	r3, #1
 11448 001c 87F82C30 		strb	r3, [r7, #44]
 11449 0020 0123     		movs	r3, #1
 11450 0022 87F82F30 		strb	r3, [r7, #47]
 11451 0026 0123     		movs	r3, #1
 11452 0028 87F83C30 		strb	r3, [r7, #60]
 11453 002c 0123     		movs	r3, #1
 11454 002e 87F83E30 		strb	r3, [r7, #62]
 11455 0032 0123     		movs	r3, #1
 11456 0034 87F84C30 		strb	r3, [r7, #76]
 11457 0038 0123     		movs	r3, #1
 11458 003a 87F84E30 		strb	r3, [r7, #78]
 11459 003e 0123     		movs	r3, #1
 11460 0040 87F84F30 		strb	r3, [r7, #79]
2932:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2933:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2934:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2935:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2936:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2937:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2938:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2939:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2940:bluetooth_rxtx.c **** 	};
2941:bluetooth_rxtx.c **** 
2942:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 11461              		.loc 1 2942 0
 11462 0044 0023     		movs	r3, #0
 11463 0046 FB67     		str	r3, [r7, #124]
 11464 0048 41E0     		b	.L572
 11465              	.L575:
2943:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11466              		.loc 1 2943 0
 11467 004a A54B     		ldr	r3, .L602
 11468 004c 1B88     		ldrh	r3, [r3]	@ movhi
 11469 004e 9BB2     		uxth	r3, r3
 11470 0050 DBB2     		uxtb	r3, r3
 11471 0052 623B     		subs	r3, r3, #98
 11472 0054 DBB2     		uxtb	r3, r3
 11473 0056 1846     		mov	r0, r3
 11474 0058 FFF7FEFF 		bl	btle_channel_index
 11475 005c 0346     		mov	r3, r0
ARM GAS  /tmp/ccfQkuUX.s 			page 253


 11476 005e 1A46     		mov	r2, r3
 11477 0060 A04B     		ldr	r3, .L602+4
 11478 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 11479 0064 3B67     		str	r3, [r7, #112]
2944:bluetooth_rxtx.c **** 
2945:bluetooth_rxtx.c **** 		// whiten the desired data
2946:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 11480              		.loc 1 2946 0
 11481 0066 0023     		movs	r3, #0
 11482 0068 BB67     		str	r3, [r7, #120]
 11483 006a 2AE0     		b	.L573
 11484              	.L574:
2947:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 11485              		.loc 1 2947 0 discriminator 3
 11486 006c FB6F     		ldr	r3, [r7, #124]
 11487 006e 1B01     		lsls	r3, r3, #4
 11488 0070 07F18002 		add	r2, r7, #128
 11489 0074 1A44     		add	r2, r2, r3
 11490 0076 BB6F     		ldr	r3, [r7, #120]
 11491 0078 1344     		add	r3, r3, r2
 11492 007a 643B     		subs	r3, r3, #100
 11493 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 11494 007e 9A49     		ldr	r1, .L602+8
 11495 0080 3B6F     		ldr	r3, [r7, #112]
 11496 0082 0B44     		add	r3, r3, r1
 11497 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11498 0086 5340     		eors	r3, r3, r2
 11499 0088 D9B2     		uxtb	r1, r3
 11500 008a FB6F     		ldr	r3, [r7, #124]
 11501 008c 1B01     		lsls	r3, r3, #4
 11502 008e 07F18002 		add	r2, r7, #128
 11503 0092 1A44     		add	r2, r2, r3
 11504 0094 BB6F     		ldr	r3, [r7, #120]
 11505 0096 1344     		add	r3, r3, r2
 11506 0098 643B     		subs	r3, r3, #100
 11507 009a 0A46     		mov	r2, r1
 11508 009c 1A70     		strb	r2, [r3]
2948:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 11509              		.loc 1 2948 0 discriminator 3
 11510 009e 3B6F     		ldr	r3, [r7, #112]
 11511 00a0 0133     		adds	r3, r3, #1
 11512 00a2 1946     		mov	r1, r3
 11513 00a4 914B     		ldr	r3, .L602+12
 11514 00a6 A1FB0323 		umull	r2, r3, r1, r3
 11515 00aa C81A     		subs	r0, r1, r3
 11516 00ac 4008     		lsrs	r0, r0, #1
 11517 00ae 0344     		add	r3, r3, r0
 11518 00b0 9A09     		lsrs	r2, r3, #6
 11519 00b2 1346     		mov	r3, r2
 11520 00b4 DB01     		lsls	r3, r3, #7
 11521 00b6 9B1A     		subs	r3, r3, r2
 11522 00b8 CA1A     		subs	r2, r1, r3
 11523 00ba 3A67     		str	r2, [r7, #112]
2946:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 11524              		.loc 1 2946 0 discriminator 3
 11525 00bc BB6F     		ldr	r3, [r7, #120]
 11526 00be 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccfQkuUX.s 			page 254


 11527 00c0 BB67     		str	r3, [r7, #120]
 11528              	.L573:
2946:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 11529              		.loc 1 2946 0 is_stmt 0 discriminator 1
 11530 00c2 BB6F     		ldr	r3, [r7, #120]
 11531 00c4 0F2B     		cmp	r3, #15
 11532 00c6 D1DD     		ble	.L574
2942:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11533              		.loc 1 2942 0 is_stmt 1 discriminator 2
 11534 00c8 FB6F     		ldr	r3, [r7, #124]
 11535 00ca 0133     		adds	r3, r3, #1
 11536 00cc FB67     		str	r3, [r7, #124]
 11537              	.L572:
2942:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11538              		.loc 1 2942 0 is_stmt 0 discriminator 1
 11539 00ce FB6F     		ldr	r3, [r7, #124]
 11540 00d0 032B     		cmp	r3, #3
 11541 00d2 BADD     		ble	.L575
2949:bluetooth_rxtx.c **** 		}
2950:bluetooth_rxtx.c **** 	}
2951:bluetooth_rxtx.c **** 
2952:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2953:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 11542              		.loc 1 2953 0 is_stmt 1
 11543 00d4 2023     		movs	r3, #32
 11544 00d6 FB67     		str	r3, [r7, #124]
 11545 00d8 D0E0     		b	.L576
 11546              	.L596:
 11547              	.LBB26:
2954:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 11548              		.loc 1 2954 0
 11549 00da 854B     		ldr	r3, .L602+16
 11550 00dc 07F10C04 		add	r4, r7, #12
 11551 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 11552 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2955:bluetooth_rxtx.c **** 		int matching = -1;
 11553              		.loc 1 2955 0
 11554 00e6 4FF0FF33 		mov	r3, #-1
 11555 00ea FB66     		str	r3, [r7, #108]
2956:bluetooth_rxtx.c **** 
2957:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 11556              		.loc 1 2957 0
 11557 00ec 0023     		movs	r3, #0
 11558 00ee BB67     		str	r3, [r7, #120]
 11559 00f0 26E0     		b	.L577
 11560              	.L582:
2958:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 11561              		.loc 1 2958 0
 11562 00f2 0023     		movs	r3, #0
 11563 00f4 7B67     		str	r3, [r7, #116]
 11564 00f6 1DE0     		b	.L578
 11565              	.L581:
2959:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 11566              		.loc 1 2959 0
 11567 00f8 FA6F     		ldr	r2, [r7, #124]
 11568 00fa 7B6F     		ldr	r3, [r7, #116]
 11569 00fc 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccfQkuUX.s 			page 255


 11570 00fe 1A46     		mov	r2, r3
 11571 0100 7B68     		ldr	r3, [r7, #4]
 11572 0102 1344     		add	r3, r3, r2
 11573 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 11574 0106 BB6F     		ldr	r3, [r7, #120]
 11575 0108 1B01     		lsls	r3, r3, #4
 11576 010a 07F18001 		add	r1, r7, #128
 11577 010e 1944     		add	r1, r1, r3
 11578 0110 7B6F     		ldr	r3, [r7, #116]
 11579 0112 0B44     		add	r3, r3, r1
 11580 0114 643B     		subs	r3, r3, #100
 11581 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11582 0118 9A42     		cmp	r2, r3
 11583 011a 08D0     		beq	.L579
2960:bluetooth_rxtx.c **** 					ok[j] = 0;
 11584              		.loc 1 2960 0
 11585 011c BB6F     		ldr	r3, [r7, #120]
 11586 011e 9B00     		lsls	r3, r3, #2
 11587 0120 07F18002 		add	r2, r7, #128
 11588 0124 1344     		add	r3, r3, r2
 11589 0126 0022     		movs	r2, #0
 11590 0128 43F8742C 		str	r2, [r3, #-116]
2961:bluetooth_rxtx.c **** 					break;
 11591              		.loc 1 2961 0
 11592 012c 05E0     		b	.L580
 11593              	.L579:
2958:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 11594              		.loc 1 2958 0 discriminator 2
 11595 012e 7B6F     		ldr	r3, [r7, #116]
 11596 0130 0133     		adds	r3, r3, #1
 11597 0132 7B67     		str	r3, [r7, #116]
 11598              	.L578:
2958:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 11599              		.loc 1 2958 0 is_stmt 0 discriminator 1
 11600 0134 7B6F     		ldr	r3, [r7, #116]
 11601 0136 0F2B     		cmp	r3, #15
 11602 0138 DEDD     		ble	.L581
 11603              	.L580:
2957:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 11604              		.loc 1 2957 0 is_stmt 1 discriminator 2
 11605 013a BB6F     		ldr	r3, [r7, #120]
 11606 013c 0133     		adds	r3, r3, #1
 11607 013e BB67     		str	r3, [r7, #120]
 11608              	.L577:
2957:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 11609              		.loc 1 2957 0 is_stmt 0 discriminator 1
 11610 0140 BB6F     		ldr	r3, [r7, #120]
 11611 0142 032B     		cmp	r3, #3
 11612 0144 D5DD     		ble	.L582
2962:bluetooth_rxtx.c **** 				}
2963:bluetooth_rxtx.c **** 			}
2964:bluetooth_rxtx.c **** 		}
2965:bluetooth_rxtx.c **** 
2966:bluetooth_rxtx.c **** 		// see if any match
2967:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 11613              		.loc 1 2967 0 is_stmt 1
 11614 0146 0023     		movs	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 256


 11615 0148 BB67     		str	r3, [r7, #120]
 11616 014a 0EE0     		b	.L583
 11617              	.L586:
2968:bluetooth_rxtx.c **** 			if (ok[j]) {
 11618              		.loc 1 2968 0
 11619 014c BB6F     		ldr	r3, [r7, #120]
 11620 014e 9B00     		lsls	r3, r3, #2
 11621 0150 07F18002 		add	r2, r7, #128
 11622 0154 1344     		add	r3, r3, r2
 11623 0156 53F8743C 		ldr	r3, [r3, #-116]
 11624 015a 002B     		cmp	r3, #0
 11625 015c 02D0     		beq	.L584
2969:bluetooth_rxtx.c **** 				matching = j;
 11626              		.loc 1 2969 0
 11627 015e BB6F     		ldr	r3, [r7, #120]
 11628 0160 FB66     		str	r3, [r7, #108]
2970:bluetooth_rxtx.c **** 				break;
 11629              		.loc 1 2970 0
 11630 0162 05E0     		b	.L585
 11631              	.L584:
2967:bluetooth_rxtx.c **** 			if (ok[j]) {
 11632              		.loc 1 2967 0 discriminator 2
 11633 0164 BB6F     		ldr	r3, [r7, #120]
 11634 0166 0133     		adds	r3, r3, #1
 11635 0168 BB67     		str	r3, [r7, #120]
 11636              	.L583:
2967:bluetooth_rxtx.c **** 			if (ok[j]) {
 11637              		.loc 1 2967 0 is_stmt 0 discriminator 1
 11638 016a BB6F     		ldr	r3, [r7, #120]
 11639 016c 032B     		cmp	r3, #3
 11640 016e EDDD     		ble	.L586
 11641              	.L585:
2971:bluetooth_rxtx.c **** 			}
2972:bluetooth_rxtx.c **** 		}
2973:bluetooth_rxtx.c **** 
2974:bluetooth_rxtx.c **** 		// skip if no match
2975:bluetooth_rxtx.c **** 		if (matching < 0)
 11642              		.loc 1 2975 0 is_stmt 1
 11643 0170 FB6E     		ldr	r3, [r7, #108]
 11644 0172 002B     		cmp	r3, #0
 11645 0174 7FDB     		blt	.L588
2976:bluetooth_rxtx.c **** 			continue;
2977:bluetooth_rxtx.c **** 
2978:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2979:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 11646              		.loc 1 2979 0
 11647 0176 5A4B     		ldr	r3, .L602
 11648 0178 1B88     		ldrh	r3, [r3]	@ movhi
 11649 017a 9BB2     		uxth	r3, r3
 11650 017c DBB2     		uxtb	r3, r3
 11651 017e 623B     		subs	r3, r3, #98
 11652 0180 DBB2     		uxtb	r3, r3
 11653 0182 1846     		mov	r0, r3
 11654 0184 FFF7FEFF 		bl	btle_channel_index
 11655 0188 0346     		mov	r3, r0
 11656 018a 1A46     		mov	r2, r3
 11657 018c 554B     		ldr	r3, .L602+4
ARM GAS  /tmp/ccfQkuUX.s 			page 257


 11658 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 11659 0190 3B67     		str	r3, [r7, #112]
2980:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 11660              		.loc 1 2980 0
 11661 0192 0023     		movs	r3, #0
 11662 0194 BB67     		str	r3, [r7, #120]
 11663 0196 4CE0     		b	.L589
 11664              	.L595:
 11665              	.LBB27:
2981:bluetooth_rxtx.c **** 			u8 byte = 0;
 11666              		.loc 1 2981 0
 11667 0198 0023     		movs	r3, #0
 11668 019a 87F86B30 		strb	r3, [r7, #107]
2982:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 11669              		.loc 1 2982 0
 11670 019e 0023     		movs	r3, #0
 11671 01a0 7B67     		str	r3, [r7, #116]
 11672 01a2 39E0     		b	.L590
 11673              	.L594:
 11674              	.LBB28:
2983:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 11675              		.loc 1 2983 0
 11676 01a4 BB6F     		ldr	r3, [r7, #120]
 11677 01a6 DA00     		lsls	r2, r3, #3
 11678 01a8 7B6F     		ldr	r3, [r7, #116]
 11679 01aa 1A44     		add	r2, r2, r3
 11680 01ac FB6F     		ldr	r3, [r7, #124]
 11681 01ae 1344     		add	r3, r3, r2
 11682 01b0 203B     		subs	r3, r3, #32
 11683 01b2 3B66     		str	r3, [r7, #96]
2984:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 11684              		.loc 1 2984 0
 11685 01b4 3B6E     		ldr	r3, [r7, #96]
 11686 01b6 B3F5487F 		cmp	r3, #800
 11687 01ba 00DB     		blt	.L591
 11688 01bc 2FE0     		b	.L592
 11689              	.L591:
2985:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 11690              		.loc 1 2985 0
 11691 01be 3B6E     		ldr	r3, [r7, #96]
 11692 01c0 7A68     		ldr	r2, [r7, #4]
 11693 01c2 1344     		add	r3, r3, r2
 11694 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11695 01c6 7B66     		str	r3, [r7, #100]
2986:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 11696              		.loc 1 2986 0
 11697 01c8 BB6F     		ldr	r3, [r7, #120]
 11698 01ca 032B     		cmp	r3, #3
 11699 01cc 16DD     		ble	.L593
2987:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 11700              		.loc 1 2987 0
 11701 01ce 464A     		ldr	r2, .L602+8
 11702 01d0 3B6F     		ldr	r3, [r7, #112]
 11703 01d2 1344     		add	r3, r3, r2
 11704 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11705 01d6 1A46     		mov	r2, r3
 11706 01d8 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/ccfQkuUX.s 			page 258


 11707 01da 5340     		eors	r3, r3, r2
 11708 01dc 7B66     		str	r3, [r7, #100]
2988:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 11709              		.loc 1 2988 0
 11710 01de 3B6F     		ldr	r3, [r7, #112]
 11711 01e0 0133     		adds	r3, r3, #1
 11712 01e2 1946     		mov	r1, r3
 11713 01e4 414B     		ldr	r3, .L602+12
 11714 01e6 A1FB0323 		umull	r2, r3, r1, r3
 11715 01ea C81A     		subs	r0, r1, r3
 11716 01ec 4008     		lsrs	r0, r0, #1
 11717 01ee 0344     		add	r3, r3, r0
 11718 01f0 9A09     		lsrs	r2, r3, #6
 11719 01f2 1346     		mov	r3, r2
 11720 01f4 DB01     		lsls	r3, r3, #7
 11721 01f6 9B1A     		subs	r3, r3, r2
 11722 01f8 CA1A     		subs	r2, r1, r3
 11723 01fa 3A67     		str	r2, [r7, #112]
 11724              	.L593:
2989:bluetooth_rxtx.c **** 				}
2990:bluetooth_rxtx.c **** 				byte |= bit << k;
 11725              		.loc 1 2990 0 discriminator 2
 11726 01fc 7A6E     		ldr	r2, [r7, #100]
 11727 01fe 7B6F     		ldr	r3, [r7, #116]
 11728 0200 02FA03F3 		lsl	r3, r2, r3
 11729 0204 DAB2     		uxtb	r2, r3
 11730 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 11731 020a 1343     		orrs	r3, r3, r2
 11732 020c DBB2     		uxtb	r3, r3
 11733 020e 87F86B30 		strb	r3, [r7, #107]
 11734              	.LBE28:
2982:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 11735              		.loc 1 2982 0 discriminator 2
 11736 0212 7B6F     		ldr	r3, [r7, #116]
 11737 0214 0133     		adds	r3, r3, #1
 11738 0216 7B67     		str	r3, [r7, #116]
 11739              	.L590:
2982:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 11740              		.loc 1 2982 0 is_stmt 0 discriminator 1
 11741 0218 7B6F     		ldr	r3, [r7, #116]
 11742 021a 072B     		cmp	r3, #7
 11743 021c C2DD     		ble	.L594
 11744              	.L592:
2991:bluetooth_rxtx.c **** 			}
2992:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 11745              		.loc 1 2992 0 is_stmt 1 discriminator 2
 11746 021e 354B     		ldr	r3, .L602+20
 11747 0220 1A68     		ldr	r2, [r3]
 11748 0222 BB6F     		ldr	r3, [r7, #120]
 11749 0224 1344     		add	r3, r3, r2
 11750 0226 97F86B20 		ldrb	r2, [r7, #107]
 11751 022a 1A70     		strb	r2, [r3]
 11752              	.LBE27:
2980:bluetooth_rxtx.c **** 			u8 byte = 0;
 11753              		.loc 1 2980 0 discriminator 2
 11754 022c BB6F     		ldr	r3, [r7, #120]
 11755 022e 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccfQkuUX.s 			page 259


 11756 0230 BB67     		str	r3, [r7, #120]
 11757              	.L589:
2980:bluetooth_rxtx.c **** 			u8 byte = 0;
 11758              		.loc 1 2980 0 is_stmt 0 discriminator 1
 11759 0232 BB6F     		ldr	r3, [r7, #120]
 11760 0234 092B     		cmp	r3, #9
 11761 0236 AFDD     		ble	.L595
2993:bluetooth_rxtx.c **** 		}
2994:bluetooth_rxtx.c **** 
2995:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 11762              		.loc 1 2995 0 is_stmt 1
 11763 0238 2E4B     		ldr	r3, .L602+20
 11764 023a 1B68     		ldr	r3, [r3]
 11765 023c 0333     		adds	r3, r3, #3
 11766 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11767 0240 1A06     		lsls	r2, r3, #24
2996:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11768              		.loc 1 2996 0
 11769 0242 2C4B     		ldr	r3, .L602+20
 11770 0244 1B68     		ldr	r3, [r3]
 11771 0246 0233     		adds	r3, r3, #2
 11772 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11773 024a 1B04     		lsls	r3, r3, #16
2995:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11774              		.loc 1 2995 0
 11775 024c 1A43     		orrs	r2, r2, r3
2997:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 11776              		.loc 1 2997 0
 11777 024e 294B     		ldr	r3, .L602+20
 11778 0250 1B68     		ldr	r3, [r3]
 11779 0252 0133     		adds	r3, r3, #1
 11780 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 11781 0256 1B02     		lsls	r3, r3, #8
2996:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11782              		.loc 1 2996 0
 11783 0258 1343     		orrs	r3, r3, r2
2998:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 11784              		.loc 1 2998 0
 11785 025a 264A     		ldr	r2, .L602+20
 11786 025c 1268     		ldr	r2, [r2]
 11787 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2997:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 11788              		.loc 1 2997 0
 11789 0260 1343     		orrs	r3, r3, r2
2995:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 11790              		.loc 1 2995 0
 11791 0262 FB65     		str	r3, [r7, #92]
2999:bluetooth_rxtx.c **** 		see_aa(aa);
 11792              		.loc 1 2999 0
 11793 0264 F86D     		ldr	r0, [r7, #92]
 11794 0266 FFF7FEFF 		bl	see_aa
3000:bluetooth_rxtx.c **** 
3001:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 11795              		.loc 1 3001 0
 11796 026a 224B     		ldr	r3, .L602+20
 11797 026c 1B68     		ldr	r3, [r3]
 11798 026e 0120     		movs	r0, #1
ARM GAS  /tmp/ccfQkuUX.s 			page 260


 11799 0270 1946     		mov	r1, r3
 11800 0272 FFF7FEFF 		bl	enqueue
 11801              	.L588:
 11802              	.LBE26:
2953:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 11803              		.loc 1 2953 0 discriminator 2
 11804 0276 FB6F     		ldr	r3, [r7, #124]
 11805 0278 0133     		adds	r3, r3, #1
 11806 027a FB67     		str	r3, [r7, #124]
 11807              	.L576:
2953:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 11808              		.loc 1 2953 0 is_stmt 0 discriminator 1
 11809 027c FB6F     		ldr	r3, [r7, #124]
 11810 027e B3F53C7F 		cmp	r3, #752
 11811 0282 FFF62AAF 		blt	.L596
3002:bluetooth_rxtx.c **** 
3003:bluetooth_rxtx.c **** 	}
3004:bluetooth_rxtx.c **** 
3005:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
3006:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 11812              		.loc 1 3006 0 is_stmt 1
 11813 0286 0023     		movs	r3, #0
 11814 0288 FB67     		str	r3, [r7, #124]
 11815 028a 20E0     		b	.L597
 11816              	.L600:
3007:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 11817              		.loc 1 3007 0
 11818 028c 1A4A     		ldr	r2, .L602+24
 11819 028e FB6F     		ldr	r3, [r7, #124]
 11820 0290 DB00     		lsls	r3, r3, #3
 11821 0292 1344     		add	r3, r3, r2
 11822 0294 5B68     		ldr	r3, [r3, #4]
 11823 0296 032B     		cmp	r3, #3
 11824 0298 16DD     		ble	.L598
3008:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 11825              		.loc 1 3008 0
 11826 029a 174A     		ldr	r2, .L602+24
 11827 029c FB6F     		ldr	r3, [r7, #124]
 11828 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 11829 02a2 1846     		mov	r0, r3
 11830 02a4 FFF7FEFF 		bl	le_set_access_address
3009:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 11831              		.loc 1 3009 0
 11832 02a8 144B     		ldr	r3, .L602+28
 11833 02aa 154A     		ldr	r2, .L602+32
 11834 02ac 1A60     		str	r2, [r3]
3010:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 11835              		.loc 1 3010 0
 11836 02ae 154B     		ldr	r3, .L602+36
 11837 02b0 154A     		ldr	r2, .L602+40
 11838 02b2 1A60     		str	r2, [r3]
3011:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 11839              		.loc 1 3011 0
 11840 02b4 154B     		ldr	r3, .L602+44
 11841 02b6 0022     		movs	r2, #0
 11842 02b8 1A61     		str	r2, [r3, #16]
3012:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
ARM GAS  /tmp/ccfQkuUX.s 			page 261


 11843              		.loc 1 3012 0
 11844 02ba 0020     		movs	r0, #0
 11845 02bc 1349     		ldr	r1, .L602+44
 11846 02be 0422     		movs	r2, #4
 11847 02c0 FFF7FEFF 		bl	le_promisc_state
3013:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
3014:bluetooth_rxtx.c **** 			return 0;
 11848              		.loc 1 3014 0
 11849 02c4 0023     		movs	r3, #0
 11850 02c6 06E0     		b	.L601
 11851              	.L598:
3006:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 11852              		.loc 1 3006 0 discriminator 2
 11853 02c8 FB6F     		ldr	r3, [r7, #124]
 11854 02ca 0133     		adds	r3, r3, #1
 11855 02cc FB67     		str	r3, [r7, #124]
 11856              	.L597:
3006:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 11857              		.loc 1 3006 0 is_stmt 0 discriminator 1
 11858 02ce FB6F     		ldr	r3, [r7, #124]
 11859 02d0 1F2B     		cmp	r3, #31
 11860 02d2 DBDD     		ble	.L600
3015:bluetooth_rxtx.c **** 		}
3016:bluetooth_rxtx.c **** 	}
3017:bluetooth_rxtx.c **** 
3018:bluetooth_rxtx.c **** 	return 1;
 11861              		.loc 1 3018 0 is_stmt 1
 11862 02d4 0123     		movs	r3, #1
 11863              	.L601:
3019:bluetooth_rxtx.c **** }
 11864              		.loc 1 3019 0 discriminator 1
 11865 02d6 1846     		mov	r0, r3
 11866 02d8 8437     		adds	r7, r7, #132
 11867              		.cfi_def_cfa_offset 12
 11868 02da BD46     		mov	sp, r7
 11869              		.cfi_def_cfa_register 13
 11870              		@ sp needed
 11871 02dc 90BD     		pop	{r4, r7, pc}
 11872              	.L603:
 11873 02de 00BF     		.align	2
 11874              	.L602:
 11875 02e0 00000000 		.word	channel
 11876 02e4 C0000000 		.word	whitening_index
 11877 02e8 40000000 		.word	whitening
 11878 02ec 11080402 		.word	33818641
 11879 02f0 E0080000 		.word	.LC0
 11880 02f4 00000000 		.word	idle_rxbuf
 11881 02f8 00000000 		.word	le_promisc
 11882 02fc 00000000 		.word	data_cb
 11883 0300 00000000 		.word	cb_follow_le
 11884 0304 00000000 		.word	packet_cb
 11885 0308 00000000 		.word	promisc_follow_cb
 11886 030c 00000000 		.word	le
 11887              		.cfi_endproc
 11888              	.LFE49:
 11890              		.section	.text.bt_promisc_le,"ax",%progbits
 11891              		.align	2
ARM GAS  /tmp/ccfQkuUX.s 			page 262


 11892              		.global	bt_promisc_le
 11893              		.thumb
 11894              		.thumb_func
 11896              	bt_promisc_le:
 11897              	.LFB50:
3020:bluetooth_rxtx.c **** 
3021:bluetooth_rxtx.c **** void bt_promisc_le() {
 11898              		.loc 1 3021 0
 11899              		.cfi_startproc
 11900              		@ args = 0, pretend = 0, frame = 0
 11901              		@ frame_needed = 1, uses_anonymous_args = 0
 11902 0000 80B5     		push	{r7, lr}
 11903              		.cfi_def_cfa_offset 8
 11904              		.cfi_offset 7, -8
 11905              		.cfi_offset 14, -4
 11906 0002 00AF     		add	r7, sp, #0
 11907              		.cfi_def_cfa_register 7
3022:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 11908              		.loc 1 3022 0
 11909 0004 2CE0     		b	.L605
 11910              	.L610:
3023:bluetooth_rxtx.c **** 		reset_le_promisc();
 11911              		.loc 1 3023 0
 11912 0006 FFF7FEFF 		bl	reset_le_promisc
3024:bluetooth_rxtx.c **** 
3025:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
3026:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 11913              		.loc 1 3026 0
 11914 000a 184B     		ldr	r3, .L611
 11915 000c 1B88     		ldrh	r3, [r3]	@ movhi
 11916 000e 9BB2     		uxth	r3, r3
 11917 0010 03F00103 		and	r3, r3, #1
 11918 0014 002B     		cmp	r3, #0
 11919 0016 03D0     		beq	.L606
3027:bluetooth_rxtx.c **** 			channel = 2440;
 11920              		.loc 1 3027 0
 11921 0018 144B     		ldr	r3, .L611
 11922 001a 40F68812 		movw	r2, #2440
 11923 001e 1A80     		strh	r2, [r3]	@ movhi
 11924              	.L606:
3028:bluetooth_rxtx.c **** 
3029:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
3030:bluetooth_rxtx.c **** 		if (!le.target_set) {
 11925              		.loc 1 3030 0
 11926 0020 134B     		ldr	r3, .L611+4
 11927 0022 DB6B     		ldr	r3, [r3, #60]
 11928 0024 002B     		cmp	r3, #0
 11929 0026 07D1     		bne	.L607
3031:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
3032:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 11930              		.loc 1 3032 0
 11931 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
3033:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 11932              		.loc 1 3033 0
 11933 002c 114B     		ldr	r3, .L611+8
 11934 002e 124A     		ldr	r2, .L611+12
 11935 0030 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccfQkuUX.s 			page 263


3034:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 11936              		.loc 1 3034 0
 11937 0032 0A20     		movs	r0, #10
 11938 0034 FFF7FEFF 		bl	bt_generic_le
 11939              	.L607:
3035:bluetooth_rxtx.c **** 		}
3036:bluetooth_rxtx.c **** 
3037:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
3038:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 11940              		.loc 1 3038 0
 11941 0038 104B     		ldr	r3, .L611+16
 11942 003a 1B78     		ldrb	r3, [r3]
 11943 003c DBB2     		uxtb	r3, r3
 11944 003e 0A2B     		cmp	r3, #10
 11945 0040 00D0     		beq	.L608
3039:bluetooth_rxtx.c **** 			break;
 11946              		.loc 1 3039 0
 11947 0042 12E0     		b	.L604
 11948              	.L608:
3040:bluetooth_rxtx.c **** 
3041:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 11949              		.loc 1 3041 0
 11950 0044 0020     		movs	r0, #0
 11951 0046 0A49     		ldr	r1, .L611+4
 11952 0048 0422     		movs	r2, #4
 11953 004a FFF7FEFF 		bl	le_promisc_state
3042:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 11954              		.loc 1 3042 0
 11955 004e 0C4B     		ldr	r3, .L611+20
 11956 0050 0C4A     		ldr	r2, .L611+24
 11957 0052 1A60     		str	r2, [r3]
3043:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 11958              		.loc 1 3043 0
 11959 0054 064B     		ldr	r3, .L611+4
 11960 0056 0022     		movs	r2, #0
 11961 0058 1A61     		str	r2, [r3, #16]
3044:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 11962              		.loc 1 3044 0
 11963 005a 0A20     		movs	r0, #10
 11964 005c FFF7FEFF 		bl	bt_le_sync
 11965              	.L605:
3022:bluetooth_rxtx.c **** 		reset_le_promisc();
 11966              		.loc 1 3022 0
 11967 0060 064B     		ldr	r3, .L611+16
 11968 0062 1B78     		ldrb	r3, [r3]
 11969 0064 DBB2     		uxtb	r3, r3
 11970 0066 0A2B     		cmp	r3, #10
 11971 0068 CDD0     		beq	.L610
 11972              	.L604:
3045:bluetooth_rxtx.c **** 	}
3046:bluetooth_rxtx.c **** }
 11973              		.loc 1 3046 0
 11974 006a 80BD     		pop	{r7, pc}
 11975              	.L612:
 11976              		.align	2
 11977              	.L611:
 11978 006c 00000000 		.word	channel
ARM GAS  /tmp/ccfQkuUX.s 			page 264


 11979 0070 00000000 		.word	le
 11980 0074 00000000 		.word	data_cb
 11981 0078 00000000 		.word	cb_le_promisc
 11982 007c 00000000 		.word	requested_mode
 11983 0080 00000000 		.word	packet_cb
 11984 0084 00000000 		.word	promisc_follow_cb
 11985              		.cfi_endproc
 11986              	.LFE50:
 11988              		.section	.rodata
 11989              		.align	2
 11990              	.LC1:
 11991 08f0 00       		.byte	0
 11992 08f1 09       		.byte	9
 11993 08f2 FF       		.byte	-1
 11994 08f3 FF       		.byte	-1
 11995 08f4 FF       		.byte	-1
 11996 08f5 FF       		.byte	-1
 11997 08f6 FF       		.byte	-1
 11998 08f7 FF       		.byte	-1
 11999 08f8 02       		.byte	2
 12000 08f9 01       		.byte	1
 12001 08fa 05       		.byte	5
 12002 08fb FF       		.byte	-1
 12003 08fc FF       		.byte	-1
 12004 08fd FF       		.byte	-1
 12005              		.section	.text.bt_slave_le,"ax",%progbits
 12006              		.align	2
 12007              		.global	bt_slave_le
 12008              		.thumb
 12009              		.thumb_func
 12011              	bt_slave_le:
 12012              	.LFB51:
3047:bluetooth_rxtx.c **** 
3048:bluetooth_rxtx.c **** void bt_slave_le() {
 12013              		.loc 1 3048 0
 12014              		.cfi_startproc
 12015              		@ args = 0, pretend = 0, frame = 32
 12016              		@ frame_needed = 1, uses_anonymous_args = 0
 12017 0000 90B5     		push	{r4, r7, lr}
 12018              		.cfi_def_cfa_offset 12
 12019              		.cfi_offset 4, -12
 12020              		.cfi_offset 7, -8
 12021              		.cfi_offset 14, -4
 12022 0002 89B0     		sub	sp, sp, #36
 12023              		.cfi_def_cfa_offset 48
 12024 0004 00AF     		add	r7, sp, #0
 12025              		.cfi_def_cfa_register 7
3049:bluetooth_rxtx.c **** 	u32 calc_crc;
3050:bluetooth_rxtx.c **** 	int i;
3051:bluetooth_rxtx.c **** 
3052:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 12026              		.loc 1 3052 0
 12027 0006 354A     		ldr	r2, .L618
 12028 0008 3B1D     		adds	r3, r7, #4
 12029 000a 1446     		mov	r4, r2
 12030 000c 2068     		ldr	r0, [r4]	@ unaligned
 12031 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
ARM GAS  /tmp/ccfQkuUX.s 			page 265


 12032 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 12033 0012 07C3     		stmia	r3!, {r0, r1, r2}
 12034 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 12035 0016 1A80     		strh	r2, [r3]	@ unaligned
3053:bluetooth_rxtx.c **** 		// LL header
3054:bluetooth_rxtx.c **** 		0x00, 0x09,
3055:bluetooth_rxtx.c **** 
3056:bluetooth_rxtx.c **** 		// advertising address
3057:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
3058:bluetooth_rxtx.c **** 
3059:bluetooth_rxtx.c **** 		// advertising data
3060:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
3061:bluetooth_rxtx.c **** 
3062:bluetooth_rxtx.c **** 		// CRC (calc)
3063:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
3064:bluetooth_rxtx.c **** 	};
3065:bluetooth_rxtx.c **** 
3066:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 12036              		.loc 1 3066 0
 12037 0018 0B23     		movs	r3, #11
 12038 001a FB76     		strb	r3, [r7, #27]
3067:bluetooth_rxtx.c **** 
3068:bluetooth_rxtx.c **** 	// copy the user-specified mac address
3069:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 12039              		.loc 1 3069 0
 12040 001c 0023     		movs	r3, #0
 12041 001e FB61     		str	r3, [r7, #28]
 12042 0020 0EE0     		b	.L614
 12043              	.L615:
3070:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 12044              		.loc 1 3070 0 discriminator 3
 12045 0022 FB69     		ldr	r3, [r7, #28]
 12046 0024 0233     		adds	r3, r3, #2
 12047 0026 FA69     		ldr	r2, [r7, #28]
 12048 0028 C2F10502 		rsb	r2, r2, #5
 12049 002c 2C49     		ldr	r1, .L618+4
 12050 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 12051 0030 07F12001 		add	r1, r7, #32
 12052 0034 0B44     		add	r3, r3, r1
 12053 0036 03F81C2C 		strb	r2, [r3, #-28]
3069:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 12054              		.loc 1 3069 0 discriminator 3
 12055 003a FB69     		ldr	r3, [r7, #28]
 12056 003c 0133     		adds	r3, r3, #1
 12057 003e FB61     		str	r3, [r7, #28]
 12058              	.L614:
3069:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 12059              		.loc 1 3069 0 is_stmt 0 discriminator 1
 12060 0040 FB69     		ldr	r3, [r7, #28]
 12061 0042 052B     		cmp	r3, #5
 12062 0044 EDDD     		ble	.L615
3071:bluetooth_rxtx.c **** 
3072:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 12063              		.loc 1 3072 0 is_stmt 1
 12064 0046 274B     		ldr	r3, .L618+8
 12065 0048 D968     		ldr	r1, [r3, #12]
 12066 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
ARM GAS  /tmp/ccfQkuUX.s 			page 266


 12067 004c 3A1D     		adds	r2, r7, #4
 12068 004e 0846     		mov	r0, r1
 12069 0050 1146     		mov	r1, r2
 12070 0052 1A46     		mov	r2, r3
 12071 0054 FFF7FEFF 		bl	btle_calc_crc
 12072 0058 7861     		str	r0, [r7, #20]
3073:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 12073              		.loc 1 3073 0
 12074 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 12075 005c 7A69     		ldr	r2, [r7, #20]
 12076 005e D2B2     		uxtb	r2, r2
 12077 0060 07F12001 		add	r1, r7, #32
 12078 0064 0B44     		add	r3, r3, r1
 12079 0066 03F81C2C 		strb	r2, [r3, #-28]
3074:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 12080              		.loc 1 3074 0
 12081 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 12082 006c 0133     		adds	r3, r3, #1
 12083 006e 7A69     		ldr	r2, [r7, #20]
 12084 0070 120A     		lsrs	r2, r2, #8
 12085 0072 D2B2     		uxtb	r2, r2
 12086 0074 07F12001 		add	r1, r7, #32
 12087 0078 0B44     		add	r3, r3, r1
 12088 007a 03F81C2C 		strb	r2, [r3, #-28]
3075:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 12089              		.loc 1 3075 0
 12090 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 12091 0080 0233     		adds	r3, r3, #2
 12092 0082 7A69     		ldr	r2, [r7, #20]
 12093 0084 120C     		lsrs	r2, r2, #16
 12094 0086 D2B2     		uxtb	r2, r2
 12095 0088 07F12001 		add	r1, r7, #32
 12096 008c 0B44     		add	r3, r3, r1
 12097 008e 03F81C2C 		strb	r2, [r3, #-28]
3076:bluetooth_rxtx.c **** 
3077:bluetooth_rxtx.c **** 	// spam advertising packets
3078:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 12098              		.loc 1 3078 0
 12099 0092 1BE0     		b	.L616
 12100              	.L617:
3079:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 12101              		.loc 1 3079 0
 12102 0094 144B     		ldr	r3, .L618+12
 12103 0096 4FF08072 		mov	r2, #16777216
 12104 009a 1A60     		str	r2, [r3]
3080:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 12105              		.loc 1 3080 0
 12106 009c 124B     		ldr	r3, .L618+12
 12107 009e 4FF08062 		mov	r2, #67108864
 12108 00a2 1A60     		str	r2, [r3]
3081:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 12109              		.loc 1 3081 0
 12110 00a4 FB7E     		ldrb	r3, [r7, #27]
 12111 00a6 0333     		adds	r3, r3, #3
 12112 00a8 DAB2     		uxtb	r2, r3
 12113 00aa 3B1D     		adds	r3, r7, #4
 12114 00ac 0F48     		ldr	r0, .L618+16
ARM GAS  /tmp/ccfQkuUX.s 			page 267


 12115 00ae 1146     		mov	r1, r2
 12116 00b0 1A46     		mov	r2, r3
 12117 00b2 FFF7FEFF 		bl	le_transmit
3082:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 12118              		.loc 1 3082 0
 12119 00b6 0E4B     		ldr	r3, .L618+20
 12120 00b8 4FF08072 		mov	r2, #16777216
 12121 00bc 1A60     		str	r2, [r3]
3083:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 12122              		.loc 1 3083 0
 12123 00be 0C4B     		ldr	r3, .L618+20
 12124 00c0 4FF08062 		mov	r2, #67108864
 12125 00c4 1A60     		str	r2, [r3]
3084:bluetooth_rxtx.c **** 		msleep(100);
 12126              		.loc 1 3084 0
 12127 00c6 6420     		movs	r0, #100
 12128 00c8 FFF7FEFF 		bl	msleep
 12129              	.L616:
3078:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 12130              		.loc 1 3078 0
 12131 00cc 094B     		ldr	r3, .L618+24
 12132 00ce 1B78     		ldrb	r3, [r3]
 12133 00d0 DBB2     		uxtb	r3, r3
 12134 00d2 0C2B     		cmp	r3, #12
 12135 00d4 DED0     		beq	.L617
3085:bluetooth_rxtx.c **** 	}
3086:bluetooth_rxtx.c **** }
 12136              		.loc 1 3086 0
 12137 00d6 2437     		adds	r7, r7, #36
 12138              		.cfi_def_cfa_offset 12
 12139 00d8 BD46     		mov	sp, r7
 12140              		.cfi_def_cfa_register 13
 12141              		@ sp needed
 12142 00da 90BD     		pop	{r4, r7, pc}
 12143              	.L619:
 12144              		.align	2
 12145              	.L618:
 12146 00dc F0080000 		.word	.LC1
 12147 00e0 00000000 		.word	slave_mac_address
 12148 00e4 00000000 		.word	le
 12149 00e8 80E100E0 		.word	-536813184
 12150 00ec D6BE898E 		.word	-1903575338
 12151 00f0 00E100E0 		.word	-536813312
 12152 00f4 00000000 		.word	requested_mode
 12153              		.cfi_endproc
 12154              	.LFE51:
 12156              		.section	.text.specan,"ax",%progbits
 12157              		.align	2
 12158              		.global	specan
 12159              		.thumb
 12160              		.thumb_func
 12162              	specan:
 12163              	.LFB52:
3087:bluetooth_rxtx.c **** 
3088:bluetooth_rxtx.c **** /* spectrum analysis */
3089:bluetooth_rxtx.c **** void specan()
3090:bluetooth_rxtx.c **** {
ARM GAS  /tmp/ccfQkuUX.s 			page 268


 12164              		.loc 1 3090 0
 12165              		.cfi_startproc
 12166              		@ args = 0, pretend = 0, frame = 64
 12167              		@ frame_needed = 1, uses_anonymous_args = 0
 12168 0000 90B5     		push	{r4, r7, lr}
 12169              		.cfi_def_cfa_offset 12
 12170              		.cfi_offset 4, -12
 12171              		.cfi_offset 7, -8
 12172              		.cfi_offset 14, -4
 12173 0002 91B0     		sub	sp, sp, #68
 12174              		.cfi_def_cfa_offset 80
 12175 0004 00AF     		add	r7, sp, #0
 12176              		.cfi_def_cfa_register 7
3091:bluetooth_rxtx.c **** 	u8 epstat;
3092:bluetooth_rxtx.c **** 	u16 f;
3093:bluetooth_rxtx.c **** 	u8 i = 0;
 12177              		.loc 1 3093 0
 12178 0006 0023     		movs	r3, #0
 12179 0008 87F83D30 		strb	r3, [r7, #61]
3094:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
3095:bluetooth_rxtx.c **** 
3096:bluetooth_rxtx.c **** 	RXLED_SET;
 12180              		.loc 1 3096 0
 12181 000c 5A4B     		ldr	r3, .L631
 12182 000e 1022     		movs	r2, #16
 12183 0010 1A60     		str	r2, [r3]
3097:bluetooth_rxtx.c **** 
3098:bluetooth_rxtx.c **** 	queue_init();
 12184              		.loc 1 3098 0
 12185 0012 FFF7FEFF 		bl	queue_init
3099:bluetooth_rxtx.c **** 
3100:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
3101:bluetooth_rxtx.c **** 	PAEN_SET;
 12186              		.loc 1 3101 0
 12187 0016 594B     		ldr	r3, .L631+4
 12188 0018 8022     		movs	r2, #128
 12189 001a 1A60     		str	r2, [r3]
3102:bluetooth_rxtx.c **** 	//HGM_SET;
3103:bluetooth_rxtx.c **** #endif
3104:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 12190              		.loc 1 3104 0
 12191 001c 1220     		movs	r0, #18
 12192 001e 42F62231 		movw	r1, #11042
 12193 0022 FFF7FEFF 		bl	cc2400_set
3105:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 12194              		.loc 1 3105 0
 12195 0026 1420     		movs	r0, #20
 12196 0028 41F24B31 		movw	r1, #4939
 12197 002c FFF7FEFF 		bl	cc2400_set
3106:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 12198              		.loc 1 3106 0
 12199 0030 2020     		movs	r0, #32
 12200 0032 40F20111 		movw	r1, #257
 12201 0036 FFF7FEFF 		bl	cc2400_set
3107:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 12202              		.loc 1 3107 0
 12203 003a 0320     		movs	r0, #3
ARM GAS  /tmp/ccfQkuUX.s 			page 269


 12204 003c 2921     		movs	r1, #41
 12205 003e FFF7FEFF 		bl	cc2400_set
3108:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
3109:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 12206              		.loc 1 3109 0
 12207 0042 00BF     		nop
 12208              	.L621:
 12209              		.loc 1 3109 0 is_stmt 0 discriminator 1
 12210 0044 FFF7FEFF 		bl	cc2400_status
 12211 0048 0346     		mov	r3, r0
 12212 004a 03F04003 		and	r3, r3, #64
 12213 004e 002B     		cmp	r3, #0
 12214 0050 F8D0     		beq	.L621
3110:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 12215              		.loc 1 3110 0 is_stmt 1
 12216 0052 00BF     		nop
 12217              	.L622:
 12218              		.loc 1 3110 0 is_stmt 0 discriminator 1
 12219 0054 FFF7FEFF 		bl	cc2400_status
 12220 0058 0346     		mov	r3, r0
 12221 005a 03F00403 		and	r3, r3, #4
 12222 005e 002B     		cmp	r3, #0
 12223 0060 F8D1     		bne	.L622
3111:bluetooth_rxtx.c **** 
3112:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 12224              		.loc 1 3112 0 is_stmt 1
 12225 0062 7AE0     		b	.L623
 12226              	.L630:
3113:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 12227              		.loc 1 3113 0
 12228 0064 464B     		ldr	r3, .L631+8
 12229 0066 1B88     		ldrh	r3, [r3]	@ movhi
 12230 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 12231 006a 6FE0     		b	.L624
 12232              	.L629:
 12233              	.LBB29:
3114:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 12234              		.loc 1 3114 0
 12235 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 12236 006e 013B     		subs	r3, r3, #1
 12237 0070 9BB2     		uxth	r3, r3
 12238 0072 0220     		movs	r0, #2
 12239 0074 1946     		mov	r1, r3
 12240 0076 FFF7FEFF 		bl	cc2400_set
3115:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 12241              		.loc 1 3115 0
 12242 007a 6120     		movs	r0, #97
 12243 007c FFF7FEFF 		bl	cc2400_strobe
3116:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 12244              		.loc 1 3116 0
 12245 0080 00BF     		nop
 12246              	.L625:
 12247              		.loc 1 3116 0 is_stmt 0 discriminator 1
 12248 0082 FFF7FEFF 		bl	cc2400_status
 12249 0086 0346     		mov	r3, r0
 12250 0088 03F00403 		and	r3, r3, #4
 12251 008c 002B     		cmp	r3, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 270


 12252 008e F8D0     		beq	.L625
3117:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 12253              		.loc 1 3117 0 is_stmt 1
 12254 0090 6220     		movs	r0, #98
 12255 0092 FFF7FEFF 		bl	cc2400_strobe
3118:bluetooth_rxtx.c **** 
3119:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
3120:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 12256              		.loc 1 3120 0
 12257 0096 4FF4FA73 		mov	r3, #500
 12258 009a 7B60     		str	r3, [r7, #4]
 12259 009c 00BF     		nop
 12260              	.L626:
 12261              		.loc 1 3120 0 is_stmt 0 discriminator 2
 12262 009e 7B68     		ldr	r3, [r7, #4]
 12263 00a0 013B     		subs	r3, r3, #1
 12264 00a2 7B60     		str	r3, [r7, #4]
 12265 00a4 002B     		cmp	r3, #0
 12266 00a6 FAD1     		bne	.L626
3121:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 12267              		.loc 1 3121 0 is_stmt 1
 12268 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 12269 00ac 1346     		mov	r3, r2
 12270 00ae 5B00     		lsls	r3, r3, #1
 12271 00b0 1344     		add	r3, r3, r2
 12272 00b2 FA8F     		ldrh	r2, [r7, #62]
 12273 00b4 120A     		lsrs	r2, r2, #8
 12274 00b6 92B2     		uxth	r2, r2
 12275 00b8 D2B2     		uxtb	r2, r2
 12276 00ba 07F14001 		add	r1, r7, #64
 12277 00be 0B44     		add	r3, r3, r1
 12278 00c0 03F8382C 		strb	r2, [r3, #-56]
3122:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 12279              		.loc 1 3122 0
 12280 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 12281 00c8 1346     		mov	r3, r2
 12282 00ca 5B00     		lsls	r3, r3, #1
 12283 00cc 1344     		add	r3, r3, r2
 12284 00ce 0133     		adds	r3, r3, #1
 12285 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 12286 00d2 D2B2     		uxtb	r2, r2
 12287 00d4 07F14001 		add	r1, r7, #64
 12288 00d8 0B44     		add	r3, r3, r1
 12289 00da 03F8382C 		strb	r2, [r3, #-56]
3123:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 12290              		.loc 1 3123 0
 12291 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 12292 00e2 1346     		mov	r3, r2
 12293 00e4 5B00     		lsls	r3, r3, #1
 12294 00e6 1344     		add	r3, r3, r2
 12295 00e8 9C1C     		adds	r4, r3, #2
 12296 00ea 0620     		movs	r0, #6
 12297 00ec FFF7FEFF 		bl	cc2400_get
 12298 00f0 0346     		mov	r3, r0
 12299 00f2 1B0A     		lsrs	r3, r3, #8
 12300 00f4 9BB2     		uxth	r3, r3
 12301 00f6 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccfQkuUX.s 			page 271


 12302 00f8 07F14003 		add	r3, r7, #64
 12303 00fc 2344     		add	r3, r3, r4
 12304 00fe 03F8382C 		strb	r2, [r3, #-56]
3124:bluetooth_rxtx.c **** 			i++;
 12305              		.loc 1 3124 0
 12306 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 12307 0106 0133     		adds	r3, r3, #1
 12308 0108 87F83D30 		strb	r3, [r7, #61]
3125:bluetooth_rxtx.c **** 			if (i == 16) {
 12309              		.loc 1 3125 0
 12310 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 12311 0110 102B     		cmp	r3, #16
 12312 0112 0DD1     		bne	.L627
3126:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 12313              		.loc 1 3126 0
 12314 0114 07F10803 		add	r3, r7, #8
 12315 0118 0420     		movs	r0, #4
 12316 011a 1946     		mov	r1, r3
 12317 011c FFF7FEFF 		bl	enqueue
3127:bluetooth_rxtx.c **** 				i = 0;
 12318              		.loc 1 3127 0
 12319 0120 0023     		movs	r3, #0
 12320 0122 87F83D30 		strb	r3, [r7, #61]
3128:bluetooth_rxtx.c **** 
3129:bluetooth_rxtx.c **** 				handle_usb(clkn);
 12321              		.loc 1 3129 0
 12322 0126 174B     		ldr	r3, .L631+12
 12323 0128 1B68     		ldr	r3, [r3]
 12324 012a 1846     		mov	r0, r3
 12325 012c FFF7FEFF 		bl	handle_usb
 12326              	.L627:
3130:bluetooth_rxtx.c **** 			}
3131:bluetooth_rxtx.c **** 
3132:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 12327              		.loc 1 3132 0
 12328 0130 6420     		movs	r0, #100
 12329 0132 FFF7FEFF 		bl	cc2400_strobe
3133:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 12330              		.loc 1 3133 0
 12331 0136 00BF     		nop
 12332              	.L628:
 12333              		.loc 1 3133 0 is_stmt 0 discriminator 1
 12334 0138 FFF7FEFF 		bl	cc2400_status
 12335 013c 0346     		mov	r3, r0
 12336 013e 03F00403 		and	r3, r3, #4
 12337 0142 002B     		cmp	r3, #0
 12338 0144 F8D1     		bne	.L628
 12339              	.LBE29:
3113:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 12340              		.loc 1 3113 0 is_stmt 1 discriminator 2
 12341 0146 FB8F     		ldrh	r3, [r7, #62]
 12342 0148 0133     		adds	r3, r3, #1
 12343 014a FB87     		strh	r3, [r7, #62]	@ movhi
 12344              	.L624:
3113:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 12345              		.loc 1 3113 0 is_stmt 0 discriminator 1
 12346 014c FA8F     		ldrh	r2, [r7, #62]
ARM GAS  /tmp/ccfQkuUX.s 			page 272


 12347 014e 0E4B     		ldr	r3, .L631+16
 12348 0150 1B88     		ldrh	r3, [r3]	@ movhi
 12349 0152 9BB2     		uxth	r3, r3
 12350 0154 0133     		adds	r3, r3, #1
 12351 0156 9A42     		cmp	r2, r3
 12352 0158 88DB     		blt	.L629
 12353              	.L623:
3112:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 12354              		.loc 1 3112 0 is_stmt 1
 12355 015a 0C4B     		ldr	r3, .L631+20
 12356 015c 1B78     		ldrb	r3, [r3]
 12357 015e DBB2     		uxtb	r3, r3
 12358 0160 042B     		cmp	r3, #4
 12359 0162 3FF47FAF 		beq	.L630
3134:bluetooth_rxtx.c **** 		}
3135:bluetooth_rxtx.c **** 	}
3136:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 12360              		.loc 1 3136 0
 12361 0166 0A4B     		ldr	r3, .L631+24
 12362 0168 0022     		movs	r2, #0
 12363 016a 1A70     		strb	r2, [r3]
3137:bluetooth_rxtx.c **** 	RXLED_CLR;
 12364              		.loc 1 3137 0
 12365 016c 094B     		ldr	r3, .L631+28
 12366 016e 1022     		movs	r2, #16
 12367 0170 1A60     		str	r2, [r3]
3138:bluetooth_rxtx.c **** }
 12368              		.loc 1 3138 0
 12369 0172 4437     		adds	r7, r7, #68
 12370              		.cfi_def_cfa_offset 12
 12371 0174 BD46     		mov	sp, r7
 12372              		.cfi_def_cfa_register 13
 12373              		@ sp needed
 12374 0176 90BD     		pop	{r4, r7, pc}
 12375              	.L632:
 12376              		.align	2
 12377              	.L631:
 12378 0178 38C00920 		.word	537509944
 12379 017c 58C00920 		.word	537509976
 12380 0180 00000000 		.word	low_freq
 12381 0184 00000000 		.word	clkn
 12382 0188 00000000 		.word	high_freq
 12383 018c 00000000 		.word	requested_mode
 12384 0190 00000000 		.word	mode
 12385 0194 3CC00920 		.word	537509948
 12386              		.cfi_endproc
 12387              	.LFE52:
 12389              		.section	.rodata
 12390 08fe 0000     		.align	2
 12391              	.LC2:
 12392 0900 6C09     		.short	2412
 12393 0902 8509     		.short	2437
 12394 0904 9E09     		.short	2462
 12395              		.section	.text.led_specan,"ax",%progbits
 12396              		.align	2
 12397              		.global	led_specan
 12398              		.thumb
ARM GAS  /tmp/ccfQkuUX.s 			page 273


 12399              		.thumb_func
 12401              	led_specan:
 12402              	.LFB53:
3139:bluetooth_rxtx.c **** 
3140:bluetooth_rxtx.c **** /* LED based spectrum analysis */
3141:bluetooth_rxtx.c **** void led_specan()
3142:bluetooth_rxtx.c **** {
 12403              		.loc 1 3142 0
 12404              		.cfi_startproc
 12405              		@ args = 0, pretend = 0, frame = 16
 12406              		@ frame_needed = 1, uses_anonymous_args = 0
 12407 0000 80B5     		push	{r7, lr}
 12408              		.cfi_def_cfa_offset 8
 12409              		.cfi_offset 7, -8
 12410              		.cfi_offset 14, -4
 12411 0002 84B0     		sub	sp, sp, #16
 12412              		.cfi_def_cfa_offset 24
 12413 0004 00AF     		add	r7, sp, #0
 12414              		.cfi_def_cfa_register 7
3143:bluetooth_rxtx.c **** 	int8_t lvl;
3144:bluetooth_rxtx.c **** 	u8 i = 0;
 12415              		.loc 1 3144 0
 12416 0006 0023     		movs	r3, #0
 12417 0008 FB73     		strb	r3, [r7, #15]
3145:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 12418              		.loc 1 3145 0
 12419 000a 5B4A     		ldr	r2, .L650
 12420 000c 07F10803 		add	r3, r7, #8
 12421 0010 1068     		ldr	r0, [r2]	@ unaligned
 12422 0012 1860     		str	r0, [r3]	@ unaligned
 12423 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 12424 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
3146:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
3147:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
3148:bluetooth_rxtx.c **** 
3149:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
3150:bluetooth_rxtx.c **** 	PAEN_SET;
 12425              		.loc 1 3150 0
 12426 0018 584B     		ldr	r3, .L650+4
 12427 001a 8022     		movs	r2, #128
 12428 001c 1A60     		str	r2, [r3]
3151:bluetooth_rxtx.c **** 	//HGM_SET;
3152:bluetooth_rxtx.c **** #endif
3153:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 12429              		.loc 1 3153 0
 12430 001e 1220     		movs	r0, #18
 12431 0020 42F62231 		movw	r1, #11042
 12432 0024 FFF7FEFF 		bl	cc2400_set
3154:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 12433              		.loc 1 3154 0
 12434 0028 1420     		movs	r0, #20
 12435 002a 41F24B31 		movw	r1, #4939
 12436 002e FFF7FEFF 		bl	cc2400_set
3155:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 12437              		.loc 1 3155 0
 12438 0032 2020     		movs	r0, #32
 12439 0034 40F20111 		movw	r1, #257
ARM GAS  /tmp/ccfQkuUX.s 			page 274


 12440 0038 FFF7FEFF 		bl	cc2400_set
3156:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 12441              		.loc 1 3156 0
 12442 003c 0320     		movs	r0, #3
 12443 003e 2921     		movs	r1, #41
 12444 0040 FFF7FEFF 		bl	cc2400_set
3157:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 12445              		.loc 1 3157 0
 12446 0044 0620     		movs	r0, #6
 12447 0046 F121     		movs	r1, #241
 12448 0048 FFF7FEFF 		bl	cc2400_set
3158:bluetooth_rxtx.c **** 
3159:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 12449              		.loc 1 3159 0
 12450 004c 00BF     		nop
 12451              	.L634:
 12452              		.loc 1 3159 0 is_stmt 0 discriminator 1
 12453 004e FFF7FEFF 		bl	cc2400_status
 12454 0052 0346     		mov	r3, r0
 12455 0054 03F04003 		and	r3, r3, #64
 12456 0058 002B     		cmp	r3, #0
 12457 005a F8D0     		beq	.L634
3160:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 12458              		.loc 1 3160 0 is_stmt 1
 12459 005c 00BF     		nop
 12460              	.L635:
 12461              		.loc 1 3160 0 is_stmt 0 discriminator 1
 12462 005e FFF7FEFF 		bl	cc2400_status
 12463 0062 0346     		mov	r3, r0
 12464 0064 03F00403 		and	r3, r3, #4
 12465 0068 002B     		cmp	r3, #0
 12466 006a F8D1     		bne	.L635
3161:bluetooth_rxtx.c **** 
3162:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 12467              		.loc 1 3162 0 is_stmt 1
 12468 006c 79E0     		b	.L636
 12469              	.L649:
 12470              	.LBB30:
3163:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 12471              		.loc 1 3163 0
 12472 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12473 0070 5B00     		lsls	r3, r3, #1
 12474 0072 07F11002 		add	r2, r7, #16
 12475 0076 1344     		add	r3, r3, r2
 12476 0078 33F8083C 		ldrh	r3, [r3, #-8]
 12477 007c 013B     		subs	r3, r3, #1
 12478 007e 9BB2     		uxth	r3, r3
 12479 0080 0220     		movs	r0, #2
 12480 0082 1946     		mov	r1, r3
 12481 0084 FFF7FEFF 		bl	cc2400_set
3164:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 12482              		.loc 1 3164 0
 12483 0088 6120     		movs	r0, #97
 12484 008a FFF7FEFF 		bl	cc2400_strobe
3165:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 12485              		.loc 1 3165 0
 12486 008e 00BF     		nop
ARM GAS  /tmp/ccfQkuUX.s 			page 275


 12487              	.L637:
 12488              		.loc 1 3165 0 is_stmt 0 discriminator 1
 12489 0090 FFF7FEFF 		bl	cc2400_status
 12490 0094 0346     		mov	r3, r0
 12491 0096 03F00403 		and	r3, r3, #4
 12492 009a 002B     		cmp	r3, #0
 12493 009c F8D0     		beq	.L637
3166:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 12494              		.loc 1 3166 0 is_stmt 1
 12495 009e 6220     		movs	r0, #98
 12496 00a0 FFF7FEFF 		bl	cc2400_strobe
3167:bluetooth_rxtx.c **** 
3168:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
3169:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 12497              		.loc 1 3169 0
 12498 00a4 4FF4FA73 		mov	r3, #500
 12499 00a8 7B60     		str	r3, [r7, #4]
 12500 00aa 00BF     		nop
 12501              	.L638:
 12502              		.loc 1 3169 0 is_stmt 0 discriminator 2
 12503 00ac 7B68     		ldr	r3, [r7, #4]
 12504 00ae 013B     		subs	r3, r3, #1
 12505 00b0 7B60     		str	r3, [r7, #4]
 12506 00b2 002B     		cmp	r3, #0
 12507 00b4 FAD1     		bne	.L638
3170:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 12508              		.loc 1 3170 0 is_stmt 1
 12509 00b6 0620     		movs	r0, #6
 12510 00b8 FFF7FEFF 		bl	cc2400_get
 12511 00bc 0346     		mov	r3, r0
 12512 00be 1B0A     		lsrs	r3, r3, #8
 12513 00c0 9BB2     		uxth	r3, r3
 12514 00c2 BB73     		strb	r3, [r7, #14]
3171:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 12515              		.loc 1 3171 0
 12516 00c4 2E4B     		ldr	r3, .L650+8
 12517 00c6 1B78     		ldrb	r3, [r3]
 12518 00c8 DBB2     		uxtb	r3, r3
 12519 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 12520 00ce 5BB2     		sxtb	r3, r3
 12521 00d0 9A42     		cmp	r2, r3
 12522 00d2 15DD     		ble	.L639
3172:bluetooth_rxtx.c ****             switch (i) {
 12523              		.loc 1 3172 0
 12524 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12525 00d6 012B     		cmp	r3, #1
 12526 00d8 09D0     		beq	.L641
 12527 00da 022B     		cmp	r3, #2
 12528 00dc 0BD0     		beq	.L642
 12529 00de 002B     		cmp	r3, #0
 12530 00e0 00D0     		beq	.L643
 12531 00e2 21E0     		b	.L644
 12532              	.L643:
3173:bluetooth_rxtx.c ****                 case 0:
3174:bluetooth_rxtx.c ****                     TXLED_SET;
 12533              		.loc 1 3174 0
 12534 00e4 274B     		ldr	r3, .L650+12
ARM GAS  /tmp/ccfQkuUX.s 			page 276


 12535 00e6 4FF48072 		mov	r2, #256
 12536 00ea 1A60     		str	r2, [r3]
3175:bluetooth_rxtx.c ****                     break;
 12537              		.loc 1 3175 0
 12538 00ec 07E0     		b	.L640
 12539              	.L641:
3176:bluetooth_rxtx.c ****                 case 1:
3177:bluetooth_rxtx.c ****                     RXLED_SET;
 12540              		.loc 1 3177 0
 12541 00ee 254B     		ldr	r3, .L650+12
 12542 00f0 1022     		movs	r2, #16
 12543 00f2 1A60     		str	r2, [r3]
3178:bluetooth_rxtx.c ****                     break;
 12544              		.loc 1 3178 0
 12545 00f4 03E0     		b	.L640
 12546              	.L642:
3179:bluetooth_rxtx.c ****                 case 2:
3180:bluetooth_rxtx.c ****                     USRLED_SET;
 12547              		.loc 1 3180 0
 12548 00f6 234B     		ldr	r3, .L650+12
 12549 00f8 0222     		movs	r2, #2
 12550 00fa 1A60     		str	r2, [r3]
3181:bluetooth_rxtx.c ****                     break;
 12551              		.loc 1 3181 0
 12552 00fc 00BF     		nop
 12553              	.L640:
 12554 00fe 13E0     		b	.L644
 12555              	.L639:
3182:bluetooth_rxtx.c ****             }
3183:bluetooth_rxtx.c ****         }
3184:bluetooth_rxtx.c ****         else {
3185:bluetooth_rxtx.c ****             switch (i) {
 12556              		.loc 1 3185 0
 12557 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12558 0102 012B     		cmp	r3, #1
 12559 0104 08D0     		beq	.L645
 12560 0106 022B     		cmp	r3, #2
 12561 0108 0AD0     		beq	.L646
 12562 010a 002B     		cmp	r3, #0
 12563 010c 0CD1     		bne	.L644
3186:bluetooth_rxtx.c ****                 case 0:
3187:bluetooth_rxtx.c ****                     TXLED_CLR;
 12564              		.loc 1 3187 0
 12565 010e 1E4B     		ldr	r3, .L650+16
 12566 0110 4FF48072 		mov	r2, #256
 12567 0114 1A60     		str	r2, [r3]
3188:bluetooth_rxtx.c ****                     break;
 12568              		.loc 1 3188 0
 12569 0116 07E0     		b	.L644
 12570              	.L645:
3189:bluetooth_rxtx.c ****                 case 1:
3190:bluetooth_rxtx.c ****                     RXLED_CLR;
 12571              		.loc 1 3190 0
 12572 0118 1B4B     		ldr	r3, .L650+16
 12573 011a 1022     		movs	r2, #16
 12574 011c 1A60     		str	r2, [r3]
3191:bluetooth_rxtx.c ****                     break;
ARM GAS  /tmp/ccfQkuUX.s 			page 277


 12575              		.loc 1 3191 0
 12576 011e 03E0     		b	.L644
 12577              	.L646:
3192:bluetooth_rxtx.c ****                 case 2:
3193:bluetooth_rxtx.c ****                     USRLED_CLR;
 12578              		.loc 1 3193 0
 12579 0120 194B     		ldr	r3, .L650+16
 12580 0122 0222     		movs	r2, #2
 12581 0124 1A60     		str	r2, [r3]
3194:bluetooth_rxtx.c ****                     break;
 12582              		.loc 1 3194 0
 12583 0126 00BF     		nop
 12584              	.L644:
3195:bluetooth_rxtx.c ****             }
3196:bluetooth_rxtx.c ****         }
3197:bluetooth_rxtx.c **** 
3198:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 12585              		.loc 1 3198 0
 12586 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 12587 012a 5A1C     		adds	r2, r3, #1
 12588 012c 174B     		ldr	r3, .L650+20
 12589 012e 83FB0231 		smull	r3, r1, r3, r2
 12590 0132 D317     		asrs	r3, r2, #31
 12591 0134 C91A     		subs	r1, r1, r3
 12592 0136 0B46     		mov	r3, r1
 12593 0138 5B00     		lsls	r3, r3, #1
 12594 013a 0B44     		add	r3, r3, r1
 12595 013c D11A     		subs	r1, r2, r3
 12596 013e 0B46     		mov	r3, r1
 12597 0140 FB73     		strb	r3, [r7, #15]
3199:bluetooth_rxtx.c **** 
3200:bluetooth_rxtx.c **** 		handle_usb(clkn);
 12598              		.loc 1 3200 0
 12599 0142 134B     		ldr	r3, .L650+24
 12600 0144 1B68     		ldr	r3, [r3]
 12601 0146 1846     		mov	r0, r3
 12602 0148 FFF7FEFF 		bl	handle_usb
3201:bluetooth_rxtx.c ****         //wait(1);
3202:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 12603              		.loc 1 3202 0
 12604 014c 6420     		movs	r0, #100
 12605 014e FFF7FEFF 		bl	cc2400_strobe
3203:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 12606              		.loc 1 3203 0
 12607 0152 00BF     		nop
 12608              	.L648:
 12609              		.loc 1 3203 0 is_stmt 0 discriminator 1
 12610 0154 FFF7FEFF 		bl	cc2400_status
 12611 0158 0346     		mov	r3, r0
 12612 015a 03F00403 		and	r3, r3, #4
 12613 015e 002B     		cmp	r3, #0
 12614 0160 F8D1     		bne	.L648
 12615              	.L636:
 12616              	.LBE30:
3162:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 12617              		.loc 1 3162 0 is_stmt 1
 12618 0162 0C4B     		ldr	r3, .L650+28
ARM GAS  /tmp/ccfQkuUX.s 			page 278


 12619 0164 1B78     		ldrb	r3, [r3]
 12620 0166 DBB2     		uxtb	r3, r3
 12621 0168 072B     		cmp	r3, #7
 12622 016a 80D0     		beq	.L649
3204:bluetooth_rxtx.c **** 	}
3205:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 12623              		.loc 1 3205 0
 12624 016c 0A4B     		ldr	r3, .L650+32
 12625 016e 0022     		movs	r2, #0
 12626 0170 1A70     		strb	r2, [r3]
3206:bluetooth_rxtx.c **** }
 12627              		.loc 1 3206 0
 12628 0172 1037     		adds	r7, r7, #16
 12629              		.cfi_def_cfa_offset 8
 12630 0174 BD46     		mov	sp, r7
 12631              		.cfi_def_cfa_register 13
 12632              		@ sp needed
 12633 0176 80BD     		pop	{r7, pc}
 12634              	.L651:
 12635              		.align	2
 12636              	.L650:
 12637 0178 00090000 		.word	.LC2
 12638 017c 58C00920 		.word	537509976
 12639 0180 00000000 		.word	rssi_threshold
 12640 0184 38C00920 		.word	537509944
 12641 0188 3CC00920 		.word	537509948
 12642 018c 56555555 		.word	1431655766
 12643 0190 00000000 		.word	clkn
 12644 0194 00000000 		.word	requested_mode
 12645 0198 00000000 		.word	mode
 12646              		.cfi_endproc
 12647              	.LFE53:
 12649              		.section	.text.main,"ax",%progbits
 12650              		.align	2
 12651              		.global	main
 12652              		.thumb
 12653              		.thumb_func
 12655              	main:
 12656              	.LFB54:
3207:bluetooth_rxtx.c **** 
3208:bluetooth_rxtx.c **** int main()
3209:bluetooth_rxtx.c **** {
 12657              		.loc 1 3209 0
 12658              		.cfi_startproc
 12659              		@ args = 0, pretend = 0, frame = 0
 12660              		@ frame_needed = 1, uses_anonymous_args = 0
 12661 0000 80B5     		push	{r7, lr}
 12662              		.cfi_def_cfa_offset 8
 12663              		.cfi_offset 7, -8
 12664              		.cfi_offset 14, -4
 12665 0002 00AF     		add	r7, sp, #0
 12666              		.cfi_def_cfa_register 7
3210:bluetooth_rxtx.c **** 	ubertooth_init();
 12667              		.loc 1 3210 0
 12668 0004 FFF7FEFF 		bl	ubertooth_init
3211:bluetooth_rxtx.c **** 	clkn_init();
 12669              		.loc 1 3211 0
ARM GAS  /tmp/ccfQkuUX.s 			page 279


 12670 0008 FFF7FEFF 		bl	clkn_init
3212:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 12671              		.loc 1 3212 0
 12672 000c 4B48     		ldr	r0, .L674
 12673 000e FFF7FEFF 		bl	ubertooth_usb_init
 12674              	.L672:
3213:bluetooth_rxtx.c **** 
3214:bluetooth_rxtx.c **** 	while (1) {
3215:bluetooth_rxtx.c **** 		handle_usb(clkn);
 12675              		.loc 1 3215 0
 12676 0012 4B4B     		ldr	r3, .L674+4
 12677 0014 1B68     		ldr	r3, [r3]
 12678 0016 1846     		mov	r0, r3
 12679 0018 FFF7FEFF 		bl	handle_usb
3216:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 12680              		.loc 1 3216 0
 12681 001c 494B     		ldr	r3, .L674+8
 12682 001e 1B78     		ldrb	r3, [r3]
 12683 0020 DAB2     		uxtb	r2, r3
 12684 0022 494B     		ldr	r3, .L674+12
 12685 0024 1B78     		ldrb	r3, [r3]
 12686 0026 DBB2     		uxtb	r3, r3
 12687 0028 9A42     		cmp	r2, r3
 12688 002a 00F08680 		beq	.L653
3217:bluetooth_rxtx.c **** 			switch (requested_mode) {
 12689              		.loc 1 3217 0
 12690 002e 454B     		ldr	r3, .L674+8
 12691 0030 1B78     		ldrb	r3, [r3]
 12692 0032 DBB2     		uxtb	r3, r3
 12693 0034 0F2B     		cmp	r3, #15
 12694 0036 7FD8     		bhi	.L673
 12695 0038 01A2     		adr	r2, .L656
 12696 003a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 12697 003e 00BF     		.p2align 2
 12698              	.L656:
 12699 0040 33010000 		.word	.L655+1
 12700 0044 8D000000 		.word	.L657+1
 12701 0048 39010000 		.word	.L673+1
 12702 004c CF000000 		.word	.L658+1
 12703 0050 13010000 		.word	.L659+1
 12704 0054 DF000000 		.word	.L660+1
 12705 0058 05010000 		.word	.L661+1
 12706 005c 19010000 		.word	.L662+1
 12707 0060 B1000000 		.word	.L663+1
 12708 0064 BD000000 		.word	.L664+1
 12709 0068 C3000000 		.word	.L665+1
 12710 006c 81000000 		.word	.L666+1
 12711 0070 C9000000 		.word	.L667+1
 12712 0074 1F010000 		.word	.L668+1
 12713 0078 99000000 		.word	.L669+1
 12714 007c A5000000 		.word	.L670+1
 12715              		.p2align 1
 12716              	.L666:
3218:bluetooth_rxtx.c **** 				 case MODE_RESET:
3219:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
3220:bluetooth_rxtx.c **** 					wait(1);
 12717              		.loc 1 3220 0
ARM GAS  /tmp/ccfQkuUX.s 			page 280


 12718 0080 0120     		movs	r0, #1
 12719 0082 FFF7FEFF 		bl	wait
3221:bluetooth_rxtx.c **** 					reset();
 12720              		.loc 1 3221 0
 12721 0086 FFF7FEFF 		bl	reset
3222:bluetooth_rxtx.c **** 					break;
 12722              		.loc 1 3222 0
 12723 008a 56E0     		b	.L653
 12724              	.L657:
3223:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
3224:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 12725              		.loc 1 3224 0
 12726 008c 2E4B     		ldr	r3, .L674+12
 12727 008e 0122     		movs	r2, #1
 12728 0090 1A70     		strb	r2, [r3]
3225:bluetooth_rxtx.c **** 					bt_stream_legacy();
 12729              		.loc 1 3225 0
 12730 0092 FFF7FEFF 		bl	bt_stream_legacy
3226:bluetooth_rxtx.c **** 					break;
 12731              		.loc 1 3226 0
 12732 0096 50E0     		b	.L653
 12733              	.L669:
3227:bluetooth_rxtx.c **** 				case MODE_RX_FREQ:
3228:bluetooth_rxtx.c **** 					mode = MODE_RX_FREQ;
 12734              		.loc 1 3228 0
 12735 0098 2B4B     		ldr	r3, .L674+12
 12736 009a 0E22     		movs	r2, #14
 12737 009c 1A70     		strb	r2, [r3]
3229:bluetooth_rxtx.c **** 					bt_stream_freq();
 12738              		.loc 1 3229 0
 12739 009e FFF7FEFF 		bl	bt_stream_freq
3230:bluetooth_rxtx.c **** 					break;
 12740              		.loc 1 3230 0
 12741 00a2 4AE0     		b	.L653
 12742              	.L670:
3231:bluetooth_rxtx.c **** 				case MODE_RX_PROPOSED:
3232:bluetooth_rxtx.c **** 					mode = MODE_RX_PROPOSED;
 12743              		.loc 1 3232 0
 12744 00a4 284B     		ldr	r3, .L674+12
 12745 00a6 0F22     		movs	r2, #15
 12746 00a8 1A70     		strb	r2, [r3]
3233:bluetooth_rxtx.c **** 					bt_stream_proposed();
 12747              		.loc 1 3233 0
 12748 00aa FFF7FEFF 		bl	bt_stream_proposed
3234:bluetooth_rxtx.c **** 					break;
 12749              		.loc 1 3234 0
 12750 00ae 44E0     		b	.L653
 12751              	.L663:
3235:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
3236:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 12752              		.loc 1 3236 0
 12753 00b0 254B     		ldr	r3, .L674+12
 12754 00b2 0822     		movs	r2, #8
 12755 00b4 1A70     		strb	r2, [r3]
3237:bluetooth_rxtx.c **** 					bt_stream_rx();
 12756              		.loc 1 3237 0
 12757 00b6 FFF7FEFF 		bl	bt_stream_rx
ARM GAS  /tmp/ccfQkuUX.s 			page 281


3238:bluetooth_rxtx.c **** 					break;
 12758              		.loc 1 3238 0
 12759 00ba 3EE0     		b	.L653
 12760              	.L664:
3239:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
3240:bluetooth_rxtx.c **** 					bt_follow_le();
 12761              		.loc 1 3240 0
 12762 00bc FFF7FEFF 		bl	bt_follow_le
3241:bluetooth_rxtx.c **** 					break;
 12763              		.loc 1 3241 0
 12764 00c0 3BE0     		b	.L653
 12765              	.L665:
3242:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
3243:bluetooth_rxtx.c **** 					bt_promisc_le();
 12766              		.loc 1 3243 0
 12767 00c2 FFF7FEFF 		bl	bt_promisc_le
3244:bluetooth_rxtx.c **** 					break;
 12768              		.loc 1 3244 0
 12769 00c6 38E0     		b	.L653
 12770              	.L667:
3245:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
3246:bluetooth_rxtx.c **** 					bt_slave_le();
 12771              		.loc 1 3246 0
 12772 00c8 FFF7FEFF 		bl	bt_slave_le
3247:bluetooth_rxtx.c **** 					break;
 12773              		.loc 1 3247 0
 12774 00cc 35E0     		b	.L653
 12775              	.L658:
3248:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
3249:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 12776              		.loc 1 3249 0
 12777 00ce 1E4B     		ldr	r3, .L674+12
 12778 00d0 0322     		movs	r2, #3
 12779 00d2 1A70     		strb	r2, [r3]
3250:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 12780              		.loc 1 3250 0
 12781 00d4 1D48     		ldr	r0, .L674+16
 12782 00d6 1E49     		ldr	r1, .L674+20
 12783 00d8 FFF7FEFF 		bl	cc2400_txtest
3251:bluetooth_rxtx.c **** 					break;
 12784              		.loc 1 3251 0
 12785 00dc 2DE0     		b	.L653
 12786              	.L660:
3252:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
3253:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 12787              		.loc 1 3253 0
 12788 00de 1A4B     		ldr	r3, .L674+12
 12789 00e0 0522     		movs	r2, #5
 12790 00e2 1A70     		strb	r2, [r3]
3254:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 12791              		.loc 1 3254 0
 12792 00e4 1A48     		ldr	r0, .L674+20
 12793 00e6 FFF7FEFF 		bl	cc2400_rangetest
3255:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 12794              		.loc 1 3255 0
 12795 00ea 174B     		ldr	r3, .L674+12
 12796 00ec 0022     		movs	r2, #0
ARM GAS  /tmp/ccfQkuUX.s 			page 282


 12797 00ee 1A70     		strb	r2, [r3]
3256:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 12798              		.loc 1 3256 0
 12799 00f0 144B     		ldr	r3, .L674+8
 12800 00f2 1B78     		ldrb	r3, [r3]
 12801 00f4 DBB2     		uxtb	r3, r3
 12802 00f6 052B     		cmp	r3, #5
 12803 00f8 03D1     		bne	.L671
3257:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 12804              		.loc 1 3257 0
 12805 00fa 124B     		ldr	r3, .L674+8
 12806 00fc 0022     		movs	r2, #0
 12807 00fe 1A70     		strb	r2, [r3]
3258:bluetooth_rxtx.c **** 					break;
 12808              		.loc 1 3258 0
 12809 0100 1BE0     		b	.L653
 12810              	.L671:
 12811 0102 1AE0     		b	.L653
 12812              	.L661:
3259:bluetooth_rxtx.c **** 				case MODE_REPEATER:
3260:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 12813              		.loc 1 3260 0
 12814 0104 104B     		ldr	r3, .L674+12
 12815 0106 0622     		movs	r2, #6
 12816 0108 1A70     		strb	r2, [r3]
3261:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 12817              		.loc 1 3261 0
 12818 010a 1148     		ldr	r0, .L674+20
 12819 010c FFF7FEFF 		bl	cc2400_repeater
3262:bluetooth_rxtx.c **** 					break;
 12820              		.loc 1 3262 0
 12821 0110 13E0     		b	.L653
 12822              	.L659:
3263:bluetooth_rxtx.c **** 				case MODE_SPECAN:
3264:bluetooth_rxtx.c **** 					specan();
 12823              		.loc 1 3264 0
 12824 0112 FFF7FEFF 		bl	specan
3265:bluetooth_rxtx.c **** 					break;
 12825              		.loc 1 3265 0
 12826 0116 10E0     		b	.L653
 12827              	.L662:
3266:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
3267:bluetooth_rxtx.c **** 					led_specan();
 12828              		.loc 1 3267 0
 12829 0118 FFF7FEFF 		bl	led_specan
3268:bluetooth_rxtx.c **** 					break;
 12830              		.loc 1 3268 0
 12831 011c 0DE0     		b	.L653
 12832              	.L668:
3269:bluetooth_rxtx.c **** 				case MODE_EGO:
3270:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 12833              		.loc 1 3270 0
 12834 011e 0A4B     		ldr	r3, .L674+12
 12835 0120 0D22     		movs	r2, #13
 12836 0122 1A70     		strb	r2, [r3]
3271:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 12837              		.loc 1 3271 0
ARM GAS  /tmp/ccfQkuUX.s 			page 283


 12838 0124 0B4B     		ldr	r3, .L674+24
 12839 0126 1B78     		ldrb	r3, [r3]
 12840 0128 DBB2     		uxtb	r3, r3
 12841 012a 1846     		mov	r0, r3
 12842 012c FFF7FEFF 		bl	ego_main
3272:bluetooth_rxtx.c **** 					break;
 12843              		.loc 1 3272 0
 12844 0130 03E0     		b	.L653
 12845              	.L655:
3273:bluetooth_rxtx.c **** 				case MODE_IDLE:
3274:bluetooth_rxtx.c **** 					cc2400_idle();
 12846              		.loc 1 3274 0
 12847 0132 FFF7FEFF 		bl	cc2400_idle
3275:bluetooth_rxtx.c **** 					break;
 12848              		.loc 1 3275 0
 12849 0136 00E0     		b	.L653
 12850              	.L673:
3276:bluetooth_rxtx.c **** 				default:
3277:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
3278:bluetooth_rxtx.c **** 					break;
 12851              		.loc 1 3278 0
 12852 0138 00BF     		nop
 12853              	.L653:
3279:bluetooth_rxtx.c **** 			}
3280:bluetooth_rxtx.c **** 	}
 12854              		.loc 1 3280 0 discriminator 1
 12855 013a 6AE7     		b	.L672
 12856              	.L675:
 12857              		.align	2
 12858              	.L674:
 12859 013c 00000000 		.word	vendor_request_handler
 12860 0140 00000000 		.word	clkn
 12861 0144 00000000 		.word	requested_mode
 12862 0148 00000000 		.word	mode
 12863 014c 00000000 		.word	modulation
 12864 0150 00000000 		.word	channel
 12865 0154 00000000 		.word	ego_mode
 12866              		.cfi_endproc
 12867              	.LFE54:
 12869              		.bss
 12870              		.align	2
 12871              	restart_jamming.4909:
 12872 00d4 00000000 		.space	4
 12873              		.align	2
 12874              	first_ts.5007:
 12875 00d8 00000000 		.space	4
 12876              		.align	2
 12877              	prev_clk.5013:
 12878 00dc 00000000 		.space	4
 12879              		.text
 12880              	.Letext0:
 12881              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 12882              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 12883              		.file 4 "../common/ubertooth.h"
 12884              		.file 5 "bluetooth_le.h"
 12885              		.file 6 "bluetooth.h"
 12886              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccfQkuUX.s 			page 284


ARM GAS  /tmp/ccfQkuUX.s 			page 285


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccfQkuUX.s:19     .data:0000000000000000 $d
     /tmp/ccfQkuUX.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccfQkuUX.s:29     .rodata:0000000000000000 $d
     /tmp/ccfQkuUX.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccfQkuUX.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccfQkuUX.s:80     .rodata:000000000000002c payload
     /tmp/ccfQkuUX.s:104    .rodata:0000000000000040 whitening
     /tmp/ccfQkuUX.s:235    .rodata:00000000000000c0 whitening_index
     /tmp/ccfQkuUX.s:279    .rodata:00000000000000e8 hop_interval_lut
     /tmp/ccfQkuUX.s:320    .rodata:0000000000000110 whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccfQkuUX.s:806    .rodata:0000000000000890 compile_info
                            *COM*:0000000000000001 device_index
                            *COM*:0000000000000004 first_ts
                            *COM*:0000000000000004 second_ts
                            *COM*:0000000000000004 diff_ts
                            *COM*:0000000000000001 rssi_avg
                            *COM*:0000000000000001 freq_avg
                            *COM*:0000000000000004 clkn_freq
                            *COM*:0000000000000004 clkn_legacy
                            *COM*:0000000000000004 clkn_proposed
                            *COM*:0000000000000004 clkn
     /tmp/ccfQkuUX.s:823    .bss:0000000000000000 hop_mode
     /tmp/ccfQkuUX.s:824    .bss:0000000000000000 $d
     /tmp/ccfQkuUX.s:828    .bss:0000000000000001 do_hop
     /tmp/ccfQkuUX.s:833    .bss:0000000000000002 cs_no_squelch
     /tmp/ccfQkuUX.s:839    .data:0000000000000004 cs_threshold_req
     /tmp/ccfQkuUX.s:844    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/ccfQkuUX.s:854    .bss:0000000000000004 hop_direct_channel
     /tmp/ccfQkuUX.s:860    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/ccfQkuUX.s:870    .bss:000000000000000c idle_buf_channel
     /tmp/ccfQkuUX.s:876    .bss:000000000000000e active_buf_channel
     /tmp/ccfQkuUX.s:882    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccfQkuUX.s:891    .data:0000000000000008 active_rxbuf
     /tmp/ccfQkuUX.s:897    .data:000000000000000c idle_rxbuf
     /tmp/ccfQkuUX.s:903    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccfQkuUX.s:922    .bss:0000000000000018 le_jam_count
     /tmp/ccfQkuUX.s:928    .bss:000000000000001c data_cb
     /tmp/ccfQkuUX.s:934    .bss:0000000000000020 packet_cb
     /tmp/ccfQkuUX.s:940    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
ARM GAS  /tmp/ccfQkuUX.s 			page 286


     /tmp/ccfQkuUX.s:946    .bss:00000000000000c2 mode
     /tmp/ccfQkuUX.s:951    .bss:00000000000000c3 requested_mode
     /tmp/ccfQkuUX.s:956    .bss:00000000000000c4 jam_mode
     /tmp/ccfQkuUX.s:961    .bss:00000000000000c5 ego_mode
     /tmp/ccfQkuUX.s:966    .bss:00000000000000c6 modulation
     /tmp/ccfQkuUX.s:973    .data:0000000000000054 channel
     /tmp/ccfQkuUX.s:980    .bss:00000000000000c8 requested_channel
     /tmp/ccfQkuUX.s:986    .bss:00000000000000ca saved_request
     /tmp/ccfQkuUX.s:993    .data:0000000000000056 low_freq
     /tmp/ccfQkuUX.s:999    .data:0000000000000058 high_freq
     /tmp/ccfQkuUX.s:1004   .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccfQkuUX.s:1015   .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/ccfQkuUX.s:1022   .bss:00000000000000cd rssi_count
     /tmp/ccfQkuUX.s:1028   .bss:00000000000000d0 rssi_sum
     /tmp/ccfQkuUX.s:1031   .text.rssi_reset:0000000000000000 $t
     /tmp/ccfQkuUX.s:1035   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccfQkuUX.s:1075   .text.rssi_reset:0000000000000024 $d
     /tmp/ccfQkuUX.s:1083   .text.rssi_add:0000000000000000 $t
     /tmp/ccfQkuUX.s:1087   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccfQkuUX.s:1153   .text.rssi_add:000000000000005c $d
     /tmp/ccfQkuUX.s:1161   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccfQkuUX.s:1165   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccfQkuUX.s:1259   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccfQkuUX.s:1268   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccfQkuUX.s:1272   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccfQkuUX.s:1354   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccfQkuUX.s:1360   .text.enqueue:0000000000000000 $t
     /tmp/ccfQkuUX.s:1364   .text.enqueue:0000000000000000 enqueue
     /tmp/ccfQkuUX.s:1594   .text.enqueue:0000000000000164 $d
     /tmp/ccfQkuUX.s:1610   .text.enqueue_legacy:0000000000000000 $t
     /tmp/ccfQkuUX.s:1614   .text.enqueue_legacy:0000000000000000 enqueue_legacy
     /tmp/ccfQkuUX.s:1796   .text.enqueue_legacy:0000000000000110 $d
     /tmp/ccfQkuUX.s:1806   .text.enqueue_freq:0000000000000000 $t
     /tmp/ccfQkuUX.s:1810   .text.enqueue_freq:0000000000000000 enqueue_freq
     /tmp/ccfQkuUX.s:1994   .text.enqueue_freq:0000000000000110 $d
     /tmp/ccfQkuUX.s:2004   .text.enqueue_proposed:0000000000000000 $t
     /tmp/ccfQkuUX.s:2008   .text.enqueue_proposed:0000000000000000 enqueue_proposed
     /tmp/ccfQkuUX.s:2191   .text.enqueue_proposed:0000000000000110 $d
     /tmp/ccfQkuUX.s:2201   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccfQkuUX.s:2206   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccfQkuUX.s:2289   .text.enqueue_with_ts:000000000000006c $d
     /tmp/ccfQkuUX.s:2297   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccfQkuUX.s:2301   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccfQkuUX.s:2376   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccfQkuUX.s:2384   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccfQkuUX.s:2388   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccfQkuUX.s:2429   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccfQkuUX.s:2437   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccfQkuUX.s:2441   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccfQkuUX.s:2482   .text.cs_trigger_disable:000000000000002c $d
ARM GAS  /tmp/ccfQkuUX.s 			page 287


     /tmp/ccfQkuUX.s:2494   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccfQkuUX.s:2498   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccfQkuUX.s:2535   .text.vendor_request_handler:0000000000000024 $d
     /tmp/ccfQkuUX.s:2598   .text.vendor_request_handler:0000000000000120 $t
     /tmp/ccfQkuUX.s:3013   .text.vendor_request_handler:00000000000003c8 $d
     /tmp/ccfQkuUX.s:3022   .text.vendor_request_handler:00000000000003e4 $t
     /tmp/ccfQkuUX.s:3413   .text.vendor_request_handler:0000000000000638 $d
     /tmp/ccfQkuUX.s:3431   .text.vendor_request_handler:0000000000000678 $t
     /tmp/ccfQkuUX.s:3821   .text.vendor_request_handler:0000000000000918 $d
     /tmp/ccfQkuUX.s:3833   .text.vendor_request_handler:0000000000000940 $t
     /tmp/ccfQkuUX.s:8472   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccfQkuUX.s:4117   .text.vendor_request_handler:0000000000000af8 $d
     /tmp/ccfQkuUX.s:4127   .text.clkn_init:0000000000000000 $t
     /tmp/ccfQkuUX.s:4131   .text.clkn_init:0000000000000000 clkn_init
     /tmp/ccfQkuUX.s:4182   .text.clkn_init:0000000000000038 $d
     /tmp/ccfQkuUX.s:4192   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccfQkuUX.s:4197   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/ccfQkuUX.s:4366   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/ccfQkuUX.s:4378   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccfQkuUX.s:4383   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccfQkuUX.s:4425   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/ccfQkuUX.s:4439   .text.msleep:0000000000000000 $t
     /tmp/ccfQkuUX.s:4443   .text.msleep:0000000000000000 msleep
     /tmp/ccfQkuUX.s:4512   .text.msleep:0000000000000070 $d
     /tmp/ccfQkuUX.s:4520   .text.dma_init:0000000000000000 $t
     /tmp/ccfQkuUX.s:4524   .text.dma_init:0000000000000000 dma_init
     /tmp/ccfQkuUX.s:4698   .text.dma_init:0000000000000104 $d
     /tmp/ccfQkuUX.s:4733   .text.dma_init_le:0000000000000000 $t
     /tmp/ccfQkuUX.s:4737   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccfQkuUX.s:4942   .text.dma_init_le:0000000000000134 $d
     /tmp/ccfQkuUX.s:4974   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccfQkuUX.s:4979   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccfQkuUX.s:5082   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/ccfQkuUX.s:5102   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccfQkuUX.s:5107   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccfQkuUX.s:5130   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccfQkuUX.s:5145   .text.DMA_IRQHandler:0000000000000054 $t
     /tmp/ccfQkuUX.s:5157   .text.DMA_IRQHandler:000000000000005c $d
     /tmp/ccfQkuUX.s:5162   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccfQkuUX.s:5166   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccfQkuUX.s:5219   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccfQkuUX.s:5229   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccfQkuUX.s:5233   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccfQkuUX.s:5331   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccfQkuUX.s:5350   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccfQkuUX.s:5354   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccfQkuUX.s:5407   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccfQkuUX.s:5414   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccfQkuUX.s:5418   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccfQkuUX.s:5532   .text.cc2400_rx:00000000000000b0 $d
     /tmp/ccfQkuUX.s:5539   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccfQkuUX.s:5543   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccfQkuUX.s:5678   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccfQkuUX.s:5685   .text.le_transmit:0000000000000000 $t
     /tmp/ccfQkuUX.s:5690   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccfQkuUX.s:6083   .text.le_transmit:00000000000002d4 $d
     /tmp/ccfQkuUX.s:6096   .text.le_jam:0000000000000000 $t
ARM GAS  /tmp/ccfQkuUX.s 			page 288


     /tmp/ccfQkuUX.s:6101   .text.le_jam:0000000000000000 le_jam
     /tmp/ccfQkuUX.s:6184   .text.le_jam:000000000000008c $d
     /tmp/ccfQkuUX.s:6190   .text.hop:0000000000000000 $t
     /tmp/ccfQkuUX.s:6195   .text.hop:0000000000000000 hop
     /tmp/ccfQkuUX.s:6362   .text.hop:000000000000010c $d
     /tmp/ccfQkuUX.s:6373   .text.cc2400_spi_rev:0000000000000000 $t
     /tmp/ccfQkuUX.s:6378   .text.cc2400_spi_rev:0000000000000000 cc2400_spi_rev
     /tmp/ccfQkuUX.s:6475   .text.cc2400_spi_rev:000000000000007c $d
     /tmp/ccfQkuUX.s:6482   .text.cc2400_get_rev:0000000000000000 $t
     /tmp/ccfQkuUX.s:6487   .text.cc2400_get_rev:0000000000000000 cc2400_get_rev
     /tmp/ccfQkuUX.s:6529   .text.add:0000000000000000 $t
     /tmp/ccfQkuUX.s:6534   .text.add:0000000000000000 add
     /tmp/ccfQkuUX.s:6594   .text.bt_stream_proposed:0000000000000000 $t
     /tmp/ccfQkuUX.s:6599   .text.bt_stream_proposed:0000000000000000 bt_stream_proposed
     /tmp/ccfQkuUX.s:6891   .text.bt_stream_proposed:000000000000020c $d
     /tmp/ccfQkuUX.s:6905   .text.bt_stream_freq:0000000000000000 $t
     /tmp/ccfQkuUX.s:6910   .text.bt_stream_freq:0000000000000000 bt_stream_freq
     /tmp/ccfQkuUX.s:7277   .text.bt_stream_freq:000000000000026c $d
     /tmp/ccfQkuUX.s:7294   .text.bt_stream_freq:00000000000002a8 $t
     /tmp/ccfQkuUX.s:7418   .text.bt_stream_freq:0000000000000374 $d
     /tmp/ccfQkuUX.s:7431   .text.bt_stream_legacy:0000000000000000 $t
     /tmp/ccfQkuUX.s:7436   .text.bt_stream_legacy:0000000000000000 bt_stream_legacy
     /tmp/ccfQkuUX.s:7817   .text.bt_stream_legacy:00000000000002ac $d
     /tmp/ccfQkuUX.s:7836   .text.bt_stream_legacy:00000000000002f0 $t
     /tmp/ccfQkuUX.s:7942   .text.bt_stream_legacy:000000000000039c $d
     /tmp/ccfQkuUX.s:7954   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccfQkuUX.s:7959   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccfQkuUX.s:8392   .text.bt_stream_rx:0000000000000308 $d
     /tmp/ccfQkuUX.s:8411   .text.bt_stream_rx:0000000000000348 $t
     /tmp/ccfQkuUX.s:8459   .text.bt_stream_rx:0000000000000390 $d
     /tmp/ccfQkuUX.s:8468   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccfQkuUX.s:8516   .text.le_set_access_address:0000000000000030 $d
     /tmp/ccfQkuUX.s:8521   .text.reset_le:0000000000000000 $t
     /tmp/ccfQkuUX.s:8526   .text.reset_le:0000000000000000 reset_le
     /tmp/ccfQkuUX.s:8622   .text.reset_le:0000000000000084 $d
     /tmp/ccfQkuUX.s:8631   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccfQkuUX.s:8636   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccfQkuUX.s:8662   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccfQkuUX.s:8667   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccfQkuUX.s:8672   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccfQkuUX.s:9098   .text.bt_generic_le:00000000000002a0 $d
     /tmp/ccfQkuUX.s:9124   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccfQkuUX.s:9129   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccfQkuUX.s:9477   .text.bt_le_sync:0000000000000228 $d
     /tmp/ccfQkuUX.s:9498   .text.bt_le_sync:0000000000000270 $t
     /tmp/ccfQkuUX.s:9896   .text.bt_le_sync:0000000000000508 $d
     /tmp/ccfQkuUX.s:12871  .bss:00000000000000d4 restart_jamming.4909
     /tmp/ccfQkuUX.s:9921   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccfQkuUX.s:9926   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccfQkuUX.s:10216  .text.cb_follow_le:00000000000001b8 $d
     /tmp/ccfQkuUX.s:10229  .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccfQkuUX.s:10234  .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccfQkuUX.s:10612  .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccfQkuUX.s:10622  .text.bt_follow_le:0000000000000000 $t
     /tmp/ccfQkuUX.s:10627  .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccfQkuUX.s:10657  .text.bt_follow_le:000000000000001c $d
     /tmp/ccfQkuUX.s:10664  .text.le_promisc_state:0000000000000000 $t
ARM GAS  /tmp/ccfQkuUX.s 			page 289


     /tmp/ccfQkuUX.s:10669  .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccfQkuUX.s:10762  .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccfQkuUX.s:10767  .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccfQkuUX.s:10976  .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccfQkuUX.s:12874  .bss:00000000000000d8 first_ts.5007
     /tmp/ccfQkuUX.s:10995  .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccfQkuUX.s:11000  .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccfQkuUX.s:11135  .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccfQkuUX.s:12877  .bss:00000000000000dc prev_clk.5013
     /tmp/ccfQkuUX.s:11152  .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccfQkuUX.s:11157  .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccfQkuUX.s:11272  .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccfQkuUX.s:11280  .text.see_aa:0000000000000000 $t
     /tmp/ccfQkuUX.s:11285  .text.see_aa:0000000000000000 see_aa
     /tmp/ccfQkuUX.s:11406  .text.see_aa:00000000000000a4 $d
     /tmp/ccfQkuUX.s:11418  .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccfQkuUX.s:11423  .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccfQkuUX.s:11875  .text.cb_le_promisc:00000000000002e0 $d
     /tmp/ccfQkuUX.s:11891  .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccfQkuUX.s:11896  .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccfQkuUX.s:11978  .text.bt_promisc_le:000000000000006c $d
     /tmp/ccfQkuUX.s:12006  .text.bt_slave_le:0000000000000000 $t
     /tmp/ccfQkuUX.s:12011  .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccfQkuUX.s:12146  .text.bt_slave_le:00000000000000dc $d
     /tmp/ccfQkuUX.s:12157  .text.specan:0000000000000000 $t
     /tmp/ccfQkuUX.s:12162  .text.specan:0000000000000000 specan
     /tmp/ccfQkuUX.s:12378  .text.specan:0000000000000178 $d
     /tmp/ccfQkuUX.s:12396  .text.led_specan:0000000000000000 $t
     /tmp/ccfQkuUX.s:12401  .text.led_specan:0000000000000000 led_specan
     /tmp/ccfQkuUX.s:12637  .text.led_specan:0000000000000178 $d
     /tmp/ccfQkuUX.s:12650  .text.main:0000000000000000 $t
     /tmp/ccfQkuUX.s:12655  .text.main:0000000000000000 main
     /tmp/ccfQkuUX.s:12699  .text.main:0000000000000040 $d
     /tmp/ccfQkuUX.s:12715  .text.main:0000000000000080 $t
     /tmp/ccfQkuUX.s:12859  .text.main:000000000000013c $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
ARM GAS  /tmp/ccfQkuUX.s 			page 290


btle_next_hop
handle_usb
dio_ssp_init
rbit
btle_crcgen_lut
memset
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
