ARM GAS  /tmp/ccSuvgbr.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccSuvgbr.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	whitening:
  81 002c 01       		.byte	1
  82 002d 01       		.byte	1
  83 002e 01       		.byte	1
  84 002f 01       		.byte	1
  85 0030 00       		.byte	0
  86 0031 01       		.byte	1
  87 0032 00       		.byte	0
  88 0033 01       		.byte	1
  89 0034 00       		.byte	0
  90 0035 01       		.byte	1
  91 0036 00       		.byte	0
  92 0037 00       		.byte	0
  93 0038 00       		.byte	0
  94 0039 00       		.byte	0
  95 003a 01       		.byte	1
  96 003b 00       		.byte	0
  97 003c 01       		.byte	1
  98 003d 01       		.byte	1
  99 003e 00       		.byte	0
 100 003f 01       		.byte	1
 101 0040 01       		.byte	1
 102 0041 01       		.byte	1
 103 0042 01       		.byte	1
 104 0043 00       		.byte	0
 105 0044 00       		.byte	0
 106 0045 01       		.byte	1
 107 0046 01       		.byte	1
 108 0047 01       		.byte	1
 109 0048 00       		.byte	0
 110 0049 00       		.byte	0
 111 004a 01       		.byte	1
 112 004b 00       		.byte	0
 113 004c 01       		.byte	1
 114 004d 00       		.byte	0
 115 004e 01       		.byte	1
 116 004f 01       		.byte	1
 117 0050 00       		.byte	0
 118 0051 00       		.byte	0
 119 0052 01       		.byte	1
 120 0053 01       		.byte	1
 121 0054 00       		.byte	0
 122 0055 00       		.byte	0
ARM GAS  /tmp/ccSuvgbr.s 			page 3


 123 0056 00       		.byte	0
 124 0057 00       		.byte	0
 125 0058 00       		.byte	0
 126 0059 01       		.byte	1
 127 005a 01       		.byte	1
 128 005b 00       		.byte	0
 129 005c 01       		.byte	1
 130 005d 01       		.byte	1
 131 005e 00       		.byte	0
 132 005f 01       		.byte	1
 133 0060 00       		.byte	0
 134 0061 01       		.byte	1
 135 0062 01       		.byte	1
 136 0063 01       		.byte	1
 137 0064 00       		.byte	0
 138 0065 01       		.byte	1
 139 0066 00       		.byte	0
 140 0067 00       		.byte	0
 141 0068 00       		.byte	0
 142 0069 01       		.byte	1
 143 006a 01       		.byte	1
 144 006b 00       		.byte	0
 145 006c 00       		.byte	0
 146 006d 01       		.byte	1
 147 006e 00       		.byte	0
 148 006f 00       		.byte	0
 149 0070 00       		.byte	0
 150 0071 01       		.byte	1
 151 0072 00       		.byte	0
 152 0073 00       		.byte	0
 153 0074 00       		.byte	0
 154 0075 00       		.byte	0
 155 0076 00       		.byte	0
 156 0077 00       		.byte	0
 157 0078 01       		.byte	1
 158 0079 00       		.byte	0
 159 007a 00       		.byte	0
 160 007b 01       		.byte	1
 161 007c 00       		.byte	0
 162 007d 00       		.byte	0
 163 007e 01       		.byte	1
 164 007f 01       		.byte	1
 165 0080 00       		.byte	0
 166 0081 01       		.byte	1
 167 0082 00       		.byte	0
 168 0083 00       		.byte	0
 169 0084 01       		.byte	1
 170 0085 01       		.byte	1
 171 0086 01       		.byte	1
 172 0087 01       		.byte	1
 173 0088 00       		.byte	0
 174 0089 01       		.byte	1
 175 008a 01       		.byte	1
 176 008b 01       		.byte	1
 177 008c 00       		.byte	0
 178 008d 00       		.byte	0
 179 008e 00       		.byte	0
ARM GAS  /tmp/ccSuvgbr.s 			page 4


 180 008f 00       		.byte	0
 181 0090 01       		.byte	1
 182 0091 01       		.byte	1
 183 0092 01       		.byte	1
 184 0093 01       		.byte	1
 185 0094 01       		.byte	1
 186 0095 01       		.byte	1
 187 0096 01       		.byte	1
 188 0097 00       		.byte	0
 189 0098 00       		.byte	0
 190 0099 00       		.byte	0
 191 009a 01       		.byte	1
 192 009b 01       		.byte	1
 193 009c 01       		.byte	1
 194 009d 00       		.byte	0
 195 009e 01       		.byte	1
 196 009f 01       		.byte	1
 197 00a0 00       		.byte	0
 198 00a1 00       		.byte	0
 199 00a2 00       		.byte	0
 200 00a3 01       		.byte	1
 201 00a4 00       		.byte	0
 202 00a5 01       		.byte	1
 203 00a6 00       		.byte	0
 204 00a7 00       		.byte	0
 205 00a8 01       		.byte	1
 206 00a9 00       		.byte	0
 207 00aa 01       		.byte	1
 208 00ab 00       		.align	2
 211              	whitening_index:
 212 00ac 46       		.byte	70
 213 00ad 3E       		.byte	62
 214 00ae 78       		.byte	120
 215 00af 6F       		.byte	111
 216 00b0 4D       		.byte	77
 217 00b1 2E       		.byte	46
 218 00b2 0F       		.byte	15
 219 00b3 65       		.byte	101
 220 00b4 42       		.byte	66
 221 00b5 27       		.byte	39
 222 00b6 1F       		.byte	31
 223 00b7 1A       		.byte	26
 224 00b8 50       		.byte	80
 225 00b9 53       		.byte	83
 226 00ba 7D       		.byte	125
 227 00bb 59       		.byte	89
 228 00bc 0A       		.byte	10
 229 00bd 23       		.byte	35
 230 00be 08       		.byte	8
 231 00bf 36       		.byte	54
 232 00c0 7A       		.byte	122
 233 00c1 11       		.byte	17
 234 00c2 21       		.byte	33
 235 00c3 00       		.byte	0
 236 00c4 3A       		.byte	58
 237 00c5 73       		.byte	115
 238 00c6 06       		.byte	6
ARM GAS  /tmp/ccSuvgbr.s 			page 5


 239 00c7 5E       		.byte	94
 240 00c8 56       		.byte	86
 241 00c9 31       		.byte	49
 242 00ca 34       		.byte	52
 243 00cb 14       		.byte	20
 244 00cc 28       		.byte	40
 245 00cd 1B       		.byte	27
 246 00ce 54       		.byte	84
 247 00cf 5A       		.byte	90
 248 00d0 3F       		.byte	63
 249 00d1 70       		.byte	112
 250 00d2 2F       		.byte	47
 251 00d3 66       		.byte	102
 252              		.align	2
 255              	hop_interval_lut:
 256 00d4 00       		.byte	0
 257 00d5 01       		.byte	1
 258 00d6 13       		.byte	19
 259 00d7 19       		.byte	25
 260 00d8 1C       		.byte	28
 261 00d9 0F       		.byte	15
 262 00da 1F       		.byte	31
 263 00db 10       		.byte	16
 264 00dc 0E       		.byte	14
 265 00dd 21       		.byte	33
 266 00de 1A       		.byte	26
 267 00df 1B       		.byte	27
 268 00e0 22       		.byte	34
 269 00e1 14       		.byte	20
 270 00e2 08       		.byte	8
 271 00e3 05       		.byte	5
 272 00e4 07       		.byte	7
 273 00e5 18       		.byte	24
 274 00e6 23       		.byte	35
 275 00e7 02       		.byte	2
 276 00e8 0D       		.byte	13
 277 00e9 1E       		.byte	30
 278 00ea 20       		.byte	32
 279 00eb 1D       		.byte	29
 280 00ec 11       		.byte	17
 281 00ed 03       		.byte	3
 282 00ee 0A       		.byte	10
 283 00ef 0B       		.byte	11
 284 00f0 04       		.byte	4
 285 00f1 17       		.byte	23
 286 00f2 15       		.byte	21
 287 00f3 06       		.byte	6
 288 00f4 16       		.byte	22
 289 00f5 09       		.byte	9
 290 00f6 0C       		.byte	12
 291 00f7 12       		.byte	18
 292 00f8 24       		.byte	36
 293 00f9 000000   		.align	2
 296              	whitening_word:
 297 00fc 40B2BCC3 		.word	-1011043776
 298 0100 1F374A5F 		.word	1598699295
 299 0104 85F69C9A 		.word	-1700989307
ARM GAS  /tmp/ccSuvgbr.s 			page 6


 300 0108 C1D6C544 		.word	1153816257
 301 010c 2059DEE1 		.word	-505521888
 302 0110 8F1BA5AF 		.word	-1348134001
 303 0114 427B4ECD 		.word	-850494654
 304 0118 60EB6222 		.word	576908128
 305 011c 902CEFF0 		.word	-252760944
 306 0120 C78DD257 		.word	1473416647
 307 0124 A13DA766 		.word	1722236321
 308 0128 B0753111 		.word	288454064
 309 012c 8940B2BC 		.word	-1129168759
 310 0130 C31F374A 		.word	1245126595
 311 0134 5F85F69C 		.word	-1661565601
 312 0138 9AC1D6C5 		.word	-975781478
 313 013c 442059DE 		.word	-564584380
 314 0140 E18F1BA5 		.word	-1524920351
 315 0144 AF427B4E 		.word	1316700847
 316 0148 CD60EB62 		.word	1659592909
 317 014c 22902CEF 		.word	-282292190
 318 0150 F0C78DD2 		.word	-762460176
 319 0154 57A13DA7 		.word	-1489133225
 320 0158 66B07531 		.word	829796454
 321 015c D257A13D 		.word	1033983954
 322 0160 A766B075 		.word	1974494887
 323 0164 31114896 		.word	-1773661903
 324 0168 77F8E346 		.word	1189345399
 325 016c E9ABD09E 		.word	-1630491671
 326 0170 5333D8BA 		.word	-1160236205
 327 0174 980824CB 		.word	-886830952
 328 0178 3BFC71A3 		.word	-1552810949
 329 017c F45568CF 		.word	-815245836
 330 0180 A9196C5D 		.word	1567365545
 331 0184 4C0492E5 		.word	-443415476
 332 0188 1DFEB851 		.word	1371078173
 333 018c 1BA5AF42 		.word	1118807323
 334 0190 7B4ECD60 		.word	1624067707
 335 0194 EB622290 		.word	-1876794645
 336 0198 2CEFF0C7 		.word	-940511444
 337 019c 8DD257A1 		.word	-1588079987
 338 01a0 3DA766B0 		.word	-1335449795
 339 01a4 75311148 		.word	1209086325
 340 01a8 9677F8E3 		.word	-470255722
 341 01ac 46E9ABD0 		.word	-794039994
 342 01b0 9E5333D8 		.word	-667724898
 343 01b4 BA980824 		.word	604543162
 344 01b8 CB3BFC71 		.word	1912355787
 345 01bc 6479873F 		.word	1065843044
 346 01c0 6E94BE0A 		.word	180261998
 347 01c4 ED393583 		.word	-2093663763
 348 01c8 AD8B8940 		.word	1082756013
 349 01cc B2BCC31F 		.word	532921522
 350 01d0 374A5F85 		.word	-2057352649
 351 01d4 F69C9AC1 		.word	-1046831882
 352 01d8 D6C54420 		.word	541378006
 353 01dc 59DEE18F 		.word	-1881022887
 354 01e0 1BA5AF42 		.word	1118807323
 355 01e4 7B4ECD60 		.word	1624067707
 356 01e8 EB622290 		.word	-1876794645
ARM GAS  /tmp/ccSuvgbr.s 			page 7


 357 01ec AD8B8940 		.word	1082756013
 358 01f0 B2BCC31F 		.word	532921522
 359 01f4 374A5F85 		.word	-2057352649
 360 01f8 F69C9AC1 		.word	-1046831882
 361 01fc D6C54420 		.word	541378006
 362 0200 59DEE18F 		.word	-1881022887
 363 0204 1BA5AF42 		.word	1118807323
 364 0208 7B4ECD60 		.word	1624067707
 365 020c EB622290 		.word	-1876794645
 366 0210 2CEFF0C7 		.word	-940511444
 367 0214 8DD257A1 		.word	-1588079987
 368 0218 3DA766B0 		.word	-1335449795
 369 021c F69C9AC1 		.word	-1046831882
 370 0220 D6C54420 		.word	541378006
 371 0224 59DEE18F 		.word	-1881022887
 372 0228 1BA5AF42 		.word	1118807323
 373 022c 7B4ECD60 		.word	1624067707
 374 0230 EB622290 		.word	-1876794645
 375 0234 2CEFF0C7 		.word	-940511444
 376 0238 8DD257A1 		.word	-1588079987
 377 023c 3DA766B0 		.word	-1335449795
 378 0240 75311148 		.word	1209086325
 379 0244 9677F8E3 		.word	-470255722
 380 0248 46E9ABD0 		.word	-794039994
 381 024c 3F6E94BE 		.word	-1097568705
 382 0250 0AED3935 		.word	892988682
 383 0254 83AD8B89 		.word	-1987334781
 384 0258 40B2BCC3 		.word	-1011043776
 385 025c 1F374A5F 		.word	1598699295
 386 0260 85F69C9A 		.word	-1700989307
 387 0264 C1D6C544 		.word	1153816257
 388 0268 2059DEE1 		.word	-505521888
 389 026c 8F1BA5AF 		.word	-1348134001
 390 0270 427B4ECD 		.word	-850494654
 391 0274 60EB6222 		.word	576908128
 392 0278 902CEFF0 		.word	-252760944
 393 027c 0824CB3B 		.word	1003168776
 394 0280 FC71A3F4 		.word	-190615044
 395 0284 5568CFA9 		.word	-1446025131
 396 0288 196C5D4C 		.word	1281190937
 397 028c 0492E51D 		.word	501584388
 398 0290 FEB851FA 		.word	-95307522
 399 0294 2AB4E7D4 		.word	-723012566
 400 0298 0CB62E26 		.word	640595468
 401 029c 02C9F20E 		.word	250792194
 402 02a0 7FDC287D 		.word	2099829887
 403 02a4 15DA736A 		.word	1785977365
 404 02a8 065B1713 		.word	320297734
 405 02ac C1D6C544 		.word	1153816257
 406 02b0 2059DEE1 		.word	-505521888
 407 02b4 8F1BA5AF 		.word	-1348134001
 408 02b8 427B4ECD 		.word	-850494654
 409 02bc 60EB6222 		.word	576908128
 410 02c0 902CEFF0 		.word	-252760944
 411 02c4 C78DD257 		.word	1473416647
 412 02c8 A13DA766 		.word	1722236321
 413 02cc B0753111 		.word	288454064
ARM GAS  /tmp/ccSuvgbr.s 			page 8


 414 02d0 489677F8 		.word	-126380472
 415 02d4 E346E9AB 		.word	-1410775325
 416 02d8 D09E5333 		.word	861118160
 417 02dc 9AC1D6C5 		.word	-975781478
 418 02e0 442059DE 		.word	-564584380
 419 02e4 E18F1BA5 		.word	-1524920351
 420 02e8 AF427B4E 		.word	1316700847
 421 02ec CD60EB62 		.word	1659592909
 422 02f0 22902CEF 		.word	-282292190
 423 02f4 F0C78DD2 		.word	-762460176
 424 02f8 57A13DA7 		.word	-1489133225
 425 02fc 66B07531 		.word	829796454
 426 0300 11489677 		.word	2006337553
 427 0304 F8E346E9 		.word	-381230088
 428 0308 ABD09E53 		.word	1402917035
 429 030c 5333D8BA 		.word	-1160236205
 430 0310 980824CB 		.word	-886830952
 431 0314 3BFC71A3 		.word	-1552810949
 432 0318 F45568CF 		.word	-815245836
 433 031c A9196C5D 		.word	1567365545
 434 0320 4C0492E5 		.word	-443415476
 435 0324 1DFEB851 		.word	1371078173
 436 0328 FA2AB4E7 		.word	-407622918
 437 032c D40CB62E 		.word	783682772
 438 0330 2602C9F2 		.word	-221707738
 439 0334 0E7FDC28 		.word	685539086
 440 0338 7D15DA73 		.word	1943672189
 441 033c 2CEFF0C7 		.word	-940511444
 442 0340 8DD257A1 		.word	-1588079987
 443 0344 3DA766B0 		.word	-1335449795
 444 0348 75311148 		.word	1209086325
 445 034c 9677F8E3 		.word	-470255722
 446 0350 46E9ABD0 		.word	-794039994
 447 0354 9E5333D8 		.word	-667724898
 448 0358 BA980824 		.word	604543162
 449 035c CB3BFC71 		.word	1912355787
 450 0360 A3F45568 		.word	1750463651
 451 0364 CFA9196C 		.word	1813621199
 452 0368 5D4C0492 		.word	-1845212067
 453 036c E51DFEB8 		.word	-1191305755
 454 0370 51FA2AB4 		.word	-1272251823
 455 0374 E7D40CB6 		.word	-1240673049
 456 0378 2E2602C9 		.word	-922606034
 457 037c F20E7FDC 		.word	-595652878
 458 0380 287D15DA 		.word	-636125912
 459 0384 736A065B 		.word	1527147123
 460 0388 17138164 		.word	1686180631
 461 038c 79873F6E 		.word	1849657209
 462 0390 94BE0AED 		.word	-318062956
 463 0394 393583AD 		.word	-1383910087
 464 0398 8B8940B2 		.word	-1304393333
 465 039c BE0AED39 		.word	971836094
 466 03a0 3583AD8B 		.word	-1951562955
 467 03a4 8940B2BC 		.word	-1129168759
 468 03a8 C31F374A 		.word	1245126595
 469 03ac 5F85F69C 		.word	-1661565601
 470 03b0 9AC1D6C5 		.word	-975781478
ARM GAS  /tmp/ccSuvgbr.s 			page 9


 471 03b4 442059DE 		.word	-564584380
 472 03b8 E18F1BA5 		.word	-1524920351
 473 03bc AF427B4E 		.word	1316700847
 474 03c0 CD60EB62 		.word	1659592909
 475 03c4 22902CEF 		.word	-282292190
 476 03c8 F0C78DD2 		.word	-762460176
 477 03cc 77F8E346 		.word	1189345399
 478 03d0 E9ABD09E 		.word	-1630491671
 479 03d4 5333D8BA 		.word	-1160236205
 480 03d8 980824CB 		.word	-886830952
 481 03dc 3BFC71A3 		.word	-1552810949
 482 03e0 F45568CF 		.word	-815245836
 483 03e4 A9196C5D 		.word	1567365545
 484 03e8 4C0492E5 		.word	-443415476
 485 03ec 1DFEB851 		.word	1371078173
 486 03f0 FA2AB4E7 		.word	-407622918
 487 03f4 D40CB62E 		.word	783682772
 488 03f8 2602C9F2 		.word	-221707738
 489 03fc D09E5333 		.word	861118160
 490 0400 D8BA9808 		.word	144227032
 491 0404 24CB3BFC 		.word	-63190236
 492 0408 71A3F455 		.word	1442095985
 493 040c 68CFA919 		.word	430559080
 494 0410 6C5D4C04 		.word	72113516
 495 0414 92E51DFE 		.word	-31595118
 496 0418 B851FA2A 		.word	721047992
 497 041c B4E7D40C 		.word	215279540
 498 0420 B62E2602 		.word	36056758
 499 0424 C9F20E7F 		.word	2131686089
 500 0428 DC287D15 		.word	360523996
 501 042c 196C5D4C 		.word	1281190937
 502 0430 0492E51D 		.word	501584388
 503 0434 FEB851FA 		.word	-95307522
 504 0438 2AB4E7D4 		.word	-723012566
 505 043c 0CB62E26 		.word	640595468
 506 0440 02C9F20E 		.word	250792194
 507 0444 7FDC287D 		.word	2099829887
 508 0448 15DA736A 		.word	1785977365
 509 044c 065B1713 		.word	320297734
 510 0450 81647987 		.word	-2022087551
 511 0454 3F6E94BE 		.word	-1097568705
 512 0458 0AED3935 		.word	892988682
 513 045c 427B4ECD 		.word	-850494654
 514 0460 60EB6222 		.word	576908128
 515 0464 902CEFF0 		.word	-252760944
 516 0468 C78DD257 		.word	1473416647
 517 046c A13DA766 		.word	1722236321
 518 0470 B0753111 		.word	288454064
 519 0474 489677F8 		.word	-126380472
 520 0478 E346E9AB 		.word	-1410775325
 521 047c D09E5333 		.word	861118160
 522 0480 D8BA9808 		.word	144227032
 523 0484 24CB3BFC 		.word	-63190236
 524 0488 71A3F455 		.word	1442095985
 525 048c 8B8940B2 		.word	-1304393333
 526 0490 BCC31F37 		.word	924828604
 527 0494 4A5F85F6 		.word	-159031478
ARM GAS  /tmp/ccSuvgbr.s 			page 10


 528 0498 9C9AC1D6 		.word	-691955044
 529 049c C5442059 		.word	1495286981
 530 04a0 DEE18F1B 		.word	462414302
 531 04a4 A5AF427B 		.word	2067967909
 532 04a8 4ECD60EB 		.word	-345977522
 533 04ac 6222902C 		.word	747643490
 534 04b0 EFF0C78D 		.word	-1916276497
 535 04b4 D257A13D 		.word	1033983954
 536 04b8 A766B075 		.word	1974494887
 537 04bc F45568CF 		.word	-815245836
 538 04c0 A9196C5D 		.word	1567365545
 539 04c4 4C0492E5 		.word	-443415476
 540 04c8 1DFEB851 		.word	1371078173
 541 04cc FA2AB4E7 		.word	-407622918
 542 04d0 D40CB62E 		.word	783682772
 543 04d4 2602C9F2 		.word	-221707738
 544 04d8 0E7FDC28 		.word	685539086
 545 04dc 7D15DA73 		.word	1943672189
 546 04e0 6A065B17 		.word	391841386
 547 04e4 13816479 		.word	2036629779
 548 04e8 873F6E94 		.word	-1804714105
 549 04ec 3DA766B0 		.word	-1335449795
 550 04f0 75311148 		.word	1209086325
 551 04f4 9677F8E3 		.word	-470255722
 552 04f8 46E9ABD0 		.word	-794039994
 553 04fc 9E5333D8 		.word	-667724898
 554 0500 BA980824 		.word	604543162
 555 0504 CB3BFC71 		.word	1912355787
 556 0508 A3F45568 		.word	1750463651
 557 050c CFA9196C 		.word	1813621199
 558 0510 5D4C0492 		.word	-1845212067
 559 0514 E51DFEB8 		.word	-1191305755
 560 0518 51FA2AB4 		.word	-1272251823
 561 051c 66B07531 		.word	829796454
 562 0520 11489677 		.word	2006337553
 563 0524 F8E346E9 		.word	-381230088
 564 0528 ABD09E53 		.word	1402917035
 565 052c 33D8BA98 		.word	-1732585421
 566 0530 0824CB3B 		.word	1003168776
 567 0534 FC71A3F4 		.word	-190615044
 568 0538 5568CFA9 		.word	-1446025131
 569 053c 196C5D4C 		.word	1281190937
 570 0540 0492E51D 		.word	501584388
 571 0544 FEB851FA 		.word	-95307522
 572 0548 2AB4E7D4 		.word	-723012566
 573 054c AF427B4E 		.word	1316700847
 574 0550 CD60EB62 		.word	1659592909
 575 0554 22902CEF 		.word	-282292190
 576 0558 F0C78DD2 		.word	-762460176
 577 055c 57A13DA7 		.word	-1489133225
 578 0560 66B07531 		.word	829796454
 579 0564 11489677 		.word	2006337553
 580 0568 F8E346E9 		.word	-381230088
 581 056c ABD09E53 		.word	1402917035
 582 0570 33D8BA98 		.word	-1732585421
 583 0574 0824CB3B 		.word	1003168776
 584 0578 FC71A3F4 		.word	-190615044
ARM GAS  /tmp/ccSuvgbr.s 			page 11


 585 057c 980824CB 		.word	-886830952
 586 0580 3BFC71A3 		.word	-1552810949
 587 0584 F45568CF 		.word	-815245836
 588 0588 A9196C5D 		.word	1567365545
 589 058c 4C0492E5 		.word	-443415476
 590 0590 1DFEB851 		.word	1371078173
 591 0594 FA2AB4E7 		.word	-407622918
 592 0598 D40CB62E 		.word	783682772
 593 059c 2602C9F2 		.word	-221707738
 594 05a0 0E7FDC28 		.word	685539086
 595 05a4 7D15DA73 		.word	1943672189
 596 05a8 6A065B17 		.word	391841386
 597 05ac 51FA2AB4 		.word	-1272251823
 598 05b0 E7D40CB6 		.word	-1240673049
 599 05b4 2E2602C9 		.word	-922606034
 600 05b8 F20E7FDC 		.word	-595652878
 601 05bc 287D15DA 		.word	-636125912
 602 05c0 736A065B 		.word	1527147123
 603 05c4 17138164 		.word	1686180631
 604 05c8 79873F6E 		.word	1849657209
 605 05cc 94BE0AED 		.word	-318062956
 606 05d0 393583AD 		.word	-1383910087
 607 05d4 8B8940B2 		.word	-1304393333
 608 05d8 BCC31F37 		.word	924828604
 609 05dc 0AED3935 		.word	892988682
 610 05e0 83AD8B89 		.word	-1987334781
 611 05e4 40B2BCC3 		.word	-1011043776
 612 05e8 1F374A5F 		.word	1598699295
 613 05ec 85F69C9A 		.word	-1700989307
 614 05f0 C1D6C544 		.word	1153816257
 615 05f4 2059DEE1 		.word	-505521888
 616 05f8 8F1BA5AF 		.word	-1348134001
 617 05fc 427B4ECD 		.word	-850494654
 618 0600 60EB6222 		.word	576908128
 619 0604 902CEFF0 		.word	-252760944
 620 0608 C78DD257 		.word	1473416647
 621 060c C31F374A 		.word	1245126595
 622 0610 5F85F69C 		.word	-1661565601
 623 0614 9AC1D6C5 		.word	-975781478
 624 0618 442059DE 		.word	-564584380
 625 061c E18F1BA5 		.word	-1524920351
 626 0620 AF427B4E 		.word	1316700847
 627 0624 CD60EB62 		.word	1659592909
 628 0628 22902CEF 		.word	-282292190
 629 062c F0C78DD2 		.word	-762460176
 630 0630 57A13DA7 		.word	-1489133225
 631 0634 66B07531 		.word	829796454
 632 0638 11489677 		.word	2006337553
 633 063c BCC31F37 		.word	924828604
 634 0640 4A5F85F6 		.word	-159031478
 635 0644 9C9AC1D6 		.word	-691955044
 636 0648 C5442059 		.word	1495286981
 637 064c DEE18F1B 		.word	462414302
 638 0650 A5AF427B 		.word	2067967909
 639 0654 4ECD60EB 		.word	-345977522
 640 0658 6222902C 		.word	747643490
 641 065c EFF0C78D 		.word	-1916276497
ARM GAS  /tmp/ccSuvgbr.s 			page 12


 642 0660 D257A13D 		.word	1033983954
 643 0664 A766B075 		.word	1974494887
 644 0668 31114896 		.word	-1773661903
 645 066c 75311148 		.word	1209086325
 646 0670 9677F8E3 		.word	-470255722
 647 0674 46E9ABD0 		.word	-794039994
 648 0678 9E5333D8 		.word	-667724898
 649 067c BA980824 		.word	604543162
 650 0680 CB3BFC71 		.word	1912355787
 651 0684 A3F45568 		.word	1750463651
 652 0688 CFA9196C 		.word	1813621199
 653 068c 5D4C0492 		.word	-1845212067
 654 0690 E51DFEB8 		.word	-1191305755
 655 0694 51FA2AB4 		.word	-1272251823
 656 0698 E7D40CB6 		.word	-1240673049
 657 069c 2E2602C9 		.word	-922606034
 658 06a0 F20E7FDC 		.word	-595652878
 659 06a4 287D15DA 		.word	-636125912
 660 06a8 736A065B 		.word	1527147123
 661 06ac 17138164 		.word	1686180631
 662 06b0 79873F6E 		.word	1849657209
 663 06b4 94BE0AED 		.word	-318062956
 664 06b8 393583AD 		.word	-1383910087
 665 06bc 8B8940B2 		.word	-1304393333
 666 06c0 BCC31F37 		.word	924828604
 667 06c4 4A5F85F6 		.word	-159031478
 668 06c8 9C9AC1D6 		.word	-691955044
 669 06cc E7D40CB6 		.word	-1240673049
 670 06d0 2E2602C9 		.word	-922606034
 671 06d4 F20E7FDC 		.word	-595652878
 672 06d8 287D15DA 		.word	-636125912
 673 06dc 736A065B 		.word	1527147123
 674 06e0 17138164 		.word	1686180631
 675 06e4 79873F6E 		.word	1849657209
 676 06e8 94BE0AED 		.word	-318062956
 677 06ec 393583AD 		.word	-1383910087
 678 06f0 8B8940B2 		.word	-1304393333
 679 06f4 BCC31F37 		.word	924828604
 680 06f8 4A5F85F6 		.word	-159031478
 681 06fc 60EB6222 		.word	576908128
 682 0700 902CEFF0 		.word	-252760944
 683 0704 C78DD257 		.word	1473416647
 684 0708 A13DA766 		.word	1722236321
 685 070c B0753111 		.word	288454064
 686 0710 489677F8 		.word	-126380472
 687 0714 E346E9AB 		.word	-1410775325
 688 0718 D09E5333 		.word	861118160
 689 071c D8BA9808 		.word	144227032
 690 0720 24CB3BFC 		.word	-63190236
 691 0724 71A3F455 		.word	1442095985
 692 0728 68CFA919 		.word	430559080
 693 072c A9196C5D 		.word	1567365545
 694 0730 4C0492E5 		.word	-443415476
 695 0734 1DFEB851 		.word	1371078173
 696 0738 FA2AB4E7 		.word	-407622918
 697 073c D40CB62E 		.word	783682772
 698 0740 2602C9F2 		.word	-221707738
ARM GAS  /tmp/ccSuvgbr.s 			page 13


 699 0744 0E7FDC28 		.word	685539086
 700 0748 7D15DA73 		.word	1943672189
 701 074c 6A065B17 		.word	391841386
 702 0750 13816479 		.word	2036629779
 703 0754 873F6E94 		.word	-1804714105
 704 0758 BE0AED39 		.word	971836094
 705 075c F20E7FDC 		.word	-595652878
 706 0760 287D15DA 		.word	-636125912
 707 0764 736A065B 		.word	1527147123
 708 0768 17138164 		.word	1686180631
 709 076c 79873F6E 		.word	1849657209
 710 0770 94BE0AED 		.word	-318062956
 711 0774 393583AD 		.word	-1383910087
 712 0778 8B8940B2 		.word	-1304393333
 713 077c BCC31F37 		.word	924828604
 714 0780 4A5F85F6 		.word	-159031478
 715 0784 9C9AC1D6 		.word	-691955044
 716 0788 C5442059 		.word	1495286981
 717 078c 3BFC71A3 		.word	-1552810949
 718 0790 F45568CF 		.word	-815245836
 719 0794 A9196C5D 		.word	1567365545
 720 0798 4C0492E5 		.word	-443415476
 721 079c 1DFEB851 		.word	1371078173
 722 07a0 FA2AB4E7 		.word	-407622918
 723 07a4 D40CB62E 		.word	783682772
 724 07a8 2602C9F2 		.word	-221707738
 725 07ac 0E7FDC28 		.word	685539086
 726 07b0 7D15DA73 		.word	1943672189
 727 07b4 6A065B17 		.word	391841386
 728 07b8 13816479 		.word	2036629779
 729 07bc 442059DE 		.word	-564584380
 730 07c0 E18F1BA5 		.word	-1524920351
 731 07c4 AF427B4E 		.word	1316700847
 732 07c8 CD60EB62 		.word	1659592909
 733 07cc 22902CEF 		.word	-282292190
 734 07d0 F0C78DD2 		.word	-762460176
 735 07d4 57A13DA7 		.word	-1489133225
 736 07d8 66B07531 		.word	829796454
 737 07dc 11489677 		.word	2006337553
 738 07e0 F8E346E9 		.word	-381230088
 739 07e4 ABD09E53 		.word	1402917035
 740 07e8 33D8BA98 		.word	-1732585421
 741 07ec 8DD257A1 		.word	-1588079987
 742 07f0 3DA766B0 		.word	-1335449795
 743 07f4 75311148 		.word	1209086325
 744 07f8 9677F8E3 		.word	-470255722
 745 07fc 46E9ABD0 		.word	-794039994
 746 0800 9E5333D8 		.word	-667724898
 747 0804 BA980824 		.word	604543162
 748 0808 CB3BFC71 		.word	1912355787
 749 080c A3F45568 		.word	1750463651
 750 0810 CFA9196C 		.word	1813621199
 751 0814 5D4C0492 		.word	-1845212067
 752 0818 E51DFEB8 		.word	-1191305755
 753 081c D6C54420 		.word	541378006
 754 0820 59DEE18F 		.word	-1881022887
 755 0824 1BA5AF42 		.word	1118807323
ARM GAS  /tmp/ccSuvgbr.s 			page 14


 756 0828 7B4ECD60 		.word	1624067707
 757 082c EB622290 		.word	-1876794645
 758 0830 2CEFF0C7 		.word	-940511444
 759 0834 8DD257A1 		.word	-1588079987
 760 0838 3DA766B0 		.word	-1335449795
 761 083c 75311148 		.word	1209086325
 762 0840 9677F8E3 		.word	-470255722
 763 0844 46E9ABD0 		.word	-794039994
 764 0848 9E5333D8 		.word	-667724898
 765 084c 1F374A5F 		.word	1598699295
 766 0850 85F69C9A 		.word	-1700989307
 767 0854 C1D6C544 		.word	1153816257
 768 0858 2059DEE1 		.word	-505521888
 769 085c 8F1BA5AF 		.word	-1348134001
 770 0860 427B4ECD 		.word	-850494654
 771 0864 60EB6222 		.word	576908128
 772 0868 902CEFF0 		.word	-252760944
 773 086c C78DD257 		.word	1473416647
 774 0870 A13DA766 		.word	1722236321
 775 0874 B0753111 		.word	288454064
 776 0878 489677F8 		.word	-126380472
 777              		.comm	rr,5,4
 778              		.global	compile_info
 779              		.align	2
 782              	compile_info:
 783 087c 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Tue Apr 26 10:4"
 783      746F6F74 
 783      68203230 
 783      31352D31 
 783      302D5231 
 784 08af 383A3433 		.ascii	"8:43 KST 2016\000"
 784      204B5354 
 784      20323031 
 784      3600
 785              		.global	clkn
 786              		.bss
 787              		.align	2
 790              	clkn:
 791 0000 00000000 		.space	4
 792              		.global	last_hop
 793              		.align	2
 796              	last_hop:
 797 0004 00000000 		.space	4
 798              		.global	clkn_offset
 799              		.align	2
 802              	clkn_offset:
 803 0008 00000000 		.space	4
 804              		.global	clk100ns_offset
 805              		.align	1
 808              	clk100ns_offset:
 809 000c 0000     		.space	2
 810              		.global	hop_mode
 813              	hop_mode:
 814 000e 00       		.space	1
 815              		.global	do_hop
 818              	do_hop:
 819 000f 00       		.space	1
ARM GAS  /tmp/ccSuvgbr.s 			page 15


 820              		.global	dma_discard
 823              	dma_discard:
 824 0010 00       		.space	1
 825              		.global	cs_no_squelch
 828              	cs_no_squelch:
 829 0011 00       		.space	1
 830              		.global	cs_threshold_req
 831              		.data
 834              	cs_threshold_req:
 835 0004 88       		.byte	-120
 836              		.global	cs_threshold_cur
 839              	cs_threshold_cur:
 840 0005 88       		.byte	-120
 841              		.comm	cs_trigger,1,1
 842              		.global	hop_direct_channel
 843              		.bss
 844              		.align	1
 847              	hop_direct_channel:
 848 0012 0000     		.space	2
 849              		.comm	idle_buf_clkn_high,1,1
 850              		.comm	idle_buf_clk100ns,4,4
 851              		.global	idle_buf_channel
 852              		.align	1
 855              	idle_buf_channel:
 856 0014 0000     		.space	2
 857              		.global	slave_mac_address
 858 0016 0000     		.align	2
 861              	slave_mac_address:
 862 0018 00000000 		.space	6
 862      0000
 863              		.global	hop_timeout
 864              		.data
 865              		.align	1
 868              	hop_timeout:
 869 0006 9E00     		.short	158
 870              		.comm	rxbuf1,50,4
 871              		.comm	rxbuf2,50,4
 872              		.global	active_rxbuf
 873              		.align	2
 876              	active_rxbuf:
 877 0008 00000000 		.word	rxbuf1
 878              		.global	idle_rxbuf
 879              		.align	2
 882              	idle_rxbuf:
 883 000c 00000000 		.word	rxbuf2
 884              		.global	le
 885              		.align	2
 888              	le:
 889 0010 D6BE898E 		.word	-1903575338
 890 0014 7D6B     		.short	27517
 891 0016 7191     		.short	-28303
 892 0018 55555500 		.word	5592405
 893 001c AAAAAA00 		.word	11184810
 894 0020 01000000 		.word	1
 895 0024 00       		.byte	0
 896 0025 000000   		.space	3
 897 0028 00000000 		.word	0
ARM GAS  /tmp/ccSuvgbr.s 			page 16


 898 002c 00000000 		.space	32
 898      00000000 
 898      00000000 
 898      00000000 
 898      00000000 
 899 004c 00000000 		.word	0
 900 0050 00000000 		.word	0
 901              		.comm	le_promisc,264,4
 902              		.global	le_jam_count
 903              		.bss
 904 001e 0000     		.align	2
 907              	le_jam_count:
 908 0020 00000000 		.space	4
 909              		.global	data_cb
 910              		.align	2
 913              	data_cb:
 914 0024 00000000 		.space	4
 915              		.global	packet_cb
 916              		.align	2
 919              	packet_cb:
 920 0028 00000000 		.space	4
 921              		.global	rssi_iir
 922              		.align	2
 925              	rssi_iir:
 926 002c 00000000 		.space	158
 926      00000000 
 926      00000000 
 926      00000000 
 926      00000000 
 927              		.comm	unpacked,800,4
 928              		.global	mode
 931              	mode:
 932 00ca 00       		.space	1
 933              		.global	requested_mode
 936              	requested_mode:
 937 00cb 00       		.space	1
 938              		.global	jam_mode
 941              	jam_mode:
 942 00cc 00       		.space	1
 943              		.global	ego_mode
 946              	ego_mode:
 947 00cd 00       		.space	1
 948              		.global	modulation
 951              	modulation:
 952 00ce 00       		.space	1
 953              		.global	channel
 954              		.data
 955              		.align	1
 958              	channel:
 959 0054 8909     		.short	2441
 960              		.global	requested_channel
 961              		.bss
 962 00cf 00       		.align	1
 965              	requested_channel:
 966 00d0 0000     		.space	2
 967              		.global	saved_request
 968              		.align	1
ARM GAS  /tmp/ccSuvgbr.s 			page 17


 971              	saved_request:
 972 00d2 0000     		.space	2
 973              		.global	low_freq
 974              		.data
 975              		.align	1
 978              	low_freq:
 979 0056 6009     		.short	2400
 980              		.global	high_freq
 981              		.align	1
 984              	high_freq:
 985 0058 B309     		.short	2483
 986              		.global	rssi_threshold
 989              	rssi_threshold:
 990 005a E2       		.byte	-30
 991              		.comm	rx_dma_lli1,16,4
 992              		.comm	rx_dma_lli2,16,4
 993              		.comm	le_dma_lli,176,4
 994              		.comm	rx_tc,4,4
 995              		.comm	rx_err,4,4
 996              		.global	status
 997              		.bss
 1000              	status:
 1001 00d4 00       		.space	1
 1002              		.global	rssi_max
 1003              		.data
 1006              	rssi_max:
 1007 005b 7F       		.byte	127
 1008              		.global	rssi_min
 1011              	rssi_min:
 1012 005c 80       		.byte	-128
 1013              		.global	rssi_count
 1014              		.bss
 1017              	rssi_count:
 1018 00d5 00       		.space	1
 1019              		.global	rssi_sum
 1020 00d6 0000     		.align	2
 1023              	rssi_sum:
 1024 00d8 00000000 		.space	4
 1025              		.section	.text.rssi_reset,"ax",%progbits
 1026              		.align	2
 1027              		.thumb
 1028              		.thumb_func
 1030              	rssi_reset:
 1031              	.LFB0:
 1032              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*opyright 2010-2013 Michael Ossmann
   2:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   3:bluetooth_rxtx.c ****  *
   4:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   5:bluetooth_rxtx.c ****  *
   6:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   7:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   8:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
   9:bluetooth_rxtx.c ****  * any later version.
  10:bluetooth_rxtx.c ****  *
  11:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  12:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
ARM GAS  /tmp/ccSuvgbr.s 			page 18


  13:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  15:bluetooth_rxtx.c ****  *
  16:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  17:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  18:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  19:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  20:bluetooth_rxtx.c ****  */
  21:bluetooth_rxtx.c **** 
  22:bluetooth_rxtx.c **** #include <string.h>
  23:bluetooth_rxtx.c **** 
  24:bluetooth_rxtx.c **** #include "ubertooth.h"
  25:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  27:bluetooth_rxtx.c **** #include "bluetooth.h"
  28:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  29:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  30:bluetooth_rxtx.c **** #include "ego.h"
  31:bluetooth_rxtx.c **** 
  32:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  33:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  34:bluetooth_rxtx.c **** 
  35:bluetooth_rxtx.c **** /* build info */
  36:bluetooth_rxtx.c **** const char compile_info[] =
  37:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  38:bluetooth_rxtx.c **** 
  39:bluetooth_rxtx.c **** /*
  40:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  41:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  42:bluetooth_rxtx.c ****  *
  43:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  44:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  45:bluetooth_rxtx.c ****  * slot.
  46:bluetooth_rxtx.c ****  */
  47:bluetooth_rxtx.c **** 
  48:bluetooth_rxtx.c **** volatile uint32_t clkn = 0;                   // clkn 3200 Hz counter
  49:bluetooth_rxtx.c **** volatile uint32_t last_hop = 0;
  50:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  51:bluetooth_rxtx.c **** #define LE_BASECLK (12500)                    // 1.25 ms in units of 100ns
  52:bluetooth_rxtx.c **** volatile uint32_t clkn_offset = 0;
  53:bluetooth_rxtx.c **** volatile uint16_t clk100ns_offset = 0;
  54:bluetooth_rxtx.c **** 
  55:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  56:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                       // min pkts to send on trig (>=1)
  57:bluetooth_rxtx.c **** volatile uint8_t hop_mode = HOP_NONE;
  58:bluetooth_rxtx.c **** volatile uint8_t do_hop = 0;                  // set by timer interrupt
  59:bluetooth_rxtx.c **** 
  60:bluetooth_rxtx.c **** volatile uint8_t dma_discard = 0;
  61:bluetooth_rxtx.c **** uint8_t cs_no_squelch = 0;                    // rx all packets if set
  62:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  63:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  64:bluetooth_rxtx.c **** volatile uint8_t cs_trigger;                  // set by intr on P2.2 falling (CS)
  65:bluetooth_rxtx.c **** volatile uint16_t hop_direct_channel = 0;     // for hopping directly to a channel
  66:bluetooth_rxtx.c **** 
  67:bluetooth_rxtx.c **** volatile uint8_t  idle_buf_clkn_high;
  68:bluetooth_rxtx.c **** volatile uint32_t idle_buf_clk100ns;
  69:bluetooth_rxtx.c **** volatile uint16_t idle_buf_channel = 0;
ARM GAS  /tmp/ccSuvgbr.s 			page 19


  70:bluetooth_rxtx.c **** 
  71:bluetooth_rxtx.c **** uint8_t slave_mac_address[6] = { 0, };
  72:bluetooth_rxtx.c **** 
  73:bluetooth_rxtx.c **** volatile uint16_t hop_timeout = 158;
  74:bluetooth_rxtx.c **** 
  75:bluetooth_rxtx.c **** /* DMA buffers */
  76:bluetooth_rxtx.c **** volatile uint8_t rxbuf1[DMA_SIZE];
  77:bluetooth_rxtx.c **** volatile uint8_t rxbuf2[DMA_SIZE];
  78:bluetooth_rxtx.c **** 
  79:bluetooth_rxtx.c **** /*
  80:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  81:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  82:bluetooth_rxtx.c ****  */
  83:bluetooth_rxtx.c **** volatile uint8_t* volatile active_rxbuf = &rxbuf1[0];
  84:bluetooth_rxtx.c **** volatile uint8_t* volatile idle_rxbuf = &rxbuf2[0];
  85:bluetooth_rxtx.c **** 
  86:bluetooth_rxtx.c **** le_state_t le = {
  87:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  88:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  89:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  90:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  91:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
  92:bluetooth_rxtx.c **** 	.crc_verify = 1,
  93:bluetooth_rxtx.c **** 
  94:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
  95:bluetooth_rxtx.c **** 	.conn_epoch = 0,
  96:bluetooth_rxtx.c **** 	.target_set = 0,
  97:bluetooth_rxtx.c **** 	.last_packet = 0,
  98:bluetooth_rxtx.c **** };
  99:bluetooth_rxtx.c **** 
 100:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 101:bluetooth_rxtx.c **** 	u32 aa;
 102:bluetooth_rxtx.c **** 	int count;
 103:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 104:bluetooth_rxtx.c **** 
 105:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 106:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 107:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 108:bluetooth_rxtx.c **** 
 109:bluetooth_rxtx.c **** 	// recovering hop interval
 110:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 111:bluetooth_rxtx.c **** 	int consec_intervals;
 112:bluetooth_rxtx.c **** } le_promisc_state_t;
 113:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 114:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 115:bluetooth_rxtx.c **** 
 116:bluetooth_rxtx.c **** /* LE jamming */
 117:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 118:bluetooth_rxtx.c **** int le_jam_count = 0;
 119:bluetooth_rxtx.c **** 
 120:bluetooth_rxtx.c **** /* set LE access address */
 121:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 122:bluetooth_rxtx.c **** 
 123:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 124:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 125:bluetooth_rxtx.c **** 
 126:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
ARM GAS  /tmp/ccSuvgbr.s 			page 20


 127:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 128:bluetooth_rxtx.c **** 
 129:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 130:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 131:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 132:bluetooth_rxtx.c **** 
 133:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 134:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 135:bluetooth_rxtx.c **** 
 136:bluetooth_rxtx.c **** volatile uint8_t mode = MODE_IDLE;
 137:bluetooth_rxtx.c **** volatile uint8_t requested_mode = MODE_IDLE;
 138:bluetooth_rxtx.c **** volatile uint8_t jam_mode = JAM_NONE;
 139:bluetooth_rxtx.c **** volatile uint8_t ego_mode = 0;
 140:bluetooth_rxtx.c **** volatile uint8_t modulation = MOD_BT_BASIC_RATE;
 141:bluetooth_rxtx.c **** volatile uint16_t channel = 2441;
 142:bluetooth_rxtx.c **** volatile uint16_t requested_channel = 0;
 143:bluetooth_rxtx.c **** volatile uint16_t saved_request = 0;
 144:bluetooth_rxtx.c **** volatile uint16_t low_freq = 2400;
 145:bluetooth_rxtx.c **** volatile uint16_t high_freq = 2483;
 146:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 147:bluetooth_rxtx.c **** 
 148:bluetooth_rxtx.c **** /* DMA linked list items */
 149:bluetooth_rxtx.c **** typedef struct {
 150:bluetooth_rxtx.c **** 	u32 src;
 151:bluetooth_rxtx.c **** 	u32 dest;
 152:bluetooth_rxtx.c **** 	u32 next_lli;
 153:bluetooth_rxtx.c **** 	u32 control;
 154:bluetooth_rxtx.c **** } dma_lli;
 155:bluetooth_rxtx.c **** 
 156:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 157:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 158:bluetooth_rxtx.c **** 
 159:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 160:bluetooth_rxtx.c **** 
 161:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 162:bluetooth_rxtx.c **** volatile u32 rx_tc;
 163:bluetooth_rxtx.c **** volatile u32 rx_err;
 164:bluetooth_rxtx.c **** 
 165:bluetooth_rxtx.c **** /* status information byte */
 166:bluetooth_rxtx.c **** volatile u8 status = 0;
 167:bluetooth_rxtx.c **** 
 168:bluetooth_rxtx.c **** /*
 169:bluetooth_rxtx.c ****  * RSSI
 170:bluetooth_rxtx.c ****  */
 171:bluetooth_rxtx.c **** int8_t rssi_max = INT8_MAX;
 172:bluetooth_rxtx.c **** int8_t rssi_min = INT8_MIN;
 173:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 174:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 175:bluetooth_rxtx.c **** 
 176:bluetooth_rxtx.c **** static void rssi_reset(void)
 177:bluetooth_rxtx.c **** {
 1033              		.loc 1 177 0
 1034              		.cfi_startproc
 1035              		@ args = 0, pretend = 0, frame = 0
 1036              		@ frame_needed = 1, uses_anonymous_args = 0
 1037              		@ link register save eliminated.
 1038 0000 80B4     		push	{r7}
ARM GAS  /tmp/ccSuvgbr.s 			page 21


 1039              		.cfi_def_cfa_offset 4
 1040              		.cfi_offset 7, -4
 1041 0002 00AF     		add	r7, sp, #0
 1042              		.cfi_def_cfa_register 7
 178:bluetooth_rxtx.c **** 	rssi_count = 0;
 1043              		.loc 1 178 0
 1044 0004 074B     		ldr	r3, .L2
 1045 0006 0022     		movs	r2, #0
 1046 0008 1A70     		strb	r2, [r3]
 179:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1047              		.loc 1 179 0
 1048 000a 074B     		ldr	r3, .L2+4
 1049 000c 0022     		movs	r2, #0
 1050 000e 1A60     		str	r2, [r3]
 180:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1051              		.loc 1 180 0
 1052 0010 064B     		ldr	r3, .L2+8
 1053 0012 8022     		movs	r2, #128
 1054 0014 1A70     		strb	r2, [r3]
 181:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1055              		.loc 1 181 0
 1056 0016 064B     		ldr	r3, .L2+12
 1057 0018 7F22     		movs	r2, #127
 1058 001a 1A70     		strb	r2, [r3]
 182:bluetooth_rxtx.c **** }
 1059              		.loc 1 182 0
 1060 001c BD46     		mov	sp, r7
 1061              		.cfi_def_cfa_register 13
 1062              		@ sp needed
 1063 001e 5DF8047B 		ldr	r7, [sp], #4
 1064              		.cfi_restore 7
 1065              		.cfi_def_cfa_offset 0
 1066 0022 7047     		bx	lr
 1067              	.L3:
 1068              		.align	2
 1069              	.L2:
 1070 0024 00000000 		.word	rssi_count
 1071 0028 00000000 		.word	rssi_sum
 1072 002c 00000000 		.word	rssi_max
 1073 0030 00000000 		.word	rssi_min
 1074              		.cfi_endproc
 1075              	.LFE0:
 1077              		.section	.text.rssi_add,"ax",%progbits
 1078              		.align	2
 1079              		.thumb
 1080              		.thumb_func
 1082              	rssi_add:
 1083              	.LFB1:
 183:bluetooth_rxtx.c **** 
 184:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 185:bluetooth_rxtx.c **** {
 1084              		.loc 1 185 0
 1085              		.cfi_startproc
 1086              		@ args = 0, pretend = 0, frame = 8
 1087              		@ frame_needed = 1, uses_anonymous_args = 0
 1088              		@ link register save eliminated.
 1089 0000 80B4     		push	{r7}
ARM GAS  /tmp/ccSuvgbr.s 			page 22


 1090              		.cfi_def_cfa_offset 4
 1091              		.cfi_offset 7, -4
 1092 0002 83B0     		sub	sp, sp, #12
 1093              		.cfi_def_cfa_offset 16
 1094 0004 00AF     		add	r7, sp, #0
 1095              		.cfi_def_cfa_register 7
 1096 0006 0346     		mov	r3, r0
 1097 0008 FB71     		strb	r3, [r7, #7]
 186:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1098              		.loc 1 186 0
 1099 000a 144B     		ldr	r3, .L5
 1100 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1101 000e 5AB2     		sxtb	r2, r3
 1102 0010 97F90730 		ldrsb	r3, [r7, #7]
 1103 0014 9342     		cmp	r3, r2
 1104 0016 B8BF     		it	lt
 1105 0018 1346     		movlt	r3, r2
 1106 001a DAB2     		uxtb	r2, r3
 1107 001c 0F4B     		ldr	r3, .L5
 1108 001e 1A70     		strb	r2, [r3]
 187:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1109              		.loc 1 187 0
 1110 0020 0F4B     		ldr	r3, .L5+4
 1111 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1112 0024 5AB2     		sxtb	r2, r3
 1113 0026 97F90730 		ldrsb	r3, [r7, #7]
 1114 002a 9342     		cmp	r3, r2
 1115 002c A8BF     		it	ge
 1116 002e 1346     		movge	r3, r2
 1117 0030 DAB2     		uxtb	r2, r3
 1118 0032 0B4B     		ldr	r3, .L5+4
 1119 0034 1A70     		strb	r2, [r3]
 188:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1120              		.loc 1 188 0
 1121 0036 97F90730 		ldrsb	r3, [r7, #7]
 1122 003a 1A02     		lsls	r2, r3, #8
 1123 003c 094B     		ldr	r3, .L5+8
 1124 003e 1B68     		ldr	r3, [r3]
 1125 0040 1344     		add	r3, r3, r2
 1126 0042 084A     		ldr	r2, .L5+8
 1127 0044 1360     		str	r3, [r2]
 189:bluetooth_rxtx.c **** 	rssi_count += 1;
 1128              		.loc 1 189 0
 1129 0046 084B     		ldr	r3, .L5+12
 1130 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1131 004a 0133     		adds	r3, r3, #1
 1132 004c DAB2     		uxtb	r2, r3
 1133 004e 064B     		ldr	r3, .L5+12
 1134 0050 1A70     		strb	r2, [r3]
 190:bluetooth_rxtx.c **** }
 1135              		.loc 1 190 0
 1136 0052 0C37     		adds	r7, r7, #12
 1137              		.cfi_def_cfa_offset 4
 1138 0054 BD46     		mov	sp, r7
 1139              		.cfi_def_cfa_register 13
 1140              		@ sp needed
 1141 0056 5DF8047B 		ldr	r7, [sp], #4
ARM GAS  /tmp/ccSuvgbr.s 			page 23


 1142              		.cfi_restore 7
 1143              		.cfi_def_cfa_offset 0
 1144 005a 7047     		bx	lr
 1145              	.L6:
 1146              		.align	2
 1147              	.L5:
 1148 005c 00000000 		.word	rssi_max
 1149 0060 00000000 		.word	rssi_min
 1150 0064 00000000 		.word	rssi_sum
 1151 0068 00000000 		.word	rssi_count
 1152              		.cfi_endproc
 1153              	.LFE1:
 1155              		.section	.text.rssi_iir_update,"ax",%progbits
 1156              		.align	2
 1157              		.thumb
 1158              		.thumb_func
 1160              	rssi_iir_update:
 1161              	.LFB2:
 191:bluetooth_rxtx.c **** 
 192:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 193:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 194:bluetooth_rxtx.c **** {
 1162              		.loc 1 194 0
 1163              		.cfi_startproc
 1164              		@ args = 0, pretend = 0, frame = 16
 1165              		@ frame_needed = 1, uses_anonymous_args = 0
 1166              		@ link register save eliminated.
 1167 0000 80B4     		push	{r7}
 1168              		.cfi_def_cfa_offset 4
 1169              		.cfi_offset 7, -4
 1170 0002 85B0     		sub	sp, sp, #20
 1171              		.cfi_def_cfa_offset 24
 1172 0004 00AF     		add	r7, sp, #0
 1173              		.cfi_def_cfa_register 7
 195:bluetooth_rxtx.c **** 	int i;
 196:bluetooth_rxtx.c **** 	int32_t avg;
 197:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 198:bluetooth_rxtx.c **** 
 199:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 200:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 201:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1174              		.loc 1 201 0
 1175 0006 1F4B     		ldr	r3, .L13
 1176 0008 1B78     		ldrb	r3, [r3]
 1177 000a DBB2     		uxtb	r3, r3
 1178 000c 002B     		cmp	r3, #0
 1179 000e 06D0     		beq	.L8
 202:bluetooth_rxtx.c **** 		i = channel - 2402;
 1180              		.loc 1 202 0
 1181 0010 1D4B     		ldr	r3, .L13+4
 1182 0012 1B88     		ldrh	r3, [r3]	@ movhi
 1183 0014 9BB2     		uxth	r3, r3
 1184 0016 A3F66213 		subw	r3, r3, #2402
 1185 001a FB60     		str	r3, [r7, #12]
 1186 001c 01E0     		b	.L9
 1187              	.L8:
 203:bluetooth_rxtx.c **** 	else
ARM GAS  /tmp/ccSuvgbr.s 			page 24


 204:bluetooth_rxtx.c **** 		i = 0;
 1188              		.loc 1 204 0
 1189 001e 0023     		movs	r3, #0
 1190 0020 FB60     		str	r3, [r7, #12]
 1191              	.L9:
 205:bluetooth_rxtx.c **** 
 206:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 207:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1192              		.loc 1 207 0
 1193 0022 1A4B     		ldr	r3, .L13+8
 1194 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1195 0026 002B     		cmp	r3, #0
 1196 0028 08D0     		beq	.L10
 208:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1197              		.loc 1 208 0
 1198 002a 194B     		ldr	r3, .L13+12
 1199 002c 1B68     		ldr	r3, [r3]
 1200 002e 8033     		adds	r3, r3, #128
 1201 0030 164A     		ldr	r2, .L13+8
 1202 0032 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1203 0034 93FBF2F3 		sdiv	r3, r3, r2
 1204 0038 BB60     		str	r3, [r7, #8]
 1205 003a 01E0     		b	.L11
 1206              	.L10:
 209:bluetooth_rxtx.c **** 	else
 210:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1207              		.loc 1 210 0
 1208 003c 0023     		movs	r3, #0
 1209 003e BB60     		str	r3, [r7, #8]
 1210              	.L11:
 211:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1211              		.loc 1 211 0
 1212 0040 144A     		ldr	r2, .L13+16
 1213 0042 FB68     		ldr	r3, [r7, #12]
 1214 0044 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1215 0048 1AB2     		sxth	r2, r3
 1216 004a 1346     		mov	r3, r2
 1217 004c 9B01     		lsls	r3, r3, #6
 1218 004e 9B1A     		subs	r3, r3, r2
 1219 0050 9B00     		lsls	r3, r3, #2
 1220 0052 1344     		add	r3, r3, r2
 1221 0054 7B60     		str	r3, [r7, #4]
 212:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1222              		.loc 1 212 0
 1223 0056 BA68     		ldr	r2, [r7, #8]
 1224 0058 1346     		mov	r3, r2
 1225 005a 5B00     		lsls	r3, r3, #1
 1226 005c 1344     		add	r3, r3, r2
 1227 005e 7A68     		ldr	r2, [r7, #4]
 1228 0060 1344     		add	r3, r3, r2
 1229 0062 7B60     		str	r3, [r7, #4]
 213:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1230              		.loc 1 213 0
 1231 0064 7B68     		ldr	r3, [r7, #4]
 1232 0066 8033     		adds	r3, r3, #128
 1233 0068 002B     		cmp	r3, #0
 1234 006a 00DA     		bge	.L12
ARM GAS  /tmp/ccSuvgbr.s 			page 25


 1235 006c FF33     		adds	r3, r3, #255
 1236              	.L12:
 1237 006e 1B12     		asrs	r3, r3, #8
 1238 0070 99B2     		uxth	r1, r3
 1239 0072 084A     		ldr	r2, .L13+16
 1240 0074 FB68     		ldr	r3, [r7, #12]
 1241 0076 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 214:bluetooth_rxtx.c **** }
 1242              		.loc 1 214 0
 1243 007a 1437     		adds	r7, r7, #20
 1244              		.cfi_def_cfa_offset 4
 1245 007c BD46     		mov	sp, r7
 1246              		.cfi_def_cfa_register 13
 1247              		@ sp needed
 1248 007e 5DF8047B 		ldr	r7, [sp], #4
 1249              		.cfi_restore 7
 1250              		.cfi_def_cfa_offset 0
 1251 0082 7047     		bx	lr
 1252              	.L14:
 1253              		.align	2
 1254              	.L13:
 1255 0084 00000000 		.word	hop_mode
 1256 0088 00000000 		.word	channel
 1257 008c 00000000 		.word	rssi_count
 1258 0090 00000000 		.word	rssi_sum
 1259 0094 00000000 		.word	rssi_iir
 1260              		.cfi_endproc
 1261              	.LFE2:
 1263              		.section	.text.cs_threshold_set,"ax",%progbits
 1264              		.align	2
 1265              		.thumb
 1266              		.thumb_func
 1268              	cs_threshold_set:
 1269              	.LFB3:
 215:bluetooth_rxtx.c **** 
 216:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 217:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 218:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 219:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 220:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 221:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 222:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 223:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 224:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 225:bluetooth_rxtx.c **** {
 1270              		.loc 1 225 0
 1271              		.cfi_startproc
 1272              		@ args = 0, pretend = 0, frame = 8
 1273              		@ frame_needed = 1, uses_anonymous_args = 0
 1274 0000 80B5     		push	{r7, lr}
 1275              		.cfi_def_cfa_offset 8
 1276              		.cfi_offset 7, -8
 1277              		.cfi_offset 14, -4
 1278 0002 82B0     		sub	sp, sp, #8
 1279              		.cfi_def_cfa_offset 16
 1280 0004 00AF     		add	r7, sp, #0
 1281              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccSuvgbr.s 			page 26


 1282 0006 0346     		mov	r3, r0
 1283 0008 0A46     		mov	r2, r1
 1284 000a FB71     		strb	r3, [r7, #7]
 1285 000c 1346     		mov	r3, r2
 1286 000e BB71     		strb	r3, [r7, #6]
 226:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1287              		.loc 1 226 0
 1288 0010 97F90730 		ldrsb	r3, [r7, #7]
 1289 0014 13F1140F 		cmn	r3, #20
 1290 0018 0DD0     		beq	.L16
 1291              		.loc 1 226 0 is_stmt 0 discriminator 1
 1292 001a 97F90730 		ldrsb	r3, [r7, #7]
 1293 001e 13F1130F 		cmn	r3, #19
 1294 0022 08DA     		bge	.L16
 1295              		.loc 1 226 0 discriminator 3
 1296 0024 97F90730 		ldrsb	r3, [r7, #7]
 1297 0028 6FF07702 		mvn	r2, #119
 1298 002c 9342     		cmp	r3, r2
 1299 002e B8BF     		it	lt
 1300 0030 1346     		movlt	r3, r2
 1301 0032 DBB2     		uxtb	r3, r3
 1302 0034 00E0     		b	.L17
 1303              	.L16:
 1304              		.loc 1 226 0 discriminator 4
 1305 0036 EC23     		movs	r3, #236
 1306              	.L17:
 1307              		.loc 1 226 0 discriminator 6
 1308 0038 FB71     		strb	r3, [r7, #7]
 227:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1309              		.loc 1 227 0 is_stmt 1 discriminator 6
 1310 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1311 003c 3833     		adds	r3, r3, #56
 1312 003e DBB2     		uxtb	r3, r3
 1313 0040 9BB2     		uxth	r3, r3
 1314 0042 03F0FC03 		and	r3, r3, #252
 1315 0046 9AB2     		uxth	r2, r3
 1316 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1317 004a 9BB2     		uxth	r3, r3
 1318 004c 03F00303 		and	r3, r3, #3
 1319 0050 9BB2     		uxth	r3, r3
 1320 0052 1343     		orrs	r3, r3, r2
 1321 0054 9BB2     		uxth	r3, r3
 1322 0056 9BB2     		uxth	r3, r3
 1323 0058 0620     		movs	r0, #6
 1324 005a 1946     		mov	r1, r3
 1325 005c FFF7FEFF 		bl	cc2400_set
 228:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1326              		.loc 1 228 0 discriminator 6
 1327 0060 084A     		ldr	r2, .L18
 1328 0062 FB79     		ldrb	r3, [r7, #7]
 1329 0064 1370     		strb	r3, [r2]
 229:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1330              		.loc 1 229 0 discriminator 6
 1331 0066 97F90730 		ldrsb	r3, [r7, #7]
 1332 006a 13F1770F 		cmn	r3, #119
 1333 006e B4BF     		ite	lt
 1334 0070 0123     		movlt	r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 27


 1335 0072 0023     		movge	r3, #0
 1336 0074 DBB2     		uxtb	r3, r3
 1337 0076 1A46     		mov	r2, r3
 1338 0078 034B     		ldr	r3, .L18+4
 1339 007a 1A70     		strb	r2, [r3]
 230:bluetooth_rxtx.c **** }
 1340              		.loc 1 230 0 discriminator 6
 1341 007c 0837     		adds	r7, r7, #8
 1342              		.cfi_def_cfa_offset 8
 1343 007e BD46     		mov	sp, r7
 1344              		.cfi_def_cfa_register 13
 1345              		@ sp needed
 1346 0080 80BD     		pop	{r7, pc}
 1347              	.L19:
 1348 0082 00BF     		.align	2
 1349              	.L18:
 1350 0084 00000000 		.word	cs_threshold_cur
 1351 0088 00000000 		.word	cs_no_squelch
 1352              		.cfi_endproc
 1353              	.LFE3:
 1355              		.section	.text.enqueue,"ax",%progbits
 1356              		.align	2
 1357              		.thumb
 1358              		.thumb_func
 1360              	enqueue:
 1361              	.LFB4:
 231:bluetooth_rxtx.c **** 
 232:bluetooth_rxtx.c **** static int enqueue(uint8_t type, uint8_t* buf)
 233:bluetooth_rxtx.c **** {
 1362              		.loc 1 233 0
 1363              		.cfi_startproc
 1364              		@ args = 0, pretend = 0, frame = 16
 1365              		@ frame_needed = 1, uses_anonymous_args = 0
 1366 0000 80B5     		push	{r7, lr}
 1367              		.cfi_def_cfa_offset 8
 1368              		.cfi_offset 7, -8
 1369              		.cfi_offset 14, -4
 1370 0002 84B0     		sub	sp, sp, #16
 1371              		.cfi_def_cfa_offset 24
 1372 0004 00AF     		add	r7, sp, #0
 1373              		.cfi_def_cfa_register 7
 1374 0006 0346     		mov	r3, r0
 1375 0008 3960     		str	r1, [r7]
 1376 000a FB71     		strb	r3, [r7, #7]
 234:bluetooth_rxtx.c **** 	usb_pkt_rx* f = usb_enqueue();
 1377              		.loc 1 234 0
 1378 000c FFF7FEFF 		bl	usb_enqueue
 1379 0010 F860     		str	r0, [r7, #12]
 235:bluetooth_rxtx.c **** 
 236:bluetooth_rxtx.c **** 	/* fail if queue is full */
 237:bluetooth_rxtx.c **** 	if (f == NULL) {
 1380              		.loc 1 237 0
 1381 0012 FB68     		ldr	r3, [r7, #12]
 1382 0014 002B     		cmp	r3, #0
 1383 0016 09D1     		bne	.L21
 238:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1384              		.loc 1 238 0
ARM GAS  /tmp/ccSuvgbr.s 			page 28


 1385 0018 3C4B     		ldr	r3, .L29
 1386 001a 1B78     		ldrb	r3, [r3]
 1387 001c DBB2     		uxtb	r3, r3
 1388 001e 43F00403 		orr	r3, r3, #4
 1389 0022 DAB2     		uxtb	r2, r3
 1390 0024 394B     		ldr	r3, .L29
 1391 0026 1A70     		strb	r2, [r3]
 239:bluetooth_rxtx.c **** 		return 0;
 1392              		.loc 1 239 0
 1393 0028 0023     		movs	r3, #0
 1394 002a 6AE0     		b	.L22
 1395              	.L21:
 240:bluetooth_rxtx.c **** 	}
 241:bluetooth_rxtx.c **** 
 242:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1396              		.loc 1 242 0
 1397 002c FB68     		ldr	r3, [r7, #12]
 1398 002e FA79     		ldrb	r2, [r7, #7]
 1399 0030 1A70     		strb	r2, [r3]
 243:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1400              		.loc 1 243 0
 1401 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1402 0034 042B     		cmp	r3, #4
 1403 0036 13D1     		bne	.L23
 244:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1404              		.loc 1 244 0
 1405 0038 354B     		ldr	r3, .L29+4
 1406 003a 1B68     		ldr	r3, [r3]
 1407 003c 1B0D     		lsrs	r3, r3, #20
 1408 003e DAB2     		uxtb	r2, r3
 1409 0040 FB68     		ldr	r3, [r7, #12]
 1410 0042 DA70     		strb	r2, [r3, #3]
 245:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1411              		.loc 1 245 0
 1412 0044 324B     		ldr	r3, .L29+4
 1413 0046 1B68     		ldr	r3, [r3]
 1414 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1415 004c 40F63542 		movw	r2, #3125
 1416 0050 02FB03F2 		mul	r2, r2, r3
 1417 0054 2F4B     		ldr	r3, .L29+8
 1418 0056 1B68     		ldr	r3, [r3]
 1419 0058 1A44     		add	r2, r2, r3
 1420 005a FB68     		ldr	r3, [r7, #12]
 1421 005c 5A60     		str	r2, [r3, #4]
 1422 005e 40E0     		b	.L24
 1423              	.L23:
 246:bluetooth_rxtx.c **** 	} else {
 247:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1424              		.loc 1 247 0
 1425 0060 2D4B     		ldr	r3, .L29+12
 1426 0062 1B78     		ldrb	r3, [r3]
 1427 0064 DAB2     		uxtb	r2, r3
 1428 0066 FB68     		ldr	r3, [r7, #12]
 1429 0068 DA70     		strb	r2, [r3, #3]
 248:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1430              		.loc 1 248 0
 1431 006a 2C4B     		ldr	r3, .L29+16
ARM GAS  /tmp/ccSuvgbr.s 			page 29


 1432 006c 1A68     		ldr	r2, [r3]
 1433 006e FB68     		ldr	r3, [r7, #12]
 1434 0070 5A60     		str	r2, [r3, #4]
 249:bluetooth_rxtx.c **** 		f->channel = idle_buf_channel - 2402;
 1435              		.loc 1 249 0
 1436 0072 2B4B     		ldr	r3, .L29+20
 1437 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1438 0076 9BB2     		uxth	r3, r3
 1439 0078 DBB2     		uxtb	r3, r3
 1440 007a 623B     		subs	r3, r3, #98
 1441 007c DAB2     		uxtb	r2, r3
 1442 007e FB68     		ldr	r3, [r7, #12]
 1443 0080 9A70     		strb	r2, [r3, #2]
 250:bluetooth_rxtx.c **** 		f->rssi_min = rssi_min;
 1444              		.loc 1 250 0
 1445 0082 284B     		ldr	r3, .L29+24
 1446 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1447 0086 DAB2     		uxtb	r2, r3
 1448 0088 FB68     		ldr	r3, [r7, #12]
 1449 008a 5A72     		strb	r2, [r3, #9]
 251:bluetooth_rxtx.c **** 		f->rssi_max = rssi_max;
 1450              		.loc 1 251 0
 1451 008c 264B     		ldr	r3, .L29+28
 1452 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1453 0090 DAB2     		uxtb	r2, r3
 1454 0092 FB68     		ldr	r3, [r7, #12]
 1455 0094 1A72     		strb	r2, [r3, #8]
 252:bluetooth_rxtx.c **** 		if (hop_mode != HOP_NONE)
 1456              		.loc 1 252 0
 1457 0096 254B     		ldr	r3, .L29+32
 1458 0098 1B78     		ldrb	r3, [r3]
 1459 009a DBB2     		uxtb	r3, r3
 1460 009c 002B     		cmp	r3, #0
 1461 009e 11D0     		beq	.L25
 253:bluetooth_rxtx.c **** 			f->rssi_avg = (int8_t)((rssi_iir[idle_buf_channel-2402] + 128)/256);
 1462              		.loc 1 253 0
 1463 00a0 1F4B     		ldr	r3, .L29+20
 1464 00a2 1B88     		ldrh	r3, [r3]	@ movhi
 1465 00a4 9BB2     		uxth	r3, r3
 1466 00a6 A3F66213 		subw	r3, r3, #2402
 1467 00aa 214A     		ldr	r2, .L29+36
 1468 00ac 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1469 00b0 1BB2     		sxth	r3, r3
 1470 00b2 8033     		adds	r3, r3, #128
 1471 00b4 002B     		cmp	r3, #0
 1472 00b6 00DA     		bge	.L26
 1473 00b8 FF33     		adds	r3, r3, #255
 1474              	.L26:
 1475 00ba 1B12     		asrs	r3, r3, #8
 1476 00bc DAB2     		uxtb	r2, r3
 1477 00be FB68     		ldr	r3, [r7, #12]
 1478 00c0 9A72     		strb	r2, [r3, #10]
 1479 00c2 0AE0     		b	.L27
 1480              	.L25:
 254:bluetooth_rxtx.c **** 		else
 255:bluetooth_rxtx.c **** 			f->rssi_avg = (int8_t)((rssi_iir[0] + 128)/256);
 1481              		.loc 1 255 0
ARM GAS  /tmp/ccSuvgbr.s 			page 30


 1482 00c4 1A4B     		ldr	r3, .L29+36
 1483 00c6 1B88     		ldrh	r3, [r3]
 1484 00c8 1BB2     		sxth	r3, r3
 1485 00ca 8033     		adds	r3, r3, #128
 1486 00cc 002B     		cmp	r3, #0
 1487 00ce 00DA     		bge	.L28
 1488 00d0 FF33     		adds	r3, r3, #255
 1489              	.L28:
 1490 00d2 1B12     		asrs	r3, r3, #8
 1491 00d4 DAB2     		uxtb	r2, r3
 1492 00d6 FB68     		ldr	r3, [r7, #12]
 1493 00d8 9A72     		strb	r2, [r3, #10]
 1494              	.L27:
 256:bluetooth_rxtx.c **** 		f->rssi_count = rssi_count;
 1495              		.loc 1 256 0
 1496 00da 164B     		ldr	r3, .L29+40
 1497 00dc 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1498 00de FB68     		ldr	r3, [r7, #12]
 1499 00e0 DA72     		strb	r2, [r3, #11]
 1500              	.L24:
 257:bluetooth_rxtx.c **** 	}
 258:bluetooth_rxtx.c **** 
 259:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 1501              		.loc 1 259 0
 1502 00e2 FB68     		ldr	r3, [r7, #12]
 1503 00e4 0E33     		adds	r3, r3, #14
 1504 00e6 1846     		mov	r0, r3
 1505 00e8 3968     		ldr	r1, [r7]
 1506 00ea 3222     		movs	r2, #50
 1507 00ec FFF7FEFF 		bl	memcpy
 260:bluetooth_rxtx.c **** 
 261:bluetooth_rxtx.c **** 	f->status = status;
 1508              		.loc 1 261 0
 1509 00f0 064B     		ldr	r3, .L29
 1510 00f2 1B78     		ldrb	r3, [r3]
 1511 00f4 DAB2     		uxtb	r2, r3
 1512 00f6 FB68     		ldr	r3, [r7, #12]
 1513 00f8 5A70     		strb	r2, [r3, #1]
 262:bluetooth_rxtx.c **** 	status = 0;
 1514              		.loc 1 262 0
 1515 00fa 044B     		ldr	r3, .L29
 1516 00fc 0022     		movs	r2, #0
 1517 00fe 1A70     		strb	r2, [r3]
 263:bluetooth_rxtx.c **** 
 264:bluetooth_rxtx.c **** 	return 1;
 1518              		.loc 1 264 0
 1519 0100 0123     		movs	r3, #1
 1520              	.L22:
 265:bluetooth_rxtx.c **** }
 1521              		.loc 1 265 0
 1522 0102 1846     		mov	r0, r3
 1523 0104 1037     		adds	r7, r7, #16
 1524              		.cfi_def_cfa_offset 8
 1525 0106 BD46     		mov	sp, r7
 1526              		.cfi_def_cfa_register 13
 1527              		@ sp needed
 1528 0108 80BD     		pop	{r7, pc}
ARM GAS  /tmp/ccSuvgbr.s 			page 31


 1529              	.L30:
 1530 010a 00BF     		.align	2
 1531              	.L29:
 1532 010c 00000000 		.word	status
 1533 0110 00000000 		.word	clkn
 1534 0114 08400040 		.word	1073758216
 1535 0118 00000000 		.word	idle_buf_clkn_high
 1536 011c 00000000 		.word	idle_buf_clk100ns
 1537 0120 00000000 		.word	idle_buf_channel
 1538 0124 00000000 		.word	rssi_min
 1539 0128 00000000 		.word	rssi_max
 1540 012c 00000000 		.word	hop_mode
 1541 0130 00000000 		.word	rssi_iir
 1542 0134 00000000 		.word	rssi_count
 1543              		.cfi_endproc
 1544              	.LFE4:
 1546              		.section	.text.enqueue_with_ts,"ax",%progbits
 1547              		.align	2
 1548              		.global	enqueue_with_ts
 1549              		.thumb
 1550              		.thumb_func
 1552              	enqueue_with_ts:
 1553              	.LFB5:
 266:bluetooth_rxtx.c **** 
 267:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 268:bluetooth_rxtx.c **** {
 1554              		.loc 1 268 0
 1555              		.cfi_startproc
 1556              		@ args = 0, pretend = 0, frame = 24
 1557              		@ frame_needed = 1, uses_anonymous_args = 0
 1558 0000 80B5     		push	{r7, lr}
 1559              		.cfi_def_cfa_offset 8
 1560              		.cfi_offset 7, -8
 1561              		.cfi_offset 14, -4
 1562 0002 86B0     		sub	sp, sp, #24
 1563              		.cfi_def_cfa_offset 32
 1564 0004 00AF     		add	r7, sp, #0
 1565              		.cfi_def_cfa_register 7
 1566 0006 0346     		mov	r3, r0
 1567 0008 B960     		str	r1, [r7, #8]
 1568 000a 7A60     		str	r2, [r7, #4]
 1569 000c FB73     		strb	r3, [r7, #15]
 269:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1570              		.loc 1 269 0
 1571 000e FFF7FEFF 		bl	usb_enqueue
 1572 0012 7861     		str	r0, [r7, #20]
 270:bluetooth_rxtx.c **** 
 271:bluetooth_rxtx.c **** 	/* fail if queue is full */
 272:bluetooth_rxtx.c **** 	if (f == NULL) {
 1573              		.loc 1 272 0
 1574 0014 7B69     		ldr	r3, [r7, #20]
 1575 0016 002B     		cmp	r3, #0
 1576 0018 09D1     		bne	.L32
 273:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1577              		.loc 1 273 0
 1578 001a 194B     		ldr	r3, .L34
 1579 001c 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 32


 1580 001e DBB2     		uxtb	r3, r3
 1581 0020 43F00403 		orr	r3, r3, #4
 1582 0024 DAB2     		uxtb	r2, r3
 1583 0026 164B     		ldr	r3, .L34
 1584 0028 1A70     		strb	r2, [r3]
 274:bluetooth_rxtx.c **** 		return 0;
 1585              		.loc 1 274 0
 1586 002a 0023     		movs	r3, #0
 1587 002c 23E0     		b	.L33
 1588              	.L32:
 275:bluetooth_rxtx.c **** 	}
 276:bluetooth_rxtx.c **** 
 277:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 1589              		.loc 1 277 0
 1590 002e 7B69     		ldr	r3, [r7, #20]
 1591 0030 0022     		movs	r2, #0
 1592 0032 DA70     		strb	r2, [r3, #3]
 278:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1593              		.loc 1 278 0
 1594 0034 7B69     		ldr	r3, [r7, #20]
 1595 0036 7A68     		ldr	r2, [r7, #4]
 1596 0038 5A60     		str	r2, [r3, #4]
 279:bluetooth_rxtx.c **** 
 280:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1597              		.loc 1 280 0
 1598 003a 124B     		ldr	r3, .L34+4
 1599 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1600 003e 9BB2     		uxth	r3, r3
 1601 0040 DBB2     		uxtb	r3, r3
 1602 0042 623B     		subs	r3, r3, #98
 1603 0044 DAB2     		uxtb	r2, r3
 1604 0046 7B69     		ldr	r3, [r7, #20]
 1605 0048 9A70     		strb	r2, [r3, #2]
 281:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 1606              		.loc 1 281 0
 1607 004a 7B69     		ldr	r3, [r7, #20]
 1608 004c 0022     		movs	r2, #0
 1609 004e 9A72     		strb	r2, [r3, #10]
 282:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 1610              		.loc 1 282 0
 1611 0050 7B69     		ldr	r3, [r7, #20]
 1612 0052 0022     		movs	r2, #0
 1613 0054 DA72     		strb	r2, [r3, #11]
 283:bluetooth_rxtx.c **** 
 284:bluetooth_rxtx.c **** 	memcpy(f->data, buf, DMA_SIZE);
 1614              		.loc 1 284 0
 1615 0056 7B69     		ldr	r3, [r7, #20]
 1616 0058 0E33     		adds	r3, r3, #14
 1617 005a 1846     		mov	r0, r3
 1618 005c B968     		ldr	r1, [r7, #8]
 1619 005e 3222     		movs	r2, #50
 1620 0060 FFF7FEFF 		bl	memcpy
 285:bluetooth_rxtx.c **** 
 286:bluetooth_rxtx.c **** 	f->status = status;
 1621              		.loc 1 286 0
 1622 0064 064B     		ldr	r3, .L34
 1623 0066 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 33


 1624 0068 DAB2     		uxtb	r2, r3
 1625 006a 7B69     		ldr	r3, [r7, #20]
 1626 006c 5A70     		strb	r2, [r3, #1]
 287:bluetooth_rxtx.c **** 	status = 0;
 1627              		.loc 1 287 0
 1628 006e 044B     		ldr	r3, .L34
 1629 0070 0022     		movs	r2, #0
 1630 0072 1A70     		strb	r2, [r3]
 288:bluetooth_rxtx.c **** 
 289:bluetooth_rxtx.c **** 	return 1;
 1631              		.loc 1 289 0
 1632 0074 0123     		movs	r3, #1
 1633              	.L33:
 290:bluetooth_rxtx.c **** }
 1634              		.loc 1 290 0
 1635 0076 1846     		mov	r0, r3
 1636 0078 1837     		adds	r7, r7, #24
 1637              		.cfi_def_cfa_offset 8
 1638 007a BD46     		mov	sp, r7
 1639              		.cfi_def_cfa_register 13
 1640              		@ sp needed
 1641 007c 80BD     		pop	{r7, pc}
 1642              	.L35:
 1643 007e 00BF     		.align	2
 1644              	.L34:
 1645 0080 00000000 		.word	status
 1646 0084 00000000 		.word	channel
 1647              		.cfi_endproc
 1648              	.LFE5:
 1650              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 1651              		.align	2
 1652              		.thumb
 1653              		.thumb_func
 1655              	cs_threshold_calc_and_set:
 1656              	.LFB6:
 291:bluetooth_rxtx.c **** 
 292:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 293:bluetooth_rxtx.c **** {
 1657              		.loc 1 293 0
 1658              		.cfi_startproc
 1659              		@ args = 0, pretend = 0, frame = 8
 1660              		@ frame_needed = 1, uses_anonymous_args = 0
 1661 0000 80B5     		push	{r7, lr}
 1662              		.cfi_def_cfa_offset 8
 1663              		.cfi_offset 7, -8
 1664              		.cfi_offset 14, -4
 1665 0002 82B0     		sub	sp, sp, #8
 1666              		.cfi_def_cfa_offset 16
 1667 0004 00AF     		add	r7, sp, #0
 1668              		.cfi_def_cfa_register 7
 294:bluetooth_rxtx.c **** 	int8_t level;
 295:bluetooth_rxtx.c **** 
 296:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 297:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 298:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 299:bluetooth_rxtx.c **** 	 * value for it. */
 300:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
ARM GAS  /tmp/ccSuvgbr.s 			page 34


 1669              		.loc 1 300 0
 1670 0006 174B     		ldr	r3, .L40
 1671 0008 1B78     		ldrb	r3, [r3]
 1672 000a DBB2     		uxtb	r3, r3
 1673 000c 002B     		cmp	r3, #0
 1674 000e 1DD0     		beq	.L37
 1675              		.loc 1 300 0 is_stmt 0 discriminator 1
 1676 0010 154B     		ldr	r3, .L40+4
 1677 0012 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1678 0014 5BB2     		sxtb	r3, r3
 1679 0016 002B     		cmp	r3, #0
 1680 0018 18DD     		ble	.L37
 1681              	.LBB2:
 301:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1682              		.loc 1 301 0 is_stmt 1
 1683 001a 144B     		ldr	r3, .L40+8
 1684 001c 1B88     		ldrh	r3, [r3]	@ movhi
 1685 001e 9BB2     		uxth	r3, r3
 1686 0020 A3F66213 		subw	r3, r3, #2402
 1687 0024 124A     		ldr	r2, .L40+12
 1688 0026 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1689 002a 1BB2     		sxth	r3, r3
 1690 002c 8033     		adds	r3, r3, #128
 1691 002e 002B     		cmp	r3, #0
 1692 0030 00DA     		bge	.L38
 1693 0032 FF33     		adds	r3, r3, #255
 1694              	.L38:
 1695 0034 1B12     		asrs	r3, r3, #8
 1696 0036 BB71     		strb	r3, [r7, #6]
 302:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 1697              		.loc 1 302 0
 1698 0038 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1699 003a 0B4B     		ldr	r3, .L40+4
 1700 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1701 003e DBB2     		uxtb	r3, r3
 1702 0040 1344     		add	r3, r3, r2
 1703 0042 DBB2     		uxtb	r3, r3
 1704 0044 363B     		subs	r3, r3, #54
 1705 0046 DBB2     		uxtb	r3, r3
 1706 0048 FB71     		strb	r3, [r7, #7]
 1707              	.LBE2:
 300:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1708              		.loc 1 300 0
 1709 004a 02E0     		b	.L39
 1710              	.L37:
 303:bluetooth_rxtx.c **** 	}
 304:bluetooth_rxtx.c **** 	else {
 305:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 1711              		.loc 1 305 0
 1712 004c 064B     		ldr	r3, .L40+4
 1713 004e 1B78     		ldrb	r3, [r3]
 1714 0050 FB71     		strb	r3, [r7, #7]
 1715              	.L39:
 306:bluetooth_rxtx.c **** 	}
 307:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 1716              		.loc 1 307 0
 1717 0052 97F90730 		ldrsb	r3, [r7, #7]
ARM GAS  /tmp/ccSuvgbr.s 			page 35


 1718 0056 1846     		mov	r0, r3
 1719 0058 0321     		movs	r1, #3
 1720 005a FFF7FEFF 		bl	cs_threshold_set
 308:bluetooth_rxtx.c **** }
 1721              		.loc 1 308 0
 1722 005e 0837     		adds	r7, r7, #8
 1723              		.cfi_def_cfa_offset 8
 1724 0060 BD46     		mov	sp, r7
 1725              		.cfi_def_cfa_register 13
 1726              		@ sp needed
 1727 0062 80BD     		pop	{r7, pc}
 1728              	.L41:
 1729              		.align	2
 1730              	.L40:
 1731 0064 00000000 		.word	hop_mode
 1732 0068 00000000 		.word	cs_threshold_req
 1733 006c 00000000 		.word	channel
 1734 0070 00000000 		.word	rssi_iir
 1735              		.cfi_endproc
 1736              	.LFE6:
 1738              		.section	.text.cs_trigger_enable,"ax",%progbits
 1739              		.align	2
 1740              		.thumb
 1741              		.thumb_func
 1743              	cs_trigger_enable:
 1744              	.LFB7:
 309:bluetooth_rxtx.c **** 
 310:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 311:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 312:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 313:bluetooth_rxtx.c ****  * and off here. */
 314:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 315:bluetooth_rxtx.c **** {
 1745              		.loc 1 315 0
 1746              		.cfi_startproc
 1747              		@ args = 0, pretend = 0, frame = 0
 1748              		@ frame_needed = 1, uses_anonymous_args = 0
 1749              		@ link register save eliminated.
 1750 0000 80B4     		push	{r7}
 1751              		.cfi_def_cfa_offset 4
 1752              		.cfi_offset 7, -4
 1753 0002 00AF     		add	r7, sp, #0
 1754              		.cfi_def_cfa_register 7
 316:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1755              		.loc 1 316 0
 1756 0004 094B     		ldr	r3, .L43
 1757 0006 0022     		movs	r2, #0
 1758 0008 1A70     		strb	r2, [r3]
 317:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 1759              		.loc 1 317 0
 1760 000a 094B     		ldr	r3, .L43+4
 1761 000c 4FF40012 		mov	r2, #2097152
 1762 0010 1A60     		str	r2, [r3]
 318:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1763              		.loc 1 318 0
 1764 0012 084B     		ldr	r3, .L43+8
 1765 0014 0422     		movs	r2, #4
ARM GAS  /tmp/ccSuvgbr.s 			page 36


 1766 0016 1A60     		str	r2, [r3]
 319:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 1767              		.loc 1 319 0
 1768 0018 074A     		ldr	r2, .L43+12
 1769 001a 074B     		ldr	r3, .L43+12
 1770 001c 1B68     		ldr	r3, [r3]
 1771 001e 43F00403 		orr	r3, r3, #4
 1772 0022 1360     		str	r3, [r2]
 320:bluetooth_rxtx.c **** }
 1773              		.loc 1 320 0
 1774 0024 BD46     		mov	sp, r7
 1775              		.cfi_def_cfa_register 13
 1776              		@ sp needed
 1777 0026 5DF8047B 		ldr	r7, [sp], #4
 1778              		.cfi_restore 7
 1779              		.cfi_def_cfa_offset 0
 1780 002a 7047     		bx	lr
 1781              	.L44:
 1782              		.align	2
 1783              	.L43:
 1784 002c 00000000 		.word	cs_trigger
 1785 0030 00E100E0 		.word	-536813312
 1786 0034 AC800240 		.word	1073905836
 1787 0038 B4800240 		.word	1073905844
 1788              		.cfi_endproc
 1789              	.LFE7:
 1791              		.section	.text.cs_trigger_disable,"ax",%progbits
 1792              		.align	2
 1793              		.thumb
 1794              		.thumb_func
 1796              	cs_trigger_disable:
 1797              	.LFB8:
 321:bluetooth_rxtx.c **** 
 322:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 323:bluetooth_rxtx.c **** {
 1798              		.loc 1 323 0
 1799              		.cfi_startproc
 1800              		@ args = 0, pretend = 0, frame = 0
 1801              		@ frame_needed = 1, uses_anonymous_args = 0
 1802              		@ link register save eliminated.
 1803 0000 80B4     		push	{r7}
 1804              		.cfi_def_cfa_offset 4
 1805              		.cfi_offset 7, -4
 1806 0002 00AF     		add	r7, sp, #0
 1807              		.cfi_def_cfa_register 7
 324:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 1808              		.loc 1 324 0
 1809 0004 094A     		ldr	r2, .L46
 1810 0006 094B     		ldr	r3, .L46
 1811 0008 1B68     		ldr	r3, [r3]
 1812 000a 23F00403 		bic	r3, r3, #4
 1813 000e 1360     		str	r3, [r2]
 325:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1814              		.loc 1 325 0
 1815 0010 074B     		ldr	r3, .L46+4
 1816 0012 0422     		movs	r2, #4
 1817 0014 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 37


 326:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 1818              		.loc 1 326 0
 1819 0016 074B     		ldr	r3, .L46+8
 1820 0018 4FF40012 		mov	r2, #2097152
 1821 001c 1A60     		str	r2, [r3]
 327:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1822              		.loc 1 327 0
 1823 001e 064B     		ldr	r3, .L46+12
 1824 0020 0022     		movs	r2, #0
 1825 0022 1A70     		strb	r2, [r3]
 328:bluetooth_rxtx.c **** }
 1826              		.loc 1 328 0
 1827 0024 BD46     		mov	sp, r7
 1828              		.cfi_def_cfa_register 13
 1829              		@ sp needed
 1830 0026 5DF8047B 		ldr	r7, [sp], #4
 1831              		.cfi_restore 7
 1832              		.cfi_def_cfa_offset 0
 1833 002a 7047     		bx	lr
 1834              	.L47:
 1835              		.align	2
 1836              	.L46:
 1837 002c B4800240 		.word	1073905844
 1838 0030 AC800240 		.word	1073905836
 1839 0034 80E100E0 		.word	-536813184
 1840 0038 00000000 		.word	cs_trigger
 1841              		.cfi_endproc
 1842              	.LFE8:
 1844              		.section	.rodata
 1845 08bd 000000   		.align	2
 1846              	.LC3:
 1847 08c0 32303135 		.ascii	"2015-10-R1\000"
 1847      2D31302D 
 1847      523100
 1848              		.section	.text.vendor_request_handler,"ax",%progbits
 1849              		.align	2
 1850              		.thumb
 1851              		.thumb_func
 1853              	vendor_request_handler:
 1854              	.LFB9:
 329:bluetooth_rxtx.c **** 
 330:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 331:bluetooth_rxtx.c **** {
 1855              		.loc 1 331 0
 1856              		.cfi_startproc
 1857              		@ args = 0, pretend = 0, frame = 104
 1858              		@ frame_needed = 1, uses_anonymous_args = 0
 1859 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1860              		.cfi_def_cfa_offset 36
 1861              		.cfi_offset 4, -36
 1862              		.cfi_offset 5, -32
 1863              		.cfi_offset 6, -28
 1864              		.cfi_offset 7, -24
 1865              		.cfi_offset 8, -20
 1866              		.cfi_offset 9, -16
 1867              		.cfi_offset 10, -12
 1868              		.cfi_offset 11, -8
ARM GAS  /tmp/ccSuvgbr.s 			page 38


 1869              		.cfi_offset 14, -4
 1870 0004 9BB0     		sub	sp, sp, #108
 1871              		.cfi_def_cfa_offset 144
 1872 0006 00AF     		add	r7, sp, #0
 1873              		.cfi_def_cfa_register 7
 1874 0008 B960     		str	r1, [r7, #8]
 1875 000a 7A60     		str	r2, [r7, #4]
 1876 000c 3B60     		str	r3, [r7]
 1877 000e 0346     		mov	r3, r0
 1878 0010 FB73     		strb	r3, [r7, #15]
 332:bluetooth_rxtx.c **** 	u32 command[5];
 333:bluetooth_rxtx.c **** 	u32 result[5];
 334:bluetooth_rxtx.c **** 	u64 ac_copy;
 335:bluetooth_rxtx.c **** 	u32 clock;
 336:bluetooth_rxtx.c **** 	int clock_offset;
 337:bluetooth_rxtx.c **** 	u8 length; // string length
 338:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 1879              		.loc 1 338 0
 1880 0012 0023     		movs	r3, #0
 1881 0014 BB64     		str	r3, [r7, #72]
 339:bluetooth_rxtx.c **** 	u16 reg_val;
 340:bluetooth_rxtx.c **** 
 341:bluetooth_rxtx.c **** 	switch (request) {
 1882              		.loc 1 341 0
 1883 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1884 0018 3F2B     		cmp	r3, #63
 1885 001a 00F28785 		bhi	.L49
 1886 001e 01A2     		adr	r2, .L51
 1887 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1888              		.p2align 2
 1889              	.L51:
 1890 0024 25010000 		.word	.L50+1
 1891 0028 2F010000 		.word	.L52+1
 1892 002c 2D0B0000 		.word	.L49+1
 1893 0030 3F010000 		.word	.L53+1
 1894 0034 61010000 		.word	.L54+1
 1895 0038 7D010000 		.word	.L55+1
 1896 003c 9F010000 		.word	.L56+1
 1897 0040 BB010000 		.word	.L57+1
 1898 0044 DD010000 		.word	.L58+1
 1899 0048 FD010000 		.word	.L59+1
 1900 004c 1F020000 		.word	.L60+1
 1901 0050 C3040000 		.word	.L61+1
 1902 0054 E9040000 		.word	.L62+1
 1903 0058 95020000 		.word	.L63+1
 1904 005c 9F020000 		.word	.L64+1
 1905 0060 3F020000 		.word	.L65+1
 1906 0064 7D030000 		.word	.L66+1
 1907 0068 9D030000 		.word	.L67+1
 1908 006c D5030000 		.word	.L68+1
 1909 0070 F5030000 		.word	.L69+1
 1910 0074 11040000 		.word	.L70+1
 1911 0078 9D040000 		.word	.L71+1
 1912 007c A5040000 		.word	.L72+1
 1913 0080 B7040000 		.word	.L73+1
 1914 0084 73050000 		.word	.L74+1
 1915 0088 91050000 		.word	.L75+1
ARM GAS  /tmp/ccSuvgbr.s 			page 39


 1916 008c 2D0B0000 		.word	.L49+1
 1917 0090 9D050000 		.word	.L76+1
 1918 0094 19040000 		.word	.L77+1
 1919 0098 35040000 		.word	.L78+1
 1920 009c 5D040000 		.word	.L79+1
 1921 00a0 55040000 		.word	.L80+1
 1922 00a4 65040000 		.word	.L81+1
 1923 00a8 61060000 		.word	.L82+1
 1924 00ac F9050000 		.word	.L83+1
 1925 00b0 D5060000 		.word	.L84+1
 1926 00b4 E3060000 		.word	.L85+1
 1927 00b8 F3060000 		.word	.L86+1
 1928 00bc 05070000 		.word	.L87+1
 1929 00c0 D5070000 		.word	.L88+1
 1930 00c4 4B080000 		.word	.L89+1
 1931 00c8 D9080000 		.word	.L90+1
 1932 00cc 61090000 		.word	.L91+1
 1933 00d0 83090000 		.word	.L92+1
 1934 00d4 B3090000 		.word	.L93+1
 1935 00d8 310B0000 		.word	.L154+1
 1936 00dc E5090000 		.word	.L95+1
 1937 00e0 FB090000 		.word	.L96+1
 1938 00e4 170A0000 		.word	.L97+1
 1939 00e8 2D0A0000 		.word	.L98+1
 1940 00ec 590A0000 		.word	.L99+1
 1941 00f0 7D080000 		.word	.L100+1
 1942 00f4 AF080000 		.word	.L101+1
 1943 00f8 750A0000 		.word	.L102+1
 1944 00fc B90A0000 		.word	.L103+1
 1945 0100 A3060000 		.word	.L104+1
 1946 0104 CB0A0000 		.word	.L105+1
 1947 0108 2D0B0000 		.word	.L49+1
 1948 010c A30A0000 		.word	.L106+1
 1949 0110 0F0B0000 		.word	.L107+1
 1950 0114 1B0B0000 		.word	.L108+1
 1951 0118 2D0B0000 		.word	.L49+1
 1952 011c 43080000 		.word	.L109+1
 1953 0120 45090000 		.word	.L110+1
 1954              		.p2align 1
 1955              	.L50:
 342:bluetooth_rxtx.c **** 
 343:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 344:bluetooth_rxtx.c **** 		*data_len = 0;
 1956              		.loc 1 344 0
 1957 0124 3B68     		ldr	r3, [r7]
 1958 0126 0022     		movs	r2, #0
 1959 0128 1A60     		str	r2, [r3]
 345:bluetooth_rxtx.c **** 		break;
 1960              		.loc 1 345 0
 1961 012a 00F002BD 		b	.L111
 1962              	.L52:
 346:bluetooth_rxtx.c **** 
 347:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 348:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 1963              		.loc 1 348 0
 1964 012e A14B     		ldr	r3, .L155
 1965 0130 0122     		movs	r2, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 40


 1966 0132 1A70     		strb	r2, [r3]
 349:bluetooth_rxtx.c **** 		*data_len = 0;
 1967              		.loc 1 349 0
 1968 0134 3B68     		ldr	r3, [r7]
 1969 0136 0022     		movs	r2, #0
 1970 0138 1A60     		str	r2, [r3]
 350:bluetooth_rxtx.c **** 		break;
 1971              		.loc 1 350 0
 1972 013a 00F0FABC 		b	.L111
 1973              	.L53:
 351:bluetooth_rxtx.c **** 
 352:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 353:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 1974              		.loc 1 353 0
 1975 013e 9E4B     		ldr	r3, .L155+4
 1976 0140 1B68     		ldr	r3, [r3]
 1977 0142 03F00203 		and	r3, r3, #2
 1978 0146 002B     		cmp	r3, #0
 1979 0148 14BF     		ite	ne
 1980 014a 0123     		movne	r3, #1
 1981 014c 0023     		moveq	r3, #0
 1982 014e DBB2     		uxtb	r3, r3
 1983 0150 1A46     		mov	r2, r3
 1984 0152 7B68     		ldr	r3, [r7, #4]
 1985 0154 1A70     		strb	r2, [r3]
 354:bluetooth_rxtx.c **** 		*data_len = 1;
 1986              		.loc 1 354 0
 1987 0156 3B68     		ldr	r3, [r7]
 1988 0158 0122     		movs	r2, #1
 1989 015a 1A60     		str	r2, [r3]
 355:bluetooth_rxtx.c **** 		break;
 1990              		.loc 1 355 0
 1991 015c 00F0E9BC 		b	.L111
 1992              	.L54:
 356:bluetooth_rxtx.c **** 
 357:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 358:bluetooth_rxtx.c **** 		if (request_params[0])
 1993              		.loc 1 358 0
 1994 0160 BB68     		ldr	r3, [r7, #8]
 1995 0162 1B88     		ldrh	r3, [r3]
 1996 0164 002B     		cmp	r3, #0
 1997 0166 04D0     		beq	.L112
 359:bluetooth_rxtx.c **** 			USRLED_SET;
 1998              		.loc 1 359 0
 1999 0168 944B     		ldr	r3, .L155+8
 2000 016a 0222     		movs	r2, #2
 2001 016c 1A60     		str	r2, [r3]
 360:bluetooth_rxtx.c **** 		else
 361:bluetooth_rxtx.c **** 			USRLED_CLR;
 362:bluetooth_rxtx.c **** 		break;
 2002              		.loc 1 362 0
 2003 016e 00F0E0BC 		b	.L111
 2004              	.L112:
 361:bluetooth_rxtx.c **** 		break;
 2005              		.loc 1 361 0
 2006 0172 934B     		ldr	r3, .L155+12
 2007 0174 0222     		movs	r2, #2
ARM GAS  /tmp/ccSuvgbr.s 			page 41


 2008 0176 1A60     		str	r2, [r3]
 2009              		.loc 1 362 0
 2010 0178 00F0DBBC 		b	.L111
 2011              	.L55:
 363:bluetooth_rxtx.c **** 
 364:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 365:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2012              		.loc 1 365 0
 2013 017c 8E4B     		ldr	r3, .L155+4
 2014 017e 1B68     		ldr	r3, [r3]
 2015 0180 03F01003 		and	r3, r3, #16
 2016 0184 002B     		cmp	r3, #0
 2017 0186 14BF     		ite	ne
 2018 0188 0123     		movne	r3, #1
 2019 018a 0023     		moveq	r3, #0
 2020 018c DBB2     		uxtb	r3, r3
 2021 018e 1A46     		mov	r2, r3
 2022 0190 7B68     		ldr	r3, [r7, #4]
 2023 0192 1A70     		strb	r2, [r3]
 366:bluetooth_rxtx.c **** 		*data_len = 1;
 2024              		.loc 1 366 0
 2025 0194 3B68     		ldr	r3, [r7]
 2026 0196 0122     		movs	r2, #1
 2027 0198 1A60     		str	r2, [r3]
 367:bluetooth_rxtx.c **** 		break;
 2028              		.loc 1 367 0
 2029 019a 00F0CABC 		b	.L111
 2030              	.L56:
 368:bluetooth_rxtx.c **** 
 369:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 370:bluetooth_rxtx.c **** 		if (request_params[0])
 2031              		.loc 1 370 0
 2032 019e BB68     		ldr	r3, [r7, #8]
 2033 01a0 1B88     		ldrh	r3, [r3]
 2034 01a2 002B     		cmp	r3, #0
 2035 01a4 04D0     		beq	.L114
 371:bluetooth_rxtx.c **** 			RXLED_SET;
 2036              		.loc 1 371 0
 2037 01a6 854B     		ldr	r3, .L155+8
 2038 01a8 1022     		movs	r2, #16
 2039 01aa 1A60     		str	r2, [r3]
 372:bluetooth_rxtx.c **** 		else
 373:bluetooth_rxtx.c **** 			RXLED_CLR;
 374:bluetooth_rxtx.c **** 		break;
 2040              		.loc 1 374 0
 2041 01ac 00F0C1BC 		b	.L111
 2042              	.L114:
 373:bluetooth_rxtx.c **** 		break;
 2043              		.loc 1 373 0
 2044 01b0 834B     		ldr	r3, .L155+12
 2045 01b2 1022     		movs	r2, #16
 2046 01b4 1A60     		str	r2, [r3]
 2047              		.loc 1 374 0
 2048 01b6 00F0BCBC 		b	.L111
 2049              	.L57:
 375:bluetooth_rxtx.c **** 
 376:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
ARM GAS  /tmp/ccSuvgbr.s 			page 42


 377:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2050              		.loc 1 377 0
 2051 01ba 7F4B     		ldr	r3, .L155+4
 2052 01bc 1B68     		ldr	r3, [r3]
 2053 01be 03F48073 		and	r3, r3, #256
 2054 01c2 002B     		cmp	r3, #0
 2055 01c4 14BF     		ite	ne
 2056 01c6 0123     		movne	r3, #1
 2057 01c8 0023     		moveq	r3, #0
 2058 01ca DBB2     		uxtb	r3, r3
 2059 01cc 1A46     		mov	r2, r3
 2060 01ce 7B68     		ldr	r3, [r7, #4]
 2061 01d0 1A70     		strb	r2, [r3]
 378:bluetooth_rxtx.c **** 		*data_len = 1;
 2062              		.loc 1 378 0
 2063 01d2 3B68     		ldr	r3, [r7]
 2064 01d4 0122     		movs	r2, #1
 2065 01d6 1A60     		str	r2, [r3]
 379:bluetooth_rxtx.c **** 		break;
 2066              		.loc 1 379 0
 2067 01d8 00F0ABBC 		b	.L111
 2068              	.L58:
 380:bluetooth_rxtx.c **** 
 381:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 382:bluetooth_rxtx.c **** 		if (request_params[0])
 2069              		.loc 1 382 0
 2070 01dc BB68     		ldr	r3, [r7, #8]
 2071 01de 1B88     		ldrh	r3, [r3]
 2072 01e0 002B     		cmp	r3, #0
 2073 01e2 05D0     		beq	.L116
 383:bluetooth_rxtx.c **** 			TXLED_SET;
 2074              		.loc 1 383 0
 2075 01e4 754B     		ldr	r3, .L155+8
 2076 01e6 4FF48072 		mov	r2, #256
 2077 01ea 1A60     		str	r2, [r3]
 384:bluetooth_rxtx.c **** 		else
 385:bluetooth_rxtx.c **** 			TXLED_CLR;
 386:bluetooth_rxtx.c **** 		break;
 2078              		.loc 1 386 0
 2079 01ec 00F0A1BC 		b	.L111
 2080              	.L116:
 385:bluetooth_rxtx.c **** 		break;
 2081              		.loc 1 385 0
 2082 01f0 734B     		ldr	r3, .L155+12
 2083 01f2 4FF48072 		mov	r2, #256
 2084 01f6 1A60     		str	r2, [r3]
 2085              		.loc 1 386 0
 2086 01f8 00F09BBC 		b	.L111
 2087              	.L59:
 387:bluetooth_rxtx.c **** 
 388:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 389:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2088              		.loc 1 389 0
 2089 01fc 6E4B     		ldr	r3, .L155+4
 2090 01fe 1B68     		ldr	r3, [r3]
 2091 0200 03F40073 		and	r3, r3, #512
 2092 0204 002B     		cmp	r3, #0
ARM GAS  /tmp/ccSuvgbr.s 			page 43


 2093 0206 14BF     		ite	ne
 2094 0208 0123     		movne	r3, #1
 2095 020a 0023     		moveq	r3, #0
 2096 020c DBB2     		uxtb	r3, r3
 2097 020e 1A46     		mov	r2, r3
 2098 0210 7B68     		ldr	r3, [r7, #4]
 2099 0212 1A70     		strb	r2, [r3]
 390:bluetooth_rxtx.c **** 		*data_len = 1;
 2100              		.loc 1 390 0
 2101 0214 3B68     		ldr	r3, [r7]
 2102 0216 0122     		movs	r2, #1
 2103 0218 1A60     		str	r2, [r3]
 391:bluetooth_rxtx.c **** 		break;
 2104              		.loc 1 391 0
 2105 021a 00F08ABC 		b	.L111
 2106              	.L60:
 392:bluetooth_rxtx.c **** 
 393:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 394:bluetooth_rxtx.c **** 		if (request_params[0])
 2107              		.loc 1 394 0
 2108 021e BB68     		ldr	r3, [r7, #8]
 2109 0220 1B88     		ldrh	r3, [r3]
 2110 0222 002B     		cmp	r3, #0
 2111 0224 05D0     		beq	.L118
 395:bluetooth_rxtx.c **** 			CC1V8_SET;
 2112              		.loc 1 395 0
 2113 0226 654B     		ldr	r3, .L155+8
 2114 0228 4FF40072 		mov	r2, #512
 2115 022c 1A60     		str	r2, [r3]
 396:bluetooth_rxtx.c **** 		else
 397:bluetooth_rxtx.c **** 			CC1V8_CLR;
 398:bluetooth_rxtx.c **** 		break;
 2116              		.loc 1 398 0
 2117 022e 00F080BC 		b	.L111
 2118              	.L118:
 397:bluetooth_rxtx.c **** 		break;
 2119              		.loc 1 397 0
 2120 0232 634B     		ldr	r3, .L155+12
 2121 0234 4FF40072 		mov	r2, #512
 2122 0238 1A60     		str	r2, [r3]
 2123              		.loc 1 398 0
 2124 023a 00F07ABC 		b	.L111
 2125              	.L65:
 399:bluetooth_rxtx.c **** 
 400:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 401:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2126              		.loc 1 401 0
 2127 023e 3623     		movs	r3, #54
 2128 0240 BB62     		str	r3, [r7, #40]
 402:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2129              		.loc 1 402 0
 2130 0242 604B     		ldr	r3, .L155+16
 2131 0244 1B68     		ldr	r3, [r3]
 2132 0246 07F12801 		add	r1, r7, #40
 2133 024a 07F11402 		add	r2, r7, #20
 2134 024e 0846     		mov	r0, r1
 2135 0250 1146     		mov	r1, r2
ARM GAS  /tmp/ccSuvgbr.s 			page 44


 2136 0252 9847     		blx	r3
 403:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2137              		.loc 1 403 0
 2138 0254 7B69     		ldr	r3, [r7, #20]
 2139 0256 DAB2     		uxtb	r2, r3
 2140 0258 7B68     		ldr	r3, [r7, #4]
 2141 025a 1A70     		strb	r2, [r3]
 404:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2142              		.loc 1 404 0
 2143 025c 7B68     		ldr	r3, [r7, #4]
 2144 025e 0133     		adds	r3, r3, #1
 2145 0260 BA69     		ldr	r2, [r7, #24]
 2146 0262 D2B2     		uxtb	r2, r2
 2147 0264 1A70     		strb	r2, [r3]
 405:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2148              		.loc 1 405 0
 2149 0266 7B68     		ldr	r3, [r7, #4]
 2150 0268 0233     		adds	r3, r3, #2
 2151 026a BA69     		ldr	r2, [r7, #24]
 2152 026c 120A     		lsrs	r2, r2, #8
 2153 026e D2B2     		uxtb	r2, r2
 2154 0270 1A70     		strb	r2, [r3]
 406:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2155              		.loc 1 406 0
 2156 0272 7B68     		ldr	r3, [r7, #4]
 2157 0274 0333     		adds	r3, r3, #3
 2158 0276 BA69     		ldr	r2, [r7, #24]
 2159 0278 120C     		lsrs	r2, r2, #16
 2160 027a D2B2     		uxtb	r2, r2
 2161 027c 1A70     		strb	r2, [r3]
 407:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2162              		.loc 1 407 0
 2163 027e 7B68     		ldr	r3, [r7, #4]
 2164 0280 0433     		adds	r3, r3, #4
 2165 0282 BA69     		ldr	r2, [r7, #24]
 2166 0284 120E     		lsrs	r2, r2, #24
 2167 0286 D2B2     		uxtb	r2, r2
 2168 0288 1A70     		strb	r2, [r3]
 408:bluetooth_rxtx.c **** 		*data_len = 5;
 2169              		.loc 1 408 0
 2170 028a 3B68     		ldr	r3, [r7]
 2171 028c 0522     		movs	r2, #5
 2172 028e 1A60     		str	r2, [r3]
 409:bluetooth_rxtx.c **** 		break;
 2173              		.loc 1 409 0
 2174 0290 00F04FBC 		b	.L111
 2175              	.L63:
 410:bluetooth_rxtx.c **** 
 411:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 412:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2176              		.loc 1 412 0
 2177 0294 474B     		ldr	r3, .L155
 2178 0296 0B22     		movs	r2, #11
 2179 0298 1A70     		strb	r2, [r3]
 413:bluetooth_rxtx.c **** 		break;
 2180              		.loc 1 413 0
 2181 029a 00F04ABC 		b	.L111
ARM GAS  /tmp/ccSuvgbr.s 			page 45


 2182              	.L64:
 414:bluetooth_rxtx.c **** 
 415:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 416:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2183              		.loc 1 416 0
 2184 029e 3A23     		movs	r3, #58
 2185 02a0 BB62     		str	r3, [r7, #40]
 417:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2186              		.loc 1 417 0
 2187 02a2 484B     		ldr	r3, .L155+16
 2188 02a4 1B68     		ldr	r3, [r3]
 2189 02a6 07F12801 		add	r1, r7, #40
 2190 02aa 07F11402 		add	r2, r7, #20
 2191 02ae 0846     		mov	r0, r1
 2192 02b0 1146     		mov	r1, r2
 2193 02b2 9847     		blx	r3
 418:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2194              		.loc 1 418 0
 2195 02b4 7B69     		ldr	r3, [r7, #20]
 2196 02b6 DAB2     		uxtb	r2, r3
 2197 02b8 7B68     		ldr	r3, [r7, #4]
 2198 02ba 1A70     		strb	r2, [r3]
 419:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2199              		.loc 1 419 0
 2200 02bc 7B68     		ldr	r3, [r7, #4]
 2201 02be 0133     		adds	r3, r3, #1
 2202 02c0 BA69     		ldr	r2, [r7, #24]
 2203 02c2 D2B2     		uxtb	r2, r2
 2204 02c4 1A70     		strb	r2, [r3]
 420:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2205              		.loc 1 420 0
 2206 02c6 7B68     		ldr	r3, [r7, #4]
 2207 02c8 0233     		adds	r3, r3, #2
 2208 02ca BA69     		ldr	r2, [r7, #24]
 2209 02cc 120A     		lsrs	r2, r2, #8
 2210 02ce D2B2     		uxtb	r2, r2
 2211 02d0 1A70     		strb	r2, [r3]
 421:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2212              		.loc 1 421 0
 2213 02d2 7B68     		ldr	r3, [r7, #4]
 2214 02d4 0333     		adds	r3, r3, #3
 2215 02d6 BA69     		ldr	r2, [r7, #24]
 2216 02d8 120C     		lsrs	r2, r2, #16
 2217 02da D2B2     		uxtb	r2, r2
 2218 02dc 1A70     		strb	r2, [r3]
 422:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2219              		.loc 1 422 0
 2220 02de 7B68     		ldr	r3, [r7, #4]
 2221 02e0 0433     		adds	r3, r3, #4
 2222 02e2 BA69     		ldr	r2, [r7, #24]
 2223 02e4 120E     		lsrs	r2, r2, #24
 2224 02e6 D2B2     		uxtb	r2, r2
 2225 02e8 1A70     		strb	r2, [r3]
 423:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2226              		.loc 1 423 0
 2227 02ea 7B68     		ldr	r3, [r7, #4]
 2228 02ec 0533     		adds	r3, r3, #5
ARM GAS  /tmp/ccSuvgbr.s 			page 46


 2229 02ee FA69     		ldr	r2, [r7, #28]
 2230 02f0 D2B2     		uxtb	r2, r2
 2231 02f2 1A70     		strb	r2, [r3]
 424:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2232              		.loc 1 424 0
 2233 02f4 7B68     		ldr	r3, [r7, #4]
 2234 02f6 0633     		adds	r3, r3, #6
 2235 02f8 FA69     		ldr	r2, [r7, #28]
 2236 02fa 120A     		lsrs	r2, r2, #8
 2237 02fc D2B2     		uxtb	r2, r2
 2238 02fe 1A70     		strb	r2, [r3]
 425:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2239              		.loc 1 425 0
 2240 0300 7B68     		ldr	r3, [r7, #4]
 2241 0302 0733     		adds	r3, r3, #7
 2242 0304 FA69     		ldr	r2, [r7, #28]
 2243 0306 120C     		lsrs	r2, r2, #16
 2244 0308 D2B2     		uxtb	r2, r2
 2245 030a 1A70     		strb	r2, [r3]
 426:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2246              		.loc 1 426 0
 2247 030c 7B68     		ldr	r3, [r7, #4]
 2248 030e 0833     		adds	r3, r3, #8
 2249 0310 FA69     		ldr	r2, [r7, #28]
 2250 0312 120E     		lsrs	r2, r2, #24
 2251 0314 D2B2     		uxtb	r2, r2
 2252 0316 1A70     		strb	r2, [r3]
 427:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2253              		.loc 1 427 0
 2254 0318 7B68     		ldr	r3, [r7, #4]
 2255 031a 0933     		adds	r3, r3, #9
 2256 031c 3A6A     		ldr	r2, [r7, #32]
 2257 031e D2B2     		uxtb	r2, r2
 2258 0320 1A70     		strb	r2, [r3]
 428:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2259              		.loc 1 428 0
 2260 0322 7B68     		ldr	r3, [r7, #4]
 2261 0324 0A33     		adds	r3, r3, #10
 2262 0326 3A6A     		ldr	r2, [r7, #32]
 2263 0328 120A     		lsrs	r2, r2, #8
 2264 032a D2B2     		uxtb	r2, r2
 2265 032c 1A70     		strb	r2, [r3]
 429:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2266              		.loc 1 429 0
 2267 032e 7B68     		ldr	r3, [r7, #4]
 2268 0330 0B33     		adds	r3, r3, #11
 2269 0332 3A6A     		ldr	r2, [r7, #32]
 2270 0334 120C     		lsrs	r2, r2, #16
 2271 0336 D2B2     		uxtb	r2, r2
 2272 0338 1A70     		strb	r2, [r3]
 430:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2273              		.loc 1 430 0
 2274 033a 7B68     		ldr	r3, [r7, #4]
 2275 033c 0C33     		adds	r3, r3, #12
 2276 033e 3A6A     		ldr	r2, [r7, #32]
 2277 0340 120E     		lsrs	r2, r2, #24
 2278 0342 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/ccSuvgbr.s 			page 47


 2279 0344 1A70     		strb	r2, [r3]
 431:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2280              		.loc 1 431 0
 2281 0346 7B68     		ldr	r3, [r7, #4]
 2282 0348 0D33     		adds	r3, r3, #13
 2283 034a 7A6A     		ldr	r2, [r7, #36]
 2284 034c D2B2     		uxtb	r2, r2
 2285 034e 1A70     		strb	r2, [r3]
 432:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2286              		.loc 1 432 0
 2287 0350 7B68     		ldr	r3, [r7, #4]
 2288 0352 0E33     		adds	r3, r3, #14
 2289 0354 7A6A     		ldr	r2, [r7, #36]
 2290 0356 120A     		lsrs	r2, r2, #8
 2291 0358 D2B2     		uxtb	r2, r2
 2292 035a 1A70     		strb	r2, [r3]
 433:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2293              		.loc 1 433 0
 2294 035c 7B68     		ldr	r3, [r7, #4]
 2295 035e 0F33     		adds	r3, r3, #15
 2296 0360 7A6A     		ldr	r2, [r7, #36]
 2297 0362 120C     		lsrs	r2, r2, #16
 2298 0364 D2B2     		uxtb	r2, r2
 2299 0366 1A70     		strb	r2, [r3]
 434:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2300              		.loc 1 434 0
 2301 0368 7B68     		ldr	r3, [r7, #4]
 2302 036a 1033     		adds	r3, r3, #16
 2303 036c 7A6A     		ldr	r2, [r7, #36]
 2304 036e 120E     		lsrs	r2, r2, #24
 2305 0370 D2B2     		uxtb	r2, r2
 2306 0372 1A70     		strb	r2, [r3]
 435:bluetooth_rxtx.c **** 		*data_len = 17;
 2307              		.loc 1 435 0
 2308 0374 3B68     		ldr	r3, [r7]
 2309 0376 1122     		movs	r2, #17
 2310 0378 1A60     		str	r2, [r3]
 436:bluetooth_rxtx.c **** 		break;
 2311              		.loc 1 436 0
 2312 037a DAE3     		b	.L111
 2313              	.L66:
 437:bluetooth_rxtx.c **** 
 438:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 439:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 440:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2314              		.loc 1 440 0
 2315 037c 124B     		ldr	r3, .L155+20
 2316 037e 1B68     		ldr	r3, [r3]
 2317 0380 03F08003 		and	r3, r3, #128
 2318 0384 002B     		cmp	r3, #0
 2319 0386 14BF     		ite	ne
 2320 0388 0123     		movne	r3, #1
 2321 038a 0023     		moveq	r3, #0
 2322 038c DBB2     		uxtb	r3, r3
 2323 038e 1A46     		mov	r2, r3
 2324 0390 7B68     		ldr	r3, [r7, #4]
 2325 0392 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 48


 441:bluetooth_rxtx.c **** 		*data_len = 1;
 2326              		.loc 1 441 0
 2327 0394 3B68     		ldr	r3, [r7]
 2328 0396 0122     		movs	r2, #1
 2329 0398 1A60     		str	r2, [r3]
 442:bluetooth_rxtx.c **** 		break;
 2330              		.loc 1 442 0
 2331 039a CAE3     		b	.L111
 2332              	.L67:
 443:bluetooth_rxtx.c **** 
 444:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 445:bluetooth_rxtx.c **** 		if (request_params[0])
 2333              		.loc 1 445 0
 2334 039c BB68     		ldr	r3, [r7, #8]
 2335 039e 1B88     		ldrh	r3, [r3]
 2336 03a0 002B     		cmp	r3, #0
 2337 03a2 03D0     		beq	.L120
 446:bluetooth_rxtx.c **** 			PAEN_SET;
 2338              		.loc 1 446 0
 2339 03a4 094B     		ldr	r3, .L155+24
 2340 03a6 8022     		movs	r2, #128
 2341 03a8 1A60     		str	r2, [r3]
 447:bluetooth_rxtx.c **** 		else
 448:bluetooth_rxtx.c **** 			PAEN_CLR;
 449:bluetooth_rxtx.c **** 		break;
 2342              		.loc 1 449 0
 2343 03aa C2E3     		b	.L111
 2344              	.L120:
 448:bluetooth_rxtx.c **** 		break;
 2345              		.loc 1 448 0
 2346 03ac 084B     		ldr	r3, .L155+28
 2347 03ae 8022     		movs	r2, #128
 2348 03b0 1A60     		str	r2, [r3]
 2349              		.loc 1 449 0
 2350 03b2 BEE3     		b	.L111
 2351              	.L156:
 2352              		.align	2
 2353              	.L155:
 2354 03b4 00000000 		.word	requested_mode
 2355 03b8 34C00920 		.word	537509940
 2356 03bc 38C00920 		.word	537509944
 2357 03c0 3CC00920 		.word	537509948
 2358 03c4 00000000 		.word	iap_entry
 2359 03c8 54C00920 		.word	537509972
 2360 03cc 58C00920 		.word	537509976
 2361 03d0 5CC00920 		.word	537509980
 2362              	.L68:
 450:bluetooth_rxtx.c **** 
 451:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 452:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2363              		.loc 1 452 0
 2364 03d4 924B     		ldr	r3, .L157
 2365 03d6 1B68     		ldr	r3, [r3]
 2366 03d8 03F48073 		and	r3, r3, #256
 2367 03dc 002B     		cmp	r3, #0
 2368 03de 14BF     		ite	ne
 2369 03e0 0123     		movne	r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 49


 2370 03e2 0023     		moveq	r3, #0
 2371 03e4 DBB2     		uxtb	r3, r3
 2372 03e6 1A46     		mov	r2, r3
 2373 03e8 7B68     		ldr	r3, [r7, #4]
 2374 03ea 1A70     		strb	r2, [r3]
 453:bluetooth_rxtx.c **** 		*data_len = 1;
 2375              		.loc 1 453 0
 2376 03ec 3B68     		ldr	r3, [r7]
 2377 03ee 0122     		movs	r2, #1
 2378 03f0 1A60     		str	r2, [r3]
 454:bluetooth_rxtx.c **** 		break;
 2379              		.loc 1 454 0
 2380 03f2 9EE3     		b	.L111
 2381              	.L69:
 455:bluetooth_rxtx.c **** 
 456:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 457:bluetooth_rxtx.c **** 		if (request_params[0])
 2382              		.loc 1 457 0
 2383 03f4 BB68     		ldr	r3, [r7, #8]
 2384 03f6 1B88     		ldrh	r3, [r3]
 2385 03f8 002B     		cmp	r3, #0
 2386 03fa 04D0     		beq	.L122
 458:bluetooth_rxtx.c **** 			HGM_SET;
 2387              		.loc 1 458 0
 2388 03fc 894B     		ldr	r3, .L157+4
 2389 03fe 4FF48072 		mov	r2, #256
 2390 0402 1A60     		str	r2, [r3]
 459:bluetooth_rxtx.c **** 		else
 460:bluetooth_rxtx.c **** 			HGM_CLR;
 461:bluetooth_rxtx.c **** 		break;
 2391              		.loc 1 461 0
 2392 0404 95E3     		b	.L111
 2393              	.L122:
 460:bluetooth_rxtx.c **** 		break;
 2394              		.loc 1 460 0
 2395 0406 884B     		ldr	r3, .L157+8
 2396 0408 4FF48072 		mov	r2, #256
 2397 040c 1A60     		str	r2, [r3]
 2398              		.loc 1 461 0
 2399 040e 90E3     		b	.L111
 2400              	.L70:
 462:bluetooth_rxtx.c **** #endif
 463:bluetooth_rxtx.c **** 
 464:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 465:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 466:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2401              		.loc 1 466 0
 2402 0410 864B     		ldr	r3, .L157+12
 2403 0412 0322     		movs	r2, #3
 2404 0414 1A70     		strb	r2, [r3]
 467:bluetooth_rxtx.c **** 		break;
 2405              		.loc 1 467 0
 2406 0416 8CE3     		b	.L111
 2407              	.L77:
 468:bluetooth_rxtx.c **** 
 469:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 470:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
ARM GAS  /tmp/ccSuvgbr.s 			page 50


 2408              		.loc 1 470 0
 2409 0418 0520     		movs	r0, #5
 2410 041a FFF7FEFF 		bl	cc2400_get
 2411 041e 0346     		mov	r3, r0
 2412 0420 DBB2     		uxtb	r3, r3
 2413 0422 03F00703 		and	r3, r3, #7
 2414 0426 DAB2     		uxtb	r2, r3
 2415 0428 7B68     		ldr	r3, [r7, #4]
 2416 042a 1A70     		strb	r2, [r3]
 471:bluetooth_rxtx.c **** 		*data_len = 1;
 2417              		.loc 1 471 0
 2418 042c 3B68     		ldr	r3, [r7]
 2419 042e 0122     		movs	r2, #1
 2420 0430 1A60     		str	r2, [r3]
 472:bluetooth_rxtx.c **** 		break;
 2421              		.loc 1 472 0
 2422 0432 7EE3     		b	.L111
 2423              	.L78:
 473:bluetooth_rxtx.c **** 
 474:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 475:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2424              		.loc 1 475 0
 2425 0434 BB68     		ldr	r3, [r7, #8]
 2426 0436 1B88     		ldrh	r3, [r3]
 2427 0438 072B     		cmp	r3, #7
 2428 043a 09D8     		bhi	.L124
 476:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2429              		.loc 1 476 0
 2430 043c BB68     		ldr	r3, [r7, #8]
 2431 043e 1B88     		ldrh	r3, [r3]
 2432 0440 43F00803 		orr	r3, r3, #8
 2433 0444 9BB2     		uxth	r3, r3
 2434 0446 0520     		movs	r0, #5
 2435 0448 1946     		mov	r1, r3
 2436 044a FFF7FEFF 		bl	cc2400_set
 477:bluetooth_rxtx.c **** 		} else {
 478:bluetooth_rxtx.c **** 			return 0;
 479:bluetooth_rxtx.c **** 		}
 480:bluetooth_rxtx.c **** 		break;
 2437              		.loc 1 480 0
 2438 044e 70E3     		b	.L111
 2439              	.L124:
 478:bluetooth_rxtx.c **** 		}
 2440              		.loc 1 478 0
 2441 0450 0023     		movs	r3, #0
 2442 0452 6FE3     		b	.L153
 2443              	.L80:
 481:bluetooth_rxtx.c **** 
 482:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 483:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2444              		.loc 1 483 0
 2445 0454 754B     		ldr	r3, .L157+12
 2446 0456 0522     		movs	r2, #5
 2447 0458 1A70     		strb	r2, [r3]
 484:bluetooth_rxtx.c **** 		break;
 2448              		.loc 1 484 0
 2449 045a 6AE3     		b	.L111
ARM GAS  /tmp/ccSuvgbr.s 			page 51


 2450              	.L79:
 485:bluetooth_rxtx.c **** 
 486:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 487:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2451              		.loc 1 487 0
 2452 045c 734B     		ldr	r3, .L157+12
 2453 045e 0622     		movs	r2, #6
 2454 0460 1A70     		strb	r2, [r3]
 488:bluetooth_rxtx.c **** 		break;
 2455              		.loc 1 488 0
 2456 0462 66E3     		b	.L111
 2457              	.L81:
 489:bluetooth_rxtx.c **** #endif
 490:bluetooth_rxtx.c **** 
 491:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 492:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2458              		.loc 1 492 0
 2459 0464 724B     		ldr	r3, .L157+16
 2460 0466 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2461 0468 7B68     		ldr	r3, [r7, #4]
 2462 046a 1A70     		strb	r2, [r3]
 493:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2463              		.loc 1 493 0
 2464 046c 7B68     		ldr	r3, [r7, #4]
 2465 046e 0133     		adds	r3, r3, #1
 2466 0470 6F4A     		ldr	r2, .L157+16
 2467 0472 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2468 0474 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2469              		.loc 1 494 0
 2470 0476 7B68     		ldr	r3, [r7, #4]
 2471 0478 0233     		adds	r3, r3, #2
 2472 047a 6D4A     		ldr	r2, .L157+16
 2473 047c 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2474 047e 1A70     		strb	r2, [r3]
 495:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2475              		.loc 1 495 0
 2476 0480 7B68     		ldr	r3, [r7, #4]
 2477 0482 0333     		adds	r3, r3, #3
 2478 0484 6A4A     		ldr	r2, .L157+16
 2479 0486 D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2480 0488 1A70     		strb	r2, [r3]
 496:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2481              		.loc 1 496 0
 2482 048a 7B68     		ldr	r3, [r7, #4]
 2483 048c 0433     		adds	r3, r3, #4
 2484 048e 684A     		ldr	r2, .L157+16
 2485 0490 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2486 0492 1A70     		strb	r2, [r3]
 497:bluetooth_rxtx.c **** 		*data_len = 5;
 2487              		.loc 1 497 0
 2488 0494 3B68     		ldr	r3, [r7]
 2489 0496 0522     		movs	r2, #5
 2490 0498 1A60     		str	r2, [r3]
 498:bluetooth_rxtx.c **** 		break;
 2491              		.loc 1 498 0
 2492 049a 4AE3     		b	.L111
ARM GAS  /tmp/ccSuvgbr.s 			page 52


 2493              	.L71:
 499:bluetooth_rxtx.c **** 
 500:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 501:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2494              		.loc 1 501 0
 2495 049c 634B     		ldr	r3, .L157+12
 2496 049e 0022     		movs	r2, #0
 2497 04a0 1A70     		strb	r2, [r3]
 502:bluetooth_rxtx.c **** 		break;
 2498              		.loc 1 502 0
 2499 04a2 46E3     		b	.L111
 2500              	.L72:
 503:bluetooth_rxtx.c **** 
 504:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 505:bluetooth_rxtx.c **** 		data[0] = modulation;
 2501              		.loc 1 505 0
 2502 04a4 634B     		ldr	r3, .L157+20
 2503 04a6 1B78     		ldrb	r3, [r3]
 2504 04a8 DAB2     		uxtb	r2, r3
 2505 04aa 7B68     		ldr	r3, [r7, #4]
 2506 04ac 1A70     		strb	r2, [r3]
 506:bluetooth_rxtx.c **** 		*data_len = 1;
 2507              		.loc 1 506 0
 2508 04ae 3B68     		ldr	r3, [r7]
 2509 04b0 0122     		movs	r2, #1
 2510 04b2 1A60     		str	r2, [r3]
 507:bluetooth_rxtx.c **** 		break;
 2511              		.loc 1 507 0
 2512 04b4 3DE3     		b	.L111
 2513              	.L73:
 508:bluetooth_rxtx.c **** 
 509:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 510:bluetooth_rxtx.c **** 		modulation = request_params[0];
 2514              		.loc 1 510 0
 2515 04b6 BB68     		ldr	r3, [r7, #8]
 2516 04b8 1B88     		ldrh	r3, [r3]
 2517 04ba DAB2     		uxtb	r2, r3
 2518 04bc 5D4B     		ldr	r3, .L157+20
 2519 04be 1A70     		strb	r2, [r3]
 511:bluetooth_rxtx.c **** 		break;
 2520              		.loc 1 511 0
 2521 04c0 37E3     		b	.L111
 2522              	.L61:
 512:bluetooth_rxtx.c **** 
 513:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 514:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 2523              		.loc 1 514 0
 2524 04c2 5D4B     		ldr	r3, .L157+24
 2525 04c4 1B88     		ldrh	r3, [r3]	@ movhi
 2526 04c6 9BB2     		uxth	r3, r3
 2527 04c8 DAB2     		uxtb	r2, r3
 2528 04ca 7B68     		ldr	r3, [r7, #4]
 2529 04cc 1A70     		strb	r2, [r3]
 515:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 2530              		.loc 1 515 0
 2531 04ce 7B68     		ldr	r3, [r7, #4]
 2532 04d0 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 53


 2533 04d2 594A     		ldr	r2, .L157+24
 2534 04d4 1288     		ldrh	r2, [r2]	@ movhi
 2535 04d6 92B2     		uxth	r2, r2
 2536 04d8 120A     		lsrs	r2, r2, #8
 2537 04da 92B2     		uxth	r2, r2
 2538 04dc D2B2     		uxtb	r2, r2
 2539 04de 1A70     		strb	r2, [r3]
 516:bluetooth_rxtx.c **** 		*data_len = 2;
 2540              		.loc 1 516 0
 2541 04e0 3B68     		ldr	r3, [r7]
 2542 04e2 0222     		movs	r2, #2
 2543 04e4 1A60     		str	r2, [r3]
 517:bluetooth_rxtx.c **** 		break;
 2544              		.loc 1 517 0
 2545 04e6 24E3     		b	.L111
 2546              	.L62:
 518:bluetooth_rxtx.c **** 
 519:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 520:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2547              		.loc 1 520 0
 2548 04e8 BB68     		ldr	r3, [r7, #8]
 2549 04ea 1A88     		ldrh	r2, [r3]
 2550 04ec 534B     		ldr	r3, .L157+28
 2551 04ee 1A80     		strh	r2, [r3]	@ movhi
 521:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 522:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 2552              		.loc 1 522 0
 2553 04f0 524B     		ldr	r3, .L157+28
 2554 04f2 1B88     		ldrh	r3, [r3]	@ movhi
 2555 04f4 9BB2     		uxth	r3, r3
 2556 04f6 40F6EA22 		movw	r2, #2794
 2557 04fa 9342     		cmp	r3, r2
 2558 04fc 07D9     		bls	.L127
 523:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 2559              		.loc 1 523 0
 2560 04fe 504B     		ldr	r3, .L157+32
 2561 0500 0122     		movs	r2, #1
 2562 0502 1A70     		strb	r2, [r3]
 524:bluetooth_rxtx.c **** 			requested_channel = 2402;
 2563              		.loc 1 524 0
 2564 0504 4D4B     		ldr	r3, .L157+28
 2565 0506 40F66212 		movw	r2, #2402
 2566 050a 1A80     		strh	r2, [r3]	@ movhi
 2567 050c 20E0     		b	.L128
 2568              	.L127:
 525:bluetooth_rxtx.c **** 		}
 526:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 527:bluetooth_rxtx.c **** 		else {
 528:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 2569              		.loc 1 528 0
 2570 050e 4C4B     		ldr	r3, .L157+32
 2571 0510 0022     		movs	r2, #0
 2572 0512 1A70     		strb	r2, [r3]
 529:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 2573              		.loc 1 529 0
 2574 0514 494B     		ldr	r3, .L157+28
 2575 0516 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccSuvgbr.s 			page 54


 2576 0518 9BB2     		uxth	r3, r3
 2577 051a 40F6DC02 		movw	r2, #2268
 2578 051e 9342     		cmp	r3, r2
 2579 0520 03D9     		bls	.L129
 2580              		.loc 1 529 0 is_stmt 0 discriminator 1
 2581 0522 464B     		ldr	r3, .L157+28
 2582 0524 1B88     		ldrh	r3, [r3]	@ movhi
 2583 0526 9BB2     		uxth	r3, r3
 2584 0528 01E0     		b	.L130
 2585              	.L129:
 2586              		.loc 1 529 0 discriminator 2
 2587 052a 40F6DC03 		movw	r3, #2268
 2588              	.L130:
 2589              		.loc 1 529 0 discriminator 4
 2590 052e 434A     		ldr	r2, .L157+28
 2591 0530 1380     		strh	r3, [r2]	@ movhi
 530:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 2592              		.loc 1 530 0 is_stmt 1 discriminator 4
 2593 0532 424B     		ldr	r3, .L157+28
 2594 0534 1B88     		ldrh	r3, [r3]	@ movhi
 2595 0536 9BB2     		uxth	r3, r3
 2596 0538 40F6E922 		movw	r2, #2793
 2597 053c 9342     		cmp	r3, r2
 2598 053e 03D8     		bhi	.L131
 2599              		.loc 1 530 0 is_stmt 0 discriminator 1
 2600 0540 3E4B     		ldr	r3, .L157+28
 2601 0542 1B88     		ldrh	r3, [r3]	@ movhi
 2602 0544 9BB2     		uxth	r3, r3
 2603 0546 01E0     		b	.L132
 2604              	.L131:
 2605              		.loc 1 530 0 discriminator 2
 2606 0548 40F6EA23 		movw	r3, #2794
 2607              	.L132:
 2608              		.loc 1 530 0 discriminator 4
 2609 054c 3B4A     		ldr	r2, .L157+28
 2610 054e 1380     		strh	r3, [r2]	@ movhi
 2611              	.L128:
 531:bluetooth_rxtx.c **** 		}
 532:bluetooth_rxtx.c **** 
 533:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 2612              		.loc 1 533 0 is_stmt 1
 2613 0550 3C4B     		ldr	r3, .L157+36
 2614 0552 1B78     		ldrb	r3, [r3]
 2615 0554 DBB2     		uxtb	r3, r3
 2616 0556 092B     		cmp	r3, #9
 2617 0558 0AD0     		beq	.L133
 534:bluetooth_rxtx.c **** 			channel = requested_channel;
 2618              		.loc 1 534 0
 2619 055a 384B     		ldr	r3, .L157+28
 2620 055c 1B88     		ldrh	r3, [r3]	@ movhi
 2621 055e 9AB2     		uxth	r2, r3
 2622 0560 354B     		ldr	r3, .L157+24
 2623 0562 1A80     		strh	r2, [r3]	@ movhi
 535:bluetooth_rxtx.c **** 			requested_channel = 0;
 2624              		.loc 1 535 0
 2625 0564 354B     		ldr	r3, .L157+28
 2626 0566 0022     		movs	r2, #0
ARM GAS  /tmp/ccSuvgbr.s 			page 55


 2627 0568 1A80     		strh	r2, [r3]	@ movhi
 536:bluetooth_rxtx.c **** 
 537:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 538:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 539:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 2628              		.loc 1 539 0
 2629 056a FFF7FEFF 		bl	cs_threshold_calc_and_set
 540:bluetooth_rxtx.c **** 		}
 541:bluetooth_rxtx.c **** 		break;
 2630              		.loc 1 541 0
 2631 056e E0E2     		b	.L111
 2632              	.L133:
 2633 0570 DFE2     		b	.L111
 2634              	.L74:
 542:bluetooth_rxtx.c **** 
 543:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 544:bluetooth_rxtx.c **** 		command[0] = 57;
 2635              		.loc 1 544 0
 2636 0572 3923     		movs	r3, #57
 2637 0574 BB62     		str	r3, [r7, #40]
 545:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2638              		.loc 1 545 0
 2639 0576 344B     		ldr	r3, .L157+40
 2640 0578 1B68     		ldr	r3, [r3]
 2641 057a 07F12801 		add	r1, r7, #40
 2642 057e 07F11402 		add	r2, r7, #20
 2643 0582 0846     		mov	r0, r1
 2644 0584 1146     		mov	r1, r2
 2645 0586 9847     		blx	r3
 546:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 2646              		.loc 1 546 0
 2647 0588 3B68     		ldr	r3, [r7]
 2648 058a 0022     		movs	r2, #0
 2649 058c 1A60     		str	r2, [r3]
 547:bluetooth_rxtx.c **** 		break;
 2650              		.loc 1 547 0
 2651 058e D0E2     		b	.L111
 2652              	.L75:
 548:bluetooth_rxtx.c **** 
 549:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 550:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 2653              		.loc 1 550 0
 2654 0590 2E4B     		ldr	r3, .L157+44
 2655 0592 2F4A     		ldr	r2, .L157+48
 2656 0594 1A60     		str	r2, [r3]
 551:bluetooth_rxtx.c **** 		reset();
 2657              		.loc 1 551 0
 2658 0596 FFF7FEFF 		bl	reset
 552:bluetooth_rxtx.c **** 		break;
 2659              		.loc 1 552 0
 2660 059a CAE2     		b	.L111
 2661              	.L76:
 553:bluetooth_rxtx.c **** 
 554:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 555:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 ||
 2662              		.loc 1 555 0
 2663 059c BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccSuvgbr.s 			page 56


 2664 059e 1B88     		ldrh	r3, [r3]
 2665 05a0 B3F5006F 		cmp	r3, #2048
 2666 05a4 17D9     		bls	.L134
 2667              		.loc 1 555 0 is_stmt 0 discriminator 1
 2668 05a6 BB68     		ldr	r3, [r7, #8]
 2669 05a8 1B88     		ldrh	r3, [r3]
 2670 05aa B3F5406F 		cmp	r3, #3072
 2671 05ae 12D8     		bhi	.L134
 556:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2672              		.loc 1 556 0 is_stmt 1 discriminator 2
 2673 05b0 BB68     		ldr	r3, [r7, #8]
 2674 05b2 0233     		adds	r3, r3, #2
 2675 05b4 1B88     		ldrh	r3, [r3]
 555:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2676              		.loc 1 555 0 discriminator 2
 2677 05b6 B3F5006F 		cmp	r3, #2048
 2678 05ba 0CD9     		bls	.L134
 2679              		.loc 1 556 0
 2680 05bc BB68     		ldr	r3, [r7, #8]
 2681 05be 0233     		adds	r3, r3, #2
 2682 05c0 1B88     		ldrh	r3, [r3]
 2683 05c2 B3F5406F 		cmp	r3, #3072
 2684 05c6 06D8     		bhi	.L134
 557:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 2685              		.loc 1 557 0 discriminator 1
 2686 05c8 BB68     		ldr	r3, [r7, #8]
 2687 05ca 0233     		adds	r3, r3, #2
 2688 05cc 1A88     		ldrh	r2, [r3]
 2689 05ce BB68     		ldr	r3, [r7, #8]
 2690 05d0 1B88     		ldrh	r3, [r3]
 556:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2691              		.loc 1 556 0 discriminator 1
 2692 05d2 9A42     		cmp	r2, r3
 2693 05d4 01D2     		bcs	.L135
 2694              	.L134:
 558:bluetooth_rxtx.c **** 			return 0;
 2695              		.loc 1 558 0
 2696 05d6 0023     		movs	r3, #0
 2697 05d8 ACE2     		b	.L153
 2698              	.L135:
 559:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 2699              		.loc 1 559 0
 2700 05da BB68     		ldr	r3, [r7, #8]
 2701 05dc 1A88     		ldrh	r2, [r3]
 2702 05de 1D4B     		ldr	r3, .L157+52
 2703 05e0 1A80     		strh	r2, [r3]	@ movhi
 560:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2704              		.loc 1 560 0
 2705 05e2 BB68     		ldr	r3, [r7, #8]
 2706 05e4 5A88     		ldrh	r2, [r3, #2]
 2707 05e6 1C4B     		ldr	r3, .L157+56
 2708 05e8 1A80     		strh	r2, [r3]	@ movhi
 561:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2709              		.loc 1 561 0
 2710 05ea 104B     		ldr	r3, .L157+12
 2711 05ec 0422     		movs	r2, #4
 2712 05ee 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 57


 562:bluetooth_rxtx.c **** 		*data_len = 0;
 2713              		.loc 1 562 0
 2714 05f0 3B68     		ldr	r3, [r7]
 2715 05f2 0022     		movs	r2, #0
 2716 05f4 1A60     		str	r2, [r3]
 563:bluetooth_rxtx.c **** 		break;
 2717              		.loc 1 563 0
 2718 05f6 9CE2     		b	.L111
 2719              	.L83:
 564:bluetooth_rxtx.c **** 
 565:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 566:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 2720              		.loc 1 566 0
 2721 05f8 BB68     		ldr	r3, [r7, #8]
 2722 05fa 1B88     		ldrh	r3, [r3]
 2723 05fc B3F5807F 		cmp	r3, #256
 2724 0600 01D9     		bls	.L136
 567:bluetooth_rxtx.c **** 			return 0;
 2725              		.loc 1 567 0
 2726 0602 0023     		movs	r3, #0
 2727 0604 96E2     		b	.L153
 2728              	.L136:
 568:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 2729              		.loc 1 568 0
 2730 0606 BB68     		ldr	r3, [r7, #8]
 2731 0608 1B88     		ldrh	r3, [r3]
 2732 060a DAB2     		uxtb	r2, r3
 2733 060c 134B     		ldr	r3, .L157+60
 2734 060e 1A70     		strb	r2, [r3]
 569:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2735              		.loc 1 569 0
 2736 0610 064B     		ldr	r3, .L157+12
 2737 0612 0722     		movs	r2, #7
 2738 0614 1A70     		strb	r2, [r3]
 570:bluetooth_rxtx.c **** 		*data_len = 0;
 2739              		.loc 1 570 0
 2740 0616 3B68     		ldr	r3, [r7]
 2741 0618 0022     		movs	r2, #0
 2742 061a 1A60     		str	r2, [r3]
 571:bluetooth_rxtx.c **** 		break;
 2743              		.loc 1 571 0
 2744 061c 89E2     		b	.L111
 2745              	.L158:
 2746 061e 00BF     		.align	2
 2747              	.L157:
 2748 0620 54C00920 		.word	537509972
 2749 0624 58C00920 		.word	537509976
 2750 0628 5CC00920 		.word	537509980
 2751 062c 00000000 		.word	requested_mode
 2752 0630 00000000 		.word	rr
 2753 0634 00000000 		.word	modulation
 2754 0638 00000000 		.word	channel
 2755 063c 00000000 		.word	requested_channel
 2756 0640 00000000 		.word	hop_mode
 2757 0644 00000000 		.word	mode
 2758 0648 00000000 		.word	iap_entry
 2759 064c 00000000 		.word	bootloader_ctrl
ARM GAS  /tmp/ccSuvgbr.s 			page 58


 2760 0650 21BB0543 		.word	1124449057
 2761 0654 00000000 		.word	low_freq
 2762 0658 00000000 		.word	high_freq
 2763 065c 00000000 		.word	rssi_threshold
 2764              	.L82:
 572:bluetooth_rxtx.c **** 
 573:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 574:bluetooth_rxtx.c **** 		data[0] = 0x00;
 2765              		.loc 1 574 0
 2766 0660 7B68     		ldr	r3, [r7, #4]
 2767 0662 0022     		movs	r2, #0
 2768 0664 1A70     		strb	r2, [r3]
 575:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2769              		.loc 1 575 0
 2770 0666 7B68     		ldr	r3, [r7, #4]
 2771 0668 0133     		adds	r3, r3, #1
 2772 066a 0022     		movs	r2, #0
 2773 066c 1A70     		strb	r2, [r3]
 576:bluetooth_rxtx.c **** 
 577:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 2774              		.loc 1 577 0
 2775 066e A748     		ldr	r0, .L159
 2776 0670 FFF7FEFF 		bl	strlen
 2777 0674 0346     		mov	r3, r0
 2778 0676 87F84730 		strb	r3, [r7, #71]
 578:bluetooth_rxtx.c **** 		data[2] = length;
 2779              		.loc 1 578 0
 2780 067a 7B68     		ldr	r3, [r7, #4]
 2781 067c 0233     		adds	r3, r3, #2
 2782 067e 97F84720 		ldrb	r2, [r7, #71]
 2783 0682 1A70     		strb	r2, [r3]
 579:bluetooth_rxtx.c **** 
 580:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 2784              		.loc 1 580 0
 2785 0684 7B68     		ldr	r3, [r7, #4]
 2786 0686 DA1C     		adds	r2, r3, #3
 2787 0688 97F84730 		ldrb	r3, [r7, #71]	@ zero_extendqisi2
 2788 068c 1046     		mov	r0, r2
 2789 068e 9F49     		ldr	r1, .L159
 2790 0690 1A46     		mov	r2, r3
 2791 0692 FFF7FEFF 		bl	memcpy
 581:bluetooth_rxtx.c **** 
 582:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 2792              		.loc 1 582 0
 2793 0696 97F84730 		ldrb	r3, [r7, #71]	@ zero_extendqisi2
 2794 069a DA1C     		adds	r2, r3, #3
 2795 069c 3B68     		ldr	r3, [r7]
 2796 069e 1A60     		str	r2, [r3]
 583:bluetooth_rxtx.c **** 		break;
 2797              		.loc 1 583 0
 2798 06a0 47E2     		b	.L111
 2799              	.L104:
 584:bluetooth_rxtx.c **** 
 585:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 586:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 2800              		.loc 1 586 0
 2801 06a2 9B48     		ldr	r0, .L159+4
ARM GAS  /tmp/ccSuvgbr.s 			page 59


 2802 06a4 FFF7FEFF 		bl	strlen
 2803 06a8 0346     		mov	r3, r0
 2804 06aa 87F84730 		strb	r3, [r7, #71]
 587:bluetooth_rxtx.c **** 		data[0] = length;
 2805              		.loc 1 587 0
 2806 06ae 7B68     		ldr	r3, [r7, #4]
 2807 06b0 97F84720 		ldrb	r2, [r7, #71]
 2808 06b4 1A70     		strb	r2, [r3]
 588:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 2809              		.loc 1 588 0
 2810 06b6 7B68     		ldr	r3, [r7, #4]
 2811 06b8 5A1C     		adds	r2, r3, #1
 2812 06ba 97F84730 		ldrb	r3, [r7, #71]	@ zero_extendqisi2
 2813 06be 1046     		mov	r0, r2
 2814 06c0 9349     		ldr	r1, .L159+4
 2815 06c2 1A46     		mov	r2, r3
 2816 06c4 FFF7FEFF 		bl	memcpy
 589:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 2817              		.loc 1 589 0
 2818 06c8 97F84730 		ldrb	r3, [r7, #71]	@ zero_extendqisi2
 2819 06cc 5A1C     		adds	r2, r3, #1
 2820 06ce 3B68     		ldr	r3, [r7]
 2821 06d0 1A60     		str	r2, [r3]
 590:bluetooth_rxtx.c **** 		break;
 2822              		.loc 1 590 0
 2823 06d2 2EE2     		b	.L111
 2824              	.L84:
 591:bluetooth_rxtx.c **** 
 592:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 593:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 2825              		.loc 1 593 0
 2826 06d4 7B68     		ldr	r3, [r7, #4]
 2827 06d6 0122     		movs	r2, #1
 2828 06d8 1A70     		strb	r2, [r3]
 594:bluetooth_rxtx.c **** 		*data_len = 1;
 2829              		.loc 1 594 0
 2830 06da 3B68     		ldr	r3, [r7]
 2831 06dc 0122     		movs	r2, #1
 2832 06de 1A60     		str	r2, [r3]
 595:bluetooth_rxtx.c **** 		break;
 2833              		.loc 1 595 0
 2834 06e0 27E2     		b	.L111
 2835              	.L85:
 596:bluetooth_rxtx.c **** 
 597:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 598:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 2836              		.loc 1 598 0
 2837 06e2 BB68     		ldr	r3, [r7, #8]
 2838 06e4 1B88     		ldrh	r3, [r3]
 2839 06e6 DAB2     		uxtb	r2, r3
 2840 06e8 8A4B     		ldr	r3, .L159+8
 2841 06ea 1A70     		strb	r2, [r3]
 599:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 2842              		.loc 1 599 0
 2843 06ec FFF7FEFF 		bl	cs_threshold_calc_and_set
 600:bluetooth_rxtx.c **** 		break;
 2844              		.loc 1 600 0
ARM GAS  /tmp/ccSuvgbr.s 			page 60


 2845 06f0 1FE2     		b	.L111
 2846              	.L86:
 601:bluetooth_rxtx.c **** 
 602:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 603:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 2847              		.loc 1 603 0
 2848 06f2 884B     		ldr	r3, .L159+8
 2849 06f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2850 06f6 DAB2     		uxtb	r2, r3
 2851 06f8 7B68     		ldr	r3, [r7, #4]
 2852 06fa 1A70     		strb	r2, [r3]
 604:bluetooth_rxtx.c **** 		*data_len = 1;
 2853              		.loc 1 604 0
 2854 06fc 3B68     		ldr	r3, [r7]
 2855 06fe 0122     		movs	r2, #1
 2856 0700 1A60     		str	r2, [r3]
 605:bluetooth_rxtx.c **** 		break;
 2857              		.loc 1 605 0
 2858 0702 16E2     		b	.L111
 2859              	.L87:
 606:bluetooth_rxtx.c **** 
 607:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 608:bluetooth_rxtx.c **** 		target.address = 0;
 2860              		.loc 1 608 0
 2861 0704 8449     		ldr	r1, .L159+12
 2862 0706 4FF00002 		mov	r2, #0
 2863 070a 4FF00003 		mov	r3, #0
 2864 070e C1E90023 		strd	r2, [r1]
 609:bluetooth_rxtx.c **** 		target.access_code = 0;
 2865              		.loc 1 609 0
 2866 0712 8149     		ldr	r1, .L159+12
 2867 0714 4FF00002 		mov	r2, #0
 2868 0718 4FF00003 		mov	r3, #0
 2869 071c C1E90223 		strd	r2, [r1, #8]
 2870              	.LBB3:
 610:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 2871              		.loc 1 610 0
 2872 0720 0023     		movs	r3, #0
 2873 0722 7B66     		str	r3, [r7, #100]
 2874 0724 25E0     		b	.L137
 2875              	.L138:
 611:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 2876              		.loc 1 611 0 discriminator 3
 2877 0726 7C4B     		ldr	r3, .L159+12
 2878 0728 D3E900AB 		ldrd	r10, [r3]
 2879 072c 7B6E     		ldr	r3, [r7, #100]
 2880 072e 7A68     		ldr	r2, [r7, #4]
 2881 0730 1344     		add	r3, r3, r2
 2882 0732 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2883 0734 DAB2     		uxtb	r2, r3
 2884 0736 4FF00003 		mov	r3, #0
 2885 073a 796E     		ldr	r1, [r7, #100]
 2886 073c C900     		lsls	r1, r1, #3
 2887 073e A1F12006 		sub	r6, r1, #32
 2888 0742 C1F12000 		rsb	r0, r1, #32
 2889 0746 03FA01F9 		lsl	r9, r3, r1
 2890 074a 02FA06F6 		lsl	r6, r2, r6
ARM GAS  /tmp/ccSuvgbr.s 			page 61


 2891 074e 49EA0609 		orr	r9, r9, r6
 2892 0752 22FA00F0 		lsr	r0, r2, r0
 2893 0756 49EA0009 		orr	r9, r9, r0
 2894 075a 02FA01F8 		lsl	r8, r2, r1
 2895 075e 4AEA0802 		orr	r2, r10, r8
 2896 0762 4BEA0903 		orr	r3, fp, r9
 2897 0766 6C49     		ldr	r1, .L159+12
 2898 0768 C1E90023 		strd	r2, [r1]
 610:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 2899              		.loc 1 610 0 discriminator 3
 2900 076c 7B6E     		ldr	r3, [r7, #100]
 2901 076e 0133     		adds	r3, r3, #1
 2902 0770 7B66     		str	r3, [r7, #100]
 2903              	.L137:
 610:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 2904              		.loc 1 610 0 is_stmt 0 discriminator 1
 2905 0772 7B6E     		ldr	r3, [r7, #100]
 2906 0774 072B     		cmp	r3, #7
 2907 0776 D6DD     		ble	.L138
 2908              	.LBE3:
 2909              	.LBB4:
 612:bluetooth_rxtx.c **** 		}
 613:bluetooth_rxtx.c **** 		for(int i=0; i < 8; i++) {
 2910              		.loc 1 613 0 is_stmt 1
 2911 0778 0023     		movs	r3, #0
 2912 077a 3B66     		str	r3, [r7, #96]
 2913 077c 24E0     		b	.L139
 2914              	.L140:
 614:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2915              		.loc 1 614 0 discriminator 3
 2916 077e 664B     		ldr	r3, .L159+12
 2917 0780 D3E90289 		ldrd	r8, [r3, #8]
 2918 0784 3B6E     		ldr	r3, [r7, #96]
 2919 0786 0833     		adds	r3, r3, #8
 2920 0788 7A68     		ldr	r2, [r7, #4]
 2921 078a 1344     		add	r3, r3, r2
 2922 078c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2923 078e DAB2     		uxtb	r2, r3
 2924 0790 4FF00003 		mov	r3, #0
 2925 0794 396E     		ldr	r1, [r7, #96]
 2926 0796 C900     		lsls	r1, r1, #3
 2927 0798 A1F12006 		sub	r6, r1, #32
 2928 079c C1F12000 		rsb	r0, r1, #32
 2929 07a0 03FA01F5 		lsl	r5, r3, r1
 2930 07a4 02FA06F6 		lsl	r6, r2, r6
 2931 07a8 3543     		orrs	r5, r5, r6
 2932 07aa 22FA00F0 		lsr	r0, r2, r0
 2933 07ae 0543     		orrs	r5, r5, r0
 2934 07b0 02FA01F4 		lsl	r4, r2, r1
 2935 07b4 48EA0402 		orr	r2, r8, r4
 2936 07b8 49EA0503 		orr	r3, r9, r5
 2937 07bc 5649     		ldr	r1, .L159+12
 2938 07be C1E90223 		strd	r2, [r1, #8]
 613:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2939              		.loc 1 613 0 discriminator 3
 2940 07c2 3B6E     		ldr	r3, [r7, #96]
 2941 07c4 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 62


 2942 07c6 3B66     		str	r3, [r7, #96]
 2943              	.L139:
 613:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 2944              		.loc 1 613 0 is_stmt 0 discriminator 1
 2945 07c8 3B6E     		ldr	r3, [r7, #96]
 2946 07ca 072B     		cmp	r3, #7
 2947 07cc D7DD     		ble	.L140
 2948              	.LBE4:
 615:bluetooth_rxtx.c **** 		}
 616:bluetooth_rxtx.c **** 		precalc();
 2949              		.loc 1 616 0 is_stmt 1
 2950 07ce FFF7FEFF 		bl	precalc
 617:bluetooth_rxtx.c **** 		break;
 2951              		.loc 1 617 0
 2952 07d2 AEE1     		b	.L111
 2953              	.L88:
 618:bluetooth_rxtx.c **** 
 619:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 620:bluetooth_rxtx.c **** 		clkn_offset = 0;
 2954              		.loc 1 620 0
 2955 07d4 514B     		ldr	r3, .L159+16
 2956 07d6 0022     		movs	r2, #0
 2957 07d8 1A60     		str	r2, [r3]
 2958              	.LBB5:
 621:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2959              		.loc 1 621 0
 2960 07da 0023     		movs	r3, #0
 2961 07dc FB65     		str	r3, [r7, #92]
 2962 07de 11E0     		b	.L141
 2963              	.L142:
 622:bluetooth_rxtx.c **** 			clkn_offset <<= 8;
 2964              		.loc 1 622 0 discriminator 3
 2965 07e0 4E4B     		ldr	r3, .L159+16
 2966 07e2 1B68     		ldr	r3, [r3]
 2967 07e4 1B02     		lsls	r3, r3, #8
 2968 07e6 4D4A     		ldr	r2, .L159+16
 2969 07e8 1360     		str	r3, [r2]
 623:bluetooth_rxtx.c **** 			clkn_offset |= data[i];
 2970              		.loc 1 623 0 discriminator 3
 2971 07ea FB6D     		ldr	r3, [r7, #92]
 2972 07ec 7A68     		ldr	r2, [r7, #4]
 2973 07ee 1344     		add	r3, r3, r2
 2974 07f0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2975 07f2 1A46     		mov	r2, r3
 2976 07f4 494B     		ldr	r3, .L159+16
 2977 07f6 1B68     		ldr	r3, [r3]
 2978 07f8 1343     		orrs	r3, r3, r2
 2979 07fa 484A     		ldr	r2, .L159+16
 2980 07fc 1360     		str	r3, [r2]
 621:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2981              		.loc 1 621 0 discriminator 3
 2982 07fe FB6D     		ldr	r3, [r7, #92]
 2983 0800 0133     		adds	r3, r3, #1
 2984 0802 FB65     		str	r3, [r7, #92]
 2985              	.L141:
 621:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 2986              		.loc 1 621 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccSuvgbr.s 			page 63


 2987 0804 FB6D     		ldr	r3, [r7, #92]
 2988 0806 032B     		cmp	r3, #3
 2989 0808 EADD     		ble	.L142
 2990              	.LBE5:
 624:bluetooth_rxtx.c **** 		}
 625:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 2991              		.loc 1 625 0 is_stmt 1
 2992 080a 454B     		ldr	r3, .L159+20
 2993 080c 0222     		movs	r2, #2
 2994 080e 1A70     		strb	r2, [r3]
 626:bluetooth_rxtx.c **** 		dma_discard = 1;
 2995              		.loc 1 626 0
 2996 0810 444B     		ldr	r3, .L159+24
 2997 0812 0122     		movs	r2, #1
 2998 0814 1A70     		strb	r2, [r3]
 627:bluetooth_rxtx.c **** 		DIO_SSEL_SET;
 2999              		.loc 1 627 0
 3000 0816 444B     		ldr	r3, .L159+28
 3001 0818 4FF08052 		mov	r2, #268435456
 3002 081c 1A60     		str	r2, [r3]
 628:bluetooth_rxtx.c **** 		clk100ns_offset = (data[4] << 8) | (data[5] << 0);
 3003              		.loc 1 628 0
 3004 081e 7B68     		ldr	r3, [r7, #4]
 3005 0820 0433     		adds	r3, r3, #4
 3006 0822 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3007 0824 1B02     		lsls	r3, r3, #8
 3008 0826 9AB2     		uxth	r2, r3
 3009 0828 7B68     		ldr	r3, [r7, #4]
 3010 082a 0533     		adds	r3, r3, #5
 3011 082c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3012 082e 9BB2     		uxth	r3, r3
 3013 0830 1343     		orrs	r3, r3, r2
 3014 0832 9BB2     		uxth	r3, r3
 3015 0834 9AB2     		uxth	r2, r3
 3016 0836 3D4B     		ldr	r3, .L159+32
 3017 0838 1A80     		strh	r2, [r3]	@ movhi
 629:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3018              		.loc 1 629 0
 3019 083a 3D4B     		ldr	r3, .L159+36
 3020 083c 0822     		movs	r2, #8
 3021 083e 1A70     		strb	r2, [r3]
 630:bluetooth_rxtx.c **** 		break;
 3022              		.loc 1 630 0
 3023 0840 77E1     		b	.L111
 3024              	.L109:
 631:bluetooth_rxtx.c **** /*
 632:bluetooth_rxtx.c **** 	case UBERTOOTH_AFH:
 633:bluetooth_rxtx.c **** 		hop_mode = HOP_AFH;
 634:bluetooth_rxtx.c **** 		requested_mode = MODE_AFH;
 635:bluetooth_rxtx.c **** 
 636:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 637:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 638:bluetooth_rxtx.c **** 		}
 639:bluetooth_rxtx.c **** 		used_channels = 0;
 640:bluetooth_rxtx.c **** 		afh_enabled = 1;
 641:bluetooth_rxtx.c **** 		break;
 642:bluetooth_rxtx.c **** */
ARM GAS  /tmp/ccSuvgbr.s 			page 64


 643:bluetooth_rxtx.c **** 	case UBERTOOTH_HOP:
 644:bluetooth_rxtx.c **** 		do_hop = 1;
 3025              		.loc 1 644 0
 3026 0842 3C4B     		ldr	r3, .L159+40
 3027 0844 0122     		movs	r2, #1
 3028 0846 1A70     		strb	r2, [r3]
 645:bluetooth_rxtx.c **** 		break;
 3029              		.loc 1 645 0
 3030 0848 73E1     		b	.L111
 3031              	.L89:
 646:bluetooth_rxtx.c **** 
 647:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 648:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3032              		.loc 1 648 0
 3033 084a 7B68     		ldr	r3, [r7, #4]
 3034 084c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3035 084e 1A46     		mov	r2, r3
 3036 0850 7B68     		ldr	r3, [r7, #4]
 3037 0852 0133     		adds	r3, r3, #1
 3038 0854 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3039 0856 1B02     		lsls	r3, r3, #8
 3040 0858 1A43     		orrs	r2, r2, r3
 3041 085a 7B68     		ldr	r3, [r7, #4]
 3042 085c 0233     		adds	r3, r3, #2
 3043 085e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3044 0860 1B04     		lsls	r3, r3, #16
 3045 0862 1A43     		orrs	r2, r2, r3
 3046 0864 7B68     		ldr	r3, [r7, #4]
 3047 0866 0333     		adds	r3, r3, #3
 3048 0868 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3049 086a 1B06     		lsls	r3, r3, #24
 3050 086c 1343     		orrs	r3, r3, r2
 3051 086e 3B64     		str	r3, [r7, #64]
 649:bluetooth_rxtx.c **** 		clkn = clock;
 3052              		.loc 1 649 0
 3053 0870 314A     		ldr	r2, .L159+44
 3054 0872 3B6C     		ldr	r3, [r7, #64]
 3055 0874 1360     		str	r3, [r2]
 650:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3056              		.loc 1 650 0
 3057 0876 FFF7FEFF 		bl	cs_threshold_calc_and_set
 651:bluetooth_rxtx.c **** 		break;
 3058              		.loc 1 651 0
 3059 087a 5AE1     		b	.L111
 3060              	.L100:
 3061              	.LBB6:
 652:bluetooth_rxtx.c **** 
 653:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 654:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 3062              		.loc 1 654 0
 3063 087c 0023     		movs	r3, #0
 3064 087e BB65     		str	r3, [r7, #88]
 3065 0880 0BE0     		b	.L143
 3066              	.L144:
 655:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3067              		.loc 1 655 0 discriminator 3
 3068 0882 BB6D     		ldr	r3, [r7, #88]
ARM GAS  /tmp/ccSuvgbr.s 			page 65


 3069 0884 7A68     		ldr	r2, [r7, #4]
 3070 0886 1344     		add	r3, r3, r2
 3071 0888 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3072 088a 2C4A     		ldr	r2, .L159+48
 3073 088c BB6D     		ldr	r3, [r7, #88]
 3074 088e 1344     		add	r3, r3, r2
 3075 0890 0A46     		mov	r2, r1
 3076 0892 1A70     		strb	r2, [r3]
 654:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3077              		.loc 1 654 0 discriminator 3
 3078 0894 BB6D     		ldr	r3, [r7, #88]
 3079 0896 0133     		adds	r3, r3, #1
 3080 0898 BB65     		str	r3, [r7, #88]
 3081              	.L143:
 654:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3082              		.loc 1 654 0 is_stmt 0 discriminator 1
 3083 089a BB6D     		ldr	r3, [r7, #88]
 3084 089c 092B     		cmp	r3, #9
 3085 089e F0DD     		ble	.L144
 3086              	.LBE6:
 656:bluetooth_rxtx.c **** 		}
 657:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3087              		.loc 1 657 0 is_stmt 1
 3088 08a0 274B     		ldr	r3, .L159+52
 3089 08a2 0122     		movs	r2, #1
 3090 08a4 1A70     		strb	r2, [r3]
 658:bluetooth_rxtx.c **** 		*data_len = 10;
 3091              		.loc 1 658 0
 3092 08a6 3B68     		ldr	r3, [r7]
 3093 08a8 0A22     		movs	r2, #10
 3094 08aa 1A60     		str	r2, [r3]
 659:bluetooth_rxtx.c **** 		break;
 3095              		.loc 1 659 0
 3096 08ac 41E1     		b	.L111
 3097              	.L101:
 3098              	.LBB7:
 660:bluetooth_rxtx.c **** 
 661:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 662:bluetooth_rxtx.c **** 		for(int i=0; i < 10; i++) {
 3099              		.loc 1 662 0
 3100 08ae 0023     		movs	r3, #0
 3101 08b0 7B65     		str	r3, [r7, #84]
 3102 08b2 07E0     		b	.L145
 3103              	.L146:
 663:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3104              		.loc 1 663 0 discriminator 3
 3105 08b4 214A     		ldr	r2, .L159+48
 3106 08b6 7B6D     		ldr	r3, [r7, #84]
 3107 08b8 1344     		add	r3, r3, r2
 3108 08ba 0022     		movs	r2, #0
 3109 08bc 1A70     		strb	r2, [r3]
 662:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3110              		.loc 1 662 0 discriminator 3
 3111 08be 7B6D     		ldr	r3, [r7, #84]
 3112 08c0 0133     		adds	r3, r3, #1
 3113 08c2 7B65     		str	r3, [r7, #84]
 3114              	.L145:
ARM GAS  /tmp/ccSuvgbr.s 			page 66


 662:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3115              		.loc 1 662 0 is_stmt 0 discriminator 1
 3116 08c4 7B6D     		ldr	r3, [r7, #84]
 3117 08c6 092B     		cmp	r3, #9
 3118 08c8 F4DD     		ble	.L146
 3119              	.LBE7:
 664:bluetooth_rxtx.c **** 		}
 665:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3120              		.loc 1 665 0 is_stmt 1
 3121 08ca 1D4B     		ldr	r3, .L159+52
 3122 08cc 0022     		movs	r2, #0
 3123 08ce 1A70     		strb	r2, [r3]
 666:bluetooth_rxtx.c **** 		*data_len = 10;
 3124              		.loc 1 666 0
 3125 08d0 3B68     		ldr	r3, [r7]
 3126 08d2 0A22     		movs	r2, #10
 3127 08d4 1A60     		str	r2, [r3]
 667:bluetooth_rxtx.c **** 		break;
 3128              		.loc 1 667 0
 3129 08d6 2CE1     		b	.L111
 3130              	.L90:
 668:bluetooth_rxtx.c **** 
 669:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 670:bluetooth_rxtx.c **** 		clock = clkn;
 3131              		.loc 1 670 0
 3132 08d8 174B     		ldr	r3, .L159+44
 3133 08da 1B68     		ldr	r3, [r3]
 3134 08dc 3B64     		str	r3, [r7, #64]
 3135              	.LBB8:
 671:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 3136              		.loc 1 671 0
 3137 08de 0023     		movs	r3, #0
 3138 08e0 3B65     		str	r3, [r7, #80]
 3139 08e2 0CE0     		b	.L147
 3140              	.L148:
 672:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3141              		.loc 1 672 0 discriminator 3
 3142 08e4 3B6D     		ldr	r3, [r7, #80]
 3143 08e6 7A68     		ldr	r2, [r7, #4]
 3144 08e8 1344     		add	r3, r3, r2
 3145 08ea 3A6D     		ldr	r2, [r7, #80]
 3146 08ec D200     		lsls	r2, r2, #3
 3147 08ee 396C     		ldr	r1, [r7, #64]
 3148 08f0 21FA02F2 		lsr	r2, r1, r2
 3149 08f4 D2B2     		uxtb	r2, r2
 3150 08f6 1A70     		strb	r2, [r3]
 671:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 3151              		.loc 1 671 0 discriminator 3
 3152 08f8 3B6D     		ldr	r3, [r7, #80]
 3153 08fa 0133     		adds	r3, r3, #1
 3154 08fc 3B65     		str	r3, [r7, #80]
 3155              	.L147:
 671:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 3156              		.loc 1 671 0 is_stmt 0 discriminator 1
 3157 08fe 3B6D     		ldr	r3, [r7, #80]
 3158 0900 032B     		cmp	r3, #3
 3159 0902 EFDD     		ble	.L148
ARM GAS  /tmp/ccSuvgbr.s 			page 67


 3160              	.LBE8:
 673:bluetooth_rxtx.c **** 		}
 674:bluetooth_rxtx.c **** 		*data_len = 4;
 3161              		.loc 1 674 0 is_stmt 1
 3162 0904 3B68     		ldr	r3, [r7]
 3163 0906 0422     		movs	r2, #4
 3164 0908 1A60     		str	r2, [r3]
 675:bluetooth_rxtx.c **** 		break;
 3165              		.loc 1 675 0
 3166 090a 12E1     		b	.L111
 3167              	.L160:
 3168              		.align	2
 3169              	.L159:
 3170 090c C0080000 		.word	.LC3
 3171 0910 00000000 		.word	compile_info
 3172 0914 00000000 		.word	cs_threshold_req
 3173 0918 00000000 		.word	target
 3174 091c 00000000 		.word	clkn_offset
 3175 0920 00000000 		.word	hop_mode
 3176 0924 00000000 		.word	dma_discard
 3177 0928 98C00920 		.word	537510040
 3178 092c 00000000 		.word	clk100ns_offset
 3179 0930 00000000 		.word	requested_mode
 3180 0934 00000000 		.word	do_hop
 3181 0938 00000000 		.word	clkn
 3182 093c 00000000 		.word	afh_map
 3183 0940 00000000 		.word	afh_enabled
 3184              	.L110:
 676:bluetooth_rxtx.c **** 
 677:bluetooth_rxtx.c **** 	case UBERTOOTH_TRIM_CLOCK:
 678:bluetooth_rxtx.c **** 		clk100ns_offset = (data[0] << 8) | (data[1] << 0);
 3185              		.loc 1 678 0
 3186 0944 7B68     		ldr	r3, [r7, #4]
 3187 0946 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3188 0948 1B02     		lsls	r3, r3, #8
 3189 094a 9AB2     		uxth	r2, r3
 3190 094c 7B68     		ldr	r3, [r7, #4]
 3191 094e 0133     		adds	r3, r3, #1
 3192 0950 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3193 0952 9BB2     		uxth	r3, r3
 3194 0954 1343     		orrs	r3, r3, r2
 3195 0956 9BB2     		uxth	r3, r3
 3196 0958 9AB2     		uxth	r2, r3
 3197 095a 794B     		ldr	r3, .L161
 3198 095c 1A80     		strh	r2, [r3]	@ movhi
 679:bluetooth_rxtx.c **** 		break;
 3199              		.loc 1 679 0
 3200 095e E8E0     		b	.L111
 3201              	.L91:
 680:bluetooth_rxtx.c **** 
 681:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 682:bluetooth_rxtx.c **** 		*data_len = 0;
 3202              		.loc 1 682 0
 3203 0960 3B68     		ldr	r3, [r7]
 3204 0962 0022     		movs	r2, #0
 3205 0964 1A60     		str	r2, [r3]
 683:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccSuvgbr.s 			page 68


 684:bluetooth_rxtx.c **** 		do_hop = 0;
 3206              		.loc 1 684 0
 3207 0966 774B     		ldr	r3, .L161+4
 3208 0968 0022     		movs	r2, #0
 3209 096a 1A70     		strb	r2, [r3]
 685:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3210              		.loc 1 685 0
 3211 096c 764B     		ldr	r3, .L161+8
 3212 096e 0322     		movs	r2, #3
 3213 0970 1A70     		strb	r2, [r3]
 686:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3214              		.loc 1 686 0
 3215 0972 764B     		ldr	r3, .L161+12
 3216 0974 0922     		movs	r2, #9
 3217 0976 1A70     		strb	r2, [r3]
 687:bluetooth_rxtx.c **** 
 688:bluetooth_rxtx.c **** 		queue_init();
 3218              		.loc 1 688 0
 3219 0978 FFF7FEFF 		bl	queue_init
 689:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3220              		.loc 1 689 0
 3221 097c FFF7FEFF 		bl	cs_threshold_calc_and_set
 690:bluetooth_rxtx.c **** 		break;
 3222              		.loc 1 690 0
 3223 0980 D7E0     		b	.L111
 3224              	.L92:
 3225              	.LBB9:
 691:bluetooth_rxtx.c **** 
 692:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 693:bluetooth_rxtx.c **** 		for(int i=0; i < 4; i++) {
 3226              		.loc 1 693 0
 3227 0982 0023     		movs	r3, #0
 3228 0984 FB64     		str	r3, [r7, #76]
 3229 0986 0DE0     		b	.L149
 3230              	.L150:
 694:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3231              		.loc 1 694 0 discriminator 3
 3232 0988 FB6C     		ldr	r3, [r7, #76]
 3233 098a 7A68     		ldr	r2, [r7, #4]
 3234 098c 1344     		add	r3, r3, r2
 3235 098e 704A     		ldr	r2, .L161+16
 3236 0990 1168     		ldr	r1, [r2]
 3237 0992 FA6C     		ldr	r2, [r7, #76]
 3238 0994 D200     		lsls	r2, r2, #3
 3239 0996 21FA02F2 		lsr	r2, r1, r2
 3240 099a D2B2     		uxtb	r2, r2
 3241 099c 1A70     		strb	r2, [r3]
 693:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3242              		.loc 1 693 0 discriminator 3
 3243 099e FB6C     		ldr	r3, [r7, #76]
 3244 09a0 0133     		adds	r3, r3, #1
 3245 09a2 FB64     		str	r3, [r7, #76]
 3246              	.L149:
 693:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3247              		.loc 1 693 0 is_stmt 0 discriminator 1
 3248 09a4 FB6C     		ldr	r3, [r7, #76]
 3249 09a6 032B     		cmp	r3, #3
ARM GAS  /tmp/ccSuvgbr.s 			page 69


 3250 09a8 EEDD     		ble	.L150
 3251              	.LBE9:
 695:bluetooth_rxtx.c **** 		}
 696:bluetooth_rxtx.c **** 		*data_len = 4;
 3252              		.loc 1 696 0 is_stmt 1
 3253 09aa 3B68     		ldr	r3, [r7]
 3254 09ac 0422     		movs	r2, #4
 3255 09ae 1A60     		str	r2, [r3]
 697:bluetooth_rxtx.c **** 		break;
 3256              		.loc 1 697 0
 3257 09b0 BFE0     		b	.L111
 3258              	.L93:
 698:bluetooth_rxtx.c **** 
 699:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 700:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3259              		.loc 1 700 0
 3260 09b2 7B68     		ldr	r3, [r7, #4]
 3261 09b4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3262 09b6 1A46     		mov	r2, r3
 3263 09b8 7B68     		ldr	r3, [r7, #4]
 3264 09ba 0133     		adds	r3, r3, #1
 3265 09bc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3266 09be 1B02     		lsls	r3, r3, #8
 3267 09c0 1A43     		orrs	r2, r2, r3
 3268 09c2 7B68     		ldr	r3, [r7, #4]
 3269 09c4 0233     		adds	r3, r3, #2
 3270 09c6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3271 09c8 1B04     		lsls	r3, r3, #16
 3272 09ca 1A43     		orrs	r2, r2, r3
 3273 09cc 7B68     		ldr	r3, [r7, #4]
 3274 09ce 0333     		adds	r3, r3, #3
 3275 09d0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3276 09d2 1B06     		lsls	r3, r3, #24
 3277 09d4 1343     		orrs	r3, r3, r2
 3278 09d6 1846     		mov	r0, r3
 3279 09d8 FFF7FEFF 		bl	le_set_access_address
 701:bluetooth_rxtx.c **** 		le.target_set = 1;
 3280              		.loc 1 701 0
 3281 09dc 5C4B     		ldr	r3, .L161+16
 3282 09de 0122     		movs	r2, #1
 3283 09e0 DA63     		str	r2, [r3, #60]
 702:bluetooth_rxtx.c **** 		break;
 3284              		.loc 1 702 0
 3285 09e2 A6E0     		b	.L111
 3286              	.L95:
 703:bluetooth_rxtx.c **** 
 704:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 705:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 706:bluetooth_rxtx.c **** 		break;
 707:bluetooth_rxtx.c **** 
 708:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 709:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 710:bluetooth_rxtx.c **** 		// don't commit here please
 711:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3287              		.loc 1 711 0
 3288 09e4 7B68     		ldr	r3, [r7, #4]
 3289 09e6 1322     		movs	r2, #19
ARM GAS  /tmp/ccSuvgbr.s 			page 70


 3290 09e8 1A70     		strb	r2, [r3]
 712:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3291              		.loc 1 712 0
 3292 09ea 7B68     		ldr	r3, [r7, #4]
 3293 09ec 0133     		adds	r3, r3, #1
 3294 09ee 3722     		movs	r2, #55
 3295 09f0 1A70     		strb	r2, [r3]
 713:bluetooth_rxtx.c **** 		*data_len = 2;
 3296              		.loc 1 713 0
 3297 09f2 3B68     		ldr	r3, [r7]
 3298 09f4 0222     		movs	r2, #2
 3299 09f6 1A60     		str	r2, [r3]
 714:bluetooth_rxtx.c **** 		break;
 3300              		.loc 1 714 0
 3301 09f8 9BE0     		b	.L111
 3302              	.L96:
 715:bluetooth_rxtx.c **** 
 716:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 717:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3303              		.loc 1 717 0
 3304 09fa 554B     		ldr	r3, .L161+16
 3305 09fc 1B69     		ldr	r3, [r3, #16]
 3306 09fe 002B     		cmp	r3, #0
 3307 0a00 14BF     		ite	ne
 3308 0a02 0123     		movne	r3, #1
 3309 0a04 0023     		moveq	r3, #0
 3310 0a06 DBB2     		uxtb	r3, r3
 3311 0a08 1A46     		mov	r2, r3
 3312 0a0a 7B68     		ldr	r3, [r7, #4]
 3313 0a0c 1A70     		strb	r2, [r3]
 718:bluetooth_rxtx.c **** 		*data_len = 1;
 3314              		.loc 1 718 0
 3315 0a0e 3B68     		ldr	r3, [r7]
 3316 0a10 0122     		movs	r2, #1
 3317 0a12 1A60     		str	r2, [r3]
 719:bluetooth_rxtx.c **** 		break;
 3318              		.loc 1 719 0
 3319 0a14 8DE0     		b	.L111
 3320              	.L97:
 720:bluetooth_rxtx.c **** 
 721:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 722:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3321              		.loc 1 722 0
 3322 0a16 BB68     		ldr	r3, [r7, #8]
 3323 0a18 1B88     		ldrh	r3, [r3]
 3324 0a1a 002B     		cmp	r3, #0
 3325 0a1c 14BF     		ite	ne
 3326 0a1e 0123     		movne	r3, #1
 3327 0a20 0023     		moveq	r3, #0
 3328 0a22 DBB2     		uxtb	r3, r3
 3329 0a24 1A46     		mov	r2, r3
 3330 0a26 4A4B     		ldr	r3, .L161+16
 3331 0a28 1A61     		str	r2, [r3, #16]
 723:bluetooth_rxtx.c **** 		break;
 3332              		.loc 1 723 0
 3333 0a2a 82E0     		b	.L111
 3334              	.L98:
ARM GAS  /tmp/ccSuvgbr.s 			page 71


 724:bluetooth_rxtx.c **** 
 725:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 726:bluetooth_rxtx.c **** 		p = dequeue();
 3335              		.loc 1 726 0
 3336 0a2c FFF7FEFF 		bl	dequeue
 3337 0a30 B864     		str	r0, [r7, #72]
 727:bluetooth_rxtx.c **** 		if (p != NULL) {
 3338              		.loc 1 727 0
 3339 0a32 BB6C     		ldr	r3, [r7, #72]
 3340 0a34 002B     		cmp	r3, #0
 3341 0a36 08D0     		beq	.L151
 728:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3342              		.loc 1 728 0
 3343 0a38 7868     		ldr	r0, [r7, #4]
 3344 0a3a B96C     		ldr	r1, [r7, #72]
 3345 0a3c 4022     		movs	r2, #64
 3346 0a3e FFF7FEFF 		bl	memcpy
 729:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3347              		.loc 1 729 0
 3348 0a42 3B68     		ldr	r3, [r7]
 3349 0a44 4022     		movs	r2, #64
 3350 0a46 1A60     		str	r2, [r3]
 730:bluetooth_rxtx.c **** 		} else {
 731:bluetooth_rxtx.c **** 			data[0] = 0;
 732:bluetooth_rxtx.c **** 			*data_len = 1;
 733:bluetooth_rxtx.c **** 		}
 734:bluetooth_rxtx.c **** 		break;
 3351              		.loc 1 734 0
 3352 0a48 73E0     		b	.L111
 3353              	.L151:
 731:bluetooth_rxtx.c **** 			*data_len = 1;
 3354              		.loc 1 731 0
 3355 0a4a 7B68     		ldr	r3, [r7, #4]
 3356 0a4c 0022     		movs	r2, #0
 3357 0a4e 1A70     		strb	r2, [r3]
 732:bluetooth_rxtx.c **** 		}
 3358              		.loc 1 732 0
 3359 0a50 3B68     		ldr	r3, [r7]
 3360 0a52 0122     		movs	r2, #1
 3361 0a54 1A60     		str	r2, [r3]
 3362              		.loc 1 734 0
 3363 0a56 6CE0     		b	.L111
 3364              	.L99:
 735:bluetooth_rxtx.c **** 
 736:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 737:bluetooth_rxtx.c **** 		*data_len = 0;
 3365              		.loc 1 737 0
 3366 0a58 3B68     		ldr	r3, [r7]
 3367 0a5a 0022     		movs	r2, #0
 3368 0a5c 1A60     		str	r2, [r3]
 738:bluetooth_rxtx.c **** 
 739:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3369              		.loc 1 739 0
 3370 0a5e 3A4B     		ldr	r3, .L161+8
 3371 0a60 0022     		movs	r2, #0
 3372 0a62 1A70     		strb	r2, [r3]
 740:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
ARM GAS  /tmp/ccSuvgbr.s 			page 72


 3373              		.loc 1 740 0
 3374 0a64 394B     		ldr	r3, .L161+12
 3375 0a66 0A22     		movs	r2, #10
 3376 0a68 1A70     		strb	r2, [r3]
 741:bluetooth_rxtx.c **** 
 742:bluetooth_rxtx.c **** 		queue_init();
 3377              		.loc 1 742 0
 3378 0a6a FFF7FEFF 		bl	queue_init
 743:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3379              		.loc 1 743 0
 3380 0a6e FFF7FEFF 		bl	cs_threshold_calc_and_set
 744:bluetooth_rxtx.c **** 		break;
 3381              		.loc 1 744 0
 3382 0a72 5EE0     		b	.L111
 3383              	.L102:
 745:bluetooth_rxtx.c **** 
 746:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 747:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3384              		.loc 1 747 0
 3385 0a74 BB68     		ldr	r3, [r7, #8]
 3386 0a76 1B88     		ldrh	r3, [r3]
 3387 0a78 DBB2     		uxtb	r3, r3
 3388 0a7a 1846     		mov	r0, r3
 3389 0a7c FFF7FEFF 		bl	cc2400_get
 3390 0a80 0346     		mov	r3, r0
 3391 0a82 FB87     		strh	r3, [r7, #62]	@ movhi
 748:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3392              		.loc 1 748 0
 3393 0a84 FB8F     		ldrh	r3, [r7, #62]
 3394 0a86 1B0A     		lsrs	r3, r3, #8
 3395 0a88 9BB2     		uxth	r3, r3
 3396 0a8a DAB2     		uxtb	r2, r3
 3397 0a8c 7B68     		ldr	r3, [r7, #4]
 3398 0a8e 1A70     		strb	r2, [r3]
 749:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3399              		.loc 1 749 0
 3400 0a90 7B68     		ldr	r3, [r7, #4]
 3401 0a92 0133     		adds	r3, r3, #1
 3402 0a94 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 3403 0a96 D2B2     		uxtb	r2, r2
 3404 0a98 1A70     		strb	r2, [r3]
 750:bluetooth_rxtx.c **** 		*data_len = 2;
 3405              		.loc 1 750 0
 3406 0a9a 3B68     		ldr	r3, [r7]
 3407 0a9c 0222     		movs	r2, #2
 3408 0a9e 1A60     		str	r2, [r3]
 751:bluetooth_rxtx.c **** 		break;
 3409              		.loc 1 751 0
 3410 0aa0 47E0     		b	.L111
 3411              	.L106:
 752:bluetooth_rxtx.c **** 
 753:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 754:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3412              		.loc 1 754 0
 3413 0aa2 BB68     		ldr	r3, [r7, #8]
 3414 0aa4 1B88     		ldrh	r3, [r3]
 3415 0aa6 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccSuvgbr.s 			page 73


 3416 0aa8 BB68     		ldr	r3, [r7, #8]
 3417 0aaa 0233     		adds	r3, r3, #2
 3418 0aac 1B88     		ldrh	r3, [r3]
 3419 0aae 1046     		mov	r0, r2
 3420 0ab0 1946     		mov	r1, r3
 3421 0ab2 FFF7FEFF 		bl	cc2400_set
 755:bluetooth_rxtx.c **** 		break;
 3422              		.loc 1 755 0
 3423 0ab6 3CE0     		b	.L111
 3424              	.L103:
 756:bluetooth_rxtx.c **** 
 757:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 758:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3425              		.loc 1 758 0
 3426 0ab8 2648     		ldr	r0, .L161+20
 3427 0aba 7968     		ldr	r1, [r7, #4]
 3428 0abc 0622     		movs	r2, #6
 3429 0abe FFF7FEFF 		bl	memcpy
 759:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3430              		.loc 1 759 0
 3431 0ac2 224B     		ldr	r3, .L161+12
 3432 0ac4 0C22     		movs	r2, #12
 3433 0ac6 1A70     		strb	r2, [r3]
 760:bluetooth_rxtx.c **** 		break;
 3434              		.loc 1 760 0
 3435 0ac8 33E0     		b	.L111
 3436              	.L105:
 761:bluetooth_rxtx.c **** 
 762:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 763:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 764:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 765:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3437              		.loc 1 765 0
 3438 0aca 7B68     		ldr	r3, [r7, #4]
 3439 0acc 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3440 0ace 204B     		ldr	r3, .L161+16
 3441 0ad0 83F83420 		strb	r2, [r3, #52]
 766:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3442              		.loc 1 766 0
 3443 0ad4 7B68     		ldr	r3, [r7, #4]
 3444 0ad6 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3445 0ad8 1D4B     		ldr	r3, .L161+16
 3446 0ada 83F83520 		strb	r2, [r3, #53]
 767:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3447              		.loc 1 767 0
 3448 0ade 7B68     		ldr	r3, [r7, #4]
 3449 0ae0 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3450 0ae2 1B4B     		ldr	r3, .L161+16
 3451 0ae4 83F83620 		strb	r2, [r3, #54]
 768:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3452              		.loc 1 768 0
 3453 0ae8 7B68     		ldr	r3, [r7, #4]
 3454 0aea 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3455 0aec 184B     		ldr	r3, .L161+16
 3456 0aee 83F83720 		strb	r2, [r3, #55]
 769:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3457              		.loc 1 769 0
ARM GAS  /tmp/ccSuvgbr.s 			page 74


 3458 0af2 7B68     		ldr	r3, [r7, #4]
 3459 0af4 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3460 0af6 164B     		ldr	r3, .L161+16
 3461 0af8 83F83820 		strb	r2, [r3, #56]
 770:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3462              		.loc 1 770 0
 3463 0afc 7B68     		ldr	r3, [r7, #4]
 3464 0afe 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3465 0b00 134B     		ldr	r3, .L161+16
 3466 0b02 83F83920 		strb	r2, [r3, #57]
 771:bluetooth_rxtx.c **** 		le.target_set = 1;
 3467              		.loc 1 771 0
 3468 0b06 124B     		ldr	r3, .L161+16
 3469 0b08 0122     		movs	r2, #1
 3470 0b0a DA63     		str	r2, [r3, #60]
 772:bluetooth_rxtx.c **** 		break;
 3471              		.loc 1 772 0
 3472 0b0c 11E0     		b	.L111
 3473              	.L107:
 773:bluetooth_rxtx.c **** 
 774:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 775:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 776:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3474              		.loc 1 776 0
 3475 0b0e BB68     		ldr	r3, [r7, #8]
 3476 0b10 1B88     		ldrh	r3, [r3]
 3477 0b12 DAB2     		uxtb	r2, r3
 3478 0b14 104B     		ldr	r3, .L161+24
 3479 0b16 1A70     		strb	r2, [r3]
 777:bluetooth_rxtx.c **** 		break;
 3480              		.loc 1 777 0
 3481 0b18 0BE0     		b	.L111
 3482              	.L108:
 778:bluetooth_rxtx.c **** #endif
 779:bluetooth_rxtx.c **** 
 780:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 781:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 782:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 783:bluetooth_rxtx.c **** 			return 0;
 784:bluetooth_rxtx.c **** #endif
 785:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3483              		.loc 1 785 0
 3484 0b1a 0C4B     		ldr	r3, .L161+12
 3485 0b1c 0D22     		movs	r2, #13
 3486 0b1e 1A70     		strb	r2, [r3]
 786:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3487              		.loc 1 786 0
 3488 0b20 BB68     		ldr	r3, [r7, #8]
 3489 0b22 1B88     		ldrh	r3, [r3]
 3490 0b24 DAB2     		uxtb	r2, r3
 3491 0b26 0D4B     		ldr	r3, .L161+28
 3492 0b28 1A70     		strb	r2, [r3]
 787:bluetooth_rxtx.c **** 		break;
 3493              		.loc 1 787 0
 3494 0b2a 02E0     		b	.L111
 3495              	.L49:
 788:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccSuvgbr.s 			page 75


 789:bluetooth_rxtx.c **** 	default:
 790:bluetooth_rxtx.c **** 		return 0;
 3496              		.loc 1 790 0
 3497 0b2c 0023     		movs	r3, #0
 3498 0b2e 01E0     		b	.L153
 3499              	.L154:
 706:bluetooth_rxtx.c **** 
 3500              		.loc 1 706 0
 3501 0b30 00BF     		nop
 3502              	.L111:
 791:bluetooth_rxtx.c **** 	}
 792:bluetooth_rxtx.c **** 	return 1;
 3503              		.loc 1 792 0
 3504 0b32 0123     		movs	r3, #1
 3505              	.L153:
 793:bluetooth_rxtx.c **** }
 3506              		.loc 1 793 0 discriminator 1
 3507 0b34 1846     		mov	r0, r3
 3508 0b36 6C37     		adds	r7, r7, #108
 3509              		.cfi_def_cfa_offset 36
 3510 0b38 BD46     		mov	sp, r7
 3511              		.cfi_def_cfa_register 13
 3512              		@ sp needed
 3513 0b3a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3514              	.L162:
 3515 0b3e 00BF     		.align	2
 3516              	.L161:
 3517 0b40 00000000 		.word	clk100ns_offset
 3518 0b44 00000000 		.word	do_hop
 3519 0b48 00000000 		.word	hop_mode
 3520 0b4c 00000000 		.word	requested_mode
 3521 0b50 00000000 		.word	le
 3522 0b54 00000000 		.word	slave_mac_address
 3523 0b58 00000000 		.word	jam_mode
 3524 0b5c 00000000 		.word	ego_mode
 3525              		.cfi_endproc
 3526              	.LFE9:
 3528              		.section	.text.clkn_init,"ax",%progbits
 3529              		.align	2
 3530              		.thumb
 3531              		.thumb_func
 3533              	clkn_init:
 3534              	.LFB10:
 794:bluetooth_rxtx.c **** 
 795:bluetooth_rxtx.c **** static void clkn_init()
 796:bluetooth_rxtx.c **** {
 3535              		.loc 1 796 0
 3536              		.cfi_startproc
 3537              		@ args = 0, pretend = 0, frame = 0
 3538              		@ frame_needed = 1, uses_anonymous_args = 0
 3539              		@ link register save eliminated.
 3540 0000 80B4     		push	{r7}
 3541              		.cfi_def_cfa_offset 4
 3542              		.cfi_offset 7, -4
 3543 0002 00AF     		add	r7, sp, #0
 3544              		.cfi_def_cfa_register 7
 797:bluetooth_rxtx.c **** 	/*
ARM GAS  /tmp/ccSuvgbr.s 			page 76


 798:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 799:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 800:bluetooth_rxtx.c **** 	 * clock_start().
 801:bluetooth_rxtx.c **** 	 */
 802:bluetooth_rxtx.c **** 
 803:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 804:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3545              		.loc 1 804 0
 3546 0004 0C4B     		ldr	r3, .L164
 3547 0006 0222     		movs	r2, #2
 3548 0008 1A60     		str	r2, [r3]
 805:bluetooth_rxtx.c **** 	clkn = 0;
 3549              		.loc 1 805 0
 3550 000a 0C4B     		ldr	r3, .L164+4
 3551 000c 0022     		movs	r2, #0
 3552 000e 1A60     		str	r2, [r3]
 806:bluetooth_rxtx.c **** 
 807:bluetooth_rxtx.c **** #ifdef TC13BADGE
 808:bluetooth_rxtx.c **** 	/*
 809:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 810:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 811:bluetooth_rxtx.c **** 	 */
 812:bluetooth_rxtx.c **** 	T0PR = 2;
 813:bluetooth_rxtx.c **** #else
 814:bluetooth_rxtx.c **** 	/*
 815:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 816:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 817:bluetooth_rxtx.c **** 	 */
 818:bluetooth_rxtx.c **** 	T0PR = 4;
 3553              		.loc 1 818 0
 3554 0010 0B4B     		ldr	r3, .L164+8
 3555 0012 0422     		movs	r2, #4
 3556 0014 1A60     		str	r2, [r3]
 819:bluetooth_rxtx.c **** #endif
 820:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 821:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3557              		.loc 1 821 0
 3558 0016 0B4B     		ldr	r3, .L164+12
 3559 0018 40F63442 		movw	r2, #3124
 3560 001c 1A60     		str	r2, [r3]
 822:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3561              		.loc 1 822 0
 3562 001e 0A4B     		ldr	r3, .L164+16
 3563 0020 0322     		movs	r2, #3
 3564 0022 1A60     		str	r2, [r3]
 823:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3565              		.loc 1 823 0
 3566 0024 094B     		ldr	r3, .L164+20
 3567 0026 0222     		movs	r2, #2
 3568 0028 1A60     		str	r2, [r3]
 824:bluetooth_rxtx.c **** 
 825:bluetooth_rxtx.c **** 	/* start timer */
 826:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3569              		.loc 1 826 0
 3570 002a 034B     		ldr	r3, .L164
 3571 002c 0122     		movs	r2, #1
 3572 002e 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 77


 827:bluetooth_rxtx.c **** }
 3573              		.loc 1 827 0
 3574 0030 BD46     		mov	sp, r7
 3575              		.cfi_def_cfa_register 13
 3576              		@ sp needed
 3577 0032 5DF8047B 		ldr	r7, [sp], #4
 3578              		.cfi_restore 7
 3579              		.cfi_def_cfa_offset 0
 3580 0036 7047     		bx	lr
 3581              	.L165:
 3582              		.align	2
 3583              	.L164:
 3584 0038 04400040 		.word	1073758212
 3585 003c 00000000 		.word	clkn
 3586 0040 0C400040 		.word	1073758220
 3587 0044 18400040 		.word	1073758232
 3588 0048 14400040 		.word	1073758228
 3589 004c 00E100E0 		.word	-536813312
 3590              		.cfi_endproc
 3591              	.LFE10:
 3593              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3594              		.align	2
 3595              		.global	TIMER0_IRQHandler
 3596              		.thumb
 3597              		.thumb_func
 3599              	TIMER0_IRQHandler:
 3600              	.LFB11:
 828:bluetooth_rxtx.c **** 
 829:bluetooth_rxtx.c **** /* Update CLKN. */
 830:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 831:bluetooth_rxtx.c **** {
 3601              		.loc 1 831 0
 3602              		.cfi_startproc
 3603              		@ args = 0, pretend = 0, frame = 8
 3604              		@ frame_needed = 1, uses_anonymous_args = 0
 3605              		@ link register save eliminated.
 3606 0000 80B4     		push	{r7}
 3607              		.cfi_def_cfa_offset 4
 3608              		.cfi_offset 7, -4
 3609 0002 83B0     		sub	sp, sp, #12
 3610              		.cfi_def_cfa_offset 16
 3611 0004 00AF     		add	r7, sp, #0
 3612              		.cfi_def_cfa_register 7
 832:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3613              		.loc 1 832 0
 3614 0006 4FF04023 		mov	r3, #1073758208
 3615 000a 1B68     		ldr	r3, [r3]
 3616 000c 03F00103 		and	r3, r3, #1
 3617 0010 002B     		cmp	r3, #0
 3618 0012 00F08480 		beq	.L166
 3619              	.LBB10:
 833:bluetooth_rxtx.c **** 
 834:bluetooth_rxtx.c **** 		clkn += clkn_offset + 1;
 3620              		.loc 1 834 0
 3621 0016 444B     		ldr	r3, .L177
 3622 0018 1B68     		ldr	r3, [r3]
 3623 001a 5A1C     		adds	r2, r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 78


 3624 001c 434B     		ldr	r3, .L177+4
 3625 001e 1B68     		ldr	r3, [r3]
 3626 0020 1344     		add	r3, r3, r2
 3627 0022 424A     		ldr	r2, .L177+4
 3628 0024 1360     		str	r3, [r2]
 835:bluetooth_rxtx.c **** 		clkn_offset = 0;
 3629              		.loc 1 835 0
 3630 0026 404B     		ldr	r3, .L177
 3631 0028 0022     		movs	r2, #0
 3632 002a 1A60     		str	r2, [r3]
 836:bluetooth_rxtx.c **** 
 837:bluetooth_rxtx.c **** 		uint32_t le_clk = (clkn - le.conn_epoch) & 0x03;
 3633              		.loc 1 837 0
 3634 002c 3F4B     		ldr	r3, .L177+4
 3635 002e 1A68     		ldr	r2, [r3]
 3636 0030 3F4B     		ldr	r3, .L177+8
 3637 0032 9B69     		ldr	r3, [r3, #24]
 3638 0034 D31A     		subs	r3, r2, r3
 3639 0036 03F00303 		and	r3, r3, #3
 3640 003a 7B60     		str	r3, [r7, #4]
 838:bluetooth_rxtx.c **** 
 839:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 840:bluetooth_rxtx.c **** 
 841:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 842:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 3641              		.loc 1 842 0
 3642 003c 3D4B     		ldr	r3, .L177+12
 3643 003e 1B78     		ldrb	r3, [r3]
 3644 0040 DBB2     		uxtb	r3, r3
 3645 0042 002B     		cmp	r3, #0
 3646 0044 04D0     		beq	.L168
 3647              		.loc 1 842 0 is_stmt 0 discriminator 1
 3648 0046 3B4B     		ldr	r3, .L177+12
 3649 0048 1B78     		ldrb	r3, [r3]
 3650 004a DBB2     		uxtb	r3, r3
 3651 004c 012B     		cmp	r3, #1
 3652 004e 0AD1     		bne	.L169
 3653              	.L168:
 843:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3654              		.loc 1 843 0 is_stmt 1
 3655 0050 364B     		ldr	r3, .L177+4
 3656 0052 1B68     		ldr	r3, [r3]
 3657 0054 03F07F03 		and	r3, r3, #127
 3658 0058 002B     		cmp	r3, #0
 3659 005a 03D1     		bne	.L170
 844:bluetooth_rxtx.c **** 				do_hop = 1;
 3660              		.loc 1 844 0
 3661 005c 364B     		ldr	r3, .L177+16
 3662 005e 0122     		movs	r2, #1
 3663 0060 1A70     		strb	r2, [r3]
 843:bluetooth_rxtx.c **** 			if ((clkn & 0x7f) == 0)
 3664              		.loc 1 843 0
 3665 0062 4EE0     		b	.L171
 3666              	.L170:
 3667 0064 4DE0     		b	.L171
 3668              	.L169:
 845:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccSuvgbr.s 			page 79


 846:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 847:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 3669              		.loc 1 847 0
 3670 0066 334B     		ldr	r3, .L177+12
 3671 0068 1B78     		ldrb	r3, [r3]
 3672 006a DBB2     		uxtb	r3, r3
 3673 006c 022B     		cmp	r3, #2
 3674 006e 09D1     		bne	.L172
 848:bluetooth_rxtx.c **** 			if ((clkn & 0x1) == 0)
 3675              		.loc 1 848 0
 3676 0070 2E4B     		ldr	r3, .L177+4
 3677 0072 1B68     		ldr	r3, [r3]
 3678 0074 03F00103 		and	r3, r3, #1
 3679 0078 002B     		cmp	r3, #0
 3680 007a 42D1     		bne	.L171
 849:bluetooth_rxtx.c **** 				do_hop = 1;
 3681              		.loc 1 849 0
 3682 007c 2E4B     		ldr	r3, .L177+16
 3683 007e 0122     		movs	r2, #1
 3684 0080 1A70     		strb	r2, [r3]
 3685 0082 3EE0     		b	.L171
 3686              	.L172:
 850:bluetooth_rxtx.c **** 		}
 851:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 852:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 3687              		.loc 1 852 0
 3688 0084 2B4B     		ldr	r3, .L177+12
 3689 0086 1B78     		ldrb	r3, [r3]
 3690 0088 DBB2     		uxtb	r3, r3
 3691 008a 032B     		cmp	r3, #3
 3692 008c 26D1     		bne	.L174
 853:bluetooth_rxtx.c **** 			// Only hop if connected
 854:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 3693              		.loc 1 854 0
 3694 008e 284B     		ldr	r3, .L177+8
 3695 0090 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3696 0092 032B     		cmp	r3, #3
 3697 0094 35D1     		bne	.L171
 3698              		.loc 1 854 0 is_stmt 0 discriminator 1
 3699 0096 7B68     		ldr	r3, [r7, #4]
 3700 0098 002B     		cmp	r3, #0
 3701 009a 32D1     		bne	.L171
 855:bluetooth_rxtx.c **** 				--le.interval_timer;
 3702              		.loc 1 855 0 is_stmt 1
 3703 009c 244B     		ldr	r3, .L177+8
 3704 009e 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3705 00a0 9BB2     		uxth	r3, r3
 3706 00a2 013B     		subs	r3, r3, #1
 3707 00a4 9AB2     		uxth	r2, r3
 3708 00a6 224B     		ldr	r3, .L177+8
 3709 00a8 9A83     		strh	r2, [r3, #28]	@ movhi
 856:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3710              		.loc 1 856 0
 3711 00aa 214B     		ldr	r3, .L177+8
 3712 00ac 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3713 00ae 9BB2     		uxth	r3, r3
 3714 00b0 002B     		cmp	r3, #0
ARM GAS  /tmp/ccSuvgbr.s 			page 80


 3715 00b2 0ED1     		bne	.L176
 857:bluetooth_rxtx.c **** 					do_hop = 1;
 3716              		.loc 1 857 0
 3717 00b4 204B     		ldr	r3, .L177+16
 3718 00b6 0122     		movs	r2, #1
 3719 00b8 1A70     		strb	r2, [r3]
 858:bluetooth_rxtx.c **** 					++le.conn_count;
 3720              		.loc 1 858 0
 3721 00ba 1D4B     		ldr	r3, .L177+8
 3722 00bc 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 3723 00be 9BB2     		uxth	r3, r3
 3724 00c0 0133     		adds	r3, r3, #1
 3725 00c2 9AB2     		uxth	r2, r3
 3726 00c4 1A4B     		ldr	r3, .L177+8
 3727 00c6 1A84     		strh	r2, [r3, #32]	@ movhi
 859:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3728              		.loc 1 859 0
 3729 00c8 194B     		ldr	r3, .L177+8
 3730 00ca DA8B     		ldrh	r2, [r3, #30]
 3731 00cc 184B     		ldr	r3, .L177+8
 3732 00ce 9A83     		strh	r2, [r3, #28]	@ movhi
 3733 00d0 17E0     		b	.L171
 3734              	.L176:
 860:bluetooth_rxtx.c **** 				} else {
 861:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 3735              		.loc 1 861 0
 3736 00d2 1A4B     		ldr	r3, .L177+20
 3737 00d4 4FF48072 		mov	r2, #256
 3738 00d8 1A60     		str	r2, [r3]
 3739 00da 12E0     		b	.L171
 3740              	.L174:
 862:bluetooth_rxtx.c **** 				}
 863:bluetooth_rxtx.c **** 			}
 864:bluetooth_rxtx.c **** 		}
 865:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_AFH) {
 3741              		.loc 1 865 0
 3742 00dc 154B     		ldr	r3, .L177+12
 3743 00de 1B78     		ldrb	r3, [r3]
 3744 00e0 DBB2     		uxtb	r3, r3
 3745 00e2 052B     		cmp	r3, #5
 3746 00e4 0DD1     		bne	.L171
 866:bluetooth_rxtx.c **** 			if( (last_hop + hop_timeout) == clkn ) {
 3747              		.loc 1 866 0
 3748 00e6 164B     		ldr	r3, .L177+24
 3749 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 3750 00ea 9BB2     		uxth	r3, r3
 3751 00ec 1A46     		mov	r2, r3
 3752 00ee 154B     		ldr	r3, .L177+28
 3753 00f0 1B68     		ldr	r3, [r3]
 3754 00f2 1A44     		add	r2, r2, r3
 3755 00f4 0D4B     		ldr	r3, .L177+4
 3756 00f6 1B68     		ldr	r3, [r3]
 3757 00f8 9A42     		cmp	r2, r3
 3758 00fa 02D1     		bne	.L171
 867:bluetooth_rxtx.c **** 				do_hop = 1;
 3759              		.loc 1 867 0
 3760 00fc 0E4B     		ldr	r3, .L177+16
ARM GAS  /tmp/ccSuvgbr.s 			page 81


 3761 00fe 0122     		movs	r2, #1
 3762 0100 1A70     		strb	r2, [r3]
 3763              	.L171:
 868:bluetooth_rxtx.c **** 			}
 869:bluetooth_rxtx.c **** 		}
 870:bluetooth_rxtx.c **** 
 871:bluetooth_rxtx.c **** 		T0MR0 = 3124 + clk100ns_offset;
 3764              		.loc 1 871 0
 3765 0102 114B     		ldr	r3, .L177+32
 3766 0104 114A     		ldr	r2, .L177+36
 3767 0106 1288     		ldrh	r2, [r2]	@ movhi
 3768 0108 92B2     		uxth	r2, r2
 3769 010a 02F63442 		addw	r2, r2, #3124
 3770 010e 1A60     		str	r2, [r3]
 872:bluetooth_rxtx.c **** 		clk100ns_offset = 0;
 3771              		.loc 1 872 0
 3772 0110 0E4B     		ldr	r3, .L177+36
 3773 0112 0022     		movs	r2, #0
 3774 0114 1A80     		strh	r2, [r3]	@ movhi
 873:bluetooth_rxtx.c **** 
 874:bluetooth_rxtx.c **** 		/* Ack interrupt */
 875:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 3775              		.loc 1 875 0
 3776 0116 4FF04023 		mov	r3, #1073758208
 3777 011a 0122     		movs	r2, #1
 3778 011c 1A60     		str	r2, [r3]
 3779              	.L166:
 3780              	.LBE10:
 876:bluetooth_rxtx.c **** 	}
 877:bluetooth_rxtx.c **** }
 3781              		.loc 1 877 0
 3782 011e 0C37     		adds	r7, r7, #12
 3783              		.cfi_def_cfa_offset 4
 3784 0120 BD46     		mov	sp, r7
 3785              		.cfi_def_cfa_register 13
 3786              		@ sp needed
 3787 0122 5DF8047B 		ldr	r7, [sp], #4
 3788              		.cfi_restore 7
 3789              		.cfi_def_cfa_offset 0
 3790 0126 7047     		bx	lr
 3791              	.L178:
 3792              		.align	2
 3793              	.L177:
 3794 0128 00000000 		.word	clkn_offset
 3795 012c 00000000 		.word	clkn
 3796 0130 00000000 		.word	le
 3797 0134 00000000 		.word	hop_mode
 3798 0138 00000000 		.word	do_hop
 3799 013c 3CC00920 		.word	537509948
 3800 0140 00000000 		.word	hop_timeout
 3801 0144 00000000 		.word	last_hop
 3802 0148 18400040 		.word	1073758232
 3803 014c 00000000 		.word	clk100ns_offset
 3804              		.cfi_endproc
 3805              	.LFE11:
 3807              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3808              		.align	2
ARM GAS  /tmp/ccSuvgbr.s 			page 82


 3809              		.global	EINT3_IRQHandler
 3810              		.thumb
 3811              		.thumb_func
 3813              	EINT3_IRQHandler:
 3814              	.LFB12:
 878:bluetooth_rxtx.c **** 
 879:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 880:bluetooth_rxtx.c **** #ifndef TC13BADGE
 881:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 882:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 883:bluetooth_rxtx.c **** {
 3815              		.loc 1 883 0
 3816              		.cfi_startproc
 3817              		@ args = 0, pretend = 0, frame = 0
 3818              		@ frame_needed = 1, uses_anonymous_args = 0
 3819              		@ link register save eliminated.
 3820 0000 80B4     		push	{r7}
 3821              		.cfi_def_cfa_offset 4
 3822              		.cfi_offset 7, -4
 3823 0002 00AF     		add	r7, sp, #0
 3824              		.cfi_def_cfa_register 7
 884:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 885:bluetooth_rxtx.c **** 	IO2IntClr   = PIN_GIO6; // clear interrupt
 3825              		.loc 1 885 0
 3826 0004 0A4B     		ldr	r3, .L181
 3827 0006 0422     		movs	r2, #4
 3828 0008 1A60     		str	r2, [r3]
 886:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;           // enable SPI
 3829              		.loc 1 886 0
 3830 000a 0A4B     		ldr	r3, .L181+4
 3831 000c 4FF08052 		mov	r2, #268435456
 3832 0010 1A60     		str	r2, [r3]
 887:bluetooth_rxtx.c **** 	cs_trigger  = 1;        // signal trigger
 3833              		.loc 1 887 0
 3834 0012 094B     		ldr	r3, .L181+8
 3835 0014 0122     		movs	r2, #1
 3836 0016 1A70     		strb	r2, [r3]
 888:bluetooth_rxtx.c **** 	if (hop_mode == HOP_BLUETOOTH)
 3837              		.loc 1 888 0
 3838 0018 084B     		ldr	r3, .L181+12
 3839 001a 1B78     		ldrb	r3, [r3]
 3840 001c DBB2     		uxtb	r3, r3
 3841 001e 022B     		cmp	r3, #2
 3842 0020 02D1     		bne	.L179
 889:bluetooth_rxtx.c **** 		dma_discard = 0;
 3843              		.loc 1 889 0
 3844 0022 074B     		ldr	r3, .L181+16
 3845 0024 0022     		movs	r2, #0
 3846 0026 1A70     		strb	r2, [r3]
 3847              	.L179:
 890:bluetooth_rxtx.c **** 
 891:bluetooth_rxtx.c **** }
 3848              		.loc 1 891 0
 3849 0028 BD46     		mov	sp, r7
 3850              		.cfi_def_cfa_register 13
 3851              		@ sp needed
 3852 002a 5DF8047B 		ldr	r7, [sp], #4
ARM GAS  /tmp/ccSuvgbr.s 			page 83


 3853              		.cfi_restore 7
 3854              		.cfi_def_cfa_offset 0
 3855 002e 7047     		bx	lr
 3856              	.L182:
 3857              		.align	2
 3858              	.L181:
 3859 0030 AC800240 		.word	1073905836
 3860 0034 9CC00920 		.word	537510044
 3861 0038 00000000 		.word	cs_trigger
 3862 003c 00000000 		.word	hop_mode
 3863 0040 00000000 		.word	dma_discard
 3864              		.cfi_endproc
 3865              	.LFE12:
 3867              		.section	.text.msleep,"ax",%progbits
 3868              		.align	2
 3869              		.thumb
 3870              		.thumb_func
 3872              	msleep:
 3873              	.LFB13:
 892:bluetooth_rxtx.c **** #endif // TC13BADGE
 893:bluetooth_rxtx.c **** 
 894:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
 895:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 896:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 897:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 898:bluetooth_rxtx.c **** {
 3874              		.loc 1 898 0
 3875              		.cfi_startproc
 3876              		@ args = 0, pretend = 0, frame = 16
 3877              		@ frame_needed = 1, uses_anonymous_args = 0
 3878              		@ link register save eliminated.
 3879 0000 80B4     		push	{r7}
 3880              		.cfi_def_cfa_offset 4
 3881              		.cfi_offset 7, -4
 3882 0002 85B0     		sub	sp, sp, #20
 3883              		.cfi_def_cfa_offset 24
 3884 0004 00AF     		add	r7, sp, #0
 3885              		.cfi_def_cfa_register 7
 3886 0006 7860     		str	r0, [r7, #4]
 899:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 3125 / 1000;  // millis -> clkn ticks
 3887              		.loc 1 899 0
 3888 0008 7B68     		ldr	r3, [r7, #4]
 3889 000a 40F63542 		movw	r2, #3125
 3890 000e 02FB03F3 		mul	r3, r2, r3
 3891 0012 094A     		ldr	r2, .L185
 3892 0014 A2FB0323 		umull	r2, r3, r2, r3
 3893 0018 9A09     		lsrs	r2, r3, #6
 3894 001a 084B     		ldr	r3, .L185+4
 3895 001c 1B68     		ldr	r3, [r3]
 3896 001e 1344     		add	r3, r3, r2
 3897 0020 FB60     		str	r3, [r7, #12]
 3898              	.L184:
 900:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 3899              		.loc 1 900 0 discriminator 1
 3900 0022 064B     		ldr	r3, .L185+4
 3901 0024 1A68     		ldr	r2, [r3]
 3902 0026 FB68     		ldr	r3, [r7, #12]
ARM GAS  /tmp/ccSuvgbr.s 			page 84


 3903 0028 9A42     		cmp	r2, r3
 3904 002a FAD3     		bcc	.L184
 901:bluetooth_rxtx.c **** }
 3905              		.loc 1 901 0
 3906 002c 1437     		adds	r7, r7, #20
 3907              		.cfi_def_cfa_offset 4
 3908 002e BD46     		mov	sp, r7
 3909              		.cfi_def_cfa_register 13
 3910              		@ sp needed
 3911 0030 5DF8047B 		ldr	r7, [sp], #4
 3912              		.cfi_restore 7
 3913              		.cfi_def_cfa_offset 0
 3914 0034 7047     		bx	lr
 3915              	.L186:
 3916 0036 00BF     		.align	2
 3917              	.L185:
 3918 0038 D34D6210 		.word	274877907
 3919 003c 00000000 		.word	clkn
 3920              		.cfi_endproc
 3921              	.LFE13:
 3923              		.section	.text.dma_init,"ax",%progbits
 3924              		.align	2
 3925              		.thumb
 3926              		.thumb_func
 3928              	dma_init:
 3929              	.LFB14:
 902:bluetooth_rxtx.c **** 
 903:bluetooth_rxtx.c **** static void dma_init()
 904:bluetooth_rxtx.c **** {
 3930              		.loc 1 904 0
 3931              		.cfi_startproc
 3932              		@ args = 0, pretend = 0, frame = 0
 3933              		@ frame_needed = 1, uses_anonymous_args = 0
 3934              		@ link register save eliminated.
 3935 0000 80B4     		push	{r7}
 3936              		.cfi_def_cfa_offset 4
 3937              		.cfi_offset 7, -4
 3938 0002 00AF     		add	r7, sp, #0
 3939              		.cfi_def_cfa_register 7
 905:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 906:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 3940              		.loc 1 906 0
 3941 0004 334A     		ldr	r2, .L189
 3942 0006 334B     		ldr	r3, .L189
 3943 0008 1B68     		ldr	r3, [r3]
 3944 000a 43F00053 		orr	r3, r3, #536870912
 3945 000e 1360     		str	r3, [r2]
 907:bluetooth_rxtx.c **** 
 908:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
 909:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 3946              		.loc 1 909 0
 3947 0010 314B     		ldr	r3, .L189+4
 3948 0012 0022     		movs	r2, #0
 3949 0014 1A60     		str	r2, [r3]
 910:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 3950              		.loc 1 910 0
 3951 0016 314B     		ldr	r3, .L189+8
ARM GAS  /tmp/ccSuvgbr.s 			page 85


 3952 0018 0022     		movs	r2, #0
 3953 001a 1A60     		str	r2, [r3]
 911:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 3954              		.loc 1 911 0
 3955 001c 304B     		ldr	r3, .L189+12
 3956 001e 0022     		movs	r2, #0
 3957 0020 1A60     		str	r2, [r3]
 912:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 3958              		.loc 1 912 0
 3959 0022 304B     		ldr	r3, .L189+16
 3960 0024 0022     		movs	r2, #0
 3961 0026 1A60     		str	r2, [r3]
 913:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 3962              		.loc 1 913 0
 3963 0028 2F4B     		ldr	r3, .L189+20
 3964 002a 0022     		movs	r2, #0
 3965 002c 1A60     		str	r2, [r3]
 914:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 3966              		.loc 1 914 0
 3967 002e 2F4B     		ldr	r3, .L189+24
 3968 0030 0022     		movs	r2, #0
 3969 0032 1A60     		str	r2, [r3]
 915:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 3970              		.loc 1 915 0
 3971 0034 2E4B     		ldr	r3, .L189+28
 3972 0036 0022     		movs	r2, #0
 3973 0038 1A60     		str	r2, [r3]
 916:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 3974              		.loc 1 916 0
 3975 003a 2E4B     		ldr	r3, .L189+32
 3976 003c 0022     		movs	r2, #0
 3977 003e 1A60     		str	r2, [r3]
 917:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 3978              		.loc 1 917 0
 3979 0040 2D4B     		ldr	r3, .L189+36
 3980 0042 FF22     		movs	r2, #255
 3981 0044 1A60     		str	r2, [r3]
 918:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 3982              		.loc 1 918 0
 3983 0046 2D4B     		ldr	r3, .L189+40
 3984 0048 FF22     		movs	r2, #255
 3985 004a 1A60     		str	r2, [r3]
 919:bluetooth_rxtx.c **** 
 920:bluetooth_rxtx.c **** 	/* DMA linked lists */
 921:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 3986              		.loc 1 921 0
 3987 004c 2C4B     		ldr	r3, .L189+44
 3988 004e 2D4A     		ldr	r2, .L189+48
 3989 0050 1A60     		str	r2, [r3]
 922:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 3990              		.loc 1 922 0
 3991 0052 2D4A     		ldr	r2, .L189+52
 3992 0054 2A4B     		ldr	r3, .L189+44
 3993 0056 5A60     		str	r2, [r3, #4]
 923:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 3994              		.loc 1 923 0
 3995 0058 2C4A     		ldr	r2, .L189+56
ARM GAS  /tmp/ccSuvgbr.s 			page 86


 3996 005a 294B     		ldr	r3, .L189+44
 3997 005c 9A60     		str	r2, [r3, #8]
 924:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 3998              		.loc 1 924 0
 3999 005e 284B     		ldr	r3, .L189+44
 4000 0060 2B4A     		ldr	r2, .L189+60
 4001 0062 DA60     		str	r2, [r3, #12]
 925:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 926:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 927:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 928:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 929:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 930:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 931:bluetooth_rxtx.c **** 
 932:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4002              		.loc 1 932 0
 4003 0064 294B     		ldr	r3, .L189+56
 4004 0066 274A     		ldr	r2, .L189+48
 4005 0068 1A60     		str	r2, [r3]
 933:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4006              		.loc 1 933 0
 4007 006a 2A4A     		ldr	r2, .L189+64
 4008 006c 274B     		ldr	r3, .L189+56
 4009 006e 5A60     		str	r2, [r3, #4]
 934:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4010              		.loc 1 934 0
 4011 0070 234A     		ldr	r2, .L189+44
 4012 0072 264B     		ldr	r3, .L189+56
 4013 0074 9A60     		str	r2, [r3, #8]
 935:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4014              		.loc 1 935 0
 4015 0076 254B     		ldr	r3, .L189+56
 4016 0078 254A     		ldr	r2, .L189+60
 4017 007a DA60     		str	r2, [r3, #12]
 936:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 937:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 938:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 939:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 940:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 941:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 942:bluetooth_rxtx.c **** 
 943:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
 944:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4018              		.loc 1 944 0
 4019 007c 264B     		ldr	r3, .L189+68
 4020 007e 4FF08062 		mov	r2, #67108864
 4021 0082 1A60     		str	r2, [r3]
 945:bluetooth_rxtx.c **** 
 946:bluetooth_rxtx.c **** 	/* enable DMA globally */
 947:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4022              		.loc 1 947 0
 4023 0084 254B     		ldr	r3, .L189+72
 4024 0086 0122     		movs	r2, #1
 4025 0088 1A60     		str	r2, [r3]
 948:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4026              		.loc 1 948 0
 4027 008a 00BF     		nop
ARM GAS  /tmp/ccSuvgbr.s 			page 87


 4028              	.L188:
 4029              		.loc 1 948 0 is_stmt 0 discriminator 1
 4030 008c 234B     		ldr	r3, .L189+72
 4031 008e 1B68     		ldr	r3, [r3]
 4032 0090 03F00103 		and	r3, r3, #1
 4033 0094 002B     		cmp	r3, #0
 4034 0096 F9D0     		beq	.L188
 949:bluetooth_rxtx.c **** 
 950:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
 951:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4035              		.loc 1 951 0 is_stmt 1
 4036 0098 214A     		ldr	r2, .L189+76
 4037 009a 194B     		ldr	r3, .L189+44
 4038 009c 1B68     		ldr	r3, [r3]
 4039 009e 1360     		str	r3, [r2]
 952:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4040              		.loc 1 952 0
 4041 00a0 204A     		ldr	r2, .L189+80
 4042 00a2 174B     		ldr	r3, .L189+44
 4043 00a4 5B68     		ldr	r3, [r3, #4]
 4044 00a6 1360     		str	r3, [r2]
 953:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4045              		.loc 1 953 0
 4046 00a8 1F4A     		ldr	r2, .L189+84
 4047 00aa 154B     		ldr	r3, .L189+44
 4048 00ac 9B68     		ldr	r3, [r3, #8]
 4049 00ae 1360     		str	r3, [r2]
 954:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4050              		.loc 1 954 0
 4051 00b0 1E4A     		ldr	r2, .L189+88
 4052 00b2 134B     		ldr	r3, .L189+44
 4053 00b4 DB68     		ldr	r3, [r3, #12]
 4054 00b6 1360     		str	r3, [r2]
 955:bluetooth_rxtx.c **** 	DMACC0Config =
 4055              		.loc 1 955 0
 4056 00b8 074B     		ldr	r3, .L189+4
 4057 00ba 4DF20602 		movw	r2, #53254
 4058 00be 1A60     		str	r2, [r3]
 956:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
 957:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
 958:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
 959:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
 960:bluetooth_rxtx.c **** 
 961:bluetooth_rxtx.c **** 	/* reset interrupt counters */
 962:bluetooth_rxtx.c **** 	rx_tc = 0;
 4059              		.loc 1 962 0
 4060 00c0 1B4B     		ldr	r3, .L189+92
 4061 00c2 0022     		movs	r2, #0
 4062 00c4 1A60     		str	r2, [r3]
 963:bluetooth_rxtx.c **** 	rx_err = 0;
 4063              		.loc 1 963 0
 4064 00c6 1B4B     		ldr	r3, .L189+96
 4065 00c8 0022     		movs	r2, #0
 4066 00ca 1A60     		str	r2, [r3]
 964:bluetooth_rxtx.c **** }
 4067              		.loc 1 964 0
 4068 00cc BD46     		mov	sp, r7
ARM GAS  /tmp/ccSuvgbr.s 			page 88


 4069              		.cfi_def_cfa_register 13
 4070              		@ sp needed
 4071 00ce 5DF8047B 		ldr	r7, [sp], #4
 4072              		.cfi_restore 7
 4073              		.cfi_def_cfa_offset 0
 4074 00d2 7047     		bx	lr
 4075              	.L190:
 4076              		.align	2
 4077              	.L189:
 4078 00d4 C4C00F40 		.word	1074774212
 4079 00d8 10410050 		.word	1342193936
 4080 00dc 30410050 		.word	1342193968
 4081 00e0 50410050 		.word	1342194000
 4082 00e4 70410050 		.word	1342194032
 4083 00e8 90410050 		.word	1342194064
 4084 00ec B0410050 		.word	1342194096
 4085 00f0 D0410050 		.word	1342194128
 4086 00f4 F0410050 		.word	1342194160
 4087 00f8 08400050 		.word	1342193672
 4088 00fc 10400050 		.word	1342193680
 4089 0100 00000000 		.word	rx_dma_lli1
 4090 0104 08000340 		.word	1073938440
 4091 0108 00000000 		.word	rxbuf1
 4092 010c 00000000 		.word	rx_dma_lli2
 4093 0110 32900088 		.word	-2013229006
 4094 0114 00000000 		.word	rxbuf2
 4095 0118 80E100E0 		.word	-536813184
 4096 011c 30400050 		.word	1342193712
 4097 0120 00410050 		.word	1342193920
 4098 0124 04410050 		.word	1342193924
 4099 0128 08410050 		.word	1342193928
 4100 012c 0C410050 		.word	1342193932
 4101 0130 00000000 		.word	rx_tc
 4102 0134 00000000 		.word	rx_err
 4103              		.cfi_endproc
 4104              	.LFE14:
 4106              		.section	.text.dma_init_le,"ax",%progbits
 4107              		.align	2
 4108              		.thumb
 4109              		.thumb_func
 4111              	dma_init_le:
 4112              	.LFB15:
 965:bluetooth_rxtx.c **** 
 966:bluetooth_rxtx.c **** static void dma_init_le()
 967:bluetooth_rxtx.c **** {
 4113              		.loc 1 967 0
 4114              		.cfi_startproc
 4115              		@ args = 0, pretend = 0, frame = 8
 4116              		@ frame_needed = 1, uses_anonymous_args = 0
 4117              		@ link register save eliminated.
 4118 0000 80B4     		push	{r7}
 4119              		.cfi_def_cfa_offset 4
 4120              		.cfi_offset 7, -4
 4121 0002 83B0     		sub	sp, sp, #12
 4122              		.cfi_def_cfa_offset 16
 4123 0004 00AF     		add	r7, sp, #0
 4124              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccSuvgbr.s 			page 89


 968:bluetooth_rxtx.c **** 	int i;
 969:bluetooth_rxtx.c **** 
 970:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 971:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4125              		.loc 1 971 0
 4126 0006 3F4A     		ldr	r2, .L197
 4127 0008 3E4B     		ldr	r3, .L197
 4128 000a 1B68     		ldr	r3, [r3]
 4129 000c 43F00053 		orr	r3, r3, #536870912
 4130 0010 1360     		str	r3, [r2]
 972:bluetooth_rxtx.c **** 
 973:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
 974:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4131              		.loc 1 974 0
 4132 0012 3D4B     		ldr	r3, .L197+4
 4133 0014 0022     		movs	r2, #0
 4134 0016 1A60     		str	r2, [r3]
 975:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4135              		.loc 1 975 0
 4136 0018 3C4B     		ldr	r3, .L197+8
 4137 001a 0022     		movs	r2, #0
 4138 001c 1A60     		str	r2, [r3]
 976:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4139              		.loc 1 976 0
 4140 001e 3C4B     		ldr	r3, .L197+12
 4141 0020 0022     		movs	r2, #0
 4142 0022 1A60     		str	r2, [r3]
 977:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4143              		.loc 1 977 0
 4144 0024 3B4B     		ldr	r3, .L197+16
 4145 0026 0022     		movs	r2, #0
 4146 0028 1A60     		str	r2, [r3]
 978:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4147              		.loc 1 978 0
 4148 002a 3B4B     		ldr	r3, .L197+20
 4149 002c 0022     		movs	r2, #0
 4150 002e 1A60     		str	r2, [r3]
 979:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4151              		.loc 1 979 0
 4152 0030 3A4B     		ldr	r3, .L197+24
 4153 0032 0022     		movs	r2, #0
 4154 0034 1A60     		str	r2, [r3]
 980:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4155              		.loc 1 980 0
 4156 0036 3A4B     		ldr	r3, .L197+28
 4157 0038 0022     		movs	r2, #0
 4158 003a 1A60     		str	r2, [r3]
 981:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4159              		.loc 1 981 0
 4160 003c 394B     		ldr	r3, .L197+32
 4161 003e 0022     		movs	r2, #0
 4162 0040 1A60     		str	r2, [r3]
 982:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4163              		.loc 1 982 0
 4164 0042 394B     		ldr	r3, .L197+36
 4165 0044 FF22     		movs	r2, #255
 4166 0046 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 90


 983:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4167              		.loc 1 983 0
 4168 0048 384B     		ldr	r3, .L197+40
 4169 004a FF22     		movs	r2, #255
 4170 004c 1A60     		str	r2, [r3]
 984:bluetooth_rxtx.c **** 
 985:bluetooth_rxtx.c **** 	/* enable DMA globally */
 986:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4171              		.loc 1 986 0
 4172 004e 384B     		ldr	r3, .L197+44
 4173 0050 0122     		movs	r2, #1
 4174 0052 1A60     		str	r2, [r3]
 987:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4175              		.loc 1 987 0
 4176 0054 00BF     		nop
 4177              	.L192:
 4178              		.loc 1 987 0 is_stmt 0 discriminator 1
 4179 0056 364B     		ldr	r3, .L197+44
 4180 0058 1B68     		ldr	r3, [r3]
 4181 005a 03F00103 		and	r3, r3, #1
 4182 005e 002B     		cmp	r3, #0
 4183 0060 F9D0     		beq	.L192
 988:bluetooth_rxtx.c **** 
 989:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4184              		.loc 1 989 0 is_stmt 1
 4185 0062 0023     		movs	r3, #0
 4186 0064 7B60     		str	r3, [r7, #4]
 4187 0066 2AE0     		b	.L193
 4188              	.L196:
 990:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4189              		.loc 1 990 0
 4190 0068 324A     		ldr	r2, .L197+48
 4191 006a 7B68     		ldr	r3, [r7, #4]
 4192 006c 1B01     		lsls	r3, r3, #4
 4193 006e 1344     		add	r3, r3, r2
 4194 0070 314A     		ldr	r2, .L197+52
 4195 0072 1A60     		str	r2, [r3]
 991:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4196              		.loc 1 991 0
 4197 0074 7B68     		ldr	r3, [r7, #4]
 4198 0076 9B00     		lsls	r3, r3, #2
 4199 0078 304A     		ldr	r2, .L197+56
 4200 007a 1344     		add	r3, r3, r2
 4201 007c 1946     		mov	r1, r3
 4202 007e 2D4A     		ldr	r2, .L197+48
 4203 0080 7B68     		ldr	r3, [r7, #4]
 4204 0082 1B01     		lsls	r3, r3, #4
 4205 0084 1344     		add	r3, r3, r2
 4206 0086 5960     		str	r1, [r3, #4]
 992:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4207              		.loc 1 992 0
 4208 0088 7B68     		ldr	r3, [r7, #4]
 4209 008a 092B     		cmp	r3, #9
 4210 008c 06DC     		bgt	.L194
 4211              		.loc 1 992 0 is_stmt 0 discriminator 1
 4212 008e 7B68     		ldr	r3, [r7, #4]
 4213 0090 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 91


 4214 0092 1B01     		lsls	r3, r3, #4
 4215 0094 274A     		ldr	r2, .L197+48
 4216 0096 1344     		add	r3, r3, r2
 4217 0098 1A46     		mov	r2, r3
 4218 009a 00E0     		b	.L195
 4219              	.L194:
 4220              		.loc 1 992 0 discriminator 2
 4221 009c 0022     		movs	r2, #0
 4222              	.L195:
 4223              		.loc 1 992 0 discriminator 4
 4224 009e 2549     		ldr	r1, .L197+48
 4225 00a0 7B68     		ldr	r3, [r7, #4]
 4226 00a2 1B01     		lsls	r3, r3, #4
 4227 00a4 0B44     		add	r3, r3, r1
 4228 00a6 0833     		adds	r3, r3, #8
 4229 00a8 1A60     		str	r2, [r3]
 993:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4230              		.loc 1 993 0 is_stmt 1 discriminator 4
 4231 00aa 224A     		ldr	r2, .L197+48
 4232 00ac 7B68     		ldr	r3, [r7, #4]
 4233 00ae 1B01     		lsls	r3, r3, #4
 4234 00b0 1344     		add	r3, r3, r2
 4235 00b2 0833     		adds	r3, r3, #8
 4236 00b4 224A     		ldr	r2, .L197+60
 4237 00b6 5A60     		str	r2, [r3, #4]
 989:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4238              		.loc 1 989 0 discriminator 4
 4239 00b8 7B68     		ldr	r3, [r7, #4]
 4240 00ba 0133     		adds	r3, r3, #1
 4241 00bc 7B60     		str	r3, [r7, #4]
 4242              	.L193:
 989:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4243              		.loc 1 989 0 is_stmt 0 discriminator 2
 4244 00be 7B68     		ldr	r3, [r7, #4]
 4245 00c0 0A2B     		cmp	r3, #10
 4246 00c2 D1DD     		ble	.L196
 994:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
 995:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
 996:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
 997:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
 998:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
 999:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1000:bluetooth_rxtx.c **** 	}
1001:bluetooth_rxtx.c **** 
1002:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1003:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4247              		.loc 1 1003 0 is_stmt 1
 4248 00c4 1F4A     		ldr	r2, .L197+64
 4249 00c6 1B4B     		ldr	r3, .L197+48
 4250 00c8 1B68     		ldr	r3, [r3]
 4251 00ca 1360     		str	r3, [r2]
1004:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4252              		.loc 1 1004 0
 4253 00cc 1E4A     		ldr	r2, .L197+68
 4254 00ce 194B     		ldr	r3, .L197+48
 4255 00d0 5B68     		ldr	r3, [r3, #4]
 4256 00d2 1360     		str	r3, [r2]
ARM GAS  /tmp/ccSuvgbr.s 			page 92


1005:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4257              		.loc 1 1005 0
 4258 00d4 1D4A     		ldr	r2, .L197+72
 4259 00d6 174B     		ldr	r3, .L197+48
 4260 00d8 9B68     		ldr	r3, [r3, #8]
 4261 00da 1360     		str	r3, [r2]
1006:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4262              		.loc 1 1006 0
 4263 00dc 1C4A     		ldr	r2, .L197+76
 4264 00de 154B     		ldr	r3, .L197+48
 4265 00e0 DB68     		ldr	r3, [r3, #12]
 4266 00e2 1360     		str	r3, [r2]
1007:bluetooth_rxtx.c **** 	DMACC0Config =
 4267              		.loc 1 1007 0
 4268 00e4 084B     		ldr	r3, .L197+4
 4269 00e6 4DF20602 		movw	r2, #53254
 4270 00ea 1A60     		str	r2, [r3]
1008:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1009:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1010:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1011:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1012:bluetooth_rxtx.c **** 
1013:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1014:bluetooth_rxtx.c **** 	rx_tc = 0;
 4271              		.loc 1 1014 0
 4272 00ec 194B     		ldr	r3, .L197+80
 4273 00ee 0022     		movs	r2, #0
 4274 00f0 1A60     		str	r2, [r3]
1015:bluetooth_rxtx.c **** 	rx_err = 0;
 4275              		.loc 1 1015 0
 4276 00f2 194B     		ldr	r3, .L197+84
 4277 00f4 0022     		movs	r2, #0
 4278 00f6 1A60     		str	r2, [r3]
1016:bluetooth_rxtx.c **** }
 4279              		.loc 1 1016 0
 4280 00f8 0C37     		adds	r7, r7, #12
 4281              		.cfi_def_cfa_offset 4
 4282 00fa BD46     		mov	sp, r7
 4283              		.cfi_def_cfa_register 13
 4284              		@ sp needed
 4285 00fc 5DF8047B 		ldr	r7, [sp], #4
 4286              		.cfi_restore 7
 4287              		.cfi_def_cfa_offset 0
 4288 0100 7047     		bx	lr
 4289              	.L198:
 4290 0102 00BF     		.align	2
 4291              	.L197:
 4292 0104 C4C00F40 		.word	1074774212
 4293 0108 10410050 		.word	1342193936
 4294 010c 30410050 		.word	1342193968
 4295 0110 50410050 		.word	1342194000
 4296 0114 70410050 		.word	1342194032
 4297 0118 90410050 		.word	1342194064
 4298 011c B0410050 		.word	1342194096
 4299 0120 D0410050 		.word	1342194128
 4300 0124 F0410050 		.word	1342194160
 4301 0128 08400050 		.word	1342193672
ARM GAS  /tmp/ccSuvgbr.s 			page 93


 4302 012c 10400050 		.word	1342193680
 4303 0130 30400050 		.word	1342193712
 4304 0134 00000000 		.word	le_dma_lli
 4305 0138 08000340 		.word	1073938440
 4306 013c 00000000 		.word	rxbuf1
 4307 0140 04100088 		.word	-2013261820
 4308 0144 00410050 		.word	1342193920
 4309 0148 04410050 		.word	1342193924
 4310 014c 08410050 		.word	1342193928
 4311 0150 0C410050 		.word	1342193932
 4312 0154 00000000 		.word	rx_tc
 4313 0158 00000000 		.word	rx_err
 4314              		.cfi_endproc
 4315              	.LFE15:
 4317              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4318              		.align	2
 4319              		.global	bt_stream_dma_handler
 4320              		.thumb
 4321              		.thumb_func
 4323              	bt_stream_dma_handler:
 4324              	.LFB16:
1017:bluetooth_rxtx.c **** 
1018:bluetooth_rxtx.c **** void bt_stream_dma_handler(void)
1019:bluetooth_rxtx.c **** {
 4325              		.loc 1 1019 0
 4326              		.cfi_startproc
 4327              		@ args = 0, pretend = 0, frame = 8
 4328              		@ frame_needed = 1, uses_anonymous_args = 0
 4329              		@ link register save eliminated.
 4330 0000 80B4     		push	{r7}
 4331              		.cfi_def_cfa_offset 4
 4332              		.cfi_offset 7, -4
 4333 0002 83B0     		sub	sp, sp, #12
 4334              		.cfi_def_cfa_offset 16
 4335 0004 00AF     		add	r7, sp, #0
 4336              		.cfi_def_cfa_register 7
1020:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1021:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4337              		.loc 1 1021 0
 4338 0006 294B     		ldr	r3, .L203
 4339 0008 1B68     		ldr	r3, [r3]
 4340 000a 03F00103 		and	r3, r3, #1
 4341 000e 002B     		cmp	r3, #0
 4342 0010 46D0     		beq	.L199
1022:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4343              		.loc 1 1022 0
 4344 0012 274B     		ldr	r3, .L203+4
 4345 0014 1B68     		ldr	r3, [r3]
 4346 0016 03F00103 		and	r3, r3, #1
 4347 001a 002B     		cmp	r3, #0
 4348 001c 32D0     		beq	.L201
 4349              	.LBB11:
1023:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4350              		.loc 1 1023 0
 4351 001e 254B     		ldr	r3, .L203+8
 4352 0020 0122     		movs	r2, #1
 4353 0022 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 94


1024:bluetooth_rxtx.c **** 
1025:bluetooth_rxtx.c **** 			if (hop_mode == HOP_BLUETOOTH)
 4354              		.loc 1 1025 0
 4355 0024 244B     		ldr	r3, .L203+12
 4356 0026 1B78     		ldrb	r3, [r3]
 4357 0028 DBB2     		uxtb	r3, r3
 4358 002a 022B     		cmp	r3, #2
 4359 002c 03D1     		bne	.L202
1026:bluetooth_rxtx.c **** 				DIO_SSEL_SET;
 4360              		.loc 1 1026 0
 4361 002e 234B     		ldr	r3, .L203+16
 4362 0030 4FF08052 		mov	r2, #268435456
 4363 0034 1A60     		str	r2, [r3]
 4364              	.L202:
1027:bluetooth_rxtx.c **** 
1028:bluetooth_rxtx.c **** 			idle_buf_clk100ns  = CLK100NS;
 4365              		.loc 1 1028 0
 4366 0036 224B     		ldr	r3, .L203+20
 4367 0038 1B68     		ldr	r3, [r3]
 4368 003a C3F31303 		ubfx	r3, r3, #0, #20
 4369 003e 40F63542 		movw	r2, #3125
 4370 0042 02FB03F2 		mul	r2, r2, r3
 4371 0046 1F4B     		ldr	r3, .L203+24
 4372 0048 1B68     		ldr	r3, [r3]
 4373 004a 1344     		add	r3, r3, r2
 4374 004c 1E4A     		ldr	r2, .L203+28
 4375 004e 1360     		str	r3, [r2]
1029:bluetooth_rxtx.c **** 			idle_buf_clkn_high = (clkn >> 20) & 0xff;
 4376              		.loc 1 1029 0
 4377 0050 1B4B     		ldr	r3, .L203+20
 4378 0052 1B68     		ldr	r3, [r3]
 4379 0054 1B0D     		lsrs	r3, r3, #20
 4380 0056 DAB2     		uxtb	r2, r3
 4381 0058 1C4B     		ldr	r3, .L203+32
 4382 005a 1A70     		strb	r2, [r3]
1030:bluetooth_rxtx.c **** 			idle_buf_channel   = channel;
 4383              		.loc 1 1030 0
 4384 005c 1C4B     		ldr	r3, .L203+36
 4385 005e 1B88     		ldrh	r3, [r3]	@ movhi
 4386 0060 9AB2     		uxth	r2, r3
 4387 0062 1C4B     		ldr	r3, .L203+40
 4388 0064 1A80     		strh	r2, [r3]	@ movhi
1031:bluetooth_rxtx.c **** 
1032:bluetooth_rxtx.c **** 			/* Keep buffer swapping in sync with DMA. */
1033:bluetooth_rxtx.c **** 			volatile uint8_t* tmp = active_rxbuf;
 4389              		.loc 1 1033 0
 4390 0066 1C4B     		ldr	r3, .L203+44
 4391 0068 1B68     		ldr	r3, [r3]
 4392 006a 7B60     		str	r3, [r7, #4]
1034:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 4393              		.loc 1 1034 0
 4394 006c 1B4B     		ldr	r3, .L203+48
 4395 006e 1B68     		ldr	r3, [r3]
 4396 0070 194A     		ldr	r2, .L203+44
 4397 0072 1360     		str	r3, [r2]
1035:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 4398              		.loc 1 1035 0
ARM GAS  /tmp/ccSuvgbr.s 			page 95


 4399 0074 194A     		ldr	r2, .L203+48
 4400 0076 7B68     		ldr	r3, [r7, #4]
 4401 0078 1360     		str	r3, [r2]
1036:bluetooth_rxtx.c **** 
1037:bluetooth_rxtx.c **** 			++rx_tc;
 4402              		.loc 1 1037 0
 4403 007a 194B     		ldr	r3, .L203+52
 4404 007c 1B68     		ldr	r3, [r3]
 4405 007e 0133     		adds	r3, r3, #1
 4406 0080 174A     		ldr	r2, .L203+52
 4407 0082 1360     		str	r3, [r2]
 4408              	.L201:
 4409              	.LBE11:
1038:bluetooth_rxtx.c **** 		}
1039:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4410              		.loc 1 1039 0
 4411 0084 174B     		ldr	r3, .L203+56
 4412 0086 1B68     		ldr	r3, [r3]
 4413 0088 03F00103 		and	r3, r3, #1
 4414 008c 002B     		cmp	r3, #0
 4415 008e 07D0     		beq	.L199
1040:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4416              		.loc 1 1040 0
 4417 0090 154B     		ldr	r3, .L203+60
 4418 0092 0122     		movs	r2, #1
 4419 0094 1A60     		str	r2, [r3]
1041:bluetooth_rxtx.c **** 			++rx_err;
 4420              		.loc 1 1041 0
 4421 0096 154B     		ldr	r3, .L203+64
 4422 0098 1B68     		ldr	r3, [r3]
 4423 009a 0133     		adds	r3, r3, #1
 4424 009c 134A     		ldr	r2, .L203+64
 4425 009e 1360     		str	r3, [r2]
 4426              	.L199:
1042:bluetooth_rxtx.c **** 		}
1043:bluetooth_rxtx.c **** 	}
1044:bluetooth_rxtx.c **** }
 4427              		.loc 1 1044 0
 4428 00a0 0C37     		adds	r7, r7, #12
 4429              		.cfi_def_cfa_offset 4
 4430 00a2 BD46     		mov	sp, r7
 4431              		.cfi_def_cfa_register 13
 4432              		@ sp needed
 4433 00a4 5DF8047B 		ldr	r7, [sp], #4
 4434              		.cfi_restore 7
 4435              		.cfi_def_cfa_offset 0
 4436 00a8 7047     		bx	lr
 4437              	.L204:
 4438 00aa 00BF     		.align	2
 4439              	.L203:
 4440 00ac 00400050 		.word	1342193664
 4441 00b0 04400050 		.word	1342193668
 4442 00b4 08400050 		.word	1342193672
 4443 00b8 00000000 		.word	hop_mode
 4444 00bc 98C00920 		.word	537510040
 4445 00c0 00000000 		.word	clkn
 4446 00c4 08400040 		.word	1073758216
ARM GAS  /tmp/ccSuvgbr.s 			page 96


 4447 00c8 00000000 		.word	idle_buf_clk100ns
 4448 00cc 00000000 		.word	idle_buf_clkn_high
 4449 00d0 00000000 		.word	channel
 4450 00d4 00000000 		.word	idle_buf_channel
 4451 00d8 00000000 		.word	active_rxbuf
 4452 00dc 00000000 		.word	idle_rxbuf
 4453 00e0 00000000 		.word	rx_tc
 4454 00e4 0C400050 		.word	1342193676
 4455 00e8 10400050 		.word	1342193680
 4456 00ec 00000000 		.word	rx_err
 4457              		.cfi_endproc
 4458              	.LFE16:
 4460              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4461              		.align	2
 4462              		.global	DMA_IRQHandler
 4463              		.thumb
 4464              		.thumb_func
 4466              	DMA_IRQHandler:
 4467              	.LFB17:
1045:bluetooth_rxtx.c **** 
1046:bluetooth_rxtx.c **** void DMA_IRQHandler()
1047:bluetooth_rxtx.c **** {
 4468              		.loc 1 1047 0
 4469              		.cfi_startproc
 4470              		@ args = 0, pretend = 0, frame = 0
 4471              		@ frame_needed = 1, uses_anonymous_args = 0
 4472 0000 80B5     		push	{r7, lr}
 4473              		.cfi_def_cfa_offset 8
 4474              		.cfi_offset 7, -8
 4475              		.cfi_offset 14, -4
 4476 0002 00AF     		add	r7, sp, #0
 4477              		.cfi_def_cfa_register 7
1048:bluetooth_rxtx.c **** 	switch (mode) {
 4478              		.loc 1 1048 0
 4479 0004 124B     		ldr	r3, .L209
 4480 0006 1B78     		ldrb	r3, [r3]
 4481 0008 DBB2     		uxtb	r3, r3
 4482 000a 013B     		subs	r3, r3, #1
 4483 000c 0B2B     		cmp	r3, #11
 4484 000e 1ED8     		bhi	.L205
 4485 0010 01A2     		adr	r2, .L208
 4486 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4487 0016 00BF     		.p2align 2
 4488              	.L208:
 4489 0018 49000000 		.word	.L207+1
 4490 001c 4F000000 		.word	.L205+1
 4491 0020 4F000000 		.word	.L205+1
 4492 0024 49000000 		.word	.L207+1
 4493 0028 4F000000 		.word	.L205+1
 4494 002c 4F000000 		.word	.L205+1
 4495 0030 4F000000 		.word	.L205+1
 4496 0034 49000000 		.word	.L207+1
 4497 0038 49000000 		.word	.L207+1
 4498 003c 49000000 		.word	.L207+1
 4499 0040 4F000000 		.word	.L205+1
 4500 0044 49000000 		.word	.L207+1
 4501              		.p2align 1
ARM GAS  /tmp/ccSuvgbr.s 			page 97


 4502              	.L207:
1049:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1050:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1051:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1052:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1053:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1054:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1055:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4503              		.loc 1 1055 0
 4504 0048 FFF7FEFF 		bl	bt_stream_dma_handler
1056:bluetooth_rxtx.c **** 			break;
 4505              		.loc 1 1056 0
 4506 004c 00BF     		nop
 4507              	.L205:
1057:bluetooth_rxtx.c **** 	}
1058:bluetooth_rxtx.c **** }
 4508              		.loc 1 1058 0
 4509 004e 80BD     		pop	{r7, pc}
 4510              	.L210:
 4511              		.align	2
 4512              	.L209:
 4513 0050 00000000 		.word	mode
 4514              		.cfi_endproc
 4515              	.LFE17:
 4517              		.section	.text.dio_ssp_start,"ax",%progbits
 4518              		.align	2
 4519              		.thumb
 4520              		.thumb_func
 4522              	dio_ssp_start:
 4523              	.LFB18:
1059:bluetooth_rxtx.c **** 
1060:bluetooth_rxtx.c **** static void dio_ssp_start()
1061:bluetooth_rxtx.c **** {
 4524              		.loc 1 1061 0
 4525              		.cfi_startproc
 4526              		@ args = 0, pretend = 0, frame = 0
 4527              		@ frame_needed = 1, uses_anonymous_args = 0
 4528              		@ link register save eliminated.
 4529 0000 80B4     		push	{r7}
 4530              		.cfi_def_cfa_offset 4
 4531              		.cfi_offset 7, -4
 4532 0002 00AF     		add	r7, sp, #0
 4533              		.cfi_def_cfa_register 7
1062:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1063:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4534              		.loc 1 1063 0
 4535 0004 104B     		ldr	r3, .L212
 4536 0006 4FF08052 		mov	r2, #268435456
 4537 000a 1A60     		str	r2, [r3]
1064:bluetooth_rxtx.c **** 
1065:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1066:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4538              		.loc 1 1066 0
 4539 000c 0F4A     		ldr	r2, .L212+4
 4540 000e 0F4B     		ldr	r3, .L212+4
 4541 0010 1B68     		ldr	r3, [r3]
 4542 0012 43F00103 		orr	r3, r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 98


 4543 0016 1360     		str	r3, [r2]
1067:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4544              		.loc 1 1067 0
 4545 0018 0D4A     		ldr	r2, .L212+8
 4546 001a 0D4B     		ldr	r3, .L212+8
 4547 001c 1B68     		ldr	r3, [r3]
 4548 001e 43F00203 		orr	r3, r3, #2
 4549 0022 1360     		str	r3, [r2]
1068:bluetooth_rxtx.c **** 
1069:bluetooth_rxtx.c **** 	/* enable DMA */
1070:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 4550              		.loc 1 1070 0
 4551 0024 0B4A     		ldr	r2, .L212+12
 4552 0026 0B4B     		ldr	r3, .L212+12
 4553 0028 1B68     		ldr	r3, [r3]
 4554 002a 43F00103 		orr	r3, r3, #1
 4555 002e 1360     		str	r3, [r2]
1071:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4556              		.loc 1 1071 0
 4557 0030 094B     		ldr	r3, .L212+16
 4558 0032 4FF08062 		mov	r2, #67108864
 4559 0036 1A60     		str	r2, [r3]
1072:bluetooth_rxtx.c **** 
1073:bluetooth_rxtx.c **** 	/* activate slave select pin */
1074:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4560              		.loc 1 1074 0
 4561 0038 084B     		ldr	r3, .L212+20
 4562 003a 4FF08052 		mov	r2, #268435456
 4563 003e 1A60     		str	r2, [r3]
1075:bluetooth_rxtx.c **** }
 4564              		.loc 1 1075 0
 4565 0040 BD46     		mov	sp, r7
 4566              		.cfi_def_cfa_register 13
 4567              		@ sp needed
 4568 0042 5DF8047B 		ldr	r7, [sp], #4
 4569              		.cfi_restore 7
 4570              		.cfi_def_cfa_offset 0
 4571 0046 7047     		bx	lr
 4572              	.L213:
 4573              		.align	2
 4574              	.L212:
 4575 0048 98C00920 		.word	537510040
 4576 004c 24000340 		.word	1073938468
 4577 0050 04000340 		.word	1073938436
 4578 0054 10410050 		.word	1342193936
 4579 0058 00E100E0 		.word	-536813312
 4580 005c 9CC00920 		.word	537510044
 4581              		.cfi_endproc
 4582              	.LFE18:
 4584              		.section	.text.dio_ssp_stop,"ax",%progbits
 4585              		.align	2
 4586              		.thumb
 4587              		.thumb_func
 4589              	dio_ssp_stop:
 4590              	.LFB19:
1076:bluetooth_rxtx.c **** 
1077:bluetooth_rxtx.c **** static void dio_ssp_stop()
ARM GAS  /tmp/ccSuvgbr.s 			page 99


1078:bluetooth_rxtx.c **** {
 4591              		.loc 1 1078 0
 4592              		.cfi_startproc
 4593              		@ args = 0, pretend = 0, frame = 0
 4594              		@ frame_needed = 1, uses_anonymous_args = 0
 4595              		@ link register save eliminated.
 4596 0000 80B4     		push	{r7}
 4597              		.cfi_def_cfa_offset 4
 4598              		.cfi_offset 7, -4
 4599 0002 00AF     		add	r7, sp, #0
 4600              		.cfi_def_cfa_register 7
1079:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1080:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4601              		.loc 1 1080 0
 4602 0004 214B     		ldr	r3, .L216
 4603 0006 4FF08052 		mov	r2, #268435456
 4604 000a 1A60     		str	r2, [r3]
1081:bluetooth_rxtx.c **** 
1082:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1083:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 4605              		.loc 1 1083 0
 4606 000c 204A     		ldr	r2, .L216+4
 4607 000e 204B     		ldr	r3, .L216+4
 4608 0010 1B68     		ldr	r3, [r3]
 4609 0012 23F00103 		bic	r3, r3, #1
 4610 0016 1360     		str	r3, [r2]
1084:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 4611              		.loc 1 1084 0
 4612 0018 1E4A     		ldr	r2, .L216+8
 4613 001a 1E4B     		ldr	r3, .L216+8
 4614 001c 1B68     		ldr	r3, [r3]
 4615 001e 23F00203 		bic	r3, r3, #2
 4616 0022 1360     		str	r3, [r2]
1085:bluetooth_rxtx.c **** 
1086:bluetooth_rxtx.c **** 
1087:bluetooth_rxtx.c **** 	// disable DMA engine:
1088:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1089:bluetooth_rxtx.c **** 
1090:bluetooth_rxtx.c **** 	// disable DMA interrupts
1091:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4617              		.loc 1 1091 0
 4618 0024 1C4B     		ldr	r3, .L216+12
 4619 0026 4FF08062 		mov	r2, #67108864
 4620 002a 1A60     		str	r2, [r3]
1092:bluetooth_rxtx.c **** 
1093:bluetooth_rxtx.c **** 	// disable active channels
1094:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4621              		.loc 1 1094 0
 4622 002c 1B4B     		ldr	r3, .L216+16
 4623 002e 0022     		movs	r2, #0
 4624 0030 1A60     		str	r2, [r3]
1095:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4625              		.loc 1 1095 0
 4626 0032 1B4B     		ldr	r3, .L216+20
 4627 0034 0022     		movs	r2, #0
 4628 0036 1A60     		str	r2, [r3]
1096:bluetooth_rxtx.c **** 	DMACC2Config = 0;
ARM GAS  /tmp/ccSuvgbr.s 			page 100


 4629              		.loc 1 1096 0
 4630 0038 1A4B     		ldr	r3, .L216+24
 4631 003a 0022     		movs	r2, #0
 4632 003c 1A60     		str	r2, [r3]
1097:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4633              		.loc 1 1097 0
 4634 003e 1A4B     		ldr	r3, .L216+28
 4635 0040 0022     		movs	r2, #0
 4636 0042 1A60     		str	r2, [r3]
1098:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4637              		.loc 1 1098 0
 4638 0044 194B     		ldr	r3, .L216+32
 4639 0046 0022     		movs	r2, #0
 4640 0048 1A60     		str	r2, [r3]
1099:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4641              		.loc 1 1099 0
 4642 004a 194B     		ldr	r3, .L216+36
 4643 004c 0022     		movs	r2, #0
 4644 004e 1A60     		str	r2, [r3]
1100:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4645              		.loc 1 1100 0
 4646 0050 184B     		ldr	r3, .L216+40
 4647 0052 0022     		movs	r2, #0
 4648 0054 1A60     		str	r2, [r3]
1101:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4649              		.loc 1 1101 0
 4650 0056 184B     		ldr	r3, .L216+44
 4651 0058 0022     		movs	r2, #0
 4652 005a 1A60     		str	r2, [r3]
1102:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4653              		.loc 1 1102 0
 4654 005c 174B     		ldr	r3, .L216+48
 4655 005e FF22     		movs	r2, #255
 4656 0060 1A60     		str	r2, [r3]
1103:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4657              		.loc 1 1103 0
 4658 0062 174B     		ldr	r3, .L216+52
 4659 0064 FF22     		movs	r2, #255
 4660 0066 1A60     		str	r2, [r3]
1104:bluetooth_rxtx.c **** 
1105:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1106:bluetooth_rxtx.c **** 	// register.
1107:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 4661              		.loc 1 1107 0
 4662 0068 164A     		ldr	r2, .L216+56
 4663 006a 164B     		ldr	r3, .L216+56
 4664 006c 1B68     		ldr	r3, [r3]
 4665 006e 23F00103 		bic	r3, r3, #1
 4666 0072 1360     		str	r3, [r2]
1108:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 4667              		.loc 1 1108 0
 4668 0074 00BF     		nop
 4669              	.L215:
 4670              		.loc 1 1108 0 is_stmt 0 discriminator 1
 4671 0076 134B     		ldr	r3, .L216+56
 4672 0078 1B68     		ldr	r3, [r3]
 4673 007a 03F00103 		and	r3, r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 101


 4674 007e 002B     		cmp	r3, #0
 4675 0080 F9D1     		bne	.L215
1109:bluetooth_rxtx.c **** }
 4676              		.loc 1 1109 0 is_stmt 1
 4677 0082 BD46     		mov	sp, r7
 4678              		.cfi_def_cfa_register 13
 4679              		@ sp needed
 4680 0084 5DF8047B 		ldr	r7, [sp], #4
 4681              		.cfi_restore 7
 4682              		.cfi_def_cfa_offset 0
 4683 0088 7047     		bx	lr
 4684              	.L217:
 4685 008a 00BF     		.align	2
 4686              	.L216:
 4687 008c 98C00920 		.word	537510040
 4688 0090 24000340 		.word	1073938468
 4689 0094 04000340 		.word	1073938436
 4690 0098 80E100E0 		.word	-536813184
 4691 009c 10410050 		.word	1342193936
 4692 00a0 30410050 		.word	1342193968
 4693 00a4 50410050 		.word	1342194000
 4694 00a8 70410050 		.word	1342194032
 4695 00ac 90410050 		.word	1342194064
 4696 00b0 B0410050 		.word	1342194096
 4697 00b4 D0410050 		.word	1342194128
 4698 00b8 F0410050 		.word	1342194160
 4699 00bc 08400050 		.word	1342193672
 4700 00c0 10400050 		.word	1342193680
 4701 00c4 30400050 		.word	1342193712
 4702              		.cfi_endproc
 4703              	.LFE19:
 4705              		.section	.text.cc2400_idle,"ax",%progbits
 4706              		.align	2
 4707              		.thumb
 4708              		.thumb_func
 4710              	cc2400_idle:
 4711              	.LFB20:
1110:bluetooth_rxtx.c **** 
1111:bluetooth_rxtx.c **** static void cc2400_idle()
1112:bluetooth_rxtx.c **** {
 4712              		.loc 1 1112 0
 4713              		.cfi_startproc
 4714              		@ args = 0, pretend = 0, frame = 0
 4715              		@ frame_needed = 1, uses_anonymous_args = 0
 4716 0000 80B5     		push	{r7, lr}
 4717              		.cfi_def_cfa_offset 8
 4718              		.cfi_offset 7, -8
 4719              		.cfi_offset 14, -4
 4720 0002 00AF     		add	r7, sp, #0
 4721              		.cfi_def_cfa_register 7
1113:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 4722              		.loc 1 1113 0
 4723 0004 6420     		movs	r0, #100
 4724 0006 FFF7FEFF 		bl	cc2400_strobe
1114:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4725              		.loc 1 1114 0
 4726 000a 00BF     		nop
ARM GAS  /tmp/ccSuvgbr.s 			page 102


 4727              	.L219:
 4728              		.loc 1 1114 0 is_stmt 0 discriminator 1
 4729 000c FFF7FEFF 		bl	cc2400_status
 4730 0010 0346     		mov	r3, r0
 4731 0012 03F00403 		and	r3, r3, #4
 4732 0016 002B     		cmp	r3, #0
 4733 0018 F8D1     		bne	.L219
1115:bluetooth_rxtx.c **** 
1116:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1117:bluetooth_rxtx.c **** 	PAEN_CLR;
 4734              		.loc 1 1117 0 is_stmt 1
 4735 001a 0A4B     		ldr	r3, .L220
 4736 001c 8022     		movs	r2, #128
 4737 001e 1A60     		str	r2, [r3]
1118:bluetooth_rxtx.c **** 	HGM_CLR;
 4738              		.loc 1 1118 0
 4739 0020 084B     		ldr	r3, .L220
 4740 0022 4FF48072 		mov	r2, #256
 4741 0026 1A60     		str	r2, [r3]
1119:bluetooth_rxtx.c **** #endif
1120:bluetooth_rxtx.c **** 
1121:bluetooth_rxtx.c **** 	RXLED_CLR;
 4742              		.loc 1 1121 0
 4743 0028 074B     		ldr	r3, .L220+4
 4744 002a 1022     		movs	r2, #16
 4745 002c 1A60     		str	r2, [r3]
1122:bluetooth_rxtx.c **** 	TXLED_CLR;
 4746              		.loc 1 1122 0
 4747 002e 064B     		ldr	r3, .L220+4
 4748 0030 4FF48072 		mov	r2, #256
 4749 0034 1A60     		str	r2, [r3]
1123:bluetooth_rxtx.c **** 	USRLED_CLR;
 4750              		.loc 1 1123 0
 4751 0036 044B     		ldr	r3, .L220+4
 4752 0038 0222     		movs	r2, #2
 4753 003a 1A60     		str	r2, [r3]
1124:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 4754              		.loc 1 1124 0
 4755 003c 034B     		ldr	r3, .L220+8
 4756 003e 0022     		movs	r2, #0
 4757 0040 1A70     		strb	r2, [r3]
1125:bluetooth_rxtx.c **** }
 4758              		.loc 1 1125 0
 4759 0042 80BD     		pop	{r7, pc}
 4760              	.L221:
 4761              		.align	2
 4762              	.L220:
 4763 0044 5CC00920 		.word	537509980
 4764 0048 3CC00920 		.word	537509948
 4765 004c 00000000 		.word	mode
 4766              		.cfi_endproc
 4767              	.LFE20:
 4769              		.section	.text.cc2400_rx,"ax",%progbits
 4770              		.align	2
 4771              		.thumb
 4772              		.thumb_func
 4774              	cc2400_rx:
ARM GAS  /tmp/ccSuvgbr.s 			page 103


 4775              	.LFB21:
1126:bluetooth_rxtx.c **** 
1127:bluetooth_rxtx.c **** /* start un-buffered rx */
1128:bluetooth_rxtx.c **** static void cc2400_rx()
1129:bluetooth_rxtx.c **** {
 4776              		.loc 1 1129 0
 4777              		.cfi_startproc
 4778              		@ args = 0, pretend = 0, frame = 8
 4779              		@ frame_needed = 1, uses_anonymous_args = 0
 4780 0000 80B5     		push	{r7, lr}
 4781              		.cfi_def_cfa_offset 8
 4782              		.cfi_offset 7, -8
 4783              		.cfi_offset 14, -4
 4784 0002 82B0     		sub	sp, sp, #8
 4785              		.cfi_def_cfa_offset 16
 4786 0004 00AF     		add	r7, sp, #0
 4787              		.cfi_def_cfa_register 7
1130:bluetooth_rxtx.c **** 	u16 mdmctrl;
1131:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4788              		.loc 1 1131 0
 4789 0006 284B     		ldr	r3, .L229
 4790 0008 1B78     		ldrb	r3, [r3]
 4791 000a DBB2     		uxtb	r3, r3
 4792 000c 002B     		cmp	r3, #0
 4793 000e 02D1     		bne	.L223
1132:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4794              		.loc 1 1132 0
 4795 0010 2923     		movs	r3, #41
 4796 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 4797 0014 08E0     		b	.L224
 4798              	.L223:
1133:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4799              		.loc 1 1133 0
 4800 0016 244B     		ldr	r3, .L229
 4801 0018 1B78     		ldrb	r3, [r3]
 4802 001a DBB2     		uxtb	r3, r3
 4803 001c 012B     		cmp	r3, #1
 4804 001e 02D1     		bne	.L225
1134:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4805              		.loc 1 1134 0
 4806 0020 4023     		movs	r3, #64
 4807 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 4808 0024 00E0     		b	.L224
 4809              	.L225:
1135:bluetooth_rxtx.c **** 	} else {
1136:bluetooth_rxtx.c **** 		/* oops */
1137:bluetooth_rxtx.c **** 		return;
 4810              		.loc 1 1137 0
 4811 0026 3CE0     		b	.L222
 4812              	.L224:
1138:bluetooth_rxtx.c **** 	}
1139:bluetooth_rxtx.c **** 
1140:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4813              		.loc 1 1140 0
 4814 0028 0D20     		movs	r0, #13
 4815 002a 47F6FF71 		movw	r1, #32767
 4816 002e FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccSuvgbr.s 			page 104


1141:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4817              		.loc 1 1141 0
 4818 0032 1220     		movs	r0, #18
 4819 0034 42F62231 		movw	r1, #11042
 4820 0038 FFF7FEFF 		bl	cc2400_set
1142:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 4821              		.loc 1 1142 0
 4822 003c 1420     		movs	r0, #20
 4823 003e 41F24B31 		movw	r1, #4939
 4824 0042 FFF7FEFF 		bl	cc2400_set
1143:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 4825              		.loc 1 1143 0
 4826 0046 2020     		movs	r0, #32
 4827 0048 40F20111 		movw	r1, #257
 4828 004c FFF7FEFF 		bl	cc2400_set
1144:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1145:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1146:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1147:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1148:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1149:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1150:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   2427 - 1); // 1 MHz IF
 4829              		.loc 1 1150 0
 4830 0050 0220     		movs	r0, #2
 4831 0052 40F67A11 		movw	r1, #2426
 4832 0056 FFF7FEFF 		bl	cc2400_set
1151:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 4833              		.loc 1 1151 0
 4834 005a FB88     		ldrh	r3, [r7, #6]
 4835 005c 0320     		movs	r0, #3
 4836 005e 1946     		mov	r1, r3
 4837 0060 FFF7FEFF 		bl	cc2400_set
1152:bluetooth_rxtx.c **** 
1153:bluetooth_rxtx.c **** 	// Set up CS register
1154:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4838              		.loc 1 1154 0
 4839 0064 FFF7FEFF 		bl	cs_threshold_calc_and_set
1155:bluetooth_rxtx.c **** 
1156:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4840              		.loc 1 1156 0
 4841 0068 00BF     		nop
 4842              	.L227:
 4843              		.loc 1 1156 0 is_stmt 0 discriminator 1
 4844 006a FFF7FEFF 		bl	cc2400_status
 4845 006e 0346     		mov	r3, r0
 4846 0070 03F04003 		and	r3, r3, #64
 4847 0074 002B     		cmp	r3, #0
 4848 0076 F8D0     		beq	.L227
1157:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4849              		.loc 1 1157 0 is_stmt 1
 4850 0078 6120     		movs	r0, #97
 4851 007a FFF7FEFF 		bl	cc2400_strobe
1158:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4852              		.loc 1 1158 0
 4853 007e 00BF     		nop
 4854              	.L228:
 4855              		.loc 1 1158 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccSuvgbr.s 			page 105


 4856 0080 FFF7FEFF 		bl	cc2400_status
 4857 0084 0346     		mov	r3, r0
 4858 0086 03F00403 		and	r3, r3, #4
 4859 008a 002B     		cmp	r3, #0
 4860 008c F8D0     		beq	.L228
1159:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 4861              		.loc 1 1159 0 is_stmt 1
 4862 008e 6220     		movs	r0, #98
 4863 0090 FFF7FEFF 		bl	cc2400_strobe
1160:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1161:bluetooth_rxtx.c **** 	PAEN_SET;
 4864              		.loc 1 1161 0
 4865 0094 054B     		ldr	r3, .L229+4
 4866 0096 8022     		movs	r2, #128
 4867 0098 1A60     		str	r2, [r3]
1162:bluetooth_rxtx.c **** 	HGM_SET;
 4868              		.loc 1 1162 0
 4869 009a 044B     		ldr	r3, .L229+4
 4870 009c 4FF48072 		mov	r2, #256
 4871 00a0 1A60     		str	r2, [r3]
 4872              	.L222:
1163:bluetooth_rxtx.c **** #endif
1164:bluetooth_rxtx.c **** }
 4873              		.loc 1 1164 0
 4874 00a2 0837     		adds	r7, r7, #8
 4875              		.cfi_def_cfa_offset 8
 4876 00a4 BD46     		mov	sp, r7
 4877              		.cfi_def_cfa_register 13
 4878              		@ sp needed
 4879 00a6 80BD     		pop	{r7, pc}
 4880              	.L230:
 4881              		.align	2
 4882              	.L229:
 4883 00a8 00000000 		.word	modulation
 4884 00ac 58C00920 		.word	537509976
 4885              		.cfi_endproc
 4886              	.LFE21:
 4888              		.section	.text.cc2400_rx_sync,"ax",%progbits
 4889              		.align	2
 4890              		.thumb
 4891              		.thumb_func
 4893              	cc2400_rx_sync:
 4894              	.LFB22:
1165:bluetooth_rxtx.c **** 
1166:bluetooth_rxtx.c **** /* start un-buffered rx */
1167:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1168:bluetooth_rxtx.c **** {
 4895              		.loc 1 1168 0
 4896              		.cfi_startproc
 4897              		@ args = 0, pretend = 0, frame = 16
 4898              		@ frame_needed = 1, uses_anonymous_args = 0
 4899 0000 80B5     		push	{r7, lr}
 4900              		.cfi_def_cfa_offset 8
 4901              		.cfi_offset 7, -8
 4902              		.cfi_offset 14, -4
 4903 0002 84B0     		sub	sp, sp, #16
 4904              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccSuvgbr.s 			page 106


 4905 0004 00AF     		add	r7, sp, #0
 4906              		.cfi_def_cfa_register 7
 4907 0006 7860     		str	r0, [r7, #4]
1169:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1170:bluetooth_rxtx.c **** 
1171:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4908              		.loc 1 1171 0
 4909 0008 334B     		ldr	r3, .L238
 4910 000a 1B78     		ldrb	r3, [r3]
 4911 000c DBB2     		uxtb	r3, r3
 4912 000e 002B     		cmp	r3, #0
 4913 0010 05D1     		bne	.L232
1172:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4914              		.loc 1 1172 0
 4915 0012 2923     		movs	r3, #41
 4916 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1173:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 4917              		.loc 1 1173 0
 4918 0016 40F26143 		movw	r3, #1121
 4919 001a FB81     		strh	r3, [r7, #14]	@ movhi
 4920 001c 0BE0     		b	.L233
 4921              	.L232:
1174:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1175:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1176:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1177:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1178:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1179:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1180:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1181:bluetooth_rxtx.c **** 
1182:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4922              		.loc 1 1182 0
 4923 001e 2E4B     		ldr	r3, .L238
 4924 0020 1B78     		ldrb	r3, [r3]
 4925 0022 DBB2     		uxtb	r3, r3
 4926 0024 012B     		cmp	r3, #1
 4927 0026 05D1     		bne	.L234
1183:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4928              		.loc 1 1183 0
 4929 0028 4023     		movs	r3, #64
 4930 002a BB81     		strh	r3, [r7, #12]	@ movhi
1184:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 4931              		.loc 1 1184 0
 4932 002c 40F26153 		movw	r3, #1377
 4933 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 4934 0032 00E0     		b	.L233
 4935              	.L234:
1185:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1186:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1187:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1188:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1189:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1190:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1191:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1192:bluetooth_rxtx.c **** 
1193:bluetooth_rxtx.c **** 	} else {
1194:bluetooth_rxtx.c **** 		/* oops */
ARM GAS  /tmp/ccSuvgbr.s 			page 107


1195:bluetooth_rxtx.c **** 		return;
 4936              		.loc 1 1195 0
 4937 0034 4DE0     		b	.L231
 4938              	.L233:
1196:bluetooth_rxtx.c **** 	}
1197:bluetooth_rxtx.c **** 
1198:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4939              		.loc 1 1198 0
 4940 0036 0D20     		movs	r0, #13
 4941 0038 47F6FF71 		movw	r1, #32767
 4942 003c FFF7FEFF 		bl	cc2400_set
1199:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4943              		.loc 1 1199 0
 4944 0040 1220     		movs	r0, #18
 4945 0042 42F62231 		movw	r1, #11042
 4946 0046 FFF7FEFF 		bl	cc2400_set
1200:bluetooth_rxtx.c **** 
1201:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 4947              		.loc 1 1201 0
 4948 004a 1420     		movs	r0, #20
 4949 004c 41F24B21 		movw	r1, #4683
 4950 0050 FFF7FEFF 		bl	cc2400_set
1202:bluetooth_rxtx.c **** 	// 1      2      4b
1203:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1204:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1205:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1206:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1207:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1208:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1209:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1210:bluetooth_rxtx.c **** 	//
1211:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1212:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1213:bluetooth_rxtx.c **** 
1214:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 4951              		.loc 1 1214 0
 4952 0054 FB89     		ldrh	r3, [r7, #14]
 4953 0056 2020     		movs	r0, #32
 4954 0058 1946     		mov	r1, r3
 4955 005a FFF7FEFF 		bl	cc2400_set
1215:bluetooth_rxtx.c **** 
1216:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 4956              		.loc 1 1216 0
 4957 005e 7B68     		ldr	r3, [r7, #4]
 4958 0060 9BB2     		uxth	r3, r3
 4959 0062 2C20     		movs	r0, #44
 4960 0064 1946     		mov	r1, r3
 4961 0066 FFF7FEFF 		bl	cc2400_set
1217:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 4962              		.loc 1 1217 0
 4963 006a 7B68     		ldr	r3, [r7, #4]
 4964 006c 1B0C     		lsrs	r3, r3, #16
 4965 006e 9BB2     		uxth	r3, r3
 4966 0070 2D20     		movs	r0, #45
 4967 0072 1946     		mov	r1, r3
 4968 0074 FFF7FEFF 		bl	cc2400_set
1218:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccSuvgbr.s 			page 108


1219:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 4969              		.loc 1 1219 0
 4970 0078 184B     		ldr	r3, .L238+4
 4971 007a 1B88     		ldrh	r3, [r3]	@ movhi
 4972 007c 9BB2     		uxth	r3, r3
 4973 007e 013B     		subs	r3, r3, #1
 4974 0080 9BB2     		uxth	r3, r3
 4975 0082 0220     		movs	r0, #2
 4976 0084 1946     		mov	r1, r3
 4977 0086 FFF7FEFF 		bl	cc2400_set
1220:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 4978              		.loc 1 1220 0
 4979 008a BB89     		ldrh	r3, [r7, #12]
 4980 008c 0320     		movs	r0, #3
 4981 008e 1946     		mov	r1, r3
 4982 0090 FFF7FEFF 		bl	cc2400_set
1221:bluetooth_rxtx.c **** 
1222:bluetooth_rxtx.c **** 	// Set up CS register
1223:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4983              		.loc 1 1223 0
 4984 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1224:bluetooth_rxtx.c **** 
1225:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4985              		.loc 1 1225 0
 4986 0098 00BF     		nop
 4987              	.L236:
 4988              		.loc 1 1225 0 is_stmt 0 discriminator 1
 4989 009a FFF7FEFF 		bl	cc2400_status
 4990 009e 0346     		mov	r3, r0
 4991 00a0 03F04003 		and	r3, r3, #64
 4992 00a4 002B     		cmp	r3, #0
 4993 00a6 F8D0     		beq	.L236
1226:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4994              		.loc 1 1226 0 is_stmt 1
 4995 00a8 6120     		movs	r0, #97
 4996 00aa FFF7FEFF 		bl	cc2400_strobe
1227:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4997              		.loc 1 1227 0
 4998 00ae 00BF     		nop
 4999              	.L237:
 5000              		.loc 1 1227 0 is_stmt 0 discriminator 1
 5001 00b0 FFF7FEFF 		bl	cc2400_status
 5002 00b4 0346     		mov	r3, r0
 5003 00b6 03F00403 		and	r3, r3, #4
 5004 00ba 002B     		cmp	r3, #0
 5005 00bc F8D0     		beq	.L237
1228:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5006              		.loc 1 1228 0 is_stmt 1
 5007 00be 6220     		movs	r0, #98
 5008 00c0 FFF7FEFF 		bl	cc2400_strobe
1229:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1230:bluetooth_rxtx.c **** 	PAEN_SET;
 5009              		.loc 1 1230 0
 5010 00c4 064B     		ldr	r3, .L238+8
 5011 00c6 8022     		movs	r2, #128
 5012 00c8 1A60     		str	r2, [r3]
1231:bluetooth_rxtx.c **** 	HGM_SET;
ARM GAS  /tmp/ccSuvgbr.s 			page 109


 5013              		.loc 1 1231 0
 5014 00ca 054B     		ldr	r3, .L238+8
 5015 00cc 4FF48072 		mov	r2, #256
 5016 00d0 1A60     		str	r2, [r3]
 5017              	.L231:
1232:bluetooth_rxtx.c **** #endif
1233:bluetooth_rxtx.c **** }
 5018              		.loc 1 1233 0
 5019 00d2 1037     		adds	r7, r7, #16
 5020              		.cfi_def_cfa_offset 8
 5021 00d4 BD46     		mov	sp, r7
 5022              		.cfi_def_cfa_register 13
 5023              		@ sp needed
 5024 00d6 80BD     		pop	{r7, pc}
 5025              	.L239:
 5026              		.align	2
 5027              	.L238:
 5028 00d8 00000000 		.word	modulation
 5029 00dc 00000000 		.word	channel
 5030 00e0 58C00920 		.word	537509976
 5031              		.cfi_endproc
 5032              	.LFE22:
 5034              		.section	.text.le_transmit,"ax",%progbits
 5035              		.align	2
 5036              		.global	le_transmit
 5037              		.thumb
 5038              		.thumb_func
 5040              	le_transmit:
 5041              	.LFB23:
1234:bluetooth_rxtx.c **** 
1235:bluetooth_rxtx.c **** /*
1236:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1237:bluetooth_rxtx.c ****  *
1238:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1239:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1240:bluetooth_rxtx.c ****  * included in the data length.
1241:bluetooth_rxtx.c ****  */
1242:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1243:bluetooth_rxtx.c **** {
 5042              		.loc 1 1243 0
 5043              		.cfi_startproc
 5044              		@ args = 0, pretend = 0, frame = 104
 5045              		@ frame_needed = 1, uses_anonymous_args = 0
 5046 0000 80B5     		push	{r7, lr}
 5047              		.cfi_def_cfa_offset 8
 5048              		.cfi_offset 7, -8
 5049              		.cfi_offset 14, -4
 5050 0002 9AB0     		sub	sp, sp, #104
 5051              		.cfi_def_cfa_offset 112
 5052 0004 00AF     		add	r7, sp, #0
 5053              		.cfi_def_cfa_register 7
 5054 0006 F860     		str	r0, [r7, #12]
 5055 0008 0B46     		mov	r3, r1
 5056 000a 7A60     		str	r2, [r7, #4]
 5057 000c FB72     		strb	r3, [r7, #11]
1244:bluetooth_rxtx.c **** 	unsigned i, j;
1245:bluetooth_rxtx.c **** 	int bit;
ARM GAS  /tmp/ccSuvgbr.s 			page 110


1246:bluetooth_rxtx.c **** 	u8 txbuf[64];
1247:bluetooth_rxtx.c **** 	u8 tx_len;
1248:bluetooth_rxtx.c **** 	u8 byte;
1249:bluetooth_rxtx.c **** 	u16 gio_save;
1250:bluetooth_rxtx.c **** 
1251:bluetooth_rxtx.c **** 	// first four bytes: AA
1252:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5058              		.loc 1 1252 0
 5059 000e 0023     		movs	r3, #0
 5060 0010 7B66     		str	r3, [r7, #100]
 5061 0012 35E0     		b	.L241
 5062              	.L244:
1253:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5063              		.loc 1 1253 0
 5064 0014 FB68     		ldr	r3, [r7, #12]
 5065 0016 87F85E30 		strb	r3, [r7, #94]
1254:bluetooth_rxtx.c **** 		aa >>= 8;
 5066              		.loc 1 1254 0
 5067 001a FB68     		ldr	r3, [r7, #12]
 5068 001c 1B0A     		lsrs	r3, r3, #8
 5069 001e FB60     		str	r3, [r7, #12]
1255:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5070              		.loc 1 1255 0
 5071 0020 07F11002 		add	r2, r7, #16
 5072 0024 7B6E     		ldr	r3, [r7, #100]
 5073 0026 1344     		add	r3, r3, r2
 5074 0028 0022     		movs	r2, #0
 5075 002a 1A70     		strb	r2, [r3]
1256:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5076              		.loc 1 1256 0
 5077 002c 0023     		movs	r3, #0
 5078 002e 3B66     		str	r3, [r7, #96]
 5079 0030 20E0     		b	.L242
 5080              	.L243:
1257:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5081              		.loc 1 1257 0 discriminator 3
 5082 0032 07F11002 		add	r2, r7, #16
 5083 0036 7B6E     		ldr	r3, [r7, #100]
 5084 0038 1344     		add	r3, r3, r2
 5085 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5086 003c D9B2     		uxtb	r1, r3
 5087 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5088 0042 03F00103 		and	r3, r3, #1
 5089 0046 3A6E     		ldr	r2, [r7, #96]
 5090 0048 C2F10702 		rsb	r2, r2, #7
 5091 004c 9340     		lsls	r3, r3, r2
 5092 004e DBB2     		uxtb	r3, r3
 5093 0050 0A46     		mov	r2, r1
 5094 0052 1343     		orrs	r3, r3, r2
 5095 0054 DBB2     		uxtb	r3, r3
 5096 0056 D9B2     		uxtb	r1, r3
 5097 0058 07F11002 		add	r2, r7, #16
 5098 005c 7B6E     		ldr	r3, [r7, #100]
 5099 005e 1344     		add	r3, r3, r2
 5100 0060 0A46     		mov	r2, r1
 5101 0062 1A70     		strb	r2, [r3]
1258:bluetooth_rxtx.c **** 			byte >>= 1;
ARM GAS  /tmp/ccSuvgbr.s 			page 111


 5102              		.loc 1 1258 0 discriminator 3
 5103 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5104 0068 5B08     		lsrs	r3, r3, #1
 5105 006a 87F85E30 		strb	r3, [r7, #94]
1256:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5106              		.loc 1 1256 0 discriminator 3
 5107 006e 3B6E     		ldr	r3, [r7, #96]
 5108 0070 0133     		adds	r3, r3, #1
 5109 0072 3B66     		str	r3, [r7, #96]
 5110              	.L242:
1256:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5111              		.loc 1 1256 0 is_stmt 0 discriminator 1
 5112 0074 3B6E     		ldr	r3, [r7, #96]
 5113 0076 072B     		cmp	r3, #7
 5114 0078 DBD9     		bls	.L243
1252:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5115              		.loc 1 1252 0 is_stmt 1 discriminator 2
 5116 007a 7B6E     		ldr	r3, [r7, #100]
 5117 007c 0133     		adds	r3, r3, #1
 5118 007e 7B66     		str	r3, [r7, #100]
 5119              	.L241:
1252:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5120              		.loc 1 1252 0 is_stmt 0 discriminator 1
 5121 0080 7B6E     		ldr	r3, [r7, #100]
 5122 0082 032B     		cmp	r3, #3
 5123 0084 C6D9     		bls	.L244
1259:bluetooth_rxtx.c **** 		}
1260:bluetooth_rxtx.c **** 	}
1261:bluetooth_rxtx.c **** 
1262:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1263:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5124              		.loc 1 1263 0 is_stmt 1
 5125 0086 934B     		ldr	r3, .L260
 5126 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5127 008a 9BB2     		uxth	r3, r3
 5128 008c DBB2     		uxtb	r3, r3
 5129 008e 623B     		subs	r3, r3, #98
 5130 0090 DBB2     		uxtb	r3, r3
 5131 0092 1846     		mov	r0, r3
 5132 0094 FFF7FEFF 		bl	btle_channel_index
 5133 0098 0346     		mov	r3, r0
 5134 009a 1A46     		mov	r2, r3
 5135 009c 8E4B     		ldr	r3, .L260+4
 5136 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5137 00a0 BB65     		str	r3, [r7, #88]
1264:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5138              		.loc 1 1264 0
 5139 00a2 0023     		movs	r3, #0
 5140 00a4 7B66     		str	r3, [r7, #100]
 5141 00a6 50E0     		b	.L245
 5142              	.L248:
1265:bluetooth_rxtx.c **** 		byte = data[i];
 5143              		.loc 1 1265 0
 5144 00a8 7A68     		ldr	r2, [r7, #4]
 5145 00aa 7B6E     		ldr	r3, [r7, #100]
 5146 00ac 1344     		add	r3, r3, r2
 5147 00ae 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 112


 5148 00b0 87F85E30 		strb	r3, [r7, #94]
1266:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5149              		.loc 1 1266 0
 5150 00b4 7B6E     		ldr	r3, [r7, #100]
 5151 00b6 0433     		adds	r3, r3, #4
 5152 00b8 07F16802 		add	r2, r7, #104
 5153 00bc 1344     		add	r3, r3, r2
 5154 00be 0022     		movs	r2, #0
 5155 00c0 03F8582C 		strb	r2, [r3, #-88]
1267:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5156              		.loc 1 1267 0
 5157 00c4 0023     		movs	r3, #0
 5158 00c6 3B66     		str	r3, [r7, #96]
 5159 00c8 39E0     		b	.L246
 5160              	.L247:
1268:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5161              		.loc 1 1268 0 discriminator 3
 5162 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5163 00ce 03F00103 		and	r3, r3, #1
 5164 00d2 8249     		ldr	r1, .L260+8
 5165 00d4 BA6D     		ldr	r2, [r7, #88]
 5166 00d6 0A44     		add	r2, r2, r1
 5167 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5168 00da 5340     		eors	r3, r3, r2
 5169 00dc 7B65     		str	r3, [r7, #84]
1269:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5170              		.loc 1 1269 0 discriminator 3
 5171 00de BB6D     		ldr	r3, [r7, #88]
 5172 00e0 0133     		adds	r3, r3, #1
 5173 00e2 1946     		mov	r1, r3
 5174 00e4 7E4B     		ldr	r3, .L260+12
 5175 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5176 00ea C81A     		subs	r0, r1, r3
 5177 00ec 4008     		lsrs	r0, r0, #1
 5178 00ee 0344     		add	r3, r3, r0
 5179 00f0 9A09     		lsrs	r2, r3, #6
 5180 00f2 1346     		mov	r3, r2
 5181 00f4 DB01     		lsls	r3, r3, #7
 5182 00f6 9B1A     		subs	r3, r3, r2
 5183 00f8 CA1A     		subs	r2, r1, r3
 5184 00fa BA65     		str	r2, [r7, #88]
1270:bluetooth_rxtx.c **** 			byte >>= 1;
 5185              		.loc 1 1270 0 discriminator 3
 5186 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5187 0100 5B08     		lsrs	r3, r3, #1
 5188 0102 87F85E30 		strb	r3, [r7, #94]
1271:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5189              		.loc 1 1271 0 discriminator 3
 5190 0106 7B6E     		ldr	r3, [r7, #100]
 5191 0108 0433     		adds	r3, r3, #4
 5192 010a 7A6E     		ldr	r2, [r7, #100]
 5193 010c 0432     		adds	r2, r2, #4
 5194 010e 07F16801 		add	r1, r7, #104
 5195 0112 0A44     		add	r2, r2, r1
 5196 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5197 0118 D1B2     		uxtb	r1, r2
 5198 011a 3A6E     		ldr	r2, [r7, #96]
ARM GAS  /tmp/ccSuvgbr.s 			page 113


 5199 011c C2F10702 		rsb	r2, r2, #7
 5200 0120 1046     		mov	r0, r2
 5201 0122 7A6D     		ldr	r2, [r7, #84]
 5202 0124 8240     		lsls	r2, r2, r0
 5203 0126 D2B2     		uxtb	r2, r2
 5204 0128 0A43     		orrs	r2, r2, r1
 5205 012a D2B2     		uxtb	r2, r2
 5206 012c D2B2     		uxtb	r2, r2
 5207 012e 07F16801 		add	r1, r7, #104
 5208 0132 0B44     		add	r3, r3, r1
 5209 0134 03F8582C 		strb	r2, [r3, #-88]
1267:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5210              		.loc 1 1267 0 discriminator 3
 5211 0138 3B6E     		ldr	r3, [r7, #96]
 5212 013a 0133     		adds	r3, r3, #1
 5213 013c 3B66     		str	r3, [r7, #96]
 5214              	.L246:
1267:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5215              		.loc 1 1267 0 is_stmt 0 discriminator 1
 5216 013e 3B6E     		ldr	r3, [r7, #96]
 5217 0140 072B     		cmp	r3, #7
 5218 0142 C2D9     		bls	.L247
1264:bluetooth_rxtx.c **** 		byte = data[i];
 5219              		.loc 1 1264 0 is_stmt 1 discriminator 2
 5220 0144 7B6E     		ldr	r3, [r7, #100]
 5221 0146 0133     		adds	r3, r3, #1
 5222 0148 7B66     		str	r3, [r7, #100]
 5223              	.L245:
1264:bluetooth_rxtx.c **** 		byte = data[i];
 5224              		.loc 1 1264 0 is_stmt 0 discriminator 1
 5225 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5226 014c 7B6E     		ldr	r3, [r7, #100]
 5227 014e 9A42     		cmp	r2, r3
 5228 0150 AAD8     		bhi	.L248
1272:bluetooth_rxtx.c **** 		}
1273:bluetooth_rxtx.c **** 	}
1274:bluetooth_rxtx.c **** 
1275:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5229              		.loc 1 1275 0 is_stmt 1
 5230 0152 FB7A     		ldrb	r3, [r7, #11]
 5231 0154 0433     		adds	r3, r3, #4
 5232 0156 FB72     		strb	r3, [r7, #11]
1276:bluetooth_rxtx.c **** 
1277:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1278:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5233              		.loc 1 1278 0
 5234 0158 0D20     		movs	r0, #13
 5235 015a 47F6FF71 		movw	r1, #32767
 5236 015e FFF7FEFF 		bl	cc2400_set
1279:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5237              		.loc 1 1279 0
 5238 0162 1220     		movs	r0, #18
 5239 0164 42F62231 		movw	r1, #11042
 5240 0168 FFF7FEFF 		bl	cc2400_set
1280:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5241              		.loc 1 1280 0
 5242 016c 1420     		movs	r0, #20
ARM GAS  /tmp/ccSuvgbr.s 			page 114


 5243 016e 41F24B31 		movw	r1, #4939
 5244 0172 FFF7FEFF 		bl	cc2400_set
1281:bluetooth_rxtx.c **** 
1282:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5245              		.loc 1 1282 0
 5246 0176 2020     		movs	r0, #32
 5247 0178 40F60141 		movw	r1, #3073
 5248 017c FFF7FEFF 		bl	cc2400_set
1283:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1284:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1285:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1286:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1287:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1288:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1289:bluetooth_rxtx.c **** 
1290:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5249              		.loc 1 1290 0
 5250 0180 544B     		ldr	r3, .L260
 5251 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5252 0184 9BB2     		uxth	r3, r3
 5253 0186 0220     		movs	r0, #2
 5254 0188 1946     		mov	r1, r3
 5255 018a FFF7FEFF 		bl	cc2400_set
1291:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5256              		.loc 1 1291 0
 5257 018e 0520     		movs	r0, #5
 5258 0190 0B21     		movs	r1, #11
 5259 0192 FFF7FEFF 		bl	cc2400_set
1292:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5260              		.loc 1 1292 0
 5261 0196 0320     		movs	r0, #3
 5262 0198 4021     		movs	r1, #64
 5263 019a FFF7FEFF 		bl	cc2400_set
1293:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5264              		.loc 1 1293 0
 5265 019e 2320     		movs	r0, #35
 5266 01a0 1421     		movs	r1, #20
 5267 01a2 FFF7FEFF 		bl	cc2400_set
1294:bluetooth_rxtx.c **** 
1295:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1296:bluetooth_rxtx.c **** 	if (aa & 1)
 5268              		.loc 1 1296 0
 5269 01a6 FB68     		ldr	r3, [r7, #12]
 5270 01a8 03F00103 		and	r3, r3, #1
 5271 01ac 002B     		cmp	r3, #0
 5272 01ae 05D0     		beq	.L249
1297:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5273              		.loc 1 1297 0
 5274 01b0 2D20     		movs	r0, #45
 5275 01b2 4AF6AA21 		movw	r1, #43690
 5276 01b6 FFF7FEFF 		bl	cc2400_set
 5277 01ba 04E0     		b	.L250
 5278              	.L249:
1298:bluetooth_rxtx.c **** 	else
1299:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5279              		.loc 1 1299 0
 5280 01bc 2D20     		movs	r0, #45
ARM GAS  /tmp/ccSuvgbr.s 			page 115


 5281 01be 45F25551 		movw	r1, #21845
 5282 01c2 FFF7FEFF 		bl	cc2400_set
 5283              	.L250:
1300:bluetooth_rxtx.c **** 
1301:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1302:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5284              		.loc 1 1302 0
 5285 01c6 0820     		movs	r0, #8
 5286 01c8 FFF7FEFF 		bl	cc2400_get
 5287 01cc 0346     		mov	r3, r0
 5288 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1303:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5289              		.loc 1 1303 0
 5290 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5291 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5292 01da 9BB2     		uxth	r3, r3
 5293 01dc 43F49C43 		orr	r3, r3, #19968
 5294 01e0 9BB2     		uxth	r3, r3
 5295 01e2 9BB2     		uxth	r3, r3
 5296 01e4 0820     		movs	r0, #8
 5297 01e6 1946     		mov	r1, r3
 5298 01e8 FFF7FEFF 		bl	cc2400_set
1304:bluetooth_rxtx.c **** 
1305:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5299              		.loc 1 1305 0
 5300 01ec 00BF     		nop
 5301              	.L251:
 5302              		.loc 1 1305 0 is_stmt 0 discriminator 1
 5303 01ee FFF7FEFF 		bl	cc2400_status
 5304 01f2 0346     		mov	r3, r0
 5305 01f4 03F04003 		and	r3, r3, #64
 5306 01f8 002B     		cmp	r3, #0
 5307 01fa F8D0     		beq	.L251
1306:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5308              		.loc 1 1306 0 is_stmt 1
 5309 01fc 6120     		movs	r0, #97
 5310 01fe FFF7FEFF 		bl	cc2400_strobe
1307:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5311              		.loc 1 1307 0
 5312 0202 00BF     		nop
 5313              	.L252:
 5314              		.loc 1 1307 0 is_stmt 0 discriminator 1
 5315 0204 FFF7FEFF 		bl	cc2400_status
 5316 0208 0346     		mov	r3, r0
 5317 020a 03F00403 		and	r3, r3, #4
 5318 020e 002B     		cmp	r3, #0
 5319 0210 F8D0     		beq	.L252
1308:bluetooth_rxtx.c **** 	TXLED_SET;
 5320              		.loc 1 1308 0 is_stmt 1
 5321 0212 344B     		ldr	r3, .L260+16
 5322 0214 4FF48072 		mov	r2, #256
 5323 0218 1A60     		str	r2, [r3]
1309:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1310:bluetooth_rxtx.c **** 	PAEN_SET;
 5324              		.loc 1 1310 0
 5325 021a 334B     		ldr	r3, .L260+20
 5326 021c 8022     		movs	r2, #128
ARM GAS  /tmp/ccSuvgbr.s 			page 116


 5327 021e 1A60     		str	r2, [r3]
1311:bluetooth_rxtx.c **** #endif
1312:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5328              		.loc 1 1312 0
 5329 0220 00BF     		nop
 5330              	.L253:
 5331              		.loc 1 1312 0 is_stmt 0 discriminator 1
 5332 0222 0E20     		movs	r0, #14
 5333 0224 FFF7FEFF 		bl	cc2400_get
 5334 0228 0346     		mov	r3, r0
 5335 022a 03F01F03 		and	r3, r3, #31
 5336 022e 0F2B     		cmp	r3, #15
 5337 0230 F7D1     		bne	.L253
1313:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5338              		.loc 1 1313 0 is_stmt 1
 5339 0232 6320     		movs	r0, #99
 5340 0234 FFF7FEFF 		bl	cc2400_strobe
1314:bluetooth_rxtx.c **** 
1315:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1316:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5341              		.loc 1 1316 0
 5342 0238 0023     		movs	r3, #0
 5343 023a 7B66     		str	r3, [r7, #100]
 5344 023c 21E0     		b	.L254
 5345              	.L257:
1317:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5346              		.loc 1 1317 0
 5347 023e 00BF     		nop
 5348              	.L255:
 5349              		.loc 1 1317 0 is_stmt 0 discriminator 1
 5350 0240 2A4B     		ldr	r3, .L260+24
 5351 0242 1B68     		ldr	r3, [r3]
 5352 0244 03F00403 		and	r3, r3, #4
 5353 0248 002B     		cmp	r3, #0
 5354 024a F9D1     		bne	.L255
1318:bluetooth_rxtx.c **** 		tx_len = len - i;
 5355              		.loc 1 1318 0 is_stmt 1
 5356 024c 7B6E     		ldr	r3, [r7, #100]
 5357 024e DBB2     		uxtb	r3, r3
 5358 0250 FA7A     		ldrb	r2, [r7, #11]
 5359 0252 D31A     		subs	r3, r2, r3
 5360 0254 87F85F30 		strb	r3, [r7, #95]
1319:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5361              		.loc 1 1319 0
 5362 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5363 025c 102B     		cmp	r3, #16
 5364 025e 02D9     		bls	.L256
1320:bluetooth_rxtx.c **** 			tx_len = 16;
 5365              		.loc 1 1320 0
 5366 0260 1023     		movs	r3, #16
 5367 0262 87F85F30 		strb	r3, [r7, #95]
 5368              	.L256:
1321:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5369              		.loc 1 1321 0 discriminator 2
 5370 0266 07F11002 		add	r2, r7, #16
 5371 026a 7B6E     		ldr	r3, [r7, #100]
 5372 026c 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccSuvgbr.s 			page 117


 5373 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5374 0272 7020     		movs	r0, #112
 5375 0274 1146     		mov	r1, r2
 5376 0276 1A46     		mov	r2, r3
 5377 0278 FFF7FEFF 		bl	cc2400_spi_buf
1316:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5378              		.loc 1 1316 0 discriminator 2
 5379 027c 7B6E     		ldr	r3, [r7, #100]
 5380 027e 1033     		adds	r3, r3, #16
 5381 0280 7B66     		str	r3, [r7, #100]
 5382              	.L254:
1316:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5383              		.loc 1 1316 0 is_stmt 0 discriminator 1
 5384 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5385 0284 7B6E     		ldr	r3, [r7, #100]
 5386 0286 9A42     		cmp	r2, r3
 5387 0288 D9D8     		bhi	.L257
1322:bluetooth_rxtx.c **** 	}
1323:bluetooth_rxtx.c **** 
1324:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5388              		.loc 1 1324 0 is_stmt 1
 5389 028a 00BF     		nop
 5390              	.L258:
 5391              		.loc 1 1324 0 is_stmt 0 discriminator 1
 5392 028c 0E20     		movs	r0, #14
 5393 028e FFF7FEFF 		bl	cc2400_get
 5394 0292 0346     		mov	r3, r0
 5395 0294 03F01F03 		and	r3, r3, #31
 5396 0298 0F2B     		cmp	r3, #15
 5397 029a F7D1     		bne	.L258
1325:bluetooth_rxtx.c **** 	TXLED_CLR;
 5398              		.loc 1 1325 0 is_stmt 1
 5399 029c 144B     		ldr	r3, .L260+28
 5400 029e 4FF48072 		mov	r2, #256
 5401 02a2 1A60     		str	r2, [r3]
1326:bluetooth_rxtx.c **** 
1327:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5402              		.loc 1 1327 0
 5403 02a4 6420     		movs	r0, #100
 5404 02a6 FFF7FEFF 		bl	cc2400_strobe
1328:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5405              		.loc 1 1328 0
 5406 02aa 00BF     		nop
 5407              	.L259:
 5408              		.loc 1 1328 0 is_stmt 0 discriminator 1
 5409 02ac FFF7FEFF 		bl	cc2400_status
 5410 02b0 0346     		mov	r3, r0
 5411 02b2 03F00403 		and	r3, r3, #4
 5412 02b6 002B     		cmp	r3, #0
 5413 02b8 F8D1     		bne	.L259
1329:bluetooth_rxtx.c **** 
1330:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1331:bluetooth_rxtx.c **** 	PAEN_CLR;
 5414              		.loc 1 1331 0 is_stmt 1
 5415 02ba 0E4B     		ldr	r3, .L260+32
 5416 02bc 8022     		movs	r2, #128
 5417 02be 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 118


1332:bluetooth_rxtx.c **** #endif
1333:bluetooth_rxtx.c **** 
1334:bluetooth_rxtx.c **** 	// reset GIO
1335:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5418              		.loc 1 1335 0
 5419 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5420 02c4 0820     		movs	r0, #8
 5421 02c6 1946     		mov	r1, r3
 5422 02c8 FFF7FEFF 		bl	cc2400_set
1336:bluetooth_rxtx.c **** }
 5423              		.loc 1 1336 0
 5424 02cc 6837     		adds	r7, r7, #104
 5425              		.cfi_def_cfa_offset 8
 5426 02ce BD46     		mov	sp, r7
 5427              		.cfi_def_cfa_register 13
 5428              		@ sp needed
 5429 02d0 80BD     		pop	{r7, pc}
 5430              	.L261:
 5431 02d2 00BF     		.align	2
 5432              	.L260:
 5433 02d4 00000000 		.word	channel
 5434 02d8 AC000000 		.word	whitening_index
 5435 02dc 2C000000 		.word	whitening
 5436 02e0 11080402 		.word	33818641
 5437 02e4 38C00920 		.word	537509944
 5438 02e8 58C00920 		.word	537509976
 5439 02ec 54C00920 		.word	537509972
 5440 02f0 3CC00920 		.word	537509948
 5441 02f4 5CC00920 		.word	537509980
 5442              		.cfi_endproc
 5443              	.LFE23:
 5445              		.section	.text.le_jam,"ax",%progbits
 5446              		.align	2
 5447              		.global	le_jam
 5448              		.thumb
 5449              		.thumb_func
 5451              	le_jam:
 5452              	.LFB24:
1337:bluetooth_rxtx.c **** 
1338:bluetooth_rxtx.c **** void le_jam(void) {
 5453              		.loc 1 1338 0
 5454              		.cfi_startproc
 5455              		@ args = 0, pretend = 0, frame = 0
 5456              		@ frame_needed = 1, uses_anonymous_args = 0
 5457 0000 80B5     		push	{r7, lr}
 5458              		.cfi_def_cfa_offset 8
 5459              		.cfi_offset 7, -8
 5460              		.cfi_offset 14, -4
 5461 0002 00AF     		add	r7, sp, #0
 5462              		.cfi_def_cfa_register 7
1339:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1340:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5463              		.loc 1 1340 0
 5464 0004 0D20     		movs	r0, #13
 5465 0006 47F6FF71 		movw	r1, #32767
 5466 000a FFF7FEFF 		bl	cc2400_set
1341:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
ARM GAS  /tmp/ccSuvgbr.s 			page 119


 5467              		.loc 1 1341 0
 5468 000e 1220     		movs	r0, #18
 5469 0010 42F62231 		movw	r1, #11042
 5470 0014 FFF7FEFF 		bl	cc2400_set
1342:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 5471              		.loc 1 1342 0
 5472 0018 1420     		movs	r0, #20
 5473 001a 42F24B31 		movw	r1, #9035
 5474 001e FFF7FEFF 		bl	cc2400_set
1343:bluetooth_rxtx.c **** 
1344:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5475              		.loc 1 1344 0
 5476 0022 2020     		movs	r0, #32
 5477 0024 40F60141 		movw	r1, #3073
 5478 0028 FFF7FEFF 		bl	cc2400_set
1345:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1346:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1347:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1348:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1349:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1350:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1351:bluetooth_rxtx.c **** 
1352:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1353:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5479              		.loc 1 1353 0
 5480 002c 0520     		movs	r0, #5
 5481 002e 0B21     		movs	r1, #11
 5482 0030 FFF7FEFF 		bl	cc2400_set
1354:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5483              		.loc 1 1354 0
 5484 0034 0320     		movs	r0, #3
 5485 0036 4021     		movs	r1, #64
 5486 0038 FFF7FEFF 		bl	cc2400_set
1355:bluetooth_rxtx.c **** 
1356:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5487              		.loc 1 1356 0
 5488 003c 00BF     		nop
 5489              	.L263:
 5490              		.loc 1 1356 0 is_stmt 0 discriminator 1
 5491 003e FFF7FEFF 		bl	cc2400_status
 5492 0042 0346     		mov	r3, r0
 5493 0044 03F04003 		and	r3, r3, #64
 5494 0048 002B     		cmp	r3, #0
 5495 004a F8D0     		beq	.L263
1357:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5496              		.loc 1 1357 0 is_stmt 1
 5497 004c 6120     		movs	r0, #97
 5498 004e FFF7FEFF 		bl	cc2400_strobe
1358:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5499              		.loc 1 1358 0
 5500 0052 00BF     		nop
 5501              	.L264:
 5502              		.loc 1 1358 0 is_stmt 0 discriminator 1
 5503 0054 FFF7FEFF 		bl	cc2400_status
 5504 0058 0346     		mov	r3, r0
 5505 005a 03F00403 		and	r3, r3, #4
 5506 005e 002B     		cmp	r3, #0
ARM GAS  /tmp/ccSuvgbr.s 			page 120


 5507 0060 F8D0     		beq	.L264
1359:bluetooth_rxtx.c **** 	TXLED_SET;
 5508              		.loc 1 1359 0 is_stmt 1
 5509 0062 0A4B     		ldr	r3, .L266
 5510 0064 4FF48072 		mov	r2, #256
 5511 0068 1A60     		str	r2, [r3]
1360:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1361:bluetooth_rxtx.c **** 	PAEN_SET;
 5512              		.loc 1 1361 0
 5513 006a 094B     		ldr	r3, .L266+4
 5514 006c 8022     		movs	r2, #128
 5515 006e 1A60     		str	r2, [r3]
1362:bluetooth_rxtx.c **** #endif
1363:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5516              		.loc 1 1363 0
 5517 0070 00BF     		nop
 5518              	.L265:
 5519              		.loc 1 1363 0 is_stmt 0 discriminator 1
 5520 0072 0E20     		movs	r0, #14
 5521 0074 FFF7FEFF 		bl	cc2400_get
 5522 0078 0346     		mov	r3, r0
 5523 007a 03F01F03 		and	r3, r3, #31
 5524 007e 0F2B     		cmp	r3, #15
 5525 0080 F7D1     		bne	.L265
1364:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5526              		.loc 1 1364 0 is_stmt 1
 5527 0082 6320     		movs	r0, #99
 5528 0084 FFF7FEFF 		bl	cc2400_strobe
1365:bluetooth_rxtx.c **** #endif
1366:bluetooth_rxtx.c **** }
 5529              		.loc 1 1366 0
 5530 0088 80BD     		pop	{r7, pc}
 5531              	.L267:
 5532 008a 00BF     		.align	2
 5533              	.L266:
 5534 008c 38C00920 		.word	537509944
 5535 0090 58C00920 		.word	537509976
 5536              		.cfi_endproc
 5537              	.LFE24:
 5539              		.section	.text.hop,"ax",%progbits
 5540              		.align	2
 5541              		.global	hop
 5542              		.thumb
 5543              		.thumb_func
 5545              	hop:
 5546              	.LFB25:
1367:bluetooth_rxtx.c **** 
1368:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1369:bluetooth_rxtx.c ****  * track of this? */
1370:bluetooth_rxtx.c **** void hop(void)
1371:bluetooth_rxtx.c **** {
 5547              		.loc 1 1371 0
 5548              		.cfi_startproc
 5549              		@ args = 0, pretend = 0, frame = 0
 5550              		@ frame_needed = 1, uses_anonymous_args = 0
 5551 0000 80B5     		push	{r7, lr}
 5552              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccSuvgbr.s 			page 121


 5553              		.cfi_offset 7, -8
 5554              		.cfi_offset 14, -4
 5555 0002 00AF     		add	r7, sp, #0
 5556              		.cfi_def_cfa_register 7
1372:bluetooth_rxtx.c **** 	do_hop = 0;
 5557              		.loc 1 1372 0
 5558 0004 224B     		ldr	r3, .L274
 5559 0006 0022     		movs	r2, #0
 5560 0008 1A70     		strb	r2, [r3]
1373:bluetooth_rxtx.c **** 	last_hop = clkn;
 5561              		.loc 1 1373 0
 5562 000a 224B     		ldr	r3, .L274+4
 5563 000c 1B68     		ldr	r3, [r3]
 5564 000e 224A     		ldr	r2, .L274+8
 5565 0010 1360     		str	r3, [r2]
1374:bluetooth_rxtx.c **** 
1375:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1376:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5566              		.loc 1 1376 0
 5567 0012 224B     		ldr	r3, .L274+12
 5568 0014 1B78     		ldrb	r3, [r3]
 5569 0016 DBB2     		uxtb	r3, r3
 5570 0018 002B     		cmp	r3, #0
 5571 001a 0BD1     		bne	.L269
1377:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 5572              		.loc 1 1377 0
 5573 001c 0220     		movs	r0, #2
 5574 001e FFF7FEFF 		bl	cc2400_get
 5575 0022 0346     		mov	r3, r0
 5576 0024 1A46     		mov	r2, r3
 5577 0026 1E4B     		ldr	r3, .L274+16
 5578 0028 1B88     		ldrh	r3, [r3]	@ movhi
 5579 002a 9BB2     		uxth	r3, r3
 5580 002c 013B     		subs	r3, r3, #1
 5581 002e 9A42     		cmp	r2, r3
 5582 0030 00D1     		bne	.L269
1378:bluetooth_rxtx.c **** 			return;
 5583              		.loc 1 1378 0
 5584 0032 2BE0     		b	.L268
 5585              	.L269:
1379:bluetooth_rxtx.c **** 	}
1380:bluetooth_rxtx.c **** 
1381:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1382:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5586              		.loc 1 1382 0
 5587 0034 6420     		movs	r0, #100
 5588 0036 FFF7FEFF 		bl	cc2400_strobe
1383:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5589              		.loc 1 1383 0
 5590 003a 00BF     		nop
 5591              	.L271:
 5592              		.loc 1 1383 0 is_stmt 0 discriminator 1
 5593 003c FFF7FEFF 		bl	cc2400_status
 5594 0040 0346     		mov	r3, r0
 5595 0042 03F00403 		and	r3, r3, #4
 5596 0046 002B     		cmp	r3, #0
 5597 0048 F8D1     		bne	.L271
ARM GAS  /tmp/ccSuvgbr.s 			page 122


1384:bluetooth_rxtx.c **** 
1385:bluetooth_rxtx.c **** 	/* Retune */
1386:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5598              		.loc 1 1386 0 is_stmt 1
 5599 004a 154B     		ldr	r3, .L274+16
 5600 004c 1B88     		ldrh	r3, [r3]	@ movhi
 5601 004e 9BB2     		uxth	r3, r3
 5602 0050 013B     		subs	r3, r3, #1
 5603 0052 9BB2     		uxth	r3, r3
 5604 0054 0220     		movs	r0, #2
 5605 0056 1946     		mov	r1, r3
 5606 0058 FFF7FEFF 		bl	cc2400_set
1387:bluetooth_rxtx.c **** 
1388:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1389:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 5607              		.loc 1 1389 0
 5608 005c 0F4B     		ldr	r3, .L274+12
 5609 005e 1B78     		ldrb	r3, [r3]
 5610 0060 DBB2     		uxtb	r3, r3
 5611 0062 002B     		cmp	r3, #0
 5612 0064 01D0     		beq	.L272
1390:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 5613              		.loc 1 1390 0
 5614 0066 FFF7FEFF 		bl	cs_threshold_calc_and_set
 5615              	.L272:
1391:bluetooth_rxtx.c **** 	}
1392:bluetooth_rxtx.c **** 
1393:bluetooth_rxtx.c **** 	/* Wait for lock */
1394:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5616              		.loc 1 1394 0
 5617 006a 6120     		movs	r0, #97
 5618 006c FFF7FEFF 		bl	cc2400_strobe
1395:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5619              		.loc 1 1395 0
 5620 0070 00BF     		nop
 5621              	.L273:
 5622              		.loc 1 1395 0 is_stmt 0 discriminator 1
 5623 0072 FFF7FEFF 		bl	cc2400_status
 5624 0076 0346     		mov	r3, r0
 5625 0078 03F00403 		and	r3, r3, #4
 5626 007c 002B     		cmp	r3, #0
 5627 007e F8D0     		beq	.L273
1396:bluetooth_rxtx.c **** 
1397:bluetooth_rxtx.c **** 	dma_discard = 1;
 5628              		.loc 1 1397 0 is_stmt 1
 5629 0080 084B     		ldr	r3, .L274+20
 5630 0082 0122     		movs	r2, #1
 5631 0084 1A70     		strb	r2, [r3]
1398:bluetooth_rxtx.c **** 
1399:bluetooth_rxtx.c **** 	/* RX mode */
1400:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5632              		.loc 1 1400 0
 5633 0086 6220     		movs	r0, #98
 5634 0088 FFF7FEFF 		bl	cc2400_strobe
 5635              	.L268:
1401:bluetooth_rxtx.c **** }
 5636              		.loc 1 1401 0
ARM GAS  /tmp/ccSuvgbr.s 			page 123


 5637 008c 80BD     		pop	{r7, pc}
 5638              	.L275:
 5639 008e 00BF     		.align	2
 5640              	.L274:
 5641 0090 00000000 		.word	do_hop
 5642 0094 00000000 		.word	clkn
 5643 0098 00000000 		.word	last_hop
 5644 009c 00000000 		.word	hop_mode
 5645 00a0 00000000 		.word	channel
 5646 00a4 00000000 		.word	dma_discard
 5647              		.cfi_endproc
 5648              	.LFE25:
 5650              		.section	.text.bt_stream_rx,"ax",%progbits
 5651              		.align	2
 5652              		.global	bt_stream_rx
 5653              		.thumb
 5654              		.thumb_func
 5656              	bt_stream_rx:
 5657              	.LFB26:
1402:bluetooth_rxtx.c **** 
1403:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1404:bluetooth_rxtx.c **** void bt_stream_rx()
1405:bluetooth_rxtx.c **** {
 5658              		.loc 1 1405 0
 5659              		.cfi_startproc
 5660              		@ args = 0, pretend = 0, frame = 8
 5661              		@ frame_needed = 1, uses_anonymous_args = 0
 5662 0000 80B5     		push	{r7, lr}
 5663              		.cfi_def_cfa_offset 8
 5664              		.cfi_offset 7, -8
 5665              		.cfi_offset 14, -4
 5666 0002 82B0     		sub	sp, sp, #8
 5667              		.cfi_def_cfa_offset 16
 5668 0004 00AF     		add	r7, sp, #0
 5669              		.cfi_def_cfa_register 7
1406:bluetooth_rxtx.c **** 	int8_t rssi;
1407:bluetooth_rxtx.c **** 	int8_t rssi_at_trigger;
1408:bluetooth_rxtx.c **** 
1409:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 5670              		.loc 1 1409 0
 5671 0006 0D20     		movs	r0, #13
 5672 0008 47F6FF71 		movw	r1, #32767
 5673 000c FFF7FEFF 		bl	cc2400_set
1410:bluetooth_rxtx.c ****         cc2400_set(LMTST,   0x2b22);
 5674              		.loc 1 1410 0
 5675 0010 1220     		movs	r0, #18
 5676 0012 42F62231 		movw	r1, #11042
 5677 0016 FFF7FEFF 		bl	cc2400_set
1411:bluetooth_rxtx.c ****         cc2400_set(MDMTST0, 0x164b);
 5678              		.loc 1 1411 0
 5679 001a 1420     		movs	r0, #20
 5680 001c 41F24B61 		movw	r1, #5707
 5681 0020 FFF7FEFF 		bl	cc2400_set
1412:bluetooth_rxtx.c ****         cc2400_set(FSDIV,   2441 - 1);
 5682              		.loc 1 1412 0
 5683 0024 0220     		movs	r0, #2
 5684 0026 40F68811 		movw	r1, #2440
ARM GAS  /tmp/ccSuvgbr.s 			page 124


 5685 002a FFF7FEFF 		bl	cc2400_set
1413:bluetooth_rxtx.c ****         cc2400_set(SYNCH,   0xf9ae);
 5686              		.loc 1 1413 0
 5687 002e 2D20     		movs	r0, #45
 5688 0030 4FF6AE11 		movw	r1, #63918
 5689 0034 FFF7FEFF 		bl	cc2400_set
1414:bluetooth_rxtx.c ****         cc2400_set(SYNCL,   0x1584);
 5690              		.loc 1 1414 0
 5691 0038 2C20     		movs	r0, #44
 5692 003a 41F28451 		movw	r1, #5508
 5693 003e FFF7FEFF 		bl	cc2400_set
1415:bluetooth_rxtx.c ****         cc2400_set(MDMCTRL, 0x0040);
 5694              		.loc 1 1415 0
 5695 0042 0320     		movs	r0, #3
 5696 0044 4021     		movs	r1, #64
 5697 0046 FFF7FEFF 		bl	cc2400_set
1416:bluetooth_rxtx.c ****         cc2400_set(GRMDM, 0x0f60);
 5698              		.loc 1 1416 0
 5699 004a 2020     		movs	r0, #32
 5700 004c 4FF47661 		mov	r1, #3936
 5701 0050 FFF7FEFF 		bl	cc2400_set
1417:bluetooth_rxtx.c **** 
1418:bluetooth_rxtx.c ****         while (!(cc2400_status() & XOSC16M_STABLE));
 5702              		.loc 1 1418 0
 5703 0054 00BF     		nop
 5704              	.L277:
 5705              		.loc 1 1418 0 is_stmt 0 discriminator 1
 5706 0056 FFF7FEFF 		bl	cc2400_status
 5707 005a 0346     		mov	r3, r0
 5708 005c 03F04003 		and	r3, r3, #64
 5709 0060 002B     		cmp	r3, #0
 5710 0062 F8D0     		beq	.L277
1419:bluetooth_rxtx.c ****         cc2400_strobe(SFSON);
 5711              		.loc 1 1419 0 is_stmt 1
 5712 0064 6120     		movs	r0, #97
 5713 0066 FFF7FEFF 		bl	cc2400_strobe
1420:bluetooth_rxtx.c ****         while (!(cc2400_status() & FS_LOCK));
 5714              		.loc 1 1420 0
 5715 006a 00BF     		nop
 5716              	.L278:
 5717              		.loc 1 1420 0 is_stmt 0 discriminator 1
 5718 006c FFF7FEFF 		bl	cc2400_status
 5719 0070 0346     		mov	r3, r0
 5720 0072 03F00403 		and	r3, r3, #4
 5721 0076 002B     		cmp	r3, #0
 5722 0078 F8D0     		beq	.L278
1421:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1422:bluetooth_rxtx.c ****         PAEN_SET;
 5723              		.loc 1 1422 0 is_stmt 1
 5724 007a 6D4B     		ldr	r3, .L293
 5725 007c 8022     		movs	r2, #128
 5726 007e 1A60     		str	r2, [r3]
1423:bluetooth_rxtx.c ****         HGM_SET;
 5727              		.loc 1 1423 0
 5728 0080 6B4B     		ldr	r3, .L293
 5729 0082 4FF48072 		mov	r2, #256
 5730 0086 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 125


1424:bluetooth_rxtx.c **** #endif
1425:bluetooth_rxtx.c ****         cc2400_strobe(SRX);
 5731              		.loc 1 1425 0
 5732 0088 6220     		movs	r0, #98
 5733 008a FFF7FEFF 		bl	cc2400_strobe
1426:bluetooth_rxtx.c ****         while (!(cc2400_status() & SYNC_RECEIVED));
 5734              		.loc 1 1426 0
 5735 008e 00BF     		nop
 5736              	.L279:
 5737              		.loc 1 1426 0 is_stmt 0 discriminator 1
 5738 0090 FFF7FEFF 		bl	cc2400_status
 5739 0094 0346     		mov	r3, r0
 5740 0096 03F01003 		and	r3, r3, #16
 5741 009a 002B     		cmp	r3, #0
 5742 009c F8D0     		beq	.L279
1427:bluetooth_rxtx.c ****         
1428:bluetooth_rxtx.c ****         clkn_init ();
 5743              		.loc 1 1428 0 is_stmt 1
 5744 009e FFF7FEFF 		bl	clkn_init
1429:bluetooth_rxtx.c ****         T0TC = 2250;
 5745              		.loc 1 1429 0
 5746 00a2 644B     		ldr	r3, .L293+4
 5747 00a4 40F6CA02 		movw	r2, #2250
 5748 00a8 1A60     		str	r2, [r3]
1430:bluetooth_rxtx.c **** 
1431:bluetooth_rxtx.c **** 
1432:bluetooth_rxtx.c **** 	queue_init();
 5749              		.loc 1 1432 0
 5750 00aa FFF7FEFF 		bl	queue_init
1433:bluetooth_rxtx.c **** 	dio_ssp_init();
 5751              		.loc 1 1433 0
 5752 00ae FFF7FEFF 		bl	dio_ssp_init
1434:bluetooth_rxtx.c **** 	dma_init();
 5753              		.loc 1 1434 0
 5754 00b2 FFF7FEFF 		bl	dma_init
1435:bluetooth_rxtx.c **** 	dio_ssp_start();
 5755              		.loc 1 1435 0
 5756 00b6 FFF7FEFF 		bl	dio_ssp_start
1436:bluetooth_rxtx.c **** 
1437:bluetooth_rxtx.c **** 	cc2400_rx();
 5757              		.loc 1 1437 0
 5758 00ba FFF7FEFF 		bl	cc2400_rx
1438:bluetooth_rxtx.c **** 
1439:bluetooth_rxtx.c **** 	cs_trigger_enable();
 5759              		.loc 1 1439 0
 5760 00be FFF7FEFF 		bl	cs_trigger_enable
1440:bluetooth_rxtx.c **** 
1441:bluetooth_rxtx.c **** 	while ( requested_mode == MODE_RX_SYMBOLS || requested_mode == MODE_BT_FOLLOW )
 5761              		.loc 1 1441 0
 5762 00c2 A2E0     		b	.L280
 5763              	.L292:
1442:bluetooth_rxtx.c **** 	{
1443:bluetooth_rxtx.c **** 
1444:bluetooth_rxtx.c **** 		RXLED_CLR;
 5764              		.loc 1 1444 0
 5765 00c4 5C4B     		ldr	r3, .L293+8
 5766 00c6 1022     		movs	r2, #16
ARM GAS  /tmp/ccSuvgbr.s 			page 126


 5767 00c8 1A60     		str	r2, [r3]
1445:bluetooth_rxtx.c **** 
1446:bluetooth_rxtx.c **** 		/* Wait for DMA transfer. TODO - need more work on
1447:bluetooth_rxtx.c **** 		 * RSSI. Should send RSSI indications to host even
1448:bluetooth_rxtx.c **** 		 * when not transferring data. That would also keep
1449:bluetooth_rxtx.c **** 		 * the USB stream going. This loop runs 50-80 times
1450:bluetooth_rxtx.c **** 		 * while waiting for DMA, but RSSI sampling does not
1451:bluetooth_rxtx.c **** 		 * cover all the symbols in a DMA transfer. Can not do
1452:bluetooth_rxtx.c **** 		 * RSSI sampling in CS interrupt, but could log time
1453:bluetooth_rxtx.c **** 		 * at multiple trigger points there. The MAX() below
1454:bluetooth_rxtx.c **** 		 * helps with statistics in the case that cs_trigger
1455:bluetooth_rxtx.c **** 		 * happened before the loop started. */
1456:bluetooth_rxtx.c **** 		rssi_reset();
 5768              		.loc 1 1456 0
 5769 00ca FFF7FEFF 		bl	rssi_reset
1457:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 5770              		.loc 1 1457 0
 5771 00ce 8023     		movs	r3, #128
 5772 00d0 BB71     		strb	r3, [r7, #6]
1458:bluetooth_rxtx.c **** 		while (!rx_tc) {
 5773              		.loc 1 1458 0
 5774 00d2 33E0     		b	.L281
 5775              	.L284:
1459:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 5776              		.loc 1 1459 0
 5777 00d4 0620     		movs	r0, #6
 5778 00d6 FFF7FEFF 		bl	cc2400_get
 5779 00da 0346     		mov	r3, r0
 5780 00dc 1B0A     		lsrs	r3, r3, #8
 5781 00de 9BB2     		uxth	r3, r3
 5782 00e0 FB71     		strb	r3, [r7, #7]
1460:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 5783              		.loc 1 1460 0
 5784 00e2 564B     		ldr	r3, .L293+12
 5785 00e4 1B78     		ldrb	r3, [r3]
 5786 00e6 DBB2     		uxtb	r3, r3
 5787 00e8 002B     		cmp	r3, #0
 5788 00ea 11D0     		beq	.L282
 5789              		.loc 1 1460 0 is_stmt 0 discriminator 1
 5790 00ec 97F90630 		ldrsb	r3, [r7, #6]
 5791 00f0 13F1800F 		cmn	r3, #128
 5792 00f4 0CD1     		bne	.L282
1461:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 5793              		.loc 1 1461 0 is_stmt 1
 5794 00f6 524B     		ldr	r3, .L293+16
 5795 00f8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5796 00fa 5BB2     		sxtb	r3, r3
 5797 00fc 03F13602 		add	r2, r3, #54
 5798 0100 97F90730 		ldrsb	r3, [r7, #7]
 5799 0104 9342     		cmp	r3, r2
 5800 0106 B8BF     		it	lt
 5801 0108 1346     		movlt	r3, r2
 5802 010a FB71     		strb	r3, [r7, #7]
1462:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 5803              		.loc 1 1462 0
 5804 010c FB79     		ldrb	r3, [r7, #7]
 5805 010e BB71     		strb	r3, [r7, #6]
ARM GAS  /tmp/ccSuvgbr.s 			page 127


 5806              	.L282:
1463:bluetooth_rxtx.c **** 			}
1464:bluetooth_rxtx.c **** 			rssi_add(rssi);
 5807              		.loc 1 1464 0
 5808 0110 97F90730 		ldrsb	r3, [r7, #7]
 5809 0114 1846     		mov	r0, r3
 5810 0116 FFF7FEFF 		bl	rssi_add
1465:bluetooth_rxtx.c **** 
1466:bluetooth_rxtx.c **** 			handle_usb(clkn);
 5811              		.loc 1 1466 0
 5812 011a 4A4B     		ldr	r3, .L293+20
 5813 011c 1B68     		ldr	r3, [r3]
 5814 011e 1846     		mov	r0, r3
 5815 0120 FFF7FEFF 		bl	handle_usb
1467:bluetooth_rxtx.c **** 
1468:bluetooth_rxtx.c **** 			/* If timer says time to hop, do it. */
1469:bluetooth_rxtx.c **** 			if (do_hop) {
 5816              		.loc 1 1469 0
 5817 0124 484B     		ldr	r3, .L293+24
 5818 0126 1B78     		ldrb	r3, [r3]
 5819 0128 DBB2     		uxtb	r3, r3
 5820 012a 002B     		cmp	r3, #0
 5821 012c 02D0     		beq	.L283
1470:bluetooth_rxtx.c **** 				hop();
 5822              		.loc 1 1470 0
 5823 012e FFF7FEFF 		bl	hop
 5824 0132 03E0     		b	.L281
 5825              	.L283:
1471:bluetooth_rxtx.c **** 			} else {
1472:bluetooth_rxtx.c **** 				TXLED_CLR;
 5826              		.loc 1 1472 0
 5827 0134 404B     		ldr	r3, .L293+8
 5828 0136 4FF48072 		mov	r2, #256
 5829 013a 1A60     		str	r2, [r3]
 5830              	.L281:
1458:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 5831              		.loc 1 1458 0
 5832 013c 434B     		ldr	r3, .L293+28
 5833 013e 1B68     		ldr	r3, [r3]
 5834 0140 002B     		cmp	r3, #0
 5835 0142 C7D0     		beq	.L284
1473:bluetooth_rxtx.c **** 			}
1474:bluetooth_rxtx.c **** 			/* TODO - set per-channel carrier sense threshold.
1475:bluetooth_rxtx.c **** 			 * Set by firmware or host. */
1476:bluetooth_rxtx.c **** 		}
1477:bluetooth_rxtx.c **** 
1478:bluetooth_rxtx.c **** 		RXLED_SET;
 5836              		.loc 1 1478 0
 5837 0144 424B     		ldr	r3, .L293+32
 5838 0146 1022     		movs	r2, #16
 5839 0148 1A60     		str	r2, [r3]
1479:bluetooth_rxtx.c **** 
1480:bluetooth_rxtx.c **** 		if (rx_err) {
 5840              		.loc 1 1480 0
 5841 014a 424B     		ldr	r3, .L293+36
 5842 014c 1B68     		ldr	r3, [r3]
 5843 014e 002B     		cmp	r3, #0
ARM GAS  /tmp/ccSuvgbr.s 			page 128


 5844 0150 07D0     		beq	.L285
1481:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5845              		.loc 1 1481 0
 5846 0152 414B     		ldr	r3, .L293+40
 5847 0154 1B78     		ldrb	r3, [r3]
 5848 0156 DBB2     		uxtb	r3, r3
 5849 0158 43F00203 		orr	r3, r3, #2
 5850 015c DAB2     		uxtb	r2, r3
 5851 015e 3E4B     		ldr	r3, .L293+40
 5852 0160 1A70     		strb	r2, [r3]
 5853              	.L285:
1482:bluetooth_rxtx.c **** 		}
1483:bluetooth_rxtx.c **** 
1484:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1485:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 5854              		.loc 1 1485 0
 5855 0162 3A4B     		ldr	r3, .L293+28
 5856 0164 1B68     		ldr	r3, [r3]
 5857 0166 012B     		cmp	r3, #1
 5858 0168 07D9     		bls	.L286
1486:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 5859              		.loc 1 1486 0
 5860 016a 3B4B     		ldr	r3, .L293+40
 5861 016c 1B78     		ldrb	r3, [r3]
 5862 016e DBB2     		uxtb	r3, r3
 5863 0170 43F00103 		orr	r3, r3, #1
 5864 0174 DAB2     		uxtb	r2, r3
 5865 0176 384B     		ldr	r3, .L293+40
 5866 0178 1A70     		strb	r2, [r3]
 5867              	.L286:
1487:bluetooth_rxtx.c **** 
1488:bluetooth_rxtx.c **** 		if (dma_discard) {
 5868              		.loc 1 1488 0
 5869 017a 384B     		ldr	r3, .L293+44
 5870 017c 1B78     		ldrb	r3, [r3]
 5871 017e DBB2     		uxtb	r3, r3
 5872 0180 002B     		cmp	r3, #0
 5873 0182 0AD0     		beq	.L287
1489:bluetooth_rxtx.c **** 			status |= DISCARD;
 5874              		.loc 1 1489 0
 5875 0184 344B     		ldr	r3, .L293+40
 5876 0186 1B78     		ldrb	r3, [r3]
 5877 0188 DBB2     		uxtb	r3, r3
 5878 018a 43F02003 		orr	r3, r3, #32
 5879 018e DAB2     		uxtb	r2, r3
 5880 0190 314B     		ldr	r3, .L293+40
 5881 0192 1A70     		strb	r2, [r3]
1490:bluetooth_rxtx.c **** 			dma_discard = 0;
 5882              		.loc 1 1490 0
 5883 0194 314B     		ldr	r3, .L293+44
 5884 0196 0022     		movs	r2, #0
 5885 0198 1A70     		strb	r2, [r3]
 5886              	.L287:
1491:bluetooth_rxtx.c **** 		}
1492:bluetooth_rxtx.c **** 
1493:bluetooth_rxtx.c **** 		rssi_iir_update();
 5887              		.loc 1 1493 0
ARM GAS  /tmp/ccSuvgbr.s 			page 129


 5888 019a FFF7FEFF 		bl	rssi_iir_update
1494:bluetooth_rxtx.c **** 
1495:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1496:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1497:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1498:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1499:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 5889              		.loc 1 1499 0
 5890 019e 274B     		ldr	r3, .L293+12
 5891 01a0 1B78     		ldrb	r3, [r3]
 5892 01a2 DBB2     		uxtb	r3, r3
 5893 01a4 002B     		cmp	r3, #0
 5894 01a6 03D1     		bne	.L288
 5895              		.loc 1 1499 0 is_stmt 0 discriminator 1
 5896 01a8 2D4B     		ldr	r3, .L293+48
 5897 01aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5898 01ac 002B     		cmp	r3, #0
 5899 01ae 0AD0     		beq	.L289
 5900              	.L288:
1500:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 5901              		.loc 1 1500 0 is_stmt 1
 5902 01b0 294B     		ldr	r3, .L293+40
 5903 01b2 1B78     		ldrb	r3, [r3]
 5904 01b4 DBB2     		uxtb	r3, r3
 5905 01b6 43F00803 		orr	r3, r3, #8
 5906 01ba DAB2     		uxtb	r2, r3
 5907 01bc 264B     		ldr	r3, .L293+40
 5908 01be 1A70     		strb	r2, [r3]
1501:bluetooth_rxtx.c **** 			cs_trigger = 0;
 5909              		.loc 1 1501 0
 5910 01c0 1E4B     		ldr	r3, .L293+12
 5911 01c2 0022     		movs	r2, #0
 5912 01c4 1A70     		strb	r2, [r3]
 5913              	.L289:
1502:bluetooth_rxtx.c **** 		}
1503:bluetooth_rxtx.c **** 
1504:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 5914              		.loc 1 1504 0
 5915 01c6 274B     		ldr	r3, .L293+52
 5916 01c8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5917 01ca 5AB2     		sxtb	r2, r3
 5918 01cc 1C4B     		ldr	r3, .L293+16
 5919 01ce 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5920 01d0 5BB2     		sxtb	r3, r3
 5921 01d2 3633     		adds	r3, r3, #54
 5922 01d4 9A42     		cmp	r2, r3
 5923 01d6 07DB     		blt	.L290
1505:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 5924              		.loc 1 1505 0
 5925 01d8 1F4B     		ldr	r3, .L293+40
 5926 01da 1B78     		ldrb	r3, [r3]
 5927 01dc DBB2     		uxtb	r3, r3
 5928 01de 43F01003 		orr	r3, r3, #16
 5929 01e2 DAB2     		uxtb	r2, r3
 5930 01e4 1C4B     		ldr	r3, .L293+40
 5931 01e6 1A70     		strb	r2, [r3]
 5932              	.L290:
ARM GAS  /tmp/ccSuvgbr.s 			page 130


1506:bluetooth_rxtx.c **** 		}
1507:bluetooth_rxtx.c **** 
1508:bluetooth_rxtx.c **** 		enqueue(BR_PACKET, (uint8_t*)idle_rxbuf);
 5933              		.loc 1 1508 0
 5934 01e8 1F4B     		ldr	r3, .L293+56
 5935 01ea 1B68     		ldr	r3, [r3]
 5936 01ec 0020     		movs	r0, #0
 5937 01ee 1946     		mov	r1, r3
 5938 01f0 FFF7FEFF 		bl	enqueue
 5939              	.L291:
1509:bluetooth_rxtx.c **** 
1510:bluetooth_rxtx.c **** 	rx_continue:
1511:bluetooth_rxtx.c **** 		handle_usb(clkn);
 5940              		.loc 1 1511 0
 5941 01f4 134B     		ldr	r3, .L293+20
 5942 01f6 1B68     		ldr	r3, [r3]
 5943 01f8 1846     		mov	r0, r3
 5944 01fa FFF7FEFF 		bl	handle_usb
1512:bluetooth_rxtx.c **** 		rx_tc = 0;
 5945              		.loc 1 1512 0
 5946 01fe 134B     		ldr	r3, .L293+28
 5947 0200 0022     		movs	r2, #0
 5948 0202 1A60     		str	r2, [r3]
1513:bluetooth_rxtx.c **** 		rx_err = 0;
 5949              		.loc 1 1513 0
 5950 0204 134B     		ldr	r3, .L293+36
 5951 0206 0022     		movs	r2, #0
 5952 0208 1A60     		str	r2, [r3]
 5953              	.L280:
1441:bluetooth_rxtx.c **** 	{
 5954              		.loc 1 1441 0
 5955 020a 184B     		ldr	r3, .L293+60
 5956 020c 1B78     		ldrb	r3, [r3]
 5957 020e DBB2     		uxtb	r3, r3
 5958 0210 012B     		cmp	r3, #1
 5959 0212 3FF457AF 		beq	.L292
1441:bluetooth_rxtx.c **** 	{
 5960              		.loc 1 1441 0 is_stmt 0 discriminator 1
 5961 0216 154B     		ldr	r3, .L293+60
 5962 0218 1B78     		ldrb	r3, [r3]
 5963 021a DBB2     		uxtb	r3, r3
 5964 021c 082B     		cmp	r3, #8
 5965 021e 3FF451AF 		beq	.L292
1514:bluetooth_rxtx.c **** 	}
1515:bluetooth_rxtx.c **** 
1516:bluetooth_rxtx.c **** 	/* This call is a nop so far. Since bt_rx_stream() starts the
1517:bluetooth_rxtx.c **** 	 * stream, it makes sense that it would stop it. TODO - how
1518:bluetooth_rxtx.c **** 	 * should setup/teardown be handled? Should every new mode be
1519:bluetooth_rxtx.c **** 	 * starting from scratch? */
1520:bluetooth_rxtx.c **** 	dio_ssp_stop();
 5966              		.loc 1 1520 0 is_stmt 1
 5967 0222 FFF7FEFF 		bl	dio_ssp_stop
1521:bluetooth_rxtx.c **** 	cs_trigger_disable();
 5968              		.loc 1 1521 0
 5969 0226 FFF7FEFF 		bl	cs_trigger_disable
1522:bluetooth_rxtx.c **** }
 5970              		.loc 1 1522 0
ARM GAS  /tmp/ccSuvgbr.s 			page 131


 5971 022a 0837     		adds	r7, r7, #8
 5972              		.cfi_def_cfa_offset 8
 5973 022c BD46     		mov	sp, r7
 5974              		.cfi_def_cfa_register 13
 5975              		@ sp needed
 5976 022e 80BD     		pop	{r7, pc}
 5977              	.L294:
 5978              		.align	2
 5979              	.L293:
 5980 0230 58C00920 		.word	537509976
 5981 0234 08400040 		.word	1073758216
 5982 0238 3CC00920 		.word	537509948
 5983 023c 00000000 		.word	cs_trigger
 5984 0240 00000000 		.word	cs_threshold_cur
 5985 0244 00000000 		.word	clkn
 5986 0248 00000000 		.word	do_hop
 5987 024c 00000000 		.word	rx_tc
 5988 0250 38C00920 		.word	537509944
 5989 0254 00000000 		.word	rx_err
 5990 0258 00000000 		.word	status
 5991 025c 00000000 		.word	dma_discard
 5992 0260 00000000 		.word	cs_no_squelch
 5993 0264 00000000 		.word	rssi_max
 5994 0268 00000000 		.word	idle_rxbuf
 5995 026c 00000000 		.word	requested_mode
 5996              		.cfi_endproc
 5997              	.LFE26:
 5999              		.section	.text.le_set_access_address,"ax",%progbits
 6000              		.align	2
 6001              		.thumb
 6002              		.thumb_func
 6004              	le_set_access_address:
 6005              	.LFB27:
1523:bluetooth_rxtx.c **** 
1524:bluetooth_rxtx.c **** /* set LE access address */
1525:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 6006              		.loc 1 1525 0
 6007              		.cfi_startproc
 6008              		@ args = 0, pretend = 0, frame = 16
 6009              		@ frame_needed = 1, uses_anonymous_args = 0
 6010 0000 80B5     		push	{r7, lr}
 6011              		.cfi_def_cfa_offset 8
 6012              		.cfi_offset 7, -8
 6013              		.cfi_offset 14, -4
 6014 0002 84B0     		sub	sp, sp, #16
 6015              		.cfi_def_cfa_offset 24
 6016 0004 00AF     		add	r7, sp, #0
 6017              		.cfi_def_cfa_register 7
 6018 0006 7860     		str	r0, [r7, #4]
1526:bluetooth_rxtx.c **** 	u32 aa_rev;
1527:bluetooth_rxtx.c **** 
1528:bluetooth_rxtx.c **** 	le.access_address = aa;
 6019              		.loc 1 1528 0
 6020 0008 094A     		ldr	r2, .L296
 6021 000a 7B68     		ldr	r3, [r7, #4]
 6022 000c 1360     		str	r3, [r2]
1529:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
ARM GAS  /tmp/ccSuvgbr.s 			page 132


 6023              		.loc 1 1529 0
 6024 000e 7868     		ldr	r0, [r7, #4]
 6025 0010 FFF7FEFF 		bl	rbit
 6026 0014 F860     		str	r0, [r7, #12]
1530:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 6027              		.loc 1 1530 0
 6028 0016 FB68     		ldr	r3, [r7, #12]
 6029 0018 9AB2     		uxth	r2, r3
 6030 001a 054B     		ldr	r3, .L296
 6031 001c DA80     		strh	r2, [r3, #6]	@ movhi
1531:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 6032              		.loc 1 1531 0
 6033 001e FB68     		ldr	r3, [r7, #12]
 6034 0020 1B0C     		lsrs	r3, r3, #16
 6035 0022 9AB2     		uxth	r2, r3
 6036 0024 024B     		ldr	r3, .L296
 6037 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1532:bluetooth_rxtx.c **** }
 6038              		.loc 1 1532 0
 6039 0028 1037     		adds	r7, r7, #16
 6040              		.cfi_def_cfa_offset 8
 6041 002a BD46     		mov	sp, r7
 6042              		.cfi_def_cfa_register 13
 6043              		@ sp needed
 6044 002c 80BD     		pop	{r7, pc}
 6045              	.L297:
 6046 002e 00BF     		.align	2
 6047              	.L296:
 6048 0030 00000000 		.word	le
 6049              		.cfi_endproc
 6050              	.LFE27:
 6052              		.section	.text.reset_le,"ax",%progbits
 6053              		.align	2
 6054              		.global	reset_le
 6055              		.thumb
 6056              		.thumb_func
 6058              	reset_le:
 6059              	.LFB28:
1533:bluetooth_rxtx.c **** 
1534:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1535:bluetooth_rxtx.c **** void reset_le() {
 6060              		.loc 1 1535 0
 6061              		.cfi_startproc
 6062              		@ args = 0, pretend = 0, frame = 0
 6063              		@ frame_needed = 1, uses_anonymous_args = 0
 6064 0000 80B5     		push	{r7, lr}
 6065              		.cfi_def_cfa_offset 8
 6066              		.cfi_offset 7, -8
 6067              		.cfi_offset 14, -4
 6068 0002 00AF     		add	r7, sp, #0
 6069              		.cfi_def_cfa_register 7
1536:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 6070              		.loc 1 1536 0
 6071 0004 1F48     		ldr	r0, .L299
 6072 0006 FFF7FEFF 		bl	le_set_access_address
1537:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;               // advertising channel CRCInit
 6073              		.loc 1 1537 0
ARM GAS  /tmp/ccSuvgbr.s 			page 133


 6074 000a 1F4B     		ldr	r3, .L299+4
 6075 000c 1F4A     		ldr	r2, .L299+8
 6076 000e 9A60     		str	r2, [r3, #8]
1538:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 6077              		.loc 1 1538 0
 6078 0010 1D4B     		ldr	r3, .L299+4
 6079 0012 1F4A     		ldr	r2, .L299+12
 6080 0014 DA60     		str	r2, [r3, #12]
1539:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 6081              		.loc 1 1539 0
 6082 0016 1C4B     		ldr	r3, .L299+4
 6083 0018 0122     		movs	r2, #1
 6084 001a 1A61     		str	r2, [r3, #16]
1540:bluetooth_rxtx.c **** 	le.last_packet = 0;
 6085              		.loc 1 1540 0
 6086 001c 1A4B     		ldr	r3, .L299+4
 6087 001e 0022     		movs	r2, #0
 6088 0020 1A64     		str	r2, [r3, #64]
1541:bluetooth_rxtx.c **** 
1542:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 6089              		.loc 1 1542 0
 6090 0022 194B     		ldr	r3, .L299+4
 6091 0024 0022     		movs	r2, #0
 6092 0026 1A75     		strb	r2, [r3, #20]
1543:bluetooth_rxtx.c **** 
1544:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 6093              		.loc 1 1544 0
 6094 0028 174B     		ldr	r3, .L299+4
 6095 002a 0022     		movs	r2, #0
 6096 002c 5A75     		strb	r2, [r3, #21]
1545:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 6097              		.loc 1 1545 0
 6098 002e 164B     		ldr	r3, .L299+4
 6099 0030 0022     		movs	r2, #0
 6100 0032 9A75     		strb	r2, [r3, #22]
1546:bluetooth_rxtx.c **** 
1547:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 6101              		.loc 1 1547 0
 6102 0034 144B     		ldr	r3, .L299+4
 6103 0036 0022     		movs	r2, #0
 6104 0038 9A61     		str	r2, [r3, #24]
1548:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 6105              		.loc 1 1548 0
 6106 003a 134B     		ldr	r3, .L299+4
 6107 003c 0022     		movs	r2, #0
 6108 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1549:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6109              		.loc 1 1549 0
 6110 0040 114B     		ldr	r3, .L299+4
 6111 0042 0022     		movs	r2, #0
 6112 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1550:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6113              		.loc 1 1550 0
 6114 0046 104B     		ldr	r3, .L299+4
 6115 0048 0022     		movs	r2, #0
 6116 004a DA83     		strh	r2, [r3, #30]	@ movhi
1551:bluetooth_rxtx.c **** 	le.conn_count = 0;
ARM GAS  /tmp/ccSuvgbr.s 			page 134


 6117              		.loc 1 1551 0
 6118 004c 0E4B     		ldr	r3, .L299+4
 6119 004e 0022     		movs	r2, #0
 6120 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1552:bluetooth_rxtx.c **** 
1553:bluetooth_rxtx.c **** 	le.win_size = 0;
 6121              		.loc 1 1553 0
 6122 0052 0D4B     		ldr	r3, .L299+4
 6123 0054 0022     		movs	r2, #0
 6124 0056 83F82220 		strb	r2, [r3, #34]
1554:bluetooth_rxtx.c **** 	le.win_offset = 0;
 6125              		.loc 1 1554 0
 6126 005a 0B4B     		ldr	r3, .L299+4
 6127 005c 0022     		movs	r2, #0
 6128 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1555:bluetooth_rxtx.c **** 
1556:bluetooth_rxtx.c **** 	le.update_pending = 0;
 6129              		.loc 1 1556 0
 6130 0060 094B     		ldr	r3, .L299+4
 6131 0062 0022     		movs	r2, #0
 6132 0064 9A62     		str	r2, [r3, #40]
1557:bluetooth_rxtx.c **** 	le.update_instant = 0;
 6133              		.loc 1 1557 0
 6134 0066 084B     		ldr	r3, .L299+4
 6135 0068 0022     		movs	r2, #0
 6136 006a 9A85     		strh	r2, [r3, #44]	@ movhi
1558:bluetooth_rxtx.c **** 	le.interval_update = 0;
 6137              		.loc 1 1558 0
 6138 006c 064B     		ldr	r3, .L299+4
 6139 006e 0022     		movs	r2, #0
 6140 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1559:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 6141              		.loc 1 1559 0
 6142 0072 054B     		ldr	r3, .L299+4
 6143 0074 0022     		movs	r2, #0
 6144 0076 83F83020 		strb	r2, [r3, #48]
1560:bluetooth_rxtx.c **** 	le.win_offset_update;
1561:bluetooth_rxtx.c **** 
1562:bluetooth_rxtx.c **** 	do_hop = 0;
 6145              		.loc 1 1562 0
 6146 007a 064B     		ldr	r3, .L299+16
 6147 007c 0022     		movs	r2, #0
 6148 007e 1A70     		strb	r2, [r3]
1563:bluetooth_rxtx.c **** }
 6149              		.loc 1 1563 0
 6150 0080 80BD     		pop	{r7, pc}
 6151              	.L300:
 6152 0082 00BF     		.align	2
 6153              	.L299:
 6154 0084 D6BE898E 		.word	-1903575338
 6155 0088 00000000 		.word	le
 6156 008c 55555500 		.word	5592405
 6157 0090 AAAAAA00 		.word	11184810
 6158 0094 00000000 		.word	do_hop
 6159              		.cfi_endproc
 6160              	.LFE28:
 6162              		.section	.text.reset_le_promisc,"ax",%progbits
ARM GAS  /tmp/ccSuvgbr.s 			page 135


 6163              		.align	2
 6164              		.global	reset_le_promisc
 6165              		.thumb
 6166              		.thumb_func
 6168              	reset_le_promisc:
 6169              	.LFB29:
1564:bluetooth_rxtx.c **** 
1565:bluetooth_rxtx.c **** // reset LE Promisc state
1566:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 6170              		.loc 1 1566 0
 6171              		.cfi_startproc
 6172              		@ args = 0, pretend = 0, frame = 0
 6173              		@ frame_needed = 1, uses_anonymous_args = 0
 6174 0000 80B5     		push	{r7, lr}
 6175              		.cfi_def_cfa_offset 8
 6176              		.cfi_offset 7, -8
 6177              		.cfi_offset 14, -4
 6178 0002 00AF     		add	r7, sp, #0
 6179              		.cfi_def_cfa_register 7
1567:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 6180              		.loc 1 1567 0
 6181 0004 0548     		ldr	r0, .L302
 6182 0006 0021     		movs	r1, #0
 6183 0008 4FF48472 		mov	r2, #264
 6184 000c FFF7FEFF 		bl	memset
1568:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 6185              		.loc 1 1568 0
 6186 0010 024B     		ldr	r3, .L302
 6187 0012 4FF0FF32 		mov	r2, #-1
 6188 0016 C3F80021 		str	r2, [r3, #256]
1569:bluetooth_rxtx.c **** }
 6189              		.loc 1 1569 0
 6190 001a 80BD     		pop	{r7, pc}
 6191              	.L303:
 6192              		.align	2
 6193              	.L302:
 6194 001c 00000000 		.word	le_promisc
 6195              		.cfi_endproc
 6196              	.LFE29:
 6198              		.section	.text.bt_generic_le,"ax",%progbits
 6199              		.align	2
 6200              		.global	bt_generic_le
 6201              		.thumb
 6202              		.thumb_func
 6204              	bt_generic_le:
 6205              	.LFB30:
1570:bluetooth_rxtx.c **** 
1571:bluetooth_rxtx.c **** /* generic le mode */
1572:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1573:bluetooth_rxtx.c **** {
 6206              		.loc 1 1573 0
 6207              		.cfi_startproc
 6208              		@ args = 0, pretend = 0, frame = 32
 6209              		@ frame_needed = 1, uses_anonymous_args = 0
 6210 0000 80B5     		push	{r7, lr}
 6211              		.cfi_def_cfa_offset 8
 6212              		.cfi_offset 7, -8
ARM GAS  /tmp/ccSuvgbr.s 			page 136


 6213              		.cfi_offset 14, -4
 6214 0002 88B0     		sub	sp, sp, #32
 6215              		.cfi_def_cfa_offset 40
 6216 0004 00AF     		add	r7, sp, #0
 6217              		.cfi_def_cfa_register 7
 6218 0006 0346     		mov	r3, r0
 6219 0008 FB71     		strb	r3, [r7, #7]
1574:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6220              		.loc 1 1574 0
 6221 000a 0023     		movs	r3, #0
 6222 000c FB60     		str	r3, [r7, #12]
1575:bluetooth_rxtx.c **** 	u8 hold;
1576:bluetooth_rxtx.c **** 	int i, j;
1577:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1578:bluetooth_rxtx.c **** 
1579:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6223              		.loc 1 1579 0
 6224 000e 954B     		ldr	r3, .L329
 6225 0010 0122     		movs	r2, #1
 6226 0012 1A70     		strb	r2, [r3]
1580:bluetooth_rxtx.c **** 	mode = active_mode;
 6227              		.loc 1 1580 0
 6228 0014 944A     		ldr	r2, .L329+4
 6229 0016 FB79     		ldrb	r3, [r7, #7]
 6230 0018 1370     		strb	r3, [r2]
1581:bluetooth_rxtx.c **** 
1582:bluetooth_rxtx.c **** 	reset_le();
 6231              		.loc 1 1582 0
 6232 001a FFF7FEFF 		bl	reset_le
1583:bluetooth_rxtx.c **** 
1584:bluetooth_rxtx.c **** 	// enable USB interrupts
1585:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6233              		.loc 1 1585 0
 6234 001e 934B     		ldr	r3, .L329+8
 6235 0020 4FF08072 		mov	r2, #16777216
 6236 0024 1A60     		str	r2, [r3]
1586:bluetooth_rxtx.c **** 
1587:bluetooth_rxtx.c **** 	RXLED_CLR;
 6237              		.loc 1 1587 0
 6238 0026 924B     		ldr	r3, .L329+12
 6239 0028 1022     		movs	r2, #16
 6240 002a 1A60     		str	r2, [r3]
1588:bluetooth_rxtx.c **** 
1589:bluetooth_rxtx.c **** 	queue_init();
 6241              		.loc 1 1589 0
 6242 002c FFF7FEFF 		bl	queue_init
1590:bluetooth_rxtx.c **** 	dio_ssp_init();
 6243              		.loc 1 1590 0
 6244 0030 FFF7FEFF 		bl	dio_ssp_init
1591:bluetooth_rxtx.c **** 	dma_init();
 6245              		.loc 1 1591 0
 6246 0034 FFF7FEFF 		bl	dma_init
1592:bluetooth_rxtx.c **** 	dio_ssp_start();
 6247              		.loc 1 1592 0
 6248 0038 FFF7FEFF 		bl	dio_ssp_start
1593:bluetooth_rxtx.c **** 	cc2400_rx();
 6249              		.loc 1 1593 0
ARM GAS  /tmp/ccSuvgbr.s 			page 137


 6250 003c FFF7FEFF 		bl	cc2400_rx
1594:bluetooth_rxtx.c **** 
1595:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6251              		.loc 1 1595 0
 6252 0040 FFF7FEFF 		bl	cs_trigger_enable
1596:bluetooth_rxtx.c **** 
1597:bluetooth_rxtx.c **** 	hold = 0;
 6253              		.loc 1 1597 0
 6254 0044 0023     		movs	r3, #0
 6255 0046 FB77     		strb	r3, [r7, #31]
1598:bluetooth_rxtx.c **** 
1599:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6256              		.loc 1 1599 0
 6257 0048 F8E0     		b	.L305
 6258              	.L328:
 6259              	.LBB12:
1600:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6260              		.loc 1 1600 0
 6261 004a 8A4B     		ldr	r3, .L329+16
 6262 004c 1B88     		ldrh	r3, [r3]	@ movhi
 6263 004e 9BB2     		uxth	r3, r3
 6264 0050 002B     		cmp	r3, #0
 6265 0052 24D0     		beq	.L306
1601:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6266              		.loc 1 1601 0
 6267 0054 6420     		movs	r0, #100
 6268 0056 FFF7FEFF 		bl	cc2400_strobe
1602:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6269              		.loc 1 1602 0
 6270 005a 00BF     		nop
 6271              	.L307:
 6272              		.loc 1 1602 0 is_stmt 0 discriminator 1
 6273 005c FFF7FEFF 		bl	cc2400_status
 6274 0060 0346     		mov	r3, r0
 6275 0062 03F00403 		and	r3, r3, #4
 6276 0066 002B     		cmp	r3, #0
 6277 0068 F8D1     		bne	.L307
1603:bluetooth_rxtx.c **** 
1604:bluetooth_rxtx.c **** 			/* Retune */
1605:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6278              		.loc 1 1605 0 is_stmt 1
 6279 006a 834B     		ldr	r3, .L329+20
 6280 006c 1B88     		ldrh	r3, [r3]	@ movhi
 6281 006e 9BB2     		uxth	r3, r3
 6282 0070 013B     		subs	r3, r3, #1
 6283 0072 9BB2     		uxth	r3, r3
 6284 0074 0220     		movs	r0, #2
 6285 0076 1946     		mov	r1, r3
 6286 0078 FFF7FEFF 		bl	cc2400_set
1606:bluetooth_rxtx.c **** 
1607:bluetooth_rxtx.c **** 			/* Wait for lock */
1608:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6287              		.loc 1 1608 0
 6288 007c 6120     		movs	r0, #97
 6289 007e FFF7FEFF 		bl	cc2400_strobe
1609:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6290              		.loc 1 1609 0
ARM GAS  /tmp/ccSuvgbr.s 			page 138


 6291 0082 00BF     		nop
 6292              	.L308:
 6293              		.loc 1 1609 0 is_stmt 0 discriminator 1
 6294 0084 FFF7FEFF 		bl	cc2400_status
 6295 0088 0346     		mov	r3, r0
 6296 008a 03F00403 		and	r3, r3, #4
 6297 008e 002B     		cmp	r3, #0
 6298 0090 F8D0     		beq	.L308
1610:bluetooth_rxtx.c **** 
1611:bluetooth_rxtx.c **** 			/* RX mode */
1612:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6299              		.loc 1 1612 0 is_stmt 1
 6300 0092 6220     		movs	r0, #98
 6301 0094 FFF7FEFF 		bl	cc2400_strobe
1613:bluetooth_rxtx.c **** 
1614:bluetooth_rxtx.c **** 			requested_channel = 0;
 6302              		.loc 1 1614 0
 6303 0098 764B     		ldr	r3, .L329+16
 6304 009a 0022     		movs	r2, #0
 6305 009c 1A80     		strh	r2, [r3]	@ movhi
 6306              	.L306:
1615:bluetooth_rxtx.c **** 		}
1616:bluetooth_rxtx.c **** 
1617:bluetooth_rxtx.c **** 		if (do_hop) {
 6307              		.loc 1 1617 0
 6308 009e 774B     		ldr	r3, .L329+24
 6309 00a0 1B78     		ldrb	r3, [r3]
 6310 00a2 DBB2     		uxtb	r3, r3
 6311 00a4 002B     		cmp	r3, #0
 6312 00a6 02D0     		beq	.L309
1618:bluetooth_rxtx.c **** 			hop();
 6313              		.loc 1 1618 0
 6314 00a8 FFF7FEFF 		bl	hop
 6315 00ac 03E0     		b	.L310
 6316              	.L309:
1619:bluetooth_rxtx.c **** 		} else {
1620:bluetooth_rxtx.c **** 			TXLED_CLR;
 6317              		.loc 1 1620 0
 6318 00ae 704B     		ldr	r3, .L329+12
 6319 00b0 4FF48072 		mov	r2, #256
 6320 00b4 1A60     		str	r2, [r3]
 6321              	.L310:
1621:bluetooth_rxtx.c **** 		}
1622:bluetooth_rxtx.c **** 
1623:bluetooth_rxtx.c **** 		RXLED_CLR;
 6322              		.loc 1 1623 0
 6323 00b6 6E4B     		ldr	r3, .L329+12
 6324 00b8 1022     		movs	r2, #16
 6325 00ba 1A60     		str	r2, [r3]
1624:bluetooth_rxtx.c **** 
1625:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1626:bluetooth_rxtx.c **** 		rssi_reset();
 6326              		.loc 1 1626 0
 6327 00bc FFF7FEFF 		bl	rssi_reset
1627:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6328              		.loc 1 1627 0
 6329 00c0 8023     		movs	r3, #128
ARM GAS  /tmp/ccSuvgbr.s 			page 139


 6330 00c2 BB74     		strb	r3, [r7, #18]
1628:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 6331              		.loc 1 1628 0
 6332 00c4 22E0     		b	.L311
 6333              	.L314:
1629:bluetooth_rxtx.c **** 		{
1630:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6334              		.loc 1 1630 0
 6335 00c6 0620     		movs	r0, #6
 6336 00c8 FFF7FEFF 		bl	cc2400_get
 6337 00cc 0346     		mov	r3, r0
 6338 00ce 1B0A     		lsrs	r3, r3, #8
 6339 00d0 9BB2     		uxth	r3, r3
 6340 00d2 FB74     		strb	r3, [r7, #19]
1631:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6341              		.loc 1 1631 0
 6342 00d4 6A4B     		ldr	r3, .L329+28
 6343 00d6 1B78     		ldrb	r3, [r3]
 6344 00d8 DBB2     		uxtb	r3, r3
 6345 00da 002B     		cmp	r3, #0
 6346 00dc 11D0     		beq	.L312
 6347              		.loc 1 1631 0 is_stmt 0 discriminator 1
 6348 00de 97F91230 		ldrsb	r3, [r7, #18]
 6349 00e2 13F1800F 		cmn	r3, #128
 6350 00e6 0CD1     		bne	.L312
1632:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6351              		.loc 1 1632 0 is_stmt 1
 6352 00e8 664B     		ldr	r3, .L329+32
 6353 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6354 00ec 5BB2     		sxtb	r3, r3
 6355 00ee 03F13602 		add	r2, r3, #54
 6356 00f2 97F91330 		ldrsb	r3, [r7, #19]
 6357 00f6 9342     		cmp	r3, r2
 6358 00f8 B8BF     		it	lt
 6359 00fa 1346     		movlt	r3, r2
 6360 00fc FB74     		strb	r3, [r7, #19]
1633:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6361              		.loc 1 1633 0
 6362 00fe FB7C     		ldrb	r3, [r7, #19]
 6363 0100 BB74     		strb	r3, [r7, #18]
 6364              	.L312:
1634:bluetooth_rxtx.c **** 			}
1635:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6365              		.loc 1 1635 0
 6366 0102 97F91330 		ldrsb	r3, [r7, #19]
 6367 0106 1846     		mov	r0, r3
 6368 0108 FFF7FEFF 		bl	rssi_add
 6369              	.L311:
1628:bluetooth_rxtx.c **** 		{
 6370              		.loc 1 1628 0
 6371 010c 5E4B     		ldr	r3, .L329+36
 6372 010e 1B68     		ldr	r3, [r3]
 6373 0110 002B     		cmp	r3, #0
 6374 0112 03D1     		bne	.L313
1628:bluetooth_rxtx.c **** 		{
 6375              		.loc 1 1628 0 is_stmt 0 discriminator 1
 6376 0114 5D4B     		ldr	r3, .L329+40
ARM GAS  /tmp/ccSuvgbr.s 			page 140


 6377 0116 1B68     		ldr	r3, [r3]
 6378 0118 002B     		cmp	r3, #0
 6379 011a D4D0     		beq	.L314
 6380              	.L313:
1636:bluetooth_rxtx.c **** 		}
1637:bluetooth_rxtx.c **** 
1638:bluetooth_rxtx.c **** 		if (rx_err) {
 6381              		.loc 1 1638 0 is_stmt 1
 6382 011c 5B4B     		ldr	r3, .L329+40
 6383 011e 1B68     		ldr	r3, [r3]
 6384 0120 002B     		cmp	r3, #0
 6385 0122 07D0     		beq	.L315
1639:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6386              		.loc 1 1639 0
 6387 0124 5A4B     		ldr	r3, .L329+44
 6388 0126 1B78     		ldrb	r3, [r3]
 6389 0128 DBB2     		uxtb	r3, r3
 6390 012a 43F00203 		orr	r3, r3, #2
 6391 012e DAB2     		uxtb	r2, r3
 6392 0130 574B     		ldr	r3, .L329+44
 6393 0132 1A70     		strb	r2, [r3]
 6394              	.L315:
1640:bluetooth_rxtx.c **** 		}
1641:bluetooth_rxtx.c **** 
1642:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1643:bluetooth_rxtx.c **** 		if (!rx_tc)
 6395              		.loc 1 1643 0
 6396 0134 544B     		ldr	r3, .L329+36
 6397 0136 1B68     		ldr	r3, [r3]
 6398 0138 002B     		cmp	r3, #0
 6399 013a 00D1     		bne	.L316
1644:bluetooth_rxtx.c **** 			goto rx_continue;
 6400              		.loc 1 1644 0
 6401 013c 78E0     		b	.L317
 6402              	.L316:
1645:bluetooth_rxtx.c **** 
1646:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1647:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6403              		.loc 1 1647 0
 6404 013e 524B     		ldr	r3, .L329+36
 6405 0140 1B68     		ldr	r3, [r3]
 6406 0142 012B     		cmp	r3, #1
 6407 0144 07D9     		bls	.L318
1648:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6408              		.loc 1 1648 0
 6409 0146 524B     		ldr	r3, .L329+44
 6410 0148 1B78     		ldrb	r3, [r3]
 6411 014a DBB2     		uxtb	r3, r3
 6412 014c 43F00103 		orr	r3, r3, #1
 6413 0150 DAB2     		uxtb	r2, r3
 6414 0152 4F4B     		ldr	r3, .L329+44
 6415 0154 1A70     		strb	r2, [r3]
 6416              	.L318:
1649:bluetooth_rxtx.c **** 
1650:bluetooth_rxtx.c **** 		rssi_iir_update();
 6417              		.loc 1 1650 0
 6418 0156 FFF7FEFF 		bl	rssi_iir_update
ARM GAS  /tmp/ccSuvgbr.s 			page 141


1651:bluetooth_rxtx.c **** 
1652:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1653:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1654:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1655:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1656:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6419              		.loc 1 1656 0
 6420 015a 494B     		ldr	r3, .L329+28
 6421 015c 1B78     		ldrb	r3, [r3]
 6422 015e DBB2     		uxtb	r3, r3
 6423 0160 002B     		cmp	r3, #0
 6424 0162 03D1     		bne	.L319
 6425              		.loc 1 1656 0 is_stmt 0 discriminator 1
 6426 0164 4B4B     		ldr	r3, .L329+48
 6427 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6428 0168 002B     		cmp	r3, #0
 6429 016a 0CD0     		beq	.L320
 6430              	.L319:
1657:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6431              		.loc 1 1657 0 is_stmt 1
 6432 016c 484B     		ldr	r3, .L329+44
 6433 016e 1B78     		ldrb	r3, [r3]
 6434 0170 DBB2     		uxtb	r3, r3
 6435 0172 43F00803 		orr	r3, r3, #8
 6436 0176 DAB2     		uxtb	r2, r3
 6437 0178 454B     		ldr	r3, .L329+44
 6438 017a 1A70     		strb	r2, [r3]
1658:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6439              		.loc 1 1658 0
 6440 017c 0223     		movs	r3, #2
 6441 017e FB77     		strb	r3, [r7, #31]
1659:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6442              		.loc 1 1659 0
 6443 0180 3F4B     		ldr	r3, .L329+28
 6444 0182 0022     		movs	r2, #0
 6445 0184 1A70     		strb	r2, [r3]
 6446              	.L320:
1660:bluetooth_rxtx.c **** 		}
1661:bluetooth_rxtx.c **** 
1662:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6447              		.loc 1 1662 0
 6448 0186 444B     		ldr	r3, .L329+52
 6449 0188 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6450 018a 5AB2     		sxtb	r2, r3
 6451 018c 3D4B     		ldr	r3, .L329+32
 6452 018e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6453 0190 5BB2     		sxtb	r3, r3
 6454 0192 3633     		adds	r3, r3, #54
 6455 0194 9A42     		cmp	r2, r3
 6456 0196 09DB     		blt	.L321
1663:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6457              		.loc 1 1663 0
 6458 0198 3D4B     		ldr	r3, .L329+44
 6459 019a 1B78     		ldrb	r3, [r3]
 6460 019c DBB2     		uxtb	r3, r3
 6461 019e 43F01003 		orr	r3, r3, #16
 6462 01a2 DAB2     		uxtb	r2, r3
ARM GAS  /tmp/ccSuvgbr.s 			page 142


 6463 01a4 3A4B     		ldr	r3, .L329+44
 6464 01a6 1A70     		strb	r2, [r3]
1664:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6465              		.loc 1 1664 0
 6466 01a8 0223     		movs	r3, #2
 6467 01aa FB77     		strb	r3, [r7, #31]
 6468              	.L321:
1665:bluetooth_rxtx.c **** 		}
1666:bluetooth_rxtx.c **** 
1667:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1668:bluetooth_rxtx.c **** 		if (hold == 0) {
 6469              		.loc 1 1668 0
 6470 01ac FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6471 01ae 002B     		cmp	r3, #0
 6472 01b0 00D1     		bne	.L322
1669:bluetooth_rxtx.c **** 			goto rx_continue;
 6473              		.loc 1 1669 0
 6474 01b2 3DE0     		b	.L317
 6475              	.L322:
1670:bluetooth_rxtx.c **** 		}
1671:bluetooth_rxtx.c **** 		hold--;
 6476              		.loc 1 1671 0
 6477 01b4 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6478 01b6 013B     		subs	r3, r3, #1
 6479 01b8 FB77     		strb	r3, [r7, #31]
1672:bluetooth_rxtx.c **** 
1673:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1674:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 6480              		.loc 1 1674 0
 6481 01ba 3848     		ldr	r0, .L329+56
 6482 01bc 3849     		ldr	r1, .L329+60
 6483 01be 4FF4C872 		mov	r2, #400
 6484 01c2 FFF7FEFF 		bl	memcpy
1675:bluetooth_rxtx.c **** 
1676:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1677:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 6485              		.loc 1 1677 0
 6486 01c6 0023     		movs	r3, #0
 6487 01c8 BB61     		str	r3, [r7, #24]
 6488 01ca 25E0     		b	.L323
 6489              	.L326:
1678:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1679:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 6490              		.loc 1 1679 0
 6491 01cc 0023     		movs	r3, #0
 6492 01ce 7B61     		str	r3, [r7, #20]
 6493 01d0 1CE0     		b	.L324
 6494              	.L325:
1680:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6495              		.loc 1 1680 0 discriminator 3
 6496 01d2 BB69     		ldr	r3, [r7, #24]
 6497 01d4 3233     		adds	r3, r3, #50
 6498 01d6 DA00     		lsls	r2, r3, #3
 6499 01d8 7B69     		ldr	r3, [r7, #20]
 6500 01da 1344     		add	r3, r3, r2
 6501 01dc 314A     		ldr	r2, .L329+64
 6502 01de 1168     		ldr	r1, [r2]
ARM GAS  /tmp/ccSuvgbr.s 			page 143


 6503 01e0 BA69     		ldr	r2, [r7, #24]
 6504 01e2 0A44     		add	r2, r2, r1
 6505 01e4 1278     		ldrb	r2, [r2]
 6506 01e6 D2B2     		uxtb	r2, r2
 6507 01e8 D209     		lsrs	r2, r2, #7
 6508 01ea D1B2     		uxtb	r1, r2
 6509 01ec 2B4A     		ldr	r2, .L329+56
 6510 01ee D154     		strb	r1, [r2, r3]
1681:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6511              		.loc 1 1681 0 discriminator 3
 6512 01f0 2C4B     		ldr	r3, .L329+64
 6513 01f2 1B68     		ldr	r3, [r3]
 6514 01f4 BA69     		ldr	r2, [r7, #24]
 6515 01f6 1A44     		add	r2, r2, r3
 6516 01f8 B969     		ldr	r1, [r7, #24]
 6517 01fa 0B44     		add	r3, r3, r1
 6518 01fc 1B78     		ldrb	r3, [r3]
 6519 01fe DBB2     		uxtb	r3, r3
 6520 0200 5B00     		lsls	r3, r3, #1
 6521 0202 DBB2     		uxtb	r3, r3
 6522 0204 1370     		strb	r3, [r2]
1679:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6523              		.loc 1 1679 0 discriminator 3
 6524 0206 7B69     		ldr	r3, [r7, #20]
 6525 0208 0133     		adds	r3, r3, #1
 6526 020a 7B61     		str	r3, [r7, #20]
 6527              	.L324:
1679:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6528              		.loc 1 1679 0 is_stmt 0 discriminator 1
 6529 020c 7B69     		ldr	r3, [r7, #20]
 6530 020e 072B     		cmp	r3, #7
 6531 0210 DFDD     		ble	.L325
1677:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6532              		.loc 1 1677 0 is_stmt 1 discriminator 2
 6533 0212 BB69     		ldr	r3, [r7, #24]
 6534 0214 0133     		adds	r3, r3, #1
 6535 0216 BB61     		str	r3, [r7, #24]
 6536              	.L323:
1677:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6537              		.loc 1 1677 0 is_stmt 0 discriminator 1
 6538 0218 BB69     		ldr	r3, [r7, #24]
 6539 021a 312B     		cmp	r3, #49
 6540 021c D6DD     		ble	.L326
1682:bluetooth_rxtx.c **** 			}
1683:bluetooth_rxtx.c **** 		}
1684:bluetooth_rxtx.c **** 
1685:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 6541              		.loc 1 1685 0 is_stmt 1
 6542 021e 224B     		ldr	r3, .L329+68
 6543 0220 1B68     		ldr	r3, [r3]
 6544 0222 1E48     		ldr	r0, .L329+56
 6545 0224 9847     		blx	r3
 6546 0226 B860     		str	r0, [r7, #8]
1686:bluetooth_rxtx.c **** 		if (!ret) break;
 6547              		.loc 1 1686 0
 6548 0228 BB68     		ldr	r3, [r7, #8]
 6549 022a 002B     		cmp	r3, #0
ARM GAS  /tmp/ccSuvgbr.s 			page 144


 6550 022c 00D1     		bne	.L317
 6551 022e 0CE0     		b	.L327
 6552              	.L317:
1687:bluetooth_rxtx.c **** 
1688:bluetooth_rxtx.c **** 	rx_continue:
1689:bluetooth_rxtx.c **** 		rx_tc = 0;
 6553              		.loc 1 1689 0
 6554 0230 154B     		ldr	r3, .L329+36
 6555 0232 0022     		movs	r2, #0
 6556 0234 1A60     		str	r2, [r3]
1690:bluetooth_rxtx.c **** 		rx_err = 0;
 6557              		.loc 1 1690 0
 6558 0236 154B     		ldr	r3, .L329+40
 6559 0238 0022     		movs	r2, #0
 6560 023a 1A60     		str	r2, [r3]
 6561              	.L305:
 6562              	.LBE12:
1599:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6563              		.loc 1 1599 0
 6564 023c 1B4B     		ldr	r3, .L329+72
 6565 023e 1B78     		ldrb	r3, [r3]
 6566 0240 DBB2     		uxtb	r3, r3
 6567 0242 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6568 0244 9A42     		cmp	r2, r3
 6569 0246 3FF400AF 		beq	.L328
 6570              	.L327:
1691:bluetooth_rxtx.c **** 	}
1692:bluetooth_rxtx.c **** 
1693:bluetooth_rxtx.c **** 	// disable USB interrupts
1694:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 6571              		.loc 1 1694 0
 6572 024a 194B     		ldr	r3, .L329+76
 6573 024c 4FF08072 		mov	r2, #16777216
 6574 0250 1A60     		str	r2, [r3]
1695:bluetooth_rxtx.c **** 
1696:bluetooth_rxtx.c **** 	// reset the radio completely
1697:bluetooth_rxtx.c **** 	cc2400_idle();
 6575              		.loc 1 1697 0
 6576 0252 FFF7FEFF 		bl	cc2400_idle
1698:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6577              		.loc 1 1698 0
 6578 0256 FFF7FEFF 		bl	dio_ssp_stop
1699:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6579              		.loc 1 1699 0
 6580 025a FFF7FEFF 		bl	cs_trigger_disable
1700:bluetooth_rxtx.c **** }
 6581              		.loc 1 1700 0
 6582 025e 2037     		adds	r7, r7, #32
 6583              		.cfi_def_cfa_offset 8
 6584 0260 BD46     		mov	sp, r7
 6585              		.cfi_def_cfa_register 13
 6586              		@ sp needed
 6587 0262 80BD     		pop	{r7, pc}
 6588              	.L330:
 6589              		.align	2
 6590              	.L329:
 6591 0264 00000000 		.word	modulation
ARM GAS  /tmp/ccSuvgbr.s 			page 145


 6592 0268 00000000 		.word	mode
 6593 026c 00E100E0 		.word	-536813312
 6594 0270 3CC00920 		.word	537509948
 6595 0274 00000000 		.word	requested_channel
 6596 0278 00000000 		.word	channel
 6597 027c 00000000 		.word	do_hop
 6598 0280 00000000 		.word	cs_trigger
 6599 0284 00000000 		.word	cs_threshold_cur
 6600 0288 00000000 		.word	rx_tc
 6601 028c 00000000 		.word	rx_err
 6602 0290 00000000 		.word	status
 6603 0294 00000000 		.word	cs_no_squelch
 6604 0298 00000000 		.word	rssi_max
 6605 029c 00000000 		.word	unpacked
 6606 02a0 90010000 		.word	unpacked+400
 6607 02a4 00000000 		.word	idle_rxbuf
 6608 02a8 00000000 		.word	data_cb
 6609 02ac 00000000 		.word	requested_mode
 6610 02b0 80E100E0 		.word	-536813184
 6611              		.cfi_endproc
 6612              	.LFE30:
 6614              		.section	.text.bt_le_sync,"ax",%progbits
 6615              		.align	2
 6616              		.global	bt_le_sync
 6617              		.thumb
 6618              		.thumb_func
 6620              	bt_le_sync:
 6621              	.LFB31:
1701:bluetooth_rxtx.c **** 
1702:bluetooth_rxtx.c **** 
1703:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1704:bluetooth_rxtx.c **** {
 6622              		.loc 1 1704 0
 6623              		.cfi_startproc
 6624              		@ args = 0, pretend = 0, frame = 112
 6625              		@ frame_needed = 1, uses_anonymous_args = 0
 6626 0000 90B5     		push	{r4, r7, lr}
 6627              		.cfi_def_cfa_offset 12
 6628              		.cfi_offset 4, -12
 6629              		.cfi_offset 7, -8
 6630              		.cfi_offset 14, -4
 6631 0002 9DB0     		sub	sp, sp, #116
 6632              		.cfi_def_cfa_offset 128
 6633 0004 00AF     		add	r7, sp, #0
 6634              		.cfi_def_cfa_register 7
 6635 0006 0346     		mov	r3, r0
 6636 0008 FB71     		strb	r3, [r7, #7]
1705:bluetooth_rxtx.c **** 	int i;
1706:bluetooth_rxtx.c **** 	int8_t rssi;
1707:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1708:bluetooth_rxtx.c **** 
1709:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6637              		.loc 1 1709 0
 6638 000a 914B     		ldr	r3, .L377
 6639 000c 0122     		movs	r2, #1
 6640 000e 1A70     		strb	r2, [r3]
1710:bluetooth_rxtx.c **** 	mode = active_mode;
ARM GAS  /tmp/ccSuvgbr.s 			page 146


 6641              		.loc 1 1710 0
 6642 0010 904A     		ldr	r2, .L377+4
 6643 0012 FB79     		ldrb	r3, [r7, #7]
 6644 0014 1370     		strb	r3, [r2]
1711:bluetooth_rxtx.c **** 
1712:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 6645              		.loc 1 1712 0
 6646 0016 904B     		ldr	r3, .L377+8
 6647 0018 0122     		movs	r2, #1
 6648 001a 1A75     		strb	r2, [r3, #20]
1713:bluetooth_rxtx.c **** 
1714:bluetooth_rxtx.c **** 	// enable USB interrupts
1715:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6649              		.loc 1 1715 0
 6650 001c 8F4B     		ldr	r3, .L377+12
 6651 001e 4FF08072 		mov	r2, #16777216
 6652 0022 1A60     		str	r2, [r3]
1716:bluetooth_rxtx.c **** 
1717:bluetooth_rxtx.c **** 	RXLED_CLR;
 6653              		.loc 1 1717 0
 6654 0024 8E4B     		ldr	r3, .L377+16
 6655 0026 1022     		movs	r2, #16
 6656 0028 1A60     		str	r2, [r3]
1718:bluetooth_rxtx.c **** 
1719:bluetooth_rxtx.c **** 	queue_init();
 6657              		.loc 1 1719 0
 6658 002a FFF7FEFF 		bl	queue_init
1720:bluetooth_rxtx.c **** 	dio_ssp_init();
 6659              		.loc 1 1720 0
 6660 002e FFF7FEFF 		bl	dio_ssp_init
1721:bluetooth_rxtx.c **** 	dma_init_le();
 6661              		.loc 1 1721 0
 6662 0032 FFF7FEFF 		bl	dma_init_le
1722:bluetooth_rxtx.c **** 	dio_ssp_start();
 6663              		.loc 1 1722 0
 6664 0036 FFF7FEFF 		bl	dio_ssp_start
1723:bluetooth_rxtx.c **** 
1724:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 6665              		.loc 1 1724 0
 6666 003a 874B     		ldr	r3, .L377+8
 6667 003c 1B68     		ldr	r3, [r3]
 6668 003e 1846     		mov	r0, r3
 6669 0040 FFF7FEFF 		bl	rbit
 6670 0044 0346     		mov	r3, r0
 6671 0046 1846     		mov	r0, r3
 6672 0048 FFF7FEFF 		bl	cc2400_rx_sync
1725:bluetooth_rxtx.c **** 
1726:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6673              		.loc 1 1726 0
 6674 004c 63E2     		b	.L332
 6675              	.L376:
 6676              	.LBB13:
1727:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6677              		.loc 1 1727 0
 6678 004e 854B     		ldr	r3, .L377+20
 6679 0050 1B88     		ldrh	r3, [r3]	@ movhi
 6680 0052 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccSuvgbr.s 			page 147


 6681 0054 002B     		cmp	r3, #0
 6682 0056 29D0     		beq	.L333
1728:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6683              		.loc 1 1728 0
 6684 0058 6420     		movs	r0, #100
 6685 005a FFF7FEFF 		bl	cc2400_strobe
1729:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6686              		.loc 1 1729 0
 6687 005e 00BF     		nop
 6688              	.L334:
 6689              		.loc 1 1729 0 is_stmt 0 discriminator 1
 6690 0060 FFF7FEFF 		bl	cc2400_status
 6691 0064 0346     		mov	r3, r0
 6692 0066 03F00403 		and	r3, r3, #4
 6693 006a 002B     		cmp	r3, #0
 6694 006c F8D1     		bne	.L334
1730:bluetooth_rxtx.c **** 
1731:bluetooth_rxtx.c **** 			/* Retune */
1732:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6695              		.loc 1 1732 0 is_stmt 1
 6696 006e 7E4B     		ldr	r3, .L377+24
 6697 0070 1B88     		ldrh	r3, [r3]	@ movhi
 6698 0072 9BB2     		uxth	r3, r3
 6699 0074 013B     		subs	r3, r3, #1
 6700 0076 9BB2     		uxth	r3, r3
 6701 0078 0220     		movs	r0, #2
 6702 007a 1946     		mov	r1, r3
 6703 007c FFF7FEFF 		bl	cc2400_set
1733:bluetooth_rxtx.c **** 
1734:bluetooth_rxtx.c **** 			/* Wait for lock */
1735:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6704              		.loc 1 1735 0
 6705 0080 6120     		movs	r0, #97
 6706 0082 FFF7FEFF 		bl	cc2400_strobe
1736:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6707              		.loc 1 1736 0
 6708 0086 00BF     		nop
 6709              	.L335:
 6710              		.loc 1 1736 0 is_stmt 0 discriminator 1
 6711 0088 FFF7FEFF 		bl	cc2400_status
 6712 008c 0346     		mov	r3, r0
 6713 008e 03F00403 		and	r3, r3, #4
 6714 0092 002B     		cmp	r3, #0
 6715 0094 F8D0     		beq	.L335
1737:bluetooth_rxtx.c **** 
1738:bluetooth_rxtx.c **** 			/* RX mode */
1739:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6716              		.loc 1 1739 0 is_stmt 1
 6717 0096 6220     		movs	r0, #98
 6718 0098 FFF7FEFF 		bl	cc2400_strobe
1740:bluetooth_rxtx.c **** 
1741:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 6719              		.loc 1 1741 0
 6720 009c 714B     		ldr	r3, .L377+20
 6721 009e 1B88     		ldrh	r3, [r3]	@ movhi
 6722 00a0 9AB2     		uxth	r2, r3
 6723 00a2 724B     		ldr	r3, .L377+28
ARM GAS  /tmp/ccSuvgbr.s 			page 148


 6724 00a4 1A80     		strh	r2, [r3]	@ movhi
1742:bluetooth_rxtx.c **** 			requested_channel = 0;
 6725              		.loc 1 1742 0
 6726 00a6 6F4B     		ldr	r3, .L377+20
 6727 00a8 0022     		movs	r2, #0
 6728 00aa 1A80     		strh	r2, [r3]	@ movhi
 6729              	.L333:
1743:bluetooth_rxtx.c **** 		}
1744:bluetooth_rxtx.c **** 
1745:bluetooth_rxtx.c **** 		RXLED_CLR;
 6730              		.loc 1 1745 0
 6731 00ac 6C4B     		ldr	r3, .L377+16
 6732 00ae 1022     		movs	r2, #16
 6733 00b0 1A60     		str	r2, [r3]
1746:bluetooth_rxtx.c **** 
1747:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1748:bluetooth_rxtx.c **** 		rssi_reset();
 6734              		.loc 1 1748 0
 6735 00b2 FFF7FEFF 		bl	rssi_reset
1749:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 6736              		.loc 1 1749 0
 6737 00b6 00BF     		nop
 6738              	.L337:
 6739              		.loc 1 1749 0 is_stmt 0 discriminator 4
 6740 00b8 6D4B     		ldr	r3, .L377+32
 6741 00ba 1B68     		ldr	r3, [r3]
 6742 00bc 002B     		cmp	r3, #0
 6743 00be 0ED1     		bne	.L336
 6744              		.loc 1 1749 0 discriminator 1
 6745 00c0 6C4B     		ldr	r3, .L377+36
 6746 00c2 1B68     		ldr	r3, [r3]
 6747 00c4 002B     		cmp	r3, #0
 6748 00c6 0AD1     		bne	.L336
 6749              		.loc 1 1749 0 discriminator 2
 6750 00c8 6B4B     		ldr	r3, .L377+40
 6751 00ca 1B78     		ldrb	r3, [r3]
 6752 00cc DBB2     		uxtb	r3, r3
 6753 00ce 002B     		cmp	r3, #0
 6754 00d0 05D1     		bne	.L336
 6755              		.loc 1 1749 0 discriminator 3
 6756 00d2 6A4B     		ldr	r3, .L377+44
 6757 00d4 1B78     		ldrb	r3, [r3]
 6758 00d6 DBB2     		uxtb	r3, r3
 6759 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6760 00da 9A42     		cmp	r2, r3
 6761 00dc ECD0     		beq	.L337
 6762              	.L336:
1750:bluetooth_rxtx.c **** 			;
1751:bluetooth_rxtx.c **** 
1752:bluetooth_rxtx.c **** 		rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6763              		.loc 1 1752 0 is_stmt 1
 6764 00de 0620     		movs	r0, #6
 6765 00e0 FFF7FEFF 		bl	cc2400_get
 6766 00e4 0346     		mov	r3, r0
 6767 00e6 1B0A     		lsrs	r3, r3, #8
 6768 00e8 9BB2     		uxth	r3, r3
 6769 00ea 87F86730 		strb	r3, [r7, #103]
ARM GAS  /tmp/ccSuvgbr.s 			page 149


1753:bluetooth_rxtx.c **** 		rssi_min = rssi_max = rssi;
 6770              		.loc 1 1753 0
 6771 00ee 644A     		ldr	r2, .L377+48
 6772 00f0 97F86730 		ldrb	r3, [r7, #103]
 6773 00f4 1370     		strb	r3, [r2]
 6774 00f6 624B     		ldr	r3, .L377+48
 6775 00f8 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 6776 00fa 624B     		ldr	r3, .L377+52
 6777 00fc 1A70     		strb	r2, [r3]
1754:bluetooth_rxtx.c **** 
1755:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 6778              		.loc 1 1755 0
 6779 00fe 5F4B     		ldr	r3, .L377+44
 6780 0100 1B78     		ldrb	r3, [r3]
 6781 0102 DBB2     		uxtb	r3, r3
 6782 0104 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6783 0106 9A42     		cmp	r2, r3
 6784 0108 00D0     		beq	.L338
1756:bluetooth_rxtx.c **** 			goto cleanup;
 6785              		.loc 1 1756 0
 6786 010a 0BE2     		b	.L375
 6787              	.L338:
1757:bluetooth_rxtx.c **** 		}
1758:bluetooth_rxtx.c **** 
1759:bluetooth_rxtx.c **** 		if (rx_err) {
 6788              		.loc 1 1759 0
 6789 010c 594B     		ldr	r3, .L377+36
 6790 010e 1B68     		ldr	r3, [r3]
 6791 0110 002B     		cmp	r3, #0
 6792 0112 07D0     		beq	.L340
1760:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6793              		.loc 1 1760 0
 6794 0114 5C4B     		ldr	r3, .L377+56
 6795 0116 1B78     		ldrb	r3, [r3]
 6796 0118 DBB2     		uxtb	r3, r3
 6797 011a 43F00203 		orr	r3, r3, #2
 6798 011e DAB2     		uxtb	r2, r3
 6799 0120 594B     		ldr	r3, .L377+56
 6800 0122 1A70     		strb	r2, [r3]
 6801              	.L340:
1761:bluetooth_rxtx.c **** 		}
1762:bluetooth_rxtx.c **** 
1763:bluetooth_rxtx.c **** 		if (do_hop)
 6802              		.loc 1 1763 0
 6803 0124 544B     		ldr	r3, .L377+40
 6804 0126 1B78     		ldrb	r3, [r3]
 6805 0128 DBB2     		uxtb	r3, r3
 6806 012a 002B     		cmp	r3, #0
 6807 012c 00D0     		beq	.L341
1764:bluetooth_rxtx.c **** 			goto rx_flush;
 6808              		.loc 1 1764 0
 6809 012e 37E1     		b	.L342
 6810              	.L341:
1765:bluetooth_rxtx.c **** 
1766:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1767:bluetooth_rxtx.c **** 		if (!rx_tc)
 6811              		.loc 1 1767 0
ARM GAS  /tmp/ccSuvgbr.s 			page 150


 6812 0130 4F4B     		ldr	r3, .L377+32
 6813 0132 1B68     		ldr	r3, [r3]
 6814 0134 002B     		cmp	r3, #0
 6815 0136 00D1     		bne	.L343
 6816 0138 EDE1     		b	.L332
 6817              	.L343:
1768:bluetooth_rxtx.c **** 			continue;
1769:bluetooth_rxtx.c **** 
1770:bluetooth_rxtx.c **** 		/////////////////////
1771:bluetooth_rxtx.c **** 		// process the packet
1772:bluetooth_rxtx.c **** 
1773:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1774:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6818              		.loc 1 1774 0
 6819 013a 07F10C03 		add	r3, r7, #12
 6820 013e 3B66     		str	r3, [r7, #96]
1775:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 6821              		.loc 1 1775 0
 6822 0140 454B     		ldr	r3, .L377+8
 6823 0142 1B68     		ldr	r3, [r3]
 6824 0144 FB60     		str	r3, [r7, #12]
1776:bluetooth_rxtx.c **** 
1777:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 6825              		.loc 1 1777 0
 6826 0146 484B     		ldr	r3, .L377+24
 6827 0148 1B88     		ldrh	r3, [r3]	@ movhi
 6828 014a 9BB2     		uxth	r3, r3
 6829 014c DBB2     		uxtb	r3, r3
 6830 014e 623B     		subs	r3, r3, #98
 6831 0150 DBB2     		uxtb	r3, r3
 6832 0152 1846     		mov	r0, r3
 6833 0154 FFF7FEFF 		bl	btle_channel_index
 6834 0158 0346     		mov	r3, r0
 6835 015a 1A46     		mov	r2, r3
 6836 015c 1346     		mov	r3, r2
 6837 015e 5B00     		lsls	r3, r3, #1
 6838 0160 1344     		add	r3, r3, r2
 6839 0162 1B01     		lsls	r3, r3, #4
 6840 0164 494A     		ldr	r2, .L377+60
 6841 0166 1344     		add	r3, r3, r2
 6842 0168 FB65     		str	r3, [r7, #92]
1778:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 6843              		.loc 1 1778 0
 6844 016a 0023     		movs	r3, #0
 6845 016c FB66     		str	r3, [r7, #108]
 6846 016e 38E0     		b	.L344
 6847              	.L347:
 6848              	.LBB14:
1779:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6849              		.loc 1 1779 0 discriminator 3
 6850 0170 474A     		ldr	r2, .L377+64
 6851 0172 FB6E     		ldr	r3, [r7, #108]
 6852 0174 1344     		add	r3, r3, r2
 6853 0176 1B78     		ldrb	r3, [r3]
 6854 0178 DBB2     		uxtb	r3, r3
 6855 017a 1A06     		lsls	r2, r3, #24
1780:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
ARM GAS  /tmp/ccSuvgbr.s 			page 151


 6856              		.loc 1 1780 0 discriminator 3
 6857 017c FB6E     		ldr	r3, [r7, #108]
 6858 017e 0133     		adds	r3, r3, #1
 6859 0180 4349     		ldr	r1, .L377+64
 6860 0182 CB5C     		ldrb	r3, [r1, r3]
 6861 0184 DBB2     		uxtb	r3, r3
 6862 0186 1B04     		lsls	r3, r3, #16
 6863 0188 1A43     		orrs	r2, r2, r3
1781:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 6864              		.loc 1 1781 0 discriminator 3
 6865 018a FB6E     		ldr	r3, [r7, #108]
 6866 018c 0233     		adds	r3, r3, #2
 6867 018e 4049     		ldr	r1, .L377+64
 6868 0190 CB5C     		ldrb	r3, [r1, r3]
 6869 0192 DBB2     		uxtb	r3, r3
 6870 0194 1B02     		lsls	r3, r3, #8
 6871 0196 1343     		orrs	r3, r3, r2
1782:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 6872              		.loc 1 1782 0 discriminator 3
 6873 0198 FA6E     		ldr	r2, [r7, #108]
 6874 019a 0332     		adds	r2, r2, #3
 6875 019c 3C49     		ldr	r1, .L377+64
 6876 019e 8A5C     		ldrb	r2, [r1, r2]
 6877 01a0 D2B2     		uxtb	r2, r2
 6878 01a2 1343     		orrs	r3, r3, r2
1779:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6879              		.loc 1 1779 0 discriminator 3
 6880 01a4 BB65     		str	r3, [r7, #88]
1783:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 6881              		.loc 1 1783 0 discriminator 3
 6882 01a6 FB6E     		ldr	r3, [r7, #108]
 6883 01a8 002B     		cmp	r3, #0
 6884 01aa 00DA     		bge	.L345
 6885 01ac 0333     		adds	r3, r3, #3
 6886              	.L345:
 6887 01ae 9B10     		asrs	r3, r3, #2
 6888 01b0 5C1C     		adds	r4, r3, #1
 6889 01b2 B86D     		ldr	r0, [r7, #88]
 6890 01b4 FFF7FEFF 		bl	rbit
 6891 01b8 0146     		mov	r1, r0
 6892 01ba FB6E     		ldr	r3, [r7, #108]
 6893 01bc 002B     		cmp	r3, #0
 6894 01be 00DA     		bge	.L346
 6895 01c0 0333     		adds	r3, r3, #3
 6896              	.L346:
 6897 01c2 9B10     		asrs	r3, r3, #2
 6898 01c4 9B00     		lsls	r3, r3, #2
 6899 01c6 FA6D     		ldr	r2, [r7, #92]
 6900 01c8 1344     		add	r3, r3, r2
 6901 01ca 1B68     		ldr	r3, [r3]
 6902 01cc 81EA0302 		eor	r2, r1, r3
 6903 01d0 A300     		lsls	r3, r4, #2
 6904 01d2 07F17001 		add	r1, r7, #112
 6905 01d6 0B44     		add	r3, r3, r1
 6906 01d8 43F8642C 		str	r2, [r3, #-100]
 6907              	.LBE14:
1778:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
ARM GAS  /tmp/ccSuvgbr.s 			page 152


 6908              		.loc 1 1778 0 discriminator 3
 6909 01dc FB6E     		ldr	r3, [r7, #108]
 6910 01de 0433     		adds	r3, r3, #4
 6911 01e0 FB66     		str	r3, [r7, #108]
 6912              	.L344:
1778:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6913              		.loc 1 1778 0 is_stmt 0 discriminator 1
 6914 01e2 FB6E     		ldr	r3, [r7, #108]
 6915 01e4 032B     		cmp	r3, #3
 6916 01e6 C3DD     		ble	.L347
1784:bluetooth_rxtx.c **** 		}
1785:bluetooth_rxtx.c **** 
1786:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 6917              		.loc 1 1786 0 is_stmt 1
 6918 01e8 3B6E     		ldr	r3, [r7, #96]
 6919 01ea 0533     		adds	r3, r3, #5
 6920 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6921 01ee 03F03F03 		and	r3, r3, #63
 6922 01f2 0233     		adds	r3, r3, #2
 6923 01f4 7B65     		str	r3, [r7, #84]
1787:bluetooth_rxtx.c **** 		if (len > 39)
 6924              		.loc 1 1787 0
 6925 01f6 7B6D     		ldr	r3, [r7, #84]
 6926 01f8 272B     		cmp	r3, #39
 6927 01fa 00D9     		bls	.L348
1788:bluetooth_rxtx.c **** 			goto rx_flush;
 6928              		.loc 1 1788 0
 6929 01fc D0E0     		b	.L342
 6930              	.L348:
1789:bluetooth_rxtx.c **** 
1790:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1791:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1792:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 6931              		.loc 1 1792 0
 6932 01fe 7B6D     		ldr	r3, [r7, #84]
 6933 0200 0633     		adds	r3, r3, #6
 6934 0202 9B08     		lsrs	r3, r3, #2
 6935 0204 3B65     		str	r3, [r7, #80]
1793:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 6936              		.loc 1 1793 0
 6937 0206 3B6D     		ldr	r3, [r7, #80]
 6938 0208 0A2B     		cmp	r3, #10
 6939 020a 0DD8     		bhi	.L349
1794:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 6940              		.loc 1 1794 0
 6941 020c 00BF     		nop
 6942              	.L351:
 6943              		.loc 1 1794 0 is_stmt 0 discriminator 2
 6944 020e 214B     		ldr	r3, .L377+68
 6945 0210 1A68     		ldr	r2, [r3]
 6946 0212 3B6D     		ldr	r3, [r7, #80]
 6947 0214 9B00     		lsls	r3, r3, #2
 6948 0216 1E49     		ldr	r1, .L377+64
 6949 0218 0B44     		add	r3, r3, r1
 6950 021a 9A42     		cmp	r2, r3
 6951 021c 0FD2     		bcs	.L350
 6952              		.loc 1 1794 0 discriminator 1
ARM GAS  /tmp/ccSuvgbr.s 			page 153


 6953 021e 154B     		ldr	r3, .L377+36
 6954 0220 1B68     		ldr	r3, [r3]
 6955 0222 002B     		cmp	r3, #0
 6956 0224 F3D0     		beq	.L351
 6957 0226 0AE0     		b	.L350
 6958              	.L349:
1795:bluetooth_rxtx.c **** 				;
1796:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1797:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 6959              		.loc 1 1797 0 is_stmt 1
 6960 0228 00BF     		nop
 6961              	.L352:
 6962              		.loc 1 1797 0 is_stmt 0 discriminator 2
 6963 022a 1B4B     		ldr	r3, .L377+72
 6964 022c 1B68     		ldr	r3, [r3]
 6965 022e 03F00103 		and	r3, r3, #1
 6966 0232 002B     		cmp	r3, #0
 6967 0234 03D0     		beq	.L350
 6968              		.loc 1 1797 0 discriminator 1
 6969 0236 0F4B     		ldr	r3, .L377+36
 6970 0238 1B68     		ldr	r3, [r3]
 6971 023a 002B     		cmp	r3, #0
 6972 023c F5D0     		beq	.L352
 6973              	.L350:
1798:bluetooth_rxtx.c **** 				;
1799:bluetooth_rxtx.c **** 		}
1800:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 6974              		.loc 1 1800 0 is_stmt 1
 6975 023e 174A     		ldr	r2, .L377+76
 6976 0240 164B     		ldr	r3, .L377+76
 6977 0242 1B68     		ldr	r3, [r3]
 6978 0244 23F00103 		bic	r3, r3, #1
 6979 0248 1360     		str	r3, [r2]
1801:bluetooth_rxtx.c **** 
1802:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1803:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 6980              		.loc 1 1803 0
 6981 024a 0423     		movs	r3, #4
 6982 024c FB66     		str	r3, [r7, #108]
 6983 024e 60E0     		b	.L353
 6984              	.L378:
 6985              		.align	2
 6986              	.L377:
 6987 0250 00000000 		.word	modulation
 6988 0254 00000000 		.word	mode
 6989 0258 00000000 		.word	le
 6990 025c 00E100E0 		.word	-536813312
 6991 0260 3CC00920 		.word	537509948
 6992 0264 00000000 		.word	requested_channel
 6993 0268 00000000 		.word	channel
 6994 026c 00000000 		.word	saved_request
 6995 0270 00000000 		.word	rx_tc
 6996 0274 00000000 		.word	rx_err
 6997 0278 00000000 		.word	do_hop
 6998 027c 00000000 		.word	requested_mode
 6999 0280 00000000 		.word	rssi_max
 7000 0284 00000000 		.word	rssi_min
ARM GAS  /tmp/ccSuvgbr.s 			page 154


 7001 0288 00000000 		.word	status
 7002 028c FC000000 		.word	whitening_word
 7003 0290 00000000 		.word	rxbuf1
 7004 0294 04410050 		.word	1342193924
 7005 0298 10410050 		.word	1342193936
 7006 029c 24000340 		.word	1073938468
 7007              	.L356:
 7008              	.LBB15:
1804:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7009              		.loc 1 1804 0 discriminator 3
 7010 02a0 A74A     		ldr	r2, .L379
 7011 02a2 FB6E     		ldr	r3, [r7, #108]
 7012 02a4 1344     		add	r3, r3, r2
 7013 02a6 1B78     		ldrb	r3, [r3]
 7014 02a8 DBB2     		uxtb	r3, r3
 7015 02aa 1A06     		lsls	r2, r3, #24
1805:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7016              		.loc 1 1805 0 discriminator 3
 7017 02ac FB6E     		ldr	r3, [r7, #108]
 7018 02ae 0133     		adds	r3, r3, #1
 7019 02b0 A349     		ldr	r1, .L379
 7020 02b2 CB5C     		ldrb	r3, [r1, r3]
 7021 02b4 DBB2     		uxtb	r3, r3
 7022 02b6 1B04     		lsls	r3, r3, #16
 7023 02b8 1A43     		orrs	r2, r2, r3
1806:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 7024              		.loc 1 1806 0 discriminator 3
 7025 02ba FB6E     		ldr	r3, [r7, #108]
 7026 02bc 0233     		adds	r3, r3, #2
 7027 02be A049     		ldr	r1, .L379
 7028 02c0 CB5C     		ldrb	r3, [r1, r3]
 7029 02c2 DBB2     		uxtb	r3, r3
 7030 02c4 1B02     		lsls	r3, r3, #8
 7031 02c6 1343     		orrs	r3, r3, r2
1807:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7032              		.loc 1 1807 0 discriminator 3
 7033 02c8 FA6E     		ldr	r2, [r7, #108]
 7034 02ca 0332     		adds	r2, r2, #3
 7035 02cc 9C49     		ldr	r1, .L379
 7036 02ce 8A5C     		ldrb	r2, [r1, r2]
 7037 02d0 D2B2     		uxtb	r2, r2
 7038 02d2 1343     		orrs	r3, r3, r2
1804:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7039              		.loc 1 1804 0 discriminator 3
 7040 02d4 FB64     		str	r3, [r7, #76]
1808:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7041              		.loc 1 1808 0 discriminator 3
 7042 02d6 FB6E     		ldr	r3, [r7, #108]
 7043 02d8 002B     		cmp	r3, #0
 7044 02da 00DA     		bge	.L354
 7045 02dc 0333     		adds	r3, r3, #3
 7046              	.L354:
 7047 02de 9B10     		asrs	r3, r3, #2
 7048 02e0 5C1C     		adds	r4, r3, #1
 7049 02e2 F86C     		ldr	r0, [r7, #76]
 7050 02e4 FFF7FEFF 		bl	rbit
 7051 02e8 0146     		mov	r1, r0
ARM GAS  /tmp/ccSuvgbr.s 			page 155


 7052 02ea FB6E     		ldr	r3, [r7, #108]
 7053 02ec 002B     		cmp	r3, #0
 7054 02ee 00DA     		bge	.L355
 7055 02f0 0333     		adds	r3, r3, #3
 7056              	.L355:
 7057 02f2 9B10     		asrs	r3, r3, #2
 7058 02f4 9B00     		lsls	r3, r3, #2
 7059 02f6 FA6D     		ldr	r2, [r7, #92]
 7060 02f8 1344     		add	r3, r3, r2
 7061 02fa 1B68     		ldr	r3, [r3]
 7062 02fc 81EA0302 		eor	r2, r1, r3
 7063 0300 A300     		lsls	r3, r4, #2
 7064 0302 07F17001 		add	r1, r7, #112
 7065 0306 0B44     		add	r3, r3, r1
 7066 0308 43F8642C 		str	r2, [r3, #-100]
 7067              	.LBE15:
1803:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7068              		.loc 1 1803 0 discriminator 3
 7069 030c FB6E     		ldr	r3, [r7, #108]
 7070 030e 0433     		adds	r3, r3, #4
 7071 0310 FB66     		str	r3, [r7, #108]
 7072              	.L353:
1803:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7073              		.loc 1 1803 0 is_stmt 0 discriminator 1
 7074 0312 FB6E     		ldr	r3, [r7, #108]
 7075 0314 2B2B     		cmp	r3, #43
 7076 0316 C3DD     		ble	.L356
1809:bluetooth_rxtx.c **** 		}
1810:bluetooth_rxtx.c **** 
1811:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 7077              		.loc 1 1811 0 is_stmt 1
 7078 0318 8A4B     		ldr	r3, .L379+4
 7079 031a 1B69     		ldr	r3, [r3, #16]
 7080 031c 002B     		cmp	r3, #0
 7081 031e 23D0     		beq	.L357
 7082              	.LBB16:
1812:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7083              		.loc 1 1812 0
 7084 0320 884B     		ldr	r3, .L379+4
 7085 0322 D968     		ldr	r1, [r3, #12]
 7086 0324 3B6E     		ldr	r3, [r7, #96]
 7087 0326 1A1D     		adds	r2, r3, #4
 7088 0328 7B6D     		ldr	r3, [r7, #84]
 7089 032a 0846     		mov	r0, r1
 7090 032c 1146     		mov	r1, r2
 7091 032e 1A46     		mov	r2, r3
 7092 0330 FFF7FEFF 		bl	btle_crcgen_lut
 7093 0334 B864     		str	r0, [r7, #72]
1813:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7094              		.loc 1 1813 0
 7095 0336 7B6D     		ldr	r3, [r7, #84]
 7096 0338 0633     		adds	r3, r3, #6
 7097 033a 3A6E     		ldr	r2, [r7, #96]
 7098 033c 1344     		add	r3, r3, r2
 7099 033e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7100 0340 1A04     		lsls	r2, r3, #16
1814:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
ARM GAS  /tmp/ccSuvgbr.s 			page 156


 7101              		.loc 1 1814 0
 7102 0342 7B6D     		ldr	r3, [r7, #84]
 7103 0344 0533     		adds	r3, r3, #5
 7104 0346 396E     		ldr	r1, [r7, #96]
 7105 0348 0B44     		add	r3, r3, r1
 7106 034a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7107 034c 1B02     		lsls	r3, r3, #8
 7108 034e 1343     		orrs	r3, r3, r2
1815:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 7109              		.loc 1 1815 0
 7110 0350 7A6D     		ldr	r2, [r7, #84]
 7111 0352 0432     		adds	r2, r2, #4
 7112 0354 396E     		ldr	r1, [r7, #96]
 7113 0356 0A44     		add	r2, r2, r1
 7114 0358 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7115 035a 1343     		orrs	r3, r3, r2
1813:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7116              		.loc 1 1813 0
 7117 035c 7B64     		str	r3, [r7, #68]
1816:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 7118              		.loc 1 1816 0
 7119 035e BA6C     		ldr	r2, [r7, #72]
 7120 0360 7B6C     		ldr	r3, [r7, #68]
 7121 0362 9A42     		cmp	r2, r3
 7122 0364 00D0     		beq	.L357
1817:bluetooth_rxtx.c **** 				goto rx_flush;
 7123              		.loc 1 1817 0
 7124 0366 1BE0     		b	.L342
 7125              	.L357:
 7126              	.LBE16:
1818:bluetooth_rxtx.c **** 		}
1819:bluetooth_rxtx.c **** 
1820:bluetooth_rxtx.c **** 
1821:bluetooth_rxtx.c **** 		RXLED_SET;
 7127              		.loc 1 1821 0
 7128 0368 774B     		ldr	r3, .L379+8
 7129 036a 1022     		movs	r2, #16
 7130 036c 1A60     		str	r2, [r3]
1822:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 7131              		.loc 1 1822 0
 7132 036e 774B     		ldr	r3, .L379+12
 7133 0370 1B68     		ldr	r3, [r3]
 7134 0372 07F10C02 		add	r2, r7, #12
 7135 0376 1046     		mov	r0, r2
 7136 0378 9847     		blx	r3
1823:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 7137              		.loc 1 1823 0
 7138 037a 07F10C03 		add	r3, r7, #12
 7139 037e 0120     		movs	r0, #1
 7140 0380 1946     		mov	r1, r3
 7141 0382 FFF7FEFF 		bl	enqueue
1824:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 7142              		.loc 1 1824 0
 7143 0386 724B     		ldr	r3, .L379+16
 7144 0388 1B68     		ldr	r3, [r3]
 7145 038a C3F31303 		ubfx	r3, r3, #0, #20
 7146 038e 40F63542 		movw	r2, #3125
ARM GAS  /tmp/ccSuvgbr.s 			page 157


 7147 0392 02FB03F2 		mul	r2, r2, r3
 7148 0396 6F4B     		ldr	r3, .L379+20
 7149 0398 1B68     		ldr	r3, [r3]
 7150 039a 1344     		add	r3, r3, r2
 7151 039c 694A     		ldr	r2, .L379+4
 7152 039e 1364     		str	r3, [r2, #64]
 7153              	.L342:
1825:bluetooth_rxtx.c **** 
1826:bluetooth_rxtx.c **** 	rx_flush:
1827:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 7154              		.loc 1 1827 0
 7155 03a0 6120     		movs	r0, #97
 7156 03a2 FFF7FEFF 		bl	cc2400_strobe
1828:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 7157              		.loc 1 1828 0
 7158 03a6 00BF     		nop
 7159              	.L358:
 7160              		.loc 1 1828 0 is_stmt 0 discriminator 1
 7161 03a8 FFF7FEFF 		bl	cc2400_status
 7162 03ac 0346     		mov	r3, r0
 7163 03ae 03F00403 		and	r3, r3, #4
 7164 03b2 002B     		cmp	r3, #0
 7165 03b4 F8D0     		beq	.L358
1829:bluetooth_rxtx.c **** 
1830:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
1831:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7166              		.loc 1 1831 0 is_stmt 1
 7167 03b6 684A     		ldr	r2, .L379+24
 7168 03b8 674B     		ldr	r3, .L379+24
 7169 03ba 1B68     		ldr	r3, [r3]
 7170 03bc 23F00103 		bic	r3, r3, #1
 7171 03c0 1360     		str	r3, [r2]
1832:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7172              		.loc 1 1832 0
 7173 03c2 03E0     		b	.L359
 7174              	.L360:
 7175              	.LBB17:
1833:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 7176              		.loc 1 1833 0
 7177 03c4 654B     		ldr	r3, .L379+28
 7178 03c6 1B68     		ldr	r3, [r3]
 7179 03c8 87F84330 		strb	r3, [r7, #67]
 7180              	.L359:
 7181              	.LBE17:
1832:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7182              		.loc 1 1832 0
 7183 03cc 644B     		ldr	r3, .L379+32
 7184 03ce 1B68     		ldr	r3, [r3]
 7185 03d0 03F00403 		and	r3, r3, #4
 7186 03d4 002B     		cmp	r3, #0
 7187 03d6 F5D1     		bne	.L360
1834:bluetooth_rxtx.c **** 		}
1835:bluetooth_rxtx.c **** 
1836:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
1837:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 7188              		.loc 1 1837 0
 7189 03d8 5D4B     		ldr	r3, .L379+16
ARM GAS  /tmp/ccSuvgbr.s 			page 158


 7190 03da 1B68     		ldr	r3, [r3]
 7191 03dc C3F31303 		ubfx	r3, r3, #0, #20
 7192 03e0 40F63542 		movw	r2, #3125
 7193 03e4 02FB03F2 		mul	r2, r2, r3
 7194 03e8 5A4B     		ldr	r3, .L379+20
 7195 03ea 1B68     		ldr	r3, [r3]
 7196 03ec 1344     		add	r3, r3, r2
 7197 03ee BB66     		str	r3, [r7, #104]
1838:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 7198              		.loc 1 1838 0
 7199 03f0 544B     		ldr	r3, .L379+4
 7200 03f2 1A6C     		ldr	r2, [r3, #64]
 7201 03f4 BB6E     		ldr	r3, [r7, #104]
 7202 03f6 9A42     		cmp	r2, r3
 7203 03f8 05D9     		bls	.L361
1839:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 7204              		.loc 1 1839 0
 7205 03fa BB6E     		ldr	r3, [r7, #104]
 7206 03fc 03F14343 		add	r3, r3, #-1023410176
 7207 0400 03F5A003 		add	r3, r3, #5242880
 7208 0404 BB66     		str	r3, [r7, #104]
 7209              	.L361:
1840:bluetooth_rxtx.c **** 		if  ( // timeout
1841:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 7210              		.loc 1 1841 0
 7211 0406 4F4B     		ldr	r3, .L379+4
 7212 0408 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
1840:bluetooth_rxtx.c **** 		if  ( // timeout
 7213              		.loc 1 1840 0
 7214 040a 032B     		cmp	r3, #3
 7215 040c 03D0     		beq	.L362
 7216              		.loc 1 1841 0
 7217 040e 4D4B     		ldr	r3, .L379+4
 7218 0410 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7219 0412 022B     		cmp	r3, #2
 7220 0414 06D1     		bne	.L363
 7221              	.L362:
1842:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 7222              		.loc 1 1842 0
 7223 0416 4B4B     		ldr	r3, .L379+4
 7224 0418 1B6C     		ldr	r3, [r3, #64]
 7225 041a BA6E     		ldr	r2, [r7, #104]
 7226 041c D31A     		subs	r3, r2, r3
 7227 041e 514A     		ldr	r2, .L379+36
 7228 0420 9342     		cmp	r3, r2
 7229 0422 03D8     		bhi	.L364
 7230              	.L363:
1843:bluetooth_rxtx.c **** 			// jam finished
1844:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 7231              		.loc 1 1844 0
 7232 0424 504B     		ldr	r3, .L379+40
 7233 0426 1B68     		ldr	r3, [r3]
 7234 0428 012B     		cmp	r3, #1
 7235 042a 37D1     		bne	.L365
 7236              	.L364:
1845:bluetooth_rxtx.c **** 			)
1846:bluetooth_rxtx.c **** 		{
ARM GAS  /tmp/ccSuvgbr.s 			page 159


1847:bluetooth_rxtx.c **** 			reset_le();
 7237              		.loc 1 1847 0
 7238 042c FFF7FEFF 		bl	reset_le
1848:bluetooth_rxtx.c **** 			le_jam_count = 0;
 7239              		.loc 1 1848 0
 7240 0430 4D4B     		ldr	r3, .L379+40
 7241 0432 0022     		movs	r2, #0
 7242 0434 1A60     		str	r2, [r3]
1849:bluetooth_rxtx.c **** 			TXLED_CLR;
 7243              		.loc 1 1849 0
 7244 0436 4D4B     		ldr	r3, .L379+44
 7245 0438 4FF48072 		mov	r2, #256
 7246 043c 1A60     		str	r2, [r3]
1850:bluetooth_rxtx.c **** 
1851:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 7247              		.loc 1 1851 0
 7248 043e 4C4B     		ldr	r3, .L379+48
 7249 0440 1B78     		ldrb	r3, [r3]
 7250 0442 DBB2     		uxtb	r3, r3
 7251 0444 012B     		cmp	r3, #1
 7252 0446 06D1     		bne	.L366
1852:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 7253              		.loc 1 1852 0
 7254 0448 494B     		ldr	r3, .L379+48
 7255 044a 0022     		movs	r2, #0
 7256 044c 1A70     		strb	r2, [r3]
1853:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 7257              		.loc 1 1853 0
 7258 044e 494B     		ldr	r3, .L379+52
 7259 0450 0022     		movs	r2, #0
 7260 0452 1A70     		strb	r2, [r3]
1854:bluetooth_rxtx.c **** 				goto cleanup;
 7261              		.loc 1 1854 0
 7262 0454 66E0     		b	.L375
 7263              	.L366:
1855:bluetooth_rxtx.c **** 			}
1856:bluetooth_rxtx.c **** 
1857:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
1858:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 7264              		.loc 1 1858 0
 7265 0456 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7266 0458 0A2B     		cmp	r3, #10
 7267 045a 01D1     		bne	.L367
1859:bluetooth_rxtx.c **** 				goto cleanup;
 7268              		.loc 1 1859 0
 7269 045c 00BF     		nop
 7270 045e 61E0     		b	.L375
 7271              	.L367:
1860:bluetooth_rxtx.c **** 
1861:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 7272              		.loc 1 1861 0
 7273 0460 384B     		ldr	r3, .L379+4
 7274 0462 0122     		movs	r2, #1
 7275 0464 1A75     		strb	r2, [r3, #20]
1862:bluetooth_rxtx.c **** 
1863:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7276              		.loc 1 1863 0
ARM GAS  /tmp/ccSuvgbr.s 			page 160


 7277 0466 6420     		movs	r0, #100
 7278 0468 FFF7FEFF 		bl	cc2400_strobe
1864:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7279              		.loc 1 1864 0
 7280 046c 00BF     		nop
 7281              	.L368:
 7282              		.loc 1 1864 0 is_stmt 0 discriminator 1
 7283 046e FFF7FEFF 		bl	cc2400_status
 7284 0472 0346     		mov	r3, r0
 7285 0474 03F00403 		and	r3, r3, #4
 7286 0478 002B     		cmp	r3, #0
 7287 047a F8D1     		bne	.L368
1865:bluetooth_rxtx.c **** 
1866:bluetooth_rxtx.c **** 			/* Retune */
1867:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 7288              		.loc 1 1867 0 is_stmt 1
 7289 047c 3E4B     		ldr	r3, .L379+56
 7290 047e 1B88     		ldrh	r3, [r3]	@ movhi
 7291 0480 9BB2     		uxth	r3, r3
 7292 0482 002B     		cmp	r3, #0
 7293 0484 03D0     		beq	.L369
 7294              		.loc 1 1867 0 is_stmt 0 discriminator 1
 7295 0486 3C4B     		ldr	r3, .L379+56
 7296 0488 1B88     		ldrh	r3, [r3]	@ movhi
 7297 048a 9BB2     		uxth	r3, r3
 7298 048c 01E0     		b	.L370
 7299              	.L369:
 7300              		.loc 1 1867 0 discriminator 2
 7301 048e 40F66213 		movw	r3, #2402
 7302              	.L370:
 7303              		.loc 1 1867 0 discriminator 4
 7304 0492 3A4A     		ldr	r2, .L379+60
 7305 0494 1380     		strh	r3, [r2]	@ movhi
1868:bluetooth_rxtx.c **** 			restart_jamming = 1;
 7306              		.loc 1 1868 0 is_stmt 1 discriminator 4
 7307 0496 3A4B     		ldr	r3, .L379+64
 7308 0498 0122     		movs	r2, #1
 7309 049a 1A60     		str	r2, [r3]
 7310              	.L365:
1869:bluetooth_rxtx.c **** 		}
1870:bluetooth_rxtx.c **** 
1871:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 7311              		.loc 1 1871 0
 7312 049c 294B     		ldr	r3, .L379+4
 7313 049e DB88     		ldrh	r3, [r3, #6]
 7314 04a0 2C20     		movs	r0, #44
 7315 04a2 1946     		mov	r1, r3
 7316 04a4 FFF7FEFF 		bl	cc2400_set
1872:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 7317              		.loc 1 1872 0
 7318 04a8 264B     		ldr	r3, .L379+4
 7319 04aa 9B88     		ldrh	r3, [r3, #4]
 7320 04ac 2D20     		movs	r0, #45
 7321 04ae 1946     		mov	r1, r3
 7322 04b0 FFF7FEFF 		bl	cc2400_set
1873:bluetooth_rxtx.c **** 
1874:bluetooth_rxtx.c **** 		if (do_hop)
ARM GAS  /tmp/ccSuvgbr.s 			page 161


 7323              		.loc 1 1874 0
 7324 04b4 334B     		ldr	r3, .L379+68
 7325 04b6 1B78     		ldrb	r3, [r3]
 7326 04b8 DBB2     		uxtb	r3, r3
 7327 04ba 002B     		cmp	r3, #0
 7328 04bc 01D0     		beq	.L371
1875:bluetooth_rxtx.c **** 			hop();
 7329              		.loc 1 1875 0
 7330 04be FFF7FEFF 		bl	hop
 7331              	.L371:
1876:bluetooth_rxtx.c **** 
1877:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
1878:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 7332              		.loc 1 1878 0
 7333 04c2 294B     		ldr	r3, .L379+40
 7334 04c4 1B68     		ldr	r3, [r3]
 7335 04c6 002B     		cmp	r3, #0
 7336 04c8 07DD     		ble	.L372
1879:bluetooth_rxtx.c **** 			le_jam();
 7337              		.loc 1 1879 0
 7338 04ca FFF7FEFF 		bl	le_jam
1880:bluetooth_rxtx.c **** 			--le_jam_count;
 7339              		.loc 1 1880 0
 7340 04ce 264B     		ldr	r3, .L379+40
 7341 04d0 1B68     		ldr	r3, [r3]
 7342 04d2 013B     		subs	r3, r3, #1
 7343 04d4 244A     		ldr	r2, .L379+40
 7344 04d6 1360     		str	r3, [r2]
 7345 04d8 17E0     		b	.L373
 7346              	.L372:
1881:bluetooth_rxtx.c **** 		} else {
1882:bluetooth_rxtx.c **** 			/* RX mode */
1883:bluetooth_rxtx.c **** 			dma_init_le();
 7347              		.loc 1 1883 0
 7348 04da FFF7FEFF 		bl	dma_init_le
1884:bluetooth_rxtx.c **** 			dio_ssp_start();
 7349              		.loc 1 1884 0
 7350 04de FFF7FEFF 		bl	dio_ssp_start
1885:bluetooth_rxtx.c **** 
1886:bluetooth_rxtx.c **** 			if (restart_jamming) {
 7351              		.loc 1 1886 0
 7352 04e2 274B     		ldr	r3, .L379+64
 7353 04e4 1B68     		ldr	r3, [r3]
 7354 04e6 002B     		cmp	r3, #0
 7355 04e8 0CD0     		beq	.L374
1887:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 7356              		.loc 1 1887 0
 7357 04ea 164B     		ldr	r3, .L379+4
 7358 04ec 1B68     		ldr	r3, [r3]
 7359 04ee 1846     		mov	r0, r3
 7360 04f0 FFF7FEFF 		bl	rbit
 7361 04f4 0346     		mov	r3, r0
 7362 04f6 1846     		mov	r0, r3
 7363 04f8 FFF7FEFF 		bl	cc2400_rx_sync
1888:bluetooth_rxtx.c **** 				restart_jamming = 0;
 7364              		.loc 1 1888 0
 7365 04fc 204B     		ldr	r3, .L379+64
ARM GAS  /tmp/ccSuvgbr.s 			page 162


 7366 04fe 0022     		movs	r2, #0
 7367 0500 1A60     		str	r2, [r3]
 7368 0502 02E0     		b	.L373
 7369              	.L374:
1889:bluetooth_rxtx.c **** 			} else {
1890:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 7370              		.loc 1 1890 0
 7371 0504 6220     		movs	r0, #98
 7372 0506 FFF7FEFF 		bl	cc2400_strobe
 7373              	.L373:
1891:bluetooth_rxtx.c **** 			}
1892:bluetooth_rxtx.c **** 		}
1893:bluetooth_rxtx.c **** 
1894:bluetooth_rxtx.c **** 		rx_tc = 0;
 7374              		.loc 1 1894 0
 7375 050a 1F4B     		ldr	r3, .L379+72
 7376 050c 0022     		movs	r2, #0
 7377 050e 1A60     		str	r2, [r3]
1895:bluetooth_rxtx.c **** 		rx_err = 0;
 7378              		.loc 1 1895 0
 7379 0510 1E4B     		ldr	r3, .L379+76
 7380 0512 0022     		movs	r2, #0
 7381 0514 1A60     		str	r2, [r3]
 7382              	.L332:
 7383              	.LBE13:
1726:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7384              		.loc 1 1726 0
 7385 0516 174B     		ldr	r3, .L379+52
 7386 0518 1B78     		ldrb	r3, [r3]
 7387 051a DBB2     		uxtb	r3, r3
 7388 051c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7389 051e 9A42     		cmp	r2, r3
 7390 0520 3FF495AD 		beq	.L376
 7391              	.L375:
1896:bluetooth_rxtx.c **** 	}
1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** cleanup:
1899:bluetooth_rxtx.c **** 
1900:bluetooth_rxtx.c **** 	// disable USB interrupts
1901:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7392              		.loc 1 1901 0
 7393 0524 1A4B     		ldr	r3, .L379+80
 7394 0526 4FF08072 		mov	r2, #16777216
 7395 052a 1A60     		str	r2, [r3]
1902:bluetooth_rxtx.c **** 
1903:bluetooth_rxtx.c **** 	// reset the radio completely
1904:bluetooth_rxtx.c **** 	cc2400_idle();
 7396              		.loc 1 1904 0
 7397 052c FFF7FEFF 		bl	cc2400_idle
1905:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7398              		.loc 1 1905 0
 7399 0530 FFF7FEFF 		bl	dio_ssp_stop
1906:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7400              		.loc 1 1906 0
 7401 0534 FFF7FEFF 		bl	cs_trigger_disable
1907:bluetooth_rxtx.c **** }
 7402              		.loc 1 1907 0
ARM GAS  /tmp/ccSuvgbr.s 			page 163


 7403 0538 7437     		adds	r7, r7, #116
 7404              		.cfi_def_cfa_offset 12
 7405 053a BD46     		mov	sp, r7
 7406              		.cfi_def_cfa_register 13
 7407              		@ sp needed
 7408 053c 90BD     		pop	{r4, r7, pc}
 7409              	.L380:
 7410 053e 00BF     		.align	2
 7411              	.L379:
 7412 0540 00000000 		.word	rxbuf1
 7413 0544 00000000 		.word	le
 7414 0548 38C00920 		.word	537509944
 7415 054c 00000000 		.word	packet_cb
 7416 0550 00000000 		.word	clkn
 7417 0554 08400040 		.word	1073758216
 7418 0558 24000340 		.word	1073938468
 7419 055c 08000340 		.word	1073938440
 7420 0560 0C000340 		.word	1073938444
 7421 0564 80F0FA02 		.word	50000000
 7422 0568 00000000 		.word	le_jam_count
 7423 056c 3CC00920 		.word	537509948
 7424 0570 00000000 		.word	jam_mode
 7425 0574 00000000 		.word	requested_mode
 7426 0578 00000000 		.word	saved_request
 7427 057c 00000000 		.word	channel
 7428 0580 DC000000 		.word	restart_jamming.4692
 7429 0584 00000000 		.word	do_hop
 7430 0588 00000000 		.word	rx_tc
 7431 058c 00000000 		.word	rx_err
 7432 0590 80E100E0 		.word	-536813184
 7433              		.cfi_endproc
 7434              	.LFE31:
 7436              		.section	.text.cb_follow_le,"ax",%progbits
 7437              		.align	2
 7438              		.global	cb_follow_le
 7439              		.thumb
 7440              		.thumb_func
 7442              	cb_follow_le:
 7443              	.LFB32:
1908:bluetooth_rxtx.c **** 
1909:bluetooth_rxtx.c **** 
1910:bluetooth_rxtx.c **** 
1911:bluetooth_rxtx.c **** /* low energy connection following
1912:bluetooth_rxtx.c ****  * follows a known AA around */
1913:bluetooth_rxtx.c **** int cb_follow_le() {
 7444              		.loc 1 1913 0
 7445              		.cfi_startproc
 7446              		@ args = 0, pretend = 0, frame = 48
 7447              		@ frame_needed = 1, uses_anonymous_args = 0
 7448 0000 80B5     		push	{r7, lr}
 7449              		.cfi_def_cfa_offset 8
 7450              		.cfi_offset 7, -8
 7451              		.cfi_offset 14, -4
 7452 0002 8CB0     		sub	sp, sp, #48
 7453              		.cfi_def_cfa_offset 56
 7454 0004 00AF     		add	r7, sp, #0
 7455              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccSuvgbr.s 			page 164


1914:bluetooth_rxtx.c **** 	int i, j, k;
1915:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 7456              		.loc 1 1915 0
 7457 0006 6E4B     		ldr	r3, .L397
 7458 0008 1B88     		ldrh	r3, [r3]	@ movhi
 7459 000a 9BB2     		uxth	r3, r3
 7460 000c DBB2     		uxtb	r3, r3
 7461 000e 623B     		subs	r3, r3, #98
 7462 0010 DBB2     		uxtb	r3, r3
 7463 0012 1846     		mov	r0, r3
 7464 0014 FFF7FEFF 		bl	btle_channel_index
 7465 0018 0346     		mov	r3, r0
 7466 001a 1A46     		mov	r2, r3
 7467 001c 694B     		ldr	r3, .L397+4
 7468 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7469 0020 3B62     		str	r3, [r7, #32]
1916:bluetooth_rxtx.c **** 
1917:bluetooth_rxtx.c **** 	u32 access_address = 0;
 7470              		.loc 1 1917 0
 7471 0022 0023     		movs	r3, #0
 7472 0024 FB61     		str	r3, [r7, #28]
1918:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7473              		.loc 1 1918 0
 7474 0026 0023     		movs	r3, #0
 7475 0028 FB62     		str	r3, [r7, #44]
 7476 002a 0EE0     		b	.L382
 7477              	.L383:
1919:bluetooth_rxtx.c **** 		access_address >>= 1;
 7478              		.loc 1 1919 0 discriminator 3
 7479 002c FB69     		ldr	r3, [r7, #28]
 7480 002e 5B08     		lsrs	r3, r3, #1
 7481 0030 FB61     		str	r3, [r7, #28]
1920:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7482              		.loc 1 1920 0 discriminator 3
 7483 0032 654A     		ldr	r2, .L397+8
 7484 0034 FB6A     		ldr	r3, [r7, #44]
 7485 0036 1344     		add	r3, r3, r2
 7486 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7487 003a DB07     		lsls	r3, r3, #31
 7488 003c 1A46     		mov	r2, r3
 7489 003e FB69     		ldr	r3, [r7, #28]
 7490 0040 1343     		orrs	r3, r3, r2
 7491 0042 FB61     		str	r3, [r7, #28]
1918:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7492              		.loc 1 1918 0 discriminator 3
 7493 0044 FB6A     		ldr	r3, [r7, #44]
 7494 0046 0133     		adds	r3, r3, #1
 7495 0048 FB62     		str	r3, [r7, #44]
 7496              	.L382:
1918:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7497              		.loc 1 1918 0 is_stmt 0 discriminator 1
 7498 004a FB6A     		ldr	r3, [r7, #44]
 7499 004c 1E2B     		cmp	r3, #30
 7500 004e EDDD     		ble	.L383
1921:bluetooth_rxtx.c **** 	}
1922:bluetooth_rxtx.c **** 
1923:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
ARM GAS  /tmp/ccSuvgbr.s 			page 165


 7501              		.loc 1 1923 0 is_stmt 1
 7502 0050 1F23     		movs	r3, #31
 7503 0052 FB62     		str	r3, [r7, #44]
 7504 0054 AAE0     		b	.L384
 7505              	.L395:
1924:bluetooth_rxtx.c **** 		access_address >>= 1;
 7506              		.loc 1 1924 0
 7507 0056 FB69     		ldr	r3, [r7, #28]
 7508 0058 5B08     		lsrs	r3, r3, #1
 7509 005a FB61     		str	r3, [r7, #28]
1925:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7510              		.loc 1 1925 0
 7511 005c 5A4A     		ldr	r2, .L397+8
 7512 005e FB6A     		ldr	r3, [r7, #44]
 7513 0060 1344     		add	r3, r3, r2
 7514 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7515 0064 DB07     		lsls	r3, r3, #31
 7516 0066 1A46     		mov	r2, r3
 7517 0068 FB69     		ldr	r3, [r7, #28]
 7518 006a 1343     		orrs	r3, r3, r2
 7519 006c FB61     		str	r3, [r7, #28]
1926:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 7520              		.loc 1 1926 0
 7521 006e 574B     		ldr	r3, .L397+12
 7522 0070 1A68     		ldr	r2, [r3]
 7523 0072 FB69     		ldr	r3, [r7, #28]
 7524 0074 9A42     		cmp	r2, r3
 7525 0076 40F09680 		bne	.L385
1927:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 7526              		.loc 1 1927 0
 7527 007a 0023     		movs	r3, #0
 7528 007c BB62     		str	r3, [r7, #40]
 7529 007e 48E0     		b	.L386
 7530              	.L392:
 7531              	.LBB18:
1928:bluetooth_rxtx.c **** 				u8 byte = 0;
 7532              		.loc 1 1928 0
 7533 0080 0023     		movs	r3, #0
 7534 0082 FB76     		strb	r3, [r7, #27]
1929:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 7535              		.loc 1 1929 0
 7536 0084 0023     		movs	r3, #0
 7537 0086 7B62     		str	r3, [r7, #36]
 7538 0088 37E0     		b	.L387
 7539              	.L391:
 7540              	.LBB19:
1930:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7541              		.loc 1 1930 0
 7542 008a BB6A     		ldr	r3, [r7, #40]
 7543 008c DA00     		lsls	r2, r3, #3
 7544 008e 7B6A     		ldr	r3, [r7, #36]
 7545 0090 1A44     		add	r2, r2, r3
 7546 0092 FB6A     		ldr	r3, [r7, #44]
 7547 0094 1344     		add	r3, r3, r2
 7548 0096 1F3B     		subs	r3, r3, #31
 7549 0098 3B61     		str	r3, [r7, #16]
1931:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
ARM GAS  /tmp/ccSuvgbr.s 			page 166


 7550              		.loc 1 1931 0
 7551 009a 3B69     		ldr	r3, [r7, #16]
 7552 009c B3F5487F 		cmp	r3, #800
 7553 00a0 00DB     		blt	.L388
 7554 00a2 2DE0     		b	.L389
 7555              	.L388:
1932:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 7556              		.loc 1 1932 0
 7557 00a4 484A     		ldr	r2, .L397+8
 7558 00a6 3B69     		ldr	r3, [r7, #16]
 7559 00a8 1344     		add	r3, r3, r2
 7560 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7561 00ac 7B61     		str	r3, [r7, #20]
1933:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 7562              		.loc 1 1933 0
 7563 00ae BB6A     		ldr	r3, [r7, #40]
 7564 00b0 032B     		cmp	r3, #3
 7565 00b2 16DD     		ble	.L390
1934:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 7566              		.loc 1 1934 0
 7567 00b4 464A     		ldr	r2, .L397+16
 7568 00b6 3B6A     		ldr	r3, [r7, #32]
 7569 00b8 1344     		add	r3, r3, r2
 7570 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7571 00bc 1A46     		mov	r2, r3
 7572 00be 7B69     		ldr	r3, [r7, #20]
 7573 00c0 5340     		eors	r3, r3, r2
 7574 00c2 7B61     		str	r3, [r7, #20]
1935:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 7575              		.loc 1 1935 0
 7576 00c4 3B6A     		ldr	r3, [r7, #32]
 7577 00c6 0133     		adds	r3, r3, #1
 7578 00c8 1946     		mov	r1, r3
 7579 00ca 424B     		ldr	r3, .L397+20
 7580 00cc A1FB0323 		umull	r2, r3, r1, r3
 7581 00d0 C81A     		subs	r0, r1, r3
 7582 00d2 4008     		lsrs	r0, r0, #1
 7583 00d4 0344     		add	r3, r3, r0
 7584 00d6 9A09     		lsrs	r2, r3, #6
 7585 00d8 1346     		mov	r3, r2
 7586 00da DB01     		lsls	r3, r3, #7
 7587 00dc 9B1A     		subs	r3, r3, r2
 7588 00de CA1A     		subs	r2, r1, r3
 7589 00e0 3A62     		str	r2, [r7, #32]
 7590              	.L390:
1936:bluetooth_rxtx.c **** 					}
1937:bluetooth_rxtx.c **** 					byte |= bit << k;
 7591              		.loc 1 1937 0 discriminator 2
 7592 00e2 7A69     		ldr	r2, [r7, #20]
 7593 00e4 7B6A     		ldr	r3, [r7, #36]
 7594 00e6 02FA03F3 		lsl	r3, r2, r3
 7595 00ea DAB2     		uxtb	r2, r3
 7596 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 7597 00ee 1343     		orrs	r3, r3, r2
 7598 00f0 DBB2     		uxtb	r3, r3
 7599 00f2 FB76     		strb	r3, [r7, #27]
 7600              	.LBE19:
ARM GAS  /tmp/ccSuvgbr.s 			page 167


1929:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7601              		.loc 1 1929 0 discriminator 2
 7602 00f4 7B6A     		ldr	r3, [r7, #36]
 7603 00f6 0133     		adds	r3, r3, #1
 7604 00f8 7B62     		str	r3, [r7, #36]
 7605              	.L387:
1929:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7606              		.loc 1 1929 0 is_stmt 0 discriminator 1
 7607 00fa 7B6A     		ldr	r3, [r7, #36]
 7608 00fc 072B     		cmp	r3, #7
 7609 00fe C4DD     		ble	.L391
 7610              	.L389:
1938:bluetooth_rxtx.c **** 				}
1939:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 7611              		.loc 1 1939 0 is_stmt 1 discriminator 2
 7612 0100 354B     		ldr	r3, .L397+24
 7613 0102 1A68     		ldr	r2, [r3]
 7614 0104 BB6A     		ldr	r3, [r7, #40]
 7615 0106 1344     		add	r3, r3, r2
 7616 0108 FA7E     		ldrb	r2, [r7, #27]
 7617 010a 1A70     		strb	r2, [r3]
 7618              	.LBE18:
1927:bluetooth_rxtx.c **** 				u8 byte = 0;
 7619              		.loc 1 1927 0 discriminator 2
 7620 010c BB6A     		ldr	r3, [r7, #40]
 7621 010e 0133     		adds	r3, r3, #1
 7622 0110 BB62     		str	r3, [r7, #40]
 7623              	.L386:
1927:bluetooth_rxtx.c **** 				u8 byte = 0;
 7624              		.loc 1 1927 0 is_stmt 0 discriminator 1
 7625 0112 BB6A     		ldr	r3, [r7, #40]
 7626 0114 2D2B     		cmp	r3, #45
 7627 0116 B3DD     		ble	.L392
1940:bluetooth_rxtx.c **** 			}
1941:bluetooth_rxtx.c **** 
1942:bluetooth_rxtx.c **** 			// verify CRC
1943:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 7628              		.loc 1 1943 0 is_stmt 1
 7629 0118 2C4B     		ldr	r3, .L397+12
 7630 011a 1B69     		ldr	r3, [r3, #16]
 7631 011c 002B     		cmp	r3, #0
 7632 011e 32D0     		beq	.L393
 7633              	.LBB20:
1944:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 7634              		.loc 1 1944 0
 7635 0120 2D4B     		ldr	r3, .L397+24
 7636 0122 1B68     		ldr	r3, [r3]
 7637 0124 0533     		adds	r3, r3, #5
 7638 0126 1B78     		ldrb	r3, [r3]
 7639 0128 DBB2     		uxtb	r3, r3
 7640 012a 03F03F03 		and	r3, r3, #63
 7641 012e 0233     		adds	r3, r3, #2
 7642 0130 FB60     		str	r3, [r7, #12]
1945:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, (uint8_t*)idle_rxbuf + 4, len);
 7643              		.loc 1 1945 0
 7644 0132 264B     		ldr	r3, .L397+12
 7645 0134 DA68     		ldr	r2, [r3, #12]
ARM GAS  /tmp/ccSuvgbr.s 			page 168


 7646 0136 284B     		ldr	r3, .L397+24
 7647 0138 1B68     		ldr	r3, [r3]
 7648 013a 0433     		adds	r3, r3, #4
 7649 013c 1046     		mov	r0, r2
 7650 013e 1946     		mov	r1, r3
 7651 0140 FA68     		ldr	r2, [r7, #12]
 7652 0142 FFF7FEFF 		bl	btle_crcgen_lut
 7653 0146 B860     		str	r0, [r7, #8]
1946:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 7654              		.loc 1 1946 0
 7655 0148 234B     		ldr	r3, .L397+24
 7656 014a 1A68     		ldr	r2, [r3]
 7657 014c FB68     		ldr	r3, [r7, #12]
 7658 014e 0633     		adds	r3, r3, #6
 7659 0150 1344     		add	r3, r3, r2
 7660 0152 1B78     		ldrb	r3, [r3]
 7661 0154 DBB2     		uxtb	r3, r3
 7662 0156 1A04     		lsls	r2, r3, #16
1947:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 7663              		.loc 1 1947 0
 7664 0158 1F4B     		ldr	r3, .L397+24
 7665 015a 1968     		ldr	r1, [r3]
 7666 015c FB68     		ldr	r3, [r7, #12]
 7667 015e 0533     		adds	r3, r3, #5
 7668 0160 0B44     		add	r3, r3, r1
 7669 0162 1B78     		ldrb	r3, [r3]
 7670 0164 DBB2     		uxtb	r3, r3
 7671 0166 1B02     		lsls	r3, r3, #8
 7672 0168 1343     		orrs	r3, r3, r2
1948:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 7673              		.loc 1 1948 0
 7674 016a 1B4A     		ldr	r2, .L397+24
 7675 016c 1268     		ldr	r2, [r2]
 7676 016e F968     		ldr	r1, [r7, #12]
 7677 0170 0431     		adds	r1, r1, #4
 7678 0172 0A44     		add	r2, r2, r1
 7679 0174 1278     		ldrb	r2, [r2]
 7680 0176 D2B2     		uxtb	r2, r2
 7681 0178 1343     		orrs	r3, r3, r2
1946:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 7682              		.loc 1 1946 0
 7683 017a 7B60     		str	r3, [r7, #4]
1949:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 7684              		.loc 1 1949 0
 7685 017c BA68     		ldr	r2, [r7, #8]
 7686 017e 7B68     		ldr	r3, [r7, #4]
 7687 0180 9A42     		cmp	r2, r3
 7688 0182 00D0     		beq	.L393
1950:bluetooth_rxtx.c **** 					break;
 7689              		.loc 1 1950 0
 7690 0184 17E0     		b	.L394
 7691              	.L393:
 7692              	.LBE20:
1951:bluetooth_rxtx.c **** 			}
1952:bluetooth_rxtx.c **** 
1953:bluetooth_rxtx.c **** 			// send to PC
1954:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
ARM GAS  /tmp/ccSuvgbr.s 			page 169


 7693              		.loc 1 1954 0
 7694 0186 144B     		ldr	r3, .L397+24
 7695 0188 1B68     		ldr	r3, [r3]
 7696 018a 0120     		movs	r0, #1
 7697 018c 1946     		mov	r1, r3
 7698 018e FFF7FEFF 		bl	enqueue
1955:bluetooth_rxtx.c **** 			RXLED_SET;
 7699              		.loc 1 1955 0
 7700 0192 124B     		ldr	r3, .L397+28
 7701 0194 1022     		movs	r2, #16
 7702 0196 1A60     		str	r2, [r3]
1956:bluetooth_rxtx.c **** 
1957:bluetooth_rxtx.c **** 			packet_cb((uint8_t*)idle_rxbuf);
 7703              		.loc 1 1957 0
 7704 0198 114B     		ldr	r3, .L397+32
 7705 019a 1B68     		ldr	r3, [r3]
 7706 019c 0E4A     		ldr	r2, .L397+24
 7707 019e 1268     		ldr	r2, [r2]
 7708 01a0 1046     		mov	r0, r2
 7709 01a2 9847     		blx	r3
1958:bluetooth_rxtx.c **** 
1959:bluetooth_rxtx.c **** 			break;
 7710              		.loc 1 1959 0
 7711 01a4 07E0     		b	.L394
 7712              	.L385:
1923:bluetooth_rxtx.c **** 		access_address >>= 1;
 7713              		.loc 1 1923 0 discriminator 2
 7714 01a6 FB6A     		ldr	r3, [r7, #44]
 7715 01a8 0133     		adds	r3, r3, #1
 7716 01aa FB62     		str	r3, [r7, #44]
 7717              	.L384:
1923:bluetooth_rxtx.c **** 		access_address >>= 1;
 7718              		.loc 1 1923 0 is_stmt 0 discriminator 1
 7719 01ac FB6A     		ldr	r3, [r7, #44]
 7720 01ae B3F5D87F 		cmp	r3, #432
 7721 01b2 FFF650AF 		blt	.L395
 7722              	.L394:
1960:bluetooth_rxtx.c **** 		}
1961:bluetooth_rxtx.c **** 	}
1962:bluetooth_rxtx.c **** 
1963:bluetooth_rxtx.c **** 	return 1;
 7723              		.loc 1 1963 0 is_stmt 1
 7724 01b6 0123     		movs	r3, #1
1964:bluetooth_rxtx.c **** }
 7725              		.loc 1 1964 0
 7726 01b8 1846     		mov	r0, r3
 7727 01ba 3037     		adds	r7, r7, #48
 7728              		.cfi_def_cfa_offset 8
 7729 01bc BD46     		mov	sp, r7
 7730              		.cfi_def_cfa_register 13
 7731              		@ sp needed
 7732 01be 80BD     		pop	{r7, pc}
 7733              	.L398:
 7734              		.align	2
 7735              	.L397:
 7736 01c0 00000000 		.word	channel
 7737 01c4 AC000000 		.word	whitening_index
ARM GAS  /tmp/ccSuvgbr.s 			page 170


 7738 01c8 00000000 		.word	unpacked
 7739 01cc 00000000 		.word	le
 7740 01d0 2C000000 		.word	whitening
 7741 01d4 11080402 		.word	33818641
 7742 01d8 00000000 		.word	idle_rxbuf
 7743 01dc 38C00920 		.word	537509944
 7744 01e0 00000000 		.word	packet_cb
 7745              		.cfi_endproc
 7746              	.LFE32:
 7748              		.section	.text.connection_follow_cb,"ax",%progbits
 7749              		.align	2
 7750              		.global	connection_follow_cb
 7751              		.thumb
 7752              		.thumb_func
 7754              	connection_follow_cb:
 7755              	.LFB33:
1965:bluetooth_rxtx.c **** 
1966:bluetooth_rxtx.c **** /**
1967:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
1968:bluetooth_rxtx.c ****  */
1969:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 7756              		.loc 1 1969 0
 7757              		.cfi_startproc
 7758              		@ args = 0, pretend = 0, frame = 40
 7759              		@ frame_needed = 1, uses_anonymous_args = 0
 7760 0000 80B5     		push	{r7, lr}
 7761              		.cfi_def_cfa_offset 8
 7762              		.cfi_offset 7, -8
 7763              		.cfi_offset 14, -4
 7764 0002 8AB0     		sub	sp, sp, #40
 7765              		.cfi_def_cfa_offset 48
 7766 0004 00AF     		add	r7, sp, #0
 7767              		.cfi_def_cfa_register 7
 7768 0006 7860     		str	r0, [r7, #4]
1970:bluetooth_rxtx.c **** 	int i;
1971:bluetooth_rxtx.c **** 	u32 aa = 0;
 7769              		.loc 1 1971 0
 7770 0008 0023     		movs	r3, #0
 7771 000a 3B62     		str	r3, [r7, #32]
1972:bluetooth_rxtx.c **** 
1973:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
1974:bluetooth_rxtx.c **** #define HEADER_IDX 4
1975:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
1976:bluetooth_rxtx.c **** #define DATA_START_IDX 6
1977:bluetooth_rxtx.c **** 
1978:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 7772              		.loc 1 1978 0
 7773 000c 7B68     		ldr	r3, [r7, #4]
 7774 000e FB61     		str	r3, [r7, #28]
1979:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 7775              		.loc 1 1979 0
 7776 0010 7B68     		ldr	r3, [r7, #4]
 7777 0012 1B79     		ldrb	r3, [r3, #4]
 7778 0014 FB76     		strb	r3, [r7, #27]
1980:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 7779              		.loc 1 1980 0
 7780 0016 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccSuvgbr.s 			page 171


 7781 0018 0533     		adds	r3, r3, #5
 7782 001a 7B61     		str	r3, [r7, #20]
1981:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 7783              		.loc 1 1981 0
 7784 001c 7B68     		ldr	r3, [r7, #4]
 7785 001e 0633     		adds	r3, r3, #6
 7786 0020 3B61     		str	r3, [r7, #16]
1982:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 7787              		.loc 1 1982 0
 7788 0022 7B69     		ldr	r3, [r7, #20]
 7789 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7790 0026 0633     		adds	r3, r3, #6
 7791 0028 1A46     		mov	r2, r3
 7792 002a 7B68     		ldr	r3, [r7, #4]
 7793 002c 1344     		add	r3, r3, r2
 7794 002e FB60     		str	r3, [r7, #12]
1983:bluetooth_rxtx.c **** 
1984:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 7795              		.loc 1 1984 0
 7796 0030 8B4B     		ldr	r3, .L409
 7797 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7798 0034 022B     		cmp	r3, #2
 7799 0036 1CD1     		bne	.L400
1985:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
1986:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 7800              		.loc 1 1986 0
 7801 0038 894B     		ldr	r3, .L409
 7802 003a 0322     		movs	r2, #3
 7803 003c 1A75     		strb	r2, [r3, #20]
1987:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 7804              		.loc 1 1987 0
 7805 003e 894B     		ldr	r3, .L409+4
 7806 0040 1B68     		ldr	r3, [r3]
 7807 0042 874A     		ldr	r2, .L409
 7808 0044 9361     		str	r3, [r2, #24]
1988:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 7809              		.loc 1 1988 0
 7810 0046 864B     		ldr	r3, .L409
 7811 0048 DB8B     		ldrh	r3, [r3, #30]
 7812 004a 013B     		subs	r3, r3, #1
 7813 004c 9AB2     		uxth	r2, r3
 7814 004e 844B     		ldr	r3, .L409
 7815 0050 9A83     		strh	r2, [r3, #28]	@ movhi
1989:bluetooth_rxtx.c **** 		le.conn_count = 0;
 7816              		.loc 1 1989 0
 7817 0052 834B     		ldr	r3, .L409
 7818 0054 0022     		movs	r2, #0
 7819 0056 1A84     		strh	r2, [r3, #32]	@ movhi
1990:bluetooth_rxtx.c **** 		le.update_pending = 0;
 7820              		.loc 1 1990 0
 7821 0058 814B     		ldr	r3, .L409
 7822 005a 0022     		movs	r2, #0
 7823 005c 9A62     		str	r2, [r3, #40]
1991:bluetooth_rxtx.c **** 
1992:bluetooth_rxtx.c **** 		// hue hue hue
1993:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 7824              		.loc 1 1993 0
ARM GAS  /tmp/ccSuvgbr.s 			page 172


 7825 005e 824B     		ldr	r3, .L409+8
 7826 0060 1B78     		ldrb	r3, [r3]
 7827 0062 DBB2     		uxtb	r3, r3
 7828 0064 002B     		cmp	r3, #0
 7829 0066 00F0F780 		beq	.L399
1994:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 7830              		.loc 1 1994 0
 7831 006a 804B     		ldr	r3, .L409+12
 7832 006c 2822     		movs	r2, #40
 7833 006e 1A60     		str	r2, [r3]
 7834 0070 F2E0     		b	.L399
 7835              	.L400:
1995:bluetooth_rxtx.c **** 
1996:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 7836              		.loc 1 1996 0
 7837 0072 7B4B     		ldr	r3, .L409
 7838 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7839 0076 032B     		cmp	r3, #3
 7840 0078 6FD1     		bne	.L403
 7841              	.LBB21:
1997:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 7842              		.loc 1 1997 0
 7843 007a FB7E     		ldrb	r3, [r7, #27]
 7844 007c 03F00303 		and	r3, r3, #3
 7845 0080 FB72     		strb	r3, [r7, #11]
1998:bluetooth_rxtx.c **** 
1999:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2000:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 7846              		.loc 1 2000 0
 7847 0082 774B     		ldr	r3, .L409
 7848 0084 9B6A     		ldr	r3, [r3, #40]
 7849 0086 002B     		cmp	r3, #0
 7850 0088 21D0     		beq	.L404
 7851              		.loc 1 2000 0 is_stmt 0 discriminator 1
 7852 008a 754B     		ldr	r3, .L409
 7853 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 7854 008e 9AB2     		uxth	r2, r3
 7855 0090 734B     		ldr	r3, .L409
 7856 0092 9B8D     		ldrh	r3, [r3, #44]
 7857 0094 9A42     		cmp	r2, r3
 7858 0096 1AD1     		bne	.L404
2001:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2002:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 7859              		.loc 1 2002 0 is_stmt 1
 7860 0098 724B     		ldr	r3, .L409+4
 7861 009a 1B68     		ldr	r3, [r3]
 7862 009c 704A     		ldr	r2, .L409
 7863 009e 9361     		str	r3, [r2, #24]
2003:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 7864              		.loc 1 2003 0
 7865 00a0 6F4B     		ldr	r3, .L409
 7866 00a2 DA8D     		ldrh	r2, [r3, #46]
 7867 00a4 6E4B     		ldr	r3, .L409
 7868 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2004:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 7869              		.loc 1 2004 0
 7870 00a8 6D4B     		ldr	r3, .L409
ARM GAS  /tmp/ccSuvgbr.s 			page 173


 7871 00aa DB8D     		ldrh	r3, [r3, #46]
 7872 00ac 013B     		subs	r3, r3, #1
 7873 00ae 9AB2     		uxth	r2, r3
 7874 00b0 6B4B     		ldr	r3, .L409
 7875 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2005:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 7876              		.loc 1 2005 0
 7877 00b4 6A4B     		ldr	r3, .L409
 7878 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 7879 00ba 694B     		ldr	r3, .L409
 7880 00bc 83F82220 		strb	r2, [r3, #34]
2006:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 7881              		.loc 1 2006 0
 7882 00c0 674B     		ldr	r3, .L409
 7883 00c2 5A8E     		ldrh	r2, [r3, #50]
 7884 00c4 664B     		ldr	r3, .L409
 7885 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2007:bluetooth_rxtx.c **** 			le.update_pending = 0;
 7886              		.loc 1 2007 0
 7887 00c8 654B     		ldr	r3, .L409
 7888 00ca 0022     		movs	r2, #0
 7889 00cc 9A62     		str	r2, [r3, #40]
 7890              	.L404:
2008:bluetooth_rxtx.c **** 		}
2009:bluetooth_rxtx.c **** 
2010:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 7891              		.loc 1 2010 0
 7892 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 7893 00d0 032B     		cmp	r3, #3
 7894 00d2 41D1     		bne	.L405
 7895              		.loc 1 2010 0 is_stmt 0 discriminator 1
 7896 00d4 3B69     		ldr	r3, [r7, #16]
 7897 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7898 00d8 002B     		cmp	r3, #0
 7899 00da 3DD1     		bne	.L405
2011:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2012:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2013:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 7900              		.loc 1 2013 0 is_stmt 1
 7901 00dc 7B68     		ldr	r3, [r7, #4]
 7902 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 7903 00e0 5F4B     		ldr	r3, .L409
 7904 00e2 83F83020 		strb	r2, [r3, #48]
2014:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 7905              		.loc 1 2014 0
 7906 00e6 7B68     		ldr	r3, [r7, #4]
 7907 00e8 0833     		adds	r3, r3, #8
 7908 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7909 00ec 9AB2     		uxth	r2, r3
 7910 00ee 7B68     		ldr	r3, [r7, #4]
 7911 00f0 0933     		adds	r3, r3, #9
 7912 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7913 00f4 9BB2     		uxth	r3, r3
 7914 00f6 1B02     		lsls	r3, r3, #8
 7915 00f8 9BB2     		uxth	r3, r3
 7916 00fa 1344     		add	r3, r3, r2
 7917 00fc 9AB2     		uxth	r2, r3
ARM GAS  /tmp/ccSuvgbr.s 			page 174


 7918 00fe 584B     		ldr	r3, .L409
 7919 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2015:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 7920              		.loc 1 2015 0
 7921 0102 7B68     		ldr	r3, [r7, #4]
 7922 0104 0A33     		adds	r3, r3, #10
 7923 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7924 0108 9AB2     		uxth	r2, r3
 7925 010a 7B68     		ldr	r3, [r7, #4]
 7926 010c 0B33     		adds	r3, r3, #11
 7927 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7928 0110 9BB2     		uxth	r3, r3
 7929 0112 1B02     		lsls	r3, r3, #8
 7930 0114 9BB2     		uxth	r3, r3
 7931 0116 1344     		add	r3, r3, r2
 7932 0118 9AB2     		uxth	r2, r3
 7933 011a 514B     		ldr	r3, .L409
 7934 011c DA85     		strh	r2, [r3, #46]	@ movhi
2016:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 7935              		.loc 1 2016 0
 7936 011e 7B68     		ldr	r3, [r7, #4]
 7937 0120 1033     		adds	r3, r3, #16
 7938 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7939 0124 9AB2     		uxth	r2, r3
 7940 0126 7B68     		ldr	r3, [r7, #4]
 7941 0128 1133     		adds	r3, r3, #17
 7942 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7943 012c 9BB2     		uxth	r3, r3
 7944 012e 1B02     		lsls	r3, r3, #8
 7945 0130 9BB2     		uxth	r3, r3
 7946 0132 1344     		add	r3, r3, r2
 7947 0134 9AB2     		uxth	r2, r3
 7948 0136 4A4B     		ldr	r3, .L409
 7949 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2017:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 7950              		.loc 1 2017 0
 7951 013a 494B     		ldr	r3, .L409
 7952 013c 9B8D     		ldrh	r3, [r3, #44]
 7953 013e 1A46     		mov	r2, r3
 7954 0140 474B     		ldr	r3, .L409
 7955 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 7956 0144 9BB2     		uxth	r3, r3
 7957 0146 D31A     		subs	r3, r2, r3
 7958 0148 47F6FE72 		movw	r2, #32766
 7959 014c 9342     		cmp	r3, r2
 7960 014e 03DC     		bgt	.L405
2018:bluetooth_rxtx.c **** 				le.update_pending = 1;
 7961              		.loc 1 2018 0
 7962 0150 434B     		ldr	r3, .L409
 7963 0152 0122     		movs	r2, #1
 7964 0154 9A62     		str	r2, [r3, #40]
 7965              	.LBE21:
 7966 0156 7FE0     		b	.L399
 7967              	.L405:
 7968 0158 7EE0     		b	.L399
 7969              	.L403:
2019:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccSuvgbr.s 			page 175


2020:bluetooth_rxtx.c **** 
2021:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 7970              		.loc 1 2021 0
 7971 015a 414B     		ldr	r3, .L409
 7972 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7973 015e 012B     		cmp	r3, #1
 7974 0160 7AD1     		bne	.L399
 7975              	.LBB22:
2022:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 7976              		.loc 1 2022 0
 7977 0162 7B68     		ldr	r3, [r7, #4]
 7978 0164 0433     		adds	r3, r3, #4
 7979 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7980 0168 03F00F03 		and	r3, r3, #15
 7981 016c BB72     		strb	r3, [r7, #10]
2023:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 7982              		.loc 1 2023 0
 7983 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 7984 0170 052B     		cmp	r3, #5
 7985 0172 71D1     		bne	.L399
2024:bluetooth_rxtx.c **** 			// This is a connect packet
2025:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2026:bluetooth_rxtx.c **** 			if (le.target_set &&
 7986              		.loc 1 2026 0
 7987 0174 3A4B     		ldr	r3, .L409
 7988 0176 DB6B     		ldr	r3, [r3, #60]
 7989 0178 002B     		cmp	r3, #0
 7990 017a 14D0     		beq	.L406
2027:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 7991              		.loc 1 2027 0 discriminator 1
 7992 017c 7B68     		ldr	r3, [r7, #4]
 7993 017e 0633     		adds	r3, r3, #6
 7994 0180 3B48     		ldr	r0, .L409+16
 7995 0182 1946     		mov	r1, r3
 7996 0184 0622     		movs	r2, #6
 7997 0186 FFF7FEFF 		bl	memcmp
 7998 018a 0346     		mov	r3, r0
2026:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 7999              		.loc 1 2026 0 discriminator 1
 8000 018c 002B     		cmp	r3, #0
 8001 018e 0AD0     		beq	.L406
2028:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 8002              		.loc 1 2028 0
 8003 0190 7B68     		ldr	r3, [r7, #4]
 8004 0192 0C33     		adds	r3, r3, #12
 8005 0194 3648     		ldr	r0, .L409+16
 8006 0196 1946     		mov	r1, r3
 8007 0198 0622     		movs	r2, #6
 8008 019a FFF7FEFF 		bl	memcmp
 8009 019e 0346     		mov	r3, r0
2027:bluetooth_rxtx.c **** 				memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8010              		.loc 1 2027 0
 8011 01a0 002B     		cmp	r3, #0
 8012 01a2 00D0     		beq	.L406
2029:bluetooth_rxtx.c **** 				return;
 8013              		.loc 1 2029 0
 8014 01a4 58E0     		b	.L399
ARM GAS  /tmp/ccSuvgbr.s 			page 176


 8015              	.L406:
2030:bluetooth_rxtx.c **** 			}
2031:bluetooth_rxtx.c **** 
2032:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 8016              		.loc 1 2032 0
 8017 01a6 2E4B     		ldr	r3, .L409
 8018 01a8 0222     		movs	r2, #2
 8019 01aa 1A75     		strb	r2, [r3, #20]
2033:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 8020              		.loc 1 2033 0
 8021 01ac 2C4B     		ldr	r3, .L409
 8022 01ae 0022     		movs	r2, #0
 8023 01b0 1A61     		str	r2, [r3, #16]
2034:bluetooth_rxtx.c **** 
2035:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 8024              		.loc 1 2035 0
 8025 01b2 0023     		movs	r3, #0
 8026 01b4 7B62     		str	r3, [r7, #36]
 8027 01b6 11E0     		b	.L407
 8028              	.L408:
2036:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8029              		.loc 1 2036 0 discriminator 3
 8030 01b8 7B6A     		ldr	r3, [r7, #36]
 8031 01ba 1233     		adds	r3, r3, #18
 8032 01bc 1A46     		mov	r2, r3
 8033 01be 7B68     		ldr	r3, [r7, #4]
 8034 01c0 1344     		add	r3, r3, r2
 8035 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8036 01c4 1A46     		mov	r2, r3
 8037 01c6 7B6A     		ldr	r3, [r7, #36]
 8038 01c8 DB00     		lsls	r3, r3, #3
 8039 01ca 02FA03F3 		lsl	r3, r2, r3
 8040 01ce 1A46     		mov	r2, r3
 8041 01d0 3B6A     		ldr	r3, [r7, #32]
 8042 01d2 1343     		orrs	r3, r3, r2
 8043 01d4 3B62     		str	r3, [r7, #32]
2035:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8044              		.loc 1 2035 0 discriminator 3
 8045 01d6 7B6A     		ldr	r3, [r7, #36]
 8046 01d8 0133     		adds	r3, r3, #1
 8047 01da 7B62     		str	r3, [r7, #36]
 8048              	.L407:
2035:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8049              		.loc 1 2035 0 is_stmt 0 discriminator 1
 8050 01dc 7B6A     		ldr	r3, [r7, #36]
 8051 01de 032B     		cmp	r3, #3
 8052 01e0 EADD     		ble	.L408
2037:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 8053              		.loc 1 2037 0 is_stmt 1
 8054 01e2 386A     		ldr	r0, [r7, #32]
 8055 01e4 FFF7FEFF 		bl	le_set_access_address
2038:bluetooth_rxtx.c **** 
2039:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2040:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 8056              		.loc 1 2040 0
 8057 01e8 7B68     		ldr	r3, [r7, #4]
 8058 01ea 1833     		adds	r3, r3, #24
ARM GAS  /tmp/ccSuvgbr.s 			page 177


 8059 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8060 01ee 1A04     		lsls	r2, r3, #16
2041:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8061              		.loc 1 2041 0
 8062 01f0 7B68     		ldr	r3, [r7, #4]
 8063 01f2 1733     		adds	r3, r3, #23
 8064 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8065 01f6 1B02     		lsls	r3, r3, #8
 8066 01f8 1343     		orrs	r3, r3, r2
2042:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 8067              		.loc 1 2042 0
 8068 01fa 7A68     		ldr	r2, [r7, #4]
 8069 01fc 1632     		adds	r2, r2, #22
 8070 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8071 0200 1343     		orrs	r3, r3, r2
2040:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8072              		.loc 1 2040 0
 8073 0202 1A46     		mov	r2, r3
 8074 0204 164B     		ldr	r3, .L409
 8075 0206 9A60     		str	r2, [r3, #8]
2043:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 8076              		.loc 1 2043 0
 8077 0208 154B     		ldr	r3, .L409
 8078 020a 9B68     		ldr	r3, [r3, #8]
 8079 020c 1846     		mov	r0, r3
 8080 020e FFF7FEFF 		bl	rbit
 8081 0212 0246     		mov	r2, r0
 8082 0214 124B     		ldr	r3, .L409
 8083 0216 DA60     		str	r2, [r3, #12]
2044:bluetooth_rxtx.c **** 
2045:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2046:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 8084              		.loc 1 2046 0
 8085 0218 7B68     		ldr	r3, [r7, #4]
 8086 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 8087 021c 104B     		ldr	r3, .L409
 8088 021e 83F82220 		strb	r2, [r3, #34]
2047:bluetooth_rxtx.c **** 
2048:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2049:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 8089              		.loc 1 2049 0
 8090 0222 7B68     		ldr	r3, [r7, #4]
 8091 0224 1A33     		adds	r3, r3, #26
 8092 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8093 0228 9AB2     		uxth	r2, r3
 8094 022a 0D4B     		ldr	r3, .L409
 8095 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2050:bluetooth_rxtx.c **** 
2051:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2052:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 8096              		.loc 1 2052 0
 8097 022e 7B68     		ldr	r3, [r7, #4]
 8098 0230 1C33     		adds	r3, r3, #28
 8099 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8100 0234 9AB2     		uxth	r2, r3
 8101 0236 0A4B     		ldr	r3, .L409
 8102 0238 DA83     		strh	r2, [r3, #30]	@ movhi
ARM GAS  /tmp/ccSuvgbr.s 			page 178


2053:bluetooth_rxtx.c **** 
2054:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2055:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 8103              		.loc 1 2055 0
 8104 023a 7B68     		ldr	r3, [r7, #4]
 8105 023c 2733     		adds	r3, r3, #39
 8106 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8107 0240 03F01F03 		and	r3, r3, #31
 8108 0244 DAB2     		uxtb	r2, r3
 8109 0246 064B     		ldr	r3, .L409
 8110 0248 9A75     		strb	r2, [r3, #22]
2056:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 8111              		.loc 1 2056 0
 8112 024a 054B     		ldr	r3, .L409
 8113 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 8114 024e 044B     		ldr	r3, .L409
 8115 0250 5A75     		strb	r2, [r3, #21]
2057:bluetooth_rxtx.c **** 
2058:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2059:bluetooth_rxtx.c **** 			do_hop = 1;
 8116              		.loc 1 2059 0
 8117 0252 084B     		ldr	r3, .L409+20
 8118 0254 0122     		movs	r2, #1
 8119 0256 1A70     		strb	r2, [r3]
 8120              	.L399:
 8121              	.LBE22:
2060:bluetooth_rxtx.c **** 		}
2061:bluetooth_rxtx.c **** 	}
2062:bluetooth_rxtx.c **** }
 8122              		.loc 1 2062 0
 8123 0258 2837     		adds	r7, r7, #40
 8124              		.cfi_def_cfa_offset 8
 8125 025a BD46     		mov	sp, r7
 8126              		.cfi_def_cfa_register 13
 8127              		@ sp needed
 8128 025c 80BD     		pop	{r7, pc}
 8129              	.L410:
 8130 025e 00BF     		.align	2
 8131              	.L409:
 8132 0260 00000000 		.word	le
 8133 0264 00000000 		.word	clkn
 8134 0268 00000000 		.word	jam_mode
 8135 026c 00000000 		.word	le_jam_count
 8136 0270 34000000 		.word	le+52
 8137 0274 00000000 		.word	do_hop
 8138              		.cfi_endproc
 8139              	.LFE33:
 8141              		.section	.text.bt_follow_le,"ax",%progbits
 8142              		.align	2
 8143              		.global	bt_follow_le
 8144              		.thumb
 8145              		.thumb_func
 8147              	bt_follow_le:
 8148              	.LFB34:
2063:bluetooth_rxtx.c **** 
2064:bluetooth_rxtx.c **** void bt_follow_le() {
 8149              		.loc 1 2064 0
ARM GAS  /tmp/ccSuvgbr.s 			page 179


 8150              		.cfi_startproc
 8151              		@ args = 0, pretend = 0, frame = 0
 8152              		@ frame_needed = 1, uses_anonymous_args = 0
 8153 0000 80B5     		push	{r7, lr}
 8154              		.cfi_def_cfa_offset 8
 8155              		.cfi_offset 7, -8
 8156              		.cfi_offset 14, -4
 8157 0002 00AF     		add	r7, sp, #0
 8158              		.cfi_def_cfa_register 7
2065:bluetooth_rxtx.c **** 	reset_le();
 8159              		.loc 1 2065 0
 8160 0004 FFF7FEFF 		bl	reset_le
2066:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 8161              		.loc 1 2066 0
 8162 0008 044B     		ldr	r3, .L412
 8163 000a 054A     		ldr	r2, .L412+4
 8164 000c 1A60     		str	r2, [r3]
2067:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 8165              		.loc 1 2067 0
 8166 000e 0920     		movs	r0, #9
 8167 0010 FFF7FEFF 		bl	bt_le_sync
2068:bluetooth_rxtx.c **** 
2069:bluetooth_rxtx.c **** 	/* old non-sync mode
2070:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2071:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2072:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2073:bluetooth_rxtx.c **** 	*/
2074:bluetooth_rxtx.c **** 
2075:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 8168              		.loc 1 2075 0
 8169 0014 034B     		ldr	r3, .L412+8
 8170 0016 0022     		movs	r2, #0
 8171 0018 1A70     		strb	r2, [r3]
2076:bluetooth_rxtx.c **** }
 8172              		.loc 1 2076 0
 8173 001a 80BD     		pop	{r7, pc}
 8174              	.L413:
 8175              		.align	2
 8176              	.L412:
 8177 001c 00000000 		.word	packet_cb
 8178 0020 00000000 		.word	connection_follow_cb
 8179 0024 00000000 		.word	mode
 8180              		.cfi_endproc
 8181              	.LFE34:
 8183              		.section	.text.le_promisc_state,"ax",%progbits
 8184              		.align	2
 8185              		.global	le_promisc_state
 8186              		.thumb
 8187              		.thumb_func
 8189              	le_promisc_state:
 8190              	.LFB35:
2077:bluetooth_rxtx.c **** 
2078:bluetooth_rxtx.c **** // issue state change message
2079:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 8191              		.loc 1 2079 0
 8192              		.cfi_startproc
 8193              		@ args = 0, pretend = 0, frame = 72
ARM GAS  /tmp/ccSuvgbr.s 			page 180


 8194              		@ frame_needed = 1, uses_anonymous_args = 0
 8195 0000 80B5     		push	{r7, lr}
 8196              		.cfi_def_cfa_offset 8
 8197              		.cfi_offset 7, -8
 8198              		.cfi_offset 14, -4
 8199 0002 92B0     		sub	sp, sp, #72
 8200              		.cfi_def_cfa_offset 80
 8201 0004 00AF     		add	r7, sp, #0
 8202              		.cfi_def_cfa_register 7
 8203 0006 0346     		mov	r3, r0
 8204 0008 B960     		str	r1, [r7, #8]
 8205 000a 7A60     		str	r2, [r7, #4]
 8206 000c FB73     		strb	r3, [r7, #15]
2080:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 8207              		.loc 1 2080 0
 8208 000e 07F11403 		add	r3, r7, #20
 8209 0012 0022     		movs	r2, #0
 8210 0014 1A60     		str	r2, [r3]
 8211 0016 0433     		adds	r3, r3, #4
 8212 0018 0022     		movs	r2, #0
 8213 001a 1A60     		str	r2, [r3]
 8214 001c 0433     		adds	r3, r3, #4
 8215 001e 0022     		movs	r2, #0
 8216 0020 1A60     		str	r2, [r3]
 8217 0022 0433     		adds	r3, r3, #4
 8218 0024 0022     		movs	r2, #0
 8219 0026 1A60     		str	r2, [r3]
 8220 0028 0433     		adds	r3, r3, #4
 8221 002a 0022     		movs	r2, #0
 8222 002c 1A60     		str	r2, [r3]
 8223 002e 0433     		adds	r3, r3, #4
 8224 0030 0022     		movs	r2, #0
 8225 0032 1A60     		str	r2, [r3]
 8226 0034 0433     		adds	r3, r3, #4
 8227 0036 0022     		movs	r2, #0
 8228 0038 1A60     		str	r2, [r3]
 8229 003a 0433     		adds	r3, r3, #4
 8230 003c 0022     		movs	r2, #0
 8231 003e 1A60     		str	r2, [r3]
 8232 0040 0433     		adds	r3, r3, #4
 8233 0042 0022     		movs	r2, #0
 8234 0044 1A60     		str	r2, [r3]
 8235 0046 0433     		adds	r3, r3, #4
 8236 0048 0022     		movs	r2, #0
 8237 004a 1A60     		str	r2, [r3]
 8238 004c 0433     		adds	r3, r3, #4
 8239 004e 0022     		movs	r2, #0
 8240 0050 1A60     		str	r2, [r3]
 8241 0052 0433     		adds	r3, r3, #4
 8242 0054 0022     		movs	r2, #0
 8243 0056 1A60     		str	r2, [r3]
 8244 0058 0433     		adds	r3, r3, #4
 8245 005a 0022     		movs	r2, #0
 8246 005c 1A80     		strh	r2, [r3]	@ movhi
 8247 005e 0233     		adds	r3, r3, #2
2081:bluetooth_rxtx.c **** 	if (len > 49)
 8248              		.loc 1 2081 0
ARM GAS  /tmp/ccSuvgbr.s 			page 181


 8249 0060 7B68     		ldr	r3, [r7, #4]
 8250 0062 312B     		cmp	r3, #49
 8251 0064 01D9     		bls	.L415
2082:bluetooth_rxtx.c **** 		len = 49;
 8252              		.loc 1 2082 0
 8253 0066 3123     		movs	r3, #49
 8254 0068 7B60     		str	r3, [r7, #4]
 8255              	.L415:
2083:bluetooth_rxtx.c **** 
2084:bluetooth_rxtx.c **** 	buf[0] = type;
 8256              		.loc 1 2084 0
 8257 006a FB7B     		ldrb	r3, [r7, #15]
 8258 006c 3B75     		strb	r3, [r7, #20]
2085:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 8259              		.loc 1 2085 0
 8260 006e 07F11403 		add	r3, r7, #20
 8261 0072 0133     		adds	r3, r3, #1
 8262 0074 1846     		mov	r0, r3
 8263 0076 B968     		ldr	r1, [r7, #8]
 8264 0078 7A68     		ldr	r2, [r7, #4]
 8265 007a FFF7FEFF 		bl	memcpy
2086:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, (uint8_t*)buf);
 8266              		.loc 1 2086 0
 8267 007e 07F11403 		add	r3, r7, #20
 8268 0082 0520     		movs	r0, #5
 8269 0084 1946     		mov	r1, r3
 8270 0086 FFF7FEFF 		bl	enqueue
2087:bluetooth_rxtx.c **** }
 8271              		.loc 1 2087 0
 8272 008a 4837     		adds	r7, r7, #72
 8273              		.cfi_def_cfa_offset 8
 8274 008c BD46     		mov	sp, r7
 8275              		.cfi_def_cfa_register 13
 8276              		@ sp needed
 8277 008e 80BD     		pop	{r7, pc}
 8278              		.cfi_endproc
 8279              	.LFE35:
 8281              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 8282              		.align	2
 8283              		.global	promisc_recover_hop_increment
 8284              		.thumb
 8285              		.thumb_func
 8287              	promisc_recover_hop_increment:
 8288              	.LFB36:
2088:bluetooth_rxtx.c **** 
2089:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2090:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2091:bluetooth_rxtx.c **** 
2092:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 8289              		.loc 1 2092 0
 8290              		.cfi_startproc
 8291              		@ args = 0, pretend = 0, frame = 16
 8292              		@ frame_needed = 1, uses_anonymous_args = 0
 8293 0000 80B5     		push	{r7, lr}
 8294              		.cfi_def_cfa_offset 8
 8295              		.cfi_offset 7, -8
 8296              		.cfi_offset 14, -4
ARM GAS  /tmp/ccSuvgbr.s 			page 182


 8297 0002 84B0     		sub	sp, sp, #16
 8298              		.cfi_def_cfa_offset 24
 8299 0004 00AF     		add	r7, sp, #0
 8300              		.cfi_def_cfa_register 7
 8301 0006 7860     		str	r0, [r7, #4]
2093:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2094:bluetooth_rxtx.c **** 	if (channel == 2404) {
 8302              		.loc 1 2094 0
 8303 0008 554B     		ldr	r3, .L423
 8304 000a 1B88     		ldrh	r3, [r3]	@ movhi
 8305 000c 9BB2     		uxth	r3, r3
 8306 000e 40F66412 		movw	r2, #2404
 8307 0012 9342     		cmp	r3, r2
 8308 0014 14D1     		bne	.L417
2095:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 8309              		.loc 1 2095 0
 8310 0016 534B     		ldr	r3, .L423+4
 8311 0018 1B68     		ldr	r3, [r3]
 8312 001a C3F31303 		ubfx	r3, r3, #0, #20
 8313 001e 40F63542 		movw	r2, #3125
 8314 0022 02FB03F2 		mul	r2, r2, r3
 8315 0026 504B     		ldr	r3, .L423+8
 8316 0028 1B68     		ldr	r3, [r3]
 8317 002a 1344     		add	r3, r3, r2
 8318 002c 4F4A     		ldr	r2, .L423+12
 8319 002e 1360     		str	r3, [r2]
2096:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 8320              		.loc 1 2096 0
 8321 0030 4F4B     		ldr	r3, .L423+16
 8322 0032 40F66612 		movw	r2, #2406
 8323 0036 1A80     		strh	r2, [r3]	@ movhi
2097:bluetooth_rxtx.c **** 		do_hop = 1;
 8324              		.loc 1 2097 0
 8325 0038 4E4B     		ldr	r3, .L423+20
 8326 003a 0122     		movs	r2, #1
 8327 003c 1A70     		strb	r2, [r3]
 8328 003e 8BE0     		b	.L416
 8329              	.L417:
2098:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 8330              		.loc 1 2098 0
 8331 0040 474B     		ldr	r3, .L423
 8332 0042 1B88     		ldrh	r3, [r3]	@ movhi
 8333 0044 9BB2     		uxth	r3, r3
 8334 0046 40F66612 		movw	r2, #2406
 8335 004a 9342     		cmp	r3, r2
 8336 004c 7DD1     		bne	.L419
 8337              	.LBB23:
2099:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 8338              		.loc 1 2099 0
 8339 004e 454B     		ldr	r3, .L423+4
 8340 0050 1B68     		ldr	r3, [r3]
 8341 0052 C3F31303 		ubfx	r3, r3, #0, #20
 8342 0056 40F63542 		movw	r2, #3125
 8343 005a 02FB03F2 		mul	r2, r2, r3
 8344 005e 424B     		ldr	r3, .L423+8
 8345 0060 1B68     		ldr	r3, [r3]
 8346 0062 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccSuvgbr.s 			page 183


 8347 0064 FB60     		str	r3, [r7, #12]
2100:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 8348              		.loc 1 2100 0
 8349 0066 414B     		ldr	r3, .L423+12
 8350 0068 1B68     		ldr	r3, [r3]
 8351 006a FA68     		ldr	r2, [r7, #12]
 8352 006c 9A42     		cmp	r2, r3
 8353 006e 05D2     		bcs	.L420
2101:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 8354              		.loc 1 2101 0
 8355 0070 FB68     		ldr	r3, [r7, #12]
 8356 0072 03F14343 		add	r3, r3, #-1023410176
 8357 0076 03F5A003 		add	r3, r3, #5242880
 8358 007a FB60     		str	r3, [r7, #12]
 8359              	.L420:
2102:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2103:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 8360              		.loc 1 2103 0
 8361 007c 3B4B     		ldr	r3, .L423+12
 8362 007e 1B68     		ldr	r3, [r3]
 8363 0080 FA68     		ldr	r2, [r7, #12]
 8364 0082 D21A     		subs	r2, r2, r3
 8365 0084 3C4B     		ldr	r3, .L423+24
 8366 0086 DB8B     		ldrh	r3, [r3, #30]
 8367 0088 1946     		mov	r1, r3
 8368 008a 43F2D403 		movw	r3, #12500
 8369 008e 03FB01F3 		mul	r3, r3, r1
 8370 0092 D90F     		lsrs	r1, r3, #31
 8371 0094 0B44     		add	r3, r3, r1
 8372 0096 5B10     		asrs	r3, r3, #1
 8373 0098 1344     		add	r3, r3, r2
 8374 009a 374A     		ldr	r2, .L423+24
 8375 009c D28B     		ldrh	r2, [r2, #30]
 8376 009e 1146     		mov	r1, r2
 8377 00a0 43F2D402 		movw	r2, #12500
 8378 00a4 02FB01F2 		mul	r2, r2, r1
 8379 00a8 B3FBF2F3 		udiv	r3, r3, r2
 8380 00ac BB60     		str	r3, [r7, #8]
2104:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2105:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 8381              		.loc 1 2105 0
 8382 00ae BB68     		ldr	r3, [r7, #8]
 8383 00b0 242B     		cmp	r3, #36
 8384 00b2 42D8     		bhi	.L421
2106:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2107:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 8385              		.loc 1 2107 0
 8386 00b4 314A     		ldr	r2, .L423+28
 8387 00b6 BB68     		ldr	r3, [r7, #8]
 8388 00b8 1344     		add	r3, r3, r2
 8389 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8390 00bc 2E4B     		ldr	r3, .L423+24
 8391 00be 9A75     		strb	r2, [r3, #22]
2108:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 8392              		.loc 1 2108 0
 8393 00c0 2D4B     		ldr	r3, .L423+24
 8394 00c2 DB8B     		ldrh	r3, [r3, #30]
ARM GAS  /tmp/ccSuvgbr.s 			page 184


 8395 00c4 5B08     		lsrs	r3, r3, #1
 8396 00c6 9AB2     		uxth	r2, r3
 8397 00c8 2B4B     		ldr	r3, .L423+24
 8398 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2109:bluetooth_rxtx.c **** 			le.conn_count = 0;
 8399              		.loc 1 2109 0
 8400 00cc 2A4B     		ldr	r3, .L423+24
 8401 00ce 0022     		movs	r2, #0
 8402 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2110:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 8403              		.loc 1 2110 0
 8404 00d2 294B     		ldr	r3, .L423+24
 8405 00d4 0022     		movs	r2, #0
 8406 00d6 9A61     		str	r2, [r3, #24]
2111:bluetooth_rxtx.c **** 			do_hop = 0;
 8407              		.loc 1 2111 0
 8408 00d8 264B     		ldr	r3, .L423+20
 8409 00da 0022     		movs	r2, #0
 8410 00dc 1A70     		strb	r2, [r3]
2112:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2113:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 8411              		.loc 1 2113 0
 8412 00de 264B     		ldr	r3, .L423+24
 8413 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 8414 00e2 5A1C     		adds	r2, r3, #1
 8415 00e4 264B     		ldr	r3, .L423+32
 8416 00e6 82FB0301 		smull	r0, r1, r2, r3
 8417 00ea 5318     		adds	r3, r2, r1
 8418 00ec 5911     		asrs	r1, r3, #5
 8419 00ee D317     		asrs	r3, r2, #31
 8420 00f0 C91A     		subs	r1, r1, r3
 8421 00f2 0B46     		mov	r3, r1
 8422 00f4 DB00     		lsls	r3, r3, #3
 8423 00f6 0B44     		add	r3, r3, r1
 8424 00f8 9B00     		lsls	r3, r3, #2
 8425 00fa 0B44     		add	r3, r3, r1
 8426 00fc D11A     		subs	r1, r2, r3
 8427 00fe CAB2     		uxtb	r2, r1
 8428 0100 1D4B     		ldr	r3, .L423+24
 8429 0102 5A75     		strb	r2, [r3, #21]
2114:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 8430              		.loc 1 2114 0
 8431 0104 1C4B     		ldr	r3, .L423+24
 8432 0106 0322     		movs	r2, #3
 8433 0108 1A75     		strb	r2, [r3, #20]
2115:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 8434              		.loc 1 2115 0
 8435 010a 1B4B     		ldr	r3, .L423+24
 8436 010c 0022     		movs	r2, #0
 8437 010e 1A61     		str	r2, [r3, #16]
2116:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 8438              		.loc 1 2116 0
 8439 0110 1C4B     		ldr	r3, .L423+36
 8440 0112 0322     		movs	r2, #3
 8441 0114 1A70     		strb	r2, [r3]
2117:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 8442              		.loc 1 2117 0
ARM GAS  /tmp/ccSuvgbr.s 			page 185


 8443 0116 1C4B     		ldr	r3, .L423+40
 8444 0118 1C4A     		ldr	r2, .L423+44
 8445 011a 1A60     		str	r2, [r3]
2118:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 8446              		.loc 1 2118 0
 8447 011c 0320     		movs	r0, #3
 8448 011e 1C49     		ldr	r1, .L423+48
 8449 0120 0122     		movs	r2, #1
 8450 0122 FFF7FEFF 		bl	le_promisc_state
2119:bluetooth_rxtx.c **** 
2120:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 8451              		.loc 1 2120 0
 8452 0126 1B4B     		ldr	r3, .L423+52
 8453 0128 1B78     		ldrb	r3, [r3]
 8454 012a DBB2     		uxtb	r3, r3
 8455 012c 002B     		cmp	r3, #0
 8456 012e 03D0     		beq	.L422
2121:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 8457              		.loc 1 2121 0
 8458 0130 194B     		ldr	r3, .L423+56
 8459 0132 2822     		movs	r2, #40
 8460 0134 1A60     		str	r2, [r3]
2122:bluetooth_rxtx.c **** 
2123:bluetooth_rxtx.c **** 			return;
 8461              		.loc 1 2123 0
 8462 0136 0FE0     		b	.L416
 8463              	.L422:
 8464 0138 0EE0     		b	.L416
 8465              	.L421:
2124:bluetooth_rxtx.c **** 		}
2125:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8466              		.loc 1 2125 0
 8467 013a 0D4B     		ldr	r3, .L423+16
 8468 013c 40F66412 		movw	r2, #2404
 8469 0140 1A80     		strh	r2, [r3]	@ movhi
2126:bluetooth_rxtx.c **** 		do_hop = 1;
 8470              		.loc 1 2126 0
 8471 0142 0C4B     		ldr	r3, .L423+20
 8472 0144 0122     		movs	r2, #1
 8473 0146 1A70     		strb	r2, [r3]
 8474              	.LBE23:
 8475 0148 06E0     		b	.L416
 8476              	.L419:
2127:bluetooth_rxtx.c **** 	}
2128:bluetooth_rxtx.c **** 	else {
2129:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8477              		.loc 1 2129 0
 8478 014a 094B     		ldr	r3, .L423+16
 8479 014c 40F66412 		movw	r2, #2404
 8480 0150 1A80     		strh	r2, [r3]	@ movhi
2130:bluetooth_rxtx.c **** 		do_hop = 1;
 8481              		.loc 1 2130 0
 8482 0152 084B     		ldr	r3, .L423+20
 8483 0154 0122     		movs	r2, #1
 8484 0156 1A70     		strb	r2, [r3]
 8485              	.L416:
2131:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/ccSuvgbr.s 			page 186


2132:bluetooth_rxtx.c **** }
 8486              		.loc 1 2132 0
 8487 0158 1037     		adds	r7, r7, #16
 8488              		.cfi_def_cfa_offset 8
 8489 015a BD46     		mov	sp, r7
 8490              		.cfi_def_cfa_register 13
 8491              		@ sp needed
 8492 015c 80BD     		pop	{r7, pc}
 8493              	.L424:
 8494 015e 00BF     		.align	2
 8495              	.L423:
 8496 0160 00000000 		.word	channel
 8497 0164 00000000 		.word	clkn
 8498 0168 08400040 		.word	1073758216
 8499 016c E0000000 		.word	first_ts.4790
 8500 0170 00000000 		.word	hop_direct_channel
 8501 0174 00000000 		.word	do_hop
 8502 0178 00000000 		.word	le
 8503 017c D4000000 		.word	hop_interval_lut
 8504 0180 A7C867DD 		.word	-580400985
 8505 0184 00000000 		.word	hop_mode
 8506 0188 00000000 		.word	packet_cb
 8507 018c 00000000 		.word	connection_follow_cb
 8508 0190 16000000 		.word	le+22
 8509 0194 00000000 		.word	jam_mode
 8510 0198 00000000 		.word	le_jam_count
 8511              		.cfi_endproc
 8512              	.LFE36:
 8514              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 8515              		.align	2
 8516              		.global	promisc_recover_hop_interval
 8517              		.thumb
 8518              		.thumb_func
 8520              	promisc_recover_hop_interval:
 8521              	.LFB37:
2133:bluetooth_rxtx.c **** 
2134:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 8522              		.loc 1 2134 0
 8523              		.cfi_startproc
 8524              		@ args = 0, pretend = 0, frame = 24
 8525              		@ frame_needed = 1, uses_anonymous_args = 0
 8526 0000 80B5     		push	{r7, lr}
 8527              		.cfi_def_cfa_offset 8
 8528              		.cfi_offset 7, -8
 8529              		.cfi_offset 14, -4
 8530 0002 86B0     		sub	sp, sp, #24
 8531              		.cfi_def_cfa_offset 32
 8532 0004 00AF     		add	r7, sp, #0
 8533              		.cfi_def_cfa_register 7
 8534 0006 7860     		str	r0, [r7, #4]
2135:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2136:bluetooth_rxtx.c **** 
2137:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 8535              		.loc 1 2137 0
 8536 0008 334B     		ldr	r3, .L433
 8537 000a 1B68     		ldr	r3, [r3]
 8538 000c C3F31303 		ubfx	r3, r3, #0, #20
ARM GAS  /tmp/ccSuvgbr.s 			page 187


 8539 0010 40F63542 		movw	r2, #3125
 8540 0014 02FB03F2 		mul	r2, r2, r3
 8541 0018 304B     		ldr	r3, .L433+4
 8542 001a 1B68     		ldr	r3, [r3]
 8543 001c 1344     		add	r3, r3, r2
 8544 001e 7B61     		str	r3, [r7, #20]
2138:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 8545              		.loc 1 2138 0
 8546 0020 2F4B     		ldr	r3, .L433+8
 8547 0022 1B68     		ldr	r3, [r3]
 8548 0024 7A69     		ldr	r2, [r7, #20]
 8549 0026 9A42     		cmp	r2, r3
 8550 0028 03D2     		bcs	.L426
2139:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 8551              		.loc 1 2139 0
 8552 002a 7A69     		ldr	r2, [r7, #20]
 8553 002c 2D4B     		ldr	r3, .L433+12
 8554 002e 1344     		add	r3, r3, r2
 8555 0030 7B61     		str	r3, [r7, #20]
 8556              	.L426:
2140:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 8557              		.loc 1 2140 0
 8558 0032 2B4B     		ldr	r3, .L433+8
 8559 0034 1B68     		ldr	r3, [r3]
 8560 0036 7A69     		ldr	r2, [r7, #20]
 8561 0038 D31A     		subs	r3, r2, r3
 8562 003a 3B61     		str	r3, [r7, #16]
2141:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2142:bluetooth_rxtx.c **** 
2143:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2144:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 8563              		.loc 1 2144 0
 8564 003c 3B69     		ldr	r3, [r7, #16]
 8565 003e 46F2A712 		movw	r2, #24999
 8566 0042 9342     		cmp	r3, r2
 8567 0044 00D8     		bhi	.L427
2145:bluetooth_rxtx.c **** 		return;
 8568              		.loc 1 2145 0
 8569 0046 43E0     		b	.L425
 8570              	.L427:
2146:bluetooth_rxtx.c **** 
2147:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 8571              		.loc 1 2147 0
 8572 0048 274B     		ldr	r3, .L433+16
 8573 004a D3F80021 		ldr	r2, [r3, #256]
 8574 004e 3B69     		ldr	r3, [r7, #16]
 8575 0050 9A42     		cmp	r2, r3
 8576 0052 03D9     		bls	.L429
2148:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 8577              		.loc 1 2148 0
 8578 0054 244A     		ldr	r2, .L433+16
 8579 0056 3B69     		ldr	r3, [r7, #16]
 8580 0058 C2F80031 		str	r3, [r2, #256]
 8581              	.L429:
2149:bluetooth_rxtx.c **** 
2150:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 8582              		.loc 1 2150 0
ARM GAS  /tmp/ccSuvgbr.s 			page 188


 8583 005c 224B     		ldr	r3, .L433+16
 8584 005e D3F80031 		ldr	r3, [r3, #256]
 8585 0062 03F56133 		add	r3, r3, #230400
 8586 0066 03F25233 		addw	r3, r3, #850
 8587 006a 204A     		ldr	r2, .L433+20
 8588 006c A2FB0323 		umull	r2, r3, r2, r3
 8589 0070 9B0C     		lsrs	r3, r3, #18
 8590 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2151:bluetooth_rxtx.c **** 
2152:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 8591              		.loc 1 2152 0
 8592 0074 1E4B     		ldr	r3, .L433+24
 8593 0076 DB8B     		ldrh	r3, [r3, #30]
 8594 0078 FA89     		ldrh	r2, [r7, #14]
 8595 007a 9A42     		cmp	r2, r3
 8596 007c 1ED1     		bne	.L430
2153:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2154:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 8597              		.loc 1 2154 0
 8598 007e 1A4B     		ldr	r3, .L433+16
 8599 0080 D3F80431 		ldr	r3, [r3, #260]
 8600 0084 0133     		adds	r3, r3, #1
 8601 0086 184A     		ldr	r2, .L433+16
 8602 0088 C2F80431 		str	r3, [r2, #260]
2155:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 8603              		.loc 1 2155 0
 8604 008c 164B     		ldr	r3, .L433+16
 8605 008e D3F80431 		ldr	r3, [r3, #260]
 8606 0092 052B     		cmp	r3, #5
 8607 0094 19D1     		bne	.L432
2156:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 8608              		.loc 1 2156 0
 8609 0096 174B     		ldr	r3, .L433+28
 8610 0098 174A     		ldr	r2, .L433+32
 8611 009a 1A60     		str	r2, [r3]
2157:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 8612              		.loc 1 2157 0
 8613 009c 174B     		ldr	r3, .L433+36
 8614 009e 40F66412 		movw	r2, #2404
 8615 00a2 1A80     		strh	r2, [r3]	@ movhi
2158:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 8616              		.loc 1 2158 0
 8617 00a4 164B     		ldr	r3, .L433+40
 8618 00a6 0422     		movs	r2, #4
 8619 00a8 1A70     		strb	r2, [r3]
2159:bluetooth_rxtx.c **** 			do_hop = 1;
 8620              		.loc 1 2159 0
 8621 00aa 164B     		ldr	r3, .L433+44
 8622 00ac 0122     		movs	r2, #1
 8623 00ae 1A70     		strb	r2, [r3]
2160:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 8624              		.loc 1 2160 0
 8625 00b0 0220     		movs	r0, #2
 8626 00b2 1549     		ldr	r1, .L433+48
 8627 00b4 0222     		movs	r2, #2
 8628 00b6 FFF7FEFF 		bl	le_promisc_state
 8629 00ba 06E0     		b	.L432
ARM GAS  /tmp/ccSuvgbr.s 			page 189


 8630              	.L430:
2161:bluetooth_rxtx.c **** 		}
2162:bluetooth_rxtx.c **** 	} else {
2163:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 8631              		.loc 1 2163 0
 8632 00bc 0C4A     		ldr	r2, .L433+24
 8633 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 8634 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2164:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 8635              		.loc 1 2164 0
 8636 00c2 094B     		ldr	r3, .L433+16
 8637 00c4 0022     		movs	r2, #0
 8638 00c6 C3F80421 		str	r2, [r3, #260]
 8639              	.L432:
2165:bluetooth_rxtx.c **** 	}
2166:bluetooth_rxtx.c **** 
2167:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 8640              		.loc 1 2167 0
 8641 00ca 054A     		ldr	r2, .L433+8
 8642 00cc 7B69     		ldr	r3, [r7, #20]
 8643 00ce 1360     		str	r3, [r2]
 8644              	.L425:
2168:bluetooth_rxtx.c **** }
 8645              		.loc 1 2168 0
 8646 00d0 1837     		adds	r7, r7, #24
 8647              		.cfi_def_cfa_offset 8
 8648 00d2 BD46     		mov	sp, r7
 8649              		.cfi_def_cfa_register 13
 8650              		@ sp needed
 8651 00d4 80BD     		pop	{r7, pc}
 8652              	.L434:
 8653 00d6 00BF     		.align	2
 8654              	.L433:
 8655 00d8 00000000 		.word	clkn
 8656 00dc 08400040 		.word	1073758216
 8657 00e0 E4000000 		.word	prev_clk.4796
 8658 00e4 C0ABC6C2 		.word	-1027167296
 8659 00e8 00000000 		.word	le_promisc
 8660 00ec C1A91991 		.word	-1860589119
 8661 00f0 00000000 		.word	le
 8662 00f4 00000000 		.word	packet_cb
 8663 00f8 00000000 		.word	promisc_recover_hop_increment
 8664 00fc 00000000 		.word	hop_direct_channel
 8665 0100 00000000 		.word	hop_mode
 8666 0104 00000000 		.word	do_hop
 8667 0108 1E000000 		.word	le+30
 8668              		.cfi_endproc
 8669              	.LFE37:
 8671              		.section	.text.promisc_follow_cb,"ax",%progbits
 8672              		.align	2
 8673              		.global	promisc_follow_cb
 8674              		.thumb
 8675              		.thumb_func
 8677              	promisc_follow_cb:
 8678              	.LFB38:
2169:bluetooth_rxtx.c **** 
2170:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
ARM GAS  /tmp/ccSuvgbr.s 			page 190


 8679              		.loc 1 2170 0
 8680              		.cfi_startproc
 8681              		@ args = 0, pretend = 0, frame = 16
 8682              		@ frame_needed = 1, uses_anonymous_args = 0
 8683 0000 80B5     		push	{r7, lr}
 8684              		.cfi_def_cfa_offset 8
 8685              		.cfi_offset 7, -8
 8686              		.cfi_offset 14, -4
 8687 0002 84B0     		sub	sp, sp, #16
 8688              		.cfi_def_cfa_offset 24
 8689 0004 00AF     		add	r7, sp, #0
 8690              		.cfi_def_cfa_register 7
 8691 0006 7860     		str	r0, [r7, #4]
2171:bluetooth_rxtx.c **** 	int i;
2172:bluetooth_rxtx.c **** 
2173:bluetooth_rxtx.c **** 	// get the CRCInit
2174:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 8692              		.loc 1 2174 0
 8693 0008 284B     		ldr	r3, .L439
 8694 000a 1B69     		ldr	r3, [r3, #16]
 8695 000c 002B     		cmp	r3, #0
 8696 000e 49D1     		bne	.L435
 8697              		.loc 1 2174 0 is_stmt 0 discriminator 1
 8698 0010 7B68     		ldr	r3, [r7, #4]
 8699 0012 0433     		adds	r3, r3, #4
 8700 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8701 0016 012B     		cmp	r3, #1
 8702 0018 44D1     		bne	.L435
 8703              		.loc 1 2174 0 discriminator 2
 8704 001a 7B68     		ldr	r3, [r7, #4]
 8705 001c 0533     		adds	r3, r3, #5
 8706 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8707 0020 002B     		cmp	r3, #0
 8708 0022 3FD1     		bne	.L435
 8709              	.LBB24:
2175:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 8710              		.loc 1 2175 0 is_stmt 1
 8711 0024 7B68     		ldr	r3, [r7, #4]
 8712 0026 0833     		adds	r3, r3, #8
 8713 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8714 002a 1A04     		lsls	r2, r3, #16
 8715 002c 7B68     		ldr	r3, [r7, #4]
 8716 002e 0733     		adds	r3, r3, #7
 8717 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8718 0032 1B02     		lsls	r3, r3, #8
 8719 0034 1343     		orrs	r3, r3, r2
 8720 0036 7A68     		ldr	r2, [r7, #4]
 8721 0038 0632     		adds	r2, r2, #6
 8722 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8723 003c 1343     		orrs	r3, r3, r2
 8724 003e BB60     		str	r3, [r7, #8]
2176:bluetooth_rxtx.c **** 
2177:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 8725              		.loc 1 2177 0
 8726 0040 7B68     		ldr	r3, [r7, #4]
 8727 0042 0433     		adds	r3, r3, #4
 8728 0044 B868     		ldr	r0, [r7, #8]
ARM GAS  /tmp/ccSuvgbr.s 			page 191


 8729 0046 1946     		mov	r1, r3
 8730 0048 0222     		movs	r2, #2
 8731 004a FFF7FEFF 		bl	btle_reverse_crc
 8732 004e 0246     		mov	r2, r0
 8733 0050 164B     		ldr	r3, .L439
 8734 0052 9A60     		str	r2, [r3, #8]
2178:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 8735              		.loc 1 2178 0
 8736 0054 154B     		ldr	r3, .L439
 8737 0056 0022     		movs	r2, #0
 8738 0058 DA60     		str	r2, [r3, #12]
2179:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 8739              		.loc 1 2179 0
 8740 005a 0023     		movs	r3, #0
 8741 005c FB60     		str	r3, [r7, #12]
 8742 005e 13E0     		b	.L437
 8743              	.L438:
2180:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 8744              		.loc 1 2180 0 discriminator 3
 8745 0060 124B     		ldr	r3, .L439
 8746 0062 DA68     		ldr	r2, [r3, #12]
 8747 0064 114B     		ldr	r3, .L439
 8748 0066 9968     		ldr	r1, [r3, #8]
 8749 0068 FB68     		ldr	r3, [r7, #12]
 8750 006a 21FA03F3 		lsr	r3, r1, r3
 8751 006e 03F00101 		and	r1, r3, #1
 8752 0072 FB68     		ldr	r3, [r7, #12]
 8753 0074 C3F11703 		rsb	r3, r3, #23
 8754 0078 01FA03F3 		lsl	r3, r1, r3
 8755 007c 1343     		orrs	r3, r3, r2
 8756 007e 0B4A     		ldr	r2, .L439
 8757 0080 D360     		str	r3, [r2, #12]
2179:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 8758              		.loc 1 2179 0 discriminator 3
 8759 0082 FB68     		ldr	r3, [r7, #12]
 8760 0084 0133     		adds	r3, r3, #1
 8761 0086 FB60     		str	r3, [r7, #12]
 8762              	.L437:
2179:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 8763              		.loc 1 2179 0 is_stmt 0 discriminator 1
 8764 0088 FB68     		ldr	r3, [r7, #12]
 8765 008a 172B     		cmp	r3, #23
 8766 008c E8DD     		ble	.L438
2181:bluetooth_rxtx.c **** 
2182:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 8767              		.loc 1 2182 0 is_stmt 1
 8768 008e 074B     		ldr	r3, .L439
 8769 0090 0122     		movs	r2, #1
 8770 0092 1A61     		str	r2, [r3, #16]
2183:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 8771              		.loc 1 2183 0
 8772 0094 064B     		ldr	r3, .L439+4
 8773 0096 074A     		ldr	r2, .L439+8
 8774 0098 1A60     		str	r2, [r3]
2184:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 8775              		.loc 1 2184 0
 8776 009a 0120     		movs	r0, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 192


 8777 009c 0649     		ldr	r1, .L439+12
 8778 009e 0322     		movs	r2, #3
 8779 00a0 FFF7FEFF 		bl	le_promisc_state
 8780              	.L435:
 8781              	.LBE24:
2185:bluetooth_rxtx.c **** 	}
2186:bluetooth_rxtx.c **** }
 8782              		.loc 1 2186 0
 8783 00a4 1037     		adds	r7, r7, #16
 8784              		.cfi_def_cfa_offset 8
 8785 00a6 BD46     		mov	sp, r7
 8786              		.cfi_def_cfa_register 13
 8787              		@ sp needed
 8788 00a8 80BD     		pop	{r7, pc}
 8789              	.L440:
 8790 00aa 00BF     		.align	2
 8791              	.L439:
 8792 00ac 00000000 		.word	le
 8793 00b0 00000000 		.word	packet_cb
 8794 00b4 00000000 		.word	promisc_recover_hop_interval
 8795 00b8 08000000 		.word	le+8
 8796              		.cfi_endproc
 8797              	.LFE38:
 8799              		.section	.text.see_aa,"ax",%progbits
 8800              		.align	2
 8801              		.global	see_aa
 8802              		.thumb
 8803              		.thumb_func
 8805              	see_aa:
 8806              	.LFB39:
2187:bluetooth_rxtx.c **** 
2188:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2189:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 8807              		.loc 1 2189 0
 8808              		.cfi_startproc
 8809              		@ args = 0, pretend = 0, frame = 24
 8810              		@ frame_needed = 1, uses_anonymous_args = 0
 8811              		@ link register save eliminated.
 8812 0000 80B4     		push	{r7}
 8813              		.cfi_def_cfa_offset 4
 8814              		.cfi_offset 7, -4
 8815 0002 87B0     		sub	sp, sp, #28
 8816              		.cfi_def_cfa_offset 32
 8817 0004 00AF     		add	r7, sp, #0
 8818              		.cfi_def_cfa_register 7
 8819 0006 7860     		str	r0, [r7, #4]
2190:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 8820              		.loc 1 2190 0
 8821 0008 4FF0FF33 		mov	r3, #-1
 8822 000c 3B61     		str	r3, [r7, #16]
 8823 000e 4FF0FF33 		mov	r3, #-1
 8824 0012 FB60     		str	r3, [r7, #12]
2191:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 8825              		.loc 1 2191 0
 8826 0014 0023     		movs	r3, #0
 8827 0016 7B61     		str	r3, [r7, #20]
 8828 0018 15E0     		b	.L442
ARM GAS  /tmp/ccSuvgbr.s 			page 193


 8829              	.L445:
2192:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 8830              		.loc 1 2192 0
 8831 001a 224A     		ldr	r2, .L450
 8832 001c 7B69     		ldr	r3, [r7, #20]
 8833 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 8834 0022 7B68     		ldr	r3, [r7, #4]
 8835 0024 9A42     		cmp	r2, r3
 8836 0026 0BD1     		bne	.L443
2193:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 8837              		.loc 1 2193 0
 8838 0028 1E4A     		ldr	r2, .L450
 8839 002a 7B69     		ldr	r3, [r7, #20]
 8840 002c DB00     		lsls	r3, r3, #3
 8841 002e 1344     		add	r3, r3, r2
 8842 0030 5B68     		ldr	r3, [r3, #4]
 8843 0032 5A1C     		adds	r2, r3, #1
 8844 0034 1B49     		ldr	r1, .L450
 8845 0036 7B69     		ldr	r3, [r7, #20]
 8846 0038 DB00     		lsls	r3, r3, #3
 8847 003a 0B44     		add	r3, r3, r1
 8848 003c 5A60     		str	r2, [r3, #4]
2194:bluetooth_rxtx.c **** 			return;
 8849              		.loc 1 2194 0
 8850 003e 2CE0     		b	.L441
 8851              	.L443:
2191:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 8852              		.loc 1 2191 0 discriminator 2
 8853 0040 7B69     		ldr	r3, [r7, #20]
 8854 0042 0133     		adds	r3, r3, #1
 8855 0044 7B61     		str	r3, [r7, #20]
 8856              	.L442:
2191:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 8857              		.loc 1 2191 0 is_stmt 0 discriminator 1
 8858 0046 7B69     		ldr	r3, [r7, #20]
 8859 0048 1F2B     		cmp	r3, #31
 8860 004a E6DD     		ble	.L445
2195:bluetooth_rxtx.c **** 		}
2196:bluetooth_rxtx.c **** 
2197:bluetooth_rxtx.c **** 	// evict someone
2198:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 8861              		.loc 1 2198 0 is_stmt 1
 8862 004c 0023     		movs	r3, #0
 8863 004e 7B61     		str	r3, [r7, #20]
 8864 0050 15E0     		b	.L446
 8865              	.L449:
2199:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 8866              		.loc 1 2199 0
 8867 0052 144A     		ldr	r2, .L450
 8868 0054 7B69     		ldr	r3, [r7, #20]
 8869 0056 DB00     		lsls	r3, r3, #3
 8870 0058 1344     		add	r3, r3, r2
 8871 005a 5A68     		ldr	r2, [r3, #4]
 8872 005c 3B69     		ldr	r3, [r7, #16]
 8873 005e 9A42     		cmp	r2, r3
 8874 0060 02DB     		blt	.L447
 8875              		.loc 1 2199 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccSuvgbr.s 			page 194


 8876 0062 3B69     		ldr	r3, [r7, #16]
 8877 0064 002B     		cmp	r3, #0
 8878 0066 07DA     		bge	.L448
 8879              	.L447:
2200:bluetooth_rxtx.c **** 			killme = i;
 8880              		.loc 1 2200 0 is_stmt 1
 8881 0068 7B69     		ldr	r3, [r7, #20]
 8882 006a FB60     		str	r3, [r7, #12]
2201:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 8883              		.loc 1 2201 0
 8884 006c 0D4A     		ldr	r2, .L450
 8885 006e 7B69     		ldr	r3, [r7, #20]
 8886 0070 DB00     		lsls	r3, r3, #3
 8887 0072 1344     		add	r3, r3, r2
 8888 0074 5B68     		ldr	r3, [r3, #4]
 8889 0076 3B61     		str	r3, [r7, #16]
 8890              	.L448:
2198:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 8891              		.loc 1 2198 0 discriminator 2
 8892 0078 7B69     		ldr	r3, [r7, #20]
 8893 007a 0133     		adds	r3, r3, #1
 8894 007c 7B61     		str	r3, [r7, #20]
 8895              	.L446:
2198:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 8896              		.loc 1 2198 0 is_stmt 0 discriminator 1
 8897 007e 7B69     		ldr	r3, [r7, #20]
 8898 0080 1F2B     		cmp	r3, #31
 8899 0082 E6DD     		ble	.L449
2202:bluetooth_rxtx.c **** 		}
2203:bluetooth_rxtx.c **** 
2204:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 8900              		.loc 1 2204 0 is_stmt 1
 8901 0084 0749     		ldr	r1, .L450
 8902 0086 FB68     		ldr	r3, [r7, #12]
 8903 0088 7A68     		ldr	r2, [r7, #4]
 8904 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2205:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 8905              		.loc 1 2205 0
 8906 008e 054A     		ldr	r2, .L450
 8907 0090 FB68     		ldr	r3, [r7, #12]
 8908 0092 DB00     		lsls	r3, r3, #3
 8909 0094 1344     		add	r3, r3, r2
 8910 0096 0122     		movs	r2, #1
 8911 0098 5A60     		str	r2, [r3, #4]
 8912              	.L441:
2206:bluetooth_rxtx.c **** }
 8913              		.loc 1 2206 0
 8914 009a 1C37     		adds	r7, r7, #28
 8915              		.cfi_def_cfa_offset 4
 8916 009c BD46     		mov	sp, r7
 8917              		.cfi_def_cfa_register 13
 8918              		@ sp needed
 8919 009e 5DF8047B 		ldr	r7, [sp], #4
 8920              		.cfi_restore 7
 8921              		.cfi_def_cfa_offset 0
 8922 00a2 7047     		bx	lr
 8923              	.L451:
ARM GAS  /tmp/ccSuvgbr.s 			page 195


 8924              		.align	2
 8925              	.L450:
 8926 00a4 00000000 		.word	le_promisc
 8927              		.cfi_endproc
 8928              	.LFE39:
 8930              		.section	.rodata
 8931 08cb 00       		.align	2
 8932              	.LC0:
 8933 08cc 01000000 		.word	1
 8934 08d0 01000000 		.word	1
 8935 08d4 01000000 		.word	1
 8936 08d8 01000000 		.word	1
 8937              		.section	.text.cb_le_promisc,"ax",%progbits
 8938              		.align	2
 8939              		.global	cb_le_promisc
 8940              		.thumb
 8941              		.thumb_func
 8943              	cb_le_promisc:
 8944              	.LFB40:
2207:bluetooth_rxtx.c **** 
2208:bluetooth_rxtx.c **** /* le promiscuous mode */
2209:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 8945              		.loc 1 2209 0
 8946              		.cfi_startproc
 8947              		@ args = 0, pretend = 0, frame = 128
 8948              		@ frame_needed = 1, uses_anonymous_args = 0
 8949 0000 90B5     		push	{r4, r7, lr}
 8950              		.cfi_def_cfa_offset 12
 8951              		.cfi_offset 4, -12
 8952              		.cfi_offset 7, -8
 8953              		.cfi_offset 14, -4
 8954 0002 A1B0     		sub	sp, sp, #132
 8955              		.cfi_def_cfa_offset 144
 8956 0004 00AF     		add	r7, sp, #0
 8957              		.cfi_def_cfa_register 7
 8958 0006 7860     		str	r0, [r7, #4]
2210:bluetooth_rxtx.c **** 	int i, j, k;
2211:bluetooth_rxtx.c **** 	int idx;
2212:bluetooth_rxtx.c **** 
2213:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2214:bluetooth_rxtx.c **** 	char desired[4][16] = {
 8959              		.loc 1 2214 0
 8960 0008 07F11C03 		add	r3, r7, #28
 8961 000c 4022     		movs	r2, #64
 8962 000e 1846     		mov	r0, r3
 8963 0010 0021     		movs	r1, #0
 8964 0012 FFF7FEFF 		bl	memset
 8965 0016 0123     		movs	r3, #1
 8966 0018 3B77     		strb	r3, [r7, #28]
 8967 001a 0123     		movs	r3, #1
 8968 001c 87F82C30 		strb	r3, [r7, #44]
 8969 0020 0123     		movs	r3, #1
 8970 0022 87F82F30 		strb	r3, [r7, #47]
 8971 0026 0123     		movs	r3, #1
 8972 0028 87F83C30 		strb	r3, [r7, #60]
 8973 002c 0123     		movs	r3, #1
 8974 002e 87F83E30 		strb	r3, [r7, #62]
ARM GAS  /tmp/ccSuvgbr.s 			page 196


 8975 0032 0123     		movs	r3, #1
 8976 0034 87F84C30 		strb	r3, [r7, #76]
 8977 0038 0123     		movs	r3, #1
 8978 003a 87F84E30 		strb	r3, [r7, #78]
 8979 003e 0123     		movs	r3, #1
 8980 0040 87F84F30 		strb	r3, [r7, #79]
2215:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2216:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2217:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2218:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2219:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2220:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2221:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2222:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2223:bluetooth_rxtx.c **** 	};
2224:bluetooth_rxtx.c **** 
2225:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 8981              		.loc 1 2225 0
 8982 0044 0023     		movs	r3, #0
 8983 0046 FB67     		str	r3, [r7, #124]
 8984 0048 41E0     		b	.L453
 8985              	.L456:
2226:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 8986              		.loc 1 2226 0
 8987 004a A74B     		ldr	r3, .L483
 8988 004c 1B88     		ldrh	r3, [r3]	@ movhi
 8989 004e 9BB2     		uxth	r3, r3
 8990 0050 DBB2     		uxtb	r3, r3
 8991 0052 623B     		subs	r3, r3, #98
 8992 0054 DBB2     		uxtb	r3, r3
 8993 0056 1846     		mov	r0, r3
 8994 0058 FFF7FEFF 		bl	btle_channel_index
 8995 005c 0346     		mov	r3, r0
 8996 005e 1A46     		mov	r2, r3
 8997 0060 A24B     		ldr	r3, .L483+4
 8998 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 8999 0064 3B67     		str	r3, [r7, #112]
2227:bluetooth_rxtx.c **** 
2228:bluetooth_rxtx.c **** 		// whiten the desired data
2229:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 9000              		.loc 1 2229 0
 9001 0066 0023     		movs	r3, #0
 9002 0068 BB67     		str	r3, [r7, #120]
 9003 006a 2AE0     		b	.L454
 9004              	.L455:
2230:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9005              		.loc 1 2230 0 discriminator 3
 9006 006c FB6F     		ldr	r3, [r7, #124]
 9007 006e 1B01     		lsls	r3, r3, #4
 9008 0070 07F18002 		add	r2, r7, #128
 9009 0074 1A44     		add	r2, r2, r3
 9010 0076 BB6F     		ldr	r3, [r7, #120]
 9011 0078 1344     		add	r3, r3, r2
 9012 007a 643B     		subs	r3, r3, #100
 9013 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9014 007e 9C49     		ldr	r1, .L483+8
 9015 0080 3B6F     		ldr	r3, [r7, #112]
ARM GAS  /tmp/ccSuvgbr.s 			page 197


 9016 0082 0B44     		add	r3, r3, r1
 9017 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9018 0086 5340     		eors	r3, r3, r2
 9019 0088 D9B2     		uxtb	r1, r3
 9020 008a FB6F     		ldr	r3, [r7, #124]
 9021 008c 1B01     		lsls	r3, r3, #4
 9022 008e 07F18002 		add	r2, r7, #128
 9023 0092 1A44     		add	r2, r2, r3
 9024 0094 BB6F     		ldr	r3, [r7, #120]
 9025 0096 1344     		add	r3, r3, r2
 9026 0098 643B     		subs	r3, r3, #100
 9027 009a 0A46     		mov	r2, r1
 9028 009c 1A70     		strb	r2, [r3]
2231:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 9029              		.loc 1 2231 0 discriminator 3
 9030 009e 3B6F     		ldr	r3, [r7, #112]
 9031 00a0 0133     		adds	r3, r3, #1
 9032 00a2 1946     		mov	r1, r3
 9033 00a4 934B     		ldr	r3, .L483+12
 9034 00a6 A1FB0323 		umull	r2, r3, r1, r3
 9035 00aa C81A     		subs	r0, r1, r3
 9036 00ac 4008     		lsrs	r0, r0, #1
 9037 00ae 0344     		add	r3, r3, r0
 9038 00b0 9A09     		lsrs	r2, r3, #6
 9039 00b2 1346     		mov	r3, r2
 9040 00b4 DB01     		lsls	r3, r3, #7
 9041 00b6 9B1A     		subs	r3, r3, r2
 9042 00b8 CA1A     		subs	r2, r1, r3
 9043 00ba 3A67     		str	r2, [r7, #112]
2229:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9044              		.loc 1 2229 0 discriminator 3
 9045 00bc BB6F     		ldr	r3, [r7, #120]
 9046 00be 0133     		adds	r3, r3, #1
 9047 00c0 BB67     		str	r3, [r7, #120]
 9048              	.L454:
2229:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9049              		.loc 1 2229 0 is_stmt 0 discriminator 1
 9050 00c2 BB6F     		ldr	r3, [r7, #120]
 9051 00c4 0F2B     		cmp	r3, #15
 9052 00c6 D1DD     		ble	.L455
2225:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9053              		.loc 1 2225 0 is_stmt 1 discriminator 2
 9054 00c8 FB6F     		ldr	r3, [r7, #124]
 9055 00ca 0133     		adds	r3, r3, #1
 9056 00cc FB67     		str	r3, [r7, #124]
 9057              	.L453:
2225:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9058              		.loc 1 2225 0 is_stmt 0 discriminator 1
 9059 00ce FB6F     		ldr	r3, [r7, #124]
 9060 00d0 032B     		cmp	r3, #3
 9061 00d2 BADD     		ble	.L456
2232:bluetooth_rxtx.c **** 		}
2233:bluetooth_rxtx.c **** 	}
2234:bluetooth_rxtx.c **** 
2235:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2236:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 9062              		.loc 1 2236 0 is_stmt 1
ARM GAS  /tmp/ccSuvgbr.s 			page 198


 9063 00d4 2023     		movs	r3, #32
 9064 00d6 FB67     		str	r3, [r7, #124]
 9065 00d8 D5E0     		b	.L457
 9066              	.L477:
 9067              	.LBB25:
2237:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9068              		.loc 1 2237 0
 9069 00da 874B     		ldr	r3, .L483+16
 9070 00dc 07F10C04 		add	r4, r7, #12
 9071 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 9072 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2238:bluetooth_rxtx.c **** 		int matching = -1;
 9073              		.loc 1 2238 0
 9074 00e6 4FF0FF33 		mov	r3, #-1
 9075 00ea FB66     		str	r3, [r7, #108]
2239:bluetooth_rxtx.c **** 
2240:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9076              		.loc 1 2240 0
 9077 00ec 0023     		movs	r3, #0
 9078 00ee BB67     		str	r3, [r7, #120]
 9079 00f0 26E0     		b	.L458
 9080              	.L463:
2241:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9081              		.loc 1 2241 0
 9082 00f2 0023     		movs	r3, #0
 9083 00f4 7B67     		str	r3, [r7, #116]
 9084 00f6 1DE0     		b	.L459
 9085              	.L462:
2242:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9086              		.loc 1 2242 0
 9087 00f8 FA6F     		ldr	r2, [r7, #124]
 9088 00fa 7B6F     		ldr	r3, [r7, #116]
 9089 00fc 1344     		add	r3, r3, r2
 9090 00fe 1A46     		mov	r2, r3
 9091 0100 7B68     		ldr	r3, [r7, #4]
 9092 0102 1344     		add	r3, r3, r2
 9093 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9094 0106 BB6F     		ldr	r3, [r7, #120]
 9095 0108 1B01     		lsls	r3, r3, #4
 9096 010a 07F18001 		add	r1, r7, #128
 9097 010e 1944     		add	r1, r1, r3
 9098 0110 7B6F     		ldr	r3, [r7, #116]
 9099 0112 0B44     		add	r3, r3, r1
 9100 0114 643B     		subs	r3, r3, #100
 9101 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9102 0118 9A42     		cmp	r2, r3
 9103 011a 08D0     		beq	.L460
2243:bluetooth_rxtx.c **** 					ok[j] = 0;
 9104              		.loc 1 2243 0
 9105 011c BB6F     		ldr	r3, [r7, #120]
 9106 011e 9B00     		lsls	r3, r3, #2
 9107 0120 07F18002 		add	r2, r7, #128
 9108 0124 1344     		add	r3, r3, r2
 9109 0126 0022     		movs	r2, #0
 9110 0128 43F8742C 		str	r2, [r3, #-116]
2244:bluetooth_rxtx.c **** 					break;
 9111              		.loc 1 2244 0
ARM GAS  /tmp/ccSuvgbr.s 			page 199


 9112 012c 05E0     		b	.L461
 9113              	.L460:
2241:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9114              		.loc 1 2241 0 discriminator 2
 9115 012e 7B6F     		ldr	r3, [r7, #116]
 9116 0130 0133     		adds	r3, r3, #1
 9117 0132 7B67     		str	r3, [r7, #116]
 9118              	.L459:
2241:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9119              		.loc 1 2241 0 is_stmt 0 discriminator 1
 9120 0134 7B6F     		ldr	r3, [r7, #116]
 9121 0136 0F2B     		cmp	r3, #15
 9122 0138 DEDD     		ble	.L462
 9123              	.L461:
2240:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9124              		.loc 1 2240 0 is_stmt 1 discriminator 2
 9125 013a BB6F     		ldr	r3, [r7, #120]
 9126 013c 0133     		adds	r3, r3, #1
 9127 013e BB67     		str	r3, [r7, #120]
 9128              	.L458:
2240:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9129              		.loc 1 2240 0 is_stmt 0 discriminator 1
 9130 0140 BB6F     		ldr	r3, [r7, #120]
 9131 0142 032B     		cmp	r3, #3
 9132 0144 D5DD     		ble	.L463
2245:bluetooth_rxtx.c **** 				}
2246:bluetooth_rxtx.c **** 			}
2247:bluetooth_rxtx.c **** 		}
2248:bluetooth_rxtx.c **** 
2249:bluetooth_rxtx.c **** 		// see if any match
2250:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9133              		.loc 1 2250 0 is_stmt 1
 9134 0146 0023     		movs	r3, #0
 9135 0148 BB67     		str	r3, [r7, #120]
 9136 014a 0EE0     		b	.L464
 9137              	.L467:
2251:bluetooth_rxtx.c **** 			if (ok[j]) {
 9138              		.loc 1 2251 0
 9139 014c BB6F     		ldr	r3, [r7, #120]
 9140 014e 9B00     		lsls	r3, r3, #2
 9141 0150 07F18002 		add	r2, r7, #128
 9142 0154 1344     		add	r3, r3, r2
 9143 0156 53F8743C 		ldr	r3, [r3, #-116]
 9144 015a 002B     		cmp	r3, #0
 9145 015c 02D0     		beq	.L465
2252:bluetooth_rxtx.c **** 				matching = j;
 9146              		.loc 1 2252 0
 9147 015e BB6F     		ldr	r3, [r7, #120]
 9148 0160 FB66     		str	r3, [r7, #108]
2253:bluetooth_rxtx.c **** 				break;
 9149              		.loc 1 2253 0
 9150 0162 05E0     		b	.L466
 9151              	.L465:
2250:bluetooth_rxtx.c **** 			if (ok[j]) {
 9152              		.loc 1 2250 0 discriminator 2
 9153 0164 BB6F     		ldr	r3, [r7, #120]
 9154 0166 0133     		adds	r3, r3, #1
ARM GAS  /tmp/ccSuvgbr.s 			page 200


 9155 0168 BB67     		str	r3, [r7, #120]
 9156              	.L464:
2250:bluetooth_rxtx.c **** 			if (ok[j]) {
 9157              		.loc 1 2250 0 is_stmt 0 discriminator 1
 9158 016a BB6F     		ldr	r3, [r7, #120]
 9159 016c 032B     		cmp	r3, #3
 9160 016e EDDD     		ble	.L467
 9161              	.L466:
2254:bluetooth_rxtx.c **** 			}
2255:bluetooth_rxtx.c **** 		}
2256:bluetooth_rxtx.c **** 
2257:bluetooth_rxtx.c **** 		// skip if no match
2258:bluetooth_rxtx.c **** 		if (matching < 0)
 9162              		.loc 1 2258 0 is_stmt 1
 9163 0170 FB6E     		ldr	r3, [r7, #108]
 9164 0172 002B     		cmp	r3, #0
 9165 0174 C0F28480 		blt	.L469
2259:bluetooth_rxtx.c **** 			continue;
2260:bluetooth_rxtx.c **** 
2261:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2262:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9166              		.loc 1 2262 0
 9167 0178 5B4B     		ldr	r3, .L483
 9168 017a 1B88     		ldrh	r3, [r3]	@ movhi
 9169 017c 9BB2     		uxth	r3, r3
 9170 017e DBB2     		uxtb	r3, r3
 9171 0180 623B     		subs	r3, r3, #98
 9172 0182 DBB2     		uxtb	r3, r3
 9173 0184 1846     		mov	r0, r3
 9174 0186 FFF7FEFF 		bl	btle_channel_index
 9175 018a 0346     		mov	r3, r0
 9176 018c 1A46     		mov	r2, r3
 9177 018e 574B     		ldr	r3, .L483+4
 9178 0190 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9179 0192 3B67     		str	r3, [r7, #112]
2263:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 9180              		.loc 1 2263 0
 9181 0194 0023     		movs	r3, #0
 9182 0196 BB67     		str	r3, [r7, #120]
 9183 0198 4CE0     		b	.L470
 9184              	.L476:
 9185              	.LBB26:
2264:bluetooth_rxtx.c **** 			u8 byte = 0;
 9186              		.loc 1 2264 0
 9187 019a 0023     		movs	r3, #0
 9188 019c 87F86B30 		strb	r3, [r7, #107]
2265:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 9189              		.loc 1 2265 0
 9190 01a0 0023     		movs	r3, #0
 9191 01a2 7B67     		str	r3, [r7, #116]
 9192 01a4 39E0     		b	.L471
 9193              	.L475:
 9194              	.LBB27:
2266:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9195              		.loc 1 2266 0
 9196 01a6 BB6F     		ldr	r3, [r7, #120]
 9197 01a8 DA00     		lsls	r2, r3, #3
ARM GAS  /tmp/ccSuvgbr.s 			page 201


 9198 01aa 7B6F     		ldr	r3, [r7, #116]
 9199 01ac 1A44     		add	r2, r2, r3
 9200 01ae FB6F     		ldr	r3, [r7, #124]
 9201 01b0 1344     		add	r3, r3, r2
 9202 01b2 203B     		subs	r3, r3, #32
 9203 01b4 3B66     		str	r3, [r7, #96]
2267:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 9204              		.loc 1 2267 0
 9205 01b6 3B6E     		ldr	r3, [r7, #96]
 9206 01b8 B3F5487F 		cmp	r3, #800
 9207 01bc 00DB     		blt	.L472
 9208 01be 2FE0     		b	.L473
 9209              	.L472:
2268:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 9210              		.loc 1 2268 0
 9211 01c0 3B6E     		ldr	r3, [r7, #96]
 9212 01c2 7A68     		ldr	r2, [r7, #4]
 9213 01c4 1344     		add	r3, r3, r2
 9214 01c6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9215 01c8 7B66     		str	r3, [r7, #100]
2269:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 9216              		.loc 1 2269 0
 9217 01ca BB6F     		ldr	r3, [r7, #120]
 9218 01cc 032B     		cmp	r3, #3
 9219 01ce 16DD     		ble	.L474
2270:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 9220              		.loc 1 2270 0
 9221 01d0 474A     		ldr	r2, .L483+8
 9222 01d2 3B6F     		ldr	r3, [r7, #112]
 9223 01d4 1344     		add	r3, r3, r2
 9224 01d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9225 01d8 1A46     		mov	r2, r3
 9226 01da 7B6E     		ldr	r3, [r7, #100]
 9227 01dc 5340     		eors	r3, r3, r2
 9228 01de 7B66     		str	r3, [r7, #100]
2271:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 9229              		.loc 1 2271 0
 9230 01e0 3B6F     		ldr	r3, [r7, #112]
 9231 01e2 0133     		adds	r3, r3, #1
 9232 01e4 1946     		mov	r1, r3
 9233 01e6 434B     		ldr	r3, .L483+12
 9234 01e8 A1FB0323 		umull	r2, r3, r1, r3
 9235 01ec C81A     		subs	r0, r1, r3
 9236 01ee 4008     		lsrs	r0, r0, #1
 9237 01f0 0344     		add	r3, r3, r0
 9238 01f2 9A09     		lsrs	r2, r3, #6
 9239 01f4 1346     		mov	r3, r2
 9240 01f6 DB01     		lsls	r3, r3, #7
 9241 01f8 9B1A     		subs	r3, r3, r2
 9242 01fa CA1A     		subs	r2, r1, r3
 9243 01fc 3A67     		str	r2, [r7, #112]
 9244              	.L474:
2272:bluetooth_rxtx.c **** 				}
2273:bluetooth_rxtx.c **** 				byte |= bit << k;
 9245              		.loc 1 2273 0 discriminator 2
 9246 01fe 7A6E     		ldr	r2, [r7, #100]
 9247 0200 7B6F     		ldr	r3, [r7, #116]
ARM GAS  /tmp/ccSuvgbr.s 			page 202


 9248 0202 02FA03F3 		lsl	r3, r2, r3
 9249 0206 DAB2     		uxtb	r2, r3
 9250 0208 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 9251 020c 1343     		orrs	r3, r3, r2
 9252 020e DBB2     		uxtb	r3, r3
 9253 0210 87F86B30 		strb	r3, [r7, #107]
 9254              	.LBE27:
2265:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9255              		.loc 1 2265 0 discriminator 2
 9256 0214 7B6F     		ldr	r3, [r7, #116]
 9257 0216 0133     		adds	r3, r3, #1
 9258 0218 7B67     		str	r3, [r7, #116]
 9259              	.L471:
2265:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9260              		.loc 1 2265 0 is_stmt 0 discriminator 1
 9261 021a 7B6F     		ldr	r3, [r7, #116]
 9262 021c 072B     		cmp	r3, #7
 9263 021e C2DD     		ble	.L475
 9264              	.L473:
2274:bluetooth_rxtx.c **** 			}
2275:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 9265              		.loc 1 2275 0 is_stmt 1 discriminator 2
 9266 0220 364B     		ldr	r3, .L483+20
 9267 0222 1A68     		ldr	r2, [r3]
 9268 0224 BB6F     		ldr	r3, [r7, #120]
 9269 0226 1344     		add	r3, r3, r2
 9270 0228 97F86B20 		ldrb	r2, [r7, #107]
 9271 022c 1A70     		strb	r2, [r3]
 9272              	.LBE26:
2263:bluetooth_rxtx.c **** 			u8 byte = 0;
 9273              		.loc 1 2263 0 discriminator 2
 9274 022e BB6F     		ldr	r3, [r7, #120]
 9275 0230 0133     		adds	r3, r3, #1
 9276 0232 BB67     		str	r3, [r7, #120]
 9277              	.L470:
2263:bluetooth_rxtx.c **** 			u8 byte = 0;
 9278              		.loc 1 2263 0 is_stmt 0 discriminator 1
 9279 0234 BB6F     		ldr	r3, [r7, #120]
 9280 0236 092B     		cmp	r3, #9
 9281 0238 AFDD     		ble	.L476
2276:bluetooth_rxtx.c **** 		}
2277:bluetooth_rxtx.c **** 
2278:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 9282              		.loc 1 2278 0 is_stmt 1
 9283 023a 304B     		ldr	r3, .L483+20
 9284 023c 1B68     		ldr	r3, [r3]
 9285 023e 0333     		adds	r3, r3, #3
 9286 0240 1B78     		ldrb	r3, [r3]
 9287 0242 DBB2     		uxtb	r3, r3
 9288 0244 1A06     		lsls	r2, r3, #24
2279:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9289              		.loc 1 2279 0
 9290 0246 2D4B     		ldr	r3, .L483+20
 9291 0248 1B68     		ldr	r3, [r3]
 9292 024a 0233     		adds	r3, r3, #2
 9293 024c 1B78     		ldrb	r3, [r3]
 9294 024e DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccSuvgbr.s 			page 203


 9295 0250 1B04     		lsls	r3, r3, #16
2278:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9296              		.loc 1 2278 0
 9297 0252 1A43     		orrs	r2, r2, r3
2280:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9298              		.loc 1 2280 0
 9299 0254 294B     		ldr	r3, .L483+20
 9300 0256 1B68     		ldr	r3, [r3]
 9301 0258 0133     		adds	r3, r3, #1
 9302 025a 1B78     		ldrb	r3, [r3]
 9303 025c DBB2     		uxtb	r3, r3
 9304 025e 1B02     		lsls	r3, r3, #8
2279:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9305              		.loc 1 2279 0
 9306 0260 1343     		orrs	r3, r3, r2
2281:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 9307              		.loc 1 2281 0
 9308 0262 264A     		ldr	r2, .L483+20
 9309 0264 1268     		ldr	r2, [r2]
 9310 0266 1278     		ldrb	r2, [r2]
 9311 0268 D2B2     		uxtb	r2, r2
2280:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9312              		.loc 1 2280 0
 9313 026a 1343     		orrs	r3, r3, r2
2278:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9314              		.loc 1 2278 0
 9315 026c FB65     		str	r3, [r7, #92]
2282:bluetooth_rxtx.c **** 		see_aa(aa);
 9316              		.loc 1 2282 0
 9317 026e F86D     		ldr	r0, [r7, #92]
 9318 0270 FFF7FEFF 		bl	see_aa
2283:bluetooth_rxtx.c **** 
2284:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t*)idle_rxbuf);
 9319              		.loc 1 2284 0
 9320 0274 214B     		ldr	r3, .L483+20
 9321 0276 1B68     		ldr	r3, [r3]
 9322 0278 0120     		movs	r0, #1
 9323 027a 1946     		mov	r1, r3
 9324 027c FFF7FEFF 		bl	enqueue
 9325              	.L469:
 9326              	.LBE25:
2236:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9327              		.loc 1 2236 0 discriminator 2
 9328 0280 FB6F     		ldr	r3, [r7, #124]
 9329 0282 0133     		adds	r3, r3, #1
 9330 0284 FB67     		str	r3, [r7, #124]
 9331              	.L457:
2236:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9332              		.loc 1 2236 0 is_stmt 0 discriminator 1
 9333 0286 FB6F     		ldr	r3, [r7, #124]
 9334 0288 B3F53C7F 		cmp	r3, #752
 9335 028c FFF625AF 		blt	.L477
2285:bluetooth_rxtx.c **** 
2286:bluetooth_rxtx.c **** 	}
2287:bluetooth_rxtx.c **** 
2288:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2289:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
ARM GAS  /tmp/ccSuvgbr.s 			page 204


 9336              		.loc 1 2289 0 is_stmt 1
 9337 0290 0023     		movs	r3, #0
 9338 0292 FB67     		str	r3, [r7, #124]
 9339 0294 20E0     		b	.L478
 9340              	.L481:
2290:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9341              		.loc 1 2290 0
 9342 0296 1A4A     		ldr	r2, .L483+24
 9343 0298 FB6F     		ldr	r3, [r7, #124]
 9344 029a DB00     		lsls	r3, r3, #3
 9345 029c 1344     		add	r3, r3, r2
 9346 029e 5B68     		ldr	r3, [r3, #4]
 9347 02a0 032B     		cmp	r3, #3
 9348 02a2 16DD     		ble	.L479
2291:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 9349              		.loc 1 2291 0
 9350 02a4 164A     		ldr	r2, .L483+24
 9351 02a6 FB6F     		ldr	r3, [r7, #124]
 9352 02a8 52F83330 		ldr	r3, [r2, r3, lsl #3]
 9353 02ac 1846     		mov	r0, r3
 9354 02ae FFF7FEFF 		bl	le_set_access_address
2292:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 9355              		.loc 1 2292 0
 9356 02b2 144B     		ldr	r3, .L483+28
 9357 02b4 144A     		ldr	r2, .L483+32
 9358 02b6 1A60     		str	r2, [r3]
2293:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 9359              		.loc 1 2293 0
 9360 02b8 144B     		ldr	r3, .L483+36
 9361 02ba 154A     		ldr	r2, .L483+40
 9362 02bc 1A60     		str	r2, [r3]
2294:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9363              		.loc 1 2294 0
 9364 02be 154B     		ldr	r3, .L483+44
 9365 02c0 0022     		movs	r2, #0
 9366 02c2 1A61     		str	r2, [r3, #16]
2295:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 9367              		.loc 1 2295 0
 9368 02c4 0020     		movs	r0, #0
 9369 02c6 1349     		ldr	r1, .L483+44
 9370 02c8 0422     		movs	r2, #4
 9371 02ca FFF7FEFF 		bl	le_promisc_state
2296:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2297:bluetooth_rxtx.c **** 			return 0;
 9372              		.loc 1 2297 0
 9373 02ce 0023     		movs	r3, #0
 9374 02d0 06E0     		b	.L482
 9375              	.L479:
2289:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9376              		.loc 1 2289 0 discriminator 2
 9377 02d2 FB6F     		ldr	r3, [r7, #124]
 9378 02d4 0133     		adds	r3, r3, #1
 9379 02d6 FB67     		str	r3, [r7, #124]
 9380              	.L478:
2289:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9381              		.loc 1 2289 0 is_stmt 0 discriminator 1
 9382 02d8 FB6F     		ldr	r3, [r7, #124]
ARM GAS  /tmp/ccSuvgbr.s 			page 205


 9383 02da 1F2B     		cmp	r3, #31
 9384 02dc DBDD     		ble	.L481
2298:bluetooth_rxtx.c **** 		}
2299:bluetooth_rxtx.c **** 	}
2300:bluetooth_rxtx.c **** 
2301:bluetooth_rxtx.c **** 	return 1;
 9385              		.loc 1 2301 0 is_stmt 1
 9386 02de 0123     		movs	r3, #1
 9387              	.L482:
2302:bluetooth_rxtx.c **** }
 9388              		.loc 1 2302 0 discriminator 1
 9389 02e0 1846     		mov	r0, r3
 9390 02e2 8437     		adds	r7, r7, #132
 9391              		.cfi_def_cfa_offset 12
 9392 02e4 BD46     		mov	sp, r7
 9393              		.cfi_def_cfa_register 13
 9394              		@ sp needed
 9395 02e6 90BD     		pop	{r4, r7, pc}
 9396              	.L484:
 9397              		.align	2
 9398              	.L483:
 9399 02e8 00000000 		.word	channel
 9400 02ec AC000000 		.word	whitening_index
 9401 02f0 2C000000 		.word	whitening
 9402 02f4 11080402 		.word	33818641
 9403 02f8 CC080000 		.word	.LC0
 9404 02fc 00000000 		.word	idle_rxbuf
 9405 0300 00000000 		.word	le_promisc
 9406 0304 00000000 		.word	data_cb
 9407 0308 00000000 		.word	cb_follow_le
 9408 030c 00000000 		.word	packet_cb
 9409 0310 00000000 		.word	promisc_follow_cb
 9410 0314 00000000 		.word	le
 9411              		.cfi_endproc
 9412              	.LFE40:
 9414              		.section	.text.bt_promisc_le,"ax",%progbits
 9415              		.align	2
 9416              		.global	bt_promisc_le
 9417              		.thumb
 9418              		.thumb_func
 9420              	bt_promisc_le:
 9421              	.LFB41:
2303:bluetooth_rxtx.c **** 
2304:bluetooth_rxtx.c **** void bt_promisc_le() {
 9422              		.loc 1 2304 0
 9423              		.cfi_startproc
 9424              		@ args = 0, pretend = 0, frame = 0
 9425              		@ frame_needed = 1, uses_anonymous_args = 0
 9426 0000 80B5     		push	{r7, lr}
 9427              		.cfi_def_cfa_offset 8
 9428              		.cfi_offset 7, -8
 9429              		.cfi_offset 14, -4
 9430 0002 00AF     		add	r7, sp, #0
 9431              		.cfi_def_cfa_register 7
2305:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 9432              		.loc 1 2305 0
 9433 0004 2CE0     		b	.L486
ARM GAS  /tmp/ccSuvgbr.s 			page 206


 9434              	.L491:
2306:bluetooth_rxtx.c **** 		reset_le_promisc();
 9435              		.loc 1 2306 0
 9436 0006 FFF7FEFF 		bl	reset_le_promisc
2307:bluetooth_rxtx.c **** 
2308:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2309:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 9437              		.loc 1 2309 0
 9438 000a 184B     		ldr	r3, .L492
 9439 000c 1B88     		ldrh	r3, [r3]	@ movhi
 9440 000e 9BB2     		uxth	r3, r3
 9441 0010 03F00103 		and	r3, r3, #1
 9442 0014 002B     		cmp	r3, #0
 9443 0016 03D0     		beq	.L487
2310:bluetooth_rxtx.c **** 			channel = 2440;
 9444              		.loc 1 2310 0
 9445 0018 144B     		ldr	r3, .L492
 9446 001a 40F68812 		movw	r2, #2440
 9447 001e 1A80     		strh	r2, [r3]	@ movhi
 9448              	.L487:
2311:bluetooth_rxtx.c **** 
2312:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2313:bluetooth_rxtx.c **** 		if (!le.target_set) {
 9449              		.loc 1 2313 0
 9450 0020 134B     		ldr	r3, .L492+4
 9451 0022 DB6B     		ldr	r3, [r3, #60]
 9452 0024 002B     		cmp	r3, #0
 9453 0026 07D1     		bne	.L488
2314:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2315:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 9454              		.loc 1 2315 0
 9455 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2316:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 9456              		.loc 1 2316 0
 9457 002c 114B     		ldr	r3, .L492+8
 9458 002e 124A     		ldr	r2, .L492+12
 9459 0030 1A60     		str	r2, [r3]
2317:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 9460              		.loc 1 2317 0
 9461 0032 0A20     		movs	r0, #10
 9462 0034 FFF7FEFF 		bl	bt_generic_le
 9463              	.L488:
2318:bluetooth_rxtx.c **** 		}
2319:bluetooth_rxtx.c **** 
2320:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2321:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 9464              		.loc 1 2321 0
 9465 0038 104B     		ldr	r3, .L492+16
 9466 003a 1B78     		ldrb	r3, [r3]
 9467 003c DBB2     		uxtb	r3, r3
 9468 003e 0A2B     		cmp	r3, #10
 9469 0040 00D0     		beq	.L489
2322:bluetooth_rxtx.c **** 			break;
 9470              		.loc 1 2322 0
 9471 0042 12E0     		b	.L485
 9472              	.L489:
2323:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccSuvgbr.s 			page 207


2324:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 9473              		.loc 1 2324 0
 9474 0044 0020     		movs	r0, #0
 9475 0046 0A49     		ldr	r1, .L492+4
 9476 0048 0422     		movs	r2, #4
 9477 004a FFF7FEFF 		bl	le_promisc_state
2325:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 9478              		.loc 1 2325 0
 9479 004e 0C4B     		ldr	r3, .L492+20
 9480 0050 0C4A     		ldr	r2, .L492+24
 9481 0052 1A60     		str	r2, [r3]
2326:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 9482              		.loc 1 2326 0
 9483 0054 064B     		ldr	r3, .L492+4
 9484 0056 0022     		movs	r2, #0
 9485 0058 1A61     		str	r2, [r3, #16]
2327:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 9486              		.loc 1 2327 0
 9487 005a 0A20     		movs	r0, #10
 9488 005c FFF7FEFF 		bl	bt_le_sync
 9489              	.L486:
2305:bluetooth_rxtx.c **** 		reset_le_promisc();
 9490              		.loc 1 2305 0
 9491 0060 064B     		ldr	r3, .L492+16
 9492 0062 1B78     		ldrb	r3, [r3]
 9493 0064 DBB2     		uxtb	r3, r3
 9494 0066 0A2B     		cmp	r3, #10
 9495 0068 CDD0     		beq	.L491
 9496              	.L485:
2328:bluetooth_rxtx.c **** 	}
2329:bluetooth_rxtx.c **** }
 9497              		.loc 1 2329 0
 9498 006a 80BD     		pop	{r7, pc}
 9499              	.L493:
 9500              		.align	2
 9501              	.L492:
 9502 006c 00000000 		.word	channel
 9503 0070 00000000 		.word	le
 9504 0074 00000000 		.word	data_cb
 9505 0078 00000000 		.word	cb_le_promisc
 9506 007c 00000000 		.word	requested_mode
 9507 0080 00000000 		.word	packet_cb
 9508 0084 00000000 		.word	promisc_follow_cb
 9509              		.cfi_endproc
 9510              	.LFE41:
 9512              		.section	.rodata
 9513              		.align	2
 9514              	.LC1:
 9515 08dc 00       		.byte	0
 9516 08dd 09       		.byte	9
 9517 08de FF       		.byte	-1
 9518 08df FF       		.byte	-1
 9519 08e0 FF       		.byte	-1
 9520 08e1 FF       		.byte	-1
 9521 08e2 FF       		.byte	-1
 9522 08e3 FF       		.byte	-1
 9523 08e4 02       		.byte	2
ARM GAS  /tmp/ccSuvgbr.s 			page 208


 9524 08e5 01       		.byte	1
 9525 08e6 05       		.byte	5
 9526 08e7 FF       		.byte	-1
 9527 08e8 FF       		.byte	-1
 9528 08e9 FF       		.byte	-1
 9529              		.section	.text.bt_slave_le,"ax",%progbits
 9530              		.align	2
 9531              		.global	bt_slave_le
 9532              		.thumb
 9533              		.thumb_func
 9535              	bt_slave_le:
 9536              	.LFB42:
2330:bluetooth_rxtx.c **** 
2331:bluetooth_rxtx.c **** void bt_slave_le() {
 9537              		.loc 1 2331 0
 9538              		.cfi_startproc
 9539              		@ args = 0, pretend = 0, frame = 32
 9540              		@ frame_needed = 1, uses_anonymous_args = 0
 9541 0000 90B5     		push	{r4, r7, lr}
 9542              		.cfi_def_cfa_offset 12
 9543              		.cfi_offset 4, -12
 9544              		.cfi_offset 7, -8
 9545              		.cfi_offset 14, -4
 9546 0002 89B0     		sub	sp, sp, #36
 9547              		.cfi_def_cfa_offset 48
 9548 0004 00AF     		add	r7, sp, #0
 9549              		.cfi_def_cfa_register 7
2332:bluetooth_rxtx.c **** 	u32 calc_crc;
2333:bluetooth_rxtx.c **** 	int i;
2334:bluetooth_rxtx.c **** 
2335:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 9550              		.loc 1 2335 0
 9551 0006 354A     		ldr	r2, .L499
 9552 0008 3B1D     		adds	r3, r7, #4
 9553 000a 1446     		mov	r4, r2
 9554 000c 2068     		ldr	r0, [r4]	@ unaligned
 9555 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 9556 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 9557 0012 07C3     		stmia	r3!, {r0, r1, r2}
 9558 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 9559 0016 1A80     		strh	r2, [r3]	@ unaligned
2336:bluetooth_rxtx.c **** 		// LL header
2337:bluetooth_rxtx.c **** 		0x00, 0x09,
2338:bluetooth_rxtx.c **** 
2339:bluetooth_rxtx.c **** 		// advertising address
2340:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2341:bluetooth_rxtx.c **** 
2342:bluetooth_rxtx.c **** 		// advertising data
2343:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2344:bluetooth_rxtx.c **** 
2345:bluetooth_rxtx.c **** 		// CRC (calc)
2346:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2347:bluetooth_rxtx.c **** 	};
2348:bluetooth_rxtx.c **** 
2349:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 9560              		.loc 1 2349 0
 9561 0018 0B23     		movs	r3, #11
ARM GAS  /tmp/ccSuvgbr.s 			page 209


 9562 001a FB76     		strb	r3, [r7, #27]
2350:bluetooth_rxtx.c **** 
2351:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2352:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 9563              		.loc 1 2352 0
 9564 001c 0023     		movs	r3, #0
 9565 001e FB61     		str	r3, [r7, #28]
 9566 0020 0EE0     		b	.L495
 9567              	.L496:
2353:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9568              		.loc 1 2353 0 discriminator 3
 9569 0022 FB69     		ldr	r3, [r7, #28]
 9570 0024 0233     		adds	r3, r3, #2
 9571 0026 FA69     		ldr	r2, [r7, #28]
 9572 0028 C2F10502 		rsb	r2, r2, #5
 9573 002c 2C49     		ldr	r1, .L499+4
 9574 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9575 0030 07F12001 		add	r1, r7, #32
 9576 0034 0B44     		add	r3, r3, r1
 9577 0036 03F81C2C 		strb	r2, [r3, #-28]
2352:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9578              		.loc 1 2352 0 discriminator 3
 9579 003a FB69     		ldr	r3, [r7, #28]
 9580 003c 0133     		adds	r3, r3, #1
 9581 003e FB61     		str	r3, [r7, #28]
 9582              	.L495:
2352:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9583              		.loc 1 2352 0 is_stmt 0 discriminator 1
 9584 0040 FB69     		ldr	r3, [r7, #28]
 9585 0042 052B     		cmp	r3, #5
 9586 0044 EDDD     		ble	.L496
2354:bluetooth_rxtx.c **** 
2355:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 9587              		.loc 1 2355 0 is_stmt 1
 9588 0046 274B     		ldr	r3, .L499+8
 9589 0048 D968     		ldr	r1, [r3, #12]
 9590 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9591 004c 3A1D     		adds	r2, r7, #4
 9592 004e 0846     		mov	r0, r1
 9593 0050 1146     		mov	r1, r2
 9594 0052 1A46     		mov	r2, r3
 9595 0054 FFF7FEFF 		bl	btle_calc_crc
 9596 0058 7861     		str	r0, [r7, #20]
2356:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 9597              		.loc 1 2356 0
 9598 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9599 005c 7A69     		ldr	r2, [r7, #20]
 9600 005e D2B2     		uxtb	r2, r2
 9601 0060 07F12001 		add	r1, r7, #32
 9602 0064 0B44     		add	r3, r3, r1
 9603 0066 03F81C2C 		strb	r2, [r3, #-28]
2357:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 9604              		.loc 1 2357 0
 9605 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9606 006c 0133     		adds	r3, r3, #1
 9607 006e 7A69     		ldr	r2, [r7, #20]
 9608 0070 120A     		lsrs	r2, r2, #8
ARM GAS  /tmp/ccSuvgbr.s 			page 210


 9609 0072 D2B2     		uxtb	r2, r2
 9610 0074 07F12001 		add	r1, r7, #32
 9611 0078 0B44     		add	r3, r3, r1
 9612 007a 03F81C2C 		strb	r2, [r3, #-28]
2358:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 9613              		.loc 1 2358 0
 9614 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9615 0080 0233     		adds	r3, r3, #2
 9616 0082 7A69     		ldr	r2, [r7, #20]
 9617 0084 120C     		lsrs	r2, r2, #16
 9618 0086 D2B2     		uxtb	r2, r2
 9619 0088 07F12001 		add	r1, r7, #32
 9620 008c 0B44     		add	r3, r3, r1
 9621 008e 03F81C2C 		strb	r2, [r3, #-28]
2359:bluetooth_rxtx.c **** 
2360:bluetooth_rxtx.c **** 	// spam advertising packets
2361:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 9622              		.loc 1 2361 0
 9623 0092 1BE0     		b	.L497
 9624              	.L498:
2362:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9625              		.loc 1 2362 0
 9626 0094 144B     		ldr	r3, .L499+12
 9627 0096 4FF08072 		mov	r2, #16777216
 9628 009a 1A60     		str	r2, [r3]
2363:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 9629              		.loc 1 2363 0
 9630 009c 124B     		ldr	r3, .L499+12
 9631 009e 4FF08062 		mov	r2, #67108864
 9632 00a2 1A60     		str	r2, [r3]
2364:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 9633              		.loc 1 2364 0
 9634 00a4 FB7E     		ldrb	r3, [r7, #27]
 9635 00a6 0333     		adds	r3, r3, #3
 9636 00a8 DAB2     		uxtb	r2, r3
 9637 00aa 3B1D     		adds	r3, r7, #4
 9638 00ac 0F48     		ldr	r0, .L499+16
 9639 00ae 1146     		mov	r1, r2
 9640 00b0 1A46     		mov	r2, r3
 9641 00b2 FFF7FEFF 		bl	le_transmit
2365:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 9642              		.loc 1 2365 0
 9643 00b6 0E4B     		ldr	r3, .L499+20
 9644 00b8 4FF08072 		mov	r2, #16777216
 9645 00bc 1A60     		str	r2, [r3]
2366:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 9646              		.loc 1 2366 0
 9647 00be 0C4B     		ldr	r3, .L499+20
 9648 00c0 4FF08062 		mov	r2, #67108864
 9649 00c4 1A60     		str	r2, [r3]
2367:bluetooth_rxtx.c **** 		msleep(100);
 9650              		.loc 1 2367 0
 9651 00c6 6420     		movs	r0, #100
 9652 00c8 FFF7FEFF 		bl	msleep
 9653              	.L497:
2361:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9654              		.loc 1 2361 0
ARM GAS  /tmp/ccSuvgbr.s 			page 211


 9655 00cc 094B     		ldr	r3, .L499+24
 9656 00ce 1B78     		ldrb	r3, [r3]
 9657 00d0 DBB2     		uxtb	r3, r3
 9658 00d2 0C2B     		cmp	r3, #12
 9659 00d4 DED0     		beq	.L498
2368:bluetooth_rxtx.c **** 	}
2369:bluetooth_rxtx.c **** }
 9660              		.loc 1 2369 0
 9661 00d6 2437     		adds	r7, r7, #36
 9662              		.cfi_def_cfa_offset 12
 9663 00d8 BD46     		mov	sp, r7
 9664              		.cfi_def_cfa_register 13
 9665              		@ sp needed
 9666 00da 90BD     		pop	{r4, r7, pc}
 9667              	.L500:
 9668              		.align	2
 9669              	.L499:
 9670 00dc DC080000 		.word	.LC1
 9671 00e0 00000000 		.word	slave_mac_address
 9672 00e4 00000000 		.word	le
 9673 00e8 80E100E0 		.word	-536813184
 9674 00ec D6BE898E 		.word	-1903575338
 9675 00f0 00E100E0 		.word	-536813312
 9676 00f4 00000000 		.word	requested_mode
 9677              		.cfi_endproc
 9678              	.LFE42:
 9680              		.section	.text.specan,"ax",%progbits
 9681              		.align	2
 9682              		.global	specan
 9683              		.thumb
 9684              		.thumb_func
 9686              	specan:
 9687              	.LFB43:
2370:bluetooth_rxtx.c **** 
2371:bluetooth_rxtx.c **** /* spectrum analysis */
2372:bluetooth_rxtx.c **** void specan()
2373:bluetooth_rxtx.c **** {
 9688              		.loc 1 2373 0
 9689              		.cfi_startproc
 9690              		@ args = 0, pretend = 0, frame = 64
 9691              		@ frame_needed = 1, uses_anonymous_args = 0
 9692 0000 90B5     		push	{r4, r7, lr}
 9693              		.cfi_def_cfa_offset 12
 9694              		.cfi_offset 4, -12
 9695              		.cfi_offset 7, -8
 9696              		.cfi_offset 14, -4
 9697 0002 91B0     		sub	sp, sp, #68
 9698              		.cfi_def_cfa_offset 80
 9699 0004 00AF     		add	r7, sp, #0
 9700              		.cfi_def_cfa_register 7
2374:bluetooth_rxtx.c **** 	u16 f;
2375:bluetooth_rxtx.c **** 	u8 i = 0;
 9701              		.loc 1 2375 0
 9702 0006 0023     		movs	r3, #0
 9703 0008 87F83D30 		strb	r3, [r7, #61]
2376:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2377:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccSuvgbr.s 			page 212


2378:bluetooth_rxtx.c **** 	RXLED_SET;
 9704              		.loc 1 2378 0
 9705 000c 594B     		ldr	r3, .L512
 9706 000e 1022     		movs	r2, #16
 9707 0010 1A60     		str	r2, [r3]
2379:bluetooth_rxtx.c **** 
2380:bluetooth_rxtx.c **** 	queue_init();
 9708              		.loc 1 2380 0
 9709 0012 FFF7FEFF 		bl	queue_init
2381:bluetooth_rxtx.c **** 
2382:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2383:bluetooth_rxtx.c **** 	PAEN_SET;
 9710              		.loc 1 2383 0
 9711 0016 584B     		ldr	r3, .L512+4
 9712 0018 8022     		movs	r2, #128
 9713 001a 1A60     		str	r2, [r3]
2384:bluetooth_rxtx.c **** 	//HGM_SET;
2385:bluetooth_rxtx.c **** #endif
2386:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9714              		.loc 1 2386 0
 9715 001c 1220     		movs	r0, #18
 9716 001e 42F62231 		movw	r1, #11042
 9717 0022 FFF7FEFF 		bl	cc2400_set
2387:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 9718              		.loc 1 2387 0
 9719 0026 1420     		movs	r0, #20
 9720 0028 41F24B31 		movw	r1, #4939
 9721 002c FFF7FEFF 		bl	cc2400_set
2388:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 9722              		.loc 1 2388 0
 9723 0030 2020     		movs	r0, #32
 9724 0032 40F20111 		movw	r1, #257
 9725 0036 FFF7FEFF 		bl	cc2400_set
2389:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 9726              		.loc 1 2389 0
 9727 003a 0320     		movs	r0, #3
 9728 003c 2921     		movs	r1, #41
 9729 003e FFF7FEFF 		bl	cc2400_set
2390:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2391:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9730              		.loc 1 2391 0
 9731 0042 00BF     		nop
 9732              	.L502:
 9733              		.loc 1 2391 0 is_stmt 0 discriminator 1
 9734 0044 FFF7FEFF 		bl	cc2400_status
 9735 0048 0346     		mov	r3, r0
 9736 004a 03F04003 		and	r3, r3, #64
 9737 004e 002B     		cmp	r3, #0
 9738 0050 F8D0     		beq	.L502
2392:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9739              		.loc 1 2392 0 is_stmt 1
 9740 0052 00BF     		nop
 9741              	.L503:
 9742              		.loc 1 2392 0 is_stmt 0 discriminator 1
 9743 0054 FFF7FEFF 		bl	cc2400_status
 9744 0058 0346     		mov	r3, r0
 9745 005a 03F00403 		and	r3, r3, #4
ARM GAS  /tmp/ccSuvgbr.s 			page 213


 9746 005e 002B     		cmp	r3, #0
 9747 0060 F8D1     		bne	.L503
2393:bluetooth_rxtx.c **** 
2394:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 9748              		.loc 1 2394 0 is_stmt 1
 9749 0062 7AE0     		b	.L504
 9750              	.L511:
2395:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9751              		.loc 1 2395 0
 9752 0064 454B     		ldr	r3, .L512+8
 9753 0066 1B88     		ldrh	r3, [r3]	@ movhi
 9754 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 9755 006a 6FE0     		b	.L505
 9756              	.L510:
 9757              	.LBB28:
2396:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9758              		.loc 1 2396 0
 9759 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 9760 006e 013B     		subs	r3, r3, #1
 9761 0070 9BB2     		uxth	r3, r3
 9762 0072 0220     		movs	r0, #2
 9763 0074 1946     		mov	r1, r3
 9764 0076 FFF7FEFF 		bl	cc2400_set
2397:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 9765              		.loc 1 2397 0
 9766 007a 6120     		movs	r0, #97
 9767 007c FFF7FEFF 		bl	cc2400_strobe
2398:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 9768              		.loc 1 2398 0
 9769 0080 00BF     		nop
 9770              	.L506:
 9771              		.loc 1 2398 0 is_stmt 0 discriminator 1
 9772 0082 FFF7FEFF 		bl	cc2400_status
 9773 0086 0346     		mov	r3, r0
 9774 0088 03F00403 		and	r3, r3, #4
 9775 008c 002B     		cmp	r3, #0
 9776 008e F8D0     		beq	.L506
2399:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9777              		.loc 1 2399 0 is_stmt 1
 9778 0090 6220     		movs	r0, #98
 9779 0092 FFF7FEFF 		bl	cc2400_strobe
2400:bluetooth_rxtx.c **** 
2401:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2402:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 9780              		.loc 1 2402 0
 9781 0096 4FF4FA73 		mov	r3, #500
 9782 009a 7B60     		str	r3, [r7, #4]
 9783 009c 00BF     		nop
 9784              	.L507:
 9785              		.loc 1 2402 0 is_stmt 0 discriminator 2
 9786 009e 7B68     		ldr	r3, [r7, #4]
 9787 00a0 013B     		subs	r3, r3, #1
 9788 00a2 7B60     		str	r3, [r7, #4]
 9789 00a4 002B     		cmp	r3, #0
 9790 00a6 FAD1     		bne	.L507
2403:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9791              		.loc 1 2403 0 is_stmt 1
ARM GAS  /tmp/ccSuvgbr.s 			page 214


 9792 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 9793 00ac 1346     		mov	r3, r2
 9794 00ae 5B00     		lsls	r3, r3, #1
 9795 00b0 1344     		add	r3, r3, r2
 9796 00b2 FA8F     		ldrh	r2, [r7, #62]
 9797 00b4 120A     		lsrs	r2, r2, #8
 9798 00b6 92B2     		uxth	r2, r2
 9799 00b8 D2B2     		uxtb	r2, r2
 9800 00ba 07F14001 		add	r1, r7, #64
 9801 00be 0B44     		add	r3, r3, r1
 9802 00c0 03F8382C 		strb	r2, [r3, #-56]
2404:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 9803              		.loc 1 2404 0
 9804 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 9805 00c8 1346     		mov	r3, r2
 9806 00ca 5B00     		lsls	r3, r3, #1
 9807 00cc 1344     		add	r3, r3, r2
 9808 00ce 0133     		adds	r3, r3, #1
 9809 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 9810 00d2 D2B2     		uxtb	r2, r2
 9811 00d4 07F14001 		add	r1, r7, #64
 9812 00d8 0B44     		add	r3, r3, r1
 9813 00da 03F8382C 		strb	r2, [r3, #-56]
2405:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 9814              		.loc 1 2405 0
 9815 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 9816 00e2 1346     		mov	r3, r2
 9817 00e4 5B00     		lsls	r3, r3, #1
 9818 00e6 1344     		add	r3, r3, r2
 9819 00e8 9C1C     		adds	r4, r3, #2
 9820 00ea 0620     		movs	r0, #6
 9821 00ec FFF7FEFF 		bl	cc2400_get
 9822 00f0 0346     		mov	r3, r0
 9823 00f2 1B0A     		lsrs	r3, r3, #8
 9824 00f4 9BB2     		uxth	r3, r3
 9825 00f6 DAB2     		uxtb	r2, r3
 9826 00f8 07F14003 		add	r3, r7, #64
 9827 00fc 2344     		add	r3, r3, r4
 9828 00fe 03F8382C 		strb	r2, [r3, #-56]
2406:bluetooth_rxtx.c **** 			i++;
 9829              		.loc 1 2406 0
 9830 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 9831 0106 0133     		adds	r3, r3, #1
 9832 0108 87F83D30 		strb	r3, [r7, #61]
2407:bluetooth_rxtx.c **** 			if (i == 16) {
 9833              		.loc 1 2407 0
 9834 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 9835 0110 102B     		cmp	r3, #16
 9836 0112 0DD1     		bne	.L508
2408:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 9837              		.loc 1 2408 0
 9838 0114 07F10803 		add	r3, r7, #8
 9839 0118 0420     		movs	r0, #4
 9840 011a 1946     		mov	r1, r3
 9841 011c FFF7FEFF 		bl	enqueue
2409:bluetooth_rxtx.c **** 				i = 0;
 9842              		.loc 1 2409 0
ARM GAS  /tmp/ccSuvgbr.s 			page 215


 9843 0120 0023     		movs	r3, #0
 9844 0122 87F83D30 		strb	r3, [r7, #61]
2410:bluetooth_rxtx.c **** 
2411:bluetooth_rxtx.c **** 				handle_usb(clkn);
 9845              		.loc 1 2411 0
 9846 0126 164B     		ldr	r3, .L512+12
 9847 0128 1B68     		ldr	r3, [r3]
 9848 012a 1846     		mov	r0, r3
 9849 012c FFF7FEFF 		bl	handle_usb
 9850              	.L508:
2412:bluetooth_rxtx.c **** 			}
2413:bluetooth_rxtx.c **** 
2414:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 9851              		.loc 1 2414 0
 9852 0130 6420     		movs	r0, #100
 9853 0132 FFF7FEFF 		bl	cc2400_strobe
2415:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 9854              		.loc 1 2415 0
 9855 0136 00BF     		nop
 9856              	.L509:
 9857              		.loc 1 2415 0 is_stmt 0 discriminator 1
 9858 0138 FFF7FEFF 		bl	cc2400_status
 9859 013c 0346     		mov	r3, r0
 9860 013e 03F00403 		and	r3, r3, #4
 9861 0142 002B     		cmp	r3, #0
 9862 0144 F8D1     		bne	.L509
 9863              	.LBE28:
2395:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9864              		.loc 1 2395 0 is_stmt 1 discriminator 2
 9865 0146 FB8F     		ldrh	r3, [r7, #62]
 9866 0148 0133     		adds	r3, r3, #1
 9867 014a FB87     		strh	r3, [r7, #62]	@ movhi
 9868              	.L505:
2395:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9869              		.loc 1 2395 0 is_stmt 0 discriminator 1
 9870 014c FA8F     		ldrh	r2, [r7, #62]
 9871 014e 0D4B     		ldr	r3, .L512+16
 9872 0150 1B88     		ldrh	r3, [r3]	@ movhi
 9873 0152 9BB2     		uxth	r3, r3
 9874 0154 0133     		adds	r3, r3, #1
 9875 0156 9A42     		cmp	r2, r3
 9876 0158 88DB     		blt	.L510
 9877              	.L504:
2394:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9878              		.loc 1 2394 0 is_stmt 1
 9879 015a 0B4B     		ldr	r3, .L512+20
 9880 015c 1B78     		ldrb	r3, [r3]
 9881 015e DBB2     		uxtb	r3, r3
 9882 0160 042B     		cmp	r3, #4
 9883 0162 3FF47FAF 		beq	.L511
2416:bluetooth_rxtx.c **** 		}
2417:bluetooth_rxtx.c **** 	}
2418:bluetooth_rxtx.c **** 	RXLED_CLR;
 9884              		.loc 1 2418 0
 9885 0166 094B     		ldr	r3, .L512+24
 9886 0168 1022     		movs	r2, #16
 9887 016a 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 216


2419:bluetooth_rxtx.c **** }
 9888              		.loc 1 2419 0
 9889 016c 4437     		adds	r7, r7, #68
 9890              		.cfi_def_cfa_offset 12
 9891 016e BD46     		mov	sp, r7
 9892              		.cfi_def_cfa_register 13
 9893              		@ sp needed
 9894 0170 90BD     		pop	{r4, r7, pc}
 9895              	.L513:
 9896 0172 00BF     		.align	2
 9897              	.L512:
 9898 0174 38C00920 		.word	537509944
 9899 0178 58C00920 		.word	537509976
 9900 017c 00000000 		.word	low_freq
 9901 0180 00000000 		.word	clkn
 9902 0184 00000000 		.word	high_freq
 9903 0188 00000000 		.word	requested_mode
 9904 018c 3CC00920 		.word	537509948
 9905              		.cfi_endproc
 9906              	.LFE43:
 9908              		.section	.rodata
 9909 08ea 0000     		.align	2
 9910              	.LC2:
 9911 08ec 6C09     		.short	2412
 9912 08ee 8509     		.short	2437
 9913 08f0 9E09     		.short	2462
 9914              		.section	.text.led_specan,"ax",%progbits
 9915              		.align	2
 9916              		.global	led_specan
 9917              		.thumb
 9918              		.thumb_func
 9920              	led_specan:
 9921              	.LFB44:
2420:bluetooth_rxtx.c **** 
2421:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2422:bluetooth_rxtx.c **** void led_specan()
2423:bluetooth_rxtx.c **** {
 9922              		.loc 1 2423 0
 9923              		.cfi_startproc
 9924              		@ args = 0, pretend = 0, frame = 16
 9925              		@ frame_needed = 1, uses_anonymous_args = 0
 9926 0000 80B5     		push	{r7, lr}
 9927              		.cfi_def_cfa_offset 8
 9928              		.cfi_offset 7, -8
 9929              		.cfi_offset 14, -4
 9930 0002 84B0     		sub	sp, sp, #16
 9931              		.cfi_def_cfa_offset 24
 9932 0004 00AF     		add	r7, sp, #0
 9933              		.cfi_def_cfa_register 7
2424:bluetooth_rxtx.c **** 	int8_t lvl;
2425:bluetooth_rxtx.c **** 	u8 i = 0;
 9934              		.loc 1 2425 0
 9935 0006 0023     		movs	r3, #0
 9936 0008 FB73     		strb	r3, [r7, #15]
2426:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 9937              		.loc 1 2426 0
 9938 000a 5A4A     		ldr	r2, .L531
ARM GAS  /tmp/ccSuvgbr.s 			page 217


 9939 000c 07F10803 		add	r3, r7, #8
 9940 0010 1068     		ldr	r0, [r2]	@ unaligned
 9941 0012 1860     		str	r0, [r3]	@ unaligned
 9942 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 9943 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2427:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2428:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2429:bluetooth_rxtx.c **** 
2430:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2431:bluetooth_rxtx.c **** 	PAEN_SET;
 9944              		.loc 1 2431 0
 9945 0018 574B     		ldr	r3, .L531+4
 9946 001a 8022     		movs	r2, #128
 9947 001c 1A60     		str	r2, [r3]
2432:bluetooth_rxtx.c **** 	//HGM_SET;
2433:bluetooth_rxtx.c **** #endif
2434:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9948              		.loc 1 2434 0
 9949 001e 1220     		movs	r0, #18
 9950 0020 42F62231 		movw	r1, #11042
 9951 0024 FFF7FEFF 		bl	cc2400_set
2435:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 9952              		.loc 1 2435 0
 9953 0028 1420     		movs	r0, #20
 9954 002a 41F24B31 		movw	r1, #4939
 9955 002e FFF7FEFF 		bl	cc2400_set
2436:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 9956              		.loc 1 2436 0
 9957 0032 2020     		movs	r0, #32
 9958 0034 40F20111 		movw	r1, #257
 9959 0038 FFF7FEFF 		bl	cc2400_set
2437:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 9960              		.loc 1 2437 0
 9961 003c 0320     		movs	r0, #3
 9962 003e 2921     		movs	r1, #41
 9963 0040 FFF7FEFF 		bl	cc2400_set
2438:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 9964              		.loc 1 2438 0
 9965 0044 0620     		movs	r0, #6
 9966 0046 F121     		movs	r1, #241
 9967 0048 FFF7FEFF 		bl	cc2400_set
2439:bluetooth_rxtx.c **** 
2440:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9968              		.loc 1 2440 0
 9969 004c 00BF     		nop
 9970              	.L515:
 9971              		.loc 1 2440 0 is_stmt 0 discriminator 1
 9972 004e FFF7FEFF 		bl	cc2400_status
 9973 0052 0346     		mov	r3, r0
 9974 0054 03F04003 		and	r3, r3, #64
 9975 0058 002B     		cmp	r3, #0
 9976 005a F8D0     		beq	.L515
2441:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9977              		.loc 1 2441 0 is_stmt 1
 9978 005c 00BF     		nop
 9979              	.L516:
 9980              		.loc 1 2441 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccSuvgbr.s 			page 218


 9981 005e FFF7FEFF 		bl	cc2400_status
 9982 0062 0346     		mov	r3, r0
 9983 0064 03F00403 		and	r3, r3, #4
 9984 0068 002B     		cmp	r3, #0
 9985 006a F8D1     		bne	.L516
2442:bluetooth_rxtx.c **** 
2443:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 9986              		.loc 1 2443 0 is_stmt 1
 9987 006c 79E0     		b	.L517
 9988              	.L530:
 9989              	.LBB29:
2444:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 9990              		.loc 1 2444 0
 9991 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 9992 0070 5B00     		lsls	r3, r3, #1
 9993 0072 07F11002 		add	r2, r7, #16
 9994 0076 1344     		add	r3, r3, r2
 9995 0078 33F8083C 		ldrh	r3, [r3, #-8]
 9996 007c 013B     		subs	r3, r3, #1
 9997 007e 9BB2     		uxth	r3, r3
 9998 0080 0220     		movs	r0, #2
 9999 0082 1946     		mov	r1, r3
 10000 0084 FFF7FEFF 		bl	cc2400_set
2445:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 10001              		.loc 1 2445 0
 10002 0088 6120     		movs	r0, #97
 10003 008a FFF7FEFF 		bl	cc2400_strobe
2446:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 10004              		.loc 1 2446 0
 10005 008e 00BF     		nop
 10006              	.L518:
 10007              		.loc 1 2446 0 is_stmt 0 discriminator 1
 10008 0090 FFF7FEFF 		bl	cc2400_status
 10009 0094 0346     		mov	r3, r0
 10010 0096 03F00403 		and	r3, r3, #4
 10011 009a 002B     		cmp	r3, #0
 10012 009c F8D0     		beq	.L518
2447:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 10013              		.loc 1 2447 0 is_stmt 1
 10014 009e 6220     		movs	r0, #98
 10015 00a0 FFF7FEFF 		bl	cc2400_strobe
2448:bluetooth_rxtx.c **** 
2449:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2450:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 10016              		.loc 1 2450 0
 10017 00a4 4FF4FA73 		mov	r3, #500
 10018 00a8 7B60     		str	r3, [r7, #4]
 10019 00aa 00BF     		nop
 10020              	.L519:
 10021              		.loc 1 2450 0 is_stmt 0 discriminator 2
 10022 00ac 7B68     		ldr	r3, [r7, #4]
 10023 00ae 013B     		subs	r3, r3, #1
 10024 00b0 7B60     		str	r3, [r7, #4]
 10025 00b2 002B     		cmp	r3, #0
 10026 00b4 FAD1     		bne	.L519
2451:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 10027              		.loc 1 2451 0 is_stmt 1
ARM GAS  /tmp/ccSuvgbr.s 			page 219


 10028 00b6 0620     		movs	r0, #6
 10029 00b8 FFF7FEFF 		bl	cc2400_get
 10030 00bc 0346     		mov	r3, r0
 10031 00be 1B0A     		lsrs	r3, r3, #8
 10032 00c0 9BB2     		uxth	r3, r3
 10033 00c2 BB73     		strb	r3, [r7, #14]
2452:bluetooth_rxtx.c **** 		if (lvl > rssi_threshold) {
 10034              		.loc 1 2452 0
 10035 00c4 2D4B     		ldr	r3, .L531+8
 10036 00c6 1B78     		ldrb	r3, [r3]
 10037 00c8 DBB2     		uxtb	r3, r3
 10038 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 10039 00ce 5BB2     		sxtb	r3, r3
 10040 00d0 9A42     		cmp	r2, r3
 10041 00d2 15DD     		ble	.L520
2453:bluetooth_rxtx.c **** 			switch (i) {
 10042              		.loc 1 2453 0
 10043 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10044 00d6 012B     		cmp	r3, #1
 10045 00d8 09D0     		beq	.L522
 10046 00da 022B     		cmp	r3, #2
 10047 00dc 0BD0     		beq	.L523
 10048 00de 002B     		cmp	r3, #0
 10049 00e0 00D0     		beq	.L524
 10050 00e2 21E0     		b	.L525
 10051              	.L524:
2454:bluetooth_rxtx.c **** 				case 0:
2455:bluetooth_rxtx.c **** 					TXLED_SET;
 10052              		.loc 1 2455 0
 10053 00e4 264B     		ldr	r3, .L531+12
 10054 00e6 4FF48072 		mov	r2, #256
 10055 00ea 1A60     		str	r2, [r3]
2456:bluetooth_rxtx.c **** 					break;
 10056              		.loc 1 2456 0
 10057 00ec 07E0     		b	.L521
 10058              	.L522:
2457:bluetooth_rxtx.c **** 				case 1:
2458:bluetooth_rxtx.c **** 					RXLED_SET;
 10059              		.loc 1 2458 0
 10060 00ee 244B     		ldr	r3, .L531+12
 10061 00f0 1022     		movs	r2, #16
 10062 00f2 1A60     		str	r2, [r3]
2459:bluetooth_rxtx.c **** 					break;
 10063              		.loc 1 2459 0
 10064 00f4 03E0     		b	.L521
 10065              	.L523:
2460:bluetooth_rxtx.c **** 				case 2:
2461:bluetooth_rxtx.c **** 					USRLED_SET;
 10066              		.loc 1 2461 0
 10067 00f6 224B     		ldr	r3, .L531+12
 10068 00f8 0222     		movs	r2, #2
 10069 00fa 1A60     		str	r2, [r3]
2462:bluetooth_rxtx.c **** 					break;
 10070              		.loc 1 2462 0
 10071 00fc 00BF     		nop
 10072              	.L521:
 10073 00fe 13E0     		b	.L525
ARM GAS  /tmp/ccSuvgbr.s 			page 220


 10074              	.L520:
2463:bluetooth_rxtx.c **** 			}
2464:bluetooth_rxtx.c **** 		}
2465:bluetooth_rxtx.c **** 		else {
2466:bluetooth_rxtx.c **** 			switch (i) {
 10075              		.loc 1 2466 0
 10076 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10077 0102 012B     		cmp	r3, #1
 10078 0104 08D0     		beq	.L526
 10079 0106 022B     		cmp	r3, #2
 10080 0108 0AD0     		beq	.L527
 10081 010a 002B     		cmp	r3, #0
 10082 010c 0CD1     		bne	.L525
2467:bluetooth_rxtx.c **** 				case 0:
2468:bluetooth_rxtx.c **** 					TXLED_CLR;
 10083              		.loc 1 2468 0
 10084 010e 1D4B     		ldr	r3, .L531+16
 10085 0110 4FF48072 		mov	r2, #256
 10086 0114 1A60     		str	r2, [r3]
2469:bluetooth_rxtx.c **** 					break;
 10087              		.loc 1 2469 0
 10088 0116 07E0     		b	.L525
 10089              	.L526:
2470:bluetooth_rxtx.c **** 				case 1:
2471:bluetooth_rxtx.c **** 					RXLED_CLR;
 10090              		.loc 1 2471 0
 10091 0118 1A4B     		ldr	r3, .L531+16
 10092 011a 1022     		movs	r2, #16
 10093 011c 1A60     		str	r2, [r3]
2472:bluetooth_rxtx.c **** 					break;
 10094              		.loc 1 2472 0
 10095 011e 03E0     		b	.L525
 10096              	.L527:
2473:bluetooth_rxtx.c **** 				case 2:
2474:bluetooth_rxtx.c **** 					USRLED_CLR;
 10097              		.loc 1 2474 0
 10098 0120 184B     		ldr	r3, .L531+16
 10099 0122 0222     		movs	r2, #2
 10100 0124 1A60     		str	r2, [r3]
2475:bluetooth_rxtx.c **** 					break;
 10101              		.loc 1 2475 0
 10102 0126 00BF     		nop
 10103              	.L525:
2476:bluetooth_rxtx.c **** 			}
2477:bluetooth_rxtx.c **** 		}
2478:bluetooth_rxtx.c **** 
2479:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 10104              		.loc 1 2479 0
 10105 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10106 012a 5A1C     		adds	r2, r3, #1
 10107 012c 164B     		ldr	r3, .L531+20
 10108 012e 83FB0231 		smull	r3, r1, r3, r2
 10109 0132 D317     		asrs	r3, r2, #31
 10110 0134 C91A     		subs	r1, r1, r3
 10111 0136 0B46     		mov	r3, r1
 10112 0138 5B00     		lsls	r3, r3, #1
 10113 013a 0B44     		add	r3, r3, r1
ARM GAS  /tmp/ccSuvgbr.s 			page 221


 10114 013c D11A     		subs	r1, r2, r3
 10115 013e 0B46     		mov	r3, r1
 10116 0140 FB73     		strb	r3, [r7, #15]
2480:bluetooth_rxtx.c **** 
2481:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10117              		.loc 1 2481 0
 10118 0142 124B     		ldr	r3, .L531+24
 10119 0144 1B68     		ldr	r3, [r3]
 10120 0146 1846     		mov	r0, r3
 10121 0148 FFF7FEFF 		bl	handle_usb
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 10122              		.loc 1 2483 0
 10123 014c 6420     		movs	r0, #100
 10124 014e FFF7FEFF 		bl	cc2400_strobe
2484:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 10125              		.loc 1 2484 0
 10126 0152 00BF     		nop
 10127              	.L529:
 10128              		.loc 1 2484 0 is_stmt 0 discriminator 1
 10129 0154 FFF7FEFF 		bl	cc2400_status
 10130 0158 0346     		mov	r3, r0
 10131 015a 03F00403 		and	r3, r3, #4
 10132 015e 002B     		cmp	r3, #0
 10133 0160 F8D1     		bne	.L529
 10134              	.L517:
 10135              	.LBE29:
2443:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10136              		.loc 1 2443 0 is_stmt 1
 10137 0162 0B4B     		ldr	r3, .L531+28
 10138 0164 1B78     		ldrb	r3, [r3]
 10139 0166 DBB2     		uxtb	r3, r3
 10140 0168 072B     		cmp	r3, #7
 10141 016a 80D0     		beq	.L530
2485:bluetooth_rxtx.c **** 	}
2486:bluetooth_rxtx.c **** }
 10142              		.loc 1 2486 0
 10143 016c 1037     		adds	r7, r7, #16
 10144              		.cfi_def_cfa_offset 8
 10145 016e BD46     		mov	sp, r7
 10146              		.cfi_def_cfa_register 13
 10147              		@ sp needed
 10148 0170 80BD     		pop	{r7, pc}
 10149              	.L532:
 10150 0172 00BF     		.align	2
 10151              	.L531:
 10152 0174 EC080000 		.word	.LC2
 10153 0178 58C00920 		.word	537509976
 10154 017c 00000000 		.word	rssi_threshold
 10155 0180 38C00920 		.word	537509944
 10156 0184 3CC00920 		.word	537509948
 10157 0188 56555555 		.word	1431655766
 10158 018c 00000000 		.word	clkn
 10159 0190 00000000 		.word	requested_mode
 10160              		.cfi_endproc
 10161              	.LFE44:
 10163              		.section	.text.main,"ax",%progbits
ARM GAS  /tmp/ccSuvgbr.s 			page 222


 10164              		.align	2
 10165              		.global	main
 10166              		.thumb
 10167              		.thumb_func
 10169              	main:
 10170              	.LFB45:
2487:bluetooth_rxtx.c **** 
2488:bluetooth_rxtx.c **** int main()
2489:bluetooth_rxtx.c **** {
 10171              		.loc 1 2489 0
 10172              		.cfi_startproc
 10173              		@ args = 0, pretend = 0, frame = 0
 10174              		@ frame_needed = 1, uses_anonymous_args = 0
 10175 0000 80B5     		push	{r7, lr}
 10176              		.cfi_def_cfa_offset 8
 10177              		.cfi_offset 7, -8
 10178              		.cfi_offset 14, -4
 10179 0002 00AF     		add	r7, sp, #0
 10180              		.cfi_def_cfa_register 7
2490:bluetooth_rxtx.c **** 	ubertooth_init();
 10181              		.loc 1 2490 0
 10182 0004 FFF7FEFF 		bl	ubertooth_init
2491:bluetooth_rxtx.c **** 	clkn_init();
 10183              		.loc 1 2491 0
 10184 0008 FFF7FEFF 		bl	clkn_init
2492:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 10185              		.loc 1 2492 0
 10186 000c 3D48     		ldr	r0, .L552
 10187 000e FFF7FEFF 		bl	ubertooth_usb_init
 10188              	.L550:
2493:bluetooth_rxtx.c **** 
2494:bluetooth_rxtx.c **** 	while (1) {
2495:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10189              		.loc 1 2495 0
 10190 0012 3D4B     		ldr	r3, .L552+4
 10191 0014 1B68     		ldr	r3, [r3]
 10192 0016 1846     		mov	r0, r3
 10193 0018 FFF7FEFF 		bl	handle_usb
2496:bluetooth_rxtx.c **** 		if(requested_mode != mode) {
 10194              		.loc 1 2496 0
 10195 001c 3B4B     		ldr	r3, .L552+8
 10196 001e 1B78     		ldrb	r3, [r3]
 10197 0020 DAB2     		uxtb	r2, r3
 10198 0022 3B4B     		ldr	r3, .L552+12
 10199 0024 1B78     		ldrb	r3, [r3]
 10200 0026 DBB2     		uxtb	r3, r3
 10201 0028 9A42     		cmp	r2, r3
 10202 002a 6AD0     		beq	.L534
2497:bluetooth_rxtx.c **** 			switch (requested_mode) {
 10203              		.loc 1 2497 0
 10204 002c 374B     		ldr	r3, .L552+8
 10205 002e 1B78     		ldrb	r3, [r3]
 10206 0030 DBB2     		uxtb	r3, r3
 10207 0032 0D2B     		cmp	r3, #13
 10208 0034 64D8     		bhi	.L551
 10209 0036 01A2     		adr	r2, .L537
 10210 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
ARM GAS  /tmp/ccSuvgbr.s 			page 223


 10211              		.p2align 2
 10212              	.L537:
 10213 003c FB000000 		.word	.L536+1
 10214 0040 81000000 		.word	.L538+1
 10215 0044 01010000 		.word	.L551+1
 10216 0048 AF000000 		.word	.L539+1
 10217 004c DB000000 		.word	.L540+1
 10218 0050 BF000000 		.word	.L541+1
 10219 0054 D3000000 		.word	.L542+1
 10220 0058 E1000000 		.word	.L543+1
 10221 005c 91000000 		.word	.L544+1
 10222 0060 9D000000 		.word	.L545+1
 10223 0064 A3000000 		.word	.L546+1
 10224 0068 75000000 		.word	.L547+1
 10225 006c A9000000 		.word	.L548+1
 10226 0070 E7000000 		.word	.L549+1
 10227              		.p2align 1
 10228              	.L547:
2498:bluetooth_rxtx.c **** 				 case MODE_RESET:
2499:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2500:bluetooth_rxtx.c **** 					wait(1);
 10229              		.loc 1 2500 0
 10230 0074 0120     		movs	r0, #1
 10231 0076 FFF7FEFF 		bl	wait
2501:bluetooth_rxtx.c **** 					reset();
 10232              		.loc 1 2501 0
 10233 007a FFF7FEFF 		bl	reset
2502:bluetooth_rxtx.c **** 					break;
 10234              		.loc 1 2502 0
 10235 007e 40E0     		b	.L534
 10236              	.L538:
2503:bluetooth_rxtx.c **** //				case MODE_AFH:
2504:bluetooth_rxtx.c **** //					mode = MODE_AFH;
2505:bluetooth_rxtx.c **** //					bt_stream_rx();
2506:bluetooth_rxtx.c **** //					break;
2507:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2508:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 10237              		.loc 1 2508 0
 10238 0080 234B     		ldr	r3, .L552+12
 10239 0082 0122     		movs	r2, #1
 10240 0084 1A70     		strb	r2, [r3]
2509:bluetooth_rxtx.c **** 					queue_init();
 10241              		.loc 1 2509 0
 10242 0086 FFF7FEFF 		bl	queue_init
2510:bluetooth_rxtx.c **** 					bt_stream_rx();
 10243              		.loc 1 2510 0
 10244 008a FFF7FEFF 		bl	bt_stream_rx
2511:bluetooth_rxtx.c **** 					break;
 10245              		.loc 1 2511 0
 10246 008e 38E0     		b	.L534
 10247              	.L544:
2512:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2513:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 10248              		.loc 1 2513 0
 10249 0090 1F4B     		ldr	r3, .L552+12
 10250 0092 0822     		movs	r2, #8
 10251 0094 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccSuvgbr.s 			page 224


2514:bluetooth_rxtx.c **** 					bt_stream_rx();
 10252              		.loc 1 2514 0
 10253 0096 FFF7FEFF 		bl	bt_stream_rx
2515:bluetooth_rxtx.c **** 					break;
 10254              		.loc 1 2515 0
 10255 009a 32E0     		b	.L534
 10256              	.L545:
2516:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2517:bluetooth_rxtx.c **** 					bt_follow_le();
 10257              		.loc 1 2517 0
 10258 009c FFF7FEFF 		bl	bt_follow_le
2518:bluetooth_rxtx.c **** 					break;
 10259              		.loc 1 2518 0
 10260 00a0 2FE0     		b	.L534
 10261              	.L546:
2519:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2520:bluetooth_rxtx.c **** 					bt_promisc_le();
 10262              		.loc 1 2520 0
 10263 00a2 FFF7FEFF 		bl	bt_promisc_le
2521:bluetooth_rxtx.c **** 					break;
 10264              		.loc 1 2521 0
 10265 00a6 2CE0     		b	.L534
 10266              	.L548:
2522:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2523:bluetooth_rxtx.c **** 					bt_slave_le();
 10267              		.loc 1 2523 0
 10268 00a8 FFF7FEFF 		bl	bt_slave_le
2524:bluetooth_rxtx.c **** 					break;
 10269              		.loc 1 2524 0
 10270 00ac 29E0     		b	.L534
 10271              	.L539:
2525:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2526:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 10272              		.loc 1 2526 0
 10273 00ae 184B     		ldr	r3, .L552+12
 10274 00b0 0322     		movs	r2, #3
 10275 00b2 1A70     		strb	r2, [r3]
2527:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 10276              		.loc 1 2527 0
 10277 00b4 1748     		ldr	r0, .L552+16
 10278 00b6 1849     		ldr	r1, .L552+20
 10279 00b8 FFF7FEFF 		bl	cc2400_txtest
2528:bluetooth_rxtx.c **** 					break;
 10280              		.loc 1 2528 0
 10281 00bc 21E0     		b	.L534
 10282              	.L541:
2529:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2530:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 10283              		.loc 1 2530 0
 10284 00be 144B     		ldr	r3, .L552+12
 10285 00c0 0522     		movs	r2, #5
 10286 00c2 1A70     		strb	r2, [r3]
2531:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 10287              		.loc 1 2531 0
 10288 00c4 1448     		ldr	r0, .L552+20
 10289 00c6 FFF7FEFF 		bl	cc2400_rangetest
2532:bluetooth_rxtx.c **** 					requested_mode = MODE_IDLE;
ARM GAS  /tmp/ccSuvgbr.s 			page 225


 10290              		.loc 1 2532 0
 10291 00ca 104B     		ldr	r3, .L552+8
 10292 00cc 0022     		movs	r2, #0
 10293 00ce 1A70     		strb	r2, [r3]
2533:bluetooth_rxtx.c **** 					break;
 10294              		.loc 1 2533 0
 10295 00d0 17E0     		b	.L534
 10296              	.L542:
2534:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2535:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 10297              		.loc 1 2535 0
 10298 00d2 0F4B     		ldr	r3, .L552+12
 10299 00d4 0622     		movs	r2, #6
 10300 00d6 1A70     		strb	r2, [r3]
2536:bluetooth_rxtx.c **** //					cc2400_repeater(&channel);
2537:bluetooth_rxtx.c **** 					break;
 10301              		.loc 1 2537 0
 10302 00d8 13E0     		b	.L534
 10303              	.L540:
2538:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2539:bluetooth_rxtx.c **** 					specan();
 10304              		.loc 1 2539 0
 10305 00da FFF7FEFF 		bl	specan
2540:bluetooth_rxtx.c **** 					break;
 10306              		.loc 1 2540 0
 10307 00de 10E0     		b	.L534
 10308              	.L543:
2541:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2542:bluetooth_rxtx.c **** 					led_specan();
 10309              		.loc 1 2542 0
 10310 00e0 FFF7FEFF 		bl	led_specan
2543:bluetooth_rxtx.c **** 					break;
 10311              		.loc 1 2543 0
 10312 00e4 0DE0     		b	.L534
 10313              	.L549:
2544:bluetooth_rxtx.c **** 				case MODE_EGO:
2545:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 10314              		.loc 1 2545 0
 10315 00e6 0A4B     		ldr	r3, .L552+12
 10316 00e8 0D22     		movs	r2, #13
 10317 00ea 1A70     		strb	r2, [r3]
2546:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 10318              		.loc 1 2546 0
 10319 00ec 0B4B     		ldr	r3, .L552+24
 10320 00ee 1B78     		ldrb	r3, [r3]
 10321 00f0 DBB2     		uxtb	r3, r3
 10322 00f2 1846     		mov	r0, r3
 10323 00f4 FFF7FEFF 		bl	ego_main
2547:bluetooth_rxtx.c **** 					break;
 10324              		.loc 1 2547 0
 10325 00f8 03E0     		b	.L534
 10326              	.L536:
2548:bluetooth_rxtx.c **** 				case MODE_IDLE:
2549:bluetooth_rxtx.c **** 					cc2400_idle();
 10327              		.loc 1 2549 0
 10328 00fa FFF7FEFF 		bl	cc2400_idle
2550:bluetooth_rxtx.c **** 					break;
ARM GAS  /tmp/ccSuvgbr.s 			page 226


 10329              		.loc 1 2550 0
 10330 00fe 00E0     		b	.L534
 10331              	.L551:
2551:bluetooth_rxtx.c **** 				default:
2552:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2553:bluetooth_rxtx.c **** 					break;
 10332              		.loc 1 2553 0
 10333 0100 00BF     		nop
 10334              	.L534:
2554:bluetooth_rxtx.c **** 			}
2555:bluetooth_rxtx.c **** 		}
2556:bluetooth_rxtx.c **** 	}
 10335              		.loc 1 2556 0 discriminator 1
 10336 0102 86E7     		b	.L550
 10337              	.L553:
 10338              		.align	2
 10339              	.L552:
 10340 0104 00000000 		.word	vendor_request_handler
 10341 0108 00000000 		.word	clkn
 10342 010c 00000000 		.word	requested_mode
 10343 0110 00000000 		.word	mode
 10344 0114 00000000 		.word	modulation
 10345 0118 00000000 		.word	channel
 10346 011c 00000000 		.word	ego_mode
 10347              		.cfi_endproc
 10348              	.LFE45:
 10350              		.bss
 10351              		.align	2
 10352              	restart_jamming.4692:
 10353 00dc 00000000 		.space	4
 10354              		.align	2
 10355              	first_ts.4790:
 10356 00e0 00000000 		.space	4
 10357              		.align	2
 10358              	prev_clk.4796:
 10359 00e4 00000000 		.space	4
 10360              		.text
 10361              	.Letext0:
 10362              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 10363              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 10364              		.file 4 "../common/ubertooth.h"
 10365              		.file 5 "bluetooth_le.h"
 10366              		.file 6 "bluetooth.h"
 10367              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccSuvgbr.s 			page 227


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccSuvgbr.s:19     .data:0000000000000000 $d
     /tmp/ccSuvgbr.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccSuvgbr.s:29     .rodata:0000000000000000 $d
     /tmp/ccSuvgbr.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccSuvgbr.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccSuvgbr.s:80     .rodata:000000000000002c whitening
     /tmp/ccSuvgbr.s:211    .rodata:00000000000000ac whitening_index
     /tmp/ccSuvgbr.s:255    .rodata:00000000000000d4 hop_interval_lut
     /tmp/ccSuvgbr.s:296    .rodata:00000000000000fc whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccSuvgbr.s:782    .rodata:000000000000087c compile_info
     /tmp/ccSuvgbr.s:790    .bss:0000000000000000 clkn
     /tmp/ccSuvgbr.s:787    .bss:0000000000000000 $d
     /tmp/ccSuvgbr.s:796    .bss:0000000000000004 last_hop
     /tmp/ccSuvgbr.s:802    .bss:0000000000000008 clkn_offset
     /tmp/ccSuvgbr.s:808    .bss:000000000000000c clk100ns_offset
     /tmp/ccSuvgbr.s:813    .bss:000000000000000e hop_mode
     /tmp/ccSuvgbr.s:818    .bss:000000000000000f do_hop
     /tmp/ccSuvgbr.s:823    .bss:0000000000000010 dma_discard
     /tmp/ccSuvgbr.s:828    .bss:0000000000000011 cs_no_squelch
     /tmp/ccSuvgbr.s:834    .data:0000000000000004 cs_threshold_req
     /tmp/ccSuvgbr.s:839    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
     /tmp/ccSuvgbr.s:847    .bss:0000000000000012 hop_direct_channel
                            *COM*:0000000000000001 idle_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
     /tmp/ccSuvgbr.s:855    .bss:0000000000000014 idle_buf_channel
     /tmp/ccSuvgbr.s:861    .bss:0000000000000018 slave_mac_address
     /tmp/ccSuvgbr.s:868    .data:0000000000000006 hop_timeout
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccSuvgbr.s:876    .data:0000000000000008 active_rxbuf
     /tmp/ccSuvgbr.s:882    .data:000000000000000c idle_rxbuf
     /tmp/ccSuvgbr.s:888    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccSuvgbr.s:907    .bss:0000000000000020 le_jam_count
     /tmp/ccSuvgbr.s:913    .bss:0000000000000024 data_cb
     /tmp/ccSuvgbr.s:919    .bss:0000000000000028 packet_cb
     /tmp/ccSuvgbr.s:925    .bss:000000000000002c rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/ccSuvgbr.s:931    .bss:00000000000000ca mode
     /tmp/ccSuvgbr.s:936    .bss:00000000000000cb requested_mode
     /tmp/ccSuvgbr.s:941    .bss:00000000000000cc jam_mode
     /tmp/ccSuvgbr.s:946    .bss:00000000000000cd ego_mode
     /tmp/ccSuvgbr.s:951    .bss:00000000000000ce modulation
     /tmp/ccSuvgbr.s:958    .data:0000000000000054 channel
     /tmp/ccSuvgbr.s:965    .bss:00000000000000d0 requested_channel
     /tmp/ccSuvgbr.s:971    .bss:00000000000000d2 saved_request
     /tmp/ccSuvgbr.s:978    .data:0000000000000056 low_freq
     /tmp/ccSuvgbr.s:984    .data:0000000000000058 high_freq
     /tmp/ccSuvgbr.s:989    .data:000000000000005a rssi_threshold
ARM GAS  /tmp/ccSuvgbr.s 			page 228


                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccSuvgbr.s:1000   .bss:00000000000000d4 status
     /tmp/ccSuvgbr.s:1006   .data:000000000000005b rssi_max
     /tmp/ccSuvgbr.s:1011   .data:000000000000005c rssi_min
     /tmp/ccSuvgbr.s:1017   .bss:00000000000000d5 rssi_count
     /tmp/ccSuvgbr.s:1023   .bss:00000000000000d8 rssi_sum
     /tmp/ccSuvgbr.s:1026   .text.rssi_reset:0000000000000000 $t
     /tmp/ccSuvgbr.s:1030   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccSuvgbr.s:1070   .text.rssi_reset:0000000000000024 $d
     /tmp/ccSuvgbr.s:1078   .text.rssi_add:0000000000000000 $t
     /tmp/ccSuvgbr.s:1082   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccSuvgbr.s:1148   .text.rssi_add:000000000000005c $d
     /tmp/ccSuvgbr.s:1156   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccSuvgbr.s:1160   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccSuvgbr.s:1255   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccSuvgbr.s:1264   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccSuvgbr.s:1268   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccSuvgbr.s:1350   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccSuvgbr.s:1356   .text.enqueue:0000000000000000 $t
     /tmp/ccSuvgbr.s:1360   .text.enqueue:0000000000000000 enqueue
     /tmp/ccSuvgbr.s:1532   .text.enqueue:000000000000010c $d
     /tmp/ccSuvgbr.s:1547   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccSuvgbr.s:1552   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccSuvgbr.s:1645   .text.enqueue_with_ts:0000000000000080 $d
     /tmp/ccSuvgbr.s:1651   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccSuvgbr.s:1655   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccSuvgbr.s:1731   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccSuvgbr.s:1739   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccSuvgbr.s:1743   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccSuvgbr.s:1784   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccSuvgbr.s:1792   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccSuvgbr.s:1796   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccSuvgbr.s:1837   .text.cs_trigger_disable:000000000000002c $d
     /tmp/ccSuvgbr.s:1849   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccSuvgbr.s:1853   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccSuvgbr.s:1890   .text.vendor_request_handler:0000000000000024 $d
     /tmp/ccSuvgbr.s:1954   .text.vendor_request_handler:0000000000000124 $t
     /tmp/ccSuvgbr.s:2354   .text.vendor_request_handler:00000000000003b4 $d
     /tmp/ccSuvgbr.s:2364   .text.vendor_request_handler:00000000000003d4 $t
     /tmp/ccSuvgbr.s:2748   .text.vendor_request_handler:0000000000000620 $d
     /tmp/ccSuvgbr.s:2766   .text.vendor_request_handler:0000000000000660 $t
     /tmp/ccSuvgbr.s:3170   .text.vendor_request_handler:000000000000090c $d
     /tmp/ccSuvgbr.s:3186   .text.vendor_request_handler:0000000000000944 $t
     /tmp/ccSuvgbr.s:6004   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccSuvgbr.s:3517   .text.vendor_request_handler:0000000000000b40 $d
     /tmp/ccSuvgbr.s:3529   .text.clkn_init:0000000000000000 $t
     /tmp/ccSuvgbr.s:3533   .text.clkn_init:0000000000000000 clkn_init
     /tmp/ccSuvgbr.s:3584   .text.clkn_init:0000000000000038 $d
     /tmp/ccSuvgbr.s:3594   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/ccSuvgbr.s:3599   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/ccSuvgbr.s:3794   .text.TIMER0_IRQHandler:0000000000000128 $d
     /tmp/ccSuvgbr.s:3808   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccSuvgbr.s:3813   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
ARM GAS  /tmp/ccSuvgbr.s 			page 229


     /tmp/ccSuvgbr.s:3859   .text.EINT3_IRQHandler:0000000000000030 $d
     /tmp/ccSuvgbr.s:3868   .text.msleep:0000000000000000 $t
     /tmp/ccSuvgbr.s:3872   .text.msleep:0000000000000000 msleep
     /tmp/ccSuvgbr.s:3918   .text.msleep:0000000000000038 $d
     /tmp/ccSuvgbr.s:3924   .text.dma_init:0000000000000000 $t
     /tmp/ccSuvgbr.s:3928   .text.dma_init:0000000000000000 dma_init
     /tmp/ccSuvgbr.s:4078   .text.dma_init:00000000000000d4 $d
     /tmp/ccSuvgbr.s:4107   .text.dma_init_le:0000000000000000 $t
     /tmp/ccSuvgbr.s:4111   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccSuvgbr.s:4292   .text.dma_init_le:0000000000000104 $d
     /tmp/ccSuvgbr.s:4318   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccSuvgbr.s:4323   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccSuvgbr.s:4440   .text.bt_stream_dma_handler:00000000000000ac $d
     /tmp/ccSuvgbr.s:4461   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccSuvgbr.s:4466   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccSuvgbr.s:4489   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccSuvgbr.s:4501   .text.DMA_IRQHandler:0000000000000048 $t
     /tmp/ccSuvgbr.s:4513   .text.DMA_IRQHandler:0000000000000050 $d
     /tmp/ccSuvgbr.s:4518   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccSuvgbr.s:4522   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccSuvgbr.s:4575   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccSuvgbr.s:4585   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccSuvgbr.s:4589   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccSuvgbr.s:4687   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccSuvgbr.s:4706   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccSuvgbr.s:4710   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccSuvgbr.s:4763   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccSuvgbr.s:4770   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccSuvgbr.s:4774   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccSuvgbr.s:4883   .text.cc2400_rx:00000000000000a8 $d
     /tmp/ccSuvgbr.s:4889   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccSuvgbr.s:4893   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccSuvgbr.s:5028   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccSuvgbr.s:5035   .text.le_transmit:0000000000000000 $t
     /tmp/ccSuvgbr.s:5040   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccSuvgbr.s:5433   .text.le_transmit:00000000000002d4 $d
     /tmp/ccSuvgbr.s:5446   .text.le_jam:0000000000000000 $t
     /tmp/ccSuvgbr.s:5451   .text.le_jam:0000000000000000 le_jam
     /tmp/ccSuvgbr.s:5534   .text.le_jam:000000000000008c $d
     /tmp/ccSuvgbr.s:5540   .text.hop:0000000000000000 $t
     /tmp/ccSuvgbr.s:5545   .text.hop:0000000000000000 hop
     /tmp/ccSuvgbr.s:5641   .text.hop:0000000000000090 $d
     /tmp/ccSuvgbr.s:5651   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccSuvgbr.s:5656   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccSuvgbr.s:5980   .text.bt_stream_rx:0000000000000230 $d
     /tmp/ccSuvgbr.s:6000   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccSuvgbr.s:6048   .text.le_set_access_address:0000000000000030 $d
     /tmp/ccSuvgbr.s:6053   .text.reset_le:0000000000000000 $t
     /tmp/ccSuvgbr.s:6058   .text.reset_le:0000000000000000 reset_le
     /tmp/ccSuvgbr.s:6154   .text.reset_le:0000000000000084 $d
     /tmp/ccSuvgbr.s:6163   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccSuvgbr.s:6168   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccSuvgbr.s:6194   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccSuvgbr.s:6199   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccSuvgbr.s:6204   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccSuvgbr.s:6591   .text.bt_generic_le:0000000000000264 $d
     /tmp/ccSuvgbr.s:6615   .text.bt_le_sync:0000000000000000 $t
ARM GAS  /tmp/ccSuvgbr.s 			page 230


     /tmp/ccSuvgbr.s:6620   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccSuvgbr.s:6987   .text.bt_le_sync:0000000000000250 $d
     /tmp/ccSuvgbr.s:7010   .text.bt_le_sync:00000000000002a0 $t
     /tmp/ccSuvgbr.s:7412   .text.bt_le_sync:0000000000000540 $d
     /tmp/ccSuvgbr.s:10352  .bss:00000000000000dc restart_jamming.4692
     /tmp/ccSuvgbr.s:7437   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccSuvgbr.s:7442   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccSuvgbr.s:7736   .text.cb_follow_le:00000000000001c0 $d
     /tmp/ccSuvgbr.s:7749   .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccSuvgbr.s:7754   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccSuvgbr.s:8132   .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccSuvgbr.s:8142   .text.bt_follow_le:0000000000000000 $t
     /tmp/ccSuvgbr.s:8147   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccSuvgbr.s:8177   .text.bt_follow_le:000000000000001c $d
     /tmp/ccSuvgbr.s:8184   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccSuvgbr.s:8189   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccSuvgbr.s:8282   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccSuvgbr.s:8287   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccSuvgbr.s:8496   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccSuvgbr.s:10355  .bss:00000000000000e0 first_ts.4790
     /tmp/ccSuvgbr.s:8515   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccSuvgbr.s:8520   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccSuvgbr.s:8655   .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccSuvgbr.s:10358  .bss:00000000000000e4 prev_clk.4796
     /tmp/ccSuvgbr.s:8672   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccSuvgbr.s:8677   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccSuvgbr.s:8792   .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccSuvgbr.s:8800   .text.see_aa:0000000000000000 $t
     /tmp/ccSuvgbr.s:8805   .text.see_aa:0000000000000000 see_aa
     /tmp/ccSuvgbr.s:8926   .text.see_aa:00000000000000a4 $d
     /tmp/ccSuvgbr.s:8938   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccSuvgbr.s:8943   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccSuvgbr.s:9399   .text.cb_le_promisc:00000000000002e8 $d
     /tmp/ccSuvgbr.s:9415   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccSuvgbr.s:9420   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccSuvgbr.s:9502   .text.bt_promisc_le:000000000000006c $d
     /tmp/ccSuvgbr.s:9530   .text.bt_slave_le:0000000000000000 $t
     /tmp/ccSuvgbr.s:9535   .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccSuvgbr.s:9670   .text.bt_slave_le:00000000000000dc $d
     /tmp/ccSuvgbr.s:9681   .text.specan:0000000000000000 $t
     /tmp/ccSuvgbr.s:9686   .text.specan:0000000000000000 specan
     /tmp/ccSuvgbr.s:9898   .text.specan:0000000000000174 $d
     /tmp/ccSuvgbr.s:9915   .text.led_specan:0000000000000000 $t
     /tmp/ccSuvgbr.s:9920   .text.led_specan:0000000000000000 led_specan
     /tmp/ccSuvgbr.s:10152  .text.led_specan:0000000000000174 $d
     /tmp/ccSuvgbr.s:10164  .text.main:0000000000000000 $t
     /tmp/ccSuvgbr.s:10169  .text.main:0000000000000000 main
     /tmp/ccSuvgbr.s:10213  .text.main:000000000000003c $d
     /tmp/ccSuvgbr.s:10227  .text.main:0000000000000074 $t
     /tmp/ccSuvgbr.s:10340  .text.main:0000000000000104 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
memcpy
cc2400_get
ARM GAS  /tmp/ccSuvgbr.s 			page 231


reset
bootloader_ctrl
strlen
precalc
queue_init
dequeue
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
dio_ssp_init
handle_usb
rbit
memset
btle_crcgen_lut
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
ego_main
