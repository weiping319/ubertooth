ARM GAS  /tmp/ccEp1UuM.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"cc2400_rangetest.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	rr,5,4
  25              		.section	.text.cc2400_rangetest,"ax",%progbits
  26              		.align	2
  27              		.global	cc2400_rangetest
  28              		.thumb
  29              		.thumb_func
  31              	cc2400_rangetest:
  32              	.LFB0:
  33              		.file 1 "cc2400_rangetest.c"
   1:cc2400_rangetest.c **** /*
   2:cc2400_rangetest.c ****  * Copyright 2013 Dominic Spill, Michael Ossmann
   3:cc2400_rangetest.c ****  *
   4:cc2400_rangetest.c ****  * This file is part of Project Ubertooth.
   5:cc2400_rangetest.c ****  *
   6:cc2400_rangetest.c ****  * This program is free software; you can redistribute it and/or modify
   7:cc2400_rangetest.c ****  * it under the terms of the GNU General Public License as published by
   8:cc2400_rangetest.c ****  * the Free Software Foundation; either version 2, or (at your option)
   9:cc2400_rangetest.c ****  * any later version.
  10:cc2400_rangetest.c ****  *
  11:cc2400_rangetest.c ****  * This program is distributed in the hope that it will be useful,
  12:cc2400_rangetest.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  13:cc2400_rangetest.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  14:cc2400_rangetest.c ****  * GNU General Public License for more details.
  15:cc2400_rangetest.c ****  *
  16:cc2400_rangetest.c ****  * You should have received a copy of the GNU General Public License
  17:cc2400_rangetest.c ****  * along with this program; see the file COPYING.  If not, write to
  18:cc2400_rangetest.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  19:cc2400_rangetest.c ****  * Boston, MA 02110-1301, USA.
  20:cc2400_rangetest.c ****  */
  21:cc2400_rangetest.c **** 
  22:cc2400_rangetest.c **** #include "cc2400_rangetest.h"
  23:cc2400_rangetest.c **** /*
  24:cc2400_rangetest.c ****  * This range test transmits a Bluetooth-like (but not Bluetooth compatible)
  25:cc2400_rangetest.c ****  * packet to a repeater and then receives the repeated packet.  It is only
  26:cc2400_rangetest.c ****  * useful if another device is running cc2400_repeater() some distance away.
  27:cc2400_rangetest.c ****  *
ARM GAS  /tmp/ccEp1UuM.s 			page 2


  28:cc2400_rangetest.c ****  * The outgoing packet is transmitted at each power amplifier (PA) level from
  29:cc2400_rangetest.c ****  * lowest to highest.  It is sent several times at each level.  The repeater
  30:cc2400_rangetest.c ****  * takes the first packet to be received correctly and repeats it in a similar
  31:cc2400_rangetest.c ****  * manner.  The result should indicate the lowest successful PA level in each
  32:cc2400_rangetest.c ****  * direction.
  33:cc2400_rangetest.c ****  *
  34:cc2400_rangetest.c ****  * The range test packet consists of:
  35:cc2400_rangetest.c ****  *   preamble: 4 bytes
  36:cc2400_rangetest.c ****  *   sync word: 4 bytes
  37:cc2400_rangetest.c ****  *   payload:
  38:cc2400_rangetest.c ****  *     length: 1 byte (21)
  39:cc2400_rangetest.c ****  *     packet type: 1 byte (0 = request; 1 = reply)
  40:cc2400_rangetest.c ****  *     LPC17xx serial number: 16 bytes
  41:cc2400_rangetest.c ****  *     request pa: 1 byte
  42:cc2400_rangetest.c ****  *     request number: 1 byte
  43:cc2400_rangetest.c ****  *     reply pa: 1 byte
  44:cc2400_rangetest.c ****  *     reply number: 1 byte
  45:cc2400_rangetest.c ****  *   crc: 2 bytes
  46:cc2400_rangetest.c ****  */
  47:cc2400_rangetest.c **** 
  48:cc2400_rangetest.c **** void cc2400_rangetest(volatile u16 *chan_ptr)
  49:cc2400_rangetest.c **** {
  34              		.loc 1 49 0
  35              		.cfi_startproc
  36              		@ args = 0, pretend = 0, frame = 80
  37              		@ frame_needed = 1, uses_anonymous_args = 0
  38 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
  39              		.cfi_def_cfa_offset 36
  40              		.cfi_offset 4, -36
  41              		.cfi_offset 5, -32
  42              		.cfi_offset 6, -28
  43              		.cfi_offset 7, -24
  44              		.cfi_offset 8, -20
  45              		.cfi_offset 9, -16
  46              		.cfi_offset 10, -12
  47              		.cfi_offset 11, -8
  48              		.cfi_offset 14, -4
  49 0004 95B0     		sub	sp, sp, #84
  50              		.cfi_def_cfa_offset 120
  51 0006 00AF     		add	r7, sp, #0
  52              		.cfi_def_cfa_register 7
  53 0008 7860     		str	r0, [r7, #4]
  54 000a 6946     		mov	r1, sp
  55 000c 3960     		str	r1, [r7]
  50:cc2400_rangetest.c **** #ifdef TX_ENABLE
  51:cc2400_rangetest.c **** 	u32 command[5];
  52:cc2400_rangetest.c **** 	u32 result[5];
  53:cc2400_rangetest.c **** 	int i;
  54:cc2400_rangetest.c **** 	int j;
  55:cc2400_rangetest.c **** 	u8 len = 22;
  56              		.loc 1 55 0
  57 000e 1621     		movs	r1, #22
  58 0010 87F84610 		strb	r1, [r7, #70]
  56:cc2400_rangetest.c **** 	u8 pa = 0;
  59              		.loc 1 56 0
  60 0014 0021     		movs	r1, #0
  61 0016 87F84710 		strb	r1, [r7, #71]
ARM GAS  /tmp/ccEp1UuM.s 			page 3


  57:cc2400_rangetest.c **** 	u8 txbuf[len];
  62              		.loc 1 57 0
  63 001a 97F84660 		ldrb	r6, [r7, #70]	@ zero_extendqisi2
  64 001e 3146     		mov	r1, r6
  65 0020 0139     		subs	r1, r1, #1
  66 0022 3964     		str	r1, [r7, #64]
  67 0024 F0B2     		uxtb	r0, r6
  68 0026 4FF00001 		mov	r1, #0
  69 002a 4FEAC10B 		lsl	fp, r1, #3
  70 002e 4BEA507B 		orr	fp, fp, r0, lsr #29
  71 0032 4FEAC00A 		lsl	r10, r0, #3
  72 0036 F0B2     		uxtb	r0, r6
  73 0038 4FF00001 		mov	r1, #0
  74 003c 4FEAC109 		lsl	r9, r1, #3
  75 0040 49EA5079 		orr	r9, r9, r0, lsr #29
  76 0044 4FEAC008 		lsl	r8, r0, #3
  77 0048 3146     		mov	r1, r6
  78 004a 0731     		adds	r1, r1, #7
  79 004c C908     		lsrs	r1, r1, #3
  80 004e C900     		lsls	r1, r1, #3
  81 0050 ADEB010D 		sub	sp, sp, r1
  82 0054 6946     		mov	r1, sp
  83 0056 0031     		adds	r1, r1, #0
  84 0058 F963     		str	r1, [r7, #60]
  58:cc2400_rangetest.c **** 	u8 rxbuf[len];
  85              		.loc 1 58 0
  86 005a 97F84660 		ldrb	r6, [r7, #70]	@ zero_extendqisi2
  87 005e 3146     		mov	r1, r6
  88 0060 0139     		subs	r1, r1, #1
  89 0062 B963     		str	r1, [r7, #56]
  90 0064 F0B2     		uxtb	r0, r6
  91 0066 4FF00001 		mov	r1, #0
  92 006a CD00     		lsls	r5, r1, #3
  93 006c 45EA5075 		orr	r5, r5, r0, lsr #29
  94 0070 C400     		lsls	r4, r0, #3
  95 0072 F0B2     		uxtb	r0, r6
  96 0074 4FF00001 		mov	r1, #0
  97 0078 CB00     		lsls	r3, r1, #3
  98 007a 43EA5073 		orr	r3, r3, r0, lsr #29
  99 007e C200     		lsls	r2, r0, #3
 100 0080 3346     		mov	r3, r6
 101 0082 0733     		adds	r3, r3, #7
 102 0084 DB08     		lsrs	r3, r3, #3
 103 0086 DB00     		lsls	r3, r3, #3
 104 0088 ADEB030D 		sub	sp, sp, r3
 105 008c 6B46     		mov	r3, sp
 106 008e 0033     		adds	r3, r3, #0
 107 0090 7B63     		str	r3, [r7, #52]
  59:cc2400_rangetest.c **** 
  60:cc2400_rangetest.c **** 	txbuf[0] = len - 1; // length of data (rest of payload)
 108              		.loc 1 60 0
 109 0092 97F84630 		ldrb	r3, [r7, #70]
 110 0096 013B     		subs	r3, r3, #1
 111 0098 DAB2     		uxtb	r2, r3
 112 009a FB6B     		ldr	r3, [r7, #60]
 113 009c 1A70     		strb	r2, [r3]
  61:cc2400_rangetest.c **** 	txbuf[1] = 0; // request
ARM GAS  /tmp/ccEp1UuM.s 			page 4


 114              		.loc 1 61 0
 115 009e FB6B     		ldr	r3, [r7, #60]
 116 00a0 0022     		movs	r2, #0
 117 00a2 5A70     		strb	r2, [r3, #1]
  62:cc2400_rangetest.c **** 
  63:cc2400_rangetest.c **** 	// read device serial number
  64:cc2400_rangetest.c **** 	command[0] = 58;
 118              		.loc 1 64 0
 119 00a4 3A23     		movs	r3, #58
 120 00a6 3B62     		str	r3, [r7, #32]
  65:cc2400_rangetest.c **** 	iap_entry(command, result);
 121              		.loc 1 65 0
 122 00a8 B34B     		ldr	r3, .L31
 123 00aa 1B68     		ldr	r3, [r3]
 124 00ac 07F12001 		add	r1, r7, #32
 125 00b0 07F10C02 		add	r2, r7, #12
 126 00b4 0846     		mov	r0, r1
 127 00b6 1146     		mov	r1, r2
 128 00b8 9847     		blx	r3
  66:cc2400_rangetest.c **** 	if ((result[0] & 0xFF) != 0) //status check
 129              		.loc 1 66 0
 130 00ba FB68     		ldr	r3, [r7, #12]
 131 00bc DBB2     		uxtb	r3, r3
 132 00be 002B     		cmp	r3, #0
 133 00c0 01D0     		beq	.L2
 134 00c2 0023     		movs	r3, #0
  67:cc2400_rangetest.c **** 		return;
 135              		.loc 1 67 0
 136 00c4 ACE1     		b	.L3
 137              	.L2:
  68:cc2400_rangetest.c **** 	txbuf[2] = (result[1] >> 24) & 0xFF;
 138              		.loc 1 68 0
 139 00c6 3B69     		ldr	r3, [r7, #16]
 140 00c8 1B0E     		lsrs	r3, r3, #24
 141 00ca DAB2     		uxtb	r2, r3
 142 00cc FB6B     		ldr	r3, [r7, #60]
 143 00ce 9A70     		strb	r2, [r3, #2]
  69:cc2400_rangetest.c **** 	txbuf[3] = (result[1] >> 16) & 0xFF;
 144              		.loc 1 69 0
 145 00d0 3B69     		ldr	r3, [r7, #16]
 146 00d2 1B0C     		lsrs	r3, r3, #16
 147 00d4 DAB2     		uxtb	r2, r3
 148 00d6 FB6B     		ldr	r3, [r7, #60]
 149 00d8 DA70     		strb	r2, [r3, #3]
  70:cc2400_rangetest.c **** 	txbuf[4] = (result[1] >> 8) & 0xFF;
 150              		.loc 1 70 0
 151 00da 3B69     		ldr	r3, [r7, #16]
 152 00dc 1B0A     		lsrs	r3, r3, #8
 153 00de DAB2     		uxtb	r2, r3
 154 00e0 FB6B     		ldr	r3, [r7, #60]
 155 00e2 1A71     		strb	r2, [r3, #4]
  71:cc2400_rangetest.c **** 	txbuf[5] = result[1] & 0xFF;
 156              		.loc 1 71 0
 157 00e4 3B69     		ldr	r3, [r7, #16]
 158 00e6 DAB2     		uxtb	r2, r3
 159 00e8 FB6B     		ldr	r3, [r7, #60]
 160 00ea 5A71     		strb	r2, [r3, #5]
ARM GAS  /tmp/ccEp1UuM.s 			page 5


  72:cc2400_rangetest.c **** 	txbuf[6] = (result[2] >> 24) & 0xFF;
 161              		.loc 1 72 0
 162 00ec 7B69     		ldr	r3, [r7, #20]
 163 00ee 1B0E     		lsrs	r3, r3, #24
 164 00f0 DAB2     		uxtb	r2, r3
 165 00f2 FB6B     		ldr	r3, [r7, #60]
 166 00f4 9A71     		strb	r2, [r3, #6]
  73:cc2400_rangetest.c **** 	txbuf[7] = (result[2] >> 16) & 0xFF;
 167              		.loc 1 73 0
 168 00f6 7B69     		ldr	r3, [r7, #20]
 169 00f8 1B0C     		lsrs	r3, r3, #16
 170 00fa DAB2     		uxtb	r2, r3
 171 00fc FB6B     		ldr	r3, [r7, #60]
 172 00fe DA71     		strb	r2, [r3, #7]
  74:cc2400_rangetest.c **** 	txbuf[8] = (result[2] >> 8) & 0xFF;
 173              		.loc 1 74 0
 174 0100 7B69     		ldr	r3, [r7, #20]
 175 0102 1B0A     		lsrs	r3, r3, #8
 176 0104 DAB2     		uxtb	r2, r3
 177 0106 FB6B     		ldr	r3, [r7, #60]
 178 0108 1A72     		strb	r2, [r3, #8]
  75:cc2400_rangetest.c **** 	txbuf[9] = result[2] & 0xFF;
 179              		.loc 1 75 0
 180 010a 7B69     		ldr	r3, [r7, #20]
 181 010c DAB2     		uxtb	r2, r3
 182 010e FB6B     		ldr	r3, [r7, #60]
 183 0110 5A72     		strb	r2, [r3, #9]
  76:cc2400_rangetest.c **** 	txbuf[10] = (result[3] >> 24) & 0xFF;
 184              		.loc 1 76 0
 185 0112 BB69     		ldr	r3, [r7, #24]
 186 0114 1B0E     		lsrs	r3, r3, #24
 187 0116 DAB2     		uxtb	r2, r3
 188 0118 FB6B     		ldr	r3, [r7, #60]
 189 011a 9A72     		strb	r2, [r3, #10]
  77:cc2400_rangetest.c **** 	txbuf[11] = (result[3] >> 16) & 0xFF;
 190              		.loc 1 77 0
 191 011c BB69     		ldr	r3, [r7, #24]
 192 011e 1B0C     		lsrs	r3, r3, #16
 193 0120 DAB2     		uxtb	r2, r3
 194 0122 FB6B     		ldr	r3, [r7, #60]
 195 0124 DA72     		strb	r2, [r3, #11]
  78:cc2400_rangetest.c **** 	txbuf[12] = (result[3] >> 8) & 0xFF;
 196              		.loc 1 78 0
 197 0126 BB69     		ldr	r3, [r7, #24]
 198 0128 1B0A     		lsrs	r3, r3, #8
 199 012a DAB2     		uxtb	r2, r3
 200 012c FB6B     		ldr	r3, [r7, #60]
 201 012e 1A73     		strb	r2, [r3, #12]
  79:cc2400_rangetest.c **** 	txbuf[13] = result[3] & 0xFF;
 202              		.loc 1 79 0
 203 0130 BB69     		ldr	r3, [r7, #24]
 204 0132 DAB2     		uxtb	r2, r3
 205 0134 FB6B     		ldr	r3, [r7, #60]
 206 0136 5A73     		strb	r2, [r3, #13]
  80:cc2400_rangetest.c **** 	txbuf[14] = (result[4] >> 24) & 0xFF;
 207              		.loc 1 80 0
 208 0138 FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/ccEp1UuM.s 			page 6


 209 013a 1B0E     		lsrs	r3, r3, #24
 210 013c DAB2     		uxtb	r2, r3
 211 013e FB6B     		ldr	r3, [r7, #60]
 212 0140 9A73     		strb	r2, [r3, #14]
  81:cc2400_rangetest.c **** 	txbuf[15] = (result[4] >> 16) & 0xFF;
 213              		.loc 1 81 0
 214 0142 FB69     		ldr	r3, [r7, #28]
 215 0144 1B0C     		lsrs	r3, r3, #16
 216 0146 DAB2     		uxtb	r2, r3
 217 0148 FB6B     		ldr	r3, [r7, #60]
 218 014a DA73     		strb	r2, [r3, #15]
  82:cc2400_rangetest.c **** 	txbuf[16] = (result[4] >> 8) & 0xFF;
 219              		.loc 1 82 0
 220 014c FB69     		ldr	r3, [r7, #28]
 221 014e 1B0A     		lsrs	r3, r3, #8
 222 0150 DAB2     		uxtb	r2, r3
 223 0152 FB6B     		ldr	r3, [r7, #60]
 224 0154 1A74     		strb	r2, [r3, #16]
  83:cc2400_rangetest.c **** 	txbuf[17] = result[4] & 0xFF;
 225              		.loc 1 83 0
 226 0156 FB69     		ldr	r3, [r7, #28]
 227 0158 DAB2     		uxtb	r2, r3
 228 015a FB6B     		ldr	r3, [r7, #60]
 229 015c 5A74     		strb	r2, [r3, #17]
  84:cc2400_rangetest.c **** 
  85:cc2400_rangetest.c **** 	txbuf[18] = pa; // request pa
 230              		.loc 1 85 0
 231 015e FB6B     		ldr	r3, [r7, #60]
 232 0160 97F84720 		ldrb	r2, [r7, #71]
 233 0164 9A74     		strb	r2, [r3, #18]
  86:cc2400_rangetest.c **** 	txbuf[19] = 0; // request number
 234              		.loc 1 86 0
 235 0166 FB6B     		ldr	r3, [r7, #60]
 236 0168 0022     		movs	r2, #0
 237 016a DA74     		strb	r2, [r3, #19]
  87:cc2400_rangetest.c **** 	txbuf[20] = 0xff; // reply pa
 238              		.loc 1 87 0
 239 016c FB6B     		ldr	r3, [r7, #60]
 240 016e FF22     		movs	r2, #255
 241 0170 1A75     		strb	r2, [r3, #20]
  88:cc2400_rangetest.c **** 	txbuf[21] = 0xff; // reply number
 242              		.loc 1 88 0
 243 0172 FB6B     		ldr	r3, [r7, #60]
 244 0174 FF22     		movs	r2, #255
 245 0176 5A75     		strb	r2, [r3, #21]
  89:cc2400_rangetest.c **** 
  90:cc2400_rangetest.c **** 	// Bluetooth-like modulation
  91:cc2400_rangetest.c **** 	cc2400_set(LMTST,   0x2b22);
 246              		.loc 1 91 0
 247 0178 1220     		movs	r0, #18
 248 017a 42F62231 		movw	r1, #11042
 249 017e FFF7FEFF 		bl	cc2400_set
  92:cc2400_rangetest.c **** 	cc2400_set(MDMTST0, 0x134b);
 250              		.loc 1 92 0
 251 0182 1420     		movs	r0, #20
 252 0184 41F24B31 		movw	r1, #4939
 253 0188 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/ccEp1UuM.s 			page 7


  93:cc2400_rangetest.c **** 	cc2400_set(GRMDM,   0x0df1);  // default value
 254              		.loc 1 93 0
 255 018c 2020     		movs	r0, #32
 256 018e 40F6F151 		movw	r1, #3569
 257 0192 FFF7FEFF 		bl	cc2400_set
  94:cc2400_rangetest.c **** 	cc2400_set(FSDIV,   *chan_ptr);
 258              		.loc 1 94 0
 259 0196 7B68     		ldr	r3, [r7, #4]
 260 0198 1B88     		ldrh	r3, [r3]	@ movhi
 261 019a 9BB2     		uxth	r3, r3
 262 019c 0220     		movs	r0, #2
 263 019e 1946     		mov	r1, r3
 264 01a0 FFF7FEFF 		bl	cc2400_set
  95:cc2400_rangetest.c **** 	cc2400_set(SYNCH,   0xf9ae);
 265              		.loc 1 95 0
 266 01a4 2D20     		movs	r0, #45
 267 01a6 4FF6AE11 		movw	r1, #63918
 268 01aa FFF7FEFF 		bl	cc2400_set
  96:cc2400_rangetest.c **** 	cc2400_set(SYNCL,   0x1584);
 269              		.loc 1 96 0
 270 01ae 2C20     		movs	r0, #44
 271 01b0 41F28451 		movw	r1, #5508
 272 01b4 FFF7FEFF 		bl	cc2400_set
  97:cc2400_rangetest.c **** 	cc2400_set(FREND,   8 | pa);
 273              		.loc 1 97 0
 274 01b8 97F84730 		ldrb	r3, [r7, #71]
 275 01bc 43F00803 		orr	r3, r3, #8
 276 01c0 DBB2     		uxtb	r3, r3
 277 01c2 9BB2     		uxth	r3, r3
 278 01c4 0520     		movs	r0, #5
 279 01c6 1946     		mov	r1, r3
 280 01c8 FFF7FEFF 		bl	cc2400_set
  98:cc2400_rangetest.c **** 	cc2400_set(MDMCTRL, 0x0029);
 281              		.loc 1 98 0
 282 01cc 0320     		movs	r0, #3
 283 01ce 2921     		movs	r1, #41
 284 01d0 FFF7FEFF 		bl	cc2400_set
  99:cc2400_rangetest.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 285              		.loc 1 99 0
 286 01d4 00BF     		nop
 287              	.L4:
 288              		.loc 1 99 0 is_stmt 0 discriminator 1
 289 01d6 FFF7FEFF 		bl	cc2400_status
 290 01da 0346     		mov	r3, r0
 291 01dc 03F04003 		and	r3, r3, #64
 292 01e0 002B     		cmp	r3, #0
 293 01e2 F8D0     		beq	.L4
 100:cc2400_rangetest.c **** 	cc2400_strobe(SFSON);
 294              		.loc 1 100 0 is_stmt 1
 295 01e4 6120     		movs	r0, #97
 296 01e6 FFF7FEFF 		bl	cc2400_strobe
 101:cc2400_rangetest.c **** 	while (!(cc2400_status() & FS_LOCK));
 297              		.loc 1 101 0
 298 01ea 00BF     		nop
 299              	.L5:
 300              		.loc 1 101 0 is_stmt 0 discriminator 1
 301 01ec FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/ccEp1UuM.s 			page 8


 302 01f0 0346     		mov	r3, r0
 303 01f2 03F00403 		and	r3, r3, #4
 304 01f6 002B     		cmp	r3, #0
 305 01f8 F8D0     		beq	.L5
 102:cc2400_rangetest.c **** 	TXLED_SET;
 306              		.loc 1 102 0 is_stmt 1
 307 01fa 604B     		ldr	r3, .L31+4
 308 01fc 4FF48072 		mov	r2, #256
 309 0200 1A60     		str	r2, [r3]
 103:cc2400_rangetest.c **** #ifdef UBERTOOTH_ONE
 104:cc2400_rangetest.c **** 	PAEN_SET;
 310              		.loc 1 104 0
 311 0202 5F4B     		ldr	r3, .L31+8
 312 0204 8022     		movs	r2, #128
 313 0206 1A60     		str	r2, [r3]
 105:cc2400_rangetest.c **** #endif
 106:cc2400_rangetest.c **** 	for (pa = 0; pa < 8; pa++) {
 314              		.loc 1 106 0
 315 0208 0023     		movs	r3, #0
 316 020a 87F84730 		strb	r3, [r7, #71]
 317 020e 3EE0     		b	.L6
 318              	.L12:
 107:cc2400_rangetest.c **** 		cc2400_set(FREND, 8 | pa);
 319              		.loc 1 107 0
 320 0210 97F84730 		ldrb	r3, [r7, #71]
 321 0214 43F00803 		orr	r3, r3, #8
 322 0218 DBB2     		uxtb	r3, r3
 323 021a 9BB2     		uxth	r3, r3
 324 021c 0520     		movs	r0, #5
 325 021e 1946     		mov	r1, r3
 326 0220 FFF7FEFF 		bl	cc2400_set
 108:cc2400_rangetest.c **** 		txbuf[18] = pa;
 327              		.loc 1 108 0
 328 0224 FB6B     		ldr	r3, [r7, #60]
 329 0226 97F84720 		ldrb	r2, [r7, #71]
 330 022a 9A74     		strb	r2, [r3, #18]
 109:cc2400_rangetest.c **** 		for (i = 0; i < 16; i++) {
 331              		.loc 1 109 0
 332 022c 0023     		movs	r3, #0
 333 022e FB64     		str	r3, [r7, #76]
 334 0230 25E0     		b	.L7
 335              	.L11:
 110:cc2400_rangetest.c **** 			txbuf[19] = i;
 336              		.loc 1 110 0
 337 0232 FB6C     		ldr	r3, [r7, #76]
 338 0234 DAB2     		uxtb	r2, r3
 339 0236 FB6B     		ldr	r3, [r7, #60]
 340 0238 DA74     		strb	r2, [r3, #19]
 111:cc2400_rangetest.c **** 			while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 341              		.loc 1 111 0
 342 023a 00BF     		nop
 343              	.L8:
 344              		.loc 1 111 0 is_stmt 0 discriminator 1
 345 023c 0E20     		movs	r0, #14
 346 023e FFF7FEFF 		bl	cc2400_get
 347 0242 0346     		mov	r3, r0
 348 0244 03F01F03 		and	r3, r3, #31
ARM GAS  /tmp/ccEp1UuM.s 			page 9


 349 0248 0F2B     		cmp	r3, #15
 350 024a F7D1     		bne	.L8
 112:cc2400_rangetest.c **** 			// transmit a packet
 113:cc2400_rangetest.c **** 			for (j = 0; j < len; j++)
 351              		.loc 1 113 0 is_stmt 1
 352 024c 0023     		movs	r3, #0
 353 024e BB64     		str	r3, [r7, #72]
 354 0250 0AE0     		b	.L9
 355              	.L10:
 114:cc2400_rangetest.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 356              		.loc 1 114 0 discriminator 3
 357 0252 FA6B     		ldr	r2, [r7, #60]
 358 0254 BB6C     		ldr	r3, [r7, #72]
 359 0256 1344     		add	r3, r3, r2
 360 0258 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 361 025a 7020     		movs	r0, #112
 362 025c 1946     		mov	r1, r3
 363 025e FFF7FEFF 		bl	cc2400_set8
 113:cc2400_rangetest.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 364              		.loc 1 113 0 discriminator 3
 365 0262 BB6C     		ldr	r3, [r7, #72]
 366 0264 0133     		adds	r3, r3, #1
 367 0266 BB64     		str	r3, [r7, #72]
 368              	.L9:
 113:cc2400_rangetest.c **** 				cc2400_set8(FIFOREG, txbuf[j]);
 369              		.loc 1 113 0 is_stmt 0 discriminator 1
 370 0268 97F84620 		ldrb	r2, [r7, #70]	@ zero_extendqisi2
 371 026c BB6C     		ldr	r3, [r7, #72]
 372 026e 9A42     		cmp	r2, r3
 373 0270 EFDC     		bgt	.L10
 115:cc2400_rangetest.c **** 			cc2400_strobe(STX);
 374              		.loc 1 115 0 is_stmt 1 discriminator 2
 375 0272 6320     		movs	r0, #99
 376 0274 FFF7FEFF 		bl	cc2400_strobe
 109:cc2400_rangetest.c **** 			txbuf[19] = i;
 377              		.loc 1 109 0 discriminator 2
 378 0278 FB6C     		ldr	r3, [r7, #76]
 379 027a 0133     		adds	r3, r3, #1
 380 027c FB64     		str	r3, [r7, #76]
 381              	.L7:
 109:cc2400_rangetest.c **** 			txbuf[19] = i;
 382              		.loc 1 109 0 is_stmt 0 discriminator 1
 383 027e FB6C     		ldr	r3, [r7, #76]
 384 0280 0F2B     		cmp	r3, #15
 385 0282 D6DD     		ble	.L11
 106:cc2400_rangetest.c **** 		cc2400_set(FREND, 8 | pa);
 386              		.loc 1 106 0 is_stmt 1 discriminator 2
 387 0284 97F84730 		ldrb	r3, [r7, #71]	@ zero_extendqisi2
 388 0288 0133     		adds	r3, r3, #1
 389 028a 87F84730 		strb	r3, [r7, #71]
 390              	.L6:
 106:cc2400_rangetest.c **** 		cc2400_set(FREND, 8 | pa);
 391              		.loc 1 106 0 is_stmt 0 discriminator 1
 392 028e 97F84730 		ldrb	r3, [r7, #71]	@ zero_extendqisi2
 393 0292 072B     		cmp	r3, #7
 394 0294 BCD9     		bls	.L12
 116:cc2400_rangetest.c **** 		}
ARM GAS  /tmp/ccEp1UuM.s 			page 10


 117:cc2400_rangetest.c **** 	}
 118:cc2400_rangetest.c **** 	// sent packet, now look for repeated packet
 119:cc2400_rangetest.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 395              		.loc 1 119 0 is_stmt 1
 396 0296 00BF     		nop
 397              	.L13:
 398              		.loc 1 119 0 is_stmt 0 discriminator 1
 399 0298 0E20     		movs	r0, #14
 400 029a FFF7FEFF 		bl	cc2400_get
 401 029e 0346     		mov	r3, r0
 402 02a0 03F01F03 		and	r3, r3, #31
 403 02a4 0F2B     		cmp	r3, #15
 404 02a6 F7D1     		bne	.L13
 120:cc2400_rangetest.c **** 	TXLED_CLR;
 405              		.loc 1 120 0 is_stmt 1
 406 02a8 364B     		ldr	r3, .L31+12
 407 02aa 4FF48072 		mov	r2, #256
 408 02ae 1A60     		str	r2, [r3]
 121:cc2400_rangetest.c **** 	cc2400_strobe(SRFOFF);
 409              		.loc 1 121 0
 410 02b0 6420     		movs	r0, #100
 411 02b2 FFF7FEFF 		bl	cc2400_strobe
 122:cc2400_rangetest.c **** 	while ((cc2400_status() & FS_LOCK));
 412              		.loc 1 122 0
 413 02b6 00BF     		nop
 414              	.L14:
 415              		.loc 1 122 0 is_stmt 0 discriminator 1
 416 02b8 FFF7FEFF 		bl	cc2400_status
 417 02bc 0346     		mov	r3, r0
 418 02be 03F00403 		and	r3, r3, #4
 419 02c2 002B     		cmp	r3, #0
 420 02c4 F8D1     		bne	.L14
 123:cc2400_rangetest.c **** 	cc2400_set(FSDIV, *chan_ptr - 1);
 421              		.loc 1 123 0 is_stmt 1
 422 02c6 7B68     		ldr	r3, [r7, #4]
 423 02c8 1B88     		ldrh	r3, [r3]	@ movhi
 424 02ca 9BB2     		uxth	r3, r3
 425 02cc 013B     		subs	r3, r3, #1
 426 02ce 9BB2     		uxth	r3, r3
 427 02d0 0220     		movs	r0, #2
 428 02d2 1946     		mov	r1, r3
 429 02d4 FFF7FEFF 		bl	cc2400_set
 124:cc2400_rangetest.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 430              		.loc 1 124 0
 431 02d8 00BF     		nop
 432              	.L15:
 433              		.loc 1 124 0 is_stmt 0 discriminator 1
 434 02da FFF7FEFF 		bl	cc2400_status
 435 02de 0346     		mov	r3, r0
 436 02e0 03F04003 		and	r3, r3, #64
 437 02e4 002B     		cmp	r3, #0
 438 02e6 F8D0     		beq	.L15
 125:cc2400_rangetest.c **** 	cc2400_strobe(SFSON);
 439              		.loc 1 125 0 is_stmt 1
 440 02e8 6120     		movs	r0, #97
 441 02ea FFF7FEFF 		bl	cc2400_strobe
 126:cc2400_rangetest.c **** 	while (!(cc2400_status() & FS_LOCK));
ARM GAS  /tmp/ccEp1UuM.s 			page 11


 442              		.loc 1 126 0
 443 02ee 00BF     		nop
 444              	.L16:
 445              		.loc 1 126 0 is_stmt 0 discriminator 1
 446 02f0 FFF7FEFF 		bl	cc2400_status
 447 02f4 0346     		mov	r3, r0
 448 02f6 03F00403 		and	r3, r3, #4
 449 02fa 002B     		cmp	r3, #0
 450 02fc F8D0     		beq	.L16
 127:cc2400_rangetest.c **** 	RXLED_SET;
 451              		.loc 1 127 0 is_stmt 1
 452 02fe 1F4B     		ldr	r3, .L31+4
 453 0300 1022     		movs	r2, #16
 454 0302 1A60     		str	r2, [r3]
 455              	.L23:
 128:cc2400_rangetest.c **** 	while (1) {
 129:cc2400_rangetest.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 456              		.loc 1 129 0
 457 0304 00BF     		nop
 458              	.L17:
 459              		.loc 1 129 0 is_stmt 0 discriminator 1
 460 0306 0E20     		movs	r0, #14
 461 0308 FFF7FEFF 		bl	cc2400_get
 462 030c 0346     		mov	r3, r0
 463 030e 03F01F03 		and	r3, r3, #31
 464 0312 0F2B     		cmp	r3, #15
 465 0314 F7D1     		bne	.L17
 130:cc2400_rangetest.c **** 		cc2400_strobe(SRX);
 466              		.loc 1 130 0 is_stmt 1
 467 0316 6220     		movs	r0, #98
 468 0318 FFF7FEFF 		bl	cc2400_strobe
 131:cc2400_rangetest.c **** 		while (!(cc2400_status() & SYNC_RECEIVED));
 469              		.loc 1 131 0
 470 031c 00BF     		nop
 471              	.L18:
 472              		.loc 1 131 0 is_stmt 0 discriminator 1
 473 031e FFF7FEFF 		bl	cc2400_status
 474 0322 0346     		mov	r3, r0
 475 0324 03F01003 		and	r3, r3, #16
 476 0328 002B     		cmp	r3, #0
 477 032a F8D0     		beq	.L18
 132:cc2400_rangetest.c **** 		USRLED_SET;
 478              		.loc 1 132 0 is_stmt 1
 479 032c 134B     		ldr	r3, .L31+4
 480 032e 0222     		movs	r2, #2
 481 0330 1A60     		str	r2, [r3]
 133:cc2400_rangetest.c **** 		for (j = 0; j < len; j++)
 482              		.loc 1 133 0
 483 0332 0023     		movs	r3, #0
 484 0334 BB64     		str	r3, [r7, #72]
 485 0336 0CE0     		b	.L19
 486              	.L20:
 134:cc2400_rangetest.c **** 			rxbuf[j] = cc2400_get8(FIFOREG);
 487              		.loc 1 134 0 discriminator 3
 488 0338 7020     		movs	r0, #112
 489 033a FFF7FEFF 		bl	cc2400_get8
 490 033e 0346     		mov	r3, r0
ARM GAS  /tmp/ccEp1UuM.s 			page 12


 491 0340 1946     		mov	r1, r3
 492 0342 7A6B     		ldr	r2, [r7, #52]
 493 0344 BB6C     		ldr	r3, [r7, #72]
 494 0346 1344     		add	r3, r3, r2
 495 0348 0A46     		mov	r2, r1
 496 034a 1A70     		strb	r2, [r3]
 133:cc2400_rangetest.c **** 		for (j = 0; j < len; j++)
 497              		.loc 1 133 0 discriminator 3
 498 034c BB6C     		ldr	r3, [r7, #72]
 499 034e 0133     		adds	r3, r3, #1
 500 0350 BB64     		str	r3, [r7, #72]
 501              	.L19:
 133:cc2400_rangetest.c **** 		for (j = 0; j < len; j++)
 502              		.loc 1 133 0 is_stmt 0 discriminator 1
 503 0352 97F84620 		ldrb	r2, [r7, #70]	@ zero_extendqisi2
 504 0356 BB6C     		ldr	r3, [r7, #72]
 505 0358 9A42     		cmp	r2, r3
 506 035a EDDC     		bgt	.L20
 135:cc2400_rangetest.c **** 		if (cc2400_status() & STATUS_CRC_OK)
 507              		.loc 1 135 0 is_stmt 1
 508 035c FFF7FEFF 		bl	cc2400_status
 509 0360 0346     		mov	r3, r0
 510 0362 03F00803 		and	r3, r3, #8
 511 0366 002B     		cmp	r3, #0
 512 0368 01D0     		beq	.L21
 136:cc2400_rangetest.c **** 			break;
 513              		.loc 1 136 0
 514 036a 00BF     		nop
 137:cc2400_rangetest.c **** 		USRLED_CLR;
 138:cc2400_rangetest.c **** 	}
 139:cc2400_rangetest.c **** 
 140:cc2400_rangetest.c **** 	// done
 141:cc2400_rangetest.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 515              		.loc 1 141 0
 516 036c 0CE0     		b	.L24
 517              	.L21:
 137:cc2400_rangetest.c **** 		USRLED_CLR;
 518              		.loc 1 137 0
 519 036e 054B     		ldr	r3, .L31+12
 520 0370 0222     		movs	r2, #2
 521 0372 1A60     		str	r2, [r3]
 138:cc2400_rangetest.c **** 
 522              		.loc 1 138 0
 523 0374 C6E7     		b	.L23
 524              	.L32:
 525 0376 00BF     		.align	2
 526              	.L31:
 527 0378 00000000 		.word	iap_entry
 528 037c 38C00920 		.word	537509944
 529 0380 58C00920 		.word	537509976
 530 0384 3CC00920 		.word	537509948
 531              	.L24:
 532              		.loc 1 141 0 discriminator 1
 533 0388 0E20     		movs	r0, #14
 534 038a FFF7FEFF 		bl	cc2400_get
 535 038e 0346     		mov	r3, r0
 536 0390 03F01F03 		and	r3, r3, #31
ARM GAS  /tmp/ccEp1UuM.s 			page 13


 537 0394 0F2B     		cmp	r3, #15
 538 0396 F7D1     		bne	.L24
 142:cc2400_rangetest.c **** 	cc2400_strobe(SRFOFF);
 539              		.loc 1 142 0
 540 0398 6420     		movs	r0, #100
 541 039a FFF7FEFF 		bl	cc2400_strobe
 143:cc2400_rangetest.c **** 	while ((cc2400_status() & FS_LOCK));
 542              		.loc 1 143 0
 543 039e 00BF     		nop
 544              	.L25:
 545              		.loc 1 143 0 is_stmt 0 discriminator 1
 546 03a0 FFF7FEFF 		bl	cc2400_status
 547 03a4 0346     		mov	r3, r0
 548 03a6 03F00403 		and	r3, r3, #4
 549 03aa 002B     		cmp	r3, #0
 550 03ac F8D1     		bne	.L25
 144:cc2400_rangetest.c **** #ifdef UBERTOOTH_ONE
 145:cc2400_rangetest.c **** 	PAEN_CLR;
 551              		.loc 1 145 0 is_stmt 1
 552 03ae 204B     		ldr	r3, .L33
 553 03b0 8022     		movs	r2, #128
 554 03b2 1A60     		str	r2, [r3]
 146:cc2400_rangetest.c **** #endif
 147:cc2400_rangetest.c **** 	RXLED_CLR;
 555              		.loc 1 147 0
 556 03b4 1F4B     		ldr	r3, .L33+4
 557 03b6 1022     		movs	r2, #16
 558 03b8 1A60     		str	r2, [r3]
 148:cc2400_rangetest.c **** 
 149:cc2400_rangetest.c **** 	// get test result
 150:cc2400_rangetest.c **** 	rr.valid       = 1;
 559              		.loc 1 150 0
 560 03ba 1F4B     		ldr	r3, .L33+8
 561 03bc 0122     		movs	r2, #1
 562 03be 1A70     		strb	r2, [r3]
 151:cc2400_rangetest.c **** 	rr.request_pa  = rxbuf[18];
 563              		.loc 1 151 0
 564 03c0 7B6B     		ldr	r3, [r7, #52]
 565 03c2 9A7C     		ldrb	r2, [r3, #18]	@ zero_extendqisi2
 566 03c4 1C4B     		ldr	r3, .L33+8
 567 03c6 5A70     		strb	r2, [r3, #1]
 152:cc2400_rangetest.c **** 	rr.request_num = rxbuf[19];
 568              		.loc 1 152 0
 569 03c8 7B6B     		ldr	r3, [r7, #52]
 570 03ca DA7C     		ldrb	r2, [r3, #19]	@ zero_extendqisi2
 571 03cc 1A4B     		ldr	r3, .L33+8
 572 03ce 9A70     		strb	r2, [r3, #2]
 153:cc2400_rangetest.c **** 	rr.reply_pa    = rxbuf[20];
 573              		.loc 1 153 0
 574 03d0 7B6B     		ldr	r3, [r7, #52]
 575 03d2 1A7D     		ldrb	r2, [r3, #20]	@ zero_extendqisi2
 576 03d4 184B     		ldr	r3, .L33+8
 577 03d6 DA70     		strb	r2, [r3, #3]
 154:cc2400_rangetest.c **** 	rr.reply_num   = rxbuf[21];
 578              		.loc 1 154 0
 579 03d8 7B6B     		ldr	r3, [r7, #52]
 580 03da 5A7D     		ldrb	r2, [r3, #21]	@ zero_extendqisi2
ARM GAS  /tmp/ccEp1UuM.s 			page 14


 581 03dc 164B     		ldr	r3, .L33+8
 582 03de 1A71     		strb	r2, [r3, #4]
 155:cc2400_rangetest.c **** 
 156:cc2400_rangetest.c **** 	// make sure rx packet is as expected
 157:cc2400_rangetest.c **** 	txbuf[1] = 1; // expected value in rxbuf
 583              		.loc 1 157 0
 584 03e0 FB6B     		ldr	r3, [r7, #60]
 585 03e2 0122     		movs	r2, #1
 586 03e4 5A70     		strb	r2, [r3, #1]
 158:cc2400_rangetest.c **** 	for (i = 0; i < 18; i++)
 587              		.loc 1 158 0
 588 03e6 0023     		movs	r3, #0
 589 03e8 FB64     		str	r3, [r7, #76]
 590 03ea 12E0     		b	.L26
 591              	.L28:
 159:cc2400_rangetest.c **** 		if (rxbuf[i] != txbuf[i])
 592              		.loc 1 159 0
 593 03ec 7A6B     		ldr	r2, [r7, #52]
 594 03ee FB6C     		ldr	r3, [r7, #76]
 595 03f0 1344     		add	r3, r3, r2
 596 03f2 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 597 03f4 F96B     		ldr	r1, [r7, #60]
 598 03f6 FB6C     		ldr	r3, [r7, #76]
 599 03f8 0B44     		add	r3, r3, r1
 600 03fa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 601 03fc 9A42     		cmp	r2, r3
 602 03fe 05D0     		beq	.L27
 160:cc2400_rangetest.c **** 			rr.valid = 2 + i;
 603              		.loc 1 160 0
 604 0400 FB6C     		ldr	r3, [r7, #76]
 605 0402 DBB2     		uxtb	r3, r3
 606 0404 0233     		adds	r3, r3, #2
 607 0406 DAB2     		uxtb	r2, r3
 608 0408 0B4B     		ldr	r3, .L33+8
 609 040a 1A70     		strb	r2, [r3]
 610              	.L27:
 158:cc2400_rangetest.c **** 	for (i = 0; i < 18; i++)
 611              		.loc 1 158 0 discriminator 2
 612 040c FB6C     		ldr	r3, [r7, #76]
 613 040e 0133     		adds	r3, r3, #1
 614 0410 FB64     		str	r3, [r7, #76]
 615              	.L26:
 158:cc2400_rangetest.c **** 	for (i = 0; i < 18; i++)
 616              		.loc 1 158 0 is_stmt 0 discriminator 1
 617 0412 FB6C     		ldr	r3, [r7, #76]
 618 0414 112B     		cmp	r3, #17
 619 0416 E9DD     		ble	.L28
 161:cc2400_rangetest.c **** 
 162:cc2400_rangetest.c **** 	USRLED_CLR;
 620              		.loc 1 162 0 is_stmt 1
 621 0418 064B     		ldr	r3, .L33+4
 622 041a 0222     		movs	r2, #2
 623 041c 1A60     		str	r2, [r3]
 624 041e 0123     		movs	r3, #1
 625              	.L3:
 626 0420 D7F800D0 		ldr	sp, [r7]
 627 0424 012B     		cmp	r3, #1
ARM GAS  /tmp/ccEp1UuM.s 			page 15


 163:cc2400_rangetest.c **** #endif
 164:cc2400_rangetest.c **** }
 628              		.loc 1 164 0
 629 0426 5437     		adds	r7, r7, #84
 630              		.cfi_def_cfa_offset 36
 631 0428 BD46     		mov	sp, r7
 632              		.cfi_def_cfa_register 13
 633              		@ sp needed
 634 042a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 635              	.L34:
 636 042e 00BF     		.align	2
 637              	.L33:
 638 0430 5CC00920 		.word	537509980
 639 0434 3CC00920 		.word	537509948
 640 0438 00000000 		.word	rr
 641              		.cfi_endproc
 642              	.LFE0:
 644              		.section	.rodata
 645              		.align	2
 646              	.LC0:
 647 0000 54       		.byte	84
 648 0001 75       		.byte	117
 649 0002 C5       		.byte	-59
 650 0003 8C       		.byte	-116
 651 0004 C7       		.byte	-57
 652 0005 33       		.byte	51
 653 0006 45       		.byte	69
 654 0007 E7       		.byte	-25
 655 0008 2A       		.byte	42
 656              		.section	.text.cc2400_txtest,"ax",%progbits
 657              		.align	2
 658              		.global	cc2400_txtest
 659              		.thumb
 660              		.thumb_func
 662              	cc2400_txtest:
 663              	.LFB1:
 165:cc2400_rangetest.c **** 
 166:cc2400_rangetest.c **** 
 167:cc2400_rangetest.c **** void cc2400_txtest(volatile u8 *mod_ptr, volatile u16 *chan_ptr)
 168:cc2400_rangetest.c **** {
 664              		.loc 1 168 0
 665              		.cfi_startproc
 666              		@ args = 0, pretend = 0, frame = 32
 667              		@ frame_needed = 1, uses_anonymous_args = 0
 668 0000 80B5     		push	{r7, lr}
 669              		.cfi_def_cfa_offset 8
 670              		.cfi_offset 7, -8
 671              		.cfi_offset 14, -4
 672 0002 88B0     		sub	sp, sp, #32
 673              		.cfi_def_cfa_offset 40
 674 0004 00AF     		add	r7, sp, #0
 675              		.cfi_def_cfa_register 7
 676 0006 7860     		str	r0, [r7, #4]
 677 0008 3960     		str	r1, [r7]
 169:cc2400_rangetest.c **** #ifdef TX_ENABLE
 170:cc2400_rangetest.c **** 	u8 id_pkt1[9] = {0x54, 0x75, 0xc5, 0x8c, 0xc7, 0x33, 0x45, 0xe7, 0x2a};
 678              		.loc 1 170 0
ARM GAS  /tmp/ccEp1UuM.s 			page 16


 679 000a 5B4A     		ldr	r2, .L49
 680 000c 07F10803 		add	r3, r7, #8
 681 0010 1068     		ldr	r0, [r2]	@ unaligned
 682 0012 5168     		ldr	r1, [r2, #4]	@ unaligned
 683 0014 03C3     		stmia	r3!, {r0, r1}
 684 0016 127A     		ldrb	r2, [r2, #8]
 685 0018 1A70     		strb	r2, [r3]
 171:cc2400_rangetest.c **** //	u8 id_pkt1[2] = {0xff, 0xff};
 172:cc2400_rangetest.c **** //	u8 id_pkt1[9] = {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};
 173:cc2400_rangetest.c **** //	u8 id_pkt2[9] = {0x52, 0x8e, 0xd3, 0xc3, 0x4c, 0xb3, 0x45, 0xe7, 0x2a};
 174:cc2400_rangetest.c **** //	u8 id_pkt3[9] = {0x52, 0x8e, 0xd3, 0xc3, 0x4c, 0xb3, 0x45, 0xe7, 0x2a};
 175:cc2400_rangetest.c **** 	
 176:cc2400_rangetest.c **** 	u16 mdmctrl;
 177:cc2400_rangetest.c **** 	if (*mod_ptr == MOD_BT_BASIC_RATE) {
 686              		.loc 1 177 0
 687 001a 7B68     		ldr	r3, [r7, #4]
 688 001c 1B78     		ldrb	r3, [r3]
 689 001e DBB2     		uxtb	r3, r3
 690 0020 002B     		cmp	r3, #0
 691 0022 02D1     		bne	.L36
 178:cc2400_rangetest.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 692              		.loc 1 178 0
 693 0024 2923     		movs	r3, #41
 694 0026 FB82     		strh	r3, [r7, #22]	@ movhi
 695 0028 07E0     		b	.L37
 696              	.L36:
 179:cc2400_rangetest.c **** 	} else if (*mod_ptr == MOD_BT_LOW_ENERGY) {
 697              		.loc 1 179 0
 698 002a 7B68     		ldr	r3, [r7, #4]
 699 002c 1B78     		ldrb	r3, [r3]
 700 002e DBB2     		uxtb	r3, r3
 701 0030 012B     		cmp	r3, #1
 702 0032 40F09D80 		bne	.L35
 180:cc2400_rangetest.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 703              		.loc 1 180 0
 704 0036 4023     		movs	r3, #64
 705 0038 FB82     		strh	r3, [r7, #22]	@ movhi
 706              	.L37:
 181:cc2400_rangetest.c **** 	} else {
 182:cc2400_rangetest.c **** 		/* oops */
 183:cc2400_rangetest.c **** 		return;
 184:cc2400_rangetest.c **** 	}
 185:cc2400_rangetest.c **** 
 186:cc2400_rangetest.c **** 	cc2400_set(MANAND, 0x7fff);
 707              		.loc 1 186 0
 708 003a 0D20     		movs	r0, #13
 709 003c 47F6FF71 		movw	r1, #32767
 710 0040 FFF7FEFF 		bl	cc2400_set
 187:cc2400_rangetest.c **** 
 188:cc2400_rangetest.c **** 	cc2400_set(LMTST,   0x2b22); // receiver
 711              		.loc 1 188 0
 712 0044 1220     		movs	r0, #18
 713 0046 42F62231 		movw	r1, #11042
 714 004a FFF7FEFF 		bl	cc2400_set
 189:cc2400_rangetest.c **** 	cc2400_set(MDMTST0, 0x134b); // wo PRNG
 715              		.loc 1 189 0
 716 004e 1420     		movs	r0, #20
ARM GAS  /tmp/ccEp1UuM.s 			page 17


 717 0050 41F24B31 		movw	r1, #4939
 718 0054 FFF7FEFF 		bl	cc2400_set
 190:cc2400_rangetest.c **** 	cc2400_set(GRMDM,   0x0f60); // 0 preamble, 8 bit cync word
 719              		.loc 1 190 0
 720 0058 2020     		movs	r0, #32
 721 005a 4FF47661 		mov	r1, #3936
 722 005e FFF7FEFF 		bl	cc2400_set
 191:cc2400_rangetest.c **** 	cc2400_set(FSDIV,   *chan_ptr);
 723              		.loc 1 191 0
 724 0062 3B68     		ldr	r3, [r7]
 725 0064 1B88     		ldrh	r3, [r3]	@ movhi
 726 0066 9BB2     		uxth	r3, r3
 727 0068 0220     		movs	r0, #2
 728 006a 1946     		mov	r1, r3
 729 006c FFF7FEFF 		bl	cc2400_set
 192:cc2400_rangetest.c **** 	cc2400_set(MDMCTRL, 0x0040); // 250 kHz 
 730              		.loc 1 192 0
 731 0070 0320     		movs	r0, #3
 732 0072 4021     		movs	r1, #64
 733 0074 FFF7FEFF 		bl	cc2400_set
 193:cc2400_rangetest.c **** //	cc2400_set(MDMCTRL, 0x0029); // 250 kHz 
 194:cc2400_rangetest.c **** 	//cc2400_set(MDMCTRL, 0x0029); // 250 kHz 
 195:cc2400_rangetest.c **** 	cc2400_set(INT, 0x000b);
 734              		.loc 1 195 0
 735 0078 2320     		movs	r0, #35
 736 007a 0B21     		movs	r1, #11
 737 007c FFF7FEFF 		bl	cc2400_set
 196:cc2400_rangetest.c **** //	cc2400_set(SYNCH,   0xf9ae);
 197:cc2400_rangetest.c **** //	cc2400_set(SYNCL,   0x1584);
 198:cc2400_rangetest.c **** 
 199:cc2400_rangetest.c **** 	u16 gio_save;
 200:cc2400_rangetest.c **** 	gio_save = cc2400_get(IOCFG);
 738              		.loc 1 200 0
 739 0080 0820     		movs	r0, #8
 740 0082 FFF7FEFF 		bl	cc2400_get
 741 0086 0346     		mov	r3, r0
 742 0088 BB82     		strh	r3, [r7, #20]	@ movhi
 201:cc2400_rangetest.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 743              		.loc 1 201 0
 744 008a BB8A     		ldrh	r3, [r7, #20]
 745 008c C3F30803 		ubfx	r3, r3, #0, #9
 746 0090 9BB2     		uxth	r3, r3
 747 0092 43F49C43 		orr	r3, r3, #19968
 748 0096 9BB2     		uxth	r3, r3
 749 0098 9BB2     		uxth	r3, r3
 750 009a 0820     		movs	r0, #8
 751 009c 1946     		mov	r1, r3
 752 009e FFF7FEFF 		bl	cc2400_set
 202:cc2400_rangetest.c **** //	cc2400_set(SYNCH, 0xffff);
 203:cc2400_rangetest.c **** //	cc2400_set(SYNCL, 0xffff);
 204:cc2400_rangetest.c **** //	u8 pa = 7;
 205:cc2400_rangetest.c **** //	cc2400_set(FREND, 0b1011);
 206:cc2400_rangetest.c **** 
 207:cc2400_rangetest.c **** //	cc2400_set(GRDEC, 49);
 208:cc2400_rangetest.c **** 
 209:cc2400_rangetest.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 753              		.loc 1 209 0
ARM GAS  /tmp/ccEp1UuM.s 			page 18


 754 00a2 00BF     		nop
 755              	.L40:
 756              		.loc 1 209 0 is_stmt 0 discriminator 1
 757 00a4 FFF7FEFF 		bl	cc2400_status
 758 00a8 0346     		mov	r3, r0
 759 00aa 03F04003 		and	r3, r3, #64
 760 00ae 002B     		cmp	r3, #0
 761 00b0 F8D0     		beq	.L40
 210:cc2400_rangetest.c **** 	cc2400_strobe(SFSON);
 762              		.loc 1 210 0 is_stmt 1
 763 00b2 6120     		movs	r0, #97
 764 00b4 FFF7FEFF 		bl	cc2400_strobe
 211:cc2400_rangetest.c **** 	while (!(cc2400_status() & FS_LOCK));
 765              		.loc 1 211 0
 766 00b8 00BF     		nop
 767              	.L41:
 768              		.loc 1 211 0 is_stmt 0 discriminator 1
 769 00ba FFF7FEFF 		bl	cc2400_status
 770 00be 0346     		mov	r3, r0
 771 00c0 03F00403 		and	r3, r3, #4
 772 00c4 002B     		cmp	r3, #0
 773 00c6 F8D0     		beq	.L41
 212:cc2400_rangetest.c **** 	TXLED_SET;
 774              		.loc 1 212 0 is_stmt 1
 775 00c8 2C4B     		ldr	r3, .L49+4
 776 00ca 4FF48072 		mov	r2, #256
 777 00ce 1A60     		str	r2, [r3]
 213:cc2400_rangetest.c **** //	cc2400_strobe(STX);
 214:cc2400_rangetest.c **** #ifdef UBERTOOTH_ONE
 215:cc2400_rangetest.c **** 	PAEN_SET;
 778              		.loc 1 215 0
 779 00d0 2B4B     		ldr	r3, .L49+8
 780 00d2 8022     		movs	r2, #128
 781 00d4 1A60     		str	r2, [r3]
 782              	.LBB2:
 216:cc2400_rangetest.c **** #endif
 217:cc2400_rangetest.c **** 		for (int j = 0; j < 1000; j++)
 783              		.loc 1 217 0
 784 00d6 0023     		movs	r3, #0
 785 00d8 FB61     		str	r3, [r7, #28]
 786 00da 25E0     		b	.L42
 787              	.L46:
 788              	.LBB3:
 218:cc2400_rangetest.c **** 		{
 219:cc2400_rangetest.c **** 			while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 789              		.loc 1 219 0
 790 00dc 00BF     		nop
 791              	.L43:
 792              		.loc 1 219 0 is_stmt 0 discriminator 1
 793 00de 0E20     		movs	r0, #14
 794 00e0 FFF7FEFF 		bl	cc2400_get
 795 00e4 0346     		mov	r3, r0
 796 00e6 03F01F03 		and	r3, r3, #31
 797 00ea 0F2B     		cmp	r3, #15
 798 00ec F7D1     		bne	.L43
 220:cc2400_rangetest.c **** 			int k = 10000; while (--k);
 799              		.loc 1 220 0 is_stmt 1
ARM GAS  /tmp/ccEp1UuM.s 			page 19


 800 00ee 42F21073 		movw	r3, #10000
 801 00f2 BB61     		str	r3, [r7, #24]
 802              	.L44:
 803              		.loc 1 220 0 is_stmt 0 discriminator 2
 804 00f4 BB69     		ldr	r3, [r7, #24]
 805 00f6 013B     		subs	r3, r3, #1
 806 00f8 BB61     		str	r3, [r7, #24]
 807 00fa BB69     		ldr	r3, [r7, #24]
 808 00fc 002B     		cmp	r3, #0
 809 00fe F9D1     		bne	.L44
 221:cc2400_rangetest.c **** 			cc2400_strobe (STX);
 810              		.loc 1 221 0 is_stmt 1
 811 0100 6320     		movs	r0, #99
 812 0102 FFF7FEFF 		bl	cc2400_strobe
 222:cc2400_rangetest.c **** 			
 223:cc2400_rangetest.c **** 			while (GIO6);
 813              		.loc 1 223 0
 814 0106 00BF     		nop
 815              	.L45:
 816              		.loc 1 223 0 is_stmt 0 discriminator 1
 817 0108 1E4B     		ldr	r3, .L49+12
 818 010a 1B68     		ldr	r3, [r3]
 819 010c 03F00403 		and	r3, r3, #4
 820 0110 002B     		cmp	r3, #0
 821 0112 F9D1     		bne	.L45
 224:cc2400_rangetest.c **** 			cc2400_spi_buf(FIFOREG, 9, id_pkt1);		
 822              		.loc 1 224 0 is_stmt 1 discriminator 2
 823 0114 07F10803 		add	r3, r7, #8
 824 0118 7020     		movs	r0, #112
 825 011a 0921     		movs	r1, #9
 826 011c 1A46     		mov	r2, r3
 827 011e FFF7FEFF 		bl	cc2400_spi_buf
 828              	.LBE3:
 217:cc2400_rangetest.c **** 		{
 829              		.loc 1 217 0 discriminator 2
 830 0122 FB69     		ldr	r3, [r7, #28]
 831 0124 0133     		adds	r3, r3, #1
 832 0126 FB61     		str	r3, [r7, #28]
 833              	.L42:
 217:cc2400_rangetest.c **** 		{
 834              		.loc 1 217 0 is_stmt 0 discriminator 1
 835 0128 FB69     		ldr	r3, [r7, #28]
 836 012a B3F57A7F 		cmp	r3, #1000
 837 012e D5DB     		blt	.L46
 838              	.LBE2:
 225:cc2400_rangetest.c **** 
 226:cc2400_rangetest.c **** 		}	
 227:cc2400_rangetest.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 839              		.loc 1 227 0 is_stmt 1
 840 0130 00BF     		nop
 841              	.L47:
 842              		.loc 1 227 0 is_stmt 0 discriminator 1
 843 0132 0E20     		movs	r0, #14
 844 0134 FFF7FEFF 		bl	cc2400_get
 845 0138 0346     		mov	r3, r0
 846 013a 03F01F03 		and	r3, r3, #31
 847 013e 0F2B     		cmp	r3, #15
ARM GAS  /tmp/ccEp1UuM.s 			page 20


 848 0140 F7D1     		bne	.L47
 228:cc2400_rangetest.c **** 	TXLED_CLR;
 849              		.loc 1 228 0 is_stmt 1
 850 0142 114B     		ldr	r3, .L49+16
 851 0144 4FF48072 		mov	r2, #256
 852 0148 1A60     		str	r2, [r3]
 229:cc2400_rangetest.c **** 	cc2400_strobe(SRFOFF);
 853              		.loc 1 229 0
 854 014a 6420     		movs	r0, #100
 855 014c FFF7FEFF 		bl	cc2400_strobe
 230:cc2400_rangetest.c **** 	while ((cc2400_status () & FS_LOCK));
 856              		.loc 1 230 0
 857 0150 00BF     		nop
 858              	.L48:
 859              		.loc 1 230 0 is_stmt 0 discriminator 1
 860 0152 FFF7FEFF 		bl	cc2400_status
 861 0156 0346     		mov	r3, r0
 862 0158 03F00403 		and	r3, r3, #4
 863 015c 002B     		cmp	r3, #0
 864 015e F8D1     		bne	.L48
 231:cc2400_rangetest.c **** #ifdef UBERTOOTH_ONE
 232:cc2400_rangetest.c **** 	PAEN_CLR;
 865              		.loc 1 232 0 is_stmt 1
 866 0160 0A4B     		ldr	r3, .L49+20
 867 0162 8022     		movs	r2, #128
 868 0164 1A60     		str	r2, [r3]
 233:cc2400_rangetest.c **** #endif
 234:cc2400_rangetest.c **** 	cc2400_set(IOCFG, gio_save);
 869              		.loc 1 234 0
 870 0166 BB8A     		ldrh	r3, [r7, #20]
 871 0168 0820     		movs	r0, #8
 872 016a 1946     		mov	r1, r3
 873 016c FFF7FEFF 		bl	cc2400_set
 874              	.L35:
 235:cc2400_rangetest.c **** 
 236:cc2400_rangetest.c **** #endif
 237:cc2400_rangetest.c **** }
 875              		.loc 1 237 0
 876 0170 2037     		adds	r7, r7, #32
 877              		.cfi_def_cfa_offset 8
 878 0172 BD46     		mov	sp, r7
 879              		.cfi_def_cfa_register 13
 880              		@ sp needed
 881 0174 80BD     		pop	{r7, pc}
 882              	.L50:
 883 0176 00BF     		.align	2
 884              	.L49:
 885 0178 00000000 		.word	.LC0
 886 017c 38C00920 		.word	537509944
 887 0180 58C00920 		.word	537509976
 888 0184 54C00920 		.word	537509972
 889 0188 3CC00920 		.word	537509948
 890 018c 5CC00920 		.word	537509980
 891              		.cfi_endproc
 892              	.LFE1:
 894              		.text
 895              	.Letext0:
ARM GAS  /tmp/ccEp1UuM.s 			page 21


 896              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 897              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 898              		.file 4 "../common/ubertooth.h"
 899              		.file 5 "cc2400_rangetest.h"
ARM GAS  /tmp/ccEp1UuM.s 			page 22


DEFINED SYMBOLS
                            *ABS*:0000000000000000 cc2400_rangetest.c
     /tmp/ccEp1UuM.s:19     .data:0000000000000000 $d
     /tmp/ccEp1UuM.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000005 rr
     /tmp/ccEp1UuM.s:26     .text.cc2400_rangetest:0000000000000000 $t
     /tmp/ccEp1UuM.s:31     .text.cc2400_rangetest:0000000000000000 cc2400_rangetest
     /tmp/ccEp1UuM.s:527    .text.cc2400_rangetest:0000000000000378 $d
     /tmp/ccEp1UuM.s:533    .text.cc2400_rangetest:0000000000000388 $t
     /tmp/ccEp1UuM.s:638    .text.cc2400_rangetest:0000000000000430 $d
     /tmp/ccEp1UuM.s:645    .rodata:0000000000000000 $d
     /tmp/ccEp1UuM.s:657    .text.cc2400_txtest:0000000000000000 $t
     /tmp/ccEp1UuM.s:662    .text.cc2400_txtest:0000000000000000 cc2400_txtest
     /tmp/ccEp1UuM.s:885    .text.cc2400_txtest:0000000000000178 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
cc2400_status
cc2400_strobe
cc2400_get
cc2400_set8
cc2400_get8
cc2400_spi_buf
