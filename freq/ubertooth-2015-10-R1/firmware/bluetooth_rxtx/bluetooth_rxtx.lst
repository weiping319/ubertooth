ARM GAS  /tmp/ccTf0kks.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/ccTf0kks.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	whitening:
  81 002c 01       		.byte	1
  82 002d 01       		.byte	1
  83 002e 01       		.byte	1
  84 002f 01       		.byte	1
  85 0030 00       		.byte	0
  86 0031 01       		.byte	1
  87 0032 00       		.byte	0
  88 0033 01       		.byte	1
  89 0034 00       		.byte	0
  90 0035 01       		.byte	1
  91 0036 00       		.byte	0
  92 0037 00       		.byte	0
  93 0038 00       		.byte	0
  94 0039 00       		.byte	0
  95 003a 01       		.byte	1
  96 003b 00       		.byte	0
  97 003c 01       		.byte	1
  98 003d 01       		.byte	1
  99 003e 00       		.byte	0
 100 003f 01       		.byte	1
 101 0040 01       		.byte	1
 102 0041 01       		.byte	1
 103 0042 01       		.byte	1
 104 0043 00       		.byte	0
 105 0044 00       		.byte	0
 106 0045 01       		.byte	1
 107 0046 01       		.byte	1
 108 0047 01       		.byte	1
 109 0048 00       		.byte	0
 110 0049 00       		.byte	0
 111 004a 01       		.byte	1
 112 004b 00       		.byte	0
 113 004c 01       		.byte	1
 114 004d 00       		.byte	0
 115 004e 01       		.byte	1
 116 004f 01       		.byte	1
 117 0050 00       		.byte	0
 118 0051 00       		.byte	0
 119 0052 01       		.byte	1
 120 0053 01       		.byte	1
 121 0054 00       		.byte	0
 122 0055 00       		.byte	0
ARM GAS  /tmp/ccTf0kks.s 			page 3


 123 0056 00       		.byte	0
 124 0057 00       		.byte	0
 125 0058 00       		.byte	0
 126 0059 01       		.byte	1
 127 005a 01       		.byte	1
 128 005b 00       		.byte	0
 129 005c 01       		.byte	1
 130 005d 01       		.byte	1
 131 005e 00       		.byte	0
 132 005f 01       		.byte	1
 133 0060 00       		.byte	0
 134 0061 01       		.byte	1
 135 0062 01       		.byte	1
 136 0063 01       		.byte	1
 137 0064 00       		.byte	0
 138 0065 01       		.byte	1
 139 0066 00       		.byte	0
 140 0067 00       		.byte	0
 141 0068 00       		.byte	0
 142 0069 01       		.byte	1
 143 006a 01       		.byte	1
 144 006b 00       		.byte	0
 145 006c 00       		.byte	0
 146 006d 01       		.byte	1
 147 006e 00       		.byte	0
 148 006f 00       		.byte	0
 149 0070 00       		.byte	0
 150 0071 01       		.byte	1
 151 0072 00       		.byte	0
 152 0073 00       		.byte	0
 153 0074 00       		.byte	0
 154 0075 00       		.byte	0
 155 0076 00       		.byte	0
 156 0077 00       		.byte	0
 157 0078 01       		.byte	1
 158 0079 00       		.byte	0
 159 007a 00       		.byte	0
 160 007b 01       		.byte	1
 161 007c 00       		.byte	0
 162 007d 00       		.byte	0
 163 007e 01       		.byte	1
 164 007f 01       		.byte	1
 165 0080 00       		.byte	0
 166 0081 01       		.byte	1
 167 0082 00       		.byte	0
 168 0083 00       		.byte	0
 169 0084 01       		.byte	1
 170 0085 01       		.byte	1
 171 0086 01       		.byte	1
 172 0087 01       		.byte	1
 173 0088 00       		.byte	0
 174 0089 01       		.byte	1
 175 008a 01       		.byte	1
 176 008b 01       		.byte	1
 177 008c 00       		.byte	0
 178 008d 00       		.byte	0
 179 008e 00       		.byte	0
ARM GAS  /tmp/ccTf0kks.s 			page 4


 180 008f 00       		.byte	0
 181 0090 01       		.byte	1
 182 0091 01       		.byte	1
 183 0092 01       		.byte	1
 184 0093 01       		.byte	1
 185 0094 01       		.byte	1
 186 0095 01       		.byte	1
 187 0096 01       		.byte	1
 188 0097 00       		.byte	0
 189 0098 00       		.byte	0
 190 0099 00       		.byte	0
 191 009a 01       		.byte	1
 192 009b 01       		.byte	1
 193 009c 01       		.byte	1
 194 009d 00       		.byte	0
 195 009e 01       		.byte	1
 196 009f 01       		.byte	1
 197 00a0 00       		.byte	0
 198 00a1 00       		.byte	0
 199 00a2 00       		.byte	0
 200 00a3 01       		.byte	1
 201 00a4 00       		.byte	0
 202 00a5 01       		.byte	1
 203 00a6 00       		.byte	0
 204 00a7 00       		.byte	0
 205 00a8 01       		.byte	1
 206 00a9 00       		.byte	0
 207 00aa 01       		.byte	1
 208 00ab 00       		.align	2
 211              	whitening_index:
 212 00ac 46       		.byte	70
 213 00ad 3E       		.byte	62
 214 00ae 78       		.byte	120
 215 00af 6F       		.byte	111
 216 00b0 4D       		.byte	77
 217 00b1 2E       		.byte	46
 218 00b2 0F       		.byte	15
 219 00b3 65       		.byte	101
 220 00b4 42       		.byte	66
 221 00b5 27       		.byte	39
 222 00b6 1F       		.byte	31
 223 00b7 1A       		.byte	26
 224 00b8 50       		.byte	80
 225 00b9 53       		.byte	83
 226 00ba 7D       		.byte	125
 227 00bb 59       		.byte	89
 228 00bc 0A       		.byte	10
 229 00bd 23       		.byte	35
 230 00be 08       		.byte	8
 231 00bf 36       		.byte	54
 232 00c0 7A       		.byte	122
 233 00c1 11       		.byte	17
 234 00c2 21       		.byte	33
 235 00c3 00       		.byte	0
 236 00c4 3A       		.byte	58
 237 00c5 73       		.byte	115
 238 00c6 06       		.byte	6
ARM GAS  /tmp/ccTf0kks.s 			page 5


 239 00c7 5E       		.byte	94
 240 00c8 56       		.byte	86
 241 00c9 31       		.byte	49
 242 00ca 34       		.byte	52
 243 00cb 14       		.byte	20
 244 00cc 28       		.byte	40
 245 00cd 1B       		.byte	27
 246 00ce 54       		.byte	84
 247 00cf 5A       		.byte	90
 248 00d0 3F       		.byte	63
 249 00d1 70       		.byte	112
 250 00d2 2F       		.byte	47
 251 00d3 66       		.byte	102
 252              		.align	2
 255              	hop_interval_lut:
 256 00d4 00       		.byte	0
 257 00d5 01       		.byte	1
 258 00d6 13       		.byte	19
 259 00d7 19       		.byte	25
 260 00d8 1C       		.byte	28
 261 00d9 0F       		.byte	15
 262 00da 1F       		.byte	31
 263 00db 10       		.byte	16
 264 00dc 0E       		.byte	14
 265 00dd 21       		.byte	33
 266 00de 1A       		.byte	26
 267 00df 1B       		.byte	27
 268 00e0 22       		.byte	34
 269 00e1 14       		.byte	20
 270 00e2 08       		.byte	8
 271 00e3 05       		.byte	5
 272 00e4 07       		.byte	7
 273 00e5 18       		.byte	24
 274 00e6 23       		.byte	35
 275 00e7 02       		.byte	2
 276 00e8 0D       		.byte	13
 277 00e9 1E       		.byte	30
 278 00ea 20       		.byte	32
 279 00eb 1D       		.byte	29
 280 00ec 11       		.byte	17
 281 00ed 03       		.byte	3
 282 00ee 0A       		.byte	10
 283 00ef 0B       		.byte	11
 284 00f0 04       		.byte	4
 285 00f1 17       		.byte	23
 286 00f2 15       		.byte	21
 287 00f3 06       		.byte	6
 288 00f4 16       		.byte	22
 289 00f5 09       		.byte	9
 290 00f6 0C       		.byte	12
 291 00f7 12       		.byte	18
 292 00f8 24       		.byte	36
 293 00f9 000000   		.align	2
 296              	whitening_word:
 297 00fc 40B2BCC3 		.word	-1011043776
 298 0100 1F374A5F 		.word	1598699295
 299 0104 85F69C9A 		.word	-1700989307
ARM GAS  /tmp/ccTf0kks.s 			page 6


 300 0108 C1D6C544 		.word	1153816257
 301 010c 2059DEE1 		.word	-505521888
 302 0110 8F1BA5AF 		.word	-1348134001
 303 0114 427B4ECD 		.word	-850494654
 304 0118 60EB6222 		.word	576908128
 305 011c 902CEFF0 		.word	-252760944
 306 0120 C78DD257 		.word	1473416647
 307 0124 A13DA766 		.word	1722236321
 308 0128 B0753111 		.word	288454064
 309 012c 8940B2BC 		.word	-1129168759
 310 0130 C31F374A 		.word	1245126595
 311 0134 5F85F69C 		.word	-1661565601
 312 0138 9AC1D6C5 		.word	-975781478
 313 013c 442059DE 		.word	-564584380
 314 0140 E18F1BA5 		.word	-1524920351
 315 0144 AF427B4E 		.word	1316700847
 316 0148 CD60EB62 		.word	1659592909
 317 014c 22902CEF 		.word	-282292190
 318 0150 F0C78DD2 		.word	-762460176
 319 0154 57A13DA7 		.word	-1489133225
 320 0158 66B07531 		.word	829796454
 321 015c D257A13D 		.word	1033983954
 322 0160 A766B075 		.word	1974494887
 323 0164 31114896 		.word	-1773661903
 324 0168 77F8E346 		.word	1189345399
 325 016c E9ABD09E 		.word	-1630491671
 326 0170 5333D8BA 		.word	-1160236205
 327 0174 980824CB 		.word	-886830952
 328 0178 3BFC71A3 		.word	-1552810949
 329 017c F45568CF 		.word	-815245836
 330 0180 A9196C5D 		.word	1567365545
 331 0184 4C0492E5 		.word	-443415476
 332 0188 1DFEB851 		.word	1371078173
 333 018c 1BA5AF42 		.word	1118807323
 334 0190 7B4ECD60 		.word	1624067707
 335 0194 EB622290 		.word	-1876794645
 336 0198 2CEFF0C7 		.word	-940511444
 337 019c 8DD257A1 		.word	-1588079987
 338 01a0 3DA766B0 		.word	-1335449795
 339 01a4 75311148 		.word	1209086325
 340 01a8 9677F8E3 		.word	-470255722
 341 01ac 46E9ABD0 		.word	-794039994
 342 01b0 9E5333D8 		.word	-667724898
 343 01b4 BA980824 		.word	604543162
 344 01b8 CB3BFC71 		.word	1912355787
 345 01bc 6479873F 		.word	1065843044
 346 01c0 6E94BE0A 		.word	180261998
 347 01c4 ED393583 		.word	-2093663763
 348 01c8 AD8B8940 		.word	1082756013
 349 01cc B2BCC31F 		.word	532921522
 350 01d0 374A5F85 		.word	-2057352649
 351 01d4 F69C9AC1 		.word	-1046831882
 352 01d8 D6C54420 		.word	541378006
 353 01dc 59DEE18F 		.word	-1881022887
 354 01e0 1BA5AF42 		.word	1118807323
 355 01e4 7B4ECD60 		.word	1624067707
 356 01e8 EB622290 		.word	-1876794645
ARM GAS  /tmp/ccTf0kks.s 			page 7


 357 01ec AD8B8940 		.word	1082756013
 358 01f0 B2BCC31F 		.word	532921522
 359 01f4 374A5F85 		.word	-2057352649
 360 01f8 F69C9AC1 		.word	-1046831882
 361 01fc D6C54420 		.word	541378006
 362 0200 59DEE18F 		.word	-1881022887
 363 0204 1BA5AF42 		.word	1118807323
 364 0208 7B4ECD60 		.word	1624067707
 365 020c EB622290 		.word	-1876794645
 366 0210 2CEFF0C7 		.word	-940511444
 367 0214 8DD257A1 		.word	-1588079987
 368 0218 3DA766B0 		.word	-1335449795
 369 021c F69C9AC1 		.word	-1046831882
 370 0220 D6C54420 		.word	541378006
 371 0224 59DEE18F 		.word	-1881022887
 372 0228 1BA5AF42 		.word	1118807323
 373 022c 7B4ECD60 		.word	1624067707
 374 0230 EB622290 		.word	-1876794645
 375 0234 2CEFF0C7 		.word	-940511444
 376 0238 8DD257A1 		.word	-1588079987
 377 023c 3DA766B0 		.word	-1335449795
 378 0240 75311148 		.word	1209086325
 379 0244 9677F8E3 		.word	-470255722
 380 0248 46E9ABD0 		.word	-794039994
 381 024c 3F6E94BE 		.word	-1097568705
 382 0250 0AED3935 		.word	892988682
 383 0254 83AD8B89 		.word	-1987334781
 384 0258 40B2BCC3 		.word	-1011043776
 385 025c 1F374A5F 		.word	1598699295
 386 0260 85F69C9A 		.word	-1700989307
 387 0264 C1D6C544 		.word	1153816257
 388 0268 2059DEE1 		.word	-505521888
 389 026c 8F1BA5AF 		.word	-1348134001
 390 0270 427B4ECD 		.word	-850494654
 391 0274 60EB6222 		.word	576908128
 392 0278 902CEFF0 		.word	-252760944
 393 027c 0824CB3B 		.word	1003168776
 394 0280 FC71A3F4 		.word	-190615044
 395 0284 5568CFA9 		.word	-1446025131
 396 0288 196C5D4C 		.word	1281190937
 397 028c 0492E51D 		.word	501584388
 398 0290 FEB851FA 		.word	-95307522
 399 0294 2AB4E7D4 		.word	-723012566
 400 0298 0CB62E26 		.word	640595468
 401 029c 02C9F20E 		.word	250792194
 402 02a0 7FDC287D 		.word	2099829887
 403 02a4 15DA736A 		.word	1785977365
 404 02a8 065B1713 		.word	320297734
 405 02ac C1D6C544 		.word	1153816257
 406 02b0 2059DEE1 		.word	-505521888
 407 02b4 8F1BA5AF 		.word	-1348134001
 408 02b8 427B4ECD 		.word	-850494654
 409 02bc 60EB6222 		.word	576908128
 410 02c0 902CEFF0 		.word	-252760944
 411 02c4 C78DD257 		.word	1473416647
 412 02c8 A13DA766 		.word	1722236321
 413 02cc B0753111 		.word	288454064
ARM GAS  /tmp/ccTf0kks.s 			page 8


 414 02d0 489677F8 		.word	-126380472
 415 02d4 E346E9AB 		.word	-1410775325
 416 02d8 D09E5333 		.word	861118160
 417 02dc 9AC1D6C5 		.word	-975781478
 418 02e0 442059DE 		.word	-564584380
 419 02e4 E18F1BA5 		.word	-1524920351
 420 02e8 AF427B4E 		.word	1316700847
 421 02ec CD60EB62 		.word	1659592909
 422 02f0 22902CEF 		.word	-282292190
 423 02f4 F0C78DD2 		.word	-762460176
 424 02f8 57A13DA7 		.word	-1489133225
 425 02fc 66B07531 		.word	829796454
 426 0300 11489677 		.word	2006337553
 427 0304 F8E346E9 		.word	-381230088
 428 0308 ABD09E53 		.word	1402917035
 429 030c 5333D8BA 		.word	-1160236205
 430 0310 980824CB 		.word	-886830952
 431 0314 3BFC71A3 		.word	-1552810949
 432 0318 F45568CF 		.word	-815245836
 433 031c A9196C5D 		.word	1567365545
 434 0320 4C0492E5 		.word	-443415476
 435 0324 1DFEB851 		.word	1371078173
 436 0328 FA2AB4E7 		.word	-407622918
 437 032c D40CB62E 		.word	783682772
 438 0330 2602C9F2 		.word	-221707738
 439 0334 0E7FDC28 		.word	685539086
 440 0338 7D15DA73 		.word	1943672189
 441 033c 2CEFF0C7 		.word	-940511444
 442 0340 8DD257A1 		.word	-1588079987
 443 0344 3DA766B0 		.word	-1335449795
 444 0348 75311148 		.word	1209086325
 445 034c 9677F8E3 		.word	-470255722
 446 0350 46E9ABD0 		.word	-794039994
 447 0354 9E5333D8 		.word	-667724898
 448 0358 BA980824 		.word	604543162
 449 035c CB3BFC71 		.word	1912355787
 450 0360 A3F45568 		.word	1750463651
 451 0364 CFA9196C 		.word	1813621199
 452 0368 5D4C0492 		.word	-1845212067
 453 036c E51DFEB8 		.word	-1191305755
 454 0370 51FA2AB4 		.word	-1272251823
 455 0374 E7D40CB6 		.word	-1240673049
 456 0378 2E2602C9 		.word	-922606034
 457 037c F20E7FDC 		.word	-595652878
 458 0380 287D15DA 		.word	-636125912
 459 0384 736A065B 		.word	1527147123
 460 0388 17138164 		.word	1686180631
 461 038c 79873F6E 		.word	1849657209
 462 0390 94BE0AED 		.word	-318062956
 463 0394 393583AD 		.word	-1383910087
 464 0398 8B8940B2 		.word	-1304393333
 465 039c BE0AED39 		.word	971836094
 466 03a0 3583AD8B 		.word	-1951562955
 467 03a4 8940B2BC 		.word	-1129168759
 468 03a8 C31F374A 		.word	1245126595
 469 03ac 5F85F69C 		.word	-1661565601
 470 03b0 9AC1D6C5 		.word	-975781478
ARM GAS  /tmp/ccTf0kks.s 			page 9


 471 03b4 442059DE 		.word	-564584380
 472 03b8 E18F1BA5 		.word	-1524920351
 473 03bc AF427B4E 		.word	1316700847
 474 03c0 CD60EB62 		.word	1659592909
 475 03c4 22902CEF 		.word	-282292190
 476 03c8 F0C78DD2 		.word	-762460176
 477 03cc 77F8E346 		.word	1189345399
 478 03d0 E9ABD09E 		.word	-1630491671
 479 03d4 5333D8BA 		.word	-1160236205
 480 03d8 980824CB 		.word	-886830952
 481 03dc 3BFC71A3 		.word	-1552810949
 482 03e0 F45568CF 		.word	-815245836
 483 03e4 A9196C5D 		.word	1567365545
 484 03e8 4C0492E5 		.word	-443415476
 485 03ec 1DFEB851 		.word	1371078173
 486 03f0 FA2AB4E7 		.word	-407622918
 487 03f4 D40CB62E 		.word	783682772
 488 03f8 2602C9F2 		.word	-221707738
 489 03fc D09E5333 		.word	861118160
 490 0400 D8BA9808 		.word	144227032
 491 0404 24CB3BFC 		.word	-63190236
 492 0408 71A3F455 		.word	1442095985
 493 040c 68CFA919 		.word	430559080
 494 0410 6C5D4C04 		.word	72113516
 495 0414 92E51DFE 		.word	-31595118
 496 0418 B851FA2A 		.word	721047992
 497 041c B4E7D40C 		.word	215279540
 498 0420 B62E2602 		.word	36056758
 499 0424 C9F20E7F 		.word	2131686089
 500 0428 DC287D15 		.word	360523996
 501 042c 196C5D4C 		.word	1281190937
 502 0430 0492E51D 		.word	501584388
 503 0434 FEB851FA 		.word	-95307522
 504 0438 2AB4E7D4 		.word	-723012566
 505 043c 0CB62E26 		.word	640595468
 506 0440 02C9F20E 		.word	250792194
 507 0444 7FDC287D 		.word	2099829887
 508 0448 15DA736A 		.word	1785977365
 509 044c 065B1713 		.word	320297734
 510 0450 81647987 		.word	-2022087551
 511 0454 3F6E94BE 		.word	-1097568705
 512 0458 0AED3935 		.word	892988682
 513 045c 427B4ECD 		.word	-850494654
 514 0460 60EB6222 		.word	576908128
 515 0464 902CEFF0 		.word	-252760944
 516 0468 C78DD257 		.word	1473416647
 517 046c A13DA766 		.word	1722236321
 518 0470 B0753111 		.word	288454064
 519 0474 489677F8 		.word	-126380472
 520 0478 E346E9AB 		.word	-1410775325
 521 047c D09E5333 		.word	861118160
 522 0480 D8BA9808 		.word	144227032
 523 0484 24CB3BFC 		.word	-63190236
 524 0488 71A3F455 		.word	1442095985
 525 048c 8B8940B2 		.word	-1304393333
 526 0490 BCC31F37 		.word	924828604
 527 0494 4A5F85F6 		.word	-159031478
ARM GAS  /tmp/ccTf0kks.s 			page 10


 528 0498 9C9AC1D6 		.word	-691955044
 529 049c C5442059 		.word	1495286981
 530 04a0 DEE18F1B 		.word	462414302
 531 04a4 A5AF427B 		.word	2067967909
 532 04a8 4ECD60EB 		.word	-345977522
 533 04ac 6222902C 		.word	747643490
 534 04b0 EFF0C78D 		.word	-1916276497
 535 04b4 D257A13D 		.word	1033983954
 536 04b8 A766B075 		.word	1974494887
 537 04bc F45568CF 		.word	-815245836
 538 04c0 A9196C5D 		.word	1567365545
 539 04c4 4C0492E5 		.word	-443415476
 540 04c8 1DFEB851 		.word	1371078173
 541 04cc FA2AB4E7 		.word	-407622918
 542 04d0 D40CB62E 		.word	783682772
 543 04d4 2602C9F2 		.word	-221707738
 544 04d8 0E7FDC28 		.word	685539086
 545 04dc 7D15DA73 		.word	1943672189
 546 04e0 6A065B17 		.word	391841386
 547 04e4 13816479 		.word	2036629779
 548 04e8 873F6E94 		.word	-1804714105
 549 04ec 3DA766B0 		.word	-1335449795
 550 04f0 75311148 		.word	1209086325
 551 04f4 9677F8E3 		.word	-470255722
 552 04f8 46E9ABD0 		.word	-794039994
 553 04fc 9E5333D8 		.word	-667724898
 554 0500 BA980824 		.word	604543162
 555 0504 CB3BFC71 		.word	1912355787
 556 0508 A3F45568 		.word	1750463651
 557 050c CFA9196C 		.word	1813621199
 558 0510 5D4C0492 		.word	-1845212067
 559 0514 E51DFEB8 		.word	-1191305755
 560 0518 51FA2AB4 		.word	-1272251823
 561 051c 66B07531 		.word	829796454
 562 0520 11489677 		.word	2006337553
 563 0524 F8E346E9 		.word	-381230088
 564 0528 ABD09E53 		.word	1402917035
 565 052c 33D8BA98 		.word	-1732585421
 566 0530 0824CB3B 		.word	1003168776
 567 0534 FC71A3F4 		.word	-190615044
 568 0538 5568CFA9 		.word	-1446025131
 569 053c 196C5D4C 		.word	1281190937
 570 0540 0492E51D 		.word	501584388
 571 0544 FEB851FA 		.word	-95307522
 572 0548 2AB4E7D4 		.word	-723012566
 573 054c AF427B4E 		.word	1316700847
 574 0550 CD60EB62 		.word	1659592909
 575 0554 22902CEF 		.word	-282292190
 576 0558 F0C78DD2 		.word	-762460176
 577 055c 57A13DA7 		.word	-1489133225
 578 0560 66B07531 		.word	829796454
 579 0564 11489677 		.word	2006337553
 580 0568 F8E346E9 		.word	-381230088
 581 056c ABD09E53 		.word	1402917035
 582 0570 33D8BA98 		.word	-1732585421
 583 0574 0824CB3B 		.word	1003168776
 584 0578 FC71A3F4 		.word	-190615044
ARM GAS  /tmp/ccTf0kks.s 			page 11


 585 057c 980824CB 		.word	-886830952
 586 0580 3BFC71A3 		.word	-1552810949
 587 0584 F45568CF 		.word	-815245836
 588 0588 A9196C5D 		.word	1567365545
 589 058c 4C0492E5 		.word	-443415476
 590 0590 1DFEB851 		.word	1371078173
 591 0594 FA2AB4E7 		.word	-407622918
 592 0598 D40CB62E 		.word	783682772
 593 059c 2602C9F2 		.word	-221707738
 594 05a0 0E7FDC28 		.word	685539086
 595 05a4 7D15DA73 		.word	1943672189
 596 05a8 6A065B17 		.word	391841386
 597 05ac 51FA2AB4 		.word	-1272251823
 598 05b0 E7D40CB6 		.word	-1240673049
 599 05b4 2E2602C9 		.word	-922606034
 600 05b8 F20E7FDC 		.word	-595652878
 601 05bc 287D15DA 		.word	-636125912
 602 05c0 736A065B 		.word	1527147123
 603 05c4 17138164 		.word	1686180631
 604 05c8 79873F6E 		.word	1849657209
 605 05cc 94BE0AED 		.word	-318062956
 606 05d0 393583AD 		.word	-1383910087
 607 05d4 8B8940B2 		.word	-1304393333
 608 05d8 BCC31F37 		.word	924828604
 609 05dc 0AED3935 		.word	892988682
 610 05e0 83AD8B89 		.word	-1987334781
 611 05e4 40B2BCC3 		.word	-1011043776
 612 05e8 1F374A5F 		.word	1598699295
 613 05ec 85F69C9A 		.word	-1700989307
 614 05f0 C1D6C544 		.word	1153816257
 615 05f4 2059DEE1 		.word	-505521888
 616 05f8 8F1BA5AF 		.word	-1348134001
 617 05fc 427B4ECD 		.word	-850494654
 618 0600 60EB6222 		.word	576908128
 619 0604 902CEFF0 		.word	-252760944
 620 0608 C78DD257 		.word	1473416647
 621 060c C31F374A 		.word	1245126595
 622 0610 5F85F69C 		.word	-1661565601
 623 0614 9AC1D6C5 		.word	-975781478
 624 0618 442059DE 		.word	-564584380
 625 061c E18F1BA5 		.word	-1524920351
 626 0620 AF427B4E 		.word	1316700847
 627 0624 CD60EB62 		.word	1659592909
 628 0628 22902CEF 		.word	-282292190
 629 062c F0C78DD2 		.word	-762460176
 630 0630 57A13DA7 		.word	-1489133225
 631 0634 66B07531 		.word	829796454
 632 0638 11489677 		.word	2006337553
 633 063c BCC31F37 		.word	924828604
 634 0640 4A5F85F6 		.word	-159031478
 635 0644 9C9AC1D6 		.word	-691955044
 636 0648 C5442059 		.word	1495286981
 637 064c DEE18F1B 		.word	462414302
 638 0650 A5AF427B 		.word	2067967909
 639 0654 4ECD60EB 		.word	-345977522
 640 0658 6222902C 		.word	747643490
 641 065c EFF0C78D 		.word	-1916276497
ARM GAS  /tmp/ccTf0kks.s 			page 12


 642 0660 D257A13D 		.word	1033983954
 643 0664 A766B075 		.word	1974494887
 644 0668 31114896 		.word	-1773661903
 645 066c 75311148 		.word	1209086325
 646 0670 9677F8E3 		.word	-470255722
 647 0674 46E9ABD0 		.word	-794039994
 648 0678 9E5333D8 		.word	-667724898
 649 067c BA980824 		.word	604543162
 650 0680 CB3BFC71 		.word	1912355787
 651 0684 A3F45568 		.word	1750463651
 652 0688 CFA9196C 		.word	1813621199
 653 068c 5D4C0492 		.word	-1845212067
 654 0690 E51DFEB8 		.word	-1191305755
 655 0694 51FA2AB4 		.word	-1272251823
 656 0698 E7D40CB6 		.word	-1240673049
 657 069c 2E2602C9 		.word	-922606034
 658 06a0 F20E7FDC 		.word	-595652878
 659 06a4 287D15DA 		.word	-636125912
 660 06a8 736A065B 		.word	1527147123
 661 06ac 17138164 		.word	1686180631
 662 06b0 79873F6E 		.word	1849657209
 663 06b4 94BE0AED 		.word	-318062956
 664 06b8 393583AD 		.word	-1383910087
 665 06bc 8B8940B2 		.word	-1304393333
 666 06c0 BCC31F37 		.word	924828604
 667 06c4 4A5F85F6 		.word	-159031478
 668 06c8 9C9AC1D6 		.word	-691955044
 669 06cc E7D40CB6 		.word	-1240673049
 670 06d0 2E2602C9 		.word	-922606034
 671 06d4 F20E7FDC 		.word	-595652878
 672 06d8 287D15DA 		.word	-636125912
 673 06dc 736A065B 		.word	1527147123
 674 06e0 17138164 		.word	1686180631
 675 06e4 79873F6E 		.word	1849657209
 676 06e8 94BE0AED 		.word	-318062956
 677 06ec 393583AD 		.word	-1383910087
 678 06f0 8B8940B2 		.word	-1304393333
 679 06f4 BCC31F37 		.word	924828604
 680 06f8 4A5F85F6 		.word	-159031478
 681 06fc 60EB6222 		.word	576908128
 682 0700 902CEFF0 		.word	-252760944
 683 0704 C78DD257 		.word	1473416647
 684 0708 A13DA766 		.word	1722236321
 685 070c B0753111 		.word	288454064
 686 0710 489677F8 		.word	-126380472
 687 0714 E346E9AB 		.word	-1410775325
 688 0718 D09E5333 		.word	861118160
 689 071c D8BA9808 		.word	144227032
 690 0720 24CB3BFC 		.word	-63190236
 691 0724 71A3F455 		.word	1442095985
 692 0728 68CFA919 		.word	430559080
 693 072c A9196C5D 		.word	1567365545
 694 0730 4C0492E5 		.word	-443415476
 695 0734 1DFEB851 		.word	1371078173
 696 0738 FA2AB4E7 		.word	-407622918
 697 073c D40CB62E 		.word	783682772
 698 0740 2602C9F2 		.word	-221707738
ARM GAS  /tmp/ccTf0kks.s 			page 13


 699 0744 0E7FDC28 		.word	685539086
 700 0748 7D15DA73 		.word	1943672189
 701 074c 6A065B17 		.word	391841386
 702 0750 13816479 		.word	2036629779
 703 0754 873F6E94 		.word	-1804714105
 704 0758 BE0AED39 		.word	971836094
 705 075c F20E7FDC 		.word	-595652878
 706 0760 287D15DA 		.word	-636125912
 707 0764 736A065B 		.word	1527147123
 708 0768 17138164 		.word	1686180631
 709 076c 79873F6E 		.word	1849657209
 710 0770 94BE0AED 		.word	-318062956
 711 0774 393583AD 		.word	-1383910087
 712 0778 8B8940B2 		.word	-1304393333
 713 077c BCC31F37 		.word	924828604
 714 0780 4A5F85F6 		.word	-159031478
 715 0784 9C9AC1D6 		.word	-691955044
 716 0788 C5442059 		.word	1495286981
 717 078c 3BFC71A3 		.word	-1552810949
 718 0790 F45568CF 		.word	-815245836
 719 0794 A9196C5D 		.word	1567365545
 720 0798 4C0492E5 		.word	-443415476
 721 079c 1DFEB851 		.word	1371078173
 722 07a0 FA2AB4E7 		.word	-407622918
 723 07a4 D40CB62E 		.word	783682772
 724 07a8 2602C9F2 		.word	-221707738
 725 07ac 0E7FDC28 		.word	685539086
 726 07b0 7D15DA73 		.word	1943672189
 727 07b4 6A065B17 		.word	391841386
 728 07b8 13816479 		.word	2036629779
 729 07bc 442059DE 		.word	-564584380
 730 07c0 E18F1BA5 		.word	-1524920351
 731 07c4 AF427B4E 		.word	1316700847
 732 07c8 CD60EB62 		.word	1659592909
 733 07cc 22902CEF 		.word	-282292190
 734 07d0 F0C78DD2 		.word	-762460176
 735 07d4 57A13DA7 		.word	-1489133225
 736 07d8 66B07531 		.word	829796454
 737 07dc 11489677 		.word	2006337553
 738 07e0 F8E346E9 		.word	-381230088
 739 07e4 ABD09E53 		.word	1402917035
 740 07e8 33D8BA98 		.word	-1732585421
 741 07ec 8DD257A1 		.word	-1588079987
 742 07f0 3DA766B0 		.word	-1335449795
 743 07f4 75311148 		.word	1209086325
 744 07f8 9677F8E3 		.word	-470255722
 745 07fc 46E9ABD0 		.word	-794039994
 746 0800 9E5333D8 		.word	-667724898
 747 0804 BA980824 		.word	604543162
 748 0808 CB3BFC71 		.word	1912355787
 749 080c A3F45568 		.word	1750463651
 750 0810 CFA9196C 		.word	1813621199
 751 0814 5D4C0492 		.word	-1845212067
 752 0818 E51DFEB8 		.word	-1191305755
 753 081c D6C54420 		.word	541378006
 754 0820 59DEE18F 		.word	-1881022887
 755 0824 1BA5AF42 		.word	1118807323
ARM GAS  /tmp/ccTf0kks.s 			page 14


 756 0828 7B4ECD60 		.word	1624067707
 757 082c EB622290 		.word	-1876794645
 758 0830 2CEFF0C7 		.word	-940511444
 759 0834 8DD257A1 		.word	-1588079987
 760 0838 3DA766B0 		.word	-1335449795
 761 083c 75311148 		.word	1209086325
 762 0840 9677F8E3 		.word	-470255722
 763 0844 46E9ABD0 		.word	-794039994
 764 0848 9E5333D8 		.word	-667724898
 765 084c 1F374A5F 		.word	1598699295
 766 0850 85F69C9A 		.word	-1700989307
 767 0854 C1D6C544 		.word	1153816257
 768 0858 2059DEE1 		.word	-505521888
 769 085c 8F1BA5AF 		.word	-1348134001
 770 0860 427B4ECD 		.word	-850494654
 771 0864 60EB6222 		.word	576908128
 772 0868 902CEFF0 		.word	-252760944
 773 086c C78DD257 		.word	1473416647
 774 0870 A13DA766 		.word	1722236321
 775 0874 B0753111 		.word	288454064
 776 0878 489677F8 		.word	-126380472
 777              		.comm	rr,5,4
 778              		.global	compile_info
 779              		.align	2
 782              	compile_info:
 783 087c 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Wed Nov  2 19:2"
 783      746F6F74 
 783      68203230 
 783      31352D31 
 783      302D5231 
 784 08af 383A3037 		.ascii	"8:07 KST 2016\000"
 784      204B5354 
 784      20323031 
 784      3600
 785              		.comm	first_ts,4,4
 786              		.comm	second_ts,4,4
 787              		.comm	diff_ts,4,4
 788              		.comm	clkn,4,4
 789              		.global	hop_mode
 790              		.bss
 793              	hop_mode:
 794 0000 00       		.space	1
 795              		.global	do_hop
 798              	do_hop:
 799 0001 00       		.space	1
 800              		.global	cs_no_squelch
 803              	cs_no_squelch:
 804 0002 00       		.space	1
 805              		.global	cs_threshold_req
 806              		.data
 809              	cs_threshold_req:
 810 0004 88       		.byte	-120
 811              		.global	cs_threshold_cur
 814              	cs_threshold_cur:
 815 0005 88       		.byte	-120
 816              		.comm	cs_trigger,1,1
 817              		.comm	keepalive_trigger,1,1
ARM GAS  /tmp/ccTf0kks.s 			page 15


 818              		.comm	cs_timestamp,4,4
 819              		.global	hop_direct_channel
 820              		.bss
 821 0003 00       		.align	1
 824              	hop_direct_channel:
 825 0004 0000     		.space	2
 826              		.global	clock_trim
 827 0006 0000     		.align	2
 830              	clock_trim:
 831 0008 00000000 		.space	4
 832              		.comm	idle_buf_clkn_high,4,4
 833              		.comm	active_buf_clkn_high,4,4
 834              		.comm	idle_buf_clk100ns,4,4
 835              		.comm	active_buf_clk100ns,4,4
 836              		.global	idle_buf_channel
 837              		.align	1
 840              	idle_buf_channel:
 841 000c 0000     		.space	2
 842              		.global	active_buf_channel
 843              		.align	1
 846              	active_buf_channel:
 847 000e 0000     		.space	2
 848              		.global	slave_mac_address
 849              		.align	2
 852              	slave_mac_address:
 853 0010 00000000 		.space	6
 853      0000
 854              		.comm	rxbuf1,50,4
 855              		.comm	rxbuf2,50,4
 856              		.global	active_rxbuf
 857              		.data
 858 0006 0000     		.align	2
 861              	active_rxbuf:
 862 0008 00000000 		.word	rxbuf1
 863              		.global	idle_rxbuf
 864              		.align	2
 867              	idle_rxbuf:
 868 000c 00000000 		.word	rxbuf2
 869              		.global	le
 870              		.align	2
 873              	le:
 874 0010 D6BE898E 		.word	-1903575338
 875 0014 7D6B     		.short	27517
 876 0016 7191     		.short	-28303
 877 0018 55555500 		.word	5592405
 878 001c AAAAAA00 		.word	11184810
 879 0020 01000000 		.word	1
 880 0024 00       		.byte	0
 881 0025 000000   		.space	3
 882 0028 00000000 		.word	0
 883 002c 00000000 		.space	32
 883      00000000 
 883      00000000 
 883      00000000 
 883      00000000 
 884 004c 00000000 		.word	0
 885 0050 00000000 		.word	0
ARM GAS  /tmp/ccTf0kks.s 			page 16


 886              		.comm	le_promisc,264,4
 887              		.global	le_jam_count
 888              		.bss
 889 0016 0000     		.align	2
 892              	le_jam_count:
 893 0018 00000000 		.space	4
 894              		.global	data_cb
 895              		.align	2
 898              	data_cb:
 899 001c 00000000 		.space	4
 900              		.global	packet_cb
 901              		.align	2
 904              	packet_cb:
 905 0020 00000000 		.space	4
 906              		.global	rssi_iir
 907              		.align	2
 910              	rssi_iir:
 911 0024 00000000 		.space	158
 911      00000000 
 911      00000000 
 911      00000000 
 911      00000000 
 912              		.comm	unpacked,800,4
 913              		.global	mode
 916              	mode:
 917 00c2 00       		.space	1
 918              		.global	requested_mode
 921              	requested_mode:
 922 00c3 00       		.space	1
 923              		.global	jam_mode
 926              	jam_mode:
 927 00c4 00       		.space	1
 928              		.global	ego_mode
 931              	ego_mode:
 932 00c5 00       		.space	1
 933              		.global	modulation
 936              	modulation:
 937 00c6 00       		.space	1
 938              		.global	channel
 939              		.data
 940              		.align	1
 943              	channel:
 944 0054 6209     		.short	2402
 945              		.global	requested_channel
 946              		.bss
 947 00c7 00       		.align	1
 950              	requested_channel:
 951 00c8 0000     		.space	2
 952              		.global	saved_request
 953              		.align	1
 956              	saved_request:
 957 00ca 0000     		.space	2
 958              		.global	low_freq
 959              		.data
 960              		.align	1
 963              	low_freq:
 964 0056 6009     		.short	2400
ARM GAS  /tmp/ccTf0kks.s 			page 17


 965              		.global	high_freq
 966              		.align	1
 969              	high_freq:
 970 0058 B309     		.short	2483
 971              		.global	rssi_threshold
 974              	rssi_threshold:
 975 005a E2       		.byte	-30
 976              		.comm	rx_dma_lli1,16,4
 977              		.comm	rx_dma_lli2,16,4
 978              		.comm	le_dma_lli,176,4
 979              		.comm	rx_tc,4,4
 980              		.comm	rx_err,4,4
 981              		.global	status
 982              		.bss
 985              	status:
 986 00cc 00       		.space	1
 987              		.comm	rssi_max,1,1
 988              		.comm	rssi_min,1,1
 989              		.global	rssi_count
 992              	rssi_count:
 993 00cd 00       		.space	1
 994              		.global	rssi_sum
 995 00ce 0000     		.align	2
 998              	rssi_sum:
 999 00d0 00000000 		.space	4
 1000              		.section	.text.rssi_reset,"ax",%progbits
 1001              		.align	2
 1002              		.thumb
 1003              		.thumb_func
 1005              	rssi_reset:
 1006              	.LFB0:
 1007              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
ARM GAS  /tmp/ccTf0kks.s 			page 18


  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** u32 first_ts, second_ts, diff_ts;
  50:bluetooth_rxtx.c **** 
  51:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  52:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  53:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  54:bluetooth_rxtx.c **** 
  55:bluetooth_rxtx.c **** #define HOP_NONE      0
  56:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  57:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  58:bluetooth_rxtx.c **** #define HOP_BTLE      3
  59:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  60:bluetooth_rxtx.c **** 
  61:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  62:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  63:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  64:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  65:bluetooth_rxtx.c **** 
  66:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  67:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  68:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  69:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  70:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  71:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  72:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  73:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  74:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  75:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  76:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  77:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  78:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  79:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  80:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  81:bluetooth_rxtx.c **** 
  82:bluetooth_rxtx.c **** /* DMA buffers */
ARM GAS  /tmp/ccTf0kks.s 			page 19


  83:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  84:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  85:bluetooth_rxtx.c **** 
  86:bluetooth_rxtx.c **** /*
  87:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
  88:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  89:bluetooth_rxtx.c ****  */
  90:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  91:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  92:bluetooth_rxtx.c **** 
  93:bluetooth_rxtx.c **** le_state_t le = {
  94:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  95:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  96:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  97:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  98:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
  99:bluetooth_rxtx.c **** 	.crc_verify = 1,
 100:bluetooth_rxtx.c **** 
 101:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 102:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 103:bluetooth_rxtx.c **** 	.target_set = 0,
 104:bluetooth_rxtx.c **** 	.last_packet = 0,
 105:bluetooth_rxtx.c **** };
 106:bluetooth_rxtx.c **** 
 107:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 108:bluetooth_rxtx.c **** 	u32 aa;
 109:bluetooth_rxtx.c **** 	int count;
 110:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 111:bluetooth_rxtx.c **** 
 112:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 113:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 114:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 115:bluetooth_rxtx.c **** 
 116:bluetooth_rxtx.c **** 	// recovering hop interval
 117:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 118:bluetooth_rxtx.c **** 	int consec_intervals;
 119:bluetooth_rxtx.c **** } le_promisc_state_t;
 120:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 121:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 122:bluetooth_rxtx.c **** 
 123:bluetooth_rxtx.c **** /* LE jamming */
 124:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 125:bluetooth_rxtx.c **** int le_jam_count = 0;
 126:bluetooth_rxtx.c **** 
 127:bluetooth_rxtx.c **** /* set LE access address */
 128:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 129:bluetooth_rxtx.c **** 
 130:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 131:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 132:bluetooth_rxtx.c **** 
 133:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 134:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 135:bluetooth_rxtx.c **** 
 136:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 137:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 138:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 139:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccTf0kks.s 			page 20


 140:bluetooth_rxtx.c **** /*
 141:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 142:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 143:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 144:bluetooth_rxtx.c **** */
 145:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 146:bluetooth_rxtx.c **** 
 147:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 148:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 149:bluetooth_rxtx.c **** 
 150:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 151:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 152:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 153:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 154:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 155:bluetooth_rxtx.c **** volatile u16 channel = 2402;
 156:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 157:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 158:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 159:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 160:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 161:bluetooth_rxtx.c **** 
 162:bluetooth_rxtx.c **** /* DMA linked list items */
 163:bluetooth_rxtx.c **** typedef struct {
 164:bluetooth_rxtx.c **** 	u32 src;
 165:bluetooth_rxtx.c **** 	u32 dest;
 166:bluetooth_rxtx.c **** 	u32 next_lli;
 167:bluetooth_rxtx.c **** 	u32 control;
 168:bluetooth_rxtx.c **** } dma_lli;
 169:bluetooth_rxtx.c **** 
 170:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 171:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 174:bluetooth_rxtx.c **** 
 175:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 176:bluetooth_rxtx.c **** volatile u32 rx_tc;
 177:bluetooth_rxtx.c **** volatile u32 rx_err;
 178:bluetooth_rxtx.c **** 
 179:bluetooth_rxtx.c **** /* status information byte */
 180:bluetooth_rxtx.c **** volatile u8 status = 0;
 181:bluetooth_rxtx.c **** 
 182:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 183:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 184:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 185:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 186:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 187:bluetooth_rxtx.c **** 
 188:bluetooth_rxtx.c **** /*
 189:bluetooth_rxtx.c ****  * RSSI
 190:bluetooth_rxtx.c ****  */
 191:bluetooth_rxtx.c **** int8_t rssi_max;
 192:bluetooth_rxtx.c **** int8_t rssi_min;
 193:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 194:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 195:bluetooth_rxtx.c **** 
 196:bluetooth_rxtx.c **** static void rssi_reset(void)
ARM GAS  /tmp/ccTf0kks.s 			page 21


 197:bluetooth_rxtx.c **** {
 1008              		.loc 1 197 0
 1009              		.cfi_startproc
 1010              		@ args = 0, pretend = 0, frame = 0
 1011              		@ frame_needed = 1, uses_anonymous_args = 0
 1012              		@ link register save eliminated.
 1013 0000 80B4     		push	{r7}
 1014              		.cfi_def_cfa_offset 4
 1015              		.cfi_offset 7, -4
 1016 0002 00AF     		add	r7, sp, #0
 1017              		.cfi_def_cfa_register 7
 198:bluetooth_rxtx.c **** 	rssi_count = 0;
 1018              		.loc 1 198 0
 1019 0004 074B     		ldr	r3, .L2
 1020 0006 0022     		movs	r2, #0
 1021 0008 1A70     		strb	r2, [r3]
 199:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1022              		.loc 1 199 0
 1023 000a 074B     		ldr	r3, .L2+4
 1024 000c 0022     		movs	r2, #0
 1025 000e 1A60     		str	r2, [r3]
 200:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1026              		.loc 1 200 0
 1027 0010 064B     		ldr	r3, .L2+8
 1028 0012 8022     		movs	r2, #128
 1029 0014 1A70     		strb	r2, [r3]
 201:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1030              		.loc 1 201 0
 1031 0016 064B     		ldr	r3, .L2+12
 1032 0018 7F22     		movs	r2, #127
 1033 001a 1A70     		strb	r2, [r3]
 202:bluetooth_rxtx.c **** }
 1034              		.loc 1 202 0
 1035 001c BD46     		mov	sp, r7
 1036              		.cfi_def_cfa_register 13
 1037              		@ sp needed
 1038 001e 5DF8047B 		ldr	r7, [sp], #4
 1039              		.cfi_restore 7
 1040              		.cfi_def_cfa_offset 0
 1041 0022 7047     		bx	lr
 1042              	.L3:
 1043              		.align	2
 1044              	.L2:
 1045 0024 00000000 		.word	rssi_count
 1046 0028 00000000 		.word	rssi_sum
 1047 002c 00000000 		.word	rssi_max
 1048 0030 00000000 		.word	rssi_min
 1049              		.cfi_endproc
 1050              	.LFE0:
 1052              		.section	.text.rssi_add,"ax",%progbits
 1053              		.align	2
 1054              		.thumb
 1055              		.thumb_func
 1057              	rssi_add:
 1058              	.LFB1:
 203:bluetooth_rxtx.c **** 
 204:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
ARM GAS  /tmp/ccTf0kks.s 			page 22


 205:bluetooth_rxtx.c **** {
 1059              		.loc 1 205 0
 1060              		.cfi_startproc
 1061              		@ args = 0, pretend = 0, frame = 8
 1062              		@ frame_needed = 1, uses_anonymous_args = 0
 1063              		@ link register save eliminated.
 1064 0000 80B4     		push	{r7}
 1065              		.cfi_def_cfa_offset 4
 1066              		.cfi_offset 7, -4
 1067 0002 83B0     		sub	sp, sp, #12
 1068              		.cfi_def_cfa_offset 16
 1069 0004 00AF     		add	r7, sp, #0
 1070              		.cfi_def_cfa_register 7
 1071 0006 0346     		mov	r3, r0
 1072 0008 FB71     		strb	r3, [r7, #7]
 206:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1073              		.loc 1 206 0
 1074 000a 144B     		ldr	r3, .L5
 1075 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1076 000e 5AB2     		sxtb	r2, r3
 1077 0010 97F90730 		ldrsb	r3, [r7, #7]
 1078 0014 9342     		cmp	r3, r2
 1079 0016 B8BF     		it	lt
 1080 0018 1346     		movlt	r3, r2
 1081 001a DAB2     		uxtb	r2, r3
 1082 001c 0F4B     		ldr	r3, .L5
 1083 001e 1A70     		strb	r2, [r3]
 207:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1084              		.loc 1 207 0
 1085 0020 0F4B     		ldr	r3, .L5+4
 1086 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1087 0024 5AB2     		sxtb	r2, r3
 1088 0026 97F90730 		ldrsb	r3, [r7, #7]
 1089 002a 9342     		cmp	r3, r2
 1090 002c A8BF     		it	ge
 1091 002e 1346     		movge	r3, r2
 1092 0030 DAB2     		uxtb	r2, r3
 1093 0032 0B4B     		ldr	r3, .L5+4
 1094 0034 1A70     		strb	r2, [r3]
 208:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1095              		.loc 1 208 0
 1096 0036 97F90730 		ldrsb	r3, [r7, #7]
 1097 003a 1A02     		lsls	r2, r3, #8
 1098 003c 094B     		ldr	r3, .L5+8
 1099 003e 1B68     		ldr	r3, [r3]
 1100 0040 1344     		add	r3, r3, r2
 1101 0042 084A     		ldr	r2, .L5+8
 1102 0044 1360     		str	r3, [r2]
 209:bluetooth_rxtx.c **** 	rssi_count += 1;
 1103              		.loc 1 209 0
 1104 0046 084B     		ldr	r3, .L5+12
 1105 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1106 004a 0133     		adds	r3, r3, #1
 1107 004c DAB2     		uxtb	r2, r3
 1108 004e 064B     		ldr	r3, .L5+12
 1109 0050 1A70     		strb	r2, [r3]
 210:bluetooth_rxtx.c **** }
ARM GAS  /tmp/ccTf0kks.s 			page 23


 1110              		.loc 1 210 0
 1111 0052 0C37     		adds	r7, r7, #12
 1112              		.cfi_def_cfa_offset 4
 1113 0054 BD46     		mov	sp, r7
 1114              		.cfi_def_cfa_register 13
 1115              		@ sp needed
 1116 0056 5DF8047B 		ldr	r7, [sp], #4
 1117              		.cfi_restore 7
 1118              		.cfi_def_cfa_offset 0
 1119 005a 7047     		bx	lr
 1120              	.L6:
 1121              		.align	2
 1122              	.L5:
 1123 005c 00000000 		.word	rssi_max
 1124 0060 00000000 		.word	rssi_min
 1125 0064 00000000 		.word	rssi_sum
 1126 0068 00000000 		.word	rssi_count
 1127              		.cfi_endproc
 1128              	.LFE1:
 1130              		.section	.text.rssi_iir_update,"ax",%progbits
 1131              		.align	2
 1132              		.thumb
 1133              		.thumb_func
 1135              	rssi_iir_update:
 1136              	.LFB2:
 211:bluetooth_rxtx.c **** 
 212:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 213:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 214:bluetooth_rxtx.c **** {
 1137              		.loc 1 214 0
 1138              		.cfi_startproc
 1139              		@ args = 0, pretend = 0, frame = 16
 1140              		@ frame_needed = 1, uses_anonymous_args = 0
 1141              		@ link register save eliminated.
 1142 0000 80B4     		push	{r7}
 1143              		.cfi_def_cfa_offset 4
 1144              		.cfi_offset 7, -4
 1145 0002 85B0     		sub	sp, sp, #20
 1146              		.cfi_def_cfa_offset 24
 1147 0004 00AF     		add	r7, sp, #0
 1148              		.cfi_def_cfa_register 7
 215:bluetooth_rxtx.c **** 	int i;
 216:bluetooth_rxtx.c **** 	int32_t avg;
 217:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 218:bluetooth_rxtx.c **** 
 219:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 220:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 221:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1149              		.loc 1 221 0
 1150 0006 1F4B     		ldr	r3, .L13
 1151 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1152 000a 002B     		cmp	r3, #0
 1153 000c 06D0     		beq	.L8
 222:bluetooth_rxtx.c **** 		i = channel - 2402;
 1154              		.loc 1 222 0
 1155 000e 1E4B     		ldr	r3, .L13+4
 1156 0010 1B88     		ldrh	r3, [r3]	@ movhi
ARM GAS  /tmp/ccTf0kks.s 			page 24


 1157 0012 9BB2     		uxth	r3, r3
 1158 0014 A3F66213 		subw	r3, r3, #2402
 1159 0018 FB60     		str	r3, [r7, #12]
 1160 001a 01E0     		b	.L9
 1161              	.L8:
 223:bluetooth_rxtx.c **** 	else
 224:bluetooth_rxtx.c **** 		i = 0;
 1162              		.loc 1 224 0
 1163 001c 0023     		movs	r3, #0
 1164 001e FB60     		str	r3, [r7, #12]
 1165              	.L9:
 225:bluetooth_rxtx.c **** 
 226:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 227:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1166              		.loc 1 227 0
 1167 0020 1A4B     		ldr	r3, .L13+8
 1168 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1169 0024 002B     		cmp	r3, #0
 1170 0026 08D0     		beq	.L10
 228:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1171              		.loc 1 228 0
 1172 0028 194B     		ldr	r3, .L13+12
 1173 002a 1B68     		ldr	r3, [r3]
 1174 002c 8033     		adds	r3, r3, #128
 1175 002e 174A     		ldr	r2, .L13+8
 1176 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1177 0032 93FBF2F3 		sdiv	r3, r3, r2
 1178 0036 BB60     		str	r3, [r7, #8]
 1179 0038 01E0     		b	.L11
 1180              	.L10:
 229:bluetooth_rxtx.c **** 	else
 230:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1181              		.loc 1 230 0
 1182 003a 0023     		movs	r3, #0
 1183 003c BB60     		str	r3, [r7, #8]
 1184              	.L11:
 231:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1185              		.loc 1 231 0
 1186 003e 154A     		ldr	r2, .L13+16
 1187 0040 FB68     		ldr	r3, [r7, #12]
 1188 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1189 0046 1AB2     		sxth	r2, r3
 1190 0048 1346     		mov	r3, r2
 1191 004a 9B01     		lsls	r3, r3, #6
 1192 004c 9B1A     		subs	r3, r3, r2
 1193 004e 9B00     		lsls	r3, r3, #2
 1194 0050 1344     		add	r3, r3, r2
 1195 0052 7B60     		str	r3, [r7, #4]
 232:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1196              		.loc 1 232 0
 1197 0054 BA68     		ldr	r2, [r7, #8]
 1198 0056 1346     		mov	r3, r2
 1199 0058 5B00     		lsls	r3, r3, #1
 1200 005a 1344     		add	r3, r3, r2
 1201 005c 7A68     		ldr	r2, [r7, #4]
 1202 005e 1344     		add	r3, r3, r2
 1203 0060 7B60     		str	r3, [r7, #4]
ARM GAS  /tmp/ccTf0kks.s 			page 25


 233:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1204              		.loc 1 233 0
 1205 0062 7B68     		ldr	r3, [r7, #4]
 1206 0064 8033     		adds	r3, r3, #128
 1207 0066 002B     		cmp	r3, #0
 1208 0068 00DA     		bge	.L12
 1209 006a FF33     		adds	r3, r3, #255
 1210              	.L12:
 1211 006c 1B12     		asrs	r3, r3, #8
 1212 006e 99B2     		uxth	r1, r3
 1213 0070 084A     		ldr	r2, .L13+16
 1214 0072 FB68     		ldr	r3, [r7, #12]
 1215 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 234:bluetooth_rxtx.c **** }
 1216              		.loc 1 234 0
 1217 0078 1437     		adds	r7, r7, #20
 1218              		.cfi_def_cfa_offset 4
 1219 007a BD46     		mov	sp, r7
 1220              		.cfi_def_cfa_register 13
 1221              		@ sp needed
 1222 007c 5DF8047B 		ldr	r7, [sp], #4
 1223              		.cfi_restore 7
 1224              		.cfi_def_cfa_offset 0
 1225 0080 7047     		bx	lr
 1226              	.L14:
 1227 0082 00BF     		.align	2
 1228              	.L13:
 1229 0084 00000000 		.word	hop_mode
 1230 0088 00000000 		.word	channel
 1231 008c 00000000 		.word	rssi_count
 1232 0090 00000000 		.word	rssi_sum
 1233 0094 00000000 		.word	rssi_iir
 1234              		.cfi_endproc
 1235              	.LFE2:
 1237              		.section	.text.cs_threshold_set,"ax",%progbits
 1238              		.align	2
 1239              		.thumb
 1240              		.thumb_func
 1242              	cs_threshold_set:
 1243              	.LFB3:
 235:bluetooth_rxtx.c **** 
 236:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 237:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 238:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 239:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 240:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 241:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 242:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 243:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 244:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 245:bluetooth_rxtx.c **** {
 1244              		.loc 1 245 0
 1245              		.cfi_startproc
 1246              		@ args = 0, pretend = 0, frame = 8
 1247              		@ frame_needed = 1, uses_anonymous_args = 0
 1248 0000 80B5     		push	{r7, lr}
 1249              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccTf0kks.s 			page 26


 1250              		.cfi_offset 7, -8
 1251              		.cfi_offset 14, -4
 1252 0002 82B0     		sub	sp, sp, #8
 1253              		.cfi_def_cfa_offset 16
 1254 0004 00AF     		add	r7, sp, #0
 1255              		.cfi_def_cfa_register 7
 1256 0006 0346     		mov	r3, r0
 1257 0008 0A46     		mov	r2, r1
 1258 000a FB71     		strb	r3, [r7, #7]
 1259 000c 1346     		mov	r3, r2
 1260 000e BB71     		strb	r3, [r7, #6]
 246:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1261              		.loc 1 246 0
 1262 0010 97F90730 		ldrsb	r3, [r7, #7]
 1263 0014 13F1140F 		cmn	r3, #20
 1264 0018 0DD0     		beq	.L16
 1265              		.loc 1 246 0 is_stmt 0 discriminator 1
 1266 001a 97F90730 		ldrsb	r3, [r7, #7]
 1267 001e 13F1130F 		cmn	r3, #19
 1268 0022 08DA     		bge	.L16
 1269              		.loc 1 246 0 discriminator 3
 1270 0024 97F90730 		ldrsb	r3, [r7, #7]
 1271 0028 6FF07702 		mvn	r2, #119
 1272 002c 9342     		cmp	r3, r2
 1273 002e B8BF     		it	lt
 1274 0030 1346     		movlt	r3, r2
 1275 0032 DBB2     		uxtb	r3, r3
 1276 0034 00E0     		b	.L17
 1277              	.L16:
 1278              		.loc 1 246 0 discriminator 4
 1279 0036 EC23     		movs	r3, #236
 1280              	.L17:
 1281              		.loc 1 246 0 discriminator 6
 1282 0038 FB71     		strb	r3, [r7, #7]
 247:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1283              		.loc 1 247 0 is_stmt 1 discriminator 6
 1284 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1285 003c 3833     		adds	r3, r3, #56
 1286 003e DBB2     		uxtb	r3, r3
 1287 0040 9BB2     		uxth	r3, r3
 1288 0042 03F0FC03 		and	r3, r3, #252
 1289 0046 9AB2     		uxth	r2, r3
 1290 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1291 004a 9BB2     		uxth	r3, r3
 1292 004c 03F00303 		and	r3, r3, #3
 1293 0050 9BB2     		uxth	r3, r3
 1294 0052 1343     		orrs	r3, r3, r2
 1295 0054 9BB2     		uxth	r3, r3
 1296 0056 9BB2     		uxth	r3, r3
 1297 0058 0620     		movs	r0, #6
 1298 005a 1946     		mov	r1, r3
 1299 005c FFF7FEFF 		bl	cc2400_set
 248:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1300              		.loc 1 248 0 discriminator 6
 1301 0060 084A     		ldr	r2, .L18
 1302 0062 FB79     		ldrb	r3, [r7, #7]
 1303 0064 1370     		strb	r3, [r2]
ARM GAS  /tmp/ccTf0kks.s 			page 27


 249:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1304              		.loc 1 249 0 discriminator 6
 1305 0066 97F90730 		ldrsb	r3, [r7, #7]
 1306 006a 13F1770F 		cmn	r3, #119
 1307 006e B4BF     		ite	lt
 1308 0070 0123     		movlt	r3, #1
 1309 0072 0023     		movge	r3, #0
 1310 0074 DBB2     		uxtb	r3, r3
 1311 0076 1A46     		mov	r2, r3
 1312 0078 034B     		ldr	r3, .L18+4
 1313 007a 1A70     		strb	r2, [r3]
 250:bluetooth_rxtx.c **** }
 1314              		.loc 1 250 0 discriminator 6
 1315 007c 0837     		adds	r7, r7, #8
 1316              		.cfi_def_cfa_offset 8
 1317 007e BD46     		mov	sp, r7
 1318              		.cfi_def_cfa_register 13
 1319              		@ sp needed
 1320 0080 80BD     		pop	{r7, pc}
 1321              	.L19:
 1322 0082 00BF     		.align	2
 1323              	.L18:
 1324 0084 00000000 		.word	cs_threshold_cur
 1325 0088 00000000 		.word	cs_no_squelch
 1326              		.cfi_endproc
 1327              	.LFE3:
 1329              		.section	.text.enqueue,"ax",%progbits
 1330              		.align	2
 1331              		.thumb
 1332              		.thumb_func
 1334              	enqueue:
 1335              	.LFB4:
 251:bluetooth_rxtx.c **** 
 252:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 253:bluetooth_rxtx.c **** {
 1336              		.loc 1 253 0
 1337              		.cfi_startproc
 1338              		@ args = 0, pretend = 0, frame = 32
 1339              		@ frame_needed = 1, uses_anonymous_args = 0
 1340 0000 80B5     		push	{r7, lr}
 1341              		.cfi_def_cfa_offset 8
 1342              		.cfi_offset 7, -8
 1343              		.cfi_offset 14, -4
 1344 0002 88B0     		sub	sp, sp, #32
 1345              		.cfi_def_cfa_offset 40
 1346 0004 00AF     		add	r7, sp, #0
 1347              		.cfi_def_cfa_register 7
 1348 0006 0346     		mov	r3, r0
 1349 0008 3960     		str	r1, [r7]
 1350 000a FB71     		strb	r3, [r7, #7]
 254:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1351              		.loc 1 254 0
 1352 000c FFF7FEFF 		bl	usb_enqueue
 1353 0010 F861     		str	r0, [r7, #28]
 255:bluetooth_rxtx.c **** 
 256:bluetooth_rxtx.c **** 	/* fail if queue is full */
 257:bluetooth_rxtx.c **** 	if (f == NULL) {
ARM GAS  /tmp/ccTf0kks.s 			page 28


 1354              		.loc 1 257 0
 1355 0012 FB69     		ldr	r3, [r7, #28]
 1356 0014 002B     		cmp	r3, #0
 1357 0016 09D1     		bne	.L21
 258:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1358              		.loc 1 258 0
 1359 0018 594B     		ldr	r3, .L27
 1360 001a 1B78     		ldrb	r3, [r3]
 1361 001c DBB2     		uxtb	r3, r3
 1362 001e 43F00403 		orr	r3, r3, #4
 1363 0022 DAB2     		uxtb	r2, r3
 1364 0024 564B     		ldr	r3, .L27
 1365 0026 1A70     		strb	r2, [r3]
 259:bluetooth_rxtx.c **** 		return 0;
 1366              		.loc 1 259 0
 1367 0028 0023     		movs	r3, #0
 1368 002a A5E0     		b	.L22
 1369              	.L21:
 260:bluetooth_rxtx.c **** 	}
 261:bluetooth_rxtx.c **** 
 262:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1370              		.loc 1 262 0
 1371 002c FB69     		ldr	r3, [r7, #28]
 1372 002e FA79     		ldrb	r2, [r7, #7]
 1373 0030 1A70     		strb	r2, [r3]
 263:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1374              		.loc 1 263 0
 1375 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1376 0034 042B     		cmp	r3, #4
 1377 0036 13D1     		bne	.L23
 264:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1378              		.loc 1 264 0
 1379 0038 524B     		ldr	r3, .L27+4
 1380 003a 1B68     		ldr	r3, [r3]
 1381 003c 1B0D     		lsrs	r3, r3, #20
 1382 003e DAB2     		uxtb	r2, r3
 1383 0040 FB69     		ldr	r3, [r7, #28]
 1384 0042 DA70     		strb	r2, [r3, #3]
 265:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1385              		.loc 1 265 0
 1386 0044 4F4B     		ldr	r3, .L27+4
 1387 0046 1B68     		ldr	r3, [r3]
 1388 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1389 004c 40F63542 		movw	r2, #3125
 1390 0050 02FB03F2 		mul	r2, r2, r3
 1391 0054 4C4B     		ldr	r3, .L27+8
 1392 0056 1B68     		ldr	r3, [r3]
 1393 0058 1A44     		add	r2, r2, r3
 1394 005a FB69     		ldr	r3, [r7, #28]
 1395 005c 5A60     		str	r2, [r3, #4]
 1396 005e 08E0     		b	.L24
 1397              	.L23:
 266:bluetooth_rxtx.c **** 	} else {
 267:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1398              		.loc 1 267 0
 1399 0060 4A4B     		ldr	r3, .L27+12
 1400 0062 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 29


 1401 0064 DAB2     		uxtb	r2, r3
 1402 0066 FB69     		ldr	r3, [r7, #28]
 1403 0068 DA70     		strb	r2, [r3, #3]
 268:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1404              		.loc 1 268 0
 1405 006a 494B     		ldr	r3, .L27+16
 1406 006c 1A68     		ldr	r2, [r3]
 1407 006e FB69     		ldr	r3, [r7, #28]
 1408 0070 5A60     		str	r2, [r3, #4]
 1409              	.L24:
 269:bluetooth_rxtx.c **** 	}
 270:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1410              		.loc 1 270 0
 1411 0072 484B     		ldr	r3, .L27+20
 1412 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1413 0076 9BB2     		uxth	r3, r3
 1414 0078 DBB2     		uxtb	r3, r3
 1415 007a 623B     		subs	r3, r3, #98
 1416 007c DAB2     		uxtb	r2, r3
 1417 007e FB69     		ldr	r3, [r7, #28]
 1418 0080 9A70     		strb	r2, [r3, #2]
 271:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1419              		.loc 1 271 0
 1420 0082 454B     		ldr	r3, .L27+24
 1421 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1422 0086 DAB2     		uxtb	r2, r3
 1423 0088 FB69     		ldr	r3, [r7, #28]
 1424 008a 5A72     		strb	r2, [r3, #9]
 272:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
 1425              		.loc 1 272 0
 1426 008c 434B     		ldr	r3, .L27+28
 1427 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1428 0090 DAB2     		uxtb	r2, r3
 1429 0092 FB69     		ldr	r3, [r7, #28]
 1430 0094 1A72     		strb	r2, [r3, #8]
 273:bluetooth_rxtx.c **** 	if (hop_mode != HOP_NONE)
 1431              		.loc 1 273 0
 1432 0096 424B     		ldr	r3, .L27+32
 1433 0098 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1434 009a 002B     		cmp	r3, #0
 1435 009c 09D0     		beq	.L25
 274:bluetooth_rxtx.c **** 	//	f->rssi_avg = (int8_t)((rssi_iir[idle_buf_channel-2402] + 128)/256);
 275:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_sum/rssi_count;
 1436              		.loc 1 275 0
 1437 009e 414B     		ldr	r3, .L27+36
 1438 00a0 1B68     		ldr	r3, [r3]
 1439 00a2 414A     		ldr	r2, .L27+40
 1440 00a4 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1441 00a6 93FBF2F3 		sdiv	r3, r3, r2
 1442 00aa DAB2     		uxtb	r2, r3
 1443 00ac FB69     		ldr	r3, [r7, #28]
 1444 00ae 9A72     		strb	r2, [r3, #10]
 1445 00b0 08E0     		b	.L26
 1446              	.L25:
 276:bluetooth_rxtx.c **** 	else
 277:bluetooth_rxtx.c **** 		//f->rssi_avg = (int8_t)((rssi_iir[0] + 128)/256);
 278:bluetooth_rxtx.c **** 		f->rssi_avg = rssi_sum/rssi_count;
ARM GAS  /tmp/ccTf0kks.s 			page 30


 1447              		.loc 1 278 0
 1448 00b2 3C4B     		ldr	r3, .L27+36
 1449 00b4 1B68     		ldr	r3, [r3]
 1450 00b6 3C4A     		ldr	r2, .L27+40
 1451 00b8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1452 00ba 93FBF2F3 		sdiv	r3, r3, r2
 1453 00be DAB2     		uxtb	r2, r3
 1454 00c0 FB69     		ldr	r3, [r7, #28]
 1455 00c2 9A72     		strb	r2, [r3, #10]
 1456              	.L26:
 279:bluetooth_rxtx.c **** 	f->rssi_count = rssi_count;
 1457              		.loc 1 279 0
 1458 00c4 384B     		ldr	r3, .L27+40
 1459 00c6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1460 00c8 FB69     		ldr	r3, [r7, #28]
 1461 00ca DA72     		strb	r2, [r3, #11]
 280:bluetooth_rxtx.c **** 
 281:bluetooth_rxtx.c **** 	USRLED_SET;
 1462              		.loc 1 281 0
 1463 00cc 374B     		ldr	r3, .L27+44
 1464 00ce 0222     		movs	r2, #2
 1465 00d0 1A60     		str	r2, [r3]
 282:bluetooth_rxtx.c **** 
 283:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 284:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1466              		.loc 1 284 0
 1467 00d2 FB69     		ldr	r3, [r7, #28]
 1468 00d4 0E33     		adds	r3, r3, #14
 1469 00d6 BB61     		str	r3, [r7, #24]
 285:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1470              		.loc 1 285 0
 1471 00d8 3B68     		ldr	r3, [r7]
 1472 00da 7B61     		str	r3, [r7, #20]
 286:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1473              		.loc 1 286 0
 1474 00dc 7B69     		ldr	r3, [r7, #20]
 1475 00de 1A68     		ldr	r2, [r3]
 1476 00e0 BB69     		ldr	r3, [r7, #24]
 1477 00e2 1A60     		str	r2, [r3]
 287:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1478              		.loc 1 287 0
 1479 00e4 BB69     		ldr	r3, [r7, #24]
 1480 00e6 0433     		adds	r3, r3, #4
 1481 00e8 7A69     		ldr	r2, [r7, #20]
 1482 00ea 5268     		ldr	r2, [r2, #4]
 1483 00ec 1A60     		str	r2, [r3]
 288:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1484              		.loc 1 288 0
 1485 00ee BB69     		ldr	r3, [r7, #24]
 1486 00f0 0833     		adds	r3, r3, #8
 1487 00f2 7A69     		ldr	r2, [r7, #20]
 1488 00f4 9268     		ldr	r2, [r2, #8]
 1489 00f6 1A60     		str	r2, [r3]
 289:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1490              		.loc 1 289 0
 1491 00f8 BB69     		ldr	r3, [r7, #24]
 1492 00fa 0C33     		adds	r3, r3, #12
ARM GAS  /tmp/ccTf0kks.s 			page 31


 1493 00fc 7A69     		ldr	r2, [r7, #20]
 1494 00fe D268     		ldr	r2, [r2, #12]
 1495 0100 1A60     		str	r2, [r3]
 290:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1496              		.loc 1 290 0
 1497 0102 BB69     		ldr	r3, [r7, #24]
 1498 0104 1033     		adds	r3, r3, #16
 1499 0106 7A69     		ldr	r2, [r7, #20]
 1500 0108 1269     		ldr	r2, [r2, #16]
 1501 010a 1A60     		str	r2, [r3]
 291:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1502              		.loc 1 291 0
 1503 010c BB69     		ldr	r3, [r7, #24]
 1504 010e 1433     		adds	r3, r3, #20
 1505 0110 7A69     		ldr	r2, [r7, #20]
 1506 0112 5269     		ldr	r2, [r2, #20]
 1507 0114 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1508              		.loc 1 292 0
 1509 0116 BB69     		ldr	r3, [r7, #24]
 1510 0118 1833     		adds	r3, r3, #24
 1511 011a 7A69     		ldr	r2, [r7, #20]
 1512 011c 9269     		ldr	r2, [r2, #24]
 1513 011e 1A60     		str	r2, [r3]
 293:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1514              		.loc 1 293 0
 1515 0120 BB69     		ldr	r3, [r7, #24]
 1516 0122 1C33     		adds	r3, r3, #28
 1517 0124 7A69     		ldr	r2, [r7, #20]
 1518 0126 D269     		ldr	r2, [r2, #28]
 1519 0128 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1520              		.loc 1 294 0
 1521 012a BB69     		ldr	r3, [r7, #24]
 1522 012c 2033     		adds	r3, r3, #32
 1523 012e 7A69     		ldr	r2, [r7, #20]
 1524 0130 126A     		ldr	r2, [r2, #32]
 1525 0132 1A60     		str	r2, [r3]
 295:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1526              		.loc 1 295 0
 1527 0134 BB69     		ldr	r3, [r7, #24]
 1528 0136 2433     		adds	r3, r3, #36
 1529 0138 7A69     		ldr	r2, [r7, #20]
 1530 013a 526A     		ldr	r2, [r2, #36]
 1531 013c 1A60     		str	r2, [r3]
 296:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1532              		.loc 1 296 0
 1533 013e BB69     		ldr	r3, [r7, #24]
 1534 0140 2833     		adds	r3, r3, #40
 1535 0142 7A69     		ldr	r2, [r7, #20]
 1536 0144 926A     		ldr	r2, [r2, #40]
 1537 0146 1A60     		str	r2, [r3]
 297:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1538              		.loc 1 297 0
 1539 0148 BB69     		ldr	r3, [r7, #24]
 1540 014a 2C33     		adds	r3, r3, #44
 1541 014c 7A69     		ldr	r2, [r7, #20]
ARM GAS  /tmp/ccTf0kks.s 			page 32


 1542 014e D26A     		ldr	r2, [r2, #44]
 1543 0150 1A60     		str	r2, [r3]
 298:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 299:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1544              		.loc 1 299 0
 1545 0152 FB69     		ldr	r3, [r7, #28]
 1546 0154 0E33     		adds	r3, r3, #14
 1547 0156 3B61     		str	r3, [r7, #16]
 300:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1548              		.loc 1 300 0
 1549 0158 3B68     		ldr	r3, [r7]
 1550 015a FB60     		str	r3, [r7, #12]
 301:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1551              		.loc 1 301 0
 1552 015c 3B69     		ldr	r3, [r7, #16]
 1553 015e 3033     		adds	r3, r3, #48
 1554 0160 FA68     		ldr	r2, [r7, #12]
 1555 0162 128E     		ldrh	r2, [r2, #48]
 1556 0164 1A80     		strh	r2, [r3]	@ movhi
 302:bluetooth_rxtx.c **** 
 303:bluetooth_rxtx.c **** 	f->status = status;
 1557              		.loc 1 303 0
 1558 0166 064B     		ldr	r3, .L27
 1559 0168 1B78     		ldrb	r3, [r3]
 1560 016a DAB2     		uxtb	r2, r3
 1561 016c FB69     		ldr	r3, [r7, #28]
 1562 016e 5A70     		strb	r2, [r3, #1]
 304:bluetooth_rxtx.c **** 	status = 0;
 1563              		.loc 1 304 0
 1564 0170 034B     		ldr	r3, .L27
 1565 0172 0022     		movs	r2, #0
 1566 0174 1A70     		strb	r2, [r3]
 305:bluetooth_rxtx.c **** 
 306:bluetooth_rxtx.c **** 	return 1;
 1567              		.loc 1 306 0
 1568 0176 0123     		movs	r3, #1
 1569              	.L22:
 307:bluetooth_rxtx.c **** }
 1570              		.loc 1 307 0
 1571 0178 1846     		mov	r0, r3
 1572 017a 2037     		adds	r7, r7, #32
 1573              		.cfi_def_cfa_offset 8
 1574 017c BD46     		mov	sp, r7
 1575              		.cfi_def_cfa_register 13
 1576              		@ sp needed
 1577 017e 80BD     		pop	{r7, pc}
 1578              	.L28:
 1579              		.align	2
 1580              	.L27:
 1581 0180 00000000 		.word	status
 1582 0184 00000000 		.word	clkn
 1583 0188 08400040 		.word	1073758216
 1584 018c 00000000 		.word	idle_buf_clkn_high
 1585 0190 00000000 		.word	idle_buf_clk100ns
 1586 0194 00000000 		.word	idle_buf_channel
 1587 0198 00000000 		.word	rssi_min
 1588 019c 00000000 		.word	rssi_max
ARM GAS  /tmp/ccTf0kks.s 			page 33


 1589 01a0 00000000 		.word	hop_mode
 1590 01a4 00000000 		.word	rssi_sum
 1591 01a8 00000000 		.word	rssi_count
 1592 01ac 38C00920 		.word	537509944
 1593              		.cfi_endproc
 1594              	.LFE4:
 1596              		.section	.text.enqueue_with_ts,"ax",%progbits
 1597              		.align	2
 1598              		.global	enqueue_with_ts
 1599              		.thumb
 1600              		.thumb_func
 1602              	enqueue_with_ts:
 1603              	.LFB5:
 308:bluetooth_rxtx.c **** 
 309:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 310:bluetooth_rxtx.c **** {
 1604              		.loc 1 310 0
 1605              		.cfi_startproc
 1606              		@ args = 0, pretend = 0, frame = 40
 1607              		@ frame_needed = 1, uses_anonymous_args = 0
 1608 0000 80B5     		push	{r7, lr}
 1609              		.cfi_def_cfa_offset 8
 1610              		.cfi_offset 7, -8
 1611              		.cfi_offset 14, -4
 1612 0002 8AB0     		sub	sp, sp, #40
 1613              		.cfi_def_cfa_offset 48
 1614 0004 00AF     		add	r7, sp, #0
 1615              		.cfi_def_cfa_register 7
 1616 0006 0346     		mov	r3, r0
 1617 0008 B960     		str	r1, [r7, #8]
 1618 000a 7A60     		str	r2, [r7, #4]
 1619 000c FB73     		strb	r3, [r7, #15]
 311:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1620              		.loc 1 311 0
 1621 000e FFF7FEFF 		bl	usb_enqueue
 1622 0012 7862     		str	r0, [r7, #36]
 312:bluetooth_rxtx.c **** 
 313:bluetooth_rxtx.c **** 	/* fail if queue is full */
 314:bluetooth_rxtx.c **** 	if (f == NULL) {
 1623              		.loc 1 314 0
 1624 0014 7B6A     		ldr	r3, [r7, #36]
 1625 0016 002B     		cmp	r3, #0
 1626 0018 09D1     		bne	.L30
 315:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1627              		.loc 1 315 0
 1628 001a 3C4B     		ldr	r3, .L32
 1629 001c 1B78     		ldrb	r3, [r3]
 1630 001e DBB2     		uxtb	r3, r3
 1631 0020 43F00403 		orr	r3, r3, #4
 1632 0024 DAB2     		uxtb	r2, r3
 1633 0026 394B     		ldr	r3, .L32
 1634 0028 1A70     		strb	r2, [r3]
 316:bluetooth_rxtx.c **** 		return 0;
 1635              		.loc 1 316 0
 1636 002a 0023     		movs	r3, #0
 1637 002c 69E0     		b	.L31
 1638              	.L30:
ARM GAS  /tmp/ccTf0kks.s 			page 34


 317:bluetooth_rxtx.c **** 	}
 318:bluetooth_rxtx.c **** 
 319:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 1639              		.loc 1 319 0
 1640 002e 7B6A     		ldr	r3, [r7, #36]
 1641 0030 0022     		movs	r2, #0
 1642 0032 DA70     		strb	r2, [r3, #3]
 320:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1643              		.loc 1 320 0
 1644 0034 7B6A     		ldr	r3, [r7, #36]
 1645 0036 7A68     		ldr	r2, [r7, #4]
 1646 0038 5A60     		str	r2, [r3, #4]
 321:bluetooth_rxtx.c **** 
 322:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1647              		.loc 1 322 0
 1648 003a 354B     		ldr	r3, .L32+4
 1649 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1650 003e 9BB2     		uxth	r3, r3
 1651 0040 DBB2     		uxtb	r3, r3
 1652 0042 623B     		subs	r3, r3, #98
 1653 0044 DAB2     		uxtb	r2, r3
 1654 0046 7B6A     		ldr	r3, [r7, #36]
 1655 0048 9A70     		strb	r2, [r3, #2]
 323:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 1656              		.loc 1 323 0
 1657 004a 7B6A     		ldr	r3, [r7, #36]
 1658 004c 0022     		movs	r2, #0
 1659 004e 9A72     		strb	r2, [r3, #10]
 324:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 1660              		.loc 1 324 0
 1661 0050 7B6A     		ldr	r3, [r7, #36]
 1662 0052 0022     		movs	r2, #0
 1663 0054 DA72     		strb	r2, [r3, #11]
 325:bluetooth_rxtx.c **** 
 326:bluetooth_rxtx.c **** 	USRLED_SET;
 1664              		.loc 1 326 0
 1665 0056 2F4B     		ldr	r3, .L32+8
 1666 0058 0222     		movs	r2, #2
 1667 005a 1A60     		str	r2, [r3]
 327:bluetooth_rxtx.c **** 
 328:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 329:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1668              		.loc 1 329 0
 1669 005c 7B6A     		ldr	r3, [r7, #36]
 1670 005e 0E33     		adds	r3, r3, #14
 1671 0060 3B62     		str	r3, [r7, #32]
 330:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1672              		.loc 1 330 0
 1673 0062 BB68     		ldr	r3, [r7, #8]
 1674 0064 FB61     		str	r3, [r7, #28]
 331:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1675              		.loc 1 331 0
 1676 0066 FB69     		ldr	r3, [r7, #28]
 1677 0068 1A68     		ldr	r2, [r3]
 1678 006a 3B6A     		ldr	r3, [r7, #32]
 1679 006c 1A60     		str	r2, [r3]
 332:bluetooth_rxtx.c **** 	p1[1] = p2[1];
ARM GAS  /tmp/ccTf0kks.s 			page 35


 1680              		.loc 1 332 0
 1681 006e 3B6A     		ldr	r3, [r7, #32]
 1682 0070 0433     		adds	r3, r3, #4
 1683 0072 FA69     		ldr	r2, [r7, #28]
 1684 0074 5268     		ldr	r2, [r2, #4]
 1685 0076 1A60     		str	r2, [r3]
 333:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1686              		.loc 1 333 0
 1687 0078 3B6A     		ldr	r3, [r7, #32]
 1688 007a 0833     		adds	r3, r3, #8
 1689 007c FA69     		ldr	r2, [r7, #28]
 1690 007e 9268     		ldr	r2, [r2, #8]
 1691 0080 1A60     		str	r2, [r3]
 334:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1692              		.loc 1 334 0
 1693 0082 3B6A     		ldr	r3, [r7, #32]
 1694 0084 0C33     		adds	r3, r3, #12
 1695 0086 FA69     		ldr	r2, [r7, #28]
 1696 0088 D268     		ldr	r2, [r2, #12]
 1697 008a 1A60     		str	r2, [r3]
 335:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1698              		.loc 1 335 0
 1699 008c 3B6A     		ldr	r3, [r7, #32]
 1700 008e 1033     		adds	r3, r3, #16
 1701 0090 FA69     		ldr	r2, [r7, #28]
 1702 0092 1269     		ldr	r2, [r2, #16]
 1703 0094 1A60     		str	r2, [r3]
 336:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1704              		.loc 1 336 0
 1705 0096 3B6A     		ldr	r3, [r7, #32]
 1706 0098 1433     		adds	r3, r3, #20
 1707 009a FA69     		ldr	r2, [r7, #28]
 1708 009c 5269     		ldr	r2, [r2, #20]
 1709 009e 1A60     		str	r2, [r3]
 337:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1710              		.loc 1 337 0
 1711 00a0 3B6A     		ldr	r3, [r7, #32]
 1712 00a2 1833     		adds	r3, r3, #24
 1713 00a4 FA69     		ldr	r2, [r7, #28]
 1714 00a6 9269     		ldr	r2, [r2, #24]
 1715 00a8 1A60     		str	r2, [r3]
 338:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1716              		.loc 1 338 0
 1717 00aa 3B6A     		ldr	r3, [r7, #32]
 1718 00ac 1C33     		adds	r3, r3, #28
 1719 00ae FA69     		ldr	r2, [r7, #28]
 1720 00b0 D269     		ldr	r2, [r2, #28]
 1721 00b2 1A60     		str	r2, [r3]
 339:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1722              		.loc 1 339 0
 1723 00b4 3B6A     		ldr	r3, [r7, #32]
 1724 00b6 2033     		adds	r3, r3, #32
 1725 00b8 FA69     		ldr	r2, [r7, #28]
 1726 00ba 126A     		ldr	r2, [r2, #32]
 1727 00bc 1A60     		str	r2, [r3]
 340:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1728              		.loc 1 340 0
ARM GAS  /tmp/ccTf0kks.s 			page 36


 1729 00be 3B6A     		ldr	r3, [r7, #32]
 1730 00c0 2433     		adds	r3, r3, #36
 1731 00c2 FA69     		ldr	r2, [r7, #28]
 1732 00c4 526A     		ldr	r2, [r2, #36]
 1733 00c6 1A60     		str	r2, [r3]
 341:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1734              		.loc 1 341 0
 1735 00c8 3B6A     		ldr	r3, [r7, #32]
 1736 00ca 2833     		adds	r3, r3, #40
 1737 00cc FA69     		ldr	r2, [r7, #28]
 1738 00ce 926A     		ldr	r2, [r2, #40]
 1739 00d0 1A60     		str	r2, [r3]
 342:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1740              		.loc 1 342 0
 1741 00d2 3B6A     		ldr	r3, [r7, #32]
 1742 00d4 2C33     		adds	r3, r3, #44
 1743 00d6 FA69     		ldr	r2, [r7, #28]
 1744 00d8 D26A     		ldr	r2, [r2, #44]
 1745 00da 1A60     		str	r2, [r3]
 343:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 344:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1746              		.loc 1 344 0
 1747 00dc 7B6A     		ldr	r3, [r7, #36]
 1748 00de 0E33     		adds	r3, r3, #14
 1749 00e0 BB61     		str	r3, [r7, #24]
 345:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1750              		.loc 1 345 0
 1751 00e2 BB68     		ldr	r3, [r7, #8]
 1752 00e4 7B61     		str	r3, [r7, #20]
 346:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1753              		.loc 1 346 0
 1754 00e6 BB69     		ldr	r3, [r7, #24]
 1755 00e8 3033     		adds	r3, r3, #48
 1756 00ea 7A69     		ldr	r2, [r7, #20]
 1757 00ec 128E     		ldrh	r2, [r2, #48]
 1758 00ee 1A80     		strh	r2, [r3]	@ movhi
 347:bluetooth_rxtx.c **** 
 348:bluetooth_rxtx.c **** 	f->status = status;
 1759              		.loc 1 348 0
 1760 00f0 064B     		ldr	r3, .L32
 1761 00f2 1B78     		ldrb	r3, [r3]
 1762 00f4 DAB2     		uxtb	r2, r3
 1763 00f6 7B6A     		ldr	r3, [r7, #36]
 1764 00f8 5A70     		strb	r2, [r3, #1]
 349:bluetooth_rxtx.c **** 	status = 0;
 1765              		.loc 1 349 0
 1766 00fa 044B     		ldr	r3, .L32
 1767 00fc 0022     		movs	r2, #0
 1768 00fe 1A70     		strb	r2, [r3]
 350:bluetooth_rxtx.c **** 
 351:bluetooth_rxtx.c **** 	return 1;
 1769              		.loc 1 351 0
 1770 0100 0123     		movs	r3, #1
 1771              	.L31:
 352:bluetooth_rxtx.c **** }
 1772              		.loc 1 352 0
 1773 0102 1846     		mov	r0, r3
ARM GAS  /tmp/ccTf0kks.s 			page 37


 1774 0104 2837     		adds	r7, r7, #40
 1775              		.cfi_def_cfa_offset 8
 1776 0106 BD46     		mov	sp, r7
 1777              		.cfi_def_cfa_register 13
 1778              		@ sp needed
 1779 0108 80BD     		pop	{r7, pc}
 1780              	.L33:
 1781 010a 00BF     		.align	2
 1782              	.L32:
 1783 010c 00000000 		.word	status
 1784 0110 00000000 		.word	channel
 1785 0114 38C00920 		.word	537509944
 1786              		.cfi_endproc
 1787              	.LFE5:
 1789              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 1790              		.align	2
 1791              		.thumb
 1792              		.thumb_func
 1794              	cs_threshold_calc_and_set:
 1795              	.LFB6:
 353:bluetooth_rxtx.c **** 
 354:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 355:bluetooth_rxtx.c **** {
 1796              		.loc 1 355 0
 1797              		.cfi_startproc
 1798              		@ args = 0, pretend = 0, frame = 8
 1799              		@ frame_needed = 1, uses_anonymous_args = 0
 1800 0000 80B5     		push	{r7, lr}
 1801              		.cfi_def_cfa_offset 8
 1802              		.cfi_offset 7, -8
 1803              		.cfi_offset 14, -4
 1804 0002 82B0     		sub	sp, sp, #8
 1805              		.cfi_def_cfa_offset 16
 1806 0004 00AF     		add	r7, sp, #0
 1807              		.cfi_def_cfa_register 7
 356:bluetooth_rxtx.c **** 	int8_t level;
 357:bluetooth_rxtx.c **** 
 358:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 359:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 360:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 361:bluetooth_rxtx.c **** 	 * value for it. */
 362:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 1808              		.loc 1 362 0
 1809 0006 174B     		ldr	r3, .L38
 1810 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1811 000a 002B     		cmp	r3, #0
 1812 000c 1DD0     		beq	.L35
 1813              		.loc 1 362 0 is_stmt 0 discriminator 1
 1814 000e 164B     		ldr	r3, .L38+4
 1815 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1816 0012 5BB2     		sxtb	r3, r3
 1817 0014 002B     		cmp	r3, #0
 1818 0016 18DD     		ble	.L35
 1819              	.LBB2:
 363:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1820              		.loc 1 363 0 is_stmt 1
 1821 0018 144B     		ldr	r3, .L38+8
ARM GAS  /tmp/ccTf0kks.s 			page 38


 1822 001a 1B88     		ldrh	r3, [r3]	@ movhi
 1823 001c 9BB2     		uxth	r3, r3
 1824 001e A3F66213 		subw	r3, r3, #2402
 1825 0022 134A     		ldr	r2, .L38+12
 1826 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1827 0028 1BB2     		sxth	r3, r3
 1828 002a 8033     		adds	r3, r3, #128
 1829 002c 002B     		cmp	r3, #0
 1830 002e 00DA     		bge	.L36
 1831 0030 FF33     		adds	r3, r3, #255
 1832              	.L36:
 1833 0032 1B12     		asrs	r3, r3, #8
 1834 0034 BB71     		strb	r3, [r7, #6]
 364:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 1835              		.loc 1 364 0
 1836 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1837 0038 0B4B     		ldr	r3, .L38+4
 1838 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1839 003c DBB2     		uxtb	r3, r3
 1840 003e 1344     		add	r3, r3, r2
 1841 0040 DBB2     		uxtb	r3, r3
 1842 0042 363B     		subs	r3, r3, #54
 1843 0044 DBB2     		uxtb	r3, r3
 1844 0046 FB71     		strb	r3, [r7, #7]
 1845              	.LBE2:
 362:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1846              		.loc 1 362 0
 1847 0048 02E0     		b	.L37
 1848              	.L35:
 365:bluetooth_rxtx.c **** 	}
 366:bluetooth_rxtx.c **** 	else {
 367:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 1849              		.loc 1 367 0
 1850 004a 074B     		ldr	r3, .L38+4
 1851 004c 1B78     		ldrb	r3, [r3]
 1852 004e FB71     		strb	r3, [r7, #7]
 1853              	.L37:
 368:bluetooth_rxtx.c **** 	}
 369:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 1854              		.loc 1 369 0
 1855 0050 97F90730 		ldrsb	r3, [r7, #7]
 1856 0054 1846     		mov	r0, r3
 1857 0056 0321     		movs	r1, #3
 1858 0058 FFF7FEFF 		bl	cs_threshold_set
 370:bluetooth_rxtx.c **** }
 1859              		.loc 1 370 0
 1860 005c 0837     		adds	r7, r7, #8
 1861              		.cfi_def_cfa_offset 8
 1862 005e BD46     		mov	sp, r7
 1863              		.cfi_def_cfa_register 13
 1864              		@ sp needed
 1865 0060 80BD     		pop	{r7, pc}
 1866              	.L39:
 1867 0062 00BF     		.align	2
 1868              	.L38:
 1869 0064 00000000 		.word	hop_mode
 1870 0068 00000000 		.word	cs_threshold_req
ARM GAS  /tmp/ccTf0kks.s 			page 39


 1871 006c 00000000 		.word	channel
 1872 0070 00000000 		.word	rssi_iir
 1873              		.cfi_endproc
 1874              	.LFE6:
 1876              		.section	.text.cs_trigger_enable,"ax",%progbits
 1877              		.align	2
 1878              		.thumb
 1879              		.thumb_func
 1881              	cs_trigger_enable:
 1882              	.LFB7:
 371:bluetooth_rxtx.c **** 
 372:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 373:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 374:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 375:bluetooth_rxtx.c ****  * and off here. */
 376:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 377:bluetooth_rxtx.c **** {
 1883              		.loc 1 377 0
 1884              		.cfi_startproc
 1885              		@ args = 0, pretend = 0, frame = 0
 1886              		@ frame_needed = 1, uses_anonymous_args = 0
 1887              		@ link register save eliminated.
 1888 0000 80B4     		push	{r7}
 1889              		.cfi_def_cfa_offset 4
 1890              		.cfi_offset 7, -4
 1891 0002 00AF     		add	r7, sp, #0
 1892              		.cfi_def_cfa_register 7
 378:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1893              		.loc 1 378 0
 1894 0004 094B     		ldr	r3, .L41
 1895 0006 0022     		movs	r2, #0
 1896 0008 1A70     		strb	r2, [r3]
 379:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 1897              		.loc 1 379 0
 1898 000a 094B     		ldr	r3, .L41+4
 1899 000c 4FF40012 		mov	r2, #2097152
 1900 0010 1A60     		str	r2, [r3]
 380:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1901              		.loc 1 380 0
 1902 0012 084B     		ldr	r3, .L41+8
 1903 0014 0422     		movs	r2, #4
 1904 0016 1A60     		str	r2, [r3]
 381:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 1905              		.loc 1 381 0
 1906 0018 074A     		ldr	r2, .L41+12
 1907 001a 074B     		ldr	r3, .L41+12
 1908 001c 1B68     		ldr	r3, [r3]
 1909 001e 43F00403 		orr	r3, r3, #4
 1910 0022 1360     		str	r3, [r2]
 382:bluetooth_rxtx.c **** }
 1911              		.loc 1 382 0
 1912 0024 BD46     		mov	sp, r7
 1913              		.cfi_def_cfa_register 13
 1914              		@ sp needed
 1915 0026 5DF8047B 		ldr	r7, [sp], #4
 1916              		.cfi_restore 7
 1917              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccTf0kks.s 			page 40


 1918 002a 7047     		bx	lr
 1919              	.L42:
 1920              		.align	2
 1921              	.L41:
 1922 002c 00000000 		.word	cs_trigger
 1923 0030 00E100E0 		.word	-536813312
 1924 0034 AC800240 		.word	1073905836
 1925 0038 B4800240 		.word	1073905844
 1926              		.cfi_endproc
 1927              	.LFE7:
 1929              		.section	.text.cs_trigger_disable,"ax",%progbits
 1930              		.align	2
 1931              		.thumb
 1932              		.thumb_func
 1934              	cs_trigger_disable:
 1935              	.LFB8:
 383:bluetooth_rxtx.c **** 
 384:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 385:bluetooth_rxtx.c **** {
 1936              		.loc 1 385 0
 1937              		.cfi_startproc
 1938              		@ args = 0, pretend = 0, frame = 0
 1939              		@ frame_needed = 1, uses_anonymous_args = 0
 1940              		@ link register save eliminated.
 1941 0000 80B4     		push	{r7}
 1942              		.cfi_def_cfa_offset 4
 1943              		.cfi_offset 7, -4
 1944 0002 00AF     		add	r7, sp, #0
 1945              		.cfi_def_cfa_register 7
 386:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 1946              		.loc 1 386 0
 1947 0004 094A     		ldr	r2, .L44
 1948 0006 094B     		ldr	r3, .L44
 1949 0008 1B68     		ldr	r3, [r3]
 1950 000a 23F00403 		bic	r3, r3, #4
 1951 000e 1360     		str	r3, [r2]
 387:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1952              		.loc 1 387 0
 1953 0010 074B     		ldr	r3, .L44+4
 1954 0012 0422     		movs	r2, #4
 1955 0014 1A60     		str	r2, [r3]
 388:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 1956              		.loc 1 388 0
 1957 0016 074B     		ldr	r3, .L44+8
 1958 0018 4FF40012 		mov	r2, #2097152
 1959 001c 1A60     		str	r2, [r3]
 389:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1960              		.loc 1 389 0
 1961 001e 064B     		ldr	r3, .L44+12
 1962 0020 0022     		movs	r2, #0
 1963 0022 1A70     		strb	r2, [r3]
 390:bluetooth_rxtx.c **** }
 1964              		.loc 1 390 0
 1965 0024 BD46     		mov	sp, r7
 1966              		.cfi_def_cfa_register 13
 1967              		@ sp needed
 1968 0026 5DF8047B 		ldr	r7, [sp], #4
ARM GAS  /tmp/ccTf0kks.s 			page 41


 1969              		.cfi_restore 7
 1970              		.cfi_def_cfa_offset 0
 1971 002a 7047     		bx	lr
 1972              	.L45:
 1973              		.align	2
 1974              	.L44:
 1975 002c B4800240 		.word	1073905844
 1976 0030 AC800240 		.word	1073905836
 1977 0034 80E100E0 		.word	-536813184
 1978 0038 00000000 		.word	cs_trigger
 1979              		.cfi_endproc
 1980              	.LFE8:
 1982              		.section	.rodata
 1983 08bd 000000   		.align	2
 1984              	.LC3:
 1985 08c0 32303135 		.ascii	"2015-10-R1\000"
 1985      2D31302D 
 1985      523100
 1986              		.section	.text.vendor_request_handler,"ax",%progbits
 1987              		.align	2
 1988              		.thumb
 1989              		.thumb_func
 1991              	vendor_request_handler:
 1992              	.LFB9:
 391:bluetooth_rxtx.c **** 
 392:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 393:bluetooth_rxtx.c **** {
 1993              		.loc 1 393 0
 1994              		.cfi_startproc
 1995              		@ args = 0, pretend = 0, frame = 80
 1996              		@ frame_needed = 1, uses_anonymous_args = 0
 1997 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1998              		.cfi_def_cfa_offset 36
 1999              		.cfi_offset 4, -36
 2000              		.cfi_offset 5, -32
 2001              		.cfi_offset 6, -28
 2002              		.cfi_offset 7, -24
 2003              		.cfi_offset 8, -20
 2004              		.cfi_offset 9, -16
 2005              		.cfi_offset 10, -12
 2006              		.cfi_offset 11, -8
 2007              		.cfi_offset 14, -4
 2008 0004 95B0     		sub	sp, sp, #84
 2009              		.cfi_def_cfa_offset 120
 2010 0006 00AF     		add	r7, sp, #0
 2011              		.cfi_def_cfa_register 7
 2012 0008 B960     		str	r1, [r7, #8]
 2013 000a 7A60     		str	r2, [r7, #4]
 2014 000c 3B60     		str	r3, [r7]
 2015 000e 0346     		mov	r3, r0
 2016 0010 FB73     		strb	r3, [r7, #15]
 394:bluetooth_rxtx.c **** 	u32 command[5];
 395:bluetooth_rxtx.c **** 	u32 result[5];
 396:bluetooth_rxtx.c **** 	u64 ac_copy;
 397:bluetooth_rxtx.c **** 	int i; // loop counter
 398:bluetooth_rxtx.c **** 	u32 clock;
 399:bluetooth_rxtx.c **** 	int clock_offset;
ARM GAS  /tmp/ccTf0kks.s 			page 42


 400:bluetooth_rxtx.c **** 	u8 length; // string length
 401:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2017              		.loc 1 401 0
 2018 0012 0023     		movs	r3, #0
 2019 0014 7B64     		str	r3, [r7, #68]
 402:bluetooth_rxtx.c **** 	u16 reg_val;
 403:bluetooth_rxtx.c **** 
 404:bluetooth_rxtx.c **** 	switch (request) {
 2020              		.loc 1 404 0
 2021 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2022 0018 3C2B     		cmp	r3, #60
 2023 001a 00F25185 		bhi	.L47
 2024 001e 01A2     		adr	r2, .L49
 2025 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2026              		.p2align 2
 2027              	.L49:
 2028 0024 19010000 		.word	.L48+1
 2029 0028 23010000 		.word	.L50+1
 2030 002c C10A0000 		.word	.L47+1
 2031 0030 33010000 		.word	.L51+1
 2032 0034 55010000 		.word	.L52+1
 2033 0038 71010000 		.word	.L53+1
 2034 003c 93010000 		.word	.L54+1
 2035 0040 AF010000 		.word	.L55+1
 2036 0044 D1010000 		.word	.L56+1
 2037 0048 F1010000 		.word	.L57+1
 2038 004c 13020000 		.word	.L58+1
 2039 0050 B7040000 		.word	.L59+1
 2040 0054 DD040000 		.word	.L60+1
 2041 0058 89020000 		.word	.L61+1
 2042 005c 93020000 		.word	.L62+1
 2043 0060 33020000 		.word	.L63+1
 2044 0064 71030000 		.word	.L64+1
 2045 0068 91030000 		.word	.L65+1
 2046 006c C9030000 		.word	.L66+1
 2047 0070 E9030000 		.word	.L67+1
 2048 0074 05040000 		.word	.L68+1
 2049 0078 91040000 		.word	.L69+1
 2050 007c 99040000 		.word	.L70+1
 2051 0080 AB040000 		.word	.L71+1
 2052 0084 67050000 		.word	.L72+1
 2053 0088 85050000 		.word	.L73+1
 2054 008c C10A0000 		.word	.L47+1
 2055 0090 91050000 		.word	.L74+1
 2056 0094 0D040000 		.word	.L75+1
 2057 0098 29040000 		.word	.L76+1
 2058 009c 51040000 		.word	.L77+1
 2059 00a0 49040000 		.word	.L78+1
 2060 00a4 59040000 		.word	.L79+1
 2061 00a8 55060000 		.word	.L80+1
 2062 00ac ED050000 		.word	.L81+1
 2063 00b0 C9060000 		.word	.L82+1
 2064 00b4 D7060000 		.word	.L83+1
 2065 00b8 E7060000 		.word	.L84+1
 2066 00bc F9060000 		.word	.L85+1
 2067 00c0 C5070000 		.word	.L86+1
 2068 00c4 0B080000 		.word	.L87+1
ARM GAS  /tmp/ccTf0kks.s 			page 43


 2069 00c8 99080000 		.word	.L88+1
 2070 00cc CD080000 		.word	.L89+1
 2071 00d0 EF080000 		.word	.L90+1
 2072 00d4 47090000 		.word	.L91+1
 2073 00d8 C50A0000 		.word	.L150+1
 2074 00dc 79090000 		.word	.L93+1
 2075 00e0 8F090000 		.word	.L94+1
 2076 00e4 AB090000 		.word	.L95+1
 2077 00e8 C1090000 		.word	.L96+1
 2078 00ec ED090000 		.word	.L97+1
 2079 00f0 3D080000 		.word	.L98+1
 2080 00f4 6F080000 		.word	.L99+1
 2081 00f8 090A0000 		.word	.L100+1
 2082 00fc 4D0A0000 		.word	.L101+1
 2083 0100 97060000 		.word	.L102+1
 2084 0104 5F0A0000 		.word	.L103+1
 2085 0108 C10A0000 		.word	.L47+1
 2086 010c 370A0000 		.word	.L104+1
 2087 0110 A30A0000 		.word	.L105+1
 2088 0114 AF0A0000 		.word	.L106+1
 2089              		.p2align 1
 2090              	.L48:
 405:bluetooth_rxtx.c **** 
 406:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 407:bluetooth_rxtx.c **** 		*data_len = 0;
 2091              		.loc 1 407 0
 2092 0118 3B68     		ldr	r3, [r7]
 2093 011a 0022     		movs	r2, #0
 2094 011c 1A60     		str	r2, [r3]
 408:bluetooth_rxtx.c **** 		break;
 2095              		.loc 1 408 0
 2096 011e 00F0D2BC 		b	.L107
 2097              	.L50:
 409:bluetooth_rxtx.c **** 
 410:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 411:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2098              		.loc 1 411 0
 2099 0122 A14B     		ldr	r3, .L151
 2100 0124 0122     		movs	r2, #1
 2101 0126 1A70     		strb	r2, [r3]
 412:bluetooth_rxtx.c **** 		*data_len = 0;
 2102              		.loc 1 412 0
 2103 0128 3B68     		ldr	r3, [r7]
 2104 012a 0022     		movs	r2, #0
 2105 012c 1A60     		str	r2, [r3]
 413:bluetooth_rxtx.c **** 		break;
 2106              		.loc 1 413 0
 2107 012e 00F0CABC 		b	.L107
 2108              	.L51:
 414:bluetooth_rxtx.c **** 
 415:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 416:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
 2109              		.loc 1 416 0
 2110 0132 9E4B     		ldr	r3, .L151+4
 2111 0134 1B68     		ldr	r3, [r3]
 2112 0136 03F00203 		and	r3, r3, #2
 2113 013a 002B     		cmp	r3, #0
ARM GAS  /tmp/ccTf0kks.s 			page 44


 2114 013c 14BF     		ite	ne
 2115 013e 0123     		movne	r3, #1
 2116 0140 0023     		moveq	r3, #0
 2117 0142 DBB2     		uxtb	r3, r3
 2118 0144 1A46     		mov	r2, r3
 2119 0146 7B68     		ldr	r3, [r7, #4]
 2120 0148 1A70     		strb	r2, [r3]
 417:bluetooth_rxtx.c **** 		*data_len = 1;
 2121              		.loc 1 417 0
 2122 014a 3B68     		ldr	r3, [r7]
 2123 014c 0122     		movs	r2, #1
 2124 014e 1A60     		str	r2, [r3]
 418:bluetooth_rxtx.c **** 		break;
 2125              		.loc 1 418 0
 2126 0150 00F0B9BC 		b	.L107
 2127              	.L52:
 419:bluetooth_rxtx.c **** 
 420:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 421:bluetooth_rxtx.c **** 		if (request_params[0])
 2128              		.loc 1 421 0
 2129 0154 BB68     		ldr	r3, [r7, #8]
 2130 0156 1B88     		ldrh	r3, [r3]
 2131 0158 002B     		cmp	r3, #0
 2132 015a 04D0     		beq	.L108
 422:bluetooth_rxtx.c **** 			USRLED_SET;
 2133              		.loc 1 422 0
 2134 015c 944B     		ldr	r3, .L151+8
 2135 015e 0222     		movs	r2, #2
 2136 0160 1A60     		str	r2, [r3]
 423:bluetooth_rxtx.c **** 		else
 424:bluetooth_rxtx.c **** 			USRLED_CLR;
 425:bluetooth_rxtx.c **** 		break;
 2137              		.loc 1 425 0
 2138 0162 00F0B0BC 		b	.L107
 2139              	.L108:
 424:bluetooth_rxtx.c **** 		break;
 2140              		.loc 1 424 0
 2141 0166 934B     		ldr	r3, .L151+12
 2142 0168 0222     		movs	r2, #2
 2143 016a 1A60     		str	r2, [r3]
 2144              		.loc 1 425 0
 2145 016c 00F0ABBC 		b	.L107
 2146              	.L53:
 426:bluetooth_rxtx.c **** 
 427:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 428:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2147              		.loc 1 428 0
 2148 0170 8E4B     		ldr	r3, .L151+4
 2149 0172 1B68     		ldr	r3, [r3]
 2150 0174 03F01003 		and	r3, r3, #16
 2151 0178 002B     		cmp	r3, #0
 2152 017a 14BF     		ite	ne
 2153 017c 0123     		movne	r3, #1
 2154 017e 0023     		moveq	r3, #0
 2155 0180 DBB2     		uxtb	r3, r3
 2156 0182 1A46     		mov	r2, r3
 2157 0184 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccTf0kks.s 			page 45


 2158 0186 1A70     		strb	r2, [r3]
 429:bluetooth_rxtx.c **** 		*data_len = 1;
 2159              		.loc 1 429 0
 2160 0188 3B68     		ldr	r3, [r7]
 2161 018a 0122     		movs	r2, #1
 2162 018c 1A60     		str	r2, [r3]
 430:bluetooth_rxtx.c **** 		break;
 2163              		.loc 1 430 0
 2164 018e 00F09ABC 		b	.L107
 2165              	.L54:
 431:bluetooth_rxtx.c **** 
 432:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 433:bluetooth_rxtx.c **** 		if (request_params[0])
 2166              		.loc 1 433 0
 2167 0192 BB68     		ldr	r3, [r7, #8]
 2168 0194 1B88     		ldrh	r3, [r3]
 2169 0196 002B     		cmp	r3, #0
 2170 0198 04D0     		beq	.L110
 434:bluetooth_rxtx.c **** 			RXLED_SET;
 2171              		.loc 1 434 0
 2172 019a 854B     		ldr	r3, .L151+8
 2173 019c 1022     		movs	r2, #16
 2174 019e 1A60     		str	r2, [r3]
 435:bluetooth_rxtx.c **** 		else
 436:bluetooth_rxtx.c **** 			RXLED_CLR;
 437:bluetooth_rxtx.c **** 		break;
 2175              		.loc 1 437 0
 2176 01a0 00F091BC 		b	.L107
 2177              	.L110:
 436:bluetooth_rxtx.c **** 		break;
 2178              		.loc 1 436 0
 2179 01a4 834B     		ldr	r3, .L151+12
 2180 01a6 1022     		movs	r2, #16
 2181 01a8 1A60     		str	r2, [r3]
 2182              		.loc 1 437 0
 2183 01aa 00F08CBC 		b	.L107
 2184              	.L55:
 438:bluetooth_rxtx.c **** 
 439:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 440:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2185              		.loc 1 440 0
 2186 01ae 7F4B     		ldr	r3, .L151+4
 2187 01b0 1B68     		ldr	r3, [r3]
 2188 01b2 03F48073 		and	r3, r3, #256
 2189 01b6 002B     		cmp	r3, #0
 2190 01b8 14BF     		ite	ne
 2191 01ba 0123     		movne	r3, #1
 2192 01bc 0023     		moveq	r3, #0
 2193 01be DBB2     		uxtb	r3, r3
 2194 01c0 1A46     		mov	r2, r3
 2195 01c2 7B68     		ldr	r3, [r7, #4]
 2196 01c4 1A70     		strb	r2, [r3]
 441:bluetooth_rxtx.c **** 		*data_len = 1;
 2197              		.loc 1 441 0
 2198 01c6 3B68     		ldr	r3, [r7]
 2199 01c8 0122     		movs	r2, #1
 2200 01ca 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 46


 442:bluetooth_rxtx.c **** 		break;
 2201              		.loc 1 442 0
 2202 01cc 00F07BBC 		b	.L107
 2203              	.L56:
 443:bluetooth_rxtx.c **** 
 444:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 445:bluetooth_rxtx.c **** 		if (request_params[0])
 2204              		.loc 1 445 0
 2205 01d0 BB68     		ldr	r3, [r7, #8]
 2206 01d2 1B88     		ldrh	r3, [r3]
 2207 01d4 002B     		cmp	r3, #0
 2208 01d6 05D0     		beq	.L112
 446:bluetooth_rxtx.c **** 			TXLED_SET;
 2209              		.loc 1 446 0
 2210 01d8 754B     		ldr	r3, .L151+8
 2211 01da 4FF48072 		mov	r2, #256
 2212 01de 1A60     		str	r2, [r3]
 447:bluetooth_rxtx.c **** 		else
 448:bluetooth_rxtx.c **** 			TXLED_CLR;
 449:bluetooth_rxtx.c **** 		break;
 2213              		.loc 1 449 0
 2214 01e0 00F071BC 		b	.L107
 2215              	.L112:
 448:bluetooth_rxtx.c **** 		break;
 2216              		.loc 1 448 0
 2217 01e4 734B     		ldr	r3, .L151+12
 2218 01e6 4FF48072 		mov	r2, #256
 2219 01ea 1A60     		str	r2, [r3]
 2220              		.loc 1 449 0
 2221 01ec 00F06BBC 		b	.L107
 2222              	.L57:
 450:bluetooth_rxtx.c **** 
 451:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 452:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2223              		.loc 1 452 0
 2224 01f0 6E4B     		ldr	r3, .L151+4
 2225 01f2 1B68     		ldr	r3, [r3]
 2226 01f4 03F40073 		and	r3, r3, #512
 2227 01f8 002B     		cmp	r3, #0
 2228 01fa 14BF     		ite	ne
 2229 01fc 0123     		movne	r3, #1
 2230 01fe 0023     		moveq	r3, #0
 2231 0200 DBB2     		uxtb	r3, r3
 2232 0202 1A46     		mov	r2, r3
 2233 0204 7B68     		ldr	r3, [r7, #4]
 2234 0206 1A70     		strb	r2, [r3]
 453:bluetooth_rxtx.c **** 		*data_len = 1;
 2235              		.loc 1 453 0
 2236 0208 3B68     		ldr	r3, [r7]
 2237 020a 0122     		movs	r2, #1
 2238 020c 1A60     		str	r2, [r3]
 454:bluetooth_rxtx.c **** 		break;
 2239              		.loc 1 454 0
 2240 020e 00F05ABC 		b	.L107
 2241              	.L58:
 455:bluetooth_rxtx.c **** 
 456:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
ARM GAS  /tmp/ccTf0kks.s 			page 47


 457:bluetooth_rxtx.c **** 		if (request_params[0])
 2242              		.loc 1 457 0
 2243 0212 BB68     		ldr	r3, [r7, #8]
 2244 0214 1B88     		ldrh	r3, [r3]
 2245 0216 002B     		cmp	r3, #0
 2246 0218 05D0     		beq	.L114
 458:bluetooth_rxtx.c **** 			CC1V8_SET;
 2247              		.loc 1 458 0
 2248 021a 654B     		ldr	r3, .L151+8
 2249 021c 4FF40072 		mov	r2, #512
 2250 0220 1A60     		str	r2, [r3]
 459:bluetooth_rxtx.c **** 		else
 460:bluetooth_rxtx.c **** 			CC1V8_CLR;
 461:bluetooth_rxtx.c **** 		break;
 2251              		.loc 1 461 0
 2252 0222 00F050BC 		b	.L107
 2253              	.L114:
 460:bluetooth_rxtx.c **** 		break;
 2254              		.loc 1 460 0
 2255 0226 634B     		ldr	r3, .L151+12
 2256 0228 4FF40072 		mov	r2, #512
 2257 022c 1A60     		str	r2, [r3]
 2258              		.loc 1 461 0
 2259 022e 00F04ABC 		b	.L107
 2260              	.L63:
 462:bluetooth_rxtx.c **** 
 463:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 464:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2261              		.loc 1 464 0
 2262 0232 3623     		movs	r3, #54
 2263 0234 7B62     		str	r3, [r7, #36]
 465:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2264              		.loc 1 465 0
 2265 0236 604B     		ldr	r3, .L151+16
 2266 0238 1B68     		ldr	r3, [r3]
 2267 023a 07F12401 		add	r1, r7, #36
 2268 023e 07F11002 		add	r2, r7, #16
 2269 0242 0846     		mov	r0, r1
 2270 0244 1146     		mov	r1, r2
 2271 0246 9847     		blx	r3
 466:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2272              		.loc 1 466 0
 2273 0248 3B69     		ldr	r3, [r7, #16]
 2274 024a DAB2     		uxtb	r2, r3
 2275 024c 7B68     		ldr	r3, [r7, #4]
 2276 024e 1A70     		strb	r2, [r3]
 467:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2277              		.loc 1 467 0
 2278 0250 7B68     		ldr	r3, [r7, #4]
 2279 0252 0133     		adds	r3, r3, #1
 2280 0254 7A69     		ldr	r2, [r7, #20]
 2281 0256 D2B2     		uxtb	r2, r2
 2282 0258 1A70     		strb	r2, [r3]
 468:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2283              		.loc 1 468 0
 2284 025a 7B68     		ldr	r3, [r7, #4]
 2285 025c 0233     		adds	r3, r3, #2
ARM GAS  /tmp/ccTf0kks.s 			page 48


 2286 025e 7A69     		ldr	r2, [r7, #20]
 2287 0260 120A     		lsrs	r2, r2, #8
 2288 0262 D2B2     		uxtb	r2, r2
 2289 0264 1A70     		strb	r2, [r3]
 469:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2290              		.loc 1 469 0
 2291 0266 7B68     		ldr	r3, [r7, #4]
 2292 0268 0333     		adds	r3, r3, #3
 2293 026a 7A69     		ldr	r2, [r7, #20]
 2294 026c 120C     		lsrs	r2, r2, #16
 2295 026e D2B2     		uxtb	r2, r2
 2296 0270 1A70     		strb	r2, [r3]
 470:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2297              		.loc 1 470 0
 2298 0272 7B68     		ldr	r3, [r7, #4]
 2299 0274 0433     		adds	r3, r3, #4
 2300 0276 7A69     		ldr	r2, [r7, #20]
 2301 0278 120E     		lsrs	r2, r2, #24
 2302 027a D2B2     		uxtb	r2, r2
 2303 027c 1A70     		strb	r2, [r3]
 471:bluetooth_rxtx.c **** 		*data_len = 5;
 2304              		.loc 1 471 0
 2305 027e 3B68     		ldr	r3, [r7]
 2306 0280 0522     		movs	r2, #5
 2307 0282 1A60     		str	r2, [r3]
 472:bluetooth_rxtx.c **** 		break;
 2308              		.loc 1 472 0
 2309 0284 00F01FBC 		b	.L107
 2310              	.L61:
 473:bluetooth_rxtx.c **** 
 474:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 475:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2311              		.loc 1 475 0
 2312 0288 474B     		ldr	r3, .L151
 2313 028a 0B22     		movs	r2, #11
 2314 028c 1A70     		strb	r2, [r3]
 476:bluetooth_rxtx.c **** 		break;
 2315              		.loc 1 476 0
 2316 028e 00F01ABC 		b	.L107
 2317              	.L62:
 477:bluetooth_rxtx.c **** 
 478:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 479:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2318              		.loc 1 479 0
 2319 0292 3A23     		movs	r3, #58
 2320 0294 7B62     		str	r3, [r7, #36]
 480:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2321              		.loc 1 480 0
 2322 0296 484B     		ldr	r3, .L151+16
 2323 0298 1B68     		ldr	r3, [r3]
 2324 029a 07F12401 		add	r1, r7, #36
 2325 029e 07F11002 		add	r2, r7, #16
 2326 02a2 0846     		mov	r0, r1
 2327 02a4 1146     		mov	r1, r2
 2328 02a6 9847     		blx	r3
 481:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2329              		.loc 1 481 0
ARM GAS  /tmp/ccTf0kks.s 			page 49


 2330 02a8 3B69     		ldr	r3, [r7, #16]
 2331 02aa DAB2     		uxtb	r2, r3
 2332 02ac 7B68     		ldr	r3, [r7, #4]
 2333 02ae 1A70     		strb	r2, [r3]
 482:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2334              		.loc 1 482 0
 2335 02b0 7B68     		ldr	r3, [r7, #4]
 2336 02b2 0133     		adds	r3, r3, #1
 2337 02b4 7A69     		ldr	r2, [r7, #20]
 2338 02b6 D2B2     		uxtb	r2, r2
 2339 02b8 1A70     		strb	r2, [r3]
 483:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2340              		.loc 1 483 0
 2341 02ba 7B68     		ldr	r3, [r7, #4]
 2342 02bc 0233     		adds	r3, r3, #2
 2343 02be 7A69     		ldr	r2, [r7, #20]
 2344 02c0 120A     		lsrs	r2, r2, #8
 2345 02c2 D2B2     		uxtb	r2, r2
 2346 02c4 1A70     		strb	r2, [r3]
 484:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2347              		.loc 1 484 0
 2348 02c6 7B68     		ldr	r3, [r7, #4]
 2349 02c8 0333     		adds	r3, r3, #3
 2350 02ca 7A69     		ldr	r2, [r7, #20]
 2351 02cc 120C     		lsrs	r2, r2, #16
 2352 02ce D2B2     		uxtb	r2, r2
 2353 02d0 1A70     		strb	r2, [r3]
 485:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2354              		.loc 1 485 0
 2355 02d2 7B68     		ldr	r3, [r7, #4]
 2356 02d4 0433     		adds	r3, r3, #4
 2357 02d6 7A69     		ldr	r2, [r7, #20]
 2358 02d8 120E     		lsrs	r2, r2, #24
 2359 02da D2B2     		uxtb	r2, r2
 2360 02dc 1A70     		strb	r2, [r3]
 486:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2361              		.loc 1 486 0
 2362 02de 7B68     		ldr	r3, [r7, #4]
 2363 02e0 0533     		adds	r3, r3, #5
 2364 02e2 BA69     		ldr	r2, [r7, #24]
 2365 02e4 D2B2     		uxtb	r2, r2
 2366 02e6 1A70     		strb	r2, [r3]
 487:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2367              		.loc 1 487 0
 2368 02e8 7B68     		ldr	r3, [r7, #4]
 2369 02ea 0633     		adds	r3, r3, #6
 2370 02ec BA69     		ldr	r2, [r7, #24]
 2371 02ee 120A     		lsrs	r2, r2, #8
 2372 02f0 D2B2     		uxtb	r2, r2
 2373 02f2 1A70     		strb	r2, [r3]
 488:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2374              		.loc 1 488 0
 2375 02f4 7B68     		ldr	r3, [r7, #4]
 2376 02f6 0733     		adds	r3, r3, #7
 2377 02f8 BA69     		ldr	r2, [r7, #24]
 2378 02fa 120C     		lsrs	r2, r2, #16
 2379 02fc D2B2     		uxtb	r2, r2
ARM GAS  /tmp/ccTf0kks.s 			page 50


 2380 02fe 1A70     		strb	r2, [r3]
 489:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2381              		.loc 1 489 0
 2382 0300 7B68     		ldr	r3, [r7, #4]
 2383 0302 0833     		adds	r3, r3, #8
 2384 0304 BA69     		ldr	r2, [r7, #24]
 2385 0306 120E     		lsrs	r2, r2, #24
 2386 0308 D2B2     		uxtb	r2, r2
 2387 030a 1A70     		strb	r2, [r3]
 490:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2388              		.loc 1 490 0
 2389 030c 7B68     		ldr	r3, [r7, #4]
 2390 030e 0933     		adds	r3, r3, #9
 2391 0310 FA69     		ldr	r2, [r7, #28]
 2392 0312 D2B2     		uxtb	r2, r2
 2393 0314 1A70     		strb	r2, [r3]
 491:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2394              		.loc 1 491 0
 2395 0316 7B68     		ldr	r3, [r7, #4]
 2396 0318 0A33     		adds	r3, r3, #10
 2397 031a FA69     		ldr	r2, [r7, #28]
 2398 031c 120A     		lsrs	r2, r2, #8
 2399 031e D2B2     		uxtb	r2, r2
 2400 0320 1A70     		strb	r2, [r3]
 492:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2401              		.loc 1 492 0
 2402 0322 7B68     		ldr	r3, [r7, #4]
 2403 0324 0B33     		adds	r3, r3, #11
 2404 0326 FA69     		ldr	r2, [r7, #28]
 2405 0328 120C     		lsrs	r2, r2, #16
 2406 032a D2B2     		uxtb	r2, r2
 2407 032c 1A70     		strb	r2, [r3]
 493:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2408              		.loc 1 493 0
 2409 032e 7B68     		ldr	r3, [r7, #4]
 2410 0330 0C33     		adds	r3, r3, #12
 2411 0332 FA69     		ldr	r2, [r7, #28]
 2412 0334 120E     		lsrs	r2, r2, #24
 2413 0336 D2B2     		uxtb	r2, r2
 2414 0338 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2415              		.loc 1 494 0
 2416 033a 7B68     		ldr	r3, [r7, #4]
 2417 033c 0D33     		adds	r3, r3, #13
 2418 033e 3A6A     		ldr	r2, [r7, #32]
 2419 0340 D2B2     		uxtb	r2, r2
 2420 0342 1A70     		strb	r2, [r3]
 495:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2421              		.loc 1 495 0
 2422 0344 7B68     		ldr	r3, [r7, #4]
 2423 0346 0E33     		adds	r3, r3, #14
 2424 0348 3A6A     		ldr	r2, [r7, #32]
 2425 034a 120A     		lsrs	r2, r2, #8
 2426 034c D2B2     		uxtb	r2, r2
 2427 034e 1A70     		strb	r2, [r3]
 496:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2428              		.loc 1 496 0
ARM GAS  /tmp/ccTf0kks.s 			page 51


 2429 0350 7B68     		ldr	r3, [r7, #4]
 2430 0352 0F33     		adds	r3, r3, #15
 2431 0354 3A6A     		ldr	r2, [r7, #32]
 2432 0356 120C     		lsrs	r2, r2, #16
 2433 0358 D2B2     		uxtb	r2, r2
 2434 035a 1A70     		strb	r2, [r3]
 497:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2435              		.loc 1 497 0
 2436 035c 7B68     		ldr	r3, [r7, #4]
 2437 035e 1033     		adds	r3, r3, #16
 2438 0360 3A6A     		ldr	r2, [r7, #32]
 2439 0362 120E     		lsrs	r2, r2, #24
 2440 0364 D2B2     		uxtb	r2, r2
 2441 0366 1A70     		strb	r2, [r3]
 498:bluetooth_rxtx.c **** 		*data_len = 17;
 2442              		.loc 1 498 0
 2443 0368 3B68     		ldr	r3, [r7]
 2444 036a 1122     		movs	r2, #17
 2445 036c 1A60     		str	r2, [r3]
 499:bluetooth_rxtx.c **** 		break;
 2446              		.loc 1 499 0
 2447 036e AAE3     		b	.L107
 2448              	.L64:
 500:bluetooth_rxtx.c **** 
 501:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 502:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 503:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2449              		.loc 1 503 0
 2450 0370 124B     		ldr	r3, .L151+20
 2451 0372 1B68     		ldr	r3, [r3]
 2452 0374 03F08003 		and	r3, r3, #128
 2453 0378 002B     		cmp	r3, #0
 2454 037a 14BF     		ite	ne
 2455 037c 0123     		movne	r3, #1
 2456 037e 0023     		moveq	r3, #0
 2457 0380 DBB2     		uxtb	r3, r3
 2458 0382 1A46     		mov	r2, r3
 2459 0384 7B68     		ldr	r3, [r7, #4]
 2460 0386 1A70     		strb	r2, [r3]
 504:bluetooth_rxtx.c **** 		*data_len = 1;
 2461              		.loc 1 504 0
 2462 0388 3B68     		ldr	r3, [r7]
 2463 038a 0122     		movs	r2, #1
 2464 038c 1A60     		str	r2, [r3]
 505:bluetooth_rxtx.c **** 		break;
 2465              		.loc 1 505 0
 2466 038e 9AE3     		b	.L107
 2467              	.L65:
 506:bluetooth_rxtx.c **** 
 507:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 508:bluetooth_rxtx.c **** 		if (request_params[0])
 2468              		.loc 1 508 0
 2469 0390 BB68     		ldr	r3, [r7, #8]
 2470 0392 1B88     		ldrh	r3, [r3]
 2471 0394 002B     		cmp	r3, #0
 2472 0396 03D0     		beq	.L116
 509:bluetooth_rxtx.c **** 			PAEN_SET;
ARM GAS  /tmp/ccTf0kks.s 			page 52


 2473              		.loc 1 509 0
 2474 0398 094B     		ldr	r3, .L151+24
 2475 039a 8022     		movs	r2, #128
 2476 039c 1A60     		str	r2, [r3]
 510:bluetooth_rxtx.c **** 		else
 511:bluetooth_rxtx.c **** 			PAEN_CLR;
 512:bluetooth_rxtx.c **** 		break;
 2477              		.loc 1 512 0
 2478 039e 92E3     		b	.L107
 2479              	.L116:
 511:bluetooth_rxtx.c **** 		break;
 2480              		.loc 1 511 0
 2481 03a0 084B     		ldr	r3, .L151+28
 2482 03a2 8022     		movs	r2, #128
 2483 03a4 1A60     		str	r2, [r3]
 2484              		.loc 1 512 0
 2485 03a6 8EE3     		b	.L107
 2486              	.L152:
 2487              		.align	2
 2488              	.L151:
 2489 03a8 00000000 		.word	requested_mode
 2490 03ac 34C00920 		.word	537509940
 2491 03b0 38C00920 		.word	537509944
 2492 03b4 3CC00920 		.word	537509948
 2493 03b8 00000000 		.word	iap_entry
 2494 03bc 54C00920 		.word	537509972
 2495 03c0 58C00920 		.word	537509976
 2496 03c4 5CC00920 		.word	537509980
 2497              	.L66:
 513:bluetooth_rxtx.c **** 
 514:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 515:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2498              		.loc 1 515 0
 2499 03c8 924B     		ldr	r3, .L153
 2500 03ca 1B68     		ldr	r3, [r3]
 2501 03cc 03F48073 		and	r3, r3, #256
 2502 03d0 002B     		cmp	r3, #0
 2503 03d2 14BF     		ite	ne
 2504 03d4 0123     		movne	r3, #1
 2505 03d6 0023     		moveq	r3, #0
 2506 03d8 DBB2     		uxtb	r3, r3
 2507 03da 1A46     		mov	r2, r3
 2508 03dc 7B68     		ldr	r3, [r7, #4]
 2509 03de 1A70     		strb	r2, [r3]
 516:bluetooth_rxtx.c **** 		*data_len = 1;
 2510              		.loc 1 516 0
 2511 03e0 3B68     		ldr	r3, [r7]
 2512 03e2 0122     		movs	r2, #1
 2513 03e4 1A60     		str	r2, [r3]
 517:bluetooth_rxtx.c **** 		break;
 2514              		.loc 1 517 0
 2515 03e6 6EE3     		b	.L107
 2516              	.L67:
 518:bluetooth_rxtx.c **** 
 519:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 520:bluetooth_rxtx.c **** 		if (request_params[0])
 2517              		.loc 1 520 0
ARM GAS  /tmp/ccTf0kks.s 			page 53


 2518 03e8 BB68     		ldr	r3, [r7, #8]
 2519 03ea 1B88     		ldrh	r3, [r3]
 2520 03ec 002B     		cmp	r3, #0
 2521 03ee 04D0     		beq	.L118
 521:bluetooth_rxtx.c **** 			HGM_SET;
 2522              		.loc 1 521 0
 2523 03f0 894B     		ldr	r3, .L153+4
 2524 03f2 4FF48072 		mov	r2, #256
 2525 03f6 1A60     		str	r2, [r3]
 522:bluetooth_rxtx.c **** 		else
 523:bluetooth_rxtx.c **** 			HGM_CLR;
 524:bluetooth_rxtx.c **** 		break;
 2526              		.loc 1 524 0
 2527 03f8 65E3     		b	.L107
 2528              	.L118:
 523:bluetooth_rxtx.c **** 		break;
 2529              		.loc 1 523 0
 2530 03fa 884B     		ldr	r3, .L153+8
 2531 03fc 4FF48072 		mov	r2, #256
 2532 0400 1A60     		str	r2, [r3]
 2533              		.loc 1 524 0
 2534 0402 60E3     		b	.L107
 2535              	.L68:
 525:bluetooth_rxtx.c **** #endif
 526:bluetooth_rxtx.c **** 
 527:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 528:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 529:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2536              		.loc 1 529 0
 2537 0404 864B     		ldr	r3, .L153+12
 2538 0406 0322     		movs	r2, #3
 2539 0408 1A70     		strb	r2, [r3]
 530:bluetooth_rxtx.c **** 		break;
 2540              		.loc 1 530 0
 2541 040a 5CE3     		b	.L107
 2542              	.L75:
 531:bluetooth_rxtx.c **** 
 532:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 533:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2543              		.loc 1 533 0
 2544 040c 0520     		movs	r0, #5
 2545 040e FFF7FEFF 		bl	cc2400_get
 2546 0412 0346     		mov	r3, r0
 2547 0414 DBB2     		uxtb	r3, r3
 2548 0416 03F00703 		and	r3, r3, #7
 2549 041a DAB2     		uxtb	r2, r3
 2550 041c 7B68     		ldr	r3, [r7, #4]
 2551 041e 1A70     		strb	r2, [r3]
 534:bluetooth_rxtx.c **** 		*data_len = 1;
 2552              		.loc 1 534 0
 2553 0420 3B68     		ldr	r3, [r7]
 2554 0422 0122     		movs	r2, #1
 2555 0424 1A60     		str	r2, [r3]
 535:bluetooth_rxtx.c **** 		break;
 2556              		.loc 1 535 0
 2557 0426 4EE3     		b	.L107
 2558              	.L76:
ARM GAS  /tmp/ccTf0kks.s 			page 54


 536:bluetooth_rxtx.c **** 
 537:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 538:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2559              		.loc 1 538 0
 2560 0428 BB68     		ldr	r3, [r7, #8]
 2561 042a 1B88     		ldrh	r3, [r3]
 2562 042c 072B     		cmp	r3, #7
 2563 042e 09D8     		bhi	.L120
 539:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2564              		.loc 1 539 0
 2565 0430 BB68     		ldr	r3, [r7, #8]
 2566 0432 1B88     		ldrh	r3, [r3]
 2567 0434 43F00803 		orr	r3, r3, #8
 2568 0438 9BB2     		uxth	r3, r3
 2569 043a 0520     		movs	r0, #5
 2570 043c 1946     		mov	r1, r3
 2571 043e FFF7FEFF 		bl	cc2400_set
 540:bluetooth_rxtx.c **** 		} else {
 541:bluetooth_rxtx.c **** 			return 0;
 542:bluetooth_rxtx.c **** 		}
 543:bluetooth_rxtx.c **** 		break;
 2572              		.loc 1 543 0
 2573 0442 40E3     		b	.L107
 2574              	.L120:
 541:bluetooth_rxtx.c **** 		}
 2575              		.loc 1 541 0
 2576 0444 0023     		movs	r3, #0
 2577 0446 3FE3     		b	.L149
 2578              	.L78:
 544:bluetooth_rxtx.c **** 
 545:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 546:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2579              		.loc 1 546 0
 2580 0448 754B     		ldr	r3, .L153+12
 2581 044a 0522     		movs	r2, #5
 2582 044c 1A70     		strb	r2, [r3]
 547:bluetooth_rxtx.c **** 		break;
 2583              		.loc 1 547 0
 2584 044e 3AE3     		b	.L107
 2585              	.L77:
 548:bluetooth_rxtx.c **** 
 549:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 550:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2586              		.loc 1 550 0
 2587 0450 734B     		ldr	r3, .L153+12
 2588 0452 0622     		movs	r2, #6
 2589 0454 1A70     		strb	r2, [r3]
 551:bluetooth_rxtx.c **** 		break;
 2590              		.loc 1 551 0
 2591 0456 36E3     		b	.L107
 2592              	.L79:
 552:bluetooth_rxtx.c **** #endif
 553:bluetooth_rxtx.c **** 
 554:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 555:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2593              		.loc 1 555 0
 2594 0458 724B     		ldr	r3, .L153+16
ARM GAS  /tmp/ccTf0kks.s 			page 55


 2595 045a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2596 045c 7B68     		ldr	r3, [r7, #4]
 2597 045e 1A70     		strb	r2, [r3]
 556:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2598              		.loc 1 556 0
 2599 0460 7B68     		ldr	r3, [r7, #4]
 2600 0462 0133     		adds	r3, r3, #1
 2601 0464 6F4A     		ldr	r2, .L153+16
 2602 0466 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2603 0468 1A70     		strb	r2, [r3]
 557:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2604              		.loc 1 557 0
 2605 046a 7B68     		ldr	r3, [r7, #4]
 2606 046c 0233     		adds	r3, r3, #2
 2607 046e 6D4A     		ldr	r2, .L153+16
 2608 0470 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2609 0472 1A70     		strb	r2, [r3]
 558:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2610              		.loc 1 558 0
 2611 0474 7B68     		ldr	r3, [r7, #4]
 2612 0476 0333     		adds	r3, r3, #3
 2613 0478 6A4A     		ldr	r2, .L153+16
 2614 047a D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2615 047c 1A70     		strb	r2, [r3]
 559:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2616              		.loc 1 559 0
 2617 047e 7B68     		ldr	r3, [r7, #4]
 2618 0480 0433     		adds	r3, r3, #4
 2619 0482 684A     		ldr	r2, .L153+16
 2620 0484 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2621 0486 1A70     		strb	r2, [r3]
 560:bluetooth_rxtx.c **** 		*data_len = 5;
 2622              		.loc 1 560 0
 2623 0488 3B68     		ldr	r3, [r7]
 2624 048a 0522     		movs	r2, #5
 2625 048c 1A60     		str	r2, [r3]
 561:bluetooth_rxtx.c **** 		break;
 2626              		.loc 1 561 0
 2627 048e 1AE3     		b	.L107
 2628              	.L69:
 562:bluetooth_rxtx.c **** 
 563:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 564:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2629              		.loc 1 564 0
 2630 0490 634B     		ldr	r3, .L153+12
 2631 0492 0022     		movs	r2, #0
 2632 0494 1A70     		strb	r2, [r3]
 565:bluetooth_rxtx.c **** 		break;
 2633              		.loc 1 565 0
 2634 0496 16E3     		b	.L107
 2635              	.L70:
 566:bluetooth_rxtx.c **** 
 567:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 568:bluetooth_rxtx.c **** 		data[0] = modulation;
 2636              		.loc 1 568 0
 2637 0498 634B     		ldr	r3, .L153+20
 2638 049a 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 56


 2639 049c DAB2     		uxtb	r2, r3
 2640 049e 7B68     		ldr	r3, [r7, #4]
 2641 04a0 1A70     		strb	r2, [r3]
 569:bluetooth_rxtx.c **** 		*data_len = 1;
 2642              		.loc 1 569 0
 2643 04a2 3B68     		ldr	r3, [r7]
 2644 04a4 0122     		movs	r2, #1
 2645 04a6 1A60     		str	r2, [r3]
 570:bluetooth_rxtx.c **** 		break;
 2646              		.loc 1 570 0
 2647 04a8 0DE3     		b	.L107
 2648              	.L71:
 571:bluetooth_rxtx.c **** 
 572:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 573:bluetooth_rxtx.c **** 		modulation = request_params[0];
 2649              		.loc 1 573 0
 2650 04aa BB68     		ldr	r3, [r7, #8]
 2651 04ac 1B88     		ldrh	r3, [r3]
 2652 04ae DAB2     		uxtb	r2, r3
 2653 04b0 5D4B     		ldr	r3, .L153+20
 2654 04b2 1A70     		strb	r2, [r3]
 574:bluetooth_rxtx.c **** 		break;
 2655              		.loc 1 574 0
 2656 04b4 07E3     		b	.L107
 2657              	.L59:
 575:bluetooth_rxtx.c **** 
 576:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 577:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 2658              		.loc 1 577 0
 2659 04b6 5D4B     		ldr	r3, .L153+24
 2660 04b8 1B88     		ldrh	r3, [r3]	@ movhi
 2661 04ba 9BB2     		uxth	r3, r3
 2662 04bc DAB2     		uxtb	r2, r3
 2663 04be 7B68     		ldr	r3, [r7, #4]
 2664 04c0 1A70     		strb	r2, [r3]
 578:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 2665              		.loc 1 578 0
 2666 04c2 7B68     		ldr	r3, [r7, #4]
 2667 04c4 0133     		adds	r3, r3, #1
 2668 04c6 594A     		ldr	r2, .L153+24
 2669 04c8 1288     		ldrh	r2, [r2]	@ movhi
 2670 04ca 92B2     		uxth	r2, r2
 2671 04cc 120A     		lsrs	r2, r2, #8
 2672 04ce 92B2     		uxth	r2, r2
 2673 04d0 D2B2     		uxtb	r2, r2
 2674 04d2 1A70     		strb	r2, [r3]
 579:bluetooth_rxtx.c **** 		*data_len = 2;
 2675              		.loc 1 579 0
 2676 04d4 3B68     		ldr	r3, [r7]
 2677 04d6 0222     		movs	r2, #2
 2678 04d8 1A60     		str	r2, [r3]
 580:bluetooth_rxtx.c **** 		break;
 2679              		.loc 1 580 0
 2680 04da F4E2     		b	.L107
 2681              	.L60:
 581:bluetooth_rxtx.c **** 
 582:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
ARM GAS  /tmp/ccTf0kks.s 			page 57


 583:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2682              		.loc 1 583 0
 2683 04dc BB68     		ldr	r3, [r7, #8]
 2684 04de 1A88     		ldrh	r2, [r3]
 2685 04e0 534B     		ldr	r3, .L153+28
 2686 04e2 1A80     		strh	r2, [r3]	@ movhi
 584:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 585:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 2687              		.loc 1 585 0
 2688 04e4 524B     		ldr	r3, .L153+28
 2689 04e6 1B88     		ldrh	r3, [r3]	@ movhi
 2690 04e8 9BB2     		uxth	r3, r3
 2691 04ea 40F6EA22 		movw	r2, #2794
 2692 04ee 9342     		cmp	r3, r2
 2693 04f0 07D9     		bls	.L123
 586:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 2694              		.loc 1 586 0
 2695 04f2 504B     		ldr	r3, .L153+32
 2696 04f4 0122     		movs	r2, #1
 2697 04f6 1A70     		strb	r2, [r3]
 587:bluetooth_rxtx.c **** 			requested_channel = 2402;
 2698              		.loc 1 587 0
 2699 04f8 4D4B     		ldr	r3, .L153+28
 2700 04fa 40F66212 		movw	r2, #2402
 2701 04fe 1A80     		strh	r2, [r3]	@ movhi
 2702 0500 20E0     		b	.L124
 2703              	.L123:
 588:bluetooth_rxtx.c **** 		}
 589:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 590:bluetooth_rxtx.c **** 		else {
 591:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 2704              		.loc 1 591 0
 2705 0502 4C4B     		ldr	r3, .L153+32
 2706 0504 0022     		movs	r2, #0
 2707 0506 1A70     		strb	r2, [r3]
 592:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 2708              		.loc 1 592 0
 2709 0508 494B     		ldr	r3, .L153+28
 2710 050a 1B88     		ldrh	r3, [r3]	@ movhi
 2711 050c 9BB2     		uxth	r3, r3
 2712 050e 40F6DC02 		movw	r2, #2268
 2713 0512 9342     		cmp	r3, r2
 2714 0514 03D9     		bls	.L125
 2715              		.loc 1 592 0 is_stmt 0 discriminator 1
 2716 0516 464B     		ldr	r3, .L153+28
 2717 0518 1B88     		ldrh	r3, [r3]	@ movhi
 2718 051a 9BB2     		uxth	r3, r3
 2719 051c 01E0     		b	.L126
 2720              	.L125:
 2721              		.loc 1 592 0 discriminator 2
 2722 051e 40F6DC03 		movw	r3, #2268
 2723              	.L126:
 2724              		.loc 1 592 0 discriminator 4
 2725 0522 434A     		ldr	r2, .L153+28
 2726 0524 1380     		strh	r3, [r2]	@ movhi
 593:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 2727              		.loc 1 593 0 is_stmt 1 discriminator 4
ARM GAS  /tmp/ccTf0kks.s 			page 58


 2728 0526 424B     		ldr	r3, .L153+28
 2729 0528 1B88     		ldrh	r3, [r3]	@ movhi
 2730 052a 9BB2     		uxth	r3, r3
 2731 052c 40F6E922 		movw	r2, #2793
 2732 0530 9342     		cmp	r3, r2
 2733 0532 03D8     		bhi	.L127
 2734              		.loc 1 593 0 is_stmt 0 discriminator 1
 2735 0534 3E4B     		ldr	r3, .L153+28
 2736 0536 1B88     		ldrh	r3, [r3]	@ movhi
 2737 0538 9BB2     		uxth	r3, r3
 2738 053a 01E0     		b	.L128
 2739              	.L127:
 2740              		.loc 1 593 0 discriminator 2
 2741 053c 40F6EA23 		movw	r3, #2794
 2742              	.L128:
 2743              		.loc 1 593 0 discriminator 4
 2744 0540 3B4A     		ldr	r2, .L153+28
 2745 0542 1380     		strh	r3, [r2]	@ movhi
 2746              	.L124:
 594:bluetooth_rxtx.c **** 		}
 595:bluetooth_rxtx.c **** 
 596:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 2747              		.loc 1 596 0 is_stmt 1
 2748 0544 3C4B     		ldr	r3, .L153+36
 2749 0546 1B78     		ldrb	r3, [r3]
 2750 0548 DBB2     		uxtb	r3, r3
 2751 054a 092B     		cmp	r3, #9
 2752 054c 0AD0     		beq	.L129
 597:bluetooth_rxtx.c **** 			channel = requested_channel;
 2753              		.loc 1 597 0
 2754 054e 384B     		ldr	r3, .L153+28
 2755 0550 1B88     		ldrh	r3, [r3]	@ movhi
 2756 0552 9AB2     		uxth	r2, r3
 2757 0554 354B     		ldr	r3, .L153+24
 2758 0556 1A80     		strh	r2, [r3]	@ movhi
 598:bluetooth_rxtx.c **** 			requested_channel = 0;
 2759              		.loc 1 598 0
 2760 0558 354B     		ldr	r3, .L153+28
 2761 055a 0022     		movs	r2, #0
 2762 055c 1A80     		strh	r2, [r3]	@ movhi
 599:bluetooth_rxtx.c **** 
 600:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 601:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 602:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 2763              		.loc 1 602 0
 2764 055e FFF7FEFF 		bl	cs_threshold_calc_and_set
 603:bluetooth_rxtx.c **** 		}
 604:bluetooth_rxtx.c **** 		break;
 2765              		.loc 1 604 0
 2766 0562 B0E2     		b	.L107
 2767              	.L129:
 2768 0564 AFE2     		b	.L107
 2769              	.L72:
 605:bluetooth_rxtx.c **** 
 606:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 607:bluetooth_rxtx.c **** 		command[0] = 57;
 2770              		.loc 1 607 0
ARM GAS  /tmp/ccTf0kks.s 			page 59


 2771 0566 3923     		movs	r3, #57
 2772 0568 7B62     		str	r3, [r7, #36]
 608:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2773              		.loc 1 608 0
 2774 056a 344B     		ldr	r3, .L153+40
 2775 056c 1B68     		ldr	r3, [r3]
 2776 056e 07F12401 		add	r1, r7, #36
 2777 0572 07F11002 		add	r2, r7, #16
 2778 0576 0846     		mov	r0, r1
 2779 0578 1146     		mov	r1, r2
 2780 057a 9847     		blx	r3
 609:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 2781              		.loc 1 609 0
 2782 057c 3B68     		ldr	r3, [r7]
 2783 057e 0022     		movs	r2, #0
 2784 0580 1A60     		str	r2, [r3]
 610:bluetooth_rxtx.c **** 		break;
 2785              		.loc 1 610 0
 2786 0582 A0E2     		b	.L107
 2787              	.L73:
 611:bluetooth_rxtx.c **** 
 612:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 613:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 2788              		.loc 1 613 0
 2789 0584 2E4B     		ldr	r3, .L153+44
 2790 0586 2F4A     		ldr	r2, .L153+48
 2791 0588 1A60     		str	r2, [r3]
 614:bluetooth_rxtx.c **** 		reset();
 2792              		.loc 1 614 0
 2793 058a FFF7FEFF 		bl	reset
 615:bluetooth_rxtx.c **** 		break;
 2794              		.loc 1 615 0
 2795 058e 9AE2     		b	.L107
 2796              	.L74:
 616:bluetooth_rxtx.c **** 
 617:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 618:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 2797              		.loc 1 618 0
 2798 0590 BB68     		ldr	r3, [r7, #8]
 2799 0592 1B88     		ldrh	r3, [r3]
 2800 0594 B3F5006F 		cmp	r3, #2048
 2801 0598 17D9     		bls	.L130
 2802              		.loc 1 618 0 is_stmt 0 discriminator 1
 2803 059a BB68     		ldr	r3, [r7, #8]
 2804 059c 1B88     		ldrh	r3, [r3]
 2805 059e B3F5406F 		cmp	r3, #3072
 2806 05a2 12D8     		bhi	.L130
 619:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2807              		.loc 1 619 0 is_stmt 1 discriminator 2
 2808 05a4 BB68     		ldr	r3, [r7, #8]
 2809 05a6 0233     		adds	r3, r3, #2
 2810 05a8 1B88     		ldrh	r3, [r3]
 618:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2811              		.loc 1 618 0 discriminator 2
 2812 05aa B3F5006F 		cmp	r3, #2048
 2813 05ae 0CD9     		bls	.L130
 2814              		.loc 1 619 0
ARM GAS  /tmp/ccTf0kks.s 			page 60


 2815 05b0 BB68     		ldr	r3, [r7, #8]
 2816 05b2 0233     		adds	r3, r3, #2
 2817 05b4 1B88     		ldrh	r3, [r3]
 2818 05b6 B3F5406F 		cmp	r3, #3072
 2819 05ba 06D8     		bhi	.L130
 620:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 2820              		.loc 1 620 0 discriminator 1
 2821 05bc BB68     		ldr	r3, [r7, #8]
 2822 05be 0233     		adds	r3, r3, #2
 2823 05c0 1A88     		ldrh	r2, [r3]
 2824 05c2 BB68     		ldr	r3, [r7, #8]
 2825 05c4 1B88     		ldrh	r3, [r3]
 619:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2826              		.loc 1 619 0 discriminator 1
 2827 05c6 9A42     		cmp	r2, r3
 2828 05c8 01D2     		bcs	.L131
 2829              	.L130:
 621:bluetooth_rxtx.c **** 			return 0;
 2830              		.loc 1 621 0
 2831 05ca 0023     		movs	r3, #0
 2832 05cc 7CE2     		b	.L149
 2833              	.L131:
 622:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 2834              		.loc 1 622 0
 2835 05ce BB68     		ldr	r3, [r7, #8]
 2836 05d0 1A88     		ldrh	r2, [r3]
 2837 05d2 1D4B     		ldr	r3, .L153+52
 2838 05d4 1A80     		strh	r2, [r3]	@ movhi
 623:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2839              		.loc 1 623 0
 2840 05d6 BB68     		ldr	r3, [r7, #8]
 2841 05d8 5A88     		ldrh	r2, [r3, #2]
 2842 05da 1C4B     		ldr	r3, .L153+56
 2843 05dc 1A80     		strh	r2, [r3]	@ movhi
 624:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2844              		.loc 1 624 0
 2845 05de 104B     		ldr	r3, .L153+12
 2846 05e0 0422     		movs	r2, #4
 2847 05e2 1A70     		strb	r2, [r3]
 625:bluetooth_rxtx.c **** 		*data_len = 0;
 2848              		.loc 1 625 0
 2849 05e4 3B68     		ldr	r3, [r7]
 2850 05e6 0022     		movs	r2, #0
 2851 05e8 1A60     		str	r2, [r3]
 626:bluetooth_rxtx.c **** 		break;
 2852              		.loc 1 626 0
 2853 05ea 6CE2     		b	.L107
 2854              	.L81:
 627:bluetooth_rxtx.c **** 
 628:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 629:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 2855              		.loc 1 629 0
 2856 05ec BB68     		ldr	r3, [r7, #8]
 2857 05ee 1B88     		ldrh	r3, [r3]
 2858 05f0 B3F5807F 		cmp	r3, #256
 2859 05f4 01D9     		bls	.L132
 630:bluetooth_rxtx.c **** 			return 0;
ARM GAS  /tmp/ccTf0kks.s 			page 61


 2860              		.loc 1 630 0
 2861 05f6 0023     		movs	r3, #0
 2862 05f8 66E2     		b	.L149
 2863              	.L132:
 631:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 2864              		.loc 1 631 0
 2865 05fa BB68     		ldr	r3, [r7, #8]
 2866 05fc 1B88     		ldrh	r3, [r3]
 2867 05fe DAB2     		uxtb	r2, r3
 2868 0600 134B     		ldr	r3, .L153+60
 2869 0602 1A70     		strb	r2, [r3]
 632:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2870              		.loc 1 632 0
 2871 0604 064B     		ldr	r3, .L153+12
 2872 0606 0722     		movs	r2, #7
 2873 0608 1A70     		strb	r2, [r3]
 633:bluetooth_rxtx.c **** 		*data_len = 0;
 2874              		.loc 1 633 0
 2875 060a 3B68     		ldr	r3, [r7]
 2876 060c 0022     		movs	r2, #0
 2877 060e 1A60     		str	r2, [r3]
 634:bluetooth_rxtx.c **** 		break;
 2878              		.loc 1 634 0
 2879 0610 59E2     		b	.L107
 2880              	.L154:
 2881 0612 00BF     		.align	2
 2882              	.L153:
 2883 0614 54C00920 		.word	537509972
 2884 0618 58C00920 		.word	537509976
 2885 061c 5CC00920 		.word	537509980
 2886 0620 00000000 		.word	requested_mode
 2887 0624 00000000 		.word	rr
 2888 0628 00000000 		.word	modulation
 2889 062c 00000000 		.word	channel
 2890 0630 00000000 		.word	requested_channel
 2891 0634 00000000 		.word	hop_mode
 2892 0638 00000000 		.word	mode
 2893 063c 00000000 		.word	iap_entry
 2894 0640 00000000 		.word	bootloader_ctrl
 2895 0644 21BB0543 		.word	1124449057
 2896 0648 00000000 		.word	low_freq
 2897 064c 00000000 		.word	high_freq
 2898 0650 00000000 		.word	rssi_threshold
 2899              	.L80:
 635:bluetooth_rxtx.c **** 
 636:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 637:bluetooth_rxtx.c **** 		data[0] = 0x00;
 2900              		.loc 1 637 0
 2901 0654 7B68     		ldr	r3, [r7, #4]
 2902 0656 0022     		movs	r2, #0
 2903 0658 1A70     		strb	r2, [r3]
 638:bluetooth_rxtx.c **** 		data[1] = 0x00;
 2904              		.loc 1 638 0
 2905 065a 7B68     		ldr	r3, [r7, #4]
 2906 065c 0133     		adds	r3, r3, #1
 2907 065e 0022     		movs	r2, #0
 2908 0660 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 62


 639:bluetooth_rxtx.c **** 
 640:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 2909              		.loc 1 640 0
 2910 0662 A448     		ldr	r0, .L155
 2911 0664 FFF7FEFF 		bl	strlen
 2912 0668 0346     		mov	r3, r0
 2913 066a 87F84330 		strb	r3, [r7, #67]
 641:bluetooth_rxtx.c **** 		data[2] = length;
 2914              		.loc 1 641 0
 2915 066e 7B68     		ldr	r3, [r7, #4]
 2916 0670 0233     		adds	r3, r3, #2
 2917 0672 97F84320 		ldrb	r2, [r7, #67]
 2918 0676 1A70     		strb	r2, [r3]
 642:bluetooth_rxtx.c **** 
 643:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 2919              		.loc 1 643 0
 2920 0678 7B68     		ldr	r3, [r7, #4]
 2921 067a DA1C     		adds	r2, r3, #3
 2922 067c 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2923 0680 1046     		mov	r0, r2
 2924 0682 9C49     		ldr	r1, .L155
 2925 0684 1A46     		mov	r2, r3
 2926 0686 FFF7FEFF 		bl	memcpy
 644:bluetooth_rxtx.c **** 
 645:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 2927              		.loc 1 645 0
 2928 068a 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2929 068e DA1C     		adds	r2, r3, #3
 2930 0690 3B68     		ldr	r3, [r7]
 2931 0692 1A60     		str	r2, [r3]
 646:bluetooth_rxtx.c **** 		break;
 2932              		.loc 1 646 0
 2933 0694 17E2     		b	.L107
 2934              	.L102:
 647:bluetooth_rxtx.c **** 
 648:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 649:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 2935              		.loc 1 649 0
 2936 0696 9848     		ldr	r0, .L155+4
 2937 0698 FFF7FEFF 		bl	strlen
 2938 069c 0346     		mov	r3, r0
 2939 069e 87F84330 		strb	r3, [r7, #67]
 650:bluetooth_rxtx.c **** 		data[0] = length;
 2940              		.loc 1 650 0
 2941 06a2 7B68     		ldr	r3, [r7, #4]
 2942 06a4 97F84320 		ldrb	r2, [r7, #67]
 2943 06a8 1A70     		strb	r2, [r3]
 651:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 2944              		.loc 1 651 0
 2945 06aa 7B68     		ldr	r3, [r7, #4]
 2946 06ac 5A1C     		adds	r2, r3, #1
 2947 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2948 06b2 1046     		mov	r0, r2
 2949 06b4 9049     		ldr	r1, .L155+4
 2950 06b6 1A46     		mov	r2, r3
 2951 06b8 FFF7FEFF 		bl	memcpy
 652:bluetooth_rxtx.c **** 		*data_len = 1 + length;
ARM GAS  /tmp/ccTf0kks.s 			page 63


 2952              		.loc 1 652 0
 2953 06bc 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2954 06c0 5A1C     		adds	r2, r3, #1
 2955 06c2 3B68     		ldr	r3, [r7]
 2956 06c4 1A60     		str	r2, [r3]
 653:bluetooth_rxtx.c **** 		break;
 2957              		.loc 1 653 0
 2958 06c6 FEE1     		b	.L107
 2959              	.L82:
 654:bluetooth_rxtx.c **** 
 655:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 656:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 2960              		.loc 1 656 0
 2961 06c8 7B68     		ldr	r3, [r7, #4]
 2962 06ca 0122     		movs	r2, #1
 2963 06cc 1A70     		strb	r2, [r3]
 657:bluetooth_rxtx.c **** 		*data_len = 1;
 2964              		.loc 1 657 0
 2965 06ce 3B68     		ldr	r3, [r7]
 2966 06d0 0122     		movs	r2, #1
 2967 06d2 1A60     		str	r2, [r3]
 658:bluetooth_rxtx.c **** 		break;
 2968              		.loc 1 658 0
 2969 06d4 F7E1     		b	.L107
 2970              	.L83:
 659:bluetooth_rxtx.c **** 
 660:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 661:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 2971              		.loc 1 661 0
 2972 06d6 BB68     		ldr	r3, [r7, #8]
 2973 06d8 1B88     		ldrh	r3, [r3]
 2974 06da DAB2     		uxtb	r2, r3
 2975 06dc 874B     		ldr	r3, .L155+8
 2976 06de 1A70     		strb	r2, [r3]
 662:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 2977              		.loc 1 662 0
 2978 06e0 FFF7FEFF 		bl	cs_threshold_calc_and_set
 663:bluetooth_rxtx.c **** 		break;
 2979              		.loc 1 663 0
 2980 06e4 EFE1     		b	.L107
 2981              	.L84:
 664:bluetooth_rxtx.c **** 
 665:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 666:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 2982              		.loc 1 666 0
 2983 06e6 854B     		ldr	r3, .L155+8
 2984 06e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2985 06ea DAB2     		uxtb	r2, r3
 2986 06ec 7B68     		ldr	r3, [r7, #4]
 2987 06ee 1A70     		strb	r2, [r3]
 667:bluetooth_rxtx.c **** 		*data_len = 1;
 2988              		.loc 1 667 0
 2989 06f0 3B68     		ldr	r3, [r7]
 2990 06f2 0122     		movs	r2, #1
 2991 06f4 1A60     		str	r2, [r3]
 668:bluetooth_rxtx.c **** 		break;
 2992              		.loc 1 668 0
ARM GAS  /tmp/ccTf0kks.s 			page 64


 2993 06f6 E6E1     		b	.L107
 2994              	.L85:
 669:bluetooth_rxtx.c **** 
 670:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 671:bluetooth_rxtx.c **** 		target.address = 0;
 2995              		.loc 1 671 0
 2996 06f8 8149     		ldr	r1, .L155+12
 2997 06fa 4FF00002 		mov	r2, #0
 2998 06fe 4FF00003 		mov	r3, #0
 2999 0702 C1E90023 		strd	r2, [r1]
 672:bluetooth_rxtx.c **** 		target.access_code = 0;
 3000              		.loc 1 672 0
 3001 0706 7E49     		ldr	r1, .L155+12
 3002 0708 4FF00002 		mov	r2, #0
 3003 070c 4FF00003 		mov	r3, #0
 3004 0710 C1E90223 		strd	r2, [r1, #8]
 673:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3005              		.loc 1 673 0
 3006 0714 0023     		movs	r3, #0
 3007 0716 FB64     		str	r3, [r7, #76]
 3008 0718 25E0     		b	.L133
 3009              	.L134:
 674:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3010              		.loc 1 674 0 discriminator 3
 3011 071a 794B     		ldr	r3, .L155+12
 3012 071c D3E900AB 		ldrd	r10, [r3]
 3013 0720 FB6C     		ldr	r3, [r7, #76]
 3014 0722 7A68     		ldr	r2, [r7, #4]
 3015 0724 1344     		add	r3, r3, r2
 3016 0726 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3017 0728 DAB2     		uxtb	r2, r3
 3018 072a 4FF00003 		mov	r3, #0
 3019 072e F96C     		ldr	r1, [r7, #76]
 3020 0730 C900     		lsls	r1, r1, #3
 3021 0732 A1F12006 		sub	r6, r1, #32
 3022 0736 C1F12000 		rsb	r0, r1, #32
 3023 073a 03FA01F9 		lsl	r9, r3, r1
 3024 073e 02FA06F6 		lsl	r6, r2, r6
 3025 0742 49EA0609 		orr	r9, r9, r6
 3026 0746 22FA00F0 		lsr	r0, r2, r0
 3027 074a 49EA0009 		orr	r9, r9, r0
 3028 074e 02FA01F8 		lsl	r8, r2, r1
 3029 0752 4AEA0802 		orr	r2, r10, r8
 3030 0756 4BEA0903 		orr	r3, fp, r9
 3031 075a 6949     		ldr	r1, .L155+12
 3032 075c C1E90023 		strd	r2, [r1]
 673:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3033              		.loc 1 673 0 discriminator 3
 3034 0760 FB6C     		ldr	r3, [r7, #76]
 3035 0762 0133     		adds	r3, r3, #1
 3036 0764 FB64     		str	r3, [r7, #76]
 3037              	.L133:
 673:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3038              		.loc 1 673 0 is_stmt 0 discriminator 1
 3039 0766 FB6C     		ldr	r3, [r7, #76]
 3040 0768 072B     		cmp	r3, #7
 3041 076a D6DD     		ble	.L134
ARM GAS  /tmp/ccTf0kks.s 			page 65


 675:bluetooth_rxtx.c **** 		}
 676:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3042              		.loc 1 676 0 is_stmt 1
 3043 076c 0023     		movs	r3, #0
 3044 076e FB64     		str	r3, [r7, #76]
 3045 0770 24E0     		b	.L135
 3046              	.L136:
 677:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3047              		.loc 1 677 0 discriminator 3
 3048 0772 634B     		ldr	r3, .L155+12
 3049 0774 D3E90289 		ldrd	r8, [r3, #8]
 3050 0778 FB6C     		ldr	r3, [r7, #76]
 3051 077a 0833     		adds	r3, r3, #8
 3052 077c 7A68     		ldr	r2, [r7, #4]
 3053 077e 1344     		add	r3, r3, r2
 3054 0780 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3055 0782 DAB2     		uxtb	r2, r3
 3056 0784 4FF00003 		mov	r3, #0
 3057 0788 F96C     		ldr	r1, [r7, #76]
 3058 078a C900     		lsls	r1, r1, #3
 3059 078c A1F12006 		sub	r6, r1, #32
 3060 0790 C1F12000 		rsb	r0, r1, #32
 3061 0794 03FA01F5 		lsl	r5, r3, r1
 3062 0798 02FA06F6 		lsl	r6, r2, r6
 3063 079c 3543     		orrs	r5, r5, r6
 3064 079e 22FA00F0 		lsr	r0, r2, r0
 3065 07a2 0543     		orrs	r5, r5, r0
 3066 07a4 02FA01F4 		lsl	r4, r2, r1
 3067 07a8 48EA0402 		orr	r2, r8, r4
 3068 07ac 49EA0503 		orr	r3, r9, r5
 3069 07b0 5349     		ldr	r1, .L155+12
 3070 07b2 C1E90223 		strd	r2, [r1, #8]
 676:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3071              		.loc 1 676 0 discriminator 3
 3072 07b6 FB6C     		ldr	r3, [r7, #76]
 3073 07b8 0133     		adds	r3, r3, #1
 3074 07ba FB64     		str	r3, [r7, #76]
 3075              	.L135:
 676:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3076              		.loc 1 676 0 is_stmt 0 discriminator 1
 3077 07bc FB6C     		ldr	r3, [r7, #76]
 3078 07be 072B     		cmp	r3, #7
 3079 07c0 D7DD     		ble	.L136
 678:bluetooth_rxtx.c **** 		}
 679:bluetooth_rxtx.c **** 		break;
 3080              		.loc 1 679 0 is_stmt 1
 3081 07c2 80E1     		b	.L107
 3082              	.L86:
 680:bluetooth_rxtx.c **** 
 681:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 682:bluetooth_rxtx.c **** 		clock_offset = 0;
 3083              		.loc 1 682 0
 3084 07c4 0023     		movs	r3, #0
 3085 07c6 BB64     		str	r3, [r7, #72]
 683:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3086              		.loc 1 683 0
 3087 07c8 0023     		movs	r3, #0
ARM GAS  /tmp/ccTf0kks.s 			page 66


 3088 07ca FB64     		str	r3, [r7, #76]
 3089 07cc 0DE0     		b	.L137
 3090              	.L138:
 684:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3091              		.loc 1 684 0 discriminator 3
 3092 07ce BB6C     		ldr	r3, [r7, #72]
 3093 07d0 1B02     		lsls	r3, r3, #8
 3094 07d2 BB64     		str	r3, [r7, #72]
 685:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3095              		.loc 1 685 0 discriminator 3
 3096 07d4 FB6C     		ldr	r3, [r7, #76]
 3097 07d6 7A68     		ldr	r2, [r7, #4]
 3098 07d8 1344     		add	r3, r3, r2
 3099 07da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3100 07dc 1A46     		mov	r2, r3
 3101 07de BB6C     		ldr	r3, [r7, #72]
 3102 07e0 1343     		orrs	r3, r3, r2
 3103 07e2 BB64     		str	r3, [r7, #72]
 683:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3104              		.loc 1 683 0 discriminator 3
 3105 07e4 FB6C     		ldr	r3, [r7, #76]
 3106 07e6 0133     		adds	r3, r3, #1
 3107 07e8 FB64     		str	r3, [r7, #76]
 3108              	.L137:
 683:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3109              		.loc 1 683 0 is_stmt 0 discriminator 1
 3110 07ea FB6C     		ldr	r3, [r7, #76]
 3111 07ec 032B     		cmp	r3, #3
 3112 07ee EEDD     		ble	.L138
 686:bluetooth_rxtx.c **** 		}
 687:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3113              		.loc 1 687 0 is_stmt 1
 3114 07f0 444B     		ldr	r3, .L155+16
 3115 07f2 1A68     		ldr	r2, [r3]
 3116 07f4 BB6C     		ldr	r3, [r7, #72]
 3117 07f6 1344     		add	r3, r3, r2
 3118 07f8 424A     		ldr	r2, .L155+16
 3119 07fa 1360     		str	r3, [r2]
 688:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3120              		.loc 1 688 0
 3121 07fc 424B     		ldr	r3, .L155+20
 3122 07fe 0222     		movs	r2, #2
 3123 0800 1A70     		strb	r2, [r3]
 689:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3124              		.loc 1 689 0
 3125 0802 424B     		ldr	r3, .L155+24
 3126 0804 0822     		movs	r2, #8
 3127 0806 1A70     		strb	r2, [r3]
 690:bluetooth_rxtx.c **** 		break;
 3128              		.loc 1 690 0
 3129 0808 5DE1     		b	.L107
 3130              	.L87:
 691:bluetooth_rxtx.c **** 
 692:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 693:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3131              		.loc 1 693 0
 3132 080a 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccTf0kks.s 			page 67


 3133 080c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3134 080e 1A46     		mov	r2, r3
 3135 0810 7B68     		ldr	r3, [r7, #4]
 3136 0812 0133     		adds	r3, r3, #1
 3137 0814 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3138 0816 1B02     		lsls	r3, r3, #8
 3139 0818 1A43     		orrs	r2, r2, r3
 3140 081a 7B68     		ldr	r3, [r7, #4]
 3141 081c 0233     		adds	r3, r3, #2
 3142 081e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3143 0820 1B04     		lsls	r3, r3, #16
 3144 0822 1A43     		orrs	r2, r2, r3
 3145 0824 7B68     		ldr	r3, [r7, #4]
 3146 0826 0333     		adds	r3, r3, #3
 3147 0828 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3148 082a 1B06     		lsls	r3, r3, #24
 3149 082c 1343     		orrs	r3, r3, r2
 3150 082e FB63     		str	r3, [r7, #60]
 694:bluetooth_rxtx.c **** 		clkn = clock;
 3151              		.loc 1 694 0
 3152 0830 344A     		ldr	r2, .L155+16
 3153 0832 FB6B     		ldr	r3, [r7, #60]
 3154 0834 1360     		str	r3, [r2]
 695:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3155              		.loc 1 695 0
 3156 0836 FFF7FEFF 		bl	cs_threshold_calc_and_set
 696:bluetooth_rxtx.c **** 		break;
 3157              		.loc 1 696 0
 3158 083a 44E1     		b	.L107
 3159              	.L98:
 697:bluetooth_rxtx.c **** 
 698:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 699:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3160              		.loc 1 699 0
 3161 083c 0023     		movs	r3, #0
 3162 083e FB64     		str	r3, [r7, #76]
 3163 0840 0BE0     		b	.L139
 3164              	.L140:
 700:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3165              		.loc 1 700 0 discriminator 3
 3166 0842 FB6C     		ldr	r3, [r7, #76]
 3167 0844 7A68     		ldr	r2, [r7, #4]
 3168 0846 1344     		add	r3, r3, r2
 3169 0848 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3170 084a 314A     		ldr	r2, .L155+28
 3171 084c FB6C     		ldr	r3, [r7, #76]
 3172 084e 1344     		add	r3, r3, r2
 3173 0850 0A46     		mov	r2, r1
 3174 0852 1A70     		strb	r2, [r3]
 699:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3175              		.loc 1 699 0 discriminator 3
 3176 0854 FB6C     		ldr	r3, [r7, #76]
 3177 0856 0133     		adds	r3, r3, #1
 3178 0858 FB64     		str	r3, [r7, #76]
 3179              	.L139:
 699:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3180              		.loc 1 699 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccTf0kks.s 			page 68


 3181 085a FB6C     		ldr	r3, [r7, #76]
 3182 085c 092B     		cmp	r3, #9
 3183 085e F0DD     		ble	.L140
 701:bluetooth_rxtx.c **** 		}
 702:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3184              		.loc 1 702 0 is_stmt 1
 3185 0860 2C4B     		ldr	r3, .L155+32
 3186 0862 0122     		movs	r2, #1
 3187 0864 1A70     		strb	r2, [r3]
 703:bluetooth_rxtx.c **** 		*data_len = 10;
 3188              		.loc 1 703 0
 3189 0866 3B68     		ldr	r3, [r7]
 3190 0868 0A22     		movs	r2, #10
 3191 086a 1A60     		str	r2, [r3]
 704:bluetooth_rxtx.c **** 		break;
 3192              		.loc 1 704 0
 3193 086c 2BE1     		b	.L107
 3194              	.L99:
 705:bluetooth_rxtx.c **** 
 706:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 707:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3195              		.loc 1 707 0
 3196 086e 0023     		movs	r3, #0
 3197 0870 FB64     		str	r3, [r7, #76]
 3198 0872 07E0     		b	.L141
 3199              	.L142:
 708:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3200              		.loc 1 708 0 discriminator 3
 3201 0874 264A     		ldr	r2, .L155+28
 3202 0876 FB6C     		ldr	r3, [r7, #76]
 3203 0878 1344     		add	r3, r3, r2
 3204 087a 0022     		movs	r2, #0
 3205 087c 1A70     		strb	r2, [r3]
 707:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3206              		.loc 1 707 0 discriminator 3
 3207 087e FB6C     		ldr	r3, [r7, #76]
 3208 0880 0133     		adds	r3, r3, #1
 3209 0882 FB64     		str	r3, [r7, #76]
 3210              	.L141:
 707:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3211              		.loc 1 707 0 is_stmt 0 discriminator 1
 3212 0884 FB6C     		ldr	r3, [r7, #76]
 3213 0886 092B     		cmp	r3, #9
 3214 0888 F4DD     		ble	.L142
 709:bluetooth_rxtx.c **** 		}
 710:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3215              		.loc 1 710 0 is_stmt 1
 3216 088a 224B     		ldr	r3, .L155+32
 3217 088c 0022     		movs	r2, #0
 3218 088e 1A70     		strb	r2, [r3]
 711:bluetooth_rxtx.c **** 		*data_len = 10;
 3219              		.loc 1 711 0
 3220 0890 3B68     		ldr	r3, [r7]
 3221 0892 0A22     		movs	r2, #10
 3222 0894 1A60     		str	r2, [r3]
 712:bluetooth_rxtx.c **** 		break;
 3223              		.loc 1 712 0
ARM GAS  /tmp/ccTf0kks.s 			page 69


 3224 0896 16E1     		b	.L107
 3225              	.L88:
 713:bluetooth_rxtx.c **** 
 714:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 715:bluetooth_rxtx.c **** 		clock = clkn;
 3226              		.loc 1 715 0
 3227 0898 1A4B     		ldr	r3, .L155+16
 3228 089a 1B68     		ldr	r3, [r3]
 3229 089c FB63     		str	r3, [r7, #60]
 716:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3230              		.loc 1 716 0
 3231 089e 0023     		movs	r3, #0
 3232 08a0 FB64     		str	r3, [r7, #76]
 3233 08a2 0CE0     		b	.L143
 3234              	.L144:
 717:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3235              		.loc 1 717 0 discriminator 3
 3236 08a4 FB6C     		ldr	r3, [r7, #76]
 3237 08a6 7A68     		ldr	r2, [r7, #4]
 3238 08a8 1344     		add	r3, r3, r2
 3239 08aa FA6C     		ldr	r2, [r7, #76]
 3240 08ac D200     		lsls	r2, r2, #3
 3241 08ae F96B     		ldr	r1, [r7, #60]
 3242 08b0 21FA02F2 		lsr	r2, r1, r2
 3243 08b4 D2B2     		uxtb	r2, r2
 3244 08b6 1A70     		strb	r2, [r3]
 716:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3245              		.loc 1 716 0 discriminator 3
 3246 08b8 FB6C     		ldr	r3, [r7, #76]
 3247 08ba 0133     		adds	r3, r3, #1
 3248 08bc FB64     		str	r3, [r7, #76]
 3249              	.L143:
 716:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3250              		.loc 1 716 0 is_stmt 0 discriminator 1
 3251 08be FB6C     		ldr	r3, [r7, #76]
 3252 08c0 032B     		cmp	r3, #3
 3253 08c2 EFDD     		ble	.L144
 718:bluetooth_rxtx.c **** 		}
 719:bluetooth_rxtx.c **** 		*data_len = 4;
 3254              		.loc 1 719 0 is_stmt 1
 3255 08c4 3B68     		ldr	r3, [r7]
 3256 08c6 0422     		movs	r2, #4
 3257 08c8 1A60     		str	r2, [r3]
 720:bluetooth_rxtx.c **** 		break;
 3258              		.loc 1 720 0
 3259 08ca FCE0     		b	.L107
 3260              	.L89:
 721:bluetooth_rxtx.c **** 
 722:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 723:bluetooth_rxtx.c **** 		*data_len = 0;
 3261              		.loc 1 723 0
 3262 08cc 3B68     		ldr	r3, [r7]
 3263 08ce 0022     		movs	r2, #0
 3264 08d0 1A60     		str	r2, [r3]
 724:bluetooth_rxtx.c **** 
 725:bluetooth_rxtx.c **** 		do_hop = 0;
 3265              		.loc 1 725 0
ARM GAS  /tmp/ccTf0kks.s 			page 70


 3266 08d2 114B     		ldr	r3, .L155+36
 3267 08d4 0022     		movs	r2, #0
 3268 08d6 1A70     		strb	r2, [r3]
 726:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3269              		.loc 1 726 0
 3270 08d8 0B4B     		ldr	r3, .L155+20
 3271 08da 0322     		movs	r2, #3
 3272 08dc 1A70     		strb	r2, [r3]
 727:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3273              		.loc 1 727 0
 3274 08de 0B4B     		ldr	r3, .L155+24
 3275 08e0 0922     		movs	r2, #9
 3276 08e2 1A70     		strb	r2, [r3]
 728:bluetooth_rxtx.c **** 
 729:bluetooth_rxtx.c **** 		queue_init();
 3277              		.loc 1 729 0
 3278 08e4 FFF7FEFF 		bl	queue_init
 730:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3279              		.loc 1 730 0
 3280 08e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 731:bluetooth_rxtx.c **** 		break;
 3281              		.loc 1 731 0
 3282 08ec EBE0     		b	.L107
 3283              	.L90:
 732:bluetooth_rxtx.c **** 
 733:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 734:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3284              		.loc 1 734 0
 3285 08ee 0023     		movs	r3, #0
 3286 08f0 FB64     		str	r3, [r7, #76]
 3287 08f2 21E0     		b	.L145
 3288              	.L156:
 3289              		.align	2
 3290              	.L155:
 3291 08f4 C0080000 		.word	.LC3
 3292 08f8 00000000 		.word	compile_info
 3293 08fc 00000000 		.word	cs_threshold_req
 3294 0900 00000000 		.word	target
 3295 0904 00000000 		.word	clkn
 3296 0908 00000000 		.word	hop_mode
 3297 090c 00000000 		.word	requested_mode
 3298 0910 00000000 		.word	afh_map
 3299 0914 00000000 		.word	afh_enabled
 3300 0918 00000000 		.word	do_hop
 3301              	.L146:
 735:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3302              		.loc 1 735 0 discriminator 3
 3303 091c FB6C     		ldr	r3, [r7, #76]
 3304 091e 7A68     		ldr	r2, [r7, #4]
 3305 0920 1344     		add	r3, r3, r2
 3306 0922 6C4A     		ldr	r2, .L157
 3307 0924 1168     		ldr	r1, [r2]
 3308 0926 FA6C     		ldr	r2, [r7, #76]
 3309 0928 D200     		lsls	r2, r2, #3
 3310 092a 21FA02F2 		lsr	r2, r1, r2
 3311 092e D2B2     		uxtb	r2, r2
 3312 0930 1A70     		strb	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 71


 734:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3313              		.loc 1 734 0 discriminator 3
 3314 0932 FB6C     		ldr	r3, [r7, #76]
 3315 0934 0133     		adds	r3, r3, #1
 3316 0936 FB64     		str	r3, [r7, #76]
 3317              	.L145:
 734:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3318              		.loc 1 734 0 is_stmt 0 discriminator 1
 3319 0938 FB6C     		ldr	r3, [r7, #76]
 3320 093a 032B     		cmp	r3, #3
 3321 093c EEDD     		ble	.L146
 736:bluetooth_rxtx.c **** 		}
 737:bluetooth_rxtx.c **** 		*data_len = 4;
 3322              		.loc 1 737 0 is_stmt 1
 3323 093e 3B68     		ldr	r3, [r7]
 3324 0940 0422     		movs	r2, #4
 3325 0942 1A60     		str	r2, [r3]
 738:bluetooth_rxtx.c **** 		break;
 3326              		.loc 1 738 0
 3327 0944 BFE0     		b	.L107
 3328              	.L91:
 739:bluetooth_rxtx.c **** 
 740:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 741:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3329              		.loc 1 741 0
 3330 0946 7B68     		ldr	r3, [r7, #4]
 3331 0948 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3332 094a 1A46     		mov	r2, r3
 3333 094c 7B68     		ldr	r3, [r7, #4]
 3334 094e 0133     		adds	r3, r3, #1
 3335 0950 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3336 0952 1B02     		lsls	r3, r3, #8
 3337 0954 1A43     		orrs	r2, r2, r3
 3338 0956 7B68     		ldr	r3, [r7, #4]
 3339 0958 0233     		adds	r3, r3, #2
 3340 095a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3341 095c 1B04     		lsls	r3, r3, #16
 3342 095e 1A43     		orrs	r2, r2, r3
 3343 0960 7B68     		ldr	r3, [r7, #4]
 3344 0962 0333     		adds	r3, r3, #3
 3345 0964 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3346 0966 1B06     		lsls	r3, r3, #24
 3347 0968 1343     		orrs	r3, r3, r2
 3348 096a 1846     		mov	r0, r3
 3349 096c FFF7FEFF 		bl	le_set_access_address
 742:bluetooth_rxtx.c **** 		le.target_set = 1;
 3350              		.loc 1 742 0
 3351 0970 584B     		ldr	r3, .L157
 3352 0972 0122     		movs	r2, #1
 3353 0974 DA63     		str	r2, [r3, #60]
 743:bluetooth_rxtx.c **** 		break;
 3354              		.loc 1 743 0
 3355 0976 A6E0     		b	.L107
 3356              	.L93:
 744:bluetooth_rxtx.c **** 
 745:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 746:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
ARM GAS  /tmp/ccTf0kks.s 			page 72


 747:bluetooth_rxtx.c **** 		break;
 748:bluetooth_rxtx.c **** 
 749:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 750:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 751:bluetooth_rxtx.c **** 		// don't commit here please
 752:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3357              		.loc 1 752 0
 3358 0978 7B68     		ldr	r3, [r7, #4]
 3359 097a 1322     		movs	r2, #19
 3360 097c 1A70     		strb	r2, [r3]
 753:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3361              		.loc 1 753 0
 3362 097e 7B68     		ldr	r3, [r7, #4]
 3363 0980 0133     		adds	r3, r3, #1
 3364 0982 3722     		movs	r2, #55
 3365 0984 1A70     		strb	r2, [r3]
 754:bluetooth_rxtx.c **** 		*data_len = 2;
 3366              		.loc 1 754 0
 3367 0986 3B68     		ldr	r3, [r7]
 3368 0988 0222     		movs	r2, #2
 3369 098a 1A60     		str	r2, [r3]
 755:bluetooth_rxtx.c **** 		break;
 3370              		.loc 1 755 0
 3371 098c 9BE0     		b	.L107
 3372              	.L94:
 756:bluetooth_rxtx.c **** 
 757:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 758:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3373              		.loc 1 758 0
 3374 098e 514B     		ldr	r3, .L157
 3375 0990 1B69     		ldr	r3, [r3, #16]
 3376 0992 002B     		cmp	r3, #0
 3377 0994 14BF     		ite	ne
 3378 0996 0123     		movne	r3, #1
 3379 0998 0023     		moveq	r3, #0
 3380 099a DBB2     		uxtb	r3, r3
 3381 099c 1A46     		mov	r2, r3
 3382 099e 7B68     		ldr	r3, [r7, #4]
 3383 09a0 1A70     		strb	r2, [r3]
 759:bluetooth_rxtx.c **** 		*data_len = 1;
 3384              		.loc 1 759 0
 3385 09a2 3B68     		ldr	r3, [r7]
 3386 09a4 0122     		movs	r2, #1
 3387 09a6 1A60     		str	r2, [r3]
 760:bluetooth_rxtx.c **** 		break;
 3388              		.loc 1 760 0
 3389 09a8 8DE0     		b	.L107
 3390              	.L95:
 761:bluetooth_rxtx.c **** 
 762:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 763:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3391              		.loc 1 763 0
 3392 09aa BB68     		ldr	r3, [r7, #8]
 3393 09ac 1B88     		ldrh	r3, [r3]
 3394 09ae 002B     		cmp	r3, #0
 3395 09b0 14BF     		ite	ne
 3396 09b2 0123     		movne	r3, #1
ARM GAS  /tmp/ccTf0kks.s 			page 73


 3397 09b4 0023     		moveq	r3, #0
 3398 09b6 DBB2     		uxtb	r3, r3
 3399 09b8 1A46     		mov	r2, r3
 3400 09ba 464B     		ldr	r3, .L157
 3401 09bc 1A61     		str	r2, [r3, #16]
 764:bluetooth_rxtx.c **** 		break;
 3402              		.loc 1 764 0
 3403 09be 82E0     		b	.L107
 3404              	.L96:
 765:bluetooth_rxtx.c **** 
 766:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 767:bluetooth_rxtx.c **** 		p = dequeue();
 3405              		.loc 1 767 0
 3406 09c0 FFF7FEFF 		bl	dequeue
 3407 09c4 7864     		str	r0, [r7, #68]
 768:bluetooth_rxtx.c **** 		if (p != NULL) {
 3408              		.loc 1 768 0
 3409 09c6 7B6C     		ldr	r3, [r7, #68]
 3410 09c8 002B     		cmp	r3, #0
 3411 09ca 08D0     		beq	.L147
 769:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3412              		.loc 1 769 0
 3413 09cc 7868     		ldr	r0, [r7, #4]
 3414 09ce 796C     		ldr	r1, [r7, #68]
 3415 09d0 4022     		movs	r2, #64
 3416 09d2 FFF7FEFF 		bl	memcpy
 770:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3417              		.loc 1 770 0
 3418 09d6 3B68     		ldr	r3, [r7]
 3419 09d8 4022     		movs	r2, #64
 3420 09da 1A60     		str	r2, [r3]
 771:bluetooth_rxtx.c **** 		} else {
 772:bluetooth_rxtx.c **** 			data[0] = 0;
 773:bluetooth_rxtx.c **** 			*data_len = 1;
 774:bluetooth_rxtx.c **** 		}
 775:bluetooth_rxtx.c **** 		break;
 3421              		.loc 1 775 0
 3422 09dc 73E0     		b	.L107
 3423              	.L147:
 772:bluetooth_rxtx.c **** 			*data_len = 1;
 3424              		.loc 1 772 0
 3425 09de 7B68     		ldr	r3, [r7, #4]
 3426 09e0 0022     		movs	r2, #0
 3427 09e2 1A70     		strb	r2, [r3]
 773:bluetooth_rxtx.c **** 		}
 3428              		.loc 1 773 0
 3429 09e4 3B68     		ldr	r3, [r7]
 3430 09e6 0122     		movs	r2, #1
 3431 09e8 1A60     		str	r2, [r3]
 3432              		.loc 1 775 0
 3433 09ea 6CE0     		b	.L107
 3434              	.L97:
 776:bluetooth_rxtx.c **** 
 777:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 778:bluetooth_rxtx.c **** 		*data_len = 0;
 3435              		.loc 1 778 0
 3436 09ec 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/ccTf0kks.s 			page 74


 3437 09ee 0022     		movs	r2, #0
 3438 09f0 1A60     		str	r2, [r3]
 779:bluetooth_rxtx.c **** 
 780:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3439              		.loc 1 780 0
 3440 09f2 394B     		ldr	r3, .L157+4
 3441 09f4 0022     		movs	r2, #0
 3442 09f6 1A70     		strb	r2, [r3]
 781:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3443              		.loc 1 781 0
 3444 09f8 384B     		ldr	r3, .L157+8
 3445 09fa 0A22     		movs	r2, #10
 3446 09fc 1A70     		strb	r2, [r3]
 782:bluetooth_rxtx.c **** 
 783:bluetooth_rxtx.c **** 		queue_init();
 3447              		.loc 1 783 0
 3448 09fe FFF7FEFF 		bl	queue_init
 784:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3449              		.loc 1 784 0
 3450 0a02 FFF7FEFF 		bl	cs_threshold_calc_and_set
 785:bluetooth_rxtx.c **** 		break;
 3451              		.loc 1 785 0
 3452 0a06 5EE0     		b	.L107
 3453              	.L100:
 786:bluetooth_rxtx.c **** 
 787:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 788:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3454              		.loc 1 788 0
 3455 0a08 BB68     		ldr	r3, [r7, #8]
 3456 0a0a 1B88     		ldrh	r3, [r3]
 3457 0a0c DBB2     		uxtb	r3, r3
 3458 0a0e 1846     		mov	r0, r3
 3459 0a10 FFF7FEFF 		bl	cc2400_get
 3460 0a14 0346     		mov	r3, r0
 3461 0a16 7B87     		strh	r3, [r7, #58]	@ movhi
 789:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3462              		.loc 1 789 0
 3463 0a18 7B8F     		ldrh	r3, [r7, #58]
 3464 0a1a 1B0A     		lsrs	r3, r3, #8
 3465 0a1c 9BB2     		uxth	r3, r3
 3466 0a1e DAB2     		uxtb	r2, r3
 3467 0a20 7B68     		ldr	r3, [r7, #4]
 3468 0a22 1A70     		strb	r2, [r3]
 790:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3469              		.loc 1 790 0
 3470 0a24 7B68     		ldr	r3, [r7, #4]
 3471 0a26 0133     		adds	r3, r3, #1
 3472 0a28 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3473 0a2a D2B2     		uxtb	r2, r2
 3474 0a2c 1A70     		strb	r2, [r3]
 791:bluetooth_rxtx.c **** 		*data_len = 2;
 3475              		.loc 1 791 0
 3476 0a2e 3B68     		ldr	r3, [r7]
 3477 0a30 0222     		movs	r2, #2
 3478 0a32 1A60     		str	r2, [r3]
 792:bluetooth_rxtx.c **** 		break;
 3479              		.loc 1 792 0
ARM GAS  /tmp/ccTf0kks.s 			page 75


 3480 0a34 47E0     		b	.L107
 3481              	.L104:
 793:bluetooth_rxtx.c **** 
 794:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 795:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3482              		.loc 1 795 0
 3483 0a36 BB68     		ldr	r3, [r7, #8]
 3484 0a38 1B88     		ldrh	r3, [r3]
 3485 0a3a DAB2     		uxtb	r2, r3
 3486 0a3c BB68     		ldr	r3, [r7, #8]
 3487 0a3e 0233     		adds	r3, r3, #2
 3488 0a40 1B88     		ldrh	r3, [r3]
 3489 0a42 1046     		mov	r0, r2
 3490 0a44 1946     		mov	r1, r3
 3491 0a46 FFF7FEFF 		bl	cc2400_set
 796:bluetooth_rxtx.c **** 		break;
 3492              		.loc 1 796 0
 3493 0a4a 3CE0     		b	.L107
 3494              	.L101:
 797:bluetooth_rxtx.c **** 
 798:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 799:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3495              		.loc 1 799 0
 3496 0a4c 2448     		ldr	r0, .L157+12
 3497 0a4e 7968     		ldr	r1, [r7, #4]
 3498 0a50 0622     		movs	r2, #6
 3499 0a52 FFF7FEFF 		bl	memcpy
 800:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3500              		.loc 1 800 0
 3501 0a56 214B     		ldr	r3, .L157+8
 3502 0a58 0C22     		movs	r2, #12
 3503 0a5a 1A70     		strb	r2, [r3]
 801:bluetooth_rxtx.c **** 		break;
 3504              		.loc 1 801 0
 3505 0a5c 33E0     		b	.L107
 3506              	.L103:
 802:bluetooth_rxtx.c **** 
 803:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 804:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 805:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 806:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3507              		.loc 1 806 0
 3508 0a5e 7B68     		ldr	r3, [r7, #4]
 3509 0a60 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3510 0a62 1C4B     		ldr	r3, .L157
 3511 0a64 83F83420 		strb	r2, [r3, #52]
 807:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3512              		.loc 1 807 0
 3513 0a68 7B68     		ldr	r3, [r7, #4]
 3514 0a6a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3515 0a6c 194B     		ldr	r3, .L157
 3516 0a6e 83F83520 		strb	r2, [r3, #53]
 808:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3517              		.loc 1 808 0
 3518 0a72 7B68     		ldr	r3, [r7, #4]
 3519 0a74 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3520 0a76 174B     		ldr	r3, .L157
ARM GAS  /tmp/ccTf0kks.s 			page 76


 3521 0a78 83F83620 		strb	r2, [r3, #54]
 809:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3522              		.loc 1 809 0
 3523 0a7c 7B68     		ldr	r3, [r7, #4]
 3524 0a7e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3525 0a80 144B     		ldr	r3, .L157
 3526 0a82 83F83720 		strb	r2, [r3, #55]
 810:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3527              		.loc 1 810 0
 3528 0a86 7B68     		ldr	r3, [r7, #4]
 3529 0a88 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3530 0a8a 124B     		ldr	r3, .L157
 3531 0a8c 83F83820 		strb	r2, [r3, #56]
 811:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3532              		.loc 1 811 0
 3533 0a90 7B68     		ldr	r3, [r7, #4]
 3534 0a92 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3535 0a94 0F4B     		ldr	r3, .L157
 3536 0a96 83F83920 		strb	r2, [r3, #57]
 812:bluetooth_rxtx.c **** 		le.target_set = 1;
 3537              		.loc 1 812 0
 3538 0a9a 0E4B     		ldr	r3, .L157
 3539 0a9c 0122     		movs	r2, #1
 3540 0a9e DA63     		str	r2, [r3, #60]
 813:bluetooth_rxtx.c **** 		break;
 3541              		.loc 1 813 0
 3542 0aa0 11E0     		b	.L107
 3543              	.L105:
 814:bluetooth_rxtx.c **** 
 815:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 816:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 817:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3544              		.loc 1 817 0
 3545 0aa2 BB68     		ldr	r3, [r7, #8]
 3546 0aa4 1B88     		ldrh	r3, [r3]
 3547 0aa6 DAB2     		uxtb	r2, r3
 3548 0aa8 0E4B     		ldr	r3, .L157+16
 3549 0aaa 1A70     		strb	r2, [r3]
 818:bluetooth_rxtx.c **** 		break;
 3550              		.loc 1 818 0
 3551 0aac 0BE0     		b	.L107
 3552              	.L106:
 819:bluetooth_rxtx.c **** #endif
 820:bluetooth_rxtx.c **** 
 821:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 822:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 823:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 824:bluetooth_rxtx.c **** 			return 0;
 825:bluetooth_rxtx.c **** #endif
 826:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3553              		.loc 1 826 0
 3554 0aae 0B4B     		ldr	r3, .L157+8
 3555 0ab0 0D22     		movs	r2, #13
 3556 0ab2 1A70     		strb	r2, [r3]
 827:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3557              		.loc 1 827 0
 3558 0ab4 BB68     		ldr	r3, [r7, #8]
ARM GAS  /tmp/ccTf0kks.s 			page 77


 3559 0ab6 1B88     		ldrh	r3, [r3]
 3560 0ab8 DAB2     		uxtb	r2, r3
 3561 0aba 0B4B     		ldr	r3, .L157+20
 3562 0abc 1A70     		strb	r2, [r3]
 828:bluetooth_rxtx.c **** 		break;
 3563              		.loc 1 828 0
 3564 0abe 02E0     		b	.L107
 3565              	.L47:
 829:bluetooth_rxtx.c **** 
 830:bluetooth_rxtx.c **** 	default:
 831:bluetooth_rxtx.c **** 		return 0;
 3566              		.loc 1 831 0
 3567 0ac0 0023     		movs	r3, #0
 3568 0ac2 01E0     		b	.L149
 3569              	.L150:
 747:bluetooth_rxtx.c **** 
 3570              		.loc 1 747 0
 3571 0ac4 00BF     		nop
 3572              	.L107:
 832:bluetooth_rxtx.c **** 	}
 833:bluetooth_rxtx.c **** 	return 1;
 3573              		.loc 1 833 0
 3574 0ac6 0123     		movs	r3, #1
 3575              	.L149:
 834:bluetooth_rxtx.c **** }
 3576              		.loc 1 834 0 discriminator 1
 3577 0ac8 1846     		mov	r0, r3
 3578 0aca 5437     		adds	r7, r7, #84
 3579              		.cfi_def_cfa_offset 36
 3580 0acc BD46     		mov	sp, r7
 3581              		.cfi_def_cfa_register 13
 3582              		@ sp needed
 3583 0ace BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3584              	.L158:
 3585 0ad2 00BF     		.align	2
 3586              	.L157:
 3587 0ad4 00000000 		.word	le
 3588 0ad8 00000000 		.word	hop_mode
 3589 0adc 00000000 		.word	requested_mode
 3590 0ae0 00000000 		.word	slave_mac_address
 3591 0ae4 00000000 		.word	jam_mode
 3592 0ae8 00000000 		.word	ego_mode
 3593              		.cfi_endproc
 3594              	.LFE9:
 3596              		.section	.text.clkn_init,"ax",%progbits
 3597              		.align	2
 3598              		.thumb
 3599              		.thumb_func
 3601              	clkn_init:
 3602              	.LFB10:
 835:bluetooth_rxtx.c **** 
 836:bluetooth_rxtx.c **** static void clkn_init()
 837:bluetooth_rxtx.c **** {
 3603              		.loc 1 837 0
 3604              		.cfi_startproc
 3605              		@ args = 0, pretend = 0, frame = 0
 3606              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/ccTf0kks.s 			page 78


 3607              		@ link register save eliminated.
 3608 0000 80B4     		push	{r7}
 3609              		.cfi_def_cfa_offset 4
 3610              		.cfi_offset 7, -4
 3611 0002 00AF     		add	r7, sp, #0
 3612              		.cfi_def_cfa_register 7
 838:bluetooth_rxtx.c **** 	/*
 839:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 840:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 841:bluetooth_rxtx.c **** 	 * clock_start().
 842:bluetooth_rxtx.c **** 	 */
 843:bluetooth_rxtx.c **** 
 844:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 845:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3613              		.loc 1 845 0
 3614 0004 0C4B     		ldr	r3, .L160
 3615 0006 0222     		movs	r2, #2
 3616 0008 1A60     		str	r2, [r3]
 846:bluetooth_rxtx.c **** 	clkn = 0;
 3617              		.loc 1 846 0
 3618 000a 0C4B     		ldr	r3, .L160+4
 3619 000c 0022     		movs	r2, #0
 3620 000e 1A60     		str	r2, [r3]
 847:bluetooth_rxtx.c **** 
 848:bluetooth_rxtx.c **** #ifdef TC13BADGE
 849:bluetooth_rxtx.c **** 	/*
 850:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 851:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 852:bluetooth_rxtx.c **** 	 */
 853:bluetooth_rxtx.c **** 	T0PR = 2;
 854:bluetooth_rxtx.c **** #else
 855:bluetooth_rxtx.c **** 	/*
 856:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 857:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 858:bluetooth_rxtx.c **** 	 */
 859:bluetooth_rxtx.c **** 	T0PR = 4;
 3621              		.loc 1 859 0
 3622 0010 0B4B     		ldr	r3, .L160+8
 3623 0012 0422     		movs	r2, #4
 3624 0014 1A60     		str	r2, [r3]
 860:bluetooth_rxtx.c **** #endif
 861:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 862:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3625              		.loc 1 862 0
 3626 0016 0B4B     		ldr	r3, .L160+12
 3627 0018 40F63442 		movw	r2, #3124
 3628 001c 1A60     		str	r2, [r3]
 863:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3629              		.loc 1 863 0
 3630 001e 0A4B     		ldr	r3, .L160+16
 3631 0020 0322     		movs	r2, #3
 3632 0022 1A60     		str	r2, [r3]
 864:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3633              		.loc 1 864 0
 3634 0024 094B     		ldr	r3, .L160+20
 3635 0026 0222     		movs	r2, #2
 3636 0028 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 79


 865:bluetooth_rxtx.c **** 
 866:bluetooth_rxtx.c **** 	/* start timer */
 867:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3637              		.loc 1 867 0
 3638 002a 034B     		ldr	r3, .L160
 3639 002c 0122     		movs	r2, #1
 3640 002e 1A60     		str	r2, [r3]
 868:bluetooth_rxtx.c **** }
 3641              		.loc 1 868 0
 3642 0030 BD46     		mov	sp, r7
 3643              		.cfi_def_cfa_register 13
 3644              		@ sp needed
 3645 0032 5DF8047B 		ldr	r7, [sp], #4
 3646              		.cfi_restore 7
 3647              		.cfi_def_cfa_offset 0
 3648 0036 7047     		bx	lr
 3649              	.L161:
 3650              		.align	2
 3651              	.L160:
 3652 0038 04400040 		.word	1073758212
 3653 003c 00000000 		.word	clkn
 3654 0040 0C400040 		.word	1073758220
 3655 0044 18400040 		.word	1073758232
 3656 0048 14400040 		.word	1073758228
 3657 004c 00E100E0 		.word	-536813312
 3658              		.cfi_endproc
 3659              	.LFE10:
 3661              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3662              		.align	2
 3663              		.global	TIMER0_IRQHandler
 3664              		.thumb
 3665              		.thumb_func
 3667              	TIMER0_IRQHandler:
 3668              	.LFB11:
 869:bluetooth_rxtx.c **** 
 870:bluetooth_rxtx.c **** /* Update CLKN. */
 871:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 872:bluetooth_rxtx.c **** {
 3669              		.loc 1 872 0
 3670              		.cfi_startproc
 3671              		@ args = 0, pretend = 0, frame = 8
 3672              		@ frame_needed = 1, uses_anonymous_args = 0
 3673              		@ link register save eliminated.
 3674 0000 80B4     		push	{r7}
 3675              		.cfi_def_cfa_offset 4
 3676              		.cfi_offset 7, -4
 3677 0002 83B0     		sub	sp, sp, #12
 3678              		.cfi_def_cfa_offset 16
 3679 0004 00AF     		add	r7, sp, #0
 3680              		.cfi_def_cfa_register 7
 873:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
 874:bluetooth_rxtx.c **** 	u32 next;
 875:bluetooth_rxtx.c **** 	u32 le_clk;
 876:bluetooth_rxtx.c **** 
 877:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3681              		.loc 1 877 0
 3682 0006 4FF04023 		mov	r3, #1073758208
ARM GAS  /tmp/ccTf0kks.s 			page 80


 3683 000a 1B68     		ldr	r3, [r3]
 3684 000c 03F00103 		and	r3, r3, #1
 3685 0010 002B     		cmp	r3, #0
 3686 0012 6DD0     		beq	.L162
 878:bluetooth_rxtx.c **** 
 879:bluetooth_rxtx.c **** 		clkn++;
 3687              		.loc 1 879 0
 3688 0014 394B     		ldr	r3, .L172
 3689 0016 1B68     		ldr	r3, [r3]
 3690 0018 0133     		adds	r3, r3, #1
 3691 001a 384A     		ldr	r2, .L172
 3692 001c 1360     		str	r3, [r2]
 880:bluetooth_rxtx.c **** 		next = clkn;
 3693              		.loc 1 880 0
 3694 001e 374B     		ldr	r3, .L172
 3695 0020 1B68     		ldr	r3, [r3]
 3696 0022 7B60     		str	r3, [r7, #4]
 881:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 3697              		.loc 1 881 0
 3698 0024 364B     		ldr	r3, .L172+4
 3699 0026 9B69     		ldr	r3, [r3, #24]
 3700 0028 7A68     		ldr	r2, [r7, #4]
 3701 002a D31A     		subs	r3, r2, r3
 3702 002c 03F00303 		and	r3, r3, #3
 3703 0030 3B60     		str	r3, [r7]
 882:bluetooth_rxtx.c **** 
 883:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 884:bluetooth_rxtx.c **** 
 885:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 886:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 3704              		.loc 1 886 0
 3705 0032 344B     		ldr	r3, .L172+8
 3706 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3707 0036 002B     		cmp	r3, #0
 3708 0038 03D0     		beq	.L164
 3709              		.loc 1 886 0 is_stmt 0 discriminator 1
 3710 003a 324B     		ldr	r3, .L172+8
 3711 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3712 003e 012B     		cmp	r3, #1
 3713 0040 09D1     		bne	.L165
 3714              	.L164:
 887:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3715              		.loc 1 887 0 is_stmt 1
 3716 0042 7B68     		ldr	r3, [r7, #4]
 3717 0044 03F07F03 		and	r3, r3, #127
 3718 0048 002B     		cmp	r3, #0
 3719 004a 03D1     		bne	.L166
 888:bluetooth_rxtx.c **** 				do_hop = 1;
 3720              		.loc 1 888 0
 3721 004c 2E4B     		ldr	r3, .L172+12
 3722 004e 0122     		movs	r2, #1
 3723 0050 1A70     		strb	r2, [r3]
 887:bluetooth_rxtx.c **** 			if ((next & 0x7f) == 0)
 3724              		.loc 1 887 0
 3725 0052 37E0     		b	.L167
 3726              	.L166:
 3727 0054 36E0     		b	.L167
ARM GAS  /tmp/ccTf0kks.s 			page 81


 3728              	.L165:
 889:bluetooth_rxtx.c **** 		}
 890:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 891:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 3729              		.loc 1 891 0
 3730 0056 2B4B     		ldr	r3, .L172+8
 3731 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3732 005a 022B     		cmp	r3, #2
 3733 005c 08D1     		bne	.L168
 892:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 3734              		.loc 1 892 0
 3735 005e 7B68     		ldr	r3, [r7, #4]
 3736 0060 03F00103 		and	r3, r3, #1
 3737 0064 002B     		cmp	r3, #0
 3738 0066 2DD1     		bne	.L167
 893:bluetooth_rxtx.c **** 				do_hop = 1;
 3739              		.loc 1 893 0
 3740 0068 274B     		ldr	r3, .L172+12
 3741 006a 0122     		movs	r2, #1
 3742 006c 1A70     		strb	r2, [r3]
 3743 006e 29E0     		b	.L167
 3744              	.L168:
 894:bluetooth_rxtx.c **** 		}
 895:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 896:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 3745              		.loc 1 896 0
 3746 0070 244B     		ldr	r3, .L172+8
 3747 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3748 0074 032B     		cmp	r3, #3
 3749 0076 25D1     		bne	.L167
 897:bluetooth_rxtx.c **** 			// Only hop if connected
 898:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 3750              		.loc 1 898 0
 3751 0078 214B     		ldr	r3, .L172+4
 3752 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3753 007c 032B     		cmp	r3, #3
 3754 007e 21D1     		bne	.L167
 3755              		.loc 1 898 0 is_stmt 0 discriminator 1
 3756 0080 3B68     		ldr	r3, [r7]
 3757 0082 002B     		cmp	r3, #0
 3758 0084 1ED1     		bne	.L167
 899:bluetooth_rxtx.c **** 				--le.interval_timer;
 3759              		.loc 1 899 0 is_stmt 1
 3760 0086 1E4B     		ldr	r3, .L172+4
 3761 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3762 008a 9BB2     		uxth	r3, r3
 3763 008c 013B     		subs	r3, r3, #1
 3764 008e 9AB2     		uxth	r2, r3
 3765 0090 1B4B     		ldr	r3, .L172+4
 3766 0092 9A83     		strh	r2, [r3, #28]	@ movhi
 900:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3767              		.loc 1 900 0
 3768 0094 1A4B     		ldr	r3, .L172+4
 3769 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3770 0098 9BB2     		uxth	r3, r3
 3771 009a 002B     		cmp	r3, #0
 3772 009c 0ED1     		bne	.L170
ARM GAS  /tmp/ccTf0kks.s 			page 82


 901:bluetooth_rxtx.c **** 					do_hop = 1;
 3773              		.loc 1 901 0
 3774 009e 1A4B     		ldr	r3, .L172+12
 3775 00a0 0122     		movs	r2, #1
 3776 00a2 1A70     		strb	r2, [r3]
 902:bluetooth_rxtx.c **** 					++le.conn_count;
 3777              		.loc 1 902 0
 3778 00a4 164B     		ldr	r3, .L172+4
 3779 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 3780 00a8 9BB2     		uxth	r3, r3
 3781 00aa 0133     		adds	r3, r3, #1
 3782 00ac 9AB2     		uxth	r2, r3
 3783 00ae 144B     		ldr	r3, .L172+4
 3784 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
 903:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3785              		.loc 1 903 0
 3786 00b2 134B     		ldr	r3, .L172+4
 3787 00b4 DA8B     		ldrh	r2, [r3, #30]
 3788 00b6 124B     		ldr	r3, .L172+4
 3789 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 3790 00ba 03E0     		b	.L167
 3791              	.L170:
 904:bluetooth_rxtx.c **** 				} else {
 905:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 3792              		.loc 1 905 0
 3793 00bc 134B     		ldr	r3, .L172+16
 3794 00be 4FF48072 		mov	r2, #256
 3795 00c2 1A60     		str	r2, [r3]
 3796              	.L167:
 906:bluetooth_rxtx.c **** 				}
 907:bluetooth_rxtx.c **** 			}
 908:bluetooth_rxtx.c **** 		}
 909:bluetooth_rxtx.c **** 
 910:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
 911:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 3797              		.loc 1 911 0
 3798 00c4 7B68     		ldr	r3, [r7, #4]
 3799 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 3800 00ca 002B     		cmp	r3, #0
 3801 00cc 02D1     		bne	.L171
 912:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 3802              		.loc 1 912 0
 3803 00ce 104B     		ldr	r3, .L172+20
 3804 00d0 0122     		movs	r2, #1
 3805 00d2 1A70     		strb	r2, [r3]
 3806              	.L171:
 913:bluetooth_rxtx.c **** 
 914:bluetooth_rxtx.c **** 		/* Ack interrupt */
 915:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
 3807              		.loc 1 915 0
 3808 00d4 0F4A     		ldr	r2, .L172+24
 3809 00d6 104B     		ldr	r3, .L172+28
 3810 00d8 1B68     		ldr	r3, [r3]
 3811 00da C3F54363 		rsb	r3, r3, #3120
 3812 00de 0433     		adds	r3, r3, #4
 3813 00e0 1360     		str	r3, [r2]
 916:bluetooth_rxtx.c **** 		clock_trim = 0;
ARM GAS  /tmp/ccTf0kks.s 			page 83


 3814              		.loc 1 916 0
 3815 00e2 0D4B     		ldr	r3, .L172+28
 3816 00e4 0022     		movs	r2, #0
 3817 00e6 1A60     		str	r2, [r3]
 917:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 3818              		.loc 1 917 0
 3819 00e8 4FF04023 		mov	r3, #1073758208
 3820 00ec 0122     		movs	r2, #1
 3821 00ee 1A60     		str	r2, [r3]
 3822              	.L162:
 918:bluetooth_rxtx.c **** 	}
 919:bluetooth_rxtx.c **** }
 3823              		.loc 1 919 0
 3824 00f0 0C37     		adds	r7, r7, #12
 3825              		.cfi_def_cfa_offset 4
 3826 00f2 BD46     		mov	sp, r7
 3827              		.cfi_def_cfa_register 13
 3828              		@ sp needed
 3829 00f4 5DF8047B 		ldr	r7, [sp], #4
 3830              		.cfi_restore 7
 3831              		.cfi_def_cfa_offset 0
 3832 00f8 7047     		bx	lr
 3833              	.L173:
 3834 00fa 00BF     		.align	2
 3835              	.L172:
 3836 00fc 00000000 		.word	clkn
 3837 0100 00000000 		.word	le
 3838 0104 00000000 		.word	hop_mode
 3839 0108 00000000 		.word	do_hop
 3840 010c 3CC00920 		.word	537509948
 3841 0110 00000000 		.word	keepalive_trigger
 3842 0114 18400040 		.word	1073758232
 3843 0118 00000000 		.word	clock_trim
 3844              		.cfi_endproc
 3845              	.LFE11:
 3847              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3848              		.align	2
 3849              		.global	EINT3_IRQHandler
 3850              		.thumb
 3851              		.thumb_func
 3853              	EINT3_IRQHandler:
 3854              	.LFB12:
 920:bluetooth_rxtx.c **** 
 921:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 922:bluetooth_rxtx.c **** #ifndef TC13BADGE
 923:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 924:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 925:bluetooth_rxtx.c **** {
 3855              		.loc 1 925 0
 3856              		.cfi_startproc
 3857              		@ args = 0, pretend = 0, frame = 0
 3858              		@ frame_needed = 1, uses_anonymous_args = 0
 3859              		@ link register save eliminated.
 3860 0000 80B4     		push	{r7}
 3861              		.cfi_def_cfa_offset 4
 3862              		.cfi_offset 7, -4
 3863 0002 00AF     		add	r7, sp, #0
ARM GAS  /tmp/ccTf0kks.s 			page 84


 3864              		.cfi_def_cfa_register 7
 926:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 927:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 3865              		.loc 1 927 0
 3866 0004 0B4B     		ldr	r3, .L175
 3867 0006 0422     		movs	r2, #4
 3868 0008 1A60     		str	r2, [r3]
 928:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 3869              		.loc 1 928 0
 3870 000a 0B4B     		ldr	r3, .L175+4
 3871 000c 0122     		movs	r2, #1
 3872 000e 1A70     		strb	r2, [r3]
 929:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 3873              		.loc 1 929 0
 3874 0010 0A4B     		ldr	r3, .L175+8
 3875 0012 1B68     		ldr	r3, [r3]
 3876 0014 C3F31303 		ubfx	r3, r3, #0, #20
 3877 0018 40F63542 		movw	r2, #3125
 3878 001c 02FB03F2 		mul	r2, r2, r3
 3879 0020 074B     		ldr	r3, .L175+12
 3880 0022 1B68     		ldr	r3, [r3]
 3881 0024 1344     		add	r3, r3, r2
 3882 0026 074A     		ldr	r2, .L175+16
 3883 0028 1360     		str	r3, [r2]
 930:bluetooth_rxtx.c **** }
 3884              		.loc 1 930 0
 3885 002a BD46     		mov	sp, r7
 3886              		.cfi_def_cfa_register 13
 3887              		@ sp needed
 3888 002c 5DF8047B 		ldr	r7, [sp], #4
 3889              		.cfi_restore 7
 3890              		.cfi_def_cfa_offset 0
 3891 0030 7047     		bx	lr
 3892              	.L176:
 3893 0032 00BF     		.align	2
 3894              	.L175:
 3895 0034 AC800240 		.word	1073905836
 3896 0038 00000000 		.word	cs_trigger
 3897 003c 00000000 		.word	clkn
 3898 0040 08400040 		.word	1073758216
 3899 0044 00000000 		.word	cs_timestamp
 3900              		.cfi_endproc
 3901              	.LFE12:
 3903              		.global	__aeabi_ui2d
 3904              		.global	__aeabi_dmul
 3905              		.global	__aeabi_ddiv
 3906              		.global	__aeabi_dadd
 3907              		.global	__aeabi_d2uiz
 3908              		.section	.text.msleep,"ax",%progbits
 3909              		.align	2
 3910              		.thumb
 3911              		.thumb_func
 3913              	msleep:
 3914              	.LFB13:
 931:bluetooth_rxtx.c **** #endif // TC13BADGE
 932:bluetooth_rxtx.c **** 
 933:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
ARM GAS  /tmp/ccTf0kks.s 			page 85


 934:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 935:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 936:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 937:bluetooth_rxtx.c **** {
 3915              		.loc 1 937 0
 3916              		.cfi_startproc
 3917              		@ args = 0, pretend = 0, frame = 16
 3918              		@ frame_needed = 1, uses_anonymous_args = 0
 3919 0000 B0B5     		push	{r4, r5, r7, lr}
 3920              		.cfi_def_cfa_offset 16
 3921              		.cfi_offset 4, -16
 3922              		.cfi_offset 5, -12
 3923              		.cfi_offset 7, -8
 3924              		.cfi_offset 14, -4
 3925 0002 84B0     		sub	sp, sp, #16
 3926              		.cfi_def_cfa_offset 32
 3927 0004 00AF     		add	r7, sp, #0
 3928              		.cfi_def_cfa_register 7
 3929 0006 7860     		str	r0, [r7, #4]
 938:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 312.5 / 1000;  // millis -> clkn ticks
 3930              		.loc 1 938 0
 3931 0008 1B4B     		ldr	r3, .L179+8
 3932 000a 1B68     		ldr	r3, [r3]
 3933 000c 1846     		mov	r0, r3
 3934 000e FFF7FEFF 		bl	__aeabi_ui2d
 3935 0012 0446     		mov	r4, r0
 3936 0014 0D46     		mov	r5, r1
 3937 0016 7868     		ldr	r0, [r7, #4]
 3938 0018 FFF7FEFF 		bl	__aeabi_ui2d
 3939 001c 0246     		mov	r2, r0
 3940 001e 0B46     		mov	r3, r1
 3941 0020 1046     		mov	r0, r2
 3942 0022 1946     		mov	r1, r3
 3943 0024 12A3     		adr	r3, .L179
 3944 0026 D3E90023 		ldrd	r2, [r3]
 3945 002a FFF7FEFF 		bl	__aeabi_dmul
 3946 002e 0246     		mov	r2, r0
 3947 0030 0B46     		mov	r3, r1
 3948 0032 1046     		mov	r0, r2
 3949 0034 1946     		mov	r1, r3
 3950 0036 4FF00002 		mov	r2, #0
 3951 003a 104B     		ldr	r3, .L179+12
 3952 003c FFF7FEFF 		bl	__aeabi_ddiv
 3953 0040 0246     		mov	r2, r0
 3954 0042 0B46     		mov	r3, r1
 3955 0044 2046     		mov	r0, r4
 3956 0046 2946     		mov	r1, r5
 3957 0048 FFF7FEFF 		bl	__aeabi_dadd
 3958 004c 0246     		mov	r2, r0
 3959 004e 0B46     		mov	r3, r1
 3960 0050 1046     		mov	r0, r2
 3961 0052 1946     		mov	r1, r3
 3962 0054 FFF7FEFF 		bl	__aeabi_d2uiz
 3963 0058 0346     		mov	r3, r0
 3964 005a FB60     		str	r3, [r7, #12]
 3965              	.L178:
 939:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
ARM GAS  /tmp/ccTf0kks.s 			page 86


 3966              		.loc 1 939 0 discriminator 1
 3967 005c 064B     		ldr	r3, .L179+8
 3968 005e 1A68     		ldr	r2, [r3]
 3969 0060 FB68     		ldr	r3, [r7, #12]
 3970 0062 9A42     		cmp	r2, r3
 3971 0064 FAD3     		bcc	.L178
 940:bluetooth_rxtx.c **** }
 3972              		.loc 1 940 0
 3973 0066 1037     		adds	r7, r7, #16
 3974              		.cfi_def_cfa_offset 16
 3975 0068 BD46     		mov	sp, r7
 3976              		.cfi_def_cfa_register 13
 3977              		@ sp needed
 3978 006a B0BD     		pop	{r4, r5, r7, pc}
 3979              	.L180:
 3980 006c AFF30080 		.align	3
 3981              	.L179:
 3982 0070 00000000 		.word	0
 3983 0074 00887340 		.word	1081313280
 3984 0078 00000000 		.word	clkn
 3985 007c 00408F40 		.word	1083129856
 3986              		.cfi_endproc
 3987              	.LFE13:
 3989              		.section	.text.dma_init,"ax",%progbits
 3990              		.align	2
 3991              		.thumb
 3992              		.thumb_func
 3994              	dma_init:
 3995              	.LFB14:
 941:bluetooth_rxtx.c **** 
 942:bluetooth_rxtx.c **** static void dma_init()
 943:bluetooth_rxtx.c **** {
 3996              		.loc 1 943 0
 3997              		.cfi_startproc
 3998              		@ args = 0, pretend = 0, frame = 0
 3999              		@ frame_needed = 1, uses_anonymous_args = 0
 4000              		@ link register save eliminated.
 4001 0000 80B4     		push	{r7}
 4002              		.cfi_def_cfa_offset 4
 4003              		.cfi_offset 7, -4
 4004 0002 00AF     		add	r7, sp, #0
 4005              		.cfi_def_cfa_register 7
 944:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 945:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4006              		.loc 1 945 0
 4007 0004 3F4A     		ldr	r2, .L183
 4008 0006 3F4B     		ldr	r3, .L183
 4009 0008 1B68     		ldr	r3, [r3]
 4010 000a 43F00053 		orr	r3, r3, #536870912
 4011 000e 1360     		str	r3, [r2]
 946:bluetooth_rxtx.c **** 
 947:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
 948:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4012              		.loc 1 948 0
 4013 0010 3D4B     		ldr	r3, .L183+4
 4014 0012 0022     		movs	r2, #0
 4015 0014 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 87


 949:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4016              		.loc 1 949 0
 4017 0016 3D4B     		ldr	r3, .L183+8
 4018 0018 0022     		movs	r2, #0
 4019 001a 1A60     		str	r2, [r3]
 950:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4020              		.loc 1 950 0
 4021 001c 3C4B     		ldr	r3, .L183+12
 4022 001e 0022     		movs	r2, #0
 4023 0020 1A60     		str	r2, [r3]
 951:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4024              		.loc 1 951 0
 4025 0022 3C4B     		ldr	r3, .L183+16
 4026 0024 0022     		movs	r2, #0
 4027 0026 1A60     		str	r2, [r3]
 952:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4028              		.loc 1 952 0
 4029 0028 3B4B     		ldr	r3, .L183+20
 4030 002a 0022     		movs	r2, #0
 4031 002c 1A60     		str	r2, [r3]
 953:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4032              		.loc 1 953 0
 4033 002e 3B4B     		ldr	r3, .L183+24
 4034 0030 0022     		movs	r2, #0
 4035 0032 1A60     		str	r2, [r3]
 954:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4036              		.loc 1 954 0
 4037 0034 3A4B     		ldr	r3, .L183+28
 4038 0036 0022     		movs	r2, #0
 4039 0038 1A60     		str	r2, [r3]
 955:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4040              		.loc 1 955 0
 4041 003a 3A4B     		ldr	r3, .L183+32
 4042 003c 0022     		movs	r2, #0
 4043 003e 1A60     		str	r2, [r3]
 956:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4044              		.loc 1 956 0
 4045 0040 394B     		ldr	r3, .L183+36
 4046 0042 FF22     		movs	r2, #255
 4047 0044 1A60     		str	r2, [r3]
 957:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4048              		.loc 1 957 0
 4049 0046 394B     		ldr	r3, .L183+40
 4050 0048 FF22     		movs	r2, #255
 4051 004a 1A60     		str	r2, [r3]
 958:bluetooth_rxtx.c **** 
 959:bluetooth_rxtx.c **** 	/* DMA linked lists */
 960:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4052              		.loc 1 960 0
 4053 004c 384B     		ldr	r3, .L183+44
 4054 004e 394A     		ldr	r2, .L183+48
 4055 0050 1A60     		str	r2, [r3]
 961:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4056              		.loc 1 961 0
 4057 0052 394A     		ldr	r2, .L183+52
 4058 0054 364B     		ldr	r3, .L183+44
 4059 0056 5A60     		str	r2, [r3, #4]
ARM GAS  /tmp/ccTf0kks.s 			page 88


 962:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4060              		.loc 1 962 0
 4061 0058 384A     		ldr	r2, .L183+56
 4062 005a 354B     		ldr	r3, .L183+44
 4063 005c 9A60     		str	r2, [r3, #8]
 963:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4064              		.loc 1 963 0
 4065 005e 344B     		ldr	r3, .L183+44
 4066 0060 374A     		ldr	r2, .L183+60
 4067 0062 DA60     		str	r2, [r3, #12]
 964:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 965:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 966:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 967:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 968:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 969:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 970:bluetooth_rxtx.c **** 
 971:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4068              		.loc 1 971 0
 4069 0064 354B     		ldr	r3, .L183+56
 4070 0066 334A     		ldr	r2, .L183+48
 4071 0068 1A60     		str	r2, [r3]
 972:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4072              		.loc 1 972 0
 4073 006a 364A     		ldr	r2, .L183+64
 4074 006c 334B     		ldr	r3, .L183+56
 4075 006e 5A60     		str	r2, [r3, #4]
 973:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4076              		.loc 1 973 0
 4077 0070 2F4A     		ldr	r2, .L183+44
 4078 0072 324B     		ldr	r3, .L183+56
 4079 0074 9A60     		str	r2, [r3, #8]
 974:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4080              		.loc 1 974 0
 4081 0076 314B     		ldr	r3, .L183+56
 4082 0078 314A     		ldr	r2, .L183+60
 4083 007a DA60     		str	r2, [r3, #12]
 975:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 976:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 977:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 978:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 979:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 980:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 981:bluetooth_rxtx.c **** 
 982:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
 983:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4084              		.loc 1 983 0
 4085 007c 324B     		ldr	r3, .L183+68
 4086 007e 4FF08062 		mov	r2, #67108864
 4087 0082 1A60     		str	r2, [r3]
 984:bluetooth_rxtx.c **** 
 985:bluetooth_rxtx.c **** 	/* enable DMA globally */
 986:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4088              		.loc 1 986 0
 4089 0084 314B     		ldr	r3, .L183+72
 4090 0086 0122     		movs	r2, #1
 4091 0088 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 89


 987:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4092              		.loc 1 987 0
 4093 008a 00BF     		nop
 4094              	.L182:
 4095              		.loc 1 987 0 is_stmt 0 discriminator 1
 4096 008c 2F4B     		ldr	r3, .L183+72
 4097 008e 1B68     		ldr	r3, [r3]
 4098 0090 03F00103 		and	r3, r3, #1
 4099 0094 002B     		cmp	r3, #0
 4100 0096 F9D0     		beq	.L182
 988:bluetooth_rxtx.c **** 
 989:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
 990:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4101              		.loc 1 990 0 is_stmt 1
 4102 0098 2D4A     		ldr	r2, .L183+76
 4103 009a 254B     		ldr	r3, .L183+44
 4104 009c 1B68     		ldr	r3, [r3]
 4105 009e 1360     		str	r3, [r2]
 991:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4106              		.loc 1 991 0
 4107 00a0 2C4A     		ldr	r2, .L183+80
 4108 00a2 234B     		ldr	r3, .L183+44
 4109 00a4 5B68     		ldr	r3, [r3, #4]
 4110 00a6 1360     		str	r3, [r2]
 992:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4111              		.loc 1 992 0
 4112 00a8 2B4A     		ldr	r2, .L183+84
 4113 00aa 214B     		ldr	r3, .L183+44
 4114 00ac 9B68     		ldr	r3, [r3, #8]
 4115 00ae 1360     		str	r3, [r2]
 993:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4116              		.loc 1 993 0
 4117 00b0 2A4A     		ldr	r2, .L183+88
 4118 00b2 1F4B     		ldr	r3, .L183+44
 4119 00b4 DB68     		ldr	r3, [r3, #12]
 4120 00b6 1360     		str	r3, [r2]
 994:bluetooth_rxtx.c **** 	DMACC0Config =
 4121              		.loc 1 994 0
 4122 00b8 134B     		ldr	r3, .L183+4
 4123 00ba 4DF20602 		movw	r2, #53254
 4124 00be 1A60     		str	r2, [r3]
 995:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
 996:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
 997:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
 998:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
 999:bluetooth_rxtx.c **** 
1000:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4125              		.loc 1 1000 0
 4126 00c0 274B     		ldr	r3, .L183+92
 4127 00c2 1B68     		ldr	r3, [r3]
 4128 00c4 1B0D     		lsrs	r3, r3, #20
 4129 00c6 DBB2     		uxtb	r3, r3
 4130 00c8 264A     		ldr	r2, .L183+96
 4131 00ca 1360     		str	r3, [r2]
1001:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4132              		.loc 1 1001 0
 4133 00cc 244B     		ldr	r3, .L183+92
ARM GAS  /tmp/ccTf0kks.s 			page 90


 4134 00ce 1B68     		ldr	r3, [r3]
 4135 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4136 00d4 40F63542 		movw	r2, #3125
 4137 00d8 02FB03F2 		mul	r2, r2, r3
 4138 00dc 224B     		ldr	r3, .L183+100
 4139 00de 1B68     		ldr	r3, [r3]
 4140 00e0 1344     		add	r3, r3, r2
 4141 00e2 224A     		ldr	r2, .L183+104
 4142 00e4 1360     		str	r3, [r2]
1002:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4143              		.loc 1 1002 0
 4144 00e6 224B     		ldr	r3, .L183+108
 4145 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4146 00ea 9AB2     		uxth	r2, r3
 4147 00ec 214B     		ldr	r3, .L183+112
 4148 00ee 1A80     		strh	r2, [r3]	@ movhi
1003:bluetooth_rxtx.c **** 
1004:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1005:bluetooth_rxtx.c **** 	rx_tc = 0;
 4149              		.loc 1 1005 0
 4150 00f0 214B     		ldr	r3, .L183+116
 4151 00f2 0022     		movs	r2, #0
 4152 00f4 1A60     		str	r2, [r3]
1006:bluetooth_rxtx.c **** 	rx_err = 0;
 4153              		.loc 1 1006 0
 4154 00f6 214B     		ldr	r3, .L183+120
 4155 00f8 0022     		movs	r2, #0
 4156 00fa 1A60     		str	r2, [r3]
1007:bluetooth_rxtx.c **** }
 4157              		.loc 1 1007 0
 4158 00fc BD46     		mov	sp, r7
 4159              		.cfi_def_cfa_register 13
 4160              		@ sp needed
 4161 00fe 5DF8047B 		ldr	r7, [sp], #4
 4162              		.cfi_restore 7
 4163              		.cfi_def_cfa_offset 0
 4164 0102 7047     		bx	lr
 4165              	.L184:
 4166              		.align	2
 4167              	.L183:
 4168 0104 C4C00F40 		.word	1074774212
 4169 0108 10410050 		.word	1342193936
 4170 010c 30410050 		.word	1342193968
 4171 0110 50410050 		.word	1342194000
 4172 0114 70410050 		.word	1342194032
 4173 0118 90410050 		.word	1342194064
 4174 011c B0410050 		.word	1342194096
 4175 0120 D0410050 		.word	1342194128
 4176 0124 F0410050 		.word	1342194160
 4177 0128 08400050 		.word	1342193672
 4178 012c 10400050 		.word	1342193680
 4179 0130 00000000 		.word	rx_dma_lli1
 4180 0134 08000340 		.word	1073938440
 4181 0138 00000000 		.word	rxbuf1
 4182 013c 00000000 		.word	rx_dma_lli2
 4183 0140 32900088 		.word	-2013229006
 4184 0144 00000000 		.word	rxbuf2
ARM GAS  /tmp/ccTf0kks.s 			page 91


 4185 0148 80E100E0 		.word	-536813184
 4186 014c 30400050 		.word	1342193712
 4187 0150 00410050 		.word	1342193920
 4188 0154 04410050 		.word	1342193924
 4189 0158 08410050 		.word	1342193928
 4190 015c 0C410050 		.word	1342193932
 4191 0160 00000000 		.word	clkn
 4192 0164 00000000 		.word	active_buf_clkn_high
 4193 0168 08400040 		.word	1073758216
 4194 016c 00000000 		.word	active_buf_clk100ns
 4195 0170 00000000 		.word	channel
 4196 0174 00000000 		.word	active_buf_channel
 4197 0178 00000000 		.word	rx_tc
 4198 017c 00000000 		.word	rx_err
 4199              		.cfi_endproc
 4200              	.LFE14:
 4202              		.section	.text.dma_init_le,"ax",%progbits
 4203              		.align	2
 4204              		.thumb
 4205              		.thumb_func
 4207              	dma_init_le:
 4208              	.LFB15:
1008:bluetooth_rxtx.c **** 
1009:bluetooth_rxtx.c **** static void dma_init_le()
1010:bluetooth_rxtx.c **** {
 4209              		.loc 1 1010 0
 4210              		.cfi_startproc
 4211              		@ args = 0, pretend = 0, frame = 8
 4212              		@ frame_needed = 1, uses_anonymous_args = 0
 4213              		@ link register save eliminated.
 4214 0000 80B4     		push	{r7}
 4215              		.cfi_def_cfa_offset 4
 4216              		.cfi_offset 7, -4
 4217 0002 83B0     		sub	sp, sp, #12
 4218              		.cfi_def_cfa_offset 16
 4219 0004 00AF     		add	r7, sp, #0
 4220              		.cfi_def_cfa_register 7
1011:bluetooth_rxtx.c **** 	int i;
1012:bluetooth_rxtx.c **** 
1013:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1014:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4221              		.loc 1 1014 0
 4222 0006 4B4A     		ldr	r2, .L191
 4223 0008 4A4B     		ldr	r3, .L191
 4224 000a 1B68     		ldr	r3, [r3]
 4225 000c 43F00053 		orr	r3, r3, #536870912
 4226 0010 1360     		str	r3, [r2]
1015:bluetooth_rxtx.c **** 
1016:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1017:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4227              		.loc 1 1017 0
 4228 0012 494B     		ldr	r3, .L191+4
 4229 0014 0022     		movs	r2, #0
 4230 0016 1A60     		str	r2, [r3]
1018:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4231              		.loc 1 1018 0
 4232 0018 484B     		ldr	r3, .L191+8
ARM GAS  /tmp/ccTf0kks.s 			page 92


 4233 001a 0022     		movs	r2, #0
 4234 001c 1A60     		str	r2, [r3]
1019:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4235              		.loc 1 1019 0
 4236 001e 484B     		ldr	r3, .L191+12
 4237 0020 0022     		movs	r2, #0
 4238 0022 1A60     		str	r2, [r3]
1020:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4239              		.loc 1 1020 0
 4240 0024 474B     		ldr	r3, .L191+16
 4241 0026 0022     		movs	r2, #0
 4242 0028 1A60     		str	r2, [r3]
1021:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4243              		.loc 1 1021 0
 4244 002a 474B     		ldr	r3, .L191+20
 4245 002c 0022     		movs	r2, #0
 4246 002e 1A60     		str	r2, [r3]
1022:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4247              		.loc 1 1022 0
 4248 0030 464B     		ldr	r3, .L191+24
 4249 0032 0022     		movs	r2, #0
 4250 0034 1A60     		str	r2, [r3]
1023:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4251              		.loc 1 1023 0
 4252 0036 464B     		ldr	r3, .L191+28
 4253 0038 0022     		movs	r2, #0
 4254 003a 1A60     		str	r2, [r3]
1024:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4255              		.loc 1 1024 0
 4256 003c 454B     		ldr	r3, .L191+32
 4257 003e 0022     		movs	r2, #0
 4258 0040 1A60     		str	r2, [r3]
1025:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4259              		.loc 1 1025 0
 4260 0042 454B     		ldr	r3, .L191+36
 4261 0044 FF22     		movs	r2, #255
 4262 0046 1A60     		str	r2, [r3]
1026:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4263              		.loc 1 1026 0
 4264 0048 444B     		ldr	r3, .L191+40
 4265 004a FF22     		movs	r2, #255
 4266 004c 1A60     		str	r2, [r3]
1027:bluetooth_rxtx.c **** 
1028:bluetooth_rxtx.c **** 	/* enable DMA globally */
1029:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4267              		.loc 1 1029 0
 4268 004e 444B     		ldr	r3, .L191+44
 4269 0050 0122     		movs	r2, #1
 4270 0052 1A60     		str	r2, [r3]
1030:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4271              		.loc 1 1030 0
 4272 0054 00BF     		nop
 4273              	.L186:
 4274              		.loc 1 1030 0 is_stmt 0 discriminator 1
 4275 0056 424B     		ldr	r3, .L191+44
 4276 0058 1B68     		ldr	r3, [r3]
 4277 005a 03F00103 		and	r3, r3, #1
ARM GAS  /tmp/ccTf0kks.s 			page 93


 4278 005e 002B     		cmp	r3, #0
 4279 0060 F9D0     		beq	.L186
1031:bluetooth_rxtx.c **** 
1032:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4280              		.loc 1 1032 0 is_stmt 1
 4281 0062 0023     		movs	r3, #0
 4282 0064 7B60     		str	r3, [r7, #4]
 4283 0066 2AE0     		b	.L187
 4284              	.L190:
1033:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4285              		.loc 1 1033 0
 4286 0068 3E4A     		ldr	r2, .L191+48
 4287 006a 7B68     		ldr	r3, [r7, #4]
 4288 006c 1B01     		lsls	r3, r3, #4
 4289 006e 1344     		add	r3, r3, r2
 4290 0070 3D4A     		ldr	r2, .L191+52
 4291 0072 1A60     		str	r2, [r3]
1034:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4292              		.loc 1 1034 0
 4293 0074 7B68     		ldr	r3, [r7, #4]
 4294 0076 9B00     		lsls	r3, r3, #2
 4295 0078 3C4A     		ldr	r2, .L191+56
 4296 007a 1344     		add	r3, r3, r2
 4297 007c 1946     		mov	r1, r3
 4298 007e 394A     		ldr	r2, .L191+48
 4299 0080 7B68     		ldr	r3, [r7, #4]
 4300 0082 1B01     		lsls	r3, r3, #4
 4301 0084 1344     		add	r3, r3, r2
 4302 0086 5960     		str	r1, [r3, #4]
1035:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4303              		.loc 1 1035 0
 4304 0088 7B68     		ldr	r3, [r7, #4]
 4305 008a 092B     		cmp	r3, #9
 4306 008c 06DC     		bgt	.L188
 4307              		.loc 1 1035 0 is_stmt 0 discriminator 1
 4308 008e 7B68     		ldr	r3, [r7, #4]
 4309 0090 0133     		adds	r3, r3, #1
 4310 0092 1B01     		lsls	r3, r3, #4
 4311 0094 334A     		ldr	r2, .L191+48
 4312 0096 1344     		add	r3, r3, r2
 4313 0098 1A46     		mov	r2, r3
 4314 009a 00E0     		b	.L189
 4315              	.L188:
 4316              		.loc 1 1035 0 discriminator 2
 4317 009c 0022     		movs	r2, #0
 4318              	.L189:
 4319              		.loc 1 1035 0 discriminator 4
 4320 009e 3149     		ldr	r1, .L191+48
 4321 00a0 7B68     		ldr	r3, [r7, #4]
 4322 00a2 1B01     		lsls	r3, r3, #4
 4323 00a4 0B44     		add	r3, r3, r1
 4324 00a6 0833     		adds	r3, r3, #8
 4325 00a8 1A60     		str	r2, [r3]
1036:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4326              		.loc 1 1036 0 is_stmt 1 discriminator 4
 4327 00aa 2E4A     		ldr	r2, .L191+48
 4328 00ac 7B68     		ldr	r3, [r7, #4]
ARM GAS  /tmp/ccTf0kks.s 			page 94


 4329 00ae 1B01     		lsls	r3, r3, #4
 4330 00b0 1344     		add	r3, r3, r2
 4331 00b2 0833     		adds	r3, r3, #8
 4332 00b4 2E4A     		ldr	r2, .L191+60
 4333 00b6 5A60     		str	r2, [r3, #4]
1032:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4334              		.loc 1 1032 0 discriminator 4
 4335 00b8 7B68     		ldr	r3, [r7, #4]
 4336 00ba 0133     		adds	r3, r3, #1
 4337 00bc 7B60     		str	r3, [r7, #4]
 4338              	.L187:
1032:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4339              		.loc 1 1032 0 is_stmt 0 discriminator 2
 4340 00be 7B68     		ldr	r3, [r7, #4]
 4341 00c0 0A2B     		cmp	r3, #10
 4342 00c2 D1DD     		ble	.L190
1037:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1038:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1039:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1040:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1041:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1042:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
1043:bluetooth_rxtx.c **** 	}
1044:bluetooth_rxtx.c **** 
1045:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1046:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4343              		.loc 1 1046 0 is_stmt 1
 4344 00c4 2B4A     		ldr	r2, .L191+64
 4345 00c6 274B     		ldr	r3, .L191+48
 4346 00c8 1B68     		ldr	r3, [r3]
 4347 00ca 1360     		str	r3, [r2]
1047:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4348              		.loc 1 1047 0
 4349 00cc 2A4A     		ldr	r2, .L191+68
 4350 00ce 254B     		ldr	r3, .L191+48
 4351 00d0 5B68     		ldr	r3, [r3, #4]
 4352 00d2 1360     		str	r3, [r2]
1048:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4353              		.loc 1 1048 0
 4354 00d4 294A     		ldr	r2, .L191+72
 4355 00d6 234B     		ldr	r3, .L191+48
 4356 00d8 9B68     		ldr	r3, [r3, #8]
 4357 00da 1360     		str	r3, [r2]
1049:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4358              		.loc 1 1049 0
 4359 00dc 284A     		ldr	r2, .L191+76
 4360 00de 214B     		ldr	r3, .L191+48
 4361 00e0 DB68     		ldr	r3, [r3, #12]
 4362 00e2 1360     		str	r3, [r2]
1050:bluetooth_rxtx.c **** 	DMACC0Config =
 4363              		.loc 1 1050 0
 4364 00e4 144B     		ldr	r3, .L191+4
 4365 00e6 4DF20602 		movw	r2, #53254
 4366 00ea 1A60     		str	r2, [r3]
1051:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1052:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1053:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
ARM GAS  /tmp/ccTf0kks.s 			page 95


1054:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1055:bluetooth_rxtx.c **** 
1056:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4367              		.loc 1 1056 0
 4368 00ec 254B     		ldr	r3, .L191+80
 4369 00ee 1B68     		ldr	r3, [r3]
 4370 00f0 1B0D     		lsrs	r3, r3, #20
 4371 00f2 DBB2     		uxtb	r3, r3
 4372 00f4 244A     		ldr	r2, .L191+84
 4373 00f6 1360     		str	r3, [r2]
1057:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4374              		.loc 1 1057 0
 4375 00f8 224B     		ldr	r3, .L191+80
 4376 00fa 1B68     		ldr	r3, [r3]
 4377 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4378 0100 40F63542 		movw	r2, #3125
 4379 0104 02FB03F2 		mul	r2, r2, r3
 4380 0108 204B     		ldr	r3, .L191+88
 4381 010a 1B68     		ldr	r3, [r3]
 4382 010c 1344     		add	r3, r3, r2
 4383 010e 204A     		ldr	r2, .L191+92
 4384 0110 1360     		str	r3, [r2]
1058:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4385              		.loc 1 1058 0
 4386 0112 204B     		ldr	r3, .L191+96
 4387 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4388 0116 9AB2     		uxth	r2, r3
 4389 0118 1F4B     		ldr	r3, .L191+100
 4390 011a 1A80     		strh	r2, [r3]	@ movhi
1059:bluetooth_rxtx.c **** 
1060:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1061:bluetooth_rxtx.c **** 	rx_tc = 0;
 4391              		.loc 1 1061 0
 4392 011c 1F4B     		ldr	r3, .L191+104
 4393 011e 0022     		movs	r2, #0
 4394 0120 1A60     		str	r2, [r3]
1062:bluetooth_rxtx.c **** 	rx_err = 0;
 4395              		.loc 1 1062 0
 4396 0122 1F4B     		ldr	r3, .L191+108
 4397 0124 0022     		movs	r2, #0
 4398 0126 1A60     		str	r2, [r3]
1063:bluetooth_rxtx.c **** }
 4399              		.loc 1 1063 0
 4400 0128 0C37     		adds	r7, r7, #12
 4401              		.cfi_def_cfa_offset 4
 4402 012a BD46     		mov	sp, r7
 4403              		.cfi_def_cfa_register 13
 4404              		@ sp needed
 4405 012c 5DF8047B 		ldr	r7, [sp], #4
 4406              		.cfi_restore 7
 4407              		.cfi_def_cfa_offset 0
 4408 0130 7047     		bx	lr
 4409              	.L192:
 4410 0132 00BF     		.align	2
 4411              	.L191:
 4412 0134 C4C00F40 		.word	1074774212
 4413 0138 10410050 		.word	1342193936
ARM GAS  /tmp/ccTf0kks.s 			page 96


 4414 013c 30410050 		.word	1342193968
 4415 0140 50410050 		.word	1342194000
 4416 0144 70410050 		.word	1342194032
 4417 0148 90410050 		.word	1342194064
 4418 014c B0410050 		.word	1342194096
 4419 0150 D0410050 		.word	1342194128
 4420 0154 F0410050 		.word	1342194160
 4421 0158 08400050 		.word	1342193672
 4422 015c 10400050 		.word	1342193680
 4423 0160 30400050 		.word	1342193712
 4424 0164 00000000 		.word	le_dma_lli
 4425 0168 08000340 		.word	1073938440
 4426 016c 00000000 		.word	rxbuf1
 4427 0170 04100088 		.word	-2013261820
 4428 0174 00410050 		.word	1342193920
 4429 0178 04410050 		.word	1342193924
 4430 017c 08410050 		.word	1342193928
 4431 0180 0C410050 		.word	1342193932
 4432 0184 00000000 		.word	clkn
 4433 0188 00000000 		.word	active_buf_clkn_high
 4434 018c 08400040 		.word	1073758216
 4435 0190 00000000 		.word	active_buf_clk100ns
 4436 0194 00000000 		.word	channel
 4437 0198 00000000 		.word	active_buf_channel
 4438 019c 00000000 		.word	rx_tc
 4439 01a0 00000000 		.word	rx_err
 4440              		.cfi_endproc
 4441              	.LFE15:
 4443              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4444              		.align	2
 4445              		.global	bt_stream_dma_handler
 4446              		.thumb
 4447              		.thumb_func
 4449              	bt_stream_dma_handler:
 4450              	.LFB16:
1064:bluetooth_rxtx.c **** 
1065:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4451              		.loc 1 1065 0
 4452              		.cfi_startproc
 4453              		@ args = 0, pretend = 0, frame = 0
 4454              		@ frame_needed = 1, uses_anonymous_args = 0
 4455              		@ link register save eliminated.
 4456 0000 80B4     		push	{r7}
 4457              		.cfi_def_cfa_offset 4
 4458              		.cfi_offset 7, -4
 4459 0002 00AF     		add	r7, sp, #0
 4460              		.cfi_def_cfa_register 7
1066:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4461              		.loc 1 1066 0
 4462 0004 254B     		ldr	r3, .L196
 4463 0006 1B68     		ldr	r3, [r3]
 4464 0008 254A     		ldr	r2, .L196+4
 4465 000a 1360     		str	r3, [r2]
1067:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4466              		.loc 1 1067 0
 4467 000c 254B     		ldr	r3, .L196+8
 4468 000e 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 97


 4469 0010 1B0D     		lsrs	r3, r3, #20
 4470 0012 DBB2     		uxtb	r3, r3
 4471 0014 214A     		ldr	r2, .L196
 4472 0016 1360     		str	r3, [r2]
1068:bluetooth_rxtx.c **** 
1069:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4473              		.loc 1 1069 0
 4474 0018 234B     		ldr	r3, .L196+12
 4475 001a 1B68     		ldr	r3, [r3]
 4476 001c 234A     		ldr	r2, .L196+16
 4477 001e 1360     		str	r3, [r2]
1070:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4478              		.loc 1 1070 0
 4479 0020 204B     		ldr	r3, .L196+8
 4480 0022 1B68     		ldr	r3, [r3]
 4481 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4482 0028 40F63542 		movw	r2, #3125
 4483 002c 02FB03F2 		mul	r2, r2, r3
 4484 0030 1F4B     		ldr	r3, .L196+20
 4485 0032 1B68     		ldr	r3, [r3]
 4486 0034 1344     		add	r3, r3, r2
 4487 0036 1C4A     		ldr	r2, .L196+12
 4488 0038 1360     		str	r3, [r2]
1071:bluetooth_rxtx.c **** 
1072:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4489              		.loc 1 1072 0
 4490 003a 1E4B     		ldr	r3, .L196+24
 4491 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4492 003e 9AB2     		uxth	r2, r3
 4493 0040 1D4B     		ldr	r3, .L196+28
 4494 0042 1A80     		strh	r2, [r3]	@ movhi
1073:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4495              		.loc 1 1073 0
 4496 0044 1D4B     		ldr	r3, .L196+32
 4497 0046 1B88     		ldrh	r3, [r3]	@ movhi
 4498 0048 9AB2     		uxth	r2, r3
 4499 004a 1A4B     		ldr	r3, .L196+24
 4500 004c 1A80     		strh	r2, [r3]	@ movhi
1074:bluetooth_rxtx.c **** 
1075:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1076:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4501              		.loc 1 1076 0
 4502 004e 1C4B     		ldr	r3, .L196+36
 4503 0050 1B68     		ldr	r3, [r3]
 4504 0052 03F00103 		and	r3, r3, #1
 4505 0056 002B     		cmp	r3, #0
 4506 0058 1BD0     		beq	.L193
1077:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4507              		.loc 1 1077 0
 4508 005a 1A4B     		ldr	r3, .L196+40
 4509 005c 1B68     		ldr	r3, [r3]
 4510 005e 03F00103 		and	r3, r3, #1
 4511 0062 002B     		cmp	r3, #0
 4512 0064 07D0     		beq	.L195
1078:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4513              		.loc 1 1078 0
 4514 0066 184B     		ldr	r3, .L196+44
ARM GAS  /tmp/ccTf0kks.s 			page 98


 4515 0068 0122     		movs	r2, #1
 4516 006a 1A60     		str	r2, [r3]
1079:bluetooth_rxtx.c **** 			++rx_tc;
 4517              		.loc 1 1079 0
 4518 006c 174B     		ldr	r3, .L196+48
 4519 006e 1B68     		ldr	r3, [r3]
 4520 0070 0133     		adds	r3, r3, #1
 4521 0072 164A     		ldr	r2, .L196+48
 4522 0074 1360     		str	r3, [r2]
 4523              	.L195:
1080:bluetooth_rxtx.c **** 		}
1081:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4524              		.loc 1 1081 0
 4525 0076 164B     		ldr	r3, .L196+52
 4526 0078 1B68     		ldr	r3, [r3]
 4527 007a 03F00103 		and	r3, r3, #1
 4528 007e 002B     		cmp	r3, #0
 4529 0080 07D0     		beq	.L193
1082:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4530              		.loc 1 1082 0
 4531 0082 144B     		ldr	r3, .L196+56
 4532 0084 0122     		movs	r2, #1
 4533 0086 1A60     		str	r2, [r3]
1083:bluetooth_rxtx.c **** 			++rx_err;
 4534              		.loc 1 1083 0
 4535 0088 134B     		ldr	r3, .L196+60
 4536 008a 1B68     		ldr	r3, [r3]
 4537 008c 0133     		adds	r3, r3, #1
 4538 008e 124A     		ldr	r2, .L196+60
 4539 0090 1360     		str	r3, [r2]
 4540              	.L193:
1084:bluetooth_rxtx.c **** 		}
1085:bluetooth_rxtx.c **** 	}
1086:bluetooth_rxtx.c **** }
 4541              		.loc 1 1086 0
 4542 0092 BD46     		mov	sp, r7
 4543              		.cfi_def_cfa_register 13
 4544              		@ sp needed
 4545 0094 5DF8047B 		ldr	r7, [sp], #4
 4546              		.cfi_restore 7
 4547              		.cfi_def_cfa_offset 0
 4548 0098 7047     		bx	lr
 4549              	.L197:
 4550 009a 00BF     		.align	2
 4551              	.L196:
 4552 009c 00000000 		.word	active_buf_clkn_high
 4553 00a0 00000000 		.word	idle_buf_clkn_high
 4554 00a4 00000000 		.word	clkn
 4555 00a8 00000000 		.word	active_buf_clk100ns
 4556 00ac 00000000 		.word	idle_buf_clk100ns
 4557 00b0 08400040 		.word	1073758216
 4558 00b4 00000000 		.word	active_buf_channel
 4559 00b8 00000000 		.word	idle_buf_channel
 4560 00bc 00000000 		.word	channel
 4561 00c0 00400050 		.word	1342193664
 4562 00c4 04400050 		.word	1342193668
 4563 00c8 08400050 		.word	1342193672
ARM GAS  /tmp/ccTf0kks.s 			page 99


 4564 00cc 00000000 		.word	rx_tc
 4565 00d0 0C400050 		.word	1342193676
 4566 00d4 10400050 		.word	1342193680
 4567 00d8 00000000 		.word	rx_err
 4568              		.cfi_endproc
 4569              	.LFE16:
 4571              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4572              		.align	2
 4573              		.global	DMA_IRQHandler
 4574              		.thumb
 4575              		.thumb_func
 4577              	DMA_IRQHandler:
 4578              	.LFB17:
1087:bluetooth_rxtx.c **** 
1088:bluetooth_rxtx.c **** void DMA_IRQHandler()
1089:bluetooth_rxtx.c **** {
 4579              		.loc 1 1089 0
 4580              		.cfi_startproc
 4581              		@ args = 0, pretend = 0, frame = 0
 4582              		@ frame_needed = 1, uses_anonymous_args = 0
 4583 0000 80B5     		push	{r7, lr}
 4584              		.cfi_def_cfa_offset 8
 4585              		.cfi_offset 7, -8
 4586              		.cfi_offset 14, -4
 4587 0002 00AF     		add	r7, sp, #0
 4588              		.cfi_def_cfa_register 7
1090:bluetooth_rxtx.c **** 	switch (mode) {
 4589              		.loc 1 1090 0
 4590 0004 124B     		ldr	r3, .L202
 4591 0006 1B78     		ldrb	r3, [r3]
 4592 0008 DBB2     		uxtb	r3, r3
 4593 000a 013B     		subs	r3, r3, #1
 4594 000c 0B2B     		cmp	r3, #11
 4595 000e 1ED8     		bhi	.L198
 4596 0010 01A2     		adr	r2, .L201
 4597 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4598 0016 00BF     		.p2align 2
 4599              	.L201:
 4600 0018 49000000 		.word	.L200+1
 4601 001c 4F000000 		.word	.L198+1
 4602 0020 4F000000 		.word	.L198+1
 4603 0024 49000000 		.word	.L200+1
 4604 0028 4F000000 		.word	.L198+1
 4605 002c 4F000000 		.word	.L198+1
 4606 0030 4F000000 		.word	.L198+1
 4607 0034 49000000 		.word	.L200+1
 4608 0038 49000000 		.word	.L200+1
 4609 003c 49000000 		.word	.L200+1
 4610 0040 4F000000 		.word	.L198+1
 4611 0044 49000000 		.word	.L200+1
 4612              		.p2align 1
 4613              	.L200:
1091:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1092:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1093:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1094:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1095:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
ARM GAS  /tmp/ccTf0kks.s 			page 100


1096:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1097:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4614              		.loc 1 1097 0
 4615 0048 FFF7FEFF 		bl	bt_stream_dma_handler
1098:bluetooth_rxtx.c **** 			break;
 4616              		.loc 1 1098 0
 4617 004c 00BF     		nop
 4618              	.L198:
1099:bluetooth_rxtx.c **** 	}
1100:bluetooth_rxtx.c **** }
 4619              		.loc 1 1100 0
 4620 004e 80BD     		pop	{r7, pc}
 4621              	.L203:
 4622              		.align	2
 4623              	.L202:
 4624 0050 00000000 		.word	mode
 4625              		.cfi_endproc
 4626              	.LFE17:
 4628              		.section	.text.dio_ssp_start,"ax",%progbits
 4629              		.align	2
 4630              		.thumb
 4631              		.thumb_func
 4633              	dio_ssp_start:
 4634              	.LFB18:
1101:bluetooth_rxtx.c **** 
1102:bluetooth_rxtx.c **** static void dio_ssp_start()
1103:bluetooth_rxtx.c **** {
 4635              		.loc 1 1103 0
 4636              		.cfi_startproc
 4637              		@ args = 0, pretend = 0, frame = 0
 4638              		@ frame_needed = 1, uses_anonymous_args = 0
 4639              		@ link register save eliminated.
 4640 0000 80B4     		push	{r7}
 4641              		.cfi_def_cfa_offset 4
 4642              		.cfi_offset 7, -4
 4643 0002 00AF     		add	r7, sp, #0
 4644              		.cfi_def_cfa_register 7
1104:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1105:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4645              		.loc 1 1105 0
 4646 0004 104B     		ldr	r3, .L205
 4647 0006 4FF08052 		mov	r2, #268435456
 4648 000a 1A60     		str	r2, [r3]
1106:bluetooth_rxtx.c **** 
1107:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1108:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4649              		.loc 1 1108 0
 4650 000c 0F4A     		ldr	r2, .L205+4
 4651 000e 0F4B     		ldr	r3, .L205+4
 4652 0010 1B68     		ldr	r3, [r3]
 4653 0012 43F00103 		orr	r3, r3, #1
 4654 0016 1360     		str	r3, [r2]
1109:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4655              		.loc 1 1109 0
 4656 0018 0D4A     		ldr	r2, .L205+8
 4657 001a 0D4B     		ldr	r3, .L205+8
 4658 001c 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 101


 4659 001e 43F00203 		orr	r3, r3, #2
 4660 0022 1360     		str	r3, [r2]
1110:bluetooth_rxtx.c **** 	
1111:bluetooth_rxtx.c **** 	/* enable DMA */
1112:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 4661              		.loc 1 1112 0
 4662 0024 0B4A     		ldr	r2, .L205+12
 4663 0026 0B4B     		ldr	r3, .L205+12
 4664 0028 1B68     		ldr	r3, [r3]
 4665 002a 43F00103 		orr	r3, r3, #1
 4666 002e 1360     		str	r3, [r2]
1113:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4667              		.loc 1 1113 0
 4668 0030 094B     		ldr	r3, .L205+16
 4669 0032 4FF08062 		mov	r2, #67108864
 4670 0036 1A60     		str	r2, [r3]
1114:bluetooth_rxtx.c **** 
1115:bluetooth_rxtx.c **** 	/* activate slave select pin */
1116:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4671              		.loc 1 1116 0
 4672 0038 084B     		ldr	r3, .L205+20
 4673 003a 4FF08052 		mov	r2, #268435456
 4674 003e 1A60     		str	r2, [r3]
1117:bluetooth_rxtx.c **** }
 4675              		.loc 1 1117 0
 4676 0040 BD46     		mov	sp, r7
 4677              		.cfi_def_cfa_register 13
 4678              		@ sp needed
 4679 0042 5DF8047B 		ldr	r7, [sp], #4
 4680              		.cfi_restore 7
 4681              		.cfi_def_cfa_offset 0
 4682 0046 7047     		bx	lr
 4683              	.L206:
 4684              		.align	2
 4685              	.L205:
 4686 0048 98C00920 		.word	537510040
 4687 004c 24000340 		.word	1073938468
 4688 0050 04000340 		.word	1073938436
 4689 0054 10410050 		.word	1342193936
 4690 0058 00E100E0 		.word	-536813312
 4691 005c 9CC00920 		.word	537510044
 4692              		.cfi_endproc
 4693              	.LFE18:
 4695              		.section	.text.dio_ssp_stop,"ax",%progbits
 4696              		.align	2
 4697              		.thumb
 4698              		.thumb_func
 4700              	dio_ssp_stop:
 4701              	.LFB19:
1118:bluetooth_rxtx.c **** 
1119:bluetooth_rxtx.c **** static void dio_ssp_stop()
1120:bluetooth_rxtx.c **** {
 4702              		.loc 1 1120 0
 4703              		.cfi_startproc
 4704              		@ args = 0, pretend = 0, frame = 0
 4705              		@ frame_needed = 1, uses_anonymous_args = 0
 4706              		@ link register save eliminated.
ARM GAS  /tmp/ccTf0kks.s 			page 102


 4707 0000 80B4     		push	{r7}
 4708              		.cfi_def_cfa_offset 4
 4709              		.cfi_offset 7, -4
 4710 0002 00AF     		add	r7, sp, #0
 4711              		.cfi_def_cfa_register 7
1121:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1122:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4712              		.loc 1 1122 0
 4713 0004 214B     		ldr	r3, .L209
 4714 0006 4FF08052 		mov	r2, #268435456
 4715 000a 1A60     		str	r2, [r3]
1123:bluetooth_rxtx.c **** 
1124:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1125:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 4716              		.loc 1 1125 0
 4717 000c 204A     		ldr	r2, .L209+4
 4718 000e 204B     		ldr	r3, .L209+4
 4719 0010 1B68     		ldr	r3, [r3]
 4720 0012 23F00103 		bic	r3, r3, #1
 4721 0016 1360     		str	r3, [r2]
1126:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 4722              		.loc 1 1126 0
 4723 0018 1E4A     		ldr	r2, .L209+8
 4724 001a 1E4B     		ldr	r3, .L209+8
 4725 001c 1B68     		ldr	r3, [r3]
 4726 001e 23F00203 		bic	r3, r3, #2
 4727 0022 1360     		str	r3, [r2]
1127:bluetooth_rxtx.c **** 
1128:bluetooth_rxtx.c **** 
1129:bluetooth_rxtx.c **** 	// disable DMA engine:
1130:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1131:bluetooth_rxtx.c **** 
1132:bluetooth_rxtx.c **** 	// disable DMA interrupts
1133:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4728              		.loc 1 1133 0
 4729 0024 1C4B     		ldr	r3, .L209+12
 4730 0026 4FF08062 		mov	r2, #67108864
 4731 002a 1A60     		str	r2, [r3]
1134:bluetooth_rxtx.c **** 
1135:bluetooth_rxtx.c **** 	// disable active channels
1136:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4732              		.loc 1 1136 0
 4733 002c 1B4B     		ldr	r3, .L209+16
 4734 002e 0022     		movs	r2, #0
 4735 0030 1A60     		str	r2, [r3]
1137:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4736              		.loc 1 1137 0
 4737 0032 1B4B     		ldr	r3, .L209+20
 4738 0034 0022     		movs	r2, #0
 4739 0036 1A60     		str	r2, [r3]
1138:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4740              		.loc 1 1138 0
 4741 0038 1A4B     		ldr	r3, .L209+24
 4742 003a 0022     		movs	r2, #0
 4743 003c 1A60     		str	r2, [r3]
1139:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4744              		.loc 1 1139 0
ARM GAS  /tmp/ccTf0kks.s 			page 103


 4745 003e 1A4B     		ldr	r3, .L209+28
 4746 0040 0022     		movs	r2, #0
 4747 0042 1A60     		str	r2, [r3]
1140:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4748              		.loc 1 1140 0
 4749 0044 194B     		ldr	r3, .L209+32
 4750 0046 0022     		movs	r2, #0
 4751 0048 1A60     		str	r2, [r3]
1141:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4752              		.loc 1 1141 0
 4753 004a 194B     		ldr	r3, .L209+36
 4754 004c 0022     		movs	r2, #0
 4755 004e 1A60     		str	r2, [r3]
1142:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4756              		.loc 1 1142 0
 4757 0050 184B     		ldr	r3, .L209+40
 4758 0052 0022     		movs	r2, #0
 4759 0054 1A60     		str	r2, [r3]
1143:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4760              		.loc 1 1143 0
 4761 0056 184B     		ldr	r3, .L209+44
 4762 0058 0022     		movs	r2, #0
 4763 005a 1A60     		str	r2, [r3]
1144:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4764              		.loc 1 1144 0
 4765 005c 174B     		ldr	r3, .L209+48
 4766 005e FF22     		movs	r2, #255
 4767 0060 1A60     		str	r2, [r3]
1145:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4768              		.loc 1 1145 0
 4769 0062 174B     		ldr	r3, .L209+52
 4770 0064 FF22     		movs	r2, #255
 4771 0066 1A60     		str	r2, [r3]
1146:bluetooth_rxtx.c **** 
1147:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1148:bluetooth_rxtx.c **** 	// register.
1149:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 4772              		.loc 1 1149 0
 4773 0068 164A     		ldr	r2, .L209+56
 4774 006a 164B     		ldr	r3, .L209+56
 4775 006c 1B68     		ldr	r3, [r3]
 4776 006e 23F00103 		bic	r3, r3, #1
 4777 0072 1360     		str	r3, [r2]
1150:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 4778              		.loc 1 1150 0
 4779 0074 00BF     		nop
 4780              	.L208:
 4781              		.loc 1 1150 0 is_stmt 0 discriminator 1
 4782 0076 134B     		ldr	r3, .L209+56
 4783 0078 1B68     		ldr	r3, [r3]
 4784 007a 03F00103 		and	r3, r3, #1
 4785 007e 002B     		cmp	r3, #0
 4786 0080 F9D1     		bne	.L208
1151:bluetooth_rxtx.c **** }
 4787              		.loc 1 1151 0 is_stmt 1
 4788 0082 BD46     		mov	sp, r7
 4789              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccTf0kks.s 			page 104


 4790              		@ sp needed
 4791 0084 5DF8047B 		ldr	r7, [sp], #4
 4792              		.cfi_restore 7
 4793              		.cfi_def_cfa_offset 0
 4794 0088 7047     		bx	lr
 4795              	.L210:
 4796 008a 00BF     		.align	2
 4797              	.L209:
 4798 008c 98C00920 		.word	537510040
 4799 0090 24000340 		.word	1073938468
 4800 0094 04000340 		.word	1073938436
 4801 0098 80E100E0 		.word	-536813184
 4802 009c 10410050 		.word	1342193936
 4803 00a0 30410050 		.word	1342193968
 4804 00a4 50410050 		.word	1342194000
 4805 00a8 70410050 		.word	1342194032
 4806 00ac 90410050 		.word	1342194064
 4807 00b0 B0410050 		.word	1342194096
 4808 00b4 D0410050 		.word	1342194128
 4809 00b8 F0410050 		.word	1342194160
 4810 00bc 08400050 		.word	1342193672
 4811 00c0 10400050 		.word	1342193680
 4812 00c4 30400050 		.word	1342193712
 4813              		.cfi_endproc
 4814              	.LFE19:
 4816              		.section	.text.cc2400_idle,"ax",%progbits
 4817              		.align	2
 4818              		.thumb
 4819              		.thumb_func
 4821              	cc2400_idle:
 4822              	.LFB20:
1152:bluetooth_rxtx.c **** 
1153:bluetooth_rxtx.c **** static void cc2400_idle()
1154:bluetooth_rxtx.c **** {
 4823              		.loc 1 1154 0
 4824              		.cfi_startproc
 4825              		@ args = 0, pretend = 0, frame = 0
 4826              		@ frame_needed = 1, uses_anonymous_args = 0
 4827 0000 80B5     		push	{r7, lr}
 4828              		.cfi_def_cfa_offset 8
 4829              		.cfi_offset 7, -8
 4830              		.cfi_offset 14, -4
 4831 0002 00AF     		add	r7, sp, #0
 4832              		.cfi_def_cfa_register 7
1155:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 4833              		.loc 1 1155 0
 4834 0004 6420     		movs	r0, #100
 4835 0006 FFF7FEFF 		bl	cc2400_strobe
1156:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4836              		.loc 1 1156 0
 4837 000a 00BF     		nop
 4838              	.L212:
 4839              		.loc 1 1156 0 is_stmt 0 discriminator 1
 4840 000c FFF7FEFF 		bl	cc2400_status
 4841 0010 0346     		mov	r3, r0
 4842 0012 03F00403 		and	r3, r3, #4
 4843 0016 002B     		cmp	r3, #0
ARM GAS  /tmp/ccTf0kks.s 			page 105


 4844 0018 F8D1     		bne	.L212
1157:bluetooth_rxtx.c **** 
1158:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1159:bluetooth_rxtx.c **** 	PAEN_CLR;
 4845              		.loc 1 1159 0 is_stmt 1
 4846 001a 0A4B     		ldr	r3, .L213
 4847 001c 8022     		movs	r2, #128
 4848 001e 1A60     		str	r2, [r3]
1160:bluetooth_rxtx.c **** 	HGM_CLR;
 4849              		.loc 1 1160 0
 4850 0020 084B     		ldr	r3, .L213
 4851 0022 4FF48072 		mov	r2, #256
 4852 0026 1A60     		str	r2, [r3]
1161:bluetooth_rxtx.c **** #endif
1162:bluetooth_rxtx.c **** 
1163:bluetooth_rxtx.c **** 	RXLED_CLR;
 4853              		.loc 1 1163 0
 4854 0028 074B     		ldr	r3, .L213+4
 4855 002a 1022     		movs	r2, #16
 4856 002c 1A60     		str	r2, [r3]
1164:bluetooth_rxtx.c **** 	TXLED_CLR;
 4857              		.loc 1 1164 0
 4858 002e 064B     		ldr	r3, .L213+4
 4859 0030 4FF48072 		mov	r2, #256
 4860 0034 1A60     		str	r2, [r3]
1165:bluetooth_rxtx.c **** 	USRLED_CLR;
 4861              		.loc 1 1165 0
 4862 0036 044B     		ldr	r3, .L213+4
 4863 0038 0222     		movs	r2, #2
 4864 003a 1A60     		str	r2, [r3]
1166:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 4865              		.loc 1 1166 0
 4866 003c 034B     		ldr	r3, .L213+8
 4867 003e 0022     		movs	r2, #0
 4868 0040 1A70     		strb	r2, [r3]
1167:bluetooth_rxtx.c **** }
 4869              		.loc 1 1167 0
 4870 0042 80BD     		pop	{r7, pc}
 4871              	.L214:
 4872              		.align	2
 4873              	.L213:
 4874 0044 5CC00920 		.word	537509980
 4875 0048 3CC00920 		.word	537509948
 4876 004c 00000000 		.word	mode
 4877              		.cfi_endproc
 4878              	.LFE20:
 4880              		.section	.text.cc2400_rx,"ax",%progbits
 4881              		.align	2
 4882              		.thumb
 4883              		.thumb_func
 4885              	cc2400_rx:
 4886              	.LFB21:
1168:bluetooth_rxtx.c **** 
1169:bluetooth_rxtx.c **** /* start un-buffered rx */
1170:bluetooth_rxtx.c **** static void cc2400_rx()
1171:bluetooth_rxtx.c **** {
 4887              		.loc 1 1171 0
ARM GAS  /tmp/ccTf0kks.s 			page 106


 4888              		.cfi_startproc
 4889              		@ args = 0, pretend = 0, frame = 8
 4890              		@ frame_needed = 1, uses_anonymous_args = 0
 4891 0000 80B5     		push	{r7, lr}
 4892              		.cfi_def_cfa_offset 8
 4893              		.cfi_offset 7, -8
 4894              		.cfi_offset 14, -4
 4895 0002 82B0     		sub	sp, sp, #8
 4896              		.cfi_def_cfa_offset 16
 4897 0004 00AF     		add	r7, sp, #0
 4898              		.cfi_def_cfa_register 7
1172:bluetooth_rxtx.c **** 	u16 mdmctrl;
1173:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4899              		.loc 1 1173 0
 4900 0006 2A4B     		ldr	r3, .L222
 4901 0008 1B78     		ldrb	r3, [r3]
 4902 000a DBB2     		uxtb	r3, r3
 4903 000c 002B     		cmp	r3, #0
 4904 000e 02D1     		bne	.L216
1174:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4905              		.loc 1 1174 0
 4906 0010 2923     		movs	r3, #41
 4907 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 4908 0014 08E0     		b	.L217
 4909              	.L216:
1175:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4910              		.loc 1 1175 0
 4911 0016 264B     		ldr	r3, .L222
 4912 0018 1B78     		ldrb	r3, [r3]
 4913 001a DBB2     		uxtb	r3, r3
 4914 001c 012B     		cmp	r3, #1
 4915 001e 02D1     		bne	.L218
1176:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4916              		.loc 1 1176 0
 4917 0020 4023     		movs	r3, #64
 4918 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 4919 0024 00E0     		b	.L217
 4920              	.L218:
1177:bluetooth_rxtx.c **** 	} else {
1178:bluetooth_rxtx.c **** 		/* oops */
1179:bluetooth_rxtx.c **** 		return;
 4921              		.loc 1 1179 0
 4922 0026 40E0     		b	.L215
 4923              	.L217:
1180:bluetooth_rxtx.c **** 	}
1181:bluetooth_rxtx.c **** 
1182:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4924              		.loc 1 1182 0
 4925 0028 0D20     		movs	r0, #13
 4926 002a 47F6FF71 		movw	r1, #32767
 4927 002e FFF7FEFF 		bl	cc2400_set
1183:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4928              		.loc 1 1183 0
 4929 0032 1220     		movs	r0, #18
 4930 0034 42F62231 		movw	r1, #11042
 4931 0038 FFF7FEFF 		bl	cc2400_set
1184:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
ARM GAS  /tmp/ccTf0kks.s 			page 107


 4932              		.loc 1 1184 0
 4933 003c 1420     		movs	r0, #20
 4934 003e 41F24B31 		movw	r1, #4939
 4935 0042 FFF7FEFF 		bl	cc2400_set
1185:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 4936              		.loc 1 1185 0
 4937 0046 2020     		movs	r0, #32
 4938 0048 40F20111 		movw	r1, #257
 4939 004c FFF7FEFF 		bl	cc2400_set
1186:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1187:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1188:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1189:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1190:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1191:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1192:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 4940              		.loc 1 1192 0
 4941 0050 184B     		ldr	r3, .L222+4
 4942 0052 1B88     		ldrh	r3, [r3]	@ movhi
 4943 0054 9BB2     		uxth	r3, r3
 4944 0056 013B     		subs	r3, r3, #1
 4945 0058 9BB2     		uxth	r3, r3
 4946 005a 0220     		movs	r0, #2
 4947 005c 1946     		mov	r1, r3
 4948 005e FFF7FEFF 		bl	cc2400_set
1193:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 4949              		.loc 1 1193 0
 4950 0062 FB88     		ldrh	r3, [r7, #6]
 4951 0064 0320     		movs	r0, #3
 4952 0066 1946     		mov	r1, r3
 4953 0068 FFF7FEFF 		bl	cc2400_set
1194:bluetooth_rxtx.c **** 
1195:bluetooth_rxtx.c **** 	// Set up CS register
1196:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4954              		.loc 1 1196 0
 4955 006c FFF7FEFF 		bl	cs_threshold_calc_and_set
1197:bluetooth_rxtx.c **** 
1198:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4956              		.loc 1 1198 0
 4957 0070 00BF     		nop
 4958              	.L220:
 4959              		.loc 1 1198 0 is_stmt 0 discriminator 1
 4960 0072 FFF7FEFF 		bl	cc2400_status
 4961 0076 0346     		mov	r3, r0
 4962 0078 03F04003 		and	r3, r3, #64
 4963 007c 002B     		cmp	r3, #0
 4964 007e F8D0     		beq	.L220
1199:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4965              		.loc 1 1199 0 is_stmt 1
 4966 0080 6120     		movs	r0, #97
 4967 0082 FFF7FEFF 		bl	cc2400_strobe
1200:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4968              		.loc 1 1200 0
 4969 0086 00BF     		nop
 4970              	.L221:
 4971              		.loc 1 1200 0 is_stmt 0 discriminator 1
 4972 0088 FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/ccTf0kks.s 			page 108


 4973 008c 0346     		mov	r3, r0
 4974 008e 03F00403 		and	r3, r3, #4
 4975 0092 002B     		cmp	r3, #0
 4976 0094 F8D0     		beq	.L221
1201:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 4977              		.loc 1 1201 0 is_stmt 1
 4978 0096 6220     		movs	r0, #98
 4979 0098 FFF7FEFF 		bl	cc2400_strobe
1202:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1203:bluetooth_rxtx.c **** 	PAEN_SET;
 4980              		.loc 1 1203 0
 4981 009c 064B     		ldr	r3, .L222+8
 4982 009e 8022     		movs	r2, #128
 4983 00a0 1A60     		str	r2, [r3]
1204:bluetooth_rxtx.c **** 	HGM_SET;
 4984              		.loc 1 1204 0
 4985 00a2 054B     		ldr	r3, .L222+8
 4986 00a4 4FF48072 		mov	r2, #256
 4987 00a8 1A60     		str	r2, [r3]
 4988              	.L215:
1205:bluetooth_rxtx.c **** #endif
1206:bluetooth_rxtx.c **** }
 4989              		.loc 1 1206 0
 4990 00aa 0837     		adds	r7, r7, #8
 4991              		.cfi_def_cfa_offset 8
 4992 00ac BD46     		mov	sp, r7
 4993              		.cfi_def_cfa_register 13
 4994              		@ sp needed
 4995 00ae 80BD     		pop	{r7, pc}
 4996              	.L223:
 4997              		.align	2
 4998              	.L222:
 4999 00b0 00000000 		.word	modulation
 5000 00b4 00000000 		.word	channel
 5001 00b8 58C00920 		.word	537509976
 5002              		.cfi_endproc
 5003              	.LFE21:
 5005              		.section	.text.cc2400_rx_sync,"ax",%progbits
 5006              		.align	2
 5007              		.thumb
 5008              		.thumb_func
 5010              	cc2400_rx_sync:
 5011              	.LFB22:
1207:bluetooth_rxtx.c **** 
1208:bluetooth_rxtx.c **** /* start un-buffered rx */
1209:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1210:bluetooth_rxtx.c **** {
 5012              		.loc 1 1210 0
 5013              		.cfi_startproc
 5014              		@ args = 0, pretend = 0, frame = 16
 5015              		@ frame_needed = 1, uses_anonymous_args = 0
 5016 0000 80B5     		push	{r7, lr}
 5017              		.cfi_def_cfa_offset 8
 5018              		.cfi_offset 7, -8
 5019              		.cfi_offset 14, -4
 5020 0002 84B0     		sub	sp, sp, #16
 5021              		.cfi_def_cfa_offset 24
ARM GAS  /tmp/ccTf0kks.s 			page 109


 5022 0004 00AF     		add	r7, sp, #0
 5023              		.cfi_def_cfa_register 7
 5024 0006 7860     		str	r0, [r7, #4]
1211:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1212:bluetooth_rxtx.c **** 
1213:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 5025              		.loc 1 1213 0
 5026 0008 334B     		ldr	r3, .L231
 5027 000a 1B78     		ldrb	r3, [r3]
 5028 000c DBB2     		uxtb	r3, r3
 5029 000e 002B     		cmp	r3, #0
 5030 0010 05D1     		bne	.L225
1214:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5031              		.loc 1 1214 0
 5032 0012 2923     		movs	r3, #41
 5033 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1215:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5034              		.loc 1 1215 0
 5035 0016 40F26143 		movw	r3, #1121
 5036 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5037 001c 0BE0     		b	.L226
 5038              	.L225:
1216:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1217:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1218:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1219:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1220:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1221:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1222:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1223:bluetooth_rxtx.c **** 
1224:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5039              		.loc 1 1224 0
 5040 001e 2E4B     		ldr	r3, .L231
 5041 0020 1B78     		ldrb	r3, [r3]
 5042 0022 DBB2     		uxtb	r3, r3
 5043 0024 012B     		cmp	r3, #1
 5044 0026 05D1     		bne	.L227
1225:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5045              		.loc 1 1225 0
 5046 0028 4023     		movs	r3, #64
 5047 002a BB81     		strh	r3, [r7, #12]	@ movhi
1226:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 5048              		.loc 1 1226 0
 5049 002c 40F26153 		movw	r3, #1377
 5050 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 5051 0032 00E0     		b	.L226
 5052              	.L227:
1227:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1228:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1229:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1230:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1231:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1232:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1233:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1234:bluetooth_rxtx.c **** 
1235:bluetooth_rxtx.c **** 	} else {
1236:bluetooth_rxtx.c **** 		/* oops */
ARM GAS  /tmp/ccTf0kks.s 			page 110


1237:bluetooth_rxtx.c **** 		return;
 5053              		.loc 1 1237 0
 5054 0034 4DE0     		b	.L224
 5055              	.L226:
1238:bluetooth_rxtx.c **** 	}
1239:bluetooth_rxtx.c **** 
1240:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5056              		.loc 1 1240 0
 5057 0036 0D20     		movs	r0, #13
 5058 0038 47F6FF71 		movw	r1, #32767
 5059 003c FFF7FEFF 		bl	cc2400_set
1241:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5060              		.loc 1 1241 0
 5061 0040 1220     		movs	r0, #18
 5062 0042 42F62231 		movw	r1, #11042
 5063 0046 FFF7FEFF 		bl	cc2400_set
1242:bluetooth_rxtx.c **** 
1243:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 5064              		.loc 1 1243 0
 5065 004a 1420     		movs	r0, #20
 5066 004c 41F24B21 		movw	r1, #4683
 5067 0050 FFF7FEFF 		bl	cc2400_set
1244:bluetooth_rxtx.c **** 	// 1      2      4b
1245:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1246:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1247:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1248:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1249:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
1250:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1251:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1252:bluetooth_rxtx.c **** 	//
1253:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1254:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1255:bluetooth_rxtx.c **** 
1256:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5068              		.loc 1 1256 0
 5069 0054 FB89     		ldrh	r3, [r7, #14]
 5070 0056 2020     		movs	r0, #32
 5071 0058 1946     		mov	r1, r3
 5072 005a FFF7FEFF 		bl	cc2400_set
1257:bluetooth_rxtx.c **** 
1258:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5073              		.loc 1 1258 0
 5074 005e 7B68     		ldr	r3, [r7, #4]
 5075 0060 9BB2     		uxth	r3, r3
 5076 0062 2C20     		movs	r0, #44
 5077 0064 1946     		mov	r1, r3
 5078 0066 FFF7FEFF 		bl	cc2400_set
1259:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5079              		.loc 1 1259 0
 5080 006a 7B68     		ldr	r3, [r7, #4]
 5081 006c 1B0C     		lsrs	r3, r3, #16
 5082 006e 9BB2     		uxth	r3, r3
 5083 0070 2D20     		movs	r0, #45
 5084 0072 1946     		mov	r1, r3
 5085 0074 FFF7FEFF 		bl	cc2400_set
1260:bluetooth_rxtx.c **** 	
ARM GAS  /tmp/ccTf0kks.s 			page 111


1261:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5086              		.loc 1 1261 0
 5087 0078 184B     		ldr	r3, .L231+4
 5088 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5089 007c 9BB2     		uxth	r3, r3
 5090 007e 013B     		subs	r3, r3, #1
 5091 0080 9BB2     		uxth	r3, r3
 5092 0082 0220     		movs	r0, #2
 5093 0084 1946     		mov	r1, r3
 5094 0086 FFF7FEFF 		bl	cc2400_set
1262:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5095              		.loc 1 1262 0
 5096 008a BB89     		ldrh	r3, [r7, #12]
 5097 008c 0320     		movs	r0, #3
 5098 008e 1946     		mov	r1, r3
 5099 0090 FFF7FEFF 		bl	cc2400_set
1263:bluetooth_rxtx.c **** 
1264:bluetooth_rxtx.c **** 	// Set up CS register
1265:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5100              		.loc 1 1265 0
 5101 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1266:bluetooth_rxtx.c **** 
1267:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5102              		.loc 1 1267 0
 5103 0098 00BF     		nop
 5104              	.L229:
 5105              		.loc 1 1267 0 is_stmt 0 discriminator 1
 5106 009a FFF7FEFF 		bl	cc2400_status
 5107 009e 0346     		mov	r3, r0
 5108 00a0 03F04003 		and	r3, r3, #64
 5109 00a4 002B     		cmp	r3, #0
 5110 00a6 F8D0     		beq	.L229
1268:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5111              		.loc 1 1268 0 is_stmt 1
 5112 00a8 6120     		movs	r0, #97
 5113 00aa FFF7FEFF 		bl	cc2400_strobe
1269:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5114              		.loc 1 1269 0
 5115 00ae 00BF     		nop
 5116              	.L230:
 5117              		.loc 1 1269 0 is_stmt 0 discriminator 1
 5118 00b0 FFF7FEFF 		bl	cc2400_status
 5119 00b4 0346     		mov	r3, r0
 5120 00b6 03F00403 		and	r3, r3, #4
 5121 00ba 002B     		cmp	r3, #0
 5122 00bc F8D0     		beq	.L230
1270:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5123              		.loc 1 1270 0 is_stmt 1
 5124 00be 6220     		movs	r0, #98
 5125 00c0 FFF7FEFF 		bl	cc2400_strobe
1271:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1272:bluetooth_rxtx.c **** 	PAEN_SET;
 5126              		.loc 1 1272 0
 5127 00c4 064B     		ldr	r3, .L231+8
 5128 00c6 8022     		movs	r2, #128
 5129 00c8 1A60     		str	r2, [r3]
1273:bluetooth_rxtx.c **** 	HGM_SET;
ARM GAS  /tmp/ccTf0kks.s 			page 112


 5130              		.loc 1 1273 0
 5131 00ca 054B     		ldr	r3, .L231+8
 5132 00cc 4FF48072 		mov	r2, #256
 5133 00d0 1A60     		str	r2, [r3]
 5134              	.L224:
1274:bluetooth_rxtx.c **** #endif
1275:bluetooth_rxtx.c **** }
 5135              		.loc 1 1275 0
 5136 00d2 1037     		adds	r7, r7, #16
 5137              		.cfi_def_cfa_offset 8
 5138 00d4 BD46     		mov	sp, r7
 5139              		.cfi_def_cfa_register 13
 5140              		@ sp needed
 5141 00d6 80BD     		pop	{r7, pc}
 5142              	.L232:
 5143              		.align	2
 5144              	.L231:
 5145 00d8 00000000 		.word	modulation
 5146 00dc 00000000 		.word	channel
 5147 00e0 58C00920 		.word	537509976
 5148              		.cfi_endproc
 5149              	.LFE22:
 5151              		.section	.text.le_transmit,"ax",%progbits
 5152              		.align	2
 5153              		.global	le_transmit
 5154              		.thumb
 5155              		.thumb_func
 5157              	le_transmit:
 5158              	.LFB23:
1276:bluetooth_rxtx.c **** 
1277:bluetooth_rxtx.c **** /*
1278:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1279:bluetooth_rxtx.c ****  *
1280:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1281:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1282:bluetooth_rxtx.c ****  * included in the data length.
1283:bluetooth_rxtx.c ****  */
1284:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1285:bluetooth_rxtx.c **** {
 5159              		.loc 1 1285 0
 5160              		.cfi_startproc
 5161              		@ args = 0, pretend = 0, frame = 104
 5162              		@ frame_needed = 1, uses_anonymous_args = 0
 5163 0000 80B5     		push	{r7, lr}
 5164              		.cfi_def_cfa_offset 8
 5165              		.cfi_offset 7, -8
 5166              		.cfi_offset 14, -4
 5167 0002 9AB0     		sub	sp, sp, #104
 5168              		.cfi_def_cfa_offset 112
 5169 0004 00AF     		add	r7, sp, #0
 5170              		.cfi_def_cfa_register 7
 5171 0006 F860     		str	r0, [r7, #12]
 5172 0008 0B46     		mov	r3, r1
 5173 000a 7A60     		str	r2, [r7, #4]
 5174 000c FB72     		strb	r3, [r7, #11]
1286:bluetooth_rxtx.c **** 	unsigned i, j;
1287:bluetooth_rxtx.c **** 	int bit;
ARM GAS  /tmp/ccTf0kks.s 			page 113


1288:bluetooth_rxtx.c **** 	u8 txbuf[64];
1289:bluetooth_rxtx.c **** 	u8 tx_len;
1290:bluetooth_rxtx.c **** 	u8 byte;
1291:bluetooth_rxtx.c **** 	u16 gio_save;
1292:bluetooth_rxtx.c **** 
1293:bluetooth_rxtx.c **** 	// first four bytes: AA
1294:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5175              		.loc 1 1294 0
 5176 000e 0023     		movs	r3, #0
 5177 0010 7B66     		str	r3, [r7, #100]
 5178 0012 35E0     		b	.L234
 5179              	.L237:
1295:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5180              		.loc 1 1295 0
 5181 0014 FB68     		ldr	r3, [r7, #12]
 5182 0016 87F85E30 		strb	r3, [r7, #94]
1296:bluetooth_rxtx.c **** 		aa >>= 8;
 5183              		.loc 1 1296 0
 5184 001a FB68     		ldr	r3, [r7, #12]
 5185 001c 1B0A     		lsrs	r3, r3, #8
 5186 001e FB60     		str	r3, [r7, #12]
1297:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5187              		.loc 1 1297 0
 5188 0020 07F11002 		add	r2, r7, #16
 5189 0024 7B6E     		ldr	r3, [r7, #100]
 5190 0026 1344     		add	r3, r3, r2
 5191 0028 0022     		movs	r2, #0
 5192 002a 1A70     		strb	r2, [r3]
1298:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5193              		.loc 1 1298 0
 5194 002c 0023     		movs	r3, #0
 5195 002e 3B66     		str	r3, [r7, #96]
 5196 0030 20E0     		b	.L235
 5197              	.L236:
1299:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5198              		.loc 1 1299 0 discriminator 3
 5199 0032 07F11002 		add	r2, r7, #16
 5200 0036 7B6E     		ldr	r3, [r7, #100]
 5201 0038 1344     		add	r3, r3, r2
 5202 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5203 003c D9B2     		uxtb	r1, r3
 5204 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5205 0042 03F00103 		and	r3, r3, #1
 5206 0046 3A6E     		ldr	r2, [r7, #96]
 5207 0048 C2F10702 		rsb	r2, r2, #7
 5208 004c 9340     		lsls	r3, r3, r2
 5209 004e DBB2     		uxtb	r3, r3
 5210 0050 0A46     		mov	r2, r1
 5211 0052 1343     		orrs	r3, r3, r2
 5212 0054 DBB2     		uxtb	r3, r3
 5213 0056 D9B2     		uxtb	r1, r3
 5214 0058 07F11002 		add	r2, r7, #16
 5215 005c 7B6E     		ldr	r3, [r7, #100]
 5216 005e 1344     		add	r3, r3, r2
 5217 0060 0A46     		mov	r2, r1
 5218 0062 1A70     		strb	r2, [r3]
1300:bluetooth_rxtx.c **** 			byte >>= 1;
ARM GAS  /tmp/ccTf0kks.s 			page 114


 5219              		.loc 1 1300 0 discriminator 3
 5220 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5221 0068 5B08     		lsrs	r3, r3, #1
 5222 006a 87F85E30 		strb	r3, [r7, #94]
1298:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5223              		.loc 1 1298 0 discriminator 3
 5224 006e 3B6E     		ldr	r3, [r7, #96]
 5225 0070 0133     		adds	r3, r3, #1
 5226 0072 3B66     		str	r3, [r7, #96]
 5227              	.L235:
1298:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5228              		.loc 1 1298 0 is_stmt 0 discriminator 1
 5229 0074 3B6E     		ldr	r3, [r7, #96]
 5230 0076 072B     		cmp	r3, #7
 5231 0078 DBD9     		bls	.L236
1294:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5232              		.loc 1 1294 0 is_stmt 1 discriminator 2
 5233 007a 7B6E     		ldr	r3, [r7, #100]
 5234 007c 0133     		adds	r3, r3, #1
 5235 007e 7B66     		str	r3, [r7, #100]
 5236              	.L234:
1294:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5237              		.loc 1 1294 0 is_stmt 0 discriminator 1
 5238 0080 7B6E     		ldr	r3, [r7, #100]
 5239 0082 032B     		cmp	r3, #3
 5240 0084 C6D9     		bls	.L237
1301:bluetooth_rxtx.c **** 		}
1302:bluetooth_rxtx.c **** 	}
1303:bluetooth_rxtx.c **** 
1304:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1305:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5241              		.loc 1 1305 0 is_stmt 1
 5242 0086 934B     		ldr	r3, .L253
 5243 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5244 008a 9BB2     		uxth	r3, r3
 5245 008c DBB2     		uxtb	r3, r3
 5246 008e 623B     		subs	r3, r3, #98
 5247 0090 DBB2     		uxtb	r3, r3
 5248 0092 1846     		mov	r0, r3
 5249 0094 FFF7FEFF 		bl	btle_channel_index
 5250 0098 0346     		mov	r3, r0
 5251 009a 1A46     		mov	r2, r3
 5252 009c 8E4B     		ldr	r3, .L253+4
 5253 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5254 00a0 BB65     		str	r3, [r7, #88]
1306:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5255              		.loc 1 1306 0
 5256 00a2 0023     		movs	r3, #0
 5257 00a4 7B66     		str	r3, [r7, #100]
 5258 00a6 50E0     		b	.L238
 5259              	.L241:
1307:bluetooth_rxtx.c **** 		byte = data[i];
 5260              		.loc 1 1307 0
 5261 00a8 7A68     		ldr	r2, [r7, #4]
 5262 00aa 7B6E     		ldr	r3, [r7, #100]
 5263 00ac 1344     		add	r3, r3, r2
 5264 00ae 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 115


 5265 00b0 87F85E30 		strb	r3, [r7, #94]
1308:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5266              		.loc 1 1308 0
 5267 00b4 7B6E     		ldr	r3, [r7, #100]
 5268 00b6 0433     		adds	r3, r3, #4
 5269 00b8 07F16802 		add	r2, r7, #104
 5270 00bc 1344     		add	r3, r3, r2
 5271 00be 0022     		movs	r2, #0
 5272 00c0 03F8582C 		strb	r2, [r3, #-88]
1309:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5273              		.loc 1 1309 0
 5274 00c4 0023     		movs	r3, #0
 5275 00c6 3B66     		str	r3, [r7, #96]
 5276 00c8 39E0     		b	.L239
 5277              	.L240:
1310:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5278              		.loc 1 1310 0 discriminator 3
 5279 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5280 00ce 03F00103 		and	r3, r3, #1
 5281 00d2 8249     		ldr	r1, .L253+8
 5282 00d4 BA6D     		ldr	r2, [r7, #88]
 5283 00d6 0A44     		add	r2, r2, r1
 5284 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5285 00da 5340     		eors	r3, r3, r2
 5286 00dc 7B65     		str	r3, [r7, #84]
1311:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5287              		.loc 1 1311 0 discriminator 3
 5288 00de BB6D     		ldr	r3, [r7, #88]
 5289 00e0 0133     		adds	r3, r3, #1
 5290 00e2 1946     		mov	r1, r3
 5291 00e4 7E4B     		ldr	r3, .L253+12
 5292 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5293 00ea C81A     		subs	r0, r1, r3
 5294 00ec 4008     		lsrs	r0, r0, #1
 5295 00ee 0344     		add	r3, r3, r0
 5296 00f0 9A09     		lsrs	r2, r3, #6
 5297 00f2 1346     		mov	r3, r2
 5298 00f4 DB01     		lsls	r3, r3, #7
 5299 00f6 9B1A     		subs	r3, r3, r2
 5300 00f8 CA1A     		subs	r2, r1, r3
 5301 00fa BA65     		str	r2, [r7, #88]
1312:bluetooth_rxtx.c **** 			byte >>= 1;
 5302              		.loc 1 1312 0 discriminator 3
 5303 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5304 0100 5B08     		lsrs	r3, r3, #1
 5305 0102 87F85E30 		strb	r3, [r7, #94]
1313:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5306              		.loc 1 1313 0 discriminator 3
 5307 0106 7B6E     		ldr	r3, [r7, #100]
 5308 0108 0433     		adds	r3, r3, #4
 5309 010a 7A6E     		ldr	r2, [r7, #100]
 5310 010c 0432     		adds	r2, r2, #4
 5311 010e 07F16801 		add	r1, r7, #104
 5312 0112 0A44     		add	r2, r2, r1
 5313 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5314 0118 D1B2     		uxtb	r1, r2
 5315 011a 3A6E     		ldr	r2, [r7, #96]
ARM GAS  /tmp/ccTf0kks.s 			page 116


 5316 011c C2F10702 		rsb	r2, r2, #7
 5317 0120 1046     		mov	r0, r2
 5318 0122 7A6D     		ldr	r2, [r7, #84]
 5319 0124 8240     		lsls	r2, r2, r0
 5320 0126 D2B2     		uxtb	r2, r2
 5321 0128 0A43     		orrs	r2, r2, r1
 5322 012a D2B2     		uxtb	r2, r2
 5323 012c D2B2     		uxtb	r2, r2
 5324 012e 07F16801 		add	r1, r7, #104
 5325 0132 0B44     		add	r3, r3, r1
 5326 0134 03F8582C 		strb	r2, [r3, #-88]
1309:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5327              		.loc 1 1309 0 discriminator 3
 5328 0138 3B6E     		ldr	r3, [r7, #96]
 5329 013a 0133     		adds	r3, r3, #1
 5330 013c 3B66     		str	r3, [r7, #96]
 5331              	.L239:
1309:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5332              		.loc 1 1309 0 is_stmt 0 discriminator 1
 5333 013e 3B6E     		ldr	r3, [r7, #96]
 5334 0140 072B     		cmp	r3, #7
 5335 0142 C2D9     		bls	.L240
1306:bluetooth_rxtx.c **** 		byte = data[i];
 5336              		.loc 1 1306 0 is_stmt 1 discriminator 2
 5337 0144 7B6E     		ldr	r3, [r7, #100]
 5338 0146 0133     		adds	r3, r3, #1
 5339 0148 7B66     		str	r3, [r7, #100]
 5340              	.L238:
1306:bluetooth_rxtx.c **** 		byte = data[i];
 5341              		.loc 1 1306 0 is_stmt 0 discriminator 1
 5342 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5343 014c 7B6E     		ldr	r3, [r7, #100]
 5344 014e 9A42     		cmp	r2, r3
 5345 0150 AAD8     		bhi	.L241
1314:bluetooth_rxtx.c **** 		}
1315:bluetooth_rxtx.c **** 	}
1316:bluetooth_rxtx.c **** 
1317:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5346              		.loc 1 1317 0 is_stmt 1
 5347 0152 FB7A     		ldrb	r3, [r7, #11]
 5348 0154 0433     		adds	r3, r3, #4
 5349 0156 FB72     		strb	r3, [r7, #11]
1318:bluetooth_rxtx.c **** 
1319:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1320:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5350              		.loc 1 1320 0
 5351 0158 0D20     		movs	r0, #13
 5352 015a 47F6FF71 		movw	r1, #32767
 5353 015e FFF7FEFF 		bl	cc2400_set
1321:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5354              		.loc 1 1321 0
 5355 0162 1220     		movs	r0, #18
 5356 0164 42F62231 		movw	r1, #11042
 5357 0168 FFF7FEFF 		bl	cc2400_set
1322:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5358              		.loc 1 1322 0
 5359 016c 1420     		movs	r0, #20
ARM GAS  /tmp/ccTf0kks.s 			page 117


 5360 016e 41F24B31 		movw	r1, #4939
 5361 0172 FFF7FEFF 		bl	cc2400_set
1323:bluetooth_rxtx.c **** 
1324:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5362              		.loc 1 1324 0
 5363 0176 2020     		movs	r0, #32
 5364 0178 40F60141 		movw	r1, #3073
 5365 017c FFF7FEFF 		bl	cc2400_set
1325:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1326:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1327:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1328:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1329:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1330:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1331:bluetooth_rxtx.c **** 
1332:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5366              		.loc 1 1332 0
 5367 0180 544B     		ldr	r3, .L253
 5368 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5369 0184 9BB2     		uxth	r3, r3
 5370 0186 0220     		movs	r0, #2
 5371 0188 1946     		mov	r1, r3
 5372 018a FFF7FEFF 		bl	cc2400_set
1333:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5373              		.loc 1 1333 0
 5374 018e 0520     		movs	r0, #5
 5375 0190 0B21     		movs	r1, #11
 5376 0192 FFF7FEFF 		bl	cc2400_set
1334:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5377              		.loc 1 1334 0
 5378 0196 0320     		movs	r0, #3
 5379 0198 4021     		movs	r1, #64
 5380 019a FFF7FEFF 		bl	cc2400_set
1335:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5381              		.loc 1 1335 0
 5382 019e 2320     		movs	r0, #35
 5383 01a0 1421     		movs	r1, #20
 5384 01a2 FFF7FEFF 		bl	cc2400_set
1336:bluetooth_rxtx.c **** 
1337:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1338:bluetooth_rxtx.c **** 	if (aa & 1)
 5385              		.loc 1 1338 0
 5386 01a6 FB68     		ldr	r3, [r7, #12]
 5387 01a8 03F00103 		and	r3, r3, #1
 5388 01ac 002B     		cmp	r3, #0
 5389 01ae 05D0     		beq	.L242
1339:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5390              		.loc 1 1339 0
 5391 01b0 2D20     		movs	r0, #45
 5392 01b2 4AF6AA21 		movw	r1, #43690
 5393 01b6 FFF7FEFF 		bl	cc2400_set
 5394 01ba 04E0     		b	.L243
 5395              	.L242:
1340:bluetooth_rxtx.c **** 	else
1341:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5396              		.loc 1 1341 0
 5397 01bc 2D20     		movs	r0, #45
ARM GAS  /tmp/ccTf0kks.s 			page 118


 5398 01be 45F25551 		movw	r1, #21845
 5399 01c2 FFF7FEFF 		bl	cc2400_set
 5400              	.L243:
1342:bluetooth_rxtx.c **** 
1343:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1344:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5401              		.loc 1 1344 0
 5402 01c6 0820     		movs	r0, #8
 5403 01c8 FFF7FEFF 		bl	cc2400_get
 5404 01cc 0346     		mov	r3, r0
 5405 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1345:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5406              		.loc 1 1345 0
 5407 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5408 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5409 01da 9BB2     		uxth	r3, r3
 5410 01dc 43F49C43 		orr	r3, r3, #19968
 5411 01e0 9BB2     		uxth	r3, r3
 5412 01e2 9BB2     		uxth	r3, r3
 5413 01e4 0820     		movs	r0, #8
 5414 01e6 1946     		mov	r1, r3
 5415 01e8 FFF7FEFF 		bl	cc2400_set
1346:bluetooth_rxtx.c **** 
1347:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5416              		.loc 1 1347 0
 5417 01ec 00BF     		nop
 5418              	.L244:
 5419              		.loc 1 1347 0 is_stmt 0 discriminator 1
 5420 01ee FFF7FEFF 		bl	cc2400_status
 5421 01f2 0346     		mov	r3, r0
 5422 01f4 03F04003 		and	r3, r3, #64
 5423 01f8 002B     		cmp	r3, #0
 5424 01fa F8D0     		beq	.L244
1348:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5425              		.loc 1 1348 0 is_stmt 1
 5426 01fc 6120     		movs	r0, #97
 5427 01fe FFF7FEFF 		bl	cc2400_strobe
1349:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5428              		.loc 1 1349 0
 5429 0202 00BF     		nop
 5430              	.L245:
 5431              		.loc 1 1349 0 is_stmt 0 discriminator 1
 5432 0204 FFF7FEFF 		bl	cc2400_status
 5433 0208 0346     		mov	r3, r0
 5434 020a 03F00403 		and	r3, r3, #4
 5435 020e 002B     		cmp	r3, #0
 5436 0210 F8D0     		beq	.L245
1350:bluetooth_rxtx.c **** 	TXLED_SET;
 5437              		.loc 1 1350 0 is_stmt 1
 5438 0212 344B     		ldr	r3, .L253+16
 5439 0214 4FF48072 		mov	r2, #256
 5440 0218 1A60     		str	r2, [r3]
1351:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1352:bluetooth_rxtx.c **** 	PAEN_SET;
 5441              		.loc 1 1352 0
 5442 021a 334B     		ldr	r3, .L253+20
 5443 021c 8022     		movs	r2, #128
ARM GAS  /tmp/ccTf0kks.s 			page 119


 5444 021e 1A60     		str	r2, [r3]
1353:bluetooth_rxtx.c **** #endif
1354:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5445              		.loc 1 1354 0
 5446 0220 00BF     		nop
 5447              	.L246:
 5448              		.loc 1 1354 0 is_stmt 0 discriminator 1
 5449 0222 0E20     		movs	r0, #14
 5450 0224 FFF7FEFF 		bl	cc2400_get
 5451 0228 0346     		mov	r3, r0
 5452 022a 03F01F03 		and	r3, r3, #31
 5453 022e 0F2B     		cmp	r3, #15
 5454 0230 F7D1     		bne	.L246
1355:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5455              		.loc 1 1355 0 is_stmt 1
 5456 0232 6320     		movs	r0, #99
 5457 0234 FFF7FEFF 		bl	cc2400_strobe
1356:bluetooth_rxtx.c **** 
1357:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1358:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5458              		.loc 1 1358 0
 5459 0238 0023     		movs	r3, #0
 5460 023a 7B66     		str	r3, [r7, #100]
 5461 023c 21E0     		b	.L247
 5462              	.L250:
1359:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5463              		.loc 1 1359 0
 5464 023e 00BF     		nop
 5465              	.L248:
 5466              		.loc 1 1359 0 is_stmt 0 discriminator 1
 5467 0240 2A4B     		ldr	r3, .L253+24
 5468 0242 1B68     		ldr	r3, [r3]
 5469 0244 03F00403 		and	r3, r3, #4
 5470 0248 002B     		cmp	r3, #0
 5471 024a F9D1     		bne	.L248
1360:bluetooth_rxtx.c **** 		tx_len = len - i;
 5472              		.loc 1 1360 0 is_stmt 1
 5473 024c 7B6E     		ldr	r3, [r7, #100]
 5474 024e DBB2     		uxtb	r3, r3
 5475 0250 FA7A     		ldrb	r2, [r7, #11]
 5476 0252 D31A     		subs	r3, r2, r3
 5477 0254 87F85F30 		strb	r3, [r7, #95]
1361:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5478              		.loc 1 1361 0
 5479 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5480 025c 102B     		cmp	r3, #16
 5481 025e 02D9     		bls	.L249
1362:bluetooth_rxtx.c **** 			tx_len = 16;
 5482              		.loc 1 1362 0
 5483 0260 1023     		movs	r3, #16
 5484 0262 87F85F30 		strb	r3, [r7, #95]
 5485              	.L249:
1363:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5486              		.loc 1 1363 0 discriminator 2
 5487 0266 07F11002 		add	r2, r7, #16
 5488 026a 7B6E     		ldr	r3, [r7, #100]
 5489 026c 1344     		add	r3, r3, r2
ARM GAS  /tmp/ccTf0kks.s 			page 120


 5490 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5491 0272 7020     		movs	r0, #112
 5492 0274 1146     		mov	r1, r2
 5493 0276 1A46     		mov	r2, r3
 5494 0278 FFF7FEFF 		bl	cc2400_spi_buf
1358:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5495              		.loc 1 1358 0 discriminator 2
 5496 027c 7B6E     		ldr	r3, [r7, #100]
 5497 027e 1033     		adds	r3, r3, #16
 5498 0280 7B66     		str	r3, [r7, #100]
 5499              	.L247:
1358:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5500              		.loc 1 1358 0 is_stmt 0 discriminator 1
 5501 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5502 0284 7B6E     		ldr	r3, [r7, #100]
 5503 0286 9A42     		cmp	r2, r3
 5504 0288 D9D8     		bhi	.L250
1364:bluetooth_rxtx.c **** 	}
1365:bluetooth_rxtx.c **** 
1366:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5505              		.loc 1 1366 0 is_stmt 1
 5506 028a 00BF     		nop
 5507              	.L251:
 5508              		.loc 1 1366 0 is_stmt 0 discriminator 1
 5509 028c 0E20     		movs	r0, #14
 5510 028e FFF7FEFF 		bl	cc2400_get
 5511 0292 0346     		mov	r3, r0
 5512 0294 03F01F03 		and	r3, r3, #31
 5513 0298 0F2B     		cmp	r3, #15
 5514 029a F7D1     		bne	.L251
1367:bluetooth_rxtx.c **** 	TXLED_CLR;
 5515              		.loc 1 1367 0 is_stmt 1
 5516 029c 144B     		ldr	r3, .L253+28
 5517 029e 4FF48072 		mov	r2, #256
 5518 02a2 1A60     		str	r2, [r3]
1368:bluetooth_rxtx.c **** 
1369:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5519              		.loc 1 1369 0
 5520 02a4 6420     		movs	r0, #100
 5521 02a6 FFF7FEFF 		bl	cc2400_strobe
1370:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5522              		.loc 1 1370 0
 5523 02aa 00BF     		nop
 5524              	.L252:
 5525              		.loc 1 1370 0 is_stmt 0 discriminator 1
 5526 02ac FFF7FEFF 		bl	cc2400_status
 5527 02b0 0346     		mov	r3, r0
 5528 02b2 03F00403 		and	r3, r3, #4
 5529 02b6 002B     		cmp	r3, #0
 5530 02b8 F8D1     		bne	.L252
1371:bluetooth_rxtx.c **** 
1372:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1373:bluetooth_rxtx.c **** 	PAEN_CLR;
 5531              		.loc 1 1373 0 is_stmt 1
 5532 02ba 0E4B     		ldr	r3, .L253+32
 5533 02bc 8022     		movs	r2, #128
 5534 02be 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 121


1374:bluetooth_rxtx.c **** #endif
1375:bluetooth_rxtx.c **** 
1376:bluetooth_rxtx.c **** 	// reset GIO
1377:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5535              		.loc 1 1377 0
 5536 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5537 02c4 0820     		movs	r0, #8
 5538 02c6 1946     		mov	r1, r3
 5539 02c8 FFF7FEFF 		bl	cc2400_set
1378:bluetooth_rxtx.c **** }
 5540              		.loc 1 1378 0
 5541 02cc 6837     		adds	r7, r7, #104
 5542              		.cfi_def_cfa_offset 8
 5543 02ce BD46     		mov	sp, r7
 5544              		.cfi_def_cfa_register 13
 5545              		@ sp needed
 5546 02d0 80BD     		pop	{r7, pc}
 5547              	.L254:
 5548 02d2 00BF     		.align	2
 5549              	.L253:
 5550 02d4 00000000 		.word	channel
 5551 02d8 AC000000 		.word	whitening_index
 5552 02dc 2C000000 		.word	whitening
 5553 02e0 11080402 		.word	33818641
 5554 02e4 38C00920 		.word	537509944
 5555 02e8 58C00920 		.word	537509976
 5556 02ec 54C00920 		.word	537509972
 5557 02f0 3CC00920 		.word	537509948
 5558 02f4 5CC00920 		.word	537509980
 5559              		.cfi_endproc
 5560              	.LFE23:
 5562              		.section	.text.le_jam,"ax",%progbits
 5563              		.align	2
 5564              		.global	le_jam
 5565              		.thumb
 5566              		.thumb_func
 5568              	le_jam:
 5569              	.LFB24:
1379:bluetooth_rxtx.c **** 
1380:bluetooth_rxtx.c **** void le_jam(void) {
 5570              		.loc 1 1380 0
 5571              		.cfi_startproc
 5572              		@ args = 0, pretend = 0, frame = 0
 5573              		@ frame_needed = 1, uses_anonymous_args = 0
 5574 0000 80B5     		push	{r7, lr}
 5575              		.cfi_def_cfa_offset 8
 5576              		.cfi_offset 7, -8
 5577              		.cfi_offset 14, -4
 5578 0002 00AF     		add	r7, sp, #0
 5579              		.cfi_def_cfa_register 7
1381:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1382:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5580              		.loc 1 1382 0
 5581 0004 0D20     		movs	r0, #13
 5582 0006 47F6FF71 		movw	r1, #32767
 5583 000a FFF7FEFF 		bl	cc2400_set
1383:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
ARM GAS  /tmp/ccTf0kks.s 			page 122


 5584              		.loc 1 1383 0
 5585 000e 1220     		movs	r0, #18
 5586 0010 42F62231 		movw	r1, #11042
 5587 0014 FFF7FEFF 		bl	cc2400_set
1384:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 5588              		.loc 1 1384 0
 5589 0018 1420     		movs	r0, #20
 5590 001a 42F24B31 		movw	r1, #9035
 5591 001e FFF7FEFF 		bl	cc2400_set
1385:bluetooth_rxtx.c **** 
1386:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5592              		.loc 1 1386 0
 5593 0022 2020     		movs	r0, #32
 5594 0024 40F60141 		movw	r1, #3073
 5595 0028 FFF7FEFF 		bl	cc2400_set
1387:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1388:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1389:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1390:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1391:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1392:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1393:bluetooth_rxtx.c **** 
1394:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1395:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5596              		.loc 1 1395 0
 5597 002c 0520     		movs	r0, #5
 5598 002e 0B21     		movs	r1, #11
 5599 0030 FFF7FEFF 		bl	cc2400_set
1396:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5600              		.loc 1 1396 0
 5601 0034 0320     		movs	r0, #3
 5602 0036 4021     		movs	r1, #64
 5603 0038 FFF7FEFF 		bl	cc2400_set
1397:bluetooth_rxtx.c **** 
1398:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5604              		.loc 1 1398 0
 5605 003c 00BF     		nop
 5606              	.L256:
 5607              		.loc 1 1398 0 is_stmt 0 discriminator 1
 5608 003e FFF7FEFF 		bl	cc2400_status
 5609 0042 0346     		mov	r3, r0
 5610 0044 03F04003 		and	r3, r3, #64
 5611 0048 002B     		cmp	r3, #0
 5612 004a F8D0     		beq	.L256
1399:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5613              		.loc 1 1399 0 is_stmt 1
 5614 004c 6120     		movs	r0, #97
 5615 004e FFF7FEFF 		bl	cc2400_strobe
1400:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5616              		.loc 1 1400 0
 5617 0052 00BF     		nop
 5618              	.L257:
 5619              		.loc 1 1400 0 is_stmt 0 discriminator 1
 5620 0054 FFF7FEFF 		bl	cc2400_status
 5621 0058 0346     		mov	r3, r0
 5622 005a 03F00403 		and	r3, r3, #4
 5623 005e 002B     		cmp	r3, #0
ARM GAS  /tmp/ccTf0kks.s 			page 123


 5624 0060 F8D0     		beq	.L257
1401:bluetooth_rxtx.c **** 	TXLED_SET;
 5625              		.loc 1 1401 0 is_stmt 1
 5626 0062 0A4B     		ldr	r3, .L259
 5627 0064 4FF48072 		mov	r2, #256
 5628 0068 1A60     		str	r2, [r3]
1402:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1403:bluetooth_rxtx.c **** 	PAEN_SET;
 5629              		.loc 1 1403 0
 5630 006a 094B     		ldr	r3, .L259+4
 5631 006c 8022     		movs	r2, #128
 5632 006e 1A60     		str	r2, [r3]
1404:bluetooth_rxtx.c **** #endif
1405:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5633              		.loc 1 1405 0
 5634 0070 00BF     		nop
 5635              	.L258:
 5636              		.loc 1 1405 0 is_stmt 0 discriminator 1
 5637 0072 0E20     		movs	r0, #14
 5638 0074 FFF7FEFF 		bl	cc2400_get
 5639 0078 0346     		mov	r3, r0
 5640 007a 03F01F03 		and	r3, r3, #31
 5641 007e 0F2B     		cmp	r3, #15
 5642 0080 F7D1     		bne	.L258
1406:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5643              		.loc 1 1406 0 is_stmt 1
 5644 0082 6320     		movs	r0, #99
 5645 0084 FFF7FEFF 		bl	cc2400_strobe
1407:bluetooth_rxtx.c **** #endif
1408:bluetooth_rxtx.c **** }
 5646              		.loc 1 1408 0
 5647 0088 80BD     		pop	{r7, pc}
 5648              	.L260:
 5649 008a 00BF     		.align	2
 5650              	.L259:
 5651 008c 38C00920 		.word	537509944
 5652 0090 58C00920 		.word	537509976
 5653              		.cfi_endproc
 5654              	.LFE24:
 5656              		.section	.text.hop,"ax",%progbits
 5657              		.align	2
 5658              		.global	hop
 5659              		.thumb
 5660              		.thumb_func
 5662              	hop:
 5663              	.LFB25:
1409:bluetooth_rxtx.c **** 
1410:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1411:bluetooth_rxtx.c ****  * track of this? */
1412:bluetooth_rxtx.c **** void hop(void)
1413:bluetooth_rxtx.c **** {
 5664              		.loc 1 1413 0
 5665              		.cfi_startproc
 5666              		@ args = 0, pretend = 0, frame = 0
 5667              		@ frame_needed = 1, uses_anonymous_args = 0
 5668 0000 80B5     		push	{r7, lr}
 5669              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/ccTf0kks.s 			page 124


 5670              		.cfi_offset 7, -8
 5671              		.cfi_offset 14, -4
 5672 0002 00AF     		add	r7, sp, #0
 5673              		.cfi_def_cfa_register 7
1414:bluetooth_rxtx.c **** 	do_hop = 0;
 5674              		.loc 1 1414 0
 5675 0004 414B     		ldr	r3, .L272
 5676 0006 0022     		movs	r2, #0
 5677 0008 1A70     		strb	r2, [r3]
1415:bluetooth_rxtx.c **** 
1416:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1417:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5678              		.loc 1 1417 0
 5679 000a 414B     		ldr	r3, .L272+4
 5680 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5681 000e 002B     		cmp	r3, #0
 5682 0010 0BD1     		bne	.L262
1418:bluetooth_rxtx.c **** 		if (cc2400_get(FSDIV) == (channel - 1))
 5683              		.loc 1 1418 0
 5684 0012 0220     		movs	r0, #2
 5685 0014 FFF7FEFF 		bl	cc2400_get
 5686 0018 0346     		mov	r3, r0
 5687 001a 1A46     		mov	r2, r3
 5688 001c 3D4B     		ldr	r3, .L272+8
 5689 001e 1B88     		ldrh	r3, [r3]	@ movhi
 5690 0020 9BB2     		uxth	r3, r3
 5691 0022 013B     		subs	r3, r3, #1
 5692 0024 9A42     		cmp	r2, r3
 5693 0026 47D1     		bne	.L263
1419:bluetooth_rxtx.c **** 			return;
 5694              		.loc 1 1419 0
 5695 0028 6EE0     		b	.L261
 5696              	.L262:
1420:bluetooth_rxtx.c **** 	}
1421:bluetooth_rxtx.c **** 
1422:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1423:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 5697              		.loc 1 1423 0
 5698 002a 394B     		ldr	r3, .L272+4
 5699 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5700 002e 012B     		cmp	r3, #1
 5701 0030 14D1     		bne	.L265
1424:bluetooth_rxtx.c **** 		channel += 32;
 5702              		.loc 1 1424 0
 5703 0032 384B     		ldr	r3, .L272+8
 5704 0034 1B88     		ldrh	r3, [r3]	@ movhi
 5705 0036 9BB2     		uxth	r3, r3
 5706 0038 2033     		adds	r3, r3, #32
 5707 003a 9AB2     		uxth	r2, r3
 5708 003c 354B     		ldr	r3, .L272+8
 5709 003e 1A80     		strh	r2, [r3]	@ movhi
1425:bluetooth_rxtx.c **** 		if (channel > 2480)
 5710              		.loc 1 1425 0
 5711 0040 344B     		ldr	r3, .L272+8
 5712 0042 1B88     		ldrh	r3, [r3]	@ movhi
 5713 0044 9BB2     		uxth	r3, r3
 5714 0046 B3F51B6F 		cmp	r3, #2480
ARM GAS  /tmp/ccTf0kks.s 			page 125


 5715 004a 35D9     		bls	.L263
1426:bluetooth_rxtx.c **** 			channel -= 79;
 5716              		.loc 1 1426 0
 5717 004c 314B     		ldr	r3, .L272+8
 5718 004e 1B88     		ldrh	r3, [r3]	@ movhi
 5719 0050 9BB2     		uxth	r3, r3
 5720 0052 4F3B     		subs	r3, r3, #79
 5721 0054 9AB2     		uxth	r2, r3
 5722 0056 2F4B     		ldr	r3, .L272+8
 5723 0058 1A80     		strh	r2, [r3]	@ movhi
 5724 005a 2DE0     		b	.L263
 5725              	.L265:
1427:bluetooth_rxtx.c **** 	}
1428:bluetooth_rxtx.c **** 
1429:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 5726              		.loc 1 1429 0
 5727 005c 2C4B     		ldr	r3, .L272+4
 5728 005e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5729 0060 022B     		cmp	r3, #2
 5730 0062 0DD1     		bne	.L267
1430:bluetooth_rxtx.c **** 		TXLED_SET;
 5731              		.loc 1 1430 0
 5732 0064 2C4B     		ldr	r3, .L272+12
 5733 0066 4FF48072 		mov	r2, #256
 5734 006a 1A60     		str	r2, [r3]
1431:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 5735              		.loc 1 1431 0
 5736 006c 2B4B     		ldr	r3, .L272+16
 5737 006e 1B68     		ldr	r3, [r3]
 5738 0070 1846     		mov	r0, r3
 5739 0072 FFF7FEFF 		bl	next_hop
 5740 0076 0346     		mov	r3, r0
 5741 0078 1A46     		mov	r2, r3
 5742 007a 264B     		ldr	r3, .L272+8
 5743 007c 1A80     		strh	r2, [r3]	@ movhi
 5744 007e 1BE0     		b	.L263
 5745              	.L267:
1432:bluetooth_rxtx.c **** 	}
1433:bluetooth_rxtx.c **** 
1434:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 5746              		.loc 1 1434 0
 5747 0080 234B     		ldr	r3, .L272+4
 5748 0082 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5749 0084 032B     		cmp	r3, #3
 5750 0086 0BD1     		bne	.L268
1435:bluetooth_rxtx.c **** 		TXLED_SET;
 5751              		.loc 1 1435 0
 5752 0088 234B     		ldr	r3, .L272+12
 5753 008a 4FF48072 		mov	r2, #256
 5754 008e 1A60     		str	r2, [r3]
1436:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 5755              		.loc 1 1436 0
 5756 0090 2348     		ldr	r0, .L272+20
 5757 0092 FFF7FEFF 		bl	btle_next_hop
 5758 0096 0346     		mov	r3, r0
 5759 0098 1A46     		mov	r2, r3
 5760 009a 1E4B     		ldr	r3, .L272+8
ARM GAS  /tmp/ccTf0kks.s 			page 126


 5761 009c 1A80     		strh	r2, [r3]	@ movhi
 5762 009e 0BE0     		b	.L263
 5763              	.L268:
1437:bluetooth_rxtx.c **** 	}
1438:bluetooth_rxtx.c **** 
1439:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 5764              		.loc 1 1439 0
 5765 00a0 1B4B     		ldr	r3, .L272+4
 5766 00a2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5767 00a4 042B     		cmp	r3, #4
 5768 00a6 07D1     		bne	.L263
1440:bluetooth_rxtx.c **** 		TXLED_SET;
 5769              		.loc 1 1440 0
 5770 00a8 1B4B     		ldr	r3, .L272+12
 5771 00aa 4FF48072 		mov	r2, #256
 5772 00ae 1A60     		str	r2, [r3]
1441:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 5773              		.loc 1 1441 0
 5774 00b0 1C4B     		ldr	r3, .L272+24
 5775 00b2 1A88     		ldrh	r2, [r3]
 5776 00b4 174B     		ldr	r3, .L272+8
 5777 00b6 1A80     		strh	r2, [r3]	@ movhi
 5778              	.L263:
1442:bluetooth_rxtx.c **** 	}
1443:bluetooth_rxtx.c **** 
1444:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1445:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5779              		.loc 1 1445 0
 5780 00b8 6420     		movs	r0, #100
 5781 00ba FFF7FEFF 		bl	cc2400_strobe
1446:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5782              		.loc 1 1446 0
 5783 00be 00BF     		nop
 5784              	.L269:
 5785              		.loc 1 1446 0 is_stmt 0 discriminator 1
 5786 00c0 FFF7FEFF 		bl	cc2400_status
 5787 00c4 0346     		mov	r3, r0
 5788 00c6 03F00403 		and	r3, r3, #4
 5789 00ca 002B     		cmp	r3, #0
 5790 00cc F8D1     		bne	.L269
1447:bluetooth_rxtx.c **** 
1448:bluetooth_rxtx.c **** 	/* Retune */
1449:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5791              		.loc 1 1449 0 is_stmt 1
 5792 00ce 114B     		ldr	r3, .L272+8
 5793 00d0 1B88     		ldrh	r3, [r3]	@ movhi
 5794 00d2 9BB2     		uxth	r3, r3
 5795 00d4 013B     		subs	r3, r3, #1
 5796 00d6 9BB2     		uxth	r3, r3
 5797 00d8 0220     		movs	r0, #2
 5798 00da 1946     		mov	r1, r3
 5799 00dc FFF7FEFF 		bl	cc2400_set
1450:bluetooth_rxtx.c **** 	
1451:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1452:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 5800              		.loc 1 1452 0
 5801 00e0 0B4B     		ldr	r3, .L272+4
ARM GAS  /tmp/ccTf0kks.s 			page 127


 5802 00e2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5803 00e4 002B     		cmp	r3, #0
 5804 00e6 01D0     		beq	.L270
1453:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 5805              		.loc 1 1453 0
 5806 00e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 5807              	.L270:
1454:bluetooth_rxtx.c **** 	}
1455:bluetooth_rxtx.c **** 
1456:bluetooth_rxtx.c **** 	/* Wait for lock */
1457:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5808              		.loc 1 1457 0
 5809 00ec 6120     		movs	r0, #97
 5810 00ee FFF7FEFF 		bl	cc2400_strobe
1458:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5811              		.loc 1 1458 0
 5812 00f2 00BF     		nop
 5813              	.L271:
 5814              		.loc 1 1458 0 is_stmt 0 discriminator 1
 5815 00f4 FFF7FEFF 		bl	cc2400_status
 5816 00f8 0346     		mov	r3, r0
 5817 00fa 03F00403 		and	r3, r3, #4
 5818 00fe 002B     		cmp	r3, #0
 5819 0100 F8D0     		beq	.L271
1459:bluetooth_rxtx.c **** 	
1460:bluetooth_rxtx.c **** 	/* RX mode */
1461:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5820              		.loc 1 1461 0 is_stmt 1
 5821 0102 6220     		movs	r0, #98
 5822 0104 FFF7FEFF 		bl	cc2400_strobe
 5823              	.L261:
1462:bluetooth_rxtx.c **** 
1463:bluetooth_rxtx.c **** }
 5824              		.loc 1 1463 0
 5825 0108 80BD     		pop	{r7, pc}
 5826              	.L273:
 5827 010a 00BF     		.align	2
 5828              	.L272:
 5829 010c 00000000 		.word	do_hop
 5830 0110 00000000 		.word	hop_mode
 5831 0114 00000000 		.word	channel
 5832 0118 38C00920 		.word	537509944
 5833 011c 00000000 		.word	clkn
 5834 0120 00000000 		.word	le
 5835 0124 00000000 		.word	hop_direct_channel
 5836              		.cfi_endproc
 5837              	.LFE25:
 5839              		.section	.text.cc2400_spi_rev,"ax",%progbits
 5840              		.align	2
 5841              		.global	cc2400_spi_rev
 5842              		.thumb
 5843              		.thumb_func
 5845              	cc2400_spi_rev:
 5846              	.LFB26:
1464:bluetooth_rxtx.c **** 
1465:bluetooth_rxtx.c **** 
1466:bluetooth_rxtx.c **** u32 cc2400_spi_rev(u8 len, u32 data)
ARM GAS  /tmp/ccTf0kks.s 			page 128


1467:bluetooth_rxtx.c **** {
 5847              		.loc 1 1467 0
 5848              		.cfi_startproc
 5849              		@ args = 0, pretend = 0, frame = 16
 5850              		@ frame_needed = 1, uses_anonymous_args = 0
 5851              		@ link register save eliminated.
 5852 0000 80B4     		push	{r7}
 5853              		.cfi_def_cfa_offset 4
 5854              		.cfi_offset 7, -4
 5855 0002 85B0     		sub	sp, sp, #20
 5856              		.cfi_def_cfa_offset 24
 5857 0004 00AF     		add	r7, sp, #0
 5858              		.cfi_def_cfa_register 7
 5859 0006 0346     		mov	r3, r0
 5860 0008 3960     		str	r1, [r7]
 5861 000a FB71     		strb	r3, [r7, #7]
1468:bluetooth_rxtx.c ****     //    u32 first_ts, second_ts, diff;
1469:bluetooth_rxtx.c **** 
1470:bluetooth_rxtx.c **** 
1471:bluetooth_rxtx.c ****         u32 msb = 1 << (len - 1);
 5862              		.loc 1 1471 0
 5863 000c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5864 000e 013B     		subs	r3, r3, #1
 5865 0010 0122     		movs	r2, #1
 5866 0012 02FA03F3 		lsl	r3, r2, r3
 5867 0016 FB60     		str	r3, [r7, #12]
1472:bluetooth_rxtx.c **** 
1473:bluetooth_rxtx.c ****         /* start transaction by dropping CSN */
1474:bluetooth_rxtx.c ****         CSN_CLR;
 5868              		.loc 1 1474 0
 5869 0018 184B     		ldr	r3, .L281
 5870 001a 2022     		movs	r2, #32
 5871 001c 1A60     		str	r2, [r3]
1475:bluetooth_rxtx.c **** 	
1476:bluetooth_rxtx.c **** //	first_ts = CLK100NS;
1477:bluetooth_rxtx.c ****         while (len--) {
 5872              		.loc 1 1477 0
 5873 001e 1EE0     		b	.L275
 5874              	.L279:
1478:bluetooth_rxtx.c ****                 if (data & msb)
 5875              		.loc 1 1478 0
 5876 0020 3A68     		ldr	r2, [r7]
 5877 0022 FB68     		ldr	r3, [r7, #12]
 5878 0024 1340     		ands	r3, r3, r2
 5879 0026 002B     		cmp	r3, #0
 5880 0028 03D0     		beq	.L276
1479:bluetooth_rxtx.c ****                         MOSI_SET;
 5881              		.loc 1 1479 0
 5882 002a 154B     		ldr	r3, .L281+4
 5883 002c 0122     		movs	r2, #1
 5884 002e 1A60     		str	r2, [r3]
 5885 0030 02E0     		b	.L277
 5886              	.L276:
1480:bluetooth_rxtx.c ****                 else
1481:bluetooth_rxtx.c ****                         MOSI_CLR;
 5887              		.loc 1 1481 0
 5888 0032 124B     		ldr	r3, .L281
ARM GAS  /tmp/ccTf0kks.s 			page 129


 5889 0034 0122     		movs	r2, #1
 5890 0036 1A60     		str	r2, [r3]
 5891              	.L277:
1482:bluetooth_rxtx.c ****                 data <<= 1;
 5892              		.loc 1 1482 0
 5893 0038 3B68     		ldr	r3, [r7]
 5894 003a 5B00     		lsls	r3, r3, #1
 5895 003c 3B60     		str	r3, [r7]
1483:bluetooth_rxtx.c **** 
1484:bluetooth_rxtx.c ****                 SCLK_SET;
 5896              		.loc 1 1484 0
 5897 003e 104B     		ldr	r3, .L281+4
 5898 0040 1022     		movs	r2, #16
 5899 0042 1A60     		str	r2, [r3]
1485:bluetooth_rxtx.c ****                 if (MISO)
 5900              		.loc 1 1485 0
 5901 0044 0F4B     		ldr	r3, .L281+8
 5902 0046 1B68     		ldr	r3, [r3]
 5903 0048 03F00203 		and	r3, r3, #2
 5904 004c 002B     		cmp	r3, #0
 5905 004e 03D0     		beq	.L278
1486:bluetooth_rxtx.c ****                         data |= 1;
 5906              		.loc 1 1486 0
 5907 0050 3B68     		ldr	r3, [r7]
 5908 0052 43F00103 		orr	r3, r3, #1
 5909 0056 3B60     		str	r3, [r7]
 5910              	.L278:
1487:bluetooth_rxtx.c **** 
1488:bluetooth_rxtx.c ****                 SCLK_CLR;
 5911              		.loc 1 1488 0
 5912 0058 084B     		ldr	r3, .L281
 5913 005a 1022     		movs	r2, #16
 5914 005c 1A60     		str	r2, [r3]
 5915              	.L275:
1477:bluetooth_rxtx.c ****                 if (data & msb)
 5916              		.loc 1 1477 0
 5917 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 5918 0060 5A1E     		subs	r2, r3, #1
 5919 0062 FA71     		strb	r2, [r7, #7]
 5920 0064 002B     		cmp	r3, #0
 5921 0066 DBD1     		bne	.L279
1489:bluetooth_rxtx.c ****         }
1490:bluetooth_rxtx.c **** //	second_ts = CLK100NS;
1491:bluetooth_rxtx.c **** //	diff_ts = second_ts - first_ts;
1492:bluetooth_rxtx.c **** 
1493:bluetooth_rxtx.c **** 	CSN_SET;
 5922              		.loc 1 1493 0
 5923 0068 054B     		ldr	r3, .L281+4
 5924 006a 2022     		movs	r2, #32
 5925 006c 1A60     		str	r2, [r3]
1494:bluetooth_rxtx.c **** 	return data;
 5926              		.loc 1 1494 0
 5927 006e 3B68     		ldr	r3, [r7]
1495:bluetooth_rxtx.c **** }
 5928              		.loc 1 1495 0
 5929 0070 1846     		mov	r0, r3
 5930 0072 1437     		adds	r7, r7, #20
ARM GAS  /tmp/ccTf0kks.s 			page 130


 5931              		.cfi_def_cfa_offset 4
 5932 0074 BD46     		mov	sp, r7
 5933              		.cfi_def_cfa_register 13
 5934              		@ sp needed
 5935 0076 5DF8047B 		ldr	r7, [sp], #4
 5936              		.cfi_restore 7
 5937              		.cfi_def_cfa_offset 0
 5938 007a 7047     		bx	lr
 5939              	.L282:
 5940              		.align	2
 5941              	.L281:
 5942 007c 5CC00920 		.word	537509980
 5943 0080 58C00920 		.word	537509976
 5944 0084 54C00920 		.word	537509972
 5945              		.cfi_endproc
 5946              	.LFE26:
 5948              		.section	.text.cc2400_get_rev,"ax",%progbits
 5949              		.align	2
 5950              		.global	cc2400_get_rev
 5951              		.thumb
 5952              		.thumb_func
 5954              	cc2400_get_rev:
 5955              	.LFB27:
1496:bluetooth_rxtx.c **** 
1497:bluetooth_rxtx.c **** 
1498:bluetooth_rxtx.c **** 
1499:bluetooth_rxtx.c **** u8 cc2400_get_rev(u8 reg)
1500:bluetooth_rxtx.c **** {
 5956              		.loc 1 1500 0
 5957              		.cfi_startproc
 5958              		@ args = 0, pretend = 0, frame = 16
 5959              		@ frame_needed = 1, uses_anonymous_args = 0
 5960 0000 80B5     		push	{r7, lr}
 5961              		.cfi_def_cfa_offset 8
 5962              		.cfi_offset 7, -8
 5963              		.cfi_offset 14, -4
 5964 0002 84B0     		sub	sp, sp, #16
 5965              		.cfi_def_cfa_offset 24
 5966 0004 00AF     		add	r7, sp, #0
 5967              		.cfi_def_cfa_register 7
 5968 0006 0346     		mov	r3, r0
 5969 0008 FB71     		strb	r3, [r7, #7]
1501:bluetooth_rxtx.c ****         u32 in;
1502:bluetooth_rxtx.c **** 
1503:bluetooth_rxtx.c ****         u32 out = (reg | 0x80) << 8;
 5970              		.loc 1 1503 0
 5971 000a FB79     		ldrb	r3, [r7, #7]
 5972 000c 63F07F03 		orn	r3, r3, #127
 5973 0010 DBB2     		uxtb	r3, r3
 5974 0012 1B02     		lsls	r3, r3, #8
 5975 0014 FB60     		str	r3, [r7, #12]
1504:bluetooth_rxtx.c ****         in = cc2400_spi_rev(16, out);
 5976              		.loc 1 1504 0
 5977 0016 1020     		movs	r0, #16
 5978 0018 F968     		ldr	r1, [r7, #12]
 5979 001a FFF7FEFF 		bl	cc2400_spi_rev
 5980 001e B860     		str	r0, [r7, #8]
ARM GAS  /tmp/ccTf0kks.s 			page 131


1505:bluetooth_rxtx.c ****         return in & 0xFF;
 5981              		.loc 1 1505 0
 5982 0020 BB68     		ldr	r3, [r7, #8]
 5983 0022 DBB2     		uxtb	r3, r3
1506:bluetooth_rxtx.c **** }
 5984              		.loc 1 1506 0
 5985 0024 1846     		mov	r0, r3
 5986 0026 1037     		adds	r7, r7, #16
 5987              		.cfi_def_cfa_offset 8
 5988 0028 BD46     		mov	sp, r7
 5989              		.cfi_def_cfa_register 13
 5990              		@ sp needed
 5991 002a 80BD     		pop	{r7, pc}
 5992              		.cfi_endproc
 5993              	.LFE27:
 5995              		.section	.text.bt_stream_rx,"ax",%progbits
 5996              		.align	2
 5997              		.global	bt_stream_rx
 5998              		.thumb
 5999              		.thumb_func
 6001              	bt_stream_rx:
 6002              	.LFB28:
1507:bluetooth_rxtx.c **** 
1508:bluetooth_rxtx.c **** 
1509:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1510:bluetooth_rxtx.c **** // wpson
1511:bluetooth_rxtx.c **** void bt_stream_rx()
1512:bluetooth_rxtx.c **** {
 6003              		.loc 1 1512 0
 6004              		.cfi_startproc
 6005              		@ args = 0, pretend = 0, frame = 56
 6006              		@ frame_needed = 1, uses_anonymous_args = 0
 6007 0000 80B5     		push	{r7, lr}
 6008              		.cfi_def_cfa_offset 8
 6009              		.cfi_offset 7, -8
 6010              		.cfi_offset 14, -4
 6011 0002 8EB0     		sub	sp, sp, #56
 6012              		.cfi_def_cfa_offset 64
 6013 0004 00AF     		add	r7, sp, #0
 6014              		.cfi_def_cfa_register 7
1513:bluetooth_rxtx.c **** 	u8 epstat;
1514:bluetooth_rxtx.c **** 	u16 f;
1515:bluetooth_rxtx.c **** 	u8 i = 0;
 6015              		.loc 1 1515 0
 6016 0006 0023     		movs	r3, #0
 6017 0008 87F83330 		strb	r3, [r7, #51]
1516:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
1517:bluetooth_rxtx.c **** 
1518:bluetooth_rxtx.c **** 	queue_init();
 6018              		.loc 1 1518 0
 6019 000c FFF7FEFF 		bl	queue_init
1519:bluetooth_rxtx.c **** 	dio_ssp_init();
 6020              		.loc 1 1519 0
 6021 0010 FFF7FEFF 		bl	dio_ssp_init
1520:bluetooth_rxtx.c **** 	dma_init_le();
 6022              		.loc 1 1520 0
 6023 0014 FFF7FEFF 		bl	dma_init_le
ARM GAS  /tmp/ccTf0kks.s 			page 132


1521:bluetooth_rxtx.c **** 	dio_ssp_start();
 6024              		.loc 1 1521 0
 6025 0018 FFF7FEFF 		bl	dio_ssp_start
1522:bluetooth_rxtx.c **** 
1523:bluetooth_rxtx.c **** 
1524:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1525:bluetooth_rxtx.c **** 	PAEN_SET;
 6026              		.loc 1 1525 0
 6027 001c 574B     		ldr	r3, .L298
 6028 001e 8022     		movs	r2, #128
 6029 0020 1A60     		str	r2, [r3]
1526:bluetooth_rxtx.c **** //	HGM_SET;
1527:bluetooth_rxtx.c **** #endif
1528:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 6030              		.loc 1 1528 0
 6031 0022 0D20     		movs	r0, #13
 6032 0024 47F6FF71 		movw	r1, #32767
 6033 0028 FFF7FEFF 		bl	cc2400_set
1529:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 6034              		.loc 1 1529 0
 6035 002c 1220     		movs	r0, #18
 6036 002e 42F62231 		movw	r1, #11042
 6037 0032 FFF7FEFF 		bl	cc2400_set
1530:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b); // without PRNG
 6038              		.loc 1 1530 0
 6039 0036 1420     		movs	r0, #20
 6040 0038 41F24B21 		movw	r1, #4683
 6041 003c FFF7FEFF 		bl	cc2400_set
1531:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0561); // un-buffered mode, GFSK
 6042              		.loc 1 1531 0
 6043 0040 2020     		movs	r0, #32
 6044 0042 40F26151 		movw	r1, #1377
 6045 0046 FFF7FEFF 		bl	cc2400_set
1532:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 160 kHz frequency deviation
 6046              		.loc 1 1532 0
 6047 004a 0320     		movs	r0, #3
 6048 004c 4021     		movs	r1, #64
 6049 004e FFF7FEFF 		bl	cc2400_set
1533:bluetooth_rxtx.c **** 
1534:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0xf9ae);
1535:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x1584);
1536:bluetooth_rxtx.c **** //	cc2400_set(SYNCH, 0x00ff);
1537:bluetooth_rxtx.c **** //	cc2400_set(SYNCL, 0x00ff);
1538:bluetooth_rxtx.c **** 	
1539:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   rbit(0x8e89bed6) & 0xffff);
 6050              		.loc 1 1539 0
 6051 0052 4B48     		ldr	r0, .L298+4
 6052 0054 FFF7FEFF 		bl	rbit
 6053 0058 0346     		mov	r3, r0
 6054 005a 9BB2     		uxth	r3, r3
 6055 005c 2C20     		movs	r0, #44
 6056 005e 1946     		mov	r1, r3
 6057 0060 FFF7FEFF 		bl	cc2400_set
1540:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (rbit(0x8e89bed6) >> 16) & 0xffff);
 6058              		.loc 1 1540 0
 6059 0064 4648     		ldr	r0, .L298+4
 6060 0066 FFF7FEFF 		bl	rbit
ARM GAS  /tmp/ccTf0kks.s 			page 133


 6061 006a 0346     		mov	r3, r0
 6062 006c 1B0C     		lsrs	r3, r3, #16
 6063 006e 9BB2     		uxth	r3, r3
 6064 0070 2D20     		movs	r0, #45
 6065 0072 1946     		mov	r1, r3
 6066 0074 FFF7FEFF 		bl	cc2400_set
1541:bluetooth_rxtx.c **** 	
1542:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 6067              		.loc 1 1542 0
 6068 0078 00BF     		nop
 6069              	.L286:
 6070              		.loc 1 1542 0 is_stmt 0 discriminator 1
 6071 007a FFF7FEFF 		bl	cc2400_status
 6072 007e 0346     		mov	r3, r0
 6073 0080 03F04003 		and	r3, r3, #64
 6074 0084 002B     		cmp	r3, #0
 6075 0086 F8D0     		beq	.L286
1543:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 6076              		.loc 1 1543 0 is_stmt 1
 6077 0088 00BF     		nop
 6078              	.L287:
 6079              		.loc 1 1543 0 is_stmt 0 discriminator 1
 6080 008a FFF7FEFF 		bl	cc2400_status
 6081 008e 0346     		mov	r3, r0
 6082 0090 03F00403 		and	r3, r3, #4
 6083 0094 002B     		cmp	r3, #0
 6084 0096 F8D1     		bne	.L287
1544:bluetooth_rxtx.c **** 
1545:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 6085              		.loc 1 1545 0 is_stmt 1
 6086 0098 3A4B     		ldr	r3, .L298+8
 6087 009a 1B88     		ldrh	r3, [r3]	@ movhi
 6088 009c 9BB2     		uxth	r3, r3
 6089 009e 013B     		subs	r3, r3, #1
 6090 00a0 9BB2     		uxth	r3, r3
 6091 00a2 0220     		movs	r0, #2
 6092 00a4 1946     		mov	r1, r3
 6093 00a6 FFF7FEFF 		bl	cc2400_set
1546:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 6094              		.loc 1 1546 0
 6095 00aa 6120     		movs	r0, #97
 6096 00ac FFF7FEFF 		bl	cc2400_strobe
1547:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 6097              		.loc 1 1547 0
 6098 00b0 00BF     		nop
 6099              	.L288:
 6100              		.loc 1 1547 0 is_stmt 0 discriminator 1
 6101 00b2 FFF7FEFF 		bl	cc2400_status
 6102 00b6 0346     		mov	r3, r0
 6103 00b8 03F00403 		and	r3, r3, #4
 6104 00bc 002B     		cmp	r3, #0
 6105 00be F8D0     		beq	.L288
1548:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 6106              		.loc 1 1548 0 is_stmt 1
 6107 00c0 6220     		movs	r0, #98
 6108 00c2 FFF7FEFF 		bl	cc2400_strobe
1549:bluetooth_rxtx.c **** 	
ARM GAS  /tmp/ccTf0kks.s 			page 134


1550:bluetooth_rxtx.c **** 	while (requested_mode == MODE_RX_SYMBOLS) {
 6109              		.loc 1 1550 0
 6110 00c6 4DE0     		b	.L289
 6111              	.L297:
 6112              	.LBB3:
1551:bluetooth_rxtx.c **** 		
1552:bluetooth_rxtx.c **** 		while (!(cc2400_status () & SYNC_RECEIVED));	
 6113              		.loc 1 1552 0
 6114 00c8 00BF     		nop
 6115              	.L290:
 6116              		.loc 1 1552 0 is_stmt 0 discriminator 1
 6117 00ca FFF7FEFF 		bl	cc2400_status
 6118 00ce 0346     		mov	r3, r0
 6119 00d0 03F01003 		and	r3, r3, #16
 6120 00d4 002B     		cmp	r3, #0
 6121 00d6 F8D0     		beq	.L290
1553:bluetooth_rxtx.c **** 		int i = 0;
 6122              		.loc 1 1553 0 is_stmt 1
 6123 00d8 0023     		movs	r3, #0
 6124 00da 7B63     		str	r3, [r7, #52]
1554:bluetooth_rxtx.c **** //		while (!rx_tc)
1555:bluetooth_rxtx.c **** 		for (i = 0; i < 50; i++)
 6125              		.loc 1 1555 0
 6126 00dc 0023     		movs	r3, #0
 6127 00de 7B63     		str	r3, [r7, #52]
 6128 00e0 0CE0     		b	.L291
 6129              	.L292:
1556:bluetooth_rxtx.c **** 		{
1557:bluetooth_rxtx.c **** 			buf[i] = cc2400_get_rev(FREQEST);
 6130              		.loc 1 1557 0 discriminator 3
 6131 00e2 0720     		movs	r0, #7
 6132 00e4 FFF7FEFF 		bl	cc2400_get_rev
 6133 00e8 0346     		mov	r3, r0
 6134 00ea 1946     		mov	r1, r3
 6135 00ec 3A46     		mov	r2, r7
 6136 00ee 7B6B     		ldr	r3, [r7, #52]
 6137 00f0 1344     		add	r3, r3, r2
 6138 00f2 0A46     		mov	r2, r1
 6139 00f4 1A70     		strb	r2, [r3]
1555:bluetooth_rxtx.c **** 		{
 6140              		.loc 1 1555 0 discriminator 3
 6141 00f6 7B6B     		ldr	r3, [r7, #52]
 6142 00f8 0133     		adds	r3, r3, #1
 6143 00fa 7B63     		str	r3, [r7, #52]
 6144              	.L291:
1555:bluetooth_rxtx.c **** 		{
 6145              		.loc 1 1555 0 is_stmt 0 discriminator 1
 6146 00fc 7B6B     		ldr	r3, [r7, #52]
 6147 00fe 312B     		cmp	r3, #49
 6148 0100 EFDD     		ble	.L292
1558:bluetooth_rxtx.c **** 		}
1559:bluetooth_rxtx.c **** 
1560:bluetooth_rxtx.c **** 		RXLED_SET;
 6149              		.loc 1 1560 0 is_stmt 1
 6150 0102 214B     		ldr	r3, .L298+12
 6151 0104 1022     		movs	r2, #16
 6152 0106 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 135


1561:bluetooth_rxtx.c **** /*
1562:bluetooth_rxtx.c **** 		if (rx_err){
1563:bluetooth_rxtx.c **** 		status |= DMA_ERROR;
1564:bluetooth_rxtx.c **** 		}
1565:bluetooth_rxtx.c **** 		if (rx_tc > 1)
1566:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
1567:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1568:bluetooth_rxtx.c **** 
1569:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
1570:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
1571:bluetooth_rxtx.c **** 
1572:bluetooth_rxtx.c **** 		while (DMACC0Config & DMACCxConfig_E && rx_err == 0);
1573:bluetooth_rxtx.c **** 	
1574:bluetooth_rxtx.c **** 		                DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1575:bluetooth_rxtx.c **** 
1576:bluetooth_rxtx.c ****                 const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
1577:bluetooth_rxtx.c ****                 for (i = 0; i < 44; i += 4) {
1578:bluetooth_rxtx.c ****                         uint32_t v = rxbuf1[i+0] << 24
1579:bluetooth_rxtx.c ****                                           | rxbuf1[i+1] << 16
1580:bluetooth_rxtx.c ****                                       | rxbuf1[i+2] << 8
1581:bluetooth_rxtx.c ****                                           | rxbuf1[i+3] << 0;
1582:bluetooth_rxtx.c ****                         packet[i/4+1] = rbit(v) ^ whit[i/4];
1583:bluetooth_rxtx.c ****                 }
1584:bluetooth_rxtx.c **** //                for (i = 0; i < 20; i += 4) {
1585:bluetooth_rxtx.c **** //                      uint32_t v = payload[i+0] << 24
1586:bluetooth_rxtx.c **** //                                          | payload[i+1] << 16
1587:bluetooth_rxtx.c **** //                                      | payload[i+2] << 8
1588:bluetooth_rxtx.c **** //                                          | payload[i+3] << 0;
1589:bluetooth_rxtx.c **** //                        packet[i/4+1] = rbit(v) ^ whit[(i/4)+4];
1590:bluetooth_rxtx.c **** //                }
1591:bluetooth_rxtx.c **** 
1592:bluetooth_rxtx.c ****                 unsigned len = (p[5] & 0x3f) + 2;
1593:bluetooth_rxtx.c **** 
1594:bluetooth_rxtx.c ****                 if (len > 39)
1595:bluetooth_rxtx.c ****                         goto rx_flush;
1596:bluetooth_rxtx.c **** 
1597:bluetooth_rxtx.c ****                 u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
1598:bluetooth_rxtx.c ****                 u32 wire_crc = (p[4+len+2] << 16)
1599:bluetooth_rxtx.c ****                                                  | (p[4+len+1] << 8)
1600:bluetooth_rxtx.c ****                                                  | (p[4+len+0] << 0);
1601:bluetooth_rxtx.c ****                 if (calc_crc != wire_crc) // skip packets with a bad CRC
1602:bluetooth_rxtx.c ****                         goto rx_flush;
1603:bluetooth_rxtx.c **** */
1604:bluetooth_rxtx.c **** //		if (p[39] == 0x3d && p[40] == 0x00)
1605:bluetooth_rxtx.c **** 		{
1606:bluetooth_rxtx.c **** 			enqueue(MESSAGE, buf);
 6153              		.loc 1 1606 0
 6154 0108 3B46     		mov	r3, r7
 6155 010a 0220     		movs	r0, #2
 6156 010c 1946     		mov	r1, r3
 6157 010e FFF7FEFF 		bl	enqueue
1607:bluetooth_rxtx.c **** 			handle_usb(clkn);
 6158              		.loc 1 1607 0
 6159 0112 1E4B     		ldr	r3, .L298+16
 6160 0114 1B68     		ldr	r3, [r3]
 6161 0116 1846     		mov	r0, r3
 6162 0118 FFF7FEFF 		bl	handle_usb
ARM GAS  /tmp/ccTf0kks.s 			page 136


1608:bluetooth_rxtx.c **** 		}
1609:bluetooth_rxtx.c **** 
1610:bluetooth_rxtx.c **** 		RXLED_CLR;
 6163              		.loc 1 1610 0
 6164 011c 1C4B     		ldr	r3, .L298+20
 6165 011e 1022     		movs	r2, #16
 6166 0120 1A60     		str	r2, [r3]
 6167              	.L293:
1611:bluetooth_rxtx.c **** 	rx_flush:
1612:bluetooth_rxtx.c **** 	
1613:bluetooth_rxtx.c **** 	         
1614:bluetooth_rxtx.c **** 		cc2400_strobe (SRFOFF);
 6168              		.loc 1 1614 0
 6169 0122 6420     		movs	r0, #100
 6170 0124 FFF7FEFF 		bl	cc2400_strobe
1615:bluetooth_rxtx.c **** 		while ((cc2400_status () & FS_LOCK));
 6171              		.loc 1 1615 0
 6172 0128 00BF     		nop
 6173              	.L294:
 6174              		.loc 1 1615 0 is_stmt 0 discriminator 1
 6175 012a FFF7FEFF 		bl	cc2400_status
 6176 012e 0346     		mov	r3, r0
 6177 0130 03F00403 		and	r3, r3, #4
 6178 0134 002B     		cmp	r3, #0
 6179 0136 F8D1     		bne	.L294
1616:bluetooth_rxtx.c **** 
1617:bluetooth_rxtx.c **** 		while (!(cc2400_status () & XOSC16M_STABLE));
 6180              		.loc 1 1617 0 is_stmt 1
 6181 0138 00BF     		nop
 6182              	.L295:
 6183              		.loc 1 1617 0 is_stmt 0 discriminator 1
 6184 013a FFF7FEFF 		bl	cc2400_status
 6185 013e 0346     		mov	r3, r0
 6186 0140 03F04003 		and	r3, r3, #64
 6187 0144 002B     		cmp	r3, #0
 6188 0146 F8D0     		beq	.L295
1618:bluetooth_rxtx.c **** 		
1619:bluetooth_rxtx.c **** 		cc2400_strobe (SFSON);
 6189              		.loc 1 1619 0 is_stmt 1
 6190 0148 6120     		movs	r0, #97
 6191 014a FFF7FEFF 		bl	cc2400_strobe
1620:bluetooth_rxtx.c **** 		while (!(cc2400_status () & FS_LOCK));
 6192              		.loc 1 1620 0
 6193 014e 00BF     		nop
 6194              	.L296:
 6195              		.loc 1 1620 0 is_stmt 0 discriminator 1
 6196 0150 FFF7FEFF 		bl	cc2400_status
 6197 0154 0346     		mov	r3, r0
 6198 0156 03F00403 		and	r3, r3, #4
 6199 015a 002B     		cmp	r3, #0
 6200 015c F8D0     		beq	.L296
1621:bluetooth_rxtx.c **** 
1622:bluetooth_rxtx.c **** /*		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
1623:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE)
1624:bluetooth_rxtx.c **** 		{
1625:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
1626:bluetooth_rxtx.c **** 		}
ARM GAS  /tmp/ccTf0kks.s 			page 137


1627:bluetooth_rxtx.c **** 		dma_init_le ();
1628:bluetooth_rxtx.c **** 		dio_ssp_start();
1629:bluetooth_rxtx.c **** */
1630:bluetooth_rxtx.c **** //		msleep(500);	
1631:bluetooth_rxtx.c **** 		cc2400_strobe (SRX);
 6201              		.loc 1 1631 0 is_stmt 1
 6202 015e 6220     		movs	r0, #98
 6203 0160 FFF7FEFF 		bl	cc2400_strobe
 6204              	.L289:
 6205              	.LBE3:
1550:bluetooth_rxtx.c **** 		
 6206              		.loc 1 1550 0
 6207 0164 0B4B     		ldr	r3, .L298+24
 6208 0166 1B78     		ldrb	r3, [r3]
 6209 0168 DBB2     		uxtb	r3, r3
 6210 016a 012B     		cmp	r3, #1
 6211 016c ACD0     		beq	.L297
1632:bluetooth_rxtx.c **** //		rx_tc = 0;
1633:bluetooth_rxtx.c **** //		rx_err = 0;
1634:bluetooth_rxtx.c **** 
1635:bluetooth_rxtx.c **** 	}
1636:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 6212              		.loc 1 1636 0
 6213 016e 0A4B     		ldr	r3, .L298+28
 6214 0170 0022     		movs	r2, #0
 6215 0172 1A70     		strb	r2, [r3]
1637:bluetooth_rxtx.c **** }
 6216              		.loc 1 1637 0
 6217 0174 3837     		adds	r7, r7, #56
 6218              		.cfi_def_cfa_offset 8
 6219 0176 BD46     		mov	sp, r7
 6220              		.cfi_def_cfa_register 13
 6221              		@ sp needed
 6222 0178 80BD     		pop	{r7, pc}
 6223              	.L299:
 6224 017a 00BF     		.align	2
 6225              	.L298:
 6226 017c 58C00920 		.word	537509976
 6227 0180 D6BE898E 		.word	-1903575338
 6228 0184 00000000 		.word	channel
 6229 0188 38C00920 		.word	537509944
 6230 018c 00000000 		.word	clkn
 6231 0190 3CC00920 		.word	537509948
 6232 0194 00000000 		.word	requested_mode
 6233 0198 00000000 		.word	mode
 6234              		.cfi_endproc
 6235              	.LFE28:
 6237              		.section	.text.le_set_access_address,"ax",%progbits
 6238              		.align	2
 6239              		.thumb
 6240              		.thumb_func
 6242              	le_set_access_address:
 6243              	.LFB29:
1638:bluetooth_rxtx.c **** 
1639:bluetooth_rxtx.c **** 
1640:bluetooth_rxtx.c **** /* set LE access address */
1641:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
ARM GAS  /tmp/ccTf0kks.s 			page 138


 6244              		.loc 1 1641 0
 6245              		.cfi_startproc
 6246              		@ args = 0, pretend = 0, frame = 16
 6247              		@ frame_needed = 1, uses_anonymous_args = 0
 6248 0000 80B5     		push	{r7, lr}
 6249              		.cfi_def_cfa_offset 8
 6250              		.cfi_offset 7, -8
 6251              		.cfi_offset 14, -4
 6252 0002 84B0     		sub	sp, sp, #16
 6253              		.cfi_def_cfa_offset 24
 6254 0004 00AF     		add	r7, sp, #0
 6255              		.cfi_def_cfa_register 7
 6256 0006 7860     		str	r0, [r7, #4]
1642:bluetooth_rxtx.c **** 	u32 aa_rev;
1643:bluetooth_rxtx.c **** 
1644:bluetooth_rxtx.c **** 	le.access_address = aa;
 6257              		.loc 1 1644 0
 6258 0008 094A     		ldr	r2, .L301
 6259 000a 7B68     		ldr	r3, [r7, #4]
 6260 000c 1360     		str	r3, [r2]
1645:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 6261              		.loc 1 1645 0
 6262 000e 7868     		ldr	r0, [r7, #4]
 6263 0010 FFF7FEFF 		bl	rbit
 6264 0014 F860     		str	r0, [r7, #12]
1646:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 6265              		.loc 1 1646 0
 6266 0016 FB68     		ldr	r3, [r7, #12]
 6267 0018 9AB2     		uxth	r2, r3
 6268 001a 054B     		ldr	r3, .L301
 6269 001c DA80     		strh	r2, [r3, #6]	@ movhi
1647:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 6270              		.loc 1 1647 0
 6271 001e FB68     		ldr	r3, [r7, #12]
 6272 0020 1B0C     		lsrs	r3, r3, #16
 6273 0022 9AB2     		uxth	r2, r3
 6274 0024 024B     		ldr	r3, .L301
 6275 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1648:bluetooth_rxtx.c **** }
 6276              		.loc 1 1648 0
 6277 0028 1037     		adds	r7, r7, #16
 6278              		.cfi_def_cfa_offset 8
 6279 002a BD46     		mov	sp, r7
 6280              		.cfi_def_cfa_register 13
 6281              		@ sp needed
 6282 002c 80BD     		pop	{r7, pc}
 6283              	.L302:
 6284 002e 00BF     		.align	2
 6285              	.L301:
 6286 0030 00000000 		.word	le
 6287              		.cfi_endproc
 6288              	.LFE29:
 6290              		.section	.text.reset_le,"ax",%progbits
 6291              		.align	2
 6292              		.global	reset_le
 6293              		.thumb
 6294              		.thumb_func
ARM GAS  /tmp/ccTf0kks.s 			page 139


 6296              	reset_le:
 6297              	.LFB30:
1649:bluetooth_rxtx.c **** 
1650:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1651:bluetooth_rxtx.c **** void reset_le() {
 6298              		.loc 1 1651 0
 6299              		.cfi_startproc
 6300              		@ args = 0, pretend = 0, frame = 0
 6301              		@ frame_needed = 1, uses_anonymous_args = 0
 6302 0000 80B5     		push	{r7, lr}
 6303              		.cfi_def_cfa_offset 8
 6304              		.cfi_offset 7, -8
 6305              		.cfi_offset 14, -4
 6306 0002 00AF     		add	r7, sp, #0
 6307              		.cfi_def_cfa_register 7
1652:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 6308              		.loc 1 1652 0
 6309 0004 1F48     		ldr	r0, .L304
 6310 0006 FFF7FEFF 		bl	le_set_access_address
1653:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 6311              		.loc 1 1653 0
 6312 000a 1F4B     		ldr	r3, .L304+4
 6313 000c 1F4A     		ldr	r2, .L304+8
 6314 000e 9A60     		str	r2, [r3, #8]
1654:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 6315              		.loc 1 1654 0
 6316 0010 1D4B     		ldr	r3, .L304+4
 6317 0012 1F4A     		ldr	r2, .L304+12
 6318 0014 DA60     		str	r2, [r3, #12]
1655:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 6319              		.loc 1 1655 0
 6320 0016 1C4B     		ldr	r3, .L304+4
 6321 0018 0122     		movs	r2, #1
 6322 001a 1A61     		str	r2, [r3, #16]
1656:bluetooth_rxtx.c **** 	le.last_packet = 0;
 6323              		.loc 1 1656 0
 6324 001c 1A4B     		ldr	r3, .L304+4
 6325 001e 0022     		movs	r2, #0
 6326 0020 1A64     		str	r2, [r3, #64]
1657:bluetooth_rxtx.c **** 
1658:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 6327              		.loc 1 1658 0
 6328 0022 194B     		ldr	r3, .L304+4
 6329 0024 0022     		movs	r2, #0
 6330 0026 1A75     		strb	r2, [r3, #20]
1659:bluetooth_rxtx.c **** 
1660:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 6331              		.loc 1 1660 0
 6332 0028 174B     		ldr	r3, .L304+4
 6333 002a 0022     		movs	r2, #0
 6334 002c 5A75     		strb	r2, [r3, #21]
1661:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 6335              		.loc 1 1661 0
 6336 002e 164B     		ldr	r3, .L304+4
 6337 0030 0022     		movs	r2, #0
 6338 0032 9A75     		strb	r2, [r3, #22]
1662:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccTf0kks.s 			page 140


1663:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 6339              		.loc 1 1663 0
 6340 0034 144B     		ldr	r3, .L304+4
 6341 0036 0022     		movs	r2, #0
 6342 0038 9A61     		str	r2, [r3, #24]
1664:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 6343              		.loc 1 1664 0
 6344 003a 134B     		ldr	r3, .L304+4
 6345 003c 0022     		movs	r2, #0
 6346 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1665:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6347              		.loc 1 1665 0
 6348 0040 114B     		ldr	r3, .L304+4
 6349 0042 0022     		movs	r2, #0
 6350 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1666:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6351              		.loc 1 1666 0
 6352 0046 104B     		ldr	r3, .L304+4
 6353 0048 0022     		movs	r2, #0
 6354 004a DA83     		strh	r2, [r3, #30]	@ movhi
1667:bluetooth_rxtx.c **** 	le.conn_count = 0;
 6355              		.loc 1 1667 0
 6356 004c 0E4B     		ldr	r3, .L304+4
 6357 004e 0022     		movs	r2, #0
 6358 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1668:bluetooth_rxtx.c **** 
1669:bluetooth_rxtx.c **** 	le.win_size = 0;
 6359              		.loc 1 1669 0
 6360 0052 0D4B     		ldr	r3, .L304+4
 6361 0054 0022     		movs	r2, #0
 6362 0056 83F82220 		strb	r2, [r3, #34]
1670:bluetooth_rxtx.c **** 	le.win_offset = 0;
 6363              		.loc 1 1670 0
 6364 005a 0B4B     		ldr	r3, .L304+4
 6365 005c 0022     		movs	r2, #0
 6366 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1671:bluetooth_rxtx.c **** 
1672:bluetooth_rxtx.c **** 	le.update_pending = 0;
 6367              		.loc 1 1672 0
 6368 0060 094B     		ldr	r3, .L304+4
 6369 0062 0022     		movs	r2, #0
 6370 0064 9A62     		str	r2, [r3, #40]
1673:bluetooth_rxtx.c **** 	le.update_instant = 0;
 6371              		.loc 1 1673 0
 6372 0066 084B     		ldr	r3, .L304+4
 6373 0068 0022     		movs	r2, #0
 6374 006a 9A85     		strh	r2, [r3, #44]	@ movhi
1674:bluetooth_rxtx.c **** 	le.interval_update = 0;
 6375              		.loc 1 1674 0
 6376 006c 064B     		ldr	r3, .L304+4
 6377 006e 0022     		movs	r2, #0
 6378 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1675:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 6379              		.loc 1 1675 0
 6380 0072 054B     		ldr	r3, .L304+4
 6381 0074 0022     		movs	r2, #0
 6382 0076 83F83020 		strb	r2, [r3, #48]
ARM GAS  /tmp/ccTf0kks.s 			page 141


1676:bluetooth_rxtx.c **** 	le.win_offset_update;
1677:bluetooth_rxtx.c **** 
1678:bluetooth_rxtx.c **** 	do_hop = 0;
 6383              		.loc 1 1678 0
 6384 007a 064B     		ldr	r3, .L304+16
 6385 007c 0022     		movs	r2, #0
 6386 007e 1A70     		strb	r2, [r3]
1679:bluetooth_rxtx.c **** }
 6387              		.loc 1 1679 0
 6388 0080 80BD     		pop	{r7, pc}
 6389              	.L305:
 6390 0082 00BF     		.align	2
 6391              	.L304:
 6392 0084 D6BE898E 		.word	-1903575338
 6393 0088 00000000 		.word	le
 6394 008c 55555500 		.word	5592405
 6395 0090 AAAAAA00 		.word	11184810
 6396 0094 00000000 		.word	do_hop
 6397              		.cfi_endproc
 6398              	.LFE30:
 6400              		.section	.text.reset_le_promisc,"ax",%progbits
 6401              		.align	2
 6402              		.global	reset_le_promisc
 6403              		.thumb
 6404              		.thumb_func
 6406              	reset_le_promisc:
 6407              	.LFB31:
1680:bluetooth_rxtx.c **** 
1681:bluetooth_rxtx.c **** // reset LE Promisc state
1682:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 6408              		.loc 1 1682 0
 6409              		.cfi_startproc
 6410              		@ args = 0, pretend = 0, frame = 0
 6411              		@ frame_needed = 1, uses_anonymous_args = 0
 6412 0000 80B5     		push	{r7, lr}
 6413              		.cfi_def_cfa_offset 8
 6414              		.cfi_offset 7, -8
 6415              		.cfi_offset 14, -4
 6416 0002 00AF     		add	r7, sp, #0
 6417              		.cfi_def_cfa_register 7
1683:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 6418              		.loc 1 1683 0
 6419 0004 0548     		ldr	r0, .L307
 6420 0006 0021     		movs	r1, #0
 6421 0008 4FF48472 		mov	r2, #264
 6422 000c FFF7FEFF 		bl	memset
1684:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 6423              		.loc 1 1684 0
 6424 0010 024B     		ldr	r3, .L307
 6425 0012 4FF0FF32 		mov	r2, #-1
 6426 0016 C3F80021 		str	r2, [r3, #256]
1685:bluetooth_rxtx.c **** }
 6427              		.loc 1 1685 0
 6428 001a 80BD     		pop	{r7, pc}
 6429              	.L308:
 6430              		.align	2
 6431              	.L307:
ARM GAS  /tmp/ccTf0kks.s 			page 142


 6432 001c 00000000 		.word	le_promisc
 6433              		.cfi_endproc
 6434              	.LFE31:
 6436              		.section	.text.bt_generic_le,"ax",%progbits
 6437              		.align	2
 6438              		.global	bt_generic_le
 6439              		.thumb
 6440              		.thumb_func
 6442              	bt_generic_le:
 6443              	.LFB32:
1686:bluetooth_rxtx.c **** 
1687:bluetooth_rxtx.c **** /* generic le mode */
1688:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1689:bluetooth_rxtx.c **** {
 6444              		.loc 1 1689 0
 6445              		.cfi_startproc
 6446              		@ args = 0, pretend = 0, frame = 32
 6447              		@ frame_needed = 1, uses_anonymous_args = 0
 6448 0000 80B5     		push	{r7, lr}
 6449              		.cfi_def_cfa_offset 8
 6450              		.cfi_offset 7, -8
 6451              		.cfi_offset 14, -4
 6452 0002 88B0     		sub	sp, sp, #32
 6453              		.cfi_def_cfa_offset 40
 6454 0004 00AF     		add	r7, sp, #0
 6455              		.cfi_def_cfa_register 7
 6456 0006 0346     		mov	r3, r0
 6457 0008 FB71     		strb	r3, [r7, #7]
1690:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6458              		.loc 1 1690 0
 6459 000a 0023     		movs	r3, #0
 6460 000c FB60     		str	r3, [r7, #12]
1691:bluetooth_rxtx.c **** 	u8 hold;
1692:bluetooth_rxtx.c **** 	int i, j;
1693:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1694:bluetooth_rxtx.c **** 
1695:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6461              		.loc 1 1695 0
 6462 000e A44B     		ldr	r3, .L337
 6463 0010 0122     		movs	r2, #1
 6464 0012 1A70     		strb	r2, [r3]
1696:bluetooth_rxtx.c **** 	mode = active_mode;
 6465              		.loc 1 1696 0
 6466 0014 A34A     		ldr	r2, .L337+4
 6467 0016 FB79     		ldrb	r3, [r7, #7]
 6468 0018 1370     		strb	r3, [r2]
1697:bluetooth_rxtx.c **** 
1698:bluetooth_rxtx.c **** 	reset_le();
 6469              		.loc 1 1698 0
 6470 001a FFF7FEFF 		bl	reset_le
1699:bluetooth_rxtx.c **** 
1700:bluetooth_rxtx.c **** 	// enable USB interrupts
1701:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6471              		.loc 1 1701 0
 6472 001e A24B     		ldr	r3, .L337+8
 6473 0020 4FF08072 		mov	r2, #16777216
 6474 0024 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 143


1702:bluetooth_rxtx.c **** 
1703:bluetooth_rxtx.c **** 	RXLED_CLR;
 6475              		.loc 1 1703 0
 6476 0026 A14B     		ldr	r3, .L337+12
 6477 0028 1022     		movs	r2, #16
 6478 002a 1A60     		str	r2, [r3]
1704:bluetooth_rxtx.c **** 
1705:bluetooth_rxtx.c **** 	queue_init();
 6479              		.loc 1 1705 0
 6480 002c FFF7FEFF 		bl	queue_init
1706:bluetooth_rxtx.c **** 	dio_ssp_init();
 6481              		.loc 1 1706 0
 6482 0030 FFF7FEFF 		bl	dio_ssp_init
1707:bluetooth_rxtx.c **** 	dma_init();
 6483              		.loc 1 1707 0
 6484 0034 FFF7FEFF 		bl	dma_init
1708:bluetooth_rxtx.c **** 	dio_ssp_start();
 6485              		.loc 1 1708 0
 6486 0038 FFF7FEFF 		bl	dio_ssp_start
1709:bluetooth_rxtx.c **** 	cc2400_rx();
 6487              		.loc 1 1709 0
 6488 003c FFF7FEFF 		bl	cc2400_rx
1710:bluetooth_rxtx.c **** 
1711:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6489              		.loc 1 1711 0
 6490 0040 FFF7FEFF 		bl	cs_trigger_enable
1712:bluetooth_rxtx.c **** 
1713:bluetooth_rxtx.c **** 	hold = 0;
 6491              		.loc 1 1713 0
 6492 0044 0023     		movs	r3, #0
 6493 0046 FB77     		strb	r3, [r7, #31]
1714:bluetooth_rxtx.c **** 
1715:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6494              		.loc 1 1715 0
 6495 0048 15E1     		b	.L310
 6496              	.L336:
 6497              	.LBB4:
1716:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6498              		.loc 1 1716 0
 6499 004a 994B     		ldr	r3, .L337+16
 6500 004c 1B88     		ldrh	r3, [r3]	@ movhi
 6501 004e 9BB2     		uxth	r3, r3
 6502 0050 002B     		cmp	r3, #0
 6503 0052 24D0     		beq	.L311
1717:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6504              		.loc 1 1717 0
 6505 0054 6420     		movs	r0, #100
 6506 0056 FFF7FEFF 		bl	cc2400_strobe
1718:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6507              		.loc 1 1718 0
 6508 005a 00BF     		nop
 6509              	.L312:
 6510              		.loc 1 1718 0 is_stmt 0 discriminator 1
 6511 005c FFF7FEFF 		bl	cc2400_status
 6512 0060 0346     		mov	r3, r0
 6513 0062 03F00403 		and	r3, r3, #4
 6514 0066 002B     		cmp	r3, #0
ARM GAS  /tmp/ccTf0kks.s 			page 144


 6515 0068 F8D1     		bne	.L312
1719:bluetooth_rxtx.c **** 
1720:bluetooth_rxtx.c **** 			/* Retune */
1721:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6516              		.loc 1 1721 0 is_stmt 1
 6517 006a 924B     		ldr	r3, .L337+20
 6518 006c 1B88     		ldrh	r3, [r3]	@ movhi
 6519 006e 9BB2     		uxth	r3, r3
 6520 0070 013B     		subs	r3, r3, #1
 6521 0072 9BB2     		uxth	r3, r3
 6522 0074 0220     		movs	r0, #2
 6523 0076 1946     		mov	r1, r3
 6524 0078 FFF7FEFF 		bl	cc2400_set
1722:bluetooth_rxtx.c **** 
1723:bluetooth_rxtx.c **** 			/* Wait for lock */
1724:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6525              		.loc 1 1724 0
 6526 007c 6120     		movs	r0, #97
 6527 007e FFF7FEFF 		bl	cc2400_strobe
1725:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6528              		.loc 1 1725 0
 6529 0082 00BF     		nop
 6530              	.L313:
 6531              		.loc 1 1725 0 is_stmt 0 discriminator 1
 6532 0084 FFF7FEFF 		bl	cc2400_status
 6533 0088 0346     		mov	r3, r0
 6534 008a 03F00403 		and	r3, r3, #4
 6535 008e 002B     		cmp	r3, #0
 6536 0090 F8D0     		beq	.L313
1726:bluetooth_rxtx.c **** 
1727:bluetooth_rxtx.c **** 			/* RX mode */
1728:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6537              		.loc 1 1728 0 is_stmt 1
 6538 0092 6220     		movs	r0, #98
 6539 0094 FFF7FEFF 		bl	cc2400_strobe
1729:bluetooth_rxtx.c **** 
1730:bluetooth_rxtx.c **** 			requested_channel = 0;
 6540              		.loc 1 1730 0
 6541 0098 854B     		ldr	r3, .L337+16
 6542 009a 0022     		movs	r2, #0
 6543 009c 1A80     		strh	r2, [r3]	@ movhi
 6544              	.L311:
1731:bluetooth_rxtx.c **** 		}
1732:bluetooth_rxtx.c **** 
1733:bluetooth_rxtx.c **** 		if (do_hop) {
 6545              		.loc 1 1733 0
 6546 009e 864B     		ldr	r3, .L337+24
 6547 00a0 1B78     		ldrb	r3, [r3]
 6548 00a2 DBB2     		uxtb	r3, r3
 6549 00a4 002B     		cmp	r3, #0
 6550 00a6 02D0     		beq	.L314
1734:bluetooth_rxtx.c **** 			hop();
 6551              		.loc 1 1734 0
 6552 00a8 FFF7FEFF 		bl	hop
 6553 00ac 03E0     		b	.L315
 6554              	.L314:
1735:bluetooth_rxtx.c **** 		} else {
ARM GAS  /tmp/ccTf0kks.s 			page 145


1736:bluetooth_rxtx.c **** 			TXLED_CLR;
 6555              		.loc 1 1736 0
 6556 00ae 7F4B     		ldr	r3, .L337+12
 6557 00b0 4FF48072 		mov	r2, #256
 6558 00b4 1A60     		str	r2, [r3]
 6559              	.L315:
1737:bluetooth_rxtx.c **** 		}
1738:bluetooth_rxtx.c **** 
1739:bluetooth_rxtx.c **** 		RXLED_CLR;
 6560              		.loc 1 1739 0
 6561 00b6 7D4B     		ldr	r3, .L337+12
 6562 00b8 1022     		movs	r2, #16
 6563 00ba 1A60     		str	r2, [r3]
1740:bluetooth_rxtx.c **** 
1741:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1742:bluetooth_rxtx.c **** 		rssi_reset();
 6564              		.loc 1 1742 0
 6565 00bc FFF7FEFF 		bl	rssi_reset
1743:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6566              		.loc 1 1743 0
 6567 00c0 8023     		movs	r3, #128
 6568 00c2 BB74     		strb	r3, [r7, #18]
1744:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 6569              		.loc 1 1744 0
 6570 00c4 22E0     		b	.L316
 6571              	.L319:
1745:bluetooth_rxtx.c **** 		{
1746:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6572              		.loc 1 1746 0
 6573 00c6 0620     		movs	r0, #6
 6574 00c8 FFF7FEFF 		bl	cc2400_get
 6575 00cc 0346     		mov	r3, r0
 6576 00ce 1B0A     		lsrs	r3, r3, #8
 6577 00d0 9BB2     		uxth	r3, r3
 6578 00d2 FB74     		strb	r3, [r7, #19]
1747:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6579              		.loc 1 1747 0
 6580 00d4 794B     		ldr	r3, .L337+28
 6581 00d6 1B78     		ldrb	r3, [r3]
 6582 00d8 DBB2     		uxtb	r3, r3
 6583 00da 002B     		cmp	r3, #0
 6584 00dc 11D0     		beq	.L317
 6585              		.loc 1 1747 0 is_stmt 0 discriminator 1
 6586 00de 97F91230 		ldrsb	r3, [r7, #18]
 6587 00e2 13F1800F 		cmn	r3, #128
 6588 00e6 0CD1     		bne	.L317
1748:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6589              		.loc 1 1748 0 is_stmt 1
 6590 00e8 754B     		ldr	r3, .L337+32
 6591 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6592 00ec 5BB2     		sxtb	r3, r3
 6593 00ee 03F13602 		add	r2, r3, #54
 6594 00f2 97F91330 		ldrsb	r3, [r7, #19]
 6595 00f6 9342     		cmp	r3, r2
 6596 00f8 B8BF     		it	lt
 6597 00fa 1346     		movlt	r3, r2
 6598 00fc FB74     		strb	r3, [r7, #19]
ARM GAS  /tmp/ccTf0kks.s 			page 146


1749:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6599              		.loc 1 1749 0
 6600 00fe FB7C     		ldrb	r3, [r7, #19]
 6601 0100 BB74     		strb	r3, [r7, #18]
 6602              	.L317:
1750:bluetooth_rxtx.c **** 			}
1751:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6603              		.loc 1 1751 0
 6604 0102 97F91330 		ldrsb	r3, [r7, #19]
 6605 0106 1846     		mov	r0, r3
 6606 0108 FFF7FEFF 		bl	rssi_add
 6607              	.L316:
1744:bluetooth_rxtx.c **** 		{
 6608              		.loc 1 1744 0
 6609 010c 6D4B     		ldr	r3, .L337+36
 6610 010e 1B68     		ldr	r3, [r3]
 6611 0110 002B     		cmp	r3, #0
 6612 0112 03D1     		bne	.L318
1744:bluetooth_rxtx.c **** 		{
 6613              		.loc 1 1744 0 is_stmt 0 discriminator 1
 6614 0114 6C4B     		ldr	r3, .L337+40
 6615 0116 1B68     		ldr	r3, [r3]
 6616 0118 002B     		cmp	r3, #0
 6617 011a D4D0     		beq	.L319
 6618              	.L318:
1752:bluetooth_rxtx.c **** 		}
1753:bluetooth_rxtx.c **** 
1754:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1755:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 6619              		.loc 1 1755 0 is_stmt 1
 6620 011c 694B     		ldr	r3, .L337+36
 6621 011e 1B68     		ldr	r3, [r3]
 6622 0120 03F00103 		and	r3, r3, #1
 6623 0124 002B     		cmp	r3, #0
 6624 0126 09D0     		beq	.L320
1756:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 6625              		.loc 1 1756 0
 6626 0128 684B     		ldr	r3, .L337+44
 6627 012a 1B68     		ldr	r3, [r3]
 6628 012c FB60     		str	r3, [r7, #12]
1757:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 6629              		.loc 1 1757 0
 6630 012e 684B     		ldr	r3, .L337+48
 6631 0130 1B68     		ldr	r3, [r3]
 6632 0132 664A     		ldr	r2, .L337+44
 6633 0134 1360     		str	r3, [r2]
1758:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 6634              		.loc 1 1758 0
 6635 0136 664A     		ldr	r2, .L337+48
 6636 0138 FB68     		ldr	r3, [r7, #12]
 6637 013a 1360     		str	r3, [r2]
 6638              	.L320:
1759:bluetooth_rxtx.c **** 		}
1760:bluetooth_rxtx.c **** 
1761:bluetooth_rxtx.c **** 		if (rx_err) {
 6639              		.loc 1 1761 0
 6640 013c 624B     		ldr	r3, .L337+40
ARM GAS  /tmp/ccTf0kks.s 			page 147


 6641 013e 1B68     		ldr	r3, [r3]
 6642 0140 002B     		cmp	r3, #0
 6643 0142 07D0     		beq	.L321
1762:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6644              		.loc 1 1762 0
 6645 0144 634B     		ldr	r3, .L337+52
 6646 0146 1B78     		ldrb	r3, [r3]
 6647 0148 DBB2     		uxtb	r3, r3
 6648 014a 43F00203 		orr	r3, r3, #2
 6649 014e DAB2     		uxtb	r2, r3
 6650 0150 604B     		ldr	r3, .L337+52
 6651 0152 1A70     		strb	r2, [r3]
 6652              	.L321:
1763:bluetooth_rxtx.c **** 		}
1764:bluetooth_rxtx.c **** 
1765:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1766:bluetooth_rxtx.c **** 		if (!rx_tc)
 6653              		.loc 1 1766 0
 6654 0154 5B4B     		ldr	r3, .L337+36
 6655 0156 1B68     		ldr	r3, [r3]
 6656 0158 002B     		cmp	r3, #0
 6657 015a 00D1     		bne	.L322
1767:bluetooth_rxtx.c **** 			goto rx_continue;
 6658              		.loc 1 1767 0
 6659 015c 85E0     		b	.L323
 6660              	.L322:
1768:bluetooth_rxtx.c **** 
1769:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1770:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6661              		.loc 1 1770 0
 6662 015e 594B     		ldr	r3, .L337+36
 6663 0160 1B68     		ldr	r3, [r3]
 6664 0162 012B     		cmp	r3, #1
 6665 0164 07D9     		bls	.L324
1771:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6666              		.loc 1 1771 0
 6667 0166 5B4B     		ldr	r3, .L337+52
 6668 0168 1B78     		ldrb	r3, [r3]
 6669 016a DBB2     		uxtb	r3, r3
 6670 016c 43F00103 		orr	r3, r3, #1
 6671 0170 DAB2     		uxtb	r2, r3
 6672 0172 584B     		ldr	r3, .L337+52
 6673 0174 1A70     		strb	r2, [r3]
 6674              	.L324:
1772:bluetooth_rxtx.c **** 
1773:bluetooth_rxtx.c **** 		rssi_iir_update();
 6675              		.loc 1 1773 0
 6676 0176 FFF7FEFF 		bl	rssi_iir_update
1774:bluetooth_rxtx.c **** 
1775:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1776:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1777:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1778:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1779:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6677              		.loc 1 1779 0
 6678 017a 504B     		ldr	r3, .L337+28
 6679 017c 1B78     		ldrb	r3, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 148


 6680 017e DBB2     		uxtb	r3, r3
 6681 0180 002B     		cmp	r3, #0
 6682 0182 03D1     		bne	.L325
 6683              		.loc 1 1779 0 is_stmt 0 discriminator 1
 6684 0184 544B     		ldr	r3, .L337+56
 6685 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6686 0188 002B     		cmp	r3, #0
 6687 018a 0CD0     		beq	.L326
 6688              	.L325:
1780:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6689              		.loc 1 1780 0 is_stmt 1
 6690 018c 514B     		ldr	r3, .L337+52
 6691 018e 1B78     		ldrb	r3, [r3]
 6692 0190 DBB2     		uxtb	r3, r3
 6693 0192 43F00803 		orr	r3, r3, #8
 6694 0196 DAB2     		uxtb	r2, r3
 6695 0198 4E4B     		ldr	r3, .L337+52
 6696 019a 1A70     		strb	r2, [r3]
1781:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6697              		.loc 1 1781 0
 6698 019c 0223     		movs	r3, #2
 6699 019e FB77     		strb	r3, [r7, #31]
1782:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6700              		.loc 1 1782 0
 6701 01a0 464B     		ldr	r3, .L337+28
 6702 01a2 0022     		movs	r2, #0
 6703 01a4 1A70     		strb	r2, [r3]
 6704              	.L326:
1783:bluetooth_rxtx.c **** 		}
1784:bluetooth_rxtx.c **** 
1785:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6705              		.loc 1 1785 0
 6706 01a6 4D4B     		ldr	r3, .L337+60
 6707 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6708 01aa 5AB2     		sxtb	r2, r3
 6709 01ac 444B     		ldr	r3, .L337+32
 6710 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6711 01b0 5BB2     		sxtb	r3, r3
 6712 01b2 3633     		adds	r3, r3, #54
 6713 01b4 9A42     		cmp	r2, r3
 6714 01b6 09DB     		blt	.L327
1786:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6715              		.loc 1 1786 0
 6716 01b8 464B     		ldr	r3, .L337+52
 6717 01ba 1B78     		ldrb	r3, [r3]
 6718 01bc DBB2     		uxtb	r3, r3
 6719 01be 43F01003 		orr	r3, r3, #16
 6720 01c2 DAB2     		uxtb	r2, r3
 6721 01c4 434B     		ldr	r3, .L337+52
 6722 01c6 1A70     		strb	r2, [r3]
1787:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6723              		.loc 1 1787 0
 6724 01c8 0223     		movs	r3, #2
 6725 01ca FB77     		strb	r3, [r7, #31]
 6726              	.L327:
1788:bluetooth_rxtx.c **** 		}
1789:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccTf0kks.s 			page 149


1790:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1791:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1792:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 6727              		.loc 1 1792 0
 6728 01cc 444B     		ldr	r3, .L337+64
 6729 01ce 1B78     		ldrb	r3, [r3]
 6730 01d0 DBB2     		uxtb	r3, r3
 6731 01d2 002B     		cmp	r3, #0
 6732 01d4 07D0     		beq	.L328
1793:bluetooth_rxtx.c **** 			if (hold == 0)
 6733              		.loc 1 1793 0
 6734 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6735 01d8 002B     		cmp	r3, #0
 6736 01da 01D1     		bne	.L329
1794:bluetooth_rxtx.c **** 				hold = 1;
 6737              		.loc 1 1794 0
 6738 01dc 0123     		movs	r3, #1
 6739 01de FB77     		strb	r3, [r7, #31]
 6740              	.L329:
1795:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 6741              		.loc 1 1795 0
 6742 01e0 3F4B     		ldr	r3, .L337+64
 6743 01e2 0022     		movs	r2, #0
 6744 01e4 1A70     		strb	r2, [r3]
 6745              	.L328:
1796:bluetooth_rxtx.c **** 		}
1797:bluetooth_rxtx.c **** 
1798:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1799:bluetooth_rxtx.c **** 		if (hold == 0) {
 6746              		.loc 1 1799 0
 6747 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6748 01e8 002B     		cmp	r3, #0
 6749 01ea 00D1     		bne	.L330
1800:bluetooth_rxtx.c **** 			goto rx_continue;
 6750              		.loc 1 1800 0
 6751 01ec 3DE0     		b	.L323
 6752              	.L330:
1801:bluetooth_rxtx.c **** 		}
1802:bluetooth_rxtx.c **** 		hold--;
 6753              		.loc 1 1802 0
 6754 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6755 01f0 013B     		subs	r3, r3, #1
 6756 01f2 FB77     		strb	r3, [r7, #31]
1803:bluetooth_rxtx.c **** 
1804:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1805:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 6757              		.loc 1 1805 0
 6758 01f4 3B48     		ldr	r0, .L337+68
 6759 01f6 3C49     		ldr	r1, .L337+72
 6760 01f8 4FF4C872 		mov	r2, #400
 6761 01fc FFF7FEFF 		bl	memcpy
1806:bluetooth_rxtx.c **** 
1807:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1808:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 6762              		.loc 1 1808 0
 6763 0200 0023     		movs	r3, #0
 6764 0202 BB61     		str	r3, [r7, #24]
ARM GAS  /tmp/ccTf0kks.s 			page 150


 6765 0204 25E0     		b	.L331
 6766              	.L334:
1809:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1810:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 6767              		.loc 1 1810 0
 6768 0206 0023     		movs	r3, #0
 6769 0208 7B61     		str	r3, [r7, #20]
 6770 020a 1CE0     		b	.L332
 6771              	.L333:
1811:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6772              		.loc 1 1811 0 discriminator 3
 6773 020c BB69     		ldr	r3, [r7, #24]
 6774 020e 3233     		adds	r3, r3, #50
 6775 0210 DA00     		lsls	r2, r3, #3
 6776 0212 7B69     		ldr	r3, [r7, #20]
 6777 0214 1344     		add	r3, r3, r2
 6778 0216 2E4A     		ldr	r2, .L337+48
 6779 0218 1168     		ldr	r1, [r2]
 6780 021a BA69     		ldr	r2, [r7, #24]
 6781 021c 0A44     		add	r2, r2, r1
 6782 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6783 0220 D209     		lsrs	r2, r2, #7
 6784 0222 D1B2     		uxtb	r1, r2
 6785 0224 2F4A     		ldr	r2, .L337+68
 6786 0226 D154     		strb	r1, [r2, r3]
1812:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6787              		.loc 1 1812 0 discriminator 3
 6788 0228 294B     		ldr	r3, .L337+48
 6789 022a 1A68     		ldr	r2, [r3]
 6790 022c BB69     		ldr	r3, [r7, #24]
 6791 022e 1344     		add	r3, r3, r2
 6792 0230 274A     		ldr	r2, .L337+48
 6793 0232 1168     		ldr	r1, [r2]
 6794 0234 BA69     		ldr	r2, [r7, #24]
 6795 0236 0A44     		add	r2, r2, r1
 6796 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6797 023a 5200     		lsls	r2, r2, #1
 6798 023c D2B2     		uxtb	r2, r2
 6799 023e 1A70     		strb	r2, [r3]
1810:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6800              		.loc 1 1810 0 discriminator 3
 6801 0240 7B69     		ldr	r3, [r7, #20]
 6802 0242 0133     		adds	r3, r3, #1
 6803 0244 7B61     		str	r3, [r7, #20]
 6804              	.L332:
1810:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6805              		.loc 1 1810 0 is_stmt 0 discriminator 1
 6806 0246 7B69     		ldr	r3, [r7, #20]
 6807 0248 072B     		cmp	r3, #7
 6808 024a DFDD     		ble	.L333
1808:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6809              		.loc 1 1808 0 is_stmt 1 discriminator 2
 6810 024c BB69     		ldr	r3, [r7, #24]
 6811 024e 0133     		adds	r3, r3, #1
 6812 0250 BB61     		str	r3, [r7, #24]
 6813              	.L331:
1808:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
ARM GAS  /tmp/ccTf0kks.s 			page 151


 6814              		.loc 1 1808 0 is_stmt 0 discriminator 1
 6815 0252 BB69     		ldr	r3, [r7, #24]
 6816 0254 312B     		cmp	r3, #49
 6817 0256 D6DD     		ble	.L334
1813:bluetooth_rxtx.c **** 			}
1814:bluetooth_rxtx.c **** 		}
1815:bluetooth_rxtx.c **** 
1816:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
 6818              		.loc 1 1816 0 is_stmt 1
 6819 0258 244B     		ldr	r3, .L337+76
 6820 025a 1B68     		ldr	r3, [r3]
 6821 025c 2148     		ldr	r0, .L337+68
 6822 025e 9847     		blx	r3
 6823 0260 B860     		str	r0, [r7, #8]
1817:bluetooth_rxtx.c **** 		if (!ret) break;
 6824              		.loc 1 1817 0
 6825 0262 BB68     		ldr	r3, [r7, #8]
 6826 0264 002B     		cmp	r3, #0
 6827 0266 00D1     		bne	.L323
 6828 0268 0CE0     		b	.L335
 6829              	.L323:
1818:bluetooth_rxtx.c **** 
1819:bluetooth_rxtx.c **** 	rx_continue:
1820:bluetooth_rxtx.c **** 		rx_tc = 0;
 6830              		.loc 1 1820 0
 6831 026a 164B     		ldr	r3, .L337+36
 6832 026c 0022     		movs	r2, #0
 6833 026e 1A60     		str	r2, [r3]
1821:bluetooth_rxtx.c **** 		rx_err = 0;
 6834              		.loc 1 1821 0
 6835 0270 154B     		ldr	r3, .L337+40
 6836 0272 0022     		movs	r2, #0
 6837 0274 1A60     		str	r2, [r3]
 6838              	.L310:
 6839              	.LBE4:
1715:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6840              		.loc 1 1715 0
 6841 0276 1E4B     		ldr	r3, .L337+80
 6842 0278 1B78     		ldrb	r3, [r3]
 6843 027a DBB2     		uxtb	r3, r3
 6844 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6845 027e 9A42     		cmp	r2, r3
 6846 0280 3FF4E3AE 		beq	.L336
 6847              	.L335:
1822:bluetooth_rxtx.c **** 	}
1823:bluetooth_rxtx.c **** 
1824:bluetooth_rxtx.c **** 	// disable USB interrupts
1825:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 6848              		.loc 1 1825 0
 6849 0284 1B4B     		ldr	r3, .L337+84
 6850 0286 4FF08072 		mov	r2, #16777216
 6851 028a 1A60     		str	r2, [r3]
1826:bluetooth_rxtx.c **** 
1827:bluetooth_rxtx.c **** 	// reset the radio completely
1828:bluetooth_rxtx.c **** 	cc2400_idle();
 6852              		.loc 1 1828 0
 6853 028c FFF7FEFF 		bl	cc2400_idle
ARM GAS  /tmp/ccTf0kks.s 			page 152


1829:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6854              		.loc 1 1829 0
 6855 0290 FFF7FEFF 		bl	dio_ssp_stop
1830:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6856              		.loc 1 1830 0
 6857 0294 FFF7FEFF 		bl	cs_trigger_disable
1831:bluetooth_rxtx.c **** }
 6858              		.loc 1 1831 0
 6859 0298 2037     		adds	r7, r7, #32
 6860              		.cfi_def_cfa_offset 8
 6861 029a BD46     		mov	sp, r7
 6862              		.cfi_def_cfa_register 13
 6863              		@ sp needed
 6864 029c 80BD     		pop	{r7, pc}
 6865              	.L338:
 6866 029e 00BF     		.align	2
 6867              	.L337:
 6868 02a0 00000000 		.word	modulation
 6869 02a4 00000000 		.word	mode
 6870 02a8 00E100E0 		.word	-536813312
 6871 02ac 3CC00920 		.word	537509948
 6872 02b0 00000000 		.word	requested_channel
 6873 02b4 00000000 		.word	channel
 6874 02b8 00000000 		.word	do_hop
 6875 02bc 00000000 		.word	cs_trigger
 6876 02c0 00000000 		.word	cs_threshold_cur
 6877 02c4 00000000 		.word	rx_tc
 6878 02c8 00000000 		.word	rx_err
 6879 02cc 00000000 		.word	active_rxbuf
 6880 02d0 00000000 		.word	idle_rxbuf
 6881 02d4 00000000 		.word	status
 6882 02d8 00000000 		.word	cs_no_squelch
 6883 02dc 00000000 		.word	rssi_max
 6884 02e0 00000000 		.word	keepalive_trigger
 6885 02e4 00000000 		.word	unpacked
 6886 02e8 90010000 		.word	unpacked+400
 6887 02ec 00000000 		.word	data_cb
 6888 02f0 00000000 		.word	requested_mode
 6889 02f4 80E100E0 		.word	-536813184
 6890              		.cfi_endproc
 6891              	.LFE32:
 6893              		.section	.text.bt_le_sync,"ax",%progbits
 6894              		.align	2
 6895              		.global	bt_le_sync
 6896              		.thumb
 6897              		.thumb_func
 6899              	bt_le_sync:
 6900              	.LFB33:
1832:bluetooth_rxtx.c **** 
1833:bluetooth_rxtx.c **** 
1834:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1835:bluetooth_rxtx.c **** {
 6901              		.loc 1 1835 0
 6902              		.cfi_startproc
 6903              		@ args = 0, pretend = 0, frame = 104
 6904              		@ frame_needed = 1, uses_anonymous_args = 0
 6905 0000 90B5     		push	{r4, r7, lr}
ARM GAS  /tmp/ccTf0kks.s 			page 153


 6906              		.cfi_def_cfa_offset 12
 6907              		.cfi_offset 4, -12
 6908              		.cfi_offset 7, -8
 6909              		.cfi_offset 14, -4
 6910 0002 9BB0     		sub	sp, sp, #108
 6911              		.cfi_def_cfa_offset 120
 6912 0004 00AF     		add	r7, sp, #0
 6913              		.cfi_def_cfa_register 7
 6914 0006 0346     		mov	r3, r0
 6915 0008 FB71     		strb	r3, [r7, #7]
1836:bluetooth_rxtx.c **** 	int i;
1837:bluetooth_rxtx.c **** 	int8_t rssi;
1838:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1839:bluetooth_rxtx.c **** 
1840:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6916              		.loc 1 1840 0
 6917 000a 874B     		ldr	r3, .L385
 6918 000c 0122     		movs	r2, #1
 6919 000e 1A70     		strb	r2, [r3]
1841:bluetooth_rxtx.c **** 	mode = active_mode;
 6920              		.loc 1 1841 0
 6921 0010 864A     		ldr	r2, .L385+4
 6922 0012 FB79     		ldrb	r3, [r7, #7]
 6923 0014 1370     		strb	r3, [r2]
1842:bluetooth_rxtx.c **** 
1843:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 6924              		.loc 1 1843 0
 6925 0016 864B     		ldr	r3, .L385+8
 6926 0018 0122     		movs	r2, #1
 6927 001a 1A75     		strb	r2, [r3, #20]
1844:bluetooth_rxtx.c **** 
1845:bluetooth_rxtx.c **** 	// enable USB interrupts
1846:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6928              		.loc 1 1846 0
 6929 001c 854B     		ldr	r3, .L385+12
 6930 001e 4FF08072 		mov	r2, #16777216
 6931 0022 1A60     		str	r2, [r3]
1847:bluetooth_rxtx.c **** 
1848:bluetooth_rxtx.c **** 	RXLED_CLR;
 6932              		.loc 1 1848 0
 6933 0024 844B     		ldr	r3, .L385+16
 6934 0026 1022     		movs	r2, #16
 6935 0028 1A60     		str	r2, [r3]
1849:bluetooth_rxtx.c **** 
1850:bluetooth_rxtx.c **** 	queue_init();
 6936              		.loc 1 1850 0
 6937 002a FFF7FEFF 		bl	queue_init
1851:bluetooth_rxtx.c **** 	dio_ssp_init();
 6938              		.loc 1 1851 0
 6939 002e FFF7FEFF 		bl	dio_ssp_init
1852:bluetooth_rxtx.c **** 	dma_init_le();
 6940              		.loc 1 1852 0
 6941 0032 FFF7FEFF 		bl	dma_init_le
1853:bluetooth_rxtx.c **** 	dio_ssp_start();
 6942              		.loc 1 1853 0
 6943 0036 FFF7FEFF 		bl	dio_ssp_start
1854:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccTf0kks.s 			page 154


1855:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 6944              		.loc 1 1855 0
 6945 003a 7D4B     		ldr	r3, .L385+8
 6946 003c 1B68     		ldr	r3, [r3]
 6947 003e 1846     		mov	r0, r3
 6948 0040 FFF7FEFF 		bl	rbit
 6949 0044 0346     		mov	r3, r0
 6950 0046 1846     		mov	r0, r3
 6951 0048 FFF7FEFF 		bl	cc2400_rx_sync
1856:bluetooth_rxtx.c **** 
1857:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6952              		.loc 1 1857 0
 6953 004c 47E2     		b	.L340
 6954              	.L384:
 6955              	.LBB5:
1858:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6956              		.loc 1 1858 0
 6957 004e 7B4B     		ldr	r3, .L385+20
 6958 0050 1B88     		ldrh	r3, [r3]	@ movhi
 6959 0052 9BB2     		uxth	r3, r3
 6960 0054 002B     		cmp	r3, #0
 6961 0056 29D0     		beq	.L341
1859:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6962              		.loc 1 1859 0
 6963 0058 6420     		movs	r0, #100
 6964 005a FFF7FEFF 		bl	cc2400_strobe
1860:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6965              		.loc 1 1860 0
 6966 005e 00BF     		nop
 6967              	.L342:
 6968              		.loc 1 1860 0 is_stmt 0 discriminator 1
 6969 0060 FFF7FEFF 		bl	cc2400_status
 6970 0064 0346     		mov	r3, r0
 6971 0066 03F00403 		and	r3, r3, #4
 6972 006a 002B     		cmp	r3, #0
 6973 006c F8D1     		bne	.L342
1861:bluetooth_rxtx.c **** 
1862:bluetooth_rxtx.c **** 			/* Retune */
1863:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6974              		.loc 1 1863 0 is_stmt 1
 6975 006e 744B     		ldr	r3, .L385+24
 6976 0070 1B88     		ldrh	r3, [r3]	@ movhi
 6977 0072 9BB2     		uxth	r3, r3
 6978 0074 013B     		subs	r3, r3, #1
 6979 0076 9BB2     		uxth	r3, r3
 6980 0078 0220     		movs	r0, #2
 6981 007a 1946     		mov	r1, r3
 6982 007c FFF7FEFF 		bl	cc2400_set
1864:bluetooth_rxtx.c **** 
1865:bluetooth_rxtx.c **** 			/* Wait for lock */
1866:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6983              		.loc 1 1866 0
 6984 0080 6120     		movs	r0, #97
 6985 0082 FFF7FEFF 		bl	cc2400_strobe
1867:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6986              		.loc 1 1867 0
 6987 0086 00BF     		nop
ARM GAS  /tmp/ccTf0kks.s 			page 155


 6988              	.L343:
 6989              		.loc 1 1867 0 is_stmt 0 discriminator 1
 6990 0088 FFF7FEFF 		bl	cc2400_status
 6991 008c 0346     		mov	r3, r0
 6992 008e 03F00403 		and	r3, r3, #4
 6993 0092 002B     		cmp	r3, #0
 6994 0094 F8D0     		beq	.L343
1868:bluetooth_rxtx.c **** 
1869:bluetooth_rxtx.c **** 			/* RX mode */
1870:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6995              		.loc 1 1870 0 is_stmt 1
 6996 0096 6220     		movs	r0, #98
 6997 0098 FFF7FEFF 		bl	cc2400_strobe
1871:bluetooth_rxtx.c **** 
1872:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 6998              		.loc 1 1872 0
 6999 009c 674B     		ldr	r3, .L385+20
 7000 009e 1B88     		ldrh	r3, [r3]	@ movhi
 7001 00a0 9AB2     		uxth	r2, r3
 7002 00a2 684B     		ldr	r3, .L385+28
 7003 00a4 1A80     		strh	r2, [r3]	@ movhi
1873:bluetooth_rxtx.c **** 			requested_channel = 0;
 7004              		.loc 1 1873 0
 7005 00a6 654B     		ldr	r3, .L385+20
 7006 00a8 0022     		movs	r2, #0
 7007 00aa 1A80     		strh	r2, [r3]	@ movhi
 7008              	.L341:
1874:bluetooth_rxtx.c **** 		}
1875:bluetooth_rxtx.c **** 
1876:bluetooth_rxtx.c **** 		RXLED_CLR;
 7009              		.loc 1 1876 0
 7010 00ac 624B     		ldr	r3, .L385+16
 7011 00ae 1022     		movs	r2, #16
 7012 00b0 1A60     		str	r2, [r3]
1877:bluetooth_rxtx.c **** 
1878:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1879:bluetooth_rxtx.c **** 		rssi_reset();
 7013              		.loc 1 1879 0
 7014 00b2 FFF7FEFF 		bl	rssi_reset
1880:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 7015              		.loc 1 1880 0
 7016 00b6 00BF     		nop
 7017              	.L345:
 7018              		.loc 1 1880 0 is_stmt 0 discriminator 4
 7019 00b8 634B     		ldr	r3, .L385+32
 7020 00ba 1B68     		ldr	r3, [r3]
 7021 00bc 002B     		cmp	r3, #0
 7022 00be 0ED1     		bne	.L344
 7023              		.loc 1 1880 0 discriminator 1
 7024 00c0 624B     		ldr	r3, .L385+36
 7025 00c2 1B68     		ldr	r3, [r3]
 7026 00c4 002B     		cmp	r3, #0
 7027 00c6 0AD1     		bne	.L344
 7028              		.loc 1 1880 0 discriminator 2
 7029 00c8 614B     		ldr	r3, .L385+40
 7030 00ca 1B78     		ldrb	r3, [r3]
 7031 00cc DBB2     		uxtb	r3, r3
ARM GAS  /tmp/ccTf0kks.s 			page 156


 7032 00ce 002B     		cmp	r3, #0
 7033 00d0 05D1     		bne	.L344
 7034              		.loc 1 1880 0 discriminator 3
 7035 00d2 604B     		ldr	r3, .L385+44
 7036 00d4 1B78     		ldrb	r3, [r3]
 7037 00d6 DBB2     		uxtb	r3, r3
 7038 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7039 00da 9A42     		cmp	r2, r3
 7040 00dc ECD0     		beq	.L345
 7041              	.L344:
1881:bluetooth_rxtx.c **** 			;
1882:bluetooth_rxtx.c **** 
1883:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 7042              		.loc 1 1883 0 is_stmt 1
 7043 00de 5D4B     		ldr	r3, .L385+44
 7044 00e0 1B78     		ldrb	r3, [r3]
 7045 00e2 DBB2     		uxtb	r3, r3
 7046 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7047 00e6 9A42     		cmp	r2, r3
 7048 00e8 00D0     		beq	.L346
1884:bluetooth_rxtx.c **** 			goto cleanup;
 7049              		.loc 1 1884 0
 7050 00ea FFE1     		b	.L383
 7051              	.L346:
1885:bluetooth_rxtx.c **** 		}
1886:bluetooth_rxtx.c **** 
1887:bluetooth_rxtx.c **** 		if (rx_err) {
 7052              		.loc 1 1887 0
 7053 00ec 574B     		ldr	r3, .L385+36
 7054 00ee 1B68     		ldr	r3, [r3]
 7055 00f0 002B     		cmp	r3, #0
 7056 00f2 07D0     		beq	.L348
1888:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 7057              		.loc 1 1888 0
 7058 00f4 584B     		ldr	r3, .L385+48
 7059 00f6 1B78     		ldrb	r3, [r3]
 7060 00f8 DBB2     		uxtb	r3, r3
 7061 00fa 43F00203 		orr	r3, r3, #2
 7062 00fe DAB2     		uxtb	r2, r3
 7063 0100 554B     		ldr	r3, .L385+48
 7064 0102 1A70     		strb	r2, [r3]
 7065              	.L348:
1889:bluetooth_rxtx.c **** 		}
1890:bluetooth_rxtx.c **** 
1891:bluetooth_rxtx.c **** 		if (do_hop)
 7066              		.loc 1 1891 0
 7067 0104 524B     		ldr	r3, .L385+40
 7068 0106 1B78     		ldrb	r3, [r3]
 7069 0108 DBB2     		uxtb	r3, r3
 7070 010a 002B     		cmp	r3, #0
 7071 010c 00D0     		beq	.L349
1892:bluetooth_rxtx.c **** 			goto rx_flush;
 7072              		.loc 1 1892 0
 7073 010e 2BE1     		b	.L350
 7074              	.L349:
1893:bluetooth_rxtx.c **** 
1894:bluetooth_rxtx.c **** 		/* No DMA transfer? */
ARM GAS  /tmp/ccTf0kks.s 			page 157


1895:bluetooth_rxtx.c **** 		if (!rx_tc)
 7075              		.loc 1 1895 0
 7076 0110 4D4B     		ldr	r3, .L385+32
 7077 0112 1B68     		ldr	r3, [r3]
 7078 0114 002B     		cmp	r3, #0
 7079 0116 00D1     		bne	.L351
 7080 0118 E1E1     		b	.L340
 7081              	.L351:
1896:bluetooth_rxtx.c **** 			continue;
1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** 		/////////////////////
1899:bluetooth_rxtx.c **** 		// process the packet
1900:bluetooth_rxtx.c **** 
1901:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1902:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 7082              		.loc 1 1902 0
 7083 011a 07F10803 		add	r3, r7, #8
 7084 011e FB65     		str	r3, [r7, #92]
1903:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 7085              		.loc 1 1903 0
 7086 0120 434B     		ldr	r3, .L385+8
 7087 0122 1B68     		ldr	r3, [r3]
 7088 0124 BB60     		str	r3, [r7, #8]
1904:bluetooth_rxtx.c **** 
1905:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 7089              		.loc 1 1905 0
 7090 0126 464B     		ldr	r3, .L385+24
 7091 0128 1B88     		ldrh	r3, [r3]	@ movhi
 7092 012a 9BB2     		uxth	r3, r3
 7093 012c DBB2     		uxtb	r3, r3
 7094 012e 623B     		subs	r3, r3, #98
 7095 0130 DBB2     		uxtb	r3, r3
 7096 0132 1846     		mov	r0, r3
 7097 0134 FFF7FEFF 		bl	btle_channel_index
 7098 0138 0346     		mov	r3, r0
 7099 013a 1A46     		mov	r2, r3
 7100 013c 1346     		mov	r3, r2
 7101 013e 5B00     		lsls	r3, r3, #1
 7102 0140 1344     		add	r3, r3, r2
 7103 0142 1B01     		lsls	r3, r3, #4
 7104 0144 454A     		ldr	r2, .L385+52
 7105 0146 1344     		add	r3, r3, r2
 7106 0148 BB65     		str	r3, [r7, #88]
1906:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 7107              		.loc 1 1906 0
 7108 014a 0023     		movs	r3, #0
 7109 014c 7B66     		str	r3, [r7, #100]
 7110 014e 34E0     		b	.L352
 7111              	.L355:
 7112              	.LBB6:
1907:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7113              		.loc 1 1907 0 discriminator 3
 7114 0150 434A     		ldr	r2, .L385+56
 7115 0152 7B6E     		ldr	r3, [r7, #100]
 7116 0154 1344     		add	r3, r3, r2
 7117 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7118 0158 1A06     		lsls	r2, r3, #24
ARM GAS  /tmp/ccTf0kks.s 			page 158


1908:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7119              		.loc 1 1908 0 discriminator 3
 7120 015a 7B6E     		ldr	r3, [r7, #100]
 7121 015c 0133     		adds	r3, r3, #1
 7122 015e 4049     		ldr	r1, .L385+56
 7123 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7124 0162 1B04     		lsls	r3, r3, #16
 7125 0164 1A43     		orrs	r2, r2, r3
1909:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 7126              		.loc 1 1909 0 discriminator 3
 7127 0166 7B6E     		ldr	r3, [r7, #100]
 7128 0168 0233     		adds	r3, r3, #2
 7129 016a 3D49     		ldr	r1, .L385+56
 7130 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7131 016e 1B02     		lsls	r3, r3, #8
 7132 0170 1343     		orrs	r3, r3, r2
1910:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7133              		.loc 1 1910 0 discriminator 3
 7134 0172 7A6E     		ldr	r2, [r7, #100]
 7135 0174 0332     		adds	r2, r2, #3
 7136 0176 3A49     		ldr	r1, .L385+56
 7137 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7138 017a 1343     		orrs	r3, r3, r2
1907:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7139              		.loc 1 1907 0 discriminator 3
 7140 017c 7B65     		str	r3, [r7, #84]
1911:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7141              		.loc 1 1911 0 discriminator 3
 7142 017e 7B6E     		ldr	r3, [r7, #100]
 7143 0180 002B     		cmp	r3, #0
 7144 0182 00DA     		bge	.L353
 7145 0184 0333     		adds	r3, r3, #3
 7146              	.L353:
 7147 0186 9B10     		asrs	r3, r3, #2
 7148 0188 5C1C     		adds	r4, r3, #1
 7149 018a 786D     		ldr	r0, [r7, #84]
 7150 018c FFF7FEFF 		bl	rbit
 7151 0190 0146     		mov	r1, r0
 7152 0192 7B6E     		ldr	r3, [r7, #100]
 7153 0194 002B     		cmp	r3, #0
 7154 0196 00DA     		bge	.L354
 7155 0198 0333     		adds	r3, r3, #3
 7156              	.L354:
 7157 019a 9B10     		asrs	r3, r3, #2
 7158 019c 9B00     		lsls	r3, r3, #2
 7159 019e BA6D     		ldr	r2, [r7, #88]
 7160 01a0 1344     		add	r3, r3, r2
 7161 01a2 1B68     		ldr	r3, [r3]
 7162 01a4 81EA0302 		eor	r2, r1, r3
 7163 01a8 A300     		lsls	r3, r4, #2
 7164 01aa 07F16801 		add	r1, r7, #104
 7165 01ae 0B44     		add	r3, r3, r1
 7166 01b0 43F8602C 		str	r2, [r3, #-96]
 7167              	.LBE6:
1906:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7168              		.loc 1 1906 0 discriminator 3
 7169 01b4 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/ccTf0kks.s 			page 159


 7170 01b6 0433     		adds	r3, r3, #4
 7171 01b8 7B66     		str	r3, [r7, #100]
 7172              	.L352:
1906:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7173              		.loc 1 1906 0 is_stmt 0 discriminator 1
 7174 01ba 7B6E     		ldr	r3, [r7, #100]
 7175 01bc 032B     		cmp	r3, #3
 7176 01be C7DD     		ble	.L355
1912:bluetooth_rxtx.c **** 		}
1913:bluetooth_rxtx.c **** 
1914:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7177              		.loc 1 1914 0 is_stmt 1
 7178 01c0 FB6D     		ldr	r3, [r7, #92]
 7179 01c2 0533     		adds	r3, r3, #5
 7180 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7181 01c6 03F03F03 		and	r3, r3, #63
 7182 01ca 0233     		adds	r3, r3, #2
 7183 01cc 3B65     		str	r3, [r7, #80]
1915:bluetooth_rxtx.c **** 		if (len > 39)
 7184              		.loc 1 1915 0
 7185 01ce 3B6D     		ldr	r3, [r7, #80]
 7186 01d0 272B     		cmp	r3, #39
 7187 01d2 00D9     		bls	.L356
1916:bluetooth_rxtx.c **** 			goto rx_flush;
 7188              		.loc 1 1916 0
 7189 01d4 C8E0     		b	.L350
 7190              	.L356:
1917:bluetooth_rxtx.c **** 
1918:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1919:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1920:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 7191              		.loc 1 1920 0
 7192 01d6 3B6D     		ldr	r3, [r7, #80]
 7193 01d8 0633     		adds	r3, r3, #6
 7194 01da 9B08     		lsrs	r3, r3, #2
 7195 01dc FB64     		str	r3, [r7, #76]
1921:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 7196              		.loc 1 1921 0
 7197 01de FB6C     		ldr	r3, [r7, #76]
 7198 01e0 0A2B     		cmp	r3, #10
 7199 01e2 0DD8     		bhi	.L357
1922:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 7200              		.loc 1 1922 0
 7201 01e4 00BF     		nop
 7202              	.L359:
 7203              		.loc 1 1922 0 is_stmt 0 discriminator 2
 7204 01e6 1F4B     		ldr	r3, .L385+60
 7205 01e8 1A68     		ldr	r2, [r3]
 7206 01ea FB6C     		ldr	r3, [r7, #76]
 7207 01ec 9B00     		lsls	r3, r3, #2
 7208 01ee 1C49     		ldr	r1, .L385+56
 7209 01f0 0B44     		add	r3, r3, r1
 7210 01f2 9A42     		cmp	r2, r3
 7211 01f4 0FD2     		bcs	.L358
 7212              		.loc 1 1922 0 discriminator 1
 7213 01f6 154B     		ldr	r3, .L385+36
 7214 01f8 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 160


 7215 01fa 002B     		cmp	r3, #0
 7216 01fc F3D0     		beq	.L359
 7217 01fe 0AE0     		b	.L358
 7218              	.L357:
1923:bluetooth_rxtx.c **** 				;
1924:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1925:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 7219              		.loc 1 1925 0 is_stmt 1
 7220 0200 00BF     		nop
 7221              	.L360:
 7222              		.loc 1 1925 0 is_stmt 0 discriminator 2
 7223 0202 194B     		ldr	r3, .L385+64
 7224 0204 1B68     		ldr	r3, [r3]
 7225 0206 03F00103 		and	r3, r3, #1
 7226 020a 002B     		cmp	r3, #0
 7227 020c 03D0     		beq	.L358
 7228              		.loc 1 1925 0 discriminator 1
 7229 020e 0F4B     		ldr	r3, .L385+36
 7230 0210 1B68     		ldr	r3, [r3]
 7231 0212 002B     		cmp	r3, #0
 7232 0214 F5D0     		beq	.L360
 7233              	.L358:
1926:bluetooth_rxtx.c **** 				;
1927:bluetooth_rxtx.c **** 		}
1928:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7234              		.loc 1 1928 0 is_stmt 1
 7235 0216 154A     		ldr	r2, .L385+68
 7236 0218 144B     		ldr	r3, .L385+68
 7237 021a 1B68     		ldr	r3, [r3]
 7238 021c 23F00103 		bic	r3, r3, #1
 7239 0220 1360     		str	r3, [r2]
1929:bluetooth_rxtx.c **** 
1930:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1931:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 7240              		.loc 1 1931 0
 7241 0222 0423     		movs	r3, #4
 7242 0224 7B66     		str	r3, [r7, #100]
 7243 0226 58E0     		b	.L361
 7244              	.L386:
 7245              		.align	2
 7246              	.L385:
 7247 0228 00000000 		.word	modulation
 7248 022c 00000000 		.word	mode
 7249 0230 00000000 		.word	le
 7250 0234 00E100E0 		.word	-536813312
 7251 0238 3CC00920 		.word	537509948
 7252 023c 00000000 		.word	requested_channel
 7253 0240 00000000 		.word	channel
 7254 0244 00000000 		.word	saved_request
 7255 0248 00000000 		.word	rx_tc
 7256 024c 00000000 		.word	rx_err
 7257 0250 00000000 		.word	do_hop
 7258 0254 00000000 		.word	requested_mode
 7259 0258 00000000 		.word	status
 7260 025c FC000000 		.word	whitening_word
 7261 0260 00000000 		.word	rxbuf1
 7262 0264 04410050 		.word	1342193924
ARM GAS  /tmp/ccTf0kks.s 			page 161


 7263 0268 10410050 		.word	1342193936
 7264 026c 24000340 		.word	1073938468
 7265              	.L364:
 7266              	.LBB7:
1932:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7267              		.loc 1 1932 0 discriminator 3
 7268 0270 A54A     		ldr	r2, .L387
 7269 0272 7B6E     		ldr	r3, [r7, #100]
 7270 0274 1344     		add	r3, r3, r2
 7271 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7272 0278 1A06     		lsls	r2, r3, #24
1933:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7273              		.loc 1 1933 0 discriminator 3
 7274 027a 7B6E     		ldr	r3, [r7, #100]
 7275 027c 0133     		adds	r3, r3, #1
 7276 027e A249     		ldr	r1, .L387
 7277 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7278 0282 1B04     		lsls	r3, r3, #16
 7279 0284 1A43     		orrs	r2, r2, r3
1934:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 7280              		.loc 1 1934 0 discriminator 3
 7281 0286 7B6E     		ldr	r3, [r7, #100]
 7282 0288 0233     		adds	r3, r3, #2
 7283 028a 9F49     		ldr	r1, .L387
 7284 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7285 028e 1B02     		lsls	r3, r3, #8
 7286 0290 1343     		orrs	r3, r3, r2
1935:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7287              		.loc 1 1935 0 discriminator 3
 7288 0292 7A6E     		ldr	r2, [r7, #100]
 7289 0294 0332     		adds	r2, r2, #3
 7290 0296 9C49     		ldr	r1, .L387
 7291 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7292 029a 1343     		orrs	r3, r3, r2
1932:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7293              		.loc 1 1932 0 discriminator 3
 7294 029c BB64     		str	r3, [r7, #72]
1936:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7295              		.loc 1 1936 0 discriminator 3
 7296 029e 7B6E     		ldr	r3, [r7, #100]
 7297 02a0 002B     		cmp	r3, #0
 7298 02a2 00DA     		bge	.L362
 7299 02a4 0333     		adds	r3, r3, #3
 7300              	.L362:
 7301 02a6 9B10     		asrs	r3, r3, #2
 7302 02a8 5C1C     		adds	r4, r3, #1
 7303 02aa B86C     		ldr	r0, [r7, #72]
 7304 02ac FFF7FEFF 		bl	rbit
 7305 02b0 0146     		mov	r1, r0
 7306 02b2 7B6E     		ldr	r3, [r7, #100]
 7307 02b4 002B     		cmp	r3, #0
 7308 02b6 00DA     		bge	.L363
 7309 02b8 0333     		adds	r3, r3, #3
 7310              	.L363:
 7311 02ba 9B10     		asrs	r3, r3, #2
 7312 02bc 9B00     		lsls	r3, r3, #2
 7313 02be BA6D     		ldr	r2, [r7, #88]
ARM GAS  /tmp/ccTf0kks.s 			page 162


 7314 02c0 1344     		add	r3, r3, r2
 7315 02c2 1B68     		ldr	r3, [r3]
 7316 02c4 81EA0302 		eor	r2, r1, r3
 7317 02c8 A300     		lsls	r3, r4, #2
 7318 02ca 07F16801 		add	r1, r7, #104
 7319 02ce 0B44     		add	r3, r3, r1
 7320 02d0 43F8602C 		str	r2, [r3, #-96]
 7321              	.LBE7:
1931:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7322              		.loc 1 1931 0 discriminator 3
 7323 02d4 7B6E     		ldr	r3, [r7, #100]
 7324 02d6 0433     		adds	r3, r3, #4
 7325 02d8 7B66     		str	r3, [r7, #100]
 7326              	.L361:
1931:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7327              		.loc 1 1931 0 is_stmt 0 discriminator 1
 7328 02da 7B6E     		ldr	r3, [r7, #100]
 7329 02dc 2B2B     		cmp	r3, #43
 7330 02de C7DD     		ble	.L364
1937:bluetooth_rxtx.c **** 		}
1938:bluetooth_rxtx.c **** 
1939:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 7331              		.loc 1 1939 0 is_stmt 1
 7332 02e0 8A4B     		ldr	r3, .L387+4
 7333 02e2 1B69     		ldr	r3, [r3, #16]
 7334 02e4 002B     		cmp	r3, #0
 7335 02e6 23D0     		beq	.L365
 7336              	.LBB8:
1940:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7337              		.loc 1 1940 0
 7338 02e8 884B     		ldr	r3, .L387+4
 7339 02ea D968     		ldr	r1, [r3, #12]
 7340 02ec FB6D     		ldr	r3, [r7, #92]
 7341 02ee 1A1D     		adds	r2, r3, #4
 7342 02f0 3B6D     		ldr	r3, [r7, #80]
 7343 02f2 0846     		mov	r0, r1
 7344 02f4 1146     		mov	r1, r2
 7345 02f6 1A46     		mov	r2, r3
 7346 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 7347 02fc 7864     		str	r0, [r7, #68]
1941:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7348              		.loc 1 1941 0
 7349 02fe 3B6D     		ldr	r3, [r7, #80]
 7350 0300 0633     		adds	r3, r3, #6
 7351 0302 FA6D     		ldr	r2, [r7, #92]
 7352 0304 1344     		add	r3, r3, r2
 7353 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7354 0308 1A04     		lsls	r2, r3, #16
1942:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 7355              		.loc 1 1942 0
 7356 030a 3B6D     		ldr	r3, [r7, #80]
 7357 030c 0533     		adds	r3, r3, #5
 7358 030e F96D     		ldr	r1, [r7, #92]
 7359 0310 0B44     		add	r3, r3, r1
 7360 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7361 0314 1B02     		lsls	r3, r3, #8
 7362 0316 1343     		orrs	r3, r3, r2
ARM GAS  /tmp/ccTf0kks.s 			page 163


1943:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 7363              		.loc 1 1943 0
 7364 0318 3A6D     		ldr	r2, [r7, #80]
 7365 031a 0432     		adds	r2, r2, #4
 7366 031c F96D     		ldr	r1, [r7, #92]
 7367 031e 0A44     		add	r2, r2, r1
 7368 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7369 0322 1343     		orrs	r3, r3, r2
1941:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7370              		.loc 1 1941 0
 7371 0324 3B64     		str	r3, [r7, #64]
1944:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 7372              		.loc 1 1944 0
 7373 0326 7A6C     		ldr	r2, [r7, #68]
 7374 0328 3B6C     		ldr	r3, [r7, #64]
 7375 032a 9A42     		cmp	r2, r3
 7376 032c 00D0     		beq	.L365
1945:bluetooth_rxtx.c **** 				goto rx_flush;
 7377              		.loc 1 1945 0
 7378 032e 1BE0     		b	.L350
 7379              	.L365:
 7380              	.LBE8:
1946:bluetooth_rxtx.c **** 		}
1947:bluetooth_rxtx.c **** 
1948:bluetooth_rxtx.c **** 
1949:bluetooth_rxtx.c **** 		RXLED_SET;
 7381              		.loc 1 1949 0
 7382 0330 774B     		ldr	r3, .L387+8
 7383 0332 1022     		movs	r2, #16
 7384 0334 1A60     		str	r2, [r3]
1950:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 7385              		.loc 1 1950 0
 7386 0336 774B     		ldr	r3, .L387+12
 7387 0338 1B68     		ldr	r3, [r3]
 7388 033a 07F10802 		add	r2, r7, #8
 7389 033e 1046     		mov	r0, r2
 7390 0340 9847     		blx	r3
1951:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 7391              		.loc 1 1951 0
 7392 0342 07F10803 		add	r3, r7, #8
 7393 0346 0120     		movs	r0, #1
 7394 0348 1946     		mov	r1, r3
 7395 034a FFF7FEFF 		bl	enqueue
1952:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 7396              		.loc 1 1952 0
 7397 034e 724B     		ldr	r3, .L387+16
 7398 0350 1B68     		ldr	r3, [r3]
 7399 0352 C3F31303 		ubfx	r3, r3, #0, #20
 7400 0356 40F63542 		movw	r2, #3125
 7401 035a 02FB03F2 		mul	r2, r2, r3
 7402 035e 6F4B     		ldr	r3, .L387+20
 7403 0360 1B68     		ldr	r3, [r3]
 7404 0362 1344     		add	r3, r3, r2
 7405 0364 694A     		ldr	r2, .L387+4
 7406 0366 1364     		str	r3, [r2, #64]
 7407              	.L350:
1953:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccTf0kks.s 			page 164


1954:bluetooth_rxtx.c **** 	rx_flush:
1955:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 7408              		.loc 1 1955 0
 7409 0368 6120     		movs	r0, #97
 7410 036a FFF7FEFF 		bl	cc2400_strobe
1956:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 7411              		.loc 1 1956 0
 7412 036e 00BF     		nop
 7413              	.L366:
 7414              		.loc 1 1956 0 is_stmt 0 discriminator 1
 7415 0370 FFF7FEFF 		bl	cc2400_status
 7416 0374 0346     		mov	r3, r0
 7417 0376 03F00403 		and	r3, r3, #4
 7418 037a 002B     		cmp	r3, #0
 7419 037c F8D0     		beq	.L366
1957:bluetooth_rxtx.c **** 
1958:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
1959:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7420              		.loc 1 1959 0 is_stmt 1
 7421 037e 684A     		ldr	r2, .L387+24
 7422 0380 674B     		ldr	r3, .L387+24
 7423 0382 1B68     		ldr	r3, [r3]
 7424 0384 23F00103 		bic	r3, r3, #1
 7425 0388 1360     		str	r3, [r2]
1960:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7426              		.loc 1 1960 0
 7427 038a 03E0     		b	.L367
 7428              	.L368:
 7429              	.LBB9:
1961:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 7430              		.loc 1 1961 0
 7431 038c 654B     		ldr	r3, .L387+28
 7432 038e 1B68     		ldr	r3, [r3]
 7433 0390 87F83F30 		strb	r3, [r7, #63]
 7434              	.L367:
 7435              	.LBE9:
1960:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7436              		.loc 1 1960 0
 7437 0394 644B     		ldr	r3, .L387+32
 7438 0396 1B68     		ldr	r3, [r3]
 7439 0398 03F00403 		and	r3, r3, #4
 7440 039c 002B     		cmp	r3, #0
 7441 039e F5D1     		bne	.L368
1962:bluetooth_rxtx.c **** 		}
1963:bluetooth_rxtx.c **** 
1964:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
1965:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 7442              		.loc 1 1965 0
 7443 03a0 5D4B     		ldr	r3, .L387+16
 7444 03a2 1B68     		ldr	r3, [r3]
 7445 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 7446 03a8 40F63542 		movw	r2, #3125
 7447 03ac 02FB03F2 		mul	r2, r2, r3
 7448 03b0 5A4B     		ldr	r3, .L387+20
 7449 03b2 1B68     		ldr	r3, [r3]
 7450 03b4 1344     		add	r3, r3, r2
 7451 03b6 3B66     		str	r3, [r7, #96]
ARM GAS  /tmp/ccTf0kks.s 			page 165


1966:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 7452              		.loc 1 1966 0
 7453 03b8 544B     		ldr	r3, .L387+4
 7454 03ba 1A6C     		ldr	r2, [r3, #64]
 7455 03bc 3B6E     		ldr	r3, [r7, #96]
 7456 03be 9A42     		cmp	r2, r3
 7457 03c0 05D9     		bls	.L369
1967:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
 7458              		.loc 1 1967 0
 7459 03c2 3B6E     		ldr	r3, [r7, #96]
 7460 03c4 03F14343 		add	r3, r3, #-1023410176
 7461 03c8 03F5A003 		add	r3, r3, #5242880
 7462 03cc 3B66     		str	r3, [r7, #96]
 7463              	.L369:
1968:bluetooth_rxtx.c **** 		if  ( // timeout
1969:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 7464              		.loc 1 1969 0
 7465 03ce 4F4B     		ldr	r3, .L387+4
 7466 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
1968:bluetooth_rxtx.c **** 		if  ( // timeout
 7467              		.loc 1 1968 0
 7468 03d2 032B     		cmp	r3, #3
 7469 03d4 03D0     		beq	.L370
 7470              		.loc 1 1969 0
 7471 03d6 4D4B     		ldr	r3, .L387+4
 7472 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7473 03da 022B     		cmp	r3, #2
 7474 03dc 06D1     		bne	.L371
 7475              	.L370:
1970:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 7476              		.loc 1 1970 0
 7477 03de 4B4B     		ldr	r3, .L387+4
 7478 03e0 1B6C     		ldr	r3, [r3, #64]
 7479 03e2 3A6E     		ldr	r2, [r7, #96]
 7480 03e4 D31A     		subs	r3, r2, r3
 7481 03e6 514A     		ldr	r2, .L387+36
 7482 03e8 9342     		cmp	r3, r2
 7483 03ea 03D8     		bhi	.L372
 7484              	.L371:
1971:bluetooth_rxtx.c **** 			// jam finished
1972:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 7485              		.loc 1 1972 0
 7486 03ec 504B     		ldr	r3, .L387+40
 7487 03ee 1B68     		ldr	r3, [r3]
 7488 03f0 012B     		cmp	r3, #1
 7489 03f2 37D1     		bne	.L373
 7490              	.L372:
1973:bluetooth_rxtx.c **** 			)
1974:bluetooth_rxtx.c **** 		{
1975:bluetooth_rxtx.c **** 			reset_le();
 7491              		.loc 1 1975 0
 7492 03f4 FFF7FEFF 		bl	reset_le
1976:bluetooth_rxtx.c **** 			le_jam_count = 0;
 7493              		.loc 1 1976 0
 7494 03f8 4D4B     		ldr	r3, .L387+40
 7495 03fa 0022     		movs	r2, #0
 7496 03fc 1A60     		str	r2, [r3]
ARM GAS  /tmp/ccTf0kks.s 			page 166


1977:bluetooth_rxtx.c **** 			TXLED_CLR;
 7497              		.loc 1 1977 0
 7498 03fe 4D4B     		ldr	r3, .L387+44
 7499 0400 4FF48072 		mov	r2, #256
 7500 0404 1A60     		str	r2, [r3]
1978:bluetooth_rxtx.c **** 
1979:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 7501              		.loc 1 1979 0
 7502 0406 4C4B     		ldr	r3, .L387+48
 7503 0408 1B78     		ldrb	r3, [r3]
 7504 040a DBB2     		uxtb	r3, r3
 7505 040c 012B     		cmp	r3, #1
 7506 040e 06D1     		bne	.L374
1980:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 7507              		.loc 1 1980 0
 7508 0410 494B     		ldr	r3, .L387+48
 7509 0412 0022     		movs	r2, #0
 7510 0414 1A70     		strb	r2, [r3]
1981:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 7511              		.loc 1 1981 0
 7512 0416 494B     		ldr	r3, .L387+52
 7513 0418 0022     		movs	r2, #0
 7514 041a 1A70     		strb	r2, [r3]
1982:bluetooth_rxtx.c **** 				goto cleanup;
 7515              		.loc 1 1982 0
 7516 041c 66E0     		b	.L383
 7517              	.L374:
1983:bluetooth_rxtx.c **** 			}
1984:bluetooth_rxtx.c **** 
1985:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
1986:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 7518              		.loc 1 1986 0
 7519 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7520 0420 0A2B     		cmp	r3, #10
 7521 0422 01D1     		bne	.L375
1987:bluetooth_rxtx.c **** 				goto cleanup;
 7522              		.loc 1 1987 0
 7523 0424 00BF     		nop
 7524 0426 61E0     		b	.L383
 7525              	.L375:
1988:bluetooth_rxtx.c **** 
1989:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 7526              		.loc 1 1989 0
 7527 0428 384B     		ldr	r3, .L387+4
 7528 042a 0122     		movs	r2, #1
 7529 042c 1A75     		strb	r2, [r3, #20]
1990:bluetooth_rxtx.c **** 
1991:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7530              		.loc 1 1991 0
 7531 042e 6420     		movs	r0, #100
 7532 0430 FFF7FEFF 		bl	cc2400_strobe
1992:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7533              		.loc 1 1992 0
 7534 0434 00BF     		nop
 7535              	.L376:
 7536              		.loc 1 1992 0 is_stmt 0 discriminator 1
 7537 0436 FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/ccTf0kks.s 			page 167


 7538 043a 0346     		mov	r3, r0
 7539 043c 03F00403 		and	r3, r3, #4
 7540 0440 002B     		cmp	r3, #0
 7541 0442 F8D1     		bne	.L376
1993:bluetooth_rxtx.c **** 
1994:bluetooth_rxtx.c **** 			/* Retune */
1995:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 7542              		.loc 1 1995 0 is_stmt 1
 7543 0444 3E4B     		ldr	r3, .L387+56
 7544 0446 1B88     		ldrh	r3, [r3]	@ movhi
 7545 0448 9BB2     		uxth	r3, r3
 7546 044a 002B     		cmp	r3, #0
 7547 044c 03D0     		beq	.L377
 7548              		.loc 1 1995 0 is_stmt 0 discriminator 1
 7549 044e 3C4B     		ldr	r3, .L387+56
 7550 0450 1B88     		ldrh	r3, [r3]	@ movhi
 7551 0452 9BB2     		uxth	r3, r3
 7552 0454 01E0     		b	.L378
 7553              	.L377:
 7554              		.loc 1 1995 0 discriminator 2
 7555 0456 40F66213 		movw	r3, #2402
 7556              	.L378:
 7557              		.loc 1 1995 0 discriminator 4
 7558 045a 3A4A     		ldr	r2, .L387+60
 7559 045c 1380     		strh	r3, [r2]	@ movhi
1996:bluetooth_rxtx.c **** 			restart_jamming = 1;
 7560              		.loc 1 1996 0 is_stmt 1 discriminator 4
 7561 045e 3A4B     		ldr	r3, .L387+64
 7562 0460 0122     		movs	r2, #1
 7563 0462 1A60     		str	r2, [r3]
 7564              	.L373:
1997:bluetooth_rxtx.c **** 		}
1998:bluetooth_rxtx.c **** 
1999:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 7565              		.loc 1 1999 0
 7566 0464 294B     		ldr	r3, .L387+4
 7567 0466 DB88     		ldrh	r3, [r3, #6]
 7568 0468 2C20     		movs	r0, #44
 7569 046a 1946     		mov	r1, r3
 7570 046c FFF7FEFF 		bl	cc2400_set
2000:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 7571              		.loc 1 2000 0
 7572 0470 264B     		ldr	r3, .L387+4
 7573 0472 9B88     		ldrh	r3, [r3, #4]
 7574 0474 2D20     		movs	r0, #45
 7575 0476 1946     		mov	r1, r3
 7576 0478 FFF7FEFF 		bl	cc2400_set
2001:bluetooth_rxtx.c **** 
2002:bluetooth_rxtx.c **** 		if (do_hop)
 7577              		.loc 1 2002 0
 7578 047c 334B     		ldr	r3, .L387+68
 7579 047e 1B78     		ldrb	r3, [r3]
 7580 0480 DBB2     		uxtb	r3, r3
 7581 0482 002B     		cmp	r3, #0
 7582 0484 01D0     		beq	.L379
2003:bluetooth_rxtx.c **** 			hop();
 7583              		.loc 1 2003 0
ARM GAS  /tmp/ccTf0kks.s 			page 168


 7584 0486 FFF7FEFF 		bl	hop
 7585              	.L379:
2004:bluetooth_rxtx.c **** 
2005:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2006:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 7586              		.loc 1 2006 0
 7587 048a 294B     		ldr	r3, .L387+40
 7588 048c 1B68     		ldr	r3, [r3]
 7589 048e 002B     		cmp	r3, #0
 7590 0490 07DD     		ble	.L380
2007:bluetooth_rxtx.c **** 			le_jam();
 7591              		.loc 1 2007 0
 7592 0492 FFF7FEFF 		bl	le_jam
2008:bluetooth_rxtx.c **** 			--le_jam_count;
 7593              		.loc 1 2008 0
 7594 0496 264B     		ldr	r3, .L387+40
 7595 0498 1B68     		ldr	r3, [r3]
 7596 049a 013B     		subs	r3, r3, #1
 7597 049c 244A     		ldr	r2, .L387+40
 7598 049e 1360     		str	r3, [r2]
 7599 04a0 17E0     		b	.L381
 7600              	.L380:
2009:bluetooth_rxtx.c **** 		} else {
2010:bluetooth_rxtx.c **** 			/* RX mode */
2011:bluetooth_rxtx.c **** 			dma_init_le();
 7601              		.loc 1 2011 0
 7602 04a2 FFF7FEFF 		bl	dma_init_le
2012:bluetooth_rxtx.c **** 			dio_ssp_start();
 7603              		.loc 1 2012 0
 7604 04a6 FFF7FEFF 		bl	dio_ssp_start
2013:bluetooth_rxtx.c **** 
2014:bluetooth_rxtx.c **** 			if (restart_jamming) {
 7605              		.loc 1 2014 0
 7606 04aa 274B     		ldr	r3, .L387+64
 7607 04ac 1B68     		ldr	r3, [r3]
 7608 04ae 002B     		cmp	r3, #0
 7609 04b0 0CD0     		beq	.L382
2015:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 7610              		.loc 1 2015 0
 7611 04b2 164B     		ldr	r3, .L387+4
 7612 04b4 1B68     		ldr	r3, [r3]
 7613 04b6 1846     		mov	r0, r3
 7614 04b8 FFF7FEFF 		bl	rbit
 7615 04bc 0346     		mov	r3, r0
 7616 04be 1846     		mov	r0, r3
 7617 04c0 FFF7FEFF 		bl	cc2400_rx_sync
2016:bluetooth_rxtx.c **** 				restart_jamming = 0;
 7618              		.loc 1 2016 0
 7619 04c4 204B     		ldr	r3, .L387+64
 7620 04c6 0022     		movs	r2, #0
 7621 04c8 1A60     		str	r2, [r3]
 7622 04ca 02E0     		b	.L381
 7623              	.L382:
2017:bluetooth_rxtx.c **** 			} else {
2018:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 7624              		.loc 1 2018 0
 7625 04cc 6220     		movs	r0, #98
ARM GAS  /tmp/ccTf0kks.s 			page 169


 7626 04ce FFF7FEFF 		bl	cc2400_strobe
 7627              	.L381:
2019:bluetooth_rxtx.c **** 			}
2020:bluetooth_rxtx.c **** 		}
2021:bluetooth_rxtx.c **** 
2022:bluetooth_rxtx.c **** 		rx_tc = 0;
 7628              		.loc 1 2022 0
 7629 04d2 1F4B     		ldr	r3, .L387+72
 7630 04d4 0022     		movs	r2, #0
 7631 04d6 1A60     		str	r2, [r3]
2023:bluetooth_rxtx.c **** 		rx_err = 0;
 7632              		.loc 1 2023 0
 7633 04d8 1E4B     		ldr	r3, .L387+76
 7634 04da 0022     		movs	r2, #0
 7635 04dc 1A60     		str	r2, [r3]
 7636              	.L340:
 7637              	.LBE5:
1857:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7638              		.loc 1 1857 0
 7639 04de 174B     		ldr	r3, .L387+52
 7640 04e0 1B78     		ldrb	r3, [r3]
 7641 04e2 DBB2     		uxtb	r3, r3
 7642 04e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7643 04e6 9A42     		cmp	r2, r3
 7644 04e8 3FF4B1AD 		beq	.L384
 7645              	.L383:
2024:bluetooth_rxtx.c **** 	}
2025:bluetooth_rxtx.c **** 
2026:bluetooth_rxtx.c **** cleanup:
2027:bluetooth_rxtx.c **** 
2028:bluetooth_rxtx.c **** 	// disable USB interrupts
2029:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7646              		.loc 1 2029 0
 7647 04ec 1A4B     		ldr	r3, .L387+80
 7648 04ee 4FF08072 		mov	r2, #16777216
 7649 04f2 1A60     		str	r2, [r3]
2030:bluetooth_rxtx.c **** 
2031:bluetooth_rxtx.c **** 	// reset the radio completely
2032:bluetooth_rxtx.c **** 	cc2400_idle();
 7650              		.loc 1 2032 0
 7651 04f4 FFF7FEFF 		bl	cc2400_idle
2033:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7652              		.loc 1 2033 0
 7653 04f8 FFF7FEFF 		bl	dio_ssp_stop
2034:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7654              		.loc 1 2034 0
 7655 04fc FFF7FEFF 		bl	cs_trigger_disable
2035:bluetooth_rxtx.c **** }
 7656              		.loc 1 2035 0
 7657 0500 6C37     		adds	r7, r7, #108
 7658              		.cfi_def_cfa_offset 12
 7659 0502 BD46     		mov	sp, r7
 7660              		.cfi_def_cfa_register 13
 7661              		@ sp needed
 7662 0504 90BD     		pop	{r4, r7, pc}
 7663              	.L388:
 7664 0506 00BF     		.align	2
ARM GAS  /tmp/ccTf0kks.s 			page 170


 7665              	.L387:
 7666 0508 00000000 		.word	rxbuf1
 7667 050c 00000000 		.word	le
 7668 0510 38C00920 		.word	537509944
 7669 0514 00000000 		.word	packet_cb
 7670 0518 00000000 		.word	clkn
 7671 051c 08400040 		.word	1073758216
 7672 0520 24000340 		.word	1073938468
 7673 0524 08000340 		.word	1073938440
 7674 0528 0C000340 		.word	1073938444
 7675 052c 80F0FA02 		.word	50000000
 7676 0530 00000000 		.word	le_jam_count
 7677 0534 3CC00920 		.word	537509948
 7678 0538 00000000 		.word	jam_mode
 7679 053c 00000000 		.word	requested_mode
 7680 0540 00000000 		.word	saved_request
 7681 0544 00000000 		.word	channel
 7682 0548 D4000000 		.word	restart_jamming.4709
 7683 054c 00000000 		.word	do_hop
 7684 0550 00000000 		.word	rx_tc
 7685 0554 00000000 		.word	rx_err
 7686 0558 80E100E0 		.word	-536813184
 7687              		.cfi_endproc
 7688              	.LFE33:
 7690              		.section	.text.cb_follow_le,"ax",%progbits
 7691              		.align	2
 7692              		.global	cb_follow_le
 7693              		.thumb
 7694              		.thumb_func
 7696              	cb_follow_le:
 7697              	.LFB34:
2036:bluetooth_rxtx.c **** 
2037:bluetooth_rxtx.c **** 
2038:bluetooth_rxtx.c **** 
2039:bluetooth_rxtx.c **** /* low energy connection following
2040:bluetooth_rxtx.c ****  * follows a known AA around */
2041:bluetooth_rxtx.c **** int cb_follow_le() {
 7698              		.loc 1 2041 0
 7699              		.cfi_startproc
 7700              		@ args = 0, pretend = 0, frame = 48
 7701              		@ frame_needed = 1, uses_anonymous_args = 0
 7702 0000 80B5     		push	{r7, lr}
 7703              		.cfi_def_cfa_offset 8
 7704              		.cfi_offset 7, -8
 7705              		.cfi_offset 14, -4
 7706 0002 8CB0     		sub	sp, sp, #48
 7707              		.cfi_def_cfa_offset 56
 7708 0004 00AF     		add	r7, sp, #0
 7709              		.cfi_def_cfa_register 7
2042:bluetooth_rxtx.c **** 	int i, j, k;
2043:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 7710              		.loc 1 2043 0
 7711 0006 6C4B     		ldr	r3, .L405
 7712 0008 1B88     		ldrh	r3, [r3]	@ movhi
 7713 000a 9BB2     		uxth	r3, r3
 7714 000c DBB2     		uxtb	r3, r3
 7715 000e 623B     		subs	r3, r3, #98
ARM GAS  /tmp/ccTf0kks.s 			page 171


 7716 0010 DBB2     		uxtb	r3, r3
 7717 0012 1846     		mov	r0, r3
 7718 0014 FFF7FEFF 		bl	btle_channel_index
 7719 0018 0346     		mov	r3, r0
 7720 001a 1A46     		mov	r2, r3
 7721 001c 674B     		ldr	r3, .L405+4
 7722 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7723 0020 3B62     		str	r3, [r7, #32]
2044:bluetooth_rxtx.c **** 
2045:bluetooth_rxtx.c **** 	u32 access_address = 0;
 7724              		.loc 1 2045 0
 7725 0022 0023     		movs	r3, #0
 7726 0024 FB61     		str	r3, [r7, #28]
2046:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7727              		.loc 1 2046 0
 7728 0026 0023     		movs	r3, #0
 7729 0028 FB62     		str	r3, [r7, #44]
 7730 002a 0EE0     		b	.L390
 7731              	.L391:
2047:bluetooth_rxtx.c **** 		access_address >>= 1;
 7732              		.loc 1 2047 0 discriminator 3
 7733 002c FB69     		ldr	r3, [r7, #28]
 7734 002e 5B08     		lsrs	r3, r3, #1
 7735 0030 FB61     		str	r3, [r7, #28]
2048:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7736              		.loc 1 2048 0 discriminator 3
 7737 0032 634A     		ldr	r2, .L405+8
 7738 0034 FB6A     		ldr	r3, [r7, #44]
 7739 0036 1344     		add	r3, r3, r2
 7740 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7741 003a DB07     		lsls	r3, r3, #31
 7742 003c 1A46     		mov	r2, r3
 7743 003e FB69     		ldr	r3, [r7, #28]
 7744 0040 1343     		orrs	r3, r3, r2
 7745 0042 FB61     		str	r3, [r7, #28]
2046:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7746              		.loc 1 2046 0 discriminator 3
 7747 0044 FB6A     		ldr	r3, [r7, #44]
 7748 0046 0133     		adds	r3, r3, #1
 7749 0048 FB62     		str	r3, [r7, #44]
 7750              	.L390:
2046:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7751              		.loc 1 2046 0 is_stmt 0 discriminator 1
 7752 004a FB6A     		ldr	r3, [r7, #44]
 7753 004c 1E2B     		cmp	r3, #30
 7754 004e EDDD     		ble	.L391
2049:bluetooth_rxtx.c **** 	}
2050:bluetooth_rxtx.c **** 
2051:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 7755              		.loc 1 2051 0 is_stmt 1
 7756 0050 1F23     		movs	r3, #31
 7757 0052 FB62     		str	r3, [r7, #44]
 7758 0054 A6E0     		b	.L392
 7759              	.L403:
2052:bluetooth_rxtx.c **** 		access_address >>= 1;
 7760              		.loc 1 2052 0
 7761 0056 FB69     		ldr	r3, [r7, #28]
ARM GAS  /tmp/ccTf0kks.s 			page 172


 7762 0058 5B08     		lsrs	r3, r3, #1
 7763 005a FB61     		str	r3, [r7, #28]
2053:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7764              		.loc 1 2053 0
 7765 005c 584A     		ldr	r2, .L405+8
 7766 005e FB6A     		ldr	r3, [r7, #44]
 7767 0060 1344     		add	r3, r3, r2
 7768 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7769 0064 DB07     		lsls	r3, r3, #31
 7770 0066 1A46     		mov	r2, r3
 7771 0068 FB69     		ldr	r3, [r7, #28]
 7772 006a 1343     		orrs	r3, r3, r2
 7773 006c FB61     		str	r3, [r7, #28]
2054:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 7774              		.loc 1 2054 0
 7775 006e 554B     		ldr	r3, .L405+12
 7776 0070 1A68     		ldr	r2, [r3]
 7777 0072 FB69     		ldr	r3, [r7, #28]
 7778 0074 9A42     		cmp	r2, r3
 7779 0076 40F09280 		bne	.L393
2055:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 7780              		.loc 1 2055 0
 7781 007a 0023     		movs	r3, #0
 7782 007c BB62     		str	r3, [r7, #40]
 7783 007e 48E0     		b	.L394
 7784              	.L400:
 7785              	.LBB10:
2056:bluetooth_rxtx.c **** 				u8 byte = 0;
 7786              		.loc 1 2056 0
 7787 0080 0023     		movs	r3, #0
 7788 0082 FB76     		strb	r3, [r7, #27]
2057:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 7789              		.loc 1 2057 0
 7790 0084 0023     		movs	r3, #0
 7791 0086 7B62     		str	r3, [r7, #36]
 7792 0088 37E0     		b	.L395
 7793              	.L399:
 7794              	.LBB11:
2058:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7795              		.loc 1 2058 0
 7796 008a BB6A     		ldr	r3, [r7, #40]
 7797 008c DA00     		lsls	r2, r3, #3
 7798 008e 7B6A     		ldr	r3, [r7, #36]
 7799 0090 1A44     		add	r2, r2, r3
 7800 0092 FB6A     		ldr	r3, [r7, #44]
 7801 0094 1344     		add	r3, r3, r2
 7802 0096 1F3B     		subs	r3, r3, #31
 7803 0098 3B61     		str	r3, [r7, #16]
2059:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 7804              		.loc 1 2059 0
 7805 009a 3B69     		ldr	r3, [r7, #16]
 7806 009c B3F5487F 		cmp	r3, #800
 7807 00a0 00DB     		blt	.L396
 7808 00a2 2DE0     		b	.L397
 7809              	.L396:
2060:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 7810              		.loc 1 2060 0
ARM GAS  /tmp/ccTf0kks.s 			page 173


 7811 00a4 464A     		ldr	r2, .L405+8
 7812 00a6 3B69     		ldr	r3, [r7, #16]
 7813 00a8 1344     		add	r3, r3, r2
 7814 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7815 00ac 7B61     		str	r3, [r7, #20]
2061:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
 7816              		.loc 1 2061 0
 7817 00ae BB6A     		ldr	r3, [r7, #40]
 7818 00b0 032B     		cmp	r3, #3
 7819 00b2 16DD     		ble	.L398
2062:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 7820              		.loc 1 2062 0
 7821 00b4 444A     		ldr	r2, .L405+16
 7822 00b6 3B6A     		ldr	r3, [r7, #32]
 7823 00b8 1344     		add	r3, r3, r2
 7824 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7825 00bc 1A46     		mov	r2, r3
 7826 00be 7B69     		ldr	r3, [r7, #20]
 7827 00c0 5340     		eors	r3, r3, r2
 7828 00c2 7B61     		str	r3, [r7, #20]
2063:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 7829              		.loc 1 2063 0
 7830 00c4 3B6A     		ldr	r3, [r7, #32]
 7831 00c6 0133     		adds	r3, r3, #1
 7832 00c8 1946     		mov	r1, r3
 7833 00ca 404B     		ldr	r3, .L405+20
 7834 00cc A1FB0323 		umull	r2, r3, r1, r3
 7835 00d0 C81A     		subs	r0, r1, r3
 7836 00d2 4008     		lsrs	r0, r0, #1
 7837 00d4 0344     		add	r3, r3, r0
 7838 00d6 9A09     		lsrs	r2, r3, #6
 7839 00d8 1346     		mov	r3, r2
 7840 00da DB01     		lsls	r3, r3, #7
 7841 00dc 9B1A     		subs	r3, r3, r2
 7842 00de CA1A     		subs	r2, r1, r3
 7843 00e0 3A62     		str	r2, [r7, #32]
 7844              	.L398:
2064:bluetooth_rxtx.c **** 					}
2065:bluetooth_rxtx.c **** 					byte |= bit << k;
 7845              		.loc 1 2065 0 discriminator 2
 7846 00e2 7A69     		ldr	r2, [r7, #20]
 7847 00e4 7B6A     		ldr	r3, [r7, #36]
 7848 00e6 02FA03F3 		lsl	r3, r2, r3
 7849 00ea DAB2     		uxtb	r2, r3
 7850 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 7851 00ee 1343     		orrs	r3, r3, r2
 7852 00f0 DBB2     		uxtb	r3, r3
 7853 00f2 FB76     		strb	r3, [r7, #27]
 7854              	.LBE11:
2057:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7855              		.loc 1 2057 0 discriminator 2
 7856 00f4 7B6A     		ldr	r3, [r7, #36]
 7857 00f6 0133     		adds	r3, r3, #1
 7858 00f8 7B62     		str	r3, [r7, #36]
 7859              	.L395:
2057:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7860              		.loc 1 2057 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/ccTf0kks.s 			page 174


 7861 00fa 7B6A     		ldr	r3, [r7, #36]
 7862 00fc 072B     		cmp	r3, #7
 7863 00fe C4DD     		ble	.L399
 7864              	.L397:
2066:bluetooth_rxtx.c **** 				}
2067:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
 7865              		.loc 1 2067 0 is_stmt 1 discriminator 2
 7866 0100 334B     		ldr	r3, .L405+24
 7867 0102 1A68     		ldr	r2, [r3]
 7868 0104 BB6A     		ldr	r3, [r7, #40]
 7869 0106 1344     		add	r3, r3, r2
 7870 0108 FA7E     		ldrb	r2, [r7, #27]
 7871 010a 1A70     		strb	r2, [r3]
 7872              	.LBE10:
2055:bluetooth_rxtx.c **** 				u8 byte = 0;
 7873              		.loc 1 2055 0 discriminator 2
 7874 010c BB6A     		ldr	r3, [r7, #40]
 7875 010e 0133     		adds	r3, r3, #1
 7876 0110 BB62     		str	r3, [r7, #40]
 7877              	.L394:
2055:bluetooth_rxtx.c **** 				u8 byte = 0;
 7878              		.loc 1 2055 0 is_stmt 0 discriminator 1
 7879 0112 BB6A     		ldr	r3, [r7, #40]
 7880 0114 2D2B     		cmp	r3, #45
 7881 0116 B3DD     		ble	.L400
2068:bluetooth_rxtx.c **** 			}
2069:bluetooth_rxtx.c **** 
2070:bluetooth_rxtx.c **** 			// verify CRC
2071:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 7882              		.loc 1 2071 0 is_stmt 1
 7883 0118 2A4B     		ldr	r3, .L405+12
 7884 011a 1B69     		ldr	r3, [r3, #16]
 7885 011c 002B     		cmp	r3, #0
 7886 011e 2ED0     		beq	.L401
 7887              	.LBB12:
2072:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 7888              		.loc 1 2072 0
 7889 0120 2B4B     		ldr	r3, .L405+24
 7890 0122 1B68     		ldr	r3, [r3]
 7891 0124 0533     		adds	r3, r3, #5
 7892 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7893 0128 03F03F03 		and	r3, r3, #63
 7894 012c 0233     		adds	r3, r3, #2
 7895 012e FB60     		str	r3, [r7, #12]
2073:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 7896              		.loc 1 2073 0
 7897 0130 244B     		ldr	r3, .L405+12
 7898 0132 DA68     		ldr	r2, [r3, #12]
 7899 0134 264B     		ldr	r3, .L405+24
 7900 0136 1B68     		ldr	r3, [r3]
 7901 0138 0433     		adds	r3, r3, #4
 7902 013a 1046     		mov	r0, r2
 7903 013c 1946     		mov	r1, r3
 7904 013e FA68     		ldr	r2, [r7, #12]
 7905 0140 FFF7FEFF 		bl	btle_crcgen_lut
 7906 0144 B860     		str	r0, [r7, #8]
2074:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
ARM GAS  /tmp/ccTf0kks.s 			page 175


 7907              		.loc 1 2074 0
 7908 0146 224B     		ldr	r3, .L405+24
 7909 0148 1A68     		ldr	r2, [r3]
 7910 014a FB68     		ldr	r3, [r7, #12]
 7911 014c 0633     		adds	r3, r3, #6
 7912 014e 1344     		add	r3, r3, r2
 7913 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7914 0152 1A04     		lsls	r2, r3, #16
2075:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 7915              		.loc 1 2075 0
 7916 0154 1E4B     		ldr	r3, .L405+24
 7917 0156 1968     		ldr	r1, [r3]
 7918 0158 FB68     		ldr	r3, [r7, #12]
 7919 015a 0533     		adds	r3, r3, #5
 7920 015c 0B44     		add	r3, r3, r1
 7921 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7922 0160 1B02     		lsls	r3, r3, #8
 7923 0162 1343     		orrs	r3, r3, r2
2076:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 7924              		.loc 1 2076 0
 7925 0164 1A4A     		ldr	r2, .L405+24
 7926 0166 1268     		ldr	r2, [r2]
 7927 0168 F968     		ldr	r1, [r7, #12]
 7928 016a 0431     		adds	r1, r1, #4
 7929 016c 0A44     		add	r2, r2, r1
 7930 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7931 0170 1343     		orrs	r3, r3, r2
2074:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 7932              		.loc 1 2074 0
 7933 0172 7B60     		str	r3, [r7, #4]
2077:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 7934              		.loc 1 2077 0
 7935 0174 BA68     		ldr	r2, [r7, #8]
 7936 0176 7B68     		ldr	r3, [r7, #4]
 7937 0178 9A42     		cmp	r2, r3
 7938 017a 00D0     		beq	.L401
2078:bluetooth_rxtx.c **** 					break;
 7939              		.loc 1 2078 0
 7940 017c 17E0     		b	.L402
 7941              	.L401:
 7942              	.LBE12:
2079:bluetooth_rxtx.c **** 			}
2080:bluetooth_rxtx.c **** 
2081:bluetooth_rxtx.c **** 			// send to PC
2082:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 7943              		.loc 1 2082 0
 7944 017e 144B     		ldr	r3, .L405+24
 7945 0180 1B68     		ldr	r3, [r3]
 7946 0182 0120     		movs	r0, #1
 7947 0184 1946     		mov	r1, r3
 7948 0186 FFF7FEFF 		bl	enqueue
2083:bluetooth_rxtx.c **** 			RXLED_SET;
 7949              		.loc 1 2083 0
 7950 018a 124B     		ldr	r3, .L405+28
 7951 018c 1022     		movs	r2, #16
 7952 018e 1A60     		str	r2, [r3]
2084:bluetooth_rxtx.c **** 
ARM GAS  /tmp/ccTf0kks.s 			page 176


2085:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 7953              		.loc 1 2085 0
 7954 0190 114B     		ldr	r3, .L405+32
 7955 0192 1B68     		ldr	r3, [r3]
 7956 0194 0E4A     		ldr	r2, .L405+24
 7957 0196 1268     		ldr	r2, [r2]
 7958 0198 1046     		mov	r0, r2
 7959 019a 9847     		blx	r3
2086:bluetooth_rxtx.c **** 
2087:bluetooth_rxtx.c **** 			break;
 7960              		.loc 1 2087 0
 7961 019c 07E0     		b	.L402
 7962              	.L393:
2051:bluetooth_rxtx.c **** 		access_address >>= 1;
 7963              		.loc 1 2051 0 discriminator 2
 7964 019e FB6A     		ldr	r3, [r7, #44]
 7965 01a0 0133     		adds	r3, r3, #1
 7966 01a2 FB62     		str	r3, [r7, #44]
 7967              	.L392:
2051:bluetooth_rxtx.c **** 		access_address >>= 1;
 7968              		.loc 1 2051 0 is_stmt 0 discriminator 1
 7969 01a4 FB6A     		ldr	r3, [r7, #44]
 7970 01a6 B3F5D87F 		cmp	r3, #432
 7971 01aa FFF654AF 		blt	.L403
 7972              	.L402:
2088:bluetooth_rxtx.c **** 		}
2089:bluetooth_rxtx.c **** 	}
2090:bluetooth_rxtx.c **** 
2091:bluetooth_rxtx.c **** 	return 1;
 7973              		.loc 1 2091 0 is_stmt 1
 7974 01ae 0123     		movs	r3, #1
2092:bluetooth_rxtx.c **** }
 7975              		.loc 1 2092 0
 7976 01b0 1846     		mov	r0, r3
 7977 01b2 3037     		adds	r7, r7, #48
 7978              		.cfi_def_cfa_offset 8
 7979 01b4 BD46     		mov	sp, r7
 7980              		.cfi_def_cfa_register 13
 7981              		@ sp needed
 7982 01b6 80BD     		pop	{r7, pc}
 7983              	.L406:
 7984              		.align	2
 7985              	.L405:
 7986 01b8 00000000 		.word	channel
 7987 01bc AC000000 		.word	whitening_index
 7988 01c0 00000000 		.word	unpacked
 7989 01c4 00000000 		.word	le
 7990 01c8 2C000000 		.word	whitening
 7991 01cc 11080402 		.word	33818641
 7992 01d0 00000000 		.word	idle_rxbuf
 7993 01d4 38C00920 		.word	537509944
 7994 01d8 00000000 		.word	packet_cb
 7995              		.cfi_endproc
 7996              	.LFE34:
 7998              		.section	.text.connection_follow_cb,"ax",%progbits
 7999              		.align	2
 8000              		.global	connection_follow_cb
ARM GAS  /tmp/ccTf0kks.s 			page 177


 8001              		.thumb
 8002              		.thumb_func
 8004              	connection_follow_cb:
 8005              	.LFB35:
2093:bluetooth_rxtx.c **** 
2094:bluetooth_rxtx.c **** /**
2095:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2096:bluetooth_rxtx.c ****  */
2097:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 8006              		.loc 1 2097 0
 8007              		.cfi_startproc
 8008              		@ args = 0, pretend = 0, frame = 40
 8009              		@ frame_needed = 1, uses_anonymous_args = 0
 8010 0000 80B5     		push	{r7, lr}
 8011              		.cfi_def_cfa_offset 8
 8012              		.cfi_offset 7, -8
 8013              		.cfi_offset 14, -4
 8014 0002 8AB0     		sub	sp, sp, #40
 8015              		.cfi_def_cfa_offset 48
 8016 0004 00AF     		add	r7, sp, #0
 8017              		.cfi_def_cfa_register 7
 8018 0006 7860     		str	r0, [r7, #4]
2098:bluetooth_rxtx.c **** 	int i;
2099:bluetooth_rxtx.c **** 	u32 aa = 0;
 8019              		.loc 1 2099 0
 8020 0008 0023     		movs	r3, #0
 8021 000a 3B62     		str	r3, [r7, #32]
2100:bluetooth_rxtx.c **** 
2101:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2102:bluetooth_rxtx.c **** #define HEADER_IDX 4
2103:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2104:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2105:bluetooth_rxtx.c **** 
2106:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 8022              		.loc 1 2106 0
 8023 000c 7B68     		ldr	r3, [r7, #4]
 8024 000e FB61     		str	r3, [r7, #28]
2107:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 8025              		.loc 1 2107 0
 8026 0010 7B68     		ldr	r3, [r7, #4]
 8027 0012 1B79     		ldrb	r3, [r3, #4]
 8028 0014 FB76     		strb	r3, [r7, #27]
2108:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 8029              		.loc 1 2108 0
 8030 0016 7B68     		ldr	r3, [r7, #4]
 8031 0018 0533     		adds	r3, r3, #5
 8032 001a 7B61     		str	r3, [r7, #20]
2109:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 8033              		.loc 1 2109 0
 8034 001c 7B68     		ldr	r3, [r7, #4]
 8035 001e 0633     		adds	r3, r3, #6
 8036 0020 3B61     		str	r3, [r7, #16]
2110:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 8037              		.loc 1 2110 0
 8038 0022 7B69     		ldr	r3, [r7, #20]
 8039 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8040 0026 0633     		adds	r3, r3, #6
ARM GAS  /tmp/ccTf0kks.s 			page 178


 8041 0028 1A46     		mov	r2, r3
 8042 002a 7B68     		ldr	r3, [r7, #4]
 8043 002c 1344     		add	r3, r3, r2
 8044 002e FB60     		str	r3, [r7, #12]
2111:bluetooth_rxtx.c **** 
2112:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
 8045              		.loc 1 2112 0
 8046 0030 8B4B     		ldr	r3, .L417
 8047 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8048 0034 022B     		cmp	r3, #2
 8049 0036 1CD1     		bne	.L408
2113:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2114:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 8050              		.loc 1 2114 0
 8051 0038 894B     		ldr	r3, .L417
 8052 003a 0322     		movs	r2, #3
 8053 003c 1A75     		strb	r2, [r3, #20]
2115:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 8054              		.loc 1 2115 0
 8055 003e 894B     		ldr	r3, .L417+4
 8056 0040 1B68     		ldr	r3, [r3]
 8057 0042 874A     		ldr	r2, .L417
 8058 0044 9361     		str	r3, [r2, #24]
2116:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 8059              		.loc 1 2116 0
 8060 0046 864B     		ldr	r3, .L417
 8061 0048 DB8B     		ldrh	r3, [r3, #30]
 8062 004a 013B     		subs	r3, r3, #1
 8063 004c 9AB2     		uxth	r2, r3
 8064 004e 844B     		ldr	r3, .L417
 8065 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2117:bluetooth_rxtx.c **** 		le.conn_count = 0;
 8066              		.loc 1 2117 0
 8067 0052 834B     		ldr	r3, .L417
 8068 0054 0022     		movs	r2, #0
 8069 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2118:bluetooth_rxtx.c **** 		le.update_pending = 0;
 8070              		.loc 1 2118 0
 8071 0058 814B     		ldr	r3, .L417
 8072 005a 0022     		movs	r2, #0
 8073 005c 9A62     		str	r2, [r3, #40]
2119:bluetooth_rxtx.c **** 
2120:bluetooth_rxtx.c **** 		// hue hue hue
2121:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 8074              		.loc 1 2121 0
 8075 005e 824B     		ldr	r3, .L417+8
 8076 0060 1B78     		ldrb	r3, [r3]
 8077 0062 DBB2     		uxtb	r3, r3
 8078 0064 002B     		cmp	r3, #0
 8079 0066 00F0F780 		beq	.L407
2122:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 8080              		.loc 1 2122 0
 8081 006a 804B     		ldr	r3, .L417+12
 8082 006c 2822     		movs	r2, #40
 8083 006e 1A60     		str	r2, [r3]
 8084 0070 F2E0     		b	.L407
 8085              	.L408:
ARM GAS  /tmp/ccTf0kks.s 			page 179


2123:bluetooth_rxtx.c **** 
2124:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 8086              		.loc 1 2124 0
 8087 0072 7B4B     		ldr	r3, .L417
 8088 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8089 0076 032B     		cmp	r3, #3
 8090 0078 6FD1     		bne	.L411
 8091              	.LBB13:
2125:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 8092              		.loc 1 2125 0
 8093 007a FB7E     		ldrb	r3, [r7, #27]
 8094 007c 03F00303 		and	r3, r3, #3
 8095 0080 FB72     		strb	r3, [r7, #11]
2126:bluetooth_rxtx.c **** 
2127:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2128:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 8096              		.loc 1 2128 0
 8097 0082 774B     		ldr	r3, .L417
 8098 0084 9B6A     		ldr	r3, [r3, #40]
 8099 0086 002B     		cmp	r3, #0
 8100 0088 21D0     		beq	.L412
 8101              		.loc 1 2128 0 is_stmt 0 discriminator 1
 8102 008a 754B     		ldr	r3, .L417
 8103 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8104 008e 9AB2     		uxth	r2, r3
 8105 0090 734B     		ldr	r3, .L417
 8106 0092 9B8D     		ldrh	r3, [r3, #44]
 8107 0094 9A42     		cmp	r2, r3
 8108 0096 1AD1     		bne	.L412
2129:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2130:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 8109              		.loc 1 2130 0 is_stmt 1
 8110 0098 724B     		ldr	r3, .L417+4
 8111 009a 1B68     		ldr	r3, [r3]
 8112 009c 704A     		ldr	r2, .L417
 8113 009e 9361     		str	r3, [r2, #24]
2131:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 8114              		.loc 1 2131 0
 8115 00a0 6F4B     		ldr	r3, .L417
 8116 00a2 DA8D     		ldrh	r2, [r3, #46]
 8117 00a4 6E4B     		ldr	r3, .L417
 8118 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2132:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 8119              		.loc 1 2132 0
 8120 00a8 6D4B     		ldr	r3, .L417
 8121 00aa DB8D     		ldrh	r3, [r3, #46]
 8122 00ac 013B     		subs	r3, r3, #1
 8123 00ae 9AB2     		uxth	r2, r3
 8124 00b0 6B4B     		ldr	r3, .L417
 8125 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2133:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 8126              		.loc 1 2133 0
 8127 00b4 6A4B     		ldr	r3, .L417
 8128 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 8129 00ba 694B     		ldr	r3, .L417
 8130 00bc 83F82220 		strb	r2, [r3, #34]
2134:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
ARM GAS  /tmp/ccTf0kks.s 			page 180


 8131              		.loc 1 2134 0
 8132 00c0 674B     		ldr	r3, .L417
 8133 00c2 5A8E     		ldrh	r2, [r3, #50]
 8134 00c4 664B     		ldr	r3, .L417
 8135 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2135:bluetooth_rxtx.c **** 			le.update_pending = 0;
 8136              		.loc 1 2135 0
 8137 00c8 654B     		ldr	r3, .L417
 8138 00ca 0022     		movs	r2, #0
 8139 00cc 9A62     		str	r2, [r3, #40]
 8140              	.L412:
2136:bluetooth_rxtx.c **** 		}
2137:bluetooth_rxtx.c **** 
2138:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 8141              		.loc 1 2138 0
 8142 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 8143 00d0 032B     		cmp	r3, #3
 8144 00d2 41D1     		bne	.L413
 8145              		.loc 1 2138 0 is_stmt 0 discriminator 1
 8146 00d4 3B69     		ldr	r3, [r7, #16]
 8147 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8148 00d8 002B     		cmp	r3, #0
 8149 00da 3DD1     		bne	.L413
2139:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2140:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2141:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 8150              		.loc 1 2141 0 is_stmt 1
 8151 00dc 7B68     		ldr	r3, [r7, #4]
 8152 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 8153 00e0 5F4B     		ldr	r3, .L417
 8154 00e2 83F83020 		strb	r2, [r3, #48]
2142:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 8155              		.loc 1 2142 0
 8156 00e6 7B68     		ldr	r3, [r7, #4]
 8157 00e8 0833     		adds	r3, r3, #8
 8158 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8159 00ec 9AB2     		uxth	r2, r3
 8160 00ee 7B68     		ldr	r3, [r7, #4]
 8161 00f0 0933     		adds	r3, r3, #9
 8162 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8163 00f4 9BB2     		uxth	r3, r3
 8164 00f6 1B02     		lsls	r3, r3, #8
 8165 00f8 9BB2     		uxth	r3, r3
 8166 00fa 1344     		add	r3, r3, r2
 8167 00fc 9AB2     		uxth	r2, r3
 8168 00fe 584B     		ldr	r3, .L417
 8169 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2143:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 8170              		.loc 1 2143 0
 8171 0102 7B68     		ldr	r3, [r7, #4]
 8172 0104 0A33     		adds	r3, r3, #10
 8173 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8174 0108 9AB2     		uxth	r2, r3
 8175 010a 7B68     		ldr	r3, [r7, #4]
 8176 010c 0B33     		adds	r3, r3, #11
 8177 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8178 0110 9BB2     		uxth	r3, r3
ARM GAS  /tmp/ccTf0kks.s 			page 181


 8179 0112 1B02     		lsls	r3, r3, #8
 8180 0114 9BB2     		uxth	r3, r3
 8181 0116 1344     		add	r3, r3, r2
 8182 0118 9AB2     		uxth	r2, r3
 8183 011a 514B     		ldr	r3, .L417
 8184 011c DA85     		strh	r2, [r3, #46]	@ movhi
2144:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 8185              		.loc 1 2144 0
 8186 011e 7B68     		ldr	r3, [r7, #4]
 8187 0120 1033     		adds	r3, r3, #16
 8188 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8189 0124 9AB2     		uxth	r2, r3
 8190 0126 7B68     		ldr	r3, [r7, #4]
 8191 0128 1133     		adds	r3, r3, #17
 8192 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8193 012c 9BB2     		uxth	r3, r3
 8194 012e 1B02     		lsls	r3, r3, #8
 8195 0130 9BB2     		uxth	r3, r3
 8196 0132 1344     		add	r3, r3, r2
 8197 0134 9AB2     		uxth	r2, r3
 8198 0136 4A4B     		ldr	r3, .L417
 8199 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2145:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 8200              		.loc 1 2145 0
 8201 013a 494B     		ldr	r3, .L417
 8202 013c 9B8D     		ldrh	r3, [r3, #44]
 8203 013e 1A46     		mov	r2, r3
 8204 0140 474B     		ldr	r3, .L417
 8205 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8206 0144 9BB2     		uxth	r3, r3
 8207 0146 D31A     		subs	r3, r2, r3
 8208 0148 47F6FE72 		movw	r2, #32766
 8209 014c 9342     		cmp	r3, r2
 8210 014e 03DC     		bgt	.L413
2146:bluetooth_rxtx.c **** 				le.update_pending = 1;
 8211              		.loc 1 2146 0
 8212 0150 434B     		ldr	r3, .L417
 8213 0152 0122     		movs	r2, #1
 8214 0154 9A62     		str	r2, [r3, #40]
 8215              	.LBE13:
 8216 0156 7FE0     		b	.L407
 8217              	.L413:
 8218 0158 7EE0     		b	.L407
 8219              	.L411:
2147:bluetooth_rxtx.c **** 		}
2148:bluetooth_rxtx.c **** 
2149:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 8220              		.loc 1 2149 0
 8221 015a 414B     		ldr	r3, .L417
 8222 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8223 015e 012B     		cmp	r3, #1
 8224 0160 7AD1     		bne	.L407
 8225              	.LBB14:
2150:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 8226              		.loc 1 2150 0
 8227 0162 7B68     		ldr	r3, [r7, #4]
 8228 0164 0433     		adds	r3, r3, #4
ARM GAS  /tmp/ccTf0kks.s 			page 182


 8229 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8230 0168 03F00F03 		and	r3, r3, #15
 8231 016c BB72     		strb	r3, [r7, #10]
2151:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 8232              		.loc 1 2151 0
 8233 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
 8234 0170 052B     		cmp	r3, #5
 8235 0172 71D1     		bne	.L407
2152:bluetooth_rxtx.c **** 			// This is a connect packet
2153:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2154:bluetooth_rxtx.c **** 			if (le.target_set &&
 8236              		.loc 1 2154 0
 8237 0174 3A4B     		ldr	r3, .L417
 8238 0176 DB6B     		ldr	r3, [r3, #60]
 8239 0178 002B     		cmp	r3, #0
 8240 017a 14D0     		beq	.L414
2155:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8241              		.loc 1 2155 0 discriminator 1
 8242 017c 7B68     		ldr	r3, [r7, #4]
 8243 017e 0633     		adds	r3, r3, #6
 8244 0180 3B48     		ldr	r0, .L417+16
 8245 0182 1946     		mov	r1, r3
 8246 0184 0622     		movs	r2, #6
 8247 0186 FFF7FEFF 		bl	memcmp
 8248 018a 0346     		mov	r3, r0
2154:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8249              		.loc 1 2154 0 discriminator 1
 8250 018c 002B     		cmp	r3, #0
 8251 018e 0AD0     		beq	.L414
2156:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 8252              		.loc 1 2156 0
 8253 0190 7B68     		ldr	r3, [r7, #4]
 8254 0192 0C33     		adds	r3, r3, #12
 8255 0194 3648     		ldr	r0, .L417+16
 8256 0196 1946     		mov	r1, r3
 8257 0198 0622     		movs	r2, #6
 8258 019a FFF7FEFF 		bl	memcmp
 8259 019e 0346     		mov	r3, r0
2155:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8260              		.loc 1 2155 0
 8261 01a0 002B     		cmp	r3, #0
 8262 01a2 00D0     		beq	.L414
2157:bluetooth_rxtx.c **** 				return;
 8263              		.loc 1 2157 0
 8264 01a4 58E0     		b	.L407
 8265              	.L414:
2158:bluetooth_rxtx.c **** 			}
2159:bluetooth_rxtx.c **** 
2160:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 8266              		.loc 1 2160 0
 8267 01a6 2E4B     		ldr	r3, .L417
 8268 01a8 0222     		movs	r2, #2
 8269 01aa 1A75     		strb	r2, [r3, #20]
2161:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 8270              		.loc 1 2161 0
 8271 01ac 2C4B     		ldr	r3, .L417
 8272 01ae 0022     		movs	r2, #0
ARM GAS  /tmp/ccTf0kks.s 			page 183


 8273 01b0 1A61     		str	r2, [r3, #16]
2162:bluetooth_rxtx.c **** 
2163:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 8274              		.loc 1 2163 0
 8275 01b2 0023     		movs	r3, #0
 8276 01b4 7B62     		str	r3, [r7, #36]
 8277 01b6 11E0     		b	.L415
 8278              	.L416:
2164:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8279              		.loc 1 2164 0 discriminator 3
 8280 01b8 7B6A     		ldr	r3, [r7, #36]
 8281 01ba 1233     		adds	r3, r3, #18
 8282 01bc 1A46     		mov	r2, r3
 8283 01be 7B68     		ldr	r3, [r7, #4]
 8284 01c0 1344     		add	r3, r3, r2
 8285 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8286 01c4 1A46     		mov	r2, r3
 8287 01c6 7B6A     		ldr	r3, [r7, #36]
 8288 01c8 DB00     		lsls	r3, r3, #3
 8289 01ca 02FA03F3 		lsl	r3, r2, r3
 8290 01ce 1A46     		mov	r2, r3
 8291 01d0 3B6A     		ldr	r3, [r7, #32]
 8292 01d2 1343     		orrs	r3, r3, r2
 8293 01d4 3B62     		str	r3, [r7, #32]
2163:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8294              		.loc 1 2163 0 discriminator 3
 8295 01d6 7B6A     		ldr	r3, [r7, #36]
 8296 01d8 0133     		adds	r3, r3, #1
 8297 01da 7B62     		str	r3, [r7, #36]
 8298              	.L415:
2163:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8299              		.loc 1 2163 0 is_stmt 0 discriminator 1
 8300 01dc 7B6A     		ldr	r3, [r7, #36]
 8301 01de 032B     		cmp	r3, #3
 8302 01e0 EADD     		ble	.L416
2165:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 8303              		.loc 1 2165 0 is_stmt 1
 8304 01e2 386A     		ldr	r0, [r7, #32]
 8305 01e4 FFF7FEFF 		bl	le_set_access_address
2166:bluetooth_rxtx.c **** 
2167:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2168:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 8306              		.loc 1 2168 0
 8307 01e8 7B68     		ldr	r3, [r7, #4]
 8308 01ea 1833     		adds	r3, r3, #24
 8309 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8310 01ee 1A04     		lsls	r2, r3, #16
2169:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8311              		.loc 1 2169 0
 8312 01f0 7B68     		ldr	r3, [r7, #4]
 8313 01f2 1733     		adds	r3, r3, #23
 8314 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8315 01f6 1B02     		lsls	r3, r3, #8
 8316 01f8 1343     		orrs	r3, r3, r2
2170:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 8317              		.loc 1 2170 0
 8318 01fa 7A68     		ldr	r2, [r7, #4]
ARM GAS  /tmp/ccTf0kks.s 			page 184


 8319 01fc 1632     		adds	r2, r2, #22
 8320 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8321 0200 1343     		orrs	r3, r3, r2
2168:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8322              		.loc 1 2168 0
 8323 0202 1A46     		mov	r2, r3
 8324 0204 164B     		ldr	r3, .L417
 8325 0206 9A60     		str	r2, [r3, #8]
2171:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 8326              		.loc 1 2171 0
 8327 0208 154B     		ldr	r3, .L417
 8328 020a 9B68     		ldr	r3, [r3, #8]
 8329 020c 1846     		mov	r0, r3
 8330 020e FFF7FEFF 		bl	rbit
 8331 0212 0246     		mov	r2, r0
 8332 0214 124B     		ldr	r3, .L417
 8333 0216 DA60     		str	r2, [r3, #12]
2172:bluetooth_rxtx.c **** 
2173:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2174:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 8334              		.loc 1 2174 0
 8335 0218 7B68     		ldr	r3, [r7, #4]
 8336 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 8337 021c 104B     		ldr	r3, .L417
 8338 021e 83F82220 		strb	r2, [r3, #34]
2175:bluetooth_rxtx.c **** 
2176:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2177:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 8339              		.loc 1 2177 0
 8340 0222 7B68     		ldr	r3, [r7, #4]
 8341 0224 1A33     		adds	r3, r3, #26
 8342 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8343 0228 9AB2     		uxth	r2, r3
 8344 022a 0D4B     		ldr	r3, .L417
 8345 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2178:bluetooth_rxtx.c **** 
2179:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2180:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 8346              		.loc 1 2180 0
 8347 022e 7B68     		ldr	r3, [r7, #4]
 8348 0230 1C33     		adds	r3, r3, #28
 8349 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8350 0234 9AB2     		uxth	r2, r3
 8351 0236 0A4B     		ldr	r3, .L417
 8352 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2181:bluetooth_rxtx.c **** 
2182:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2183:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 8353              		.loc 1 2183 0
 8354 023a 7B68     		ldr	r3, [r7, #4]
 8355 023c 2733     		adds	r3, r3, #39
 8356 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8357 0240 03F01F03 		and	r3, r3, #31
 8358 0244 DAB2     		uxtb	r2, r3
 8359 0246 064B     		ldr	r3, .L417
 8360 0248 9A75     		strb	r2, [r3, #22]
2184:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
ARM GAS  /tmp/ccTf0kks.s 			page 185


 8361              		.loc 1 2184 0
 8362 024a 054B     		ldr	r3, .L417
 8363 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 8364 024e 044B     		ldr	r3, .L417
 8365 0250 5A75     		strb	r2, [r3, #21]
2185:bluetooth_rxtx.c **** 
2186:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2187:bluetooth_rxtx.c **** 			do_hop = 1;
 8366              		.loc 1 2187 0
 8367 0252 084B     		ldr	r3, .L417+20
 8368 0254 0122     		movs	r2, #1
 8369 0256 1A70     		strb	r2, [r3]
 8370              	.L407:
 8371              	.LBE14:
2188:bluetooth_rxtx.c **** 		}
2189:bluetooth_rxtx.c **** 	}
2190:bluetooth_rxtx.c **** }
 8372              		.loc 1 2190 0
 8373 0258 2837     		adds	r7, r7, #40
 8374              		.cfi_def_cfa_offset 8
 8375 025a BD46     		mov	sp, r7
 8376              		.cfi_def_cfa_register 13
 8377              		@ sp needed
 8378 025c 80BD     		pop	{r7, pc}
 8379              	.L418:
 8380 025e 00BF     		.align	2
 8381              	.L417:
 8382 0260 00000000 		.word	le
 8383 0264 00000000 		.word	clkn
 8384 0268 00000000 		.word	jam_mode
 8385 026c 00000000 		.word	le_jam_count
 8386 0270 34000000 		.word	le+52
 8387 0274 00000000 		.word	do_hop
 8388              		.cfi_endproc
 8389              	.LFE35:
 8391              		.section	.text.bt_follow_le,"ax",%progbits
 8392              		.align	2
 8393              		.global	bt_follow_le
 8394              		.thumb
 8395              		.thumb_func
 8397              	bt_follow_le:
 8398              	.LFB36:
2191:bluetooth_rxtx.c **** 
2192:bluetooth_rxtx.c **** void bt_follow_le() {
 8399              		.loc 1 2192 0
 8400              		.cfi_startproc
 8401              		@ args = 0, pretend = 0, frame = 0
 8402              		@ frame_needed = 1, uses_anonymous_args = 0
 8403 0000 80B5     		push	{r7, lr}
 8404              		.cfi_def_cfa_offset 8
 8405              		.cfi_offset 7, -8
 8406              		.cfi_offset 14, -4
 8407 0002 00AF     		add	r7, sp, #0
 8408              		.cfi_def_cfa_register 7
2193:bluetooth_rxtx.c **** 	reset_le();
 8409              		.loc 1 2193 0
 8410 0004 FFF7FEFF 		bl	reset_le
ARM GAS  /tmp/ccTf0kks.s 			page 186


2194:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 8411              		.loc 1 2194 0
 8412 0008 044B     		ldr	r3, .L420
 8413 000a 054A     		ldr	r2, .L420+4
 8414 000c 1A60     		str	r2, [r3]
2195:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
 8415              		.loc 1 2195 0
 8416 000e 0920     		movs	r0, #9
 8417 0010 FFF7FEFF 		bl	bt_le_sync
2196:bluetooth_rxtx.c **** 
2197:bluetooth_rxtx.c **** 	/* old non-sync mode
2198:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2199:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2200:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2201:bluetooth_rxtx.c **** 	*/
2202:bluetooth_rxtx.c **** 
2203:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 8418              		.loc 1 2203 0
 8419 0014 034B     		ldr	r3, .L420+8
 8420 0016 0022     		movs	r2, #0
 8421 0018 1A70     		strb	r2, [r3]
2204:bluetooth_rxtx.c **** }
 8422              		.loc 1 2204 0
 8423 001a 80BD     		pop	{r7, pc}
 8424              	.L421:
 8425              		.align	2
 8426              	.L420:
 8427 001c 00000000 		.word	packet_cb
 8428 0020 00000000 		.word	connection_follow_cb
 8429 0024 00000000 		.word	mode
 8430              		.cfi_endproc
 8431              	.LFE36:
 8433              		.section	.text.le_promisc_state,"ax",%progbits
 8434              		.align	2
 8435              		.global	le_promisc_state
 8436              		.thumb
 8437              		.thumb_func
 8439              	le_promisc_state:
 8440              	.LFB37:
2205:bluetooth_rxtx.c **** 
2206:bluetooth_rxtx.c **** // issue state change message
2207:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 8441              		.loc 1 2207 0
 8442              		.cfi_startproc
 8443              		@ args = 0, pretend = 0, frame = 72
 8444              		@ frame_needed = 1, uses_anonymous_args = 0
 8445 0000 80B5     		push	{r7, lr}
 8446              		.cfi_def_cfa_offset 8
 8447              		.cfi_offset 7, -8
 8448              		.cfi_offset 14, -4
 8449 0002 92B0     		sub	sp, sp, #72
 8450              		.cfi_def_cfa_offset 80
 8451 0004 00AF     		add	r7, sp, #0
 8452              		.cfi_def_cfa_register 7
 8453 0006 0346     		mov	r3, r0
 8454 0008 B960     		str	r1, [r7, #8]
 8455 000a 7A60     		str	r2, [r7, #4]
ARM GAS  /tmp/ccTf0kks.s 			page 187


 8456 000c FB73     		strb	r3, [r7, #15]
2208:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 8457              		.loc 1 2208 0
 8458 000e 07F11403 		add	r3, r7, #20
 8459 0012 0022     		movs	r2, #0
 8460 0014 1A60     		str	r2, [r3]
 8461 0016 0433     		adds	r3, r3, #4
 8462 0018 0022     		movs	r2, #0
 8463 001a 1A60     		str	r2, [r3]
 8464 001c 0433     		adds	r3, r3, #4
 8465 001e 0022     		movs	r2, #0
 8466 0020 1A60     		str	r2, [r3]
 8467 0022 0433     		adds	r3, r3, #4
 8468 0024 0022     		movs	r2, #0
 8469 0026 1A60     		str	r2, [r3]
 8470 0028 0433     		adds	r3, r3, #4
 8471 002a 0022     		movs	r2, #0
 8472 002c 1A60     		str	r2, [r3]
 8473 002e 0433     		adds	r3, r3, #4
 8474 0030 0022     		movs	r2, #0
 8475 0032 1A60     		str	r2, [r3]
 8476 0034 0433     		adds	r3, r3, #4
 8477 0036 0022     		movs	r2, #0
 8478 0038 1A60     		str	r2, [r3]
 8479 003a 0433     		adds	r3, r3, #4
 8480 003c 0022     		movs	r2, #0
 8481 003e 1A60     		str	r2, [r3]
 8482 0040 0433     		adds	r3, r3, #4
 8483 0042 0022     		movs	r2, #0
 8484 0044 1A60     		str	r2, [r3]
 8485 0046 0433     		adds	r3, r3, #4
 8486 0048 0022     		movs	r2, #0
 8487 004a 1A60     		str	r2, [r3]
 8488 004c 0433     		adds	r3, r3, #4
 8489 004e 0022     		movs	r2, #0
 8490 0050 1A60     		str	r2, [r3]
 8491 0052 0433     		adds	r3, r3, #4
 8492 0054 0022     		movs	r2, #0
 8493 0056 1A60     		str	r2, [r3]
 8494 0058 0433     		adds	r3, r3, #4
 8495 005a 0022     		movs	r2, #0
 8496 005c 1A80     		strh	r2, [r3]	@ movhi
 8497 005e 0233     		adds	r3, r3, #2
2209:bluetooth_rxtx.c **** 	if (len > 49)
 8498              		.loc 1 2209 0
 8499 0060 7B68     		ldr	r3, [r7, #4]
 8500 0062 312B     		cmp	r3, #49
 8501 0064 01D9     		bls	.L423
2210:bluetooth_rxtx.c **** 		len = 49;
 8502              		.loc 1 2210 0
 8503 0066 3123     		movs	r3, #49
 8504 0068 7B60     		str	r3, [r7, #4]
 8505              	.L423:
2211:bluetooth_rxtx.c **** 
2212:bluetooth_rxtx.c **** 	buf[0] = type;
 8506              		.loc 1 2212 0
 8507 006a FB7B     		ldrb	r3, [r7, #15]
ARM GAS  /tmp/ccTf0kks.s 			page 188


 8508 006c 3B75     		strb	r3, [r7, #20]
2213:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 8509              		.loc 1 2213 0
 8510 006e 07F11403 		add	r3, r7, #20
 8511 0072 0133     		adds	r3, r3, #1
 8512 0074 1846     		mov	r0, r3
 8513 0076 B968     		ldr	r1, [r7, #8]
 8514 0078 7A68     		ldr	r2, [r7, #4]
 8515 007a FFF7FEFF 		bl	memcpy
2214:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 8516              		.loc 1 2214 0
 8517 007e 07F11403 		add	r3, r7, #20
 8518 0082 0520     		movs	r0, #5
 8519 0084 1946     		mov	r1, r3
 8520 0086 FFF7FEFF 		bl	enqueue
2215:bluetooth_rxtx.c **** }
 8521              		.loc 1 2215 0
 8522 008a 4837     		adds	r7, r7, #72
 8523              		.cfi_def_cfa_offset 8
 8524 008c BD46     		mov	sp, r7
 8525              		.cfi_def_cfa_register 13
 8526              		@ sp needed
 8527 008e 80BD     		pop	{r7, pc}
 8528              		.cfi_endproc
 8529              	.LFE37:
 8531              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 8532              		.align	2
 8533              		.global	promisc_recover_hop_increment
 8534              		.thumb
 8535              		.thumb_func
 8537              	promisc_recover_hop_increment:
 8538              	.LFB38:
2216:bluetooth_rxtx.c **** 
2217:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2218:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2219:bluetooth_rxtx.c **** 
2220:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 8539              		.loc 1 2220 0
 8540              		.cfi_startproc
 8541              		@ args = 0, pretend = 0, frame = 16
 8542              		@ frame_needed = 1, uses_anonymous_args = 0
 8543 0000 80B5     		push	{r7, lr}
 8544              		.cfi_def_cfa_offset 8
 8545              		.cfi_offset 7, -8
 8546              		.cfi_offset 14, -4
 8547 0002 84B0     		sub	sp, sp, #16
 8548              		.cfi_def_cfa_offset 24
 8549 0004 00AF     		add	r7, sp, #0
 8550              		.cfi_def_cfa_register 7
 8551 0006 7860     		str	r0, [r7, #4]
2221:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2222:bluetooth_rxtx.c **** 	if (channel == 2404) {
 8552              		.loc 1 2222 0
 8553 0008 554B     		ldr	r3, .L431
 8554 000a 1B88     		ldrh	r3, [r3]	@ movhi
 8555 000c 9BB2     		uxth	r3, r3
 8556 000e 40F66412 		movw	r2, #2404
ARM GAS  /tmp/ccTf0kks.s 			page 189


 8557 0012 9342     		cmp	r3, r2
 8558 0014 14D1     		bne	.L425
2223:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 8559              		.loc 1 2223 0
 8560 0016 534B     		ldr	r3, .L431+4
 8561 0018 1B68     		ldr	r3, [r3]
 8562 001a C3F31303 		ubfx	r3, r3, #0, #20
 8563 001e 40F63542 		movw	r2, #3125
 8564 0022 02FB03F2 		mul	r2, r2, r3
 8565 0026 504B     		ldr	r3, .L431+8
 8566 0028 1B68     		ldr	r3, [r3]
 8567 002a 1344     		add	r3, r3, r2
 8568 002c 4F4A     		ldr	r2, .L431+12
 8569 002e 1360     		str	r3, [r2]
2224:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 8570              		.loc 1 2224 0
 8571 0030 4F4B     		ldr	r3, .L431+16
 8572 0032 40F66612 		movw	r2, #2406
 8573 0036 1A80     		strh	r2, [r3]	@ movhi
2225:bluetooth_rxtx.c **** 		do_hop = 1;
 8574              		.loc 1 2225 0
 8575 0038 4E4B     		ldr	r3, .L431+20
 8576 003a 0122     		movs	r2, #1
 8577 003c 1A70     		strb	r2, [r3]
 8578 003e 8BE0     		b	.L424
 8579              	.L425:
2226:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 8580              		.loc 1 2226 0
 8581 0040 474B     		ldr	r3, .L431
 8582 0042 1B88     		ldrh	r3, [r3]	@ movhi
 8583 0044 9BB2     		uxth	r3, r3
 8584 0046 40F66612 		movw	r2, #2406
 8585 004a 9342     		cmp	r3, r2
 8586 004c 7DD1     		bne	.L427
 8587              	.LBB15:
2227:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 8588              		.loc 1 2227 0
 8589 004e 454B     		ldr	r3, .L431+4
 8590 0050 1B68     		ldr	r3, [r3]
 8591 0052 C3F31303 		ubfx	r3, r3, #0, #20
 8592 0056 40F63542 		movw	r2, #3125
 8593 005a 02FB03F2 		mul	r2, r2, r3
 8594 005e 424B     		ldr	r3, .L431+8
 8595 0060 1B68     		ldr	r3, [r3]
 8596 0062 1344     		add	r3, r3, r2
 8597 0064 FB60     		str	r3, [r7, #12]
2228:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 8598              		.loc 1 2228 0
 8599 0066 414B     		ldr	r3, .L431+12
 8600 0068 1B68     		ldr	r3, [r3]
 8601 006a FA68     		ldr	r2, [r7, #12]
 8602 006c 9A42     		cmp	r2, r3
 8603 006e 05D2     		bcs	.L428
2229:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 8604              		.loc 1 2229 0
 8605 0070 FB68     		ldr	r3, [r7, #12]
 8606 0072 03F14343 		add	r3, r3, #-1023410176
ARM GAS  /tmp/ccTf0kks.s 			page 190


 8607 0076 03F5A003 		add	r3, r3, #5242880
 8608 007a FB60     		str	r3, [r7, #12]
 8609              	.L428:
2230:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2231:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 8610              		.loc 1 2231 0
 8611 007c 3B4B     		ldr	r3, .L431+12
 8612 007e 1B68     		ldr	r3, [r3]
 8613 0080 FA68     		ldr	r2, [r7, #12]
 8614 0082 D21A     		subs	r2, r2, r3
 8615 0084 3C4B     		ldr	r3, .L431+24
 8616 0086 DB8B     		ldrh	r3, [r3, #30]
 8617 0088 1946     		mov	r1, r3
 8618 008a 43F2D403 		movw	r3, #12500
 8619 008e 03FB01F3 		mul	r3, r3, r1
 8620 0092 D90F     		lsrs	r1, r3, #31
 8621 0094 0B44     		add	r3, r3, r1
 8622 0096 5B10     		asrs	r3, r3, #1
 8623 0098 1344     		add	r3, r3, r2
 8624 009a 374A     		ldr	r2, .L431+24
 8625 009c D28B     		ldrh	r2, [r2, #30]
 8626 009e 1146     		mov	r1, r2
 8627 00a0 43F2D402 		movw	r2, #12500
 8628 00a4 02FB01F2 		mul	r2, r2, r1
 8629 00a8 B3FBF2F3 		udiv	r3, r3, r2
 8630 00ac BB60     		str	r3, [r7, #8]
2232:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2233:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 8631              		.loc 1 2233 0
 8632 00ae BB68     		ldr	r3, [r7, #8]
 8633 00b0 242B     		cmp	r3, #36
 8634 00b2 42D8     		bhi	.L429
2234:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2235:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 8635              		.loc 1 2235 0
 8636 00b4 314A     		ldr	r2, .L431+28
 8637 00b6 BB68     		ldr	r3, [r7, #8]
 8638 00b8 1344     		add	r3, r3, r2
 8639 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8640 00bc 2E4B     		ldr	r3, .L431+24
 8641 00be 9A75     		strb	r2, [r3, #22]
2236:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 8642              		.loc 1 2236 0
 8643 00c0 2D4B     		ldr	r3, .L431+24
 8644 00c2 DB8B     		ldrh	r3, [r3, #30]
 8645 00c4 5B08     		lsrs	r3, r3, #1
 8646 00c6 9AB2     		uxth	r2, r3
 8647 00c8 2B4B     		ldr	r3, .L431+24
 8648 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2237:bluetooth_rxtx.c **** 			le.conn_count = 0;
 8649              		.loc 1 2237 0
 8650 00cc 2A4B     		ldr	r3, .L431+24
 8651 00ce 0022     		movs	r2, #0
 8652 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2238:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 8653              		.loc 1 2238 0
 8654 00d2 294B     		ldr	r3, .L431+24
ARM GAS  /tmp/ccTf0kks.s 			page 191


 8655 00d4 0022     		movs	r2, #0
 8656 00d6 9A61     		str	r2, [r3, #24]
2239:bluetooth_rxtx.c **** 			do_hop = 0;
 8657              		.loc 1 2239 0
 8658 00d8 264B     		ldr	r3, .L431+20
 8659 00da 0022     		movs	r2, #0
 8660 00dc 1A70     		strb	r2, [r3]
2240:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2241:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 8661              		.loc 1 2241 0
 8662 00de 264B     		ldr	r3, .L431+24
 8663 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 8664 00e2 5A1C     		adds	r2, r3, #1
 8665 00e4 264B     		ldr	r3, .L431+32
 8666 00e6 82FB0301 		smull	r0, r1, r2, r3
 8667 00ea 5318     		adds	r3, r2, r1
 8668 00ec 5911     		asrs	r1, r3, #5
 8669 00ee D317     		asrs	r3, r2, #31
 8670 00f0 C91A     		subs	r1, r1, r3
 8671 00f2 0B46     		mov	r3, r1
 8672 00f4 DB00     		lsls	r3, r3, #3
 8673 00f6 0B44     		add	r3, r3, r1
 8674 00f8 9B00     		lsls	r3, r3, #2
 8675 00fa 0B44     		add	r3, r3, r1
 8676 00fc D11A     		subs	r1, r2, r3
 8677 00fe CAB2     		uxtb	r2, r1
 8678 0100 1D4B     		ldr	r3, .L431+24
 8679 0102 5A75     		strb	r2, [r3, #21]
2242:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 8680              		.loc 1 2242 0
 8681 0104 1C4B     		ldr	r3, .L431+24
 8682 0106 0322     		movs	r2, #3
 8683 0108 1A75     		strb	r2, [r3, #20]
2243:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 8684              		.loc 1 2243 0
 8685 010a 1B4B     		ldr	r3, .L431+24
 8686 010c 0022     		movs	r2, #0
 8687 010e 1A61     		str	r2, [r3, #16]
2244:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 8688              		.loc 1 2244 0
 8689 0110 1C4B     		ldr	r3, .L431+36
 8690 0112 0322     		movs	r2, #3
 8691 0114 1A70     		strb	r2, [r3]
2245:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 8692              		.loc 1 2245 0
 8693 0116 1C4B     		ldr	r3, .L431+40
 8694 0118 1C4A     		ldr	r2, .L431+44
 8695 011a 1A60     		str	r2, [r3]
2246:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 8696              		.loc 1 2246 0
 8697 011c 0320     		movs	r0, #3
 8698 011e 1C49     		ldr	r1, .L431+48
 8699 0120 0122     		movs	r2, #1
 8700 0122 FFF7FEFF 		bl	le_promisc_state
2247:bluetooth_rxtx.c **** 
2248:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 8701              		.loc 1 2248 0
ARM GAS  /tmp/ccTf0kks.s 			page 192


 8702 0126 1B4B     		ldr	r3, .L431+52
 8703 0128 1B78     		ldrb	r3, [r3]
 8704 012a DBB2     		uxtb	r3, r3
 8705 012c 002B     		cmp	r3, #0
 8706 012e 03D0     		beq	.L430
2249:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
 8707              		.loc 1 2249 0
 8708 0130 194B     		ldr	r3, .L431+56
 8709 0132 2822     		movs	r2, #40
 8710 0134 1A60     		str	r2, [r3]
2250:bluetooth_rxtx.c **** 
2251:bluetooth_rxtx.c **** 			return;
 8711              		.loc 1 2251 0
 8712 0136 0FE0     		b	.L424
 8713              	.L430:
 8714 0138 0EE0     		b	.L424
 8715              	.L429:
2252:bluetooth_rxtx.c **** 		}
2253:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8716              		.loc 1 2253 0
 8717 013a 0D4B     		ldr	r3, .L431+16
 8718 013c 40F66412 		movw	r2, #2404
 8719 0140 1A80     		strh	r2, [r3]	@ movhi
2254:bluetooth_rxtx.c **** 		do_hop = 1;
 8720              		.loc 1 2254 0
 8721 0142 0C4B     		ldr	r3, .L431+20
 8722 0144 0122     		movs	r2, #1
 8723 0146 1A70     		strb	r2, [r3]
 8724              	.LBE15:
 8725 0148 06E0     		b	.L424
 8726              	.L427:
2255:bluetooth_rxtx.c **** 	}
2256:bluetooth_rxtx.c **** 	else {
2257:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8727              		.loc 1 2257 0
 8728 014a 094B     		ldr	r3, .L431+16
 8729 014c 40F66412 		movw	r2, #2404
 8730 0150 1A80     		strh	r2, [r3]	@ movhi
2258:bluetooth_rxtx.c **** 		do_hop = 1;
 8731              		.loc 1 2258 0
 8732 0152 084B     		ldr	r3, .L431+20
 8733 0154 0122     		movs	r2, #1
 8734 0156 1A70     		strb	r2, [r3]
 8735              	.L424:
2259:bluetooth_rxtx.c **** 	}
2260:bluetooth_rxtx.c **** }
 8736              		.loc 1 2260 0
 8737 0158 1037     		adds	r7, r7, #16
 8738              		.cfi_def_cfa_offset 8
 8739 015a BD46     		mov	sp, r7
 8740              		.cfi_def_cfa_register 13
 8741              		@ sp needed
 8742 015c 80BD     		pop	{r7, pc}
 8743              	.L432:
 8744 015e 00BF     		.align	2
 8745              	.L431:
 8746 0160 00000000 		.word	channel
ARM GAS  /tmp/ccTf0kks.s 			page 193


 8747 0164 00000000 		.word	clkn
 8748 0168 08400040 		.word	1073758216
 8749 016c D8000000 		.word	first_ts.4807
 8750 0170 00000000 		.word	hop_direct_channel
 8751 0174 00000000 		.word	do_hop
 8752 0178 00000000 		.word	le
 8753 017c D4000000 		.word	hop_interval_lut
 8754 0180 A7C867DD 		.word	-580400985
 8755 0184 00000000 		.word	hop_mode
 8756 0188 00000000 		.word	packet_cb
 8757 018c 00000000 		.word	connection_follow_cb
 8758 0190 16000000 		.word	le+22
 8759 0194 00000000 		.word	jam_mode
 8760 0198 00000000 		.word	le_jam_count
 8761              		.cfi_endproc
 8762              	.LFE38:
 8764              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 8765              		.align	2
 8766              		.global	promisc_recover_hop_interval
 8767              		.thumb
 8768              		.thumb_func
 8770              	promisc_recover_hop_interval:
 8771              	.LFB39:
2261:bluetooth_rxtx.c **** 
2262:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 8772              		.loc 1 2262 0
 8773              		.cfi_startproc
 8774              		@ args = 0, pretend = 0, frame = 24
 8775              		@ frame_needed = 1, uses_anonymous_args = 0
 8776 0000 80B5     		push	{r7, lr}
 8777              		.cfi_def_cfa_offset 8
 8778              		.cfi_offset 7, -8
 8779              		.cfi_offset 14, -4
 8780 0002 86B0     		sub	sp, sp, #24
 8781              		.cfi_def_cfa_offset 32
 8782 0004 00AF     		add	r7, sp, #0
 8783              		.cfi_def_cfa_register 7
 8784 0006 7860     		str	r0, [r7, #4]
2263:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2264:bluetooth_rxtx.c **** 
2265:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 8785              		.loc 1 2265 0
 8786 0008 334B     		ldr	r3, .L441
 8787 000a 1B68     		ldr	r3, [r3]
 8788 000c C3F31303 		ubfx	r3, r3, #0, #20
 8789 0010 40F63542 		movw	r2, #3125
 8790 0014 02FB03F2 		mul	r2, r2, r3
 8791 0018 304B     		ldr	r3, .L441+4
 8792 001a 1B68     		ldr	r3, [r3]
 8793 001c 1344     		add	r3, r3, r2
 8794 001e 7B61     		str	r3, [r7, #20]
2266:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 8795              		.loc 1 2266 0
 8796 0020 2F4B     		ldr	r3, .L441+8
 8797 0022 1B68     		ldr	r3, [r3]
 8798 0024 7A69     		ldr	r2, [r7, #20]
 8799 0026 9A42     		cmp	r2, r3
ARM GAS  /tmp/ccTf0kks.s 			page 194


 8800 0028 03D2     		bcs	.L434
2267:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 8801              		.loc 1 2267 0
 8802 002a 7A69     		ldr	r2, [r7, #20]
 8803 002c 2D4B     		ldr	r3, .L441+12
 8804 002e 1344     		add	r3, r3, r2
 8805 0030 7B61     		str	r3, [r7, #20]
 8806              	.L434:
2268:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 8807              		.loc 1 2268 0
 8808 0032 2B4B     		ldr	r3, .L441+8
 8809 0034 1B68     		ldr	r3, [r3]
 8810 0036 7A69     		ldr	r2, [r7, #20]
 8811 0038 D31A     		subs	r3, r2, r3
 8812 003a 3B61     		str	r3, [r7, #16]
2269:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2270:bluetooth_rxtx.c **** 
2271:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2272:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 8813              		.loc 1 2272 0
 8814 003c 3B69     		ldr	r3, [r7, #16]
 8815 003e 46F2A712 		movw	r2, #24999
 8816 0042 9342     		cmp	r3, r2
 8817 0044 00D8     		bhi	.L435
2273:bluetooth_rxtx.c **** 		return;
 8818              		.loc 1 2273 0
 8819 0046 43E0     		b	.L433
 8820              	.L435:
2274:bluetooth_rxtx.c **** 
2275:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 8821              		.loc 1 2275 0
 8822 0048 274B     		ldr	r3, .L441+16
 8823 004a D3F80021 		ldr	r2, [r3, #256]
 8824 004e 3B69     		ldr	r3, [r7, #16]
 8825 0050 9A42     		cmp	r2, r3
 8826 0052 03D9     		bls	.L437
2276:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 8827              		.loc 1 2276 0
 8828 0054 244A     		ldr	r2, .L441+16
 8829 0056 3B69     		ldr	r3, [r7, #16]
 8830 0058 C2F80031 		str	r3, [r2, #256]
 8831              	.L437:
2277:bluetooth_rxtx.c **** 
2278:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 8832              		.loc 1 2278 0
 8833 005c 224B     		ldr	r3, .L441+16
 8834 005e D3F80031 		ldr	r3, [r3, #256]
 8835 0062 03F56133 		add	r3, r3, #230400
 8836 0066 03F25233 		addw	r3, r3, #850
 8837 006a 204A     		ldr	r2, .L441+20
 8838 006c A2FB0323 		umull	r2, r3, r2, r3
 8839 0070 9B0C     		lsrs	r3, r3, #18
 8840 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2279:bluetooth_rxtx.c **** 
2280:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 8841              		.loc 1 2280 0
 8842 0074 1E4B     		ldr	r3, .L441+24
ARM GAS  /tmp/ccTf0kks.s 			page 195


 8843 0076 DB8B     		ldrh	r3, [r3, #30]
 8844 0078 FA89     		ldrh	r2, [r7, #14]
 8845 007a 9A42     		cmp	r2, r3
 8846 007c 1ED1     		bne	.L438
2281:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2282:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
 8847              		.loc 1 2282 0
 8848 007e 1A4B     		ldr	r3, .L441+16
 8849 0080 D3F80431 		ldr	r3, [r3, #260]
 8850 0084 0133     		adds	r3, r3, #1
 8851 0086 184A     		ldr	r2, .L441+16
 8852 0088 C2F80431 		str	r3, [r2, #260]
2283:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 8853              		.loc 1 2283 0
 8854 008c 164B     		ldr	r3, .L441+16
 8855 008e D3F80431 		ldr	r3, [r3, #260]
 8856 0092 052B     		cmp	r3, #5
 8857 0094 19D1     		bne	.L440
2284:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 8858              		.loc 1 2284 0
 8859 0096 174B     		ldr	r3, .L441+28
 8860 0098 174A     		ldr	r2, .L441+32
 8861 009a 1A60     		str	r2, [r3]
2285:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 8862              		.loc 1 2285 0
 8863 009c 174B     		ldr	r3, .L441+36
 8864 009e 40F66412 		movw	r2, #2404
 8865 00a2 1A80     		strh	r2, [r3]	@ movhi
2286:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 8866              		.loc 1 2286 0
 8867 00a4 164B     		ldr	r3, .L441+40
 8868 00a6 0422     		movs	r2, #4
 8869 00a8 1A70     		strb	r2, [r3]
2287:bluetooth_rxtx.c **** 			do_hop = 1;
 8870              		.loc 1 2287 0
 8871 00aa 164B     		ldr	r3, .L441+44
 8872 00ac 0122     		movs	r2, #1
 8873 00ae 1A70     		strb	r2, [r3]
2288:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 8874              		.loc 1 2288 0
 8875 00b0 0220     		movs	r0, #2
 8876 00b2 1549     		ldr	r1, .L441+48
 8877 00b4 0222     		movs	r2, #2
 8878 00b6 FFF7FEFF 		bl	le_promisc_state
 8879 00ba 06E0     		b	.L440
 8880              	.L438:
2289:bluetooth_rxtx.c **** 		}
2290:bluetooth_rxtx.c **** 	} else {
2291:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 8881              		.loc 1 2291 0
 8882 00bc 0C4A     		ldr	r2, .L441+24
 8883 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 8884 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2292:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 8885              		.loc 1 2292 0
 8886 00c2 094B     		ldr	r3, .L441+16
 8887 00c4 0022     		movs	r2, #0
ARM GAS  /tmp/ccTf0kks.s 			page 196


 8888 00c6 C3F80421 		str	r2, [r3, #260]
 8889              	.L440:
2293:bluetooth_rxtx.c **** 	}
2294:bluetooth_rxtx.c **** 
2295:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 8890              		.loc 1 2295 0
 8891 00ca 054A     		ldr	r2, .L441+8
 8892 00cc 7B69     		ldr	r3, [r7, #20]
 8893 00ce 1360     		str	r3, [r2]
 8894              	.L433:
2296:bluetooth_rxtx.c **** }
 8895              		.loc 1 2296 0
 8896 00d0 1837     		adds	r7, r7, #24
 8897              		.cfi_def_cfa_offset 8
 8898 00d2 BD46     		mov	sp, r7
 8899              		.cfi_def_cfa_register 13
 8900              		@ sp needed
 8901 00d4 80BD     		pop	{r7, pc}
 8902              	.L442:
 8903 00d6 00BF     		.align	2
 8904              	.L441:
 8905 00d8 00000000 		.word	clkn
 8906 00dc 08400040 		.word	1073758216
 8907 00e0 DC000000 		.word	prev_clk.4813
 8908 00e4 C0ABC6C2 		.word	-1027167296
 8909 00e8 00000000 		.word	le_promisc
 8910 00ec C1A91991 		.word	-1860589119
 8911 00f0 00000000 		.word	le
 8912 00f4 00000000 		.word	packet_cb
 8913 00f8 00000000 		.word	promisc_recover_hop_increment
 8914 00fc 00000000 		.word	hop_direct_channel
 8915 0100 00000000 		.word	hop_mode
 8916 0104 00000000 		.word	do_hop
 8917 0108 1E000000 		.word	le+30
 8918              		.cfi_endproc
 8919              	.LFE39:
 8921              		.section	.text.promisc_follow_cb,"ax",%progbits
 8922              		.align	2
 8923              		.global	promisc_follow_cb
 8924              		.thumb
 8925              		.thumb_func
 8927              	promisc_follow_cb:
 8928              	.LFB40:
2297:bluetooth_rxtx.c **** 
2298:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 8929              		.loc 1 2298 0
 8930              		.cfi_startproc
 8931              		@ args = 0, pretend = 0, frame = 16
 8932              		@ frame_needed = 1, uses_anonymous_args = 0
 8933 0000 80B5     		push	{r7, lr}
 8934              		.cfi_def_cfa_offset 8
 8935              		.cfi_offset 7, -8
 8936              		.cfi_offset 14, -4
 8937 0002 84B0     		sub	sp, sp, #16
 8938              		.cfi_def_cfa_offset 24
 8939 0004 00AF     		add	r7, sp, #0
 8940              		.cfi_def_cfa_register 7
ARM GAS  /tmp/ccTf0kks.s 			page 197


 8941 0006 7860     		str	r0, [r7, #4]
2299:bluetooth_rxtx.c **** 	int i;
2300:bluetooth_rxtx.c **** 
2301:bluetooth_rxtx.c **** 	// get the CRCInit
2302:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 8942              		.loc 1 2302 0
 8943 0008 284B     		ldr	r3, .L447
 8944 000a 1B69     		ldr	r3, [r3, #16]
 8945 000c 002B     		cmp	r3, #0
 8946 000e 49D1     		bne	.L443
 8947              		.loc 1 2302 0 is_stmt 0 discriminator 1
 8948 0010 7B68     		ldr	r3, [r7, #4]
 8949 0012 0433     		adds	r3, r3, #4
 8950 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8951 0016 012B     		cmp	r3, #1
 8952 0018 44D1     		bne	.L443
 8953              		.loc 1 2302 0 discriminator 2
 8954 001a 7B68     		ldr	r3, [r7, #4]
 8955 001c 0533     		adds	r3, r3, #5
 8956 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8957 0020 002B     		cmp	r3, #0
 8958 0022 3FD1     		bne	.L443
 8959              	.LBB16:
2303:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 8960              		.loc 1 2303 0 is_stmt 1
 8961 0024 7B68     		ldr	r3, [r7, #4]
 8962 0026 0833     		adds	r3, r3, #8
 8963 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8964 002a 1A04     		lsls	r2, r3, #16
 8965 002c 7B68     		ldr	r3, [r7, #4]
 8966 002e 0733     		adds	r3, r3, #7
 8967 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8968 0032 1B02     		lsls	r3, r3, #8
 8969 0034 1343     		orrs	r3, r3, r2
 8970 0036 7A68     		ldr	r2, [r7, #4]
 8971 0038 0632     		adds	r2, r2, #6
 8972 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8973 003c 1343     		orrs	r3, r3, r2
 8974 003e BB60     		str	r3, [r7, #8]
2304:bluetooth_rxtx.c **** 
2305:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 8975              		.loc 1 2305 0
 8976 0040 7B68     		ldr	r3, [r7, #4]
 8977 0042 0433     		adds	r3, r3, #4
 8978 0044 B868     		ldr	r0, [r7, #8]
 8979 0046 1946     		mov	r1, r3
 8980 0048 0222     		movs	r2, #2
 8981 004a FFF7FEFF 		bl	btle_reverse_crc
 8982 004e 0246     		mov	r2, r0
 8983 0050 164B     		ldr	r3, .L447
 8984 0052 9A60     		str	r2, [r3, #8]
2306:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 8985              		.loc 1 2306 0
 8986 0054 154B     		ldr	r3, .L447
 8987 0056 0022     		movs	r2, #0
 8988 0058 DA60     		str	r2, [r3, #12]
2307:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
ARM GAS  /tmp/ccTf0kks.s 			page 198


 8989              		.loc 1 2307 0
 8990 005a 0023     		movs	r3, #0
 8991 005c FB60     		str	r3, [r7, #12]
 8992 005e 13E0     		b	.L445
 8993              	.L446:
2308:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
 8994              		.loc 1 2308 0 discriminator 3
 8995 0060 124B     		ldr	r3, .L447
 8996 0062 DA68     		ldr	r2, [r3, #12]
 8997 0064 114B     		ldr	r3, .L447
 8998 0066 9968     		ldr	r1, [r3, #8]
 8999 0068 FB68     		ldr	r3, [r7, #12]
 9000 006a 21FA03F3 		lsr	r3, r1, r3
 9001 006e 03F00101 		and	r1, r3, #1
 9002 0072 FB68     		ldr	r3, [r7, #12]
 9003 0074 C3F11703 		rsb	r3, r3, #23
 9004 0078 01FA03F3 		lsl	r3, r1, r3
 9005 007c 1343     		orrs	r3, r3, r2
 9006 007e 0B4A     		ldr	r2, .L447
 9007 0080 D360     		str	r3, [r2, #12]
2307:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9008              		.loc 1 2307 0 discriminator 3
 9009 0082 FB68     		ldr	r3, [r7, #12]
 9010 0084 0133     		adds	r3, r3, #1
 9011 0086 FB60     		str	r3, [r7, #12]
 9012              	.L445:
2307:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 9013              		.loc 1 2307 0 is_stmt 0 discriminator 1
 9014 0088 FB68     		ldr	r3, [r7, #12]
 9015 008a 172B     		cmp	r3, #23
 9016 008c E8DD     		ble	.L446
2309:bluetooth_rxtx.c **** 
2310:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 9017              		.loc 1 2310 0 is_stmt 1
 9018 008e 074B     		ldr	r3, .L447
 9019 0090 0122     		movs	r2, #1
 9020 0092 1A61     		str	r2, [r3, #16]
2311:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 9021              		.loc 1 2311 0
 9022 0094 064B     		ldr	r3, .L447+4
 9023 0096 074A     		ldr	r2, .L447+8
 9024 0098 1A60     		str	r2, [r3]
2312:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 9025              		.loc 1 2312 0
 9026 009a 0120     		movs	r0, #1
 9027 009c 0649     		ldr	r1, .L447+12
 9028 009e 0322     		movs	r2, #3
 9029 00a0 FFF7FEFF 		bl	le_promisc_state
 9030              	.L443:
 9031              	.LBE16:
2313:bluetooth_rxtx.c **** 	}
2314:bluetooth_rxtx.c **** }
 9032              		.loc 1 2314 0
 9033 00a4 1037     		adds	r7, r7, #16
 9034              		.cfi_def_cfa_offset 8
 9035 00a6 BD46     		mov	sp, r7
 9036              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccTf0kks.s 			page 199


 9037              		@ sp needed
 9038 00a8 80BD     		pop	{r7, pc}
 9039              	.L448:
 9040 00aa 00BF     		.align	2
 9041              	.L447:
 9042 00ac 00000000 		.word	le
 9043 00b0 00000000 		.word	packet_cb
 9044 00b4 00000000 		.word	promisc_recover_hop_interval
 9045 00b8 08000000 		.word	le+8
 9046              		.cfi_endproc
 9047              	.LFE40:
 9049              		.section	.text.see_aa,"ax",%progbits
 9050              		.align	2
 9051              		.global	see_aa
 9052              		.thumb
 9053              		.thumb_func
 9055              	see_aa:
 9056              	.LFB41:
2315:bluetooth_rxtx.c **** 
2316:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2317:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 9057              		.loc 1 2317 0
 9058              		.cfi_startproc
 9059              		@ args = 0, pretend = 0, frame = 24
 9060              		@ frame_needed = 1, uses_anonymous_args = 0
 9061              		@ link register save eliminated.
 9062 0000 80B4     		push	{r7}
 9063              		.cfi_def_cfa_offset 4
 9064              		.cfi_offset 7, -4
 9065 0002 87B0     		sub	sp, sp, #28
 9066              		.cfi_def_cfa_offset 32
 9067 0004 00AF     		add	r7, sp, #0
 9068              		.cfi_def_cfa_register 7
 9069 0006 7860     		str	r0, [r7, #4]
2318:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 9070              		.loc 1 2318 0
 9071 0008 4FF0FF33 		mov	r3, #-1
 9072 000c 3B61     		str	r3, [r7, #16]
 9073 000e 4FF0FF33 		mov	r3, #-1
 9074 0012 FB60     		str	r3, [r7, #12]
2319:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9075              		.loc 1 2319 0
 9076 0014 0023     		movs	r3, #0
 9077 0016 7B61     		str	r3, [r7, #20]
 9078 0018 15E0     		b	.L450
 9079              	.L453:
2320:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9080              		.loc 1 2320 0
 9081 001a 224A     		ldr	r2, .L458
 9082 001c 7B69     		ldr	r3, [r7, #20]
 9083 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 9084 0022 7B68     		ldr	r3, [r7, #4]
 9085 0024 9A42     		cmp	r2, r3
 9086 0026 0BD1     		bne	.L451
2321:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 9087              		.loc 1 2321 0
 9088 0028 1E4A     		ldr	r2, .L458
ARM GAS  /tmp/ccTf0kks.s 			page 200


 9089 002a 7B69     		ldr	r3, [r7, #20]
 9090 002c DB00     		lsls	r3, r3, #3
 9091 002e 1344     		add	r3, r3, r2
 9092 0030 5B68     		ldr	r3, [r3, #4]
 9093 0032 5A1C     		adds	r2, r3, #1
 9094 0034 1B49     		ldr	r1, .L458
 9095 0036 7B69     		ldr	r3, [r7, #20]
 9096 0038 DB00     		lsls	r3, r3, #3
 9097 003a 0B44     		add	r3, r3, r1
 9098 003c 5A60     		str	r2, [r3, #4]
2322:bluetooth_rxtx.c **** 			return;
 9099              		.loc 1 2322 0
 9100 003e 2CE0     		b	.L449
 9101              	.L451:
2319:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9102              		.loc 1 2319 0 discriminator 2
 9103 0040 7B69     		ldr	r3, [r7, #20]
 9104 0042 0133     		adds	r3, r3, #1
 9105 0044 7B61     		str	r3, [r7, #20]
 9106              	.L450:
2319:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 9107              		.loc 1 2319 0 is_stmt 0 discriminator 1
 9108 0046 7B69     		ldr	r3, [r7, #20]
 9109 0048 1F2B     		cmp	r3, #31
 9110 004a E6DD     		ble	.L453
2323:bluetooth_rxtx.c **** 		}
2324:bluetooth_rxtx.c **** 
2325:bluetooth_rxtx.c **** 	// evict someone
2326:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 9111              		.loc 1 2326 0 is_stmt 1
 9112 004c 0023     		movs	r3, #0
 9113 004e 7B61     		str	r3, [r7, #20]
 9114 0050 15E0     		b	.L454
 9115              	.L457:
2327:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9116              		.loc 1 2327 0
 9117 0052 144A     		ldr	r2, .L458
 9118 0054 7B69     		ldr	r3, [r7, #20]
 9119 0056 DB00     		lsls	r3, r3, #3
 9120 0058 1344     		add	r3, r3, r2
 9121 005a 5A68     		ldr	r2, [r3, #4]
 9122 005c 3B69     		ldr	r3, [r7, #16]
 9123 005e 9A42     		cmp	r2, r3
 9124 0060 02DB     		blt	.L455
 9125              		.loc 1 2327 0 is_stmt 0 discriminator 1
 9126 0062 3B69     		ldr	r3, [r7, #16]
 9127 0064 002B     		cmp	r3, #0
 9128 0066 07DA     		bge	.L456
 9129              	.L455:
2328:bluetooth_rxtx.c **** 			killme = i;
 9130              		.loc 1 2328 0 is_stmt 1
 9131 0068 7B69     		ldr	r3, [r7, #20]
 9132 006a FB60     		str	r3, [r7, #12]
2329:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 9133              		.loc 1 2329 0
 9134 006c 0D4A     		ldr	r2, .L458
 9135 006e 7B69     		ldr	r3, [r7, #20]
ARM GAS  /tmp/ccTf0kks.s 			page 201


 9136 0070 DB00     		lsls	r3, r3, #3
 9137 0072 1344     		add	r3, r3, r2
 9138 0074 5B68     		ldr	r3, [r3, #4]
 9139 0076 3B61     		str	r3, [r7, #16]
 9140              	.L456:
2326:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9141              		.loc 1 2326 0 discriminator 2
 9142 0078 7B69     		ldr	r3, [r7, #20]
 9143 007a 0133     		adds	r3, r3, #1
 9144 007c 7B61     		str	r3, [r7, #20]
 9145              	.L454:
2326:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9146              		.loc 1 2326 0 is_stmt 0 discriminator 1
 9147 007e 7B69     		ldr	r3, [r7, #20]
 9148 0080 1F2B     		cmp	r3, #31
 9149 0082 E6DD     		ble	.L457
2330:bluetooth_rxtx.c **** 		}
2331:bluetooth_rxtx.c **** 
2332:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 9150              		.loc 1 2332 0 is_stmt 1
 9151 0084 0749     		ldr	r1, .L458
 9152 0086 FB68     		ldr	r3, [r7, #12]
 9153 0088 7A68     		ldr	r2, [r7, #4]
 9154 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2333:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 9155              		.loc 1 2333 0
 9156 008e 054A     		ldr	r2, .L458
 9157 0090 FB68     		ldr	r3, [r7, #12]
 9158 0092 DB00     		lsls	r3, r3, #3
 9159 0094 1344     		add	r3, r3, r2
 9160 0096 0122     		movs	r2, #1
 9161 0098 5A60     		str	r2, [r3, #4]
 9162              	.L449:
2334:bluetooth_rxtx.c **** }
 9163              		.loc 1 2334 0
 9164 009a 1C37     		adds	r7, r7, #28
 9165              		.cfi_def_cfa_offset 4
 9166 009c BD46     		mov	sp, r7
 9167              		.cfi_def_cfa_register 13
 9168              		@ sp needed
 9169 009e 5DF8047B 		ldr	r7, [sp], #4
 9170              		.cfi_restore 7
 9171              		.cfi_def_cfa_offset 0
 9172 00a2 7047     		bx	lr
 9173              	.L459:
 9174              		.align	2
 9175              	.L458:
 9176 00a4 00000000 		.word	le_promisc
 9177              		.cfi_endproc
 9178              	.LFE41:
 9180              		.section	.rodata
 9181 08cb 00       		.align	2
 9182              	.LC0:
 9183 08cc 01000000 		.word	1
 9184 08d0 01000000 		.word	1
 9185 08d4 01000000 		.word	1
 9186 08d8 01000000 		.word	1
ARM GAS  /tmp/ccTf0kks.s 			page 202


 9187              		.section	.text.cb_le_promisc,"ax",%progbits
 9188              		.align	2
 9189              		.global	cb_le_promisc
 9190              		.thumb
 9191              		.thumb_func
 9193              	cb_le_promisc:
 9194              	.LFB42:
2335:bluetooth_rxtx.c **** 
2336:bluetooth_rxtx.c **** /* le promiscuous mode */
2337:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 9195              		.loc 1 2337 0
 9196              		.cfi_startproc
 9197              		@ args = 0, pretend = 0, frame = 128
 9198              		@ frame_needed = 1, uses_anonymous_args = 0
 9199 0000 90B5     		push	{r4, r7, lr}
 9200              		.cfi_def_cfa_offset 12
 9201              		.cfi_offset 4, -12
 9202              		.cfi_offset 7, -8
 9203              		.cfi_offset 14, -4
 9204 0002 A1B0     		sub	sp, sp, #132
 9205              		.cfi_def_cfa_offset 144
 9206 0004 00AF     		add	r7, sp, #0
 9207              		.cfi_def_cfa_register 7
 9208 0006 7860     		str	r0, [r7, #4]
2338:bluetooth_rxtx.c **** 	int i, j, k;
2339:bluetooth_rxtx.c **** 	int idx;
2340:bluetooth_rxtx.c **** 
2341:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2342:bluetooth_rxtx.c **** 	char desired[4][16] = {
 9209              		.loc 1 2342 0
 9210 0008 07F11C03 		add	r3, r7, #28
 9211 000c 4022     		movs	r2, #64
 9212 000e 1846     		mov	r0, r3
 9213 0010 0021     		movs	r1, #0
 9214 0012 FFF7FEFF 		bl	memset
 9215 0016 0123     		movs	r3, #1
 9216 0018 3B77     		strb	r3, [r7, #28]
 9217 001a 0123     		movs	r3, #1
 9218 001c 87F82C30 		strb	r3, [r7, #44]
 9219 0020 0123     		movs	r3, #1
 9220 0022 87F82F30 		strb	r3, [r7, #47]
 9221 0026 0123     		movs	r3, #1
 9222 0028 87F83C30 		strb	r3, [r7, #60]
 9223 002c 0123     		movs	r3, #1
 9224 002e 87F83E30 		strb	r3, [r7, #62]
 9225 0032 0123     		movs	r3, #1
 9226 0034 87F84C30 		strb	r3, [r7, #76]
 9227 0038 0123     		movs	r3, #1
 9228 003a 87F84E30 		strb	r3, [r7, #78]
 9229 003e 0123     		movs	r3, #1
 9230 0040 87F84F30 		strb	r3, [r7, #79]
2343:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2344:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2345:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2346:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2347:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2348:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
ARM GAS  /tmp/ccTf0kks.s 			page 203


2349:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2350:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2351:bluetooth_rxtx.c **** 	};
2352:bluetooth_rxtx.c **** 
2353:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 9231              		.loc 1 2353 0
 9232 0044 0023     		movs	r3, #0
 9233 0046 FB67     		str	r3, [r7, #124]
 9234 0048 41E0     		b	.L461
 9235              	.L464:
2354:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9236              		.loc 1 2354 0
 9237 004a A54B     		ldr	r3, .L491
 9238 004c 1B88     		ldrh	r3, [r3]	@ movhi
 9239 004e 9BB2     		uxth	r3, r3
 9240 0050 DBB2     		uxtb	r3, r3
 9241 0052 623B     		subs	r3, r3, #98
 9242 0054 DBB2     		uxtb	r3, r3
 9243 0056 1846     		mov	r0, r3
 9244 0058 FFF7FEFF 		bl	btle_channel_index
 9245 005c 0346     		mov	r3, r0
 9246 005e 1A46     		mov	r2, r3
 9247 0060 A04B     		ldr	r3, .L491+4
 9248 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9249 0064 3B67     		str	r3, [r7, #112]
2355:bluetooth_rxtx.c **** 
2356:bluetooth_rxtx.c **** 		// whiten the desired data
2357:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 9250              		.loc 1 2357 0
 9251 0066 0023     		movs	r3, #0
 9252 0068 BB67     		str	r3, [r7, #120]
 9253 006a 2AE0     		b	.L462
 9254              	.L463:
2358:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9255              		.loc 1 2358 0 discriminator 3
 9256 006c FB6F     		ldr	r3, [r7, #124]
 9257 006e 1B01     		lsls	r3, r3, #4
 9258 0070 07F18002 		add	r2, r7, #128
 9259 0074 1A44     		add	r2, r2, r3
 9260 0076 BB6F     		ldr	r3, [r7, #120]
 9261 0078 1344     		add	r3, r3, r2
 9262 007a 643B     		subs	r3, r3, #100
 9263 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9264 007e 9A49     		ldr	r1, .L491+8
 9265 0080 3B6F     		ldr	r3, [r7, #112]
 9266 0082 0B44     		add	r3, r3, r1
 9267 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9268 0086 5340     		eors	r3, r3, r2
 9269 0088 D9B2     		uxtb	r1, r3
 9270 008a FB6F     		ldr	r3, [r7, #124]
 9271 008c 1B01     		lsls	r3, r3, #4
 9272 008e 07F18002 		add	r2, r7, #128
 9273 0092 1A44     		add	r2, r2, r3
 9274 0094 BB6F     		ldr	r3, [r7, #120]
 9275 0096 1344     		add	r3, r3, r2
 9276 0098 643B     		subs	r3, r3, #100
 9277 009a 0A46     		mov	r2, r1
ARM GAS  /tmp/ccTf0kks.s 			page 204


 9278 009c 1A70     		strb	r2, [r3]
2359:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 9279              		.loc 1 2359 0 discriminator 3
 9280 009e 3B6F     		ldr	r3, [r7, #112]
 9281 00a0 0133     		adds	r3, r3, #1
 9282 00a2 1946     		mov	r1, r3
 9283 00a4 914B     		ldr	r3, .L491+12
 9284 00a6 A1FB0323 		umull	r2, r3, r1, r3
 9285 00aa C81A     		subs	r0, r1, r3
 9286 00ac 4008     		lsrs	r0, r0, #1
 9287 00ae 0344     		add	r3, r3, r0
 9288 00b0 9A09     		lsrs	r2, r3, #6
 9289 00b2 1346     		mov	r3, r2
 9290 00b4 DB01     		lsls	r3, r3, #7
 9291 00b6 9B1A     		subs	r3, r3, r2
 9292 00b8 CA1A     		subs	r2, r1, r3
 9293 00ba 3A67     		str	r2, [r7, #112]
2357:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9294              		.loc 1 2357 0 discriminator 3
 9295 00bc BB6F     		ldr	r3, [r7, #120]
 9296 00be 0133     		adds	r3, r3, #1
 9297 00c0 BB67     		str	r3, [r7, #120]
 9298              	.L462:
2357:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9299              		.loc 1 2357 0 is_stmt 0 discriminator 1
 9300 00c2 BB6F     		ldr	r3, [r7, #120]
 9301 00c4 0F2B     		cmp	r3, #15
 9302 00c6 D1DD     		ble	.L463
2353:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9303              		.loc 1 2353 0 is_stmt 1 discriminator 2
 9304 00c8 FB6F     		ldr	r3, [r7, #124]
 9305 00ca 0133     		adds	r3, r3, #1
 9306 00cc FB67     		str	r3, [r7, #124]
 9307              	.L461:
2353:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9308              		.loc 1 2353 0 is_stmt 0 discriminator 1
 9309 00ce FB6F     		ldr	r3, [r7, #124]
 9310 00d0 032B     		cmp	r3, #3
 9311 00d2 BADD     		ble	.L464
2360:bluetooth_rxtx.c **** 		}
2361:bluetooth_rxtx.c **** 	}
2362:bluetooth_rxtx.c **** 
2363:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2364:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 9312              		.loc 1 2364 0 is_stmt 1
 9313 00d4 2023     		movs	r3, #32
 9314 00d6 FB67     		str	r3, [r7, #124]
 9315 00d8 D0E0     		b	.L465
 9316              	.L485:
 9317              	.LBB17:
2365:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9318              		.loc 1 2365 0
 9319 00da 854B     		ldr	r3, .L491+16
 9320 00dc 07F10C04 		add	r4, r7, #12
 9321 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 9322 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2366:bluetooth_rxtx.c **** 		int matching = -1;
ARM GAS  /tmp/ccTf0kks.s 			page 205


 9323              		.loc 1 2366 0
 9324 00e6 4FF0FF33 		mov	r3, #-1
 9325 00ea FB66     		str	r3, [r7, #108]
2367:bluetooth_rxtx.c **** 
2368:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9326              		.loc 1 2368 0
 9327 00ec 0023     		movs	r3, #0
 9328 00ee BB67     		str	r3, [r7, #120]
 9329 00f0 26E0     		b	.L466
 9330              	.L471:
2369:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9331              		.loc 1 2369 0
 9332 00f2 0023     		movs	r3, #0
 9333 00f4 7B67     		str	r3, [r7, #116]
 9334 00f6 1DE0     		b	.L467
 9335              	.L470:
2370:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9336              		.loc 1 2370 0
 9337 00f8 FA6F     		ldr	r2, [r7, #124]
 9338 00fa 7B6F     		ldr	r3, [r7, #116]
 9339 00fc 1344     		add	r3, r3, r2
 9340 00fe 1A46     		mov	r2, r3
 9341 0100 7B68     		ldr	r3, [r7, #4]
 9342 0102 1344     		add	r3, r3, r2
 9343 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9344 0106 BB6F     		ldr	r3, [r7, #120]
 9345 0108 1B01     		lsls	r3, r3, #4
 9346 010a 07F18001 		add	r1, r7, #128
 9347 010e 1944     		add	r1, r1, r3
 9348 0110 7B6F     		ldr	r3, [r7, #116]
 9349 0112 0B44     		add	r3, r3, r1
 9350 0114 643B     		subs	r3, r3, #100
 9351 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9352 0118 9A42     		cmp	r2, r3
 9353 011a 08D0     		beq	.L468
2371:bluetooth_rxtx.c **** 					ok[j] = 0;
 9354              		.loc 1 2371 0
 9355 011c BB6F     		ldr	r3, [r7, #120]
 9356 011e 9B00     		lsls	r3, r3, #2
 9357 0120 07F18002 		add	r2, r7, #128
 9358 0124 1344     		add	r3, r3, r2
 9359 0126 0022     		movs	r2, #0
 9360 0128 43F8742C 		str	r2, [r3, #-116]
2372:bluetooth_rxtx.c **** 					break;
 9361              		.loc 1 2372 0
 9362 012c 05E0     		b	.L469
 9363              	.L468:
2369:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9364              		.loc 1 2369 0 discriminator 2
 9365 012e 7B6F     		ldr	r3, [r7, #116]
 9366 0130 0133     		adds	r3, r3, #1
 9367 0132 7B67     		str	r3, [r7, #116]
 9368              	.L467:
2369:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9369              		.loc 1 2369 0 is_stmt 0 discriminator 1
 9370 0134 7B6F     		ldr	r3, [r7, #116]
 9371 0136 0F2B     		cmp	r3, #15
ARM GAS  /tmp/ccTf0kks.s 			page 206


 9372 0138 DEDD     		ble	.L470
 9373              	.L469:
2368:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9374              		.loc 1 2368 0 is_stmt 1 discriminator 2
 9375 013a BB6F     		ldr	r3, [r7, #120]
 9376 013c 0133     		adds	r3, r3, #1
 9377 013e BB67     		str	r3, [r7, #120]
 9378              	.L466:
2368:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9379              		.loc 1 2368 0 is_stmt 0 discriminator 1
 9380 0140 BB6F     		ldr	r3, [r7, #120]
 9381 0142 032B     		cmp	r3, #3
 9382 0144 D5DD     		ble	.L471
2373:bluetooth_rxtx.c **** 				}
2374:bluetooth_rxtx.c **** 			}
2375:bluetooth_rxtx.c **** 		}
2376:bluetooth_rxtx.c **** 
2377:bluetooth_rxtx.c **** 		// see if any match
2378:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9383              		.loc 1 2378 0 is_stmt 1
 9384 0146 0023     		movs	r3, #0
 9385 0148 BB67     		str	r3, [r7, #120]
 9386 014a 0EE0     		b	.L472
 9387              	.L475:
2379:bluetooth_rxtx.c **** 			if (ok[j]) {
 9388              		.loc 1 2379 0
 9389 014c BB6F     		ldr	r3, [r7, #120]
 9390 014e 9B00     		lsls	r3, r3, #2
 9391 0150 07F18002 		add	r2, r7, #128
 9392 0154 1344     		add	r3, r3, r2
 9393 0156 53F8743C 		ldr	r3, [r3, #-116]
 9394 015a 002B     		cmp	r3, #0
 9395 015c 02D0     		beq	.L473
2380:bluetooth_rxtx.c **** 				matching = j;
 9396              		.loc 1 2380 0
 9397 015e BB6F     		ldr	r3, [r7, #120]
 9398 0160 FB66     		str	r3, [r7, #108]
2381:bluetooth_rxtx.c **** 				break;
 9399              		.loc 1 2381 0
 9400 0162 05E0     		b	.L474
 9401              	.L473:
2378:bluetooth_rxtx.c **** 			if (ok[j]) {
 9402              		.loc 1 2378 0 discriminator 2
 9403 0164 BB6F     		ldr	r3, [r7, #120]
 9404 0166 0133     		adds	r3, r3, #1
 9405 0168 BB67     		str	r3, [r7, #120]
 9406              	.L472:
2378:bluetooth_rxtx.c **** 			if (ok[j]) {
 9407              		.loc 1 2378 0 is_stmt 0 discriminator 1
 9408 016a BB6F     		ldr	r3, [r7, #120]
 9409 016c 032B     		cmp	r3, #3
 9410 016e EDDD     		ble	.L475
 9411              	.L474:
2382:bluetooth_rxtx.c **** 			}
2383:bluetooth_rxtx.c **** 		}
2384:bluetooth_rxtx.c **** 
2385:bluetooth_rxtx.c **** 		// skip if no match
ARM GAS  /tmp/ccTf0kks.s 			page 207


2386:bluetooth_rxtx.c **** 		if (matching < 0)
 9412              		.loc 1 2386 0 is_stmt 1
 9413 0170 FB6E     		ldr	r3, [r7, #108]
 9414 0172 002B     		cmp	r3, #0
 9415 0174 7FDB     		blt	.L477
2387:bluetooth_rxtx.c **** 			continue;
2388:bluetooth_rxtx.c **** 
2389:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2390:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9416              		.loc 1 2390 0
 9417 0176 5A4B     		ldr	r3, .L491
 9418 0178 1B88     		ldrh	r3, [r3]	@ movhi
 9419 017a 9BB2     		uxth	r3, r3
 9420 017c DBB2     		uxtb	r3, r3
 9421 017e 623B     		subs	r3, r3, #98
 9422 0180 DBB2     		uxtb	r3, r3
 9423 0182 1846     		mov	r0, r3
 9424 0184 FFF7FEFF 		bl	btle_channel_index
 9425 0188 0346     		mov	r3, r0
 9426 018a 1A46     		mov	r2, r3
 9427 018c 554B     		ldr	r3, .L491+4
 9428 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9429 0190 3B67     		str	r3, [r7, #112]
2391:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 9430              		.loc 1 2391 0
 9431 0192 0023     		movs	r3, #0
 9432 0194 BB67     		str	r3, [r7, #120]
 9433 0196 4CE0     		b	.L478
 9434              	.L484:
 9435              	.LBB18:
2392:bluetooth_rxtx.c **** 			u8 byte = 0;
 9436              		.loc 1 2392 0
 9437 0198 0023     		movs	r3, #0
 9438 019a 87F86B30 		strb	r3, [r7, #107]
2393:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 9439              		.loc 1 2393 0
 9440 019e 0023     		movs	r3, #0
 9441 01a0 7B67     		str	r3, [r7, #116]
 9442 01a2 39E0     		b	.L479
 9443              	.L483:
 9444              	.LBB19:
2394:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9445              		.loc 1 2394 0
 9446 01a4 BB6F     		ldr	r3, [r7, #120]
 9447 01a6 DA00     		lsls	r2, r3, #3
 9448 01a8 7B6F     		ldr	r3, [r7, #116]
 9449 01aa 1A44     		add	r2, r2, r3
 9450 01ac FB6F     		ldr	r3, [r7, #124]
 9451 01ae 1344     		add	r3, r3, r2
 9452 01b0 203B     		subs	r3, r3, #32
 9453 01b2 3B66     		str	r3, [r7, #96]
2395:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 9454              		.loc 1 2395 0
 9455 01b4 3B6E     		ldr	r3, [r7, #96]
 9456 01b6 B3F5487F 		cmp	r3, #800
 9457 01ba 00DB     		blt	.L480
 9458 01bc 2FE0     		b	.L481
ARM GAS  /tmp/ccTf0kks.s 			page 208


 9459              	.L480:
2396:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 9460              		.loc 1 2396 0
 9461 01be 3B6E     		ldr	r3, [r7, #96]
 9462 01c0 7A68     		ldr	r2, [r7, #4]
 9463 01c2 1344     		add	r3, r3, r2
 9464 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9465 01c6 7B66     		str	r3, [r7, #100]
2397:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 9466              		.loc 1 2397 0
 9467 01c8 BB6F     		ldr	r3, [r7, #120]
 9468 01ca 032B     		cmp	r3, #3
 9469 01cc 16DD     		ble	.L482
2398:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 9470              		.loc 1 2398 0
 9471 01ce 464A     		ldr	r2, .L491+8
 9472 01d0 3B6F     		ldr	r3, [r7, #112]
 9473 01d2 1344     		add	r3, r3, r2
 9474 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9475 01d6 1A46     		mov	r2, r3
 9476 01d8 7B6E     		ldr	r3, [r7, #100]
 9477 01da 5340     		eors	r3, r3, r2
 9478 01dc 7B66     		str	r3, [r7, #100]
2399:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 9479              		.loc 1 2399 0
 9480 01de 3B6F     		ldr	r3, [r7, #112]
 9481 01e0 0133     		adds	r3, r3, #1
 9482 01e2 1946     		mov	r1, r3
 9483 01e4 414B     		ldr	r3, .L491+12
 9484 01e6 A1FB0323 		umull	r2, r3, r1, r3
 9485 01ea C81A     		subs	r0, r1, r3
 9486 01ec 4008     		lsrs	r0, r0, #1
 9487 01ee 0344     		add	r3, r3, r0
 9488 01f0 9A09     		lsrs	r2, r3, #6
 9489 01f2 1346     		mov	r3, r2
 9490 01f4 DB01     		lsls	r3, r3, #7
 9491 01f6 9B1A     		subs	r3, r3, r2
 9492 01f8 CA1A     		subs	r2, r1, r3
 9493 01fa 3A67     		str	r2, [r7, #112]
 9494              	.L482:
2400:bluetooth_rxtx.c **** 				}
2401:bluetooth_rxtx.c **** 				byte |= bit << k;
 9495              		.loc 1 2401 0 discriminator 2
 9496 01fc 7A6E     		ldr	r2, [r7, #100]
 9497 01fe 7B6F     		ldr	r3, [r7, #116]
 9498 0200 02FA03F3 		lsl	r3, r2, r3
 9499 0204 DAB2     		uxtb	r2, r3
 9500 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 9501 020a 1343     		orrs	r3, r3, r2
 9502 020c DBB2     		uxtb	r3, r3
 9503 020e 87F86B30 		strb	r3, [r7, #107]
 9504              	.LBE19:
2393:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9505              		.loc 1 2393 0 discriminator 2
 9506 0212 7B6F     		ldr	r3, [r7, #116]
 9507 0214 0133     		adds	r3, r3, #1
 9508 0216 7B67     		str	r3, [r7, #116]
ARM GAS  /tmp/ccTf0kks.s 			page 209


 9509              	.L479:
2393:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9510              		.loc 1 2393 0 is_stmt 0 discriminator 1
 9511 0218 7B6F     		ldr	r3, [r7, #116]
 9512 021a 072B     		cmp	r3, #7
 9513 021c C2DD     		ble	.L483
 9514              	.L481:
2402:bluetooth_rxtx.c **** 			}
2403:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 9515              		.loc 1 2403 0 is_stmt 1 discriminator 2
 9516 021e 354B     		ldr	r3, .L491+20
 9517 0220 1A68     		ldr	r2, [r3]
 9518 0222 BB6F     		ldr	r3, [r7, #120]
 9519 0224 1344     		add	r3, r3, r2
 9520 0226 97F86B20 		ldrb	r2, [r7, #107]
 9521 022a 1A70     		strb	r2, [r3]
 9522              	.LBE18:
2391:bluetooth_rxtx.c **** 			u8 byte = 0;
 9523              		.loc 1 2391 0 discriminator 2
 9524 022c BB6F     		ldr	r3, [r7, #120]
 9525 022e 0133     		adds	r3, r3, #1
 9526 0230 BB67     		str	r3, [r7, #120]
 9527              	.L478:
2391:bluetooth_rxtx.c **** 			u8 byte = 0;
 9528              		.loc 1 2391 0 is_stmt 0 discriminator 1
 9529 0232 BB6F     		ldr	r3, [r7, #120]
 9530 0234 092B     		cmp	r3, #9
 9531 0236 AFDD     		ble	.L484
2404:bluetooth_rxtx.c **** 		}
2405:bluetooth_rxtx.c **** 
2406:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 9532              		.loc 1 2406 0 is_stmt 1
 9533 0238 2E4B     		ldr	r3, .L491+20
 9534 023a 1B68     		ldr	r3, [r3]
 9535 023c 0333     		adds	r3, r3, #3
 9536 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9537 0240 1A06     		lsls	r2, r3, #24
2407:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9538              		.loc 1 2407 0
 9539 0242 2C4B     		ldr	r3, .L491+20
 9540 0244 1B68     		ldr	r3, [r3]
 9541 0246 0233     		adds	r3, r3, #2
 9542 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9543 024a 1B04     		lsls	r3, r3, #16
2406:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9544              		.loc 1 2406 0
 9545 024c 1A43     		orrs	r2, r2, r3
2408:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9546              		.loc 1 2408 0
 9547 024e 294B     		ldr	r3, .L491+20
 9548 0250 1B68     		ldr	r3, [r3]
 9549 0252 0133     		adds	r3, r3, #1
 9550 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9551 0256 1B02     		lsls	r3, r3, #8
2407:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9552              		.loc 1 2407 0
 9553 0258 1343     		orrs	r3, r3, r2
ARM GAS  /tmp/ccTf0kks.s 			page 210


2409:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 9554              		.loc 1 2409 0
 9555 025a 264A     		ldr	r2, .L491+20
 9556 025c 1268     		ldr	r2, [r2]
 9557 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2408:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9558              		.loc 1 2408 0
 9559 0260 1343     		orrs	r3, r3, r2
2406:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9560              		.loc 1 2406 0
 9561 0262 FB65     		str	r3, [r7, #92]
2410:bluetooth_rxtx.c **** 		see_aa(aa);
 9562              		.loc 1 2410 0
 9563 0264 F86D     		ldr	r0, [r7, #92]
 9564 0266 FFF7FEFF 		bl	see_aa
2411:bluetooth_rxtx.c **** 
2412:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 9565              		.loc 1 2412 0
 9566 026a 224B     		ldr	r3, .L491+20
 9567 026c 1B68     		ldr	r3, [r3]
 9568 026e 0120     		movs	r0, #1
 9569 0270 1946     		mov	r1, r3
 9570 0272 FFF7FEFF 		bl	enqueue
 9571              	.L477:
 9572              	.LBE17:
2364:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9573              		.loc 1 2364 0 discriminator 2
 9574 0276 FB6F     		ldr	r3, [r7, #124]
 9575 0278 0133     		adds	r3, r3, #1
 9576 027a FB67     		str	r3, [r7, #124]
 9577              	.L465:
2364:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9578              		.loc 1 2364 0 is_stmt 0 discriminator 1
 9579 027c FB6F     		ldr	r3, [r7, #124]
 9580 027e B3F53C7F 		cmp	r3, #752
 9581 0282 FFF62AAF 		blt	.L485
2413:bluetooth_rxtx.c **** 
2414:bluetooth_rxtx.c **** 	}
2415:bluetooth_rxtx.c **** 
2416:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2417:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 9582              		.loc 1 2417 0 is_stmt 1
 9583 0286 0023     		movs	r3, #0
 9584 0288 FB67     		str	r3, [r7, #124]
 9585 028a 20E0     		b	.L486
 9586              	.L489:
2418:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9587              		.loc 1 2418 0
 9588 028c 1A4A     		ldr	r2, .L491+24
 9589 028e FB6F     		ldr	r3, [r7, #124]
 9590 0290 DB00     		lsls	r3, r3, #3
 9591 0292 1344     		add	r3, r3, r2
 9592 0294 5B68     		ldr	r3, [r3, #4]
 9593 0296 032B     		cmp	r3, #3
 9594 0298 16DD     		ble	.L487
2419:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 9595              		.loc 1 2419 0
ARM GAS  /tmp/ccTf0kks.s 			page 211


 9596 029a 174A     		ldr	r2, .L491+24
 9597 029c FB6F     		ldr	r3, [r7, #124]
 9598 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 9599 02a2 1846     		mov	r0, r3
 9600 02a4 FFF7FEFF 		bl	le_set_access_address
2420:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
 9601              		.loc 1 2420 0
 9602 02a8 144B     		ldr	r3, .L491+28
 9603 02aa 154A     		ldr	r2, .L491+32
 9604 02ac 1A60     		str	r2, [r3]
2421:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 9605              		.loc 1 2421 0
 9606 02ae 154B     		ldr	r3, .L491+36
 9607 02b0 154A     		ldr	r2, .L491+40
 9608 02b2 1A60     		str	r2, [r3]
2422:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9609              		.loc 1 2422 0
 9610 02b4 154B     		ldr	r3, .L491+44
 9611 02b6 0022     		movs	r2, #0
 9612 02b8 1A61     		str	r2, [r3, #16]
2423:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 9613              		.loc 1 2423 0
 9614 02ba 0020     		movs	r0, #0
 9615 02bc 1349     		ldr	r1, .L491+44
 9616 02be 0422     		movs	r2, #4
 9617 02c0 FFF7FEFF 		bl	le_promisc_state
2424:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2425:bluetooth_rxtx.c **** 			return 0;
 9618              		.loc 1 2425 0
 9619 02c4 0023     		movs	r3, #0
 9620 02c6 06E0     		b	.L490
 9621              	.L487:
2417:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9622              		.loc 1 2417 0 discriminator 2
 9623 02c8 FB6F     		ldr	r3, [r7, #124]
 9624 02ca 0133     		adds	r3, r3, #1
 9625 02cc FB67     		str	r3, [r7, #124]
 9626              	.L486:
2417:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9627              		.loc 1 2417 0 is_stmt 0 discriminator 1
 9628 02ce FB6F     		ldr	r3, [r7, #124]
 9629 02d0 1F2B     		cmp	r3, #31
 9630 02d2 DBDD     		ble	.L489
2426:bluetooth_rxtx.c **** 		}
2427:bluetooth_rxtx.c **** 	}
2428:bluetooth_rxtx.c **** 
2429:bluetooth_rxtx.c **** 	return 1;
 9631              		.loc 1 2429 0 is_stmt 1
 9632 02d4 0123     		movs	r3, #1
 9633              	.L490:
2430:bluetooth_rxtx.c **** }
 9634              		.loc 1 2430 0 discriminator 1
 9635 02d6 1846     		mov	r0, r3
 9636 02d8 8437     		adds	r7, r7, #132
 9637              		.cfi_def_cfa_offset 12
 9638 02da BD46     		mov	sp, r7
 9639              		.cfi_def_cfa_register 13
ARM GAS  /tmp/ccTf0kks.s 			page 212


 9640              		@ sp needed
 9641 02dc 90BD     		pop	{r4, r7, pc}
 9642              	.L492:
 9643 02de 00BF     		.align	2
 9644              	.L491:
 9645 02e0 00000000 		.word	channel
 9646 02e4 AC000000 		.word	whitening_index
 9647 02e8 2C000000 		.word	whitening
 9648 02ec 11080402 		.word	33818641
 9649 02f0 CC080000 		.word	.LC0
 9650 02f4 00000000 		.word	idle_rxbuf
 9651 02f8 00000000 		.word	le_promisc
 9652 02fc 00000000 		.word	data_cb
 9653 0300 00000000 		.word	cb_follow_le
 9654 0304 00000000 		.word	packet_cb
 9655 0308 00000000 		.word	promisc_follow_cb
 9656 030c 00000000 		.word	le
 9657              		.cfi_endproc
 9658              	.LFE42:
 9660              		.section	.text.bt_promisc_le,"ax",%progbits
 9661              		.align	2
 9662              		.global	bt_promisc_le
 9663              		.thumb
 9664              		.thumb_func
 9666              	bt_promisc_le:
 9667              	.LFB43:
2431:bluetooth_rxtx.c **** 
2432:bluetooth_rxtx.c **** void bt_promisc_le() {
 9668              		.loc 1 2432 0
 9669              		.cfi_startproc
 9670              		@ args = 0, pretend = 0, frame = 0
 9671              		@ frame_needed = 1, uses_anonymous_args = 0
 9672 0000 80B5     		push	{r7, lr}
 9673              		.cfi_def_cfa_offset 8
 9674              		.cfi_offset 7, -8
 9675              		.cfi_offset 14, -4
 9676 0002 00AF     		add	r7, sp, #0
 9677              		.cfi_def_cfa_register 7
2433:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 9678              		.loc 1 2433 0
 9679 0004 2CE0     		b	.L494
 9680              	.L499:
2434:bluetooth_rxtx.c **** 		reset_le_promisc();
 9681              		.loc 1 2434 0
 9682 0006 FFF7FEFF 		bl	reset_le_promisc
2435:bluetooth_rxtx.c **** 
2436:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2437:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 9683              		.loc 1 2437 0
 9684 000a 184B     		ldr	r3, .L500
 9685 000c 1B88     		ldrh	r3, [r3]	@ movhi
 9686 000e 9BB2     		uxth	r3, r3
 9687 0010 03F00103 		and	r3, r3, #1
 9688 0014 002B     		cmp	r3, #0
 9689 0016 03D0     		beq	.L495
2438:bluetooth_rxtx.c **** 			channel = 2440;
 9690              		.loc 1 2438 0
ARM GAS  /tmp/ccTf0kks.s 			page 213


 9691 0018 144B     		ldr	r3, .L500
 9692 001a 40F68812 		movw	r2, #2440
 9693 001e 1A80     		strh	r2, [r3]	@ movhi
 9694              	.L495:
2439:bluetooth_rxtx.c **** 
2440:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
2441:bluetooth_rxtx.c **** 		if (!le.target_set) {
 9695              		.loc 1 2441 0
 9696 0020 134B     		ldr	r3, .L500+4
 9697 0022 DB6B     		ldr	r3, [r3, #60]
 9698 0024 002B     		cmp	r3, #0
 9699 0026 07D1     		bne	.L496
2442:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2443:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 9700              		.loc 1 2443 0
 9701 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2444:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 9702              		.loc 1 2444 0
 9703 002c 114B     		ldr	r3, .L500+8
 9704 002e 124A     		ldr	r2, .L500+12
 9705 0030 1A60     		str	r2, [r3]
2445:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 9706              		.loc 1 2445 0
 9707 0032 0A20     		movs	r0, #10
 9708 0034 FFF7FEFF 		bl	bt_generic_le
 9709              	.L496:
2446:bluetooth_rxtx.c **** 		}
2447:bluetooth_rxtx.c **** 
2448:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2449:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 9710              		.loc 1 2449 0
 9711 0038 104B     		ldr	r3, .L500+16
 9712 003a 1B78     		ldrb	r3, [r3]
 9713 003c DBB2     		uxtb	r3, r3
 9714 003e 0A2B     		cmp	r3, #10
 9715 0040 00D0     		beq	.L497
2450:bluetooth_rxtx.c **** 			break;
 9716              		.loc 1 2450 0
 9717 0042 12E0     		b	.L493
 9718              	.L497:
2451:bluetooth_rxtx.c **** 
2452:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 9719              		.loc 1 2452 0
 9720 0044 0020     		movs	r0, #0
 9721 0046 0A49     		ldr	r1, .L500+4
 9722 0048 0422     		movs	r2, #4
 9723 004a FFF7FEFF 		bl	le_promisc_state
2453:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 9724              		.loc 1 2453 0
 9725 004e 0C4B     		ldr	r3, .L500+20
 9726 0050 0C4A     		ldr	r2, .L500+24
 9727 0052 1A60     		str	r2, [r3]
2454:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 9728              		.loc 1 2454 0
 9729 0054 064B     		ldr	r3, .L500+4
 9730 0056 0022     		movs	r2, #0
 9731 0058 1A61     		str	r2, [r3, #16]
ARM GAS  /tmp/ccTf0kks.s 			page 214


2455:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 9732              		.loc 1 2455 0
 9733 005a 0A20     		movs	r0, #10
 9734 005c FFF7FEFF 		bl	bt_le_sync
 9735              	.L494:
2433:bluetooth_rxtx.c **** 		reset_le_promisc();
 9736              		.loc 1 2433 0
 9737 0060 064B     		ldr	r3, .L500+16
 9738 0062 1B78     		ldrb	r3, [r3]
 9739 0064 DBB2     		uxtb	r3, r3
 9740 0066 0A2B     		cmp	r3, #10
 9741 0068 CDD0     		beq	.L499
 9742              	.L493:
2456:bluetooth_rxtx.c **** 	}
2457:bluetooth_rxtx.c **** }
 9743              		.loc 1 2457 0
 9744 006a 80BD     		pop	{r7, pc}
 9745              	.L501:
 9746              		.align	2
 9747              	.L500:
 9748 006c 00000000 		.word	channel
 9749 0070 00000000 		.word	le
 9750 0074 00000000 		.word	data_cb
 9751 0078 00000000 		.word	cb_le_promisc
 9752 007c 00000000 		.word	requested_mode
 9753 0080 00000000 		.word	packet_cb
 9754 0084 00000000 		.word	promisc_follow_cb
 9755              		.cfi_endproc
 9756              	.LFE43:
 9758              		.section	.rodata
 9759              		.align	2
 9760              	.LC1:
 9761 08dc 00       		.byte	0
 9762 08dd 09       		.byte	9
 9763 08de FF       		.byte	-1
 9764 08df FF       		.byte	-1
 9765 08e0 FF       		.byte	-1
 9766 08e1 FF       		.byte	-1
 9767 08e2 FF       		.byte	-1
 9768 08e3 FF       		.byte	-1
 9769 08e4 02       		.byte	2
 9770 08e5 01       		.byte	1
 9771 08e6 05       		.byte	5
 9772 08e7 FF       		.byte	-1
 9773 08e8 FF       		.byte	-1
 9774 08e9 FF       		.byte	-1
 9775              		.section	.text.bt_slave_le,"ax",%progbits
 9776              		.align	2
 9777              		.global	bt_slave_le
 9778              		.thumb
 9779              		.thumb_func
 9781              	bt_slave_le:
 9782              	.LFB44:
2458:bluetooth_rxtx.c **** 
2459:bluetooth_rxtx.c **** void bt_slave_le() {
 9783              		.loc 1 2459 0
 9784              		.cfi_startproc
ARM GAS  /tmp/ccTf0kks.s 			page 215


 9785              		@ args = 0, pretend = 0, frame = 32
 9786              		@ frame_needed = 1, uses_anonymous_args = 0
 9787 0000 90B5     		push	{r4, r7, lr}
 9788              		.cfi_def_cfa_offset 12
 9789              		.cfi_offset 4, -12
 9790              		.cfi_offset 7, -8
 9791              		.cfi_offset 14, -4
 9792 0002 89B0     		sub	sp, sp, #36
 9793              		.cfi_def_cfa_offset 48
 9794 0004 00AF     		add	r7, sp, #0
 9795              		.cfi_def_cfa_register 7
2460:bluetooth_rxtx.c **** 	u32 calc_crc;
2461:bluetooth_rxtx.c **** 	int i;
2462:bluetooth_rxtx.c **** 
2463:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 9796              		.loc 1 2463 0
 9797 0006 354A     		ldr	r2, .L507
 9798 0008 3B1D     		adds	r3, r7, #4
 9799 000a 1446     		mov	r4, r2
 9800 000c 2068     		ldr	r0, [r4]	@ unaligned
 9801 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 9802 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 9803 0012 07C3     		stmia	r3!, {r0, r1, r2}
 9804 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 9805 0016 1A80     		strh	r2, [r3]	@ unaligned
2464:bluetooth_rxtx.c **** 		// LL header
2465:bluetooth_rxtx.c **** 		0x00, 0x09,
2466:bluetooth_rxtx.c **** 
2467:bluetooth_rxtx.c **** 		// advertising address
2468:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2469:bluetooth_rxtx.c **** 
2470:bluetooth_rxtx.c **** 		// advertising data
2471:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2472:bluetooth_rxtx.c **** 
2473:bluetooth_rxtx.c **** 		// CRC (calc)
2474:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2475:bluetooth_rxtx.c **** 	};
2476:bluetooth_rxtx.c **** 
2477:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 9806              		.loc 1 2477 0
 9807 0018 0B23     		movs	r3, #11
 9808 001a FB76     		strb	r3, [r7, #27]
2478:bluetooth_rxtx.c **** 
2479:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2480:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 9809              		.loc 1 2480 0
 9810 001c 0023     		movs	r3, #0
 9811 001e FB61     		str	r3, [r7, #28]
 9812 0020 0EE0     		b	.L503
 9813              	.L504:
2481:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9814              		.loc 1 2481 0 discriminator 3
 9815 0022 FB69     		ldr	r3, [r7, #28]
 9816 0024 0233     		adds	r3, r3, #2
 9817 0026 FA69     		ldr	r2, [r7, #28]
 9818 0028 C2F10502 		rsb	r2, r2, #5
 9819 002c 2C49     		ldr	r1, .L507+4
ARM GAS  /tmp/ccTf0kks.s 			page 216


 9820 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9821 0030 07F12001 		add	r1, r7, #32
 9822 0034 0B44     		add	r3, r3, r1
 9823 0036 03F81C2C 		strb	r2, [r3, #-28]
2480:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9824              		.loc 1 2480 0 discriminator 3
 9825 003a FB69     		ldr	r3, [r7, #28]
 9826 003c 0133     		adds	r3, r3, #1
 9827 003e FB61     		str	r3, [r7, #28]
 9828              	.L503:
2480:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9829              		.loc 1 2480 0 is_stmt 0 discriminator 1
 9830 0040 FB69     		ldr	r3, [r7, #28]
 9831 0042 052B     		cmp	r3, #5
 9832 0044 EDDD     		ble	.L504
2482:bluetooth_rxtx.c **** 
2483:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 9833              		.loc 1 2483 0 is_stmt 1
 9834 0046 274B     		ldr	r3, .L507+8
 9835 0048 D968     		ldr	r1, [r3, #12]
 9836 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9837 004c 3A1D     		adds	r2, r7, #4
 9838 004e 0846     		mov	r0, r1
 9839 0050 1146     		mov	r1, r2
 9840 0052 1A46     		mov	r2, r3
 9841 0054 FFF7FEFF 		bl	btle_calc_crc
 9842 0058 7861     		str	r0, [r7, #20]
2484:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 9843              		.loc 1 2484 0
 9844 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9845 005c 7A69     		ldr	r2, [r7, #20]
 9846 005e D2B2     		uxtb	r2, r2
 9847 0060 07F12001 		add	r1, r7, #32
 9848 0064 0B44     		add	r3, r3, r1
 9849 0066 03F81C2C 		strb	r2, [r3, #-28]
2485:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 9850              		.loc 1 2485 0
 9851 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9852 006c 0133     		adds	r3, r3, #1
 9853 006e 7A69     		ldr	r2, [r7, #20]
 9854 0070 120A     		lsrs	r2, r2, #8
 9855 0072 D2B2     		uxtb	r2, r2
 9856 0074 07F12001 		add	r1, r7, #32
 9857 0078 0B44     		add	r3, r3, r1
 9858 007a 03F81C2C 		strb	r2, [r3, #-28]
2486:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 9859              		.loc 1 2486 0
 9860 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9861 0080 0233     		adds	r3, r3, #2
 9862 0082 7A69     		ldr	r2, [r7, #20]
 9863 0084 120C     		lsrs	r2, r2, #16
 9864 0086 D2B2     		uxtb	r2, r2
 9865 0088 07F12001 		add	r1, r7, #32
 9866 008c 0B44     		add	r3, r3, r1
 9867 008e 03F81C2C 		strb	r2, [r3, #-28]
2487:bluetooth_rxtx.c **** 
2488:bluetooth_rxtx.c **** 	// spam advertising packets
ARM GAS  /tmp/ccTf0kks.s 			page 217


2489:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 9868              		.loc 1 2489 0
 9869 0092 1BE0     		b	.L505
 9870              	.L506:
2490:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9871              		.loc 1 2490 0
 9872 0094 144B     		ldr	r3, .L507+12
 9873 0096 4FF08072 		mov	r2, #16777216
 9874 009a 1A60     		str	r2, [r3]
2491:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 9875              		.loc 1 2491 0
 9876 009c 124B     		ldr	r3, .L507+12
 9877 009e 4FF08062 		mov	r2, #67108864
 9878 00a2 1A60     		str	r2, [r3]
2492:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 9879              		.loc 1 2492 0
 9880 00a4 FB7E     		ldrb	r3, [r7, #27]
 9881 00a6 0333     		adds	r3, r3, #3
 9882 00a8 DAB2     		uxtb	r2, r3
 9883 00aa 3B1D     		adds	r3, r7, #4
 9884 00ac 0F48     		ldr	r0, .L507+16
 9885 00ae 1146     		mov	r1, r2
 9886 00b0 1A46     		mov	r2, r3
 9887 00b2 FFF7FEFF 		bl	le_transmit
2493:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 9888              		.loc 1 2493 0
 9889 00b6 0E4B     		ldr	r3, .L507+20
 9890 00b8 4FF08072 		mov	r2, #16777216
 9891 00bc 1A60     		str	r2, [r3]
2494:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 9892              		.loc 1 2494 0
 9893 00be 0C4B     		ldr	r3, .L507+20
 9894 00c0 4FF08062 		mov	r2, #67108864
 9895 00c4 1A60     		str	r2, [r3]
2495:bluetooth_rxtx.c **** 		msleep(100);
 9896              		.loc 1 2495 0
 9897 00c6 6420     		movs	r0, #100
 9898 00c8 FFF7FEFF 		bl	msleep
 9899              	.L505:
2489:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9900              		.loc 1 2489 0
 9901 00cc 094B     		ldr	r3, .L507+24
 9902 00ce 1B78     		ldrb	r3, [r3]
 9903 00d0 DBB2     		uxtb	r3, r3
 9904 00d2 0C2B     		cmp	r3, #12
 9905 00d4 DED0     		beq	.L506
2496:bluetooth_rxtx.c **** 	}
2497:bluetooth_rxtx.c **** }
 9906              		.loc 1 2497 0
 9907 00d6 2437     		adds	r7, r7, #36
 9908              		.cfi_def_cfa_offset 12
 9909 00d8 BD46     		mov	sp, r7
 9910              		.cfi_def_cfa_register 13
 9911              		@ sp needed
 9912 00da 90BD     		pop	{r4, r7, pc}
 9913              	.L508:
 9914              		.align	2
ARM GAS  /tmp/ccTf0kks.s 			page 218


 9915              	.L507:
 9916 00dc DC080000 		.word	.LC1
 9917 00e0 00000000 		.word	slave_mac_address
 9918 00e4 00000000 		.word	le
 9919 00e8 80E100E0 		.word	-536813184
 9920 00ec D6BE898E 		.word	-1903575338
 9921 00f0 00E100E0 		.word	-536813312
 9922 00f4 00000000 		.word	requested_mode
 9923              		.cfi_endproc
 9924              	.LFE44:
 9926              		.section	.text.specan,"ax",%progbits
 9927              		.align	2
 9928              		.global	specan
 9929              		.thumb
 9930              		.thumb_func
 9932              	specan:
 9933              	.LFB45:
2498:bluetooth_rxtx.c **** 
2499:bluetooth_rxtx.c **** /* spectrum analysis */
2500:bluetooth_rxtx.c **** void specan()
2501:bluetooth_rxtx.c **** {
 9934              		.loc 1 2501 0
 9935              		.cfi_startproc
 9936              		@ args = 0, pretend = 0, frame = 64
 9937              		@ frame_needed = 1, uses_anonymous_args = 0
 9938 0000 90B5     		push	{r4, r7, lr}
 9939              		.cfi_def_cfa_offset 12
 9940              		.cfi_offset 4, -12
 9941              		.cfi_offset 7, -8
 9942              		.cfi_offset 14, -4
 9943 0002 91B0     		sub	sp, sp, #68
 9944              		.cfi_def_cfa_offset 80
 9945 0004 00AF     		add	r7, sp, #0
 9946              		.cfi_def_cfa_register 7
2502:bluetooth_rxtx.c **** 	u8 epstat;
2503:bluetooth_rxtx.c **** 	u16 f;
2504:bluetooth_rxtx.c **** 	u8 i = 0;
 9947              		.loc 1 2504 0
 9948 0006 0023     		movs	r3, #0
 9949 0008 87F83D30 		strb	r3, [r7, #61]
2505:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2506:bluetooth_rxtx.c **** 
2507:bluetooth_rxtx.c **** 	RXLED_SET;
 9950              		.loc 1 2507 0
 9951 000c 5A4B     		ldr	r3, .L520
 9952 000e 1022     		movs	r2, #16
 9953 0010 1A60     		str	r2, [r3]
2508:bluetooth_rxtx.c **** 
2509:bluetooth_rxtx.c **** 	queue_init();
 9954              		.loc 1 2509 0
 9955 0012 FFF7FEFF 		bl	queue_init
2510:bluetooth_rxtx.c **** 
2511:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2512:bluetooth_rxtx.c **** 	PAEN_SET;
 9956              		.loc 1 2512 0
 9957 0016 594B     		ldr	r3, .L520+4
 9958 0018 8022     		movs	r2, #128
ARM GAS  /tmp/ccTf0kks.s 			page 219


 9959 001a 1A60     		str	r2, [r3]
2513:bluetooth_rxtx.c **** 	//HGM_SET;
2514:bluetooth_rxtx.c **** #endif
2515:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9960              		.loc 1 2515 0
 9961 001c 1220     		movs	r0, #18
 9962 001e 42F62231 		movw	r1, #11042
 9963 0022 FFF7FEFF 		bl	cc2400_set
2516:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 9964              		.loc 1 2516 0
 9965 0026 1420     		movs	r0, #20
 9966 0028 41F24B31 		movw	r1, #4939
 9967 002c FFF7FEFF 		bl	cc2400_set
2517:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 9968              		.loc 1 2517 0
 9969 0030 2020     		movs	r0, #32
 9970 0032 40F20111 		movw	r1, #257
 9971 0036 FFF7FEFF 		bl	cc2400_set
2518:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 9972              		.loc 1 2518 0
 9973 003a 0320     		movs	r0, #3
 9974 003c 2921     		movs	r1, #41
 9975 003e FFF7FEFF 		bl	cc2400_set
2519:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2520:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9976              		.loc 1 2520 0
 9977 0042 00BF     		nop
 9978              	.L510:
 9979              		.loc 1 2520 0 is_stmt 0 discriminator 1
 9980 0044 FFF7FEFF 		bl	cc2400_status
 9981 0048 0346     		mov	r3, r0
 9982 004a 03F04003 		and	r3, r3, #64
 9983 004e 002B     		cmp	r3, #0
 9984 0050 F8D0     		beq	.L510
2521:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9985              		.loc 1 2521 0 is_stmt 1
 9986 0052 00BF     		nop
 9987              	.L511:
 9988              		.loc 1 2521 0 is_stmt 0 discriminator 1
 9989 0054 FFF7FEFF 		bl	cc2400_status
 9990 0058 0346     		mov	r3, r0
 9991 005a 03F00403 		and	r3, r3, #4
 9992 005e 002B     		cmp	r3, #0
 9993 0060 F8D1     		bne	.L511
2522:bluetooth_rxtx.c **** 
2523:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 9994              		.loc 1 2523 0 is_stmt 1
 9995 0062 7AE0     		b	.L512
 9996              	.L519:
2524:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9997              		.loc 1 2524 0
 9998 0064 464B     		ldr	r3, .L520+8
 9999 0066 1B88     		ldrh	r3, [r3]	@ movhi
 10000 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 10001 006a 6FE0     		b	.L513
 10002              	.L518:
 10003              	.LBB20:
ARM GAS  /tmp/ccTf0kks.s 			page 220


2525:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10004              		.loc 1 2525 0
 10005 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 10006 006e 013B     		subs	r3, r3, #1
 10007 0070 9BB2     		uxth	r3, r3
 10008 0072 0220     		movs	r0, #2
 10009 0074 1946     		mov	r1, r3
 10010 0076 FFF7FEFF 		bl	cc2400_set
2526:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 10011              		.loc 1 2526 0
 10012 007a 6120     		movs	r0, #97
 10013 007c FFF7FEFF 		bl	cc2400_strobe
2527:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 10014              		.loc 1 2527 0
 10015 0080 00BF     		nop
 10016              	.L514:
 10017              		.loc 1 2527 0 is_stmt 0 discriminator 1
 10018 0082 FFF7FEFF 		bl	cc2400_status
 10019 0086 0346     		mov	r3, r0
 10020 0088 03F00403 		and	r3, r3, #4
 10021 008c 002B     		cmp	r3, #0
 10022 008e F8D0     		beq	.L514
2528:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 10023              		.loc 1 2528 0 is_stmt 1
 10024 0090 6220     		movs	r0, #98
 10025 0092 FFF7FEFF 		bl	cc2400_strobe
2529:bluetooth_rxtx.c **** 
2530:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2531:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 10026              		.loc 1 2531 0
 10027 0096 4FF4FA73 		mov	r3, #500
 10028 009a 7B60     		str	r3, [r7, #4]
 10029 009c 00BF     		nop
 10030              	.L515:
 10031              		.loc 1 2531 0 is_stmt 0 discriminator 2
 10032 009e 7B68     		ldr	r3, [r7, #4]
 10033 00a0 013B     		subs	r3, r3, #1
 10034 00a2 7B60     		str	r3, [r7, #4]
 10035 00a4 002B     		cmp	r3, #0
 10036 00a6 FAD1     		bne	.L515
2532:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 10037              		.loc 1 2532 0 is_stmt 1
 10038 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10039 00ac 1346     		mov	r3, r2
 10040 00ae 5B00     		lsls	r3, r3, #1
 10041 00b0 1344     		add	r3, r3, r2
 10042 00b2 FA8F     		ldrh	r2, [r7, #62]
 10043 00b4 120A     		lsrs	r2, r2, #8
 10044 00b6 92B2     		uxth	r2, r2
 10045 00b8 D2B2     		uxtb	r2, r2
 10046 00ba 07F14001 		add	r1, r7, #64
 10047 00be 0B44     		add	r3, r3, r1
 10048 00c0 03F8382C 		strb	r2, [r3, #-56]
2533:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 10049              		.loc 1 2533 0
 10050 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10051 00c8 1346     		mov	r3, r2
ARM GAS  /tmp/ccTf0kks.s 			page 221


 10052 00ca 5B00     		lsls	r3, r3, #1
 10053 00cc 1344     		add	r3, r3, r2
 10054 00ce 0133     		adds	r3, r3, #1
 10055 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 10056 00d2 D2B2     		uxtb	r2, r2
 10057 00d4 07F14001 		add	r1, r7, #64
 10058 00d8 0B44     		add	r3, r3, r1
 10059 00da 03F8382C 		strb	r2, [r3, #-56]
2534:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 10060              		.loc 1 2534 0
 10061 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 10062 00e2 1346     		mov	r3, r2
 10063 00e4 5B00     		lsls	r3, r3, #1
 10064 00e6 1344     		add	r3, r3, r2
 10065 00e8 9C1C     		adds	r4, r3, #2
 10066 00ea 0620     		movs	r0, #6
 10067 00ec FFF7FEFF 		bl	cc2400_get
 10068 00f0 0346     		mov	r3, r0
 10069 00f2 1B0A     		lsrs	r3, r3, #8
 10070 00f4 9BB2     		uxth	r3, r3
 10071 00f6 DAB2     		uxtb	r2, r3
 10072 00f8 07F14003 		add	r3, r7, #64
 10073 00fc 2344     		add	r3, r3, r4
 10074 00fe 03F8382C 		strb	r2, [r3, #-56]
2535:bluetooth_rxtx.c **** 			i++;
 10075              		.loc 1 2535 0
 10076 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10077 0106 0133     		adds	r3, r3, #1
 10078 0108 87F83D30 		strb	r3, [r7, #61]
2536:bluetooth_rxtx.c **** 			if (i == 16) {
 10079              		.loc 1 2536 0
 10080 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 10081 0110 102B     		cmp	r3, #16
 10082 0112 0DD1     		bne	.L516
2537:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 10083              		.loc 1 2537 0
 10084 0114 07F10803 		add	r3, r7, #8
 10085 0118 0420     		movs	r0, #4
 10086 011a 1946     		mov	r1, r3
 10087 011c FFF7FEFF 		bl	enqueue
2538:bluetooth_rxtx.c **** 				i = 0;
 10088              		.loc 1 2538 0
 10089 0120 0023     		movs	r3, #0
 10090 0122 87F83D30 		strb	r3, [r7, #61]
2539:bluetooth_rxtx.c **** 
2540:bluetooth_rxtx.c **** 				handle_usb(clkn);
 10091              		.loc 1 2540 0
 10092 0126 174B     		ldr	r3, .L520+12
 10093 0128 1B68     		ldr	r3, [r3]
 10094 012a 1846     		mov	r0, r3
 10095 012c FFF7FEFF 		bl	handle_usb
 10096              	.L516:
2541:bluetooth_rxtx.c **** 			}
2542:bluetooth_rxtx.c **** 
2543:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 10097              		.loc 1 2543 0
 10098 0130 6420     		movs	r0, #100
ARM GAS  /tmp/ccTf0kks.s 			page 222


 10099 0132 FFF7FEFF 		bl	cc2400_strobe
2544:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 10100              		.loc 1 2544 0
 10101 0136 00BF     		nop
 10102              	.L517:
 10103              		.loc 1 2544 0 is_stmt 0 discriminator 1
 10104 0138 FFF7FEFF 		bl	cc2400_status
 10105 013c 0346     		mov	r3, r0
 10106 013e 03F00403 		and	r3, r3, #4
 10107 0142 002B     		cmp	r3, #0
 10108 0144 F8D1     		bne	.L517
 10109              	.LBE20:
2524:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10110              		.loc 1 2524 0 is_stmt 1 discriminator 2
 10111 0146 FB8F     		ldrh	r3, [r7, #62]
 10112 0148 0133     		adds	r3, r3, #1
 10113 014a FB87     		strh	r3, [r7, #62]	@ movhi
 10114              	.L513:
2524:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 10115              		.loc 1 2524 0 is_stmt 0 discriminator 1
 10116 014c FA8F     		ldrh	r2, [r7, #62]
 10117 014e 0E4B     		ldr	r3, .L520+16
 10118 0150 1B88     		ldrh	r3, [r3]	@ movhi
 10119 0152 9BB2     		uxth	r3, r3
 10120 0154 0133     		adds	r3, r3, #1
 10121 0156 9A42     		cmp	r2, r3
 10122 0158 88DB     		blt	.L518
 10123              	.L512:
2523:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 10124              		.loc 1 2523 0 is_stmt 1
 10125 015a 0C4B     		ldr	r3, .L520+20
 10126 015c 1B78     		ldrb	r3, [r3]
 10127 015e DBB2     		uxtb	r3, r3
 10128 0160 042B     		cmp	r3, #4
 10129 0162 3FF47FAF 		beq	.L519
2545:bluetooth_rxtx.c **** 		}
2546:bluetooth_rxtx.c **** 	}
2547:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10130              		.loc 1 2547 0
 10131 0166 0A4B     		ldr	r3, .L520+24
 10132 0168 0022     		movs	r2, #0
 10133 016a 1A70     		strb	r2, [r3]
2548:bluetooth_rxtx.c **** 	RXLED_CLR;
 10134              		.loc 1 2548 0
 10135 016c 094B     		ldr	r3, .L520+28
 10136 016e 1022     		movs	r2, #16
 10137 0170 1A60     		str	r2, [r3]
2549:bluetooth_rxtx.c **** }
 10138              		.loc 1 2549 0
 10139 0172 4437     		adds	r7, r7, #68
 10140              		.cfi_def_cfa_offset 12
 10141 0174 BD46     		mov	sp, r7
 10142              		.cfi_def_cfa_register 13
 10143              		@ sp needed
 10144 0176 90BD     		pop	{r4, r7, pc}
 10145              	.L521:
 10146              		.align	2
ARM GAS  /tmp/ccTf0kks.s 			page 223


 10147              	.L520:
 10148 0178 38C00920 		.word	537509944
 10149 017c 58C00920 		.word	537509976
 10150 0180 00000000 		.word	low_freq
 10151 0184 00000000 		.word	clkn
 10152 0188 00000000 		.word	high_freq
 10153 018c 00000000 		.word	requested_mode
 10154 0190 00000000 		.word	mode
 10155 0194 3CC00920 		.word	537509948
 10156              		.cfi_endproc
 10157              	.LFE45:
 10159              		.section	.rodata
 10160 08ea 0000     		.align	2
 10161              	.LC2:
 10162 08ec 6C09     		.short	2412
 10163 08ee 8509     		.short	2437
 10164 08f0 9E09     		.short	2462
 10165              		.section	.text.led_specan,"ax",%progbits
 10166              		.align	2
 10167              		.global	led_specan
 10168              		.thumb
 10169              		.thumb_func
 10171              	led_specan:
 10172              	.LFB46:
2550:bluetooth_rxtx.c **** 
2551:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2552:bluetooth_rxtx.c **** void led_specan()
2553:bluetooth_rxtx.c **** {
 10173              		.loc 1 2553 0
 10174              		.cfi_startproc
 10175              		@ args = 0, pretend = 0, frame = 16
 10176              		@ frame_needed = 1, uses_anonymous_args = 0
 10177 0000 80B5     		push	{r7, lr}
 10178              		.cfi_def_cfa_offset 8
 10179              		.cfi_offset 7, -8
 10180              		.cfi_offset 14, -4
 10181 0002 84B0     		sub	sp, sp, #16
 10182              		.cfi_def_cfa_offset 24
 10183 0004 00AF     		add	r7, sp, #0
 10184              		.cfi_def_cfa_register 7
2554:bluetooth_rxtx.c **** 	int8_t lvl;
2555:bluetooth_rxtx.c **** 	u8 i = 0;
 10185              		.loc 1 2555 0
 10186 0006 0023     		movs	r3, #0
 10187 0008 FB73     		strb	r3, [r7, #15]
2556:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 10188              		.loc 1 2556 0
 10189 000a 5B4A     		ldr	r2, .L539
 10190 000c 07F10803 		add	r3, r7, #8
 10191 0010 1068     		ldr	r0, [r2]	@ unaligned
 10192 0012 1860     		str	r0, [r3]	@ unaligned
 10193 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 10194 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2557:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2558:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2559:bluetooth_rxtx.c **** 
2560:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
ARM GAS  /tmp/ccTf0kks.s 			page 224


2561:bluetooth_rxtx.c **** 	PAEN_SET;
 10195              		.loc 1 2561 0
 10196 0018 584B     		ldr	r3, .L539+4
 10197 001a 8022     		movs	r2, #128
 10198 001c 1A60     		str	r2, [r3]
2562:bluetooth_rxtx.c **** 	//HGM_SET;
2563:bluetooth_rxtx.c **** #endif
2564:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10199              		.loc 1 2564 0
 10200 001e 1220     		movs	r0, #18
 10201 0020 42F62231 		movw	r1, #11042
 10202 0024 FFF7FEFF 		bl	cc2400_set
2565:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10203              		.loc 1 2565 0
 10204 0028 1420     		movs	r0, #20
 10205 002a 41F24B31 		movw	r1, #4939
 10206 002e FFF7FEFF 		bl	cc2400_set
2566:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10207              		.loc 1 2566 0
 10208 0032 2020     		movs	r0, #32
 10209 0034 40F20111 		movw	r1, #257
 10210 0038 FFF7FEFF 		bl	cc2400_set
2567:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10211              		.loc 1 2567 0
 10212 003c 0320     		movs	r0, #3
 10213 003e 2921     		movs	r1, #41
 10214 0040 FFF7FEFF 		bl	cc2400_set
2568:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 10215              		.loc 1 2568 0
 10216 0044 0620     		movs	r0, #6
 10217 0046 F121     		movs	r1, #241
 10218 0048 FFF7FEFF 		bl	cc2400_set
2569:bluetooth_rxtx.c **** 
2570:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10219              		.loc 1 2570 0
 10220 004c 00BF     		nop
 10221              	.L523:
 10222              		.loc 1 2570 0 is_stmt 0 discriminator 1
 10223 004e FFF7FEFF 		bl	cc2400_status
 10224 0052 0346     		mov	r3, r0
 10225 0054 03F04003 		and	r3, r3, #64
 10226 0058 002B     		cmp	r3, #0
 10227 005a F8D0     		beq	.L523
2571:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10228              		.loc 1 2571 0 is_stmt 1
 10229 005c 00BF     		nop
 10230              	.L524:
 10231              		.loc 1 2571 0 is_stmt 0 discriminator 1
 10232 005e FFF7FEFF 		bl	cc2400_status
 10233 0062 0346     		mov	r3, r0
 10234 0064 03F00403 		and	r3, r3, #4
 10235 0068 002B     		cmp	r3, #0
 10236 006a F8D1     		bne	.L524
2572:bluetooth_rxtx.c **** 
2573:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 10237              		.loc 1 2573 0 is_stmt 1
 10238 006c 79E0     		b	.L525
ARM GAS  /tmp/ccTf0kks.s 			page 225


 10239              	.L538:
 10240              	.LBB21:
2574:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10241              		.loc 1 2574 0
 10242 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10243 0070 5B00     		lsls	r3, r3, #1
 10244 0072 07F11002 		add	r2, r7, #16
 10245 0076 1344     		add	r3, r3, r2
 10246 0078 33F8083C 		ldrh	r3, [r3, #-8]
 10247 007c 013B     		subs	r3, r3, #1
 10248 007e 9BB2     		uxth	r3, r3
 10249 0080 0220     		movs	r0, #2
 10250 0082 1946     		mov	r1, r3
 10251 0084 FFF7FEFF 		bl	cc2400_set
2575:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 10252              		.loc 1 2575 0
 10253 0088 6120     		movs	r0, #97
 10254 008a FFF7FEFF 		bl	cc2400_strobe
2576:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 10255              		.loc 1 2576 0
 10256 008e 00BF     		nop
 10257              	.L526:
 10258              		.loc 1 2576 0 is_stmt 0 discriminator 1
 10259 0090 FFF7FEFF 		bl	cc2400_status
 10260 0094 0346     		mov	r3, r0
 10261 0096 03F00403 		and	r3, r3, #4
 10262 009a 002B     		cmp	r3, #0
 10263 009c F8D0     		beq	.L526
2577:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 10264              		.loc 1 2577 0 is_stmt 1
 10265 009e 6220     		movs	r0, #98
 10266 00a0 FFF7FEFF 		bl	cc2400_strobe
2578:bluetooth_rxtx.c **** 
2579:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2580:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 10267              		.loc 1 2580 0
 10268 00a4 4FF4FA73 		mov	r3, #500
 10269 00a8 7B60     		str	r3, [r7, #4]
 10270 00aa 00BF     		nop
 10271              	.L527:
 10272              		.loc 1 2580 0 is_stmt 0 discriminator 2
 10273 00ac 7B68     		ldr	r3, [r7, #4]
 10274 00ae 013B     		subs	r3, r3, #1
 10275 00b0 7B60     		str	r3, [r7, #4]
 10276 00b2 002B     		cmp	r3, #0
 10277 00b4 FAD1     		bne	.L527
2581:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 10278              		.loc 1 2581 0 is_stmt 1
 10279 00b6 0620     		movs	r0, #6
 10280 00b8 FFF7FEFF 		bl	cc2400_get
 10281 00bc 0346     		mov	r3, r0
 10282 00be 1B0A     		lsrs	r3, r3, #8
 10283 00c0 9BB2     		uxth	r3, r3
 10284 00c2 BB73     		strb	r3, [r7, #14]
2582:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 10285              		.loc 1 2582 0
 10286 00c4 2E4B     		ldr	r3, .L539+8
ARM GAS  /tmp/ccTf0kks.s 			page 226


 10287 00c6 1B78     		ldrb	r3, [r3]
 10288 00c8 DBB2     		uxtb	r3, r3
 10289 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 10290 00ce 5BB2     		sxtb	r3, r3
 10291 00d0 9A42     		cmp	r2, r3
 10292 00d2 15DD     		ble	.L528
2583:bluetooth_rxtx.c ****             switch (i) {
 10293              		.loc 1 2583 0
 10294 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10295 00d6 012B     		cmp	r3, #1
 10296 00d8 09D0     		beq	.L530
 10297 00da 022B     		cmp	r3, #2
 10298 00dc 0BD0     		beq	.L531
 10299 00de 002B     		cmp	r3, #0
 10300 00e0 00D0     		beq	.L532
 10301 00e2 21E0     		b	.L533
 10302              	.L532:
2584:bluetooth_rxtx.c ****                 case 0:
2585:bluetooth_rxtx.c ****                     TXLED_SET;
 10303              		.loc 1 2585 0
 10304 00e4 274B     		ldr	r3, .L539+12
 10305 00e6 4FF48072 		mov	r2, #256
 10306 00ea 1A60     		str	r2, [r3]
2586:bluetooth_rxtx.c ****                     break;
 10307              		.loc 1 2586 0
 10308 00ec 07E0     		b	.L529
 10309              	.L530:
2587:bluetooth_rxtx.c ****                 case 1:
2588:bluetooth_rxtx.c ****                     RXLED_SET;
 10310              		.loc 1 2588 0
 10311 00ee 254B     		ldr	r3, .L539+12
 10312 00f0 1022     		movs	r2, #16
 10313 00f2 1A60     		str	r2, [r3]
2589:bluetooth_rxtx.c ****                     break;
 10314              		.loc 1 2589 0
 10315 00f4 03E0     		b	.L529
 10316              	.L531:
2590:bluetooth_rxtx.c ****                 case 2:
2591:bluetooth_rxtx.c ****                     USRLED_SET;
 10317              		.loc 1 2591 0
 10318 00f6 234B     		ldr	r3, .L539+12
 10319 00f8 0222     		movs	r2, #2
 10320 00fa 1A60     		str	r2, [r3]
2592:bluetooth_rxtx.c ****                     break;
 10321              		.loc 1 2592 0
 10322 00fc 00BF     		nop
 10323              	.L529:
 10324 00fe 13E0     		b	.L533
 10325              	.L528:
2593:bluetooth_rxtx.c ****             }
2594:bluetooth_rxtx.c ****         }
2595:bluetooth_rxtx.c ****         else {
2596:bluetooth_rxtx.c ****             switch (i) {
 10326              		.loc 1 2596 0
 10327 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10328 0102 012B     		cmp	r3, #1
 10329 0104 08D0     		beq	.L534
ARM GAS  /tmp/ccTf0kks.s 			page 227


 10330 0106 022B     		cmp	r3, #2
 10331 0108 0AD0     		beq	.L535
 10332 010a 002B     		cmp	r3, #0
 10333 010c 0CD1     		bne	.L533
2597:bluetooth_rxtx.c ****                 case 0:
2598:bluetooth_rxtx.c ****                     TXLED_CLR;
 10334              		.loc 1 2598 0
 10335 010e 1E4B     		ldr	r3, .L539+16
 10336 0110 4FF48072 		mov	r2, #256
 10337 0114 1A60     		str	r2, [r3]
2599:bluetooth_rxtx.c ****                     break;
 10338              		.loc 1 2599 0
 10339 0116 07E0     		b	.L533
 10340              	.L534:
2600:bluetooth_rxtx.c ****                 case 1:
2601:bluetooth_rxtx.c ****                     RXLED_CLR;
 10341              		.loc 1 2601 0
 10342 0118 1B4B     		ldr	r3, .L539+16
 10343 011a 1022     		movs	r2, #16
 10344 011c 1A60     		str	r2, [r3]
2602:bluetooth_rxtx.c ****                     break;
 10345              		.loc 1 2602 0
 10346 011e 03E0     		b	.L533
 10347              	.L535:
2603:bluetooth_rxtx.c ****                 case 2:
2604:bluetooth_rxtx.c ****                     USRLED_CLR;
 10348              		.loc 1 2604 0
 10349 0120 194B     		ldr	r3, .L539+16
 10350 0122 0222     		movs	r2, #2
 10351 0124 1A60     		str	r2, [r3]
2605:bluetooth_rxtx.c ****                     break;
 10352              		.loc 1 2605 0
 10353 0126 00BF     		nop
 10354              	.L533:
2606:bluetooth_rxtx.c ****             }
2607:bluetooth_rxtx.c ****         }
2608:bluetooth_rxtx.c **** 
2609:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 10355              		.loc 1 2609 0
 10356 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10357 012a 5A1C     		adds	r2, r3, #1
 10358 012c 174B     		ldr	r3, .L539+20
 10359 012e 83FB0231 		smull	r3, r1, r3, r2
 10360 0132 D317     		asrs	r3, r2, #31
 10361 0134 C91A     		subs	r1, r1, r3
 10362 0136 0B46     		mov	r3, r1
 10363 0138 5B00     		lsls	r3, r3, #1
 10364 013a 0B44     		add	r3, r3, r1
 10365 013c D11A     		subs	r1, r2, r3
 10366 013e 0B46     		mov	r3, r1
 10367 0140 FB73     		strb	r3, [r7, #15]
2610:bluetooth_rxtx.c **** 
2611:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10368              		.loc 1 2611 0
 10369 0142 134B     		ldr	r3, .L539+24
 10370 0144 1B68     		ldr	r3, [r3]
 10371 0146 1846     		mov	r0, r3
ARM GAS  /tmp/ccTf0kks.s 			page 228


 10372 0148 FFF7FEFF 		bl	handle_usb
2612:bluetooth_rxtx.c ****         //wait(1);
2613:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 10373              		.loc 1 2613 0
 10374 014c 6420     		movs	r0, #100
 10375 014e FFF7FEFF 		bl	cc2400_strobe
2614:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 10376              		.loc 1 2614 0
 10377 0152 00BF     		nop
 10378              	.L537:
 10379              		.loc 1 2614 0 is_stmt 0 discriminator 1
 10380 0154 FFF7FEFF 		bl	cc2400_status
 10381 0158 0346     		mov	r3, r0
 10382 015a 03F00403 		and	r3, r3, #4
 10383 015e 002B     		cmp	r3, #0
 10384 0160 F8D1     		bne	.L537
 10385              	.L525:
 10386              	.LBE21:
2573:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10387              		.loc 1 2573 0 is_stmt 1
 10388 0162 0C4B     		ldr	r3, .L539+28
 10389 0164 1B78     		ldrb	r3, [r3]
 10390 0166 DBB2     		uxtb	r3, r3
 10391 0168 072B     		cmp	r3, #7
 10392 016a 80D0     		beq	.L538
2615:bluetooth_rxtx.c **** 	}
2616:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10393              		.loc 1 2616 0
 10394 016c 0A4B     		ldr	r3, .L539+32
 10395 016e 0022     		movs	r2, #0
 10396 0170 1A70     		strb	r2, [r3]
2617:bluetooth_rxtx.c **** }
 10397              		.loc 1 2617 0
 10398 0172 1037     		adds	r7, r7, #16
 10399              		.cfi_def_cfa_offset 8
 10400 0174 BD46     		mov	sp, r7
 10401              		.cfi_def_cfa_register 13
 10402              		@ sp needed
 10403 0176 80BD     		pop	{r7, pc}
 10404              	.L540:
 10405              		.align	2
 10406              	.L539:
 10407 0178 EC080000 		.word	.LC2
 10408 017c 58C00920 		.word	537509976
 10409 0180 00000000 		.word	rssi_threshold
 10410 0184 38C00920 		.word	537509944
 10411 0188 3CC00920 		.word	537509948
 10412 018c 56555555 		.word	1431655766
 10413 0190 00000000 		.word	clkn
 10414 0194 00000000 		.word	requested_mode
 10415 0198 00000000 		.word	mode
 10416              		.cfi_endproc
 10417              	.LFE46:
 10419              		.section	.text.main,"ax",%progbits
 10420              		.align	2
 10421              		.global	main
 10422              		.thumb
ARM GAS  /tmp/ccTf0kks.s 			page 229


 10423              		.thumb_func
 10425              	main:
 10426              	.LFB47:
2618:bluetooth_rxtx.c **** 
2619:bluetooth_rxtx.c **** int main()
2620:bluetooth_rxtx.c **** {
 10427              		.loc 1 2620 0
 10428              		.cfi_startproc
 10429              		@ args = 0, pretend = 0, frame = 0
 10430              		@ frame_needed = 1, uses_anonymous_args = 0
 10431 0000 80B5     		push	{r7, lr}
 10432              		.cfi_def_cfa_offset 8
 10433              		.cfi_offset 7, -8
 10434              		.cfi_offset 14, -4
 10435 0002 00AF     		add	r7, sp, #0
 10436              		.cfi_def_cfa_register 7
2621:bluetooth_rxtx.c **** 	ubertooth_init();
 10437              		.loc 1 2621 0
 10438 0004 FFF7FEFF 		bl	ubertooth_init
2622:bluetooth_rxtx.c **** 	clkn_init();
 10439              		.loc 1 2622 0
 10440 0008 FFF7FEFF 		bl	clkn_init
2623:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 10441              		.loc 1 2623 0
 10442 000c 4248     		ldr	r0, .L561
 10443 000e FFF7FEFF 		bl	ubertooth_usb_init
 10444              	.L559:
2624:bluetooth_rxtx.c **** 
2625:bluetooth_rxtx.c **** 	while (1) {
2626:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10445              		.loc 1 2626 0
 10446 0012 424B     		ldr	r3, .L561+4
 10447 0014 1B68     		ldr	r3, [r3]
 10448 0016 1846     		mov	r0, r3
 10449 0018 FFF7FEFF 		bl	handle_usb
2627:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 10450              		.loc 1 2627 0
 10451 001c 404B     		ldr	r3, .L561+8
 10452 001e 1B78     		ldrb	r3, [r3]
 10453 0020 DAB2     		uxtb	r2, r3
 10454 0022 404B     		ldr	r3, .L561+12
 10455 0024 1B78     		ldrb	r3, [r3]
 10456 0026 DBB2     		uxtb	r3, r3
 10457 0028 9A42     		cmp	r2, r3
 10458 002a 74D0     		beq	.L542
2628:bluetooth_rxtx.c **** 			switch (requested_mode) {
 10459              		.loc 1 2628 0
 10460 002c 3C4B     		ldr	r3, .L561+8
 10461 002e 1B78     		ldrb	r3, [r3]
 10462 0030 DBB2     		uxtb	r3, r3
 10463 0032 0D2B     		cmp	r3, #13
 10464 0034 6ED8     		bhi	.L560
 10465 0036 01A2     		adr	r2, .L545
 10466 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 10467              		.p2align 2
 10468              	.L545:
 10469 003c 0F010000 		.word	.L544+1
ARM GAS  /tmp/ccTf0kks.s 			page 230


 10470 0040 81000000 		.word	.L546+1
 10471 0044 15010000 		.word	.L560+1
 10472 0048 AB000000 		.word	.L547+1
 10473 004c EF000000 		.word	.L548+1
 10474 0050 BB000000 		.word	.L549+1
 10475 0054 E1000000 		.word	.L550+1
 10476 0058 F5000000 		.word	.L551+1
 10477 005c 8D000000 		.word	.L552+1
 10478 0060 99000000 		.word	.L553+1
 10479 0064 9F000000 		.word	.L554+1
 10480 0068 75000000 		.word	.L555+1
 10481 006c A5000000 		.word	.L556+1
 10482 0070 FB000000 		.word	.L557+1
 10483              		.p2align 1
 10484              	.L555:
2629:bluetooth_rxtx.c **** 				 case MODE_RESET:
2630:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2631:bluetooth_rxtx.c **** 					wait(1);
 10485              		.loc 1 2631 0
 10486 0074 0120     		movs	r0, #1
 10487 0076 FFF7FEFF 		bl	wait
2632:bluetooth_rxtx.c **** 					reset();
 10488              		.loc 1 2632 0
 10489 007a FFF7FEFF 		bl	reset
2633:bluetooth_rxtx.c **** 					break;
 10490              		.loc 1 2633 0
 10491 007e 4AE0     		b	.L542
 10492              	.L546:
2634:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2635:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 10493              		.loc 1 2635 0
 10494 0080 284B     		ldr	r3, .L561+12
 10495 0082 0122     		movs	r2, #1
 10496 0084 1A70     		strb	r2, [r3]
2636:bluetooth_rxtx.c **** 					bt_stream_rx();
 10497              		.loc 1 2636 0
 10498 0086 FFF7FEFF 		bl	bt_stream_rx
2637:bluetooth_rxtx.c **** 					break;
 10499              		.loc 1 2637 0
 10500 008a 44E0     		b	.L542
 10501              	.L552:
2638:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2639:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 10502              		.loc 1 2639 0
 10503 008c 254B     		ldr	r3, .L561+12
 10504 008e 0822     		movs	r2, #8
 10505 0090 1A70     		strb	r2, [r3]
2640:bluetooth_rxtx.c **** 					bt_stream_rx();
 10506              		.loc 1 2640 0
 10507 0092 FFF7FEFF 		bl	bt_stream_rx
2641:bluetooth_rxtx.c **** 					break;
 10508              		.loc 1 2641 0
 10509 0096 3EE0     		b	.L542
 10510              	.L553:
2642:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2643:bluetooth_rxtx.c **** 					bt_follow_le();
 10511              		.loc 1 2643 0
ARM GAS  /tmp/ccTf0kks.s 			page 231


 10512 0098 FFF7FEFF 		bl	bt_follow_le
2644:bluetooth_rxtx.c **** 					break;
 10513              		.loc 1 2644 0
 10514 009c 3BE0     		b	.L542
 10515              	.L554:
2645:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2646:bluetooth_rxtx.c **** 					bt_promisc_le();
 10516              		.loc 1 2646 0
 10517 009e FFF7FEFF 		bl	bt_promisc_le
2647:bluetooth_rxtx.c **** 					break;
 10518              		.loc 1 2647 0
 10519 00a2 38E0     		b	.L542
 10520              	.L556:
2648:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2649:bluetooth_rxtx.c **** 					bt_slave_le();
 10521              		.loc 1 2649 0
 10522 00a4 FFF7FEFF 		bl	bt_slave_le
2650:bluetooth_rxtx.c **** 					break;
 10523              		.loc 1 2650 0
 10524 00a8 35E0     		b	.L542
 10525              	.L547:
2651:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2652:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 10526              		.loc 1 2652 0
 10527 00aa 1E4B     		ldr	r3, .L561+12
 10528 00ac 0322     		movs	r2, #3
 10529 00ae 1A70     		strb	r2, [r3]
2653:bluetooth_rxtx.c **** 					cc2400_txtest(&modulation, &channel);
 10530              		.loc 1 2653 0
 10531 00b0 1D48     		ldr	r0, .L561+16
 10532 00b2 1E49     		ldr	r1, .L561+20
 10533 00b4 FFF7FEFF 		bl	cc2400_txtest
2654:bluetooth_rxtx.c **** 					break;
 10534              		.loc 1 2654 0
 10535 00b8 2DE0     		b	.L542
 10536              	.L549:
2655:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2656:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 10537              		.loc 1 2656 0
 10538 00ba 1A4B     		ldr	r3, .L561+12
 10539 00bc 0522     		movs	r2, #5
 10540 00be 1A70     		strb	r2, [r3]
2657:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 10541              		.loc 1 2657 0
 10542 00c0 1A48     		ldr	r0, .L561+20
 10543 00c2 FFF7FEFF 		bl	cc2400_rangetest
2658:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 10544              		.loc 1 2658 0
 10545 00c6 174B     		ldr	r3, .L561+12
 10546 00c8 0022     		movs	r2, #0
 10547 00ca 1A70     		strb	r2, [r3]
2659:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 10548              		.loc 1 2659 0
 10549 00cc 144B     		ldr	r3, .L561+8
 10550 00ce 1B78     		ldrb	r3, [r3]
 10551 00d0 DBB2     		uxtb	r3, r3
 10552 00d2 052B     		cmp	r3, #5
ARM GAS  /tmp/ccTf0kks.s 			page 232


 10553 00d4 03D1     		bne	.L558
2660:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 10554              		.loc 1 2660 0
 10555 00d6 124B     		ldr	r3, .L561+8
 10556 00d8 0022     		movs	r2, #0
 10557 00da 1A70     		strb	r2, [r3]
2661:bluetooth_rxtx.c **** 					break;
 10558              		.loc 1 2661 0
 10559 00dc 1BE0     		b	.L542
 10560              	.L558:
 10561 00de 1AE0     		b	.L542
 10562              	.L550:
2662:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2663:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 10563              		.loc 1 2663 0
 10564 00e0 104B     		ldr	r3, .L561+12
 10565 00e2 0622     		movs	r2, #6
 10566 00e4 1A70     		strb	r2, [r3]
2664:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 10567              		.loc 1 2664 0
 10568 00e6 1148     		ldr	r0, .L561+20
 10569 00e8 FFF7FEFF 		bl	cc2400_repeater
2665:bluetooth_rxtx.c **** 					break;
 10570              		.loc 1 2665 0
 10571 00ec 13E0     		b	.L542
 10572              	.L548:
2666:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2667:bluetooth_rxtx.c **** 					specan();
 10573              		.loc 1 2667 0
 10574 00ee FFF7FEFF 		bl	specan
2668:bluetooth_rxtx.c **** 					break;
 10575              		.loc 1 2668 0
 10576 00f2 10E0     		b	.L542
 10577              	.L551:
2669:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2670:bluetooth_rxtx.c **** 					led_specan();
 10578              		.loc 1 2670 0
 10579 00f4 FFF7FEFF 		bl	led_specan
2671:bluetooth_rxtx.c **** 					break;
 10580              		.loc 1 2671 0
 10581 00f8 0DE0     		b	.L542
 10582              	.L557:
2672:bluetooth_rxtx.c **** 				case MODE_EGO:
2673:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 10583              		.loc 1 2673 0
 10584 00fa 0A4B     		ldr	r3, .L561+12
 10585 00fc 0D22     		movs	r2, #13
 10586 00fe 1A70     		strb	r2, [r3]
2674:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 10587              		.loc 1 2674 0
 10588 0100 0B4B     		ldr	r3, .L561+24
 10589 0102 1B78     		ldrb	r3, [r3]
 10590 0104 DBB2     		uxtb	r3, r3
 10591 0106 1846     		mov	r0, r3
 10592 0108 FFF7FEFF 		bl	ego_main
2675:bluetooth_rxtx.c **** 					break;
 10593              		.loc 1 2675 0
ARM GAS  /tmp/ccTf0kks.s 			page 233


 10594 010c 03E0     		b	.L542
 10595              	.L544:
2676:bluetooth_rxtx.c **** 				case MODE_IDLE:
2677:bluetooth_rxtx.c **** 					cc2400_idle();
 10596              		.loc 1 2677 0
 10597 010e FFF7FEFF 		bl	cc2400_idle
2678:bluetooth_rxtx.c **** 					break;
 10598              		.loc 1 2678 0
 10599 0112 00E0     		b	.L542
 10600              	.L560:
2679:bluetooth_rxtx.c **** 				default:
2680:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2681:bluetooth_rxtx.c **** 					break;
 10601              		.loc 1 2681 0
 10602 0114 00BF     		nop
 10603              	.L542:
2682:bluetooth_rxtx.c **** 			}
2683:bluetooth_rxtx.c **** 	}
 10604              		.loc 1 2683 0 discriminator 1
 10605 0116 7CE7     		b	.L559
 10606              	.L562:
 10607              		.align	2
 10608              	.L561:
 10609 0118 00000000 		.word	vendor_request_handler
 10610 011c 00000000 		.word	clkn
 10611 0120 00000000 		.word	requested_mode
 10612 0124 00000000 		.word	mode
 10613 0128 00000000 		.word	modulation
 10614 012c 00000000 		.word	channel
 10615 0130 00000000 		.word	ego_mode
 10616              		.cfi_endproc
 10617              	.LFE47:
 10619              		.bss
 10620              		.align	2
 10621              	restart_jamming.4709:
 10622 00d4 00000000 		.space	4
 10623              		.align	2
 10624              	first_ts.4807:
 10625 00d8 00000000 		.space	4
 10626              		.align	2
 10627              	prev_clk.4813:
 10628 00dc 00000000 		.space	4
 10629              		.text
 10630              	.Letext0:
 10631              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 10632              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 10633              		.file 4 "../common/ubertooth.h"
 10634              		.file 5 "bluetooth_le.h"
 10635              		.file 6 "bluetooth.h"
 10636              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/ccTf0kks.s 			page 234


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/ccTf0kks.s:19     .data:0000000000000000 $d
     /tmp/ccTf0kks.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/ccTf0kks.s:29     .rodata:0000000000000000 $d
     /tmp/ccTf0kks.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/ccTf0kks.s:39     .rodata:0000000000000004 data_channels
     /tmp/ccTf0kks.s:80     .rodata:000000000000002c whitening
     /tmp/ccTf0kks.s:211    .rodata:00000000000000ac whitening_index
     /tmp/ccTf0kks.s:255    .rodata:00000000000000d4 hop_interval_lut
     /tmp/ccTf0kks.s:296    .rodata:00000000000000fc whitening_word
                            *COM*:0000000000000005 rr
     /tmp/ccTf0kks.s:782    .rodata:000000000000087c compile_info
                            *COM*:0000000000000004 first_ts
                            *COM*:0000000000000004 second_ts
                            *COM*:0000000000000004 diff_ts
                            *COM*:0000000000000004 clkn
     /tmp/ccTf0kks.s:793    .bss:0000000000000000 hop_mode
     /tmp/ccTf0kks.s:794    .bss:0000000000000000 $d
     /tmp/ccTf0kks.s:798    .bss:0000000000000001 do_hop
     /tmp/ccTf0kks.s:803    .bss:0000000000000002 cs_no_squelch
     /tmp/ccTf0kks.s:809    .data:0000000000000004 cs_threshold_req
     /tmp/ccTf0kks.s:814    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/ccTf0kks.s:824    .bss:0000000000000004 hop_direct_channel
     /tmp/ccTf0kks.s:830    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/ccTf0kks.s:840    .bss:000000000000000c idle_buf_channel
     /tmp/ccTf0kks.s:846    .bss:000000000000000e active_buf_channel
     /tmp/ccTf0kks.s:852    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/ccTf0kks.s:861    .data:0000000000000008 active_rxbuf
     /tmp/ccTf0kks.s:867    .data:000000000000000c idle_rxbuf
     /tmp/ccTf0kks.s:873    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/ccTf0kks.s:892    .bss:0000000000000018 le_jam_count
     /tmp/ccTf0kks.s:898    .bss:000000000000001c data_cb
     /tmp/ccTf0kks.s:904    .bss:0000000000000020 packet_cb
     /tmp/ccTf0kks.s:910    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/ccTf0kks.s:916    .bss:00000000000000c2 mode
     /tmp/ccTf0kks.s:921    .bss:00000000000000c3 requested_mode
     /tmp/ccTf0kks.s:926    .bss:00000000000000c4 jam_mode
     /tmp/ccTf0kks.s:931    .bss:00000000000000c5 ego_mode
     /tmp/ccTf0kks.s:936    .bss:00000000000000c6 modulation
     /tmp/ccTf0kks.s:943    .data:0000000000000054 channel
     /tmp/ccTf0kks.s:950    .bss:00000000000000c8 requested_channel
ARM GAS  /tmp/ccTf0kks.s 			page 235


     /tmp/ccTf0kks.s:956    .bss:00000000000000ca saved_request
     /tmp/ccTf0kks.s:963    .data:0000000000000056 low_freq
     /tmp/ccTf0kks.s:969    .data:0000000000000058 high_freq
     /tmp/ccTf0kks.s:974    .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/ccTf0kks.s:985    .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/ccTf0kks.s:992    .bss:00000000000000cd rssi_count
     /tmp/ccTf0kks.s:998    .bss:00000000000000d0 rssi_sum
     /tmp/ccTf0kks.s:1001   .text.rssi_reset:0000000000000000 $t
     /tmp/ccTf0kks.s:1005   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/ccTf0kks.s:1045   .text.rssi_reset:0000000000000024 $d
     /tmp/ccTf0kks.s:1053   .text.rssi_add:0000000000000000 $t
     /tmp/ccTf0kks.s:1057   .text.rssi_add:0000000000000000 rssi_add
     /tmp/ccTf0kks.s:1123   .text.rssi_add:000000000000005c $d
     /tmp/ccTf0kks.s:1131   .text.rssi_iir_update:0000000000000000 $t
     /tmp/ccTf0kks.s:1135   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/ccTf0kks.s:1229   .text.rssi_iir_update:0000000000000084 $d
     /tmp/ccTf0kks.s:1238   .text.cs_threshold_set:0000000000000000 $t
     /tmp/ccTf0kks.s:1242   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/ccTf0kks.s:1324   .text.cs_threshold_set:0000000000000084 $d
     /tmp/ccTf0kks.s:1330   .text.enqueue:0000000000000000 $t
     /tmp/ccTf0kks.s:1334   .text.enqueue:0000000000000000 enqueue
     /tmp/ccTf0kks.s:1581   .text.enqueue:0000000000000180 $d
     /tmp/ccTf0kks.s:1597   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/ccTf0kks.s:1602   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/ccTf0kks.s:1783   .text.enqueue_with_ts:000000000000010c $d
     /tmp/ccTf0kks.s:1790   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/ccTf0kks.s:1794   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/ccTf0kks.s:1869   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/ccTf0kks.s:1877   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/ccTf0kks.s:1881   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/ccTf0kks.s:1922   .text.cs_trigger_enable:000000000000002c $d
     /tmp/ccTf0kks.s:1930   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/ccTf0kks.s:1934   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/ccTf0kks.s:1975   .text.cs_trigger_disable:000000000000002c $d
     /tmp/ccTf0kks.s:1987   .text.vendor_request_handler:0000000000000000 $t
     /tmp/ccTf0kks.s:1991   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/ccTf0kks.s:2028   .text.vendor_request_handler:0000000000000024 $d
     /tmp/ccTf0kks.s:2089   .text.vendor_request_handler:0000000000000118 $t
     /tmp/ccTf0kks.s:2489   .text.vendor_request_handler:00000000000003a8 $d
     /tmp/ccTf0kks.s:2499   .text.vendor_request_handler:00000000000003c8 $t
     /tmp/ccTf0kks.s:2883   .text.vendor_request_handler:0000000000000614 $d
     /tmp/ccTf0kks.s:2901   .text.vendor_request_handler:0000000000000654 $t
     /tmp/ccTf0kks.s:3291   .text.vendor_request_handler:00000000000008f4 $d
     /tmp/ccTf0kks.s:3303   .text.vendor_request_handler:000000000000091c $t
     /tmp/ccTf0kks.s:6242   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/ccTf0kks.s:3587   .text.vendor_request_handler:0000000000000ad4 $d
     /tmp/ccTf0kks.s:3597   .text.clkn_init:0000000000000000 $t
     /tmp/ccTf0kks.s:3601   .text.clkn_init:0000000000000000 clkn_init
     /tmp/ccTf0kks.s:3652   .text.clkn_init:0000000000000038 $d
     /tmp/ccTf0kks.s:3662   .text.TIMER0_IRQHandler:0000000000000000 $t
ARM GAS  /tmp/ccTf0kks.s 			page 236


     /tmp/ccTf0kks.s:3667   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/ccTf0kks.s:3836   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/ccTf0kks.s:3848   .text.EINT3_IRQHandler:0000000000000000 $t
     /tmp/ccTf0kks.s:3853   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/ccTf0kks.s:3895   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/ccTf0kks.s:3909   .text.msleep:0000000000000000 $t
     /tmp/ccTf0kks.s:3913   .text.msleep:0000000000000000 msleep
     /tmp/ccTf0kks.s:3982   .text.msleep:0000000000000070 $d
     /tmp/ccTf0kks.s:3990   .text.dma_init:0000000000000000 $t
     /tmp/ccTf0kks.s:3994   .text.dma_init:0000000000000000 dma_init
     /tmp/ccTf0kks.s:4168   .text.dma_init:0000000000000104 $d
     /tmp/ccTf0kks.s:4203   .text.dma_init_le:0000000000000000 $t
     /tmp/ccTf0kks.s:4207   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/ccTf0kks.s:4412   .text.dma_init_le:0000000000000134 $d
     /tmp/ccTf0kks.s:4444   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/ccTf0kks.s:4449   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/ccTf0kks.s:4552   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/ccTf0kks.s:4572   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/ccTf0kks.s:4577   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/ccTf0kks.s:4600   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/ccTf0kks.s:4612   .text.DMA_IRQHandler:0000000000000048 $t
     /tmp/ccTf0kks.s:4624   .text.DMA_IRQHandler:0000000000000050 $d
     /tmp/ccTf0kks.s:4629   .text.dio_ssp_start:0000000000000000 $t
     /tmp/ccTf0kks.s:4633   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/ccTf0kks.s:4686   .text.dio_ssp_start:0000000000000048 $d
     /tmp/ccTf0kks.s:4696   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/ccTf0kks.s:4700   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/ccTf0kks.s:4798   .text.dio_ssp_stop:000000000000008c $d
     /tmp/ccTf0kks.s:4817   .text.cc2400_idle:0000000000000000 $t
     /tmp/ccTf0kks.s:4821   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/ccTf0kks.s:4874   .text.cc2400_idle:0000000000000044 $d
     /tmp/ccTf0kks.s:4881   .text.cc2400_rx:0000000000000000 $t
     /tmp/ccTf0kks.s:4885   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/ccTf0kks.s:4999   .text.cc2400_rx:00000000000000b0 $d
     /tmp/ccTf0kks.s:5006   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/ccTf0kks.s:5010   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/ccTf0kks.s:5145   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/ccTf0kks.s:5152   .text.le_transmit:0000000000000000 $t
     /tmp/ccTf0kks.s:5157   .text.le_transmit:0000000000000000 le_transmit
     /tmp/ccTf0kks.s:5550   .text.le_transmit:00000000000002d4 $d
     /tmp/ccTf0kks.s:5563   .text.le_jam:0000000000000000 $t
     /tmp/ccTf0kks.s:5568   .text.le_jam:0000000000000000 le_jam
     /tmp/ccTf0kks.s:5651   .text.le_jam:000000000000008c $d
     /tmp/ccTf0kks.s:5657   .text.hop:0000000000000000 $t
     /tmp/ccTf0kks.s:5662   .text.hop:0000000000000000 hop
     /tmp/ccTf0kks.s:5829   .text.hop:000000000000010c $d
     /tmp/ccTf0kks.s:5840   .text.cc2400_spi_rev:0000000000000000 $t
     /tmp/ccTf0kks.s:5845   .text.cc2400_spi_rev:0000000000000000 cc2400_spi_rev
     /tmp/ccTf0kks.s:5942   .text.cc2400_spi_rev:000000000000007c $d
     /tmp/ccTf0kks.s:5949   .text.cc2400_get_rev:0000000000000000 $t
     /tmp/ccTf0kks.s:5954   .text.cc2400_get_rev:0000000000000000 cc2400_get_rev
     /tmp/ccTf0kks.s:5996   .text.bt_stream_rx:0000000000000000 $t
     /tmp/ccTf0kks.s:6001   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/ccTf0kks.s:6226   .text.bt_stream_rx:000000000000017c $d
     /tmp/ccTf0kks.s:6238   .text.le_set_access_address:0000000000000000 $t
     /tmp/ccTf0kks.s:6286   .text.le_set_access_address:0000000000000030 $d
     /tmp/ccTf0kks.s:6291   .text.reset_le:0000000000000000 $t
ARM GAS  /tmp/ccTf0kks.s 			page 237


     /tmp/ccTf0kks.s:6296   .text.reset_le:0000000000000000 reset_le
     /tmp/ccTf0kks.s:6392   .text.reset_le:0000000000000084 $d
     /tmp/ccTf0kks.s:6401   .text.reset_le_promisc:0000000000000000 $t
     /tmp/ccTf0kks.s:6406   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/ccTf0kks.s:6432   .text.reset_le_promisc:000000000000001c $d
     /tmp/ccTf0kks.s:6437   .text.bt_generic_le:0000000000000000 $t
     /tmp/ccTf0kks.s:6442   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/ccTf0kks.s:6868   .text.bt_generic_le:00000000000002a0 $d
     /tmp/ccTf0kks.s:6894   .text.bt_le_sync:0000000000000000 $t
     /tmp/ccTf0kks.s:6899   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/ccTf0kks.s:7247   .text.bt_le_sync:0000000000000228 $d
     /tmp/ccTf0kks.s:7268   .text.bt_le_sync:0000000000000270 $t
     /tmp/ccTf0kks.s:7666   .text.bt_le_sync:0000000000000508 $d
     /tmp/ccTf0kks.s:10621  .bss:00000000000000d4 restart_jamming.4709
     /tmp/ccTf0kks.s:7691   .text.cb_follow_le:0000000000000000 $t
     /tmp/ccTf0kks.s:7696   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/ccTf0kks.s:7986   .text.cb_follow_le:00000000000001b8 $d
     /tmp/ccTf0kks.s:7999   .text.connection_follow_cb:0000000000000000 $t
     /tmp/ccTf0kks.s:8004   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/ccTf0kks.s:8382   .text.connection_follow_cb:0000000000000260 $d
     /tmp/ccTf0kks.s:8392   .text.bt_follow_le:0000000000000000 $t
     /tmp/ccTf0kks.s:8397   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/ccTf0kks.s:8427   .text.bt_follow_le:000000000000001c $d
     /tmp/ccTf0kks.s:8434   .text.le_promisc_state:0000000000000000 $t
     /tmp/ccTf0kks.s:8439   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/ccTf0kks.s:8532   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/ccTf0kks.s:8537   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/ccTf0kks.s:8746   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/ccTf0kks.s:10624  .bss:00000000000000d8 first_ts.4807
     /tmp/ccTf0kks.s:8765   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/ccTf0kks.s:8770   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/ccTf0kks.s:8905   .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/ccTf0kks.s:10627  .bss:00000000000000dc prev_clk.4813
     /tmp/ccTf0kks.s:8922   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/ccTf0kks.s:8927   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/ccTf0kks.s:9042   .text.promisc_follow_cb:00000000000000ac $d
     /tmp/ccTf0kks.s:9050   .text.see_aa:0000000000000000 $t
     /tmp/ccTf0kks.s:9055   .text.see_aa:0000000000000000 see_aa
     /tmp/ccTf0kks.s:9176   .text.see_aa:00000000000000a4 $d
     /tmp/ccTf0kks.s:9188   .text.cb_le_promisc:0000000000000000 $t
     /tmp/ccTf0kks.s:9193   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/ccTf0kks.s:9645   .text.cb_le_promisc:00000000000002e0 $d
     /tmp/ccTf0kks.s:9661   .text.bt_promisc_le:0000000000000000 $t
     /tmp/ccTf0kks.s:9666   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/ccTf0kks.s:9748   .text.bt_promisc_le:000000000000006c $d
     /tmp/ccTf0kks.s:9776   .text.bt_slave_le:0000000000000000 $t
     /tmp/ccTf0kks.s:9781   .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/ccTf0kks.s:9916   .text.bt_slave_le:00000000000000dc $d
     /tmp/ccTf0kks.s:9927   .text.specan:0000000000000000 $t
     /tmp/ccTf0kks.s:9932   .text.specan:0000000000000000 specan
     /tmp/ccTf0kks.s:10148  .text.specan:0000000000000178 $d
     /tmp/ccTf0kks.s:10166  .text.led_specan:0000000000000000 $t
     /tmp/ccTf0kks.s:10171  .text.led_specan:0000000000000000 led_specan
     /tmp/ccTf0kks.s:10407  .text.led_specan:0000000000000178 $d
     /tmp/ccTf0kks.s:10420  .text.main:0000000000000000 $t
     /tmp/ccTf0kks.s:10425  .text.main:0000000000000000 main
     /tmp/ccTf0kks.s:10469  .text.main:000000000000003c $d
ARM GAS  /tmp/ccTf0kks.s 			page 238


     /tmp/ccTf0kks.s:10483  .text.main:0000000000000074 $t
     /tmp/ccTf0kks.s:10609  .text.main:0000000000000118 $d
                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
__aeabi_ui2d
__aeabi_dmul
__aeabi_ddiv
__aeabi_dadd
__aeabi_d2uiz
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
dio_ssp_init
rbit
handle_usb
memset
btle_crcgen_lut
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_txtest
cc2400_rangetest
cc2400_repeater
ego_main
