ARM GAS  /tmp/cczWrdyg.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"bluetooth_rxtx.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.data
  19              		.align	2
  22              	iap_entry:
  23 0000 F11FFF1F 		.word	536813553
  24              		.comm	target,16,8
  25              		.comm	syncword,8,8
  26              		.comm	afh_enabled,1,1
  27              		.comm	afh_map,10,4
  28              		.section	.rodata
  29              		.align	2
  32              	advertising_channels:
  33 0000 00       		.byte	0
  34 0001 0C       		.byte	12
  35 0002 27       		.byte	39
  36 0003 00       		.align	2
  39              	data_channels:
  40 0004 01       		.byte	1
  41 0005 02       		.byte	2
  42 0006 03       		.byte	3
  43 0007 04       		.byte	4
  44 0008 05       		.byte	5
  45 0009 06       		.byte	6
  46 000a 07       		.byte	7
  47 000b 08       		.byte	8
  48 000c 09       		.byte	9
  49 000d 0A       		.byte	10
  50 000e 0B       		.byte	11
  51 000f 0D       		.byte	13
  52 0010 0E       		.byte	14
  53 0011 0F       		.byte	15
  54 0012 10       		.byte	16
  55 0013 11       		.byte	17
  56 0014 12       		.byte	18
  57 0015 13       		.byte	19
  58 0016 14       		.byte	20
  59 0017 15       		.byte	21
  60 0018 16       		.byte	22
  61 0019 17       		.byte	23
  62 001a 18       		.byte	24
  63 001b 19       		.byte	25
ARM GAS  /tmp/cczWrdyg.s 			page 2


  64 001c 1A       		.byte	26
  65 001d 1B       		.byte	27
  66 001e 1C       		.byte	28
  67 001f 1D       		.byte	29
  68 0020 1E       		.byte	30
  69 0021 1F       		.byte	31
  70 0022 20       		.byte	32
  71 0023 21       		.byte	33
  72 0024 22       		.byte	34
  73 0025 23       		.byte	35
  74 0026 24       		.byte	36
  75 0027 25       		.byte	37
  76 0028 26       		.byte	38
  77 0029 000000   		.align	2
  80              	whitening:
  81 002c 01       		.byte	1
  82 002d 01       		.byte	1
  83 002e 01       		.byte	1
  84 002f 01       		.byte	1
  85 0030 00       		.byte	0
  86 0031 01       		.byte	1
  87 0032 00       		.byte	0
  88 0033 01       		.byte	1
  89 0034 00       		.byte	0
  90 0035 01       		.byte	1
  91 0036 00       		.byte	0
  92 0037 00       		.byte	0
  93 0038 00       		.byte	0
  94 0039 00       		.byte	0
  95 003a 01       		.byte	1
  96 003b 00       		.byte	0
  97 003c 01       		.byte	1
  98 003d 01       		.byte	1
  99 003e 00       		.byte	0
 100 003f 01       		.byte	1
 101 0040 01       		.byte	1
 102 0041 01       		.byte	1
 103 0042 01       		.byte	1
 104 0043 00       		.byte	0
 105 0044 00       		.byte	0
 106 0045 01       		.byte	1
 107 0046 01       		.byte	1
 108 0047 01       		.byte	1
 109 0048 00       		.byte	0
 110 0049 00       		.byte	0
 111 004a 01       		.byte	1
 112 004b 00       		.byte	0
 113 004c 01       		.byte	1
 114 004d 00       		.byte	0
 115 004e 01       		.byte	1
 116 004f 01       		.byte	1
 117 0050 00       		.byte	0
 118 0051 00       		.byte	0
 119 0052 01       		.byte	1
 120 0053 01       		.byte	1
 121 0054 00       		.byte	0
 122 0055 00       		.byte	0
ARM GAS  /tmp/cczWrdyg.s 			page 3


 123 0056 00       		.byte	0
 124 0057 00       		.byte	0
 125 0058 00       		.byte	0
 126 0059 01       		.byte	1
 127 005a 01       		.byte	1
 128 005b 00       		.byte	0
 129 005c 01       		.byte	1
 130 005d 01       		.byte	1
 131 005e 00       		.byte	0
 132 005f 01       		.byte	1
 133 0060 00       		.byte	0
 134 0061 01       		.byte	1
 135 0062 01       		.byte	1
 136 0063 01       		.byte	1
 137 0064 00       		.byte	0
 138 0065 01       		.byte	1
 139 0066 00       		.byte	0
 140 0067 00       		.byte	0
 141 0068 00       		.byte	0
 142 0069 01       		.byte	1
 143 006a 01       		.byte	1
 144 006b 00       		.byte	0
 145 006c 00       		.byte	0
 146 006d 01       		.byte	1
 147 006e 00       		.byte	0
 148 006f 00       		.byte	0
 149 0070 00       		.byte	0
 150 0071 01       		.byte	1
 151 0072 00       		.byte	0
 152 0073 00       		.byte	0
 153 0074 00       		.byte	0
 154 0075 00       		.byte	0
 155 0076 00       		.byte	0
 156 0077 00       		.byte	0
 157 0078 01       		.byte	1
 158 0079 00       		.byte	0
 159 007a 00       		.byte	0
 160 007b 01       		.byte	1
 161 007c 00       		.byte	0
 162 007d 00       		.byte	0
 163 007e 01       		.byte	1
 164 007f 01       		.byte	1
 165 0080 00       		.byte	0
 166 0081 01       		.byte	1
 167 0082 00       		.byte	0
 168 0083 00       		.byte	0
 169 0084 01       		.byte	1
 170 0085 01       		.byte	1
 171 0086 01       		.byte	1
 172 0087 01       		.byte	1
 173 0088 00       		.byte	0
 174 0089 01       		.byte	1
 175 008a 01       		.byte	1
 176 008b 01       		.byte	1
 177 008c 00       		.byte	0
 178 008d 00       		.byte	0
 179 008e 00       		.byte	0
ARM GAS  /tmp/cczWrdyg.s 			page 4


 180 008f 00       		.byte	0
 181 0090 01       		.byte	1
 182 0091 01       		.byte	1
 183 0092 01       		.byte	1
 184 0093 01       		.byte	1
 185 0094 01       		.byte	1
 186 0095 01       		.byte	1
 187 0096 01       		.byte	1
 188 0097 00       		.byte	0
 189 0098 00       		.byte	0
 190 0099 00       		.byte	0
 191 009a 01       		.byte	1
 192 009b 01       		.byte	1
 193 009c 01       		.byte	1
 194 009d 00       		.byte	0
 195 009e 01       		.byte	1
 196 009f 01       		.byte	1
 197 00a0 00       		.byte	0
 198 00a1 00       		.byte	0
 199 00a2 00       		.byte	0
 200 00a3 01       		.byte	1
 201 00a4 00       		.byte	0
 202 00a5 01       		.byte	1
 203 00a6 00       		.byte	0
 204 00a7 00       		.byte	0
 205 00a8 01       		.byte	1
 206 00a9 00       		.byte	0
 207 00aa 01       		.byte	1
 208 00ab 00       		.align	2
 211              	whitening_index:
 212 00ac 46       		.byte	70
 213 00ad 3E       		.byte	62
 214 00ae 78       		.byte	120
 215 00af 6F       		.byte	111
 216 00b0 4D       		.byte	77
 217 00b1 2E       		.byte	46
 218 00b2 0F       		.byte	15
 219 00b3 65       		.byte	101
 220 00b4 42       		.byte	66
 221 00b5 27       		.byte	39
 222 00b6 1F       		.byte	31
 223 00b7 1A       		.byte	26
 224 00b8 50       		.byte	80
 225 00b9 53       		.byte	83
 226 00ba 7D       		.byte	125
 227 00bb 59       		.byte	89
 228 00bc 0A       		.byte	10
 229 00bd 23       		.byte	35
 230 00be 08       		.byte	8
 231 00bf 36       		.byte	54
 232 00c0 7A       		.byte	122
 233 00c1 11       		.byte	17
 234 00c2 21       		.byte	33
 235 00c3 00       		.byte	0
 236 00c4 3A       		.byte	58
 237 00c5 73       		.byte	115
 238 00c6 06       		.byte	6
ARM GAS  /tmp/cczWrdyg.s 			page 5


 239 00c7 5E       		.byte	94
 240 00c8 56       		.byte	86
 241 00c9 31       		.byte	49
 242 00ca 34       		.byte	52
 243 00cb 14       		.byte	20
 244 00cc 28       		.byte	40
 245 00cd 1B       		.byte	27
 246 00ce 54       		.byte	84
 247 00cf 5A       		.byte	90
 248 00d0 3F       		.byte	63
 249 00d1 70       		.byte	112
 250 00d2 2F       		.byte	47
 251 00d3 66       		.byte	102
 252              		.align	2
 255              	hop_interval_lut:
 256 00d4 00       		.byte	0
 257 00d5 01       		.byte	1
 258 00d6 13       		.byte	19
 259 00d7 19       		.byte	25
 260 00d8 1C       		.byte	28
 261 00d9 0F       		.byte	15
 262 00da 1F       		.byte	31
 263 00db 10       		.byte	16
 264 00dc 0E       		.byte	14
 265 00dd 21       		.byte	33
 266 00de 1A       		.byte	26
 267 00df 1B       		.byte	27
 268 00e0 22       		.byte	34
 269 00e1 14       		.byte	20
 270 00e2 08       		.byte	8
 271 00e3 05       		.byte	5
 272 00e4 07       		.byte	7
 273 00e5 18       		.byte	24
 274 00e6 23       		.byte	35
 275 00e7 02       		.byte	2
 276 00e8 0D       		.byte	13
 277 00e9 1E       		.byte	30
 278 00ea 20       		.byte	32
 279 00eb 1D       		.byte	29
 280 00ec 11       		.byte	17
 281 00ed 03       		.byte	3
 282 00ee 0A       		.byte	10
 283 00ef 0B       		.byte	11
 284 00f0 04       		.byte	4
 285 00f1 17       		.byte	23
 286 00f2 15       		.byte	21
 287 00f3 06       		.byte	6
 288 00f4 16       		.byte	22
 289 00f5 09       		.byte	9
 290 00f6 0C       		.byte	12
 291 00f7 12       		.byte	18
 292 00f8 24       		.byte	36
 293 00f9 000000   		.align	2
 296              	whitening_word:
 297 00fc 40B2BCC3 		.word	-1011043776
 298 0100 1F374A5F 		.word	1598699295
 299 0104 85F69C9A 		.word	-1700989307
ARM GAS  /tmp/cczWrdyg.s 			page 6


 300 0108 C1D6C544 		.word	1153816257
 301 010c 2059DEE1 		.word	-505521888
 302 0110 8F1BA5AF 		.word	-1348134001
 303 0114 427B4ECD 		.word	-850494654
 304 0118 60EB6222 		.word	576908128
 305 011c 902CEFF0 		.word	-252760944
 306 0120 C78DD257 		.word	1473416647
 307 0124 A13DA766 		.word	1722236321
 308 0128 B0753111 		.word	288454064
 309 012c 8940B2BC 		.word	-1129168759
 310 0130 C31F374A 		.word	1245126595
 311 0134 5F85F69C 		.word	-1661565601
 312 0138 9AC1D6C5 		.word	-975781478
 313 013c 442059DE 		.word	-564584380
 314 0140 E18F1BA5 		.word	-1524920351
 315 0144 AF427B4E 		.word	1316700847
 316 0148 CD60EB62 		.word	1659592909
 317 014c 22902CEF 		.word	-282292190
 318 0150 F0C78DD2 		.word	-762460176
 319 0154 57A13DA7 		.word	-1489133225
 320 0158 66B07531 		.word	829796454
 321 015c D257A13D 		.word	1033983954
 322 0160 A766B075 		.word	1974494887
 323 0164 31114896 		.word	-1773661903
 324 0168 77F8E346 		.word	1189345399
 325 016c E9ABD09E 		.word	-1630491671
 326 0170 5333D8BA 		.word	-1160236205
 327 0174 980824CB 		.word	-886830952
 328 0178 3BFC71A3 		.word	-1552810949
 329 017c F45568CF 		.word	-815245836
 330 0180 A9196C5D 		.word	1567365545
 331 0184 4C0492E5 		.word	-443415476
 332 0188 1DFEB851 		.word	1371078173
 333 018c 1BA5AF42 		.word	1118807323
 334 0190 7B4ECD60 		.word	1624067707
 335 0194 EB622290 		.word	-1876794645
 336 0198 2CEFF0C7 		.word	-940511444
 337 019c 8DD257A1 		.word	-1588079987
 338 01a0 3DA766B0 		.word	-1335449795
 339 01a4 75311148 		.word	1209086325
 340 01a8 9677F8E3 		.word	-470255722
 341 01ac 46E9ABD0 		.word	-794039994
 342 01b0 9E5333D8 		.word	-667724898
 343 01b4 BA980824 		.word	604543162
 344 01b8 CB3BFC71 		.word	1912355787
 345 01bc 6479873F 		.word	1065843044
 346 01c0 6E94BE0A 		.word	180261998
 347 01c4 ED393583 		.word	-2093663763
 348 01c8 AD8B8940 		.word	1082756013
 349 01cc B2BCC31F 		.word	532921522
 350 01d0 374A5F85 		.word	-2057352649
 351 01d4 F69C9AC1 		.word	-1046831882
 352 01d8 D6C54420 		.word	541378006
 353 01dc 59DEE18F 		.word	-1881022887
 354 01e0 1BA5AF42 		.word	1118807323
 355 01e4 7B4ECD60 		.word	1624067707
 356 01e8 EB622290 		.word	-1876794645
ARM GAS  /tmp/cczWrdyg.s 			page 7


 357 01ec AD8B8940 		.word	1082756013
 358 01f0 B2BCC31F 		.word	532921522
 359 01f4 374A5F85 		.word	-2057352649
 360 01f8 F69C9AC1 		.word	-1046831882
 361 01fc D6C54420 		.word	541378006
 362 0200 59DEE18F 		.word	-1881022887
 363 0204 1BA5AF42 		.word	1118807323
 364 0208 7B4ECD60 		.word	1624067707
 365 020c EB622290 		.word	-1876794645
 366 0210 2CEFF0C7 		.word	-940511444
 367 0214 8DD257A1 		.word	-1588079987
 368 0218 3DA766B0 		.word	-1335449795
 369 021c F69C9AC1 		.word	-1046831882
 370 0220 D6C54420 		.word	541378006
 371 0224 59DEE18F 		.word	-1881022887
 372 0228 1BA5AF42 		.word	1118807323
 373 022c 7B4ECD60 		.word	1624067707
 374 0230 EB622290 		.word	-1876794645
 375 0234 2CEFF0C7 		.word	-940511444
 376 0238 8DD257A1 		.word	-1588079987
 377 023c 3DA766B0 		.word	-1335449795
 378 0240 75311148 		.word	1209086325
 379 0244 9677F8E3 		.word	-470255722
 380 0248 46E9ABD0 		.word	-794039994
 381 024c 3F6E94BE 		.word	-1097568705
 382 0250 0AED3935 		.word	892988682
 383 0254 83AD8B89 		.word	-1987334781
 384 0258 40B2BCC3 		.word	-1011043776
 385 025c 1F374A5F 		.word	1598699295
 386 0260 85F69C9A 		.word	-1700989307
 387 0264 C1D6C544 		.word	1153816257
 388 0268 2059DEE1 		.word	-505521888
 389 026c 8F1BA5AF 		.word	-1348134001
 390 0270 427B4ECD 		.word	-850494654
 391 0274 60EB6222 		.word	576908128
 392 0278 902CEFF0 		.word	-252760944
 393 027c 0824CB3B 		.word	1003168776
 394 0280 FC71A3F4 		.word	-190615044
 395 0284 5568CFA9 		.word	-1446025131
 396 0288 196C5D4C 		.word	1281190937
 397 028c 0492E51D 		.word	501584388
 398 0290 FEB851FA 		.word	-95307522
 399 0294 2AB4E7D4 		.word	-723012566
 400 0298 0CB62E26 		.word	640595468
 401 029c 02C9F20E 		.word	250792194
 402 02a0 7FDC287D 		.word	2099829887
 403 02a4 15DA736A 		.word	1785977365
 404 02a8 065B1713 		.word	320297734
 405 02ac C1D6C544 		.word	1153816257
 406 02b0 2059DEE1 		.word	-505521888
 407 02b4 8F1BA5AF 		.word	-1348134001
 408 02b8 427B4ECD 		.word	-850494654
 409 02bc 60EB6222 		.word	576908128
 410 02c0 902CEFF0 		.word	-252760944
 411 02c4 C78DD257 		.word	1473416647
 412 02c8 A13DA766 		.word	1722236321
 413 02cc B0753111 		.word	288454064
ARM GAS  /tmp/cczWrdyg.s 			page 8


 414 02d0 489677F8 		.word	-126380472
 415 02d4 E346E9AB 		.word	-1410775325
 416 02d8 D09E5333 		.word	861118160
 417 02dc 9AC1D6C5 		.word	-975781478
 418 02e0 442059DE 		.word	-564584380
 419 02e4 E18F1BA5 		.word	-1524920351
 420 02e8 AF427B4E 		.word	1316700847
 421 02ec CD60EB62 		.word	1659592909
 422 02f0 22902CEF 		.word	-282292190
 423 02f4 F0C78DD2 		.word	-762460176
 424 02f8 57A13DA7 		.word	-1489133225
 425 02fc 66B07531 		.word	829796454
 426 0300 11489677 		.word	2006337553
 427 0304 F8E346E9 		.word	-381230088
 428 0308 ABD09E53 		.word	1402917035
 429 030c 5333D8BA 		.word	-1160236205
 430 0310 980824CB 		.word	-886830952
 431 0314 3BFC71A3 		.word	-1552810949
 432 0318 F45568CF 		.word	-815245836
 433 031c A9196C5D 		.word	1567365545
 434 0320 4C0492E5 		.word	-443415476
 435 0324 1DFEB851 		.word	1371078173
 436 0328 FA2AB4E7 		.word	-407622918
 437 032c D40CB62E 		.word	783682772
 438 0330 2602C9F2 		.word	-221707738
 439 0334 0E7FDC28 		.word	685539086
 440 0338 7D15DA73 		.word	1943672189
 441 033c 2CEFF0C7 		.word	-940511444
 442 0340 8DD257A1 		.word	-1588079987
 443 0344 3DA766B0 		.word	-1335449795
 444 0348 75311148 		.word	1209086325
 445 034c 9677F8E3 		.word	-470255722
 446 0350 46E9ABD0 		.word	-794039994
 447 0354 9E5333D8 		.word	-667724898
 448 0358 BA980824 		.word	604543162
 449 035c CB3BFC71 		.word	1912355787
 450 0360 A3F45568 		.word	1750463651
 451 0364 CFA9196C 		.word	1813621199
 452 0368 5D4C0492 		.word	-1845212067
 453 036c E51DFEB8 		.word	-1191305755
 454 0370 51FA2AB4 		.word	-1272251823
 455 0374 E7D40CB6 		.word	-1240673049
 456 0378 2E2602C9 		.word	-922606034
 457 037c F20E7FDC 		.word	-595652878
 458 0380 287D15DA 		.word	-636125912
 459 0384 736A065B 		.word	1527147123
 460 0388 17138164 		.word	1686180631
 461 038c 79873F6E 		.word	1849657209
 462 0390 94BE0AED 		.word	-318062956
 463 0394 393583AD 		.word	-1383910087
 464 0398 8B8940B2 		.word	-1304393333
 465 039c BE0AED39 		.word	971836094
 466 03a0 3583AD8B 		.word	-1951562955
 467 03a4 8940B2BC 		.word	-1129168759
 468 03a8 C31F374A 		.word	1245126595
 469 03ac 5F85F69C 		.word	-1661565601
 470 03b0 9AC1D6C5 		.word	-975781478
ARM GAS  /tmp/cczWrdyg.s 			page 9


 471 03b4 442059DE 		.word	-564584380
 472 03b8 E18F1BA5 		.word	-1524920351
 473 03bc AF427B4E 		.word	1316700847
 474 03c0 CD60EB62 		.word	1659592909
 475 03c4 22902CEF 		.word	-282292190
 476 03c8 F0C78DD2 		.word	-762460176
 477 03cc 77F8E346 		.word	1189345399
 478 03d0 E9ABD09E 		.word	-1630491671
 479 03d4 5333D8BA 		.word	-1160236205
 480 03d8 980824CB 		.word	-886830952
 481 03dc 3BFC71A3 		.word	-1552810949
 482 03e0 F45568CF 		.word	-815245836
 483 03e4 A9196C5D 		.word	1567365545
 484 03e8 4C0492E5 		.word	-443415476
 485 03ec 1DFEB851 		.word	1371078173
 486 03f0 FA2AB4E7 		.word	-407622918
 487 03f4 D40CB62E 		.word	783682772
 488 03f8 2602C9F2 		.word	-221707738
 489 03fc D09E5333 		.word	861118160
 490 0400 D8BA9808 		.word	144227032
 491 0404 24CB3BFC 		.word	-63190236
 492 0408 71A3F455 		.word	1442095985
 493 040c 68CFA919 		.word	430559080
 494 0410 6C5D4C04 		.word	72113516
 495 0414 92E51DFE 		.word	-31595118
 496 0418 B851FA2A 		.word	721047992
 497 041c B4E7D40C 		.word	215279540
 498 0420 B62E2602 		.word	36056758
 499 0424 C9F20E7F 		.word	2131686089
 500 0428 DC287D15 		.word	360523996
 501 042c 196C5D4C 		.word	1281190937
 502 0430 0492E51D 		.word	501584388
 503 0434 FEB851FA 		.word	-95307522
 504 0438 2AB4E7D4 		.word	-723012566
 505 043c 0CB62E26 		.word	640595468
 506 0440 02C9F20E 		.word	250792194
 507 0444 7FDC287D 		.word	2099829887
 508 0448 15DA736A 		.word	1785977365
 509 044c 065B1713 		.word	320297734
 510 0450 81647987 		.word	-2022087551
 511 0454 3F6E94BE 		.word	-1097568705
 512 0458 0AED3935 		.word	892988682
 513 045c 427B4ECD 		.word	-850494654
 514 0460 60EB6222 		.word	576908128
 515 0464 902CEFF0 		.word	-252760944
 516 0468 C78DD257 		.word	1473416647
 517 046c A13DA766 		.word	1722236321
 518 0470 B0753111 		.word	288454064
 519 0474 489677F8 		.word	-126380472
 520 0478 E346E9AB 		.word	-1410775325
 521 047c D09E5333 		.word	861118160
 522 0480 D8BA9808 		.word	144227032
 523 0484 24CB3BFC 		.word	-63190236
 524 0488 71A3F455 		.word	1442095985
 525 048c 8B8940B2 		.word	-1304393333
 526 0490 BCC31F37 		.word	924828604
 527 0494 4A5F85F6 		.word	-159031478
ARM GAS  /tmp/cczWrdyg.s 			page 10


 528 0498 9C9AC1D6 		.word	-691955044
 529 049c C5442059 		.word	1495286981
 530 04a0 DEE18F1B 		.word	462414302
 531 04a4 A5AF427B 		.word	2067967909
 532 04a8 4ECD60EB 		.word	-345977522
 533 04ac 6222902C 		.word	747643490
 534 04b0 EFF0C78D 		.word	-1916276497
 535 04b4 D257A13D 		.word	1033983954
 536 04b8 A766B075 		.word	1974494887
 537 04bc F45568CF 		.word	-815245836
 538 04c0 A9196C5D 		.word	1567365545
 539 04c4 4C0492E5 		.word	-443415476
 540 04c8 1DFEB851 		.word	1371078173
 541 04cc FA2AB4E7 		.word	-407622918
 542 04d0 D40CB62E 		.word	783682772
 543 04d4 2602C9F2 		.word	-221707738
 544 04d8 0E7FDC28 		.word	685539086
 545 04dc 7D15DA73 		.word	1943672189
 546 04e0 6A065B17 		.word	391841386
 547 04e4 13816479 		.word	2036629779
 548 04e8 873F6E94 		.word	-1804714105
 549 04ec 3DA766B0 		.word	-1335449795
 550 04f0 75311148 		.word	1209086325
 551 04f4 9677F8E3 		.word	-470255722
 552 04f8 46E9ABD0 		.word	-794039994
 553 04fc 9E5333D8 		.word	-667724898
 554 0500 BA980824 		.word	604543162
 555 0504 CB3BFC71 		.word	1912355787
 556 0508 A3F45568 		.word	1750463651
 557 050c CFA9196C 		.word	1813621199
 558 0510 5D4C0492 		.word	-1845212067
 559 0514 E51DFEB8 		.word	-1191305755
 560 0518 51FA2AB4 		.word	-1272251823
 561 051c 66B07531 		.word	829796454
 562 0520 11489677 		.word	2006337553
 563 0524 F8E346E9 		.word	-381230088
 564 0528 ABD09E53 		.word	1402917035
 565 052c 33D8BA98 		.word	-1732585421
 566 0530 0824CB3B 		.word	1003168776
 567 0534 FC71A3F4 		.word	-190615044
 568 0538 5568CFA9 		.word	-1446025131
 569 053c 196C5D4C 		.word	1281190937
 570 0540 0492E51D 		.word	501584388
 571 0544 FEB851FA 		.word	-95307522
 572 0548 2AB4E7D4 		.word	-723012566
 573 054c AF427B4E 		.word	1316700847
 574 0550 CD60EB62 		.word	1659592909
 575 0554 22902CEF 		.word	-282292190
 576 0558 F0C78DD2 		.word	-762460176
 577 055c 57A13DA7 		.word	-1489133225
 578 0560 66B07531 		.word	829796454
 579 0564 11489677 		.word	2006337553
 580 0568 F8E346E9 		.word	-381230088
 581 056c ABD09E53 		.word	1402917035
 582 0570 33D8BA98 		.word	-1732585421
 583 0574 0824CB3B 		.word	1003168776
 584 0578 FC71A3F4 		.word	-190615044
ARM GAS  /tmp/cczWrdyg.s 			page 11


 585 057c 980824CB 		.word	-886830952
 586 0580 3BFC71A3 		.word	-1552810949
 587 0584 F45568CF 		.word	-815245836
 588 0588 A9196C5D 		.word	1567365545
 589 058c 4C0492E5 		.word	-443415476
 590 0590 1DFEB851 		.word	1371078173
 591 0594 FA2AB4E7 		.word	-407622918
 592 0598 D40CB62E 		.word	783682772
 593 059c 2602C9F2 		.word	-221707738
 594 05a0 0E7FDC28 		.word	685539086
 595 05a4 7D15DA73 		.word	1943672189
 596 05a8 6A065B17 		.word	391841386
 597 05ac 51FA2AB4 		.word	-1272251823
 598 05b0 E7D40CB6 		.word	-1240673049
 599 05b4 2E2602C9 		.word	-922606034
 600 05b8 F20E7FDC 		.word	-595652878
 601 05bc 287D15DA 		.word	-636125912
 602 05c0 736A065B 		.word	1527147123
 603 05c4 17138164 		.word	1686180631
 604 05c8 79873F6E 		.word	1849657209
 605 05cc 94BE0AED 		.word	-318062956
 606 05d0 393583AD 		.word	-1383910087
 607 05d4 8B8940B2 		.word	-1304393333
 608 05d8 BCC31F37 		.word	924828604
 609 05dc 0AED3935 		.word	892988682
 610 05e0 83AD8B89 		.word	-1987334781
 611 05e4 40B2BCC3 		.word	-1011043776
 612 05e8 1F374A5F 		.word	1598699295
 613 05ec 85F69C9A 		.word	-1700989307
 614 05f0 C1D6C544 		.word	1153816257
 615 05f4 2059DEE1 		.word	-505521888
 616 05f8 8F1BA5AF 		.word	-1348134001
 617 05fc 427B4ECD 		.word	-850494654
 618 0600 60EB6222 		.word	576908128
 619 0604 902CEFF0 		.word	-252760944
 620 0608 C78DD257 		.word	1473416647
 621 060c C31F374A 		.word	1245126595
 622 0610 5F85F69C 		.word	-1661565601
 623 0614 9AC1D6C5 		.word	-975781478
 624 0618 442059DE 		.word	-564584380
 625 061c E18F1BA5 		.word	-1524920351
 626 0620 AF427B4E 		.word	1316700847
 627 0624 CD60EB62 		.word	1659592909
 628 0628 22902CEF 		.word	-282292190
 629 062c F0C78DD2 		.word	-762460176
 630 0630 57A13DA7 		.word	-1489133225
 631 0634 66B07531 		.word	829796454
 632 0638 11489677 		.word	2006337553
 633 063c BCC31F37 		.word	924828604
 634 0640 4A5F85F6 		.word	-159031478
 635 0644 9C9AC1D6 		.word	-691955044
 636 0648 C5442059 		.word	1495286981
 637 064c DEE18F1B 		.word	462414302
 638 0650 A5AF427B 		.word	2067967909
 639 0654 4ECD60EB 		.word	-345977522
 640 0658 6222902C 		.word	747643490
 641 065c EFF0C78D 		.word	-1916276497
ARM GAS  /tmp/cczWrdyg.s 			page 12


 642 0660 D257A13D 		.word	1033983954
 643 0664 A766B075 		.word	1974494887
 644 0668 31114896 		.word	-1773661903
 645 066c 75311148 		.word	1209086325
 646 0670 9677F8E3 		.word	-470255722
 647 0674 46E9ABD0 		.word	-794039994
 648 0678 9E5333D8 		.word	-667724898
 649 067c BA980824 		.word	604543162
 650 0680 CB3BFC71 		.word	1912355787
 651 0684 A3F45568 		.word	1750463651
 652 0688 CFA9196C 		.word	1813621199
 653 068c 5D4C0492 		.word	-1845212067
 654 0690 E51DFEB8 		.word	-1191305755
 655 0694 51FA2AB4 		.word	-1272251823
 656 0698 E7D40CB6 		.word	-1240673049
 657 069c 2E2602C9 		.word	-922606034
 658 06a0 F20E7FDC 		.word	-595652878
 659 06a4 287D15DA 		.word	-636125912
 660 06a8 736A065B 		.word	1527147123
 661 06ac 17138164 		.word	1686180631
 662 06b0 79873F6E 		.word	1849657209
 663 06b4 94BE0AED 		.word	-318062956
 664 06b8 393583AD 		.word	-1383910087
 665 06bc 8B8940B2 		.word	-1304393333
 666 06c0 BCC31F37 		.word	924828604
 667 06c4 4A5F85F6 		.word	-159031478
 668 06c8 9C9AC1D6 		.word	-691955044
 669 06cc E7D40CB6 		.word	-1240673049
 670 06d0 2E2602C9 		.word	-922606034
 671 06d4 F20E7FDC 		.word	-595652878
 672 06d8 287D15DA 		.word	-636125912
 673 06dc 736A065B 		.word	1527147123
 674 06e0 17138164 		.word	1686180631
 675 06e4 79873F6E 		.word	1849657209
 676 06e8 94BE0AED 		.word	-318062956
 677 06ec 393583AD 		.word	-1383910087
 678 06f0 8B8940B2 		.word	-1304393333
 679 06f4 BCC31F37 		.word	924828604
 680 06f8 4A5F85F6 		.word	-159031478
 681 06fc 60EB6222 		.word	576908128
 682 0700 902CEFF0 		.word	-252760944
 683 0704 C78DD257 		.word	1473416647
 684 0708 A13DA766 		.word	1722236321
 685 070c B0753111 		.word	288454064
 686 0710 489677F8 		.word	-126380472
 687 0714 E346E9AB 		.word	-1410775325
 688 0718 D09E5333 		.word	861118160
 689 071c D8BA9808 		.word	144227032
 690 0720 24CB3BFC 		.word	-63190236
 691 0724 71A3F455 		.word	1442095985
 692 0728 68CFA919 		.word	430559080
 693 072c A9196C5D 		.word	1567365545
 694 0730 4C0492E5 		.word	-443415476
 695 0734 1DFEB851 		.word	1371078173
 696 0738 FA2AB4E7 		.word	-407622918
 697 073c D40CB62E 		.word	783682772
 698 0740 2602C9F2 		.word	-221707738
ARM GAS  /tmp/cczWrdyg.s 			page 13


 699 0744 0E7FDC28 		.word	685539086
 700 0748 7D15DA73 		.word	1943672189
 701 074c 6A065B17 		.word	391841386
 702 0750 13816479 		.word	2036629779
 703 0754 873F6E94 		.word	-1804714105
 704 0758 BE0AED39 		.word	971836094
 705 075c F20E7FDC 		.word	-595652878
 706 0760 287D15DA 		.word	-636125912
 707 0764 736A065B 		.word	1527147123
 708 0768 17138164 		.word	1686180631
 709 076c 79873F6E 		.word	1849657209
 710 0770 94BE0AED 		.word	-318062956
 711 0774 393583AD 		.word	-1383910087
 712 0778 8B8940B2 		.word	-1304393333
 713 077c BCC31F37 		.word	924828604
 714 0780 4A5F85F6 		.word	-159031478
 715 0784 9C9AC1D6 		.word	-691955044
 716 0788 C5442059 		.word	1495286981
 717 078c 3BFC71A3 		.word	-1552810949
 718 0790 F45568CF 		.word	-815245836
 719 0794 A9196C5D 		.word	1567365545
 720 0798 4C0492E5 		.word	-443415476
 721 079c 1DFEB851 		.word	1371078173
 722 07a0 FA2AB4E7 		.word	-407622918
 723 07a4 D40CB62E 		.word	783682772
 724 07a8 2602C9F2 		.word	-221707738
 725 07ac 0E7FDC28 		.word	685539086
 726 07b0 7D15DA73 		.word	1943672189
 727 07b4 6A065B17 		.word	391841386
 728 07b8 13816479 		.word	2036629779
 729 07bc 442059DE 		.word	-564584380
 730 07c0 E18F1BA5 		.word	-1524920351
 731 07c4 AF427B4E 		.word	1316700847
 732 07c8 CD60EB62 		.word	1659592909
 733 07cc 22902CEF 		.word	-282292190
 734 07d0 F0C78DD2 		.word	-762460176
 735 07d4 57A13DA7 		.word	-1489133225
 736 07d8 66B07531 		.word	829796454
 737 07dc 11489677 		.word	2006337553
 738 07e0 F8E346E9 		.word	-381230088
 739 07e4 ABD09E53 		.word	1402917035
 740 07e8 33D8BA98 		.word	-1732585421
 741 07ec 8DD257A1 		.word	-1588079987
 742 07f0 3DA766B0 		.word	-1335449795
 743 07f4 75311148 		.word	1209086325
 744 07f8 9677F8E3 		.word	-470255722
 745 07fc 46E9ABD0 		.word	-794039994
 746 0800 9E5333D8 		.word	-667724898
 747 0804 BA980824 		.word	604543162
 748 0808 CB3BFC71 		.word	1912355787
 749 080c A3F45568 		.word	1750463651
 750 0810 CFA9196C 		.word	1813621199
 751 0814 5D4C0492 		.word	-1845212067
 752 0818 E51DFEB8 		.word	-1191305755
 753 081c D6C54420 		.word	541378006
 754 0820 59DEE18F 		.word	-1881022887
 755 0824 1BA5AF42 		.word	1118807323
ARM GAS  /tmp/cczWrdyg.s 			page 14


 756 0828 7B4ECD60 		.word	1624067707
 757 082c EB622290 		.word	-1876794645
 758 0830 2CEFF0C7 		.word	-940511444
 759 0834 8DD257A1 		.word	-1588079987
 760 0838 3DA766B0 		.word	-1335449795
 761 083c 75311148 		.word	1209086325
 762 0840 9677F8E3 		.word	-470255722
 763 0844 46E9ABD0 		.word	-794039994
 764 0848 9E5333D8 		.word	-667724898
 765 084c 1F374A5F 		.word	1598699295
 766 0850 85F69C9A 		.word	-1700989307
 767 0854 C1D6C544 		.word	1153816257
 768 0858 2059DEE1 		.word	-505521888
 769 085c 8F1BA5AF 		.word	-1348134001
 770 0860 427B4ECD 		.word	-850494654
 771 0864 60EB6222 		.word	576908128
 772 0868 902CEFF0 		.word	-252760944
 773 086c C78DD257 		.word	1473416647
 774 0870 A13DA766 		.word	1722236321
 775 0874 B0753111 		.word	288454064
 776 0878 489677F8 		.word	-126380472
 777              		.comm	rr,5,4
 778              		.global	compile_info
 779              		.align	2
 782              	compile_info:
 783 087c 75626572 		.ascii	"ubertooth 2015-10-R1 (root@weiping) Mon May  2 13:4"
 783      746F6F74 
 783      68203230 
 783      31352D31 
 783      302D5231 
 784 08af 393A3135 		.ascii	"9:15 KST 2016\000"
 784      204B5354 
 784      20323031 
 784      3600
 785              		.comm	clkn,4,4
 786              		.global	hop_mode
 787              		.bss
 790              	hop_mode:
 791 0000 00       		.space	1
 792              		.global	do_hop
 795              	do_hop:
 796 0001 00       		.space	1
 797              		.global	cs_no_squelch
 800              	cs_no_squelch:
 801 0002 00       		.space	1
 802              		.global	cs_threshold_req
 803              		.data
 806              	cs_threshold_req:
 807 0004 88       		.byte	-120
 808              		.global	cs_threshold_cur
 811              	cs_threshold_cur:
 812 0005 88       		.byte	-120
 813              		.comm	cs_trigger,1,1
 814              		.comm	keepalive_trigger,1,1
 815              		.comm	cs_timestamp,4,4
 816              		.global	hop_direct_channel
 817              		.bss
ARM GAS  /tmp/cczWrdyg.s 			page 15


 818 0003 00       		.align	1
 821              	hop_direct_channel:
 822 0004 0000     		.space	2
 823              		.global	clock_trim
 824 0006 0000     		.align	2
 827              	clock_trim:
 828 0008 00000000 		.space	4
 829              		.comm	idle_buf_clkn_high,4,4
 830              		.comm	active_buf_clkn_high,4,4
 831              		.comm	idle_buf_clk100ns,4,4
 832              		.comm	active_buf_clk100ns,4,4
 833              		.global	idle_buf_channel
 834              		.align	1
 837              	idle_buf_channel:
 838 000c 0000     		.space	2
 839              		.global	active_buf_channel
 840              		.align	1
 843              	active_buf_channel:
 844 000e 0000     		.space	2
 845              		.global	slave_mac_address
 846              		.align	2
 849              	slave_mac_address:
 850 0010 00000000 		.space	6
 850      0000
 851              		.comm	rxbuf1,50,4
 852              		.comm	rxbuf2,50,4
 853              		.global	active_rxbuf
 854              		.data
 855 0006 0000     		.align	2
 858              	active_rxbuf:
 859 0008 00000000 		.word	rxbuf1
 860              		.global	idle_rxbuf
 861              		.align	2
 864              	idle_rxbuf:
 865 000c 00000000 		.word	rxbuf2
 866              		.global	le
 867              		.align	2
 870              	le:
 871 0010 D6BE898E 		.word	-1903575338
 872 0014 7D6B     		.short	27517
 873 0016 7191     		.short	-28303
 874 0018 55555500 		.word	5592405
 875 001c AAAAAA00 		.word	11184810
 876 0020 01000000 		.word	1
 877 0024 00       		.byte	0
 878 0025 000000   		.space	3
 879 0028 00000000 		.word	0
 880 002c 00000000 		.space	32
 880      00000000 
 880      00000000 
 880      00000000 
 880      00000000 
 881 004c 00000000 		.word	0
 882 0050 00000000 		.word	0
 883              		.comm	le_promisc,264,4
 884              		.global	le_jam_count
 885              		.bss
ARM GAS  /tmp/cczWrdyg.s 			page 16


 886 0016 0000     		.align	2
 889              	le_jam_count:
 890 0018 00000000 		.space	4
 891              		.global	data_cb
 892              		.align	2
 895              	data_cb:
 896 001c 00000000 		.space	4
 897              		.global	packet_cb
 898              		.align	2
 901              	packet_cb:
 902 0020 00000000 		.space	4
 903              		.global	rssi_iir
 904              		.align	2
 907              	rssi_iir:
 908 0024 00000000 		.space	158
 908      00000000 
 908      00000000 
 908      00000000 
 908      00000000 
 909              		.comm	unpacked,800,4
 910              		.global	mode
 913              	mode:
 914 00c2 00       		.space	1
 915              		.global	requested_mode
 918              	requested_mode:
 919 00c3 00       		.space	1
 920              		.global	jam_mode
 923              	jam_mode:
 924 00c4 00       		.space	1
 925              		.global	ego_mode
 928              	ego_mode:
 929 00c5 00       		.space	1
 930              		.global	modulation
 933              	modulation:
 934 00c6 00       		.space	1
 935              		.global	channel
 936              		.data
 937              		.align	1
 940              	channel:
 941 0054 8909     		.short	2441
 942              		.global	requested_channel
 943              		.bss
 944 00c7 00       		.align	1
 947              	requested_channel:
 948 00c8 0000     		.space	2
 949              		.global	saved_request
 950              		.align	1
 953              	saved_request:
 954 00ca 0000     		.space	2
 955              		.global	low_freq
 956              		.data
 957              		.align	1
 960              	low_freq:
 961 0056 6009     		.short	2400
 962              		.global	high_freq
 963              		.align	1
 966              	high_freq:
ARM GAS  /tmp/cczWrdyg.s 			page 17


 967 0058 B309     		.short	2483
 968              		.global	rssi_threshold
 971              	rssi_threshold:
 972 005a E2       		.byte	-30
 973              		.comm	rx_dma_lli1,16,4
 974              		.comm	rx_dma_lli2,16,4
 975              		.comm	le_dma_lli,176,4
 976              		.comm	rx_tc,4,4
 977              		.comm	rx_err,4,4
 978              		.global	status
 979              		.bss
 982              	status:
 983 00cc 00       		.space	1
 984              		.comm	rssi_max,1,1
 985              		.comm	rssi_min,1,1
 986              		.global	rssi_count
 989              	rssi_count:
 990 00cd 00       		.space	1
 991              		.global	rssi_sum
 992 00ce 0000     		.align	2
 995              	rssi_sum:
 996 00d0 00000000 		.space	4
 997              		.section	.text.rssi_reset,"ax",%progbits
 998              		.align	2
 999              		.thumb
 1000              		.thumb_func
 1002              	rssi_reset:
 1003              	.LFB0:
 1004              		.file 1 "bluetooth_rxtx.c"
   1:bluetooth_rxtx.c **** /*
   2:bluetooth_rxtx.c ****  * Copyright 2010-2013 Michael Ossmann
   3:bluetooth_rxtx.c ****  * Copyright 2011-2013 Dominic Spill
   4:bluetooth_rxtx.c ****  *
   5:bluetooth_rxtx.c ****  * This file is part of Project Ubertooth.
   6:bluetooth_rxtx.c ****  *
   7:bluetooth_rxtx.c ****  * This program is free software; you can redistribute it and/or modify
   8:bluetooth_rxtx.c ****  * it under the terms of the GNU General Public License as published by
   9:bluetooth_rxtx.c ****  * the Free Software Foundation; either version 2, or (at your option)
  10:bluetooth_rxtx.c ****  * any later version.
  11:bluetooth_rxtx.c ****  *
  12:bluetooth_rxtx.c ****  * This program is distributed in the hope that it will be useful,
  13:bluetooth_rxtx.c ****  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:bluetooth_rxtx.c ****  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:bluetooth_rxtx.c ****  * GNU General Public License for more details.
  16:bluetooth_rxtx.c ****  *
  17:bluetooth_rxtx.c ****  * You should have received a copy of the GNU General Public License
  18:bluetooth_rxtx.c ****  * along with this program; see the file COPYING.  If not, write to
  19:bluetooth_rxtx.c ****  * the Free Software Foundation, Inc., 51 Franklin Street,
  20:bluetooth_rxtx.c ****  * Boston, MA 02110-1301, USA.
  21:bluetooth_rxtx.c ****  */
  22:bluetooth_rxtx.c **** 
  23:bluetooth_rxtx.c **** #include <string.h>
  24:bluetooth_rxtx.c **** 
  25:bluetooth_rxtx.c **** #include "ubertooth.h"
  26:bluetooth_rxtx.c **** #include "ubertooth_usb.h"
  27:bluetooth_rxtx.c **** #include "ubertooth_interface.h"
  28:bluetooth_rxtx.c **** #include "bluetooth.h"
ARM GAS  /tmp/cczWrdyg.s 			page 18


  29:bluetooth_rxtx.c **** #include "bluetooth_le.h"
  30:bluetooth_rxtx.c **** #include "cc2400_rangetest.h"
  31:bluetooth_rxtx.c **** #include "ego.h"
  32:bluetooth_rxtx.c **** 
  33:bluetooth_rxtx.c **** #define MIN(x,y)	((x)<(y)?(x):(y))
  34:bluetooth_rxtx.c **** #define MAX(x,y)	((x)>(y)?(x):(y))
  35:bluetooth_rxtx.c **** 
  36:bluetooth_rxtx.c **** /* build info */
  37:bluetooth_rxtx.c **** const char compile_info[] =
  38:bluetooth_rxtx.c **** 	"ubertooth " GIT_REVISION " (" COMPILE_BY "@" COMPILE_HOST ") " TIMESTAMP;
  39:bluetooth_rxtx.c **** 
  40:bluetooth_rxtx.c **** /*
  41:bluetooth_rxtx.c ****  * CLK100NS is a free-running clock with a period of 100 ns.  It resets every
  42:bluetooth_rxtx.c ****  * 2^15 * 10^5 cycles (about 5.5 minutes) - computed from clkn and timer0 (T0TC)
  43:bluetooth_rxtx.c ****  *
  44:bluetooth_rxtx.c ****  * clkn is the native (local) clock as defined in the Bluetooth specification.
  45:bluetooth_rxtx.c ****  * It advances 3200 times per second.  Two clkn periods make a Bluetooth time
  46:bluetooth_rxtx.c ****  * slot.
  47:bluetooth_rxtx.c ****  */
  48:bluetooth_rxtx.c **** 
  49:bluetooth_rxtx.c **** volatile u32 clkn;                       // clkn 3200 Hz counter
  50:bluetooth_rxtx.c **** #define CLK100NS (3125*(clkn & 0xfffff) + T0TC)
  51:bluetooth_rxtx.c **** #define LE_BASECLK (12500)               // 1.25 ms in units of 100ns
  52:bluetooth_rxtx.c **** 
  53:bluetooth_rxtx.c **** #define HOP_NONE      0
  54:bluetooth_rxtx.c **** #define HOP_SWEEP     1
  55:bluetooth_rxtx.c **** #define HOP_BLUETOOTH 2
  56:bluetooth_rxtx.c **** #define HOP_BTLE      3
  57:bluetooth_rxtx.c **** #define HOP_DIRECT    4
  58:bluetooth_rxtx.c **** 
  59:bluetooth_rxtx.c **** #define CS_THRESHOLD_DEFAULT (uint8_t)(-120)
  60:bluetooth_rxtx.c **** #define CS_HOLD_TIME  2                     // min pkts to send on trig (>=1)
  61:bluetooth_rxtx.c **** u8 hop_mode = HOP_NONE;
  62:bluetooth_rxtx.c **** volatile u8 do_hop = 0;                     // set by timer interrupt
  63:bluetooth_rxtx.c **** 
  64:bluetooth_rxtx.c **** u8 cs_no_squelch = 0;                       // rx all packets if set
  65:bluetooth_rxtx.c **** int8_t cs_threshold_req=CS_THRESHOLD_DEFAULT; // requested CS threshold in dBm
  66:bluetooth_rxtx.c **** int8_t cs_threshold_cur=CS_THRESHOLD_DEFAULT; // current CS threshold in dBm
  67:bluetooth_rxtx.c **** volatile u8 cs_trigger;                     // set by intr on P2.2 falling (CS)
  68:bluetooth_rxtx.c **** volatile u8 keepalive_trigger;              // set by timer 1/s
  69:bluetooth_rxtx.c **** volatile u32 cs_timestamp;                  // CLK100NS at time of cs_trigger
  70:bluetooth_rxtx.c **** u16 hop_direct_channel = 0;                 // for hopping directly to a channel
  71:bluetooth_rxtx.c **** int clock_trim = 0;                         // to counteract clock drift
  72:bluetooth_rxtx.c **** volatile u32 idle_buf_clkn_high;
  73:bluetooth_rxtx.c **** volatile u32 active_buf_clkn_high;
  74:bluetooth_rxtx.c **** volatile u32 idle_buf_clk100ns;
  75:bluetooth_rxtx.c **** volatile u32 active_buf_clk100ns;
  76:bluetooth_rxtx.c **** volatile u16 idle_buf_channel = 0;
  77:bluetooth_rxtx.c **** volatile u16 active_buf_channel = 0;
  78:bluetooth_rxtx.c **** u8 slave_mac_address[6] = { 0, };
  79:bluetooth_rxtx.c **** 
  80:bluetooth_rxtx.c **** /* DMA buffers */
  81:bluetooth_rxtx.c **** u8 rxbuf1[DMA_SIZE];
  82:bluetooth_rxtx.c **** u8 rxbuf2[DMA_SIZE];
  83:bluetooth_rxtx.c **** 
  84:bluetooth_rxtx.c **** /*
  85:bluetooth_rxtx.c ****  * The active buffer is the one with an active DMA transfer.
ARM GAS  /tmp/cczWrdyg.s 			page 19


  86:bluetooth_rxtx.c ****  * The idle buffer is the one we can read/write between transfers.
  87:bluetooth_rxtx.c ****  */
  88:bluetooth_rxtx.c **** u8 *active_rxbuf = &rxbuf1[0];
  89:bluetooth_rxtx.c **** u8 *idle_rxbuf = &rxbuf2[0];
  90:bluetooth_rxtx.c **** 
  91:bluetooth_rxtx.c **** le_state_t le = {
  92:bluetooth_rxtx.c **** 	.access_address = 0x8e89bed6,           // advertising channel access address
  93:bluetooth_rxtx.c **** 	.synch = 0x6b7d,                        // bit-reversed adv channel AA
  94:bluetooth_rxtx.c **** 	.syncl = 0x9171,
  95:bluetooth_rxtx.c **** 	.crc_init  = 0x555555,                  // advertising channel CRCInit
  96:bluetooth_rxtx.c **** 	.crc_init_reversed = 0xAAAAAA,
  97:bluetooth_rxtx.c **** 	.crc_verify = 1,
  98:bluetooth_rxtx.c **** 
  99:bluetooth_rxtx.c **** 	.link_state = LINK_INACTIVE,
 100:bluetooth_rxtx.c **** 	.conn_epoch = 0,
 101:bluetooth_rxtx.c **** 	.target_set = 0,
 102:bluetooth_rxtx.c **** 	.last_packet = 0,
 103:bluetooth_rxtx.c **** };
 104:bluetooth_rxtx.c **** 
 105:bluetooth_rxtx.c **** typedef struct _le_promisc_active_aa_t {
 106:bluetooth_rxtx.c **** 	u32 aa;
 107:bluetooth_rxtx.c **** 	int count;
 108:bluetooth_rxtx.c **** } le_promisc_active_aa_t;
 109:bluetooth_rxtx.c **** 
 110:bluetooth_rxtx.c **** typedef struct _le_promisc_state_t {
 111:bluetooth_rxtx.c **** 	// LFU cache of recently seen AA's
 112:bluetooth_rxtx.c **** 	le_promisc_active_aa_t active_aa[32];
 113:bluetooth_rxtx.c **** 
 114:bluetooth_rxtx.c **** 	// recovering hop interval
 115:bluetooth_rxtx.c **** 	u32 smallest_hop_interval;
 116:bluetooth_rxtx.c **** 	int consec_intervals;
 117:bluetooth_rxtx.c **** } le_promisc_state_t;
 118:bluetooth_rxtx.c **** le_promisc_state_t le_promisc;
 119:bluetooth_rxtx.c **** #define AA_LIST_SIZE (int)(sizeof(le_promisc.active_aa) / sizeof(le_promisc_active_aa_t))
 120:bluetooth_rxtx.c **** 
 121:bluetooth_rxtx.c **** /* LE jamming */
 122:bluetooth_rxtx.c **** #define JAM_COUNT_DEFAULT 40
 123:bluetooth_rxtx.c **** int le_jam_count = 0;
 124:bluetooth_rxtx.c **** 
 125:bluetooth_rxtx.c **** /* set LE access address */
 126:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa);
 127:bluetooth_rxtx.c **** 
 128:bluetooth_rxtx.c **** typedef int (*data_cb_t)(char *);
 129:bluetooth_rxtx.c **** data_cb_t data_cb = NULL;
 130:bluetooth_rxtx.c **** 
 131:bluetooth_rxtx.c **** typedef void (*packet_cb_t)(u8 *);
 132:bluetooth_rxtx.c **** packet_cb_t packet_cb = NULL;
 133:bluetooth_rxtx.c **** 
 134:bluetooth_rxtx.c **** /* Moving average (IIR) of average RSSI of packets as scaled integers (x256). */
 135:bluetooth_rxtx.c **** int16_t rssi_iir[79] = {0};
 136:bluetooth_rxtx.c **** #define RSSI_IIR_ALPHA 3       // 3/256 = .012
 137:bluetooth_rxtx.c **** 
 138:bluetooth_rxtx.c **** /*
 139:bluetooth_rxtx.c ****  * CLK_TUNE_TIME is the duration in units of 100 ns that we reserve for tuning
 140:bluetooth_rxtx.c ****  * the radio while frequency hopping.  We start the tuning process
 141:bluetooth_rxtx.c ****  * CLK_TUNE_TIME * 100 ns prior to the start of an upcoming time slot.
 142:bluetooth_rxtx.c **** */
ARM GAS  /tmp/cczWrdyg.s 			page 20


 143:bluetooth_rxtx.c **** #define CLK_TUNE_TIME   2250
 144:bluetooth_rxtx.c **** 
 145:bluetooth_rxtx.c **** /* Unpacked symbol buffers (two rxbufs) */
 146:bluetooth_rxtx.c **** char unpacked[DMA_SIZE*8*2];
 147:bluetooth_rxtx.c **** 
 148:bluetooth_rxtx.c **** volatile u8 mode = MODE_IDLE;
 149:bluetooth_rxtx.c **** volatile u8 requested_mode = MODE_IDLE;
 150:bluetooth_rxtx.c **** volatile u8 jam_mode = JAM_NONE;
 151:bluetooth_rxtx.c **** volatile u8 ego_mode = 0;
 152:bluetooth_rxtx.c **** volatile u8 modulation = MOD_BT_BASIC_RATE;
 153:bluetooth_rxtx.c **** volatile u16 channel = 2441;
 154:bluetooth_rxtx.c **** volatile u16 requested_channel = 0;
 155:bluetooth_rxtx.c **** volatile u16 saved_request = 0;
 156:bluetooth_rxtx.c **** volatile u16 low_freq = 2400;
 157:bluetooth_rxtx.c **** volatile u16 high_freq = 2483;
 158:bluetooth_rxtx.c **** volatile int8_t rssi_threshold = -30;  // -54dBm - 30 = -84dBm
 159:bluetooth_rxtx.c **** 
 160:bluetooth_rxtx.c **** /* DMA linked list items */
 161:bluetooth_rxtx.c **** typedef struct {
 162:bluetooth_rxtx.c **** 	u32 src;
 163:bluetooth_rxtx.c **** 	u32 dest;
 164:bluetooth_rxtx.c **** 	u32 next_lli;
 165:bluetooth_rxtx.c **** 	u32 control;
 166:bluetooth_rxtx.c **** } dma_lli;
 167:bluetooth_rxtx.c **** 
 168:bluetooth_rxtx.c **** dma_lli rx_dma_lli1;
 169:bluetooth_rxtx.c **** dma_lli rx_dma_lli2;
 170:bluetooth_rxtx.c **** 
 171:bluetooth_rxtx.c **** dma_lli le_dma_lli[11]; // 11 x 4 bytes
 172:bluetooth_rxtx.c **** 
 173:bluetooth_rxtx.c **** /* rx terminal count and error interrupt counters */
 174:bluetooth_rxtx.c **** volatile u32 rx_tc;
 175:bluetooth_rxtx.c **** volatile u32 rx_err;
 176:bluetooth_rxtx.c **** 
 177:bluetooth_rxtx.c **** /* status information byte */
 178:bluetooth_rxtx.c **** volatile u8 status = 0;
 179:bluetooth_rxtx.c **** 
 180:bluetooth_rxtx.c **** #define DMA_OVERFLOW  0x01
 181:bluetooth_rxtx.c **** #define DMA_ERROR     0x02
 182:bluetooth_rxtx.c **** #define FIFO_OVERFLOW 0x04
 183:bluetooth_rxtx.c **** #define CS_TRIGGER    0x08
 184:bluetooth_rxtx.c **** #define RSSI_TRIGGER  0x10
 185:bluetooth_rxtx.c **** 
 186:bluetooth_rxtx.c **** /*
 187:bluetooth_rxtx.c ****  * RSSI
 188:bluetooth_rxtx.c ****  */
 189:bluetooth_rxtx.c **** int8_t rssi_max;
 190:bluetooth_rxtx.c **** int8_t rssi_min;
 191:bluetooth_rxtx.c **** uint8_t rssi_count = 0;
 192:bluetooth_rxtx.c **** int32_t rssi_sum = 0;
 193:bluetooth_rxtx.c **** 
 194:bluetooth_rxtx.c **** static void rssi_reset(void)
 195:bluetooth_rxtx.c **** {
 1005              		.loc 1 195 0
 1006              		.cfi_startproc
 1007              		@ args = 0, pretend = 0, frame = 0
 1008              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cczWrdyg.s 			page 21


 1009              		@ link register save eliminated.
 1010 0000 80B4     		push	{r7}
 1011              		.cfi_def_cfa_offset 4
 1012              		.cfi_offset 7, -4
 1013 0002 00AF     		add	r7, sp, #0
 1014              		.cfi_def_cfa_register 7
 196:bluetooth_rxtx.c **** 	rssi_count = 0;
 1015              		.loc 1 196 0
 1016 0004 074B     		ldr	r3, .L2
 1017 0006 0022     		movs	r2, #0
 1018 0008 1A70     		strb	r2, [r3]
 197:bluetooth_rxtx.c **** 	rssi_sum = 0;
 1019              		.loc 1 197 0
 1020 000a 074B     		ldr	r3, .L2+4
 1021 000c 0022     		movs	r2, #0
 1022 000e 1A60     		str	r2, [r3]
 198:bluetooth_rxtx.c **** 	rssi_max = INT8_MIN;
 1023              		.loc 1 198 0
 1024 0010 064B     		ldr	r3, .L2+8
 1025 0012 8022     		movs	r2, #128
 1026 0014 1A70     		strb	r2, [r3]
 199:bluetooth_rxtx.c **** 	rssi_min = INT8_MAX;
 1027              		.loc 1 199 0
 1028 0016 064B     		ldr	r3, .L2+12
 1029 0018 7F22     		movs	r2, #127
 1030 001a 1A70     		strb	r2, [r3]
 200:bluetooth_rxtx.c **** }
 1031              		.loc 1 200 0
 1032 001c BD46     		mov	sp, r7
 1033              		.cfi_def_cfa_register 13
 1034              		@ sp needed
 1035 001e 5DF8047B 		ldr	r7, [sp], #4
 1036              		.cfi_restore 7
 1037              		.cfi_def_cfa_offset 0
 1038 0022 7047     		bx	lr
 1039              	.L3:
 1040              		.align	2
 1041              	.L2:
 1042 0024 00000000 		.word	rssi_count
 1043 0028 00000000 		.word	rssi_sum
 1044 002c 00000000 		.word	rssi_max
 1045 0030 00000000 		.word	rssi_min
 1046              		.cfi_endproc
 1047              	.LFE0:
 1049              		.section	.text.rssi_add,"ax",%progbits
 1050              		.align	2
 1051              		.thumb
 1052              		.thumb_func
 1054              	rssi_add:
 1055              	.LFB1:
 201:bluetooth_rxtx.c **** 
 202:bluetooth_rxtx.c **** static void rssi_add(int8_t v)
 203:bluetooth_rxtx.c **** {
 1056              		.loc 1 203 0
 1057              		.cfi_startproc
 1058              		@ args = 0, pretend = 0, frame = 8
 1059              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  /tmp/cczWrdyg.s 			page 22


 1060              		@ link register save eliminated.
 1061 0000 80B4     		push	{r7}
 1062              		.cfi_def_cfa_offset 4
 1063              		.cfi_offset 7, -4
 1064 0002 83B0     		sub	sp, sp, #12
 1065              		.cfi_def_cfa_offset 16
 1066 0004 00AF     		add	r7, sp, #0
 1067              		.cfi_def_cfa_register 7
 1068 0006 0346     		mov	r3, r0
 1069 0008 FB71     		strb	r3, [r7, #7]
 204:bluetooth_rxtx.c **** 	rssi_max = (v > rssi_max) ? v : rssi_max;
 1070              		.loc 1 204 0
 1071 000a 144B     		ldr	r3, .L5
 1072 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1073 000e 5AB2     		sxtb	r2, r3
 1074 0010 97F90730 		ldrsb	r3, [r7, #7]
 1075 0014 9342     		cmp	r3, r2
 1076 0016 B8BF     		it	lt
 1077 0018 1346     		movlt	r3, r2
 1078 001a DAB2     		uxtb	r2, r3
 1079 001c 0F4B     		ldr	r3, .L5
 1080 001e 1A70     		strb	r2, [r3]
 205:bluetooth_rxtx.c **** 	rssi_min = (v < rssi_min) ? v : rssi_min;
 1081              		.loc 1 205 0
 1082 0020 0F4B     		ldr	r3, .L5+4
 1083 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1084 0024 5AB2     		sxtb	r2, r3
 1085 0026 97F90730 		ldrsb	r3, [r7, #7]
 1086 002a 9342     		cmp	r3, r2
 1087 002c A8BF     		it	ge
 1088 002e 1346     		movge	r3, r2
 1089 0030 DAB2     		uxtb	r2, r3
 1090 0032 0B4B     		ldr	r3, .L5+4
 1091 0034 1A70     		strb	r2, [r3]
 206:bluetooth_rxtx.c **** 	rssi_sum += ((int32_t)v * 256);  // scaled int math (x256)
 1092              		.loc 1 206 0
 1093 0036 97F90730 		ldrsb	r3, [r7, #7]
 1094 003a 1A02     		lsls	r2, r3, #8
 1095 003c 094B     		ldr	r3, .L5+8
 1096 003e 1B68     		ldr	r3, [r3]
 1097 0040 1344     		add	r3, r3, r2
 1098 0042 084A     		ldr	r2, .L5+8
 1099 0044 1360     		str	r3, [r2]
 207:bluetooth_rxtx.c **** 	rssi_count += 1;
 1100              		.loc 1 207 0
 1101 0046 084B     		ldr	r3, .L5+12
 1102 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1103 004a 0133     		adds	r3, r3, #1
 1104 004c DAB2     		uxtb	r2, r3
 1105 004e 064B     		ldr	r3, .L5+12
 1106 0050 1A70     		strb	r2, [r3]
 208:bluetooth_rxtx.c **** }
 1107              		.loc 1 208 0
 1108 0052 0C37     		adds	r7, r7, #12
 1109              		.cfi_def_cfa_offset 4
 1110 0054 BD46     		mov	sp, r7
 1111              		.cfi_def_cfa_register 13
ARM GAS  /tmp/cczWrdyg.s 			page 23


 1112              		@ sp needed
 1113 0056 5DF8047B 		ldr	r7, [sp], #4
 1114              		.cfi_restore 7
 1115              		.cfi_def_cfa_offset 0
 1116 005a 7047     		bx	lr
 1117              	.L6:
 1118              		.align	2
 1119              	.L5:
 1120 005c 00000000 		.word	rssi_max
 1121 0060 00000000 		.word	rssi_min
 1122 0064 00000000 		.word	rssi_sum
 1123 0068 00000000 		.word	rssi_count
 1124              		.cfi_endproc
 1125              	.LFE1:
 1127              		.section	.text.rssi_iir_update,"ax",%progbits
 1128              		.align	2
 1129              		.thumb
 1130              		.thumb_func
 1132              	rssi_iir_update:
 1133              	.LFB2:
 209:bluetooth_rxtx.c **** 
 210:bluetooth_rxtx.c **** /* For sweep mode, update IIR per channel. Otherwise, use single value. */
 211:bluetooth_rxtx.c **** static void rssi_iir_update(void)
 212:bluetooth_rxtx.c **** {
 1134              		.loc 1 212 0
 1135              		.cfi_startproc
 1136              		@ args = 0, pretend = 0, frame = 16
 1137              		@ frame_needed = 1, uses_anonymous_args = 0
 1138              		@ link register save eliminated.
 1139 0000 80B4     		push	{r7}
 1140              		.cfi_def_cfa_offset 4
 1141              		.cfi_offset 7, -4
 1142 0002 85B0     		sub	sp, sp, #20
 1143              		.cfi_def_cfa_offset 24
 1144 0004 00AF     		add	r7, sp, #0
 1145              		.cfi_def_cfa_register 7
 213:bluetooth_rxtx.c **** 	int i;
 214:bluetooth_rxtx.c **** 	int32_t avg;
 215:bluetooth_rxtx.c **** 	int32_t rssi_iir_acc;
 216:bluetooth_rxtx.c **** 
 217:bluetooth_rxtx.c **** 	/* Use array to track 79 Bluetooth channels, or just first
 218:bluetooth_rxtx.c **** 	 * slot of array if not sweeping. */
 219:bluetooth_rxtx.c **** 	if (hop_mode > 0)
 1146              		.loc 1 219 0
 1147 0006 1F4B     		ldr	r3, .L13
 1148 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1149 000a 002B     		cmp	r3, #0
 1150 000c 06D0     		beq	.L8
 220:bluetooth_rxtx.c **** 		i = channel - 2402;
 1151              		.loc 1 220 0
 1152 000e 1E4B     		ldr	r3, .L13+4
 1153 0010 1B88     		ldrh	r3, [r3]	@ movhi
 1154 0012 9BB2     		uxth	r3, r3
 1155 0014 A3F66213 		subw	r3, r3, #2402
 1156 0018 FB60     		str	r3, [r7, #12]
 1157 001a 01E0     		b	.L9
 1158              	.L8:
ARM GAS  /tmp/cczWrdyg.s 			page 24


 221:bluetooth_rxtx.c **** 	else
 222:bluetooth_rxtx.c **** 		i = 0;
 1159              		.loc 1 222 0
 1160 001c 0023     		movs	r3, #0
 1161 001e FB60     		str	r3, [r7, #12]
 1162              	.L9:
 223:bluetooth_rxtx.c **** 
 224:bluetooth_rxtx.c **** 	// IIR using scaled int math (x256)
 225:bluetooth_rxtx.c **** 	if (rssi_count != 0)
 1163              		.loc 1 225 0
 1164 0020 1A4B     		ldr	r3, .L13+8
 1165 0022 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1166 0024 002B     		cmp	r3, #0
 1167 0026 08D0     		beq	.L10
 226:bluetooth_rxtx.c **** 		avg = (rssi_sum  + 128) / rssi_count;
 1168              		.loc 1 226 0
 1169 0028 194B     		ldr	r3, .L13+12
 1170 002a 1B68     		ldr	r3, [r3]
 1171 002c 8033     		adds	r3, r3, #128
 1172 002e 174A     		ldr	r2, .L13+8
 1173 0030 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 1174 0032 93FBF2F3 		sdiv	r3, r3, r2
 1175 0036 BB60     		str	r3, [r7, #8]
 1176 0038 01E0     		b	.L11
 1177              	.L10:
 227:bluetooth_rxtx.c **** 	else
 228:bluetooth_rxtx.c **** 		avg = 0; // really an error
 1178              		.loc 1 228 0
 1179 003a 0023     		movs	r3, #0
 1180 003c BB60     		str	r3, [r7, #8]
 1181              	.L11:
 229:bluetooth_rxtx.c **** 	rssi_iir_acc = rssi_iir[i] * (256-RSSI_IIR_ALPHA);
 1182              		.loc 1 229 0
 1183 003e 154A     		ldr	r2, .L13+16
 1184 0040 FB68     		ldr	r3, [r7, #12]
 1185 0042 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1186 0046 1AB2     		sxth	r2, r3
 1187 0048 1346     		mov	r3, r2
 1188 004a 9B01     		lsls	r3, r3, #6
 1189 004c 9B1A     		subs	r3, r3, r2
 1190 004e 9B00     		lsls	r3, r3, #2
 1191 0050 1344     		add	r3, r3, r2
 1192 0052 7B60     		str	r3, [r7, #4]
 230:bluetooth_rxtx.c **** 	rssi_iir_acc += avg * RSSI_IIR_ALPHA;
 1193              		.loc 1 230 0
 1194 0054 BA68     		ldr	r2, [r7, #8]
 1195 0056 1346     		mov	r3, r2
 1196 0058 5B00     		lsls	r3, r3, #1
 1197 005a 1344     		add	r3, r3, r2
 1198 005c 7A68     		ldr	r2, [r7, #4]
 1199 005e 1344     		add	r3, r3, r2
 1200 0060 7B60     		str	r3, [r7, #4]
 231:bluetooth_rxtx.c **** 	rssi_iir[i] = (int16_t)((rssi_iir_acc + 128) / 256);
 1201              		.loc 1 231 0
 1202 0062 7B68     		ldr	r3, [r7, #4]
 1203 0064 8033     		adds	r3, r3, #128
 1204 0066 002B     		cmp	r3, #0
ARM GAS  /tmp/cczWrdyg.s 			page 25


 1205 0068 00DA     		bge	.L12
 1206 006a FF33     		adds	r3, r3, #255
 1207              	.L12:
 1208 006c 1B12     		asrs	r3, r3, #8
 1209 006e 99B2     		uxth	r1, r3
 1210 0070 084A     		ldr	r2, .L13+16
 1211 0072 FB68     		ldr	r3, [r7, #12]
 1212 0074 22F81310 		strh	r1, [r2, r3, lsl #1]	@ movhi
 232:bluetooth_rxtx.c **** }
 1213              		.loc 1 232 0
 1214 0078 1437     		adds	r7, r7, #20
 1215              		.cfi_def_cfa_offset 4
 1216 007a BD46     		mov	sp, r7
 1217              		.cfi_def_cfa_register 13
 1218              		@ sp needed
 1219 007c 5DF8047B 		ldr	r7, [sp], #4
 1220              		.cfi_restore 7
 1221              		.cfi_def_cfa_offset 0
 1222 0080 7047     		bx	lr
 1223              	.L14:
 1224 0082 00BF     		.align	2
 1225              	.L13:
 1226 0084 00000000 		.word	hop_mode
 1227 0088 00000000 		.word	channel
 1228 008c 00000000 		.word	rssi_count
 1229 0090 00000000 		.word	rssi_sum
 1230 0094 00000000 		.word	rssi_iir
 1231              		.cfi_endproc
 1232              	.LFE2:
 1234              		.section	.text.cs_threshold_set,"ax",%progbits
 1235              		.align	2
 1236              		.thumb
 1237              		.thumb_func
 1239              	cs_threshold_set:
 1240              	.LFB3:
 233:bluetooth_rxtx.c **** 
 234:bluetooth_rxtx.c **** #define CS_SAMPLES_1 1
 235:bluetooth_rxtx.c **** #define CS_SAMPLES_2 2
 236:bluetooth_rxtx.c **** #define CS_SAMPLES_4 3
 237:bluetooth_rxtx.c **** #define CS_SAMPLES_8 4
 238:bluetooth_rxtx.c **** /* Set CC2400 carrier sense threshold and store value to
 239:bluetooth_rxtx.c ****  * global. CC2400 RSSI is determined by 54dBm + level. CS threshold is
 240:bluetooth_rxtx.c ****  * in 4dBm steps, so the provided level is rounded to the nearest
 241:bluetooth_rxtx.c ****  * multiple of 4 by adding 56. Useful range is -100 to -20. */
 242:bluetooth_rxtx.c **** static void cs_threshold_set(int8_t level, u8 samples)
 243:bluetooth_rxtx.c **** {
 1241              		.loc 1 243 0
 1242              		.cfi_startproc
 1243              		@ args = 0, pretend = 0, frame = 8
 1244              		@ frame_needed = 1, uses_anonymous_args = 0
 1245 0000 80B5     		push	{r7, lr}
 1246              		.cfi_def_cfa_offset 8
 1247              		.cfi_offset 7, -8
 1248              		.cfi_offset 14, -4
 1249 0002 82B0     		sub	sp, sp, #8
 1250              		.cfi_def_cfa_offset 16
 1251 0004 00AF     		add	r7, sp, #0
ARM GAS  /tmp/cczWrdyg.s 			page 26


 1252              		.cfi_def_cfa_register 7
 1253 0006 0346     		mov	r3, r0
 1254 0008 0A46     		mov	r2, r1
 1255 000a FB71     		strb	r3, [r7, #7]
 1256 000c 1346     		mov	r3, r2
 1257 000e BB71     		strb	r3, [r7, #6]
 244:bluetooth_rxtx.c **** 	level = MIN(MAX(level,-120),(-20));
 1258              		.loc 1 244 0
 1259 0010 97F90730 		ldrsb	r3, [r7, #7]
 1260 0014 13F1140F 		cmn	r3, #20
 1261 0018 0DD0     		beq	.L16
 1262              		.loc 1 244 0 is_stmt 0 discriminator 1
 1263 001a 97F90730 		ldrsb	r3, [r7, #7]
 1264 001e 13F1130F 		cmn	r3, #19
 1265 0022 08DA     		bge	.L16
 1266              		.loc 1 244 0 discriminator 3
 1267 0024 97F90730 		ldrsb	r3, [r7, #7]
 1268 0028 6FF07702 		mvn	r2, #119
 1269 002c 9342     		cmp	r3, r2
 1270 002e B8BF     		it	lt
 1271 0030 1346     		movlt	r3, r2
 1272 0032 DBB2     		uxtb	r3, r3
 1273 0034 00E0     		b	.L17
 1274              	.L16:
 1275              		.loc 1 244 0 discriminator 4
 1276 0036 EC23     		movs	r3, #236
 1277              	.L17:
 1278              		.loc 1 244 0 discriminator 6
 1279 0038 FB71     		strb	r3, [r7, #7]
 245:bluetooth_rxtx.c **** 	cc2400_set(RSSI, (uint8_t)((level + 56) & (0x3f << 2)) | (samples&3));
 1280              		.loc 1 245 0 is_stmt 1 discriminator 6
 1281 003a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1282 003c 3833     		adds	r3, r3, #56
 1283 003e DBB2     		uxtb	r3, r3
 1284 0040 9BB2     		uxth	r3, r3
 1285 0042 03F0FC03 		and	r3, r3, #252
 1286 0046 9AB2     		uxth	r2, r3
 1287 0048 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1288 004a 9BB2     		uxth	r3, r3
 1289 004c 03F00303 		and	r3, r3, #3
 1290 0050 9BB2     		uxth	r3, r3
 1291 0052 1343     		orrs	r3, r3, r2
 1292 0054 9BB2     		uxth	r3, r3
 1293 0056 9BB2     		uxth	r3, r3
 1294 0058 0620     		movs	r0, #6
 1295 005a 1946     		mov	r1, r3
 1296 005c FFF7FEFF 		bl	cc2400_set
 246:bluetooth_rxtx.c **** 	cs_threshold_cur = level;
 1297              		.loc 1 246 0 discriminator 6
 1298 0060 084A     		ldr	r2, .L18
 1299 0062 FB79     		ldrb	r3, [r7, #7]
 1300 0064 1370     		strb	r3, [r2]
 247:bluetooth_rxtx.c **** 	cs_no_squelch = (level <= -120);
 1301              		.loc 1 247 0 discriminator 6
 1302 0066 97F90730 		ldrsb	r3, [r7, #7]
 1303 006a 13F1770F 		cmn	r3, #119
 1304 006e B4BF     		ite	lt
ARM GAS  /tmp/cczWrdyg.s 			page 27


 1305 0070 0123     		movlt	r3, #1
 1306 0072 0023     		movge	r3, #0
 1307 0074 DBB2     		uxtb	r3, r3
 1308 0076 1A46     		mov	r2, r3
 1309 0078 034B     		ldr	r3, .L18+4
 1310 007a 1A70     		strb	r2, [r3]
 248:bluetooth_rxtx.c **** }
 1311              		.loc 1 248 0 discriminator 6
 1312 007c 0837     		adds	r7, r7, #8
 1313              		.cfi_def_cfa_offset 8
 1314 007e BD46     		mov	sp, r7
 1315              		.cfi_def_cfa_register 13
 1316              		@ sp needed
 1317 0080 80BD     		pop	{r7, pc}
 1318              	.L19:
 1319 0082 00BF     		.align	2
 1320              	.L18:
 1321 0084 00000000 		.word	cs_threshold_cur
 1322 0088 00000000 		.word	cs_no_squelch
 1323              		.cfi_endproc
 1324              	.LFE3:
 1326              		.section	.text.enqueue,"ax",%progbits
 1327              		.align	2
 1328              		.thumb
 1329              		.thumb_func
 1331              	enqueue:
 1332              	.LFB4:
 249:bluetooth_rxtx.c **** 
 250:bluetooth_rxtx.c **** static int enqueue(u8 type, u8 *buf)
 251:bluetooth_rxtx.c **** {
 1333              		.loc 1 251 0
 1334              		.cfi_startproc
 1335              		@ args = 0, pretend = 0, frame = 32
 1336              		@ frame_needed = 1, uses_anonymous_args = 0
 1337 0000 80B5     		push	{r7, lr}
 1338              		.cfi_def_cfa_offset 8
 1339              		.cfi_offset 7, -8
 1340              		.cfi_offset 14, -4
 1341 0002 88B0     		sub	sp, sp, #32
 1342              		.cfi_def_cfa_offset 40
 1343 0004 00AF     		add	r7, sp, #0
 1344              		.cfi_def_cfa_register 7
 1345 0006 0346     		mov	r3, r0
 1346 0008 3960     		str	r1, [r7]
 1347 000a FB71     		strb	r3, [r7, #7]
 252:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1348              		.loc 1 252 0
 1349 000c FFF7FEFF 		bl	usb_enqueue
 1350 0010 F861     		str	r0, [r7, #28]
 253:bluetooth_rxtx.c **** 
 254:bluetooth_rxtx.c **** 	/* fail if queue is full */
 255:bluetooth_rxtx.c **** 	if (f == NULL) {
 1351              		.loc 1 255 0
 1352 0012 FB69     		ldr	r3, [r7, #28]
 1353 0014 002B     		cmp	r3, #0
 1354 0016 09D1     		bne	.L21
 256:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
ARM GAS  /tmp/cczWrdyg.s 			page 28


 1355              		.loc 1 256 0
 1356 0018 5E4B     		ldr	r3, .L29
 1357 001a 1B78     		ldrb	r3, [r3]
 1358 001c DBB2     		uxtb	r3, r3
 1359 001e 43F00403 		orr	r3, r3, #4
 1360 0022 DAB2     		uxtb	r2, r3
 1361 0024 5B4B     		ldr	r3, .L29
 1362 0026 1A70     		strb	r2, [r3]
 257:bluetooth_rxtx.c **** 		return 0;
 1363              		.loc 1 257 0
 1364 0028 0023     		movs	r3, #0
 1365 002a AFE0     		b	.L22
 1366              	.L21:
 258:bluetooth_rxtx.c **** 	}
 259:bluetooth_rxtx.c **** 
 260:bluetooth_rxtx.c **** 	f->pkt_type = type;
 1367              		.loc 1 260 0
 1368 002c FB69     		ldr	r3, [r7, #28]
 1369 002e FA79     		ldrb	r2, [r7, #7]
 1370 0030 1A70     		strb	r2, [r3]
 261:bluetooth_rxtx.c **** 	if(type == SPECAN) {
 1371              		.loc 1 261 0
 1372 0032 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 1373 0034 042B     		cmp	r3, #4
 1374 0036 13D1     		bne	.L23
 262:bluetooth_rxtx.c **** 		f->clkn_high = (clkn >> 20) & 0xff;
 1375              		.loc 1 262 0
 1376 0038 574B     		ldr	r3, .L29+4
 1377 003a 1B68     		ldr	r3, [r3]
 1378 003c 1B0D     		lsrs	r3, r3, #20
 1379 003e DAB2     		uxtb	r2, r3
 1380 0040 FB69     		ldr	r3, [r7, #28]
 1381 0042 DA70     		strb	r2, [r3, #3]
 263:bluetooth_rxtx.c **** 		f->clk100ns = CLK100NS;
 1382              		.loc 1 263 0
 1383 0044 544B     		ldr	r3, .L29+4
 1384 0046 1B68     		ldr	r3, [r3]
 1385 0048 C3F31303 		ubfx	r3, r3, #0, #20
 1386 004c 40F63542 		movw	r2, #3125
 1387 0050 02FB03F2 		mul	r2, r2, r3
 1388 0054 514B     		ldr	r3, .L29+8
 1389 0056 1B68     		ldr	r3, [r3]
 1390 0058 1A44     		add	r2, r2, r3
 1391 005a FB69     		ldr	r3, [r7, #28]
 1392 005c 5A60     		str	r2, [r3, #4]
 1393 005e 08E0     		b	.L24
 1394              	.L23:
 264:bluetooth_rxtx.c **** 	} else {
 265:bluetooth_rxtx.c **** 		f->clkn_high = idle_buf_clkn_high;
 1395              		.loc 1 265 0
 1396 0060 4F4B     		ldr	r3, .L29+12
 1397 0062 1B68     		ldr	r3, [r3]
 1398 0064 DAB2     		uxtb	r2, r3
 1399 0066 FB69     		ldr	r3, [r7, #28]
 1400 0068 DA70     		strb	r2, [r3, #3]
 266:bluetooth_rxtx.c **** 		f->clk100ns = idle_buf_clk100ns;
 1401              		.loc 1 266 0
ARM GAS  /tmp/cczWrdyg.s 			page 29


 1402 006a 4E4B     		ldr	r3, .L29+16
 1403 006c 1A68     		ldr	r2, [r3]
 1404 006e FB69     		ldr	r3, [r7, #28]
 1405 0070 5A60     		str	r2, [r3, #4]
 1406              	.L24:
 267:bluetooth_rxtx.c **** 	}
 268:bluetooth_rxtx.c **** 	f->channel = idle_buf_channel - 2402;
 1407              		.loc 1 268 0
 1408 0072 4D4B     		ldr	r3, .L29+20
 1409 0074 1B88     		ldrh	r3, [r3]	@ movhi
 1410 0076 9BB2     		uxth	r3, r3
 1411 0078 DBB2     		uxtb	r3, r3
 1412 007a 623B     		subs	r3, r3, #98
 1413 007c DAB2     		uxtb	r2, r3
 1414 007e FB69     		ldr	r3, [r7, #28]
 1415 0080 9A70     		strb	r2, [r3, #2]
 269:bluetooth_rxtx.c **** 	f->rssi_min = rssi_min;
 1416              		.loc 1 269 0
 1417 0082 4A4B     		ldr	r3, .L29+24
 1418 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1419 0086 DAB2     		uxtb	r2, r3
 1420 0088 FB69     		ldr	r3, [r7, #28]
 1421 008a 5A72     		strb	r2, [r3, #9]
 270:bluetooth_rxtx.c **** 	f->rssi_max = rssi_max;
 1422              		.loc 1 270 0
 1423 008c 484B     		ldr	r3, .L29+28
 1424 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1425 0090 DAB2     		uxtb	r2, r3
 1426 0092 FB69     		ldr	r3, [r7, #28]
 1427 0094 1A72     		strb	r2, [r3, #8]
 271:bluetooth_rxtx.c **** 	if (hop_mode != HOP_NONE)
 1428              		.loc 1 271 0
 1429 0096 474B     		ldr	r3, .L29+32
 1430 0098 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1431 009a 002B     		cmp	r3, #0
 1432 009c 11D0     		beq	.L25
 272:bluetooth_rxtx.c **** 		f->rssi_avg = (int8_t)((rssi_iir[idle_buf_channel-2402] + 128)/256);
 1433              		.loc 1 272 0
 1434 009e 424B     		ldr	r3, .L29+20
 1435 00a0 1B88     		ldrh	r3, [r3]	@ movhi
 1436 00a2 9BB2     		uxth	r3, r3
 1437 00a4 A3F66213 		subw	r3, r3, #2402
 1438 00a8 434A     		ldr	r2, .L29+36
 1439 00aa 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1440 00ae 1BB2     		sxth	r3, r3
 1441 00b0 8033     		adds	r3, r3, #128
 1442 00b2 002B     		cmp	r3, #0
 1443 00b4 00DA     		bge	.L26
 1444 00b6 FF33     		adds	r3, r3, #255
 1445              	.L26:
 1446 00b8 1B12     		asrs	r3, r3, #8
 1447 00ba DAB2     		uxtb	r2, r3
 1448 00bc FB69     		ldr	r3, [r7, #28]
 1449 00be 9A72     		strb	r2, [r3, #10]
 1450 00c0 0AE0     		b	.L27
 1451              	.L25:
 273:bluetooth_rxtx.c **** 	else
ARM GAS  /tmp/cczWrdyg.s 			page 30


 274:bluetooth_rxtx.c **** 		f->rssi_avg = (int8_t)((rssi_iir[0] + 128)/256);
 1452              		.loc 1 274 0
 1453 00c2 3D4B     		ldr	r3, .L29+36
 1454 00c4 1B88     		ldrh	r3, [r3]
 1455 00c6 1BB2     		sxth	r3, r3
 1456 00c8 8033     		adds	r3, r3, #128
 1457 00ca 002B     		cmp	r3, #0
 1458 00cc 00DA     		bge	.L28
 1459 00ce FF33     		adds	r3, r3, #255
 1460              	.L28:
 1461 00d0 1B12     		asrs	r3, r3, #8
 1462 00d2 DAB2     		uxtb	r2, r3
 1463 00d4 FB69     		ldr	r3, [r7, #28]
 1464 00d6 9A72     		strb	r2, [r3, #10]
 1465              	.L27:
 275:bluetooth_rxtx.c **** 	f->rssi_count = rssi_count;
 1466              		.loc 1 275 0
 1467 00d8 384B     		ldr	r3, .L29+40
 1468 00da 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1469 00dc FB69     		ldr	r3, [r7, #28]
 1470 00de DA72     		strb	r2, [r3, #11]
 276:bluetooth_rxtx.c **** 
 277:bluetooth_rxtx.c **** 	USRLED_SET;
 1471              		.loc 1 277 0
 1472 00e0 374B     		ldr	r3, .L29+44
 1473 00e2 0222     		movs	r2, #2
 1474 00e4 1A60     		str	r2, [r3]
 278:bluetooth_rxtx.c **** 
 279:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 280:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1475              		.loc 1 280 0
 1476 00e6 FB69     		ldr	r3, [r7, #28]
 1477 00e8 0E33     		adds	r3, r3, #14
 1478 00ea BB61     		str	r3, [r7, #24]
 281:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1479              		.loc 1 281 0
 1480 00ec 3B68     		ldr	r3, [r7]
 1481 00ee 7B61     		str	r3, [r7, #20]
 282:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1482              		.loc 1 282 0
 1483 00f0 7B69     		ldr	r3, [r7, #20]
 1484 00f2 1A68     		ldr	r2, [r3]
 1485 00f4 BB69     		ldr	r3, [r7, #24]
 1486 00f6 1A60     		str	r2, [r3]
 283:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1487              		.loc 1 283 0
 1488 00f8 BB69     		ldr	r3, [r7, #24]
 1489 00fa 0433     		adds	r3, r3, #4
 1490 00fc 7A69     		ldr	r2, [r7, #20]
 1491 00fe 5268     		ldr	r2, [r2, #4]
 1492 0100 1A60     		str	r2, [r3]
 284:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1493              		.loc 1 284 0
 1494 0102 BB69     		ldr	r3, [r7, #24]
 1495 0104 0833     		adds	r3, r3, #8
 1496 0106 7A69     		ldr	r2, [r7, #20]
 1497 0108 9268     		ldr	r2, [r2, #8]
ARM GAS  /tmp/cczWrdyg.s 			page 31


 1498 010a 1A60     		str	r2, [r3]
 285:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1499              		.loc 1 285 0
 1500 010c BB69     		ldr	r3, [r7, #24]
 1501 010e 0C33     		adds	r3, r3, #12
 1502 0110 7A69     		ldr	r2, [r7, #20]
 1503 0112 D268     		ldr	r2, [r2, #12]
 1504 0114 1A60     		str	r2, [r3]
 286:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1505              		.loc 1 286 0
 1506 0116 BB69     		ldr	r3, [r7, #24]
 1507 0118 1033     		adds	r3, r3, #16
 1508 011a 7A69     		ldr	r2, [r7, #20]
 1509 011c 1269     		ldr	r2, [r2, #16]
 1510 011e 1A60     		str	r2, [r3]
 287:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1511              		.loc 1 287 0
 1512 0120 BB69     		ldr	r3, [r7, #24]
 1513 0122 1433     		adds	r3, r3, #20
 1514 0124 7A69     		ldr	r2, [r7, #20]
 1515 0126 5269     		ldr	r2, [r2, #20]
 1516 0128 1A60     		str	r2, [r3]
 288:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1517              		.loc 1 288 0
 1518 012a BB69     		ldr	r3, [r7, #24]
 1519 012c 1833     		adds	r3, r3, #24
 1520 012e 7A69     		ldr	r2, [r7, #20]
 1521 0130 9269     		ldr	r2, [r2, #24]
 1522 0132 1A60     		str	r2, [r3]
 289:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1523              		.loc 1 289 0
 1524 0134 BB69     		ldr	r3, [r7, #24]
 1525 0136 1C33     		adds	r3, r3, #28
 1526 0138 7A69     		ldr	r2, [r7, #20]
 1527 013a D269     		ldr	r2, [r2, #28]
 1528 013c 1A60     		str	r2, [r3]
 290:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1529              		.loc 1 290 0
 1530 013e BB69     		ldr	r3, [r7, #24]
 1531 0140 2033     		adds	r3, r3, #32
 1532 0142 7A69     		ldr	r2, [r7, #20]
 1533 0144 126A     		ldr	r2, [r2, #32]
 1534 0146 1A60     		str	r2, [r3]
 291:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1535              		.loc 1 291 0
 1536 0148 BB69     		ldr	r3, [r7, #24]
 1537 014a 2433     		adds	r3, r3, #36
 1538 014c 7A69     		ldr	r2, [r7, #20]
 1539 014e 526A     		ldr	r2, [r2, #36]
 1540 0150 1A60     		str	r2, [r3]
 292:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1541              		.loc 1 292 0
 1542 0152 BB69     		ldr	r3, [r7, #24]
 1543 0154 2833     		adds	r3, r3, #40
 1544 0156 7A69     		ldr	r2, [r7, #20]
 1545 0158 926A     		ldr	r2, [r2, #40]
 1546 015a 1A60     		str	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 32


 293:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1547              		.loc 1 293 0
 1548 015c BB69     		ldr	r3, [r7, #24]
 1549 015e 2C33     		adds	r3, r3, #44
 1550 0160 7A69     		ldr	r2, [r7, #20]
 1551 0162 D26A     		ldr	r2, [r2, #44]
 1552 0164 1A60     		str	r2, [r3]
 294:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 295:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1553              		.loc 1 295 0
 1554 0166 FB69     		ldr	r3, [r7, #28]
 1555 0168 0E33     		adds	r3, r3, #14
 1556 016a 3B61     		str	r3, [r7, #16]
 296:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1557              		.loc 1 296 0
 1558 016c 3B68     		ldr	r3, [r7]
 1559 016e FB60     		str	r3, [r7, #12]
 297:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1560              		.loc 1 297 0
 1561 0170 3B69     		ldr	r3, [r7, #16]
 1562 0172 3033     		adds	r3, r3, #48
 1563 0174 FA68     		ldr	r2, [r7, #12]
 1564 0176 128E     		ldrh	r2, [r2, #48]
 1565 0178 1A80     		strh	r2, [r3]	@ movhi
 298:bluetooth_rxtx.c **** 
 299:bluetooth_rxtx.c **** 	f->status = status;
 1566              		.loc 1 299 0
 1567 017a 064B     		ldr	r3, .L29
 1568 017c 1B78     		ldrb	r3, [r3]
 1569 017e DAB2     		uxtb	r2, r3
 1570 0180 FB69     		ldr	r3, [r7, #28]
 1571 0182 5A70     		strb	r2, [r3, #1]
 300:bluetooth_rxtx.c **** 	status = 0;
 1572              		.loc 1 300 0
 1573 0184 034B     		ldr	r3, .L29
 1574 0186 0022     		movs	r2, #0
 1575 0188 1A70     		strb	r2, [r3]
 301:bluetooth_rxtx.c **** 
 302:bluetooth_rxtx.c **** 	return 1;
 1576              		.loc 1 302 0
 1577 018a 0123     		movs	r3, #1
 1578              	.L22:
 303:bluetooth_rxtx.c **** }
 1579              		.loc 1 303 0
 1580 018c 1846     		mov	r0, r3
 1581 018e 2037     		adds	r7, r7, #32
 1582              		.cfi_def_cfa_offset 8
 1583 0190 BD46     		mov	sp, r7
 1584              		.cfi_def_cfa_register 13
 1585              		@ sp needed
 1586 0192 80BD     		pop	{r7, pc}
 1587              	.L30:
 1588              		.align	2
 1589              	.L29:
 1590 0194 00000000 		.word	status
 1591 0198 00000000 		.word	clkn
 1592 019c 08400040 		.word	1073758216
ARM GAS  /tmp/cczWrdyg.s 			page 33


 1593 01a0 00000000 		.word	idle_buf_clkn_high
 1594 01a4 00000000 		.word	idle_buf_clk100ns
 1595 01a8 00000000 		.word	idle_buf_channel
 1596 01ac 00000000 		.word	rssi_min
 1597 01b0 00000000 		.word	rssi_max
 1598 01b4 00000000 		.word	hop_mode
 1599 01b8 00000000 		.word	rssi_iir
 1600 01bc 00000000 		.word	rssi_count
 1601 01c0 38C00920 		.word	537509944
 1602              		.cfi_endproc
 1603              	.LFE4:
 1605              		.section	.text.enqueue_with_ts,"ax",%progbits
 1606              		.align	2
 1607              		.global	enqueue_with_ts
 1608              		.thumb
 1609              		.thumb_func
 1611              	enqueue_with_ts:
 1612              	.LFB5:
 304:bluetooth_rxtx.c **** 
 305:bluetooth_rxtx.c **** int enqueue_with_ts(u8 type, u8 *buf, u32 ts)
 306:bluetooth_rxtx.c **** {
 1613              		.loc 1 306 0
 1614              		.cfi_startproc
 1615              		@ args = 0, pretend = 0, frame = 40
 1616              		@ frame_needed = 1, uses_anonymous_args = 0
 1617 0000 80B5     		push	{r7, lr}
 1618              		.cfi_def_cfa_offset 8
 1619              		.cfi_offset 7, -8
 1620              		.cfi_offset 14, -4
 1621 0002 8AB0     		sub	sp, sp, #40
 1622              		.cfi_def_cfa_offset 48
 1623 0004 00AF     		add	r7, sp, #0
 1624              		.cfi_def_cfa_register 7
 1625 0006 0346     		mov	r3, r0
 1626 0008 B960     		str	r1, [r7, #8]
 1627 000a 7A60     		str	r2, [r7, #4]
 1628 000c FB73     		strb	r3, [r7, #15]
 307:bluetooth_rxtx.c **** 	usb_pkt_rx *f = usb_enqueue();
 1629              		.loc 1 307 0
 1630 000e FFF7FEFF 		bl	usb_enqueue
 1631 0012 7862     		str	r0, [r7, #36]
 308:bluetooth_rxtx.c **** 
 309:bluetooth_rxtx.c **** 	/* fail if queue is full */
 310:bluetooth_rxtx.c **** 	if (f == NULL) {
 1632              		.loc 1 310 0
 1633 0014 7B6A     		ldr	r3, [r7, #36]
 1634 0016 002B     		cmp	r3, #0
 1635 0018 09D1     		bne	.L32
 311:bluetooth_rxtx.c **** 		status |= FIFO_OVERFLOW;
 1636              		.loc 1 311 0
 1637 001a 3C4B     		ldr	r3, .L34
 1638 001c 1B78     		ldrb	r3, [r3]
 1639 001e DBB2     		uxtb	r3, r3
 1640 0020 43F00403 		orr	r3, r3, #4
 1641 0024 DAB2     		uxtb	r2, r3
 1642 0026 394B     		ldr	r3, .L34
 1643 0028 1A70     		strb	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 34


 312:bluetooth_rxtx.c **** 		return 0;
 1644              		.loc 1 312 0
 1645 002a 0023     		movs	r3, #0
 1646 002c 69E0     		b	.L33
 1647              	.L32:
 313:bluetooth_rxtx.c **** 	}
 314:bluetooth_rxtx.c **** 
 315:bluetooth_rxtx.c **** 	f->clkn_high = 0;
 1648              		.loc 1 315 0
 1649 002e 7B6A     		ldr	r3, [r7, #36]
 1650 0030 0022     		movs	r2, #0
 1651 0032 DA70     		strb	r2, [r3, #3]
 316:bluetooth_rxtx.c **** 	f->clk100ns = ts;
 1652              		.loc 1 316 0
 1653 0034 7B6A     		ldr	r3, [r7, #36]
 1654 0036 7A68     		ldr	r2, [r7, #4]
 1655 0038 5A60     		str	r2, [r3, #4]
 317:bluetooth_rxtx.c **** 
 318:bluetooth_rxtx.c **** 	f->channel = channel - 2402;
 1656              		.loc 1 318 0
 1657 003a 354B     		ldr	r3, .L34+4
 1658 003c 1B88     		ldrh	r3, [r3]	@ movhi
 1659 003e 9BB2     		uxth	r3, r3
 1660 0040 DBB2     		uxtb	r3, r3
 1661 0042 623B     		subs	r3, r3, #98
 1662 0044 DAB2     		uxtb	r2, r3
 1663 0046 7B6A     		ldr	r3, [r7, #36]
 1664 0048 9A70     		strb	r2, [r3, #2]
 319:bluetooth_rxtx.c **** 	f->rssi_avg = 0;
 1665              		.loc 1 319 0
 1666 004a 7B6A     		ldr	r3, [r7, #36]
 1667 004c 0022     		movs	r2, #0
 1668 004e 9A72     		strb	r2, [r3, #10]
 320:bluetooth_rxtx.c **** 	f->rssi_count = 0;
 1669              		.loc 1 320 0
 1670 0050 7B6A     		ldr	r3, [r7, #36]
 1671 0052 0022     		movs	r2, #0
 1672 0054 DA72     		strb	r2, [r3, #11]
 321:bluetooth_rxtx.c **** 
 322:bluetooth_rxtx.c **** 	USRLED_SET;
 1673              		.loc 1 322 0
 1674 0056 2F4B     		ldr	r3, .L34+8
 1675 0058 0222     		movs	r2, #2
 1676 005a 1A60     		str	r2, [r3]
 323:bluetooth_rxtx.c **** 
 324:bluetooth_rxtx.c **** 	// Unrolled copy of 50 bytes from buf to fifo
 325:bluetooth_rxtx.c **** 	u32 *p1 = (u32 *)f->data;
 1677              		.loc 1 325 0
 1678 005c 7B6A     		ldr	r3, [r7, #36]
 1679 005e 0E33     		adds	r3, r3, #14
 1680 0060 3B62     		str	r3, [r7, #32]
 326:bluetooth_rxtx.c **** 	u32 *p2 = (u32 *)buf;
 1681              		.loc 1 326 0
 1682 0062 BB68     		ldr	r3, [r7, #8]
 1683 0064 FB61     		str	r3, [r7, #28]
 327:bluetooth_rxtx.c **** 	p1[0] = p2[0];
 1684              		.loc 1 327 0
ARM GAS  /tmp/cczWrdyg.s 			page 35


 1685 0066 FB69     		ldr	r3, [r7, #28]
 1686 0068 1A68     		ldr	r2, [r3]
 1687 006a 3B6A     		ldr	r3, [r7, #32]
 1688 006c 1A60     		str	r2, [r3]
 328:bluetooth_rxtx.c **** 	p1[1] = p2[1];
 1689              		.loc 1 328 0
 1690 006e 3B6A     		ldr	r3, [r7, #32]
 1691 0070 0433     		adds	r3, r3, #4
 1692 0072 FA69     		ldr	r2, [r7, #28]
 1693 0074 5268     		ldr	r2, [r2, #4]
 1694 0076 1A60     		str	r2, [r3]
 329:bluetooth_rxtx.c **** 	p1[2] = p2[2];
 1695              		.loc 1 329 0
 1696 0078 3B6A     		ldr	r3, [r7, #32]
 1697 007a 0833     		adds	r3, r3, #8
 1698 007c FA69     		ldr	r2, [r7, #28]
 1699 007e 9268     		ldr	r2, [r2, #8]
 1700 0080 1A60     		str	r2, [r3]
 330:bluetooth_rxtx.c **** 	p1[3] = p2[3];
 1701              		.loc 1 330 0
 1702 0082 3B6A     		ldr	r3, [r7, #32]
 1703 0084 0C33     		adds	r3, r3, #12
 1704 0086 FA69     		ldr	r2, [r7, #28]
 1705 0088 D268     		ldr	r2, [r2, #12]
 1706 008a 1A60     		str	r2, [r3]
 331:bluetooth_rxtx.c **** 	p1[4] = p2[4];
 1707              		.loc 1 331 0
 1708 008c 3B6A     		ldr	r3, [r7, #32]
 1709 008e 1033     		adds	r3, r3, #16
 1710 0090 FA69     		ldr	r2, [r7, #28]
 1711 0092 1269     		ldr	r2, [r2, #16]
 1712 0094 1A60     		str	r2, [r3]
 332:bluetooth_rxtx.c **** 	p1[5] = p2[5];
 1713              		.loc 1 332 0
 1714 0096 3B6A     		ldr	r3, [r7, #32]
 1715 0098 1433     		adds	r3, r3, #20
 1716 009a FA69     		ldr	r2, [r7, #28]
 1717 009c 5269     		ldr	r2, [r2, #20]
 1718 009e 1A60     		str	r2, [r3]
 333:bluetooth_rxtx.c **** 	p1[6] = p2[6];
 1719              		.loc 1 333 0
 1720 00a0 3B6A     		ldr	r3, [r7, #32]
 1721 00a2 1833     		adds	r3, r3, #24
 1722 00a4 FA69     		ldr	r2, [r7, #28]
 1723 00a6 9269     		ldr	r2, [r2, #24]
 1724 00a8 1A60     		str	r2, [r3]
 334:bluetooth_rxtx.c **** 	p1[7] = p2[7];
 1725              		.loc 1 334 0
 1726 00aa 3B6A     		ldr	r3, [r7, #32]
 1727 00ac 1C33     		adds	r3, r3, #28
 1728 00ae FA69     		ldr	r2, [r7, #28]
 1729 00b0 D269     		ldr	r2, [r2, #28]
 1730 00b2 1A60     		str	r2, [r3]
 335:bluetooth_rxtx.c **** 	p1[8] = p2[8];
 1731              		.loc 1 335 0
 1732 00b4 3B6A     		ldr	r3, [r7, #32]
 1733 00b6 2033     		adds	r3, r3, #32
ARM GAS  /tmp/cczWrdyg.s 			page 36


 1734 00b8 FA69     		ldr	r2, [r7, #28]
 1735 00ba 126A     		ldr	r2, [r2, #32]
 1736 00bc 1A60     		str	r2, [r3]
 336:bluetooth_rxtx.c **** 	p1[9] = p2[9];
 1737              		.loc 1 336 0
 1738 00be 3B6A     		ldr	r3, [r7, #32]
 1739 00c0 2433     		adds	r3, r3, #36
 1740 00c2 FA69     		ldr	r2, [r7, #28]
 1741 00c4 526A     		ldr	r2, [r2, #36]
 1742 00c6 1A60     		str	r2, [r3]
 337:bluetooth_rxtx.c **** 	p1[10] = p2[10];
 1743              		.loc 1 337 0
 1744 00c8 3B6A     		ldr	r3, [r7, #32]
 1745 00ca 2833     		adds	r3, r3, #40
 1746 00cc FA69     		ldr	r2, [r7, #28]
 1747 00ce 926A     		ldr	r2, [r2, #40]
 1748 00d0 1A60     		str	r2, [r3]
 338:bluetooth_rxtx.c **** 	p1[11] = p2[11];
 1749              		.loc 1 338 0
 1750 00d2 3B6A     		ldr	r3, [r7, #32]
 1751 00d4 2C33     		adds	r3, r3, #44
 1752 00d6 FA69     		ldr	r2, [r7, #28]
 1753 00d8 D26A     		ldr	r2, [r2, #44]
 1754 00da 1A60     		str	r2, [r3]
 339:bluetooth_rxtx.c **** 	/* Avoid gcc warning about strict-aliasing */
 340:bluetooth_rxtx.c **** 	u16 *p3 = (u16 *)f->data;
 1755              		.loc 1 340 0
 1756 00dc 7B6A     		ldr	r3, [r7, #36]
 1757 00de 0E33     		adds	r3, r3, #14
 1758 00e0 BB61     		str	r3, [r7, #24]
 341:bluetooth_rxtx.c **** 	u16 *p4 = (u16 *)buf;
 1759              		.loc 1 341 0
 1760 00e2 BB68     		ldr	r3, [r7, #8]
 1761 00e4 7B61     		str	r3, [r7, #20]
 342:bluetooth_rxtx.c **** 	p3[24] = p4[24];
 1762              		.loc 1 342 0
 1763 00e6 BB69     		ldr	r3, [r7, #24]
 1764 00e8 3033     		adds	r3, r3, #48
 1765 00ea 7A69     		ldr	r2, [r7, #20]
 1766 00ec 128E     		ldrh	r2, [r2, #48]
 1767 00ee 1A80     		strh	r2, [r3]	@ movhi
 343:bluetooth_rxtx.c **** 
 344:bluetooth_rxtx.c **** 	f->status = status;
 1768              		.loc 1 344 0
 1769 00f0 064B     		ldr	r3, .L34
 1770 00f2 1B78     		ldrb	r3, [r3]
 1771 00f4 DAB2     		uxtb	r2, r3
 1772 00f6 7B6A     		ldr	r3, [r7, #36]
 1773 00f8 5A70     		strb	r2, [r3, #1]
 345:bluetooth_rxtx.c **** 	status = 0;
 1774              		.loc 1 345 0
 1775 00fa 044B     		ldr	r3, .L34
 1776 00fc 0022     		movs	r2, #0
 1777 00fe 1A70     		strb	r2, [r3]
 346:bluetooth_rxtx.c **** 
 347:bluetooth_rxtx.c **** 	return 1;
 1778              		.loc 1 347 0
ARM GAS  /tmp/cczWrdyg.s 			page 37


 1779 0100 0123     		movs	r3, #1
 1780              	.L33:
 348:bluetooth_rxtx.c **** }
 1781              		.loc 1 348 0
 1782 0102 1846     		mov	r0, r3
 1783 0104 2837     		adds	r7, r7, #40
 1784              		.cfi_def_cfa_offset 8
 1785 0106 BD46     		mov	sp, r7
 1786              		.cfi_def_cfa_register 13
 1787              		@ sp needed
 1788 0108 80BD     		pop	{r7, pc}
 1789              	.L35:
 1790 010a 00BF     		.align	2
 1791              	.L34:
 1792 010c 00000000 		.word	status
 1793 0110 00000000 		.word	channel
 1794 0114 38C00920 		.word	537509944
 1795              		.cfi_endproc
 1796              	.LFE5:
 1798              		.section	.text.cs_threshold_calc_and_set,"ax",%progbits
 1799              		.align	2
 1800              		.thumb
 1801              		.thumb_func
 1803              	cs_threshold_calc_and_set:
 1804              	.LFB6:
 349:bluetooth_rxtx.c **** 
 350:bluetooth_rxtx.c **** static void cs_threshold_calc_and_set(void)
 351:bluetooth_rxtx.c **** {
 1805              		.loc 1 351 0
 1806              		.cfi_startproc
 1807              		@ args = 0, pretend = 0, frame = 8
 1808              		@ frame_needed = 1, uses_anonymous_args = 0
 1809 0000 80B5     		push	{r7, lr}
 1810              		.cfi_def_cfa_offset 8
 1811              		.cfi_offset 7, -8
 1812              		.cfi_offset 14, -4
 1813 0002 82B0     		sub	sp, sp, #8
 1814              		.cfi_def_cfa_offset 16
 1815 0004 00AF     		add	r7, sp, #0
 1816              		.cfi_def_cfa_register 7
 352:bluetooth_rxtx.c **** 	int8_t level;
 353:bluetooth_rxtx.c **** 
 354:bluetooth_rxtx.c **** 	/* If threshold is max/avg based (>0), reset here while rx is
 355:bluetooth_rxtx.c **** 	 * off.  TODO - max-to-iir only works in SWEEP mode, where the
 356:bluetooth_rxtx.c **** 	 * channel is known to be in the BT band, i.e., rssi_iir has a
 357:bluetooth_rxtx.c **** 	 * value for it. */
 358:bluetooth_rxtx.c **** 	if ((hop_mode > 0) && (cs_threshold_req > 0)) {
 1817              		.loc 1 358 0
 1818 0006 174B     		ldr	r3, .L40
 1819 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1820 000a 002B     		cmp	r3, #0
 1821 000c 1DD0     		beq	.L37
 1822              		.loc 1 358 0 is_stmt 0 discriminator 1
 1823 000e 164B     		ldr	r3, .L40+4
 1824 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1825 0012 5BB2     		sxtb	r3, r3
 1826 0014 002B     		cmp	r3, #0
ARM GAS  /tmp/cczWrdyg.s 			page 38


 1827 0016 18DD     		ble	.L37
 1828              	.LBB2:
 359:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1829              		.loc 1 359 0 is_stmt 1
 1830 0018 144B     		ldr	r3, .L40+8
 1831 001a 1B88     		ldrh	r3, [r3]	@ movhi
 1832 001c 9BB2     		uxth	r3, r3
 1833 001e A3F66213 		subw	r3, r3, #2402
 1834 0022 134A     		ldr	r2, .L40+12
 1835 0024 32F81330 		ldrh	r3, [r2, r3, lsl #1]
 1836 0028 1BB2     		sxth	r3, r3
 1837 002a 8033     		adds	r3, r3, #128
 1838 002c 002B     		cmp	r3, #0
 1839 002e 00DA     		bge	.L38
 1840 0030 FF33     		adds	r3, r3, #255
 1841              	.L38:
 1842 0032 1B12     		asrs	r3, r3, #8
 1843 0034 BB71     		strb	r3, [r7, #6]
 360:bluetooth_rxtx.c **** 		level = rssi - 54 + cs_threshold_req;
 1844              		.loc 1 360 0
 1845 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1846 0038 0B4B     		ldr	r3, .L40+4
 1847 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1848 003c DBB2     		uxtb	r3, r3
 1849 003e 1344     		add	r3, r3, r2
 1850 0040 DBB2     		uxtb	r3, r3
 1851 0042 363B     		subs	r3, r3, #54
 1852 0044 DBB2     		uxtb	r3, r3
 1853 0046 FB71     		strb	r3, [r7, #7]
 1854              	.LBE2:
 358:bluetooth_rxtx.c **** 		int8_t rssi = (int8_t)((rssi_iir[channel-2402] + 128)/256);
 1855              		.loc 1 358 0
 1856 0048 02E0     		b	.L39
 1857              	.L37:
 361:bluetooth_rxtx.c **** 	}
 362:bluetooth_rxtx.c **** 	else {
 363:bluetooth_rxtx.c **** 		level = cs_threshold_req;
 1858              		.loc 1 363 0
 1859 004a 074B     		ldr	r3, .L40+4
 1860 004c 1B78     		ldrb	r3, [r3]
 1861 004e FB71     		strb	r3, [r7, #7]
 1862              	.L39:
 364:bluetooth_rxtx.c **** 	}
 365:bluetooth_rxtx.c **** 	cs_threshold_set(level, CS_SAMPLES_4);
 1863              		.loc 1 365 0
 1864 0050 97F90730 		ldrsb	r3, [r7, #7]
 1865 0054 1846     		mov	r0, r3
 1866 0056 0321     		movs	r1, #3
 1867 0058 FFF7FEFF 		bl	cs_threshold_set
 366:bluetooth_rxtx.c **** }
 1868              		.loc 1 366 0
 1869 005c 0837     		adds	r7, r7, #8
 1870              		.cfi_def_cfa_offset 8
 1871 005e BD46     		mov	sp, r7
 1872              		.cfi_def_cfa_register 13
 1873              		@ sp needed
 1874 0060 80BD     		pop	{r7, pc}
ARM GAS  /tmp/cczWrdyg.s 			page 39


 1875              	.L41:
 1876 0062 00BF     		.align	2
 1877              	.L40:
 1878 0064 00000000 		.word	hop_mode
 1879 0068 00000000 		.word	cs_threshold_req
 1880 006c 00000000 		.word	channel
 1881 0070 00000000 		.word	rssi_iir
 1882              		.cfi_endproc
 1883              	.LFE6:
 1885              		.section	.text.cs_trigger_enable,"ax",%progbits
 1886              		.align	2
 1887              		.thumb
 1888              		.thumb_func
 1890              	cs_trigger_enable:
 1891              	.LFB7:
 367:bluetooth_rxtx.c **** 
 368:bluetooth_rxtx.c **** /* CS comes from CC2400 GIO6, which is LPC P2.2, active low. GPIO
 369:bluetooth_rxtx.c ****  * triggers EINT3, which could be used for other things (but is not
 370:bluetooth_rxtx.c ****  * currently). TODO - EINT3 should be managed globally, not turned on
 371:bluetooth_rxtx.c ****  * and off here. */
 372:bluetooth_rxtx.c **** static void cs_trigger_enable(void)
 373:bluetooth_rxtx.c **** {
 1892              		.loc 1 373 0
 1893              		.cfi_startproc
 1894              		@ args = 0, pretend = 0, frame = 0
 1895              		@ frame_needed = 1, uses_anonymous_args = 0
 1896              		@ link register save eliminated.
 1897 0000 80B4     		push	{r7}
 1898              		.cfi_def_cfa_offset 4
 1899              		.cfi_offset 7, -4
 1900 0002 00AF     		add	r7, sp, #0
 1901              		.cfi_def_cfa_register 7
 374:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1902              		.loc 1 374 0
 1903 0004 094B     		ldr	r3, .L43
 1904 0006 0022     		movs	r2, #0
 1905 0008 1A70     		strb	r2, [r3]
 375:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_EINT3;
 1906              		.loc 1 375 0
 1907 000a 094B     		ldr	r3, .L43+4
 1908 000c 4FF40012 		mov	r2, #2097152
 1909 0010 1A60     		str	r2, [r3]
 376:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1910              		.loc 1 376 0
 1911 0012 084B     		ldr	r3, .L43+8
 1912 0014 0422     		movs	r2, #4
 1913 0016 1A60     		str	r2, [r3]
 377:bluetooth_rxtx.c **** 	IO2IntEnF |= PIN_GIO6;     // Enable port 2.2 falling (CS active low)
 1914              		.loc 1 377 0
 1915 0018 074A     		ldr	r2, .L43+12
 1916 001a 074B     		ldr	r3, .L43+12
 1917 001c 1B68     		ldr	r3, [r3]
 1918 001e 43F00403 		orr	r3, r3, #4
 1919 0022 1360     		str	r3, [r2]
 378:bluetooth_rxtx.c **** }
 1920              		.loc 1 378 0
 1921 0024 BD46     		mov	sp, r7
ARM GAS  /tmp/cczWrdyg.s 			page 40


 1922              		.cfi_def_cfa_register 13
 1923              		@ sp needed
 1924 0026 5DF8047B 		ldr	r7, [sp], #4
 1925              		.cfi_restore 7
 1926              		.cfi_def_cfa_offset 0
 1927 002a 7047     		bx	lr
 1928              	.L44:
 1929              		.align	2
 1930              	.L43:
 1931 002c 00000000 		.word	cs_trigger
 1932 0030 00E100E0 		.word	-536813312
 1933 0034 AC800240 		.word	1073905836
 1934 0038 B4800240 		.word	1073905844
 1935              		.cfi_endproc
 1936              	.LFE7:
 1938              		.section	.text.cs_trigger_disable,"ax",%progbits
 1939              		.align	2
 1940              		.thumb
 1941              		.thumb_func
 1943              	cs_trigger_disable:
 1944              	.LFB8:
 379:bluetooth_rxtx.c **** 
 380:bluetooth_rxtx.c **** static void cs_trigger_disable(void)
 381:bluetooth_rxtx.c **** {
 1945              		.loc 1 381 0
 1946              		.cfi_startproc
 1947              		@ args = 0, pretend = 0, frame = 0
 1948              		@ frame_needed = 1, uses_anonymous_args = 0
 1949              		@ link register save eliminated.
 1950 0000 80B4     		push	{r7}
 1951              		.cfi_def_cfa_offset 4
 1952              		.cfi_offset 7, -4
 1953 0002 00AF     		add	r7, sp, #0
 1954              		.cfi_def_cfa_register 7
 382:bluetooth_rxtx.c **** 	IO2IntEnF &= ~PIN_GIO6;    // Disable port 2.2 falling (CS active low)
 1955              		.loc 1 382 0
 1956 0004 094A     		ldr	r2, .L46
 1957 0006 094B     		ldr	r3, .L46
 1958 0008 1B68     		ldr	r3, [r3]
 1959 000a 23F00403 		bic	r3, r3, #4
 1960 000e 1360     		str	r3, [r2]
 383:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;      // Clear pending
 1961              		.loc 1 383 0
 1962 0010 074B     		ldr	r3, .L46+4
 1963 0012 0422     		movs	r2, #4
 1964 0014 1A60     		str	r2, [r3]
 384:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_EINT3;
 1965              		.loc 1 384 0
 1966 0016 074B     		ldr	r3, .L46+8
 1967 0018 4FF40012 		mov	r2, #2097152
 1968 001c 1A60     		str	r2, [r3]
 385:bluetooth_rxtx.c **** 	cs_trigger = 0;
 1969              		.loc 1 385 0
 1970 001e 064B     		ldr	r3, .L46+12
 1971 0020 0022     		movs	r2, #0
 1972 0022 1A70     		strb	r2, [r3]
 386:bluetooth_rxtx.c **** }
ARM GAS  /tmp/cczWrdyg.s 			page 41


 1973              		.loc 1 386 0
 1974 0024 BD46     		mov	sp, r7
 1975              		.cfi_def_cfa_register 13
 1976              		@ sp needed
 1977 0026 5DF8047B 		ldr	r7, [sp], #4
 1978              		.cfi_restore 7
 1979              		.cfi_def_cfa_offset 0
 1980 002a 7047     		bx	lr
 1981              	.L47:
 1982              		.align	2
 1983              	.L46:
 1984 002c B4800240 		.word	1073905844
 1985 0030 AC800240 		.word	1073905836
 1986 0034 80E100E0 		.word	-536813184
 1987 0038 00000000 		.word	cs_trigger
 1988              		.cfi_endproc
 1989              	.LFE8:
 1991              		.section	.rodata
 1992 08bd 000000   		.align	2
 1993              	.LC4:
 1994 08c0 32303135 		.ascii	"2015-10-R1\000"
 1994      2D31302D 
 1994      523100
 1995              		.section	.text.vendor_request_handler,"ax",%progbits
 1996              		.align	2
 1997              		.thumb
 1998              		.thumb_func
 2000              	vendor_request_handler:
 2001              	.LFB9:
 387:bluetooth_rxtx.c **** 
 388:bluetooth_rxtx.c **** static int vendor_request_handler(u8 request, u16 *request_params, u8 *data, int *data_len)
 389:bluetooth_rxtx.c **** {
 2002              		.loc 1 389 0
 2003              		.cfi_startproc
 2004              		@ args = 0, pretend = 0, frame = 80
 2005              		@ frame_needed = 1, uses_anonymous_args = 0
 2006 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2007              		.cfi_def_cfa_offset 36
 2008              		.cfi_offset 4, -36
 2009              		.cfi_offset 5, -32
 2010              		.cfi_offset 6, -28
 2011              		.cfi_offset 7, -24
 2012              		.cfi_offset 8, -20
 2013              		.cfi_offset 9, -16
 2014              		.cfi_offset 10, -12
 2015              		.cfi_offset 11, -8
 2016              		.cfi_offset 14, -4
 2017 0004 95B0     		sub	sp, sp, #84
 2018              		.cfi_def_cfa_offset 120
 2019 0006 00AF     		add	r7, sp, #0
 2020              		.cfi_def_cfa_register 7
 2021 0008 B960     		str	r1, [r7, #8]
 2022 000a 7A60     		str	r2, [r7, #4]
 2023 000c 3B60     		str	r3, [r7]
 2024 000e 0346     		mov	r3, r0
 2025 0010 FB73     		strb	r3, [r7, #15]
 390:bluetooth_rxtx.c **** 	u32 command[5];
ARM GAS  /tmp/cczWrdyg.s 			page 42


 391:bluetooth_rxtx.c **** 	u32 result[5];
 392:bluetooth_rxtx.c **** 	u64 ac_copy;
 393:bluetooth_rxtx.c **** 	int i; // loop counter
 394:bluetooth_rxtx.c **** 	u32 clock;
 395:bluetooth_rxtx.c **** 	int clock_offset;
 396:bluetooth_rxtx.c **** 	u8 length; // string length
 397:bluetooth_rxtx.c **** 	usb_pkt_rx *p = NULL;
 2026              		.loc 1 397 0
 2027 0012 0023     		movs	r3, #0
 2028 0014 7B64     		str	r3, [r7, #68]
 398:bluetooth_rxtx.c **** 	u16 reg_val;
 399:bluetooth_rxtx.c **** 
 400:bluetooth_rxtx.c **** 	switch (request) {
 2029              		.loc 1 400 0
 2030 0016 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2031 0018 3C2B     		cmp	r3, #60
 2032 001a 00F25185 		bhi	.L49
 2033 001e 01A2     		adr	r2, .L51
 2034 0020 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2035              		.p2align 2
 2036              	.L51:
 2037 0024 19010000 		.word	.L50+1
 2038 0028 23010000 		.word	.L52+1
 2039 002c C10A0000 		.word	.L49+1
 2040 0030 33010000 		.word	.L53+1
 2041 0034 55010000 		.word	.L54+1
 2042 0038 71010000 		.word	.L55+1
 2043 003c 93010000 		.word	.L56+1
 2044 0040 AF010000 		.word	.L57+1
 2045 0044 D1010000 		.word	.L58+1
 2046 0048 F1010000 		.word	.L59+1
 2047 004c 13020000 		.word	.L60+1
 2048 0050 B7040000 		.word	.L61+1
 2049 0054 DD040000 		.word	.L62+1
 2050 0058 89020000 		.word	.L63+1
 2051 005c 93020000 		.word	.L64+1
 2052 0060 33020000 		.word	.L65+1
 2053 0064 71030000 		.word	.L66+1
 2054 0068 91030000 		.word	.L67+1
 2055 006c C9030000 		.word	.L68+1
 2056 0070 E9030000 		.word	.L69+1
 2057 0074 05040000 		.word	.L70+1
 2058 0078 91040000 		.word	.L71+1
 2059 007c 99040000 		.word	.L72+1
 2060 0080 AB040000 		.word	.L73+1
 2061 0084 67050000 		.word	.L74+1
 2062 0088 85050000 		.word	.L75+1
 2063 008c C10A0000 		.word	.L49+1
 2064 0090 91050000 		.word	.L76+1
 2065 0094 0D040000 		.word	.L77+1
 2066 0098 29040000 		.word	.L78+1
 2067 009c 51040000 		.word	.L79+1
 2068 00a0 49040000 		.word	.L80+1
 2069 00a4 59040000 		.word	.L81+1
 2070 00a8 55060000 		.word	.L82+1
 2071 00ac ED050000 		.word	.L83+1
 2072 00b0 C9060000 		.word	.L84+1
ARM GAS  /tmp/cczWrdyg.s 			page 43


 2073 00b4 D7060000 		.word	.L85+1
 2074 00b8 E7060000 		.word	.L86+1
 2075 00bc F9060000 		.word	.L87+1
 2076 00c0 C5070000 		.word	.L88+1
 2077 00c4 0B080000 		.word	.L89+1
 2078 00c8 99080000 		.word	.L90+1
 2079 00cc CD080000 		.word	.L91+1
 2080 00d0 EF080000 		.word	.L92+1
 2081 00d4 47090000 		.word	.L93+1
 2082 00d8 C50A0000 		.word	.L152+1
 2083 00dc 79090000 		.word	.L95+1
 2084 00e0 8F090000 		.word	.L96+1
 2085 00e4 AB090000 		.word	.L97+1
 2086 00e8 C1090000 		.word	.L98+1
 2087 00ec ED090000 		.word	.L99+1
 2088 00f0 3D080000 		.word	.L100+1
 2089 00f4 6F080000 		.word	.L101+1
 2090 00f8 090A0000 		.word	.L102+1
 2091 00fc 4D0A0000 		.word	.L103+1
 2092 0100 97060000 		.word	.L104+1
 2093 0104 5F0A0000 		.word	.L105+1
 2094 0108 C10A0000 		.word	.L49+1
 2095 010c 370A0000 		.word	.L106+1
 2096 0110 A30A0000 		.word	.L107+1
 2097 0114 AF0A0000 		.word	.L108+1
 2098              		.p2align 1
 2099              	.L50:
 401:bluetooth_rxtx.c **** 
 402:bluetooth_rxtx.c **** 	case UBERTOOTH_PING:
 403:bluetooth_rxtx.c **** 		*data_len = 0;
 2100              		.loc 1 403 0
 2101 0118 3B68     		ldr	r3, [r7]
 2102 011a 0022     		movs	r2, #0
 2103 011c 1A60     		str	r2, [r3]
 404:bluetooth_rxtx.c **** 		break;
 2104              		.loc 1 404 0
 2105 011e 00F0D2BC 		b	.L109
 2106              	.L52:
 405:bluetooth_rxtx.c **** 
 406:bluetooth_rxtx.c **** 	case UBERTOOTH_RX_SYMBOLS:
 407:bluetooth_rxtx.c **** 		requested_mode = MODE_RX_SYMBOLS;
 2107              		.loc 1 407 0
 2108 0122 A14B     		ldr	r3, .L153
 2109 0124 0122     		movs	r2, #1
 2110 0126 1A70     		strb	r2, [r3]
 408:bluetooth_rxtx.c **** 		*data_len = 0;
 2111              		.loc 1 408 0
 2112 0128 3B68     		ldr	r3, [r7]
 2113 012a 0022     		movs	r2, #0
 2114 012c 1A60     		str	r2, [r3]
 409:bluetooth_rxtx.c **** 		break;
 2115              		.loc 1 409 0
 2116 012e 00F0CABC 		b	.L109
 2117              	.L53:
 410:bluetooth_rxtx.c **** 
 411:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_USRLED:
 412:bluetooth_rxtx.c **** 		data[0] = (USRLED) ? 1 : 0;
ARM GAS  /tmp/cczWrdyg.s 			page 44


 2118              		.loc 1 412 0
 2119 0132 9E4B     		ldr	r3, .L153+4
 2120 0134 1B68     		ldr	r3, [r3]
 2121 0136 03F00203 		and	r3, r3, #2
 2122 013a 002B     		cmp	r3, #0
 2123 013c 14BF     		ite	ne
 2124 013e 0123     		movne	r3, #1
 2125 0140 0023     		moveq	r3, #0
 2126 0142 DBB2     		uxtb	r3, r3
 2127 0144 1A46     		mov	r2, r3
 2128 0146 7B68     		ldr	r3, [r7, #4]
 2129 0148 1A70     		strb	r2, [r3]
 413:bluetooth_rxtx.c **** 		*data_len = 1;
 2130              		.loc 1 413 0
 2131 014a 3B68     		ldr	r3, [r7]
 2132 014c 0122     		movs	r2, #1
 2133 014e 1A60     		str	r2, [r3]
 414:bluetooth_rxtx.c **** 		break;
 2134              		.loc 1 414 0
 2135 0150 00F0B9BC 		b	.L109
 2136              	.L54:
 415:bluetooth_rxtx.c **** 
 416:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_USRLED:
 417:bluetooth_rxtx.c **** 		if (request_params[0])
 2137              		.loc 1 417 0
 2138 0154 BB68     		ldr	r3, [r7, #8]
 2139 0156 1B88     		ldrh	r3, [r3]
 2140 0158 002B     		cmp	r3, #0
 2141 015a 04D0     		beq	.L110
 418:bluetooth_rxtx.c **** 			USRLED_SET;
 2142              		.loc 1 418 0
 2143 015c 944B     		ldr	r3, .L153+8
 2144 015e 0222     		movs	r2, #2
 2145 0160 1A60     		str	r2, [r3]
 419:bluetooth_rxtx.c **** 		else
 420:bluetooth_rxtx.c **** 			USRLED_CLR;
 421:bluetooth_rxtx.c **** 		break;
 2146              		.loc 1 421 0
 2147 0162 00F0B0BC 		b	.L109
 2148              	.L110:
 420:bluetooth_rxtx.c **** 		break;
 2149              		.loc 1 420 0
 2150 0166 934B     		ldr	r3, .L153+12
 2151 0168 0222     		movs	r2, #2
 2152 016a 1A60     		str	r2, [r3]
 2153              		.loc 1 421 0
 2154 016c 00F0ABBC 		b	.L109
 2155              	.L55:
 422:bluetooth_rxtx.c **** 
 423:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_RXLED:
 424:bluetooth_rxtx.c **** 		data[0] = (RXLED) ? 1 : 0;
 2156              		.loc 1 424 0
 2157 0170 8E4B     		ldr	r3, .L153+4
 2158 0172 1B68     		ldr	r3, [r3]
 2159 0174 03F01003 		and	r3, r3, #16
 2160 0178 002B     		cmp	r3, #0
 2161 017a 14BF     		ite	ne
ARM GAS  /tmp/cczWrdyg.s 			page 45


 2162 017c 0123     		movne	r3, #1
 2163 017e 0023     		moveq	r3, #0
 2164 0180 DBB2     		uxtb	r3, r3
 2165 0182 1A46     		mov	r2, r3
 2166 0184 7B68     		ldr	r3, [r7, #4]
 2167 0186 1A70     		strb	r2, [r3]
 425:bluetooth_rxtx.c **** 		*data_len = 1;
 2168              		.loc 1 425 0
 2169 0188 3B68     		ldr	r3, [r7]
 2170 018a 0122     		movs	r2, #1
 2171 018c 1A60     		str	r2, [r3]
 426:bluetooth_rxtx.c **** 		break;
 2172              		.loc 1 426 0
 2173 018e 00F09ABC 		b	.L109
 2174              	.L56:
 427:bluetooth_rxtx.c **** 
 428:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_RXLED:
 429:bluetooth_rxtx.c **** 		if (request_params[0])
 2175              		.loc 1 429 0
 2176 0192 BB68     		ldr	r3, [r7, #8]
 2177 0194 1B88     		ldrh	r3, [r3]
 2178 0196 002B     		cmp	r3, #0
 2179 0198 04D0     		beq	.L112
 430:bluetooth_rxtx.c **** 			RXLED_SET;
 2180              		.loc 1 430 0
 2181 019a 854B     		ldr	r3, .L153+8
 2182 019c 1022     		movs	r2, #16
 2183 019e 1A60     		str	r2, [r3]
 431:bluetooth_rxtx.c **** 		else
 432:bluetooth_rxtx.c **** 			RXLED_CLR;
 433:bluetooth_rxtx.c **** 		break;
 2184              		.loc 1 433 0
 2185 01a0 00F091BC 		b	.L109
 2186              	.L112:
 432:bluetooth_rxtx.c **** 		break;
 2187              		.loc 1 432 0
 2188 01a4 834B     		ldr	r3, .L153+12
 2189 01a6 1022     		movs	r2, #16
 2190 01a8 1A60     		str	r2, [r3]
 2191              		.loc 1 433 0
 2192 01aa 00F08CBC 		b	.L109
 2193              	.L57:
 434:bluetooth_rxtx.c **** 
 435:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_TXLED:
 436:bluetooth_rxtx.c **** 		data[0] = (TXLED) ? 1 : 0;
 2194              		.loc 1 436 0
 2195 01ae 7F4B     		ldr	r3, .L153+4
 2196 01b0 1B68     		ldr	r3, [r3]
 2197 01b2 03F48073 		and	r3, r3, #256
 2198 01b6 002B     		cmp	r3, #0
 2199 01b8 14BF     		ite	ne
 2200 01ba 0123     		movne	r3, #1
 2201 01bc 0023     		moveq	r3, #0
 2202 01be DBB2     		uxtb	r3, r3
 2203 01c0 1A46     		mov	r2, r3
 2204 01c2 7B68     		ldr	r3, [r7, #4]
 2205 01c4 1A70     		strb	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 46


 437:bluetooth_rxtx.c **** 		*data_len = 1;
 2206              		.loc 1 437 0
 2207 01c6 3B68     		ldr	r3, [r7]
 2208 01c8 0122     		movs	r2, #1
 2209 01ca 1A60     		str	r2, [r3]
 438:bluetooth_rxtx.c **** 		break;
 2210              		.loc 1 438 0
 2211 01cc 00F07BBC 		b	.L109
 2212              	.L58:
 439:bluetooth_rxtx.c **** 
 440:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_TXLED:
 441:bluetooth_rxtx.c **** 		if (request_params[0])
 2213              		.loc 1 441 0
 2214 01d0 BB68     		ldr	r3, [r7, #8]
 2215 01d2 1B88     		ldrh	r3, [r3]
 2216 01d4 002B     		cmp	r3, #0
 2217 01d6 05D0     		beq	.L114
 442:bluetooth_rxtx.c **** 			TXLED_SET;
 2218              		.loc 1 442 0
 2219 01d8 754B     		ldr	r3, .L153+8
 2220 01da 4FF48072 		mov	r2, #256
 2221 01de 1A60     		str	r2, [r3]
 443:bluetooth_rxtx.c **** 		else
 444:bluetooth_rxtx.c **** 			TXLED_CLR;
 445:bluetooth_rxtx.c **** 		break;
 2222              		.loc 1 445 0
 2223 01e0 00F071BC 		b	.L109
 2224              	.L114:
 444:bluetooth_rxtx.c **** 		break;
 2225              		.loc 1 444 0
 2226 01e4 734B     		ldr	r3, .L153+12
 2227 01e6 4FF48072 		mov	r2, #256
 2228 01ea 1A60     		str	r2, [r3]
 2229              		.loc 1 445 0
 2230 01ec 00F06BBC 		b	.L109
 2231              	.L59:
 446:bluetooth_rxtx.c **** 
 447:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_1V8:
 448:bluetooth_rxtx.c **** 		data[0] = (CC1V8) ? 1 : 0;
 2232              		.loc 1 448 0
 2233 01f0 6E4B     		ldr	r3, .L153+4
 2234 01f2 1B68     		ldr	r3, [r3]
 2235 01f4 03F40073 		and	r3, r3, #512
 2236 01f8 002B     		cmp	r3, #0
 2237 01fa 14BF     		ite	ne
 2238 01fc 0123     		movne	r3, #1
 2239 01fe 0023     		moveq	r3, #0
 2240 0200 DBB2     		uxtb	r3, r3
 2241 0202 1A46     		mov	r2, r3
 2242 0204 7B68     		ldr	r3, [r7, #4]
 2243 0206 1A70     		strb	r2, [r3]
 449:bluetooth_rxtx.c **** 		*data_len = 1;
 2244              		.loc 1 449 0
 2245 0208 3B68     		ldr	r3, [r7]
 2246 020a 0122     		movs	r2, #1
 2247 020c 1A60     		str	r2, [r3]
 450:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/cczWrdyg.s 			page 47


 2248              		.loc 1 450 0
 2249 020e 00F05ABC 		b	.L109
 2250              	.L60:
 451:bluetooth_rxtx.c **** 
 452:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_1V8:
 453:bluetooth_rxtx.c **** 		if (request_params[0])
 2251              		.loc 1 453 0
 2252 0212 BB68     		ldr	r3, [r7, #8]
 2253 0214 1B88     		ldrh	r3, [r3]
 2254 0216 002B     		cmp	r3, #0
 2255 0218 05D0     		beq	.L116
 454:bluetooth_rxtx.c **** 			CC1V8_SET;
 2256              		.loc 1 454 0
 2257 021a 654B     		ldr	r3, .L153+8
 2258 021c 4FF40072 		mov	r2, #512
 2259 0220 1A60     		str	r2, [r3]
 455:bluetooth_rxtx.c **** 		else
 456:bluetooth_rxtx.c **** 			CC1V8_CLR;
 457:bluetooth_rxtx.c **** 		break;
 2260              		.loc 1 457 0
 2261 0222 00F050BC 		b	.L109
 2262              	.L116:
 456:bluetooth_rxtx.c **** 		break;
 2263              		.loc 1 456 0
 2264 0226 634B     		ldr	r3, .L153+12
 2265 0228 4FF40072 		mov	r2, #512
 2266 022c 1A60     		str	r2, [r3]
 2267              		.loc 1 457 0
 2268 022e 00F04ABC 		b	.L109
 2269              	.L65:
 458:bluetooth_rxtx.c **** 
 459:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PARTNUM:
 460:bluetooth_rxtx.c **** 		command[0] = 54; /* read part number */
 2270              		.loc 1 460 0
 2271 0232 3623     		movs	r3, #54
 2272 0234 7B62     		str	r3, [r7, #36]
 461:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2273              		.loc 1 461 0
 2274 0236 604B     		ldr	r3, .L153+16
 2275 0238 1B68     		ldr	r3, [r3]
 2276 023a 07F12401 		add	r1, r7, #36
 2277 023e 07F11002 		add	r2, r7, #16
 2278 0242 0846     		mov	r0, r1
 2279 0244 1146     		mov	r1, r2
 2280 0246 9847     		blx	r3
 462:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2281              		.loc 1 462 0
 2282 0248 3B69     		ldr	r3, [r7, #16]
 2283 024a DAB2     		uxtb	r2, r3
 2284 024c 7B68     		ldr	r3, [r7, #4]
 2285 024e 1A70     		strb	r2, [r3]
 463:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2286              		.loc 1 463 0
 2287 0250 7B68     		ldr	r3, [r7, #4]
 2288 0252 0133     		adds	r3, r3, #1
 2289 0254 7A69     		ldr	r2, [r7, #20]
 2290 0256 D2B2     		uxtb	r2, r2
ARM GAS  /tmp/cczWrdyg.s 			page 48


 2291 0258 1A70     		strb	r2, [r3]
 464:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2292              		.loc 1 464 0
 2293 025a 7B68     		ldr	r3, [r7, #4]
 2294 025c 0233     		adds	r3, r3, #2
 2295 025e 7A69     		ldr	r2, [r7, #20]
 2296 0260 120A     		lsrs	r2, r2, #8
 2297 0262 D2B2     		uxtb	r2, r2
 2298 0264 1A70     		strb	r2, [r3]
 465:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2299              		.loc 1 465 0
 2300 0266 7B68     		ldr	r3, [r7, #4]
 2301 0268 0333     		adds	r3, r3, #3
 2302 026a 7A69     		ldr	r2, [r7, #20]
 2303 026c 120C     		lsrs	r2, r2, #16
 2304 026e D2B2     		uxtb	r2, r2
 2305 0270 1A70     		strb	r2, [r3]
 466:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2306              		.loc 1 466 0
 2307 0272 7B68     		ldr	r3, [r7, #4]
 2308 0274 0433     		adds	r3, r3, #4
 2309 0276 7A69     		ldr	r2, [r7, #20]
 2310 0278 120E     		lsrs	r2, r2, #24
 2311 027a D2B2     		uxtb	r2, r2
 2312 027c 1A70     		strb	r2, [r3]
 467:bluetooth_rxtx.c **** 		*data_len = 5;
 2313              		.loc 1 467 0
 2314 027e 3B68     		ldr	r3, [r7]
 2315 0280 0522     		movs	r2, #5
 2316 0282 1A60     		str	r2, [r3]
 468:bluetooth_rxtx.c **** 		break;
 2317              		.loc 1 468 0
 2318 0284 00F01FBC 		b	.L109
 2319              	.L63:
 469:bluetooth_rxtx.c **** 
 470:bluetooth_rxtx.c **** 	case UBERTOOTH_RESET:
 471:bluetooth_rxtx.c **** 		requested_mode = MODE_RESET;
 2320              		.loc 1 471 0
 2321 0288 474B     		ldr	r3, .L153
 2322 028a 0B22     		movs	r2, #11
 2323 028c 1A70     		strb	r2, [r3]
 472:bluetooth_rxtx.c **** 		break;
 2324              		.loc 1 472 0
 2325 028e 00F01ABC 		b	.L109
 2326              	.L64:
 473:bluetooth_rxtx.c **** 
 474:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SERIAL:
 475:bluetooth_rxtx.c **** 		command[0] = 58; /* read device serial number */
 2327              		.loc 1 475 0
 2328 0292 3A23     		movs	r3, #58
 2329 0294 7B62     		str	r3, [r7, #36]
 476:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2330              		.loc 1 476 0
 2331 0296 484B     		ldr	r3, .L153+16
 2332 0298 1B68     		ldr	r3, [r3]
 2333 029a 07F12401 		add	r1, r7, #36
 2334 029e 07F11002 		add	r2, r7, #16
ARM GAS  /tmp/cczWrdyg.s 			page 49


 2335 02a2 0846     		mov	r0, r1
 2336 02a4 1146     		mov	r1, r2
 2337 02a6 9847     		blx	r3
 477:bluetooth_rxtx.c **** 		data[0] = result[0] & 0xFF; /* status */
 2338              		.loc 1 477 0
 2339 02a8 3B69     		ldr	r3, [r7, #16]
 2340 02aa DAB2     		uxtb	r2, r3
 2341 02ac 7B68     		ldr	r3, [r7, #4]
 2342 02ae 1A70     		strb	r2, [r3]
 478:bluetooth_rxtx.c **** 		data[1] = result[1] & 0xFF;
 2343              		.loc 1 478 0
 2344 02b0 7B68     		ldr	r3, [r7, #4]
 2345 02b2 0133     		adds	r3, r3, #1
 2346 02b4 7A69     		ldr	r2, [r7, #20]
 2347 02b6 D2B2     		uxtb	r2, r2
 2348 02b8 1A70     		strb	r2, [r3]
 479:bluetooth_rxtx.c **** 		data[2] = (result[1] >> 8) & 0xFF;
 2349              		.loc 1 479 0
 2350 02ba 7B68     		ldr	r3, [r7, #4]
 2351 02bc 0233     		adds	r3, r3, #2
 2352 02be 7A69     		ldr	r2, [r7, #20]
 2353 02c0 120A     		lsrs	r2, r2, #8
 2354 02c2 D2B2     		uxtb	r2, r2
 2355 02c4 1A70     		strb	r2, [r3]
 480:bluetooth_rxtx.c **** 		data[3] = (result[1] >> 16) & 0xFF;
 2356              		.loc 1 480 0
 2357 02c6 7B68     		ldr	r3, [r7, #4]
 2358 02c8 0333     		adds	r3, r3, #3
 2359 02ca 7A69     		ldr	r2, [r7, #20]
 2360 02cc 120C     		lsrs	r2, r2, #16
 2361 02ce D2B2     		uxtb	r2, r2
 2362 02d0 1A70     		strb	r2, [r3]
 481:bluetooth_rxtx.c **** 		data[4] = (result[1] >> 24) & 0xFF;
 2363              		.loc 1 481 0
 2364 02d2 7B68     		ldr	r3, [r7, #4]
 2365 02d4 0433     		adds	r3, r3, #4
 2366 02d6 7A69     		ldr	r2, [r7, #20]
 2367 02d8 120E     		lsrs	r2, r2, #24
 2368 02da D2B2     		uxtb	r2, r2
 2369 02dc 1A70     		strb	r2, [r3]
 482:bluetooth_rxtx.c **** 		data[5] = result[2] & 0xFF;
 2370              		.loc 1 482 0
 2371 02de 7B68     		ldr	r3, [r7, #4]
 2372 02e0 0533     		adds	r3, r3, #5
 2373 02e2 BA69     		ldr	r2, [r7, #24]
 2374 02e4 D2B2     		uxtb	r2, r2
 2375 02e6 1A70     		strb	r2, [r3]
 483:bluetooth_rxtx.c **** 		data[6] = (result[2] >> 8) & 0xFF;
 2376              		.loc 1 483 0
 2377 02e8 7B68     		ldr	r3, [r7, #4]
 2378 02ea 0633     		adds	r3, r3, #6
 2379 02ec BA69     		ldr	r2, [r7, #24]
 2380 02ee 120A     		lsrs	r2, r2, #8
 2381 02f0 D2B2     		uxtb	r2, r2
 2382 02f2 1A70     		strb	r2, [r3]
 484:bluetooth_rxtx.c **** 		data[7] = (result[2] >> 16) & 0xFF;
 2383              		.loc 1 484 0
ARM GAS  /tmp/cczWrdyg.s 			page 50


 2384 02f4 7B68     		ldr	r3, [r7, #4]
 2385 02f6 0733     		adds	r3, r3, #7
 2386 02f8 BA69     		ldr	r2, [r7, #24]
 2387 02fa 120C     		lsrs	r2, r2, #16
 2388 02fc D2B2     		uxtb	r2, r2
 2389 02fe 1A70     		strb	r2, [r3]
 485:bluetooth_rxtx.c **** 		data[8] = (result[2] >> 24) & 0xFF;
 2390              		.loc 1 485 0
 2391 0300 7B68     		ldr	r3, [r7, #4]
 2392 0302 0833     		adds	r3, r3, #8
 2393 0304 BA69     		ldr	r2, [r7, #24]
 2394 0306 120E     		lsrs	r2, r2, #24
 2395 0308 D2B2     		uxtb	r2, r2
 2396 030a 1A70     		strb	r2, [r3]
 486:bluetooth_rxtx.c **** 		data[9] = result[3] & 0xFF;
 2397              		.loc 1 486 0
 2398 030c 7B68     		ldr	r3, [r7, #4]
 2399 030e 0933     		adds	r3, r3, #9
 2400 0310 FA69     		ldr	r2, [r7, #28]
 2401 0312 D2B2     		uxtb	r2, r2
 2402 0314 1A70     		strb	r2, [r3]
 487:bluetooth_rxtx.c **** 		data[10] = (result[3] >> 8) & 0xFF;
 2403              		.loc 1 487 0
 2404 0316 7B68     		ldr	r3, [r7, #4]
 2405 0318 0A33     		adds	r3, r3, #10
 2406 031a FA69     		ldr	r2, [r7, #28]
 2407 031c 120A     		lsrs	r2, r2, #8
 2408 031e D2B2     		uxtb	r2, r2
 2409 0320 1A70     		strb	r2, [r3]
 488:bluetooth_rxtx.c **** 		data[11] = (result[3] >> 16) & 0xFF;
 2410              		.loc 1 488 0
 2411 0322 7B68     		ldr	r3, [r7, #4]
 2412 0324 0B33     		adds	r3, r3, #11
 2413 0326 FA69     		ldr	r2, [r7, #28]
 2414 0328 120C     		lsrs	r2, r2, #16
 2415 032a D2B2     		uxtb	r2, r2
 2416 032c 1A70     		strb	r2, [r3]
 489:bluetooth_rxtx.c **** 		data[12] = (result[3] >> 24) & 0xFF;
 2417              		.loc 1 489 0
 2418 032e 7B68     		ldr	r3, [r7, #4]
 2419 0330 0C33     		adds	r3, r3, #12
 2420 0332 FA69     		ldr	r2, [r7, #28]
 2421 0334 120E     		lsrs	r2, r2, #24
 2422 0336 D2B2     		uxtb	r2, r2
 2423 0338 1A70     		strb	r2, [r3]
 490:bluetooth_rxtx.c **** 		data[13] = result[4] & 0xFF;
 2424              		.loc 1 490 0
 2425 033a 7B68     		ldr	r3, [r7, #4]
 2426 033c 0D33     		adds	r3, r3, #13
 2427 033e 3A6A     		ldr	r2, [r7, #32]
 2428 0340 D2B2     		uxtb	r2, r2
 2429 0342 1A70     		strb	r2, [r3]
 491:bluetooth_rxtx.c **** 		data[14] = (result[4] >> 8) & 0xFF;
 2430              		.loc 1 491 0
 2431 0344 7B68     		ldr	r3, [r7, #4]
 2432 0346 0E33     		adds	r3, r3, #14
 2433 0348 3A6A     		ldr	r2, [r7, #32]
ARM GAS  /tmp/cczWrdyg.s 			page 51


 2434 034a 120A     		lsrs	r2, r2, #8
 2435 034c D2B2     		uxtb	r2, r2
 2436 034e 1A70     		strb	r2, [r3]
 492:bluetooth_rxtx.c **** 		data[15] = (result[4] >> 16) & 0xFF;
 2437              		.loc 1 492 0
 2438 0350 7B68     		ldr	r3, [r7, #4]
 2439 0352 0F33     		adds	r3, r3, #15
 2440 0354 3A6A     		ldr	r2, [r7, #32]
 2441 0356 120C     		lsrs	r2, r2, #16
 2442 0358 D2B2     		uxtb	r2, r2
 2443 035a 1A70     		strb	r2, [r3]
 493:bluetooth_rxtx.c **** 		data[16] = (result[4] >> 24) & 0xFF;
 2444              		.loc 1 493 0
 2445 035c 7B68     		ldr	r3, [r7, #4]
 2446 035e 1033     		adds	r3, r3, #16
 2447 0360 3A6A     		ldr	r2, [r7, #32]
 2448 0362 120E     		lsrs	r2, r2, #24
 2449 0364 D2B2     		uxtb	r2, r2
 2450 0366 1A70     		strb	r2, [r3]
 494:bluetooth_rxtx.c **** 		*data_len = 17;
 2451              		.loc 1 494 0
 2452 0368 3B68     		ldr	r3, [r7]
 2453 036a 1122     		movs	r2, #17
 2454 036c 1A60     		str	r2, [r3]
 495:bluetooth_rxtx.c **** 		break;
 2455              		.loc 1 495 0
 2456 036e AAE3     		b	.L109
 2457              	.L66:
 496:bluetooth_rxtx.c **** 
 497:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
 498:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PAEN:
 499:bluetooth_rxtx.c **** 		data[0] = (PAEN) ? 1 : 0;
 2458              		.loc 1 499 0
 2459 0370 124B     		ldr	r3, .L153+20
 2460 0372 1B68     		ldr	r3, [r3]
 2461 0374 03F08003 		and	r3, r3, #128
 2462 0378 002B     		cmp	r3, #0
 2463 037a 14BF     		ite	ne
 2464 037c 0123     		movne	r3, #1
 2465 037e 0023     		moveq	r3, #0
 2466 0380 DBB2     		uxtb	r3, r3
 2467 0382 1A46     		mov	r2, r3
 2468 0384 7B68     		ldr	r3, [r7, #4]
 2469 0386 1A70     		strb	r2, [r3]
 500:bluetooth_rxtx.c **** 		*data_len = 1;
 2470              		.loc 1 500 0
 2471 0388 3B68     		ldr	r3, [r7]
 2472 038a 0122     		movs	r2, #1
 2473 038c 1A60     		str	r2, [r3]
 501:bluetooth_rxtx.c **** 		break;
 2474              		.loc 1 501 0
 2475 038e 9AE3     		b	.L109
 2476              	.L67:
 502:bluetooth_rxtx.c **** 
 503:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PAEN:
 504:bluetooth_rxtx.c **** 		if (request_params[0])
 2477              		.loc 1 504 0
ARM GAS  /tmp/cczWrdyg.s 			page 52


 2478 0390 BB68     		ldr	r3, [r7, #8]
 2479 0392 1B88     		ldrh	r3, [r3]
 2480 0394 002B     		cmp	r3, #0
 2481 0396 03D0     		beq	.L118
 505:bluetooth_rxtx.c **** 			PAEN_SET;
 2482              		.loc 1 505 0
 2483 0398 094B     		ldr	r3, .L153+24
 2484 039a 8022     		movs	r2, #128
 2485 039c 1A60     		str	r2, [r3]
 506:bluetooth_rxtx.c **** 		else
 507:bluetooth_rxtx.c **** 			PAEN_CLR;
 508:bluetooth_rxtx.c **** 		break;
 2486              		.loc 1 508 0
 2487 039e 92E3     		b	.L109
 2488              	.L118:
 507:bluetooth_rxtx.c **** 		break;
 2489              		.loc 1 507 0
 2490 03a0 084B     		ldr	r3, .L153+28
 2491 03a2 8022     		movs	r2, #128
 2492 03a4 1A60     		str	r2, [r3]
 2493              		.loc 1 508 0
 2494 03a6 8EE3     		b	.L109
 2495              	.L154:
 2496              		.align	2
 2497              	.L153:
 2498 03a8 00000000 		.word	requested_mode
 2499 03ac 34C00920 		.word	537509940
 2500 03b0 38C00920 		.word	537509944
 2501 03b4 3CC00920 		.word	537509948
 2502 03b8 00000000 		.word	iap_entry
 2503 03bc 54C00920 		.word	537509972
 2504 03c0 58C00920 		.word	537509976
 2505 03c4 5CC00920 		.word	537509980
 2506              	.L68:
 509:bluetooth_rxtx.c **** 
 510:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_HGM:
 511:bluetooth_rxtx.c **** 		data[0] = (HGM) ? 1 : 0;
 2507              		.loc 1 511 0
 2508 03c8 924B     		ldr	r3, .L155
 2509 03ca 1B68     		ldr	r3, [r3]
 2510 03cc 03F48073 		and	r3, r3, #256
 2511 03d0 002B     		cmp	r3, #0
 2512 03d2 14BF     		ite	ne
 2513 03d4 0123     		movne	r3, #1
 2514 03d6 0023     		moveq	r3, #0
 2515 03d8 DBB2     		uxtb	r3, r3
 2516 03da 1A46     		mov	r2, r3
 2517 03dc 7B68     		ldr	r3, [r7, #4]
 2518 03de 1A70     		strb	r2, [r3]
 512:bluetooth_rxtx.c **** 		*data_len = 1;
 2519              		.loc 1 512 0
 2520 03e0 3B68     		ldr	r3, [r7]
 2521 03e2 0122     		movs	r2, #1
 2522 03e4 1A60     		str	r2, [r3]
 513:bluetooth_rxtx.c **** 		break;
 2523              		.loc 1 513 0
 2524 03e6 6EE3     		b	.L109
ARM GAS  /tmp/cczWrdyg.s 			page 53


 2525              	.L69:
 514:bluetooth_rxtx.c **** 
 515:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_HGM:
 516:bluetooth_rxtx.c **** 		if (request_params[0])
 2526              		.loc 1 516 0
 2527 03e8 BB68     		ldr	r3, [r7, #8]
 2528 03ea 1B88     		ldrh	r3, [r3]
 2529 03ec 002B     		cmp	r3, #0
 2530 03ee 04D0     		beq	.L120
 517:bluetooth_rxtx.c **** 			HGM_SET;
 2531              		.loc 1 517 0
 2532 03f0 894B     		ldr	r3, .L155+4
 2533 03f2 4FF48072 		mov	r2, #256
 2534 03f6 1A60     		str	r2, [r3]
 518:bluetooth_rxtx.c **** 		else
 519:bluetooth_rxtx.c **** 			HGM_CLR;
 520:bluetooth_rxtx.c **** 		break;
 2535              		.loc 1 520 0
 2536 03f8 65E3     		b	.L109
 2537              	.L120:
 519:bluetooth_rxtx.c **** 		break;
 2538              		.loc 1 519 0
 2539 03fa 884B     		ldr	r3, .L155+8
 2540 03fc 4FF48072 		mov	r2, #256
 2541 0400 1A60     		str	r2, [r3]
 2542              		.loc 1 520 0
 2543 0402 60E3     		b	.L109
 2544              	.L70:
 521:bluetooth_rxtx.c **** #endif
 522:bluetooth_rxtx.c **** 
 523:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 524:bluetooth_rxtx.c **** 	case UBERTOOTH_TX_TEST:
 525:bluetooth_rxtx.c **** 		requested_mode = MODE_TX_TEST;
 2545              		.loc 1 525 0
 2546 0404 864B     		ldr	r3, .L155+12
 2547 0406 0322     		movs	r2, #3
 2548 0408 1A70     		strb	r2, [r3]
 526:bluetooth_rxtx.c **** 		break;
 2549              		.loc 1 526 0
 2550 040a 5CE3     		b	.L109
 2551              	.L77:
 527:bluetooth_rxtx.c **** 
 528:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_PALEVEL:
 529:bluetooth_rxtx.c **** 		data[0] = cc2400_get(FREND) & 0x7;
 2552              		.loc 1 529 0
 2553 040c 0520     		movs	r0, #5
 2554 040e FFF7FEFF 		bl	cc2400_get
 2555 0412 0346     		mov	r3, r0
 2556 0414 DBB2     		uxtb	r3, r3
 2557 0416 03F00703 		and	r3, r3, #7
 2558 041a DAB2     		uxtb	r2, r3
 2559 041c 7B68     		ldr	r3, [r7, #4]
 2560 041e 1A70     		strb	r2, [r3]
 530:bluetooth_rxtx.c **** 		*data_len = 1;
 2561              		.loc 1 530 0
 2562 0420 3B68     		ldr	r3, [r7]
 2563 0422 0122     		movs	r2, #1
ARM GAS  /tmp/cczWrdyg.s 			page 54


 2564 0424 1A60     		str	r2, [r3]
 531:bluetooth_rxtx.c **** 		break;
 2565              		.loc 1 531 0
 2566 0426 4EE3     		b	.L109
 2567              	.L78:
 532:bluetooth_rxtx.c **** 
 533:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_PALEVEL:
 534:bluetooth_rxtx.c **** 		if( request_params[0] < 8 ) {
 2568              		.loc 1 534 0
 2569 0428 BB68     		ldr	r3, [r7, #8]
 2570 042a 1B88     		ldrh	r3, [r3]
 2571 042c 072B     		cmp	r3, #7
 2572 042e 09D8     		bhi	.L122
 535:bluetooth_rxtx.c **** 			cc2400_set(FREND, 8 | request_params[0]);
 2573              		.loc 1 535 0
 2574 0430 BB68     		ldr	r3, [r7, #8]
 2575 0432 1B88     		ldrh	r3, [r3]
 2576 0434 43F00803 		orr	r3, r3, #8
 2577 0438 9BB2     		uxth	r3, r3
 2578 043a 0520     		movs	r0, #5
 2579 043c 1946     		mov	r1, r3
 2580 043e FFF7FEFF 		bl	cc2400_set
 536:bluetooth_rxtx.c **** 		} else {
 537:bluetooth_rxtx.c **** 			return 0;
 538:bluetooth_rxtx.c **** 		}
 539:bluetooth_rxtx.c **** 		break;
 2581              		.loc 1 539 0
 2582 0442 40E3     		b	.L109
 2583              	.L122:
 537:bluetooth_rxtx.c **** 		}
 2584              		.loc 1 537 0
 2585 0444 0023     		movs	r3, #0
 2586 0446 3FE3     		b	.L151
 2587              	.L80:
 540:bluetooth_rxtx.c **** 
 541:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_TEST:
 542:bluetooth_rxtx.c **** 		requested_mode = MODE_RANGE_TEST;
 2588              		.loc 1 542 0
 2589 0448 754B     		ldr	r3, .L155+12
 2590 044a 0522     		movs	r2, #5
 2591 044c 1A70     		strb	r2, [r3]
 543:bluetooth_rxtx.c **** 		break;
 2592              		.loc 1 543 0
 2593 044e 3AE3     		b	.L109
 2594              	.L79:
 544:bluetooth_rxtx.c **** 
 545:bluetooth_rxtx.c **** 	case UBERTOOTH_REPEATER:
 546:bluetooth_rxtx.c **** 		requested_mode = MODE_REPEATER;
 2595              		.loc 1 546 0
 2596 0450 734B     		ldr	r3, .L155+12
 2597 0452 0622     		movs	r2, #6
 2598 0454 1A70     		strb	r2, [r3]
 547:bluetooth_rxtx.c **** 		break;
 2599              		.loc 1 547 0
 2600 0456 36E3     		b	.L109
 2601              	.L81:
 548:bluetooth_rxtx.c **** #endif
ARM GAS  /tmp/cczWrdyg.s 			page 55


 549:bluetooth_rxtx.c **** 
 550:bluetooth_rxtx.c **** 	case UBERTOOTH_RANGE_CHECK:
 551:bluetooth_rxtx.c **** 		data[0] = rr.valid;
 2602              		.loc 1 551 0
 2603 0458 724B     		ldr	r3, .L155+16
 2604 045a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2605 045c 7B68     		ldr	r3, [r7, #4]
 2606 045e 1A70     		strb	r2, [r3]
 552:bluetooth_rxtx.c **** 		data[1] = rr.request_pa;
 2607              		.loc 1 552 0
 2608 0460 7B68     		ldr	r3, [r7, #4]
 2609 0462 0133     		adds	r3, r3, #1
 2610 0464 6F4A     		ldr	r2, .L155+16
 2611 0466 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 2612 0468 1A70     		strb	r2, [r3]
 553:bluetooth_rxtx.c **** 		data[2] = rr.request_num;
 2613              		.loc 1 553 0
 2614 046a 7B68     		ldr	r3, [r7, #4]
 2615 046c 0233     		adds	r3, r3, #2
 2616 046e 6D4A     		ldr	r2, .L155+16
 2617 0470 9278     		ldrb	r2, [r2, #2]	@ zero_extendqisi2
 2618 0472 1A70     		strb	r2, [r3]
 554:bluetooth_rxtx.c **** 		data[3] = rr.reply_pa;
 2619              		.loc 1 554 0
 2620 0474 7B68     		ldr	r3, [r7, #4]
 2621 0476 0333     		adds	r3, r3, #3
 2622 0478 6A4A     		ldr	r2, .L155+16
 2623 047a D278     		ldrb	r2, [r2, #3]	@ zero_extendqisi2
 2624 047c 1A70     		strb	r2, [r3]
 555:bluetooth_rxtx.c **** 		data[4] = rr.reply_num;
 2625              		.loc 1 555 0
 2626 047e 7B68     		ldr	r3, [r7, #4]
 2627 0480 0433     		adds	r3, r3, #4
 2628 0482 684A     		ldr	r2, .L155+16
 2629 0484 1279     		ldrb	r2, [r2, #4]	@ zero_extendqisi2
 2630 0486 1A70     		strb	r2, [r3]
 556:bluetooth_rxtx.c **** 		*data_len = 5;
 2631              		.loc 1 556 0
 2632 0488 3B68     		ldr	r3, [r7]
 2633 048a 0522     		movs	r2, #5
 2634 048c 1A60     		str	r2, [r3]
 557:bluetooth_rxtx.c **** 		break;
 2635              		.loc 1 557 0
 2636 048e 1AE3     		b	.L109
 2637              	.L71:
 558:bluetooth_rxtx.c **** 
 559:bluetooth_rxtx.c **** 	case UBERTOOTH_STOP:
 560:bluetooth_rxtx.c **** 		requested_mode = MODE_IDLE;
 2638              		.loc 1 560 0
 2639 0490 634B     		ldr	r3, .L155+12
 2640 0492 0022     		movs	r2, #0
 2641 0494 1A70     		strb	r2, [r3]
 561:bluetooth_rxtx.c **** 		break;
 2642              		.loc 1 561 0
 2643 0496 16E3     		b	.L109
 2644              	.L72:
 562:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cczWrdyg.s 			page 56


 563:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_MOD:
 564:bluetooth_rxtx.c **** 		data[0] = modulation;
 2645              		.loc 1 564 0
 2646 0498 634B     		ldr	r3, .L155+20
 2647 049a 1B78     		ldrb	r3, [r3]
 2648 049c DAB2     		uxtb	r2, r3
 2649 049e 7B68     		ldr	r3, [r7, #4]
 2650 04a0 1A70     		strb	r2, [r3]
 565:bluetooth_rxtx.c **** 		*data_len = 1;
 2651              		.loc 1 565 0
 2652 04a2 3B68     		ldr	r3, [r7]
 2653 04a4 0122     		movs	r2, #1
 2654 04a6 1A60     		str	r2, [r3]
 566:bluetooth_rxtx.c **** 		break;
 2655              		.loc 1 566 0
 2656 04a8 0DE3     		b	.L109
 2657              	.L73:
 567:bluetooth_rxtx.c **** 
 568:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_MOD:
 569:bluetooth_rxtx.c **** 		modulation = request_params[0];
 2658              		.loc 1 569 0
 2659 04aa BB68     		ldr	r3, [r7, #8]
 2660 04ac 1B88     		ldrh	r3, [r3]
 2661 04ae DAB2     		uxtb	r2, r3
 2662 04b0 5D4B     		ldr	r3, .L155+20
 2663 04b2 1A70     		strb	r2, [r3]
 570:bluetooth_rxtx.c **** 		break;
 2664              		.loc 1 570 0
 2665 04b4 07E3     		b	.L109
 2666              	.L61:
 571:bluetooth_rxtx.c **** 
 572:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CHANNEL:
 573:bluetooth_rxtx.c **** 		data[0] = channel & 0xFF;
 2667              		.loc 1 573 0
 2668 04b6 5D4B     		ldr	r3, .L155+24
 2669 04b8 1B88     		ldrh	r3, [r3]	@ movhi
 2670 04ba 9BB2     		uxth	r3, r3
 2671 04bc DAB2     		uxtb	r2, r3
 2672 04be 7B68     		ldr	r3, [r7, #4]
 2673 04c0 1A70     		strb	r2, [r3]
 574:bluetooth_rxtx.c **** 		data[1] = (channel >> 8) & 0xFF;
 2674              		.loc 1 574 0
 2675 04c2 7B68     		ldr	r3, [r7, #4]
 2676 04c4 0133     		adds	r3, r3, #1
 2677 04c6 594A     		ldr	r2, .L155+24
 2678 04c8 1288     		ldrh	r2, [r2]	@ movhi
 2679 04ca 92B2     		uxth	r2, r2
 2680 04cc 120A     		lsrs	r2, r2, #8
 2681 04ce 92B2     		uxth	r2, r2
 2682 04d0 D2B2     		uxtb	r2, r2
 2683 04d2 1A70     		strb	r2, [r3]
 575:bluetooth_rxtx.c **** 		*data_len = 2;
 2684              		.loc 1 575 0
 2685 04d4 3B68     		ldr	r3, [r7]
 2686 04d6 0222     		movs	r2, #2
 2687 04d8 1A60     		str	r2, [r3]
 576:bluetooth_rxtx.c **** 		break;
ARM GAS  /tmp/cczWrdyg.s 			page 57


 2688              		.loc 1 576 0
 2689 04da F4E2     		b	.L109
 2690              	.L62:
 577:bluetooth_rxtx.c **** 
 578:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CHANNEL:
 579:bluetooth_rxtx.c **** 		requested_channel = request_params[0];
 2691              		.loc 1 579 0
 2692 04dc BB68     		ldr	r3, [r7, #8]
 2693 04de 1A88     		ldrh	r2, [r3]
 2694 04e0 534B     		ldr	r3, .L155+28
 2695 04e2 1A80     		strh	r2, [r3]	@ movhi
 580:bluetooth_rxtx.c **** 		/* bluetooth band sweep mode, start at channel 2402 */
 581:bluetooth_rxtx.c **** 		if (requested_channel > MAX_FREQ) {
 2696              		.loc 1 581 0
 2697 04e4 524B     		ldr	r3, .L155+28
 2698 04e6 1B88     		ldrh	r3, [r3]	@ movhi
 2699 04e8 9BB2     		uxth	r3, r3
 2700 04ea 40F6EA22 		movw	r2, #2794
 2701 04ee 9342     		cmp	r3, r2
 2702 04f0 07D9     		bls	.L125
 582:bluetooth_rxtx.c **** 			hop_mode = HOP_SWEEP;
 2703              		.loc 1 582 0
 2704 04f2 504B     		ldr	r3, .L155+32
 2705 04f4 0122     		movs	r2, #1
 2706 04f6 1A70     		strb	r2, [r3]
 583:bluetooth_rxtx.c **** 			requested_channel = 2402;
 2707              		.loc 1 583 0
 2708 04f8 4D4B     		ldr	r3, .L155+28
 2709 04fa 40F66212 		movw	r2, #2402
 2710 04fe 1A80     		strh	r2, [r3]	@ movhi
 2711 0500 20E0     		b	.L126
 2712              	.L125:
 584:bluetooth_rxtx.c **** 		}
 585:bluetooth_rxtx.c **** 		/* fixed channel mode, can be outside bluetooth band */
 586:bluetooth_rxtx.c **** 		else {
 587:bluetooth_rxtx.c **** 			hop_mode = HOP_NONE;
 2713              		.loc 1 587 0
 2714 0502 4C4B     		ldr	r3, .L155+32
 2715 0504 0022     		movs	r2, #0
 2716 0506 1A70     		strb	r2, [r3]
 588:bluetooth_rxtx.c **** 			requested_channel = MAX(requested_channel, MIN_FREQ);
 2717              		.loc 1 588 0
 2718 0508 494B     		ldr	r3, .L155+28
 2719 050a 1B88     		ldrh	r3, [r3]	@ movhi
 2720 050c 9BB2     		uxth	r3, r3
 2721 050e 40F6DC02 		movw	r2, #2268
 2722 0512 9342     		cmp	r3, r2
 2723 0514 03D9     		bls	.L127
 2724              		.loc 1 588 0 is_stmt 0 discriminator 1
 2725 0516 464B     		ldr	r3, .L155+28
 2726 0518 1B88     		ldrh	r3, [r3]	@ movhi
 2727 051a 9BB2     		uxth	r3, r3
 2728 051c 01E0     		b	.L128
 2729              	.L127:
 2730              		.loc 1 588 0 discriminator 2
 2731 051e 40F6DC03 		movw	r3, #2268
 2732              	.L128:
ARM GAS  /tmp/cczWrdyg.s 			page 58


 2733              		.loc 1 588 0 discriminator 4
 2734 0522 434A     		ldr	r2, .L155+28
 2735 0524 1380     		strh	r3, [r2]	@ movhi
 589:bluetooth_rxtx.c **** 			requested_channel = MIN(requested_channel, MAX_FREQ);
 2736              		.loc 1 589 0 is_stmt 1 discriminator 4
 2737 0526 424B     		ldr	r3, .L155+28
 2738 0528 1B88     		ldrh	r3, [r3]	@ movhi
 2739 052a 9BB2     		uxth	r3, r3
 2740 052c 40F6E922 		movw	r2, #2793
 2741 0530 9342     		cmp	r3, r2
 2742 0532 03D8     		bhi	.L129
 2743              		.loc 1 589 0 is_stmt 0 discriminator 1
 2744 0534 3E4B     		ldr	r3, .L155+28
 2745 0536 1B88     		ldrh	r3, [r3]	@ movhi
 2746 0538 9BB2     		uxth	r3, r3
 2747 053a 01E0     		b	.L130
 2748              	.L129:
 2749              		.loc 1 589 0 discriminator 2
 2750 053c 40F6EA23 		movw	r3, #2794
 2751              	.L130:
 2752              		.loc 1 589 0 discriminator 4
 2753 0540 3B4A     		ldr	r2, .L155+28
 2754 0542 1380     		strh	r3, [r2]	@ movhi
 2755              	.L126:
 590:bluetooth_rxtx.c **** 		}
 591:bluetooth_rxtx.c **** 
 592:bluetooth_rxtx.c **** 		if (mode != MODE_BT_FOLLOW_LE) {
 2756              		.loc 1 592 0 is_stmt 1
 2757 0544 3C4B     		ldr	r3, .L155+36
 2758 0546 1B78     		ldrb	r3, [r3]
 2759 0548 DBB2     		uxtb	r3, r3
 2760 054a 092B     		cmp	r3, #9
 2761 054c 0AD0     		beq	.L131
 593:bluetooth_rxtx.c **** 			channel = requested_channel;
 2762              		.loc 1 593 0
 2763 054e 384B     		ldr	r3, .L155+28
 2764 0550 1B88     		ldrh	r3, [r3]	@ movhi
 2765 0552 9AB2     		uxth	r2, r3
 2766 0554 354B     		ldr	r3, .L155+24
 2767 0556 1A80     		strh	r2, [r3]	@ movhi
 594:bluetooth_rxtx.c **** 			requested_channel = 0;
 2768              		.loc 1 594 0
 2769 0558 354B     		ldr	r3, .L155+28
 2770 055a 0022     		movs	r2, #0
 2771 055c 1A80     		strh	r2, [r3]	@ movhi
 595:bluetooth_rxtx.c **** 
 596:bluetooth_rxtx.c **** 			/* CS threshold is mode-dependent. Update it after
 597:bluetooth_rxtx.c **** 			 * possible mode change. TODO - kludgy. */
 598:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 2772              		.loc 1 598 0
 2773 055e FFF7FEFF 		bl	cs_threshold_calc_and_set
 599:bluetooth_rxtx.c **** 		}
 600:bluetooth_rxtx.c **** 		break;
 2774              		.loc 1 600 0
 2775 0562 B0E2     		b	.L109
 2776              	.L131:
 2777 0564 AFE2     		b	.L109
ARM GAS  /tmp/cczWrdyg.s 			page 59


 2778              	.L74:
 601:bluetooth_rxtx.c **** 
 602:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ISP:
 603:bluetooth_rxtx.c **** 		command[0] = 57;
 2779              		.loc 1 603 0
 2780 0566 3923     		movs	r3, #57
 2781 0568 7B62     		str	r3, [r7, #36]
 604:bluetooth_rxtx.c **** 		iap_entry(command, result);
 2782              		.loc 1 604 0
 2783 056a 344B     		ldr	r3, .L155+40
 2784 056c 1B68     		ldr	r3, [r3]
 2785 056e 07F12401 		add	r1, r7, #36
 2786 0572 07F11002 		add	r2, r7, #16
 2787 0576 0846     		mov	r0, r1
 2788 0578 1146     		mov	r1, r2
 2789 057a 9847     		blx	r3
 605:bluetooth_rxtx.c **** 		*data_len = 0; /* should never return */
 2790              		.loc 1 605 0
 2791 057c 3B68     		ldr	r3, [r7]
 2792 057e 0022     		movs	r2, #0
 2793 0580 1A60     		str	r2, [r3]
 606:bluetooth_rxtx.c **** 		break;
 2794              		.loc 1 606 0
 2795 0582 A0E2     		b	.L109
 2796              	.L75:
 607:bluetooth_rxtx.c **** 
 608:bluetooth_rxtx.c **** 	case UBERTOOTH_FLASH:
 609:bluetooth_rxtx.c **** 		bootloader_ctrl = DFU_MODE;
 2797              		.loc 1 609 0
 2798 0584 2E4B     		ldr	r3, .L155+44
 2799 0586 2F4A     		ldr	r2, .L155+48
 2800 0588 1A60     		str	r2, [r3]
 610:bluetooth_rxtx.c **** 		reset();
 2801              		.loc 1 610 0
 2802 058a FFF7FEFF 		bl	reset
 611:bluetooth_rxtx.c **** 		break;
 2803              		.loc 1 611 0
 2804 058e 9AE2     		b	.L109
 2805              	.L76:
 612:bluetooth_rxtx.c **** 
 613:bluetooth_rxtx.c **** 	case UBERTOOTH_SPECAN:
 614:bluetooth_rxtx.c **** 		if (request_params[0] < 2049 || request_params[0] > 3072 || 
 2806              		.loc 1 614 0
 2807 0590 BB68     		ldr	r3, [r7, #8]
 2808 0592 1B88     		ldrh	r3, [r3]
 2809 0594 B3F5006F 		cmp	r3, #2048
 2810 0598 17D9     		bls	.L132
 2811              		.loc 1 614 0 is_stmt 0 discriminator 1
 2812 059a BB68     		ldr	r3, [r7, #8]
 2813 059c 1B88     		ldrh	r3, [r3]
 2814 059e B3F5406F 		cmp	r3, #3072
 2815 05a2 12D8     		bhi	.L132
 615:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2816              		.loc 1 615 0 is_stmt 1 discriminator 2
 2817 05a4 BB68     		ldr	r3, [r7, #8]
 2818 05a6 0233     		adds	r3, r3, #2
 2819 05a8 1B88     		ldrh	r3, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 60


 614:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2820              		.loc 1 614 0 discriminator 2
 2821 05aa B3F5006F 		cmp	r3, #2048
 2822 05ae 0CD9     		bls	.L132
 2823              		.loc 1 615 0
 2824 05b0 BB68     		ldr	r3, [r7, #8]
 2825 05b2 0233     		adds	r3, r3, #2
 2826 05b4 1B88     		ldrh	r3, [r3]
 2827 05b6 B3F5406F 		cmp	r3, #3072
 2828 05ba 06D8     		bhi	.L132
 616:bluetooth_rxtx.c **** 				request_params[1] < request_params[0])
 2829              		.loc 1 616 0 discriminator 1
 2830 05bc BB68     		ldr	r3, [r7, #8]
 2831 05be 0233     		adds	r3, r3, #2
 2832 05c0 1A88     		ldrh	r2, [r3]
 2833 05c2 BB68     		ldr	r3, [r7, #8]
 2834 05c4 1B88     		ldrh	r3, [r3]
 615:bluetooth_rxtx.c **** 				request_params[1] < 2049 || request_params[1] > 3072 ||
 2835              		.loc 1 615 0 discriminator 1
 2836 05c6 9A42     		cmp	r2, r3
 2837 05c8 01D2     		bcs	.L133
 2838              	.L132:
 617:bluetooth_rxtx.c **** 			return 0;
 2839              		.loc 1 617 0
 2840 05ca 0023     		movs	r3, #0
 2841 05cc 7CE2     		b	.L151
 2842              	.L133:
 618:bluetooth_rxtx.c **** 		low_freq = request_params[0];
 2843              		.loc 1 618 0
 2844 05ce BB68     		ldr	r3, [r7, #8]
 2845 05d0 1A88     		ldrh	r2, [r3]
 2846 05d2 1D4B     		ldr	r3, .L155+52
 2847 05d4 1A80     		strh	r2, [r3]	@ movhi
 619:bluetooth_rxtx.c **** 		high_freq = request_params[1];
 2848              		.loc 1 619 0
 2849 05d6 BB68     		ldr	r3, [r7, #8]
 2850 05d8 5A88     		ldrh	r2, [r3, #2]
 2851 05da 1C4B     		ldr	r3, .L155+56
 2852 05dc 1A80     		strh	r2, [r3]	@ movhi
 620:bluetooth_rxtx.c **** 		requested_mode = MODE_SPECAN;
 2853              		.loc 1 620 0
 2854 05de 104B     		ldr	r3, .L155+12
 2855 05e0 0422     		movs	r2, #4
 2856 05e2 1A70     		strb	r2, [r3]
 621:bluetooth_rxtx.c **** 		*data_len = 0;
 2857              		.loc 1 621 0
 2858 05e4 3B68     		ldr	r3, [r7]
 2859 05e6 0022     		movs	r2, #0
 2860 05e8 1A60     		str	r2, [r3]
 622:bluetooth_rxtx.c **** 		break;
 2861              		.loc 1 622 0
 2862 05ea 6CE2     		b	.L109
 2863              	.L83:
 623:bluetooth_rxtx.c **** 
 624:bluetooth_rxtx.c **** 	case UBERTOOTH_LED_SPECAN:
 625:bluetooth_rxtx.c **** 		if (request_params[0] > 256)
 2864              		.loc 1 625 0
ARM GAS  /tmp/cczWrdyg.s 			page 61


 2865 05ec BB68     		ldr	r3, [r7, #8]
 2866 05ee 1B88     		ldrh	r3, [r3]
 2867 05f0 B3F5807F 		cmp	r3, #256
 2868 05f4 01D9     		bls	.L134
 626:bluetooth_rxtx.c **** 			return 0;
 2869              		.loc 1 626 0
 2870 05f6 0023     		movs	r3, #0
 2871 05f8 66E2     		b	.L151
 2872              	.L134:
 627:bluetooth_rxtx.c **** 		rssi_threshold = (int8_t)request_params[0];
 2873              		.loc 1 627 0
 2874 05fa BB68     		ldr	r3, [r7, #8]
 2875 05fc 1B88     		ldrh	r3, [r3]
 2876 05fe DAB2     		uxtb	r2, r3
 2877 0600 134B     		ldr	r3, .L155+60
 2878 0602 1A70     		strb	r2, [r3]
 628:bluetooth_rxtx.c **** 		requested_mode = MODE_LED_SPECAN;
 2879              		.loc 1 628 0
 2880 0604 064B     		ldr	r3, .L155+12
 2881 0606 0722     		movs	r2, #7
 2882 0608 1A70     		strb	r2, [r3]
 629:bluetooth_rxtx.c **** 		*data_len = 0;
 2883              		.loc 1 629 0
 2884 060a 3B68     		ldr	r3, [r7]
 2885 060c 0022     		movs	r2, #0
 2886 060e 1A60     		str	r2, [r3]
 630:bluetooth_rxtx.c **** 		break;
 2887              		.loc 1 630 0
 2888 0610 59E2     		b	.L109
 2889              	.L156:
 2890 0612 00BF     		.align	2
 2891              	.L155:
 2892 0614 54C00920 		.word	537509972
 2893 0618 58C00920 		.word	537509976
 2894 061c 5CC00920 		.word	537509980
 2895 0620 00000000 		.word	requested_mode
 2896 0624 00000000 		.word	rr
 2897 0628 00000000 		.word	modulation
 2898 062c 00000000 		.word	channel
 2899 0630 00000000 		.word	requested_channel
 2900 0634 00000000 		.word	hop_mode
 2901 0638 00000000 		.word	mode
 2902 063c 00000000 		.word	iap_entry
 2903 0640 00000000 		.word	bootloader_ctrl
 2904 0644 21BB0543 		.word	1124449057
 2905 0648 00000000 		.word	low_freq
 2906 064c 00000000 		.word	high_freq
 2907 0650 00000000 		.word	rssi_threshold
 2908              	.L82:
 631:bluetooth_rxtx.c **** 
 632:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_REV_NUM:
 633:bluetooth_rxtx.c **** 		data[0] = 0x00;
 2909              		.loc 1 633 0
 2910 0654 7B68     		ldr	r3, [r7, #4]
 2911 0656 0022     		movs	r2, #0
 2912 0658 1A70     		strb	r2, [r3]
 634:bluetooth_rxtx.c **** 		data[1] = 0x00;
ARM GAS  /tmp/cczWrdyg.s 			page 62


 2913              		.loc 1 634 0
 2914 065a 7B68     		ldr	r3, [r7, #4]
 2915 065c 0133     		adds	r3, r3, #1
 2916 065e 0022     		movs	r2, #0
 2917 0660 1A70     		strb	r2, [r3]
 635:bluetooth_rxtx.c **** 
 636:bluetooth_rxtx.c **** 		length = (u8)strlen(GIT_REVISION);
 2918              		.loc 1 636 0
 2919 0662 A448     		ldr	r0, .L157
 2920 0664 FFF7FEFF 		bl	strlen
 2921 0668 0346     		mov	r3, r0
 2922 066a 87F84330 		strb	r3, [r7, #67]
 637:bluetooth_rxtx.c **** 		data[2] = length;
 2923              		.loc 1 637 0
 2924 066e 7B68     		ldr	r3, [r7, #4]
 2925 0670 0233     		adds	r3, r3, #2
 2926 0672 97F84320 		ldrb	r2, [r7, #67]
 2927 0676 1A70     		strb	r2, [r3]
 638:bluetooth_rxtx.c **** 
 639:bluetooth_rxtx.c **** 		memcpy(&data[3], GIT_REVISION, length);
 2928              		.loc 1 639 0
 2929 0678 7B68     		ldr	r3, [r7, #4]
 2930 067a DA1C     		adds	r2, r3, #3
 2931 067c 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2932 0680 1046     		mov	r0, r2
 2933 0682 9C49     		ldr	r1, .L157
 2934 0684 1A46     		mov	r2, r3
 2935 0686 FFF7FEFF 		bl	memcpy
 640:bluetooth_rxtx.c **** 
 641:bluetooth_rxtx.c **** 		*data_len = 2 + 1 + length;
 2936              		.loc 1 641 0
 2937 068a 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2938 068e DA1C     		adds	r2, r3, #3
 2939 0690 3B68     		ldr	r3, [r7]
 2940 0692 1A60     		str	r2, [r3]
 642:bluetooth_rxtx.c **** 		break;
 2941              		.loc 1 642 0
 2942 0694 17E2     		b	.L109
 2943              	.L104:
 643:bluetooth_rxtx.c **** 
 644:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_COMPILE_INFO:
 645:bluetooth_rxtx.c **** 		length = (u8)strlen(compile_info);
 2944              		.loc 1 645 0
 2945 0696 9848     		ldr	r0, .L157+4
 2946 0698 FFF7FEFF 		bl	strlen
 2947 069c 0346     		mov	r3, r0
 2948 069e 87F84330 		strb	r3, [r7, #67]
 646:bluetooth_rxtx.c **** 		data[0] = length;
 2949              		.loc 1 646 0
 2950 06a2 7B68     		ldr	r3, [r7, #4]
 2951 06a4 97F84320 		ldrb	r2, [r7, #67]
 2952 06a8 1A70     		strb	r2, [r3]
 647:bluetooth_rxtx.c **** 		memcpy(&data[1], compile_info, length);
 2953              		.loc 1 647 0
 2954 06aa 7B68     		ldr	r3, [r7, #4]
 2955 06ac 5A1C     		adds	r2, r3, #1
 2956 06ae 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
ARM GAS  /tmp/cczWrdyg.s 			page 63


 2957 06b2 1046     		mov	r0, r2
 2958 06b4 9049     		ldr	r1, .L157+4
 2959 06b6 1A46     		mov	r2, r3
 2960 06b8 FFF7FEFF 		bl	memcpy
 648:bluetooth_rxtx.c **** 		*data_len = 1 + length;
 2961              		.loc 1 648 0
 2962 06bc 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
 2963 06c0 5A1C     		adds	r2, r3, #1
 2964 06c2 3B68     		ldr	r3, [r7]
 2965 06c4 1A60     		str	r2, [r3]
 649:bluetooth_rxtx.c **** 		break;
 2966              		.loc 1 649 0
 2967 06c6 FEE1     		b	.L109
 2968              	.L84:
 650:bluetooth_rxtx.c **** 
 651:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_BOARD_ID:
 652:bluetooth_rxtx.c **** 		data[0] = BOARD_ID;
 2969              		.loc 1 652 0
 2970 06c8 7B68     		ldr	r3, [r7, #4]
 2971 06ca 0122     		movs	r2, #1
 2972 06cc 1A70     		strb	r2, [r3]
 653:bluetooth_rxtx.c **** 		*data_len = 1;
 2973              		.loc 1 653 0
 2974 06ce 3B68     		ldr	r3, [r7]
 2975 06d0 0122     		movs	r2, #1
 2976 06d2 1A60     		str	r2, [r3]
 654:bluetooth_rxtx.c **** 		break;
 2977              		.loc 1 654 0
 2978 06d4 F7E1     		b	.L109
 2979              	.L85:
 655:bluetooth_rxtx.c **** 
 656:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_SQUELCH:
 657:bluetooth_rxtx.c **** 		cs_threshold_req = (int8_t)request_params[0];
 2980              		.loc 1 657 0
 2981 06d6 BB68     		ldr	r3, [r7, #8]
 2982 06d8 1B88     		ldrh	r3, [r3]
 2983 06da DAB2     		uxtb	r2, r3
 2984 06dc 874B     		ldr	r3, .L157+8
 2985 06de 1A70     		strb	r2, [r3]
 658:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 2986              		.loc 1 658 0
 2987 06e0 FFF7FEFF 		bl	cs_threshold_calc_and_set
 659:bluetooth_rxtx.c **** 		break;
 2988              		.loc 1 659 0
 2989 06e4 EFE1     		b	.L109
 2990              	.L86:
 660:bluetooth_rxtx.c **** 
 661:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_SQUELCH:
 662:bluetooth_rxtx.c **** 		data[0] = cs_threshold_req;
 2991              		.loc 1 662 0
 2992 06e6 854B     		ldr	r3, .L157+8
 2993 06e8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2994 06ea DAB2     		uxtb	r2, r3
 2995 06ec 7B68     		ldr	r3, [r7, #4]
 2996 06ee 1A70     		strb	r2, [r3]
 663:bluetooth_rxtx.c **** 		*data_len = 1;
 2997              		.loc 1 663 0
ARM GAS  /tmp/cczWrdyg.s 			page 64


 2998 06f0 3B68     		ldr	r3, [r7]
 2999 06f2 0122     		movs	r2, #1
 3000 06f4 1A60     		str	r2, [r3]
 664:bluetooth_rxtx.c **** 		break;
 3001              		.loc 1 664 0
 3002 06f6 E6E1     		b	.L109
 3003              	.L87:
 665:bluetooth_rxtx.c **** 
 666:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_BDADDR:
 667:bluetooth_rxtx.c **** 		target.address = 0;
 3004              		.loc 1 667 0
 3005 06f8 8149     		ldr	r1, .L157+12
 3006 06fa 4FF00002 		mov	r2, #0
 3007 06fe 4FF00003 		mov	r3, #0
 3008 0702 C1E90023 		strd	r2, [r1]
 668:bluetooth_rxtx.c **** 		target.access_code = 0;
 3009              		.loc 1 668 0
 3010 0706 7E49     		ldr	r1, .L157+12
 3011 0708 4FF00002 		mov	r2, #0
 3012 070c 4FF00003 		mov	r3, #0
 3013 0710 C1E90223 		strd	r2, [r1, #8]
 669:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3014              		.loc 1 669 0
 3015 0714 0023     		movs	r3, #0
 3016 0716 FB64     		str	r3, [r7, #76]
 3017 0718 25E0     		b	.L135
 3018              	.L136:
 670:bluetooth_rxtx.c **** 			target.address |= (uint64_t)data[i] << 8*i;
 3019              		.loc 1 670 0 discriminator 3
 3020 071a 794B     		ldr	r3, .L157+12
 3021 071c D3E900AB 		ldrd	r10, [r3]
 3022 0720 FB6C     		ldr	r3, [r7, #76]
 3023 0722 7A68     		ldr	r2, [r7, #4]
 3024 0724 1344     		add	r3, r3, r2
 3025 0726 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3026 0728 DAB2     		uxtb	r2, r3
 3027 072a 4FF00003 		mov	r3, #0
 3028 072e F96C     		ldr	r1, [r7, #76]
 3029 0730 C900     		lsls	r1, r1, #3
 3030 0732 A1F12006 		sub	r6, r1, #32
 3031 0736 C1F12000 		rsb	r0, r1, #32
 3032 073a 03FA01F9 		lsl	r9, r3, r1
 3033 073e 02FA06F6 		lsl	r6, r2, r6
 3034 0742 49EA0609 		orr	r9, r9, r6
 3035 0746 22FA00F0 		lsr	r0, r2, r0
 3036 074a 49EA0009 		orr	r9, r9, r0
 3037 074e 02FA01F8 		lsl	r8, r2, r1
 3038 0752 4AEA0802 		orr	r2, r10, r8
 3039 0756 4BEA0903 		orr	r3, fp, r9
 3040 075a 6949     		ldr	r1, .L157+12
 3041 075c C1E90023 		strd	r2, [r1]
 669:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3042              		.loc 1 669 0 discriminator 3
 3043 0760 FB6C     		ldr	r3, [r7, #76]
 3044 0762 0133     		adds	r3, r3, #1
 3045 0764 FB64     		str	r3, [r7, #76]
 3046              	.L135:
ARM GAS  /tmp/cczWrdyg.s 			page 65


 669:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3047              		.loc 1 669 0 is_stmt 0 discriminator 1
 3048 0766 FB6C     		ldr	r3, [r7, #76]
 3049 0768 072B     		cmp	r3, #7
 3050 076a D6DD     		ble	.L136
 671:bluetooth_rxtx.c **** 		}
 672:bluetooth_rxtx.c **** 		for(i=0; i < 8; i++) {
 3051              		.loc 1 672 0 is_stmt 1
 3052 076c 0023     		movs	r3, #0
 3053 076e FB64     		str	r3, [r7, #76]
 3054 0770 24E0     		b	.L137
 3055              	.L138:
 673:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3056              		.loc 1 673 0 discriminator 3
 3057 0772 634B     		ldr	r3, .L157+12
 3058 0774 D3E90289 		ldrd	r8, [r3, #8]
 3059 0778 FB6C     		ldr	r3, [r7, #76]
 3060 077a 0833     		adds	r3, r3, #8
 3061 077c 7A68     		ldr	r2, [r7, #4]
 3062 077e 1344     		add	r3, r3, r2
 3063 0780 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3064 0782 DAB2     		uxtb	r2, r3
 3065 0784 4FF00003 		mov	r3, #0
 3066 0788 F96C     		ldr	r1, [r7, #76]
 3067 078a C900     		lsls	r1, r1, #3
 3068 078c A1F12006 		sub	r6, r1, #32
 3069 0790 C1F12000 		rsb	r0, r1, #32
 3070 0794 03FA01F5 		lsl	r5, r3, r1
 3071 0798 02FA06F6 		lsl	r6, r2, r6
 3072 079c 3543     		orrs	r5, r5, r6
 3073 079e 22FA00F0 		lsr	r0, r2, r0
 3074 07a2 0543     		orrs	r5, r5, r0
 3075 07a4 02FA01F4 		lsl	r4, r2, r1
 3076 07a8 48EA0402 		orr	r2, r8, r4
 3077 07ac 49EA0503 		orr	r3, r9, r5
 3078 07b0 5349     		ldr	r1, .L157+12
 3079 07b2 C1E90223 		strd	r2, [r1, #8]
 672:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3080              		.loc 1 672 0 discriminator 3
 3081 07b6 FB6C     		ldr	r3, [r7, #76]
 3082 07b8 0133     		adds	r3, r3, #1
 3083 07ba FB64     		str	r3, [r7, #76]
 3084              	.L137:
 672:bluetooth_rxtx.c **** 			target.access_code |= (uint64_t)data[i+8] << 8*i;
 3085              		.loc 1 672 0 is_stmt 0 discriminator 1
 3086 07bc FB6C     		ldr	r3, [r7, #76]
 3087 07be 072B     		cmp	r3, #7
 3088 07c0 D7DD     		ble	.L138
 674:bluetooth_rxtx.c **** 		}
 675:bluetooth_rxtx.c **** 		break;
 3089              		.loc 1 675 0 is_stmt 1
 3090 07c2 80E1     		b	.L109
 3091              	.L88:
 676:bluetooth_rxtx.c **** 
 677:bluetooth_rxtx.c **** 	case UBERTOOTH_START_HOPPING:
 678:bluetooth_rxtx.c **** 		clock_offset = 0;
 3092              		.loc 1 678 0
ARM GAS  /tmp/cczWrdyg.s 			page 66


 3093 07c4 0023     		movs	r3, #0
 3094 07c6 BB64     		str	r3, [r7, #72]
 679:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3095              		.loc 1 679 0
 3096 07c8 0023     		movs	r3, #0
 3097 07ca FB64     		str	r3, [r7, #76]
 3098 07cc 0DE0     		b	.L139
 3099              	.L140:
 680:bluetooth_rxtx.c **** 			clock_offset <<= 8;
 3100              		.loc 1 680 0 discriminator 3
 3101 07ce BB6C     		ldr	r3, [r7, #72]
 3102 07d0 1B02     		lsls	r3, r3, #8
 3103 07d2 BB64     		str	r3, [r7, #72]
 681:bluetooth_rxtx.c **** 			clock_offset |= data[i];
 3104              		.loc 1 681 0 discriminator 3
 3105 07d4 FB6C     		ldr	r3, [r7, #76]
 3106 07d6 7A68     		ldr	r2, [r7, #4]
 3107 07d8 1344     		add	r3, r3, r2
 3108 07da 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3109 07dc 1A46     		mov	r2, r3
 3110 07de BB6C     		ldr	r3, [r7, #72]
 3111 07e0 1343     		orrs	r3, r3, r2
 3112 07e2 BB64     		str	r3, [r7, #72]
 679:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3113              		.loc 1 679 0 discriminator 3
 3114 07e4 FB6C     		ldr	r3, [r7, #76]
 3115 07e6 0133     		adds	r3, r3, #1
 3116 07e8 FB64     		str	r3, [r7, #76]
 3117              	.L139:
 679:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3118              		.loc 1 679 0 is_stmt 0 discriminator 1
 3119 07ea FB6C     		ldr	r3, [r7, #76]
 3120 07ec 032B     		cmp	r3, #3
 3121 07ee EEDD     		ble	.L140
 682:bluetooth_rxtx.c **** 		}
 683:bluetooth_rxtx.c **** 		clkn += clock_offset;
 3122              		.loc 1 683 0 is_stmt 1
 3123 07f0 444B     		ldr	r3, .L157+16
 3124 07f2 1A68     		ldr	r2, [r3]
 3125 07f4 BB6C     		ldr	r3, [r7, #72]
 3126 07f6 1344     		add	r3, r3, r2
 3127 07f8 424A     		ldr	r2, .L157+16
 3128 07fa 1360     		str	r3, [r2]
 684:bluetooth_rxtx.c **** 		hop_mode = HOP_BLUETOOTH;
 3129              		.loc 1 684 0
 3130 07fc 424B     		ldr	r3, .L157+20
 3131 07fe 0222     		movs	r2, #2
 3132 0800 1A70     		strb	r2, [r3]
 685:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW;
 3133              		.loc 1 685 0
 3134 0802 424B     		ldr	r3, .L157+24
 3135 0804 0822     		movs	r2, #8
 3136 0806 1A70     		strb	r2, [r3]
 686:bluetooth_rxtx.c **** 		break;
 3137              		.loc 1 686 0
 3138 0808 5DE1     		b	.L109
 3139              	.L89:
ARM GAS  /tmp/cczWrdyg.s 			page 67


 687:bluetooth_rxtx.c **** 
 688:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CLOCK:
 689:bluetooth_rxtx.c **** 		clock = data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24;
 3140              		.loc 1 689 0
 3141 080a 7B68     		ldr	r3, [r7, #4]
 3142 080c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3143 080e 1A46     		mov	r2, r3
 3144 0810 7B68     		ldr	r3, [r7, #4]
 3145 0812 0133     		adds	r3, r3, #1
 3146 0814 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3147 0816 1B02     		lsls	r3, r3, #8
 3148 0818 1A43     		orrs	r2, r2, r3
 3149 081a 7B68     		ldr	r3, [r7, #4]
 3150 081c 0233     		adds	r3, r3, #2
 3151 081e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3152 0820 1B04     		lsls	r3, r3, #16
 3153 0822 1A43     		orrs	r2, r2, r3
 3154 0824 7B68     		ldr	r3, [r7, #4]
 3155 0826 0333     		adds	r3, r3, #3
 3156 0828 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3157 082a 1B06     		lsls	r3, r3, #24
 3158 082c 1343     		orrs	r3, r3, r2
 3159 082e FB63     		str	r3, [r7, #60]
 690:bluetooth_rxtx.c **** 		clkn = clock;
 3160              		.loc 1 690 0
 3161 0830 344A     		ldr	r2, .L157+16
 3162 0832 FB6B     		ldr	r3, [r7, #60]
 3163 0834 1360     		str	r3, [r2]
 691:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3164              		.loc 1 691 0
 3165 0836 FFF7FEFF 		bl	cs_threshold_calc_and_set
 692:bluetooth_rxtx.c **** 		break;
 3166              		.loc 1 692 0
 3167 083a 44E1     		b	.L109
 3168              	.L100:
 693:bluetooth_rxtx.c **** 
 694:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_AFHMAP:
 695:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3169              		.loc 1 695 0
 3170 083c 0023     		movs	r3, #0
 3171 083e FB64     		str	r3, [r7, #76]
 3172 0840 0BE0     		b	.L141
 3173              	.L142:
 696:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3174              		.loc 1 696 0 discriminator 3
 3175 0842 FB6C     		ldr	r3, [r7, #76]
 3176 0844 7A68     		ldr	r2, [r7, #4]
 3177 0846 1344     		add	r3, r3, r2
 3178 0848 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 3179 084a 314A     		ldr	r2, .L157+28
 3180 084c FB6C     		ldr	r3, [r7, #76]
 3181 084e 1344     		add	r3, r3, r2
 3182 0850 0A46     		mov	r2, r1
 3183 0852 1A70     		strb	r2, [r3]
 695:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3184              		.loc 1 695 0 discriminator 3
 3185 0854 FB6C     		ldr	r3, [r7, #76]
ARM GAS  /tmp/cczWrdyg.s 			page 68


 3186 0856 0133     		adds	r3, r3, #1
 3187 0858 FB64     		str	r3, [r7, #76]
 3188              	.L141:
 695:bluetooth_rxtx.c **** 			afh_map[i] = data[i];
 3189              		.loc 1 695 0 is_stmt 0 discriminator 1
 3190 085a FB6C     		ldr	r3, [r7, #76]
 3191 085c 092B     		cmp	r3, #9
 3192 085e F0DD     		ble	.L142
 697:bluetooth_rxtx.c **** 		}
 698:bluetooth_rxtx.c **** 		afh_enabled = 1;
 3193              		.loc 1 698 0 is_stmt 1
 3194 0860 2C4B     		ldr	r3, .L157+32
 3195 0862 0122     		movs	r2, #1
 3196 0864 1A70     		strb	r2, [r3]
 699:bluetooth_rxtx.c **** 		*data_len = 10;
 3197              		.loc 1 699 0
 3198 0866 3B68     		ldr	r3, [r7]
 3199 0868 0A22     		movs	r2, #10
 3200 086a 1A60     		str	r2, [r3]
 700:bluetooth_rxtx.c **** 		break;
 3201              		.loc 1 700 0
 3202 086c 2BE1     		b	.L109
 3203              	.L101:
 701:bluetooth_rxtx.c **** 
 702:bluetooth_rxtx.c **** 	case UBERTOOTH_CLEAR_AFHMAP:
 703:bluetooth_rxtx.c **** 		for(i=0; i < 10; i++) {
 3204              		.loc 1 703 0
 3205 086e 0023     		movs	r3, #0
 3206 0870 FB64     		str	r3, [r7, #76]
 3207 0872 07E0     		b	.L143
 3208              	.L144:
 704:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3209              		.loc 1 704 0 discriminator 3
 3210 0874 264A     		ldr	r2, .L157+28
 3211 0876 FB6C     		ldr	r3, [r7, #76]
 3212 0878 1344     		add	r3, r3, r2
 3213 087a 0022     		movs	r2, #0
 3214 087c 1A70     		strb	r2, [r3]
 703:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3215              		.loc 1 703 0 discriminator 3
 3216 087e FB6C     		ldr	r3, [r7, #76]
 3217 0880 0133     		adds	r3, r3, #1
 3218 0882 FB64     		str	r3, [r7, #76]
 3219              	.L143:
 703:bluetooth_rxtx.c **** 			afh_map[i] = 0;
 3220              		.loc 1 703 0 is_stmt 0 discriminator 1
 3221 0884 FB6C     		ldr	r3, [r7, #76]
 3222 0886 092B     		cmp	r3, #9
 3223 0888 F4DD     		ble	.L144
 705:bluetooth_rxtx.c **** 		}
 706:bluetooth_rxtx.c **** 		afh_enabled = 0;
 3224              		.loc 1 706 0 is_stmt 1
 3225 088a 224B     		ldr	r3, .L157+32
 3226 088c 0022     		movs	r2, #0
 3227 088e 1A70     		strb	r2, [r3]
 707:bluetooth_rxtx.c **** 		*data_len = 10;
 3228              		.loc 1 707 0
ARM GAS  /tmp/cczWrdyg.s 			page 69


 3229 0890 3B68     		ldr	r3, [r7]
 3230 0892 0A22     		movs	r2, #10
 3231 0894 1A60     		str	r2, [r3]
 708:bluetooth_rxtx.c **** 		break;
 3232              		.loc 1 708 0
 3233 0896 16E1     		b	.L109
 3234              	.L90:
 709:bluetooth_rxtx.c **** 
 710:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CLOCK:
 711:bluetooth_rxtx.c **** 		clock = clkn;
 3235              		.loc 1 711 0
 3236 0898 1A4B     		ldr	r3, .L157+16
 3237 089a 1B68     		ldr	r3, [r3]
 3238 089c FB63     		str	r3, [r7, #60]
 712:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3239              		.loc 1 712 0
 3240 089e 0023     		movs	r3, #0
 3241 08a0 FB64     		str	r3, [r7, #76]
 3242 08a2 0CE0     		b	.L145
 3243              	.L146:
 713:bluetooth_rxtx.c **** 			data[i] = (clock >> (8*i)) & 0xff;
 3244              		.loc 1 713 0 discriminator 3
 3245 08a4 FB6C     		ldr	r3, [r7, #76]
 3246 08a6 7A68     		ldr	r2, [r7, #4]
 3247 08a8 1344     		add	r3, r3, r2
 3248 08aa FA6C     		ldr	r2, [r7, #76]
 3249 08ac D200     		lsls	r2, r2, #3
 3250 08ae F96B     		ldr	r1, [r7, #60]
 3251 08b0 21FA02F2 		lsr	r2, r1, r2
 3252 08b4 D2B2     		uxtb	r2, r2
 3253 08b6 1A70     		strb	r2, [r3]
 712:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3254              		.loc 1 712 0 discriminator 3
 3255 08b8 FB6C     		ldr	r3, [r7, #76]
 3256 08ba 0133     		adds	r3, r3, #1
 3257 08bc FB64     		str	r3, [r7, #76]
 3258              	.L145:
 712:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3259              		.loc 1 712 0 is_stmt 0 discriminator 1
 3260 08be FB6C     		ldr	r3, [r7, #76]
 3261 08c0 032B     		cmp	r3, #3
 3262 08c2 EFDD     		ble	.L146
 714:bluetooth_rxtx.c **** 		}
 715:bluetooth_rxtx.c **** 		*data_len = 4;
 3263              		.loc 1 715 0 is_stmt 1
 3264 08c4 3B68     		ldr	r3, [r7]
 3265 08c6 0422     		movs	r2, #4
 3266 08c8 1A60     		str	r2, [r3]
 716:bluetooth_rxtx.c **** 		break;
 3267              		.loc 1 716 0
 3268 08ca FCE0     		b	.L109
 3269              	.L91:
 717:bluetooth_rxtx.c **** 
 718:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SNIFFING:
 719:bluetooth_rxtx.c **** 		*data_len = 0;
 3270              		.loc 1 719 0
 3271 08cc 3B68     		ldr	r3, [r7]
ARM GAS  /tmp/cczWrdyg.s 			page 70


 3272 08ce 0022     		movs	r2, #0
 3273 08d0 1A60     		str	r2, [r3]
 720:bluetooth_rxtx.c **** 
 721:bluetooth_rxtx.c **** 		do_hop = 0;
 3274              		.loc 1 721 0
 3275 08d2 114B     		ldr	r3, .L157+36
 3276 08d4 0022     		movs	r2, #0
 3277 08d6 1A70     		strb	r2, [r3]
 722:bluetooth_rxtx.c **** 		hop_mode = HOP_BTLE;
 3278              		.loc 1 722 0
 3279 08d8 0B4B     		ldr	r3, .L157+20
 3280 08da 0322     		movs	r2, #3
 3281 08dc 1A70     		strb	r2, [r3]
 723:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_FOLLOW_LE;
 3282              		.loc 1 723 0
 3283 08de 0B4B     		ldr	r3, .L157+24
 3284 08e0 0922     		movs	r2, #9
 3285 08e2 1A70     		strb	r2, [r3]
 724:bluetooth_rxtx.c **** 
 725:bluetooth_rxtx.c **** 		queue_init();
 3286              		.loc 1 725 0
 3287 08e4 FFF7FEFF 		bl	queue_init
 726:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3288              		.loc 1 726 0
 3289 08e8 FFF7FEFF 		bl	cs_threshold_calc_and_set
 727:bluetooth_rxtx.c **** 		break;
 3290              		.loc 1 727 0
 3291 08ec EBE0     		b	.L109
 3292              	.L92:
 728:bluetooth_rxtx.c **** 
 729:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_ACCESS_ADDRESS:
 730:bluetooth_rxtx.c **** 		for(i=0; i < 4; i++) {
 3293              		.loc 1 730 0
 3294 08ee 0023     		movs	r3, #0
 3295 08f0 FB64     		str	r3, [r7, #76]
 3296 08f2 21E0     		b	.L147
 3297              	.L158:
 3298              		.align	2
 3299              	.L157:
 3300 08f4 C0080000 		.word	.LC4
 3301 08f8 00000000 		.word	compile_info
 3302 08fc 00000000 		.word	cs_threshold_req
 3303 0900 00000000 		.word	target
 3304 0904 00000000 		.word	clkn
 3305 0908 00000000 		.word	hop_mode
 3306 090c 00000000 		.word	requested_mode
 3307 0910 00000000 		.word	afh_map
 3308 0914 00000000 		.word	afh_enabled
 3309 0918 00000000 		.word	do_hop
 3310              	.L148:
 731:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3311              		.loc 1 731 0 discriminator 3
 3312 091c FB6C     		ldr	r3, [r7, #76]
 3313 091e 7A68     		ldr	r2, [r7, #4]
 3314 0920 1344     		add	r3, r3, r2
 3315 0922 6C4A     		ldr	r2, .L159
 3316 0924 1168     		ldr	r1, [r2]
ARM GAS  /tmp/cczWrdyg.s 			page 71


 3317 0926 FA6C     		ldr	r2, [r7, #76]
 3318 0928 D200     		lsls	r2, r2, #3
 3319 092a 21FA02F2 		lsr	r2, r1, r2
 3320 092e D2B2     		uxtb	r2, r2
 3321 0930 1A70     		strb	r2, [r3]
 730:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3322              		.loc 1 730 0 discriminator 3
 3323 0932 FB6C     		ldr	r3, [r7, #76]
 3324 0934 0133     		adds	r3, r3, #1
 3325 0936 FB64     		str	r3, [r7, #76]
 3326              	.L147:
 730:bluetooth_rxtx.c **** 			data[i] = (le.access_address >> (8*i)) & 0xff;
 3327              		.loc 1 730 0 is_stmt 0 discriminator 1
 3328 0938 FB6C     		ldr	r3, [r7, #76]
 3329 093a 032B     		cmp	r3, #3
 3330 093c EEDD     		ble	.L148
 732:bluetooth_rxtx.c **** 		}
 733:bluetooth_rxtx.c **** 		*data_len = 4;
 3331              		.loc 1 733 0 is_stmt 1
 3332 093e 3B68     		ldr	r3, [r7]
 3333 0940 0422     		movs	r2, #4
 3334 0942 1A60     		str	r2, [r3]
 734:bluetooth_rxtx.c **** 		break;
 3335              		.loc 1 734 0
 3336 0944 BFE0     		b	.L109
 3337              	.L93:
 735:bluetooth_rxtx.c **** 
 736:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_ACCESS_ADDRESS:
 737:bluetooth_rxtx.c **** 		le_set_access_address(data[0] | data[1] << 8 | data[2] << 16 | data[3] << 24);
 3338              		.loc 1 737 0
 3339 0946 7B68     		ldr	r3, [r7, #4]
 3340 0948 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3341 094a 1A46     		mov	r2, r3
 3342 094c 7B68     		ldr	r3, [r7, #4]
 3343 094e 0133     		adds	r3, r3, #1
 3344 0950 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3345 0952 1B02     		lsls	r3, r3, #8
 3346 0954 1A43     		orrs	r2, r2, r3
 3347 0956 7B68     		ldr	r3, [r7, #4]
 3348 0958 0233     		adds	r3, r3, #2
 3349 095a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3350 095c 1B04     		lsls	r3, r3, #16
 3351 095e 1A43     		orrs	r2, r2, r3
 3352 0960 7B68     		ldr	r3, [r7, #4]
 3353 0962 0333     		adds	r3, r3, #3
 3354 0964 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3355 0966 1B06     		lsls	r3, r3, #24
 3356 0968 1343     		orrs	r3, r3, r2
 3357 096a 1846     		mov	r0, r3
 3358 096c FFF7FEFF 		bl	le_set_access_address
 738:bluetooth_rxtx.c **** 		le.target_set = 1;
 3359              		.loc 1 738 0
 3360 0970 584B     		ldr	r3, .L159
 3361 0972 0122     		movs	r2, #1
 3362 0974 DA63     		str	r2, [r3, #60]
 739:bluetooth_rxtx.c **** 		break;
 3363              		.loc 1 739 0
ARM GAS  /tmp/cczWrdyg.s 			page 72


 3364 0976 A6E0     		b	.L109
 3365              	.L95:
 740:bluetooth_rxtx.c **** 
 741:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING:
 742:bluetooth_rxtx.c **** 		// do something! just don't commit anything here
 743:bluetooth_rxtx.c **** 		break;
 744:bluetooth_rxtx.c **** 
 745:bluetooth_rxtx.c **** 	case UBERTOOTH_DO_SOMETHING_REPLY:
 746:bluetooth_rxtx.c **** 		// after you do something, tell me what you did!
 747:bluetooth_rxtx.c **** 		// don't commit here please
 748:bluetooth_rxtx.c **** 		data[0] = 0x13;
 3366              		.loc 1 748 0
 3367 0978 7B68     		ldr	r3, [r7, #4]
 3368 097a 1322     		movs	r2, #19
 3369 097c 1A70     		strb	r2, [r3]
 749:bluetooth_rxtx.c **** 		data[1] = 0x37;
 3370              		.loc 1 749 0
 3371 097e 7B68     		ldr	r3, [r7, #4]
 3372 0980 0133     		adds	r3, r3, #1
 3373 0982 3722     		movs	r2, #55
 3374 0984 1A70     		strb	r2, [r3]
 750:bluetooth_rxtx.c **** 		*data_len = 2;
 3375              		.loc 1 750 0
 3376 0986 3B68     		ldr	r3, [r7]
 3377 0988 0222     		movs	r2, #2
 3378 098a 1A60     		str	r2, [r3]
 751:bluetooth_rxtx.c **** 		break;
 3379              		.loc 1 751 0
 3380 098c 9BE0     		b	.L109
 3381              	.L96:
 752:bluetooth_rxtx.c **** 
 753:bluetooth_rxtx.c **** 	case UBERTOOTH_GET_CRC_VERIFY:
 754:bluetooth_rxtx.c **** 		data[0] = le.crc_verify ? 1 : 0;
 3382              		.loc 1 754 0
 3383 098e 514B     		ldr	r3, .L159
 3384 0990 1B69     		ldr	r3, [r3, #16]
 3385 0992 002B     		cmp	r3, #0
 3386 0994 14BF     		ite	ne
 3387 0996 0123     		movne	r3, #1
 3388 0998 0023     		moveq	r3, #0
 3389 099a DBB2     		uxtb	r3, r3
 3390 099c 1A46     		mov	r2, r3
 3391 099e 7B68     		ldr	r3, [r7, #4]
 3392 09a0 1A70     		strb	r2, [r3]
 755:bluetooth_rxtx.c **** 		*data_len = 1;
 3393              		.loc 1 755 0
 3394 09a2 3B68     		ldr	r3, [r7]
 3395 09a4 0122     		movs	r2, #1
 3396 09a6 1A60     		str	r2, [r3]
 756:bluetooth_rxtx.c **** 		break;
 3397              		.loc 1 756 0
 3398 09a8 8DE0     		b	.L109
 3399              	.L97:
 757:bluetooth_rxtx.c **** 
 758:bluetooth_rxtx.c **** 	case UBERTOOTH_SET_CRC_VERIFY:
 759:bluetooth_rxtx.c **** 		le.crc_verify = request_params[0] ? 1 : 0;
 3400              		.loc 1 759 0
ARM GAS  /tmp/cczWrdyg.s 			page 73


 3401 09aa BB68     		ldr	r3, [r7, #8]
 3402 09ac 1B88     		ldrh	r3, [r3]
 3403 09ae 002B     		cmp	r3, #0
 3404 09b0 14BF     		ite	ne
 3405 09b2 0123     		movne	r3, #1
 3406 09b4 0023     		moveq	r3, #0
 3407 09b6 DBB2     		uxtb	r3, r3
 3408 09b8 1A46     		mov	r2, r3
 3409 09ba 464B     		ldr	r3, .L159
 3410 09bc 1A61     		str	r2, [r3, #16]
 760:bluetooth_rxtx.c **** 		break;
 3411              		.loc 1 760 0
 3412 09be 82E0     		b	.L109
 3413              	.L98:
 761:bluetooth_rxtx.c **** 
 762:bluetooth_rxtx.c **** 	case UBERTOOTH_POLL:
 763:bluetooth_rxtx.c **** 		p = dequeue();
 3414              		.loc 1 763 0
 3415 09c0 FFF7FEFF 		bl	dequeue
 3416 09c4 7864     		str	r0, [r7, #68]
 764:bluetooth_rxtx.c **** 		if (p != NULL) {
 3417              		.loc 1 764 0
 3418 09c6 7B6C     		ldr	r3, [r7, #68]
 3419 09c8 002B     		cmp	r3, #0
 3420 09ca 08D0     		beq	.L149
 765:bluetooth_rxtx.c **** 			memcpy(data, (void *)p, sizeof(usb_pkt_rx));
 3421              		.loc 1 765 0
 3422 09cc 7868     		ldr	r0, [r7, #4]
 3423 09ce 796C     		ldr	r1, [r7, #68]
 3424 09d0 4022     		movs	r2, #64
 3425 09d2 FFF7FEFF 		bl	memcpy
 766:bluetooth_rxtx.c **** 			*data_len = sizeof(usb_pkt_rx);
 3426              		.loc 1 766 0
 3427 09d6 3B68     		ldr	r3, [r7]
 3428 09d8 4022     		movs	r2, #64
 3429 09da 1A60     		str	r2, [r3]
 767:bluetooth_rxtx.c **** 		} else {
 768:bluetooth_rxtx.c **** 			data[0] = 0;
 769:bluetooth_rxtx.c **** 			*data_len = 1;
 770:bluetooth_rxtx.c **** 		}
 771:bluetooth_rxtx.c **** 		break;
 3430              		.loc 1 771 0
 3431 09dc 73E0     		b	.L109
 3432              	.L149:
 768:bluetooth_rxtx.c **** 			*data_len = 1;
 3433              		.loc 1 768 0
 3434 09de 7B68     		ldr	r3, [r7, #4]
 3435 09e0 0022     		movs	r2, #0
 3436 09e2 1A70     		strb	r2, [r3]
 769:bluetooth_rxtx.c **** 		}
 3437              		.loc 1 769 0
 3438 09e4 3B68     		ldr	r3, [r7]
 3439 09e6 0122     		movs	r2, #1
 3440 09e8 1A60     		str	r2, [r3]
 3441              		.loc 1 771 0
 3442 09ea 6CE0     		b	.L109
 3443              	.L99:
ARM GAS  /tmp/cczWrdyg.s 			page 74


 772:bluetooth_rxtx.c **** 
 773:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_PROMISC:
 774:bluetooth_rxtx.c **** 		*data_len = 0;
 3444              		.loc 1 774 0
 3445 09ec 3B68     		ldr	r3, [r7]
 3446 09ee 0022     		movs	r2, #0
 3447 09f0 1A60     		str	r2, [r3]
 775:bluetooth_rxtx.c **** 
 776:bluetooth_rxtx.c **** 		hop_mode = HOP_NONE;
 3448              		.loc 1 776 0
 3449 09f2 394B     		ldr	r3, .L159+4
 3450 09f4 0022     		movs	r2, #0
 3451 09f6 1A70     		strb	r2, [r3]
 777:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_PROMISC_LE;
 3452              		.loc 1 777 0
 3453 09f8 384B     		ldr	r3, .L159+8
 3454 09fa 0A22     		movs	r2, #10
 3455 09fc 1A70     		strb	r2, [r3]
 778:bluetooth_rxtx.c **** 
 779:bluetooth_rxtx.c **** 		queue_init();
 3456              		.loc 1 779 0
 3457 09fe FFF7FEFF 		bl	queue_init
 780:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 3458              		.loc 1 780 0
 3459 0a02 FFF7FEFF 		bl	cs_threshold_calc_and_set
 781:bluetooth_rxtx.c **** 		break;
 3460              		.loc 1 781 0
 3461 0a06 5EE0     		b	.L109
 3462              	.L102:
 782:bluetooth_rxtx.c **** 
 783:bluetooth_rxtx.c **** 	case UBERTOOTH_READ_REGISTER:
 784:bluetooth_rxtx.c **** 		reg_val = cc2400_get(request_params[0]);
 3463              		.loc 1 784 0
 3464 0a08 BB68     		ldr	r3, [r7, #8]
 3465 0a0a 1B88     		ldrh	r3, [r3]
 3466 0a0c DBB2     		uxtb	r3, r3
 3467 0a0e 1846     		mov	r0, r3
 3468 0a10 FFF7FEFF 		bl	cc2400_get
 3469 0a14 0346     		mov	r3, r0
 3470 0a16 7B87     		strh	r3, [r7, #58]	@ movhi
 785:bluetooth_rxtx.c **** 		data[0] = (reg_val >> 8) & 0xff;
 3471              		.loc 1 785 0
 3472 0a18 7B8F     		ldrh	r3, [r7, #58]
 3473 0a1a 1B0A     		lsrs	r3, r3, #8
 3474 0a1c 9BB2     		uxth	r3, r3
 3475 0a1e DAB2     		uxtb	r2, r3
 3476 0a20 7B68     		ldr	r3, [r7, #4]
 3477 0a22 1A70     		strb	r2, [r3]
 786:bluetooth_rxtx.c **** 		data[1] = reg_val & 0xff;
 3478              		.loc 1 786 0
 3479 0a24 7B68     		ldr	r3, [r7, #4]
 3480 0a26 0133     		adds	r3, r3, #1
 3481 0a28 7A8F     		ldrh	r2, [r7, #58]	@ movhi
 3482 0a2a D2B2     		uxtb	r2, r2
 3483 0a2c 1A70     		strb	r2, [r3]
 787:bluetooth_rxtx.c **** 		*data_len = 2;
 3484              		.loc 1 787 0
ARM GAS  /tmp/cczWrdyg.s 			page 75


 3485 0a2e 3B68     		ldr	r3, [r7]
 3486 0a30 0222     		movs	r2, #2
 3487 0a32 1A60     		str	r2, [r3]
 788:bluetooth_rxtx.c **** 		break;
 3488              		.loc 1 788 0
 3489 0a34 47E0     		b	.L109
 3490              	.L106:
 789:bluetooth_rxtx.c **** 
 790:bluetooth_rxtx.c **** 	case UBERTOOTH_WRITE_REGISTER:
 791:bluetooth_rxtx.c **** 		cc2400_set(request_params[0] & 0xff, request_params[1]);
 3491              		.loc 1 791 0
 3492 0a36 BB68     		ldr	r3, [r7, #8]
 3493 0a38 1B88     		ldrh	r3, [r3]
 3494 0a3a DAB2     		uxtb	r2, r3
 3495 0a3c BB68     		ldr	r3, [r7, #8]
 3496 0a3e 0233     		adds	r3, r3, #2
 3497 0a40 1B88     		ldrh	r3, [r3]
 3498 0a42 1046     		mov	r0, r2
 3499 0a44 1946     		mov	r1, r3
 3500 0a46 FFF7FEFF 		bl	cc2400_set
 792:bluetooth_rxtx.c **** 		break;
 3501              		.loc 1 792 0
 3502 0a4a 3CE0     		b	.L109
 3503              	.L103:
 793:bluetooth_rxtx.c **** 
 794:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SLAVE:
 795:bluetooth_rxtx.c **** 		memcpy(slave_mac_address, data, 6);
 3504              		.loc 1 795 0
 3505 0a4c 2448     		ldr	r0, .L159+12
 3506 0a4e 7968     		ldr	r1, [r7, #4]
 3507 0a50 0622     		movs	r2, #6
 3508 0a52 FFF7FEFF 		bl	memcpy
 796:bluetooth_rxtx.c **** 		requested_mode = MODE_BT_SLAVE_LE;
 3509              		.loc 1 796 0
 3510 0a56 214B     		ldr	r3, .L159+8
 3511 0a58 0C22     		movs	r2, #12
 3512 0a5a 1A70     		strb	r2, [r3]
 797:bluetooth_rxtx.c **** 		break;
 3513              		.loc 1 797 0
 3514 0a5c 33E0     		b	.L109
 3515              	.L105:
 798:bluetooth_rxtx.c **** 
 799:bluetooth_rxtx.c **** 	case UBERTOOTH_BTLE_SET_TARGET:
 800:bluetooth_rxtx.c **** 		// Addresses appear in packets in reverse-octet order.
 801:bluetooth_rxtx.c **** 		// Store the target address in reverse order so that we can do a simple memcmp later
 802:bluetooth_rxtx.c **** 		le.target[0] = data[5];
 3516              		.loc 1 802 0
 3517 0a5e 7B68     		ldr	r3, [r7, #4]
 3518 0a60 5A79     		ldrb	r2, [r3, #5]	@ zero_extendqisi2
 3519 0a62 1C4B     		ldr	r3, .L159
 3520 0a64 83F83420 		strb	r2, [r3, #52]
 803:bluetooth_rxtx.c **** 		le.target[1] = data[4];
 3521              		.loc 1 803 0
 3522 0a68 7B68     		ldr	r3, [r7, #4]
 3523 0a6a 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
 3524 0a6c 194B     		ldr	r3, .L159
 3525 0a6e 83F83520 		strb	r2, [r3, #53]
ARM GAS  /tmp/cczWrdyg.s 			page 76


 804:bluetooth_rxtx.c **** 		le.target[2] = data[3];
 3526              		.loc 1 804 0
 3527 0a72 7B68     		ldr	r3, [r7, #4]
 3528 0a74 DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 3529 0a76 174B     		ldr	r3, .L159
 3530 0a78 83F83620 		strb	r2, [r3, #54]
 805:bluetooth_rxtx.c **** 		le.target[3] = data[2];
 3531              		.loc 1 805 0
 3532 0a7c 7B68     		ldr	r3, [r7, #4]
 3533 0a7e 9A78     		ldrb	r2, [r3, #2]	@ zero_extendqisi2
 3534 0a80 144B     		ldr	r3, .L159
 3535 0a82 83F83720 		strb	r2, [r3, #55]
 806:bluetooth_rxtx.c **** 		le.target[4] = data[1];
 3536              		.loc 1 806 0
 3537 0a86 7B68     		ldr	r3, [r7, #4]
 3538 0a88 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 3539 0a8a 124B     		ldr	r3, .L159
 3540 0a8c 83F83820 		strb	r2, [r3, #56]
 807:bluetooth_rxtx.c **** 		le.target[5] = data[0];
 3541              		.loc 1 807 0
 3542 0a90 7B68     		ldr	r3, [r7, #4]
 3543 0a92 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 3544 0a94 0F4B     		ldr	r3, .L159
 3545 0a96 83F83920 		strb	r2, [r3, #57]
 808:bluetooth_rxtx.c **** 		le.target_set = 1;
 3546              		.loc 1 808 0
 3547 0a9a 0E4B     		ldr	r3, .L159
 3548 0a9c 0122     		movs	r2, #1
 3549 0a9e DA63     		str	r2, [r3, #60]
 809:bluetooth_rxtx.c **** 		break;
 3550              		.loc 1 809 0
 3551 0aa0 11E0     		b	.L109
 3552              	.L107:
 810:bluetooth_rxtx.c **** 
 811:bluetooth_rxtx.c **** #ifdef TX_ENABLE
 812:bluetooth_rxtx.c **** 	case UBERTOOTH_JAM_MODE:
 813:bluetooth_rxtx.c **** 		jam_mode = request_params[0];
 3553              		.loc 1 813 0
 3554 0aa2 BB68     		ldr	r3, [r7, #8]
 3555 0aa4 1B88     		ldrh	r3, [r3]
 3556 0aa6 DAB2     		uxtb	r2, r3
 3557 0aa8 0E4B     		ldr	r3, .L159+16
 3558 0aaa 1A70     		strb	r2, [r3]
 814:bluetooth_rxtx.c **** 		break;
 3559              		.loc 1 814 0
 3560 0aac 0BE0     		b	.L109
 3561              	.L108:
 815:bluetooth_rxtx.c **** #endif
 816:bluetooth_rxtx.c **** 
 817:bluetooth_rxtx.c **** 	case UBERTOOTH_EGO:
 818:bluetooth_rxtx.c **** #ifndef TX_ENABLE
 819:bluetooth_rxtx.c **** 		if (ego_mode == EGO_JAM)
 820:bluetooth_rxtx.c **** 			return 0;
 821:bluetooth_rxtx.c **** #endif
 822:bluetooth_rxtx.c **** 		requested_mode = MODE_EGO;
 3562              		.loc 1 822 0
 3563 0aae 0B4B     		ldr	r3, .L159+8
ARM GAS  /tmp/cczWrdyg.s 			page 77


 3564 0ab0 0D22     		movs	r2, #13
 3565 0ab2 1A70     		strb	r2, [r3]
 823:bluetooth_rxtx.c **** 		ego_mode = request_params[0];
 3566              		.loc 1 823 0
 3567 0ab4 BB68     		ldr	r3, [r7, #8]
 3568 0ab6 1B88     		ldrh	r3, [r3]
 3569 0ab8 DAB2     		uxtb	r2, r3
 3570 0aba 0B4B     		ldr	r3, .L159+20
 3571 0abc 1A70     		strb	r2, [r3]
 824:bluetooth_rxtx.c **** 		break;
 3572              		.loc 1 824 0
 3573 0abe 02E0     		b	.L109
 3574              	.L49:
 825:bluetooth_rxtx.c **** 
 826:bluetooth_rxtx.c **** 	default:
 827:bluetooth_rxtx.c **** 		return 0;
 3575              		.loc 1 827 0
 3576 0ac0 0023     		movs	r3, #0
 3577 0ac2 01E0     		b	.L151
 3578              	.L152:
 743:bluetooth_rxtx.c **** 
 3579              		.loc 1 743 0
 3580 0ac4 00BF     		nop
 3581              	.L109:
 828:bluetooth_rxtx.c **** 	}
 829:bluetooth_rxtx.c **** 	return 1;
 3582              		.loc 1 829 0
 3583 0ac6 0123     		movs	r3, #1
 3584              	.L151:
 830:bluetooth_rxtx.c **** }
 3585              		.loc 1 830 0 discriminator 1
 3586 0ac8 1846     		mov	r0, r3
 3587 0aca 5437     		adds	r7, r7, #84
 3588              		.cfi_def_cfa_offset 36
 3589 0acc BD46     		mov	sp, r7
 3590              		.cfi_def_cfa_register 13
 3591              		@ sp needed
 3592 0ace BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 3593              	.L160:
 3594 0ad2 00BF     		.align	2
 3595              	.L159:
 3596 0ad4 00000000 		.word	le
 3597 0ad8 00000000 		.word	hop_mode
 3598 0adc 00000000 		.word	requested_mode
 3599 0ae0 00000000 		.word	slave_mac_address
 3600 0ae4 00000000 		.word	jam_mode
 3601 0ae8 00000000 		.word	ego_mode
 3602              		.cfi_endproc
 3603              	.LFE9:
 3605              		.section	.text.clkn_init,"ax",%progbits
 3606              		.align	2
 3607              		.thumb
 3608              		.thumb_func
 3610              	clkn_init:
 3611              	.LFB10:
 831:bluetooth_rxtx.c **** 
 832:bluetooth_rxtx.c **** static void clkn_init()
ARM GAS  /tmp/cczWrdyg.s 			page 78


 833:bluetooth_rxtx.c **** {
 3612              		.loc 1 833 0
 3613              		.cfi_startproc
 3614              		@ args = 0, pretend = 0, frame = 0
 3615              		@ frame_needed = 1, uses_anonymous_args = 0
 3616              		@ link register save eliminated.
 3617 0000 80B4     		push	{r7}
 3618              		.cfi_def_cfa_offset 4
 3619              		.cfi_offset 7, -4
 3620 0002 00AF     		add	r7, sp, #0
 3621              		.cfi_def_cfa_register 7
 834:bluetooth_rxtx.c **** 	/*
 835:bluetooth_rxtx.c **** 	 * Because these are reset defaults, we're assuming TIMER0 is powered on
 836:bluetooth_rxtx.c **** 	 * and in timer mode.  The TIMER0 peripheral clock should have been set by
 837:bluetooth_rxtx.c **** 	 * clock_start().
 838:bluetooth_rxtx.c **** 	 */
 839:bluetooth_rxtx.c **** 
 840:bluetooth_rxtx.c **** 	/* stop and reset the timer to zero */
 841:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Reset;
 3622              		.loc 1 841 0
 3623 0004 0C4B     		ldr	r3, .L162
 3624 0006 0222     		movs	r2, #2
 3625 0008 1A60     		str	r2, [r3]
 842:bluetooth_rxtx.c **** 	clkn = 0;
 3626              		.loc 1 842 0
 3627 000a 0C4B     		ldr	r3, .L162+4
 3628 000c 0022     		movs	r2, #0
 3629 000e 1A60     		str	r2, [r3]
 843:bluetooth_rxtx.c **** 
 844:bluetooth_rxtx.c **** #ifdef TC13BADGE
 845:bluetooth_rxtx.c **** 	/*
 846:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 33.3ns.  3 pclk periods makes one
 847:bluetooth_rxtx.c **** 	 * CLK100NS period (100 ns).
 848:bluetooth_rxtx.c **** 	 */
 849:bluetooth_rxtx.c **** 	T0PR = 2;
 850:bluetooth_rxtx.c **** #else
 851:bluetooth_rxtx.c **** 	/*
 852:bluetooth_rxtx.c **** 	 * The peripheral clock has a period of 20ns.  5 pclk periods
 853:bluetooth_rxtx.c **** 	 * makes one CLK100NS period (100 ns).
 854:bluetooth_rxtx.c **** 	 */
 855:bluetooth_rxtx.c **** 	T0PR = 4;
 3630              		.loc 1 855 0
 3631 0010 0B4B     		ldr	r3, .L162+8
 3632 0012 0422     		movs	r2, #4
 3633 0014 1A60     		str	r2, [r3]
 856:bluetooth_rxtx.c **** #endif
 857:bluetooth_rxtx.c **** 	/* 3125 * 100 ns = 312.5 us, the Bluetooth clock (CLKN). */
 858:bluetooth_rxtx.c **** 	T0MR0 = 3124;
 3634              		.loc 1 858 0
 3635 0016 0B4B     		ldr	r3, .L162+12
 3636 0018 40F63442 		movw	r2, #3124
 3637 001c 1A60     		str	r2, [r3]
 859:bluetooth_rxtx.c **** 	T0MCR = TMCR_MR0R | TMCR_MR0I;
 3638              		.loc 1 859 0
 3639 001e 0A4B     		ldr	r3, .L162+16
 3640 0020 0322     		movs	r2, #3
 3641 0022 1A60     		str	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 79


 860:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_TIMER0;
 3642              		.loc 1 860 0
 3643 0024 094B     		ldr	r3, .L162+20
 3644 0026 0222     		movs	r2, #2
 3645 0028 1A60     		str	r2, [r3]
 861:bluetooth_rxtx.c **** 
 862:bluetooth_rxtx.c **** 	/* start timer */
 863:bluetooth_rxtx.c **** 	T0TCR = TCR_Counter_Enable;
 3646              		.loc 1 863 0
 3647 002a 034B     		ldr	r3, .L162
 3648 002c 0122     		movs	r2, #1
 3649 002e 1A60     		str	r2, [r3]
 864:bluetooth_rxtx.c **** }
 3650              		.loc 1 864 0
 3651 0030 BD46     		mov	sp, r7
 3652              		.cfi_def_cfa_register 13
 3653              		@ sp needed
 3654 0032 5DF8047B 		ldr	r7, [sp], #4
 3655              		.cfi_restore 7
 3656              		.cfi_def_cfa_offset 0
 3657 0036 7047     		bx	lr
 3658              	.L163:
 3659              		.align	2
 3660              	.L162:
 3661 0038 04400040 		.word	1073758212
 3662 003c 00000000 		.word	clkn
 3663 0040 0C400040 		.word	1073758220
 3664 0044 18400040 		.word	1073758232
 3665 0048 14400040 		.word	1073758228
 3666 004c 00E100E0 		.word	-536813312
 3667              		.cfi_endproc
 3668              	.LFE10:
 3670              		.section	.text.TIMER0_IRQHandler,"ax",%progbits
 3671              		.align	2
 3672              		.global	TIMER0_IRQHandler
 3673              		.thumb
 3674              		.thumb_func
 3676              	TIMER0_IRQHandler:
 3677              	.LFB11:
 865:bluetooth_rxtx.c **** 
 866:bluetooth_rxtx.c **** /* Update CLKN. */
 867:bluetooth_rxtx.c **** void TIMER0_IRQHandler()
 868:bluetooth_rxtx.c **** {
 3678              		.loc 1 868 0
 3679              		.cfi_startproc
 3680              		@ args = 0, pretend = 0, frame = 8
 3681              		@ frame_needed = 1, uses_anonymous_args = 0
 3682              		@ link register save eliminated.
 3683 0000 80B4     		push	{r7}
 3684              		.cfi_def_cfa_offset 4
 3685              		.cfi_offset 7, -4
 3686 0002 83B0     		sub	sp, sp, #12
 3687              		.cfi_def_cfa_offset 16
 3688 0004 00AF     		add	r7, sp, #0
 3689              		.cfi_def_cfa_register 7
 869:bluetooth_rxtx.c **** 	// Use non-volatile working register to shave off a couple instructions
 870:bluetooth_rxtx.c **** 	u32 next;
ARM GAS  /tmp/cczWrdyg.s 			page 80


 871:bluetooth_rxtx.c **** 	u32 le_clk;
 872:bluetooth_rxtx.c **** 
 873:bluetooth_rxtx.c **** 	if (T0IR & TIR_MR0_Interrupt) {
 3690              		.loc 1 873 0
 3691 0006 4FF04023 		mov	r3, #1073758208
 3692 000a 1B68     		ldr	r3, [r3]
 3693 000c 03F00103 		and	r3, r3, #1
 3694 0010 002B     		cmp	r3, #0
 3695 0012 6DD0     		beq	.L164
 874:bluetooth_rxtx.c **** 
 875:bluetooth_rxtx.c **** 		clkn++;
 3696              		.loc 1 875 0
 3697 0014 394B     		ldr	r3, .L174
 3698 0016 1B68     		ldr	r3, [r3]
 3699 0018 0133     		adds	r3, r3, #1
 3700 001a 384A     		ldr	r2, .L174
 3701 001c 1360     		str	r3, [r2]
 876:bluetooth_rxtx.c **** 		next = clkn;
 3702              		.loc 1 876 0
 3703 001e 374B     		ldr	r3, .L174
 3704 0020 1B68     		ldr	r3, [r3]
 3705 0022 7B60     		str	r3, [r7, #4]
 877:bluetooth_rxtx.c **** 		le_clk = (next - le.conn_epoch) & 0x03;
 3706              		.loc 1 877 0
 3707 0024 364B     		ldr	r3, .L174+4
 3708 0026 9B69     		ldr	r3, [r3, #24]
 3709 0028 7A68     		ldr	r2, [r7, #4]
 3710 002a D31A     		subs	r3, r2, r3
 3711 002c 03F00303 		and	r3, r3, #3
 3712 0030 3B60     		str	r3, [r7]
 878:bluetooth_rxtx.c **** 
 879:bluetooth_rxtx.c **** 		/* Trigger hop based on mode */
 880:bluetooth_rxtx.c **** 
 881:bluetooth_rxtx.c **** 		/* NONE or SWEEP -> 25 Hz */
 882:bluetooth_rxtx.c **** 		if (hop_mode == HOP_NONE || hop_mode == HOP_SWEEP) {
 3713              		.loc 1 882 0
 3714 0032 344B     		ldr	r3, .L174+8
 3715 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3716 0036 002B     		cmp	r3, #0
 3717 0038 03D0     		beq	.L166
 3718              		.loc 1 882 0 is_stmt 0 discriminator 1
 3719 003a 324B     		ldr	r3, .L174+8
 3720 003c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3721 003e 012B     		cmp	r3, #1
 3722 0040 09D1     		bne	.L167
 3723              	.L166:
 883:bluetooth_rxtx.c **** //			if ((next & 0x7f) == 0)
 884:bluetooth_rxtx.c **** 			if (next % 2 == 1)
 3724              		.loc 1 884 0 is_stmt 1
 3725 0042 7B68     		ldr	r3, [r7, #4]
 3726 0044 03F00103 		and	r3, r3, #1
 3727 0048 002B     		cmp	r3, #0
 3728 004a 03D0     		beq	.L168
 885:bluetooth_rxtx.c **** 			{
 886:bluetooth_rxtx.c **** 				do_hop = 1;
 3729              		.loc 1 886 0
 3730 004c 2E4B     		ldr	r3, .L174+12
ARM GAS  /tmp/cczWrdyg.s 			page 81


 3731 004e 0122     		movs	r2, #1
 3732 0050 1A70     		strb	r2, [r3]
 884:bluetooth_rxtx.c **** 			{
 3733              		.loc 1 884 0
 3734 0052 37E0     		b	.L169
 3735              	.L168:
 3736 0054 36E0     		b	.L169
 3737              	.L167:
 887:bluetooth_rxtx.c **** 			}
 888:bluetooth_rxtx.c **** 		}
 889:bluetooth_rxtx.c **** 		/* BLUETOOTH -> 1600 Hz */
 890:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BLUETOOTH) {
 3738              		.loc 1 890 0
 3739 0056 2B4B     		ldr	r3, .L174+8
 3740 0058 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3741 005a 022B     		cmp	r3, #2
 3742 005c 08D1     		bne	.L170
 891:bluetooth_rxtx.c **** 			if ((next & 0x1) == 0)
 3743              		.loc 1 891 0
 3744 005e 7B68     		ldr	r3, [r7, #4]
 3745 0060 03F00103 		and	r3, r3, #1
 3746 0064 002B     		cmp	r3, #0
 3747 0066 2DD1     		bne	.L169
 892:bluetooth_rxtx.c **** 				do_hop = 1;
 3748              		.loc 1 892 0
 3749 0068 274B     		ldr	r3, .L174+12
 3750 006a 0122     		movs	r2, #1
 3751 006c 1A70     		strb	r2, [r3]
 3752 006e 29E0     		b	.L169
 3753              	.L170:
 893:bluetooth_rxtx.c **** 		}
 894:bluetooth_rxtx.c **** 		/* BLUETOOTH Low Energy -> 7.5ms - 4.0s in multiples of 1.25 ms */
 895:bluetooth_rxtx.c **** 		else if (hop_mode == HOP_BTLE) {
 3754              		.loc 1 895 0
 3755 0070 244B     		ldr	r3, .L174+8
 3756 0072 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 3757 0074 032B     		cmp	r3, #3
 3758 0076 25D1     		bne	.L169
 896:bluetooth_rxtx.c **** 			// Only hop if connected
 897:bluetooth_rxtx.c **** 			if (le.link_state == LINK_CONNECTED && le_clk == 0) {
 3759              		.loc 1 897 0
 3760 0078 214B     		ldr	r3, .L174+4
 3761 007a 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 3762 007c 032B     		cmp	r3, #3
 3763 007e 21D1     		bne	.L169
 3764              		.loc 1 897 0 is_stmt 0 discriminator 1
 3765 0080 3B68     		ldr	r3, [r7]
 3766 0082 002B     		cmp	r3, #0
 3767 0084 1ED1     		bne	.L169
 898:bluetooth_rxtx.c **** 				--le.interval_timer;
 3768              		.loc 1 898 0 is_stmt 1
 3769 0086 1E4B     		ldr	r3, .L174+4
 3770 0088 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3771 008a 9BB2     		uxth	r3, r3
 3772 008c 013B     		subs	r3, r3, #1
 3773 008e 9AB2     		uxth	r2, r3
 3774 0090 1B4B     		ldr	r3, .L174+4
ARM GAS  /tmp/cczWrdyg.s 			page 82


 3775 0092 9A83     		strh	r2, [r3, #28]	@ movhi
 899:bluetooth_rxtx.c **** 				if (le.interval_timer == 0) {
 3776              		.loc 1 899 0
 3777 0094 1A4B     		ldr	r3, .L174+4
 3778 0096 9B8B     		ldrh	r3, [r3, #28]	@ movhi
 3779 0098 9BB2     		uxth	r3, r3
 3780 009a 002B     		cmp	r3, #0
 3781 009c 0ED1     		bne	.L172
 900:bluetooth_rxtx.c **** 					do_hop = 1;
 3782              		.loc 1 900 0
 3783 009e 1A4B     		ldr	r3, .L174+12
 3784 00a0 0122     		movs	r2, #1
 3785 00a2 1A70     		strb	r2, [r3]
 901:bluetooth_rxtx.c **** 					++le.conn_count;
 3786              		.loc 1 901 0
 3787 00a4 164B     		ldr	r3, .L174+4
 3788 00a6 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 3789 00a8 9BB2     		uxth	r3, r3
 3790 00aa 0133     		adds	r3, r3, #1
 3791 00ac 9AB2     		uxth	r2, r3
 3792 00ae 144B     		ldr	r3, .L174+4
 3793 00b0 1A84     		strh	r2, [r3, #32]	@ movhi
 902:bluetooth_rxtx.c **** 					le.interval_timer = le.conn_interval;
 3794              		.loc 1 902 0
 3795 00b2 134B     		ldr	r3, .L174+4
 3796 00b4 DA8B     		ldrh	r2, [r3, #30]
 3797 00b6 124B     		ldr	r3, .L174+4
 3798 00b8 9A83     		strh	r2, [r3, #28]	@ movhi
 3799 00ba 03E0     		b	.L169
 3800              	.L172:
 903:bluetooth_rxtx.c **** 				} else {
 904:bluetooth_rxtx.c **** 					TXLED_CLR; // hack!
 3801              		.loc 1 904 0
 3802 00bc 134B     		ldr	r3, .L174+16
 3803 00be 4FF48072 		mov	r2, #256
 3804 00c2 1A60     		str	r2, [r3]
 3805              	.L169:
 905:bluetooth_rxtx.c **** 				}
 906:bluetooth_rxtx.c **** 			}
 907:bluetooth_rxtx.c **** 		}
 908:bluetooth_rxtx.c **** 
 909:bluetooth_rxtx.c **** 		/* Keepalive trigger fires at 3200/2^9 = 6.25 Hz */
 910:bluetooth_rxtx.c **** 		if ((next & 0x1ff) == 0)
 3806              		.loc 1 910 0
 3807 00c4 7B68     		ldr	r3, [r7, #4]
 3808 00c6 C3F30803 		ubfx	r3, r3, #0, #9
 3809 00ca 002B     		cmp	r3, #0
 3810 00cc 02D1     		bne	.L173
 911:bluetooth_rxtx.c **** 			keepalive_trigger = 1;
 3811              		.loc 1 911 0
 3812 00ce 104B     		ldr	r3, .L174+20
 3813 00d0 0122     		movs	r2, #1
 3814 00d2 1A70     		strb	r2, [r3]
 3815              	.L173:
 912:bluetooth_rxtx.c **** 
 913:bluetooth_rxtx.c **** 		/* Ack interrupt */
 914:bluetooth_rxtx.c **** 		T0MR0 = 3124 - clock_trim;
ARM GAS  /tmp/cczWrdyg.s 			page 83


 3816              		.loc 1 914 0
 3817 00d4 0F4A     		ldr	r2, .L174+24
 3818 00d6 104B     		ldr	r3, .L174+28
 3819 00d8 1B68     		ldr	r3, [r3]
 3820 00da C3F54363 		rsb	r3, r3, #3120
 3821 00de 0433     		adds	r3, r3, #4
 3822 00e0 1360     		str	r3, [r2]
 915:bluetooth_rxtx.c **** 		clock_trim = 0;
 3823              		.loc 1 915 0
 3824 00e2 0D4B     		ldr	r3, .L174+28
 3825 00e4 0022     		movs	r2, #0
 3826 00e6 1A60     		str	r2, [r3]
 916:bluetooth_rxtx.c **** 		T0IR = TIR_MR0_Interrupt;
 3827              		.loc 1 916 0
 3828 00e8 4FF04023 		mov	r3, #1073758208
 3829 00ec 0122     		movs	r2, #1
 3830 00ee 1A60     		str	r2, [r3]
 3831              	.L164:
 917:bluetooth_rxtx.c **** 	}
 918:bluetooth_rxtx.c **** }
 3832              		.loc 1 918 0
 3833 00f0 0C37     		adds	r7, r7, #12
 3834              		.cfi_def_cfa_offset 4
 3835 00f2 BD46     		mov	sp, r7
 3836              		.cfi_def_cfa_register 13
 3837              		@ sp needed
 3838 00f4 5DF8047B 		ldr	r7, [sp], #4
 3839              		.cfi_restore 7
 3840              		.cfi_def_cfa_offset 0
 3841 00f8 7047     		bx	lr
 3842              	.L175:
 3843 00fa 00BF     		.align	2
 3844              	.L174:
 3845 00fc 00000000 		.word	clkn
 3846 0100 00000000 		.word	le
 3847 0104 00000000 		.word	hop_mode
 3848 0108 00000000 		.word	do_hop
 3849 010c 3CC00920 		.word	537509948
 3850 0110 00000000 		.word	keepalive_trigger
 3851 0114 18400040 		.word	1073758232
 3852 0118 00000000 		.word	clock_trim
 3853              		.cfi_endproc
 3854              	.LFE11:
 3856              		.section	.text.EINT3_IRQHandler,"ax",%progbits
 3857              		.align	2
 3858              		.global	EINT3_IRQHandler
 3859              		.thumb
 3860              		.thumb_func
 3862              	EINT3_IRQHandler:
 3863              	.LFB12:
 919:bluetooth_rxtx.c **** 
 920:bluetooth_rxtx.c **** /* EINT3 handler is also defined in ubertooth.c for TC13BADGE. */
 921:bluetooth_rxtx.c **** #ifndef TC13BADGE
 922:bluetooth_rxtx.c **** //static volatile u8 txledstate = 1;
 923:bluetooth_rxtx.c **** void EINT3_IRQHandler()
 924:bluetooth_rxtx.c **** {
 3864              		.loc 1 924 0
ARM GAS  /tmp/cczWrdyg.s 			page 84


 3865              		.cfi_startproc
 3866              		@ args = 0, pretend = 0, frame = 0
 3867              		@ frame_needed = 1, uses_anonymous_args = 0
 3868              		@ link register save eliminated.
 3869 0000 80B4     		push	{r7}
 3870              		.cfi_def_cfa_offset 4
 3871              		.cfi_offset 7, -4
 3872 0002 00AF     		add	r7, sp, #0
 3873              		.cfi_def_cfa_register 7
 925:bluetooth_rxtx.c **** 	/* TODO - check specific source of shared interrupt */
 926:bluetooth_rxtx.c **** 	IO2IntClr = PIN_GIO6;            // clear interrupt
 3874              		.loc 1 926 0
 3875 0004 0B4B     		ldr	r3, .L177
 3876 0006 0422     		movs	r2, #4
 3877 0008 1A60     		str	r2, [r3]
 927:bluetooth_rxtx.c **** 	cs_trigger = 1;                  // signal trigger
 3878              		.loc 1 927 0
 3879 000a 0B4B     		ldr	r3, .L177+4
 3880 000c 0122     		movs	r2, #1
 3881 000e 1A70     		strb	r2, [r3]
 928:bluetooth_rxtx.c **** 	cs_timestamp = CLK100NS;         // time at trigger
 3882              		.loc 1 928 0
 3883 0010 0A4B     		ldr	r3, .L177+8
 3884 0012 1B68     		ldr	r3, [r3]
 3885 0014 C3F31303 		ubfx	r3, r3, #0, #20
 3886 0018 40F63542 		movw	r2, #3125
 3887 001c 02FB03F2 		mul	r2, r2, r3
 3888 0020 074B     		ldr	r3, .L177+12
 3889 0022 1B68     		ldr	r3, [r3]
 3890 0024 1344     		add	r3, r3, r2
 3891 0026 074A     		ldr	r2, .L177+16
 3892 0028 1360     		str	r3, [r2]
 929:bluetooth_rxtx.c **** }
 3893              		.loc 1 929 0
 3894 002a BD46     		mov	sp, r7
 3895              		.cfi_def_cfa_register 13
 3896              		@ sp needed
 3897 002c 5DF8047B 		ldr	r7, [sp], #4
 3898              		.cfi_restore 7
 3899              		.cfi_def_cfa_offset 0
 3900 0030 7047     		bx	lr
 3901              	.L178:
 3902 0032 00BF     		.align	2
 3903              	.L177:
 3904 0034 AC800240 		.word	1073905836
 3905 0038 00000000 		.word	cs_trigger
 3906 003c 00000000 		.word	clkn
 3907 0040 08400040 		.word	1073758216
 3908 0044 00000000 		.word	cs_timestamp
 3909              		.cfi_endproc
 3910              	.LFE12:
 3912              		.section	.text.msleep,"ax",%progbits
 3913              		.align	2
 3914              		.thumb
 3915              		.thumb_func
 3917              	msleep:
 3918              	.LFB13:
ARM GAS  /tmp/cczWrdyg.s 			page 85


 930:bluetooth_rxtx.c **** #endif // TC13BADGE
 931:bluetooth_rxtx.c **** 
 932:bluetooth_rxtx.c **** /* Sleep (busy wait) for 'millis' milliseconds. The 'wait' routines in
 933:bluetooth_rxtx.c ****  * ubertooth.c are matched to the clock setup at boot time and can not
 934:bluetooth_rxtx.c ****  * be used while the board is running at 100MHz. */
 935:bluetooth_rxtx.c **** static void msleep(uint32_t millis)
 936:bluetooth_rxtx.c **** {
 3919              		.loc 1 936 0
 3920              		.cfi_startproc
 3921              		@ args = 0, pretend = 0, frame = 16
 3922              		@ frame_needed = 1, uses_anonymous_args = 0
 3923              		@ link register save eliminated.
 3924 0000 80B4     		push	{r7}
 3925              		.cfi_def_cfa_offset 4
 3926              		.cfi_offset 7, -4
 3927 0002 85B0     		sub	sp, sp, #20
 3928              		.cfi_def_cfa_offset 24
 3929 0004 00AF     		add	r7, sp, #0
 3930              		.cfi_def_cfa_register 7
 3931 0006 7860     		str	r0, [r7, #4]
 937:bluetooth_rxtx.c **** 	uint32_t stop_at = clkn + millis * 3125 / 1000;  // millis -> clkn ticks
 3932              		.loc 1 937 0
 3933 0008 7B68     		ldr	r3, [r7, #4]
 3934 000a 40F63542 		movw	r2, #3125
 3935 000e 02FB03F3 		mul	r3, r2, r3
 3936 0012 094A     		ldr	r2, .L181
 3937 0014 A2FB0323 		umull	r2, r3, r2, r3
 3938 0018 9A09     		lsrs	r2, r3, #6
 3939 001a 084B     		ldr	r3, .L181+4
 3940 001c 1B68     		ldr	r3, [r3]
 3941 001e 1344     		add	r3, r3, r2
 3942 0020 FB60     		str	r3, [r7, #12]
 3943              	.L180:
 938:bluetooth_rxtx.c **** 	do { } while (clkn < stop_at);                   // TODO: handle wrapping
 3944              		.loc 1 938 0 discriminator 1
 3945 0022 064B     		ldr	r3, .L181+4
 3946 0024 1A68     		ldr	r2, [r3]
 3947 0026 FB68     		ldr	r3, [r7, #12]
 3948 0028 9A42     		cmp	r2, r3
 3949 002a FAD3     		bcc	.L180
 939:bluetooth_rxtx.c **** }
 3950              		.loc 1 939 0
 3951 002c 1437     		adds	r7, r7, #20
 3952              		.cfi_def_cfa_offset 4
 3953 002e BD46     		mov	sp, r7
 3954              		.cfi_def_cfa_register 13
 3955              		@ sp needed
 3956 0030 5DF8047B 		ldr	r7, [sp], #4
 3957              		.cfi_restore 7
 3958              		.cfi_def_cfa_offset 0
 3959 0034 7047     		bx	lr
 3960              	.L182:
 3961 0036 00BF     		.align	2
 3962              	.L181:
 3963 0038 D34D6210 		.word	274877907
 3964 003c 00000000 		.word	clkn
 3965              		.cfi_endproc
ARM GAS  /tmp/cczWrdyg.s 			page 86


 3966              	.LFE13:
 3968              		.section	.text.dma_init,"ax",%progbits
 3969              		.align	2
 3970              		.thumb
 3971              		.thumb_func
 3973              	dma_init:
 3974              	.LFB14:
 940:bluetooth_rxtx.c **** 
 941:bluetooth_rxtx.c **** static void dma_init()
 942:bluetooth_rxtx.c **** {
 3975              		.loc 1 942 0
 3976              		.cfi_startproc
 3977              		@ args = 0, pretend = 0, frame = 0
 3978              		@ frame_needed = 1, uses_anonymous_args = 0
 3979              		@ link register save eliminated.
 3980 0000 80B4     		push	{r7}
 3981              		.cfi_def_cfa_offset 4
 3982              		.cfi_offset 7, -4
 3983 0002 00AF     		add	r7, sp, #0
 3984              		.cfi_def_cfa_register 7
 943:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
 944:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 3985              		.loc 1 944 0
 3986 0004 3F4A     		ldr	r2, .L185
 3987 0006 3F4B     		ldr	r3, .L185
 3988 0008 1B68     		ldr	r3, [r3]
 3989 000a 43F00053 		orr	r3, r3, #536870912
 3990 000e 1360     		str	r3, [r2]
 945:bluetooth_rxtx.c **** 
 946:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
 947:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 3991              		.loc 1 947 0
 3992 0010 3D4B     		ldr	r3, .L185+4
 3993 0012 0022     		movs	r2, #0
 3994 0014 1A60     		str	r2, [r3]
 948:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 3995              		.loc 1 948 0
 3996 0016 3D4B     		ldr	r3, .L185+8
 3997 0018 0022     		movs	r2, #0
 3998 001a 1A60     		str	r2, [r3]
 949:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 3999              		.loc 1 949 0
 4000 001c 3C4B     		ldr	r3, .L185+12
 4001 001e 0022     		movs	r2, #0
 4002 0020 1A60     		str	r2, [r3]
 950:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4003              		.loc 1 950 0
 4004 0022 3C4B     		ldr	r3, .L185+16
 4005 0024 0022     		movs	r2, #0
 4006 0026 1A60     		str	r2, [r3]
 951:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4007              		.loc 1 951 0
 4008 0028 3B4B     		ldr	r3, .L185+20
 4009 002a 0022     		movs	r2, #0
 4010 002c 1A60     		str	r2, [r3]
 952:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4011              		.loc 1 952 0
ARM GAS  /tmp/cczWrdyg.s 			page 87


 4012 002e 3B4B     		ldr	r3, .L185+24
 4013 0030 0022     		movs	r2, #0
 4014 0032 1A60     		str	r2, [r3]
 953:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4015              		.loc 1 953 0
 4016 0034 3A4B     		ldr	r3, .L185+28
 4017 0036 0022     		movs	r2, #0
 4018 0038 1A60     		str	r2, [r3]
 954:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4019              		.loc 1 954 0
 4020 003a 3A4B     		ldr	r3, .L185+32
 4021 003c 0022     		movs	r2, #0
 4022 003e 1A60     		str	r2, [r3]
 955:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4023              		.loc 1 955 0
 4024 0040 394B     		ldr	r3, .L185+36
 4025 0042 FF22     		movs	r2, #255
 4026 0044 1A60     		str	r2, [r3]
 956:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4027              		.loc 1 956 0
 4028 0046 394B     		ldr	r3, .L185+40
 4029 0048 FF22     		movs	r2, #255
 4030 004a 1A60     		str	r2, [r3]
 957:bluetooth_rxtx.c **** 
 958:bluetooth_rxtx.c **** 	/* DMA linked lists */
 959:bluetooth_rxtx.c **** 	rx_dma_lli1.src = (u32)&(DIO_SSP_DR);
 4031              		.loc 1 959 0
 4032 004c 384B     		ldr	r3, .L185+44
 4033 004e 394A     		ldr	r2, .L185+48
 4034 0050 1A60     		str	r2, [r3]
 960:bluetooth_rxtx.c **** 	rx_dma_lli1.dest = (u32)&rxbuf1[0];
 4035              		.loc 1 960 0
 4036 0052 394A     		ldr	r2, .L185+52
 4037 0054 364B     		ldr	r3, .L185+44
 4038 0056 5A60     		str	r2, [r3, #4]
 961:bluetooth_rxtx.c **** 	rx_dma_lli1.next_lli = (u32)&rx_dma_lli2;
 4039              		.loc 1 961 0
 4040 0058 384A     		ldr	r2, .L185+56
 4041 005a 354B     		ldr	r3, .L185+44
 4042 005c 9A60     		str	r2, [r3, #8]
 962:bluetooth_rxtx.c **** 	rx_dma_lli1.control = (DMA_SIZE) |
 4043              		.loc 1 962 0
 4044 005e 344B     		ldr	r3, .L185+44
 4045 0060 374A     		ldr	r2, .L185+60
 4046 0062 DA60     		str	r2, [r3, #12]
 963:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 964:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 965:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 966:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 967:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 968:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 969:bluetooth_rxtx.c **** 
 970:bluetooth_rxtx.c **** 	rx_dma_lli2.src = (u32)&(DIO_SSP_DR);
 4047              		.loc 1 970 0
 4048 0064 354B     		ldr	r3, .L185+56
 4049 0066 334A     		ldr	r2, .L185+48
 4050 0068 1A60     		str	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 88


 971:bluetooth_rxtx.c **** 	rx_dma_lli2.dest = (u32)&rxbuf2[0];
 4051              		.loc 1 971 0
 4052 006a 364A     		ldr	r2, .L185+64
 4053 006c 334B     		ldr	r3, .L185+56
 4054 006e 5A60     		str	r2, [r3, #4]
 972:bluetooth_rxtx.c **** 	rx_dma_lli2.next_lli = (u32)&rx_dma_lli1;
 4055              		.loc 1 972 0
 4056 0070 2F4A     		ldr	r2, .L185+44
 4057 0072 324B     		ldr	r3, .L185+56
 4058 0074 9A60     		str	r2, [r3, #8]
 973:bluetooth_rxtx.c **** 	rx_dma_lli2.control = (DMA_SIZE) |
 4059              		.loc 1 973 0
 4060 0076 314B     		ldr	r3, .L185+56
 4061 0078 314A     		ldr	r2, .L185+60
 4062 007a DA60     		str	r2, [r3, #12]
 974:bluetooth_rxtx.c **** 			(1 << 12) |        /* source burst size = 4 */
 975:bluetooth_rxtx.c **** 			(1 << 15) |        /* destination burst size = 4 */
 976:bluetooth_rxtx.c **** 			(0 << 18) |        /* source width 8 bits */
 977:bluetooth_rxtx.c **** 			(0 << 21) |        /* destination width 8 bits */
 978:bluetooth_rxtx.c **** 			DMACCxControl_DI | /* destination increment */
 979:bluetooth_rxtx.c **** 			DMACCxControl_I;   /* terminal count interrupt enable */
 980:bluetooth_rxtx.c **** 
 981:bluetooth_rxtx.c **** 	/* disable DMA interrupts */
 982:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4063              		.loc 1 982 0
 4064 007c 324B     		ldr	r3, .L185+68
 4065 007e 4FF08062 		mov	r2, #67108864
 4066 0082 1A60     		str	r2, [r3]
 983:bluetooth_rxtx.c **** 
 984:bluetooth_rxtx.c **** 	/* enable DMA globally */
 985:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4067              		.loc 1 985 0
 4068 0084 314B     		ldr	r3, .L185+72
 4069 0086 0122     		movs	r2, #1
 4070 0088 1A60     		str	r2, [r3]
 986:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4071              		.loc 1 986 0
 4072 008a 00BF     		nop
 4073              	.L184:
 4074              		.loc 1 986 0 is_stmt 0 discriminator 1
 4075 008c 2F4B     		ldr	r3, .L185+72
 4076 008e 1B68     		ldr	r3, [r3]
 4077 0090 03F00103 		and	r3, r3, #1
 4078 0094 002B     		cmp	r3, #0
 4079 0096 F9D0     		beq	.L184
 987:bluetooth_rxtx.c **** 
 988:bluetooth_rxtx.c **** 	/* configure DMA channel 1 */
 989:bluetooth_rxtx.c **** 	DMACC0SrcAddr = rx_dma_lli1.src;
 4080              		.loc 1 989 0 is_stmt 1
 4081 0098 2D4A     		ldr	r2, .L185+76
 4082 009a 254B     		ldr	r3, .L185+44
 4083 009c 1B68     		ldr	r3, [r3]
 4084 009e 1360     		str	r3, [r2]
 990:bluetooth_rxtx.c **** 	DMACC0DestAddr = rx_dma_lli1.dest;
 4085              		.loc 1 990 0
 4086 00a0 2C4A     		ldr	r2, .L185+80
 4087 00a2 234B     		ldr	r3, .L185+44
ARM GAS  /tmp/cczWrdyg.s 			page 89


 4088 00a4 5B68     		ldr	r3, [r3, #4]
 4089 00a6 1360     		str	r3, [r2]
 991:bluetooth_rxtx.c **** 	DMACC0LLI = rx_dma_lli1.next_lli;
 4090              		.loc 1 991 0
 4091 00a8 2B4A     		ldr	r2, .L185+84
 4092 00aa 214B     		ldr	r3, .L185+44
 4093 00ac 9B68     		ldr	r3, [r3, #8]
 4094 00ae 1360     		str	r3, [r2]
 992:bluetooth_rxtx.c **** 	DMACC0Control = rx_dma_lli1.control;
 4095              		.loc 1 992 0
 4096 00b0 2A4A     		ldr	r2, .L185+88
 4097 00b2 1F4B     		ldr	r3, .L185+44
 4098 00b4 DB68     		ldr	r3, [r3, #12]
 4099 00b6 1360     		str	r3, [r2]
 993:bluetooth_rxtx.c **** 	DMACC0Config =
 4100              		.loc 1 993 0
 4101 00b8 134B     		ldr	r3, .L185+4
 4102 00ba 4DF20602 		movw	r2, #53254
 4103 00be 1A60     		str	r2, [r3]
 994:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
 995:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
 996:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
 997:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
 998:bluetooth_rxtx.c **** 
 999:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4104              		.loc 1 999 0
 4105 00c0 274B     		ldr	r3, .L185+92
 4106 00c2 1B68     		ldr	r3, [r3]
 4107 00c4 1B0D     		lsrs	r3, r3, #20
 4108 00c6 DBB2     		uxtb	r3, r3
 4109 00c8 264A     		ldr	r2, .L185+96
 4110 00ca 1360     		str	r3, [r2]
1000:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4111              		.loc 1 1000 0
 4112 00cc 244B     		ldr	r3, .L185+92
 4113 00ce 1B68     		ldr	r3, [r3]
 4114 00d0 C3F31303 		ubfx	r3, r3, #0, #20
 4115 00d4 40F63542 		movw	r2, #3125
 4116 00d8 02FB03F2 		mul	r2, r2, r3
 4117 00dc 224B     		ldr	r3, .L185+100
 4118 00de 1B68     		ldr	r3, [r3]
 4119 00e0 1344     		add	r3, r3, r2
 4120 00e2 224A     		ldr	r2, .L185+104
 4121 00e4 1360     		str	r3, [r2]
1001:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4122              		.loc 1 1001 0
 4123 00e6 224B     		ldr	r3, .L185+108
 4124 00e8 1B88     		ldrh	r3, [r3]	@ movhi
 4125 00ea 9AB2     		uxth	r2, r3
 4126 00ec 214B     		ldr	r3, .L185+112
 4127 00ee 1A80     		strh	r2, [r3]	@ movhi
1002:bluetooth_rxtx.c **** 
1003:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1004:bluetooth_rxtx.c **** 	rx_tc = 0;
 4128              		.loc 1 1004 0
 4129 00f0 214B     		ldr	r3, .L185+116
 4130 00f2 0022     		movs	r2, #0
ARM GAS  /tmp/cczWrdyg.s 			page 90


 4131 00f4 1A60     		str	r2, [r3]
1005:bluetooth_rxtx.c **** 	rx_err = 0;
 4132              		.loc 1 1005 0
 4133 00f6 214B     		ldr	r3, .L185+120
 4134 00f8 0022     		movs	r2, #0
 4135 00fa 1A60     		str	r2, [r3]
1006:bluetooth_rxtx.c **** }
 4136              		.loc 1 1006 0
 4137 00fc BD46     		mov	sp, r7
 4138              		.cfi_def_cfa_register 13
 4139              		@ sp needed
 4140 00fe 5DF8047B 		ldr	r7, [sp], #4
 4141              		.cfi_restore 7
 4142              		.cfi_def_cfa_offset 0
 4143 0102 7047     		bx	lr
 4144              	.L186:
 4145              		.align	2
 4146              	.L185:
 4147 0104 C4C00F40 		.word	1074774212
 4148 0108 10410050 		.word	1342193936
 4149 010c 30410050 		.word	1342193968
 4150 0110 50410050 		.word	1342194000
 4151 0114 70410050 		.word	1342194032
 4152 0118 90410050 		.word	1342194064
 4153 011c B0410050 		.word	1342194096
 4154 0120 D0410050 		.word	1342194128
 4155 0124 F0410050 		.word	1342194160
 4156 0128 08400050 		.word	1342193672
 4157 012c 10400050 		.word	1342193680
 4158 0130 00000000 		.word	rx_dma_lli1
 4159 0134 08000340 		.word	1073938440
 4160 0138 00000000 		.word	rxbuf1
 4161 013c 00000000 		.word	rx_dma_lli2
 4162 0140 32900088 		.word	-2013229006
 4163 0144 00000000 		.word	rxbuf2
 4164 0148 80E100E0 		.word	-536813184
 4165 014c 30400050 		.word	1342193712
 4166 0150 00410050 		.word	1342193920
 4167 0154 04410050 		.word	1342193924
 4168 0158 08410050 		.word	1342193928
 4169 015c 0C410050 		.word	1342193932
 4170 0160 00000000 		.word	clkn
 4171 0164 00000000 		.word	active_buf_clkn_high
 4172 0168 08400040 		.word	1073758216
 4173 016c 00000000 		.word	active_buf_clk100ns
 4174 0170 00000000 		.word	channel
 4175 0174 00000000 		.word	active_buf_channel
 4176 0178 00000000 		.word	rx_tc
 4177 017c 00000000 		.word	rx_err
 4178              		.cfi_endproc
 4179              	.LFE14:
 4181              		.section	.text.dma_init_le,"ax",%progbits
 4182              		.align	2
 4183              		.thumb
 4184              		.thumb_func
 4186              	dma_init_le:
 4187              	.LFB15:
ARM GAS  /tmp/cczWrdyg.s 			page 91


1007:bluetooth_rxtx.c **** 
1008:bluetooth_rxtx.c **** static void dma_init_le()
1009:bluetooth_rxtx.c **** {
 4188              		.loc 1 1009 0
 4189              		.cfi_startproc
 4190              		@ args = 0, pretend = 0, frame = 8
 4191              		@ frame_needed = 1, uses_anonymous_args = 0
 4192              		@ link register save eliminated.
 4193 0000 80B4     		push	{r7}
 4194              		.cfi_def_cfa_offset 4
 4195              		.cfi_offset 7, -4
 4196 0002 83B0     		sub	sp, sp, #12
 4197              		.cfi_def_cfa_offset 16
 4198 0004 00AF     		add	r7, sp, #0
 4199              		.cfi_def_cfa_register 7
1010:bluetooth_rxtx.c **** 	int i;
1011:bluetooth_rxtx.c **** 
1012:bluetooth_rxtx.c **** 	/* power up GPDMA controller */
1013:bluetooth_rxtx.c **** 	PCONP |= PCONP_PCGPDMA;
 4200              		.loc 1 1013 0
 4201 0006 4B4A     		ldr	r2, .L193
 4202 0008 4A4B     		ldr	r3, .L193
 4203 000a 1B68     		ldr	r3, [r3]
 4204 000c 43F00053 		orr	r3, r3, #536870912
 4205 0010 1360     		str	r3, [r2]
1014:bluetooth_rxtx.c **** 
1015:bluetooth_rxtx.c **** 	/* zero out channel configs and clear interrupts */
1016:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4206              		.loc 1 1016 0
 4207 0012 494B     		ldr	r3, .L193+4
 4208 0014 0022     		movs	r2, #0
 4209 0016 1A60     		str	r2, [r3]
1017:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4210              		.loc 1 1017 0
 4211 0018 484B     		ldr	r3, .L193+8
 4212 001a 0022     		movs	r2, #0
 4213 001c 1A60     		str	r2, [r3]
1018:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4214              		.loc 1 1018 0
 4215 001e 484B     		ldr	r3, .L193+12
 4216 0020 0022     		movs	r2, #0
 4217 0022 1A60     		str	r2, [r3]
1019:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4218              		.loc 1 1019 0
 4219 0024 474B     		ldr	r3, .L193+16
 4220 0026 0022     		movs	r2, #0
 4221 0028 1A60     		str	r2, [r3]
1020:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4222              		.loc 1 1020 0
 4223 002a 474B     		ldr	r3, .L193+20
 4224 002c 0022     		movs	r2, #0
 4225 002e 1A60     		str	r2, [r3]
1021:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4226              		.loc 1 1021 0
 4227 0030 464B     		ldr	r3, .L193+24
 4228 0032 0022     		movs	r2, #0
 4229 0034 1A60     		str	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 92


1022:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4230              		.loc 1 1022 0
 4231 0036 464B     		ldr	r3, .L193+28
 4232 0038 0022     		movs	r2, #0
 4233 003a 1A60     		str	r2, [r3]
1023:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4234              		.loc 1 1023 0
 4235 003c 454B     		ldr	r3, .L193+32
 4236 003e 0022     		movs	r2, #0
 4237 0040 1A60     		str	r2, [r3]
1024:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4238              		.loc 1 1024 0
 4239 0042 454B     		ldr	r3, .L193+36
 4240 0044 FF22     		movs	r2, #255
 4241 0046 1A60     		str	r2, [r3]
1025:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4242              		.loc 1 1025 0
 4243 0048 444B     		ldr	r3, .L193+40
 4244 004a FF22     		movs	r2, #255
 4245 004c 1A60     		str	r2, [r3]
1026:bluetooth_rxtx.c **** 
1027:bluetooth_rxtx.c **** 	/* enable DMA globally */
1028:bluetooth_rxtx.c **** 	DMACConfig = DMACConfig_E;
 4246              		.loc 1 1028 0
 4247 004e 444B     		ldr	r3, .L193+44
 4248 0050 0122     		movs	r2, #1
 4249 0052 1A60     		str	r2, [r3]
1029:bluetooth_rxtx.c **** 	while (!(DMACConfig & DMACConfig_E));
 4250              		.loc 1 1029 0
 4251 0054 00BF     		nop
 4252              	.L188:
 4253              		.loc 1 1029 0 is_stmt 0 discriminator 1
 4254 0056 424B     		ldr	r3, .L193+44
 4255 0058 1B68     		ldr	r3, [r3]
 4256 005a 03F00103 		and	r3, r3, #1
 4257 005e 002B     		cmp	r3, #0
 4258 0060 F9D0     		beq	.L188
1030:bluetooth_rxtx.c **** 
1031:bluetooth_rxtx.c **** 	for (i = 0; i < 11; ++i) {
 4259              		.loc 1 1031 0 is_stmt 1
 4260 0062 0023     		movs	r3, #0
 4261 0064 7B60     		str	r3, [r7, #4]
 4262 0066 2AE0     		b	.L189
 4263              	.L192:
1032:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4264              		.loc 1 1032 0
 4265 0068 3E4A     		ldr	r2, .L193+48
 4266 006a 7B68     		ldr	r3, [r7, #4]
 4267 006c 1B01     		lsls	r3, r3, #4
 4268 006e 1344     		add	r3, r3, r2
 4269 0070 3D4A     		ldr	r2, .L193+52
 4270 0072 1A60     		str	r2, [r3]
1033:bluetooth_rxtx.c **** 		le_dma_lli[i].dest = (u32)&rxbuf1[4 * i];
 4271              		.loc 1 1033 0
 4272 0074 7B68     		ldr	r3, [r7, #4]
 4273 0076 9B00     		lsls	r3, r3, #2
 4274 0078 3C4A     		ldr	r2, .L193+56
ARM GAS  /tmp/cczWrdyg.s 			page 93


 4275 007a 1344     		add	r3, r3, r2
 4276 007c 1946     		mov	r1, r3
 4277 007e 394A     		ldr	r2, .L193+48
 4278 0080 7B68     		ldr	r3, [r7, #4]
 4279 0082 1B01     		lsls	r3, r3, #4
 4280 0084 1344     		add	r3, r3, r2
 4281 0086 5960     		str	r1, [r3, #4]
1034:bluetooth_rxtx.c **** 		le_dma_lli[i].next_lli = i < 10 ? (u32)&le_dma_lli[i+1] : 0;
 4282              		.loc 1 1034 0
 4283 0088 7B68     		ldr	r3, [r7, #4]
 4284 008a 092B     		cmp	r3, #9
 4285 008c 06DC     		bgt	.L190
 4286              		.loc 1 1034 0 is_stmt 0 discriminator 1
 4287 008e 7B68     		ldr	r3, [r7, #4]
 4288 0090 0133     		adds	r3, r3, #1
 4289 0092 1B01     		lsls	r3, r3, #4
 4290 0094 334A     		ldr	r2, .L193+48
 4291 0096 1344     		add	r3, r3, r2
 4292 0098 1A46     		mov	r2, r3
 4293 009a 00E0     		b	.L191
 4294              	.L190:
 4295              		.loc 1 1034 0 discriminator 2
 4296 009c 0022     		movs	r2, #0
 4297              	.L191:
 4298              		.loc 1 1034 0 discriminator 4
 4299 009e 3149     		ldr	r1, .L193+48
 4300 00a0 7B68     		ldr	r3, [r7, #4]
 4301 00a2 1B01     		lsls	r3, r3, #4
 4302 00a4 0B44     		add	r3, r3, r1
 4303 00a6 0833     		adds	r3, r3, #8
 4304 00a8 1A60     		str	r2, [r3]
1035:bluetooth_rxtx.c **** 		le_dma_lli[i].control = 4 |
 4305              		.loc 1 1035 0 is_stmt 1 discriminator 4
 4306 00aa 2E4A     		ldr	r2, .L193+48
 4307 00ac 7B68     		ldr	r3, [r7, #4]
 4308 00ae 1B01     		lsls	r3, r3, #4
 4309 00b0 1344     		add	r3, r3, r2
 4310 00b2 0833     		adds	r3, r3, #8
 4311 00b4 2E4A     		ldr	r2, .L193+60
 4312 00b6 5A60     		str	r2, [r3, #4]
1031:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4313              		.loc 1 1031 0 discriminator 4
 4314 00b8 7B68     		ldr	r3, [r7, #4]
 4315 00ba 0133     		adds	r3, r3, #1
 4316 00bc 7B60     		str	r3, [r7, #4]
 4317              	.L189:
1031:bluetooth_rxtx.c **** 		le_dma_lli[i].src = (u32)&(DIO_SSP_DR);
 4318              		.loc 1 1031 0 is_stmt 0 discriminator 2
 4319 00be 7B68     		ldr	r3, [r7, #4]
 4320 00c0 0A2B     		cmp	r3, #10
 4321 00c2 D1DD     		ble	.L192
1036:bluetooth_rxtx.c **** 				(1 << 12) |        /* source burst size = 4 */
1037:bluetooth_rxtx.c **** 				(0 << 15) |        /* destination burst size = 1 */
1038:bluetooth_rxtx.c **** 				(0 << 18) |        /* source width 8 bits */
1039:bluetooth_rxtx.c **** 				(0 << 21) |        /* destination width 8 bits */
1040:bluetooth_rxtx.c **** 				DMACCxControl_DI | /* destination increment */
1041:bluetooth_rxtx.c **** 				DMACCxControl_I;   /* terminal count interrupt enable */
ARM GAS  /tmp/cczWrdyg.s 			page 94


1042:bluetooth_rxtx.c **** 	}
1043:bluetooth_rxtx.c **** 
1044:bluetooth_rxtx.c **** 	/* configure DMA channel 0 */
1045:bluetooth_rxtx.c **** 	DMACC0SrcAddr = le_dma_lli[0].src;
 4322              		.loc 1 1045 0 is_stmt 1
 4323 00c4 2B4A     		ldr	r2, .L193+64
 4324 00c6 274B     		ldr	r3, .L193+48
 4325 00c8 1B68     		ldr	r3, [r3]
 4326 00ca 1360     		str	r3, [r2]
1046:bluetooth_rxtx.c **** 	DMACC0DestAddr = le_dma_lli[0].dest;
 4327              		.loc 1 1046 0
 4328 00cc 2A4A     		ldr	r2, .L193+68
 4329 00ce 254B     		ldr	r3, .L193+48
 4330 00d0 5B68     		ldr	r3, [r3, #4]
 4331 00d2 1360     		str	r3, [r2]
1047:bluetooth_rxtx.c **** 	DMACC0LLI = le_dma_lli[0].next_lli;
 4332              		.loc 1 1047 0
 4333 00d4 294A     		ldr	r2, .L193+72
 4334 00d6 234B     		ldr	r3, .L193+48
 4335 00d8 9B68     		ldr	r3, [r3, #8]
 4336 00da 1360     		str	r3, [r2]
1048:bluetooth_rxtx.c **** 	DMACC0Control = le_dma_lli[0].control;
 4337              		.loc 1 1048 0
 4338 00dc 284A     		ldr	r2, .L193+76
 4339 00de 214B     		ldr	r3, .L193+48
 4340 00e0 DB68     		ldr	r3, [r3, #12]
 4341 00e2 1360     		str	r3, [r2]
1049:bluetooth_rxtx.c **** 	DMACC0Config =
 4342              		.loc 1 1049 0
 4343 00e4 144B     		ldr	r3, .L193+4
 4344 00e6 4DF20602 		movw	r2, #53254
 4345 00ea 1A60     		str	r2, [r3]
1050:bluetooth_rxtx.c **** 			DIO_SSP_SRC |
1051:bluetooth_rxtx.c **** 			(0x2 << 11) |           /* peripheral to memory */
1052:bluetooth_rxtx.c **** 			DMACCxConfig_IE |       /* allow error interrupts */
1053:bluetooth_rxtx.c **** 			DMACCxConfig_ITC;       /* allow terminal count interrupts */
1054:bluetooth_rxtx.c **** 
1055:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4346              		.loc 1 1055 0
 4347 00ec 254B     		ldr	r3, .L193+80
 4348 00ee 1B68     		ldr	r3, [r3]
 4349 00f0 1B0D     		lsrs	r3, r3, #20
 4350 00f2 DBB2     		uxtb	r3, r3
 4351 00f4 244A     		ldr	r2, .L193+84
 4352 00f6 1360     		str	r3, [r2]
1056:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4353              		.loc 1 1056 0
 4354 00f8 224B     		ldr	r3, .L193+80
 4355 00fa 1B68     		ldr	r3, [r3]
 4356 00fc C3F31303 		ubfx	r3, r3, #0, #20
 4357 0100 40F63542 		movw	r2, #3125
 4358 0104 02FB03F2 		mul	r2, r2, r3
 4359 0108 204B     		ldr	r3, .L193+88
 4360 010a 1B68     		ldr	r3, [r3]
 4361 010c 1344     		add	r3, r3, r2
 4362 010e 204A     		ldr	r2, .L193+92
 4363 0110 1360     		str	r3, [r2]
ARM GAS  /tmp/cczWrdyg.s 			page 95


1057:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4364              		.loc 1 1057 0
 4365 0112 204B     		ldr	r3, .L193+96
 4366 0114 1B88     		ldrh	r3, [r3]	@ movhi
 4367 0116 9AB2     		uxth	r2, r3
 4368 0118 1F4B     		ldr	r3, .L193+100
 4369 011a 1A80     		strh	r2, [r3]	@ movhi
1058:bluetooth_rxtx.c **** 
1059:bluetooth_rxtx.c **** 	/* reset interrupt counters */
1060:bluetooth_rxtx.c **** 	rx_tc = 0;
 4370              		.loc 1 1060 0
 4371 011c 1F4B     		ldr	r3, .L193+104
 4372 011e 0022     		movs	r2, #0
 4373 0120 1A60     		str	r2, [r3]
1061:bluetooth_rxtx.c **** 	rx_err = 0;
 4374              		.loc 1 1061 0
 4375 0122 1F4B     		ldr	r3, .L193+108
 4376 0124 0022     		movs	r2, #0
 4377 0126 1A60     		str	r2, [r3]
1062:bluetooth_rxtx.c **** }
 4378              		.loc 1 1062 0
 4379 0128 0C37     		adds	r7, r7, #12
 4380              		.cfi_def_cfa_offset 4
 4381 012a BD46     		mov	sp, r7
 4382              		.cfi_def_cfa_register 13
 4383              		@ sp needed
 4384 012c 5DF8047B 		ldr	r7, [sp], #4
 4385              		.cfi_restore 7
 4386              		.cfi_def_cfa_offset 0
 4387 0130 7047     		bx	lr
 4388              	.L194:
 4389 0132 00BF     		.align	2
 4390              	.L193:
 4391 0134 C4C00F40 		.word	1074774212
 4392 0138 10410050 		.word	1342193936
 4393 013c 30410050 		.word	1342193968
 4394 0140 50410050 		.word	1342194000
 4395 0144 70410050 		.word	1342194032
 4396 0148 90410050 		.word	1342194064
 4397 014c B0410050 		.word	1342194096
 4398 0150 D0410050 		.word	1342194128
 4399 0154 F0410050 		.word	1342194160
 4400 0158 08400050 		.word	1342193672
 4401 015c 10400050 		.word	1342193680
 4402 0160 30400050 		.word	1342193712
 4403 0164 00000000 		.word	le_dma_lli
 4404 0168 08000340 		.word	1073938440
 4405 016c 00000000 		.word	rxbuf1
 4406 0170 04100088 		.word	-2013261820
 4407 0174 00410050 		.word	1342193920
 4408 0178 04410050 		.word	1342193924
 4409 017c 08410050 		.word	1342193928
 4410 0180 0C410050 		.word	1342193932
 4411 0184 00000000 		.word	clkn
 4412 0188 00000000 		.word	active_buf_clkn_high
 4413 018c 08400040 		.word	1073758216
 4414 0190 00000000 		.word	active_buf_clk100ns
ARM GAS  /tmp/cczWrdyg.s 			page 96


 4415 0194 00000000 		.word	channel
 4416 0198 00000000 		.word	active_buf_channel
 4417 019c 00000000 		.word	rx_tc
 4418 01a0 00000000 		.word	rx_err
 4419              		.cfi_endproc
 4420              	.LFE15:
 4422              		.section	.text.bt_stream_dma_handler,"ax",%progbits
 4423              		.align	2
 4424              		.global	bt_stream_dma_handler
 4425              		.thumb
 4426              		.thumb_func
 4428              	bt_stream_dma_handler:
 4429              	.LFB16:
1063:bluetooth_rxtx.c **** 
1064:bluetooth_rxtx.c **** void bt_stream_dma_handler(void) {
 4430              		.loc 1 1064 0
 4431              		.cfi_startproc
 4432              		@ args = 0, pretend = 0, frame = 0
 4433              		@ frame_needed = 1, uses_anonymous_args = 0
 4434              		@ link register save eliminated.
 4435 0000 80B4     		push	{r7}
 4436              		.cfi_def_cfa_offset 4
 4437              		.cfi_offset 7, -4
 4438 0002 00AF     		add	r7, sp, #0
 4439              		.cfi_def_cfa_register 7
1065:bluetooth_rxtx.c **** 	idle_buf_clkn_high = active_buf_clkn_high;
 4440              		.loc 1 1065 0
 4441 0004 254B     		ldr	r3, .L198
 4442 0006 1B68     		ldr	r3, [r3]
 4443 0008 254A     		ldr	r2, .L198+4
 4444 000a 1360     		str	r3, [r2]
1066:bluetooth_rxtx.c **** 	active_buf_clkn_high = (clkn >> 20) & 0xff;
 4445              		.loc 1 1066 0
 4446 000c 254B     		ldr	r3, .L198+8
 4447 000e 1B68     		ldr	r3, [r3]
 4448 0010 1B0D     		lsrs	r3, r3, #20
 4449 0012 DBB2     		uxtb	r3, r3
 4450 0014 214A     		ldr	r2, .L198
 4451 0016 1360     		str	r3, [r2]
1067:bluetooth_rxtx.c **** 
1068:bluetooth_rxtx.c **** 	idle_buf_clk100ns = active_buf_clk100ns;
 4452              		.loc 1 1068 0
 4453 0018 234B     		ldr	r3, .L198+12
 4454 001a 1B68     		ldr	r3, [r3]
 4455 001c 234A     		ldr	r2, .L198+16
 4456 001e 1360     		str	r3, [r2]
1069:bluetooth_rxtx.c **** 	active_buf_clk100ns = CLK100NS;
 4457              		.loc 1 1069 0
 4458 0020 204B     		ldr	r3, .L198+8
 4459 0022 1B68     		ldr	r3, [r3]
 4460 0024 C3F31303 		ubfx	r3, r3, #0, #20
 4461 0028 40F63542 		movw	r2, #3125
 4462 002c 02FB03F2 		mul	r2, r2, r3
 4463 0030 1F4B     		ldr	r3, .L198+20
 4464 0032 1B68     		ldr	r3, [r3]
 4465 0034 1344     		add	r3, r3, r2
 4466 0036 1C4A     		ldr	r2, .L198+12
ARM GAS  /tmp/cczWrdyg.s 			page 97


 4467 0038 1360     		str	r3, [r2]
1070:bluetooth_rxtx.c **** 
1071:bluetooth_rxtx.c **** 	idle_buf_channel = active_buf_channel;
 4468              		.loc 1 1071 0
 4469 003a 1E4B     		ldr	r3, .L198+24
 4470 003c 1B88     		ldrh	r3, [r3]	@ movhi
 4471 003e 9AB2     		uxth	r2, r3
 4472 0040 1D4B     		ldr	r3, .L198+28
 4473 0042 1A80     		strh	r2, [r3]	@ movhi
1072:bluetooth_rxtx.c **** 	active_buf_channel = channel;
 4474              		.loc 1 1072 0
 4475 0044 1D4B     		ldr	r3, .L198+32
 4476 0046 1B88     		ldrh	r3, [r3]	@ movhi
 4477 0048 9AB2     		uxth	r2, r3
 4478 004a 1A4B     		ldr	r3, .L198+24
 4479 004c 1A80     		strh	r2, [r3]	@ movhi
1073:bluetooth_rxtx.c **** 
1074:bluetooth_rxtx.c **** 	/* interrupt on channel 0 */
1075:bluetooth_rxtx.c **** 	if (DMACIntStat & (1 << 0)) {
 4480              		.loc 1 1075 0
 4481 004e 1C4B     		ldr	r3, .L198+36
 4482 0050 1B68     		ldr	r3, [r3]
 4483 0052 03F00103 		and	r3, r3, #1
 4484 0056 002B     		cmp	r3, #0
 4485 0058 1BD0     		beq	.L195
1076:bluetooth_rxtx.c **** 		if (DMACIntTCStat & (1 << 0)) {
 4486              		.loc 1 1076 0
 4487 005a 1A4B     		ldr	r3, .L198+40
 4488 005c 1B68     		ldr	r3, [r3]
 4489 005e 03F00103 		and	r3, r3, #1
 4490 0062 002B     		cmp	r3, #0
 4491 0064 07D0     		beq	.L197
1077:bluetooth_rxtx.c **** 			DMACIntTCClear = (1 << 0);
 4492              		.loc 1 1077 0
 4493 0066 184B     		ldr	r3, .L198+44
 4494 0068 0122     		movs	r2, #1
 4495 006a 1A60     		str	r2, [r3]
1078:bluetooth_rxtx.c **** 			++rx_tc;
 4496              		.loc 1 1078 0
 4497 006c 174B     		ldr	r3, .L198+48
 4498 006e 1B68     		ldr	r3, [r3]
 4499 0070 0133     		adds	r3, r3, #1
 4500 0072 164A     		ldr	r2, .L198+48
 4501 0074 1360     		str	r3, [r2]
 4502              	.L197:
1079:bluetooth_rxtx.c **** 		}
1080:bluetooth_rxtx.c **** 		if (DMACIntErrStat & (1 << 0)) {
 4503              		.loc 1 1080 0
 4504 0076 164B     		ldr	r3, .L198+52
 4505 0078 1B68     		ldr	r3, [r3]
 4506 007a 03F00103 		and	r3, r3, #1
 4507 007e 002B     		cmp	r3, #0
 4508 0080 07D0     		beq	.L195
1081:bluetooth_rxtx.c **** 			DMACIntErrClr = (1 << 0);
 4509              		.loc 1 1081 0
 4510 0082 144B     		ldr	r3, .L198+56
 4511 0084 0122     		movs	r2, #1
ARM GAS  /tmp/cczWrdyg.s 			page 98


 4512 0086 1A60     		str	r2, [r3]
1082:bluetooth_rxtx.c **** 			++rx_err;
 4513              		.loc 1 1082 0
 4514 0088 134B     		ldr	r3, .L198+60
 4515 008a 1B68     		ldr	r3, [r3]
 4516 008c 0133     		adds	r3, r3, #1
 4517 008e 124A     		ldr	r2, .L198+60
 4518 0090 1360     		str	r3, [r2]
 4519              	.L195:
1083:bluetooth_rxtx.c **** 		}
1084:bluetooth_rxtx.c **** 	}
1085:bluetooth_rxtx.c **** }
 4520              		.loc 1 1085 0
 4521 0092 BD46     		mov	sp, r7
 4522              		.cfi_def_cfa_register 13
 4523              		@ sp needed
 4524 0094 5DF8047B 		ldr	r7, [sp], #4
 4525              		.cfi_restore 7
 4526              		.cfi_def_cfa_offset 0
 4527 0098 7047     		bx	lr
 4528              	.L199:
 4529 009a 00BF     		.align	2
 4530              	.L198:
 4531 009c 00000000 		.word	active_buf_clkn_high
 4532 00a0 00000000 		.word	idle_buf_clkn_high
 4533 00a4 00000000 		.word	clkn
 4534 00a8 00000000 		.word	active_buf_clk100ns
 4535 00ac 00000000 		.word	idle_buf_clk100ns
 4536 00b0 08400040 		.word	1073758216
 4537 00b4 00000000 		.word	active_buf_channel
 4538 00b8 00000000 		.word	idle_buf_channel
 4539 00bc 00000000 		.word	channel
 4540 00c0 00400050 		.word	1342193664
 4541 00c4 04400050 		.word	1342193668
 4542 00c8 08400050 		.word	1342193672
 4543 00cc 00000000 		.word	rx_tc
 4544 00d0 0C400050 		.word	1342193676
 4545 00d4 10400050 		.word	1342193680
 4546 00d8 00000000 		.word	rx_err
 4547              		.cfi_endproc
 4548              	.LFE16:
 4550              		.section	.text.DMA_IRQHandler,"ax",%progbits
 4551              		.align	2
 4552              		.global	DMA_IRQHandler
 4553              		.thumb
 4554              		.thumb_func
 4556              	DMA_IRQHandler:
 4557              	.LFB17:
1086:bluetooth_rxtx.c **** 
1087:bluetooth_rxtx.c **** void DMA_IRQHandler()
1088:bluetooth_rxtx.c **** {
 4558              		.loc 1 1088 0
 4559              		.cfi_startproc
 4560              		@ args = 0, pretend = 0, frame = 0
 4561              		@ frame_needed = 1, uses_anonymous_args = 0
 4562 0000 80B5     		push	{r7, lr}
 4563              		.cfi_def_cfa_offset 8
ARM GAS  /tmp/cczWrdyg.s 			page 99


 4564              		.cfi_offset 7, -8
 4565              		.cfi_offset 14, -4
 4566 0002 00AF     		add	r7, sp, #0
 4567              		.cfi_def_cfa_register 7
1089:bluetooth_rxtx.c **** 	switch (mode) {
 4568              		.loc 1 1089 0
 4569 0004 124B     		ldr	r3, .L204
 4570 0006 1B78     		ldrb	r3, [r3]
 4571 0008 DBB2     		uxtb	r3, r3
 4572 000a 013B     		subs	r3, r3, #1
 4573 000c 0B2B     		cmp	r3, #11
 4574 000e 1ED8     		bhi	.L200
 4575 0010 01A2     		adr	r2, .L203
 4576 0012 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 4577 0016 00BF     		.p2align 2
 4578              	.L203:
 4579 0018 49000000 		.word	.L202+1
 4580 001c 4F000000 		.word	.L200+1
 4581 0020 4F000000 		.word	.L200+1
 4582 0024 49000000 		.word	.L202+1
 4583 0028 4F000000 		.word	.L200+1
 4584 002c 4F000000 		.word	.L200+1
 4585 0030 4F000000 		.word	.L200+1
 4586 0034 49000000 		.word	.L202+1
 4587 0038 49000000 		.word	.L202+1
 4588 003c 49000000 		.word	.L202+1
 4589 0040 4F000000 		.word	.L200+1
 4590 0044 49000000 		.word	.L202+1
 4591              		.p2align 1
 4592              	.L202:
1090:bluetooth_rxtx.c **** 		case MODE_RX_SYMBOLS:
1091:bluetooth_rxtx.c **** 		case MODE_SPECAN:
1092:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW:
1093:bluetooth_rxtx.c **** 		case MODE_BT_FOLLOW_LE:
1094:bluetooth_rxtx.c **** 		case MODE_BT_PROMISC_LE:
1095:bluetooth_rxtx.c **** 		case MODE_BT_SLAVE_LE:
1096:bluetooth_rxtx.c **** 			bt_stream_dma_handler();
 4593              		.loc 1 1096 0
 4594 0048 FFF7FEFF 		bl	bt_stream_dma_handler
1097:bluetooth_rxtx.c **** 			break;
 4595              		.loc 1 1097 0
 4596 004c 00BF     		nop
 4597              	.L200:
1098:bluetooth_rxtx.c **** 	}
1099:bluetooth_rxtx.c **** }
 4598              		.loc 1 1099 0
 4599 004e 80BD     		pop	{r7, pc}
 4600              	.L205:
 4601              		.align	2
 4602              	.L204:
 4603 0050 00000000 		.word	mode
 4604              		.cfi_endproc
 4605              	.LFE17:
 4607              		.section	.text.dio_ssp_start,"ax",%progbits
 4608              		.align	2
 4609              		.thumb
 4610              		.thumb_func
ARM GAS  /tmp/cczWrdyg.s 			page 100


 4612              	dio_ssp_start:
 4613              	.LFB18:
1100:bluetooth_rxtx.c **** 
1101:bluetooth_rxtx.c **** static void dio_ssp_start()
1102:bluetooth_rxtx.c **** {
 4614              		.loc 1 1102 0
 4615              		.cfi_startproc
 4616              		@ args = 0, pretend = 0, frame = 0
 4617              		@ frame_needed = 1, uses_anonymous_args = 0
 4618              		@ link register save eliminated.
 4619 0000 80B4     		push	{r7}
 4620              		.cfi_def_cfa_offset 4
 4621              		.cfi_offset 7, -4
 4622 0002 00AF     		add	r7, sp, #0
 4623              		.cfi_def_cfa_register 7
1103:bluetooth_rxtx.c **** 	/* make sure the (active low) slave select signal is not active */
1104:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4624              		.loc 1 1104 0
 4625 0004 104B     		ldr	r3, .L207
 4626 0006 4FF08052 		mov	r2, #268435456
 4627 000a 1A60     		str	r2, [r3]
1105:bluetooth_rxtx.c **** 
1106:bluetooth_rxtx.c **** 	/* enable rx DMA on DIO_SSP */
1107:bluetooth_rxtx.c **** 	DIO_SSP_DMACR |= SSPDMACR_RXDMAE;
 4628              		.loc 1 1107 0
 4629 000c 0F4A     		ldr	r2, .L207+4
 4630 000e 0F4B     		ldr	r3, .L207+4
 4631 0010 1B68     		ldr	r3, [r3]
 4632 0012 43F00103 		orr	r3, r3, #1
 4633 0016 1360     		str	r3, [r2]
1108:bluetooth_rxtx.c **** 	DIO_SSP_CR1 |= SSPCR1_SSE;
 4634              		.loc 1 1108 0
 4635 0018 0D4A     		ldr	r2, .L207+8
 4636 001a 0D4B     		ldr	r3, .L207+8
 4637 001c 1B68     		ldr	r3, [r3]
 4638 001e 43F00203 		orr	r3, r3, #2
 4639 0022 1360     		str	r3, [r2]
1109:bluetooth_rxtx.c **** 	
1110:bluetooth_rxtx.c **** 	/* enable DMA */
1111:bluetooth_rxtx.c **** 	DMACC0Config |= DMACCxConfig_E;
 4640              		.loc 1 1111 0
 4641 0024 0B4A     		ldr	r2, .L207+12
 4642 0026 0B4B     		ldr	r3, .L207+12
 4643 0028 1B68     		ldr	r3, [r3]
 4644 002a 43F00103 		orr	r3, r3, #1
 4645 002e 1360     		str	r3, [r2]
1112:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_DMA;
 4646              		.loc 1 1112 0
 4647 0030 094B     		ldr	r3, .L207+16
 4648 0032 4FF08062 		mov	r2, #67108864
 4649 0036 1A60     		str	r2, [r3]
1113:bluetooth_rxtx.c **** 
1114:bluetooth_rxtx.c **** 	/* activate slave select pin */
1115:bluetooth_rxtx.c **** 	DIO_SSEL_CLR;
 4650              		.loc 1 1115 0
 4651 0038 084B     		ldr	r3, .L207+20
 4652 003a 4FF08052 		mov	r2, #268435456
ARM GAS  /tmp/cczWrdyg.s 			page 101


 4653 003e 1A60     		str	r2, [r3]
1116:bluetooth_rxtx.c **** }
 4654              		.loc 1 1116 0
 4655 0040 BD46     		mov	sp, r7
 4656              		.cfi_def_cfa_register 13
 4657              		@ sp needed
 4658 0042 5DF8047B 		ldr	r7, [sp], #4
 4659              		.cfi_restore 7
 4660              		.cfi_def_cfa_offset 0
 4661 0046 7047     		bx	lr
 4662              	.L208:
 4663              		.align	2
 4664              	.L207:
 4665 0048 98C00920 		.word	537510040
 4666 004c 24000340 		.word	1073938468
 4667 0050 04000340 		.word	1073938436
 4668 0054 10410050 		.word	1342193936
 4669 0058 00E100E0 		.word	-536813312
 4670 005c 9CC00920 		.word	537510044
 4671              		.cfi_endproc
 4672              	.LFE18:
 4674              		.section	.text.dio_ssp_stop,"ax",%progbits
 4675              		.align	2
 4676              		.thumb
 4677              		.thumb_func
 4679              	dio_ssp_stop:
 4680              	.LFB19:
1117:bluetooth_rxtx.c **** 
1118:bluetooth_rxtx.c **** static void dio_ssp_stop()
1119:bluetooth_rxtx.c **** {
 4681              		.loc 1 1119 0
 4682              		.cfi_startproc
 4683              		@ args = 0, pretend = 0, frame = 0
 4684              		@ frame_needed = 1, uses_anonymous_args = 0
 4685              		@ link register save eliminated.
 4686 0000 80B4     		push	{r7}
 4687              		.cfi_def_cfa_offset 4
 4688              		.cfi_offset 7, -4
 4689 0002 00AF     		add	r7, sp, #0
 4690              		.cfi_def_cfa_register 7
1120:bluetooth_rxtx.c **** 	// disable CC2400's output (active low)
1121:bluetooth_rxtx.c **** 	DIO_SSEL_SET;
 4691              		.loc 1 1121 0
 4692 0004 214B     		ldr	r3, .L211
 4693 0006 4FF08052 		mov	r2, #268435456
 4694 000a 1A60     		str	r2, [r3]
1122:bluetooth_rxtx.c **** 
1123:bluetooth_rxtx.c **** 	// disable DMA on SSP; disable SSP
1124:bluetooth_rxtx.c **** 	DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 4695              		.loc 1 1124 0
 4696 000c 204A     		ldr	r2, .L211+4
 4697 000e 204B     		ldr	r3, .L211+4
 4698 0010 1B68     		ldr	r3, [r3]
 4699 0012 23F00103 		bic	r3, r3, #1
 4700 0016 1360     		str	r3, [r2]
1125:bluetooth_rxtx.c **** 	DIO_SSP_CR1 &= ~SSPCR1_SSE;
 4701              		.loc 1 1125 0
ARM GAS  /tmp/cczWrdyg.s 			page 102


 4702 0018 1E4A     		ldr	r2, .L211+8
 4703 001a 1E4B     		ldr	r3, .L211+8
 4704 001c 1B68     		ldr	r3, [r3]
 4705 001e 23F00203 		bic	r3, r3, #2
 4706 0022 1360     		str	r3, [r2]
1126:bluetooth_rxtx.c **** 
1127:bluetooth_rxtx.c **** 
1128:bluetooth_rxtx.c **** 	// disable DMA engine:
1129:bluetooth_rxtx.c **** 	// refer to UM10360 LPC17xx User Manual Ch 31 Sec 31.6.1, PDF page 607
1130:bluetooth_rxtx.c **** 
1131:bluetooth_rxtx.c **** 	// disable DMA interrupts
1132:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_DMA;
 4707              		.loc 1 1132 0
 4708 0024 1C4B     		ldr	r3, .L211+12
 4709 0026 4FF08062 		mov	r2, #67108864
 4710 002a 1A60     		str	r2, [r3]
1133:bluetooth_rxtx.c **** 
1134:bluetooth_rxtx.c **** 	// disable active channels
1135:bluetooth_rxtx.c **** 	DMACC0Config = 0;
 4711              		.loc 1 1135 0
 4712 002c 1B4B     		ldr	r3, .L211+16
 4713 002e 0022     		movs	r2, #0
 4714 0030 1A60     		str	r2, [r3]
1136:bluetooth_rxtx.c **** 	DMACC1Config = 0;
 4715              		.loc 1 1136 0
 4716 0032 1B4B     		ldr	r3, .L211+20
 4717 0034 0022     		movs	r2, #0
 4718 0036 1A60     		str	r2, [r3]
1137:bluetooth_rxtx.c **** 	DMACC2Config = 0;
 4719              		.loc 1 1137 0
 4720 0038 1A4B     		ldr	r3, .L211+24
 4721 003a 0022     		movs	r2, #0
 4722 003c 1A60     		str	r2, [r3]
1138:bluetooth_rxtx.c **** 	DMACC3Config = 0;
 4723              		.loc 1 1138 0
 4724 003e 1A4B     		ldr	r3, .L211+28
 4725 0040 0022     		movs	r2, #0
 4726 0042 1A60     		str	r2, [r3]
1139:bluetooth_rxtx.c **** 	DMACC4Config = 0;
 4727              		.loc 1 1139 0
 4728 0044 194B     		ldr	r3, .L211+32
 4729 0046 0022     		movs	r2, #0
 4730 0048 1A60     		str	r2, [r3]
1140:bluetooth_rxtx.c **** 	DMACC5Config = 0;
 4731              		.loc 1 1140 0
 4732 004a 194B     		ldr	r3, .L211+36
 4733 004c 0022     		movs	r2, #0
 4734 004e 1A60     		str	r2, [r3]
1141:bluetooth_rxtx.c **** 	DMACC6Config = 0;
 4735              		.loc 1 1141 0
 4736 0050 184B     		ldr	r3, .L211+40
 4737 0052 0022     		movs	r2, #0
 4738 0054 1A60     		str	r2, [r3]
1142:bluetooth_rxtx.c **** 	DMACC7Config = 0;
 4739              		.loc 1 1142 0
 4740 0056 184B     		ldr	r3, .L211+44
 4741 0058 0022     		movs	r2, #0
ARM GAS  /tmp/cczWrdyg.s 			page 103


 4742 005a 1A60     		str	r2, [r3]
1143:bluetooth_rxtx.c **** 	DMACIntTCClear = 0xFF;
 4743              		.loc 1 1143 0
 4744 005c 174B     		ldr	r3, .L211+48
 4745 005e FF22     		movs	r2, #255
 4746 0060 1A60     		str	r2, [r3]
1144:bluetooth_rxtx.c **** 	DMACIntErrClr = 0xFF;
 4747              		.loc 1 1144 0
 4748 0062 174B     		ldr	r3, .L211+52
 4749 0064 FF22     		movs	r2, #255
 4750 0066 1A60     		str	r2, [r3]
1145:bluetooth_rxtx.c **** 
1146:bluetooth_rxtx.c **** 	// Disable the DMA controller by writing 0 to the DMA Enable bit in the DMACConfig
1147:bluetooth_rxtx.c **** 	// register.
1148:bluetooth_rxtx.c **** 	DMACConfig &= ~DMACConfig_E;
 4751              		.loc 1 1148 0
 4752 0068 164A     		ldr	r2, .L211+56
 4753 006a 164B     		ldr	r3, .L211+56
 4754 006c 1B68     		ldr	r3, [r3]
 4755 006e 23F00103 		bic	r3, r3, #1
 4756 0072 1360     		str	r3, [r2]
1149:bluetooth_rxtx.c **** 	while (DMACConfig & DMACConfig_E);
 4757              		.loc 1 1149 0
 4758 0074 00BF     		nop
 4759              	.L210:
 4760              		.loc 1 1149 0 is_stmt 0 discriminator 1
 4761 0076 134B     		ldr	r3, .L211+56
 4762 0078 1B68     		ldr	r3, [r3]
 4763 007a 03F00103 		and	r3, r3, #1
 4764 007e 002B     		cmp	r3, #0
 4765 0080 F9D1     		bne	.L210
1150:bluetooth_rxtx.c **** }
 4766              		.loc 1 1150 0 is_stmt 1
 4767 0082 BD46     		mov	sp, r7
 4768              		.cfi_def_cfa_register 13
 4769              		@ sp needed
 4770 0084 5DF8047B 		ldr	r7, [sp], #4
 4771              		.cfi_restore 7
 4772              		.cfi_def_cfa_offset 0
 4773 0088 7047     		bx	lr
 4774              	.L212:
 4775 008a 00BF     		.align	2
 4776              	.L211:
 4777 008c 98C00920 		.word	537510040
 4778 0090 24000340 		.word	1073938468
 4779 0094 04000340 		.word	1073938436
 4780 0098 80E100E0 		.word	-536813184
 4781 009c 10410050 		.word	1342193936
 4782 00a0 30410050 		.word	1342193968
 4783 00a4 50410050 		.word	1342194000
 4784 00a8 70410050 		.word	1342194032
 4785 00ac 90410050 		.word	1342194064
 4786 00b0 B0410050 		.word	1342194096
 4787 00b4 D0410050 		.word	1342194128
 4788 00b8 F0410050 		.word	1342194160
 4789 00bc 08400050 		.word	1342193672
 4790 00c0 10400050 		.word	1342193680
ARM GAS  /tmp/cczWrdyg.s 			page 104


 4791 00c4 30400050 		.word	1342193712
 4792              		.cfi_endproc
 4793              	.LFE19:
 4795              		.section	.text.cc2400_idle,"ax",%progbits
 4796              		.align	2
 4797              		.thumb
 4798              		.thumb_func
 4800              	cc2400_idle:
 4801              	.LFB20:
1151:bluetooth_rxtx.c **** 
1152:bluetooth_rxtx.c **** static void cc2400_idle()
1153:bluetooth_rxtx.c **** {
 4802              		.loc 1 1153 0
 4803              		.cfi_startproc
 4804              		@ args = 0, pretend = 0, frame = 0
 4805              		@ frame_needed = 1, uses_anonymous_args = 0
 4806 0000 80B5     		push	{r7, lr}
 4807              		.cfi_def_cfa_offset 8
 4808              		.cfi_offset 7, -8
 4809              		.cfi_offset 14, -4
 4810 0002 00AF     		add	r7, sp, #0
 4811              		.cfi_def_cfa_register 7
1154:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 4812              		.loc 1 1154 0
 4813 0004 6420     		movs	r0, #100
 4814 0006 FFF7FEFF 		bl	cc2400_strobe
1155:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 4815              		.loc 1 1155 0
 4816 000a 00BF     		nop
 4817              	.L214:
 4818              		.loc 1 1155 0 is_stmt 0 discriminator 1
 4819 000c FFF7FEFF 		bl	cc2400_status
 4820 0010 0346     		mov	r3, r0
 4821 0012 03F00403 		and	r3, r3, #4
 4822 0016 002B     		cmp	r3, #0
 4823 0018 F8D1     		bne	.L214
1156:bluetooth_rxtx.c **** 
1157:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1158:bluetooth_rxtx.c **** 	PAEN_CLR;
 4824              		.loc 1 1158 0 is_stmt 1
 4825 001a 0A4B     		ldr	r3, .L215
 4826 001c 8022     		movs	r2, #128
 4827 001e 1A60     		str	r2, [r3]
1159:bluetooth_rxtx.c **** 	HGM_CLR;
 4828              		.loc 1 1159 0
 4829 0020 084B     		ldr	r3, .L215
 4830 0022 4FF48072 		mov	r2, #256
 4831 0026 1A60     		str	r2, [r3]
1160:bluetooth_rxtx.c **** #endif
1161:bluetooth_rxtx.c **** 
1162:bluetooth_rxtx.c **** 	RXLED_CLR;
 4832              		.loc 1 1162 0
 4833 0028 074B     		ldr	r3, .L215+4
 4834 002a 1022     		movs	r2, #16
 4835 002c 1A60     		str	r2, [r3]
1163:bluetooth_rxtx.c **** 	TXLED_CLR;
 4836              		.loc 1 1163 0
ARM GAS  /tmp/cczWrdyg.s 			page 105


 4837 002e 064B     		ldr	r3, .L215+4
 4838 0030 4FF48072 		mov	r2, #256
 4839 0034 1A60     		str	r2, [r3]
1164:bluetooth_rxtx.c **** 	USRLED_CLR;
 4840              		.loc 1 1164 0
 4841 0036 044B     		ldr	r3, .L215+4
 4842 0038 0222     		movs	r2, #2
 4843 003a 1A60     		str	r2, [r3]
1165:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 4844              		.loc 1 1165 0
 4845 003c 034B     		ldr	r3, .L215+8
 4846 003e 0022     		movs	r2, #0
 4847 0040 1A70     		strb	r2, [r3]
1166:bluetooth_rxtx.c **** }
 4848              		.loc 1 1166 0
 4849 0042 80BD     		pop	{r7, pc}
 4850              	.L216:
 4851              		.align	2
 4852              	.L215:
 4853 0044 5CC00920 		.word	537509980
 4854 0048 3CC00920 		.word	537509948
 4855 004c 00000000 		.word	mode
 4856              		.cfi_endproc
 4857              	.LFE20:
 4859              		.section	.text.cc2400_rx,"ax",%progbits
 4860              		.align	2
 4861              		.thumb
 4862              		.thumb_func
 4864              	cc2400_rx:
 4865              	.LFB21:
1167:bluetooth_rxtx.c **** 
1168:bluetooth_rxtx.c **** /* start un-buffered rx */
1169:bluetooth_rxtx.c **** static void cc2400_rx()
1170:bluetooth_rxtx.c **** {
 4866              		.loc 1 1170 0
 4867              		.cfi_startproc
 4868              		@ args = 0, pretend = 0, frame = 8
 4869              		@ frame_needed = 1, uses_anonymous_args = 0
 4870 0000 80B5     		push	{r7, lr}
 4871              		.cfi_def_cfa_offset 8
 4872              		.cfi_offset 7, -8
 4873              		.cfi_offset 14, -4
 4874 0002 82B0     		sub	sp, sp, #8
 4875              		.cfi_def_cfa_offset 16
 4876 0004 00AF     		add	r7, sp, #0
 4877              		.cfi_def_cfa_register 7
1171:bluetooth_rxtx.c **** 	u16 mdmctrl;
1172:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4878              		.loc 1 1172 0
 4879 0006 284B     		ldr	r3, .L224
 4880 0008 1B78     		ldrb	r3, [r3]
 4881 000a DBB2     		uxtb	r3, r3
 4882 000c 002B     		cmp	r3, #0
 4883 000e 02D1     		bne	.L218
1173:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 4884              		.loc 1 1173 0
 4885 0010 2923     		movs	r3, #41
ARM GAS  /tmp/cczWrdyg.s 			page 106


 4886 0012 FB80     		strh	r3, [r7, #6]	@ movhi
 4887 0014 08E0     		b	.L219
 4888              	.L218:
1174:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 4889              		.loc 1 1174 0
 4890 0016 244B     		ldr	r3, .L224
 4891 0018 1B78     		ldrb	r3, [r3]
 4892 001a DBB2     		uxtb	r3, r3
 4893 001c 012B     		cmp	r3, #1
 4894 001e 02D1     		bne	.L220
1175:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 4895              		.loc 1 1175 0
 4896 0020 4023     		movs	r3, #64
 4897 0022 FB80     		strh	r3, [r7, #6]	@ movhi
 4898 0024 00E0     		b	.L219
 4899              	.L220:
1176:bluetooth_rxtx.c **** 	} else {
1177:bluetooth_rxtx.c **** 		/* oops */
1178:bluetooth_rxtx.c **** 		return;
 4900              		.loc 1 1178 0
 4901 0026 3BE0     		b	.L217
 4902              	.L219:
1179:bluetooth_rxtx.c **** 	}
1180:bluetooth_rxtx.c **** 
1181:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 4903              		.loc 1 1181 0
 4904 0028 0D20     		movs	r0, #13
 4905 002a 47F6FF71 		movw	r1, #32767
 4906 002e FFF7FEFF 		bl	cc2400_set
1182:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 4907              		.loc 1 1182 0
 4908 0032 1220     		movs	r0, #18
 4909 0034 42F62231 		movw	r1, #11042
 4910 0038 FFF7FEFF 		bl	cc2400_set
1183:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x164b); // without PRNG
 4911              		.loc 1 1183 0
 4912 003c 1420     		movs	r0, #20
 4913 003e 41F24B61 		movw	r1, #5707
 4914 0042 FFF7FEFF 		bl	cc2400_set
1184:bluetooth_rxtx.c **** //	cc2400_set(GRMDM,   0x01e1); // un-buffered mode, GFSK
1185:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0301); // un-buffered mode, GFSK
 4915              		.loc 1 1185 0
 4916 0046 2020     		movs	r0, #32
 4917 0048 40F20131 		movw	r1, #769
 4918 004c FFF7FEFF 		bl	cc2400_set
1186:bluetooth_rxtx.c **** 	// 0 00 00 0 010 00 0 00 0 1
1187:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1188:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1189:bluetooth_rxtx.c **** 	//      |  | +---------------> 2 preamble bytes of 01010101
1190:bluetooth_rxtx.c **** 	//      |  +-----------------> not packet mode
1191:bluetooth_rxtx.c **** 	//      +--------------------> un-buffered mode
1192:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   2427 - 1); // 1 MHz IF
 4919              		.loc 1 1192 0
 4920 0050 0220     		movs	r0, #2
 4921 0052 40F67A11 		movw	r1, #2426
 4922 0056 FFF7FEFF 		bl	cc2400_set
1193:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029);
ARM GAS  /tmp/cczWrdyg.s 			page 107


 4923              		.loc 1 1193 0
 4924 005a 0320     		movs	r0, #3
 4925 005c 2921     		movs	r1, #41
 4926 005e FFF7FEFF 		bl	cc2400_set
1194:bluetooth_rxtx.c **** 
1195:bluetooth_rxtx.c **** 	// Set up CS register
1196:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 4927              		.loc 1 1196 0
 4928 0062 FFF7FEFF 		bl	cs_threshold_calc_and_set
1197:bluetooth_rxtx.c **** 
1198:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 4929              		.loc 1 1198 0
 4930 0066 00BF     		nop
 4931              	.L222:
 4932              		.loc 1 1198 0 is_stmt 0 discriminator 1
 4933 0068 FFF7FEFF 		bl	cc2400_status
 4934 006c 0346     		mov	r3, r0
 4935 006e 03F04003 		and	r3, r3, #64
 4936 0072 002B     		cmp	r3, #0
 4937 0074 F8D0     		beq	.L222
1199:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 4938              		.loc 1 1199 0 is_stmt 1
 4939 0076 6120     		movs	r0, #97
 4940 0078 FFF7FEFF 		bl	cc2400_strobe
1200:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 4941              		.loc 1 1200 0
 4942 007c 00BF     		nop
 4943              	.L223:
 4944              		.loc 1 1200 0 is_stmt 0 discriminator 1
 4945 007e FFF7FEFF 		bl	cc2400_status
 4946 0082 0346     		mov	r3, r0
 4947 0084 03F00403 		and	r3, r3, #4
 4948 0088 002B     		cmp	r3, #0
 4949 008a F8D0     		beq	.L223
1201:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 4950              		.loc 1 1201 0 is_stmt 1
 4951 008c 6220     		movs	r0, #98
 4952 008e FFF7FEFF 		bl	cc2400_strobe
1202:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1203:bluetooth_rxtx.c **** 	PAEN_SET;
 4953              		.loc 1 1203 0
 4954 0092 064B     		ldr	r3, .L224+4
 4955 0094 8022     		movs	r2, #128
 4956 0096 1A60     		str	r2, [r3]
1204:bluetooth_rxtx.c **** 	HGM_SET;
 4957              		.loc 1 1204 0
 4958 0098 044B     		ldr	r3, .L224+4
 4959 009a 4FF48072 		mov	r2, #256
 4960 009e 1A60     		str	r2, [r3]
 4961              	.L217:
1205:bluetooth_rxtx.c **** #endif
1206:bluetooth_rxtx.c **** }
 4962              		.loc 1 1206 0
 4963 00a0 0837     		adds	r7, r7, #8
 4964              		.cfi_def_cfa_offset 8
 4965 00a2 BD46     		mov	sp, r7
 4966              		.cfi_def_cfa_register 13
ARM GAS  /tmp/cczWrdyg.s 			page 108


 4967              		@ sp needed
 4968 00a4 80BD     		pop	{r7, pc}
 4969              	.L225:
 4970 00a6 00BF     		.align	2
 4971              	.L224:
 4972 00a8 00000000 		.word	modulation
 4973 00ac 58C00920 		.word	537509976
 4974              		.cfi_endproc
 4975              	.LFE21:
 4977              		.section	.text.cc2400_rx_sync,"ax",%progbits
 4978              		.align	2
 4979              		.thumb
 4980              		.thumb_func
 4982              	cc2400_rx_sync:
 4983              	.LFB22:
1207:bluetooth_rxtx.c **** 
1208:bluetooth_rxtx.c **** /* start un-buffered rx */
1209:bluetooth_rxtx.c **** static void cc2400_rx_sync(u32 sync)
1210:bluetooth_rxtx.c **** {
 4984              		.loc 1 1210 0
 4985              		.cfi_startproc
 4986              		@ args = 0, pretend = 0, frame = 16
 4987              		@ frame_needed = 1, uses_anonymous_args = 0
 4988 0000 80B5     		push	{r7, lr}
 4989              		.cfi_def_cfa_offset 8
 4990              		.cfi_offset 7, -8
 4991              		.cfi_offset 14, -4
 4992 0002 84B0     		sub	sp, sp, #16
 4993              		.cfi_def_cfa_offset 24
 4994 0004 00AF     		add	r7, sp, #0
 4995              		.cfi_def_cfa_register 7
 4996 0006 7860     		str	r0, [r7, #4]
1211:bluetooth_rxtx.c **** 	u16 grmdm, mdmctrl;
1212:bluetooth_rxtx.c **** 
1213:bluetooth_rxtx.c **** 	if (modulation == MOD_BT_BASIC_RATE) {
 4997              		.loc 1 1213 0
 4998 0008 334B     		ldr	r3, .L233
 4999 000a 1B78     		ldrb	r3, [r3]
 5000 000c DBB2     		uxtb	r3, r3
 5001 000e 002B     		cmp	r3, #0
 5002 0010 05D1     		bne	.L227
1214:bluetooth_rxtx.c **** 		mdmctrl = 0x0029; // 160 kHz frequency deviation
 5003              		.loc 1 1214 0
 5004 0012 2923     		movs	r3, #41
 5005 0014 BB81     		strh	r3, [r7, #12]	@ movhi
1215:bluetooth_rxtx.c **** 		grmdm = 0x0461; // un-buffered mode, packet w/ sync word detection
 5006              		.loc 1 1215 0
 5007 0016 40F26143 		movw	r3, #1121
 5008 001a FB81     		strh	r3, [r7, #14]	@ movhi
 5009 001c 0BE0     		b	.L228
 5010              	.L227:
1216:bluetooth_rxtx.c **** 		// 0 00 00 1 000 11 0 00 0 1
1217:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1218:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1219:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 0 preamble bytes of 01010101
1220:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1221:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
ARM GAS  /tmp/cczWrdyg.s 			page 109


1222:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1223:bluetooth_rxtx.c **** 
1224:bluetooth_rxtx.c **** 	} else if (modulation == MOD_BT_LOW_ENERGY) {
 5011              		.loc 1 1224 0
 5012 001e 2E4B     		ldr	r3, .L233
 5013 0020 1B78     		ldrb	r3, [r3]
 5014 0022 DBB2     		uxtb	r3, r3
 5015 0024 012B     		cmp	r3, #1
 5016 0026 05D1     		bne	.L229
1225:bluetooth_rxtx.c **** 		mdmctrl = 0x0040; // 250 kHz frequency deviation
 5017              		.loc 1 1225 0
 5018 0028 4023     		movs	r3, #64
 5019 002a BB81     		strh	r3, [r7, #12]	@ movhi
1226:bluetooth_rxtx.c **** 		grmdm = 0x0561; // un-buffered mode, packet w/ sync word detection
 5020              		.loc 1 1226 0
 5021 002c 40F26153 		movw	r3, #1377
 5022 0030 FB81     		strh	r3, [r7, #14]	@ movhi
 5023 0032 00E0     		b	.L228
 5024              	.L229:
1227:bluetooth_rxtx.c **** 		// 0 00 00 1 010 11 0 00 0 1
1228:bluetooth_rxtx.c **** 		//   |  |  | |   |  +--------> CRC off
1229:bluetooth_rxtx.c **** 		//   |  |  | |   +-----------> sync word: 32 MSB bits of SYNC_WORD
1230:bluetooth_rxtx.c **** 		//   |  |  | +---------------> 2 preamble bytes of 01010101
1231:bluetooth_rxtx.c **** 		//   |  |  +-----------------> packet mode
1232:bluetooth_rxtx.c **** 		//   |  +--------------------> un-buffered mode
1233:bluetooth_rxtx.c **** 		//   +-----------------------> sync error bits: 0
1234:bluetooth_rxtx.c **** 
1235:bluetooth_rxtx.c **** 	} else {
1236:bluetooth_rxtx.c **** 		/* oops */
1237:bluetooth_rxtx.c **** 		return;
 5025              		.loc 1 1237 0
 5026 0034 4DE0     		b	.L226
 5027              	.L228:
1238:bluetooth_rxtx.c **** 	}
1239:bluetooth_rxtx.c **** 
1240:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5028              		.loc 1 1240 0
 5029 0036 0D20     		movs	r0, #13
 5030 0038 47F6FF71 		movw	r1, #32767
 5031 003c FFF7FEFF 		bl	cc2400_set
1241:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 5032              		.loc 1 1241 0
 5033 0040 1220     		movs	r0, #18
 5034 0042 42F62231 		movw	r1, #11042
 5035 0046 FFF7FEFF 		bl	cc2400_set
1242:bluetooth_rxtx.c **** 
1243:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x124b);
 5036              		.loc 1 1243 0
 5037 004a 1420     		movs	r0, #20
 5038 004c 41F24B21 		movw	r1, #4683
 5039 0050 FFF7FEFF 		bl	cc2400_set
1244:bluetooth_rxtx.c **** 	// 1      2      4b
1245:bluetooth_rxtx.c **** 	// 00 0 1 0 0 10 01001011
1246:bluetooth_rxtx.c **** 	//    | | | | |  +---------> AFC_DELTA = ??
1247:bluetooth_rxtx.c **** 	//    | | | | +------------> AFC settling = 4 pairs (8 bit preamble)
1248:bluetooth_rxtx.c **** 	//    | | | +--------------> no AFC adjust on packet
1249:bluetooth_rxtx.c **** 	//    | | +----------------> do not invert data
ARM GAS  /tmp/cczWrdyg.s 			page 110


1250:bluetooth_rxtx.c **** 	//    | +------------------> TX IF freq 1 0Hz
1251:bluetooth_rxtx.c **** 	//    +--------------------> PRNG off
1252:bluetooth_rxtx.c **** 	//
1253:bluetooth_rxtx.c **** 	// ref: CC2400 datasheet page 67
1254:bluetooth_rxtx.c **** 	// AFC settling explained page 41/42
1255:bluetooth_rxtx.c **** 
1256:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   grmdm);
 5040              		.loc 1 1256 0
 5041 0054 FB89     		ldrh	r3, [r7, #14]
 5042 0056 2020     		movs	r0, #32
 5043 0058 1946     		mov	r1, r3
 5044 005a FFF7FEFF 		bl	cc2400_set
1257:bluetooth_rxtx.c **** 
1258:bluetooth_rxtx.c **** 	cc2400_set(SYNCL,   sync & 0xffff);
 5045              		.loc 1 1258 0
 5046 005e 7B68     		ldr	r3, [r7, #4]
 5047 0060 9BB2     		uxth	r3, r3
 5048 0062 2C20     		movs	r0, #44
 5049 0064 1946     		mov	r1, r3
 5050 0066 FFF7FEFF 		bl	cc2400_set
1259:bluetooth_rxtx.c **** 	cc2400_set(SYNCH,   (sync >> 16) & 0xffff);
 5051              		.loc 1 1259 0
 5052 006a 7B68     		ldr	r3, [r7, #4]
 5053 006c 1B0C     		lsrs	r3, r3, #16
 5054 006e 9BB2     		uxth	r3, r3
 5055 0070 2D20     		movs	r0, #45
 5056 0072 1946     		mov	r1, r3
 5057 0074 FFF7FEFF 		bl	cc2400_set
1260:bluetooth_rxtx.c **** 	
1261:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel - 1); // 1 MHz IF
 5058              		.loc 1 1261 0
 5059 0078 184B     		ldr	r3, .L233+4
 5060 007a 1B88     		ldrh	r3, [r3]	@ movhi
 5061 007c 9BB2     		uxth	r3, r3
 5062 007e 013B     		subs	r3, r3, #1
 5063 0080 9BB2     		uxth	r3, r3
 5064 0082 0220     		movs	r0, #2
 5065 0084 1946     		mov	r1, r3
 5066 0086 FFF7FEFF 		bl	cc2400_set
1262:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, mdmctrl);
 5067              		.loc 1 1262 0
 5068 008a BB89     		ldrh	r3, [r7, #12]
 5069 008c 0320     		movs	r0, #3
 5070 008e 1946     		mov	r1, r3
 5071 0090 FFF7FEFF 		bl	cc2400_set
1263:bluetooth_rxtx.c **** 
1264:bluetooth_rxtx.c **** 	// Set up CS register
1265:bluetooth_rxtx.c **** 	cs_threshold_calc_and_set();
 5072              		.loc 1 1265 0
 5073 0094 FFF7FEFF 		bl	cs_threshold_calc_and_set
1266:bluetooth_rxtx.c **** 
1267:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5074              		.loc 1 1267 0
 5075 0098 00BF     		nop
 5076              	.L231:
 5077              		.loc 1 1267 0 is_stmt 0 discriminator 1
 5078 009a FFF7FEFF 		bl	cc2400_status
ARM GAS  /tmp/cczWrdyg.s 			page 111


 5079 009e 0346     		mov	r3, r0
 5080 00a0 03F04003 		and	r3, r3, #64
 5081 00a4 002B     		cmp	r3, #0
 5082 00a6 F8D0     		beq	.L231
1268:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5083              		.loc 1 1268 0 is_stmt 1
 5084 00a8 6120     		movs	r0, #97
 5085 00aa FFF7FEFF 		bl	cc2400_strobe
1269:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5086              		.loc 1 1269 0
 5087 00ae 00BF     		nop
 5088              	.L232:
 5089              		.loc 1 1269 0 is_stmt 0 discriminator 1
 5090 00b0 FFF7FEFF 		bl	cc2400_status
 5091 00b4 0346     		mov	r3, r0
 5092 00b6 03F00403 		and	r3, r3, #4
 5093 00ba 002B     		cmp	r3, #0
 5094 00bc F8D0     		beq	.L232
1270:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5095              		.loc 1 1270 0 is_stmt 1
 5096 00be 6220     		movs	r0, #98
 5097 00c0 FFF7FEFF 		bl	cc2400_strobe
1271:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1272:bluetooth_rxtx.c **** 	PAEN_SET;
 5098              		.loc 1 1272 0
 5099 00c4 064B     		ldr	r3, .L233+8
 5100 00c6 8022     		movs	r2, #128
 5101 00c8 1A60     		str	r2, [r3]
1273:bluetooth_rxtx.c **** 	HGM_SET;
 5102              		.loc 1 1273 0
 5103 00ca 054B     		ldr	r3, .L233+8
 5104 00cc 4FF48072 		mov	r2, #256
 5105 00d0 1A60     		str	r2, [r3]
 5106              	.L226:
1274:bluetooth_rxtx.c **** #endif
1275:bluetooth_rxtx.c **** }
 5107              		.loc 1 1275 0
 5108 00d2 1037     		adds	r7, r7, #16
 5109              		.cfi_def_cfa_offset 8
 5110 00d4 BD46     		mov	sp, r7
 5111              		.cfi_def_cfa_register 13
 5112              		@ sp needed
 5113 00d6 80BD     		pop	{r7, pc}
 5114              	.L234:
 5115              		.align	2
 5116              	.L233:
 5117 00d8 00000000 		.word	modulation
 5118 00dc 00000000 		.word	channel
 5119 00e0 58C00920 		.word	537509976
 5120              		.cfi_endproc
 5121              	.LFE22:
 5123              		.section	.text.le_transmit,"ax",%progbits
 5124              		.align	2
 5125              		.global	le_transmit
 5126              		.thumb
 5127              		.thumb_func
 5129              	le_transmit:
ARM GAS  /tmp/cczWrdyg.s 			page 112


 5130              	.LFB23:
1276:bluetooth_rxtx.c **** 
1277:bluetooth_rxtx.c **** /*
1278:bluetooth_rxtx.c ****  * Transmit a BTLE packet with the specified access address.
1279:bluetooth_rxtx.c ****  *
1280:bluetooth_rxtx.c ****  * All modulation parameters are set within this function. The data
1281:bluetooth_rxtx.c ****  * should not be pre-whitened, but the CRC should be calculated and
1282:bluetooth_rxtx.c ****  * included in the data length.
1283:bluetooth_rxtx.c ****  */
1284:bluetooth_rxtx.c **** void le_transmit(u32 aa, u8 len, u8 *data)
1285:bluetooth_rxtx.c **** {
 5131              		.loc 1 1285 0
 5132              		.cfi_startproc
 5133              		@ args = 0, pretend = 0, frame = 104
 5134              		@ frame_needed = 1, uses_anonymous_args = 0
 5135 0000 80B5     		push	{r7, lr}
 5136              		.cfi_def_cfa_offset 8
 5137              		.cfi_offset 7, -8
 5138              		.cfi_offset 14, -4
 5139 0002 9AB0     		sub	sp, sp, #104
 5140              		.cfi_def_cfa_offset 112
 5141 0004 00AF     		add	r7, sp, #0
 5142              		.cfi_def_cfa_register 7
 5143 0006 F860     		str	r0, [r7, #12]
 5144 0008 0B46     		mov	r3, r1
 5145 000a 7A60     		str	r2, [r7, #4]
 5146 000c FB72     		strb	r3, [r7, #11]
1286:bluetooth_rxtx.c **** 	unsigned i, j;
1287:bluetooth_rxtx.c **** 	int bit;
1288:bluetooth_rxtx.c **** 	u8 txbuf[64];
1289:bluetooth_rxtx.c **** 	u8 tx_len;
1290:bluetooth_rxtx.c **** 	u8 byte;
1291:bluetooth_rxtx.c **** 	u16 gio_save;
1292:bluetooth_rxtx.c **** 
1293:bluetooth_rxtx.c **** 	// first four bytes: AA
1294:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 5147              		.loc 1 1294 0
 5148 000e 0023     		movs	r3, #0
 5149 0010 7B66     		str	r3, [r7, #100]
 5150 0012 35E0     		b	.L236
 5151              	.L239:
1295:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5152              		.loc 1 1295 0
 5153 0014 FB68     		ldr	r3, [r7, #12]
 5154 0016 87F85E30 		strb	r3, [r7, #94]
1296:bluetooth_rxtx.c **** 		aa >>= 8;
 5155              		.loc 1 1296 0
 5156 001a FB68     		ldr	r3, [r7, #12]
 5157 001c 1B0A     		lsrs	r3, r3, #8
 5158 001e FB60     		str	r3, [r7, #12]
1297:bluetooth_rxtx.c **** 		txbuf[i] = 0;
 5159              		.loc 1 1297 0
 5160 0020 07F11002 		add	r2, r7, #16
 5161 0024 7B6E     		ldr	r3, [r7, #100]
 5162 0026 1344     		add	r3, r3, r2
 5163 0028 0022     		movs	r2, #0
 5164 002a 1A70     		strb	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 113


1298:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5165              		.loc 1 1298 0
 5166 002c 0023     		movs	r3, #0
 5167 002e 3B66     		str	r3, [r7, #96]
 5168 0030 20E0     		b	.L237
 5169              	.L238:
1299:bluetooth_rxtx.c **** 			txbuf[i] |= (byte & 1) << (7 - j);
 5170              		.loc 1 1299 0 discriminator 3
 5171 0032 07F11002 		add	r2, r7, #16
 5172 0036 7B6E     		ldr	r3, [r7, #100]
 5173 0038 1344     		add	r3, r3, r2
 5174 003a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5175 003c D9B2     		uxtb	r1, r3
 5176 003e 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5177 0042 03F00103 		and	r3, r3, #1
 5178 0046 3A6E     		ldr	r2, [r7, #96]
 5179 0048 C2F10702 		rsb	r2, r2, #7
 5180 004c 9340     		lsls	r3, r3, r2
 5181 004e DBB2     		uxtb	r3, r3
 5182 0050 0A46     		mov	r2, r1
 5183 0052 1343     		orrs	r3, r3, r2
 5184 0054 DBB2     		uxtb	r3, r3
 5185 0056 D9B2     		uxtb	r1, r3
 5186 0058 07F11002 		add	r2, r7, #16
 5187 005c 7B6E     		ldr	r3, [r7, #100]
 5188 005e 1344     		add	r3, r3, r2
 5189 0060 0A46     		mov	r2, r1
 5190 0062 1A70     		strb	r2, [r3]
1300:bluetooth_rxtx.c **** 			byte >>= 1;
 5191              		.loc 1 1300 0 discriminator 3
 5192 0064 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5193 0068 5B08     		lsrs	r3, r3, #1
 5194 006a 87F85E30 		strb	r3, [r7, #94]
1298:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5195              		.loc 1 1298 0 discriminator 3
 5196 006e 3B6E     		ldr	r3, [r7, #96]
 5197 0070 0133     		adds	r3, r3, #1
 5198 0072 3B66     		str	r3, [r7, #96]
 5199              	.L237:
1298:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5200              		.loc 1 1298 0 is_stmt 0 discriminator 1
 5201 0074 3B6E     		ldr	r3, [r7, #96]
 5202 0076 072B     		cmp	r3, #7
 5203 0078 DBD9     		bls	.L238
1294:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5204              		.loc 1 1294 0 is_stmt 1 discriminator 2
 5205 007a 7B6E     		ldr	r3, [r7, #100]
 5206 007c 0133     		adds	r3, r3, #1
 5207 007e 7B66     		str	r3, [r7, #100]
 5208              	.L236:
1294:bluetooth_rxtx.c **** 		byte = aa & 0xff;
 5209              		.loc 1 1294 0 is_stmt 0 discriminator 1
 5210 0080 7B6E     		ldr	r3, [r7, #100]
 5211 0082 032B     		cmp	r3, #3
 5212 0084 C6D9     		bls	.L239
1301:bluetooth_rxtx.c **** 		}
1302:bluetooth_rxtx.c **** 	}
ARM GAS  /tmp/cczWrdyg.s 			page 114


1303:bluetooth_rxtx.c **** 
1304:bluetooth_rxtx.c **** 	// whiten the data and copy it into the txbuf
1305:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 5213              		.loc 1 1305 0 is_stmt 1
 5214 0086 934B     		ldr	r3, .L255
 5215 0088 1B88     		ldrh	r3, [r3]	@ movhi
 5216 008a 9BB2     		uxth	r3, r3
 5217 008c DBB2     		uxtb	r3, r3
 5218 008e 623B     		subs	r3, r3, #98
 5219 0090 DBB2     		uxtb	r3, r3
 5220 0092 1846     		mov	r0, r3
 5221 0094 FFF7FEFF 		bl	btle_channel_index
 5222 0098 0346     		mov	r3, r0
 5223 009a 1A46     		mov	r2, r3
 5224 009c 8E4B     		ldr	r3, .L255+4
 5225 009e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 5226 00a0 BB65     		str	r3, [r7, #88]
1306:bluetooth_rxtx.c **** 	for (i = 0; i < len; ++i) {
 5227              		.loc 1 1306 0
 5228 00a2 0023     		movs	r3, #0
 5229 00a4 7B66     		str	r3, [r7, #100]
 5230 00a6 50E0     		b	.L240
 5231              	.L243:
1307:bluetooth_rxtx.c **** 		byte = data[i];
 5232              		.loc 1 1307 0
 5233 00a8 7A68     		ldr	r2, [r7, #4]
 5234 00aa 7B6E     		ldr	r3, [r7, #100]
 5235 00ac 1344     		add	r3, r3, r2
 5236 00ae 1B78     		ldrb	r3, [r3]
 5237 00b0 87F85E30 		strb	r3, [r7, #94]
1308:bluetooth_rxtx.c **** 		txbuf[i+4] = 0;
 5238              		.loc 1 1308 0
 5239 00b4 7B6E     		ldr	r3, [r7, #100]
 5240 00b6 0433     		adds	r3, r3, #4
 5241 00b8 07F16802 		add	r2, r7, #104
 5242 00bc 1344     		add	r3, r3, r2
 5243 00be 0022     		movs	r2, #0
 5244 00c0 03F8582C 		strb	r2, [r3, #-88]
1309:bluetooth_rxtx.c **** 		for (j = 0; j < 8; ++j) {
 5245              		.loc 1 1309 0
 5246 00c4 0023     		movs	r3, #0
 5247 00c6 3B66     		str	r3, [r7, #96]
 5248 00c8 39E0     		b	.L241
 5249              	.L242:
1310:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5250              		.loc 1 1310 0 discriminator 3
 5251 00ca 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5252 00ce 03F00103 		and	r3, r3, #1
 5253 00d2 8249     		ldr	r1, .L255+8
 5254 00d4 BA6D     		ldr	r2, [r7, #88]
 5255 00d6 0A44     		add	r2, r2, r1
 5256 00d8 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 5257 00da 5340     		eors	r3, r3, r2
 5258 00dc 7B65     		str	r3, [r7, #84]
1311:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 5259              		.loc 1 1311 0 discriminator 3
 5260 00de BB6D     		ldr	r3, [r7, #88]
ARM GAS  /tmp/cczWrdyg.s 			page 115


 5261 00e0 0133     		adds	r3, r3, #1
 5262 00e2 1946     		mov	r1, r3
 5263 00e4 7E4B     		ldr	r3, .L255+12
 5264 00e6 A1FB0323 		umull	r2, r3, r1, r3
 5265 00ea C81A     		subs	r0, r1, r3
 5266 00ec 4008     		lsrs	r0, r0, #1
 5267 00ee 0344     		add	r3, r3, r0
 5268 00f0 9A09     		lsrs	r2, r3, #6
 5269 00f2 1346     		mov	r3, r2
 5270 00f4 DB01     		lsls	r3, r3, #7
 5271 00f6 9B1A     		subs	r3, r3, r2
 5272 00f8 CA1A     		subs	r2, r1, r3
 5273 00fa BA65     		str	r2, [r7, #88]
1312:bluetooth_rxtx.c **** 			byte >>= 1;
 5274              		.loc 1 1312 0 discriminator 3
 5275 00fc 97F85E30 		ldrb	r3, [r7, #94]	@ zero_extendqisi2
 5276 0100 5B08     		lsrs	r3, r3, #1
 5277 0102 87F85E30 		strb	r3, [r7, #94]
1313:bluetooth_rxtx.c **** 			txbuf[i+4] |= bit << (7 - j);
 5278              		.loc 1 1313 0 discriminator 3
 5279 0106 7B6E     		ldr	r3, [r7, #100]
 5280 0108 0433     		adds	r3, r3, #4
 5281 010a 7A6E     		ldr	r2, [r7, #100]
 5282 010c 0432     		adds	r2, r2, #4
 5283 010e 07F16801 		add	r1, r7, #104
 5284 0112 0A44     		add	r2, r2, r1
 5285 0114 12F8582C 		ldrb	r2, [r2, #-88]	@ zero_extendqisi2
 5286 0118 D1B2     		uxtb	r1, r2
 5287 011a 3A6E     		ldr	r2, [r7, #96]
 5288 011c C2F10702 		rsb	r2, r2, #7
 5289 0120 1046     		mov	r0, r2
 5290 0122 7A6D     		ldr	r2, [r7, #84]
 5291 0124 8240     		lsls	r2, r2, r0
 5292 0126 D2B2     		uxtb	r2, r2
 5293 0128 0A43     		orrs	r2, r2, r1
 5294 012a D2B2     		uxtb	r2, r2
 5295 012c D2B2     		uxtb	r2, r2
 5296 012e 07F16801 		add	r1, r7, #104
 5297 0132 0B44     		add	r3, r3, r1
 5298 0134 03F8582C 		strb	r2, [r3, #-88]
1309:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5299              		.loc 1 1309 0 discriminator 3
 5300 0138 3B6E     		ldr	r3, [r7, #96]
 5301 013a 0133     		adds	r3, r3, #1
 5302 013c 3B66     		str	r3, [r7, #96]
 5303              	.L241:
1309:bluetooth_rxtx.c **** 			bit = (byte & 1) ^ whitening[idx];
 5304              		.loc 1 1309 0 is_stmt 0 discriminator 1
 5305 013e 3B6E     		ldr	r3, [r7, #96]
 5306 0140 072B     		cmp	r3, #7
 5307 0142 C2D9     		bls	.L242
1306:bluetooth_rxtx.c **** 		byte = data[i];
 5308              		.loc 1 1306 0 is_stmt 1 discriminator 2
 5309 0144 7B6E     		ldr	r3, [r7, #100]
 5310 0146 0133     		adds	r3, r3, #1
 5311 0148 7B66     		str	r3, [r7, #100]
 5312              	.L240:
ARM GAS  /tmp/cczWrdyg.s 			page 116


1306:bluetooth_rxtx.c **** 		byte = data[i];
 5313              		.loc 1 1306 0 is_stmt 0 discriminator 1
 5314 014a FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5315 014c 7B6E     		ldr	r3, [r7, #100]
 5316 014e 9A42     		cmp	r2, r3
 5317 0150 AAD8     		bhi	.L243
1314:bluetooth_rxtx.c **** 		}
1315:bluetooth_rxtx.c **** 	}
1316:bluetooth_rxtx.c **** 
1317:bluetooth_rxtx.c **** 	len += 4; // include the AA in len
 5318              		.loc 1 1317 0 is_stmt 1
 5319 0152 FB7A     		ldrb	r3, [r7, #11]
 5320 0154 0433     		adds	r3, r3, #4
 5321 0156 FB72     		strb	r3, [r7, #11]
1318:bluetooth_rxtx.c **** 
1319:bluetooth_rxtx.c **** 	// Bluetooth-like modulation
1320:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5322              		.loc 1 1320 0
 5323 0158 0D20     		movs	r0, #13
 5324 015a 47F6FF71 		movw	r1, #32767
 5325 015e FFF7FEFF 		bl	cc2400_set
1321:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5326              		.loc 1 1321 0
 5327 0162 1220     		movs	r0, #18
 5328 0164 42F62231 		movw	r1, #11042
 5329 0168 FFF7FEFF 		bl	cc2400_set
1322:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b);    // no PRNG
 5330              		.loc 1 1322 0
 5331 016c 1420     		movs	r0, #20
 5332 016e 41F24B31 		movw	r1, #4939
 5333 0172 FFF7FEFF 		bl	cc2400_set
1323:bluetooth_rxtx.c **** 
1324:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5334              		.loc 1 1324 0
 5335 0176 2020     		movs	r0, #32
 5336 0178 40F60141 		movw	r1, #3073
 5337 017c FFF7FEFF 		bl	cc2400_set
1325:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1326:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1327:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1328:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1329:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1330:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1331:bluetooth_rxtx.c **** 
1332:bluetooth_rxtx.c **** 	cc2400_set(FSDIV,   channel);
 5338              		.loc 1 1332 0
 5339 0180 544B     		ldr	r3, .L255
 5340 0182 1B88     		ldrh	r3, [r3]	@ movhi
 5341 0184 9BB2     		uxth	r3, r3
 5342 0186 0220     		movs	r0, #2
 5343 0188 1946     		mov	r1, r3
 5344 018a FFF7FEFF 		bl	cc2400_set
1333:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5345              		.loc 1 1333 0
 5346 018e 0520     		movs	r0, #5
 5347 0190 0B21     		movs	r1, #11
 5348 0192 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/cczWrdyg.s 			page 117


1334:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5349              		.loc 1 1334 0
 5350 0196 0320     		movs	r0, #3
 5351 0198 4021     		movs	r1, #64
 5352 019a FFF7FEFF 		bl	cc2400_set
1335:bluetooth_rxtx.c **** 	cc2400_set(INT,     0x0014);	// FIFO_THRESHOLD: 20 bytes
 5353              		.loc 1 1335 0
 5354 019e 2320     		movs	r0, #35
 5355 01a0 1421     		movs	r1, #20
 5356 01a2 FFF7FEFF 		bl	cc2400_set
1336:bluetooth_rxtx.c **** 
1337:bluetooth_rxtx.c **** 	// sync byte depends on the first transmitted bit of the AA
1338:bluetooth_rxtx.c **** 	if (aa & 1)
 5357              		.loc 1 1338 0
 5358 01a6 FB68     		ldr	r3, [r7, #12]
 5359 01a8 03F00103 		and	r3, r3, #1
 5360 01ac 002B     		cmp	r3, #0
 5361 01ae 05D0     		beq	.L244
1339:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0xaaaa);
 5362              		.loc 1 1339 0
 5363 01b0 2D20     		movs	r0, #45
 5364 01b2 4AF6AA21 		movw	r1, #43690
 5365 01b6 FFF7FEFF 		bl	cc2400_set
 5366 01ba 04E0     		b	.L245
 5367              	.L244:
1340:bluetooth_rxtx.c **** 	else
1341:bluetooth_rxtx.c **** 		cc2400_set(SYNCH,   0x5555);
 5368              		.loc 1 1341 0
 5369 01bc 2D20     		movs	r0, #45
 5370 01be 45F25551 		movw	r1, #21845
 5371 01c2 FFF7FEFF 		bl	cc2400_set
 5372              	.L245:
1342:bluetooth_rxtx.c **** 
1343:bluetooth_rxtx.c **** 	// set GIO to FIFO_FULL
1344:bluetooth_rxtx.c **** 	gio_save = cc2400_get(IOCFG);
 5373              		.loc 1 1344 0
 5374 01c6 0820     		movs	r0, #8
 5375 01c8 FFF7FEFF 		bl	cc2400_get
 5376 01cc 0346     		mov	r3, r0
 5377 01ce A7F85230 		strh	r3, [r7, #82]	@ movhi
1345:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 5378              		.loc 1 1345 0
 5379 01d2 B7F85230 		ldrh	r3, [r7, #82]
 5380 01d6 C3F30803 		ubfx	r3, r3, #0, #9
 5381 01da 9BB2     		uxth	r3, r3
 5382 01dc 43F49C43 		orr	r3, r3, #19968
 5383 01e0 9BB2     		uxth	r3, r3
 5384 01e2 9BB2     		uxth	r3, r3
 5385 01e4 0820     		movs	r0, #8
 5386 01e6 1946     		mov	r1, r3
 5387 01e8 FFF7FEFF 		bl	cc2400_set
1346:bluetooth_rxtx.c **** 
1347:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5388              		.loc 1 1347 0
 5389 01ec 00BF     		nop
 5390              	.L246:
 5391              		.loc 1 1347 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cczWrdyg.s 			page 118


 5392 01ee FFF7FEFF 		bl	cc2400_status
 5393 01f2 0346     		mov	r3, r0
 5394 01f4 03F04003 		and	r3, r3, #64
 5395 01f8 002B     		cmp	r3, #0
 5396 01fa F8D0     		beq	.L246
1348:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5397              		.loc 1 1348 0 is_stmt 1
 5398 01fc 6120     		movs	r0, #97
 5399 01fe FFF7FEFF 		bl	cc2400_strobe
1349:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5400              		.loc 1 1349 0
 5401 0202 00BF     		nop
 5402              	.L247:
 5403              		.loc 1 1349 0 is_stmt 0 discriminator 1
 5404 0204 FFF7FEFF 		bl	cc2400_status
 5405 0208 0346     		mov	r3, r0
 5406 020a 03F00403 		and	r3, r3, #4
 5407 020e 002B     		cmp	r3, #0
 5408 0210 F8D0     		beq	.L247
1350:bluetooth_rxtx.c **** 	TXLED_SET;
 5409              		.loc 1 1350 0 is_stmt 1
 5410 0212 344B     		ldr	r3, .L255+16
 5411 0214 4FF48072 		mov	r2, #256
 5412 0218 1A60     		str	r2, [r3]
1351:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1352:bluetooth_rxtx.c **** 	PAEN_SET;
 5413              		.loc 1 1352 0
 5414 021a 334B     		ldr	r3, .L255+20
 5415 021c 8022     		movs	r2, #128
 5416 021e 1A60     		str	r2, [r3]
1353:bluetooth_rxtx.c **** #endif
1354:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5417              		.loc 1 1354 0
 5418 0220 00BF     		nop
 5419              	.L248:
 5420              		.loc 1 1354 0 is_stmt 0 discriminator 1
 5421 0222 0E20     		movs	r0, #14
 5422 0224 FFF7FEFF 		bl	cc2400_get
 5423 0228 0346     		mov	r3, r0
 5424 022a 03F01F03 		and	r3, r3, #31
 5425 022e 0F2B     		cmp	r3, #15
 5426 0230 F7D1     		bne	.L248
1355:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5427              		.loc 1 1355 0 is_stmt 1
 5428 0232 6320     		movs	r0, #99
 5429 0234 FFF7FEFF 		bl	cc2400_strobe
1356:bluetooth_rxtx.c **** 
1357:bluetooth_rxtx.c **** 	// put the packet into the FIFO
1358:bluetooth_rxtx.c **** 	for (i = 0; i < len; i += 16) {
 5430              		.loc 1 1358 0
 5431 0238 0023     		movs	r3, #0
 5432 023a 7B66     		str	r3, [r7, #100]
 5433 023c 21E0     		b	.L249
 5434              	.L252:
1359:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5435              		.loc 1 1359 0
 5436 023e 00BF     		nop
ARM GAS  /tmp/cczWrdyg.s 			page 119


 5437              	.L250:
 5438              		.loc 1 1359 0 is_stmt 0 discriminator 1
 5439 0240 2A4B     		ldr	r3, .L255+24
 5440 0242 1B68     		ldr	r3, [r3]
 5441 0244 03F00403 		and	r3, r3, #4
 5442 0248 002B     		cmp	r3, #0
 5443 024a F9D1     		bne	.L250
1360:bluetooth_rxtx.c **** 		tx_len = len - i;
 5444              		.loc 1 1360 0 is_stmt 1
 5445 024c 7B6E     		ldr	r3, [r7, #100]
 5446 024e DBB2     		uxtb	r3, r3
 5447 0250 FA7A     		ldrb	r2, [r7, #11]
 5448 0252 D31A     		subs	r3, r2, r3
 5449 0254 87F85F30 		strb	r3, [r7, #95]
1361:bluetooth_rxtx.c **** 		if (tx_len > 16)
 5450              		.loc 1 1361 0
 5451 0258 97F85F30 		ldrb	r3, [r7, #95]	@ zero_extendqisi2
 5452 025c 102B     		cmp	r3, #16
 5453 025e 02D9     		bls	.L251
1362:bluetooth_rxtx.c **** 			tx_len = 16;
 5454              		.loc 1 1362 0
 5455 0260 1023     		movs	r3, #16
 5456 0262 87F85F30 		strb	r3, [r7, #95]
 5457              	.L251:
1363:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, tx_len, txbuf + i);
 5458              		.loc 1 1363 0 discriminator 2
 5459 0266 07F11002 		add	r2, r7, #16
 5460 026a 7B6E     		ldr	r3, [r7, #100]
 5461 026c 1344     		add	r3, r3, r2
 5462 026e 97F85F20 		ldrb	r2, [r7, #95]	@ zero_extendqisi2
 5463 0272 7020     		movs	r0, #112
 5464 0274 1146     		mov	r1, r2
 5465 0276 1A46     		mov	r2, r3
 5466 0278 FFF7FEFF 		bl	cc2400_spi_buf
1358:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5467              		.loc 1 1358 0 discriminator 2
 5468 027c 7B6E     		ldr	r3, [r7, #100]
 5469 027e 1033     		adds	r3, r3, #16
 5470 0280 7B66     		str	r3, [r7, #100]
 5471              	.L249:
1358:bluetooth_rxtx.c **** 		while (GIO6) ; // wait for the FIFO to drain (FIFO_FULL false)
 5472              		.loc 1 1358 0 is_stmt 0 discriminator 1
 5473 0282 FA7A     		ldrb	r2, [r7, #11]	@ zero_extendqisi2
 5474 0284 7B6E     		ldr	r3, [r7, #100]
 5475 0286 9A42     		cmp	r2, r3
 5476 0288 D9D8     		bhi	.L252
1364:bluetooth_rxtx.c **** 	}
1365:bluetooth_rxtx.c **** 
1366:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5477              		.loc 1 1366 0 is_stmt 1
 5478 028a 00BF     		nop
 5479              	.L253:
 5480              		.loc 1 1366 0 is_stmt 0 discriminator 1
 5481 028c 0E20     		movs	r0, #14
 5482 028e FFF7FEFF 		bl	cc2400_get
 5483 0292 0346     		mov	r3, r0
 5484 0294 03F01F03 		and	r3, r3, #31
ARM GAS  /tmp/cczWrdyg.s 			page 120


 5485 0298 0F2B     		cmp	r3, #15
 5486 029a F7D1     		bne	.L253
1367:bluetooth_rxtx.c **** 	TXLED_CLR;
 5487              		.loc 1 1367 0 is_stmt 1
 5488 029c 144B     		ldr	r3, .L255+28
 5489 029e 4FF48072 		mov	r2, #256
 5490 02a2 1A60     		str	r2, [r3]
1368:bluetooth_rxtx.c **** 
1369:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5491              		.loc 1 1369 0
 5492 02a4 6420     		movs	r0, #100
 5493 02a6 FFF7FEFF 		bl	cc2400_strobe
1370:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 5494              		.loc 1 1370 0
 5495 02aa 00BF     		nop
 5496              	.L254:
 5497              		.loc 1 1370 0 is_stmt 0 discriminator 1
 5498 02ac FFF7FEFF 		bl	cc2400_status
 5499 02b0 0346     		mov	r3, r0
 5500 02b2 03F00403 		and	r3, r3, #4
 5501 02b6 002B     		cmp	r3, #0
 5502 02b8 F8D1     		bne	.L254
1371:bluetooth_rxtx.c **** 
1372:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1373:bluetooth_rxtx.c **** 	PAEN_CLR;
 5503              		.loc 1 1373 0 is_stmt 1
 5504 02ba 0E4B     		ldr	r3, .L255+32
 5505 02bc 8022     		movs	r2, #128
 5506 02be 1A60     		str	r2, [r3]
1374:bluetooth_rxtx.c **** #endif
1375:bluetooth_rxtx.c **** 
1376:bluetooth_rxtx.c **** 	// reset GIO
1377:bluetooth_rxtx.c **** 	cc2400_set(IOCFG, gio_save);
 5507              		.loc 1 1377 0
 5508 02c0 B7F85230 		ldrh	r3, [r7, #82]
 5509 02c4 0820     		movs	r0, #8
 5510 02c6 1946     		mov	r1, r3
 5511 02c8 FFF7FEFF 		bl	cc2400_set
1378:bluetooth_rxtx.c **** }
 5512              		.loc 1 1378 0
 5513 02cc 6837     		adds	r7, r7, #104
 5514              		.cfi_def_cfa_offset 8
 5515 02ce BD46     		mov	sp, r7
 5516              		.cfi_def_cfa_register 13
 5517              		@ sp needed
 5518 02d0 80BD     		pop	{r7, pc}
 5519              	.L256:
 5520 02d2 00BF     		.align	2
 5521              	.L255:
 5522 02d4 00000000 		.word	channel
 5523 02d8 AC000000 		.word	whitening_index
 5524 02dc 2C000000 		.word	whitening
 5525 02e0 11080402 		.word	33818641
 5526 02e4 38C00920 		.word	537509944
 5527 02e8 58C00920 		.word	537509976
 5528 02ec 54C00920 		.word	537509972
 5529 02f0 3CC00920 		.word	537509948
ARM GAS  /tmp/cczWrdyg.s 			page 121


 5530 02f4 5CC00920 		.word	537509980
 5531              		.cfi_endproc
 5532              	.LFE23:
 5534              		.section	.text.le_jam,"ax",%progbits
 5535              		.align	2
 5536              		.global	le_jam
 5537              		.thumb
 5538              		.thumb_func
 5540              	le_jam:
 5541              	.LFB24:
1379:bluetooth_rxtx.c **** 
1380:bluetooth_rxtx.c **** void le_jam(void) {
 5542              		.loc 1 1380 0
 5543              		.cfi_startproc
 5544              		@ args = 0, pretend = 0, frame = 0
 5545              		@ frame_needed = 1, uses_anonymous_args = 0
 5546 0000 80B5     		push	{r7, lr}
 5547              		.cfi_def_cfa_offset 8
 5548              		.cfi_offset 7, -8
 5549              		.cfi_offset 14, -4
 5550 0002 00AF     		add	r7, sp, #0
 5551              		.cfi_def_cfa_register 7
1381:bluetooth_rxtx.c **** #ifdef TX_ENABLE
1382:bluetooth_rxtx.c **** 	cc2400_set(MANAND,  0x7fff);
 5552              		.loc 1 1382 0
 5553 0004 0D20     		movs	r0, #13
 5554 0006 47F6FF71 		movw	r1, #32767
 5555 000a FFF7FEFF 		bl	cc2400_set
1383:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);    // LNA and receive mixers test register
 5556              		.loc 1 1383 0
 5557 000e 1220     		movs	r0, #18
 5558 0010 42F62231 		movw	r1, #11042
 5559 0014 FFF7FEFF 		bl	cc2400_set
1384:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x234b);    // PRNG, 1 MHz offset
 5560              		.loc 1 1384 0
 5561 0018 1420     		movs	r0, #20
 5562 001a 42F24B31 		movw	r1, #9035
 5563 001e FFF7FEFF 		bl	cc2400_set
1385:bluetooth_rxtx.c **** 
1386:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0c01);
 5564              		.loc 1 1386 0
 5565 0022 2020     		movs	r0, #32
 5566 0024 40F60141 		movw	r1, #3073
 5567 0028 FFF7FEFF 		bl	cc2400_set
1387:bluetooth_rxtx.c **** 	// 0 00 01 1 000 00 0 00 0 1
1388:bluetooth_rxtx.c **** 	//      |  | |   |  +--------> CRC off
1389:bluetooth_rxtx.c **** 	//      |  | |   +-----------> sync word: 8 MSB bits of SYNC_WORD
1390:bluetooth_rxtx.c **** 	//      |  | +---------------> 0 preamble bytes of 01010101
1391:bluetooth_rxtx.c **** 	//      |  +-----------------> packet mode
1392:bluetooth_rxtx.c **** 	//      +--------------------> buffered mode
1393:bluetooth_rxtx.c **** 
1394:bluetooth_rxtx.c **** 	// cc2400_set(FSDIV,   channel);
1395:bluetooth_rxtx.c **** 	cc2400_set(FREND,   0b1011);    // amplifier level (-7 dBm, picked from hat)
 5568              		.loc 1 1395 0
 5569 002c 0520     		movs	r0, #5
 5570 002e 0B21     		movs	r1, #11
 5571 0030 FFF7FEFF 		bl	cc2400_set
ARM GAS  /tmp/cczWrdyg.s 			page 122


1396:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040);    // 250 kHz frequency deviation
 5572              		.loc 1 1396 0
 5573 0034 0320     		movs	r0, #3
 5574 0036 4021     		movs	r1, #64
 5575 0038 FFF7FEFF 		bl	cc2400_set
1397:bluetooth_rxtx.c **** 
1398:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 5576              		.loc 1 1398 0
 5577 003c 00BF     		nop
 5578              	.L258:
 5579              		.loc 1 1398 0 is_stmt 0 discriminator 1
 5580 003e FFF7FEFF 		bl	cc2400_status
 5581 0042 0346     		mov	r3, r0
 5582 0044 03F04003 		and	r3, r3, #64
 5583 0048 002B     		cmp	r3, #0
 5584 004a F8D0     		beq	.L258
1399:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5585              		.loc 1 1399 0 is_stmt 1
 5586 004c 6120     		movs	r0, #97
 5587 004e FFF7FEFF 		bl	cc2400_strobe
1400:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5588              		.loc 1 1400 0
 5589 0052 00BF     		nop
 5590              	.L259:
 5591              		.loc 1 1400 0 is_stmt 0 discriminator 1
 5592 0054 FFF7FEFF 		bl	cc2400_status
 5593 0058 0346     		mov	r3, r0
 5594 005a 03F00403 		and	r3, r3, #4
 5595 005e 002B     		cmp	r3, #0
 5596 0060 F8D0     		beq	.L259
1401:bluetooth_rxtx.c **** 	TXLED_SET;
 5597              		.loc 1 1401 0 is_stmt 1
 5598 0062 0A4B     		ldr	r3, .L261
 5599 0064 4FF48072 		mov	r2, #256
 5600 0068 1A60     		str	r2, [r3]
1402:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1403:bluetooth_rxtx.c **** 	PAEN_SET;
 5601              		.loc 1 1403 0
 5602 006a 094B     		ldr	r3, .L261+4
 5603 006c 8022     		movs	r2, #128
 5604 006e 1A60     		str	r2, [r3]
1404:bluetooth_rxtx.c **** #endif
1405:bluetooth_rxtx.c **** 	while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 5605              		.loc 1 1405 0
 5606 0070 00BF     		nop
 5607              	.L260:
 5608              		.loc 1 1405 0 is_stmt 0 discriminator 1
 5609 0072 0E20     		movs	r0, #14
 5610 0074 FFF7FEFF 		bl	cc2400_get
 5611 0078 0346     		mov	r3, r0
 5612 007a 03F01F03 		and	r3, r3, #31
 5613 007e 0F2B     		cmp	r3, #15
 5614 0080 F7D1     		bne	.L260
1406:bluetooth_rxtx.c **** 	cc2400_strobe(STX);
 5615              		.loc 1 1406 0 is_stmt 1
 5616 0082 6320     		movs	r0, #99
 5617 0084 FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/cczWrdyg.s 			page 123


1407:bluetooth_rxtx.c **** #endif
1408:bluetooth_rxtx.c **** }
 5618              		.loc 1 1408 0
 5619 0088 80BD     		pop	{r7, pc}
 5620              	.L262:
 5621 008a 00BF     		.align	2
 5622              	.L261:
 5623 008c 38C00920 		.word	537509944
 5624 0090 58C00920 		.word	537509976
 5625              		.cfi_endproc
 5626              	.LFE24:
 5628              		.section	.text.hop,"ax",%progbits
 5629              		.align	2
 5630              		.global	hop
 5631              		.thumb
 5632              		.thumb_func
 5634              	hop:
 5635              	.LFB25:
1409:bluetooth_rxtx.c **** 
1410:bluetooth_rxtx.c **** /* TODO - return whether hop happened, or should caller have to keep
1411:bluetooth_rxtx.c ****  * track of this? */ 
1412:bluetooth_rxtx.c **** //weiping hop
1413:bluetooth_rxtx.c **** void hop(void)
1414:bluetooth_rxtx.c **** {
 5636              		.loc 1 1414 0
 5637              		.cfi_startproc
 5638              		@ args = 0, pretend = 0, frame = 0
 5639              		@ frame_needed = 1, uses_anonymous_args = 0
 5640 0000 80B5     		push	{r7, lr}
 5641              		.cfi_def_cfa_offset 8
 5642              		.cfi_offset 7, -8
 5643              		.cfi_offset 14, -4
 5644 0002 00AF     		add	r7, sp, #0
 5645              		.cfi_def_cfa_register 7
1415:bluetooth_rxtx.c **** 	do_hop = 0;
 5646              		.loc 1 1415 0
 5647 0004 3B4B     		ldr	r3, .L274
 5648 0006 0022     		movs	r2, #0
 5649 0008 1A70     		strb	r2, [r3]
1416:bluetooth_rxtx.c **** 
1417:bluetooth_rxtx.c **** 	// No hopping, if channel is set correctly, do nothing
1418:bluetooth_rxtx.c **** 	if (hop_mode == HOP_NONE) {
 5650              		.loc 1 1418 0
 5651 000a 3B4B     		ldr	r3, .L274+4
 5652 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5653 000e 002B     		cmp	r3, #0
 5654 0010 00D1     		bne	.L264
1419:bluetooth_rxtx.c **** 
1420:bluetooth_rxtx.c **** /*		cc2400_strobe(SRFOFF);
1421:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
1422:bluetooth_rxtx.c **** 
1423:bluetooth_rxtx.c **** 
1424:bluetooth_rxtx.c **** 		if (clkn % 8 == 2)
1425:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, 2420 - 1);
1426:bluetooth_rxtx.c **** 		
1427:bluetooth_rxtx.c **** 		else
1428:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, 2441 - 1);
ARM GAS  /tmp/cczWrdyg.s 			page 124


1429:bluetooth_rxtx.c **** 		
1430:bluetooth_rxtx.c **** //		cc2400_set(MANAND,  0x7fff);
1431:bluetooth_rxtx.c **** //		cc2400_set(LMTST,   0x2b22);
1432:bluetooth_rxtx.c **** //		cc2400_set(MDMTST0, 0x164b); // without PRNG
1433:bluetooth_rxtx.c **** 		cc2400_set(GRMDM,   0x0301); // un-buffered mode, GFSK
1434:bluetooth_rxtx.c **** //		cc2400_set(MDMCTRL, 0x0040);
1435:bluetooth_rxtx.c **** 
1436:bluetooth_rxtx.c **** 		// Set up CS register
1437:bluetooth_rxtx.c **** //		cs_threshold_calc_and_set();
1438:bluetooth_rxtx.c **** 
1439:bluetooth_rxtx.c **** 		while (!(cc2400_status() & XOSC16M_STABLE));
1440:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
1441:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
1442:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
1443:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1444:bluetooth_rxtx.c **** //		PAEN_SET;
1445:bluetooth_rxtx.c **** //		HGM_SET;
1446:bluetooth_rxtx.c **** #endif
1447:bluetooth_rxtx.c **** */
1448:bluetooth_rxtx.c **** 		return;
 5655              		.loc 1 1448 0
 5656 0012 6EE0     		b	.L263
 5657              	.L264:
1449:bluetooth_rxtx.c **** }
1450:bluetooth_rxtx.c **** 
1451:bluetooth_rxtx.c **** 	// Slow sweep (100 hops/sec)
1452:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_SWEEP) {
 5658              		.loc 1 1452 0
 5659 0014 384B     		ldr	r3, .L274+4
 5660 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5661 0018 012B     		cmp	r3, #1
 5662 001a 14D1     		bne	.L266
1453:bluetooth_rxtx.c **** 		channel += 32;
 5663              		.loc 1 1453 0
 5664 001c 374B     		ldr	r3, .L274+8
 5665 001e 1B88     		ldrh	r3, [r3]	@ movhi
 5666 0020 9BB2     		uxth	r3, r3
 5667 0022 2033     		adds	r3, r3, #32
 5668 0024 9AB2     		uxth	r2, r3
 5669 0026 354B     		ldr	r3, .L274+8
 5670 0028 1A80     		strh	r2, [r3]	@ movhi
1454:bluetooth_rxtx.c **** 		if (channel > 2480)
 5671              		.loc 1 1454 0
 5672 002a 344B     		ldr	r3, .L274+8
 5673 002c 1B88     		ldrh	r3, [r3]	@ movhi
 5674 002e 9BB2     		uxth	r3, r3
 5675 0030 B3F51B6F 		cmp	r3, #2480
 5676 0034 35D9     		bls	.L268
1455:bluetooth_rxtx.c **** 			channel -= 79;
 5677              		.loc 1 1455 0
 5678 0036 314B     		ldr	r3, .L274+8
 5679 0038 1B88     		ldrh	r3, [r3]	@ movhi
 5680 003a 9BB2     		uxth	r3, r3
 5681 003c 4F3B     		subs	r3, r3, #79
 5682 003e 9AB2     		uxth	r2, r3
 5683 0040 2E4B     		ldr	r3, .L274+8
 5684 0042 1A80     		strh	r2, [r3]	@ movhi
ARM GAS  /tmp/cczWrdyg.s 			page 125


 5685 0044 2DE0     		b	.L268
 5686              	.L266:
1456:bluetooth_rxtx.c **** 	}
1457:bluetooth_rxtx.c **** 
1458:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BLUETOOTH) {
 5687              		.loc 1 1458 0
 5688 0046 2C4B     		ldr	r3, .L274+4
 5689 0048 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5690 004a 022B     		cmp	r3, #2
 5691 004c 0DD1     		bne	.L269
1459:bluetooth_rxtx.c **** 		TXLED_SET;
 5692              		.loc 1 1459 0
 5693 004e 2C4B     		ldr	r3, .L274+12
 5694 0050 4FF48072 		mov	r2, #256
 5695 0054 1A60     		str	r2, [r3]
1460:bluetooth_rxtx.c **** 		channel = next_hop(clkn);
 5696              		.loc 1 1460 0
 5697 0056 2B4B     		ldr	r3, .L274+16
 5698 0058 1B68     		ldr	r3, [r3]
 5699 005a 1846     		mov	r0, r3
 5700 005c FFF7FEFF 		bl	next_hop
 5701 0060 0346     		mov	r3, r0
 5702 0062 1A46     		mov	r2, r3
 5703 0064 254B     		ldr	r3, .L274+8
 5704 0066 1A80     		strh	r2, [r3]	@ movhi
 5705 0068 1BE0     		b	.L268
 5706              	.L269:
1461:bluetooth_rxtx.c **** 	}
1462:bluetooth_rxtx.c **** 
1463:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_BTLE) {
 5707              		.loc 1 1463 0
 5708 006a 234B     		ldr	r3, .L274+4
 5709 006c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5710 006e 032B     		cmp	r3, #3
 5711 0070 0BD1     		bne	.L270
1464:bluetooth_rxtx.c **** 		TXLED_SET;
 5712              		.loc 1 1464 0
 5713 0072 234B     		ldr	r3, .L274+12
 5714 0074 4FF48072 		mov	r2, #256
 5715 0078 1A60     		str	r2, [r3]
1465:bluetooth_rxtx.c **** 		channel = btle_next_hop(&le);
 5716              		.loc 1 1465 0
 5717 007a 2348     		ldr	r0, .L274+20
 5718 007c FFF7FEFF 		bl	btle_next_hop
 5719 0080 0346     		mov	r3, r0
 5720 0082 1A46     		mov	r2, r3
 5721 0084 1D4B     		ldr	r3, .L274+8
 5722 0086 1A80     		strh	r2, [r3]	@ movhi
 5723 0088 0BE0     		b	.L268
 5724              	.L270:
1466:bluetooth_rxtx.c **** 	}
1467:bluetooth_rxtx.c **** 
1468:bluetooth_rxtx.c **** 	else if (hop_mode == HOP_DIRECT) {
 5725              		.loc 1 1468 0
 5726 008a 1B4B     		ldr	r3, .L274+4
 5727 008c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5728 008e 042B     		cmp	r3, #4
ARM GAS  /tmp/cczWrdyg.s 			page 126


 5729 0090 07D1     		bne	.L268
1469:bluetooth_rxtx.c **** 		TXLED_SET;
 5730              		.loc 1 1469 0
 5731 0092 1B4B     		ldr	r3, .L274+12
 5732 0094 4FF48072 		mov	r2, #256
 5733 0098 1A60     		str	r2, [r3]
1470:bluetooth_rxtx.c **** 		channel = hop_direct_channel;
 5734              		.loc 1 1470 0
 5735 009a 1C4B     		ldr	r3, .L274+24
 5736 009c 1A88     		ldrh	r2, [r3]
 5737 009e 174B     		ldr	r3, .L274+8
 5738 00a0 1A80     		strh	r2, [r3]	@ movhi
 5739              	.L268:
1471:bluetooth_rxtx.c **** 	}
1472:bluetooth_rxtx.c **** 
1473:bluetooth_rxtx.c ****         /* IDLE mode, but leave amp on, so don't call cc2400_idle(). */
1474:bluetooth_rxtx.c **** 	cc2400_strobe(SRFOFF);
 5740              		.loc 1 1474 0
 5741 00a2 6420     		movs	r0, #100
 5742 00a4 FFF7FEFF 		bl	cc2400_strobe
1475:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 5743              		.loc 1 1475 0
 5744 00a8 00BF     		nop
 5745              	.L271:
 5746              		.loc 1 1475 0 is_stmt 0 discriminator 1
 5747 00aa FFF7FEFF 		bl	cc2400_status
 5748 00ae 0346     		mov	r3, r0
 5749 00b0 03F00403 		and	r3, r3, #4
 5750 00b4 002B     		cmp	r3, #0
 5751 00b6 F8D1     		bne	.L271
1476:bluetooth_rxtx.c **** 
1477:bluetooth_rxtx.c **** 	/* Retune */
1478:bluetooth_rxtx.c **** 	cc2400_set(FSDIV, channel - 1);
 5752              		.loc 1 1478 0 is_stmt 1
 5753 00b8 104B     		ldr	r3, .L274+8
 5754 00ba 1B88     		ldrh	r3, [r3]	@ movhi
 5755 00bc 9BB2     		uxth	r3, r3
 5756 00be 013B     		subs	r3, r3, #1
 5757 00c0 9BB2     		uxth	r3, r3
 5758 00c2 0220     		movs	r0, #2
 5759 00c4 1946     		mov	r1, r3
 5760 00c6 FFF7FEFF 		bl	cc2400_set
1479:bluetooth_rxtx.c **** 	
1480:bluetooth_rxtx.c **** 	/* Update CS register if hopping.  */
1481:bluetooth_rxtx.c **** 	if (hop_mode > 0) {
 5761              		.loc 1 1481 0
 5762 00ca 0B4B     		ldr	r3, .L274+4
 5763 00cc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 5764 00ce 002B     		cmp	r3, #0
 5765 00d0 01D0     		beq	.L272
1482:bluetooth_rxtx.c **** 		cs_threshold_calc_and_set();
 5766              		.loc 1 1482 0
 5767 00d2 FFF7FEFF 		bl	cs_threshold_calc_and_set
 5768              	.L272:
1483:bluetooth_rxtx.c **** 	}
1484:bluetooth_rxtx.c **** 
1485:bluetooth_rxtx.c **** 	/* Wait for lock */
ARM GAS  /tmp/cczWrdyg.s 			page 127


1486:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 5769              		.loc 1 1486 0
 5770 00d6 6120     		movs	r0, #97
 5771 00d8 FFF7FEFF 		bl	cc2400_strobe
1487:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 5772              		.loc 1 1487 0
 5773 00dc 00BF     		nop
 5774              	.L273:
 5775              		.loc 1 1487 0 is_stmt 0 discriminator 1
 5776 00de FFF7FEFF 		bl	cc2400_status
 5777 00e2 0346     		mov	r3, r0
 5778 00e4 03F00403 		and	r3, r3, #4
 5779 00e8 002B     		cmp	r3, #0
 5780 00ea F8D0     		beq	.L273
1488:bluetooth_rxtx.c **** 	
1489:bluetooth_rxtx.c **** 	/* RX mode */
1490:bluetooth_rxtx.c **** 	cc2400_strobe(SRX);
 5781              		.loc 1 1490 0 is_stmt 1
 5782 00ec 6220     		movs	r0, #98
 5783 00ee FFF7FEFF 		bl	cc2400_strobe
 5784              	.L263:
1491:bluetooth_rxtx.c **** 
1492:bluetooth_rxtx.c **** }
 5785              		.loc 1 1492 0
 5786 00f2 80BD     		pop	{r7, pc}
 5787              	.L275:
 5788              		.align	2
 5789              	.L274:
 5790 00f4 00000000 		.word	do_hop
 5791 00f8 00000000 		.word	hop_mode
 5792 00fc 00000000 		.word	channel
 5793 0100 38C00920 		.word	537509944
 5794 0104 00000000 		.word	clkn
 5795 0108 00000000 		.word	le
 5796 010c 00000000 		.word	hop_direct_channel
 5797              		.cfi_endproc
 5798              	.LFE25:
 5800              		.section	.text.bt_stream_rx,"ax",%progbits
 5801              		.align	2
 5802              		.global	bt_stream_rx
 5803              		.thumb
 5804              		.thumb_func
 5806              	bt_stream_rx:
 5807              	.LFB26:
1493:bluetooth_rxtx.c **** 
1494:bluetooth_rxtx.c **** /* Bluetooth packet monitoring */
1495:bluetooth_rxtx.c **** void bt_stream_rx()
1496:bluetooth_rxtx.c **** {
 5808              		.loc 1 1496 0
 5809              		.cfi_startproc
 5810              		@ args = 0, pretend = 0, frame = 8
 5811              		@ frame_needed = 1, uses_anonymous_args = 0
 5812 0000 80B5     		push	{r7, lr}
 5813              		.cfi_def_cfa_offset 8
 5814              		.cfi_offset 7, -8
 5815              		.cfi_offset 14, -4
 5816 0002 82B0     		sub	sp, sp, #8
ARM GAS  /tmp/cczWrdyg.s 			page 128


 5817              		.cfi_def_cfa_offset 16
 5818 0004 00AF     		add	r7, sp, #0
 5819              		.cfi_def_cfa_register 7
1497:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 5820              		.loc 1 1497 0
 5821 0006 0023     		movs	r3, #0
 5822 0008 7B60     		str	r3, [r7, #4]
1498:bluetooth_rxtx.c **** 	u8 hold;
1499:bluetooth_rxtx.c **** 	int8_t rssi;
1500:bluetooth_rxtx.c **** 	int i;
1501:bluetooth_rxtx.c **** 	int16_t packet_offset;
1502:bluetooth_rxtx.c **** 	int8_t rssi_at_trigger;
1503:bluetooth_rxtx.c **** 		
1504:bluetooth_rxtx.c **** 	RXLED_CLR;
 5823              		.loc 1 1504 0
 5824 000a 6D4B     		ldr	r3, .L294
 5825 000c 1022     		movs	r2, #16
 5826 000e 1A60     		str	r2, [r3]
1505:bluetooth_rxtx.c **** 	USRLED_CLR;
 5827              		.loc 1 1505 0
 5828 0010 6B4B     		ldr	r3, .L294
 5829 0012 0222     		movs	r2, #2
 5830 0014 1A60     		str	r2, [r3]
1506:bluetooth_rxtx.c **** 	dio_ssp_init();
 5831              		.loc 1 1506 0
 5832 0016 FFF7FEFF 		bl	dio_ssp_init
1507:bluetooth_rxtx.c **** 	dma_init();
 5833              		.loc 1 1507 0
 5834 001a FFF7FEFF 		bl	dma_init
1508:bluetooth_rxtx.c **** 	dio_ssp_start();
 5835              		.loc 1 1508 0
 5836 001e FFF7FEFF 		bl	dio_ssp_start
1509:bluetooth_rxtx.c **** 	
1510:bluetooth_rxtx.c **** 	
1511:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 5837              		.loc 1 1511 0
 5838 0022 0D20     		movs	r0, #13
 5839 0024 47F6FF71 		movw	r1, #32767
 5840 0028 FFF7FEFF 		bl	cc2400_set
1512:bluetooth_rxtx.c ****         cc2400_set(LMTST,   0x2b22);
 5841              		.loc 1 1512 0
 5842 002c 1220     		movs	r0, #18
 5843 002e 42F62231 		movw	r1, #11042
 5844 0032 FFF7FEFF 		bl	cc2400_set
1513:bluetooth_rxtx.c ****         cc2400_set(MDMTST0, 0x164b);
 5845              		.loc 1 1513 0
 5846 0036 1420     		movs	r0, #20
 5847 0038 41F24B61 		movw	r1, #5707
 5848 003c FFF7FEFF 		bl	cc2400_set
1514:bluetooth_rxtx.c ****         cc2400_set(FSDIV,   2441 - 1);
 5849              		.loc 1 1514 0
 5850 0040 0220     		movs	r0, #2
 5851 0042 40F68811 		movw	r1, #2440
 5852 0046 FFF7FEFF 		bl	cc2400_set
1515:bluetooth_rxtx.c ****         cc2400_set(SYNCH,   0xf9ae);
 5853              		.loc 1 1515 0
 5854 004a 2D20     		movs	r0, #45
ARM GAS  /tmp/cczWrdyg.s 			page 129


 5855 004c 4FF6AE11 		movw	r1, #63918
 5856 0050 FFF7FEFF 		bl	cc2400_set
1516:bluetooth_rxtx.c ****         cc2400_set(SYNCL,   0x1584);
 5857              		.loc 1 1516 0
 5858 0054 2C20     		movs	r0, #44
 5859 0056 41F28451 		movw	r1, #5508
 5860 005a FFF7FEFF 		bl	cc2400_set
1517:bluetooth_rxtx.c ****         cc2400_set(MDMCTRL, 0x0040);
 5861              		.loc 1 1517 0
 5862 005e 0320     		movs	r0, #3
 5863 0060 4021     		movs	r1, #64
 5864 0062 FFF7FEFF 		bl	cc2400_set
1518:bluetooth_rxtx.c ****         cc2400_set(GRMDM, 0x0f60);
 5865              		.loc 1 1518 0
 5866 0066 2020     		movs	r0, #32
 5867 0068 4FF47661 		mov	r1, #3936
 5868 006c FFF7FEFF 		bl	cc2400_set
1519:bluetooth_rxtx.c **** 
1520:bluetooth_rxtx.c ****         while (!(cc2400_status() & XOSC16M_STABLE));
 5869              		.loc 1 1520 0
 5870 0070 00BF     		nop
 5871              	.L277:
 5872              		.loc 1 1520 0 is_stmt 0 discriminator 1
 5873 0072 FFF7FEFF 		bl	cc2400_status
 5874 0076 0346     		mov	r3, r0
 5875 0078 03F04003 		and	r3, r3, #64
 5876 007c 002B     		cmp	r3, #0
 5877 007e F8D0     		beq	.L277
1521:bluetooth_rxtx.c ****         cc2400_strobe(SFSON);
 5878              		.loc 1 1521 0 is_stmt 1
 5879 0080 6120     		movs	r0, #97
 5880 0082 FFF7FEFF 		bl	cc2400_strobe
1522:bluetooth_rxtx.c ****         while (!(cc2400_status() & FS_LOCK));
 5881              		.loc 1 1522 0
 5882 0086 00BF     		nop
 5883              	.L278:
 5884              		.loc 1 1522 0 is_stmt 0 discriminator 1
 5885 0088 FFF7FEFF 		bl	cc2400_status
 5886 008c 0346     		mov	r3, r0
 5887 008e 03F00403 		and	r3, r3, #4
 5888 0092 002B     		cmp	r3, #0
 5889 0094 F8D0     		beq	.L278
1523:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
1524:bluetooth_rxtx.c ****         PAEN_SET;
 5890              		.loc 1 1524 0 is_stmt 1
 5891 0096 4B4B     		ldr	r3, .L294+4
 5892 0098 8022     		movs	r2, #128
 5893 009a 1A60     		str	r2, [r3]
1525:bluetooth_rxtx.c ****         HGM_SET;
 5894              		.loc 1 1525 0
 5895 009c 494B     		ldr	r3, .L294+4
 5896 009e 4FF48072 		mov	r2, #256
 5897 00a2 1A60     		str	r2, [r3]
1526:bluetooth_rxtx.c **** #endif
1527:bluetooth_rxtx.c ****         cc2400_strobe(SRX);
 5898              		.loc 1 1527 0
 5899 00a4 6220     		movs	r0, #98
ARM GAS  /tmp/cczWrdyg.s 			page 130


 5900 00a6 FFF7FEFF 		bl	cc2400_strobe
1528:bluetooth_rxtx.c ****         while (!(cc2400_status() & SYNC_RECEIVED));
 5901              		.loc 1 1528 0
 5902 00aa 00BF     		nop
 5903              	.L279:
 5904              		.loc 1 1528 0 is_stmt 0 discriminator 1
 5905 00ac FFF7FEFF 		bl	cc2400_status
 5906 00b0 0346     		mov	r3, r0
 5907 00b2 03F01003 		and	r3, r3, #16
 5908 00b6 002B     		cmp	r3, #0
 5909 00b8 F8D0     		beq	.L279
1529:bluetooth_rxtx.c **** 	
1530:bluetooth_rxtx.c **** 
1531:bluetooth_rxtx.c **** 	clkn_init ();
 5910              		.loc 1 1531 0 is_stmt 1
 5911 00ba FFF7FEFF 		bl	clkn_init
1532:bluetooth_rxtx.c **** 	T0TC = 2250;
 5912              		.loc 1 1532 0
 5913 00be 424B     		ldr	r3, .L294+8
 5914 00c0 40F6CA02 		movw	r2, #2250
 5915 00c4 1A60     		str	r2, [r3]
1533:bluetooth_rxtx.c **** 
1534:bluetooth_rxtx.c **** 	USRLED_SET;
 5916              		.loc 1 1534 0
 5917 00c6 414B     		ldr	r3, .L294+12
 5918 00c8 0222     		movs	r2, #2
 5919 00ca 1A60     		str	r2, [r3]
1535:bluetooth_rxtx.c **** 	
1536:bluetooth_rxtx.c **** 	cs_trigger_enable();
 5920              		.loc 1 1536 0
 5921 00cc FFF7FEFF 		bl	cs_trigger_enable
1537:bluetooth_rxtx.c **** 
1538:bluetooth_rxtx.c **** 	hold = 0;
 5922              		.loc 1 1538 0
 5923 00d0 0023     		movs	r3, #0
 5924 00d2 FB70     		strb	r3, [r7, #3]
1539:bluetooth_rxtx.c **** 
1540:bluetooth_rxtx.c **** 	while ((requested_mode == MODE_RX_SYMBOLS) ||
 5925              		.loc 1 1540 0
 5926 00d4 63E0     		b	.L280
 5927              	.L291:
1541:bluetooth_rxtx.c **** 		   (requested_mode == MODE_BT_FOLLOW)) {
1542:bluetooth_rxtx.c **** 
1543:bluetooth_rxtx.c **** 		/* If timer says time to hop, do it. TODO - set
1544:bluetooth_rxtx.c **** 		 * per-channel carrier sense threshold. Set by
1545:bluetooth_rxtx.c **** 		 * firmware or host. TODO - if hop happened, clear
1546:bluetooth_rxtx.c **** 		 * hold. */
1547:bluetooth_rxtx.c **** //		while (do_hop);
1548:bluetooth_rxtx.c **** 		while (clkn % 4 != 2);
 5928              		.loc 1 1548 0
 5929 00d6 00BF     		nop
 5930              	.L281:
 5931              		.loc 1 1548 0 is_stmt 0 discriminator 1
 5932 00d8 3D4B     		ldr	r3, .L294+16
 5933 00da 1B68     		ldr	r3, [r3]
 5934 00dc 03F00303 		and	r3, r3, #3
 5935 00e0 022B     		cmp	r3, #2
ARM GAS  /tmp/cczWrdyg.s 			page 131


 5936 00e2 F9D1     		bne	.L281
1549:bluetooth_rxtx.c **** 		hop();
 5937              		.loc 1 1549 0 is_stmt 1
 5938 00e4 FFF7FEFF 		bl	hop
1550:bluetooth_rxtx.c **** 
1551:bluetooth_rxtx.c **** 		RXLED_CLR;
 5939              		.loc 1 1551 0
 5940 00e8 354B     		ldr	r3, .L294
 5941 00ea 1022     		movs	r2, #16
 5942 00ec 1A60     		str	r2, [r3]
1552:bluetooth_rxtx.c **** 
1553:bluetooth_rxtx.c **** 		/* Wait for DMA transfer. TODO - need more work on
1554:bluetooth_rxtx.c **** 		 * RSSI. Should send RSSI indications to host even
1555:bluetooth_rxtx.c **** 		 * when not transferring data. That would also keep
1556:bluetooth_rxtx.c **** 		 * the USB stream going. This loop runs 50-80 times
1557:bluetooth_rxtx.c **** 		 * while waiting for DMA, but RSSI sampling does not
1558:bluetooth_rxtx.c **** 		 * cover all the symbols in a DMA transfer. Can not do
1559:bluetooth_rxtx.c **** 		 * RSSI sampling in CS interrupt, but could log time
1560:bluetooth_rxtx.c **** 		 * at multiple trigger points there. The MAX() below
1561:bluetooth_rxtx.c **** 		 * helps with statistics in the case that cs_trigger
1562:bluetooth_rxtx.c **** 		 * happened before the loop started. */
1563:bluetooth_rxtx.c **** /*		rssi_reset();
1564:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
1565:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0)) {
1566:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
1567:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
1568:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
1569:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
1570:bluetooth_rxtx.c **** 			}
1571:bluetooth_rxtx.c **** 			rssi_add(rssi);
1572:bluetooth_rxtx.c **** 		}
1573:bluetooth_rxtx.c **** */
1574:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1575:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 5943              		.loc 1 1575 0
 5944 00ee 394B     		ldr	r3, .L294+20
 5945 00f0 1B68     		ldr	r3, [r3]
 5946 00f2 03F00103 		and	r3, r3, #1
 5947 00f6 002B     		cmp	r3, #0
 5948 00f8 09D0     		beq	.L282
1576:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 5949              		.loc 1 1576 0
 5950 00fa 374B     		ldr	r3, .L294+24
 5951 00fc 1B68     		ldr	r3, [r3]
 5952 00fe 7B60     		str	r3, [r7, #4]
1577:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 5953              		.loc 1 1577 0
 5954 0100 364B     		ldr	r3, .L294+28
 5955 0102 1B68     		ldr	r3, [r3]
 5956 0104 344A     		ldr	r2, .L294+24
 5957 0106 1360     		str	r3, [r2]
1578:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 5958              		.loc 1 1578 0
 5959 0108 344A     		ldr	r2, .L294+28
 5960 010a 7B68     		ldr	r3, [r7, #4]
 5961 010c 1360     		str	r3, [r2]
 5962              	.L282:
ARM GAS  /tmp/cczWrdyg.s 			page 132


1579:bluetooth_rxtx.c **** 		}
1580:bluetooth_rxtx.c **** 
1581:bluetooth_rxtx.c **** 		if (rx_err) {
 5963              		.loc 1 1581 0
 5964 010e 344B     		ldr	r3, .L294+32
 5965 0110 1B68     		ldr	r3, [r3]
 5966 0112 002B     		cmp	r3, #0
 5967 0114 07D0     		beq	.L283
1582:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 5968              		.loc 1 1582 0
 5969 0116 334B     		ldr	r3, .L294+36
 5970 0118 1B78     		ldrb	r3, [r3]
 5971 011a DBB2     		uxtb	r3, r3
 5972 011c 43F00203 		orr	r3, r3, #2
 5973 0120 DAB2     		uxtb	r2, r3
 5974 0122 304B     		ldr	r3, .L294+36
 5975 0124 1A70     		strb	r2, [r3]
 5976              	.L283:
1583:bluetooth_rxtx.c **** 		}
1584:bluetooth_rxtx.c **** 
1585:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1586:bluetooth_rxtx.c **** 		if (!rx_tc)
 5977              		.loc 1 1586 0
 5978 0126 2B4B     		ldr	r3, .L294+20
 5979 0128 1B68     		ldr	r3, [r3]
 5980 012a 002B     		cmp	r3, #0
 5981 012c 00D1     		bne	.L284
1587:bluetooth_rxtx.c **** 			goto rx_continue;
 5982              		.loc 1 1587 0
 5983 012e 2BE0     		b	.L285
 5984              	.L284:
1588:bluetooth_rxtx.c **** 
1589:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1590:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 5985              		.loc 1 1590 0
 5986 0130 284B     		ldr	r3, .L294+20
 5987 0132 1B68     		ldr	r3, [r3]
 5988 0134 012B     		cmp	r3, #1
 5989 0136 07D9     		bls	.L286
1591:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 5990              		.loc 1 1591 0
 5991 0138 2A4B     		ldr	r3, .L294+36
 5992 013a 1B78     		ldrb	r3, [r3]
 5993 013c DBB2     		uxtb	r3, r3
 5994 013e 43F00103 		orr	r3, r3, #1
 5995 0142 DAB2     		uxtb	r2, r3
 5996 0144 274B     		ldr	r3, .L294+36
 5997 0146 1A70     		strb	r2, [r3]
 5998              	.L286:
1592:bluetooth_rxtx.c **** 
1593:bluetooth_rxtx.c **** //		rssi_iir_update();
1594:bluetooth_rxtx.c **** 
1595:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1596:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1597:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1598:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1599:bluetooth_rxtx.c **** /*		if (cs_trigger || cs_no_squelch) {
ARM GAS  /tmp/cczWrdyg.s 			page 133


1600:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
1601:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1602:bluetooth_rxtx.c **** 			cs_trigger = 0;
1603:bluetooth_rxtx.c **** 		}
1604:bluetooth_rxtx.c **** 
1605:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
1606:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
1607:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
1608:bluetooth_rxtx.c **** 		}
1609:bluetooth_rxtx.c **** */
1610:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1611:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1612:bluetooth_rxtx.c **** /*		if (keepalive_trigger) {
1613:bluetooth_rxtx.c **** 			if (hold == 0)
1614:bluetooth_rxtx.c **** 				hold = 1;
1615:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
1616:bluetooth_rxtx.c **** 		}
1617:bluetooth_rxtx.c **** */
1618:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1619:bluetooth_rxtx.c **** /*		if (hold == 0) {
1620:bluetooth_rxtx.c **** 			goto rx_continue;
1621:bluetooth_rxtx.c **** 		}
1622:bluetooth_rxtx.c **** 		hold--;
1623:bluetooth_rxtx.c **** */		
1624:bluetooth_rxtx.c **** 		/* Queue data from DMA buffer. */
1625:bluetooth_rxtx.c **** 		switch (hop_mode) {
 5999              		.loc 1 1625 0
 6000 0148 274B     		ldr	r3, .L294+40
 6001 014a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6002 014c 022B     		cmp	r3, #2
 6003 014e 0DD1     		bne	.L292
1626:bluetooth_rxtx.c **** 			case HOP_BLUETOOTH:
1627:bluetooth_rxtx.c **** 				//if ((packet_offset = find_access_code(idle_rxbuf)) >= 0) {
1628:bluetooth_rxtx.c **** 				//		clock_trim = 20 - packet_offset;
1629:bluetooth_rxtx.c **** 						if (enqueue(BR_PACKET, idle_rxbuf)) {
 6004              		.loc 1 1629 0
 6005 0150 224B     		ldr	r3, .L294+28
 6006 0152 1B68     		ldr	r3, [r3]
 6007 0154 0020     		movs	r0, #0
 6008 0156 1946     		mov	r1, r3
 6009 0158 FFF7FEFF 		bl	enqueue
 6010 015c 0346     		mov	r3, r0
 6011 015e 002B     		cmp	r3, #0
 6012 0160 03D0     		beq	.L289
1630:bluetooth_rxtx.c **** 								RXLED_SET;
 6013              		.loc 1 1630 0
 6014 0162 1A4B     		ldr	r3, .L294+12
 6015 0164 1022     		movs	r2, #16
 6016 0166 1A60     		str	r2, [r3]
1631:bluetooth_rxtx.c **** 						}
1632:bluetooth_rxtx.c **** 				//}
1633:bluetooth_rxtx.c **** 				break;
 6017              		.loc 1 1633 0
 6018 0168 0EE0     		b	.L285
 6019              	.L289:
 6020 016a 0DE0     		b	.L285
 6021              	.L292:
ARM GAS  /tmp/cczWrdyg.s 			page 134


1634:bluetooth_rxtx.c **** 			default:
1635:bluetooth_rxtx.c **** 				if (enqueue(BR_PACKET, idle_rxbuf)) {
 6022              		.loc 1 1635 0
 6023 016c 1B4B     		ldr	r3, .L294+28
 6024 016e 1B68     		ldr	r3, [r3]
 6025 0170 0020     		movs	r0, #0
 6026 0172 1946     		mov	r1, r3
 6027 0174 FFF7FEFF 		bl	enqueue
 6028 0178 0346     		mov	r3, r0
 6029 017a 002B     		cmp	r3, #0
 6030 017c 03D0     		beq	.L290
1636:bluetooth_rxtx.c **** 						RXLED_SET;
 6031              		.loc 1 1636 0
 6032 017e 134B     		ldr	r3, .L294+12
 6033 0180 1022     		movs	r2, #16
 6034 0182 1A60     		str	r2, [r3]
1637:bluetooth_rxtx.c **** 				}
1638:bluetooth_rxtx.c **** 				break;
 6035              		.loc 1 1638 0
 6036 0184 FFE7     		b	.L293
 6037              	.L290:
 6038              	.L293:
 6039 0186 00BF     		nop
 6040              	.L285:
1639:bluetooth_rxtx.c **** 		}
1640:bluetooth_rxtx.c **** 
1641:bluetooth_rxtx.c **** 	rx_continue:
1642:bluetooth_rxtx.c **** 		handle_usb(clkn);
 6041              		.loc 1 1642 0
 6042 0188 114B     		ldr	r3, .L294+16
 6043 018a 1B68     		ldr	r3, [r3]
 6044 018c 1846     		mov	r0, r3
 6045 018e FFF7FEFF 		bl	handle_usb
1643:bluetooth_rxtx.c **** 		rx_tc = 0;
 6046              		.loc 1 1643 0
 6047 0192 104B     		ldr	r3, .L294+20
 6048 0194 0022     		movs	r2, #0
 6049 0196 1A60     		str	r2, [r3]
1644:bluetooth_rxtx.c **** 		rx_err = 0;
 6050              		.loc 1 1644 0
 6051 0198 114B     		ldr	r3, .L294+32
 6052 019a 0022     		movs	r2, #0
 6053 019c 1A60     		str	r2, [r3]
 6054              	.L280:
1540:bluetooth_rxtx.c **** 		   (requested_mode == MODE_BT_FOLLOW)) {
 6055              		.loc 1 1540 0
 6056 019e 134B     		ldr	r3, .L294+44
 6057 01a0 1B78     		ldrb	r3, [r3]
 6058 01a2 DBB2     		uxtb	r3, r3
 6059 01a4 012B     		cmp	r3, #1
 6060 01a6 96D0     		beq	.L291
1541:bluetooth_rxtx.c **** 
 6061              		.loc 1 1541 0 discriminator 1
 6062 01a8 104B     		ldr	r3, .L294+44
 6063 01aa 1B78     		ldrb	r3, [r3]
 6064 01ac DBB2     		uxtb	r3, r3
1540:bluetooth_rxtx.c **** 		   (requested_mode == MODE_BT_FOLLOW)) {
ARM GAS  /tmp/cczWrdyg.s 			page 135


 6065              		.loc 1 1540 0 discriminator 1
 6066 01ae 082B     		cmp	r3, #8
 6067 01b0 91D0     		beq	.L291
1645:bluetooth_rxtx.c **** 	}
1646:bluetooth_rxtx.c **** 
1647:bluetooth_rxtx.c **** 	/* This call is a nop so far. Since bt_rx_stream() starts the
1648:bluetooth_rxtx.c **** 	 * stream, it makes sense that it would stop it. TODO - how
1649:bluetooth_rxtx.c **** 	 * should setup/teardown be handled? Should every new mode be
1650:bluetooth_rxtx.c **** 	 * starting from scratch? */
1651:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6068              		.loc 1 1651 0
 6069 01b2 FFF7FEFF 		bl	dio_ssp_stop
1652:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6070              		.loc 1 1652 0
 6071 01b6 FFF7FEFF 		bl	cs_trigger_disable
1653:bluetooth_rxtx.c **** }
 6072              		.loc 1 1653 0
 6073 01ba 0837     		adds	r7, r7, #8
 6074              		.cfi_def_cfa_offset 8
 6075 01bc BD46     		mov	sp, r7
 6076              		.cfi_def_cfa_register 13
 6077              		@ sp needed
 6078 01be 80BD     		pop	{r7, pc}
 6079              	.L295:
 6080              		.align	2
 6081              	.L294:
 6082 01c0 3CC00920 		.word	537509948
 6083 01c4 58C00920 		.word	537509976
 6084 01c8 08400040 		.word	1073758216
 6085 01cc 38C00920 		.word	537509944
 6086 01d0 00000000 		.word	clkn
 6087 01d4 00000000 		.word	rx_tc
 6088 01d8 00000000 		.word	active_rxbuf
 6089 01dc 00000000 		.word	idle_rxbuf
 6090 01e0 00000000 		.word	rx_err
 6091 01e4 00000000 		.word	status
 6092 01e8 00000000 		.word	hop_mode
 6093 01ec 00000000 		.word	requested_mode
 6094              		.cfi_endproc
 6095              	.LFE26:
 6097              		.section	.text.le_set_access_address,"ax",%progbits
 6098              		.align	2
 6099              		.thumb
 6100              		.thumb_func
 6102              	le_set_access_address:
 6103              	.LFB27:
1654:bluetooth_rxtx.c **** 
1655:bluetooth_rxtx.c **** /* set LE access address */
1656:bluetooth_rxtx.c **** static void le_set_access_address(u32 aa) {
 6104              		.loc 1 1656 0
 6105              		.cfi_startproc
 6106              		@ args = 0, pretend = 0, frame = 16
 6107              		@ frame_needed = 1, uses_anonymous_args = 0
 6108 0000 80B5     		push	{r7, lr}
 6109              		.cfi_def_cfa_offset 8
 6110              		.cfi_offset 7, -8
 6111              		.cfi_offset 14, -4
ARM GAS  /tmp/cczWrdyg.s 			page 136


 6112 0002 84B0     		sub	sp, sp, #16
 6113              		.cfi_def_cfa_offset 24
 6114 0004 00AF     		add	r7, sp, #0
 6115              		.cfi_def_cfa_register 7
 6116 0006 7860     		str	r0, [r7, #4]
1657:bluetooth_rxtx.c **** 	u32 aa_rev;
1658:bluetooth_rxtx.c **** 
1659:bluetooth_rxtx.c **** 	le.access_address = aa;
 6117              		.loc 1 1659 0
 6118 0008 094A     		ldr	r2, .L297
 6119 000a 7B68     		ldr	r3, [r7, #4]
 6120 000c 1360     		str	r3, [r2]
1660:bluetooth_rxtx.c **** 	aa_rev = rbit(aa);
 6121              		.loc 1 1660 0
 6122 000e 7868     		ldr	r0, [r7, #4]
 6123 0010 FFF7FEFF 		bl	rbit
 6124 0014 F860     		str	r0, [r7, #12]
1661:bluetooth_rxtx.c **** 	le.syncl = aa_rev & 0xffff;
 6125              		.loc 1 1661 0
 6126 0016 FB68     		ldr	r3, [r7, #12]
 6127 0018 9AB2     		uxth	r2, r3
 6128 001a 054B     		ldr	r3, .L297
 6129 001c DA80     		strh	r2, [r3, #6]	@ movhi
1662:bluetooth_rxtx.c **** 	le.synch = aa_rev >> 16;
 6130              		.loc 1 1662 0
 6131 001e FB68     		ldr	r3, [r7, #12]
 6132 0020 1B0C     		lsrs	r3, r3, #16
 6133 0022 9AB2     		uxth	r2, r3
 6134 0024 024B     		ldr	r3, .L297
 6135 0026 9A80     		strh	r2, [r3, #4]	@ movhi
1663:bluetooth_rxtx.c **** }
 6136              		.loc 1 1663 0
 6137 0028 1037     		adds	r7, r7, #16
 6138              		.cfi_def_cfa_offset 8
 6139 002a BD46     		mov	sp, r7
 6140              		.cfi_def_cfa_register 13
 6141              		@ sp needed
 6142 002c 80BD     		pop	{r7, pc}
 6143              	.L298:
 6144 002e 00BF     		.align	2
 6145              	.L297:
 6146 0030 00000000 		.word	le
 6147              		.cfi_endproc
 6148              	.LFE27:
 6150              		.section	.text.reset_le,"ax",%progbits
 6151              		.align	2
 6152              		.global	reset_le
 6153              		.thumb
 6154              		.thumb_func
 6156              	reset_le:
 6157              	.LFB28:
1664:bluetooth_rxtx.c **** 
1665:bluetooth_rxtx.c **** /* reset le state, called by bt_generic_le and bt_follow_le() */
1666:bluetooth_rxtx.c **** void reset_le() {
 6158              		.loc 1 1666 0
 6159              		.cfi_startproc
 6160              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/cczWrdyg.s 			page 137


 6161              		@ frame_needed = 1, uses_anonymous_args = 0
 6162 0000 80B5     		push	{r7, lr}
 6163              		.cfi_def_cfa_offset 8
 6164              		.cfi_offset 7, -8
 6165              		.cfi_offset 14, -4
 6166 0002 00AF     		add	r7, sp, #0
 6167              		.cfi_def_cfa_register 7
1667:bluetooth_rxtx.c **** 	le_set_access_address(0x8e89bed6);     // advertising channel access address
 6168              		.loc 1 1667 0
 6169 0004 1F48     		ldr	r0, .L300
 6170 0006 FFF7FEFF 		bl	le_set_access_address
1668:bluetooth_rxtx.c **** 	le.crc_init  = 0x555555;	       // advertising channel CRCInit
 6171              		.loc 1 1668 0
 6172 000a 1F4B     		ldr	r3, .L300+4
 6173 000c 1F4A     		ldr	r2, .L300+8
 6174 000e 9A60     		str	r2, [r3, #8]
1669:bluetooth_rxtx.c **** 	le.crc_init_reversed = 0xAAAAAA;
 6175              		.loc 1 1669 0
 6176 0010 1D4B     		ldr	r3, .L300+4
 6177 0012 1F4A     		ldr	r2, .L300+12
 6178 0014 DA60     		str	r2, [r3, #12]
1670:bluetooth_rxtx.c **** 	le.crc_verify = 1;
 6179              		.loc 1 1670 0
 6180 0016 1C4B     		ldr	r3, .L300+4
 6181 0018 0122     		movs	r2, #1
 6182 001a 1A61     		str	r2, [r3, #16]
1671:bluetooth_rxtx.c **** 	le.last_packet = 0;
 6183              		.loc 1 1671 0
 6184 001c 1A4B     		ldr	r3, .L300+4
 6185 001e 0022     		movs	r2, #0
 6186 0020 1A64     		str	r2, [r3, #64]
1672:bluetooth_rxtx.c **** 
1673:bluetooth_rxtx.c **** 	le.link_state = LINK_INACTIVE;
 6187              		.loc 1 1673 0
 6188 0022 194B     		ldr	r3, .L300+4
 6189 0024 0022     		movs	r2, #0
 6190 0026 1A75     		strb	r2, [r3, #20]
1674:bluetooth_rxtx.c **** 
1675:bluetooth_rxtx.c **** 	le.channel_idx = 0;
 6191              		.loc 1 1675 0
 6192 0028 174B     		ldr	r3, .L300+4
 6193 002a 0022     		movs	r2, #0
 6194 002c 5A75     		strb	r2, [r3, #21]
1676:bluetooth_rxtx.c **** 	le.channel_increment = 0;
 6195              		.loc 1 1676 0
 6196 002e 164B     		ldr	r3, .L300+4
 6197 0030 0022     		movs	r2, #0
 6198 0032 9A75     		strb	r2, [r3, #22]
1677:bluetooth_rxtx.c **** 
1678:bluetooth_rxtx.c **** 	le.conn_epoch = 0;
 6199              		.loc 1 1678 0
 6200 0034 144B     		ldr	r3, .L300+4
 6201 0036 0022     		movs	r2, #0
 6202 0038 9A61     		str	r2, [r3, #24]
1679:bluetooth_rxtx.c **** 	le.interval_timer = 0;
 6203              		.loc 1 1679 0
 6204 003a 134B     		ldr	r3, .L300+4
ARM GAS  /tmp/cczWrdyg.s 			page 138


 6205 003c 0022     		movs	r2, #0
 6206 003e 9A83     		strh	r2, [r3, #28]	@ movhi
1680:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6207              		.loc 1 1680 0
 6208 0040 114B     		ldr	r3, .L300+4
 6209 0042 0022     		movs	r2, #0
 6210 0044 DA83     		strh	r2, [r3, #30]	@ movhi
1681:bluetooth_rxtx.c **** 	le.conn_interval = 0;
 6211              		.loc 1 1681 0
 6212 0046 104B     		ldr	r3, .L300+4
 6213 0048 0022     		movs	r2, #0
 6214 004a DA83     		strh	r2, [r3, #30]	@ movhi
1682:bluetooth_rxtx.c **** 	le.conn_count = 0;
 6215              		.loc 1 1682 0
 6216 004c 0E4B     		ldr	r3, .L300+4
 6217 004e 0022     		movs	r2, #0
 6218 0050 1A84     		strh	r2, [r3, #32]	@ movhi
1683:bluetooth_rxtx.c **** 
1684:bluetooth_rxtx.c **** 	le.win_size = 0;
 6219              		.loc 1 1684 0
 6220 0052 0D4B     		ldr	r3, .L300+4
 6221 0054 0022     		movs	r2, #0
 6222 0056 83F82220 		strb	r2, [r3, #34]
1685:bluetooth_rxtx.c **** 	le.win_offset = 0;
 6223              		.loc 1 1685 0
 6224 005a 0B4B     		ldr	r3, .L300+4
 6225 005c 0022     		movs	r2, #0
 6226 005e 9A84     		strh	r2, [r3, #36]	@ movhi
1686:bluetooth_rxtx.c **** 
1687:bluetooth_rxtx.c **** 	le.update_pending = 0;
 6227              		.loc 1 1687 0
 6228 0060 094B     		ldr	r3, .L300+4
 6229 0062 0022     		movs	r2, #0
 6230 0064 9A62     		str	r2, [r3, #40]
1688:bluetooth_rxtx.c **** 	le.update_instant = 0;
 6231              		.loc 1 1688 0
 6232 0066 084B     		ldr	r3, .L300+4
 6233 0068 0022     		movs	r2, #0
 6234 006a 9A85     		strh	r2, [r3, #44]	@ movhi
1689:bluetooth_rxtx.c **** 	le.interval_update = 0;
 6235              		.loc 1 1689 0
 6236 006c 064B     		ldr	r3, .L300+4
 6237 006e 0022     		movs	r2, #0
 6238 0070 DA85     		strh	r2, [r3, #46]	@ movhi
1690:bluetooth_rxtx.c **** 	le.win_size_update = 0;
 6239              		.loc 1 1690 0
 6240 0072 054B     		ldr	r3, .L300+4
 6241 0074 0022     		movs	r2, #0
 6242 0076 83F83020 		strb	r2, [r3, #48]
1691:bluetooth_rxtx.c **** 	le.win_offset_update;
1692:bluetooth_rxtx.c **** 
1693:bluetooth_rxtx.c **** 	do_hop = 0;
 6243              		.loc 1 1693 0
 6244 007a 064B     		ldr	r3, .L300+16
 6245 007c 0022     		movs	r2, #0
 6246 007e 1A70     		strb	r2, [r3]
1694:bluetooth_rxtx.c **** }
ARM GAS  /tmp/cczWrdyg.s 			page 139


 6247              		.loc 1 1694 0
 6248 0080 80BD     		pop	{r7, pc}
 6249              	.L301:
 6250 0082 00BF     		.align	2
 6251              	.L300:
 6252 0084 D6BE898E 		.word	-1903575338
 6253 0088 00000000 		.word	le
 6254 008c 55555500 		.word	5592405
 6255 0090 AAAAAA00 		.word	11184810
 6256 0094 00000000 		.word	do_hop
 6257              		.cfi_endproc
 6258              	.LFE28:
 6260              		.section	.text.reset_le_promisc,"ax",%progbits
 6261              		.align	2
 6262              		.global	reset_le_promisc
 6263              		.thumb
 6264              		.thumb_func
 6266              	reset_le_promisc:
 6267              	.LFB29:
1695:bluetooth_rxtx.c **** 
1696:bluetooth_rxtx.c **** // reset LE Promisc state
1697:bluetooth_rxtx.c **** void reset_le_promisc(void) {
 6268              		.loc 1 1697 0
 6269              		.cfi_startproc
 6270              		@ args = 0, pretend = 0, frame = 0
 6271              		@ frame_needed = 1, uses_anonymous_args = 0
 6272 0000 80B5     		push	{r7, lr}
 6273              		.cfi_def_cfa_offset 8
 6274              		.cfi_offset 7, -8
 6275              		.cfi_offset 14, -4
 6276 0002 00AF     		add	r7, sp, #0
 6277              		.cfi_def_cfa_register 7
1698:bluetooth_rxtx.c **** 	memset(&le_promisc, 0, sizeof(le_promisc));
 6278              		.loc 1 1698 0
 6279 0004 0548     		ldr	r0, .L303
 6280 0006 0021     		movs	r1, #0
 6281 0008 4FF48472 		mov	r2, #264
 6282 000c FFF7FEFF 		bl	memset
1699:bluetooth_rxtx.c **** 	le_promisc.smallest_hop_interval = 0xffffffff;
 6283              		.loc 1 1699 0
 6284 0010 024B     		ldr	r3, .L303
 6285 0012 4FF0FF32 		mov	r2, #-1
 6286 0016 C3F80021 		str	r2, [r3, #256]
1700:bluetooth_rxtx.c **** }
 6287              		.loc 1 1700 0
 6288 001a 80BD     		pop	{r7, pc}
 6289              	.L304:
 6290              		.align	2
 6291              	.L303:
 6292 001c 00000000 		.word	le_promisc
 6293              		.cfi_endproc
 6294              	.LFE29:
 6296              		.section	.text.bt_generic_le,"ax",%progbits
 6297              		.align	2
 6298              		.global	bt_generic_le
 6299              		.thumb
 6300              		.thumb_func
ARM GAS  /tmp/cczWrdyg.s 			page 140


 6302              	bt_generic_le:
 6303              	.LFB30:
1701:bluetooth_rxtx.c **** 
1702:bluetooth_rxtx.c **** /* generic le mode */
1703:bluetooth_rxtx.c **** void bt_generic_le(u8 active_mode)
1704:bluetooth_rxtx.c **** {
 6304              		.loc 1 1704 0
 6305              		.cfi_startproc
 6306              		@ args = 0, pretend = 0, frame = 32
 6307              		@ frame_needed = 1, uses_anonymous_args = 0
 6308 0000 80B5     		push	{r7, lr}
 6309              		.cfi_def_cfa_offset 8
 6310              		.cfi_offset 7, -8
 6311              		.cfi_offset 14, -4
 6312 0002 88B0     		sub	sp, sp, #32
 6313              		.cfi_def_cfa_offset 40
 6314 0004 00AF     		add	r7, sp, #0
 6315              		.cfi_def_cfa_register 7
 6316 0006 0346     		mov	r3, r0
 6317 0008 FB71     		strb	r3, [r7, #7]
1705:bluetooth_rxtx.c **** 	u8 *tmp = NULL;
 6318              		.loc 1 1705 0
 6319 000a 0023     		movs	r3, #0
 6320 000c FB60     		str	r3, [r7, #12]
1706:bluetooth_rxtx.c **** 	u8 hold;
1707:bluetooth_rxtx.c **** 	int i, j;
1708:bluetooth_rxtx.c **** 	int8_t rssi, rssi_at_trigger;
1709:bluetooth_rxtx.c **** 
1710:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6321              		.loc 1 1710 0
 6322 000e A44B     		ldr	r3, .L333
 6323 0010 0122     		movs	r2, #1
 6324 0012 1A70     		strb	r2, [r3]
1711:bluetooth_rxtx.c **** 	mode = active_mode;
 6325              		.loc 1 1711 0
 6326 0014 A34A     		ldr	r2, .L333+4
 6327 0016 FB79     		ldrb	r3, [r7, #7]
 6328 0018 1370     		strb	r3, [r2]
1712:bluetooth_rxtx.c **** 
1713:bluetooth_rxtx.c **** 	reset_le();
 6329              		.loc 1 1713 0
 6330 001a FFF7FEFF 		bl	reset_le
1714:bluetooth_rxtx.c **** 
1715:bluetooth_rxtx.c **** 	// enable USB interrupts
1716:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6331              		.loc 1 1716 0
 6332 001e A24B     		ldr	r3, .L333+8
 6333 0020 4FF08072 		mov	r2, #16777216
 6334 0024 1A60     		str	r2, [r3]
1717:bluetooth_rxtx.c **** 
1718:bluetooth_rxtx.c **** 	RXLED_CLR;
 6335              		.loc 1 1718 0
 6336 0026 A14B     		ldr	r3, .L333+12
 6337 0028 1022     		movs	r2, #16
 6338 002a 1A60     		str	r2, [r3]
1719:bluetooth_rxtx.c **** 
1720:bluetooth_rxtx.c **** 	queue_init();
ARM GAS  /tmp/cczWrdyg.s 			page 141


 6339              		.loc 1 1720 0
 6340 002c FFF7FEFF 		bl	queue_init
1721:bluetooth_rxtx.c **** 	dio_ssp_init();
 6341              		.loc 1 1721 0
 6342 0030 FFF7FEFF 		bl	dio_ssp_init
1722:bluetooth_rxtx.c **** 	dma_init();
 6343              		.loc 1 1722 0
 6344 0034 FFF7FEFF 		bl	dma_init
1723:bluetooth_rxtx.c **** 	dio_ssp_start();
 6345              		.loc 1 1723 0
 6346 0038 FFF7FEFF 		bl	dio_ssp_start
1724:bluetooth_rxtx.c **** 	cc2400_rx();
 6347              		.loc 1 1724 0
 6348 003c FFF7FEFF 		bl	cc2400_rx
1725:bluetooth_rxtx.c **** 
1726:bluetooth_rxtx.c **** 	cs_trigger_enable();
 6349              		.loc 1 1726 0
 6350 0040 FFF7FEFF 		bl	cs_trigger_enable
1727:bluetooth_rxtx.c **** 
1728:bluetooth_rxtx.c **** 	hold = 0;
 6351              		.loc 1 1728 0
 6352 0044 0023     		movs	r3, #0
 6353 0046 FB77     		strb	r3, [r7, #31]
1729:bluetooth_rxtx.c **** 
1730:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6354              		.loc 1 1730 0
 6355 0048 15E1     		b	.L306
 6356              	.L332:
 6357              	.LBB3:
1731:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6358              		.loc 1 1731 0
 6359 004a 994B     		ldr	r3, .L333+16
 6360 004c 1B88     		ldrh	r3, [r3]	@ movhi
 6361 004e 9BB2     		uxth	r3, r3
 6362 0050 002B     		cmp	r3, #0
 6363 0052 24D0     		beq	.L307
1732:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6364              		.loc 1 1732 0
 6365 0054 6420     		movs	r0, #100
 6366 0056 FFF7FEFF 		bl	cc2400_strobe
1733:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6367              		.loc 1 1733 0
 6368 005a 00BF     		nop
 6369              	.L308:
 6370              		.loc 1 1733 0 is_stmt 0 discriminator 1
 6371 005c FFF7FEFF 		bl	cc2400_status
 6372 0060 0346     		mov	r3, r0
 6373 0062 03F00403 		and	r3, r3, #4
 6374 0066 002B     		cmp	r3, #0
 6375 0068 F8D1     		bne	.L308
1734:bluetooth_rxtx.c **** 
1735:bluetooth_rxtx.c **** 			/* Retune */
1736:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6376              		.loc 1 1736 0 is_stmt 1
 6377 006a 924B     		ldr	r3, .L333+20
 6378 006c 1B88     		ldrh	r3, [r3]	@ movhi
 6379 006e 9BB2     		uxth	r3, r3
ARM GAS  /tmp/cczWrdyg.s 			page 142


 6380 0070 013B     		subs	r3, r3, #1
 6381 0072 9BB2     		uxth	r3, r3
 6382 0074 0220     		movs	r0, #2
 6383 0076 1946     		mov	r1, r3
 6384 0078 FFF7FEFF 		bl	cc2400_set
1737:bluetooth_rxtx.c **** 
1738:bluetooth_rxtx.c **** 			/* Wait for lock */
1739:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6385              		.loc 1 1739 0
 6386 007c 6120     		movs	r0, #97
 6387 007e FFF7FEFF 		bl	cc2400_strobe
1740:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6388              		.loc 1 1740 0
 6389 0082 00BF     		nop
 6390              	.L309:
 6391              		.loc 1 1740 0 is_stmt 0 discriminator 1
 6392 0084 FFF7FEFF 		bl	cc2400_status
 6393 0088 0346     		mov	r3, r0
 6394 008a 03F00403 		and	r3, r3, #4
 6395 008e 002B     		cmp	r3, #0
 6396 0090 F8D0     		beq	.L309
1741:bluetooth_rxtx.c **** 
1742:bluetooth_rxtx.c **** 			/* RX mode */
1743:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6397              		.loc 1 1743 0 is_stmt 1
 6398 0092 6220     		movs	r0, #98
 6399 0094 FFF7FEFF 		bl	cc2400_strobe
1744:bluetooth_rxtx.c **** 
1745:bluetooth_rxtx.c **** 			requested_channel = 0;
 6400              		.loc 1 1745 0
 6401 0098 854B     		ldr	r3, .L333+16
 6402 009a 0022     		movs	r2, #0
 6403 009c 1A80     		strh	r2, [r3]	@ movhi
 6404              	.L307:
1746:bluetooth_rxtx.c **** 		}
1747:bluetooth_rxtx.c **** 
1748:bluetooth_rxtx.c **** 		if (do_hop) {
 6405              		.loc 1 1748 0
 6406 009e 864B     		ldr	r3, .L333+24
 6407 00a0 1B78     		ldrb	r3, [r3]
 6408 00a2 DBB2     		uxtb	r3, r3
 6409 00a4 002B     		cmp	r3, #0
 6410 00a6 02D0     		beq	.L310
1749:bluetooth_rxtx.c **** 			hop();
 6411              		.loc 1 1749 0
 6412 00a8 FFF7FEFF 		bl	hop
 6413 00ac 03E0     		b	.L311
 6414              	.L310:
1750:bluetooth_rxtx.c **** 		} else {
1751:bluetooth_rxtx.c **** 			TXLED_CLR;
 6415              		.loc 1 1751 0
 6416 00ae 7F4B     		ldr	r3, .L333+12
 6417 00b0 4FF48072 		mov	r2, #256
 6418 00b4 1A60     		str	r2, [r3]
 6419              	.L311:
1752:bluetooth_rxtx.c **** 		}
1753:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cczWrdyg.s 			page 143


1754:bluetooth_rxtx.c **** 		RXLED_CLR;
 6420              		.loc 1 1754 0
 6421 00b6 7D4B     		ldr	r3, .L333+12
 6422 00b8 1022     		movs	r2, #16
 6423 00ba 1A60     		str	r2, [r3]
1755:bluetooth_rxtx.c **** 
1756:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1757:bluetooth_rxtx.c **** 		rssi_reset();
 6424              		.loc 1 1757 0
 6425 00bc FFF7FEFF 		bl	rssi_reset
1758:bluetooth_rxtx.c **** 		rssi_at_trigger = INT8_MIN;
 6426              		.loc 1 1758 0
 6427 00c0 8023     		movs	r3, #128
 6428 00c2 BB74     		strb	r3, [r7, #18]
1759:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0))
 6429              		.loc 1 1759 0
 6430 00c4 22E0     		b	.L312
 6431              	.L315:
1760:bluetooth_rxtx.c **** 		{
1761:bluetooth_rxtx.c **** 			rssi = (int8_t)(cc2400_get(RSSI) >> 8);
 6432              		.loc 1 1761 0
 6433 00c6 0620     		movs	r0, #6
 6434 00c8 FFF7FEFF 		bl	cc2400_get
 6435 00cc 0346     		mov	r3, r0
 6436 00ce 1B0A     		lsrs	r3, r3, #8
 6437 00d0 9BB2     		uxth	r3, r3
 6438 00d2 FB74     		strb	r3, [r7, #19]
1762:bluetooth_rxtx.c **** 			if (cs_trigger && (rssi_at_trigger == INT8_MIN)) {
 6439              		.loc 1 1762 0
 6440 00d4 794B     		ldr	r3, .L333+28
 6441 00d6 1B78     		ldrb	r3, [r3]
 6442 00d8 DBB2     		uxtb	r3, r3
 6443 00da 002B     		cmp	r3, #0
 6444 00dc 11D0     		beq	.L313
 6445              		.loc 1 1762 0 is_stmt 0 discriminator 1
 6446 00de 97F91230 		ldrsb	r3, [r7, #18]
 6447 00e2 13F1800F 		cmn	r3, #128
 6448 00e6 0CD1     		bne	.L313
1763:bluetooth_rxtx.c **** 				rssi = MAX(rssi,(cs_threshold_cur+54));
 6449              		.loc 1 1763 0 is_stmt 1
 6450 00e8 754B     		ldr	r3, .L333+32
 6451 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6452 00ec 5BB2     		sxtb	r3, r3
 6453 00ee 03F13602 		add	r2, r3, #54
 6454 00f2 97F91330 		ldrsb	r3, [r7, #19]
 6455 00f6 9342     		cmp	r3, r2
 6456 00f8 B8BF     		it	lt
 6457 00fa 1346     		movlt	r3, r2
 6458 00fc FB74     		strb	r3, [r7, #19]
1764:bluetooth_rxtx.c **** 				rssi_at_trigger = rssi;
 6459              		.loc 1 1764 0
 6460 00fe FB7C     		ldrb	r3, [r7, #19]
 6461 0100 BB74     		strb	r3, [r7, #18]
 6462              	.L313:
1765:bluetooth_rxtx.c **** 			}
1766:bluetooth_rxtx.c **** 			rssi_add(rssi);
 6463              		.loc 1 1766 0
ARM GAS  /tmp/cczWrdyg.s 			page 144


 6464 0102 97F91330 		ldrsb	r3, [r7, #19]
 6465 0106 1846     		mov	r0, r3
 6466 0108 FFF7FEFF 		bl	rssi_add
 6467              	.L312:
1759:bluetooth_rxtx.c **** 		{
 6468              		.loc 1 1759 0
 6469 010c 6D4B     		ldr	r3, .L333+36
 6470 010e 1B68     		ldr	r3, [r3]
 6471 0110 002B     		cmp	r3, #0
 6472 0112 03D1     		bne	.L314
1759:bluetooth_rxtx.c **** 		{
 6473              		.loc 1 1759 0 is_stmt 0 discriminator 1
 6474 0114 6C4B     		ldr	r3, .L333+40
 6475 0116 1B68     		ldr	r3, [r3]
 6476 0118 002B     		cmp	r3, #0
 6477 011a D4D0     		beq	.L315
 6478              	.L314:
1767:bluetooth_rxtx.c **** 		}
1768:bluetooth_rxtx.c **** 
1769:bluetooth_rxtx.c **** 		/* Keep buffer swapping in sync with DMA. */
1770:bluetooth_rxtx.c **** 		if (rx_tc % 2) {
 6479              		.loc 1 1770 0 is_stmt 1
 6480 011c 694B     		ldr	r3, .L333+36
 6481 011e 1B68     		ldr	r3, [r3]
 6482 0120 03F00103 		and	r3, r3, #1
 6483 0124 002B     		cmp	r3, #0
 6484 0126 09D0     		beq	.L316
1771:bluetooth_rxtx.c **** 			tmp = active_rxbuf;
 6485              		.loc 1 1771 0
 6486 0128 684B     		ldr	r3, .L333+44
 6487 012a 1B68     		ldr	r3, [r3]
 6488 012c FB60     		str	r3, [r7, #12]
1772:bluetooth_rxtx.c **** 			active_rxbuf = idle_rxbuf;
 6489              		.loc 1 1772 0
 6490 012e 684B     		ldr	r3, .L333+48
 6491 0130 1B68     		ldr	r3, [r3]
 6492 0132 664A     		ldr	r2, .L333+44
 6493 0134 1360     		str	r3, [r2]
1773:bluetooth_rxtx.c **** 			idle_rxbuf = tmp;
 6494              		.loc 1 1773 0
 6495 0136 664A     		ldr	r2, .L333+48
 6496 0138 FB68     		ldr	r3, [r7, #12]
 6497 013a 1360     		str	r3, [r2]
 6498              	.L316:
1774:bluetooth_rxtx.c **** 		}
1775:bluetooth_rxtx.c **** 
1776:bluetooth_rxtx.c **** 		if (rx_err) {
 6499              		.loc 1 1776 0
 6500 013c 624B     		ldr	r3, .L333+40
 6501 013e 1B68     		ldr	r3, [r3]
 6502 0140 002B     		cmp	r3, #0
 6503 0142 07D0     		beq	.L317
1777:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6504              		.loc 1 1777 0
 6505 0144 634B     		ldr	r3, .L333+52
 6506 0146 1B78     		ldrb	r3, [r3]
 6507 0148 DBB2     		uxtb	r3, r3
ARM GAS  /tmp/cczWrdyg.s 			page 145


 6508 014a 43F00203 		orr	r3, r3, #2
 6509 014e DAB2     		uxtb	r2, r3
 6510 0150 604B     		ldr	r3, .L333+52
 6511 0152 1A70     		strb	r2, [r3]
 6512              	.L317:
1778:bluetooth_rxtx.c **** 		}
1779:bluetooth_rxtx.c **** 
1780:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1781:bluetooth_rxtx.c **** 		if (!rx_tc)
 6513              		.loc 1 1781 0
 6514 0154 5B4B     		ldr	r3, .L333+36
 6515 0156 1B68     		ldr	r3, [r3]
 6516 0158 002B     		cmp	r3, #0
 6517 015a 00D1     		bne	.L318
1782:bluetooth_rxtx.c **** 			goto rx_continue;
 6518              		.loc 1 1782 0
 6519 015c 85E0     		b	.L319
 6520              	.L318:
1783:bluetooth_rxtx.c **** 
1784:bluetooth_rxtx.c **** 		/* Missed a DMA trasfer? */
1785:bluetooth_rxtx.c **** 		if (rx_tc > 1)
 6521              		.loc 1 1785 0
 6522 015e 594B     		ldr	r3, .L333+36
 6523 0160 1B68     		ldr	r3, [r3]
 6524 0162 012B     		cmp	r3, #1
 6525 0164 07D9     		bls	.L320
1786:bluetooth_rxtx.c **** 			status |= DMA_OVERFLOW;
 6526              		.loc 1 1786 0
 6527 0166 5B4B     		ldr	r3, .L333+52
 6528 0168 1B78     		ldrb	r3, [r3]
 6529 016a DBB2     		uxtb	r3, r3
 6530 016c 43F00103 		orr	r3, r3, #1
 6531 0170 DAB2     		uxtb	r2, r3
 6532 0172 584B     		ldr	r3, .L333+52
 6533 0174 1A70     		strb	r2, [r3]
 6534              	.L320:
1787:bluetooth_rxtx.c **** 
1788:bluetooth_rxtx.c **** 		rssi_iir_update();
 6535              		.loc 1 1788 0
 6536 0176 FFF7FEFF 		bl	rssi_iir_update
1789:bluetooth_rxtx.c **** 
1790:bluetooth_rxtx.c **** 		/* Set squelch hold if there was either a CS trigger, squelch
1791:bluetooth_rxtx.c **** 		 * is disabled, or if the current rssi_max is above the same
1792:bluetooth_rxtx.c **** 		 * threshold. Currently, this is redundant, but allows for
1793:bluetooth_rxtx.c **** 		 * per-channel or other rssi triggers in the future. */
1794:bluetooth_rxtx.c **** 		if (cs_trigger || cs_no_squelch) {
 6537              		.loc 1 1794 0
 6538 017a 504B     		ldr	r3, .L333+28
 6539 017c 1B78     		ldrb	r3, [r3]
 6540 017e DBB2     		uxtb	r3, r3
 6541 0180 002B     		cmp	r3, #0
 6542 0182 03D1     		bne	.L321
 6543              		.loc 1 1794 0 is_stmt 0 discriminator 1
 6544 0184 544B     		ldr	r3, .L333+56
 6545 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6546 0188 002B     		cmp	r3, #0
 6547 018a 0CD0     		beq	.L322
ARM GAS  /tmp/cczWrdyg.s 			page 146


 6548              	.L321:
1795:bluetooth_rxtx.c **** 			status |= CS_TRIGGER;
 6549              		.loc 1 1795 0 is_stmt 1
 6550 018c 514B     		ldr	r3, .L333+52
 6551 018e 1B78     		ldrb	r3, [r3]
 6552 0190 DBB2     		uxtb	r3, r3
 6553 0192 43F00803 		orr	r3, r3, #8
 6554 0196 DAB2     		uxtb	r2, r3
 6555 0198 4E4B     		ldr	r3, .L333+52
 6556 019a 1A70     		strb	r2, [r3]
1796:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6557              		.loc 1 1796 0
 6558 019c 0223     		movs	r3, #2
 6559 019e FB77     		strb	r3, [r7, #31]
1797:bluetooth_rxtx.c **** 			cs_trigger = 0;
 6560              		.loc 1 1797 0
 6561 01a0 464B     		ldr	r3, .L333+28
 6562 01a2 0022     		movs	r2, #0
 6563 01a4 1A70     		strb	r2, [r3]
 6564              	.L322:
1798:bluetooth_rxtx.c **** 		}
1799:bluetooth_rxtx.c **** 
1800:bluetooth_rxtx.c **** 		if (rssi_max >= (cs_threshold_cur + 54)) {
 6565              		.loc 1 1800 0
 6566 01a6 4D4B     		ldr	r3, .L333+60
 6567 01a8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6568 01aa 5AB2     		sxtb	r2, r3
 6569 01ac 444B     		ldr	r3, .L333+32
 6570 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6571 01b0 5BB2     		sxtb	r3, r3
 6572 01b2 3633     		adds	r3, r3, #54
 6573 01b4 9A42     		cmp	r2, r3
 6574 01b6 09DB     		blt	.L323
1801:bluetooth_rxtx.c **** 			status |= RSSI_TRIGGER;
 6575              		.loc 1 1801 0
 6576 01b8 464B     		ldr	r3, .L333+52
 6577 01ba 1B78     		ldrb	r3, [r3]
 6578 01bc DBB2     		uxtb	r3, r3
 6579 01be 43F01003 		orr	r3, r3, #16
 6580 01c2 DAB2     		uxtb	r2, r3
 6581 01c4 434B     		ldr	r3, .L333+52
 6582 01c6 1A70     		strb	r2, [r3]
1802:bluetooth_rxtx.c **** 			hold = CS_HOLD_TIME;
 6583              		.loc 1 1802 0
 6584 01c8 0223     		movs	r3, #2
 6585 01ca FB77     		strb	r3, [r7, #31]
 6586              	.L323:
1803:bluetooth_rxtx.c **** 		}
1804:bluetooth_rxtx.c **** 
1805:bluetooth_rxtx.c **** 		/* Send a packet once in a while (6.25 Hz) to keep
1806:bluetooth_rxtx.c **** 		 * host USB reads from timing out. */
1807:bluetooth_rxtx.c **** 		if (keepalive_trigger) {
 6587              		.loc 1 1807 0
 6588 01cc 444B     		ldr	r3, .L333+64
 6589 01ce 1B78     		ldrb	r3, [r3]
 6590 01d0 DBB2     		uxtb	r3, r3
 6591 01d2 002B     		cmp	r3, #0
ARM GAS  /tmp/cczWrdyg.s 			page 147


 6592 01d4 07D0     		beq	.L324
1808:bluetooth_rxtx.c **** 			if (hold == 0)
 6593              		.loc 1 1808 0
 6594 01d6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6595 01d8 002B     		cmp	r3, #0
 6596 01da 01D1     		bne	.L325
1809:bluetooth_rxtx.c **** 				hold = 1;
 6597              		.loc 1 1809 0
 6598 01dc 0123     		movs	r3, #1
 6599 01de FB77     		strb	r3, [r7, #31]
 6600              	.L325:
1810:bluetooth_rxtx.c **** 			keepalive_trigger = 0;
 6601              		.loc 1 1810 0
 6602 01e0 3F4B     		ldr	r3, .L333+64
 6603 01e2 0022     		movs	r2, #0
 6604 01e4 1A70     		strb	r2, [r3]
 6605              	.L324:
1811:bluetooth_rxtx.c **** 		}
1812:bluetooth_rxtx.c **** 
1813:bluetooth_rxtx.c **** 		/* Hold expired? Ignore data. */
1814:bluetooth_rxtx.c **** 		if (hold == 0) {
 6606              		.loc 1 1814 0
 6607 01e6 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6608 01e8 002B     		cmp	r3, #0
 6609 01ea 00D1     		bne	.L326
1815:bluetooth_rxtx.c **** 			goto rx_continue;
 6610              		.loc 1 1815 0
 6611 01ec 3DE0     		b	.L319
 6612              	.L326:
1816:bluetooth_rxtx.c **** 		}
1817:bluetooth_rxtx.c **** 		hold--;
 6613              		.loc 1 1817 0
 6614 01ee FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 6615 01f0 013B     		subs	r3, r3, #1
 6616 01f2 FB77     		strb	r3, [r7, #31]
1818:bluetooth_rxtx.c **** 
1819:bluetooth_rxtx.c **** 		// copy the previously unpacked symbols to the front of the buffer
1820:bluetooth_rxtx.c **** 		memcpy(unpacked, unpacked + DMA_SIZE*8, DMA_SIZE*8);
 6617              		.loc 1 1820 0
 6618 01f4 3B48     		ldr	r0, .L333+68
 6619 01f6 3C49     		ldr	r1, .L333+72
 6620 01f8 4FF4C872 		mov	r2, #400
 6621 01fc FFF7FEFF 		bl	memcpy
1821:bluetooth_rxtx.c **** 
1822:bluetooth_rxtx.c **** 		// unpack the new packet to the end of the buffer
1823:bluetooth_rxtx.c **** 		for (i = 0; i < DMA_SIZE; ++i) {
 6622              		.loc 1 1823 0
 6623 0200 0023     		movs	r3, #0
 6624 0202 BB61     		str	r3, [r7, #24]
 6625 0204 25E0     		b	.L327
 6626              	.L330:
1824:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
1825:bluetooth_rxtx.c **** 			for (j = 0; j < 8; ++j) {
 6627              		.loc 1 1825 0
 6628 0206 0023     		movs	r3, #0
 6629 0208 7B61     		str	r3, [r7, #20]
 6630 020a 1CE0     		b	.L328
ARM GAS  /tmp/cczWrdyg.s 			page 148


 6631              	.L329:
1826:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6632              		.loc 1 1826 0 discriminator 3
 6633 020c BB69     		ldr	r3, [r7, #24]
 6634 020e 3233     		adds	r3, r3, #50
 6635 0210 DA00     		lsls	r2, r3, #3
 6636 0212 7B69     		ldr	r3, [r7, #20]
 6637 0214 1344     		add	r3, r3, r2
 6638 0216 2E4A     		ldr	r2, .L333+48
 6639 0218 1168     		ldr	r1, [r2]
 6640 021a BA69     		ldr	r2, [r7, #24]
 6641 021c 0A44     		add	r2, r2, r1
 6642 021e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6643 0220 D209     		lsrs	r2, r2, #7
 6644 0222 D1B2     		uxtb	r1, r2
 6645 0224 2F4A     		ldr	r2, .L333+68
 6646 0226 D154     		strb	r1, [r2, r3]
1827:bluetooth_rxtx.c **** 				idle_rxbuf[i] <<= 1;
 6647              		.loc 1 1827 0 discriminator 3
 6648 0228 294B     		ldr	r3, .L333+48
 6649 022a 1A68     		ldr	r2, [r3]
 6650 022c BB69     		ldr	r3, [r7, #24]
 6651 022e 1344     		add	r3, r3, r2
 6652 0230 274A     		ldr	r2, .L333+48
 6653 0232 1168     		ldr	r1, [r2]
 6654 0234 BA69     		ldr	r2, [r7, #24]
 6655 0236 0A44     		add	r2, r2, r1
 6656 0238 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 6657 023a 5200     		lsls	r2, r2, #1
 6658 023c D2B2     		uxtb	r2, r2
 6659 023e 1A70     		strb	r2, [r3]
1825:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6660              		.loc 1 1825 0 discriminator 3
 6661 0240 7B69     		ldr	r3, [r7, #20]
 6662 0242 0133     		adds	r3, r3, #1
 6663 0244 7B61     		str	r3, [r7, #20]
 6664              	.L328:
1825:bluetooth_rxtx.c **** 				unpacked[DMA_SIZE*8 + i * 8 + j] = (idle_rxbuf[i] & 0x80) >> 7;
 6665              		.loc 1 1825 0 is_stmt 0 discriminator 1
 6666 0246 7B69     		ldr	r3, [r7, #20]
 6667 0248 072B     		cmp	r3, #7
 6668 024a DFDD     		ble	.L329
1823:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6669              		.loc 1 1823 0 is_stmt 1 discriminator 2
 6670 024c BB69     		ldr	r3, [r7, #24]
 6671 024e 0133     		adds	r3, r3, #1
 6672 0250 BB61     		str	r3, [r7, #24]
 6673              	.L327:
1823:bluetooth_rxtx.c **** 			/* output one byte for each received symbol (0x00 or 0x01) */
 6674              		.loc 1 1823 0 is_stmt 0 discriminator 1
 6675 0252 BB69     		ldr	r3, [r7, #24]
 6676 0254 312B     		cmp	r3, #49
 6677 0256 D6DD     		ble	.L330
1828:bluetooth_rxtx.c **** 			}
1829:bluetooth_rxtx.c **** 		}
1830:bluetooth_rxtx.c **** 
1831:bluetooth_rxtx.c **** 		int ret = data_cb(unpacked);
ARM GAS  /tmp/cczWrdyg.s 			page 149


 6678              		.loc 1 1831 0 is_stmt 1
 6679 0258 244B     		ldr	r3, .L333+76
 6680 025a 1B68     		ldr	r3, [r3]
 6681 025c 2148     		ldr	r0, .L333+68
 6682 025e 9847     		blx	r3
 6683 0260 B860     		str	r0, [r7, #8]
1832:bluetooth_rxtx.c **** 		if (!ret) break;
 6684              		.loc 1 1832 0
 6685 0262 BB68     		ldr	r3, [r7, #8]
 6686 0264 002B     		cmp	r3, #0
 6687 0266 00D1     		bne	.L319
 6688 0268 0CE0     		b	.L331
 6689              	.L319:
1833:bluetooth_rxtx.c **** 
1834:bluetooth_rxtx.c **** 	rx_continue:
1835:bluetooth_rxtx.c **** 		rx_tc = 0;
 6690              		.loc 1 1835 0
 6691 026a 164B     		ldr	r3, .L333+36
 6692 026c 0022     		movs	r2, #0
 6693 026e 1A60     		str	r2, [r3]
1836:bluetooth_rxtx.c **** 		rx_err = 0;
 6694              		.loc 1 1836 0
 6695 0270 154B     		ldr	r3, .L333+40
 6696 0272 0022     		movs	r2, #0
 6697 0274 1A60     		str	r2, [r3]
 6698              	.L306:
 6699              	.LBE3:
1730:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6700              		.loc 1 1730 0
 6701 0276 1E4B     		ldr	r3, .L333+80
 6702 0278 1B78     		ldrb	r3, [r3]
 6703 027a DBB2     		uxtb	r3, r3
 6704 027c FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6705 027e 9A42     		cmp	r2, r3
 6706 0280 3FF4E3AE 		beq	.L332
 6707              	.L331:
1837:bluetooth_rxtx.c **** 	}
1838:bluetooth_rxtx.c **** 
1839:bluetooth_rxtx.c **** 	// disable USB interrupts
1840:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 6708              		.loc 1 1840 0
 6709 0284 1B4B     		ldr	r3, .L333+84
 6710 0286 4FF08072 		mov	r2, #16777216
 6711 028a 1A60     		str	r2, [r3]
1841:bluetooth_rxtx.c **** 
1842:bluetooth_rxtx.c **** 	// reset the radio completely
1843:bluetooth_rxtx.c **** 	cc2400_idle();
 6712              		.loc 1 1843 0
 6713 028c FFF7FEFF 		bl	cc2400_idle
1844:bluetooth_rxtx.c **** 	dio_ssp_stop();
 6714              		.loc 1 1844 0
 6715 0290 FFF7FEFF 		bl	dio_ssp_stop
1845:bluetooth_rxtx.c **** 	cs_trigger_disable();
 6716              		.loc 1 1845 0
 6717 0294 FFF7FEFF 		bl	cs_trigger_disable
1846:bluetooth_rxtx.c **** }
 6718              		.loc 1 1846 0
ARM GAS  /tmp/cczWrdyg.s 			page 150


 6719 0298 2037     		adds	r7, r7, #32
 6720              		.cfi_def_cfa_offset 8
 6721 029a BD46     		mov	sp, r7
 6722              		.cfi_def_cfa_register 13
 6723              		@ sp needed
 6724 029c 80BD     		pop	{r7, pc}
 6725              	.L334:
 6726 029e 00BF     		.align	2
 6727              	.L333:
 6728 02a0 00000000 		.word	modulation
 6729 02a4 00000000 		.word	mode
 6730 02a8 00E100E0 		.word	-536813312
 6731 02ac 3CC00920 		.word	537509948
 6732 02b0 00000000 		.word	requested_channel
 6733 02b4 00000000 		.word	channel
 6734 02b8 00000000 		.word	do_hop
 6735 02bc 00000000 		.word	cs_trigger
 6736 02c0 00000000 		.word	cs_threshold_cur
 6737 02c4 00000000 		.word	rx_tc
 6738 02c8 00000000 		.word	rx_err
 6739 02cc 00000000 		.word	active_rxbuf
 6740 02d0 00000000 		.word	idle_rxbuf
 6741 02d4 00000000 		.word	status
 6742 02d8 00000000 		.word	cs_no_squelch
 6743 02dc 00000000 		.word	rssi_max
 6744 02e0 00000000 		.word	keepalive_trigger
 6745 02e4 00000000 		.word	unpacked
 6746 02e8 90010000 		.word	unpacked+400
 6747 02ec 00000000 		.word	data_cb
 6748 02f0 00000000 		.word	requested_mode
 6749 02f4 80E100E0 		.word	-536813184
 6750              		.cfi_endproc
 6751              	.LFE30:
 6753              		.section	.text.bt_le_sync,"ax",%progbits
 6754              		.align	2
 6755              		.global	bt_le_sync
 6756              		.thumb
 6757              		.thumb_func
 6759              	bt_le_sync:
 6760              	.LFB31:
1847:bluetooth_rxtx.c **** 
1848:bluetooth_rxtx.c **** 
1849:bluetooth_rxtx.c **** void bt_le_sync(u8 active_mode)
1850:bluetooth_rxtx.c **** {
 6761              		.loc 1 1850 0
 6762              		.cfi_startproc
 6763              		@ args = 0, pretend = 0, frame = 104
 6764              		@ frame_needed = 1, uses_anonymous_args = 0
 6765 0000 90B5     		push	{r4, r7, lr}
 6766              		.cfi_def_cfa_offset 12
 6767              		.cfi_offset 4, -12
 6768              		.cfi_offset 7, -8
 6769              		.cfi_offset 14, -4
 6770 0002 9BB0     		sub	sp, sp, #108
 6771              		.cfi_def_cfa_offset 120
 6772 0004 00AF     		add	r7, sp, #0
 6773              		.cfi_def_cfa_register 7
ARM GAS  /tmp/cczWrdyg.s 			page 151


 6774 0006 0346     		mov	r3, r0
 6775 0008 FB71     		strb	r3, [r7, #7]
1851:bluetooth_rxtx.c **** 	int i;
1852:bluetooth_rxtx.c **** 	int8_t rssi;
1853:bluetooth_rxtx.c **** 	static int restart_jamming = 0;
1854:bluetooth_rxtx.c **** 
1855:bluetooth_rxtx.c **** 	modulation = MOD_BT_LOW_ENERGY;
 6776              		.loc 1 1855 0
 6777 000a 874B     		ldr	r3, .L381
 6778 000c 0122     		movs	r2, #1
 6779 000e 1A70     		strb	r2, [r3]
1856:bluetooth_rxtx.c **** 	mode = active_mode;
 6780              		.loc 1 1856 0
 6781 0010 864A     		ldr	r2, .L381+4
 6782 0012 FB79     		ldrb	r3, [r7, #7]
 6783 0014 1370     		strb	r3, [r2]
1857:bluetooth_rxtx.c **** 
1858:bluetooth_rxtx.c **** 	le.link_state = LINK_LISTENING;
 6784              		.loc 1 1858 0
 6785 0016 864B     		ldr	r3, .L381+8
 6786 0018 0122     		movs	r2, #1
 6787 001a 1A75     		strb	r2, [r3, #20]
1859:bluetooth_rxtx.c **** 
1860:bluetooth_rxtx.c **** 	// enable USB interrupts
1861:bluetooth_rxtx.c **** 	ISER0 = ISER0_ISE_USB;
 6788              		.loc 1 1861 0
 6789 001c 854B     		ldr	r3, .L381+12
 6790 001e 4FF08072 		mov	r2, #16777216
 6791 0022 1A60     		str	r2, [r3]
1862:bluetooth_rxtx.c **** 
1863:bluetooth_rxtx.c **** 	RXLED_CLR;
 6792              		.loc 1 1863 0
 6793 0024 844B     		ldr	r3, .L381+16
 6794 0026 1022     		movs	r2, #16
 6795 0028 1A60     		str	r2, [r3]
1864:bluetooth_rxtx.c **** 
1865:bluetooth_rxtx.c **** 	queue_init();
 6796              		.loc 1 1865 0
 6797 002a FFF7FEFF 		bl	queue_init
1866:bluetooth_rxtx.c **** 	dio_ssp_init();
 6798              		.loc 1 1866 0
 6799 002e FFF7FEFF 		bl	dio_ssp_init
1867:bluetooth_rxtx.c **** 	dma_init_le();
 6800              		.loc 1 1867 0
 6801 0032 FFF7FEFF 		bl	dma_init_le
1868:bluetooth_rxtx.c **** 	dio_ssp_start();
 6802              		.loc 1 1868 0
 6803 0036 FFF7FEFF 		bl	dio_ssp_start
1869:bluetooth_rxtx.c **** 
1870:bluetooth_rxtx.c **** 	cc2400_rx_sync(rbit(le.access_address)); // bit-reversed access address
 6804              		.loc 1 1870 0
 6805 003a 7D4B     		ldr	r3, .L381+8
 6806 003c 1B68     		ldr	r3, [r3]
 6807 003e 1846     		mov	r0, r3
 6808 0040 FFF7FEFF 		bl	rbit
 6809 0044 0346     		mov	r3, r0
 6810 0046 1846     		mov	r0, r3
ARM GAS  /tmp/cczWrdyg.s 			page 152


 6811 0048 FFF7FEFF 		bl	cc2400_rx_sync
1871:bluetooth_rxtx.c **** 
1872:bluetooth_rxtx.c **** 	while (requested_mode == active_mode) {
 6812              		.loc 1 1872 0
 6813 004c 48E2     		b	.L336
 6814              	.L380:
 6815              	.LBB4:
1873:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 6816              		.loc 1 1873 0
 6817 004e 7B4B     		ldr	r3, .L381+20
 6818 0050 1B88     		ldrh	r3, [r3]	@ movhi
 6819 0052 9BB2     		uxth	r3, r3
 6820 0054 002B     		cmp	r3, #0
 6821 0056 29D0     		beq	.L337
1874:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 6822              		.loc 1 1874 0
 6823 0058 6420     		movs	r0, #100
 6824 005a FFF7FEFF 		bl	cc2400_strobe
1875:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK)); // need to wait for unlock?
 6825              		.loc 1 1875 0
 6826 005e 00BF     		nop
 6827              	.L338:
 6828              		.loc 1 1875 0 is_stmt 0 discriminator 1
 6829 0060 FFF7FEFF 		bl	cc2400_status
 6830 0064 0346     		mov	r3, r0
 6831 0066 03F00403 		and	r3, r3, #4
 6832 006a 002B     		cmp	r3, #0
 6833 006c F8D1     		bne	.L338
1876:bluetooth_rxtx.c **** 
1877:bluetooth_rxtx.c **** 			/* Retune */
1878:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, channel - 1);
 6834              		.loc 1 1878 0 is_stmt 1
 6835 006e 744B     		ldr	r3, .L381+24
 6836 0070 1B88     		ldrh	r3, [r3]	@ movhi
 6837 0072 9BB2     		uxth	r3, r3
 6838 0074 013B     		subs	r3, r3, #1
 6839 0076 9BB2     		uxth	r3, r3
 6840 0078 0220     		movs	r0, #2
 6841 007a 1946     		mov	r1, r3
 6842 007c FFF7FEFF 		bl	cc2400_set
1879:bluetooth_rxtx.c **** 
1880:bluetooth_rxtx.c **** 			/* Wait for lock */
1881:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 6843              		.loc 1 1881 0
 6844 0080 6120     		movs	r0, #97
 6845 0082 FFF7FEFF 		bl	cc2400_strobe
1882:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 6846              		.loc 1 1882 0
 6847 0086 00BF     		nop
 6848              	.L339:
 6849              		.loc 1 1882 0 is_stmt 0 discriminator 1
 6850 0088 FFF7FEFF 		bl	cc2400_status
 6851 008c 0346     		mov	r3, r0
 6852 008e 03F00403 		and	r3, r3, #4
 6853 0092 002B     		cmp	r3, #0
 6854 0094 F8D0     		beq	.L339
1883:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cczWrdyg.s 			page 153


1884:bluetooth_rxtx.c **** 			/* RX mode */
1885:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 6855              		.loc 1 1885 0 is_stmt 1
 6856 0096 6220     		movs	r0, #98
 6857 0098 FFF7FEFF 		bl	cc2400_strobe
1886:bluetooth_rxtx.c **** 
1887:bluetooth_rxtx.c **** 			saved_request = requested_channel;
 6858              		.loc 1 1887 0
 6859 009c 674B     		ldr	r3, .L381+20
 6860 009e 1B88     		ldrh	r3, [r3]	@ movhi
 6861 00a0 9AB2     		uxth	r2, r3
 6862 00a2 684B     		ldr	r3, .L381+28
 6863 00a4 1A80     		strh	r2, [r3]	@ movhi
1888:bluetooth_rxtx.c **** 			requested_channel = 0;
 6864              		.loc 1 1888 0
 6865 00a6 654B     		ldr	r3, .L381+20
 6866 00a8 0022     		movs	r2, #0
 6867 00aa 1A80     		strh	r2, [r3]	@ movhi
 6868              	.L337:
1889:bluetooth_rxtx.c **** 		}
1890:bluetooth_rxtx.c **** 
1891:bluetooth_rxtx.c **** 		RXLED_CLR;
 6869              		.loc 1 1891 0
 6870 00ac 624B     		ldr	r3, .L381+16
 6871 00ae 1022     		movs	r2, #16
 6872 00b0 1A60     		str	r2, [r3]
1892:bluetooth_rxtx.c **** 
1893:bluetooth_rxtx.c **** 		/* Wait for DMA. Meanwhile keep track of RSSI. */
1894:bluetooth_rxtx.c **** 		rssi_reset();
 6873              		.loc 1 1894 0
 6874 00b2 FFF7FEFF 		bl	rssi_reset
1895:bluetooth_rxtx.c **** 		while ((rx_tc == 0) && (rx_err == 0) && (do_hop == 0) && requested_mode == active_mode)
 6875              		.loc 1 1895 0
 6876 00b6 00BF     		nop
 6877              	.L341:
 6878              		.loc 1 1895 0 is_stmt 0 discriminator 4
 6879 00b8 634B     		ldr	r3, .L381+32
 6880 00ba 1B68     		ldr	r3, [r3]
 6881 00bc 002B     		cmp	r3, #0
 6882 00be 0ED1     		bne	.L340
 6883              		.loc 1 1895 0 discriminator 1
 6884 00c0 624B     		ldr	r3, .L381+36
 6885 00c2 1B68     		ldr	r3, [r3]
 6886 00c4 002B     		cmp	r3, #0
 6887 00c6 0AD1     		bne	.L340
 6888              		.loc 1 1895 0 discriminator 2
 6889 00c8 614B     		ldr	r3, .L381+40
 6890 00ca 1B78     		ldrb	r3, [r3]
 6891 00cc DBB2     		uxtb	r3, r3
 6892 00ce 002B     		cmp	r3, #0
 6893 00d0 05D1     		bne	.L340
 6894              		.loc 1 1895 0 discriminator 3
 6895 00d2 604B     		ldr	r3, .L381+44
 6896 00d4 1B78     		ldrb	r3, [r3]
 6897 00d6 DBB2     		uxtb	r3, r3
 6898 00d8 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6899 00da 9A42     		cmp	r2, r3
ARM GAS  /tmp/cczWrdyg.s 			page 154


 6900 00dc ECD0     		beq	.L341
 6901              	.L340:
1896:bluetooth_rxtx.c **** 			;
1897:bluetooth_rxtx.c **** 
1898:bluetooth_rxtx.c **** 		if (requested_mode != active_mode) {
 6902              		.loc 1 1898 0 is_stmt 1
 6903 00de 5D4B     		ldr	r3, .L381+44
 6904 00e0 1B78     		ldrb	r3, [r3]
 6905 00e2 DBB2     		uxtb	r3, r3
 6906 00e4 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 6907 00e6 9A42     		cmp	r2, r3
 6908 00e8 00D0     		beq	.L342
1899:bluetooth_rxtx.c **** 			goto cleanup;
 6909              		.loc 1 1899 0
 6910 00ea 00E2     		b	.L379
 6911              	.L342:
1900:bluetooth_rxtx.c **** 		}
1901:bluetooth_rxtx.c **** 
1902:bluetooth_rxtx.c **** 		if (rx_err) {
 6912              		.loc 1 1902 0
 6913 00ec 574B     		ldr	r3, .L381+36
 6914 00ee 1B68     		ldr	r3, [r3]
 6915 00f0 002B     		cmp	r3, #0
 6916 00f2 07D0     		beq	.L344
1903:bluetooth_rxtx.c **** 			status |= DMA_ERROR;
 6917              		.loc 1 1903 0
 6918 00f4 584B     		ldr	r3, .L381+48
 6919 00f6 1B78     		ldrb	r3, [r3]
 6920 00f8 DBB2     		uxtb	r3, r3
 6921 00fa 43F00203 		orr	r3, r3, #2
 6922 00fe DAB2     		uxtb	r2, r3
 6923 0100 554B     		ldr	r3, .L381+48
 6924 0102 1A70     		strb	r2, [r3]
 6925              	.L344:
1904:bluetooth_rxtx.c **** 		}
1905:bluetooth_rxtx.c **** 
1906:bluetooth_rxtx.c **** 		if (do_hop)
 6926              		.loc 1 1906 0
 6927 0104 524B     		ldr	r3, .L381+40
 6928 0106 1B78     		ldrb	r3, [r3]
 6929 0108 DBB2     		uxtb	r3, r3
 6930 010a 002B     		cmp	r3, #0
 6931 010c 00D0     		beq	.L345
1907:bluetooth_rxtx.c **** 			goto rx_flush;
 6932              		.loc 1 1907 0
 6933 010e 2BE1     		b	.L346
 6934              	.L345:
1908:bluetooth_rxtx.c **** 
1909:bluetooth_rxtx.c **** 		/* No DMA transfer? */
1910:bluetooth_rxtx.c **** 		if (!rx_tc)
 6935              		.loc 1 1910 0
 6936 0110 4D4B     		ldr	r3, .L381+32
 6937 0112 1B68     		ldr	r3, [r3]
 6938 0114 002B     		cmp	r3, #0
 6939 0116 00D1     		bne	.L347
 6940 0118 E2E1     		b	.L336
 6941              	.L347:
ARM GAS  /tmp/cczWrdyg.s 			page 155


1911:bluetooth_rxtx.c **** 			continue;
1912:bluetooth_rxtx.c **** 
1913:bluetooth_rxtx.c **** 		/////////////////////
1914:bluetooth_rxtx.c **** 		// process the packet
1915:bluetooth_rxtx.c **** 
1916:bluetooth_rxtx.c **** 		uint32_t packet[48/4+1];
1917:bluetooth_rxtx.c **** 		u8 *p = (u8 *)packet;
 6942              		.loc 1 1917 0
 6943 011a 07F10803 		add	r3, r7, #8
 6944 011e FB65     		str	r3, [r7, #92]
1918:bluetooth_rxtx.c **** 		packet[0] = le.access_address;
 6945              		.loc 1 1918 0
 6946 0120 434B     		ldr	r3, .L381+8
 6947 0122 1B68     		ldr	r3, [r3]
 6948 0124 BB60     		str	r3, [r7, #8]
1919:bluetooth_rxtx.c **** 
1920:bluetooth_rxtx.c **** 		const uint32_t *whit = whitening_word[btle_channel_index(channel-2402)];
 6949              		.loc 1 1920 0
 6950 0126 464B     		ldr	r3, .L381+24
 6951 0128 1B88     		ldrh	r3, [r3]	@ movhi
 6952 012a 9BB2     		uxth	r3, r3
 6953 012c DBB2     		uxtb	r3, r3
 6954 012e 623B     		subs	r3, r3, #98
 6955 0130 DBB2     		uxtb	r3, r3
 6956 0132 1846     		mov	r0, r3
 6957 0134 FFF7FEFF 		bl	btle_channel_index
 6958 0138 0346     		mov	r3, r0
 6959 013a 1A46     		mov	r2, r3
 6960 013c 1346     		mov	r3, r2
 6961 013e 5B00     		lsls	r3, r3, #1
 6962 0140 1344     		add	r3, r3, r2
 6963 0142 1B01     		lsls	r3, r3, #4
 6964 0144 454A     		ldr	r2, .L381+52
 6965 0146 1344     		add	r3, r3, r2
 6966 0148 BB65     		str	r3, [r7, #88]
1921:bluetooth_rxtx.c **** 		for (i = 0; i < 4; i+= 4) {
 6967              		.loc 1 1921 0
 6968 014a 0023     		movs	r3, #0
 6969 014c 7B66     		str	r3, [r7, #100]
 6970 014e 34E0     		b	.L348
 6971              	.L351:
 6972              	.LBB5:
1922:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 6973              		.loc 1 1922 0 discriminator 3
 6974 0150 434A     		ldr	r2, .L381+56
 6975 0152 7B6E     		ldr	r3, [r7, #100]
 6976 0154 1344     		add	r3, r3, r2
 6977 0156 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 6978 0158 1A06     		lsls	r2, r3, #24
1923:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6979              		.loc 1 1923 0 discriminator 3
 6980 015a 7B6E     		ldr	r3, [r7, #100]
 6981 015c 0133     		adds	r3, r3, #1
 6982 015e 4049     		ldr	r1, .L381+56
 6983 0160 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6984 0162 1B04     		lsls	r3, r3, #16
 6985 0164 1A43     		orrs	r2, r2, r3
ARM GAS  /tmp/cczWrdyg.s 			page 156


1924:bluetooth_rxtx.c **** 					   | rxbuf1[i+2] << 8
 6986              		.loc 1 1924 0 discriminator 3
 6987 0166 7B6E     		ldr	r3, [r7, #100]
 6988 0168 0233     		adds	r3, r3, #2
 6989 016a 3D49     		ldr	r1, .L381+56
 6990 016c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 6991 016e 1B02     		lsls	r3, r3, #8
 6992 0170 1343     		orrs	r3, r3, r2
1925:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 6993              		.loc 1 1925 0 discriminator 3
 6994 0172 7A6E     		ldr	r2, [r7, #100]
 6995 0174 0332     		adds	r2, r2, #3
 6996 0176 3A49     		ldr	r1, .L381+56
 6997 0178 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 6998 017a 1343     		orrs	r3, r3, r2
1922:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 6999              		.loc 1 1922 0 discriminator 3
 7000 017c 7B65     		str	r3, [r7, #84]
1926:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7001              		.loc 1 1926 0 discriminator 3
 7002 017e 7B6E     		ldr	r3, [r7, #100]
 7003 0180 002B     		cmp	r3, #0
 7004 0182 00DA     		bge	.L349
 7005 0184 0333     		adds	r3, r3, #3
 7006              	.L349:
 7007 0186 9B10     		asrs	r3, r3, #2
 7008 0188 5C1C     		adds	r4, r3, #1
 7009 018a 786D     		ldr	r0, [r7, #84]
 7010 018c FFF7FEFF 		bl	rbit
 7011 0190 0146     		mov	r1, r0
 7012 0192 7B6E     		ldr	r3, [r7, #100]
 7013 0194 002B     		cmp	r3, #0
 7014 0196 00DA     		bge	.L350
 7015 0198 0333     		adds	r3, r3, #3
 7016              	.L350:
 7017 019a 9B10     		asrs	r3, r3, #2
 7018 019c 9B00     		lsls	r3, r3, #2
 7019 019e BA6D     		ldr	r2, [r7, #88]
 7020 01a0 1344     		add	r3, r3, r2
 7021 01a2 1B68     		ldr	r3, [r3]
 7022 01a4 81EA0302 		eor	r2, r1, r3
 7023 01a8 A300     		lsls	r3, r4, #2
 7024 01aa 07F16801 		add	r1, r7, #104
 7025 01ae 0B44     		add	r3, r3, r1
 7026 01b0 43F8602C 		str	r2, [r3, #-96]
 7027              	.LBE5:
1921:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7028              		.loc 1 1921 0 discriminator 3
 7029 01b4 7B6E     		ldr	r3, [r7, #100]
 7030 01b6 0433     		adds	r3, r3, #4
 7031 01b8 7B66     		str	r3, [r7, #100]
 7032              	.L348:
1921:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7033              		.loc 1 1921 0 is_stmt 0 discriminator 1
 7034 01ba 7B6E     		ldr	r3, [r7, #100]
 7035 01bc 032B     		cmp	r3, #3
 7036 01be C7DD     		ble	.L351
ARM GAS  /tmp/cczWrdyg.s 			page 157


1927:bluetooth_rxtx.c **** 		}
1928:bluetooth_rxtx.c **** 
1929:bluetooth_rxtx.c **** 		unsigned len = (p[5] & 0x3f) + 2;
 7037              		.loc 1 1929 0 is_stmt 1
 7038 01c0 FB6D     		ldr	r3, [r7, #92]
 7039 01c2 0533     		adds	r3, r3, #5
 7040 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7041 01c6 03F03F03 		and	r3, r3, #63
 7042 01ca 0233     		adds	r3, r3, #2
 7043 01cc 3B65     		str	r3, [r7, #80]
1930:bluetooth_rxtx.c **** 		if (len > 39)
 7044              		.loc 1 1930 0
 7045 01ce 3B6D     		ldr	r3, [r7, #80]
 7046 01d0 272B     		cmp	r3, #39
 7047 01d2 00D9     		bls	.L352
1931:bluetooth_rxtx.c **** 			goto rx_flush;
 7048              		.loc 1 1931 0
 7049 01d4 C8E0     		b	.L346
 7050              	.L352:
1932:bluetooth_rxtx.c **** 
1933:bluetooth_rxtx.c **** 		// transfer the minimum number of bytes from the CC2400
1934:bluetooth_rxtx.c **** 		// this allows us enough time to resume RX for subsequent packets on the same channel
1935:bluetooth_rxtx.c **** 		unsigned total_transfers = ((len + 3) + 4 - 1) / 4;
 7051              		.loc 1 1935 0
 7052 01d6 3B6D     		ldr	r3, [r7, #80]
 7053 01d8 0633     		adds	r3, r3, #6
 7054 01da 9B08     		lsrs	r3, r3, #2
 7055 01dc FB64     		str	r3, [r7, #76]
1936:bluetooth_rxtx.c **** 		if (total_transfers < 11) {
 7056              		.loc 1 1936 0
 7057 01de FB6C     		ldr	r3, [r7, #76]
 7058 01e0 0A2B     		cmp	r3, #10
 7059 01e2 0DD8     		bhi	.L353
1937:bluetooth_rxtx.c **** 			while (DMACC0DestAddr < (uint32_t)rxbuf1 + 4 * total_transfers && rx_err == 0)
 7060              		.loc 1 1937 0
 7061 01e4 00BF     		nop
 7062              	.L355:
 7063              		.loc 1 1937 0 is_stmt 0 discriminator 2
 7064 01e6 1F4B     		ldr	r3, .L381+60
 7065 01e8 1A68     		ldr	r2, [r3]
 7066 01ea FB6C     		ldr	r3, [r7, #76]
 7067 01ec 9B00     		lsls	r3, r3, #2
 7068 01ee 1C49     		ldr	r1, .L381+56
 7069 01f0 0B44     		add	r3, r3, r1
 7070 01f2 9A42     		cmp	r2, r3
 7071 01f4 0FD2     		bcs	.L354
 7072              		.loc 1 1937 0 discriminator 1
 7073 01f6 154B     		ldr	r3, .L381+36
 7074 01f8 1B68     		ldr	r3, [r3]
 7075 01fa 002B     		cmp	r3, #0
 7076 01fc F3D0     		beq	.L355
 7077 01fe 0AE0     		b	.L354
 7078              	.L353:
1938:bluetooth_rxtx.c **** 				;
1939:bluetooth_rxtx.c **** 		} else { // max transfers? just wait till DMA's done
1940:bluetooth_rxtx.c **** 			while (DMACC0Config & DMACCxConfig_E && rx_err == 0)
 7079              		.loc 1 1940 0 is_stmt 1
ARM GAS  /tmp/cczWrdyg.s 			page 158


 7080 0200 00BF     		nop
 7081              	.L356:
 7082              		.loc 1 1940 0 is_stmt 0 discriminator 2
 7083 0202 194B     		ldr	r3, .L381+64
 7084 0204 1B68     		ldr	r3, [r3]
 7085 0206 03F00103 		and	r3, r3, #1
 7086 020a 002B     		cmp	r3, #0
 7087 020c 03D0     		beq	.L354
 7088              		.loc 1 1940 0 discriminator 1
 7089 020e 0F4B     		ldr	r3, .L381+36
 7090 0210 1B68     		ldr	r3, [r3]
 7091 0212 002B     		cmp	r3, #0
 7092 0214 F5D0     		beq	.L356
 7093              	.L354:
1941:bluetooth_rxtx.c **** 				;
1942:bluetooth_rxtx.c **** 		}
1943:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7094              		.loc 1 1943 0 is_stmt 1
 7095 0216 154A     		ldr	r2, .L381+68
 7096 0218 144B     		ldr	r3, .L381+68
 7097 021a 1B68     		ldr	r3, [r3]
 7098 021c 23F00103 		bic	r3, r3, #1
 7099 0220 1360     		str	r3, [r2]
1944:bluetooth_rxtx.c **** 
1945:bluetooth_rxtx.c **** 		// unwhiten the rest of the packet
1946:bluetooth_rxtx.c **** 		for (i = 4; i < 44; i += 4) {
 7100              		.loc 1 1946 0
 7101 0222 0423     		movs	r3, #4
 7102 0224 7B66     		str	r3, [r7, #100]
 7103 0226 58E0     		b	.L357
 7104              	.L382:
 7105              		.align	2
 7106              	.L381:
 7107 0228 00000000 		.word	modulation
 7108 022c 00000000 		.word	mode
 7109 0230 00000000 		.word	le
 7110 0234 00E100E0 		.word	-536813312
 7111 0238 3CC00920 		.word	537509948
 7112 023c 00000000 		.word	requested_channel
 7113 0240 00000000 		.word	channel
 7114 0244 00000000 		.word	saved_request
 7115 0248 00000000 		.word	rx_tc
 7116 024c 00000000 		.word	rx_err
 7117 0250 00000000 		.word	do_hop
 7118 0254 00000000 		.word	requested_mode
 7119 0258 00000000 		.word	status
 7120 025c FC000000 		.word	whitening_word
 7121 0260 00000000 		.word	rxbuf1
 7122 0264 04410050 		.word	1342193924
 7123 0268 10410050 		.word	1342193936
 7124 026c 24000340 		.word	1073938468
 7125              	.L360:
 7126              	.LBB6:
1947:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7127              		.loc 1 1947 0 discriminator 3
 7128 0270 A54A     		ldr	r2, .L383
 7129 0272 7B6E     		ldr	r3, [r7, #100]
ARM GAS  /tmp/cczWrdyg.s 			page 159


 7130 0274 1344     		add	r3, r3, r2
 7131 0276 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7132 0278 1A06     		lsls	r2, r3, #24
1948:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7133              		.loc 1 1948 0 discriminator 3
 7134 027a 7B6E     		ldr	r3, [r7, #100]
 7135 027c 0133     		adds	r3, r3, #1
 7136 027e A249     		ldr	r1, .L383
 7137 0280 CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7138 0282 1B04     		lsls	r3, r3, #16
 7139 0284 1A43     		orrs	r2, r2, r3
1949:bluetooth_rxtx.c **** 				       | rxbuf1[i+2] << 8
 7140              		.loc 1 1949 0 discriminator 3
 7141 0286 7B6E     		ldr	r3, [r7, #100]
 7142 0288 0233     		adds	r3, r3, #2
 7143 028a 9F49     		ldr	r1, .L383
 7144 028c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 7145 028e 1B02     		lsls	r3, r3, #8
 7146 0290 1343     		orrs	r3, r3, r2
1950:bluetooth_rxtx.c **** 					   | rxbuf1[i+3] << 0;
 7147              		.loc 1 1950 0 discriminator 3
 7148 0292 7A6E     		ldr	r2, [r7, #100]
 7149 0294 0332     		adds	r2, r2, #3
 7150 0296 9C49     		ldr	r1, .L383
 7151 0298 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 7152 029a 1343     		orrs	r3, r3, r2
1947:bluetooth_rxtx.c **** 					   | rxbuf1[i+1] << 16
 7153              		.loc 1 1947 0 discriminator 3
 7154 029c BB64     		str	r3, [r7, #72]
1951:bluetooth_rxtx.c **** 			packet[i/4+1] = rbit(v) ^ whit[i/4];
 7155              		.loc 1 1951 0 discriminator 3
 7156 029e 7B6E     		ldr	r3, [r7, #100]
 7157 02a0 002B     		cmp	r3, #0
 7158 02a2 00DA     		bge	.L358
 7159 02a4 0333     		adds	r3, r3, #3
 7160              	.L358:
 7161 02a6 9B10     		asrs	r3, r3, #2
 7162 02a8 5C1C     		adds	r4, r3, #1
 7163 02aa B86C     		ldr	r0, [r7, #72]
 7164 02ac FFF7FEFF 		bl	rbit
 7165 02b0 0146     		mov	r1, r0
 7166 02b2 7B6E     		ldr	r3, [r7, #100]
 7167 02b4 002B     		cmp	r3, #0
 7168 02b6 00DA     		bge	.L359
 7169 02b8 0333     		adds	r3, r3, #3
 7170              	.L359:
 7171 02ba 9B10     		asrs	r3, r3, #2
 7172 02bc 9B00     		lsls	r3, r3, #2
 7173 02be BA6D     		ldr	r2, [r7, #88]
 7174 02c0 1344     		add	r3, r3, r2
 7175 02c2 1B68     		ldr	r3, [r3]
 7176 02c4 81EA0302 		eor	r2, r1, r3
 7177 02c8 A300     		lsls	r3, r4, #2
 7178 02ca 07F16801 		add	r1, r7, #104
 7179 02ce 0B44     		add	r3, r3, r1
 7180 02d0 43F8602C 		str	r2, [r3, #-96]
 7181              	.LBE6:
ARM GAS  /tmp/cczWrdyg.s 			page 160


1946:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7182              		.loc 1 1946 0 discriminator 3
 7183 02d4 7B6E     		ldr	r3, [r7, #100]
 7184 02d6 0433     		adds	r3, r3, #4
 7185 02d8 7B66     		str	r3, [r7, #100]
 7186              	.L357:
1946:bluetooth_rxtx.c **** 			uint32_t v = rxbuf1[i+0] << 24
 7187              		.loc 1 1946 0 is_stmt 0 discriminator 1
 7188 02da 7B6E     		ldr	r3, [r7, #100]
 7189 02dc 2B2B     		cmp	r3, #43
 7190 02de C7DD     		ble	.L360
1952:bluetooth_rxtx.c **** 		}
1953:bluetooth_rxtx.c **** 
1954:bluetooth_rxtx.c **** 		if (le.crc_verify) {
 7191              		.loc 1 1954 0 is_stmt 1
 7192 02e0 8A4B     		ldr	r3, .L383+4
 7193 02e2 1B69     		ldr	r3, [r3, #16]
 7194 02e4 002B     		cmp	r3, #0
 7195 02e6 23D0     		beq	.L361
 7196              	.LBB7:
1955:bluetooth_rxtx.c **** 			u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, p + 4, len);
 7197              		.loc 1 1955 0
 7198 02e8 884B     		ldr	r3, .L383+4
 7199 02ea D968     		ldr	r1, [r3, #12]
 7200 02ec FB6D     		ldr	r3, [r7, #92]
 7201 02ee 1A1D     		adds	r2, r3, #4
 7202 02f0 3B6D     		ldr	r3, [r7, #80]
 7203 02f2 0846     		mov	r0, r1
 7204 02f4 1146     		mov	r1, r2
 7205 02f6 1A46     		mov	r2, r3
 7206 02f8 FFF7FEFF 		bl	btle_crcgen_lut
 7207 02fc 7864     		str	r0, [r7, #68]
1956:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7208              		.loc 1 1956 0
 7209 02fe 3B6D     		ldr	r3, [r7, #80]
 7210 0300 0633     		adds	r3, r3, #6
 7211 0302 FA6D     		ldr	r2, [r7, #92]
 7212 0304 1344     		add	r3, r3, r2
 7213 0306 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7214 0308 1A04     		lsls	r2, r3, #16
1957:bluetooth_rxtx.c **** 						 | (p[4+len+1] << 8)
 7215              		.loc 1 1957 0
 7216 030a 3B6D     		ldr	r3, [r7, #80]
 7217 030c 0533     		adds	r3, r3, #5
 7218 030e F96D     		ldr	r1, [r7, #92]
 7219 0310 0B44     		add	r3, r3, r1
 7220 0312 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7221 0314 1B02     		lsls	r3, r3, #8
 7222 0316 1343     		orrs	r3, r3, r2
1958:bluetooth_rxtx.c **** 						 | (p[4+len+0] << 0);
 7223              		.loc 1 1958 0
 7224 0318 3A6D     		ldr	r2, [r7, #80]
 7225 031a 0432     		adds	r2, r2, #4
 7226 031c F96D     		ldr	r1, [r7, #92]
 7227 031e 0A44     		add	r2, r2, r1
 7228 0320 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7229 0322 1343     		orrs	r3, r3, r2
ARM GAS  /tmp/cczWrdyg.s 			page 161


1956:bluetooth_rxtx.c **** 			u32 wire_crc = (p[4+len+2] << 16)
 7230              		.loc 1 1956 0
 7231 0324 3B64     		str	r3, [r7, #64]
1959:bluetooth_rxtx.c **** 			if (calc_crc != wire_crc) // skip packets with a bad CRC
 7232              		.loc 1 1959 0
 7233 0326 7A6C     		ldr	r2, [r7, #68]
 7234 0328 3B6C     		ldr	r3, [r7, #64]
 7235 032a 9A42     		cmp	r2, r3
 7236 032c 00D0     		beq	.L361
1960:bluetooth_rxtx.c **** 				goto rx_flush;
 7237              		.loc 1 1960 0
 7238 032e 1BE0     		b	.L346
 7239              	.L361:
 7240              	.LBE7:
1961:bluetooth_rxtx.c **** 		}
1962:bluetooth_rxtx.c **** 
1963:bluetooth_rxtx.c **** 
1964:bluetooth_rxtx.c **** 		RXLED_SET;
 7241              		.loc 1 1964 0
 7242 0330 774B     		ldr	r3, .L383+8
 7243 0332 1022     		movs	r2, #16
 7244 0334 1A60     		str	r2, [r3]
1965:bluetooth_rxtx.c **** 		packet_cb((uint8_t *)packet);
 7245              		.loc 1 1965 0
 7246 0336 774B     		ldr	r3, .L383+12
 7247 0338 1B68     		ldr	r3, [r3]
 7248 033a 07F10802 		add	r2, r7, #8
 7249 033e 1046     		mov	r0, r2
 7250 0340 9847     		blx	r3
1966:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, (uint8_t *)packet);
 7251              		.loc 1 1966 0
 7252 0342 07F10803 		add	r3, r7, #8
 7253 0346 0120     		movs	r0, #1
 7254 0348 1946     		mov	r1, r3
 7255 034a FFF7FEFF 		bl	enqueue
1967:bluetooth_rxtx.c **** 		le.last_packet = CLK100NS;
 7256              		.loc 1 1967 0
 7257 034e 724B     		ldr	r3, .L383+16
 7258 0350 1B68     		ldr	r3, [r3]
 7259 0352 C3F31303 		ubfx	r3, r3, #0, #20
 7260 0356 40F63542 		movw	r2, #3125
 7261 035a 02FB03F2 		mul	r2, r2, r3
 7262 035e 6F4B     		ldr	r3, .L383+20
 7263 0360 1B68     		ldr	r3, [r3]
 7264 0362 1344     		add	r3, r3, r2
 7265 0364 694A     		ldr	r2, .L383+4
 7266 0366 1364     		str	r3, [r2, #64]
 7267              	.L346:
1968:bluetooth_rxtx.c **** 
1969:bluetooth_rxtx.c **** 	rx_flush:
1970:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 7268              		.loc 1 1970 0
 7269 0368 6120     		movs	r0, #97
 7270 036a FFF7FEFF 		bl	cc2400_strobe
1971:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 7271              		.loc 1 1971 0
 7272 036e 00BF     		nop
ARM GAS  /tmp/cczWrdyg.s 			page 162


 7273              	.L362:
 7274              		.loc 1 1971 0 is_stmt 0 discriminator 1
 7275 0370 FFF7FEFF 		bl	cc2400_status
 7276 0374 0346     		mov	r3, r0
 7277 0376 03F00403 		and	r3, r3, #4
 7278 037a 002B     		cmp	r3, #0
 7279 037c F8D0     		beq	.L362
1972:bluetooth_rxtx.c **** 
1973:bluetooth_rxtx.c **** 		// flush any excess bytes from the SSP's buffer
1974:bluetooth_rxtx.c **** 		DIO_SSP_DMACR &= ~SSPDMACR_RXDMAE;
 7280              		.loc 1 1974 0 is_stmt 1
 7281 037e 684A     		ldr	r2, .L383+24
 7282 0380 674B     		ldr	r3, .L383+24
 7283 0382 1B68     		ldr	r3, [r3]
 7284 0384 23F00103 		bic	r3, r3, #1
 7285 0388 1360     		str	r3, [r2]
1975:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7286              		.loc 1 1975 0
 7287 038a 03E0     		b	.L363
 7288              	.L364:
 7289              	.LBB8:
1976:bluetooth_rxtx.c **** 			u8 tmp = (u8)DIO_SSP_DR;
 7290              		.loc 1 1976 0
 7291 038c 654B     		ldr	r3, .L383+28
 7292 038e 1B68     		ldr	r3, [r3]
 7293 0390 87F83F30 		strb	r3, [r7, #63]
 7294              	.L363:
 7295              	.LBE8:
1975:bluetooth_rxtx.c **** 		while (SSP1SR & SSPSR_RNE) {
 7296              		.loc 1 1975 0
 7297 0394 644B     		ldr	r3, .L383+32
 7298 0396 1B68     		ldr	r3, [r3]
 7299 0398 03F00403 		and	r3, r3, #4
 7300 039c 002B     		cmp	r3, #0
 7301 039e F5D1     		bne	.L364
1977:bluetooth_rxtx.c **** 		}
1978:bluetooth_rxtx.c **** 
1979:bluetooth_rxtx.c **** 		// timeout - FIXME this is an ugly hack
1980:bluetooth_rxtx.c **** 		u32 now = CLK100NS;
 7302              		.loc 1 1980 0
 7303 03a0 5D4B     		ldr	r3, .L383+16
 7304 03a2 1B68     		ldr	r3, [r3]
 7305 03a4 C3F31303 		ubfx	r3, r3, #0, #20
 7306 03a8 40F63542 		movw	r2, #3125
 7307 03ac 02FB03F2 		mul	r2, r2, r3
 7308 03b0 5A4B     		ldr	r3, .L383+20
 7309 03b2 1B68     		ldr	r3, [r3]
 7310 03b4 1344     		add	r3, r3, r2
 7311 03b6 3B66     		str	r3, [r7, #96]
1981:bluetooth_rxtx.c **** 		if (now < le.last_packet)
 7312              		.loc 1 1981 0
 7313 03b8 544B     		ldr	r3, .L383+4
 7314 03ba 1A6C     		ldr	r2, [r3, #64]
 7315 03bc 3B6E     		ldr	r3, [r7, #96]
 7316 03be 9A42     		cmp	r2, r3
 7317 03c0 05D9     		bls	.L365
1982:bluetooth_rxtx.c **** 			now += 3276800000; // handle rollover
ARM GAS  /tmp/cczWrdyg.s 			page 163


 7318              		.loc 1 1982 0
 7319 03c2 3B6E     		ldr	r3, [r7, #96]
 7320 03c4 03F14343 		add	r3, r3, #-1023410176
 7321 03c8 03F5A003 		add	r3, r3, #5242880
 7322 03cc 3B66     		str	r3, [r7, #96]
 7323              	.L365:
1983:bluetooth_rxtx.c **** 		if  ( // timeout
1984:bluetooth_rxtx.c **** 			((le.link_state == LINK_CONNECTED || le.link_state == LINK_CONN_PENDING)
 7324              		.loc 1 1984 0
 7325 03ce 4F4B     		ldr	r3, .L383+4
 7326 03d0 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
1983:bluetooth_rxtx.c **** 		if  ( // timeout
 7327              		.loc 1 1983 0
 7328 03d2 032B     		cmp	r3, #3
 7329 03d4 03D0     		beq	.L366
 7330              		.loc 1 1984 0
 7331 03d6 4D4B     		ldr	r3, .L383+4
 7332 03d8 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7333 03da 022B     		cmp	r3, #2
 7334 03dc 06D1     		bne	.L367
 7335              	.L366:
1985:bluetooth_rxtx.c **** 			&& (now - le.last_packet > 50000000))
 7336              		.loc 1 1985 0
 7337 03de 4B4B     		ldr	r3, .L383+4
 7338 03e0 1B6C     		ldr	r3, [r3, #64]
 7339 03e2 3A6E     		ldr	r2, [r7, #96]
 7340 03e4 D31A     		subs	r3, r2, r3
 7341 03e6 514A     		ldr	r2, .L383+36
 7342 03e8 9342     		cmp	r3, r2
 7343 03ea 03D8     		bhi	.L368
 7344              	.L367:
1986:bluetooth_rxtx.c **** 			// jam finished
1987:bluetooth_rxtx.c **** 			|| (le_jam_count == 1)
 7345              		.loc 1 1987 0
 7346 03ec 504B     		ldr	r3, .L383+40
 7347 03ee 1B68     		ldr	r3, [r3]
 7348 03f0 012B     		cmp	r3, #1
 7349 03f2 37D1     		bne	.L369
 7350              	.L368:
1988:bluetooth_rxtx.c **** 			)
1989:bluetooth_rxtx.c **** 		{
1990:bluetooth_rxtx.c **** 			reset_le();
 7351              		.loc 1 1990 0
 7352 03f4 FFF7FEFF 		bl	reset_le
1991:bluetooth_rxtx.c **** 			le_jam_count = 0;
 7353              		.loc 1 1991 0
 7354 03f8 4D4B     		ldr	r3, .L383+40
 7355 03fa 0022     		movs	r2, #0
 7356 03fc 1A60     		str	r2, [r3]
1992:bluetooth_rxtx.c **** 			TXLED_CLR;
 7357              		.loc 1 1992 0
 7358 03fe 4D4B     		ldr	r3, .L383+44
 7359 0400 4FF48072 		mov	r2, #256
 7360 0404 1A60     		str	r2, [r3]
1993:bluetooth_rxtx.c **** 
1994:bluetooth_rxtx.c **** 			if (jam_mode == JAM_ONCE) {
 7361              		.loc 1 1994 0
ARM GAS  /tmp/cczWrdyg.s 			page 164


 7362 0406 4C4B     		ldr	r3, .L383+48
 7363 0408 1B78     		ldrb	r3, [r3]
 7364 040a DBB2     		uxtb	r3, r3
 7365 040c 012B     		cmp	r3, #1
 7366 040e 06D1     		bne	.L370
1995:bluetooth_rxtx.c **** 				jam_mode = JAM_NONE;
 7367              		.loc 1 1995 0
 7368 0410 494B     		ldr	r3, .L383+48
 7369 0412 0022     		movs	r2, #0
 7370 0414 1A70     		strb	r2, [r3]
1996:bluetooth_rxtx.c **** 				requested_mode = MODE_IDLE;
 7371              		.loc 1 1996 0
 7372 0416 494B     		ldr	r3, .L383+52
 7373 0418 0022     		movs	r2, #0
 7374 041a 1A70     		strb	r2, [r3]
1997:bluetooth_rxtx.c **** 				goto cleanup;
 7375              		.loc 1 1997 0
 7376 041c 67E0     		b	.L379
 7377              	.L370:
1998:bluetooth_rxtx.c **** 			}
1999:bluetooth_rxtx.c **** 
2000:bluetooth_rxtx.c **** 			// go back to promisc if the connection dies
2001:bluetooth_rxtx.c **** 			if (active_mode == MODE_BT_PROMISC_LE)
 7378              		.loc 1 2001 0
 7379 041e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 7380 0420 0A2B     		cmp	r3, #10
 7381 0422 01D1     		bne	.L371
2002:bluetooth_rxtx.c **** 				goto cleanup;
 7382              		.loc 1 2002 0
 7383 0424 00BF     		nop
 7384 0426 62E0     		b	.L379
 7385              	.L371:
2003:bluetooth_rxtx.c **** 
2004:bluetooth_rxtx.c **** 			le.link_state = LINK_LISTENING;
 7386              		.loc 1 2004 0
 7387 0428 384B     		ldr	r3, .L383+4
 7388 042a 0122     		movs	r2, #1
 7389 042c 1A75     		strb	r2, [r3, #20]
2005:bluetooth_rxtx.c **** 
2006:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 7390              		.loc 1 2006 0
 7391 042e 6420     		movs	r0, #100
 7392 0430 FFF7FEFF 		bl	cc2400_strobe
2007:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 7393              		.loc 1 2007 0
 7394 0434 00BF     		nop
 7395              	.L372:
 7396              		.loc 1 2007 0 is_stmt 0 discriminator 1
 7397 0436 FFF7FEFF 		bl	cc2400_status
 7398 043a 0346     		mov	r3, r0
 7399 043c 03F00403 		and	r3, r3, #4
 7400 0440 002B     		cmp	r3, #0
 7401 0442 F8D1     		bne	.L372
2008:bluetooth_rxtx.c **** 
2009:bluetooth_rxtx.c **** 			/* Retune */
2010:bluetooth_rxtx.c **** 			channel = saved_request != 0 ? saved_request : 2402;
 7402              		.loc 1 2010 0 is_stmt 1
ARM GAS  /tmp/cczWrdyg.s 			page 165


 7403 0444 3E4B     		ldr	r3, .L383+56
 7404 0446 1B88     		ldrh	r3, [r3]	@ movhi
 7405 0448 9BB2     		uxth	r3, r3
 7406 044a 002B     		cmp	r3, #0
 7407 044c 03D0     		beq	.L373
 7408              		.loc 1 2010 0 is_stmt 0 discriminator 1
 7409 044e 3C4B     		ldr	r3, .L383+56
 7410 0450 1B88     		ldrh	r3, [r3]	@ movhi
 7411 0452 9BB2     		uxth	r3, r3
 7412 0454 01E0     		b	.L374
 7413              	.L373:
 7414              		.loc 1 2010 0 discriminator 2
 7415 0456 40F66213 		movw	r3, #2402
 7416              	.L374:
 7417              		.loc 1 2010 0 discriminator 4
 7418 045a 3A4A     		ldr	r2, .L383+60
 7419 045c 1380     		strh	r3, [r2]	@ movhi
2011:bluetooth_rxtx.c **** 			restart_jamming = 1;
 7420              		.loc 1 2011 0 is_stmt 1 discriminator 4
 7421 045e 3A4B     		ldr	r3, .L383+64
 7422 0460 0122     		movs	r2, #1
 7423 0462 1A60     		str	r2, [r3]
 7424              	.L369:
2012:bluetooth_rxtx.c **** 		}
2013:bluetooth_rxtx.c **** 
2014:bluetooth_rxtx.c **** 		cc2400_set(SYNCL, le.syncl);
 7425              		.loc 1 2014 0
 7426 0464 294B     		ldr	r3, .L383+4
 7427 0466 DB88     		ldrh	r3, [r3, #6]
 7428 0468 2C20     		movs	r0, #44
 7429 046a 1946     		mov	r1, r3
 7430 046c FFF7FEFF 		bl	cc2400_set
2015:bluetooth_rxtx.c **** 		cc2400_set(SYNCH, le.synch);
 7431              		.loc 1 2015 0
 7432 0470 264B     		ldr	r3, .L383+4
 7433 0472 9B88     		ldrh	r3, [r3, #4]
 7434 0474 2D20     		movs	r0, #45
 7435 0476 1946     		mov	r1, r3
 7436 0478 FFF7FEFF 		bl	cc2400_set
2016:bluetooth_rxtx.c **** 
2017:bluetooth_rxtx.c **** 		while (do_hop);
 7437              		.loc 1 2017 0
 7438 047c 00BF     		nop
 7439              	.L375:
 7440              		.loc 1 2017 0 is_stmt 0 discriminator 1
 7441 047e 334B     		ldr	r3, .L383+68
 7442 0480 1B78     		ldrb	r3, [r3]
 7443 0482 DBB2     		uxtb	r3, r3
 7444 0484 002B     		cmp	r3, #0
 7445 0486 FAD1     		bne	.L375
2018:bluetooth_rxtx.c **** 		hop();
 7446              		.loc 1 2018 0 is_stmt 1
 7447 0488 FFF7FEFF 		bl	hop
2019:bluetooth_rxtx.c **** 
2020:bluetooth_rxtx.c **** 		// ♪ you can jam but you keep turning off the light ♪
2021:bluetooth_rxtx.c **** 		if (le_jam_count > 0) {
 7448              		.loc 1 2021 0
ARM GAS  /tmp/cczWrdyg.s 			page 166


 7449 048c 284B     		ldr	r3, .L383+40
 7450 048e 1B68     		ldr	r3, [r3]
 7451 0490 002B     		cmp	r3, #0
 7452 0492 07DD     		ble	.L376
2022:bluetooth_rxtx.c **** 			le_jam();
 7453              		.loc 1 2022 0
 7454 0494 FFF7FEFF 		bl	le_jam
2023:bluetooth_rxtx.c **** 			--le_jam_count;
 7455              		.loc 1 2023 0
 7456 0498 254B     		ldr	r3, .L383+40
 7457 049a 1B68     		ldr	r3, [r3]
 7458 049c 013B     		subs	r3, r3, #1
 7459 049e 244A     		ldr	r2, .L383+40
 7460 04a0 1360     		str	r3, [r2]
 7461 04a2 17E0     		b	.L377
 7462              	.L376:
2024:bluetooth_rxtx.c **** 		} else {
2025:bluetooth_rxtx.c **** 			/* RX mode */
2026:bluetooth_rxtx.c **** 			dma_init_le();
 7463              		.loc 1 2026 0
 7464 04a4 FFF7FEFF 		bl	dma_init_le
2027:bluetooth_rxtx.c **** 			dio_ssp_start();
 7465              		.loc 1 2027 0
 7466 04a8 FFF7FEFF 		bl	dio_ssp_start
2028:bluetooth_rxtx.c **** 
2029:bluetooth_rxtx.c **** 			if (restart_jamming) {
 7467              		.loc 1 2029 0
 7468 04ac 264B     		ldr	r3, .L383+64
 7469 04ae 1B68     		ldr	r3, [r3]
 7470 04b0 002B     		cmp	r3, #0
 7471 04b2 0CD0     		beq	.L378
2030:bluetooth_rxtx.c **** 				cc2400_rx_sync(rbit(le.access_address));
 7472              		.loc 1 2030 0
 7473 04b4 154B     		ldr	r3, .L383+4
 7474 04b6 1B68     		ldr	r3, [r3]
 7475 04b8 1846     		mov	r0, r3
 7476 04ba FFF7FEFF 		bl	rbit
 7477 04be 0346     		mov	r3, r0
 7478 04c0 1846     		mov	r0, r3
 7479 04c2 FFF7FEFF 		bl	cc2400_rx_sync
2031:bluetooth_rxtx.c **** 				restart_jamming = 0;
 7480              		.loc 1 2031 0
 7481 04c6 204B     		ldr	r3, .L383+64
 7482 04c8 0022     		movs	r2, #0
 7483 04ca 1A60     		str	r2, [r3]
 7484 04cc 02E0     		b	.L377
 7485              	.L378:
2032:bluetooth_rxtx.c **** 			} else {
2033:bluetooth_rxtx.c **** 				cc2400_strobe(SRX);
 7486              		.loc 1 2033 0
 7487 04ce 6220     		movs	r0, #98
 7488 04d0 FFF7FEFF 		bl	cc2400_strobe
 7489              	.L377:
2034:bluetooth_rxtx.c **** 			}
2035:bluetooth_rxtx.c **** 		}
2036:bluetooth_rxtx.c **** 
2037:bluetooth_rxtx.c **** 		rx_tc = 0;
ARM GAS  /tmp/cczWrdyg.s 			page 167


 7490              		.loc 1 2037 0
 7491 04d4 1E4B     		ldr	r3, .L383+72
 7492 04d6 0022     		movs	r2, #0
 7493 04d8 1A60     		str	r2, [r3]
2038:bluetooth_rxtx.c **** 		rx_err = 0;
 7494              		.loc 1 2038 0
 7495 04da 1E4B     		ldr	r3, .L383+76
 7496 04dc 0022     		movs	r2, #0
 7497 04de 1A60     		str	r2, [r3]
 7498              	.L336:
 7499              	.LBE4:
1872:bluetooth_rxtx.c **** 		if (requested_channel != 0) {
 7500              		.loc 1 1872 0
 7501 04e0 164B     		ldr	r3, .L383+52
 7502 04e2 1B78     		ldrb	r3, [r3]
 7503 04e4 DBB2     		uxtb	r3, r3
 7504 04e6 FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 7505 04e8 9A42     		cmp	r2, r3
 7506 04ea 3FF4B0AD 		beq	.L380
 7507              	.L379:
2039:bluetooth_rxtx.c **** 	}
2040:bluetooth_rxtx.c **** 
2041:bluetooth_rxtx.c **** cleanup:
2042:bluetooth_rxtx.c **** 
2043:bluetooth_rxtx.c **** 	// disable USB interrupts
2044:bluetooth_rxtx.c **** 	ICER0 = ICER0_ICE_USB;
 7508              		.loc 1 2044 0
 7509 04ee 1A4B     		ldr	r3, .L383+80
 7510 04f0 4FF08072 		mov	r2, #16777216
 7511 04f4 1A60     		str	r2, [r3]
2045:bluetooth_rxtx.c **** 
2046:bluetooth_rxtx.c **** 	// reset the radio completely
2047:bluetooth_rxtx.c **** 	cc2400_idle();
 7512              		.loc 1 2047 0
 7513 04f6 FFF7FEFF 		bl	cc2400_idle
2048:bluetooth_rxtx.c **** 	dio_ssp_stop();
 7514              		.loc 1 2048 0
 7515 04fa FFF7FEFF 		bl	dio_ssp_stop
2049:bluetooth_rxtx.c **** 	cs_trigger_disable();
 7516              		.loc 1 2049 0
 7517 04fe FFF7FEFF 		bl	cs_trigger_disable
2050:bluetooth_rxtx.c **** }
 7518              		.loc 1 2050 0
 7519 0502 6C37     		adds	r7, r7, #108
 7520              		.cfi_def_cfa_offset 12
 7521 0504 BD46     		mov	sp, r7
 7522              		.cfi_def_cfa_register 13
 7523              		@ sp needed
 7524 0506 90BD     		pop	{r4, r7, pc}
 7525              	.L384:
 7526              		.align	2
 7527              	.L383:
 7528 0508 00000000 		.word	rxbuf1
 7529 050c 00000000 		.word	le
 7530 0510 38C00920 		.word	537509944
 7531 0514 00000000 		.word	packet_cb
 7532 0518 00000000 		.word	clkn
ARM GAS  /tmp/cczWrdyg.s 			page 168


 7533 051c 08400040 		.word	1073758216
 7534 0520 24000340 		.word	1073938468
 7535 0524 08000340 		.word	1073938440
 7536 0528 0C000340 		.word	1073938444
 7537 052c 80F0FA02 		.word	50000000
 7538 0530 00000000 		.word	le_jam_count
 7539 0534 3CC00920 		.word	537509948
 7540 0538 00000000 		.word	jam_mode
 7541 053c 00000000 		.word	requested_mode
 7542 0540 00000000 		.word	saved_request
 7543 0544 00000000 		.word	channel
 7544 0548 D4000000 		.word	restart_jamming.4678
 7545 054c 00000000 		.word	do_hop
 7546 0550 00000000 		.word	rx_tc
 7547 0554 00000000 		.word	rx_err
 7548 0558 80E100E0 		.word	-536813184
 7549              		.cfi_endproc
 7550              	.LFE31:
 7552              		.section	.text.cb_follow_le,"ax",%progbits
 7553              		.align	2
 7554              		.global	cb_follow_le
 7555              		.thumb
 7556              		.thumb_func
 7558              	cb_follow_le:
 7559              	.LFB32:
2051:bluetooth_rxtx.c **** 
2052:bluetooth_rxtx.c **** 
2053:bluetooth_rxtx.c **** 
2054:bluetooth_rxtx.c **** /* low energy connection following
2055:bluetooth_rxtx.c ****  * follows a known AA around */
2056:bluetooth_rxtx.c **** int cb_follow_le() {
 7560              		.loc 1 2056 0
 7561              		.cfi_startproc
 7562              		@ args = 0, pretend = 0, frame = 48
 7563              		@ frame_needed = 1, uses_anonymous_args = 0
 7564 0000 80B5     		push	{r7, lr}
 7565              		.cfi_def_cfa_offset 8
 7566              		.cfi_offset 7, -8
 7567              		.cfi_offset 14, -4
 7568 0002 8CB0     		sub	sp, sp, #48
 7569              		.cfi_def_cfa_offset 56
 7570 0004 00AF     		add	r7, sp, #0
 7571              		.cfi_def_cfa_register 7
2057:bluetooth_rxtx.c **** 	int i, j, k;
2058:bluetooth_rxtx.c **** 	int idx = whitening_index[btle_channel_index(channel-2402)];
 7572              		.loc 1 2058 0
 7573 0006 6C4B     		ldr	r3, .L401
 7574 0008 1B88     		ldrh	r3, [r3]	@ movhi
 7575 000a 9BB2     		uxth	r3, r3
 7576 000c DBB2     		uxtb	r3, r3
 7577 000e 623B     		subs	r3, r3, #98
 7578 0010 DBB2     		uxtb	r3, r3
 7579 0012 1846     		mov	r0, r3
 7580 0014 FFF7FEFF 		bl	btle_channel_index
 7581 0018 0346     		mov	r3, r0
 7582 001a 1A46     		mov	r2, r3
 7583 001c 674B     		ldr	r3, .L401+4
ARM GAS  /tmp/cczWrdyg.s 			page 169


 7584 001e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 7585 0020 3B62     		str	r3, [r7, #32]
2059:bluetooth_rxtx.c **** 
2060:bluetooth_rxtx.c **** 	u32 access_address = 0;
 7586              		.loc 1 2060 0
 7587 0022 0023     		movs	r3, #0
 7588 0024 FB61     		str	r3, [r7, #28]
2061:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7589              		.loc 1 2061 0
 7590 0026 0023     		movs	r3, #0
 7591 0028 FB62     		str	r3, [r7, #44]
 7592 002a 0EE0     		b	.L386
 7593              	.L387:
2062:bluetooth_rxtx.c **** 		access_address >>= 1;
 7594              		.loc 1 2062 0 discriminator 3
 7595 002c FB69     		ldr	r3, [r7, #28]
 7596 002e 5B08     		lsrs	r3, r3, #1
 7597 0030 FB61     		str	r3, [r7, #28]
2063:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7598              		.loc 1 2063 0 discriminator 3
 7599 0032 634A     		ldr	r2, .L401+8
 7600 0034 FB6A     		ldr	r3, [r7, #44]
 7601 0036 1344     		add	r3, r3, r2
 7602 0038 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7603 003a DB07     		lsls	r3, r3, #31
 7604 003c 1A46     		mov	r2, r3
 7605 003e FB69     		ldr	r3, [r7, #28]
 7606 0040 1343     		orrs	r3, r3, r2
 7607 0042 FB61     		str	r3, [r7, #28]
2061:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7608              		.loc 1 2061 0 discriminator 3
 7609 0044 FB6A     		ldr	r3, [r7, #44]
 7610 0046 0133     		adds	r3, r3, #1
 7611 0048 FB62     		str	r3, [r7, #44]
 7612              	.L386:
2061:bluetooth_rxtx.c **** 	for (i = 0; i < 31; ++i) {
 7613              		.loc 1 2061 0 is_stmt 0 discriminator 1
 7614 004a FB6A     		ldr	r3, [r7, #44]
 7615 004c 1E2B     		cmp	r3, #30
 7616 004e EDDD     		ble	.L387
2064:bluetooth_rxtx.c **** 	}
2065:bluetooth_rxtx.c **** 
2066:bluetooth_rxtx.c **** 	for (i = 31; i < DMA_SIZE * 8 + 32; i++) {
 7617              		.loc 1 2066 0 is_stmt 1
 7618 0050 1F23     		movs	r3, #31
 7619 0052 FB62     		str	r3, [r7, #44]
 7620 0054 A6E0     		b	.L388
 7621              	.L399:
2067:bluetooth_rxtx.c **** 		access_address >>= 1;
 7622              		.loc 1 2067 0
 7623 0056 FB69     		ldr	r3, [r7, #28]
 7624 0058 5B08     		lsrs	r3, r3, #1
 7625 005a FB61     		str	r3, [r7, #28]
2068:bluetooth_rxtx.c **** 		access_address |= (unpacked[i] << 31);
 7626              		.loc 1 2068 0
 7627 005c 584A     		ldr	r2, .L401+8
 7628 005e FB6A     		ldr	r3, [r7, #44]
ARM GAS  /tmp/cczWrdyg.s 			page 170


 7629 0060 1344     		add	r3, r3, r2
 7630 0062 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7631 0064 DB07     		lsls	r3, r3, #31
 7632 0066 1A46     		mov	r2, r3
 7633 0068 FB69     		ldr	r3, [r7, #28]
 7634 006a 1343     		orrs	r3, r3, r2
 7635 006c FB61     		str	r3, [r7, #28]
2069:bluetooth_rxtx.c **** 		if (access_address == le.access_address) {
 7636              		.loc 1 2069 0
 7637 006e 554B     		ldr	r3, .L401+12
 7638 0070 1A68     		ldr	r2, [r3]
 7639 0072 FB69     		ldr	r3, [r7, #28]
 7640 0074 9A42     		cmp	r2, r3
 7641 0076 40F09280 		bne	.L389
2070:bluetooth_rxtx.c **** 			for (j = 0; j < 46; ++j) {
 7642              		.loc 1 2070 0
 7643 007a 0023     		movs	r3, #0
 7644 007c BB62     		str	r3, [r7, #40]
 7645 007e 48E0     		b	.L390
 7646              	.L396:
 7647              	.LBB9:
2071:bluetooth_rxtx.c **** 				u8 byte = 0;
 7648              		.loc 1 2071 0
 7649 0080 0023     		movs	r3, #0
 7650 0082 FB76     		strb	r3, [r7, #27]
2072:bluetooth_rxtx.c **** 				for (k = 0; k < 8; k++) {
 7651              		.loc 1 2072 0
 7652 0084 0023     		movs	r3, #0
 7653 0086 7B62     		str	r3, [r7, #36]
 7654 0088 37E0     		b	.L391
 7655              	.L395:
 7656              	.LBB10:
2073:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7657              		.loc 1 2073 0
 7658 008a BB6A     		ldr	r3, [r7, #40]
 7659 008c DA00     		lsls	r2, r3, #3
 7660 008e 7B6A     		ldr	r3, [r7, #36]
 7661 0090 1A44     		add	r2, r2, r3
 7662 0092 FB6A     		ldr	r3, [r7, #44]
 7663 0094 1344     		add	r3, r3, r2
 7664 0096 1F3B     		subs	r3, r3, #31
 7665 0098 3B61     		str	r3, [r7, #16]
2074:bluetooth_rxtx.c **** 					if (offset >= DMA_SIZE*8*2) break;
 7666              		.loc 1 2074 0
 7667 009a 3B69     		ldr	r3, [r7, #16]
 7668 009c B3F5487F 		cmp	r3, #800
 7669 00a0 00DB     		blt	.L392
 7670 00a2 2DE0     		b	.L393
 7671              	.L392:
2075:bluetooth_rxtx.c **** 					int bit = unpacked[offset];
 7672              		.loc 1 2075 0
 7673 00a4 464A     		ldr	r2, .L401+8
 7674 00a6 3B69     		ldr	r3, [r7, #16]
 7675 00a8 1344     		add	r3, r3, r2
 7676 00aa 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7677 00ac 7B61     		str	r3, [r7, #20]
2076:bluetooth_rxtx.c **** 					if (j >= 4) { // unwhiten data bytes
ARM GAS  /tmp/cczWrdyg.s 			page 171


 7678              		.loc 1 2076 0
 7679 00ae BB6A     		ldr	r3, [r7, #40]
 7680 00b0 032B     		cmp	r3, #3
 7681 00b2 16DD     		ble	.L394
2077:bluetooth_rxtx.c **** 						bit ^= whitening[idx];
 7682              		.loc 1 2077 0
 7683 00b4 444A     		ldr	r2, .L401+16
 7684 00b6 3B6A     		ldr	r3, [r7, #32]
 7685 00b8 1344     		add	r3, r3, r2
 7686 00ba 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7687 00bc 1A46     		mov	r2, r3
 7688 00be 7B69     		ldr	r3, [r7, #20]
 7689 00c0 5340     		eors	r3, r3, r2
 7690 00c2 7B61     		str	r3, [r7, #20]
2078:bluetooth_rxtx.c **** 						idx = (idx + 1) % sizeof(whitening);
 7691              		.loc 1 2078 0
 7692 00c4 3B6A     		ldr	r3, [r7, #32]
 7693 00c6 0133     		adds	r3, r3, #1
 7694 00c8 1946     		mov	r1, r3
 7695 00ca 404B     		ldr	r3, .L401+20
 7696 00cc A1FB0323 		umull	r2, r3, r1, r3
 7697 00d0 C81A     		subs	r0, r1, r3
 7698 00d2 4008     		lsrs	r0, r0, #1
 7699 00d4 0344     		add	r3, r3, r0
 7700 00d6 9A09     		lsrs	r2, r3, #6
 7701 00d8 1346     		mov	r3, r2
 7702 00da DB01     		lsls	r3, r3, #7
 7703 00dc 9B1A     		subs	r3, r3, r2
 7704 00de CA1A     		subs	r2, r1, r3
 7705 00e0 3A62     		str	r2, [r7, #32]
 7706              	.L394:
2079:bluetooth_rxtx.c **** 					}
2080:bluetooth_rxtx.c **** 					byte |= bit << k;
 7707              		.loc 1 2080 0 discriminator 2
 7708 00e2 7A69     		ldr	r2, [r7, #20]
 7709 00e4 7B6A     		ldr	r3, [r7, #36]
 7710 00e6 02FA03F3 		lsl	r3, r2, r3
 7711 00ea DAB2     		uxtb	r2, r3
 7712 00ec FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 7713 00ee 1343     		orrs	r3, r3, r2
 7714 00f0 DBB2     		uxtb	r3, r3
 7715 00f2 FB76     		strb	r3, [r7, #27]
 7716              	.LBE10:
2072:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7717              		.loc 1 2072 0 discriminator 2
 7718 00f4 7B6A     		ldr	r3, [r7, #36]
 7719 00f6 0133     		adds	r3, r3, #1
 7720 00f8 7B62     		str	r3, [r7, #36]
 7721              	.L391:
2072:bluetooth_rxtx.c **** 					int offset = k + (j * 8) + i - 31;
 7722              		.loc 1 2072 0 is_stmt 0 discriminator 1
 7723 00fa 7B6A     		ldr	r3, [r7, #36]
 7724 00fc 072B     		cmp	r3, #7
 7725 00fe C4DD     		ble	.L395
 7726              	.L393:
2081:bluetooth_rxtx.c **** 				}
2082:bluetooth_rxtx.c **** 				idle_rxbuf[j] = byte;
ARM GAS  /tmp/cczWrdyg.s 			page 172


 7727              		.loc 1 2082 0 is_stmt 1 discriminator 2
 7728 0100 334B     		ldr	r3, .L401+24
 7729 0102 1A68     		ldr	r2, [r3]
 7730 0104 BB6A     		ldr	r3, [r7, #40]
 7731 0106 1344     		add	r3, r3, r2
 7732 0108 FA7E     		ldrb	r2, [r7, #27]
 7733 010a 1A70     		strb	r2, [r3]
 7734              	.LBE9:
2070:bluetooth_rxtx.c **** 				u8 byte = 0;
 7735              		.loc 1 2070 0 discriminator 2
 7736 010c BB6A     		ldr	r3, [r7, #40]
 7737 010e 0133     		adds	r3, r3, #1
 7738 0110 BB62     		str	r3, [r7, #40]
 7739              	.L390:
2070:bluetooth_rxtx.c **** 				u8 byte = 0;
 7740              		.loc 1 2070 0 is_stmt 0 discriminator 1
 7741 0112 BB6A     		ldr	r3, [r7, #40]
 7742 0114 2D2B     		cmp	r3, #45
 7743 0116 B3DD     		ble	.L396
2083:bluetooth_rxtx.c **** 			}
2084:bluetooth_rxtx.c **** 
2085:bluetooth_rxtx.c **** 			// verify CRC
2086:bluetooth_rxtx.c **** 			if (le.crc_verify) {
 7744              		.loc 1 2086 0 is_stmt 1
 7745 0118 2A4B     		ldr	r3, .L401+12
 7746 011a 1B69     		ldr	r3, [r3, #16]
 7747 011c 002B     		cmp	r3, #0
 7748 011e 2ED0     		beq	.L397
 7749              	.LBB11:
2087:bluetooth_rxtx.c **** 				int len		 = (idle_rxbuf[5] & 0x3f) + 2;
 7750              		.loc 1 2087 0
 7751 0120 2B4B     		ldr	r3, .L401+24
 7752 0122 1B68     		ldr	r3, [r3]
 7753 0124 0533     		adds	r3, r3, #5
 7754 0126 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7755 0128 03F03F03 		and	r3, r3, #63
 7756 012c 0233     		adds	r3, r3, #2
 7757 012e FB60     		str	r3, [r7, #12]
2088:bluetooth_rxtx.c **** 				u32 calc_crc = btle_crcgen_lut(le.crc_init_reversed, idle_rxbuf + 4, len);
 7758              		.loc 1 2088 0
 7759 0130 244B     		ldr	r3, .L401+12
 7760 0132 DA68     		ldr	r2, [r3, #12]
 7761 0134 264B     		ldr	r3, .L401+24
 7762 0136 1B68     		ldr	r3, [r3]
 7763 0138 0433     		adds	r3, r3, #4
 7764 013a 1046     		mov	r0, r2
 7765 013c 1946     		mov	r1, r3
 7766 013e FA68     		ldr	r2, [r7, #12]
 7767 0140 FFF7FEFF 		bl	btle_crcgen_lut
 7768 0144 B860     		str	r0, [r7, #8]
2089:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 7769              		.loc 1 2089 0
 7770 0146 224B     		ldr	r3, .L401+24
 7771 0148 1A68     		ldr	r2, [r3]
 7772 014a FB68     		ldr	r3, [r7, #12]
 7773 014c 0633     		adds	r3, r3, #6
 7774 014e 1344     		add	r3, r3, r2
ARM GAS  /tmp/cczWrdyg.s 			page 173


 7775 0150 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7776 0152 1A04     		lsls	r2, r3, #16
2090:bluetooth_rxtx.c **** 							 | (idle_rxbuf[4+len+1] << 8)
 7777              		.loc 1 2090 0
 7778 0154 1E4B     		ldr	r3, .L401+24
 7779 0156 1968     		ldr	r1, [r3]
 7780 0158 FB68     		ldr	r3, [r7, #12]
 7781 015a 0533     		adds	r3, r3, #5
 7782 015c 0B44     		add	r3, r3, r1
 7783 015e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7784 0160 1B02     		lsls	r3, r3, #8
 7785 0162 1343     		orrs	r3, r3, r2
2091:bluetooth_rxtx.c **** 							 |  idle_rxbuf[4+len+0];
 7786              		.loc 1 2091 0
 7787 0164 1A4A     		ldr	r2, .L401+24
 7788 0166 1268     		ldr	r2, [r2]
 7789 0168 F968     		ldr	r1, [r7, #12]
 7790 016a 0431     		adds	r1, r1, #4
 7791 016c 0A44     		add	r2, r2, r1
 7792 016e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 7793 0170 1343     		orrs	r3, r3, r2
2089:bluetooth_rxtx.c **** 				u32 wire_crc = (idle_rxbuf[4+len+2] << 16)
 7794              		.loc 1 2089 0
 7795 0172 7B60     		str	r3, [r7, #4]
2092:bluetooth_rxtx.c **** 				if (calc_crc != wire_crc) // skip packets with a bad CRC
 7796              		.loc 1 2092 0
 7797 0174 BA68     		ldr	r2, [r7, #8]
 7798 0176 7B68     		ldr	r3, [r7, #4]
 7799 0178 9A42     		cmp	r2, r3
 7800 017a 00D0     		beq	.L397
2093:bluetooth_rxtx.c **** 					break;
 7801              		.loc 1 2093 0
 7802 017c 17E0     		b	.L398
 7803              	.L397:
 7804              	.LBE11:
2094:bluetooth_rxtx.c **** 			}
2095:bluetooth_rxtx.c **** 
2096:bluetooth_rxtx.c **** 			// send to PC
2097:bluetooth_rxtx.c **** 			enqueue(LE_PACKET, idle_rxbuf);
 7805              		.loc 1 2097 0
 7806 017e 144B     		ldr	r3, .L401+24
 7807 0180 1B68     		ldr	r3, [r3]
 7808 0182 0120     		movs	r0, #1
 7809 0184 1946     		mov	r1, r3
 7810 0186 FFF7FEFF 		bl	enqueue
2098:bluetooth_rxtx.c **** 			RXLED_SET;
 7811              		.loc 1 2098 0
 7812 018a 124B     		ldr	r3, .L401+28
 7813 018c 1022     		movs	r2, #16
 7814 018e 1A60     		str	r2, [r3]
2099:bluetooth_rxtx.c **** 
2100:bluetooth_rxtx.c **** 			packet_cb(idle_rxbuf);
 7815              		.loc 1 2100 0
 7816 0190 114B     		ldr	r3, .L401+32
 7817 0192 1B68     		ldr	r3, [r3]
 7818 0194 0E4A     		ldr	r2, .L401+24
 7819 0196 1268     		ldr	r2, [r2]
ARM GAS  /tmp/cczWrdyg.s 			page 174


 7820 0198 1046     		mov	r0, r2
 7821 019a 9847     		blx	r3
2101:bluetooth_rxtx.c **** 
2102:bluetooth_rxtx.c **** 			break;
 7822              		.loc 1 2102 0
 7823 019c 07E0     		b	.L398
 7824              	.L389:
2066:bluetooth_rxtx.c **** 		access_address >>= 1;
 7825              		.loc 1 2066 0 discriminator 2
 7826 019e FB6A     		ldr	r3, [r7, #44]
 7827 01a0 0133     		adds	r3, r3, #1
 7828 01a2 FB62     		str	r3, [r7, #44]
 7829              	.L388:
2066:bluetooth_rxtx.c **** 		access_address >>= 1;
 7830              		.loc 1 2066 0 is_stmt 0 discriminator 1
 7831 01a4 FB6A     		ldr	r3, [r7, #44]
 7832 01a6 B3F5D87F 		cmp	r3, #432
 7833 01aa FFF654AF 		blt	.L399
 7834              	.L398:
2103:bluetooth_rxtx.c **** 		}
2104:bluetooth_rxtx.c **** 	}
2105:bluetooth_rxtx.c **** 
2106:bluetooth_rxtx.c **** 	return 1;
 7835              		.loc 1 2106 0 is_stmt 1
 7836 01ae 0123     		movs	r3, #1
2107:bluetooth_rxtx.c **** }
 7837              		.loc 1 2107 0
 7838 01b0 1846     		mov	r0, r3
 7839 01b2 3037     		adds	r7, r7, #48
 7840              		.cfi_def_cfa_offset 8
 7841 01b4 BD46     		mov	sp, r7
 7842              		.cfi_def_cfa_register 13
 7843              		@ sp needed
 7844 01b6 80BD     		pop	{r7, pc}
 7845              	.L402:
 7846              		.align	2
 7847              	.L401:
 7848 01b8 00000000 		.word	channel
 7849 01bc AC000000 		.word	whitening_index
 7850 01c0 00000000 		.word	unpacked
 7851 01c4 00000000 		.word	le
 7852 01c8 2C000000 		.word	whitening
 7853 01cc 11080402 		.word	33818641
 7854 01d0 00000000 		.word	idle_rxbuf
 7855 01d4 38C00920 		.word	537509944
 7856 01d8 00000000 		.word	packet_cb
 7857              		.cfi_endproc
 7858              	.LFE32:
 7860              		.section	.text.connection_follow_cb,"ax",%progbits
 7861              		.align	2
 7862              		.global	connection_follow_cb
 7863              		.thumb
 7864              		.thumb_func
 7866              	connection_follow_cb:
 7867              	.LFB33:
2108:bluetooth_rxtx.c **** 
2109:bluetooth_rxtx.c **** /**
ARM GAS  /tmp/cczWrdyg.s 			page 175


2110:bluetooth_rxtx.c ****  * Called when we receive a packet in connection following mode.
2111:bluetooth_rxtx.c ****  */
2112:bluetooth_rxtx.c **** void connection_follow_cb(u8 *packet) {
 7868              		.loc 1 2112 0
 7869              		.cfi_startproc
 7870              		@ args = 0, pretend = 0, frame = 40
 7871              		@ frame_needed = 1, uses_anonymous_args = 0
 7872 0000 80B5     		push	{r7, lr}
 7873              		.cfi_def_cfa_offset 8
 7874              		.cfi_offset 7, -8
 7875              		.cfi_offset 14, -4
 7876 0002 8AB0     		sub	sp, sp, #40
 7877              		.cfi_def_cfa_offset 48
 7878 0004 00AF     		add	r7, sp, #0
 7879              		.cfi_def_cfa_register 7
 7880 0006 7860     		str	r0, [r7, #4]
2113:bluetooth_rxtx.c **** 	int i;
2114:bluetooth_rxtx.c **** 	u32 aa = 0;
 7881              		.loc 1 2114 0
 7882 0008 0023     		movs	r3, #0
 7883 000a 3B62     		str	r3, [r7, #32]
2115:bluetooth_rxtx.c **** 
2116:bluetooth_rxtx.c **** #define ADV_ADDRESS_IDX 0
2117:bluetooth_rxtx.c **** #define HEADER_IDX 4
2118:bluetooth_rxtx.c **** #define DATA_LEN_IDX 5
2119:bluetooth_rxtx.c **** #define DATA_START_IDX 6
2120:bluetooth_rxtx.c **** 
2121:bluetooth_rxtx.c **** 	u8 *adv_addr = &packet[ADV_ADDRESS_IDX];
 7884              		.loc 1 2121 0
 7885 000c 7B68     		ldr	r3, [r7, #4]
 7886 000e FB61     		str	r3, [r7, #28]
2122:bluetooth_rxtx.c **** 	u8 header = packet[HEADER_IDX];
 7887              		.loc 1 2122 0
 7888 0010 7B68     		ldr	r3, [r7, #4]
 7889 0012 1B79     		ldrb	r3, [r3, #4]
 7890 0014 FB76     		strb	r3, [r7, #27]
2123:bluetooth_rxtx.c **** 	u8 *data_len = &packet[DATA_LEN_IDX];
 7891              		.loc 1 2123 0
 7892 0016 7B68     		ldr	r3, [r7, #4]
 7893 0018 0533     		adds	r3, r3, #5
 7894 001a 7B61     		str	r3, [r7, #20]
2124:bluetooth_rxtx.c **** 	u8 *data = &packet[DATA_START_IDX];
 7895              		.loc 1 2124 0
 7896 001c 7B68     		ldr	r3, [r7, #4]
 7897 001e 0633     		adds	r3, r3, #6
 7898 0020 3B61     		str	r3, [r7, #16]
2125:bluetooth_rxtx.c **** 	u8 *crc = &packet[DATA_START_IDX + *data_len];
 7899              		.loc 1 2125 0
 7900 0022 7B69     		ldr	r3, [r7, #20]
 7901 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 7902 0026 0633     		adds	r3, r3, #6
 7903 0028 1A46     		mov	r2, r3
 7904 002a 7B68     		ldr	r3, [r7, #4]
 7905 002c 1344     		add	r3, r3, r2
 7906 002e FB60     		str	r3, [r7, #12]
2126:bluetooth_rxtx.c **** 
2127:bluetooth_rxtx.c **** 	if (le.link_state == LINK_CONN_PENDING) {
ARM GAS  /tmp/cczWrdyg.s 			page 176


 7907              		.loc 1 2127 0
 7908 0030 8B4B     		ldr	r3, .L413
 7909 0032 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7910 0034 022B     		cmp	r3, #2
 7911 0036 1CD1     		bne	.L404
2128:bluetooth_rxtx.c **** 		// We received a packet in the connection pending state, so now the device *should* be connected
2129:bluetooth_rxtx.c **** 		le.link_state = LINK_CONNECTED;
 7912              		.loc 1 2129 0
 7913 0038 894B     		ldr	r3, .L413
 7914 003a 0322     		movs	r2, #3
 7915 003c 1A75     		strb	r2, [r3, #20]
2130:bluetooth_rxtx.c **** 		le.conn_epoch = clkn;
 7916              		.loc 1 2130 0
 7917 003e 894B     		ldr	r3, .L413+4
 7918 0040 1B68     		ldr	r3, [r3]
 7919 0042 874A     		ldr	r2, .L413
 7920 0044 9361     		str	r3, [r2, #24]
2131:bluetooth_rxtx.c **** 		le.interval_timer = le.conn_interval - 1;
 7921              		.loc 1 2131 0
 7922 0046 864B     		ldr	r3, .L413
 7923 0048 DB8B     		ldrh	r3, [r3, #30]
 7924 004a 013B     		subs	r3, r3, #1
 7925 004c 9AB2     		uxth	r2, r3
 7926 004e 844B     		ldr	r3, .L413
 7927 0050 9A83     		strh	r2, [r3, #28]	@ movhi
2132:bluetooth_rxtx.c **** 		le.conn_count = 0;
 7928              		.loc 1 2132 0
 7929 0052 834B     		ldr	r3, .L413
 7930 0054 0022     		movs	r2, #0
 7931 0056 1A84     		strh	r2, [r3, #32]	@ movhi
2133:bluetooth_rxtx.c **** 		le.update_pending = 0;
 7932              		.loc 1 2133 0
 7933 0058 814B     		ldr	r3, .L413
 7934 005a 0022     		movs	r2, #0
 7935 005c 9A62     		str	r2, [r3, #40]
2134:bluetooth_rxtx.c **** 
2135:bluetooth_rxtx.c **** 		// hue hue hue
2136:bluetooth_rxtx.c **** 		if (jam_mode != JAM_NONE)
 7936              		.loc 1 2136 0
 7937 005e 824B     		ldr	r3, .L413+8
 7938 0060 1B78     		ldrb	r3, [r3]
 7939 0062 DBB2     		uxtb	r3, r3
 7940 0064 002B     		cmp	r3, #0
 7941 0066 00F0F780 		beq	.L403
2137:bluetooth_rxtx.c **** 			le_jam_count = JAM_COUNT_DEFAULT;
 7942              		.loc 1 2137 0
 7943 006a 804B     		ldr	r3, .L413+12
 7944 006c 2822     		movs	r2, #40
 7945 006e 1A60     		str	r2, [r3]
 7946 0070 F2E0     		b	.L403
 7947              	.L404:
2138:bluetooth_rxtx.c **** 
2139:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_CONNECTED) {
 7948              		.loc 1 2139 0
 7949 0072 7B4B     		ldr	r3, .L413
 7950 0074 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 7951 0076 032B     		cmp	r3, #3
ARM GAS  /tmp/cczWrdyg.s 			page 177


 7952 0078 6FD1     		bne	.L407
 7953              	.LBB12:
2140:bluetooth_rxtx.c **** 		u8 llid =  header & 0x03;
 7954              		.loc 1 2140 0
 7955 007a FB7E     		ldrb	r3, [r7, #27]
 7956 007c 03F00303 		and	r3, r3, #3
 7957 0080 FB72     		strb	r3, [r7, #11]
2141:bluetooth_rxtx.c **** 
2142:bluetooth_rxtx.c **** 		// Apply any connection parameter update if necessary
2143:bluetooth_rxtx.c **** 		if (le.update_pending && le.conn_count == le.update_instant) {
 7958              		.loc 1 2143 0
 7959 0082 774B     		ldr	r3, .L413
 7960 0084 9B6A     		ldr	r3, [r3, #40]
 7961 0086 002B     		cmp	r3, #0
 7962 0088 21D0     		beq	.L408
 7963              		.loc 1 2143 0 is_stmt 0 discriminator 1
 7964 008a 754B     		ldr	r3, .L413
 7965 008c 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 7966 008e 9AB2     		uxth	r2, r3
 7967 0090 734B     		ldr	r3, .L413
 7968 0092 9B8D     		ldrh	r3, [r3, #44]
 7969 0094 9A42     		cmp	r2, r3
 7970 0096 1AD1     		bne	.L408
2144:bluetooth_rxtx.c **** 			// This is the first packet received in the connection interval for which the new parameters app
2145:bluetooth_rxtx.c **** 			le.conn_epoch = clkn;
 7971              		.loc 1 2145 0 is_stmt 1
 7972 0098 724B     		ldr	r3, .L413+4
 7973 009a 1B68     		ldr	r3, [r3]
 7974 009c 704A     		ldr	r2, .L413
 7975 009e 9361     		str	r3, [r2, #24]
2146:bluetooth_rxtx.c **** 			le.conn_interval = le.interval_update;
 7976              		.loc 1 2146 0
 7977 00a0 6F4B     		ldr	r3, .L413
 7978 00a2 DA8D     		ldrh	r2, [r3, #46]
 7979 00a4 6E4B     		ldr	r3, .L413
 7980 00a6 DA83     		strh	r2, [r3, #30]	@ movhi
2147:bluetooth_rxtx.c **** 			le.interval_timer = le.interval_update - 1;
 7981              		.loc 1 2147 0
 7982 00a8 6D4B     		ldr	r3, .L413
 7983 00aa DB8D     		ldrh	r3, [r3, #46]
 7984 00ac 013B     		subs	r3, r3, #1
 7985 00ae 9AB2     		uxth	r2, r3
 7986 00b0 6B4B     		ldr	r3, .L413
 7987 00b2 9A83     		strh	r2, [r3, #28]	@ movhi
2148:bluetooth_rxtx.c **** 			le.win_size = le.win_size_update;
 7988              		.loc 1 2148 0
 7989 00b4 6A4B     		ldr	r3, .L413
 7990 00b6 93F83020 		ldrb	r2, [r3, #48]	@ zero_extendqisi2
 7991 00ba 694B     		ldr	r3, .L413
 7992 00bc 83F82220 		strb	r2, [r3, #34]
2149:bluetooth_rxtx.c **** 			le.win_offset = le.win_offset_update;
 7993              		.loc 1 2149 0
 7994 00c0 674B     		ldr	r3, .L413
 7995 00c2 5A8E     		ldrh	r2, [r3, #50]
 7996 00c4 664B     		ldr	r3, .L413
 7997 00c6 9A84     		strh	r2, [r3, #36]	@ movhi
2150:bluetooth_rxtx.c **** 			le.update_pending = 0;
ARM GAS  /tmp/cczWrdyg.s 			page 178


 7998              		.loc 1 2150 0
 7999 00c8 654B     		ldr	r3, .L413
 8000 00ca 0022     		movs	r2, #0
 8001 00cc 9A62     		str	r2, [r3, #40]
 8002              	.L408:
2151:bluetooth_rxtx.c **** 		}
2152:bluetooth_rxtx.c **** 
2153:bluetooth_rxtx.c **** 		if (llid == 0x03 && data[0] == 0x00) {
 8003              		.loc 1 2153 0
 8004 00ce FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 8005 00d0 032B     		cmp	r3, #3
 8006 00d2 41D1     		bne	.L409
 8007              		.loc 1 2153 0 is_stmt 0 discriminator 1
 8008 00d4 3B69     		ldr	r3, [r7, #16]
 8009 00d6 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8010 00d8 002B     		cmp	r3, #0
 8011 00da 3DD1     		bne	.L409
2154:bluetooth_rxtx.c **** 			// This is a CONNECTION_UPDATE_REQ.
2155:bluetooth_rxtx.c **** 			// The host is changing the connection parameters.
2156:bluetooth_rxtx.c **** 			le.win_size_update = packet[7];
 8012              		.loc 1 2156 0 is_stmt 1
 8013 00dc 7B68     		ldr	r3, [r7, #4]
 8014 00de DA79     		ldrb	r2, [r3, #7]	@ zero_extendqisi2
 8015 00e0 5F4B     		ldr	r3, .L413
 8016 00e2 83F83020 		strb	r2, [r3, #48]
2157:bluetooth_rxtx.c **** 			le.win_offset_update = packet[8] + ((u16)packet[9] << 8);
 8017              		.loc 1 2157 0
 8018 00e6 7B68     		ldr	r3, [r7, #4]
 8019 00e8 0833     		adds	r3, r3, #8
 8020 00ea 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8021 00ec 9AB2     		uxth	r2, r3
 8022 00ee 7B68     		ldr	r3, [r7, #4]
 8023 00f0 0933     		adds	r3, r3, #9
 8024 00f2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8025 00f4 9BB2     		uxth	r3, r3
 8026 00f6 1B02     		lsls	r3, r3, #8
 8027 00f8 9BB2     		uxth	r3, r3
 8028 00fa 1344     		add	r3, r3, r2
 8029 00fc 9AB2     		uxth	r2, r3
 8030 00fe 584B     		ldr	r3, .L413
 8031 0100 5A86     		strh	r2, [r3, #50]	@ movhi
2158:bluetooth_rxtx.c **** 			le.interval_update = packet[10] + ((u16)packet[11] << 8);
 8032              		.loc 1 2158 0
 8033 0102 7B68     		ldr	r3, [r7, #4]
 8034 0104 0A33     		adds	r3, r3, #10
 8035 0106 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8036 0108 9AB2     		uxth	r2, r3
 8037 010a 7B68     		ldr	r3, [r7, #4]
 8038 010c 0B33     		adds	r3, r3, #11
 8039 010e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8040 0110 9BB2     		uxth	r3, r3
 8041 0112 1B02     		lsls	r3, r3, #8
 8042 0114 9BB2     		uxth	r3, r3
 8043 0116 1344     		add	r3, r3, r2
 8044 0118 9AB2     		uxth	r2, r3
 8045 011a 514B     		ldr	r3, .L413
 8046 011c DA85     		strh	r2, [r3, #46]	@ movhi
ARM GAS  /tmp/cczWrdyg.s 			page 179


2159:bluetooth_rxtx.c **** 			le.update_instant = packet[16] + ((u16)packet[17] << 8);
 8047              		.loc 1 2159 0
 8048 011e 7B68     		ldr	r3, [r7, #4]
 8049 0120 1033     		adds	r3, r3, #16
 8050 0122 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8051 0124 9AB2     		uxth	r2, r3
 8052 0126 7B68     		ldr	r3, [r7, #4]
 8053 0128 1133     		adds	r3, r3, #17
 8054 012a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8055 012c 9BB2     		uxth	r3, r3
 8056 012e 1B02     		lsls	r3, r3, #8
 8057 0130 9BB2     		uxth	r3, r3
 8058 0132 1344     		add	r3, r3, r2
 8059 0134 9AB2     		uxth	r2, r3
 8060 0136 4A4B     		ldr	r3, .L413
 8061 0138 9A85     		strh	r2, [r3, #44]	@ movhi
2160:bluetooth_rxtx.c **** 			if (le.update_instant - le.conn_count < 32767)
 8062              		.loc 1 2160 0
 8063 013a 494B     		ldr	r3, .L413
 8064 013c 9B8D     		ldrh	r3, [r3, #44]
 8065 013e 1A46     		mov	r2, r3
 8066 0140 474B     		ldr	r3, .L413
 8067 0142 1B8C     		ldrh	r3, [r3, #32]	@ movhi
 8068 0144 9BB2     		uxth	r3, r3
 8069 0146 D31A     		subs	r3, r2, r3
 8070 0148 47F6FE72 		movw	r2, #32766
 8071 014c 9342     		cmp	r3, r2
 8072 014e 03DC     		bgt	.L409
2161:bluetooth_rxtx.c **** 				le.update_pending = 1;
 8073              		.loc 1 2161 0
 8074 0150 434B     		ldr	r3, .L413
 8075 0152 0122     		movs	r2, #1
 8076 0154 9A62     		str	r2, [r3, #40]
 8077              	.LBE12:
 8078 0156 7FE0     		b	.L403
 8079              	.L409:
 8080 0158 7EE0     		b	.L403
 8081              	.L407:
2162:bluetooth_rxtx.c **** 		}
2163:bluetooth_rxtx.c **** 
2164:bluetooth_rxtx.c **** 	} else if (le.link_state == LINK_LISTENING) {
 8082              		.loc 1 2164 0
 8083 015a 414B     		ldr	r3, .L413
 8084 015c 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 8085 015e 012B     		cmp	r3, #1
 8086 0160 7AD1     		bne	.L403
 8087              	.LBB13:
2165:bluetooth_rxtx.c **** 		u8 pkt_type = packet[4] & 0x0F;
 8088              		.loc 1 2165 0
 8089 0162 7B68     		ldr	r3, [r7, #4]
 8090 0164 0433     		adds	r3, r3, #4
 8091 0166 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8092 0168 03F00F03 		and	r3, r3, #15
 8093 016c BB72     		strb	r3, [r7, #10]
2166:bluetooth_rxtx.c **** 		if (pkt_type == 0x05) {
 8094              		.loc 1 2166 0
 8095 016e BB7A     		ldrb	r3, [r7, #10]	@ zero_extendqisi2
ARM GAS  /tmp/cczWrdyg.s 			page 180


 8096 0170 052B     		cmp	r3, #5
 8097 0172 71D1     		bne	.L403
2167:bluetooth_rxtx.c **** 			// This is a connect packet
2168:bluetooth_rxtx.c **** 			// if we have a target, see if InitA or AdvA matches
2169:bluetooth_rxtx.c **** 			if (le.target_set &&
 8098              		.loc 1 2169 0
 8099 0174 3A4B     		ldr	r3, .L413
 8100 0176 DB6B     		ldr	r3, [r3, #60]
 8101 0178 002B     		cmp	r3, #0
 8102 017a 14D0     		beq	.L410
2170:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8103              		.loc 1 2170 0 discriminator 1
 8104 017c 7B68     		ldr	r3, [r7, #4]
 8105 017e 0633     		adds	r3, r3, #6
 8106 0180 3B48     		ldr	r0, .L413+16
 8107 0182 1946     		mov	r1, r3
 8108 0184 0622     		movs	r2, #6
 8109 0186 FFF7FEFF 		bl	memcmp
 8110 018a 0346     		mov	r3, r0
2169:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8111              		.loc 1 2169 0 discriminator 1
 8112 018c 002B     		cmp	r3, #0
 8113 018e 0AD0     		beq	.L410
2171:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[12], 6)) {  // Target address doesn't match Advertiser.
 8114              		.loc 1 2171 0
 8115 0190 7B68     		ldr	r3, [r7, #4]
 8116 0192 0C33     		adds	r3, r3, #12
 8117 0194 3648     		ldr	r0, .L413+16
 8118 0196 1946     		mov	r1, r3
 8119 0198 0622     		movs	r2, #6
 8120 019a FFF7FEFF 		bl	memcmp
 8121 019e 0346     		mov	r3, r0
2170:bluetooth_rxtx.c **** 			    memcmp(le.target, &packet[6], 6) &&  // Target address doesn't match Initiator.
 8122              		.loc 1 2170 0
 8123 01a0 002B     		cmp	r3, #0
 8124 01a2 00D0     		beq	.L410
2172:bluetooth_rxtx.c **** 				return;
 8125              		.loc 1 2172 0
 8126 01a4 58E0     		b	.L403
 8127              	.L410:
2173:bluetooth_rxtx.c **** 			}
2174:bluetooth_rxtx.c **** 
2175:bluetooth_rxtx.c **** 			le.link_state = LINK_CONN_PENDING;
 8128              		.loc 1 2175 0
 8129 01a6 2E4B     		ldr	r3, .L413
 8130 01a8 0222     		movs	r2, #2
 8131 01aa 1A75     		strb	r2, [r3, #20]
2176:bluetooth_rxtx.c **** 			le.crc_verify = 0; // we will drop many packets if we attempt to filter by CRC
 8132              		.loc 1 2176 0
 8133 01ac 2C4B     		ldr	r3, .L413
 8134 01ae 0022     		movs	r2, #0
 8135 01b0 1A61     		str	r2, [r3, #16]
2177:bluetooth_rxtx.c **** 
2178:bluetooth_rxtx.c **** 			for (i = 0; i < 4; ++i)
 8136              		.loc 1 2178 0
 8137 01b2 0023     		movs	r3, #0
 8138 01b4 7B62     		str	r3, [r7, #36]
ARM GAS  /tmp/cczWrdyg.s 			page 181


 8139 01b6 11E0     		b	.L411
 8140              	.L412:
2179:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8141              		.loc 1 2179 0 discriminator 3
 8142 01b8 7B6A     		ldr	r3, [r7, #36]
 8143 01ba 1233     		adds	r3, r3, #18
 8144 01bc 1A46     		mov	r2, r3
 8145 01be 7B68     		ldr	r3, [r7, #4]
 8146 01c0 1344     		add	r3, r3, r2
 8147 01c2 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8148 01c4 1A46     		mov	r2, r3
 8149 01c6 7B6A     		ldr	r3, [r7, #36]
 8150 01c8 DB00     		lsls	r3, r3, #3
 8151 01ca 02FA03F3 		lsl	r3, r2, r3
 8152 01ce 1A46     		mov	r2, r3
 8153 01d0 3B6A     		ldr	r3, [r7, #32]
 8154 01d2 1343     		orrs	r3, r3, r2
 8155 01d4 3B62     		str	r3, [r7, #32]
2178:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8156              		.loc 1 2178 0 discriminator 3
 8157 01d6 7B6A     		ldr	r3, [r7, #36]
 8158 01d8 0133     		adds	r3, r3, #1
 8159 01da 7B62     		str	r3, [r7, #36]
 8160              	.L411:
2178:bluetooth_rxtx.c **** 				aa |= packet[18+i] << (i*8);
 8161              		.loc 1 2178 0 is_stmt 0 discriminator 1
 8162 01dc 7B6A     		ldr	r3, [r7, #36]
 8163 01de 032B     		cmp	r3, #3
 8164 01e0 EADD     		ble	.L412
2180:bluetooth_rxtx.c **** 			le_set_access_address(aa);
 8165              		.loc 1 2180 0 is_stmt 1
 8166 01e2 386A     		ldr	r0, [r7, #32]
 8167 01e4 FFF7FEFF 		bl	le_set_access_address
2181:bluetooth_rxtx.c **** 
2182:bluetooth_rxtx.c **** #define CRC_INIT (2+4+6+6+4)
2183:bluetooth_rxtx.c **** 			le.crc_init = (packet[CRC_INIT+2] << 16)
 8168              		.loc 1 2183 0
 8169 01e8 7B68     		ldr	r3, [r7, #4]
 8170 01ea 1833     		adds	r3, r3, #24
 8171 01ec 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8172 01ee 1A04     		lsls	r2, r3, #16
2184:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8173              		.loc 1 2184 0
 8174 01f0 7B68     		ldr	r3, [r7, #4]
 8175 01f2 1733     		adds	r3, r3, #23
 8176 01f4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8177 01f6 1B02     		lsls	r3, r3, #8
 8178 01f8 1343     		orrs	r3, r3, r2
2185:bluetooth_rxtx.c **** 						|  packet[CRC_INIT+0];
 8179              		.loc 1 2185 0
 8180 01fa 7A68     		ldr	r2, [r7, #4]
 8181 01fc 1632     		adds	r2, r2, #22
 8182 01fe 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8183 0200 1343     		orrs	r3, r3, r2
2183:bluetooth_rxtx.c **** 						| (packet[CRC_INIT+1] << 8)
 8184              		.loc 1 2183 0
 8185 0202 1A46     		mov	r2, r3
ARM GAS  /tmp/cczWrdyg.s 			page 182


 8186 0204 164B     		ldr	r3, .L413
 8187 0206 9A60     		str	r2, [r3, #8]
2186:bluetooth_rxtx.c **** 			le.crc_init_reversed = rbit(le.crc_init);
 8188              		.loc 1 2186 0
 8189 0208 154B     		ldr	r3, .L413
 8190 020a 9B68     		ldr	r3, [r3, #8]
 8191 020c 1846     		mov	r0, r3
 8192 020e FFF7FEFF 		bl	rbit
 8193 0212 0246     		mov	r2, r0
 8194 0214 124B     		ldr	r3, .L413
 8195 0216 DA60     		str	r2, [r3, #12]
2187:bluetooth_rxtx.c **** 
2188:bluetooth_rxtx.c **** #define WIN_SIZE (2+4+6+6+4+3)
2189:bluetooth_rxtx.c **** 			le.win_size = packet[WIN_SIZE];
 8196              		.loc 1 2189 0
 8197 0218 7B68     		ldr	r3, [r7, #4]
 8198 021a 5A7E     		ldrb	r2, [r3, #25]	@ zero_extendqisi2
 8199 021c 104B     		ldr	r3, .L413
 8200 021e 83F82220 		strb	r2, [r3, #34]
2190:bluetooth_rxtx.c **** 
2191:bluetooth_rxtx.c **** #define WIN_OFFSET (2+4+6+6+4+3+1)
2192:bluetooth_rxtx.c **** 			le.win_offset = packet[WIN_OFFSET];
 8201              		.loc 1 2192 0
 8202 0222 7B68     		ldr	r3, [r7, #4]
 8203 0224 1A33     		adds	r3, r3, #26
 8204 0226 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8205 0228 9AB2     		uxth	r2, r3
 8206 022a 0D4B     		ldr	r3, .L413
 8207 022c 9A84     		strh	r2, [r3, #36]	@ movhi
2193:bluetooth_rxtx.c **** 
2194:bluetooth_rxtx.c **** #define CONN_INTERVAL (2+4+6+6+4+3+1+2)
2195:bluetooth_rxtx.c **** 			le.conn_interval = packet[CONN_INTERVAL];
 8208              		.loc 1 2195 0
 8209 022e 7B68     		ldr	r3, [r7, #4]
 8210 0230 1C33     		adds	r3, r3, #28
 8211 0232 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8212 0234 9AB2     		uxth	r2, r3
 8213 0236 0A4B     		ldr	r3, .L413
 8214 0238 DA83     		strh	r2, [r3, #30]	@ movhi
2196:bluetooth_rxtx.c **** 
2197:bluetooth_rxtx.c **** #define CHANNEL_INC (2+4+6+6+4+3+1+2+2+2+2+5)
2198:bluetooth_rxtx.c **** 			le.channel_increment = packet[CHANNEL_INC] & 0x1f;
 8215              		.loc 1 2198 0
 8216 023a 7B68     		ldr	r3, [r7, #4]
 8217 023c 2733     		adds	r3, r3, #39
 8218 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8219 0240 03F01F03 		and	r3, r3, #31
 8220 0244 DAB2     		uxtb	r2, r3
 8221 0246 064B     		ldr	r3, .L413
 8222 0248 9A75     		strb	r2, [r3, #22]
2199:bluetooth_rxtx.c **** 			le.channel_idx = le.channel_increment;
 8223              		.loc 1 2199 0
 8224 024a 054B     		ldr	r3, .L413
 8225 024c 9A7D     		ldrb	r2, [r3, #22]	@ zero_extendqisi2
 8226 024e 044B     		ldr	r3, .L413
 8227 0250 5A75     		strb	r2, [r3, #21]
2200:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cczWrdyg.s 			page 183


2201:bluetooth_rxtx.c **** 			// Hop to the initial channel immediately
2202:bluetooth_rxtx.c **** 			do_hop = 1;
 8228              		.loc 1 2202 0
 8229 0252 084B     		ldr	r3, .L413+20
 8230 0254 0122     		movs	r2, #1
 8231 0256 1A70     		strb	r2, [r3]
 8232              	.L403:
 8233              	.LBE13:
2203:bluetooth_rxtx.c **** 		}
2204:bluetooth_rxtx.c **** 	}
2205:bluetooth_rxtx.c **** }
 8234              		.loc 1 2205 0
 8235 0258 2837     		adds	r7, r7, #40
 8236              		.cfi_def_cfa_offset 8
 8237 025a BD46     		mov	sp, r7
 8238              		.cfi_def_cfa_register 13
 8239              		@ sp needed
 8240 025c 80BD     		pop	{r7, pc}
 8241              	.L414:
 8242 025e 00BF     		.align	2
 8243              	.L413:
 8244 0260 00000000 		.word	le
 8245 0264 00000000 		.word	clkn
 8246 0268 00000000 		.word	jam_mode
 8247 026c 00000000 		.word	le_jam_count
 8248 0270 34000000 		.word	le+52
 8249 0274 00000000 		.word	do_hop
 8250              		.cfi_endproc
 8251              	.LFE33:
 8253              		.section	.text.bt_follow_le,"ax",%progbits
 8254              		.align	2
 8255              		.global	bt_follow_le
 8256              		.thumb
 8257              		.thumb_func
 8259              	bt_follow_le:
 8260              	.LFB34:
2206:bluetooth_rxtx.c **** 
2207:bluetooth_rxtx.c **** void bt_follow_le() {
 8261              		.loc 1 2207 0
 8262              		.cfi_startproc
 8263              		@ args = 0, pretend = 0, frame = 0
 8264              		@ frame_needed = 1, uses_anonymous_args = 0
 8265 0000 80B5     		push	{r7, lr}
 8266              		.cfi_def_cfa_offset 8
 8267              		.cfi_offset 7, -8
 8268              		.cfi_offset 14, -4
 8269 0002 00AF     		add	r7, sp, #0
 8270              		.cfi_def_cfa_register 7
2208:bluetooth_rxtx.c **** 	reset_le();
 8271              		.loc 1 2208 0
 8272 0004 FFF7FEFF 		bl	reset_le
2209:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
 8273              		.loc 1 2209 0
 8274 0008 044B     		ldr	r3, .L416
 8275 000a 054A     		ldr	r2, .L416+4
 8276 000c 1A60     		str	r2, [r3]
2210:bluetooth_rxtx.c **** 	bt_le_sync(MODE_BT_FOLLOW_LE);
ARM GAS  /tmp/cczWrdyg.s 			page 184


 8277              		.loc 1 2210 0
 8278 000e 0920     		movs	r0, #9
 8279 0010 FFF7FEFF 		bl	bt_le_sync
2211:bluetooth_rxtx.c **** 
2212:bluetooth_rxtx.c **** 	/* old non-sync mode
2213:bluetooth_rxtx.c **** 	data_cb = cb_follow_le;
2214:bluetooth_rxtx.c **** 	packet_cb = connection_follow_cb;
2215:bluetooth_rxtx.c **** 	bt_generic_le(MODE_BT_FOLLOW_LE);
2216:bluetooth_rxtx.c **** 	*/
2217:bluetooth_rxtx.c **** 
2218:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 8280              		.loc 1 2218 0
 8281 0014 034B     		ldr	r3, .L416+8
 8282 0016 0022     		movs	r2, #0
 8283 0018 1A70     		strb	r2, [r3]
2219:bluetooth_rxtx.c **** }
 8284              		.loc 1 2219 0
 8285 001a 80BD     		pop	{r7, pc}
 8286              	.L417:
 8287              		.align	2
 8288              	.L416:
 8289 001c 00000000 		.word	packet_cb
 8290 0020 00000000 		.word	connection_follow_cb
 8291 0024 00000000 		.word	mode
 8292              		.cfi_endproc
 8293              	.LFE34:
 8295              		.section	.text.le_promisc_state,"ax",%progbits
 8296              		.align	2
 8297              		.global	le_promisc_state
 8298              		.thumb
 8299              		.thumb_func
 8301              	le_promisc_state:
 8302              	.LFB35:
2220:bluetooth_rxtx.c **** 
2221:bluetooth_rxtx.c **** // issue state change message
2222:bluetooth_rxtx.c **** void le_promisc_state(u8 type, void *data, unsigned len) {
 8303              		.loc 1 2222 0
 8304              		.cfi_startproc
 8305              		@ args = 0, pretend = 0, frame = 72
 8306              		@ frame_needed = 1, uses_anonymous_args = 0
 8307 0000 80B5     		push	{r7, lr}
 8308              		.cfi_def_cfa_offset 8
 8309              		.cfi_offset 7, -8
 8310              		.cfi_offset 14, -4
 8311 0002 92B0     		sub	sp, sp, #72
 8312              		.cfi_def_cfa_offset 80
 8313 0004 00AF     		add	r7, sp, #0
 8314              		.cfi_def_cfa_register 7
 8315 0006 0346     		mov	r3, r0
 8316 0008 B960     		str	r1, [r7, #8]
 8317 000a 7A60     		str	r2, [r7, #4]
 8318 000c FB73     		strb	r3, [r7, #15]
2223:bluetooth_rxtx.c **** 	u8 buf[50] = { 0, };
 8319              		.loc 1 2223 0
 8320 000e 07F11403 		add	r3, r7, #20
 8321 0012 0022     		movs	r2, #0
 8322 0014 1A60     		str	r2, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 185


 8323 0016 0433     		adds	r3, r3, #4
 8324 0018 0022     		movs	r2, #0
 8325 001a 1A60     		str	r2, [r3]
 8326 001c 0433     		adds	r3, r3, #4
 8327 001e 0022     		movs	r2, #0
 8328 0020 1A60     		str	r2, [r3]
 8329 0022 0433     		adds	r3, r3, #4
 8330 0024 0022     		movs	r2, #0
 8331 0026 1A60     		str	r2, [r3]
 8332 0028 0433     		adds	r3, r3, #4
 8333 002a 0022     		movs	r2, #0
 8334 002c 1A60     		str	r2, [r3]
 8335 002e 0433     		adds	r3, r3, #4
 8336 0030 0022     		movs	r2, #0
 8337 0032 1A60     		str	r2, [r3]
 8338 0034 0433     		adds	r3, r3, #4
 8339 0036 0022     		movs	r2, #0
 8340 0038 1A60     		str	r2, [r3]
 8341 003a 0433     		adds	r3, r3, #4
 8342 003c 0022     		movs	r2, #0
 8343 003e 1A60     		str	r2, [r3]
 8344 0040 0433     		adds	r3, r3, #4
 8345 0042 0022     		movs	r2, #0
 8346 0044 1A60     		str	r2, [r3]
 8347 0046 0433     		adds	r3, r3, #4
 8348 0048 0022     		movs	r2, #0
 8349 004a 1A60     		str	r2, [r3]
 8350 004c 0433     		adds	r3, r3, #4
 8351 004e 0022     		movs	r2, #0
 8352 0050 1A60     		str	r2, [r3]
 8353 0052 0433     		adds	r3, r3, #4
 8354 0054 0022     		movs	r2, #0
 8355 0056 1A60     		str	r2, [r3]
 8356 0058 0433     		adds	r3, r3, #4
 8357 005a 0022     		movs	r2, #0
 8358 005c 1A80     		strh	r2, [r3]	@ movhi
 8359 005e 0233     		adds	r3, r3, #2
2224:bluetooth_rxtx.c **** 	if (len > 49)
 8360              		.loc 1 2224 0
 8361 0060 7B68     		ldr	r3, [r7, #4]
 8362 0062 312B     		cmp	r3, #49
 8363 0064 01D9     		bls	.L419
2225:bluetooth_rxtx.c **** 		len = 49;
 8364              		.loc 1 2225 0
 8365 0066 3123     		movs	r3, #49
 8366 0068 7B60     		str	r3, [r7, #4]
 8367              	.L419:
2226:bluetooth_rxtx.c **** 
2227:bluetooth_rxtx.c **** 	buf[0] = type;
 8368              		.loc 1 2227 0
 8369 006a FB7B     		ldrb	r3, [r7, #15]
 8370 006c 3B75     		strb	r3, [r7, #20]
2228:bluetooth_rxtx.c **** 	memcpy(&buf[1], data, len);
 8371              		.loc 1 2228 0
 8372 006e 07F11403 		add	r3, r7, #20
 8373 0072 0133     		adds	r3, r3, #1
 8374 0074 1846     		mov	r0, r3
ARM GAS  /tmp/cczWrdyg.s 			page 186


 8375 0076 B968     		ldr	r1, [r7, #8]
 8376 0078 7A68     		ldr	r2, [r7, #4]
 8377 007a FFF7FEFF 		bl	memcpy
2229:bluetooth_rxtx.c **** 	enqueue(LE_PROMISC, buf);
 8378              		.loc 1 2229 0
 8379 007e 07F11403 		add	r3, r7, #20
 8380 0082 0520     		movs	r0, #5
 8381 0084 1946     		mov	r1, r3
 8382 0086 FFF7FEFF 		bl	enqueue
2230:bluetooth_rxtx.c **** }
 8383              		.loc 1 2230 0
 8384 008a 4837     		adds	r7, r7, #72
 8385              		.cfi_def_cfa_offset 8
 8386 008c BD46     		mov	sp, r7
 8387              		.cfi_def_cfa_register 13
 8388              		@ sp needed
 8389 008e 80BD     		pop	{r7, pc}
 8390              		.cfi_endproc
 8391              	.LFE35:
 8393              		.section	.text.promisc_recover_hop_increment,"ax",%progbits
 8394              		.align	2
 8395              		.global	promisc_recover_hop_increment
 8396              		.thumb
 8397              		.thumb_func
 8399              	promisc_recover_hop_increment:
 8400              	.LFB36:
2231:bluetooth_rxtx.c **** 
2232:bluetooth_rxtx.c **** // divide, rounding to the nearest integer: round up at 0.5.
2233:bluetooth_rxtx.c **** #define DIVIDE_ROUND(N, D) ((N) + (D)/2) / (D)
2234:bluetooth_rxtx.c **** 
2235:bluetooth_rxtx.c **** void promisc_recover_hop_increment(u8 *packet) {
 8401              		.loc 1 2235 0
 8402              		.cfi_startproc
 8403              		@ args = 0, pretend = 0, frame = 16
 8404              		@ frame_needed = 1, uses_anonymous_args = 0
 8405 0000 80B5     		push	{r7, lr}
 8406              		.cfi_def_cfa_offset 8
 8407              		.cfi_offset 7, -8
 8408              		.cfi_offset 14, -4
 8409 0002 84B0     		sub	sp, sp, #16
 8410              		.cfi_def_cfa_offset 24
 8411 0004 00AF     		add	r7, sp, #0
 8412              		.cfi_def_cfa_register 7
 8413 0006 7860     		str	r0, [r7, #4]
2236:bluetooth_rxtx.c **** 	static u32 first_ts = 0;
2237:bluetooth_rxtx.c **** 	if (channel == 2404) {
 8414              		.loc 1 2237 0
 8415 0008 554B     		ldr	r3, .L427
 8416 000a 1B88     		ldrh	r3, [r3]	@ movhi
 8417 000c 9BB2     		uxth	r3, r3
 8418 000e 40F66412 		movw	r2, #2404
 8419 0012 9342     		cmp	r3, r2
 8420 0014 14D1     		bne	.L421
2238:bluetooth_rxtx.c **** 		first_ts = CLK100NS;
 8421              		.loc 1 2238 0
 8422 0016 534B     		ldr	r3, .L427+4
 8423 0018 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cczWrdyg.s 			page 187


 8424 001a C3F31303 		ubfx	r3, r3, #0, #20
 8425 001e 40F63542 		movw	r2, #3125
 8426 0022 02FB03F2 		mul	r2, r2, r3
 8427 0026 504B     		ldr	r3, .L427+8
 8428 0028 1B68     		ldr	r3, [r3]
 8429 002a 1344     		add	r3, r3, r2
 8430 002c 4F4A     		ldr	r2, .L427+12
 8431 002e 1360     		str	r3, [r2]
2239:bluetooth_rxtx.c **** 		hop_direct_channel = 2406;
 8432              		.loc 1 2239 0
 8433 0030 4F4B     		ldr	r3, .L427+16
 8434 0032 40F66612 		movw	r2, #2406
 8435 0036 1A80     		strh	r2, [r3]	@ movhi
2240:bluetooth_rxtx.c **** 		do_hop = 1;
 8436              		.loc 1 2240 0
 8437 0038 4E4B     		ldr	r3, .L427+20
 8438 003a 0122     		movs	r2, #1
 8439 003c 1A70     		strb	r2, [r3]
 8440 003e 8BE0     		b	.L420
 8441              	.L421:
2241:bluetooth_rxtx.c **** 	} else if (channel == 2406) {
 8442              		.loc 1 2241 0
 8443 0040 474B     		ldr	r3, .L427
 8444 0042 1B88     		ldrh	r3, [r3]	@ movhi
 8445 0044 9BB2     		uxth	r3, r3
 8446 0046 40F66612 		movw	r2, #2406
 8447 004a 9342     		cmp	r3, r2
 8448 004c 7DD1     		bne	.L423
 8449              	.LBB14:
2242:bluetooth_rxtx.c **** 		u32 second_ts = CLK100NS;
 8450              		.loc 1 2242 0
 8451 004e 454B     		ldr	r3, .L427+4
 8452 0050 1B68     		ldr	r3, [r3]
 8453 0052 C3F31303 		ubfx	r3, r3, #0, #20
 8454 0056 40F63542 		movw	r2, #3125
 8455 005a 02FB03F2 		mul	r2, r2, r3
 8456 005e 424B     		ldr	r3, .L427+8
 8457 0060 1B68     		ldr	r3, [r3]
 8458 0062 1344     		add	r3, r3, r2
 8459 0064 FB60     		str	r3, [r7, #12]
2243:bluetooth_rxtx.c **** 		if (second_ts < first_ts)
 8460              		.loc 1 2243 0
 8461 0066 414B     		ldr	r3, .L427+12
 8462 0068 1B68     		ldr	r3, [r3]
 8463 006a FA68     		ldr	r2, [r7, #12]
 8464 006c 9A42     		cmp	r2, r3
 8465 006e 05D2     		bcs	.L424
2244:bluetooth_rxtx.c **** 			second_ts += 3276800000; // handle rollover
 8466              		.loc 1 2244 0
 8467 0070 FB68     		ldr	r3, [r7, #12]
 8468 0072 03F14343 		add	r3, r3, #-1023410176
 8469 0076 03F5A003 		add	r3, r3, #5242880
 8470 007a FB60     		str	r3, [r7, #12]
 8471              	.L424:
2245:bluetooth_rxtx.c **** 		// Number of channels hopped between previous and current timestamp.
2246:bluetooth_rxtx.c **** 		u32 channels_hopped = DIVIDE_ROUND(second_ts - first_ts,
 8472              		.loc 1 2246 0
ARM GAS  /tmp/cczWrdyg.s 			page 188


 8473 007c 3B4B     		ldr	r3, .L427+12
 8474 007e 1B68     		ldr	r3, [r3]
 8475 0080 FA68     		ldr	r2, [r7, #12]
 8476 0082 D21A     		subs	r2, r2, r3
 8477 0084 3C4B     		ldr	r3, .L427+24
 8478 0086 DB8B     		ldrh	r3, [r3, #30]
 8479 0088 1946     		mov	r1, r3
 8480 008a 43F2D403 		movw	r3, #12500
 8481 008e 03FB01F3 		mul	r3, r3, r1
 8482 0092 D90F     		lsrs	r1, r3, #31
 8483 0094 0B44     		add	r3, r3, r1
 8484 0096 5B10     		asrs	r3, r3, #1
 8485 0098 1344     		add	r3, r3, r2
 8486 009a 374A     		ldr	r2, .L427+24
 8487 009c D28B     		ldrh	r2, [r2, #30]
 8488 009e 1146     		mov	r1, r2
 8489 00a0 43F2D402 		movw	r2, #12500
 8490 00a4 02FB01F2 		mul	r2, r2, r1
 8491 00a8 B3FBF2F3 		udiv	r3, r3, r2
 8492 00ac BB60     		str	r3, [r7, #8]
2247:bluetooth_rxtx.c **** 										   le.conn_interval * LE_BASECLK);
2248:bluetooth_rxtx.c **** 		if (channels_hopped < 37) {
 8493              		.loc 1 2248 0
 8494 00ae BB68     		ldr	r3, [r7, #8]
 8495 00b0 242B     		cmp	r3, #36
 8496 00b2 42D8     		bhi	.L425
2249:bluetooth_rxtx.c **** 			// Get the hop increment based on the number of channels hopped.
2250:bluetooth_rxtx.c **** 			le.channel_increment = hop_interval_lut[channels_hopped];
 8497              		.loc 1 2250 0
 8498 00b4 314A     		ldr	r2, .L427+28
 8499 00b6 BB68     		ldr	r3, [r7, #8]
 8500 00b8 1344     		add	r3, r3, r2
 8501 00ba 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 8502 00bc 2E4B     		ldr	r3, .L427+24
 8503 00be 9A75     		strb	r2, [r3, #22]
2251:bluetooth_rxtx.c **** 			le.interval_timer = le.conn_interval / 2;
 8504              		.loc 1 2251 0
 8505 00c0 2D4B     		ldr	r3, .L427+24
 8506 00c2 DB8B     		ldrh	r3, [r3, #30]
 8507 00c4 5B08     		lsrs	r3, r3, #1
 8508 00c6 9AB2     		uxth	r2, r3
 8509 00c8 2B4B     		ldr	r3, .L427+24
 8510 00ca 9A83     		strh	r2, [r3, #28]	@ movhi
2252:bluetooth_rxtx.c **** 			le.conn_count = 0;
 8511              		.loc 1 2252 0
 8512 00cc 2A4B     		ldr	r3, .L427+24
 8513 00ce 0022     		movs	r2, #0
 8514 00d0 1A84     		strh	r2, [r3, #32]	@ movhi
2253:bluetooth_rxtx.c **** 			le.conn_epoch = 0;
 8515              		.loc 1 2253 0
 8516 00d2 294B     		ldr	r3, .L427+24
 8517 00d4 0022     		movs	r2, #0
 8518 00d6 9A61     		str	r2, [r3, #24]
2254:bluetooth_rxtx.c **** 			do_hop = 0;
 8519              		.loc 1 2254 0
 8520 00d8 264B     		ldr	r3, .L427+20
 8521 00da 0022     		movs	r2, #0
ARM GAS  /tmp/cczWrdyg.s 			page 189


 8522 00dc 1A70     		strb	r2, [r3]
2255:bluetooth_rxtx.c **** 			// Move on to regular connection following.
2256:bluetooth_rxtx.c **** 			le.channel_idx = (1 + le.channel_increment) % 37;
 8523              		.loc 1 2256 0
 8524 00de 264B     		ldr	r3, .L427+24
 8525 00e0 9B7D     		ldrb	r3, [r3, #22]	@ zero_extendqisi2
 8526 00e2 5A1C     		adds	r2, r3, #1
 8527 00e4 264B     		ldr	r3, .L427+32
 8528 00e6 82FB0301 		smull	r0, r1, r2, r3
 8529 00ea 5318     		adds	r3, r2, r1
 8530 00ec 5911     		asrs	r1, r3, #5
 8531 00ee D317     		asrs	r3, r2, #31
 8532 00f0 C91A     		subs	r1, r1, r3
 8533 00f2 0B46     		mov	r3, r1
 8534 00f4 DB00     		lsls	r3, r3, #3
 8535 00f6 0B44     		add	r3, r3, r1
 8536 00f8 9B00     		lsls	r3, r3, #2
 8537 00fa 0B44     		add	r3, r3, r1
 8538 00fc D11A     		subs	r1, r2, r3
 8539 00fe CAB2     		uxtb	r2, r1
 8540 0100 1D4B     		ldr	r3, .L427+24
 8541 0102 5A75     		strb	r2, [r3, #21]
2257:bluetooth_rxtx.c **** 			le.link_state = LINK_CONNECTED;
 8542              		.loc 1 2257 0
 8543 0104 1C4B     		ldr	r3, .L427+24
 8544 0106 0322     		movs	r2, #3
 8545 0108 1A75     		strb	r2, [r3, #20]
2258:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 8546              		.loc 1 2258 0
 8547 010a 1B4B     		ldr	r3, .L427+24
 8548 010c 0022     		movs	r2, #0
 8549 010e 1A61     		str	r2, [r3, #16]
2259:bluetooth_rxtx.c **** 			hop_mode = HOP_BTLE;
 8550              		.loc 1 2259 0
 8551 0110 1C4B     		ldr	r3, .L427+36
 8552 0112 0322     		movs	r2, #3
 8553 0114 1A70     		strb	r2, [r3]
2260:bluetooth_rxtx.c **** 			packet_cb = connection_follow_cb;
 8554              		.loc 1 2260 0
 8555 0116 1C4B     		ldr	r3, .L427+40
 8556 0118 1C4A     		ldr	r2, .L427+44
 8557 011a 1A60     		str	r2, [r3]
2261:bluetooth_rxtx.c **** 			le_promisc_state(3, &le.channel_increment, 1);
 8558              		.loc 1 2261 0
 8559 011c 0320     		movs	r0, #3
 8560 011e 1C49     		ldr	r1, .L427+48
 8561 0120 0122     		movs	r2, #1
 8562 0122 FFF7FEFF 		bl	le_promisc_state
2262:bluetooth_rxtx.c **** 
2263:bluetooth_rxtx.c **** 			if (jam_mode != JAM_NONE)
 8563              		.loc 1 2263 0
 8564 0126 1B4B     		ldr	r3, .L427+52
 8565 0128 1B78     		ldrb	r3, [r3]
 8566 012a DBB2     		uxtb	r3, r3
 8567 012c 002B     		cmp	r3, #0
 8568 012e 03D0     		beq	.L426
2264:bluetooth_rxtx.c **** 				le_jam_count = JAM_COUNT_DEFAULT;
ARM GAS  /tmp/cczWrdyg.s 			page 190


 8569              		.loc 1 2264 0
 8570 0130 194B     		ldr	r3, .L427+56
 8571 0132 2822     		movs	r2, #40
 8572 0134 1A60     		str	r2, [r3]
2265:bluetooth_rxtx.c **** 
2266:bluetooth_rxtx.c **** 			return;
 8573              		.loc 1 2266 0
 8574 0136 0FE0     		b	.L420
 8575              	.L426:
 8576 0138 0EE0     		b	.L420
 8577              	.L425:
2267:bluetooth_rxtx.c **** 		}
2268:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8578              		.loc 1 2268 0
 8579 013a 0D4B     		ldr	r3, .L427+16
 8580 013c 40F66412 		movw	r2, #2404
 8581 0140 1A80     		strh	r2, [r3]	@ movhi
2269:bluetooth_rxtx.c **** 		do_hop = 1;
 8582              		.loc 1 2269 0
 8583 0142 0C4B     		ldr	r3, .L427+20
 8584 0144 0122     		movs	r2, #1
 8585 0146 1A70     		strb	r2, [r3]
 8586              	.LBE14:
 8587 0148 06E0     		b	.L420
 8588              	.L423:
2270:bluetooth_rxtx.c **** 	}
2271:bluetooth_rxtx.c **** 	else {
2272:bluetooth_rxtx.c **** 		hop_direct_channel = 2404;
 8589              		.loc 1 2272 0
 8590 014a 094B     		ldr	r3, .L427+16
 8591 014c 40F66412 		movw	r2, #2404
 8592 0150 1A80     		strh	r2, [r3]	@ movhi
2273:bluetooth_rxtx.c **** 		do_hop = 1;
 8593              		.loc 1 2273 0
 8594 0152 084B     		ldr	r3, .L427+20
 8595 0154 0122     		movs	r2, #1
 8596 0156 1A70     		strb	r2, [r3]
 8597              	.L420:
2274:bluetooth_rxtx.c **** 	}
2275:bluetooth_rxtx.c **** }
 8598              		.loc 1 2275 0
 8599 0158 1037     		adds	r7, r7, #16
 8600              		.cfi_def_cfa_offset 8
 8601 015a BD46     		mov	sp, r7
 8602              		.cfi_def_cfa_register 13
 8603              		@ sp needed
 8604 015c 80BD     		pop	{r7, pc}
 8605              	.L428:
 8606 015e 00BF     		.align	2
 8607              	.L427:
 8608 0160 00000000 		.word	channel
 8609 0164 00000000 		.word	clkn
 8610 0168 08400040 		.word	1073758216
 8611 016c D8000000 		.word	first_ts.4779
 8612 0170 00000000 		.word	hop_direct_channel
 8613 0174 00000000 		.word	do_hop
 8614 0178 00000000 		.word	le
ARM GAS  /tmp/cczWrdyg.s 			page 191


 8615 017c D4000000 		.word	hop_interval_lut
 8616 0180 A7C867DD 		.word	-580400985
 8617 0184 00000000 		.word	hop_mode
 8618 0188 00000000 		.word	packet_cb
 8619 018c 00000000 		.word	connection_follow_cb
 8620 0190 16000000 		.word	le+22
 8621 0194 00000000 		.word	jam_mode
 8622 0198 00000000 		.word	le_jam_count
 8623              		.cfi_endproc
 8624              	.LFE36:
 8626              		.section	.text.promisc_recover_hop_interval,"ax",%progbits
 8627              		.align	2
 8628              		.global	promisc_recover_hop_interval
 8629              		.thumb
 8630              		.thumb_func
 8632              	promisc_recover_hop_interval:
 8633              	.LFB37:
2276:bluetooth_rxtx.c **** 
2277:bluetooth_rxtx.c **** void promisc_recover_hop_interval(u8 *packet) {
 8634              		.loc 1 2277 0
 8635              		.cfi_startproc
 8636              		@ args = 0, pretend = 0, frame = 24
 8637              		@ frame_needed = 1, uses_anonymous_args = 0
 8638 0000 80B5     		push	{r7, lr}
 8639              		.cfi_def_cfa_offset 8
 8640              		.cfi_offset 7, -8
 8641              		.cfi_offset 14, -4
 8642 0002 86B0     		sub	sp, sp, #24
 8643              		.cfi_def_cfa_offset 32
 8644 0004 00AF     		add	r7, sp, #0
 8645              		.cfi_def_cfa_register 7
 8646 0006 7860     		str	r0, [r7, #4]
2278:bluetooth_rxtx.c **** 	static u32 prev_clk = 0;
2279:bluetooth_rxtx.c **** 
2280:bluetooth_rxtx.c **** 	u32 cur_clk = CLK100NS;
 8647              		.loc 1 2280 0
 8648 0008 334B     		ldr	r3, .L437
 8649 000a 1B68     		ldr	r3, [r3]
 8650 000c C3F31303 		ubfx	r3, r3, #0, #20
 8651 0010 40F63542 		movw	r2, #3125
 8652 0014 02FB03F2 		mul	r2, r2, r3
 8653 0018 304B     		ldr	r3, .L437+4
 8654 001a 1B68     		ldr	r3, [r3]
 8655 001c 1344     		add	r3, r3, r2
 8656 001e 7B61     		str	r3, [r7, #20]
2281:bluetooth_rxtx.c **** 	if (cur_clk < prev_clk)
 8657              		.loc 1 2281 0
 8658 0020 2F4B     		ldr	r3, .L437+8
 8659 0022 1B68     		ldr	r3, [r3]
 8660 0024 7A69     		ldr	r2, [r7, #20]
 8661 0026 9A42     		cmp	r2, r3
 8662 0028 03D2     		bcs	.L430
2282:bluetooth_rxtx.c **** 		cur_clk += 3267800000; // handle rollover
 8663              		.loc 1 2282 0
 8664 002a 7A69     		ldr	r2, [r7, #20]
 8665 002c 2D4B     		ldr	r3, .L437+12
 8666 002e 1344     		add	r3, r3, r2
ARM GAS  /tmp/cczWrdyg.s 			page 192


 8667 0030 7B61     		str	r3, [r7, #20]
 8668              	.L430:
2283:bluetooth_rxtx.c **** 	u32 clk_diff = cur_clk - prev_clk;
 8669              		.loc 1 2283 0
 8670 0032 2B4B     		ldr	r3, .L437+8
 8671 0034 1B68     		ldr	r3, [r3]
 8672 0036 7A69     		ldr	r2, [r7, #20]
 8673 0038 D31A     		subs	r3, r2, r3
 8674 003a 3B61     		str	r3, [r7, #16]
2284:bluetooth_rxtx.c **** 	u16 obsv_hop_interval; // observed hop interval
2285:bluetooth_rxtx.c **** 
2286:bluetooth_rxtx.c **** 	// probably consecutive data packets on the same channel
2287:bluetooth_rxtx.c **** 	if (clk_diff < 2 * LE_BASECLK)
 8675              		.loc 1 2287 0
 8676 003c 3B69     		ldr	r3, [r7, #16]
 8677 003e 46F2A712 		movw	r2, #24999
 8678 0042 9342     		cmp	r3, r2
 8679 0044 00D8     		bhi	.L431
2288:bluetooth_rxtx.c **** 		return;
 8680              		.loc 1 2288 0
 8681 0046 43E0     		b	.L429
 8682              	.L431:
2289:bluetooth_rxtx.c **** 
2290:bluetooth_rxtx.c **** 	if (clk_diff < le_promisc.smallest_hop_interval)
 8683              		.loc 1 2290 0
 8684 0048 274B     		ldr	r3, .L437+16
 8685 004a D3F80021 		ldr	r2, [r3, #256]
 8686 004e 3B69     		ldr	r3, [r7, #16]
 8687 0050 9A42     		cmp	r2, r3
 8688 0052 03D9     		bls	.L433
2291:bluetooth_rxtx.c **** 		le_promisc.smallest_hop_interval = clk_diff;
 8689              		.loc 1 2291 0
 8690 0054 244A     		ldr	r2, .L437+16
 8691 0056 3B69     		ldr	r3, [r7, #16]
 8692 0058 C2F80031 		str	r3, [r2, #256]
 8693              	.L433:
2292:bluetooth_rxtx.c **** 
2293:bluetooth_rxtx.c **** 	obsv_hop_interval = DIVIDE_ROUND(le_promisc.smallest_hop_interval, 37 * LE_BASECLK);
 8694              		.loc 1 2293 0
 8695 005c 224B     		ldr	r3, .L437+16
 8696 005e D3F80031 		ldr	r3, [r3, #256]
 8697 0062 03F56133 		add	r3, r3, #230400
 8698 0066 03F25233 		addw	r3, r3, #850
 8699 006a 204A     		ldr	r2, .L437+20
 8700 006c A2FB0323 		umull	r2, r3, r2, r3
 8701 0070 9B0C     		lsrs	r3, r3, #18
 8702 0072 FB81     		strh	r3, [r7, #14]	@ movhi
2294:bluetooth_rxtx.c **** 
2295:bluetooth_rxtx.c **** 	if (le.conn_interval == obsv_hop_interval) {
 8703              		.loc 1 2295 0
 8704 0074 1E4B     		ldr	r3, .L437+24
 8705 0076 DB8B     		ldrh	r3, [r3, #30]
 8706 0078 FA89     		ldrh	r2, [r7, #14]
 8707 007a 9A42     		cmp	r2, r3
 8708 007c 1ED1     		bne	.L434
2296:bluetooth_rxtx.c **** 		// 5 consecutive hop intervals: consider it legit and move on
2297:bluetooth_rxtx.c **** 		++le_promisc.consec_intervals;
ARM GAS  /tmp/cczWrdyg.s 			page 193


 8709              		.loc 1 2297 0
 8710 007e 1A4B     		ldr	r3, .L437+16
 8711 0080 D3F80431 		ldr	r3, [r3, #260]
 8712 0084 0133     		adds	r3, r3, #1
 8713 0086 184A     		ldr	r2, .L437+16
 8714 0088 C2F80431 		str	r3, [r2, #260]
2298:bluetooth_rxtx.c **** 		if (le_promisc.consec_intervals == 5) {
 8715              		.loc 1 2298 0
 8716 008c 164B     		ldr	r3, .L437+16
 8717 008e D3F80431 		ldr	r3, [r3, #260]
 8718 0092 052B     		cmp	r3, #5
 8719 0094 19D1     		bne	.L436
2299:bluetooth_rxtx.c **** 			packet_cb = promisc_recover_hop_increment;
 8720              		.loc 1 2299 0
 8721 0096 174B     		ldr	r3, .L437+28
 8722 0098 174A     		ldr	r2, .L437+32
 8723 009a 1A60     		str	r2, [r3]
2300:bluetooth_rxtx.c **** 			hop_direct_channel = 2404;
 8724              		.loc 1 2300 0
 8725 009c 174B     		ldr	r3, .L437+36
 8726 009e 40F66412 		movw	r2, #2404
 8727 00a2 1A80     		strh	r2, [r3]	@ movhi
2301:bluetooth_rxtx.c **** 			hop_mode = HOP_DIRECT;
 8728              		.loc 1 2301 0
 8729 00a4 164B     		ldr	r3, .L437+40
 8730 00a6 0422     		movs	r2, #4
 8731 00a8 1A70     		strb	r2, [r3]
2302:bluetooth_rxtx.c **** 			do_hop = 1;
 8732              		.loc 1 2302 0
 8733 00aa 164B     		ldr	r3, .L437+44
 8734 00ac 0122     		movs	r2, #1
 8735 00ae 1A70     		strb	r2, [r3]
2303:bluetooth_rxtx.c **** 			le_promisc_state(2, &le.conn_interval, 2);
 8736              		.loc 1 2303 0
 8737 00b0 0220     		movs	r0, #2
 8738 00b2 1549     		ldr	r1, .L437+48
 8739 00b4 0222     		movs	r2, #2
 8740 00b6 FFF7FEFF 		bl	le_promisc_state
 8741 00ba 06E0     		b	.L436
 8742              	.L434:
2304:bluetooth_rxtx.c **** 		}
2305:bluetooth_rxtx.c **** 	} else {
2306:bluetooth_rxtx.c **** 		le.conn_interval = obsv_hop_interval;
 8743              		.loc 1 2306 0
 8744 00bc 0C4A     		ldr	r2, .L437+24
 8745 00be FB89     		ldrh	r3, [r7, #14]	@ movhi
 8746 00c0 D383     		strh	r3, [r2, #30]	@ movhi
2307:bluetooth_rxtx.c **** 		le_promisc.consec_intervals = 0;
 8747              		.loc 1 2307 0
 8748 00c2 094B     		ldr	r3, .L437+16
 8749 00c4 0022     		movs	r2, #0
 8750 00c6 C3F80421 		str	r2, [r3, #260]
 8751              	.L436:
2308:bluetooth_rxtx.c **** 	}
2309:bluetooth_rxtx.c **** 
2310:bluetooth_rxtx.c **** 	prev_clk = cur_clk;
 8752              		.loc 1 2310 0
ARM GAS  /tmp/cczWrdyg.s 			page 194


 8753 00ca 054A     		ldr	r2, .L437+8
 8754 00cc 7B69     		ldr	r3, [r7, #20]
 8755 00ce 1360     		str	r3, [r2]
 8756              	.L429:
2311:bluetooth_rxtx.c **** }
 8757              		.loc 1 2311 0
 8758 00d0 1837     		adds	r7, r7, #24
 8759              		.cfi_def_cfa_offset 8
 8760 00d2 BD46     		mov	sp, r7
 8761              		.cfi_def_cfa_register 13
 8762              		@ sp needed
 8763 00d4 80BD     		pop	{r7, pc}
 8764              	.L438:
 8765 00d6 00BF     		.align	2
 8766              	.L437:
 8767 00d8 00000000 		.word	clkn
 8768 00dc 08400040 		.word	1073758216
 8769 00e0 DC000000 		.word	prev_clk.4785
 8770 00e4 C0ABC6C2 		.word	-1027167296
 8771 00e8 00000000 		.word	le_promisc
 8772 00ec C1A91991 		.word	-1860589119
 8773 00f0 00000000 		.word	le
 8774 00f4 00000000 		.word	packet_cb
 8775 00f8 00000000 		.word	promisc_recover_hop_increment
 8776 00fc 00000000 		.word	hop_direct_channel
 8777 0100 00000000 		.word	hop_mode
 8778 0104 00000000 		.word	do_hop
 8779 0108 1E000000 		.word	le+30
 8780              		.cfi_endproc
 8781              	.LFE37:
 8783              		.section	.text.promisc_follow_cb,"ax",%progbits
 8784              		.align	2
 8785              		.global	promisc_follow_cb
 8786              		.thumb
 8787              		.thumb_func
 8789              	promisc_follow_cb:
 8790              	.LFB38:
2312:bluetooth_rxtx.c **** 
2313:bluetooth_rxtx.c **** void promisc_follow_cb(u8 *packet) {
 8791              		.loc 1 2313 0
 8792              		.cfi_startproc
 8793              		@ args = 0, pretend = 0, frame = 16
 8794              		@ frame_needed = 1, uses_anonymous_args = 0
 8795 0000 80B5     		push	{r7, lr}
 8796              		.cfi_def_cfa_offset 8
 8797              		.cfi_offset 7, -8
 8798              		.cfi_offset 14, -4
 8799 0002 84B0     		sub	sp, sp, #16
 8800              		.cfi_def_cfa_offset 24
 8801 0004 00AF     		add	r7, sp, #0
 8802              		.cfi_def_cfa_register 7
 8803 0006 7860     		str	r0, [r7, #4]
2314:bluetooth_rxtx.c **** 	int i;
2315:bluetooth_rxtx.c **** 
2316:bluetooth_rxtx.c **** 	// get the CRCInit
2317:bluetooth_rxtx.c **** 	if (!le.crc_verify && packet[4] == 0x01 && packet[5] == 0x00) {
 8804              		.loc 1 2317 0
ARM GAS  /tmp/cczWrdyg.s 			page 195


 8805 0008 284B     		ldr	r3, .L443
 8806 000a 1B69     		ldr	r3, [r3, #16]
 8807 000c 002B     		cmp	r3, #0
 8808 000e 49D1     		bne	.L439
 8809              		.loc 1 2317 0 is_stmt 0 discriminator 1
 8810 0010 7B68     		ldr	r3, [r7, #4]
 8811 0012 0433     		adds	r3, r3, #4
 8812 0014 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8813 0016 012B     		cmp	r3, #1
 8814 0018 44D1     		bne	.L439
 8815              		.loc 1 2317 0 discriminator 2
 8816 001a 7B68     		ldr	r3, [r7, #4]
 8817 001c 0533     		adds	r3, r3, #5
 8818 001e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8819 0020 002B     		cmp	r3, #0
 8820 0022 3FD1     		bne	.L439
 8821              	.LBB15:
2318:bluetooth_rxtx.c **** 		u32 crc = (packet[8] << 16) | (packet[7] << 8) | packet[6];
 8822              		.loc 1 2318 0 is_stmt 1
 8823 0024 7B68     		ldr	r3, [r7, #4]
 8824 0026 0833     		adds	r3, r3, #8
 8825 0028 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8826 002a 1A04     		lsls	r2, r3, #16
 8827 002c 7B68     		ldr	r3, [r7, #4]
 8828 002e 0733     		adds	r3, r3, #7
 8829 0030 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 8830 0032 1B02     		lsls	r3, r3, #8
 8831 0034 1343     		orrs	r3, r3, r2
 8832 0036 7A68     		ldr	r2, [r7, #4]
 8833 0038 0632     		adds	r2, r2, #6
 8834 003a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 8835 003c 1343     		orrs	r3, r3, r2
 8836 003e BB60     		str	r3, [r7, #8]
2319:bluetooth_rxtx.c **** 
2320:bluetooth_rxtx.c **** 		le.crc_init = btle_reverse_crc(crc, packet + 4, 2);
 8837              		.loc 1 2320 0
 8838 0040 7B68     		ldr	r3, [r7, #4]
 8839 0042 0433     		adds	r3, r3, #4
 8840 0044 B868     		ldr	r0, [r7, #8]
 8841 0046 1946     		mov	r1, r3
 8842 0048 0222     		movs	r2, #2
 8843 004a FFF7FEFF 		bl	btle_reverse_crc
 8844 004e 0246     		mov	r2, r0
 8845 0050 164B     		ldr	r3, .L443
 8846 0052 9A60     		str	r2, [r3, #8]
2321:bluetooth_rxtx.c **** 		le.crc_init_reversed = 0;
 8847              		.loc 1 2321 0
 8848 0054 154B     		ldr	r3, .L443
 8849 0056 0022     		movs	r2, #0
 8850 0058 DA60     		str	r2, [r3, #12]
2322:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 8851              		.loc 1 2322 0
 8852 005a 0023     		movs	r3, #0
 8853 005c FB60     		str	r3, [r7, #12]
 8854 005e 13E0     		b	.L441
 8855              	.L442:
2323:bluetooth_rxtx.c **** 			le.crc_init_reversed |= ((le.crc_init >> i) & 1) << (23 - i);
ARM GAS  /tmp/cczWrdyg.s 			page 196


 8856              		.loc 1 2323 0 discriminator 3
 8857 0060 124B     		ldr	r3, .L443
 8858 0062 DA68     		ldr	r2, [r3, #12]
 8859 0064 114B     		ldr	r3, .L443
 8860 0066 9968     		ldr	r1, [r3, #8]
 8861 0068 FB68     		ldr	r3, [r7, #12]
 8862 006a 21FA03F3 		lsr	r3, r1, r3
 8863 006e 03F00101 		and	r1, r3, #1
 8864 0072 FB68     		ldr	r3, [r7, #12]
 8865 0074 C3F11703 		rsb	r3, r3, #23
 8866 0078 01FA03F3 		lsl	r3, r1, r3
 8867 007c 1343     		orrs	r3, r3, r2
 8868 007e 0B4A     		ldr	r2, .L443
 8869 0080 D360     		str	r3, [r2, #12]
2322:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 8870              		.loc 1 2322 0 discriminator 3
 8871 0082 FB68     		ldr	r3, [r7, #12]
 8872 0084 0133     		adds	r3, r3, #1
 8873 0086 FB60     		str	r3, [r7, #12]
 8874              	.L441:
2322:bluetooth_rxtx.c **** 		for (i = 0; i < 24; ++i)
 8875              		.loc 1 2322 0 is_stmt 0 discriminator 1
 8876 0088 FB68     		ldr	r3, [r7, #12]
 8877 008a 172B     		cmp	r3, #23
 8878 008c E8DD     		ble	.L442
2324:bluetooth_rxtx.c **** 
2325:bluetooth_rxtx.c **** 		le.crc_verify = 1;
 8879              		.loc 1 2325 0 is_stmt 1
 8880 008e 074B     		ldr	r3, .L443
 8881 0090 0122     		movs	r2, #1
 8882 0092 1A61     		str	r2, [r3, #16]
2326:bluetooth_rxtx.c **** 		packet_cb = promisc_recover_hop_interval;
 8883              		.loc 1 2326 0
 8884 0094 064B     		ldr	r3, .L443+4
 8885 0096 074A     		ldr	r2, .L443+8
 8886 0098 1A60     		str	r2, [r3]
2327:bluetooth_rxtx.c **** 		le_promisc_state(1, &le.crc_init, 3);
 8887              		.loc 1 2327 0
 8888 009a 0120     		movs	r0, #1
 8889 009c 0649     		ldr	r1, .L443+12
 8890 009e 0322     		movs	r2, #3
 8891 00a0 FFF7FEFF 		bl	le_promisc_state
 8892              	.L439:
 8893              	.LBE15:
2328:bluetooth_rxtx.c **** 	}
2329:bluetooth_rxtx.c **** }
 8894              		.loc 1 2329 0
 8895 00a4 1037     		adds	r7, r7, #16
 8896              		.cfi_def_cfa_offset 8
 8897 00a6 BD46     		mov	sp, r7
 8898              		.cfi_def_cfa_register 13
 8899              		@ sp needed
 8900 00a8 80BD     		pop	{r7, pc}
 8901              	.L444:
 8902 00aa 00BF     		.align	2
 8903              	.L443:
 8904 00ac 00000000 		.word	le
ARM GAS  /tmp/cczWrdyg.s 			page 197


 8905 00b0 00000000 		.word	packet_cb
 8906 00b4 00000000 		.word	promisc_recover_hop_interval
 8907 00b8 08000000 		.word	le+8
 8908              		.cfi_endproc
 8909              	.LFE38:
 8911              		.section	.text.see_aa,"ax",%progbits
 8912              		.align	2
 8913              		.global	see_aa
 8914              		.thumb
 8915              		.thumb_func
 8917              	see_aa:
 8918              	.LFB39:
2330:bluetooth_rxtx.c **** 
2331:bluetooth_rxtx.c **** // called when we see an AA, add it to the list
2332:bluetooth_rxtx.c **** void see_aa(u32 aa) {
 8919              		.loc 1 2332 0
 8920              		.cfi_startproc
 8921              		@ args = 0, pretend = 0, frame = 24
 8922              		@ frame_needed = 1, uses_anonymous_args = 0
 8923              		@ link register save eliminated.
 8924 0000 80B4     		push	{r7}
 8925              		.cfi_def_cfa_offset 4
 8926              		.cfi_offset 7, -4
 8927 0002 87B0     		sub	sp, sp, #28
 8928              		.cfi_def_cfa_offset 32
 8929 0004 00AF     		add	r7, sp, #0
 8930              		.cfi_def_cfa_register 7
 8931 0006 7860     		str	r0, [r7, #4]
2333:bluetooth_rxtx.c **** 	int i, max = -1, killme = -1;
 8932              		.loc 1 2333 0
 8933 0008 4FF0FF33 		mov	r3, #-1
 8934 000c 3B61     		str	r3, [r7, #16]
 8935 000e 4FF0FF33 		mov	r3, #-1
 8936 0012 FB60     		str	r3, [r7, #12]
2334:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 8937              		.loc 1 2334 0
 8938 0014 0023     		movs	r3, #0
 8939 0016 7B61     		str	r3, [r7, #20]
 8940 0018 15E0     		b	.L446
 8941              	.L449:
2335:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 8942              		.loc 1 2335 0
 8943 001a 224A     		ldr	r2, .L454
 8944 001c 7B69     		ldr	r3, [r7, #20]
 8945 001e 52F83320 		ldr	r2, [r2, r3, lsl #3]
 8946 0022 7B68     		ldr	r3, [r7, #4]
 8947 0024 9A42     		cmp	r2, r3
 8948 0026 0BD1     		bne	.L447
2336:bluetooth_rxtx.c **** 			++le_promisc.active_aa[i].count;
 8949              		.loc 1 2336 0
 8950 0028 1E4A     		ldr	r2, .L454
 8951 002a 7B69     		ldr	r3, [r7, #20]
 8952 002c DB00     		lsls	r3, r3, #3
 8953 002e 1344     		add	r3, r3, r2
 8954 0030 5B68     		ldr	r3, [r3, #4]
 8955 0032 5A1C     		adds	r2, r3, #1
 8956 0034 1B49     		ldr	r1, .L454
ARM GAS  /tmp/cczWrdyg.s 			page 198


 8957 0036 7B69     		ldr	r3, [r7, #20]
 8958 0038 DB00     		lsls	r3, r3, #3
 8959 003a 0B44     		add	r3, r3, r1
 8960 003c 5A60     		str	r2, [r3, #4]
2337:bluetooth_rxtx.c **** 			return;
 8961              		.loc 1 2337 0
 8962 003e 2CE0     		b	.L445
 8963              	.L447:
2334:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 8964              		.loc 1 2334 0 discriminator 2
 8965 0040 7B69     		ldr	r3, [r7, #20]
 8966 0042 0133     		adds	r3, r3, #1
 8967 0044 7B61     		str	r3, [r7, #20]
 8968              	.L446:
2334:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].aa == aa) {
 8969              		.loc 1 2334 0 is_stmt 0 discriminator 1
 8970 0046 7B69     		ldr	r3, [r7, #20]
 8971 0048 1F2B     		cmp	r3, #31
 8972 004a E6DD     		ble	.L449
2338:bluetooth_rxtx.c **** 		}
2339:bluetooth_rxtx.c **** 
2340:bluetooth_rxtx.c **** 	// evict someone
2341:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i)
 8973              		.loc 1 2341 0 is_stmt 1
 8974 004c 0023     		movs	r3, #0
 8975 004e 7B61     		str	r3, [r7, #20]
 8976 0050 15E0     		b	.L450
 8977              	.L453:
2342:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 8978              		.loc 1 2342 0
 8979 0052 144A     		ldr	r2, .L454
 8980 0054 7B69     		ldr	r3, [r7, #20]
 8981 0056 DB00     		lsls	r3, r3, #3
 8982 0058 1344     		add	r3, r3, r2
 8983 005a 5A68     		ldr	r2, [r3, #4]
 8984 005c 3B69     		ldr	r3, [r7, #16]
 8985 005e 9A42     		cmp	r2, r3
 8986 0060 02DB     		blt	.L451
 8987              		.loc 1 2342 0 is_stmt 0 discriminator 1
 8988 0062 3B69     		ldr	r3, [r7, #16]
 8989 0064 002B     		cmp	r3, #0
 8990 0066 07DA     		bge	.L452
 8991              	.L451:
2343:bluetooth_rxtx.c **** 			killme = i;
 8992              		.loc 1 2343 0 is_stmt 1
 8993 0068 7B69     		ldr	r3, [r7, #20]
 8994 006a FB60     		str	r3, [r7, #12]
2344:bluetooth_rxtx.c **** 			max = le_promisc.active_aa[i].count;
 8995              		.loc 1 2344 0
 8996 006c 0D4A     		ldr	r2, .L454
 8997 006e 7B69     		ldr	r3, [r7, #20]
 8998 0070 DB00     		lsls	r3, r3, #3
 8999 0072 1344     		add	r3, r3, r2
 9000 0074 5B68     		ldr	r3, [r3, #4]
 9001 0076 3B61     		str	r3, [r7, #16]
 9002              	.L452:
2341:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
ARM GAS  /tmp/cczWrdyg.s 			page 199


 9003              		.loc 1 2341 0 discriminator 2
 9004 0078 7B69     		ldr	r3, [r7, #20]
 9005 007a 0133     		adds	r3, r3, #1
 9006 007c 7B61     		str	r3, [r7, #20]
 9007              	.L450:
2341:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count < max || max < 0) {
 9008              		.loc 1 2341 0 is_stmt 0 discriminator 1
 9009 007e 7B69     		ldr	r3, [r7, #20]
 9010 0080 1F2B     		cmp	r3, #31
 9011 0082 E6DD     		ble	.L453
2345:bluetooth_rxtx.c **** 		}
2346:bluetooth_rxtx.c **** 
2347:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].aa = aa;
 9012              		.loc 1 2347 0 is_stmt 1
 9013 0084 0749     		ldr	r1, .L454
 9014 0086 FB68     		ldr	r3, [r7, #12]
 9015 0088 7A68     		ldr	r2, [r7, #4]
 9016 008a 41F83320 		str	r2, [r1, r3, lsl #3]
2348:bluetooth_rxtx.c **** 	le_promisc.active_aa[killme].count = 1;
 9017              		.loc 1 2348 0
 9018 008e 054A     		ldr	r2, .L454
 9019 0090 FB68     		ldr	r3, [r7, #12]
 9020 0092 DB00     		lsls	r3, r3, #3
 9021 0094 1344     		add	r3, r3, r2
 9022 0096 0122     		movs	r2, #1
 9023 0098 5A60     		str	r2, [r3, #4]
 9024              	.L445:
2349:bluetooth_rxtx.c **** }
 9025              		.loc 1 2349 0
 9026 009a 1C37     		adds	r7, r7, #28
 9027              		.cfi_def_cfa_offset 4
 9028 009c BD46     		mov	sp, r7
 9029              		.cfi_def_cfa_register 13
 9030              		@ sp needed
 9031 009e 5DF8047B 		ldr	r7, [sp], #4
 9032              		.cfi_restore 7
 9033              		.cfi_def_cfa_offset 0
 9034 00a2 7047     		bx	lr
 9035              	.L455:
 9036              		.align	2
 9037              	.L454:
 9038 00a4 00000000 		.word	le_promisc
 9039              		.cfi_endproc
 9040              	.LFE39:
 9042              		.section	.rodata
 9043 08cb 00       		.align	2
 9044              	.LC0:
 9045 08cc 01000000 		.word	1
 9046 08d0 01000000 		.word	1
 9047 08d4 01000000 		.word	1
 9048 08d8 01000000 		.word	1
 9049              		.section	.text.cb_le_promisc,"ax",%progbits
 9050              		.align	2
 9051              		.global	cb_le_promisc
 9052              		.thumb
 9053              		.thumb_func
 9055              	cb_le_promisc:
ARM GAS  /tmp/cczWrdyg.s 			page 200


 9056              	.LFB40:
2350:bluetooth_rxtx.c **** 
2351:bluetooth_rxtx.c **** /* le promiscuous mode */
2352:bluetooth_rxtx.c **** int cb_le_promisc(char *unpacked) {
 9057              		.loc 1 2352 0
 9058              		.cfi_startproc
 9059              		@ args = 0, pretend = 0, frame = 128
 9060              		@ frame_needed = 1, uses_anonymous_args = 0
 9061 0000 90B5     		push	{r4, r7, lr}
 9062              		.cfi_def_cfa_offset 12
 9063              		.cfi_offset 4, -12
 9064              		.cfi_offset 7, -8
 9065              		.cfi_offset 14, -4
 9066 0002 A1B0     		sub	sp, sp, #132
 9067              		.cfi_def_cfa_offset 144
 9068 0004 00AF     		add	r7, sp, #0
 9069              		.cfi_def_cfa_register 7
 9070 0006 7860     		str	r0, [r7, #4]
2353:bluetooth_rxtx.c **** 	int i, j, k;
2354:bluetooth_rxtx.c **** 	int idx;
2355:bluetooth_rxtx.c **** 
2356:bluetooth_rxtx.c **** 	// empty data PDU: 01 00
2357:bluetooth_rxtx.c **** 	char desired[4][16] = {
 9071              		.loc 1 2357 0
 9072 0008 07F11C03 		add	r3, r7, #28
 9073 000c 4022     		movs	r2, #64
 9074 000e 1846     		mov	r0, r3
 9075 0010 0021     		movs	r1, #0
 9076 0012 FFF7FEFF 		bl	memset
 9077 0016 0123     		movs	r3, #1
 9078 0018 3B77     		strb	r3, [r7, #28]
 9079 001a 0123     		movs	r3, #1
 9080 001c 87F82C30 		strb	r3, [r7, #44]
 9081 0020 0123     		movs	r3, #1
 9082 0022 87F82F30 		strb	r3, [r7, #47]
 9083 0026 0123     		movs	r3, #1
 9084 0028 87F83C30 		strb	r3, [r7, #60]
 9085 002c 0123     		movs	r3, #1
 9086 002e 87F83E30 		strb	r3, [r7, #62]
 9087 0032 0123     		movs	r3, #1
 9088 0034 87F84C30 		strb	r3, [r7, #76]
 9089 0038 0123     		movs	r3, #1
 9090 003a 87F84E30 		strb	r3, [r7, #78]
 9091 003e 0123     		movs	r3, #1
 9092 0040 87F84F30 		strb	r3, [r7, #79]
2358:bluetooth_rxtx.c **** 		{ 1, 0, 0, 0, 0, 0, 0, 0,
2359:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2360:bluetooth_rxtx.c **** 		{ 1, 0, 0, 1, 0, 0, 0, 0,
2361:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2362:bluetooth_rxtx.c **** 		{ 1, 0, 1, 0, 0, 0, 0, 0,
2363:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2364:bluetooth_rxtx.c **** 		{ 1, 0, 1, 1, 0, 0, 0, 0,
2365:bluetooth_rxtx.c **** 		  0, 0, 0, 0, 0, 0, 0, 0, },
2366:bluetooth_rxtx.c **** 	};
2367:bluetooth_rxtx.c **** 
2368:bluetooth_rxtx.c **** 	for (i = 0; i < 4; ++i) {
 9093              		.loc 1 2368 0
ARM GAS  /tmp/cczWrdyg.s 			page 201


 9094 0044 0023     		movs	r3, #0
 9095 0046 FB67     		str	r3, [r7, #124]
 9096 0048 41E0     		b	.L457
 9097              	.L460:
2369:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9098              		.loc 1 2369 0
 9099 004a A54B     		ldr	r3, .L487
 9100 004c 1B88     		ldrh	r3, [r3]	@ movhi
 9101 004e 9BB2     		uxth	r3, r3
 9102 0050 DBB2     		uxtb	r3, r3
 9103 0052 623B     		subs	r3, r3, #98
 9104 0054 DBB2     		uxtb	r3, r3
 9105 0056 1846     		mov	r0, r3
 9106 0058 FFF7FEFF 		bl	btle_channel_index
 9107 005c 0346     		mov	r3, r0
 9108 005e 1A46     		mov	r2, r3
 9109 0060 A04B     		ldr	r3, .L487+4
 9110 0062 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9111 0064 3B67     		str	r3, [r7, #112]
2370:bluetooth_rxtx.c **** 
2371:bluetooth_rxtx.c **** 		// whiten the desired data
2372:bluetooth_rxtx.c **** 		for (j = 0; j < (int)sizeof(desired[i]); ++j) {
 9112              		.loc 1 2372 0
 9113 0066 0023     		movs	r3, #0
 9114 0068 BB67     		str	r3, [r7, #120]
 9115 006a 2AE0     		b	.L458
 9116              	.L459:
2373:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9117              		.loc 1 2373 0 discriminator 3
 9118 006c FB6F     		ldr	r3, [r7, #124]
 9119 006e 1B01     		lsls	r3, r3, #4
 9120 0070 07F18002 		add	r2, r7, #128
 9121 0074 1A44     		add	r2, r2, r3
 9122 0076 BB6F     		ldr	r3, [r7, #120]
 9123 0078 1344     		add	r3, r3, r2
 9124 007a 643B     		subs	r3, r3, #100
 9125 007c 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9126 007e 9A49     		ldr	r1, .L487+8
 9127 0080 3B6F     		ldr	r3, [r7, #112]
 9128 0082 0B44     		add	r3, r3, r1
 9129 0084 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9130 0086 5340     		eors	r3, r3, r2
 9131 0088 D9B2     		uxtb	r1, r3
 9132 008a FB6F     		ldr	r3, [r7, #124]
 9133 008c 1B01     		lsls	r3, r3, #4
 9134 008e 07F18002 		add	r2, r7, #128
 9135 0092 1A44     		add	r2, r2, r3
 9136 0094 BB6F     		ldr	r3, [r7, #120]
 9137 0096 1344     		add	r3, r3, r2
 9138 0098 643B     		subs	r3, r3, #100
 9139 009a 0A46     		mov	r2, r1
 9140 009c 1A70     		strb	r2, [r3]
2374:bluetooth_rxtx.c **** 			idx = (idx + 1) % sizeof(whitening);
 9141              		.loc 1 2374 0 discriminator 3
 9142 009e 3B6F     		ldr	r3, [r7, #112]
 9143 00a0 0133     		adds	r3, r3, #1
 9144 00a2 1946     		mov	r1, r3
ARM GAS  /tmp/cczWrdyg.s 			page 202


 9145 00a4 914B     		ldr	r3, .L487+12
 9146 00a6 A1FB0323 		umull	r2, r3, r1, r3
 9147 00aa C81A     		subs	r0, r1, r3
 9148 00ac 4008     		lsrs	r0, r0, #1
 9149 00ae 0344     		add	r3, r3, r0
 9150 00b0 9A09     		lsrs	r2, r3, #6
 9151 00b2 1346     		mov	r3, r2
 9152 00b4 DB01     		lsls	r3, r3, #7
 9153 00b6 9B1A     		subs	r3, r3, r2
 9154 00b8 CA1A     		subs	r2, r1, r3
 9155 00ba 3A67     		str	r2, [r7, #112]
2372:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9156              		.loc 1 2372 0 discriminator 3
 9157 00bc BB6F     		ldr	r3, [r7, #120]
 9158 00be 0133     		adds	r3, r3, #1
 9159 00c0 BB67     		str	r3, [r7, #120]
 9160              	.L458:
2372:bluetooth_rxtx.c **** 			desired[i][j] ^= whitening[idx];
 9161              		.loc 1 2372 0 is_stmt 0 discriminator 1
 9162 00c2 BB6F     		ldr	r3, [r7, #120]
 9163 00c4 0F2B     		cmp	r3, #15
 9164 00c6 D1DD     		ble	.L459
2368:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9165              		.loc 1 2368 0 is_stmt 1 discriminator 2
 9166 00c8 FB6F     		ldr	r3, [r7, #124]
 9167 00ca 0133     		adds	r3, r3, #1
 9168 00cc FB67     		str	r3, [r7, #124]
 9169              	.L457:
2368:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9170              		.loc 1 2368 0 is_stmt 0 discriminator 1
 9171 00ce FB6F     		ldr	r3, [r7, #124]
 9172 00d0 032B     		cmp	r3, #3
 9173 00d2 BADD     		ble	.L460
2375:bluetooth_rxtx.c **** 		}
2376:bluetooth_rxtx.c **** 	}
2377:bluetooth_rxtx.c **** 
2378:bluetooth_rxtx.c **** 	// then look for that bitsream in our receive buffer
2379:bluetooth_rxtx.c **** 	for (i = 32; i < (DMA_SIZE*8*2 - 32 - 16); i++) {
 9174              		.loc 1 2379 0 is_stmt 1
 9175 00d4 2023     		movs	r3, #32
 9176 00d6 FB67     		str	r3, [r7, #124]
 9177 00d8 D0E0     		b	.L461
 9178              	.L481:
 9179              	.LBB16:
2380:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9180              		.loc 1 2380 0
 9181 00da 854B     		ldr	r3, .L487+16
 9182 00dc 07F10C04 		add	r4, r7, #12
 9183 00e0 0FCB     		ldmia	r3, {r0, r1, r2, r3}
 9184 00e2 84E80F00 		stmia	r4, {r0, r1, r2, r3}
2381:bluetooth_rxtx.c **** 		int matching = -1;
 9185              		.loc 1 2381 0
 9186 00e6 4FF0FF33 		mov	r3, #-1
 9187 00ea FB66     		str	r3, [r7, #108]
2382:bluetooth_rxtx.c **** 
2383:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9188              		.loc 1 2383 0
ARM GAS  /tmp/cczWrdyg.s 			page 203


 9189 00ec 0023     		movs	r3, #0
 9190 00ee BB67     		str	r3, [r7, #120]
 9191 00f0 26E0     		b	.L462
 9192              	.L467:
2384:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9193              		.loc 1 2384 0
 9194 00f2 0023     		movs	r3, #0
 9195 00f4 7B67     		str	r3, [r7, #116]
 9196 00f6 1DE0     		b	.L463
 9197              	.L466:
2385:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9198              		.loc 1 2385 0
 9199 00f8 FA6F     		ldr	r2, [r7, #124]
 9200 00fa 7B6F     		ldr	r3, [r7, #116]
 9201 00fc 1344     		add	r3, r3, r2
 9202 00fe 1A46     		mov	r2, r3
 9203 0100 7B68     		ldr	r3, [r7, #4]
 9204 0102 1344     		add	r3, r3, r2
 9205 0104 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 9206 0106 BB6F     		ldr	r3, [r7, #120]
 9207 0108 1B01     		lsls	r3, r3, #4
 9208 010a 07F18001 		add	r1, r7, #128
 9209 010e 1944     		add	r1, r1, r3
 9210 0110 7B6F     		ldr	r3, [r7, #116]
 9211 0112 0B44     		add	r3, r3, r1
 9212 0114 643B     		subs	r3, r3, #100
 9213 0116 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9214 0118 9A42     		cmp	r2, r3
 9215 011a 08D0     		beq	.L464
2386:bluetooth_rxtx.c **** 					ok[j] = 0;
 9216              		.loc 1 2386 0
 9217 011c BB6F     		ldr	r3, [r7, #120]
 9218 011e 9B00     		lsls	r3, r3, #2
 9219 0120 07F18002 		add	r2, r7, #128
 9220 0124 1344     		add	r3, r3, r2
 9221 0126 0022     		movs	r2, #0
 9222 0128 43F8742C 		str	r2, [r3, #-116]
2387:bluetooth_rxtx.c **** 					break;
 9223              		.loc 1 2387 0
 9224 012c 05E0     		b	.L465
 9225              	.L464:
2384:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9226              		.loc 1 2384 0 discriminator 2
 9227 012e 7B6F     		ldr	r3, [r7, #116]
 9228 0130 0133     		adds	r3, r3, #1
 9229 0132 7B67     		str	r3, [r7, #116]
 9230              	.L463:
2384:bluetooth_rxtx.c **** 				if (unpacked[i+k] != desired[j][k]) {
 9231              		.loc 1 2384 0 is_stmt 0 discriminator 1
 9232 0134 7B6F     		ldr	r3, [r7, #116]
 9233 0136 0F2B     		cmp	r3, #15
 9234 0138 DEDD     		ble	.L466
 9235              	.L465:
2383:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9236              		.loc 1 2383 0 is_stmt 1 discriminator 2
 9237 013a BB6F     		ldr	r3, [r7, #120]
 9238 013c 0133     		adds	r3, r3, #1
ARM GAS  /tmp/cczWrdyg.s 			page 204


 9239 013e BB67     		str	r3, [r7, #120]
 9240              	.L462:
2383:bluetooth_rxtx.c **** 			for (k = 0; k < (int)sizeof(desired[j]); ++k) {
 9241              		.loc 1 2383 0 is_stmt 0 discriminator 1
 9242 0140 BB6F     		ldr	r3, [r7, #120]
 9243 0142 032B     		cmp	r3, #3
 9244 0144 D5DD     		ble	.L467
2388:bluetooth_rxtx.c **** 				}
2389:bluetooth_rxtx.c **** 			}
2390:bluetooth_rxtx.c **** 		}
2391:bluetooth_rxtx.c **** 
2392:bluetooth_rxtx.c **** 		// see if any match
2393:bluetooth_rxtx.c **** 		for (j = 0; j < 4; ++j) {
 9245              		.loc 1 2393 0 is_stmt 1
 9246 0146 0023     		movs	r3, #0
 9247 0148 BB67     		str	r3, [r7, #120]
 9248 014a 0EE0     		b	.L468
 9249              	.L471:
2394:bluetooth_rxtx.c **** 			if (ok[j]) {
 9250              		.loc 1 2394 0
 9251 014c BB6F     		ldr	r3, [r7, #120]
 9252 014e 9B00     		lsls	r3, r3, #2
 9253 0150 07F18002 		add	r2, r7, #128
 9254 0154 1344     		add	r3, r3, r2
 9255 0156 53F8743C 		ldr	r3, [r3, #-116]
 9256 015a 002B     		cmp	r3, #0
 9257 015c 02D0     		beq	.L469
2395:bluetooth_rxtx.c **** 				matching = j;
 9258              		.loc 1 2395 0
 9259 015e BB6F     		ldr	r3, [r7, #120]
 9260 0160 FB66     		str	r3, [r7, #108]
2396:bluetooth_rxtx.c **** 				break;
 9261              		.loc 1 2396 0
 9262 0162 05E0     		b	.L470
 9263              	.L469:
2393:bluetooth_rxtx.c **** 			if (ok[j]) {
 9264              		.loc 1 2393 0 discriminator 2
 9265 0164 BB6F     		ldr	r3, [r7, #120]
 9266 0166 0133     		adds	r3, r3, #1
 9267 0168 BB67     		str	r3, [r7, #120]
 9268              	.L468:
2393:bluetooth_rxtx.c **** 			if (ok[j]) {
 9269              		.loc 1 2393 0 is_stmt 0 discriminator 1
 9270 016a BB6F     		ldr	r3, [r7, #120]
 9271 016c 032B     		cmp	r3, #3
 9272 016e EDDD     		ble	.L471
 9273              	.L470:
2397:bluetooth_rxtx.c **** 			}
2398:bluetooth_rxtx.c **** 		}
2399:bluetooth_rxtx.c **** 
2400:bluetooth_rxtx.c **** 		// skip if no match
2401:bluetooth_rxtx.c **** 		if (matching < 0)
 9274              		.loc 1 2401 0 is_stmt 1
 9275 0170 FB6E     		ldr	r3, [r7, #108]
 9276 0172 002B     		cmp	r3, #0
 9277 0174 7FDB     		blt	.L473
2402:bluetooth_rxtx.c **** 			continue;
ARM GAS  /tmp/cczWrdyg.s 			page 205


2403:bluetooth_rxtx.c **** 
2404:bluetooth_rxtx.c **** 		// found a match! unwhiten it and send it home
2405:bluetooth_rxtx.c **** 		idx = whitening_index[btle_channel_index(channel-2402)];
 9278              		.loc 1 2405 0
 9279 0176 5A4B     		ldr	r3, .L487
 9280 0178 1B88     		ldrh	r3, [r3]	@ movhi
 9281 017a 9BB2     		uxth	r3, r3
 9282 017c DBB2     		uxtb	r3, r3
 9283 017e 623B     		subs	r3, r3, #98
 9284 0180 DBB2     		uxtb	r3, r3
 9285 0182 1846     		mov	r0, r3
 9286 0184 FFF7FEFF 		bl	btle_channel_index
 9287 0188 0346     		mov	r3, r0
 9288 018a 1A46     		mov	r2, r3
 9289 018c 554B     		ldr	r3, .L487+4
 9290 018e 9B5C     		ldrb	r3, [r3, r2]	@ zero_extendqisi2
 9291 0190 3B67     		str	r3, [r7, #112]
2406:bluetooth_rxtx.c **** 		for (j = 0; j < 4+3+3; ++j) {
 9292              		.loc 1 2406 0
 9293 0192 0023     		movs	r3, #0
 9294 0194 BB67     		str	r3, [r7, #120]
 9295 0196 4CE0     		b	.L474
 9296              	.L480:
 9297              	.LBB17:
2407:bluetooth_rxtx.c **** 			u8 byte = 0;
 9298              		.loc 1 2407 0
 9299 0198 0023     		movs	r3, #0
 9300 019a 87F86B30 		strb	r3, [r7, #107]
2408:bluetooth_rxtx.c **** 			for (k = 0; k < 8; k++) {
 9301              		.loc 1 2408 0
 9302 019e 0023     		movs	r3, #0
 9303 01a0 7B67     		str	r3, [r7, #116]
 9304 01a2 39E0     		b	.L475
 9305              	.L479:
 9306              	.LBB18:
2409:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9307              		.loc 1 2409 0
 9308 01a4 BB6F     		ldr	r3, [r7, #120]
 9309 01a6 DA00     		lsls	r2, r3, #3
 9310 01a8 7B6F     		ldr	r3, [r7, #116]
 9311 01aa 1A44     		add	r2, r2, r3
 9312 01ac FB6F     		ldr	r3, [r7, #124]
 9313 01ae 1344     		add	r3, r3, r2
 9314 01b0 203B     		subs	r3, r3, #32
 9315 01b2 3B66     		str	r3, [r7, #96]
2410:bluetooth_rxtx.c **** 				if (offset >= DMA_SIZE*8*2) break;
 9316              		.loc 1 2410 0
 9317 01b4 3B6E     		ldr	r3, [r7, #96]
 9318 01b6 B3F5487F 		cmp	r3, #800
 9319 01ba 00DB     		blt	.L476
 9320 01bc 2FE0     		b	.L477
 9321              	.L476:
2411:bluetooth_rxtx.c **** 				int bit = unpacked[offset];
 9322              		.loc 1 2411 0
 9323 01be 3B6E     		ldr	r3, [r7, #96]
 9324 01c0 7A68     		ldr	r2, [r7, #4]
 9325 01c2 1344     		add	r3, r3, r2
ARM GAS  /tmp/cczWrdyg.s 			page 206


 9326 01c4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9327 01c6 7B66     		str	r3, [r7, #100]
2412:bluetooth_rxtx.c **** 				if (j >= 4) { // unwhiten data bytes
 9328              		.loc 1 2412 0
 9329 01c8 BB6F     		ldr	r3, [r7, #120]
 9330 01ca 032B     		cmp	r3, #3
 9331 01cc 16DD     		ble	.L478
2413:bluetooth_rxtx.c **** 					bit ^= whitening[idx];
 9332              		.loc 1 2413 0
 9333 01ce 464A     		ldr	r2, .L487+8
 9334 01d0 3B6F     		ldr	r3, [r7, #112]
 9335 01d2 1344     		add	r3, r3, r2
 9336 01d4 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9337 01d6 1A46     		mov	r2, r3
 9338 01d8 7B6E     		ldr	r3, [r7, #100]
 9339 01da 5340     		eors	r3, r3, r2
 9340 01dc 7B66     		str	r3, [r7, #100]
2414:bluetooth_rxtx.c **** 					idx = (idx + 1) % sizeof(whitening);
 9341              		.loc 1 2414 0
 9342 01de 3B6F     		ldr	r3, [r7, #112]
 9343 01e0 0133     		adds	r3, r3, #1
 9344 01e2 1946     		mov	r1, r3
 9345 01e4 414B     		ldr	r3, .L487+12
 9346 01e6 A1FB0323 		umull	r2, r3, r1, r3
 9347 01ea C81A     		subs	r0, r1, r3
 9348 01ec 4008     		lsrs	r0, r0, #1
 9349 01ee 0344     		add	r3, r3, r0
 9350 01f0 9A09     		lsrs	r2, r3, #6
 9351 01f2 1346     		mov	r3, r2
 9352 01f4 DB01     		lsls	r3, r3, #7
 9353 01f6 9B1A     		subs	r3, r3, r2
 9354 01f8 CA1A     		subs	r2, r1, r3
 9355 01fa 3A67     		str	r2, [r7, #112]
 9356              	.L478:
2415:bluetooth_rxtx.c **** 				}
2416:bluetooth_rxtx.c **** 				byte |= bit << k;
 9357              		.loc 1 2416 0 discriminator 2
 9358 01fc 7A6E     		ldr	r2, [r7, #100]
 9359 01fe 7B6F     		ldr	r3, [r7, #116]
 9360 0200 02FA03F3 		lsl	r3, r2, r3
 9361 0204 DAB2     		uxtb	r2, r3
 9362 0206 97F86B30 		ldrb	r3, [r7, #107]	@ zero_extendqisi2
 9363 020a 1343     		orrs	r3, r3, r2
 9364 020c DBB2     		uxtb	r3, r3
 9365 020e 87F86B30 		strb	r3, [r7, #107]
 9366              	.LBE18:
2408:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9367              		.loc 1 2408 0 discriminator 2
 9368 0212 7B6F     		ldr	r3, [r7, #116]
 9369 0214 0133     		adds	r3, r3, #1
 9370 0216 7B67     		str	r3, [r7, #116]
 9371              	.L475:
2408:bluetooth_rxtx.c **** 				int offset = k + (j * 8) + i - 32;
 9372              		.loc 1 2408 0 is_stmt 0 discriminator 1
 9373 0218 7B6F     		ldr	r3, [r7, #116]
 9374 021a 072B     		cmp	r3, #7
 9375 021c C2DD     		ble	.L479
ARM GAS  /tmp/cczWrdyg.s 			page 207


 9376              	.L477:
2417:bluetooth_rxtx.c **** 			}
2418:bluetooth_rxtx.c **** 			idle_rxbuf[j] = byte;
 9377              		.loc 1 2418 0 is_stmt 1 discriminator 2
 9378 021e 354B     		ldr	r3, .L487+20
 9379 0220 1A68     		ldr	r2, [r3]
 9380 0222 BB6F     		ldr	r3, [r7, #120]
 9381 0224 1344     		add	r3, r3, r2
 9382 0226 97F86B20 		ldrb	r2, [r7, #107]
 9383 022a 1A70     		strb	r2, [r3]
 9384              	.LBE17:
2406:bluetooth_rxtx.c **** 			u8 byte = 0;
 9385              		.loc 1 2406 0 discriminator 2
 9386 022c BB6F     		ldr	r3, [r7, #120]
 9387 022e 0133     		adds	r3, r3, #1
 9388 0230 BB67     		str	r3, [r7, #120]
 9389              	.L474:
2406:bluetooth_rxtx.c **** 			u8 byte = 0;
 9390              		.loc 1 2406 0 is_stmt 0 discriminator 1
 9391 0232 BB6F     		ldr	r3, [r7, #120]
 9392 0234 092B     		cmp	r3, #9
 9393 0236 AFDD     		ble	.L480
2419:bluetooth_rxtx.c **** 		}
2420:bluetooth_rxtx.c **** 
2421:bluetooth_rxtx.c **** 		u32 aa = (idle_rxbuf[3] << 24) |
 9394              		.loc 1 2421 0 is_stmt 1
 9395 0238 2E4B     		ldr	r3, .L487+20
 9396 023a 1B68     		ldr	r3, [r3]
 9397 023c 0333     		adds	r3, r3, #3
 9398 023e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9399 0240 1A06     		lsls	r2, r3, #24
2422:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9400              		.loc 1 2422 0
 9401 0242 2C4B     		ldr	r3, .L487+20
 9402 0244 1B68     		ldr	r3, [r3]
 9403 0246 0233     		adds	r3, r3, #2
 9404 0248 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9405 024a 1B04     		lsls	r3, r3, #16
2421:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9406              		.loc 1 2421 0
 9407 024c 1A43     		orrs	r2, r2, r3
2423:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
 9408              		.loc 1 2423 0
 9409 024e 294B     		ldr	r3, .L487+20
 9410 0250 1B68     		ldr	r3, [r3]
 9411 0252 0133     		adds	r3, r3, #1
 9412 0254 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 9413 0256 1B02     		lsls	r3, r3, #8
2422:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9414              		.loc 1 2422 0
 9415 0258 1343     		orrs	r3, r3, r2
2424:bluetooth_rxtx.c **** 				 (idle_rxbuf[0]);
 9416              		.loc 1 2424 0
 9417 025a 264A     		ldr	r2, .L487+20
 9418 025c 1268     		ldr	r2, [r2]
 9419 025e 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
2423:bluetooth_rxtx.c **** 				 (idle_rxbuf[1] <<  8) |
ARM GAS  /tmp/cczWrdyg.s 			page 208


 9420              		.loc 1 2423 0
 9421 0260 1343     		orrs	r3, r3, r2
2421:bluetooth_rxtx.c **** 				 (idle_rxbuf[2] << 16) |
 9422              		.loc 1 2421 0
 9423 0262 FB65     		str	r3, [r7, #92]
2425:bluetooth_rxtx.c **** 		see_aa(aa);
 9424              		.loc 1 2425 0
 9425 0264 F86D     		ldr	r0, [r7, #92]
 9426 0266 FFF7FEFF 		bl	see_aa
2426:bluetooth_rxtx.c **** 
2427:bluetooth_rxtx.c **** 		enqueue(LE_PACKET, idle_rxbuf);
 9427              		.loc 1 2427 0
 9428 026a 224B     		ldr	r3, .L487+20
 9429 026c 1B68     		ldr	r3, [r3]
 9430 026e 0120     		movs	r0, #1
 9431 0270 1946     		mov	r1, r3
 9432 0272 FFF7FEFF 		bl	enqueue
 9433              	.L473:
 9434              	.LBE16:
2379:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9435              		.loc 1 2379 0 discriminator 2
 9436 0276 FB6F     		ldr	r3, [r7, #124]
 9437 0278 0133     		adds	r3, r3, #1
 9438 027a FB67     		str	r3, [r7, #124]
 9439              	.L461:
2379:bluetooth_rxtx.c **** 		int ok[4] = { 1, 1, 1, 1 };
 9440              		.loc 1 2379 0 is_stmt 0 discriminator 1
 9441 027c FB6F     		ldr	r3, [r7, #124]
 9442 027e B3F53C7F 		cmp	r3, #752
 9443 0282 FFF62AAF 		blt	.L481
2428:bluetooth_rxtx.c **** 
2429:bluetooth_rxtx.c **** 	}
2430:bluetooth_rxtx.c **** 
2431:bluetooth_rxtx.c **** 	// once we see an AA 5 times, start following it
2432:bluetooth_rxtx.c **** 	for (i = 0; i < AA_LIST_SIZE; ++i) {
 9444              		.loc 1 2432 0 is_stmt 1
 9445 0286 0023     		movs	r3, #0
 9446 0288 FB67     		str	r3, [r7, #124]
 9447 028a 20E0     		b	.L482
 9448              	.L485:
2433:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9449              		.loc 1 2433 0
 9450 028c 1A4A     		ldr	r2, .L487+24
 9451 028e FB6F     		ldr	r3, [r7, #124]
 9452 0290 DB00     		lsls	r3, r3, #3
 9453 0292 1344     		add	r3, r3, r2
 9454 0294 5B68     		ldr	r3, [r3, #4]
 9455 0296 032B     		cmp	r3, #3
 9456 0298 16DD     		ble	.L483
2434:bluetooth_rxtx.c **** 			le_set_access_address(le_promisc.active_aa[i].aa);
 9457              		.loc 1 2434 0
 9458 029a 174A     		ldr	r2, .L487+24
 9459 029c FB6F     		ldr	r3, [r7, #124]
 9460 029e 52F83330 		ldr	r3, [r2, r3, lsl #3]
 9461 02a2 1846     		mov	r0, r3
 9462 02a4 FFF7FEFF 		bl	le_set_access_address
2435:bluetooth_rxtx.c **** 			data_cb = cb_follow_le;
ARM GAS  /tmp/cczWrdyg.s 			page 209


 9463              		.loc 1 2435 0
 9464 02a8 144B     		ldr	r3, .L487+28
 9465 02aa 154A     		ldr	r2, .L487+32
 9466 02ac 1A60     		str	r2, [r3]
2436:bluetooth_rxtx.c **** 			packet_cb = promisc_follow_cb;
 9467              		.loc 1 2436 0
 9468 02ae 154B     		ldr	r3, .L487+36
 9469 02b0 154A     		ldr	r2, .L487+40
 9470 02b2 1A60     		str	r2, [r3]
2437:bluetooth_rxtx.c **** 			le.crc_verify = 0;
 9471              		.loc 1 2437 0
 9472 02b4 154B     		ldr	r3, .L487+44
 9473 02b6 0022     		movs	r2, #0
 9474 02b8 1A61     		str	r2, [r3, #16]
2438:bluetooth_rxtx.c **** 			le_promisc_state(0, &le.access_address, 4);
 9475              		.loc 1 2438 0
 9476 02ba 0020     		movs	r0, #0
 9477 02bc 1349     		ldr	r1, .L487+44
 9478 02be 0422     		movs	r2, #4
 9479 02c0 FFF7FEFF 		bl	le_promisc_state
2439:bluetooth_rxtx.c **** 			// quit using the old stuff and switch to sync mode
2440:bluetooth_rxtx.c **** 			return 0;
 9480              		.loc 1 2440 0
 9481 02c4 0023     		movs	r3, #0
 9482 02c6 06E0     		b	.L486
 9483              	.L483:
2432:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9484              		.loc 1 2432 0 discriminator 2
 9485 02c8 FB6F     		ldr	r3, [r7, #124]
 9486 02ca 0133     		adds	r3, r3, #1
 9487 02cc FB67     		str	r3, [r7, #124]
 9488              	.L482:
2432:bluetooth_rxtx.c **** 		if (le_promisc.active_aa[i].count > 3) {
 9489              		.loc 1 2432 0 is_stmt 0 discriminator 1
 9490 02ce FB6F     		ldr	r3, [r7, #124]
 9491 02d0 1F2B     		cmp	r3, #31
 9492 02d2 DBDD     		ble	.L485
2441:bluetooth_rxtx.c **** 		}
2442:bluetooth_rxtx.c **** 	}
2443:bluetooth_rxtx.c **** 
2444:bluetooth_rxtx.c **** 	return 1;
 9493              		.loc 1 2444 0 is_stmt 1
 9494 02d4 0123     		movs	r3, #1
 9495              	.L486:
2445:bluetooth_rxtx.c **** }
 9496              		.loc 1 2445 0 discriminator 1
 9497 02d6 1846     		mov	r0, r3
 9498 02d8 8437     		adds	r7, r7, #132
 9499              		.cfi_def_cfa_offset 12
 9500 02da BD46     		mov	sp, r7
 9501              		.cfi_def_cfa_register 13
 9502              		@ sp needed
 9503 02dc 90BD     		pop	{r4, r7, pc}
 9504              	.L488:
 9505 02de 00BF     		.align	2
 9506              	.L487:
 9507 02e0 00000000 		.word	channel
ARM GAS  /tmp/cczWrdyg.s 			page 210


 9508 02e4 AC000000 		.word	whitening_index
 9509 02e8 2C000000 		.word	whitening
 9510 02ec 11080402 		.word	33818641
 9511 02f0 CC080000 		.word	.LC0
 9512 02f4 00000000 		.word	idle_rxbuf
 9513 02f8 00000000 		.word	le_promisc
 9514 02fc 00000000 		.word	data_cb
 9515 0300 00000000 		.word	cb_follow_le
 9516 0304 00000000 		.word	packet_cb
 9517 0308 00000000 		.word	promisc_follow_cb
 9518 030c 00000000 		.word	le
 9519              		.cfi_endproc
 9520              	.LFE40:
 9522              		.section	.text.bt_promisc_le,"ax",%progbits
 9523              		.align	2
 9524              		.global	bt_promisc_le
 9525              		.thumb
 9526              		.thumb_func
 9528              	bt_promisc_le:
 9529              	.LFB41:
2446:bluetooth_rxtx.c **** 
2447:bluetooth_rxtx.c **** void bt_promisc_le() {
 9530              		.loc 1 2447 0
 9531              		.cfi_startproc
 9532              		@ args = 0, pretend = 0, frame = 0
 9533              		@ frame_needed = 1, uses_anonymous_args = 0
 9534 0000 80B5     		push	{r7, lr}
 9535              		.cfi_def_cfa_offset 8
 9536              		.cfi_offset 7, -8
 9537              		.cfi_offset 14, -4
 9538 0002 00AF     		add	r7, sp, #0
 9539              		.cfi_def_cfa_register 7
2448:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_PROMISC_LE) {
 9540              		.loc 1 2448 0
 9541 0004 2CE0     		b	.L490
 9542              	.L495:
2449:bluetooth_rxtx.c **** 		reset_le_promisc();
 9543              		.loc 1 2449 0
 9544 0006 FFF7FEFF 		bl	reset_le_promisc
2450:bluetooth_rxtx.c **** 
2451:bluetooth_rxtx.c **** 		// jump to a random data channel and turn up the squelch
2452:bluetooth_rxtx.c **** 		if ((channel & 1) == 1)
 9545              		.loc 1 2452 0
 9546 000a 184B     		ldr	r3, .L496
 9547 000c 1B88     		ldrh	r3, [r3]	@ movhi
 9548 000e 9BB2     		uxth	r3, r3
 9549 0010 03F00103 		and	r3, r3, #1
 9550 0014 002B     		cmp	r3, #0
 9551 0016 03D0     		beq	.L491
2453:bluetooth_rxtx.c **** 			channel = 2440;
 9552              		.loc 1 2453 0
 9553 0018 144B     		ldr	r3, .L496
 9554 001a 40F68812 		movw	r2, #2440
 9555 001e 1A80     		strh	r2, [r3]	@ movhi
 9556              	.L491:
2454:bluetooth_rxtx.c **** 
2455:bluetooth_rxtx.c **** 		// if the PC hasn't given us AA, determine by listening
ARM GAS  /tmp/cczWrdyg.s 			page 211


2456:bluetooth_rxtx.c **** 		if (!le.target_set) {
 9557              		.loc 1 2456 0
 9558 0020 134B     		ldr	r3, .L496+4
 9559 0022 DB6B     		ldr	r3, [r3, #60]
 9560 0024 002B     		cmp	r3, #0
 9561 0026 07D1     		bne	.L492
2457:bluetooth_rxtx.c **** 			// cs_threshold_req = -80;
2458:bluetooth_rxtx.c **** 			cs_threshold_calc_and_set();
 9562              		.loc 1 2458 0
 9563 0028 FFF7FEFF 		bl	cs_threshold_calc_and_set
2459:bluetooth_rxtx.c **** 			data_cb = cb_le_promisc;
 9564              		.loc 1 2459 0
 9565 002c 114B     		ldr	r3, .L496+8
 9566 002e 124A     		ldr	r2, .L496+12
 9567 0030 1A60     		str	r2, [r3]
2460:bluetooth_rxtx.c **** 			bt_generic_le(MODE_BT_PROMISC_LE);
 9568              		.loc 1 2460 0
 9569 0032 0A20     		movs	r0, #10
 9570 0034 FFF7FEFF 		bl	bt_generic_le
 9571              	.L492:
2461:bluetooth_rxtx.c **** 		}
2462:bluetooth_rxtx.c **** 
2463:bluetooth_rxtx.c **** 		// could have got mode change in middle of above
2464:bluetooth_rxtx.c **** 		if (requested_mode != MODE_BT_PROMISC_LE)
 9572              		.loc 1 2464 0
 9573 0038 104B     		ldr	r3, .L496+16
 9574 003a 1B78     		ldrb	r3, [r3]
 9575 003c DBB2     		uxtb	r3, r3
 9576 003e 0A2B     		cmp	r3, #10
 9577 0040 00D0     		beq	.L493
2465:bluetooth_rxtx.c **** 			break;
 9578              		.loc 1 2465 0
 9579 0042 12E0     		b	.L489
 9580              	.L493:
2466:bluetooth_rxtx.c **** 
2467:bluetooth_rxtx.c **** 		le_promisc_state(0, &le.access_address, 4);
 9581              		.loc 1 2467 0
 9582 0044 0020     		movs	r0, #0
 9583 0046 0A49     		ldr	r1, .L496+4
 9584 0048 0422     		movs	r2, #4
 9585 004a FFF7FEFF 		bl	le_promisc_state
2468:bluetooth_rxtx.c **** 		packet_cb = promisc_follow_cb;
 9586              		.loc 1 2468 0
 9587 004e 0C4B     		ldr	r3, .L496+20
 9588 0050 0C4A     		ldr	r2, .L496+24
 9589 0052 1A60     		str	r2, [r3]
2469:bluetooth_rxtx.c **** 		le.crc_verify = 0;
 9590              		.loc 1 2469 0
 9591 0054 064B     		ldr	r3, .L496+4
 9592 0056 0022     		movs	r2, #0
 9593 0058 1A61     		str	r2, [r3, #16]
2470:bluetooth_rxtx.c **** 		bt_le_sync(MODE_BT_PROMISC_LE);
 9594              		.loc 1 2470 0
 9595 005a 0A20     		movs	r0, #10
 9596 005c FFF7FEFF 		bl	bt_le_sync
 9597              	.L490:
2448:bluetooth_rxtx.c **** 		reset_le_promisc();
ARM GAS  /tmp/cczWrdyg.s 			page 212


 9598              		.loc 1 2448 0
 9599 0060 064B     		ldr	r3, .L496+16
 9600 0062 1B78     		ldrb	r3, [r3]
 9601 0064 DBB2     		uxtb	r3, r3
 9602 0066 0A2B     		cmp	r3, #10
 9603 0068 CDD0     		beq	.L495
 9604              	.L489:
2471:bluetooth_rxtx.c **** 	}
2472:bluetooth_rxtx.c **** }
 9605              		.loc 1 2472 0
 9606 006a 80BD     		pop	{r7, pc}
 9607              	.L497:
 9608              		.align	2
 9609              	.L496:
 9610 006c 00000000 		.word	channel
 9611 0070 00000000 		.word	le
 9612 0074 00000000 		.word	data_cb
 9613 0078 00000000 		.word	cb_le_promisc
 9614 007c 00000000 		.word	requested_mode
 9615 0080 00000000 		.word	packet_cb
 9616 0084 00000000 		.word	promisc_follow_cb
 9617              		.cfi_endproc
 9618              	.LFE41:
 9620              		.section	.rodata
 9621              		.align	2
 9622              	.LC1:
 9623 08dc 00       		.byte	0
 9624 08dd 09       		.byte	9
 9625 08de FF       		.byte	-1
 9626 08df FF       		.byte	-1
 9627 08e0 FF       		.byte	-1
 9628 08e1 FF       		.byte	-1
 9629 08e2 FF       		.byte	-1
 9630 08e3 FF       		.byte	-1
 9631 08e4 02       		.byte	2
 9632 08e5 01       		.byte	1
 9633 08e6 05       		.byte	5
 9634 08e7 FF       		.byte	-1
 9635 08e8 FF       		.byte	-1
 9636 08e9 FF       		.byte	-1
 9637              		.section	.text.bt_slave_le,"ax",%progbits
 9638              		.align	2
 9639              		.global	bt_slave_le
 9640              		.thumb
 9641              		.thumb_func
 9643              	bt_slave_le:
 9644              	.LFB42:
2473:bluetooth_rxtx.c **** 
2474:bluetooth_rxtx.c **** void bt_slave_le() {
 9645              		.loc 1 2474 0
 9646              		.cfi_startproc
 9647              		@ args = 0, pretend = 0, frame = 32
 9648              		@ frame_needed = 1, uses_anonymous_args = 0
 9649 0000 90B5     		push	{r4, r7, lr}
 9650              		.cfi_def_cfa_offset 12
 9651              		.cfi_offset 4, -12
 9652              		.cfi_offset 7, -8
ARM GAS  /tmp/cczWrdyg.s 			page 213


 9653              		.cfi_offset 14, -4
 9654 0002 89B0     		sub	sp, sp, #36
 9655              		.cfi_def_cfa_offset 48
 9656 0004 00AF     		add	r7, sp, #0
 9657              		.cfi_def_cfa_register 7
2475:bluetooth_rxtx.c **** 	u32 calc_crc;
2476:bluetooth_rxtx.c **** 	int i;
2477:bluetooth_rxtx.c **** 
2478:bluetooth_rxtx.c **** 	u8 adv_ind[] = {
 9658              		.loc 1 2478 0
 9659 0006 354A     		ldr	r2, .L503
 9660 0008 3B1D     		adds	r3, r7, #4
 9661 000a 1446     		mov	r4, r2
 9662 000c 2068     		ldr	r0, [r4]	@ unaligned
 9663 000e 6168     		ldr	r1, [r4, #4]	@ unaligned
 9664 0010 A268     		ldr	r2, [r4, #8]	@ unaligned
 9665 0012 07C3     		stmia	r3!, {r0, r1, r2}
 9666 0014 A289     		ldrh	r2, [r4, #12]	@ unaligned
 9667 0016 1A80     		strh	r2, [r3]	@ unaligned
2479:bluetooth_rxtx.c **** 		// LL header
2480:bluetooth_rxtx.c **** 		0x00, 0x09,
2481:bluetooth_rxtx.c **** 
2482:bluetooth_rxtx.c **** 		// advertising address
2483:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
2484:bluetooth_rxtx.c **** 
2485:bluetooth_rxtx.c **** 		// advertising data
2486:bluetooth_rxtx.c **** 		0x02, 0x01, 0x05,
2487:bluetooth_rxtx.c **** 
2488:bluetooth_rxtx.c **** 		// CRC (calc)
2489:bluetooth_rxtx.c **** 		0xff, 0xff, 0xff,
2490:bluetooth_rxtx.c **** 	};
2491:bluetooth_rxtx.c **** 
2492:bluetooth_rxtx.c **** 	u8 adv_ind_len = sizeof(adv_ind) - 3;
 9668              		.loc 1 2492 0
 9669 0018 0B23     		movs	r3, #11
 9670 001a FB76     		strb	r3, [r7, #27]
2493:bluetooth_rxtx.c **** 
2494:bluetooth_rxtx.c **** 	// copy the user-specified mac address
2495:bluetooth_rxtx.c **** 	for (i = 0; i < 6; ++i)
 9671              		.loc 1 2495 0
 9672 001c 0023     		movs	r3, #0
 9673 001e FB61     		str	r3, [r7, #28]
 9674 0020 0EE0     		b	.L499
 9675              	.L500:
2496:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9676              		.loc 1 2496 0 discriminator 3
 9677 0022 FB69     		ldr	r3, [r7, #28]
 9678 0024 0233     		adds	r3, r3, #2
 9679 0026 FA69     		ldr	r2, [r7, #28]
 9680 0028 C2F10502 		rsb	r2, r2, #5
 9681 002c 2C49     		ldr	r1, .L503+4
 9682 002e 8A5C     		ldrb	r2, [r1, r2]	@ zero_extendqisi2
 9683 0030 07F12001 		add	r1, r7, #32
 9684 0034 0B44     		add	r3, r3, r1
 9685 0036 03F81C2C 		strb	r2, [r3, #-28]
2495:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9686              		.loc 1 2495 0 discriminator 3
ARM GAS  /tmp/cczWrdyg.s 			page 214


 9687 003a FB69     		ldr	r3, [r7, #28]
 9688 003c 0133     		adds	r3, r3, #1
 9689 003e FB61     		str	r3, [r7, #28]
 9690              	.L499:
2495:bluetooth_rxtx.c **** 		adv_ind[i+2] = slave_mac_address[5-i];
 9691              		.loc 1 2495 0 is_stmt 0 discriminator 1
 9692 0040 FB69     		ldr	r3, [r7, #28]
 9693 0042 052B     		cmp	r3, #5
 9694 0044 EDDD     		ble	.L500
2497:bluetooth_rxtx.c **** 
2498:bluetooth_rxtx.c **** 	calc_crc = btle_calc_crc(le.crc_init_reversed, adv_ind, adv_ind_len);
 9695              		.loc 1 2498 0 is_stmt 1
 9696 0046 274B     		ldr	r3, .L503+8
 9697 0048 D968     		ldr	r1, [r3, #12]
 9698 004a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9699 004c 3A1D     		adds	r2, r7, #4
 9700 004e 0846     		mov	r0, r1
 9701 0050 1146     		mov	r1, r2
 9702 0052 1A46     		mov	r2, r3
 9703 0054 FFF7FEFF 		bl	btle_calc_crc
 9704 0058 7861     		str	r0, [r7, #20]
2499:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+0] = (calc_crc >>  0) & 0xff;
 9705              		.loc 1 2499 0
 9706 005a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9707 005c 7A69     		ldr	r2, [r7, #20]
 9708 005e D2B2     		uxtb	r2, r2
 9709 0060 07F12001 		add	r1, r7, #32
 9710 0064 0B44     		add	r3, r3, r1
 9711 0066 03F81C2C 		strb	r2, [r3, #-28]
2500:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+1] = (calc_crc >>  8) & 0xff;
 9712              		.loc 1 2500 0
 9713 006a FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9714 006c 0133     		adds	r3, r3, #1
 9715 006e 7A69     		ldr	r2, [r7, #20]
 9716 0070 120A     		lsrs	r2, r2, #8
 9717 0072 D2B2     		uxtb	r2, r2
 9718 0074 07F12001 		add	r1, r7, #32
 9719 0078 0B44     		add	r3, r3, r1
 9720 007a 03F81C2C 		strb	r2, [r3, #-28]
2501:bluetooth_rxtx.c **** 	adv_ind[adv_ind_len+2] = (calc_crc >> 16) & 0xff;
 9721              		.loc 1 2501 0
 9722 007e FB7E     		ldrb	r3, [r7, #27]	@ zero_extendqisi2
 9723 0080 0233     		adds	r3, r3, #2
 9724 0082 7A69     		ldr	r2, [r7, #20]
 9725 0084 120C     		lsrs	r2, r2, #16
 9726 0086 D2B2     		uxtb	r2, r2
 9727 0088 07F12001 		add	r1, r7, #32
 9728 008c 0B44     		add	r3, r3, r1
 9729 008e 03F81C2C 		strb	r2, [r3, #-28]
2502:bluetooth_rxtx.c **** 
2503:bluetooth_rxtx.c **** 	// spam advertising packets
2504:bluetooth_rxtx.c **** 	while (requested_mode == MODE_BT_SLAVE_LE) {
 9730              		.loc 1 2504 0
 9731 0092 1BE0     		b	.L501
 9732              	.L502:
2505:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9733              		.loc 1 2505 0
ARM GAS  /tmp/cczWrdyg.s 			page 215


 9734 0094 144B     		ldr	r3, .L503+12
 9735 0096 4FF08072 		mov	r2, #16777216
 9736 009a 1A60     		str	r2, [r3]
2506:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_DMA;
 9737              		.loc 1 2506 0
 9738 009c 124B     		ldr	r3, .L503+12
 9739 009e 4FF08062 		mov	r2, #67108864
 9740 00a2 1A60     		str	r2, [r3]
2507:bluetooth_rxtx.c **** 		le_transmit(0x8e89bed6, adv_ind_len+3, adv_ind);
 9741              		.loc 1 2507 0
 9742 00a4 FB7E     		ldrb	r3, [r7, #27]
 9743 00a6 0333     		adds	r3, r3, #3
 9744 00a8 DAB2     		uxtb	r2, r3
 9745 00aa 3B1D     		adds	r3, r7, #4
 9746 00ac 0F48     		ldr	r0, .L503+16
 9747 00ae 1146     		mov	r1, r2
 9748 00b0 1A46     		mov	r2, r3
 9749 00b2 FFF7FEFF 		bl	le_transmit
2508:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_USB;
 9750              		.loc 1 2508 0
 9751 00b6 0E4B     		ldr	r3, .L503+20
 9752 00b8 4FF08072 		mov	r2, #16777216
 9753 00bc 1A60     		str	r2, [r3]
2509:bluetooth_rxtx.c **** 		ISER0 = ISER0_ISE_DMA;
 9754              		.loc 1 2509 0
 9755 00be 0C4B     		ldr	r3, .L503+20
 9756 00c0 4FF08062 		mov	r2, #67108864
 9757 00c4 1A60     		str	r2, [r3]
2510:bluetooth_rxtx.c **** 		msleep(100);
 9758              		.loc 1 2510 0
 9759 00c6 6420     		movs	r0, #100
 9760 00c8 FFF7FEFF 		bl	msleep
 9761              	.L501:
2504:bluetooth_rxtx.c **** 		ICER0 = ICER0_ICE_USB;
 9762              		.loc 1 2504 0
 9763 00cc 094B     		ldr	r3, .L503+24
 9764 00ce 1B78     		ldrb	r3, [r3]
 9765 00d0 DBB2     		uxtb	r3, r3
 9766 00d2 0C2B     		cmp	r3, #12
 9767 00d4 DED0     		beq	.L502
2511:bluetooth_rxtx.c **** 	}
2512:bluetooth_rxtx.c **** }
 9768              		.loc 1 2512 0
 9769 00d6 2437     		adds	r7, r7, #36
 9770              		.cfi_def_cfa_offset 12
 9771 00d8 BD46     		mov	sp, r7
 9772              		.cfi_def_cfa_register 13
 9773              		@ sp needed
 9774 00da 90BD     		pop	{r4, r7, pc}
 9775              	.L504:
 9776              		.align	2
 9777              	.L503:
 9778 00dc DC080000 		.word	.LC1
 9779 00e0 00000000 		.word	slave_mac_address
 9780 00e4 00000000 		.word	le
 9781 00e8 80E100E0 		.word	-536813184
 9782 00ec D6BE898E 		.word	-1903575338
ARM GAS  /tmp/cczWrdyg.s 			page 216


 9783 00f0 00E100E0 		.word	-536813312
 9784 00f4 00000000 		.word	requested_mode
 9785              		.cfi_endproc
 9786              	.LFE42:
 9788              		.section	.text.specan,"ax",%progbits
 9789              		.align	2
 9790              		.global	specan
 9791              		.thumb
 9792              		.thumb_func
 9794              	specan:
 9795              	.LFB43:
2513:bluetooth_rxtx.c **** 
2514:bluetooth_rxtx.c **** /* spectrum analysis */
2515:bluetooth_rxtx.c **** void specan()
2516:bluetooth_rxtx.c **** {
 9796              		.loc 1 2516 0
 9797              		.cfi_startproc
 9798              		@ args = 0, pretend = 0, frame = 64
 9799              		@ frame_needed = 1, uses_anonymous_args = 0
 9800 0000 90B5     		push	{r4, r7, lr}
 9801              		.cfi_def_cfa_offset 12
 9802              		.cfi_offset 4, -12
 9803              		.cfi_offset 7, -8
 9804              		.cfi_offset 14, -4
 9805 0002 91B0     		sub	sp, sp, #68
 9806              		.cfi_def_cfa_offset 80
 9807 0004 00AF     		add	r7, sp, #0
 9808              		.cfi_def_cfa_register 7
2517:bluetooth_rxtx.c **** 	u8 epstat;
2518:bluetooth_rxtx.c **** 	u16 f;
2519:bluetooth_rxtx.c **** 	u8 i = 0;
 9809              		.loc 1 2519 0
 9810 0006 0023     		movs	r3, #0
 9811 0008 87F83D30 		strb	r3, [r7, #61]
2520:bluetooth_rxtx.c **** 	u8 buf[DMA_SIZE];
2521:bluetooth_rxtx.c **** 
2522:bluetooth_rxtx.c **** 	RXLED_SET;
 9812              		.loc 1 2522 0
 9813 000c 5A4B     		ldr	r3, .L516
 9814 000e 1022     		movs	r2, #16
 9815 0010 1A60     		str	r2, [r3]
2523:bluetooth_rxtx.c **** 
2524:bluetooth_rxtx.c **** 	queue_init();
 9816              		.loc 1 2524 0
 9817 0012 FFF7FEFF 		bl	queue_init
2525:bluetooth_rxtx.c **** 
2526:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2527:bluetooth_rxtx.c **** 	PAEN_SET;
 9818              		.loc 1 2527 0
 9819 0016 594B     		ldr	r3, .L516+4
 9820 0018 8022     		movs	r2, #128
 9821 001a 1A60     		str	r2, [r3]
2528:bluetooth_rxtx.c **** 	//HGM_SET;
2529:bluetooth_rxtx.c **** #endif
2530:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 9822              		.loc 1 2530 0
 9823 001c 1220     		movs	r0, #18
ARM GAS  /tmp/cczWrdyg.s 			page 217


 9824 001e 42F62231 		movw	r1, #11042
 9825 0022 FFF7FEFF 		bl	cc2400_set
2531:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 9826              		.loc 1 2531 0
 9827 0026 1420     		movs	r0, #20
 9828 0028 41F24B31 		movw	r1, #4939
 9829 002c FFF7FEFF 		bl	cc2400_set
2532:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 9830              		.loc 1 2532 0
 9831 0030 2020     		movs	r0, #32
 9832 0032 40F20111 		movw	r1, #257
 9833 0036 FFF7FEFF 		bl	cc2400_set
2533:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 9834              		.loc 1 2533 0
 9835 003a 0320     		movs	r0, #3
 9836 003c 2921     		movs	r1, #41
 9837 003e FFF7FEFF 		bl	cc2400_set
2534:bluetooth_rxtx.c **** 	//FIXME maybe set RSSI.RSSI_FILT
2535:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 9838              		.loc 1 2535 0
 9839 0042 00BF     		nop
 9840              	.L506:
 9841              		.loc 1 2535 0 is_stmt 0 discriminator 1
 9842 0044 FFF7FEFF 		bl	cc2400_status
 9843 0048 0346     		mov	r3, r0
 9844 004a 03F04003 		and	r3, r3, #64
 9845 004e 002B     		cmp	r3, #0
 9846 0050 F8D0     		beq	.L506
2536:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 9847              		.loc 1 2536 0 is_stmt 1
 9848 0052 00BF     		nop
 9849              	.L507:
 9850              		.loc 1 2536 0 is_stmt 0 discriminator 1
 9851 0054 FFF7FEFF 		bl	cc2400_status
 9852 0058 0346     		mov	r3, r0
 9853 005a 03F00403 		and	r3, r3, #4
 9854 005e 002B     		cmp	r3, #0
 9855 0060 F8D1     		bne	.L507
2537:bluetooth_rxtx.c **** 
2538:bluetooth_rxtx.c **** 	while (requested_mode == MODE_SPECAN) {
 9856              		.loc 1 2538 0 is_stmt 1
 9857 0062 7AE0     		b	.L508
 9858              	.L515:
2539:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9859              		.loc 1 2539 0
 9860 0064 464B     		ldr	r3, .L516+8
 9861 0066 1B88     		ldrh	r3, [r3]	@ movhi
 9862 0068 FB87     		strh	r3, [r7, #62]	@ movhi
 9863 006a 6FE0     		b	.L509
 9864              	.L514:
 9865              	.LBB19:
2540:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9866              		.loc 1 2540 0
 9867 006c FB8F     		ldrh	r3, [r7, #62]	@ movhi
 9868 006e 013B     		subs	r3, r3, #1
 9869 0070 9BB2     		uxth	r3, r3
 9870 0072 0220     		movs	r0, #2
ARM GAS  /tmp/cczWrdyg.s 			page 218


 9871 0074 1946     		mov	r1, r3
 9872 0076 FFF7FEFF 		bl	cc2400_set
2541:bluetooth_rxtx.c **** 			cc2400_strobe(SFSON);
 9873              		.loc 1 2541 0
 9874 007a 6120     		movs	r0, #97
 9875 007c FFF7FEFF 		bl	cc2400_strobe
2542:bluetooth_rxtx.c **** 			while (!(cc2400_status() & FS_LOCK));
 9876              		.loc 1 2542 0
 9877 0080 00BF     		nop
 9878              	.L510:
 9879              		.loc 1 2542 0 is_stmt 0 discriminator 1
 9880 0082 FFF7FEFF 		bl	cc2400_status
 9881 0086 0346     		mov	r3, r0
 9882 0088 03F00403 		and	r3, r3, #4
 9883 008c 002B     		cmp	r3, #0
 9884 008e F8D0     		beq	.L510
2543:bluetooth_rxtx.c **** 			cc2400_strobe(SRX);
 9885              		.loc 1 2543 0 is_stmt 1
 9886 0090 6220     		movs	r0, #98
 9887 0092 FFF7FEFF 		bl	cc2400_strobe
2544:bluetooth_rxtx.c **** 
2545:bluetooth_rxtx.c **** 			/* give the CC2400 time to acquire RSSI reading */
2546:bluetooth_rxtx.c **** 			volatile u32 j = 500; while (--j); //FIXME crude delay
 9888              		.loc 1 2546 0
 9889 0096 4FF4FA73 		mov	r3, #500
 9890 009a 7B60     		str	r3, [r7, #4]
 9891 009c 00BF     		nop
 9892              	.L511:
 9893              		.loc 1 2546 0 is_stmt 0 discriminator 2
 9894 009e 7B68     		ldr	r3, [r7, #4]
 9895 00a0 013B     		subs	r3, r3, #1
 9896 00a2 7B60     		str	r3, [r7, #4]
 9897 00a4 002B     		cmp	r3, #0
 9898 00a6 FAD1     		bne	.L511
2547:bluetooth_rxtx.c **** 			buf[3 * i] = (f >> 8) & 0xFF;
 9899              		.loc 1 2547 0 is_stmt 1
 9900 00a8 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 9901 00ac 1346     		mov	r3, r2
 9902 00ae 5B00     		lsls	r3, r3, #1
 9903 00b0 1344     		add	r3, r3, r2
 9904 00b2 FA8F     		ldrh	r2, [r7, #62]
 9905 00b4 120A     		lsrs	r2, r2, #8
 9906 00b6 92B2     		uxth	r2, r2
 9907 00b8 D2B2     		uxtb	r2, r2
 9908 00ba 07F14001 		add	r1, r7, #64
 9909 00be 0B44     		add	r3, r3, r1
 9910 00c0 03F8382C 		strb	r2, [r3, #-56]
2548:bluetooth_rxtx.c **** 			buf[(3 * i) + 1] = f  & 0xFF;
 9911              		.loc 1 2548 0
 9912 00c4 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 9913 00c8 1346     		mov	r3, r2
 9914 00ca 5B00     		lsls	r3, r3, #1
 9915 00cc 1344     		add	r3, r3, r2
 9916 00ce 0133     		adds	r3, r3, #1
 9917 00d0 FA8F     		ldrh	r2, [r7, #62]	@ movhi
 9918 00d2 D2B2     		uxtb	r2, r2
 9919 00d4 07F14001 		add	r1, r7, #64
ARM GAS  /tmp/cczWrdyg.s 			page 219


 9920 00d8 0B44     		add	r3, r3, r1
 9921 00da 03F8382C 		strb	r2, [r3, #-56]
2549:bluetooth_rxtx.c **** 			buf[(3 * i) + 2] = cc2400_get(RSSI) >> 8;
 9922              		.loc 1 2549 0
 9923 00de 97F83D20 		ldrb	r2, [r7, #61]	@ zero_extendqisi2
 9924 00e2 1346     		mov	r3, r2
 9925 00e4 5B00     		lsls	r3, r3, #1
 9926 00e6 1344     		add	r3, r3, r2
 9927 00e8 9C1C     		adds	r4, r3, #2
 9928 00ea 0620     		movs	r0, #6
 9929 00ec FFF7FEFF 		bl	cc2400_get
 9930 00f0 0346     		mov	r3, r0
 9931 00f2 1B0A     		lsrs	r3, r3, #8
 9932 00f4 9BB2     		uxth	r3, r3
 9933 00f6 DAB2     		uxtb	r2, r3
 9934 00f8 07F14003 		add	r3, r7, #64
 9935 00fc 2344     		add	r3, r3, r4
 9936 00fe 03F8382C 		strb	r2, [r3, #-56]
2550:bluetooth_rxtx.c **** 			i++;
 9937              		.loc 1 2550 0
 9938 0102 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 9939 0106 0133     		adds	r3, r3, #1
 9940 0108 87F83D30 		strb	r3, [r7, #61]
2551:bluetooth_rxtx.c **** 			if (i == 16) {
 9941              		.loc 1 2551 0
 9942 010c 97F83D30 		ldrb	r3, [r7, #61]	@ zero_extendqisi2
 9943 0110 102B     		cmp	r3, #16
 9944 0112 0DD1     		bne	.L512
2552:bluetooth_rxtx.c **** 				enqueue(SPECAN, buf);
 9945              		.loc 1 2552 0
 9946 0114 07F10803 		add	r3, r7, #8
 9947 0118 0420     		movs	r0, #4
 9948 011a 1946     		mov	r1, r3
 9949 011c FFF7FEFF 		bl	enqueue
2553:bluetooth_rxtx.c **** 				i = 0;
 9950              		.loc 1 2553 0
 9951 0120 0023     		movs	r3, #0
 9952 0122 87F83D30 		strb	r3, [r7, #61]
2554:bluetooth_rxtx.c **** 
2555:bluetooth_rxtx.c **** 				handle_usb(clkn);
 9953              		.loc 1 2555 0
 9954 0126 174B     		ldr	r3, .L516+12
 9955 0128 1B68     		ldr	r3, [r3]
 9956 012a 1846     		mov	r0, r3
 9957 012c FFF7FEFF 		bl	handle_usb
 9958              	.L512:
2556:bluetooth_rxtx.c **** 			}
2557:bluetooth_rxtx.c **** 
2558:bluetooth_rxtx.c **** 			cc2400_strobe(SRFOFF);
 9959              		.loc 1 2558 0
 9960 0130 6420     		movs	r0, #100
 9961 0132 FFF7FEFF 		bl	cc2400_strobe
2559:bluetooth_rxtx.c **** 			while ((cc2400_status() & FS_LOCK));
 9962              		.loc 1 2559 0
 9963 0136 00BF     		nop
 9964              	.L513:
 9965              		.loc 1 2559 0 is_stmt 0 discriminator 1
ARM GAS  /tmp/cczWrdyg.s 			page 220


 9966 0138 FFF7FEFF 		bl	cc2400_status
 9967 013c 0346     		mov	r3, r0
 9968 013e 03F00403 		and	r3, r3, #4
 9969 0142 002B     		cmp	r3, #0
 9970 0144 F8D1     		bne	.L513
 9971              	.LBE19:
2539:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9972              		.loc 1 2539 0 is_stmt 1 discriminator 2
 9973 0146 FB8F     		ldrh	r3, [r7, #62]
 9974 0148 0133     		adds	r3, r3, #1
 9975 014a FB87     		strh	r3, [r7, #62]	@ movhi
 9976              	.L509:
2539:bluetooth_rxtx.c **** 			cc2400_set(FSDIV, f - 1);
 9977              		.loc 1 2539 0 is_stmt 0 discriminator 1
 9978 014c FA8F     		ldrh	r2, [r7, #62]
 9979 014e 0E4B     		ldr	r3, .L516+16
 9980 0150 1B88     		ldrh	r3, [r3]	@ movhi
 9981 0152 9BB2     		uxth	r3, r3
 9982 0154 0133     		adds	r3, r3, #1
 9983 0156 9A42     		cmp	r2, r3
 9984 0158 88DB     		blt	.L514
 9985              	.L508:
2538:bluetooth_rxtx.c **** 		for (f = low_freq; f < high_freq + 1; f++) {
 9986              		.loc 1 2538 0 is_stmt 1
 9987 015a 0C4B     		ldr	r3, .L516+20
 9988 015c 1B78     		ldrb	r3, [r3]
 9989 015e DBB2     		uxtb	r3, r3
 9990 0160 042B     		cmp	r3, #4
 9991 0162 3FF47FAF 		beq	.L515
2560:bluetooth_rxtx.c **** 		}
2561:bluetooth_rxtx.c **** 	}
2562:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 9992              		.loc 1 2562 0
 9993 0166 0A4B     		ldr	r3, .L516+24
 9994 0168 0022     		movs	r2, #0
 9995 016a 1A70     		strb	r2, [r3]
2563:bluetooth_rxtx.c **** 	RXLED_CLR;
 9996              		.loc 1 2563 0
 9997 016c 094B     		ldr	r3, .L516+28
 9998 016e 1022     		movs	r2, #16
 9999 0170 1A60     		str	r2, [r3]
2564:bluetooth_rxtx.c **** }
 10000              		.loc 1 2564 0
 10001 0172 4437     		adds	r7, r7, #68
 10002              		.cfi_def_cfa_offset 12
 10003 0174 BD46     		mov	sp, r7
 10004              		.cfi_def_cfa_register 13
 10005              		@ sp needed
 10006 0176 90BD     		pop	{r4, r7, pc}
 10007              	.L517:
 10008              		.align	2
 10009              	.L516:
 10010 0178 38C00920 		.word	537509944
 10011 017c 58C00920 		.word	537509976
 10012 0180 00000000 		.word	low_freq
 10013 0184 00000000 		.word	clkn
 10014 0188 00000000 		.word	high_freq
ARM GAS  /tmp/cczWrdyg.s 			page 221


 10015 018c 00000000 		.word	requested_mode
 10016 0190 00000000 		.word	mode
 10017 0194 3CC00920 		.word	537509948
 10018              		.cfi_endproc
 10019              	.LFE43:
 10021              		.section	.rodata
 10022 08ea 0000     		.align	2
 10023              	.LC2:
 10024 08ec 6C09     		.short	2412
 10025 08ee 8509     		.short	2437
 10026 08f0 9E09     		.short	2462
 10027              		.section	.text.led_specan,"ax",%progbits
 10028              		.align	2
 10029              		.global	led_specan
 10030              		.thumb
 10031              		.thumb_func
 10033              	led_specan:
 10034              	.LFB44:
2565:bluetooth_rxtx.c **** 
2566:bluetooth_rxtx.c **** /* LED based spectrum analysis */
2567:bluetooth_rxtx.c **** void led_specan()
2568:bluetooth_rxtx.c **** {
 10035              		.loc 1 2568 0
 10036              		.cfi_startproc
 10037              		@ args = 0, pretend = 0, frame = 16
 10038              		@ frame_needed = 1, uses_anonymous_args = 0
 10039 0000 80B5     		push	{r7, lr}
 10040              		.cfi_def_cfa_offset 8
 10041              		.cfi_offset 7, -8
 10042              		.cfi_offset 14, -4
 10043 0002 84B0     		sub	sp, sp, #16
 10044              		.cfi_def_cfa_offset 24
 10045 0004 00AF     		add	r7, sp, #0
 10046              		.cfi_def_cfa_register 7
2569:bluetooth_rxtx.c **** 	int8_t lvl;
2570:bluetooth_rxtx.c **** 	u8 i = 0;
 10047              		.loc 1 2570 0
 10048 0006 0023     		movs	r3, #0
 10049 0008 FB73     		strb	r3, [r7, #15]
2571:bluetooth_rxtx.c **** 	u16 channels[3] = {2412, 2437, 2462};
 10050              		.loc 1 2571 0
 10051 000a 5B4A     		ldr	r2, .L535
 10052 000c 07F10803 		add	r3, r7, #8
 10053 0010 1068     		ldr	r0, [r2]	@ unaligned
 10054 0012 1860     		str	r0, [r3]	@ unaligned
 10055 0014 9288     		ldrh	r2, [r2, #4]	@ unaligned
 10056 0016 9A80     		strh	r2, [r3, #4]	@ unaligned
2572:bluetooth_rxtx.c **** 	//void (*set[3]) = {TXLED_SET, RXLED_SET, USRLED_SET};
2573:bluetooth_rxtx.c **** 	//void (*clr[3]) = {TXLED_CLR, RXLED_CLR, USRLED_CLR};
2574:bluetooth_rxtx.c **** 
2575:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2576:bluetooth_rxtx.c **** 	PAEN_SET;
 10057              		.loc 1 2576 0
 10058 0018 584B     		ldr	r3, .L535+4
 10059 001a 8022     		movs	r2, #128
 10060 001c 1A60     		str	r2, [r3]
2577:bluetooth_rxtx.c **** 	//HGM_SET;
ARM GAS  /tmp/cczWrdyg.s 			page 222


2578:bluetooth_rxtx.c **** #endif
2579:bluetooth_rxtx.c **** 	cc2400_set(LMTST,   0x2b22);
 10061              		.loc 1 2579 0
 10062 001e 1220     		movs	r0, #18
 10063 0020 42F62231 		movw	r1, #11042
 10064 0024 FFF7FEFF 		bl	cc2400_set
2580:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // without PRNG
 10065              		.loc 1 2580 0
 10066 0028 1420     		movs	r0, #20
 10067 002a 41F24B31 		movw	r1, #4939
 10068 002e FFF7FEFF 		bl	cc2400_set
2581:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0101); // un-buffered mode, GFSK
 10069              		.loc 1 2581 0
 10070 0032 2020     		movs	r0, #32
 10071 0034 40F20111 		movw	r1, #257
 10072 0038 FFF7FEFF 		bl	cc2400_set
2582:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0029); // 160 kHz frequency deviation
 10073              		.loc 1 2582 0
 10074 003c 0320     		movs	r0, #3
 10075 003e 2921     		movs	r1, #41
 10076 0040 FFF7FEFF 		bl	cc2400_set
2583:bluetooth_rxtx.c **** 	cc2400_set(RSSI,    0x00F1); // RSSI Sample over 2 symbols
 10077              		.loc 1 2583 0
 10078 0044 0620     		movs	r0, #6
 10079 0046 F121     		movs	r1, #241
 10080 0048 FFF7FEFF 		bl	cc2400_set
2584:bluetooth_rxtx.c **** 
2585:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10081              		.loc 1 2585 0
 10082 004c 00BF     		nop
 10083              	.L519:
 10084              		.loc 1 2585 0 is_stmt 0 discriminator 1
 10085 004e FFF7FEFF 		bl	cc2400_status
 10086 0052 0346     		mov	r3, r0
 10087 0054 03F04003 		and	r3, r3, #64
 10088 0058 002B     		cmp	r3, #0
 10089 005a F8D0     		beq	.L519
2586:bluetooth_rxtx.c **** 	while ((cc2400_status() & FS_LOCK));
 10090              		.loc 1 2586 0 is_stmt 1
 10091 005c 00BF     		nop
 10092              	.L520:
 10093              		.loc 1 2586 0 is_stmt 0 discriminator 1
 10094 005e FFF7FEFF 		bl	cc2400_status
 10095 0062 0346     		mov	r3, r0
 10096 0064 03F00403 		and	r3, r3, #4
 10097 0068 002B     		cmp	r3, #0
 10098 006a F8D1     		bne	.L520
2587:bluetooth_rxtx.c **** 
2588:bluetooth_rxtx.c **** 	while (requested_mode == MODE_LED_SPECAN) {
 10099              		.loc 1 2588 0 is_stmt 1
 10100 006c 79E0     		b	.L521
 10101              	.L534:
 10102              	.LBB20:
2589:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10103              		.loc 1 2589 0
 10104 006e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10105 0070 5B00     		lsls	r3, r3, #1
ARM GAS  /tmp/cczWrdyg.s 			page 223


 10106 0072 07F11002 		add	r2, r7, #16
 10107 0076 1344     		add	r3, r3, r2
 10108 0078 33F8083C 		ldrh	r3, [r3, #-8]
 10109 007c 013B     		subs	r3, r3, #1
 10110 007e 9BB2     		uxth	r3, r3
 10111 0080 0220     		movs	r0, #2
 10112 0082 1946     		mov	r1, r3
 10113 0084 FFF7FEFF 		bl	cc2400_set
2590:bluetooth_rxtx.c **** 		cc2400_strobe(SFSON);
 10114              		.loc 1 2590 0
 10115 0088 6120     		movs	r0, #97
 10116 008a FFF7FEFF 		bl	cc2400_strobe
2591:bluetooth_rxtx.c **** 		while (!(cc2400_status() & FS_LOCK));
 10117              		.loc 1 2591 0
 10118 008e 00BF     		nop
 10119              	.L522:
 10120              		.loc 1 2591 0 is_stmt 0 discriminator 1
 10121 0090 FFF7FEFF 		bl	cc2400_status
 10122 0094 0346     		mov	r3, r0
 10123 0096 03F00403 		and	r3, r3, #4
 10124 009a 002B     		cmp	r3, #0
 10125 009c F8D0     		beq	.L522
2592:bluetooth_rxtx.c **** 		cc2400_strobe(SRX);
 10126              		.loc 1 2592 0 is_stmt 1
 10127 009e 6220     		movs	r0, #98
 10128 00a0 FFF7FEFF 		bl	cc2400_strobe
2593:bluetooth_rxtx.c **** 
2594:bluetooth_rxtx.c **** 		/* give the CC2400 time to acquire RSSI reading */
2595:bluetooth_rxtx.c **** 		volatile u32 j = 500; while (--j); //FIXME crude delay
 10129              		.loc 1 2595 0
 10130 00a4 4FF4FA73 		mov	r3, #500
 10131 00a8 7B60     		str	r3, [r7, #4]
 10132 00aa 00BF     		nop
 10133              	.L523:
 10134              		.loc 1 2595 0 is_stmt 0 discriminator 2
 10135 00ac 7B68     		ldr	r3, [r7, #4]
 10136 00ae 013B     		subs	r3, r3, #1
 10137 00b0 7B60     		str	r3, [r7, #4]
 10138 00b2 002B     		cmp	r3, #0
 10139 00b4 FAD1     		bne	.L523
2596:bluetooth_rxtx.c **** 		lvl = cc2400_get(RSSI) >> 8;
 10140              		.loc 1 2596 0 is_stmt 1
 10141 00b6 0620     		movs	r0, #6
 10142 00b8 FFF7FEFF 		bl	cc2400_get
 10143 00bc 0346     		mov	r3, r0
 10144 00be 1B0A     		lsrs	r3, r3, #8
 10145 00c0 9BB2     		uxth	r3, r3
 10146 00c2 BB73     		strb	r3, [r7, #14]
2597:bluetooth_rxtx.c ****         if (lvl > rssi_threshold) {
 10147              		.loc 1 2597 0
 10148 00c4 2E4B     		ldr	r3, .L535+8
 10149 00c6 1B78     		ldrb	r3, [r3]
 10150 00c8 DBB2     		uxtb	r3, r3
 10151 00ca 97F90E20 		ldrsb	r2, [r7, #14]
 10152 00ce 5BB2     		sxtb	r3, r3
 10153 00d0 9A42     		cmp	r2, r3
 10154 00d2 15DD     		ble	.L524
ARM GAS  /tmp/cczWrdyg.s 			page 224


2598:bluetooth_rxtx.c ****             switch (i) {
 10155              		.loc 1 2598 0
 10156 00d4 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10157 00d6 012B     		cmp	r3, #1
 10158 00d8 09D0     		beq	.L526
 10159 00da 022B     		cmp	r3, #2
 10160 00dc 0BD0     		beq	.L527
 10161 00de 002B     		cmp	r3, #0
 10162 00e0 00D0     		beq	.L528
 10163 00e2 21E0     		b	.L529
 10164              	.L528:
2599:bluetooth_rxtx.c ****                 case 0:
2600:bluetooth_rxtx.c ****                     TXLED_SET;
 10165              		.loc 1 2600 0
 10166 00e4 274B     		ldr	r3, .L535+12
 10167 00e6 4FF48072 		mov	r2, #256
 10168 00ea 1A60     		str	r2, [r3]
2601:bluetooth_rxtx.c ****                     break;
 10169              		.loc 1 2601 0
 10170 00ec 07E0     		b	.L525
 10171              	.L526:
2602:bluetooth_rxtx.c ****                 case 1:
2603:bluetooth_rxtx.c ****                     RXLED_SET;
 10172              		.loc 1 2603 0
 10173 00ee 254B     		ldr	r3, .L535+12
 10174 00f0 1022     		movs	r2, #16
 10175 00f2 1A60     		str	r2, [r3]
2604:bluetooth_rxtx.c ****                     break;
 10176              		.loc 1 2604 0
 10177 00f4 03E0     		b	.L525
 10178              	.L527:
2605:bluetooth_rxtx.c ****                 case 2:
2606:bluetooth_rxtx.c ****                     USRLED_SET;
 10179              		.loc 1 2606 0
 10180 00f6 234B     		ldr	r3, .L535+12
 10181 00f8 0222     		movs	r2, #2
 10182 00fa 1A60     		str	r2, [r3]
2607:bluetooth_rxtx.c ****                     break;
 10183              		.loc 1 2607 0
 10184 00fc 00BF     		nop
 10185              	.L525:
 10186 00fe 13E0     		b	.L529
 10187              	.L524:
2608:bluetooth_rxtx.c ****             }
2609:bluetooth_rxtx.c ****         }
2610:bluetooth_rxtx.c ****         else {
2611:bluetooth_rxtx.c ****             switch (i) {
 10188              		.loc 1 2611 0
 10189 0100 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10190 0102 012B     		cmp	r3, #1
 10191 0104 08D0     		beq	.L530
 10192 0106 022B     		cmp	r3, #2
 10193 0108 0AD0     		beq	.L531
 10194 010a 002B     		cmp	r3, #0
 10195 010c 0CD1     		bne	.L529
2612:bluetooth_rxtx.c ****                 case 0:
2613:bluetooth_rxtx.c ****                     TXLED_CLR;
ARM GAS  /tmp/cczWrdyg.s 			page 225


 10196              		.loc 1 2613 0
 10197 010e 1E4B     		ldr	r3, .L535+16
 10198 0110 4FF48072 		mov	r2, #256
 10199 0114 1A60     		str	r2, [r3]
2614:bluetooth_rxtx.c ****                     break;
 10200              		.loc 1 2614 0
 10201 0116 07E0     		b	.L529
 10202              	.L530:
2615:bluetooth_rxtx.c ****                 case 1:
2616:bluetooth_rxtx.c ****                     RXLED_CLR;
 10203              		.loc 1 2616 0
 10204 0118 1B4B     		ldr	r3, .L535+16
 10205 011a 1022     		movs	r2, #16
 10206 011c 1A60     		str	r2, [r3]
2617:bluetooth_rxtx.c ****                     break;
 10207              		.loc 1 2617 0
 10208 011e 03E0     		b	.L529
 10209              	.L531:
2618:bluetooth_rxtx.c ****                 case 2:
2619:bluetooth_rxtx.c ****                     USRLED_CLR;
 10210              		.loc 1 2619 0
 10211 0120 194B     		ldr	r3, .L535+16
 10212 0122 0222     		movs	r2, #2
 10213 0124 1A60     		str	r2, [r3]
2620:bluetooth_rxtx.c ****                     break;
 10214              		.loc 1 2620 0
 10215 0126 00BF     		nop
 10216              	.L529:
2621:bluetooth_rxtx.c ****             }
2622:bluetooth_rxtx.c ****         }
2623:bluetooth_rxtx.c **** 
2624:bluetooth_rxtx.c **** 		i = (i+1) % 3;
 10217              		.loc 1 2624 0
 10218 0128 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 10219 012a 5A1C     		adds	r2, r3, #1
 10220 012c 174B     		ldr	r3, .L535+20
 10221 012e 83FB0231 		smull	r3, r1, r3, r2
 10222 0132 D317     		asrs	r3, r2, #31
 10223 0134 C91A     		subs	r1, r1, r3
 10224 0136 0B46     		mov	r3, r1
 10225 0138 5B00     		lsls	r3, r3, #1
 10226 013a 0B44     		add	r3, r3, r1
 10227 013c D11A     		subs	r1, r2, r3
 10228 013e 0B46     		mov	r3, r1
 10229 0140 FB73     		strb	r3, [r7, #15]
2625:bluetooth_rxtx.c **** 
2626:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10230              		.loc 1 2626 0
 10231 0142 134B     		ldr	r3, .L535+24
 10232 0144 1B68     		ldr	r3, [r3]
 10233 0146 1846     		mov	r0, r3
 10234 0148 FFF7FEFF 		bl	handle_usb
2627:bluetooth_rxtx.c ****         //wait(1);
2628:bluetooth_rxtx.c **** 		cc2400_strobe(SRFOFF);
 10235              		.loc 1 2628 0
 10236 014c 6420     		movs	r0, #100
 10237 014e FFF7FEFF 		bl	cc2400_strobe
ARM GAS  /tmp/cczWrdyg.s 			page 226


2629:bluetooth_rxtx.c **** 		while ((cc2400_status() & FS_LOCK));
 10238              		.loc 1 2629 0
 10239 0152 00BF     		nop
 10240              	.L533:
 10241              		.loc 1 2629 0 is_stmt 0 discriminator 1
 10242 0154 FFF7FEFF 		bl	cc2400_status
 10243 0158 0346     		mov	r3, r0
 10244 015a 03F00403 		and	r3, r3, #4
 10245 015e 002B     		cmp	r3, #0
 10246 0160 F8D1     		bne	.L533
 10247              	.L521:
 10248              	.LBE20:
2588:bluetooth_rxtx.c **** 		cc2400_set(FSDIV, channels[i] - 1);
 10249              		.loc 1 2588 0 is_stmt 1
 10250 0162 0C4B     		ldr	r3, .L535+28
 10251 0164 1B78     		ldrb	r3, [r3]
 10252 0166 DBB2     		uxtb	r3, r3
 10253 0168 072B     		cmp	r3, #7
 10254 016a 80D0     		beq	.L534
2630:bluetooth_rxtx.c **** 	}
2631:bluetooth_rxtx.c **** 	mode = MODE_IDLE;
 10255              		.loc 1 2631 0
 10256 016c 0A4B     		ldr	r3, .L535+32
 10257 016e 0022     		movs	r2, #0
 10258 0170 1A70     		strb	r2, [r3]
2632:bluetooth_rxtx.c **** }
 10259              		.loc 1 2632 0
 10260 0172 1037     		adds	r7, r7, #16
 10261              		.cfi_def_cfa_offset 8
 10262 0174 BD46     		mov	sp, r7
 10263              		.cfi_def_cfa_register 13
 10264              		@ sp needed
 10265 0176 80BD     		pop	{r7, pc}
 10266              	.L536:
 10267              		.align	2
 10268              	.L535:
 10269 0178 EC080000 		.word	.LC2
 10270 017c 58C00920 		.word	537509976
 10271 0180 00000000 		.word	rssi_threshold
 10272 0184 38C00920 		.word	537509944
 10273 0188 3CC00920 		.word	537509948
 10274 018c 56555555 		.word	1431655766
 10275 0190 00000000 		.word	clkn
 10276 0194 00000000 		.word	requested_mode
 10277 0198 00000000 		.word	mode
 10278              		.cfi_endproc
 10279              	.LFE44:
 10281              		.section	.rodata
 10282 08f2 0000     		.align	2
 10283              	.LC3:
 10284 08f4 54       		.byte	84
 10285 08f5 75       		.byte	117
 10286 08f6 C5       		.byte	-59
 10287 08f7 8C       		.byte	-116
 10288 08f8 C7       		.byte	-57
 10289 08f9 33       		.byte	51
 10290 08fa 45       		.byte	69
ARM GAS  /tmp/cczWrdyg.s 			page 227


 10291 08fb E7       		.byte	-25
 10292 08fc 2A       		.byte	42
 10293              		.section	.text.cc2400_txtest,"ax",%progbits
 10294              		.align	2
 10295              		.global	cc2400_txtest
 10296              		.thumb
 10297              		.thumb_func
 10299              	cc2400_txtest:
 10300              	.LFB45:
2633:bluetooth_rxtx.c **** 
2634:bluetooth_rxtx.c **** 
2635:bluetooth_rxtx.c **** void cc2400_txtest(volatile u16 *chan_ptr)
2636:bluetooth_rxtx.c **** {
 10301              		.loc 1 2636 0
 10302              		.cfi_startproc
 10303              		@ args = 0, pretend = 0, frame = 32
 10304              		@ frame_needed = 1, uses_anonymous_args = 0
 10305 0000 80B5     		push	{r7, lr}
 10306              		.cfi_def_cfa_offset 8
 10307              		.cfi_offset 7, -8
 10308              		.cfi_offset 14, -4
 10309 0002 88B0     		sub	sp, sp, #32
 10310              		.cfi_def_cfa_offset 40
 10311 0004 00AF     		add	r7, sp, #0
 10312              		.cfi_def_cfa_register 7
 10313 0006 7860     		str	r0, [r7, #4]
2637:bluetooth_rxtx.c **** #ifdef TX_ENABLE
2638:bluetooth_rxtx.c ****         u8 id_pkt1[9] = {0x54, 0x75, 0xc5, 0x8c, 0xc7, 0x33, 0x45, 0xe7, 0x2a};
 10314              		.loc 1 2638 0
 10315 0008 524A     		ldr	r2, .L547
 10316 000a 07F10C03 		add	r3, r7, #12
 10317 000e 1068     		ldr	r0, [r2]	@ unaligned
 10318 0010 5168     		ldr	r1, [r2, #4]	@ unaligned
 10319 0012 03C3     		stmia	r3!, {r0, r1}
 10320 0014 127A     		ldrb	r2, [r2, #8]
 10321 0016 1A70     		strb	r2, [r3]
2639:bluetooth_rxtx.c **** 
2640:bluetooth_rxtx.c ****         cc2400_set(MANAND, 0x7fff);
 10322              		.loc 1 2640 0
 10323 0018 0D20     		movs	r0, #13
 10324 001a 47F6FF71 		movw	r1, #32767
 10325 001e FFF7FEFF 		bl	cc2400_set
2641:bluetooth_rxtx.c **** 
2642:bluetooth_rxtx.c ****         cc2400_set(LMTST,   0x2b22); // receiver
 10326              		.loc 1 2642 0
 10327 0022 1220     		movs	r0, #18
 10328 0024 42F62231 		movw	r1, #11042
 10329 0028 FFF7FEFF 		bl	cc2400_set
2643:bluetooth_rxtx.c ****         cc2400_set(MDMTST0, 0x134b); // wo PRNG
 10330              		.loc 1 2643 0
 10331 002c 1420     		movs	r0, #20
 10332 002e 41F24B31 		movw	r1, #4939
 10333 0032 FFF7FEFF 		bl	cc2400_set
2644:bluetooth_rxtx.c ****         cc2400_set(GRMDM,   0x0f60); // 0 preamble, 8 bit cync word
 10334              		.loc 1 2644 0
 10335 0036 2020     		movs	r0, #32
 10336 0038 4FF47661 		mov	r1, #3936
ARM GAS  /tmp/cczWrdyg.s 			page 228


 10337 003c FFF7FEFF 		bl	cc2400_set
2645:bluetooth_rxtx.c ****         cc2400_set(FSDIV,   *chan_ptr);
 10338              		.loc 1 2645 0
 10339 0040 7B68     		ldr	r3, [r7, #4]
 10340 0042 1B88     		ldrh	r3, [r3]	@ movhi
 10341 0044 9BB2     		uxth	r3, r3
 10342 0046 0220     		movs	r0, #2
 10343 0048 1946     		mov	r1, r3
 10344 004a FFF7FEFF 		bl	cc2400_set
2646:bluetooth_rxtx.c ****         cc2400_set(MDMCTRL, 0x0040); // 250 kHz 
 10345              		.loc 1 2646 0
 10346 004e 0320     		movs	r0, #3
 10347 0050 4021     		movs	r1, #64
 10348 0052 FFF7FEFF 		bl	cc2400_set
2647:bluetooth_rxtx.c ****         cc2400_set(INT, 0x000b);
 10349              		.loc 1 2647 0
 10350 0056 2320     		movs	r0, #35
 10351 0058 0B21     		movs	r1, #11
 10352 005a FFF7FEFF 		bl	cc2400_set
2648:bluetooth_rxtx.c **** //      cc2400_set(SYNCH,   0xf9ae);
2649:bluetooth_rxtx.c **** //      cc2400_set(SYNCL,   0x1584);
2650:bluetooth_rxtx.c **** 
2651:bluetooth_rxtx.c ****         u16 gio_save;
2652:bluetooth_rxtx.c ****         gio_save = cc2400_get(IOCFG);
 10353              		.loc 1 2652 0
 10354 005e 0820     		movs	r0, #8
 10355 0060 FFF7FEFF 		bl	cc2400_get
 10356 0064 0346     		mov	r3, r0
 10357 0066 FB82     		strh	r3, [r7, #22]	@ movhi
2653:bluetooth_rxtx.c ****         cc2400_set(IOCFG, (GIO_FIFO_FULL << 9) | (gio_save & 0x1ff));
 10358              		.loc 1 2653 0
 10359 0068 FB8A     		ldrh	r3, [r7, #22]
 10360 006a C3F30803 		ubfx	r3, r3, #0, #9
 10361 006e 9BB2     		uxth	r3, r3
 10362 0070 43F49C43 		orr	r3, r3, #19968
 10363 0074 9BB2     		uxth	r3, r3
 10364 0076 9BB2     		uxth	r3, r3
 10365 0078 0820     		movs	r0, #8
 10366 007a 1946     		mov	r1, r3
 10367 007c FFF7FEFF 		bl	cc2400_set
2654:bluetooth_rxtx.c **** //      u8 pa = 7;
2655:bluetooth_rxtx.c **** //      cc2400_set(FREND, 0b1011);
2656:bluetooth_rxtx.c **** 
2657:bluetooth_rxtx.c **** //      cc2400_set(GRDEC, 49);
2658:bluetooth_rxtx.c **** 
2659:bluetooth_rxtx.c ****         while (!(cc2400_status() & XOSC16M_STABLE));
 10368              		.loc 1 2659 0
 10369 0080 00BF     		nop
 10370              	.L538:
 10371              		.loc 1 2659 0 is_stmt 0 discriminator 1
 10372 0082 FFF7FEFF 		bl	cc2400_status
 10373 0086 0346     		mov	r3, r0
 10374 0088 03F04003 		and	r3, r3, #64
 10375 008c 002B     		cmp	r3, #0
 10376 008e F8D0     		beq	.L538
2660:bluetooth_rxtx.c ****         cc2400_strobe(SFSON);
 10377              		.loc 1 2660 0 is_stmt 1
ARM GAS  /tmp/cczWrdyg.s 			page 229


 10378 0090 6120     		movs	r0, #97
 10379 0092 FFF7FEFF 		bl	cc2400_strobe
2661:bluetooth_rxtx.c ****         while (!(cc2400_status() & FS_LOCK));
 10380              		.loc 1 2661 0
 10381 0096 00BF     		nop
 10382              	.L539:
 10383              		.loc 1 2661 0 is_stmt 0 discriminator 1
 10384 0098 FFF7FEFF 		bl	cc2400_status
 10385 009c 0346     		mov	r3, r0
 10386 009e 03F00403 		and	r3, r3, #4
 10387 00a2 002B     		cmp	r3, #0
 10388 00a4 F8D0     		beq	.L539
2662:bluetooth_rxtx.c ****         TXLED_SET;
 10389              		.loc 1 2662 0 is_stmt 1
 10390 00a6 2C4B     		ldr	r3, .L547+4
 10391 00a8 4FF48072 		mov	r2, #256
 10392 00ac 1A60     		str	r2, [r3]
2663:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2664:bluetooth_rxtx.c ****         PAEN_SET;
 10393              		.loc 1 2664 0
 10394 00ae 2B4B     		ldr	r3, .L547+8
 10395 00b0 8022     		movs	r2, #128
 10396 00b2 1A60     		str	r2, [r3]
 10397              	.LBB21:
2665:bluetooth_rxtx.c **** #endif
2666:bluetooth_rxtx.c ****                 for (int j = 0; j < 1000; j++)
 10398              		.loc 1 2666 0
 10399 00b4 0023     		movs	r3, #0
 10400 00b6 FB61     		str	r3, [r7, #28]
 10401 00b8 25E0     		b	.L540
 10402              	.L544:
 10403              	.LBB22:
2667:bluetooth_rxtx.c ****                 {
2668:bluetooth_rxtx.c ****                         while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 10404              		.loc 1 2668 0
 10405 00ba 00BF     		nop
 10406              	.L541:
 10407              		.loc 1 2668 0 is_stmt 0 discriminator 1
 10408 00bc 0E20     		movs	r0, #14
 10409 00be FFF7FEFF 		bl	cc2400_get
 10410 00c2 0346     		mov	r3, r0
 10411 00c4 03F01F03 		and	r3, r3, #31
 10412 00c8 0F2B     		cmp	r3, #15
 10413 00ca F7D1     		bne	.L541
2669:bluetooth_rxtx.c **** 
2670:bluetooth_rxtx.c **** //                      for (int i = 0; i < 9; i++)
2671:bluetooth_rxtx.c ****                         {
2672:bluetooth_rxtx.c ****                                 while (GIO6);
 10414              		.loc 1 2672 0 is_stmt 1
 10415 00cc 00BF     		nop
 10416              	.L542:
 10417              		.loc 1 2672 0 is_stmt 0 discriminator 1
 10418 00ce 244B     		ldr	r3, .L547+12
 10419 00d0 1B68     		ldr	r3, [r3]
 10420 00d2 03F00403 		and	r3, r3, #4
 10421 00d6 002B     		cmp	r3, #0
 10422 00d8 F9D1     		bne	.L542
ARM GAS  /tmp/cczWrdyg.s 			page 230


2673:bluetooth_rxtx.c **** //                              cc2400_set8(FIFOREG, id_pkt1[i]);
2674:bluetooth_rxtx.c ****                                 cc2400_spi_buf(FIFOREG, 9, id_pkt1);
 10423              		.loc 1 2674 0 is_stmt 1
 10424 00da 07F10C03 		add	r3, r7, #12
 10425 00de 7020     		movs	r0, #112
 10426 00e0 0921     		movs	r1, #9
 10427 00e2 1A46     		mov	r2, r3
 10428 00e4 FFF7FEFF 		bl	cc2400_spi_buf
2675:bluetooth_rxtx.c ****                         }
2676:bluetooth_rxtx.c **** //			wait_us (100000);
2677:bluetooth_rxtx.c **** 			
2678:bluetooth_rxtx.c ****                         int k = 20000; while (--k);
 10429              		.loc 1 2678 0
 10430 00e8 44F62063 		movw	r3, #20000
 10431 00ec BB61     		str	r3, [r7, #24]
 10432              	.L543:
 10433              		.loc 1 2678 0 is_stmt 0 discriminator 2
 10434 00ee BB69     		ldr	r3, [r7, #24]
 10435 00f0 013B     		subs	r3, r3, #1
 10436 00f2 BB61     		str	r3, [r7, #24]
 10437 00f4 BB69     		ldr	r3, [r7, #24]
 10438 00f6 002B     		cmp	r3, #0
 10439 00f8 F9D1     		bne	.L543
2679:bluetooth_rxtx.c ****                         cc2400_strobe (STX);
 10440              		.loc 1 2679 0 is_stmt 1 discriminator 2
 10441 00fa 6320     		movs	r0, #99
 10442 00fc FFF7FEFF 		bl	cc2400_strobe
 10443              	.LBE22:
2666:bluetooth_rxtx.c ****                 {
 10444              		.loc 1 2666 0 discriminator 2
 10445 0100 FB69     		ldr	r3, [r7, #28]
 10446 0102 0133     		adds	r3, r3, #1
 10447 0104 FB61     		str	r3, [r7, #28]
 10448              	.L540:
2666:bluetooth_rxtx.c ****                 {
 10449              		.loc 1 2666 0 is_stmt 0 discriminator 1
 10450 0106 FB69     		ldr	r3, [r7, #28]
 10451 0108 B3F57A7F 		cmp	r3, #1000
 10452 010c D5DB     		blt	.L544
 10453              	.LBE21:
2680:bluetooth_rxtx.c **** 
2681:bluetooth_rxtx.c ****                 }
2682:bluetooth_rxtx.c ****         while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 10454              		.loc 1 2682 0 is_stmt 1
 10455 010e 00BF     		nop
 10456              	.L545:
 10457              		.loc 1 2682 0 is_stmt 0 discriminator 1
 10458 0110 0E20     		movs	r0, #14
 10459 0112 FFF7FEFF 		bl	cc2400_get
 10460 0116 0346     		mov	r3, r0
 10461 0118 03F01F03 		and	r3, r3, #31
 10462 011c 0F2B     		cmp	r3, #15
 10463 011e F7D1     		bne	.L545
2683:bluetooth_rxtx.c ****         TXLED_CLR;
 10464              		.loc 1 2683 0 is_stmt 1
 10465 0120 104B     		ldr	r3, .L547+16
 10466 0122 4FF48072 		mov	r2, #256
ARM GAS  /tmp/cczWrdyg.s 			page 231


 10467 0126 1A60     		str	r2, [r3]
2684:bluetooth_rxtx.c ****         cc2400_strobe(SRFOFF);
 10468              		.loc 1 2684 0
 10469 0128 6420     		movs	r0, #100
 10470 012a FFF7FEFF 		bl	cc2400_strobe
2685:bluetooth_rxtx.c ****         while ((cc2400_status () & FS_LOCK));
 10471              		.loc 1 2685 0
 10472 012e 00BF     		nop
 10473              	.L546:
 10474              		.loc 1 2685 0 is_stmt 0 discriminator 1
 10475 0130 FFF7FEFF 		bl	cc2400_status
 10476 0134 0346     		mov	r3, r0
 10477 0136 03F00403 		and	r3, r3, #4
 10478 013a 002B     		cmp	r3, #0
 10479 013c F8D1     		bne	.L546
2686:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2687:bluetooth_rxtx.c ****         PAEN_CLR;
 10480              		.loc 1 2687 0 is_stmt 1
 10481 013e 0A4B     		ldr	r3, .L547+20
 10482 0140 8022     		movs	r2, #128
 10483 0142 1A60     		str	r2, [r3]
2688:bluetooth_rxtx.c **** #endif
2689:bluetooth_rxtx.c ****         cc2400_set(IOCFG, gio_save);
 10484              		.loc 1 2689 0
 10485 0144 FB8A     		ldrh	r3, [r7, #22]
 10486 0146 0820     		movs	r0, #8
 10487 0148 1946     		mov	r1, r3
 10488 014a FFF7FEFF 		bl	cc2400_set
2690:bluetooth_rxtx.c **** 
2691:bluetooth_rxtx.c **** #endif
2692:bluetooth_rxtx.c **** }
 10489              		.loc 1 2692 0
 10490 014e 2037     		adds	r7, r7, #32
 10491              		.cfi_def_cfa_offset 8
 10492 0150 BD46     		mov	sp, r7
 10493              		.cfi_def_cfa_register 13
 10494              		@ sp needed
 10495 0152 80BD     		pop	{r7, pc}
 10496              	.L548:
 10497              		.align	2
 10498              	.L547:
 10499 0154 F4080000 		.word	.LC3
 10500 0158 38C00920 		.word	537509944
 10501 015c 58C00920 		.word	537509976
 10502 0160 54C00920 		.word	537509972
 10503 0164 3CC00920 		.word	537509948
 10504 0168 5CC00920 		.word	537509980
 10505              		.cfi_endproc
 10506              	.LFE45:
 10508              		.section	.text.cc2400_repeater,"ax",%progbits
 10509              		.align	2
 10510              		.global	cc2400_repeater
 10511              		.thumb
 10512              		.thumb_func
 10514              	cc2400_repeater:
 10515              	.LFB46:
2693:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cczWrdyg.s 			page 232


2694:bluetooth_rxtx.c **** void cc2400_repeater(volatile u16 *chan_ptr)
2695:bluetooth_rxtx.c **** {
 10516              		.loc 1 2695 0
 10517              		.cfi_startproc
 10518              		@ args = 0, pretend = 0, frame = 24
 10519              		@ frame_needed = 1, uses_anonymous_args = 0
 10520 0000 80B5     		push	{r7, lr}
 10521              		.cfi_def_cfa_offset 8
 10522              		.cfi_offset 7, -8
 10523              		.cfi_offset 14, -4
 10524 0002 86B0     		sub	sp, sp, #24
 10525              		.cfi_def_cfa_offset 32
 10526 0004 00AF     		add	r7, sp, #0
 10527              		.cfi_def_cfa_register 7
 10528 0006 7860     		str	r0, [r7, #4]
2696:bluetooth_rxtx.c **** #ifdef TX_ENABLE
2697:bluetooth_rxtx.c **** 
2698:bluetooth_rxtx.c **** 	u8 id_pkt1[9] = {0x54, 0x75, 0xc5, 0x8c, 0xc7, 0x33, 0x45, 0xe7, 0x2a};
 10529              		.loc 1 2698 0
 10530 0008 384A     		ldr	r2, .L555
 10531 000a 07F10803 		add	r3, r7, #8
 10532 000e 1068     		ldr	r0, [r2]	@ unaligned
 10533 0010 5168     		ldr	r1, [r2, #4]	@ unaligned
 10534 0012 03C3     		stmia	r3!, {r0, r1}
 10535 0014 127A     		ldrb	r2, [r2, #8]
 10536 0016 1A70     		strb	r2, [r3]
2699:bluetooth_rxtx.c **** 
2700:bluetooth_rxtx.c **** 	cc2400_set(MANAND, 0x7fff);
 10537              		.loc 1 2700 0
 10538 0018 0D20     		movs	r0, #13
 10539 001a 47F6FF71 		movw	r1, #32767
 10540 001e FFF7FEFF 		bl	cc2400_set
2701:bluetooth_rxtx.c **** 	cc2400_set(LMTST, 0x2b22);
 10541              		.loc 1 2701 0
 10542 0022 1220     		movs	r0, #18
 10543 0024 42F62231 		movw	r1, #11042
 10544 0028 FFF7FEFF 		bl	cc2400_set
2702:bluetooth_rxtx.c **** 	cc2400_set(MDMTST0, 0x134b); // wo PRNG
 10545              		.loc 1 2702 0
 10546 002c 1420     		movs	r0, #20
 10547 002e 41F24B31 		movw	r1, #4939
 10548 0032 FFF7FEFF 		bl	cc2400_set
2703:bluetooth_rxtx.c **** 	cc2400_set(GRMDM,   0x0f01); // 0 preamble, 8 bit cync word
 10549              		.loc 1 2703 0
 10550 0036 2020     		movs	r0, #32
 10551 0038 40F60171 		movw	r1, #3841
 10552 003c FFF7FEFF 		bl	cc2400_set
2704:bluetooth_rxtx.c **** 	cc2400_set(MDMCTRL, 0x0040); // 250 kHz 
 10553              		.loc 1 2704 0
 10554 0040 0320     		movs	r0, #3
 10555 0042 4021     		movs	r1, #64
 10556 0044 FFF7FEFF 		bl	cc2400_set
2705:bluetooth_rxtx.c **** //	cc2400_set(MDMCTRL, 0x0029); // 250 kHz 
2706:bluetooth_rxtx.c **** 	cc2400_set(INT, 0x000b);
 10557              		.loc 1 2706 0
 10558 0048 2320     		movs	r0, #35
 10559 004a 0B21     		movs	r1, #11
ARM GAS  /tmp/cczWrdyg.s 			page 233


 10560 004c FFF7FEFF 		bl	cc2400_set
2707:bluetooth_rxtx.c **** 	
2708:bluetooth_rxtx.c **** 	u8 pa = 7;
 10561              		.loc 1 2708 0
 10562 0050 0723     		movs	r3, #7
 10563 0052 FB74     		strb	r3, [r7, #19]
2709:bluetooth_rxtx.c **** 	cc2400_set(FREND, pa);
 10564              		.loc 1 2709 0
 10565 0054 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 10566 0056 9BB2     		uxth	r3, r3
 10567 0058 0520     		movs	r0, #5
 10568 005a 1946     		mov	r1, r3
 10569 005c FFF7FEFF 		bl	cc2400_set
2710:bluetooth_rxtx.c **** 
2711:bluetooth_rxtx.c **** 	TXLED_SET;
 10570              		.loc 1 2711 0
 10571 0060 234B     		ldr	r3, .L555+4
 10572 0062 4FF48072 		mov	r2, #256
 10573 0066 1A60     		str	r2, [r3]
2712:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2713:bluetooth_rxtx.c **** 	PAEN_SET;
 10574              		.loc 1 2713 0
 10575 0068 224B     		ldr	r3, .L555+8
 10576 006a 8022     		movs	r2, #128
 10577 006c 1A60     		str	r2, [r3]
2714:bluetooth_rxtx.c **** #endif
2715:bluetooth_rxtx.c **** 	cc2400_set (FSDIV, 2427);	
 10578              		.loc 1 2715 0
 10579 006e 0220     		movs	r0, #2
 10580 0070 40F67B11 		movw	r1, #2427
 10581 0074 FFF7FEFF 		bl	cc2400_set
2716:bluetooth_rxtx.c **** 	while (!(cc2400_status() & XOSC16M_STABLE));
 10582              		.loc 1 2716 0
 10583 0078 00BF     		nop
 10584              	.L550:
 10585              		.loc 1 2716 0 is_stmt 0 discriminator 1
 10586 007a FFF7FEFF 		bl	cc2400_status
 10587 007e 0346     		mov	r3, r0
 10588 0080 03F04003 		and	r3, r3, #64
 10589 0084 002B     		cmp	r3, #0
 10590 0086 F8D0     		beq	.L550
2717:bluetooth_rxtx.c **** 	cc2400_strobe(SFSON);
 10591              		.loc 1 2717 0 is_stmt 1
 10592 0088 6120     		movs	r0, #97
 10593 008a FFF7FEFF 		bl	cc2400_strobe
2718:bluetooth_rxtx.c **** 	while (!(cc2400_status() & FS_LOCK));
 10594              		.loc 1 2718 0
 10595 008e 00BF     		nop
 10596              	.L551:
 10597              		.loc 1 2718 0 is_stmt 0 discriminator 1
 10598 0090 FFF7FEFF 		bl	cc2400_status
 10599 0094 0346     		mov	r3, r0
 10600 0096 03F00403 		and	r3, r3, #4
 10601 009a 002B     		cmp	r3, #0
 10602 009c F8D0     		beq	.L551
 10603              	.LBB23:
2719:bluetooth_rxtx.c **** 	for (int i = 0; i < 1000; i++)
ARM GAS  /tmp/cczWrdyg.s 			page 234


 10604              		.loc 1 2719 0 is_stmt 1
 10605 009e 0023     		movs	r3, #0
 10606 00a0 7B61     		str	r3, [r7, #20]
 10607 00a2 15E0     		b	.L552
 10608              	.L554:
2720:bluetooth_rxtx.c **** 	{	
2721:bluetooth_rxtx.c **** 			
2722:bluetooth_rxtx.c **** 		cc2400_spi_buf(FIFOREG, 9, id_pkt1);				
 10609              		.loc 1 2722 0
 10610 00a4 07F10803 		add	r3, r7, #8
 10611 00a8 7020     		movs	r0, #112
 10612 00aa 0921     		movs	r1, #9
 10613 00ac 1A46     		mov	r2, r3
 10614 00ae FFF7FEFF 		bl	cc2400_spi_buf
2723:bluetooth_rxtx.c **** 	
2724:bluetooth_rxtx.c **** 		cc2400_strobe (STX);
 10615              		.loc 1 2724 0
 10616 00b2 6320     		movs	r0, #99
 10617 00b4 FFF7FEFF 		bl	cc2400_strobe
2725:bluetooth_rxtx.c **** 		while ((cc2400_get(FSMSTATE) & 0x1f) != STATE_STROBE_FS_ON);
 10618              		.loc 1 2725 0
 10619 00b8 00BF     		nop
 10620              	.L553:
 10621              		.loc 1 2725 0 is_stmt 0 discriminator 1
 10622 00ba 0E20     		movs	r0, #14
 10623 00bc FFF7FEFF 		bl	cc2400_get
 10624 00c0 0346     		mov	r3, r0
 10625 00c2 03F01F03 		and	r3, r3, #31
 10626 00c6 0F2B     		cmp	r3, #15
 10627 00c8 F7D1     		bne	.L553
2719:bluetooth_rxtx.c **** 	{	
 10628              		.loc 1 2719 0 is_stmt 1 discriminator 2
 10629 00ca 7B69     		ldr	r3, [r7, #20]
 10630 00cc 0133     		adds	r3, r3, #1
 10631 00ce 7B61     		str	r3, [r7, #20]
 10632              	.L552:
2719:bluetooth_rxtx.c **** 	{	
 10633              		.loc 1 2719 0 is_stmt 0 discriminator 1
 10634 00d0 7B69     		ldr	r3, [r7, #20]
 10635 00d2 B3F57A7F 		cmp	r3, #1000
 10636 00d6 E5DB     		blt	.L554
 10637              	.LBE23:
2726:bluetooth_rxtx.c **** 	
2727:bluetooth_rxtx.c **** 	}
2728:bluetooth_rxtx.c **** 	TXLED_CLR;
 10638              		.loc 1 2728 0 is_stmt 1
 10639 00d8 074B     		ldr	r3, .L555+12
 10640 00da 4FF48072 		mov	r2, #256
 10641 00de 1A60     		str	r2, [r3]
2729:bluetooth_rxtx.c **** #ifdef UBERTOOTH_ONE
2730:bluetooth_rxtx.c **** 	PAEN_CLR;
 10642              		.loc 1 2730 0
 10643 00e0 064B     		ldr	r3, .L555+16
 10644 00e2 8022     		movs	r2, #128
 10645 00e4 1A60     		str	r2, [r3]
2731:bluetooth_rxtx.c **** #endif
2732:bluetooth_rxtx.c **** 
ARM GAS  /tmp/cczWrdyg.s 			page 235


2733:bluetooth_rxtx.c **** #endif
2734:bluetooth_rxtx.c **** }
 10646              		.loc 1 2734 0
 10647 00e6 1837     		adds	r7, r7, #24
 10648              		.cfi_def_cfa_offset 8
 10649 00e8 BD46     		mov	sp, r7
 10650              		.cfi_def_cfa_register 13
 10651              		@ sp needed
 10652 00ea 80BD     		pop	{r7, pc}
 10653              	.L556:
 10654              		.align	2
 10655              	.L555:
 10656 00ec F4080000 		.word	.LC3
 10657 00f0 38C00920 		.word	537509944
 10658 00f4 58C00920 		.word	537509976
 10659 00f8 3CC00920 		.word	537509948
 10660 00fc 5CC00920 		.word	537509980
 10661              		.cfi_endproc
 10662              	.LFE46:
 10664              		.section	.text.main,"ax",%progbits
 10665              		.align	2
 10666              		.global	main
 10667              		.thumb
 10668              		.thumb_func
 10670              	main:
 10671              	.LFB47:
2735:bluetooth_rxtx.c **** 
2736:bluetooth_rxtx.c **** 
2737:bluetooth_rxtx.c **** 
2738:bluetooth_rxtx.c **** int main()
2739:bluetooth_rxtx.c **** {
 10672              		.loc 1 2739 0
 10673              		.cfi_startproc
 10674              		@ args = 0, pretend = 0, frame = 0
 10675              		@ frame_needed = 1, uses_anonymous_args = 0
 10676 0000 80B5     		push	{r7, lr}
 10677              		.cfi_def_cfa_offset 8
 10678              		.cfi_offset 7, -8
 10679              		.cfi_offset 14, -4
 10680 0002 00AF     		add	r7, sp, #0
 10681              		.cfi_def_cfa_register 7
2740:bluetooth_rxtx.c **** 	ubertooth_init();
 10682              		.loc 1 2740 0
 10683 0004 FFF7FEFF 		bl	ubertooth_init
2741:bluetooth_rxtx.c **** 	clkn_init();
 10684              		.loc 1 2741 0
 10685 0008 FFF7FEFF 		bl	clkn_init
2742:bluetooth_rxtx.c **** 	ubertooth_usb_init(vendor_request_handler);
 10686              		.loc 1 2742 0
 10687 000c 4548     		ldr	r0, .L577
 10688 000e FFF7FEFF 		bl	ubertooth_usb_init
 10689              	.L575:
2743:bluetooth_rxtx.c **** 
2744:bluetooth_rxtx.c **** 	while (1) {
2745:bluetooth_rxtx.c **** 		handle_usb(clkn);
 10690              		.loc 1 2745 0
 10691 0012 454B     		ldr	r3, .L577+4
ARM GAS  /tmp/cczWrdyg.s 			page 236


 10692 0014 1B68     		ldr	r3, [r3]
 10693 0016 1846     		mov	r0, r3
 10694 0018 FFF7FEFF 		bl	handle_usb
2746:bluetooth_rxtx.c **** 		if(requested_mode != mode)
 10695              		.loc 1 2746 0
 10696 001c 434B     		ldr	r3, .L577+8
 10697 001e 1B78     		ldrb	r3, [r3]
 10698 0020 DAB2     		uxtb	r2, r3
 10699 0022 434B     		ldr	r3, .L577+12
 10700 0024 1B78     		ldrb	r3, [r3]
 10701 0026 DBB2     		uxtb	r3, r3
 10702 0028 9A42     		cmp	r2, r3
 10703 002a 79D0     		beq	.L558
2747:bluetooth_rxtx.c **** 			switch (requested_mode) {
 10704              		.loc 1 2747 0
 10705 002c 3F4B     		ldr	r3, .L577+8
 10706 002e 1B78     		ldrb	r3, [r3]
 10707 0030 DBB2     		uxtb	r3, r3
 10708 0032 0D2B     		cmp	r3, #13
 10709 0034 73D8     		bhi	.L576
 10710 0036 01A2     		adr	r2, .L561
 10711 0038 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 10712              		.p2align 2
 10713              	.L561:
 10714 003c 19010000 		.word	.L560+1
 10715 0040 81000000 		.word	.L562+1
 10716 0044 1F010000 		.word	.L576+1
 10717 0048 AB000000 		.word	.L563+1
 10718 004c F9000000 		.word	.L564+1
 10719 0050 BF000000 		.word	.L565+1
 10720 0054 E5000000 		.word	.L566+1
 10721 0058 FF000000 		.word	.L567+1
 10722 005c 8D000000 		.word	.L568+1
 10723 0060 99000000 		.word	.L569+1
 10724 0064 9F000000 		.word	.L570+1
 10725 0068 75000000 		.word	.L571+1
 10726 006c A5000000 		.word	.L572+1
 10727 0070 05010000 		.word	.L573+1
 10728              		.p2align 1
 10729              	.L571:
2748:bluetooth_rxtx.c **** 				 case MODE_RESET:
2749:bluetooth_rxtx.c **** 					/* Allow time for the USB command to return correctly */
2750:bluetooth_rxtx.c **** 					wait(1);
 10730              		.loc 1 2750 0
 10731 0074 0120     		movs	r0, #1
 10732 0076 FFF7FEFF 		bl	wait
2751:bluetooth_rxtx.c **** 					reset();
 10733              		.loc 1 2751 0
 10734 007a FFF7FEFF 		bl	reset
2752:bluetooth_rxtx.c **** 					break;
 10735              		.loc 1 2752 0
 10736 007e 4FE0     		b	.L558
 10737              	.L562:
2753:bluetooth_rxtx.c **** 				case MODE_RX_SYMBOLS:
2754:bluetooth_rxtx.c **** 					mode = MODE_RX_SYMBOLS;
 10738              		.loc 1 2754 0
 10739 0080 2B4B     		ldr	r3, .L577+12
ARM GAS  /tmp/cczWrdyg.s 			page 237


 10740 0082 0122     		movs	r2, #1
 10741 0084 1A70     		strb	r2, [r3]
2755:bluetooth_rxtx.c **** 					bt_stream_rx();
 10742              		.loc 1 2755 0
 10743 0086 FFF7FEFF 		bl	bt_stream_rx
2756:bluetooth_rxtx.c **** 					break;
 10744              		.loc 1 2756 0
 10745 008a 49E0     		b	.L558
 10746              	.L568:
2757:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW:
2758:bluetooth_rxtx.c **** 					mode = MODE_BT_FOLLOW;
 10747              		.loc 1 2758 0
 10748 008c 284B     		ldr	r3, .L577+12
 10749 008e 0822     		movs	r2, #8
 10750 0090 1A70     		strb	r2, [r3]
2759:bluetooth_rxtx.c **** 					bt_stream_rx();
 10751              		.loc 1 2759 0
 10752 0092 FFF7FEFF 		bl	bt_stream_rx
2760:bluetooth_rxtx.c **** 					break;
 10753              		.loc 1 2760 0
 10754 0096 43E0     		b	.L558
 10755              	.L569:
2761:bluetooth_rxtx.c **** 				case MODE_BT_FOLLOW_LE:
2762:bluetooth_rxtx.c **** 					bt_follow_le();
 10756              		.loc 1 2762 0
 10757 0098 FFF7FEFF 		bl	bt_follow_le
2763:bluetooth_rxtx.c **** 					break;
 10758              		.loc 1 2763 0
 10759 009c 40E0     		b	.L558
 10760              	.L570:
2764:bluetooth_rxtx.c **** 				case MODE_BT_PROMISC_LE:
2765:bluetooth_rxtx.c **** 					bt_promisc_le();
 10761              		.loc 1 2765 0
 10762 009e FFF7FEFF 		bl	bt_promisc_le
2766:bluetooth_rxtx.c **** 					break;
 10763              		.loc 1 2766 0
 10764 00a2 3DE0     		b	.L558
 10765              	.L572:
2767:bluetooth_rxtx.c **** 				case MODE_BT_SLAVE_LE:
2768:bluetooth_rxtx.c **** 					bt_slave_le();
 10766              		.loc 1 2768 0
 10767 00a4 FFF7FEFF 		bl	bt_slave_le
2769:bluetooth_rxtx.c **** 					break;
 10768              		.loc 1 2769 0
 10769 00a8 3AE0     		b	.L558
 10770              	.L563:
2770:bluetooth_rxtx.c **** 				case MODE_TX_TEST:
2771:bluetooth_rxtx.c **** 					mode = MODE_TX_TEST;
 10771              		.loc 1 2771 0
 10772 00aa 214B     		ldr	r3, .L577+12
 10773 00ac 0322     		movs	r2, #3
 10774 00ae 1A70     		strb	r2, [r3]
2772:bluetooth_rxtx.c **** 					cc2400_txtest(&channel);
 10775              		.loc 1 2772 0
 10776 00b0 2048     		ldr	r0, .L577+16
 10777 00b2 FFF7FEFF 		bl	cc2400_txtest
2773:bluetooth_rxtx.c **** 					requested_mode = MODE_IDLE;
ARM GAS  /tmp/cczWrdyg.s 			page 238


 10778              		.loc 1 2773 0
 10779 00b6 1D4B     		ldr	r3, .L577+8
 10780 00b8 0022     		movs	r2, #0
 10781 00ba 1A70     		strb	r2, [r3]
2774:bluetooth_rxtx.c **** 					break;
 10782              		.loc 1 2774 0
 10783 00bc 30E0     		b	.L558
 10784              	.L565:
2775:bluetooth_rxtx.c **** 				case MODE_RANGE_TEST:
2776:bluetooth_rxtx.c **** 					mode = MODE_RANGE_TEST;
 10785              		.loc 1 2776 0
 10786 00be 1C4B     		ldr	r3, .L577+12
 10787 00c0 0522     		movs	r2, #5
 10788 00c2 1A70     		strb	r2, [r3]
2777:bluetooth_rxtx.c **** 					cc2400_rangetest(&channel);
 10789              		.loc 1 2777 0
 10790 00c4 1B48     		ldr	r0, .L577+16
 10791 00c6 FFF7FEFF 		bl	cc2400_rangetest
2778:bluetooth_rxtx.c **** 					mode = MODE_IDLE;
 10792              		.loc 1 2778 0
 10793 00ca 194B     		ldr	r3, .L577+12
 10794 00cc 0022     		movs	r2, #0
 10795 00ce 1A70     		strb	r2, [r3]
2779:bluetooth_rxtx.c **** 					if (requested_mode == MODE_RANGE_TEST)
 10796              		.loc 1 2779 0
 10797 00d0 164B     		ldr	r3, .L577+8
 10798 00d2 1B78     		ldrb	r3, [r3]
 10799 00d4 DBB2     		uxtb	r3, r3
 10800 00d6 052B     		cmp	r3, #5
 10801 00d8 03D1     		bne	.L574
2780:bluetooth_rxtx.c **** 						requested_mode = MODE_IDLE;
 10802              		.loc 1 2780 0
 10803 00da 144B     		ldr	r3, .L577+8
 10804 00dc 0022     		movs	r2, #0
 10805 00de 1A70     		strb	r2, [r3]
2781:bluetooth_rxtx.c **** 					break;
 10806              		.loc 1 2781 0
 10807 00e0 1EE0     		b	.L558
 10808              	.L574:
 10809 00e2 1DE0     		b	.L558
 10810              	.L566:
2782:bluetooth_rxtx.c **** 				case MODE_REPEATER:
2783:bluetooth_rxtx.c **** 					mode = MODE_REPEATER;
 10811              		.loc 1 2783 0
 10812 00e4 124B     		ldr	r3, .L577+12
 10813 00e6 0622     		movs	r2, #6
 10814 00e8 1A70     		strb	r2, [r3]
2784:bluetooth_rxtx.c **** 					cc2400_repeater(&channel);
 10815              		.loc 1 2784 0
 10816 00ea 1248     		ldr	r0, .L577+16
 10817 00ec FFF7FEFF 		bl	cc2400_repeater
2785:bluetooth_rxtx.c **** 					requested_mode = MODE_IDLE;
 10818              		.loc 1 2785 0
 10819 00f0 0E4B     		ldr	r3, .L577+8
 10820 00f2 0022     		movs	r2, #0
 10821 00f4 1A70     		strb	r2, [r3]
2786:bluetooth_rxtx.c **** 					break;
ARM GAS  /tmp/cczWrdyg.s 			page 239


 10822              		.loc 1 2786 0
 10823 00f6 13E0     		b	.L558
 10824              	.L564:
2787:bluetooth_rxtx.c **** 				case MODE_SPECAN:
2788:bluetooth_rxtx.c **** 					specan();
 10825              		.loc 1 2788 0
 10826 00f8 FFF7FEFF 		bl	specan
2789:bluetooth_rxtx.c **** 					break;
 10827              		.loc 1 2789 0
 10828 00fc 10E0     		b	.L558
 10829              	.L567:
2790:bluetooth_rxtx.c **** 				case MODE_LED_SPECAN:
2791:bluetooth_rxtx.c **** 					led_specan();
 10830              		.loc 1 2791 0
 10831 00fe FFF7FEFF 		bl	led_specan
2792:bluetooth_rxtx.c **** 					break;
 10832              		.loc 1 2792 0
 10833 0102 0DE0     		b	.L558
 10834              	.L573:
2793:bluetooth_rxtx.c **** 				case MODE_EGO:
2794:bluetooth_rxtx.c **** 					mode = MODE_EGO;
 10835              		.loc 1 2794 0
 10836 0104 0A4B     		ldr	r3, .L577+12
 10837 0106 0D22     		movs	r2, #13
 10838 0108 1A70     		strb	r2, [r3]
2795:bluetooth_rxtx.c **** 					ego_main(ego_mode);
 10839              		.loc 1 2795 0
 10840 010a 0B4B     		ldr	r3, .L577+20
 10841 010c 1B78     		ldrb	r3, [r3]
 10842 010e DBB2     		uxtb	r3, r3
 10843 0110 1846     		mov	r0, r3
 10844 0112 FFF7FEFF 		bl	ego_main
2796:bluetooth_rxtx.c **** 					break;
 10845              		.loc 1 2796 0
 10846 0116 03E0     		b	.L558
 10847              	.L560:
2797:bluetooth_rxtx.c **** 				case MODE_IDLE:
2798:bluetooth_rxtx.c **** 					cc2400_idle();
 10848              		.loc 1 2798 0
 10849 0118 FFF7FEFF 		bl	cc2400_idle
2799:bluetooth_rxtx.c **** 					break;
 10850              		.loc 1 2799 0
 10851 011c 00E0     		b	.L558
 10852              	.L576:
2800:bluetooth_rxtx.c **** 				default:
2801:bluetooth_rxtx.c **** 					/* This is really an error state, but what can you do? */
2802:bluetooth_rxtx.c **** 					break;
 10853              		.loc 1 2802 0
 10854 011e 00BF     		nop
 10855              	.L558:
2803:bluetooth_rxtx.c **** 			}
2804:bluetooth_rxtx.c **** 	}
 10856              		.loc 1 2804 0 discriminator 1
 10857 0120 77E7     		b	.L575
 10858              	.L578:
 10859 0122 00BF     		.align	2
 10860              	.L577:
ARM GAS  /tmp/cczWrdyg.s 			page 240


 10861 0124 00000000 		.word	vendor_request_handler
 10862 0128 00000000 		.word	clkn
 10863 012c 00000000 		.word	requested_mode
 10864 0130 00000000 		.word	mode
 10865 0134 00000000 		.word	channel
 10866 0138 00000000 		.word	ego_mode
 10867              		.cfi_endproc
 10868              	.LFE47:
 10870              		.bss
 10871              		.align	2
 10872              	restart_jamming.4678:
 10873 00d4 00000000 		.space	4
 10874              		.align	2
 10875              	first_ts.4779:
 10876 00d8 00000000 		.space	4
 10877              		.align	2
 10878              	prev_clk.4785:
 10879 00dc 00000000 		.space	4
 10880              		.text
 10881              	.Letext0:
 10882              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.9.3/include/stdint-gcc.h"
 10883              		.file 3 "../../host/libubertooth/src/ubertooth_interface.h"
 10884              		.file 4 "../common/ubertooth.h"
 10885              		.file 5 "bluetooth_le.h"
 10886              		.file 6 "bluetooth.h"
 10887              		.file 7 "cc2400_rangetest.h"
ARM GAS  /tmp/cczWrdyg.s 			page 241


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bluetooth_rxtx.c
     /tmp/cczWrdyg.s:19     .data:0000000000000000 $d
     /tmp/cczWrdyg.s:22     .data:0000000000000000 iap_entry
                            *COM*:0000000000000010 target
                            *COM*:0000000000000008 syncword
                            *COM*:0000000000000001 afh_enabled
                            *COM*:000000000000000a afh_map
     /tmp/cczWrdyg.s:29     .rodata:0000000000000000 $d
     /tmp/cczWrdyg.s:32     .rodata:0000000000000000 advertising_channels
     /tmp/cczWrdyg.s:39     .rodata:0000000000000004 data_channels
     /tmp/cczWrdyg.s:80     .rodata:000000000000002c whitening
     /tmp/cczWrdyg.s:211    .rodata:00000000000000ac whitening_index
     /tmp/cczWrdyg.s:255    .rodata:00000000000000d4 hop_interval_lut
     /tmp/cczWrdyg.s:296    .rodata:00000000000000fc whitening_word
                            *COM*:0000000000000005 rr
     /tmp/cczWrdyg.s:782    .rodata:000000000000087c compile_info
                            *COM*:0000000000000004 clkn
     /tmp/cczWrdyg.s:790    .bss:0000000000000000 hop_mode
     /tmp/cczWrdyg.s:791    .bss:0000000000000000 $d
     /tmp/cczWrdyg.s:795    .bss:0000000000000001 do_hop
     /tmp/cczWrdyg.s:800    .bss:0000000000000002 cs_no_squelch
     /tmp/cczWrdyg.s:806    .data:0000000000000004 cs_threshold_req
     /tmp/cczWrdyg.s:811    .data:0000000000000005 cs_threshold_cur
                            *COM*:0000000000000001 cs_trigger
                            *COM*:0000000000000001 keepalive_trigger
                            *COM*:0000000000000004 cs_timestamp
     /tmp/cczWrdyg.s:821    .bss:0000000000000004 hop_direct_channel
     /tmp/cczWrdyg.s:827    .bss:0000000000000008 clock_trim
                            *COM*:0000000000000004 idle_buf_clkn_high
                            *COM*:0000000000000004 active_buf_clkn_high
                            *COM*:0000000000000004 idle_buf_clk100ns
                            *COM*:0000000000000004 active_buf_clk100ns
     /tmp/cczWrdyg.s:837    .bss:000000000000000c idle_buf_channel
     /tmp/cczWrdyg.s:843    .bss:000000000000000e active_buf_channel
     /tmp/cczWrdyg.s:849    .bss:0000000000000010 slave_mac_address
                            *COM*:0000000000000032 rxbuf1
                            *COM*:0000000000000032 rxbuf2
     /tmp/cczWrdyg.s:858    .data:0000000000000008 active_rxbuf
     /tmp/cczWrdyg.s:864    .data:000000000000000c idle_rxbuf
     /tmp/cczWrdyg.s:870    .data:0000000000000010 le
                            *COM*:0000000000000108 le_promisc
     /tmp/cczWrdyg.s:889    .bss:0000000000000018 le_jam_count
     /tmp/cczWrdyg.s:895    .bss:000000000000001c data_cb
     /tmp/cczWrdyg.s:901    .bss:0000000000000020 packet_cb
     /tmp/cczWrdyg.s:907    .bss:0000000000000024 rssi_iir
                            *COM*:0000000000000320 unpacked
     /tmp/cczWrdyg.s:913    .bss:00000000000000c2 mode
     /tmp/cczWrdyg.s:918    .bss:00000000000000c3 requested_mode
     /tmp/cczWrdyg.s:923    .bss:00000000000000c4 jam_mode
     /tmp/cczWrdyg.s:928    .bss:00000000000000c5 ego_mode
     /tmp/cczWrdyg.s:933    .bss:00000000000000c6 modulation
     /tmp/cczWrdyg.s:940    .data:0000000000000054 channel
     /tmp/cczWrdyg.s:947    .bss:00000000000000c8 requested_channel
     /tmp/cczWrdyg.s:953    .bss:00000000000000ca saved_request
     /tmp/cczWrdyg.s:960    .data:0000000000000056 low_freq
     /tmp/cczWrdyg.s:966    .data:0000000000000058 high_freq
ARM GAS  /tmp/cczWrdyg.s 			page 242


     /tmp/cczWrdyg.s:971    .data:000000000000005a rssi_threshold
                            *COM*:0000000000000010 rx_dma_lli1
                            *COM*:0000000000000010 rx_dma_lli2
                            *COM*:00000000000000b0 le_dma_lli
                            *COM*:0000000000000004 rx_tc
                            *COM*:0000000000000004 rx_err
     /tmp/cczWrdyg.s:982    .bss:00000000000000cc status
                            *COM*:0000000000000001 rssi_max
                            *COM*:0000000000000001 rssi_min
     /tmp/cczWrdyg.s:989    .bss:00000000000000cd rssi_count
     /tmp/cczWrdyg.s:995    .bss:00000000000000d0 rssi_sum
     /tmp/cczWrdyg.s:998    .text.rssi_reset:0000000000000000 $t
     /tmp/cczWrdyg.s:1002   .text.rssi_reset:0000000000000000 rssi_reset
     /tmp/cczWrdyg.s:1042   .text.rssi_reset:0000000000000024 $d
     /tmp/cczWrdyg.s:1050   .text.rssi_add:0000000000000000 $t
     /tmp/cczWrdyg.s:1054   .text.rssi_add:0000000000000000 rssi_add
     /tmp/cczWrdyg.s:1120   .text.rssi_add:000000000000005c $d
     /tmp/cczWrdyg.s:1128   .text.rssi_iir_update:0000000000000000 $t
     /tmp/cczWrdyg.s:1132   .text.rssi_iir_update:0000000000000000 rssi_iir_update
     /tmp/cczWrdyg.s:1226   .text.rssi_iir_update:0000000000000084 $d
     /tmp/cczWrdyg.s:1235   .text.cs_threshold_set:0000000000000000 $t
     /tmp/cczWrdyg.s:1239   .text.cs_threshold_set:0000000000000000 cs_threshold_set
     /tmp/cczWrdyg.s:1321   .text.cs_threshold_set:0000000000000084 $d
     /tmp/cczWrdyg.s:1327   .text.enqueue:0000000000000000 $t
     /tmp/cczWrdyg.s:1331   .text.enqueue:0000000000000000 enqueue
     /tmp/cczWrdyg.s:1590   .text.enqueue:0000000000000194 $d
     /tmp/cczWrdyg.s:1606   .text.enqueue_with_ts:0000000000000000 $t
     /tmp/cczWrdyg.s:1611   .text.enqueue_with_ts:0000000000000000 enqueue_with_ts
     /tmp/cczWrdyg.s:1792   .text.enqueue_with_ts:000000000000010c $d
     /tmp/cczWrdyg.s:1799   .text.cs_threshold_calc_and_set:0000000000000000 $t
     /tmp/cczWrdyg.s:1803   .text.cs_threshold_calc_and_set:0000000000000000 cs_threshold_calc_and_set
     /tmp/cczWrdyg.s:1878   .text.cs_threshold_calc_and_set:0000000000000064 $d
     /tmp/cczWrdyg.s:1886   .text.cs_trigger_enable:0000000000000000 $t
     /tmp/cczWrdyg.s:1890   .text.cs_trigger_enable:0000000000000000 cs_trigger_enable
     /tmp/cczWrdyg.s:1931   .text.cs_trigger_enable:000000000000002c $d
     /tmp/cczWrdyg.s:1939   .text.cs_trigger_disable:0000000000000000 $t
     /tmp/cczWrdyg.s:1943   .text.cs_trigger_disable:0000000000000000 cs_trigger_disable
     /tmp/cczWrdyg.s:1984   .text.cs_trigger_disable:000000000000002c $d
     /tmp/cczWrdyg.s:1996   .text.vendor_request_handler:0000000000000000 $t
     /tmp/cczWrdyg.s:2000   .text.vendor_request_handler:0000000000000000 vendor_request_handler
     /tmp/cczWrdyg.s:2037   .text.vendor_request_handler:0000000000000024 $d
     /tmp/cczWrdyg.s:2098   .text.vendor_request_handler:0000000000000118 $t
     /tmp/cczWrdyg.s:2498   .text.vendor_request_handler:00000000000003a8 $d
     /tmp/cczWrdyg.s:2508   .text.vendor_request_handler:00000000000003c8 $t
     /tmp/cczWrdyg.s:2892   .text.vendor_request_handler:0000000000000614 $d
     /tmp/cczWrdyg.s:2910   .text.vendor_request_handler:0000000000000654 $t
     /tmp/cczWrdyg.s:3300   .text.vendor_request_handler:00000000000008f4 $d
     /tmp/cczWrdyg.s:3312   .text.vendor_request_handler:000000000000091c $t
     /tmp/cczWrdyg.s:6102   .text.le_set_access_address:0000000000000000 le_set_access_address
     /tmp/cczWrdyg.s:3596   .text.vendor_request_handler:0000000000000ad4 $d
     /tmp/cczWrdyg.s:3606   .text.clkn_init:0000000000000000 $t
     /tmp/cczWrdyg.s:3610   .text.clkn_init:0000000000000000 clkn_init
     /tmp/cczWrdyg.s:3661   .text.clkn_init:0000000000000038 $d
     /tmp/cczWrdyg.s:3671   .text.TIMER0_IRQHandler:0000000000000000 $t
     /tmp/cczWrdyg.s:3676   .text.TIMER0_IRQHandler:0000000000000000 TIMER0_IRQHandler
     /tmp/cczWrdyg.s:3845   .text.TIMER0_IRQHandler:00000000000000fc $d
     /tmp/cczWrdyg.s:3857   .text.EINT3_IRQHandler:0000000000000000 $t
ARM GAS  /tmp/cczWrdyg.s 			page 243


     /tmp/cczWrdyg.s:3862   .text.EINT3_IRQHandler:0000000000000000 EINT3_IRQHandler
     /tmp/cczWrdyg.s:3904   .text.EINT3_IRQHandler:0000000000000034 $d
     /tmp/cczWrdyg.s:3913   .text.msleep:0000000000000000 $t
     /tmp/cczWrdyg.s:3917   .text.msleep:0000000000000000 msleep
     /tmp/cczWrdyg.s:3963   .text.msleep:0000000000000038 $d
     /tmp/cczWrdyg.s:3969   .text.dma_init:0000000000000000 $t
     /tmp/cczWrdyg.s:3973   .text.dma_init:0000000000000000 dma_init
     /tmp/cczWrdyg.s:4147   .text.dma_init:0000000000000104 $d
     /tmp/cczWrdyg.s:4182   .text.dma_init_le:0000000000000000 $t
     /tmp/cczWrdyg.s:4186   .text.dma_init_le:0000000000000000 dma_init_le
     /tmp/cczWrdyg.s:4391   .text.dma_init_le:0000000000000134 $d
     /tmp/cczWrdyg.s:4423   .text.bt_stream_dma_handler:0000000000000000 $t
     /tmp/cczWrdyg.s:4428   .text.bt_stream_dma_handler:0000000000000000 bt_stream_dma_handler
     /tmp/cczWrdyg.s:4531   .text.bt_stream_dma_handler:000000000000009c $d
     /tmp/cczWrdyg.s:4551   .text.DMA_IRQHandler:0000000000000000 $t
     /tmp/cczWrdyg.s:4556   .text.DMA_IRQHandler:0000000000000000 DMA_IRQHandler
     /tmp/cczWrdyg.s:4579   .text.DMA_IRQHandler:0000000000000018 $d
     /tmp/cczWrdyg.s:4591   .text.DMA_IRQHandler:0000000000000048 $t
     /tmp/cczWrdyg.s:4603   .text.DMA_IRQHandler:0000000000000050 $d
     /tmp/cczWrdyg.s:4608   .text.dio_ssp_start:0000000000000000 $t
     /tmp/cczWrdyg.s:4612   .text.dio_ssp_start:0000000000000000 dio_ssp_start
     /tmp/cczWrdyg.s:4665   .text.dio_ssp_start:0000000000000048 $d
     /tmp/cczWrdyg.s:4675   .text.dio_ssp_stop:0000000000000000 $t
     /tmp/cczWrdyg.s:4679   .text.dio_ssp_stop:0000000000000000 dio_ssp_stop
     /tmp/cczWrdyg.s:4777   .text.dio_ssp_stop:000000000000008c $d
     /tmp/cczWrdyg.s:4796   .text.cc2400_idle:0000000000000000 $t
     /tmp/cczWrdyg.s:4800   .text.cc2400_idle:0000000000000000 cc2400_idle
     /tmp/cczWrdyg.s:4853   .text.cc2400_idle:0000000000000044 $d
     /tmp/cczWrdyg.s:4860   .text.cc2400_rx:0000000000000000 $t
     /tmp/cczWrdyg.s:4864   .text.cc2400_rx:0000000000000000 cc2400_rx
     /tmp/cczWrdyg.s:4972   .text.cc2400_rx:00000000000000a8 $d
     /tmp/cczWrdyg.s:4978   .text.cc2400_rx_sync:0000000000000000 $t
     /tmp/cczWrdyg.s:4982   .text.cc2400_rx_sync:0000000000000000 cc2400_rx_sync
     /tmp/cczWrdyg.s:5117   .text.cc2400_rx_sync:00000000000000d8 $d
     /tmp/cczWrdyg.s:5124   .text.le_transmit:0000000000000000 $t
     /tmp/cczWrdyg.s:5129   .text.le_transmit:0000000000000000 le_transmit
     /tmp/cczWrdyg.s:5522   .text.le_transmit:00000000000002d4 $d
     /tmp/cczWrdyg.s:5535   .text.le_jam:0000000000000000 $t
     /tmp/cczWrdyg.s:5540   .text.le_jam:0000000000000000 le_jam
     /tmp/cczWrdyg.s:5623   .text.le_jam:000000000000008c $d
     /tmp/cczWrdyg.s:5629   .text.hop:0000000000000000 $t
     /tmp/cczWrdyg.s:5634   .text.hop:0000000000000000 hop
     /tmp/cczWrdyg.s:5790   .text.hop:00000000000000f4 $d
     /tmp/cczWrdyg.s:5801   .text.bt_stream_rx:0000000000000000 $t
     /tmp/cczWrdyg.s:5806   .text.bt_stream_rx:0000000000000000 bt_stream_rx
     /tmp/cczWrdyg.s:6082   .text.bt_stream_rx:00000000000001c0 $d
     /tmp/cczWrdyg.s:6098   .text.le_set_access_address:0000000000000000 $t
     /tmp/cczWrdyg.s:6146   .text.le_set_access_address:0000000000000030 $d
     /tmp/cczWrdyg.s:6151   .text.reset_le:0000000000000000 $t
     /tmp/cczWrdyg.s:6156   .text.reset_le:0000000000000000 reset_le
     /tmp/cczWrdyg.s:6252   .text.reset_le:0000000000000084 $d
     /tmp/cczWrdyg.s:6261   .text.reset_le_promisc:0000000000000000 $t
     /tmp/cczWrdyg.s:6266   .text.reset_le_promisc:0000000000000000 reset_le_promisc
     /tmp/cczWrdyg.s:6292   .text.reset_le_promisc:000000000000001c $d
     /tmp/cczWrdyg.s:6297   .text.bt_generic_le:0000000000000000 $t
     /tmp/cczWrdyg.s:6302   .text.bt_generic_le:0000000000000000 bt_generic_le
     /tmp/cczWrdyg.s:6728   .text.bt_generic_le:00000000000002a0 $d
ARM GAS  /tmp/cczWrdyg.s 			page 244


     /tmp/cczWrdyg.s:6754   .text.bt_le_sync:0000000000000000 $t
     /tmp/cczWrdyg.s:6759   .text.bt_le_sync:0000000000000000 bt_le_sync
     /tmp/cczWrdyg.s:7107   .text.bt_le_sync:0000000000000228 $d
     /tmp/cczWrdyg.s:7128   .text.bt_le_sync:0000000000000270 $t
     /tmp/cczWrdyg.s:7528   .text.bt_le_sync:0000000000000508 $d
     /tmp/cczWrdyg.s:10872  .bss:00000000000000d4 restart_jamming.4678
     /tmp/cczWrdyg.s:7553   .text.cb_follow_le:0000000000000000 $t
     /tmp/cczWrdyg.s:7558   .text.cb_follow_le:0000000000000000 cb_follow_le
     /tmp/cczWrdyg.s:7848   .text.cb_follow_le:00000000000001b8 $d
     /tmp/cczWrdyg.s:7861   .text.connection_follow_cb:0000000000000000 $t
     /tmp/cczWrdyg.s:7866   .text.connection_follow_cb:0000000000000000 connection_follow_cb
     /tmp/cczWrdyg.s:8244   .text.connection_follow_cb:0000000000000260 $d
     /tmp/cczWrdyg.s:8254   .text.bt_follow_le:0000000000000000 $t
     /tmp/cczWrdyg.s:8259   .text.bt_follow_le:0000000000000000 bt_follow_le
     /tmp/cczWrdyg.s:8289   .text.bt_follow_le:000000000000001c $d
     /tmp/cczWrdyg.s:8296   .text.le_promisc_state:0000000000000000 $t
     /tmp/cczWrdyg.s:8301   .text.le_promisc_state:0000000000000000 le_promisc_state
     /tmp/cczWrdyg.s:8394   .text.promisc_recover_hop_increment:0000000000000000 $t
     /tmp/cczWrdyg.s:8399   .text.promisc_recover_hop_increment:0000000000000000 promisc_recover_hop_increment
     /tmp/cczWrdyg.s:8608   .text.promisc_recover_hop_increment:0000000000000160 $d
     /tmp/cczWrdyg.s:10875  .bss:00000000000000d8 first_ts.4779
     /tmp/cczWrdyg.s:8627   .text.promisc_recover_hop_interval:0000000000000000 $t
     /tmp/cczWrdyg.s:8632   .text.promisc_recover_hop_interval:0000000000000000 promisc_recover_hop_interval
     /tmp/cczWrdyg.s:8767   .text.promisc_recover_hop_interval:00000000000000d8 $d
     /tmp/cczWrdyg.s:10878  .bss:00000000000000dc prev_clk.4785
     /tmp/cczWrdyg.s:8784   .text.promisc_follow_cb:0000000000000000 $t
     /tmp/cczWrdyg.s:8789   .text.promisc_follow_cb:0000000000000000 promisc_follow_cb
     /tmp/cczWrdyg.s:8904   .text.promisc_follow_cb:00000000000000ac $d
     /tmp/cczWrdyg.s:8912   .text.see_aa:0000000000000000 $t
     /tmp/cczWrdyg.s:8917   .text.see_aa:0000000000000000 see_aa
     /tmp/cczWrdyg.s:9038   .text.see_aa:00000000000000a4 $d
     /tmp/cczWrdyg.s:9050   .text.cb_le_promisc:0000000000000000 $t
     /tmp/cczWrdyg.s:9055   .text.cb_le_promisc:0000000000000000 cb_le_promisc
     /tmp/cczWrdyg.s:9507   .text.cb_le_promisc:00000000000002e0 $d
     /tmp/cczWrdyg.s:9523   .text.bt_promisc_le:0000000000000000 $t
     /tmp/cczWrdyg.s:9528   .text.bt_promisc_le:0000000000000000 bt_promisc_le
     /tmp/cczWrdyg.s:9610   .text.bt_promisc_le:000000000000006c $d
     /tmp/cczWrdyg.s:9638   .text.bt_slave_le:0000000000000000 $t
     /tmp/cczWrdyg.s:9643   .text.bt_slave_le:0000000000000000 bt_slave_le
     /tmp/cczWrdyg.s:9778   .text.bt_slave_le:00000000000000dc $d
     /tmp/cczWrdyg.s:9789   .text.specan:0000000000000000 $t
     /tmp/cczWrdyg.s:9794   .text.specan:0000000000000000 specan
     /tmp/cczWrdyg.s:10010  .text.specan:0000000000000178 $d
     /tmp/cczWrdyg.s:10028  .text.led_specan:0000000000000000 $t
     /tmp/cczWrdyg.s:10033  .text.led_specan:0000000000000000 led_specan
     /tmp/cczWrdyg.s:10269  .text.led_specan:0000000000000178 $d
     /tmp/cczWrdyg.s:10294  .text.cc2400_txtest:0000000000000000 $t
     /tmp/cczWrdyg.s:10299  .text.cc2400_txtest:0000000000000000 cc2400_txtest
     /tmp/cczWrdyg.s:10499  .text.cc2400_txtest:0000000000000154 $d
     /tmp/cczWrdyg.s:10509  .text.cc2400_repeater:0000000000000000 $t
     /tmp/cczWrdyg.s:10514  .text.cc2400_repeater:0000000000000000 cc2400_repeater
     /tmp/cczWrdyg.s:10656  .text.cc2400_repeater:00000000000000ec $d
     /tmp/cczWrdyg.s:10665  .text.main:0000000000000000 $t
     /tmp/cczWrdyg.s:10670  .text.main:0000000000000000 main
     /tmp/cczWrdyg.s:10714  .text.main:000000000000003c $d
     /tmp/cczWrdyg.s:10728  .text.main:0000000000000074 $t
     /tmp/cczWrdyg.s:10861  .text.main:0000000000000124 $d
ARM GAS  /tmp/cczWrdyg.s 			page 245


                     .debug_frame:0000000000000010 $d

UNDEFINED SYMBOLS
cc2400_set
usb_enqueue
cc2400_get
reset
bootloader_ctrl
strlen
memcpy
queue_init
dequeue
cc2400_strobe
cc2400_status
btle_channel_index
cc2400_spi_buf
next_hop
btle_next_hop
dio_ssp_init
handle_usb
rbit
memset
btle_crcgen_lut
memcmp
btle_reverse_crc
btle_calc_crc
ubertooth_init
ubertooth_usb_init
wait
cc2400_rangetest
ego_main
